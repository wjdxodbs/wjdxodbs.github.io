import{r as d,j as e,t as p}from"./index-C_vzieaQ.js";import{N as y}from"./NoneNavHeader-vnX4mPUJ.js";import{L as w}from"./Loading-40w_W7_4.js";import{T as j}from"./Common-BS4uVQHZ.js";import{p as P}from"./영화포스터-Bxtv0lMT.js";import"./index-CP8RP8bd.js";import"./iconBase-rz0zWS2w.js";import"./index-prcx37CQ.js";var c;function E(n,t){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=document.querySelector('[src="'.concat(n,'"]'));if(r!=null&&c!==void 0)return c;if(r!=null&&m(t)!==void 0)return Promise.resolve(m(t));var o=document.createElement("script");return o.src=n,s.priority!==void 0&&(o.fetchPriority=s.priority),c=new Promise(function(l,a){document.head.appendChild(o),window.addEventListener("TossPayments:initialize:".concat(t),function(){m(t)!==void 0?l(m(t)):a(new Error("[TossPayments SDK] Failed to load script: [".concat(n,"]")))})}),c}function m(n){return window[n]}var N="https://js.tosspayments.com/v1/payment-widget";function b(n,t,s){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},o=r.src,l=o===void 0?N:o;return typeof window>"u"?Promise.resolve({}):E(l,"PaymentWidget").then(function(a){return a(n,t,s)})}const S="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let _=(n=21)=>{let t="",s=crypto.getRandomValues(new Uint8Array(n));for(;n--;)t+=S[s[n]&63];return t};var M={VITE_BASE_URL:"https://j10C204.p.ssafy.io",VITE_TOSS_API_KEY:"test_ck_Poxy1XQL8RxWO1957404V7nO5Wml",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const h=_();console.log(h);const U=()=>{const n="test_ck_Poxy1XQL8RxWO1957404V7nO5Wml",[t,s]=d.useState(null),[r]=d.useState(2e4),[o,l]=d.useState(!0),[a,v]=d.useState(!1);d.useEffect(()=>{const u=h;console.log(M),(async()=>{try{const i=await b(n,u);s(i)}catch(i){console.error("Error fetching payment widget:",i)}})()},[]),d.useEffect(()=>{if(t==null)return;t.renderPaymentMethods("#payment-widget",{value:r},{variantKey:"DEFAULT"}).on("ready",()=>{v(!0),l(!1)}),t.renderAgreement("#agreement",{variantKey:"AGREEMENT"})},[t,r]);const x=async()=>{if(t==null)return;const f=t.renderPaymentMethods("#payment-widget",{value:r}).getSelectedPaymentMethod().method;try{await(t==null?void 0:t.requestPayment({orderId:h,orderName:"엘리멘탈",successUrl:`${window.location.origin}/fund/payment/success?fundingCount=1&fundingId=2&method=${f}`,failUrl:`${window.location.origin}/fund/payment/fail`}))}catch(i){console.error("Error requesting payment:",i);const g=i.message;p(g)}};return e.jsxs("div",{className:"bg-white h-[100vh] flex flex-col",children:[e.jsxs("div",{className:"text-black bg-[#F5F5F5] rounded-b-[3vh] shadow-bgShadow",children:[e.jsx(y,{centerText:"펀딩신청"}),e.jsxs("div",{className:"flex justify-between p-[3vh]",children:[e.jsx("div",{className:"text-[20px] font-bold",children:"총 결제 금액"}),e.jsx("div",{className:"text-[20px] font-bold",children:"10,000원"})]})]}),e.jsxs("div",{className:"flex-1 none-scroll flex flex-col gap-[5vh] overflow-auto w-[100%] pt-[3vh]",children:[e.jsxs("div",{className:"text-[#333D4B] flex flex-col gap-[2vh] px-[3vh] z-10",children:[e.jsx("div",{className:"font-bold text-[20px]",children:"펀딩 정보"}),e.jsxs("div",{className:"flex gap-[2vh]",children:[e.jsx("img",{src:P,alt:"",className:"w-[13vh] rounded-[1vh]"}),e.jsxs("div",{className:"flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{children:"엘리멘탈"}),e.jsx("div",{children:"2024.03.09(토) 15:00"}),e.jsx("div",{children:"CGV 강남"})]}),e.jsx("div",{children:"일반 1"})]})]})]}),e.jsxs("div",{className:"relative top-[-11vh]",children:[e.jsx("div",{className:"w-[100%] h-[5vh] bg-white absolute top-0 z-[1]"}),e.jsxs("div",{className:"h-[1vh]",children:[e.jsx("div",{id:"payment-widget"}),e.jsx("div",{id:"agreement"})]})]})]}),a&&e.jsx("div",{className:"flex p-[3vh]",children:e.jsx("button",{id:"payment-button",disabled:!a,onClick:x,className:"flex-1 text-[2.5vh] font-bold rounded-[1vh] p-[2vh] shadow-bgRed bg-red-600",children:"결제하기"})}),o&&e.jsx(w,{}),e.jsx(j,{})]})};export{U as default};
