import{k as m,u as d,r as g,j as l,d as u}from"./index--j5u57V6.js";import{a as c}from"./axios-L6U4YIEh.js";const x=()=>{const{social:n}=m(),s=new URL(document.URL).searchParams.get("code"),t="https://i10c203.p.ssafy.io",e=d();s||e("/");const i=async()=>{try{const a=await c.post(`${t}/api/login/${n}`,{code:s}),o=a.data.accessToken,r=await c.get(`${t}/api/users`,{headers:{Authorization:o}});localStorage.setItem("jwt",o),localStorage.setItem("user",JSON.stringify({socialId:a.data.socialId,imageUrl:r.data.imageUrl,nickname:r.data.nickname})),e("/",{replace:!0})}catch(a){console.log(a)}};return g.useEffect(()=>{i()},[]),l.jsx(u,{})};export{x as default};
