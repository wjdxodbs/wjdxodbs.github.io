import{r as m,d as h,j as e,c as x,u as v,h as f}from"./index-Z2rYjAJg.js";import{s as u,i as p,H as g}from"./Header-tdHiBLaV.js";import{a as j}from"./index-CYDPv68f.js";import{a as S}from"./common-rEVp0r0a.js";import{d as C}from"./atoms-Cc4jQiea.js";import"./iconBase-D0I5ewFB.js";const M=({onSearch:c,title:s,setTitle:l})=>{const n=m.useRef(null),i=h(u);m.useEffect(()=>{n.current.focus()},[]);const t=r=>{l(r.target.value),r.target.value===""&&c("")},d=r=>{r.preventDefault(),c(s),s!==""&&i(o=>{const N=o.length?o[o.length-1].id:0;return[...o,{id:N+1,title:s}]}),n.current.blur()},a=()=>{l(""),n.current.focus(),c("")};return e.jsx("form",{className:"MusicSearchInput",onSubmit:d,children:e.jsx("div",{className:"container",children:e.jsxs("div",{className:"input-div",children:[e.jsx("input",{className:"input",ref:n,type:"text",placeholder:"검색어를 입력하세요.",value:s,onChange:t,maxLength:10}),s&&e.jsx(j,{className:"clear-button",onClick:a})]})})})},b=()=>e.jsx("div",{className:"SearchedWords",children:e.jsxs("div",{className:"no-word-container",children:[e.jsx("div",{className:"title",children:"앗!"}),e.jsx("div",{className:"subtitle",children:"최근 검색어 내역이 없어요."})]})}),k=({onWordClick:c})=>{const[s,l]=x(u),n=t=>{l(d=>d.filter(a=>a.id!==t))},i=()=>{l([])};return s.length===0?e.jsx(b,{}):e.jsxs("div",{className:"SearchedWords",children:[e.jsxs("div",{className:"container",children:[e.jsx("div",{className:"title",children:"최근 검색어"}),e.jsx("div",{className:"all-delete",onClick:i,children:"전체 삭제"})]}),e.jsx("div",{className:"word-list",children:s.map(t=>e.jsxs("div",{className:"word-item",children:[e.jsx("div",{onClick:()=>c(t.title),children:t.title}),e.jsx(j,{className:"word-delete",onClick:()=>n(t.id)})]},t.id))})]})},I=({searchResults:c,onWordClick:s})=>{const l=v(),n=i=>{l(`/music/drop/${i.youtubeId}`,{state:{song:i}})};return e.jsx("div",{className:"MusicList",children:c&&c.length>0?e.jsx("div",{className:"searchResults",children:c.map((i,t)=>e.jsxs("div",{className:"result-item",onClick:()=>n(i),children:[e.jsx("div",{className:"image-container",children:e.jsx("img",{src:i.albumImage})}),e.jsxs("div",{className:"item-wide",children:[e.jsxs("div",{className:"item-detail",children:[e.jsx("div",{className:"item-title",children:i.title}),e.jsx("div",{className:"item-artist",children:i.artist})]}),e.jsx("div",{className:"item-length",children:i.playTime})]})]},t))}):e.jsx(k,{onWordClick:s})})};S();const L=()=>{const[c]=m.useState([]),[s,l]=x(p),n=h(u),i=f(C);m.useEffect(()=>{s!==""&&(t(s),i(),n(a=>{const r=a.length?a[a.length-1].id:0;return[...a,{id:r+1,title:s}]}))},[]);const t=async a=>{l(a)},d=a=>{l(a),t(a)};return e.jsxs("div",{className:"MusicSearchPage",children:[e.jsxs("div",{className:"container",children:[e.jsx(g,{}),e.jsx(M,{onSearch:t,title:s,setTitle:l})]}),e.jsx(I,{searchResults:c,onWordClick:d})]})};export{L as default};
