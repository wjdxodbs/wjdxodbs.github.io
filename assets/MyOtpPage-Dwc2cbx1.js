import{b as d,r as i,j as s,M as l,o as x,H as p}from"./index-BOwGEflL.js";import{T as j,t as m}from"./toastMsg-Tr0sfbHq.js";const h=d(),u=async()=>{try{const{data:t}=await h.get("/users/watch/otp");return{data:t}}catch(t){throw t}},v=()=>{const[t,o]=i.useState(""),[e,c]=i.useState(0),n=async()=>{var a;try{const r=await u();o(r.data),c(60),setTimeout(()=>{o(""),c(0)},6e4)}catch(r){x.isAxiosError(r)&&((a=r.response)==null?void 0:a.status)===429&&m("너무 많은 요청을 보냈습니다. 잠시 후에 다시 시도해주세요.")}};return i.useEffect(()=>{if(e>0){const a=setInterval(()=>{c(e-1)},1e3);return()=>clearInterval(a)}},[e]),s.jsxs("div",{className:"MyOtpBody",children:[s.jsxs("div",{className:"otp-title",children:[t?s.jsx("div",{className:"otp-number",children:t}):s.jsx("div",{className:"otp-no-result",children:"발급된 번호가 없습니다"}),s.jsxs("div",{className:"otp-desc",children:[s.jsx("div",{children:"60초 내에 발급된 번호를"}),s.jsx("div",{children:"워치 화면에 입력해주세요"}),t!==""&&s.jsxs("div",{children:["유효시간 : ",e,"초"]})]})]}),s.jsx(l,{onClick:n,btnText:"발급받기"}),s.jsx(j,{})]})},M=()=>s.jsxs("div",{className:"OtpPage",children:[s.jsx(p,{centerText:"연동하기"}),s.jsx("div",{className:"body",children:s.jsx(v,{})})]});export{M as default};
