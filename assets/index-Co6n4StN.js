var y={};Object.defineProperty(y,"__esModule",{value:!0});var k=y.recoilPersist=void 0;const v=(h={})=>{if(typeof window>"u")return{persistAtom:()=>{}};const{key:s="recoil-persist",storage:n=localStorage,converter:c=JSON}=h,d=({onSet:e,node:t,trigger:o,setSelf:i})=>{if(o==="get"){const r=p();typeof r.then=="function"&&r.then(f=>{f.hasOwnProperty(t.key)&&i(f[t.key])}),r.hasOwnProperty(t.key)&&i(r[t.key])}e(async(r,f,g)=>{const u=p();typeof u.then=="function"?u.then(P=>a(r,P,t.key,g)):a(r,u,t.key,g)})},a=(e,t,o,i)=>{i?delete t[o]:t[o]=e,m(t)},p=()=>{const e=n.getItem(s);return e==null?{}:typeof e=="string"?l(e):typeof e.then=="function"?e.then(l):{}},l=e=>{if(e===void 0)return{};try{return c.parse(e)}catch(t){return console.error(t),{}}},m=e=>{try{typeof n.mergeItem=="function"?n.mergeItem(s,c.stringify(e)):n.setItem(s,c.stringify(e))}catch(t){console.error(t)}};return{persistAtom:d}};k=y.recoilPersist=v;export{k as r};
