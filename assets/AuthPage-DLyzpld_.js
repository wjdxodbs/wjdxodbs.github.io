import{u as c,a as n,r as i,j as a}from"./index-DecRDppK.js";import{a as g}from"./common-rEVp0r0a.js";async function u(r,o){try{const{data:e}=await g().get(`/users/auth/login/${r}?code=${o}`);return console.log(e),e}catch(e){throw console.error(e),e}}const p=()=>{const{provider:r}=c(),e=new URL(document.URL).searchParams.get("code"),s=n();return i.useEffect(()=>{(async()=>{try{if(r&&e){const t=await u(r,e);localStorage.setItem("jwt",t.accessToken),s("/",{replace:!0})}else throw new Error("Provider or code missing")}catch(t){console.error("Error while getting token:",t)}})()},[]),a.jsx(a.Fragment,{})};export{p as default};
