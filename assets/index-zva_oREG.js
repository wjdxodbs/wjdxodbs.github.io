var Oj=Object.defineProperty;var Dj=(t,n,e)=>n in t?Oj(t,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[n]=e;var dr=(t,n,e)=>(Dj(t,typeof n!="symbol"?n+"":n,e),e);function Mj(t,n){for(var e=0;e<n.length;e++){const r=n[e];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function e(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=e(i);fetch(i.href,o)}})();var ve=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function x_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Bv(t){if(t.__esModule)return t;var n=t.default;if(typeof n=="function"){var e=function r(){return this instanceof r?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};e.prototype=n.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),e}var S_={exports:{}},jv={},E_={exports:{}},ft={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qf=Symbol.for("react.element"),Pj=Symbol.for("react.portal"),Lj=Symbol.for("react.fragment"),Fj=Symbol.for("react.strict_mode"),zj=Symbol.for("react.profiler"),Bj=Symbol.for("react.provider"),jj=Symbol.for("react.context"),Vj=Symbol.for("react.forward_ref"),$j=Symbol.for("react.suspense"),Uj=Symbol.for("react.memo"),Wj=Symbol.for("react.lazy"),MR=Symbol.iterator;function Hj(t){return t===null||typeof t!="object"?null:(t=MR&&t[MR]||t["@@iterator"],typeof t=="function"?t:null)}var C_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R_=Object.assign,T_={};function yc(t,n,e){this.props=t,this.context=n,this.refs=T_,this.updater=e||C_}yc.prototype.isReactComponent={};yc.prototype.setState=function(t,n){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,n,"setState")};yc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function N_(){}N_.prototype=yc.prototype;function Rx(t,n,e){this.props=t,this.context=n,this.refs=T_,this.updater=e||C_}var Tx=Rx.prototype=new N_;Tx.constructor=Rx;R_(Tx,yc.prototype);Tx.isPureReactComponent=!0;var PR=Array.isArray,k_=Object.prototype.hasOwnProperty,Nx={current:null},I_={key:!0,ref:!0,__self:!0,__source:!0};function __(t,n,e){var r,i={},o=null,a=null;if(n!=null)for(r in n.ref!==void 0&&(a=n.ref),n.key!==void 0&&(o=""+n.key),n)k_.call(n,r)&&!I_.hasOwnProperty(r)&&(i[r]=n[r]);var s=arguments.length-2;if(s===1)i.children=e;else if(1<s){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+2];i.children=u}if(t&&t.defaultProps)for(r in s=t.defaultProps,s)i[r]===void 0&&(i[r]=s[r]);return{$$typeof:qf,type:t,key:o,ref:a,props:i,_owner:Nx.current}}function Gj(t,n){return{$$typeof:qf,type:t.type,key:n,ref:t.ref,props:t.props,_owner:t._owner}}function kx(t){return typeof t=="object"&&t!==null&&t.$$typeof===qf}function qj(t){var n={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(e){return n[e]})}var LR=/\/+/g;function l0(t,n){return typeof t=="object"&&t!==null&&t.key!=null?qj(""+t.key):n.toString(36)}function Hh(t,n,e,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case qf:case Pj:a=!0}}if(a)return a=t,i=i(a),t=r===""?"."+l0(a,0):r,PR(i)?(e="",t!=null&&(e=t.replace(LR,"$&/")+"/"),Hh(i,n,e,"",function(l){return l})):i!=null&&(kx(i)&&(i=Gj(i,e+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(LR,"$&/")+"/")+t)),n.push(i)),1;if(a=0,r=r===""?".":r+":",PR(t))for(var s=0;s<t.length;s++){o=t[s];var u=r+l0(o,s);a+=Hh(o,n,e,u,i)}else if(u=Hj(t),typeof u=="function")for(t=u.call(t),s=0;!(o=t.next()).done;)o=o.value,u=r+l0(o,s++),a+=Hh(o,n,e,u,i);else if(o==="object")throw n=String(t),Error("Objects are not valid as a React child (found: "+(n==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":n)+"). If you meant to render a collection of children, use an array instead.");return a}function Jp(t,n,e){if(t==null)return t;var r=[],i=0;return Hh(t,r,"","",function(o){return n.call(e,o,i++)}),r}function Kj(t){if(t._status===-1){var n=t._result;n=n(),n.then(function(e){(t._status===0||t._status===-1)&&(t._status=1,t._result=e)},function(e){(t._status===0||t._status===-1)&&(t._status=2,t._result=e)}),t._status===-1&&(t._status=0,t._result=n)}if(t._status===1)return t._result.default;throw t._result}var xr={current:null},Gh={transition:null},Xj={ReactCurrentDispatcher:xr,ReactCurrentBatchConfig:Gh,ReactCurrentOwner:Nx};ft.Children={map:Jp,forEach:function(t,n,e){Jp(t,function(){n.apply(this,arguments)},e)},count:function(t){var n=0;return Jp(t,function(){n++}),n},toArray:function(t){return Jp(t,function(n){return n})||[]},only:function(t){if(!kx(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ft.Component=yc;ft.Fragment=Lj;ft.Profiler=zj;ft.PureComponent=Rx;ft.StrictMode=Fj;ft.Suspense=$j;ft.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Xj;ft.cloneElement=function(t,n,e){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=R_({},t.props),i=t.key,o=t.ref,a=t._owner;if(n!=null){if(n.ref!==void 0&&(o=n.ref,a=Nx.current),n.key!==void 0&&(i=""+n.key),t.type&&t.type.defaultProps)var s=t.type.defaultProps;for(u in n)k_.call(n,u)&&!I_.hasOwnProperty(u)&&(r[u]=n[u]===void 0&&s!==void 0?s[u]:n[u])}var u=arguments.length-2;if(u===1)r.children=e;else if(1<u){s=Array(u);for(var l=0;l<u;l++)s[l]=arguments[l+2];r.children=s}return{$$typeof:qf,type:t.type,key:i,ref:o,props:r,_owner:a}};ft.createContext=function(t){return t={$$typeof:jj,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Bj,_context:t},t.Consumer=t};ft.createElement=__;ft.createFactory=function(t){var n=__.bind(null,t);return n.type=t,n};ft.createRef=function(){return{current:null}};ft.forwardRef=function(t){return{$$typeof:Vj,render:t}};ft.isValidElement=kx;ft.lazy=function(t){return{$$typeof:Wj,_payload:{_status:-1,_result:t},_init:Kj}};ft.memo=function(t,n){return{$$typeof:Uj,type:t,compare:n===void 0?null:n}};ft.startTransition=function(t){var n=Gh.transition;Gh.transition={};try{t()}finally{Gh.transition=n}};ft.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};ft.useCallback=function(t,n){return xr.current.useCallback(t,n)};ft.useContext=function(t){return xr.current.useContext(t)};ft.useDebugValue=function(){};ft.useDeferredValue=function(t){return xr.current.useDeferredValue(t)};ft.useEffect=function(t,n){return xr.current.useEffect(t,n)};ft.useId=function(){return xr.current.useId()};ft.useImperativeHandle=function(t,n,e){return xr.current.useImperativeHandle(t,n,e)};ft.useInsertionEffect=function(t,n){return xr.current.useInsertionEffect(t,n)};ft.useLayoutEffect=function(t,n){return xr.current.useLayoutEffect(t,n)};ft.useMemo=function(t,n){return xr.current.useMemo(t,n)};ft.useReducer=function(t,n,e){return xr.current.useReducer(t,n,e)};ft.useRef=function(t){return xr.current.useRef(t)};ft.useState=function(t){return xr.current.useState(t)};ft.useSyncExternalStore=function(t,n,e){return xr.current.useSyncExternalStore(t,n,e)};ft.useTransition=function(){return xr.current.useTransition()};ft.version="18.2.0";E_.exports=ft;var H=E_.exports;const _e=x_(H),Cm=Mj({__proto__:null,default:_e},[H]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yj=H,Jj=Symbol.for("react.element"),Qj=Symbol.for("react.fragment"),Zj=Object.prototype.hasOwnProperty,eV=Yj.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,tV={key:!0,ref:!0,__self:!0,__source:!0};function A_(t,n,e){var r,i={},o=null,a=null;e!==void 0&&(o=""+e),n.key!==void 0&&(o=""+n.key),n.ref!==void 0&&(a=n.ref);for(r in n)Zj.call(n,r)&&!tV.hasOwnProperty(r)&&(i[r]=n[r]);if(t&&t.defaultProps)for(r in n=t.defaultProps,n)i[r]===void 0&&(i[r]=n[r]);return{$$typeof:Jj,type:t,key:o,ref:a,props:i,_owner:eV.current}}jv.Fragment=Qj;jv.jsx=A_;jv.jsxs=A_;S_.exports=jv;var T=S_.exports,O_={exports:{}},ii={},D_={exports:{}},M_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function n(_,F){var L=_.length;_.push(F);e:for(;0<L;){var W=L-1>>>1,B=_[W];if(0<i(B,F))_[W]=F,_[L]=B,L=W;else break e}}function e(_){return _.length===0?null:_[0]}function r(_){if(_.length===0)return null;var F=_[0],L=_.pop();if(L!==F){_[0]=L;e:for(var W=0,B=_.length,q=B>>>1;W<q;){var G=2*(W+1)-1,re=_[G],j=G+1,ae=_[j];if(0>i(re,L))j<B&&0>i(ae,re)?(_[W]=ae,_[j]=L,W=j):(_[W]=re,_[G]=L,W=G);else if(j<B&&0>i(ae,L))_[W]=ae,_[j]=L,W=j;else break e}}return F}function i(_,F){var L=_.sortIndex-F.sortIndex;return L!==0?L:_.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,s=a.now();t.unstable_now=function(){return a.now()-s}}var u=[],l=[],c=1,d=null,f=3,p=!1,h=!1,v=!1,g=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(_){for(var F=e(l);F!==null;){if(F.callback===null)r(l);else if(F.startTime<=_)r(l),F.sortIndex=F.expirationTime,n(u,F);else break;F=e(l)}}function w(_){if(v=!1,b(_),!h)if(e(u)!==null)h=!0,A(x);else{var F=e(l);F!==null&&I(w,F.startTime-_)}}function x(_,F){h=!1,v&&(v=!1,m(S),S=-1),p=!0;var L=f;try{for(b(F),d=e(u);d!==null&&(!(d.expirationTime>F)||_&&!M());){var W=d.callback;if(typeof W=="function"){d.callback=null,f=d.priorityLevel;var B=W(d.expirationTime<=F);F=t.unstable_now(),typeof B=="function"?d.callback=B:d===e(u)&&r(u),b(F)}else r(u);d=e(u)}if(d!==null)var q=!0;else{var G=e(l);G!==null&&I(w,G.startTime-F),q=!1}return q}finally{d=null,f=L,p=!1}}var C=!1,E=null,S=-1,N=5,k=-1;function M(){return!(t.unstable_now()-k<N)}function D(){if(E!==null){var _=t.unstable_now();k=_;var F=!0;try{F=E(!0,_)}finally{F?R():(C=!1,E=null)}}else C=!1}var R;if(typeof y=="function")R=function(){y(D)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,P=O.port2;O.port1.onmessage=D,R=function(){P.postMessage(null)}}else R=function(){g(D,0)};function A(_){E=_,C||(C=!0,R())}function I(_,F){S=g(function(){_(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(_){_.callback=null},t.unstable_continueExecution=function(){h||p||(h=!0,A(x))},t.unstable_forceFrameRate=function(_){0>_||125<_?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<_?Math.floor(1e3/_):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return e(u)},t.unstable_next=function(_){switch(f){case 1:case 2:case 3:var F=3;break;default:F=f}var L=f;f=F;try{return _()}finally{f=L}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(_,F){switch(_){case 1:case 2:case 3:case 4:case 5:break;default:_=3}var L=f;f=_;try{return F()}finally{f=L}},t.unstable_scheduleCallback=function(_,F,L){var W=t.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?W+L:W):L=W,_){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=L+B,_={id:c++,callback:F,priorityLevel:_,startTime:L,expirationTime:B,sortIndex:-1},L>W?(_.sortIndex=L,n(l,_),e(u)===null&&_===e(l)&&(v?(m(S),S=-1):v=!0,I(w,L-W))):(_.sortIndex=B,n(u,_),h||p||(h=!0,A(x))),_},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(_){var F=f;return function(){var L=f;f=F;try{return _.apply(this,arguments)}finally{f=L}}}})(M_);D_.exports=M_;var nV=D_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P_=H,Zr=nV;function ye(t){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+t,e=1;e<arguments.length;e++)n+="&args[]="+encodeURIComponent(arguments[e]);return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var L_=new Set,of={};function wu(t,n){jl(t,n),jl(t+"Capture",n)}function jl(t,n){for(of[t]=n,t=0;t<n.length;t++)L_.add(n[t])}var Yo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),nb=Object.prototype.hasOwnProperty,rV=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,FR={},zR={};function iV(t){return nb.call(zR,t)?!0:nb.call(FR,t)?!1:rV.test(t)?zR[t]=!0:(FR[t]=!0,!1)}function oV(t,n,e,r){if(e!==null&&e.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return r?!1:e!==null?!e.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function aV(t,n,e,r){if(n===null||typeof n>"u"||oV(t,n,e,r))return!0;if(r)return!1;if(e!==null)switch(e.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function Sr(t,n,e,r,i,o,a){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=e,this.propertyName=t,this.type=n,this.sanitizeURL=o,this.removeEmptyString=a}var Jn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Jn[t]=new Sr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var n=t[0];Jn[n]=new Sr(n,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Jn[t]=new Sr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Jn[t]=new Sr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Jn[t]=new Sr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Jn[t]=new Sr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Jn[t]=new Sr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Jn[t]=new Sr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Jn[t]=new Sr(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ix=/[\-:]([a-z])/g;function _x(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var n=t.replace(Ix,_x);Jn[n]=new Sr(n,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var n=t.replace(Ix,_x);Jn[n]=new Sr(n,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var n=t.replace(Ix,_x);Jn[n]=new Sr(n,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Jn[t]=new Sr(t,1,!1,t.toLowerCase(),null,!1,!1)});Jn.xlinkHref=new Sr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Jn[t]=new Sr(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ax(t,n,e,r){var i=Jn.hasOwnProperty(n)?Jn[n]:null;(i!==null?i.type!==0:r||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(aV(n,e,i,r)&&(e=null),r||i===null?iV(n)&&(e===null?t.removeAttribute(n):t.setAttribute(n,""+e)):i.mustUseProperty?t[i.propertyName]=e===null?i.type===3?!1:"":e:(n=i.attributeName,r=i.attributeNamespace,e===null?t.removeAttribute(n):(i=i.type,e=i===3||i===4&&e===!0?"":""+e,r?t.setAttributeNS(r,n,e):t.setAttribute(n,e))))}var ia=P_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Qp=Symbol.for("react.element"),sl=Symbol.for("react.portal"),ul=Symbol.for("react.fragment"),Ox=Symbol.for("react.strict_mode"),rb=Symbol.for("react.profiler"),F_=Symbol.for("react.provider"),z_=Symbol.for("react.context"),Dx=Symbol.for("react.forward_ref"),ib=Symbol.for("react.suspense"),ob=Symbol.for("react.suspense_list"),Mx=Symbol.for("react.memo"),Ea=Symbol.for("react.lazy"),B_=Symbol.for("react.offscreen"),BR=Symbol.iterator;function Yc(t){return t===null||typeof t!="object"?null:(t=BR&&t[BR]||t["@@iterator"],typeof t=="function"?t:null)}var rn=Object.assign,c0;function kd(t){if(c0===void 0)try{throw Error()}catch(e){var n=e.stack.trim().match(/\n( *(at )?)/);c0=n&&n[1]||""}return`
`+c0+t}var d0=!1;function f0(t,n){if(!t||d0)return"";d0=!0;var e=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(l){var r=l}Reflect.construct(t,[],n)}else{try{n.call()}catch(l){r=l}t.call(n.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),o=r.stack.split(`
`),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(a!==1||s!==1)do if(a--,s--,0>s||i[a]!==o[s]){var u=`
`+i[a].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=a&&0<=s);break}}}finally{d0=!1,Error.prepareStackTrace=e}return(t=t?t.displayName||t.name:"")?kd(t):""}function sV(t){switch(t.tag){case 5:return kd(t.type);case 16:return kd("Lazy");case 13:return kd("Suspense");case 19:return kd("SuspenseList");case 0:case 2:case 15:return t=f0(t.type,!1),t;case 11:return t=f0(t.type.render,!1),t;case 1:return t=f0(t.type,!0),t;default:return""}}function ab(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ul:return"Fragment";case sl:return"Portal";case rb:return"Profiler";case Ox:return"StrictMode";case ib:return"Suspense";case ob:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case z_:return(t.displayName||"Context")+".Consumer";case F_:return(t._context.displayName||"Context")+".Provider";case Dx:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Mx:return n=t.displayName||null,n!==null?n:ab(t.type)||"Memo";case Ea:n=t._payload,t=t._init;try{return ab(t(n))}catch{}}return null}function uV(t){var n=t.type;switch(t.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=n.render,t=t.displayName||t.name||"",n.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ab(n);case 8:return n===Ox?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function is(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function j_(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function lV(t){var n=j_(t)?"checked":"value",e=Object.getOwnPropertyDescriptor(t.constructor.prototype,n),r=""+t[n];if(!t.hasOwnProperty(n)&&typeof e<"u"&&typeof e.get=="function"&&typeof e.set=="function"){var i=e.get,o=e.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,o.call(this,a)}}),Object.defineProperty(t,n,{enumerable:e.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function Zp(t){t._valueTracker||(t._valueTracker=lV(t))}function V_(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var e=n.getValue(),r="";return t&&(r=j_(t)?t.checked?"true":"false":t.value),t=r,t!==e?(n.setValue(t),!0):!1}function Rm(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function sb(t,n){var e=n.checked;return rn({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:e??t._wrapperState.initialChecked})}function jR(t,n){var e=n.defaultValue==null?"":n.defaultValue,r=n.checked!=null?n.checked:n.defaultChecked;e=is(n.value!=null?n.value:e),t._wrapperState={initialChecked:r,initialValue:e,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function $_(t,n){n=n.checked,n!=null&&Ax(t,"checked",n,!1)}function ub(t,n){$_(t,n);var e=is(n.value),r=n.type;if(e!=null)r==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+e):t.value!==""+e&&(t.value=""+e);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}n.hasOwnProperty("value")?lb(t,n.type,e):n.hasOwnProperty("defaultValue")&&lb(t,n.type,is(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(t.defaultChecked=!!n.defaultChecked)}function VR(t,n,e){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var r=n.type;if(!(r!=="submit"&&r!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+t._wrapperState.initialValue,e||n===t.value||(t.value=n),t.defaultValue=n}e=t.name,e!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,e!==""&&(t.name=e)}function lb(t,n,e){(n!=="number"||Rm(t.ownerDocument)!==t)&&(e==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+e&&(t.defaultValue=""+e))}var Id=Array.isArray;function El(t,n,e,r){if(t=t.options,n){n={};for(var i=0;i<e.length;i++)n["$"+e[i]]=!0;for(e=0;e<t.length;e++)i=n.hasOwnProperty("$"+t[e].value),t[e].selected!==i&&(t[e].selected=i),i&&r&&(t[e].defaultSelected=!0)}else{for(e=""+is(e),n=null,i=0;i<t.length;i++){if(t[i].value===e){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}n!==null||t[i].disabled||(n=t[i])}n!==null&&(n.selected=!0)}}function cb(t,n){if(n.dangerouslySetInnerHTML!=null)throw Error(ye(91));return rn({},n,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function $R(t,n){var e=n.value;if(e==null){if(e=n.children,n=n.defaultValue,e!=null){if(n!=null)throw Error(ye(92));if(Id(e)){if(1<e.length)throw Error(ye(93));e=e[0]}n=e}n==null&&(n=""),e=n}t._wrapperState={initialValue:is(e)}}function U_(t,n){var e=is(n.value),r=is(n.defaultValue);e!=null&&(e=""+e,e!==t.value&&(t.value=e),n.defaultValue==null&&t.defaultValue!==e&&(t.defaultValue=e)),r!=null&&(t.defaultValue=""+r)}function UR(t){var n=t.textContent;n===t._wrapperState.initialValue&&n!==""&&n!==null&&(t.value=n)}function W_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function db(t,n){return t==null||t==="http://www.w3.org/1999/xhtml"?W_(n):t==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var eh,H_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,e,r,i){MSApp.execUnsafeLocalFunction(function(){return t(n,e,r,i)})}:t}(function(t,n){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=n;else{for(eh=eh||document.createElement("div"),eh.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=eh.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;n.firstChild;)t.appendChild(n.firstChild)}});function af(t,n){if(n){var e=t.firstChild;if(e&&e===t.lastChild&&e.nodeType===3){e.nodeValue=n;return}}t.textContent=n}var Bd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},cV=["Webkit","ms","Moz","O"];Object.keys(Bd).forEach(function(t){cV.forEach(function(n){n=n+t.charAt(0).toUpperCase()+t.substring(1),Bd[n]=Bd[t]})});function G_(t,n,e){return n==null||typeof n=="boolean"||n===""?"":e||typeof n!="number"||n===0||Bd.hasOwnProperty(t)&&Bd[t]?(""+n).trim():n+"px"}function q_(t,n){t=t.style;for(var e in n)if(n.hasOwnProperty(e)){var r=e.indexOf("--")===0,i=G_(e,n[e],r);e==="float"&&(e="cssFloat"),r?t.setProperty(e,i):t[e]=i}}var dV=rn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fb(t,n){if(n){if(dV[t]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(ye(137,t));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(ye(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(ye(61))}if(n.style!=null&&typeof n.style!="object")throw Error(ye(62))}}function pb(t,n){if(t.indexOf("-")===-1)return typeof n.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hb=null;function Px(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var mb=null,Cl=null,Rl=null;function WR(t){if(t=Yf(t)){if(typeof mb!="function")throw Error(ye(280));var n=t.stateNode;n&&(n=Hv(n),mb(t.stateNode,t.type,n))}}function K_(t){Cl?Rl?Rl.push(t):Rl=[t]:Cl=t}function X_(){if(Cl){var t=Cl,n=Rl;if(Rl=Cl=null,WR(t),n)for(t=0;t<n.length;t++)WR(n[t])}}function Y_(t,n){return t(n)}function J_(){}var p0=!1;function Q_(t,n,e){if(p0)return t(n,e);p0=!0;try{return Y_(t,n,e)}finally{p0=!1,(Cl!==null||Rl!==null)&&(J_(),X_())}}function sf(t,n){var e=t.stateNode;if(e===null)return null;var r=Hv(e);if(r===null)return null;e=r[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(e&&typeof e!="function")throw Error(ye(231,n,typeof e));return e}var vb=!1;if(Yo)try{var Jc={};Object.defineProperty(Jc,"passive",{get:function(){vb=!0}}),window.addEventListener("test",Jc,Jc),window.removeEventListener("test",Jc,Jc)}catch{vb=!1}function fV(t,n,e,r,i,o,a,s,u){var l=Array.prototype.slice.call(arguments,3);try{n.apply(e,l)}catch(c){this.onError(c)}}var jd=!1,Tm=null,Nm=!1,gb=null,pV={onError:function(t){jd=!0,Tm=t}};function hV(t,n,e,r,i,o,a,s,u){jd=!1,Tm=null,fV.apply(pV,arguments)}function mV(t,n,e,r,i,o,a,s,u){if(hV.apply(this,arguments),jd){if(jd){var l=Tm;jd=!1,Tm=null}else throw Error(ye(198));Nm||(Nm=!0,gb=l)}}function xu(t){var n=t,e=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,n.flags&4098&&(e=n.return),t=n.return;while(t)}return n.tag===3?e:null}function Z_(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function HR(t){if(xu(t)!==t)throw Error(ye(188))}function vV(t){var n=t.alternate;if(!n){if(n=xu(t),n===null)throw Error(ye(188));return n!==t?null:t}for(var e=t,r=n;;){var i=e.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){e=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===e)return HR(i),t;if(o===r)return HR(i),n;o=o.sibling}throw Error(ye(188))}if(e.return!==r.return)e=i,r=o;else{for(var a=!1,s=i.child;s;){if(s===e){a=!0,e=i,r=o;break}if(s===r){a=!0,r=i,e=o;break}s=s.sibling}if(!a){for(s=o.child;s;){if(s===e){a=!0,e=o,r=i;break}if(s===r){a=!0,r=o,e=i;break}s=s.sibling}if(!a)throw Error(ye(189))}}if(e.alternate!==r)throw Error(ye(190))}if(e.tag!==3)throw Error(ye(188));return e.stateNode.current===e?t:n}function eA(t){return t=vV(t),t!==null?tA(t):null}function tA(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var n=tA(t);if(n!==null)return n;t=t.sibling}return null}var nA=Zr.unstable_scheduleCallback,GR=Zr.unstable_cancelCallback,gV=Zr.unstable_shouldYield,yV=Zr.unstable_requestPaint,vn=Zr.unstable_now,bV=Zr.unstable_getCurrentPriorityLevel,Lx=Zr.unstable_ImmediatePriority,rA=Zr.unstable_UserBlockingPriority,km=Zr.unstable_NormalPriority,wV=Zr.unstable_LowPriority,iA=Zr.unstable_IdlePriority,Vv=null,po=null;function xV(t){if(po&&typeof po.onCommitFiberRoot=="function")try{po.onCommitFiberRoot(Vv,t,void 0,(t.current.flags&128)===128)}catch{}}var Fi=Math.clz32?Math.clz32:CV,SV=Math.log,EV=Math.LN2;function CV(t){return t>>>=0,t===0?32:31-(SV(t)/EV|0)|0}var th=64,nh=4194304;function _d(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Im(t,n){var e=t.pendingLanes;if(e===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,a=e&268435455;if(a!==0){var s=a&~i;s!==0?r=_d(s):(o&=a,o!==0&&(r=_d(o)))}else a=e&~i,a!==0?r=_d(a):o!==0&&(r=_d(o));if(r===0)return 0;if(n!==0&&n!==r&&!(n&i)&&(i=r&-r,o=n&-n,i>=o||i===16&&(o&4194240)!==0))return n;if(r&4&&(r|=e&16),n=t.entangledLanes,n!==0)for(t=t.entanglements,n&=r;0<n;)e=31-Fi(n),i=1<<e,r|=t[e],n&=~i;return r}function RV(t,n){switch(t){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function TV(t,n){for(var e=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-Fi(o),s=1<<a,u=i[a];u===-1?(!(s&e)||s&r)&&(i[a]=RV(s,n)):u<=n&&(t.expiredLanes|=s),o&=~s}}function yb(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function oA(){var t=th;return th<<=1,!(th&4194240)&&(th=64),t}function h0(t){for(var n=[],e=0;31>e;e++)n.push(t);return n}function Kf(t,n,e){t.pendingLanes|=n,n!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,n=31-Fi(n),t[n]=e}function NV(t,n){var e=t.pendingLanes&~n;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=n,t.mutableReadLanes&=n,t.entangledLanes&=n,n=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<e;){var i=31-Fi(e),o=1<<i;n[i]=0,r[i]=-1,t[i]=-1,e&=~o}}function Fx(t,n){var e=t.entangledLanes|=n;for(t=t.entanglements;e;){var r=31-Fi(e),i=1<<r;i&n|t[r]&n&&(t[r]|=n),e&=~i}}var At=0;function aA(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var sA,zx,uA,lA,cA,bb=!1,rh=[],$a=null,Ua=null,Wa=null,uf=new Map,lf=new Map,Na=[],kV="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function qR(t,n){switch(t){case"focusin":case"focusout":$a=null;break;case"dragenter":case"dragleave":Ua=null;break;case"mouseover":case"mouseout":Wa=null;break;case"pointerover":case"pointerout":uf.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":lf.delete(n.pointerId)}}function Qc(t,n,e,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:n,domEventName:e,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},n!==null&&(n=Yf(n),n!==null&&zx(n)),t):(t.eventSystemFlags|=r,n=t.targetContainers,i!==null&&n.indexOf(i)===-1&&n.push(i),t)}function IV(t,n,e,r,i){switch(n){case"focusin":return $a=Qc($a,t,n,e,r,i),!0;case"dragenter":return Ua=Qc(Ua,t,n,e,r,i),!0;case"mouseover":return Wa=Qc(Wa,t,n,e,r,i),!0;case"pointerover":var o=i.pointerId;return uf.set(o,Qc(uf.get(o)||null,t,n,e,r,i)),!0;case"gotpointercapture":return o=i.pointerId,lf.set(o,Qc(lf.get(o)||null,t,n,e,r,i)),!0}return!1}function dA(t){var n=$s(t.target);if(n!==null){var e=xu(n);if(e!==null){if(n=e.tag,n===13){if(n=Z_(e),n!==null){t.blockedOn=n,cA(t.priority,function(){uA(e)});return}}else if(n===3&&e.stateNode.current.memoizedState.isDehydrated){t.blockedOn=e.tag===3?e.stateNode.containerInfo:null;return}}}t.blockedOn=null}function qh(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var e=wb(t.domEventName,t.eventSystemFlags,n[0],t.nativeEvent);if(e===null){e=t.nativeEvent;var r=new e.constructor(e.type,e);hb=r,e.target.dispatchEvent(r),hb=null}else return n=Yf(e),n!==null&&zx(n),t.blockedOn=e,!1;n.shift()}return!0}function KR(t,n,e){qh(t)&&e.delete(n)}function _V(){bb=!1,$a!==null&&qh($a)&&($a=null),Ua!==null&&qh(Ua)&&(Ua=null),Wa!==null&&qh(Wa)&&(Wa=null),uf.forEach(KR),lf.forEach(KR)}function Zc(t,n){t.blockedOn===n&&(t.blockedOn=null,bb||(bb=!0,Zr.unstable_scheduleCallback(Zr.unstable_NormalPriority,_V)))}function cf(t){function n(i){return Zc(i,t)}if(0<rh.length){Zc(rh[0],t);for(var e=1;e<rh.length;e++){var r=rh[e];r.blockedOn===t&&(r.blockedOn=null)}}for($a!==null&&Zc($a,t),Ua!==null&&Zc(Ua,t),Wa!==null&&Zc(Wa,t),uf.forEach(n),lf.forEach(n),e=0;e<Na.length;e++)r=Na[e],r.blockedOn===t&&(r.blockedOn=null);for(;0<Na.length&&(e=Na[0],e.blockedOn===null);)dA(e),e.blockedOn===null&&Na.shift()}var Tl=ia.ReactCurrentBatchConfig,_m=!0;function AV(t,n,e,r){var i=At,o=Tl.transition;Tl.transition=null;try{At=1,Bx(t,n,e,r)}finally{At=i,Tl.transition=o}}function OV(t,n,e,r){var i=At,o=Tl.transition;Tl.transition=null;try{At=4,Bx(t,n,e,r)}finally{At=i,Tl.transition=o}}function Bx(t,n,e,r){if(_m){var i=wb(t,n,e,r);if(i===null)C0(t,n,r,Am,e),qR(t,r);else if(IV(i,t,n,e,r))r.stopPropagation();else if(qR(t,r),n&4&&-1<kV.indexOf(t)){for(;i!==null;){var o=Yf(i);if(o!==null&&sA(o),o=wb(t,n,e,r),o===null&&C0(t,n,r,Am,e),o===i)break;i=o}i!==null&&r.stopPropagation()}else C0(t,n,r,null,e)}}var Am=null;function wb(t,n,e,r){if(Am=null,t=Px(r),t=$s(t),t!==null)if(n=xu(t),n===null)t=null;else if(e=n.tag,e===13){if(t=Z_(n),t!==null)return t;t=null}else if(e===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null);return Am=t,null}function fA(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(bV()){case Lx:return 1;case rA:return 4;case km:case wV:return 16;case iA:return 536870912;default:return 16}default:return 16}}var Aa=null,jx=null,Kh=null;function pA(){if(Kh)return Kh;var t,n=jx,e=n.length,r,i="value"in Aa?Aa.value:Aa.textContent,o=i.length;for(t=0;t<e&&n[t]===i[t];t++);var a=e-t;for(r=1;r<=a&&n[e-r]===i[o-r];r++);return Kh=i.slice(t,1<r?1-r:void 0)}function Xh(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function ih(){return!0}function XR(){return!1}function oi(t){function n(e,r,i,o,a){this._reactName=e,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var s in t)t.hasOwnProperty(s)&&(e=t[s],this[s]=e?e(o):o[s]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?ih:XR,this.isPropagationStopped=XR,this}return rn(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():typeof e.returnValue!="unknown"&&(e.returnValue=!1),this.isDefaultPrevented=ih)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():typeof e.cancelBubble!="unknown"&&(e.cancelBubble=!0),this.isPropagationStopped=ih)},persist:function(){},isPersistent:ih}),n}var bc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vx=oi(bc),Xf=rn({},bc,{view:0,detail:0}),DV=oi(Xf),m0,v0,ed,$v=rn({},Xf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$x,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ed&&(ed&&t.type==="mousemove"?(m0=t.screenX-ed.screenX,v0=t.screenY-ed.screenY):v0=m0=0,ed=t),m0)},movementY:function(t){return"movementY"in t?t.movementY:v0}}),YR=oi($v),MV=rn({},$v,{dataTransfer:0}),PV=oi(MV),LV=rn({},Xf,{relatedTarget:0}),g0=oi(LV),FV=rn({},bc,{animationName:0,elapsedTime:0,pseudoElement:0}),zV=oi(FV),BV=rn({},bc,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),jV=oi(BV),VV=rn({},bc,{data:0}),JR=oi(VV),$V={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},UV={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},WV={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function HV(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=WV[t])?!!n[t]:!1}function $x(){return HV}var GV=rn({},Xf,{key:function(t){if(t.key){var n=$V[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=Xh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?UV[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$x,charCode:function(t){return t.type==="keypress"?Xh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Xh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),qV=oi(GV),KV=rn({},$v,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),QR=oi(KV),XV=rn({},Xf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$x}),YV=oi(XV),JV=rn({},bc,{propertyName:0,elapsedTime:0,pseudoElement:0}),QV=oi(JV),ZV=rn({},$v,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),e$=oi(ZV),t$=[9,13,27,32],Ux=Yo&&"CompositionEvent"in window,Vd=null;Yo&&"documentMode"in document&&(Vd=document.documentMode);var n$=Yo&&"TextEvent"in window&&!Vd,hA=Yo&&(!Ux||Vd&&8<Vd&&11>=Vd),ZR=" ",eT=!1;function mA(t,n){switch(t){case"keyup":return t$.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vA(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ll=!1;function r$(t,n){switch(t){case"compositionend":return vA(n);case"keypress":return n.which!==32?null:(eT=!0,ZR);case"textInput":return t=n.data,t===ZR&&eT?null:t;default:return null}}function i$(t,n){if(ll)return t==="compositionend"||!Ux&&mA(t,n)?(t=pA(),Kh=jx=Aa=null,ll=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return hA&&n.locale!=="ko"?null:n.data;default:return null}}var o$={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tT(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!o$[t.type]:n==="textarea"}function gA(t,n,e,r){K_(r),n=Om(n,"onChange"),0<n.length&&(e=new Vx("onChange","change",null,e,r),t.push({event:e,listeners:n}))}var $d=null,df=null;function a$(t){kA(t,0)}function Uv(t){var n=fl(t);if(V_(n))return t}function s$(t,n){if(t==="change")return n}var yA=!1;if(Yo){var y0;if(Yo){var b0="oninput"in document;if(!b0){var nT=document.createElement("div");nT.setAttribute("oninput","return;"),b0=typeof nT.oninput=="function"}y0=b0}else y0=!1;yA=y0&&(!document.documentMode||9<document.documentMode)}function rT(){$d&&($d.detachEvent("onpropertychange",bA),df=$d=null)}function bA(t){if(t.propertyName==="value"&&Uv(df)){var n=[];gA(n,df,t,Px(t)),Q_(a$,n)}}function u$(t,n,e){t==="focusin"?(rT(),$d=n,df=e,$d.attachEvent("onpropertychange",bA)):t==="focusout"&&rT()}function l$(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Uv(df)}function c$(t,n){if(t==="click")return Uv(n)}function d$(t,n){if(t==="input"||t==="change")return Uv(n)}function f$(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var Vi=typeof Object.is=="function"?Object.is:f$;function ff(t,n){if(Vi(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var e=Object.keys(t),r=Object.keys(n);if(e.length!==r.length)return!1;for(r=0;r<e.length;r++){var i=e[r];if(!nb.call(n,i)||!Vi(t[i],n[i]))return!1}return!0}function iT(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function oT(t,n){var e=iT(t);t=0;for(var r;e;){if(e.nodeType===3){if(r=t+e.textContent.length,t<=n&&r>=n)return{node:e,offset:n-t};t=r}e:{for(;e;){if(e.nextSibling){e=e.nextSibling;break e}e=e.parentNode}e=void 0}e=iT(e)}}function wA(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?wA(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function xA(){for(var t=window,n=Rm();n instanceof t.HTMLIFrameElement;){try{var e=typeof n.contentWindow.location.href=="string"}catch{e=!1}if(e)t=n.contentWindow;else break;n=Rm(t.document)}return n}function Wx(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}function p$(t){var n=xA(),e=t.focusedElem,r=t.selectionRange;if(n!==e&&e&&e.ownerDocument&&wA(e.ownerDocument.documentElement,e)){if(r!==null&&Wx(e)){if(n=r.start,t=r.end,t===void 0&&(t=n),"selectionStart"in e)e.selectionStart=n,e.selectionEnd=Math.min(t,e.value.length);else if(t=(n=e.ownerDocument||document)&&n.defaultView||window,t.getSelection){t=t.getSelection();var i=e.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=oT(e,o);var a=oT(e,r);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(n=n.createRange(),n.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(n),t.extend(a.node,a.offset)):(n.setEnd(a.node,a.offset),t.addRange(n)))}}for(n=[],t=e;t=t.parentNode;)t.nodeType===1&&n.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof e.focus=="function"&&e.focus(),e=0;e<n.length;e++)t=n[e],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var h$=Yo&&"documentMode"in document&&11>=document.documentMode,cl=null,xb=null,Ud=null,Sb=!1;function aT(t,n,e){var r=e.window===e?e.document:e.nodeType===9?e:e.ownerDocument;Sb||cl==null||cl!==Rm(r)||(r=cl,"selectionStart"in r&&Wx(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ud&&ff(Ud,r)||(Ud=r,r=Om(xb,"onSelect"),0<r.length&&(n=new Vx("onSelect","select",null,n,e),t.push({event:n,listeners:r}),n.target=cl)))}function oh(t,n){var e={};return e[t.toLowerCase()]=n.toLowerCase(),e["Webkit"+t]="webkit"+n,e["Moz"+t]="moz"+n,e}var dl={animationend:oh("Animation","AnimationEnd"),animationiteration:oh("Animation","AnimationIteration"),animationstart:oh("Animation","AnimationStart"),transitionend:oh("Transition","TransitionEnd")},w0={},SA={};Yo&&(SA=document.createElement("div").style,"AnimationEvent"in window||(delete dl.animationend.animation,delete dl.animationiteration.animation,delete dl.animationstart.animation),"TransitionEvent"in window||delete dl.transitionend.transition);function Wv(t){if(w0[t])return w0[t];if(!dl[t])return t;var n=dl[t],e;for(e in n)if(n.hasOwnProperty(e)&&e in SA)return w0[t]=n[e];return t}var EA=Wv("animationend"),CA=Wv("animationiteration"),RA=Wv("animationstart"),TA=Wv("transitionend"),NA=new Map,sT="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fs(t,n){NA.set(t,n),wu(n,[t])}for(var x0=0;x0<sT.length;x0++){var S0=sT[x0],m$=S0.toLowerCase(),v$=S0[0].toUpperCase()+S0.slice(1);fs(m$,"on"+v$)}fs(EA,"onAnimationEnd");fs(CA,"onAnimationIteration");fs(RA,"onAnimationStart");fs("dblclick","onDoubleClick");fs("focusin","onFocus");fs("focusout","onBlur");fs(TA,"onTransitionEnd");jl("onMouseEnter",["mouseout","mouseover"]);jl("onMouseLeave",["mouseout","mouseover"]);jl("onPointerEnter",["pointerout","pointerover"]);jl("onPointerLeave",["pointerout","pointerover"]);wu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));wu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));wu("onBeforeInput",["compositionend","keypress","textInput","paste"]);wu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));wu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));wu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ad="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),g$=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ad));function uT(t,n,e){var r=t.type||"unknown-event";t.currentTarget=e,mV(r,n,void 0,t),t.currentTarget=null}function kA(t,n){n=(n&4)!==0;for(var e=0;e<t.length;e++){var r=t[e],i=r.event;r=r.listeners;e:{var o=void 0;if(n)for(var a=r.length-1;0<=a;a--){var s=r[a],u=s.instance,l=s.currentTarget;if(s=s.listener,u!==o&&i.isPropagationStopped())break e;uT(i,s,l),o=u}else for(a=0;a<r.length;a++){if(s=r[a],u=s.instance,l=s.currentTarget,s=s.listener,u!==o&&i.isPropagationStopped())break e;uT(i,s,l),o=u}}}if(Nm)throw t=gb,Nm=!1,gb=null,t}function jt(t,n){var e=n[Nb];e===void 0&&(e=n[Nb]=new Set);var r=t+"__bubble";e.has(r)||(IA(n,t,2,!1),e.add(r))}function E0(t,n,e){var r=0;n&&(r|=4),IA(e,t,r,n)}var ah="_reactListening"+Math.random().toString(36).slice(2);function pf(t){if(!t[ah]){t[ah]=!0,L_.forEach(function(e){e!=="selectionchange"&&(g$.has(e)||E0(e,!1,t),E0(e,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[ah]||(n[ah]=!0,E0("selectionchange",!1,n))}}function IA(t,n,e,r){switch(fA(n)){case 1:var i=AV;break;case 4:i=OV;break;default:i=Bx}e=i.bind(null,n,e,t),i=void 0,!vb||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(n,e,{capture:!0,passive:i}):t.addEventListener(n,e,!0):i!==void 0?t.addEventListener(n,e,{passive:i}):t.addEventListener(n,e,!1)}function C0(t,n,e,r,i){var o=r;if(!(n&1)&&!(n&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var s=r.stateNode.containerInfo;if(s===i||s.nodeType===8&&s.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;a=a.return}for(;s!==null;){if(a=$s(s),a===null)return;if(u=a.tag,u===5||u===6){r=o=a;continue e}s=s.parentNode}}r=r.return}Q_(function(){var l=o,c=Px(e),d=[];e:{var f=NA.get(t);if(f!==void 0){var p=Vx,h=t;switch(t){case"keypress":if(Xh(e)===0)break e;case"keydown":case"keyup":p=qV;break;case"focusin":h="focus",p=g0;break;case"focusout":h="blur",p=g0;break;case"beforeblur":case"afterblur":p=g0;break;case"click":if(e.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=YR;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=PV;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=YV;break;case EA:case CA:case RA:p=zV;break;case TA:p=QV;break;case"scroll":p=DV;break;case"wheel":p=e$;break;case"copy":case"cut":case"paste":p=jV;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=QR}var v=(n&4)!==0,g=!v&&t==="scroll",m=v?f!==null?f+"Capture":null:f;v=[];for(var y=l,b;y!==null;){b=y;var w=b.stateNode;if(b.tag===5&&w!==null&&(b=w,m!==null&&(w=sf(y,m),w!=null&&v.push(hf(y,w,b)))),g)break;y=y.return}0<v.length&&(f=new p(f,h,null,e,c),d.push({event:f,listeners:v}))}}if(!(n&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&e!==hb&&(h=e.relatedTarget||e.fromElement)&&($s(h)||h[Jo]))break e;if((p||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,p?(h=e.relatedTarget||e.toElement,p=l,h=h?$s(h):null,h!==null&&(g=xu(h),h!==g||h.tag!==5&&h.tag!==6)&&(h=null)):(p=null,h=l),p!==h)){if(v=YR,w="onMouseLeave",m="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(v=QR,w="onPointerLeave",m="onPointerEnter",y="pointer"),g=p==null?f:fl(p),b=h==null?f:fl(h),f=new v(w,y+"leave",p,e,c),f.target=g,f.relatedTarget=b,w=null,$s(c)===l&&(v=new v(m,y+"enter",h,e,c),v.target=b,v.relatedTarget=g,w=v),g=w,p&&h)t:{for(v=p,m=h,y=0,b=v;b;b=$u(b))y++;for(b=0,w=m;w;w=$u(w))b++;for(;0<y-b;)v=$u(v),y--;for(;0<b-y;)m=$u(m),b--;for(;y--;){if(v===m||m!==null&&v===m.alternate)break t;v=$u(v),m=$u(m)}v=null}else v=null;p!==null&&lT(d,f,p,v,!1),h!==null&&g!==null&&lT(d,g,h,v,!0)}}e:{if(f=l?fl(l):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var x=s$;else if(tT(f))if(yA)x=d$;else{x=l$;var C=u$}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(x=c$);if(x&&(x=x(t,l))){gA(d,x,e,c);break e}C&&C(t,f,l),t==="focusout"&&(C=f._wrapperState)&&C.controlled&&f.type==="number"&&lb(f,"number",f.value)}switch(C=l?fl(l):window,t){case"focusin":(tT(C)||C.contentEditable==="true")&&(cl=C,xb=l,Ud=null);break;case"focusout":Ud=xb=cl=null;break;case"mousedown":Sb=!0;break;case"contextmenu":case"mouseup":case"dragend":Sb=!1,aT(d,e,c);break;case"selectionchange":if(h$)break;case"keydown":case"keyup":aT(d,e,c)}var E;if(Ux)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else ll?mA(t,e)&&(S="onCompositionEnd"):t==="keydown"&&e.keyCode===229&&(S="onCompositionStart");S&&(hA&&e.locale!=="ko"&&(ll||S!=="onCompositionStart"?S==="onCompositionEnd"&&ll&&(E=pA()):(Aa=c,jx="value"in Aa?Aa.value:Aa.textContent,ll=!0)),C=Om(l,S),0<C.length&&(S=new JR(S,t,null,e,c),d.push({event:S,listeners:C}),E?S.data=E:(E=vA(e),E!==null&&(S.data=E)))),(E=n$?r$(t,e):i$(t,e))&&(l=Om(l,"onBeforeInput"),0<l.length&&(c=new JR("onBeforeInput","beforeinput",null,e,c),d.push({event:c,listeners:l}),c.data=E))}kA(d,n)})}function hf(t,n,e){return{instance:t,listener:n,currentTarget:e}}function Om(t,n){for(var e=n+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=sf(t,e),o!=null&&r.unshift(hf(t,o,i)),o=sf(t,n),o!=null&&r.push(hf(t,o,i))),t=t.return}return r}function $u(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function lT(t,n,e,r,i){for(var o=n._reactName,a=[];e!==null&&e!==r;){var s=e,u=s.alternate,l=s.stateNode;if(u!==null&&u===r)break;s.tag===5&&l!==null&&(s=l,i?(u=sf(e,o),u!=null&&a.unshift(hf(e,u,s))):i||(u=sf(e,o),u!=null&&a.push(hf(e,u,s)))),e=e.return}a.length!==0&&t.push({event:n,listeners:a})}var y$=/\r\n?/g,b$=/\u0000|\uFFFD/g;function cT(t){return(typeof t=="string"?t:""+t).replace(y$,`
`).replace(b$,"")}function sh(t,n,e){if(n=cT(n),cT(t)!==n&&e)throw Error(ye(425))}function Dm(){}var Eb=null,Cb=null;function Rb(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Tb=typeof setTimeout=="function"?setTimeout:void 0,w$=typeof clearTimeout=="function"?clearTimeout:void 0,dT=typeof Promise=="function"?Promise:void 0,x$=typeof queueMicrotask=="function"?queueMicrotask:typeof dT<"u"?function(t){return dT.resolve(null).then(t).catch(S$)}:Tb;function S$(t){setTimeout(function(){throw t})}function R0(t,n){var e=n,r=0;do{var i=e.nextSibling;if(t.removeChild(e),i&&i.nodeType===8)if(e=i.data,e==="/$"){if(r===0){t.removeChild(i),cf(n);return}r--}else e!=="$"&&e!=="$?"&&e!=="$!"||r++;e=i}while(e);cf(n)}function Ha(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return t}function fT(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var e=t.data;if(e==="$"||e==="$!"||e==="$?"){if(n===0)return t;n--}else e==="/$"&&n++}t=t.previousSibling}return null}var wc=Math.random().toString(36).slice(2),ao="__reactFiber$"+wc,mf="__reactProps$"+wc,Jo="__reactContainer$"+wc,Nb="__reactEvents$"+wc,E$="__reactListeners$"+wc,C$="__reactHandles$"+wc;function $s(t){var n=t[ao];if(n)return n;for(var e=t.parentNode;e;){if(n=e[Jo]||e[ao]){if(e=n.alternate,n.child!==null||e!==null&&e.child!==null)for(t=fT(t);t!==null;){if(e=t[ao])return e;t=fT(t)}return n}t=e,e=t.parentNode}return null}function Yf(t){return t=t[ao]||t[Jo],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function fl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ye(33))}function Hv(t){return t[mf]||null}var kb=[],pl=-1;function ps(t){return{current:t}}function Wt(t){0>pl||(t.current=kb[pl],kb[pl]=null,pl--)}function zt(t,n){pl++,kb[pl]=t.current,t.current=n}var os={},ur=ps(os),Or=ps(!1),iu=os;function Vl(t,n){var e=t.type.contextTypes;if(!e)return os;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===n)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in e)i[o]=n[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=n,t.__reactInternalMemoizedMaskedChildContext=i),i}function Dr(t){return t=t.childContextTypes,t!=null}function Mm(){Wt(Or),Wt(ur)}function pT(t,n,e){if(ur.current!==os)throw Error(ye(168));zt(ur,n),zt(Or,e)}function _A(t,n,e){var r=t.stateNode;if(n=n.childContextTypes,typeof r.getChildContext!="function")return e;r=r.getChildContext();for(var i in r)if(!(i in n))throw Error(ye(108,uV(t)||"Unknown",i));return rn({},e,r)}function Pm(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||os,iu=ur.current,zt(ur,t),zt(Or,Or.current),!0}function hT(t,n,e){var r=t.stateNode;if(!r)throw Error(ye(169));e?(t=_A(t,n,iu),r.__reactInternalMemoizedMergedChildContext=t,Wt(Or),Wt(ur),zt(ur,t)):Wt(Or),zt(Or,e)}var Fo=null,Gv=!1,T0=!1;function AA(t){Fo===null?Fo=[t]:Fo.push(t)}function R$(t){Gv=!0,AA(t)}function hs(){if(!T0&&Fo!==null){T0=!0;var t=0,n=At;try{var e=Fo;for(At=1;t<e.length;t++){var r=e[t];do r=r(!0);while(r!==null)}Fo=null,Gv=!1}catch(i){throw Fo!==null&&(Fo=Fo.slice(t+1)),nA(Lx,hs),i}finally{At=n,T0=!1}}return null}var hl=[],ml=0,Lm=null,Fm=0,pi=[],hi=0,ou=null,Vo=1,$o="";function Os(t,n){hl[ml++]=Fm,hl[ml++]=Lm,Lm=t,Fm=n}function OA(t,n,e){pi[hi++]=Vo,pi[hi++]=$o,pi[hi++]=ou,ou=t;var r=Vo;t=$o;var i=32-Fi(r)-1;r&=~(1<<i),e+=1;var o=32-Fi(n)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Vo=1<<32-Fi(n)+i|e<<i|r,$o=o+t}else Vo=1<<o|e<<i|r,$o=t}function Hx(t){t.return!==null&&(Os(t,1),OA(t,1,0))}function Gx(t){for(;t===Lm;)Lm=hl[--ml],hl[ml]=null,Fm=hl[--ml],hl[ml]=null;for(;t===ou;)ou=pi[--hi],pi[hi]=null,$o=pi[--hi],pi[hi]=null,Vo=pi[--hi],pi[hi]=null}var Jr=null,Kr=null,Jt=!1,Oi=null;function DA(t,n){var e=gi(5,null,null,0);e.elementType="DELETED",e.stateNode=n,e.return=t,n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)}function mT(t,n){switch(t.tag){case 5:var e=t.type;return n=n.nodeType!==1||e.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(t.stateNode=n,Jr=t,Kr=Ha(n.firstChild),!0):!1;case 6:return n=t.pendingProps===""||n.nodeType!==3?null:n,n!==null?(t.stateNode=n,Jr=t,Kr=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(e=ou!==null?{id:Vo,overflow:$o}:null,t.memoizedState={dehydrated:n,treeContext:e,retryLane:1073741824},e=gi(18,null,null,0),e.stateNode=n,e.return=t,t.child=e,Jr=t,Kr=null,!0):!1;default:return!1}}function Ib(t){return(t.mode&1)!==0&&(t.flags&128)===0}function _b(t){if(Jt){var n=Kr;if(n){var e=n;if(!mT(t,n)){if(Ib(t))throw Error(ye(418));n=Ha(e.nextSibling);var r=Jr;n&&mT(t,n)?DA(r,e):(t.flags=t.flags&-4097|2,Jt=!1,Jr=t)}}else{if(Ib(t))throw Error(ye(418));t.flags=t.flags&-4097|2,Jt=!1,Jr=t}}}function vT(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Jr=t}function uh(t){if(t!==Jr)return!1;if(!Jt)return vT(t),Jt=!0,!1;var n;if((n=t.tag!==3)&&!(n=t.tag!==5)&&(n=t.type,n=n!=="head"&&n!=="body"&&!Rb(t.type,t.memoizedProps)),n&&(n=Kr)){if(Ib(t))throw MA(),Error(ye(418));for(;n;)DA(t,n),n=Ha(n.nextSibling)}if(vT(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ye(317));e:{for(t=t.nextSibling,n=0;t;){if(t.nodeType===8){var e=t.data;if(e==="/$"){if(n===0){Kr=Ha(t.nextSibling);break e}n--}else e!=="$"&&e!=="$!"&&e!=="$?"||n++}t=t.nextSibling}Kr=null}}else Kr=Jr?Ha(t.stateNode.nextSibling):null;return!0}function MA(){for(var t=Kr;t;)t=Ha(t.nextSibling)}function $l(){Kr=Jr=null,Jt=!1}function qx(t){Oi===null?Oi=[t]:Oi.push(t)}var T$=ia.ReactCurrentBatchConfig;function _i(t,n){if(t&&t.defaultProps){n=rn({},n),t=t.defaultProps;for(var e in t)n[e]===void 0&&(n[e]=t[e]);return n}return n}var zm=ps(null),Bm=null,vl=null,Kx=null;function Xx(){Kx=vl=Bm=null}function Yx(t){var n=zm.current;Wt(zm),t._currentValue=n}function Ab(t,n,e){for(;t!==null;){var r=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,r!==null&&(r.childLanes|=n)):r!==null&&(r.childLanes&n)!==n&&(r.childLanes|=n),t===e)break;t=t.return}}function Nl(t,n){Bm=t,Kx=vl=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&n&&(Ar=!0),t.firstContext=null)}function wi(t){var n=t._currentValue;if(Kx!==t)if(t={context:t,memoizedValue:n,next:null},vl===null){if(Bm===null)throw Error(ye(308));vl=t,Bm.dependencies={lanes:0,firstContext:t}}else vl=vl.next=t;return n}var Us=null;function Jx(t){Us===null?Us=[t]:Us.push(t)}function PA(t,n,e,r){var i=n.interleaved;return i===null?(e.next=e,Jx(n)):(e.next=i.next,i.next=e),n.interleaved=e,Qo(t,r)}function Qo(t,n){t.lanes|=n;var e=t.alternate;for(e!==null&&(e.lanes|=n),e=t,t=t.return;t!==null;)t.childLanes|=n,e=t.alternate,e!==null&&(e.childLanes|=n),e=t,t=t.return;return e.tag===3?e.stateNode:null}var Ca=!1;function Qx(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function LA(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Wo(t,n){return{eventTime:t,lane:n,tag:0,payload:null,callback:null,next:null}}function Ga(t,n,e){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,yt&2){var i=r.pending;return i===null?n.next=n:(n.next=i.next,i.next=n),r.pending=n,Qo(t,e)}return i=r.interleaved,i===null?(n.next=n,Jx(r)):(n.next=i.next,i.next=n),r.interleaved=n,Qo(t,e)}function Yh(t,n,e){if(n=n.updateQueue,n!==null&&(n=n.shared,(e&4194240)!==0)){var r=n.lanes;r&=t.pendingLanes,e|=r,n.lanes=e,Fx(t,e)}}function gT(t,n){var e=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,e===r)){var i=null,o=null;if(e=e.firstBaseUpdate,e!==null){do{var a={eventTime:e.eventTime,lane:e.lane,tag:e.tag,payload:e.payload,callback:e.callback,next:null};o===null?i=o=a:o=o.next=a,e=e.next}while(e!==null);o===null?i=o=n:o=o.next=n}else i=o=n;e={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=e;return}t=e.lastBaseUpdate,t===null?e.firstBaseUpdate=n:t.next=n,e.lastBaseUpdate=n}function jm(t,n,e,r){var i=t.updateQueue;Ca=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var u=s,l=u.next;u.next=null,a===null?o=l:a.next=l,a=u;var c=t.alternate;c!==null&&(c=c.updateQueue,s=c.lastBaseUpdate,s!==a&&(s===null?c.firstBaseUpdate=l:s.next=l,c.lastBaseUpdate=u))}if(o!==null){var d=i.baseState;a=0,c=l=u=null,s=o;do{var f=s.lane,p=s.eventTime;if((r&f)===f){c!==null&&(c=c.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var h=t,v=s;switch(f=n,p=e,v.tag){case 1:if(h=v.payload,typeof h=="function"){d=h.call(p,d,f);break e}d=h;break e;case 3:h.flags=h.flags&-65537|128;case 0:if(h=v.payload,f=typeof h=="function"?h.call(p,d,f):h,f==null)break e;d=rn({},d,f);break e;case 2:Ca=!0}}s.callback!==null&&s.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[s]:f.push(s))}else p={eventTime:p,lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},c===null?(l=c=p,u=d):c=c.next=p,a|=f;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;f=s,s=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(c===null&&(u=d),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,n=i.shared.interleaved,n!==null){i=n;do a|=i.lane,i=i.next;while(i!==n)}else o===null&&(i.shared.lanes=0);su|=a,t.lanes=a,t.memoizedState=d}}function yT(t,n,e){if(t=n.effects,n.effects=null,t!==null)for(n=0;n<t.length;n++){var r=t[n],i=r.callback;if(i!==null){if(r.callback=null,r=e,typeof i!="function")throw Error(ye(191,i));i.call(r)}}}var FA=new P_.Component().refs;function Ob(t,n,e,r){n=t.memoizedState,e=e(r,n),e=e==null?n:rn({},n,e),t.memoizedState=e,t.lanes===0&&(t.updateQueue.baseState=e)}var qv={isMounted:function(t){return(t=t._reactInternals)?xu(t)===t:!1},enqueueSetState:function(t,n,e){t=t._reactInternals;var r=gr(),i=Ka(t),o=Wo(r,i);o.payload=n,e!=null&&(o.callback=e),n=Ga(t,o,i),n!==null&&(zi(n,t,i,r),Yh(n,t,i))},enqueueReplaceState:function(t,n,e){t=t._reactInternals;var r=gr(),i=Ka(t),o=Wo(r,i);o.tag=1,o.payload=n,e!=null&&(o.callback=e),n=Ga(t,o,i),n!==null&&(zi(n,t,i,r),Yh(n,t,i))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var e=gr(),r=Ka(t),i=Wo(e,r);i.tag=2,n!=null&&(i.callback=n),n=Ga(t,i,r),n!==null&&(zi(n,t,r,e),Yh(n,t,r))}};function bT(t,n,e,r,i,o,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,a):n.prototype&&n.prototype.isPureReactComponent?!ff(e,r)||!ff(i,o):!0}function zA(t,n,e){var r=!1,i=os,o=n.contextType;return typeof o=="object"&&o!==null?o=wi(o):(i=Dr(n)?iu:ur.current,r=n.contextTypes,o=(r=r!=null)?Vl(t,i):os),n=new n(e,o),t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=qv,t.stateNode=n,n._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),n}function wT(t,n,e,r){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(e,r),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(e,r),n.state!==t&&qv.enqueueReplaceState(n,n.state,null)}function Db(t,n,e,r){var i=t.stateNode;i.props=e,i.state=t.memoizedState,i.refs=FA,Qx(t);var o=n.contextType;typeof o=="object"&&o!==null?i.context=wi(o):(o=Dr(n)?iu:ur.current,i.context=Vl(t,o)),i.state=t.memoizedState,o=n.getDerivedStateFromProps,typeof o=="function"&&(Ob(t,n,o,e),i.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(n=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),n!==i.state&&qv.enqueueReplaceState(i,i.state,null),jm(t,e,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function td(t,n,e){if(t=e.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(e._owner){if(e=e._owner,e){if(e.tag!==1)throw Error(ye(309));var r=e.stateNode}if(!r)throw Error(ye(147,t));var i=r,o=""+t;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===o?n.ref:(n=function(a){var s=i.refs;s===FA&&(s=i.refs={}),a===null?delete s[o]:s[o]=a},n._stringRef=o,n)}if(typeof t!="string")throw Error(ye(284));if(!e._owner)throw Error(ye(290,t))}return t}function lh(t,n){throw t=Object.prototype.toString.call(n),Error(ye(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t))}function xT(t){var n=t._init;return n(t._payload)}function BA(t){function n(m,y){if(t){var b=m.deletions;b===null?(m.deletions=[y],m.flags|=16):b.push(y)}}function e(m,y){if(!t)return null;for(;y!==null;)n(m,y),y=y.sibling;return null}function r(m,y){for(m=new Map;y!==null;)y.key!==null?m.set(y.key,y):m.set(y.index,y),y=y.sibling;return m}function i(m,y){return m=Xa(m,y),m.index=0,m.sibling=null,m}function o(m,y,b){return m.index=b,t?(b=m.alternate,b!==null?(b=b.index,b<y?(m.flags|=2,y):b):(m.flags|=2,y)):(m.flags|=1048576,y)}function a(m){return t&&m.alternate===null&&(m.flags|=2),m}function s(m,y,b,w){return y===null||y.tag!==6?(y=D0(b,m.mode,w),y.return=m,y):(y=i(y,b),y.return=m,y)}function u(m,y,b,w){var x=b.type;return x===ul?c(m,y,b.props.children,w,b.key):y!==null&&(y.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Ea&&xT(x)===y.type)?(w=i(y,b.props),w.ref=td(m,y,b),w.return=m,w):(w=nm(b.type,b.key,b.props,null,m.mode,w),w.ref=td(m,y,b),w.return=m,w)}function l(m,y,b,w){return y===null||y.tag!==4||y.stateNode.containerInfo!==b.containerInfo||y.stateNode.implementation!==b.implementation?(y=M0(b,m.mode,w),y.return=m,y):(y=i(y,b.children||[]),y.return=m,y)}function c(m,y,b,w,x){return y===null||y.tag!==7?(y=Qs(b,m.mode,w,x),y.return=m,y):(y=i(y,b),y.return=m,y)}function d(m,y,b){if(typeof y=="string"&&y!==""||typeof y=="number")return y=D0(""+y,m.mode,b),y.return=m,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Qp:return b=nm(y.type,y.key,y.props,null,m.mode,b),b.ref=td(m,null,y),b.return=m,b;case sl:return y=M0(y,m.mode,b),y.return=m,y;case Ea:var w=y._init;return d(m,w(y._payload),b)}if(Id(y)||Yc(y))return y=Qs(y,m.mode,b,null),y.return=m,y;lh(m,y)}return null}function f(m,y,b,w){var x=y!==null?y.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return x!==null?null:s(m,y,""+b,w);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Qp:return b.key===x?u(m,y,b,w):null;case sl:return b.key===x?l(m,y,b,w):null;case Ea:return x=b._init,f(m,y,x(b._payload),w)}if(Id(b)||Yc(b))return x!==null?null:c(m,y,b,w,null);lh(m,b)}return null}function p(m,y,b,w,x){if(typeof w=="string"&&w!==""||typeof w=="number")return m=m.get(b)||null,s(y,m,""+w,x);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Qp:return m=m.get(w.key===null?b:w.key)||null,u(y,m,w,x);case sl:return m=m.get(w.key===null?b:w.key)||null,l(y,m,w,x);case Ea:var C=w._init;return p(m,y,b,C(w._payload),x)}if(Id(w)||Yc(w))return m=m.get(b)||null,c(y,m,w,x,null);lh(y,w)}return null}function h(m,y,b,w){for(var x=null,C=null,E=y,S=y=0,N=null;E!==null&&S<b.length;S++){E.index>S?(N=E,E=null):N=E.sibling;var k=f(m,E,b[S],w);if(k===null){E===null&&(E=N);break}t&&E&&k.alternate===null&&n(m,E),y=o(k,y,S),C===null?x=k:C.sibling=k,C=k,E=N}if(S===b.length)return e(m,E),Jt&&Os(m,S),x;if(E===null){for(;S<b.length;S++)E=d(m,b[S],w),E!==null&&(y=o(E,y,S),C===null?x=E:C.sibling=E,C=E);return Jt&&Os(m,S),x}for(E=r(m,E);S<b.length;S++)N=p(E,m,S,b[S],w),N!==null&&(t&&N.alternate!==null&&E.delete(N.key===null?S:N.key),y=o(N,y,S),C===null?x=N:C.sibling=N,C=N);return t&&E.forEach(function(M){return n(m,M)}),Jt&&Os(m,S),x}function v(m,y,b,w){var x=Yc(b);if(typeof x!="function")throw Error(ye(150));if(b=x.call(b),b==null)throw Error(ye(151));for(var C=x=null,E=y,S=y=0,N=null,k=b.next();E!==null&&!k.done;S++,k=b.next()){E.index>S?(N=E,E=null):N=E.sibling;var M=f(m,E,k.value,w);if(M===null){E===null&&(E=N);break}t&&E&&M.alternate===null&&n(m,E),y=o(M,y,S),C===null?x=M:C.sibling=M,C=M,E=N}if(k.done)return e(m,E),Jt&&Os(m,S),x;if(E===null){for(;!k.done;S++,k=b.next())k=d(m,k.value,w),k!==null&&(y=o(k,y,S),C===null?x=k:C.sibling=k,C=k);return Jt&&Os(m,S),x}for(E=r(m,E);!k.done;S++,k=b.next())k=p(E,m,S,k.value,w),k!==null&&(t&&k.alternate!==null&&E.delete(k.key===null?S:k.key),y=o(k,y,S),C===null?x=k:C.sibling=k,C=k);return t&&E.forEach(function(D){return n(m,D)}),Jt&&Os(m,S),x}function g(m,y,b,w){if(typeof b=="object"&&b!==null&&b.type===ul&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Qp:e:{for(var x=b.key,C=y;C!==null;){if(C.key===x){if(x=b.type,x===ul){if(C.tag===7){e(m,C.sibling),y=i(C,b.props.children),y.return=m,m=y;break e}}else if(C.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Ea&&xT(x)===C.type){e(m,C.sibling),y=i(C,b.props),y.ref=td(m,C,b),y.return=m,m=y;break e}e(m,C);break}else n(m,C);C=C.sibling}b.type===ul?(y=Qs(b.props.children,m.mode,w,b.key),y.return=m,m=y):(w=nm(b.type,b.key,b.props,null,m.mode,w),w.ref=td(m,y,b),w.return=m,m=w)}return a(m);case sl:e:{for(C=b.key;y!==null;){if(y.key===C)if(y.tag===4&&y.stateNode.containerInfo===b.containerInfo&&y.stateNode.implementation===b.implementation){e(m,y.sibling),y=i(y,b.children||[]),y.return=m,m=y;break e}else{e(m,y);break}else n(m,y);y=y.sibling}y=M0(b,m.mode,w),y.return=m,m=y}return a(m);case Ea:return C=b._init,g(m,y,C(b._payload),w)}if(Id(b))return h(m,y,b,w);if(Yc(b))return v(m,y,b,w);lh(m,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,y!==null&&y.tag===6?(e(m,y.sibling),y=i(y,b),y.return=m,m=y):(e(m,y),y=D0(b,m.mode,w),y.return=m,m=y),a(m)):e(m,y)}return g}var Ul=BA(!0),jA=BA(!1),Jf={},ho=ps(Jf),vf=ps(Jf),gf=ps(Jf);function Ws(t){if(t===Jf)throw Error(ye(174));return t}function Zx(t,n){switch(zt(gf,n),zt(vf,t),zt(ho,Jf),t=n.nodeType,t){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:db(null,"");break;default:t=t===8?n.parentNode:n,n=t.namespaceURI||null,t=t.tagName,n=db(n,t)}Wt(ho),zt(ho,n)}function Wl(){Wt(ho),Wt(vf),Wt(gf)}function VA(t){Ws(gf.current);var n=Ws(ho.current),e=db(n,t.type);n!==e&&(zt(vf,t),zt(ho,e))}function eS(t){vf.current===t&&(Wt(ho),Wt(vf))}var en=ps(0);function Vm(t){for(var n=t;n!==null;){if(n.tag===13){var e=n.memoizedState;if(e!==null&&(e=e.dehydrated,e===null||e.data==="$?"||e.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if(n.flags&128)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var N0=[];function tS(){for(var t=0;t<N0.length;t++)N0[t]._workInProgressVersionPrimary=null;N0.length=0}var Jh=ia.ReactCurrentDispatcher,k0=ia.ReactCurrentBatchConfig,au=0,tn=null,kn=null,Ln=null,$m=!1,Wd=!1,yf=0,N$=0;function Qn(){throw Error(ye(321))}function nS(t,n){if(n===null)return!1;for(var e=0;e<n.length&&e<t.length;e++)if(!Vi(t[e],n[e]))return!1;return!0}function rS(t,n,e,r,i,o){if(au=o,tn=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,Jh.current=t===null||t.memoizedState===null?A$:O$,t=e(r,i),Wd){o=0;do{if(Wd=!1,yf=0,25<=o)throw Error(ye(301));o+=1,Ln=kn=null,n.updateQueue=null,Jh.current=D$,t=e(r,i)}while(Wd)}if(Jh.current=Um,n=kn!==null&&kn.next!==null,au=0,Ln=kn=tn=null,$m=!1,n)throw Error(ye(300));return t}function iS(){var t=yf!==0;return yf=0,t}function no(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ln===null?tn.memoizedState=Ln=t:Ln=Ln.next=t,Ln}function xi(){if(kn===null){var t=tn.alternate;t=t!==null?t.memoizedState:null}else t=kn.next;var n=Ln===null?tn.memoizedState:Ln.next;if(n!==null)Ln=n,kn=t;else{if(t===null)throw Error(ye(310));kn=t,t={memoizedState:kn.memoizedState,baseState:kn.baseState,baseQueue:kn.baseQueue,queue:kn.queue,next:null},Ln===null?tn.memoizedState=Ln=t:Ln=Ln.next=t}return Ln}function bf(t,n){return typeof n=="function"?n(t):n}function I0(t){var n=xi(),e=n.queue;if(e===null)throw Error(ye(311));e.lastRenderedReducer=t;var r=kn,i=r.baseQueue,o=e.pending;if(o!==null){if(i!==null){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,e.pending=null}if(i!==null){o=i.next,r=r.baseState;var s=a=null,u=null,l=o;do{var c=l.lane;if((au&c)===c)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:t(r,l.action);else{var d={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(s=u=d,a=r):u=u.next=d,tn.lanes|=c,su|=c}l=l.next}while(l!==null&&l!==o);u===null?a=r:u.next=s,Vi(r,n.memoizedState)||(Ar=!0),n.memoizedState=r,n.baseState=a,n.baseQueue=u,e.lastRenderedState=r}if(t=e.interleaved,t!==null){i=t;do o=i.lane,tn.lanes|=o,su|=o,i=i.next;while(i!==t)}else i===null&&(e.lanes=0);return[n.memoizedState,e.dispatch]}function _0(t){var n=xi(),e=n.queue;if(e===null)throw Error(ye(311));e.lastRenderedReducer=t;var r=e.dispatch,i=e.pending,o=n.memoizedState;if(i!==null){e.pending=null;var a=i=i.next;do o=t(o,a.action),a=a.next;while(a!==i);Vi(o,n.memoizedState)||(Ar=!0),n.memoizedState=o,n.baseQueue===null&&(n.baseState=o),e.lastRenderedState=o}return[o,r]}function $A(){}function UA(t,n){var e=tn,r=xi(),i=n(),o=!Vi(r.memoizedState,i);if(o&&(r.memoizedState=i,Ar=!0),r=r.queue,oS(GA.bind(null,e,r,t),[t]),r.getSnapshot!==n||o||Ln!==null&&Ln.memoizedState.tag&1){if(e.flags|=2048,wf(9,HA.bind(null,e,r,i,n),void 0,null),zn===null)throw Error(ye(349));au&30||WA(e,n,i)}return i}function WA(t,n,e){t.flags|=16384,t={getSnapshot:n,value:e},n=tn.updateQueue,n===null?(n={lastEffect:null,stores:null},tn.updateQueue=n,n.stores=[t]):(e=n.stores,e===null?n.stores=[t]:e.push(t))}function HA(t,n,e,r){n.value=e,n.getSnapshot=r,qA(n)&&KA(t)}function GA(t,n,e){return e(function(){qA(n)&&KA(t)})}function qA(t){var n=t.getSnapshot;t=t.value;try{var e=n();return!Vi(t,e)}catch{return!0}}function KA(t){var n=Qo(t,1);n!==null&&zi(n,t,1,-1)}function ST(t){var n=no();return typeof t=="function"&&(t=t()),n.memoizedState=n.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bf,lastRenderedState:t},n.queue=t,t=t.dispatch=_$.bind(null,tn,t),[n.memoizedState,t]}function wf(t,n,e,r){return t={tag:t,create:n,destroy:e,deps:r,next:null},n=tn.updateQueue,n===null?(n={lastEffect:null,stores:null},tn.updateQueue=n,n.lastEffect=t.next=t):(e=n.lastEffect,e===null?n.lastEffect=t.next=t:(r=e.next,e.next=t,t.next=r,n.lastEffect=t)),t}function XA(){return xi().memoizedState}function Qh(t,n,e,r){var i=no();tn.flags|=t,i.memoizedState=wf(1|n,e,void 0,r===void 0?null:r)}function Kv(t,n,e,r){var i=xi();r=r===void 0?null:r;var o=void 0;if(kn!==null){var a=kn.memoizedState;if(o=a.destroy,r!==null&&nS(r,a.deps)){i.memoizedState=wf(n,e,o,r);return}}tn.flags|=t,i.memoizedState=wf(1|n,e,o,r)}function ET(t,n){return Qh(8390656,8,t,n)}function oS(t,n){return Kv(2048,8,t,n)}function YA(t,n){return Kv(4,2,t,n)}function JA(t,n){return Kv(4,4,t,n)}function QA(t,n){if(typeof n=="function")return t=t(),n(t),function(){n(null)};if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function ZA(t,n,e){return e=e!=null?e.concat([t]):null,Kv(4,4,QA.bind(null,n,t),e)}function aS(){}function eO(t,n){var e=xi();n=n===void 0?null:n;var r=e.memoizedState;return r!==null&&n!==null&&nS(n,r[1])?r[0]:(e.memoizedState=[t,n],t)}function tO(t,n){var e=xi();n=n===void 0?null:n;var r=e.memoizedState;return r!==null&&n!==null&&nS(n,r[1])?r[0]:(t=t(),e.memoizedState=[t,n],t)}function nO(t,n,e){return au&21?(Vi(e,n)||(e=oA(),tn.lanes|=e,su|=e,t.baseState=!0),n):(t.baseState&&(t.baseState=!1,Ar=!0),t.memoizedState=e)}function k$(t,n){var e=At;At=e!==0&&4>e?e:4,t(!0);var r=k0.transition;k0.transition={};try{t(!1),n()}finally{At=e,k0.transition=r}}function rO(){return xi().memoizedState}function I$(t,n,e){var r=Ka(t);if(e={lane:r,action:e,hasEagerState:!1,eagerState:null,next:null},iO(t))oO(n,e);else if(e=PA(t,n,e,r),e!==null){var i=gr();zi(e,t,r,i),aO(e,n,r)}}function _$(t,n,e){var r=Ka(t),i={lane:r,action:e,hasEagerState:!1,eagerState:null,next:null};if(iO(t))oO(n,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=n.lastRenderedReducer,o!==null))try{var a=n.lastRenderedState,s=o(a,e);if(i.hasEagerState=!0,i.eagerState=s,Vi(s,a)){var u=n.interleaved;u===null?(i.next=i,Jx(n)):(i.next=u.next,u.next=i),n.interleaved=i;return}}catch{}finally{}e=PA(t,n,i,r),e!==null&&(i=gr(),zi(e,t,r,i),aO(e,n,r))}}function iO(t){var n=t.alternate;return t===tn||n!==null&&n===tn}function oO(t,n){Wd=$m=!0;var e=t.pending;e===null?n.next=n:(n.next=e.next,e.next=n),t.pending=n}function aO(t,n,e){if(e&4194240){var r=n.lanes;r&=t.pendingLanes,e|=r,n.lanes=e,Fx(t,e)}}var Um={readContext:wi,useCallback:Qn,useContext:Qn,useEffect:Qn,useImperativeHandle:Qn,useInsertionEffect:Qn,useLayoutEffect:Qn,useMemo:Qn,useReducer:Qn,useRef:Qn,useState:Qn,useDebugValue:Qn,useDeferredValue:Qn,useTransition:Qn,useMutableSource:Qn,useSyncExternalStore:Qn,useId:Qn,unstable_isNewReconciler:!1},A$={readContext:wi,useCallback:function(t,n){return no().memoizedState=[t,n===void 0?null:n],t},useContext:wi,useEffect:ET,useImperativeHandle:function(t,n,e){return e=e!=null?e.concat([t]):null,Qh(4194308,4,QA.bind(null,n,t),e)},useLayoutEffect:function(t,n){return Qh(4194308,4,t,n)},useInsertionEffect:function(t,n){return Qh(4,2,t,n)},useMemo:function(t,n){var e=no();return n=n===void 0?null:n,t=t(),e.memoizedState=[t,n],t},useReducer:function(t,n,e){var r=no();return n=e!==void 0?e(n):n,r.memoizedState=r.baseState=n,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:n},r.queue=t,t=t.dispatch=I$.bind(null,tn,t),[r.memoizedState,t]},useRef:function(t){var n=no();return t={current:t},n.memoizedState=t},useState:ST,useDebugValue:aS,useDeferredValue:function(t){return no().memoizedState=t},useTransition:function(){var t=ST(!1),n=t[0];return t=k$.bind(null,t[1]),no().memoizedState=t,[n,t]},useMutableSource:function(){},useSyncExternalStore:function(t,n,e){var r=tn,i=no();if(Jt){if(e===void 0)throw Error(ye(407));e=e()}else{if(e=n(),zn===null)throw Error(ye(349));au&30||WA(r,n,e)}i.memoizedState=e;var o={value:e,getSnapshot:n};return i.queue=o,ET(GA.bind(null,r,o,t),[t]),r.flags|=2048,wf(9,HA.bind(null,r,o,e,n),void 0,null),e},useId:function(){var t=no(),n=zn.identifierPrefix;if(Jt){var e=$o,r=Vo;e=(r&~(1<<32-Fi(r)-1)).toString(32)+e,n=":"+n+"R"+e,e=yf++,0<e&&(n+="H"+e.toString(32)),n+=":"}else e=N$++,n=":"+n+"r"+e.toString(32)+":";return t.memoizedState=n},unstable_isNewReconciler:!1},O$={readContext:wi,useCallback:eO,useContext:wi,useEffect:oS,useImperativeHandle:ZA,useInsertionEffect:YA,useLayoutEffect:JA,useMemo:tO,useReducer:I0,useRef:XA,useState:function(){return I0(bf)},useDebugValue:aS,useDeferredValue:function(t){var n=xi();return nO(n,kn.memoizedState,t)},useTransition:function(){var t=I0(bf)[0],n=xi().memoizedState;return[t,n]},useMutableSource:$A,useSyncExternalStore:UA,useId:rO,unstable_isNewReconciler:!1},D$={readContext:wi,useCallback:eO,useContext:wi,useEffect:oS,useImperativeHandle:ZA,useInsertionEffect:YA,useLayoutEffect:JA,useMemo:tO,useReducer:_0,useRef:XA,useState:function(){return _0(bf)},useDebugValue:aS,useDeferredValue:function(t){var n=xi();return kn===null?n.memoizedState=t:nO(n,kn.memoizedState,t)},useTransition:function(){var t=_0(bf)[0],n=xi().memoizedState;return[t,n]},useMutableSource:$A,useSyncExternalStore:UA,useId:rO,unstable_isNewReconciler:!1};function Hl(t,n){try{var e="",r=n;do e+=sV(r),r=r.return;while(r);var i=e}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:n,stack:i,digest:null}}function A0(t,n,e){return{value:t,source:null,stack:e??null,digest:n??null}}function Mb(t,n){try{console.error(n.value)}catch(e){setTimeout(function(){throw e})}}var M$=typeof WeakMap=="function"?WeakMap:Map;function sO(t,n,e){e=Wo(-1,e),e.tag=3,e.payload={element:null};var r=n.value;return e.callback=function(){Hm||(Hm=!0,Wb=r),Mb(t,n)},e}function uO(t,n,e){e=Wo(-1,e),e.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=n.value;e.payload=function(){return r(i)},e.callback=function(){Mb(t,n)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(e.callback=function(){Mb(t,n),typeof r!="function"&&(qa===null?qa=new Set([this]):qa.add(this));var a=n.stack;this.componentDidCatch(n.value,{componentStack:a!==null?a:""})}),e}function CT(t,n,e){var r=t.pingCache;if(r===null){r=t.pingCache=new M$;var i=new Set;r.set(n,i)}else i=r.get(n),i===void 0&&(i=new Set,r.set(n,i));i.has(e)||(i.add(e),t=K$.bind(null,t,n,e),n.then(t,t))}function RT(t){do{var n;if((n=t.tag===13)&&(n=t.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return t;t=t.return}while(t!==null);return null}function TT(t,n,e,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===n?t.flags|=65536:(t.flags|=128,e.flags|=131072,e.flags&=-52805,e.tag===1&&(e.alternate===null?e.tag=17:(n=Wo(-1,1),n.tag=2,Ga(e,n,1))),e.lanes|=1),t)}var P$=ia.ReactCurrentOwner,Ar=!1;function pr(t,n,e,r){n.child=t===null?jA(n,null,e,r):Ul(n,t.child,e,r)}function NT(t,n,e,r,i){e=e.render;var o=n.ref;return Nl(n,i),r=rS(t,n,e,r,o,i),e=iS(),t!==null&&!Ar?(n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~i,Zo(t,n,i)):(Jt&&e&&Hx(n),n.flags|=1,pr(t,n,r,i),n.child)}function kT(t,n,e,r,i){if(t===null){var o=e.type;return typeof o=="function"&&!hS(o)&&o.defaultProps===void 0&&e.compare===null&&e.defaultProps===void 0?(n.tag=15,n.type=o,lO(t,n,o,r,i)):(t=nm(e.type,null,r,n,n.mode,i),t.ref=n.ref,t.return=n,n.child=t)}if(o=t.child,!(t.lanes&i)){var a=o.memoizedProps;if(e=e.compare,e=e!==null?e:ff,e(a,r)&&t.ref===n.ref)return Zo(t,n,i)}return n.flags|=1,t=Xa(o,r),t.ref=n.ref,t.return=n,n.child=t}function lO(t,n,e,r,i){if(t!==null){var o=t.memoizedProps;if(ff(o,r)&&t.ref===n.ref)if(Ar=!1,n.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(Ar=!0);else return n.lanes=t.lanes,Zo(t,n,i)}return Pb(t,n,e,r,i)}function cO(t,n,e){var r=n.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(n.mode&1))n.memoizedState={baseLanes:0,cachePool:null,transitions:null},zt(yl,$r),$r|=e;else{if(!(e&1073741824))return t=o!==null?o.baseLanes|e:e,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:t,cachePool:null,transitions:null},n.updateQueue=null,zt(yl,$r),$r|=t,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:e,zt(yl,$r),$r|=r}else o!==null?(r=o.baseLanes|e,n.memoizedState=null):r=e,zt(yl,$r),$r|=r;return pr(t,n,i,e),n.child}function dO(t,n){var e=n.ref;(t===null&&e!==null||t!==null&&t.ref!==e)&&(n.flags|=512,n.flags|=2097152)}function Pb(t,n,e,r,i){var o=Dr(e)?iu:ur.current;return o=Vl(n,o),Nl(n,i),e=rS(t,n,e,r,o,i),r=iS(),t!==null&&!Ar?(n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~i,Zo(t,n,i)):(Jt&&r&&Hx(n),n.flags|=1,pr(t,n,e,i),n.child)}function IT(t,n,e,r,i){if(Dr(e)){var o=!0;Pm(n)}else o=!1;if(Nl(n,i),n.stateNode===null)Zh(t,n),zA(n,e,r),Db(n,e,r,i),r=!0;else if(t===null){var a=n.stateNode,s=n.memoizedProps;a.props=s;var u=a.context,l=e.contextType;typeof l=="object"&&l!==null?l=wi(l):(l=Dr(e)?iu:ur.current,l=Vl(n,l));var c=e.getDerivedStateFromProps,d=typeof c=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==r||u!==l)&&wT(n,a,r,l),Ca=!1;var f=n.memoizedState;a.state=f,jm(n,r,a,i),u=n.memoizedState,s!==r||f!==u||Or.current||Ca?(typeof c=="function"&&(Ob(n,e,c,r),u=n.memoizedState),(s=Ca||bT(n,e,s,r,f,u,l))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(n.flags|=4194308)):(typeof a.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=r,n.memoizedState=u),a.props=r,a.state=u,a.context=l,r=s):(typeof a.componentDidMount=="function"&&(n.flags|=4194308),r=!1)}else{a=n.stateNode,LA(t,n),s=n.memoizedProps,l=n.type===n.elementType?s:_i(n.type,s),a.props=l,d=n.pendingProps,f=a.context,u=e.contextType,typeof u=="object"&&u!==null?u=wi(u):(u=Dr(e)?iu:ur.current,u=Vl(n,u));var p=e.getDerivedStateFromProps;(c=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==d||f!==u)&&wT(n,a,r,u),Ca=!1,f=n.memoizedState,a.state=f,jm(n,r,a,i);var h=n.memoizedState;s!==d||f!==h||Or.current||Ca?(typeof p=="function"&&(Ob(n,e,p,r),h=n.memoizedState),(l=Ca||bT(n,e,l,r,f,h,u)||!1)?(c||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,h,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,h,u)),typeof a.componentDidUpdate=="function"&&(n.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof a.componentDidUpdate!="function"||s===t.memoizedProps&&f===t.memoizedState||(n.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&f===t.memoizedState||(n.flags|=1024),n.memoizedProps=r,n.memoizedState=h),a.props=r,a.state=h,a.context=u,r=l):(typeof a.componentDidUpdate!="function"||s===t.memoizedProps&&f===t.memoizedState||(n.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&f===t.memoizedState||(n.flags|=1024),r=!1)}return Lb(t,n,e,r,o,i)}function Lb(t,n,e,r,i,o){dO(t,n);var a=(n.flags&128)!==0;if(!r&&!a)return i&&hT(n,e,!1),Zo(t,n,o);r=n.stateNode,P$.current=n;var s=a&&typeof e.getDerivedStateFromError!="function"?null:r.render();return n.flags|=1,t!==null&&a?(n.child=Ul(n,t.child,null,o),n.child=Ul(n,null,s,o)):pr(t,n,s,o),n.memoizedState=r.state,i&&hT(n,e,!0),n.child}function fO(t){var n=t.stateNode;n.pendingContext?pT(t,n.pendingContext,n.pendingContext!==n.context):n.context&&pT(t,n.context,!1),Zx(t,n.containerInfo)}function _T(t,n,e,r,i){return $l(),qx(i),n.flags|=256,pr(t,n,e,r),n.child}var Fb={dehydrated:null,treeContext:null,retryLane:0};function zb(t){return{baseLanes:t,cachePool:null,transitions:null}}function pO(t,n,e){var r=n.pendingProps,i=en.current,o=!1,a=(n.flags&128)!==0,s;if((s=a)||(s=t!==null&&t.memoizedState===null?!1:(i&2)!==0),s?(o=!0,n.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),zt(en,i&1),t===null)return _b(n),t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(n.mode&1?t.data==="$!"?n.lanes=8:n.lanes=1073741824:n.lanes=1,null):(a=r.children,t=r.fallback,o?(r=n.mode,o=n.child,a={mode:"hidden",children:a},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=Jv(a,r,0,null),t=Qs(t,r,e,null),o.return=n,t.return=n,o.sibling=t,n.child=o,n.child.memoizedState=zb(e),n.memoizedState=Fb,t):sS(n,a));if(i=t.memoizedState,i!==null&&(s=i.dehydrated,s!==null))return L$(t,n,a,r,s,i,e);if(o){o=r.fallback,a=n.mode,i=t.child,s=i.sibling;var u={mode:"hidden",children:r.children};return!(a&1)&&n.child!==i?(r=n.child,r.childLanes=0,r.pendingProps=u,n.deletions=null):(r=Xa(i,u),r.subtreeFlags=i.subtreeFlags&14680064),s!==null?o=Xa(s,o):(o=Qs(o,a,e,null),o.flags|=2),o.return=n,r.return=n,r.sibling=o,n.child=r,r=o,o=n.child,a=t.child.memoizedState,a=a===null?zb(e):{baseLanes:a.baseLanes|e,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=t.childLanes&~e,n.memoizedState=Fb,r}return o=t.child,t=o.sibling,r=Xa(o,{mode:"visible",children:r.children}),!(n.mode&1)&&(r.lanes=e),r.return=n,r.sibling=null,t!==null&&(e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)),n.child=r,n.memoizedState=null,r}function sS(t,n){return n=Jv({mode:"visible",children:n},t.mode,0,null),n.return=t,t.child=n}function ch(t,n,e,r){return r!==null&&qx(r),Ul(n,t.child,null,e),t=sS(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function L$(t,n,e,r,i,o,a){if(e)return n.flags&256?(n.flags&=-257,r=A0(Error(ye(422))),ch(t,n,a,r)):n.memoizedState!==null?(n.child=t.child,n.flags|=128,null):(o=r.fallback,i=n.mode,r=Jv({mode:"visible",children:r.children},i,0,null),o=Qs(o,i,a,null),o.flags|=2,r.return=n,o.return=n,r.sibling=o,n.child=r,n.mode&1&&Ul(n,t.child,null,a),n.child.memoizedState=zb(a),n.memoizedState=Fb,o);if(!(n.mode&1))return ch(t,n,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var s=r.dgst;return r=s,o=Error(ye(419)),r=A0(o,r,void 0),ch(t,n,a,r)}if(s=(a&t.childLanes)!==0,Ar||s){if(r=zn,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Qo(t,i),zi(r,t,i,-1))}return pS(),r=A0(Error(ye(421))),ch(t,n,a,r)}return i.data==="$?"?(n.flags|=128,n.child=t.child,n=X$.bind(null,t),i._reactRetry=n,null):(t=o.treeContext,Kr=Ha(i.nextSibling),Jr=n,Jt=!0,Oi=null,t!==null&&(pi[hi++]=Vo,pi[hi++]=$o,pi[hi++]=ou,Vo=t.id,$o=t.overflow,ou=n),n=sS(n,r.children),n.flags|=4096,n)}function AT(t,n,e){t.lanes|=n;var r=t.alternate;r!==null&&(r.lanes|=n),Ab(t.return,n,e)}function O0(t,n,e,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:r,tail:e,tailMode:i}:(o.isBackwards=n,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=e,o.tailMode=i)}function hO(t,n,e){var r=n.pendingProps,i=r.revealOrder,o=r.tail;if(pr(t,n,r.children,e),r=en.current,r&2)r=r&1|2,n.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&AT(t,e,n);else if(t.tag===19)AT(t,e,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break e;for(;t.sibling===null;){if(t.return===null||t.return===n)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(zt(en,r),!(n.mode&1))n.memoizedState=null;else switch(i){case"forwards":for(e=n.child,i=null;e!==null;)t=e.alternate,t!==null&&Vm(t)===null&&(i=e),e=e.sibling;e=i,e===null?(i=n.child,n.child=null):(i=e.sibling,e.sibling=null),O0(n,!1,i,e,o);break;case"backwards":for(e=null,i=n.child,n.child=null;i!==null;){if(t=i.alternate,t!==null&&Vm(t)===null){n.child=i;break}t=i.sibling,i.sibling=e,e=i,i=t}O0(n,!0,e,null,o);break;case"together":O0(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Zh(t,n){!(n.mode&1)&&t!==null&&(t.alternate=null,n.alternate=null,n.flags|=2)}function Zo(t,n,e){if(t!==null&&(n.dependencies=t.dependencies),su|=n.lanes,!(e&n.childLanes))return null;if(t!==null&&n.child!==t.child)throw Error(ye(153));if(n.child!==null){for(t=n.child,e=Xa(t,t.pendingProps),n.child=e,e.return=n;t.sibling!==null;)t=t.sibling,e=e.sibling=Xa(t,t.pendingProps),e.return=n;e.sibling=null}return n.child}function F$(t,n,e){switch(n.tag){case 3:fO(n),$l();break;case 5:VA(n);break;case 1:Dr(n.type)&&Pm(n);break;case 4:Zx(n,n.stateNode.containerInfo);break;case 10:var r=n.type._context,i=n.memoizedProps.value;zt(zm,r._currentValue),r._currentValue=i;break;case 13:if(r=n.memoizedState,r!==null)return r.dehydrated!==null?(zt(en,en.current&1),n.flags|=128,null):e&n.child.childLanes?pO(t,n,e):(zt(en,en.current&1),t=Zo(t,n,e),t!==null?t.sibling:null);zt(en,en.current&1);break;case 19:if(r=(e&n.childLanes)!==0,t.flags&128){if(r)return hO(t,n,e);n.flags|=128}if(i=n.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),zt(en,en.current),r)break;return null;case 22:case 23:return n.lanes=0,cO(t,n,e)}return Zo(t,n,e)}var mO,Bb,vO,gO;mO=function(t,n){for(var e=n.child;e!==null;){if(e.tag===5||e.tag===6)t.appendChild(e.stateNode);else if(e.tag!==4&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return;e=e.return}e.sibling.return=e.return,e=e.sibling}};Bb=function(){};vO=function(t,n,e,r){var i=t.memoizedProps;if(i!==r){t=n.stateNode,Ws(ho.current);var o=null;switch(e){case"input":i=sb(t,i),r=sb(t,r),o=[];break;case"select":i=rn({},i,{value:void 0}),r=rn({},r,{value:void 0}),o=[];break;case"textarea":i=cb(t,i),r=cb(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Dm)}fb(e,r);var a;e=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(e||(e={}),e[a]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(of.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var u=r[l];if(s=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&u!==s&&(u!=null||s!=null))if(l==="style")if(s){for(a in s)!s.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(e||(e={}),e[a]="");for(a in u)u.hasOwnProperty(a)&&s[a]!==u[a]&&(e||(e={}),e[a]=u[a])}else e||(o||(o=[]),o.push(l,e)),e=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,s=s?s.__html:void 0,u!=null&&s!==u&&(o=o||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(o=o||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(of.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&jt("scroll",t),o||s===u||(o=[])):(o=o||[]).push(l,u))}e&&(o=o||[]).push("style",e);var l=o;(n.updateQueue=l)&&(n.flags|=4)}};gO=function(t,n,e,r){e!==r&&(n.flags|=4)};function nd(t,n){if(!Jt)switch(t.tailMode){case"hidden":n=t.tail;for(var e=null;n!==null;)n.alternate!==null&&(e=n),n=n.sibling;e===null?t.tail=null:e.sibling=null;break;case"collapsed":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Zn(t){var n=t.alternate!==null&&t.alternate.child===t.child,e=0,r=0;if(n)for(var i=t.child;i!==null;)e|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)e|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=e,n}function z$(t,n,e){var r=n.pendingProps;switch(Gx(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zn(n),null;case 1:return Dr(n.type)&&Mm(),Zn(n),null;case 3:return r=n.stateNode,Wl(),Wt(Or),Wt(ur),tS(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(uh(n)?n.flags|=4:t===null||t.memoizedState.isDehydrated&&!(n.flags&256)||(n.flags|=1024,Oi!==null&&(qb(Oi),Oi=null))),Bb(t,n),Zn(n),null;case 5:eS(n);var i=Ws(gf.current);if(e=n.type,t!==null&&n.stateNode!=null)vO(t,n,e,r,i),t.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!r){if(n.stateNode===null)throw Error(ye(166));return Zn(n),null}if(t=Ws(ho.current),uh(n)){r=n.stateNode,e=n.type;var o=n.memoizedProps;switch(r[ao]=n,r[mf]=o,t=(n.mode&1)!==0,e){case"dialog":jt("cancel",r),jt("close",r);break;case"iframe":case"object":case"embed":jt("load",r);break;case"video":case"audio":for(i=0;i<Ad.length;i++)jt(Ad[i],r);break;case"source":jt("error",r);break;case"img":case"image":case"link":jt("error",r),jt("load",r);break;case"details":jt("toggle",r);break;case"input":jR(r,o),jt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},jt("invalid",r);break;case"textarea":$R(r,o),jt("invalid",r)}fb(e,o),i=null;for(var a in o)if(o.hasOwnProperty(a)){var s=o[a];a==="children"?typeof s=="string"?r.textContent!==s&&(o.suppressHydrationWarning!==!0&&sh(r.textContent,s,t),i=["children",s]):typeof s=="number"&&r.textContent!==""+s&&(o.suppressHydrationWarning!==!0&&sh(r.textContent,s,t),i=["children",""+s]):of.hasOwnProperty(a)&&s!=null&&a==="onScroll"&&jt("scroll",r)}switch(e){case"input":Zp(r),VR(r,o,!0);break;case"textarea":Zp(r),UR(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Dm)}r=i,n.updateQueue=r,r!==null&&(n.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=W_(e)),t==="http://www.w3.org/1999/xhtml"?e==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(e,{is:r.is}):(t=a.createElement(e),e==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,e),t[ao]=n,t[mf]=r,mO(t,n,!1,!1),n.stateNode=t;e:{switch(a=pb(e,r),e){case"dialog":jt("cancel",t),jt("close",t),i=r;break;case"iframe":case"object":case"embed":jt("load",t),i=r;break;case"video":case"audio":for(i=0;i<Ad.length;i++)jt(Ad[i],t);i=r;break;case"source":jt("error",t),i=r;break;case"img":case"image":case"link":jt("error",t),jt("load",t),i=r;break;case"details":jt("toggle",t),i=r;break;case"input":jR(t,r),i=sb(t,r),jt("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=rn({},r,{value:void 0}),jt("invalid",t);break;case"textarea":$R(t,r),i=cb(t,r),jt("invalid",t);break;default:i=r}fb(e,i),s=i;for(o in s)if(s.hasOwnProperty(o)){var u=s[o];o==="style"?q_(t,u):o==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&H_(t,u)):o==="children"?typeof u=="string"?(e!=="textarea"||u!=="")&&af(t,u):typeof u=="number"&&af(t,""+u):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(of.hasOwnProperty(o)?u!=null&&o==="onScroll"&&jt("scroll",t):u!=null&&Ax(t,o,u,a))}switch(e){case"input":Zp(t),VR(t,r,!1);break;case"textarea":Zp(t),UR(t);break;case"option":r.value!=null&&t.setAttribute("value",""+is(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?El(t,!!r.multiple,o,!1):r.defaultValue!=null&&El(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Dm)}switch(e){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return Zn(n),null;case 6:if(t&&n.stateNode!=null)gO(t,n,t.memoizedProps,r);else{if(typeof r!="string"&&n.stateNode===null)throw Error(ye(166));if(e=Ws(gf.current),Ws(ho.current),uh(n)){if(r=n.stateNode,e=n.memoizedProps,r[ao]=n,(o=r.nodeValue!==e)&&(t=Jr,t!==null))switch(t.tag){case 3:sh(r.nodeValue,e,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&sh(r.nodeValue,e,(t.mode&1)!==0)}o&&(n.flags|=4)}else r=(e.nodeType===9?e:e.ownerDocument).createTextNode(r),r[ao]=n,n.stateNode=r}return Zn(n),null;case 13:if(Wt(en),r=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Jt&&Kr!==null&&n.mode&1&&!(n.flags&128))MA(),$l(),n.flags|=98560,o=!1;else if(o=uh(n),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(ye(318));if(o=n.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(ye(317));o[ao]=n}else $l(),!(n.flags&128)&&(n.memoizedState=null),n.flags|=4;Zn(n),o=!1}else Oi!==null&&(qb(Oi),Oi=null),o=!0;if(!o)return n.flags&65536?n:null}return n.flags&128?(n.lanes=e,n):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(n.child.flags|=8192,n.mode&1&&(t===null||en.current&1?In===0&&(In=3):pS())),n.updateQueue!==null&&(n.flags|=4),Zn(n),null);case 4:return Wl(),Bb(t,n),t===null&&pf(n.stateNode.containerInfo),Zn(n),null;case 10:return Yx(n.type._context),Zn(n),null;case 17:return Dr(n.type)&&Mm(),Zn(n),null;case 19:if(Wt(en),o=n.memoizedState,o===null)return Zn(n),null;if(r=(n.flags&128)!==0,a=o.rendering,a===null)if(r)nd(o,!1);else{if(In!==0||t!==null&&t.flags&128)for(t=n.child;t!==null;){if(a=Vm(t),a!==null){for(n.flags|=128,nd(o,!1),r=a.updateQueue,r!==null&&(n.updateQueue=r,n.flags|=4),n.subtreeFlags=0,r=e,e=n.child;e!==null;)o=e,t=r,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,t=a.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e=e.sibling;return zt(en,en.current&1|2),n.child}t=t.sibling}o.tail!==null&&vn()>Gl&&(n.flags|=128,r=!0,nd(o,!1),n.lanes=4194304)}else{if(!r)if(t=Vm(a),t!==null){if(n.flags|=128,r=!0,e=t.updateQueue,e!==null&&(n.updateQueue=e,n.flags|=4),nd(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!Jt)return Zn(n),null}else 2*vn()-o.renderingStartTime>Gl&&e!==1073741824&&(n.flags|=128,r=!0,nd(o,!1),n.lanes=4194304);o.isBackwards?(a.sibling=n.child,n.child=a):(e=o.last,e!==null?e.sibling=a:n.child=a,o.last=a)}return o.tail!==null?(n=o.tail,o.rendering=n,o.tail=n.sibling,o.renderingStartTime=vn(),n.sibling=null,e=en.current,zt(en,r?e&1|2:e&1),n):(Zn(n),null);case 22:case 23:return fS(),r=n.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(n.flags|=8192),r&&n.mode&1?$r&1073741824&&(Zn(n),n.subtreeFlags&6&&(n.flags|=8192)):Zn(n),null;case 24:return null;case 25:return null}throw Error(ye(156,n.tag))}function B$(t,n){switch(Gx(n),n.tag){case 1:return Dr(n.type)&&Mm(),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return Wl(),Wt(Or),Wt(ur),tS(),t=n.flags,t&65536&&!(t&128)?(n.flags=t&-65537|128,n):null;case 5:return eS(n),null;case 13:if(Wt(en),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(ye(340));$l()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return Wt(en),null;case 4:return Wl(),null;case 10:return Yx(n.type._context),null;case 22:case 23:return fS(),null;case 24:return null;default:return null}}var dh=!1,ar=!1,j$=typeof WeakSet=="function"?WeakSet:Set,Te=null;function gl(t,n){var e=t.ref;if(e!==null)if(typeof e=="function")try{e(null)}catch(r){ln(t,n,r)}else e.current=null}function jb(t,n,e){try{e()}catch(r){ln(t,n,r)}}var OT=!1;function V$(t,n){if(Eb=_m,t=xA(),Wx(t)){if("selectionStart"in t)var e={start:t.selectionStart,end:t.selectionEnd};else e:{e=(e=t.ownerDocument)&&e.defaultView||window;var r=e.getSelection&&e.getSelection();if(r&&r.rangeCount!==0){e=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{e.nodeType,o.nodeType}catch{e=null;break e}var a=0,s=-1,u=-1,l=0,c=0,d=t,f=null;t:for(;;){for(var p;d!==e||i!==0&&d.nodeType!==3||(s=a+i),d!==o||r!==0&&d.nodeType!==3||(u=a+r),d.nodeType===3&&(a+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===t)break t;if(f===e&&++l===i&&(s=a),f===o&&++c===r&&(u=a),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}e=s===-1||u===-1?null:{start:s,end:u}}else e=null}e=e||{start:0,end:0}}else e=null;for(Cb={focusedElem:t,selectionRange:e},_m=!1,Te=n;Te!==null;)if(n=Te,t=n.child,(n.subtreeFlags&1028)!==0&&t!==null)t.return=n,Te=t;else for(;Te!==null;){n=Te;try{var h=n.alternate;if(n.flags&1024)switch(n.tag){case 0:case 11:case 15:break;case 1:if(h!==null){var v=h.memoizedProps,g=h.memoizedState,m=n.stateNode,y=m.getSnapshotBeforeUpdate(n.elementType===n.type?v:_i(n.type,v),g);m.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=n.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ye(163))}}catch(w){ln(n,n.return,w)}if(t=n.sibling,t!==null){t.return=n.return,Te=t;break}Te=n.return}return h=OT,OT=!1,h}function Hd(t,n,e){var r=n.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&jb(n,e,o)}i=i.next}while(i!==r)}}function Xv(t,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var e=n=n.next;do{if((e.tag&t)===t){var r=e.create;e.destroy=r()}e=e.next}while(e!==n)}}function Vb(t){var n=t.ref;if(n!==null){var e=t.stateNode;switch(t.tag){case 5:t=e;break;default:t=e}typeof n=="function"?n(t):n.current=t}}function yO(t){var n=t.alternate;n!==null&&(t.alternate=null,yO(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&(delete n[ao],delete n[mf],delete n[Nb],delete n[E$],delete n[C$])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function bO(t){return t.tag===5||t.tag===3||t.tag===4}function DT(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||bO(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function $b(t,n,e){var r=t.tag;if(r===5||r===6)t=t.stateNode,n?e.nodeType===8?e.parentNode.insertBefore(t,n):e.insertBefore(t,n):(e.nodeType===8?(n=e.parentNode,n.insertBefore(t,e)):(n=e,n.appendChild(t)),e=e._reactRootContainer,e!=null||n.onclick!==null||(n.onclick=Dm));else if(r!==4&&(t=t.child,t!==null))for($b(t,n,e),t=t.sibling;t!==null;)$b(t,n,e),t=t.sibling}function Ub(t,n,e){var r=t.tag;if(r===5||r===6)t=t.stateNode,n?e.insertBefore(t,n):e.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Ub(t,n,e),t=t.sibling;t!==null;)Ub(t,n,e),t=t.sibling}var Hn=null,Ai=!1;function ma(t,n,e){for(e=e.child;e!==null;)wO(t,n,e),e=e.sibling}function wO(t,n,e){if(po&&typeof po.onCommitFiberUnmount=="function")try{po.onCommitFiberUnmount(Vv,e)}catch{}switch(e.tag){case 5:ar||gl(e,n);case 6:var r=Hn,i=Ai;Hn=null,ma(t,n,e),Hn=r,Ai=i,Hn!==null&&(Ai?(t=Hn,e=e.stateNode,t.nodeType===8?t.parentNode.removeChild(e):t.removeChild(e)):Hn.removeChild(e.stateNode));break;case 18:Hn!==null&&(Ai?(t=Hn,e=e.stateNode,t.nodeType===8?R0(t.parentNode,e):t.nodeType===1&&R0(t,e),cf(t)):R0(Hn,e.stateNode));break;case 4:r=Hn,i=Ai,Hn=e.stateNode.containerInfo,Ai=!0,ma(t,n,e),Hn=r,Ai=i;break;case 0:case 11:case 14:case 15:if(!ar&&(r=e.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&jb(e,n,a),i=i.next}while(i!==r)}ma(t,n,e);break;case 1:if(!ar&&(gl(e,n),r=e.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=e.memoizedProps,r.state=e.memoizedState,r.componentWillUnmount()}catch(s){ln(e,n,s)}ma(t,n,e);break;case 21:ma(t,n,e);break;case 22:e.mode&1?(ar=(r=ar)||e.memoizedState!==null,ma(t,n,e),ar=r):ma(t,n,e);break;default:ma(t,n,e)}}function MT(t){var n=t.updateQueue;if(n!==null){t.updateQueue=null;var e=t.stateNode;e===null&&(e=t.stateNode=new j$),n.forEach(function(r){var i=Y$.bind(null,t,r);e.has(r)||(e.add(r),r.then(i,i))})}}function Ti(t,n){var e=n.deletions;if(e!==null)for(var r=0;r<e.length;r++){var i=e[r];try{var o=t,a=n,s=a;e:for(;s!==null;){switch(s.tag){case 5:Hn=s.stateNode,Ai=!1;break e;case 3:Hn=s.stateNode.containerInfo,Ai=!0;break e;case 4:Hn=s.stateNode.containerInfo,Ai=!0;break e}s=s.return}if(Hn===null)throw Error(ye(160));wO(o,a,i),Hn=null,Ai=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(l){ln(i,n,l)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)xO(n,t),n=n.sibling}function xO(t,n){var e=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ti(n,t),Ji(t),r&4){try{Hd(3,t,t.return),Xv(3,t)}catch(v){ln(t,t.return,v)}try{Hd(5,t,t.return)}catch(v){ln(t,t.return,v)}}break;case 1:Ti(n,t),Ji(t),r&512&&e!==null&&gl(e,e.return);break;case 5:if(Ti(n,t),Ji(t),r&512&&e!==null&&gl(e,e.return),t.flags&32){var i=t.stateNode;try{af(i,"")}catch(v){ln(t,t.return,v)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,a=e!==null?e.memoizedProps:o,s=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{s==="input"&&o.type==="radio"&&o.name!=null&&$_(i,o),pb(s,a);var l=pb(s,o);for(a=0;a<u.length;a+=2){var c=u[a],d=u[a+1];c==="style"?q_(i,d):c==="dangerouslySetInnerHTML"?H_(i,d):c==="children"?af(i,d):Ax(i,c,d,l)}switch(s){case"input":ub(i,o);break;case"textarea":U_(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;p!=null?El(i,!!o.multiple,p,!1):f!==!!o.multiple&&(o.defaultValue!=null?El(i,!!o.multiple,o.defaultValue,!0):El(i,!!o.multiple,o.multiple?[]:"",!1))}i[mf]=o}catch(v){ln(t,t.return,v)}}break;case 6:if(Ti(n,t),Ji(t),r&4){if(t.stateNode===null)throw Error(ye(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(v){ln(t,t.return,v)}}break;case 3:if(Ti(n,t),Ji(t),r&4&&e!==null&&e.memoizedState.isDehydrated)try{cf(n.containerInfo)}catch(v){ln(t,t.return,v)}break;case 4:Ti(n,t),Ji(t);break;case 13:Ti(n,t),Ji(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(cS=vn())),r&4&&MT(t);break;case 22:if(c=e!==null&&e.memoizedState!==null,t.mode&1?(ar=(l=ar)||c,Ti(n,t),ar=l):Ti(n,t),Ji(t),r&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!c&&t.mode&1)for(Te=t,c=t.child;c!==null;){for(d=Te=c;Te!==null;){switch(f=Te,p=f.child,f.tag){case 0:case 11:case 14:case 15:Hd(4,f,f.return);break;case 1:gl(f,f.return);var h=f.stateNode;if(typeof h.componentWillUnmount=="function"){r=f,e=f.return;try{n=r,h.props=n.memoizedProps,h.state=n.memoizedState,h.componentWillUnmount()}catch(v){ln(r,e,v)}}break;case 5:gl(f,f.return);break;case 22:if(f.memoizedState!==null){LT(d);continue}}p!==null?(p.return=f,Te=p):LT(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{i=d.stateNode,l?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(s=d.stateNode,u=d.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,s.style.display=G_("display",a))}catch(v){ln(t,t.return,v)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=l?"":d.memoizedProps}catch(v){ln(t,t.return,v)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Ti(n,t),Ji(t),r&4&&MT(t);break;case 21:break;default:Ti(n,t),Ji(t)}}function Ji(t){var n=t.flags;if(n&2){try{e:{for(var e=t.return;e!==null;){if(bO(e)){var r=e;break e}e=e.return}throw Error(ye(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(af(i,""),r.flags&=-33);var o=DT(t);Ub(t,o,i);break;case 3:case 4:var a=r.stateNode.containerInfo,s=DT(t);$b(t,s,a);break;default:throw Error(ye(161))}}catch(u){ln(t,t.return,u)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function $$(t,n,e){Te=t,SO(t)}function SO(t,n,e){for(var r=(t.mode&1)!==0;Te!==null;){var i=Te,o=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||dh;if(!a){var s=i.alternate,u=s!==null&&s.memoizedState!==null||ar;s=dh;var l=ar;if(dh=a,(ar=u)&&!l)for(Te=i;Te!==null;)a=Te,u=a.child,a.tag===22&&a.memoizedState!==null?FT(i):u!==null?(u.return=a,Te=u):FT(i);for(;o!==null;)Te=o,SO(o),o=o.sibling;Te=i,dh=s,ar=l}PT(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,Te=o):PT(t)}}function PT(t){for(;Te!==null;){var n=Te;if(n.flags&8772){var e=n.alternate;try{if(n.flags&8772)switch(n.tag){case 0:case 11:case 15:ar||Xv(5,n);break;case 1:var r=n.stateNode;if(n.flags&4&&!ar)if(e===null)r.componentDidMount();else{var i=n.elementType===n.type?e.memoizedProps:_i(n.type,e.memoizedProps);r.componentDidUpdate(i,e.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=n.updateQueue;o!==null&&yT(n,o,r);break;case 3:var a=n.updateQueue;if(a!==null){if(e=null,n.child!==null)switch(n.child.tag){case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}yT(n,a,e)}break;case 5:var s=n.stateNode;if(e===null&&n.flags&4){e=s;var u=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&e.focus();break;case"img":u.src&&(e.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var l=n.alternate;if(l!==null){var c=l.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&cf(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ye(163))}ar||n.flags&512&&Vb(n)}catch(f){ln(n,n.return,f)}}if(n===t){Te=null;break}if(e=n.sibling,e!==null){e.return=n.return,Te=e;break}Te=n.return}}function LT(t){for(;Te!==null;){var n=Te;if(n===t){Te=null;break}var e=n.sibling;if(e!==null){e.return=n.return,Te=e;break}Te=n.return}}function FT(t){for(;Te!==null;){var n=Te;try{switch(n.tag){case 0:case 11:case 15:var e=n.return;try{Xv(4,n)}catch(u){ln(n,e,u)}break;case 1:var r=n.stateNode;if(typeof r.componentDidMount=="function"){var i=n.return;try{r.componentDidMount()}catch(u){ln(n,i,u)}}var o=n.return;try{Vb(n)}catch(u){ln(n,o,u)}break;case 5:var a=n.return;try{Vb(n)}catch(u){ln(n,a,u)}}}catch(u){ln(n,n.return,u)}if(n===t){Te=null;break}var s=n.sibling;if(s!==null){s.return=n.return,Te=s;break}Te=n.return}}var U$=Math.ceil,Wm=ia.ReactCurrentDispatcher,uS=ia.ReactCurrentOwner,yi=ia.ReactCurrentBatchConfig,yt=0,zn=null,xn=null,Yn=0,$r=0,yl=ps(0),In=0,xf=null,su=0,Yv=0,lS=0,Gd=null,kr=null,cS=0,Gl=1/0,Po=null,Hm=!1,Wb=null,qa=null,fh=!1,Oa=null,Gm=0,qd=0,Hb=null,em=-1,tm=0;function gr(){return yt&6?vn():em!==-1?em:em=vn()}function Ka(t){return t.mode&1?yt&2&&Yn!==0?Yn&-Yn:T$.transition!==null?(tm===0&&(tm=oA()),tm):(t=At,t!==0||(t=window.event,t=t===void 0?16:fA(t.type)),t):1}function zi(t,n,e,r){if(50<qd)throw qd=0,Hb=null,Error(ye(185));Kf(t,e,r),(!(yt&2)||t!==zn)&&(t===zn&&(!(yt&2)&&(Yv|=e),In===4&&ka(t,Yn)),Mr(t,r),e===1&&yt===0&&!(n.mode&1)&&(Gl=vn()+500,Gv&&hs()))}function Mr(t,n){var e=t.callbackNode;TV(t,n);var r=Im(t,t===zn?Yn:0);if(r===0)e!==null&&GR(e),t.callbackNode=null,t.callbackPriority=0;else if(n=r&-r,t.callbackPriority!==n){if(e!=null&&GR(e),n===1)t.tag===0?R$(zT.bind(null,t)):AA(zT.bind(null,t)),x$(function(){!(yt&6)&&hs()}),e=null;else{switch(aA(r)){case 1:e=Lx;break;case 4:e=rA;break;case 16:e=km;break;case 536870912:e=iA;break;default:e=km}e=_O(e,EO.bind(null,t))}t.callbackPriority=n,t.callbackNode=e}}function EO(t,n){if(em=-1,tm=0,yt&6)throw Error(ye(327));var e=t.callbackNode;if(kl()&&t.callbackNode!==e)return null;var r=Im(t,t===zn?Yn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||n)n=qm(t,r);else{n=r;var i=yt;yt|=2;var o=RO();(zn!==t||Yn!==n)&&(Po=null,Gl=vn()+500,Js(t,n));do try{G$();break}catch(s){CO(t,s)}while(!0);Xx(),Wm.current=o,yt=i,xn!==null?n=0:(zn=null,Yn=0,n=In)}if(n!==0){if(n===2&&(i=yb(t),i!==0&&(r=i,n=Gb(t,i))),n===1)throw e=xf,Js(t,0),ka(t,r),Mr(t,vn()),e;if(n===6)ka(t,r);else{if(i=t.current.alternate,!(r&30)&&!W$(i)&&(n=qm(t,r),n===2&&(o=yb(t),o!==0&&(r=o,n=Gb(t,o))),n===1))throw e=xf,Js(t,0),ka(t,r),Mr(t,vn()),e;switch(t.finishedWork=i,t.finishedLanes=r,n){case 0:case 1:throw Error(ye(345));case 2:Ds(t,kr,Po);break;case 3:if(ka(t,r),(r&130023424)===r&&(n=cS+500-vn(),10<n)){if(Im(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){gr(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Tb(Ds.bind(null,t,kr,Po),n);break}Ds(t,kr,Po);break;case 4:if(ka(t,r),(r&4194240)===r)break;for(n=t.eventTimes,i=-1;0<r;){var a=31-Fi(r);o=1<<a,a=n[a],a>i&&(i=a),r&=~o}if(r=i,r=vn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*U$(r/1960))-r,10<r){t.timeoutHandle=Tb(Ds.bind(null,t,kr,Po),r);break}Ds(t,kr,Po);break;case 5:Ds(t,kr,Po);break;default:throw Error(ye(329))}}}return Mr(t,vn()),t.callbackNode===e?EO.bind(null,t):null}function Gb(t,n){var e=Gd;return t.current.memoizedState.isDehydrated&&(Js(t,n).flags|=256),t=qm(t,n),t!==2&&(n=kr,kr=e,n!==null&&qb(n)),t}function qb(t){kr===null?kr=t:kr.push.apply(kr,t)}function W$(t){for(var n=t;;){if(n.flags&16384){var e=n.updateQueue;if(e!==null&&(e=e.stores,e!==null))for(var r=0;r<e.length;r++){var i=e[r],o=i.getSnapshot;i=i.value;try{if(!Vi(o(),i))return!1}catch{return!1}}}if(e=n.child,n.subtreeFlags&16384&&e!==null)e.return=n,n=e;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function ka(t,n){for(n&=~lS,n&=~Yv,t.suspendedLanes|=n,t.pingedLanes&=~n,t=t.expirationTimes;0<n;){var e=31-Fi(n),r=1<<e;t[e]=-1,n&=~r}}function zT(t){if(yt&6)throw Error(ye(327));kl();var n=Im(t,0);if(!(n&1))return Mr(t,vn()),null;var e=qm(t,n);if(t.tag!==0&&e===2){var r=yb(t);r!==0&&(n=r,e=Gb(t,r))}if(e===1)throw e=xf,Js(t,0),ka(t,n),Mr(t,vn()),e;if(e===6)throw Error(ye(345));return t.finishedWork=t.current.alternate,t.finishedLanes=n,Ds(t,kr,Po),Mr(t,vn()),null}function dS(t,n){var e=yt;yt|=1;try{return t(n)}finally{yt=e,yt===0&&(Gl=vn()+500,Gv&&hs())}}function uu(t){Oa!==null&&Oa.tag===0&&!(yt&6)&&kl();var n=yt;yt|=1;var e=yi.transition,r=At;try{if(yi.transition=null,At=1,t)return t()}finally{At=r,yi.transition=e,yt=n,!(yt&6)&&hs()}}function fS(){$r=yl.current,Wt(yl)}function Js(t,n){t.finishedWork=null,t.finishedLanes=0;var e=t.timeoutHandle;if(e!==-1&&(t.timeoutHandle=-1,w$(e)),xn!==null)for(e=xn.return;e!==null;){var r=e;switch(Gx(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Mm();break;case 3:Wl(),Wt(Or),Wt(ur),tS();break;case 5:eS(r);break;case 4:Wl();break;case 13:Wt(en);break;case 19:Wt(en);break;case 10:Yx(r.type._context);break;case 22:case 23:fS()}e=e.return}if(zn=t,xn=t=Xa(t.current,null),Yn=$r=n,In=0,xf=null,lS=Yv=su=0,kr=Gd=null,Us!==null){for(n=0;n<Us.length;n++)if(e=Us[n],r=e.interleaved,r!==null){e.interleaved=null;var i=r.next,o=e.pending;if(o!==null){var a=o.next;o.next=i,r.next=a}e.pending=r}Us=null}return t}function CO(t,n){do{var e=xn;try{if(Xx(),Jh.current=Um,$m){for(var r=tn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}$m=!1}if(au=0,Ln=kn=tn=null,Wd=!1,yf=0,uS.current=null,e===null||e.return===null){In=1,xf=n,xn=null;break}e:{var o=t,a=e.return,s=e,u=n;if(n=Yn,s.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,c=s,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var p=RT(a);if(p!==null){p.flags&=-257,TT(p,a,s,o,n),p.mode&1&&CT(o,l,n),n=p,u=l;var h=n.updateQueue;if(h===null){var v=new Set;v.add(u),n.updateQueue=v}else h.add(u);break e}else{if(!(n&1)){CT(o,l,n),pS();break e}u=Error(ye(426))}}else if(Jt&&s.mode&1){var g=RT(a);if(g!==null){!(g.flags&65536)&&(g.flags|=256),TT(g,a,s,o,n),qx(Hl(u,s));break e}}o=u=Hl(u,s),In!==4&&(In=2),Gd===null?Gd=[o]:Gd.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,n&=-n,o.lanes|=n;var m=sO(o,u,n);gT(o,m);break e;case 1:s=u;var y=o.type,b=o.stateNode;if(!(o.flags&128)&&(typeof y.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(qa===null||!qa.has(b)))){o.flags|=65536,n&=-n,o.lanes|=n;var w=uO(o,s,n);gT(o,w);break e}}o=o.return}while(o!==null)}NO(e)}catch(x){n=x,xn===e&&e!==null&&(xn=e=e.return);continue}break}while(!0)}function RO(){var t=Wm.current;return Wm.current=Um,t===null?Um:t}function pS(){(In===0||In===3||In===2)&&(In=4),zn===null||!(su&268435455)&&!(Yv&268435455)||ka(zn,Yn)}function qm(t,n){var e=yt;yt|=2;var r=RO();(zn!==t||Yn!==n)&&(Po=null,Js(t,n));do try{H$();break}catch(i){CO(t,i)}while(!0);if(Xx(),yt=e,Wm.current=r,xn!==null)throw Error(ye(261));return zn=null,Yn=0,In}function H$(){for(;xn!==null;)TO(xn)}function G$(){for(;xn!==null&&!gV();)TO(xn)}function TO(t){var n=IO(t.alternate,t,$r);t.memoizedProps=t.pendingProps,n===null?NO(t):xn=n,uS.current=null}function NO(t){var n=t;do{var e=n.alternate;if(t=n.return,n.flags&32768){if(e=B$(e,n),e!==null){e.flags&=32767,xn=e;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{In=6,xn=null;return}}else if(e=z$(e,n,$r),e!==null){xn=e;return}if(n=n.sibling,n!==null){xn=n;return}xn=n=t}while(n!==null);In===0&&(In=5)}function Ds(t,n,e){var r=At,i=yi.transition;try{yi.transition=null,At=1,q$(t,n,e,r)}finally{yi.transition=i,At=r}return null}function q$(t,n,e,r){do kl();while(Oa!==null);if(yt&6)throw Error(ye(327));e=t.finishedWork;var i=t.finishedLanes;if(e===null)return null;if(t.finishedWork=null,t.finishedLanes=0,e===t.current)throw Error(ye(177));t.callbackNode=null,t.callbackPriority=0;var o=e.lanes|e.childLanes;if(NV(t,o),t===zn&&(xn=zn=null,Yn=0),!(e.subtreeFlags&2064)&&!(e.flags&2064)||fh||(fh=!0,_O(km,function(){return kl(),null})),o=(e.flags&15990)!==0,e.subtreeFlags&15990||o){o=yi.transition,yi.transition=null;var a=At;At=1;var s=yt;yt|=4,uS.current=null,V$(t,e),xO(e,t),p$(Cb),_m=!!Eb,Cb=Eb=null,t.current=e,$$(e),yV(),yt=s,At=a,yi.transition=o}else t.current=e;if(fh&&(fh=!1,Oa=t,Gm=i),o=t.pendingLanes,o===0&&(qa=null),xV(e.stateNode),Mr(t,vn()),n!==null)for(r=t.onRecoverableError,e=0;e<n.length;e++)i=n[e],r(i.value,{componentStack:i.stack,digest:i.digest});if(Hm)throw Hm=!1,t=Wb,Wb=null,t;return Gm&1&&t.tag!==0&&kl(),o=t.pendingLanes,o&1?t===Hb?qd++:(qd=0,Hb=t):qd=0,hs(),null}function kl(){if(Oa!==null){var t=aA(Gm),n=yi.transition,e=At;try{if(yi.transition=null,At=16>t?16:t,Oa===null)var r=!1;else{if(t=Oa,Oa=null,Gm=0,yt&6)throw Error(ye(331));var i=yt;for(yt|=4,Te=t.current;Te!==null;){var o=Te,a=o.child;if(Te.flags&16){var s=o.deletions;if(s!==null){for(var u=0;u<s.length;u++){var l=s[u];for(Te=l;Te!==null;){var c=Te;switch(c.tag){case 0:case 11:case 15:Hd(8,c,o)}var d=c.child;if(d!==null)d.return=c,Te=d;else for(;Te!==null;){c=Te;var f=c.sibling,p=c.return;if(yO(c),c===l){Te=null;break}if(f!==null){f.return=p,Te=f;break}Te=p}}}var h=o.alternate;if(h!==null){var v=h.child;if(v!==null){h.child=null;do{var g=v.sibling;v.sibling=null,v=g}while(v!==null)}}Te=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,Te=a;else e:for(;Te!==null;){if(o=Te,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Hd(9,o,o.return)}var m=o.sibling;if(m!==null){m.return=o.return,Te=m;break e}Te=o.return}}var y=t.current;for(Te=y;Te!==null;){a=Te;var b=a.child;if(a.subtreeFlags&2064&&b!==null)b.return=a,Te=b;else e:for(a=y;Te!==null;){if(s=Te,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:Xv(9,s)}}catch(x){ln(s,s.return,x)}if(s===a){Te=null;break e}var w=s.sibling;if(w!==null){w.return=s.return,Te=w;break e}Te=s.return}}if(yt=i,hs(),po&&typeof po.onPostCommitFiberRoot=="function")try{po.onPostCommitFiberRoot(Vv,t)}catch{}r=!0}return r}finally{At=e,yi.transition=n}}return!1}function BT(t,n,e){n=Hl(e,n),n=sO(t,n,1),t=Ga(t,n,1),n=gr(),t!==null&&(Kf(t,1,n),Mr(t,n))}function ln(t,n,e){if(t.tag===3)BT(t,t,e);else for(;n!==null;){if(n.tag===3){BT(n,t,e);break}else if(n.tag===1){var r=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(qa===null||!qa.has(r))){t=Hl(e,t),t=uO(n,t,1),n=Ga(n,t,1),t=gr(),n!==null&&(Kf(n,1,t),Mr(n,t));break}}n=n.return}}function K$(t,n,e){var r=t.pingCache;r!==null&&r.delete(n),n=gr(),t.pingedLanes|=t.suspendedLanes&e,zn===t&&(Yn&e)===e&&(In===4||In===3&&(Yn&130023424)===Yn&&500>vn()-cS?Js(t,0):lS|=e),Mr(t,n)}function kO(t,n){n===0&&(t.mode&1?(n=nh,nh<<=1,!(nh&130023424)&&(nh=4194304)):n=1);var e=gr();t=Qo(t,n),t!==null&&(Kf(t,n,e),Mr(t,e))}function X$(t){var n=t.memoizedState,e=0;n!==null&&(e=n.retryLane),kO(t,e)}function Y$(t,n){var e=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(e=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ye(314))}r!==null&&r.delete(n),kO(t,e)}var IO;IO=function(t,n,e){if(t!==null)if(t.memoizedProps!==n.pendingProps||Or.current)Ar=!0;else{if(!(t.lanes&e)&&!(n.flags&128))return Ar=!1,F$(t,n,e);Ar=!!(t.flags&131072)}else Ar=!1,Jt&&n.flags&1048576&&OA(n,Fm,n.index);switch(n.lanes=0,n.tag){case 2:var r=n.type;Zh(t,n),t=n.pendingProps;var i=Vl(n,ur.current);Nl(n,e),i=rS(null,n,r,t,i,e);var o=iS();return n.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,Dr(r)?(o=!0,Pm(n)):o=!1,n.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Qx(n),i.updater=qv,n.stateNode=i,i._reactInternals=n,Db(n,r,t,e),n=Lb(null,n,r,!0,o,e)):(n.tag=0,Jt&&o&&Hx(n),pr(null,n,i,e),n=n.child),n;case 16:r=n.elementType;e:{switch(Zh(t,n),t=n.pendingProps,i=r._init,r=i(r._payload),n.type=r,i=n.tag=Q$(r),t=_i(r,t),i){case 0:n=Pb(null,n,r,t,e);break e;case 1:n=IT(null,n,r,t,e);break e;case 11:n=NT(null,n,r,t,e);break e;case 14:n=kT(null,n,r,_i(r.type,t),e);break e}throw Error(ye(306,r,""))}return n;case 0:return r=n.type,i=n.pendingProps,i=n.elementType===r?i:_i(r,i),Pb(t,n,r,i,e);case 1:return r=n.type,i=n.pendingProps,i=n.elementType===r?i:_i(r,i),IT(t,n,r,i,e);case 3:e:{if(fO(n),t===null)throw Error(ye(387));r=n.pendingProps,o=n.memoizedState,i=o.element,LA(t,n),jm(n,r,null,e);var a=n.memoizedState;if(r=a.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},n.updateQueue.baseState=o,n.memoizedState=o,n.flags&256){i=Hl(Error(ye(423)),n),n=_T(t,n,r,e,i);break e}else if(r!==i){i=Hl(Error(ye(424)),n),n=_T(t,n,r,e,i);break e}else for(Kr=Ha(n.stateNode.containerInfo.firstChild),Jr=n,Jt=!0,Oi=null,e=jA(n,null,r,e),n.child=e;e;)e.flags=e.flags&-3|4096,e=e.sibling;else{if($l(),r===i){n=Zo(t,n,e);break e}pr(t,n,r,e)}n=n.child}return n;case 5:return VA(n),t===null&&_b(n),r=n.type,i=n.pendingProps,o=t!==null?t.memoizedProps:null,a=i.children,Rb(r,i)?a=null:o!==null&&Rb(r,o)&&(n.flags|=32),dO(t,n),pr(t,n,a,e),n.child;case 6:return t===null&&_b(n),null;case 13:return pO(t,n,e);case 4:return Zx(n,n.stateNode.containerInfo),r=n.pendingProps,t===null?n.child=Ul(n,null,r,e):pr(t,n,r,e),n.child;case 11:return r=n.type,i=n.pendingProps,i=n.elementType===r?i:_i(r,i),NT(t,n,r,i,e);case 7:return pr(t,n,n.pendingProps,e),n.child;case 8:return pr(t,n,n.pendingProps.children,e),n.child;case 12:return pr(t,n,n.pendingProps.children,e),n.child;case 10:e:{if(r=n.type._context,i=n.pendingProps,o=n.memoizedProps,a=i.value,zt(zm,r._currentValue),r._currentValue=a,o!==null)if(Vi(o.value,a)){if(o.children===i.children&&!Or.current){n=Zo(t,n,e);break e}}else for(o=n.child,o!==null&&(o.return=n);o!==null;){var s=o.dependencies;if(s!==null){a=o.child;for(var u=s.firstContext;u!==null;){if(u.context===r){if(o.tag===1){u=Wo(-1,e&-e),u.tag=2;var l=o.updateQueue;if(l!==null){l=l.shared;var c=l.pending;c===null?u.next=u:(u.next=c.next,c.next=u),l.pending=u}}o.lanes|=e,u=o.alternate,u!==null&&(u.lanes|=e),Ab(o.return,e,n),s.lanes|=e;break}u=u.next}}else if(o.tag===10)a=o.type===n.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(ye(341));a.lanes|=e,s=a.alternate,s!==null&&(s.lanes|=e),Ab(a,e,n),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===n){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}pr(t,n,i.children,e),n=n.child}return n;case 9:return i=n.type,r=n.pendingProps.children,Nl(n,e),i=wi(i),r=r(i),n.flags|=1,pr(t,n,r,e),n.child;case 14:return r=n.type,i=_i(r,n.pendingProps),i=_i(r.type,i),kT(t,n,r,i,e);case 15:return lO(t,n,n.type,n.pendingProps,e);case 17:return r=n.type,i=n.pendingProps,i=n.elementType===r?i:_i(r,i),Zh(t,n),n.tag=1,Dr(r)?(t=!0,Pm(n)):t=!1,Nl(n,e),zA(n,r,i),Db(n,r,i,e),Lb(null,n,r,!0,t,e);case 19:return hO(t,n,e);case 22:return cO(t,n,e)}throw Error(ye(156,n.tag))};function _O(t,n){return nA(t,n)}function J$(t,n,e,r){this.tag=t,this.key=e,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gi(t,n,e,r){return new J$(t,n,e,r)}function hS(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Q$(t){if(typeof t=="function")return hS(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Dx)return 11;if(t===Mx)return 14}return 2}function Xa(t,n){var e=t.alternate;return e===null?(e=gi(t.tag,n,t.key,t.mode),e.elementType=t.elementType,e.type=t.type,e.stateNode=t.stateNode,e.alternate=t,t.alternate=e):(e.pendingProps=n,e.type=t.type,e.flags=0,e.subtreeFlags=0,e.deletions=null),e.flags=t.flags&14680064,e.childLanes=t.childLanes,e.lanes=t.lanes,e.child=t.child,e.memoizedProps=t.memoizedProps,e.memoizedState=t.memoizedState,e.updateQueue=t.updateQueue,n=t.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},e.sibling=t.sibling,e.index=t.index,e.ref=t.ref,e}function nm(t,n,e,r,i,o){var a=2;if(r=t,typeof t=="function")hS(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case ul:return Qs(e.children,i,o,n);case Ox:a=8,i|=8;break;case rb:return t=gi(12,e,n,i|2),t.elementType=rb,t.lanes=o,t;case ib:return t=gi(13,e,n,i),t.elementType=ib,t.lanes=o,t;case ob:return t=gi(19,e,n,i),t.elementType=ob,t.lanes=o,t;case B_:return Jv(e,i,o,n);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case F_:a=10;break e;case z_:a=9;break e;case Dx:a=11;break e;case Mx:a=14;break e;case Ea:a=16,r=null;break e}throw Error(ye(130,t==null?t:typeof t,""))}return n=gi(a,e,n,i),n.elementType=t,n.type=r,n.lanes=o,n}function Qs(t,n,e,r){return t=gi(7,t,r,n),t.lanes=e,t}function Jv(t,n,e,r){return t=gi(22,t,r,n),t.elementType=B_,t.lanes=e,t.stateNode={isHidden:!1},t}function D0(t,n,e){return t=gi(6,t,null,n),t.lanes=e,t}function M0(t,n,e){return n=gi(4,t.children!==null?t.children:[],t.key,n),n.lanes=e,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}function Z$(t,n,e,r,i){this.tag=n,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=h0(0),this.expirationTimes=h0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=h0(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function mS(t,n,e,r,i,o,a,s,u){return t=new Z$(t,n,e,s,u),n===1?(n=1,o===!0&&(n|=8)):n=0,o=gi(3,null,null,n),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:e,cache:null,transitions:null,pendingSuspenseBoundaries:null},Qx(o),t}function e5(t,n,e){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:sl,key:r==null?null:""+r,children:t,containerInfo:n,implementation:e}}function AO(t){if(!t)return os;t=t._reactInternals;e:{if(xu(t)!==t||t.tag!==1)throw Error(ye(170));var n=t;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(Dr(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(ye(171))}if(t.tag===1){var e=t.type;if(Dr(e))return _A(t,e,n)}return n}function OO(t,n,e,r,i,o,a,s,u){return t=mS(e,r,!0,t,i,o,a,s,u),t.context=AO(null),e=t.current,r=gr(),i=Ka(e),o=Wo(r,i),o.callback=n??null,Ga(e,o,i),t.current.lanes=i,Kf(t,i,r),Mr(t,r),t}function Qv(t,n,e,r){var i=n.current,o=gr(),a=Ka(i);return e=AO(e),n.context===null?n.context=e:n.pendingContext=e,n=Wo(o,a),n.payload={element:t},r=r===void 0?null:r,r!==null&&(n.callback=r),t=Ga(i,n,a),t!==null&&(zi(t,i,a,o),Yh(t,i,a)),a}function Km(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function jT(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var e=t.retryLane;t.retryLane=e!==0&&e<n?e:n}}function vS(t,n){jT(t,n),(t=t.alternate)&&jT(t,n)}function t5(){return null}var DO=typeof reportError=="function"?reportError:function(t){console.error(t)};function gS(t){this._internalRoot=t}Zv.prototype.render=gS.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(ye(409));Qv(t,n,null,null)};Zv.prototype.unmount=gS.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;uu(function(){Qv(null,t,null,null)}),n[Jo]=null}};function Zv(t){this._internalRoot=t}Zv.prototype.unstable_scheduleHydration=function(t){if(t){var n=lA();t={blockedOn:null,target:t,priority:n};for(var e=0;e<Na.length&&n!==0&&n<Na[e].priority;e++);Na.splice(e,0,t),e===0&&dA(t)}};function yS(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function eg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function VT(){}function n5(t,n,e,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var l=Km(a);o.call(l)}}var a=OO(n,r,t,0,null,!1,!1,"",VT);return t._reactRootContainer=a,t[Jo]=a.current,pf(t.nodeType===8?t.parentNode:t),uu(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var s=r;r=function(){var l=Km(u);s.call(l)}}var u=mS(t,0,!1,null,null,!1,!1,"",VT);return t._reactRootContainer=u,t[Jo]=u.current,pf(t.nodeType===8?t.parentNode:t),uu(function(){Qv(n,u,e,r)}),u}function tg(t,n,e,r,i){var o=e._reactRootContainer;if(o){var a=o;if(typeof i=="function"){var s=i;i=function(){var u=Km(a);s.call(u)}}Qv(n,a,t,i)}else a=n5(e,n,t,i,r);return Km(a)}sA=function(t){switch(t.tag){case 3:var n=t.stateNode;if(n.current.memoizedState.isDehydrated){var e=_d(n.pendingLanes);e!==0&&(Fx(n,e|1),Mr(n,vn()),!(yt&6)&&(Gl=vn()+500,hs()))}break;case 13:uu(function(){var r=Qo(t,1);if(r!==null){var i=gr();zi(r,t,1,i)}}),vS(t,1)}};zx=function(t){if(t.tag===13){var n=Qo(t,134217728);if(n!==null){var e=gr();zi(n,t,134217728,e)}vS(t,134217728)}};uA=function(t){if(t.tag===13){var n=Ka(t),e=Qo(t,n);if(e!==null){var r=gr();zi(e,t,n,r)}vS(t,n)}};lA=function(){return At};cA=function(t,n){var e=At;try{return At=t,n()}finally{At=e}};mb=function(t,n,e){switch(n){case"input":if(ub(t,e),n=e.name,e.type==="radio"&&n!=null){for(e=t;e.parentNode;)e=e.parentNode;for(e=e.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<e.length;n++){var r=e[n];if(r!==t&&r.form===t.form){var i=Hv(r);if(!i)throw Error(ye(90));V_(r),ub(r,i)}}}break;case"textarea":U_(t,e);break;case"select":n=e.value,n!=null&&El(t,!!e.multiple,n,!1)}};Y_=dS;J_=uu;var r5={usingClientEntryPoint:!1,Events:[Yf,fl,Hv,K_,X_,dS]},rd={findFiberByHostInstance:$s,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},i5={bundleType:rd.bundleType,version:rd.version,rendererPackageName:rd.rendererPackageName,rendererConfig:rd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ia.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=eA(t),t===null?null:t.stateNode},findFiberByHostInstance:rd.findFiberByHostInstance||t5,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ph=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ph.isDisabled&&ph.supportsFiber)try{Vv=ph.inject(i5),po=ph}catch{}}ii.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=r5;ii.createPortal=function(t,n){var e=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!yS(n))throw Error(ye(200));return e5(t,n,null,e)};ii.createRoot=function(t,n){if(!yS(t))throw Error(ye(299));var e=!1,r="",i=DO;return n!=null&&(n.unstable_strictMode===!0&&(e=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),n=mS(t,1,!1,null,null,e,!1,r,i),t[Jo]=n.current,pf(t.nodeType===8?t.parentNode:t),new gS(n)};ii.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(ye(188)):(t=Object.keys(t).join(","),Error(ye(268,t)));return t=eA(n),t=t===null?null:t.stateNode,t};ii.flushSync=function(t){return uu(t)};ii.hydrate=function(t,n,e){if(!eg(n))throw Error(ye(200));return tg(null,t,n,!0,e)};ii.hydrateRoot=function(t,n,e){if(!yS(t))throw Error(ye(405));var r=e!=null&&e.hydratedSources||null,i=!1,o="",a=DO;if(e!=null&&(e.unstable_strictMode===!0&&(i=!0),e.identifierPrefix!==void 0&&(o=e.identifierPrefix),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),n=OO(n,null,t,1,e??null,i,!1,o,a),t[Jo]=n.current,pf(t),r)for(t=0;t<r.length;t++)e=r[t],i=e._getVersion,i=i(e._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[e,i]:n.mutableSourceEagerHydrationData.push(e,i);return new Zv(n)};ii.render=function(t,n,e){if(!eg(n))throw Error(ye(200));return tg(null,t,n,!1,e)};ii.unmountComponentAtNode=function(t){if(!eg(t))throw Error(ye(40));return t._reactRootContainer?(uu(function(){tg(null,null,t,!1,function(){t._reactRootContainer=null,t[Jo]=null})}),!0):!1};ii.unstable_batchedUpdates=dS;ii.unstable_renderSubtreeIntoContainer=function(t,n,e,r){if(!eg(e))throw Error(ye(200));if(t==null||t._reactInternals===void 0)throw Error(ye(38));return tg(t,n,e,!1,r)};ii.version="18.2.0-next-9e3b772b8-20220608";function MO(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(MO)}catch(t){console.error(t)}}MO(),O_.exports=ii;var PO=O_.exports;const LO=x_(PO);/**
 * @remix-run/router v1.14.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Sf(){return Sf=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},Sf.apply(this,arguments)}var Da;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Da||(Da={}));const $T="popstate";function o5(t){t===void 0&&(t={});function n(r,i){let{pathname:o,search:a,hash:s}=r.location;return Kb("",{pathname:o,search:a,hash:s},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function e(r,i){return typeof i=="string"?i:Xm(i)}return s5(n,e,null,t)}function cn(t,n){if(t===!1||t===null||typeof t>"u")throw new Error(n)}function bS(t,n){if(!t){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function a5(){return Math.random().toString(36).substr(2,8)}function UT(t,n){return{usr:t.state,key:t.key,idx:n}}function Kb(t,n,e,r){return e===void 0&&(e=null),Sf({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof n=="string"?xc(n):n,{state:e,key:n&&n.key||r||a5()})}function Xm(t){let{pathname:n="/",search:e="",hash:r=""}=t;return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),r&&r!=="#"&&(n+=r.charAt(0)==="#"?r:"#"+r),n}function xc(t){let n={};if(t){let e=t.indexOf("#");e>=0&&(n.hash=t.substr(e),t=t.substr(0,e));let r=t.indexOf("?");r>=0&&(n.search=t.substr(r),t=t.substr(0,r)),t&&(n.pathname=t)}return n}function s5(t,n,e,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,a=i.history,s=Da.Pop,u=null,l=c();l==null&&(l=0,a.replaceState(Sf({},a.state,{idx:l}),""));function c(){return(a.state||{idx:null}).idx}function d(){s=Da.Pop;let g=c(),m=g==null?null:g-l;l=g,u&&u({action:s,location:v.location,delta:m})}function f(g,m){s=Da.Push;let y=Kb(v.location,g,m);e&&e(y,g),l=c()+1;let b=UT(y,l),w=v.createHref(y);try{a.pushState(b,"",w)}catch(x){if(x instanceof DOMException&&x.name==="DataCloneError")throw x;i.location.assign(w)}o&&u&&u({action:s,location:v.location,delta:1})}function p(g,m){s=Da.Replace;let y=Kb(v.location,g,m);e&&e(y,g),l=c();let b=UT(y,l),w=v.createHref(y);a.replaceState(b,"",w),o&&u&&u({action:s,location:v.location,delta:0})}function h(g){let m=i.location.origin!=="null"?i.location.origin:i.location.href,y=typeof g=="string"?g:Xm(g);return cn(m,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,m)}let v={get action(){return s},get location(){return t(i,a)},listen(g){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener($T,d),u=g,()=>{i.removeEventListener($T,d),u=null}},createHref(g){return n(i,g)},createURL:h,encodeLocation(g){let m=h(g);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:f,replace:p,go(g){return a.go(g)}};return v}var WT;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(WT||(WT={}));function u5(t,n,e){e===void 0&&(e="/");let r=typeof n=="string"?xc(n):n,i=ql(r.pathname||"/",e);if(i==null)return null;let o=FO(t);l5(o);let a=null;for(let s=0;a==null&&s<o.length;++s)a=y5(o[s],w5(i));return a}function FO(t,n,e,r){n===void 0&&(n=[]),e===void 0&&(e=[]),r===void 0&&(r="");let i=(o,a,s)=>{let u={relativePath:s===void 0?o.path||"":s,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};u.relativePath.startsWith("/")&&(cn(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let l=Ya([r,u.relativePath]),c=e.concat(u);o.children&&o.children.length>0&&(cn(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),FO(o.children,n,c,l)),!(o.path==null&&!o.index)&&n.push({path:l,score:v5(l,o.index),routesMeta:c})};return t.forEach((o,a)=>{var s;if(o.path===""||!((s=o.path)!=null&&s.includes("?")))i(o,a);else for(let u of zO(o.path))i(o,a,u)}),n}function zO(t){let n=t.split("/");if(n.length===0)return[];let[e,...r]=n,i=e.endsWith("?"),o=e.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let a=zO(r.join("/")),s=[];return s.push(...a.map(u=>u===""?o:[o,u].join("/"))),i&&s.push(...a),s.map(u=>t.startsWith("/")&&u===""?"/":u)}function l5(t){t.sort((n,e)=>n.score!==e.score?e.score-n.score:g5(n.routesMeta.map(r=>r.childrenIndex),e.routesMeta.map(r=>r.childrenIndex)))}const c5=/^:[\w-]+$/,d5=3,f5=2,p5=1,h5=10,m5=-2,HT=t=>t==="*";function v5(t,n){let e=t.split("/"),r=e.length;return e.some(HT)&&(r+=m5),n&&(r+=f5),e.filter(i=>!HT(i)).reduce((i,o)=>i+(c5.test(o)?d5:o===""?p5:h5),r)}function g5(t,n){return t.length===n.length&&t.slice(0,-1).every((r,i)=>r===n[i])?t[t.length-1]-n[n.length-1]:0}function y5(t,n){let{routesMeta:e}=t,r={},i="/",o=[];for(let a=0;a<e.length;++a){let s=e[a],u=a===e.length-1,l=i==="/"?n:n.slice(i.length)||"/",c=Xb({path:s.relativePath,caseSensitive:s.caseSensitive,end:u},l);if(!c)return null;Object.assign(r,c.params);let d=s.route;o.push({params:r,pathname:Ya([i,c.pathname]),pathnameBase:R5(Ya([i,c.pathnameBase])),route:d}),c.pathnameBase!=="/"&&(i=Ya([i,c.pathnameBase]))}return o}function Xb(t,n){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[e,r]=b5(t.path,t.caseSensitive,t.end),i=n.match(e);if(!i)return null;let o=i[0],a=o.replace(/(.)\/+$/,"$1"),s=i.slice(1);return{params:r.reduce((l,c,d)=>{let{paramName:f,isOptional:p}=c;if(f==="*"){let v=s[d]||"";a=o.slice(0,o.length-v.length).replace(/(.)\/+$/,"$1")}const h=s[d];return p&&!h?l[f]=void 0:l[f]=x5(h||"",f),l},{}),pathname:o,pathnameBase:a,pattern:t}}function b5(t,n,e){n===void 0&&(n=!1),e===void 0&&(e=!0),bS(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,s,u)=>(r.push({paramName:s,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,n?void 0:"i"),r]}function w5(t){try{return decodeURI(t)}catch(n){return bS(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+n+").")),t}}function x5(t,n){try{return decodeURIComponent(t)}catch(e){return bS(!1,'The value for the URL param "'+n+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+e+").")),t}}function ql(t,n){if(n==="/")return t;if(!t.toLowerCase().startsWith(n.toLowerCase()))return null;let e=n.endsWith("/")?n.length-1:n.length,r=t.charAt(e);return r&&r!=="/"?null:t.slice(e)||"/"}function S5(t,n){n===void 0&&(n="/");let{pathname:e,search:r="",hash:i=""}=typeof t=="string"?xc(t):t;return{pathname:e?e.startsWith("/")?e:E5(e,n):n,search:T5(r),hash:N5(i)}}function E5(t,n){let e=n.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?e.length>1&&e.pop():i!=="."&&e.push(i)}),e.length>1?e.join("/"):"/"}function P0(t,n,e,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+n+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+e+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function C5(t){return t.filter((n,e)=>e===0||n.route.path&&n.route.path.length>0)}function BO(t,n){let e=C5(t);return n?e.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):e.map(r=>r.pathnameBase)}function jO(t,n,e,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=xc(t):(i=Sf({},t),cn(!i.pathname||!i.pathname.includes("?"),P0("?","pathname","search",i)),cn(!i.pathname||!i.pathname.includes("#"),P0("#","pathname","hash",i)),cn(!i.search||!i.search.includes("#"),P0("#","search","hash",i)));let o=t===""||i.pathname==="",a=o?"/":i.pathname,s;if(a==null)s=e;else{let d=n.length-1;if(!r&&a.startsWith("..")){let f=a.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}s=d>=0?n[d]:"/"}let u=S5(i,s),l=a&&a!=="/"&&a.endsWith("/"),c=(o||a===".")&&e.endsWith("/");return!u.pathname.endsWith("/")&&(l||c)&&(u.pathname+="/"),u}const Ya=t=>t.join("/").replace(/\/\/+/g,"/"),R5=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),T5=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,N5=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function k5(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const VO=["post","put","patch","delete"];new Set(VO);const I5=["get",...VO];new Set(I5);/**
 * React Router v6.21.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ef(){return Ef=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},Ef.apply(this,arguments)}const ng=H.createContext(null),$O=H.createContext(null),ms=H.createContext(null),rg=H.createContext(null),oa=H.createContext({outlet:null,matches:[],isDataRoute:!1}),UO=H.createContext(null);function _5(t,n){let{relative:e}=n===void 0?{}:n;Qf()||cn(!1);let{basename:r,navigator:i}=H.useContext(ms),{hash:o,pathname:a,search:s}=ig(t,{relative:e}),u=a;return r!=="/"&&(u=a==="/"?r:Ya([r,a])),i.createHref({pathname:u,search:s,hash:o})}function Qf(){return H.useContext(rg)!=null}function Si(){return Qf()||cn(!1),H.useContext(rg).location}function WO(t){H.useContext(ms).static||H.useLayoutEffect(t)}function jr(){let{isDataRoute:t}=H.useContext(oa);return t?H5():A5()}function A5(){Qf()||cn(!1);let t=H.useContext(ng),{basename:n,future:e,navigator:r}=H.useContext(ms),{matches:i}=H.useContext(oa),{pathname:o}=Si(),a=JSON.stringify(BO(i,e.v7_relativeSplatPath)),s=H.useRef(!1);return WO(()=>{s.current=!0}),H.useCallback(function(l,c){if(c===void 0&&(c={}),!s.current)return;if(typeof l=="number"){r.go(l);return}let d=jO(l,JSON.parse(a),o,c.relative==="path");t==null&&n!=="/"&&(d.pathname=d.pathname==="/"?n:Ya([n,d.pathname])),(c.replace?r.replace:r.push)(d,c.state,c)},[n,r,a,o,t])}const O5=H.createContext(null);function D5(t){let n=H.useContext(oa).outlet;return n&&H.createElement(O5.Provider,{value:t},n)}function wS(){let{matches:t}=H.useContext(oa),n=t[t.length-1];return n?n.params:{}}function ig(t,n){let{relative:e}=n===void 0?{}:n,{future:r}=H.useContext(ms),{matches:i}=H.useContext(oa),{pathname:o}=Si(),a=JSON.stringify(BO(i,r.v7_relativeSplatPath));return H.useMemo(()=>jO(t,JSON.parse(a),o,e==="path"),[t,a,o,e])}function M5(t,n){return P5(t,n)}function P5(t,n,e,r){Qf()||cn(!1);let{navigator:i}=H.useContext(ms),{matches:o}=H.useContext(oa),a=o[o.length-1],s=a?a.params:{};a&&a.pathname;let u=a?a.pathnameBase:"/";a&&a.route;let l=Si(),c;if(n){var d;let g=typeof n=="string"?xc(n):n;u==="/"||(d=g.pathname)!=null&&d.startsWith(u)||cn(!1),c=g}else c=l;let f=c.pathname||"/",p=u==="/"?f:f.slice(u.length)||"/",h=u5(t,{pathname:p}),v=j5(h&&h.map(g=>Object.assign({},g,{params:Object.assign({},s,g.params),pathname:Ya([u,i.encodeLocation?i.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?u:Ya([u,i.encodeLocation?i.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),o,e,r);return n&&v?H.createElement(rg.Provider,{value:{location:Ef({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Da.Pop}},v):v}function L5(){let t=W5(),n=k5(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),e=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return H.createElement(H.Fragment,null,H.createElement("h2",null,"Unexpected Application Error!"),H.createElement("h3",{style:{fontStyle:"italic"}},n),e?H.createElement("pre",{style:i},e):null,null)}const F5=H.createElement(L5,null);class z5 extends H.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?H.createElement(oa.Provider,{value:this.props.routeContext},H.createElement(UO.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function B5(t){let{routeContext:n,match:e,children:r}=t,i=H.useContext(ng);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),H.createElement(oa.Provider,{value:n},r)}function j5(t,n,e,r){var i;if(n===void 0&&(n=[]),e===void 0&&(e=null),r===void 0&&(r=null),t==null){var o;if((o=e)!=null&&o.errors)t=e.matches;else return null}let a=t,s=(i=e)==null?void 0:i.errors;if(s!=null){let c=a.findIndex(d=>d.route.id&&(s==null?void 0:s[d.route.id]));c>=0||cn(!1),a=a.slice(0,Math.min(a.length,c+1))}let u=!1,l=-1;if(e&&r&&r.v7_partialHydration)for(let c=0;c<a.length;c++){let d=a[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=c),d.route.id){let{loaderData:f,errors:p}=e,h=d.route.loader&&f[d.route.id]===void 0&&(!p||p[d.route.id]===void 0);if(d.route.lazy||h){u=!0,l>=0?a=a.slice(0,l+1):a=[a[0]];break}}}return a.reduceRight((c,d,f)=>{let p,h=!1,v=null,g=null;e&&(p=s&&d.route.id?s[d.route.id]:void 0,v=d.route.errorElement||F5,u&&(l<0&&f===0?(G5("route-fallback",!1),h=!0,g=null):l===f&&(h=!0,g=d.route.hydrateFallbackElement||null)));let m=n.concat(a.slice(0,f+1)),y=()=>{let b;return p?b=v:h?b=g:d.route.Component?b=H.createElement(d.route.Component,null):d.route.element?b=d.route.element:b=c,H.createElement(B5,{match:d,routeContext:{outlet:c,matches:m,isDataRoute:e!=null},children:b})};return e&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?H.createElement(z5,{location:e.location,revalidation:e.revalidation,component:v,error:p,children:y(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):y()},null)}var HO=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(HO||{}),Ym=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Ym||{});function V5(t){let n=H.useContext(ng);return n||cn(!1),n}function $5(t){let n=H.useContext($O);return n||cn(!1),n}function U5(t){let n=H.useContext(oa);return n||cn(!1),n}function GO(t){let n=U5(),e=n.matches[n.matches.length-1];return e.route.id||cn(!1),e.route.id}function W5(){var t;let n=H.useContext(UO),e=$5(Ym.UseRouteError),r=GO(Ym.UseRouteError);return n!==void 0?n:(t=e.errors)==null?void 0:t[r]}function H5(){let{router:t}=V5(HO.UseNavigateStable),n=GO(Ym.UseNavigateStable),e=H.useRef(!1);return WO(()=>{e.current=!0}),H.useCallback(function(i,o){o===void 0&&(o={}),e.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Ef({fromRouteId:n},o)))},[t,n])}const GT={};function G5(t,n,e){!n&&!GT[t]&&(GT[t]=!0)}function q5(t){return D5(t.context)}function it(t){cn(!1)}function K5(t){let{basename:n="/",children:e=null,location:r,navigationType:i=Da.Pop,navigator:o,static:a=!1,future:s}=t;Qf()&&cn(!1);let u=n.replace(/^\/*/,"/"),l=H.useMemo(()=>({basename:u,navigator:o,static:a,future:Ef({v7_relativeSplatPath:!1},s)}),[u,s,o,a]);typeof r=="string"&&(r=xc(r));let{pathname:c="/",search:d="",hash:f="",state:p=null,key:h="default"}=r,v=H.useMemo(()=>{let g=ql(c,u);return g==null?null:{location:{pathname:g,search:d,hash:f,state:p,key:h},navigationType:i}},[u,c,d,f,p,h,i]);return v==null?null:H.createElement(ms.Provider,{value:l},H.createElement(rg.Provider,{children:e,value:v}))}function X5(t){let{children:n,location:e}=t;return M5(Yb(n),e)}new Promise(()=>{});function Yb(t,n){n===void 0&&(n=[]);let e=[];return H.Children.forEach(t,(r,i)=>{if(!H.isValidElement(r))return;let o=[...n,i];if(r.type===H.Fragment){e.push.apply(e,Yb(r.props.children,o));return}r.type!==it&&cn(!1),!r.props.index||!r.props.children||cn(!1);let a={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=Yb(r.props.children,o)),e.push(a)}),e}/**
 * React Router DOM v6.21.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Jm(){return Jm=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},Jm.apply(this,arguments)}function qO(t,n){if(t==null)return{};var e={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(n.indexOf(i)>=0)&&(e[i]=t[i]);return e}function Y5(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function J5(t,n){return t.button===0&&(!n||n==="_self")&&!Y5(t)}const Q5=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],Z5=["aria-current","caseSensitive","className","end","style","to","unstable_viewTransition","children"],eU=H.createContext({isTransitioning:!1}),tU="startTransition",qT=Cm[tU];function nU(t){let{basename:n,children:e,future:r,window:i}=t,o=H.useRef();o.current==null&&(o.current=o5({window:i,v5Compat:!0}));let a=o.current,[s,u]=H.useState({action:a.action,location:a.location}),{v7_startTransition:l}=r||{},c=H.useCallback(d=>{l&&qT?qT(()=>u(d)):u(d)},[u,l]);return H.useLayoutEffect(()=>a.listen(c),[a,c]),H.createElement(K5,{basename:n,children:e,location:s.location,navigationType:s.action,navigator:a,future:r})}const rU=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",iU=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ja=H.forwardRef(function(n,e){let{onClick:r,relative:i,reloadDocument:o,replace:a,state:s,target:u,to:l,preventScrollReset:c,unstable_viewTransition:d}=n,f=qO(n,Q5),{basename:p}=H.useContext(ms),h,v=!1;if(typeof l=="string"&&iU.test(l)&&(h=l,rU))try{let b=new URL(window.location.href),w=l.startsWith("//")?new URL(b.protocol+l):new URL(l),x=ql(w.pathname,p);w.origin===b.origin&&x!=null?l=x+w.search+w.hash:v=!0}catch{}let g=_5(l,{relative:i}),m=aU(l,{replace:a,state:s,target:u,preventScrollReset:c,relative:i,unstable_viewTransition:d});function y(b){r&&r(b),b.defaultPrevented||m(b)}return H.createElement("a",Jm({},f,{href:h||g,onClick:v||o?r:y,ref:e,target:u}))}),Od=H.forwardRef(function(n,e){let{"aria-current":r="page",caseSensitive:i=!1,className:o="",end:a=!1,style:s,to:u,unstable_viewTransition:l,children:c}=n,d=qO(n,Z5),f=ig(u,{relative:d.relative}),p=Si(),h=H.useContext($O),{navigator:v,basename:g}=H.useContext(ms),m=h!=null&&sU(f)&&l===!0,y=v.encodeLocation?v.encodeLocation(f).pathname:f.pathname,b=p.pathname,w=h&&h.navigation&&h.navigation.location?h.navigation.location.pathname:null;i||(b=b.toLowerCase(),w=w?w.toLowerCase():null,y=y.toLowerCase()),w&&g&&(w=ql(w,g)||w);const x=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let C=b===y||!a&&b.startsWith(y)&&b.charAt(x)==="/",E=w!=null&&(w===y||!a&&w.startsWith(y)&&w.charAt(y.length)==="/"),S={isActive:C,isPending:E,isTransitioning:m},N=C?r:void 0,k;typeof o=="function"?k=o(S):k=[o,C?"active":null,E?"pending":null,m?"transitioning":null].filter(Boolean).join(" ");let M=typeof s=="function"?s(S):s;return H.createElement(Ja,Jm({},d,{"aria-current":N,className:k,ref:e,style:M,to:u,unstable_viewTransition:l}),typeof c=="function"?c(S):c)});var Jb;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Jb||(Jb={}));var KT;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(KT||(KT={}));function oU(t){let n=H.useContext(ng);return n||cn(!1),n}function aU(t,n){let{target:e,replace:r,state:i,preventScrollReset:o,relative:a,unstable_viewTransition:s}=n===void 0?{}:n,u=jr(),l=Si(),c=ig(t,{relative:a});return H.useCallback(d=>{if(J5(d,e)){d.preventDefault();let f=r!==void 0?r:Xm(l)===Xm(c);u(t,{replace:f,state:i,preventScrollReset:o,relative:a,unstable_viewTransition:s})}},[l,u,c,r,i,e,t,o,a,s])}function sU(t,n){n===void 0&&(n={});let e=H.useContext(eU);e==null&&cn(!1);let{basename:r}=oU(Jb.useViewTransitionState),i=ig(t,{relative:n.relative});if(!e.isTransitioning)return!1;let o=ql(e.currentLocation.pathname,r)||e.currentLocation.pathname,a=ql(e.nextLocation.pathname,r)||e.nextLocation.pathname;return Xb(i.pathname,a)!=null||Xb(i.pathname,o)!=null}var Qb={},XT=PO;Qb.createRoot=XT.createRoot,Qb.hydrateRoot=XT.hydrateRoot;var KO={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},YT=_e.createContext&&_e.createContext(KO),uU=["attr","size","title"];function lU(t,n){if(t==null)return{};var e=cU(t,n),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(n.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(e[r]=t[r])}return e}function cU(t,n){if(t==null)return{};var e={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(n.indexOf(i)>=0)&&(e[i]=t[i]);return e}function Qm(){return Qm=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},Qm.apply(this,arguments)}function JT(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,r)}return e}function Zm(t){for(var n=1;n<arguments.length;n++){var e=arguments[n]!=null?arguments[n]:{};n%2?JT(Object(e),!0).forEach(function(r){dU(t,r,e[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):JT(Object(e)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))})}return t}function dU(t,n,e){return n=fU(n),n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function fU(t){var n=pU(t,"string");return typeof n=="symbol"?n:String(n)}function pU(t,n){if(typeof t!="object"||t===null)return t;var e=t[Symbol.toPrimitive];if(e!==void 0){var r=e.call(t,n||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(t)}function XO(t){return t&&t.map((n,e)=>_e.createElement(n.tag,Zm({key:e},n.attr),XO(n.child)))}function xS(t){return n=>_e.createElement(hU,Qm({attr:Zm({},t.attr)},n),XO(t.child))}function hU(t){var n=e=>{var{attr:r,size:i,title:o}=t,a=lU(t,uU),s=i||e.size||"1em",u;return e.className&&(u=e.className),t.className&&(u=(u?u+" ":"")+t.className),_e.createElement("svg",Qm({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},e.attr,r,a,{className:u,style:Zm(Zm({color:t.color||e.color},e.style),t.style),height:s,width:s,xmlns:"http://www.w3.org/2000/svg"}),o&&_e.createElement("title",null,o),t.children)};return YT!==void 0?_e.createElement(YT.Consumer,null,e=>n(e)):n(KO)}const YO="/assets/login_img-6Ph5owg1.png";var SS={},JO={exports:{}};(function(t){function n(e){return e&&e.__esModule?e:{default:e}}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports})(JO);var wt=JO.exports,L0={};function ht(){return ht=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},ht.apply(this,arguments)}function Ia(t){if(typeof t!="object"||t===null)return!1;const n=Object.getPrototypeOf(t);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function QO(t){if(!Ia(t))return t;const n={};return Object.keys(t).forEach(e=>{n[e]=QO(t[e])}),n}function Bi(t,n,e={clone:!0}){const r=e.clone?ht({},t):t;return Ia(t)&&Ia(n)&&Object.keys(n).forEach(i=>{i!=="__proto__"&&(Ia(n[i])&&i in t&&Ia(t[i])?r[i]=Bi(t[i],n[i],e):e.clone?r[i]=Ia(n[i])?QO(n[i]):n[i]:r[i]=n[i])}),r}function Kl(t){let n="https://mui.com/production-error/?code="+t;for(let e=1;e<arguments.length;e+=1)n+="&args[]="+encodeURIComponent(arguments[e]);return"Minified MUI error #"+t+"; visit "+n+" for the full message."}function mo(t){if(typeof t!="string")throw new Error(Kl(7));return t.charAt(0).toUpperCase()+t.slice(1)}function mU(...t){return t.reduce((n,e)=>e==null?n:function(...i){n.apply(this,i),e.apply(this,i)},()=>{})}function vU(t,n=166){let e;function r(...i){const o=()=>{t.apply(this,i)};clearTimeout(e),e=setTimeout(o,n)}return r.clear=()=>{clearTimeout(e)},r}function gU(t,n){return()=>null}function yU(t,n){var e,r;return H.isValidElement(t)&&n.indexOf((e=t.type.muiName)!=null?e:(r=t.type)==null||(r=r._payload)==null||(r=r.value)==null?void 0:r.muiName)!==-1}function ZO(t){return t&&t.ownerDocument||document}function bU(t){return ZO(t).defaultView||window}function wU(t,n){return()=>null}function eD(t,n){typeof t=="function"?t(n):t&&(t.current=n)}const xU=typeof window<"u"?H.useLayoutEffect:H.useEffect,tD=xU;let QT=0;function SU(t){const[n,e]=H.useState(t),r=t||n;return H.useEffect(()=>{n==null&&(QT+=1,e(`mui-${QT}`))},[n]),r}const ZT=Cm.useId;function EU(t){if(ZT!==void 0){const n=ZT();return t??n}return SU(t)}function CU(t,n,e,r,i){return null}function RU({controlled:t,default:n,name:e,state:r="value"}){const{current:i}=H.useRef(t!==void 0),[o,a]=H.useState(n),s=i?t:o,u=H.useCallback(l=>{i||a(l)},[]);return[s,u]}function TU(t){const n=H.useRef(t);return tD(()=>{n.current=t}),H.useRef((...e)=>(0,n.current)(...e)).current}function NU(...t){return H.useMemo(()=>t.every(n=>n==null)?null:n=>{t.forEach(e=>{eD(e,n)})},t)}let og=!0,Zb=!1,eN;const kU={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function IU(t){const{type:n,tagName:e}=t;return!!(e==="INPUT"&&kU[n]&&!t.readOnly||e==="TEXTAREA"&&!t.readOnly||t.isContentEditable)}function _U(t){t.metaKey||t.altKey||t.ctrlKey||(og=!0)}function F0(){og=!1}function AU(){this.visibilityState==="hidden"&&Zb&&(og=!0)}function OU(t){t.addEventListener("keydown",_U,!0),t.addEventListener("mousedown",F0,!0),t.addEventListener("pointerdown",F0,!0),t.addEventListener("touchstart",F0,!0),t.addEventListener("visibilitychange",AU,!0)}function DU(t){const{target:n}=t;try{return n.matches(":focus-visible")}catch{}return og||IU(n)}function MU(){const t=H.useCallback(i=>{i!=null&&OU(i.ownerDocument)},[]),n=H.useRef(!1);function e(){return n.current?(Zb=!0,window.clearTimeout(eN),eN=window.setTimeout(()=>{Zb=!1},100),n.current=!1,!0):!1}function r(i){return DU(i)?(n.current=!0,!0):!1}return{isFocusVisibleRef:n,onFocus:r,onBlur:e,ref:t}}function nD(t,n){const e=ht({},n);return Object.keys(t).forEach(r=>{if(r.toString().match(/^(components|slots)$/))e[r]=ht({},t[r],e[r]);else if(r.toString().match(/^(componentsProps|slotProps)$/)){const i=t[r]||{},o=n[r];e[r]={},!o||!Object.keys(o)?e[r]=i:!i||!Object.keys(i)?e[r]=o:(e[r]=ht({},o),Object.keys(i).forEach(a=>{e[r][a]=nD(i[a],o[a])}))}else e[r]===void 0&&(e[r]=t[r])}),e}function PU(t,n,e=void 0){const r={};return Object.keys(t).forEach(i=>{r[i]=t[i].reduce((o,a)=>{if(a){const s=n(a);s!==""&&o.push(s),e&&e[a]&&o.push(e[a])}return o},[]).join(" ")}),r}const tN=t=>t,LU=()=>{let t=tN;return{configure(n){t=n},generate(n){return t(n)},reset(){t=tN}}},rD=LU(),FU={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function iD(t,n,e="Mui"){const r=FU[n];return r?`${e}-${r}`:`${rD.generate(t)}-${n}`}function zU(t,n,e="Mui"){const r={};return n.forEach(i=>{r[i]=iD(t,i,e)}),r}function BU(t,n=Number.MIN_SAFE_INTEGER,e=Number.MAX_SAFE_INTEGER){return Math.max(n,Math.min(t,e))}function aa(t,n){if(t==null)return{};var e={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(n.indexOf(i)>=0)&&(e[i]=t[i]);return e}function oD(t){var n,e,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(n=0;n<i;n++)t[n]&&(e=oD(t[n]))&&(r&&(r+=" "),r+=e)}else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function jU(){for(var t,n,e=0,r="",i=arguments.length;e<i;e++)(t=arguments[e])&&(n=oD(t))&&(r&&(r+=" "),r+=n);return r}function aD(t){var n=Object.create(null);return function(e){return n[e]===void 0&&(n[e]=t(e)),n[e]}}var VU=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,$U=aD(function(t){return VU.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91});function UU(t){if(t.sheet)return t.sheet;for(var n=0;n<document.styleSheets.length;n++)if(document.styleSheets[n].ownerNode===t)return document.styleSheets[n]}function WU(t){var n=document.createElement("style");return n.setAttribute("data-emotion",t.key),t.nonce!==void 0&&n.setAttribute("nonce",t.nonce),n.appendChild(document.createTextNode("")),n.setAttribute("data-s",""),n}var HU=function(){function t(e){var r=this;this._insertTag=function(i){var o;r.tags.length===0?r.insertionPoint?o=r.insertionPoint.nextSibling:r.prepend?o=r.container.firstChild:o=r.before:o=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,o),r.tags.push(i)},this.isSpeedy=e.speedy===void 0?!0:e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var n=t.prototype;return n.hydrate=function(r){r.forEach(this._insertTag)},n.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(WU(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var o=UU(i);try{o.insertRule(r,o.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},n.flush=function(){this.tags.forEach(function(r){return r.parentNode&&r.parentNode.removeChild(r)}),this.tags=[],this.ctr=0},t}(),or="-ms-",ev="-moz-",Ct="-webkit-",sD="comm",ES="rule",CS="decl",GU="@import",uD="@keyframes",qU="@layer",KU=Math.abs,ag=String.fromCharCode,XU=Object.assign;function YU(t,n){return qn(t,0)^45?(((n<<2^qn(t,0))<<2^qn(t,1))<<2^qn(t,2))<<2^qn(t,3):0}function lD(t){return t.trim()}function JU(t,n){return(t=n.exec(t))?t[0]:t}function Rt(t,n,e){return t.replace(n,e)}function ew(t,n){return t.indexOf(n)}function qn(t,n){return t.charCodeAt(n)|0}function Cf(t,n,e){return t.slice(n,e)}function ro(t){return t.length}function RS(t){return t.length}function hh(t,n){return n.push(t),t}function QU(t,n){return t.map(n).join("")}var sg=1,Xl=1,cD=0,Lr=0,wn=0,Sc="";function ug(t,n,e,r,i,o,a){return{value:t,root:n,parent:e,type:r,props:i,children:o,line:sg,column:Xl,length:a,return:""}}function id(t,n){return XU(ug("",null,null,"",null,null,0),t,{length:-t.length},n)}function ZU(){return wn}function e6(){return wn=Lr>0?qn(Sc,--Lr):0,Xl--,wn===10&&(Xl=1,sg--),wn}function Qr(){return wn=Lr<cD?qn(Sc,Lr++):0,Xl++,wn===10&&(Xl=1,sg++),wn}function vo(){return qn(Sc,Lr)}function rm(){return Lr}function Zf(t,n){return Cf(Sc,t,n)}function Rf(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function dD(t){return sg=Xl=1,cD=ro(Sc=t),Lr=0,[]}function fD(t){return Sc="",t}function im(t){return lD(Zf(Lr-1,tw(t===91?t+2:t===40?t+1:t)))}function t6(t){for(;(wn=vo())&&wn<33;)Qr();return Rf(t)>2||Rf(wn)>3?"":" "}function n6(t,n){for(;--n&&Qr()&&!(wn<48||wn>102||wn>57&&wn<65||wn>70&&wn<97););return Zf(t,rm()+(n<6&&vo()==32&&Qr()==32))}function tw(t){for(;Qr();)switch(wn){case t:return Lr;case 34:case 39:t!==34&&t!==39&&tw(wn);break;case 40:t===41&&tw(t);break;case 92:Qr();break}return Lr}function r6(t,n){for(;Qr()&&t+wn!==57;)if(t+wn===84&&vo()===47)break;return"/*"+Zf(n,Lr-1)+"*"+ag(t===47?t:Qr())}function i6(t){for(;!Rf(vo());)Qr();return Zf(t,Lr)}function o6(t){return fD(om("",null,null,null,[""],t=dD(t),0,[0],t))}function om(t,n,e,r,i,o,a,s,u){for(var l=0,c=0,d=a,f=0,p=0,h=0,v=1,g=1,m=1,y=0,b="",w=i,x=o,C=r,E=b;g;)switch(h=y,y=Qr()){case 40:if(h!=108&&qn(E,d-1)==58){ew(E+=Rt(im(y),"&","&\f"),"&\f")!=-1&&(m=-1);break}case 34:case 39:case 91:E+=im(y);break;case 9:case 10:case 13:case 32:E+=t6(h);break;case 92:E+=n6(rm()-1,7);continue;case 47:switch(vo()){case 42:case 47:hh(a6(r6(Qr(),rm()),n,e),u);break;default:E+="/"}break;case 123*v:s[l++]=ro(E)*m;case 125*v:case 59:case 0:switch(y){case 0:case 125:g=0;case 59+c:m==-1&&(E=Rt(E,/\f/g,"")),p>0&&ro(E)-d&&hh(p>32?rN(E+";",r,e,d-1):rN(Rt(E," ","")+";",r,e,d-2),u);break;case 59:E+=";";default:if(hh(C=nN(E,n,e,l,c,i,s,b,w=[],x=[],d),o),y===123)if(c===0)om(E,n,C,C,w,o,d,s,x);else switch(f===99&&qn(E,3)===110?100:f){case 100:case 108:case 109:case 115:om(t,C,C,r&&hh(nN(t,C,C,0,0,i,s,b,i,w=[],d),x),i,x,d,s,r?w:x);break;default:om(E,C,C,C,[""],x,0,s,x)}}l=c=p=0,v=m=1,b=E="",d=a;break;case 58:d=1+ro(E),p=h;default:if(v<1){if(y==123)--v;else if(y==125&&v++==0&&e6()==125)continue}switch(E+=ag(y),y*v){case 38:m=c>0?1:(E+="\f",-1);break;case 44:s[l++]=(ro(E)-1)*m,m=1;break;case 64:vo()===45&&(E+=im(Qr())),f=vo(),c=d=ro(b=E+=i6(rm())),y++;break;case 45:h===45&&ro(E)==2&&(v=0)}}return o}function nN(t,n,e,r,i,o,a,s,u,l,c){for(var d=i-1,f=i===0?o:[""],p=RS(f),h=0,v=0,g=0;h<r;++h)for(var m=0,y=Cf(t,d+1,d=KU(v=a[h])),b=t;m<p;++m)(b=lD(v>0?f[m]+" "+y:Rt(y,/&\f/g,f[m])))&&(u[g++]=b);return ug(t,n,e,i===0?ES:s,u,l,c)}function a6(t,n,e){return ug(t,n,e,sD,ag(ZU()),Cf(t,2,-2),0)}function rN(t,n,e,r){return ug(t,n,e,CS,Cf(t,0,r),Cf(t,r+1,-1),r)}function Il(t,n){for(var e="",r=RS(t),i=0;i<r;i++)e+=n(t[i],i,t,n)||"";return e}function s6(t,n,e,r){switch(t.type){case qU:if(t.children.length)break;case GU:case CS:return t.return=t.return||t.value;case sD:return"";case uD:return t.return=t.value+"{"+Il(t.children,r)+"}";case ES:t.value=t.props.join(",")}return ro(e=Il(t.children,r))?t.return=t.value+"{"+e+"}":""}function u6(t){var n=RS(t);return function(e,r,i,o){for(var a="",s=0;s<n;s++)a+=t[s](e,r,i,o)||"";return a}}function l6(t){return function(n){n.root||(n=n.return)&&t(n)}}var c6=function(n,e,r){for(var i=0,o=0;i=o,o=vo(),i===38&&o===12&&(e[r]=1),!Rf(o);)Qr();return Zf(n,Lr)},d6=function(n,e){var r=-1,i=44;do switch(Rf(i)){case 0:i===38&&vo()===12&&(e[r]=1),n[r]+=c6(Lr-1,e,r);break;case 2:n[r]+=im(i);break;case 4:if(i===44){n[++r]=vo()===58?"&\f":"",e[r]=n[r].length;break}default:n[r]+=ag(i)}while(i=Qr());return n},f6=function(n,e){return fD(d6(dD(n),e))},iN=new WeakMap,p6=function(n){if(!(n.type!=="rule"||!n.parent||n.length<1)){for(var e=n.value,r=n.parent,i=n.column===r.column&&n.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(n.props.length===1&&e.charCodeAt(0)!==58&&!iN.get(r))&&!i){iN.set(n,!0);for(var o=[],a=f6(e,o),s=r.props,u=0,l=0;u<a.length;u++)for(var c=0;c<s.length;c++,l++)n.props[l]=o[u]?a[u].replace(/&\f/g,s[c]):s[c]+" "+a[u]}}},h6=function(n){if(n.type==="decl"){var e=n.value;e.charCodeAt(0)===108&&e.charCodeAt(2)===98&&(n.return="",n.value="")}};function pD(t,n){switch(YU(t,n)){case 5103:return Ct+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Ct+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return Ct+t+ev+t+or+t+t;case 6828:case 4268:return Ct+t+or+t+t;case 6165:return Ct+t+or+"flex-"+t+t;case 5187:return Ct+t+Rt(t,/(\w+).+(:[^]+)/,Ct+"box-$1$2"+or+"flex-$1$2")+t;case 5443:return Ct+t+or+"flex-item-"+Rt(t,/flex-|-self/,"")+t;case 4675:return Ct+t+or+"flex-line-pack"+Rt(t,/align-content|flex-|-self/,"")+t;case 5548:return Ct+t+or+Rt(t,"shrink","negative")+t;case 5292:return Ct+t+or+Rt(t,"basis","preferred-size")+t;case 6060:return Ct+"box-"+Rt(t,"-grow","")+Ct+t+or+Rt(t,"grow","positive")+t;case 4554:return Ct+Rt(t,/([^-])(transform)/g,"$1"+Ct+"$2")+t;case 6187:return Rt(Rt(Rt(t,/(zoom-|grab)/,Ct+"$1"),/(image-set)/,Ct+"$1"),t,"")+t;case 5495:case 3959:return Rt(t,/(image-set\([^]*)/,Ct+"$1$`$1");case 4968:return Rt(Rt(t,/(.+:)(flex-)?(.*)/,Ct+"box-pack:$3"+or+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Ct+t+t;case 4095:case 3583:case 4068:case 2532:return Rt(t,/(.+)-inline(.+)/,Ct+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(ro(t)-1-n>6)switch(qn(t,n+1)){case 109:if(qn(t,n+4)!==45)break;case 102:return Rt(t,/(.+:)(.+)-([^]+)/,"$1"+Ct+"$2-$3$1"+ev+(qn(t,n+3)==108?"$3":"$2-$3"))+t;case 115:return~ew(t,"stretch")?pD(Rt(t,"stretch","fill-available"),n)+t:t}break;case 4949:if(qn(t,n+1)!==115)break;case 6444:switch(qn(t,ro(t)-3-(~ew(t,"!important")&&10))){case 107:return Rt(t,":",":"+Ct)+t;case 101:return Rt(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Ct+(qn(t,14)===45?"inline-":"")+"box$3$1"+Ct+"$2$3$1"+or+"$2box$3")+t}break;case 5936:switch(qn(t,n+11)){case 114:return Ct+t+or+Rt(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return Ct+t+or+Rt(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return Ct+t+or+Rt(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return Ct+t+or+t+t}return t}var m6=function(n,e,r,i){if(n.length>-1&&!n.return)switch(n.type){case CS:n.return=pD(n.value,n.length);break;case uD:return Il([id(n,{value:Rt(n.value,"@","@"+Ct)})],i);case ES:if(n.length)return QU(n.props,function(o){switch(JU(o,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Il([id(n,{props:[Rt(o,/:(read-\w+)/,":"+ev+"$1")]})],i);case"::placeholder":return Il([id(n,{props:[Rt(o,/:(plac\w+)/,":"+Ct+"input-$1")]}),id(n,{props:[Rt(o,/:(plac\w+)/,":"+ev+"$1")]}),id(n,{props:[Rt(o,/:(plac\w+)/,or+"input-$1")]})],i)}return""})}},v6=[m6],g6=function(n){var e=n.key;if(e==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(v){var g=v.getAttribute("data-emotion");g.indexOf(" ")!==-1&&(document.head.appendChild(v),v.setAttribute("data-s",""))})}var i=n.stylisPlugins||v6,o={},a,s=[];a=n.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+e+' "]'),function(v){for(var g=v.getAttribute("data-emotion").split(" "),m=1;m<g.length;m++)o[g[m]]=!0;s.push(v)});var u,l=[p6,h6];{var c,d=[s6,l6(function(v){c.insert(v)})],f=u6(l.concat(i,d)),p=function(g){return Il(o6(g),f)};u=function(g,m,y,b){c=y,p(g?g+"{"+m.styles+"}":m.styles),b&&(h.inserted[m.name]=!0)}}var h={key:e,sheet:new HU({key:e,container:a,nonce:n.nonce,speedy:n.speedy,prepend:n.prepend,insertionPoint:n.insertionPoint}),nonce:n.nonce,inserted:o,registered:{},insert:u};return h.sheet.hydrate(s),h},y6=!0;function b6(t,n,e){var r="";return e.split(" ").forEach(function(i){t[i]!==void 0?n.push(t[i]+";"):r+=i+" "}),r}var hD=function(n,e,r){var i=n.key+"-"+e.name;(r===!1||y6===!1)&&n.registered[i]===void 0&&(n.registered[i]=e.styles)},w6=function(n,e,r){hD(n,e,r);var i=n.key+"-"+e.name;if(n.inserted[e.name]===void 0){var o=e;do n.insert(e===o?"."+i:"",o,n.sheet,!0),o=o.next;while(o!==void 0)}};function x6(t){for(var n=0,e,r=0,i=t.length;i>=4;++r,i-=4)e=t.charCodeAt(r)&255|(t.charCodeAt(++r)&255)<<8|(t.charCodeAt(++r)&255)<<16|(t.charCodeAt(++r)&255)<<24,e=(e&65535)*1540483477+((e>>>16)*59797<<16),e^=e>>>24,n=(e&65535)*1540483477+((e>>>16)*59797<<16)^(n&65535)*1540483477+((n>>>16)*59797<<16);switch(i){case 3:n^=(t.charCodeAt(r+2)&255)<<16;case 2:n^=(t.charCodeAt(r+1)&255)<<8;case 1:n^=t.charCodeAt(r)&255,n=(n&65535)*1540483477+((n>>>16)*59797<<16)}return n^=n>>>13,n=(n&65535)*1540483477+((n>>>16)*59797<<16),((n^n>>>15)>>>0).toString(36)}var S6={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},E6=/[A-Z]|^ms/g,C6=/_EMO_([^_]+?)_([^]*?)_EMO_/g,mD=function(n){return n.charCodeAt(1)===45},oN=function(n){return n!=null&&typeof n!="boolean"},z0=aD(function(t){return mD(t)?t:t.replace(E6,"-$&").toLowerCase()}),aN=function(n,e){switch(n){case"animation":case"animationName":if(typeof e=="string")return e.replace(C6,function(r,i,o){return io={name:i,styles:o,next:io},i})}return S6[n]!==1&&!mD(n)&&typeof e=="number"&&e!==0?e+"px":e};function Tf(t,n,e){if(e==null)return"";if(e.__emotion_styles!==void 0)return e;switch(typeof e){case"boolean":return"";case"object":{if(e.anim===1)return io={name:e.name,styles:e.styles,next:io},e.name;if(e.styles!==void 0){var r=e.next;if(r!==void 0)for(;r!==void 0;)io={name:r.name,styles:r.styles,next:io},r=r.next;var i=e.styles+";";return i}return R6(t,n,e)}case"function":{if(t!==void 0){var o=io,a=e(t);return io=o,Tf(t,n,a)}break}}if(n==null)return e;var s=n[e];return s!==void 0?s:e}function R6(t,n,e){var r="";if(Array.isArray(e))for(var i=0;i<e.length;i++)r+=Tf(t,n,e[i])+";";else for(var o in e){var a=e[o];if(typeof a!="object")n!=null&&n[a]!==void 0?r+=o+"{"+n[a]+"}":oN(a)&&(r+=z0(o)+":"+aN(o,a)+";");else if(Array.isArray(a)&&typeof a[0]=="string"&&(n==null||n[a[0]]===void 0))for(var s=0;s<a.length;s++)oN(a[s])&&(r+=z0(o)+":"+aN(o,a[s])+";");else{var u=Tf(t,n,a);switch(o){case"animation":case"animationName":{r+=z0(o)+":"+u+";";break}default:r+=o+"{"+u+"}"}}}return r}var sN=/label:\s*([^\s;\n{]+)\s*(;|$)/g,io,T6=function(n,e,r){if(n.length===1&&typeof n[0]=="object"&&n[0]!==null&&n[0].styles!==void 0)return n[0];var i=!0,o="";io=void 0;var a=n[0];a==null||a.raw===void 0?(i=!1,o+=Tf(r,e,a)):o+=a[0];for(var s=1;s<n.length;s++)o+=Tf(r,e,n[s]),i&&(o+=a[s]);sN.lastIndex=0;for(var u="",l;(l=sN.exec(o))!==null;)u+="-"+l[1];var c=x6(o)+u;return{name:c,styles:o,next:io}},N6=function(n){return n()},k6=Cm.useInsertionEffect?Cm.useInsertionEffect:!1,I6=k6||N6,vD=H.createContext(typeof HTMLElement<"u"?g6({key:"css"}):null);vD.Provider;var _6=function(n){return H.forwardRef(function(e,r){var i=H.useContext(vD);return n(e,i,r)})},gD=H.createContext({}),A6=$U,O6=function(n){return n!=="theme"},uN=function(n){return typeof n=="string"&&n.charCodeAt(0)>96?A6:O6},lN=function(n,e,r){var i;if(e){var o=e.shouldForwardProp;i=n.__emotion_forwardProp&&o?function(a){return n.__emotion_forwardProp(a)&&o(a)}:o}return typeof i!="function"&&r&&(i=n.__emotion_forwardProp),i},D6=function(n){var e=n.cache,r=n.serialized,i=n.isStringTag;return hD(e,r,i),I6(function(){return w6(e,r,i)}),null},M6=function t(n,e){var r=n.__emotion_real===n,i=r&&n.__emotion_base||n,o,a;e!==void 0&&(o=e.label,a=e.target);var s=lN(n,e,r),u=s||uN(i),l=!u("as");return function(){var c=arguments,d=r&&n.__emotion_styles!==void 0?n.__emotion_styles.slice(0):[];if(o!==void 0&&d.push("label:"+o+";"),c[0]==null||c[0].raw===void 0)d.push.apply(d,c);else{d.push(c[0][0]);for(var f=c.length,p=1;p<f;p++)d.push(c[p],c[0][p])}var h=_6(function(v,g,m){var y=l&&v.as||i,b="",w=[],x=v;if(v.theme==null){x={};for(var C in v)x[C]=v[C];x.theme=H.useContext(gD)}typeof v.className=="string"?b=b6(g.registered,w,v.className):v.className!=null&&(b=v.className+" ");var E=T6(d.concat(w),g.registered,x);b+=g.key+"-"+E.name,a!==void 0&&(b+=" "+a);var S=l&&s===void 0?uN(y):u,N={};for(var k in v)l&&k==="as"||S(k)&&(N[k]=v[k]);return N.className=b,N.ref=m,H.createElement(H.Fragment,null,H.createElement(D6,{cache:g,serialized:E,isStringTag:typeof y=="string"}),H.createElement(y,N))});return h.displayName=o!==void 0?o:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",h.defaultProps=n.defaultProps,h.__emotion_real=h,h.__emotion_base=i,h.__emotion_styles=d,h.__emotion_forwardProp=s,Object.defineProperty(h,"toString",{value:function(){return"."+a}}),h.withComponent=function(v,g){return t(v,ht({},e,g,{shouldForwardProp:lN(h,g,!0)})).apply(void 0,d)},h}},P6=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],nw=M6.bind();P6.forEach(function(t){nw[t]=nw(t)});function L6(t,n){return nw(t,n)}const F6=(t,n)=>{Array.isArray(t.__emotion_styles)&&(t.__emotion_styles=n(t.__emotion_styles))},z6=["values","unit","step"],B6=t=>{const n=Object.keys(t).map(e=>({key:e,val:t[e]}))||[];return n.sort((e,r)=>e.val-r.val),n.reduce((e,r)=>ht({},e,{[r.key]:r.val}),{})};function j6(t){const{values:n={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:e="px",step:r=5}=t,i=aa(t,z6),o=B6(n),a=Object.keys(o);function s(f){return`@media (min-width:${typeof n[f]=="number"?n[f]:f}${e})`}function u(f){return`@media (max-width:${(typeof n[f]=="number"?n[f]:f)-r/100}${e})`}function l(f,p){const h=a.indexOf(p);return`@media (min-width:${typeof n[f]=="number"?n[f]:f}${e}) and (max-width:${(h!==-1&&typeof n[a[h]]=="number"?n[a[h]]:p)-r/100}${e})`}function c(f){return a.indexOf(f)+1<a.length?l(f,a[a.indexOf(f)+1]):s(f)}function d(f){const p=a.indexOf(f);return p===0?s(a[1]):p===a.length-1?u(a[p]):l(f,a[a.indexOf(f)+1]).replace("@media","@media not all and")}return ht({keys:a,values:o,up:s,down:u,between:l,only:c,not:d,unit:e},i)}const V6={borderRadius:4},$6=V6;function Kd(t,n){return n?Bi(t,n,{clone:!1}):t}const TS={xs:0,sm:600,md:900,lg:1200,xl:1536},cN={keys:["xs","sm","md","lg","xl"],up:t=>`@media (min-width:${TS[t]}px)`};function ea(t,n,e){const r=t.theme||{};if(Array.isArray(n)){const o=r.breakpoints||cN;return n.reduce((a,s,u)=>(a[o.up(o.keys[u])]=e(n[u]),a),{})}if(typeof n=="object"){const o=r.breakpoints||cN;return Object.keys(n).reduce((a,s)=>{if(Object.keys(o.values||TS).indexOf(s)!==-1){const u=o.up(s);a[u]=e(n[s],s)}else{const u=s;a[u]=n[u]}return a},{})}return e(n)}function U6(t={}){var n;return((n=t.keys)==null?void 0:n.reduce((r,i)=>{const o=t.up(i);return r[o]={},r},{}))||{}}function W6(t,n){return t.reduce((e,r)=>{const i=e[r];return(!i||Object.keys(i).length===0)&&delete e[r],e},n)}function lg(t,n,e=!0){if(!n||typeof n!="string")return null;if(t&&t.vars&&e){const r=`vars.${n}`.split(".").reduce((i,o)=>i&&i[o]?i[o]:null,t);if(r!=null)return r}return n.split(".").reduce((r,i)=>r&&r[i]!=null?r[i]:null,t)}function tv(t,n,e,r=e){let i;return typeof t=="function"?i=t(e):Array.isArray(t)?i=t[e]||r:i=lg(t,e)||r,n&&(i=n(i,r,t)),i}function yn(t){const{prop:n,cssProperty:e=t.prop,themeKey:r,transform:i}=t,o=a=>{if(a[n]==null)return null;const s=a[n],u=a.theme,l=lg(u,r)||{};return ea(a,s,d=>{let f=tv(l,i,d);return d===f&&typeof d=="string"&&(f=tv(l,i,`${n}${d==="default"?"":mo(d)}`,d)),e===!1?f:{[e]:f}})};return o.propTypes={},o.filterProps=[n],o}function H6(t){const n={};return e=>(n[e]===void 0&&(n[e]=t(e)),n[e])}const G6={m:"margin",p:"padding"},q6={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},dN={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},K6=H6(t=>{if(t.length>2)if(dN[t])t=dN[t];else return[t];const[n,e]=t.split(""),r=G6[n],i=q6[e]||"";return Array.isArray(i)?i.map(o=>r+o):[r+i]}),NS=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],kS=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...NS,...kS];function ep(t,n,e,r){var i;const o=(i=lg(t,n,!1))!=null?i:e;return typeof o=="number"?a=>typeof a=="string"?a:o*a:Array.isArray(o)?a=>typeof a=="string"?a:o[a]:typeof o=="function"?o:()=>{}}function yD(t){return ep(t,"spacing",8)}function tp(t,n){if(typeof n=="string"||n==null)return n;const e=Math.abs(n),r=t(e);return n>=0?r:typeof r=="number"?-r:`-${r}`}function X6(t,n){return e=>t.reduce((r,i)=>(r[i]=tp(n,e),r),{})}function Y6(t,n,e,r){if(n.indexOf(e)===-1)return null;const i=K6(e),o=X6(i,r),a=t[e];return ea(t,a,o)}function bD(t,n){const e=yD(t.theme);return Object.keys(t).map(r=>Y6(t,n,r,e)).reduce(Kd,{})}function sn(t){return bD(t,NS)}sn.propTypes={};sn.filterProps=NS;function un(t){return bD(t,kS)}un.propTypes={};un.filterProps=kS;function J6(t=8){if(t.mui)return t;const n=yD({spacing:t}),e=(...r)=>(r.length===0?[1]:r).map(o=>{const a=n(o);return typeof a=="number"?`${a}px`:a}).join(" ");return e.mui=!0,e}function cg(...t){const n=t.reduce((r,i)=>(i.filterProps.forEach(o=>{r[o]=i}),r),{}),e=r=>Object.keys(r).reduce((i,o)=>n[o]?Kd(i,n[o](r)):i,{});return e.propTypes={},e.filterProps=t.reduce((r,i)=>r.concat(i.filterProps),[]),e}function mi(t){return typeof t!="number"?t:`${t}px solid`}function Ei(t,n){return yn({prop:t,themeKey:"borders",transform:n})}const Q6=Ei("border",mi),Z6=Ei("borderTop",mi),eW=Ei("borderRight",mi),tW=Ei("borderBottom",mi),nW=Ei("borderLeft",mi),rW=Ei("borderColor"),iW=Ei("borderTopColor"),oW=Ei("borderRightColor"),aW=Ei("borderBottomColor"),sW=Ei("borderLeftColor"),uW=Ei("outline",mi),lW=Ei("outlineColor"),dg=t=>{if(t.borderRadius!==void 0&&t.borderRadius!==null){const n=ep(t.theme,"shape.borderRadius",4),e=r=>({borderRadius:tp(n,r)});return ea(t,t.borderRadius,e)}return null};dg.propTypes={};dg.filterProps=["borderRadius"];cg(Q6,Z6,eW,tW,nW,rW,iW,oW,aW,sW,dg,uW,lW);const fg=t=>{if(t.gap!==void 0&&t.gap!==null){const n=ep(t.theme,"spacing",8),e=r=>({gap:tp(n,r)});return ea(t,t.gap,e)}return null};fg.propTypes={};fg.filterProps=["gap"];const pg=t=>{if(t.columnGap!==void 0&&t.columnGap!==null){const n=ep(t.theme,"spacing",8),e=r=>({columnGap:tp(n,r)});return ea(t,t.columnGap,e)}return null};pg.propTypes={};pg.filterProps=["columnGap"];const hg=t=>{if(t.rowGap!==void 0&&t.rowGap!==null){const n=ep(t.theme,"spacing",8),e=r=>({rowGap:tp(n,r)});return ea(t,t.rowGap,e)}return null};hg.propTypes={};hg.filterProps=["rowGap"];const cW=yn({prop:"gridColumn"}),dW=yn({prop:"gridRow"}),fW=yn({prop:"gridAutoFlow"}),pW=yn({prop:"gridAutoColumns"}),hW=yn({prop:"gridAutoRows"}),mW=yn({prop:"gridTemplateColumns"}),vW=yn({prop:"gridTemplateRows"}),gW=yn({prop:"gridTemplateAreas"}),yW=yn({prop:"gridArea"});cg(fg,pg,hg,cW,dW,fW,pW,hW,mW,vW,gW,yW);function _l(t,n){return n==="grey"?n:t}const bW=yn({prop:"color",themeKey:"palette",transform:_l}),wW=yn({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:_l}),xW=yn({prop:"backgroundColor",themeKey:"palette",transform:_l});cg(bW,wW,xW);function Gr(t){return t<=1&&t!==0?`${t*100}%`:t}const SW=yn({prop:"width",transform:Gr}),IS=t=>{if(t.maxWidth!==void 0&&t.maxWidth!==null){const n=e=>{var r,i;const o=((r=t.theme)==null||(r=r.breakpoints)==null||(r=r.values)==null?void 0:r[e])||TS[e];return o?((i=t.theme)==null||(i=i.breakpoints)==null?void 0:i.unit)!=="px"?{maxWidth:`${o}${t.theme.breakpoints.unit}`}:{maxWidth:o}:{maxWidth:Gr(e)}};return ea(t,t.maxWidth,n)}return null};IS.filterProps=["maxWidth"];const EW=yn({prop:"minWidth",transform:Gr}),CW=yn({prop:"height",transform:Gr}),RW=yn({prop:"maxHeight",transform:Gr}),TW=yn({prop:"minHeight",transform:Gr});yn({prop:"size",cssProperty:"width",transform:Gr});yn({prop:"size",cssProperty:"height",transform:Gr});const NW=yn({prop:"boxSizing"});cg(SW,IS,EW,CW,RW,TW,NW);const kW={border:{themeKey:"borders",transform:mi},borderTop:{themeKey:"borders",transform:mi},borderRight:{themeKey:"borders",transform:mi},borderBottom:{themeKey:"borders",transform:mi},borderLeft:{themeKey:"borders",transform:mi},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:mi},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:dg},color:{themeKey:"palette",transform:_l},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:_l},backgroundColor:{themeKey:"palette",transform:_l},p:{style:un},pt:{style:un},pr:{style:un},pb:{style:un},pl:{style:un},px:{style:un},py:{style:un},padding:{style:un},paddingTop:{style:un},paddingRight:{style:un},paddingBottom:{style:un},paddingLeft:{style:un},paddingX:{style:un},paddingY:{style:un},paddingInline:{style:un},paddingInlineStart:{style:un},paddingInlineEnd:{style:un},paddingBlock:{style:un},paddingBlockStart:{style:un},paddingBlockEnd:{style:un},m:{style:sn},mt:{style:sn},mr:{style:sn},mb:{style:sn},ml:{style:sn},mx:{style:sn},my:{style:sn},margin:{style:sn},marginTop:{style:sn},marginRight:{style:sn},marginBottom:{style:sn},marginLeft:{style:sn},marginX:{style:sn},marginY:{style:sn},marginInline:{style:sn},marginInlineStart:{style:sn},marginInlineEnd:{style:sn},marginBlock:{style:sn},marginBlockStart:{style:sn},marginBlockEnd:{style:sn},displayPrint:{cssProperty:!1,transform:t=>({"@media print":{display:t}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:fg},rowGap:{style:hg},columnGap:{style:pg},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Gr},maxWidth:{style:IS},minWidth:{transform:Gr},height:{transform:Gr},maxHeight:{transform:Gr},minHeight:{transform:Gr},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}},_S=kW;function IW(...t){const n=t.reduce((r,i)=>r.concat(Object.keys(i)),[]),e=new Set(n);return t.every(r=>e.size===Object.keys(r).length)}function _W(t,n){return typeof t=="function"?t(n):t}function AW(){function t(e,r,i,o){const a={[e]:r,theme:i},s=o[e];if(!s)return{[e]:r};const{cssProperty:u=e,themeKey:l,transform:c,style:d}=s;if(r==null)return null;if(l==="typography"&&r==="inherit")return{[e]:r};const f=lg(i,l)||{};return d?d(a):ea(a,r,h=>{let v=tv(f,c,h);return h===v&&typeof h=="string"&&(v=tv(f,c,`${e}${h==="default"?"":mo(h)}`,h)),u===!1?v:{[u]:v}})}function n(e){var r;const{sx:i,theme:o={}}=e||{};if(!i)return null;const a=(r=o.unstable_sxConfig)!=null?r:_S;function s(u){let l=u;if(typeof u=="function")l=u(o);else if(typeof u!="object")return u;if(!l)return null;const c=U6(o.breakpoints),d=Object.keys(c);let f=c;return Object.keys(l).forEach(p=>{const h=_W(l[p],o);if(h!=null)if(typeof h=="object")if(a[p])f=Kd(f,t(p,h,o,a));else{const v=ea({theme:o},h,g=>({[p]:g}));IW(v,h)?f[p]=n({sx:h,theme:o}):f=Kd(f,v)}else f=Kd(f,t(p,h,o,a))}),W6(d,f)}return Array.isArray(i)?i.map(s):s(i)}return n}const mg=AW();mg.filterProps=["sx"];const OW=["breakpoints","palette","spacing","shape"];function AS(t={},...n){const{breakpoints:e={},palette:r={},spacing:i,shape:o={}}=t,a=aa(t,OW),s=j6(e),u=J6(i);let l=Bi({breakpoints:s,direction:"ltr",components:{},palette:ht({mode:"light"},r),spacing:u,shape:ht({},$6,o)},a);return l=n.reduce((c,d)=>Bi(c,d),l),l.unstable_sxConfig=ht({},_S,a==null?void 0:a.unstable_sxConfig),l.unstable_sx=function(d){return mg({sx:d,theme:this})},l}function DW(t){return Object.keys(t).length===0}function MW(t=null){const n=H.useContext(gD);return!n||DW(n)?t:n}const PW=AS();function LW(t=PW){return MW(t)}const FW=["variant"];function fN(t){return t.length===0}function wD(t){const{variant:n}=t,e=aa(t,FW);let r=n||"";return Object.keys(e).sort().forEach(i=>{i==="color"?r+=fN(r)?t[i]:mo(t[i]):r+=`${fN(r)?i:mo(i)}${mo(t[i].toString())}`}),r}const zW=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function BW(t){return Object.keys(t).length===0}function jW(t){return typeof t=="string"&&t.charCodeAt(0)>96}const VW=(t,n)=>n.components&&n.components[t]&&n.components[t].styleOverrides?n.components[t].styleOverrides:null,nv=t=>{let n=0;const e={};return t&&t.forEach(r=>{let i="";typeof r.props=="function"?(i=`callback${n}`,n+=1):i=wD(r.props),e[i]=r.style}),e},$W=(t,n)=>{let e=[];return n&&n.components&&n.components[t]&&n.components[t].variants&&(e=n.components[t].variants),nv(e)},rv=(t,n,e)=>{const{ownerState:r={}}=t,i=[];let o=0;return e&&e.forEach(a=>{let s=!0;if(typeof a.props=="function"){const u=ht({},t,r);s=a.props(u)}else Object.keys(a.props).forEach(u=>{r[u]!==a.props[u]&&t[u]!==a.props[u]&&(s=!1)});s&&(typeof a.props=="function"?i.push(n[`callback${o}`]):i.push(n[wD(a.props)])),typeof a.props=="function"&&(o+=1)}),i},UW=(t,n,e,r)=>{var i;const o=e==null||(i=e.components)==null||(i=i[r])==null?void 0:i.variants;return rv(t,n,o)};function am(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const WW=AS(),HW=t=>t&&t.charAt(0).toLowerCase()+t.slice(1);function sm({defaultTheme:t,theme:n,themeId:e}){return BW(n)?t:n[e]||n}function GW(t){return t?(n,e)=>e[t]:null}const pN=({styledArg:t,props:n,defaultTheme:e,themeId:r})=>{const i=t(ht({},n,{theme:sm(ht({},n,{defaultTheme:e,themeId:r}))}));let o;if(i&&i.variants&&(o=i.variants,delete i.variants),o){const a=rv(n,nv(o),o);return[i,...a]}return i};function qW(t={}){const{themeId:n,defaultTheme:e=WW,rootShouldForwardProp:r=am,slotShouldForwardProp:i=am}=t,o=a=>mg(ht({},a,{theme:sm(ht({},a,{defaultTheme:e,themeId:n}))}));return o.__mui_systemSx=!0,(a,s={})=>{F6(a,w=>w.filter(x=>!(x!=null&&x.__mui_systemSx)));const{name:u,slot:l,skipVariantsResolver:c,skipSx:d,overridesResolver:f=GW(HW(l))}=s,p=aa(s,zW),h=c!==void 0?c:l&&l!=="Root"&&l!=="root"||!1,v=d||!1;let g,m=am;l==="Root"||l==="root"?m=r:l?m=i:jW(a)&&(m=void 0);const y=L6(a,ht({shouldForwardProp:m,label:g},p)),b=(w,...x)=>{const C=x?x.map(k=>{if(typeof k=="function"&&k.__emotion_real!==k)return M=>pN({styledArg:k,props:M,defaultTheme:e,themeId:n});if(Ia(k)){let M=k,D;return k&&k.variants&&(D=k.variants,delete M.variants,M=R=>{let O=k;return rv(R,nv(D),D).forEach(A=>{O=Bi(O,A)}),O}),M}return k}):[];let E=w;if(Ia(w)){let k;w&&w.variants&&(k=w.variants,delete E.variants,E=M=>{let D=w;return rv(M,nv(k),k).forEach(O=>{D=Bi(D,O)}),D})}else typeof w=="function"&&w.__emotion_real!==w&&(E=k=>pN({styledArg:w,props:k,defaultTheme:e,themeId:n}));u&&f&&C.push(k=>{const M=sm(ht({},k,{defaultTheme:e,themeId:n})),D=VW(u,M);if(D){const R={};return Object.entries(D).forEach(([O,P])=>{R[O]=typeof P=="function"?P(ht({},k,{theme:M})):P}),f(k,R)}return null}),u&&!h&&C.push(k=>{const M=sm(ht({},k,{defaultTheme:e,themeId:n}));return UW(k,$W(u,M),M,u)}),v||C.push(o);const S=C.length-x.length;if(Array.isArray(w)&&S>0){const k=new Array(S).fill("");E=[...w,...k],E.raw=[...w.raw,...k]}const N=y(E,...C);return a.muiName&&(N.muiName=a.muiName),N};return y.withConfig&&(b.withConfig=y.withConfig),b}}function KW(t){const{theme:n,name:e,props:r}=t;return!n||!n.components||!n.components[e]||!n.components[e].defaultProps?r:nD(n.components[e].defaultProps,r)}function XW({props:t,name:n,defaultTheme:e,themeId:r}){let i=LW(e);return r&&(i=i[r]||i),KW({theme:i,name:n,props:t})}function xD(t,n=0,e=1){return BU(t,n,e)}function YW(t){t=t.slice(1);const n=new RegExp(`.{1,${t.length>=6?2:1}}`,"g");let e=t.match(n);return e&&e[0].length===1&&(e=e.map(r=>r+r)),e?`rgb${e.length===4?"a":""}(${e.map((r,i)=>i<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function Yl(t){if(t.type)return t;if(t.charAt(0)==="#")return Yl(YW(t));const n=t.indexOf("("),e=t.substring(0,n);if(["rgb","rgba","hsl","hsla","color"].indexOf(e)===-1)throw new Error(Kl(9,t));let r=t.substring(n+1,t.length-1),i;if(e==="color"){if(r=r.split(" "),i=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(i)===-1)throw new Error(Kl(10,i))}else r=r.split(",");return r=r.map(o=>parseFloat(o)),{type:e,values:r,colorSpace:i}}function OS(t){const{type:n,colorSpace:e}=t;let{values:r}=t;return n.indexOf("rgb")!==-1?r=r.map((i,o)=>o<3?parseInt(i,10):i):n.indexOf("hsl")!==-1&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),n.indexOf("color")!==-1?r=`${e} ${r.join(" ")}`:r=`${r.join(", ")}`,`${n}(${r})`}function JW(t){t=Yl(t);const{values:n}=t,e=n[0],r=n[1]/100,i=n[2]/100,o=r*Math.min(i,1-i),a=(l,c=(l+e/30)%12)=>i-o*Math.max(Math.min(c-3,9-c,1),-1);let s="rgb";const u=[Math.round(a(0)*255),Math.round(a(8)*255),Math.round(a(4)*255)];return t.type==="hsla"&&(s+="a",u.push(n[3])),OS({type:s,values:u})}function hN(t){t=Yl(t);let n=t.type==="hsl"||t.type==="hsla"?Yl(JW(t)).values:t.values;return n=n.map(e=>(t.type!=="color"&&(e/=255),e<=.03928?e/12.92:((e+.055)/1.055)**2.4)),Number((.2126*n[0]+.7152*n[1]+.0722*n[2]).toFixed(3))}function QW(t,n){const e=hN(t),r=hN(n);return(Math.max(e,r)+.05)/(Math.min(e,r)+.05)}function ZW(t,n){if(t=Yl(t),n=xD(n),t.type.indexOf("hsl")!==-1)t.values[2]*=1-n;else if(t.type.indexOf("rgb")!==-1||t.type.indexOf("color")!==-1)for(let e=0;e<3;e+=1)t.values[e]*=1-n;return OS(t)}function e8(t,n){if(t=Yl(t),n=xD(n),t.type.indexOf("hsl")!==-1)t.values[2]+=(100-t.values[2])*n;else if(t.type.indexOf("rgb")!==-1)for(let e=0;e<3;e+=1)t.values[e]+=(255-t.values[e])*n;else if(t.type.indexOf("color")!==-1)for(let e=0;e<3;e+=1)t.values[e]+=(1-t.values[e])*n;return OS(t)}function t8(t,n){return ht({toolbar:{minHeight:56,[t.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[t.up("sm")]:{minHeight:64}}},n)}const n8={black:"#000",white:"#fff"},Nf=n8,r8={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},i8=r8,o8={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},Uu=o8,a8={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},Wu=a8,s8={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},od=s8,u8={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},Hu=u8,l8={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},Gu=l8,c8={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},qu=c8,d8=["mode","contrastThreshold","tonalOffset"],mN={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Nf.white,default:Nf.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},B0={text:{primary:Nf.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Nf.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function vN(t,n,e,r){const i=r.light||r,o=r.dark||r*1.5;t[n]||(t.hasOwnProperty(e)?t[n]=t[e]:n==="light"?t.light=e8(t.main,i):n==="dark"&&(t.dark=ZW(t.main,o)))}function f8(t="light"){return t==="dark"?{main:Hu[200],light:Hu[50],dark:Hu[400]}:{main:Hu[700],light:Hu[400],dark:Hu[800]}}function p8(t="light"){return t==="dark"?{main:Uu[200],light:Uu[50],dark:Uu[400]}:{main:Uu[500],light:Uu[300],dark:Uu[700]}}function h8(t="light"){return t==="dark"?{main:Wu[500],light:Wu[300],dark:Wu[700]}:{main:Wu[700],light:Wu[400],dark:Wu[800]}}function m8(t="light"){return t==="dark"?{main:Gu[400],light:Gu[300],dark:Gu[700]}:{main:Gu[700],light:Gu[500],dark:Gu[900]}}function v8(t="light"){return t==="dark"?{main:qu[400],light:qu[300],dark:qu[700]}:{main:qu[800],light:qu[500],dark:qu[900]}}function g8(t="light"){return t==="dark"?{main:od[400],light:od[300],dark:od[700]}:{main:"#ed6c02",light:od[500],dark:od[900]}}function y8(t){const{mode:n="light",contrastThreshold:e=3,tonalOffset:r=.2}=t,i=aa(t,d8),o=t.primary||f8(n),a=t.secondary||p8(n),s=t.error||h8(n),u=t.info||m8(n),l=t.success||v8(n),c=t.warning||g8(n);function d(v){return QW(v,B0.text.primary)>=e?B0.text.primary:mN.text.primary}const f=({color:v,name:g,mainShade:m=500,lightShade:y=300,darkShade:b=700})=>{if(v=ht({},v),!v.main&&v[m]&&(v.main=v[m]),!v.hasOwnProperty("main"))throw new Error(Kl(11,g?` (${g})`:"",m));if(typeof v.main!="string")throw new Error(Kl(12,g?` (${g})`:"",JSON.stringify(v.main)));return vN(v,"light",y,r),vN(v,"dark",b,r),v.contrastText||(v.contrastText=d(v.main)),v},p={dark:B0,light:mN};return Bi(ht({common:ht({},Nf),mode:n,primary:f({color:o,name:"primary"}),secondary:f({color:a,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:f({color:s,name:"error"}),warning:f({color:c,name:"warning"}),info:f({color:u,name:"info"}),success:f({color:l,name:"success"}),grey:i8,contrastThreshold:e,getContrastText:d,augmentColor:f,tonalOffset:r},p[n]),i)}const b8=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function w8(t){return Math.round(t*1e5)/1e5}const gN={textTransform:"uppercase"},yN='"Roboto", "Helvetica", "Arial", sans-serif';function x8(t,n){const e=typeof n=="function"?n(t):n,{fontFamily:r=yN,fontSize:i=14,fontWeightLight:o=300,fontWeightRegular:a=400,fontWeightMedium:s=500,fontWeightBold:u=700,htmlFontSize:l=16,allVariants:c,pxToRem:d}=e,f=aa(e,b8),p=i/14,h=d||(m=>`${m/l*p}rem`),v=(m,y,b,w,x)=>ht({fontFamily:r,fontWeight:m,fontSize:h(y),lineHeight:b},r===yN?{letterSpacing:`${w8(w/y)}em`}:{},x,c),g={h1:v(o,96,1.167,-1.5),h2:v(o,60,1.2,-.5),h3:v(a,48,1.167,0),h4:v(a,34,1.235,.25),h5:v(a,24,1.334,0),h6:v(s,20,1.6,.15),subtitle1:v(a,16,1.75,.15),subtitle2:v(s,14,1.57,.1),body1:v(a,16,1.5,.15),body2:v(a,14,1.43,.15),button:v(s,14,1.75,.4,gN),caption:v(a,12,1.66,.4),overline:v(a,12,2.66,1,gN),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return Bi(ht({htmlFontSize:l,pxToRem:h,fontFamily:r,fontSize:i,fontWeightLight:o,fontWeightRegular:a,fontWeightMedium:s,fontWeightBold:u},g),f,{clone:!1})}const S8=.2,E8=.14,C8=.12;function Kt(...t){return[`${t[0]}px ${t[1]}px ${t[2]}px ${t[3]}px rgba(0,0,0,${S8})`,`${t[4]}px ${t[5]}px ${t[6]}px ${t[7]}px rgba(0,0,0,${E8})`,`${t[8]}px ${t[9]}px ${t[10]}px ${t[11]}px rgba(0,0,0,${C8})`].join(",")}const R8=["none",Kt(0,2,1,-1,0,1,1,0,0,1,3,0),Kt(0,3,1,-2,0,2,2,0,0,1,5,0),Kt(0,3,3,-2,0,3,4,0,0,1,8,0),Kt(0,2,4,-1,0,4,5,0,0,1,10,0),Kt(0,3,5,-1,0,5,8,0,0,1,14,0),Kt(0,3,5,-1,0,6,10,0,0,1,18,0),Kt(0,4,5,-2,0,7,10,1,0,2,16,1),Kt(0,5,5,-3,0,8,10,1,0,3,14,2),Kt(0,5,6,-3,0,9,12,1,0,3,16,2),Kt(0,6,6,-3,0,10,14,1,0,4,18,3),Kt(0,6,7,-4,0,11,15,1,0,4,20,3),Kt(0,7,8,-4,0,12,17,2,0,5,22,4),Kt(0,7,8,-4,0,13,19,2,0,5,24,4),Kt(0,7,9,-4,0,14,21,2,0,5,26,4),Kt(0,8,9,-5,0,15,22,2,0,6,28,5),Kt(0,8,10,-5,0,16,24,2,0,6,30,5),Kt(0,8,11,-5,0,17,26,2,0,6,32,5),Kt(0,9,11,-5,0,18,28,2,0,7,34,6),Kt(0,9,12,-6,0,19,29,2,0,7,36,6),Kt(0,10,13,-6,0,20,31,3,0,8,38,7),Kt(0,10,13,-6,0,21,33,3,0,8,40,7),Kt(0,10,14,-6,0,22,35,3,0,8,42,7),Kt(0,11,14,-7,0,23,36,3,0,9,44,8),Kt(0,11,15,-7,0,24,38,3,0,9,46,8)],T8=["duration","easing","delay"],N8={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},k8={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function bN(t){return`${Math.round(t)}ms`}function I8(t){if(!t)return 0;const n=t/36;return Math.round((4+15*n**.25+n/5)*10)}function _8(t){const n=ht({},N8,t.easing),e=ht({},k8,t.duration);return ht({getAutoHeightDuration:I8,create:(i=["all"],o={})=>{const{duration:a=e.standard,easing:s=n.easeInOut,delay:u=0}=o;return aa(o,T8),(Array.isArray(i)?i:[i]).map(l=>`${l} ${typeof a=="string"?a:bN(a)} ${s} ${typeof u=="string"?u:bN(u)}`).join(",")}},t,{easing:n,duration:e})}const A8={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},O8=A8,D8=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function M8(t={},...n){const{mixins:e={},palette:r={},transitions:i={},typography:o={}}=t,a=aa(t,D8);if(t.vars)throw new Error(Kl(18));const s=y8(r),u=AS(t);let l=Bi(u,{mixins:t8(u.breakpoints,e),palette:s,shadows:R8.slice(),typography:x8(s,o),transitions:_8(i),zIndex:ht({},O8),applyDarkStyles(c){return this.vars?{[this.getColorSchemeSelector("dark").replace(/(\[[^\]]+\])/,":where($1)")]:c}:this.palette.mode==="dark"?c:{}}});return l=Bi(l,a),l=n.reduce((c,d)=>Bi(c,d),l),l.unstable_sxConfig=ht({},_S,a==null?void 0:a.unstable_sxConfig),l.unstable_sx=function(d){return mg({sx:d,theme:this})},l}const P8=M8(),SD=P8,ED="$$material";function L8({props:t,name:n}){return XW({props:t,name:n,defaultTheme:SD,themeId:ED})}const F8=t=>am(t)&&t!=="classes",z8=qW({themeId:ED,defaultTheme:SD,rootShouldForwardProp:F8});function B8(t){return iD("MuiSvgIcon",t)}zU("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const j8=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],V8=t=>{const{color:n,fontSize:e,classes:r}=t,i={root:["root",n!=="inherit"&&`color${mo(n)}`,`fontSize${mo(e)}`]};return PU(i,B8,r)},$8=z8("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:e}=t;return[n.root,e.color!=="inherit"&&n[`color${mo(e.color)}`],n[`fontSize${mo(e.fontSize)}`]]}})(({theme:t,ownerState:n})=>{var e,r,i,o,a,s,u,l,c,d,f,p,h;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:n.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:(e=t.transitions)==null||(r=e.create)==null?void 0:r.call(e,"fill",{duration:(i=t.transitions)==null||(i=i.duration)==null?void 0:i.shorter}),fontSize:{inherit:"inherit",small:((o=t.typography)==null||(a=o.pxToRem)==null?void 0:a.call(o,20))||"1.25rem",medium:((s=t.typography)==null||(u=s.pxToRem)==null?void 0:u.call(s,24))||"1.5rem",large:((l=t.typography)==null||(c=l.pxToRem)==null?void 0:c.call(l,35))||"2.1875rem"}[n.fontSize],color:(d=(f=(t.vars||t).palette)==null||(f=f[n.color])==null?void 0:f.main)!=null?d:{action:(p=(t.vars||t).palette)==null||(p=p.action)==null?void 0:p.active,disabled:(h=(t.vars||t).palette)==null||(h=h.action)==null?void 0:h.disabled,inherit:void 0}[n.color]}}),rw=H.forwardRef(function(n,e){const r=L8({props:n,name:"MuiSvgIcon"}),{children:i,className:o,color:a="inherit",component:s="svg",fontSize:u="medium",htmlColor:l,inheritViewBox:c=!1,titleAccess:d,viewBox:f="0 0 24 24"}=r,p=aa(r,j8),h=H.isValidElement(i)&&i.type==="svg",v=ht({},r,{color:a,component:s,fontSize:u,instanceFontSize:n.fontSize,inheritViewBox:c,viewBox:f,hasSvgAsChild:h}),g={};c||(g.viewBox=f);const m=V8(v);return T.jsxs($8,ht({as:s,className:jU(m.root,o),focusable:"false",color:l,"aria-hidden":d?void 0:!0,role:d?"img":void 0,ref:e},g,p,h&&i.props,{ownerState:v,children:[h?i.props.children:i,d?T.jsx("title",{children:d}):null]}))});rw.muiName="SvgIcon";function U8(t,n){function e(r,i){return T.jsx(rw,ht({"data-testid":`${n}Icon`,ref:i},r,{children:t}))}return e.muiName=rw.muiName,H.memo(H.forwardRef(e))}const W8={configure:t=>{rD.configure(t)}},H8=Object.freeze(Object.defineProperty({__proto__:null,capitalize:mo,createChainedFunction:mU,createSvgIcon:U8,debounce:vU,deprecatedPropType:gU,isMuiElement:yU,ownerDocument:ZO,ownerWindow:bU,requirePropFactory:wU,setRef:eD,unstable_ClassNameGenerator:W8,unstable_useEnhancedEffect:tD,unstable_useId:EU,unsupportedProp:CU,useControlled:RU,useEventCallback:TU,useForkRef:NU,useIsFocusVisible:MU},Symbol.toStringTag,{value:"Module"})),G8=Bv(H8);var wN;function xt(){return wN||(wN=1,function(t){"use client";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n.createSvgIcon}});var n=G8}(L0)),L0}var q8=wt;Object.defineProperty(SS,"__esModule",{value:!0});var CD=SS.default=void 0,K8=q8(xt()),X8=T;CD=SS.default=(0,K8.default)((0,X8.jsx)("path",{d:"M12 5.9c1.16 0 2.1.94 2.1 2.1s-.94 2.1-2.1 2.1S9.9 9.16 9.9 8s.94-2.1 2.1-2.1m0 9c2.97 0 6.1 1.46 6.1 2.1v1.1H5.9V17c0-.64 3.13-2.1 6.1-2.1M12 4C9.79 4 8 5.79 8 8s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4m0 9c-2.67 0-8 1.34-8 4v3h16v-3c0-2.66-5.33-4-8-4"}),"PersonOutlineOutlined");var DS={},Y8=wt;Object.defineProperty(DS,"__esModule",{value:!0});var RD=DS.default=void 0,J8=Y8(xt()),Q8=T;RD=DS.default=(0,J8.default)((0,Q8.jsx)("path",{d:"m9.4 10.5 4.77-8.26C13.47 2.09 12.75 2 12 2c-2.4 0-4.6.85-6.32 2.25l3.66 6.35zM21.54 9c-.92-2.92-3.15-5.26-6-6.34L11.88 9zm.26 1h-7.49l.29.5 4.76 8.25C21 16.97 22 14.61 22 12c0-.69-.07-1.35-.2-2M8.54 12l-3.9-6.75C3.01 7.03 2 9.39 2 12c0 .69.07 1.35.2 2h7.49zm-6.08 3c.92 2.92 3.15 5.26 6 6.34L12.12 15zm11.27 0-3.9 6.76c.7.15 1.42.24 2.17.24 2.4 0 4.6-.85 6.32-2.25l-3.66-6.35z"}),"Camera");var MS={},Z8=wt;Object.defineProperty(MS,"__esModule",{value:!0});var TD=MS.default=void 0,eH=Z8(xt()),tH=T;TD=MS.default=(0,eH.default)((0,tH.jsx)("path",{d:"M19 5v2h-4V5zM9 5v6H5V5zm10 8v6h-4v-6zM9 17v2H5v-2zM21 3h-8v6h8zM11 3H3v10h8zm10 8h-8v10h8zm-10 4H3v6h8z"}),"DashboardOutlined");var PS={},nH=wt;Object.defineProperty(PS,"__esModule",{value:!0});var ND=PS.default=void 0,rH=nH(xt()),iH=T;ND=PS.default=(0,rH.default)((0,iH.jsx)("path",{d:"m12 5.69 5 4.5V18h-2v-6H9v6H7v-7.81zM12 3 2 12h3v8h6v-6h2v6h6v-8h3z"}),"HomeOutlined");var LS={},oH=wt;Object.defineProperty(LS,"__esModule",{value:!0});var kD=LS.default=void 0,aH=oH(xt()),xN=T;kD=LS.default=(0,aH.default)([(0,xN.jsx)("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7M7 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 2.88-2.88 7.19-5 9.88C9.92 16.21 7 11.85 7 9"},"0"),(0,xN.jsx)("circle",{cx:"12",cy:"9",r:"2.5"},"1")],"LocationOnOutlined");const sH=()=>{const t=jr();localStorage.getItem("jwt");const n=e=>{const r=e.target.files[0],i=new FileReader;i.readAsDataURL(r),i.onloadend=()=>[t("/fish/image/edit",{state:{value:i.result}})]};return T.jsxs(T.Fragment,{children:[T.jsx("div",{className:"Navbar_body",children:T.jsx(q5,{})}),T.jsxs("nav",{className:"nav",children:[T.jsxs(Od,{to:"/",className:"nav-item",children:[T.jsx(ND,{}),T.jsx("span",{children:"홈"})]}),T.jsxs(Od,{to:"/fish/map",className:"nav-item",children:[T.jsx(kD,{}),T.jsx("span",{children:"피싱맵"})]}),T.jsxs("div",{className:"nav-item hidden",children:[T.jsxs("svg",{className:"icon",stroke:"currentColor",fill:"none",strokeWidth:"2",viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",children:[T.jsx("circle",{cx:"9",cy:"21",r:"1"}),T.jsx("circle",{cx:"20",cy:"21",r:"1"}),T.jsx("path",{d:"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"})]}),T.jsx("span",{children:"Home"})]}),T.jsx("div",{className:"nav-item btn",children:T.jsxs("label",{className:"custum-file-upload bg-blue",htmlFor:"file",children:[T.jsx(RD,{style:{width:"6vh",height:"6vh"}}),T.jsx("input",{type:"file",id:"file",accept:"image/*",onChange:n})]})}),T.jsxs(Od,{to:"/media",className:"nav-item",children:[T.jsx(TD,{}),T.jsx("span",{children:"RoomList"})]}),T.jsxs(Od,{to:"/user/mypage",className:"nav-item",children:[T.jsx(CD,{}),T.jsx("span",{children:"마이"})]})]})]})};function SN(t){return xS({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M256 160c16-63.16 76.43-95.41 208-96a15.94 15.94 0 0 1 16 16v288a16 16 0 0 1-16 16c-128 0-177.45 25.81-208 64-30.37-38-80-64-208-64-9.88 0-16-8.05-16-17.93V80a15.94 15.94 0 0 1 16-16c131.57.59 192 32.84 208 96zm0 0v288"},child:[]}]})(t)}const uH="/assets/Logo-WtStl40p.svg";function EN(t){return t!==null&&typeof t=="object"&&"constructor"in t&&t.constructor===Object}function FS(t,n){t===void 0&&(t={}),n===void 0&&(n={}),Object.keys(n).forEach(e=>{typeof t[e]>"u"?t[e]=n[e]:EN(n[e])&&EN(t[e])&&Object.keys(n[e]).length>0&&FS(t[e],n[e])})}const ID={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function Ec(){const t=typeof document<"u"?document:{};return FS(t,ID),t}const lH={document:ID,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(t){return typeof setTimeout>"u"?(t(),null):setTimeout(t,0)},cancelAnimationFrame(t){typeof setTimeout>"u"||clearTimeout(t)}};function ai(){const t=typeof window<"u"?window:{};return FS(t,lH),t}function cH(t){return t===void 0&&(t=""),t.trim().split(" ").filter(n=>!!n.trim())}function dH(t){const n=t;Object.keys(n).forEach(e=>{try{n[e]=null}catch{}try{delete n[e]}catch{}})}function iw(t,n){return n===void 0&&(n=0),setTimeout(t,n)}function iv(){return Date.now()}function fH(t){const n=ai();let e;return n.getComputedStyle&&(e=n.getComputedStyle(t,null)),!e&&t.currentStyle&&(e=t.currentStyle),e||(e=t.style),e}function pH(t,n){n===void 0&&(n="x");const e=ai();let r,i,o;const a=fH(t);return e.WebKitCSSMatrix?(i=a.transform||a.webkitTransform,i.split(",").length>6&&(i=i.split(", ").map(s=>s.replace(",",".")).join(", ")),o=new e.WebKitCSSMatrix(i==="none"?"":i)):(o=a.MozTransform||a.OTransform||a.MsTransform||a.msTransform||a.transform||a.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),r=o.toString().split(",")),n==="x"&&(e.WebKitCSSMatrix?i=o.m41:r.length===16?i=parseFloat(r[12]):i=parseFloat(r[4])),n==="y"&&(e.WebKitCSSMatrix?i=o.m42:r.length===16?i=parseFloat(r[13]):i=parseFloat(r[5])),i||0}function mh(t){return typeof t=="object"&&t!==null&&t.constructor&&Object.prototype.toString.call(t).slice(8,-1)==="Object"}function hH(t){return typeof window<"u"&&typeof window.HTMLElement<"u"?t instanceof HTMLElement:t&&(t.nodeType===1||t.nodeType===11)}function Ur(){const t=Object(arguments.length<=0?void 0:arguments[0]),n=["__proto__","constructor","prototype"];for(let e=1;e<arguments.length;e+=1){const r=e<0||arguments.length<=e?void 0:arguments[e];if(r!=null&&!hH(r)){const i=Object.keys(Object(r)).filter(o=>n.indexOf(o)<0);for(let o=0,a=i.length;o<a;o+=1){const s=i[o],u=Object.getOwnPropertyDescriptor(r,s);u!==void 0&&u.enumerable&&(mh(t[s])&&mh(r[s])?r[s].__swiper__?t[s]=r[s]:Ur(t[s],r[s]):!mh(t[s])&&mh(r[s])?(t[s]={},r[s].__swiper__?t[s]=r[s]:Ur(t[s],r[s])):t[s]=r[s])}}}return t}function vh(t,n,e){t.style.setProperty(n,e)}function _D(t){let{swiper:n,targetPosition:e,side:r}=t;const i=ai(),o=-n.translate;let a=null,s;const u=n.params.speed;n.wrapperEl.style.scrollSnapType="none",i.cancelAnimationFrame(n.cssModeFrameID);const l=e>o?"next":"prev",c=(f,p)=>l==="next"&&f>=p||l==="prev"&&f<=p,d=()=>{s=new Date().getTime(),a===null&&(a=s);const f=Math.max(Math.min((s-a)/u,1),0),p=.5-Math.cos(f*Math.PI)/2;let h=o+p*(e-o);if(c(h,e)&&(h=e),n.wrapperEl.scrollTo({[r]:h}),c(h,e)){n.wrapperEl.style.overflow="hidden",n.wrapperEl.style.scrollSnapType="",setTimeout(()=>{n.wrapperEl.style.overflow="",n.wrapperEl.scrollTo({[r]:h})}),i.cancelAnimationFrame(n.cssModeFrameID);return}n.cssModeFrameID=i.requestAnimationFrame(d)};d()}function zS(t){return t.querySelector(".swiper-slide-transform")||t.shadowRoot&&t.shadowRoot.querySelector(".swiper-slide-transform")||t}function Uo(t,n){return n===void 0&&(n=""),[...t.children].filter(e=>e.matches(n))}function ov(t){try{console.warn(t);return}catch{}}function av(t,n){n===void 0&&(n=[]);const e=document.createElement(t);return e.classList.add(...Array.isArray(n)?n:cH(n)),e}function mH(t,n){const e=[];for(;t.previousElementSibling;){const r=t.previousElementSibling;n?r.matches(n)&&e.push(r):e.push(r),t=r}return e}function vH(t,n){const e=[];for(;t.nextElementSibling;){const r=t.nextElementSibling;n?r.matches(n)&&e.push(r):e.push(r),t=r}return e}function Ma(t,n){return ai().getComputedStyle(t,null).getPropertyValue(n)}function CN(t){let n=t,e;if(n){for(e=0;(n=n.previousSibling)!==null;)n.nodeType===1&&(e+=1);return e}}function gH(t,n){const e=[];let r=t.parentElement;for(;r;)n?r.matches(n)&&e.push(r):e.push(r),r=r.parentElement;return e}function RN(t,n,e){const r=ai();return e?t[n==="width"?"offsetWidth":"offsetHeight"]+parseFloat(r.getComputedStyle(t,null).getPropertyValue(n==="width"?"margin-right":"margin-top"))+parseFloat(r.getComputedStyle(t,null).getPropertyValue(n==="width"?"margin-left":"margin-bottom")):t.offsetWidth}let j0;function yH(){const t=ai(),n=Ec();return{smoothScroll:n.documentElement&&n.documentElement.style&&"scrollBehavior"in n.documentElement.style,touch:!!("ontouchstart"in t||t.DocumentTouch&&n instanceof t.DocumentTouch)}}function AD(){return j0||(j0=yH()),j0}let V0;function bH(t){let{userAgent:n}=t===void 0?{}:t;const e=AD(),r=ai(),i=r.navigator.platform,o=n||r.navigator.userAgent,a={ios:!1,android:!1},s=r.screen.width,u=r.screen.height,l=o.match(/(Android);?[\s\/]+([\d.]+)?/);let c=o.match(/(iPad).*OS\s([\d_]+)/);const d=o.match(/(iPod)(.*OS\s([\d_]+))?/),f=!c&&o.match(/(iPhone\sOS|iOS)\s([\d_]+)/),p=i==="Win32";let h=i==="MacIntel";const v=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!c&&h&&e.touch&&v.indexOf(`${s}x${u}`)>=0&&(c=o.match(/(Version)\/([\d.]+)/),c||(c=[0,1,"13_0_0"]),h=!1),l&&!p&&(a.os="android",a.android=!0),(c||f||d)&&(a.os="ios",a.ios=!0),a}function wH(t){return t===void 0&&(t={}),V0||(V0=bH(t)),V0}let $0;function xH(){const t=ai();let n=!1;function e(){const r=t.navigator.userAgent.toLowerCase();return r.indexOf("safari")>=0&&r.indexOf("chrome")<0&&r.indexOf("android")<0}if(e()){const r=String(t.navigator.userAgent);if(r.includes("Version/")){const[i,o]=r.split("Version/")[1].split(" ")[0].split(".").map(a=>Number(a));n=i<16||i===16&&o<2}}return{isSafari:n||e(),needPerspectiveFix:n,isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(t.navigator.userAgent)}}function SH(){return $0||($0=xH()),$0}function EH(t){let{swiper:n,on:e,emit:r}=t;const i=ai();let o=null,a=null;const s=()=>{!n||n.destroyed||!n.initialized||(r("beforeResize"),r("resize"))},u=()=>{!n||n.destroyed||!n.initialized||(o=new ResizeObserver(d=>{a=i.requestAnimationFrame(()=>{const{width:f,height:p}=n;let h=f,v=p;d.forEach(g=>{let{contentBoxSize:m,contentRect:y,target:b}=g;b&&b!==n.el||(h=y?y.width:(m[0]||m).inlineSize,v=y?y.height:(m[0]||m).blockSize)}),(h!==f||v!==p)&&s()})}),o.observe(n.el))},l=()=>{a&&i.cancelAnimationFrame(a),o&&o.unobserve&&n.el&&(o.unobserve(n.el),o=null)},c=()=>{!n||n.destroyed||!n.initialized||r("orientationchange")};e("init",()=>{if(n.params.resizeObserver&&typeof i.ResizeObserver<"u"){u();return}i.addEventListener("resize",s),i.addEventListener("orientationchange",c)}),e("destroy",()=>{l(),i.removeEventListener("resize",s),i.removeEventListener("orientationchange",c)})}function CH(t){let{swiper:n,extendParams:e,on:r,emit:i}=t;const o=[],a=ai(),s=function(c,d){d===void 0&&(d={});const f=a.MutationObserver||a.WebkitMutationObserver,p=new f(h=>{if(n.__preventObserver__)return;if(h.length===1){i("observerUpdate",h[0]);return}const v=function(){i("observerUpdate",h[0])};a.requestAnimationFrame?a.requestAnimationFrame(v):a.setTimeout(v,0)});p.observe(c,{attributes:typeof d.attributes>"u"?!0:d.attributes,childList:typeof d.childList>"u"?!0:d.childList,characterData:typeof d.characterData>"u"?!0:d.characterData}),o.push(p)},u=()=>{if(n.params.observer){if(n.params.observeParents){const c=gH(n.hostEl);for(let d=0;d<c.length;d+=1)s(c[d])}s(n.hostEl,{childList:n.params.observeSlideChildren}),s(n.wrapperEl,{attributes:!1})}},l=()=>{o.forEach(c=>{c.disconnect()}),o.splice(0,o.length)};e({observer:!1,observeParents:!1,observeSlideChildren:!1}),r("init",u),r("destroy",l)}var RH={on(t,n,e){const r=this;if(!r.eventsListeners||r.destroyed||typeof n!="function")return r;const i=e?"unshift":"push";return t.split(" ").forEach(o=>{r.eventsListeners[o]||(r.eventsListeners[o]=[]),r.eventsListeners[o][i](n)}),r},once(t,n,e){const r=this;if(!r.eventsListeners||r.destroyed||typeof n!="function")return r;function i(){r.off(t,i),i.__emitterProxy&&delete i.__emitterProxy;for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];n.apply(r,a)}return i.__emitterProxy=n,r.on(t,i,e)},onAny(t,n){const e=this;if(!e.eventsListeners||e.destroyed||typeof t!="function")return e;const r=n?"unshift":"push";return e.eventsAnyListeners.indexOf(t)<0&&e.eventsAnyListeners[r](t),e},offAny(t){const n=this;if(!n.eventsListeners||n.destroyed||!n.eventsAnyListeners)return n;const e=n.eventsAnyListeners.indexOf(t);return e>=0&&n.eventsAnyListeners.splice(e,1),n},off(t,n){const e=this;return!e.eventsListeners||e.destroyed||!e.eventsListeners||t.split(" ").forEach(r=>{typeof n>"u"?e.eventsListeners[r]=[]:e.eventsListeners[r]&&e.eventsListeners[r].forEach((i,o)=>{(i===n||i.__emitterProxy&&i.__emitterProxy===n)&&e.eventsListeners[r].splice(o,1)})}),e},emit(){const t=this;if(!t.eventsListeners||t.destroyed||!t.eventsListeners)return t;let n,e,r;for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return typeof o[0]=="string"||Array.isArray(o[0])?(n=o[0],e=o.slice(1,o.length),r=t):(n=o[0].events,e=o[0].data,r=o[0].context||t),e.unshift(r),(Array.isArray(n)?n:n.split(" ")).forEach(u=>{t.eventsAnyListeners&&t.eventsAnyListeners.length&&t.eventsAnyListeners.forEach(l=>{l.apply(r,[u,...e])}),t.eventsListeners&&t.eventsListeners[u]&&t.eventsListeners[u].forEach(l=>{l.apply(r,e)})}),t}};function TH(){const t=this;let n,e;const r=t.el;typeof t.params.width<"u"&&t.params.width!==null?n=t.params.width:n=r.clientWidth,typeof t.params.height<"u"&&t.params.height!==null?e=t.params.height:e=r.clientHeight,!(n===0&&t.isHorizontal()||e===0&&t.isVertical())&&(n=n-parseInt(Ma(r,"padding-left")||0,10)-parseInt(Ma(r,"padding-right")||0,10),e=e-parseInt(Ma(r,"padding-top")||0,10)-parseInt(Ma(r,"padding-bottom")||0,10),Number.isNaN(n)&&(n=0),Number.isNaN(e)&&(e=0),Object.assign(t,{width:n,height:e,size:t.isHorizontal()?n:e}))}function NH(){const t=this;function n(k,M){return parseFloat(k.getPropertyValue(t.getDirectionLabel(M))||0)}const e=t.params,{wrapperEl:r,slidesEl:i,size:o,rtlTranslate:a,wrongRTL:s}=t,u=t.virtual&&e.virtual.enabled,l=u?t.virtual.slides.length:t.slides.length,c=Uo(i,`.${t.params.slideClass}, swiper-slide`),d=u?t.virtual.slides.length:c.length;let f=[];const p=[],h=[];let v=e.slidesOffsetBefore;typeof v=="function"&&(v=e.slidesOffsetBefore.call(t));let g=e.slidesOffsetAfter;typeof g=="function"&&(g=e.slidesOffsetAfter.call(t));const m=t.snapGrid.length,y=t.slidesGrid.length;let b=e.spaceBetween,w=-v,x=0,C=0;if(typeof o>"u")return;typeof b=="string"&&b.indexOf("%")>=0?b=parseFloat(b.replace("%",""))/100*o:typeof b=="string"&&(b=parseFloat(b)),t.virtualSize=-b,c.forEach(k=>{a?k.style.marginLeft="":k.style.marginRight="",k.style.marginBottom="",k.style.marginTop=""}),e.centeredSlides&&e.cssMode&&(vh(r,"--swiper-centered-offset-before",""),vh(r,"--swiper-centered-offset-after",""));const E=e.grid&&e.grid.rows>1&&t.grid;E?t.grid.initSlides(c):t.grid&&t.grid.unsetSlides();let S;const N=e.slidesPerView==="auto"&&e.breakpoints&&Object.keys(e.breakpoints).filter(k=>typeof e.breakpoints[k].slidesPerView<"u").length>0;for(let k=0;k<d;k+=1){S=0;let M;if(c[k]&&(M=c[k]),E&&t.grid.updateSlide(k,M,c),!(c[k]&&Ma(M,"display")==="none")){if(e.slidesPerView==="auto"){N&&(c[k].style[t.getDirectionLabel("width")]="");const D=getComputedStyle(M),R=M.style.transform,O=M.style.webkitTransform;if(R&&(M.style.transform="none"),O&&(M.style.webkitTransform="none"),e.roundLengths)S=t.isHorizontal()?RN(M,"width",!0):RN(M,"height",!0);else{const P=n(D,"width"),A=n(D,"padding-left"),I=n(D,"padding-right"),_=n(D,"margin-left"),F=n(D,"margin-right"),L=D.getPropertyValue("box-sizing");if(L&&L==="border-box")S=P+_+F;else{const{clientWidth:W,offsetWidth:B}=M;S=P+A+I+_+F+(B-W)}}R&&(M.style.transform=R),O&&(M.style.webkitTransform=O),e.roundLengths&&(S=Math.floor(S))}else S=(o-(e.slidesPerView-1)*b)/e.slidesPerView,e.roundLengths&&(S=Math.floor(S)),c[k]&&(c[k].style[t.getDirectionLabel("width")]=`${S}px`);c[k]&&(c[k].swiperSlideSize=S),h.push(S),e.centeredSlides?(w=w+S/2+x/2+b,x===0&&k!==0&&(w=w-o/2-b),k===0&&(w=w-o/2-b),Math.abs(w)<1/1e3&&(w=0),e.roundLengths&&(w=Math.floor(w)),C%e.slidesPerGroup===0&&f.push(w),p.push(w)):(e.roundLengths&&(w=Math.floor(w)),(C-Math.min(t.params.slidesPerGroupSkip,C))%t.params.slidesPerGroup===0&&f.push(w),p.push(w),w=w+S+b),t.virtualSize+=S+b,x=S,C+=1}}if(t.virtualSize=Math.max(t.virtualSize,o)+g,a&&s&&(e.effect==="slide"||e.effect==="coverflow")&&(r.style.width=`${t.virtualSize+b}px`),e.setWrapperSize&&(r.style[t.getDirectionLabel("width")]=`${t.virtualSize+b}px`),E&&t.grid.updateWrapperSize(S,f),!e.centeredSlides){const k=[];for(let M=0;M<f.length;M+=1){let D=f[M];e.roundLengths&&(D=Math.floor(D)),f[M]<=t.virtualSize-o&&k.push(D)}f=k,Math.floor(t.virtualSize-o)-Math.floor(f[f.length-1])>1&&f.push(t.virtualSize-o)}if(u&&e.loop){const k=h[0]+b;if(e.slidesPerGroup>1){const M=Math.ceil((t.virtual.slidesBefore+t.virtual.slidesAfter)/e.slidesPerGroup),D=k*e.slidesPerGroup;for(let R=0;R<M;R+=1)f.push(f[f.length-1]+D)}for(let M=0;M<t.virtual.slidesBefore+t.virtual.slidesAfter;M+=1)e.slidesPerGroup===1&&f.push(f[f.length-1]+k),p.push(p[p.length-1]+k),t.virtualSize+=k}if(f.length===0&&(f=[0]),b!==0){const k=t.isHorizontal()&&a?"marginLeft":t.getDirectionLabel("marginRight");c.filter((M,D)=>!e.cssMode||e.loop?!0:D!==c.length-1).forEach(M=>{M.style[k]=`${b}px`})}if(e.centeredSlides&&e.centeredSlidesBounds){let k=0;h.forEach(D=>{k+=D+(b||0)}),k-=b;const M=k-o;f=f.map(D=>D<=0?-v:D>M?M+g:D)}if(e.centerInsufficientSlides){let k=0;if(h.forEach(M=>{k+=M+(b||0)}),k-=b,k<o){const M=(o-k)/2;f.forEach((D,R)=>{f[R]=D-M}),p.forEach((D,R)=>{p[R]=D+M})}}if(Object.assign(t,{slides:c,snapGrid:f,slidesGrid:p,slidesSizesGrid:h}),e.centeredSlides&&e.cssMode&&!e.centeredSlidesBounds){vh(r,"--swiper-centered-offset-before",`${-f[0]}px`),vh(r,"--swiper-centered-offset-after",`${t.size/2-h[h.length-1]/2}px`);const k=-t.snapGrid[0],M=-t.slidesGrid[0];t.snapGrid=t.snapGrid.map(D=>D+k),t.slidesGrid=t.slidesGrid.map(D=>D+M)}if(d!==l&&t.emit("slidesLengthChange"),f.length!==m&&(t.params.watchOverflow&&t.checkOverflow(),t.emit("snapGridLengthChange")),p.length!==y&&t.emit("slidesGridLengthChange"),e.watchSlidesProgress&&t.updateSlidesOffset(),t.emit("slidesUpdated"),!u&&!e.cssMode&&(e.effect==="slide"||e.effect==="fade")){const k=`${e.containerModifierClass}backface-hidden`,M=t.el.classList.contains(k);d<=e.maxBackfaceHiddenSlides?M||t.el.classList.add(k):M&&t.el.classList.remove(k)}}function kH(t){const n=this,e=[],r=n.virtual&&n.params.virtual.enabled;let i=0,o;typeof t=="number"?n.setTransition(t):t===!0&&n.setTransition(n.params.speed);const a=s=>r?n.slides[n.getSlideIndexByData(s)]:n.slides[s];if(n.params.slidesPerView!=="auto"&&n.params.slidesPerView>1)if(n.params.centeredSlides)(n.visibleSlides||[]).forEach(s=>{e.push(s)});else for(o=0;o<Math.ceil(n.params.slidesPerView);o+=1){const s=n.activeIndex+o;if(s>n.slides.length&&!r)break;e.push(a(s))}else e.push(a(n.activeIndex));for(o=0;o<e.length;o+=1)if(typeof e[o]<"u"){const s=e[o].offsetHeight;i=s>i?s:i}(i||i===0)&&(n.wrapperEl.style.height=`${i}px`)}function IH(){const t=this,n=t.slides,e=t.isElement?t.isHorizontal()?t.wrapperEl.offsetLeft:t.wrapperEl.offsetTop:0;for(let r=0;r<n.length;r+=1)n[r].swiperSlideOffset=(t.isHorizontal()?n[r].offsetLeft:n[r].offsetTop)-e-t.cssOverflowAdjustment()}function _H(t){t===void 0&&(t=this&&this.translate||0);const n=this,e=n.params,{slides:r,rtlTranslate:i,snapGrid:o}=n;if(r.length===0)return;typeof r[0].swiperSlideOffset>"u"&&n.updateSlidesOffset();let a=-t;i&&(a=t),r.forEach(u=>{u.classList.remove(e.slideVisibleClass,e.slideFullyVisibleClass)}),n.visibleSlidesIndexes=[],n.visibleSlides=[];let s=e.spaceBetween;typeof s=="string"&&s.indexOf("%")>=0?s=parseFloat(s.replace("%",""))/100*n.size:typeof s=="string"&&(s=parseFloat(s));for(let u=0;u<r.length;u+=1){const l=r[u];let c=l.swiperSlideOffset;e.cssMode&&e.centeredSlides&&(c-=r[0].swiperSlideOffset);const d=(a+(e.centeredSlides?n.minTranslate():0)-c)/(l.swiperSlideSize+s),f=(a-o[0]+(e.centeredSlides?n.minTranslate():0)-c)/(l.swiperSlideSize+s),p=-(a-c),h=p+n.slidesSizesGrid[u],v=p>=0&&p<=n.size-n.slidesSizesGrid[u];(p>=0&&p<n.size-1||h>1&&h<=n.size||p<=0&&h>=n.size)&&(n.visibleSlides.push(l),n.visibleSlidesIndexes.push(u),r[u].classList.add(e.slideVisibleClass)),v&&r[u].classList.add(e.slideFullyVisibleClass),l.progress=i?-d:d,l.originalProgress=i?-f:f}}function AH(t){const n=this;if(typeof t>"u"){const c=n.rtlTranslate?-1:1;t=n&&n.translate&&n.translate*c||0}const e=n.params,r=n.maxTranslate()-n.minTranslate();let{progress:i,isBeginning:o,isEnd:a,progressLoop:s}=n;const u=o,l=a;if(r===0)i=0,o=!0,a=!0;else{i=(t-n.minTranslate())/r;const c=Math.abs(t-n.minTranslate())<1,d=Math.abs(t-n.maxTranslate())<1;o=c||i<=0,a=d||i>=1,c&&(i=0),d&&(i=1)}if(e.loop){const c=n.getSlideIndexByData(0),d=n.getSlideIndexByData(n.slides.length-1),f=n.slidesGrid[c],p=n.slidesGrid[d],h=n.slidesGrid[n.slidesGrid.length-1],v=Math.abs(t);v>=f?s=(v-f)/h:s=(v+h-p)/h,s>1&&(s-=1)}Object.assign(n,{progress:i,progressLoop:s,isBeginning:o,isEnd:a}),(e.watchSlidesProgress||e.centeredSlides&&e.autoHeight)&&n.updateSlidesProgress(t),o&&!u&&n.emit("reachBeginning toEdge"),a&&!l&&n.emit("reachEnd toEdge"),(u&&!o||l&&!a)&&n.emit("fromEdge"),n.emit("progress",i)}function OH(){const t=this,{slides:n,params:e,slidesEl:r,activeIndex:i}=t,o=t.virtual&&e.virtual.enabled,a=t.grid&&e.grid&&e.grid.rows>1,s=d=>Uo(r,`.${e.slideClass}${d}, swiper-slide${d}`)[0];n.forEach(d=>{d.classList.remove(e.slideActiveClass,e.slideNextClass,e.slidePrevClass)});let u,l,c;if(o)if(e.loop){let d=i-t.virtual.slidesBefore;d<0&&(d=t.virtual.slides.length+d),d>=t.virtual.slides.length&&(d-=t.virtual.slides.length),u=s(`[data-swiper-slide-index="${d}"]`)}else u=s(`[data-swiper-slide-index="${i}"]`);else a?(u=n.filter(d=>d.column===i)[0],c=n.filter(d=>d.column===i+1)[0],l=n.filter(d=>d.column===i-1)[0]):u=n[i];u&&(u.classList.add(e.slideActiveClass),a?(c&&c.classList.add(e.slideNextClass),l&&l.classList.add(e.slidePrevClass)):(c=vH(u,`.${e.slideClass}, swiper-slide`)[0],e.loop&&!c&&(c=n[0]),c&&c.classList.add(e.slideNextClass),l=mH(u,`.${e.slideClass}, swiper-slide`)[0],e.loop&&!l===0&&(l=n[n.length-1]),l&&l.classList.add(e.slidePrevClass))),t.emitSlidesClasses()}const um=(t,n)=>{if(!t||t.destroyed||!t.params)return;const e=()=>t.isElement?"swiper-slide":`.${t.params.slideClass}`,r=n.closest(e());if(r){let i=r.querySelector(`.${t.params.lazyPreloaderClass}`);!i&&t.isElement&&(r.shadowRoot?i=r.shadowRoot.querySelector(`.${t.params.lazyPreloaderClass}`):requestAnimationFrame(()=>{r.shadowRoot&&(i=r.shadowRoot.querySelector(`.${t.params.lazyPreloaderClass}`),i&&i.remove())})),i&&i.remove()}},U0=(t,n)=>{if(!t.slides[n])return;const e=t.slides[n].querySelector('[loading="lazy"]');e&&e.removeAttribute("loading")},ow=t=>{if(!t||t.destroyed||!t.params)return;let n=t.params.lazyPreloadPrevNext;const e=t.slides.length;if(!e||!n||n<0)return;n=Math.min(n,e);const r=t.params.slidesPerView==="auto"?t.slidesPerViewDynamic():Math.ceil(t.params.slidesPerView),i=t.activeIndex;if(t.params.grid&&t.params.grid.rows>1){const a=i,s=[a-n];s.push(...Array.from({length:n}).map((u,l)=>a+r+l)),t.slides.forEach((u,l)=>{s.includes(u.column)&&U0(t,l)});return}const o=i+r-1;if(t.params.rewind||t.params.loop)for(let a=i-n;a<=o+n;a+=1){const s=(a%e+e)%e;(s<i||s>o)&&U0(t,s)}else for(let a=Math.max(i-n,0);a<=Math.min(o+n,e-1);a+=1)a!==i&&(a>o||a<i)&&U0(t,a)};function DH(t){const{slidesGrid:n,params:e}=t,r=t.rtlTranslate?t.translate:-t.translate;let i;for(let o=0;o<n.length;o+=1)typeof n[o+1]<"u"?r>=n[o]&&r<n[o+1]-(n[o+1]-n[o])/2?i=o:r>=n[o]&&r<n[o+1]&&(i=o+1):r>=n[o]&&(i=o);return e.normalizeSlideIndex&&(i<0||typeof i>"u")&&(i=0),i}function MH(t){const n=this,e=n.rtlTranslate?n.translate:-n.translate,{snapGrid:r,params:i,activeIndex:o,realIndex:a,snapIndex:s}=n;let u=t,l;const c=p=>{let h=p-n.virtual.slidesBefore;return h<0&&(h=n.virtual.slides.length+h),h>=n.virtual.slides.length&&(h-=n.virtual.slides.length),h};if(typeof u>"u"&&(u=DH(n)),r.indexOf(e)>=0)l=r.indexOf(e);else{const p=Math.min(i.slidesPerGroupSkip,u);l=p+Math.floor((u-p)/i.slidesPerGroup)}if(l>=r.length&&(l=r.length-1),u===o&&!n.params.loop){l!==s&&(n.snapIndex=l,n.emit("snapIndexChange"));return}if(u===o&&n.params.loop&&n.virtual&&n.params.virtual.enabled){n.realIndex=c(u);return}const d=n.grid&&i.grid&&i.grid.rows>1;let f;if(n.virtual&&i.virtual.enabled&&i.loop)f=c(u);else if(d){const p=n.slides.filter(v=>v.column===u)[0];let h=parseInt(p.getAttribute("data-swiper-slide-index"),10);Number.isNaN(h)&&(h=Math.max(n.slides.indexOf(p),0)),f=Math.floor(h/i.grid.rows)}else if(n.slides[u]){const p=n.slides[u].getAttribute("data-swiper-slide-index");p?f=parseInt(p,10):f=u}else f=u;Object.assign(n,{previousSnapIndex:s,snapIndex:l,previousRealIndex:a,realIndex:f,previousIndex:o,activeIndex:u}),n.initialized&&ow(n),n.emit("activeIndexChange"),n.emit("snapIndexChange"),(n.initialized||n.params.runCallbacksOnInit)&&(a!==f&&n.emit("realIndexChange"),n.emit("slideChange"))}function PH(t,n){const e=this,r=e.params;let i=t.closest(`.${r.slideClass}, swiper-slide`);!i&&e.isElement&&n&&n.length>1&&n.includes(t)&&[...n.slice(n.indexOf(t)+1,n.length)].forEach(s=>{!i&&s.matches&&s.matches(`.${r.slideClass}, swiper-slide`)&&(i=s)});let o=!1,a;if(i){for(let s=0;s<e.slides.length;s+=1)if(e.slides[s]===i){o=!0,a=s;break}}if(i&&o)e.clickedSlide=i,e.virtual&&e.params.virtual.enabled?e.clickedIndex=parseInt(i.getAttribute("data-swiper-slide-index"),10):e.clickedIndex=a;else{e.clickedSlide=void 0,e.clickedIndex=void 0;return}r.slideToClickedSlide&&e.clickedIndex!==void 0&&e.clickedIndex!==e.activeIndex&&e.slideToClickedSlide()}var LH={updateSize:TH,updateSlides:NH,updateAutoHeight:kH,updateSlidesOffset:IH,updateSlidesProgress:_H,updateProgress:AH,updateSlidesClasses:OH,updateActiveIndex:MH,updateClickedSlide:PH};function FH(t){t===void 0&&(t=this.isHorizontal()?"x":"y");const n=this,{params:e,rtlTranslate:r,translate:i,wrapperEl:o}=n;if(e.virtualTranslate)return r?-i:i;if(e.cssMode)return i;let a=pH(o,t);return a+=n.cssOverflowAdjustment(),r&&(a=-a),a||0}function zH(t,n){const e=this,{rtlTranslate:r,params:i,wrapperEl:o,progress:a}=e;let s=0,u=0;const l=0;e.isHorizontal()?s=r?-t:t:u=t,i.roundLengths&&(s=Math.floor(s),u=Math.floor(u)),e.previousTranslate=e.translate,e.translate=e.isHorizontal()?s:u,i.cssMode?o[e.isHorizontal()?"scrollLeft":"scrollTop"]=e.isHorizontal()?-s:-u:i.virtualTranslate||(e.isHorizontal()?s-=e.cssOverflowAdjustment():u-=e.cssOverflowAdjustment(),o.style.transform=`translate3d(${s}px, ${u}px, ${l}px)`);let c;const d=e.maxTranslate()-e.minTranslate();d===0?c=0:c=(t-e.minTranslate())/d,c!==a&&e.updateProgress(t),e.emit("setTranslate",e.translate,n)}function BH(){return-this.snapGrid[0]}function jH(){return-this.snapGrid[this.snapGrid.length-1]}function VH(t,n,e,r,i){t===void 0&&(t=0),n===void 0&&(n=this.params.speed),e===void 0&&(e=!0),r===void 0&&(r=!0);const o=this,{params:a,wrapperEl:s}=o;if(o.animating&&a.preventInteractionOnTransition)return!1;const u=o.minTranslate(),l=o.maxTranslate();let c;if(r&&t>u?c=u:r&&t<l?c=l:c=t,o.updateProgress(c),a.cssMode){const d=o.isHorizontal();if(n===0)s[d?"scrollLeft":"scrollTop"]=-c;else{if(!o.support.smoothScroll)return _D({swiper:o,targetPosition:-c,side:d?"left":"top"}),!0;s.scrollTo({[d?"left":"top"]:-c,behavior:"smooth"})}return!0}return n===0?(o.setTransition(0),o.setTranslate(c),e&&(o.emit("beforeTransitionStart",n,i),o.emit("transitionEnd"))):(o.setTransition(n),o.setTranslate(c),e&&(o.emit("beforeTransitionStart",n,i),o.emit("transitionStart")),o.animating||(o.animating=!0,o.onTranslateToWrapperTransitionEnd||(o.onTranslateToWrapperTransitionEnd=function(f){!o||o.destroyed||f.target===this&&(o.wrapperEl.removeEventListener("transitionend",o.onTranslateToWrapperTransitionEnd),o.onTranslateToWrapperTransitionEnd=null,delete o.onTranslateToWrapperTransitionEnd,e&&o.emit("transitionEnd"))}),o.wrapperEl.addEventListener("transitionend",o.onTranslateToWrapperTransitionEnd))),!0}var $H={getTranslate:FH,setTranslate:zH,minTranslate:BH,maxTranslate:jH,translateTo:VH};function UH(t,n){const e=this;e.params.cssMode||(e.wrapperEl.style.transitionDuration=`${t}ms`,e.wrapperEl.style.transitionDelay=t===0?"0ms":""),e.emit("setTransition",t,n)}function OD(t){let{swiper:n,runCallbacks:e,direction:r,step:i}=t;const{activeIndex:o,previousIndex:a}=n;let s=r;if(s||(o>a?s="next":o<a?s="prev":s="reset"),n.emit(`transition${i}`),e&&o!==a){if(s==="reset"){n.emit(`slideResetTransition${i}`);return}n.emit(`slideChangeTransition${i}`),s==="next"?n.emit(`slideNextTransition${i}`):n.emit(`slidePrevTransition${i}`)}}function WH(t,n){t===void 0&&(t=!0);const e=this,{params:r}=e;r.cssMode||(r.autoHeight&&e.updateAutoHeight(),OD({swiper:e,runCallbacks:t,direction:n,step:"Start"}))}function HH(t,n){t===void 0&&(t=!0);const e=this,{params:r}=e;e.animating=!1,!r.cssMode&&(e.setTransition(0),OD({swiper:e,runCallbacks:t,direction:n,step:"End"}))}var GH={setTransition:UH,transitionStart:WH,transitionEnd:HH};function qH(t,n,e,r,i){t===void 0&&(t=0),n===void 0&&(n=this.params.speed),e===void 0&&(e=!0),typeof t=="string"&&(t=parseInt(t,10));const o=this;let a=t;a<0&&(a=0);const{params:s,snapGrid:u,slidesGrid:l,previousIndex:c,activeIndex:d,rtlTranslate:f,wrapperEl:p,enabled:h}=o;if(o.animating&&s.preventInteractionOnTransition||!h&&!r&&!i)return!1;const v=Math.min(o.params.slidesPerGroupSkip,a);let g=v+Math.floor((a-v)/o.params.slidesPerGroup);g>=u.length&&(g=u.length-1);const m=-u[g];if(s.normalizeSlideIndex)for(let b=0;b<l.length;b+=1){const w=-Math.floor(m*100),x=Math.floor(l[b]*100),C=Math.floor(l[b+1]*100);typeof l[b+1]<"u"?w>=x&&w<C-(C-x)/2?a=b:w>=x&&w<C&&(a=b+1):w>=x&&(a=b)}if(o.initialized&&a!==d&&(!o.allowSlideNext&&(f?m>o.translate&&m>o.minTranslate():m<o.translate&&m<o.minTranslate())||!o.allowSlidePrev&&m>o.translate&&m>o.maxTranslate()&&(d||0)!==a))return!1;a!==(c||0)&&e&&o.emit("beforeSlideChangeStart"),o.updateProgress(m);let y;if(a>d?y="next":a<d?y="prev":y="reset",f&&-m===o.translate||!f&&m===o.translate)return o.updateActiveIndex(a),s.autoHeight&&o.updateAutoHeight(),o.updateSlidesClasses(),s.effect!=="slide"&&o.setTranslate(m),y!=="reset"&&(o.transitionStart(e,y),o.transitionEnd(e,y)),!1;if(s.cssMode){const b=o.isHorizontal(),w=f?m:-m;if(n===0){const x=o.virtual&&o.params.virtual.enabled;x&&(o.wrapperEl.style.scrollSnapType="none",o._immediateVirtual=!0),x&&!o._cssModeVirtualInitialSet&&o.params.initialSlide>0?(o._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{p[b?"scrollLeft":"scrollTop"]=w})):p[b?"scrollLeft":"scrollTop"]=w,x&&requestAnimationFrame(()=>{o.wrapperEl.style.scrollSnapType="",o._immediateVirtual=!1})}else{if(!o.support.smoothScroll)return _D({swiper:o,targetPosition:w,side:b?"left":"top"}),!0;p.scrollTo({[b?"left":"top"]:w,behavior:"smooth"})}return!0}return o.setTransition(n),o.setTranslate(m),o.updateActiveIndex(a),o.updateSlidesClasses(),o.emit("beforeTransitionStart",n,r),o.transitionStart(e,y),n===0?o.transitionEnd(e,y):o.animating||(o.animating=!0,o.onSlideToWrapperTransitionEnd||(o.onSlideToWrapperTransitionEnd=function(w){!o||o.destroyed||w.target===this&&(o.wrapperEl.removeEventListener("transitionend",o.onSlideToWrapperTransitionEnd),o.onSlideToWrapperTransitionEnd=null,delete o.onSlideToWrapperTransitionEnd,o.transitionEnd(e,y))}),o.wrapperEl.addEventListener("transitionend",o.onSlideToWrapperTransitionEnd)),!0}function KH(t,n,e,r){t===void 0&&(t=0),n===void 0&&(n=this.params.speed),e===void 0&&(e=!0),typeof t=="string"&&(t=parseInt(t,10));const i=this,o=i.grid&&i.params.grid&&i.params.grid.rows>1;let a=t;if(i.params.loop)if(i.virtual&&i.params.virtual.enabled)a=a+i.virtual.slidesBefore;else{let s;if(o){const f=a*i.params.grid.rows;s=i.slides.filter(p=>p.getAttribute("data-swiper-slide-index")*1===f)[0].column}else s=i.getSlideIndexByData(a);const u=o?Math.ceil(i.slides.length/i.params.grid.rows):i.slides.length,{centeredSlides:l}=i.params;let c=i.params.slidesPerView;c==="auto"?c=i.slidesPerViewDynamic():(c=Math.ceil(parseFloat(i.params.slidesPerView,10)),l&&c%2===0&&(c=c+1));let d=u-s<c;if(l&&(d=d||s<Math.ceil(c/2)),d){const f=l?s<i.activeIndex?"prev":"next":s-i.activeIndex-1<i.params.slidesPerView?"next":"prev";i.loopFix({direction:f,slideTo:!0,activeSlideIndex:f==="next"?s+1:s-u+1,slideRealIndex:f==="next"?i.realIndex:void 0})}if(o){const f=a*i.params.grid.rows;a=i.slides.filter(p=>p.getAttribute("data-swiper-slide-index")*1===f)[0].column}else a=i.getSlideIndexByData(a)}return requestAnimationFrame(()=>{i.slideTo(a,n,e,r)}),i}function XH(t,n,e){t===void 0&&(t=this.params.speed),n===void 0&&(n=!0);const r=this,{enabled:i,params:o,animating:a}=r;if(!i)return r;let s=o.slidesPerGroup;o.slidesPerView==="auto"&&o.slidesPerGroup===1&&o.slidesPerGroupAuto&&(s=Math.max(r.slidesPerViewDynamic("current",!0),1));const u=r.activeIndex<o.slidesPerGroupSkip?1:s,l=r.virtual&&o.virtual.enabled;if(o.loop){if(a&&!l&&o.loopPreventsSliding)return!1;if(r.loopFix({direction:"next"}),r._clientLeft=r.wrapperEl.clientLeft,r.activeIndex===r.slides.length-1&&o.cssMode)return requestAnimationFrame(()=>{r.slideTo(r.activeIndex+u,t,n,e)}),!0}return o.rewind&&r.isEnd?r.slideTo(0,t,n,e):r.slideTo(r.activeIndex+u,t,n,e)}function YH(t,n,e){t===void 0&&(t=this.params.speed),n===void 0&&(n=!0);const r=this,{params:i,snapGrid:o,slidesGrid:a,rtlTranslate:s,enabled:u,animating:l}=r;if(!u)return r;const c=r.virtual&&i.virtual.enabled;if(i.loop){if(l&&!c&&i.loopPreventsSliding)return!1;r.loopFix({direction:"prev"}),r._clientLeft=r.wrapperEl.clientLeft}const d=s?r.translate:-r.translate;function f(m){return m<0?-Math.floor(Math.abs(m)):Math.floor(m)}const p=f(d),h=o.map(m=>f(m));let v=o[h.indexOf(p)-1];if(typeof v>"u"&&i.cssMode){let m;o.forEach((y,b)=>{p>=y&&(m=b)}),typeof m<"u"&&(v=o[m>0?m-1:m])}let g=0;if(typeof v<"u"&&(g=a.indexOf(v),g<0&&(g=r.activeIndex-1),i.slidesPerView==="auto"&&i.slidesPerGroup===1&&i.slidesPerGroupAuto&&(g=g-r.slidesPerViewDynamic("previous",!0)+1,g=Math.max(g,0))),i.rewind&&r.isBeginning){const m=r.params.virtual&&r.params.virtual.enabled&&r.virtual?r.virtual.slides.length-1:r.slides.length-1;return r.slideTo(m,t,n,e)}else if(i.loop&&r.activeIndex===0&&i.cssMode)return requestAnimationFrame(()=>{r.slideTo(g,t,n,e)}),!0;return r.slideTo(g,t,n,e)}function JH(t,n,e){t===void 0&&(t=this.params.speed),n===void 0&&(n=!0);const r=this;return r.slideTo(r.activeIndex,t,n,e)}function QH(t,n,e,r){t===void 0&&(t=this.params.speed),n===void 0&&(n=!0),r===void 0&&(r=.5);const i=this;let o=i.activeIndex;const a=Math.min(i.params.slidesPerGroupSkip,o),s=a+Math.floor((o-a)/i.params.slidesPerGroup),u=i.rtlTranslate?i.translate:-i.translate;if(u>=i.snapGrid[s]){const l=i.snapGrid[s],c=i.snapGrid[s+1];u-l>(c-l)*r&&(o+=i.params.slidesPerGroup)}else{const l=i.snapGrid[s-1],c=i.snapGrid[s];u-l<=(c-l)*r&&(o-=i.params.slidesPerGroup)}return o=Math.max(o,0),o=Math.min(o,i.slidesGrid.length-1),i.slideTo(o,t,n,e)}function ZH(){const t=this,{params:n,slidesEl:e}=t,r=n.slidesPerView==="auto"?t.slidesPerViewDynamic():n.slidesPerView;let i=t.clickedIndex,o;const a=t.isElement?"swiper-slide":`.${n.slideClass}`;if(n.loop){if(t.animating)return;o=parseInt(t.clickedSlide.getAttribute("data-swiper-slide-index"),10),n.centeredSlides?i<t.loopedSlides-r/2||i>t.slides.length-t.loopedSlides+r/2?(t.loopFix(),i=t.getSlideIndex(Uo(e,`${a}[data-swiper-slide-index="${o}"]`)[0]),iw(()=>{t.slideTo(i)})):t.slideTo(i):i>t.slides.length-r?(t.loopFix(),i=t.getSlideIndex(Uo(e,`${a}[data-swiper-slide-index="${o}"]`)[0]),iw(()=>{t.slideTo(i)})):t.slideTo(i)}else t.slideTo(i)}var e9={slideTo:qH,slideToLoop:KH,slideNext:XH,slidePrev:YH,slideReset:JH,slideToClosest:QH,slideToClickedSlide:ZH};function t9(t){const n=this,{params:e,slidesEl:r}=n;if(!e.loop||n.virtual&&n.params.virtual.enabled)return;const i=()=>{Uo(r,`.${e.slideClass}, swiper-slide`).forEach((d,f)=>{d.setAttribute("data-swiper-slide-index",f)})},o=n.grid&&e.grid&&e.grid.rows>1,a=e.slidesPerGroup*(o?e.grid.rows:1),s=n.slides.length%a!==0,u=o&&n.slides.length%e.grid.rows!==0,l=c=>{for(let d=0;d<c;d+=1){const f=n.isElement?av("swiper-slide",[e.slideBlankClass]):av("div",[e.slideClass,e.slideBlankClass]);n.slidesEl.append(f)}};if(s){if(e.loopAddBlankSlides){const c=a-n.slides.length%a;l(c),n.recalcSlides(),n.updateSlides()}else ov("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");i()}else if(u){if(e.loopAddBlankSlides){const c=e.grid.rows-n.slides.length%e.grid.rows;l(c),n.recalcSlides(),n.updateSlides()}else ov("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");i()}else i();n.loopFix({slideRealIndex:t,direction:e.centeredSlides?void 0:"next"})}function n9(t){let{slideRealIndex:n,slideTo:e=!0,direction:r,setTranslate:i,activeSlideIndex:o,byController:a,byMousewheel:s}=t===void 0?{}:t;const u=this;if(!u.params.loop)return;u.emit("beforeLoopFix");const{slides:l,allowSlidePrev:c,allowSlideNext:d,slidesEl:f,params:p}=u,{centeredSlides:h}=p;if(u.allowSlidePrev=!0,u.allowSlideNext=!0,u.virtual&&p.virtual.enabled){e&&(!p.centeredSlides&&u.snapIndex===0?u.slideTo(u.virtual.slides.length,0,!1,!0):p.centeredSlides&&u.snapIndex<p.slidesPerView?u.slideTo(u.virtual.slides.length+u.snapIndex,0,!1,!0):u.snapIndex===u.snapGrid.length-1&&u.slideTo(u.virtual.slidesBefore,0,!1,!0)),u.allowSlidePrev=c,u.allowSlideNext=d,u.emit("loopFix");return}let v=p.slidesPerView;v==="auto"?v=u.slidesPerViewDynamic():(v=Math.ceil(parseFloat(p.slidesPerView,10)),h&&v%2===0&&(v=v+1));const g=p.slidesPerGroupAuto?v:p.slidesPerGroup;let m=g;m%g!==0&&(m+=g-m%g),m+=p.loopAdditionalSlides,u.loopedSlides=m;const y=u.grid&&p.grid&&p.grid.rows>1;l.length<v+m?ov("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled and not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):y&&p.grid.fill==="row"&&ov("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`");const b=[],w=[];let x=u.activeIndex;typeof o>"u"?o=u.getSlideIndex(l.filter(R=>R.classList.contains(p.slideActiveClass))[0]):x=o;const C=r==="next"||!r,E=r==="prev"||!r;let S=0,N=0;const k=y?Math.ceil(l.length/p.grid.rows):l.length,D=(y?l[o].column:o)+(h&&typeof i>"u"?-v/2+.5:0);if(D<m){S=Math.max(m-D,g);for(let R=0;R<m-D;R+=1){const O=R-Math.floor(R/k)*k;if(y){const P=k-O-1;for(let A=l.length-1;A>=0;A-=1)l[A].column===P&&b.push(A)}else b.push(k-O-1)}}else if(D+v>k-m){N=Math.max(D-(k-m*2),g);for(let R=0;R<N;R+=1){const O=R-Math.floor(R/k)*k;y?l.forEach((P,A)=>{P.column===O&&w.push(A)}):w.push(O)}}if(u.__preventObserver__=!0,requestAnimationFrame(()=>{u.__preventObserver__=!1}),E&&b.forEach(R=>{l[R].swiperLoopMoveDOM=!0,f.prepend(l[R]),l[R].swiperLoopMoveDOM=!1}),C&&w.forEach(R=>{l[R].swiperLoopMoveDOM=!0,f.append(l[R]),l[R].swiperLoopMoveDOM=!1}),u.recalcSlides(),p.slidesPerView==="auto"?u.updateSlides():y&&(b.length>0&&E||w.length>0&&C)&&u.slides.forEach((R,O)=>{u.grid.updateSlide(O,R,u.slides)}),p.watchSlidesProgress&&u.updateSlidesOffset(),e){if(b.length>0&&E){if(typeof n>"u"){const R=u.slidesGrid[x],P=u.slidesGrid[x+S]-R;s?u.setTranslate(u.translate-P):(u.slideTo(x+S,0,!1,!0),i&&(u.touchEventsData.startTranslate=u.touchEventsData.startTranslate-P,u.touchEventsData.currentTranslate=u.touchEventsData.currentTranslate-P))}else if(i){const R=y?b.length/p.grid.rows:b.length;u.slideTo(u.activeIndex+R,0,!1,!0),u.touchEventsData.currentTranslate=u.translate}}else if(w.length>0&&C)if(typeof n>"u"){const R=u.slidesGrid[x],P=u.slidesGrid[x-N]-R;s?u.setTranslate(u.translate-P):(u.slideTo(x-N,0,!1,!0),i&&(u.touchEventsData.startTranslate=u.touchEventsData.startTranslate-P,u.touchEventsData.currentTranslate=u.touchEventsData.currentTranslate-P))}else{const R=y?w.length/p.grid.rows:w.length;u.slideTo(u.activeIndex-R,0,!1,!0)}}if(u.allowSlidePrev=c,u.allowSlideNext=d,u.controller&&u.controller.control&&!a){const R={slideRealIndex:n,direction:r,setTranslate:i,activeSlideIndex:o,byController:!0};Array.isArray(u.controller.control)?u.controller.control.forEach(O=>{!O.destroyed&&O.params.loop&&O.loopFix({...R,slideTo:O.params.slidesPerView===p.slidesPerView?e:!1})}):u.controller.control instanceof u.constructor&&u.controller.control.params.loop&&u.controller.control.loopFix({...R,slideTo:u.controller.control.params.slidesPerView===p.slidesPerView?e:!1})}u.emit("loopFix")}function r9(){const t=this,{params:n,slidesEl:e}=t;if(!n.loop||t.virtual&&t.params.virtual.enabled)return;t.recalcSlides();const r=[];t.slides.forEach(i=>{const o=typeof i.swiperSlideIndex>"u"?i.getAttribute("data-swiper-slide-index")*1:i.swiperSlideIndex;r[o]=i}),t.slides.forEach(i=>{i.removeAttribute("data-swiper-slide-index")}),r.forEach(i=>{e.append(i)}),t.recalcSlides(),t.slideTo(t.realIndex,0)}var i9={loopCreate:t9,loopFix:n9,loopDestroy:r9};function o9(t){const n=this;if(!n.params.simulateTouch||n.params.watchOverflow&&n.isLocked||n.params.cssMode)return;const e=n.params.touchEventsTarget==="container"?n.el:n.wrapperEl;n.isElement&&(n.__preventObserver__=!0),e.style.cursor="move",e.style.cursor=t?"grabbing":"grab",n.isElement&&requestAnimationFrame(()=>{n.__preventObserver__=!1})}function a9(){const t=this;t.params.watchOverflow&&t.isLocked||t.params.cssMode||(t.isElement&&(t.__preventObserver__=!0),t[t.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",t.isElement&&requestAnimationFrame(()=>{t.__preventObserver__=!1}))}var s9={setGrabCursor:o9,unsetGrabCursor:a9};function u9(t,n){n===void 0&&(n=this);function e(r){if(!r||r===Ec()||r===ai())return null;r.assignedSlot&&(r=r.assignedSlot);const i=r.closest(t);return!i&&!r.getRootNode?null:i||e(r.getRootNode().host)}return e(n)}function TN(t,n,e){const r=ai(),{params:i}=t,o=i.edgeSwipeDetection,a=i.edgeSwipeThreshold;return o&&(e<=a||e>=r.innerWidth-a)?o==="prevent"?(n.preventDefault(),!0):!1:!0}function l9(t){const n=this,e=Ec();let r=t;r.originalEvent&&(r=r.originalEvent);const i=n.touchEventsData;if(r.type==="pointerdown"){if(i.pointerId!==null&&i.pointerId!==r.pointerId)return;i.pointerId=r.pointerId}else r.type==="touchstart"&&r.targetTouches.length===1&&(i.touchId=r.targetTouches[0].identifier);if(r.type==="touchstart"){TN(n,r,r.targetTouches[0].pageX);return}const{params:o,touches:a,enabled:s}=n;if(!s||!o.simulateTouch&&r.pointerType==="mouse"||n.animating&&o.preventInteractionOnTransition)return;!n.animating&&o.cssMode&&o.loop&&n.loopFix();let u=r.target;if(o.touchEventsTarget==="wrapper"&&!n.wrapperEl.contains(u)||"which"in r&&r.which===3||"button"in r&&r.button>0||i.isTouched&&i.isMoved)return;const l=!!o.noSwipingClass&&o.noSwipingClass!=="",c=r.composedPath?r.composedPath():r.path;l&&r.target&&r.target.shadowRoot&&c&&(u=c[0]);const d=o.noSwipingSelector?o.noSwipingSelector:`.${o.noSwipingClass}`,f=!!(r.target&&r.target.shadowRoot);if(o.noSwiping&&(f?u9(d,u):u.closest(d))){n.allowClick=!0;return}if(o.swipeHandler&&!u.closest(o.swipeHandler))return;a.currentX=r.pageX,a.currentY=r.pageY;const p=a.currentX,h=a.currentY;if(!TN(n,r,p))return;Object.assign(i,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),a.startX=p,a.startY=h,i.touchStartTime=iv(),n.allowClick=!0,n.updateSize(),n.swipeDirection=void 0,o.threshold>0&&(i.allowThresholdMove=!1);let v=!0;u.matches(i.focusableElements)&&(v=!1,u.nodeName==="SELECT"&&(i.isTouched=!1)),e.activeElement&&e.activeElement.matches(i.focusableElements)&&e.activeElement!==u&&e.activeElement.blur();const g=v&&n.allowTouchMove&&o.touchStartPreventDefault;(o.touchStartForcePreventDefault||g)&&!u.isContentEditable&&r.preventDefault(),o.freeMode&&o.freeMode.enabled&&n.freeMode&&n.animating&&!o.cssMode&&n.freeMode.onTouchStart(),n.emit("touchStart",r)}function c9(t){const n=Ec(),e=this,r=e.touchEventsData,{params:i,touches:o,rtlTranslate:a,enabled:s}=e;if(!s||!i.simulateTouch&&t.pointerType==="mouse")return;let u=t;if(u.originalEvent&&(u=u.originalEvent),u.type==="pointermove"&&(r.touchId!==null||u.pointerId!==r.pointerId))return;let l;if(u.type==="touchmove"){if(l=[...u.changedTouches].filter(C=>C.identifier===r.touchId)[0],!l||l.identifier!==r.touchId)return}else l=u;if(!r.isTouched){r.startMoving&&r.isScrolling&&e.emit("touchMoveOpposite",u);return}const c=l.pageX,d=l.pageY;if(u.preventedByNestedSwiper){o.startX=c,o.startY=d;return}if(!e.allowTouchMove){u.target.matches(r.focusableElements)||(e.allowClick=!1),r.isTouched&&(Object.assign(o,{startX:c,startY:d,currentX:c,currentY:d}),r.touchStartTime=iv());return}if(i.touchReleaseOnEdges&&!i.loop){if(e.isVertical()){if(d<o.startY&&e.translate<=e.maxTranslate()||d>o.startY&&e.translate>=e.minTranslate()){r.isTouched=!1,r.isMoved=!1;return}}else if(c<o.startX&&e.translate<=e.maxTranslate()||c>o.startX&&e.translate>=e.minTranslate())return}if(n.activeElement&&u.target===n.activeElement&&u.target.matches(r.focusableElements)){r.isMoved=!0,e.allowClick=!1;return}r.allowTouchCallbacks&&e.emit("touchMove",u),o.previousX=o.currentX,o.previousY=o.currentY,o.currentX=c,o.currentY=d;const f=o.currentX-o.startX,p=o.currentY-o.startY;if(e.params.threshold&&Math.sqrt(f**2+p**2)<e.params.threshold)return;if(typeof r.isScrolling>"u"){let C;e.isHorizontal()&&o.currentY===o.startY||e.isVertical()&&o.currentX===o.startX?r.isScrolling=!1:f*f+p*p>=25&&(C=Math.atan2(Math.abs(p),Math.abs(f))*180/Math.PI,r.isScrolling=e.isHorizontal()?C>i.touchAngle:90-C>i.touchAngle)}if(r.isScrolling&&e.emit("touchMoveOpposite",u),typeof r.startMoving>"u"&&(o.currentX!==o.startX||o.currentY!==o.startY)&&(r.startMoving=!0),r.isScrolling){r.isTouched=!1;return}if(!r.startMoving)return;e.allowClick=!1,!i.cssMode&&u.cancelable&&u.preventDefault(),i.touchMoveStopPropagation&&!i.nested&&u.stopPropagation();let h=e.isHorizontal()?f:p,v=e.isHorizontal()?o.currentX-o.previousX:o.currentY-o.previousY;i.oneWayMovement&&(h=Math.abs(h)*(a?1:-1),v=Math.abs(v)*(a?1:-1)),o.diff=h,h*=i.touchRatio,a&&(h=-h,v=-v);const g=e.touchesDirection;e.swipeDirection=h>0?"prev":"next",e.touchesDirection=v>0?"prev":"next";const m=e.params.loop&&!i.cssMode,y=e.touchesDirection==="next"&&e.allowSlideNext||e.touchesDirection==="prev"&&e.allowSlidePrev;if(!r.isMoved){if(m&&y&&e.loopFix({direction:e.swipeDirection}),r.startTranslate=e.getTranslate(),e.setTransition(0),e.animating){const C=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});e.wrapperEl.dispatchEvent(C)}r.allowMomentumBounce=!1,i.grabCursor&&(e.allowSlideNext===!0||e.allowSlidePrev===!0)&&e.setGrabCursor(!0),e.emit("sliderFirstMove",u)}let b;if(new Date().getTime(),r.isMoved&&r.allowThresholdMove&&g!==e.touchesDirection&&m&&y&&Math.abs(h)>=1){Object.assign(o,{startX:c,startY:d,currentX:c,currentY:d,startTranslate:r.currentTranslate}),r.loopSwapReset=!0,r.startTranslate=r.currentTranslate;return}e.emit("sliderMove",u),r.isMoved=!0,r.currentTranslate=h+r.startTranslate;let w=!0,x=i.resistanceRatio;if(i.touchReleaseOnEdges&&(x=0),h>0?(m&&y&&!b&&r.allowThresholdMove&&r.currentTranslate>(i.centeredSlides?e.minTranslate()-e.slidesSizesGrid[e.activeIndex+1]:e.minTranslate())&&e.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),r.currentTranslate>e.minTranslate()&&(w=!1,i.resistance&&(r.currentTranslate=e.minTranslate()-1+(-e.minTranslate()+r.startTranslate+h)**x))):h<0&&(m&&y&&!b&&r.allowThresholdMove&&r.currentTranslate<(i.centeredSlides?e.maxTranslate()+e.slidesSizesGrid[e.slidesSizesGrid.length-1]:e.maxTranslate())&&e.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:e.slides.length-(i.slidesPerView==="auto"?e.slidesPerViewDynamic():Math.ceil(parseFloat(i.slidesPerView,10)))}),r.currentTranslate<e.maxTranslate()&&(w=!1,i.resistance&&(r.currentTranslate=e.maxTranslate()+1-(e.maxTranslate()-r.startTranslate-h)**x))),w&&(u.preventedByNestedSwiper=!0),!e.allowSlideNext&&e.swipeDirection==="next"&&r.currentTranslate<r.startTranslate&&(r.currentTranslate=r.startTranslate),!e.allowSlidePrev&&e.swipeDirection==="prev"&&r.currentTranslate>r.startTranslate&&(r.currentTranslate=r.startTranslate),!e.allowSlidePrev&&!e.allowSlideNext&&(r.currentTranslate=r.startTranslate),i.threshold>0)if(Math.abs(h)>i.threshold||r.allowThresholdMove){if(!r.allowThresholdMove){r.allowThresholdMove=!0,o.startX=o.currentX,o.startY=o.currentY,r.currentTranslate=r.startTranslate,o.diff=e.isHorizontal()?o.currentX-o.startX:o.currentY-o.startY;return}}else{r.currentTranslate=r.startTranslate;return}!i.followFinger||i.cssMode||((i.freeMode&&i.freeMode.enabled&&e.freeMode||i.watchSlidesProgress)&&(e.updateActiveIndex(),e.updateSlidesClasses()),i.freeMode&&i.freeMode.enabled&&e.freeMode&&e.freeMode.onTouchMove(),e.updateProgress(r.currentTranslate),e.setTranslate(r.currentTranslate))}function d9(t){const n=this,e=n.touchEventsData;let r=t;r.originalEvent&&(r=r.originalEvent);let i;if(r.type==="touchend"||r.type==="touchcancel"){if(i=[...r.changedTouches].filter(x=>x.identifier===e.touchId)[0],!i||i.identifier!==e.touchId)return}else{if(e.touchId!==null||r.pointerId!==e.pointerId)return;i=r}if(["pointercancel","pointerout","pointerleave","contextmenu"].includes(r.type)&&!(["pointercancel","contextmenu"].includes(r.type)&&(n.browser.isSafari||n.browser.isWebView)))return;e.pointerId=null,e.touchId=null;const{params:a,touches:s,rtlTranslate:u,slidesGrid:l,enabled:c}=n;if(!c||!a.simulateTouch&&r.pointerType==="mouse")return;if(e.allowTouchCallbacks&&n.emit("touchEnd",r),e.allowTouchCallbacks=!1,!e.isTouched){e.isMoved&&a.grabCursor&&n.setGrabCursor(!1),e.isMoved=!1,e.startMoving=!1;return}a.grabCursor&&e.isMoved&&e.isTouched&&(n.allowSlideNext===!0||n.allowSlidePrev===!0)&&n.setGrabCursor(!1);const d=iv(),f=d-e.touchStartTime;if(n.allowClick){const x=r.path||r.composedPath&&r.composedPath();n.updateClickedSlide(x&&x[0]||r.target,x),n.emit("tap click",r),f<300&&d-e.lastClickTime<300&&n.emit("doubleTap doubleClick",r)}if(e.lastClickTime=iv(),iw(()=>{n.destroyed||(n.allowClick=!0)}),!e.isTouched||!e.isMoved||!n.swipeDirection||s.diff===0&&!e.loopSwapReset||e.currentTranslate===e.startTranslate&&!e.loopSwapReset){e.isTouched=!1,e.isMoved=!1,e.startMoving=!1;return}e.isTouched=!1,e.isMoved=!1,e.startMoving=!1;let p;if(a.followFinger?p=u?n.translate:-n.translate:p=-e.currentTranslate,a.cssMode)return;if(a.freeMode&&a.freeMode.enabled){n.freeMode.onTouchEnd({currentPos:p});return}const h=p>=-n.maxTranslate()&&!n.params.loop;let v=0,g=n.slidesSizesGrid[0];for(let x=0;x<l.length;x+=x<a.slidesPerGroupSkip?1:a.slidesPerGroup){const C=x<a.slidesPerGroupSkip-1?1:a.slidesPerGroup;typeof l[x+C]<"u"?(h||p>=l[x]&&p<l[x+C])&&(v=x,g=l[x+C]-l[x]):(h||p>=l[x])&&(v=x,g=l[l.length-1]-l[l.length-2])}let m=null,y=null;a.rewind&&(n.isBeginning?y=a.virtual&&a.virtual.enabled&&n.virtual?n.virtual.slides.length-1:n.slides.length-1:n.isEnd&&(m=0));const b=(p-l[v])/g,w=v<a.slidesPerGroupSkip-1?1:a.slidesPerGroup;if(f>a.longSwipesMs){if(!a.longSwipes){n.slideTo(n.activeIndex);return}n.swipeDirection==="next"&&(b>=a.longSwipesRatio?n.slideTo(a.rewind&&n.isEnd?m:v+w):n.slideTo(v)),n.swipeDirection==="prev"&&(b>1-a.longSwipesRatio?n.slideTo(v+w):y!==null&&b<0&&Math.abs(b)>a.longSwipesRatio?n.slideTo(y):n.slideTo(v))}else{if(!a.shortSwipes){n.slideTo(n.activeIndex);return}n.navigation&&(r.target===n.navigation.nextEl||r.target===n.navigation.prevEl)?r.target===n.navigation.nextEl?n.slideTo(v+w):n.slideTo(v):(n.swipeDirection==="next"&&n.slideTo(m!==null?m:v+w),n.swipeDirection==="prev"&&n.slideTo(y!==null?y:v))}}function NN(){const t=this,{params:n,el:e}=t;if(e&&e.offsetWidth===0)return;n.breakpoints&&t.setBreakpoint();const{allowSlideNext:r,allowSlidePrev:i,snapGrid:o}=t,a=t.virtual&&t.params.virtual.enabled;t.allowSlideNext=!0,t.allowSlidePrev=!0,t.updateSize(),t.updateSlides(),t.updateSlidesClasses();const s=a&&n.loop;(n.slidesPerView==="auto"||n.slidesPerView>1)&&t.isEnd&&!t.isBeginning&&!t.params.centeredSlides&&!s?t.slideTo(t.slides.length-1,0,!1,!0):t.params.loop&&!a?t.slideToLoop(t.realIndex,0,!1,!0):t.slideTo(t.activeIndex,0,!1,!0),t.autoplay&&t.autoplay.running&&t.autoplay.paused&&(clearTimeout(t.autoplay.resizeTimeout),t.autoplay.resizeTimeout=setTimeout(()=>{t.autoplay&&t.autoplay.running&&t.autoplay.paused&&t.autoplay.resume()},500)),t.allowSlidePrev=i,t.allowSlideNext=r,t.params.watchOverflow&&o!==t.snapGrid&&t.checkOverflow()}function f9(t){const n=this;n.enabled&&(n.allowClick||(n.params.preventClicks&&t.preventDefault(),n.params.preventClicksPropagation&&n.animating&&(t.stopPropagation(),t.stopImmediatePropagation())))}function p9(){const t=this,{wrapperEl:n,rtlTranslate:e,enabled:r}=t;if(!r)return;t.previousTranslate=t.translate,t.isHorizontal()?t.translate=-n.scrollLeft:t.translate=-n.scrollTop,t.translate===0&&(t.translate=0),t.updateActiveIndex(),t.updateSlidesClasses();let i;const o=t.maxTranslate()-t.minTranslate();o===0?i=0:i=(t.translate-t.minTranslate())/o,i!==t.progress&&t.updateProgress(e?-t.translate:t.translate),t.emit("setTranslate",t.translate,!1)}function h9(t){const n=this;um(n,t.target),!(n.params.cssMode||n.params.slidesPerView!=="auto"&&!n.params.autoHeight)&&n.update()}function m9(){const t=this;t.documentTouchHandlerProceeded||(t.documentTouchHandlerProceeded=!0,t.params.touchReleaseOnEdges&&(t.el.style.touchAction="auto"))}const DD=(t,n)=>{const e=Ec(),{params:r,el:i,wrapperEl:o,device:a}=t,s=!!r.nested,u=n==="on"?"addEventListener":"removeEventListener",l=n;e[u]("touchstart",t.onDocumentTouchStart,{passive:!1,capture:s}),i[u]("touchstart",t.onTouchStart,{passive:!1}),i[u]("pointerdown",t.onTouchStart,{passive:!1}),e[u]("touchmove",t.onTouchMove,{passive:!1,capture:s}),e[u]("pointermove",t.onTouchMove,{passive:!1,capture:s}),e[u]("touchend",t.onTouchEnd,{passive:!0}),e[u]("pointerup",t.onTouchEnd,{passive:!0}),e[u]("pointercancel",t.onTouchEnd,{passive:!0}),e[u]("touchcancel",t.onTouchEnd,{passive:!0}),e[u]("pointerout",t.onTouchEnd,{passive:!0}),e[u]("pointerleave",t.onTouchEnd,{passive:!0}),e[u]("contextmenu",t.onTouchEnd,{passive:!0}),(r.preventClicks||r.preventClicksPropagation)&&i[u]("click",t.onClick,!0),r.cssMode&&o[u]("scroll",t.onScroll),r.updateOnWindowResize?t[l](a.ios||a.android?"resize orientationchange observerUpdate":"resize observerUpdate",NN,!0):t[l]("observerUpdate",NN,!0),i[u]("load",t.onLoad,{capture:!0})};function v9(){const t=this,{params:n}=t;t.onTouchStart=l9.bind(t),t.onTouchMove=c9.bind(t),t.onTouchEnd=d9.bind(t),t.onDocumentTouchStart=m9.bind(t),n.cssMode&&(t.onScroll=p9.bind(t)),t.onClick=f9.bind(t),t.onLoad=h9.bind(t),DD(t,"on")}function g9(){DD(this,"off")}var y9={attachEvents:v9,detachEvents:g9};const kN=(t,n)=>t.grid&&n.grid&&n.grid.rows>1;function b9(){const t=this,{realIndex:n,initialized:e,params:r,el:i}=t,o=r.breakpoints;if(!o||o&&Object.keys(o).length===0)return;const a=t.getBreakpoint(o,t.params.breakpointsBase,t.el);if(!a||t.currentBreakpoint===a)return;const u=(a in o?o[a]:void 0)||t.originalParams,l=kN(t,r),c=kN(t,u),d=r.enabled;l&&!c?(i.classList.remove(`${r.containerModifierClass}grid`,`${r.containerModifierClass}grid-column`),t.emitContainerClasses()):!l&&c&&(i.classList.add(`${r.containerModifierClass}grid`),(u.grid.fill&&u.grid.fill==="column"||!u.grid.fill&&r.grid.fill==="column")&&i.classList.add(`${r.containerModifierClass}grid-column`),t.emitContainerClasses()),["navigation","pagination","scrollbar"].forEach(m=>{if(typeof u[m]>"u")return;const y=r[m]&&r[m].enabled,b=u[m]&&u[m].enabled;y&&!b&&t[m].disable(),!y&&b&&t[m].enable()});const f=u.direction&&u.direction!==r.direction,p=r.loop&&(u.slidesPerView!==r.slidesPerView||f),h=r.loop;f&&e&&t.changeDirection(),Ur(t.params,u);const v=t.params.enabled,g=t.params.loop;Object.assign(t,{allowTouchMove:t.params.allowTouchMove,allowSlideNext:t.params.allowSlideNext,allowSlidePrev:t.params.allowSlidePrev}),d&&!v?t.disable():!d&&v&&t.enable(),t.currentBreakpoint=a,t.emit("_beforeBreakpoint",u),e&&(p?(t.loopDestroy(),t.loopCreate(n),t.updateSlides()):!h&&g?(t.loopCreate(n),t.updateSlides()):h&&!g&&t.loopDestroy()),t.emit("breakpoint",u)}function w9(t,n,e){if(n===void 0&&(n="window"),!t||n==="container"&&!e)return;let r=!1;const i=ai(),o=n==="window"?i.innerHeight:e.clientHeight,a=Object.keys(t).map(s=>{if(typeof s=="string"&&s.indexOf("@")===0){const u=parseFloat(s.substr(1));return{value:o*u,point:s}}return{value:s,point:s}});a.sort((s,u)=>parseInt(s.value,10)-parseInt(u.value,10));for(let s=0;s<a.length;s+=1){const{point:u,value:l}=a[s];n==="window"?i.matchMedia(`(min-width: ${l}px)`).matches&&(r=u):l<=e.clientWidth&&(r=u)}return r||"max"}var x9={setBreakpoint:b9,getBreakpoint:w9};function S9(t,n){const e=[];return t.forEach(r=>{typeof r=="object"?Object.keys(r).forEach(i=>{r[i]&&e.push(n+i)}):typeof r=="string"&&e.push(n+r)}),e}function E9(){const t=this,{classNames:n,params:e,rtl:r,el:i,device:o}=t,a=S9(["initialized",e.direction,{"free-mode":t.params.freeMode&&e.freeMode.enabled},{autoheight:e.autoHeight},{rtl:r},{grid:e.grid&&e.grid.rows>1},{"grid-column":e.grid&&e.grid.rows>1&&e.grid.fill==="column"},{android:o.android},{ios:o.ios},{"css-mode":e.cssMode},{centered:e.cssMode&&e.centeredSlides},{"watch-progress":e.watchSlidesProgress}],e.containerModifierClass);n.push(...a),i.classList.add(...n),t.emitContainerClasses()}function C9(){const t=this,{el:n,classNames:e}=t;n.classList.remove(...e),t.emitContainerClasses()}var R9={addClasses:E9,removeClasses:C9};function T9(){const t=this,{isLocked:n,params:e}=t,{slidesOffsetBefore:r}=e;if(r){const i=t.slides.length-1,o=t.slidesGrid[i]+t.slidesSizesGrid[i]+r*2;t.isLocked=t.size>o}else t.isLocked=t.snapGrid.length===1;e.allowSlideNext===!0&&(t.allowSlideNext=!t.isLocked),e.allowSlidePrev===!0&&(t.allowSlidePrev=!t.isLocked),n&&n!==t.isLocked&&(t.isEnd=!1),n!==t.isLocked&&t.emit(t.isLocked?"lock":"unlock")}var N9={checkOverflow:T9},aw={init:!0,direction:"horizontal",oneWayMovement:!1,touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function k9(t,n){return function(r){r===void 0&&(r={});const i=Object.keys(r)[0],o=r[i];if(typeof o!="object"||o===null){Ur(n,r);return}if(t[i]===!0&&(t[i]={enabled:!0}),i==="navigation"&&t[i]&&t[i].enabled&&!t[i].prevEl&&!t[i].nextEl&&(t[i].auto=!0),["pagination","scrollbar"].indexOf(i)>=0&&t[i]&&t[i].enabled&&!t[i].el&&(t[i].auto=!0),!(i in t&&"enabled"in o)){Ur(n,r);return}typeof t[i]=="object"&&!("enabled"in t[i])&&(t[i].enabled=!0),t[i]||(t[i]={enabled:!1}),Ur(n,r)}}const W0={eventsEmitter:RH,update:LH,translate:$H,transition:GH,slide:e9,loop:i9,grabCursor:s9,events:y9,breakpoints:x9,checkOverflow:N9,classes:R9},H0={};let BS=class Oo{constructor(){let n,e;for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];i.length===1&&i[0].constructor&&Object.prototype.toString.call(i[0]).slice(8,-1)==="Object"?e=i[0]:[n,e]=i,e||(e={}),e=Ur({},e),n&&!e.el&&(e.el=n);const a=Ec();if(e.el&&typeof e.el=="string"&&a.querySelectorAll(e.el).length>1){const c=[];return a.querySelectorAll(e.el).forEach(d=>{const f=Ur({},e,{el:d});c.push(new Oo(f))}),c}const s=this;s.__swiper__=!0,s.support=AD(),s.device=wH({userAgent:e.userAgent}),s.browser=SH(),s.eventsListeners={},s.eventsAnyListeners=[],s.modules=[...s.__modules__],e.modules&&Array.isArray(e.modules)&&s.modules.push(...e.modules);const u={};s.modules.forEach(c=>{c({params:e,swiper:s,extendParams:k9(e,u),on:s.on.bind(s),once:s.once.bind(s),off:s.off.bind(s),emit:s.emit.bind(s)})});const l=Ur({},aw,u);return s.params=Ur({},l,H0,e),s.originalParams=Ur({},s.params),s.passedParams=Ur({},e),s.params&&s.params.on&&Object.keys(s.params.on).forEach(c=>{s.on(c,s.params.on[c])}),s.params&&s.params.onAny&&s.onAny(s.params.onAny),Object.assign(s,{enabled:s.params.enabled,el:n,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return s.params.direction==="horizontal"},isVertical(){return s.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:s.params.allowSlideNext,allowSlidePrev:s.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:s.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:s.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),s.emit("_swiper"),s.params.init&&s.init(),s}getDirectionLabel(n){return this.isHorizontal()?n:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[n]}getSlideIndex(n){const{slidesEl:e,params:r}=this,i=Uo(e,`.${r.slideClass}, swiper-slide`),o=CN(i[0]);return CN(n)-o}getSlideIndexByData(n){return this.getSlideIndex(this.slides.filter(e=>e.getAttribute("data-swiper-slide-index")*1===n)[0])}recalcSlides(){const n=this,{slidesEl:e,params:r}=n;n.slides=Uo(e,`.${r.slideClass}, swiper-slide`)}enable(){const n=this;n.enabled||(n.enabled=!0,n.params.grabCursor&&n.setGrabCursor(),n.emit("enable"))}disable(){const n=this;n.enabled&&(n.enabled=!1,n.params.grabCursor&&n.unsetGrabCursor(),n.emit("disable"))}setProgress(n,e){const r=this;n=Math.min(Math.max(n,0),1);const i=r.minTranslate(),a=(r.maxTranslate()-i)*n+i;r.translateTo(a,typeof e>"u"?0:e),r.updateActiveIndex(),r.updateSlidesClasses()}emitContainerClasses(){const n=this;if(!n.params._emitClasses||!n.el)return;const e=n.el.className.split(" ").filter(r=>r.indexOf("swiper")===0||r.indexOf(n.params.containerModifierClass)===0);n.emit("_containerClasses",e.join(" "))}getSlideClasses(n){const e=this;return e.destroyed?"":n.className.split(" ").filter(r=>r.indexOf("swiper-slide")===0||r.indexOf(e.params.slideClass)===0).join(" ")}emitSlidesClasses(){const n=this;if(!n.params._emitClasses||!n.el)return;const e=[];n.slides.forEach(r=>{const i=n.getSlideClasses(r);e.push({slideEl:r,classNames:i}),n.emit("_slideClass",r,i)}),n.emit("_slideClasses",e)}slidesPerViewDynamic(n,e){n===void 0&&(n="current"),e===void 0&&(e=!1);const r=this,{params:i,slides:o,slidesGrid:a,slidesSizesGrid:s,size:u,activeIndex:l}=r;let c=1;if(typeof i.slidesPerView=="number")return i.slidesPerView;if(i.centeredSlides){let d=o[l]?o[l].swiperSlideSize:0,f;for(let p=l+1;p<o.length;p+=1)o[p]&&!f&&(d+=o[p].swiperSlideSize,c+=1,d>u&&(f=!0));for(let p=l-1;p>=0;p-=1)o[p]&&!f&&(d+=o[p].swiperSlideSize,c+=1,d>u&&(f=!0))}else if(n==="current")for(let d=l+1;d<o.length;d+=1)(e?a[d]+s[d]-a[l]<u:a[d]-a[l]<u)&&(c+=1);else for(let d=l-1;d>=0;d-=1)a[l]-a[d]<u&&(c+=1);return c}update(){const n=this;if(!n||n.destroyed)return;const{snapGrid:e,params:r}=n;r.breakpoints&&n.setBreakpoint(),[...n.el.querySelectorAll('[loading="lazy"]')].forEach(a=>{a.complete&&um(n,a)}),n.updateSize(),n.updateSlides(),n.updateProgress(),n.updateSlidesClasses();function i(){const a=n.rtlTranslate?n.translate*-1:n.translate,s=Math.min(Math.max(a,n.maxTranslate()),n.minTranslate());n.setTranslate(s),n.updateActiveIndex(),n.updateSlidesClasses()}let o;if(r.freeMode&&r.freeMode.enabled&&!r.cssMode)i(),r.autoHeight&&n.updateAutoHeight();else{if((r.slidesPerView==="auto"||r.slidesPerView>1)&&n.isEnd&&!r.centeredSlides){const a=n.virtual&&r.virtual.enabled?n.virtual.slides:n.slides;o=n.slideTo(a.length-1,0,!1,!0)}else o=n.slideTo(n.activeIndex,0,!1,!0);o||i()}r.watchOverflow&&e!==n.snapGrid&&n.checkOverflow(),n.emit("update")}changeDirection(n,e){e===void 0&&(e=!0);const r=this,i=r.params.direction;return n||(n=i==="horizontal"?"vertical":"horizontal"),n===i||n!=="horizontal"&&n!=="vertical"||(r.el.classList.remove(`${r.params.containerModifierClass}${i}`),r.el.classList.add(`${r.params.containerModifierClass}${n}`),r.emitContainerClasses(),r.params.direction=n,r.slides.forEach(o=>{n==="vertical"?o.style.width="":o.style.height=""}),r.emit("changeDirection"),e&&r.update()),r}changeLanguageDirection(n){const e=this;e.rtl&&n==="rtl"||!e.rtl&&n==="ltr"||(e.rtl=n==="rtl",e.rtlTranslate=e.params.direction==="horizontal"&&e.rtl,e.rtl?(e.el.classList.add(`${e.params.containerModifierClass}rtl`),e.el.dir="rtl"):(e.el.classList.remove(`${e.params.containerModifierClass}rtl`),e.el.dir="ltr"),e.update())}mount(n){const e=this;if(e.mounted)return!0;let r=n||e.params.el;if(typeof r=="string"&&(r=document.querySelector(r)),!r)return!1;r.swiper=e,r.parentNode&&r.parentNode.host&&r.parentNode.host.nodeName==="SWIPER-CONTAINER"&&(e.isElement=!0);const i=()=>`.${(e.params.wrapperClass||"").trim().split(" ").join(".")}`;let a=r&&r.shadowRoot&&r.shadowRoot.querySelector?r.shadowRoot.querySelector(i()):Uo(r,i())[0];return!a&&e.params.createElements&&(a=av("div",e.params.wrapperClass),r.append(a),Uo(r,`.${e.params.slideClass}`).forEach(s=>{a.append(s)})),Object.assign(e,{el:r,wrapperEl:a,slidesEl:e.isElement&&!r.parentNode.host.slideSlots?r.parentNode.host:a,hostEl:e.isElement?r.parentNode.host:r,mounted:!0,rtl:r.dir.toLowerCase()==="rtl"||Ma(r,"direction")==="rtl",rtlTranslate:e.params.direction==="horizontal"&&(r.dir.toLowerCase()==="rtl"||Ma(r,"direction")==="rtl"),wrongRTL:Ma(a,"display")==="-webkit-box"}),!0}init(n){const e=this;if(e.initialized||e.mount(n)===!1)return e;e.emit("beforeInit"),e.params.breakpoints&&e.setBreakpoint(),e.addClasses(),e.updateSize(),e.updateSlides(),e.params.watchOverflow&&e.checkOverflow(),e.params.grabCursor&&e.enabled&&e.setGrabCursor(),e.params.loop&&e.virtual&&e.params.virtual.enabled?e.slideTo(e.params.initialSlide+e.virtual.slidesBefore,0,e.params.runCallbacksOnInit,!1,!0):e.slideTo(e.params.initialSlide,0,e.params.runCallbacksOnInit,!1,!0),e.params.loop&&e.loopCreate(),e.attachEvents();const i=[...e.el.querySelectorAll('[loading="lazy"]')];return e.isElement&&i.push(...e.hostEl.querySelectorAll('[loading="lazy"]')),i.forEach(o=>{o.complete?um(e,o):o.addEventListener("load",a=>{um(e,a.target)})}),ow(e),e.initialized=!0,ow(e),e.emit("init"),e.emit("afterInit"),e}destroy(n,e){n===void 0&&(n=!0),e===void 0&&(e=!0);const r=this,{params:i,el:o,wrapperEl:a,slides:s}=r;return typeof r.params>"u"||r.destroyed||(r.emit("beforeDestroy"),r.initialized=!1,r.detachEvents(),i.loop&&r.loopDestroy(),e&&(r.removeClasses(),o.removeAttribute("style"),a.removeAttribute("style"),s&&s.length&&s.forEach(u=>{u.classList.remove(i.slideVisibleClass,i.slideFullyVisibleClass,i.slideActiveClass,i.slideNextClass,i.slidePrevClass),u.removeAttribute("style"),u.removeAttribute("data-swiper-slide-index")})),r.emit("destroy"),Object.keys(r.eventsListeners).forEach(u=>{r.off(u)}),n!==!1&&(r.el.swiper=null,dH(r)),r.destroyed=!0),null}static extendDefaults(n){Ur(H0,n)}static get extendedDefaults(){return H0}static get defaults(){return aw}static installModule(n){Oo.prototype.__modules__||(Oo.prototype.__modules__=[]);const e=Oo.prototype.__modules__;typeof n=="function"&&e.indexOf(n)<0&&e.push(n)}static use(n){return Array.isArray(n)?(n.forEach(e=>Oo.installModule(e)),Oo):(Oo.installModule(n),Oo)}};Object.keys(W0).forEach(t=>{Object.keys(W0[t]).forEach(n=>{BS.prototype[n]=W0[t][n]})});BS.use([EH,CH]);const MD=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","breakpointsBase","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopAdditionalSlides","loopAddBlankSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideFullyVisibleClass","slideNextClass","slidePrevClass","slideBlankClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function lu(t){return typeof t=="object"&&t!==null&&t.constructor&&Object.prototype.toString.call(t).slice(8,-1)==="Object"&&!t.__swiper__}function Al(t,n){const e=["__proto__","constructor","prototype"];Object.keys(n).filter(r=>e.indexOf(r)<0).forEach(r=>{typeof t[r]>"u"?t[r]=n[r]:lu(n[r])&&lu(t[r])&&Object.keys(n[r]).length>0?n[r].__swiper__?t[r]=n[r]:Al(t[r],n[r]):t[r]=n[r]})}function PD(t){return t===void 0&&(t={}),t.navigation&&typeof t.navigation.nextEl>"u"&&typeof t.navigation.prevEl>"u"}function LD(t){return t===void 0&&(t={}),t.pagination&&typeof t.pagination.el>"u"}function FD(t){return t===void 0&&(t={}),t.scrollbar&&typeof t.scrollbar.el>"u"}function zD(t){t===void 0&&(t="");const n=t.split(" ").map(r=>r.trim()).filter(r=>!!r),e=[];return n.forEach(r=>{e.indexOf(r)<0&&e.push(r)}),e.join(" ")}function I9(t){return t===void 0&&(t=""),t?t.includes("swiper-wrapper")?t:`swiper-wrapper ${t}`:"swiper-wrapper"}function _9(t){let{swiper:n,slides:e,passedParams:r,changedParams:i,nextEl:o,prevEl:a,scrollbarEl:s,paginationEl:u}=t;const l=i.filter(N=>N!=="children"&&N!=="direction"&&N!=="wrapperClass"),{params:c,pagination:d,navigation:f,scrollbar:p,virtual:h,thumbs:v}=n;let g,m,y,b,w,x,C,E;i.includes("thumbs")&&r.thumbs&&r.thumbs.swiper&&c.thumbs&&!c.thumbs.swiper&&(g=!0),i.includes("controller")&&r.controller&&r.controller.control&&c.controller&&!c.controller.control&&(m=!0),i.includes("pagination")&&r.pagination&&(r.pagination.el||u)&&(c.pagination||c.pagination===!1)&&d&&!d.el&&(y=!0),i.includes("scrollbar")&&r.scrollbar&&(r.scrollbar.el||s)&&(c.scrollbar||c.scrollbar===!1)&&p&&!p.el&&(b=!0),i.includes("navigation")&&r.navigation&&(r.navigation.prevEl||a)&&(r.navigation.nextEl||o)&&(c.navigation||c.navigation===!1)&&f&&!f.prevEl&&!f.nextEl&&(w=!0);const S=N=>{n[N]&&(n[N].destroy(),N==="navigation"?(n.isElement&&(n[N].prevEl.remove(),n[N].nextEl.remove()),c[N].prevEl=void 0,c[N].nextEl=void 0,n[N].prevEl=void 0,n[N].nextEl=void 0):(n.isElement&&n[N].el.remove(),c[N].el=void 0,n[N].el=void 0))};i.includes("loop")&&n.isElement&&(c.loop&&!r.loop?x=!0:!c.loop&&r.loop?C=!0:E=!0),l.forEach(N=>{if(lu(c[N])&&lu(r[N]))Object.assign(c[N],r[N]),(N==="navigation"||N==="pagination"||N==="scrollbar")&&"enabled"in r[N]&&!r[N].enabled&&S(N);else{const k=r[N];(k===!0||k===!1)&&(N==="navigation"||N==="pagination"||N==="scrollbar")?k===!1&&S(N):c[N]=r[N]}}),l.includes("controller")&&!m&&n.controller&&n.controller.control&&c.controller&&c.controller.control&&(n.controller.control=c.controller.control),i.includes("children")&&e&&h&&c.virtual.enabled?(h.slides=e,h.update(!0)):i.includes("virtual")&&h&&c.virtual.enabled&&(e&&(h.slides=e),h.update(!0)),i.includes("children")&&e&&c.loop&&(E=!0),g&&v.init()&&v.update(!0),m&&(n.controller.control=c.controller.control),y&&(n.isElement&&(!u||typeof u=="string")&&(u=document.createElement("div"),u.classList.add("swiper-pagination"),u.part.add("pagination"),n.el.appendChild(u)),u&&(c.pagination.el=u),d.init(),d.render(),d.update()),b&&(n.isElement&&(!s||typeof s=="string")&&(s=document.createElement("div"),s.classList.add("swiper-scrollbar"),s.part.add("scrollbar"),n.el.appendChild(s)),s&&(c.scrollbar.el=s),p.init(),p.updateSize(),p.setTranslate()),w&&(n.isElement&&((!o||typeof o=="string")&&(o=document.createElement("div"),o.classList.add("swiper-button-next"),o.innerHTML=n.hostEl.constructor.nextButtonSvg,o.part.add("button-next"),n.el.appendChild(o)),(!a||typeof a=="string")&&(a=document.createElement("div"),a.classList.add("swiper-button-prev"),a.innerHTML=n.hostEl.constructor.prevButtonSvg,a.part.add("button-prev"),n.el.appendChild(a))),o&&(c.navigation.nextEl=o),a&&(c.navigation.prevEl=a),f.init(),f.update()),i.includes("allowSlideNext")&&(n.allowSlideNext=r.allowSlideNext),i.includes("allowSlidePrev")&&(n.allowSlidePrev=r.allowSlidePrev),i.includes("direction")&&n.changeDirection(r.direction,!1),(x||E)&&n.loopDestroy(),(C||E)&&n.loopCreate(),n.update()}function A9(t,n){t===void 0&&(t={}),n===void 0&&(n=!0);const e={on:{}},r={},i={};Al(e,aw),e._emitClasses=!0,e.init=!1;const o={},a=MD.map(u=>u.replace(/_/,"")),s=Object.assign({},t);return Object.keys(s).forEach(u=>{typeof t[u]>"u"||(a.indexOf(u)>=0?lu(t[u])?(e[u]={},i[u]={},Al(e[u],t[u]),Al(i[u],t[u])):(e[u]=t[u],i[u]=t[u]):u.search(/on[A-Z]/)===0&&typeof t[u]=="function"?n?r[`${u[2].toLowerCase()}${u.substr(3)}`]=t[u]:e.on[`${u[2].toLowerCase()}${u.substr(3)}`]=t[u]:o[u]=t[u])}),["navigation","pagination","scrollbar"].forEach(u=>{e[u]===!0&&(e[u]={}),e[u]===!1&&delete e[u]}),{params:e,passedParams:i,rest:o,events:r}}function O9(t,n){let{el:e,nextEl:r,prevEl:i,paginationEl:o,scrollbarEl:a,swiper:s}=t;PD(n)&&r&&i&&(s.params.navigation.nextEl=r,s.originalParams.navigation.nextEl=r,s.params.navigation.prevEl=i,s.originalParams.navigation.prevEl=i),LD(n)&&o&&(s.params.pagination.el=o,s.originalParams.pagination.el=o),FD(n)&&a&&(s.params.scrollbar.el=a,s.originalParams.scrollbar.el=a),s.init(e)}function D9(t,n,e,r,i){const o=[];if(!n)return o;const a=u=>{o.indexOf(u)<0&&o.push(u)};if(e&&r){const u=r.map(i),l=e.map(i);u.join("")!==l.join("")&&a("children"),r.length!==e.length&&a("children")}return MD.filter(u=>u[0]==="_").map(u=>u.replace(/_/,"")).forEach(u=>{if(u in t&&u in n)if(lu(t[u])&&lu(n[u])){const l=Object.keys(t[u]),c=Object.keys(n[u]);l.length!==c.length?a(u):(l.forEach(d=>{t[u][d]!==n[u][d]&&a(u)}),c.forEach(d=>{t[u][d]!==n[u][d]&&a(u)}))}else t[u]!==n[u]&&a(u)}),o}const M9=t=>{!t||t.destroyed||!t.params.virtual||t.params.virtual&&!t.params.virtual.enabled||(t.updateSlides(),t.updateProgress(),t.updateSlidesClasses(),t.parallax&&t.params.parallax&&t.params.parallax.enabled&&t.parallax.setTranslate())};function sv(){return sv=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},sv.apply(this,arguments)}function BD(t){return t.type&&t.type.displayName&&t.type.displayName.includes("SwiperSlide")}function jD(t){const n=[];return _e.Children.toArray(t).forEach(e=>{BD(e)?n.push(e):e.props&&e.props.children&&jD(e.props.children).forEach(r=>n.push(r))}),n}function P9(t){const n=[],e={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return _e.Children.toArray(t).forEach(r=>{if(BD(r))n.push(r);else if(r.props&&r.props.slot&&e[r.props.slot])e[r.props.slot].push(r);else if(r.props&&r.props.children){const i=jD(r.props.children);i.length>0?i.forEach(o=>n.push(o)):e["container-end"].push(r)}else e["container-end"].push(r)}),{slides:n,slots:e}}function L9(t,n,e){if(!e)return null;const r=c=>{let d=c;return c<0?d=n.length+c:d>=n.length&&(d=d-n.length),d},i=t.isHorizontal()?{[t.rtlTranslate?"right":"left"]:`${e.offset}px`}:{top:`${e.offset}px`},{from:o,to:a}=e,s=t.params.loop?-n.length:0,u=t.params.loop?n.length*2:n.length,l=[];for(let c=s;c<u;c+=1)c>=o&&c<=a&&l.push(n[r(c)]);return l.map((c,d)=>_e.cloneElement(c,{swiper:t,style:i,key:`slide-${d}`}))}function Xd(t,n){return typeof window>"u"?H.useEffect(t,n):H.useLayoutEffect(t,n)}const IN=H.createContext(null),F9=H.createContext(null),VD=H.forwardRef(function(t,n){let{className:e,tag:r="div",wrapperTag:i="div",children:o,onSwiper:a,...s}=t===void 0?{}:t,u=!1;const[l,c]=H.useState("swiper"),[d,f]=H.useState(null),[p,h]=H.useState(!1),v=H.useRef(!1),g=H.useRef(null),m=H.useRef(null),y=H.useRef(null),b=H.useRef(null),w=H.useRef(null),x=H.useRef(null),C=H.useRef(null),E=H.useRef(null),{params:S,passedParams:N,rest:k,events:M}=A9(s),{slides:D,slots:R}=P9(o),O=()=>{h(!p)};Object.assign(S.on,{_containerClasses(F,L){c(L)}});const P=()=>{Object.assign(S.on,M),u=!0;const F={...S};if(delete F.wrapperClass,m.current=new BS(F),m.current.virtual&&m.current.params.virtual.enabled){m.current.virtual.slides=D;const L={cache:!1,slides:D,renderExternal:f,renderExternalUpdate:!1};Al(m.current.params.virtual,L),Al(m.current.originalParams.virtual,L)}};g.current||P(),m.current&&m.current.on("_beforeBreakpoint",O);const A=()=>{u||!M||!m.current||Object.keys(M).forEach(F=>{m.current.on(F,M[F])})},I=()=>{!M||!m.current||Object.keys(M).forEach(F=>{m.current.off(F,M[F])})};H.useEffect(()=>()=>{m.current&&m.current.off("_beforeBreakpoint",O)}),H.useEffect(()=>{!v.current&&m.current&&(m.current.emitSlidesClasses(),v.current=!0)}),Xd(()=>{if(n&&(n.current=g.current),!!g.current)return m.current.destroyed&&P(),O9({el:g.current,nextEl:w.current,prevEl:x.current,paginationEl:C.current,scrollbarEl:E.current,swiper:m.current},S),a&&a(m.current),()=>{m.current&&!m.current.destroyed&&m.current.destroy(!0,!1)}},[]),Xd(()=>{A();const F=D9(N,y.current,D,b.current,L=>L.key);return y.current=N,b.current=D,F.length&&m.current&&!m.current.destroyed&&_9({swiper:m.current,slides:D,passedParams:N,changedParams:F,nextEl:w.current,prevEl:x.current,scrollbarEl:E.current,paginationEl:C.current}),()=>{I()}}),Xd(()=>{M9(m.current)},[d]);function _(){return S.virtual?L9(m.current,D,d):D.map((F,L)=>_e.cloneElement(F,{swiper:m.current,swiperSlideIndex:L}))}return _e.createElement(r,sv({ref:g,className:zD(`${l}${e?` ${e}`:""}`)},k),_e.createElement(F9.Provider,{value:m.current},R["container-start"],_e.createElement(i,{className:I9(S.wrapperClass)},R["wrapper-start"],_(),R["wrapper-end"]),PD(S)&&_e.createElement(_e.Fragment,null,_e.createElement("div",{ref:x,className:"swiper-button-prev"}),_e.createElement("div",{ref:w,className:"swiper-button-next"})),FD(S)&&_e.createElement("div",{ref:E,className:"swiper-scrollbar"}),LD(S)&&_e.createElement("div",{ref:C,className:"swiper-pagination"}),R["container-end"]))});VD.displayName="Swiper";const $D=H.forwardRef(function(t,n){let{tag:e="div",children:r,className:i="",swiper:o,zoom:a,lazy:s,virtualIndex:u,swiperSlideIndex:l,...c}=t===void 0?{}:t;const d=H.useRef(null),[f,p]=H.useState("swiper-slide"),[h,v]=H.useState(!1);function g(w,x,C){x===d.current&&p(C)}Xd(()=>{if(typeof l<"u"&&(d.current.swiperSlideIndex=l),n&&(n.current=d.current),!(!d.current||!o)){if(o.destroyed){f!=="swiper-slide"&&p("swiper-slide");return}return o.on("_slideClass",g),()=>{o&&o.off("_slideClass",g)}}}),Xd(()=>{o&&d.current&&!o.destroyed&&p(o.getSlideClasses(d.current))},[o]);const m={isActive:f.indexOf("swiper-slide-active")>=0,isVisible:f.indexOf("swiper-slide-visible")>=0,isPrev:f.indexOf("swiper-slide-prev")>=0,isNext:f.indexOf("swiper-slide-next")>=0},y=()=>typeof r=="function"?r(m):r,b=()=>{v(!0)};return _e.createElement(e,sv({ref:d,className:zD(`${f}${i?` ${i}`:""}`),"data-swiper-slide-index":u,onLoad:b},c),a&&_e.createElement(IN.Provider,{value:m},_e.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":typeof a=="number"?a:void 0},y(),s&&!h&&_e.createElement("div",{className:"swiper-lazy-preloader"}))),!a&&_e.createElement(IN.Provider,{value:m},y(),s&&!h&&_e.createElement("div",{className:"swiper-lazy-preloader"})))});$D.displayName="SwiperSlide";function z9(t){const{effect:n,swiper:e,on:r,setTranslate:i,setTransition:o,overwriteParams:a,perspective:s,recreateShadows:u,getEffectParams:l}=t;r("beforeInit",()=>{if(e.params.effect!==n)return;e.classNames.push(`${e.params.containerModifierClass}${n}`),s&&s()&&e.classNames.push(`${e.params.containerModifierClass}3d`);const d=a?a():{};Object.assign(e.params,d),Object.assign(e.originalParams,d)}),r("setTranslate",()=>{e.params.effect===n&&i()}),r("setTransition",(d,f)=>{e.params.effect===n&&o(f)}),r("transitionEnd",()=>{if(e.params.effect===n&&u){if(!l||!l().slideShadows)return;e.slides.forEach(d=>{d.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(f=>f.remove())}),u()}});let c;r("virtualUpdate",()=>{e.params.effect===n&&(e.slides.length||(c=!0),requestAnimationFrame(()=>{c&&e.slides&&e.slides.length&&(i(),c=!1)}))})}function B9(t,n){const e=zS(n);return e!==n&&(e.style.backfaceVisibility="hidden",e.style["-webkit-backface-visibility"]="hidden"),e}function _N(t,n,e){const r=`swiper-slide-shadow${e?`-${e}`:""}${t?` swiper-slide-shadow-${t}`:""}`,i=zS(n);let o=i.querySelector(`.${r.split(" ").join(".")}`);return o||(o=av("div",r.split(" ")),i.append(o)),o}function j9(t){let{swiper:n,extendParams:e,on:r}=t;e({coverflowEffect:{rotate:50,stretch:0,depth:100,scale:1,modifier:1,slideShadows:!0}}),z9({effect:"coverflow",swiper:n,on:r,setTranslate:()=>{const{width:a,height:s,slides:u,slidesSizesGrid:l}=n,c=n.params.coverflowEffect,d=n.isHorizontal(),f=n.translate,p=d?-f+a/2:-f+s/2,h=d?c.rotate:-c.rotate,v=c.depth;for(let g=0,m=u.length;g<m;g+=1){const y=u[g],b=l[g],w=y.swiperSlideOffset,x=(p-w-b/2)/b,C=typeof c.modifier=="function"?c.modifier(x):x*c.modifier;let E=d?h*C:0,S=d?0:h*C,N=-v*Math.abs(C),k=c.stretch;typeof k=="string"&&k.indexOf("%")!==-1&&(k=parseFloat(c.stretch)/100*b);let M=d?0:k*C,D=d?k*C:0,R=1-(1-c.scale)*Math.abs(C);Math.abs(D)<.001&&(D=0),Math.abs(M)<.001&&(M=0),Math.abs(N)<.001&&(N=0),Math.abs(E)<.001&&(E=0),Math.abs(S)<.001&&(S=0),Math.abs(R)<.001&&(R=0),n.browser&&n.browser.isSafari&&(Math.abs(E)/90%2===1&&(E+=.001),Math.abs(S)/90%2===1&&(S+=.001));const O=`translate3d(${D}px,${M}px,${N}px)  rotateX(${S}deg) rotateY(${E}deg) scale(${R})`,P=B9(c,y);if(P.style.transform=O,y.style.zIndex=-Math.abs(Math.round(C))+1,c.slideShadows){let A=d?y.querySelector(".swiper-slide-shadow-left"):y.querySelector(".swiper-slide-shadow-top"),I=d?y.querySelector(".swiper-slide-shadow-right"):y.querySelector(".swiper-slide-shadow-bottom");A||(A=_N("coverflow",y,d?"left":"top")),I||(I=_N("coverflow",y,d?"right":"bottom")),A&&(A.style.opacity=C>0?C:0),I&&(I.style.opacity=-C>0?-C:0)}}},setTransition:a=>{n.slides.map(u=>zS(u)).forEach(u=>{u.style.transitionDuration=`${a}ms`,u.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(l=>{l.style.transitionDuration=`${a}ms`})})},perspective:()=>!0,overwriteParams:()=>({watchSlidesProgress:!0})})}const V9=[{rating:8.5,title:"The Queen's Gambit"},{rating:9.5,title:"Breaking Bad"},{rating:8.1,title:"Wednesday"},{rating:8.7,title:"Stranger Things"},{rating:8.6,title:"Anne with an E"},{rating:8.9,title:"Friends"},{rating:8.6,title:"The Crown"},{rating:8.7,title:"House M.D."},{rating:9.2,title:"Game of Thrones"}],$9=()=>T.jsx(VD,{modules:[j9],effect:"coverflow",slidesPerView:1.4,centeredSlides:!0,mousewheel:{invert:!1},onSlideChange:()=>console.log("slide change"),spaceBetween:-100,slideToClickedSlide:!0,coverflowEffect:{rotate:50,stretch:0,depth:100,modifier:1,slideShadows:!0},children:V9.map((t,n)=>T.jsx($D,{},n))});var jS={},U9=wt;Object.defineProperty(jS,"__esModule",{value:!0});var UD=jS.default=void 0,W9=U9(xt()),H9=T;UD=jS.default=(0,W9.default)((0,H9.jsx)("path",{d:"M19 9c0-1.3-.84-2.4-2-2.82V2h-2v4.18C13.84 6.6 13 7.7 13 9s.84 2.4 2 2.82V15c0 2.21-1.79 4-4 4s-4-1.79-4-4v-1h3L5 9v6c0 3.31 2.69 6 6 6s6-2.69 6-6v-3.18c1.16-.42 2-1.52 2-2.82m-3 1c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1"}),"Phishing");var G9={VITE_BASE_URL:"https://i10c203.p.ssafy.io/api",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};function q9(){return console.log(G9),T.jsx(T.Fragment,{children:T.jsxs("div",{className:"Home",children:[T.jsxs("div",{className:"Home_header",children:[T.jsx("img",{src:uH,alt:"logo"}),T.jsx(Ja,{to:"/fishbook",children:T.jsx(SN,{})}),T.jsx(Ja,{to:"/tutorial",children:T.jsx(SN,{})})]}),T.jsx("div",{children:T.jsx(Ja,{to:"/chatbot",children:T.jsx(UD,{})})}),T.jsx($9,{})]})})}var WD={},VS={};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var HD=function(t,n){return(HD=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])})(t,n)};function Hi(t,n){function e(){this.constructor=t}HD(t,n),t.prototype=n===null?Object.create(n):(e.prototype=n.prototype,new e)}function Ae(t,n,e,r){return new(e||(e=Promise))(function(i,o){function a(l){try{u(r.next(l))}catch(c){o(c)}}function s(l){try{u(r.throw(l))}catch(c){o(c)}}function u(l){l.done?i(l.value):new e(function(c){c(l.value)}).then(a,s)}u((r=r.apply(t,n||[])).next())})}function Oe(t,n){var e,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(u){return function(l){return function(c){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){a=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){a.label=c[1];break}if(c[0]===6&&a.label<i[1]){a.label=i[1],i=c;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(c);break}i[2]&&a.ops.pop(),a.trys.pop();continue}c=n.call(t,a)}catch(d){c=[6,d],r=0}finally{e=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([u,l])}}}var GD=function(){function t(n){this.global=n,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return t.prototype.setPlatform=function(n,e){this.platform!=null&&console.warn("Platform "+this.platformName+" has already been set. Overwriting the platform with "+e+"."),this.platformName=n,this.platform=e},t.prototype.registerFlag=function(n,e,r){if(this.flagRegistry[n]={evaluationFn:e,setHook:r},this.urlFlags[n]!=null){var i=this.urlFlags[n];console.warn("Setting feature override from URL "+n+": "+i+"."),this.set(n,i)}},t.prototype.get=function(n){return n in this.flags?this.flags[n]:(this.flags[n]=this.evaluateFlag(n),this.flags[n])},t.prototype.getNumber=function(n){return this.get(n)},t.prototype.getBool=function(n){return this.get(n)},t.prototype.getFlags=function(){return this.flags},Object.defineProperty(t.prototype,"features",{get:function(){return this.flags},enumerable:!0,configurable:!0}),t.prototype.set=function(n,e){if(this.flagRegistry[n]==null)throw new Error("Cannot set flag "+n+" as it has not been registered.");this.flags[n]=e,this.flagRegistry[n].setHook!=null&&this.flagRegistry[n].setHook(e)},t.prototype.evaluateFlag=function(n){if(this.flagRegistry[n]==null)throw new Error("Cannot evaluate flag '"+n+"': no evaluation function found.");return this.flagRegistry[n].evaluationFn()},t.prototype.setFlags=function(n){this.flags=Object.assign({},n)},t.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},t.prototype.populateURLFlags=function(){var n=this;if(this.global!==void 0&&this.global.location!==void 0&&this.global.location.search!==void 0){var e,r,i=(e=this.global.location.search,r={},e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,function(o){for(var a=[],s=1;s<arguments.length;s++)a[s-1]=arguments[s];return function(u,l,c){u[decodeURIComponent(l)]=decodeURIComponent(c||"")}(r,a[0],a[1]),a.join("=")}),r);"tfjsflags"in i&&i.tfjsflags.split(",").forEach(function(o){var a=o.split(":"),s=a[0],u=a[1];n.urlFlags[s]=function(l,c){if((c=c.toLowerCase())==="true"||c==="false")return c==="true";if(""+ +c===c)return+c;throw new Error("Could not parse value flag value "+c+" for flag "+l+".")}(s,u)})}},t}();function ie(){return $S}var $S=null,Jl=new Map;function qD(t,n){var e=US(t,n);return Jl.get(e)}function sw(t){for(var n=Jl.entries(),e=[];;){var r=n.next(),i=r.done,o=r.value;if(i)break;var a=o[0],s=o[1];a.split("_")[0]===t&&e.push(s)}return e}function uw(t){var n=t.kernelName,e=t.backendName,r=US(n,e);if(Jl.has(r))throw new Error("The kernel '"+n+"' for backend '"+e+"' is already registered");Jl.set(r,t)}function K9(t,n){var e=US(t,n);if(!Jl.has(e))throw new Error("The kernel '"+t+"' for backend '"+n+"' is not registered");Jl.delete(e)}function US(t,n){return n+"_"+t}function AN(t){for(var n=t.length,e=0,r=0;n>0;)r=Math.random()*n|0,e=t[--n],t[n]=t[r],t[r]=e}function uv(t,n,e){return Math.max(t,Math.min(n,e))}function WS(t){return t%2==0?t:t+1}function KD(t){for(var n=0,e=0;e<t.length;e++)n+=t[e];return n}function U(t,n){if(!t)throw new Error(typeof n=="string"?n:n())}function gt(t,n,e){e===void 0&&(e=""),U(Bn(t,n),function(){return e+" Shapes "+t+" and "+n+" must match"})}function Su(t){U(t!=null,function(){return"The input to the tensor constructor must be a non-null value."})}function ta(t,n,e){if(n===void 0&&(n=[]),e===void 0&&(e=!1),n==null&&(n=[]),Array.isArray(t)||Kn(t)&&!e)for(var r=0;r<t.length;++r)ta(t[r],n,e);else n.push(t);return n}function Me(t){if(t.length===0)return 1;for(var n=t[0],e=1;e<t.length;e++)n*=t[e];return n}function Bn(t,n){if(t===n)return!0;if(t==null||n==null||t.length!==n.length)return!1;for(var e=0;e<t.length;e++)if(t[e]!==n[e])return!1;return!0}function nn(t){return t%1==0}function XD(t){if(Math.tanh!=null)return Math.tanh(t);if(t===1/0)return 1;if(t===-1/0)return-1;var n=Math.exp(2*t);return(n-1)/(n+1)}function lv(t){var n=Math.ceil(Math.sqrt(t));return[n,Math.ceil(t/n)]}function Zs(t,n){return n<=t.length?t:t+" ".repeat(n-t.length)}function lw(t,n,e){return n===void 0&&(n=function(r){return 0}),new Promise(function(r,i){var o=0,a=function(){if(t())r();else{var s=n(++o);e!=null&&o>=e?i():setTimeout(a,s)}};a()})}function YD(t,n){for(var e=1,r=-1,i=0;i<t.length;++i)if(t[i]>=0)e*=t[i];else if(t[i]===-1){if(r!==-1)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+r+" and dim "+i);r=i}else if(t[i]<0)throw Error("Shapes can not be < 0. Found "+t[i]+" at dim "+i);if(r===-1){if(n>0&&n!==e)throw Error("Size("+n+") must match the product of shape "+t);return t}if(e===0)throw Error("Cannot infer the missing size in ["+t+"] when there are 0 elements");if(n%e!=0)throw Error("The implicit shape can't be a fractional number. Got "+n+" / "+e);var o=t.slice();return o[r]=n/e,o}function Vn(t,n){var e=n.length;return U((t=t==null?n.map(function(r,i){return i}):[].concat(t)).every(function(r){return r>=-e&&r<e}),function(){return"All values in axis param must be in range [-"+e+", "+e+") but got axis "+t}),U(t.every(function(r){return nn(r)}),function(){return"All values in axis param must be integers but got axis "+t}),t.map(function(r){return r<0?e+r:r})}function _a(t,n){for(var e=[],r=[],i=n!=null&&Array.isArray(n)&&n.length===0,o=n==null||i?null:Vn(n,t).sort(),a=0,s=0;s<t.length;++s){if(o!=null){if(o[a]===s&&t[s]!==1)throw new Error("Can't squeeze axis "+s+" since its dim '"+t[s]+"' is not 1");(o[a]==null||o[a]>s)&&t[s]===1&&(e.push(t[s]),r.push(s)),o[a]<=s&&a++}t[s]!==1&&(e.push(t[s]),r.push(s))}return{newShape:e,keptDims:r}}function kf(t,n){var e=null;if(t==null||t==="float32")e=new Float32Array(n);else if(t==="int32")e=new Int32Array(n);else{if(t!=="bool")throw new Error("Unknown data type "+t);e=new Uint8Array(n)}return e}function If(t,n){var e=null;if(t==null||t==="float32")e=new Float32Array(n);else if(t==="int32")e=new Int32Array(n);else if(t==="bool")e=new Uint8Array(n);else{if(t!=="string")throw new Error("Unknown data type "+t);e=new Array(n)}return e}function JD(t,n){for(var e=0;e<t.length;e++){var r=t[e];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type "+n+" being uploaded contains "+r+".")}}function QD(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function ZD(t,n){return n!=="complex64"&&(n!=="float32"||t==="complex64")&&(n!=="int32"||t==="float32"||t==="complex64")&&(n!=="bool"||t!=="bool")}function Kn(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array}function HS(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error("Unknown dtype "+t)}function eM(t){if(t==null)return 0;var n=0;return t.forEach(function(e){return n+=e.length}),n}function Pa(t){return typeof t=="string"||t instanceof String}function tM(t){return typeof t=="boolean"}function nM(t){return typeof t=="number"}function Cc(t){return Array.isArray(t)?Cc(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array?"int32":nM(t)?"float32":Pa(t)?"string":tM(t)?"bool":"float32"}function as(t){return!!(t&&t.constructor&&t.call&&t.apply)}function cv(t,n){for(var e=n;e<t;++e)if(t%e==0)return e;return t}function vs(t){var n=t.length;if(n<2)return[];var e=new Array(n-1);e[n-2]=t[n-1];for(var r=n-3;r>=0;--r)e[r]=e[r+1]*t[r+1];return e}function GS(t,n,e){if(n==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=ta(t)),e&&JD(t,n),function(o,a){return o instanceof Float32Array&&a==="float32"||o instanceof Int32Array&&a==="int32"||o instanceof Uint8Array&&a==="bool"}(t,n))return t;if(n==null||n==="float32"||n==="complex64")return new Float32Array(t);if(n==="int32")return new Int32Array(t);if(n==="bool"){for(var r=new Uint8Array(t.length),i=0;i<r.length;++i)Math.round(t[i])!==0&&(r[i]=1);return r}throw new Error("Unknown data type "+n)}function cw(t,n){if(t.length===0)return n[0];var e=t.reduce(function(r,i){return r*i});if(e===0)return[];if(e!==n.length)throw new Error("["+t+"] does not match the input size.");return function r(i,o,a){var s=new Array;if(o.length===1)for(var u=o[0],l=0;l<u;l++)s[l]=a[i+l];else{u=o[0];var c=o.slice(1),d=c.reduce(function(f,p){return f*p});for(l=0;l<u;l++)s[l]=r(i+l*d,c,a)}return s}(0,t,n)}function qS(t,n){for(var e=Rc(t,n),r=0;r<e.length;r++)e[r]=1;return e}function Rc(t,n){if(n==null||n==="float32"||n==="complex64")return new Float32Array(t);if(n==="int32")return new Int32Array(t);if(n==="bool")return new Uint8Array(t);throw new Error("Unknown data type "+n)}function Di(){return ie().platform.now()}function KS(t){t.forEach(function(n){U(Number.isInteger(n)&&n>=0,function(){return"Tensor must have a shape comprised of positive integers but got shape ["+t+"]."})})}function rM(t,n){return n===void 0&&(n="utf-8"),n=n||"utf-8",ie().platform.encode(t,n)}function _f(t,n){return n===void 0&&(n="utf-8"),n=n||"utf-8",ie().platform.decode(t,n)}var Fe=Object.freeze({shuffle:AN,clamp:uv,nearestLargerEven:WS,sum:KD,randUniform:function(t,n){var e=Math.random();return n*e+(1-e)*t},distSquared:function(t,n){for(var e=0,r=0;r<t.length;r++){var i=Number(t[r])-Number(n[r]);e+=i*i}return e},assert:U,assertShapesMatch:gt,assertNonNull:Su,flatten:ta,sizeFromShape:Me,isScalarShape:function(t){return t.length===0},arraysEqual:Bn,isInt:nn,tanh:XD,sizeToSquarishShape:lv,createShuffledIndices:function(t){for(var n=new Uint32Array(t),e=0;e<t;++e)n[e]=e;return AN(n),n},rightPad:Zs,repeatedTry:lw,inferFromImplicitShape:YD,parseAxisParam:Vn,squeezeShape:_a,getTypedArrayFromDType:kf,getArrayFromDType:If,checkConversionForErrors:JD,isValidDtype:QD,hasEncodingLoss:ZD,isTypedArray:Kn,bytesPerElement:HS,bytesFromStringArray:eM,isString:Pa,isBoolean:tM,isNumber:nM,inferDtype:Cc,isFunction:as,nearestDivisor:cv,computeStrides:vs,toTypedArray:GS,toNestedArray:cw,makeOnesTypedArray:qS,makeZerosTypedArray:Rc,now:Di,assertNonNegativeIntegerDimensions:KS,fetch:function(t,n){return ie().platform.fetch(t,n)},encodeString:rM,decodeString:_f}),X9=function(){function t(n,e){this.backendTimer=n,this.logger=e,e==null&&(this.logger=new Y9)}return t.prototype.profileKernel=function(n,e,r){var i,o=this,a=this.backendTimer.time(function(){i=r()});return i.forEach(function(s){s.data().then(function(u){(function(l,c,d){if(c!=="float32")return!1;for(var f=0;f<l.length;f++){var p=l[f];if(isNaN(p)||!isFinite(p))return console.warn("Found "+p+" in the result of '"+d+"'"),!0}})(u,s.dtype,n),a.then(function(l){var c="";l.getExtraProfileInfo!=null&&(c=l.getExtraProfileInfo()),o.logger.logKernelProfile(n,s,u,l.kernelMs,e,c)})})}),i},t}(),Y9=function(){function t(){}return t.prototype.logKernelProfile=function(n,e,r,i,o,a){var s=Zs(i+"ms",9),u=Zs(n,25),l=e.rank,c=e.size,d=Zs(e.shape.toString(),14),f="";for(var p in o){var h=o[p].shape,v=h.length;f+=p+": "+v+"D "+(v>0?h:"")+" "}console.log("%c"+u+"	%c"+s+"	%c"+l+"D "+d+"	%c"+c+"	%c"+f+"	%c"+a,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")},t}(),ON=20,ad=3,G0=7;function J9(t,n,e,r){var i=vs(n),o=function(l,c,d,f){var p=Me(c),h=f[f.length-1],v=new Array(h).fill(0),g=c.length,m=d==="complex64"?ud(l):l;if(g>1)for(var y=0;y<p/h;y++)for(var b=y*h,w=0;w<h;w++)v[w]=Math.max(v[w],sd(m[b+w],0,d).length);return v}(t,n,e,i),a=n.length,s=function l(c,d,f,p,h,v){v===void 0&&(v=!0);var g=f==="complex64"?2:1,m=d[0],y=d.length;if(y===0){if(f==="complex64"){var b=ud(c);return[sd(b[0],0,f)]}return f==="bool"?[iM(c[0])]:[c[0].toString()]}if(y===1){if(m>ON){var w=ad*g,x=Array.from(c.slice(0,w)),C=Array.from(c.slice(m-ad*g,m));return f==="complex64"&&(x=ud(x),C=ud(C)),["["+x.map(function(I,_){return sd(I,h[_],f)}).join(", ")+", ..., "+C.map(function(I,_){return sd(I,h[m-ad+_],f)}).join(", ")+"]"]}var E=f==="complex64"?ud(c):Array.from(c);return["["+E.map(function(I,_){return sd(I,h[_],f)}).join(", ")+"]"]}var S=d.slice(1),N=p.slice(1),k=p[0]*g,M=[];if(m>ON){for(var D=0;D<ad;D++){var R=D*k,O=R+k;M.push.apply(M,l(c.slice(R,O),S,f,N,h,!1))}M.push("...");for(var D=m-ad;D<m;D++){var R=D*k,O=R+k;M.push.apply(M,l(c.slice(R,O),S,f,N,h,D===m-1))}}else for(var D=0;D<m;D++){var R=D*k,O=R+k;M.push.apply(M,l(c.slice(R,O),S,f,N,h,D===m-1))}var P=y===2?",":"";M[0]="["+M[0]+P;for(var D=1;D<M.length-1;D++)M[D]=" "+M[D]+P;for(var A=`,
`,D=2;D<y;D++)A+=`
`;return M[M.length-1]=" "+M[M.length-1]+"]"+(v?"":A),M}(t,n,e,i,o),u=["Tensor"];return r&&(u.push("  dtype: "+e),u.push("  rank: "+a),u.push("  shape: ["+n+"]"),u.push("  values:")),u.push(s.map(function(l){return"    "+l}).join(`
`)),u.join(`
`)}function sd(t,n,e){return Zs(Array.isArray(t)?parseFloat(t[0].toFixed(G0))+" + "+parseFloat(t[1].toFixed(G0))+"j":Pa(t)?"'"+t+"'":e==="bool"?iM(t):parseFloat(t.toFixed(G0)).toString(),n)}function iM(t){return t===0?"false":"true"}function ud(t){for(var n=[],e=0;e<t.length;e+=2)n.push([t[e],t[e+1]]);return n}var Ql=function(){function t(n,e,r){var i=this;if(this.dtype=e,this.shape=n.slice(),this.size=Me(n),r!=null){var o=r.length;U(o===this.size,function(){return"Length of values '"+o+"' does not match the size inferred by the shape '"+i.size+"'."})}if(e==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||If(e,this.size),this.strides=vs(n)}return t.prototype.set=function(n){for(var e=this,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];r.length===0&&(r=[0]),U(r.length===this.rank,function(){return"The number of provided coordinates ("+r.length+") must match the rank ("+e.rank+")"});var o=this.locToIndex(r);this.values[o]=n},t.prototype.get=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];n.length===0&&(n=[0]);for(var r=0,i=0,o=n;i<o.length;i++){var a=o[i];if(a<0||a>=this.shape[r]){var s="Requested out of range element at "+n+".   Buffer shape="+this.shape;throw new Error(s)}r++}for(var u=n[n.length-1],l=0;l<n.length-1;++l)u+=this.strides[l]*n[l];return this.values[u]},t.prototype.locToIndex=function(n){if(this.rank===0)return 0;if(this.rank===1)return n[0];for(var e=n[n.length-1],r=0;r<n.length-1;++r)e+=this.strides[r]*n[r];return e},t.prototype.indexToLoc=function(n){if(this.rank===0)return[];if(this.rank===1)return[n];for(var e=new Array(this.shape.length),r=0;r<e.length-1;++r)e[r]=Math.floor(n/this.strides[r]),n-=e[r]*this.strides[r];return e[e.length-1]=n,e},Object.defineProperty(t.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),t.prototype.toTensor=function(){return so().makeTensor(this.values,this.shape,this.dtype)},t}(),so=null,oe=null,oM=null,_t=function(){function t(n,e,r,i){this.kept=!1,this.isDisposedInternal=!1,this.shape=n.slice(),this.dtype=e||"float32",this.size=Me(n),this.strides=vs(n),this.dataId=r,this.id=i,this.rankType=this.rank<5?this.rank.toString():"higher"}return t.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},t.prototype.asScalar=function(){return this.throwIfDisposed(),U(this.size===1,function(){return"The array must have only 1 element."}),this.reshape([])},t.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},t.prototype.as2D=function(n,e){return this.throwIfDisposed(),this.reshape([n,e])},t.prototype.as3D=function(n,e,r){return this.throwIfDisposed(),this.reshape([n,e,r])},t.prototype.as4D=function(n,e,r,i){return this.throwIfDisposed(),this.reshape([n,e,r,i])},t.prototype.as5D=function(n,e,r,i,o){return this.throwIfDisposed(),this.reshape([n,e,r,i,o])},t.prototype.asType=function(n){return this.throwIfDisposed(),oe.cast(this,n)},Object.defineProperty(t.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),t.prototype.buffer=function(){return Ae(this,void 0,void 0,function(){var n;return Oe(this,function(e){switch(e.label){case 0:return[4,this.data()];case 1:return n=e.sent(),[2,oe.buffer(this.shape,this.dtype,n)]}})})},t.prototype.bufferSync=function(){return oe.buffer(this.shape,this.dtype,this.dataSync())},t.prototype.array=function(){return Ae(this,void 0,void 0,function(){var n;return Oe(this,function(e){switch(e.label){case 0:return[4,this.data()];case 1:return n=e.sent(),[2,cw(this.shape,n)]}})})},t.prototype.arraySync=function(){return cw(this.shape,this.dataSync())},t.prototype.data=function(){return Ae(this,void 0,void 0,function(){var n,e;return Oe(this,function(r){switch(r.label){case 0:return this.throwIfDisposed(),n=so().read(this.dataId),this.dtype!=="string"?[3,2]:[4,n];case 1:e=r.sent();try{return[2,e.map(function(i){return _f(i)})]}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}r.label=2;case 2:return[2,n]}})})},t.prototype.dataSync=function(){this.throwIfDisposed();var n=so().readSync(this.dataId);if(this.dtype==="string")try{return n.map(function(e){return _f(e)})}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return n},t.prototype.bytes=function(){return Ae(this,void 0,void 0,function(){var n;return Oe(this,function(e){switch(e.label){case 0:return this.throwIfDisposed(),[4,so().read(this.dataId)];case 1:return n=e.sent(),this.dtype==="string"?[2,n]:[2,new Uint8Array(n.buffer)]}})})},t.prototype.dispose=function(){this.isDisposed||(so().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(t.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),t.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},t.prototype.toFloat=function(){return this.asType("float32")},t.prototype.toInt=function(){return this.asType("int32")},t.prototype.toBool=function(){return this.asType("bool")},t.prototype.print=function(n){return n===void 0&&(n=!1),oe.print(this,n)},t.prototype.reshape=function(n){return this.throwIfDisposed(),oe.reshape(this,n)},t.prototype.reshapeAs=function(n){return this.throwIfDisposed(),this.reshape(n.shape)},t.prototype.expandDims=function(n){return n===void 0&&(n=0),oe.expandDims(this,n)},t.prototype.cumsum=function(n,e,r){return n===void 0&&(n=0),e===void 0&&(e=!1),r===void 0&&(r=!1),oe.cumsum(this,n,e,r)},t.prototype.squeeze=function(n){return this.throwIfDisposed(),oe.squeeze(this,n)},t.prototype.clone=function(){return this.throwIfDisposed(),oe.clone(this)},t.prototype.oneHot=function(n,e,r){return this.throwIfDisposed(),oe.oneHot(this,n,e,r)},t.prototype.toString=function(n){return n===void 0&&(n=!1),J9(this.dataSync(),this.shape,this.dtype,n)},t.prototype.tile=function(n){return this.throwIfDisposed(),oe.tile(this,n)},t.prototype.gather=function(n,e){return e===void 0&&(e=0),this.throwIfDisposed(),oe.gather(this,n,e)},t.prototype.matMul=function(n,e,r){return e===void 0&&(e=!1),r===void 0&&(r=!1),this.throwIfDisposed(),oe.matMul(this,n,e,r)},t.prototype.dot=function(n){return this.throwIfDisposed(),oe.dot(this,n)},t.prototype.norm=function(n,e,r){return n===void 0&&(n="euclidean"),e===void 0&&(e=null),r===void 0&&(r=!1),this.throwIfDisposed(),oe.norm(this,n,e,r)},t.prototype.slice=function(n,e){return this.throwIfDisposed(),oe.slice(this,n,e)},t.prototype.reverse=function(n){return this.throwIfDisposed(),oe.reverse(this,n)},t.prototype.concat=function(n,e){return e===void 0&&(e=0),this.throwIfDisposed(),n instanceof t&&(n=[n]),oe.concat([this].concat(n),e)},t.prototype.split=function(n,e){return e===void 0&&(e=0),this.throwIfDisposed(),oe.split(this,n,e)},t.prototype.stack=function(n,e){return e===void 0&&(e=0),oe.stack([this,n],e)},t.prototype.unstack=function(n){return n===void 0&&(n=0),oe.unstack(this,n)},t.prototype.pad=function(n,e){return e===void 0&&(e=0),oe.pad(this,n,e)},t.prototype.batchNormalization=function(n,e,r,i,o){return r===void 0&&(r=.001),oM("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon"),this.batchNorm(n,e,o,i,r)},t.prototype.batchNorm=function(n,e,r,i,o){return o===void 0&&(o=.001),this.throwIfDisposed(),oe.batchNorm(this,n,e,r,i,o)},t.prototype.all=function(n,e){return n===void 0&&(n=null),e===void 0&&(e=!1),this.throwIfDisposed(),oe.all(this,n,e)},t.prototype.any=function(n,e){return n===void 0&&(n=null),e===void 0&&(e=!1),this.throwIfDisposed(),oe.any(this,n,e)},t.prototype.logSumExp=function(n,e){return n===void 0&&(n=null),e===void 0&&(e=!1),this.throwIfDisposed(),oe.logSumExp(this,n,e)},t.prototype.sum=function(n,e){return n===void 0&&(n=null),e===void 0&&(e=!1),this.throwIfDisposed(),oe.sum(this,n,e)},t.prototype.prod=function(n,e){return n===void 0&&(n=null),e===void 0&&(e=!1),this.throwIfDisposed(),oe.prod(this,n,e)},t.prototype.mean=function(n,e){return n===void 0&&(n=null),e===void 0&&(e=!1),this.throwIfDisposed(),oe.mean(this,n,e)},t.prototype.min=function(n,e){return n===void 0&&(n=null),e===void 0&&(e=!1),this.throwIfDisposed(),oe.min(this,n,e)},t.prototype.max=function(n,e){return n===void 0&&(n=null),e===void 0&&(e=!1),this.throwIfDisposed(),oe.max(this,n,e)},t.prototype.argMin=function(n){return n===void 0&&(n=null),this.throwIfDisposed(),oe.argMin(this,n)},t.prototype.argMax=function(n){return n===void 0&&(n=null),this.throwIfDisposed(),oe.argMax(this,n)},t.prototype.cast=function(n){return this.throwIfDisposed(),oe.cast(this,n)},t.prototype.add=function(n){return this.throwIfDisposed(),oe.add(this,n)},t.prototype.addStrict=function(n){return this.throwIfDisposed(),oe.addStrict(this,n)},t.prototype.atan2=function(n){return this.throwIfDisposed(),oe.atan2(this,n)},t.prototype.sub=function(n){return this.throwIfDisposed(),oe.sub(this,n)},t.prototype.subStrict=function(n){return this.throwIfDisposed(),oe.subStrict(this,n)},t.prototype.pow=function(n){return this.throwIfDisposed(),oe.pow(this,n)},t.prototype.powStrict=function(n){return this.throwIfDisposed(),oe.powStrict(this,n)},t.prototype.mul=function(n){return this.throwIfDisposed(),oe.mul(this,n)},t.prototype.mulStrict=function(n){return this.throwIfDisposed(),oe.mulStrict(this,n)},t.prototype.div=function(n){return this.throwIfDisposed(),oe.div(this,n)},t.prototype.floorDiv=function(n){return this.throwIfDisposed(),oe.floorDiv(this,n)},t.prototype.divStrict=function(n){return this.throwIfDisposed(),oe.divStrict(this,n)},t.prototype.minimum=function(n){return this.throwIfDisposed(),oe.minimum(this,n)},t.prototype.minimumStrict=function(n){return this.throwIfDisposed(),oe.minimumStrict(this,n)},t.prototype.maximum=function(n){return this.throwIfDisposed(),oe.maximum(this,n)},t.prototype.maximumStrict=function(n){return this.throwIfDisposed(),oe.maximumStrict(this,n)},t.prototype.mod=function(n){return this.throwIfDisposed(),oe.mod(this,n)},t.prototype.modStrict=function(n){return this.throwIfDisposed(),oe.modStrict(this,n)},t.prototype.squaredDifference=function(n){return this.throwIfDisposed(),oe.squaredDifference(this,n)},t.prototype.squaredDifferenceStrict=function(n){return this.throwIfDisposed(),oe.squaredDifferenceStrict(this,n)},t.prototype.transpose=function(n){return this.throwIfDisposed(),oe.transpose(this,n)},t.prototype.notEqual=function(n){return this.throwIfDisposed(),oe.notEqual(this,n)},t.prototype.notEqualStrict=function(n){return this.throwIfDisposed(),oe.notEqualStrict(this,n)},t.prototype.less=function(n){return this.throwIfDisposed(),oe.less(this,n)},t.prototype.lessStrict=function(n){return this.throwIfDisposed(),oe.lessStrict(this,n)},t.prototype.equal=function(n){return this.throwIfDisposed(),oe.equal(this,n)},t.prototype.equalStrict=function(n){return this.throwIfDisposed(),oe.equalStrict(this,n)},t.prototype.lessEqual=function(n){return this.throwIfDisposed(),oe.lessEqual(this,n)},t.prototype.lessEqualStrict=function(n){return this.throwIfDisposed(),oe.lessEqualStrict(this,n)},t.prototype.greater=function(n){return this.throwIfDisposed(),oe.greater(this,n)},t.prototype.greaterStrict=function(n){return this.throwIfDisposed(),oe.greaterStrict(this,n)},t.prototype.greaterEqual=function(n){return this.throwIfDisposed(),oe.greaterEqual(this,n)},t.prototype.greaterEqualStrict=function(n){return this.throwIfDisposed(),oe.greaterEqualStrict(this,n)},t.prototype.logicalAnd=function(n){return this.throwIfDisposed(),oe.logicalAnd(this,n)},t.prototype.logicalOr=function(n){return this.throwIfDisposed(),oe.logicalOr(this,n)},t.prototype.logicalNot=function(){return this.throwIfDisposed(),oe.logicalNot(this)},t.prototype.logicalXor=function(n){return this.throwIfDisposed(),oe.logicalXor(this,n)},t.prototype.where=function(n,e){return this.throwIfDisposed(),oe.where(n,this,e)},t.prototype.neg=function(){return this.throwIfDisposed(),oe.neg(this)},t.prototype.ceil=function(){return this.throwIfDisposed(),oe.ceil(this)},t.prototype.floor=function(){return this.throwIfDisposed(),oe.floor(this)},t.prototype.sign=function(){return this.throwIfDisposed(),oe.sign(this)},t.prototype.isNaN=function(){return this.throwIfDisposed(),oe.isNaN(this)},t.prototype.isInf=function(){return this.throwIfDisposed(),oe.isInf(this)},t.prototype.isFinite=function(){return this.throwIfDisposed(),oe.isFinite(this)},t.prototype.exp=function(){return this.throwIfDisposed(),oe.exp(this)},t.prototype.expm1=function(){return this.throwIfDisposed(),oe.expm1(this)},t.prototype.log=function(){return this.throwIfDisposed(),oe.log(this)},t.prototype.log1p=function(){return this.throwIfDisposed(),oe.log1p(this)},t.prototype.sqrt=function(){return this.throwIfDisposed(),oe.sqrt(this)},t.prototype.rsqrt=function(){return this.throwIfDisposed(),oe.rsqrt(this)},t.prototype.square=function(){return this.throwIfDisposed(),oe.square(this)},t.prototype.reciprocal=function(){return this.throwIfDisposed(),oe.reciprocal(this)},t.prototype.abs=function(){return this.throwIfDisposed(),oe.abs(this)},t.prototype.clipByValue=function(n,e){return this.throwIfDisposed(),oe.clipByValue(this,n,e)},t.prototype.relu=function(){return this.throwIfDisposed(),oe.relu(this)},t.prototype.relu6=function(){return this.throwIfDisposed(),oe.relu6(this)},t.prototype.elu=function(){return this.throwIfDisposed(),oe.elu(this)},t.prototype.selu=function(){return this.throwIfDisposed(),oe.selu(this)},t.prototype.leakyRelu=function(n){return n===void 0&&(n=.2),this.throwIfDisposed(),oe.leakyRelu(this,n)},t.prototype.prelu=function(n){return this.throwIfDisposed(),oe.prelu(this,n)},t.prototype.sigmoid=function(){return this.throwIfDisposed(),oe.sigmoid(this)},t.prototype.logSigmoid=function(){return this.throwIfDisposed(),oe.logSigmoid(this)},t.prototype.softplus=function(){return this.throwIfDisposed(),oe.softplus(this)},t.prototype.zerosLike=function(){return this.throwIfDisposed(),oe.zerosLike(this)},t.prototype.onesLike=function(){return this.throwIfDisposed(),oe.onesLike(this)},t.prototype.sin=function(){return this.throwIfDisposed(),oe.sin(this)},t.prototype.cos=function(){return this.throwIfDisposed(),oe.cos(this)},t.prototype.tan=function(){return this.throwIfDisposed(),oe.tan(this)},t.prototype.asin=function(){return this.throwIfDisposed(),oe.asin(this)},t.prototype.acos=function(){return this.throwIfDisposed(),oe.acos(this)},t.prototype.atan=function(){return this.throwIfDisposed(),oe.atan(this)},t.prototype.sinh=function(){return this.throwIfDisposed(),oe.sinh(this)},t.prototype.cosh=function(){return this.throwIfDisposed(),oe.cosh(this)},t.prototype.tanh=function(){return this.throwIfDisposed(),oe.tanh(this)},t.prototype.asinh=function(){return this.throwIfDisposed(),oe.asinh(this)},t.prototype.acosh=function(){return this.throwIfDisposed(),oe.acosh(this)},t.prototype.atanh=function(){return this.throwIfDisposed(),oe.atanh(this)},t.prototype.erf=function(){return this.throwIfDisposed(),oe.erf(this)},t.prototype.round=function(){return this.throwIfDisposed(),oe.round(this)},t.prototype.step=function(n){return n===void 0&&(n=0),this.throwIfDisposed(),oe.step(this,n)},t.prototype.softmax=function(n){return n===void 0&&(n=-1),this.throwIfDisposed(),oe.softmax(this,n)},t.prototype.logSoftmax=function(n){return n===void 0&&(n=-1),this.throwIfDisposed(),oe.logSoftmax(this,n)},t.prototype.resizeBilinear=function(n,e){return e===void 0&&(e=!1),this.throwIfDisposed(),oe.image.resizeBilinear(this,n,e)},t.prototype.resizeNearestNeighbor=function(n,e){return e===void 0&&(e=!1),this.throwIfDisposed(),oe.image.resizeNearestNeighbor(this,n,e)},t.prototype.conv1d=function(n,e,r,i,o,a){return i===void 0&&(i="NWC"),o===void 0&&(o=1),this.throwIfDisposed(),oe.conv1d(this,n,e,r,i,o,a)},t.prototype.conv2d=function(n,e,r,i,o,a){return i===void 0&&(i="NHWC"),o===void 0&&(o=[1,1]),this.throwIfDisposed(),oe.conv2d(this,n,e,r,i,o,a)},t.prototype.conv2dTranspose=function(n,e,r,i,o){return this.throwIfDisposed(),oe.conv2dTranspose(this,n,e,r,i,o)},t.prototype.depthwiseConv2D=function(n,e,r,i,o,a){return i===void 0&&(i="NHWC"),o===void 0&&(o=[1,1]),this.throwIfDisposed(),oe.depthwiseConv2d(this,n,e,r,i,o,a)},t.prototype.separableConv2d=function(n,e,r,i,o,a){return o===void 0&&(o=[1,1]),a===void 0&&(a="NHWC"),this.throwIfDisposed(),oe.separableConv2d(this,n,e,r,i,o,a)},t.prototype.avgPool=function(n,e,r,i){return this.throwIfDisposed(),oe.avgPool(this,n,e,r,i)},t.prototype.maxPool=function(n,e,r,i){return this.throwIfDisposed(),oe.maxPool(this,n,e,r,i)},t.prototype.localResponseNormalization=function(n,e,r,i){return n===void 0&&(n=5),e===void 0&&(e=1),r===void 0&&(r=1),i===void 0&&(i=.5),oe.localResponseNormalization(this,n,e,r,i)},t.prototype.pool=function(n,e,r,i,o){return this.throwIfDisposed(),oe.pool(this,n,e,r,i,o)},t.prototype.variable=function(n,e,r){return n===void 0&&(n=!0),this.throwIfDisposed(),so().makeVariable(this,n,e,r)},t.prototype.unsortedSegmentSum=function(n,e){return this.throwIfDisposed(),oe.unsortedSegmentSum(this,n,e)},t.prototype.batchToSpaceND=function(n,e){return this.throwIfDisposed(),oe.batchToSpaceND(this,n,e)},t.prototype.spaceToBatchND=function(n,e){return this.throwIfDisposed(),oe.spaceToBatchND(this,n,e)},t.prototype.topk=function(n,e){return n===void 0&&(n=1),e===void 0&&(e=!0),this.throwIfDisposed(),oe.topk(this,n,e)},t.prototype.stridedSlice=function(n,e,r,i,o,a,s,u){return i===void 0&&(i=0),o===void 0&&(o=0),a===void 0&&(a=0),s===void 0&&(s=0),u===void 0&&(u=0),this.throwIfDisposed(),oe.stridedSlice(this,n,e,r,i,o,a,s,u)},t.prototype.depthToSpace=function(n,e){return this.throwIfDisposed(),oe.depthToSpace(this,n,e)},t.prototype.fft=function(){return this.throwIfDisposed(),oe.spectral.fft(this)},t.prototype.ifft=function(){return this.throwIfDisposed(),oe.spectral.ifft(this)},t.prototype.rfft=function(){return this.throwIfDisposed(),oe.spectral.rfft(this)},t.prototype.irfft=function(){return this.throwIfDisposed(),oe.spectral.irfft(this)},t}();Object.defineProperty(_t,Symbol.hasInstance,{value:function(t){return!!t&&t.dataId!=null&&t.shape!=null&&t.dtype!=null}});var dw,fw,pw,hw,mw,Af=function(t){function n(e,r,i,o){var a=t.call(this,e.shape,e.dtype,e.dataId,o)||this;return a.trainable=r,a.name=i,a}return Hi(n,t),n.prototype.assign=function(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value ("+e.dtype+") and previous value ("+this.dtype+") must match");if(!Bn(e.shape,this.shape))throw new Error("shape of the new value ("+e.shape+") and previous value ("+this.shape+") must match");so().disposeTensor(this),this.dataId=e.dataId,so().incRef(this,null)},n.prototype.dispose=function(){so().disposeVariable(this),this.isDisposedInternal=!0},n}(_t);Object.defineProperty(Af,Symbol.hasInstance,{value:function(t){return t instanceof _t&&t.assign!=null&&t.assign instanceof Function}}),function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"}(dw||(dw={})),function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"}(fw||(fw={})),function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"}(pw||(pw={})),function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"}(hw||(hw={})),function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"}(mw||(mw={}));var Q9={float32:hw,int32:fw,bool:pw,complex64:mw};function bn(t,n){if(t==="string"||n==="string"){if(t==="string"&&n==="string")return"string";throw new Error("Can not upcast "+t+" with "+n)}return Q9[t][n]}function q0(t){return bn(t,"int32")}function dn(t,n){if(t.dtype===n.dtype)return[t,n];var e=bn(t.dtype,n.dtype);return[t.cast(e),n.cast(e)]}function aM(t,n){U(t.dtype===n.dtype,function(){return"The dtypes of the first("+t.dtype+") and second("+n.dtype+") input must match"})}function XS(t){var n=[];return function e(r,i,o){if(r!=null){if(r instanceof _t)return void i.push(r);if(a=r,!(!Array.isArray(a)&&typeof a!="object")){var a,s=r;for(var u in s){var l=s[u];o.has(l)||(o.add(l),e(l,i,o))}}}}(t,n,new Set),n}var K0,go=Object.freeze({makeTypesMatch:dn,assertTypesMatch:aM,isTensorInList:function(t,n){for(var e=0;e<n.length;e++)if(n[e].id===t.id)return!0;return!1},getTensorsInContainer:XS}),DN=function(){function t(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return t.prototype.dispose=function(){for(var n in this.registeredVariables)this.registeredVariables[n].dispose()},t}(),Z9=function(){function t(n){this.ENV=n,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new DN}return t.prototype.ready=function(){return Ae(this,void 0,void 0,function(){var n,e,r;return Oe(this,function(i){switch(i.label){case 0:if(this.pendingBackendInit!=null)return[2,this.pendingBackendInit.then(function(){})];if(this.backendInstance!=null)return[2];n=this.getSortedBackends(),e=0,i.label=1;case 1:return e<n.length?(r=n[e],[4,this.initializeBackend(r).success]):[3,5];case 2:return i.sent()?[4,this.setBackend(r)]:[3,4];case 3:return i.sent(),[2];case 4:return e++,[3,1];case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}})})},Object.defineProperty(t.prototype,"backend",{get:function(){if(this.pendingBackendInit!=null)throw new Error("Backend '"+this.backendName+"' has not yet been initialized. Make sure to await tf.ready() before calling other methods");if(this.backendInstance==null){var n=this.initializeBackendsAndReturnBest(),e=n.name;if(n.asyncInit)throw new Error("The highest priority backend '"+e+"' has not yet been initialized. Make sure to await tf.ready() before calling other methods");this.setBackend(e)}return this.backendInstance},enumerable:!0,configurable:!0}),t.prototype.backendNames=function(){return Object.keys(this.registryFactory)},t.prototype.findBackend=function(n){return!(n in this.registry)&&(!(n in this.registryFactory)||this.initializeBackend(n).asyncInit)?null:this.registry[n]},t.prototype.findBackendFactory=function(n){return n in this.registryFactory?this.registryFactory[n].factory:null},t.prototype.registerBackend=function(n,e,r){return r===void 0&&(r=1),n in this.registryFactory?(console.warn(n+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[n]={factory:e,priority:r},!0)},t.prototype.setBackend=function(n){return Ae(this,void 0,void 0,function(){var e,r,i;return Oe(this,function(o){switch(o.label){case 0:if(this.registryFactory[n]==null)throw new Error("Backend name '"+n+"' not found in registry");return this.backendName=n,this.registry[n]!=null?[3,4]:(this.backendInstance=null,e=this.initializeBackend(n),r=e.success,e.asyncInit?[4,r]:[3,2]);case 1:return i=o.sent(),[3,3];case 2:i=r,o.label=3;case 3:if(!i)return[2,!1];o.label=4;case 4:return this.backendInstance=this.registry[n],this.setupRegisteredKernels(),this.profiler=new X9(this.backendInstance),[2,!0]}})})},t.prototype.setupRegisteredKernels=function(){var n=this;sw(this.backendName).forEach(function(e){e.setupFunc!=null&&e.setupFunc(n.backendInstance)})},t.prototype.disposeRegisteredKernels=function(n){var e=this;sw(n).forEach(function(r){r.disposeFunc!=null&&r.disposeFunc(e.registry[n])})},t.prototype.initializeBackend=function(n){var e=this,r=this.registryFactory[n];if(r==null)throw new Error("Cannot initialize backend "+n+", no registration found.");try{var i=r.factory();if(Promise.resolve(i)===i){var o=++this.pendingBackendInitId,a=i.then(function(s){return!(o<e.pendingBackendInitId)&&(e.registry[n]=s,e.pendingBackendInit=null,!0)}).catch(function(s){return!(o<e.pendingBackendInitId)&&(e.pendingBackendInit=null,console.warn("Initialization of backend "+n+" failed"),console.warn(s.stack||s.message),!1)});return this.pendingBackendInit=a,{success:a,asyncInit:!0}}return this.registry[n]=i,{success:!0,asyncInit:!1}}catch(s){return console.warn("Initialization of backend "+n+" failed"),console.warn(s.stack||s.message),{success:!1,asyncInit:!1}}},t.prototype.removeBackend=function(n){if(!(n in this.registryFactory))throw new Error(n+" backend not found in registry");this.backendName===n&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,n in this.registry&&(this.disposeRegisteredKernels(n),this.registry[n].dispose(),delete this.registry[n]),delete this.registryFactory[n],this.backendName===n&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},t.prototype.getSortedBackends=function(){var n=this;if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(function(e,r){return n.registryFactory[r].priority-n.registryFactory[e].priority})},t.prototype.initializeBackendsAndReturnBest=function(){for(var n=this.getSortedBackends(),e=0;e<n.length;e++){var r=n[e],i=this.initializeBackend(r),o=i.success,a=i.asyncInit;if(a||o)return{name:r,asyncInit:a}}throw new Error("Could not initialize any backends, all backend initializations failed.")},t.prototype.moveData=function(n,e){var r=this.state.tensorInfo.get(e),i=r.backend,o=this.readSync(e);i.disposeData(e),r.backend=n,n.move(e,o,r.shape,r.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++},t.prototype.tidy=function(n,e){var r,i=this,o=null;if(e==null){if(typeof n!="function")throw new Error("Please provide a function to tidy()");e=n}else{if(typeof n!="string"&&!(n instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof e!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");o=n}return this.scopedRun(function(){return i.startScope(o)},function(){return i.endScope(r)},function(){return(r=e())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),r})},t.prototype.scopedRun=function(n,e,r){n();try{var i=r();return e(),i}catch(o){throw e(),o}},t.prototype.nextTensorId=function(){return t.nextTensorId++},t.prototype.nextVariableId=function(){return t.nextVariableId++},t.prototype.clone=function(n){var e=this.makeTensorFromDataId(n.dataId,n.shape,n.dtype),r={x:n};return this.addTapeNode(this.state.activeScope.name,r,[e],function(i){return{x:function(){return i.toFloat()}}},[]),e},t.prototype.runKernel=function(n,e,r,i,o){return this.runKernelFunc(null,e,null,n,r,i,o)},t.prototype.shouldCheckForMemLeaks=function(){return this.ENV.getBool("IS_TEST")},t.prototype.checkKernelForMemLeak=function(n,e,r){var i=this.backend.numDataIds(),o=0;r.forEach(function(u){o+=u.dtype==="complex64"?3:1});var a=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],s=i-e-o-a;if(s>0)throw new Error("Backend '"+this.backendName+"' has an internal memory leak ("+s+" data ids) after running '"+n+"'")},t.prototype.runKernelFunc=function(n,e,r,i,o,a,s){var u,l=this;a===void 0&&(a=[]),s===void 0&&(s=[]);var c,d=[],f=this.isTapeOn(),p=this.state.activeScope!=null?this.state.activeScope.name:"",h=function(b){f&&(d=b.map(function(w){return l.keep(l.clone(w))}))},v=this.state.numBytes,g=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);var m,y=qD(i,this.backendName);return c=y!=null?function(){var b=l.backend.numDataIds();m=y.kernelFunc({inputs:e,attrs:o,backend:l.backend});var w=Array.isArray(m)?m:[m];l.shouldCheckForMemLeaks()&&l.checkKernelForMemLeak(p,b,w);var x=w.map(function(E){var S=E.dataId,N=E.shape,k=E.dtype;return l.makeTensorFromDataId(S,N,k)}),C=x.filter(function(E,S){return s[S]});return h(a.slice().concat(C)),x}:function(){var b=l.backend.numDataIds();m=l.tidy(function(){return n(l.backend,h)});var w=Array.isArray(m)?m:[m];return l.shouldCheckForMemLeaks()&&l.checkKernelForMemLeak(p,b,w),w},this.scopedRun(function(){return l.state.kernelDepth++},function(){return l.state.kernelDepth--},function(){u=l.ENV.getBool("DEBUG")?l.profiler.profileKernel(p,e,function(){return c()}):c()}),f&&this.addTapeNode(p,e,u,r,d),this.state.profiling&&this.state.activeProfile.kernels.push({name:p,bytesAdded:this.state.numBytes-v,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-g,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(e).map(function(b){return e[b].shape}),outputShapes:u.map(function(b){return b.shape})}),Array.isArray(m)?u:u[0]},t.prototype.makeTensor=function(n,e,r,i){if(n==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",i=i||this.backend;var o=n;r==="string"&&Pa(n[0])&&(o=n.map(function(c){return rM(c)}));var a=i.write(o,e,r),s=new _t(e,r,a,this.nextTensorId());if(this.incRef(s,i),r==="string"){var u=this.state.tensorInfo.get(a),l=eM(o);this.state.numBytes+=l-u.bytes,u.bytes=l}return s},t.prototype.makeTensorFromDataId=function(n,e,r,i){var o=new _t(e,r=r||"float32",n,this.nextTensorId());return this.incRef(o,i),o},t.prototype.makeVariable=function(n,e,r,i){e===void 0&&(e=!0),r=r||this.nextVariableId().toString(),i!=null&&i!==n.dtype&&(n=n.asType(i));var o=new Af(n,e,r,this.nextTensorId());if(this.state.registeredVariables[o.name]!=null)throw new Error("Variable with name "+o.name+" was already registered");return this.state.registeredVariables[o.name]=o,this.incRef(o,this.backend),o},t.prototype.incRef=function(n,e){var r=this.state.tensorInfo.has(n.dataId)?this.state.tensorInfo.get(n.dataId).refCount:0;if(this.state.numTensors++,n.dtype==="string"&&this.state.numStringTensors++,r===0){this.state.numDataBuffers++;var i=0;n.dtype!=="complex64"&&n.dtype!=="string"&&(i=n.size*HS(n.dtype)),this.state.tensorInfo.set(n.dataId,{backend:e||this.backend,dtype:n.dtype,shape:n.shape,bytes:i,refCount:0}),this.state.numBytes+=i}this.state.tensorInfo.get(n.dataId).refCount++,n instanceof Af||this.track(n)},t.prototype.disposeTensor=function(n){if(this.state.tensorInfo.has(n.dataId)){this.state.numTensors--,n.dtype==="string"&&this.state.numStringTensors--;var e=this.state.tensorInfo.get(n.dataId);e.refCount<=1?(n.dtype!=="complex64"&&(this.state.numBytes-=e.bytes),this.state.numDataBuffers--,e.backend.disposeData(n.dataId),this.state.tensorInfo.delete(n.dataId)):this.state.tensorInfo.get(n.dataId).refCount--}},t.prototype.disposeVariables=function(){for(var n in this.state.registeredVariables){var e=this.state.registeredVariables[n];this.disposeVariable(e)}},t.prototype.disposeVariable=function(n){this.disposeTensor(n),this.state.registeredVariables[n.name]!=null&&delete this.state.registeredVariables[n.name]},t.prototype.memory=function(){var n=this.backend.memory();return n.numTensors=this.state.numTensors,n.numDataBuffers=this.state.numDataBuffers,n.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(n.unreliable=!0,n.reasons==null&&(n.reasons=[]),n.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),n},t.prototype.profile=function(n){return Ae(this,void 0,void 0,function(){var e,r;return Oe(this,function(i){return this.state.profiling=!0,e=this.state.numBytes,r=this.state.numTensors,this.state.activeProfile.kernels=[],this.state.activeProfile.result=n(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,this.state.activeProfile.kernels.map(function(o){return o.totalBytesSnapshot})),this.state.activeProfile.newBytes=this.state.numBytes-e,this.state.activeProfile.newTensors=this.state.numTensors-r,[2,this.state.activeProfile]})})},t.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&this.state.kernelDepth===0},t.prototype.addTapeNode=function(n,e,r,i,o){var a=this,s={id:this.state.nextTapeNodeId++,name:n,inputs:e,outputs:r,saved:o};i!=null&&(s.gradient=function(u){return u=u.map(function(l,c){if(l==null){var d=r[c],f=Rc(d.size,d.dtype);return a.makeTensor(f,d.shape,d.dtype)}return l}),i(u.length>1?u:u[0],o)}),this.state.activeTape.push(s)},t.prototype.keep=function(n){return n.kept=!0,n},t.prototype.startTape=function(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++},t.prototype.endTape=function(){this.state.gradientDepth--},t.prototype.startScope=function(n){var e={track:[],name:"unnamed scope",id:this.state.nextScopeId++};n&&(e.name=n),this.state.scopeStack.push(e),this.state.activeScope=e},t.prototype.endScope=function(n){for(var e=this,r=XS(n),i=new Set(r.map(function(u){return u.id})),o=0;o<this.state.activeScope.track.length;o++){var a=this.state.activeScope.track[o];a.kept||i.has(a.id)||a.dispose()}var s=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],r.forEach(function(u){u.kept||u.scopeId!==s.id||e.track(u)})},t.prototype.gradients=function(n,e,r,i){var o=this;if(i===void 0&&(i=!1),U(e.length>0,function(){return"gradients() received an empty list of xs."}),r!=null&&r.dtype!=="float32")throw new Error("dy must have 'float32' dtype, but has '"+r.dtype+"'");var a=this.scopedRun(function(){return o.startTape()},function(){return o.endTape()},function(){return o.tidy("forward",n)});U(a instanceof _t,function(){return"The result y returned by f() must be a tensor."});var s=function(u,l,c){for(var d={},f={},p=0;p<l.length;p++)d[l[p].id]=!0;for(p=0;p<u.length;p++){var h=(C=u[p]).inputs;for(var v in h){for(var g=h[v],m=!1,y=0;y<l.length;y++)if(d[g.id]){C.outputs.forEach(function(k){return d[k.id]=!0}),m=!0,f[C.id]=!0;break}if(m)break}}var b={};b[c.id]=!0;var w={};for(p=u.length-1;p>=0;p--)for(h=(C=u[p]).inputs,y=0;y<C.outputs.length;y++)if(b[C.outputs[y].id]){for(var v in h)b[h[v].id]=!0,w[C.id]=!0;break}var x=[];for(p=0;p<u.length;p++){var C;if(f[(C=u[p]).id]&&w[C.id]){var E={};for(var v in C.inputs){var S=C.inputs[v];d[S.id]&&(E[v]=S)}var N=Object.assign({},C);N.inputs=E,N.outputs=C.outputs,x.push(N)}}return x}(this.state.activeTape,e,a);if(!i&&s.length===0&&e.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",function(){var u,l,c={};c[a.id]=r??(u=a.shape,l=qS(Me(u),"float32"),K.makeTensor(l,u,"float32")),function(f,p,h){for(var v=function(m){var y=p[m],b=[];if(y.outputs.forEach(function(E){var S=f[E.id];S!=null?b.push(S):b.push(null)}),y.gradient==null)throw new Error("Cannot compute gradient: gradient function not found for "+y.name+".");var w=y.gradient(b),x=function(E){if(!(E in w))throw new Error("Cannot backprop through input "+E+". Available gradients found: "+Object.keys(w)+".");var S=h(function(){return w[E]()});if(S.dtype!=="float32")throw new Error("Error in gradient for op "+y.name+". The gradient of input "+E+" must have 'float32' dtype, but has '"+S.dtype+"'");var N=y.inputs[E];if(!Bn(S.shape,N.shape))throw new Error("Error in gradient for op "+y.name+". The gradient of input '"+E+"' has shape '"+S.shape+"', which does not match the shape of the input '"+N.shape+"'");if(f[N.id]==null)f[N.id]=S;else{var k=f[N.id];f[N.id]=k.add(S),k.dispose()}};for(var C in y.inputs)x(C)},g=p.length-1;g>=0;g--)v(g)}(c,s,function(f){return o.tidy(f)});var d=e.map(function(f){return c[f.id]});return o.state.gradientDepth===0&&(o.state.activeTape.forEach(function(f){for(var p in f.saved)f.saved[p].dispose()}),o.state.activeTape=null),{value:a,grads:d}})},t.prototype.customGrad=function(n){var e=this;return U(as(n),function(){return"The f passed in customGrad(f) must be a function."}),function(){for(var r,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];U(i.every(function(s){return s instanceof _t}),function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"});var a={};return i.forEach(function(s,u){a[u]=s}),e.runKernelFunc(function(s,u){return U((r=n.apply(void 0,i.concat([u]))).value instanceof _t,function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"}),U(as(r.gradFunc),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."}),r.value},a,function(s,u){var l=r.gradFunc(s,u),c=Array.isArray(l)?l:[l];U(c.length===i.length,function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."}),U(c.every(function(f){return f instanceof _t}),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."});var d={};return c.forEach(function(f,p){d[p]=function(){return f}}),d})}},t.prototype.readSync=function(n){return this.state.tensorInfo.get(n).backend.readSync(n)},t.prototype.read=function(n){return this.state.tensorInfo.get(n).backend.read(n)},t.prototype.fromPixels=function(n,e){return this.backend.fromPixels(n,e)},t.prototype.time=function(n){return Ae(this,void 0,void 0,function(){var e,r;return Oe(this,function(i){switch(i.label){case 0:return e=Di(),[4,this.backend.time(n)];case 1:return(r=i.sent()).wallMs=Di()-e,[2,r]}})})},t.prototype.track=function(n){return this.state.activeScope!=null&&(n.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(n)),n},Object.defineProperty(t.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!0,configurable:!0}),t.prototype.reset=function(){for(var n in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new DN,this.registry)this.disposeRegisteredKernels(n),this.registry[n].dispose(),delete this.registry[n];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},t.nextTensorId=0,t.nextVariableId=0,t}(),K=function(){var t=function(){if(K0==null){var e=void 0;if(typeof window<"u")e=window;else if(typeof global<"u")e=global;else if(typeof process<"u")e=process;else{if(typeof self>"u")throw new Error("Could not find a global object");e=self}K0=e}return K0}();if(t._tfengine==null){var n=new GD(t);t._tfengine=new Z9(n)}return function(e){$S=e}(t._tfengine.ENV),so=function(){return t._tfengine},t._tfengine}();function sM(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}var _o=ie();_o.registerFlag("DEBUG",function(){return!1},function(t){t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),_o.registerFlag("IS_BROWSER",function(){return sM()}),_o.registerFlag("IS_NODE",function(){return typeof process<"u"&&process.versions!==void 0&&process.versions.node!==void 0}),_o.registerFlag("IS_CHROME",function(){return typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}),_o.registerFlag("PROD",function(){return!1}),_o.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",function(){return _o.getBool("DEBUG")}),_o.registerFlag("DEPRECATION_WARNINGS_ENABLED",function(){return!0}),_o.registerFlag("IS_TEST",function(){return!1});var Of,qr,Wr,Ms={},X0={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function uM(t,n){Ms[t]=n}function Eo(t){t in Ms||(Ms[t]=function(e){if(e!==1&&e!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var r=lM(e);return r.addEventListener("webglcontextlost",function(i){i.preventDefault(),delete Ms[e]},!1),e===1?r.getContext("webgl",X0)||r.getContext("experimental-webgl",X0):r.getContext("webgl2",X0)}(t));var n=Ms[t];return n.isContextLost()?(delete Ms[t],Eo(t)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),Ms[t])}function lM(t){if(typeof OffscreenCanvas<"u"&&t===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function vg(t,n){return[n,t]}function Yd(t){var n=Me(t);return lv(Math.ceil(n/4))}function np(t,n){return[Math.max(1,Math.ceil(n/2)),Math.max(1,Math.ceil(t/2))]}function YS(t,n){var e,r,i,o,a,s,u,l,c,d=t;return ie().getNumber("WEBGL_VERSION")===2?(e=d.R32F,r=d.R16F,i=d.RGBA16F,o=d.RGBA32F,a=d.RED,s=4,u=1,l=d.HALF_FLOAT,c=d.FLOAT):(e=t.RGBA,r=t.RGBA,i=t.RGBA,o=d.RGBA,a=t.RGBA,s=4,u=4,l=n!=null?n.HALF_FLOAT_OES:null,c=t.FLOAT),{internalFormatFloat:e,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:i,internalFormatPackedFloat:o,textureFormatFloat:a,downloadTextureFormat:t.RGBA,downloadUnpackNumChannels:s,defaultNumChannels:u,textureTypeHalfFloat:l,textureTypeFloat:c}}function Ne(t,n,e){var r=e();return n&&function(i){var o=i.getError();if(o!==i.NO_ERROR)throw new Error("WebGL Error: "+dM(i,o))}(t),r}(function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"})(Of||(Of={})),function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"}(qr||(qr={})),function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(Wr||(Wr={}));var e7=596e-10,t7=65504;function cM(t){return!!(ie().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||e7<Math.abs(t)&&Math.abs(t)<t7)}function dM(t,n){switch(n){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+n}}function lm(t,n,e){return sa(t,n,function(){return t.getExtension(e)},'Extension "'+e+'" not supported on this browser.')}function fM(t,n,e){var r=sa(t,n,function(){return t.createShader(t.VERTEX_SHADER)},"Unable to create vertex WebGLShader.");if(Ne(t,n,function(){return t.shaderSource(r,e)}),Ne(t,n,function(){return t.compileShader(r)}),t.getShaderParameter(r,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(r)),new Error("Failed to compile vertex shader.");return r}function pM(t,n,e){var r=sa(t,n,function(){return t.createShader(t.FRAGMENT_SHADER)},"Unable to create fragment WebGLShader.");if(Ne(t,n,function(){return t.shaderSource(r,e)}),Ne(t,n,function(){return t.compileShader(r)}),t.getShaderParameter(r,t.COMPILE_STATUS)===!1)throw function(i,o){var a=n7.exec(o);if(a==null)return console.log("Couldn't parse line number in error: "+o),void console.log(i);for(var s=+a[1],u=i.split(`
`),l=u.length.toString().length+2,c=u.map(function(g,m){return Zs((m+1).toString(),l)+g}),d=0,f=0;f<c.length;f++)d=Math.max(c[f].length,d);var p=c.slice(0,s-1),h=c.slice(s-1,s),v=c.slice(s);console.log(p.join(`
`)),console.log(o.split(`
`)[0]),console.log("%c "+Zs(h[0],d),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(v.join(`
`))}(e,t.getShaderInfoLog(r)),new Error("Failed to compile fragment shader.");return r}var cm,dm,n7=/ERROR: [0-9]+:([0-9]+):/g;function hM(t,n){return sa(t,n,function(){return t.createProgram()},"Unable to create WebGLProgram.")}function mM(t,n,e){if(Ne(t,n,function(){return t.linkProgram(e)}),t.getProgramParameter(e,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function fm(t,n,e){if(Ne(t,n,function(){return t.validateProgram(e)}),t.getProgramParameter(e,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function vM(t,n,e){var r=sa(t,n,function(){return t.createBuffer()},"Unable to create WebGLBuffer");return Ne(t,n,function(){return t.bindBuffer(t.ARRAY_BUFFER,r)}),Ne(t,n,function(){return t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW)}),r}function gM(t,n,e){var r=sa(t,n,function(){return t.createBuffer()},"Unable to create WebGLBuffer");return Ne(t,n,function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,r)}),Ne(t,n,function(){return t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW)}),r}function yM(t,n){return sa(t,n,function(){return t.createTexture()},"Unable to create WebGLTexture.")}function bM(t,n){var e=ie().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||n<=0){var r="["+t+"x"+n+"]";throw new Error("Requested texture size "+r+" is invalid.")}if(t>e||n>e)throw r="["+t+"x"+n+"]",new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+("["+e+"x"+e+"]")+".")}function wM(t,n){return sa(t,n,function(){return t.createFramebuffer()},"Unable to create WebGLFramebuffer.")}function vw(t,n,e,r,i,o,a,s){var u=t.getAttribLocation(e,r);return u!==-1&&(Ne(t,n,function(){return t.bindBuffer(t.ARRAY_BUFFER,i)}),Ne(t,n,function(){return t.vertexAttribPointer(u,o,t.FLOAT,!1,a,s)}),Ne(t,n,function(){return t.enableVertexAttribArray(u)}),!0)}function xM(t,n,e,r){TM(t,r),Ne(t,n,function(){return t.activeTexture(t.TEXTURE0+r)}),Ne(t,n,function(){return t.bindTexture(t.TEXTURE_2D,e)})}function SM(t,n,e,r){return sa(t,n,function(){return t.getUniformLocation(e,r)},'uniform "'+r+'" not present in program.')}function EM(t,n,e){return t.getUniformLocation(n,e)}function CM(t,n,e,r,i,o){Ne(t,n,function(){return xM(t,n,r,o)}),Ne(t,n,function(){return t.uniform1i(i,o)})}function pm(t,n,e,r){Ne(t,n,function(){return t.bindFramebuffer(t.FRAMEBUFFER,r)}),Ne(t,n,function(){return t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0)})}function gw(t,n,e){Ne(t,n,function(){return t.bindFramebuffer(t.FRAMEBUFFER,e)}),Ne(t,n,function(){return t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)})}function Dd(t){var n=t.checkFramebufferStatus(t.FRAMEBUFFER);if(n!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+RM(t,n))}function RM(t,n){switch(n){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+n}}function sa(t,n,e,r){var i=Ne(t,n,function(){return e()});if(i==null)throw new Error(r);return i}function TM(t,n){var e=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=n+t.TEXTURE0;if(r<t.TEXTURE0||r>e)throw new Error("textureUnit must be in "+("[gl.TEXTURE0, gl.TEXTURE"+e+"]")+".")}function Df(t,n){return n===void 0&&(n=2),Me(t.slice(0,t.length-n))}function Mf(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function hm(t){var n=[1,1,1];return t.length===0||t.length===1&&t[0]===1||(n=[Df(t)].concat(Mf(t))),n}function NM(t,n){var e;n===void 0&&(n=!1);var r=ie().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(n&&(r*=2,(t=t.map(function(l,c){return c>=t.length-2?WS(t[c]):t[c]})).length===1&&(t=[2,t[0]])),t.length!==2){var i=_a(t);t=i.newShape}var o=Me(t);if(t.length<=1&&o<=r)return[1,o];if(t.length===2&&t[0]<=r&&t[1]<=r)return t;if(t.length===3&&t[0]*t[1]<=r&&t[2]<=r)return[t[0]*t[1],t[2]];if(t.length===3&&t[0]<=r&&t[1]*t[2]<=r)return[t[0],t[1]*t[2]];if(t.length===4&&t[0]*t[1]*t[2]<=r&&t[3]<=r)return[t[0]*t[1]*t[2],t[3]];if(t.length===4&&t[0]<=r&&t[1]*t[2]*t[3]<=r)return[t[0],t[1]*t[2]*t[3]];if(n){var a=Df(t),s=2,u=2;return t.length&&(s=(e=Mf(t))[0],u=e[1]),lv(o=a*(s/2)*(u/2)).map(function(l){return 2*l})}return lv(o)}function gh(t){return t%2==0}function Md(t,n){if(Bn(t=t.slice(-2),n=n.slice(-2))||!t.length||!n.length||t[0]===0||t[1]===0||n[0]===0||n[1]===0)return!0;if(t.length!==n.length){var e=t.slice(-1)[0],r=n.slice(-1)[0];if(e===r||gh(e)&&gh(r)&&(t[0]===1||n[0]===1))return!0}return t[1]===n[1]&&gh(t[0])&&gh(n[0])}function kM(t){if(cm==null){var n=Eo(t);cm=n.getParameter(n.MAX_TEXTURE_SIZE)}return cm}function IM(t){if(dm==null){var n=Eo(t);dm=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,dm)}function _M(t){if(t===0)return 0;var n=Eo(t);return Mi(n,"EXT_disjoint_timer_query_webgl2")&&t===2?2:Mi(n,"EXT_disjoint_timer_query")?1:0}function Mi(t,n){return t.getExtension(n)!=null}function yw(t){try{if(Eo(t)!=null)return!0}catch{return!1}return!1}function AM(t){if(t===0)return!1;var n=Eo(t);if(t===1){if(!Mi(n,"OES_texture_float"))return!1}else if(!Mi(n,"EXT_color_buffer_float"))return!1;return bw(n)}function OM(t){if(t===0)return!1;var n=Eo(t);if(t!==1){if(Mi(n,"EXT_color_buffer_float"))return bw(n);if(Mi(n,"EXT_color_buffer_half_float")){var e=n.getExtension("EXT_color_buffer_half_float");return function(r,i){var o=YS(r,i),a=r.createTexture();r.bindTexture(r.TEXTURE_2D,a),r.texImage2D(r.TEXTURE_2D,0,o.internalFormatHalfFloat,1,1,0,o.textureFormatFloat,o.textureTypeHalfFloat,null);var s=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,s),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,a,0);var u=r.checkFramebufferStatus(r.FRAMEBUFFER)===r.FRAMEBUFFER_COMPLETE;return r.bindTexture(r.TEXTURE_2D,null),r.bindFramebuffer(r.FRAMEBUFFER,null),r.deleteTexture(a),r.deleteFramebuffer(s),u}(n,e)}return!1}return!!Mi(n,"OES_texture_float")&&!!Mi(n,"WEBGL_color_buffer_float")&&bw(n)}function bw(t){var n=YS(t),e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e),t.texImage2D(t.TEXTURE_2D,0,n.internalFormatFloat,1,1,0,n.textureFormatFloat,n.textureTypeFloat,null);var r=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,r),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0);var i=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(e),t.deleteFramebuffer(r),i}function DM(t){return t===2&&Eo(t).fenceSync!=null}var r7=Object.freeze({callAndCheck:Ne,canBeRepresented:cM,getWebGLErrorMessage:dM,getExtensionOrThrow:lm,createVertexShader:fM,createFragmentShader:pM,createProgram:hM,linkProgram:mM,validateProgram:fm,createStaticVertexBuffer:vM,createStaticIndexBuffer:gM,getNumChannels:function(){return ie().getNumber("WEBGL_VERSION")===2?1:4},createTexture:yM,validateTextureSize:bM,createFramebuffer:wM,bindVertexBufferToProgramAttribute:vw,bindTextureUnit:xM,unbindTextureUnit:function(t,n,e){TM(t,e),Ne(t,n,function(){return t.activeTexture(t.TEXTURE0+e)}),Ne(t,n,function(){return t.bindTexture(t.TEXTURE_2D,null)})},getProgramUniformLocationOrThrow:SM,getProgramUniformLocation:EM,bindTextureToProgramUniformSampler:CM,bindCanvasToFramebuffer:function(t,n){Ne(t,n,function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)}),Ne(t,n,function(){return t.viewport(0,0,t.canvas.width,t.canvas.height)}),Ne(t,n,function(){return t.scissor(0,0,t.canvas.width,t.canvas.height)})},bindColorTextureToFramebuffer:pm,unbindColorTextureFromFramebuffer:gw,validateFramebuffer:Dd,getFramebufferErrorMessage:RM,getBatchDim:Df,getRowsCols:Mf,getShapeAs3D:hm,getTextureShapeFromLogicalShape:NM,isReshapeFree:Md,getWebGLMaxTextureSize:kM,resetMaxTextureSize:function(){cm=null},resetMaxTexturesInShader:function(){dm=null},getMaxTexturesInShader:IM,getWebGLDisjointQueryTimerVersion:_M,hasExtension:Mi,isWebGLVersionEnabled:yw,isCapableOfRenderingToFloatTexture:AM,isDownloadFloatTextureEnabled:OM,isWebGLFenceEnabled:DM}),Ue=ie();function i7(){ie().set("PROD",!0)}function o7(){ie().set("DEBUG",!0)}function a7(){ie().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function gg(t){ie().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(t+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function s7(){K.disposeVariables()}function u7(){return K}function dv(){return K.memory()}function l7(t){return K.profile(t)}function ee(t,n){return K.tidy(t,n)}function nt(t){XS(t).forEach(function(n){return n.dispose()})}function bo(t){return K.keep(t)}function c7(t){return K.time(t)}function d7(t){return K.setBackend(t)}function f7(){return K.ready()}function p7(){return K.backendName}function h7(t){K.removeBackend(t)}function m7(t){return K.findBackend(t)}function v7(t){return K.findBackendFactory(t)}function g7(t,n,e){return e===void 0&&(e=1),K.registerBackend(t,n,e)}function MM(){return K.backend}function y7(t,n){ie().setPlatform(t,n)}function ww(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];ie().getBool("IS_TEST")||console.warn.apply(console,t)}function wo(t,n){var e=t;if(Kn(t))return n==="string"?[]:[t.length];if(!Array.isArray(t))return[];for(var r=[];Array.isArray(e)||Kn(e)&&n!=="string";)r.push(e.length),e=e[0];return Array.isArray(t)&&ie().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function i(o,a,s){if(s=s||[],!Array.isArray(o)&&!Kn(o))return void U(a.length===0,function(){return"Element arr["+s.join("][")+"] is a primitive, but should be an array/TypedArray of "+a[0]+" elements"});U(a.length>0,function(){return"Element arr["+s.join("][")+"] should be a primitive, but is an array of "+o.length+" elements"}),U(o.length===a[0],function(){return"Element arr["+s.join("][")+"] should have "+a[0]+" elements, but has "+o.length+" elements"});for(var u=a.slice(1),l=0;l<o.length;++l)i(o[l],u,s.concat(l))}(t,r,[]),r}function MN(t,n,e,r){if(t!=null&&(t!=="numeric"&&t!==n||t==="numeric"&&n==="string"))throw new Error("Argument '"+e+"' passed to '"+r+"' must be "+t+" tensor, but got "+n+" tensor")}function V(t,n,e,r){if(r===void 0&&(r="numeric"),t instanceof _t)return MN(r,t.dtype,n,e),t;var i=Cc(t);if(i!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(i=r),MN(r,i,n,e),t==null||!Kn(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){var o=t==null?"null":t.constructor.name;throw new Error("Argument '"+n+"' passed to '"+e+"' must be a Tensor or TensorLike, but got '"+o+"'")}var a=wo(t,i);Kn(t)||Array.isArray(t)||(t=[t]);var s=i!=="string"?GS(t,i,ie().getBool("DEBUG")):ta(t,[],!0);return K.makeTensor(s,a,i)}function Pf(t,n,e,r){if(r===void 0&&(r="numeric"),!Array.isArray(t))throw new Error("Argument "+n+" passed to "+e+" must be a `Tensor[]` or `TensorLike[]`");return t.map(function(i,o){return V(i,n+"["+o+"]",e)},r)}function JS(t,n){for(var e=0;e<t.length;++e)if(t[t.length-e-1]!==n-1-e)return!1;return!0}function PM(t,n,e){for(var r=t.length+n.length,i=[],o=0,a=0,s=0;s<r;s++)e.indexOf(s)===-1?i.push(t[o++]):i.push(n[a++]);return i}function Gn(t,n){for(var e=[],r=t.length,i=0;i<r;i++)n.indexOf(i)===-1&&e.push(t[i]);return[e,n.map(function(o){return t[o]})]}function ei(t,n){return PM(t,n.map(function(e){return 1}),n)}function Tr(t,n,e){U(JS(n,e),function(){return t+" supports only inner-most axes for now. Got axes "+n+" and rank-"+e+" input."})}function Gi(t,n){if(JS(t,n))return null;for(var e=[],r=0;r<n;++r)t.indexOf(r)===-1&&e.push(r);return t.forEach(function(i){return e.push(i)}),e}function yg(t){return t.map(function(n,e){return[e,n]}).sort(function(n,e){return n[1]-e[1]}).map(function(n){return n[0]})}function qi(t,n){for(var e=[],r=n-t;r<n;++r)e.push(r);return e}function LM(t,n){var e=t[0].length;t.forEach(function(i,o){U(i.length===e,function(){return"Error in concat"+e+"D: rank of tensors["+o+"] must be the same as the rank of the rest ("+e+")"})}),U(n>=0&&n<e,function(){return"Error in concat"+e+"D: axis must be between 0 and "+(e-1)+"."});var r=t[0];t.forEach(function(i,o){for(var a=0;a<e;a++)U(a===n||i[a]===r[a],function(){return"Error in concat"+e+"D: Shape of tensors["+o+"] ("+i+") does not match the shape of the rest ("+r+") along the non-concatenated axis "+o+"."})})}function cu(t,n){for(var e=t[0].slice(),r=1;r<t.length;r++)e[n]+=t[r][n];return e}function X(t){var n=Object.keys(t);if(n.length!==1)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+n.length+" keys.");var e=n[0],r=t[e];e.endsWith("_")&&(e=e.substring(0,e.length-1));var i=function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];K.startScope(e);try{var s=r.apply(void 0,o);return s instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),K.endScope(s),s}catch(u){throw K.endScope(null),u}};return Object.defineProperty(i,"name",{value:e,configurable:!0}),i}Ue.registerFlag("HAS_WEBGL",function(){return Ue.getNumber("WEBGL_VERSION")>0}),Ue.registerFlag("WEBGL_VERSION",function(){return yw(2)?2:yw(1)?1:0}),Ue.registerFlag("WEBGL_BUFFER_SUPPORTED",function(){return Ue.get("WEBGL_VERSION")===2}),Ue.registerFlag("WEBGL_CPU_FORWARD",function(){return!0}),Ue.registerFlag("WEBGL_FORCE_F16_TEXTURES",function(){return!1}),Ue.registerFlag("WEBGL_PACK",function(){return Ue.getBool("HAS_WEBGL")}),Ue.registerFlag("WEBGL_PACK_NORMALIZATION",function(){return Ue.getBool("WEBGL_PACK")}),Ue.registerFlag("WEBGL_PACK_CLIP",function(){return Ue.getBool("WEBGL_PACK")}),Ue.registerFlag("WEBGL_PACK_DEPTHWISECONV",function(){return!1}),Ue.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",function(){return Ue.getBool("WEBGL_PACK")}),Ue.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",function(){return Ue.getBool("WEBGL_PACK")}),Ue.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",function(){return Ue.getBool("WEBGL_PACK")}),Ue.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",function(){return Ue.getBool("WEBGL_PACK")}),Ue.registerFlag("WEBGL_PACK_REDUCE",function(){return Ue.getBool("WEBGL_PACK")}),Ue.registerFlag("WEBGL_LAZILY_UNPACK",function(){return Ue.getBool("WEBGL_PACK")}),Ue.registerFlag("WEBGL_CONV_IM2COL",function(){return Ue.getBool("WEBGL_PACK")}),Ue.registerFlag("WEBGL_MAX_TEXTURE_SIZE",function(){return kM(Ue.getNumber("WEBGL_VERSION"))}),Ue.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",function(){return IM(Ue.getNumber("WEBGL_VERSION"))}),Ue.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",function(){var t=Ue.getNumber("WEBGL_VERSION");return t===0?0:_M(t)}),Ue.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",function(){return Ue.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&(t=navigator.userAgent||navigator.vendor||window.opera,!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))));var t}),Ue.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",function(){return AM(Ue.getNumber("WEBGL_VERSION"))}),Ue.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",function(){return!Ue.getBool("WEBGL_FORCE_F16_TEXTURES")&&Ue.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")}),Ue.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",function(){return OM(Ue.getNumber("WEBGL_VERSION"))}),Ue.registerFlag("WEBGL_FENCE_API_ENABLED",function(){return DM(Ue.getNumber("WEBGL_VERSION"))}),Ue.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",function(){return Ue.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0}),oM=gg;var Nn=X({complex_:function(t,n){var e=V(t,"real","complex"),r=V(n,"imag","complex");return gt(e.shape,r.shape,"real and imag shapes, "+e.shape+" and "+r.shape+", must match in call to tf.complex()."),K.runKernelFunc(function(i){return i.complex(e,r)},{$real:e,$imag:r})}}),Ir=X({real_:function(t){var n=V(t,"input","real");return K.runKernelFunc(function(e){return e.real(n)},{$input:n})}}),vi=X({imag_:function(t){var n=V(t,"input","imag");return K.runKernelFunc(function(e){return e.imag(n)},{$input:n})}});function mn(t,n,e){return gs(t,n,wo(t,e),e)}function gs(t,n,e,r){if(r==null&&(r=Cc(t)),r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!Kn(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(n!=null){KS(n);var i=Me(n),o=Me(e);U(i===o,function(){return"Based on the provided shape, ["+n+"], the tensor should have "+i+" values but has "+o});for(var a=0;a<e.length;++a){var s=e[a],u=a!==e.length-1||s!==Me(n.slice(a));U(e[a]===n[a]||!u,function(){return"Error creating a new Tensor. Inferred shape ("+e+") does not match the provided shape ("+n+"). "})}}return Kn(t)||Array.isArray(t)||(t=[t]),n=n||e,t=r!=="string"?GS(t,r,ie().getBool("DEBUG")):ta(t,[],!0),K.makeTensor(t,n,r)}function ke(t,n){if((Kn(t)&&n!=="string"||Array.isArray(t))&&n!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(n==="string"&&Kn(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return gs(t,[],[],n)}function Fr(t,n){Su(t);var e=wo(t,n);if(e.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return gs(t,null,e,n)}function Ho(t,n,e){if(Su(t),n!=null&&n.length!==2)throw new Error("tensor2d() requires shape to have two numbers");var r=wo(t,e);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&n==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return gs(t,n,r,e)}function QS(t,n,e){if(Su(t),n!=null&&n.length!==3)throw new Error("tensor3d() requires shape to have three numbers");var r=wo(t,e);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&n==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return gs(t,n,r,e)}function Ra(t,n,e){if(Su(t),n!=null&&n.length!==4)throw new Error("tensor4d() requires shape to have four numbers");var r=wo(t,e);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&n==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return gs(t,n,r,e)}function FM(t,n,e){if(Su(t),n!=null&&n.length!==5)throw new Error("tensor5d() requires shape to have five numbers");var r=wo(t,e);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&n==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return gs(t,n,r,e)}function zM(t,n,e){if(Su(t),n!=null&&n.length!==6)throw new Error("tensor6d() requires shape to have six numbers");var r=wo(t,e);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&n==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return gs(t,n=n||r,r,e)}function ZS(t,n,e,r){return n===void 0&&(n=!0),K.makeVariable(t,n,e,r)}function Co(t,n){if(n===void 0&&(n="float32"),n==="complex64"){var e=Co(t,"float32"),r=It(t,"float32");return Nn(e,r)}var i=qS(Me(t),n);return K.makeTensor(i,t,n)}function It(t,n){if(n===void 0&&(n="float32"),n==="complex64"){var e=It(t,"float32"),r=It(t,"float32");return Nn(e,r)}var i=Rc(Me(t),n);return K.makeTensor(i,t,n)}function Tc(t,n,e){return K.runKernelFunc(function(r){return r.fill(t,n,e)},{})}function eE(t,n,e){if(e<=0)throw new Error("The number of values should be positive.");return K.runKernelFunc(function(r){return r.linspace(t,n,e)},{})}function bg(t,n,e,r){if(e===void 0&&(e=1),r===void 0&&(r="float32"),e===0)throw new Error("Cannot have a step of zero");if(t===n||t<n&&e<0||n<t&&e>1)return It([0],r);var i=Rc(Math.abs(Math.ceil((n-t)/e)),r);n<t&&e===1&&(e=-1),i[0]=t;for(var o=1;o<i.length;o++)i[o]=i[o-1]+e;return Fr(i,r)}var ti=X({onesLike_:function(t){var n=V(t,"x","onesLike");if(n.dtype==="complex64"){var e=ti(Ir(n)),r=dt(vi(n));return Nn(e,r)}return K.runKernelFunc(function(i){return i.onesLike(n)},{$x:n},function(i,o){return{$x:function(){return dt(i)}}})}}),dt=X({zerosLike_:function(t){var n=V(t,"x","zerosLike");return K.runKernelFunc(function(e){return e.zerosLike(n)},{$x:n},function(e,r){return{$x:function(){return dt(e)}}})}}),lr=X({concat_:function(t,n){n===void 0&&(n=0),U(t.length>=1,function(){return"Pass at least one tensor to concat"});var e=Pf(t,"tensors","concat");e[0].dtype==="complex64"&&e.forEach(function(a){if(a.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype `+a.dtype+". ")}),n=Vn(n,e[0].shape)[0];var r=cu(e.map(function(a){return a.shape}),n);if(Me(r)===0)return mn([],r);if((e=e.filter(function(a){return a.size>0})).length===1)return e[0];var i=e.map(function(a){return a.shape});LM(i,n);var o=e;return K.runKernelFunc(function(a){return a.concat(e,n)},o,function(a){var s=i.map(function(u){return u[n]});return Go(a,s,n).map(function(u){return function(){return u}})})}}),tE=X({concat1d_:function(t){return lr(t,0)}}),nE=X({concat2d_:function(t,n){return lr(t,n)}}),rE=X({concat3d_:function(t,n){return lr(t,n)}}),iE=X({concat4d_:function(t,n){return lr(t,n)}}),Go=X({split_:function(t,n,e){e===void 0&&(e=0);var r,i=V(t,"x","split");return e=Vn(e,i.shape)[0],typeof n=="number"?(U(i.shape[e]%n==0,function(){return"Number of splits must evenly divide the axis."}),r=new Array(n).fill(i.shape[e]/n)):(U(i.shape[e]===n.reduce(function(o,a){return o+a}),function(){return"The sum of sizes must match the size of the axis dimension."}),r=n),K.runKernelFunc(function(o){return o.split(i,r,e)},{$x:i},function(o){return{$x:function(){return lr(o,e)}}})}});function Eu(t,n){return t(n={exports:{}},n.exports),n.exports}var b7=Eu(function(t){(function(n,e,r){function i(s){var u,l=this,c=(u=4022871197,function(d){d=d.toString();for(var f=0;f<d.length;f++){var p=.02519603282416938*(u+=d.charCodeAt(f));p-=u=p>>>0,u=(p*=u)>>>0,u+=4294967296*(p-=u)}return 23283064365386963e-26*(u>>>0)});l.next=function(){var d=2091639*l.s0+23283064365386963e-26*l.c;return l.s0=l.s1,l.s1=l.s2,l.s2=d-(l.c=0|d)},l.c=1,l.s0=c(" "),l.s1=c(" "),l.s2=c(" "),l.s0-=c(s),l.s0<0&&(l.s0+=1),l.s1-=c(s),l.s1<0&&(l.s1+=1),l.s2-=c(s),l.s2<0&&(l.s2+=1),c=null}function o(s,u){return u.c=s.c,u.s0=s.s0,u.s1=s.s1,u.s2=s.s2,u}function a(s,u){var l=new i(s),c=u&&u.state,d=l.next;return d.int32=function(){return 4294967296*l.next()|0},d.double=function(){return d()+11102230246251565e-32*(2097152*d()|0)},d.quick=d,c&&(typeof c=="object"&&o(c,l),d.state=function(){return o(l,{})}),d}e&&e.exports?e.exports=a:r&&r.amd?r(function(){return a}):this.alea=a})(0,t,!1)}),w7=Eu(function(t){(function(n,e,r){function i(s){var u=this,l="";u.x=0,u.y=0,u.z=0,u.w=0,u.next=function(){var d=u.x^u.x<<11;return u.x=u.y,u.y=u.z,u.z=u.w,u.w^=u.w>>>19^d^d>>>8},s===(0|s)?u.x=s:l+=s;for(var c=0;c<l.length+64;c++)u.x^=0|l.charCodeAt(c),u.next()}function o(s,u){return u.x=s.x,u.y=s.y,u.z=s.z,u.w=s.w,u}function a(s,u){var l=new i(s),c=u&&u.state,d=function(){return(l.next()>>>0)/4294967296};return d.double=function(){do var f=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(f===0);return f},d.int32=l.next,d.quick=d,c&&(typeof c=="object"&&o(c,l),d.state=function(){return o(l,{})}),d}e&&e.exports?e.exports=a:r&&r.amd?r(function(){return a}):this.xor128=a})(0,t,!1)}),x7=Eu(function(t){(function(n,e,r){function i(s){var u=this,l="";u.next=function(){var d=u.x^u.x>>>2;return u.x=u.y,u.y=u.z,u.z=u.w,u.w=u.v,(u.d=u.d+362437|0)+(u.v=u.v^u.v<<4^d^d<<1)|0},u.x=0,u.y=0,u.z=0,u.w=0,u.v=0,s===(0|s)?u.x=s:l+=s;for(var c=0;c<l.length+64;c++)u.x^=0|l.charCodeAt(c),c==l.length&&(u.d=u.x<<10^u.x>>>4),u.next()}function o(s,u){return u.x=s.x,u.y=s.y,u.z=s.z,u.w=s.w,u.v=s.v,u.d=s.d,u}function a(s,u){var l=new i(s),c=u&&u.state,d=function(){return(l.next()>>>0)/4294967296};return d.double=function(){do var f=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(f===0);return f},d.int32=l.next,d.quick=d,c&&(typeof c=="object"&&o(c,l),d.state=function(){return o(l,{})}),d}e&&e.exports?e.exports=a:r&&r.amd?r(function(){return a}):this.xorwow=a})(0,t,!1)}),S7=Eu(function(t){(function(n,e,r){function i(s){var u=this;u.next=function(){var l,c,d=u.x,f=u.i;return l=d[f],c=(l^=l>>>7)^l<<24,c^=(l=d[f+1&7])^l>>>10,c^=(l=d[f+3&7])^l>>>3,c^=(l=d[f+4&7])^l<<7,l=d[f+7&7],c^=(l^=l<<13)^l<<9,d[f]=c,u.i=f+1&7,c},function(l,c){var d,f=[];if(c===(0|c))f[0]=c;else for(c=""+c,d=0;d<c.length;++d)f[7&d]=f[7&d]<<15^c.charCodeAt(d)+f[d+1&7]<<13;for(;f.length<8;)f.push(0);for(d=0;d<8&&f[d]===0;++d);for(d==8?f[7]=-1:f[d],l.x=f,l.i=0,d=256;d>0;--d)l.next()}(u,s)}function o(s,u){return u.x=s.x.slice(),u.i=s.i,u}function a(s,u){s==null&&(s=+new Date);var l=new i(s),c=u&&u.state,d=function(){return(l.next()>>>0)/4294967296};return d.double=function(){do var f=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(f===0);return f},d.int32=l.next,d.quick=d,c&&(c.x&&o(c,l),d.state=function(){return o(l,{})}),d}e&&e.exports?e.exports=a:r&&r.amd?r(function(){return a}):this.xorshift7=a})(0,t,!1)}),E7=Eu(function(t){(function(n,e,r){function i(s){var u=this;u.next=function(){var l,c,d=u.w,f=u.X,p=u.i;return u.w=d=d+1640531527|0,c=f[p+34&127],l=f[p=p+1&127],c^=c<<13,l^=l<<17,c^=c>>>15,l^=l>>>12,c=f[p]=c^l,u.i=p,c+(d^d>>>16)|0},function(l,c){var d,f,p,h,v,g=[],m=128;for(c===(0|c)?(f=c,c=null):(c+="\0",f=0,m=Math.max(m,c.length)),p=0,h=-32;h<m;++h)c&&(f^=c.charCodeAt((h+32)%c.length)),h===0&&(v=f),f^=f<<10,f^=f>>>15,f^=f<<4,f^=f>>>13,h>=0&&(v=v+1640531527|0,p=(d=g[127&h]^=f+v)==0?p+1:0);for(p>=128&&(g[127&(c&&c.length||0)]=-1),p=127,h=512;h>0;--h)f=g[p+34&127],d=g[p=p+1&127],f^=f<<13,d^=d<<17,f^=f>>>15,d^=d>>>12,g[p]=f^d;l.w=v,l.X=g,l.i=p}(u,s)}function o(s,u){return u.i=s.i,u.w=s.w,u.X=s.X.slice(),u}function a(s,u){s==null&&(s=+new Date);var l=new i(s),c=u&&u.state,d=function(){return(l.next()>>>0)/4294967296};return d.double=function(){do var f=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(f===0);return f},d.int32=l.next,d.quick=d,c&&(c.X&&o(c,l),d.state=function(){return o(l,{})}),d}e&&e.exports?e.exports=a:r&&r.amd?r(function(){return a}):this.xor4096=a})(0,t,!1)}),C7=Eu(function(t){(function(n,e,r){function i(s){var u=this,l="";u.next=function(){var d=u.b,f=u.c,p=u.d,h=u.a;return d=d<<25^d>>>7^f,f=f-p|0,p=p<<24^p>>>8^h,h=h-d|0,u.b=d=d<<20^d>>>12^f,u.c=f=f-p|0,u.d=p<<16^f>>>16^h,u.a=h-d|0},u.a=0,u.b=0,u.c=-1640531527,u.d=1367130551,s===Math.floor(s)?(u.a=s/4294967296|0,u.b=0|s):l+=s;for(var c=0;c<l.length+20;c++)u.b^=0|l.charCodeAt(c),u.next()}function o(s,u){return u.a=s.a,u.b=s.b,u.c=s.c,u.d=s.d,u}function a(s,u){var l=new i(s),c=u&&u.state,d=function(){return(l.next()>>>0)/4294967296};return d.double=function(){do var f=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(f===0);return f},d.int32=l.next,d.quick=d,c&&(typeof c=="object"&&o(c,l),d.state=function(){return o(l,{})}),d}e&&e.exports?e.exports=a:r&&r.amd?r(function(){return a}):this.tychei=a})(0,t,!1)}),Ps=Eu(function(t){(function(n,e){var r,i=this,o=256,a=6,s="random",u=e.pow(o,a),l=e.pow(2,52),c=2*l,d=o-1;function f(m,y,b){var w=[],x=v(function S(N,k){var M,D=[],R=typeof N;if(k&&R=="object")for(M in N)try{D.push(S(N[M],k-1))}catch{}return D.length?D:R=="string"?N:N+"\0"}((y=y==1?{entropy:!0}:y||{}).entropy?[m,g(n)]:m??function(){try{var S;return r&&(S=r.randomBytes)?S=S(o):(S=new Uint8Array(o),(i.crypto||i.msCrypto).getRandomValues(S)),g(S)}catch{var N=i.navigator,k=N&&N.plugins;return[+new Date,i,k,i.screen,g(n)]}}(),3),w),C=new p(w),E=function(){for(var S=C.g(a),N=u,k=0;S<l;)S=(S+k)*o,N*=o,k=C.g(1);for(;S>=c;)S/=2,N/=2,k>>>=1;return(S+k)/N};return E.int32=function(){return 0|C.g(4)},E.quick=function(){return C.g(4)/4294967296},E.double=E,v(g(C.S),n),(y.pass||b||function(S,N,k,M){return M&&(M.S&&h(M,C),S.state=function(){return h(C,{})}),k?(e[s]=S,N):S})(E,x,"global"in y?y.global:this==e,y.state)}function p(m){var y,b=m.length,w=this,x=0,C=w.i=w.j=0,E=w.S=[];for(b||(m=[b++]);x<o;)E[x]=x++;for(x=0;x<o;x++)E[x]=E[C=d&C+m[x%b]+(y=E[x])],E[C]=y;(w.g=function(S){for(var N,k=0,M=w.i,D=w.j,R=w.S;S--;)N=R[M=d&M+1],k=k*o+R[d&(R[M]=R[D=d&D+N])+(R[D]=N)];return w.i=M,w.j=D,k})(o)}function h(m,y){return y.i=m.i,y.j=m.j,y.S=m.S.slice(),y}function v(m,y){for(var b,w=m+"",x=0;x<w.length;)y[d&x]=d&(b^=19*y[d&x])+w.charCodeAt(x++);return g(y)}function g(m){return String.fromCharCode.apply(0,m)}if(e["seed"+s]=f,v(e.random(),n),t.exports){t.exports=f;try{r=require("crypto")}catch{}}})([],Math)});Ps.alea=b7,Ps.xor128=w7,Ps.xorwow=x7,Ps.xorshift7=S7,Ps.xor4096=E7,Ps.tychei=C7;var wg=Ps.alea,oE=function(){function t(n,e,r,i,o){this.mean=n,this.stdDev=e,this.dtype=r,this.nextVal=NaN,this.truncated=i,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var a=o||Math.random();this.random=wg(a.toString())}return t.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var n=this.nextVal;return this.nextVal=NaN,n}for(var e,r,i=!1;!i;){var o=void 0,a=void 0,s=void 0;do s=(o=2*this.random()-1)*o+(a=2*this.random()-1)*a;while(s>=1||s===0);var u=Math.sqrt(-2*Math.log(s)/s);e=this.mean+this.stdDev*o*u,r=this.mean+this.stdDev*a*u,this.truncated&&!this.isValidTruncated(e)||(i=!0)}return this.truncated&&!this.isValidTruncated(r)||(this.nextVal=this.convertValue(r)),this.convertValue(e)},t.prototype.convertValue=function(n){return this.dtype==null||this.dtype==="float32"?n:Math.round(n)},t.prototype.isValidTruncated=function(n){return n<=this.upper&&n>=this.lower},t}(),R7=function(){function t(n,e,r,i){this.alpha=n,this.beta=1/e,this.dtype=r;var o=i||Math.random();this.randu=wg(o.toString()),this.randn=new oE(0,1,r,!1,this.randu()),this.d=n<1?n+2/3:n-1/3,this.c=1/Math.sqrt(9*this.d)}return t.prototype.nextValue=function(){for(var n,e,r,i,o,a;;){do i=this.randn.nextValue(),a=1+this.c*i;while(a<=0);if(a*=a*a,e=1-.331*(n=i*i)*n,r=.5*n+this.d*(1-a+Math.log(a)),(o=this.randu())<e||Math.log(o)<r)break}return a=1/this.beta*this.d*a,this.alpha<1&&(a*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(a)},t.prototype.convertValue=function(n){return this.dtype==="float32"?n:Math.round(n)},t}(),T7=function(){function t(n,e,r,i){var o=this;if(n===void 0&&(n=0),e===void 0&&(e=1),this.canReturnFloat=function(){return o.dtype==null||o.dtype==="float32"},this.min=n,this.range=e-n,this.dtype=r,i==null&&(i=Math.random()),typeof i=="number"&&(i=i.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between "+n+" - "+e+" <= 1 and dtype is not float");this.random=wg(i)}return t.prototype.convertValue=function(n){return this.canReturnFloat()?n:Math.round(n)},t.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},t}();function Ge(t,n,e){return n===void 0&&(n="float32"),n=n||"float32",KS(t),new Ql(t,n,e)}function BM(t,n){n===void 0&&(n=!1),console.log(t.toString(n))}var xg=X({batchToSpaceND_:function(t,n,e){var r=V(t,"x","batchToSpaceND"),i=n.reduce(function(o,a){return o*a});return U(r.rank>=1+n.length,function(){return"input rank is "+r.rank+" but should be > than blockShape.length "+n.length}),U(e.length===n.length,function(){return"crops.length is "+e.length+" but should be equal to blockShape.length  "+n.length}),U(r.shape[0]%i==0,function(){return"input tensor batch is "+r.shape[0]+" but is not divisible by the product of the elements of blockShape "+n.join(" * ")+" === "+i}),K.runKernelFunc(function(o){return o.batchToSpaceND(r,n,e)},{$x:r},function(o){return{$x:function(){return o.spaceToBatchND(n,e)}}})}}),Sg=X({cast_:function(t,n){var e=V(t,"x","cast");if(!QD(n))throw new Error("Failed to cast to unknown dtype "+n);if(n==="string"&&e.dtype!=="string"||n!=="string"&&e.dtype==="string")throw new Error("Only strings can be casted to strings");var r={dtype:n};return K.runKernelFunc(function(i){return i.cast(e,n)},{x:e},function(i){return{x:function(){return i.clone()}}},"Cast",r)}}),jM=X({clone_:function(t){var n=V(t,"x","clone",null);return K.runKernelFunc(function(){return K.makeTensorFromDataId(n.dataId,n.shape,n.dtype)},{$x:n},function(e){return{$x:function(){return e.toFloat()}}})}}),VM=X({cumsum_:function(t,n,e,r){n===void 0&&(n=0),e===void 0&&(e=!1),r===void 0&&(r=!1);var i=V(t,"x","cumsum"),o=Gi([n|=0],i.rank),a=i;o!=null&&(a=i.transpose(o));var s=qi(1,i.rank)[0],u=K.runKernelFunc(function(l){return l.cumsum(a,s,e,r)},{permutedX:a},function(l){return{permutedX:function(){return l.cumsum(n,e,!r)}}});return o!=null&&(u=u.transpose(o)),u}}),aE=X({depthToSpace_:function(t,n,e){e===void 0&&(e="NHWC");var r=V(t,"x","depthToSpace"),i=e==="NHWC"?r.shape[1]:r.shape[2],o=e==="NHWC"?r.shape[2]:r.shape[3],a=e==="NHWC"?r.shape[3]:r.shape[1];return U(i*n>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+i+" and "+n+`  for depthToSpace with input shape
      `+r.shape}),U(o*n>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+o+" and "+n+` for depthToSpace with input shape
          `+r.shape}),U(a%(n*n)==0,function(){return"Dimension size must be evenly divisible by "+n*n+" but is "+a+" for depthToSpace with input shape "+r.shape}),K.runKernelFunc(function(s){return s.depthToSpace(r,n,e)},{$x:r})}}),Hr=X({expandDims_:function(t,n){n===void 0&&(n=0);var e=V(t,"x","expandDims",null);U(n<=e.rank,function(){return"Axis must be <= rank of the tensor"});var r=e.shape.slice();return n<0&&(U(-(e.rank+1)<=n,function(){return"Axis must be in the interval ["+-(e.rank+1)+", "+e.rank+"]"}),n=e.rank+n+1),r.splice(n,0,1),rp(e,r)}}),Eg=X({eye_:function(t,n,e,r){r===void 0&&(r="float32"),n==null&&(n=t);for(var i=Ge([t,n],r),o=t<=n?t:n,a=0;a<o;++a)i.set(1,a,a);var s=i.toTensor().as2D(t,n);if(e==null)return s;if(e.length===1)return Qa(Hr(s,0),[e[0],1,1]);if(e.length===2)return Qa(Hr(Hr(s,0),0),[e[0],e[1],1,1]);if(e.length===3)return Qa(Hr(Hr(Hr(s,0),0),0),[e[0],e[1],e[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+e.length+"D.")}}),sE=X({multinomial_:function(t,n,e,r){r===void 0&&(r=!1);var i=V(t,"logits","multinomial"),o=i.size,a=i.rank;if(o<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+o+".");if(a>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+a);e=e||Math.random();var s=a===1?i.as2D(1,-1):i,u=K.runKernelFunc(function(l){return l.multinomial(s,r,n,e)},{logits2D:s});return a===1?u.as1D():u}}),Zl=X({oneHot_:function(t,n,e,r){if(e===void 0&&(e=1),r===void 0&&(r=0),n<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+n);var i=V(t,"indices","oneHot","int32"),o=i.shape.concat([n]);return i=i.flatten(),K.runKernelFunc(function(a){return a.oneHot(i,n,e,r)},{$indices:i},function(a){return{$indices:function(){return It(i.shape,"float32")}}}).reshape(o)}}),ys=X({pad_:function(t,n,e){e===void 0&&(e=0);var r=V(t,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var i=n.map(function(o){return o[0]});return K.runKernelFunc(function(o){return o.pad(r,n,e)},{$x:r},function(o){return{$x:function(){return o.slice(i,r.shape)}}})}}),$M=X({pad1d_:function(t,n,e){return e===void 0&&(e=0),U(n.length===2,function(){return"Invalid number of paddings. Must be length of 2."}),ys(t,[n],e)}}),UM=X({pad2d_:function(t,n,e){return e===void 0&&(e=0),U(n.length===2&&n[0].length===2&&n[1].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),ys(t,n,e)}}),WM=X({pad3d_:function(t,n,e){return e===void 0&&(e=0),U(n.length===3&&n[0].length===2&&n[1].length===2&&n[2].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),ys(t,n,e)}}),HM=X({pad4d_:function(t,n,e){return e===void 0&&(e=0),U(n.length===4&&n[0].length===2&&n[1].length===2&&n[2].length===2&&n[3].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),ys(t,n,e)}}),GM=X({rand_:function(t,n,e){var r=Me(t),i=null;if(e==null||e==="float32")i=new Float32Array(r);else if(e==="int32")i=new Int32Array(r);else{if(e!=="bool")throw new Error("Unknown data type "+e);i=new Uint8Array(r)}for(var o=0;o<r;o++)i[o]=n();return K.makeTensor(i,t,e)}}),uE=X({randomNormal_:function(t,n,e,r,i){if(n===void 0&&(n=0),e===void 0&&(e=1),r!=null&&r==="bool")throw new Error("Unsupported data type "+r);for(var o=new oE(n,e,r,!1,i),a=Ge(t,r),s=0;s<a.values.length;s++)a.values[s]=o.nextValue();return a.toTensor()}}),qM=X({randomGamma_:function(t,n,e,r,i){if(e===void 0&&(e=1),r===void 0&&(r="float32"),e==null&&(e=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error("Unsupported data type "+r);for(var o=new R7(n,e,r,i),a=Ge(t,r),s=0;s<a.values.length;s++)a.values[s]=o.nextValue();return a.toTensor()}}),Cu=X({randomUniform_:function(t,n,e,r,i){n===void 0&&(n=0),e===void 0&&(e=1),r===void 0&&(r="float32");for(var o=Ge(t,r),a=new T7(n,e,null,i),s=0;s<o.values.length;s++)o.values[s]=a.nextValue();return o.toTensor()}}),rp=X({reshape_:function(t,n){var e=V(t,"x","reshape",null);n=YD(n,e.size),U(e.size===Me(n),function(){return"new shape and old shape must have the same number of elements."});var r={shape:n};return K.runKernelFunc(function(i){return i.reshape(e,n)},{x:e},function(i){return{x:function(){return i.reshape(e.shape)}}},"Reshape",r)}}),Cg=X({spaceToBatchND_:function(t,n,e){var r=V(t,"x","spaceToBatchND");return U(r.rank>=1+n.length,function(){return"input rank "+r.rank+" should be > than [blockShape] "+n.length}),U(e.length===n.length,function(){return"paddings.shape[0] "+e.length+" must be equal to [blockShape] "+n.length}),U(r.shape.reduce(function(i,o,a){return a>0&&a<=n.length?i&&(o+e[a-1][0]+e[a-1][1])%n[a-1]==0:i},!0),function(){return"input spatial dimensions "+r.shape.slice(1)+" with paddings "+e.toString()+" must be divisible by blockShapes "+n.toString()}),K.runKernelFunc(function(i){return i.spaceToBatchND(r,n,e)},{$x:r},function(i){return{$x:function(){return i.batchToSpaceND(n,e)}}})}}),ip=X({squeeze_:function(t,n){var e=V(t,"x","squeeze");return rp(e,_a(e.shape,n).newShape)}}),$i=X({stack_:function(t,n){n===void 0&&(n=0);var e=Pf(t,"tensors","stack");if(U(e.length>=1,function(){return"Pass at least one tensor to tf.stack"}),e.length===1)return e[0].expandDims(n);var r=e[0].rank,i=e[0].shape,o=e[0].dtype;U(n<=r,function(){return"Axis must be <= rank of the tensor"}),e.forEach(function(s){gt(i,s.shape,"All tensors passed to stack must have matching shapes")}),e.forEach(function(s){U(o===s.dtype,function(){return"All tensors passed to stack must have matching dtypes"})});var a=e.map(function(s){return s.expandDims(n)});return lr(a,n)}}),Qa=X({tile_:function(t,n){var e=V(t,"x","tile",null);return U(e.rank===n.length,function(){return"Error in transpose: rank of input "+e.rank+" must match length of reps "+n+"."}),K.runKernelFunc(function(r,i){var o=r.tile(e,n);return i([e]),o},{$x:e},function(r,i){var o=i[0];return{$x:function(){var a=dt(o);if(o.rank===1)for(var s=0;s<n[0];++s)a=a.add(r.slice([s*o.shape[0]],[o.shape[0]]));else if(o.rank===2)for(s=0;s<n[0];++s)for(var u=0;u<n[1];++u)a=a.add(r.slice([s*o.shape[0],u*o.shape[1]],[o.shape[0],o.shape[1]]));else if(o.rank===3)for(s=0;s<n[0];++s)for(u=0;u<n[1];++u)for(var l=0;l<n[2];++l)a=a.add(r.slice([s*o.shape[0],u*o.shape[1],l*o.shape[2]],[o.shape[0],o.shape[1],o.shape[2]]));else{if(o.rank!==4)throw new Error("Gradient for tile operation is not implemented for rank-"+o.rank+" tensors yet.");for(s=0;s<n[0];++s)for(u=0;u<n[1];++u)for(l=0;l<n[2];++l)for(var c=0;c<n[3];++c)a=a.add(r.slice([s*o.shape[0],u*o.shape[1],l*o.shape[2],c*o.shape[3]],[o.shape[0],o.shape[1],o.shape[2],o.shape[3]]))}return a}}})}}),op=X({truncatedNormal_:function(t,n,e,r,i){if(n===void 0&&(n=0),e===void 0&&(e=1),r!=null&&r==="bool")throw new Error("Unsupported data type "+r);for(var o=new oE(n,e,r,!0,i),a=Ge(t,r),s=0;s<a.values.length;s++)a.values[s]=o.nextValue();return a.toTensor()}}),du=X({unstack_:function(t,n){n===void 0&&(n=0),n=n||0;var e=V(t,"x","unstack");return U(n>=-e.shape.length&&n<e.shape.length,function(){return"Axis = "+n+" is not in [-"+e.shape.length+", "+e.shape.length+")"}),n<0&&(n+=e.shape.length),K.runKernelFunc(function(r){return r.unstack(e,n)},{$x:e},function(r){return{$x:function(){return $i(r,n)}}})}}),lE=function(t,n){return Ae(this,void 0,void 0,function(){var e,r,i,o,a,s,u,l,c,d;return Oe(this,function(f){switch(f.label){case 0:return e=V(t,"x","setdiff1d"),r=V(n,"y","setdiff1d"),U(e.dtype===r.dtype,function(){return"x and y should have the same dtype, but got x ("+e.dtype+") and y ("+r.dtype+")."}),U(e.rank===1,function(){return"x should be 1D tensor, but got x ("+e.shape+")."}),U(r.rank===1,function(){return"y should be 1D tensor, but got y ("+r.shape+")."}),[4,e.data()];case 1:return i=f.sent(),[4,r.data()];case 2:for(o=f.sent(),a=new Set(o),s=0,c=0;c<i.length;c++)a.has(i[c])||s++;for(u=new Ql([s],e.dtype),l=new Ql([s],"int32"),c=0,d=0;c<i.length;c++)a.has(i[c])||(u.values[d]=i[c],l.values[d]=c,d++);return[2,[u.toTensor(),l.toTensor()]]}})})};function fv(t,n,e,r){r===void 0&&(r=!0);var i=[];if(r)(i=i.concat(n.slice(0))).push(t[0]/e),i=i.concat(t.slice(1));else{i=i.concat(t[0]);for(var o=n.length,a=0;a<o;++a)i=i.concat([t[a+1]/n[a],n[a]]);i=i.concat(t.slice(o+1))}return i}function pv(t,n,e){e===void 0&&(e=!0);var r=[];if(e){r.push(n);for(var i=n+1;i<t;++i)i<=2*n?(r.push(i),r.push(i-(n+1))):r.push(i)}else{var o=[],a=[];for(i=1;i<t;++i)i>=2*n+1||i%2==1?a.push(i):o.push(i);r.push.apply(r,o),r.push(0),r.push.apply(r,a)}return r}function hv(t,n,e,r){r===void 0&&(r=!0);var i=[];r?i.push(t[0]/e):i.push(t[0]*e);for(var o=1;o<t.length;++o)o<=n.length?r?i.push(n[o-1]*t[o]):i.push(t[o]/n[o-1]):i.push(t[o]);return i}function KM(t,n){for(var e=[0],r=0;r<n;++r)e.push(t[r][0]);return e}function XM(t,n,e){for(var r=t.slice(0,1),i=0;i<e;++i)r.push(t[i+1]-n[i][0]-n[i][1]);return r}function YM(t,n){if(t.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+t.rank+".");if(n.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+n.rank+".");if(n.dtype!=="int32")throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+n.dtype+".");if(n.shape[n.rank-1]>t.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+n.shape[n.rank-1]+" vs. "+t.rank);if(t.size===0)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+t.shape+".");for(var e=n.shape,r=e[e.length-1],i=1,o=0;o<e.length-1;++o)i*=e[o];var a=t.shape,s=e.slice();s.pop();var u=1;for(o=r;o<t.rank;++o)u*=a[o],s.push(a[o]);var l=vs(t.shape).map(function(c){return c/u}).concat([1]).slice(0,r);return[s,i,u,l]}var JM=30;function Y0(t){return t<=JM?t:cv(t,Math.floor(Math.sqrt(t)))}function N7(t,n,e){if(n.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+n.rank+".");if(t.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+t.rank+".");if(n.dtype!=="int32")throw new Error("The dtype of 'indices' should be int32, but got dtype: "+n.dtype);if(e.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+e);if(e.length===0){if(n.size===0)throw new Error("Indices specified for empty output. indices shape: "+n.shape);if(t.size===0)throw new Error("Updates specified for empty output. updates shape: "+t.shape)}(function(r,i,o){var a=i.rank>1?i.shape[i.rank-1]:1,s=i.rank>1?i.rank-1:1,u="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+o.shape+", indices.shape: "+i.shape+", shape: "+r+", sliceDim: "+a+", and batchDim: "+s+".";if(o.rank<s)throw new Error(u+" update.rank < "+s+". ");if(r.length<a+(o.rank-s))throw new Error(u+" Output shape length < "+(a+(o.rank-s)));if(o.rank!==s+r.length-a)throw new Error(u+" update.rank != "+(s+r.length-a));for(var l=0;l<s;++l)if(o.shape[l]!==i.shape[l])throw new Error(u+" updates.shape["+l+"] ("+o.shape[l]+") != indices.shape["+l+"] ("+i.shape[l]+").");for(l=0;l<o.rank-s;++l)if(o.shape[l+s]!==r[l+a])throw new Error(u+" updates.shape["+(l+s)+"] ("+o.shape[l+s]+") != shape["+(l+s)+"] ("+r[l+s]+")")})(e,n,t)}function mv(t,n,e){for(var r=n.rank>1?n.shape[n.rank-1]:1,i=e.length,o=1,a=r;a<i;++a)o*=e[a];var s=r<1?1:r;return{sliceRank:r,numUpdates:n.size/s,sliceSize:o,strides:vs(e.slice(0,r)).concat([1]),outputSize:Me(e)}}function QM(t,n,e){U(t.rank===n.length,function(){return"Error in slice"+t.rank+"D: Length of begin "+n+" must match the rank of the array ("+t.rank+")."}),U(t.rank===e.length,function(){return"Error in slice"+t.rank+"D: Length of size "+e+" must match the rank of the array ("+t.rank+")."});for(var r=function(o){U(n[o]+e[o]<=t.shape[o],function(){return"Error in slice"+t.rank+"D: begin["+o+"] + size["+o+"] ("+(n[o]+e[o])+") would overflow input.shape["+o+"] ("+t.shape[o]+")"})},i=0;i<t.rank;++i)r(i)}function xw(t){for(var n=[],e=0;t>0;)1&t&&n.push(e),t/=2,e++;return n}function Rg(t,n,e){for(var r=[],i=0;i<t.length;i++)r[i]=Math.ceil((n[i]-t[i])/e[i]);return r}function ZM(t,n,e,r,i){var o=n[i],a=e[i]||1;(t&1<<i||o==null)&&(o=a>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var s=r[i];return o<0&&(o+=s),o=uv(0,o,s-1)}function eP(t,n,e,r,i){var o=n[i],a=e[i]||1;(t&1<<i||o==null)&&(o=a>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var s=r[i];return o<0&&(o+=s),o=a>0?uv(0,o,s):uv(-1,o,s-1)}function cE(t,n,e){for(var r=e.length,i=0;i<e.length;i++)if(e[i]>1){r=i;break}for(i=r+1;i<e.length;i++)if(n[i]>0||e[i]!==t[i])return!1;return!0}function dE(t,n){for(var e=t.length>0?t[t.length-1]:1,r=0;r<t.length-1;r++)e+=t[r]*n[r];return e}var k7=Object.freeze({assertParamsValid:QM,maskToAxes:xw,computeOutShape:Rg,startForAxis:ZM,stopForAxis:eP,isSliceContinous:cE,computeFlatOffset:dE});function I7(t){return U(as(t),function(){return"The f passed in grad(f) must be a function"}),function(n,e){var r=V(n,"x","tf.grad",null),i=e!=null?V(e,"dy","tf.grad"):null;return K.tidy(function(){var o=K.gradients(function(){return t(r)},[r],i),a=o.value,s=o.grads;return i!=null&&gt(a.shape,i.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),Tg(s),s[0]})}}function _7(t){return U(as(t),function(){return"The f passed in grads(f) must be a function"}),function(n,e){U(Array.isArray(n),function(){return"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s"});var r=Pf(n,"args","tf.grads",null),i=e!=null?V(e,"dy","tf.grads"):null;return K.tidy(function(){var o=K.gradients(function(){return t.apply(void 0,r)},r,i),a=o.value,s=o.grads;return i!=null&&gt(a.shape,i.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),Tg(s),s})}}function A7(t){return U(as(t),function(){return"The f passed in valueAndGrad(f) must be a function"}),function(n,e){U(n instanceof _t,function(){return"The x passed in valueAndGrad(f)(x) must be a tensor"}),U(e==null||e instanceof _t,function(){return"The dy passed in valueAndGrad(f)(x, dy) must be a tensor"});var r=K.gradients(function(){return t(n)},[n],e),i=r.grads,o=r.value;return Tg(i),{grad:i[0],value:o}}}function O7(t){return U(as(t),function(){return"The f passed in valueAndGrads(f) must be a function"}),function(n,e){U(Array.isArray(n)&&n.every(function(i){return i instanceof _t}),function(){return"The args passed in valueAndGrads(f)(args) must be array of tensors"}),U(e==null||e instanceof _t,function(){return"The dy passed in valueAndGrads(f)(args, dy) must be a tensor"});var r=K.gradients(function(){return t.apply(void 0,n)},n,e);return e!=null&&gt(r.value.shape,e.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),Tg(r.grads),r}}function tP(t,n){U(as(t),function(){return"The f passed in variableGrads(f) must be a function"}),U(n==null||Array.isArray(n)&&n.every(function(c){return c instanceof Af}),function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"});var e=n!=null;if(!e)for(var r in n=[],K.registeredVariables)n.push(K.registeredVariables[r]);var i=e?n.filter(function(c){return!c.trainable}):null,o=n.length;U((n=n.filter(function(c){return c.trainable})).length>0,function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+o+" variables is trainable."});var a=K.gradients(t,n,null,!0),s=a.value,u=a.grads;U(u.some(function(c){return c!=null}),function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."}),U(s.rank===0,function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+s.rank+" tensor"});var l={};return n.forEach(function(c,d){u[d]!=null&&(l[c.name]=u[d])}),i!=null&&i.forEach(function(c){return l[c.name]=null}),{value:s,grads:l}}function Nc(t){return K.customGrad(t)}function Tg(t){if(t.filter(function(n){return n==null}).length>0)throw new Error(`Cannot compute gradient of y=f(x) with respect to x. Make sure that
    the f you passed encloses all operations that lead from x to y.`)}var Ru=X({softmax_:function(t,n){n===void 0&&(n=-1);var e=V(t,"logits","softmax");if(n===-1&&(n=e.rank-1),n!==e.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+e.rank+" and dim was "+n);return Nc(function(r,i){var o=r.logSumExp([n],!0),a=r.toFloat().sub(o).exp();return i([a]),{value:a,gradFunc:function(s,u){var l=u[0],c=s.mul(l);return c.sub(c.sum([n],!0).mul(l))}}})(e)}}),Ng=X({logSoftmax_:function(t,n){n===void 0&&(n=-1);var e=V(t,"logits","logSoftmax");if(n===-1&&(n=e.rank-1),n!==e.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+e.rank+" and axis was "+n);return Nc(function(r,i){var o=r.max(n,!0),a=r.sub(o),s=a.toFloat().sub(a.exp().sum(n,!0).log());return i([s]),{value:s,gradFunc:function(u,l){var c=l[0].exp();return u.sub(u.sum(n,!0).mul(c))}}})(e)}}),fE=function(){function t(n,e){this.backend=n,this.dataMover=e,this.data=new WeakMap,this.dataIdsCount=0}return t.prototype.get=function(n){return this.data.has(n)||this.dataMover.moveData(this.backend,n),this.data.get(n)},t.prototype.set=function(n,e){this.dataIdsCount++,this.data.set(n,e)},t.prototype.has=function(n){return this.data.has(n)},t.prototype.delete=function(n){return this.dataIdsCount--,this.data.delete(n)},t.prototype.numDataIds=function(){return this.dataIdsCount},t}(),pE=function(){function t(){}return t.prototype.time=function(n){return ne()},t.prototype.read=function(n){return ne()},t.prototype.readSync=function(n){return ne()},t.prototype.numDataIds=function(){return ne()},t.prototype.disposeData=function(n){return ne()},t.prototype.fromPixels=function(n,e){return ne()},t.prototype.write=function(n,e,r){return ne()},t.prototype.move=function(n,e,r,i){return ne()},t.prototype.memory=function(){return ne()},t.prototype.floatPrecision=function(){return ne()},t.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},t.prototype.batchMatMul=function(n,e,r,i){return ne()},t.prototype.fusedBatchMatMul=function(n){return n.a,n.b,n.transposeA,n.transposeB,n.bias,n.activation,n.preluActivationWeights,ne()},t.prototype.slice=function(n,e,r){return ne()},t.prototype.stridedSlice=function(n,e,r,i){return ne()},t.prototype.unstack=function(n,e){return ne()},t.prototype.reverse=function(n,e){return ne()},t.prototype.concat=function(n,e){return ne()},t.prototype.neg=function(n){return ne()},t.prototype.add=function(n,e){return ne()},t.prototype.addN=function(n){return ne()},t.prototype.subtract=function(n,e){return ne()},t.prototype.multiply=function(n,e){return ne()},t.prototype.realDivide=function(n,e){return ne()},t.prototype.floorDiv=function(n,e){return ne()},t.prototype.sum=function(n,e){return ne()},t.prototype.prod=function(n,e){return ne()},t.prototype.unsortedSegmentSum=function(n,e,r){return ne()},t.prototype.argMin=function(n,e){return ne()},t.prototype.argMax=function(n,e){return ne()},t.prototype.equal=function(n,e){return ne()},t.prototype.notEqual=function(n,e){return ne()},t.prototype.less=function(n,e){return ne()},t.prototype.lessEqual=function(n,e){return ne()},t.prototype.greater=function(n,e){return ne()},t.prototype.greaterEqual=function(n,e){return ne()},t.prototype.logicalNot=function(n){return ne()},t.prototype.logicalAnd=function(n,e){return ne()},t.prototype.logicalOr=function(n,e){return ne()},t.prototype.where=function(n){return ne()},t.prototype.select=function(n,e,r){return ne()},t.prototype.topk=function(n,e,r){return ne()},t.prototype.min=function(n,e){return ne()},t.prototype.minimum=function(n,e){return ne()},t.prototype.mod=function(n,e){return ne()},t.prototype.max=function(n,e){return ne()},t.prototype.maximum=function(n,e){return ne()},t.prototype.all=function(n,e){return ne()},t.prototype.any=function(n,e){return ne()},t.prototype.squaredDifference=function(n,e){return ne()},t.prototype.ceil=function(n){return ne()},t.prototype.floor=function(n){return ne()},t.prototype.round=function(n){return ne()},t.prototype.sign=function(n){return ne()},t.prototype.isNaN=function(n){return ne()},t.prototype.isInf=function(n){return ne()},t.prototype.isFinite=function(n){return ne()},t.prototype.pow=function(n,e){return ne()},t.prototype.exp=function(n){return ne()},t.prototype.expm1=function(n){return ne()},t.prototype.log=function(n){return ne()},t.prototype.log1p=function(n){return ne()},t.prototype.sqrt=function(n){return ne()},t.prototype.rsqrt=function(n){return ne()},t.prototype.square=function(n){return ne()},t.prototype.reciprocal=function(n){return ne()},t.prototype.relu=function(n){return ne()},t.prototype.relu6=function(n){return ne()},t.prototype.prelu=function(n,e){return ne()},t.prototype.elu=function(n){return ne()},t.prototype.eluDer=function(n,e){return ne()},t.prototype.selu=function(n){return ne()},t.prototype.int=function(n){return ne()},t.prototype.clip=function(n,e,r){return ne()},t.prototype.abs=function(n){return ne()},t.prototype.complexAbs=function(n){return ne()},t.prototype.sigmoid=function(n){return ne()},t.prototype.softplus=function(n){return ne()},t.prototype.sin=function(n){return ne()},t.prototype.cos=function(n){return ne()},t.prototype.tan=function(n){return ne()},t.prototype.asin=function(n){return ne()},t.prototype.acos=function(n){return ne()},t.prototype.atan=function(n){return ne()},t.prototype.atan2=function(n,e){return ne()},t.prototype.sinh=function(n){return ne()},t.prototype.cosh=function(n){return ne()},t.prototype.tanh=function(n){return ne()},t.prototype.asinh=function(n){return ne()},t.prototype.acosh=function(n){return ne()},t.prototype.atanh=function(n){return ne()},t.prototype.erf=function(n){return ne()},t.prototype.step=function(n,e){return ne()},t.prototype.fusedConv2d=function(n){return n.input,n.filter,n.convInfo,n.bias,n.activation,n.preluActivationWeights,ne()},t.prototype.conv2d=function(n,e,r){return ne()},t.prototype.conv2dDerInput=function(n,e,r){return ne()},t.prototype.conv2dDerFilter=function(n,e,r){return ne()},t.prototype.fusedDepthwiseConv2D=function(n){return n.input,n.filter,n.convInfo,n.bias,n.activation,n.preluActivationWeights,ne()},t.prototype.depthwiseConv2D=function(n,e,r){return ne()},t.prototype.depthwiseConv2DDerInput=function(n,e,r){return ne()},t.prototype.depthwiseConv2DDerFilter=function(n,e,r){return ne()},t.prototype.conv3d=function(n,e,r){return ne()},t.prototype.conv3dDerInput=function(n,e,r){return ne()},t.prototype.conv3dDerFilter=function(n,e,r){return ne()},t.prototype.maxPool=function(n,e){return ne()},t.prototype.maxPoolBackprop=function(n,e,r,i){return ne()},t.prototype.avgPool=function(n,e){return ne()},t.prototype.avgPoolBackprop=function(n,e,r){return ne()},t.prototype.avgPool3d=function(n,e){return ne()},t.prototype.avgPool3dBackprop=function(n,e,r){return ne()},t.prototype.maxPool3d=function(n,e){return ne()},t.prototype.maxPool3dBackprop=function(n,e,r,i){return ne()},t.prototype.reshape=function(n,e){return ne()},t.prototype.cast=function(n,e){return ne()},t.prototype.tile=function(n,e){return ne()},t.prototype.pad=function(n,e,r){return ne()},t.prototype.transpose=function(n,e){return ne()},t.prototype.gather=function(n,e,r){return ne()},t.prototype.gatherND=function(n,e){return ne()},t.prototype.scatterND=function(n,e,r){return ne()},t.prototype.batchToSpaceND=function(n,e,r){return ne()},t.prototype.spaceToBatchND=function(n,e,r){return ne()},t.prototype.resizeBilinear=function(n,e,r,i){return ne()},t.prototype.resizeBilinearBackprop=function(n,e,r){return ne()},t.prototype.resizeNearestNeighbor=function(n,e,r,i){return ne()},t.prototype.resizeNearestNeighborBackprop=function(n,e,r){return ne()},t.prototype.batchNormalization=function(n,e,r,i,o,a){return ne()},t.prototype.localResponseNormalization4D=function(n,e,r,i,o){return ne()},t.prototype.LRNGrad=function(n,e,r,i,o,a,s){return ne()},t.prototype.multinomial=function(n,e,r,i){return ne()},t.prototype.oneHot=function(n,e,r,i){return ne()},t.prototype.cumsum=function(n,e,r,i){return ne()},t.prototype.nonMaxSuppression=function(n,e,r,i,o){return ne()},t.prototype.fft=function(n){return ne()},t.prototype.ifft=function(n){return ne()},t.prototype.complex=function(n,e){return ne()},t.prototype.real=function(n){return ne()},t.prototype.imag=function(n){return ne()},t.prototype.cropAndResize=function(n,e,r,i,o,a){return ne()},t.prototype.depthToSpace=function(n,e,r){return ne()},t.prototype.split=function(n,e,r){return ne()},t.prototype.sparseToDense=function(n,e,r,i){return ne()},t.prototype.diag=function(n){return ne()},t.prototype.fill=function(n,e,r){throw new Error("Not yet implemented.")},t.prototype.onesLike=function(n){return ne()},t.prototype.zerosLike=function(n){return ne()},t.prototype.linspace=function(n,e,r){return ne()},t.prototype.dispose=function(){return ne()},t}();function ne(){throw new Error("Not yet implemented or not found in the registry. Did you forget to import the kernel?")}function Hs(t,n){for(var e=t.length,r=[],i=0;i<e;i++){var o=e-1-i,a=t[o]||1;(n[n.length-1-i]||1)>1&&a===1&&r.unshift(o)}return r}function Rn(t,n){for(var e=[],r=0;r<n.length;r++){var i=t[t.length-r-1],o=n.length-r-1,a=n[o];(i==null||i===1&&a>1)&&e.unshift(o)}return e}function ut(t,n){for(var e=[],r=Math.max(t.length,n.length),i=0;i<r;i++){var o=t[t.length-i-1];o==null&&(o=1);var a=n[n.length-i-1];if(a==null&&(a=1),o===1)e.unshift(a);else if(a===1)e.unshift(o);else{if(o!==a)throw Error("Operands could not be broadcast together with shapes "+t+" and "+n+".");e.unshift(o)}}return e}function ec(t,n,e,r,i,o,a){a===void 0&&(a="channelsLast");var s,u=vv(n),l=u[0],c=u[1];if(a==="channelsLast")s=[l,c,t[3],t[3]];else{if(a!=="channelsFirst")throw new Error("Unknown dataFormat "+a);s=[l,c,t[1],t[1]]}return bs(t,s,e,r,i,o,!1,a)}function Lf(t,n,e,r,i,o,a){a===void 0&&(a="NDHWC");var s,u,l=Sw(n),c=l[0],d=l[1],f=l[2];if(a==="NDHWC")u="channelsLast",s=[c,d,f,t[4],t[4]];else{if(a!=="NCDHW")throw new Error("Unknown dataFormat "+a);u="channelsFirst",s=[c,d,f,t[1],t[1]]}return Ff(t,s,e,r,i,!1,u,o)}function bs(t,n,e,r,i,o,a,s){a===void 0&&(a=!1),s===void 0&&(s="channelsLast");var u=[-1,-1,-1,-1],l=u[0],c=u[1],d=u[2],f=u[3];if(s==="channelsLast")l=t[0],c=t[1],d=t[2],f=t[3];else{if(s!=="channelsFirst")throw new Error("Unknown dataFormat "+s);l=t[0],f=t[1],c=t[2],d=t[3]}var p,h=n[0],v=n[1],g=n[3],m=vv(e),y=m[0],b=m[1],w=vv(r),x=w[0],C=w[1],E=Ol(h,x),S=Ol(v,C),N=function(O,P,A,I,_,F,L,W){var B,q,G;if(typeof O=="number"){var re=O===0?"VALID":"NUMBER";B={top:O,bottom:O,left:O,right:O,type:re};var j=function(fe,Z,ge,we,de){we==null&&(we=hE(fe,Z,ge));var On=fe[0],fn=fe[1],pn=Jd((On-Z+2*we)/ge+1,de);U(nn(pn),function(){return"The output # of rows ("+pn+") must be an integer. Change the stride and/or zero pad parameters"});var De=Jd((fn-Z+2*we)/ge+1,de);return U(nn(De),function(){return"The output # of columns ("+De+") must be an integer. Change the stride and/or zero pad parameters"}),[pn,De]}([P,A],F,I,O,W);q=j[0],G=j[1]}else if(O==="same"){q=Math.ceil(P/I),G=Math.ceil(A/_);var ae=Math.max(0,(q-1)*I+F-P),te=Math.max(0,(G-1)*_+L-A),le=Math.floor(ae/2),Ee=ae-le,se=Math.floor(te/2),be=te-se;B={top:le,bottom:Ee,left:se,right:be,type:"SAME"}}else{if(O!=="valid")throw Error("Unknown padding parameter: "+O);B={top:0,bottom:0,left:0,right:0,type:"VALID"},q=Math.ceil((P-F+1)/I),G=Math.ceil((A-L+1)/_)}return{padInfo:B,outHeight:q,outWidth:G}}(i,c,d,y,b,E,S,o),k=N.padInfo,M=N.outHeight,D=N.outWidth,R=a?g*f:g;return s==="channelsFirst"?p=[l,R,M,D]:s==="channelsLast"&&(p=[l,M,D,R]),{batchSize:l,dataFormat:s,inHeight:c,inWidth:d,inChannels:f,outHeight:M,outWidth:D,outChannels:R,padInfo:k,strideHeight:y,strideWidth:b,filterHeight:h,filterWidth:v,effectiveFilterHeight:E,effectiveFilterWidth:S,dilationHeight:x,dilationWidth:C,inShape:t,outShape:p,filterShape:n}}function Ff(t,n,e,r,i,o,a,s){o===void 0&&(o=!1),a===void 0&&(a="channelsLast");var u=[-1,-1,-1,-1,-1],l=u[0],c=u[1],d=u[2],f=u[3],p=u[4];if(a==="channelsLast")l=t[0],c=t[1],d=t[2],f=t[3],p=t[4];else{if(a!=="channelsFirst")throw new Error("Unknown dataFormat "+a);l=t[0],p=t[1],c=t[2],d=t[3],f=t[4]}var h,v=n[0],g=n[1],m=n[2],y=n[4],b=Sw(e),w=b[0],x=b[1],C=b[2],E=Sw(r),S=E[0],N=E[1],k=E[2],M=Ol(v,S),D=Ol(g,N),R=Ol(m,k),O=function(L,W,B,q,G,re,j,ae,te,le,Ee){var se,be,fe,Z;if(typeof L=="number"){var ge=L===0?"VALID":"NUMBER";se={top:L,bottom:L,left:L,right:L,front:L,back:L,type:ge};var we=function(ze,Ze,qe,St,Io,ui){Io==null&&(Io=hE(ze,Ze,St));var ju=ze[0],Gc=ze[1],qc=ze[2],Q=Jd((ju-Ze+2*Io)/St+1,ui);U(nn(Q),function(){return"The output # of depths ("+Q+") must be an integer. Change the stride and/or zero pad parameters"});var J=Jd((Gc-Ze+2*Io)/St+1,ui);U(nn(J),function(){return"The output # of rows ("+J+") must be an integer. Change the stride and/or zero pad parameters"});var me=Jd((qc-Ze+2*Io)/St+1,ui);return U(nn(me),function(){return"The output # of columns ("+me+") must be an integer. Change the stride and/or zero pad parameters"}),[Q,J,me,qe]}([W,B,q,1],ae,1,G,L,Ee);be=we[0],fe=we[1],Z=we[2]}else if(L==="same"){be=Math.ceil(W/G),fe=Math.ceil(B/re),Z=Math.ceil(q/j);var de=(be-1)*G+ae-W,On=(fe-1)*re+te-B,fn=(Z-1)*j+le-q,pn=Math.floor(de/2),De=de-pn,lt=Math.floor(On/2),Le=On-lt,Xe=Math.floor(fn/2),Pe=fn-Xe;se={top:lt,bottom:Le,left:Xe,right:Pe,front:pn,back:De,type:"SAME"}}else{if(L!=="valid")throw Error("Unknown padding parameter: "+L);se={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},be=Math.ceil((W-ae+1)/G),fe=Math.ceil((B-te+1)/re),Z=Math.ceil((q-le+1)/j)}return{padInfo:se,outDepth:be,outHeight:fe,outWidth:Z}}(i,c,d,f,w,x,C,M,D,R,s),P=O.padInfo,A=O.outDepth,I=O.outHeight,_=O.outWidth,F=o?y*p:y;return a==="channelsFirst"?h=[l,F,A,I,_]:a==="channelsLast"&&(h=[l,A,I,_,F]),{batchSize:l,dataFormat:a,inDepth:c,inHeight:d,inWidth:f,inChannels:p,outDepth:A,outHeight:I,outWidth:_,outChannels:F,padInfo:P,strideDepth:w,strideHeight:x,strideWidth:C,filterDepth:v,filterHeight:g,filterWidth:m,effectiveFilterDepth:M,effectiveFilterHeight:D,effectiveFilterWidth:R,dilationDepth:S,dilationHeight:N,dilationWidth:k,inShape:t,outShape:h,filterShape:n}}function hE(t,n,e,r){r===void 0&&(r=1);var i=Ol(n,r);return Math.floor((t[0]*(e-1)-e+i)/2)}function vv(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function Sw(t){return typeof t=="number"?[t,t,t]:t}function Ol(t,n){return n<=1?t:t+(t-1)*(n-1)}function Jd(t,n){if(!n)return t;switch(n){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error("Unknown roundingMode "+n)}}function fu(t){var n=vv(t),e=n[0],r=n[1],i=n[2];return e===1&&r===1&&i===1}function yr(t,n){return fu(t)||fu(n)}function kg(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error("Unknown dataFormat "+t)}function mE(t,n,e){if(n==="complex64"){if(t.dtype==="complex64")return t.clone();var r=It(t.shape),i=t.toFloat(),o=e.complex(i,r);return r.dispose(),i.dispose(),o}if(!ZD(t.dtype,n))return K.makeTensorFromDataId(t.dataId,t.shape,n);if(t.dtype==="complex64"){var a=e.real(t);return o=a.cast(n),a.dispose(),o}if(n==="int32")return e.int(t);if(n==="bool"){var s=ke(0,t.dtype);return o=e.notEqual(t,s),s.dispose(),o}throw new Error("Error in Cast: failed to cast "+t.dtype+" to "+n)}function gv(t,n){return K.makeTensorFromDataId(t.dataId,n,t.dtype)}function vE(t,n,e){var r=(n-t)/(e-1),i=Rc(e,"float32");i[0]=t;for(var o=1;o<i.length;o++)i[o]=i[o-1]+r;return Fr(i,"float32")}var D7=Object.freeze({castTensor:mE,reshapeTensor:gv,linspaceImpl:vE,upcastType:bn,axesAreInnerMostDims:JS,combineLocations:PM,computeOutAndReduceShapes:Gn,expandShapeToKeepDim:ei,assertAxesAreInnerMostDims:Tr,getAxesPermutation:Gi,getUndoAxesPermutation:yg,getInnerMostAxes:qi,getBroadcastDims:Hs,getReductionAxes:Rn,assertAndGetBroadcastShape:ut,assertParamsConsistent:LM,computeOutShape:cu,computePool2DInfo:ec,computePool3DInfo:Lf,computeConv2DInfo:bs,computeConv3DInfo:Ff,computeDefaultPad:hE,tupleValuesAreOne:fu,eitherStridesOrDilationsAreOne:yr,convertConv2DDataFormat:kg});function Ew(t,n){if(t.length!==n.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+t.length+", imag: "+n.length+".");for(var e=new Float32Array(2*t.length),r=0;r<e.length;r+=2)e[r]=t[r/2],e[r+1]=n[r/2];return e}function PN(t,n){return{real:t[2*n],imag:t[2*n+1]}}function M7(t,n,e,r){t[2*r]=n,t[2*r+1]=e}function P7(t,n,e){var r=(e?2:-2)*Math.PI*(t/n);return{real:Math.cos(r),imag:Math.sin(r)}}function gE(t,n,e,r,i){for(var o=Array.from(n).map(function(p,h){return{score:p,boxIndex:h}}).filter(function(p){return p.score>i}).sort(function(p,h){return h.score-p.score}),a=[],s=0;s<o.length;s++){var u=o[s],l=u.score,c=u.boxIndex;if(l<i)break;for(var d=!1,f=a.length-1;f>=0;--f)if(L7(t,c,a[f])>=r){d=!0;break}if(!d&&(a.push(c),a.length>=e))break}return Fr(a,"int32")}function L7(t,n,e){var r=t.subarray(4*n,4*n+4),i=t.subarray(4*e,4*e+4),o=Math.min(r[0],r[2]),a=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),l=Math.min(i[0],i[2]),c=Math.min(i[1],i[3]),d=Math.max(i[0],i[2]),f=Math.max(i[1],i[3]),p=(s-o)*(u-a),h=(d-l)*(f-c);if(p<=0||h<=0)return 0;var v=Math.max(o,l),g=Math.max(a,c),m=Math.min(s,d),y=Math.min(u,f),b=Math.max(m-v,0)*Math.max(y-g,0);return b/(p+h-b)}function nP(t,n,e){var r=new Array(t.rank).fill(0),i=t.shape.slice();return n.map(function(o){i[e]=o;var a=t.slice(r,i);return r[e]+=o,a})}function rP(t,n){for(var e=new Array(t.rank),r=0;r<e.length;r++)e[r]=t.shape[r]*n[r];var i=Ge(e,t.dtype);for(r=0;r<i.values.length;++r){for(var o=i.indexToLoc(r),a=new Array(t.rank),s=0;s<a.length;s++)a[s]=o[s]%t.shape[s];var u=t.locToIndex(a);i.values[r]=t.values[u]}return i.toTensor()}function iP(t,n,e,r,i){for(var o=n[n.length-1],a=[t.length/o,o],s=a[0],u=a[1],l=kf(e,s*r),c=kf("int32",s*r),d=0;d<s;d++){for(var f=d*u,p=t.subarray(f,f+u),h=[],v=0;v<p.length;v++)h.push({value:p[v],index:v});h.sort(function(w,x){return x.value-w.value});var g=d*r,m=l.subarray(g,g+r),y=c.subarray(g,g+r);for(v=0;v<r;v++)m[v]=h[v].value,y[v]=h[v].index}var b=n.slice();return b[b.length-1]=r,[mn(l,b,e),mn(c,b,"int32")]}function yE(t,n){for(var e=[],r=0;r<n.length;r++)n[r]&&e.push(r);var i=Ge(t,"int32"),o=Ge([e.length,t.length],"int32");for(r=0;r<e.length;r++){var a=i.indexToLoc(e[r]),s=r*t.length;o.values.set(a,s)}return o.toTensor()}var F7=function(){return function(t,n){this.outputShape=[],this.outputShape=t,this.variableNames=n.map(function(i,o){return"T"+o});var e=[];this.variableNames.forEach(function(i){e.push("float v"+i+" = get"+i+"AtOutCoords();")});var r=this.variableNames.map(function(i){return"v"+i}).join(" + ");this.userCode=`
      void main() {
        `+e.join(`
        `)+`

        float result = `+r+`;
        setOutput(result);
      }
    `}}(),z7=function(){return function(t,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.variableNames=n.map(function(i,o){return"T"+o});var e=[];this.variableNames.forEach(function(i){e.push("vec4 v"+i+" = get"+i+"AtOutCoords();")});var r=this.variableNames.map(function(i){return"v"+i}).join(" + ");this.userCode=`
      void main() {
        `+e.join(`
        `)+`

        vec4 result = `+r+`;
        setOutput(result);
      }
    `}}(),B7=function(){return function(t,n,e){this.variableNames=["A"];var r=t.windowSize,i=t.batchSize,o=t.inSize,a=Math.ceil(o/r);e||this.variableNames.push("bestIndicesA"),this.outputShape=[i,a];var s=n==="max"?">":"<",u=e?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+r+`;

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < `+r+`; i++) {
          int inIdx = `+u+`;
          float candidate = getA(batch, inIdx);
          if (candidate `+s+` bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}();function oP(t,n){return["x","y","z","w","u","v"].slice(0,n).map(function(e){return t+"."+e})}function _r(t,n){return n===1?[t]:oP(t,n)}function sr(){var t,n,e,r,i,o,a,s,u,l;return ie().getNumber("WEBGL_VERSION")===2?(t="#version 300 es",n="in",e="out",r="in",i="texture",o="outputColor",a="out vec4 outputColor;",s=`
      bool isnan_custom(float val) {
        return (val > 0.0 || val < 0.0) ? false : val != 0.0;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `,u="",l=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(t="",n="attribute",e="varying",r="varying",i="texture2D",o="gl_FragColor",a="",s=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,u=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,l=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:t,attribute:n,varyingVs:e,varyingFs:r,texture2D:i,output:o,defineOutput:a,defineSpecialNaN:s,defineSpecialInf:u,defineRound:l}}function Gs(t,n,e){e===void 0&&(e="index");var r=vs(n);return r.map(function(i,o){return"int "+t[o]+" = "+e+" / "+i+"; "+(o===r.length-1?"int "+t[o+1]+" = "+e+" - "+t[o]+" * "+i:"index -= "+t[o]+" * "+i)+";"}).join("")}function bE(t){var n=vs(t).map(function(e){return e.toString()});return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * `+n[0]+" + coords.y * "+n[1]+` + coords.z;
  }
`}var aP=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;function j7(t,n,e,r){var i=[];t.forEach(function(p){var h=Me(p.shapeInfo.logicalShape);p.shapeInfo.isUniform?i.push("uniform float "+p.name+(h>1?"["+h+"]":"")+";"):(i.push("uniform sampler2D "+p.name+";"),i.push("uniform int offset"+p.name+";"))});var o,a,s=i.join(`
`),u=t.map(function(p){return function(h,v,g){g===void 0&&(g=!1);var m="";m+=g?sP(h):rl(h);var y=h.shapeInfo.logicalShape,b=v.logicalShape;return y.length<=b.length&&(m+=g?function(w,x){var C,E=w.name,S=E.charAt(0).toUpperCase()+E.slice(1),N="get"+S+"AtOutCoords",k=w.shapeInfo.logicalShape.length,M=x.logicalShape.length,D=Hs(w.shapeInfo.logicalShape,x.logicalShape),R=Bt(M),O=M-k,P=["x","y","z","w","u","v"];C=k===0?"":M<2&&D.length>=1?"coords = 0;":D.map(function(B){return"coords."+P[B+O]+" = 0;"}).join(`
`);var A="";A=M<2&&k>0?"coords":w.shapeInfo.logicalShape.map(function(B,q){return"coords."+P[q+O]}).join(", ");var I="return outputValue;",_=Me(w.shapeInfo.logicalShape)===1,F=Me(x.logicalShape)===1;if(k!==1||_||F){if(_&&!F)I=M===1?`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:`
        return vec4(outputValue.x);
      `;else if(D.length){var L=k-2,W=k-1;D.indexOf(L)>-1&&D.indexOf(W)>-1?I="return vec4(outputValue.x);":D.indexOf(L)>-1?I="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":D.indexOf(W)>-1&&(I="return vec4(outputValue.xx, outputValue.zz);")}}else I=`
      return vec4(outputValue.xy, outputValue.xy);
    `;return`
    vec4 `+N+`() {
      `+R+` coords = getOutputCoords();
      `+C+`
      vec4 outputValue = get`+S+"("+A+`);
      `+I+`
    }
  `}(h,v):function(w,x){var C=w.name,E=C.charAt(0).toUpperCase()+C.slice(1),S="get"+E+"AtOutCoords",N=x.texShape,k=w.shapeInfo.texShape,M=w.shapeInfo.logicalShape.length,D=x.logicalShape.length;if(!w.shapeInfo.isUniform&&M===D&&w.shapeInfo.flatOffset==null&&Bn(k,N))return`
      float `+S+`() {
        return sampleTexture(`+C+`, resultUV);
      }
    `;var R,O=Bt(D),P=Hs(w.shapeInfo.logicalShape,x.logicalShape),A=D-M,I=["x","y","z","w","u","v"];R=M===0?"":D<2&&P.length>=1?"coords = 0;":P.map(function(F){return"coords."+I[F+A]+" = 0;"}).join(`
`);var _="";return _=D<2&&M>0?"coords":w.shapeInfo.logicalShape.map(function(F,L){return"coords."+I[L+A]}).join(", "),`
    float `+S+`() {
      `+O+` coords = getOutputCoords();
      `+R+`
      return get`+E+"("+_+`);
    }
  `}(h,v)),m}(p,n,r)}).join(`
`),l=n.texShape,c=sr(),d=function(p){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return `+p.texture2D+`(textureSampler, uv).r;
    }
  `}(c),f=function(p){return p.version+`
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    `+p.varyingFs+` vec2 resultUV;
    `+p.defineOutput+`
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    `+p.defineSpecialNaN+`
    `+p.defineSpecialInf+`
    `+p.defineRound+`

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    `+V7+`
    `+$7+`
    `+U7+`
  `}(c);return n.isPacked?(o=function(p,h){switch(p.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(w,x){var C=[Math.ceil(x[0]/2),Math.ceil(x[1]/2)];return C[0]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * `+C[1]+`.0);
      }
    `:C[1]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * `+C[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+C[0]+", "+C[1]+`));
      return 2 * (resTexRC.x * `+C[1]+` + resTexRC.y);
    }
  `}(0,h);case 2:return function(w,x){var C=[Math.ceil(x[0]/2),Math.ceil(x[1]/2)];if(Bn(w,x))return`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(`+C[0]+", "+C[1]+`));
      }
    `;var E=Math.ceil(w[1]/2);return`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+C[0]+", "+C[1]+`));

      int index = resTexRC.x * `+C[1]+` + resTexRC.y;
      int r = 2 * (index / `+E+`);
      int c = imod(index, `+E+`) * 2;

      return ivec2(r, c);
    }
  `}(p,h);case 3:return v=p,g=h,m=[Math.ceil(g[0]/2),Math.ceil(g[1]/2)],y=Math.ceil(v[2]/2),b=y*Math.ceil(v[1]/2),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+m[0]+", "+m[1]+`));
      int index = resTexRC.x * `+m[1]+` + resTexRC.y;

      int b = index / `+b+`;
      index -= b * `+b+`;

      int r = 2 * (index / `+y+`);
      int c = imod(index, `+y+`) * 2;

      return ivec3(b, r, c);
    }
  `;default:return function(w,x){for(var C=[Math.ceil(x[0]/2),Math.ceil(x[1]/2)],E=Math.ceil(w[w.length-1]/2),S=E*Math.ceil(w[w.length-2]/2),N=S,k="",M="b, r, c",D=2;D<w.length-1;D++)N*=w[w.length-D-1],k=`
      int b`+D+" = index / "+N+`;
      index -= b`+D+" * "+N+`;
    `+k,M="b"+D+", "+M;return`
    ivec`+w.length+` getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+C[0]+", "+C[1]+`));
      int index = resTexRC.x * `+C[1]+` + resTexRC.y;

      `+k+`

      int b = index / `+S+`;
      index -= b * `+S+`;

      int r = 2 * (index / `+E+`);
      int c = imod(index, `+E+`) * 2;

      return ivec`+w.length+"("+M+`);
    }
  `}(p,h)}var v,g,m,y,b}(n.logicalShape,l),a=function(p){return`
    void setOutput(vec4 val) {
      `+p.output+` = val;
    }
  `}(c)):(o=function(p,h){switch(p.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(m,y){return y[0]===1?`
      int getOutputCoords() {
        return int(resultUV.x * `+y[1]+`.0);
      }
    `:y[1]===1?`
      int getOutputCoords() {
        return int(resultUV.y * `+y[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+y[0]+", "+y[1]+`));
      return resTexRC.x * `+y[1]+` + resTexRC.y;
    }
  `}(0,h);case 2:return function(m,y){return Bn(m,y)?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(`+y[0]+", "+y[1]+`));
      }
    `:m[1]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+y[0]+", "+y[1]+`));
        int index = resTexRC.x * `+y[1]+` + resTexRC.y;
        return ivec2(index, 0);
      }
    `:m[0]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+y[0]+", "+y[1]+`));
        int index = resTexRC.x * `+y[1]+` + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+y[0]+", "+y[1]+`));
      int index = resTexRC.x * `+y[1]+` + resTexRC.y;
      int r = index / `+m[1]+`;
      int c = index - r * `+m[1]+`;
      return ivec2(r, c);
    }
  `}(p,h);case 3:return v=h,g=Gs(["r","c","d"],p),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+v[0]+", "+v[1]+`));
      int index = resTexRC.x * `+v[1]+` + resTexRC.y;
      `+g+`
      return ivec3(r, c, d);
    }
  `;case 4:return function(m,y){var b=Gs(["r","c","d","d2"],m);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+y[0]+", "+y[1]+`));
      int index = resTexRC.x * `+y[1]+` + resTexRC.y;
      `+b+`
      return ivec4(r, c, d, d2);
    }
  `}(p,h);case 5:return function(m,y){var b=Gs(["r","c","d","d2","d3"],m);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(`+y[0]+`,
                             `+y[1]+`));

      int index = resTexRC.x * `+y[1]+` + resTexRC.y;

      `+b+`

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}(p,h);case 6:return function(m,y){var b=Gs(["r","c","d","d2","d3","d4"],m);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+y[0]+", "+y[1]+`));
      int index = resTexRC.x * `+y[1]+` + resTexRC.y;

      `+b+`

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}(p,h);default:throw new Error(p.length+"-D output sampling is not yet supported")}var v,g}(n.logicalShape,l),a=function(p){return`
    void setOutput(float val) {
      `+p.output+` = vec4(val, 0, 0, 0);
    }
  `}(c)),r&&(f+=W7),[f,d,a,s,o,u,e].join(`
`)}function rl(t){var n=t.shapeInfo.logicalShape;switch(n.length){case 0:return function(e){var r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1);if(e.shapeInfo.isUniform)return"float "+i+"() {return "+r+";}";var o=e.shapeInfo.texShape,a=o[0],s=o[1];if(a===1&&s===1)return`
      float `+i+`() {
        return sampleTexture(`+r+`, halfCR);
      }
    `;var u=e.shapeInfo.texShape,l=u[0],c=u[1],d=Rs(r);return`
    float `+i+`() {
      vec2 uv = uvFromFlat(`+l+", "+c+", "+d+`);
      return sampleTexture(`+r+`, uv);
    }
  `}(t);case 1:return function(e){var r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1);if(e.shapeInfo.isUniform)return`
      float `+i+`(int index) {
        `+Ku(e)+`
      }
    `;var o=e.shapeInfo.texShape,a=o[0],s=o[1];if(s===1&&a===1)return`
      float `+i+`(int index) {
        return sampleTexture(`+r+`, halfCR);
      }
    `;var u=Rs(r);return s===1?`
      float `+i+`(int index) {
        vec2 uv = vec2(0.5, (float(index + `+u+") + 0.5) / "+a+`.0);
        return sampleTexture(`+r+`, uv);
      }
    `:a===1?`
      float `+i+`(int index) {
        vec2 uv = vec2((float(index + `+u+") + 0.5) / "+s+`.0, 0.5);
        return sampleTexture(`+r+`, uv);
      }
    `:`
    float `+i+`(int index) {
      vec2 uv = uvFromFlat(`+a+", "+s+", index + "+u+`);
      return sampleTexture(`+r+`, uv);
    }
  `}(t);case 2:return function(e){var r=e.shapeInfo.logicalShape,i=e.name,o="get"+i.charAt(0).toUpperCase()+i.slice(1),a=e.shapeInfo.texShape;if(a!=null&&Bn(r,a)){var s=a[0],u=a[1];return`
    float `+o+`(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(`+u+".0, "+s+`.0);
      return sampleTexture(`+i+`, uv);
    }
  `}var l=_a(r),c=l.newShape,d=l.keptDims,f=c;if(f.length<r.length){var p=il(e,f);return`
      `+rl(p)+`
      float `+o+`(int row, int col) {
        return `+o+"("+ol(["row","col"],d)+`);
      }
    `}if(e.shapeInfo.isUniform)return`
      float `+o+`(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(`+r[1]+`, 1)));
        `+Ku(e)+`
      }
    `;var h=a[0],v=a[1],g=Rs(i);return v===1?`
    float `+o+`(int row, int col) {
      float index = dot(vec3(row, col, `+g+"), vec3("+r[1]+`, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / `+h+`.0);
      return sampleTexture(`+i+`, uv);
    }
  `:h===1?`
    float `+o+`(int row, int col) {
      float index = dot(vec3(row, col, `+g+"), vec3("+r[1]+`, 1, 1));
      vec2 uv = vec2((index + 0.5) / `+v+`.0, 0.5);
      return sampleTexture(`+i+`, uv);
    }
  `:`
  float `+o+`(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * `+r[1]+" + col + "+g+`;
    vec2 uv = uvFromFlat(`+h+", "+v+`, index);
    return sampleTexture(`+i+`, uv);
  }
`}(t);case 3:return function(e){var r=e.shapeInfo.logicalShape,i=e.name,o="get"+i.charAt(0).toUpperCase()+i.slice(1),a=r[1]*r[2],s=r[2],u=_a(r),l=u.newShape,c=u.keptDims,d=l;if(d.length<r.length){var f=il(e,d);return`
        `+rl(f)+`
        float `+o+`(int row, int col, int depth) {
          return `+o+"("+ol(["row","col","depth"],c)+`);
        }
      `}if(e.shapeInfo.isUniform)return`
      float `+o+`(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(`+a+", "+s+`, 1)));
        `+Ku(e)+`
      }
    `;var p=e.shapeInfo.texShape,h=p[0],v=p[1],g=e.shapeInfo.flatOffset;if(v===a&&g==null)return`
        float `+o+`(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(`+s+`, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(`+v+".0, "+h+`.0);
          return sampleTexture(`+i+`, uv);
        }
      `;if(v===s&&g==null)return`
    float `+o+`(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(`+r[1]+`, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+v+".0, "+h+`.0);
      return sampleTexture(`+i+`, uv);
    }
  `;var m=Rs(i);return`
      float `+o+`(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * `+a+" + col * "+s+" + depth + "+m+`;
        vec2 uv = uvFromFlat(`+h+", "+v+`, index);
        return sampleTexture(`+i+`, uv);
      }
  `}(t);case 4:return function(e){var r=e.shapeInfo.logicalShape,i=e.name,o="get"+i.charAt(0).toUpperCase()+i.slice(1),a=r[3],s=r[2]*a,u=r[1]*s,l=_a(r),c=l.newShape,d=l.keptDims;if(c.length<r.length){var f=il(e,c);return`
      `+rl(f)+`
      float `+o+`(int row, int col, int depth, int depth2) {
        return `+o+"("+ol(["row","col","depth","depth2"],d)+`);
      }
    `}if(e.shapeInfo.isUniform)return`
      float `+o+`(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(`+u+", "+s+", "+a+`, 1)));
        `+Ku(e)+`
      }
    `;var p=e.shapeInfo.flatOffset,h=e.shapeInfo.texShape,v=h[0],g=h[1];if(g===u&&p==null)return`
      float `+o+`(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(`+s+", "+a+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+g+".0, "+v+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;if(g===a&&p==null)return`
      float `+o+`(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(`+r[1]*r[2]+", "+r[2]+`, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+g+".0, "+v+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;var m=Rs(i);return`
    float `+o+`(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+u+" + col * "+s+` +
          depth * `+a+` + depth2;
      vec2 uv = uvFromFlat(`+v+", "+g+", index + "+m+`);
      return sampleTexture(`+i+`, uv);
    }
  `}(t);case 5:return function(e){var r=e.shapeInfo.logicalShape,i=e.name,o="get"+i.charAt(0).toUpperCase()+i.slice(1),a=r[4],s=r[3]*a,u=r[2]*s,l=r[1]*u,c=_a(r),d=c.newShape,f=c.keptDims;if(d.length<r.length){var p=il(e,d);return`
      `+rl(p)+`
      float `+o+`(int row, int col, int depth, int depth2, int depth3) {
        return `+o+"("+ol(["row","col","depth","depth2","depth3"],f)+`);
      }
    `}if(e.shapeInfo.isUniform)return`
      float `+o+`(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(`+l+", "+u+", "+s+", "+a+`)) +
          depth3;
        `+Ku(e)+`
      }
    `;var h=e.shapeInfo.flatOffset,v=e.shapeInfo.texShape,g=v[0],m=v[1];if(m===l&&h==null)return`
      float `+o+`(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(`+u+", "+s+", "+a+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+m+".0, "+g+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;if(m===a&&h==null)return`
      float `+o+`(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(`+r[1]*r[2]*r[3]+`,
               `+r[2]*r[3]+", "+r[3]+`, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+m+".0, "+g+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;var y=Rs(i);return`
    float `+o+`(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+l+" + col * "+u+" + depth * "+s+` +
          depth2 * `+a+" + depth3 + "+y+`;
      vec2 uv = uvFromFlat(`+g+", "+m+`, index);
      return sampleTexture(`+i+`, uv);
    }
  `}(t);case 6:return function(e){var r=e.shapeInfo.logicalShape,i=e.name,o="get"+i.charAt(0).toUpperCase()+i.slice(1),a=_a(r),s=a.newShape,u=a.keptDims;if(s.length<r.length){var l=il(e,s);return`
      `+rl(l)+`
      float `+o+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return `+o+"("+ol(["row","col","depth","depth2","depth3","depth4"],u)+`);
      }
    `}var c=r[5],d=r[4]*c,f=r[3]*d,p=r[2]*f,h=r[1]*p;if(e.shapeInfo.isUniform)return`
      float `+o+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(`+h+", "+p+", "+f+", "+d+`)) +
          dot(
            vec2(depth3, depth4),
            vec2(`+c+`, 1)));
        `+Ku(e)+`
      }
    `;var v=e.shapeInfo.flatOffset,g=e.shapeInfo.texShape,m=g[0],y=g[1];if(y===h&&v==null)return`
      float `+o+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(`+p+", "+f+", "+d+", "+c+`)) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+y+".0, "+m+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;if(y===c&&v==null)return`
      float `+o+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(`+r[1]*r[2]*r[3]*r[4]+`,
               `+r[2]*r[3]*r[4]+`,
               `+r[3]*r[4]+`,
               `+r[4]+`)) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+y+".0, "+m+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;var b=Rs(i);return`
    float `+o+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+h+" + col * "+p+" + depth * "+f+` +
          depth2 * `+d+" + depth3 * "+c+" + depth4 + "+b+`;
      vec2 uv = uvFromFlat(`+m+", "+y+`, index);
      return sampleTexture(`+i+`, uv);
    }
  `}(t);default:throw new Error(n.length+"-D input sampling is not yet supported")}}function sP(t){var n,e,r;switch(t.shapeInfo.logicalShape.length){case 0:return n=t.name,e="get"+n.charAt(0).toUpperCase()+n.slice(1),r=sr(),`
    vec4 `+e+`() {
      return `+r.texture2D+"("+n+`, halfCR);
    }
  `;case 1:return function(i){var o=i.name,a="get"+o.charAt(0).toUpperCase()+o.slice(1),s=i.shapeInfo.texShape,u=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],l=sr();return`
    vec4 `+a+`(int index) {
      vec2 uv = packedUVfrom1D(
        `+u[0]+", "+u[1]+`, index);
      return `+l.texture2D+"("+o+`, uv);
    }
  `}(t);case 2:return function(i){var o=i.shapeInfo.logicalShape,a=i.name,s="get"+a.charAt(0).toUpperCase()+a.slice(1),u=i.shapeInfo.texShape,l=u[0],c=u[1],d=sr();if(u!=null&&Bn(o,u))return`
      vec4 `+s+`(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(`+c+".0, "+l+`.0);

        return `+d.texture2D+"("+a+`, uv);
      }
    `;var f=[Math.ceil(u[0]/2),Math.ceil(u[1]/2)],p=Math.ceil(o[1]/2);return`
    vec4 `+s+`(int row, int col) {
      vec2 uv = packedUVfrom2D(`+p+", "+f[0]+", "+f[1]+`, row, col);
      return `+d.texture2D+"("+a+`, uv);
    }
  `}(t);case 3:return function(i){var o=i.shapeInfo.logicalShape,a=i.name,s="get"+a.charAt(0).toUpperCase()+a.slice(1),u=i.shapeInfo.texShape,l=[Math.ceil(u[0]/2),Math.ceil(u[1]/2)];if(o[0]===1){var c=o.slice(1),d=il(i,c);return`
        `+sP(d)+`
        vec4 `+s+`(int b, int row, int col) {
          return `+s+"("+ol(["b","row","col"],[1,2])+`);
        }
      `}var f=l[0],p=l[1],h=Math.ceil(o[2]/2),v=h*Math.ceil(o[1]/2),g=sr();return`
    vec4 `+s+`(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        `+f+", "+p+", "+v+", "+h+`, b, row, col);
      return `+g.texture2D+"("+a+`, uv);
    }
  `}(t);default:return function(i){for(var o=i.shapeInfo.logicalShape,a=o.length,s=i.name,u="get"+s.charAt(0).toUpperCase()+s.slice(1),l=i.shapeInfo.texShape,c=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)],d=c[0],f=c[1],p=Math.ceil(o[a-1]/2),h=p*Math.ceil(o[a-2]/2),v="int b, int row, int col",g="b * "+h+" + (row / 2) * "+p+" + (col / 2)",m=2;m<a-1;m++)v="int b"+m+", "+v,h*=o[a-m-1],g="b"+m+" * "+h+" + "+g;var y=sr();return`
    vec4 `+u+"("+v+`) {
      int index = `+g+`;
      int texR = index / `+f+`;
      int texC = index - texR * `+f+`;
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+f+", "+d+`);
      return `+y.texture2D+"("+s+`, uv);
    }
  `}(t)}}var V7=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,$7=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,U7=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,W7=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function Rs(t){return"offset"+t}function Ku(t){var n=t.name,e=Me(t.shapeInfo.logicalShape);return e<2?"return "+n+";":`
    for (int i = 0; i < `+e+`; i++) {
      if (i == index) {
        return `+n+`[i];
      }
    }
  `}function Bt(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error("GPU for rank "+t+" is not yet supported")}function il(t,n){var e=JSON.parse(JSON.stringify(t));return e.shapeInfo.logicalShape=n,e}function ol(t,n){return n.map(function(e){return t[e]}).join(", ")}var H7=function(){return function(t,n,e,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,U(t.length>2,function(){return"Packed arg"+(e.charAt(0).toUpperCase()+e.slice(1))+" supports only inputs with rank above 2."});var i=t[t.length-1],o=Math.ceil(i/n);this.outputShape=t.slice(0,-1),o>1&&this.outputShape.push(o),r||this.variableNames.push("bestIndicesA");var a,s,u=this.outputShape,l=u.length,c=Bt(l),d=_r("coords",l);if(o===1){var f=Bt(s=l+1);a=`
        `+f+" sourceLocR = "+f+"("+d.join()+`, 0);
        ++`+d[l-1]+`;
        `+f+" sourceLocG = "+f+"("+d.join()+`, 0);
        ++`+d[l-2]+`;
        `+f+" sourceLocA = "+f+"("+d.join()+`, 0);
        --`+d[l-1]+`;
        `+f+" sourceLocB = "+f+"("+d.join()+`, 0);
        --`+d[l-2]+";"}else s=l,a=`
        `+c+` sourceLocR = coords;
        ++`+d[l-1]+`;
        `+c+` sourceLocG = coords;
        ++`+d[l-2]+`;
        `+c+` sourceLocA = coords;
        --`+d[l-1]+`;
        `+c+` sourceLocB = coords;
        --`+d[l-2]+";";var p=["x","y","z","w","u","v"].slice(0,s),h="."+p[s-1],v=p.map(function(S){return"int "+S}),g=_r("sourceLocR",s-1).concat("inIdx.r"),m=_r("sourceLocG",s-1).concat("inIdx.g"),y=_r("sourceLocB",s-1).concat("inIdx.b"),b=_r("sourceLocA",s-1).concat("inIdx.a"),w=e==="max"?"greaterThan":"lessThan",x=r?"":`
          inIdx = round(vec4(getBestIndicesAChannel(`+g.join()+`),
                             getBestIndicesAChannel(`+m.join()+`),
                             getBestIndicesAChannel(`+y.join()+`),
                             getBestIndicesAChannel(`+b.join()+")));",C=`vec4(
            getAChannel(`+g.join()+`),
            hasNextCol ? getAChannel(`+m.join()+`) : 0.,
            hasNextRow ? getAChannel(`+y.join()+`) : 0.,
            hasNextRow && hasNextCol ? getAChannel(`+b.join()+") : 0.)",E=r?"":`
      float getBestIndicesAChannel(`+v.join()+`) {
        return getChannel(getBestIndicesA(`+p.join()+`),
                                          vec2(`+p.slice(-2).join()+`));
      }`;this.userCode=`
      float getAChannel(`+v.join()+`) {
        return getChannel(getA(`+p.join()+`),
                               vec2(`+p.slice(-2).join()+`));
      }
      `+E+`
      void main() {
        `+c+` coords = getOutputCoords();
        bool hasNextCol = `+d[l-1]+" < "+(u[l-1]-1)+`;
        bool hasNextRow = `+d[l-2]+" < "+(u[l-2]-1)+`;
        `+a+`
        ivec4 srcIdx = ivec4(sourceLocR`+h+", sourceLocG"+h+`,
          sourceLocB`+h+", sourceLocA"+h+") * "+n+`;
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = `+C+`;

        for (int i = 0; i < `+n+`; i++) {
          inIdx = srcIdx;
          `+x+`
          vec4 candidate = `+C+`;
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(`+w+`(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}(),G7=function(){return function(t){this.variableNames=["dy"],this.outputShape=t.inShape;var n=t.filterHeight,e=t.filterWidth,r=t.strideHeight,i=t.strideWidth,o=t.dilationHeight,a=t.dilationWidth,s=t.effectiveFilterHeight,u=t.effectiveFilterWidth,l=s-1-t.padInfo.top,c=u-1-t.padInfo.left,d=1/(n*e);this.userCode=`
      const ivec2 pads = ivec2(`+l+", "+c+`);
      const float avgMultiplier = float(`+d+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+s+`;
            wR += `+o+`) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+u+`;
            wC+= `+a+`) {
            float dyC = float(dyCCorner + wC) / `+i+`.0;

            if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}(),q7=function(){return function(t){this.variableNames=["dy"],this.outputShape=t.inShape;var n=t.filterDepth,e=t.filterHeight,r=t.filterWidth,i=t.strideDepth,o=t.strideHeight,a=t.strideWidth,s=t.dilationDepth,u=t.dilationHeight,l=t.dilationWidth,c=t.effectiveFilterDepth,d=t.effectiveFilterHeight,f=t.effectiveFilterWidth,p=c-1-t.padInfo.front,h=d-1-t.padInfo.top,v=f-1-t.padInfo.left,g=1/(n*e*r);this.userCode=`
      const ivec3 pads = ivec3(`+p+", "+h+", "+v+`);
      const float avgMultiplier = float(`+g+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+c+`;
            wD += `+s+`) {
          float dyD = float(dyDCorner + wD) / `+i+`.0;

          if (dyD < 0.0 || dyD >= `+t.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+d+`;
              wR += `+u+`) {
            float dyR = float(dyRCorner + wR) / `+o+`.0;

            if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+f+`;
                wC += `+l+`) {
              float dyC = float(dyCCorner + wC) / `+a+`.0;

              if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}(),K7=function(){return function(t,n,e,r,i,o){this.outputShape=[],this.variableNames=["x","mean","variance"],ut(t,n),ut(t,e);var a="0.0";r!=null&&(ut(t,r),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");var s="1.0";i!=null&&(ut(t,i),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = `+a+`;
        float scale = `+s+`;
        float inv = scale * inversesqrt(variance + float(`+o+`));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}(),X7=function(){return function(t,n,e,r,i,o){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],ut(t,n),ut(t,e);var a="vec4(0.0)";r!=null&&(ut(t,r),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");var s="vec4(1.0)";i!=null&&(ut(t,i),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`
      void main() {
        vec4 offset = `+a+`;
        vec4 scale = `+s+`;

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(`+o+`));

        setOutput((x - mean) * inv + offset);
      }
    `}}(),Y7="return areal * breal - aimag * bimag;",J7="return areal * bimag + aimag * breal;",LN=function(){return function(t,n,e){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=ut(n,e),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        `+t+`
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}(),J0="return a + b;",Q0="return a - b;",FN="return a * b;",uP="return (a < 0.) ? b * a : a;",on=function(){return function(t,n,e){this.variableNames=["A","B"],this.outputShape=ut(n,e),this.userCode=`
      float binaryOperation(float a, float b) {
        `+t+`
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}(),lP=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`,Ao=function(){return function(t,n,e,r){r===void 0&&(r=!1),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=ut(n,e);var i=this.outputShape.length,o="";if(r)if(i===0||Me(this.outputShape)===1)o=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(o=`
          `+Bt(i)+` coords = getOutputCoords();
        `,i===1)o+=`
            result.y = (coords + 1) >= `+this.outputShape[0]+` ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{var a=_r("coords",i);o+=`
            bool nextRowOutOfBounds =
              (`+a[i-2]+" + 1) >= "+this.outputShape[i-2]+`;
            bool nextColOutOfBounds =
              (`+a[i-1]+" + 1) >= "+this.outputShape[i-1]+`;
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        `+t+`
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        `+o+`

        setOutput(result);
      }
    `}}(),Q7=function(){function t(n){this.variableNames=["A"],this.outputShape=n,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}return t.prototype.getCustomSetupFunc=function(n,e){var r=this;return function(i,o){r.minLoc==null&&(r.minLoc=i.getUniformLocationNoThrow(o,"minVal"),r.maxLoc=i.getUniformLocationNoThrow(o,"maxVal")),i.gl.uniform1f(r.minLoc,n),i.gl.uniform1f(r.maxLoc,e)}},t}(),Z7=function(){function t(n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}return t.prototype.getCustomSetupFunc=function(n,e){var r=this;return function(i,o){r.minLoc==null&&(r.minLoc=i.getUniformLocationNoThrow(o,"minVal"),r.maxLoc=i.getUniformLocationNoThrow(o,"maxVal")),i.gl.uniform1f(r.minLoc,n),i.gl.uniform1f(r.maxLoc,e)}},t}(),eG=function(){return function(t){this.variableNames=["real","imag"],this.outputShape=t,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}(),tG=function(){return function(t){this.outputShape=[],this.outputShape=cu(t,1),this.variableNames=t.map(function(s,u){return"T"+u});var n=new Array(t.length-1);n[0]=t[0][1];for(var e=1;e<n.length;e++)n[e]=n[e-1]+t[e][1];var r=["if (yC < "+n[0]+") setOutput(getT0(yR, yC));"];for(e=1;e<n.length;e++){var i=n[e-1];r.push("else if (yC < "+n[e]+") setOutput(getT"+e+"(yR, yC-"+i+"));")}var o=n.length,a=n[n.length-1];r.push("else setOutput(getT"+o+"(yR, yC-"+a+"));"),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        `+r.join(`
        `)+`
      }
    `}}(),nG=function(){return function(t,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=cu(t,n);var e=this.outputShape,r=e.length,i=Bt(r),o=_r("coords",r),a=["x","y","z","w","u","v"].slice(0,r);this.variableNames=t.map(function(g,m){return"T"+m});var s=new Array(t.length-1);s[0]=t[0][n];for(var u=1;u<s.length;u++)s[u]=s[u-1]+t[u][n];var l=a[n],c=a.slice(-2),d=a.join(),f="if ("+l+" < "+s[0]+`) {
        return getChannel(
            getT0(`+d+"), vec2("+c.join()+`));
        }`;for(u=1;u<s.length;u++){var p=s[u-1];f+=`
        if (`+l+" < "+s[u]+"  && "+l+" >= "+s[u-1]+`) {
          return getChannel(
            getT`+u+"("+yh(a,l,p)+`),
            vec2(`+yh(c,l,p)+`));
        }`}var h=s.length,v=s[s.length-1];f+=`
        return getChannel(
          getT`+h+"("+yh(a,l,v)+`),
          vec2(`+yh(c,l,v)+"));",this.userCode=`
      float getValue(`+a.map(function(g){return"int "+g})+`) {
        `+f+`
      }

      void main() {
        `+i+` coords = getOutputCoords();
        vec4 result = vec4(getValue(`+o+`), 0., 0., 0.);

        `+o[r-1]+" = "+o[r-1]+` + 1;
        if (`+o[r-1]+" < "+e[r-1]+`) {
          result.g = getValue(`+o+`);
        }

        `+o[r-2]+" = "+o[r-2]+` + 1;
        if (`+o[r-2]+" < "+e[r-2]+`) {
          result.a = getValue(`+o+`);
        }

        `+o[r-1]+" = "+o[r-1]+` - 1;
        if (`+o[r-2]+" < "+e[r-2]+` &&
            `+o[r-1]+" < "+e[r-1]+`) {
          result.b = getValue(`+o+`);
        }
        setOutput(result);
      }
    `}}();function yh(t,n,e){var r=t.indexOf(n);return t.map(function(i,o){return o===r?i+" - "+e:i}).join()}var rG=function(){return function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideHeight,e=t.strideWidth,r=t.padInfo.top,i=t.padInfo.left,o=t.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < `+t.batchSize+`; b++) {
          for (int yR = 0; yR < `+t.outHeight+`; yR++) {
            int xR = wR + yR * `+n+" - "+r+`;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+t.outWidth+`; yC++) {
              int xC = wC + yC * `+e+" - "+i+`;

              if (xC < 0 || xC >= `+t.inWidth+`) {
                continue;
              }

              if (`+o+`) {
                float dyValue = getDy(b, yR, yC, d2);
                float xValue = getX(b, xR, xC, d1);
                dotProd += (xValue * dyValue);
              } else {
                float dyValue = getDy(b, d2, yR, yC);
                float xValue = getX(b, d1, xR, xC);
                dotProd += (xValue * dyValue);
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}(),iG=function(){return function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,e=t.filterWidth,r=t.strideHeight,i=t.strideWidth,o=t.dataFormat==="channelsLast",a=n-1-t.padInfo.top,s=e-1-t.padInfo.left,u=o?1:2,l=o?2:3,c=o?3:1;this.userCode=`
      const ivec2 pads = ivec2(`+a+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[`+c+`];

        ivec2 dyCorner = ivec2(coords[`+u+"], coords["+l+`]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+n+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+n+` - 1 - wR;

          for (int wC = 0; wC < `+e+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+i+`.0;

            if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+e+` - 1 - wC;

            for (int d2 = 0; d2 < `+t.outChannels+`; d2++) {

              if (`+o+`) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}(),oG=function(){return function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideDepth,e=t.strideHeight,r=t.strideWidth,i=t.padInfo.front,o=t.padInfo.top,a=t.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < `+t.batchSize+`; b++) {
          for (int yF = 0; yF < `+t.outDepth+`; yF++) {
            int xF = wF + yF * `+n+" - "+i+`;

            if (xF < 0 || xF >= `+t.inDepth+`) {
              continue;
            }

            for (int yR = 0; yR < `+t.outHeight+`; yR++) {
              int xR = wR + yR * `+e+" - "+o+`;

              if (xR < 0 || xR >= `+t.inHeight+`) {
                continue;
              }

              for (int yC = 0; yC < `+t.outWidth+`; yC++) {
                int xC = wC + yC * `+r+" - "+a+`;

                if (xC < 0 || xC >= `+t.inWidth+`) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}(),aG=function(){return function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterDepth,e=t.filterHeight,r=t.filterWidth,i=t.strideDepth,o=t.strideHeight,a=t.strideWidth,s=n-1-t.padInfo.front,u=e-1-t.padInfo.top,l=r-1-t.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(`+s+", "+u+", "+l+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < `+n+`; wF++) {
          float dyF = float(dyFCorner + wF) / `+i+`.0;

          if (dyF < 0.0 || dyF >= `+t.outDepth+`.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = `+n+` - 1 - wF;

          for (int wR = 0; wR < `+e+`; wR++) {
            float dyR = float(dyRCorner + wR) / `+o+`.0;

            if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = `+e+` - 1 - wR;

            for (int wC = 0; wC < `+r+`; wC++) {
              float dyC = float(dyCCorner + wC) / `+a+`.0;

              if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = `+r+` - 1 - wC;

              for (int d2 = 0; d2 < `+t.outChannels+`; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}(),sG=function(){return function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideHeight,e=t.strideWidth,r=t.padInfo.top,i=t.padInfo.left,o=t.outChannels/t.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * `+o+` + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < `+t.batchSize+`; b++) {
          for (int yR = 0; yR < `+t.outHeight+`; yR++) {
            int xR = wR + yR * `+n+" - "+r+`;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+t.outWidth+`; yC++) {
              int xC = wC + yC * `+e+" - "+i+`;

              if (xC < 0 || xC >= `+t.inWidth+`) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}(),uG=function(){return function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,e=t.filterWidth,r=t.strideHeight,i=t.strideWidth,o=n-1-t.padInfo.top,a=e-1-t.padInfo.left,s=t.outChannels/t.inChannels;this.userCode=`
      const ivec2 pads = ivec2(`+o+", "+a+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < `+n+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+n+` - 1 - wR;

          for (int wC = 0; wC < `+e+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+i+`.0;

            if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+e+` - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < `+s+`; dm++) {
              int d2 = d1 * `+s+` + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}(),zN=function(){return function(t,n,e,r){n===void 0&&(n=!1),e===void 0&&(e=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.outputShape=t.outShape;var i=t.padInfo.top,o=t.padInfo.left,a=t.strideHeight,s=t.strideWidth,u=t.dilationHeight,l=t.dilationWidth,c=t.filterHeight,d=t.filterWidth,f=4*Math.floor(t.inChannels/4),p=t.inChannels%4,h=t.dataFormat==="channelsLast",v=h?1:2,g=h?2:3,m=h?3:1,y="",b="";e&&(y=r?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+e+`
        }`:`
          float activation(float x) {
            `+e+`
          }
        `,b="result = activation(result);");var w=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+y+`

      const ivec2 strides = ivec2(`+a+", "+s+`);
      const ivec2 pads = ivec2(`+i+", "+o+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[`+m+`];

        ivec2 xRCCorner =
            ivec2(coords[`+v+"], coords["+g+`]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+c+`; wR++) {
          int xR = xRCorner + wR * `+u+`;

          if (xR < 0 || xR >= `+t.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+d+`; wC++) {
            int xC = xCCorner + wC * `+l+`;

            if (xC < 0 || xC >= `+t.inWidth+`) {
              continue;
            }

            for (int d1 = 0; d1 < `+f+`; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (`+h+`) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (`+(p===1)+`) {

              if (`+h+`) {
                dotProd +=
                    getX(batch, xR, xC, `+f+`) *
                    getW(wR, wC, `+f+`, d2);
              } else {
                dotProd +=
                    getX(batch, `+f+`, xR, xC) *
                    getW(wR, wC, `+f+`, d2);
              }

            } else if (`+(p===2)+`) {
              vec2 wValues = vec2(
                getW(wR, wC, `+f+`, d2),
                getW(wR, wC, `+f+` + 1, d2)
              );

              if (`+h+`) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, `+f+`),
                  getX(batch, xR, xC, `+f+` + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, `+f+`, xR, xC),
                  getX(batch, `+f+` + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (`+(p===3)+`) {
              vec3 wValues = vec3(
                getW(wR, wC, `+f+`, d2),
                getW(wR, wC, `+f+` + 1, d2),
                getW(wR, wC, `+f+` + 2, d2)
              );

              if (`+h+`) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, `+f+`),
                  getX(batch, xR, xC, `+f+` + 1),
                  getX(batch, xR, xC, `+f+` + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, `+f+`, xR, xC),
                  getX(batch, `+f+` + 1, xR, xC),
                  getX(batch, `+f+` + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        `+w+`
        `+b+`
        setOutput(result);
      }
    `}}(),lG=function(){return function(t){this.variableNames=["x","W"],this.outputShape=t.outShape;var n=t.padInfo.front,e=t.padInfo.top,r=t.padInfo.left,i=t.strideDepth,o=t.strideHeight,a=t.strideWidth,s=t.dilationDepth,u=t.dilationHeight,l=t.dilationWidth,c=t.filterDepth,d=t.filterHeight,f=t.filterWidth,p=4*Math.floor(t.inChannels/4),h=t.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(`+i+", "+o+", "+a+`);
      const ivec3 pads = ivec3(`+n+", "+e+", "+r+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < `+c+`; wF++) {
          int xF = xFCorner + wF * `+s+`;

          if (xF < 0 || xF >= `+t.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+d+`; wR++) {
            int xR = xRCorner + wR * `+u+`;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+f+`; wC++) {
              int xC = xCCorner + wC * `+l+`;

              if (xC < 0 || xC >= `+t.inWidth+`) {
                continue;
              }

              for (int d1 = 0; d1 < `+p+`; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (`+(h===1)+`) {
                dotProd +=
                  getX(batch, xF, xR, xC, `+p+`) *
                  getW(wF, wR, wC, `+p+`, d2);
              } else if (`+(h===2)+`) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, `+p+`),
                  getX(batch, xF, xR, xC, `+p+` + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, `+p+`, d2),
                  getW(wF, wR, wC, `+p+` + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (`+(h===3)+`) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, `+p+`),
                  getX(batch, xF, xR, xC, `+p+` + 1),
                  getX(batch, xF, xR, xC, `+p+` + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, `+p+`, d2),
                  getW(wF, wR, wC, `+p+` + 1, d2),
                  getW(wF, wR, wC, `+p+` + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}(),BN=function(){return function(t,n,e,r){n===void 0&&(n=!1),e===void 0&&(e=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.outputShape=t.outShape;var i=t.inHeight,o=t.inWidth,a=t.padInfo.top,s=t.padInfo.left,u=t.strideHeight,l=t.strideWidth,c=t.dilationHeight,d=t.dilationWidth,f=t.filterHeight,p=t.filterWidth,h=t.outChannels/t.inChannels,v="",g="";e&&(v=r?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+e+`
        }`:`
          float activation(float x) {
            `+e+`
          }
        `,g="result = activation(result);");var m=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+v+`

      const ivec2 strides = ivec2(`+u+", "+l+`);
      const ivec2 pads = ivec2(`+a+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / `+h+`;
        int q = d2 - d1 * `+h+`;

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < `+f+`; wR++) {
          int xR = xRCorner + wR * `+c+`;

          if (xR < 0 || xR >= `+i+`) {
            continue;
          }

          for (int wC = 0; wC < `+p+`; wC++) {
            int xC = xCCorner + wC * `+d+`;

            if (xC < 0 || xC >= `+o+`) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        `+m+`
        `+g+`
        setOutput(result);
      }
    `}}(),jN=function(){return function(t,n,e,r){n===void 0&&(n=!1),e===void 0&&(e=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.outShape;for(var i=t.inHeight,o=t.inWidth,a=t.padInfo.top,s=t.padInfo.left,u=t.strideHeight,l=t.strideWidth,c=t.dilationHeight,d=t.dilationWidth,f=t.filterHeight,p=t.filterWidth,h=p,v="int xR; int xC; int xCOffset;",g=0;g<f;g++)for(var m=0;m<p;m++)v+=`
          vec4 xTexelR`+g+"C"+2*m+` = vec4(0.);
          vec4 wR`+g+"C"+m+` = vec4(0.);
          vec4 xR`+g+"C"+m+" = vec4(0.);";for(g=0;g<f;g++)for(var y=0;y<h;y++){if(v+=`
          xR = xRCorner + `+g*c+`;
          xC = xCCorner + `+(m=2*y)*d+`;
        `,l===1){if(m<p&&(v+=s%2==1?`
                xCOffset = xC + 1;
                if(xR >= 0 && xR < `+i+" && xCOffset >= 0 && xCOffset < "+o+`) {
                  xTexelR`+g+"C"+m+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+g+"C"+m+` = vec4(0.);
                }

                xCOffset = xC + 1 - 2;
                if(xR >= 0 && xR < `+i+" && xCOffset >= 0 && xCOffset < "+o+`) {
                  vec4 previous = getX(batch, xR, xCOffset, d1);
                  xR`+g+"C"+m+" = vec4(previous.zw, xTexelR"+g+"C"+m+`.xy);
                } else {
                  xR`+g+"C"+m+" = vec4(0, 0, xTexelR"+g+"C"+m+`.xy);
                }
              `:`
                if(xR >= 0 && xR < `+i+" && xC >= 0 && xC < "+o+`) {
                  xTexelR`+g+"C"+m+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+g+"C"+m+` = vec4(0.);
                }

                xR`+g+"C"+m+" = xTexelR"+g+"C"+m+`;
              `,m+1<p)){var b=s%2==0?WS(d):d;d%2==0&&s%2==1||d%2!=0&&s%2!=1?(v+=`
                  xCOffset = xC + `+s%2+" + "+b+`;

                  if(xR >= 0 && xR < `+i+` &&
                    xCOffset >= 0 && xCOffset < `+o+`) {
                    xTexelR`+g+"C"+(m+2)+` = getX(batch, xR, xCOffset, d1);
                  }
                `,d>1&&(v+=`
                    xCOffset -= 2;
                    if(xR >= 0 && xR < `+i+` &&
                      xCOffset >= 0 && xCOffset < `+o+`) {
                      xTexelR`+g+"C"+m+` = getX(batch, xR, xCOffset, d1);
                    } else {
                      xTexelR`+g+"C"+m+` = vec4(0.);
                    }
                  `),v+=`
                  xR`+g+"C"+(m+1)+` = vec4(
                    xTexelR`+g+"C"+m+".zw, xTexelR"+g+"C"+(m+2)+`.xy);
                `):v+=`
                  xCOffset = xC + `+b+`;

                  if(xR >= 0 && xR < `+i+` &&
                    xCOffset >= 0 && xCOffset < `+o+`) {
                    xTexelR`+g+"C"+(m+2)+` = getX(batch, xR, xCOffset, d1);
                  }

                  xR`+g+"C"+(m+1)+" = xTexelR"+g+"C"+(m+2)+`;
                `}}else m<p&&(v+=`
              if(xR >= 0 && xR < `+i+`) {
            `,s%2==1?(v+=`
                xCOffset = xC + 1 - `+l+`;
                if(xCOffset >= 0 && xCOffset < `+o+`) {
                  xTexelR`+g+"C"+m+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+g+"C"+m+` = vec4(0.);
                }

                if(xC + 1 >= 0 && xC + 1 < `+o+`) {
                  xTexelR`+g+"C"+(m+2)+` = getX(batch, xR, xC + 1, d1);
                } else {
                  xTexelR`+g+"C"+(m+2)+` = vec4(0.);
                }

                xR`+g+"C"+m+` = vec4(
                  xTexelR`+g+"C"+m+".zw, xTexelR"+g+"C"+(m+2)+`.zw);
              `,m+1<p&&(v+=`
                  vec4 final = vec4(0.);
                  xCOffset = xC + 1 + `+l+`;
                  if(xCOffset >= 0 && xCOffset < `+o+`) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xR`+g+"C"+(m+1)+" = vec4(xTexelR"+g+"C"+(m+2)+`.xy, final.xy);
                `)):(v+=`
                if(xC >= 0 && xC < `+o+`) {
                  xTexelR`+g+"C"+m+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+g+"C"+m+` = vec4(0.);
                }

                xCOffset = xC + `+l+`;
                if(xCOffset >= 0 && xCOffset < `+o+`) {
                  xTexelR`+g+"C"+(m+2)+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+g+"C"+(m+2)+` = vec4(0.);
                }

                xR`+g+"C"+m+` = vec4(
                  xTexelR`+g+"C"+m+".xy, xTexelR"+g+"C"+(m+2)+`.xy);
              `,m+1<p&&(v+=`
                  xR`+g+"C"+(m+1)+` = vec4(
                    xTexelR`+g+"C"+m+".zw, xTexelR"+g+"C"+(m+2)+`.zw);
                `)),v+="}");m<p&&(v+=`
            vec4 wTexelR`+g+"C"+m+" = getW("+g+", "+m+`, d1, q);
            wR`+g+"C"+m+" = vec4(wTexelR"+g+"C"+m+".xz, wTexelR"+g+"C"+m+`.xz);
          `,m+1<p&&(v+=`
              vec4 wTexelR`+g+"C"+(m+1)+" = getW("+g+", "+(m+1)+`, d1, q);
              wR`+g+"C"+(m+1)+` =
                vec4(wTexelR`+g+"C"+(m+1)+".xz, wTexelR"+g+"C"+(m+1)+".xz);"))}for(g=0;g<f;g++)for(m=0;m<p;m++)v+="dotProd += xR"+g+"C"+m+" * wR"+g+"C"+m+";";var w="",x="";e&&(w=r?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+e+`
        }`:`vec4 activation(vec4 x) {
          `+e+`
        }`,x="result = activation(result);");var C=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+w+`

      const ivec2 strides = ivec2(`+u+", "+l+`);
      const ivec2 pads = ivec2(`+a+", "+s+`);

      void main() {

        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2;
        int q = 0;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        vec4 dotProd = vec4(0.);

        `+v+`

        vec4 result = dotProd;
        `+C+`
        `+x+`
        setOutput(result);
      }
    `}}(),cG=function(){return function(t,n,e,r,i){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var o=t[0],a=t[1],s=t[2],u=t[3],l=n[0],c=e[0],d=e[1];this.outputShape=[l,c,d,u];var f=r==="bilinear"?1:0,p=[a-1+".0",s-1+".0"],h=p[0],v=p[1],g=c>1?[""+(a-1)/(c-1),"(y2-y1) * height_ratio","y1*"+h+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+h],m=g[0],y=g[1],b=g[2],w=d>1?[""+(s-1)/(d-1),"(x2-x1) * width_ratio","x1*"+v+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+v],x=w[0],C=w[1],E=w[2];this.userCode=`
      const float height_ratio = float(`+m+`);
      const float width_ratio = float(`+x+`);
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= `+o+`) {
          return;
        }

        float height_scale = `+y+`;
        float width_scale = `+C+`;

        float in_y = `+b+`;
        if( in_y < 0.0 || in_y > `+h+` ) {
          setOutput(float(`+i+`));
          return;
        }
        float in_x = `+E+`;
        if( in_x < 0.0 || in_x > `+v+` ) {
          setOutput(float(`+i+`));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(`+f+` == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}(),dG=function(){return function(t,n,e){this.variableNames=["x"],this.outputShape=t;var r=t.length,i=t[t.length-1],o=e?"<":">";this.userCode=`
      int getIndex(int i) {
        `+(e?"return "+i+" -i - 1;":"return i;")+`
      }

      void main() {
        `+Bt(r)+` coords = getOutputCoords();
        int end = `+VN(r,"coords")+`;
        float val = 0.0;
        for (int i = `+i+` - 1; i >= 0; i -= 1) {
          int idx = getIndex(i);
          if (idx `+o+` end) {
            continue;
          }
          if (idx == end && `+n+`) {
            continue;
          }
          `+VN(r,"coords")+` = idx;
          val += getX(`+function(a,s){if(a===1)return""+s;if(a===2)return s+".x, "+s+".y";if(a===3)return s+".x, "+s+".y, "+s+".z";if(a===4)return s+".x, "+s+".y, "+s+".z, "+s+".w";throw Error("Cumulative sum for rank "+a+" is not yet supported")}(r,"coords")+`);
        }
        setOutput(val);
      }
    `}}();function VN(t,n){if(t===1)return""+n;if(t===2)return n+".y";if(t===3)return n+".z";if(t===4)return n+".w";throw Error("Cumulative sum for rank "+t+" is not yet supported")}var fG=function(){return function(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=Of.DENSE;var n=Yd(t),e=sr();this.outputShape=t,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+Gs(["r","c","d"],t)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+n[0]+", "+n[1]+`));
        int index = 4 * (resTexRC.x * `+n[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        `+e.output+` = result;
      }
    `}}(),pG=function(){return function(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=Of.DENSE;var n=Yd(t),e=sr();this.outputShape=t,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+Gs(["r","c","d"],t)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+n[0]+", "+n[1]+`));
        int index = 4 * (resTexRC.x * `+n[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        `+e.output+` = result;
      }
    `}}(),hG=function(){function t(n,e,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=n,this.blockSize=e,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = `+this.getHeightCoordString()+`;
      int w = `+this.getWidthCoordString()+`;
      int d = `+this.getDepthCoordString()+`;

      int in_h = h / `+e+`;
      int offset_h = imod(h, `+e+`);
      int in_w = w / `+e+`;
      int offset_w = imod(w, `+e+`);
      int offset_d = (offset_h * `+e+` + offset_w) *
        `+this.getOutputDepthSize()+`;
      int in_d = d + offset_d;

      float result = `+this.getInputSamplingString()+`;
      setOutput(result);
    }
  `}return t.prototype.getHeightCoordString=function(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"},t.prototype.getWidthCoordString=function(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"},t.prototype.getDepthCoordString=function(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"},t.prototype.getOutputDepthSize=function(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]},t.prototype.getInputSamplingString=function(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},t}(),mG=function(){return function(t){this.variableNames=["X"],this.outputShape=[t,t],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}(),vG=function(){return function(t){this.variableNames=["A"],this.outTexUsage=qr.DOWNLOAD;var n=sr();this.outputShape=t,this.userCode=`
      `+aP+`

      void main() {
        float x = getAAtOutCoords();
        `+n.output+` = encode_float(x);
      }
    `}}(),gG=function(){return function(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=qr.DOWNLOAD;var n=sr();this.outputShape=t,this.userCode=`
      `+aP+`

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        `+n.output+` = encode_float(x);
      }
    `}}(),yG=function(){return function(t,n,e){e===void 0&&(e=!1),this.variableNames=["A"];var r=sr(),i=n[0],o=n[1];this.outputShape=t;var a="result";e&&(a="floor(result * 255. + 0.5)"),this.userCode=`
      `+bE(t)+`

      void main() {
        ivec3 coords = getOutputCoords();

        int flatIndex = getFlatIndex(coords);
        int offset = imod(flatIndex, 4);

        flatIndex = idiv(flatIndex, 4, 1.);
        
        int r = flatIndex / `+o+`;
        int c = imod(flatIndex, `+o+`);
        vec2 uv = (vec2(c, r) + halfCR) / vec2(`+o+".0, "+i+`.0);
        vec4 values = `+r.texture2D+`(A, uv);

        float result;

        if(offset == 0) {
          result = values[0];
        } else if(offset == 1) {
          result = values[1];
        } else if(offset == 2) {
          result = values[2];
        } else {
          result = values[3];
        }

        `+r.output+" = vec4("+a+`, 0., 0., 0.);
      }
    `}}(),bG=function(){return function(t,n,e){e===void 0&&(e=!1),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var r=sr(),i=n[0],o=n[1];this.outputShape=t;var a="",s="result";e&&(s="floor(result * 255. + 0.5)");for(var u=0;u<=1;u++)for(var l=0;l<=1;l++){var c=2*u+l;a+=`
          localCoords = coords;
          if(localCoords[2] + `+l+" < "+t[2]+`) {
            localCoords[2] += `+l+`;
            if(localCoords[1] + `+u+" < "+t[1]+`) {
              localCoords[1] += `+u+`;

              flatIndex = getFlatIndex(localCoords);
              offset = imod(flatIndex, 4);

              flatIndex = idiv(flatIndex, 4, 1.);

              r = flatIndex / `+o+`;
              c = imod(flatIndex, `+o+`);
              uv = (vec2(c, r) + halfCR) / vec2(`+o+".0, "+i+`.0);
              values = `+r.texture2D+`(A, uv);

              if(offset == 0) {
                result[`+c+`] = values[0];
              } else if(offset == 1) {
                result[`+c+`] = values[1];
              } else if(offset == 2) {
                result[`+c+`] = values[2];
              } else {
                result[`+c+`] = values[3];
              }
            }
          }
        `}this.userCode=`
      `+bE(t)+`

      void main() {
        ivec3 coords = getOutputCoords();

        vec4 result = vec4(0.);
        int flatIndex, r, c, offset;
        ivec3 localCoords;
        vec2 uv;
        vec4 values;

        `+a+`

        `+r.output+" = "+s+`;
      }
    `}}(),wG="return real * expR - imag * expI;",xG="return real * expI + imag * expR;",$N=function(){return function(t,n,e){this.variableNames=["real","imag"];var r=n[1];this.outputShape=n;var i=e?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,o=e?r+".0":"1.0";this.userCode=`
      const float exponentMultiplier = `+i+`;

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        `+t+`
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(`+r+`);
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < `+r+`; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / `+o+`;
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}(),SG=function(){function t(n,e){this.outputShape=[],this.variableNames=["x"],this.outputShape=n,this.userCode=`
      uniform float value;
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}return t.prototype.getCustomSetupFunc=function(n){var e=this;return function(r,i){e.valueLoc==null&&(e.valueLoc=r.getUniformLocationNoThrow(i,"value")),r.gl.uniform1f(e.valueLoc,n)}},t}(),EG=function(){return function(t){this.variableNames=["A"];var n=sr(),e=t[0],r=t[1];this.outputShape=t,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+r+".0, "+e+`.0);

        vec4 values = `+n.texture2D+`(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}(),CG=function(){return function(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var n=sr(),e=t[0],r=t[1];this.outputShape=t,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(`+r+".0, "+e+`.0);
            vec4 values = `+n.texture2D+`(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        `+n.output+` = result;
      }
    `}}(),RG=function(){return function(t,n,e){this.variableNames=["A","indices"];var r=t.slice();r[e]=n,this.outputShape=r,this.rank=r.length;var i=Bt(this.rank),o=function(a,s){var u=a.length;if(u>4)throw Error("Gather for rank "+u+" is not yet supported");if(u===1)return"int(getIndices(resRC))";for(var l=["resRC.x","resRC.y","resRC.z","resRC.w"],c=[],d=0;d<a.length;d++)d===s?c.push("int(getIndices("+l[d]+"))"):c.push(""+l[d]);return c.join()}(t,e);this.userCode=`
      void main() {
        `+i+` resRC = getOutputCoords();
        setOutput(getA(`+o+`));
      }
    `}}(),TG=function(){return function(t,n,e){this.sliceDim=t,this.strides=n,this.variableNames=["x","indices"],this.outputShape=e;var r=Bt(n.length),i=Bt(e.length),o=this.sliceDim>1?"strides[j]":"strides";this.userCode=`
        `+r+" strides = "+r+"("+this.strides+`);
         void main() {
          `+i+` coords = getOutputCoords();
          int flattenIndex = 0;
          for (int j = 0; j < `+this.sliceDim+`; j++) {
            int index = round(getIndices(coords[0], j));
            flattenIndex += index * `+o+`;
          }
          setOutput(getX(flattenIndex, coords[1]));
        }
      `}}();function cP(t,n){var e=sr();return fM(t,n,e.version+`
    precision highp float;
    `+e.attribute+` vec3 clipSpacePos;
    `+e.attribute+` vec2 uv;
    `+e.varyingVs+` vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`)}function dP(t,n){return vM(t,n,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function fP(t,n){return gM(t,n,new Uint16Array([0,1,2,2,1,3]))}function ap(t,n,e,r,i,o,a){bM(e,r);var s=yM(t,n),u=t.TEXTURE_2D;return Ne(t,n,function(){return t.bindTexture(u,s)}),Ne(t,n,function(){return t.texParameteri(u,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)}),Ne(t,n,function(){return t.texParameteri(u,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)}),Ne(t,n,function(){return t.texParameteri(u,t.TEXTURE_MIN_FILTER,t.NEAREST)}),Ne(t,n,function(){return t.texParameteri(u,t.TEXTURE_MAG_FILTER,t.NEAREST)}),Ne(t,n,function(){return t.texImage2D(u,0,i,e,r,0,o,a,null)}),Ne(t,n,function(){return t.bindTexture(t.TEXTURE_2D,null)}),s}function pP(t,n,e,r,i){var o=vg(e,r);return ap(t,n,o[0],o[1],i.internalFormatFloat,i.textureFormatFloat,t.FLOAT)}function hP(t,n,e,r,i){var o=vg(e,r);return ap(t,n,o[0],o[1],i.internalFormatHalfFloat,i.textureFormatFloat,i.textureTypeHalfFloat)}function mP(t,n,e,r,i){var o=vg(e,r);return ap(t,n,o[0],o[1],t.RGBA,t.RGBA,t.UNSIGNED_BYTE)}function vP(t,n,e,r,i){var o=np(e,r);return ap(t,n,o[0],o[1],i.internalFormatPackedFloat,t.RGBA,t.FLOAT)}function gP(t,n,e,r,i){var o=np(e,r);return ap(t,n,o[0],o[1],i.internalFormatPackedHalfFloat,t.RGBA,i.textureTypeHalfFloat)}function yP(t,n,e,r){return Ne(t,n,function(){return t.bindBuffer(t.ARRAY_BUFFER,r)}),vw(t,n,e,"clipSpacePos",r,3,20,0)&&vw(t,n,e,"uv",r,2,20,12)}function bP(t,n,e,r,i,o,a){var s,u,l;Ne(t,n,function(){return t.bindTexture(t.TEXTURE_2D,e)}),o instanceof Uint8Array?(s=new Uint8Array(r*i*4),u=t.UNSIGNED_BYTE,l=t.RGBA):(s=new Float32Array(r*i*4),u=t.FLOAT,l=a.internalFormatPackedFloat),s.set(o),Ne(t,n,function(){return t.texImage2D(t.TEXTURE_2D,0,l,r,i,0,t.RGBA,u,s)}),Ne(t,n,function(){return t.bindTexture(t.TEXTURE_2D,null)})}function wP(t,n,e,r){Ne(t,n,function(){return t.bindTexture(t.TEXTURE_2D,e)}),r.data instanceof Uint8Array?Ne(t,n,function(){return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,r.width,r.height,0,t.RGBA,t.UNSIGNED_BYTE,r.data)}):Ne(t,n,function(){return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,r)}),Ne(t,n,function(){return t.bindTexture(t.TEXTURE_2D,null)})}function xP(t,n,e,r,i){var o=t.createBuffer();Ne(t,n,function(){return t.bindBuffer(t.PIXEL_PACK_BUFFER,o)});var a=16*e*r;return Ne(t,n,function(){return t.bufferData(t.PIXEL_PACK_BUFFER,a,t.STREAM_READ)}),Ne(t,n,function(){return t.readPixels(0,0,r,e,t.RGBA,t.FLOAT,0)}),Ne(t,n,function(){return t.bindBuffer(t.PIXEL_PACK_BUFFER,null)}),o}function SP(t,n,e){var r=t,i=new Float32Array(e);return r.bindBuffer(r.PIXEL_PACK_BUFFER,n),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,i),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),i}function EP(t,n,e,r,i){var o=vg(e,r),a=o[0],s=o[1],u=new Uint8Array(e*r*4);return Ne(t,n,function(){return t.readPixels(0,0,a,s,i.downloadTextureFormat,t.UNSIGNED_BYTE,u)}),new Float32Array(u.buffer)}function CP(t,n,e,r,i,o,a,s){var u=t,l=new Float32Array(function(c,d){var f=np(c,d);return f[0]*f[1]*4}(o,a));return u.bindBuffer(u.PIXEL_PACK_BUFFER,n),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,l),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),l}function RP(t,n,e,r){var i=new Float32Array(e*r*4);return Ne(t,n,function(){return t.readPixels(0,0,r,e,t.RGBA,t.FLOAT,i)}),i}var NG=Object.freeze({createVertexShader:cP,createVertexBuffer:dP,createIndexBuffer:fP,createFloat32MatrixTexture:pP,createFloat16MatrixTexture:hP,createUnsignedBytesMatrixTexture:mP,createPackedMatrixTexture:vP,createFloat16PackedMatrixTexture:gP,bindVertexProgramAttributeStreams:yP,uploadDenseMatrixToTexture:bP,uploadPixelDataToTexture:wP,createBufferFromOutputTexture:xP,downloadFloat32MatrixFromBuffer:SP,downloadByteEncodedFloatMatrixFromOutputTexture:EP,downloadPackedMatrixFromBuffer:CP,downloadMatrixFromPackedOutputTexture:RP}),TP=function(){function t(n){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var e=ie().getNumber("WEBGL_VERSION");if(n!=null?(this.gl=n,uM(e,n)):this.gl=Eo(e),ie().getNumber("WEBGL_VERSION")===1)this.textureFloatExtension=lm(this.gl,this.debug,"OES_texture_float"),this.colorBufferFloatExtension=this.gl.getExtension("WEBGL_color_buffer_float"),this.textureHalfFloatExtension=lm(this.gl,this.debug,"OES_texture_half_float"),this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float");else if(Mi(this.gl,"EXT_color_buffer_float"))this.colorBufferFloatExtension=this.gl.getExtension("EXT_color_buffer_float");else{if(!Mi(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=dP(this.gl,this.debug),this.indexBuffer=fP(this.gl,this.debug),this.framebuffer=wM(this.gl,this.debug),this.textureConfig=YS(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(t.prototype,"debug",{get:function(){return ie().getBool("DEBUG")},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){var n=this;if(!this.disposed){this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var e=this.gl;Ne(e,this.debug,function(){return e.finish()}),Ne(e,this.debug,function(){return e.bindFramebuffer(e.FRAMEBUFFER,null)}),Ne(e,this.debug,function(){return e.deleteFramebuffer(n.framebuffer)}),Ne(e,this.debug,function(){return e.bindBuffer(e.ARRAY_BUFFER,null)}),Ne(e,this.debug,function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)}),Ne(e,this.debug,function(){return e.deleteBuffer(n.indexBuffer)}),this.disposed=!0}},t.prototype.createFloat32MatrixTexture=function(n,e){return this.throwIfDisposed(),pP(this.gl,this.debug,n,e,this.textureConfig)},t.prototype.createFloat16MatrixTexture=function(n,e){return this.throwIfDisposed(),hP(this.gl,this.debug,n,e,this.textureConfig)},t.prototype.createUnsignedBytesMatrixTexture=function(n,e){return this.throwIfDisposed(),mP(this.gl,this.debug,n,e,this.textureConfig)},t.prototype.uploadPixelDataToTexture=function(n,e){this.throwIfDisposed(),wP(this.gl,this.debug,n,e)},t.prototype.uploadDenseMatrixToTexture=function(n,e,r,i){this.throwIfDisposed(),bP(this.gl,this.debug,n,e,r,i,this.textureConfig)},t.prototype.createFloat16PackedMatrixTexture=function(n,e){return this.throwIfDisposed(),gP(this.gl,this.debug,n,e,this.textureConfig)},t.prototype.createPackedMatrixTexture=function(n,e){return this.throwIfDisposed(),vP(this.gl,this.debug,n,e,this.textureConfig)},t.prototype.deleteMatrixTexture=function(n){var e=this;this.throwIfDisposed(),this.outputTexture===n&&(gw(this.gl,this.debug,this.framebuffer),this.outputTexture=null),Ne(this.gl,this.debug,function(){return e.gl.deleteTexture(n)})},t.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(n,e,r){var i=this;return this.downloadMatrixDriver(n,function(){return EP(i.gl,i.debug,e,r,i.textureConfig)})},t.prototype.downloadPackedMatrixFromBuffer=function(n,e,r,i,o,a){return CP(this.gl,n,0,0,0,o,a,this.textureConfig)},t.prototype.downloadFloat32MatrixFromBuffer=function(n,e){return SP(this.gl,n,e)},t.prototype.createBufferFromTexture=function(n,e,r){this.bindTextureToFrameBuffer(n);var i=xP(this.gl,this.debug,e,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),i},t.prototype.createAndWaitForFence=function(){var n=this.createFence(this.gl);return this.pollFence(n)},t.prototype.createFence=function(n){var e,r,i=this;if(ie().getBool("WEBGL_FENCE_API_ENABLED")){var o=n,a=o.fenceSync(o.SYNC_GPU_COMMANDS_COMPLETE,0);n.flush(),r=function(){var s=o.clientWaitSync(a,0,0);return s===o.ALREADY_SIGNALED||s===o.CONDITION_SATISFIED},e=a}else ie().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(e=this.beginQuery(),this.endQuery(),r=function(){return i.isQueryAvailable(e,ie().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):r=function(){return!0};return{query:e,isFencePassed:r}},t.prototype.downloadMatrixFromPackedTexture=function(n,e,r){var i=this;return this.downloadMatrixDriver(n,function(){return RP(i.gl,i.debug,e,r)})},t.prototype.createProgram=function(n){this.throwIfDisposed();var e=this.gl,r=pM(e,this.debug,n),i=cP(e,this.debug),o=hM(e,this.debug);return Ne(e,this.debug,function(){return e.attachShader(o,i)}),Ne(e,this.debug,function(){return e.attachShader(o,r)}),mM(e,this.debug,o),this.debug&&fm(e,this.debug,o),this.vertexAttrsAreBound||(this.setProgram(o),this.vertexAttrsAreBound=yP(e,this.debug,this.program,this.vertexBuffer)),o},t.prototype.deleteProgram=function(n){var e=this;this.throwIfDisposed(),n===this.program&&(this.program=null),n!=null&&Ne(this.gl,this.debug,function(){return e.gl.deleteProgram(n)})},t.prototype.setProgram=function(n){var e=this;this.throwIfDisposed(),this.program=n,this.program!=null&&this.debug&&fm(this.gl,this.debug,this.program),Ne(this.gl,this.debug,function(){return e.gl.useProgram(n)})},t.prototype.getUniformLocation=function(n,e,r){return r===void 0&&(r=!0),this.throwIfDisposed(),r?SM(this.gl,this.debug,n,e):EM(this.gl,n,e)},t.prototype.getAttributeLocation=function(n,e){var r=this;return this.throwIfDisposed(),Ne(this.gl,this.debug,function(){return r.gl.getAttribLocation(n,e)})},t.prototype.getUniformLocationNoThrow=function(n,e){return this.throwIfDisposed(),this.gl.getUniformLocation(n,e)},t.prototype.setInputMatrixTexture=function(n,e,r){this.throwIfDisposed(),this.throwIfNoProgram(),CM(this.gl,this.debug,this.program,n,e,r)},t.prototype.setOutputMatrixTexture=function(n,e,r){this.setOutputMatrixTextureDriver(n,r,e)},t.prototype.setOutputPackedMatrixTexture=function(n,e,r){this.throwIfDisposed();var i=np(e,r),o=i[0],a=i[1];this.setOutputMatrixTextureDriver(n,o,a)},t.prototype.setOutputMatrixWriteRegion=function(n,e,r,i){this.setOutputMatrixWriteRegionDriver(r,n,i,e)},t.prototype.setOutputPackedMatrixWriteRegion=function(n,e,r,i){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},t.prototype.debugValidate=function(){this.program!=null&&fm(this.gl,this.debug,this.program),Dd(this.gl)},t.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var n=this.gl;this.debug&&this.debugValidate(),Ne(n,this.debug,function(){return n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0)})},t.prototype.blockUntilAllProgramsCompleted=function(){var n=this;this.throwIfDisposed(),Ne(this.gl,this.debug,function(){return n.gl.finish()})},t.prototype.getQueryTimerExtension=function(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=lm(this.gl,this.debug,ie().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},t.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},t.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},t.prototype.beginQuery=function(){if(ie().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){var n=this.gl,e=this.getQueryTimerExtensionWebGL2(),r=n.createQuery();return n.beginQuery(e.TIME_ELAPSED_EXT,r),r}var i=this.getQueryTimerExtensionWebGL1(),o=i.createQueryEXT();return i.beginQueryEXT(i.TIME_ELAPSED_EXT,o),o},t.prototype.endQuery=function(){if(ie().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")!==2){var n=this.getQueryTimerExtensionWebGL1();n.endQueryEXT(n.TIME_ELAPSED_EXT)}else{var e=this.gl,r=this.getQueryTimerExtensionWebGL2();e.endQuery(r.TIME_ELAPSED_EXT)}},t.prototype.waitForQueryAndGetTime=function(n){return Ae(this,void 0,void 0,function(){var e=this;return Oe(this,function(r){switch(r.label){case 0:return[4,lw(function(){return e.disposed||e.isQueryAvailable(n,ie().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))})];case 1:return r.sent(),[2,this.getQueryTime(n,ie().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}})})},t.prototype.getQueryTime=function(n,e){if(e===0)return null;if(e===2){var r=this.gl;return r.getQueryParameter(n,r.QUERY_RESULT)/1e6}var i=this.getQueryTimerExtensionWebGL1();return i.getQueryObjectEXT(n,i.QUERY_RESULT_EXT)/1e6},t.prototype.isQueryAvailable=function(n,e){if(e===0)return!0;if(e===2){var r=this.gl,i=this.getQueryTimerExtensionWebGL2(),o=r.getQueryParameter(n,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),o&&!this.disjoint}return o=(i=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(n,i.QUERY_RESULT_AVAILABLE_EXT),this.disjoint==null&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),o&&!this.disjoint},t.prototype.pollFence=function(n){var e=this;return new Promise(function(r){e.addItemToPoll(function(){return n.isFencePassed()},function(){return r()})})},t.prototype.pollItems=function(){for(var n=function(r){for(var i=0;i<r.length;++i){var o=r[i]();if(!o)break}return i-1}(this.itemsToPoll.map(function(r){return r.isDoneFn})),e=0;e<=n;++e)(0,this.itemsToPoll[e].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(n+1)},t.prototype.addItemToPoll=function(n,e){var r=this;this.itemsToPoll.push({isDoneFn:n,resolveFn:e}),this.itemsToPoll.length>1||lw(function(){return r.pollItems(),r.itemsToPoll.length===0})},t.prototype.bindTextureToFrameBuffer=function(n){this.throwIfDisposed(),pm(this.gl,this.debug,n,this.framebuffer),this.debug&&Dd(this.gl)},t.prototype.unbindTextureToFrameBuffer=function(){this.outputTexture!=null?(pm(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&Dd(this.gl)):gw(this.gl,this.debug,this.framebuffer)},t.prototype.downloadMatrixDriver=function(n,e){this.bindTextureToFrameBuffer(n);var r=e();return this.unbindTextureToFrameBuffer(),r},t.prototype.setOutputMatrixTextureDriver=function(n,e,r){this.throwIfDisposed();var i=this.gl;pm(i,this.debug,n,this.framebuffer),this.debug&&Dd(i),this.outputTexture=n,Ne(i,this.debug,function(){return i.viewport(0,0,e,r)}),Ne(i,this.debug,function(){return i.scissor(0,0,e,r)})},t.prototype.setOutputMatrixWriteRegionDriver=function(n,e,r,i){var o=this;this.throwIfDisposed(),Ne(this.gl,this.debug,function(){return o.gl.scissor(n,e,r,i)})},t.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},t.prototype.throwIfNoProgram=function(){if(this.program==null)throw new Error("No GPU program is currently set.")},t}();function UN(t,n){if(t.length!==n.length)throw Error("Binary was compiled with "+t.length+" inputs, but was executed with "+n.length+" inputs");t.forEach(function(e,r){var i=e.logicalShape,o=n[r],a=o.shape;if(!Bn(i,a))throw Error("Binary was compiled with different shapes than the current args. Shapes "+i+" and "+a+" must match");if(!e.isUniform||!o.isUniform){var s=e.texShape,u=o.isUniform?null:o.texData.texShape;if(!Bn(s,u))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+s+" and "+u+" must match")}})}var kG=function(){return function(t,n,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;for(var r=e.filterWidth,i=e.inChannels,o=e.strideWidth,a=e.strideHeight,s=e.padInfo,u=e.outWidth,l=e.dilationWidth,c=e.dilationHeight,d=e.dataFormat,f=s.left,p=s.top,h=i*r,v=sr(),g=d==="channelsLast",m=g?0:1,y=g?1:2,b="",w=0;w<=1;w++)for(var x=0;x<=1;x++)b+=`
          blockIndex = rc.y + `+x+`;
          pos = rc.x + `+w+`;

          if(blockIndex < `+t[1]+" && pos < "+t[0]+`) {
            offsetY = int(blockIndex / (`+u+")) * "+a+" - "+p+`;
            d0 = offsetY + `+c+" * (pos / "+h+`);

            if(d0 < `+n[m]+` && d0 >= 0) {

              offsetX = int(mod(float(blockIndex), `+u+".) * "+o+". - "+f+`.);
              d1 = offsetX + `+l+" * (int(mod(float(pos), "+h+".) / "+i+`.));

              if(d1 < `+n[y]+` && d1 >= 0) {

                ch = int(mod(float(pos), `+i+`.));

                if (`+g+`) {
                  innerDims = vec2(d1, ch);
                  result[`+(2*w+x)+`] = getChannel(
                    getA(d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[`+(2*w+x)+`] = getChannel(
                    getA(ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec2 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        `+b+`

        `+v.output+` = result;
      }
    `}}(),IG=function(){return function(t,n,e,r,i){this.variableNames=["x"],this.outputShape=[];var o,a=n,s=t[3]-1;this.outputShape=t;var u="float("+e+") + float("+r+") * sum";o=i===.5?"inversesqrt("+u+")":i===1?"1.0/("+u+")":"exp(log("+u+") * float(-"+i+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -`+a+"; j <= "+a+`; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  `+s+`) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * `+o+`;
        setOutput(val);
      }
    `}}(),_G=function(){return function(t,n,e,r,i){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=n,this.bias=e,this.alpha=r,this.beta=i,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < `+this.depth+`; ++d) {
          int depthBegin = int(max(0.0, float(d - `+n+`)));
          int depthEnd = int(min(float(`+this.depth+`),
              float(d + `+n+` + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = `+this.depth+`;

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(`+r+") * norm + float("+e+`);

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(`+r+`)
                * float(`+i+`)
                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * `+i+`);
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}(),AG=function(){return function(t,n,e,r,i){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var o,a=n,s=t[3]-1;this.outputShape=t;var u="float("+e+") + float("+r+") * sum";o=i===.5?"inversesqrt("+u+")":i===1?"1.0/("+u+")":"exp(log("+u+") * float(-"+i+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < `+this.outputShape[3]+`;
        bool hasNextRow = c < `+this.outputShape[2]+`;

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - `+a+`;
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - `+a+"; j <= "+a+`; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(`+s+`));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * `+o+`;
        setOutput(result);
      }
    `}}(),OG=function(){return function(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var n=t.strideHeight,e=t.strideWidth,r=t.dilationHeight,i=t.effectiveFilterHeight,o=t.effectiveFilterWidth,a=i-1-t.padInfo.top,s=o-1-t.padInfo.left,u=i*o-1;this.userCode=`
      const ivec2 pads = ivec2(`+a+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+i+`;
          wR += `+r+`) {
          float dyR = float(dyRCorner + wR) / `+n+`.0;

          if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+o+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+e+`.0;

            if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = `+u+` - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * `+o+` + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}(),DG=function(){return function(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var n=t.strideDepth,e=t.strideHeight,r=t.strideWidth,i=t.dilationDepth,o=t.dilationHeight,a=t.dilationWidth,s=t.effectiveFilterDepth,u=t.effectiveFilterHeight,l=t.effectiveFilterWidth,c=s-1-t.padInfo.front,d=u-1-t.padInfo.top,f=l-1-t.padInfo.left,p=s*u*l-1;this.userCode=`
      const ivec3 pads = ivec3(`+c+", "+d+", "+f+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+s+`;
           wD += `+i+`) {
          float dyD = float(dyDCorner + wD) / `+n+`.0;

          if (dyD < 0.0 || dyD >= `+t.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+u+`;
              wR += `+o+`) {
            float dyR = float(dyRCorner + wR) / `+e+`.0;

            if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+l+`;
                wC += `+a+`) {
              float dyC = float(dyCCorner + wC) / `+r+`.0;

              if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = `+p+` -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * `+u+" * "+l+` +
                  wR * `+l+` + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}(),Z0=function(){return function(t,n,e,r,i,o,a){e===void 0&&(e=!1),r===void 0&&(r=!1),i===void 0&&(i=!1),o===void 0&&(o=null),a===void 0&&(a=!1),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n;var s=e?t[1]:t[2],u=Math.ceil(s/2),l=e?"i * 2, rc.y":"rc.y, i * 2",c=r?"rc.z, i * 2":"i * 2, rc.z",d=e?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],f=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],p="",h="";o&&(p=a?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+o+`
        }`:`vec4 activation(vec4 x) {
          `+o+`
        }`,h="result = activation(result);");var v=i?"result += getBiasAtOutCoords();":"";i&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+p+`

      const float sharedDimension = `+u+`.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        for (int i = 0; i < `+u+`; i++) {
          vec4 a = getMatrixA(rc.x, `+l+`);
          vec4 b = getMatrixB(rc.x, `+c+`);

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (`+d[0]+" * "+f[0]+`);
          result += (`+d[1]+" * "+f[1]+`);
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        `+v+`

        `+h+`

        setOutput(result);
      }
    `}}(),MG=function(){function t(n,e,r){this.variableNames=["probs"],this.outputShape=[n,r],this.userCode=`
      uniform float seed;

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < `+(e-1)+`; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(`+(e-1)+`));
      }
    `}return t.prototype.getCustomSetupFunc=function(n){var e=this;return function(r,i){e.seedLoc==null&&(e.seedLoc=r.getUniformLocation(i,"seed")),r.gl.uniform1f(e.seedLoc,n)}},t}(),PG=function(){return function(t,n,e,r){this.variableNames=["indices"],this.outputShape=[t,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(`+r+"), float("+e+`),
                      float(index == coords.y)));
      }
    `}}(),LG=function(){return function(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=t;var n=t.length;if(n===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{var e=_r("rc",n),r=Bt(n),i=function(s,u,l){if(s===1)return"rc > "+u[0];for(var c="",d=s-2;d<s;d++)c+=l[d]+" >= "+u[d],d<s-1&&(c+="||");return c}(n,t,e),o=function(s,u,l,c){if(s===1)return"";var d=c.slice(-2);return`
    int r = `+d[0]+`;
    int c = `+d[1]+`;
    int rp1 = r + 1;
    int cp1 = c + 1;

    bool cEdge = cp1 >= `+u+`;
    bool rEdge = rp1 >= `+l+`;
  `}(n,t[t.length-1],t[t.length-2],e),a=function(s,u){var l=s.length,c=function(d,f){for(var p=[],h=0;h<=1;h++)for(var v=0;v<=1;v++){for(var g=(h===0?"r":"rp1")+", "+(v===0?"c":"cp1"),m=2;m<d;m++)g=f[f.length-1-m]+","+g;p.push(g)}return p}(l,u);return l===1?`getA(rc),
            rc + 1 >= `+s[0]+` ? 0. : getA(rc + 1),
            0, 0`:"getA("+c[0]+`),
          cEdge ? 0. : getA(`+c[1]+`),
          rEdge ? 0. : getA(`+c[2]+`),
          rEdge || cEdge ? 0. : getA(`+c[3]+")"}(t,e);this.userCode=`
        void main() {
          `+r+` rc = getOutputCoords();

          if(`+i+`) {
            setOutput(vec4(0));
          } else {
            `+o+`

            setOutput(vec4(`+a+`));
          }
        }
      `}}}(),FG=function(){return function(t,n,e){this.variableNames=["x"],this.outputShape=n.map(function(u,l){return u[0]+t[l]+u[1]});var r=t.length,i=Bt(r),o=n.map(function(u){return u[0]}).join(","),a=n.map(function(u,l){return u[0]+t[l]}).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=r!==1?`
      `+i+" start = "+i+"("+o+`);
      `+i+" end = "+i+"("+a+`);

      void main() {
        `+i+` outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(float(`+e+`));
        } else {
          `+i+` coords = outC - start;
          setOutput(getX(`+s+`));
        }
      }
    `:`
        int start = `+o+`;
        int end = `+a+`;

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(float(`+e+`));
          } else {
            setOutput(getX(outC - start));
          }
        }
      `}}(),zG=function(){return function(t,n,e){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map(function(g,m){return g[0]+t[m]+g[1]});for(var r=t.length,i=Bt(r),o=n.map(function(g){return g[0]}).join(","),a=n.map(function(g,m){return g[0]+t[m]}).join(","),s=_r("rc",r),u=_r("source",r),l=s[r-1]+" < "+this.outputShape[r-1],c=r===1?"source":"vec2("+u.slice(-2).join()+")",d=[i+" rc = outputLoc;",s[r-1]+` += 1;
       if(`+l+`) {
      `,r===1?"":`}
       rc = outputLoc;
       `+s[r-2]+` += 1;
       if(`+s[r-2]+" < "+this.outputShape[r-2]+") {",r===1?"":"  "+s[r-1]+` += 1;
         if(`+l+") {"],f=r===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",p="",h=0,v=r===1?2:4;h<v;h++)p+=`
        `+d[h]+`
        if (`+f+`) {
          result[`+h+"] = float("+e+`);
        } else {
          `+i+` source = rc - start;
          result[`+h+"] = getChannel(getX("+u.join()+"), "+c+`);
        }
      `;p+=r===1?"} ":"}}",this.userCode=`
      const `+i+" start = "+i+"("+o+`);
      const `+i+" end = "+i+"("+a+`);

      void main() {
        `+i+` outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        `+p+`
        setOutput(result);
      }
    `}}(),e1=function(){return function(t,n,e){if(this.variableNames=["x"],n==="avg"&&e)throw new Error("Cannot compute positions for average pool.");var r=t.filterWidth,i=t.strideHeight,o=t.strideWidth,a=t.dilationHeight,s=t.dilationWidth,u=t.effectiveFilterHeight,l=t.effectiveFilterWidth,c=t.padInfo.top,d=t.padInfo.left;this.outputShape=t.outShape;var f=n==="avg",p="0.0";if(f||(p="-1.0 / 1e-20"),e)this.userCode=`
        const ivec2 strides = ivec2(`+i+", "+o+`);
        const ivec2 pads = ivec2(`+c+", "+d+`);

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < `+u+`;
              wR += `+a+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+l+`;
                wC += `+s+`) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= `+t.inWidth+`) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value >= currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = wR * `+l+` + wC;
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var h=n+"("+n+"("+n+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";n==="avg"&&(h="avgValue / count");var v=4*Math.floor(r/4),g=r%4,m=`
      if (`+f+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(`+i+", "+o+`);
      const ivec2 pads = ivec2(`+c+", "+d+`);
      const float initializationValue = `+p+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= `+t.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+p+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < `+u+`;
            wR += `+a+`) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= `+t.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+v+`; wC += 4) {
            int xC = xCCorner + wC * `+s+`;

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+s+`, d),
              getValue(batch, xR, xC + 2 * `+s+`, d),
              getValue(batch, xR, xC + 3 * `+s+`, d)
            );

            `+m+`
          }

          int xC = xCCorner + `+v+`;
          if (`+(g===1)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            `+m+`
          } else if (`+(g===2)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+s+`, d),
              initializationValue,
              initializationValue
            );

            `+m+`
          } else if (`+(g===3)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+s+`, d),
              getValue(batch, xR, xC + 2 * `+s+`, d),
              initializationValue
            );

            `+m+`
          }
        }
        setOutput(`+h+`);
      }
    `}}}(),t1=function(){return function(t,n,e){if(this.variableNames=["x"],n==="avg"&&e)throw new Error("Cannot compute positions for average pool.");var r=t.filterWidth,i=t.strideDepth,o=t.strideHeight,a=t.strideWidth,s=t.dilationDepth,u=t.dilationHeight,l=t.dilationWidth,c=t.effectiveFilterDepth,d=t.effectiveFilterHeight,f=t.effectiveFilterWidth,p=t.padInfo.front,h=t.padInfo.top,v=t.padInfo.left;this.outputShape=t.outShape;var g=n==="avg",m="0.0";if(g||(m="-1.0 / 1e-20"),e)this.userCode=`
        const ivec3 strides =
            ivec3(`+i+", "+o+", "+a+`);
        const ivec3 pads = ivec3(`+p+", "+h+", "+v+`);

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < `+c+`;
              wD += `+s+`) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= `+t.inDepth+`) {
              continue;
            }

            for (int wR = 0; wR < `+d+`;
                wR += `+u+`) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= `+t.inHeight+`) {
                continue;
              }

              for (int wC = 0; wC < `+f+`;
                  wC += `+l+`) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= `+t.inWidth+`) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value >= currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition =
                      wD * `+d+" * "+f+` +
                      wR * `+f+` + wC;;
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var y=n+"("+n+"("+n+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";n==="avg"&&(y="avgValue / count");var b=4*Math.floor(r/4),w=r%4,x=`
      if (`+g+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(`+i+", "+o+", "+a+`);
      const ivec3 pads = ivec3(`+p+", "+h+", "+v+`);
      const float initializationValue = `+m+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= `+t.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+m+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < `+c+`;
            wD += `+s+`) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= `+t.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+d+`;
            wR += `+u+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+b+`; wC += 4) {
              int xC = xCCorner + wC * `+l+`;

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+l+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+l+`, ch),
                getValue(batch, xD, xR, xC + 3 * `+l+`, ch)
              );

              `+x+`
            }

            int xC = xCCorner + `+b+`;
            if (`+(w===1)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              `+x+`
            } else if (`+(w===2)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+l+`, ch),
                initializationValue,
                initializationValue
              );

              `+x+`
            } else if (`+(w===3)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+l+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+l+`, ch),
                initializationValue
              );

              `+x+`
            }
          }
          setOutput(`+y+`);
        }
      }
    `}}}(),BG=function(){return function(t,n){this.variableNames=["x"];var e=t.windowSize,r=t.batchSize,i=t.inSize,o=Math.ceil(i/e);this.outputShape=[r,o];var a="0.0",s="";n==="prod"?a="1.0":n==="min"?(a="1.0 / 1e-20",s="min"):n==="max"&&(a="-1.0 / 1e-20",s="max");var u=n+"("+n+"("+n+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";n==="sum"?u="sumValue":n==="prod"?u="prodValue":n==="all"?u="allValue":n==="any"&&(u="anyValue");var l=4*Math.floor(e/4),c=e%4,d=`
      if (`+(n==="sum")+`) {
        sumValue += dot(values, ones);
      } else if (`+(n==="prod")+`) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = `+s+`(values, minMaxValue);
      }
    `,f="vec4";n==="all"?(a="1.0",d=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,f="bvec4"):n==="any"&&(a="0.0",d=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,f="bvec4");var p="";i%e>0&&(p=`
        if (inIdx < 0 || inIdx >= `+i+`) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = `+a+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        `+p+`
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+e+`;

        vec4 minMaxValue = vec4(`+a+`);
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < `+l+`; i += 4) {
          int inIdx = inOffset + i;
          `+f+" values = "+f+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          `+d+`
        }

        int inIdx = inOffset + `+l+`;
        if (`+(c===1)+`) {
          `+f+" values = "+f+`(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          `+d+`
        } else if (`+(c===2)+`) {
          `+f+" values = "+f+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          `+d+`
        } else if (`+(c===3)+`) {
          `+f+" values = "+f+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          `+d+`
        }
        setOutput(`+u+`);
      }
    `}}(),jG=function(){return function(t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;for(var e="",r=0;r<4;r++){var i="thisRC = rc;";r%2==1&&(i+="thisRC.z += 1;"),r>1&&(i+="thisRC.y += 1;"),e+=`
        `+i+`
        `+(r>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+`
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[`+r+`] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        `+(r>0?"}":"")+`
      `}this.userCode=`
      
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      `+Gs(["r","c","d"],n)+`
      return ivec3(r, c, d);
    }
  
      `+bE(t)+`

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = `+t[1]+`;
        int cols = `+t[2]+`;

        `+e+`

        setOutput(result);
      }
    `}}(),VG=function(){return function(t,n,e){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n.shape;var r=n.shape,i=r[1],o=r[2],a=t.shape,s=a[1],u=a[2],l=[e&&s>1?i-1:i,e&&u>1?o-1:o],c=[e&&s>1?s-1:s,e&&u>1?u-1:u],d=l[0]/c[0],f=l[1]/c[1],p=1/d,h=1/f,v=2*Math.ceil(p)+2,g=2*Math.ceil(h)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+d+`);
        const float widthScale = float(`+f+`);

        const float invHeightScale = float(`+p+`);
        const float invWidthScale = float(`+h+`);

        const int winHeight = int(`+v+`);
        const int winWidth = int(`+g+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+s+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+u+`) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), `+(i-1)+`.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), `+(o-1)+`.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}(),$G=function(){return function(t,n,e,r){this.variableNames=["A"],this.outputShape=[];var i=t[0],o=t[1],a=t[2],s=t[3];this.outputShape=[i,n,e,s];var u=[r&&n>1?o-1:o,r&&e>1?a-1:a],l=[r&&n>1?n-1:n,r&&e>1?e-1:e];this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+u[0]/l[0]+`,
          `+u[1]/l[1]+`);
      const vec2 inputShapeRC = vec2(`+o+".0, "+a+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}(),UG=function(){return function(t,n,e,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var i=t[0],o=t[1],a=t[2],s=t[3];this.outputShape=[i,n,e,s];var u=[r&&n>1?o-1:o,r&&e>1?a-1:a],l=[r&&n>1?n-1:n,r&&e>1?e-1:e];this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          `+u[0]/l[0]+`,
          `+u[1]/l[1]+`,
          `+u[1]/l[1]+`);
      const vec3 inputShapeRC = vec3(`+o+".0, "+a+`.0,
                                     `+a+`.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < `+(s-1)+`;
        bool hasNextRow = coords.z < `+(e-1)+`;

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}(),WG=function(){return function(t,n,e){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n.shape;var r=n.shape,i=r[1],o=r[2],a=t.shape,s=a[1],u=a[2],l=[e&&s>1?i-1:i,e&&u>1?o-1:o],c=[e&&s>1?s-1:s,e&&u>1?u-1:u],d=l[0]/c[0],f=l[1]/c[1],p=1/d,h=1/f,v=2*Math.ceil(p)+2,g=2*Math.ceil(h)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+d+`);
        const float widthScale = float(`+f+`);

        const float invHeightScale = float(`+p+`);
        const float invWidthScale = float(`+h+`);

        const int winHeight = int(`+v+`);
        const int winWidth = int(`+g+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+s+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+u+`) {
              continue;
            }

            float sourceFracRow =
              float(`+l[0]+`) *
                (float(dyR) / float(`+c[0]+`));

            float sourceFracCol =
                float(`+l[1]+`) *
                  (float(dyC) / float(`+c[1]+`));

            int sourceNearestRow = int(min(
                float(int(`+i+`) - 1),
                `+e+` ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(`+o+`) - 1),
                `+e+` ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}(),HG=function(){return function(t,n,e,r){this.variableNames=["A"],this.outputShape=[];var i=t[0],o=t[1],a=t[2],s=t[3];this.outputShape=[i,n,e,s];var u=[r&&n>1?o-1:o,r&&e>1?a-1:a],l=[r&&n>1?n-1:n,r&&e>1?e-1:e],c=r?"0.5":"0.0";this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+u[0]/l[0]+`,
          `+u[1]/l[1]+`);
      const vec2 inputShapeRC = vec2(`+o+".0, "+a+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + `+c+`)));

        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}(),GG=function(){return function(t,n){this.variableNames=["x"];var e=t.length;if(e>4)throw new Error("WebGL backend: Reverse of rank-"+e+" tensor is not yet supported");if(this.outputShape=t,e!==1){var r=t.map(function(o,a){return function(s){return n.indexOf(s)!==-1&&t[s]!==1?t[s]+" - coords["+s+"] - 1":"coords["+s+"]"}(a)}).join(","),i=Bt(e);this.userCode=`
      void main() {
        `+i+` coords = getOutputCoords();
        setOutput(getX(`+r+`));
      }
    `}else this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(`+t[0]+` - coord - 1));
        }
      `}}(),qG=function(){return function(t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var e=t.length;if(e>4)throw new Error("WebGL backend: Reverse of rank-"+e+" tensor is not yet supported");this.outputShape=t;var r=_r("rc",e),i=r[e-1]+" + 1 < "+this.outputShape[e-1],o=r[e-2]+" + 1 < "+this.outputShape[e-2],a=Bt(e);function s(u){var l=t.map(function(c,d){return function(f,p){return n.indexOf(f)!==-1&&t[f]!==1?t[f]+" - "+p[f]+" - 1":""+p[f]}(d,u)});return"getChannel(getX("+l.join(",")+"), vec2("+l.slice(-2).join(",")+"))"}this.userCode=e===1?`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(`+t[0]+` - rc - 1),
            `+t[0]+` - rc - 1);
          if(`+i+`){
              result.g = getChannel(getX(`+t[0]+` - (rc  + 1) - 1),
                `+t[0]+` - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:`
        void main() {
          `+a+` rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = `+function(u){return s(u)}(r.slice())+`;
          if(`+i+`){
            result.g = `+function(u){return u[e-1]="("+u[e-1]+" + 1)",s(u)}(r.slice())+`;
          }
          if(`+o+`) {
            result.b = `+function(u){return u[e-2]="("+u[e-2]+" + 1)",s(u)}(r.slice())+`;
            if(`+i+`) {
              result.a = `+function(u){return u[e-1]="("+u[e-1]+" + 1)",u[e-2]="("+u[e-2]+" + 1)",s(u)}(r.slice())+`;
            }
          }
          setOutput(result);
        }
    `}}(),WN=function(){return function(t,n,e,r,i,o,a){this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;var s=Bt(i.length),u=Bt(o.length),l="";e===1?l="i":e===2&&(l="i, j");var c="getIndices("+l+")",d="";r===1?d="i":r===2&&(d="i, coords[1]");var f="getUpdates("+d+")",p=n>1?"strides[j]":"strides";this.userCode=`
        `+s+" strides = "+s+"("+i+`);

        void main() {
          `+u+` coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < `+t+`; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < `+n+`; j++) {
              int index = round(`+c+`);
              flattenedIndex += index * `+p+`;
            }
            if (flattenedIndex == coords[0]) {
              sum += `+f+`;
              found = true;
            }
          }
          setOutput(mix(getDefaultValue(), sum, float(found)));
        }
      `}}(),KG=function(){return function(t,n){this.variableNames=["x","segmentIds"];var e=t.windowSize,r=t.batchSize,i=t.inSize,o=t.numSegments,a=o*Math.ceil(i/e);this.outputShape=[r,a];var s=4*Math.floor(e/4),u=e%4,l=`
        sumValue += dot(values, segFilter);
    `,c="";i%e>0&&(c=`
        if (inIdx < 0 || inIdx >= `+i+`) {
          return initializationValue;
        }
      `);var d="";i%e>0&&(d=`
        if (inIdx < 0 || inIdx >= `+i+`) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = 0.0;

      float getValue(int batch, int inIdx) {
        `+c+`
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        `+d+`
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          `+o+")) * float("+e+`));
        int currentSeg = int(mod(float(outIdx), float(`+o+`)));

        float sumValue = 0.0;

        for (int i = 0; i < `+s+`; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          `+l+`
        }

        int inIdx = inOffset + `+s+`;
        if (`+(u===1)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          `+l+`
        } else if (`+(u===2)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          `+l+`
        } else if (`+(u===3)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          `+l+`
        }
        setOutput(sumValue);
      }
    `}}(),XG=function(){return function(t,n,e){var r,i;if(this.variableNames=["c","a","b"],this.outputShape=n,e>4)throw Error("Where for rank "+e+" is not yet supported");if(e===1)i="resRC",r="resRC";else{for(var o=["resRC.x","resRC.y","resRC.z","resRC.w"],a=[],s=[],u=0;u<n.length;u++)s.push(""+o[u]),u<t&&a.push(""+o[u]);r=a.join(),i=s.join()}var l=Bt(e);this.userCode=`
      void main() {
        `+l+` resRC = getOutputCoords();
        float cVal = getC(`+r+`);
        if (cVal >= 1.0) {
          setOutput(getA(`+i+`));
        } else {
          setOutput(getB(`+i+`));
        }
      }
    `}}(),YG=function(){function t(n){this.variableNames=["source"],this.outputShape=n,this.rank=n.length;var e,r=Bt(this.rank),i="uniform int start["+this.rank+"];",o=function(a){if(a===1)return"sourceLoc";if(a<=6)return n1.slice(0,a).map(function(s){return"sourceLoc."+s}).join(",");throw Error("Slicing for rank "+a+" is not yet supported")}(this.rank);e=`
        `+r+` sourceLoc;
        `+r+` coords = getOutputCoords();
        `+n.map(function(a,s){return"sourceLoc."+n1[s]+" = start["+s+"] + coords."+n1[s]+";"}).join(`
`)+`
      `,this.userCode=`
      `+i+`
      void main() {
        `+e+`
        setOutput(getSource(`+o+`));
      }
    `}return t.prototype.getCustomSetupFunc=function(n){var e=this;if(n.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+n.length+")");return function(r,i){e.startLoc==null&&(e.startLoc=r.getUniformLocationNoThrow(i,"start"),e.startLoc==null)||r.gl.uniform1iv(e.startLoc,n)}},t}(),n1=["x","y","z","w","u","v"],JG=function(){function t(n){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.rank=n.length;var e=Bt(this.rank),r=_r("coords",this.rank),i=_r("sourceLoc",this.rank),o=this.rank===1?"sourceLoc":"vec2("+i.slice(-2).join()+")",a="getChannel(getSource("+i.join()+"), "+o+")",s=`
      result.x = `+a+`;
      if (++`+r[this.rank-1]+" < "+n[this.rank-1]+`) {
        ++`+i[this.rank-1]+`;
        result.y = `+a+`;
        --`+i[this.rank-1]+`;
      }
    `,u=this.rank===1?"":`
      --`+r[this.rank-1]+`;
      if (++`+r[this.rank-2]+" < "+n[this.rank-2]+`) {
        ++`+i[this.rank-2]+`;
        result.z = `+a+`;
        if (++`+r[this.rank-1]+" < "+n[this.rank-1]+`) {
          ++`+i[this.rank-1]+`;
          result.w = `+a+`;
        }
      }
    `,l=this.rank<=4?`sourceLoc = coords +
            `+e+"("+n.map(function(c,d){return"start["+d+"]"}).join()+");":n.map(function(c,d){return i[d]+" = "+r[d]+" + start["+d+"];"}).join(`
`);this.userCode=`
      uniform int start[`+this.rank+`];
      void main() {
        `+e+` coords = getOutputCoords();
        `+e+` sourceLoc;
        `+l+`
        vec4 result = vec4(0.);
        `+s+`
        `+u+`
        setOutput(result);
      }
    `}return t.prototype.getCustomSetupFunc=function(n){var e=this;if(n.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+n.length+")");return function(r,i){e.startLoc==null&&(e.startLoc=r.getUniformLocationNoThrow(i,"start"),e.startLoc==null)||r.gl.uniform1iv(e.startLoc,n)}},t}(),QG=function(){return function(t,n,e){this.variableNames=["x"],this.outputShape=e;var r=e.length,i=Bt(e.length),o=Bt(e.length),a="";if(r===1)a="coords * strides + begin";else{var s=0;a=e.map(function(u,l){return s++,e.length===1?"coords * strides["+l+"] + begin["+l+"]":"coords["+(s-1)+"] * strides["+l+"] + begin["+l+"]"}).join(",")}this.userCode=`
      `+i+" begin = "+i+"("+t+`);
      `+i+" strides = "+i+"("+n+`);

      void main() {
        `+o+` coords = getOutputCoords();
        setOutput(getX(`+a+`));
      }
    `}}(),ZG=function(){function t(n){this.gpgpu=n,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return t.prototype.acquireTexture=function(n,e,r){var i,o=HN(e,r),a=GN(n,o,r);if(a in this.freeTextures||(this.freeTextures[a]=[]),a in this.usedTextures||(this.usedTextures[a]=[]),this.freeTextures[a].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var s=this.freeTextures[a].shift();return this.usedTextures[a].push(s),s}return this.numUsedTextures++,this.log(),o===Wr.PACKED_2X2_FLOAT32?i=this.gpgpu.createPackedMatrixTexture(n[0],n[1]):o===Wr.PACKED_2X2_FLOAT16?i=this.gpgpu.createFloat16PackedMatrixTexture(n[0],n[1]):o===Wr.UNPACKED_FLOAT32?i=this.gpgpu.createFloat32MatrixTexture(n[0],n[1]):o===Wr.UNPACKED_FLOAT16?i=this.gpgpu.createFloat16MatrixTexture(n[0],n[1]):o===Wr.PACKED_4X1_UNSIGNED_BYTE&&(i=this.gpgpu.createUnsignedBytesMatrixTexture(n[0],n[1])),this.usedTextures[a].push(i),i},t.prototype.releaseTexture=function(n,e,r,i){if(this.freeTextures!=null){var o=GN(e,HN(r,i),i);o in this.freeTextures||(this.freeTextures[o]=[]),this.freeTextures[o].push(n),this.numFreeTextures++,this.numUsedTextures--;var a=this.usedTextures[o],s=a.indexOf(n);if(s<0)throw new Error("Cannot release a texture that was never provided by this texture manager");a.splice(s,1),this.log()}},t.prototype.log=function(){if(this.logEnabled){var n=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+n+")")}},t.prototype.getNumUsedTextures=function(){return this.numUsedTextures},t.prototype.getNumFreeTextures=function(){return this.numFreeTextures},t.prototype.dispose=function(){var n=this;if(this.freeTextures!=null){for(var e in this.freeTextures)this.freeTextures[e].forEach(function(r){n.gpgpu.deleteMatrixTexture(r)});for(var e in this.usedTextures)this.usedTextures[e].forEach(function(i){n.gpgpu.deleteMatrixTexture(i)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},t}();function HN(t,n){if(t===qr.UPLOAD)return Wr.PACKED_2X2_FLOAT32;if(t===qr.RENDER||t==null)return function(e){return ie().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?Wr.PACKED_2X2_FLOAT32:Wr.UNPACKED_FLOAT32:e?Wr.PACKED_2X2_FLOAT16:Wr.UNPACKED_FLOAT16}(n);if(t===qr.DOWNLOAD||t===qr.PIXELS)return Wr.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+t)}function GN(t,n,e){return t[0]+"_"+t[1]+"_"+n+"_"+e}var eq=function(){return function(t,n){this.variableNames=["A"];for(var e=new Array(t.length),r=0;r<e.length;r++)e[r]=t[r]*n[r];this.outputShape=e,this.rank=e.length;var i=Bt(this.rank),o=function(a){var s=a.length;if(s>5)throw Error("Tile for rank "+s+" is not yet supported");if(s===1)return"imod(resRC, "+a[0]+")";for(var u=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],l=[],c=0;c<a.length;c++)l.push("imod("+u[c]+", "+a[c]+")");return l.join()}(t);this.userCode=`
      void main() {
        `+i+` resRC = getOutputCoords();
        setOutput(getA(`+o+`));
      }
    `}}(),tq=function(){return function(t,n){this.variableNames=["A"];for(var e=new Array(t.length),r=0;r<e.length;r++)e[r]=t[n[r]];this.outputShape=e,this.rank=e.length;var i=Bt(this.rank),o=function(a){var s=a.length;if(s>6)throw Error("Transpose for rank "+s+" is not yet supported");for(var u=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],l=new Array(s),c=0;c<a.length;c++)l[a[c]]=u[c];return l.join()}(n);this.userCode=`
    void main() {
      `+i+` resRC = getOutputCoords();
      setOutput(getA(`+o+`));
    }
    `}}(),nq=function(){return function(t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var e=new Array(t.length),r=0;r<e.length;r++)e[r]=t[n[r]];if(this.outputShape=e,this.rank=e.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.");var i=Bt(this.rank),o=oP("rc",this.rank),a=new Array(this.rank);for(r=0;r<n.length;r++)a[n[r]]=o[r];var s="vec2("+a.slice(-2).join()+")",u="++"+o[this.rank-1]+" < "+e[this.rank-1],l="getChannel(getA("+a.join()+"), "+s+")";this.userCode=`
    void main() {
      `+i+` rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = `+l+`;
      if(`+u+`) {
        result[1] = `+l+`;
      }
      --`+o[this.rank-1]+`;
      if(++`+o[this.rank-2]+" < "+e[this.rank-2]+`) {
        result[2] = `+l+`;
        if(`+u+`) {
          result[3] = `+l+`;
        }
      }
      setOutput(result);
    }
    `}}(),wE=1.7580993408473768,xE=1.0507009873554805,et=function(){return function(t,n){this.variableNames=["A"],this.outputShape=t,this.userCode=`
      float unaryOperation(float x) {
        `+n+`
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}(),Ki="if (isnan(x)) return x;",rq="return x;",qN="return abs(x);",NP=Ki+`
  return (x < 0.0) ? 0.0 : x;
`,kP=Ki+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,IP="return (x >= 0.0) ? x : (exp(x) - 1.0);",iq=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = `+wE+`;
  float scale = `+xE+`;
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,KN="return -x;",XN="return ceil(x);",YN="return floor(x);",JN="return exp(x);",QN="return exp(x) - 1.0;",oq=Ki+`
  return sin(x);
`,aq=Ki+`
  return cos(x);
`,sq=Ki+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,uq=Ki+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,lq=Ki+`
  return atan(x);
`,cq=Ki+"return log(x + sqrt(x * x + 1.0));",dq=Ki+`
  if (x < 1.0) return NAN;
  return log(x + sqrt(x * x - 1.0));`,fq=Ki+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
  return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,bh="return x;",pq="return x;",_P=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,AP=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,OP=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,ld=function(){return function(t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.userCode=`
      vec4 unaryOperation(vec4 x) {
        `+n+`
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}(),hq=function(){return function(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=t;var n=t.length,e=_r("rc",n),r=Bt(n),i=function(s,u){if(s===1)return"rc";for(var l="",c=0;c<s;c++)l+=u[c],c<s-1&&(l+=",");return l}(n,e),o=e.slice(-2),a=n<=1?"rc":"vec2("+o.join(",")+")";this.userCode=`
      void main() {
        `+r+` rc = getOutputCoords();
        vec4 packedInput = getA(`+i+`);

        setOutput(getChannel(packedInput, `+a+`));
      }
    `}}(),wh={};function xh(t,n){if(n===void 0&&(n=!1),t==="linear")return n?pq:rq;if(t==="relu")return n?_P:NP;if(t==="elu")return n?OP:IP;if(t==="relu6")return n?AP:kP;if(t==="prelu")return n?lP:uP;throw new Error("Activation "+t+" has not been implemented for the WebGL backend.")}var mq=600,DP=function(t){function n(e){var r,i=t.call(this)||this;if(i.gpgpu=e,i.pendingRead=new WeakMap,i.pendingDisposal=new WeakSet,i.dataRefCount=new WeakMap,i.numBytesInGPU=0,i.uploadWaitMs=0,i.downloadWaitMs=0,i.warnedAboutMemory=!1,i.pendingDeletes=0,i.disposed=!1,!ie().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(e==null){var o=Eo(ie().getNumber("WEBGL_VERSION"));i.binaryCache=((r=ie().getNumber("WEBGL_VERSION"))in wh||(wh[r]={}),wh[r]),i.gpgpu=new TP(o),i.canvas=o.canvas,i.gpgpuCreatedLocally=!0}else i.binaryCache={},i.gpgpuCreatedLocally=!1,i.canvas=e.gl.canvas;return i.textureManager=new ZG(i.gpgpu),i.numMBBeforeWarning=ie().global.screen==null?1024:ie().global.screen.height*ie().global.screen.width*window.devicePixelRatio*mq/1024/1024,i.texData=new fE(i,K),i}return Hi(n,t),n.prototype.numDataIds=function(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes},n.prototype.fromPixels=function(e,r){if(e==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var i=typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement,o=e.data instanceof Uint8Array,a=typeof ImageData<"u"&&e instanceof ImageData,s=typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement,u=typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement,l=s?[e.videoWidth,e.videoHeight]:[e.width,e.height],c=l[0],d=l[1],f=[d,c],p=[d,c,r];if(!(i||o||a||s||u))throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+e.constructor.name);(u||s)&&(this.fromPixels2DContext==null&&(this.fromPixels2DContext=lM(ie().getNumber("WEBGL_VERSION")).getContext("2d")),this.fromPixels2DContext.canvas.width=c,this.fromPixels2DContext.canvas.height=d,this.fromPixels2DContext.drawImage(e,0,0,c,d),e=this.fromPixels2DContext.canvas);var h,v,g=this.makeTensorInfo(f,"int32");return this.texData.get(g.dataId).usage=qr.PIXELS,this.gpgpu.uploadPixelDataToTexture(this.getTexture(g.dataId),e),ie().getBool("WEBGL_PACK")?(h=new CG(p),v=this.compileAndRun(h,[g])):(h=new EG(p),v=this.compileAndRun(h,[g])),this.disposeData(g.dataId),v},n.prototype.write=function(e,r,i){if(ie().getBool("DEBUG")&&this.checkNumericalProblems(e),i==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var o={};return this.texData.set(o,{shape:r,dtype:i,values:e,usage:qr.UPLOAD}),o},n.prototype.move=function(e,r,i,o){if(ie().getBool("DEBUG")&&this.checkNumericalProblems(r),o==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:i,dtype:o,values:r,usage:qr.UPLOAD})},n.prototype.readSync=function(e){var r=this.texData.get(e),i=r.values,o=r.dtype,a=r.complexTensors,s=r.slice,u=r.shape,l=r.isPacked;if(s!=null){var c=void 0;c=l?new ld(u,bh):new et(u,bh);var d=this.runWebGLProgram(c,[{dataId:e,shape:u,dtype:o}],o),f=this.readSync(d.dataId);return this.disposeData(d.dataId),f}if(i!=null)return this.convertAndCacheOnCPU(e);if(o==="string")return i;var p,h,v=this.activeTimers!=null;return v&&(p=Di()),o==="complex64"?h=Ew(a.real.dataSync(),a.imag.dataSync()):h=this.getValuesFromTexture(e),v&&(this.downloadWaitMs+=Di()-p),this.convertAndCacheOnCPU(e,h)},n.prototype.read=function(e){return Ae(this,void 0,void 0,function(){var r,i,o,a,s,u,l,c,d,f,p,h,v,g,m,y,b,w,x,C,E,S;return Oe(this,function(N){switch(N.label){case 0:if(this.pendingRead.has(e))return r=this.pendingRead.get(e),[2,new Promise(function(k){return r.push(k)})];if(i=this.texData.get(e),o=i.values,a=i.shape,s=i.slice,u=i.dtype,l=i.complexTensors,c=i.isPacked,s!=null)return d=void 0,d=c?new ld(a,bh):new et(a,bh),f=this.runWebGLProgram(d,[{dataId:e,shape:a,dtype:u}],u),p=this.read(f.dataId),this.disposeData(f.dataId),[2,p];if(o!=null)return[2,this.convertAndCacheOnCPU(e)];if(!ie().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&ie().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return h=null,u!=="complex64"&&ie().get("WEBGL_BUFFER_SUPPORTED")&&(v=this.decode(e),g=this.texData.get(v.dataId),h=(S=this.gpgpu).createBufferFromTexture.apply(S,[g.texture].concat(Yd(a)))),this.pendingRead.set(e,[]),u==="complex64"?[3,2]:[4,this.gpgpu.createAndWaitForFence()];case 1:N.sent(),N.label=2;case 2:return u!=="complex64"?[3,4]:[4,Promise.all([l.real.data(),l.imag.data()])];case 3:return y=N.sent(),b=y[0],w=y[1],m=Ew(b,w),[3,5];case 4:h==null?m=this.getValuesFromTexture(e):(x=Me(a),m=this.gpgpu.downloadFloat32MatrixFromBuffer(h,x)),N.label=5;case 5:return v!=null&&this.disposeData(v.dataId),C=this.convertAndCacheOnCPU(e,m),E=this.pendingRead.get(e),this.pendingRead.delete(e),E.forEach(function(k){return k(C)}),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e),this.pendingDeletes--),[2,C]}})})},n.prototype.checkNumericalProblems=function(e){if(e!=null)for(var r=0;r<e.length;r++){var i=e[r];if(!cM(i))throw ie().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error("The value "+i+" cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'"):Error("The value "+i+" cannot be represented on this device.")}},n.prototype.getValuesFromTexture=function(e){var r,i=this.texData.get(e),o=i.shape,a=i.dtype,s=i.isPacked,u=Me(o);if(ie().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var l=this.decode(e),c=this.texData.get(l.dataId),d=(r=this.gpgpu).downloadMatrixFromPackedTexture.apply(r,[c.texture].concat(Yd(o))).subarray(0,u);return this.disposeData(l.dataId),d}var f=ie().getBool("WEBGL_PACK")&&s===!0,p=f?hm(o):o,h=f?new gG(p):new vG(p),v=this.runWebGLProgram(h,[{shape:p,dtype:a,dataId:e}],"float32"),g=this.texData.get(v.dataId),m=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(g.texture,g.texShape[0],g.texShape[1]).subarray(0,u);return this.disposeData(v.dataId),m},n.prototype.time=function(e){return Ae(this,void 0,void 0,function(){var r,i,o,a,s,u,l;return Oe(this,function(c){switch(c.label){case 0:return r=this.activeTimers,i=[],o=!1,this.programTimersStack==null?(this.programTimersStack=i,o=!0):this.activeTimers.push(i),this.activeTimers=i,e(),a=ta(this.activeTimers.map(function(d){return d.query})).filter(function(d){return d!=null}),s=ta(this.activeTimers.map(function(d){return d.name})).filter(function(d){return d!=null}),this.activeTimers=r,o&&(this.programTimersStack=null),[4,Promise.all(a)];case 1:return u=c.sent(),l={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:KD(u),getExtraProfileInfo:function(){return u.map(function(d,f){return{name:s[f],ms:d}}).map(function(d){return d.name+": "+d.ms}).join(", ")},wallMs:null},this.uploadWaitMs=0,this.downloadWaitMs=0,[2,l]}})})},n.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},n.prototype.startTimer=function(){return ie().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?this.gpgpu.beginQuery():{startMs:Di(),endMs:null}},n.prototype.endTimer=function(e){return ie().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(this.gpgpu.endQuery(),e):(e.endMs=Di(),e)},n.prototype.getQueryTime=function(e){return Ae(this,void 0,void 0,function(){var r;return Oe(this,function(i){return ie().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?[2,this.gpgpu.waitForQueryAndGetTime(e)]:[2,(r=e).endMs-r.startMs]})})},n.prototype.disposeData=function(e){if(!this.pendingDisposal.has(e)){if(this.pendingRead.has(e))return this.pendingDisposal.add(e),void this.pendingDeletes++;if(this.texData.has(e)){this.releaseGPUData(e);var r=this.texData.get(e).complexTensors;r!=null&&(r.real.dispose(),r.imag.dispose()),this.texData.delete(e)}}},n.prototype.releaseGPUData=function(e){var r=this.texData.get(e),i=r.texture,o=r.dtype,a=r.texShape,s=r.usage,u=r.isPacked,l=r.slice,c=l&&l.origDataId||e,d=this.dataRefCount.get(c);d>1?this.dataRefCount.set(c,d-1):(this.dataRefCount.delete(c),i!=null&&(this.numBytesInGPU-=this.computeBytes(a,o),this.textureManager.releaseTexture(i,a,s,u)));var f=this.texData.get(e);f.texture=null,f.texShape=null,f.isPacked=!1,f.slice=null},n.prototype.getTexture=function(e){return this.uploadToGPU(e),this.texData.get(e).texture},n.prototype.getDataInfo=function(e){return this.texData.get(e)},n.prototype.getCPUBackend=function(){return ie().getBool("WEBGL_CPU_FORWARD")?(this.cpuBackend==null&&(this.cpuBackend=K.findBackend("cpu")),this.cpuBackend):null},n.prototype.shouldExecuteOnCPU=function(e,r){var i=this;return r===void 0&&(r=128),this.getCPUBackend()!=null&&e.every(function(o){return i.texData.get(o.dataId).texture==null&&o.size<r})},n.prototype.getGPGPUContext=function(){return this.gpgpu},n.prototype.complex=function(e,r){var i=this.makeOutput(e.shape,"complex64");return this.texData.get(i.dataId).complexTensors={real:K.keep(e.clone()),imag:K.keep(r.clone())},i},n.prototype.real=function(e){return this.texData.get(e.dataId).complexTensors.real.clone()},n.prototype.imag=function(e){return this.texData.get(e.dataId).complexTensors.imag.clone()},n.prototype.slice=function(e,r,i){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.slice(e,r,i);if(Me(i)===0)return mn([],i,e.dtype);var o=this.texData.get(e.dataId).isPacked,a=cE(e.shape,r,i);if(o||!a){var s=ie().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new JG(i):new YG(i),u=s.getCustomSetupFunc(r);return this.compileAndRun(s,[e],null,u)}return this.uploadToGPU(e.dataId),this.shallowSlice(e,r,i)},n.prototype.shallowSlice=function(e,r,i){var o=this.texData.get(e.dataId),a=this.makeOutput(i,e.dtype),s=this.texData.get(a.dataId);Object.assign(s,o),s.shape=i,s.dtype=e.dtype;var u=dE(r,e.strides);o.slice&&(u+=o.slice.flatOffset),s.slice={flatOffset:u,origDataId:o.slice&&o.slice.origDataId||e.dataId};var l=this.dataRefCount.get(s.slice.origDataId)||1;return this.dataRefCount.set(s.slice.origDataId,l+1),a},n.prototype.stridedSlice=function(e,r,i,o){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.stridedSlice(e,r,i,o);var a=Rg(r,i,o);if(a.some(function(u){return u===0}))return mn([],a);var s=new QG(r,o,a);return this.compileAndRun(s,[e])},n.prototype.reverse=function(e,r){var i=ie().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new qG(e.shape,r):new GG(e.shape,r);return this.compileAndRun(i,[e])},n.prototype.concat=function(e,r){if(e[0].dtype==="complex64"){var i=e.map(function(p){return Ir(p)}),o=e.map(function(p){return vi(p)});return Nn(this.concat(i,r),this.concat(o,r))}if(this.shouldExecuteOnCPU(e))return this.cpuBackend.concat(e,r);if(e.length===1)return e[0];if(e.length>ie().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var a=Math.floor(e.length/2),s=this.concat(e.slice(0,a),r),u=this.concat(e.slice(a),r);return this.concat([s,u],r)}if(ie().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&e[0].rank>1){var l=new nG(e.map(function(p){return p.shape}),r);return this.compileAndRun(l,e)}var c=cu(e.map(function(p){return p.shape}),r),d=e.map(function(p){return p.as2D(-1,Me(p.shape.slice(r)))}),f=new tG(d.map(function(p){return p.shape}));return this.compileAndRun(f,d).reshape(c)},n.prototype.neg=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.neg(e);if(ie().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,KN,e.dtype);var r=new et(e.shape,KN);return this.compileAndRun(r,[e])},n.prototype.batchMatMul=function(e,r,i,o){var a=i?e.shape[2]:e.shape[1],s=o?r.shape[1]:r.shape[2],u=i?e.shape[1]:e.shape[2],l=e.shape[0];if((a===1||s===1)&&u>1e3){i&&(e=e.transpose([0,2,1])),o&&(r=r.transpose([0,2,1]));var c=s===1?e:e.as3D(l,u,1),d=s===1?2:1,f=s===1?r.as3D(l,1,u):r;return this.multiply(c,f).sum(d,!0)}var p=bn(e.dtype,r.dtype),h=new Z0(e.shape,[l,a,s],i,o);return this.compileAndRun(h,[e,r],p)},n.prototype.fusedBatchMatMul=function(e){var r=e.a,i=e.b,o=e.transposeA,a=e.transposeB,s=e.bias,u=e.activation,l=e.preluActivationWeights,c=o?r.shape[2]:r.shape[1],d=a?i.shape[1]:i.shape[2],f=r.shape[0],p=bn(r.dtype,i.dtype),h=s!=null,v=l!=null,g=u?xh(u,!0):null,m=new Z0(r.shape,[f,c,d],o,a,h,g,v),y=[r,i];return s&&y.push(s),l&&y.push(l),this.compileAndRun(m,y,p)},n.prototype.multiply=function(e,r){if(e.dtype==="complex64"){var i=this.texData.get(e.dataId),o=this.texData.get(r.dataId),a=new LN(Y7,e.shape,r.shape),s=new LN(J7,e.shape,r.shape),u=[this.makeComplexComponentTensorInfo(e,i.complexTensors.real),this.makeComplexComponentTensorInfo(e,i.complexTensors.imag),this.makeComplexComponentTensorInfo(r,o.complexTensors.real),this.makeComplexComponentTensorInfo(r,o.complexTensors.imag)],l=this.compileAndRun(a,u),c=this.compileAndRun(s,u),d=this.complex(l,c);return l.dispose(),c.dispose(),d}if(this.shouldExecuteOnCPU([e,r]))return this.cpuBackend.multiply(e,r);if(ie().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,FN,e.dtype);var f=new on(FN,e.shape,r.shape);return this.compileAndRun(f,[e,r],e.dtype)},n.prototype.batchNormalization=function(e,r,i,o,a,s){var u=[e,r,i],l=null;s!=null&&(l=s.shape,u.push(s));var c=null;if(a!=null&&(c=a.shape,u.push(a)),ie().getBool("WEBGL_PACK_NORMALIZATION")){var d=new X7(e.shape,r.shape,i.shape,l,c,o);return this.compileAndRun(d,u)}var f=new K7(e.shape,r.shape,i.shape,l,c,o);return this.compileAndRun(f,u)},n.prototype.localResponseNormalization4D=function(e,r,i,o,a){var s=ie().getBool("WEBGL_PACK_NORMALIZATION")?new AG(e.shape,r,i,o,a):new IG(e.shape,r,i,o,a);return this.compileAndRun(s,[e])},n.prototype.LRNGrad=function(e,r,i,o,a,s,u){var l=new _G(r.shape,o,a,s,u);return this.compileAndRun(l,[r,i,e])},n.prototype.tile=function(e,r){if(e.dtype==="string"){var i=this.readSync(e.dataId).map(function(a){return _f(a)});return rP(Ge(e.shape,e.dtype,i),r)}var o=new eq(e.shape,r);return this.compileAndRun(o,[e])},n.prototype.pad=function(e,r,i){var o=ie().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new zG(e.shape,r,i):new FG(e.shape,r,i);return this.compileAndRun(o,[e])},n.prototype.transpose=function(e,r){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.transpose(e,r);var i=ie().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new nq(e.shape,r):new tq(e.shape,r);return this.compileAndRun(i,[e])},n.prototype.gather=function(e,r,i){if(this.shouldExecuteOnCPU([e,r]))return this.cpuBackend.gather(e,r,i);var o=new RG(e.shape,r.size,i);return this.compileAndRun(o,[e,r])},n.prototype.batchToSpaceND=function(e,r,i){U(e.rank<=4,function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"});var o=r.reduce(function(d,f){return d*f}),a=fv(e.shape,r,o),s=pv(a.length,r.length),u=hv(e.shape,r,o),l=KM(i,r.length),c=XM(u,i,r.length);return e.reshape(a).transpose(s).reshape(u).slice(l,c)},n.prototype.spaceToBatchND=function(e,r,i){U(e.rank<=4,function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"});var o=r.reduce(function(f,p){return f*p}),a=[[0,0]];a.push.apply(a,i);for(var s=1+r.length;s<e.shape.length;++s)a.push([0,0]);var u=e.pad(a),l=fv(u.shape,r,o,!1),c=pv(l.length,r.length,!1),d=hv(u.shape,r,o,!1);return u.reshape(l).transpose(c).reshape(d)},n.prototype.reduce=function(e,r,i){var o=e.shape[0],a=e.shape[1],s=Y0(a),u=new BG({windowSize:s,inSize:a,batchSize:o},r),l=this.compileAndRun(u,[e],i);return l.shape[1]===1?l:this.reduce(l,r,i)},n.prototype.argReduce=function(e,r,i){i===void 0&&(i=null);var o=e.shape[0],a=e.shape[1];i!=null&&(o=i.shape[0],a=i.shape[1]);var s=Y0(a),u=new B7({windowSize:s,inSize:a,batchSize:o},r,i==null),l=[e];i!=null&&l.push(i);var c=this.compileAndRun(u,l,"int32");return c.shape[1]===1?c:this.argReduce(e,r,c)},n.prototype.argReducePacked=function(e,r,i){i===void 0&&(i=null);var o=i!=null?i.shape:e.shape,a=Y0(o[o.length-1]),s=new H7(o,a,r,i==null),u=i==null?[e]:[e,i],l=this.compileAndRun(s,u,"int32");return l.rank===e.rank?this.argReducePacked(e,r,l):l},n.prototype.sum=function(e,r){Tr("sum",r,e.rank);var i=Gn(e.shape,r),o=i[0],a=Me(i[1]),s=e.as2D(-1,a),u=q0(e.dtype);return this.reduce(s,"sum",u).reshape(o)},n.prototype.prod=function(e,r){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.prod(e,r);var i=Gn(e.shape,r),o=i[0],a=Me(i[1]),s=e.as2D(-1,a),u=q0(e.dtype);return this.reduce(s,"prod",u).reshape(o)},n.prototype.unsortedSegmentSum=function(e,r,i){var o=0,a=Gi([o],e.rank),s=e;a!=null&&(s=e.transpose(a),o=qi(1,e.rank)[0]);var u=function(p,h,v){for(var g=[],m=p.length,y=0;y<m;y++)y!==h?g.push(p[y]):g.push(v);return g}(s.shape,o,i),l=Me([s.shape[o]]),c=s.as2D(-1,l),d=q0(e.dtype),f=this.segOpCompute(c,"unsortedSegmentSum",r,d,i).reshape(u);return a!=null&&(f=f.transpose(yg(a))),f},n.prototype.segOpCompute=function(e,r,i,o,a){var s=e.shape[0],u=e.shape[1],l=function(f,p){var h,v=!1;for(f<=JM?(h=f,v=!0):h=cv(f,Math.floor(Math.sqrt(f)));!v;)h>p||h===f?v=!0:h=cv(f,h+1);return h}(u,a),c=new KG({windowSize:l,inSize:u,batchSize:s,numSegments:a},r),d=this.compileAndRun(c,[e,i],o);return d.shape[1]===a?d:(i=bg(0,a).tile([u/l]),this.segOpCompute(d,r,i,o,a))},n.prototype.argMinMaxReduce=function(e,r,i){var o=[r];if(Tr("arg"+i.charAt(0).toUpperCase()+i.slice(1),o,e.rank),!ie().getBool("WEBGL_PACK_REDUCE")||e.rank<=2){var a=Gn(e.shape,o),s=a[0],u=Me(a[1]),l=e.as2D(-1,u);return this.argReduce(l,i).reshape(s)}return this.argReducePacked(e,i)},n.prototype.argMin=function(e,r){return this.argMinMaxReduce(e,r,"min")},n.prototype.argMax=function(e,r){return this.argMinMaxReduce(e,r,"max")},n.prototype.cumsum=function(e,r,i,o){if(r!==e.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(e.rank-1)+" but got axis="+r);var a=new dG(e.shape,i,o);return this.compileAndRun(a,[e])},n.prototype.equal=function(e,r){if(ie().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,`
  return vec4(equal(a, b));
`,"bool");var i=new on("return float(a == b);",e.shape,r.shape);return this.compileAndRun(i,[e,r],"bool")},n.prototype.notEqual=function(e,r){if(ie().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,`
  return vec4(notEqual(a, b));
`,"bool");var i=new on("return float(a != b);",e.shape,r.shape);return this.compileAndRun(i,[e,r],"bool")},n.prototype.less=function(e,r){if(this.shouldExecuteOnCPU([e,r]))return this.cpuBackend.less(e,r);if(ie().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,`
  return vec4(lessThan(a, b));
`,"bool");var i=new on("return float(a < b);",e.shape,r.shape);return this.compileAndRun(i,[e,r],"bool")},n.prototype.lessEqual=function(e,r){if(ie().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,`
  return vec4(lessThanEqual(a, b));
`,"bool");var i=new on("return float(a <= b);",e.shape,r.shape);return this.compileAndRun(i,[e,r],"bool")},n.prototype.greater=function(e,r){if(this.shouldExecuteOnCPU([e,r]))return this.cpuBackend.greater(e,r);if(ie().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,`
  return vec4(greaterThan(a, b));
`,"bool");var i=new on("return float(a > b);",e.shape,r.shape);return this.compileAndRun(i,[e,r],"bool")},n.prototype.greaterEqual=function(e,r){if(ie().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,`
  return vec4(greaterThanEqual(a, b));
`,"bool");var i=new on("return float(a >= b);",e.shape,r.shape);return this.compileAndRun(i,[e,r],"bool")},n.prototype.logicalNot=function(e){var r=new et(e.shape,"return float(!(x >= 1.0));");return this.compileAndRun(r,[e])},n.prototype.logicalAnd=function(e,r){if(ie().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,"bool");var i=new on("return float(a >= 1.0 && b >= 1.0);",e.shape,r.shape);return this.compileAndRun(i,[e,r],"bool")},n.prototype.logicalOr=function(e,r){if(ie().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,"bool");var i=new on("return float(a >= 1.0 || b >= 1.0);",e.shape,r.shape);return this.compileAndRun(i,[e,r],"bool")},n.prototype.select=function(e,r,i){var o=new XG(e.rank,r.shape,r.rank);return this.compileAndRun(o,[e,r,i],bn(r.dtype,i.dtype))},n.prototype.where=function(e){ww("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var r=e.dataSync();return yE(e.shape,r)},n.prototype.topk=function(e,r,i){return iP(e.dataSync(),e.shape,e.dtype,r)},n.prototype.min=function(e,r){Tr("min",r,e.rank);var i=Gn(e.shape,r),o=i[0],a=Me(i[1]),s=e.as2D(-1,a);return this.reduce(s,"min",s.dtype).reshape(o)},n.prototype.minimum=function(e,r){if(this.shouldExecuteOnCPU([e,r]))return this.cpuBackend.minimum(e,r);var i=ie().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ao(`
  vec4 result = vec4(min(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,e.shape,r.shape):new on(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return min(a, b);
`,e.shape,r.shape);return this.compileAndRun(i,[e,r])},n.prototype.mod=function(e,r){var i=ie().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ao(`
  vec4 result = mod(a, b);
  vec4 isNaN = vec4(equal(b, vec4(0.0)));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,e.shape,r.shape):new on(`if (b == 0.0) return NAN;
  return mod(a, b);`,e.shape,r.shape);return this.compileAndRun(i,[e,r])},n.prototype.max=function(e,r){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.max(e,r);Tr("max",r,e.rank);var i=Gn(e.shape,r),o=i[0],a=Me(i[1]),s=e.as2D(-1,a);return this.reduce(s,"max",s.dtype).reshape(o)},n.prototype.maximum=function(e,r){if(this.shouldExecuteOnCPU([e,r]))return this.cpuBackend.maximum(e,r);var i=ie().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ao(`
  vec4 result = vec4(max(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,e.shape,r.shape):new on(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return max(a, b);
`,e.shape,r.shape);return this.compileAndRun(i,[e,r])},n.prototype.all=function(e,r){Tr("all",r,e.rank);var i=Gn(e.shape,r),o=i[0],a=Me(i[1]),s=e.as2D(-1,a);return this.reduce(s,"all",s.dtype).reshape(o)},n.prototype.any=function(e,r){Tr("any",r,e.rank);var i=Gn(e.shape,r),o=i[0],a=Me(i[1]),s=e.as2D(-1,a);return this.reduce(s,"any",s.dtype).reshape(o)},n.prototype.squaredDifference=function(e,r){var i=ie().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ao("return (a - b) * (a - b);",e.shape,r.shape):new on("return (a - b) * (a - b);",e.shape,r.shape);return this.compileAndRun(i,[e,r])},n.prototype.realDivide=function(e,r){if(ie().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,"float32",!0);var i=new on(`
if (a == b) {
  return 1.0;
};
return a / b;`,e.shape,r.shape);return this.compileAndRun(i,[e,r],"float32")},n.prototype.floorDiv=function(e,r){if(ie().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,"int32");var i=new on(`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,e.shape,r.shape);return this.compileAndRun(i,[e,r],"int32")},n.prototype.add=function(e,r){if(e.dtype==="complex64"&&r.dtype==="complex64")return this.complexSeparableBinaryOp(e,r,J0);if(this.shouldExecuteOnCPU([e,r]))return this.cpuBackend.add(e,r);var i=bn(e.dtype,r.dtype);if(ie().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,J0,i);var o=new on(J0,e.shape,r.shape);return this.compileAndRun(o,[e,r],i)},n.prototype.packedUnaryOp=function(e,r,i){var o=new ld(e.shape,r);return this.compileAndRun(o,[e],i)},n.prototype.packedBinaryOp=function(e,r,i,o,a){a===void 0&&(a=!1);var s=new Ao(i,e.shape,r.shape,a);return this.compileAndRun(s,[e,r],o)},n.prototype.complexSeparableBinaryOp=function(e,r,i){var o=this,a=this.texData.get(e.dataId),s=this.texData.get(r.dataId),u=[[a.complexTensors.real,s.complexTensors.real],[a.complexTensors.imag,s.complexTensors.imag]].map(function(f){var p=f[0],h=f[1],v=o.makeComplexComponentTensorInfo(e,p),g=o.makeComplexComponentTensorInfo(r,h),m=new on(i,e.shape,r.shape);return o.compileAndRun(m,[v,g],bn(p.dtype,h.dtype))}),l=u[0],c=u[1],d=this.complex(l,c);return l.dispose(),c.dispose(),d},n.prototype.makeComplexComponentTensorInfo=function(e,r){return{dataId:r.dataId,dtype:r.dtype,shape:e.shape}},n.prototype.addN=function(e){if(e.length===1)return e[0];if(e.length>ie().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var r=Math.floor(e.length/2),i=this.addN(e.slice(0,r)),o=this.addN(e.slice(r));return this.addN([i,o])}var a=e.map(function(l){return l.dtype}).reduce(function(l,c){return bn(l,c)}),s=e.map(function(l){return l.shape}),u=ie().getBool("WEBGL_PACK")?new z7(e[0].shape,s):new F7(e[0].shape,s);return this.compileAndRun(u,e,a)},n.prototype.subtract=function(e,r){if(e.dtype==="complex64"&&r.dtype==="complex64")return this.complexSeparableBinaryOp(e,r,Q0);if(this.shouldExecuteOnCPU([e,r]))return this.cpuBackend.subtract(e,r);var i=bn(e.dtype,r.dtype);if(ie().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,Q0,e.dtype);var o=new on(Q0,e.shape,r.shape);return this.compileAndRun(o,[e,r],i)},n.prototype.pow=function(e,r){var i=ie().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ao(`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,e.shape,r.shape):new on(`
if(a < 0.0 && floor(b) < b){
  return NAN;
}
if (b == 0.0) {
  return 1.0;
}
return (round(mod(b, 2.0)) != 1) ?
    pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,e.shape,r.shape),o=bn(e.dtype,r.dtype);return this.compileAndRun(i,[e,r],o)},n.prototype.ceil=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.ceil(e);if(ie().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,XN,e.dtype);var r=new et(e.shape,XN);return this.compileAndRun(r,[e])},n.prototype.floor=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.floor(e);if(ie().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,YN,e.dtype);var r=new et(e.shape,YN);return this.compileAndRun(r,[e])},n.prototype.sign=function(e){var r=new et(e.shape,`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`);return this.compileAndRun(r,[e])},n.prototype.isNaN=function(e){var r=new et(e.shape,"return float(isnan(x));");return this.compileAndRun(r,[e],"bool")},n.prototype.isInf=function(e){var r=new et(e.shape,"return float(isinf(x));");return this.compileAndRun(r,[e],"bool")},n.prototype.isFinite=function(e){var r=new et(e.shape,"return float(!isnan(x) && !isinf(x));");return this.compileAndRun(r,[e],"bool")},n.prototype.round=function(e){var r=new et(e.shape,`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`);return this.compileAndRun(r,[e])},n.prototype.exp=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.exp(e);if(ie().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,JN,e.dtype);var r=new et(e.shape,JN);return this.compileAndRun(r,[e])},n.prototype.expm1=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.expm1(e);if(ie().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,QN,e.dtype);var r=new et(e.shape,QN);return this.compileAndRun(r,[e])},n.prototype.log=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.log(e);if(ie().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,`
  vec4 result = log(x);
  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));
  result.r = isNaN.r == 1.0 ? NAN : result.r;
  result.g = isNaN.g == 1.0 ? NAN : result.g;
  result.b = isNaN.b == 1.0 ? NAN : result.b;
  result.a = isNaN.a == 1.0 ? NAN : result.a;

  return result;
`,e.dtype);var r=new et(e.shape,`if (x < 0.0) return NAN;
  return log(x);`);return this.compileAndRun(r,[e])},n.prototype.log1p=function(e){var r=new et(e.shape,"return log(1.0 + x);");return this.compileAndRun(r,[e])},n.prototype.sqrt=function(e){var r=new et(e.shape,"return sqrt(x);");return this.compileAndRun(r,[e])},n.prototype.rsqrt=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.rsqrt(e);var r=new et(e.shape,"return inversesqrt(x);");return this.compileAndRun(r,[e])},n.prototype.reciprocal=function(e){var r=new et(e.shape,"return 1.0 / x;");return this.compileAndRun(r,[e])},n.prototype.relu=function(e){var r;return r=ie().getBool("WEBGL_PACK")?new ld(e.shape,_P):new et(e.shape,NP),this.compileAndRun(r,[e])},n.prototype.relu6=function(e){var r;return r=ie().getBool("WEBGL_PACK")?new ld(e.shape,AP):new et(e.shape,kP),this.compileAndRun(r,[e])},n.prototype.prelu=function(e,r){var i=ie().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ao(lP,e.shape,r.shape):new on(uP,e.shape,r.shape);return this.compileAndRun(i,[e,r])},n.prototype.elu=function(e){if(ie().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,OP,e.dtype);var r=new et(e.shape,IP);return this.compileAndRun(r,[e])},n.prototype.eluDer=function(e,r){var i=ie().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ao(`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,e.shape,r.shape):new on("return (b >= 1.0) ? a : a * (b + 1.0);",e.shape,r.shape);return this.compileAndRun(i,[e,r])},n.prototype.selu=function(e){var r=new et(e.shape,iq);return this.compileAndRun(r,[e])},n.prototype.int=function(e){var r=new et(e.shape,"return float(int(x));");return this.compileAndRun(r,[e],"int32")},n.prototype.clip=function(e,r,i){var o,a=(o=ie().getBool("WEBGL_PACK_CLIP")?new Z7(e.shape):new Q7(e.shape)).getCustomSetupFunc(r,i);return this.compileAndRun(o,[e],null,a)},n.prototype.abs=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.abs(e);if(ie().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,qN,e.dtype);var r=new et(e.shape,qN);return this.compileAndRun(r,[e])},n.prototype.complexAbs=function(e){var r=this.texData.get(e.dataId),i=new eG(e.shape),o=[this.makeComplexComponentTensorInfo(e,r.complexTensors.real),this.makeComplexComponentTensorInfo(e,r.complexTensors.imag)];return this.compileAndRun(i,o)},n.prototype.sigmoid=function(e){var r=new et(e.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(r,[e])},n.prototype.softplus=function(e){var r=new et(e.shape,`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`);return this.compileAndRun(r,[e])},n.prototype.sin=function(e){var r=new et(e.shape,oq);return this.compileAndRun(r,[e])},n.prototype.cos=function(e){var r=new et(e.shape,aq);return this.compileAndRun(r,[e])},n.prototype.tan=function(e){var r=new et(e.shape,"return tan(x);");return this.compileAndRun(r,[e])},n.prototype.asin=function(e){var r=new et(e.shape,sq);return this.compileAndRun(r,[e])},n.prototype.acos=function(e){var r=new et(e.shape,uq);return this.compileAndRun(r,[e])},n.prototype.atan=function(e){var r=new et(e.shape,lq);return this.compileAndRun(r,[e])},n.prototype.atan2=function(e,r){var i=ie().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ao(`
  vec4 result = atan(a, b);
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,e.shape,r.shape):new on(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return atan(a, b);
`,e.shape,r.shape);return this.compileAndRun(i,[e,r])},n.prototype.sinh=function(e){var r=new et(e.shape,`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`);return this.compileAndRun(r,[e])},n.prototype.cosh=function(e){var r=new et(e.shape,`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`);return this.compileAndRun(r,[e])},n.prototype.tanh=function(e){var r=new et(e.shape,`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`);return this.compileAndRun(r,[e])},n.prototype.asinh=function(e){var r=new et(e.shape,cq);return this.compileAndRun(r,[e])},n.prototype.acosh=function(e){var r=new et(e.shape,dq);return this.compileAndRun(r,[e])},n.prototype.atanh=function(e){var r=new et(e.shape,fq);return this.compileAndRun(r,[e])},n.prototype.erf=function(e){var r=new et(e.shape,`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = 0.3275911;
  float a1 = 0.254829592;
  float a2 = -0.284496736;
  float a3 = 1.421413741;
  float a4 = -1.453152027;
  float a5 = 1.061405429;

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`);return this.compileAndRun(r,[e])},n.prototype.step=function(e,r){var i=new et(e.shape,function(o){return o===void 0&&(o=0),Ki+`
    return x > 0.0 ? 1.0 : float(`+o+`);
  `}(r));return this.compileAndRun(i,[e])},n.prototype.conv2dByMatMul=function(e,r,i,o,a,s){var u=e.shape,l=this.texData.get(e.dataId),c=i.inChannels,d=u[0]*u[1]*u[2],f=i.outChannels,p=i.dataFormat==="channelsLast",h=(d===1||f===1)&&c>1e3,v=u[2]%2!=0&&!!l.isPacked;if(h||!ie().getBool("WEBGL_LAZILY_UNPACK")||!ie().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!v){var g=p?u[0]*u[1]*u[2]:u[0]*u[2]*u[3],m=this.reshape(e,[1,g,i.inChannels]),y=this.reshape(r,[1,i.inChannels,i.outChannels]);return this.reshape(this.fusedBatchMatMul({a:m,b:y,transposeA:!1,transposeB:!1,bias:o,activation:a,preluActivationWeights:s}),i.outShape)}var b=p?u[0]*u[1]*(u[2]+1):u[0]*u[2]*(u[3]+1),w={dataId:e.dataId,shape:[1,b,i.inChannels],dtype:e.dtype},x=l.shape;l.shape=l.shape.slice(),l.shape[l.shape.length-2]++,U(Md(l.shape,w.shape),function(){return"packed reshape "+l.shape+" to "+w.shape+" isn't free"});var C=this.reshape(r,[1,i.inChannels,i.outChannels]),E=this.fusedBatchMatMul({a:w,b:C,transposeA:!1,transposeB:!1,bias:o,activation:a,preluActivationWeights:s}),S=this.texData.get(E.dataId);return U(S.isPacked,function(){return"batchMatMul result is expected to be packed"}),l.shape=x,S.shape=i.outShape,K.makeTensorFromDataId(E.dataId,i.outShape,E.dtype)},n.prototype.conv2dWithIm2Row=function(e,r,i,o,a,s){var u=i.filterWidth,l=i.filterHeight,c=i.inChannels,d=i.outWidth,f=i.outHeight,p=i.dataFormat==="channelsLast",h=u*l*c,v=f*d,g=[h,v],m=e.squeeze([0]),y=r.reshape([1,h,-1]),b=new kG(g,m.shape,i),w=this.compileAndRun(b,[m]).reshape([1,g[0],g[1]]),x=o!=null,C=s!=null,E=a?xh(a,!0):null,S=new Z0(w.shape,[1,v,i.outChannels],!0,!1,x,E,C),N=[w,y];o&&N.push(o),C&&N.push(s);var k=this.compileAndRun(S,N);return p?k.reshape([1,f,d,i.outChannels]):k.reshape([1,i.outChannels,f,d])},n.prototype.fusedConv2d=function(e){var r=e.input,i=e.filter,o=e.convInfo,a=e.bias,s=e.activation,u=e.preluActivationWeights;if(o.filterHeight===1&&o.filterWidth===1&&o.dilationHeight===1&&o.dilationWidth===1&&o.strideHeight===1&&o.strideWidth===1&&(o.padInfo.type==="SAME"||o.padInfo.type==="VALID"))return this.conv2dByMatMul(r,i,o,a,s,u);if(ie().getBool("WEBGL_CONV_IM2COL")&&r.shape[0]===1)return this.conv2dWithIm2Row(r,i,o,a,s,u);var l=a!=null,c=u!=null,d=s?xh(s,!1):null,f=new zN(o,l,d,c),p=[r,i];return a&&p.push(a),u&&p.push(u),this.compileAndRun(f,p)},n.prototype.conv2d=function(e,r,i){if(i.filterHeight===1&&i.filterWidth===1&&i.dilationHeight===1&&i.dilationWidth===1&&i.strideHeight===1&&i.strideWidth===1&&(i.padInfo.type==="SAME"||i.padInfo.type==="VALID"))return this.conv2dByMatMul(e,r,i);if(ie().getBool("WEBGL_CONV_IM2COL")&&e.shape[0]===1)return this.conv2dWithIm2Row(e,r,i);var o=new zN(i);return this.compileAndRun(o,[e,r])},n.prototype.conv2dDerInput=function(e,r,i){var o=new iG(i);return this.compileAndRun(o,[e,r])},n.prototype.conv2dDerFilter=function(e,r,i){var o=new rG(i);return this.compileAndRun(o,[e,r])},n.prototype.fusedDepthwiseConv2D=function(e){var r,i=e.input,o=e.filter,a=e.convInfo,s=e.bias,u=e.activation,l=e.preluActivationWeights,c=ie().getBool("WEBGL_PACK_DEPTHWISECONV")&&a.strideWidth<=2&&a.outChannels/a.inChannels==1,d=u?xh(u,c):null,f=[i,o],p=s!=null,h=l!=null;return p&&f.push(s),h&&f.push(l),c?(r=new jN(a,p,d,h),this.compileAndRun(r,f)):(r=new BN(a,p,d,h),this.compileAndRun(r,f))},n.prototype.depthwiseConv2D=function(e,r,i){var o;return ie().getBool("WEBGL_PACK_DEPTHWISECONV")&&i.strideWidth<=2&&i.outChannels/i.inChannels==1?(o=new jN(i),this.compileAndRun(o,[e,r])):(o=new BN(i),this.compileAndRun(o,[e,r]))},n.prototype.depthwiseConv2DDerInput=function(e,r,i){var o=new uG(i);return this.compileAndRun(o,[e,r])},n.prototype.depthwiseConv2DDerFilter=function(e,r,i){var o=new sG(i);return this.compileAndRun(o,[e,r])},n.prototype.conv3d=function(e,r,i){var o=new lG(i);return this.compileAndRun(o,[e,r])},n.prototype.conv3dDerInput=function(e,r,i){var o=new aG(i);return this.compileAndRun(o,[e,r])},n.prototype.conv3dDerFilter=function(e,r,i){var o=new oG(i);return this.compileAndRun(o,[e,r])},n.prototype.maxPool=function(e,r){var i=new e1(r,"max",!1);return this.compileAndRun(i,[e])},n.prototype.avgPool=function(e,r){var i=new e1(r,"avg",!1);return this.compileAndRun(i,[e],"float32")},n.prototype.maxPoolBackprop=function(e,r,i,o){var a=new e1(o,"max",!0),s=this.compileAndRun(a,[r]),u=new OG(o),l=this.compileAndRun(u,[e,s],r.dtype);return s.dispose(),l},n.prototype.avgPoolBackprop=function(e,r,i){var o=new G7(i);return this.compileAndRun(o,[e],r.dtype)},n.prototype.cast=function(e,r){return mE(e,r,this)},n.prototype.unstack=function(e,r){for(var i=e.shape[r],o=new Array(e.rank-1),a=0,s=0;s<e.rank;s++)s!==r&&(o[a++]=e.shape[s]);var u=new Array(e.rank).fill(0),l=e.shape.slice();l[r]=1;var c=new Array(i);for(s=0;s<c.length;s++)u[r]=s,c[s]=this.slice(e,u,l).reshape(o);return c},n.prototype.avgPool3d=function(e,r){var i=new t1(r,"avg",!1);return this.compileAndRun(i,[e],"float32")},n.prototype.avgPool3dBackprop=function(e,r,i){var o=new q7(i);return this.compileAndRun(o,[e],r.dtype)},n.prototype.maxPool3d=function(e,r){var i=new t1(r,"max",!1);return this.compileAndRun(i,[e],"float32")},n.prototype.maxPool3dBackprop=function(e,r,i,o){var a=new t1(o,"max",!0),s=this.compileAndRun(a,[r]),u=new DG(o),l=this.compileAndRun(u,[e,s],r.dtype);return s.dispose(),l},n.prototype.reshape=function(e,r){var i=this.texData.get(e.dataId);if(i.isPacked&&!Md(e.shape,r)&&(i.texture===null||!Md(i.shape,r))){var o=this.packedReshape(e,r);return K.makeTensorFromDataId(o.dataId,o.shape,o.dtype)}return gv(e,r)},n.prototype.resizeBilinear=function(e,r,i,o){var a=ie().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new UG(e.shape,r,i,o):new $G(e.shape,r,i,o);return this.compileAndRun(a,[e])},n.prototype.resizeBilinearBackprop=function(e,r,i){var o=new VG(e,r,i);return this.compileAndRun(o,[e])},n.prototype.resizeNearestNeighbor=function(e,r,i,o){var a=new HG(e.shape,r,i,o);return this.compileAndRun(a,[e])},n.prototype.resizeNearestNeighborBackprop=function(e,r,i){var o=new WG(e,r,i);return this.compileAndRun(o,[e])},n.prototype.multinomial=function(e,r,i,o){var a=r?e:Ru(e),s=a.shape[0],u=a.shape[1],l=new MG(s,u,i),c=l.getCustomSetupFunc(o);return this.compileAndRun(l,[a],"int32",c)},n.prototype.oneHot=function(e,r,i,o){var a=new PG(e.size,r,i,o);return this.compileAndRun(a,[e])},n.prototype.diag=function(e){var r=new mG(e.size);return this.compileAndRun(r,[e])},n.prototype.nonMaxSuppression=function(e,r,i,o,a){return ww("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),gE(e.dataSync(),r.dataSync(),i,o,a)},n.prototype.cropAndResize=function(e,r,i,o,a,s){var u=new cG(e.shape,r.shape,o,a,s);return this.compileAndRun(u,[e,r,i])},n.prototype.depthToSpace=function(e,r,i){U(r>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+r});var o=e.shape[0],a=i==="NHWC"?e.shape[1]:e.shape[2],s=i==="NHWC"?e.shape[2]:e.shape[3],u=i==="NHWC"?e.shape[3]:e.shape[1],l=a*r,c=s*r,d=u/(r*r),f=new hG(i==="NHWC"?[o,l,c,d]:[o,d,l,c],r,i);return this.compileAndRun(f,[e])},n.prototype.split=function(e,r,i){return nP(e,r,i)},n.prototype.scatterND=function(e,r,i){var o=mv(0,e,i),a=o.sliceRank,s=o.numUpdates,u=o.sliceSize,l=o.strides,c=o.outputSize,d=[c/u,u],f=e.reshape([s,a]),p=r.reshape([s,u]);if(c===0)return gv(mn([]),i);var h=ke(0),v=new WN(s,a,f.rank,p.rank,l,d);return this.compileAndRun(v,[p,f,h]).reshape(i)},n.prototype.sparseToDense=function(e,r,i,o){var a=mv(0,e,i),s=a.sliceRank,u=a.numUpdates,l=a.strides,c=a.outputSize,d=new WN(u,s,e.rank,r.rank,l,[c,1],!1);return this.compileAndRun(d,[r,e,o]).reshape(i)},n.prototype.fft=function(e){return this.fftImpl(e,!1)},n.prototype.ifft=function(e){return this.fftImpl(e,!0)},n.prototype.fftImpl=function(e,r){var i=this.texData.get(e.dataId),o=new $N(wG,e.shape,r),a=new $N(xG,e.shape,r),s=[this.makeComplexComponentTensorInfo(e,i.complexTensors.real),this.makeComplexComponentTensorInfo(e,i.complexTensors.imag)],u=this.compileAndRun(o,s),l=this.compileAndRun(a,s),c=this.complex(u,l).as2D(e.shape[0],e.shape[1]);return u.dispose(),l.dispose(),c},n.prototype.gatherND=function(e,r){var i=r.shape,o=i[i.length-1],a=YM(e,r),s=a[0],u=a[1],l=a[2],c=a[3],d=r.reshape([u,o]),f=e.reshape([e.size/l,l]),p=new TG(o,c,[u,l]);return this.compileAndRun(p,[f,d]).reshape(s)},n.prototype.fill=function(e,r,i){if((i=i||Cc(r))==="string"){var o=If(i,Me(e));return o.fill(r),K.makeTensor(o,e,i,this)}var a=new SG(e,r),s=a.getCustomSetupFunc(r);return this.compileAndRun(a,[],i,s)},n.prototype.onesLike=function(e){if(e.dtype==="string")throw new Error("onesLike is not supported under string dtype");return this.fill(e.shape,1,e.dtype)},n.prototype.zerosLike=function(e){return this.fill(e.shape,e.dtype==="string"?"":0,e.dtype)},n.prototype.linspace=function(e,r,i){return vE(e,r,i)},n.prototype.makeTensorInfo=function(e,r){var i=this.write(null,e,r);return this.texData.get(i).usage=null,{dataId:i,shape:e,dtype:r}},n.prototype.makeOutput=function(e,r){var i=this.makeTensorInfo(e,r).dataId;return K.makeTensorFromDataId(i,e,r,this)},n.prototype.unpackTensor=function(e){var r=new hq(e.shape);return this.runWebGLProgram(r,[e],e.dtype)},n.prototype.packTensor=function(e){var r=new LG(e.shape);return this.runWebGLProgram(r,[e],e.dtype,null,!0)},n.prototype.packedReshape=function(e,r){var i=[Df(e.shape)].concat(Mf(e.shape)),o={dtype:e.dtype,shape:i,dataId:e.dataId},a=[Df(r)].concat(Mf(r)),s=new jG(a,i),u=this.runWebGLProgram(s,[o],e.dtype,null,!0);return{dataId:u.dataId,shape:r,dtype:u.dtype}},n.prototype.decode=function(e){var r,i=this.texData.get(e),o=i.isPacked,a=i.shape,s=i.dtype,u=hm(a);return r=o?new pG(u):new fG(u),{dtype:s,shape:a,dataId:this.runWebGLProgram(r,[{shape:u,dtype:s,dataId:e}],s,null,!0).dataId}},n.prototype.runWebGLProgram=function(e,r,i,o,a){var s=this;a===void 0&&(a=!1);var u=this.makeTensorInfo(e.outputShape,i),l=this.texData.get(u.dataId);if(e.packedOutput&&(l.isPacked=!0),e.outPackingScheme===Of.DENSE){var c=Yd(e.outputShape);l.texShape=c.map(function(b){return 2*b})}if(e.outTexUsage!=null&&(l.usage=e.outTexUsage),Me(u.shape)===0)return l.values=kf(u.dtype,0),u;var d=[],f=r.map(function(b){if(b.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var w=s.texData.get(b.dataId);if(w.texture==null){if(!e.packedInputs&&Me(b.shape)<=ie().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:b.shape,texData:null,isUniform:!0,uniformValues:w.values};e.packedInputs&&(w.isPacked=!0,w.shape=b.shape)}else if(!!w.isPacked!=!!e.packedInputs)b=w.isPacked?s.unpackTensor(b):s.packTensor(b),d.push(b),w=s.texData.get(b.dataId);else if(w.isPacked&&!Md(w.shape,b.shape)){var x=b,C=b.shape;b.shape=w.shape,b=s.packedReshape(b,C),d.push(b),w=s.texData.get(b.dataId),x.shape=C}return s.uploadToGPU(b.dataId),{shape:b.shape,texData:w,isUniform:!1}});this.uploadToGPU(u.dataId);var p,h={shape:u.shape,texData:l,isUniform:!1},v=function(b,w,x){var C="";w.concat(x).forEach(function(N){var k=N.texData!=null&&N.texData.slice!=null&&N.texData.slice.flatOffset>0,M=N.isUniform?"uniform":N.texData.texShape;C+=N.shape+"_"+M+"_"+k});var E=b.userCode,S=b.constructor.name;return S+="_"+C+"_"+E}(e,f,h),g=this.getAndSaveBinary(v,function(){return function(b,w,x,C){var E=w.userCode,S=x.map(function(_,F){var L={logicalShape:_.shape,texShape:_.isUniform?null:_.texData.texShape,isUniform:_.isUniform,isPacked:!_.isUniform&&_.texData.isPacked,flatOffset:null};return _.texData!=null&&_.texData.slice!=null&&_.texData.slice.flatOffset>0&&(L.flatOffset=_.texData.slice.flatOffset),{name:w.variableNames[F],shapeInfo:L}}),N=S.map(function(_){return _.shapeInfo}),k={logicalShape:C.shape,texShape:C.texData.texShape,isUniform:!1,isPacked:C.texData.isPacked,flatOffset:null},M=j7(S,k,E,w.packedInputs),D=b.createProgram(M),R=null,O=b.getUniformLocation(D,"NAN",!1);ie().getNumber("WEBGL_VERSION")===1&&(R=b.getUniformLocation(D,"INFINITY",!1));for(var P={},A=0;A<w.variableNames.length;A++){var I=w.variableNames[A];P[I]=b.getUniformLocation(D,I,!1),P["offset"+I]=b.getUniformLocation(D,"offset"+I,!1)}return{program:w,source:M,webGLProgram:D,uniformLocations:P,inShapeInfos:N,outShapeInfo:k,infLoc:R,nanLoc:O}}(s.gpgpu,e,f,h)}),m=this.activeTimers!=null;if(m&&(p=this.startTimer()),function(b,w,x,C,E){UN(w.inShapeInfos,x),UN([w.outShapeInfo],[C]);var S=C.texData.texture,N=C.texData.texShape;C.texData.isPacked?b.setOutputPackedMatrixTexture(S,N[0],N[1]):b.setOutputMatrixTexture(S,N[0],N[1]),b.setProgram(w.webGLProgram),ie().getNumber("WEBGL_VERSION")===1&&w.infLoc!==null&&b.gl.uniform1f(w.infLoc,1/0),w.nanLoc!==null&&b.gl.uniform1f(w.nanLoc,NaN),x.forEach(function(k,M){var D=w.program.variableNames[M],R=w.uniformLocations[D],O=w.uniformLocations["offset"+D];if(R!=null)if(k.isUniform)if(Me(k.shape)<2)b.gl.uniform1f(R,k.uniformValues[0]);else{var P=k.uniformValues;P instanceof Float32Array||(P=new Float32Array(P)),b.gl.uniform1fv(R,P)}else k.texData.slice!=null&&O!=null&&b.gl.uniform1i(O,k.texData.slice.flatOffset),b.setInputMatrixTexture(k.texData.texture,R,M)}),E!=null&&E(b,w.webGLProgram),b.executeProgram()}(this.gpgpu,g,f,h,o),d.forEach(function(b){return s.disposeData(b.dataId)}),m&&(p=this.endTimer(p),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(p)})),!ie().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&a===!1){var y=this.unpackTensor(u);return this.disposeData(u.dataId),y}return u},n.prototype.compileAndRun=function(e,r,i,o,a){a===void 0&&(a=!1),i=i||r[0].dtype;var s=this.runWebGLProgram(e,r,i,o,a);return K.makeTensorFromDataId(s.dataId,s.shape,s.dtype)},n.prototype.getAndSaveBinary=function(e,r){return e in this.binaryCache||(this.binaryCache[e]=r()),this.binaryCache[e]},n.prototype.getTextureManager=function(){return this.textureManager},n.prototype.dispose=function(){this.disposed||(this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.fromPixels2DContext!=null&&this.fromPixels2DContext.canvas.remove&&this.fromPixels2DContext.canvas.remove(),this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},n.prototype.floatPrecision=function(){var e=this;return this.floatPrecisionValue==null&&(this.floatPrecisionValue=ee(function(){if(!ie().get("WEBGL_RENDER_FLOAT32_ENABLED")){var r=ie().getBool("DEBUG");ie().set("DEBUG",!1);var i=e.abs(ke(1e-8)).dataSync()[0];if(ie().set("DEBUG",r),i>0)return 32}return 16})),this.floatPrecisionValue},n.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},n.prototype.uploadToGPU=function(e){var r,i=this.texData.get(e),o=i.shape,a=i.dtype,s=i.values,u=i.texture,l=i.usage,c=i.isPacked;if(u==null){var d,f=this.activeTimers!=null;f&&(d=Di());var p=i.texShape;if(p==null&&(p=NM(o,c),i.texShape=p),s!=null){var h=hm(o),v=void 0,g=p[1],m=p[0],y=s instanceof Uint8Array;c?(g=(r=np(p[0],p[1]))[0],m=r[1],v=new bG(h,[m,g],y)):v=new yG(h,[m,g],y);var b=this.makeTensorInfo([m,g],a);this.texData.get(b.dataId).usage=y?qr.PIXELS:qr.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(b.dataId),g,m,s);var w=this.runWebGLProgram(v,[b],a,null,!0),x=this.texData.get(w.dataId);i.texture=x.texture,i.texShape=x.texShape,i.isPacked=x.isPacked,i.usage=x.usage,this.disposeData(b.dataId),this.texData.delete(w.dataId),i.values=null,f&&(this.uploadWaitMs+=Di()-d)}else{var C=this.acquireTexture(p,l,a,c);i.texture=C}}},n.prototype.convertAndCacheOnCPU=function(e,r){var i=this.texData.get(e),o=i.dtype;return this.releaseGPUData(e),r!=null&&(i.values=function(a,s){if(s==="float32"||s==="complex64")return a;if(s==="int32"||s==="bool"){for(var u=s==="int32"?new Int32Array(a.length):new Uint8Array(a.length),l=0;l<u.length;++l)u[l]=Math.round(a[l]);return u}throw new Error("Unknown dtype "+s)}(r,o)),i.values},n.prototype.acquireTexture=function(e,r,i,o){if(this.numBytesInGPU+=this.computeBytes(e,i),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var a=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: "+a+" MB, most likely due to a memory leak")}return this.textureManager.acquireTexture(e,r,o)},n.prototype.computeBytes=function(e,r){return e[0]*e[1]*HS(r)},n}(pE);sM()&&K.registerBackend("webgl",function(){return new DP},2);var SE=X({square_:function(t){var n=V(t,"x","square"),e=[n];return K.runKernelFunc(function(r,i){return i([n]),r.square(n)},{x:n},function(r,i){var o=i[0];return{x:function(){return r.mul(o.toFloat().mul(2))}}},"Square",{},e,[])}}),ss=X({abs_:function(t){var n=V(t,"x","abs");return n.dtype==="complex64"?K.runKernelFunc(function(e){return e.complexAbs(n)},{$x:n}):K.runKernelFunc(function(e,r){var i=e.abs(n);return r([n]),i},{x:n},function(e,r){var i=r[0];return{x:function(){return e.mul(i.toFloat().step(-1))}}},"Abs")}}),EE=X({acos_:function(t){var n=V(t,"x","acos");return K.runKernelFunc(function(e,r){var i=e.acos(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return e.divStrict(ke(1).sub(i.toFloat().square()).sqrt()).neg()}}})}}),CE=X({acosh_:function(t){var n=V(t,"x","acosh");return K.runKernelFunc(function(e,r){var i=e.acosh(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return e.divStrict(i.toFloat().square().sub(1).sqrt())}}})}}),RE=X({asin_:function(t){var n=V(t,"x","asin");return K.runKernelFunc(function(e,r){var i=e.asin(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return e.divStrict(ke(1).sub(i.toFloat().square()).sqrt())}}})}}),TE=X({asinh_:function(t){var n=V(t,"x","asinh");return K.runKernelFunc(function(e,r){var i=e.asinh(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return e.divStrict(ke(1).add(i.toFloat().square()).sqrt())}}})}}),NE=X({atan_:function(t){var n=V(t,"x","atan");return K.runKernelFunc(function(e,r){var i=e.atan(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return e.div(i.toFloat().square().add(1))}}})}}),kE=X({atanh_:function(t){var n=V(t,"x","atanh");return K.runKernelFunc(function(e,r){var i=e.atanh(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return e.div(ke(1).sub(i.toFloat().square()))}}})}}),IE=X({ceil_:function(t){var n=V(t,"x","ceil");return K.runKernelFunc(function(e){return e.ceil(n)},{$x:n},function(e){return{$x:function(){return dt(e)}}})}}),br=X({clipByValue_:function(t,n,e){var r=V(t,"x","clipByValue");return U(n<=e,function(){return"Error in clip: min ("+n+") must be less than or equal to max ("+e+")."}),K.runKernelFunc(function(i,o){var a=i.clip(r,n,e);return o([r]),a},{$x:r},function(i,o){var a=o[0];return{$x:function(){return i.where(a.greaterEqual(n).logicalAnd(a.lessEqual(e)),dt(i))}}})}}),_E=X({cos_:function(t){var n=V(t,"x","cos");return K.runKernelFunc(function(e,r){var i=e.cos(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return i.toFloat().sin().neg().mul(e)}}})}}),AE=X({cosh_:function(t){var n=V(t,"x","cosh");return K.runKernelFunc(function(e,r){var i=e.cosh(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return i.toFloat().sinh().mulStrict(e)}}})}}),OE=X({erf_:function(t){var n=V(t,"x","erf");return U(n.dtype==="int32"||n.dtype==="float32",function(){return"Input dtype must be `int32` or `float32`."}),n.dtype==="int32"&&(n=n.toFloat()),K.runKernelFunc(function(e,r){var i=e.erf(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return e.mul(i.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}})}}),DE=X({exp_:function(t){var n=V(t,"x","exp");return K.runKernelFunc(function(e,r){var i=e.exp(n);return r([i]),i},{$x:n},function(e,r){return{$x:function(){return e.mulStrict(r[0])}}})}}),ME=X({expm1_:function(t){var n=V(t,"x","expm1");return K.runKernelFunc(function(e,r){var i=e.expm1(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return e.mul(i.exp())}}})}}),Ig=X({floor_:function(t){var n=V(t,"x","floor");return K.runKernelFunc(function(e){return e.floor(n)},{$x:n},function(e){return{$x:function(){return dt(e)}}})}}),na=X({log_:function(t){var n=V(t,"x","log");return K.runKernelFunc(function(e,r){var i=e.log(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return e.div(i.toFloat())}}})}}),PE=X({log1p_:function(t){var n=V(t,"x","log1p");return K.runKernelFunc(function(e,r){var i=e.log1p(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return e.div(i.add(1))}}})}}),MP=X({logSigmoid_:function(t){var n=V(t,"x","logSigmoid");return K.runKernelFunc(function(e,r){var i=e.softplus(n.neg()).neg();return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return e.mul(i.neg().sigmoid())}}})}}),Tu=X({neg_:function(t){var n=V(t,"x","neg");return K.runKernelFunc(function(e){return e.neg(n)},{$x:n},function(e){return{$x:function(){return e.neg()}}})}}),LE=X({reciprocal_:function(t){var n=V(t,"x","reciprocal");return K.runKernelFunc(function(e,r){var i=e.reciprocal(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return e.div(i.square().neg())}}})}}),FE=X({round_:function(t){var n=V(t,"x","round");return K.runKernelFunc(function(e){return e.round(n)},{$x:n},function(e){return{$x:function(){return dt(e)}}})}}),_g=X({rsqrt_:function(t){var n=V(t,"x","rsqrt");return K.runKernelFunc(function(e,r){var i=e.rsqrt(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return e.div(i.pow(1.5).mul(2)).neg()}}})}}),Ag=X({sigmoid_:function(t){var n=V(t,"x","sigmoid");return K.runKernelFunc(function(e,r){var i=e.sigmoid(n);return r([i]),i},{x:n},function(e,r){var i=r[0];return{x:function(){return e.mul(i.mul(ke(1).sub(i)))}}},"Sigmoid")}}),zE=X({sign_:function(t){var n=V(t,"x","sign");return K.runKernelFunc(function(e){return e.sign(n)},{$x:n},function(e){return{$x:function(){return dt(e)}}})}}),PP=X({isNaN_:function(t){var n=V(t,"x","isNaN");return K.runKernelFunc(function(e){return e.isNaN(n)},{$x:n},function(e){return{$x:function(){return dt(e)}}})}}),LP=X({isInf_:function(t){var n=V(t,"x","isInf");return K.runKernelFunc(function(e){return e.isInf(n)},{$x:n},function(e){return{$x:function(){return dt(e)}}})}}),FP=X({isFinite_:function(t){var n=V(t,"x","isFinite");return K.runKernelFunc(function(e){return e.isFinite(n)},{$x:n},function(e){return{$x:function(){return dt(e)}}})}}),BE=X({sin_:function(t){var n=V(t,"x","sin");return K.runKernelFunc(function(e,r){var i=e.sin(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return i.toFloat().cos().mul(e)}}})}}),jE=X({sinh_:function(t){var n=V(t,"x","sinh");return K.runKernelFunc(function(e,r){var i=e.sinh(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return i.toFloat().cosh().mulStrict(e)}}})}}),sp=X({softplus_:function(t){var n=V(t,"x","softplus");return K.runKernelFunc(function(e,r){var i=e.softplus(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return e.mul(i.sigmoid())}}})}}),up=X({sqrt_:function(t){var n=V(t,"x","sqrt");return K.runKernelFunc(function(e,r){var i=e.sqrt(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return e.div(i.toFloat().sqrt().mul(2))}}})}}),zP=X({step_:function(t,n){n===void 0&&(n=0);var e=V(t,"x","step");return K.runKernelFunc(function(r){return r.step(e,n)},{$x:e},function(r){return{$x:function(){return dt(r)}}})}}),VE=X({tan_:function(t){var n=V(t,"x","tan");return K.runKernelFunc(function(e,r){var i=e.tan(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return e.div(i.cos().square())}}})}}),Og=X({tanh_:function(t){var n=V(t,"x","tanh");return K.runKernelFunc(function(e,r){var i=e.tanh(n);return r([i]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return ke(1).sub(i.square()).mulStrict(e)}}})}});function BP(t,n,e,r,i,o){var a,s,u=V(t,"x","batchNorm"),l=V(n,"mean","batchNorm"),c=V(e,"variance","batchNorm");return i!=null&&(a=V(i,"scale","batchNorm")),r!=null&&(s=V(r,"offset","batchNorm")),U(u.rank===2,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."}),U(l.rank===2||l.rank===1,function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+l.rank+"."}),U(c.rank===2||c.rank===1,function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+c.rank+"."}),a!=null&&U(a.rank===2||a.rank===1,function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+a.rank+"."}),s!=null&&U(s.rank===2||s.rank===1,function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+s.rank+"."}),lp(u,l,c,s,a,o)}function jP(t,n,e,r,i,o){var a,s,u=V(t,"x","batchNorm"),l=V(n,"mean","batchNorm"),c=V(e,"variance","batchNorm");return i!=null&&(a=V(i,"scale","batchNorm")),r!=null&&(s=V(r,"offset","batchNorm")),U(u.rank===3,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."}),U(l.rank===3||l.rank===1,function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+l.rank+"."}),U(c.rank===3||c.rank===1,function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+c.rank+"."}),a!=null&&U(a.rank===3||a.rank===1,function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+a.rank+"."}),s!=null&&U(s.rank===3||s.rank===1,function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+s.rank+"."}),lp(u,l,c,s,a,o)}function VP(t,n,e,r,i,o){var a,s,u=V(t,"x","batchNorm"),l=V(n,"mean","batchNorm"),c=V(e,"variance","batchNorm");return i!=null&&(a=V(i,"scale","batchNorm")),r!=null&&(s=V(r,"offset","batchNorm")),U(u.rank===4,function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+u.rank+"."}),U(l.rank===4||l.rank===1,function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+l.rank+"."}),U(c.rank===4||c.rank===1,function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+c.rank+"."}),a!=null&&U(a.rank===4||a.rank===1,function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+a.rank+"."}),s!=null&&U(s.rank===4||s.rank===1,function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+s.rank+"."}),lp(u,l,c,s,a,o)}function lp(t,n,e,r,i,o){o==null&&(o=.001);var a,s,u,l=V(t,"x","batchNorm"),c=V(n,"mean","batchNorm"),d=V(e,"variance","batchNorm");i!=null&&(a=V(i,"scale","batchNorm")),r!=null&&(s=V(r,"offset","batchNorm")),U(c.rank===d.rank,function(){return"Batch normalization gradient requires mean and variance to have equal ranks."}),U(s==null||c.rank===s.rank,function(){return"Batch normalization gradient requires mean and offset to have equal ranks."}),U(a==null||c.rank===a.rank,function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}),u=l.rank===0||l.rank===1?l.as4D(1,1,1,l.size):l.rank===2?l.as4D(1,1,l.shape[0],l.shape[1]):l.rank===3?l.as4D(1,l.shape[0],l.shape[1],l.shape[2]):l;var f=[l,c,d,a];return K.runKernelFunc(function(p,h){var v=p.batchNormalization(u,Sh(c),Sh(d),o,Sh(a),Sh(s));return h([l,c,d,a]),v},{x:l,mean:c,variance:d,scale:a,offset:s},function(p,h){var v=h,g=v[0],m=v[1],y=v[2],b=v[3],w=b??ke(1),x=Rn(m.shape,u.shape),C=[];if(m.rank===1){for(var E=0;E<u.shape.length-1;++E)C.push(u.shape[E]);C.push(1)}var S=g.sub(m),N=p.mul(w),k=_g(y.add(ke(o))),M=k.mul(k).mul(k).mul(ke(-.5));return{x:function(){return m.rank===1?p.mul(Qa(k.as4D(1,1,1,m.shape[0]),C)).mul(w).reshape(g.shape):p.mul(k).mul(w).reshape(g.shape)},mean:function(){var D=k.mul(ke(-1)).mul(N);return m.rank===1&&(D=D.sum(x)),D.reshape(m.shape)},variance:function(){var D=M.mul(S).mul(N);return m.rank===1&&(D=D.sum(x)),D.reshape(m.shape)},scale:function(){var D=S.mul(k),R=p.mul(D);return m.rank===1&&(R=R.sum(x)),R.reshape(m.shape)},offset:function(){var D=p;return m.rank===1&&(D=D.sum(x)),D.reshape(m.shape)}}},"BatchNormalization",{varianceEpsilon:o},f).reshape(l.shape)}function Sh(t){return t==null?null:t.rank===0?t.as1D():t.rank===1?t:t.rank===2?t.as4D(1,1,t.shape[0],t.shape[1]):t.rank===3?t.as4D(1,t.shape[0],t.shape[1],t.shape[2]):t}function Dg(){gg("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon")}var $P=X({batchNormalization2d_:function(t,n,e,r,i,o){return r===void 0&&(r=.001),Dg(),BP(t,n,e,o,i,r)}}),UP=X({batchNormalization3d_:function(t,n,e,r,i,o){return r===void 0&&(r=.001),Dg(),jP(t,n,e,o,i,r)}}),WP=X({batchNormalization4d_:function(t,n,e,r,i,o){return r===void 0&&(r=.001),Dg(),VP(t,n,e,o,i,r)}}),HP=X({batchNormalization_:function(t,n,e,r,i,o){return r===void 0&&(r=.001),Dg(),lp(t,n,e,o,i,r)}}),$E=X({batchNorm_:lp}),UE=X({batchNorm2d_:BP}),WE=X({batchNorm3d_:jP}),HE=X({batchNorm4d_:VP}),ua=X({logicalAnd_:function(t,n){var e=V(t,"a","logicalAnd","bool"),r=V(n,"b","logicalAnd","bool");return ut(e.shape,r.shape),K.runKernelFunc(function(i){return i.logicalAnd(e,r)},{$a:e,$b:r})}}),GE=X({logicalNot_:function(t){var n=V(t,"x","logicalNot","bool");return K.runKernelFunc(function(e){return e.logicalNot(n)},{$x:n})}}),Mg=X({logicalOr_:function(t,n){var e=V(t,"a","logicalOr","bool"),r=V(n,"b","logicalOr","bool");return ut(e.shape,r.shape),K.runKernelFunc(function(i){return i.logicalOr(e,r)},{$a:e,$b:r})}}),GP=X({logicalXor_:function(t,n){var e=V(t,"a","logicalXor","bool"),r=V(n,"b","logicalXor","bool");return ut(e.shape,r.shape),Mg(t,n).logicalAnd(ua(t,n).logicalNot())}}),ra=X({where_:function(t,n,e){var r=V(n,"a","where"),i=V(e,"b","where"),o=V(t,"condition","where","bool");return gt(r.shape,i.shape,"Error in where: "),o.rank===1?U(o.shape[0]===r.shape[0],function(){return"The first dimension of `a` must match the size of `condition`."}):gt(o.shape,i.shape,"Error in where: "),K.runKernelFunc(function(a,s){var u=a.select(o,r,i);return s([o]),u},{$condition:o,$a:r,$b:i},function(a,s){var u=s[0];return{$condition:function(){return dt(u).toFloat()},$a:function(){return a.mul(u.cast(a.dtype))},$b:function(){return a.mul(u.logicalNot().cast(a.dtype))}}})}}),Pg=function(t){return Ae(this,void 0,void 0,function(){var n,e,r;return Oe(this,function(i){switch(i.label){case 0:return[4,(n=V(t,"condition","whereAsync","bool")).data()];case 1:return e=i.sent(),r=yE(n.shape,e),t!==n&&n.dispose(),[2,r]}})})},at=X({add_:function(t,n){var e,r=V(t,"a","add"),i=V(n,"b","add");e=dn(r,i),r=e[0],i=e[1];var o=ut(r.shape,i.shape);return K.runKernelFunc(function(a){return a.add(r,i)},{a:r,b:i},function(a){return{a:function(){var s=a,u=Rn(r.shape,o);return u.length>0&&(s=s.sum(u)),s.reshape(r.shape)},b:function(){var s=a,u=Rn(i.shape,o);return u.length>0&&(s=s.sum(u)),s.reshape(i.shape)}}},"Add")}}),qE=X({addN_:function(t){U(Array.isArray(t),function(){return"The argument passed to tf.addN() must be a list of tensors"}),U(t.length>=1,function(){return"Must pass at least one tensor to tf.addN(), but got "+t.length});var n=t.map(function(i,o){return V(i,"tensors"+o,"addN")}),e=n[0];n.forEach(function(i){if(i.dtype!==e.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),n.forEach(function(i){if(!Bn(i.shape,e.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});var r=n;return K.runKernelFunc(function(i){return i.addN(n)},r,function(i){var o={};return n.forEach(function(a,s){o[s]=function(){return i.clone()}}),o})}}),qP=X({addStrict_:function(t,n){var e=V(t,"a","addStrict"),r=V(n,"b","addStrict");return gt(e.shape,r.shape,"Error in addStrict: "),e.add(r)}}),KE=X({atan2_:function(t,n){var e,r=V(t,"a","atan2"),i=V(n,"b","atan2");e=dn(r,i),r=e[0],i=e[1];var o=ut(r.shape,i.shape);return K.runKernelFunc(function(a,s){var u=a.atan2(r,i);return s([r,i]),u},{$a:r,$b:i},function(a,s){var u=s[0],l=s[1];return{$a:function(){var c=at(u.square(),l.square()),d=a.mul(l.div(c)),f=Rn(u.shape,o);return f.length>0&&(d=d.sum(f)),d.reshape(u.shape)},$b:function(){var c=at(u.square(),l.square()),d=Tu(a.mul(u.div(c))),f=Rn(l.shape,o);return f.length>0&&(d=d.sum(f)),d.reshape(l.shape)}}})}}),cr=X({div_:function(t,n){var e,r=V(t,"a","div"),i=V(n,"b","div");if(e=dn(r,i),r=e[0],i=e[1],r.dtype==="int32"&&i.dtype==="int32")return Lg(r,i);var o=ut(r.shape,i.shape);return K.runKernelFunc(function(a,s){var u=a.realDivide(r,i);return s([r,i]),u},{a:r,b:i},function(a,s){var u=s[0],l=s[1];return{a:function(){var c=a.div(l.toFloat()),d=Rn(u.shape,o);return d.length>0?c.sum(d).reshape(u.shape):c},b:function(){var c=a.mul(u.toFloat()),d=Rn(l.shape,o);d.length>0&&(c=c.sum(d).reshape(l.shape));var f=l.square();return c.div(f.toFloat()).neg()}}},"Div")}}),KP=X({divStrict_:function(t,n){var e=V(t,"a","div"),r=V(n,"b","div");return gt(e.shape,r.shape,"Error in divideStrict: "),e.div(r)}}),Lg=X({floorDiv_:function(t,n){var e,r=V(t,"a","floorDiv"),i=V(n,"b","floorDiv");e=dn(r,i),r=e[0],i=e[1];var o=ut(r.shape,i.shape);return K.runKernelFunc(function(a,s){var u=a.floorDiv(r,i);return s([r,i]),u},{$a:r,$b:i},function(a,s){var u=s[0],l=s[1];return{$a:function(){var c=a.div(l.toFloat()),d=Rn(u.shape,o);return d.length>0?c.sum(d).reshape(u.shape):c},$b:function(){var c=a.mul(u.toFloat()),d=Rn(l.shape,o);d.length>0&&(c=c.sum(d).reshape(l.shape));var f=l.square();return c.div(f.toFloat()).neg()}}})}}),Ro=X({maximum_:function(t,n){var e,r=V(t,"a","maximum"),i=V(n,"b","maximum");return e=dn(r,i),r=e[0],i=e[1],r.dtype==="bool"&&(r=r.toInt(),i=i.toInt()),ut(r.shape,i.shape),K.runKernelFunc(function(o,a){var s=o.maximum(r,i);return a([r,i]),s},{$a:r,$b:i},function(o,a){var s=a[0],u=a[1];return{$a:function(){return o.mul(s.greaterEqual(u).toFloat())},$b:function(){return o.mul(s.less(u).toFloat())}}})}}),XP=X({maximumStrict_:function(t,n){var e=V(t,"a","maximumStrict"),r=V(n,"b","maximumStrict");return gt(e.shape,r.shape,"Error in maximumStrict: "),e.maximum(r)}}),kc=X({minimum_:function(t,n){var e,r=V(t,"a","minimum"),i=V(n,"b","minimum");return e=dn(r,i),r=e[0],i=e[1],r.dtype==="bool"&&(r=r.toInt(),i=i.toInt()),ut(r.shape,i.shape),K.runKernelFunc(function(o,a){var s=o.minimum(r,i);return a([r,i]),s},{$a:r,$b:i},function(o,a){var s=a[0],u=a[1];return{$a:function(){return o.mul(s.lessEqual(u).toFloat())},$b:function(){return o.mul(s.greater(u).toFloat())}}})}}),YP=X({minimumStrict_:function(t,n){var e=V(t,"a","minimumStrict"),r=V(n,"b","minimumStrict");return gt(e.shape,r.shape,"Error in minimumStrict: "),e.minimum(r)}}),XE=X({mod_:function(t,n){var e,r=V(t,"a","mod"),i=V(n,"b","mod");e=dn(r,i),r=e[0],i=e[1];var o=ut(r.shape,i.shape);return K.runKernelFunc(function(a,s){var u=a.mod(r,i);return s([r,i]),u},{$a:r,$b:i},function(a,s){var u=s[0],l=s[1];return{$a:function(){var c=Rn(u.shape,o);return c.length>0?a.sum(c).reshape(u.shape):a},$b:function(){var c=a.mul(u.div(l).floor().neg()),d=Rn(l.shape,o);return d.length>0?c.sum(d).reshape(l.shape):c}}})}}),JP=X({modStrict_:function(t,n){var e=V(t,"a","modStrict"),r=V(n,"b","modStrict");return gt(e.shape,r.shape,"Error in modStrict: "),e.mod(r)}}),He=X({mul_:function(t,n){var e,r=V(t,"a","mul"),i=V(n,"b","mul");e=dn(r,i),r=e[0],i=e[1];var o=ut(r.shape,i.shape);return K.runKernelFunc(function(a,s){var u=a.multiply(r,i);return s([r,i]),u},{a:r,b:i},function(a,s){var u=s[0],l=s[1];return{a:function(){var c=a.mul(l.toFloat()),d=Rn(u.shape,o);return d.length>0?c.sum(d).reshape(u.shape):c},b:function(){var c=a.mul(u.toFloat()),d=Rn(l.shape,o);return d.length>0?c.sum(d).reshape(l.shape):c}}},"Mul")}}),Fg=X({mulStrict_:function(t,n){var e=V(t,"a","mul"),r=V(n,"b","mul");return gt(e.shape,r.shape,"Error in multiplyStrict: "),e.mul(r)}}),tc=X({pow_:function(t,n){var e=V(t,"base","pow"),r=V(n,"exp","pow"),i=ut(e.shape,r.shape);return t=e.cast(bn(e.dtype,r.dtype)),n=r.cast(bn(e.dtype,r.dtype)),K.runKernelFunc(function(o,a){var s=o.pow(e,r);return a([e,r,s]),s},{$base:e,$exp:r},function(o,a){var s=a[0],u=a[1],l=a[2];return{$base:function(){var c=u.toFloat(),d=o.mul(c.mul(s.pow(c.sub(ke(1))))),f=Rn(s.shape,i);return f.length>0&&(d=d.sum(f)),d.reshape(s.shape)},$exp:function(){var c=s.greater(0),d=s.log().where(c,dt(s)),f=o.mul(l.mul(d)),p=Rn(u.shape,i);return p.length>0&&(f=f.sum(p)),f.reshape(u.shape)}}})}}),QP=X({powStrict_:function(t,n){return gt(t.shape,n.shape,"Error in powStrict: "),t.pow(n)}}),YE=X({squaredDifference_:function(t,n){var e,r=V(t,"a","squaredDifference"),i=V(n,"b","squaredDifference");return e=dn(r,i),r=e[0],i=e[1],ut(r.shape,i.shape),K.runKernelFunc(function(o,a){var s=o.squaredDifference(r,i);return a([r,i]),s},{$a:r,$b:i},function(o,a){var s=a[0],u=a[1],l=ke(2);return{$a:function(){return o.mul(s.sub(u).mul(l))},$b:function(){return o.mul(u.sub(s).mul(l))}}})}}),ZP=X({squaredDifferenceStrict_:function(t,n){var e=V(t,"a","squaredDifferenceStrict"),r=V(n,"b","squaredDifferenceStrict");return gt(e.shape,r.shape,"Error in squaredDifferenceStrict: "),e.squaredDifference(r)}}),jn=X({sub_:function(t,n){var e,r=V(t,"a","sub"),i=V(n,"b","sub");e=dn(r,i),r=e[0],i=e[1];var o=ut(r.shape,i.shape);return K.runKernelFunc(function(a){return a.subtract(r,i)},{a:r,b:i},function(a){return{a:function(){var s=a,u=Rn(r.shape,o);return u.length>0&&(s=s.sum(u)),s.reshape(r.shape)},b:function(){var s=a,u=Rn(i.shape,o);return u.length>0&&(s=s.sum(u)),s.neg().reshape(i.shape)}}},"Sub")}}),eL=X({subStrict_:function(t,n){var e=V(t,"a","subStrict"),r=V(n,"b","subStrict");return gt(e.shape,r.shape,"Error in subStrict: "),e.sub(r)}}),Nu=X({equal_:function(t,n){var e,r=V(t,"a","equal"),i=V(n,"b","equal");return e=dn(r,i),r=e[0],i=e[1],ut(r.shape,i.shape),K.runKernelFunc(function(o){return o.equal(r,i)},{$a:r,$b:i})}}),tL=X({equalStrict_:function(t,n){var e=V(t,"a","equalStrict"),r=V(n,"b","equalStrict");return gt(e.shape,r.shape,"Error in equalStrict: "),e.equal(r)}}),Ic=X({greater_:function(t,n){var e,r=V(t,"a","greater"),i=V(n,"b","greater");return e=dn(r,i),r=e[0],i=e[1],ut(r.shape,i.shape),K.runKernelFunc(function(o){return o.greater(r,i)},{$a:r,$b:i})}}),cp=X({greaterEqual_:function(t,n){var e,r=V(t,"a","greaterEqual"),i=V(n,"b","greaterEqual");return e=dn(r,i),r=e[0],i=e[1],ut(r.shape,i.shape),K.runKernelFunc(function(o,a){var s=o.greaterEqual(r,i);return a([r,i]),s},{$a:r,$b:i},function(o,a){var s=a[0],u=a[1];return{$a:function(){return dt(s)},$b:function(){return dt(u)}}})}}),nL=X({greaterEqualStrict_:function(t,n){var e=V(t,"a","greaterEqualStrict"),r=V(n,"b","greaterEqualStrict");return gt(e.shape,r.shape,"Error in greaterEqualStrict: "),e.greaterEqual(r)}}),rL=X({greaterStrict_:function(t,n){var e=V(t,"a","greaterStrict"),r=V(n,"b","greaterStrict");return gt(e.shape,r.shape,"Error in greaterStrict: "),e.greater(r)}}),JE=X({less_:function(t,n){var e,r=V(t,"a","less"),i=V(n,"b","less");return e=dn(r,i),r=e[0],i=e[1],ut(r.shape,i.shape),K.runKernelFunc(function(o){return o.less(r,i)},{$a:r,$b:i})}}),QE=X({lessEqual_:function(t,n){var e,r=V(t,"a","lessEqual"),i=V(n,"b","lessEqual");return e=dn(r,i),r=e[0],i=e[1],ut(r.shape,i.shape),K.runKernelFunc(function(o){return o.lessEqual(r,i)},{$a:r,$b:i})}}),iL=X({lessEqualStrict_:function(t,n){var e=V(t,"a","lessEqualStrict"),r=V(n,"b","lessEqualStrict");return gt(e.shape,r.shape,"Error in lessEqualStrict: "),e.lessEqual(r)}}),oL=X({lessStrict_:function(t,n){var e=V(t,"a","lessStrict"),r=V(n,"b","lessStrict");return gt(e.shape,r.shape,"Error in lessStrict: "),e.less(r)}}),nc=X({notEqual_:function(t,n){var e,r=V(t,"a","notEqual"),i=V(n,"b","notEqual");return e=dn(r,i),r=e[0],i=e[1],ut(r.shape,i.shape),K.runKernelFunc(function(o){return o.notEqual(r,i)},{$a:r,$b:i})}}),aL=X({notEqualStrict_:function(t,n){var e=V(t,"a","notEqualStrict"),r=V(n,"b","notEqualStrict");return gt(e.shape,r.shape,"Error in notEqualStrict: "),e.notEqual(r)}});function ZN(t,n){for(var e=[],r=t;r<n;++r)e.push(r);return e}function ek(t){for(var n=[],e=0;e<t.length;++e)for(var r=0;r<t[e].length;++r)n.push(t[e][r]);return n}var _c=X({gather_:function(t,n,e){e===void 0&&(e=0);var r=V(t,"x","gather"),i=V(n,"indices","gather","int32");e=Vn(e,r.shape)[0];var o=function(a,s,u){for(var l=a.shape[u],c=[],d=1,f=1,p=0;p<u;p++)c.push(a.shape[p]),d*=a.shape[p];for(p=0;p<s.rank;p++)c.push(s.shape[p]);for(p=u+1;p<a.rank;p++)c.push(a.shape[p]),f*=a.shape[p];return{batchSize:d,sliceSize:f,dimSize:l,outputShape:c}}(r,i,e);return K.runKernelFunc(function(a,s){var u=a.gather(r,i.flatten(),e);return s([i]),u},{$x:r},function(a,s){var u=s[0];return{$x:function(){var l=r.shape,c=u.size,d=l.slice(0,e),f=d.length,p=l.slice(e,l.length).slice(1),h=p.length,v=ZN(0,f),g=ZN(f+1,f+1+h),m=ek([d,[c],p]),y=a.reshape(m),b=u.reshape([c]),w=ek([[f],v,g]),x=y.transpose(w),C=ZE(x,b,r.shape[e]),E=yg(w);return C=C.transpose(E)}}}).reshape(o.outputShape)}}),ZE=X({unsortedSegmentSum_:function(t,n,e){var r=V(t,"x","unsortedSegmentSum"),i=V(n,"segmentIds","unsortedSegmentSum","int32");return U(nn(e),function(){return"numSegments must be of dtype int"}),K.runKernelFunc(function(o,a){var s=o.unsortedSegmentSum(r,i,e);return a([i]),s},{$x:r},function(o,a){var s=a[0];return{$x:function(){return function(u,l){for(var c=Ro(l,dt(l)),d=_c(u,c),f=cp(l,ke(0,"int32")),p=d.rank-f.rank,h=0;h<p;++h)f=Hr(f,h+1);f=ua(f,Co(d.shape,"bool"));var v=dt(d);return ra(f,d,v)}(o,s)}}})}}),sL=function(t,n,e){return Ae(this,void 0,void 0,function(){var r,i,o,a,s,u,l,c,d,f,p,h,v;return Oe(this,function(g){switch(g.label){case 0:for(r=V(t,"tensor","boolMask"),i=V(n,"mask","boolMask","bool"),o=e??0,a=i.rank,s=r.shape,U(a>0,function(){return"mask cannot be scalar"}),gt(s.slice(o,o+a),i.shape,"mask's shape must match the first K dimensions of tensor's shape,"),u=1,l=o;l<o+a;l++)u*=s[l];return c=s.slice(0,o).concat([u],s.slice(o+a)),d=r.reshape(c),f=i.reshape([-1]),[4,Pg(f)];case 1:return p=g.sent(),h=p.squeeze([1]),v=_c(d,h,o),t!==r&&r.dispose(),n!==i&&i.dispose(),h.dispose(),d.dispose(),f.dispose(),p.dispose(),[2,v]}})})};function uL(t,n,e,r,i,o,a){o===void 0&&(o="NHWC"),U(t.length===n.rank,function(){return"Length of inShape ("+t.length+") and rank of dy ("+n.rank+") must match"});var s=t,u=n,l=!1;n.rank===3&&(l=!0,u=n.as4D(1,n.shape[0],n.shape[1],n.shape[2]),s=[1,t[0],t[1],t[2]]),U(s.length===4,function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+s.length+"."}),U(u.rank===4,function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+u.rank}),U(e.rank===4,function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+e.rank});var c=o==="NHWC"?s[3]:s[1],d=o==="NHWC"?u.shape[3]:u.shape[1];U(c===e.shape[2],function(){return"Error in conv2dDerInput: depth of input ("+c+") must match input depth for filter "+e.shape[2]+"."}),U(d===e.shape[3],function(){return"Error in conv2dDerInput: depth of output ("+d+") must match output depth for filter "+e.shape[3]+"."}),a!=null&&U(nn(i),function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+i+"."});var f=kg(o),p=bs(s,e.shape,r,1,i,a,!1,f),h=K.runKernelFunc(function(v,g){var m=v.conv2dDerInput(u,e,p);return g([e,u]),m},{dy4D:u,filter:e},function(v,g){var m=g[0],y=g[1];return{dy4D:function(){return ku(v,m,r,i,o,1,a)},filter:function(){return eC(v,y,m.shape,r,i,o,a)}}});return l?h.as3D(h.shape[1],h.shape[2],h.shape[3]):h}function r1(t){var n=function(o){return typeof o=="number"?[o,o,o]:o.length===2?[o[0],o[1],1]:o}(t),e=n[0],r=n[1],i=n[2];return e===1&&r===1&&i===1}function lL(t,n,e,r,i){U(t.length===n.rank,function(){return"Length of inShape ("+t.length+") and rank of dy ("+n.rank+") must match"});var o=t,a=n,s=!1;n.rank===4&&(s=!0,a=n.as5D(1,n.shape[0],n.shape[1],n.shape[2],n.shape[3]),o=[1,t[0],t[1],t[2],t[3]]);var u=o[4],l=a.shape[4];U(o.length===5,function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+o.length+"."}),U(a.rank===5,function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+a.rank}),U(e.rank===5,function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+e.rank}),U(u===e.shape[3],function(){return"Error in conv3dDerInput: depth of input ("+u+") must match input depth for filter "+e.shape[3]+"."}),U(l===e.shape[4],function(){return"Error in conv3dDerInput: depth of output ("+l+") must match output depth for filter "+e.shape[4]+"."});var c=Ff(o,e.shape,r,1,i),d=K.runKernelFunc(function(f){return f.conv3dDerInput(a,e,c)},{dy5D:a});return s?d.as4D(d.shape[1],d.shape[2],d.shape[3],d.shape[4]):d}var zg=X({conv1d_:function(t,n,e,r,i,o,a){i===void 0&&(i="NWC"),o===void 0&&(o=1);var s=V(t,"x","conv1d"),u=V(n,"filter","conv1d"),l=s,c=!1;s.rank===2&&(c=!0,l=s.as3D(1,s.shape[0],s.shape[1])),U(l.rank===3,function(){return"Error in conv1d: input must be rank 3, but got rank "+l.rank+"."}),U(u.rank===3,function(){return"Error in conv1d: filter must be rank 3, but got rank "+u.rank+"."}),a!=null&&U(nn(r),function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."}),U(l.shape[2]===u.shape[1],function(){return"Error in conv1d: depth of input ("+l.shape[2]+") must match input depth for filter "+u.shape[1]+"."}),U(yr(e,o),function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+e+" and dilation '"+o+"'"}),U(i==="NWC",function(){return"Error in conv1d: got dataFormat of "+i+" but only NWC is currently supported."});var d=u.as4D(1,u.shape[0],u.shape[1],u.shape[2]),f=l.as4D(l.shape[0],1,l.shape[1],l.shape[2]),p=ku(f,d,[1,e],r,"NHWC",[1,o],a);return c?p.as2D(p.shape[2],p.shape[3]):p.as3D(p.shape[0],p.shape[2],p.shape[3])}}),ku=X({conv2d_:function(t,n,e,r,i,o,a){i===void 0&&(i="NHWC"),o===void 0&&(o=[1,1]);var s=V(t,"x","conv2d"),u=V(n,"filter","conv2d"),l=s,c=!1;s.rank===3&&(c=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),U(l.rank===4,function(){return"Error in conv2d: input must be rank 4, but got rank "+l.rank+"."}),U(u.rank===4,function(){return"Error in conv2d: filter must be rank 4, but got rank "+u.rank+"."}),a!=null&&U(nn(r),function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."});var d=i==="NHWC"?l.shape[3]:l.shape[1];U(d===u.shape[2],function(){return"Error in conv2d: depth of input ("+d+") must match input depth for filter "+u.shape[2]+"."}),U(yr(e,o),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+o+"'"});var f=kg(i),p=bs(l.shape,u.shape,e,o,r,a,!1,f),h=K.runKernelFunc(function(v,g){var m=v.conv2d(l,u,p);return g([u,l]),m},{x:l,$filter:u},function(v,g){var m=g,y=m[0],b=m[1];return U(fu(o),function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+o+"'"}),{x:function(){return cL(b.shape,v,y,e,r,i)},$filter:function(){return eC(b,v,y.shape,e,r,i)}}});return c?h.as3D(h.shape[1],h.shape[2],h.shape[3]):h}}),Bg=X({conv3d_:function(t,n,e,r,i,o){i===void 0&&(i="NDHWC"),o===void 0&&(o=[1,1,1]);var a=V(t,"x","conv3d"),s=V(n,"filter","conv3d"),u=a,l=!1;a.rank===4&&(l=!0,u=a.as5D(1,a.shape[0],a.shape[1],a.shape[2],a.shape[3])),U(u.rank===5,function(){return"Error in conv3d: input must be rank 5, but got rank "+u.rank+"."}),U(s.rank===5,function(){return"Error in conv3d: filter must be rank 5, but got rank "+s.rank+"."}),U(u.shape[4]===s.shape[3],function(){return"Error in conv3d: depth of input ("+u.shape[4]+") must match input depth for filter "+s.shape[3]+"."}),U(function(f,p){return r1(f)||r1(p)}(e,o),function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+o+"'"}),U(i==="NDHWC",function(){return"Error in conv3d: got dataFormat of "+i+" but only NDHWC is currently supported."});var c=Ff(u.shape,s.shape,e,o,r),d=K.runKernelFunc(function(f,p){var h=f.conv3d(u,s,c);return p([u,s]),h},{x:u,$filter:s},function(f,p){U(r1(o),function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+o+"'"});var h=p[0],v=p[1];return{x:function(){return lL(h.shape,f,v,e,r)},$filter:function(){return function(g,m,y,b,w){var x=g;g.rank===4&&(x=g.as5D(1,g.shape[0],g.shape[1],g.shape[2],g.shape[3]));var C=m;C.rank===4&&(C=m.as5D(1,m.shape[0],m.shape[1],m.shape[2],m.shape[3])),U(x.rank===5,function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+x.shape+"."}),U(C.rank===5,function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+C.shape+"."}),U(y.length===5,function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+y+"."}),U(x.shape[4]===y[3],function(){return"Error in conv3dDerFilter: depth of input "+x.shape[4]+") must match input depth in filter ("+y[3]+"."}),U(C.shape[4]===y[4],function(){return"Error in conv3dDerFilter: depth of dy ("+C.shape[4]+") must match output depth for filter ("+y[4]+")."});var E=Ff(x.shape,y,b,1,w);return K.runKernelFunc(function(S){return S.conv3dDerFilter(x,C,E)},{x5D:x,dy5D:C})}(h,f,v.shape,e,r)}}});return l?d.as4D(d.shape[1],d.shape[2],d.shape[3],d.shape[4]):d}}),eC=X({conv2dDerFilter_:function(t,n,e,r,i,o,a){o===void 0&&(o="NHWC");var s=t;t.rank===3&&(s=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var u=n;u.rank===3&&(u=n.as4D(1,n.shape[0],n.shape[1],n.shape[2])),U(s.rank===4,function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+s.shape+"."}),U(u.rank===4,function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+u.shape+"."}),U(e.length===4,function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+e+"."});var l=o==="NHWC"?s.shape[3]:s.shape[1],c=o==="NHWC"?u.shape[3]:u.shape[1];U(l===e[2],function(){return"Error in conv2dDerFilter: depth of input "+l+") must match input depth in filter ("+e[2]+"."}),U(c===e[3],function(){return"Error in conv2dDerFilter: depth of dy ("+c+") must match output depth for filter ("+e[3]+")."}),a!=null&&U(nn(i),function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+i+"."});var d=kg(o),f=bs(s.shape,e,r,1,i,a,!1,d);return K.runKernelFunc(function(p){return p.conv2dDerFilter(s,u,f)},{x4D:s,dy4D:u})}}),cL=X({conv2dDerInput_:uL}),Ac=X({depthwiseConv2d_:function(t,n,e,r,i,o,a){o===void 0&&(o=[1,1]);var s=V(t,"x","depthwiseConv2d"),u=V(n,"filter","depthwiseConv2d"),l=s,c=!1;s.rank===3&&(c=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),U(l.rank===4,function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+l.rank+"."}),U(u.rank===4,function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+u.rank+"."}),U(l.shape[3]===u.shape[2],function(){return"Error in depthwiseConv2d: number of input channels ("+l.shape[3]+") must match the inChannels dimension in filter "+u.shape[2]+"."}),o==null&&(o=[1,1]),U(yr(e,o),function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+o+"'"}),a!=null&&U(nn(r),function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."});var d=bs(l.shape,u.shape,e,o,r,a,!0),f=K.runKernelFunc(function(p,h){var v=p.depthwiseConv2D(l,u,d);return h([l,u]),v},{x:l,$filter:u},function(p,h){U(fu(o),function(){return"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+o+"'"});var v=h[0],g=h[1];return{x:function(){return dL(v.shape,p,g,d)},$filter:function(){return fL(v,p,g.shape,d)}}});return c?f.as3D(f.shape[1],f.shape[2],f.shape[3]):f}}),dL=X({depthwiseConv2dDerInput_:function(t,n,e,r){var i=n,o=!1;n.rank===3&&(o=!0,i=n.as4D(1,n.shape[0],n.shape[1],n.shape[2]));var a=K.runKernelFunc(function(s){return s.depthwiseConv2DDerInput(i,e,r)},{dy4D:i});return o?a.as3D(a.shape[1],a.shape[2],a.shape[3]):a}}),fL=X({depthwiseConv2dDerFilter_:function(t,n,e,r){var i=t;t.rank===3&&(i=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var o=n;return o.rank===3&&(o=n.as4D(1,n.shape[0],n.shape[1],n.shape[2])),K.runKernelFunc(function(a){return a.depthwiseConv2DDerFilter(i,o,r)},{x4D:i,dy4D:o})}}),tC=X({separableConv2d_:function(t,n,e,r,i,o,a){o===void 0&&(o=[1,1]),a===void 0&&(a="NHWC");var s=V(t,"x","separableConv2d"),u=V(n,"depthwiseFilter","separableConv2d"),l=V(e,"pointwiseFilter","separableConv2d"),c=s,d=!1;if(s.rank===3&&(d=!0,c=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),a==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");U(c.rank===4,function(){return"Error in separableConv2d: input must be rank 4, but got rank "+c.rank+"."}),U(u.rank===4,function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+u.rank+"."}),U(l.rank===4,function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+u.rank+"."}),U(l.shape[0]===1,function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+l.shape[0]+"."}),U(l.shape[1]===1,function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+l.shape[1]+"."});var f=u.shape[2],p=u.shape[3];U(l.shape[2]===f*p,function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+f*p+", but got "+l.shape[2]+"."});var h=Ac(c,u,r,i,a,o),v=ku(h,l,1,"valid",a);return d?v.as3D(v.shape[1],v.shape[2],v.shape[3]):v}}),jg=X({conv2dTranspose_:function(t,n,e,r,i,o){return uL(e,V(t,"x","conv2dTranspose"),V(n,"filter","conv2dTranspose"),r,i,"NHWC",o)}}),pL=X({conv3dTranspose_:function(t,n,e,r,i){return lL(e,V(t,"x","conv3dTranspose"),V(n,"filter","conv3dTranspose"),r,i)}}),Vg=X({matMul_:function(t,n,e,r){var i;e===void 0&&(e=!1),r===void 0&&(r=!1);var o=V(t,"a","matMul"),a=V(n,"b","matMul");i=dn(o,a),o=i[0],a=i[1];var s=e?o.shape[o.rank-2]:o.shape[o.rank-1],u=r?a.shape[a.rank-1]:a.shape[a.rank-2],l=e?o.shape[o.rank-1]:o.shape[o.rank-2],c=r?a.shape[a.rank-2]:a.shape[a.rank-1],d=o.shape.slice(0,-2),f=a.shape.slice(0,-2),p=Me(d),h=Me(f);U(o.rank>=2&&a.rank>=2&&o.rank===a.rank,function(){return"Error in matMul: inputs must have the same rank of at least 2, got ranks "+o.rank+" and "+a.rank+"."}),U(Bn(d,f),function(){return"Error in matMul: outer dimensions ("+d+") and ("+f+") of Tensors with shapes "+o.shape+" and "+a.shape+" must match."}),U(s===u,function(){return"Error in matMul: inner shapes ("+s+") and ("+u+") of Tensors with shapes "+o.shape+" and "+a.shape+" and transposeA="+e+" and transposeB="+r+" must match."});var v=o.shape.slice(0,-2).concat([l,c]),g=e?o.as3D(p,s,l):o.as3D(p,l,s),m=r?a.as3D(h,c,u):a.as3D(h,u,c),y={transposeA:e,transposeB:r};return K.runKernelFunc(function(b,w){var x=b.batchMatMul(g,m,e,r);return w([g,m]),x},{a:g,b:m},function(b,w){var x=w,C=x[0],E=x[1];return e||r?!e&&r?{a:function(){return b.matMul(E,!1,!1)},b:function(){return b.matMul(C,!0,!1)}}:e&&!r?{a:function(){return E.matMul(b,!1,!0)},b:function(){return C.matMul(b,!1,!1)}}:{a:function(){return E.matMul(b,!0,!0)},b:function(){return b.matMul(C,!0,!0)}}:{a:function(){return b.matMul(E,!1,!0)},b:function(){return C.matMul(b,!0,!1)}}},"BatchMatMul",y).reshape(v)}}),hL=X({dot_:function(t,n){var e=V(t,"t1","dot"),r=V(n,"t2","dot");U(!(e.rank!==1&&e.rank!==2||r.rank!==1&&r.rank!==2),function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+e.rank+" and "+r.rank+"."});var i=e.rank===1?e.size:e.shape[1],o=r.rank===1?r.size:r.shape[0];return U(i===o,function(){return"Error in dot: inner dimensions of inputs must match, but got "+i+" and "+o+"."}),e.rank===1&&r.rank===1?e.as2D(1,-1).matMul(r.as2D(-1,1)).asScalar():e.rank===1&&r.rank===2?e.as2D(1,-1).matMul(r.as2D(r.shape[0],r.shape[1])).as1D():e.rank===2&&r.rank===1?e.matMul(r.as2D(-1,1)).as1D():e.matMul(r.as2D(r.shape[0],r.shape[1]))}}),mL=X({outerProduct_:function(t,n){var e=V(t,"v1","outerProduct"),r=V(n,"v2","outerProduct");return U(e.rank===1&&r.rank===1,function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+e.rank+" and "+r.rank+"."}),e.as2D(-1,1).matMul(r.as2D(1,-1))}}),xo=X({reverse_:function(t,n){var e=V(t,"x","reverse");if(e.rank===0)return e.clone();var r=Vn(n,e.shape);return K.runKernelFunc(function(i){return i.reverse(e,r)},{$x:e},function(i){return{$x:function(){return i.reverse(r)}}}).reshapeAs(e)}}),vL=X({reverse1d_:function(t){var n=V(t,"x","reverse");return U(n.rank===1,function(){return"Error in reverse1D: x must be rank 1 but got rank "+n.rank+"."}),xo(n,0)}}),gL=X({reverse2d_:function(t,n){var e=V(t,"x","reverse");return U(e.rank===2,function(){return"Error in reverse2D: x must be rank 2 but got rank "+e.rank+"."}),xo(e,n)}}),yL=X({reverse3d_:function(t,n){var e=V(t,"x","reverse");return U(e.rank===3,function(){return"Error in reverse3D: x must be rank 3 but got rank "+e.rank+"."}),xo(e,n)}}),bL=X({reverse4d_:function(t,n){var e=V(t,"x","reverse");return U(e.rank===4,function(){return"Error in reverse4D: x must be rank 4 but got rank "+e.rank+"."}),xo(e,n)}});function wL(t,n,e,r,i,o){var a=V(t,"x","maxPool"),s=a,u=!1;a.rank===3&&(u=!0,s=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),r==null&&(r=[1,1]),U(s.rank===4,function(){return"Error in maxPool: input must be rank 4 but got rank "+s.rank+"."}),U(yr(e,r),function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+r+"'"}),o!=null&&U(nn(i),function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+i+"."});var l=ec(s.shape,n,e,r,i,o),c=K.runKernelFunc(function(d,f){var p=d.maxPool(s,l);return f([s,p]),p},{x:s},function(d,f){var p=f[0],h=f[1];return{x:function(){return function(v,g,m,y,b,w,x,C){var E=V(v,"dy","maxPoolBackprop"),S=V(g,"input","maxPoolBackprop"),N=V(m,"output","maxPoolBackprop");U(S.rank===E.rank,function(){return"Rank of input ("+S.rank+") does not match rank of dy ("+E.rank+")"}),w==null&&(w=[1,1]),U(yr(b,w),function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+b+" and dilations '"+w+"'"}),U(E.rank===4,function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+E.rank+"."}),U(S.rank===4,function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+S.rank+"."}),C!=null&&U(nn(x),function(){return"Error in maxPoolBackprop: pad must be an integer when using, dimRoundingMode "+C+" but got pad "+x+"."});var k=ec(S.shape,y,b,w,x,C);return K.runKernelFunc(function(M){return M.maxPoolBackprop(E,S,N,k)},{$dy:E,$input:S})}(d,p,h,n,e,r,i)}}});return u?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}function xL(t,n,e,r,i,o){var a=V(t,"x","avgPool","float32");r==null&&(r=[1,1]),U(yr(e,r),function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+r+"'"});var s=a,u=!1;a.rank===3&&(u=!0,s=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),U(s.rank===4,function(){return"Error in avgPool: x must be rank 4 but got rank "+s.rank+"."}),o!=null&&U(nn(i),function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+i+"."});var l=ec(s.shape,n,e,r,i,o),c=K.runKernelFunc(function(d){return d.avgPool(s,l)},{x:s},function(d){return{x:function(){return function(f,p,h,v,g,m){var y=V(f,"dy","avgPoolBackprop"),b=V(p,"input","avgPoolBackprop");U(b.rank===y.rank,function(){return"Rank of input ("+b.rank+") does not match rank of dy ("+y.rank+")"}),g==null&&(g=[1,1]),U(yr(v,g),function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+v+" and dilations '"+g+"'"});var w=b,x=y,C=!1;b.rank===3&&(C=!0,w=b.as4D(1,b.shape[0],b.shape[1],b.shape[2]),x=y.as4D(1,y.shape[0],y.shape[1],y.shape[2])),U(x.rank===4,function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+x.rank+"."}),U(w.rank===4,function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+w.rank+"."});var E=ec(w.shape,h,v,g,m),S=K.runKernelFunc(function(N){return N.avgPoolBackprop(x,w,E)},{dy4D:x,input4D:w});return C?S.as3D(S.shape[1],S.shape[2],S.shape[3]):S}(d,s,n,e,r,i)}}});return c=c.cast(a.dtype),u?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}var $g=X({maxPool_:function(t,n,e,r,i){return wL(t,n,e,1,r,i)}}),Ug=X({avgPool_:function(t,n,e,r,i){return xL(t,n,e,1,r,i)}}),SL=X({pool_:function(t,n,e,r,i,o){i==null&&(i=[1,1]),o==null&&(o=1),r===0&&(r="valid");var a=V(t,"x","maxPool"),s=a,u=!1;a.rank===3&&(u=!0,s=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),U(yr(o,i),function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+o+" and dilations '"+i+"'"});var l,c=ec(s.shape,n,o,i,r),d=[c.dilationHeight,c.dilationWidth];l=r==="same"?function(w,x){var C=w.map(function(N,k){return N+(N-1)*(x[k]-1)}).map(function(N){return N-1}),E=C.map(function(N){return Math.floor(N/2)}),S=C.map(function(N,k){return N-E[k]});return C.map(function(N,k){return[E[k],S[k]]})}([c.filterHeight,c.filterWidth],d):[[0,0],[0,0]];var f=d[0]===1&&d[1]===1,p=function(w,x,C){var E=C.map(function(O){return O[0]}),S=C.map(function(O){return O[1]}),N=w.concat(E,S),k=x.map(function(O,P){return(O-N[P]%O)%O}),M=S.map(function(O,P){return O+k[P]}),D=x.map(function(O,P){return[E[P],M[P]]}),R=x.map(function(O,P){return[0,k[P]]});return[D,R]}([c.inHeight,c.inWidth],d,l),h=p[0],v=p[1],g=f?r:"valid",m=f?s:Cg(s,d,h),y=(e==="avg"?function(){return xL(m,n,o,1,g)}:function(){return wL(m,n,o,1,g)})(),b=f?y:xg(y,d,v);return u?b.as3D(b.shape[1],b.shape[2],b.shape[3]):b}}),Wg=X({maxPool3d_:function(t,n,e,r,i,o,a){o===void 0&&(o="NDHWC");var s=V(t,"x","maxPool3d"),u=s,l=!1;s.rank===4&&(l=!0,u=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),a==null&&(a=[1,1,1]),U(u.rank===5,function(){return"Error in maxPool3d: x must be rank 5 but got rank "+u.rank+"."}),U(o==="NDHWC",function(){return"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+o}),U(yr(e,a),function(){return"Error in maxPool3d: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+a+"'"}),i!=null&&U(nn(r),function(){return"Error in maxPool3d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."});var c=Lf(u.shape,n,e,a,r,i,o),d=K.runKernelFunc(function(f,p){var h=f.maxPool3d(u,c);return p([u,h]),h},{x:u},function(f,p){var h=p[0],v=p[1];return{x:function(){return function(g,m,y,b,w,x,C,E){var S=V(g,"dy","maxPool3dBackprop"),N=V(m,"input","maxPool3dBackprop"),k=V(y,"output","maxPool3dBackprop"),M=S,D=N,R=k,O=!1;N.rank===4&&(O=!0,M=S.as5D(1,S.shape[0],S.shape[1],S.shape[2],S.shape[3]),D=N.as5D(1,N.shape[0],N.shape[1],N.shape[2],N.shape[3]),R=k.as5D(1,k.shape[0],k.shape[1],k.shape[2],k.shape[3])),U(M.rank===5,function(){return"Error in maxPool3dBackprop: dy must be rank 5 but got rank "+M.rank+"."}),U(D.rank===5,function(){return"Error in maxPool3dBackprop: input must be rank 5 but got rank "+D.rank+"."}),U(R.rank===5,function(){return"Error in maxPool3dBackprop: output must be rank 5 but got rank "+R.rank+"."}),x==null&&(x=[1,1,1]),U(yr(w,x),function(){return"Error in maxPool3dBackprop: Either strides or dilations must be 1. Got strides "+w+" and dilations '"+x+"'"}),E!=null&&U(nn(C),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+E+" but got pad "+C+"."});var P=Lf(D.shape,b,w,x,C,E),A=K.runKernelFunc(function(I){return I.maxPool3dBackprop(M,D,R,P)},{dy5D:M,input5D:D});return O?A.as4D(A.shape[1],A.shape[2],A.shape[3],A.shape[4]):A}(f,h,v,n,e,a,r,i)}}});return l?d.as4D(d.shape[1],d.shape[2],d.shape[3],d.shape[4]):d}}),Hg=X({avgPool3d_:function(t,n,e,r,i,o,a){o===void 0&&(o="NDHWC");var s=V(t,"x","avgPool3d","float32"),u=s,l=!1;s.rank===4&&(l=!0,u=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),a==null&&(a=[1,1,1]),U(u.rank===5,function(){return"Error in avgPool3d: x must be rank 5 but got rank "+u.rank+"."}),U(o==="NDHWC",function(){return"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+o}),U(yr(e,a),function(){return"Error in avgPool3d: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+a+"'"}),i!=null&&U(nn(r),function(){return"Error in avgPool3d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."});var c=Lf(u.shape,n,e,a,r,i,o),d=K.runKernelFunc(function(f){return f.avgPool3d(u,c)},{x:u},function(f){return{x:function(){return function(p,h,v,g,m,y,b){var w=V(p,"dy","avgPool3dBackprop"),x=V(h,"input","avgPool3dBackprop"),C=w,E=x,S=!1;x.rank===4&&(S=!0,C=w.as5D(1,w.shape[0],w.shape[1],w.shape[2],w.shape[3]),E=x.as5D(1,x.shape[0],x.shape[1],x.shape[2],x.shape[3])),U(C.rank===5,function(){return"Error in avgPool3dBackprop: dy must be rank 5 but got rank "+C.rank+"."}),U(E.rank===5,function(){return"Error in avgPool3dBackprop: input must be rank 5 but got rank "+E.rank+"."}),m==null&&(m=[1,1,1]),U(yr(g,m),function(){return"Error in avgPool3dBackprop: Either strides or dilations must be 1. Got strides "+g+" and dilations '"+m+"'"}),b!=null&&U(nn(y),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+b+" but got pad "+y+"."});var N=Lf(E.shape,v,g,m,y,b),k=K.runKernelFunc(function(M){return M.avgPool3dBackprop(C,E,N)},{dy5D:C,input5D:E});return S?k.as4D(k.shape[1],k.shape[2],k.shape[3],k.shape[4]):k}(f,u,n,e,a,r,i)}}});return d=d.cast(u.dtype),l?d.as4D(d.shape[1],d.shape[2],d.shape[3],d.shape[4]):d}}),ni=X({slice_:function(t,n,e){var r,i,o=V(t,"x","slice");if(o.rank===0)throw new Error("Slicing scalar is not possible");(r=typeof n=="number"?[n].concat(new Array(o.rank-1).fill(0)):n.length<o.rank?n.concat(new Array(o.rank-n.length).fill(0)):n.slice()).forEach(function(u){U(u!==-1,function(){return"slice() does not support negative begin indexing."})}),i=(i=e==null?new Array(o.rank).fill(-1):typeof e=="number"?[e].concat(new Array(o.rank-1).fill(-1)):e.length<o.rank?e.concat(new Array(o.rank-e.length).fill(-1)):e).map(function(u,l){return u>=0?u:(U(u===-1,function(){return"Negative size values should be exactly -1 but got "+u+" for the slice() size at index "+l+"."}),o.shape[l]-r[l])}),QM(o,r,i);var a=o.shape,s={begin:r,size:i};return K.runKernelFunc(function(u){return u.slice(o,r,i)},{x:o},function(u){for(var l=[],c=0;c<u.rank;c++)l.push([r[c],a[c]-r[c]-i[c]]);return{x:function(){return u.pad(l)}}},"Slice",s)}}),dp=X({slice1d_:function(t,n,e){var r=V(t,"x","slice1d");return U(r.rank===1,function(){return"slice1d expects a rank-1 tensor, but got a rank-"+r.rank+" tensor"}),ni(r,[n],[e])}}),Gg=X({slice2d_:function(t,n,e){var r=V(t,"x","slice2d");return U(r.rank===2,function(){return"slice2d expects a rank-2 tensor, but got a rank-"+r.rank+" tensor"}),ni(r,n,e)}}),fp=X({slice3d_:function(t,n,e){var r=V(t,"x","slice3d");return U(r.rank===3,function(){return"slice3d expects a rank-3 tensor, but got a rank-"+r.rank+" tensor"}),ni(r,n,e)}}),rc=X({slice4d_:function(t,n,e){var r=V(t,"x","slice4d");return U(r.rank===4,function(){return"slice4d expects a rank-4 tensor, but got a rank-"+r.rank+" tensor"}),ni(r,n,e)}});function EL(t,n,e,r,i){return n.rank<e.rank&&(n=n.reshape(ei(n.shape,r))),t.rank<e.rank&&(t=t.reshape(ei(t.shape,r))),{$x:function(){var o=t.mul(e.equal(n).cast(t.dtype));return i==null?o:o.transpose(i)}}}var qg=X({all_:function(t,n,e){n===void 0&&(n=null),e===void 0&&(e=!1);var r=V(t,"x","all","bool"),i=Vn(n,r.shape),o=i,a=Gi(o,r.rank);a!=null&&(r=r.transpose(a),o=qi(o.length,r.rank));var s=K.runKernelFunc(function(l){return l.all(r,o)},{$x:r});if(e){var u=ei(s.shape,i);return s.reshape(u)}return s}}),zf=X({any_:function(t,n,e){n===void 0&&(n=null),e===void 0&&(e=!1);var r=V(t,"x","any","bool"),i=Vn(n,r.shape),o=i,a=Gi(o,r.rank);a!=null&&(r=r.transpose(a),o=qi(o.length,r.rank));var s=K.runKernelFunc(function(l){return l.any(r,o)},{$x:r});if(e){var u=ei(s.shape,i);return s.reshape(u)}return s}}),Bf=X({argMax_:function(t,n){n===void 0&&(n=0);var e=V(t,"x","argMax");n==null&&(n=0);var r=Vn(n,e.shape),i=Gi(r,e.rank);return i!=null&&(e=e.transpose(i),r=qi(r.length,e.rank)),K.runKernelFunc(function(o,a){var s=o.argMax(e,r[0]);return a([e]),s},{$x:e},function(o,a){var s=a[0];return{$x:function(){return dt(s)}}})}}),nC=X({argMin_:function(t,n){n===void 0&&(n=0);var e=V(t,"x","argMin");n==null&&(n=0);var r=Vn(n,e.shape),i=Gi(r,e.rank);return i!=null&&(e=e.transpose(i),r=qi(r.length,e.rank)),K.runKernelFunc(function(o,a){var s=o.argMin(e,r[0]);return a([e]),s},{$x:e},function(o,a){var s=a[0];return{$x:function(){return dt(s)}}})}}),CL=X({logSumExp_:function(t,n,e){n===void 0&&(n=null),e===void 0&&(e=!1);var r=V(t,"x","logSumExp"),i=Vn(n,r.shape),o=r.max(i,!0),a=r.sub(o).exp().sum(i).log(),s=o.reshape(a.shape).add(a);if(e){var u=ei(s.shape,i);return s.reshape(u)}return s}}),us=X({max_:function(t,n,e){n===void 0&&(n=null),e===void 0&&(e=!1);var r=V(t,"x","max"),i=r,o=Vn(n,r.shape),a=o,s=Gi(a,r.rank);s!=null&&(r=r.transpose(s),a=qi(a.length,r.rank));var u=K.runKernelFunc(function(c,d){var f=c.max(r,a);return d([i,f]),f},{$x:r},function(c,d){return EL(c,d[1],d[0],o,s)});if(e){var l=ei(u.shape,o);u=u.reshape(l)}return u}}),gn=X({mean_:function(t,n,e){n===void 0&&(n=null),e===void 0&&(e=!1);var r=V(t,"x","mean"),i=Vn(n,r.shape),o=Me(Gn(r.shape,i)[1]);return Nc(function(a){var s=ke(o);return{value:(s.dtype===a.dtype?a:a.cast(s.dtype)).div(s).sum(n,e),gradFunc:function(u){var l=a.shape.slice();return i.forEach(function(c){l[c]=1}),u.reshape(l).mul(Co(a.shape,"float32")).div(o)}}})(r)}}),Kg=X({min_:function(t,n,e){n===void 0&&(n=null),e===void 0&&(e=!1);var r=V(t,"x","min"),i=r,o=Vn(n,r.shape),a=o,s=Gi(a,r.rank);s!=null&&(r=r.transpose(s),a=qi(a.length,r.rank));var u=K.runKernelFunc(function(c,d){var f=c.min(r,a);return d([i,f]),f},{$x:r},function(c,d){return EL(c,d[1],d[0],o,s)});if(e){var l=ei(u.shape,o);u=u.reshape(l)}return u}}),pp=X({moments_:function(t,n,e){n===void 0&&(n=null),e===void 0&&(e=!1);var r=Vn(n,(t=V(t,"x","moments")).shape),i=t.mean(r,e),o=i.shape;e||(o=ei(i.shape,r));var a=t.toFloat().sub(i.reshape(o)).square();return{mean:i,variance:a.mean(r,e)}}}),zr=X({sum_:function(t,n,e){n===void 0&&(n=null),e===void 0&&(e=!1);var r=V(t,"x","sum");r.dtype==="bool"&&(r=r.toInt());var i=Vn(n,r.shape);return Nc(function(o){var a=Gi(i,o.rank),s=i,u=o;a!=null&&(u=o.transpose(a),s=qi(s.length,o.rank));var l=K.runKernelFunc(function(d){return d.sum(u,s)},{permutedX:u});if(e){var c=ei(l.shape,i);l=l.reshape(c)}return{value:l,gradFunc:function(d){var f=o.shape.slice();return i.forEach(function(p){f[p]=1}),d.reshape(f).mul(Co(o.shape,"float32"))}}})(r)}}),Xg=X({prod_:function(t,n,e){n===void 0&&(n=null),e===void 0&&(e=!1);var r=V(t,"x","prod");r.dtype==="bool"&&(r=r.toInt());var i=Vn(n,r.shape),o=Gi(i,r.rank),a=i,s=r;o!=null&&(s=r.transpose(o),a=qi(a.length,r.rank));var u=K.runKernelFunc(function(c){return c.prod(s,a)},{permutedX:s});if(e){var l=ei(u.shape,i);u=u.reshape(l)}return u}}),Oc=X({elu_:function(t){var n=V(t,"x","elu");return K.runKernelFunc(function(e,r){var i=e.elu(n);return r([i]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return K.runKernelFunc(function(o){return o.eluDer(e,i)},{dy:e,y:i})}}})}}),Yg=X({leakyRelu_:function(t,n){n===void 0&&(n=.2);var e=V(t,"x","leakyRelu");return Ro(ke(n).mul(e),e)}}),Jg=X({prelu_:function(t,n){var e=V(t,"x","prelu"),r=V(n,"alpha","prelu");return K.runKernelFunc(function(i,o){var a=i.prelu(e,r);return o([e,r]),a},{x:e,alpha:r},function(i,o){var a=o[0],s=o[1],u=a.greater(0);return{x:function(){return ra(u,i,i.mul(s))},alpha:function(){var l=ra(u,dt(i),i.mul(a)),c=Rn(s.shape,i.shape);return c.length>0&&(l=l.sum(c)),l.reshape(s.shape)}}},"Prelu")}}),ws=X({relu_:function(t){var n=V(t,"x","relu");return n.dtype==="bool"?n.toInt():K.runKernelFunc(function(e,r){var i=e.relu(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){return e.mulStrict(i.step().toFloat())}}})}}),rC=X({relu6_:function(t){var n=V(t,"x","relu6");return n.dtype==="bool"?n.toInt():K.runKernelFunc(function(e,r){var i=e.relu6(n);return r([n]),i},{$x:n},function(e,r){var i=r[0],o=i.lessEqual(6).mul(i.step());return{$x:function(){return e.mulStrict(o.toFloat())}}})}}),Qg=X({selu_:function(t){var n=V(t,"x","selu");return K.runKernelFunc(function(e,r){var i=e.selu(n);return r([n]),i},{$x:n},function(e,r){var i=r[0];return{$x:function(){var o=i.greater(ke(0)),a=ke(wE),s=ke(xE),u=e.mul(s),l=e.mul(a).mul(i.toFloat().exp());return ra(o,u,l)}}})}}),Zt=X({transpose_:function(t,n){var e=V(t,"x","transpose");return n==null&&(n=e.shape.map(function(r,i){return i}).reverse()),U(e.rank===n.length,function(){return"Error in transpose: rank of input "+e.rank+" must match length of perm "+n+"."}),n.forEach(function(r){U(r>=0&&r<e.rank,function(){return"All entries in 'perm' must be between 0 and "+(e.rank-1)+" but got "+n})}),e.rank<=1?e.clone():K.runKernelFunc(function(r){return r.transpose(e,n)},{$x:e},function(r){var i=yg(n);return{$x:function(){return r.transpose(i)}}})}}),iC=X({localResponseNormalization_:function(t,n,e,r,i){n===void 0&&(n=5),e===void 0&&(e=1),r===void 0&&(r=1),i===void 0&&(i=.5);var o=V(t,"x","localResponseNormalization");U(o.rank===4||o.rank===3,function(){return`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank `+o.rank+"."}),U(nn(n),function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+n+"."});var a=o,s=!1;o.rank===3&&(s=!0,a=o.as4D(1,o.shape[0],o.shape[1],o.shape[2]));var u=K.runKernelFunc(function(l,c){var d=l.localResponseNormalization4D(a,n,e,r,i);return c([a,d]),d},{x4D:a},function(l,c){var d=c[0],f=c[1];return{x4D:function(){return K.runKernelFunc(function(p){return p.LRNGrad(l,d,f,n,e,r,i)},{})}}});return s?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),oC=X({norm_:function(t,n,e,r){n===void 0&&(n="euclidean"),e===void 0&&(e=null),r===void 0&&(r=!1);var i=function s(u,l,c){if(c===void 0&&(c=null),u.rank===0)return u.abs();if(u.rank!==1&&c===null)return s(u.reshape([-1]),l,c);if(u.rank===1||typeof c=="number"||Array.isArray(c)&&c.length===1){if(l===1)return u.abs().sum(c);if(l===1/0)return u.abs().max(c);if(l===-1/0)return u.abs().min(c);if(l==="euclidean"||l===2)return u.abs().pow(ke(2,"int32")).sum(c).sqrt();throw new Error("Error in norm: invalid ord value: "+l)}if(Array.isArray(c)&&c.length===2){if(l===1)return u.abs().sum(c[0]).max(c[1]-1);if(l===1/0)return u.abs().sum(c[1]).max(c[0]);if(l===-1/0)return u.abs().sum(c[1]).min(c[0]);if(l==="fro"||l==="euclidean")return u.square().sum(c).sqrt();throw new Error("Error in norm: invalid ord value: "+l)}throw new Error("Error in norm: invalid axis: "+c)}(t=V(t,"x","norm"),n,e),o=i.shape;if(r){var a=Vn(e,t.shape);o=ei(i.shape,a)}return i.reshape(o)}}),RL=X({basicLSTMCell_:function(t,n,e,r,i,o){var a=V(t,"forgetBias","basicLSTMCell"),s=V(n,"lstmKernel","basicLSTMCell"),u=V(e,"lstmBias","basicLSTMCell"),l=V(r,"data","basicLSTMCell"),c=V(i,"c","basicLSTMCell"),d=V(o,"h","basicLSTMCell"),f=l.concat(d,1).matMul(s).add(u),p=f.shape[0],h=f.shape[1]/4,v=[p,h],g=f.slice([0,0],v),m=f.slice([0,h],v),y=f.slice([0,2*h],v),b=f.slice([0,3*h],v),w=g.sigmoid().mulStrict(m.tanh()).addStrict(c.mulStrict(a.add(y).sigmoid())),x=w.tanh().mulStrict(b.sigmoid());return[w,x]}}),TL=X({multiRNNCell_:function(t,n,e,r){for(var i=V(n,"data","multiRNNCell"),o=Pf(e,"c","multiRNNCell"),a=Pf(r,"h","multiRNNCell"),s=i,u=[],l=0;l<t.length;l++){var c=t[l](s,o[l],a[l]);u.push(c[0]),u.push(c[1]),s=c[1]}var d=[],f=[];for(l=0;l<u.length;l+=2)d.push(u[l]),f.push(u[l+1]);return[d,f]}}),NL=X({movingAverage_:function(t,n,e,r,i){i===void 0&&(i=!0);var o=V(t,"v","movingAverage"),a=V(n,"x","movingAverage"),s=V(e,"decay","movingAverage");aM(o,a),U(Bn(o.shape,a.shape),function(){return"Shape mismatch in v and x"});var u=ke(1),l=u.sub(s),c=a.sub(o).mul(l);if(i){U(r!=null,function(){return"When using zeroDebias: true, step is required."});var d=V(r,"step","movingAverage");c=c.div(u.sub(tc(s,d)))}return o.add(c)}}),aC=X({stridedSlice_:function(t,n,e,r,i,o,a,s,u){if(i===void 0&&(i=0),o===void 0&&(o=0),a===void 0&&(a=0),s===void 0&&(s=0),u===void 0&&(u=0),r==null&&(r=new Array(n.length)),a!==0)throw new Error("ellipsis mask is not yet supported");var l=V(t,"x","stridedSlice"),c=xw(s),d=l.shape.slice();c.forEach(function(g){n[g]=0,e[g]=1,d.splice(g,0,1)}),l=l.reshape(d);for(var f=0;f<l.rank;f++)n[f]=ZM(i,n,r,l.shape,f),e[f]=eP(o,e,r,l.shape,f),r[f]=r[f]||1;var p=xw(u);p.forEach(function(g){e[g]=n[g]+1,r[g]=1});var h=Rg(n,e,r),v=h.filter(function(g,m){return p.indexOf(m)===-1});return r.every(function(g){return g===1})?ni(l,n,h).reshape(v):K.runKernelFunc(function(g){return g.stridedSlice(l,n,e,r)},{$x:l}).reshape(v)}}),sC=X({topk_:function(t,n,e){n===void 0&&(n=1),e===void 0&&(e=!0);var r=V(t,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");var i=r.shape[r.shape.length-1];if(n>i)throw new Error("'k' passed to topk() must be <= the last dimension ("+i+") but got "+n);var o=K.runKernelFunc(function(a){return a.topk(r,n,e)},{$x:r});return{values:o[0],indices:o[1]}}}),uC=X({scatterND_:function(t,n,e){var r=V(t,"indices","scatterND","int32"),i=V(n,"updates","scatterND");return N7(i,r,e),K.runKernelFunc(function(o){return o.scatterND(r,i,e)},{$indices:r,$updates:i})}}),hp=X({fft_:function(t){U(t.dtype==="complex64",function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+t.dtype+"."});var n=t.shape[t.shape.length-1],e=t.size/n,r=t.as2D(e,n);return K.runKernelFunc(function(i){return i.fft(r)},{input:t}).reshape(t.shape)}}),ic=X({ifft_:function(t){U(t.dtype==="complex64",function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+t.dtype+"."});var n=t.shape[t.shape.length-1],e=t.size/n,r=t.as2D(e,n);return K.runKernelFunc(function(i){return i.ifft(r)},{input:t}).reshape(t.shape)}}),mp=X({rfft_:function(t,n){U(t.dtype==="float32",function(){return"The dtype for rfft() must be real value but got "+t.dtype});var e,r=t.shape[t.shape.length-1],i=t.size/r;if(n!=null&&n<r){var o=t.shape.map(function(m){return 0}),a=t.shape.map(function(m){return m});a[t.shape.length-1]=n,e=t.slice(o,a),r=n}else if(n!=null&&n>r){var s=t.shape.map(function(m){return m});s[t.shape.length-1]=n-r,e=t.concat(It(s),t.shape.length-1),r=n}else e=t;var u=e.zerosLike(),l=Nn(e,u).as2D(i,r),c=hp(l),d=Math.floor(r/2)+1,f=Ir(c),p=vi(c),h=f.split([d,r-d],f.shape.length-1),v=p.split([d,r-d],p.shape.length-1),g=e.shape.slice();return g[e.shape.length-1]=d,Nn(h[0],v[0]).reshape(g)}}),Zg=X({irfft_:function(t){var n=t.shape[t.shape.length-1],e=t.size/n;if(n<=2){var r=t.as2D(e,n),i=ic(r);return Ir(i)}var o=[e,2*(n-1)],a=Ir(t).as2D(e,n),s=vi(t).as2D(e,n),u=a.slice([0,1],[e,n-2]).reverse(1),l=s.slice([0,1],[e,n-2]).reverse(1).mul(ke(-1)),c=a.concat(u,1),d=s.concat(l,1);return r=Nn(c,d).as2D(o[0],o[1]),i=ic(r),Ir(i)}}),kL=Object.freeze({fft:hp,ifft:ic,rfft:mp,irfft:Zg}),ey=X({sparseToDense_:function(t,n,e,r){r===void 0&&(r=0);var i=V(t,"sparseIndices","sparseToDense","int32"),o=V(n,"sparseValues","sparseToDense"),a=V(r,"defaultValue","sparseToDense",o.dtype);return function(s,u,l,c){if(s.dtype!=="int32")throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+s.dtype+".");if(s.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+s.shape+".");var d=s.rank>0?s.shape[0]:1,f=s.rank>1?s.shape[1]:1;if(l.length!==f)throw new Error("outputShape has incorrect number of elements:, "+l.length+", should be: "+f+".");var p=u.size;if(u.rank!==0&&(u.rank!==1||p!==d))throw new Error("sparseValues has incorrect shape "+u.shape+", should be [] or ["+d+"]");if(u.dtype!==c.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(i,o,e,a),K.runKernelFunc(function(s){return s.sparseToDense(i,o,e,a)},{$sparseIndices:i,$sparseValues:o,$defaultValue:a})}}),lC=X({gatherND_:function(t,n){var e=V(n,"indices","gatherND","int32"),r=V(t,"x","gatherND");return K.runKernelFunc(function(i){return i.gatherND(r,e)},{$x:r,$indices:e})}}),IL=X({diag_:function(t){var n=V(t,"x","diag").flatten(),e=t.shape.concat(t.shape);return K.runKernelFunc(function(r){return r.diag(n)},{$x:n}).reshape(e)}}),cC=X({dropout_:function(t,n,e,r){var i=V(t,"x","dropout");if(U(i.dtype==="float32",function(){return"x has to be a floating point tensor since it's going to be scaled, but got a "+i.dtype+" tensor instead."}),U(n>=0&&n<1,function(){return"rate must be a float in the range [0, 1), but got "+n+"."}),n===0)return t instanceof _t?i.clone():i;var o=function(u,l){if(l==null)return u.shape.slice();if(Bn(u.shape,l))return l;if(u.shape.length===l.length){for(var c=[],d=0;d<u.shape.length;d++)l[d]==null&&u.shape[d]!=null?c.push(u.shape[d]):c.push(l[d]);return c}return l}(i,e),a=1-n,s=Cu(o,0,1,"float32",r).add(a).floor().div(a);return i.mul(s)}});function _L(t,n,e){for(var r=1-t%2,i=new Float32Array(t),o=0;o<t;++o){var a=2*Math.PI*o/(t+r-1);i[o]=n-e*Math.cos(a)}return Fr(i,"float32")}var ty=X({hannWindow_:function(t){return _L(t,.5,.5)}}),dC=X({hammingWindow_:function(t){return _L(t,.54,.46)}}),ny=X({frame_:function(t,n,e,r,i){r===void 0&&(r=!1),i===void 0&&(i=0);for(var o=0,a=[];o+n<=t.size;)a.push(ni(t,o,n)),o+=e;if(r)for(;o<t.size;){var s=o+n-t.size,u=lr([ni(t,o,n-s),Tc([s],i)]);a.push(u),o+=e}return a.length===0?Ho([],[0,n]):lr(a).as2D(a.length,n)}}),fC=X({stft_:function(t,n,e,r,i){var o;i===void 0&&(i=ty),r==null&&(o=n,r=Math.floor(Math.pow(2,Math.ceil(Math.log(o)/Math.log(2)))));for(var a=ny(t,n,e),s=He(a,i(n)),u=[],l=0;l<a.shape[0];l++)u.push(mp(s.slice([l,0],[1,n]),r));return lr(u)}}),AL=Object.freeze({hannWindow:ty,hammingWindow:dC,frame:ny,stft:fC}),Xn,OL=function(t,n,e){return e===void 0&&(e=1),Ae(this,void 0,void 0,function(){var r,i,o,a,s,u,l,c,d,f,p,h,v,g;return Oe(this,function(m){switch(m.label){case 0:return r=V(t,"predictions","inTopK"),i=V(n,"targets","inTopK"),U(r.rank>1,function(){return"inTopK() expects the predictions to be of rank 2 or higher, but got "+r.rank}),U(r.rank-1===i.rank,function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+r.rank+" and targets rank "+i.rank}),gt(r.shape.slice(0,r.shape.length-1),i.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),o=r.shape[r.shape.length-1],U(e>0&&e<=o,function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last dimension ("+o+"), but got "+e}),[4,r.data()];case 1:return a=m.sent(),[4,i.data()];case 2:for(s=m.sent(),u=[a.length/o,o],c=u[1],d=kf("bool",l=u[0]),f=0;f<l;f++){for(p=f*c,h=a.subarray(p,p+c),v=[],g=0;g<h.length;g++)v.push({value:h[g],index:g});for(v.sort(function(y,b){return b.value-y.value}),d[f]=0,g=0;g<e;g++)if(v[g].index===s[f]){d[f]=1;break}}return t!==r&&r.dispose(),n!==i&&i.dispose(),[2,mn(d,i.shape,"bool")]}})})};(function(t){t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(Xn||(Xn={}));var vq=X({absoluteDifference_:function(t,n,e,r){r===void 0&&(r=Xn.SUM_BY_NONZERO_WEIGHTS);var i=V(t,"labels","absoluteDifference"),o=V(n,"predictions","absoluteDifference"),a=null;e!=null&&(a=V(e,"weights","absoluteDifference")),gt(i.shape,o.shape,"Error in absoluteDifference: ");var s=i.sub(o).abs();return la(s,a,r)}}),la=X({computeWeightedLoss_:function(t,n,e){e===void 0&&(e=Xn.SUM_BY_NONZERO_WEIGHTS);var r=V(t,"losses","computeWeightedLoss"),i=null;n!=null&&(i=V(n,"weights","computeWeightedLoss"));var o=i==null?r:r.mul(i);if(e===Xn.NONE)return o;if(e===Xn.SUM)return o.sum();if(e===Xn.MEAN){if(i==null)return o.mean();var a=r.size/i.size,s=o.sum().div(i.sum());return a>1?s.div(ke(a)):s}if(e===Xn.SUM_BY_NONZERO_WEIGHTS){if(i==null)return o.sum().div(ke(r.size));var u=i.mul(Co(r.shape)).notEqual(ke(0)).sum().toFloat();return o.sum().div(u)}throw Error("Unknown reduction: "+e)}}),gq=X({cosineDistance_:function(t,n,e,r,i){i===void 0&&(i=Xn.SUM_BY_NONZERO_WEIGHTS);var o=V(t,"labels","cosineDistance"),a=V(n,"predictions","cosineDistance"),s=null;r!=null&&(s=V(r,"weights","cosineDistance")),gt(o.shape,a.shape,"Error in cosineDistance: ");var u=ke(1).sub(o.mul(a).sum(e,!0));return la(u,s,i)}}),yq=X({hingeLoss_:function(t,n,e,r){r===void 0&&(r=Xn.SUM_BY_NONZERO_WEIGHTS);var i=V(t,"labels","hingeLoss"),o=V(n,"predictions","hingeLoss"),a=null;e!=null&&(a=V(e,"weights","hingeLoss")),gt(i.shape,o.shape,"Error in hingeLoss: ");var s=ke(1);i=ke(2).mul(i).sub(s);var u=s.sub(i.mul(o)).relu();return la(u,a,r)}}),bq=X({huberLoss_:function(t,n,e,r,i){r===void 0&&(r=1),i===void 0&&(i=Xn.SUM_BY_NONZERO_WEIGHTS);var o=V(t,"labels","huberLoss"),a=V(n,"predictions","huberLoss"),s=null;e!=null&&(s=V(e,"weights","huberLoss")),gt(o.shape,a.shape,"Error in huberLoss: ");var u=ke(r),l=a.sub(o).abs(),c=kc(l,u),d=l.sub(c),f=ke(.5).mul(c.square()).add(u.mul(d));return la(f,s,i)}}),wq=X({logLoss_:function(t,n,e,r,i){r===void 0&&(r=1e-7),i===void 0&&(i=Xn.SUM_BY_NONZERO_WEIGHTS);var o=V(t,"labels","logLoss"),a=V(n,"predictions","logLoss"),s=null;e!=null&&(s=V(e,"weights","logLoss")),gt(o.shape,a.shape,"Error in logLoss: ");var u=ke(1),l=ke(r),c=o.mul(a.add(l).log()).neg().sub(u.sub(o).mul(u.sub(a).add(l).log()));return la(c,s,i)}}),xq=X({meanSquaredError_:function(t,n,e,r){r===void 0&&(r=Xn.SUM_BY_NONZERO_WEIGHTS);var i=V(t,"labels","meanSquaredError"),o=V(n,"predictions","meanSquaredError"),a=null;e!=null&&(a=V(e,"weights","meanSquaredError")),gt(i.shape,o.shape,"Error in meanSquaredError: ");var s=i.squaredDifference(o);return la(s,a,r)}}),Sq=X({sigmoidCrossEntropy_:function(t,n,e,r,i){r===void 0&&(r=0),i===void 0&&(i=Xn.SUM_BY_NONZERO_WEIGHTS);var o=V(t,"multiClassLabels","sigmoidCrossEntropy"),a=V(n,"logits","sigmoidCrossEntropy"),s=null;if(e!=null&&(s=V(e,"weights","sigmoidCrossEntropy")),gt(o.shape,a.shape,"Error in sigmoidCrossEntropy: "),r>0){var u=ke(r),l=ke(1),c=ke(.5);o=o.mul(l.sub(u)).add(c.mul(u))}var d=function(f,p){var h=V(f,"labels","sigmoidCrossEntropyWithLogits"),v=V(p,"logits","sigmoidCrossEntropyWithLogits");gt(h.shape,v.shape,"Error in sigmoidCrossEntropyWithLogits: ");var g=v.relu(),m=v.mul(h),y=v.abs().neg().exp().log1p();return g.sub(m).add(y)}(o,a);return la(d,s,i)}}),Eq=X({softmaxCrossEntropy_:function(t,n,e,r,i){r===void 0&&(r=0),i===void 0&&(i=Xn.SUM_BY_NONZERO_WEIGHTS);var o=V(t,"onehotLabels","softmaxCrossEntropy"),a=V(n,"logits","softmaxCrossEntropy"),s=null;if(e!=null&&(s=V(e,"weights","softmaxCrossEntropy")),gt(o.shape,a.shape,"Error in softmaxCrossEntropy: "),r>0){var u=ke(r),l=ke(1),c=ke(o.shape[1]);o=o.mul(l.sub(u)).add(u.div(c))}var d=function(f,p,h){if(h===void 0&&(h=-1),h===-1&&(h=p.rank-1),h!==p.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+p.rank+" and dim was "+h);return Nc(function(v,g,m){var y=g.logSumExp([h],!0),b=g.toFloat().sub(y);return m([v,b]),{value:b.mul(v).neg().sum([h]),gradFunc:function(w,x){var C=x[0],E=x[1],S=ei(w.shape,[h]);return[w.reshape(S).mul(C.toFloat().sub(E.exp())),w.reshape(S).mul(E.exp().sub(C.toFloat()))]}}})(f,p)}(o,a);return la(d,s,i)}}),DL=Object.freeze({get Reduction(){return Xn},absoluteDifference:vq,computeWeightedLoss:la,cosineDistance:gq,hingeLoss:yq,huberLoss:bq,logLoss:wq,meanSquaredError:xq,sigmoidCrossEntropy:Sq,softmaxCrossEntropy:Eq});function tk(t,n){return n===void 0&&(n=!1),K.tidy(function(){if(t.shape.length!==2)throw new Error("qr2d() requires a 2D Tensor, but got a "+t.shape.length+"D Tensor.");for(var e=t.shape[0],r=t.shape[1],i=Eg(e),o=t.clone(),a=Ho([[1]],[1,1]),s=a.clone(),u=e>=r?r:e,l=function(d){var f,p=o,h=s,v=i;f=K.tidy(function(){var g=o.slice([d,d],[e-d,1]),m=g.norm(),y=o.slice([d,d],[1,1]),b=Ho([[-1]]).where(y.greater(0),Ho([[1]])),w=y.sub(b.mul(m)),x=g.div(w);s=x.shape[0]===1?a.clone():a.concat(x.slice([1,0],[x.shape[0]-1,x.shape[1]]),0);var C=b.matMul(w).div(m).neg(),E=o.slice([d,0],[e-d,r]),S=C.mul(s);if(d===0)o=E.sub(S.matMul(s.transpose().matMul(E)));else{var N=E.sub(S.matMul(s.transpose().matMul(E)));o=o.slice([0,0],[d,r]).concat(N,0)}var k=i.slice([0,d],[e,i.shape[1]-d]);if(d===0)i=k.sub(k.matMul(s).matMul(S.transpose()));else{var M=k.sub(k.matMul(s).matMul(S.transpose()));i=i.slice([0,0],[e,d]).concat(M,1)}return[s,o,i]}),s=f[0],o=f[1],i=f[2],nt([p,h,v])},c=0;c<u;++c)l(c);return!n&&e>r&&(i=i.slice([0,0],[e,r]),o=o.slice([0,0],[r,r])),[i,o]})}var Cq=X({gramSchmidt_:function(t){var n;if(Array.isArray(t)){n=!1,U(t!=null&&t.length>0,function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"});for(var e=t[0].shape[0],r=function(u){U(t[u].shape[0]===e,function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+t[u].shape[0]+" vs. "+e+")"})},i=1;i<t.length;++i)r(i)}else n=!0,t=Go(t,t.shape[0],0).map(function(u){return ip(u,[0])});U(t.length<=t[0].shape[0],function(){return"Gram-Schmidt: Number of vectors ("+t.length+") exceeds number of dimensions ("+t[0].shape[0]+")."});var o=[],a=t,s=function(u){o.push(K.tidy(function(){var l=a[u];if(u>0)for(var c=0;c<u;++c){var d=zr(o[c].mulStrict(l)).mul(o[c]);l=l.sub(d)}return l.div(oC(l,"euclidean"))}))};for(i=0;i<t.length;++i)s(i);return n?$i(o,0):o}}),Rq=X({qr_:function(t,n){if(n===void 0&&(n=!1),t.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+t.rank);if(t.rank===2)return tk(t,n);var e=t.shape.slice(0,t.shape.length-2).reduce(function(a,s){return a*s}),r=du(t.reshape([e,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),i=[],o=[];return r.forEach(function(a){var s=tk(a,n),u=s[0],l=s[1];i.push(u),o.push(l)}),[$i(i,0).reshape(t.shape),$i(o,0).reshape(t.shape)]}}),pC=Object.freeze({gramSchmidt:Cq,qr:Rq});function ML(t,n,e,r,i){r==null&&(r=.5),i==null&&(i=Number.NEGATIVE_INFINITY);var o=t.shape[0];return e=Math.min(e,o),U(0<=r&&r<=1,function(){return"iouThreshold must be in [0, 1], but was '"+r+"'"}),U(t.rank===2,function(){return"boxes must be a 2D tensor, but was of rank '"+t.rank+"'"}),U(t.shape[1]===4,function(){return"boxes must have 4 columns, but 2nd dimension was "+t.shape[1]}),U(n.rank===1,function(){return"scores must be a 1D tensor"}),U(n.shape[0]===o,function(){return"scores has incompatible shape with boxes. Expected "+o+", but was "+n.shape[0]}),{maxOutputSize:e,iouThreshold:r,scoreThreshold:i}}var Tq=X({resizeBilinear_:function(t,n,e){e===void 0&&(e=!1);var r=V(t,"images","resizeBilinear");U(r.rank===3||r.rank===4,function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+r.rank+"."}),U(n.length===2,function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+n+"."});var i=r,o=!1;r.rank===3&&(o=!0,i=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var a=n[0],s=n[1],u=K.runKernelFunc(function(l,c){return c([i]),l.resizeBilinear(i,a,s,e)},{batchImages:i},function(l,c){return{batchImages:function(){return K.runKernelFunc(function(d){return d.resizeBilinearBackprop(l,c[0],e)},{})}}});return o?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),Nq=X({resizeNearestNeighbor_:function(t,n,e){e===void 0&&(e=!1);var r=V(t,"images","resizeNearestNeighbor");U(r.rank===3||r.rank===4,function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+r.rank+"."}),U(n.length===2,function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+n+"."}),U(r.dtype==="float32"||r.dtype==="int32",function(){return"`images` must have `int32` or `float32` as dtype"});var i=r,o=!1;r.rank===3&&(o=!0,i=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var a=n[0],s=n[1],u=K.runKernelFunc(function(l,c){return c([i]),l.resizeNearestNeighbor(i,a,s,e)},{batchImages:i},function(l,c){return{batchImages:function(){return K.runKernelFunc(function(d){return d.resizeNearestNeighborBackprop(l,c[0],e)},{})}}});return o?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),kq=X({nonMaxSuppression_:function(t,n,e,r,i){r===void 0&&(r=.5),i===void 0&&(i=Number.NEGATIVE_INFINITY);var o=V(t,"boxes","nonMaxSuppression"),a=V(n,"scores","nonMaxSuppression"),s=ML(o,a,e,r,i);return e=s.maxOutputSize,r=s.iouThreshold,i=s.scoreThreshold,K.runKernelFunc(function(u){return u.nonMaxSuppression(o,a,e,r,i)},{$boxes:o})}}),Iq=function(t,n,e,r,i){return r===void 0&&(r=.5),i===void 0&&(i=Number.NEGATIVE_INFINITY),Ae(this,void 0,void 0,function(){var o,a,s,u,l,c,d;return Oe(this,function(f){switch(f.label){case 0:return o=V(t,"boxes","nonMaxSuppressionAsync"),a=V(n,"scores","nonMaxSuppressionAsync"),s=ML(o,a,e,r,i),e=s.maxOutputSize,r=s.iouThreshold,i=s.scoreThreshold,[4,Promise.all([o.data(),a.data()])];case 1:return u=f.sent(),l=u[0],c=u[1],d=gE(l,c,e,r,i),o!==t&&o.dispose(),a!==n&&a.dispose(),[2,d]}})})},_q=X({cropAndResize_:function(t,n,e,r,i,o){var a=V(t,"image","cropAndResize","float32"),s=V(n,"boxes","cropAndResize","float32"),u=V(e,"boxInd","cropAndResize","int32");i=i||"bilinear",o=o||0;var l=s.shape[0];return U(a.rank===4,function(){return"Error in cropAndResize: image must be rank 4,but got rank "+a.rank+"."}),U(s.rank===2&&s.shape[1]===4,function(){return"Error in cropAndResize: boxes must be have size ["+l+",4] but had shape "+s.shape+"."}),U(u.rank===1&&u.shape[0]===l,function(){return"Error in cropAndResize: boxInd must be have size ["+l+"] but had shape "+s.shape+"."}),U(r.length===2,function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+r.length+"."}),U(r[0]>=1&&r[1]>=1,function(){return"cropSize must be atleast [1,1], but was "+r}),U(i==="bilinear"||i==="nearest",function(){return"method must be bilinear or nearest, but was "+i}),K.runKernelFunc(function(c,d){return c.cropAndResize(a,s,u,r,i,o)},{$image:a,$boxes:s})}}),eu=Object.freeze({resizeBilinear:Tq,resizeNearestNeighbor:Nq,nonMaxSuppression:kq,nonMaxSuppressionAsync:Iq,cropAndResize:_q}),hC=function(t,n){return!(t>0)&&(n==="linear"||n==="relu")},mC=function(t,n,e){if(e==null||e==="linear")return t;if(e==="relu")return t.mul(n.step());throw new Error("Gradient for activation "+e+" has not been implemented yet.")},vC=function(t,n){var e=n,r=Rn(t.shape,n.shape);return r.length>0&&(e=e.sum(r)),e.reshape(t.shape)},gC=function(t,n,e){if(n==="linear")return t;if(n==="relu")return ws(t);if(n==="elu")return Oc(t);if(n==="relu6")return rC(t);if(n==="prelu")return Jg(t,e);throw new Error("Unknown fused activation "+n+".")},Aq=X({matMul_:function(t){var n,e=t.a,r=t.b,i=t.transposeA,o=i!==void 0&&i,a=t.transposeB,s=a!==void 0&&a,u=t.bias,l=t.activation,c=l===void 0?"linear":l,d=t.preluActivationWeights;if(hC(K.state.gradientDepth,c)===!1){var f=Vg(e,r,o,s);return u!=null&&(f=at(f,u)),gC(f,c,d)}var p=V(e,"a","fused matMul"),h=V(r,"b","fused matMul");n=dn(p,h),p=n[0],h=n[1];var v=o?p.shape[p.rank-2]:p.shape[p.rank-1],g=s?h.shape[h.rank-1]:h.shape[h.rank-2],m=o?p.shape[p.rank-1]:p.shape[p.rank-2],y=s?h.shape[h.rank-2]:h.shape[h.rank-1],b=p.shape.slice(0,-2),w=h.shape.slice(0,-2),x=Me(b),C=Me(w);U(p.rank>=2&&h.rank>=2&&p.rank===h.rank,function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+p.rank+" and "+h.rank+"."}),U(Bn(b,w),function(){return"Error in fused matMul: outer dimensions ("+b+") and ("+w+") of Tensors with shapes "+p.shape+" and "+h.shape+" must match."}),U(v===g,function(){return"Error in fused matMul: inner shapes ("+v+") and ("+g+") of Tensors with shapes "+p.shape+" and "+h.shape+" and transposeA="+o+" and transposeB="+s+" must match."});var E,S,N=p.shape.slice(0,-2).concat([m,y]),k=o?p.as3D(x,v,m):p.as3D(x,m,v),M=s?h.as3D(C,y,g):h.as3D(C,g,y);u!=null&&ut(N,(E=dn(E=V(u,"bias","fused matMul"),p)[0]).shape),d!=null&&(S=V(d,"prelu weights","fused matMul"));var D={$a:k,$b:M};return u!=null&&(D.$bias=E),d!=null&&(D.$preluActivationWeights=S),K.runKernelFunc(function(R,O){var P=R.fusedBatchMatMul({a:k,b:M,transposeA:o,transposeB:s,bias:E,activation:c,preluActivationWeights:S});return O([k,M,P]),P},D,function(R,O){var P=O[0],A=O[1],I=O[2],_=mC(R,I,c),F={};return u!=null&&(F={$bias:function(){return vC(E,_)}}),Object.assign(o||s?!o&&s?{$a:function(){return _.matMul(A,!1,!1)},$b:function(){return _.matMul(P,!0,!1)}}:o&&!s?{$a:function(){return A.matMul(_,!1,!0)},$b:function(){return P.matMul(_,!1,!1)}}:{$a:function(){return A.matMul(_,!0,!0)},$b:function(){return _.matMul(P,!0,!0)}}:{$a:function(){return _.matMul(A,!1,!0)},$b:function(){return P.matMul(_,!0,!1)}},F)}).reshape(N)}}),Oq=X({conv2d_:function(t){var n=t.x,e=t.filter,r=t.strides,i=t.pad,o=t.dataFormat,a=o===void 0?"NHWC":o,s=t.dilations,u=s===void 0?[1,1]:s,l=t.dimRoundingMode,c=t.bias,d=t.activation,f=d===void 0?"linear":d,p=t.preluActivationWeights;if(f=f||"linear",hC(K.state.gradientDepth,f)===!1){var h=ku(n,e,r,i,a,u,l);return c!=null&&(h=at(h,c)),gC(h,f,p)}var v=V(n,"x","conv2d"),g=V(e,"filter","conv2d"),m=v,y=!1;v.rank===3&&(y=!0,m=v.as4D(1,v.shape[0],v.shape[1],v.shape[2])),U(m.rank===4,function(){return"Error in fused conv2d: input must be rank 4, but got rank "+m.rank+"."}),U(g.rank===4,function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+g.rank+"."}),l!=null&&U(nn(i),function(){return"Error in fused conv2d: pad must be an integer when using, dimRoundingMode "+l+" but got pad "+i+"."}),U(m.shape[3]===g.shape[2],function(){return"Error in conv2d: depth of input ("+m.shape[3]+") must match input depth for filter "+g.shape[2]+"."}),U(yr(r,u),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+u+"'"}),U(a==="NHWC",function(){return"Error in conv2d: got dataFormat of "+a+" but only NHWC is currently supported."});var b,w,x=bs(m.shape,g.shape,r,u,i,l);c!=null&&(b=dn(b=V(c,"bias","fused conv2d"),v)[0],ut(x.outShape,b.shape)),p!=null&&(w=V(p,"prelu weights","fused conv2d"));var C={x:m,$filter:g};c!=null&&(C.$bias=b),p!=null&&(C.$preluActivationWeights=w);var E=K.runKernelFunc(function(S,N){var k=S.fusedConv2d({input:m,filter:g,convInfo:x,bias:b,activation:f,preluActivationWeights:w});return N([g,m,k]),k},C,function(S,N){var k=N,M=k[0],D=k[1],R=k[2],O=mC(S,R,f);U(fu(u),function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+u+"'"});var P={};return c!=null&&(P={$bias:function(){return vC(b,O)}}),Object.assign({x:function(){return cL(D.shape,O,M,r,i)},$filter:function(){return eC(D,O,M.shape,r,i)}},P)});return y?E.as3D(E.shape[1],E.shape[2],E.shape[3]):E}}),Dq=X({depthwiseConv2d_:function(t){var n=t.x,e=t.filter,r=t.strides,i=t.pad,o=t.dataFormat,a=o===void 0?"NHWC":o,s=t.dilations,u=s===void 0?[1,1]:s,l=t.dimRoundingMode,c=t.bias,d=t.activation,f=d===void 0?"linear":d,p=t.preluActivationWeights;if(hC(K.state.gradientDepth,f)===!1){var h=Ac(n,e,r,i,a,u,l);return c!=null&&(h=at(h,c)),gC(h,f,p)}var v=V(n,"x","depthwiseConv2d"),g=V(e,"filter","depthwiseConv2d"),m=v,y=!1;v.rank===3&&(y=!0,m=v.as4D(1,v.shape[0],v.shape[1],v.shape[2])),U(m.rank===4,function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got rank "+m.rank+"."}),U(g.rank===4,function(){return"Error in fused depthwiseConv2d: filter must be rank 4, but got rank "+g.rank+"."}),U(m.shape[3]===g.shape[2],function(){return"Error in fused depthwiseConv2d: number of input channels ("+m.shape[3]+") must match the inChannels dimension in filter "+g.shape[2]+"."}),u==null&&(u=[1,1]),U(yr(r,u),function(){return"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+u+"'"}),l!=null&&U(nn(i),function(){return"Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode "+l+" but got pad "+i+"."});var b,w,x=bs(m.shape,g.shape,r,u,i,l,!0);c!=null&&(b=dn(b=V(c,"bias","fused conv2d"),v)[0],ut(x.outShape,b.shape)),p!=null&&(w=V(p,"prelu weights","fused depthwiseConv2d"));var C={x:m,$filter:g};c!=null&&(C.$bias=b),p!=null&&(C.$preluActivationWeights=w);var E=K.runKernelFunc(function(S,N){var k=S.fusedDepthwiseConv2D({input:m,filter:g,convInfo:x,bias:b,activation:f,preluActivationWeights:w});return N([m,g,k]),k},C,function(S,N){U(fu(u),function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+u+"'"});var k=N[0],M=N[1],D=N[2],R=mC(S,D,f),O={};return c!=null&&(O={$bias:function(){return vC(b,R)}}),Object.assign({x:function(){return dL(k.shape,R,M,x)},$filter:function(){return fL(k,R,M.shape,x)}},O)});return y?E.as3D(E.shape[1],E.shape[2],E.shape[3]):E}}),oc=Object.freeze({matMul:Aq,conv2d:Oq,depthwiseConv2d:Dq}),Mq=Object.freeze({image:eu,linalg:pC,losses:DL,spectral:kL,fused:oc,signal:AL,square:SE,conv1d:zg,conv2d:ku,conv3d:Bg,depthwiseConv2d:Ac,separableConv2d:tC,conv2dTranspose:jg,conv3dTranspose:pL,op:X,batchNormalization2d:$P,batchNormalization3d:UP,batchNormalization4d:WP,batchNormalization:HP,batchNorm:$E,batchNorm2d:UE,batchNorm3d:WE,batchNorm4d:HE,booleanMaskAsync:sL,complex:Nn,real:Ir,imag:vi,concat:lr,concat1d:tE,concat2d:nE,concat3d:rE,concat4d:iE,split:Go,matMul:Vg,dot:hL,outerProduct:mL,reverse:xo,reverse1d:vL,reverse2d:gL,reverse3d:yL,reverse4d:bL,maxPool:$g,avgPool:Ug,pool:SL,maxPool3d:Wg,avgPool3d:Hg,slice:ni,slice1d:dp,slice2d:Gg,slice3d:fp,slice4d:rc,abs:ss,acos:EE,acosh:CE,asin:RE,asinh:TE,atan:NE,atanh:kE,ceil:IE,clipByValue:br,cos:_E,cosh:AE,erf:OE,exp:DE,expm1:ME,floor:Ig,log:na,log1p:PE,logSigmoid:MP,neg:Tu,reciprocal:LE,round:FE,rsqrt:_g,sigmoid:Ag,sign:zE,isNaN:PP,isInf:LP,isFinite:FP,sin:BE,sinh:jE,softplus:sp,sqrt:up,step:zP,tan:VE,tanh:Og,all:qg,any:zf,argMax:Bf,argMin:nC,logSumExp:CL,max:us,mean:gn,min:Kg,moments:pp,sum:zr,prod:Xg,equal:Nu,equalStrict:tL,greater:Ic,greaterEqual:cp,greaterEqualStrict:nL,greaterStrict:rL,less:JE,lessEqual:QE,lessEqualStrict:iL,lessStrict:oL,notEqual:nc,notEqualStrict:aL,add:at,addN:qE,addStrict:qP,atan2:KE,div:cr,divStrict:KP,floorDiv:Lg,maximum:Ro,maximumStrict:XP,minimum:kc,minimumStrict:YP,mod:XE,modStrict:JP,mul:He,mulStrict:Fg,pow:tc,powStrict:QP,squaredDifference:YE,squaredDifferenceStrict:ZP,sub:jn,subStrict:eL,elu:Oc,leakyRelu:Yg,prelu:Jg,relu:ws,relu6:rC,selu:Qg,logicalAnd:ua,logicalNot:GE,logicalOr:Mg,logicalXor:GP,where:ra,whereAsync:Pg,buffer:Ge,print:BM,batchToSpaceND:xg,cast:Sg,clone:jM,cumsum:VM,depthToSpace:aE,expandDims:Hr,eye:Eg,multinomial:sE,oneHot:Zl,pad:ys,pad1d:$M,pad2d:UM,pad3d:WM,pad4d:HM,rand:GM,randomNormal:uE,randomGamma:qM,randomUniform:Cu,reshape:rp,spaceToBatchND:Cg,squeeze:ip,stack:$i,tile:Qa,truncatedNormal:op,unstack:du,setdiff1dAsync:lE,fill:Tc,linspace:eE,ones:Co,range:bg,scalar:ke,tensor:mn,tensor1d:Fr,tensor2d:Ho,tensor3d:QS,tensor4d:Ra,tensor5d:FM,tensor6d:zM,variable:ZS,zeros:It,onesLike:ti,zerosLike:dt,transpose:Zt,softmax:Ru,logSoftmax:Ng,localResponseNormalization:iC,norm:oC,gather:_c,unsortedSegmentSum:ZE,basicLSTMCell:RL,multiRNNCell:TL,movingAverage:NL,stridedSlice:aC,topk:sC,scatterND:uC,fft:hp,ifft:ic,rfft:mp,irfft:Zg,sparseToDense:ey,gatherND:lC,diag:IL,dropout:cC,hannWindow:ty,hammingWindow:dC,frame:ny,stft:fC,inTopKAsync:OL});function pe(t,n){Array.isArray(t)||(t=[t]),t.forEach(function(e){e!=null&&U(e.dtype!=="complex64",function(){return n+" does not support complex64 tensors."})})}function i1(t,n,e,r){if(e==="linear")return t.linear(n);if(e==="relu")return t.relu(n);if(e==="elu")return t.elu(n);if(e==="relu6")return t.relu6(n);if(e==="prelu")return t.prelu(n,r);throw new Error("Activation "+e+" has not been implemented for the CPU backend.")}var Pq=function(t){function n(){var e=t.call(this)||this;if(e.blockSize=48,e.firstUse=!0,ie().get("IS_BROWSER")){var r=typeof OffscreenCanvas<"u"?new OffscreenCanvas(300,150):typeof document<"u"?document.createElement("canvas"):null;r!==null&&(e.fromPixels2DContext=r.getContext("2d"))}return e.data=new fE(e,K),e}return Hi(n,t),n.prototype.write=function(e,r,i){this.firstUse&&(this.firstUse=!1,ie().get("IS_NODE")&&ww(`
============================
Hi there 👋. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.
============================
`));var o={};return this.data.set(o,{values:e,dtype:i}),o},n.prototype.move=function(e,r,i,o){this.data.set(e,{values:r,dtype:o})},n.prototype.numDataIds=function(){return this.data.numDataIds()},n.prototype.fromPixels=function(e,r){if(e==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var i,o,a=e.data instanceof Uint8Array,s=typeof ImageData<"u"&&e instanceof ImageData,u=typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement,l=typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement,c=u?[e.videoWidth,e.videoHeight]:[e.width,e.height],d=c[0],f=c[1];if(ie().get("IS_NODE")&&e.getContext==null)throw new Error("When running in node, pixels must be an HTMLCanvasElement like the one returned by the `canvas` npm package");if(e.getContext!=null)i=e.getContext("2d").getImageData(0,0,d,f).data;else if(s||a)i=e.data;else{if(!l&&!u)throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData or {data: Uint32Array, width: number, height: number}, but was "+e.constructor.name);if(this.fromPixels2DContext==null)throw new Error("Can't read pixels from HTMLImageElement outside the browser.");this.fromPixels2DContext.canvas.width=d,this.fromPixels2DContext.canvas.height=f,this.fromPixels2DContext.drawImage(e,0,0,d,f),i=this.fromPixels2DContext.getImageData(0,0,d,f).data}if(r===4)o=new Int32Array(i);else{var p=d*f;o=new Int32Array(p*r);for(var h=0;h<p;h++)for(var v=0;v<r;++v)o[h*r+v]=i[4*h+v]}return QS(o,[f,d,r],"int32")},n.prototype.read=function(e){return Ae(this,void 0,void 0,function(){return Oe(this,function(r){return[2,this.readSync(e)]})})},n.prototype.readSync=function(e){var r=this.data.get(e),i=r.dtype,o=r.complexTensors;return i==="complex64"?Ew(this.readSync(o.real.dataId),this.readSync(o.imag.dataId)):this.data.get(e).values},n.prototype.bufferSync=function(e){var r=this.readSync(e.dataId),i=r;if(e.dtype==="string")try{i=r.map(function(o){return _f(o)})}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Ge(e.shape,e.dtype,i)},n.prototype.makeOutput=function(e,r,i){var o=this.write(e,r,i);return K.makeTensorFromDataId(o,r,i,this)},n.prototype.disposeData=function(e){if(this.data.has(e)){var r=this.data.get(e).complexTensors;r!=null&&(r.real.dispose(),r.imag.dispose()),this.data.delete(e)}},n.prototype.time=function(e){return Ae(this,void 0,void 0,function(){var r;return Oe(this,function(i){return r=Di(),e(),[2,{kernelMs:Di()-r}]})})},n.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},n.prototype.complex=function(e,r){var i=this.makeOutput(null,e.shape,"complex64");return this.data.get(i.dataId).complexTensors={real:K.keep(e.clone()),imag:K.keep(r.clone())},i},n.prototype.real=function(e){return this.data.get(e.dataId).complexTensors.real.clone()},n.prototype.imag=function(e){return this.data.get(e.dataId).complexTensors.imag.clone()},n.prototype.slice=function(e,r,i){if(pe(e,"slice"),cE(e.shape,r,i)){var o=dE(r,e.strides),a=Me(i);return mn(this.readSync(e.dataId).subarray(o,o+a),i,e.dtype)}for(var s=Ge(i,e.dtype),u=this.bufferSync(e),l=0;l<s.size;++l){var c=s.indexToLoc(l).map(function(d,f){return d+r[f]});s.values[l]=u.get.apply(u,c)}return s.toTensor()},n.prototype.stridedSlice=function(e,r,i,o){pe(e,"stridedSlice");var a=Rg(r,i,o);if(a.some(function(p){return p===0}))return mn([],a);for(var s=Ge(a,e.dtype),u=this.bufferSync(e),l=0;l<s.size;l++){for(var c=s.indexToLoc(l),d=new Array(c.length),f=0;f<d.length;f++)d[f]=c[f]*o[f]+r[f];s.set.apply(s,[u.get.apply(u,d)].concat(c))}return s.toTensor()},n.prototype.diag=function(e){for(var r=this.readSync(e.dataId),i=Ge([e.size,e.size],e.dtype),o=i.values,a=0;a<r.length;a++)o[a*e.size+a]=r[a];return i.toTensor()},n.prototype.unstack=function(e,r){for(var i=e.shape[r],o=new Array(e.rank-1),a=0,s=0;s<e.rank;s++)s!==r&&(o[a++]=e.shape[s]);var u=new Array(e.rank).fill(0),l=e.shape.slice();l[r]=1;var c=new Array(i);for(s=0;s<c.length;s++)u[r]=s,c[s]=this.slice(e,u,l).reshape(o);return c},n.prototype.reverse=function(e,r){pe(e,"reverse");for(var i=Ge(e.shape,e.dtype),o=this.bufferSync(e),a=function(u){var l=i.indexToLoc(u),c=l.slice();r.forEach(function(d){return c[d]=e.shape[d]-1-c[d]}),i.set.apply(i,[o.get.apply(o,c)].concat(l))},s=0;s<i.size;s++)a(s);return i.toTensor()},n.prototype.concat=function(e,r){var i=this;if(e[0].dtype==="complex64"){var o=e.map(function(p){return Ir(p)}),a=e.map(function(p){return vi(p)});return Nn(this.concat(o,r),this.concat(a,r))}var s=e.map(function(p){var h=Me(p.shape.slice(r));return p.as2D(-1,h)}),u=cu(s.map(function(p){return p.shape}),1),l=Ge(u,e[0].dtype).values;if(s[0].shape[0]===1){var c=0;s.forEach(function(p){l.set(i.readSync(p.dataId),c),c+=p.size})}else{var d=0;s.forEach(function(p){for(var h=i.readSync(p.dataId),v=0,g=0;g<p.shape[0];++g)for(var m=g*u[1]+d,y=0;y<p.shape[1];++y)l[m+y]=h[v++];d+=p.shape[1]})}var f=cu(e.map(function(p){return p.shape}),r);return mn(l,f,e[0].dtype)},n.prototype.neg=function(e){return pe(e,"neg"),this.multiply(ke(-1),e)},n.prototype.add=function(e,r){return e.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(e.cast("complex64"),r.cast("complex64"),function(i,o,a,s){return{real:i+a,imag:o+s}}):this.broadcastedBinaryOp(e,r,bn(e.dtype,r.dtype),function(i,o){return i+o})},n.prototype.addN=function(e){var r=this;pe(e,"addN");for(var i=e.map(function(c){return r.readSync(c.dataId)}),o=Ge(e[0].shape,e[0].dtype),a=o.values,s=0;s<e.length;s++)for(var u=i[s],l=0;l<a.length;l++)a[l]+=u[l];return o.toTensor()},n.prototype.subtract=function(e,r){return e.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(e.cast("complex64"),r.cast("complex64"),function(i,o,a,s){return{real:i-a,imag:o-s}}):this.broadcastedBinaryOp(e,r,bn(e.dtype,r.dtype),function(i,o){return i-o})},n.prototype.pow=function(e,r){return pe([e,r],"pow"),this.broadcastedBinaryOp(e,r,e.dtype,function(i,o){return Math.pow(i,o)})},n.prototype.batchMatMul=function(e,r,i,o){pe([e,r],"matMul");for(var a=i?e.shape[1]:e.shape[2],s=i?e.shape[2]:e.shape[1],u=o?r.shape[1]:r.shape[2],l=e.shape[0],c=this.readSync(e.dataId),d=this.readSync(r.dataId),f=i?[e.strides[0],1,e.strides[1]]:[e.strides[0],e.strides[1],1],p=f[0],h=f[1],v=f[2],g=o?[1,r.strides[1],r.strides[0]]:[r.strides[1],1,r.strides[0]],m=g[0],y=g[1],b=g[2],w=s*u,x=Ge([l,s,u],e.dtype),C=x.values,E=this.blockSize,S=0;S<l;S++)for(var N=0;N<s;N+=E)for(var k=0;k<u;k+=E)for(var M=0;M<a;M+=E)for(var D=Math.min(N+E,s),R=Math.min(k+E,u),O=Math.min(M+E,a),P=N;P<D;P++)for(var A=k;A<R;A++){for(var I=0,_=M;_<O;_++)I+=c[S*p+P*h+_*v]*d[_*m+A*y+S*b];C[S*w+(P*u+A)]+=I}return x.toTensor()},n.prototype.fusedBatchMatMul=function(e){var r=e.a,i=e.b,o=e.transposeA,a=e.transposeB,s=e.bias,u=e.activation,l=e.preluActivationWeights,c=this.batchMatMul(r,i,o,a);return s&&(c=this.add(c,s)),u&&(c=i1(this,c,u,l)),c},n.prototype.multiply=function(e,r){return e.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(e.cast("complex64"),r.cast("complex64"),function(i,o,a,s){return{real:i*a-o*s,imag:i*s+o*a}}):this.broadcastedBinaryOp(e,r,bn(e.dtype,r.dtype),function(i,o){return i*o})},n.prototype.realDivide=function(e,r){return pe([e,r],"realDivide"),this.broadcastedBinaryOp(e,r,"float32",function(i,o){return i/o})},n.prototype.floorDiv=function(e,r){return pe([e,r],"floorDiv"),this.broadcastedBinaryOp(e,r,"int32",function(i,o){return Math.floor(i/o)})},n.prototype.sum=function(e,r){pe(e,"sum"),Tr("sum",r,e.rank);for(var i=Gn(e.shape,r),o=i[0],a=i[1],s=It(o,bn(e.dtype,"int32")),u=Me(a),l=this.readSync(s.dataId),c=this.readSync(e.dataId),d=0;d<l.length;++d){for(var f=d*u,p=0,h=0;h<u;++h)p+=c[f+h];l[d]=p}return s},n.prototype.prod=function(e,r){pe(e,"sum");for(var i=Gn(e.shape,r),o=i[0],a=i[1],s=It(o,bn(e.dtype,"int32")),u=Me(a),l=this.readSync(s.dataId),c=this.readSync(e.dataId),d=0;d<l.length;++d){for(var f=d*u,p=1,h=0;h<u;++h)p*=c[f+h];l[d]=p}return s},n.prototype.unsortedSegmentSum=function(e,r,i){pe(e,"unsortedSegmentSum");for(var o=[],a=e.rank-r.rank,s=0;s<a;++s)r=r.expandDims(s+1);for(s=0;s<i;++s){var u=ke(s,"int32"),l=Nu(u,r).asType("float32").mul(e).sum(0);o.push(l)}return $i(o)},n.prototype.argMin=function(e,r){pe(e,"argMin");var i=[r];Tr("argMin",i,e.rank);for(var o=Gn(e.shape,i),a=o[0],s=o[1],u=It(a,"int32"),l=Me(s),c=this.readSync(u.dataId),d=this.readSync(e.dataId),f=0;f<c.length;++f){for(var p=f*l,h=d[p],v=0,g=0;g<l;++g){var m=d[p+g];m<h&&(h=m,v=g)}c[f]=v}return u},n.prototype.argMax=function(e,r){pe(e,"argMax");var i=[r];Tr("argMax",i,e.rank);for(var o=Gn(e.shape,i),a=o[0],s=o[1],u=It(a,"int32"),l=Me(s),c=this.readSync(u.dataId),d=this.readSync(e.dataId),f=0;f<c.length;++f){for(var p=f*l,h=d[p],v=0,g=0;g<l;++g){var m=d[p+g];m>h&&(h=m,v=g)}c[f]=v}return u},n.prototype.cumsum=function(e,r,i,o){if(pe(e,"cumsum"),r!==e.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(e.rank-1)+" but got axis="+r);for(var a=bn(e.dtype,"int32"),s=It(e.shape,a),u=this.readSync(s.dataId),l=this.readSync(e.dataId),c=e.shape[e.rank-1],d=o?function(g,m){return g+c-m-1}:function(g,m){return g+m},f=0;f<l.length;f+=c)for(var p=0;p<c;p++){var h=d(f,p);if(p===0)u[h]=i?0:l[h];else{var v=d(f,p-1);u[h]=i?l[v]+u[v]:l[h]+u[v]}}return s},n.prototype.equal=function(e,r){return pe([e,r],"equal"),this.broadcastedBinaryOp(e,r,"bool",function(i,o){return i===o?1:0})},n.prototype.notEqual=function(e,r){return pe([e,r],"notEqual"),this.broadcastedBinaryOp(e,r,"bool",function(i,o){return i!==o?1:0})},n.prototype.less=function(e,r){return pe([e,r],"less"),this.broadcastedBinaryOp(e,r,"bool",function(i,o){return i<o?1:0})},n.prototype.lessEqual=function(e,r){return pe([e,r],"lessEqual"),this.broadcastedBinaryOp(e,r,"bool",function(i,o){return i<=o?1:0})},n.prototype.greater=function(e,r){return pe([e,r],"greater"),this.broadcastedBinaryOp(e,r,"bool",function(i,o){return i>o?1:0})},n.prototype.greaterEqual=function(e,r){return pe([e,r],"greaterEqual"),this.broadcastedBinaryOp(e,r,"bool",function(i,o){return i>=o?1:0})},n.prototype.logicalNot=function(e){pe(e,"logicalNot");for(var r=this.readSync(e.dataId),i=new Uint8Array(r.length),o=0;o<r.length;++o)i[o]=r[o]?0:1;return this.makeOutput(i,e.shape,"bool")},n.prototype.logicalAnd=function(e,r){return pe([e,r],"logicalAnd"),this.broadcastedBinaryOp(e,r,"bool",function(i,o){return i&&o})},n.prototype.logicalOr=function(e,r){return pe([e,r],"logicalOr"),this.broadcastedBinaryOp(e,r,"bool",function(i,o){return i||o})},n.prototype.select=function(e,r,i){pe([e,r,i],"select");for(var o=this.readSync(e.dataId),a=this.readSync(r.dataId),s=this.readSync(i.dataId),u=It(r.shape,bn(r.dtype,i.dtype)),l=this.readSync(u.dataId),c=0,d=e.rank===0||e.rank>1||r.rank===1?1:Me(r.shape.slice(1)),f=0;f<o.length;f++)for(var p=0;p<d;p++)o[f]===1?l[c++]=a[f]:l[c++]=s[f];return u},n.prototype.where=function(e){pe([e],"where");var r=this.readSync(e.dataId);return yE(e.shape,r)},n.prototype.topk=function(e,r,i){return pe(e,"topk"),iP(this.readSync(e.dataId),e.shape,e.dtype,r)},n.prototype.min=function(e,r){pe(e,"min"),Tr("min",r,e.rank);for(var i=Gn(e.shape,r),o=i[0],a=i[1],s=It(o,e.dtype),u=Me(a),l=this.readSync(s.dataId),c=this.readSync(e.dataId),d=0;d<l.length;++d){for(var f=d*u,p=c[f],h=0;h<u;++h){var v=c[f+h];v<p&&(p=v)}l[d]=p}return s},n.prototype.minimum=function(e,r){return pe([e,r],"minimum"),this.broadcastedBinaryOp(e,r,e.dtype,function(i,o){return Math.min(i,o)})},n.prototype.mod=function(e,r){return pe([e,r],"mod"),this.broadcastedBinaryOp(e,r,e.dtype,function(i,o){var a=i%o;return i<0&&o<0||i>=0&&o>=0?a:(a+o)%o})},n.prototype.max=function(e,r){pe(e,"max"),Tr("max",r,e.rank);for(var i=Gn(e.shape,r),o=i[0],a=i[1],s=It(o,e.dtype),u=Me(a),l=this.readSync(s.dataId),c=this.readSync(e.dataId),d=0;d<l.length;++d){for(var f=d*u,p=c[f],h=0;h<u;++h){var v=c[f+h];v>p&&(p=v)}l[d]=p}return s},n.prototype.maximum=function(e,r){return pe([e,r],"maximum"),this.broadcastedBinaryOp(e,r,e.dtype,function(i,o){return Math.max(i,o)})},n.prototype.all=function(e,r){pe(e,"all"),Tr("all",r,e.rank);for(var i=Gn(e.shape,r),o=i[0],a=i[1],s=It(o,e.dtype),u=Me(a),l=this.readSync(s.dataId),c=this.readSync(e.dataId),d=0;d<l.length;++d){for(var f=d*u,p=c[f],h=0;h<u;++h){var v=c[f+h];p=p&&v}l[d]=p}return s},n.prototype.any=function(e,r){pe(e,"any"),Tr("any",r,e.rank);for(var i=Gn(e.shape,r),o=i[0],a=i[1],s=It(o,e.dtype),u=Me(a),l=this.readSync(s.dataId),c=this.readSync(e.dataId),d=0;d<l.length;++d){for(var f=d*u,p=c[f],h=0;h<u;++h){var v=c[f+h];p=p||v}l[d]=p}return s},n.prototype.squaredDifference=function(e,r){return pe([e,r],"squaredDifference"),this.broadcastedBinaryOp(e,r,e.dtype,function(i,o){var a=i-o;return a*a})},n.prototype.ceil=function(e){pe(e,"ceil");for(var r=this.readSync(e.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o)i[o]=Math.ceil(r[o]);return this.makeOutput(i,e.shape,"float32")},n.prototype.floor=function(e){pe(e,"floor");for(var r=this.readSync(e.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o)i[o]=Math.floor(r[o]);return this.makeOutput(i,e.shape,"float32")},n.prototype.sign=function(e){pe(e,"x");for(var r=this.readSync(e.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o)r[o]<0?i[o]=-1:r[o]>0?i[o]=1:i[o]=0;return this.makeOutput(i,e.shape,"float32")},n.prototype.isNaN=function(e){pe(e,"x");for(var r=this.readSync(e.dataId),i=new Uint8Array(r.length),o=0;o<r.length;++o)Number.isNaN(r[o])&&(i[o]=1);return this.makeOutput(i,e.shape,"bool")},n.prototype.isInf=function(e){pe(e,"x");for(var r=this.readSync(e.dataId),i=new Uint8Array(r.length),o=0;o<r.length;++o)Math.abs(r[o])===1/0&&(i[o]=1);return this.makeOutput(i,e.shape,"bool")},n.prototype.isFinite=function(e){pe(e,"x");for(var r=this.readSync(e.dataId),i=new Uint8Array(r.length),o=0;o<r.length;++o)Number.isFinite(r[o])&&(i[o]=1);return this.makeOutput(i,e.shape,"bool")},n.prototype.round=function(e){pe(e,"round");for(var r=this.readSync(e.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o){var a=Math.floor(r[o]);r[o]-a<.5?i[o]=Math.floor(r[o]):r[o]-a>.5?i[o]=Math.ceil(r[o]):i[o]=a%2==0?a:a+1}return this.makeOutput(i,e.shape,"float32")},n.prototype.exp=function(e){pe(e,"exp");for(var r=this.readSync(e.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o)i[o]=Math.exp(r[o]);return this.makeOutput(i,e.shape,"float32")},n.prototype.expm1=function(e){pe(e,"expm1");for(var r=this.readSync(e.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o)i[o]=Math.expm1(r[o]);return this.makeOutput(i,e.shape,"float32")},n.prototype.log=function(e){pe(e,"log");for(var r=this.readSync(e.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o){var a=r[o];i[o]=Math.log(a)}return this.makeOutput(i,e.shape,"float32")},n.prototype.log1p=function(e){pe(e,"log1p");for(var r=this.readSync(e.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o){var a=r[o];i[o]=Math.log1p(a)}return this.makeOutput(i,e.shape,"float32")},n.prototype.sqrt=function(e){pe(e,"sqrt");for(var r=this.readSync(e.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o){var a=r[o];i[o]=Math.sqrt(a)}return this.makeOutput(i,e.shape,"float32")},n.prototype.rsqrt=function(e){pe(e,"rsqrt");for(var r=this.readSync(e.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o){var a=r[o];i[o]=1/Math.sqrt(a)}return this.makeOutput(i,e.shape,"float32")},n.prototype.reciprocal=function(e){pe(e,"reciprocal");for(var r=this.readSync(e.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o)i[o]=1/r[o];return this.makeOutput(i,e.shape,"float32")},n.prototype.linear=function(e){return e},n.prototype.relu=function(e){pe(e,"relu");for(var r=It(e.shape,e.dtype),i=this.readSync(r.dataId),o=this.readSync(e.dataId),a=0;a<o.length;++a)i[a]=Math.max(0,o[a]);return r},n.prototype.relu6=function(e){pe(e,"relu");for(var r=It(e.shape,e.dtype),i=this.readSync(r.dataId),o=this.readSync(e.dataId),a=0;a<o.length;++a)i[a]=Math.min(Math.max(0,o[a]),6);return r},n.prototype.prelu=function(e,r){return pe([e,r],"prelu"),this.broadcastedBinaryOp(e,r,e.dtype,function(i,o){return i<0?o*i:i})},n.prototype.elu=function(e){pe(e,"elu");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o){var a=i[o];r[o]=a>=0?a:Math.exp(a)-1}return this.makeOutput(r,e.shape,"float32")},n.prototype.eluDer=function(e,r){pe([e,r],"eluDer");for(var i=new Float32Array(r.size),o=this.readSync(r.dataId),a=this.readSync(e.dataId),s=0;s<o.length;++s){var u=o[s];i[s]=u>=1?a[s]:a[s]*(u+1)}return this.makeOutput(i,r.shape,"float32")},n.prototype.selu=function(e){pe(e,"selu");for(var r=wE,i=xE,o=new Float32Array(e.size),a=this.readSync(e.dataId),s=0;s<a.length;++s){var u=a[s];o[s]=u>=0?i*u:r*(Math.exp(u)-1)}return this.makeOutput(o,e.shape,"float32")},n.prototype.clip=function(e,r,i){pe(e,"clip");for(var o=new Float32Array(e.size),a=this.readSync(e.dataId),s=0;s<a.length;++s){var u=a[s];o[s]=u>i?i:u<r?r:u}return this.makeOutput(o,e.shape,"float32")},n.prototype.abs=function(e){for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.abs(i[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.complexAbs=function(e){for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<e.size;++o){var a=i[2*o],s=i[2*o+1];r[o]=Math.hypot(a,s)}return this.makeOutput(r,e.shape,"float32")},n.prototype.int=function(e){pe(e,"int");for(var r=new Int32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=i[o];return this.makeOutput(r,e.shape,"int32")},n.prototype.sigmoid=function(e){pe(e,"sigmoid");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=1/(1+Math.exp(-i[o]));return this.makeOutput(r,e.shape,"float32")},n.prototype.softplus=function(e){pe(e,"softplus");for(var r=Math.log(11920928955078125e-23)+2,i=new Float32Array(e.size),o=this.readSync(e.dataId),a=0;a<o.length;++a){var s=o[a]>-r,u=o[a]<r,l=Math.exp(o[a]),c=void 0;c=u?l:s?o[a]:Math.log(1+l),i[a]=c}return this.makeOutput(i,e.shape,"float32")},n.prototype.sin=function(e){pe(e,"sin");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.sin(i[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.cos=function(e){pe(e,"cos");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.cos(i[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.tan=function(e){pe(e,"tan");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.tan(i[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.asin=function(e){pe(e,"asin");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.asin(i[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.acos=function(e){pe(e,"acos");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.acos(i[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.atan=function(e){pe(e,"atan");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.atan(i[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.atan2=function(e,r){return pe([e,r],"atan2"),this.broadcastedBinaryOp(e,r,e.dtype,function(i,o){return Math.atan2(i,o)})},n.prototype.sinh=function(e){pe(e,"sinh");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.sinh(i[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.cosh=function(e){pe(e,"cosh");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.cosh(i[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.tanh=function(e){pe(e,"tanh");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=XD(i[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.asinh=function(e){pe(e,"asinh");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.asinh(i[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.acosh=function(e){pe(e,"acosh");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.acosh(i[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.atanh=function(e){pe(e,"atanh");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.atanh(i[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.erf=function(e){pe(e,"erf");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o){var a=Math.sign(i[o]),s=Math.abs(i[o]),u=1/(1+.3275911*s);r[o]=a*(1-((((1.061405429*u-1.453152027)*u+1.421413741)*u-.284496736)*u+.254829592)*u*Math.exp(-s*s))}return this.makeOutput(r,e.shape,"float32")},n.prototype.step=function(e,r){r===void 0&&(r=0),pe(e,"step");for(var i=new Float32Array(e.size),o=this.readSync(e.dataId),a=0;a<o.length;++a){var s=o[a];isNaN(s)?i[a]=NaN:i[a]=s>0?1:r}return this.makeOutput(i,e.shape,"float32")},n.prototype.fusedConv2d=function(e){var r=e.input,i=e.filter,o=e.convInfo,a=e.bias,s=e.activation,u=e.preluActivationWeights,l=this.conv2d(r,i,o);return a&&(l=this.add(l,a)),s&&(l=i1(this,l,s,u)),l},n.prototype.conv2d=function(e,r,i){pe([e,r],"conv2d");for(var o=i.filterHeight,a=i.filterWidth,s=i.dilationHeight,u=i.dilationWidth,l=i.padInfo.left,c=i.padInfo.top,d=i.dataFormat==="channelsLast",f=Ge(i.outShape,e.dtype),p=e.strides[0],h=d?e.strides[1]:e.strides[2],v=d?e.strides[2]:1,g=d?1:e.strides[1],m=f.strides[0],y=d?f.strides[1]:f.strides[2],b=d?f.strides[2]:1,w=d?1:f.strides[1],x=this.readSync(e.dataId),C=this.readSync(r.dataId),E=f.values,S=0;S<i.batchSize;++S)for(var N=S*p,k=S*m,M=0;M<i.outHeight;++M)for(var D=k+M*y,R=M*i.strideHeight-c,O=0;O<o;O++){var P=R+O*s;if(!(P<0||P>=i.inHeight))for(var A=O*r.strides[0],I=N+P*h,_=0;_<i.outWidth;++_)for(var F=D+_*b,L=_*i.strideWidth-l,W=0;W<a;W++){var B=L+W*u;if(!(B<0||B>=i.inWidth))for(var q=I+B*v,G=A+W*r.strides[1],re=0;re<i.inChannels;++re){for(var j=x[q+re*g],ae=0;ae<i.outChannels;++ae)E[F+ae*w]+=j*C[G+ae];G+=i.outChannels}}}return f.toTensor()},n.prototype.conv3d=function(e,r,i){for(var o=i.filterDepth,a=i.filterHeight,s=i.filterWidth,u=i.dilationDepth,l=i.dilationHeight,c=i.dilationWidth,d=i.padInfo.front,f=i.padInfo.left,p=i.padInfo.top,h=Ge(i.outShape,e.dtype),v=this.readSync(e.dataId),g=this.readSync(r.dataId),m=h.values,y=0;y<i.batchSize;++y)for(var b=y*e.strides[0],w=y*h.strides[0],x=0;x<i.outDepth;++x)for(var C=w+x*h.strides[1],E=x*i.strideDepth-d,S=0;S<o;S++){var N=E+S*u;if(!(N<0||N>=i.inDepth))for(var k=S*r.strides[0],M=b+N*e.strides[1],D=0;D<i.outHeight;++D)for(var R=C+D*h.strides[2],O=D*i.strideHeight-p,P=0;P<a;P++){var A=O+P*l;if(!(A<0||A>=i.inHeight))for(var I=k+P*r.strides[1],_=M+A*e.strides[2],F=0;F<i.outWidth;++F)for(var L=R+F*i.outChannels,W=F*i.strideWidth-f,B=0;B<s;B++){var q=W+B*c;if(!(q<0||q>=i.inWidth))for(var G=I+B*r.strides[2],re=_+q*i.inChannels,j=G,ae=0;ae<i.inChannels;++ae){for(var te=v[re+ae],le=0;le<i.outChannels;++le)m[L+le]+=te*g[j+le];j+=i.outChannels}}}}return h.toTensor()},n.prototype.conv2dDerInput=function(e,r,i){pe([e,r],"conv2dDerInput");for(var o=Ge(i.inShape,"float32"),a=o.values,s=this.readSync(e.dataId),u=this.readSync(r.dataId),l=r.strides,c=l[0],d=l[1],f=l[2],p=i.batchSize,h=i.filterHeight,v=i.filterWidth,g=i.inChannels,m=i.inHeight,y=i.inWidth,b=i.outChannels,w=i.outHeight,x=i.outWidth,C=i.strideHeight,E=i.strideWidth,S=i.dataFormat,N=h-1-i.padInfo.top,k=v-1-i.padInfo.left,M=S==="channelsLast",D=o.strides[0],R=M?o.strides[1]:o.strides[2],O=M?o.strides[2]:1,P=M?1:o.strides[1],A=e.strides[0],I=M?e.strides[1]:e.strides[2],_=M?e.strides[2]:1,F=M?1:e.strides[1],L=0;L<p;++L)for(var W=0;W<g;++W)for(var B=0;B<m;++B)for(var q=B-N,G=Math.max(0,Math.ceil(q/C)),re=Math.min(w,(h+q)/C),j=0;j<y;++j){for(var ae=j-k,te=Math.max(0,Math.ceil(ae/E)),le=Math.min(x,(v+ae)/E),Ee=0,se=G;se<re;++se)for(var be=se*C-q,fe=te;fe<le;++fe)for(var Z=A*L+I*se+_*fe,ge=c*(h-1-be)+d*(v-1-(fe*E-ae))+f*W,we=0;we<b;++we)Ee+=s[Z+F*we]*u[ge+we];a[D*L+R*B+O*j+P*W]=Ee}return o.toTensor()},n.prototype.conv3dDerInput=function(e,r,i){for(var o=Ge(i.inShape,"float32"),a=o.values,s=o.strides,u=s[0],l=s[1],c=s[2],d=s[3],f=this.readSync(e.dataId),p=e.strides,h=p[0],v=p[1],g=p[2],m=p[3],y=this.readSync(r.dataId),b=r.strides,w=b[0],x=b[1],C=b[2],E=b[3],S=i.batchSize,N=i.filterDepth,k=i.filterHeight,M=i.filterWidth,D=i.inChannels,R=i.inDepth,O=i.inHeight,P=i.inWidth,A=i.outChannels,I=i.outDepth,_=i.outHeight,F=i.outWidth,L=i.strideDepth,W=i.strideHeight,B=i.strideWidth,q=N-1-i.padInfo.front,G=k-1-i.padInfo.top,re=M-1-i.padInfo.left,j=0;j<S;++j)for(var ae=0;ae<D;++ae)for(var te=0;te<R;++te)for(var le=te-q,Ee=Math.max(0,Math.ceil(le/L)),se=Math.min(I,(N+le)/L),be=0;be<O;++be)for(var fe=be-G,Z=Math.max(0,Math.ceil(fe/W)),ge=Math.min(_,(k+fe)/W),we=0;we<P;++we){for(var de=we-re,On=Math.max(0,Math.ceil(de/B)),fn=Math.min(F,(M+de)/B),pn=0,De=Ee;De<se;++De)for(var lt=De*L-le,Le=Z;Le<ge;++Le)for(var Xe=Le*W-fe,Pe=On;Pe<fn;++Pe)for(var ze=h*j+v*De+g*Le+m*Pe,Ze=w*(N-1-lt)+x*(k-1-Xe)+C*(M-1-(Pe*B-de))+E*ae,qe=0;qe<A;++qe)pn+=f[ze+qe]*y[Ze+qe];a[u*j+l*te+c*be+d*we+ae]=pn}return o.toTensor()},n.prototype.conv2dDerFilter=function(e,r,i){pe([e,r],"conv2dDerFilter");for(var o=i.strideHeight,a=i.strideWidth,s=i.filterHeight,u=i.filterWidth,l=i.dataFormat==="channelsLast",c=Ge(i.filterShape,"float32"),d=i.padInfo.left,f=i.padInfo.top,p=this.bufferSync(e),h=this.bufferSync(r),v=0;v<s;++v)for(var g=Math.max(0,Math.ceil((f-v)/o)),m=Math.min(i.outHeight,(i.inHeight+f-v)/o),y=0;y<u;++y)for(var b=Math.max(0,Math.ceil((d-y)/a)),w=Math.min(i.outWidth,(i.inWidth+d-y)/a),x=0;x<i.inChannels;++x)for(var C=0;C<i.outChannels;++C){for(var E=0,S=0;S<i.batchSize;++S)for(var N=g;N<m;++N)for(var k=v+N*o-f,M=b;M<w;++M){var D=y+M*a-d;E+=l?p.get(S,k,D,x)*h.get(S,N,M,C):p.get(S,x,k,D)*h.get(S,C,N,M)}c.set(E,v,y,x,C)}return c.toTensor()},n.prototype.conv3dDerFilter=function(e,r,i){for(var o=i.strideDepth,a=i.strideHeight,s=i.strideWidth,u=i.filterDepth,l=i.filterHeight,c=i.filterWidth,d=Ge(i.filterShape,"float32"),f=d.values,p=d.strides,h=p[0],v=p[1],g=p[2],m=p[3],y=this.readSync(r.dataId),b=r.strides,w=b[0],x=b[1],C=b[2],E=b[3],S=this.readSync(e.dataId),N=e.strides,k=N[0],M=N[1],D=N[2],R=N[3],O=i.padInfo.front,P=i.padInfo.left,A=i.padInfo.top,I=0;I<u;++I)for(var _=Math.max(0,Math.ceil((O-I)/o)),F=Math.min(i.outDepth,(i.inDepth+O-I)/o),L=I*h,W=0;W<l;++W)for(var B=Math.max(0,Math.ceil((A-W)/a)),q=Math.min(i.outHeight,(i.inHeight+A-W)/a),G=W*v+L,re=0;re<c;++re)for(var j=Math.max(0,Math.ceil((P-re)/s)),ae=Math.min(i.outWidth,(i.inWidth+P-re)/s),te=re*g+G,le=0;le<i.inChannels;++le)for(var Ee=le*m+te,se=0;se<i.outChannels;++se){for(var be=0,fe=0;fe<i.batchSize;++fe)for(var Z=fe*k,ge=fe*w,we=_;we<F;++we)for(var de=(I+we*o-O)*M+Z,On=we*x+ge,fn=B;fn<q;++fn)for(var pn=(W+fn*a-A)*D+de,De=fn*C+On,lt=j;lt<ae;++lt){var Le=lt*E+De;be+=S[(re+lt*s-P)*R+pn+le]*y[Le+se]}f[Ee+se]=be}return d.toTensor()},n.prototype.fusedDepthwiseConv2D=function(e){var r=e.input,i=e.filter,o=e.convInfo,a=e.bias,s=e.activation,u=e.preluActivationWeights,l=this.depthwiseConv2D(r,i,o);return a&&(l=this.add(l,a)),s&&(l=i1(this,l,s,u)),l},n.prototype.depthwiseConv2D=function(e,r,i){pe([e,r],"depthwiseConv2D");for(var o=i.filterHeight,a=i.filterWidth,s=i.dilationHeight,u=i.dilationWidth,l=i.padInfo.left,c=i.padInfo.top,d=i.outChannels/i.inChannels,f=Ge(i.outShape,e.dtype),p=this.readSync(e.dataId),h=this.readSync(r.dataId),v=f.values,g=0;g<i.batchSize;++g)for(var m=g*e.strides[0],y=g*f.strides[0],b=0;b<i.outHeight;++b)for(var w=y+b*f.strides[1],x=b*i.strideHeight-l,C=0;C<o;++C){var E=x+C*s;if(!(E<0||E>=i.inHeight))for(var S=C*r.strides[0],N=m+E*e.strides[1],k=0;k<i.outWidth;++k)for(var M=w+k*f.strides[2],D=k*i.strideWidth-c,R=0;R<a;++R){var O=D+R*u;if(!(O<0||O>=i.inWidth))for(var P=S+R*r.strides[1],A=N+O*i.inChannels,I=M,_=P,F=0;F<i.inChannels;++F){for(var L=p[A+F],W=0;W<d;++W)v[I+W]+=L*h[_+W];I+=d,_+=d}}}return f.toTensor()},n.prototype.depthwiseConv2DDerInput=function(e,r,i){pe([e,r],"depthwiseConv2DDerInput");for(var o=Ge(i.inShape,"float32"),a=o.values,s=o.strides,u=s[0],l=s[1],c=s[2],d=this.readSync(e.dataId),f=e.strides,p=f[0],h=f[1],v=f[2],g=this.readSync(r.dataId),m=r.strides,y=m[0],b=m[1],w=m[2],x=i.batchSize,C=i.filterHeight,E=i.filterWidth,S=i.inChannels,N=i.inHeight,k=i.inWidth,M=i.outChannels,D=i.outHeight,R=i.outWidth,O=i.strideHeight,P=i.strideWidth,A=C-1-i.padInfo.top,I=E-1-i.padInfo.left,_=M/S,F=0;F<x;++F)for(var L=0;L<S;++L)for(var W=0;W<N;++W)for(var B=W-A,q=Math.max(0,Math.ceil(B/O)),G=Math.min(D,(C+B)/O),re=0;re<k;++re){for(var j=re-I,ae=Math.max(0,Math.ceil(j/P)),te=Math.min(R,(E+j)/P),le=0,Ee=q;Ee<G;++Ee)for(var se=Ee*O-B,be=ae;be<te;++be)for(var fe=p*F+h*Ee+v*be,Z=y*(C-1-se)+b*(E-1-(be*P-j))+w*L,ge=0;ge<_;++ge)le+=d[fe+(L*_+ge)]*g[Z+ge];a[u*F+l*W+c*re+L]=le}return o.toTensor()},n.prototype.depthwiseConv2DDerFilter=function(e,r,i){pe([e,r],"depthwiseConv2DDerFilter");for(var o=i.strideHeight,a=i.strideWidth,s=i.filterHeight,u=i.filterWidth,l=Ge(i.filterShape,"float32"),c=i.padInfo.left,d=i.padInfo.top,f=i.outChannels/i.inChannels,p=this.bufferSync(e),h=this.bufferSync(r),v=0;v<s;++v)for(var g=Math.max(0,Math.ceil((d-v)/o)),m=Math.min(i.outHeight,(i.inHeight+d-v)/o),y=0;y<u;++y)for(var b=Math.max(0,Math.ceil((c-y)/a)),w=Math.min(i.outWidth,(i.inWidth+c-y)/a),x=0;x<i.outChannels;++x){for(var C=Math.trunc(x/f),E=x%f,S=0,N=0;N<i.batchSize;++N)for(var k=g;k<m;++k)for(var M=v+k*o-d,D=b;D<w;++D){var R=y+D*a-c;S+=p.get(N,M,R,C)*h.get(N,k,D,x)}l.set(S,v,y,C,E)}return l.toTensor()},n.prototype.tile=function(e,r){return pe(e,"tile"),rP(this.bufferSync(e),r)},n.prototype.pad=function(e,r,i){pe(e,"pad");var o=r.map(function(f,p){return f[0]+e.shape[p]+f[1]}),a=r.map(function(f){return f[0]}),s=this.bufferSync(e),u=Ge(o,e.dtype);i!==0&&u.values.fill(i);for(var l=0;l<e.size;l++){var c=s.indexToLoc(l),d=c.map(function(f,p){return f+a[p]});u.set.apply(u,[s.get.apply(s,c)].concat(d))}return u.toTensor()},n.prototype.transpose=function(e,r){pe(e,"transpose");for(var i=new Array(e.rank),o=0;o<i.length;o++)i[o]=e.shape[r[o]];var a=this.readSync(e.dataId),s=Ge(i,e.dtype),u=this.bufferSync(e);for(o=0;o<e.size;++o){for(var l=u.indexToLoc(o),c=new Array(l.length),d=0;d<c.length;d++)c[d]=l[r[d]];var f=s.locToIndex(c);s.values[f]=a[o]}return s.toTensor()},n.prototype.gather=function(e,r,i){pe([e,r],"gather");var o=e.shape.slice(),a=this.readSync(r.dataId);o[i]=a.length;for(var s=Ge(o,e.dtype),u=this.bufferSync(e),l=0;l<s.size;++l){var c=s.indexToLoc(l),d=c.slice();d[i]=a[c[i]];var f=u.locToIndex(d);s.values[l]=u.values[f]}return s.toTensor()},n.prototype.batchToSpaceND=function(e,r,i){pe([e],"batchToSpaceND");var o=r.reduce(function(d,f){return d*f}),a=fv(e.shape,r,o),s=pv(a.length,r.length),u=hv(e.shape,r,o),l=KM(i,r.length),c=XM(u,i,r.length);return e.reshape(a).transpose(s).reshape(u).slice(l,c)},n.prototype.spaceToBatchND=function(e,r,i){pe([e],"spaceToBatchND");var o=r.reduce(function(f,p){return f*p}),a=[[0,0]];a.push.apply(a,i);for(var s=1+r.length;s<e.shape.length;++s)a.push([0,0]);var u=e.pad(a),l=fv(u.shape,r,o,!1),c=pv(l.length,r.length,!1),d=hv(u.shape,r,o,!1);return u.reshape(l).transpose(c).reshape(d)},n.prototype.pool=function(e,r,i){pe(e,"pool");for(var o=r.strideHeight,a=r.strideWidth,s=r.dilationHeight,u=r.dilationWidth,l=r.effectiveFilterHeight,c=r.effectiveFilterWidth,d=r.padInfo.top,f=r.padInfo.left,p=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,h=this.readSync(e.dataId),v=Ge(r.outShape,e.dtype),g=v.values,m=r.outShape[1]*r.outShape[2]*r.outShape[3],y=r.outShape[2]*r.outShape[3],b=r.outShape[3],w=0;w<r.batchSize;++w)for(var x=w*m,C=w*e.strides[0],E=0;E<r.inChannels;++E)for(var S=0;S<r.outHeight;++S)for(var N=S*o-d,k=Math.max(0,N),M=Math.min(r.inHeight,l+N),D=x+S*y,R=0;R<r.outWidth;++R){for(var O=R*a-f,P=Math.max(0,O),A=Math.min(r.inWidth,c+O),I=p,_=0,F=0,L=k;L<M;L+=s){for(var W=C+L*e.strides[1],B=P;B<A;B+=u){var q=h[W+B*e.strides[2]+E];i==="max"&&q>I?I=q:i==="avg"&&(_+=q,F++)}if(isNaN(I))break}g[D+R*b+E]=i==="avg"?_/F:I}return v.toTensor()},n.prototype.maxPool=function(e,r){return this.pool(e,r,"max")},n.prototype.maxPoolPositions=function(e,r){for(var i=Ge(r.outShape,"int32"),o=r.strideHeight,a=r.strideWidth,s=r.dilationHeight,u=r.dilationWidth,l=r.effectiveFilterHeight,c=r.effectiveFilterWidth,d=r.padInfo.top,f=r.padInfo.left,p=this.bufferSync(e),h=0;h<r.batchSize;++h)for(var v=0;v<r.inChannels;++v)for(var g=0;g<r.outHeight;++g){for(var m=g*o-d,y=m;y<0;)y+=s;for(var b=Math.min(r.inHeight,l+m),w=0;w<r.outWidth;++w){for(var x=w*a-f,C=x;C<0;)C+=u;for(var E=Math.min(r.inWidth,c+x),S=Number.NEGATIVE_INFINITY,N=-1,k=y;k<b;k+=s)for(var M=k-m,D=C;D<E;D+=u){var R=D-x,O=p.get(h,k,D,v);O>S&&(S=O,N=M*c+R)}i.set(N,h,g,w,v)}}return i.toTensor()},n.prototype.maxPoolBackprop=function(e,r,i,o){pe([r,i],"maxPoolBackprop");for(var a=this.maxPoolPositions(r,o),s=o.strideHeight,u=o.strideWidth,l=o.dilationHeight,c=o.dilationWidth,d=o.effectiveFilterHeight,f=o.effectiveFilterWidth,p=f-1-o.padInfo.left,h=d-1-o.padInfo.top,v=Ge(r.shape,"float32"),g=this.bufferSync(a),m=this.bufferSync(e),y=0;y<o.batchSize;++y)for(var b=0;b<o.inChannels;++b)for(var w=0;w<o.inHeight;++w)for(var x=0;x<o.inWidth;++x){for(var C=w-h,E=x-p,S=0,N=0;N<d;N+=l){var k=(C+N)/s;if(!(k<0||k>=o.outHeight||Math.floor(k)!==k))for(var M=0;M<f;M+=c){var D=(E+M)/u;if(!(D<0||D>=o.outWidth||Math.floor(D)!==D)){var R=d*f-1-g.get(y,k,D,b)===N*f+M?1:0;R!==0&&(S+=m.get(y,k,D,b)*R)}}}v.set(S,y,w,x,b)}return v.toTensor()},n.prototype.avgPoolBackprop=function(e,r,i){pe([e,r],"avgPoolBackprop");for(var o=i.strideHeight,a=i.strideWidth,s=i.filterHeight,u=i.filterWidth,l=i.dilationHeight,c=i.dilationWidth,d=i.effectiveFilterHeight,f=i.effectiveFilterWidth,p=f-1-i.padInfo.left,h=d-1-i.padInfo.top,v=Ge(r.shape,"float32"),g=1/(s*u),m=this.bufferSync(e),y=0;y<i.batchSize;++y)for(var b=0;b<i.inChannels;++b)for(var w=0;w<i.inHeight;++w)for(var x=0;x<i.inWidth;++x){for(var C=w-h,E=x-p,S=0,N=0;N<d;N+=l){var k=(C+N)/o;if(!(k<0||k>=i.outHeight||Math.floor(k)!==k))for(var M=0;M<f;M+=c){var D=(E+M)/a;D<0||D>=i.outWidth||Math.floor(D)!==D||(S+=m.get(y,k,D,b))}}v.set(S*g,y,w,x,b)}return v.toTensor()},n.prototype.pool3d=function(e,r,i){pe(e,"pool3d");for(var o=r.strideDepth,a=r.strideHeight,s=r.strideWidth,u=r.dilationDepth,l=r.dilationHeight,c=r.dilationWidth,d=r.effectiveFilterDepth,f=r.effectiveFilterHeight,p=r.effectiveFilterWidth,h=r.padInfo.front,v=r.padInfo.top,g=r.padInfo.left,m=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,y=this.readSync(e.dataId),b=Ge(r.outShape,e.dtype),w=b.values,x=r.outShape[1]*r.outShape[2]*r.outShape[3]*r.outShape[4],C=r.outShape[2]*r.outShape[3]*r.outShape[4],E=r.outShape[3]*r.outShape[4],S=r.outShape[4],N=0;N<r.batchSize;++N)for(var k=N*x,M=N*e.strides[0],D=0;D<r.inChannels;++D)for(var R=0;R<r.outDepth;++R){for(var O=R*o-h,P=O;P<0;)P+=u;for(var A=Math.min(r.inDepth,d+O),I=k+R*C,_=0;_<r.outHeight;++_){for(var F=_*a-v,L=F;L<0;)L+=l;for(var W=Math.min(r.inHeight,f+F),B=I+_*E,q=0;q<r.outWidth;++q){for(var G=q*s-g,re=G;re<0;)re+=c;for(var j=Math.min(r.inWidth,p+G),ae=B+q*S,te=m,le=0,Ee=0,se=P;se<A;se+=u){for(var be=M+se*e.strides[1],fe=L;fe<W;fe+=l){for(var Z=be+fe*e.strides[2],ge=re;ge<j;ge+=c){var we=y[Z+ge*e.strides[3]+D];if(i==="max"&&we>te?te=we:i==="avg"&&(le+=we,Ee++),isNaN(te))break}if(isNaN(te))break}if(isNaN(te))break}w[ae+D]=i==="avg"?le/Ee:te}}}return b.toTensor()},n.prototype.avgPool3d=function(e,r){return pe(e,"avgPool3d"),this.pool3d(e,r,"avg").toFloat()},n.prototype.avgPool3dBackprop=function(e,r,i){pe([e,r],"avgPool3dBackprop");for(var o=i.strideDepth,a=i.strideHeight,s=i.strideWidth,u=i.filterDepth,l=i.filterHeight,c=i.filterWidth,d=i.dilationDepth,f=i.dilationHeight,p=i.dilationWidth,h=i.effectiveFilterDepth,v=i.effectiveFilterHeight,g=i.effectiveFilterWidth,m=h-1-i.padInfo.front,y=g-1-i.padInfo.left,b=v-1-i.padInfo.top,w=Ge(r.shape,"float32"),x=1/(u*l*c),C=this.bufferSync(e),E=0;E<i.batchSize;++E)for(var S=0;S<i.inChannels;++S)for(var N=0;N<i.inDepth;++N)for(var k=0;k<i.inHeight;++k)for(var M=0;M<i.inWidth;++M){for(var D=N-m,R=k-b,O=M-y,P=0,A=0;A<h;A+=d){var I=(D+A)/o;if(!(I<0||I>=i.outDepth||Math.floor(I)!==I))for(var _=0;_<v;_+=f){var F=(R+_)/a;if(!(F<0||F>=i.outHeight||Math.floor(F)!==F))for(var L=0;L<g;L+=p){var W=(O+L)/s;W<0||W>=i.outWidth||Math.floor(W)!==W||(P+=C.get(E,I,F,W,S))}}}w.set(P*x,E,N,k,M,S)}return w.toTensor()},n.prototype.maxPool3d=function(e,r){return pe(e,"maxPool3d"),this.pool3d(e,r,"max").toFloat()},n.prototype.maxPool3dPositions=function(e,r){for(var i=Ge(r.outShape,"int32"),o=r.strideDepth,a=r.strideHeight,s=r.strideWidth,u=r.dilationDepth,l=r.dilationHeight,c=r.dilationWidth,d=r.effectiveFilterDepth,f=r.effectiveFilterHeight,p=r.effectiveFilterWidth,h=r.padInfo.front,v=r.padInfo.top,g=r.padInfo.left,m=this.bufferSync(e),y=0;y<r.batchSize;++y)for(var b=0;b<r.inChannels;++b)for(var w=0;w<r.outDepth;++w){for(var x=w*o-h,C=x;C<0;)C+=u;for(var E=Math.min(r.inDepth,d+x),S=0;S<r.outHeight;++S){for(var N=S*a-v,k=N;k<0;)k+=l;for(var M=Math.min(r.inHeight,f+N),D=0;D<r.outWidth;++D){for(var R=D*s-g,O=R;O<0;)O+=c;for(var P=Math.min(r.inWidth,p+R),A=Number.NEGATIVE_INFINITY,I=-1,_=C;_<E;_+=u)for(var F=_-x,L=k;L<M;L+=l)for(var W=L-N,B=O;B<P;B+=c){var q=B-R,G=m.get(y,_,L,B,b);G>=A&&(A=G,I=F*f*p+W*f+q)}i.set(I,y,w,S,D,b)}}}return i.toTensor()},n.prototype.maxPool3dBackprop=function(e,r,i,o){pe([r,i],"maxPool3dBackprop");for(var a=this.maxPool3dPositions(r,o),s=o.strideDepth,u=o.strideHeight,l=o.strideWidth,c=o.dilationDepth,d=o.dilationHeight,f=o.dilationWidth,p=o.effectiveFilterDepth,h=o.effectiveFilterHeight,v=o.effectiveFilterWidth,g=p-1-o.padInfo.front,m=v-1-o.padInfo.left,y=h-1-o.padInfo.top,b=Ge(r.shape,"float32"),w=this.bufferSync(a),x=this.bufferSync(e),C=0;C<o.batchSize;++C)for(var E=0;E<o.inChannels;++E)for(var S=0;S<o.inDepth;++S)for(var N=0;N<o.inHeight;++N)for(var k=0;k<o.inWidth;++k){for(var M=S-g,D=N-y,R=k-m,O=0,P=0;P<p;P+=c){var A=(M+P)/s;if(!(A<0||A>=o.outDepth||Math.floor(A)!==A))for(var I=0;I<h;I+=d){var _=(D+I)/u;if(!(_<0||_>=o.outHeight||Math.floor(_)!==_))for(var F=0;F<v;F+=f){var L=(R+F)/l;if(!(L<0||L>=o.outWidth||Math.floor(L)!==L)){var W=p*h*v-1-w.get(C,A,_,L,E)===P*h*v+I*v+F?1:0;W!==0&&(O+=x.get(C,A,_,L,E)*W)}}}}b.set(O,C,S,N,k,E)}return b.toTensor()},n.prototype.cast=function(e,r){return mE(e,r,this)},n.prototype.reshape=function(e,r){return gv(e,r)},n.prototype.avgPool=function(e,r){return pe(e,"avgPool"),this.pool(e,r,"avg").toFloat()},n.prototype.resizeBilinear=function(e,r,i,o){pe(e,"resizeBilinear");for(var a=e.shape,s=a[0],u=a[1],l=a[2],c=a[3],d=this.readSync(e.dataId),f=new Float32Array(Me([s,r,i,c])),p=[o&&r>1?u-1:u,o&&i>1?l-1:l],h=[o&&r>1?r-1:r,o&&i>1?i-1:i],v=0,g=p[0]/h[0],m=p[1]/h[1],y=0;y<s;y++)for(var b=0;b<r;b++)for(var w=g*b,x=Math.floor(w),C=w-x,E=Math.min(u-1,Math.ceil(w)),S=y*e.strides[0]+x*e.strides[1],N=y*e.strides[0]+E*e.strides[1],k=0;k<i;k++)for(var M=m*k,D=Math.floor(M),R=M-D,O=Math.min(l-1,Math.ceil(M)),P=S+D*e.strides[2],A=N+D*e.strides[2],I=S+ +O*e.strides[2],_=N+O*e.strides[2],F=0;F<c;F++){var L=d[P+F],W=d[A+F],B=L+(d[I+F]-L)*R,q=B+(W+(d[_+F]-W)*R-B)*C;f[v++]=q}return mn(f,[s,r,i,c])},n.prototype.resizeBilinearBackprop=function(e,r,i){pe([e,r],"resizeBilinearBackprop");for(var o=r.shape,a=o[0],s=o[1],u=o[2],l=o[3],c=e.shape,d=c[1],f=c[2],p=new Float32Array(a*s*u*l),h=[i&&d>1?s-1:s,i&&f>1?u-1:u],v=[i&&d>1?d-1:d,i&&f>1?f-1:f],g=h[0]/v[0],m=h[1]/v[1],y=this.readSync(e.dataId),b=0,w=0;w<a;w++)for(var x=w*r.strides[0],C=0;C<d;C++)for(var E=C*g,S=Math.floor(E),N=Math.min(Math.ceil(E),s-1),k=x+S*r.strides[1],M=x+N*r.strides[1],D=E-S,R=1-D,O=0;O<f;O++)for(var P=O*m,A=Math.floor(P),I=Math.min(Math.ceil(P),u-1),_=P-A,F=1-_,L=k+A*r.strides[2],W=k+I*r.strides[2],B=M+A*r.strides[2],q=M+I*r.strides[2],G=R*F,re=R*_,j=D*F,ae=D*_,te=0;te<l;te++){var le=y[b++];p[L+te]+=le*G,p[W+te]+=le*re,p[B+te]+=le*j,p[q+te]+=le*ae}return Ra(p,[a,u,s,l],r.dtype)},n.prototype.resizeNearestNeighbor=function(e,r,i,o){pe(e,"resizeNearestNeighbor");for(var a=e.shape,s=a[0],u=a[1],l=a[2],c=a[3],d=this.readSync(e.dataId),f=new Float32Array(s*r*i*c),p=[o&&r>1?u-1:u,o&&i>1?l-1:l],h=[o&&r>1?r-1:r,o&&i>1?i-1:i],v=p[0]/h[0],g=p[1]/h[1],m=0,y=0;y<s;y++)for(var b=y*e.strides[0],w=0;w<r;w++)for(var x=v*w,C=b+Math.min(u-1,o?Math.round(x):Math.floor(x))*e.strides[1],E=0;E<i;E++)for(var S=g*E,N=C+Math.min(l-1,o?Math.round(S):Math.floor(S))*e.strides[2],k=0;k<c;k++){var M=d[N+k];f[m++]=M}return mn(f,[s,r,i,c],e.dtype)},n.prototype.resizeNearestNeighborBackprop=function(e,r,i){pe([e,r],"resizeNearestNeighborBackprop");for(var o=r.shape,a=o[0],s=o[1],u=o[2],l=o[3],c=e.shape,d=c[1],f=c[2],p=new Float32Array(a*s*u*l),h=this.readSync(e.dataId),v=[i&&d>1?s-1:s,i&&f>1?u-1:u],g=[i&&d>1?d-1:d,i&&f>1?f-1:f],m=v[0]/g[0],y=v[1]/g[1],b=1/m,w=1/y,x=2*Math.ceil(b)+2,C=2*Math.ceil(w)+2,E=0;E<a;E++)for(var S=E*r.strides[0],N=0;N<s;N++)for(var k=S+N*r.strides[1],M=Math.floor(N*b),D=Math.floor(M-x/2),R=0;R<u;R++)for(var O=k+R*r.strides[2],P=Math.floor(R*w),A=Math.floor(P-C/2),I=0;I<l;I++){for(var _=0,F=0;F<x;F++){var L=F+D;if(!(L<0||L>=d)){var W=S+L*e.strides[1],B=L*m;if(N===Math.min(s-1,i?Math.round(B):Math.floor(B)))for(var q=0;q<C;q++){var G=q+A;if(!(G<0||G>=f)){var re=W+G*e.strides[2],j=G*y;R===Math.min(u-1,i?Math.round(j):Math.floor(j))&&(_+=h[re+I])}}}}p[O+I]=_}return Ra(p,r.shape,r.dtype)},n.prototype.batchNormalization=function(e,r,i,o,a,s){pe([e,r,i,a,s],"batchNorm");for(var u=this.readSync(e.dataId),l=this.readSync(r.dataId),c=this.readSync(i.dataId),d=a?this.readSync(a.dataId):new Float32Array([1]),f=s?this.readSync(s.dataId):new Float32Array([0]),p=new Float32Array(u.length),h=f.length,v=d.length,g=c.length,m=l.length,y=0,b=0,w=0,x=0,C=0;C<u.length;++C)p[C]=f[y++]+(u[C]-l[b++])*d[w++]/Math.sqrt(c[x++]+o),y>=h&&(y=0),b>=m&&(b=0),w>=v&&(w=0),x>=g&&(x=0);return Ra(p,e.shape)},n.prototype.localResponseNormalization4D=function(e,r,i,o,a){pe(e,"localResponseNormalization4D");var s=e.shape[3],u=s-1,l=this.readSync(e.dataId),c=e.size,d=new Float32Array(c);function f(g){for(var m=g%s,y=g-m+Math.max(0,m-r),b=g-m+Math.min(m+r,u),w=0;y<=b;y++){var x=l[y];w+=x*x}return w}for(var p=0;p<c;p++){var h=f(p),v=l[p]*Math.pow(i+o*h,-a);d[p]=v}return Ra(d,e.shape)},n.prototype.LRNGrad=function(e,r,i,o,a,s,u){pe(e,"LRNGrad");for(var l=e.shape[3],c=this.readSync(e.dataId),d=this.readSync(r.dataId),f=this.readSync(i.dataId),p=new Float32Array(e.size),h=e.size,v=0;v<h;v++){for(var g=v%l,m=v-g+Math.max(0,g-o),y=v-g+Math.min(l,g+o+1),b=0,w=m;w<y;w++)b+=Math.pow(d[w],2);for(b=s*b+a,w=m;w<y;w++){var x=-2*s*u*d[w]*f[v]/b;v===w&&(x+=Math.pow(b,-u)),x*=c[v],p[w]+=x}}return Ra(p,e.shape)},n.prototype.multinomial=function(e,r,i,o){pe(e,"multinomial");for(var a=r?e:Ru(e),s=a.shape[0],u=a.shape[1],l=It([s,i],"int32"),c=this.readSync(l.dataId),d=this.readSync(a.dataId),f=0;f<s;++f){var p=f*u,h=new Float32Array(u-1);h[0]=d[p];for(var v=1;v<h.length;++v)h[v]=h[v-1]+d[p+v];for(var g=wg(o.toString()),m=f*i,y=0;y<i;++y){var b=g();c[m+y]=h.length;for(var w=0;w<h.length;w++)if(b<h[w]){c[m+y]=w;break}}}return l},n.prototype.oneHot=function(e,r,i,o){pe(e,"oneHot");var a=new Float32Array(e.size*r);a.fill(o);for(var s=this.readSync(e.dataId),u=0;u<e.size;++u)s[u]>=0&&s[u]<r&&(a[u*r+s[u]]=i);return Ho(a,[e.size,r],"int32")},n.prototype.nonMaxSuppression=function(e,r,i,o,a){return pe(e,"nonMaxSuppression"),gE(this.readSync(e.dataId),this.readSync(r.dataId),i,o,a)},n.prototype.fft=function(e){return this.fftBatch(e,!1)},n.prototype.ifft=function(e){return this.fftBatch(e,!0)},n.prototype.fftBatch=function(e,r){for(var i=e.shape[0],o=e.shape[1],a=Ge(e.shape,"float32"),s=Ge(e.shape,"float32"),u=Ir(e).as2D(i,o),l=vi(e).as2D(i,o),c=0;c<i;c++)for(var d=u.slice([c,0],[1,o]),f=l.slice([c,0],[1,o]),p=Nn(d,f),h=this.readSync(this.fftImpl(p,r).dataId),v=0;v<o;v++){var g=PN(h,v);a.values[c*o+v]=g.real,s.values[c*o+v]=g.imag}return Nn(a.toTensor(),s.toTensor()).as2D(i,o)},n.prototype.fftImpl=function(e,r){var i=e.as1D(),o=i.size;if(this.isExponentOf2(o)){var a=this.fftRadix2(i,o,r).as2D(e.shape[0],e.shape[1]);return r&&(a=Nn(Ir(a).div(ke(o)),vi(a).div(ke(o)))),a}var s=this.readSync(e.dataId),u=function(l){for(var c=new Float32Array(l.length/2),d=new Float32Array(l.length/2),f=0;f<l.length;f+=2)c[f/2]=l[f],d[f/2]=l[f+1];return{real:c,imag:d}}(this.fourierTransformByMatmul(s,o,r));return Nn(u.real,u.imag).as2D(e.shape[0],e.shape[1])},n.prototype.isExponentOf2=function(e){return(e&e-1)==0},n.prototype.fftRadix2=function(e,r,i){if(r===1)return e;var o=this.readSync(e.dataId),a=r/2,s=function(m){for(var y=Math.ceil(m.length/4),b=new Float32Array(y),w=new Float32Array(y),x=0;x<m.length;x+=4)b[Math.floor(x/4)]=m[x],w[Math.floor(x/4)]=m[x+1];return{real:b,imag:w}}(o),u=Nn(s.real,s.imag).as1D(),l=function(m){for(var y=Math.floor(m.length/4),b=new Float32Array(y),w=new Float32Array(y),x=2;x<m.length;x+=4)b[Math.floor(x/4)]=m[x],w[Math.floor(x/4)]=m[x+1];return{real:b,imag:w}}(o),c=Nn(l.real,l.imag).as1D();u=this.fftRadix2(u,a,i),c=this.fftRadix2(c,a,i);var d=function(m,y){for(var b=new Float32Array(m/2),w=new Float32Array(m/2),x=0;x<Math.ceil(m/2);x++){var C=(y?2:-2)*Math.PI*(x/m);b[x]=Math.cos(C),w[x]=Math.sin(C)}return{real:b,imag:w}}(r,i),f=Nn(d.real,d.imag).mul(c),p=u.add(f),h=u.sub(f),v=Ir(p).concat(Ir(h)),g=vi(p).concat(vi(h));return Nn(v,g).as1D()},n.prototype.fourierTransformByMatmul=function(e,r,i){for(var o=new Float32Array(2*r),a=0;a<r;a++){for(var s=0,u=0,l=0;l<r;l++){var c=P7(a*l,r,i),d=PN(e,l);s+=d.real*c.real-d.imag*c.imag,u+=d.real*c.imag+d.imag*c.real}i&&(s/=r,u/=r),M7(o,s,u,a)}return o},n.prototype.depthToSpace=function(e,r,i){U(i==="NHWC",function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+i}),U(r>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+r});for(var o=e.shape[0],a=e.shape[1],s=e.shape[2],u=e.shape[3],l=a*r,c=s*r,d=u/(r*r),f=this.readSync(e.dataId),p=new Float32Array(o*l*c*d),h=0,v=0;v<o;++v)for(var g=0;g<l;++g)for(var m=Math.floor(g/r),y=g%r,b=0;b<c;++b)for(var w=Math.floor(b/r),x=(y*r+b%r)*d,C=0;C<d;++C){var E=C+x+u*(w+s*(m+a*v));p[h++]=f[E]}return Ra(p,[o,l,c,d])},n.prototype.broadcastedBinaryOp=function(e,r,i,o){var a=ut(e.shape,r.shape),s=Ge(a,i),u=this.readSync(e.dataId),l=this.readSync(r.dataId),c=Hs(e.shape,a),d=Hs(r.shape,a),f=s.values;if(c.length+d.length===0)for(var p=0;p<f.length;++p)f[p]=o(u[p%u.length],l[p%l.length]);else{var h=this.bufferSync(e),v=this.bufferSync(r),g=function(m){var y=s.indexToLoc(m),b=y.slice(-e.rank);c.forEach(function(E){return b[E]=0});var w=h.locToIndex(b),x=y.slice(-r.rank);d.forEach(function(E){return x[E]=0});var C=v.locToIndex(x);f[m]=o(u[w],l[C])};for(p=0;p<f.length;++p)g(p)}return s.toTensor()},n.prototype.broadcastedBinaryComplexOp=function(e,r,i){var o=ut(e.shape,r.shape),a=Ge(o,"float32"),s=Ge(o,"float32"),u=this.readSync(e.dataId),l=this.readSync(r.dataId),c=Hs(e.shape,o),d=Hs(r.shape,o),f=a.values,p=s.values;if(c.length+d.length===0)for(var h=0;h<f.length;h++){var v=h%u.length,g=h%l.length,m=i(u[2*v],u[2*v+1],l[2*g],l[2*g+1]);f[h]=m.real,p[h]=m.imag}else{var y=this.bufferSync(this.data.get(e.dataId).complexTensors.real),b=this.bufferSync(this.data.get(r.dataId).complexTensors.real),w=function(x){var C=a.indexToLoc(x),E=C.slice(-e.rank);c.forEach(function(D){return E[D]=0});var S=y.locToIndex(E),N=C.slice(-r.rank);d.forEach(function(D){return N[D]=0});var k=b.locToIndex(N),M=i(u[2*S],u[2*S+1],l[2*k],l[2*k+1]);f[x]=M.real,p[x]=M.imag};for(h=0;h<f.length;h++)w(h)}return this.complex(a.toTensor(),s.toTensor())},n.prototype.split=function(e,r,i){return nP(e,r,i)},n.prototype.dispose=function(){},n.prototype.floatPrecision=function(){return 32},n.prototype.epsilon=function(){return 1e-7},n.prototype.cropAndResize=function(e,r,i,o,a,s){for(var u=e.shape,l=u[0],c=u[1],d=u[2],f=u[3],p=r.shape[0],h=o[0],v=o[1],g=Ge([p,h,v,f],e.dtype),m=this.readSync(r.dataId),y=this.readSync(i.dataId),b=this.readSync(e.dataId),w=e.strides,x=g.strides,C=0;C<p;C++){var E=4*C,S=m[E],N=m[E+1],k=m[E+2],M=m[E+3],D=y[C];if(!(D>=l))for(var R=h>1?(k-S)*(c-1)/(h-1):0,O=v>1?(M-N)*(d-1)/(v-1):0,P=0;P<h;P++){var A=h>1?S*(c-1)+P*R:.5*(S+k)*(c-1);if(A<0||A>c-1)for(var I=0;I<v;I++)for(var _=0;_<f;_++){var F=_+I*x[2]+P*x[1]+C*x[0];g.values[F]=s}else if(a==="bilinear"){var L=Math.floor(A),W=Math.ceil(A),B=A-L;for(I=0;I<v;I++)if((se=v>1?N*(d-1)+I*O:.5*(N+M)*(d-1))<0||se>d-1)for(_=0;_<f;_++)F=_+I*x[2]+P*x[1]+C*x[0],g.values[F]=s;else{var q=Math.floor(se),G=Math.ceil(se),re=se-q;for(_=0;_<f;_++){var j=b[F=_+q*w[2]+L*w[1]+D*w[0]],ae=b[F=_+G*w[2]+L*w[1]+D*w[0]],te=b[F=_+q*w[2]+W*w[1]+D*w[0]],le=j+(ae-j)*re,Ee=te+(b[F=_+G*w[2]+W*w[1]+D*w[0]]-te)*re;F=_+I*x[2]+P*x[1]+C*x[0],g.values[F]=le+(Ee-le)*B}}}else for(I=0;I<v;++I){var se;if((se=v>1?N*(d-1)+I*O:.5*(N+M)*(d-1))<0||se>d-1)for(_=0;_<f;_++)F=_+I*x[2]+P*x[1]+C*x[0],g.values[F]=s;else{var be=Math.round(se),fe=Math.round(A);for(_=0;_<f;_++){var Z=_+be*w[2]+fe*w[1]+D*w[0],ge=_+I*x[2]+P*x[1]+C*x[0];g.values[ge]=b[Z]}}}}}return g.toTensor()},n.prototype.sparseToDense=function(e,r,i,o){var a=mv(0,e,i),s=a.sliceRank,u=a.numUpdates,l=a.sliceSize,c=a.strides,d=a.outputSize;return this.scatter(e,r,i,d,l,u,s,c,o,!1)},n.prototype.gatherND=function(e,r){var i=r.shape,o=i[i.length-1],a=YM(e,r),s=a[0],u=a[1],l=a[2],c=a[3];if(u===0)return mn([],s,e.dtype);for(var d=new Ql([u,l],e.dtype),f=this.readSync(r.dataId),p=this.readSync(e.dataId),h=0;h<u;h++){for(var v=[],g=0,m=0;m<o;m++){var y=f[h*o+m];g+=y*c[m],v.push(y)}if(g<0||g>=e.size/l)throw new Error("Invalid indices: "+v+" does not index into "+e.shape);for(var b=0;b<l;b++)d.values[h*l+b]=p[g*l+b]}return d.toTensor().reshape(s)},n.prototype.scatterND=function(e,r,i){var o=mv(0,e,i),a=o.sliceRank,s=o.numUpdates,u=o.sliceSize,l=o.strides,c=o.outputSize,d=ke(0);return this.scatter(e,r,i,c,u,s,a,l,d,!0)},n.prototype.fill=function(e,r,i){var o=If(i=i||Cc(r),Me(e));return o.fill(r),K.makeTensor(o,e,i,this)},n.prototype.onesLike=function(e){if(e.dtype==="string")throw new Error("onesLike is not supported for string tensors");return this.fill(e.shape,1,e.dtype)},n.prototype.zerosLike=function(e){var r=If(e.dtype,Me(e.shape));return this.makeOutput(r,e.shape,e.dtype)},n.prototype.linspace=function(e,r,i){return vE(e,r,i)},n.prototype.scatter=function(e,r,i,o,a,s,u,l,c,d){var f=[o/a,a],p=this.readSync(e.dataId),h=this.readSync(r.dataId);if(o===0)return mn([],i,r.dtype);var v=new Ql(f,r.dtype);v.values.fill(this.readSync(c.dataId)[0]);for(var g=0;g<s;g++){for(var m=[],y=0,b=0;b<u;b++){var w=p[g*u+b];m.push(w),y+=w*l[b]}if(y<0||y>=o/a)throw new Error("Invalid indices: "+m+" does not index into "+i);for(var x=0;x<a;x++)d?v.values[y*a+x]+=h[g*a+x]:v.values[y*a+x]=r.rank===0?h[0]:h[g*a+x]}return v.toTensor().reshape(i)},n}(pE);K.registerBackend("cpu",function(){return new Pq},1),uw({kernelName:"Square",backendName:"cpu",kernelFunc:function(t){var n=t.inputs,e=t.backend,r=n.x,i=e;pe(r,"square");for(var o=i.data.get(r.dataId).values,a=new Float32Array(o.length),s=0;s<o.length;++s){var u=o[s];a[s]=u*u}return{dataId:i.write(a,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}}),uw({kernelName:"Square",backendName:"webgl",kernelFunc:function(t){var n=t.inputs,e=t.backend,r=n.x,i=e,o=new et(r.shape,"return x * x;");return i.runWebGLProgram(o,[r],r.dtype)}});var Lq=function(){function t(){}return t.prototype.fetch=function(n,e){return fetch(n,e)},t.prototype.now=function(){return performance.now()},t.prototype.encode=function(n,e){if(e!=="utf-8"&&e!=="utf8")throw new Error("Browser's encoder only supports utf-8, but got "+e);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(n)},t.prototype.decode=function(n,e){return new TextDecoder(e).decode(n)},t}();ie().get("IS_BROWSER")&&ie().setPlatform("browser",new Lq);var o1,Fq=function(){return require("node-fetch")},zq=function(){function t(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}return t.prototype.fetch=function(n,e){return ie().global.fetch!=null?ie().global.fetch(n,e):(o1==null&&(o1=Fq()),o1(n,e))},t.prototype.now=function(){var n=process.hrtime();return 1e3*n[0]+n[1]/1e6},t.prototype.encode=function(n,e){if(e!=="utf-8"&&e!=="utf8")throw new Error("Node built-in encoder only supports utf-8, but got "+e);return this.textEncoder.encode(n)},t.prototype.decode=function(n,e){return n.length===0?"":new this.util.TextDecoder(e).decode(n)},t}();ie().get("IS_NODE")&&ie().setPlatform("node",new zq);var Cw={float32:4,int32:4,uint16:2,uint8:1,bool:1},yv=4;function PL(t,n){for(var e={},r=0,i=function(s){var u=s.name,l=s.dtype,c=s.shape,d=Me(c),f=void 0;if("quantization"in s){var p=s.quantization;if(p.dtype!=="uint8"&&p.dtype!=="uint16")throw new Error("Weight "+s.name+" has unknown quantization dtype "+p.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.");var h=Cw[p.dtype],v=t.slice(r,r+d*h),g=p.dtype==="uint8"?new Uint8Array(v):new Uint16Array(v);if(l==="float32")f=Float32Array.from(g,function(C){return C*p.scale+p.min});else{if(l!=="int32")throw new Error("Unsupported dtype in weight '"+u+"': "+l);f=Int32Array.from(g,function(C){return Math.round(C*p.scale+p.min)})}r+=d*h}else if(l==="string"){var m=Me(s.shape);f=[];for(var y=0;y<m;y++){var b=new Uint32Array(t.slice(r,r+yv))[0];r+=yv;var w=new Uint8Array(t.slice(r,r+b));f.push(w),r+=b}}else{var x=Cw[l];if(v=t.slice(r,r+d*x),l==="float32")f=new Float32Array(v);else if(l==="int32")f=new Int32Array(v);else{if(l!=="bool")throw new Error("Unsupported dtype in weight '"+u+"': "+l);f=new Uint8Array(v)}r+=d*x}e[u]=mn(f,c,l)},o=0,a=n;o<a.length;o++)i(a[o]);return e}function Bq(t){if(t===null)throw new Error("Invalid input value: "+JSON.stringify(t));var n=0,e=[];t.forEach(function(o){if(n+=o.byteLength,e.push(o.byteLength===o.buffer.byteLength?o:new o.constructor(o)),!(o instanceof Float32Array||o instanceof Int32Array||o instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+o.constructor.name)});var r=new Uint8Array(n),i=0;return e.forEach(function(o){r.set(new Uint8Array(o.buffer),i),i+=o.byteLength}),r.buffer}var Rw=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function nk(t){return Rw?Buffer.byteLength(t):new Blob([t]).size}function yC(t){var n=0;t.forEach(function(i){n+=i.byteLength});var e=new Uint8Array(n),r=0;return t.forEach(function(i){e.set(new Uint8Array(i),r),r+=i.byteLength}),e.buffer}function rk(t){for(t=t.trim();t.endsWith("/");)t=t.slice(0,t.length-1);var n=t.split("/");return n[n.length-1]}function vp(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:nk(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:nk(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:t.weightData.byteLength}}var Xr=function(){function t(){this.saveRouters=[],this.loadRouters=[]}return t.getInstance=function(){return t.instance==null&&(t.instance=new t),t.instance},t.registerSaveRouter=function(n){t.getInstance().saveRouters.push(n)},t.registerLoadRouter=function(n){t.getInstance().loadRouters.push(n)},t.getSaveHandlers=function(n){return t.getHandlers(n,"save")},t.getLoadHandlers=function(n,e){return t.getHandlers(n,"load",e)},t.getHandlers=function(n,e,r){var i=[];return(e==="load"?t.getInstance().loadRouters:t.getInstance().saveRouters).forEach(function(o){var a=o(n,r);a!==null&&i.push(a)}),i},t}(),Dl="://",Za=function(){function t(){this.managers={}}return t.getInstance=function(){return t.instance==null&&(t.instance=new t),t.instance},t.registerManager=function(n,e){U(n!=null,function(){return"scheme must not be undefined or null."}),n.endsWith(Dl)&&(n=n.slice(0,n.indexOf(Dl))),U(n.length>0,function(){return"scheme must not be an empty string."});var r=t.getInstance();U(r.managers[n]==null,function(){return"A model store manager is already registered for scheme '"+n+"'."}),r.managers[n]=e},t.getManager=function(n){var e=this.getInstance().managers[n];if(e==null)throw new Error("Cannot find model manager for scheme '"+n+"'");return e},t.getSchemes=function(){return Object.keys(this.getInstance().managers)},t}();function mm(t){if(t.indexOf(Dl)===-1)throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+Za.getSchemes().join(","));return{scheme:t.split(Dl)[0],path:t.split(Dl)[1]}}function ik(t,n,e){return e===void 0&&(e=!1),Ae(this,void 0,void 0,function(){var r,i,o,a,s,u,l,c,d;return Oe(this,function(f){switch(f.label){case 0:return U(t!==n,function(){return"Old path and new path are the same: '"+t+"'"}),U((r=Xr.getLoadHandlers(t)).length>0,function(){return"Copying failed because no load handler is found for source URL "+t+"."}),U(r.length<2,function(){return"Copying failed because more than one ("+r.length+") load handlers for source URL "+t+"."}),i=r[0],U((o=Xr.getSaveHandlers(n)).length>0,function(){return"Copying failed because no save handler is found for destination URL "+n+"."}),U(o.length<2,function(){return"Copying failed because more than one ("+r.length+") save handlers for destination URL "+n+"."}),a=o[0],s=mm(t).scheme,u=mm(t).path,l=s===mm(t).scheme,[4,i.load()];case 1:return c=f.sent(),e&&l?[4,Za.getManager(s).removeModel(u)]:[3,3];case 2:f.sent(),f.label=3;case 3:return[4,a.save(c)];case 4:return d=f.sent(),!e||l?[3,6]:[4,Za.getManager(s).removeModel(u)];case 5:f.sent(),f.label=6;case 6:return[2,d.modelArtifactsInfo]}})})}var qs="models_store",La="model_info_store";function LL(){if(!ie().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var t=window,n=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(n==null)throw new Error("The current browser does not appear to support IndexedDB.");return n}function Tw(t){var n=t.result;n.createObjectStore(qs,{keyPath:"modelPath"}),n.createObjectStore(La,{keyPath:"modelPath"})}var Ml=function(){function t(n){if(this.indexedDB=LL(),n==null||!n)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=n}return t.prototype.save=function(n){return Ae(this,void 0,void 0,function(){return Oe(this,function(e){if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,n)]})})},t.prototype.load=function(){return Ae(this,void 0,void 0,function(){return Oe(this,function(n){return[2,this.databaseAction(this.modelPath)]})})},t.prototype.databaseAction=function(n,e){var r=this;return new Promise(function(i,o){var a=r.indexedDB.open("tensorflowjs",1);a.onupgradeneeded=function(){return Tw(a)},a.onsuccess=function(){var s=a.result;if(e==null){var u=s.transaction(qs,"readonly"),l=u.objectStore(qs).get(r.modelPath);l.onsuccess=function(){if(l.result==null)return s.close(),o(new Error("Cannot find model with path '"+r.modelPath+"' in IndexedDB."));i(l.result.modelArtifacts)},l.onerror=function(v){return s.close(),o(l.error)},u.oncomplete=function(){return s.close()}}else{var c,d=vp(e),f=s.transaction(La,"readwrite"),p=f.objectStore(La),h=p.put({modelPath:r.modelPath,modelArtifactsInfo:d});h.onsuccess=function(){var v=(c=s.transaction(qs,"readwrite")).objectStore(qs).put({modelPath:r.modelPath,modelArtifacts:e,modelArtifactsInfo:d});v.onsuccess=function(){return i({modelArtifactsInfo:d})},v.onerror=function(g){var m=(p=f.objectStore(La)).delete(r.modelPath);m.onsuccess=function(){return s.close(),o(v.error)},m.onerror=function(y){return s.close(),o(v.error)}}},h.onerror=function(v){return s.close(),o(h.error)},f.oncomplete=function(){c==null?s.close():c.oncomplete=function(){return s.close()}}}},a.onerror=function(s){return o(a.error)}})},t.URL_SCHEME="indexeddb://",t}(),ok=function(t){return ie().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Ml.URL_SCHEME)?(n=t.slice(Ml.URL_SCHEME.length),new Ml(n)):null;var n};Xr.registerSaveRouter(ok),Xr.registerLoadRouter(ok);var jq=function(){function t(){this.indexedDB=LL()}return t.prototype.listModels=function(){return Ae(this,void 0,void 0,function(){var n=this;return Oe(this,function(e){return[2,new Promise(function(r,i){var o=n.indexedDB.open("tensorflowjs",1);o.onupgradeneeded=function(){return Tw(o)},o.onsuccess=function(){var a=o.result,s=a.transaction(La,"readonly"),u=s.objectStore(La).getAll();u.onsuccess=function(){for(var l={},c=0,d=u.result;c<d.length;c++){var f=d[c];l[f.modelPath]=f.modelArtifactsInfo}r(l)},u.onerror=function(l){return a.close(),i(u.error)},s.oncomplete=function(){return a.close()}},o.onerror=function(a){return i(o.error)}})]})})},t.prototype.removeModel=function(n){return Ae(this,void 0,void 0,function(){var e=this;return Oe(this,function(r){var i;return n=(i=n).startsWith(Ml.URL_SCHEME)?i.slice(Ml.URL_SCHEME.length):i,[2,new Promise(function(o,a){var s=e.indexedDB.open("tensorflowjs",1);s.onupgradeneeded=function(){return Tw(s)},s.onsuccess=function(){var u,l=s.result,c=l.transaction(La,"readwrite"),d=c.objectStore(La),f=d.get(n);f.onsuccess=function(){if(f.result==null)return l.close(),a(new Error("Cannot find model with path '"+n+"' in IndexedDB."));var p=d.delete(n),h=function(){var v=(u=l.transaction(qs,"readwrite")).objectStore(qs).delete(n);v.onsuccess=function(){return o(f.result.modelArtifactsInfo)},v.onerror=function(g){return a(f.error)}};p.onsuccess=h,p.onerror=function(v){return h(),l.close(),a(f.error)}},f.onerror=function(p){return l.close(),a(f.error)},c.oncomplete=function(){u==null?l.close():u.oncomplete=function(){return l.close()}}},s.onerror=function(u){return a(s.error)}})]})})},t}();if(ie().getBool("IS_BROWSER"))try{Za.registerManager(Ml.URL_SCHEME,new jq)}catch{}var Bo="/",al="tensorflowjs_models",FL="info",Vq="model_topology",$q="weight_specs",Uq="weight_data",Wq="model_metadata";function zL(t){return{info:[al,t,FL].join(Bo),topology:[al,t,Vq].join(Bo),weightSpecs:[al,t,$q].join(Bo),weightData:[al,t,Uq].join(Bo),modelMetadata:[al,t,Wq].join(Bo)}}function Hq(t){var n=t.split(Bo);if(n.length<3)throw new Error("Invalid key format: "+t);return n.slice(1,n.length-1).join(Bo)}var Pl=function(){function t(n){if(!ie().getBool("IS_BROWSER")||window.localStorage===void 0)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,n==null||!n)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=n,this.keys=zL(this.modelPath)}return t.prototype.save=function(n){return Ae(this,void 0,void 0,function(){var e,r,i;return Oe(this,function(o){if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");e=JSON.stringify(n.modelTopology),r=JSON.stringify(n.weightSpecs),i=vp(n);try{return this.LS.setItem(this.keys.info,JSON.stringify(i)),this.LS.setItem(this.keys.topology,e),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,(a=n.weightData,Rw?Buffer.from(a).toString("base64"):btoa(String.fromCharCode.apply(null,new Uint8Array(a))))),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:n.format,generatedBy:n.generatedBy,convertedBy:n.convertedBy})),[2,{modelArtifactsInfo:i}]}catch{throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+i.modelTopologyBytes+", weightSpecsBytes="+i.weightSpecsBytes+", weightDataBytes="+i.weightDataBytes+".")}var a;return[2]})})},t.prototype.load=function(){return Ae(this,void 0,void 0,function(){var n,e,r,i,o,a,s;return Oe(this,function(u){if((n=JSON.parse(this.LS.getItem(this.keys.info)))==null)throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if(n.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(e={},(r=JSON.parse(this.LS.getItem(this.keys.topology)))==null)throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(e.modelTopology=r,(i=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))==null)throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(e.weightSpecs=i,(o=this.LS.getItem(this.keys.modelMetadata))!=null&&(a=JSON.parse(o),e.format=a.format,e.generatedBy=a.generatedBy,e.convertedBy=a.convertedBy),(s=this.LS.getItem(this.keys.weightData))==null)throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return e.weightData=function(l){if(Rw){var c=Buffer.from(l,"base64");return c.buffer.slice(c.byteOffset,c.byteOffset+c.byteLength)}for(var d=atob(l),f=new Uint8Array(d.length),p=0;p<d.length;++p)f.set([d.charCodeAt(p)],p);return f.buffer}(s),[2,e]})})},t.URL_SCHEME="localstorage://",t}(),ak=function(t){return ie().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Pl.URL_SCHEME)?(n=t.slice(Pl.URL_SCHEME.length),new Pl(n)):null;var n};Xr.registerSaveRouter(ak),Xr.registerLoadRouter(ak);var Gq=function(){function t(){U(ie().getBool("IS_BROWSER"),function(){return"Current environment is not a web browser"}),U(window.localStorage!==void 0,function(){return"Current browser does not appear to support localStorage"}),this.LS=window.localStorage}return t.prototype.listModels=function(){return Ae(this,void 0,void 0,function(){var n,e,r,i,o,a;return Oe(this,function(s){for(n={},e=al+Bo,r=Bo+FL,i=0;i<this.LS.length;++i)(o=this.LS.key(i)).startsWith(e)&&o.endsWith(r)&&(a=Hq(o),n[a]=JSON.parse(this.LS.getItem(o)));return[2,n]})})},t.prototype.removeModel=function(n){return Ae(this,void 0,void 0,function(){var e,r;return Oe(this,function(i){var o;if(n=(o=n).startsWith(Pl.URL_SCHEME)?o.slice(Pl.URL_SCHEME.length):o,e=zL(n),this.LS.getItem(e.info)==null)throw new Error("Cannot find model at path '"+n+"'");return r=JSON.parse(this.LS.getItem(e.info)),this.LS.removeItem(e.info),this.LS.removeItem(e.topology),this.LS.removeItem(e.weightSpecs),this.LS.removeItem(e.weightData),[2,r]})})},t}();if(ie().getBool("IS_BROWSER"))try{Za.registerManager(Pl.URL_SCHEME,new Gq)}catch{}var qq="model",Kq=".json",Xq=".weights.bin";function sk(t){return new Promise(function(n){return setTimeout(n)}).then(t)}var a1=function(){function t(n){if(!ie().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");n.startsWith(t.URL_SCHEME)&&(n=n.slice(t.URL_SCHEME.length)),n!=null&&n.length!==0||(n=qq),this.modelTopologyFileName=n+Kq,this.weightDataFileName=n+Xq}return t.prototype.save=function(n){return Ae(this,void 0,void 0,function(){var e,r,i,o,a,s;return Oe(this,function(u){switch(u.label){case 0:if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");if(e=window.URL.createObjectURL(new Blob([n.weightData],{type:"application/octet-stream"})),!(n.modelTopology instanceof ArrayBuffer))return[3,1];throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 1:return r=[{paths:["./"+this.weightDataFileName],weights:n.weightSpecs}],i={modelTopology:n.modelTopology,format:n.format,generatedBy:n.generatedBy,convertedBy:n.convertedBy,weightsManifest:r},o=window.URL.createObjectURL(new Blob([JSON.stringify(i)],{type:"application/json"})),(a=this.jsonAnchor==null?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,a.href=o,[4,sk(function(){return a.dispatchEvent(new MouseEvent("click"))})];case 2:return u.sent(),n.weightData==null?[3,4]:((s=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,s.href=e,[4,sk(function(){return s.dispatchEvent(new MouseEvent("click"))})]);case 3:u.sent(),u.label=4;case 4:return[2,{modelArtifactsInfo:vp(n)}]}})})},t.URL_SCHEME="downloads://",t}(),Yq=function(){function t(n){if(n==null||n.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+n);this.files=n}return t.prototype.load=function(){return Ae(this,void 0,void 0,function(){var n,e,r=this;return Oe(this,function(i){return n=this.files[0],e=this.files.slice(1),[2,new Promise(function(o,a){var s=new FileReader;s.onload=function(u){var l=JSON.parse(u.target.result),c=l.modelTopology;if(c!=null){e.length===0&&o({modelTopology:c});var d=l.weightsManifest;if(d!=null){var f;try{f=r.checkManifestAndWeightFiles(d,e)}catch(g){return void a(g)}var p=[],h=[],v=[];d.forEach(function(g){g.paths.forEach(function(m){h.push(m),v.push(null)}),p.push.apply(p,g.weights)}),d.forEach(function(g){g.paths.forEach(function(m){var y=new FileReader;y.onload=function(b){var w=b.target.result,x=h.indexOf(m);v[x]=w,v.indexOf(null)===-1&&o({modelTopology:c,weightSpecs:p,weightData:yC(v)})},y.onerror=function(b){return a("Failed to weights data from file of path '"+m+"'.")},y.readAsArrayBuffer(f[m])})})}else a(new Error("weightManifest field is missing from file "+n.name))}else a(new Error("modelTopology field is missing from file "+n.name))},s.onerror=function(u){return a("Failed to read model topology and weights manifest JSON from file '"+n.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},s.readAsText(n)})]})})},t.prototype.checkManifestAndWeightFiles=function(n,e){for(var r=[],i=e.map(function(u){return rk(u.name)}),o={},a=0,s=n;a<s.length;a++)s[a].paths.forEach(function(u){var l=rk(u);if(r.indexOf(l)!==-1)throw new Error("Duplicate file basename found in weights manifest: '"+l+"'");if(r.push(l),i.indexOf(l)===-1)throw new Error("Weight file with basename '"+l+"' is not provided.");o[u]=e[i.indexOf(l)]});if(r.length!==e.length)throw new Error("Mismatch in the number of files in weights manifest ("+r.length+") and the number of weight files provided ("+e.length+").");return o},t}();function uk(t,n,e,r){(function(o){U(o!=null&&Array.isArray(o)&&o.length>0,function(){return"promises must be a none empty array"})})(t),function(o,a){U(o>=0&&o<=1,function(){return"Progress fraction must be in range [0, 1], but got startFraction "+o}),U(a>=0&&a<=1,function(){return"Progress fraction must be in range [0, 1], but got endFraction "+a}),U(a>=o,function(){return"startFraction must be no more than endFraction, but got startFraction "+o+" and endFraction "+a})}(e=e??0,r=r??1);var i=0;return Promise.all(t.map(function(o){return o.then(function(a){var s=e+ ++i/t.length*(r-e);return n(s),a}),o}))}function BL(t,n){return Ae(this,void 0,void 0,function(){var e,r,i,o,a,s,u,l,c;return Oe(this,function(d){switch(d.label){case 0:return n==null&&(n={}),e=n.fetchFunc==null?ie().platform.fetch:n.fetchFunc,r=t.map(function(f){return e(f,n.requestInit,{isBinary:!0})}),i=0,o=.5,n.onProgress!=null?[3,2]:[4,Promise.all(r)];case 1:return a=d.sent(),[3,4];case 2:return[4,uk(r,n.onProgress,i,o)];case 3:a=d.sent(),d.label=4;case 4:return s=a.map(function(f){return f.arrayBuffer()}),u=.5,l=1,n.onProgress!=null?[3,6]:[4,Promise.all(s)];case 5:return c=d.sent(),[3,8];case 6:return[4,uk(s,n.onProgress,u,l)];case 7:c=d.sent(),d.label=8;case 8:return[2,c]}})})}function lk(t){var n=this;return function(e,r,i){return r===void 0&&(r=""),Ae(n,void 0,void 0,function(){var o,a,s,u,l,c,d,f,p,h;return Oe(this,function(v){switch(v.label){case 0:if(o=e.map(function(){return!1}),a={},s=i!=null?i.map(function(){return!1}):[],u=[],e.forEach(function(g,m){var y=0;g.weights.forEach(function(b){var w="quantization"in b?b.quantization.dtype:b.dtype,x=Cw[w]*Me(b.shape),C=function(){o[m]=!0,a[m]==null&&(a[m]=[]),a[m].push({manifestEntry:b,groupOffset:y,sizeBytes:x})};i!=null?i.forEach(function(E,S){E===b.name&&(C(),s[S]=!0)}):C(),u.push(b.name),y+=x})}),!s.every(function(g){return g}))throw l=i.filter(function(g,m){return!s[m]}),new Error("Could not find weights in manifest with names: "+l.join(", ")+`. 
Manifest JSON has weights with names: `+u.join(", ")+".");return c=o.reduce(function(g,m,y){return m&&g.push(y),g},[]),d=[],c.forEach(function(g){e[g].paths.forEach(function(m){var y=r+(r.endsWith("/")?"":"/")+m;d.push(y)})}),[4,t(d)];case 1:return f=v.sent(),p={},h=0,c.forEach(function(g){for(var m=e[g].paths.length,y=0,b=0;b<m;b++)y+=f[h+b].byteLength;for(var w=new ArrayBuffer(y),x=new Uint8Array(w),C=0,E=0;E<m;E++){var S=new Uint8Array(f[h+E]);x.set(S,C),C+=S.byteLength}a[g].forEach(function(N){var k=PL(w.slice(N.groupOffset,N.groupOffset+N.sizeBytes),[N.manifestEntry]);for(var M in k)p[M]=k[M]}),h+=m}),[2,p]}})})}}Xr.registerSaveRouter(function(t){return ie().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(a1.URL_SCHEME)?(n=t.slice(a1.URL_SCHEME.length),n===void 0&&(n="model"),new a1(n)):null;var n});var jL=function(){function t(n,e){if(this.DEFAULT_METHOD="POST",e==null&&(e={}),this.weightPathPrefix=e.weightPathPrefix,this.onProgress=e.onProgress,e.fetchFunc!=null?(U(typeof e.fetchFunc=="function",function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"}),this.fetch=e.fetchFunc):this.fetch=ie().platform.fetch,U(n!=null&&n.length>0,function(){return"URL path for http must not be null, undefined or empty."}),Array.isArray(n)&&U(n.length===2,function(){return"URL paths for http must have a length of 2, (actual length is "+n.length+")."}),this.path=n,e.requestInit!=null&&e.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=e.requestInit||{}}return t.prototype.save=function(n){return Ae(this,void 0,void 0,function(){var e,r,i,o;return Oe(this,function(a){switch(a.label){case 0:if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(e=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,r=[{paths:["./model.weights.bin"],weights:n.weightSpecs}],i={modelTopology:n.modelTopology,format:n.format,generatedBy:n.generatedBy,convertedBy:n.convertedBy,userDefinedMetadata:n.userDefinedMetadata,weightsManifest:r},e.body.append("model.json",new Blob([JSON.stringify(i)],{type:"application/json"}),"model.json"),n.weightData!=null&&e.body.append("model.weights.bin",new Blob([n.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,this.fetch(this.path,e)];case 1:if((o=a.sent()).ok)return[2,{modelArtifactsInfo:vp(n),responses:[o]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+o.status+".")}})})},t.prototype.load=function(){return Ae(this,void 0,void 0,function(){var n,e,r,i,o,a,s,u;return Oe(this,function(l){switch(l.label){case 0:return[4,this.fetch(this.path,this.requestInit)];case 1:if(!(n=l.sent()).ok)throw new Error("Request to "+this.path+" failed with status code "+n.status+". Please verify this URL points to the model JSON of the model to load.");l.label=2;case 2:return l.trys.push([2,4,,5]),[4,n.json()];case 3:return e=l.sent(),[3,5];case 4:throw l.sent(),r="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?r+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":r+=" Please make sure the server is serving valid JSON for this request.",new Error(r);case 5:if(i=e.modelTopology,o=e.weightsManifest,i==null&&o==null)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return o==null?[3,7]:[4,this.loadWeights(o)];case 6:u=l.sent(),a=u[0],s=u[1],l.label=7;case 7:return[2,{modelTopology:i,weightSpecs:a,weightData:s}]}})})},t.prototype.loadWeights=function(n){return Ae(this,void 0,void 0,function(){var e,r,i,o,a,s,u,l,c,d,f;return Oe(this,function(p){switch(p.label){case 0:for(e=Array.isArray(this.path)?this.path[1]:this.path,r=function(h){var v=h.lastIndexOf("/"),g=h.lastIndexOf("?"),m=h.substring(0,v),y=g>v?h.substring(g):"";return[m+"/",y]}(e),i=r[0],o=r[1],a=this.weightPathPrefix||i,s=[],u=0,l=n;u<l.length;u++)c=l[u],s.push.apply(s,c.weights);return d=[],n.forEach(function(h){h.paths.forEach(function(v){d.push(a+v+o)})}),[4,BL(d,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})];case 1:return f=p.sent(),[2,[s,yC(f)]]}})})},t.URL_SCHEME_REGEX=/^https?:\/\//,t}();function Nw(t){return t.match(jL.URL_SCHEME_REGEX)!=null}var ck=function(t,n){return typeof fetch>"u"?null:(Array.isArray(t)?t.every(function(e){return Nw(e)}):Nw(t))?kw(t,{onProgress:n}):null};function kw(t,n){return new jL(t,n)}Xr.registerSaveRouter(ck),Xr.registerLoadRouter(ck);var s1=function(){function t(n){this.modelArtifacts=n}return t.prototype.load=function(){return Ae(this,void 0,void 0,function(){return Oe(this,function(n){return[2,this.modelArtifacts]})})},t}(),Jq=function(){function t(n){this.saveHandler=n}return t.prototype.save=function(n){return Ae(this,void 0,void 0,function(){return Oe(this,function(e){return[2,this.saveHandler(n)]})})},t}(),Yr=Object.freeze({browserFiles:function(t){return new Yq(t)},browserHTTPRequest:function(t,n){return kw(t,n)},concatenateArrayBuffers:yC,decodeWeights:PL,encodeWeights:function(t,n){return Ae(this,void 0,void 0,function(){var e,r,i,o,a,s=this;return Oe(this,function(u){switch(u.label){case 0:for(e=[],r=[],i=Array.isArray(t)?t.map(function(l){return l.name}):Object.keys(t),o=function(l){var c=i[l],d=Array.isArray(t)?t[l].tensor:t[c];if(d.dtype!=="float32"&&d.dtype!=="int32"&&d.dtype!=="bool"&&d.dtype!=="string")throw new Error("Unsupported dtype in weight '"+c+"': "+d.dtype);var f={name:c,shape:d.shape,dtype:d.dtype};if(d.dtype==="string"){var p=new Promise(function(h){return Ae(s,void 0,void 0,function(){var v,g,m,y,b,w,x;return Oe(this,function(C){switch(C.label){case 0:return[4,d.bytes()];case 1:for(v=C.sent(),g=v.reduce(function(E,S){return E+S.length},0)+yv*v.length,m=new Uint8Array(g),y=0,b=0;b<v.length;b++)w=v[b],x=new Uint8Array(new Uint32Array([w.length]).buffer),m.set(x,y),y+=yv,m.set(w,y),y+=w.length;return h(m),[2]}})})});r.push(p)}else r.push(d.data());n!=null&&(f.group=n),e.push(f)},a=0;a<i.length;++a)o(a);return[4,Promise.all(r)];case 1:return[2,{data:Bq(u.sent()),specs:e}]}})})},fromMemory:function(t,n,e,r){return arguments.length===1?t.modelTopology!=null||t.weightSpecs!=null?new s1(t):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new s1({modelTopology:t})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new s1({modelTopology:t,weightSpecs:n,weightData:e,trainingConfig:r}))},getLoadHandlers:function(t,n){return Xr.getLoadHandlers(t,n)},getModelArtifactsInfoForJSON:vp,getSaveHandlers:function(t){return Xr.getSaveHandlers(t)},http:kw,isHTTPScheme:Nw,loadWeights:function(t,n,e,r){return n===void 0&&(n=""),Ae(this,void 0,void 0,function(){return Oe(this,function(i){return[2,lk(function(o){return BL(o,{requestInit:r})})(t,n,e)]})})},registerLoadRouter:function(t){return Xr.registerLoadRouter(t)},registerSaveRouter:function(t){return Xr.registerSaveRouter(t)},weightsLoaderFactory:lk,withSaveHandler:function(t){return new Jq(t)},copyModel:function(t,n){return Ae(this,void 0,void 0,function(){return Oe(this,function(e){return[2,ik(t,n,!1)]})})},listModels:function(){return Ae(this,void 0,void 0,function(){var t,n,e,r,i,o,a;return Oe(this,function(s){switch(s.label){case 0:t=Za.getSchemes(),n={},e=0,r=t,s.label=1;case 1:return e<r.length?(i=r[e],[4,Za.getManager(i).listModels()]):[3,4];case 2:for(a in o=s.sent())n[i+Dl+a]=o[a];s.label=3;case 3:return e++,[3,1];case 4:return[2,n]}})})},moveModel:function(t,n){return Ae(this,void 0,void 0,function(){return Oe(this,function(e){return[2,ik(t,n,!0)]})})},removeModel:function(t){return Ae(this,void 0,void 0,function(){var n;return Oe(this,function(e){return n=mm(t),[2,Za.getManager(n.scheme).removeModel(n.path)]})})}}),Qq=X({confusionMatrix_:function(t,n,e){var r=V(t,"labels","confusionMatrix"),i=V(n,"predictions","confusionMatrix");U(e==null||e>0&&Number.isInteger(e),function(){return"If provided, numClasses must be a positive integer, but got "+e}),U(r.rank===1,function(){return"Expected the rank of labels to be 1, but got "+r.rank}),U(i.rank===1,function(){return"Expected the rank of predictions to be 1, but got "+i.rank}),U(r.shape[0]===i.shape[0],function(){return"Mismatch in the number of examples: "+r.shape[0]+" vs. "+i.shape[0]+". Labels and predictions should have the same number of elements."}),U(e>0&&Number.isInteger(e),function(){return"numClasses is required to be a positive integer, but got "+e});var o=Zl(r.asType("int32"),e),a=Zl(i.asType("int32"),e);return o.transpose().matMul(a).asType("int32")}}),Zq=Object.freeze({confusionMatrix:Qq}),eK=X({fromPixels_:function(t,n){if(n===void 0&&(n=3),n>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");var e=typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement;if(e&&e&&t.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.");return K.fromPixels(t,n)}}),VL=Object.freeze({toPixels:function(t,n){return Ae(this,void 0,void 0,function(){var e,r,i,o,a,s,u,l,c,d,f,p,h,v,g,m,y,b,w,x,C,E,S;return Oe(this,function(N){switch(N.label){case 0:if(e=V(t,"img","toPixels"),t instanceof _t||(e=e.toInt()),e.rank!==2&&e.rank!==3)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+e.rank+".");if(r=e.shape.slice(0,2),i=r[0],o=r[1],(a=e.rank===2?1:e.shape[2])>4||a===2)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+a);return[4,e.data()];case 1:return s=N.sent(),u=e.min(),l=e.max(),[4,Promise.all([u.data(),l.data()])];case 2:if(c=N.sent(),d=c[0],f=c[1],p=d[0],h=f[0],u.dispose(),l.dispose(),e.dtype==="float32"){if(p<0||h>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+p+" - "+h+"].")}else{if(e.dtype!=="int32")throw new Error("Unsupported type for toPixels: "+e.dtype+". Please use float32 or int32 tensors.");if(p<0||h>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+p+" - "+h+"].")}for(v=e.dtype==="float32"?255:1,g=new Uint8ClampedArray(o*i*4),m=0;m<i*o;++m)y=void 0,b=void 0,w=void 0,x=void 0,a===1?(y=s[m]*v,b=s[m]*v,w=s[m]*v,x=255):a===3?(y=s[3*m]*v,b=s[3*m+1]*v,w=s[3*m+2]*v,x=255):a===4&&(y=s[4*m]*v,b=s[4*m+1]*v,w=s[4*m+2]*v,x=s[4*m+3]*v),g[0+(C=4*m)]=Math.round(y),g[C+1]=Math.round(b),g[C+2]=Math.round(w),g[C+3]=Math.round(x);return n!=null&&(n.width=o,n.height=i,E=n.getContext("2d"),S=new ImageData(g,o,i),E.putImageData(S,0,0)),e!==t&&e.dispose(),[2,g]}})})},fromPixels:eK}),$L=function(){function t(){}return t.prototype.getClassName=function(){return this.constructor.className},t.fromConfig=function(n,e){return new n(e)},t}(),UL=function(){function t(){this.classNameMap={}}return t.getMap=function(){return t.instance==null&&(t.instance=new t),t.instance},t.register=function(n){t.getMap().classNameMap[n.className]=[n,n.fromConfig]},t}();function xs(t){U(t.className!=null,function(){return"Class being registered does not have the static className property defined."}),U(typeof t.className=="string",function(){return"className is required to be a string, but got type "+typeof t.className}),U(t.className.length>0,function(){return"Class being registered has an empty-string as its className, which is disallowed."}),UL.register(t)}var he=Object.freeze({Serializable:$L,SerializationMap:UL,registerClass:xs}),tK=.001,WL=.1;function u1(){return K.backend.floatPrecision()===32?tK:WL}function l1(t,n,e){var r=!0;if((Kn(t)||Kn(n))&&(r=!1),Kn(t)&&Kn(n)&&(r=!0),r){var i=t.constructor.name,o=n.constructor.name;if(i!==o)throw new Error("Arrays are of different type. Actual: "+i+". Expected: "+o)}if(Array.isArray(t)&&Array.isArray(n)){var a=wo(t),s=wo(n);if(!Bn(a,s))throw new Error("Arrays have different shapes. Actual: ["+a+"]. Expected: ["+s+"]")}var u=Kn(t)?t:ta(t),l=Kn(n)?n:ta(n);if(u.length!==l.length)throw new Error("Arrays have different lengths actual: "+u.length+" vs expected: "+l.length+`.
Actual:   `+u+`.
Expected: `+l+".");for(var c=0;c<l.length;++c){var d=u[c],f=l[c];if(!e(d,f))throw new Error("Arrays differ: actual["+c+"] = "+d+", expected["+c+"] = "+f+`.
Actual:   `+u+`.
Expected: `+l+".")}}function c1(t,n,e){return!isFinite(t)&&!isFinite(n)||!(isNaN(t)||isNaN(n)||Math.abs(t-n)>e)}var nK=Object.freeze({TEST_EPSILON_FLOAT16:WL,expectArraysClose:function(t,n,e){return e==null&&(e=u1()),l1(t,n,function(r,i){return c1(r,i,e)})},testEpsilon:u1,expectPromiseToFail:function(t,n){t().then(function(){return n.fail()},function(){return n()})},expectArraysEqual:function(t,n){var e=typeof n=="string"||typeof n=="number"||typeof n=="boolean"?[n]:n;return Pa(t)||Pa(t[0])||Pa(n)||Pa(n[0])?l1(t,e,function(r,i){return r==i}):l1(t,n,function(r,i){return c1(r,i,0)})},expectNumbersClose:function(t,n,e){if(e==null&&(e=u1()),!c1(t,n,e))throw new Error("Numbers differ: actual === "+t+", expected === "+n)},expectValuesInRange:function(t,n,e){for(var r=0;r<t.length;r++)if(t[r]<n||t[r]>e)throw new Error("Value out of range:"+t[r]+" low: "+n+", high: "+e)},expectArrayBuffersEqual:function(t,n){expect(new Float32Array(t)).toEqual(new Float32Array(n))}}),HL="1.3.1",rK=Object.freeze({gpgpu_util:NG,webgl_util:r7,forceHalfFloat:function(){ie().set("WEBGL_FORCE_F16_TEXTURES",!0)},MathBackendWebGL:DP,setWebGLContext:uM,GPGPUContext:TP}),ca=function(t){function n(){return t!==null&&t.apply(this,arguments)||this}return Hi(n,t),n.prototype.minimize=function(e,r,i){r===void 0&&(r=!1);var o=this.computeGradients(e,i),a=o.value,s=o.grads;if(i!=null){var u=i.map(function(l){return{name:l.name,tensor:s[l.name]}});this.applyGradients(u)}else this.applyGradients(s);return nt(s),r?a:(a.dispose(),null)},Object.defineProperty(n.prototype,"iterations",{get:function(){return this.iterations_==null&&(this.iterations_=0),this.iterations_},enumerable:!0,configurable:!0}),n.prototype.incrementIterations=function(){this.iterations_=this.iterations+1},n.prototype.computeGradients=function(e,r){return tP(e,r)},n.prototype.dispose=function(){this.iterations_!=null&&nt(this.iterations_)},n.prototype.saveIterations=function(){return Ae(this,void 0,void 0,function(){return Oe(this,function(e){return this.iterations_==null&&(this.iterations_=0),[2,{name:"iter",tensor:ke(this.iterations_,"int32")}]})})},n.prototype.getWeights=function(){return Ae(this,void 0,void 0,function(){return Oe(this,function(e){throw new Error("getWeights() is not implemented for this optimizer yet.")})})},n.prototype.setWeights=function(e){return Ae(this,void 0,void 0,function(){return Oe(this,function(r){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())})})},n.prototype.extractIterations=function(e){return Ae(this,void 0,void 0,function(){var r;return Oe(this,function(i){switch(i.label){case 0:return r=this,[4,e[0].tensor.data()];case 1:return r.iterations_=i.sent()[0],[2,e.slice(1)]}})})},n}($L);Object.defineProperty(ca,Symbol.hasInstance,{value:function(t){return t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null}});var bC=function(t){function n(e,r,i){i===void 0&&(i=null);var o=t.call(this)||this;return o.learningRate=e,o.rho=r,o.epsilon=i,o.accumulatedGrads=[],o.accumulatedUpdates=[],i==null&&(o.epsilon=K.backend.epsilon()),o}return Hi(n,t),n.prototype.applyGradients=function(e){var r=this;(Array.isArray(e)?e.map(function(i){return i.name}):Object.keys(e)).forEach(function(i,o){var a=K.registeredVariables[i];r.accumulatedGrads[o]==null&&(r.accumulatedGrads[o]={originalName:i+"/accum_grad",variable:ee(function(){return dt(a).variable(!1)})}),r.accumulatedUpdates[o]==null&&(r.accumulatedUpdates[o]={originalName:i+"/accum_var",variable:ee(function(){return dt(a).variable(!1)})});var s=Array.isArray(e)?e[o].tensor:e[i];if(s!=null){var u=r.accumulatedGrads[o].variable,l=r.accumulatedUpdates[o].variable;ee(function(){var c=u.mul(r.rho).add(s.square().mul(1-r.rho)),d=l.add(r.epsilon).sqrt().div(u.add(r.epsilon).sqrt()).mul(s),f=l.mul(r.rho).add(d.square().mul(1-r.rho));u.assign(c),l.assign(f);var p=d.mul(-r.learningRate).add(a);a.assign(p)})}}),this.incrementIterations()},n.prototype.dispose=function(){this.accumulatedUpdates!=null&&(nt(this.accumulatedGrads.map(function(e){return e.variable})),nt(this.accumulatedUpdates.map(function(e){return e.variable})))},n.prototype.getWeights=function(){return Ae(this,void 0,void 0,function(){var e;return Oe(this,function(r){switch(r.label){case 0:return e=this.accumulatedGrads.concat(this.accumulatedUpdates),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(e.map(function(i){return{name:i.originalName,tensor:i.variable}}))]}})})},n.prototype.setWeights=function(e){return Ae(this,void 0,void 0,function(){var r;return Oe(this,function(i){switch(i.label){case 0:return[4,this.extractIterations(e)];case 1:return e=i.sent(),r=e.length/2,this.accumulatedGrads=e.slice(0,r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),this.accumulatedUpdates=e.slice(r,2*r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),[2]}})})},n.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},n.fromConfig=function(e,r){return new e(r.learningRate,r.rho,r.epsilon)},n.className="Adadelta",n}(ca);xs(bC);var wC=function(t){function n(e,r){r===void 0&&(r=.1);var i=t.call(this)||this;return i.learningRate=e,i.initialAccumulatorValue=r,i.accumulatedGrads=[],i}return Hi(n,t),n.prototype.applyGradients=function(e){var r=this;(Array.isArray(e)?e.map(function(i){return i.name}):Object.keys(e)).forEach(function(i,o){var a=K.registeredVariables[i];r.accumulatedGrads[o]==null&&(r.accumulatedGrads[o]={originalName:i+"/accumulator",variable:ee(function(){return Tc(a.shape,r.initialAccumulatorValue).variable(!1)})});var s=Array.isArray(e)?e[o].tensor:e[i];if(s!=null){var u=r.accumulatedGrads[o].variable;ee(function(){var l=u.add(s.square());u.assign(l);var c=s.div(l.add(K.backend.epsilon()).sqrt()).mul(-r.learningRate).add(a);a.assign(c)})}}),this.incrementIterations()},n.prototype.dispose=function(){this.accumulatedGrads!=null&&nt(this.accumulatedGrads.map(function(e){return e.variable}))},n.prototype.getWeights=function(){return Ae(this,void 0,void 0,function(){return Oe(this,function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()].concat(this.accumulatedGrads.map(function(r){return{name:r.originalName,tensor:r.variable}}))]}})})},n.prototype.setWeights=function(e){return Ae(this,void 0,void 0,function(){return Oe(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(e)];case 1:return e=r.sent(),this.accumulatedGrads=e.map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),[2]}})})},n.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},n.fromConfig=function(e,r){return new e(r.learningRate,r.initialAccumulatorValue)},n.className="Adagrad",n}(ca);xs(wC);var xC=function(t){function n(e,r,i,o){o===void 0&&(o=null);var a=t.call(this)||this;return a.learningRate=e,a.beta1=r,a.beta2=i,a.epsilon=o,a.accumulatedFirstMoment=[],a.accumulatedSecondMoment=[],ee(function(){a.accBeta1=ke(r).variable(),a.accBeta2=ke(i).variable()}),o==null&&(a.epsilon=K.backend.epsilon()),a}return Hi(n,t),n.prototype.applyGradients=function(e){var r=this,i=Array.isArray(e)?e.map(function(o){return o.name}):Object.keys(e);ee(function(){var o=jn(1,r.accBeta1),a=jn(1,r.accBeta2);i.forEach(function(s,u){var l=K.registeredVariables[s];r.accumulatedFirstMoment[u]==null&&(r.accumulatedFirstMoment[u]={originalName:s+"/m",variable:ee(function(){return dt(l).variable(!1)})}),r.accumulatedSecondMoment[u]==null&&(r.accumulatedSecondMoment[u]={originalName:s+"/v",variable:ee(function(){return dt(l).variable(!1)})});var c=Array.isArray(e)?e[u].tensor:e[s];if(c!=null){var d=r.accumulatedFirstMoment[u].variable,f=r.accumulatedSecondMoment[u].variable,p=d.mul(r.beta1).add(c.mul(1-r.beta1)),h=f.mul(r.beta2).add(c.square().mul(1-r.beta2)),v=p.div(o),g=h.div(a);d.assign(p),f.assign(h);var m=v.div(g.sqrt().add(r.epsilon)).mul(-r.learningRate).add(l);l.assign(m)}}),r.accBeta1.assign(r.accBeta1.mul(r.beta1)),r.accBeta2.assign(r.accBeta2.mul(r.beta2))}),this.incrementIterations()},n.prototype.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&nt(this.accumulatedFirstMoment.map(function(e){return e.variable})),this.accumulatedSecondMoment!=null&&nt(this.accumulatedSecondMoment.map(function(e){return e.variable}))},n.prototype.getWeights=function(){return Ae(this,void 0,void 0,function(){var e;return Oe(this,function(r){switch(r.label){case 0:return e=this.accumulatedFirstMoment.concat(this.accumulatedSecondMoment),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(e.map(function(i){return{name:i.originalName,tensor:i.variable}}))]}})})},n.prototype.setWeights=function(e){return Ae(this,void 0,void 0,function(){var r,i=this;return Oe(this,function(o){switch(o.label){case 0:return[4,this.extractIterations(e)];case 1:return e=o.sent(),ee(function(){i.accBeta1.assign(tc(i.beta1,i.iterations_+1)),i.accBeta2.assign(tc(i.beta2,i.iterations_+1))}),r=e.length/2,this.accumulatedFirstMoment=e.slice(0,r).map(function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}}),this.accumulatedSecondMoment=e.slice(r,2*r).map(function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}}),[2]}})})},n.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},n.fromConfig=function(e,r){return new e(r.learningRate,r.beta1,r.beta2,r.epsilon)},n.className="Adam",n}(ca);xs(xC);var SC=function(t){function n(e,r,i,o,a){o===void 0&&(o=null),a===void 0&&(a=0);var s=t.call(this)||this;return s.learningRate=e,s.beta1=r,s.beta2=i,s.epsilon=o,s.decay=a,s.accumulatedFirstMoment=[],s.accumulatedWeightedInfNorm=[],ee(function(){s.iteration=ke(0).variable(),s.accBeta1=ke(r).variable()}),o==null&&(s.epsilon=K.backend.epsilon()),s}return Hi(n,t),n.prototype.applyGradients=function(e){var r=this,i=Array.isArray(e)?e.map(function(o){return o.name}):Object.keys(e);ee(function(){var o=jn(1,r.accBeta1),a=cr(-r.learningRate,r.iteration.mul(r.decay).add(1));i.forEach(function(s,u){var l=K.registeredVariables[s];r.accumulatedFirstMoment[u]==null&&(r.accumulatedFirstMoment[u]={originalName:s+"/m",variable:dt(l).variable(!1)}),r.accumulatedWeightedInfNorm[u]==null&&(r.accumulatedWeightedInfNorm[u]={originalName:s+"/v",variable:dt(l).variable(!1)});var c=Array.isArray(e)?e[u].tensor:e[s];if(c!=null){var d=r.accumulatedFirstMoment[u].variable,f=r.accumulatedWeightedInfNorm[u].variable,p=d.mul(r.beta1).add(c.mul(1-r.beta1)),h=f.mul(r.beta2),v=c.abs(),g=h.maximum(v);d.assign(p),f.assign(g);var m=a.div(o).mul(p.div(g.add(r.epsilon))).add(l);l.assign(m)}}),r.iteration.assign(r.iteration.add(1)),r.accBeta1.assign(r.accBeta1.mul(r.beta1))}),this.incrementIterations()},n.prototype.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&nt(this.accumulatedFirstMoment.map(function(e){return e.variable})),this.accumulatedWeightedInfNorm!=null&&nt(this.accumulatedWeightedInfNorm.map(function(e){return e.variable}))},n.prototype.getWeights=function(){return Ae(this,void 0,void 0,function(){return Oe(this,function(e){throw new Error("getWeights() is not implemented for Adamax yet.")})})},n.prototype.setWeights=function(e){return Ae(this,void 0,void 0,function(){return Oe(this,function(r){throw new Error("setWeights() is not implemented for Adamax yet.")})})},n.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},n.fromConfig=function(e,r){return new e(r.learningRate,r.beta1,r.beta2,r.epsilon,r.decay)},n.className="Adamax",n}(ca);xs(SC);var ry=function(t){function n(e){var r=t.call(this)||this;return r.learningRate=e,r.setLearningRate(e),r}return Hi(n,t),n.prototype.applyGradients=function(e){var r=this;(Array.isArray(e)?e.map(function(i){return i.name}):Object.keys(e)).forEach(function(i,o){var a=Array.isArray(e)?e[o].tensor:e[i];if(a!=null){var s=K.registeredVariables[i];ee(function(){var u=r.c.mul(a).add(s);s.assign(u)})}}),this.incrementIterations()},n.prototype.setLearningRate=function(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=bo(ke(-e))},n.prototype.dispose=function(){this.c.dispose()},n.prototype.getWeights=function(){return Ae(this,void 0,void 0,function(){return Oe(this,function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()]]}})})},n.prototype.setWeights=function(e){return Ae(this,void 0,void 0,function(){return Oe(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(e)];case 1:if((e=r.sent()).length!==0)throw new Error("SGD optimizer does not have settable weights.");return[2]}})})},n.prototype.getConfig=function(){return{learningRate:this.learningRate}},n.fromConfig=function(e,r){return new e(r.learningRate)},n.className="SGD",n}(ca);xs(ry);var EC=function(t){function n(e,r,i){i===void 0&&(i=!1);var o=t.call(this,e)||this;return o.learningRate=e,o.momentum=r,o.useNesterov=i,o.accumulations=[],o.m=ke(o.momentum),o}return Hi(n,t),n.prototype.applyGradients=function(e){var r=this;(Array.isArray(e)?e.map(function(i){return i.name}):Object.keys(e)).forEach(function(i,o){var a=K.registeredVariables[i];r.accumulations[o]==null&&(r.accumulations[o]={originalName:i+"/momentum",variable:ee(function(){return dt(a).variable(!1)})});var s=r.accumulations[o].variable,u=Array.isArray(e)?e[o].tensor:e[i];u!=null&&ee(function(){var l,c=r.m.mul(s).add(u);l=r.useNesterov?r.c.mul(u.add(c.mul(r.m))).add(a):r.c.mul(c).add(a),s.assign(c),a.assign(l)})}),this.incrementIterations()},n.prototype.dispose=function(){this.m.dispose(),this.accumulations!=null&&nt(this.accumulations.map(function(e){return e.variable}))},n.prototype.setMomentum=function(e){this.momentum=e},n.prototype.getWeights=function(){return Ae(this,void 0,void 0,function(){return Oe(this,function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()].concat(this.accumulations.map(function(r){return{name:r.originalName,tensor:r.variable}}))]}})})},n.prototype.setWeights=function(e){return Ae(this,void 0,void 0,function(){return Oe(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(e)];case 1:return e=r.sent(),this.accumulations=e.map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),[2]}})})},n.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},n.fromConfig=function(e,r){return new e(r.learningRate,r.momentum,r.useNesterov)},n.className="Momentum",n}(ry);xs(EC);var CC=function(t){function n(e,r,i,o,a){r===void 0&&(r=.9),i===void 0&&(i=0),o===void 0&&(o=null),a===void 0&&(a=!1);var s=t.call(this)||this;return s.learningRate=e,s.decay=r,s.momentum=i,s.epsilon=o,s.accumulatedMeanSquares=[],s.accumulatedMoments=[],s.accumulatedMeanGrads=[],s.centered=a,o==null&&(s.epsilon=K.backend.epsilon()),s}return Hi(n,t),n.prototype.applyGradients=function(e){var r=this;(Array.isArray(e)?e.map(function(i){return i.name}):Object.keys(e)).forEach(function(i,o){var a=K.registeredVariables[i];r.accumulatedMeanSquares[o]==null&&(r.accumulatedMeanSquares[o]={originalName:i+"/rms",variable:ee(function(){return dt(a).variable(!1)})}),r.accumulatedMoments[o]==null&&(r.accumulatedMoments[o]={originalName:i+"/momentum",variable:ee(function(){return dt(a).variable(!1)})}),r.accumulatedMeanGrads[o]==null&&r.centered&&(r.accumulatedMeanGrads[o]={originalName:i+"/mg",variable:ee(function(){return dt(a).variable(!1)})});var s=Array.isArray(e)?e[o].tensor:e[i];if(s!=null){var u=r.accumulatedMeanSquares[o].variable,l=r.accumulatedMoments[o].variable;ee(function(){var c=u.mul(r.decay).add(s.square().mul(1-r.decay));if(r.centered){var d=r.accumulatedMeanGrads[o].variable,f=d.mul(r.decay).add(s.mul(1-r.decay)),p=l.mul(r.momentum).add(s.mul(r.learningRate).div(c.sub(f.square().add(r.epsilon)).sqrt()));u.assign(c),d.assign(f),l.assign(p);var h=a.sub(p);a.assign(h)}else{var v=u.mul(r.decay).add(s.square().mul(1-r.decay));p=l.mul(r.momentum).add(s.mul(r.learningRate).div(v.add(r.epsilon).sqrt())),u.assign(v),l.assign(p),h=a.sub(p),a.assign(h)}})}}),this.incrementIterations()},n.prototype.dispose=function(){this.accumulatedMeanSquares!=null&&nt(this.accumulatedMeanSquares.map(function(e){return e.variable})),this.accumulatedMeanGrads!=null&&this.centered&&nt(this.accumulatedMeanGrads.map(function(e){return e.variable})),this.accumulatedMoments!=null&&nt(this.accumulatedMoments.map(function(e){return e.variable}))},n.prototype.getWeights=function(){return Ae(this,void 0,void 0,function(){var e;return Oe(this,function(r){switch(r.label){case 0:return e=this.accumulatedMeanSquares.concat(this.accumulatedMoments),this.centered&&e.push.apply(e,this.accumulatedMeanGrads),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(e.map(function(i){return{name:i.originalName,tensor:i.variable}}))]}})})},n.prototype.setWeights=function(e){return Ae(this,void 0,void 0,function(){var r;return Oe(this,function(i){switch(i.label){case 0:return[4,this.extractIterations(e)];case 1:return e=i.sent(),r=this.centered?e.length/3:e.length/2,this.accumulatedMeanSquares=e.slice(0,r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),this.accumulatedMoments=e.slice(r,2*r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),this.centered&&(this.accumulatedMeanGrads=e.slice(2*r,3*r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}})),[2]}})})},n.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},n.fromConfig=function(e,r){return new e(r.learningRate,r.decay,r.momentum,r.epsilon,r.centered)},n.className="RMSProp",n}(ca);xs(CC);var Ts=function(){function t(){}return t.sgd=function(n){return new ry(n)},t.momentum=function(n,e,r){return r===void 0&&(r=!1),new EC(n,e,r)},t.rmsprop=function(n,e,r,i,o){return e===void 0&&(e=.9),r===void 0&&(r=0),i===void 0&&(i=null),o===void 0&&(o=!1),new CC(n,e,r,i,o)},t.adam=function(n,e,r,i){return n===void 0&&(n=.001),e===void 0&&(e=.9),r===void 0&&(r=.999),i===void 0&&(i=null),new xC(n,e,r,i)},t.adadelta=function(n,e,r){return n===void 0&&(n=.001),e===void 0&&(e=.95),r===void 0&&(r=null),new bC(n,e,r)},t.adamax=function(n,e,r,i,o){return n===void 0&&(n=.002),e===void 0&&(e=.9),r===void 0&&(r=.999),i===void 0&&(i=null),o===void 0&&(o=0),new SC(n,e,r,i,o)},t.adagrad=function(n,e){return e===void 0&&(e=.1),new wC(n,e)},t}(),Ls={sgd:Ts.sgd,momentum:Ts.momentum,adadelta:Ts.adadelta,adagrad:Ts.adagrad,rmsprop:Ts.rmsprop,adamax:Ts.adamax,adam:Ts.adam},iK=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:function(t){return t()};function vm(){return new Promise(function(t){return iK(function(){return t()})})}oe=Mq;/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var GL=function(t,n){return(GL=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])})(t,n)};function ue(t,n){function e(){this.constructor=t}GL(t,n),t.prototype=n===null?Object.create(n):(e.prototype=n.prototype,new e)}var d1,Pd=function(){return(Pd=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var i in n=arguments[e])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t}).apply(this,arguments)};function We(t,n,e,r){return new(e||(e=Promise))(function(i,o){function a(l){try{u(r.next(l))}catch(c){o(c)}}function s(l){try{u(r.throw(l))}catch(c){o(c)}}function u(l){l.done?i(l.value):new e(function(c){c(l.value)}).then(a,s)}u((r=r.apply(t,n||[])).next())})}function Be(t,n){var e,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(u){return function(l){return function(c){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){a=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){a.label=c[1];break}if(c[0]===6&&a.label<i[1]){a.label=i[1],i=c;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(c);break}i[2]&&a.ops.pop(),a.trys.pop();continue}c=n.call(t,a)}catch(d){c=[6,d],r=0}finally{e=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([u,l])}}}function En(){return d1==null&&(d1=MM().epsilon()),d1}function Ui(){return"channelsLast"}var Fs=function(t){function n(e){var r=t.call(this,e)||this;return Object.setPrototypeOf(r,n.prototype),r}return ue(n,t),n}(Error),uo=function(t){function n(e){var r=t.call(this,e)||this;return Object.setPrototypeOf(r,n.prototype),r}return ue(n,t),n}(Error),Y=function(t){function n(e){var r=t.call(this,e)||this;return Object.setPrototypeOf(r,n.prototype),r}return ue(n,t),n}(Error),Je=function(t){function n(e){var r=t.call(this,e)||this;return Object.setPrototypeOf(r,n.prototype),r}return ue(n,t),n}(Error),oK=function(t){function n(e){var r=t.call(this,e)||this;return Object.setPrototypeOf(r,n.prototype),r}return ue(n,t),n}(Error);(function(t){function n(e){var r=t.call(this,e)||this;return Object.setPrototypeOf(r,n.prototype),r}return ue(n,t),n})(Error);function pu(t,n){if(Array.isArray(t)){for(var e=[],r=0;r<n;r++)e=e.concat(t);return e}return(e=new Array(n)).fill(t),e}function oo(t,n){if(!t)throw new oK(n)}function dk(t,n){for(var e=0,r=0,i=t;r<i.length;r++)i[r]===n&&e++;return e}function mr(t){return t.length===1?t[0]:t}function Ft(t){return Array.isArray(t)?t:[t]}function zo(t){var n=t.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return n[0]!=="_"?n:"private"+n}function Bs(t){return t.length<=1||t.indexOf("_")===-1?t:t.replace(/[_]+(\w|$)/g,function(n,e){return e.toUpperCase()})}var ci={};function RC(t){if(t==null)return null;var n={};return n.className=t.getClassName(),n.config=t.getConfig(),n}function Iw(t){if(t!=null&&typeof t=="object")if(Array.isArray(t))t.forEach(function(o){return Iw(o)});else for(var n=0,e=Object.keys(t);n<e.length;n++){var r=e[n],i=t[r];i!=null&&typeof i=="object"&&(Array.isArray(i)||i.type!=="ndarray"||typeof i.value!="number"?Iw(i):t[r]=i.value)}}function gp(t,n,e,r,i){var o,a,s;if(n===void 0&&(n={}),e===void 0&&(e={}),r===void 0&&(r="object"),i===void 0&&(i=!1),typeof t=="string"){var u=t,l=void 0;if(u in e)l=e[u];else if(u in ci)l=ci[u];else if((l=n[u])==null)throw new Y("Unknown "+r+": "+t+`. This may be due to one of the following reasons:
1. The `+r+` is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom `+r+" is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().");return l}var c=t;if(c.className==null||c.config==null)throw new Y(r+": Improper config format: "+JSON.stringify(c)+`.
'className' and 'config' must set.`);var d=c.className,f=void 0,p=void 0;if(d in e?(f=(o=e[d])[0],p=o[1]):d in ci?(f=(a=ci.className)[0],p=a[1]):d in n&&(f=(s=n[d])[0],p=s[1]),f==null)throw new Y("Unknown "+r+": "+d+`. This may be due to one of the following reasons:
1. The `+r+` is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom `+r+" is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().");if(p!=null){for(var h={},v=0,g=Object.keys(ci);v<g.length;v++)h[C=g[v]]=ci[C];for(var m=0,y=Object.keys(e);m<y.length;m++)h[C=y[m]]=e[C];c.config.customObjects=h;for(var b=Pd({},ci),w=0,x=Object.keys(e);w<x.length;w++){var C=x[w];ci[C]=e[C]}Iw(c.config);var E=p(f,c.config,e,i);return ci=Pd({},b),E}b=Pd({},ci);for(var S=0,N=Object.keys(e);S<N.length;S++)C=N[S],ci[C]=e[C];return E=new f(c.config),ci=Pd({},b),E}function aK(t,n){return t<n?-1:t>n?1:0}function Eh(t,n){return-1*aK(t,n)}function es(t){if(t==null)return t;for(var n=[],e=0,r=t;e<r.length;e++){var i=r[e];n.indexOf(i)===-1&&n.push(i)}return n}function sK(t){if(t==null)throw new Y("Invalid value in obj: "+JSON.stringify(t));for(var n in t)if(t.hasOwnProperty(n))return!1;return!0}function Dc(t,n,e){if(e!=null&&t.indexOf(e)<0)throw new Y(e+" is not a valid "+n+".  Valid values are "+t+" or null/undefined.")}function TC(t,n,e,r){return e===void 0&&(e=0),r===void 0&&(r=1/0),oo(e>=0),oo(r>=e),Array.isArray(t)&&t.length>=e&&t.length<=r&&t.every(function(i){return typeof i===n})}function wr(t,n){Array.isArray(t)?(Fe.assert(t.length>0,function(){return n+" is unexpectedly an empty array."}),t.forEach(function(e,r){return wr(e,"element "+(r+1)+" of "+n)})):Fe.assert(Number.isInteger(t)&&t>0,function(){return"Expected "+n+" to be a positive integer, but got "+qL(t)+"."})}function qL(t){return t===null?"null":Array.isArray(t)?"["+t.map(function(n){return qL(n)}).join(",")+"]":typeof t=="string"?'"'+t+'"':""+t}function uK(t,n){var e,r=Fe.now();return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var a=Fe.now();return a-r<n?e:(r=a,e=t.apply(void 0,i))}}function KL(t){return t==="relu"?"relu":t==="linear"?"linear":t==="elu"?"elu":null}function NC(t,n){return ee(function(){return up(zr(Fg(t,t),n,!0))})}var yp=function(t){function n(){return t!==null&&t.apply(this,arguments)||this}return ue(n,t),n.prototype.getConfig=function(){return{}},n}(he.Serializable),XL=function(t){function n(e){var r=t.call(this)||this;return r.defaultMaxValue=2,r.defaultAxis=0,r.maxValue=e.maxValue!=null?e.maxValue:r.defaultMaxValue,r.axis=e.axis!=null?e.axis:r.defaultAxis,r}return ue(n,t),n.prototype.apply=function(e){var r=this;return ee(function(){var i=NC(e,r.axis),o=br(i,0,r.maxValue);return He(e,cr(o,at(En(),i)))})},n.prototype.getConfig=function(){return{maxValue:this.maxValue,axis:this.axis}},n.className="MaxNorm",n}(yp);he.registerClass(XL);var YL=function(t){function n(e){var r=t.call(this)||this;return r.defaultAxis=0,r.axis=e.axis!=null?e.axis:r.defaultAxis,r}return ue(n,t),n.prototype.apply=function(e){var r=this;return ee(function(){return cr(e,at(En(),NC(e,r.axis)))})},n.prototype.getConfig=function(){return{axis:this.axis}},n.className="UnitNorm",n}(yp);he.registerClass(YL);var JL=function(t){function n(){return t!==null&&t.apply(this,arguments)||this}return ue(n,t),n.prototype.apply=function(e){return ws(e)},n.className="NonNeg",n}(yp);he.registerClass(JL);var QL=function(t){function n(e){var r=t.call(this)||this;return r.defaultMinValue=0,r.defaultMaxValue=1,r.defaultRate=1,r.defaultAxis=0,r.minValue=e.minValue!=null?e.minValue:r.defaultMinValue,r.maxValue=e.maxValue!=null?e.maxValue:r.defaultMaxValue,r.rate=e.rate!=null?e.rate:r.defaultRate,r.axis=e.axis!=null?e.axis:r.defaultAxis,r}return ue(n,t),n.prototype.apply=function(e){var r=this;return ee(function(){var i=NC(e,r.axis),o=at(He(r.rate,br(i,r.minValue,r.maxValue)),He(1-r.rate,i));return He(e,cr(o,at(En(),i)))})},n.prototype.getConfig=function(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}},n.className="MinMaxNorm",n}(yp);he.registerClass(QL);var fk={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function Ot(t){return RC(t)}function pk(t,n){return n===void 0&&(n={}),gp(t,he.SerializationMap.getMap().classNameMap,n,"constraint")}function Cn(t){return t==null?null:typeof t=="string"?pk({className:t in fk?fk[t]:t,config:{}}):t instanceof yp?t:pk(t)}function lK(t){return new XL(t)}function cK(t){return new YL(t)}function dK(){return new JL}function fK(t){return new QL(t)}var pK=Object.freeze({maxNorm:lK,unitNorm:cK,nonNeg:dK,minMaxNorm:fK}),hK=["channelsFirst","channelsLast"],mK=["valid","same","causal"],vK=["max","avg"],gK=["sum","mul","concat","ave"],Xu=new Map;function Tn(t){Dc(hK,"DataFormat",t)}function Ci(t){Dc(mK,"PaddingMode",t)}function ZL(t){Dc(vK,"PoolMode",t)}var Qd=[],hk="/";function tu(t,n){Qd.push(t);try{var e=n();return Qd.pop(),e}catch(r){throw Qd.pop(),r}}function yK(){return Qd.length===0?"":Qd.join(hk)+hk}function e3(t){if(!n3(t))throw new Error("Not a valid tensor name: '"+t+"'");return yK()+t}function t3(t){if(!n3(t))throw new Error("Not a valid tensor name: '"+t+"'");Xu.has(t)||Xu.set(t,0);var n=Xu.get(t);if(Xu.set(t,Xu.get(t)+1),n>0){var e=t+"_"+n;return Xu.set(e,1),e}return t}var bK=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function n3(t){return!!t.match(bK)}function wK(t){return t===parseInt(t.toString(),10)}function ts(t,n,e){n==null&&(n=0),e==null&&(e=t.length);for(var r=1,i=n;i<e;++i)r*=t[i];return r}function r3(t){return t=Array.isArray(t)?new Float32Array(t):t,Fr(t)}function ac(t){return Kg(r3(t)).dataSync()[0]}function ls(t){return us(r3(t)).dataSync()[0]}function Wi(t,n){if(n<t)throw new Y("end ("+n+") < begin ("+t+") is forbidden.");for(var e=[],r=t;r<n;++r)e.push(r);return e}function bp(t,n){return t.asType(n)}function wp(t,n){n===void 0&&(n=-1);var e=t.shape.slice();return n<0&&(n=e.length+n+1),e.splice(n,0,1),t.reshape(e)}function xK(t,n){return ee(function(){if(t.shape.length!==2)throw new Y("repeat() expects a rank-2 tensor, but received a rank-"+t.shape.length+" tensor.");return _w(wp(t,1),[1,n,1])})}function SK(t){var n=[ts(t.shape)];return t.reshape(n)}function EK(t){if(t.rank<=1)throw new Y("batchFlatten requires a minimum rank of 2. Got rank: "+t.rank+".");var n=[t.shape[0],ts(t.shape,1)];return t.reshape(n)}function nu(t,n,e){return ee(function(){switch(t.rank){case 1:return dp(t,n,e);case 2:return Gg(t,[n,0],[e,t.shape[1]]);case 3:return fp(t,[n,0,0],[e,t.shape[1],t.shape[2]]);case 4:return rc(t,[n,0,0,0],[e,t.shape[1],t.shape[2],t.shape[3]]);case 5:return ni(t,[n,0,0,0,0],[e,t.shape[1],t.shape[2],t.shape[3],t.shape[4]]);case 6:return ni(t,[n,0,0,0,0,0],[e,t.shape[1],t.shape[2],t.shape[3],t.shape[4],t.shape[5]]);default:throw new Y("sliceAlongFirstAxis() received an unsupported tensor rank: "+t.rank)}})}function f1(t,n,e){return ee(function(){switch(t.rank){case 1:return dp(t,n,e);case 2:return Gg(t,[0,n],[t.shape[0],e]);case 3:return fp(t,[0,0,n],[t.shape[0],t.shape[1],e]);case 4:return rc(t,[0,0,0,n],[t.shape[0],t.shape[1],t.shape[2],e]);default:throw new Y("sliceAlongLastAxis() received an unsupported tensor rank: "+t.rank)}})}function Ch(t,n,e,r){return ee(function(){switch(t.rank){case 1:return dp(t,n,e);case 2:switch(r){case 1:return nu(t,n,e);case 2:return f1(t,n,e);default:throw new Y("The axis is not within the rank of the tensor "+r)}case 3:switch(r){case 1:return nu(t,n,e);case 2:return fp(t,[0,n,0],[t.shape[0],e,t.shape[2]]);case 3:return f1(t,n,e);default:throw new Y("The axis is not within the rank of the tensor "+r)}case 4:switch(r){case 1:return nu(t,n,e);case 2:return rc(t,[0,n,0,0],[t.shape[0],e,t.shape[2],t.shape[3]]);case 3:return rc(t,[0,0,n,0],[t.shape[0],t.shape[1],e,t.shape[3]]);case 4:return f1(t,n,e);default:throw new Y("The axis is not within the rank of the tensor "+r)}default:throw new Y("sliceAlongLastAxis() received an unsupported tensor rank: "+t.rank)}})}function i3(t,n){var e;return n===void 0&&(n=-1),n<0&&(n=(e=t[0].rank)!==0?e:0),n===t[0].rank&&(n=-1),lr(t,n)}function mk(t,n){switch(t.rank){case 1:return tE([t,n]);case 2:return nE([t,n],0);case 3:return rE([t,n],0);case 4:return iE([t,n],0);default:throw new Y("concatAlongFirstAxis() received an unsupported tensor rank: "+t.rank)}}function _w(t,n){if(Array.isArray(n)||(n=[n]),t.rank!==n.length)throw new Y("The length of input n ("+n.length+") does not match the number of dimensions in input x ("+t.rank+")");return Qa(t,n)}function iy(t,n,e,r,i){return n===void 0&&(n=0),e===void 0&&(e=1),uE(t,n,e,r,i)}function qo(t,n,e,r){if(t.rank<2||n.rank<2)throw new Je("dot requires both inputs to be rank >= 2 but got x shape = "+t.shape+" and y shape = "+n.shape);if(n.rank>=3&&t.shape.slice(-1)[0]!==(c=n.shape.slice(-2)[0]))throw new Je("If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = "+t.shape+" and  y shape = "+n.shape);if(t.rank===2&&n.rank===2){var i=!1,o=!1;return oc.matMul({a:t,b:n,transposeA:i,transposeB:o,bias:r?Aw(t.rank,r,Ui()):null,activation:e})}var a=t.shape.slice(),s=a.pop();t=t.reshape([-1,s]);var u=n.shape.slice(),l=u.pop(),c=u.pop(),d=u.concat([l]),f=Array.from({length:n.rank},function(h,v){return v===0?n.rank-2:v<=n.rank-2?v-1:v});n=n.transpose(f).reshape([c,-1]);var p=a.concat(d);return i=!1,o=!1,oc.matMul({a:t,b:n,transposeA:i,transposeB:o,bias:r?Aw(t.rank,r,Ui()):null,activation:e}).reshape(p)}function o3(t,n,e){return ee(function(){return n=Array.isArray(n)?Fr(n,"int32"):n.toInt(),_c(t,n,e)})}function xp(t){return Fg(t,t)}function Aw(t,n,e){var r=n.shape;if(n.rank!==1&&n.rank!==t)throw new Y("Unexpected bias dimensions: "+n.rank+"; expected it to be 1 or "+t);if(t===5){if(e==="channelsFirst")return r.length===1?n.reshape([1,r[0],1,1,1]):n.reshape([1,r[3],r[0],r[1],r[2]]);if(e==="channelsLast")return r.length===1?n.reshape([1,1,1,1,r[0]]):n.reshape([1].concat(r))}else if(t===4){if(e==="channelsFirst")return r.length===1?n.reshape([1,r[0],1,1]):n.reshape([1,r[2],r[0],r[1]]);if(e==="channelsLast")return r.length===1?n.reshape([1,1,1,r[0]]):n.reshape([1].concat(r))}else if(t===3){if(e==="channelsFirst")return r.length===1?n.reshape([1,r[0],1]):n.reshape([1,r[1],r[0]]);if(e==="channelsLast")return r.length===1?n.reshape([1,1,r[0]]):n.reshape([1].concat(r))}else if(t<3)return n;throw new Y("Unsupported input rank by biasAdd: "+n.rank)}function da(t,n,e){return ee(function(){return e==null&&(e=Ui()),Tn(e),t.add(Aw(t.rank,n,e))})}function CK(t,n){if(n===void 0&&(n=1),n!==1)throw new Je("Support for alpha values other than 1 ("+n+") is not implemented yet.");return Oc(t)}function RK(t){return ee(function(){return cr(t,ss(t).add(1))})}function a3(t,n,e,r){return ee(function(){return cC(t,n,e,r)})}function TK(t){return ee(function(){var n=at(.5,He(.2,t));return br(n,0,1)})}function sc(t,n,e){return e===void 0&&(e=!1),e?t():n()}var NK=["fanIn","fanOut","fanAvg"],kK=["normal","uniform","truncatedNormal"];function IK(t){Dc(NK,"FanMode",t)}function _K(t){Dc(kK,"Distribution",t)}var Xi=function(t){function n(){return t!==null&&t.apply(this,arguments)||this}return ue(n,t),n.prototype.fromConfigUsesCustomObjects=function(){return!1},n.prototype.getConfig=function(){return{}},n}(he.Serializable),s3=function(t){function n(){return t!==null&&t.apply(this,arguments)||this}return ue(n,t),n.prototype.apply=function(e,r){return It(e,r)},n.className="Zeros",n}(Xi);he.registerClass(s3);var kC=function(t){function n(){return t!==null&&t.apply(this,arguments)||this}return ue(n,t),n.prototype.apply=function(e,r){return Co(e,r)},n.className="Ones",n}(Xi);he.registerClass(kC);var u3=function(t){function n(e){var r=t.call(this)||this;if(typeof e!="object")throw new Y("Expected argument of type ConstantConfig but got "+e);if(e.value===void 0)throw new Y("config must have value set but got "+e);return r.value=e.value,r}return ue(n,t),n.prototype.apply=function(e,r){var i=this;return ee(function(){return He(ke(i.value),Co(e,r))})},n.prototype.getConfig=function(){return{value:this.value}},n.className="Constant",n}(Xi);he.registerClass(u3);var l3=function(t){function n(e){var r=t.call(this)||this;return r.DEFAULT_MINVAL=-.05,r.DEFAULT_MAXVAL=.05,r.minval=e.minval||r.DEFAULT_MINVAL,r.maxval=e.maxval||r.DEFAULT_MAXVAL,r.seed=e.seed,r}return ue(n,t),n.prototype.apply=function(e,r){return Cu(e,this.minval,this.maxval,r)},n.prototype.getConfig=function(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}},n.className="RandomUniform",n}(Xi);he.registerClass(l3);var c3=function(t){function n(e){var r=t.call(this)||this;return r.DEFAULT_MEAN=0,r.DEFAULT_STDDEV=.05,r.mean=e.mean||r.DEFAULT_MEAN,r.stddev=e.stddev||r.DEFAULT_STDDEV,r.seed=e.seed,r}return ue(n,t),n.prototype.apply=function(e,r){if((r=r||"float32")!=="float32"&&r!=="int32")throw new Je("randomNormal does not support dType "+r+".");return iy(e,this.mean,this.stddev,r,this.seed)},n.prototype.getConfig=function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}},n.className="RandomNormal",n}(Xi);he.registerClass(c3);var d3=function(t){function n(e){var r=t.call(this)||this;return r.DEFAULT_MEAN=0,r.DEFAULT_STDDEV=.05,r.mean=e.mean||r.DEFAULT_MEAN,r.stddev=e.stddev||r.DEFAULT_STDDEV,r.seed=e.seed,r}return ue(n,t),n.prototype.apply=function(e,r){if((r=r||"float32")!=="float32"&&r!=="int32")throw new Je("truncatedNormal does not support dType "+r+".");return op(e,this.mean,this.stddev,r,this.seed)},n.prototype.getConfig=function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}},n.className="TruncatedNormal",n}(Xi);he.registerClass(d3);var f3=function(t){function n(e){var r=t.call(this)||this;return r.gain=e.gain!=null?e.gain:1,r}return ue(n,t),n.prototype.apply=function(e,r){var i=this;return ee(function(){if(e.length!==2||e[0]!==e[1])throw new Y("Identity matrix initializer can only be used for 2D square matrices.");return He(i.gain,Eg(e[0]))})},n.prototype.getConfig=function(){return{gain:this.gain}},n.className="Identity",n}(Xi);function AK(t,n){var e,r;if(n===void 0&&(n="channelsLast"),Tn(n),t.length===2)e=t[0],r=t[1];else if([3,4,5].indexOf(t.length)!==-1)if(n==="channelsFirst"){var i=ts(t,2);e=t[1]*i,r=t[0]*i}else n==="channelsLast"&&(i=ts(t,0,t.length-2),e=t[t.length-2]*i,r=t[t.length-1]*i);else{var o=ts(t);e=Math.sqrt(o),r=Math.sqrt(o)}return[e,r]}he.registerClass(f3);var Br=function(t){function n(e){var r=t.call(this)||this;if(e.scale<0)throw new Y("scale must be a positive float. Got: "+e.scale);return r.scale=e.scale==null?1:e.scale,r.mode=e.mode==null?"fanIn":e.mode,IK(r.mode),r.distribution=e.distribution==null?"normal":e.distribution,_K(r.distribution),r.seed=e.seed,r}return ue(n,t),n.prototype.apply=function(e,r){var i=AK(e),o=i[0],a=i[1],s=this.scale;if(this.mode==="fanIn"?s/=Math.max(1,o):this.mode==="fanOut"?s/=Math.max(1,a):s/=Math.max(1,(o+a)/2),this.distribution==="normal"){var u=Math.sqrt(s);if((r=r||"float32")!=="float32"&&r!=="int32")throw new Je(this.getClassName()+" does not support dType "+r+".");return op(e,0,u,r,this.seed)}var l=Math.sqrt(3*s);return Cu(e,-l,l,r)},n.prototype.getConfig=function(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}},n.className="VarianceScaling",n}(Xi);he.registerClass(Br);var IC=function(t){function n(e){return t.call(this,{scale:1,mode:"fanAvg",distribution:"uniform",seed:e==null?null:e.seed})||this}return ue(n,t),n.prototype.getClassName=function(){return Br.className},n.className="GlorotUniform",n}(Br);he.registerClass(IC);var _C=function(t){function n(e){return t.call(this,{scale:1,mode:"fanAvg",distribution:"normal",seed:e==null?null:e.seed})||this}return ue(n,t),n.prototype.getClassName=function(){return Br.className},n.className="GlorotNormal",n}(Br);he.registerClass(_C);var AC=function(t){function n(e){return t.call(this,{scale:2,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})||this}return ue(n,t),n.prototype.getClassName=function(){return Br.className},n.className="HeNormal",n}(Br);he.registerClass(AC);var OC=function(t){function n(e){return t.call(this,{scale:2,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})||this}return ue(n,t),n.prototype.getClassName=function(){return Br.className},n.className="HeUniform",n}(Br);he.registerClass(OC);var DC=function(t){function n(e){return t.call(this,{scale:1,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})||this}return ue(n,t),n.prototype.getClassName=function(){return Br.className},n.className="LeCunNormal",n}(Br);he.registerClass(DC);var MC=function(t){function n(e){return t.call(this,{scale:1,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})||this}return ue(n,t),n.prototype.getClassName=function(){return Br.className},n.className="LeCunNormal",n}(Br);he.registerClass(MC);var p3=function(t){function n(e){var r=t.call(this)||this;if(r.DEFAULT_GAIN=1,r.gain=e.gain==null?r.DEFAULT_GAIN:e.gain,r.seed=e.seed,r.seed!=null)throw new Je("Random seed is not implemented for Orthogonal Initializer yet.");return r}return ue(n,t),n.prototype.apply=function(e,r){var i=this;return ee(function(){if(e.length!==2)throw new Je("The Orthogonal Initializer does not support non-2D shapes yet.");e[0]*e[1]>2e3&&console.warn("Orthogonal initializer is being called on a matrix with more than 2000 ("+e[0]*e[1]+") elements: Slowness may result.");var o=iy(e[0]>e[1]?[e[1],e[0]]:e,0,1,"float32"),a=pC.gramSchmidt(o);return e[0]>e[1]&&(a=a.transpose()),He(i.gain,a)})},n.prototype.getConfig=function(){return{gain:this.gain,seed:this.seed}},n.className="Orthogonal",n}(Xi);he.registerClass(p3);var vk={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function gk(t,n){return n===void 0&&(n={}),gp(t,he.SerializationMap.getMap().classNameMap,n,"initializer")}function bt(t){return RC(t)}function Ht(t){if(typeof t=="string"){var n=t in vk?vk[t]:t;if(n==="GlorotNormal")return new _C;if(n==="GlorotUniform")return new IC;if(n==="HeNormal")return new AC;if(n==="HeUniform")return new OC;if(n==="LeCunNormal")return new DC;if(n==="LeCunUniform")return new MC;var e={};return e.className=n,e.config={},gk(e)}return t instanceof Xi?t:gk(t)}function OK(){return new s3}function DK(){return new kC}function MK(t){return new u3(t)}function PK(t){return new l3(t)}function LK(t){return new c3(t)}function FK(t){return new d3(t)}function zK(t){return new f3(t)}function BK(t){return new Br(t)}function jK(t){return new IC(t)}function VK(t){return new _C(t)}function $K(t){return new AC(t)}function UK(t){return new OC(t)}function WK(t){return new DC(t)}function HK(t){return new MC(t)}function GK(t){return new p3(t)}var qK=Object.freeze({zeros:OK,ones:DK,constant:MK,randomUniform:PK,randomNormal:LK,truncatedNormal:FK,identity:zK,varianceScaling:BK,glorotUniform:jK,glorotNormal:VK,heNormal:$K,heUniform:UK,leCunNormal:WK,leCunUniform:HK,orthogonal:GK}),KK=0;function h3(){return KK++}var Rh={};function oy(t){return t===void 0&&(t=""),t in Rh||(Rh[t]=0),Rh[t]+=1,t+Rh[t].toString()}function Ow(t){return Array.isArray(t)&&Array.isArray(t[0])}function bv(t){return t.length===0?[]:Array.isArray(t[0])?t:[t]}function Qe(t){var n;if(Array.isArray(t)){if(t.length!==1)throw new Y("Expected Tensor length to be 1; got "+t.length);n=t[0]}else n=t;return n}function Pt(t){if(Array.isArray(t)&&Array.isArray(t[0])){if(t.length===1)return(t=t)[0];throw new Y("Expected exactly 1 Shape; got "+t.length)}return t}function wv(t){for(var n=0,e=0,r=t;e<r.length;e++){var i=r[e];i.shape.length===0?n+=1:n+=i.shape.reduce(function(o,a){return o*a})}return n}var yk="Variable",m3=function(){function t(n,e,r,i,o){e===void 0&&(e="float32"),r===void 0&&(r=yk),i===void 0&&(i=!0),o===void 0&&(o=null),this.dtype=e??"float32",this.shape=n.shape,this.id=h3(),r=r??yk,this.originalName=e3(r),this.name=t3(this.originalName),this.trainable_=i,this.constraint=o,this.val=ZS(n,this.trainable_,this.name,this.dtype)}return t.prototype.read=function(){return this.assertNotDisposed(),this.val},t.prototype.write=function(n){return this.assertNotDisposed(),XK(this.val,n),this.val.id!==n.id&&(this.val.assign(n),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this},t.prototype.dispose=function(){this.assertNotDisposed(),this.val.dispose()},t.prototype.assertNotDisposed=function(){if(this.val.isDisposed)throw new Error("LayersVariable "+this.name+" is already disposed.")},Object.defineProperty(t.prototype,"trainable",{get:function(){return this.trainable_},set:function(n){this.trainable_=n,this.val.trainable=n},enumerable:!0,configurable:!0}),t}();function XK(t,n){if(t.shape.toString()!==n.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(t.shape)+" vs. "+JSON.stringify(n.shape))}function Dw(t){return t.map(function(n){return n.read()})}function PC(t){t.forEach(function(n){n[0].write(n[1])})}var Fn=function(){return function(t){this.dtype=t.dtype,this.shape=t.shape,t.shape!=null?this.ndim=t.shape.length:this.ndim=t.ndim,this.maxNDim=t.maxNDim,this.minNDim=t.minNDim,this.axes=t.axes||{}}}(),Pi=function(){return function(t,n,e,r,i,o,a){this.dtype=t,this.shape=n,this.sourceLayer=e,this.inputs=r,this.callArgs=i,this.outputTensorIndex=a,this.id=h3(),o!=null&&(this.originalName=e3(o),this.name=t3(this.originalName)),this.rank=n.length}}(),YK=0,ay=function(){function t(n,e){this.callArgs=e,this.id=YK++,this.outboundLayer=n.outboundLayer,this.inboundLayers=n.inboundLayers,this.nodeIndices=n.nodeIndices,this.tensorIndices=n.tensorIndices,this.inputTensors=n.inputTensors,this.outputTensors=n.outputTensors,this.inputMasks=n.inputMasks,this.outputMasks=n.outputMasks,this.inputShapes=n.inputShapes,this.outputShapes=n.outputShapes;for(var r=0,i=n.inboundLayers;r<i.length;r++){var o=i[r];o!=null&&o.outboundNodes.push(this)}n.outboundLayer.inboundNodes.push(this)}return t.prototype.getConfig=function(){for(var n=[],e=0,r=this.inboundLayers;e<r.length;e++){var i=r[e];i!=null?n.push(i.name):n.push(null)}return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:n,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}},t}(),JK=0,pt=function(t){function n(e){var r=t.call(this)||this;r._callHook=null,r._addedWeightNames=[],r._stateful=!1,r.id=JK++,r.activityRegularizer=null,r.inputSpec=null,r.supportsMasking=!1,r._trainableWeights=[],r._nonTrainableWeights=[],r._losses=[],r._updates=[],r._built=!1,r.inboundNodes=[],r.outboundNodes=[];var i=e.name;if(!i){var o=r.getClassName();i=zo(o)+"_"+oy(o)}if(r.name=i,r.trainable_=e.trainable==null||e.trainable,e.inputShape!=null||e.batchInputShape!=null){var a=void 0;if(e.batchInputShape!=null)a=e.batchInputShape;else if(e.inputShape!=null){var s=null;e.batchSize!=null&&(s=e.batchSize),a=[s].concat(e.inputShape)}r.batchInputShape=a;var u=e.dtype;u==null&&(u=e.inputDType),u==null&&(u="float32"),r.dtype=u}return e.weights!=null?r.initialWeights=e.weights:r.initialWeights=null,r._refCount=null,r.fastWeightInitDuringBuild=!1,r}return ue(n,t),n.nodeKey=function(e,r){return e.name+"_ib-"+r.toString()},n.prototype.getNodeAtIndex=function(e,r){if(this.inboundNodes.length===0)throw new uo("The layer has never been called and thus has no defined "+r+".");if(this.inboundNodes.length<=e)throw new Y("Asked to get "+r+" at node "+e+", but the layer has only "+this.inboundNodes.length+" inbound nodes.");return this.inboundNodes[e]},n.prototype.getInputAt=function(e){return mr(this.getNodeAtIndex(e,"input").inputTensors)},n.prototype.getOutputAt=function(e){return mr(this.getNodeAtIndex(e,"output").outputTensors)},Object.defineProperty(n.prototype,"input",{get:function(){if(this.inboundNodes.length>1)throw new Fs("Layer "+this.name+' has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use `getInputAt(nodeIndex)` instead.');if(this.inboundNodes.length===0)throw new Fs("Layer "+this.name+" is not connected, no input to return.");return mr(this.getNodeAtIndex(0,"input").inputTensors)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"output",{get:function(){if(this.inboundNodes.length===0)throw new Fs("Layer "+this.name+" has no inbound nodes.");if(this.inboundNodes.length>1)throw new Fs("Layer "+this.name+' has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use `getOutputAt(nodeIndex)` instead.');return mr(this.getNodeAtIndex(0,"output").outputTensors)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"losses",{get:function(){return this._losses},enumerable:!0,configurable:!0}),n.prototype.calculateLosses=function(){return this.losses.map(function(e){return e()})},Object.defineProperty(n.prototype,"updates",{get:function(){return this._updates},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"built",{get:function(){return this._built},set:function(e){this._built=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"trainable",{get:function(){return this.trainable_},set:function(e){this._trainableWeights.forEach(function(r){return r.trainable=e}),this.trainable_=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"trainableWeights",{get:function(){return this.trainable_?this._trainableWeights.filter(function(e){return e.trainable}):[]},set:function(e){this._trainableWeights=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"nonTrainableWeights",{get:function(){return this.trainable?this._trainableWeights.filter(function(e){return!e.trainable}).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)},set:function(e){this._nonTrainableWeights=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"weights",{get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"stateful",{get:function(){return this._stateful},enumerable:!0,configurable:!0}),n.prototype.resetStates=function(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")},n.prototype.assertInputCompatibility=function(e){if(e=Ft(e),this.inputSpec!=null&&this.inputSpec.length!==0){var r=Ft(this.inputSpec);if(e.length!==r.length)throw new Y("Layer "+this.name+" expects "+r.length+" inputs, but it received "+e.length+" input tensors. Input received: "+e);for(var i=0;i<e.length;i++){var o=e[i],a=r[i];if(a!=null){var s=o.rank;if(a.ndim!=null&&s!==a.ndim)throw new Y("Input "+i+" is incompatible with layer "+this.name+": expected ndim="+a.ndim+", found ndim="+s);if(a.maxNDim!=null&&s>a.maxNDim)throw new Y("Input "+i+" is incompatible with layer "+this.name+": expected max_ndim="+a.maxNDim+", found ndim="+s);if(a.minNDim!=null&&s<a.minNDim)throw new Y("Input "+i+" is incompatible with layer "+this.name+": expected min_ndim="+a.minNDim+", found ndim="+s+".");if(a.dtype!=null&&o.dtype!==a.dtype)throw new Y("Input "+i+" is incompatible with layer "+this.name+" : expected dtype="+a.dtype+", found dtype="+o.dtype+".");if(a.axes){var u=o.shape;for(var l in a.axes){var c=Number(l),d=a.axes[l],f=c>=0?u[c]:u[u.length+c];if(d!=null&&[d,null].indexOf(f)===-1)throw new Y("Input "+i+" is incompatible with layer "+this.name+": expected axis "+c+" of input shape to have value "+d+" but got shape "+u+".")}}if(a.shape!=null)for(var p=0;p<a.shape.length;++p){var h=a.shape[p],v=o.shape[p];if(h!=null&&v!=null&&h!==v)throw new Y("Input "+i+" is incompatible with layer "+this.name+": expected shape="+a.shape+", found shape="+o.shape+".")}}}}},n.prototype.call=function(e,r){return e},n.prototype.invokeCallHook=function(e,r){this._callHook!=null&&this._callHook(e,r)},n.prototype.setCallHook=function(e){this._callHook=e},n.prototype.clearCallHook=function(){this._callHook=null},n.prototype.apply=function(e,r){var i=this;r=r||{},this.assertNotDisposed();for(var o=Ft(e),a=!0,s=0,u=o;s<u.length;s++)if(!(u[s]instanceof Pi)){a=!1;break}for(var l=!0,c=0,d=o;c<d.length;c++)if(d[c]instanceof Pi){l=!1;break}if(a===l)throw new Y("Arguments to apply() must be all SymbolicTensors or all Tensors");return tu(this.name,function(){if(!i.built){i.assertInputCompatibility(e);for(var f=[],p=0,h=Ft(e);p<h.length;p++){var v=h[p];f.push(v.shape)}i.build(mr(f)),i.built=!0,i.initialWeights&&i.setWeights(i.initialWeights),i._refCount===null&&l&&(i._refCount=1)}if(i.assertInputCompatibility(e),l){for(var g=[],m=0,y=Ft(C=i.call(e,r));m<y.length;m++){var b=y[m];o.indexOf(b)!==-1&&(b=b.clone()),g.push(b)}if(C=mr(g),i.activityRegularizer!=null)throw new Je("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return C}var w=QK(e),x=i.computeOutputShape(w),C=void 0,E=ZK(e);if(i.warnOnIncompatibleInputShape(Array.isArray(e)?w[0]:w),C=x!=null&&x.length>0&&Array.isArray(x[0])?x.map(function(S,N){return new Pi(E,S,i,Ft(e),r,i.name,N)}):new Pi(E,x,i,Ft(e),r,i.name),i.addInboundNode(e,C,null,null,w,x,r),i._refCount++,i.activityRegularizer!=null)throw new Je("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return C})},n.prototype.warnOnIncompatibleInputShape=function(e){if(this.batchInputShape!=null)if(e.length!==this.batchInputShape.length)console.warn("The rank of the input tensor provided (shape: "+JSON.stringify(e)+") does not match that of the batchInputShape ("+JSON.stringify(this.batchInputShape)+") of the layer "+this.name);else{var r=!1;this.batchInputShape.forEach(function(i,o){i!=null&&e[o]!=null&&e[o]!==i&&(r=!0)}),r&&console.warn("The shape of the input tensor ("+JSON.stringify(e)+") does not match the expectation of layer "+this.name+": "+JSON.stringify(this.batchInputShape))}},Object.defineProperty(n.prototype,"outputShape",{get:function(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new Fs("The layer "+this.name+" has never been called and thus has no defined output shape.");for(var e=[],r=0,i=this.inboundNodes;r<i.length;r++){var o=i[r],a=JSON.stringify(o.outputShapes);e.indexOf(a)===-1&&e.push(a)}if(e.length===1){var s=this.inboundNodes[0].outputShapes;return Array.isArray(s)&&Array.isArray(s[0])&&s.length===1?s[0]:s}throw new Fs("The layer "+this.name+' has multiple inbound nodes with different output shapes. Hence the notion of "outut shape" is ill-defined for the layer.')},enumerable:!0,configurable:!0}),n.prototype.countParams=function(){if(!this.built)throw new uo("You tried to call countParams() on "+this.name+", but the layer is not built yet. Build it first by calling build(batchInputShape).");return wv(this.weights)},n.prototype.build=function(e){this.built=!0},n.prototype.getWeights=function(e){return e===void 0&&(e=!1),Dw(e?this.trainableWeights:this.weights)},n.prototype.setWeights=function(e){var r=this;ee(function(){var i=r.weights;if(i.length!==e.length)throw new Y('You called setWeights(weights) on layer "'+r.name+'" with a weight list of length '+e.length+", but the layer was expecting "+i.length+" weights. Provided weights: "+e+"...");if(i.length!==0){for(var o=[],a=Dw(i),s=0;s<a.length;++s){var u=a[s],l=i[s],c=e[s];if(!Fe.arraysEqual(u.shape,c.shape))throw new Y("Layer weight shape "+u.shape+" not compatible with provided weight shape "+c.shape);o.push([l,c])}PC(o)}})},n.prototype.addWeight=function(e,r,i,o,a,s,u){if(this._addedWeightNames.indexOf(e)!==-1)throw new Y("Duplicate weight name "+e+" for layer "+this.name);this._addedWeightNames.push(e),i==null&&(i="float32"),this.fastWeightInitDuringBuild&&(o=Ht("zeros"));var l=o.apply(r,i),c=new m3(l,i,e,s,u);return l.dispose(),a!=null&&this.addLoss(function(){return a.apply(c.read())}),s==null&&(s=!0),s?this._trainableWeights.push(c):this._nonTrainableWeights.push(c),c},n.prototype.setFastWeightInitDuringBuild=function(e){this.fastWeightInitDuringBuild=e},n.prototype.addLoss=function(e){var r;e==null||Array.isArray(e)&&e.length===0||(e=Ft(e),this._losses!==void 0&&this._losses!==null&&(r=this.losses).push.apply(r,e))},n.prototype.computeOutputShape=function(e){return e},n.prototype.computeMask=function(e,r){var i=this;if(!this.supportsMasking){if(r!=null){if(!Array.isArray(r))throw new TypeError("Layer "+this.name+" does not support masking, but was passed an inputMask.");r.forEach(function(o){if(o!=null)throw new TypeError("Layer "+i.name+" does not support masking, but was passed an inputMask.")})}return null}return r},n.prototype.addInboundNode=function(e,r,i,o,a,s,u){u===void 0&&(u=null);var l=Ft(e);r=Ft(r),i=Ft(i),o=Ft(o),a=bv(a),s=bv(s);for(var c=[],d=[],f=[],p=0,h=l;p<h.length;p++){var v=h[p];c.push(v.sourceLayer),d.push(v.nodeIndex),f.push(v.tensorIndex)}new ay({outboundLayer:this,inboundLayers:c,nodeIndices:d,tensorIndices:f,inputTensors:l,outputTensors:r,inputMasks:i,outputMasks:o,inputShapes:a,outputShapes:s},u);for(var g=0;g<r.length;g++)r[g].sourceLayer=this,r[g].nodeIndex=this.inboundNodes.length-1,r[g].tensorIndex=g},n.prototype.getConfig=function(){var e={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(e.batchInputShape=this.batchInputShape),this.dtype!=null&&(e.dtype=this.dtype),e},n.prototype.disposeWeights=function(){return this.weights.forEach(function(e){return e.dispose()}),this.weights.length},n.prototype.assertNotDisposed=function(){if(this._refCount===0)throw new Error("Layer '"+this.name+"' is already disposed.")},n.prototype.dispose=function(){if(!this.built)throw new Error("Cannot dispose Layer "+this.name+" because it has not been built yet.");if(this._refCount===null)throw new Error("Cannot dispose Layer "+this.name+" because it has not been used yet.");this.assertNotDisposed();var e=0;return--this._refCount==0&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}},n}(he.Serializable);function QK(t){for(var n=[],e=0,r=t=Ft(t);e<r.length;e++){var i=r[e];n.push(i.shape)}return mr(n)}function ZK(t){return"float32"}function v3(t,n,e){if((n==null||e!=null&&e>0)&&(n=t.sourceLayer,e=t.nodeIndex),n.inboundNodes.length===0)return[t];var r=n.inboundNodes[e];if(r.inboundLayers.length===0)return r.inputTensors;for(var i=[],o=0;o<r.inboundLayers.length;o++)for(var a=0,s=v3(r.inputTensors[o],r.inboundLayers[o],r.nodeIndices[o]);a<s.length;a++){var u=s[a];i.indexOf(u)===-1&&i.push(u)}return i}var bk,Sp=function(t){function n(e){var r=t.call(this,{dtype:e.dtype,name:e.name!=null?e.name:oy("input").toString()})||this;if(e.batchSize==null&&(e.batchSize=null),e.sparse==null&&(e.sparse=!1),r.trainable=!1,r.built=!0,r.sparse=e.sparse,e.inputShape!=null&&e.batchInputShape!=null)throw new Y("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");var i=e.batchInputShape;if(i==null){if(e.inputShape==null)throw new Y("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");i=[e.batchSize].concat(e.inputShape)}else if(e.batchSize!=null)throw new Y("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");var o=e.dtype||"float32";r.batchInputShape=i,r.dtype=o,r.inputSpec=[{shape:i}];var a=new Pi(r.dtype,r.batchInputShape,r,[],{},r.name);return a.nodeIndex=0,a.tensorIndex=0,new ay({outboundLayer:r,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[a],outputTensors:[a],inputMasks:[null],outputMasks:[null],inputShapes:[i],outputShapes:[i]}),r}return ue(n,t),n.prototype.apply=function(e,r){throw new Y("Cannot pass any input to an InputLayer's apply() method. InputLayer name: "+this.name)},n.prototype.dispose=function(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}},n.prototype.getConfig=function(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}},n.className="InputLayer",n}(pt);function g3(t){if(t.batchShape==null&&t.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(t.batchShape!=null&&t.shape!=null)throw new Y("Please provide either a `shape` or `batchShape` argument to Input, but not both.");var n=t.batchShape;t.shape!=null&&n==null&&(n=[null].concat(t.shape));var e=t.dtype;return e==null&&(e="float32"),new Sp({batchInputShape:n,name:t.name,dtype:e,sparse:t.sparse}).inboundNodes[0].outputTensors[0]}function Sa(t){return We(this,void 0,void 0,function(){var n,e,r,i,o,a,s,u;return Be(this,function(l){switch(l.label){case 0:if(t==null)return[2];for(i in n=[],e=[],r=[],t)typeof(o=t[i])!="number"&&(a=o,n.push(a.data()),e.push(i),r.push(a));return n.length>0?[4,Promise.all(n)]:[3,2];case 1:for(s=l.sent(),u=0;u<s.length;++u)t[e[u]]=s[u][0];nt(r),l.label=2;case 2:return[2]}})})}function y3(t){if(t!=null)for(var n in t){var e=t[n];typeof e!="number"&&e.dispose()}}he.registerClass(Sp),function(t){t[t.SILENT=0]="SILENT",t[t.VERBOSE=1]="VERBOSE"}(bk||(bk={}));var eX=125,uc=function(){function t(){this.validationData=null}return t.prototype.setParams=function(n){this.params=n},t.prototype.onEpochBegin=function(n,e){return We(this,void 0,void 0,function(){return Be(this,function(r){return[2]})})},t.prototype.onEpochEnd=function(n,e){return We(this,void 0,void 0,function(){return Be(this,function(r){return[2]})})},t.prototype.onBatchBegin=function(n,e){return We(this,void 0,void 0,function(){return Be(this,function(r){return[2]})})},t.prototype.onBatchEnd=function(n,e){return We(this,void 0,void 0,function(){return Be(this,function(r){return[2]})})},t.prototype.onTrainBegin=function(n){return We(this,void 0,void 0,function(){return Be(this,function(e){return[2]})})},t.prototype.onTrainEnd=function(n){return We(this,void 0,void 0,function(){return Be(this,function(e){return[2]})})},t.prototype.setModel=function(n){},t}(),b3=function(){function t(n,e){e===void 0&&(e=10),n==null&&(n=[]),this.callbacks=n,this.queueLength=e}return t.prototype.append=function(n){this.callbacks.push(n)},t.prototype.setParams=function(n){for(var e=0,r=this.callbacks;e<r.length;e++)r[e].setParams(n)},t.prototype.setModel=function(n){for(var e=0,r=this.callbacks;e<r.length;e++)r[e].setModel(n)},t.prototype.onEpochBegin=function(n,e){return We(this,void 0,void 0,function(){var r,i;return Be(this,function(o){switch(o.label){case 0:e==null&&(e={}),r=0,i=this.callbacks,o.label=1;case 1:return r<i.length?[4,i[r].onEpochBegin(n,e)]:[3,4];case 2:o.sent(),o.label=3;case 3:return r++,[3,1];case 4:return[2]}})})},t.prototype.onEpochEnd=function(n,e){return We(this,void 0,void 0,function(){var r,i;return Be(this,function(o){switch(o.label){case 0:e==null&&(e={}),r=0,i=this.callbacks,o.label=1;case 1:return r<i.length?[4,i[r].onEpochEnd(n,e)]:[3,4];case 2:o.sent(),o.label=3;case 3:return r++,[3,1];case 4:return[2]}})})},t.prototype.onBatchBegin=function(n,e){return We(this,void 0,void 0,function(){var r,i;return Be(this,function(o){switch(o.label){case 0:e==null&&(e={}),r=0,i=this.callbacks,o.label=1;case 1:return r<i.length?[4,i[r].onBatchBegin(n,e)]:[3,4];case 2:o.sent(),o.label=3;case 3:return r++,[3,1];case 4:return[2]}})})},t.prototype.onBatchEnd=function(n,e){return We(this,void 0,void 0,function(){var r,i;return Be(this,function(o){switch(o.label){case 0:e==null&&(e={}),r=0,i=this.callbacks,o.label=1;case 1:return r<i.length?[4,i[r].onBatchEnd(n,e)]:[3,4];case 2:o.sent(),o.label=3;case 3:return r++,[3,1];case 4:return[2]}})})},t.prototype.onTrainBegin=function(n){return We(this,void 0,void 0,function(){var e,r;return Be(this,function(i){switch(i.label){case 0:n==null&&(n={}),e=0,r=this.callbacks,i.label=1;case 1:return e<r.length?[4,r[e].onTrainBegin(n)]:[3,4];case 2:i.sent(),i.label=3;case 3:return e++,[3,1];case 4:return[2]}})})},t.prototype.onTrainEnd=function(n){return We(this,void 0,void 0,function(){var e,r;return Be(this,function(i){switch(i.label){case 0:n==null&&(n={}),e=0,r=this.callbacks,i.label=1;case 1:return e<r.length?[4,r[e].onTrainEnd(n)]:[3,4];case 2:i.sent(),i.label=3;case 3:return e++,[3,1];case 4:return[2]}})})},t}(),tX=function(t){function n(){return t.call(this)||this}return ue(n,t),n.prototype.onEpochBegin=function(e){return We(this,void 0,void 0,function(){return Be(this,function(r){return this.seen=0,this.totals={},[2]})})},n.prototype.onBatchEnd=function(e,r){return We(this,void 0,void 0,function(){var i,o,a,s,u=this;return Be(this,function(l){for(s in r==null&&(r={}),i=r.size==null?0:r.size,this.seen+=i,o=function(c){var d=r[c];if(typeof d=="number")a.totals.hasOwnProperty(c)||(a.totals[c]=0),a.totals[c]=a.totals[c]+d*i;else{var f=void 0;c in a.totals?f=a.totals[c]:a.totals[c]=0;var p=ee(function(){return at(u.totals[c],He(d,i))});a.totals[c]=p,f!=null&&f.dispose()}},a=this,r)o(s);return[2]})})},n.prototype.onEpochEnd=function(e,r){return We(this,void 0,void 0,function(){var i,o,a,s,u,l=this;return Be(this,function(c){if(r!=null)for(i=function(d){if(o.totals[d]==null)return"continue";typeof o.totals[d]=="number"?r[d]=o.totals[d]/o.seen:ee(function(){var f=He(cr(1,l.seen),l.totals[d]);r[d]=f,l.totals[d].dispose(),bo(r[d])})},o=this,a=0,s=this.params.metrics;a<s.length;a++)u=s[a],i(u);return[2]})})},n}(uc),w3=function(t){function n(){return t!==null&&t.apply(this,arguments)||this}return ue(n,t),n.prototype.onTrainBegin=function(e){return We(this,void 0,void 0,function(){return Be(this,function(r){return this.epoch=[],this.history={},[2]})})},n.prototype.onEpochEnd=function(e,r){return We(this,void 0,void 0,function(){var i;return Be(this,function(o){for(i in r==null&&(r={}),this.epoch.push(e),r)this.history[i]==null&&(this.history[i]=[]),this.history[i].push(r[i]);return[2]})})},n.prototype.syncData=function(){return We(this,void 0,void 0,function(){var e,r,i,o,a,s,u,l,c;return Be(this,function(d){switch(d.label){case 0:for(o in e=[],r=[],i=[],this.history)for(a=this.history[o],s=0;s<a.length;++s)typeof a[s]!="number"&&(u=a[s],e.push(u.data()),r.push(o),i.push(s));return[4,Promise.all(e)];case 1:for(l=d.sent(),c=0;c<l.length;++c)this.history[r[c]][i[c]].dispose(),this.history[r[c]][i[c]]=l[c][0];return[2]}})})},n}(uc),x3=function(t){function n(e,r){var i=t.call(this)||this;if(i.currentEpoch=0,i.yieldEvery=r||"auto",i.yieldEvery==="auto"&&(i.yieldEvery=eX),i.yieldEvery==="never"&&e.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");return Fe.isNumber(i.yieldEvery)&&(i.maybeWait=uK(i.maybeWait.bind(i),i.yieldEvery)),i.trainBegin=e.onTrainBegin,i.trainEnd=e.onTrainEnd,i.epochBegin=e.onEpochBegin,i.epochEnd=e.onEpochEnd,i.batchBegin=e.onBatchBegin,i.batchEnd=e.onBatchEnd,i.yield=e.onYield,i}return ue(n,t),n.prototype.maybeWait=function(e,r,i){return We(this,void 0,void 0,function(){var o;return Be(this,function(a){switch(a.label){case 0:return o=[],this.yield==null?[3,2]:[4,Sa(i)];case 1:a.sent(),o.push(this.yield(e,r,i)),a.label=2;case 2:return o.push(vm()),[4,Promise.all(o)];case 3:return a.sent(),[2]}})})},n.prototype.onEpochBegin=function(e,r){return We(this,void 0,void 0,function(){return Be(this,function(i){switch(i.label){case 0:return this.currentEpoch=e,this.epochBegin==null?[3,3]:[4,Sa(r)];case 1:return i.sent(),[4,this.epochBegin(e,r)];case 2:i.sent(),i.label=3;case 3:return[2]}})})},n.prototype.onEpochEnd=function(e,r){return We(this,void 0,void 0,function(){var i;return Be(this,function(o){switch(o.label){case 0:return i=[],this.epochEnd==null?[3,2]:[4,Sa(r)];case 1:o.sent(),i.push(this.epochEnd(e,r)),o.label=2;case 2:return this.yieldEvery==="epoch"&&i.push(vm()),[4,Promise.all(i)];case 3:return o.sent(),[2]}})})},n.prototype.onBatchBegin=function(e,r){return We(this,void 0,void 0,function(){return Be(this,function(i){switch(i.label){case 0:return this.batchBegin==null?[3,3]:[4,Sa(r)];case 1:return i.sent(),[4,this.batchBegin(e,r)];case 2:i.sent(),i.label=3;case 3:return[2]}})})},n.prototype.onBatchEnd=function(e,r){return We(this,void 0,void 0,function(){var i;return Be(this,function(o){switch(o.label){case 0:return i=[],this.batchEnd==null?[3,2]:[4,Sa(r)];case 1:o.sent(),i.push(this.batchEnd(e,r)),o.label=2;case 2:return this.yieldEvery==="batch"?i.push(vm()):Fe.isNumber(this.yieldEvery)&&i.push(this.maybeWait(this.currentEpoch,e,r)),[4,Promise.all(i)];case 3:return o.sent(),[2]}})})},n.prototype.onTrainBegin=function(e){return We(this,void 0,void 0,function(){return Be(this,function(r){switch(r.label){case 0:return this.trainBegin==null?[3,3]:[4,Sa(e)];case 1:return r.sent(),[4,this.trainBegin(e)];case 2:r.sent(),r.label=3;case 3:return[2]}})})},n.prototype.onTrainEnd=function(e){return We(this,void 0,void 0,function(){return Be(this,function(r){switch(r.label){case 0:return this.trainEnd==null?[3,3]:[4,Sa(e)];case 1:return r.sent(),[4,this.trainEnd(e)];case 2:r.sent(),r.label=3;case 3:return[2]}})})},n}(uc);function S3(t,n){return t==null&&(t={}),t instanceof uc?[t]:Array.isArray(t)&&t[0]instanceof uc?t:Ft(t).map(function(e){return new x3(e,n)})}var E3=function(){function t(){}return t.registerCallbackConstructor=function(n,e){Fe.assert(n>=0&&Number.isInteger(n),function(){return"Verbosity level is expected to be an integer >= 0, but got "+n}),t.checkForDuplicate(e),t.constructors[n]==null&&(t.constructors[n]=[]),t.constructors[n].push(e)},t.checkForDuplicate=function(n){for(var e in t.constructors)t.constructors[+e].forEach(function(r){if(r===n)throw new Y("Duplicate callback constructor.")})},t.clear=function(){t.constructors={}},t.createCallbacks=function(n){var e=[];for(var r in t.constructors){var i=+r;n>=i&&e.push.apply(e,t.constructors[i])}return e.map(function(o){return new o})},t.constructors={},t}();function C3(t,n,e,r,i,o,a,s,u){var l=new w3,c=[new tX].concat(E3.createCallbacks(n));t!=null&&c.push.apply(c,t),c.push(l);var d=new b3(c);return d.setParams({epochs:e,initialEpoch:r,samples:i,steps:o,batchSize:a,verbose:n,doValidation:s,metrics:u}),{callbackList:d,history:l}}function ji(t,n,e){return n===void 0&&(n={}),e===void 0&&(e=!1),gp(t,he.SerializationMap.getMap().classNameMap,n,"layer",e)}function xv(t,n){return ee(function(){t.dtype!=="float32"&&(t=t.asType("float32"));var e=zr(xp(t),n,!0),r=Tc(e.shape,En()),i=up(Ro(e,r));return cr(t,i)})}function Iu(t,n){return ee(function(){return gn(xp(jn(n,t)),-1)})}function sy(t,n){return ee(function(){return gn(ss(jn(n,t)),-1)})}function Mc(t,n){return ee(function(){var e=jn(t,n),r=br(ss(t),En(),Number.MAX_VALUE),i=ss(cr(e,r));return He(100,gn(i,-1))})}function nX(t,n){return ee(function(){var e=br(n,En(),Number.MAX_VALUE),r=na(at(1,e)),i=br(t,En(),Number.MAX_VALUE),o=na(at(1,i));return gn(xp(jn(r,o)),-1)})}function rX(t,n){return ee(function(){var e=Ro(0,jn(1,He(t,n)));return gn(xp(e),-1)})}function iX(t,n){return ee(function(){var e=Ro(0,jn(1,He(t,n)));return gn(e,-1)})}function oX(t,n){return ee(function(){var e=zr(He(t,n),-1),r=us(He(jn(1,t),n),-1);return Ro(0,at(1,jn(r,e)))})}function aX(t,n){return ee(function(){var e=Math.log(2),r=jn(n,t),i=jn(at(r,sp(He(-2,r))),e);return gn(i,-1)})}function jf(t,n,e){return e===void 0&&(e=!1),ee(function(){if(e)n=Ru(n);else{var r=zr(n,n.shape.length-1,!0);n=cr(n,r)}return n=br(n,En(),1-En()),Tu(zr(He(t.toFloat(),na(n)),n.shape.length-1))})}function Sv(t,n){return ee(function(){var e=Ig(SK(t)).toInt(),r=(n=br(n,En(),1-En())).shape;return jf(Zl(e,r[r.length-1]).reshape(r),n,!1)})}function sX(t,n){if(!Fe.arraysEqual(t.shape,n.shape))throw new Y("logits and labels must have the same shape, but got shapes "+JSON.stringify(t.shape)+" and "+JSON.stringify(n.shape));return ee(function(){var e=n.relu(),r=n.abs().neg();return e.sub(n.mul(t)).add(r.exp().log1p())})}function uy(t,n){return ee(function(){var e;return e=br(n,En(),1-En()),e=na(cr(e,jn(1,e))),gn(sX(t,e),-1)})}function uX(t,n){return ee(function(){var e=br(t,En(),1),r=br(n,En(),1);return zr(He(t,na(cr(e,r))),-1)})}function lX(t,n){return ee(function(){var e=na(at(En(),n));return gn(jn(n,He(t,e)),-1)})}function LC(t,n){return ee(function(){var e=xv(t,-1),r=xv(n,-1),i=He(e,r);return Tu(zr(i,-1))})}var Ev={meanSquaredError:Iu,meanAbsoluteError:sy,meanAbsolutePercentageError:Mc,meanSquaredLogarithmicError:nX,squaredHinge:rX,hinge:iX,categoricalHinge:oX,logcosh:aX,categoricalCrossentropy:jf,sparseCategoricalCrossentropy:Sv,binaryCrossentropy:uy,kullbackLeiblerDivergence:uX,poisson:lX,cosineProximity:LC};function p1(t){if(typeof t=="string"){if(t in Ev)return Ev[t];var n="Unknown loss "+t;throw t.toLowerCase().includes("softmaxcrossentropy")&&(n="Unknown loss "+t+'. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy'),new Y(n)}return t}function FC(t,n){return ee(function(){var e=He(.5,ti(n)),r=bp(Ic(n,e),t.dtype);return gn(Nu(t,r),-1)})}function zC(t,n){return ee(function(){return bp(Nu(Bf(t,-1),Bf(n,-1)),"float32")})}function R3(t,n){return ee(function(){return ua(t.equal(1),n.equal(1)).sum().cast("float32")})}function cX(t,n){return ee(function(){return ua(t.equal(1),n.equal(0)).sum().cast("float32")})}function dX(t,n){return ee(function(){return ua(t.equal(0),n.equal(1)).sum().cast("float32")})}function T3(t,n){return ee(function(){var e=R3(t,n),r=dX(t,n),i=e.add(r);return ra(Ic(i,0),e.div(i),0).cast("float32")})}function fX(t,n){return ee(function(){var e=R3(t,n),r=cX(t,n),i=e.add(r);return ra(Ic(i,0),e.div(i),0).cast("float32")})}function N3(t,n){return uy(t,n)}function k3(t,n){return t.rank===n.rank&&(t=t.squeeze([t.rank-1])),(n=n.argMax(-1)).dtype!==t.dtype&&(n=n.asType(t.dtype)),Nu(t,n).asType("float32")}var pX=Iu,hX=Iu,mX=sy,vX=sy,gX=Mc,yX=Mc,BC=jf,bX=LC,I3=Sv,Cv={binaryAccuracy:FC,categoricalAccuracy:zC,precision:T3,categoricalCrossentropy:BC,sparseCategoricalCrossentropy:I3,mse:pX,MSE:hX,mae:mX,MAE:vX,mape:gX,MAPE:yX,cosine:bX};function wX(t){if(typeof t=="string"&&t in Cv)return Cv[t];if(typeof t!="string"&&t!=null)return t;throw new Y("Unknown metric "+t)}function Th(t){if(oo(t!==null,"Unknown LossOrMetricFn "+t),typeof t=="string")return t;for(var n=void 0,e=0,r=Object.keys(Ev);e<r.length;e++){var i=r[e];if(Ev[i]===t){n=i;break}}if(n!==void 0)return n;for(var o=0,a=Object.keys(Cv);o<a.length;o++)if(i=a[o],Cv[i]===t){n=i;break}return n!==void 0?n:t.name}function xX(t){var n={Adagrad:function(){return Ls.adagrad(.01)},Adadelta:function(){return Ls.adadelta(1,.95,En())},Adam:function(){return Ls.adam(.001,.9,.999,En())},Adamax:function(){return Ls.adamax(.002,.9,.999,En(),0)},RMSProp:function(){return Ls.rmsprop(.001,.9,0,En())},SGD:function(){return Ls.sgd(.01)}};if(n.adagrad=n.Adagrad,n.adadelta=n.Adadelta,n.adam=n.Adam,n.adamax=n.Adamax,n.rmsprop=n.RMSProp,n.sgd=n.SGD,t in n)return n[t]();throw new Y("Unknown Optimizer "+t)}var wk=1048576;function xk(t,n,e){if(e===void 0&&(e=!1),t==null||typeof t!="object"||Object.getPrototypeOf(t)!==Object.prototype||!Mw(t))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(e){var r=JSON.stringify(t);r.length>wk&&console.warn('User-defined metadata of model "'+n+'" is too large in size (length='+r.length+" when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= "+wk+".")}}function Mw(t){if(t===null)return!0;if(typeof t=="object"){if(Object.getPrototypeOf(t)===Object.prototype){for(var n=0,e=Object.keys(t);n<e.length;n++){var r=e[n];if(typeof r!="string"||!Mw(t[r]))return!1}return!0}if(Array.isArray(t)){for(var i=0,o=t;i<o.length;i++)if(!Mw(o[i]))return!1;return!0}return!1}var a=typeof t;return a==="string"||a==="number"||a==="boolean"}function SX(t,n,e,r){r===void 0&&(r=console.log);var i,o=CX(t),a=["Layer (type)","Output shape","Param #"];if(o?(n=n||65,e=e||[.45,.85,1]):(n=n||98,e=e||[.33,.55,.67,1]),e[e.length-1]<=1&&(e=e.map(function(f){return Math.floor(n*f)})),!o)for(var s in a.push("Receives inputs"),i=[],t.nodesByDepth)i.push.apply(i,t.nodesByDepth[s]);r("_".repeat(n)),Rv(a,e,r),r("=".repeat(n));for(var u=t.layers,l=0;l<u.length;++l)o?RX(u[l],e,r):TX(u[l],e,i,r),r((l===u.length-1?"=":"_").repeat(n));t.checkTrainableWeightsConsistency();var c=EX(t),d=wv(t.nonTrainableWeights);r("Total params: "+(c+d)),r("Trainable params: "+c),r("Non-trainable params: "+d),r("_".repeat(n))}function EX(t){return t.collectedTrainableWeights!=null?wv(t.collectedTrainableWeights):wv(t.trainableWeights)}function CX(t){var n=!0,e=[],r=[];for(var i in t.nodesByDepth)e.push(t.nodesByDepth[i]);for(var o=0,a=e;o<a.length;o++){var s=a[o];if(s.length>1||s.length===1&&s[0].inboundLayers.length>1){n=!1;break}r.push.apply(r,s)}if(n)for(var u=0,l=t.layers;u<l.length;u++){for(var c=!1,d=0,f=l[u].inboundNodes;d<f.length;d++){var p=f[d];if(r.indexOf(p)!==-1){if(c){n=!1;break}c=!0}}if(!n)break}return n}function Rv(t,n,e){e===void 0&&(e=console.log);for(var r="",i=0;i<t.length;++i)i>0&&(r=r.slice(0,r.length-1)+" "),r=(r+=t[i]).slice(0,n[i]),r+=" ".repeat(n[i]-r.length);e(r)}function RX(t,n,e){var r;try{r=JSON.stringify(t.outputShape)}catch{r="multiple"}Rv([t.name+" ("+t.getClassName()+")",r,t.countParams().toString()],n,e)}function TX(t,n,e,r){var i;try{i=JSON.stringify(t.outputShape)}catch{i="multiple"}for(var o=[],a=0,s=t.inboundNodes;a<s.length;a++){var u=s[a];if(!(e!=null&&e.length>0&&e.indexOf(u)===-1))for(var l=0;l<u.inboundLayers.length;++l){var c=u.inboundLayers[l].name,d=u.nodeIndices[l],f=u.tensorIndices[l];o.push(c+"["+d+"]["+f+"]")}}var p=t.name,h=t.getClassName(),v=o.length===0?"":o[0];for(Rv([p+" ("+h+")",i,t.countParams().toString(),v],n,r),l=1;l<o.length;++l)Rv(["","","",o[l]],n,r)}function _3(t,n,e){return(t==="inboundNodes"||t==="outputLayers"||t==="inputLayers")&&n===0&&typeof e=="string"}function Vf(t,n){if(t===null)return null;if(typeof t=="string")return Bs(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){for(var e=[],r=t.length,i=0;i<r;++i){var o=t[i];_3(n,i,o)?e.push(o):e.push(Vf(o,n))}return e}for(var a={},s=0,u=Object.keys(t);s<u.length;s++){var l=u[s],c=t[l];if(l==="name"&&typeof c=="string")a[l]=c;else{var d=Bs(l);a[d]=Vf(c,d)}}return a}function Pw(t,n){if(t==null)return null;if(typeof t=="string")return zo(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){for(var e=[],r=t.length,i=0;i<r;++i){var o=t[i];_3(n,i,o)?e.push(o):e.push(Pw(o,n))}return e}for(var a={},s=0,u=Object.keys(t);s<u.length;s++){var l=u[s],c=t[l],d=zo(l);a[d]=l!=="name"&&l!=="className"||typeof c!="string"?Pw(c,l):c}return a}var ly="1.3.1";function NX(t,n){if(t.dtype==null||t.dtype===n.dtype)return n;try{return Sg(n,t.dtype)}catch{throw new Y("The dtype of the feed ("+n.dtype+") can not be cast to the dtype of the key '"+t.name+"' ("+t.dtype+").")}}var bl=function(){function t(n){if(this.id2Value={},this.id2Mask={},this.name2Id={},n instanceof t)for(var e in n.id2Value)this.id2Value[e]=n.id2Value[e],e in n.id2Mask&&(this.id2Mask[e]=n.id2Mask[e]);else{if(n==null)return;for(var r=0,i=n;r<i.length;r++){var o=i[r];this.add(o.key,o.value)}}}return t.prototype.add=function(n,e,r){if(this.id2Value[n.id]!=null)throw new Y("Duplicate key: name="+n.name+", id="+n.id);return this.id2Value[n.id]=NX(n,e),this.name2Id[n.name]=n.id,r!=null&&(this.id2Mask[n.id]=r),this},t.prototype.addFeed=function(n){this.add(n.key,n.value)},t.prototype.hasKey=function(n){return this.id2Value[n.id]!=null},t.prototype.names=function(){return Object.keys(this.name2Id)},t.prototype.getValue=function(n){if(n instanceof Pi){if(this.id2Value[n.id]==null)throw new Y("Nonexistent key: "+n.name);return this.id2Value[n.id]}var e=this.name2Id[n];if(e==null)throw new Y("Feed dict has no SymbolicTensor name: "+n);return this.id2Value[e]},t.prototype.getMask=function(n){if(n instanceof Pi){if(this.id2Value[n.id]==null)throw new Y("Nonexistent key: "+n.name);return this.id2Mask[n.id]}var e=this.name2Id[n];if(e==null)throw new Y("Feed dict has no SymbolicTensor name: "+n);return this.id2Mask[e]},t.prototype.disposeMasks=function(){this.id2Mask!=null&&nt(this.id2Mask)},t}(),h1={},Sk={};function Ld(t,n,e,r){for(var i=e!=null&&e.training,o=Array.isArray(t),a=o?t:[t],s=a.map(function(W){return W.name}),u=[],l=n.names(),c=0,d=s;c<d.length;c++){var f=d[c];l.indexOf(f)!==-1?u.push(n.getValue(f)):u.push(null)}r!=null&&(r.maxNumTensors=-1/0,r.minNumTensors=1/0);var p,h,v=s.join(",")+"|"+n.names().join(",");if(h1[v]==null){var g=kX(a,n);p=g.sorted,h=g.recipientCounts,h1[v]=p,Sk[v]=h}p=h1[v],h={},i||Object.assign(h,Sk[v]);for(var m=new bl(n),y=0;y<p.length;++y){if(r!=null){var b=dv().numTensors;b>r.maxNumTensors&&(r.maxNumTensors=b),b<r.minNumTensors&&(r.minNumTensors=b)}var w=p[y],x=w.sourceLayer;if(!(x instanceof Sp)){for(var C=[],E=[],S=[],N=!1,k=0,M=w.inputs;k<M.length;k++){var D=M[k],R=m.getValue(D),O=m.getMask(D);C.push(R),E.push(O),O!=null&&(N=!0),i||(h[D.name]--,h[D.name]!==0||n.hasKey(D)||s.indexOf(D.name)!==-1||R.isDisposed||D.sourceLayer.stateful===!0||S.push(R))}N&&((e=e||{}).mask=E[0]);var P=Ft(x.apply(C,e)),A=null;x.supportsMasking&&(A=x.computeMask(C,E));for(var I=_X(w),_=Array.isArray(I)?I:[I],F=0;F<_.length;++F){m.hasKey(_[F])||m.add(_[F],P[F],Array.isArray(A)?A[0]:A);var L=s.indexOf(_[F].name);L!==-1&&(u[L]=P[F])}i||nt(S)}}return m.disposeMasks(),o?u:u[0]}function kX(t,n){Fe.assert(t!=null&&t.length>0,function(){return"Expected at least one fetch, got none"});var e=[],r={};if(t.length===1){var i=Ek(t[0],n);e=i.sorted,r=i.recipientMap}else for(var o=new Set,a=0,s=t;a<s.length;a++){for(var u=Ek(s[a],n),l=u.sorted,c=u.recipientMap,d=0,f=l;d<f.length;d++){var p=f[d];o.has(p.name)||(e.push(p),o.add(p.name))}var h=function(g){r[g]==null&&(r[g]=new Set),c[g].forEach(function(m){return r[g].add(m)})};for(var v in c)h(v)}return{sorted:e,recipientCounts:IX(r)}}function IX(t){var n={};for(var e in t)n[e]=t[e].size;return n}function Ek(t,n){for(var e=new Set,r=[],i={},o=0,a=n.names();o<a.length;o++){var s=a[o];e.add(s)}var u=[],l=[];for(u.push(t);u.length>0;){var c=u[u.length-1];if(e.has(c.name))u.pop();else{var d=l[l.length-1]===u.length-1;if(c.inputs.length===0||d)u.pop(),r.push(c),e.add(c.name),d&&l.pop();else{l.push(u.length-1);for(var f=0,p=c.inputs;f<p.length;f++){var h=p[f];i[h.name]==null&&(i[h.name]=new Set),i[h.name].add(c.name),e.has(h.name)||u.push(h)}}}}return{sorted:r,recipientMap:i}}function _X(t){var n;if(t.sourceLayer.inboundNodes.length===1)n=t.sourceLayer.output;else{for(var e=null,r=0;r<t.sourceLayer.inboundNodes.length;++r)for(var i=0,o=t.sourceLayer.inboundNodes[r].outputTensors;i<o.length;i++)if(o[i].id===t.id){e=r;break}n=t.sourceLayer.getOutputAt(e)}return n}var AX=function(t){function n(e){var r=t.call(this,{})||this;if(r.containerNodes=new Set,r.name=e.name,r.name==null){var i=r.getClassName().toLowerCase();r.name=oy(i)}if(r.supportsMasking=!1,r.trainable_=!0,Array.isArray(e.inputs)?r.inputs=e.inputs.slice():r.inputs=[e.inputs],Array.isArray(e.outputs)?r.outputs=e.outputs.slice():r.outputs=[e.outputs],es(r.inputs).length!==r.inputs.length)throw new Y("The list of inputs passed to the model is redundant. All inputs should only appear once. Found: "+r.inputs.map(function(Le){return Le.name}));es(r.outputs).length!==r.outputs.length&&console.warn("The list of outputs passed to the model is redundant. All outputs should only appear once. Found: "+r.outputs.map(function(Le){return Le.name})),r.inputLayers=[],r.inputLayersNodeIndices=[],r.inputLayersTensorIndices=[],r.outputLayers=[],r.outputLayersNodeIndices=[],r.outputLayersTensorIndices=[],r.layers=[],r.internalContainerRefs=[];for(var o=0,a=r.outputs;o<a.length;o++){var s=(k=a[o]).sourceLayer,u=k.nodeIndex,l=k.tensorIndex;r.outputLayers.push(s),r.outputLayersNodeIndices.push(u),r.outputLayersTensorIndices.push(l)}for(var c=0,d=r.inputs;c<d.length;c++)s=(k=d[c]).sourceLayer,u=k.nodeIndex,l=k.tensorIndex,oo(u===0,"input layer has >1 nodes"),oo(l===0,"input layer has >1 tensors"),r.inputLayers.push(s),r.inputLayersNodeIndices.push(u),r.inputLayersTensorIndices.push(l);r.inputNames=[],r.outputNames=[],r.feedInputShapes=[],r.feedInputNames=[],r.feedOutputNames=[];for(var f=0;f<r.inputLayers.length;f++){if(!((s=r.inputLayers[f])instanceof Sp))throw new TypeError("Input layers to a LayersModel must be InputLayer objects. Received inputs: "+e.inputs+". Input "+f+" (0-based) originates from layer type "+s.getClassName()+".");r.inputNames.push(s.name),r.feedInputShapes.push(s.batchInputShape),r.feedInputNames.push(s.name)}for(var p=0,h=r.outputLayers;p<h.length;p++)s=h[p],r.outputNames.push(s.name);r.internalInputShapes=r.inputs.map(function(Le){return Le.shape}),r.internalOutputShapes=r.outputs.map(function(Le){return Le.shape});for(var v={},g={},m={},y={},b={},w=[],x=function(Le,Xe,Pe,ze,Ze,qe){ze!=null&&Ze!=null&&qe!=null||(ze=Le.sourceLayer,Ze=Le.nodeIndex,qe=Le.tensorIndex);var St=ze.inboundNodes[Ze];if(Pe.indexOf(St)!==-1)throw new uo("The tensor "+Le.name+' at layer "'+ze.name+'" is part of a cycle.');if(Xe.indexOf(St)===-1){r.containerNodes.add(n.nodeKey(ze,Ze)),ze.id in b||(b[ze.id]=Object.keys(b).length),Pe.indexOf(St)===-1&&Pe.push(St);for(var Io=St.inboundLayers.length,ui=0;ui<Io;ui++){var ju=St.inputTensors[ui],Gc=St.inboundLayers[ui],qc=St.nodeIndices[ui],Q=St.tensorIndices[ui];x(ju,Xe,Pe,Gc,qc,Q)}for(Xe.push(St);Pe.indexOf(St)>=0;)Pe.splice(Pe.indexOf(St),1);w.push(St)}},C=[],E=[],S=0,N=r.outputs;S<N.length;S++){var k=N[S];x(k,C,E)}for(var M=0,D=w.slice().reverse();M<D.length;M++){g[(Z=D[M]).id]=Z,Z.id in v||(v[Z.id]=0);var R=v[Z.id],O=m[Z.outboundLayer.id]==null?0:m[Z.outboundLayer.id];for(R=Math.max(R,O),m[Z.outboundLayer.id]=R,y[Z.outboundLayer.id]=Z.outboundLayer,v[Z.id]=R,f=0;f<Z.inboundLayers.length;f++){var P=Z.inboundLayers[f],A=(u=Z.nodeIndices[f],P.inboundNodes[u]),I=v[A.id]==null?0:v[A.id];v[A.id]=Math.max(R+1,I),g[A.id]=A}}var _={};for(var F in v)(R=v[F])in _||(_[R]=[]),_[R].push(g[F]);var L={};for(var W in m)(R=m[W])in L||(L[R]=[]),L[R].push(y[W]);var B=Object.keys(L).map(function(Le){return parseInt(Le,10)}).sort(Eh);r.layers=[];for(var q=0,G=B;q<G.length;q++){var re=L[R=G[q]];re.sort(function(Le,Xe){var Pe=b[Le.id],ze=b[Xe.id];return Pe<ze?-1:Pe>ze?1:0});for(var j=0,ae=re;j<ae.length;j++)(s=ae[j])instanceof n&&r.internalContainerRefs.push(s),r.layers.push(s)}r.layersByDepth=L,B=Object.keys(_).map(function(Le){return parseInt(Le,10)}).sort(Eh);for(var te=r.inputs.slice(),le=[],Ee=0,se=B;Ee<se.length;Ee++)for(var be=0,fe=_[R=se[Ee]];be<fe.length;be++){var Z;if((s=(Z=fe[be]).outboundLayer)!=null){for(var ge=0,we=Z.inputTensors;ge<we.length;ge++)if(k=we[ge],te.indexOf(k)===-1)throw new uo("Graph disconnected: cannot obtain value for tensor "+k+' at layer "'+s.name+'". The following previous layers were accessed without issue: '+le);for(var de=0,On=Z.outputTensors;de<On.length;de++)k=On[de],te.push(k);le.push(s.name)}}r.nodesByDepth=_;for(var fn=r.layers.map(function(Le){return Le.name}),pn=function(Le){var Xe=fn.filter(function(Pe){return Pe===Le}).length;if(Xe!==1)throw new uo('The name "'+Le+'" is used '+Xe+" times in the model. All layer names should be unique. Layer names: "+JSON.stringify(fn))},De=0,lt=fn;De<lt.length;De++)pn(lt[De]);return r.outboundNodes=[],r.inboundNodes=[],new ay({outboundLayer:r,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:r.inputs,outputTensors:r.outputs,inputMasks:r.inputs.map(function(Le){return null}),outputMasks:r.outputs.map(function(Le){return null}),inputShapes:r.inputs.map(function(Le){return Le.shape}),outputShapes:r.outputs.map(function(Le){return Le.shape})}),r.built=!0,r._refCount=1,r}return ue(n,t),n.prototype.assertNotDisposed=function(){if(this._refCount===0)throw new Error("Container '"+this.name+"' is already disposed.")},n.prototype.dispose=function(){this.assertNotDisposed();var e={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount==0){for(var r=0,i=this.layers;r<i.length;r++){var o=i[r];e.numDisposedVariables+=o.dispose().numDisposedVariables}for(var a=0,s=this.internalContainerRefs;a<s.length;a++){var u=s[a];e.numDisposedVariables+=u.dispose().numDisposedVariables}}return e.refCountAfterDispose=this._refCount,e},Object.defineProperty(n.prototype,"trainable",{get:function(){return this.trainable_},set:function(e){this.layers.forEach(function(r){r._trainableWeights.forEach(function(i){return i.trainable=e})}),this.trainable_=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"trainableWeights",{get:function(){if(this._trainableWeights.length>0)throw new Y("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];for(var e=[],r=0,i=this.layers;r<i.length;r++){var o=i[r];e=e.concat(o.trainableWeights)}return e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"nonTrainableWeights",{get:function(){for(var e=[],r=0,i=this.layers;r<i.length;r++){var o=i[r];e.push.apply(e,o.nonTrainableWeights)}if(!this.trainable){for(var a=[],s=0,u=this.layers;s<u.length;s++)o=u[s],a.push.apply(a,o.trainableWeights);return a.concat(e)}return e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"weights",{get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)},enumerable:!0,configurable:!0}),n.prototype.loadWeights=function(e,r){r===void 0&&(r=!0);for(var i={},o=0,a=0,s=this.layers;a<s.length;a++)for(var u=0,l=s[a].weights;u<l.length;u++){var c=l[u];if(i[c.originalName]!=null)throw new Y("Duplicate weight name: "+c.originalName);i[c.originalName]=c,o++}var d=[];for(var f in e){if(i[f]!=null)d.push([i[f],e[f]]);else if(r)throw new Y("Provided weight data has no target variable: "+f);delete i[f]}if(r){var p=[];for(var h in i)p.push(h);if(p.length>0)throw new Y(p.length+" of "+o+" weights are not set: "+p)}PC(d)},n.prototype.updatedConfig=function(){var e=this.getConfig(),r={};return r.className=this.getClassName(),r.config=e,r.kerasVersion="tfjs-layers "+ly,r.backend="TensorFlow.js",r},n.prototype.toJSON=function(e,r){r===void 0&&(r=!0);var i=Pw(this.updatedConfig());return r?JSON.stringify(i):i},n.prototype.call=function(e,r){var i=this;return ee(function(){e=Ft(e);for(var o=new bl,a=0;a<i.inputs.length;++a)o.add(i.inputs[a],e[a]);return Ld(i.outputs,o,r)})},n.prototype.computeMask=function(e,r){var i=this;return ee(function(){var o;return e=Ft(e),o=r==null?pu(null,e.length):Ft(r),i.runInternalGraph(e,o)[1]})},n.prototype.computeOutputShape=function(e){var r=bv(e);if(r.length!==this.inputLayers.length)throw new Y("Invalid inputShape argument "+e+": model has "+this.inputLayers.length+" tensor inputs.");for(var i={},o=0;o<r.length;o++){var a=this.inputLayers[o],s=r[o];i[N=a.name+"_0_0"]=s}var u=Object.keys(this.nodesByDepth).map(function(M){return parseInt(M,10)}).sort(Eh);if(u.length>1)for(var l=0,c=u;l<c.length;l++)for(var d=c[l],f=0,p=this.nodesByDepth[d];f<p.length;f++){var h=p[f];if(a=h.outboundLayer,this.inputLayers.map(function(M){return M.id}).indexOf(a.id)===-1){for(var v=[],g=0;g<h.inboundLayers.length;g++){var m=h.inboundLayers[g],y=h.nodeIndices[g],b=h.tensorIndices[g],w=i[N=m.name+"_"+y+"_"+b];v.push(w)}var x=bv(a.computeOutputShape(mr(v))),C=a.inboundNodes.indexOf(h);for(g=0;g<x.length;g++)i[N=a.name+"_"+C+"_"+g]=x[g]}}var E=[],S=[];for(o=0;o<this.outputLayers.length;o++){a=this.outputLayers[o],C=this.outputLayersNodeIndices[o],b=this.outputLayersTensorIndices[o];var N=a.name+"_"+C+"_"+b;S.push(N)}for(o=0;o<S.length;o++){var k=S[o];oo(k in i),E.push(i[k])}return mr(E)},n.prototype.runInternalGraph=function(e,r){r==null&&(r=pu(null,e.length));for(var i={},o=0;o<this.inputs.length;++o){var a=this.inputs[o],s=e[o],u=r[o];i[a.id]=[s,u]}for(var l=0,c=Object.keys(this.nodesByDepth).map(function(L){return parseInt(L,10)}).sort(Eh);l<c.length;l++)for(var d=c[l],f=0,p=this.nodesByDepth[d];f<p.length;f++){for(var h=p[f],v=h.outboundLayer,g=h.inputTensors,m=h.outputTensors,y=new Array,b=0,w=g;b<w.length;b++)(a=w[b]).id in i&&y.push(i[a.id]);if(y.length===g.length){var x={},C=void 0,E=void 0,S=void 0,N=void 0;if(h.callArgs!=null&&(x=h.callArgs),y.length===1){var k=y[0],M=k[0],D=k[1];x.mask==null&&(x.mask=D),S=Ft(v.call(M,x)),N=Ft(v.computeMask(M,D)),C=[M],E=[D]}else C=y.map(function(L){return L[0]}),E=y.map(function(L){return L[1]}),x.mask==null&&(x.mask=E),S=Ft(v.call(C,x)),N=Ft(v.computeMask(C,E));if(v.activityRegularizer)throw new Je("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(o=0;o<m.length;++o)a=m[o],s=S[o],u=N[o],i[a.id]=[s,u]}}for(var R=[],O=[],P=[],A=0,I=this.outputs;A<I.length;A++){oo((a=I[A]).id in i,"Could not compute output "+a.name+" : "+a.id);var _=i[a.id],F=_[0];u=_[1],P.push(F.shape),R.push(F),O.push(u)}return[R,O,P]},n.prototype.buildNodeConversionMap=function(e){for(var r,i={},o=0,a=this.layers;o<a.length;o++){var s=a[o];r=s instanceof n?1:0;for(var u=0;u<s.inboundNodes.length;u++){var l=n.nodeKey(s,u);this.containerNodes.has(l)&&(i[l]=r,r+=1)}}return i},n.prototype.getLayer=function(e,r){if(r!=null){if(this.layers.length<=r)throw new Y("Was asked to retrieve layer at index "+r+", but model only has "+this.layers.length+" layer(s).");return this.layers[r]}if(e==null)throw new Y("Provide either a layer name or layer index");for(var i=0,o=this.layers;i<o.length;i++){var a=o[i];if(a.name===e)return a}throw new Y("No such layer: "+e)},n.prototype.calculateLosses=function(){var e=this;return ee(function(){for(var r=[],i=0,o=e.layers;i<o.length;i++)for(var a=o[i],s=0;s<a.inboundNodes.length;++s){var u=n.nodeKey(a,s);e.containerNodes.has(u)&&r.push.apply(r,a.calculateLosses())}return r})},n.prototype.getConfig=function(){for(var e={name:this.name},r=this.buildNodeConversionMap(this.layers),i=[],o=0,a=this.layers;o<a.length;o++){for(var s=(x=a[o]).getClassName(),u=x.getConfig(),l=[],c=0;c<x.inboundNodes.length;c++){var d=x.inboundNodes[c],f=n.nodeKey(x,c),p={};if(this.containerNodes.has(f)){if(d.callArgs)try{JSON.stringify(d.callArgs),p=d.callArgs}catch{console.warn("Layer "+x.name+" was passed non-serializable keyword arguments: "+d.callArgs+". They will not be included in the serialized model (and thus will be missing at deserialization time)."),p={}}if(d.inboundLayers.length>0){for(var h=[],v=0;v<d.inboundLayers.length;v++){var g=d.inboundLayers[v],m=d.nodeIndices[v],y=d.tensorIndices[v];(E=r[n.nodeKey(g,m)])==null&&(E=0),h.push([g.name,E,y,p])}l.push(h)}}}var b={};b.name=x.name,b.className=s,b.config=u,b.inboundNodes=l,i.push(b)}e.layers=i;var w=[];for(v=0;v<this.inputLayers.length;v++){var x=this.inputLayers[v];m=this.inputLayersNodeIndices[v],f=n.nodeKey(x,m),this.containerNodes.has(f)&&((E=r[f])!==null&&E!==void 0||(E=0),y=this.inputLayersTensorIndices[v],w.push([x.name,E,y]))}e.inputLayers=w;var C=[];for(v=0;v<this.outputLayers.length;v++)if(x=this.outputLayers[v],m=this.outputLayersNodeIndices[v],f=n.nodeKey(x,m),this.containerNodes.has(f)){var E;(E=r[f])!==null&&E!==void 0||(E=0),y=this.outputLayersTensorIndices[v],C.push([x.name,E,y])}return e.outputLayers=C,e},n.fromConfig=function(e,r,i,o){o===void 0&&(o=!1);var a={},s={};function u(A,I){A.name in s?s[A.name].push(I):s[A.name]=[I]}function l(A,I){for(var _,F=[],L=0,W=I;L<W.length;L++){var B=W[L],q=B[0],G=B[1],re=B[2];if(_=B[3]==null?{}:B[3],!(q in a))return void u(A,I);var j=a[q];if(j.inboundNodes.length<=G)return void u(A,I);var ae=j.inboundNodes[G];F.push(ae.outputTensors[re])}F.length>0&&A.apply(mr(F),_)}function c(A){var I=A.name,_=ji(A,r.customObjects!=null?r.customObjects:{});_.setFastWeightInitDuringBuild(o),a[I]=_,A.inboundNodes.forEach(function(F){if(!(F instanceof Array))throw new Y("Corrupted configuration, expected array for nodeData: "+F);u(_,F)})}for(var d=r.name,f=r.layers,p=0,h=f;p<h.length;p++)c(m=h[p]);for(;!sK(s);)for(var v=0,g=f;v<g.length;v++){var m=g[v];if((P=a[m.name]).name in s){var y=s[P.name];delete s[P.name];for(var b=0,w=y;b<w.length;b++)l(P,w[b])}}for(var x=[],C=[],E=0,S=r.inputLayers;E<S.length;E++){var N=(m=S[E])[0],k=m[1],M=m[2];oo(N in a);var D=(P=a[N]).inboundNodes[k].outputTensors;x.push(D[M])}for(var R=0,O=r.outputLayers;R<O.length;R++){N=(m=O[R])[0],k=m[1],M=m[2],oo(N in a);var P;D=(P=a[N]).inboundNodes[k].outputTensors,C.push(D[M])}return new e({inputs:x,outputs:C,name:d})},Object.defineProperty(n.prototype,"stateful",{get:function(){if(this._stateful)throw new Y("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(var e=0,r=this.layers;e<r.length;e++)if(r[e].stateful)return!0;return!1},enumerable:!0,configurable:!0}),n.prototype.resetStates=function(){var e=this;ee(function(){e.layers.forEach(function(r){r.stateful&&r.resetStates()})})},n}(pt);function OX(t,n,e){var r=n.length;if(t==null||Array.isArray(t)&&t.length===0)return n.map(function(o){return null});if(r===1)return Array.isArray(t)&&t.length===1?t:typeof t=="object"&&n[0]in t?[t[n[0]]]:[t];if(Array.isArray(t)){if(t.length!==r)throw new Error("Provided "+e+" is an array of "+t.length+" element(s), but the model has "+r+" outputs. Make sure a set of weights is provided for each model output.");return t}if(typeof t=="object"&&Object.keys(t).length>0&&typeof t[Object.keys(t)[0]]=="object"){var i=[];return n.forEach(function(o){o in t?i.push(t[o]):i.push(null)}),i}throw new Error("The model has multiple ("+r+") outputs, so "+e+" must be either an array with "+r+" elements or an object with "+n+" keys. Provided "+e+" not understood: "+JSON.stringify(t))}function A3(t,n){return OX(t,n,"classWeight")}function O3(t,n,e,r){return We(this,void 0,void 0,function(){var i,o,a,s,u;return Be(this,function(l){switch(l.label){case 0:if(n!=null||r!=null)throw new Error("Support sampleWeight is not implemented yet");return e==null?[3,2]:(i=ee(function(){if(t.shape.length===1)return t.clone();if(t.shape.length===2){if(t.shape[1]>1)return t.argMax(1);if(t.shape[1]===1)return t.reshape([t.shape[0]]);throw new Error("Encountered unexpected last-dimension size ("+t.shape[1]+") during handling of class weights. The size is expected to be >= 1.")}throw new Error("Unexpected rank of target (y) tensor ("+t.rank+") during handling of class weights. The rank is expected to be 1 or 2.")}),s=(a=Array).from,[4,i.data()]);case 1:return o=s.apply(a,[l.sent()]),nt(i),u=[],o.forEach(function(c){if(e[c]==null)throw new Error("classWeight must contain all classes in the training data. The class "+c+" exists in the data but not in classWeight");u.push(e[c])}),[2,Fr(u,"float32")];case 2:return[2,null]}})})}function DX(t,n){return He(t,n)}var MX=32;function D3(t,n){var e,r,i=n;e=i.xs,r=i.ys,Fe.assert(e!=null&&r!=null,function(){return"A Dataset iterator for fitDataset() is expected to generate objects of the form `{xs: xVal, ys: yVal}`, where the two values may be `tf.Tensor`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates "+n});var o=Ck("input",t.inputNames,e),a=Ck("output",t.outputNames,r),s=o[0].shape[0];Fe.assert(o.length===t.inputs.length,function(){return"LayersModel has "+t.inputs.length+" inputs, but the dataset provides "+o.length+" inputs.  (Expected input keys: "+JSON.stringify(t.inputNames)+")"}),Fe.assert(a.length===t.outputs.length,function(){return"LayersModel has "+t.outputs.length+" outputs, but the dataset provides "+a.length+" outputs.  (Expected output keys: "+JSON.stringify(t.outputNames)+")"});var u=function(f){Fe.assert(o[f].shape[0]===s,function(){return"Batch size mismatch: input "+t.inputNames[f]+" has "+o[f].shape[0]+"; expected  "+s+" based on input "+t.inputNames[0]+"."})};for(var l in o)u(l);var c=function(f){Fe.assert(a[f].shape[0]===s,function(){return"Batch size mismatch: output "+t.outputNames[f]+" has "+a[f].shape[0]+"; expected  "+s+" based on input "+t.inputNames[0]+"."})};for(var d in a)c(d);return{xs:o,ys:a}}function Ck(t,n,e){if(e instanceof _t)return[e];if(Array.isArray(e))return Fe.assert(e.length===n.length,function(){return"Received an array of "+e.length+" Tensors, but expected "+n.length+" to match the "+t+" keys "+n+"."}),e;for(var r=[],i=0,o=n;i<o.length;i++){var a=o[i];if(e[a]==null)throw new Y("The feature data generated by the dataset lacks the required "+t+" key '"+a+"'.");r.push(e[a])}return r}function PX(t){if(t.length===3)throw new Je("Validation with sample weights is not implemented yet.");return{xs:t[0],ys:t[1]}}function LX(t,n,e){return We(this,void 0,void 0,function(){var r,i,o,a,s,u,l,c,d,f,p,h,v,g,m,y,b,w,x,C,E,S,N,k,M,D,R,O,P,A,I,_,F,L;return Be(this,function(W){switch(W.label){case 0:if(r=e.batchesPerEpoch!=null,Fe.assert(t.optimizer!=null,function(){return"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."}),Fe.assert(e!=null,function(){return"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."}),Fe.assert(e.epochs!=null&&e.epochs>0&&Number.isInteger(e.epochs),function(){return"For fitDataset(), config.epochs is expected to be a positive integer, but got "+e.epochs}),Fe.assert(!r||e.batchesPerEpoch>0&&Number.isInteger(e.batchesPerEpoch),function(){return"For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got "+e.batchesPerEpoch}),Fe.assert(e.validationSplit==null,function(){return"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."}),t.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");t.isTraining=!0,W.label=1;case 1:return W.trys.push([1,,26,27]),i=e.validationData!=null,o=void 0,a=void 0,i&&(Rk(e.validationData)?Fe.assert(e.validationBatches==null||e.validationBatches>0&&Number.isInteger(e.validationBatches),function(){return"For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got "+e.validationBatches}):(s=PX(e.validationData),o=s.xs,a=s.ys)),u=t.makeTrainFunction(),l=t.getDedupedMetricsNames(),c=void 0,c=i?l.slice().concat(l.map(function(B){return"val_"+B})):l.slice(),d=S3(e.callbacks,e.yieldEvery),f=e.verbose==null?1:e.verbose,p=C3(d,f,e.epochs,null,null,FX(n,e),null,i,c),h=p.callbackList,v=p.history,h.setModel(t),t.history=v,[4,h.onTrainBegin()];case 2:return W.sent(),t.stopTraining_=!1,g=e.initialEpoch==null?0:e.initialEpoch,[4,n.iterator()];case 3:m=W.sent(),W.label=4;case 4:return g<e.epochs?(y={},[4,h.onEpochBegin(g)]):[3,23];case 5:return W.sent(),b=0,w=0,r?[3,7]:[4,n.iterator()];case 6:m=W.sent(),W.label=7;case 7:return!r||b<e.batchesPerEpoch?[4,m.next()]:[3,21];case 8:return x=W.sent(),r&&x.done?(console.warn("You provided `batchesPerEpoch` as "+e.batchesPerEpoch+", but your dataset iterator ran out of data after "+b+" batches; interrupting training. Make sure that your dataset can generate at least `batchesPerEpoch * epochs` batches (in this case, "+e.batchesPerEpoch*e.epochs+" batches). You may need to use the repeat() function when building your dataset."),[3,21]):x.value==null?[3,15]:(C=D3(t,x.value),E=C.xs,S=C.ys,(N={}).batch=w,N.size=E[0].shape[0],[4,h.onBatchBegin(w,N)]);case 9:if(W.sent(),k=[],e.classWeight==null)return[3,13];M=A3(e.classWeight,t.outputNames),L=0,W.label=10;case 10:return L<M.length?(R=(D=k).push,[4,O3(S[L],null,M[L])]):[3,13];case 11:R.apply(D,[W.sent()]),W.label=12;case 12:return++L,[3,10];case 13:for(O=E.concat(S).concat(k),P=u(O),nt(O),L=0;L<l.length;++L)A=l[L],I=P[L],N[A]=I,bo(I);return[4,h.onBatchEnd(w,N)];case 14:W.sent(),y3(N),w++,b++,W.label=15;case 15:return(r?b>=e.batchesPerEpoch:x.done)?i?(_=void 0,Rk(e.validationData)?(F=Ft,[4,t.evaluateDataset(e.validationData,{batches:e.validationBatches})]):[3,17]):[3,19]:[3,20];case 16:return _=F.apply(void 0,[W.sent()]),[3,18];case 17:_=Ft(t.evaluate(o,a,{batchSize:e.validationBatchSize==null?MX:e.validationBatchSize,verbose:0})),W.label=18;case 18:for(L=0;L<t.metricsNames.length;++L)y["val_"+t.metricsNames[L]]=_[L];W.label=19;case 19:return[3,21];case 20:return t.stopTraining_?[3,21]:[3,7];case 21:return[4,h.onEpochEnd(g,y)];case 22:return W.sent(),g++,t.stopTraining_?[3,23]:[3,4];case 23:return[4,h.onTrainEnd()];case 24:return W.sent(),[4,t.history.syncData()];case 25:return W.sent(),[2,t.history];case 26:return t.isTraining=!1,[7];case 27:return[2]}})})}function FX(t,n){var e=null;return n.batchesPerEpoch!=null?e=n.batchesPerEpoch:Number.isFinite(t.size)&&(e=t.size),e}function Rk(t){return typeof t.iterator=="function"}function zX(t){return typeof t.next=="function"}function BX(t,n,e){return We(this,void 0,void 0,function(){var r,i,o,a,s,u,l,c,d,f;return Be(this,function(p){switch(p.label){case 0:if(r=(e=e||{}).batches!=null,i=t.testFunction,o=[],e.verbose>0)throw new Je("Verbose mode is not implemented yet.");return Fe.assert(!r||e.batches>0&&Number.isInteger(e.batches),function(){return"Test loop expects `batches` to be a positive integer, but received "+JSON.stringify(e.batches)}),zX(n)?(s=n,[3,3]):[3,1];case 1:return[4,n.iterator()];case 2:s=p.sent(),p.label=3;case 3:a=s,u=0,l=0,c=function(){var h;return Be(this,function(v){switch(v.label){case 0:return[4,a.next()];case 1:return h=v.sent(),o=ee(function(){if(h.value){var g=D3(t,h.value),m=g.xs,y=g.ys,b=m.concat(y),w=ee(function(){return i(b)});if(nt(b),l===0)for(var x=0;x<w.length;++x)o.push(ke(0));var C=b[0].shape[0],E=function(S){var N=w[S],k=o[S];o[S]=ee(function(){return at(o[S],He(C,N))}),l>0&&nt(k)};for(x=0;x<w.length;++x)E(x);nt(w),u+=C,++l}return o}),h.done?(r&&console.warn("Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least `batches` batches (in this case, "+e.batches+" batches). You may need to use the repeat() function when building your dataset."),[2,"break"]):[2]}})},p.label=4;case 4:return!r||l<e.batches?[5,c()]:[3,6];case 5:return p.sent()==="break"?[3,6]:[3,4];case 6:for(d=0;d<o.length;++d)f=o[d],o[d]=cr(o[d],u),nt(f);return[2,mr(o)]}})})}function Lw(t){Fe.assert(t>0&&Number.isInteger(t),function(){return"batchSize is required to be a positive integer, but got "+t})}function Fd(t,n,e){return t==null?[null]:Array.isArray(t)?t.map(function(r){return nu(r,n,e-n)}):nu(t,n,e-n)}function jC(t,n){return ee(function(){return t==null?null:Array.isArray(t)?t.map(function(e){return jC(e,n)}):o3(t,n.dtype==="int32"?n:n.toInt())})}function Fw(t,n){for(var e=[],r=0,i=null;r<t;)(i=r+n)>=t&&(i=t),e.push([r,i]),r=i;return e}function jX(t,n,e,r,i,o,a,s,u,l,c,d,f,p,h){return We(this,void 0,void 0,function(){var v,g,m,y,b,w,x,C;return Be(this,function(E){switch(E.label){case 0:if(i==null&&(i=32),o==null&&(o=1),c==null&&(c=!0),f==null&&(f=0),v=!1,u!=null&&l!=null&&(v=!0),h!=null&&(v=!0,p==null))throw new Y("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");return(g=t.checkNumSamples(e,i,p,"steps_per_epoch"))!=null&&(m=Wi(0,g)),a==null&&(a=1),y=C3(s,a,o,f,g,p,i,v,d),b=y.callbackList,w=y.history,b.setModel(t),t.history=w,[4,b.onTrainBegin()];case 1:E.sent(),t.stopTraining_=!1,x=function(S){var N,k,M,D,R;return Be(this,function(O){switch(O.label){case 0:return[4,b.onEpochBegin(S)];case 1:if(O.sent(),N={},p==null)return[3,2];throw new Je("stepsPerEpoch mode is not implemented yet.");case 2:if(c==="batch")throw new Je("batch shuffling is not implemneted yet");c&&Fe.shuffle(m),k=Fr(m),M=Fw(g,i),D=function(P){var A;return Be(this,function(I){switch(I.label){case 0:return A={},[4,b.onBatchBegin(P,A)];case 1:return I.sent(),ee(function(){var _=M[P][0],F=M[P][1],L=nu(k,_,F-_);A.batch=P,A.size=F-_;for(var W=jC(e,L),B=n(W),q=0;q<r.length;++q){var G=r[q],re=B[q];A[G]=re,bo(re)}if(P===M.length-1&&v){var j=t.testLoop(u,l,i);for(q=0;q<r.length;++q)G=r[q],re=j[q],bo(re),N["val_"+G]=re}}),[4,b.onBatchEnd(P,A)];case 2:return I.sent(),y3(A),t.stopTraining_?[2,"break"]:[2]}})},R=0,O.label=3;case 3:return R<M.length?[5,D(R)]:[3,6];case 4:if(O.sent()==="break")return[3,6];O.label=5;case 5:return++R,[3,3];case 6:k.dispose(),O.label=7;case 7:return[4,b.onEpochEnd(S,N)];case 8:return O.sent(),t.stopTraining_?[2,"break"]:[2]}})},C=f,E.label=2;case 2:return C<o?[5,x(C)]:[3,5];case 3:if(E.sent()==="break")return[3,5];E.label=4;case 4:return++C,[3,2];case 5:return[4,b.onTrainEnd()];case 6:return E.sent(),[4,t.history.syncData()];case 7:return E.sent(),[2,t.history]}})})}function VX(t,n,e,r){return r===void 0&&(r={}),We(this,void 0,void 0,function(){var i,o,a,s,u,l,c,d,f,p,h,v,g,m,y,b,w,x,C,E,S,N;return Be(this,function(k){switch(k.label){case 0:if(t.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");t.isTraining=!0,k.label=1;case 1:return k.trys.push([1,,7,8]),Lw(d=r.batchSize==null?32:r.batchSize),f=!1,[4,t.standardizeUserData(n,e,r.sampleWeight,r.classWeight,f,d)];case 2:if(p=k.sent(),i=p[0],o=p[1],c=p[2],h=!1,v=void 0,!(r.validationData!=null&&r.validationData.length>0))return[3,4];if(h=!0,r.validationData.length!==2)throw r.validationData.length===3?new Je("validationData including sample weights is not supported yet."):new Y("When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; "+r.validationData+" is invalid.");return a=r.validationData[0],s=r.validationData[1],g=!0,[4,t.standardizeUserData(a,s,null,null,g,d)];case 3:return m=k.sent(),u=m[0],l=m[1],v=u.concat(l),[3,5];case 4:r.validationSplit!=null&&r.validationSplit>0&&r.validationSplit<1?(h=!0,y=Math.floor(i[0].shape[0]*(1-r.validationSplit)),b=i[0].shape[0],u=Fd(i,y,b),i=Fd(i,0,y),l=Fd(o,y,b),o=Fd(o,0,y),v=u.concat(l)):r.validationSteps!=null&&(h=!0),k.label=5;case 5:return w=i.concat(o).concat(c),t.checkTrainableWeightsConsistency(),x=t.makeTrainFunction(),C=t.getDedupedMetricsNames(),E=void 0,S=void 0,h?(t.makeTestFunction(),E=t.testFunction,S=C.slice().concat(C.map(function(M){return"val_"+M}))):(E=null,v=[],S=C.slice()),N=S3(r.callbacks,r.yieldEvery),[4,jX(t,x,w,C,d,r.epochs,r.verbose,N,E,v,r.shuffle,S,r.initialEpoch,null,null)];case 6:return[2,k.sent()];case 7:return t.isTraining=!1,Ks(i,n),Ks(o,e),Ks(u,a),Ks(l,s),c!=null&&nt(c),[7];case 8:return[2]}})})}function M3(t){var n=[];t instanceof _t&&(t=[t]);for(var e=0;e<t.length;++e){var r=t[e];if(r.rank===1)n.push(wp(r,1));else{if(r.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");n.push(r)}}return n}function Ks(t,n){if(t!=null){var e=[];if(n instanceof _t)e.push(n.id);else if(Array.isArray(n))n.forEach(function(u){return e.push(u.id)});else if(n!=null)for(var r in n){var i=n[r];e.push(i.id)}var o=[];if(t instanceof _t)e.indexOf(t.id)===-1&&o.push(t);else if(Array.isArray(t))t.forEach(function(u){e.indexOf(u.id)===-1&&o.push(u)});else if(t!=null)for(var a in t){var s=t[a];e.indexOf(s.id)===-1&&o.push(s)}o.forEach(function(u){u.isDisposed||u.dispose()})}}function $X(t){return t instanceof _t}function zw(t){return Array.isArray(t)}function Tk(t){return!$X(t)&&!zw(t)}function Nk(t,n,e,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=""),n==null||n.length===0){if(t!=null){var o=!1;if(zw(t)&&t.length>0)o=!0;else if(Tk(t)){for(var a in t)if(t.hasOwnProperty(a)){o=!0;break}}else o=!0;if(o)throw new Y("Error when checking model "+i+" expected no data, but got "+t)}return[]}if(t==null)return n.map(function(g){return null});var s;if(Tk(t)){t=t,s=[];for(var u=0,l=n;u<l.length;u++){var c=l[u];if(t[c]==null)throw new Y('No data provided for "'+c+'". Need data for each key in: '+n);s.push(t[c])}}else if(zw(t)){if((t=t).length!==n.length)throw new Y("Error when checking model "+i+": the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see "+n.length+" Tensor(s), but instead got the following list of Tensor(s): "+t);s=t}else{if(t=t,n.length>1)throw new Y("The model "+i+" expects "+n.length+" Tensor(s), but only received one Tensor. Found: Tensor with shape "+t.shape);s=[t]}if(s=M3(s),e!=null){for(var d=0;d<n.length;++d)if(e[d]!=null){var f=s[d];if(f.shape.length!==e[d].length)throw new Y("Error when checking "+i+": expected "+n[d]+" to have "+e[d].length+" dimension(s). but got array with shape "+f.shape);for(var p=0;p<e[d].length;++p)if(p!==0||r){var h=f.shape[p],v=e[d][p];if(v!=null&&v>=0&&h!==v)throw new Y("Error when checking "+i+": expected "+n[d]+" to have shape ["+e[d]+"], but got array with shape ["+f.shape+"].")}}}return s}function UX(t,n,e){var r=es(t.map(function(o){return o.shape[0]}));r.sort();var i=es(n.map(function(o){return o.shape[0]}));if(i.sort(),r.length>1)throw new Y("All input Tensors (x) should have the same number of samples. Got array shapes: "+JSON.stringify(t.map(function(o){return o.shape})));if(i.length>1)throw new Y("All target Tensors (y) should have the same number of samples. Got array shapes: "+JSON.stringify(n.map(function(o){return o.shape})));if(r.length>0&&i.length>0&&!Fe.arraysEqual(r,i))throw new Y("Input Tensors should have the same number of samples as target Tensors. Found "+r[0]+" input sample(s) and "+i[0]+" target sample(s).")}function WX(t,n,e){for(var r=[Iu,uy,jf],i=0;i<t.length;++i){var o=t[i],a=n[i],s=e[i];if(a!=null){if(a===jf&&o.shape[o.shape.length-1]===1)throw new Y("You are passing a target array of shape "+o.shape+" while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].");if(r.indexOf(a)!==-1)for(var u=o.shape.slice(1),l=s.slice(1),c=0;c<u.length;++c){var d=u[c],f=l[c];if(f!=null&&d!==f)throw new Y("A target Tensor with shape "+o.shape+" was passed for an output of shape "+s+", while using a loss function that expects targets to have the same shape as the output.")}}}}function kk(t,n,e,r,i){var o;if(r===void 0&&(r=!0),i===void 0&&(i=""),Array.isArray(t)){if(t.length!==n.length)throw new Y("Error when checking model "+i+": the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see "+n.length+" Tensor(s), but instead got "+t.length+" Tensors(s).");o=t}else{if(n.length>1)throw new Y("The model expects "+n.length+" "+i+" Tensors, but only received one Tensor. Found: array with shape "+JSON.stringify(t.shape)+".");o=[t]}if(e!=null){for(var a=0;a<n.length;++a)if(e[a]!=null){var s=o[a];if(s.shape.length!==e[a].length)throw new Y("Error when checking "+i+": expected "+n[a]+" to have "+e[a].length+" dimension(s), but got array with shape "+JSON.stringify(s.shape));for(var u=0;u<e[a].length;++u)if(u!==0||r){var l=s.shape[u],c=e[a][u];if(c!=null&&c!==l)throw new Y("Error when checking "+i+": expected "+n[a]+" to have shape "+JSON.stringify(e[a])+" but got array with shape "+JSON.stringify(s.shape)+".")}}}}function HX(t,n){if(t==null||Array.isArray(t)&&t.length===0)return n.map(function(u){return[]});var e;if(typeof t=="string"||typeof t=="function")e=[t];else{if(!Array.isArray(t)&&typeof t!="object")throw new TypeError("Type of metrics argument not understood. Expected an string,function, Array, or Object, found: "+t);e=t}if(Array.isArray(e))return n.map(function(u){return e});for(var r=[],i=0,o=n;i<o.length;i++){var a=o[i],s=e.hasOwnProperty(a)?e[a]:[];Array.isArray(s)||(s=[s]),r.push(s)}return r}var GX="layers-model",ru=function(t){function n(e){var r=t.call(this,e)||this;return r.isTraining=!1,r}return ue(n,t),n.prototype.summary=function(e,r,i){if(i===void 0&&(i=console.log),!this.built)throw new Y("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");SX(this,e,r,i)},n.prototype.compile=function(e){var r=this;if(e.loss==null&&(e.loss=[]),this.loss=e.loss,typeof e.optimizer=="string")this.optimizer_=xX(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof ca))throw new Y("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}var i=[];if(Array.isArray(e.loss)||typeof e.loss=="string"||typeof e.loss=="function")if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new Y("When passing an Array as loss, it should have one entry per model output. The model has "+this.outputs.length+" output(s), but you passed loss="+e.loss+".");var o=e.loss;i=o.map(function(g){return p1(g)})}else{var a=p1(e.loss);this.outputs.forEach(function(g){i.push(a)})}else{for(var s in e.loss=e.loss,e.loss)if(this.outputNames.indexOf(s)===-1)throw new Y('Unknown entry in loss dictionary: "'+s+'". Only expected the following keys: '+this.outputNames);for(var u=0,l=this.outputNames;u<l.length;u++){var c=l[u];e.loss[c]==null&&console.warn('Output "'+c+'" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to '+c+" during training"),i.push(p1(e.loss[c]))}}this.lossFunctions=i,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(var d=0;d<this.outputs.length;++d){var f=this.internalOutputShapes[d],p=this.outputNames[d];this.feedOutputNames.push(p),this.feedOutputShapes.push(f),this.feedLossFns.push(this.lossFunctions[d])}var h=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],tu("loss",function(){for(var g=0;g<r.outputs.length;++g)if(h.indexOf(g)===-1){var m=r.lossFunctions[g];r.outputs.length>1&&(r.metricsTensors.push([m,g]),r.metricsNames.push(r.outputNames[g]+"_loss"))}});var v=HX(e.metrics,this.outputNames);tu("metric",function(){for(var g=function(y){if(h.indexOf(y)!==-1)return"continue";(function(b){for(var w,x,C,E=function(k){if(typeof k=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(k)!==-1){var M=r.internalOutputShapes[y];M[M.length-1]===1||r.lossFunctions[y]===uy?["accuracy","acc"].indexOf(k)!==-1?x=FC:["crossentropy","ce"].indexOf(k)!==-1&&(x=N3):r.lossFunctions[y]===Sv?["accuracy","acc"].indexOf(k)!==-1?x=k3:["crossentropy","ce"].indexOf(k)!==-1&&(x=I3):["accuracy","acc"].indexOf(k)!==-1?x=zC:["crossentropy","ce"].indexOf(k)!==-1&&(x=BC);var D=void 0;["accuracy","acc"].indexOf(k)!==-1?D="acc":["crossentropy","ce"].indexOf(k)!==-1&&(D="ce"),C=x,w=""+D}else{var R=wX(k);C=R,w=""+Th(k)}var O;tu(w,function(){O=C}),function(P,A,I){r.outputNames.length>1&&(A=r.outputNames[P]+"_"+A),r.metricsNames.push(A),r.metricsTensors.push([I,P])}(y,w,O)},S=0,N=b;S<N.length;S++)E(N[S])})(v[y])},m=0;m<r.outputs.length;++m)g(m)}),this.collectedTrainableWeights=this.trainableWeights},n.prototype.checkTrainableWeightsConsistency=function(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")},n.prototype.evaluate=function(e,r,i){i===void 0&&(i={});var o=i.batchSize==null?32:i.batchSize;Lw(o);var a=this.standardizeUserDataXY(e,r,!0,o);try{var s=a[0].concat(a[1]);this.makeTestFunction();var u=this.testFunction;return mr(this.testLoop(u,s,o,i.verbose,i.steps))}finally{Ks(a[0],e),Ks(a[1],r)}},n.prototype.evaluateDataset=function(e,r){return We(this,void 0,void 0,function(){return Be(this,function(i){return this.makeTestFunction(),[2,BX(this,e,r)]})})},n.prototype.checkNumSamples=function(e,r,i,o){var a;if(o===void 0&&(o="steps"),i!=null){if(a=null,r!=null)throw new Y("If "+o+" is set, batchSize must be null or undefined.Got batchSize = "+r)}else{if(e==null)throw new Y("Either the input data should have a defined shape, or "+o+" shoud be specified.");a=Array.isArray(e)?e[0].shape[0]:e.shape[0]}return a},n.prototype.execute=function(e,r){if(Array.isArray(r)&&r.length===0)throw new Y("`outputs` is an empty Array, which is not allowed.");var i=Array.isArray(r),o=i?r:[r],a=this.retrieveSymbolicTensors(o),s=new bl;if(e instanceof _t&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new Y("The number of inputs provided ("+e.length+") does not match the number of inputs of this model ("+this.inputs.length+").");for(var u=0;u<this.inputs.length;++u)s.add(this.inputs[u],e[u])}else for(var l=0,c=this.inputs;l<c.length;l++){var d=c[l],f=e[d.name];if(f==null)throw new Y("No value is provided for the model's input "+d.name);s.add(d,f)}var p=Ld(a,s);return i?p:p[0]},n.prototype.retrieveSymbolicTensors=function(e){for(var r=pu(null,e.length),i=e.length,o=0,a=this.layers;o<a.length;o++){for(var s=a[o],u=Array.isArray(s.output)?s.output:[s.output],l=u.map(function(p){return p.name}),c=0;c<e.length;++c){var d=l.indexOf(e[c]);if(d!==-1&&(r[c]=u[d],i--),i===0)break}if(i===0)break}if(i>0){var f=[];throw r.forEach(function(p,h){p==null&&f.push(e[h])}),new Y("Cannot find SymbolicTensors for output name(s): "+JSON.stringify(f))}return r},n.prototype.predictLoop=function(e,r,i){var o=this;return r===void 0&&(r=32),i===void 0&&(i=!1),ee(function(){var a=o.checkNumSamples(e);if(i)throw new Je("Verbose predictLoop() is not implemented yet.");for(var s=Fw(a,r),u=o.outputs.map(function(d){return[]}),l=function(d){ee(function(){var f=s[d][0],p=s[d][1],h=Fd(e,f,p),v=[];if(Array.isArray(h))for(var g=0;g<h.length;++g)v.push({key:o.inputs[g],value:h[g]});else v.push({key:o.inputs[0],value:h});var m=new bl(v);return Ld(o.outputs,m)}).forEach(function(f,p){return u[p].push(f)})},c=0;c<s.length;++c)l(c);return mr(u.map(function(d){return lr(d,0)}))})},n.prototype.predict=function(e,r){r===void 0&&(r={});var i=M3(e);kk(i,this.inputNames,this.feedInputShapes,!1);try{var o=r.batchSize==null?32:r.batchSize;return Lw(o),this.predictLoop(i,o)}finally{Ks(i,e)}},n.prototype.predictOnBatch=function(e){kk(e,this.inputNames,this.feedInputShapes,!0);var r=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,r)},n.prototype.standardizeUserDataXY=function(e,r,i,o){if(this.optimizer_==null)throw new uo("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");for(var a=[],s=0;s<this.feedOutputShapes.length;++s){var u=this.feedOutputShapes[s];this.feedLossFns[s]===Sv?a.push(u.slice(0,u.length-1).concat([1])):a.push(u)}if(UX(e=Nk(e,this.feedInputNames,this.feedInputShapes,!1,"input"),r=Nk(r,this.feedOutputNames,a,!1,"target")),WX(r,this.feedLossFns,this.feedOutputShapes),this.stateful&&o!=null&&o>0&&e[0].shape[0]%o!=0)throw new Y("In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size "+o+". Found: "+e[0].shape[0]+" sample(s).");return[e,r]},n.prototype.standardizeUserData=function(e,r,i,o,a,s){return a===void 0&&(a=!0),We(this,void 0,void 0,function(){var u,l,c,d,f,p,h,v;return Be(this,function(g){switch(g.label){case 0:if(u=this.standardizeUserDataXY(e,r,a,s),l=u[0],c=u[1],i!=null)throw new Error("sample weight is not supported yet.");if(d=null,o==null)return[3,4];f=A3(o,this.outputNames),d=[],p=0,g.label=1;case 1:return p<f.length?(v=(h=d).push,[4,O3(c[p],null,f[p])]):[3,4];case 2:v.apply(h,[g.sent()]),g.label=3;case 3:return++p,[3,1];case 4:return[2,[l,c,d]]}})})},n.prototype.testLoop=function(e,r,i,o,a){var s=this;return o===void 0&&(o=0),ee(function(){var u=s.checkNumSamples(r,i,a,"steps"),l=[];if(o>0)throw new Je("Verbose mode is not implemented yet.");if(a!=null)throw new Je("steps mode in testLoop() is not implemented yet");for(var c=Fw(u,i),d=Fr(Wi(0,u)),f=0;f<c.length;++f){var p=c[f][0],h=c[f][1],v=nu(d,p,h-p),g=jC(r,v),m=e(g);if(f===0)for(var y=0;y<m.length;++y)l.push(ke(0));for(y=0;y<m.length;++y){var b=m[y];l[y]=at(l[y],He(h-p,b))}}for(y=0;y<l.length;++y)l[y]=cr(l[y],u);return l})},n.prototype.getDedupedMetricsNames=function(){for(var e=this.metricsNames,r=[],i=0;i<e.length;++i){var o=e[i],a=o;dk(e,o)>1&&(a+="_"+dk(e.slice(0,i),o)),r.push(a)}return r},n.prototype.makeTrainFunction=function(){var e=this;return function(r){var i=[],o=r.slice(0,e.inputs.length),a=r.slice(e.inputs.length,e.inputs.length+e.outputs.length),s=r.slice(e.inputs.length+e.outputs.length,e.inputs.length+2*e.outputs.length),u=[],l=e.collectedTrainableWeights.map(function(c){return c.read()});return[e.optimizer_.minimize(function(){for(var c=[],d=0;d<e.inputs.length;++d)c.push({key:e.inputs[d],value:o[d]});var f,p=new bl(c),h=Ld(e.outputs,p,{training:!0});for(d=0;d<e.lossFunctions.length;++d){var v=(0,e.lossFunctions[d])(a[d],h[d]);s[d]!=null&&(v=DX(v,s[d]));var g=gn(v);i.push(g),f=d===0?v:at(f,v)}for(d=0;d<e.metricsTensors.length;++d){var m=void 0;if(e.outputs.length>1&&d<e.outputs.length)m=i[d];else{var y=e.metricsTensors[d][0],b=e.metricsTensors[d][1];m=gn(y(a[b],h[b]))}bo(m),u.push(m)}return f=gn(f),e.calculateLosses().forEach(function(w){f=at(f,w)}),f},!0,l)].concat(u)}},n.prototype.makeTestFunction=function(){var e=this;this.testFunction=function(r){return ee(function(){for(var i,o=[],a=r.slice(0,e.inputs.length),s=r.slice(e.inputs.length,e.inputs.length+e.outputs.length),u=[],l=0;l<e.inputs.length;++l)u.push({key:e.inputs[l],value:a[l]});var c=new bl(u),d=Ld(e.outputs,c);for(l=0;l<e.lossFunctions.length;++l){var f=e.lossFunctions[l],p=gn(f(s[l],d[l]));i=l===0?p:at(i,p),o.push(i)}for(l=0;l<e.metricsTensors.length;++l){var h=e.metricsTensors[l][0],v=e.metricsTensors[l][1],g=gn(h(s[v],d[v]));o.push(g)}return o})}},n.prototype.fit=function(e,r,i){return i===void 0&&(i={}),We(this,void 0,void 0,function(){return Be(this,function(o){return[2,VX(this,e,r,i)]})})},n.prototype.fitDataset=function(e,r){return We(this,void 0,void 0,function(){return Be(this,function(i){return[2,LX(this,e,r)]})})},n.prototype.trainOnBatch=function(e,r){return We(this,void 0,void 0,function(){var i,o,a,s,u,l,c,d,f;return Be(this,function(p){switch(p.label){case 0:return[4,this.standardizeUserData(e,r)];case 1:i=p.sent(),o=i[0],a=i[1],s=this.makeTrainFunction(),u=s(o.concat(a)),l=[],c=0,d=u,p.label=2;case 2:return c<d.length?[4,d[c].data()]:[3,5];case 3:f=p.sent(),l.push(f[0]),p.label=4;case 4:return c++,[3,2];case 5:return nt(u),[2,mr(l)]}})})},n.prototype.getNamedWeights=function(e){for(var r=[],i=e!=null&&e.trainableOnly,o=i?this.trainableWeights:this.weights,a=this.getWeights(i),s=0;s<o.length;++s)i&&!o[s].trainable||r.push({name:o[s].originalName,tensor:a[s]});return r},Object.defineProperty(n.prototype,"stopTraining",{get:function(){return this.stopTraining_},set:function(e){this.stopTraining_=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"optimizer",{get:function(){return this.optimizer_},set:function(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)},enumerable:!0,configurable:!0}),n.prototype.dispose=function(){var e=t.prototype.dispose.call(this);if(e.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){var r=dv().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=r-dv().numTensors}return e},n.prototype.getLossIdentifiers=function(){var e;if(typeof this.loss=="string")e=zo(this.loss);else if(Array.isArray(this.loss)){for(var r=0,i=this.loss;r<i.length;r++)if(typeof i[r]!="string")throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map(function(c){return zo(c)})}else{var o=Object.keys(this.loss);e={};for(var a=this.loss,s=0,u=o;s<u.length;s++){var l=u[s];if(typeof a[l]!="string")throw new Error("Serialization of non-string loss is not supported.");e[l]=zo(a[l])}}return e},n.prototype.getMetricIdentifiers=function(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[zo(Th(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(function(i){return zo(Th(i))});var e={};for(var r in this.metrics)e[r]=zo(Th(this.metrics[r]));return e},n.prototype.getTrainingConfig=function(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}},n.prototype.loadTrainingConfig=function(e){if(e.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(e.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(e.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");var r,i,o=ji(Vf(e.optimizer_config));if(typeof e.loss=="string")r=Bs(e.loss);else if(Array.isArray(e.loss))r=e.loss.map(function(s){return Bs(s)});else if(e.loss!=null)for(var a in r={},e.loss)r[a]=Bs(e.loss[a]);if(Array.isArray(e.metrics))i=e.metrics.map(function(s){return Bs(s)});else if(e.metrics!=null)for(var a in i={},e.metrics)i[a]=Bs(e.metrics[a]);this.compile({loss:r,metrics:i,optimizer:o})},n.prototype.save=function(e,r){return We(this,void 0,void 0,function(){var i,o,a,s,u,l,c,d,f,p,h,v,g,m;return Be(this,function(y){switch(y.label){case 0:if(typeof e=="string"){if((i=Yr.getSaveHandlers(e)).length===0)throw new Y("Cannot find any save handlers for URL '"+e+"'");if(i.length>1)throw new Y("Found more than one ("+i.length+") save handlers for URL '"+e+"'");e=i[0]}if(e.save==null)throw new Y("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return[4,Yr.encodeWeights(this.getNamedWeights(r))];case 1:return o=y.sent(),a=!1,s=null,u=this.toJSON(s,a),l={modelTopology:u,format:GX,generatedBy:"TensorFlow.js tfjs-layers v"+ly,convertedBy:null},r!=null&&r.includeOptimizer&&this.optimizer!=null?(l.trainingConfig=this.getTrainingConfig(),c="optimizer",v=(h=Yr).encodeWeights,[4,this.optimizer.getWeights()]):[3,4];case 2:return[4,v.apply(h,[y.sent(),c])];case 3:d=y.sent(),f=d.data,p=d.specs,(m=o.specs).push.apply(m,p),o.data=Yr.concatenateArrayBuffers([o.data,f]),y.label=4;case 4:return this.userDefinedMetadata!=null&&(g=!0,xk(this.userDefinedMetadata,this.name,g),l.userDefinedMetadata=this.userDefinedMetadata),l.weightData=o.data,l.weightSpecs=o.specs,[2,e.save(l)]}})})},n.prototype.setUserDefinedMetadata=function(e){xk(e,this.name),this.userDefinedMetadata=e},n.prototype.getUserDefinedMetadata=function(){return this.userDefinedMetadata},n.className="Model",n}(AX);function qX(t,n){return We(this,void 0,void 0,function(){var e,r,i,o,a,s,u,l;return Be(this,function(c){switch(c.label){case 0:return"modelTopology"in t||(t={modelTopology:t}),(e=(t=t).modelTopology).model_config!=null&&(e=e.model_config),r=Vf(e),i=ji(r,n),t.weightsManifest==null?[3,2]:[4,Yr.loadWeights(t.weightsManifest,t.pathPrefix,i.weights.map(function(d){return d.originalName}))];case 1:for(o=c.sent(),a={},s=0,u=i.weights;s<u.length;s++)l=u[s],a[l.originalName]=o[l.originalName];i.loadWeights(a),nt(o),c.label=2;case 2:return[2,i]}})})}function KX(t,n){return We(this,void 0,void 0,function(){var e;return Be(this,function(r){if(n==null&&(n={}),typeof t=="string"){if((e=Yr.getLoadHandlers(t,n.onProgress)).length===0)e.push(Yr.browserHTTPRequest(t,n));else if(e.length>1)throw new Y("Found more than one ("+e.length+") load handlers for URL '"+t+"'");t=e[0]}return[2,XX(t,void 0,n)]})})}function XX(t,n,e){return We(this,void 0,void 0,function(){var r,i,o,a,s,u,l,c,d;return Be(this,function(f){switch(f.label){case 0:if(e==null&&(e={}),t.load==null)throw new Y("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");return[4,t.load()];case 1:if(r=f.sent(),(i=r.modelTopology).model_config!=null&&(i=i.model_config),o=e.strict==null||e.strict,a=r.weightData!=null&&r.weightSpecs!=null&&o,s=ji(Vf(i),n,a),(u=r.trainingConfig)!=null&&s.loadTrainingConfig(u),r.userDefinedMetadata!=null&&s.setUserDefinedMetadata(r.userDefinedMetadata),r.weightData==null)return[3,4];if(r.weightSpecs==null)throw new Y("LayersModel artifacts contains weight data, but not weight specs. Therefore loading of weights cannot proceed.");return l=YX(r.weightData,r.weightSpecs),c=l.modelWeights,d=l.optimizerWeights,s.loadWeights(c,o),s.optimizer!=null&&d.length>0?[4,s.optimizer.setWeights(d)]:[3,3];case 2:f.sent(),f.label=3;case 3:nt(c),nt(d.map(function(p){return p.tensor})),f.label=4;case 4:return[2,s]}})})}function YX(t,n){var e=Yr.decodeWeights(t,n),r={},i=[];return n.forEach(function(o){o.group==="optimizer"?i.push({name:o.name,tensor:e[o.name]}):r[o.name]=e[o.name]}),{modelWeights:r,optimizerWeights:i}}he.registerClass(ru);var VC=function(t){function n(e){var r=t.call(this,{inputs:[],outputs:[]})||this;if(e=e||{},r.trainable=!0,r.built=!1,r.name=e.name!=null?e.name:oy("sequential_"),e.layers!=null)for(var i=0,o=e.layers;i<o.length;i++){var a=o[i];r.add(a)}return r}return ue(n,t),n.prototype.checkShape=function(e){if(e.inboundNodes[0].outputTensors[0].shape.some(function(r){return r<0}))throw new Y("Negative dimension size caused by adding layer "+e.name+" with input shape ["+e.inboundNodes[0].inputTensors[0].shape+"]")},n.prototype.add=function(e){var r,i=e instanceof n||e instanceof ru;if(i){if((r=e).outputs.length!==1)throw new Y("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(r.inputs.length!==1)throw new Y("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(e.inboundNodes.length===0){if(e.batchInputShape==null)throw new Y("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");var o=g3({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(o)}if(i)this.outputs=r.outputs,this.inputs=r.inputs;else{if(e.inboundNodes.length!==1)throw new Y("A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer "+e.name+" which has "+e.inboundNodes.length+" pre-existing inbound connections.");if(e.inboundNodes[0].outputTensors.length!==1)throw new Y("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=v3(this.outputs[0])}this.inboundNodes=[],new ay({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:pu(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(function(s){return s.shape}),outputShapes:this.outputs[0].shape})}else{var a=e.apply(this.outputs[0]);if(Array.isArray(a))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[a],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1},n.prototype.pop=function(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{var e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}},n.prototype.call=function(e,r){return this.model==null&&this.build(),this.model.call(e,r)},n.prototype.build=function(e){if(Pt(e),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new ru({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0},n.prototype.countParams=function(){return this.built||this.build(),t.prototype.countParams.call(this)},n.prototype.summary=function(e,r,i){i===void 0&&(i=console.log),this.built||this.build(),t.prototype.summary.call(this,e,r,i)},n.prototype.setWeights=function(e){this.model==null&&this.build(),this.model.setWeights(e)},n.prototype.evaluate=function(e,r,i){if(i===void 0&&(i={}),!this.built)throw new uo("The model needs to be compiled before being used.");return this.model.evaluate(e,r,i)},n.prototype.evaluateDataset=function(e,r){return We(this,void 0,void 0,function(){return Be(this,function(i){if(!this.built)throw new uo("The model needs to be compiled before being used.");return[2,this.model.evaluateDataset(e,r)]})})},n.prototype.predict=function(e,r){return r===void 0&&(r={}),this.model==null&&this.build(),this.model.predict(e,r)},n.prototype.predictOnBatch=function(e){return this.model==null&&this.build(),this.model.predictOnBatch(e)},n.prototype.compile=function(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames},Object.defineProperty(n.prototype,"optimizer",{get:function(){return this.model==null?void 0:this.model.optimizer},set:function(e){this.model.optimizer=e},enumerable:!0,configurable:!0}),n.prototype.fit=function(e,r,i){return i===void 0&&(i={}),We(this,void 0,void 0,function(){return Be(this,function(o){if(!this.built)throw new uo("The model needs to be compiled before being used.");return[2,this.model.fit(e,r,i)]})})},n.prototype.fitDataset=function(e,r){return We(this,void 0,void 0,function(){return Be(this,function(i){if(!this.built)throw new uo("The model needs to be compiled before being used.");return[2,this.model.fitDataset(e,r)]})})},n.prototype.trainOnBatch=function(e,r){return We(this,void 0,void 0,function(){return Be(this,function(i){return[2,this.model.trainOnBatch(e,r)]})})},n.fromConfig=function(e,r,i,o){var a;o===void 0&&(o=!1);var s={};if(r instanceof Array){if(r[0].className==null||r[0].className==="Merge")throw new Y("Legacy serialization format not supported yet.");a=r}else Fe.assert(r.layers!=null,function(){return"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."}),a=r.layers,delete r.layers,s=r;var u=new e(s);if(!(u instanceof n))throw new Je("Sequential.fromConfig called on non-Sequential input: "+u);for(var l=0,c=a;l<c.length;l++){var d=ji(c[l],void 0,o);o&&d.setFastWeightInitDuringBuild(!0),u.add(d)}return u},Object.defineProperty(n.prototype,"stopTraining",{get:function(){if(this.model==null)throw new Y("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining},set:function(e){if(this.model==null)throw new Y("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e},enumerable:!0,configurable:!0}),n.prototype.getConfig=function(){for(var e=[],r=0,i=this.layers;r<i.length;r++){var o=i[r],a={};a.className=o.getClassName(),a.config=o.getConfig(),e.push(a)}return{name:this.name,layers:e}},n.className="Sequential",n}(ru);function JX(t){return new ru(t)}function QX(t){return new VC(t)}function ZX(t,n){return n==null&&(n={}),KX(t,n)}function P3(t){return g3(t)}function eY(t,n){E3.registerCallbackConstructor(t,n)}he.registerClass(VC);var si=function(t){function n(){return t!==null&&t.apply(this,arguments)||this}return ue(n,t),n.prototype.getConfig=function(){return{}},n}(he.Serializable),tY=function(t){function n(){return t!==null&&t.apply(this,arguments)||this}return ue(n,t),n.prototype.apply=function(e,r){return r===void 0&&(r=1),CK(e,r)},n.className="elu",n}(si);he.registerClass(tY);var nY=function(t){function n(){return t!==null&&t.apply(this,arguments)||this}return ue(n,t),n.prototype.apply=function(e){return Qg(e)},n.className="selu",n}(si);he.registerClass(nY);var rY=function(t){function n(){return t!==null&&t.apply(this,arguments)||this}return ue(n,t),n.prototype.apply=function(e){return ws(e)},n.className="relu",n}(si);he.registerClass(rY);var iY=function(t){function n(){return t!==null&&t.apply(this,arguments)||this}return ue(n,t),n.prototype.apply=function(e){return ee(function(){return kc(6,ws(e))})},n.className="relu6",n}(si);he.registerClass(iY);var oY=function(t){function n(){return t!==null&&t.apply(this,arguments)||this}return ue(n,t),n.prototype.apply=function(e){return e},n.className="linear",n}(si);he.registerClass(oY);var aY=function(t){function n(){return t!==null&&t.apply(this,arguments)||this}return ue(n,t),n.prototype.apply=function(e){return Ag(e)},n.className="sigmoid",n}(si);he.registerClass(aY);var sY=function(t){function n(){return t!==null&&t.apply(this,arguments)||this}return ue(n,t),n.prototype.apply=function(e){return TK(e)},n.className="hardSigmoid",n}(si);he.registerClass(sY);var uY=function(t){function n(){return t!==null&&t.apply(this,arguments)||this}return ue(n,t),n.prototype.apply=function(e){return sp(e)},n.className="softplus",n}(si);he.registerClass(uY);var lY=function(t){function n(){return t!==null&&t.apply(this,arguments)||this}return ue(n,t),n.prototype.apply=function(e){return RK(e)},n.className="softsign",n}(si);he.registerClass(lY);var cY=function(t){function n(){return t!==null&&t.apply(this,arguments)||this}return ue(n,t),n.prototype.apply=function(e){return Og(e)},n.className="tanh",n}(si);he.registerClass(cY);var L3=function(t){function n(){return t!==null&&t.apply(this,arguments)||this}return ue(n,t),n.prototype.apply=function(e,r){return r===void 0&&(r=-1),Ru(e,r)},n.className="softmax",n}(si);he.registerClass(L3);var dY=function(t){function n(){return t!==null&&t.apply(this,arguments)||this}return ue(n,t),n.prototype.apply=function(e,r){return r===void 0&&(r=-1),Ng(e,r)},n.className="logSoftmax",n}(si);function ri(t){return t.getClassName()}function m1(t,n){return n===void 0&&(n={}),gp(t,he.SerializationMap.getMap().classNameMap,n,"activation")}function cs(t){var n;return t==null?m1(n={className:"linear",config:{}}):typeof t=="string"?((n={}).className=t,n.config={},m1(n)):t instanceof si?t:m1(t)}function $C(t){if(t!=null&&typeof t!="object")throw new Error("Argument to L1L2 regularizer's constructor is expected to be an object, but received: "+t)}he.registerClass(dY);var F3=function(t){function n(){return t!==null&&t.apply(this,arguments)||this}return ue(n,t),n}(he.Serializable),cy=function(t){function n(e){var r=t.call(this)||this;return $C(e),r.l1=e==null||e.l1==null?.01:e.l1,r.l2=e==null||e.l2==null?.01:e.l2,r.hasL1=r.l1!==0,r.hasL2=r.l2!==0,r}return ue(n,t),n.prototype.apply=function(e){var r=this;return ee(function(){var i=It([1]);return r.hasL1&&(i=at(i,zr(He(r.l1,ss(e))))),r.hasL2&&(i=at(i,zr(He(r.l2,xp(e))))),i.asScalar()})},n.prototype.getConfig=function(){return{l1:this.l1,l2:this.l2}},n.fromConfig=function(e,r){return new e({l1:r.l1,l2:r.l2})},n.className="L1L2",n}(F3);function fY(t){return $C(t),new cy({l1:t!=null?t.l1:null,l2:0})}function pY(t){return $C(t),new cy({l2:t!=null?t.l2:null,l1:0})}he.registerClass(cy);var Ik={l1l2:"L1L2"};function rt(t){return RC(t)}function _k(t,n){return n===void 0&&(n={}),gp(t,he.SerializationMap.getMap().classNameMap,n,"regularizer")}function Gt(t){return t==null?null:typeof t=="string"?_k({className:t in Ik?Ik[t]:t,config:{}}):t instanceof F3?t:_k(t)}var z3=function(t){function n(e){var r=t.call(this,e??{})||this;return r.supportsMasking=!0,e!=null&&(r.maxValue=e.maxValue),r}return ue(n,t),n.prototype.call=function(e,r){e=Qe(e);var i=ws(e);return this.maxValue!=null&&(i=br(i,0,this.maxValue)),i},n.prototype.computeOutputShape=function(e){return e},n.prototype.getConfig=function(){var e={maxValue:this.maxValue},r=t.prototype.getConfig.call(this);return Object.assign(e,r),e},n.className="ReLU",n}(pt);he.registerClass(z3);var B3=function(t){function n(e){var r=t.call(this,e??{})||this;return r.DEFAULT_ALPHA=.3,e==null&&(e={}),r.alpha=e.alpha==null?r.DEFAULT_ALPHA:e.alpha,r}return ue(n,t),n.prototype.call=function(e,r){var i=Qe(e);return Yg(i,this.alpha)},n.prototype.computeOutputShape=function(e){return e},n.prototype.getConfig=function(){var e={alpha:this.alpha},r=t.prototype.getConfig.call(this);return Object.assign(e,r),e},n.className="LeakyReLU",n}(pt);he.registerClass(B3);var j3=function(t){function n(e){var r=t.call(this,e??{})||this;if(r.DEFAULT_ALPHA_INITIALIZER="zeros",e==null&&(e={}),r.supportsMasking=!0,r.alphaInitializer=Ht(e.alphaInitializer||r.DEFAULT_ALPHA_INITIALIZER),r.alphaRegularizer=Gt(e.alphaRegularizer),r.alphaConstraint=Cn(e.alphaConstraint),e.sharedAxes==null)r.sharedAxes=null;else if(Array.isArray(e.sharedAxes))r.sharedAxes=e.sharedAxes;else{if(typeof e.sharedAxes!="number")throw new Y("Expected sharedAxes to be a number or an array of numbers, but got "+e.sharedAxes);r.sharedAxes=[e.sharedAxes]}return r}return ue(n,t),n.prototype.build=function(e){var r=(e=Pt(e)).slice(1);if(this.sharedAxes!=null)for(var i=0,o=this.sharedAxes;i<o.length;i++)r[(s=o[i])-1]=1;this.alpha=this.addWeight("alpha",r,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);var a={};if(this.sharedAxes!=null)for(var s=1;s<e.length;++s)a[s]=e[s];this.inputSpec=[new Fn({ndim:e.length,axes:a})],this.built=!0},n.prototype.call=function(e,r){return e=Qe(e),Jg(e,this.alpha.read())},n.prototype.getConfig=function(){var e={alphaInitializer:bt(this.alphaInitializer),alphaRegularizer:rt(this.alphaRegularizer),alphaConstraint:Ot(this.alphaConstraint),sharedAxes:this.sharedAxes},r=t.prototype.getConfig.call(this);return Object.assign(e,r),e},n.className="PReLU",n}(pt);he.registerClass(j3);var V3=function(t){function n(e){var r=t.call(this,e??{})||this;if(r.DEFAULT_ALPHA=1,e==null&&(e={}),e.alpha!=null&&e.alpha!==r.DEFAULT_ALPHA)throw new Je("Non-default alpha value ("+e.alpha+") is not supported by the ELU layer yet.");return r.alpha=e.alpha==null?r.DEFAULT_ALPHA:e.alpha,r}return ue(n,t),n.prototype.call=function(e,r){var i=Qe(e);return Oc(i)},n.prototype.computeOutputShape=function(e){return e},n.prototype.getConfig=function(){var e={alpha:this.alpha},r=t.prototype.getConfig.call(this);return Object.assign(e,r),e},n.className="ELU",n}(pt);he.registerClass(V3);var $3=function(t){function n(e){var r=t.call(this,e??{})||this;return r.DEFAULT_THETA=1,e==null&&(e={}),r.theta=e.theta==null?r.DEFAULT_THETA:e.theta,r}return ue(n,t),n.prototype.call=function(e,r){var i=Qe(e);return i.mul(bp(i.greater(this.theta),"float32"))},n.prototype.computeOutputShape=function(e){return e},n.prototype.getConfig=function(){var e={theta:this.theta},r=t.prototype.getConfig.call(this);return Object.assign(e,r),e},n.className="ThresholdedReLU",n}(pt);he.registerClass($3);var U3=function(t){function n(e){var r=t.call(this,e??{})||this;return r.DEFAULT_AXIS=1,e==null&&(e={}),r.softmax=new L3().apply,r.axis=e.axis==null?r.DEFAULT_AXIS:e.axis,r}return ue(n,t),n.prototype.call=function(e,r){var i=Qe(e);return this.softmax(i,this.axis)},n.prototype.computeOutputShape=function(e){return e},n.prototype.getConfig=function(){var e={axis:this.axis},r=t.prototype.getConfig.call(this);return Object.assign(e,r),e},n.className="Softmax",n}(pt);function v1(t,n,e){if(typeof t=="number")return pu(t,n);if(t.length!==n)throw new Y("The "+e+" argument must be an integer or tuple of "+n+" integers. Received: "+t.length+" elements.");for(var r=0;r<n;++r){var i=t[r];if(!wK(i))throw new Y("The "+e+" argument must be an integer or tuple of "+n+" integers. Received: "+JSON.stringify(t)+" including a non-integer number "+i)}return t}function Ko(t,n,e,r,i){return i===void 0&&(i=1),t==null?t:(o=e==="same"?t:t-(n+(n-1)*(i-1))+1,Math.floor((o+r-1)/r));var o}function Nh(t,n,e,r){if(t==null)return null;if(r==="valid")t=t*n+ls([e-n,0]);else{if(r!=="same")throw new Y("Unsupport padding mode: "+r+".");t*=n}return t}function UC(t,n){return ee(function(){return Tn(n),n==="channelsFirst"?Zt(t,[0,2,3,1]):t})}function W3(t,n){return ee(function(){return Tn(n),n==="channelsFirst"?Zt(t,[0,2,3,4,1]):t})}function hY(t,n,e,r,i,o,a){return r===void 0&&(r=1),i===void 0&&(i="valid"),a===void 0&&(a=1),ee(function(){if(o==null&&(o=Ui()),Tn(o),t.shape.length!==3)throw new Y("The input of a conv1dWithBias operation should be 3, but is "+t.shape.length+" instead.");if(n.shape.length!==3)throw new Y("The kernel for a conv1dWithBias operation should be 3, but is "+n.shape.length+" instead");if(e!=null&&e.shape.length!==1)throw new Y("The bias for a conv1dWithBias operation should be 1, but is "+n.shape.length+" instead");if(o==="channelsFirst"&&(t=Zt(t,[0,2,1])),i==="causal")throw new Je("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");var s=zg(t,n,r,i==="same"?"same":"valid","NWC",a);return e!=null&&(s=da(s,e)),s})}function Ak(t,n,e,r,i,o,a,s){return r===void 0&&(r=[1,1]),i===void 0&&(i="valid"),s===void 0&&(s=null),ee(function(){if(o==null&&(o=Ui()),Tn(o),t.rank!==3&&t.rank!==4)throw new Y("conv2dWithBiasActivation expects input to be of rank 3 or 4, but received "+t.rank+".");if(n.rank!==3&&n.rank!==4)throw new Y("conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received "+t.rank+".");var u=UC(t,o);if(i==="causal")throw new Je("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return u=oc.conv2d({x:u,filter:n,strides:r,pad:i==="same"?"same":"valid",dilations:a,dataFormat:"NHWC",bias:e,activation:s}),o==="channelsFirst"&&(u=Zt(u,[0,3,1,2])),u})}function mY(t,n,e,r,i,o,a){return r===void 0&&(r=[1,1,1]),i===void 0&&(i="valid"),ee(function(){if(o==null&&(o=Ui()),Tn(o),t.rank!==4&&t.rank!==5)throw new Y("conv3dWithBias expects input to be of rank 4 or 5, but received "+t.rank+".");if(n.rank!==4&&n.rank!==5)throw new Y("conv3dWithBias expects kernel to be of rank 4 or 5, but received "+t.rank+".");var s=W3(t,o);if(i==="causal")throw new Je("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return s=Bg(s,n,r,i==="same"?"same":"valid","NDHWC",a),e!=null&&(s=da(s,e)),o==="channelsFirst"&&(s=Zt(s,[0,4,1,2,3])),s})}he.registerClass(U3);var H3=function(t){function n(e,r){var i=t.call(this,r)||this;if(i.bias=null,i.DEFAULT_KERNEL_INITIALIZER="glorotNormal",i.DEFAULT_BIAS_INITIALIZER="zeros",n.verifyArgs(r),i.rank=e,wr(i.rank,"rank"),i.rank!==1&&i.rank!==2&&i.rank!==3)throw new Je("Convolution layer for rank other than 1, 2, or 3 ("+i.rank+") is not implemented yet.");if(i.kernelSize=v1(r.kernelSize,e,"kernelSize"),i.strides=v1(r.strides==null?1:r.strides,e,"strides"),i.padding=r.padding==null?"valid":r.padding,Ci(i.padding),i.dataFormat=r.dataFormat==null?"channelsLast":r.dataFormat,Tn(i.dataFormat),i.activation=cs(r.activation),i.useBias=r.useBias==null||r.useBias,i.biasInitializer=Ht(r.biasInitializer||i.DEFAULT_BIAS_INITIALIZER),i.biasConstraint=Cn(r.biasConstraint),i.biasRegularizer=Gt(r.biasRegularizer),i.activityRegularizer=Gt(r.activityRegularizer),i.dilationRate=v1(r.dilationRate==null?1:r.dilationRate,e,"dilationRate"),i.rank===1&&Array.isArray(i.dilationRate)&&i.dilationRate.length!==1)throw new Y("dilationRate must be a number or an array of a single number for 1D convolution, but received "+JSON.stringify(i.dilationRate));if(i.rank===2){if(typeof i.dilationRate=="number")i.dilationRate=[i.dilationRate,i.dilationRate];else if(i.dilationRate.length!==2)throw new Y("dilationRate must be a number or array of two numbers for 2D convolution, but received "+JSON.stringify(i.dilationRate))}else if(i.rank===3){if(typeof i.dilationRate=="number")i.dilationRate=[i.dilationRate,i.dilationRate,i.dilationRate];else if(i.dilationRate.length!==3)throw new Y("dilationRate must be a number or array of three numbers for 3D convolution, but received "+JSON.stringify(i.dilationRate))}return i}return ue(n,t),n.verifyArgs=function(e){if(oo("kernelSize"in e,"required key 'kernelSize' not in config"),typeof e.kernelSize!="number"&&!TC(e.kernelSize,"number",1,3))throw new Y("BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received "+JSON.stringify(e.kernelSize)+".")},n.prototype.getConfig=function(){var e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:ri(this.activation),useBias:this.useBias,biasInitializer:bt(this.biasInitializer),biasRegularizer:rt(this.biasRegularizer),activityRegularizer:rt(this.activityRegularizer),biasConstraint:Ot(this.biasConstraint)},r=t.prototype.getConfig.call(this);return Object.assign(e,r),e},n}(pt),dy=function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.kernel=null,n.verifyArgs(r),i.filters=r.filters,wr(i.filters,"filters"),i.kernelInitializer=Ht(r.kernelInitializer||i.DEFAULT_KERNEL_INITIALIZER),i.kernelConstraint=Cn(r.kernelConstraint),i.kernelRegularizer=Gt(r.kernelRegularizer),i}return ue(n,t),n.prototype.build=function(e){var r;e=Pt(e);var i=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[i]==null)throw new Y("The channel dimension of the input should be defined. Found "+e[i]);var o=e[i],a=this.kernelSize.concat([o,this.filters]);this.kernel=this.addWeight("kernel",a,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:(r={},r[i]=o,r)}],this.built=!0},n.prototype.call=function(e,r){var i=this;return ee(function(){var o;e=Qe(e);var a=i.bias==null?null:i.bias.read(),s=KL(i.activation.getClassName());if(s!=null&&i.rank===2)o=Ak(e,i.kernel.read(),a,i.strides,i.padding,i.dataFormat,i.dilationRate,s);else{if(i.rank===1)o=hY(e,i.kernel.read(),a,i.strides[0],i.padding,i.dataFormat,i.dilationRate[0]);else if(i.rank===2)o=Ak(e,i.kernel.read(),a,i.strides,i.padding,i.dataFormat,i.dilationRate);else{if(i.rank!==3)throw new Je("convolutions greater than 3D are not implemented yet.");o=mY(e,i.kernel.read(),a,i.strides,i.padding,i.dataFormat,i.dilationRate)}i.activation!=null&&(o=i.activation.apply(o))}return o})},n.prototype.computeOutputShape=function(e){e=Pt(e);for(var r=[],i=this.dataFormat==="channelsLast"?e.slice(1,e.length-1):e.slice(2),o=0;o<i.length;++o){var a=Ko(i[o],this.kernelSize[o],this.padding,this.strides[o],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[o]);r.push(a)}var s=[e[0]];return this.dataFormat==="channelsLast"?(s=s.concat(r)).push(this.filters):(s.push(this.filters),s=s.concat(r)),s},n.prototype.getConfig=function(){var e={filters:this.filters,kernelInitializer:bt(this.kernelInitializer),kernelRegularizer:rt(this.kernelRegularizer),kernelConstraint:Ot(this.kernelConstraint)},r=t.prototype.getConfig.call(this);return Object.assign(e,r),e},n.verifyArgs=function(e){if(!("filters"in e)||typeof e.filters!="number"||e.filters<1)throw new Y("Convolution layer expected config.filters to be a 'number' > 0 but got "+JSON.stringify(e.filters))},n}(H3),WC=function(t){function n(e){var r=t.call(this,2,e)||this;return n.verifyArgs(e),r}return ue(n,t),n.prototype.getConfig=function(){var e=t.prototype.getConfig.call(this);return delete e.rank,e},n.verifyArgs=function(e){if(typeof e.kernelSize!="number"&&!TC(e.kernelSize,"number",1,2))throw new Y("Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received "+JSON.stringify(e.kernelSize)+".")},n.className="Conv2D",n}(dy);he.registerClass(WC);var G3=function(t){function n(e){var r=t.call(this,3,e)||this;return n.verifyArgs(e),r}return ue(n,t),n.prototype.getConfig=function(){var e=t.prototype.getConfig.call(this);return delete e.rank,e},n.verifyArgs=function(e){if(typeof e.kernelSize!="number"&&(!Array.isArray(e.kernelSize)||e.kernelSize.length!==1&&e.kernelSize.length!==3))throw new Y("Conv3D expects config.kernelSize to be number or [number, number, number], but received "+JSON.stringify(e.kernelSize)+".")},n.className="Conv3D",n}(dy);he.registerClass(G3);var q3=function(t){function n(e){var r=t.call(this,e)||this;if(r.inputSpec=[new Fn({ndim:4})],r.padding!=="same"&&r.padding!=="valid")throw new Y("Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode "+r.padding);return r}return ue(n,t),n.prototype.build=function(e){var r;if((e=Pt(e)).length!==4)throw new Y("Input should have rank 4; Received input shape: "+JSON.stringify(e));var i=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[i]==null)throw new Y("The channel dimension of the inputs should be defined. Found `None`.");var o=e[i],a=this.kernelSize.concat([this.filters,o]);this.kernel=this.addWeight("kernel",a,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Fn({ndim:4,axes:(r={},r[i]=o,r)})],this.built=!0},n.prototype.call=function(e,r){var i=this;return ee(function(){var o=Qe(e);if(o.shape.length!==4)throw new Y("Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-"+o.shape.length);var a,s,u=o.shape,l=u[0];i.dataFormat==="channelsFirst"?(a=2,s=3):(a=1,s=2);var c=u[a],d=u[s],f=i.kernelSize[0],p=i.kernelSize[1],h=i.strides[0],v=i.strides[1],g=[l,Nh(c,h,f,i.padding),Nh(d,v,p,i.padding),i.filters];i.dataFormat!=="channelsLast"&&(o=Zt(o,[0,2,3,1]));var m=jg(o,i.kernel.read(),g,i.strides,i.padding);return i.dataFormat!=="channelsLast"&&(m=Zt(m,[0,3,1,2])),i.bias!=null&&(m=da(m,i.bias.read(),i.dataFormat)),i.activation!=null&&(m=i.activation.apply(m)),m})},n.prototype.computeOutputShape=function(e){var r,i,o,a=(e=Pt(e)).slice();this.dataFormat==="channelsFirst"?(r=1,i=2,o=3):(r=3,i=1,o=2);var s=this.kernelSize[0],u=this.kernelSize[1],l=this.strides[0],c=this.strides[1];return a[r]=this.filters,a[i]=Nh(a[i],l,s,this.padding),a[o]=Nh(a[o],c,u,this.padding),a},n.prototype.getConfig=function(){var e=t.prototype.getConfig.call(this);return delete e.dilationRate,e},n.className="Conv2DTranspose",n}(WC);he.registerClass(q3);var vY=function(t){function n(e,r){var i=t.call(this,e,r)||this;if(i.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",i.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",i.depthwiseKernel=null,i.pointwiseKernel=null,r.filters==null)throw new Y("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(r.kernelInitializer!=null||r.kernelRegularizer!=null||r.kernelConstraint!=null)throw new Y("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(r.padding!=null&&r.padding!=="same"&&r.padding!=="valid")throw new Y("SeparableConv"+i.rank+"D supports only padding modes: 'same' and 'valid', but received "+JSON.stringify(r.padding));return i.depthMultiplier=r.depthMultiplier==null?1:r.depthMultiplier,i.depthwiseInitializer=Ht(r.depthwiseInitializer||i.DEFAULT_DEPTHWISE_INITIALIZER),i.depthwiseRegularizer=Gt(r.depthwiseRegularizer),i.depthwiseConstraint=Cn(r.depthwiseConstraint),i.pointwiseInitializer=Ht(r.depthwiseInitializer||i.DEFAULT_POINTWISE_INITIALIZER),i.pointwiseRegularizer=Gt(r.pointwiseRegularizer),i.pointwiseConstraint=Cn(r.pointwiseConstraint),i}return ue(n,t),n.prototype.build=function(e){var r;if((e=Pt(e)).length<this.rank+2)throw new Y("Inputs to SeparableConv"+this.rank+"D should have rank "+(this.rank+2)+", but received input shape: "+JSON.stringify(e));var i=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[i]==null||e[i]<0)throw new Y("The channel dimension of the inputs should be defined, but found "+JSON.stringify(e[i]));for(var o=e[i],a=this.kernelSize.concat([o,this.depthMultiplier]),s=[],u=0;u<this.rank;++u)s.push(1);s.push(o*this.depthMultiplier,this.filters),this.depthwiseKernel=this.addWeight("depthwise_kernel",a,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",s,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,!0,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.inputSpec=[new Fn({ndim:this.rank+2,axes:(r={},r[i]=o,r)})],this.built=!0},n.prototype.call=function(e,r){var i=this;return ee(function(){var o;if(e=Qe(e),i.rank===1)throw new Je("1D separable convolution is not implemented yet.");return i.rank===2&&(i.dataFormat==="channelsFirst"&&(e=Zt(e,[0,2,3,1])),o=tC(e,i.depthwiseKernel.read(),i.pointwiseKernel.read(),i.strides,i.padding,i.dilationRate,"NHWC")),i.useBias&&(o=da(o,i.bias.read(),i.dataFormat)),i.activation!=null&&(o=i.activation.apply(o)),i.dataFormat==="channelsFirst"&&(o=Zt(o,[0,3,1,2])),o})},n.prototype.getConfig=function(){var e=t.prototype.getConfig.call(this);return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=bt(this.depthwiseInitializer),e.pointwiseInitializer=bt(this.pointwiseInitializer),e.depthwiseRegularizer=rt(this.depthwiseRegularizer),e.pointwiseRegularizer=rt(this.pointwiseRegularizer),e.depthwiseConstraint=Ot(this.depthwiseConstraint),e.pointwiseConstraint=Ot(this.pointwiseConstraint),e},n.className="SeparableConv",n}(dy),K3=function(t){function n(e){return t.call(this,2,e)||this}return ue(n,t),n.className="SeparableConv2D",n}(vY);he.registerClass(K3);var X3=function(t){function n(e){var r=t.call(this,1,e)||this;return n.verifyArgs(e),r.inputSpec=[{ndim:3}],r}return ue(n,t),n.prototype.getConfig=function(){var e=t.prototype.getConfig.call(this);return delete e.rank,delete e.dataFormat,e},n.verifyArgs=function(e){if(typeof e.kernelSize!="number"&&!TC(e.kernelSize,"number",1,1))throw new Y("Conv1D expects config.kernelSize to be number or number[] with length 1, but received "+JSON.stringify(e.kernelSize)+".")},n.className="Conv1D",n}(dy);he.registerClass(X3);var Y3=function(t){function n(e){var r=t.call(this,e)||this;return typeof e.cropping=="number"?r.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:typeof e.cropping[0]=="number"?r.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:r.cropping=e.cropping,r.dataFormat=e.dataFormat===void 0?"channelsLast":e.dataFormat,r.inputSpec=[{ndim:4}],r}return ue(n,t),n.prototype.computeOutputShape=function(e){return this.dataFormat==="channelsFirst"?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]},n.prototype.call=function(e,r){var i=this;return ee(function(){return e=Qe(e),i.dataFormat==="channelsLast"?Ch(Ch(e,i.cropping[0][0],e.shape[1]-i.cropping[0][0]-i.cropping[0][1],2),i.cropping[1][0],e.shape[2]-i.cropping[1][1]-i.cropping[1][0],3):Ch(Ch(e,i.cropping[0][0],e.shape[2]-i.cropping[0][0]-i.cropping[0][1],3),i.cropping[1][0],e.shape[3]-i.cropping[1][1]-i.cropping[1][0],4)})},n.prototype.getConfig=function(){var e={cropping:this.cropping,dataFormat:this.dataFormat},r=t.prototype.getConfig.call(this);return Object.assign(e,r),e},n.className="Cropping2D",n}(pt);he.registerClass(Y3);var J3=function(t){function n(e){var r=t.call(this,e)||this;return r.DEFAULT_SIZE=[2,2],r.inputSpec=[{ndim:4}],r.size=e.size==null?r.DEFAULT_SIZE:e.size,r.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,r}return ue(n,t),n.prototype.computeOutputShape=function(e){if(this.dataFormat==="channelsFirst"){var r=e[2]==null?null:this.size[0]*e[2],i=e[3]==null?null:this.size[1]*e[3];return[e[0],e[1],r,i]}return r=e[1]==null?null:this.size[0]*e[1],i=e[2]==null?null:this.size[1]*e[2],[e[0],r,i,e[3]]},n.prototype.call=function(e,r){var i=this;return ee(function(){var o=Qe(e),a=o.shape;if(i.dataFormat==="channelsFirst"){o=Zt(o,[0,2,3,1]);var s=i.size[0]*a[2],u=i.size[1]*a[3],l=o.resizeNearestNeighbor([s,u]);return Zt(l,[0,3,1,2])}return s=i.size[0]*a[1],u=i.size[1]*a[2],o.resizeNearestNeighbor([s,u])})},n.prototype.getConfig=function(){var e={size:this.size,dataFormat:this.dataFormat},r=t.prototype.getConfig.call(this);return Object.assign(e,r),e},n.className="UpSampling2D",n}(pt);function gY(t,n,e,r,i,o){return e===void 0&&(e=[1,1]),r===void 0&&(r="valid"),ee(function(){i==null&&(i=Ui()),Tn(i);var a=UC(t,i);if(t.rank!==4)throw new Y("Input for depthwiseConv2d is required to be 4-D, but is instead "+t.rank+"-D");if(n.rank!==4)throw new Y("depthwiseKernel is required to be 4-D, but is instead "+n.rank+"-D");return a=Ac(a,n,e,r==="same"?"same":"valid","NHWC",o),i==="channelsFirst"&&(a=Zt(a,[0,3,1,2])),a})}he.registerClass(J3);var Q3=function(t){function n(e){var r=t.call(this,2,e)||this;return r.depthwiseKernel=null,r.depthMultiplier=e.depthMultiplier==null?1:e.depthMultiplier,r.depthwiseInitializer=Ht(e.depthwiseInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.depthwiseConstraint=Cn(e.depthwiseConstraint),r.depthwiseRegularizer=Gt(e.depthwiseRegularizer),r}return ue(n,t),n.prototype.build=function(e){if((e=Pt(e)).length<4)throw new Y("Inputs to DepthwiseConv2D should have rank 4. Received input shape: "+JSON.stringify(e)+".");var r=this.dataFormat==="channelsFirst"?1:3;if(e[r]==null||e[r]<0)throw new Y("The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not ("+e[r]+").");var i=e[r],o=[this.kernelSize[0],this.kernelSize[1],i,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",o,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[i*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0},n.prototype.call=function(e,r){var i=this;return ee(function(){var o=gY(e=Qe(e),i.depthwiseKernel.read(),i.strides,i.padding,i.dataFormat,null);return i.useBias&&(o=da(o,i.bias.read(),i.dataFormat)),i.activation!=null&&(o=i.activation.apply(o)),o})},n.prototype.computeOutputShape=function(e){e=Pt(e);var r=this.dataFormat==="channelsFirst"?e[2]:e[1],i=this.dataFormat==="channelsFirst"?e[3]:e[2],o=this.dataFormat==="channelsFirst"?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,a=Ko(r,this.kernelSize[0],this.padding,this.strides[0]),s=Ko(i,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[e[0],o,a,s]:[e[0],a,s,o]},n.prototype.getConfig=function(){var e=t.prototype.getConfig.call(this);return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=bt(this.depthwiseInitializer),e.depthwiseRegularizer=rt(this.depthwiseRegularizer),e.depthwiseConstraint=Ot(this.depthwiseRegularizer),e},n.className="DepthwiseConv2D",n}(H3);he.registerClass(Q3);var Z3=function(t){function n(e){var r=t.call(this,e)||this;return r.rate=Math.max(Math.min(e.rate,1),0),r.noiseShape=e.noiseShape,r.seed=e.seed,r.supportsMasking=!0,r}return ue(n,t),n.prototype.getNoiseShape=function(e){if(this.noiseShape==null)return this.noiseShape;for(var r=e.shape,i=[],o=0;o<this.noiseShape.length;++o)i.push(this.noiseShape[o]==null?r[o]:this.noiseShape[o]);return i},n.prototype.call=function(e,r){var i=this;return ee(function(){i.invokeCallHook(e,r);var o=Qe(e);if(0<i.rate&&i.rate<1){var a=r.training!=null&&r.training,s=i.getNoiseShape(o);return sc(function(){return a3(o,i.rate,s,i.seed)},function(){return o},a)}return e})},n.prototype.getConfig=function(){var e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},r=t.prototype.getConfig.call(this);return Object.assign(e,r),e},n.prototype.dispose=function(){return t.prototype.dispose.call(this)},n.className="Dropout",n}(pt);he.registerClass(Z3);var e4=function(t){function n(e){var r=t.call(this,e)||this;if(r.activation=null,r.useBias=!0,r.kernel=null,r.bias=null,r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_BIAS_INITIALIZER="zeros",e.batchInputShape==null&&e.inputShape==null&&e.inputDim!=null){var i=null;e.batchSize!=null&&(i=e.batchSize),r.batchInputShape=[i,e.inputDim]}return r.units=e.units,wr(r.units,"units"),r.activation=cs(e.activation),e.useBias!=null&&(r.useBias=e.useBias),r.kernelInitializer=Ht(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.biasInitializer=Ht(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelConstraint=Cn(e.kernelConstraint),r.biasConstraint=Cn(e.biasConstraint),r.kernelRegularizer=Gt(e.kernelRegularizer),r.biasRegularizer=Gt(e.biasRegularizer),r.activityRegularizer=Gt(e.activityRegularizer),r.supportsMasking=!0,r.inputSpec=[{minNDim:2}],r}return ue(n,t),n.prototype.build=function(e){var r,i=(e=Pt(e))[e.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[i,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:(r={},r[-1]=i,r)}],this.built=!0},n.prototype.computeOutputShape=function(e){var r=(e=Pt(e)).slice();return r[r.length-1]=this.units,r},n.prototype.call=function(e,r){var i=this;return ee(function(){i.invokeCallHook(e,r);var o,a=Qe(e),s=KL(i.activation.getClassName());return s!=null?o=qo(a,i.kernel.read(),s,i.bias?i.bias.read():null):(o=qo(a,i.kernel.read()),i.bias!=null&&(o=da(o,i.bias.read())),i.activation!=null&&(o=i.activation.apply(o))),o})},n.prototype.getConfig=function(){var e={units:this.units,activation:ri(this.activation),useBias:this.useBias,kernelInitializer:bt(this.kernelInitializer),biasInitializer:bt(this.biasInitializer),kernelRegularizer:rt(this.kernelRegularizer),biasRegularizer:rt(this.biasRegularizer),activityRegularizer:rt(this.activityRegularizer),kernelConstraint:Ot(this.kernelConstraint),biasConstraint:Ot(this.biasConstraint)},r=t.prototype.getConfig.call(this);return Object.assign(e,r),e},n.className="Dense",n}(pt);he.registerClass(e4);var t4=function(t){function n(e){var r=t.call(this,e||{})||this;return r.inputSpec=[{minNDim:3}],r}return ue(n,t),n.prototype.computeOutputShape=function(e){for(var r=0,i=(e=Pt(e)).slice(1);r<i.length;r++)if(i[r]==null)throw new Y('The shape of the input to "Flatten" is not fully defined (got '+e.slice(1)+'). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.');return[e[0],ts(e,1)]},n.prototype.call=function(e,r){var i=this;return ee(function(){return i.invokeCallHook(e,r),EK(Qe(e))})},n.className="Flatten",n}(pt);he.registerClass(t4);var n4=function(t){function n(e){var r=t.call(this,e)||this;return r.supportsMasking=!0,r.activation=cs(e.activation),r}return ue(n,t),n.prototype.call=function(e,r){var i=this;return ee(function(){i.invokeCallHook(e,r);var o=Qe(e);return i.activation.apply(o)})},n.prototype.getConfig=function(){var e={activation:ri(this.activation)},r=t.prototype.getConfig.call(this);return Object.assign(e,r),e},n.className="Activation",n}(pt);he.registerClass(n4);var r4=function(t){function n(e){var r=t.call(this,e)||this;return r.n=e.n,r.inputSpec=[{ndim:2}],r}return ue(n,t),n.prototype.computeOutputShape=function(e){return[e[0],this.n,e[1]]},n.prototype.call=function(e,r){var i=this;return ee(function(){return xK(e=Qe(e),i.n)})},n.prototype.getConfig=function(){var e={n:this.n},r=t.prototype.getConfig.call(this);return Object.assign(e,r),e},n.className="RepeatVector",n}(pt);he.registerClass(r4);var i4=function(t){function n(e){var r=t.call(this,e)||this;r.targetShape=e.targetShape;for(var i=0;i<r.targetShape.length;++i)r.isUnknown(r.targetShape[i])&&(r.targetShape[i]=null);return r}return ue(n,t),n.prototype.isUnknown=function(e){return e<0||e==null},n.prototype.fixUnknownDimension=function(e,r){for(var i="Total size of new array must be unchanged.",o=r.slice(),a=1,s=null,u=0;u<o.length;++u){var l=o[u];if(this.isUnknown(l)){if(s!==null)throw new Y("Can only specifiy one unknown dimension.");s=u}else a*=l}var c=ts(e);if(s!==null){if(a===0||c%a!=0)throw new Y(i);o[s]=c/a}else if(c!==a)throw new Y(i);return o},n.prototype.computeOutputShape=function(e){for(var r=!1,i=0;i<e.length;++i)if(this.isUnknown(e[i])){r=!0;break}return r?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))},n.prototype.call=function(e,r){var i=this;return ee(function(){i.invokeCallHook(e,r);var o=Qe(e),a=o.shape,s=a.slice(0,1).concat(i.fixUnknownDimension(a.slice(1),i.targetShape));return o.reshape(s)})},n.prototype.getConfig=function(){var e={targetShape:this.targetShape},r=t.prototype.getConfig.call(this);return Object.assign(e,r),e},n.className="Reshape",n}(pt);he.registerClass(i4);var o4=function(t){function n(e){var r=t.call(this,e)||this;if(e.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error("Permute constructor requires `dims` to be an Array, but received "+e.dims+" instead.");var i=Wi(1,e.dims.length+1);if(!Fe.arraysEqual(e.dims.slice().sort(),i))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");return r.dims=e.dims,r.dimsIncludingBatch=[0].concat(r.dims),r.inputSpec=[new Fn({ndim:r.dims.length+1})],r}return ue(n,t),n.prototype.computeOutputShape=function(e){var r=(e=Pt(e)).slice();return this.dims.forEach(function(i,o){r[o+1]=e[i]}),r},n.prototype.call=function(e,r){return Zt(Qe(e),this.dimsIncludingBatch)},n.prototype.getConfig=function(){var e={dims:this.dims},r=t.prototype.getConfig.call(this);return Object.assign(e,r),e},n.className="Permute",n}(pt);he.registerClass(o4);var a4=function(t){function n(e){var r=t.call(this,e??{})||this;return r.supportsMasking=!0,r.maskValue=e!=null?e.maskValue==null?0:e.maskValue:0,r}return ue(n,t),n.prototype.computeOutputShape=function(e){return e},n.prototype.getConfig=function(){var e=t.prototype.getConfig.call(this),r={maskValue:this.maskValue};return Object.assign(r,e),r},n.prototype.computeMask=function(e,r){var i=Qe(e);return zf(nc(i,this.maskValue),-1)},n.prototype.call=function(e,r){var i=this;return ee(function(){i.invokeCallHook(e,r);var o=Qe(e),a=zf(nc(o,i.maskValue),-1,!0);return o.mul(a.asType(o.dtype))})},n.className="Masking",n}(pt);he.registerClass(a4);var s4=function(t){function n(e){var r=t.call(this,e)||this;if(r.embeddings=null,r.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",e.batchInputShape==null&&e.inputShape==null){var i=null;e.batchSize!=null&&(i=e.batchSize),e.inputLength==null?r.batchInputShape=[i,null]:r.batchInputShape=[i].concat(Ft(e.inputLength))}return r.inputDim=e.inputDim,wr(r.inputDim,"inputDim"),r.outputDim=e.outputDim,wr(r.outputDim,"outputDim"),r.embeddingsInitializer=Ht(e.embeddingsInitializer||r.DEFAULT_EMBEDDINGS_INITIALIZER),r.embeddingsRegularizer=Gt(e.embeddingsRegularizer),r.activityRegularizer=Gt(e.activityRegularizer),r.embeddingsConstraint=Cn(e.embeddingsConstraint),r.maskZero=e.maskZero,r.supportsMasking=e.maskZero,r.inputLength=e.inputLength,r}return ue(n,t),n.prototype.build=function(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0},n.prototype.warnOnIncompatibleInputShape=function(e){},n.prototype.computeMask=function(e,r){var i=this;return ee(function(){return i.maskZero?(e=Qe(e),nc(e,dt(e))):null})},n.prototype.computeOutputShape=function(e){if(e=Pt(e),this.inputLength==null)return e.concat([this.outputDim]);var r=Ft(this.inputLength);if(r.length!==e.length-1)throw new Y('"inputLength" is '+this.inputLength+", but received input shape has shape "+e);for(var i=0,o=0;o<r.length;++o){var a=r[o],s=e[o+1];if(a!=null&&s!=null&&a!==s)throw new Y('"inputLength" is '+this.inputLength+", but received input shape has shape "+e);a==null&&(r[i]=s),i++}return[e[0]].concat(r,[this.outputDim])},n.prototype.call=function(e,r){var i=this;return ee(function(){i.invokeCallHook(e,r);var o=Qe(e);return o.dtype!=="int32"&&(o=bp(o,"int32")),o3(i.embeddings.read(),o.as1D()).reshape(Pt(i.computeOutputShape(o.shape)))})},n.prototype.getConfig=function(){var e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:bt(this.embeddingsInitializer),embeddingsRegularizer:rt(this.embeddingsRegularizer),activityRegularizer:rt(this.activityRegularizer),embeddingsConstraint:Ot(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},r=t.prototype.getConfig.call(this);return Object.assign(e,r),e},n.className="Embedding",n}(pt);he.registerClass(s4);var _u=function(t){function n(e){var r=t.call(this,e||{})||this;return r.supportsMasking=!0,r}return ue(n,t),n.prototype.mergeFunction=function(e){throw new Je},n.prototype.computeElementwiseOpOutputShape=function(e,r){if(e==null||r==null)return null;if(e.length<r.length)return this.computeElementwiseOpOutputShape(r,e);if(r.length===0)return e;for(var i=e.slice(0,e.length-r.length),o=0;o<r.length;++o){var a=e[e.length-r.length+o],s=r[o];if(a==null||s==null||a<0||s<0)i.push(null);else if(a===1)i.push(s);else if(s===1)i.push(a);else{if(a!==s)throw new Y("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(r));i.push(a)}}return i},n.prototype.build=function(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[Pt(e)]),(e=e).length<2)throw new Y("A merge layer should be called on an Array of at least 2 inputs. Got "+e.length+" input(s).");for(var r=[],i=0,o=e;i<o.length;i++)(u=o[i])!=null&&u[0]!==null&&r.push(u[0]);if((r=es(r)).length>1)throw new Y("Can not merge tensors with different batch sizes. Got tensors with shapes: "+JSON.stringify(e)+".");for(var a=e[0]==null?null:e[0].slice(1),s=1;s<e.length;++s){var u=e[s]==null?null:e[s].slice(1);a=this.computeElementwiseOpOutputShape(a,u)}var l=e.map(function(c){return c.length});e.indexOf(null)===-1&&es(l).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0},n.prototype.call=function(e,r){var i=this;return ee(function(){if(e=e,i.reshapeRequired){var o=[],a=e.map(function(S){return S.rank});if(a.indexOf(null)===-1){for(var s=ls(a),u=0,l=e;u<l.length;u++){for(var c=(v=l[u]).rank,d=0;d<s-c;++d)v=wp(v,1);o.push(v)}return i.mergeFunction(o)}for(var f=!1,p=0,h=e;p<h.length;p++){var v;if((c=(v=h[p]).rank)==null){var g=v.shape,m=g[0],y=g.slice(1).concat([m]),b=v.reshape([m].concat(ts(g.slice(1))));b=(b=Zt(b,[1,0])).reshape(y),o.push(b),f=!0}else if(c>1){var w=Wi(1,c).concat([0]);o.push(Zt(v,w)),f=!0}else o.push(v)}var x=i.mergeFunction(o),C=x.rank;if(f)if(C==null){var E=x.shape;y=[m=E[E.length-1]].concat(E.slice(0,E.length-1)),x=Zt(x.reshape([-1,m]),[1,0]).reshape(y)}else C>1&&(w=[C-1].concat(Wi(0,C-1)),x=Zt(x,w));return x}return i.mergeFunction(e)})},n.prototype.computeOutputShape=function(e){var r;r=(e=e)[0]==null?null:e[0].slice(1);for(var i=1;i<e.length;++i){var o=e[i]==null?null:e[i].slice(1);r=this.computeElementwiseOpOutputShape(r,o)}for(var a=[],s=0,u=e;s<u.length;s++)(o=u[s])!=null&&o[0]!==null&&a.push(o[0]);return r=(a=es(a)).length===1?a.concat(r):[null].concat(r)},n.prototype.computeMask=function(e,r){return ee(function(){if(r==null)return null;if(!Array.isArray(r))throw new Y("`mask` should be an Array");if(!Array.isArray(e))throw new Y("`inputs` should be an Array");if(r.length!==e.length)throw new Y("The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths ("+e.length+" vs "+r.length+")");if(r.every(function(a){return a==null}))return null;for(var i=(r=r.map(function(a){return a==null?a:Hr(a,0)}))[0],o=1;o<r.length-1;++o)i=ua(i,r[o]);return i})},n}(pt),u4=function(t){function n(e){return t.call(this,e)||this}return ue(n,t),n.prototype.mergeFunction=function(e){return ee(function(){for(var r=e[0].clone(),i=1;i<e.length;++i)r=at(r,e[i]);return r})},n.className="Add",n}(_u);he.registerClass(u4);var l4=function(t){function n(e){return t.call(this,e)||this}return ue(n,t),n.prototype.mergeFunction=function(e){return ee(function(){for(var r=e[0].clone(),i=1;i<e.length;++i)r=He(r,e[i]);return r})},n.className="Multiply",n}(_u);he.registerClass(l4);var c4=function(t){function n(e){return t.call(this,e)||this}return ue(n,t),n.prototype.mergeFunction=function(e){return ee(function(){for(var r=e[0].clone(),i=1;i<e.length;++i)r=at(r,e[i]);return He(1/e.length,r)})},n.className="Average",n}(_u);he.registerClass(c4);var d4=function(t){function n(e){return t.call(this,e)||this}return ue(n,t),n.prototype.mergeFunction=function(e){return ee(function(){for(var r=e[0],i=1;i<e.length;++i)r=Ro(r,e[i]);return r})},n.className="Maximum",n}(_u);he.registerClass(d4);var f4=function(t){function n(e){return t.call(this,e)||this}return ue(n,t),n.prototype.mergeFunction=function(e){return ee(function(){for(var r=e[0],i=1;i<e.length;++i)r=kc(r,e[i]);return r})},n.className="Minimum",n}(_u);he.registerClass(f4);var p4=function(t){function n(e){var r=t.call(this,e)||this;return r.DEFAULT_AXIS=-1,e==null&&(e={}),r.axis=e.axis==null?r.DEFAULT_AXIS:e.axis,r.supportsMasking=!0,r.reshapeRequired=!1,r}return ue(n,t),n.prototype.build=function(e){if(!Array.isArray(e)||!Array.isArray(e[0])||e.length===1)throw new Y("A `Concatenate` layer should be called on a list of at least 2 inputs");for(var r=!0,i=0,o=e=e;i<o.length;i++)if((f=o[i])!=null){r=!1;break}if(!r){for(var a=[],s=0;s<e.length;++s){var u=e[s].slice();u.splice(this.axis,1);for(var l=!1,c=0,d=a;c<d.length;c++){var f=d[c];if(Fe.arraysEqual(f,u)){l=!0;break}}l||a.push(u)}if(a.length>1)throw new Y("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}},n.prototype.mergeFunction=function(e){var r=this;return ee(function(){return i3(e,r.axis)})},n.prototype.computeOutputShape=function(e){if(!Array.isArray(e)||!Array.isArray(e[0]))throw new Y("A `Concatenate` layer should be called on a list of inputs.");for(var r=e,i=r[0].slice(),o=this.axis<0?i.length+this.axis:this.axis,a=0,s=r.slice(1);a<s.length;a++){var u=s[a];if(i[o]==null||u[o]==null){i[o]=null;break}i[o]+=u[o]}return i},n.prototype.computeMask=function(e,r){var i=this;if(r==null)return null;if(!Array.isArray(r))throw new Y("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new Y("`inputs` should be an array for Concatenate");if(r.length!==e.length)throw new Y("Mismatch in the length of mask ("+r.length+") and the legnth of inputs ("+e.length+")");return ee(function(){var o=!0;if(r.forEach(function(l){l==null||(o=!1)}),o)return null;for(var a=[],s=0;s<e.length;++s)r[s]==null?a.push(ti(e[s]).asType("bool")):r[s].rank<e[s].rank?a.push(Hr(r[s],-1)):a.push(r[s]);var u=lr(a,i.axis);return qg(u,-1,!1)})},n.prototype.getConfig=function(){var e={axis:this.axis},r=t.prototype.getConfig.call(this);return Object.assign(e,r),e},n.className="Concatenate",n}(_u);function cd(t,n){for(;t<0;)t+=n;return t}function yY(t,n,e){if(t.shape.length>3||n.shape.length>3)throw new Je("batchDot is not implemented for tensors of 4D or higher rank yet");if(Fe.assert(t.shape.length>=2,function(){return"batchDot requires the rank of x to be >= 2, but got "+t.shape.length}),Fe.assert(t.shape.length>=2,function(){return"batchDot requires the rank of y to be >= 2, but got "+n.shape.length}),typeof e=="number"&&(e=[e,e]),t.dtype==="complex64"||n.dtype==="complex64")throw new Je("batchDot is not implemented for complex64-type Tensors yet.");var r=t.shape.length,i=n.shape.length;e==null&&(e=[r-1,i-2]);var o=e;return ee(function(){var a,s;if(r>i){a=r-i;for(var u=[],l=0;l<a;++l)u.push(1);n=n.reshape(n.shape.concat(u))}else if(i>r){for(a=i-r,u=[],l=0;l<a;++l)u.push(1);t=t.reshape(t.shape.concat(u))}else a=0;if(t.shape.length===2&&n.shape.length===2)s=o[0]===o[1]?t.mulStrict(n).sum(o[0]):t.transpose([1,0]).mulStrict(n).sum(o[1]);else{var c=o[0]!==t.shape.length-1,d=o[1]===n.shape.length-1;s=t.matMul(n,c,d)}if(a>0){var f=void 0,p=[];for(l=f=r>i?r+i-3:r-1;l<f+a;++l)p.push(l);s=s.squeeze(p)}return s.shape.length===1&&(s=s.expandDims(1)),s})}he.registerClass(p4);var h4=function(t){function n(e){var r=t.call(this,e)||this;return r.axes=e.axes,r.normalize=e.normalize!=null&&e.normalize,r.supportsMasking=!0,r.reshapeRequired=!1,r}return ue(n,t),n.prototype.build=function(e){Fe.assert(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),function(){return"A `Dot` layer should be called on a list of exactly 2 inputs."});var r=e[0],i=e[1];if(r.length>3||i.length>3)throw new Je("Dot layer does not support tensors of 4D or higher rank yet.");var o=this.interpretAxes(r,i);if(r[o[0]]!==i[o[1]])throw new Y("Dimension incompatibility: "+r[o[0]]+" !== "+i[o[1]])},n.prototype.mergeFunction=function(e){if(e.length!==2)throw new Y("A `Dot` layer must be called on exactly 2 inputs, but received "+e.length+" input(s).");var r,i=e[0],o=e[1];return r=Array.isArray(this.axes)?this.axes.map(function(a,s){return cd(a,e[s].shape.length)}):[cd(this.axes,i.shape.length),cd(this.axes,o.shape.length)],this.normalize&&(i=xv(i,r[0]),o=xv(o,r[1])),yY(i,o,r)},n.prototype.interpretAxes=function(e,r){return Array.isArray(this.axes)?this.axes:[cd(this.axes,e.length),cd(this.axes,r.length)]},n.prototype.computeOutputShape=function(e){Fe.assert(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),function(){return"A `Dot` layer should be called on a list of exactly 2 inputs."});var r=e[0].slice(),i=e[1].slice();if(r.length>3||i.length>3)throw new Je("Dot layer does not support tensors of 4D or higher rank yet.");var o=this.interpretAxes(r,i);r.splice(o[0],1),i.splice(o[1],1),i.splice(0,1);var a=r.concat(i);return a.length===1&&a.push(1),a},n.prototype.computeMask=function(e,r){return null},n.prototype.getConfig=function(){var e={axes:this.axes,normalize:this.normalize},r=t.prototype.getConfig.call(this);return Object.assign(e,r),e},n.className="Dot",n}(_u);he.registerClass(h4);var m4=function(t){function n(e){var r=t.call(this,e)||this;return r.supportsMasking=!0,r.stddev=e.stddev,r}return ue(n,t),n.prototype.computeOutputShape=function(e){return e},n.prototype.getConfig=function(){var e=t.prototype.getConfig.call(this),r={stddev:this.stddev};return Object.assign(r,e),r},n.prototype.call=function(e,r){var i=this;return ee(function(){i.invokeCallHook(e,r);var o=Qe(e);return sc(function(){return iy(o.shape,0,i.stddev).add(o)},function(){return o},r.training||!1)})},n.className="GaussianNoise",n}(pt);he.registerClass(m4);var v4=function(t){function n(e){var r=t.call(this,e)||this;return r.supportsMasking=!0,r.rate=e.rate,r}return ue(n,t),n.prototype.computeOutputShape=function(e){return e},n.prototype.getConfig=function(){var e=t.prototype.getConfig.call(this),r={rate:this.rate};return Object.assign(r,e),r},n.prototype.call=function(e,r){var i=this;return ee(function(){i.invokeCallHook(e,r);var o=Qe(e);return i.rate>0&&i.rate<1?sc(function(){var a=Math.sqrt(i.rate/(1-i.rate));return o.mul(iy(o.shape,1,a))},function(){return o},r.training||!1):o})},n.className="GaussianDropout",n}(pt);he.registerClass(v4);var g4=function(t){function n(e){var r=t.call(this,e)||this;return r.supportsMasking=!0,r.rate=e.rate,r.noiseShape=e.noiseShape,r}return ue(n,t),n.prototype._getNoiseShape=function(e){return this.noiseShape||Qe(e).shape},n.prototype.computeOutputShape=function(e){return e},n.prototype.getConfig=function(){var e=t.prototype.getConfig.call(this),r={rate:this.rate};return Object.assign(r,e),r},n.prototype.call=function(e,r){var i=this;return ee(function(){if(i.rate<1&&i.rate>0){var o=i._getNoiseShape(e);return sc(function(){var a=Qe(e),s=-1.7580993408473766,u=cp(Cu(o),i.rate);u=bp(u,"float32");var l=Math.pow((1-i.rate)*(1+i.rate*Math.pow(s,2)),-.5),c=-l*s*i.rate;return a.mul(u).add(u.add(-1).mul(s)).mul(l).add(c)},function(){return Qe(e)},r.training||!1)}return e})},n.className="AlphaDropout",n}(pt);function $f(t,n,e,r,i,o){var a;if(o===void 0&&(o=.001),t.rank===2)a=UE(t,n,e,r,i,o);else if(t.rank===3)a=WE(t,n,e,r,i,o);else{if(t.rank!==4)throw new Je("batchNormalization is not implemented for array of rank "+t.rank+" yet");a=HE(t,n,e,r,i,o)}return a}function bY(t,n,e,r,i){return i===void 0&&(i=.001),ee(function(){var o=pp(t,r),a=o.mean,s=o.variance;return[$f(t,a,s,e,n,i),a,s]})}function wY(t,n,e,r,i){return i===void 0&&(i=.001),ee(function(){for(var o=pp(t,r),a=o.mean,s=o.variance,u=[],l=0,c=Wi(0,t.rank);l<c.length;l++){var d=c[l];r.indexOf(d)!==-1?u.push(1):u.push(t.shape[d])}var f=a.reshape(u),p=s.reshape(u),h=n==null?null:n.reshape(u),v=e==null?null:e.reshape(u);return[$f(t,f,p,v,h,i),a,s]})}function xY(t,n,e,r,i){return i===void 0&&(i=.001),Fe.arraysEqual(r.slice().sort(),Wi(0,t.rank-1))?bY(t,n,e,r,i):wY(t,n,e,r,i)}he.registerClass(g4);var y4=function(t){function n(e){var r=this;return e==null&&(e={}),(r=t.call(this,e)||this).supportsMasking=!0,r.axis=e.axis==null?-1:e.axis,r.momentum=e.momentum==null?.99:e.momentum,r.epsilon=e.epsilon==null?.001:e.epsilon,r.center=e.center==null||e.center,r.scale=e.scale==null||e.scale,r.betaInitializer=Ht(e.betaInitializer||"zeros"),r.gammaInitializer=Ht(e.gammaInitializer||"ones"),r.movingMeanInitializer=Ht(e.movingMeanInitializer||"zeros"),r.movingVarianceInitializer=Ht(e.movingVarianceInitializer||"ones"),r.betaConstraint=Cn(e.betaConstraint),r.gammaConstraint=Cn(e.gammaConstraint),r.betaRegularizer=Gt(e.betaRegularizer),r.gammaRegularizer=Gt(e.gammaRegularizer),r}return ue(n,t),n.prototype.build=function(e){var r;e=Pt(e);var i=this.axis>=0?this.axis:this.axis+e.length,o=e[i];if(o==null)throw new Y("Axis "+i+" of input tensor should have a defined dimension but the layer received an input with shape "+JSON.stringify(e)+".");this.inputSpec=[new Fn({ndim:e.length,axes:(r={},r[i]=o,r)})];var a=[o];this.scale&&(this.gamma=this.addWeight("gamma",a,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",a,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",a,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",a,null,this.movingVarianceInitializer,null,!1),this.built=!0},n.prototype.call=function(e,r){var i=this;return ee(function(){var o=r.training!=null&&r.training,a=Qe(e),s=a.shape,u=s.length,l=Wi(0,u),c=i.axis>=0?i.axis:i.axis+u;l.splice(c,1);var d=pu(1,u);d[c]=s[c];var f=l.slice();f.sort();var p=!Fe.arraysEqual(f,Wi(0,u).slice(0,u-1));if(!o)return function(){if(p){var b=i.movingMean.read().reshape(d),w=i.movingVariance.read().reshape(d),x=i.center?i.beta.read().reshape(d):null,C=i.scale?i.gamma.read().reshape(d):null;return $f(a,b,w,x,C,i.epsilon)}return $f(a,i.movingMean.read(),i.movingVariance.read(),i.beta==null?null:i.beta.read(),i.gamma==null?null:i.gamma.read(),i.epsilon)}();var h=xY(a,i.gamma.read(),i.beta.read(),l,i.epsilon),v=h[0],g=h[1],m=h[2],y=function(b,w,x){ee(function(){var C=1-x,E=b.read(),S=E.sub(w).mul(C);b.write(E.sub(S))})};return y(i.movingMean,g,i.momentum),y(i.movingVariance,m,i.momentum),v})},n.prototype.getConfig=function(){var e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:bt(this.betaInitializer),gammaInitializer:bt(this.gammaInitializer),movingMeanInitializer:bt(this.movingMeanInitializer),movingVarianceInitializer:bt(this.movingVarianceInitializer),betaRegularizer:rt(this.betaRegularizer),gammaRegularizer:rt(this.gammaRegularizer),betaConstraint:Ot(this.betaConstraint),gammaConstraint:Ot(this.gammaConstraint)},r=t.prototype.getConfig.call(this);return Object.assign(e,r),e},n.className="BatchNormalization",n}(pt);he.registerClass(y4);var b4=function(t){function n(e){var r=this;if(e==null&&(e={}),(r=t.call(this,e)||this).axis=e.axis==null?-1:e.axis,typeof r.axis=="number"){if(!Number.isInteger(r.axis))throw new Error("Expected axis to be an integer, but received "+r.axis)}else{if(!Array.isArray(r.axis))throw new Error("Expected axis to be an integer or an array of integers, but received "+JSON.stringify(r.axis));for(var i=0,o=r.axis;i<o.length;i++){var a=o[i];if(!Number.isInteger(a))throw new Error("Expected axis to be an array of integers, but received "+JSON.stringify(r.axis))}}return r.epsilon=e.epsilon==null?.001:e.epsilon,r.center=e.center==null||e.center,r.scale=e.scale==null||e.scale,r.betaInitializer=Ht(e.betaInitializer||"zeros"),r.gammaInitializer=Ht(e.gammaInitializer||"ones"),r.betaRegularizer=Gt(e.betaRegularizer),r.gammaRegularizer=Gt(e.gammaRegularizer),r.supportsMasking=!0,r}return ue(n,t),n.prototype.build=function(e){var r=(e=Pt(e)).length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(var i=0;i<this.axis.length;++i)this.axis[i]<0&&(this.axis[i]+=r);for(var o=0,a=this.axis;o<a.length;o++){var s=a[o];if(s<0||s>=r)throw new Error("Invalid axis: "+s)}if(this.axis.length!==es(this.axis).length)throw new Error("Found duplicate axes in: "+this.axis);var u=this.axis.map(function(l){return e[l]});this.scale?this.gamma=this.addWeight("gamma",u,"float32",this.gammaInitializer,this.gammaRegularizer,!0):this.gamma=null,this.center?this.beta=this.addWeight("beta",u,"float32",this.betaInitializer,this.betaRegularizer,!0):this.beta=null,this.built=!0},n.prototype.call=function(e,r){var i=this,o=Qe(e),a=o.shape,s=a.length;return ee(function(){for(var u=pp(o,i.axis,!0),l=u.mean,c=u.variance,d=pu(1,s),f=0,p=i.axis;f<p.length;f++){var h=p[f];d[h]=a[h]}for(var v=function(x){return x!=null&&x.shape.length!==s&&i.axis!==[s-1]?x.reshape(d):x},g=v(i.gamma.read()),m=v(i.beta.read()),y=[],b=[],w=0;w<s;++w)i.axis.indexOf(w)!==-1?(y.push(a[w]),b.push(1)):(y.push(1),b.push(a[w]));return l=l.tile(y),c=c.tile(y),g=g.tile(b),m=m.tile(b),$f(o,l,c,m,g,i.epsilon)})},n.prototype.getConfig=function(){var e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:bt(this.betaInitializer),gammaInitializer:bt(this.gammaInitializer),betaRegularizer:rt(this.betaRegularizer),gammaRegularizer:rt(this.gammaRegularizer)},r=t.prototype.getConfig.call(this);return Object.assign(e,r),e},n.className="LayerNormalization",n}(pt);function SY(t,n,e){return ee(function(){if(t.rank!==4)throw new Y("temporalPadding expects input tensor to be 4-D, but received a "+t.rank+"-D tensor.");if(n==null&&(n=[[1,1],[1,1]]),n.length!==2||n[0].length!==2||n[1].length!==2)throw new Y("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(e==null&&(e=Ui()),e!=="channelsLast"&&e!=="channelsFirst")throw new Y("Unknown data format: "+e+". Supported data formats are 'channelsLast' and 'channelsFirst.");var r;return r=e==="channelsFirst"?[[0,0],[0,0],n[0],n[1]]:[[0,0],n[0],n[1],[0,0]],ys(t,r)})}he.registerClass(b4);var w4=function(t){function n(e){var r=this;if(e==null&&(e={}),(r=t.call(this,e)||this).dataFormat=e.dataFormat==null?Ui():e.dataFormat,e.padding==null)r.padding=[[1,1],[1,1]];else if(typeof e.padding=="number")r.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,e.padding.length!==2)throw new Y("ZeroPadding2D expects padding to be a length-2 array, but received a length-"+e.padding.length+" array.");var i=void 0,o=void 0;if(typeof e.padding[0]=="number")i=[e.padding[0],e.padding[0]],o=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,e.padding[0].length!==2)throw new Y("ZeroPadding2D expects height padding to be a length-2 array, but received a length-"+e.padding[0].length+" array.");if(i=e.padding[0],e.padding[1].length!==2)throw new Y("ZeroPadding2D expects width padding to be a length-2 array, but received a length-"+e.padding[1].length+" array.");o=e.padding[1]}r.padding=[i,o]}return r.inputSpec=[new Fn({ndim:4})],r}return ue(n,t),n.prototype.computeOutputShape=function(e){var r,i;return e=Pt(e),this.dataFormat==="channelsFirst"?(r=e[2]!=null&&e[2]>=0?e[2]+this.padding[0][0]+this.padding[0][1]:null,i=e[3]!=null&&e[3]>=0?e[3]+this.padding[1][0]+this.padding[1][1]:null,[e[0],e[1],r,i]):(r=e[1]!=null&&e[1]>=0?e[1]+this.padding[0][0]+this.padding[0][1]:null,i=e[2]!=null&&e[2]>=0?e[2]+this.padding[1][0]+this.padding[1][1]:null,[e[0],r,i,e[3]])},n.prototype.call=function(e,r){var i=this;return ee(function(){return SY(Qe(e),i.padding,i.dataFormat)})},n.prototype.getConfig=function(){var e={padding:this.padding,dataFormat:this.dataFormat},r=t.prototype.getConfig.call(this);return Object.assign(e,r),e},n.className="ZeroPadding2D",n}(pt);function fy(t,n,e,r,i,o){return ee(function(){var a;Tn(i),ZL(o),Ci(r),e==null&&(e=[1,1]),r==null&&(r="valid"),i==null&&(i=Ui()),o==null&&(o="max"),t=UC(t,i);var s=r==="same"?"same":"valid";return a=o==="max"?$g(t,n,e,s):Ug(t,n,e,s),i==="channelsFirst"&&(a=Zt(a,[0,3,1,2])),a})}function x4(t,n,e,r,i,o){return ee(function(){var a;Tn(i),ZL(o),Ci(r),e==null&&(e=[1,1,1]),r==null&&(r="valid"),i==null&&(i=Ui()),o==null&&(o="max"),t=W3(t,i);var s=r==="same"?"same":"valid";return a=o==="max"?Wg(t,n,e,s):Hg(t,n,e,s),i==="channelsFirst"&&(a=Zt(a,[0,4,1,2,3])),a})}he.registerClass(w4);var S4=function(t){function n(e){var r=this;if(e.poolSize==null&&(e.poolSize=2),r=t.call(this,e)||this,typeof e.poolSize=="number")r.poolSize=[e.poolSize];else{if(!Array.isArray(e.poolSize)||e.poolSize.length!==1||typeof e.poolSize[0]!="number")throw new Y("poolSize for 1D convolutional layer must be a number or an Array of a single number, but received "+JSON.stringify(e.poolSize));r.poolSize=e.poolSize}if(wr(r.poolSize,"poolSize"),e.strides==null)r.strides=r.poolSize;else if(typeof e.strides=="number")r.strides=[e.strides];else{if(!Array.isArray(e.strides)||e.strides.length!==1||typeof e.strides[0]!="number")throw new Y("strides for 1D convolutional layer must be a number or an Array of a single number, but received "+JSON.stringify(e.strides));r.strides=e.strides}return wr(r.strides,"strides"),r.padding=e.padding==null?"valid":e.padding,Ci(r.padding),r.inputSpec=[new Fn({ndim:3})],r}return ue(n,t),n.prototype.computeOutputShape=function(e){var r=Ko((e=Pt(e))[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],r,e[2]]},n.prototype.call=function(e,r){var i=this;return ee(function(){i.invokeCallHook(e,r),e=wp(Qe(e),2);var o=i.poolingFunction(Qe(e),[i.poolSize[0],1],[i.strides[0],1],i.padding,"channelsLast");return ip(o,[2])})},n.prototype.getConfig=function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},r=t.prototype.getConfig.call(this);return Object.assign(e,r),e},n}(pt),E4=function(t){function n(e){return t.call(this,e)||this}return ue(n,t),n.prototype.poolingFunction=function(e,r,i,o,a){return Tn(a),Ci(o),fy(e,r,i,o,a,"max")},n.className="MaxPooling1D",n}(S4);he.registerClass(E4);var C4=function(t){function n(e){return t.call(this,e)||this}return ue(n,t),n.prototype.poolingFunction=function(e,r,i,o,a){return Tn(a),Ci(o),fy(e,r,i,o,a,"avg")},n.className="AveragePooling1D",n}(S4);he.registerClass(C4);var R4=function(t){function n(e){var r=this;if(e.poolSize==null&&(e.poolSize=[2,2]),(r=t.call(this,e)||this).poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],e.strides==null)r.strides=r.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==2)throw new Y("If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length "+e.strides.length+".");r.strides=e.strides}else r.strides=[e.strides,e.strides];return wr(r.poolSize,"poolSize"),wr(r.strides,"strides"),r.padding=e.padding==null?"valid":e.padding,r.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Tn(r.dataFormat),Ci(r.padding),r.inputSpec=[new Fn({ndim:4})],r}return ue(n,t),n.prototype.computeOutputShape=function(e){e=Pt(e);var r=this.dataFormat==="channelsFirst"?e[2]:e[1],i=this.dataFormat==="channelsFirst"?e[3]:e[2];return r=Ko(r,this.poolSize[0],this.padding,this.strides[0]),i=Ko(i,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[e[0],e[1],r,i]:[e[0],r,i,e[3]]},n.prototype.call=function(e,r){var i=this;return ee(function(){return i.invokeCallHook(e,r),i.poolingFunction(Qe(e),i.poolSize,i.strides,i.padding,i.dataFormat)})},n.prototype.getConfig=function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},r=t.prototype.getConfig.call(this);return Object.assign(e,r),e},n}(pt),T4=function(t){function n(e){return t.call(this,e)||this}return ue(n,t),n.prototype.poolingFunction=function(e,r,i,o,a){return Tn(a),Ci(o),fy(e,r,i,o,a,"max")},n.className="MaxPooling2D",n}(R4);he.registerClass(T4);var N4=function(t){function n(e){return t.call(this,e)||this}return ue(n,t),n.prototype.poolingFunction=function(e,r,i,o,a){return Tn(a),Ci(o),fy(e,r,i,o,a,"avg")},n.className="AveragePooling2D",n}(R4);he.registerClass(N4);var k4=function(t){function n(e){var r=this;if(e.poolSize==null&&(e.poolSize=[2,2,2]),(r=t.call(this,e)||this).poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],e.strides==null)r.strides=r.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==3)throw new Y("If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length "+e.strides.length+".");r.strides=e.strides}else r.strides=[e.strides,e.strides,e.strides];return wr(r.poolSize,"poolSize"),wr(r.strides,"strides"),r.padding=e.padding==null?"valid":e.padding,r.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Tn(r.dataFormat),Ci(r.padding),r.inputSpec=[new Fn({ndim:5})],r}return ue(n,t),n.prototype.computeOutputShape=function(e){e=Pt(e);var r=this.dataFormat==="channelsFirst"?e[2]:e[1],i=this.dataFormat==="channelsFirst"?e[3]:e[2],o=this.dataFormat==="channelsFirst"?e[4]:e[3];return r=Ko(r,this.poolSize[0],this.padding,this.strides[0]),i=Ko(i,this.poolSize[1],this.padding,this.strides[1]),o=Ko(o,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[e[0],e[1],r,i,o]:[e[0],r,i,o,e[4]]},n.prototype.call=function(e,r){var i=this;return ee(function(){return i.invokeCallHook(e,r),i.poolingFunction(Qe(e),i.poolSize,i.strides,i.padding,i.dataFormat)})},n.prototype.getConfig=function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},r=t.prototype.getConfig.call(this);return Object.assign(e,r),e},n}(pt),I4=function(t){function n(e){return t.call(this,e)||this}return ue(n,t),n.prototype.poolingFunction=function(e,r,i,o,a){return Tn(a),Ci(o),x4(e,r,i,o,a,"max")},n.className="MaxPooling3D",n}(k4);he.registerClass(I4);var _4=function(t){function n(e){return t.call(this,e)||this}return ue(n,t),n.prototype.poolingFunction=function(e,r,i,o,a){return Tn(a),Ci(o),x4(e,r,i,o,a,"avg")},n.className="AveragePooling3D",n}(k4);he.registerClass(_4);var A4=function(t){function n(e){var r=t.call(this,e)||this;return r.inputSpec=[new Fn({ndim:3})],r}return ue(n,t),n.prototype.computeOutputShape=function(e){return[e[0],e[2]]},n.prototype.call=function(e,r){throw new Je},n}(pt),O4=function(t){function n(e){return t.call(this,e||{})||this}return ue(n,t),n.prototype.call=function(e,r){return ee(function(){var i=Qe(e);return gn(i,1)})},n.className="GlobalAveragePooling1D",n}(A4);he.registerClass(O4);var D4=function(t){function n(e){return t.call(this,e||{})||this}return ue(n,t),n.prototype.call=function(e,r){return ee(function(){var i=Qe(e);return us(i,1)})},n.className="GlobalMaxPooling1D",n}(A4);he.registerClass(D4);var M4=function(t){function n(e){var r=t.call(this,e)||this;return r.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Tn(r.dataFormat),r.inputSpec=[new Fn({ndim:4})],r}return ue(n,t),n.prototype.computeOutputShape=function(e){return e=e,this.dataFormat==="channelsLast"?[e[0],e[3]]:[e[0],e[1]]},n.prototype.call=function(e,r){throw new Je},n.prototype.getConfig=function(){var e={dataFormat:this.dataFormat},r=t.prototype.getConfig.call(this);return Object.assign(e,r),e},n}(pt),P4=function(t){function n(){return t!==null&&t.apply(this,arguments)||this}return ue(n,t),n.prototype.call=function(e,r){var i=this;return ee(function(){var o=Qe(e);return i.dataFormat==="channelsLast"?gn(o,[1,2]):gn(o,[2,3])})},n.className="GlobalAveragePooling2D",n}(M4);he.registerClass(P4);var L4=function(t){function n(){return t!==null&&t.apply(this,arguments)||this}return ue(n,t),n.prototype.call=function(e,r){var i=this;return ee(function(){var o=Qe(e);return i.dataFormat==="channelsLast"?us(o,[1,2]):us(o,[2,3])})},n.className="GlobalMaxPooling2D",n}(M4);function F4(t,n,e,r){if(Array.isArray(t)){if(n!=null||e!=null)throw new Y("When inputs is an array, neither initialState or constants should be provided");r!=null&&(e=t.slice(t.length-r,t.length),t=t.slice(0,t.length-r)),t.length>1&&(n=t.slice(1,t.length)),t=t[0]}function i(o){return o==null||Array.isArray(o)?o:[o]}return{inputs:t,initialState:n=i(n),constants:e=i(e)}}function z4(t,n,e,r,i,o,a,s){return r===void 0&&(r=!1),a===void 0&&(a=!1),s===void 0&&(s=!1),ee(function(){var u=n.shape.length;if(u<3)throw new Y("Input should be at least 3D, but is "+u+"D.");var l=[1,0].concat(Wi(2,u));if(n=Zt(n,l),o!=null)throw new Je("The rnn() functoin of the deeplearn.js backend does not support constants yet.");a&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),i!=null&&((i=i.asType("bool").asType("float32")).rank===u-1&&(i=Hr(i,-1)),i=Zt(i,l)),r&&(n=xo(n,0),i!=null&&(i=xo(i,0)));var c,d,f=[],p=e,h=n.shape[0],v=du(n);i!=null&&(d=du(i));for(var g,m=function(b){var w=v[b],x=ee(function(){return t(w,p)});if(i==null)c=x[0],p=x[1];else{var C=ee(function(){var E=d[b],S=ti(E).sub(E);return{output:x[0].mul(E).addStrict(p[0].mul(S)),newStates:p.map(function(N,k){return x[1][k].mul(E).addStrict(N.mul(S))})}});c=C.output,p=C.newStates}s&&f.push(c)},y=0;y<h;++y)m(y);return s&&(g=$i(f,1)),[c,g,p]})}he.registerClass(L4);var Au=function(t){function n(e){var r,i=t.call(this,e)||this;if(e.cell==null)throw new Y("cell property is missing for the constructor of RNN.");if((r=Array.isArray(e.cell)?new KC({cells:e.cell}):e.cell).stateSize==null)throw new Y("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");return i.cell=r,i.returnSequences=e.returnSequences!=null&&e.returnSequences,i.returnState=e.returnState!=null&&e.returnState,i.goBackwards=e.goBackwards!=null&&e.goBackwards,i._stateful=e.stateful!=null&&e.stateful,i.unroll=e.unroll!=null&&e.unroll,i.supportsMasking=!0,i.inputSpec=[new Fn({ndim:3})],i.stateSpec=null,i.states_=null,i.numConstants=null,i.keptStates=[],i}return ue(n,t),n.prototype.getStates=function(){return this.states_==null?Wi(0,Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1).map(function(e){return null}):this.states_},n.prototype.setStates=function(e){this.states_=e},n.prototype.computeOutputShape=function(e){Ow(e)&&(e=e[0]),e=e;var r=this.cell.stateSize;Array.isArray(r)||(r=[r]);var i,o=r[0];if(i=this.returnSequences?[e[0],e[1],o]:[e[0],o],this.returnState){for(var a=[],s=0,u=r;s<u.length;s++){var l=u[s];a.push([e[0],l])}return[i].concat(a)}return i},n.prototype.computeMask=function(e,r){var i=this;return ee(function(){Array.isArray(r)&&(r=r[0]);var o=i.returnSequences?r:null;if(i.returnState){var a=i.states.map(function(s){return null});return[o].concat(a)}return o})},Object.defineProperty(n.prototype,"states",{get:function(){if(this.states_==null){for(var e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,r=[],i=0;i<e;++i)r.push(null);return r}return this.states_},set:function(e){this.states_=e},enumerable:!0,configurable:!0}),n.prototype.build=function(e){if(this.numConstants!=null)throw new Je("Constants support is not implemented in RNN yet.");Ow(e)&&(e=e[0]),e=e;var r=this.stateful?e[0]:null,i=e[e.length-1];this.inputSpec[0]=new Fn({shape:[r,null,i]});var o,a=[e[0]].concat(e.slice(2));if(this.cell.build(a),o=Array.isArray(this.cell.stateSize)?this.cell.stateSize:[this.cell.stateSize],this.stateSpec!=null){if(!Fe.arraysEqual(this.stateSpec.map(function(s){return s.shape[s.shape.length-1]}),o))throw new Y("An initialState was passed that is not compatible with cell.stateSize. Received stateSpec="+this.stateSpec+"; However cell.stateSize is "+this.cell.stateSize)}else this.stateSpec=o.map(function(s){return new Fn({shape:[null,s]})});this.stateful&&this.resetStates()},n.prototype.resetStates=function(e,r){var i=this;r===void 0&&(r=!1),ee(function(){if(!i.stateful)throw new Fs("Cannot call resetStates() on an RNN Layer that is not stateful.");var o=i.inputSpec[0].shape[0];if(o==null)throw new Y("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(i.states_==null)Array.isArray(i.cell.stateSize)?i.states_=i.cell.stateSize.map(function(c){return It([o,c])}):i.states_=[It([o,i.cell.stateSize])];else if(e==null)nt(i.states_),i.keptStates!=null&&(nt(i.keptStates),i.keptStates=[]),Array.isArray(i.cell.stateSize)?i.states_=i.cell.stateSize.map(function(c){return It([o,c])}):i.states_[0]=It([o,i.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==i.states_.length)throw new Y("Layer "+i.name+" expects "+i.states_.length+" state(s), but it received "+e.length+" state value(s). Input received: "+e);r===!0?i.keptStates.push(i.states_.slice()):nt(i.states_);for(var a=0;a<i.states_.length;++a){var s=e[a],u=Array.isArray(i.cell.stateSize)?i.cell.stateSize[a]:i.cell.stateSize,l=[o,u];if(!Fe.arraysEqual(s.shape,l))throw new Y("State "+a+" is incompatible with layer "+i.name+": expected shape="+l+", received shape="+s.shape);i.states_[a]=s}}i.states_=i.states_.map(function(c){return bo(c.clone())})})},n.prototype.apply=function(e,r){var i=r==null?null:r.initialState,o=r==null?null:r.constants;r==null&&(r={});var a=F4(e,i,o,this.numConstants);e=a.inputs,i=a.initialState,o=a.constants;var s=[],u=[];if(i!=null){r.initialState=i,s=s.concat(i),this.stateSpec=[];for(var l=0,c=i;l<c.length;l++){var d=c[l];this.stateSpec.push(new Fn({shape:d.shape}))}u=u.concat(this.stateSpec)}if(o!=null&&(r.constants=o,s=s.concat(o),this.numConstants=o.length),s[0]instanceof Pi){var f=[e].concat(s),p=this.inputSpec.concat(u),h=this.inputSpec;this.inputSpec=p;var v=t.prototype.apply.call(this,f,r);return this.inputSpec=h,v}return t.prototype.apply.call(this,e,r)},n.prototype.call=function(e,r){var i=this;return ee(function(){var o=r==null?null:r.mask,a=r==null?null:r.training,s=r==null?null:r.initialState;e=Qe(e),s==null&&(s=i.stateful?i.states_:i.getInitialState(e));var u=Array.isArray(i.cell.stateSize)?i.cell.stateSize.length:1;if(s.length!==u)throw new Y("RNN Layer has "+u+" state(s) but was passed "+s.length+" initial state(s).");i.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");var l={training:a},c=z4(function(v,g){var m=i.cell.call([v].concat(g),l);return[m[0],m.slice(1)]},e,s,i.goBackwards,o,null,i.unroll,i.returnSequences),d=c[0],f=c[1],p=c[2];i.stateful&&i.resetStates(p,a);var h=i.returnSequences?f:d;return i.returnState?[h].concat(p):h})},n.prototype.getInitialState=function(e){var r=this;return ee(function(){var i=It(e.shape);return i=wp(i=zr(i,[1,2])),Array.isArray(r.cell.stateSize)?r.cell.stateSize.map(function(o){return o>1?_w(i,[1,o]):i}):r.cell.stateSize>1?[_w(i,[1,r.cell.stateSize])]:[i]})},Object.defineProperty(n.prototype,"trainableWeights",{get:function(){return this.trainable?this.cell.trainableWeights:[]},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"nonTrainableWeights",{get:function(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights},enumerable:!0,configurable:!0}),n.prototype.setFastWeightInitDuringBuild=function(e){t.prototype.setFastWeightInitDuringBuild.call(this,e),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(e)},n.prototype.getConfig=function(){var e={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(e.numConstants=this.numConstants);var r=this.cell.getConfig();e.cell={className:this.cell.getClassName(),config:r};var i=t.prototype.getConfig.call(this);return Object.assign(e,i),e},n.fromConfig=function(e,r,i){i===void 0&&(i={});var o=ji(r.cell,i);return new e(Object.assign(r,{cell:o}))},n.className="RNN",n}(pt);he.registerClass(Au);var Ep=function(t){function n(){return t!==null&&t.apply(this,arguments)||this}return ue(n,t),n}(pt),HC=function(t){function n(e){var r=t.call(this,e)||this;return r.DEFAULT_ACTIVATION="tanh",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",r.units=e.units,wr(r.units,"units"),r.activation=cs(e.activation==null?r.DEFAULT_ACTIVATION:e.activation),r.useBias=e.useBias==null||e.useBias,r.kernelInitializer=Ht(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=Ht(e.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=Ht(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelRegularizer=Gt(e.kernelRegularizer),r.recurrentRegularizer=Gt(e.recurrentRegularizer),r.biasRegularizer=Gt(e.biasRegularizer),r.kernelConstraint=Cn(e.kernelConstraint),r.recurrentConstraint=Cn(e.recurrentConstraint),r.biasConstraint=Cn(e.biasConstraint),r.dropout=ac([1,ls([0,e.dropout==null?0:e.dropout])]),r.recurrentDropout=ac([1,ls([0,e.recurrentDropout==null?0:e.recurrentDropout])]),r.stateSize=r.units,r.dropoutMask=null,r.recurrentDropoutMask=null,r}return ue(n,t),n.prototype.build=function(e){e=Pt(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0},n.prototype.call=function(e,r){var i=this;return ee(function(){if((e=e).length!==2)throw new Y("SimpleRNNCell expects 2 input Tensors, got "+e.length+".");var o=e[1];e=e[0];var a,s=r.training!=null&&r.training;0<i.dropout&&i.dropout<1&&i.dropoutMask==null&&(i.dropoutMask=lc(function(){return ti(e)},i.dropout,s)),0<i.recurrentDropout&&i.recurrentDropout<1&&i.recurrentDropoutMask==null&&(i.recurrentDropoutMask=lc(function(){return ti(o)},i.recurrentDropout,s));var u=i.dropoutMask,l=i.recurrentDropoutMask;a=qo(u!=null?He(e,u):e,i.kernel.read()),i.bias!=null&&(a=da(a,i.bias.read())),l!=null&&(o=He(o,l));var c=at(a,qo(o,i.recurrentKernel.read()));return i.activation!=null&&(c=i.activation.apply(c)),[c,c]})},n.prototype.getConfig=function(){var e={units:this.units,activation:ri(this.activation),useBias:this.useBias,kernelInitializer:bt(this.kernelInitializer),recurrentInitializer:bt(this.recurrentInitializer),biasInitializer:bt(this.biasInitializer),kernelRegularizer:rt(this.kernelRegularizer),recurrentRegularizer:rt(this.recurrentRegularizer),biasRegularizer:rt(this.biasRegularizer),activityRegularizer:rt(this.activityRegularizer),kernelConstraint:Ot(this.kernelConstraint),recurrentConstraint:Ot(this.recurrentConstraint),biasConstraint:Ot(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout},r=t.prototype.getConfig.call(this);return Object.assign(e,r),e},n.className="SimpleRNNCell",n}(Ep);he.registerClass(HC);var B4=function(t){function n(e){return e.cell=new HC(e),t.call(this,e)||this}return ue(n,t),n.prototype.call=function(e,r){var i=this;return ee(function(){i.cell.dropoutMask!=null&&(nt(i.cell.dropoutMask),i.cell.dropoutMask=null),i.cell.recurrentDropoutMask!=null&&(nt(i.cell.recurrentDropoutMask),i.cell.recurrentDropoutMask=null);var o=r==null?null:r.mask,a=r==null?null:r.training,s=r==null?null:r.initialState;return t.prototype.call.call(i,e,{mask:o,training:a,initialState:s})})},Object.defineProperty(n.prototype,"units",{get:function(){return this.cell.units},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"activation",{get:function(){return this.cell.activation},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"useBias",{get:function(){return this.cell.useBias},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"kernelInitializer",{get:function(){return this.cell.kernelInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"recurrentInitializer",{get:function(){return this.cell.recurrentInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"biasInitializer",{get:function(){return this.cell.biasInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"kernelRegularizer",{get:function(){return this.cell.kernelRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"recurrentRegularizer",{get:function(){return this.cell.recurrentRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"biasRegularizer",{get:function(){return this.cell.biasRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"kernelConstraint",{get:function(){return this.cell.kernelConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"recurrentConstraint",{get:function(){return this.cell.recurrentConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"biasConstraint",{get:function(){return this.cell.biasConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"dropout",{get:function(){return this.cell.dropout},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"recurrentDropout",{get:function(){return this.cell.recurrentDropout},enumerable:!0,configurable:!0}),n.prototype.getConfig=function(){var e={units:this.units,activation:ri(this.activation),useBias:this.useBias,kernelInitializer:bt(this.kernelInitializer),recurrentInitializer:bt(this.recurrentInitializer),biasInitializer:bt(this.biasInitializer),kernelRegularizer:rt(this.kernelRegularizer),recurrentRegularizer:rt(this.recurrentRegularizer),biasRegularizer:rt(this.biasRegularizer),activityRegularizer:rt(this.activityRegularizer),kernelConstraint:Ot(this.kernelConstraint),recurrentConstraint:Ot(this.recurrentConstraint),biasConstraint:Ot(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout},r=t.prototype.getConfig.call(this);return delete r.cell,Object.assign(e,r),e},n.fromConfig=function(e,r){return new e(r)},n.className="SimpleRNN",n}(Au);he.registerClass(B4);var GC=function(t){function n(e){var r=t.call(this,e)||this;return r.DEFAULT_ACTIVATION="tanh",r.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",r.units=e.units,wr(r.units,"units"),r.activation=cs(e.activation===void 0?r.DEFAULT_ACTIVATION:e.activation),r.recurrentActivation=cs(e.recurrentActivation===void 0?r.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),r.useBias=e.useBias==null||e.useBias,r.kernelInitializer=Ht(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=Ht(e.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=Ht(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelRegularizer=Gt(e.kernelRegularizer),r.recurrentRegularizer=Gt(e.recurrentRegularizer),r.biasRegularizer=Gt(e.biasRegularizer),r.kernelConstraint=Cn(e.kernelConstraint),r.recurrentConstraint=Cn(e.recurrentConstraint),r.biasConstraint=Cn(e.biasConstraint),r.dropout=ac([1,ls([0,e.dropout==null?0:e.dropout])]),r.recurrentDropout=ac([1,ls([0,e.recurrentDropout==null?0:e.recurrentDropout])]),r.implementation=e.implementation,r.stateSize=r.units,r.dropoutMask=null,r.recurrentDropoutMask=null,r}return ue(n,t),n.prototype.build=function(e){var r=(e=Pt(e))[e.length-1];this.kernel=this.addWeight("kernel",[r,3*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,3*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[3*this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0},n.prototype.call=function(e,r){var i=this;return ee(function(){if((e=e).length!==2)throw new Y("GRUCell expects 2 input Tensors (inputs, h, c), got "+e.length+".");var o=r.training!=null&&r.training,a=e[1];e=e[0],0<i.dropout&&i.dropout<1&&i.dropoutMask==null&&(i.dropoutMask=lc(function(){return ti(e)},i.dropout,o,3)),0<i.recurrentDropout&&i.recurrentDropout<1&&i.recurrentDropoutMask==null&&(i.recurrentDropoutMask=lc(function(){return ti(a)},i.recurrentDropout,o,3));var s,u,l,c=i.dropoutMask,d=i.recurrentDropoutMask;0<i.dropout&&i.dropout<1&&(e=He(e,c[0]));var f=qo(e,i.kernel.read());i.useBias&&(f=da(f,i.bias.read())),0<i.recurrentDropout&&i.recurrentDropout<1&&(a=He(a,d[0]));var p=i.recurrentKernel.read(),h=Go(p,[2*i.units,i.units],p.rank-1),v=h[0],g=h[1],m=qo(a,v),y=Go(f,3,f.rank-1),b=y[0],w=y[1],x=y[2],C=Go(m,2,m.rank-1),E=C[0],S=C[1];s=i.recurrentActivation.apply(at(b,E)),u=i.recurrentActivation.apply(at(w,S));var N=qo(He(u,a),g);l=i.activation.apply(at(x,N));var k=at(He(s,a),He(at(1,Tu(s)),l));return[k,k]})},n.prototype.getConfig=function(){var e={units:this.units,activation:ri(this.activation),recurrentActivation:ri(this.recurrentActivation),useBias:this.useBias,kernelInitializer:bt(this.kernelInitializer),recurrentInitializer:bt(this.recurrentInitializer),biasInitializer:bt(this.biasInitializer),kernelRegularizer:rt(this.kernelRegularizer),recurrentRegularizer:rt(this.recurrentRegularizer),biasRegularizer:rt(this.biasRegularizer),activityRegularizer:rt(this.activityRegularizer),kernelConstraint:Ot(this.kernelConstraint),recurrentConstraint:Ot(this.recurrentConstraint),biasConstraint:Ot(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation},r=t.prototype.getConfig.call(this);return Object.assign(e,r),e},n.className="GRUCell",n}(Ep);he.registerClass(GC);var j4=function(t){function n(e){return e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new GC(e),t.call(this,e)||this}return ue(n,t),n.prototype.call=function(e,r){var i=this;return ee(function(){i.cell.dropoutMask!=null&&(nt(i.cell.dropoutMask),i.cell.dropoutMask=null),i.cell.recurrentDropoutMask!=null&&(nt(i.cell.recurrentDropoutMask),i.cell.recurrentDropoutMask=null);var o=r==null?null:r.mask,a=r==null?null:r.training,s=r==null?null:r.initialState;return t.prototype.call.call(i,e,{mask:o,training:a,initialState:s})})},Object.defineProperty(n.prototype,"units",{get:function(){return this.cell.units},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"activation",{get:function(){return this.cell.activation},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"recurrentActivation",{get:function(){return this.cell.recurrentActivation},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"useBias",{get:function(){return this.cell.useBias},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"kernelInitializer",{get:function(){return this.cell.kernelInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"recurrentInitializer",{get:function(){return this.cell.recurrentInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"biasInitializer",{get:function(){return this.cell.biasInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"kernelRegularizer",{get:function(){return this.cell.kernelRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"recurrentRegularizer",{get:function(){return this.cell.recurrentRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"biasRegularizer",{get:function(){return this.cell.biasRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"kernelConstraint",{get:function(){return this.cell.kernelConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"recurrentConstraint",{get:function(){return this.cell.recurrentConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"biasConstraint",{get:function(){return this.cell.biasConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"dropout",{get:function(){return this.cell.dropout},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"recurrentDropout",{get:function(){return this.cell.recurrentDropout},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"implementation",{get:function(){return this.cell.implementation},enumerable:!0,configurable:!0}),n.prototype.getConfig=function(){var e={units:this.units,activation:ri(this.activation),recurrentActivation:ri(this.recurrentActivation),useBias:this.useBias,kernelInitializer:bt(this.kernelInitializer),recurrentInitializer:bt(this.recurrentInitializer),biasInitializer:bt(this.biasInitializer),kernelRegularizer:rt(this.kernelRegularizer),recurrentRegularizer:rt(this.recurrentRegularizer),biasRegularizer:rt(this.biasRegularizer),activityRegularizer:rt(this.activityRegularizer),kernelConstraint:Ot(this.kernelConstraint),recurrentConstraint:Ot(this.recurrentConstraint),biasConstraint:Ot(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation},r=t.prototype.getConfig.call(this);return delete r.cell,Object.assign(e,r),e},n.fromConfig=function(e,r){return r.implmentation===0&&(r.implementation=1),new e(r)},n.className="GRU",n}(Au);he.registerClass(j4);var qC=function(t){function n(e){var r=t.call(this,e)||this;return r.DEFAULT_ACTIVATION="tanh",r.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",r.units=e.units,wr(r.units,"units"),r.activation=cs(e.activation===void 0?r.DEFAULT_ACTIVATION:e.activation),r.recurrentActivation=cs(e.recurrentActivation===void 0?r.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),r.useBias=e.useBias==null||e.useBias,r.kernelInitializer=Ht(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=Ht(e.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=Ht(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.unitForgetBias=e.unitForgetBias,r.kernelRegularizer=Gt(e.kernelRegularizer),r.recurrentRegularizer=Gt(e.recurrentRegularizer),r.biasRegularizer=Gt(e.biasRegularizer),r.kernelConstraint=Cn(e.kernelConstraint),r.recurrentConstraint=Cn(e.recurrentConstraint),r.biasConstraint=Cn(e.biasConstraint),r.dropout=ac([1,ls([0,e.dropout==null?0:e.dropout])]),r.recurrentDropout=ac([1,ls([0,e.recurrentDropout==null?0:e.recurrentDropout])]),r.implementation=e.implementation,r.stateSize=[r.units,r.units],r.dropoutMask=null,r.recurrentDropoutMask=null,r}return ue(n,t),n.prototype.build=function(e){var r,i,o=(e=Pt(e))[e.length-1];if(this.kernel=this.addWeight("kernel",[o,4*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,4*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){if(this.unitForgetBias){var a=this.biasInitializer,s=this.units;i=new((r=function(u){function l(){return u!==null&&u.apply(this,arguments)||this}return ue(l,u),l.prototype.apply=function(c,d){var f=a.apply([s]),p=new kC().apply([s]),h=a.apply([2*s]);return mk(mk(f,p),h)},l}(Xi)).className="CustomInit",r)}else i=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.units],null,i,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0},n.prototype.call=function(e,r){var i=this;return ee(function(){var o=r.training!=null&&r.training;if((e=e).length!==3)throw new Y("LSTMCell expects 3 input Tensors (inputs, h, c), got "+e.length+".");var a=e[1],s=e[2];e=e[0],0<i.dropout&&i.dropout<1&&i.dropoutMask==null&&(i.dropoutMask=lc(function(){return ti(e)},i.dropout,o,4)),0<i.recurrentDropout&&i.recurrentDropout<1&&i.recurrentDropoutMask==null&&(i.recurrentDropoutMask=lc(function(){return ti(a)},i.recurrentDropout,o,4));var u,l,c,d,f=i.dropoutMask,p=i.recurrentDropoutMask;0<i.dropout&&i.dropout<1&&(e=He(e,f[0]));var h=qo(e,i.kernel.read());0<i.recurrentDropout&&i.recurrentDropout<1&&(a=He(a,p[0])),h=at(h,qo(a,i.recurrentKernel.read())),i.useBias&&(h=da(h,i.bias.read()));var v=Go(h,4,h.rank-1),g=v[0],m=v[1],y=v[2],b=v[3];u=i.recurrentActivation.apply(g),l=i.recurrentActivation.apply(m),c=at(He(l,s),He(u,i.activation.apply(y))),d=i.recurrentActivation.apply(b);var w=He(d,i.activation.apply(c));return[w,w,c]})},n.prototype.getConfig=function(){var e={units:this.units,activation:ri(this.activation),recurrentActivation:ri(this.recurrentActivation),useBias:this.useBias,kernelInitializer:bt(this.kernelInitializer),recurrentInitializer:bt(this.recurrentInitializer),biasInitializer:bt(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:rt(this.kernelRegularizer),recurrentRegularizer:rt(this.recurrentRegularizer),biasRegularizer:rt(this.biasRegularizer),activityRegularizer:rt(this.activityRegularizer),kernelConstraint:Ot(this.kernelConstraint),recurrentConstraint:Ot(this.recurrentConstraint),biasConstraint:Ot(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation},r=t.prototype.getConfig.call(this);return Object.assign(e,r),e},n.className="LSTMCell",n}(Ep);he.registerClass(qC);var V4=function(t){function n(e){return e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new qC(e),t.call(this,e)||this}return ue(n,t),n.prototype.call=function(e,r){var i=this;return ee(function(){i.cell.dropoutMask!=null&&(nt(i.cell.dropoutMask),i.cell.dropoutMask=null),i.cell.recurrentDropoutMask!=null&&(nt(i.cell.recurrentDropoutMask),i.cell.recurrentDropoutMask=null);var o=r==null?null:r.mask,a=r==null?null:r.training,s=r==null?null:r.initialState;return t.prototype.call.call(i,e,{mask:o,training:a,initialState:s})})},Object.defineProperty(n.prototype,"units",{get:function(){return this.cell.units},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"activation",{get:function(){return this.cell.activation},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"recurrentActivation",{get:function(){return this.cell.recurrentActivation},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"useBias",{get:function(){return this.cell.useBias},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"kernelInitializer",{get:function(){return this.cell.kernelInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"recurrentInitializer",{get:function(){return this.cell.recurrentInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"biasInitializer",{get:function(){return this.cell.biasInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"unitForgetBias",{get:function(){return this.cell.unitForgetBias},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"kernelRegularizer",{get:function(){return this.cell.kernelRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"recurrentRegularizer",{get:function(){return this.cell.recurrentRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"biasRegularizer",{get:function(){return this.cell.biasRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"kernelConstraint",{get:function(){return this.cell.kernelConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"recurrentConstraint",{get:function(){return this.cell.recurrentConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"biasConstraint",{get:function(){return this.cell.biasConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"dropout",{get:function(){return this.cell.dropout},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"recurrentDropout",{get:function(){return this.cell.recurrentDropout},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"implementation",{get:function(){return this.cell.implementation},enumerable:!0,configurable:!0}),n.prototype.getConfig=function(){var e={units:this.units,activation:ri(this.activation),recurrentActivation:ri(this.recurrentActivation),useBias:this.useBias,kernelInitializer:bt(this.kernelInitializer),recurrentInitializer:bt(this.recurrentInitializer),biasInitializer:bt(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:rt(this.kernelRegularizer),recurrentRegularizer:rt(this.recurrentRegularizer),biasRegularizer:rt(this.biasRegularizer),activityRegularizer:rt(this.activityRegularizer),kernelConstraint:Ot(this.kernelConstraint),recurrentConstraint:Ot(this.recurrentConstraint),biasConstraint:Ot(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation},r=t.prototype.getConfig.call(this);return delete r.cell,Object.assign(e,r),e},n.fromConfig=function(e,r){return r.implmentation===0&&(r.implementation=1),new e(r)},n.className="LSTM",n}(Au);he.registerClass(V4);var KC=function(t){function n(e){var r=t.call(this,e)||this;return r.cells=e.cells,r}return ue(n,t),Object.defineProperty(n.prototype,"stateSize",{get:function(){for(var e=[],r=0,i=this.cells.slice().reverse();r<i.length;r++){var o=i[r];Array.isArray(o.stateSize)?e.push.apply(e,o.stateSize):e.push(o.stateSize)}return e},enumerable:!0,configurable:!0}),n.prototype.call=function(e,r){var i=this;return ee(function(){for(var o=(e=e).slice(1),a=[],s=0,u=i.cells.slice().reverse();s<u.length;s++){var l=u[s];Array.isArray(l.stateSize)?a.push(o.splice(0,l.stateSize.length)):a.push(o.splice(0,1))}a.reverse();for(var c,d=[],f=0;f<i.cells.length;++f)l=i.cells[f],o=a[f],c=f===0?[e[0]].concat(o):[c[0]].concat(o),c=l.call(c,r),d.push(c.slice(1));o=[];for(var p=0,h=d.slice().reverse();p<h.length;p++){var v=h[p];o.push.apply(o,v)}return[c[0]].concat(o)})},n.prototype.build=function(e){var r;Ow(e)&&(e=e[0]),e=e,this.cells.forEach(function(i,o){tu("RNNCell_"+o,function(){i.build(e),r=Array.isArray(i.stateSize)?i.stateSize[0]:i.stateSize,e=[e[0],r]})}),this.built=!0},n.prototype.getConfig=function(){for(var e=[],r=0,i=this.cells;r<i.length;r++){var o=i[r];e.push({className:o.getClassName(),config:o.getConfig()})}var a={cells:e},s=t.prototype.getConfig.call(this);return Object.assign(a,s),a},n.fromConfig=function(e,r,i){i===void 0&&(i={});for(var o=[],a=0,s=r.cells;a<s.length;a++){var u=s[a];o.push(ji(u,i))}return new e({cells:o})},Object.defineProperty(n.prototype,"trainableWeights",{get:function(){if(!this.trainable)return[];for(var e=[],r=0,i=this.cells;r<i.length;r++){var o=i[r];e.push.apply(e,o.trainableWeights)}return e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"nonTrainableWeights",{get:function(){for(var e=[],r=0,i=this.cells;r<i.length;r++){var o=i[r];e.push.apply(e,o.nonTrainableWeights)}if(!this.trainable){for(var a=[],s=0,u=this.cells;s<u.length;s++)o=u[s],a.push.apply(a,o.trainableWeights);return a.concat(e)}return e},enumerable:!0,configurable:!0}),n.prototype.getWeights=function(){for(var e=[],r=0,i=this.cells;r<i.length;r++){var o=i[r];e.push.apply(e,o.weights)}return Dw(e)},n.prototype.setWeights=function(e){for(var r=[],i=0,o=this.cells;i<o.length;i++)for(var a=o[i],s=a.weights.length,u=e.splice(s),l=0;l<a.weights.length;++l)r.push([a.weights[l],u[l]]);PC(r)},n.className="StackedRNNCells",n}(Ep);function lc(t,n,e,r){function i(){return a3(t(),n)}if(e===void 0&&(e=null),r===void 0&&(r=1),r>1){for(var o=[],a=0;a<r;a++)o.push(sc(i,t,e));return o.map(function(s){return bo(s.clone())})}return bo(sc(i,t,e).clone())}he.registerClass(KC);var $4=function(t){function n(e){var r=t.call(this,e)||this;return r.layer=e.layer,r}return ue(n,t),n.prototype.build=function(e){this.built=!0},Object.defineProperty(n.prototype,"trainable",{get:function(){return this.layer!=null&&this.layer.trainable},set:function(e){this.layer!=null&&(this.layer.trainable=e)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"trainableWeights",{get:function(){return this.layer.trainableWeights},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"nonTrainableWeights",{get:function(){return this.layer.nonTrainableWeights},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"updates",{get:function(){return this.layer._updates},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"losses",{get:function(){return this.layer.losses},enumerable:!0,configurable:!0}),n.prototype.getWeights=function(){return this.layer.getWeights()},n.prototype.setWeights=function(e){this.layer.setWeights(e)},n.prototype.getConfig=function(){var e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},r=t.prototype.getConfig.call(this);return Object.assign(e,r),e},n.prototype.setFastWeightInitDuringBuild=function(e){t.prototype.setFastWeightInitDuringBuild.call(this,e),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(e)},n.fromConfig=function(e,r,i){i===void 0&&(i={});var o=ji(r.layer,i);delete r.layer;var a={layer:o};return Object.assign(a,r),new e(a)},n}(pt),U4=function(t){function n(e){var r=t.call(this,e)||this;return r.supportsMasking=!0,r}return ue(n,t),n.prototype.build=function(e){if((e=Pt(e)).length<3)throw new Y("TimeDistributed layer expects an input shape >= 3D, but received input shape "+JSON.stringify(e));this.inputSpec=[{shape:e}];var r=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(r),this.layer.built=!0),t.prototype.build.call(this,e)},n.prototype.computeOutputShape=function(e){var r=[(e=Pt(e))[0]].concat(e.slice(2)),i=this.layer.computeOutputShape(r),o=e[1];return[i[0],o].concat(i.slice(1))},n.prototype.call=function(e,r){var i=this;return ee(function(){return z4(function(o,a){return[Qe(i.layer.call(o,r)),[]]},e=Qe(e),[],!1,null,null,!1,!0)[1]})},n.className="TimeDistributed",n}($4);function EY(t){Dc(gK,"BidirectionalMergeMode",t)}he.registerClass(U4);var CY="concat",W4=function(t){function n(e){var r=t.call(this,e)||this,i=e.layer.getConfig(),o={};o.className=e.layer.getClassName(),o.config=i,r.forwardLayer=ji(o),i.goBackwards=i.goBackwards!==!0;var a={};if(a.className=e.layer.getClassName(),a.config=i,r.backwardLayer=ji(a),r.forwardLayer.name="forward_"+r.forwardLayer.name,r.backwardLayer.name="backward_"+r.backwardLayer.name,r.mergeMode=e.mergeMode===void 0?CY:e.mergeMode,EY(r.mergeMode),e.weights)throw new Je("weights support is not implemented for Bidirectional layer yet.");return r._stateful=e.layer.stateful,r.returnSequences=e.layer.returnSequences,r.returnState=e.layer.returnState,r.supportsMasking=!0,r._trainable=!0,r.inputSpec=e.layer.inputSpec,r.numConstants=null,r}return ue(n,t),Object.defineProperty(n.prototype,"trainable",{get:function(){return this._trainable},set:function(e){this._trainable=e,this.forwardLayer!=null&&(this.forwardLayer.trainable=e),this.backwardLayer!=null&&(this.backwardLayer.trainable=e)},enumerable:!0,configurable:!0}),n.prototype.getWeights=function(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())},n.prototype.setWeights=function(e){var r=e.length,i=Math.floor(r/2);this.forwardLayer.setWeights(e.slice(0,i)),this.backwardLayer.setWeights(e.slice(i))},n.prototype.computeOutputShape=function(e){var r,i,o,a=this.forwardLayer.computeOutputShape(e);return Array.isArray(a)&&Array.isArray(a[0])||(a=[a]),a=a,this.returnState&&(o=a.slice(1)),r=a[0],r=r,this.mergeMode==="concat"?(r[r.length-1]*=2,i=[r]):i=this.mergeMode==null?[r,r.slice()]:[r],this.returnState?this.mergeMode==null?i.concat(o).concat(o.slice()):[r].concat(o).concat(o.slice()):mr(i)},n.prototype.apply=function(e,r){var i=r==null?null:r.initialState,o=r==null?null:r.constants;r==null&&(r={});var a=F4(e,i,o,this.numConstants);if(e=a.inputs,i=a.initialState,o=a.constants,Array.isArray(e)&&(i=e.slice(1),e=e[0]),(i==null||i.length===0)&&o==null)return t.prototype.apply.call(this,e,r);var s=[],u=[];if(i!=null){var l=i.length;if(l%2>0)throw new Y("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");r.initialState=i,s.push.apply(s,i);var c=i.map(function(y){return new Fn({shape:y.shape})});this.forwardLayer.stateSpec=c.slice(0,l/2),this.backwardLayer.stateSpec=c.slice(l/2),u.push.apply(u,c)}if(o!=null)throw new Je("Support for constants in Bidirectional layers is not implemented yet.");for(var d=s[0]instanceof Pi,f=0,p=s;f<p.length;f++)if(p[f]instanceof Pi!==d)throw new Y("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(d){var h=[e].concat(s),v=this.inputSpec.concat(u),g=this.inputSpec;this.inputSpec=v;var m=t.prototype.apply.call(this,h,r);return this.inputSpec=g,m}return t.prototype.apply.call(this,e,r)},n.prototype.call=function(e,r){var i=this;return ee(function(){if(r.mask!=null)throw new Je("The support for masking is not implemented for Bidirectional layers yet.");var o,a,s,u,l=r.initialState;if(l==null)o=i.forwardLayer.call(e,r),a=i.backwardLayer.call(e,r);else{var c=l.slice(0,l.length/2),d=l.slice(l.length/2);o=i.forwardLayer.call(e,Object.assign(r,{initialState:c})),a=i.backwardLayer.call(e,Object.assign(r,{initialState:d}))}return i.returnState&&(Array.isArray(o)&&(s=o.slice(1).concat(a.slice(1))),o=o[0],a=a[0]),i.returnSequences&&(a=xo(a,1)),i.mergeMode==="concat"?u=i3([o,a]):i.mergeMode==="sum"?u=at(o,a):i.mergeMode==="ave"?u=He(.5,at(o,a)):i.mergeMode==="mul"?u=He(o,a):i.mergeMode==null&&(u=[o,a]),i.returnState?i.mergeMode==null?u.concat(s):[u].concat(s):u})},n.prototype.resetStates=function(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()},n.prototype.build=function(e){var r=this;tu(this.forwardLayer.name,function(){r.forwardLayer.build(e)}),tu(this.backwardLayer.name,function(){r.backwardLayer.build(e)}),this.built=!0},Object.defineProperty(n.prototype,"trainableWeights",{get:function(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"nonTrainableWeights",{get:function(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)},enumerable:!0,configurable:!0}),n.prototype.setFastWeightInitDuringBuild=function(e){t.prototype.setFastWeightInitDuringBuild.call(this,e),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(e),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(e)},n.prototype.getConfig=function(){var e={mergeMode:this.mergeMode},r=t.prototype.getConfig.call(this);return Object.assign(e,r),e},n.fromConfig=function(e,r){var i=ji(r.layer);if(delete r.layer,r.numConstants!=null)throw new Je("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");var o=r;return o.layer=i,new e(o)},n.className="Bidirectional",n}($4);function RY(t){return new Sp(t)}function TY(t){return new V3(t)}function NY(t){return new z3(t)}function kY(t){return new B3(t)}function IY(t){return new j3(t)}function _Y(t){return new U3(t)}function AY(t){return new $3(t)}function OY(t){return new X3(t)}function DY(t){return new WC(t)}function MY(t){return new q3(t)}function PY(t){return new G3(t)}function LY(t){return new K3(t)}function FY(t){return new Y3(t)}function zY(t){return new J3(t)}function BY(t){return new Q3(t)}function jY(t){return new n4(t)}function VY(t){return new e4(t)}function $Y(t){return new Z3(t)}function UY(t){return new t4(t)}function WY(t){return new r4(t)}function HY(t){return new i4(t)}function GY(t){return new o4(t)}function qY(t){return new s4(t)}function KY(t){return new u4(t)}function XY(t){return new c4(t)}function YY(t){return new p4(t)}function JY(t){return new d4(t)}function QY(t){return new f4(t)}function ZY(t){return new l4(t)}function eJ(t){return new h4(t)}function tJ(t){return new y4(t)}function nJ(t){return new b4(t)}function rJ(t){return new w4(t)}function XC(t){return new C4(t)}function iJ(t){return XC(t)}function oJ(t){return XC(t)}function YC(t){return new N4(t)}function aJ(t){return YC(t)}function sJ(t){return YC(t)}function JC(t){return new _4(t)}function uJ(t){return JC(t)}function lJ(t){return JC(t)}function cJ(t){return new O4(t)}function dJ(t){return new P4(t)}function H4(t){return new D4(t)}function G4(t){return new L4(t)}function q4(t){return new E4(t)}function K4(t){return new T4(t)}function fJ(t){return new I4(t)}function pJ(t){return new j4(t)}function hJ(t){return new GC(t)}function mJ(t){return new V4(t)}function vJ(t){return new qC(t)}function gJ(t){return new B4(t)}function yJ(t){return new HC(t)}function bJ(t){return new Au(t)}function wJ(t){return new KC(t)}function xJ(t){return new W4(t)}function SJ(t){return new U4(t)}he.registerClass(W4);var EJ=H4,CJ=G4,RJ=q4,TJ=K4;function NJ(t){return new m4(t)}function kJ(t){return new v4(t)}function IJ(t){return new g4(t)}function _J(t){return new a4(t)}var AJ=Object.freeze({inputLayer:RY,elu:TY,reLU:NY,leakyReLU:kY,prelu:IY,softmax:_Y,thresholdedReLU:AY,conv1d:OY,conv2d:DY,conv2dTranspose:MY,conv3d:PY,separableConv2d:LY,cropping2D:FY,upSampling2d:zY,depthwiseConv2d:BY,activation:jY,dense:VY,dropout:$Y,flatten:UY,repeatVector:WY,reshape:HY,permute:GY,embedding:qY,add:KY,average:XY,concatenate:YY,maximum:JY,minimum:QY,multiply:ZY,dot:eJ,batchNormalization:tJ,layerNormalization:nJ,zeroPadding2d:rJ,averagePooling1d:XC,avgPool1d:iJ,avgPooling1d:oJ,averagePooling2d:YC,avgPool2d:aJ,avgPooling2d:sJ,averagePooling3d:JC,avgPool3d:uJ,avgPooling3d:lJ,globalAveragePooling1d:cJ,globalAveragePooling2d:dJ,globalMaxPooling1d:H4,globalMaxPooling2d:G4,maxPooling1d:q4,maxPooling2d:K4,maxPooling3d:fJ,gru:pJ,gruCell:hJ,lstm:mJ,lstmCell:vJ,simpleRNN:gJ,simpleRNNCell:yJ,rnn:bJ,stackedRNNCells:wJ,bidirectional:xJ,timeDistributed:SJ,globalMaxPool1d:EJ,globalMaxPool2d:CJ,maxPool1d:RJ,maxPool2d:TJ,Layer:pt,RNN:Au,RNNCell:Ep,input:P3,gaussianNoise:NJ,gaussianDropout:kJ,alphaDropout:IJ,masking:_J});function OJ(t,n){return FC(t,n)}function DJ(t,n){return N3(t,n)}function MJ(t,n){return k3(t,n)}function PJ(t,n){return zC(t,n)}function LJ(t,n){return BC(t,n)}function FJ(t,n){return T3(t,n)}function zJ(t,n){return fX(t,n)}function BJ(t,n){return LC(t,n)}function jJ(t,n){return sy(t,n)}function VJ(t,n){return Mc(t,n)}function $J(t,n){return Mc(t,n)}function UJ(t,n){return Mc(t,n)}function WJ(t,n){return Iu(t,n)}function HJ(t,n){return Iu(t,n)}function GJ(t,n){return Iu(t,n)}var qJ=Object.freeze({binaryAccuracy:OJ,binaryCrossentropy:DJ,sparseCategoricalAccuracy:MJ,categoricalAccuracy:PJ,categoricalCrossentropy:LJ,precision:FJ,recall:zJ,cosineProximity:BJ,meanAbsoluteError:jJ,meanAbsolutePercentageError:VJ,MAPE:$J,mape:UJ,meanSquaredError:WJ,MSE:HJ,mse:GJ}),KJ=Object.freeze({modelFromJSON:qX});function XJ(t){return new cy(t)}function YJ(t){return fY(t)}function JJ(t){return pY(t)}var QJ=Object.freeze({l1l2:XJ,l1:YJ,l2:JJ}),X4=function(t){function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.model=null,e}return ue(n,t),n.prototype.setModel=function(e){if(!(e instanceof ru))throw new Error("model must be a LayersModel, not some other Container");this.model=e},n}(uc);function kh(t,n){return t<n}function Ok(t,n){return t>n}var Y4=function(t){function n(e){var r=t.call(this)||this;if(e==null&&(e={}),e.restoreBestWeights)throw new Je("restoreBestWeights = True is not implemented in EarlyStopping yet.");return r.monitor=e.monitor||"val_loss",r.minDelta=Math.abs(e.minDelta||0),r.patience=e.patience||0,r.verbose=e.verbose||0,r.mode=e.mode||"auto",r.baseline=e.baseline,["auto","min","max"].indexOf(r.mode)===-1&&(console.warn("EarlyStopping mode '"+r.mode+"' is invalid. Falling back to mode 'auto'."),r.mode="auto"),r.mode==="min"?r.monitorFunc=kh:r.mode==="max"||r.monitor.indexOf("acc")!==-1?r.monitorFunc=Ok:r.monitorFunc=kh,r.monitorFunc===kh&&(r.minDelta*=-1),r}return ue(n,t),n.prototype.onTrainBegin=function(e){return We(this,void 0,void 0,function(){return Be(this,function(r){return this.wait=0,this.stoppedEpoch=0,this.baseline!=null?this.best=this.baseline:this.best=this.monitorFunc===kh?1/0:-1/0,[2]})})},n.prototype.onEpochEnd=function(e,r){return We(this,void 0,void 0,function(){var i;return Be(this,function(o){switch(o.label){case 0:return[4,Sa(r)];case 1:return o.sent(),(i=this.getMonitorValue(r))==null?[2]:(this.monitorFunc(i-this.minDelta,this.best)?(this.best=i,this.wait=0):(this.wait++,this.wait>=this.patience&&(this.stoppedEpoch=e,this.model.stopTraining=!0)),[2])}})})},n.prototype.onTrainEnd=function(e){return We(this,void 0,void 0,function(){return Be(this,function(r){return this.stoppedEpoch>0&&this.verbose&&console.log("Epoch "+this.stoppedEpoch+": early stopping."),[2]})})},n.prototype.getMonitorValue=function(e){e==null&&(e={});var r=e[this.monitor];return r==null&&console.warn("Metric for EarlyStopping "+this.monitor+" is not available. Available metrics are: "+Object.keys(e)),r},n}(X4);function ZJ(t){return new Y4(t)}var eQ={earlyStopping:ZJ};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Lo,Dk,Bw=function(){return(Bw=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var i in n=arguments[e])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t}).apply(this,arguments)};function hu(t,n,e,r){return new(e||(e=Promise))(function(i,o){function a(l){try{u(r.next(l))}catch(c){o(c)}}function s(l){try{u(r.throw(l))}catch(c){o(c)}}function u(l){l.done?i(l.value):new e(function(c){c(l.value)}).then(a,s)}u((r=r.apply(t,n||[])).next())})}function mu(t,n){var e,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(u){return function(l){return function(c){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){a=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){a.label=c[1];break}if(c[0]===6&&a.label<i[1]){a.label=i[1],i=c;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(c);break}i[2]&&a.ops.pop(),a.trys.pop();continue}c=n.call(t,a)}catch(d){c=[6,d],r=0}finally{e=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([u,l])}}}(function(t){t[t.DT_INVALID=0]="DT_INVALID",t[t.DT_FLOAT=1]="DT_FLOAT",t[t.DT_DOUBLE=2]="DT_DOUBLE",t[t.DT_INT32=3]="DT_INT32",t[t.DT_UINT8=4]="DT_UINT8",t[t.DT_INT16=5]="DT_INT16",t[t.DT_INT8=6]="DT_INT8",t[t.DT_STRING=7]="DT_STRING",t[t.DT_COMPLEX64=8]="DT_COMPLEX64",t[t.DT_INT64=9]="DT_INT64",t[t.DT_BOOL=10]="DT_BOOL",t[t.DT_QINT8=11]="DT_QINT8",t[t.DT_QUINT8=12]="DT_QUINT8",t[t.DT_QINT32=13]="DT_QINT32",t[t.DT_BFLOAT16=14]="DT_BFLOAT16",t[t.DT_FLOAT_REF=101]="DT_FLOAT_REF",t[t.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",t[t.DT_INT32_REF=103]="DT_INT32_REF",t[t.DT_UINT8_REF=104]="DT_UINT8_REF",t[t.DT_INT16_REF=105]="DT_INT16_REF",t[t.DT_INT8_REF=106]="DT_INT8_REF",t[t.DT_STRING_REF=107]="DT_STRING_REF",t[t.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",t[t.DT_INT64_REF=109]="DT_INT64_REF",t[t.DT_BOOL_REF=110]="DT_BOOL_REF",t[t.DT_QINT8_REF=111]="DT_QINT8_REF",t[t.DT_QUINT8_REF=112]="DT_QUINT8_REF",t[t.DT_QINT32_REF=113]="DT_QINT32_REF",t[t.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF"})(Lo||(Lo={})),function(t){(function(n){n[n.LEGACY=0]="LEGACY",n[n.V1=1]="V1",n[n.V2=2]="V2"})(t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))}(Dk||(Dk={}));var QC={};function tQ(t,n){var e={tfOpName:t,category:"custom",inputs:[],attrs:[],customExecutor:n};QC[t]=e}function J4(t){return QC[t]}function nQ(t){delete QC[t]}function z(t,n,e,r){var i=n.inputParams[t];if(i&&i.inputIndexStart!==void 0){var o=i.inputIndexStart,a=i.inputIndexEnd===0?void 0:i.inputIndexEnd===void 0?o+1:i.inputIndexEnd;if(i.type==="tensor")return vr(n.inputNames[i.inputIndexStart],e,r);if(i.type==="tensors")return n.inputNames.slice(o,a).map(function(l){return vr(l,e,r)});var s=Array.prototype.slice.call(vr(n.inputNames.slice(o)[0],e,r).dataSync());return i.type==="number"?s[0]:s}var u=n.attrParams[t];return u&&u.value}function vr(t,n,e){var r=Zd(t),i=r[0],o=r[1],a=e.currentContextIds.find(function(s){return!!n[Tv(i,s)]});return a!==void 0?n[Tv(i,a)][o]:void 0}function rQ(t,n,e){return n[Tv(t,e.currentContextId)]}function gm(t,n){var e=Zd(t),r=e[0],i=e[1];return[Tv(r,n&&n.currentContextId),i]}function Tv(t,n){return n?t+"-"+n:t}function Zd(t){var n=t.lastIndexOf(":");return n===-1?[t,0]:[t.substring(0,n),Number(t.substring(n+1))]}function g1(t,n){for(var e=[],r=0;r<t.length;r+=n)e.push(t.slice(r,r+n));return e}var iQ=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],oQ=Object.freeze({json:iQ}),aQ=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"clip_value_min",name:"clipValueMin",type:"number"},{tfName:"clip_value_max",name:"clipValueMax",type:"number"}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"clipValueMin",name:"clipValueMin",type:"number",defaultValue:0},{tfName:"clipValueMax",name:"clipValueMax",type:"number",defaultValue:6}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Prod",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axes",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],sQ=Object.freeze({json:aQ}),uQ=[{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"}]}],lQ=Object.freeze({json:uQ}),cQ=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]}],dQ=Object.freeze({json:cQ}),fQ=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],pQ=Object.freeze({json:fQ}),hQ=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],mQ=Object.freeze({json:hQ}),vQ=[{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]}],gQ=Object.freeze({json:vQ}),yQ=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],bQ=Object.freeze({json:yQ}),wQ=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]}],xQ=Object.freeze({json:wQ}),SQ=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],EQ=Object.freeze({json:SQ}),CQ=[{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],RQ=Object.freeze({json:CQ}),TQ=[{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"SparseToDense",category:"normalization",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!0,notSupported:!0}]}],NQ=Object.freeze({json:TQ}),kQ=[{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]}],IQ=Object.freeze({json:kQ}),_Q=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool",notSupported:!0}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]}],AQ=Object.freeze({json:_Q}),OQ=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],DQ=Object.freeze({json:OQ}),MQ=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]}],PQ=Object.freeze({json:MQ}),LQ=function(){function t(){var n=[oQ,sQ,lQ,dQ,pQ,mQ,gQ,EQ,xQ,bQ,RQ,NQ,IQ,AQ,DQ,PQ],e=[].concat.apply([],n.map(function(r){return r.json}));this.opMappers=e.reduce(function(r,i){return r[i.tfOpName]=i,r},{})}return Object.defineProperty(t,"Instance",{get:function(){return this._instance||(this._instance=new this)},enumerable:!0,configurable:!0}),t.prototype.transformGraph=function(n){var e=this,r=[],i=[],o=n.node.reduce(function(l,c){return l[c.name]=e.mapNode(c),c.op==="Placeholder"&&r.push(l[c.name]),c.op==="Const"&&i.push(l[c.name]),l},{}),a=[],s=[],u=Object.keys(o);return u.forEach(function(l){var c=o[l];c.inputNames.forEach(function(d){var f=gm(d)[0];c.inputs.push(o[f]),o[f].children.push(c)}),c.inputs.length===0&&a.push(c)}),u.forEach(function(l){var c=o[l];c.children.length===0&&s.push(c)}),{nodes:o,inputs:a,outputs:s,weights:i,placeholders:r}},t.prototype.mapNode=function(n){var e=J4(n.op)||this.opMappers[n.op]||{};n.attr==null&&(n.attr={});var r={name:n.name,op:n.op,category:e.category,inputNames:(n.input||[]).map(function(i){return i.startsWith("^")?i.substr(1):i}),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:n.attr};return e.inputs!=null&&(r.inputParams=e.inputs.reduce(function(i,o){return i[o.name]={type:o.type,inputIndexStart:o.start,inputIndexEnd:o.end},i},{})),e.attrs!=null&&(r.attrParams=e.attrs.reduce(function(i,o){var a=o.type,s=void 0;switch(o.type){case"string":(s=jw(n.attr,o.tfName,o.defaultValue))===void 0&&o.tfDeprecatedName&&(s=jw(n.attr,o.tfDeprecatedName,o.defaultValue));break;case"string[]":(s=qw(n.attr,o.tfName,o.defaultValue))===void 0&&o.tfDeprecatedName&&(s=qw(n.attr,o.tfDeprecatedName,o.defaultValue));break;case"number":(s=$w(n.attr,o.tfName,o.defaultValue||0))===void 0&&o.tfDeprecatedName&&(s=$w(n.attr,o.tfDeprecatedName,o.defaultValue));break;case"number[]":(s=Gw(n.attr,o.tfName,o.defaultValue))===void 0&&o.tfDeprecatedName&&(s=Gw(n.attr,o.tfDeprecatedName,o.defaultValue));break;case"bool":(s=Vw(n.attr,o.tfName,o.defaultValue))===void 0&&o.tfDeprecatedName&&(s=Vw(n.attr,o.tfDeprecatedName,o.defaultValue));break;case"bool[]":(s=Xw(n.attr,o.tfName,o.defaultValue))===void 0&&o.tfDeprecatedName&&(s=Xw(n.attr,o.tfDeprecatedName,o.defaultValue));break;case"shape":(s=Hw(n.attr,o.tfName,o.defaultValue))===void 0&&o.tfDeprecatedName&&(s=Hw(n.attr,o.tfDeprecatedName,o.defaultValue));break;case"shape[]":(s=Kw(n.attr,o.tfName,o.defaultValue))===void 0&&o.tfDeprecatedName&&(s=Kw(n.attr,o.tfDeprecatedName,o.defaultValue));break;case"dtype":(s=Uw(n.attr,o.tfName,o.defaultValue))===void 0&&o.tfDeprecatedName&&(s=Uw(n.attr,o.tfDeprecatedName,o.defaultValue));break;case"dtype[]":(s=Ww(n.attr,o.tfName,o.defaultValue))===void 0&&o.tfDeprecatedName&&(s=Ww(n.attr,o.tfDeprecatedName,o.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error("Unsupported param type: "+o.type+" for op: "+n.op)}return i[o.name]={value:s,type:a},i},{})),r},t}();function FQ(t){var n=ie().global;if(n.atob!==void 0)return n.atob(t);if(typeof Buffer<"u")return new Buffer(t,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function Q4(t,n){var e=Array.isArray(t)?String.fromCharCode.apply(null,t):FQ(t);return n?e:e.toLowerCase()}function jw(t,n,e,r){r===void 0&&(r=!1);var i=t[n];return i!=null?Q4(i.s,r):e}function Vw(t,n,e){var r=t[n];return r?r.b:e}function $w(t,n,e){var r=t[n]||{},i=r.i!=null?r.i:r.f!=null?r.f:e;return typeof i=="number"?i:parseInt(i,10)}function Z4(t){switch(typeof t=="string"&&(t=Lo[t]),t){case Lo.DT_FLOAT:return"float32";case Lo.DT_INT32:case Lo.DT_INT64:return"int32";case Lo.DT_BOOL:return"bool";case Lo.DT_DOUBLE:return"float32";case Lo.DT_STRING:return"string";default:return null}}function Uw(t,n,e){var r=t[n];return r&&r.type?Z4(r.type):e}function Ww(t,n,e){var r=t[n];return r&&r.list&&r.list.type?r.list.type.map(function(i){return Z4(i)}):e}function eF(t){if(!t.unknownRank)return t.dim!=null?t.dim.map(function(n){return typeof n.size=="number"?n.size:parseInt(n.size,10)}):[]}function Hw(t,n,e){var r=t[n];return r&&r.shape?eF(r.shape):e}function Gw(t,n,e){var r=t[n];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(function(i){return typeof i=="number"?i:parseInt(i,10)}):e}function qw(t,n,e,r){r===void 0&&(r=!1);var i=t[n];return i&&i.list&&i.list.s?i.list.s.map(function(o){return Q4(o,r)}):e}function Kw(t,n,e){var r=t[n];return r&&r.list&&r.list.shape?r.list.shape.map(function(i){return eF(i)}):e}function Xw(t,n,e){var r=t[n];return r&&r.list&&r.list.b?r.list.b:e}var zQ=function(){function t(n,e,r){var i=this;this.node=n,this.tensorMap=e,this.context=r,this.inputs=[],this.attrs={},this.inputs=n.inputNames.map(function(o){return i.getInput(o)}),n.rawAttrs!=null&&(this.attrs=Object.keys(n.rawAttrs).reduce(function(o,a){return o[a]=i.getAttr(a),o},{}))}return t.prototype.getInput=function(n){return vr(n,this.tensorMap,this.context)},t.prototype.getAttr=function(n,e){var r=this.node.rawAttrs[n];if(r.tensor!=null)return vr(n,this.tensorMap,this.context);if(r.i!=null||r.f!=null)return $w(this.node.rawAttrs,n,e);if(r.s!=null)return jw(this.node.rawAttrs,n,e);if(r.b!=null)return Vw(this.node.rawAttrs,n,e);if(r.shape!=null)return Hw(this.node.rawAttrs,n,e);if(r.type!=null)return Uw(this.node.rawAttrs,n,e);if(r.list!=null){if(r.list.i!=null||r.list.f!=null)return Gw(this.node.rawAttrs,n,e);if(r.list.s!=null)return qw(this.node.rawAttrs,n,e);if(r.list.shape!=null)return Kw(this.node.rawAttrs,n,e);if(r.list.b!=null)return Xw(this.node.rawAttrs,n,e);if(r.list.type!=null)return Ww(this.node.rawAttrs,n,e)}return e},t}(),BQ=function(t,n,e){switch(t.op){case"BiasAdd":case"AddV2":case"Add":return[at(z("a",t,n,e),z("b",t,n,e))];case"AddN":return[qE(z("tensors",t,n,e))];case"FloorMod":case"Mod":return[XE(z("a",t,n,e),z("b",t,n,e))];case"Mul":return[He(z("a",t,n,e),z("b",t,n,e))];case"RealDiv":case"Div":return[cr(z("a",t,n,e),z("b",t,n,e))];case"FloorDiv":return[Lg(z("a",t,n,e),z("b",t,n,e))];case"Sub":return[jn(z("a",t,n,e),z("b",t,n,e))];case"Minimum":return[kc(z("a",t,n,e),z("b",t,n,e))];case"Maximum":return[Ro(z("a",t,n,e),z("b",t,n,e))];case"Pow":return[tc(z("a",t,n,e),z("b",t,n,e))];case"SquaredDifference":return[YE(z("a",t,n,e),z("b",t,n,e))];default:throw TypeError("Node type "+t.op+" is not implemented")}},jQ=function(t,n,e){switch(t.op){case"Abs":case"ComplexAbs":return[ss(z("x",t,n,e))];case"Acos":return[EE(z("x",t,n,e))];case"Acosh":return[CE(z("x",t,n,e))];case"Asin":return[RE(z("x",t,n,e))];case"Asinh":return[TE(z("x",t,n,e))];case"Atan":return[NE(z("x",t,n,e))];case"Atan2":return[KE(z("x",t,n,e),z("y",t,n,e))];case"Atanh":return[kE(z("x",t,n,e))];case"Ceil":return[IE(z("x",t,n,e))];case"Complex":return[Nn(z("real",t,n,e),z("imag",t,n,e))];case"Cos":return[_E(z("x",t,n,e))];case"Cosh":return[AE(z("x",t,n,e))];case"Elu":return[Oc(z("x",t,n,e))];case"Erf":return[OE(z("x",t,n,e))];case"Exp":return[DE(z("x",t,n,e))];case"Expm1":return[ME(z("x",t,n,e))];case"Floor":return[Ig(z("x",t,n,e))];case"Log":return[na(z("x",t,n,e))];case"Log1p":return[PE(z("x",t,n,e))];case"Imag":return[vi(z("x",t,n,e))];case"Neg":return[Tu(z("x",t,n,e))];case"Reciprocal":return[LE(z("x",t,n,e))];case"Real":return[Ir(z("x",t,n,e))];case"Relu":return[ws(z("x",t,n,e))];case"Round":return[FE(z("x",t,n,e))];case"Selu":return[Qg(z("x",t,n,e))];case"Sigmoid":return[Ag(z("x",t,n,e))];case"Sin":return[BE(z("x",t,n,e))];case"Sign":return[zE(z("x",t,n,e))];case"Sinh":return[jE(z("x",t,n,e))];case"Softplus":return[sp(z("x",t,n,e))];case"Sqrt":return[up(z("x",t,n,e))];case"Square":return[SE(z("x",t,n,e))];case"Tanh":return[Og(z("x",t,n,e))];case"Tan":return[VE(z("x",t,n,e))];case"Relu6":case"ClipByValue":return[br(z("x",t,n,e),z("clipValueMin",t,n,e),z("clipValueMax",t,n,e))];case"Rsqrt":return[_g(vr(t.inputNames[0],n,e))];case"Prod":return[Xg(z("x",t,n,e),z("axes",t,n,e))];case"LeakyRelu":return[Yg(z("x",t,n,e),z("alpha",t,n,e))];default:throw TypeError("Node type "+t.op+" is not implemented")}},VQ=function(){function t(n,e,r,i,o,a,s){this.name=n,this.dtype=e,this.maxSize=r,this.elementShape=i,this.identicalElementShapes=o,this.dynamicSize=a,this.clearAfterRead=s,this.tensors=[],this.closed_=!1,this.id=t.nextId++}return Object.defineProperty(t.prototype,"closed",{get:function(){return this.closed_},enumerable:!0,configurable:!0}),t.prototype.clearAndClose=function(){this.tensors.forEach(function(n){return n.tensor.dispose()}),this.tensors=[],this.closed_=!0},t.prototype.size=function(){return this.tensors.length},t.prototype.read=function(n){if(this.closed_)throw new Error("TensorArray "+this.name+" has already been closed.");if(n<0||n>=this.tensors.length)throw new Error("Tried to read from index "+n+", but array size is: "+this.tensors.length);var e=this.tensors[n];if(e.cleared)throw new Error("TensorArray "+this.name+": Could not read index "+n+" twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).");return this.clearAfterRead&&(e.cleared=!0),e.read=!0,e.tensor},t.prototype.readMany=function(n){var e=this;return n.map(function(r){return e.read(r)})},t.prototype.write=function(n,e){if(this.closed_)throw new Error("TensorArray "+this.name+" has already been closed.");if(n<0||!this.dynamicSize&&n>=this.maxSize)throw new Error("Tried to write to index "+n+", but array is not resizeable and size is: "+this.maxSize);var r=this.tensors[n]||{};if(e.dtype!==this.dtype)throw new Error("TensorArray "+this.name+": Could not write to TensorArray index "+n+`,
          because the value dtype is `+e.dtype+", but TensorArray dtype is "+this.dtype+".");if(this.size()!==0||this.elementShape!=null&&this.elementShape.length!==0||(this.elementShape=e.shape),this.assertShapesMatchAllowUndefinedSize(this.elementShape,e.shape,"TensorArray "+this.name+": Could not write to TensorArray index "+n+"."),r&&r.read)throw new Error("TensorArray "+this.name+": Could not write to TensorArray index "+n+", because it has already been read.");if(r&&r.written)throw new Error("TensorArray "+this.name+": Could not write to TensorArray index "+n+", because it has already been written.");r.tensor=e,r.written=!0,this.tensors[n]=r},t.prototype.writeMany=function(n,e){var r=this;if(n.length!==e.length)throw new Error("TensorArray "+this.name+": could not write multiple tensors,because the index size: "+n.length+" is not the same as tensors size: "+e.length+".");n.forEach(function(i,o){return r.write(i,e[o])})},t.prototype.gather=function(n,e){if(e&&e!==this.dtype)throw new Error("TensorArray dtype is "+this.dtype+" but gather requested dtype "+e);if(!n){n=[];for(var r=0;r<this.size();r++)n.push(r)}if(n.length===0)return mn([],[0].concat(this.elementShape));var i=this.readMany(n);return this.assertShapesMatchAllowUndefinedSize(this.elementShape,i[0].shape,"TensorArray shape mismatch: "),$i(i,0)},t.prototype.concat=function(n){if(n&&n!==this.dtype)throw new Error("TensorArray dtype is "+this.dtype+" but concat requested dtype "+n);if(this.size()===0)return mn([],[0].concat(this.elementShape));for(var e=[],r=0;r<this.size();r++)e.push(r);var i=this.readMany(e);return this.assertShapesMatchAllowUndefinedSize(this.elementShape,i[0].shape,"TensorArray shape mismatch: tensor array shape ("+this.elementShape+") vs first tensor shape ("+i[0].shape+")"),lr(i,0)},t.prototype.scatter=function(n,e){if(e.dtype!==this.dtype)throw new Error("TensorArray dtype is "+this.dtype+" but tensor has dtype "+e.dtype);if(n.length!==e.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: "+n.length+" vs. "+e.shape[0]);var r=Math.max.apply(Math,n);if(!this.dynamicSize&&r>=this.maxSize)throw new Error("Max index must be < array size ("+r+"  vs. "+this.maxSize+")");this.writeMany(n,du(e,0))},t.prototype.split=function(n,e){var r=this;if(e.dtype!==this.dtype)throw new Error("TensorArray dtype is "+this.dtype+" but tensor has dtype "+e.dtype);var i=0,o=n.map(function(c){return i+=c});if(i!==e.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        `+i+", and tensor's shape is: "+e.shape);if(!this.dynamicSize&&n.length!==this.maxSize)throw new Error("TensorArray's size is not equal to the size of lengths ("+this.maxSize+" vs. "+n.length+"), and the TensorArray is not marked as dynamically resizeable");var a=i===0?0:e.size/i,s=[];ee(function(){e=e.reshape([1,i,a]);for(var c=0;c<n.length;++c){var d=[0,c===0?0:o[c-1],0],f=[1,n[c],a];s[c]=ni(e,d,f).reshape(r.elementShape)}return s});for(var u=[],l=0;l<n.length;l++)u[l]=l;this.writeMany(u,s)},t.prototype.assertShapesMatchAllowUndefinedSize=function(n,e,r){r===void 0&&(r=""),Fe.assert(this.shapesEqualAllowUndefinedSize(n,e),function(){return r+" Shapes "+n+" and "+e+" must match"})},t.prototype.shapesEqualAllowUndefinedSize=function(n,e){if(n.length!==e.length)return!1;for(var r=0;r<n.length;r++)if(n[r]!==-1&&e[r]!==-1&&n[r]!==e[r])return!1;return!0},t.nextId=0,t}();function $Q(t,n,e){return hu(this,void 0,void 0,function(){var r,i,o,a,s,u,l,c,d,f,p,h,v,g,m,y,b,w,x,C,E,S,N,k,M,D,R,O,P,A,I,_,F,L,W;return mu(this,function(B){switch(B.label){case 0:switch(t.op){case"LoopCond":return[3,1];case"Switch":return[3,2];case"Merge":return[3,4];case"Enter":return[3,5];case"Exit":return[3,6];case"NextIteration":return[3,7];case"TensorArrayV3":return[3,8];case"TensorArrayWriteV3":return[3,9];case"TensorArrayReadV3":return[3,10];case"TensorArrayGatherV3":return[3,11];case"TensorArrayScatterV3":return[3,12];case"TensorArrayConcatV3":return[3,13];case"TensorArraySplitV3":return[3,14];case"TensorArraySizeV3":return[3,15];case"TensorArrayCloseV3":return[3,16]}return[3,17];case 1:return[2,[z("pred",t,n,e).clone()]];case 2:return r=z("pred",t,n,e),i=z("data",t,n,e),[4,r.data()];case 3:return[2,B.sent()[0]?[void 0,i.clone()]:[i.clone(),void 0]];case 4:return[2,(o=t.inputNames.find(function(q){return vr(q,n,e)!==void 0}))?[vr(o,n,e).clone()]:void 0];case 5:return a=z("frameName",t,n,e),s=z("tensor",t,n,e),e.enterFrame(a),[2,[s.clone()]];case 6:return u=z("tensor",t,n,e),e.exitFrame(),[2,[u.clone()]];case 7:return l=z("tensor",t,n,e),e.nextIteration(),[2,[l.clone()]];case 8:return c=z("size",t,n,e),d=z("dtype",t,n,e),f=z("elementShape",t,n,e),p=z("dynamicSize",t,n,e),h=z("clearAfterRead",t,n,e),v=z("identicalElementShapes",t,n,e),g=z("name",t,n,e),m=new VQ(g,d,c,f,v,p,h),e.addTensorArray(m),[2,[ke(m.id),ke(1)]];case 9:return y=z("tensorArrayId",t,n,e),b=z("index",t,n,e),w=z("tensor",t,n,e),e.getTensorArray(y).write(b,w),[2,[ke(1)]];case 10:return x=z("tensorArrayId",t,n,e),C=z("index",t,n,e),[2,[e.getTensorArray(x).read(C)]];case 11:return E=z("tensorArrayId",t,n,e),S=z("indices",t,n,e),N=z("dtype",t,n,e),[2,[e.getTensorArray(E).gather(S,N)]];case 12:return k=z("tensorArrayId",t,n,e),M=z("indices",t,n,e),D=z("tensor",t,n,e),e.getTensorArray(k).scatter(M,D),[2,[ke(1)]];case 13:return R=z("tensorArrayId",t,n,e),O=e.getTensorArray(R),P=z("dtype",t,n,e),[2,[O.concat(P)]];case 14:return A=z("tensorArrayId",t,n,e),I=z("tensor",t,n,e),_=z("lengths",t,n,e),e.getTensorArray(A).split(_,I),[2,[ke(1)]];case 15:return F=z("tensorArrayId",t,n,e),L=e.getTensorArray(F),[2,[ke(L.size(),"int32")]];case 16:return W=z("tensorArrayId",t,n,e),e.getTensorArray(W).clearAndClose(),[2,[]];case 17:throw TypeError("Node type "+t.op+" is not implemented")}})})}var UQ=function(t,n,e){var r,i;switch(t.op){case"Conv1D":var o=z("stride",t,n,e),a=z("pad",t,n,e),s=z("dataFormat",t,n,e).toUpperCase(),u=z("dilation",t,n,e);return[zg(z("x",t,n,e),z("filter",t,n,e),o,a,s,u)];case"Conv2D":o=z("strides",t,n,e),a=z("pad",t,n,e),s=z("dataFormat",t,n,e).toUpperCase();var l=z("dilations",t,n,e);return[ku(z("x",t,n,e),z("filter",t,n,e),[o[1],o[2]],a,s,[l[1],l[2]])];case"_FusedConv2D":var c=(r=z("fusedOps",t,n,e))[0],d=r[1],f=c==="biasadd",p=d==="prelu",h=c==="fusedbatchnorm",v=z("numArgs",t,n,e);if(f){if(p&&v!==2)throw new Error("Fused Conv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!p&&v!==1)throw new Error("Fused Conv2d with BiasAdd must have one extra argument: bias.")}if(h)throw new Error("Fused Conv2d with FusedBatchNorm is not supported.");o=z("strides",t,n,e),a=z("pad",t,n,e),s=z("dataFormat",t,n,e).toUpperCase(),l=z("dilations",t,n,e);var g=(i=z("args",t,n,e))[0],m=i[1];return[oc.conv2d({x:z("x",t,n,e),filter:z("filter",t,n,e),strides:[o[1],o[2]],pad:a,dataFormat:s,dilations:[l[1],l[2]],bias:g,activation:d,preluActivationWeights:m})];case"Conv2DBackpropInput":case"Conv2dTranspose":var y=z("outputShape",t,n,e);return o=z("strides",t,n,e),a=z("pad",t,n,e),[jg(z("x",t,n,e),z("filter",t,n,e),y,[o[1],o[2]],a)];case"DepthwiseConv2dNative":case"DepthwiseConv2d":return o=z("strides",t,n,e),a=z("pad",t,n,e),l=z("dilations",t,n,e),s=z("dataFormat",t,n,e).toUpperCase(),[Ac(z("input",t,n,e),z("filter",t,n,e),[o[1],o[2]],a,s,[l[1],l[2]])];case"Conv3D":return o=z("strides",t,n,e),a=z("pad",t,n,e),s=z("dataFormat",t,n,e).toUpperCase(),l=z("dilations",t,n,e),[Bg(z("x",t,n,e),z("filter",t,n,e),[o[1],o[2],o[3]],a,s,[l[1],l[2],l[3]])];case"AvgPool":o=z("strides",t,n,e),a=z("pad",t,n,e);var b=z("kernelSize",t,n,e);return[Ug(z("x",t,n,e),[b[1],b[2]],[o[1],o[2]],a)];case"MaxPool":return o=z("strides",t,n,e),a=z("pad",t,n,e),b=z("kernelSize",t,n,e),[$g(z("x",t,n,e),[b[1],b[2]],[o[1],o[2]],a)];case"AvgPool3D":return o=z("strides",t,n,e),a=z("pad",t,n,e),b=z("kernelSize",t,n,e),[Hg(z("x",t,n,e),[b[1],b[2],b[3]],[o[1],o[2],o[3]],a)];case"MaxPool3D":return o=z("strides",t,n,e),a=z("pad",t,n,e),b=z("kernelSize",t,n,e),[Wg(z("x",t,n,e),[b[1],b[2],b[3]],[o[1],o[2],o[3]],a)];default:throw TypeError("Node type "+t.op+" is not implemented")}},WQ=function(t,n,e){switch(t.op){case"Fill":var r=z("shape",t,n,e),i=z("dtype",t,n,e),o=z("value",t,n,e);return[Tc(r,o,i)];case"LinSpace":var a=z("start",t,n,e),s=z("stop",t,n,e),u=z("num",t,n,e);return[eE(a,s,u)];case"Multinomial":var l=z("logits",t,n,e),c=z("numSamples",t,n,e),d=z("seed",t,n,e);return[sE(l,c,d)];case"OneHot":var f=z("indices",t,n,e),p=z("depth",t,n,e),h=z("onValue",t,n,e),v=z("offValue",t,n,e);return[Zl(f,p,h,v)];case"Ones":return[Co(z("shape",t,n,e),z("dtype",t,n,e))];case"OnesLike":return[ti(z("x",t,n,e))];case"RandomUniform":return[Cu(z("shape",t,n,e),z("minval",t,n,e),z("maxval",t,n,e),z("dtype",t,n,e))];case"Range":a=z("start",t,n,e);var g=z("stop",t,n,e),m=z("step",t,n,e);return[bg(a,g,m,z("dtype",t,n,e))];case"TruncatedNormal":r=z("shape",t,n,e);var y=z("mean",t,n,e),b=z("stdDev",t,n,e);return d=z("seed",t,n,e),[op(r,y,b,z("dtype",t,n,e),d)];case"Zeros":return[It(z("shape",t,n,e),z("dtype",t,n,e))];case"ZerosLike":return[dt(z("x",t,n,e))];default:throw TypeError("Node type "+t.op+" is not implemented")}};function HQ(t,n,e){return hu(this,void 0,void 0,function(){var r,i,o,a,s;return mu(this,function(u){switch(u.label){case 0:switch(t.op){case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":return[3,1];case"Where":return[3,3];case"ListDiff":return[3,5]}return[3,6];case 1:return r=z("boxes",t,n,e),i=z("scores",t,n,e),o=z("maxOutputSize",t,n,e),a=z("iouThreshold",t,n,e),s=z("scoreThreshold",t,n,e),[4,eu.nonMaxSuppressionAsync(r,i,o,a,s)];case 2:return[2,[u.sent()]];case 3:return[4,Pg(z("condition",t,n,e).asType("bool"))];case 4:return[2,[u.sent()]];case 5:return[2,lE(z("x",t,n,e),z("y",t,n,e))];case 6:throw TypeError("Node type "+t.op+" is not implemented")}})})}var GQ=function(t,n,e){switch(t.op){case"TopKV2":var r=z("x",t,n,e),i=z("k",t,n,e),o=z("sorted",t,n,e),a=sC(r,i,o);return[a.values,a.indices];default:throw TypeError("Node type "+t.op+" is not implemented")}},qQ=function(t,n,e){switch(t.op){case"Const":return n[t.name];case"PlaceholderWithDefault":var r=z("default",t,n,e);return[vr(t.name,n,e)||r];case"Placeholder":return[vr(t.name,n,e)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":return[z("x",t,n,e).clone()];case"IdentityN":return z("x",t,n,e).map(function(l){return l.clone()});case"Snapshot":return[z("x",t,n,e).clone()];case"Shape":return[Fr(z("x",t,n,e).shape,"int32")];case"ShapeN":return z("x",t,n,e).map(function(l){return Fr(l.shape)});case"Size":return[ke(z("x",t,n,e).size,"int32")];case"Rank":return[ke(z("x",t,n,e).rank,"int32")];case"NoOp":return[];case"Print":var i=z("x",t,n,e),o=z("data",t,n,e),a=z("message",t,n,e),s=z("summarize",t,n,e);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(a);for(var u=0;u<o.length;u++)console.log(Array.prototype.slice.call(o[u].dataSync()).slice(0,s));return[i];default:throw TypeError("Node type "+t.op+" is not implemented")}},KQ=function(t,n,e){switch(t.op){case"ResizeBilinear":var r=z("images",t,n,e),i=z("size",t,n,e),o=z("alignCorners",t,n,e);return[eu.resizeBilinear(r,[i[0],i[1]],o)];case"ResizeNearestNeighbor":return r=z("images",t,n,e),i=z("size",t,n,e),o=z("alignCorners",t,n,e),[eu.resizeNearestNeighbor(r,[i[0],i[1]],o)];case"CropAndResize":var a=z("image",t,n,e),s=z("boxes",t,n,e),u=z("boxInd",t,n,e),l=z("cropSize",t,n,e),c=z("method",t,n,e),d=z("extrapolationValue",t,n,e);return[eu.cropAndResize(a,s,u,l,c,d)];default:throw TypeError("Node type "+t.op+" is not implemented")}},XQ=function(t,n,e){switch(t.op){case"Equal":return[Nu(z("a",t,n,e),z("b",t,n,e))];case"NotEqual":return[nc(z("a",t,n,e),z("b",t,n,e))];case"Greater":return[Ic(z("a",t,n,e),z("b",t,n,e))];case"GreaterEqual":return[cp(z("a",t,n,e),z("b",t,n,e))];case"Less":return[JE(z("a",t,n,e),z("b",t,n,e))];case"LessEqual":return[QE(z("a",t,n,e),z("b",t,n,e))];case"LogicalAnd":return[ua(z("a",t,n,e),z("b",t,n,e))];case"LogicalNot":return[GE(z("a",t,n,e))];case"LogicalOr":return[Mg(z("a",t,n,e),z("b",t,n,e))];case"Select":return[ra(z("condition",t,n,e),z("a",t,n,e),z("b",t,n,e))];default:throw TypeError("Node type "+t.op+" is not implemented")}},YQ=function(t,n,e){switch(t.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[Vg(z("a",t,n,e),z("b",t,n,e),z("transposeA",t,n,e),z("transposeB",t,n,e))];case"Transpose":return[Zt(z("x",t,n,e),z("perm",t,n,e))];default:throw TypeError("Node type "+t.op+" is not implemented")}},JQ=function(t,n,e){switch(t.op){case"FusedBatchNorm":case"FusedBatchNormV2":case"FusedBatchNormV3":return[$E(z("x",t,n,e),z("mean",t,n,e),z("variance",t,n,e),z("offset",t,n,e),z("scale",t,n,e),z("epsilon",t,n,e))];case"LRN":return[iC(z("x",t,n,e),z("radius",t,n,e),z("bias",t,n,e),z("alpha",t,n,e),z("beta",t,n,e))];case"Softmax":return[Ru(z("x",t,n,e))];case"LogSoftmax":return[Ng(z("x",t,n,e))];case"SparseToDense":return[ey(z("sparseIndices",t,n,e),z("outputShape",t,n,e),z("sparseValues",t,n,e),z("defaultValue",t,n,e))];default:throw TypeError("Node type "+t.op+" is not implemented")}},QQ=function(t,n,e){switch(t.op){case"Max":var r=z("axis",t,n,e),i=z("keepDims",t,n,e);return[us(z("x",t,n,e),r,i)];case"Mean":return r=z("axis",t,n,e),i=z("keepDims",t,n,e),[gn(z("x",t,n,e),r,i)];case"Min":return r=z("axis",t,n,e),i=z("keepDims",t,n,e),[Kg(z("x",t,n,e),r,i)];case"Sum":return r=z("axis",t,n,e),i=z("keepDims",t,n,e),[zr(z("x",t,n,e),r,i)];case"All":return r=z("axis",t,n,e),i=z("keepDims",t,n,e),[qg(z("x",t,n,e),r,i)];case"Any":return r=z("axis",t,n,e),i=z("keepDims",t,n,e),[zf(z("x",t,n,e),r,i)];case"ArgMax":return r=z("axis",t,n,e),[Bf(z("x",t,n,e),r)];case"ArgMin":return r=z("axis",t,n,e),[nC(z("x",t,n,e),r)];case"Prod":return r=z("axis",t,n,e),i=z("keepDims",t,n,e),[Xg(z("x",t,n,e),r,i)];default:throw TypeError("Node type "+t.op+" is not implemented")}},ZQ=function(t,n,e){switch(t.op){case"ConcatV2":case"Concat":var r=z("axis",t,n,e),i=z("tensors",t,n,e);return[lr(i,r)];case"GatherV2":case"Gather":r=z("axis",t,n,e);var o=z("x",t,n,e),a=z("indices",t,n,e);return[_c(o,a.asType("int32"),r)];case"ReverseV2":case"Reverse":return r=z("axis",t,n,e),o=z("x",t,n,e),[xo(o,r)];case"Slice":var s=z("begin",t,n,e),u=z("size",t,n,e);return[ni(z("x",t,n,e),s,u)];case"StridedSlice":s=z("begin",t,n,e);var l=z("end",t,n,e),c=z("strides",t,n,e),d=z("beginMask",t,n,e),f=z("endMask",t,n,e),p=z("ellipsisMask",t,n,e),h=z("newAxisMask",t,n,e),v=z("shrinkAxisMask",t,n,e),g=z("x",t,n,e);if(s.length===1&&g.shape.length>1)for(var m=1;m<g.shape.length;m++)s.push(0),l.push(g.shape[m]),c.push(c[0]);return[aC(g,s,l,c,d,f,p,h,v)];case"Pack":return ee(function(){var N=z("axis",t,n,e),k=z("tensors",t,n,e),M=k[0].shape,D=k[0].squeeze().shape,R=k.map(function(O){var P=Fe.arraysEqual(O.shape,M);if(!P&&!Fe.arraysEqual(O.squeeze().shape,D))throw new Error("the input tensors shape does not match");return P?O:O.reshape(M)});return[$i(R,N)]});case"Unpack":return ee(function(){var N=z("axis",t,n,e),k=z("tensor",t,n,e);return du(k,N)});case"Tile":var y=z("reps",t,n,e);return[Qa(z("x",t,n,e),y)];case"Split":case"SplitV":r=z("axis",t,n,e);var b=z("numOrSizeSplits",t,n,e);return Go(z("x",t,n,e),b,r);case"ScatterNd":a=z("indices",t,n,e);var w=z("values",t,n,e),x=z("shape",t,n,e);return[uC(a,w,x)];case"GatherNd":var C=z("x",t,n,e);return a=z("indices",t,n,e),[lC(C,a)];case"SparseToDense":a=z("sparseIndices",t,n,e),x=z("outputShape",t,n,e);var E=z("sparseValues",t,n,e),S=z("defaultValue",t,n,e);return[ey(a,E,x,E.dtype===S.dtype?S:S.asType(E.dtype))];default:throw TypeError("Node type "+t.op+" is not implemented")}},eZ=function(t,n,e){switch(t.op){case"FFT":return[hp(z("x",t,n,e))];case"IFFT":return[ic(z("x",t,n,e))];case"RFFT":return[mp(z("x",t,n,e))];case"IRFFT":return[Zg(z("x",t,n,e))];default:throw TypeError("Node type "+t.op+" is not implemented")}},tZ=function(t,n,e){switch(t.op){case"Cast":return[Sg(z("x",t,n,e),z("dtype",t,n,e))];case"ExpandDims":var r=z("axis",t,n,e);return[Hr(z("x",t,n,e),r)];case"Squeeze":return r=z("axis",t,n,e),[ip(z("x",t,n,e),r)];case"Reshape":return[rp(z("x",t,n,e),z("shape",t,n,e))];case"PadV2":case"Pad":return[ys(z("x",t,n,e),g1(z("padding",t,n,e),2),z("constantValue",t,n,e))];case"SpaceToBatchND":var i=z("blockShape",t,n,e),o=g1(z("paddings",t,n,e),2);return[Cg(z("x",t,n,e),i,o)];case"BatchToSpaceND":i=z("blockShape",t,n,e);var a=g1(z("crops",t,n,e),2);return[xg(z("x",t,n,e),i,a)];case"DepthToSpace":var s=z("blockSize",t,n,e),u=z("dataFormat",t,n,e).toUpperCase();return[aE(z("x",t,n,e),s,u)];default:throw TypeError("Node type "+t.op+" is not implemented")}};function Mk(t,n,e){var r=function(i,o,a){switch(i.category){case"arithmetic":return BQ(i,o,a);case"basic_math":return jQ(i,o,a);case"control":return $Q(i,o,a);case"convolution":return UQ(i,o,a);case"creation":return WQ(i,o,a);case"dynamic":return HQ(i,o,a);case"evaluation":return GQ(i,o,a);case"image":return KQ(i,o,a);case"graph":return qQ(i,o,a);case"logical":return XQ(i,o,a);case"matrices":return YQ(i,o,a);case"normalization":return JQ(i,o,a);case"reduction":return QQ(i,o,a);case"slice_join":return ZQ(i,o,a);case"spectral":return eZ(i,o,a);case"transformation":return tZ(i,o,a);case"custom":var s=J4(i.op);if(s&&s.customExecutor)return s.customExecutor(new zQ(i,o,a));throw TypeError("Custom op "+i.op+" is not registered.");default:throw TypeError("Unknown op '"+i.op+"'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()")}}(t,n,e);return r instanceof Promise?r.then(function(i){return[].concat(i)}):[].concat(r)}var Pk=function(){function t(n,e){this.weightMap=n,this.tensorArrayMap=e,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}return t.prototype.newFrame=function(n,e){return{id:n,frameName:e,iterationId:0}},Object.defineProperty(t.prototype,"currentContext",{get:function(){return this.contexts},set:function(n){this.contexts!==n&&(this.contexts=n,this.generateCurrentContextIds())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentContextId",{get:function(){return this._currentContextIds[0]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentContextIds",{get:function(){return this._currentContextIds},enumerable:!0,configurable:!0}),t.prototype.generateCurrentContextIds=function(){for(var n=[],e=0;e<this.contexts.length-1;e++){var r=this.contexts.slice(0,this.contexts.length-e);n.push(this.contextIdforContexts(r))}n.push(""),this._currentContextIds=n},t.prototype.contextIdforContexts=function(n){return n?n.map(function(e){return e.id===0&&e.iterationId===0?"":e.frameName+"-"+e.iterationId}).join("/"):""},t.prototype.enterFrame=function(n){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,n)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))},t.prototype.exitFrame=function(){if(!(this.contexts&&this.contexts.length>1))throw new Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()},t.prototype.nextIteration=function(){if(!(this.contexts&&this.contexts.length>0))throw new Error("Cannot increase frame iteration, the context is empty");this.contexts=this.contexts.slice(),this.lastId++;var n=Object.assign({},this.contexts[this.contexts.length-1]);n.iterationId+=1,n.id=this.lastId,this.contexts.splice(-1,1,n),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))},t.prototype.getWeight=function(n){return this.weightMap[n]},t.prototype.addTensorArray=function(n){this.tensorArrayMap[n.id]=n},t.prototype.getTensorArray=function(n){return this.tensorArrayMap[n]},t}();function Lk(t,n,e){for(var r=new Set,i=[],o=null,a=null,s=new Set,u=n.slice();u.length>0;){var l=u.pop();(tF(l)||oZ(l))&&o==null&&(a=(o=l).children.map(function(c){return c.name}).filter(function(c){return r.has(c)})),r.add(l.name),e[l.name]==null&&t[l.name]==null&&(l.inputs.length!==0?l.inputs.forEach(function(c){s.has(c.name)||(s.add(c.name),u.push(c))}):i.push(l.name))}return{inputs:t,outputs:n,usedNodes:r,missingInputs:i,dynamicNode:o,syncInputs:a}}function nZ(t,n,e){var r=e.usedNodes,i=e.inputs,o=[];Object.keys(i).map(function(l){return t.nodes[l]}).forEach(function(l){r.has(l.name)&&o.push(l)}),t.weights.forEach(function(l){r.has(l.name)&&o.push(l)});for(var a=new Set,s=[];o.length>0;){var u=o.pop();a.add(u.name),n[u.name]||s.push(u),u.children.forEach(function(l){!a.has(l.name)&&r.has(l.name)&&l.inputs.every(function(c){return a.has(c.name)})&&o.push(l)})}return s}var rZ=["Switch","Merge","Enter","Exit","NextIteration"],iZ=["NonMaxSuppressionV2","NonMaxSuppressionV3","Where"];function tF(t){return rZ.indexOf(t.op)>=0}function oZ(t){return iZ.indexOf(t.op)>=0}var aZ=function(){function t(n){this.graph=n,this.compiledMap=new Map,this._weightMap={},this.SEPERATOR=",",this.placeholders=n.placeholders,this._outputs=n.outputs}return Object.defineProperty(t.prototype,"weightMap",{get:function(){return this._weightMap},set:function(n){var e=Object.keys(n).map(function(r){return n[r].map(function(i){return i.id})});this.weightIds=[].concat.apply([],e),this._weightMap=n},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputs",{get:function(){return this.placeholders.map(function(n){return{name:n.name,shape:n.attrParams.shape?n.attrParams.shape.value:void 0,dtype:n.attrParams.dtype?n.attrParams.dtype.value:void 0}})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outputs",{get:function(){return this._outputs.map(function(n){return{name:n.name,shape:n.attrParams.shape?n.attrParams.shape.value:void 0,dtype:n.attrParams.dtype?n.attrParams.dtype.value:void 0}})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputNodes",{get:function(){return this.placeholders.map(function(n){return n.name})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outputNodes",{get:function(){return this.outputs.map(function(n){return n.name})},enumerable:!0,configurable:!0}),t.prototype.getCompilationKey=function(n,e){var r=n.map(function(o){return o.name}).sort(),i=e.map(function(o){return o.name}).sort();return r.join(this.SEPERATOR)+"--"+i.join(this.SEPERATOR)},t.prototype.compile=function(n,e){var r=Lk(n,e,this.weightMap),i=r.missingInputs,o=r.dynamicNode,a=r.syncInputs;if(o!=null)throw new Error("This execution contains the node '"+o.name+"', which has the dynamic op '"+o.op+"'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs ["+a+"]");if(i.length>0){var s=e.map(function(l){return l.name}),u=Object.keys(n);throw new Error("Cannot compute the outputs ["+s+"] from the provided inputs ["+u+"]. Missing the following inputs: ["+i+"]")}return nZ(this.graph,this.weightMap,r)},t.prototype.execute=function(n,e){var r=this,i=Object.keys(n).sort();this.checkInputs(n),this.checkInputShapeAndType(n),this.checkOutputs(e);var o=i.map(function(c){return r.graph.nodes[c]}),a=e.map(function(c){return r.graph.nodes[Zd(c)[0]]}),s=this.getCompilationKey(o,a),u=this.compiledMap.get(s);u==null&&(u=this.compile(n,a),this.compiledMap.set(s,u));var l={};return ee(function(){var c=new Pk(r._weightMap,l),d=Bw({},r.weightMap);Object.keys(n).forEach(function(m){d[m]=[n[m]]});for(var f=r.getFrozenTensorIds(d),p={},h=0;h<u.length;h++){var v=u[h];if(!d[v.name]){var g=Mk(v,d,c);if(g instanceof Promise)throw new Error("The execution of the op '"+v.op+"' returned a promise. Please use model.executeAsync() instead.");d[v.name]=g,r.checkTensorForDisposal(v.name,v,d,c,f,e,p)}}return e.map(function(m){return vr(m,d,c)})})},t.prototype.getFrozenTensorIds=function(n){var e=[].concat.apply([],Object.keys(n).map(function(r){return n[r]}).map(function(r){return r.map(function(i){return i.id})}));return new Set(e)},t.prototype.checkTensorForDisposal=function(n,e,r,i,o,a,s){e.category!=="control"&&a.indexOf(n)===-1&&(r[n].forEach(function(u){u!=null&&(s[u.id]=(s[u.id]||0)+e.children.length)}),e.inputs.forEach(function(u){if(u.category!=="control"){var l=rQ(u.name,r,i);l!=null&&l.forEach(function(c){if(c&&!o.has(c.id)){var d=s[c.id];d===1?(c.dispose(),delete s[c.id]):d!=null&&s[c.id]--}})}}))},t.prototype.executeAsync=function(n,e){return hu(this,void 0,void 0,function(){var r,i,o,a,s,u,l=this;return mu(this,function(c){switch(c.label){case 0:return this.checkInputs(n),this.checkInputShapeAndType(n),this.checkOutputs(e),r={},i=new Pk(this._weightMap,r),[4,this.executeWithControlFlow(n,i,e)];case 1:return o=c.sent(),a=e.map(function(d){return vr(d,o,i)}),s=new Set(a.map(function(d){return d.id})),u=new Set(Object.keys(n).map(function(d){return n[d].id})),Object.keys(o).forEach(function(d){o[d].forEach(function(f){!f||f.isDisposed||s.has(f.id)||u.has(f.id)||l.weightIds.indexOf(f.id)!==-1||f.dispose()})}),[2,a]}})})},t.prototype.executeWithControlFlow=function(n,e,r){return hu(this,void 0,void 0,function(){var i,o,a,s,u,l,c,d,f,p,h,v,g,m,y,b,w=this;return mu(this,function(x){switch(x.label){case 0:i=Object.keys(n),o=i.map(function(C){return w.graph.nodes[C]}),a=r.map(function(C){return w.graph.nodes[Zd(C)[0]]}),s=Lk(n,a,this.weightMap),u=s.usedNodes,l=s.missingInputs,c=s.dynamicNode,d=s.syncInputs,f=o.concat(this.graph.weights).map(function(C){return{node:C,contexts:e.currentContext}}),p=Bw({},this.weightMap),Object.keys(n).forEach(function(C){p[C]=[n[C]]}),h={},v=this.getFrozenTensorIds(p),g={},x.label=1;case 1:return f.length>0?(m=this.processStack(o,f,e,p,g,v,r,h,u),[4,Promise.all(m)]):[3,3];case 2:return x.sent(),[3,1];case 3:if(c==null&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead."),(y=a.filter(function(C){return!tF(C)&&!vr(C.name,p,e)}).map(function(C){return C.name})).length>0)throw b="",c!=null&&(b="Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs ["+d+"]"),new Error("Cannot compute the outputs ["+y+"] from the provided inputs ["+i+"]. Consider providing the following inputs: ["+l+"]. "+b);return[2,p]}})})},t.prototype.processStack=function(n,e,r,i,o,a,s,u,l){for(var c=this,d=[],f=function(){var h=e.pop();r.currentContext=h.contexts;var v="";if(h.node.op==="Enter"&&z("isConstant",h.node,i,r)&&(v=gm(h.node.name,r)[0]),n.indexOf(h.node)===-1){var g=Mk(h.node,i,r);v||(v=gm(h.node.name,r)[0]);var m=r.currentContext;g instanceof Promise?d.push(g.then(function(y){return i[v]=y,r.currentContext=m,c.checkTensorForDisposal(v,h.node,i,r,a,s,u),c.processChildNodes(h.node,e,r,i,o,l),y})):(i[v]=g,p.checkTensorForDisposal(v,h.node,i,r,a,s,u),p.processChildNodes(h.node,e,r,i,o,l))}else p.processChildNodes(h.node,e,r,i,o,l)},p=this;e.length>0;)f();return d},t.prototype.processChildNodes=function(n,e,r,i,o,a){n.children.forEach(function(s){var u=gm(s.name,r)[0];!o[u]&&a.has(s.name)&&(s.op==="Merge"?s.inputNames.some(function(l){return!!vr(l,i,r)})&&(o[u]=!0,e.push({contexts:r.currentContext,node:s})):s.inputNames.every(function(l){return!!vr(l,i,r)})&&(o[u]=!0,e.push({contexts:r.currentContext,node:s})))})},t.prototype.dispose=function(){var n=this;Object.keys(this.weightMap).forEach(function(e){return n.weightMap[e].forEach(function(r){return r.dispose()})})},t.prototype.checkInputShapeAndType=function(n){var e=this;Object.keys(n).forEach(function(r){var i=n[r],o=e.graph.nodes[r];if(o.attrParams.shape&&o.attrParams.shape.value){var a=o.attrParams.shape.value,s=a.length===i.shape.length&&i.shape.every(function(u,l){return a[l]===-1||a[l]===u});Fe.assert(s,function(){return"The shape of dict['"+o.name+"'] provided in model.execute(dict) must be ["+a+"], but was ["+i.shape+"]"})}o.attrParams.dtype&&o.attrParams.dtype.value&&Fe.assert(i.dtype===o.attrParams.dtype.value,function(){return"The dtype of dict['"+o.name+"'] provided in model.execute(dict) must be "+o.attrParams.dtype.value+", but was "+i.dtype})})},t.prototype.checkInputs=function(n){var e=this,r=Object.keys(n).filter(function(i){return!e.graph.nodes[i]});if(r.length>0)throw new Error("The dict provided in model.execute(dict) has keys: ["+r+"] that are not part of graph")},t.prototype.checkOutputs=function(n){var e=this;n.forEach(function(r){var i=Zd(r)[0];if(!e.graph.nodes[i])throw new Error("The output '"+r+"' is not found in the graph")})},t}(),sZ="?tfjs-format=file",uZ="model.json",nF=function(){function t(n,e){e===void 0&&(e={}),this.modelUrl=n,this.loadOptions=e,this.version="n/a",e==null&&(this.loadOptions={})}return Object.defineProperty(t.prototype,"modelVersion",{get:function(){return this.version},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputNodes",{get:function(){return this.executor.inputNodes},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outputNodes",{get:function(){return this.executor.outputNodes},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputs",{get:function(){return this.executor.inputs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outputs",{get:function(){return this.executor.outputs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"weights",{get:function(){return this.executor.weightMap},enumerable:!0,configurable:!0}),t.prototype.findIOHandler=function(){var n=this.modelUrl;if(n.load!=null)this.handler=n;else if(this.loadOptions.requestInit!=null)this.handler=Yr.browserHTTPRequest(n,this.loadOptions);else{var e=Yr.getLoadHandlers(n,this.loadOptions.onProgress);if(e.length===0)e.push(Yr.browserHTTPRequest(n,this.loadOptions));else if(e.length>1)throw new Error("Found more than one ("+e.length+") load handlers for URL '"+[n]+"'");this.handler=e[0]}},t.prototype.load=function(){return hu(this,void 0,void 0,function(){var n,e,r;return mu(this,function(i){switch(i.label){case 0:if(this.findIOHandler(),this.handler.load==null)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");return[4,this.handler.load()];case 1:return n=i.sent(),e=n.modelTopology,this.version=e.versions.producer+"."+e.versions.minConsumer,r=Yr.decodeWeights(n.weightData,n.weightSpecs),this.executor=new aZ(LQ.Instance.transformGraph(e)),this.executor.weightMap=this.convertTensorMapToTensorsMap(r),[2,!0]}})})},t.prototype.predict=function(n,e){return this.execute(n,this.outputNodes)},t.prototype.normalizeInputs=function(n){if(!(n instanceof _t||Array.isArray(n)))return n;if((n=Array.isArray(n)?n:[n]).length!==this.inputNodes.length)throw new Error("Input tensor count mismatch,the graph model has "+this.inputNodes.length+" placeholders, while there are "+n.length+" input tensors.");return this.inputNodes.reduce(function(e,r,i){return e[r]=n[i],e},{})},t.prototype.normalizeOutputs=function(n){return n=n||this.outputNodes,Array.isArray(n)?n:[n]},t.prototype.execute=function(n,e){n=this.normalizeInputs(n),e=this.normalizeOutputs(e);var r=this.executor.execute(n,e);return r.length>1?r:r[0]},t.prototype.executeAsync=function(n,e){return hu(this,void 0,void 0,function(){var r;return mu(this,function(i){switch(i.label){case 0:return n=this.normalizeInputs(n),e=this.normalizeOutputs(e),[4,this.executor.executeAsync(n,e)];case 1:return[2,(r=i.sent()).length>1?r:r[0]]}})})},t.prototype.convertTensorMapToTensorsMap=function(n){return Object.keys(n).reduce(function(e,r){return e[r]=[n[r]],e},{})},t.prototype.dispose=function(){this.executor.dispose()},t}();function lZ(t,n){return n===void 0&&(n={}),hu(this,void 0,void 0,function(){var e;return mu(this,function(r){switch(r.label){case 0:if(t==null)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");return n==null&&(n={}),n.fromTFHub&&t.load==null&&(t.endsWith("/")||(t+="/"),t=""+t+uZ+sZ),[4,(e=new nF(t,n)).load()];case 1:return r.sent(),[2,e]}})})}var rF="1.3.1";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var iF=function(t,n){return(iF=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])})(t,n)};function kt(t,n){function e(){this.constructor=t}iF(t,n),t.prototype=n===null?Object.create(n):(e.prototype=n.prototype,new e)}function xe(t,n,e,r){return new(e||(e=Promise))(function(i,o){function a(l){try{u(r.next(l))}catch(c){o(c)}}function s(l){try{u(r.throw(l))}catch(c){o(c)}}function u(l){l.done?i(l.value):new e(function(c){c(l.value)}).then(a,s)}u((r=r.apply(t,n||[])).next())})}function Se(t,n){var e,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(u){return function(l){return function(c){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){a=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){a.label=c[1];break}if(c[0]===6&&a.label<i[1]){a.label=i[1],i=c;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(c);break}i[2]&&a.ops.pop(),a.trys.pop();continue}c=n.call(t,a)}catch(d){c=[6,d],r=0}finally{e=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([u,l])}}}function Ou(t,n){return t(n={exports:{}},n.exports),n.exports}var cZ=Ou(function(t){(function(n,e,r){function i(a,s){return s.c=a.c,s.s0=a.s0,s.s1=a.s1,s.s2=a.s2,s}function o(a,s){var u=new function(d){var f,p=this,h=(f=4022871197,function(v){v=v.toString();for(var g=0;g<v.length;g++){var m=.02519603282416938*(f+=v.charCodeAt(g));m-=f=m>>>0,f=(m*=f)>>>0,f+=4294967296*(m-=f)}return 23283064365386963e-26*(f>>>0)});p.next=function(){var v=2091639*p.s0+23283064365386963e-26*p.c;return p.s0=p.s1,p.s1=p.s2,p.s2=v-(p.c=0|v)},p.c=1,p.s0=h(" "),p.s1=h(" "),p.s2=h(" "),p.s0-=h(d),p.s0<0&&(p.s0+=1),p.s1-=h(d),p.s1<0&&(p.s1+=1),p.s2-=h(d),p.s2<0&&(p.s2+=1),h=null}(a),l=s&&s.state,c=u.next;return c.int32=function(){return 4294967296*u.next()|0},c.double=function(){return c()+11102230246251565e-32*(2097152*c()|0)},c.quick=c,l&&(typeof l=="object"&&i(l,u),c.state=function(){return i(u,{})}),c}e&&e.exports?e.exports=o:r&&r.amd?r(function(){return o}):this.alea=o})(0,t,!1)}),dZ=Ou(function(t){(function(n,e,r){function i(a,s){return s.x=a.x,s.y=a.y,s.z=a.z,s.w=a.w,s}function o(a,s){var u=new function(d){var f=this,p="";f.x=0,f.y=0,f.z=0,f.w=0,f.next=function(){var v=f.x^f.x<<11;return f.x=f.y,f.y=f.z,f.z=f.w,f.w^=f.w>>>19^v^v>>>8},d===(0|d)?f.x=d:p+=d;for(var h=0;h<p.length+64;h++)f.x^=0|p.charCodeAt(h),f.next()}(a),l=s&&s.state,c=function(){return(u.next()>>>0)/4294967296};return c.double=function(){do var d=((u.next()>>>11)+(u.next()>>>0)/4294967296)/2097152;while(d===0);return d},c.int32=u.next,c.quick=c,l&&(typeof l=="object"&&i(l,u),c.state=function(){return i(u,{})}),c}e&&e.exports?e.exports=o:r&&r.amd?r(function(){return o}):this.xor128=o})(0,t,!1)}),fZ=Ou(function(t){(function(n,e,r){function i(a,s){return s.x=a.x,s.y=a.y,s.z=a.z,s.w=a.w,s.v=a.v,s.d=a.d,s}function o(a,s){var u=new function(d){var f=this,p="";f.next=function(){var v=f.x^f.x>>>2;return f.x=f.y,f.y=f.z,f.z=f.w,f.w=f.v,(f.d=f.d+362437|0)+(f.v=f.v^f.v<<4^v^v<<1)|0},f.x=0,f.y=0,f.z=0,f.w=0,f.v=0,d===(0|d)?f.x=d:p+=d;for(var h=0;h<p.length+64;h++)f.x^=0|p.charCodeAt(h),h==p.length&&(f.d=f.x<<10^f.x>>>4),f.next()}(a),l=s&&s.state,c=function(){return(u.next()>>>0)/4294967296};return c.double=function(){do var d=((u.next()>>>11)+(u.next()>>>0)/4294967296)/2097152;while(d===0);return d},c.int32=u.next,c.quick=c,l&&(typeof l=="object"&&i(l,u),c.state=function(){return i(u,{})}),c}e&&e.exports?e.exports=o:r&&r.amd?r(function(){return o}):this.xorwow=o})(0,t,!1)}),pZ=Ou(function(t){(function(n,e,r){function i(a,s){return s.x=a.x.slice(),s.i=a.i,s}function o(a,s){a==null&&(a=+new Date);var u=new function(d){var f=this;f.next=function(){var p,h,v=f.x,g=f.i;return p=v[g],h=(p^=p>>>7)^p<<24,h^=(p=v[g+1&7])^p>>>10,h^=(p=v[g+3&7])^p>>>3,h^=(p=v[g+4&7])^p<<7,p=v[g+7&7],h^=(p^=p<<13)^p<<9,v[g]=h,f.i=g+1&7,h},function(p,h){var v,g=[];if(h===(0|h))g[0]=h;else for(h=""+h,v=0;v<h.length;++v)g[7&v]=g[7&v]<<15^h.charCodeAt(v)+g[v+1&7]<<13;for(;g.length<8;)g.push(0);for(v=0;v<8&&g[v]===0;++v);for(v==8?g[7]=-1:g[v],p.x=g,p.i=0,v=256;v>0;--v)p.next()}(f,d)}(a),l=s&&s.state,c=function(){return(u.next()>>>0)/4294967296};return c.double=function(){do var d=((u.next()>>>11)+(u.next()>>>0)/4294967296)/2097152;while(d===0);return d},c.int32=u.next,c.quick=c,l&&(l.x&&i(l,u),c.state=function(){return i(u,{})}),c}e&&e.exports?e.exports=o:r&&r.amd?r(function(){return o}):this.xorshift7=o})(0,t,!1)}),hZ=Ou(function(t){(function(n,e,r){function i(a,s){return s.i=a.i,s.w=a.w,s.X=a.X.slice(),s}function o(a,s){a==null&&(a=+new Date);var u=new function(d){var f=this;f.next=function(){var p,h,v=f.w,g=f.X,m=f.i;return f.w=v=v+1640531527|0,h=g[m+34&127],p=g[m=m+1&127],h^=h<<13,p^=p<<17,h^=h>>>15,p^=p>>>12,h=g[m]=h^p,f.i=m,h+(v^v>>>16)|0},function(p,h){var v,g,m,y,b,w=[],x=128;for(h===(0|h)?(g=h,h=null):(h+="\0",g=0,x=Math.max(x,h.length)),m=0,y=-32;y<x;++y)h&&(g^=h.charCodeAt((y+32)%h.length)),y===0&&(b=g),g^=g<<10,g^=g>>>15,g^=g<<4,g^=g>>>13,y>=0&&(b=b+1640531527|0,m=(v=w[127&y]^=g+b)==0?m+1:0);for(m>=128&&(w[127&(h&&h.length||0)]=-1),m=127,y=512;y>0;--y)g=w[m+34&127],v=w[m=m+1&127],g^=g<<13,v^=v<<17,g^=g>>>15,v^=v>>>12,w[m]=g^v;p.w=b,p.X=w,p.i=m}(f,d)}(a),l=s&&s.state,c=function(){return(u.next()>>>0)/4294967296};return c.double=function(){do var d=((u.next()>>>11)+(u.next()>>>0)/4294967296)/2097152;while(d===0);return d},c.int32=u.next,c.quick=c,l&&(l.X&&i(l,u),c.state=function(){return i(u,{})}),c}e&&e.exports?e.exports=o:r&&r.amd?r(function(){return o}):this.xor4096=o})(0,t,!1)}),mZ=Ou(function(t){(function(n,e,r){function i(a,s){return s.a=a.a,s.b=a.b,s.c=a.c,s.d=a.d,s}function o(a,s){var u=new function(d){var f=this,p="";f.next=function(){var v=f.b,g=f.c,m=f.d,y=f.a;return v=v<<25^v>>>7^g,g=g-m|0,m=m<<24^m>>>8^y,y=y-v|0,f.b=v=v<<20^v>>>12^g,f.c=g=g-m|0,f.d=m<<16^g>>>16^y,f.a=y-v|0},f.a=0,f.b=0,f.c=-1640531527,f.d=1367130551,d===Math.floor(d)?(f.a=d/4294967296|0,f.b=0|d):p+=d;for(var h=0;h<p.length+20;h++)f.b^=0|p.charCodeAt(h),f.next()}(a),l=s&&s.state,c=function(){return(u.next()>>>0)/4294967296};return c.double=function(){do var d=((u.next()>>>11)+(u.next()>>>0)/4294967296)/2097152;while(d===0);return d},c.int32=u.next,c.quick=c,l&&(typeof l=="object"&&i(l,u),c.state=function(){return i(u,{})}),c}e&&e.exports?e.exports=o:r&&r.amd?r(function(){return o}):this.tychei=o})(0,t,!1)}),zs=Ou(function(t){(function(n,e){var r,i=this,o=256,a=6,s="random",u=e.pow(o,a),l=e.pow(2,52),c=2*l,d=o-1;function f(g,m,y){var b=[],w=h(function E(S,N){var k,M=[],D=typeof S;if(N&&D=="object")for(k in S)try{M.push(E(S[k],N-1))}catch{}return M.length?M:D=="string"?S:S+"\0"}((m=m==1?{entropy:!0}:m||{}).entropy?[g,v(n)]:g??function(){try{var E;return r&&(E=r.randomBytes)?E=E(o):(E=new Uint8Array(o),(i.crypto||i.msCrypto).getRandomValues(E)),v(E)}catch{var S=i.navigator,N=S&&S.plugins;return[+new Date,i,N,i.screen,v(n)]}}(),3),b),x=new function(E){var S,N=E.length,k=this,M=0,D=k.i=k.j=0,R=k.S=[];for(N||(E=[N++]);M<o;)R[M]=M++;for(M=0;M<o;M++)R[M]=R[D=d&D+E[M%N]+(S=R[M])],R[D]=S;(k.g=function(O){for(var P,A=0,I=k.i,_=k.j,F=k.S;O--;)P=F[I=d&I+1],A=A*o+F[d&(F[I]=F[_=d&_+P])+(F[_]=P)];return k.i=I,k.j=_,A})(o)}(b),C=function(){for(var E=x.g(a),S=u,N=0;E<l;)E=(E+N)*o,S*=o,N=x.g(1);for(;E>=c;)E/=2,S/=2,N>>>=1;return(E+N)/S};return C.int32=function(){return 0|x.g(4)},C.quick=function(){return x.g(4)/4294967296},C.double=C,h(v(x.S),n),(m.pass||y||function(E,S,N,k){return k&&(k.S&&p(k,x),E.state=function(){return p(x,{})}),N?(e[s]=E,S):E})(C,w,"global"in m?m.global:this==e,m.state)}function p(g,m){return m.i=g.i,m.j=g.j,m.S=g.S.slice(),m}function h(g,m){for(var y,b=g+"",w=0;w<b.length;)m[d&w]=d&(y^=19*m[d&w])+b.charCodeAt(w++);return v(m)}function v(g){return String.fromCharCode.apply(0,g)}if(e["seed"+s]=f,h(e.random(),n),t.exports){t.exports=f;try{r=require("crypto")}catch{}}})([],Math)});zs.alea=cZ,zs.xor128=dZ,zs.xorwow=fZ,zs.xorshift7=pZ,zs.xor4096=hZ,zs.tychei=mZ;var vZ=zs,oF=vZ.alea;function gZ(t,n){return Nv(t,n)}function Nv(t,n,e,r){if(e===void 0&&(e=new Map),r===void 0&&(r=new Set),t==null)return null;if(r.has(t))throw new Error("Circular references are not supported.");if(e.has(t))return e.get(t);var i=n(t);if(i.recurse&&i.value!==null)throw new Error("A deep map function may not return both a value and recurse=true.");if(i.recurse){if(cc(t)){var o=Array.isArray(t)?[]:{};for(var a in r.add(t),t){var s=Nv(t[a],n,e,r);o[a]=s}return r.delete(t),o}throw new Error("Can't recurse into non-iterable type: "+t)}return e.set(t,i.value),i.value}function yZ(t,n){return n===void 0&&(n=sF),aF(t,n)}function aF(t,n,e){e===void 0&&(e=new Set);var r=t[0];if(e.has(r))throw new Error("Circular references are not supported.");var i=n(t);if(i.recurse&&i.value!==null)throw new Error("A deep zip function may not return both a value and recurse=true.");if(i.recurse){if(cc(r)){var o=Array.isArray(r)?[]:{};e.add(r);var a=function(u){var l=aF(t.map(function(c){return c[u]}),n,e);o[u]=l};for(var s in r)a(s);return e.delete(r),o}throw new Error("Can't recurse into non-iterable type: "+r)}return i.value}function sF(t){return t===null?null:cc(t[0])?{value:null,recurse:!0}:{value:t,recurse:!1}}function uF(t,n){return xe(this,void 0,void 0,function(){var e,r,i,o,a,s;return Se(this,function(u){switch(u.label){case 0:e=new Map,Nv(t,n,e),r=0,i=Array.from(e.keys()),u.label=1;case 1:return r<i.length?(o=i[r],(a=e.get(o))instanceof Promise?[4,a]:[3,3]):[3,4];case 2:s=u.sent(),e.set(o,s),u.label=3;case 3:return r++,[3,1];case 4:return[2,Nv(t,n,e)]}})})}function cc(t){return t!=null&&!ArrayBuffer.isView(t)&&(Array.isArray(t)||typeof t=="object"&&!(t instanceof _t))}function bZ(t){return t==null||wZ(t)||Array.isArray(t)||typeof t=="object"&&t instanceof _t||Fe.isTypedArray(t)}function wZ(t){return t===null||typeof t!="object"&&typeof t!="function"}function xZ(t){return gZ(t,SZ)}function SZ(t){return t instanceof _t?{value:t.clone(),recurse:!1}:cc(t)?{value:null,recurse:!0}:{value:t,recurse:!1}}var lF=function(){function t(n){if(this.capacity=n,this.begin=0,this.end=0,n==null)throw new RangeError("Can't create a ring buffer of unknown capacity.");if(n<1)throw new RangeError("Can't create ring buffer of capacity < 1.");this.data=new Array(n),this.doubledCapacity=2*n}return t.prototype.wrap=function(n){for(;n<0;)n+=this.doubledCapacity;return n%this.doubledCapacity},t.prototype.get=function(n){if(n<0)throw new RangeError("Can't get item at a negative index.");return this.data[n%this.capacity]},t.prototype.set=function(n,e){if(n<0)throw new RangeError("Can't set item at a negative index.");this.data[n%this.capacity]=e},t.prototype.length=function(){var n=this.end-this.begin;return n<0&&(n=this.doubledCapacity+n),n},t.prototype.isFull=function(){return this.length()===this.capacity},t.prototype.isEmpty=function(){return this.length()===0},t.prototype.push=function(n){if(this.isFull())throw new RangeError("Ring buffer is full.");this.set(this.end,n),this.end=this.wrap(this.end+1)},t.prototype.pushAll=function(n){for(var e=0,r=n;e<r.length;e++){var i=r[e];this.push(i)}},t.prototype.pop=function(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);var n=this.get(this.end);return this.set(this.end,void 0),n},t.prototype.unshift=function(n){if(this.isFull())throw new RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,n)},t.prototype.shift=function(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");var n=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),n},t.prototype.shuffleExcise=function(n){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");var e=this.wrap(this.begin+n),r=this.get(e);return this.set(e,this.pop()),r},t}(),EZ=function(t){function n(){return t.call(this,n.INITIAL_CAPACITY)||this}return kt(n,t),n.prototype.isFull=function(){return!1},n.prototype.push=function(e){t.prototype.isFull.call(this)&&this.expand(),t.prototype.push.call(this,e)},n.prototype.unshift=function(e){t.prototype.isFull.call(this)&&this.expand(),t.prototype.unshift.call(this,e)},n.prototype.expand=function(){for(var e=2*this.capacity,r=new Array(e),i=this.length(),o=0;o<i;o++)r[o]=this.get(this.wrap(this.begin+o));this.data=r,this.capacity=e,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=i},n.INITIAL_CAPACITY=32,n}(lF);function cF(t){return new TZ(t)}function ZC(t){return new NZ(t)}function CZ(t,n){return new dF(t,n)}function RZ(t,n){return n===void 0&&(n=Fa.FAIL),new LZ(t,n)}var Fa,_n=function(){function t(){}return t.prototype.toArray=function(){return xe(this,void 0,void 0,function(){var n,e;return Se(this,function(r){switch(r.label){case 0:return n=[],[4,this.next()];case 1:e=r.sent(),r.label=2;case 2:return e.done?[3,4]:(n.push(e.value),[4,this.next()]);case 3:return e=r.sent(),[3,2];case 4:return[2,n]}})})},t.prototype.toArrayForTest=function(){return xe(this,void 0,void 0,function(){var n,e,r;return Se(this,function(i){switch(i.label){case 0:return n=this.prefetch(100),e=[],[4,n.next()];case 1:r=i.sent(),i.label=2;case 2:return r.done?[3,4]:(e.push(r.value),[4,n.next()]);case 3:return r=i.sent(),[3,2];case 4:return[2,e]}})})},t.prototype.resolveFully=function(){return xe(this,void 0,void 0,function(){var n;return Se(this,function(e){switch(e.label){case 0:return[4,this.next()];case 1:n=e.sent(),e.label=2;case 2:return n.done?[3,4]:[4,this.next()];case 3:return n=e.sent(),[3,2];case 4:return[2]}})})},t.prototype.resolveWhile=function(n){return xe(this,void 0,void 0,function(){var e,r;return Se(this,function(i){switch(i.label){case 0:return[4,this.next()];case 1:e=i.sent(),r=n(e.value),i.label=2;case 2:return e.done||!r?[3,4]:[4,this.next()];case 3:return e=i.sent(),r=n(e.value),[3,2];case 4:return[2]}})})},t.prototype.handleErrors=function(n){return new MZ(this,n)},t.prototype.filter=function(n){return new OZ(this,n)},t.prototype.map=function(n){return new DZ(this,n)},t.prototype.mapAsync=function(n){return new Fk(this,n)},t.prototype.serialMapAsync=function(n){return new Fk(this,n).serial()},t.prototype.flatmap=function(n){return new PZ(this,n)},t.prototype.forEachAsync=function(n){return xe(this,void 0,void 0,function(){return Se(this,function(e){return[2,this.map(n).resolveFully()]})})},t.prototype.serialForEach=function(n){return xe(this,void 0,void 0,function(){return Se(this,function(e){return[2,this.serialMapAsync(n).resolveWhile(function(r){return r===!0})]})})},t.prototype.rowMajorBatch=function(n,e){return e===void 0&&(e=!0),new AZ(this,n,e)},t.prototype.columnMajorBatch=function(n,e,r){return e===void 0&&(e=!0),r===void 0&&(r=sF),this.rowMajorBatch(n,e).map(function(i){return yZ(i,r)})},t.prototype.concatenate=function(n,e){return new dF(cF([this,n]),e)},t.prototype.take=function(n){return n<0||n==null?this:new _Z(this,n)},t.prototype.skip=function(n){return n<0||n==null?this:new IZ(this,n)},t.prototype.prefetch=function(n){return new fF(this,n)},t.prototype.shuffle=function(n,e){return new FZ(this,n,e)},t.prototype.serial=function(){return new kZ(this)},t}(),TZ=function(t){function n(e){var r=t.call(this)||this;return r.items=e,r.trav=0,r}return kt(n,t),n.prototype.summary=function(){return"Array of "+this.items.length+" items"},n.prototype.next=function(){return xe(this,void 0,void 0,function(){var e;return Se(this,function(r){return this.trav>=this.items.length?[2,{value:null,done:!0}]:(e=this.items[this.trav],this.trav++,[2,{value:xZ(e),done:!1}])})})},n}(_n),NZ=function(t){function n(e){var r=t.call(this)||this;return r.nextFn=e,r}return kt(n,t),n.prototype.summary=function(){return"Function call"},n.prototype.next=function(){return xe(this,void 0,void 0,function(){return Se(this,function(e){try{return[2,this.nextFn()]}catch(r){throw r.message="Error thrown while iterating through a dataset: "+r.message,r}return[2]})})},n}(_n),kZ=function(t){function n(e){var r=t.call(this)||this;return r.upstream=e,r.lastRead=Promise.resolve({value:null,done:!1}),r}return kt(n,t),n.prototype.summary=function(){return this.upstream.summary()+" -> Serial"},n.prototype.next=function(){return xe(this,void 0,void 0,function(){var e=this;return Se(this,function(r){return this.lastRead=this.lastRead.then(function(){return e.serialNext()}),[2,this.lastRead]})})},n.prototype.serialNext=function(){return xe(this,void 0,void 0,function(){return Se(this,function(e){return[2,this.upstream.next()]})})},n}(_n),IZ=function(t){function n(e,r){var i=t.call(this)||this;return i.upstream=e,i.maxCount=r,i.count=0,i.lastRead=Promise.resolve({value:null,done:!1}),i}return kt(n,t),n.prototype.summary=function(){return this.upstream.summary()+" -> Skip"},n.prototype.next=function(){return xe(this,void 0,void 0,function(){var e=this;return Se(this,function(r){return this.lastRead=this.lastRead.then(function(){return e.serialNext()}),[2,this.lastRead]})})},n.prototype.serialNext=function(){return xe(this,void 0,void 0,function(){var e;return Se(this,function(r){switch(r.label){case 0:return this.count++<this.maxCount?[4,this.upstream.next()]:[3,2];case 1:return(e=r.sent()).done?[2,e]:(nt(e.value),[3,0]);case 2:return[2,this.upstream.next()]}})})},n}(_n),_Z=function(t){function n(e,r){var i=t.call(this)||this;return i.upstream=e,i.maxCount=r,i.count=0,i}return kt(n,t),n.prototype.summary=function(){return this.upstream.summary()+" -> Take"},n.prototype.next=function(){return xe(this,void 0,void 0,function(){return Se(this,function(e){return this.count++>=this.maxCount?[2,{value:null,done:!0}]:[2,this.upstream.next()]})})},n}(_n),AZ=function(t){function n(e,r,i){i===void 0&&(i=!0);var o=t.call(this)||this;return o.upstream=e,o.batchSize=r,o.enableSmallLastBatch=i,o.lastRead=Promise.resolve({value:null,done:!1}),o}return kt(n,t),n.prototype.summary=function(){return this.upstream.summary()+" -> RowMajorBatch"},n.prototype.next=function(){return xe(this,void 0,void 0,function(){var e=this;return Se(this,function(r){return this.lastRead=this.lastRead.then(function(){return e.serialNext()}),[2,this.lastRead]})})},n.prototype.serialNext=function(){return xe(this,void 0,void 0,function(){var e,r;return Se(this,function(i){switch(i.label){case 0:e=[],i.label=1;case 1:return e.length<this.batchSize?[4,this.upstream.next()]:[3,3];case 2:return(r=i.sent()).done?this.enableSmallLastBatch&&e.length>0?[2,{value:e,done:!1}]:[2,{value:null,done:!0}]:(e.push(r.value),[3,1]);case 3:return[2,{value:e,done:!1}]}})})},n}(_n),OZ=function(t){function n(e,r){var i=t.call(this)||this;return i.upstream=e,i.predicate=r,i.lastRead=Promise.resolve({value:null,done:!1}),i}return kt(n,t),n.prototype.summary=function(){return this.upstream.summary()+" -> Filter"},n.prototype.next=function(){return xe(this,void 0,void 0,function(){var e=this;return Se(this,function(r){return this.lastRead=this.lastRead.then(function(){return e.serialNext()}),[2,this.lastRead]})})},n.prototype.serialNext=function(){return xe(this,void 0,void 0,function(){var e;return Se(this,function(r){switch(r.label){case 0:return[4,this.upstream.next()];case 1:return(e=r.sent()).done||this.predicate(e.value)?[2,e]:(nt(e.value),[3,0]);case 2:return[2]}})})},n}(_n),DZ=function(t){function n(e,r){var i=t.call(this)||this;return i.upstream=e,i.transform=r,i}return kt(n,t),n.prototype.summary=function(){return this.upstream.summary()+" -> Map"},n.prototype.next=function(){return xe(this,void 0,void 0,function(){var e,r,i,o,a,s,u;return Se(this,function(l){switch(l.label){case 0:return[4,this.upstream.next()];case 1:if((e=l.sent()).done)return[2,{value:null,done:!0}];for(r=go.getTensorsInContainer(e.value),i=this.transform(e.value),o=go.getTensorsInContainer(i),a=0,s=r;a<s.length;a++)u=s[a],go.isTensorInList(u,o)||u.dispose();return[2,{value:i,done:!1}]}})})},n}(_n),MZ=function(t){function n(e,r){var i=t.call(this)||this;return i.upstream=e,i.handler=r,i.count=0,i.lastRead=Promise.resolve({value:null,done:!1}),i}return kt(n,t),n.prototype.summary=function(){return this.upstream.summary()+" -> handleErrors"},n.prototype.next=function(){return xe(this,void 0,void 0,function(){var e=this;return Se(this,function(r){return this.lastRead=this.lastRead.then(function(){return e.serialNext()}),[2,this.lastRead]})})},n.prototype.serialNext=function(){return xe(this,void 0,void 0,function(){var e;return Se(this,function(r){switch(r.label){case 0:r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.upstream.next()];case 2:return[2,r.sent()];case 3:return e=r.sent(),this.handler(e)?[3,4]:[2,{value:null,done:!0}];case 4:return[3,0];case 5:return[2]}})})},n}(_n),Fk=function(t){function n(e,r){var i=t.call(this)||this;return i.upstream=e,i.transform=r,i}return kt(n,t),n.prototype.summary=function(){return this.upstream.summary()+" -> AsyncMap"},n.prototype.next=function(){return xe(this,void 0,void 0,function(){var e,r,i,o,a,s,u;return Se(this,function(l){switch(l.label){case 0:return[4,this.upstream.next()];case 1:return(e=l.sent()).done?[2,{value:null,done:!0}]:(r=go.getTensorsInContainer(e.value),[4,this.transform(e.value)]);case 2:for(i=l.sent(),o=go.getTensorsInContainer(i),a=0,s=r;a<s.length;a++)u=s[a],go.isTensorInList(u,o)||u.dispose();return[2,{value:i,done:!1}]}})})},n}(_n),e2=function(t){function n(){var e=t.call(this)||this;return e.outputQueue=new EZ,e.lastRead=Promise.resolve({value:null,done:!1}),e}return kt(n,t),n.prototype.next=function(){return xe(this,void 0,void 0,function(){var e=this;return Se(this,function(r){return this.lastRead=this.lastRead.then(function(){return e.serialNext()}),[2,this.lastRead]})})},n.prototype.serialNext=function(){return xe(this,void 0,void 0,function(){return Se(this,function(e){switch(e.label){case 0:return this.outputQueue.length()!==0?[3,2]:[4,this.pump()];case 1:return e.sent()?[3,0]:[2,{value:null,done:!0}];case 2:return[2,{value:this.outputQueue.shift(),done:!1}]}})})},n}(_n),PZ=function(t){function n(e,r){var i=t.call(this)||this;return i.upstream=e,i.transform=r,i}return kt(n,t),n.prototype.summary=function(){return this.upstream.summary()+" -> Flatmap"},n.prototype.pump=function(){return xe(this,void 0,void 0,function(){var e,r,i,o,a,s,u;return Se(this,function(l){switch(l.label){case 0:return[4,this.upstream.next()];case 1:if((e=l.sent()).done)return[2,!1];for(r=go.getTensorsInContainer(e.value),i=this.transform(e.value),o=go.getTensorsInContainer(i),this.outputQueue.pushAll(i),a=0,s=r;a<s.length;a++)u=s[a],go.isTensorInList(u,o)||u.dispose();return[2,!0]}})})},n}(e2),dF=function(t){function n(e,r){var i=t.call(this)||this;return i.baseErrorHandler=r,i.lastRead=null,i.iterator=null,i.moreIterators=e,i}return kt(n,t),n.prototype.summary=function(){return"TODO: fill in upstream of chained summaries -> Chained"},n.prototype.next=function(){return xe(this,void 0,void 0,function(){return Se(this,function(e){return this.lastRead=this.readFromChain(this.lastRead),[2,this.lastRead]})})},n.prototype.readFromChain=function(e){return xe(this,void 0,void 0,function(){var r,i;return Se(this,function(o){switch(o.label){case 0:return[4,e];case 1:return o.sent(),this.iterator!=null?[3,3]:[4,this.moreIterators.next()];case 2:if((r=o.sent()).done)return[2,{value:null,done:!0}];this.iterator=r.value,this.baseErrorHandler!=null&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler)),o.label=3;case 3:return[4,this.iterator.next()];case 4:return(i=o.sent()).done?(this.iterator=null,[2,this.readFromChain(e)]):[2,i]}})})},n}(_n);(function(t){t[t.FAIL=0]="FAIL",t[t.SHORTEST=1]="SHORTEST",t[t.LONGEST=2]="LONGEST"})(Fa||(Fa={}));var LZ=function(t){function n(e,r){r===void 0&&(r=Fa.FAIL);var i=t.call(this)||this;return i.iterators=e,i.mismatchMode=r,i.count=0,i.currentPromise=null,i}return kt(n,t),n.prototype.summary=function(){return"{TODO: fill in upstream of zip summaries} -> Zip"},n.prototype.nextState=function(e){return xe(this,void 0,void 0,function(){function r(s){return s instanceof _n?{value:s.next().then(function(u){return i++,u.done&&o++,u.value}),recurse:!1}:{value:null,recurse:!0}}var i,o,a;return Se(this,function(s){switch(s.label){case 0:return[4,e];case 1:return s.sent(),i=0,o=0,[4,uF(this.iterators,r)];case 2:if(a=s.sent(),i===o)return[2,{value:null,done:!0}];if(o>0)switch(this.mismatchMode){case Fa.FAIL:throw new Error("Zipped streams should have the same length. Mismatched at element "+this.count+".");case Fa.SHORTEST:return[2,{value:null,done:!0}];case Fa.LONGEST:}return this.count++,[2,{value:a,done:!1}]}})})},n.prototype.next=function(){return xe(this,void 0,void 0,function(){return Se(this,function(e){return this.currentPromise=this.nextState(this.currentPromise),[2,this.currentPromise]})})},n}(_n),fF=function(t){function n(e,r){var i=t.call(this)||this;return i.upstream=e,i.bufferSize=r,i.buffer=new lF(r),i}return kt(n,t),n.prototype.summary=function(){return this.upstream.summary()+" -> Prefetch"},n.prototype.refill=function(){for(;!this.buffer.isFull();){var e=this.upstream.next();this.buffer.push(e)}},n.prototype.next=function(){return this.refill(),this.buffer.shift()},n}(_n),FZ=function(t){function n(e,r,i){var o=t.call(this,e,r)||this;return o.upstream=e,o.windowSize=r,o.upstreamExhausted=!1,o.random=oF(i||Fe.now().toString()),o.lastRead=Promise.resolve({value:null,done:!1}),o}return kt(n,t),n.prototype.next=function(){return xe(this,void 0,void 0,function(){var e=this;return Se(this,function(r){return this.lastRead=this.lastRead.then(function(){return e.serialNext()}),[2,this.lastRead]})})},n.prototype.randomInt=function(e){return Math.floor(this.random()*e)},n.prototype.chooseIndex=function(){return this.randomInt(this.buffer.length())},n.prototype.serialNext=function(){return xe(this,void 0,void 0,function(){var e,r;return Se(this,function(i){switch(i.label){case 0:this.upstreamExhausted||this.refill(),i.label=1;case 1:return this.buffer.isEmpty()?[3,3]:(e=this.chooseIndex(),[4,this.buffer.shuffleExcise(e)]);case 2:return(r=i.sent()).done?(this.upstreamExhausted=!0,[3,1]):(this.refill(),[2,r]);case 3:return[2,{value:null,done:!0}]}})})},n}(fF),Cp=function(){function t(){this.size=null}return t.prototype.batch=function(n,e){var r=this;e===void 0&&(e=!0);var i=this;return Fe.assert(n>0,function(){return`batchSize needs to be positive, but it is
      `+n}),Cr(function(){return xe(r,void 0,void 0,function(){return Se(this,function(o){switch(o.label){case 0:return[4,i.iterator()];case 1:return[2,o.sent().columnMajorBatch(n,e,jZ)]}})})},this.size===1/0||this.size==null?this.size:e?Math.ceil(this.size/n):Math.floor(this.size/n))},t.prototype.concatenate=function(n){var e=this,r=this;return Cr(function(){return xe(e,void 0,void 0,function(){var i,o;return Se(this,function(a){switch(a.label){case 0:return[4,r.iterator()];case 1:return o=(i=a.sent()).concatenate,[4,n.iterator()];case 2:return[2,o.apply(i,[a.sent()])]}})})},this.size===1/0||n.size===1/0?1/0:this.size!=null&&n.size!=null?this.size+n.size:null)},t.prototype.filter=function(n){var e=this,r=this;return Cr(function(){return xe(e,void 0,void 0,function(){return Se(this,function(i){switch(i.label){case 0:return[4,r.iterator()];case 1:return[2,i.sent().filter(function(o){return ee(function(){return n(o)})})]}})})},this.size===1/0?1/0:null)},t.prototype.forEachAsync=function(n){return xe(this,void 0,void 0,function(){return Se(this,function(e){switch(e.label){case 0:return[4,this.iterator()];case 1:return[2,e.sent().forEachAsync(n)]}})})},t.prototype.forEach=function(n){return xe(this,void 0,void 0,function(){return Se(this,function(e){return gg("dataset.forEach() is deprecated and will be removed. Please use dataset.forEachAsync() instead"),[2,this.forEachAsync(n)]})})},t.prototype.map=function(n){var e=this,r=this;return Cr(function(){return xe(e,void 0,void 0,function(){return Se(this,function(i){switch(i.label){case 0:return[4,r.iterator()];case 1:return[2,i.sent().map(function(o){return ee(function(){return n(o)})})]}})})},this.size)},t.prototype.mapAsync=function(n){var e=this,r=this;return Cr(function(){return xe(e,void 0,void 0,function(){return Se(this,function(i){switch(i.label){case 0:return[4,r.iterator()];case 1:return[2,i.sent().mapAsync(n)]}})})},this.size)},t.prototype.prefetch=function(n){var e=this;if(n==null)throw new RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");var r=this;return Cr(function(){return xe(e,void 0,void 0,function(){return Se(this,function(i){switch(i.label){case 0:return[4,r.iterator()];case 1:return[2,i.sent().prefetch(n)]}})})},this.size)},t.prototype.repeat=function(n){var e=this,r=this;return Cr(function(){return xe(e,void 0,void 0,function(){var i=this;return Se(this,function(o){return[2,CZ(ZC(function(){return xe(i,void 0,void 0,function(){var a;return Se(this,function(s){switch(s.label){case 0:return a={},[4,r.iterator()];case 1:return[2,(a.value=s.sent(),a.done=!1,a)]}})})}).take(n))]})})},this.size!=null&&n>0?this.size*n:n===0?0:this.size!=null&&(n===void 0||n<0)?1/0:null)},t.prototype.skip=function(n){var e=this,r=this;return Cr(function(){return xe(e,void 0,void 0,function(){return Se(this,function(i){switch(i.label){case 0:return[4,r.iterator()];case 1:return[2,i.sent().skip(n)]}})})},this.size!=null&&n>=0&&this.size>=n?this.size-n:this.size!=null&&(this.size<n||n===void 0||n<0)?0:null)},t.prototype.shuffle=function(n,e,r){var i=this;if(r===void 0&&(r=!0),n==null||n<0)throw this.size==null?new RangeError("`Dataset.shuffle()` requires bufferSize to be specified."):new RangeError("`Dataset.shuffle()` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for `tf.Tensor`s), consider setting bufferSize to the dataset size ("+this.size+" elements)");var o=this,a=oF(e||Fe.now().toString());return Cr(function(){return xe(i,void 0,void 0,function(){var s;return Se(this,function(u){switch(u.label){case 0:return s=a.int32(),r&&(s+=a.int32()),[4,o.iterator()];case 1:return[2,u.sent().shuffle(n,s.toString())]}})})},this.size)},t.prototype.take=function(n){var e=this,r=this;return Cr(function(){return xe(e,void 0,void 0,function(){return Se(this,function(i){switch(i.label){case 0:return[4,r.iterator()];case 1:return[2,i.sent().take(n)]}})})},this.size!=null&&this.size>n?n:this.size!=null&&this.size<=n?this.size:null)},t.prototype.toArray=function(){return xe(this,void 0,void 0,function(){return Se(this,function(n){switch(n.label){case 0:if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return[4,this.iterator()];case 1:return[2,n.sent().toArray()]}})})},t.prototype.toArrayForTest=function(){return xe(this,void 0,void 0,function(){return Se(this,function(n){switch(n.label){case 0:if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return[4,this.iterator()];case 1:return[2,n.sent().toArrayForTest()]}})})},t.MAX_BUFFER_SIZE=1e4,t}();function Cr(t,n){return n===void 0&&(n=null),new(function(e){function r(){var i=e!==null&&e.apply(this,arguments)||this;return i.size=n,i}return kt(r,e),r.prototype.iterator=function(){return xe(this,void 0,void 0,function(){return Se(this,function(i){return[2,t()]})})},r}(Cp))}function zZ(t){var n=this;return Cr(function(){return xe(n,void 0,void 0,function(){return Se(this,function(e){return[2,cF(t)]})})},t.length)}function BZ(t){var n,e=this;if(!cc(t))throw new Error("The argument to zip() must be an object or array.");if(Array.isArray(t))for(var r=0;r<t.length;r++)n=n==null?t[r].size:Math.min(n,t[r].size);else if(t instanceof Object)for(var i in t)n=n==null?t[i].size:Math.min(n,t[i].size);return Cr(function(){return xe(e,void 0,void 0,function(){return Se(this,function(o){switch(o.label){case 0:return[4,uF(t,function(a){if(a instanceof Cp)return{value:a.iterator(),recurse:!1};if(cc(a))return{value:null,recurse:!0};throw new Error("Leaves of the structure passed to zip() must be Datasets, not primitives.")})];case 1:return[2,RZ(o.sent(),Fa.SHORTEST)]}})})},n)}function jZ(t){return t===null?null:bZ(t[0])?{value:VZ(t),recurse:!1}:{value:null,recurse:!0}}function VZ(t){if(t.length===0)throw new Error("Can't make a batch of zero elements.");return t[0]instanceof _t?$i(t):mn(t)}var pF=function(t){function n(e){var r=t.call(this)||this;return r.input=e,r}return kt(n,t),n.prototype.iterator=function(){return xe(this,void 0,void 0,function(){var e,r;return Se(this,function(i){switch(i.label){case 0:return[4,this.input.iterator()];case 1:return e=i.sent(),r=e.decodeUTF8(),[2,r.split(`
`).map(function(o){return o.endsWith("\r")&&(o=o.slice(0,-1)),o})]}})})},n}(Cp),Ih='"',dd=Symbol("out"),zk=Symbol("field"),_h=Symbol("quote"),y1=Symbol("quoteafterquote"),Bk=Symbol("quoteinquote"),hF=function(t){function n(e,r){var i=t.call(this)||this;return i.input=e,i.hasHeader=!0,i.fullColumnNames=null,i.columnNamesValidated=!1,i.columnConfigs=null,i.configuredColumnsOnly=!1,i.delimiter=",",i.delimWhitespace=!1,i.base=new pF(e),r||(r={}),i.hasHeader=r.hasHeader!==!1,i.fullColumnNames=r.columnNames,i.columnConfigs=r.columnConfigs,i.configuredColumnsOnly=r.configuredColumnsOnly,r.delimWhitespace?(Fe.assert(r.delimiter==null,function(){return"Delimiter should not be provided when delimWhitespace is true."}),i.delimWhitespace=!0,i.delimiter=" "):i.delimiter=r.delimiter?r.delimiter:",",i}return kt(n,t),n.prototype.columnNames=function(){return xe(this,void 0,void 0,function(){return Se(this,function(e){switch(e.label){case 0:return this.columnNamesValidated?[3,2]:[4,this.setColumnNames()];case 1:e.sent(),e.label=2;case 2:return[2,this.configuredColumnsOnly?Object.keys(this.columnConfigs):this.fullColumnNames]}})})},n.prototype.setColumnNames=function(){return xe(this,void 0,void 0,function(){var e,r,i,o,a,s,u=this;return Se(this,function(l){switch(l.label){case 0:return[4,this.maybeReadHeaderLine()];case 1:if(e=l.sent(),!this.fullColumnNames&&!e)throw new Error("Column names must be provided if there is no header line.");if(this.fullColumnNames&&e&&Fe.assert(e.length===this.fullColumnNames.length,function(){return"The length of provided columnNames ("+u.fullColumnNames.length.toString()+") does not match the length of the header line read from file ("+e.length.toString()+")."}),this.fullColumnNames||(this.fullColumnNames=e),r=this.fullColumnNames.reduce(function(c,d){return c[d]=c[d]+1||1,c},{}),i=Object.keys(r).filter(function(c){return r[c]>1}),Fe.assert(i.length===0,function(){return"Duplicate column names found: "+i.toString()}),this.columnConfigs){for(o=0,a=Object.keys(this.columnConfigs);o<a.length;o++)if(s=a[o],this.fullColumnNames.indexOf(s)===-1)throw new Error('The key "'+s+'" provided in columnConfigs does not match any of the column names ('+this.fullColumnNames.toString()+").")}return this.columnNamesValidated=!0,[2]}})})},n.prototype.maybeReadHeaderLine=function(){return xe(this,void 0,void 0,function(){var e,r;return Se(this,function(i){switch(i.label){case 0:return this.hasHeader?[4,this.base.iterator()]:[3,3];case 1:return[4,i.sent().next()];case 2:if((e=i.sent()).done)throw new Error("No data was found for CSV parsing.");return r=e.value,[2,this.parseRow(r,!1)];case 3:return[2,null]}})})},n.prototype.iterator=function(){return xe(this,void 0,void 0,function(){var e,r=this;return Se(this,function(i){switch(i.label){case 0:return this.columnNamesValidated?[3,2]:[4,this.setColumnNames()];case 1:i.sent(),i.label=2;case 2:return[4,this.base.iterator()];case 3:return e=i.sent(),this.hasHeader&&(e=e.skip(1)),[2,e.map(function(o){return r.makeDataElement(o)})]}})})},n.prototype.makeDataElement=function(e){for(var r=this.parseRow(e),i={},o={},a=0;a<this.fullColumnNames.length;a++){var s=this.fullColumnNames[a],u=this.columnConfigs?this.columnConfigs[s]:null;if(!this.configuredColumnsOnly||u){var l=r[a],c=null;if(l==="")if(u&&u.default!==void 0)c=u.default;else{if(u&&(u.required||u.isLabel))throw new Error("Required column "+s+" is empty in this line: "+e);c=void 0}else{var d=Number(l);if(isNaN(d))c=u&&u.dtype==="bool"?this.getBoolean(l):l;else if(u&&u.dtype)switch(u.dtype){case"float32":c=d;break;case"int32":c=Math.floor(d);break;case"bool":c=this.getBoolean(l);break;default:c=d}else c=d}u&&u.isLabel?o[s]=c:i[s]=c}}return Object.keys(o).length===0?i:{xs:i,ys:o}},n.prototype.getBoolean=function(e){return e==="1"||e.toLowerCase()==="true"?1:0},n.prototype.parseRow=function(e,r){r===void 0&&(r=!0);for(var i=[],o=0,a=e.length,s=dd,u=0;u<a;u++)switch(s){case dd:switch(e.charAt(u)){case Ih:o=u+1,s=_h;break;case this.delimiter:if(o=u+1,this.delimiter===" "&&this.delimWhitespace)break;i.push(""),s=dd;break;default:s=zk,o=u}break;case zk:switch(e.charAt(u)){case this.delimiter:i.push(e.substring(o,u)),s=dd,o=u+1}break;case _h:switch(e.charAt(u)){case Ih:s=y1}break;case y1:switch(e.charAt(u)){case this.delimiter:i.push(e.substring(o,u-1)),s=dd,o=u+1;break;case Ih:s=_h;break;default:s=Bk}break;case Bk:switch(e.charAt(u)){case Ih:s=_h}}if(s===y1?i.push(e.substring(o,a-1)):i.push(e.substring(o)),r&&i.length!==this.fullColumnNames.length)throw new Error("Invalid row in csv file. Should have "+this.fullColumnNames.length+" elements in a row, but got "+i);return i},n}(Cp),$Z=function(t){function n(e){var r=t.call(this)||this;r.microphoneConfig=e,r.isClosed=!1,r.fftSize=e.fftSize||1024;var i=Math.log2(r.fftSize);if(r.fftSize<0||i<4||i>14||!Number.isInteger(i))throw new Error("Invalid fftSize: it must be a power of 2 between 2 to 4 and 2 to 14, but got "+r.fftSize);if(r.numFrames=e.numFramesPerSpectrogram||43,r.sampleRateHz=e.sampleRateHz,r.columnTruncateLength=e.columnTruncateLength||r.fftSize,r.audioTrackConstraints=e.audioTrackConstraints,r.smoothingTimeConstant=e.smoothingTimeConstant||0,r.includeSpectrogram=e.includeSpectrogram!==!1,r.includeWaveform=e.includeWaveform===!0,!r.includeSpectrogram&&!r.includeWaveform)throw new Error("Both includeSpectrogram and includeWaveform are false. At least one type of data should be returned.");return r}return kt(n,t),n.prototype.summary=function(){return"microphone"},n.create=function(e){return e===void 0&&(e={}),xe(this,void 0,void 0,function(){var r;return Se(this,function(i){switch(i.label){case 0:if(ie().get("IS_NODE"))throw new Error("microphone API is only supported in browser environment.");return[4,(r=new n(e)).start()];case 1:return i.sent(),[2,r]}})})},n.prototype.start=function(){return xe(this,void 0,void 0,function(){var e,r,i,o;return Se(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),e=this,[4,navigator.mediaDevices.getUserMedia({audio:this.audioTrackConstraints==null||this.audioTrackConstraints,video:!1})];case 1:return e.stream=a.sent(),[3,3];case 2:throw r=a.sent(),new Error("Error thrown while initializing video stream: "+r.message);case 3:if(!this.stream)throw new Error("Could not obtain audio from microphone.");if(i=window.AudioContext||window.webkitAudioContext,this.audioContext=new i,this.sampleRateHz){if(this.audioContext.sampleRate!==this.sampleRateHz)throw new Error("Mismatch in sampling rate: Expected: "+this.sampleRateHz+"; Actual: "+this.audioContext.sampleRate)}else this.sampleRateHz=this.audioContext.sampleRate;return o=this.audioContext.createMediaStreamSource(this.stream),this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=2*this.fftSize,this.analyser.smoothingTimeConstant=this.smoothingTimeConstant,o.connect(this.analyser),this.freqData=new Float32Array(this.fftSize),this.timeData=new Float32Array(this.fftSize),[2]}})})},n.prototype.next=function(){return xe(this,void 0,void 0,function(){var e,r,i,o,a;return Se(this,function(s){switch(s.label){case 0:return this.isClosed?[2,{value:null,done:!0}]:[4,this.getAudioData()];case 1:return i=s.sent(),this.includeSpectrogram&&(o=this.flattenQueue(i.freqDataQueue),e=this.getTensorFromAudioDataArray(o,[this.numFrames,this.columnTruncateLength,1])),this.includeWaveform&&(a=this.flattenQueue(i.timeDataQueue),r=this.getTensorFromAudioDataArray(a,[this.numFrames*this.fftSize,1])),[2,{value:{spectrogram:e,waveform:r},done:!1}]}})})},n.prototype.capture=function(){return xe(this,void 0,void 0,function(){return Se(this,function(e){switch(e.label){case 0:return[4,this.next()];case 1:return[2,e.sent().value]}})})},n.prototype.getAudioData=function(){return xe(this,void 0,void 0,function(){var e,r,i,o=this;return Se(this,function(a){return e=[],r=[],i=0,[2,new Promise(function(s){var u=setInterval(function(){o.includeSpectrogram&&(o.analyser.getFloatFrequencyData(o.freqData),o.freqData[0]===-1/0&&s({freqDataQueue:e,timeDataQueue:r}),e.push(o.freqData.slice(0,o.columnTruncateLength))),o.includeWaveform&&(o.analyser.getFloatTimeDomainData(o.timeData),r.push(o.timeData.slice())),++i===o.numFrames&&(clearInterval(u),s({freqDataQueue:e,timeDataQueue:r}))},o.fftSize/o.sampleRateHz*1e3)})]})})},n.prototype.stop=function(){this.isClosed||(this.isClosed=!0,this.analyser.disconnect(),this.audioContext.close(),this.stream!=null&&this.stream.getTracks().length>0&&this.stream.getTracks()[0].stop())},n.prototype.toArray=function(){throw new Error("Can not convert infinite audio stream to array.")},n.prototype.getSampleRate=function(){return this.sampleRateHz},n.prototype.flattenQueue=function(e){var r=e[0].length,i=new Float32Array(e.length*r);return e.forEach(function(o,a){return i.set(o,a*r)}),i},n.prototype.getTensorFromAudioDataArray=function(e,r){var i=new Float32Array(Fe.sizeFromShape(r));return i.set(e,i.length-e.length),mn(i,r)},n}(_n),UZ=function(t){function n(e,r){var i=t.call(this)||this;if(i.webcamVideoElement=e,i.webcamConfig=r,i.isClosed=!0,i.resize=!1,i.needToResize())if(i.resize=!0,i.cropSize=[i.webcamConfig.resizeHeight,i.webcamConfig.resizeWidth],i.cropBoxInd=Fr([0],"int32"),i.webcamConfig.centerCrop){var o=1*i.webcamConfig.resizeWidth/i.webcamVideoElement.width,a=1*i.webcamConfig.resizeHeight/i.webcamVideoElement.height,s=(1-o)/2,u=(1-a)/2,l=s+o,c=a+u;i.cropBox=Ho([u,s,c,l],[1,4])}else i.cropBox=Ho([0,0,1,1],[1,4]);return i}return kt(n,t),n.prototype.summary=function(){return"webcam"},n.create=function(e,r){return r===void 0&&(r={}),xe(this,void 0,void 0,function(){var i;return Se(this,function(o){switch(o.label){case 0:if(ie().get("IS_NODE"))throw new Error("tf.data.webcam is only supported in browser environment.");if(!e){if(e=document.createElement("video"),!r.resizeWidth||!r.resizeHeight)throw new Error("Please provide webcam video element, or resizeWidth and resizeHeight to create a hidden video element.");e.width=r.resizeWidth,e.height=r.resizeHeight}return[4,(i=new n(e,r)).start()];case 1:return o.sent(),[2,i]}})})},n.prototype.start=function(){return xe(this,void 0,void 0,function(){var e,r,i=this;return Se(this,function(o){switch(o.label){case 0:this.webcamConfig.facingMode&&Fe.assert(this.webcamConfig.facingMode==="user"||this.webcamConfig.facingMode==="environment",function(){return"Invalid webcam facing mode: "+i.webcamConfig.facingMode+". Please provide 'user' or 'environment'"}),o.label=1;case 1:return o.trys.push([1,3,,4]),e=this,[4,navigator.mediaDevices.getUserMedia({video:{deviceId:this.webcamConfig.deviceId,facingMode:this.webcamConfig.facingMode?this.webcamConfig.facingMode:"user",width:this.webcamVideoElement.width,height:this.webcamVideoElement.height}})];case 2:return e.stream=o.sent(),[3,4];case 3:throw(r=o.sent()).message="Error thrown while initializing video stream: "+r.message,r;case 4:if(!this.stream)throw new Error("Could not obtain video from webcam.");try{this.webcamVideoElement.srcObject=this.stream}catch(a){console.log(a),this.webcamVideoElement.src=window.URL.createObjectURL(this.stream)}return this.webcamVideoElement.play(),this.isClosed=!1,[2,new Promise(function(a){i.webcamVideoElement.onloadedmetadata=function(){a()}})]}})})},n.prototype.next=function(){return xe(this,void 0,void 0,function(){var e;return Se(this,function(r){if(this.isClosed)return[2,{value:null,done:!0}];try{e=VL.fromPixels(this.webcamVideoElement)}catch(i){throw new Error("Error thrown converting video to pixels: "+JSON.stringify(i))}if(!this.resize)return[2,{value:e,done:!1}];try{return[2,{value:this.cropAndResizeFrame(e),done:!1}]}catch(i){throw new Error("Error thrown cropping the video: "+i.message)}finally{e.dispose()}return[2]})})},n.prototype.needToResize=function(){return!(!this.webcamConfig.resizeWidth||!this.webcamConfig.resizeHeight||this.webcamVideoElement.width===this.webcamConfig.resizeWidth&&this.webcamVideoElement.height===this.webcamConfig.resizeHeight)},n.prototype.cropAndResizeFrame=function(e){var r=this;return ee(function(){var i,o=e.toFloat().expandDims(0),a=(i=eu.cropAndResize(o,r.cropBox,r.cropBoxInd,r.cropSize,"bilinear")).shape;return i.reshape(a.slice(1))})},n.prototype.capture=function(){return xe(this,void 0,void 0,function(){return Se(this,function(e){switch(e.label){case 0:return[4,this.next()];case 1:return[2,e.sent().value]}})})},n.prototype.stop=function(){this.stream.getTracks().forEach(function(e){return e.stop()});try{this.webcamVideoElement.srcObject=null}catch(e){console.log(e),this.webcamVideoElement.src=null}this.isClosed=!0},n.prototype.toArray=function(){throw new Error("Can not convert infinite video stream to array.")},n}(_n),mF=function(){return function(){}}(),vF=function(t){function n(){return t!==null&&t.apply(this,arguments)||this}return kt(n,t),n.prototype.split=function(e){return new WZ(this,e)},n}(_n),WZ=function(t){function n(e,r){var i=t.call(this)||this;return i.upstream=e,i.impl=new HZ(e,r),i}return kt(n,t),n.prototype.summary=function(){return this.impl.summary()},n.prototype.next=function(){return xe(this,void 0,void 0,function(){return Se(this,function(e){return[2,this.impl.next()]})})},n}(vF),HZ=function(t){function n(e,r){var i=t.call(this)||this;return i.upstream=e,i.separator=r,i.carryover="",i}return kt(n,t),n.prototype.summary=function(){return this.upstream.summary()+" -> Split('"+this.separator+"')"},n.prototype.pump=function(){return xe(this,void 0,void 0,function(){var e,r,i,o,a;return Se(this,function(s){switch(s.label){case 0:return[4,this.upstream.next()];case 1:if((e=s.sent()).done)return this.carryover===""?[2,!1]:(this.outputQueue.push(this.carryover),this.carryover="",[2,!0]);for((r=e.value.split(this.separator))[0]=this.carryover+r[0],i=0,o=r.slice(0,-1);i<o.length;i++)a=o[i],this.outputQueue.push(a);return this.carryover=r[r.length-1],[2,!0]}})})},n}(e2),GZ=function(t){function n(){return t!==null&&t.apply(this,arguments)||this}return kt(n,t),n.prototype.decodeUTF8=function(){return new qZ(this)},n}(_n),qZ=function(t){function n(e){var r=t.call(this)||this;return r.upstream=e,r.impl=new KZ(e),r}return kt(n,t),n.prototype.summary=function(){return this.impl.summary()},n.prototype.next=function(){return xe(this,void 0,void 0,function(){return Se(this,function(e){return[2,this.impl.next()]})})},n}(vF),KZ=function(t){function n(e){var r=t.call(this)||this;if(r.upstream=e,ie().get("IS_BROWSER"))r.decoder=new TextDecoder("utf-8");else{var i=require("string_decoder").StringDecoder;r.decoder=new i("utf8")}return r}return kt(n,t),n.prototype.summary=function(){return this.upstream.summary()+" -> Utf8"},n.prototype.pump=function(){return xe(this,void 0,void 0,function(){var e,r,i;return Se(this,function(o){switch(o.label){case 0:return[4,this.upstream.next()];case 1:return(e=o.sent()).done?[2,!1]:(r=e.value,i=ie().get("IS_BROWSER")?this.decoder.decode(r,{stream:!0}):this.decoder.write(Buffer.from(r.buffer)),this.outputQueue.push(i),[2,!0])}})})},n}(e2),gF=function(t){function n(e,r){r===void 0&&(r={});var i=t.call(this)||this;return i.file=e,i.options=r,Fe.assert(e instanceof Uint8Array||!!ie().get("IS_BROWSER")&&(e instanceof File||e instanceof Blob),function(){return"FileChunkIterator only supports File, Blob and Uint8Array right now."}),i.offset=r.offset||0,i.chunkSize=r.chunkSize||1048576,i}return kt(n,t),n.prototype.summary=function(){return"FileChunks "+this.file},n.prototype.next=function(){return xe(this,void 0,void 0,function(){var e,r,i=this;return Se(this,function(o){switch(o.label){case 0:return this.offset>=(this.file instanceof Uint8Array?this.file.byteLength:this.file.size)?[2,{value:null,done:!0}]:(e=new Promise(function(a,s){var u=i.offset+i.chunkSize;if(i.file instanceof Uint8Array)a(new Uint8Array(i.file.slice(i.offset,u)));else{var l=new FileReader;l.onload=function(d){var f=l.result;if(f instanceof ArrayBuffer&&(f=new Uint8Array(f)),!(f instanceof Uint8Array))return s(new TypeError("FileReader returned unknown type."));a(f)},l.onabort=function(d){return s(new Error("Aborted"))},l.onerror=function(d){return s(new Error(d.type))};var c=i.file.slice(i.offset,u);l.readAsArrayBuffer(c)}i.offset=u}),r={},[4,e]);case 1:return[2,(r.value=o.sent(),r.done=!1,r)]}})})},n}(GZ);function XZ(t,n){return n===void 0&&(n={}),xe(this,void 0,void 0,function(){var e,r,i,o,a;return Se(this,function(s){switch(s.label){case 0:return typeof t=="string"?e=t:(e=t.url,r=YZ(t)),[4,Fe.fetch(e,r)];case 1:return(i=s.sent()).ok?(a=Uint8Array.bind,[4,i.arrayBuffer()]):[3,3];case 2:return o=new(a.apply(Uint8Array,[void 0,s.sent()])),[2,new gF(o,n)];case 3:throw new Error(i.statusText)}})})}var YZ=function(t){return{method:t.method,headers:t.headers,body:t.body,mode:t.mode,credentials:t.credentials,cache:t.cache,redirect:t.redirect,referrer:t.referrer,integrity:t.integrity}};function yF(t){return typeof t=="string"&&t.substr(0,7)==="file://"}var bF=function(t){function n(e,r){r===void 0&&(r={});var i=t.call(this)||this;return i.input=e,i.options=r,i}return kt(n,t),n.prototype.iterator=function(){return xe(this,void 0,void 0,function(){var e;return Se(this,function(r){return yF(this.input)&&ie().get("IS_NODE")&&(e=require("fs"),this.input=e.readFileSync(this.input.substr(7))),[2,new gF(this.input,this.options)]})})},n}(mF),wF=function(t){function n(e,r){r===void 0&&(r={});var i=t.call(this)||this;return i.url=e,i.fileOptions=r,i}return kt(n,t),n.prototype.iterator=function(){return xe(this,void 0,void 0,function(){return Se(this,function(e){return yF(this.url)?[2,new bF(this.url,this.fileOptions).iterator()]:[2,XZ(this.url,this.fileOptions)]})})},n}(mF);function JZ(t,n){return n===void 0&&(n={}),new hF(new wF(t),n)}function QZ(t){var n=this,e=ZC(t);return Cr(function(){return xe(n,void 0,void 0,function(){return Se(this,function(r){return[2,e]})})})}function ZZ(t){var n=this;return Cr(function(){return xe(n,void 0,void 0,function(){var e;return Se(this,function(r){switch(r.label){case 0:return[4,t()];case 1:return e=r.sent(),[2,ZC(function(){return e.next()})]}})})})}function eee(t,n){return xe(this,void 0,void 0,function(){return Se(this,function(e){return[2,UZ.create(t,n)]})})}function tee(t){return xe(this,void 0,void 0,function(){return Se(this,function(n){return[2,$Z.create(t)]})})}var xF="1.3.1";const nee=Object.freeze(Object.defineProperty({__proto__:null,CSVDataset:hF,Dataset:Cp,FileDataSource:bF,TextLineDataset:pF,URLDataSource:wF,array:zZ,csv:JZ,func:QZ,generator:ZZ,microphone:tee,version_data:xF,webcam:eee,zip:BZ},Symbol.toStringTag,{value:"Module"}));var ree="1.3.1",iee={"tfjs-core":HL,"tfjs-data":xF,"tfjs-layers":ly,"tfjs-converter":rF,tfjs:ree};const oee=Object.freeze(Object.defineProperty({__proto__:null,AdadeltaOptimizer:bC,AdagradOptimizer:wC,AdamOptimizer:xC,AdamaxOptimizer:SC,Callback:X4,CallbackList:b3,CustomCallback:x3,DataStorage:fE,get ENV(){return $S},EarlyStopping:Y4,Environment:GD,GraphModel:nF,History:w3,InputSpec:Fn,KernelBackend:pE,LayerVariable:m3,LayersModel:ru,MomentumOptimizer:EC,Optimizer:ca,RMSPropOptimizer:CC,RNN:Au,get Rank(){return dw},get Reduction(){return Xn},SGDOptimizer:ry,Sequential:VC,SymbolicTensor:Pi,Tensor:_t,TensorBuffer:Ql,Variable:Af,abs:ss,acos:EE,acosh:CE,add:at,addN:qE,addStrict:qP,all:qg,any:zf,argMax:Bf,argMin:nC,asin:RE,asinh:TE,atan:NE,atan2:KE,atanh:kE,avgPool:Ug,avgPool3d:Hg,backend:MM,backend_util:D7,basicLSTMCell:RL,batchNorm:$E,batchNorm2d:UE,batchNorm3d:WE,batchNorm4d:HE,batchNormalization:HP,batchNormalization2d:$P,batchNormalization3d:UP,batchNormalization4d:WP,batchToSpaceND:xg,booleanMaskAsync:sL,browser:VL,buffer:Ge,callbacks:eQ,cast:Sg,ceil:IE,clipByValue:br,clone:jM,complex:Nn,concat:lr,concat1d:tE,concat2d:nE,concat3d:rE,concat4d:iE,constraints:pK,conv1d:zg,conv2d:ku,conv2dTranspose:jg,conv3d:Bg,conv3dTranspose:pL,cos:_E,cosh:AE,cumsum:VM,customGrad:Nc,data:nee,deprecationWarn:gg,depthToSpace:aE,depthwiseConv2d:Ac,deregisterOp:nQ,diag:IL,disableDeprecationWarnings:a7,dispose:nt,disposeVariables:s7,div:cr,divStrict:KP,dot:hL,dropout:cC,elu:Oc,enableDebugMode:o7,enableProdMode:i7,engine:u7,env:ie,equal:Nu,equalStrict:tL,erf:OE,exp:DE,expandDims:Hr,expm1:ME,eye:Eg,fft:hp,fill:Tc,findBackend:m7,findBackendFactory:v7,floor:Ig,floorDiv:Lg,frame:ny,fused:oc,gather:_c,gatherND:lC,getBackend:p7,getKernel:qD,getKernelsForBackend:sw,grad:I7,grads:_7,greater:Ic,greaterEqual:cp,greaterEqualStrict:nL,greaterStrict:rL,hammingWindow:dC,hannWindow:ty,ifft:ic,imag:vi,image:eu,inTopKAsync:OL,initializers:qK,input:P3,io:Yr,irfft:Zg,isFinite:FP,isInf:LP,isNaN:PP,keep:bo,layers:AJ,leakyRelu:Yg,less:JE,lessEqual:QE,lessEqualStrict:iL,lessStrict:oL,linalg:pC,linspace:eE,loadGraphModel:lZ,loadLayersModel:ZX,localResponseNormalization:iC,log:na,log1p:PE,logSigmoid:MP,logSoftmax:Ng,logSumExp:CL,logicalAnd:ua,logicalNot:GE,logicalOr:Mg,logicalXor:GP,losses:DL,matMul:Vg,math:Zq,max:us,maxPool:$g,maxPool3d:Wg,maximum:Ro,maximumStrict:XP,mean:gn,memory:dv,metrics:qJ,min:Kg,minimum:kc,minimumStrict:YP,mod:XE,modStrict:JP,model:JX,models:KJ,moments:pp,movingAverage:NL,mul:He,mulStrict:Fg,multiRNNCell:TL,multinomial:sE,neg:Tu,nextFrame:vm,norm:oC,notEqual:nc,notEqualStrict:aL,oneHot:Zl,ones:Co,onesLike:ti,op:X,outerProduct:mL,pad:ys,pad1d:$M,pad2d:UM,pad3d:WM,pad4d:HM,pool:SL,pow:tc,powStrict:QP,prelu:Jg,print:BM,prod:Xg,profile:l7,rand:GM,randomGamma:qM,randomNormal:uE,randomUniform:Cu,range:bg,ready:f7,real:Ir,reciprocal:LE,registerBackend:g7,registerCallbackConstructor:eY,registerKernel:uw,registerOp:tQ,regularizers:QJ,relu:ws,relu6:rC,removeBackend:h7,reshape:rp,reverse:xo,reverse1d:vL,reverse2d:gL,reverse3d:yL,reverse4d:bL,rfft:mp,round:FE,rsqrt:_g,scalar:ke,scatterND:uC,selu:Qg,separableConv2d:tC,sequential:QX,serialization:he,setBackend:d7,setPlatform:y7,setdiff1dAsync:lE,sigmoid:Ag,sign:zE,signal:AL,sin:BE,sinh:jE,slice:ni,slice1d:dp,slice2d:Gg,slice3d:fp,slice4d:rc,slice_util:k7,softmax:Ru,softplus:sp,spaceToBatchND:Cg,sparseToDense:ey,spectral:kL,split:Go,sqrt:up,square:SE,squaredDifference:YE,squaredDifferenceStrict:ZP,squeeze:ip,stack:$i,step:zP,stft:fC,stridedSlice:aC,sub:jn,subStrict:eL,sum:zr,tan:VE,tanh:Og,tensor:mn,tensor1d:Fr,tensor2d:Ho,tensor3d:QS,tensor4d:Ra,tensor5d:FM,tensor6d:zM,tensor_util:go,test_util:nK,tidy:ee,tile:Qa,time:c7,topk:sC,train:Ls,transpose:Zt,truncatedNormal:op,unregisterKernel:K9,unsortedSegmentSum:ZE,unstack:du,util:Fe,valueAndGrad:A7,valueAndGrads:O7,variable:ZS,variableGrads:tP,version:iee,version_converter:rF,version_core:HL,version_layers:ly,webgl:rK,where:ra,whereAsync:Pg,zeros:It,zerosLike:dt},Symbol.toStringTag,{value:"Module"})),Uf=Bv(oee);var vu={};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object.defineProperty(vu,"__esModule",{value:!0});vu.cropTensor=vu.capture=void 0;var Xs=Uf;function aee(t,n){return Xs.tidy(function(){var e=Xs.browser.fromPixels(t),r=SF(e,n),i=r.expandDims(0);return i.toFloat().div(Xs.scalar(127)).sub(Xs.scalar(1))})}vu.capture=aee;function SF(t,n,e){var r=Math.min(t.shape[0],t.shape[1]),i=t.shape[0]/2,o=i-r/2,a=t.shape[1]/2,s=a-r/2;if(n&&!e){var u=t.slice([o,s,0],[r,r,3]);u=u.reshape([r*r,1,3]);var l=[.2989,.587,.114];return u=Xs.mul(u,l),u=u.reshape([r,r,3]),u=Xs.sum(u,-1),u=Xs.expandDims(u,-1),u}return t.slice([o,s,0],[r,r,3])}vu.cropTensor=SF;var Li={};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object.defineProperty(Li,"__esModule",{value:!0});Li.cropTo=Li.resizeMinTo=Li.resizeMaxTo=Li.resize=void 0;var py=function(){return document.createElement("canvas")};function t2(t,n,e){e===void 0&&(e=py()),e.width=t.width*n,e.height=t.height*n;var r=e.getContext("2d");return r.drawImage(t,0,0,e.width,e.height),e}Li.resize=t2;function see(t,n,e){e===void 0&&(e=py());var r=Math.max(t.width,t.height);return t2(t,n/r,e)}Li.resizeMaxTo=see;function uee(t,n,e){e===void 0&&(e=py());var r=Math.min(t.width,t.height);return t2(t,n/r,e)}Li.resizeMinTo=uee;function lee(t,n,e,r){e===void 0&&(e=!1),r===void 0&&(r=py());var i=t.width,o=t.height;t instanceof HTMLVideoElement&&(i=t.videoWidth,o=t.videoHeight);var a=Math.min(i,o),s=n/a,u=Math.ceil(i*s),l=Math.ceil(o*s),c=u-n,d=l-n;r.width=r.height=n;var f=r.getContext("2d");return f.drawImage(t,~~(c/2)*-1,~~(d/2)*-1,u,l),e&&(f.scale(-1,1),f.drawImage(r,n*-1,0)),r}Li.cropTo=lee;var Rp={};/** @license See the LICENSE file. */Object.defineProperty(Rp,"__esModule",{value:!0});Rp.version=void 0;var cee="0.8.4-alpha2";Rp.version=cee;(function(t){/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var n=ve&&ve.__awaiter||function(E,S,N,k){function M(D){return D instanceof N?D:new N(function(R){R(D)})}return new(N||(N=Promise))(function(D,R){function O(I){try{A(k.next(I))}catch(_){R(_)}}function P(I){try{A(k.throw(I))}catch(_){R(_)}}function A(I){I.done?D(I.value):M(I.value).then(O,P)}A((k=k.apply(E,S||[])).next())})},e=ve&&ve.__generator||function(E,S){var N={label:0,sent:function(){if(D[0]&1)throw D[1];return D[1]},trys:[],ops:[]},k,M,D,R;return R={next:O(0),throw:O(1),return:O(2)},typeof Symbol=="function"&&(R[Symbol.iterator]=function(){return this}),R;function O(A){return function(I){return P([A,I])}}function P(A){if(k)throw new TypeError("Generator is already executing.");for(;N;)try{if(k=1,M&&(D=A[0]&2?M.return:A[0]?M.throw||((D=M.return)&&D.call(M),0):M.next)&&!(D=D.call(M,A[1])).done)return D;switch(M=0,D&&(A=[A[0]&2,D.value]),A[0]){case 0:case 1:D=A;break;case 4:return N.label++,{value:A[1],done:!1};case 5:N.label++,M=A[1],A=[0];continue;case 7:A=N.ops.pop(),N.trys.pop();continue;default:if(D=N.trys,!(D=D.length>0&&D[D.length-1])&&(A[0]===6||A[0]===2)){N=0;continue}if(A[0]===3&&(!D||A[1]>D[0]&&A[1]<D[3])){N.label=A[1];break}if(A[0]===6&&N.label<D[1]){N.label=D[1],D=A;break}if(D&&N.label<D[2]){N.label=D[2],N.ops.push(A);break}D[2]&&N.ops.pop(),N.trys.pop();continue}A=S.call(E,N)}catch(I){A=[6,I],M=0}finally{k=D=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}};Object.defineProperty(t,"__esModule",{value:!0}),t.loadFromFiles=t.load=t.loadTruncatedMobileNet=t.CustomMobileNet=t.getTopKClasses=t.IMAGE_SIZE=void 0;var r=Uf,i=Uf,o=vu,a=Li,s=Rp,u=1,l="conv_pw_13_relu",c="out_relu",d=.25,f=.35;t.IMAGE_SIZE=224;var p=function(E){return E.packageVersion=E.packageVersion||s.version,E.packageName=E.packageName||"@teachablemachine/image",E.timeStamp=E.timeStamp||new Date().toISOString(),E.userMetadata=E.userMetadata||{},E.modelName=E.modelName||"untitled",E.labels=E.labels||[],E.imageSize=E.imageSize||t.IMAGE_SIZE,E},h=function(E){return!!E&&Array.isArray(E.labels)},v=function(E,S){if(E===1){if(S!==.25&&S!==.5&&S!==.75&&S!==1)return console.warn("Invalid alpha. Options are: 0.25, 0.50, 0.75 or 1.00."),console.log("Loading model with alpha: ",d.toFixed(2)),d}else if(S!==.35&&S!==.5&&S!==.75&&S!==1)return console.warn("Invalid alpha. Options are: 0.35, 0.50, 0.75 or 1.00."),console.log("Loading model with alpha: ",f.toFixed(2)),f;return S},g=function(E){if(E=E||{},E.checkpointUrl&&E.trainingLayer)return(E.alpha||E.version)&&console.warn("Checkpoint URL passed to modelOptions, alpha options are ignored"),[E.checkpointUrl,E.trainingLayer];if(E.version=E.version||u,E.version===1){E.alpha=E.alpha||d,E.alpha=v(E.version,E.alpha),console.log("Loading mobilenet "+E.version+" and alpha "+E.alpha);var S=E.alpha.toFixed(2);return S==="1.00"&&(S="1.0"),["https://storage.googleapis.com/tfjs-models/tfjs/mobilenet_v1_"+S+"_"+t.IMAGE_SIZE+"/model.json",l]}else{if(E.version===2)return E.alpha=E.alpha||f,E.alpha=v(E.version,E.alpha),console.log("Loading mobilenet "+E.version+" and alpha "+E.alpha),["https://storage.googleapis.com/teachable-machine-models/mobilenet_v2_weights_tf_dim_ordering_tf_kernels_"+E.alpha.toFixed(2)+"_"+t.IMAGE_SIZE+"_no_top/model.json",c];throw new Error("MobileNet V"+E.version+" doesn't exist")}},m=function(E){return n(void 0,void 0,void 0,function(){var S,N;return e(this,function(k){switch(k.label){case 0:return typeof E!="string"?[3,3]:[4,fetch(E)];case 1:return N=k.sent(),[4,N.json()];case 2:return S=k.sent(),[3,4];case 3:if(h(E))S=E;else throw new Error("Invalid Metadata provided");k.label=4;case 4:return[2,p(S)]}})})};function y(E,S,N){return N===void 0&&(N=3),n(this,void 0,void 0,function(){var k;return e(this,function(M){switch(M.label){case 0:return[4,S.data()];case 1:return k=M.sent(),[2,r.tidy(function(){N=Math.min(N,k.length);for(var D=[],R=0;R<k.length;R++)D.push({value:k[R],index:R});D.sort(function(I,_){return _.value-I.value});for(var O=new Float32Array(N),P=new Int32Array(N),R=0;R<N;R++)O[R]=D[R].value,P[R]=D[R].index;for(var A=[],R=0;R<P.length;R++)A.push({className:E[P[R]],probability:O[R]});return A})]}})})}t.getTopKClasses=y;var b=function(){function E(S,N){this.model=S,this._metadata=p(N)}return Object.defineProperty(E,"EXPECTED_IMAGE_SIZE",{get:function(){return t.IMAGE_SIZE},enumerable:!1,configurable:!0}),E.prototype.getMetadata=function(){return this._metadata},E.prototype.getTotalClasses=function(){var S=this.model.output,N=S.shape[1];return N},E.prototype.getClassLabels=function(){return this._metadata.labels},E.prototype.predictTopK=function(S,N,k){return N===void 0&&(N=10),k===void 0&&(k=!1),n(this,void 0,void 0,function(){var M,D,R,O=this;return e(this,function(P){switch(P.label){case 0:return M=a.cropTo(S,this._metadata.imageSize,k),D=r.tidy(function(){var A=o.capture(M,O._metadata.grayscale);return O.model.predict(A)}),[4,y(this._metadata.labels,D,N)];case 1:return R=P.sent(),i.dispose(D),[2,R]}})})},E.prototype.predict=function(S,N){return N===void 0&&(N=!1),n(this,void 0,void 0,function(){var k,M,D,R,O,P=this;return e(this,function(A){switch(A.label){case 0:return k=a.cropTo(S,this._metadata.imageSize,N),M=r.tidy(function(){var I=o.capture(k,P._metadata.grayscale);return P.model.predict(I)}),[4,M.data()];case 1:for(D=A.sent(),R=[],O=0;O<D.length;O++)R.push({className:this._metadata.labels[O],probability:D[O]});return i.dispose(M),[2,R]}})})},E.prototype.dispose=function(){this.truncatedModel.dispose()},E}();t.CustomMobileNet=b;function w(E){return n(this,void 0,void 0,function(){var S,N,k,M,D,R,O,D,R,O;return e(this,function(P){switch(P.label){case 0:return S=g(E),N=S[0],k=S[1],[4,r.loadLayersModel(N)];case 1:return M=P.sent(),E&&E.version===1?(D=M.getLayer(k),R=r.model({inputs:M.inputs,outputs:D.output}),O=r.sequential(),O.add(R),O.add(r.layers.flatten()),[2,O]):(D=M.getLayer(k),R=r.model({inputs:M.inputs,outputs:D.output}),O=r.sequential(),O.add(R),O.add(r.layers.globalAveragePooling2d({})),[2,O])}})})}t.loadTruncatedMobileNet=w;function x(E,S){return n(this,void 0,void 0,function(){var N,k,M;return e(this,function(D){switch(D.label){case 0:return[4,r.loadLayersModel(E)];case 1:return N=D.sent(),S?[4,m(S)]:[3,3];case 2:return M=D.sent(),[3,4];case 3:M=null,D.label=4;case 4:return k=M,[2,new b(N,k)]}})})}t.load=x;function C(E,S,N){return n(this,void 0,void 0,function(){var k,M,D,R;return e(this,function(O){switch(O.label){case 0:return[4,r.loadLayersModel(r.io.browserFiles([E,S]))];case 1:return k=O.sent(),[4,new Response(N).json()];case 2:return M=O.sent(),N?[4,m(M)]:[3,4];case 3:return R=O.sent(),[3,5];case 4:R=null,O.label=5;case 5:return D=R,[2,new b(k,D)]}})})}t.loadFromFiles=C})(VS);var dc={},n2={exports:{}};n2.exports;(function(t){(function(n,e,r){function i(u){var l=this,c=s();l.next=function(){var d=2091639*l.s0+l.c*23283064365386963e-26;return l.s0=l.s1,l.s1=l.s2,l.s2=d-(l.c=d|0)},l.c=1,l.s0=c(" "),l.s1=c(" "),l.s2=c(" "),l.s0-=c(u),l.s0<0&&(l.s0+=1),l.s1-=c(u),l.s1<0&&(l.s1+=1),l.s2-=c(u),l.s2<0&&(l.s2+=1),c=null}function o(u,l){return l.c=u.c,l.s0=u.s0,l.s1=u.s1,l.s2=u.s2,l}function a(u,l){var c=new i(u),d=l&&l.state,f=c.next;return f.int32=function(){return c.next()*4294967296|0},f.double=function(){return f()+(f()*2097152|0)*11102230246251565e-32},f.quick=f,d&&(typeof d=="object"&&o(d,c),f.state=function(){return o(c,{})}),f}function s(){var u=4022871197,l=function(c){c=c.toString();for(var d=0;d<c.length;d++){u+=c.charCodeAt(d);var f=.02519603282416938*u;u=f>>>0,f-=u,f*=u,u=f>>>0,f-=u,u+=f*4294967296}return(u>>>0)*23283064365386963e-26};return l}e&&e.exports?e.exports=a:r&&r.amd?r(function(){return a}):this.alea=a})(ve,t,!1)})(n2);var dee=n2.exports,r2={exports:{}};r2.exports;(function(t){(function(n,e,r){function i(s){var u=this,l="";u.x=0,u.y=0,u.z=0,u.w=0,u.next=function(){var d=u.x^u.x<<11;return u.x=u.y,u.y=u.z,u.z=u.w,u.w^=u.w>>>19^d^d>>>8},s===(s|0)?u.x=s:l+=s;for(var c=0;c<l.length+64;c++)u.x^=l.charCodeAt(c)|0,u.next()}function o(s,u){return u.x=s.x,u.y=s.y,u.z=s.z,u.w=s.w,u}function a(s,u){var l=new i(s),c=u&&u.state,d=function(){return(l.next()>>>0)/4294967296};return d.double=function(){do var f=l.next()>>>11,p=(l.next()>>>0)/4294967296,h=(f+p)/(1<<21);while(h===0);return h},d.int32=l.next,d.quick=d,c&&(typeof c=="object"&&o(c,l),d.state=function(){return o(l,{})}),d}e&&e.exports?e.exports=a:r&&r.amd?r(function(){return a}):this.xor128=a})(ve,t,!1)})(r2);var fee=r2.exports,i2={exports:{}};i2.exports;(function(t){(function(n,e,r){function i(s){var u=this,l="";u.next=function(){var d=u.x^u.x>>>2;return u.x=u.y,u.y=u.z,u.z=u.w,u.w=u.v,(u.d=u.d+362437|0)+(u.v=u.v^u.v<<4^(d^d<<1))|0},u.x=0,u.y=0,u.z=0,u.w=0,u.v=0,s===(s|0)?u.x=s:l+=s;for(var c=0;c<l.length+64;c++)u.x^=l.charCodeAt(c)|0,c==l.length&&(u.d=u.x<<10^u.x>>>4),u.next()}function o(s,u){return u.x=s.x,u.y=s.y,u.z=s.z,u.w=s.w,u.v=s.v,u.d=s.d,u}function a(s,u){var l=new i(s),c=u&&u.state,d=function(){return(l.next()>>>0)/4294967296};return d.double=function(){do var f=l.next()>>>11,p=(l.next()>>>0)/4294967296,h=(f+p)/(1<<21);while(h===0);return h},d.int32=l.next,d.quick=d,c&&(typeof c=="object"&&o(c,l),d.state=function(){return o(l,{})}),d}e&&e.exports?e.exports=a:r&&r.amd?r(function(){return a}):this.xorwow=a})(ve,t,!1)})(i2);var pee=i2.exports,o2={exports:{}};o2.exports;(function(t){(function(n,e,r){function i(s){var u=this;u.next=function(){var c=u.x,d=u.i,f,p;return f=c[d],f^=f>>>7,p=f^f<<24,f=c[d+1&7],p^=f^f>>>10,f=c[d+3&7],p^=f^f>>>3,f=c[d+4&7],p^=f^f<<7,f=c[d+7&7],f=f^f<<13,p^=f^f<<9,c[d]=p,u.i=d+1&7,p};function l(c,d){var f,p=[];if(d===(d|0))p[0]=d;else for(d=""+d,f=0;f<d.length;++f)p[f&7]=p[f&7]<<15^d.charCodeAt(f)+p[f+1&7]<<13;for(;p.length<8;)p.push(0);for(f=0;f<8&&p[f]===0;++f);for(f==8?p[7]=-1:p[f],c.x=p,c.i=0,f=256;f>0;--f)c.next()}l(u,s)}function o(s,u){return u.x=s.x.slice(),u.i=s.i,u}function a(s,u){s==null&&(s=+new Date);var l=new i(s),c=u&&u.state,d=function(){return(l.next()>>>0)/4294967296};return d.double=function(){do var f=l.next()>>>11,p=(l.next()>>>0)/4294967296,h=(f+p)/(1<<21);while(h===0);return h},d.int32=l.next,d.quick=d,c&&(c.x&&o(c,l),d.state=function(){return o(l,{})}),d}e&&e.exports?e.exports=a:r&&r.amd?r(function(){return a}):this.xorshift7=a})(ve,t,!1)})(o2);var hee=o2.exports,a2={exports:{}};a2.exports;(function(t){(function(n,e,r){function i(s){var u=this;u.next=function(){var c=u.w,d=u.X,f=u.i,p,h;return u.w=c=c+1640531527|0,h=d[f+34&127],p=d[f=f+1&127],h^=h<<13,p^=p<<17,h^=h>>>15,p^=p>>>12,h=d[f]=h^p,u.i=f,h+(c^c>>>16)|0};function l(c,d){var f,p,h,v,g,m=[],y=128;for(d===(d|0)?(p=d,d=null):(d=d+"\0",p=0,y=Math.max(y,d.length)),h=0,v=-32;v<y;++v)d&&(p^=d.charCodeAt((v+32)%d.length)),v===0&&(g=p),p^=p<<10,p^=p>>>15,p^=p<<4,p^=p>>>13,v>=0&&(g=g+1640531527|0,f=m[v&127]^=p+g,h=f==0?h+1:0);for(h>=128&&(m[(d&&d.length||0)&127]=-1),h=127,v=4*128;v>0;--v)p=m[h+34&127],f=m[h=h+1&127],p^=p<<13,f^=f<<17,p^=p>>>15,f^=f>>>12,m[h]=p^f;c.w=g,c.X=m,c.i=h}l(u,s)}function o(s,u){return u.i=s.i,u.w=s.w,u.X=s.X.slice(),u}function a(s,u){s==null&&(s=+new Date);var l=new i(s),c=u&&u.state,d=function(){return(l.next()>>>0)/4294967296};return d.double=function(){do var f=l.next()>>>11,p=(l.next()>>>0)/4294967296,h=(f+p)/(1<<21);while(h===0);return h},d.int32=l.next,d.quick=d,c&&(c.X&&o(c,l),d.state=function(){return o(l,{})}),d}e&&e.exports?e.exports=a:r&&r.amd?r(function(){return a}):this.xor4096=a})(ve,t,!1)})(a2);var mee=a2.exports,s2={exports:{}};s2.exports;(function(t){(function(n,e,r){function i(s){var u=this,l="";u.next=function(){var d=u.b,f=u.c,p=u.d,h=u.a;return d=d<<25^d>>>7^f,f=f-p|0,p=p<<24^p>>>8^h,h=h-d|0,u.b=d=d<<20^d>>>12^f,u.c=f=f-p|0,u.d=p<<16^f>>>16^h,u.a=h-d|0},u.a=0,u.b=0,u.c=-1640531527,u.d=1367130551,s===Math.floor(s)?(u.a=s/4294967296|0,u.b=s|0):l+=s;for(var c=0;c<l.length+20;c++)u.b^=l.charCodeAt(c)|0,u.next()}function o(s,u){return u.a=s.a,u.b=s.b,u.c=s.c,u.d=s.d,u}function a(s,u){var l=new i(s),c=u&&u.state,d=function(){return(l.next()>>>0)/4294967296};return d.double=function(){do var f=l.next()>>>11,p=(l.next()>>>0)/4294967296,h=(f+p)/(1<<21);while(h===0);return h},d.int32=l.next,d.quick=d,c&&(typeof c=="object"&&o(c,l),d.state=function(){return o(l,{})}),d}e&&e.exports?e.exports=a:r&&r.amd?r(function(){return a}):this.tychei=a})(ve,t,!1)})(s2);var vee=s2.exports,EF={exports:{}};const gee={},yee=Object.freeze(Object.defineProperty({__proto__:null,default:gee},Symbol.toStringTag,{value:"Module"})),bee=Bv(yee);(function(t){(function(n,e){var r=(0,eval)("this"),i=256,o=6,a=52,s="random",u=e.pow(i,o),l=e.pow(2,a),c=l*2,d=i-1,f;function p(w,x,C){var E=[];x=x==!0?{entropy:!0}:x||{};var S=m(g(x.entropy?[w,b(n)]:w??y(),3),E),N=new h(E),k=function(){for(var M=N.g(o),D=u,R=0;M<l;)M=(M+R)*i,D*=i,R=N.g(1);for(;M>=c;)M/=2,D/=2,R>>>=1;return(M+R)/D};return k.int32=function(){return N.g(4)|0},k.quick=function(){return N.g(4)/4294967296},k.double=k,m(b(N.S),n),(x.pass||C||function(M,D,R,O){return O&&(O.S&&v(O,N),M.state=function(){return v(N,{})}),R?(e[s]=M,D):M})(k,S,"global"in x?x.global:this==e,x.state)}e["seed"+s]=p;function h(w){var x,C=w.length,E=this,S=0,N=E.i=E.j=0,k=E.S=[];for(C||(w=[C++]);S<i;)k[S]=S++;for(S=0;S<i;S++)k[S]=k[N=d&N+w[S%C]+(x=k[S])],k[N]=x;(E.g=function(M){for(var D,R=0,O=E.i,P=E.j,A=E.S;M--;)D=A[O=d&O+1],R=R*i+A[d&(A[O]=A[P=d&P+D])+(A[P]=D)];return E.i=O,E.j=P,R})(i)}function v(w,x){return x.i=w.i,x.j=w.j,x.S=w.S.slice(),x}function g(w,x){var C=[],E=typeof w,S;if(x&&E=="object")for(S in w)try{C.push(g(w[S],x-1))}catch{}return C.length?C:E=="string"?w:w+"\0"}function m(w,x){for(var C=w+"",E,S=0;S<C.length;)x[d&S]=d&(E^=x[d&S]*19)+C.charCodeAt(S++);return b(x)}function y(){try{var w;return f&&(w=f.randomBytes)?w=w(i):(w=new Uint8Array(i),(r.crypto||r.msCrypto).getRandomValues(w)),b(w)}catch{var x=r.navigator,C=x&&x.plugins;return[+new Date,r,C,r.screen,b(n)]}}function b(w){return String.fromCharCode.apply(0,w)}if(m(e.random(),n),t.exports){t.exports=p;try{f=bee}catch{}}})([],Math)})(EF);var wee=EF.exports,xee=dee,See=fee,Eee=pee,Cee=hee,Ree=mee,Tee=vee,Du=wee;Du.alea=xee;Du.xor128=See;Du.xorwow=Eee;Du.xorshift7=Cee;Du.xor4096=Ree;Du.tychei=Tee;var Nee=Du;/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var kee=ve&&ve.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Do=ve&&ve.__awaiter||function(t,n,e,r){function i(o){return o instanceof e?o:new e(function(a){a(o)})}return new(e||(e=Promise))(function(o,a){function s(c){try{l(r.next(c))}catch(d){a(d)}}function u(c){try{l(r.throw(c))}catch(d){a(d)}}function l(c){c.done?o(c.value):i(c.value).then(s,u)}l((r=r.apply(t,n||[])).next())})},Mo=ve&&ve.__generator||function(t,n){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return e.label++,{value:l[1],done:!1};case 5:e.label++,i=l[1],l=[0];continue;case 7:l=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){e=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){e.label=l[1];break}if(l[0]===6&&e.label<o[1]){e.label=o[1],o=l;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(l);break}o[2]&&e.ops.pop(),e.trys.pop();continue}l=n.call(t,e)}catch(c){l=[6,c],i=0}finally{r=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};Object.defineProperty(dc,"__esModule",{value:!0});dc.createTeachable=dc.TeachableMobileNet=void 0;var Un=Uf,Iee=Uf,_ee=vu,CF=VS,Aee=Nee,Oee=.15,Dee=function(t){return typeof t.dataId=="object"&&typeof t.shape=="object"};function Mee(t,n){var e=new Array(n).fill(0);return e[t]=1,e}function b1(t,n){for(var e,r=t.length,i=t.slice(),o=r-1;o>0;o-=1){var a=void 0;n?a=Math.floor(n()*(o+1)):a=Math.floor(Math.random()*(o+1)),e=[i[a],i[o]],i[o]=e[0],i[a]=e[1]}return i}var RF=function(t){kee(n,t);function n(e,r){var i=t.call(this,Un.sequential(),r)||this;return i.totalSamples=0,i.examples=[],i.truncatedModel=e,i}return Object.defineProperty(n.prototype,"asSequentialModel",{get:function(){return this.model},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isTrained",{get:function(){return!!this.model&&this.model.layers&&this.model.layers.length>2},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isPrepared",{get:function(){return!!this.trainDataset},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"numClasses",{get:function(){return this._metadata.labels.length},enumerable:!1,configurable:!0}),n.prototype.addExample=function(e,r){return Do(this,void 0,void 0,function(){var i,o,a;return Mo(this,function(s){return i=Dee(r)?r:_ee.capture(r,this._metadata.grayscale),o=this.truncatedModel.predict(i),a=o.dataSync(),i.dispose(),o.dispose(),this.examples[e].push(a),this.totalSamples++,[2]})})},n.prototype.predict=function(e,r){return r===void 0&&(r=!1),Do(this,void 0,void 0,function(){return Mo(this,function(i){if(!this.model)throw new Error("Model has not been trained yet, called train() first");return[2,t.prototype.predict.call(this,e,r)]})})},n.prototype.predictTopK=function(e,r,i){return r===void 0&&(r=10),i===void 0&&(i=!1),Do(this,void 0,void 0,function(){return Mo(this,function(o){if(!this.model)throw new Error("Model has not been trained yet, called train() first");return[2,t.prototype.predictTopK.call(this,e,r,i)]})})},n.prototype.prepare=function(){for(var e in this.examples)if(e.length===0)throw new Error("Add some examples before training");var r=this.convertToTfDataset();this.trainDataset=r.trainDataset,this.validationDataset=r.validationDataset},n.prototype.convertToTfDataset=function(){for(var e=0;e<this.examples.length;e++)this.examples[e]=b1(this.examples[e],this.seed);for(var r=[],i=[],o=function(d){var f=Mee(d,a.numClasses),p=a.examples[d].length,h=Math.ceil(Oee*p),v=p-h,g=a.examples[d].slice(0,v).map(function(y){return{data:y,label:f}}),m=a.examples[d].slice(v).map(function(y){return{data:y,label:f}});r=r.concat(g),i=i.concat(m)},a=this,e=0;e<this.examples.length;e++)o(e);r=b1(r,this.seed),i=b1(i,this.seed);var s=Un.data.array(r.map(function(d){return d.data})),u=Un.data.array(i.map(function(d){return d.data})),l=Un.data.array(r.map(function(d){return d.label})),c=Un.data.array(i.map(function(d){return d.label}));return{trainDataset:Un.data.zip({xs:s,ys:l}),validationDataset:Un.data.zip({xs:u,ys:c})}},n.prototype.save=function(e,r){return Do(this,void 0,void 0,function(){return Mo(this,function(i){return[2,this.model.save(e,r)]})})},n.prototype.train=function(e,r){return r===void 0&&(r={}),Do(this,void 0,void 0,function(){var i,o,a,s,u,l,c,d,f,p=this;return Mo(this,function(h){switch(h.label){case 0:if(i=r.onTrainEnd||function(){},r.onTrainEnd=function(v){p.__stopTrainingResolve&&(p.__stopTrainingResolve(),p.__stopTrainingResolve=null),i(v)},this.isPrepared||this.prepare(),o=this.getLabels().length,Iee.util.assert(o===this.numClasses,function(){return"Can not train, has "+o+" labels and "+p.numClasses+" classes"}),a=this.truncatedModel.outputs[0].shape.slice(1),s=Un.util.sizeFromShape(a),this.seed?u=Un.initializers.varianceScaling({seed:3.14}):u=Un.initializers.varianceScaling({}),this.trainingModel=Un.sequential({layers:[Un.layers.dense({inputShape:[s],units:e.denseUnits,activation:"relu",kernelInitializer:u,useBias:!0}),Un.layers.dense({kernelInitializer:u,useBias:!1,activation:"softmax",units:this.numClasses})]}),l=Un.train.adam(e.learningRate),this.trainingModel.compile({optimizer:l,loss:"categoricalCrossentropy",metrics:["accuracy"]}),!(e.batchSize>0))throw new Error("Batch size is 0 or NaN. Please choose a non-zero fraction");return c=this.trainDataset.batch(e.batchSize),d=this.validationDataset.batch(e.batchSize),[4,this.trainingModel.fitDataset(c,{epochs:e.epochs,validationData:d,callbacks:r})];case 1:return h.sent(),f=Un.sequential(),f.add(this.truncatedModel),f.add(this.trainingModel),this.model=f,l.dispose(),[2,this.model]}})})},n.prototype.prepareDataset=function(){for(var e=0;e<this.numClasses;e++)this.examples[e]=[]},n.prototype.setLabel=function(e,r){this._metadata.labels[e]=r},n.prototype.setLabels=function(e){this._metadata.labels=e,this.prepareDataset()},n.prototype.getLabel=function(e){return this._metadata.labels[e]},n.prototype.getLabels=function(){return this._metadata.labels},n.prototype.setName=function(e){this._metadata.modelName=e},n.prototype.getName=function(){return this._metadata.modelName},n.prototype.stopTraining=function(){var e=this,r=new Promise(function(i,o){e.trainingModel.stopTraining=!0,e.__stopTrainingResolve=i});return r},n.prototype.dispose=function(){this.trainingModel.dispose(),t.prototype.dispose.call(this)},n.prototype.calculateAccuracyPerClass=function(){return Do(this,void 0,void 0,function(){var e,r,i,o,a,s,u,l,c,d,b,f,p,h,v,g,m,y,b,w=this;return Mo(this,function(x){switch(x.label){case 0:return e=this.validationDataset.mapAsync(function(C){return Do(w,void 0,void 0,function(){return Mo(this,function(E){return[2,C.xs]})})}),r=this.validationDataset.mapAsync(function(C){return Do(w,void 0,void 0,function(){return Mo(this,function(E){return[2,C.ys]})})}),i=Math.min(r.size,32),o=Math.ceil(r.size/i),a=e.batch(i),s=r.batch(i),[4,a.iterator()];case 1:return u=x.sent(),[4,s.iterator()];case 2:l=x.sent(),c=[],d=[],b=0,x.label=3;case 3:return b<o?[4,u.next()]:[3,7];case 4:return f=x.sent(),p=this.trainingModel.predict(f.value),h=p.argMax(1),c.push(h),[4,l.next()];case 5:v=x.sent(),g=v.value.argMax(1),d.push(g),f.value.dispose(),p.dispose(),v.value.dispose(),x.label=6;case 6:return b++,[3,3];case 7:if(m=Un.concat(d),y=Un.concat(c),o!==1)for(b=0;b<c.length;b++)c[b].dispose(),d[b].dispose();return[2,{reference:m,predictions:y}]}})})},n.prototype.setSeed=function(e){this.seed=Aee(e)},n}(CF.CustomMobileNet);dc.TeachableMobileNet=RF;function Pee(t,n){return Do(this,void 0,void 0,function(){var e;return Mo(this,function(r){switch(r.label){case 0:return[4,CF.loadTruncatedMobileNet(n)];case 1:return e=r.sent(),[2,new RF(e,t)]}})})}dc.createTeachable=Pee;var hy={};function ym(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ym=function(e){return typeof e}:ym=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ym(t)}function u2(t,n,e){var r=e.value;if(typeof r!="function")throw new TypeError("@boundMethod decorator can only be applied to methods not: ".concat(ym(r)));var i=!1;return{configurable:!0,get:function(){if(i||this===t.prototype||this.hasOwnProperty(n)||typeof r!="function")return r;var a=r.bind(this);return i=!0,Object.defineProperty(this,n,{configurable:!0,get:function(){return a},set:function(u){r=u,delete this[n]}}),i=!1,a},set:function(a){r=a}}}function TF(t){var n;return typeof Reflect<"u"&&typeof Reflect.ownKeys=="function"?n=Reflect.ownKeys(t.prototype):(n=Object.getOwnPropertyNames(t.prototype),typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(t.prototype)))),n.forEach(function(e){if(e!=="constructor"){var r=Object.getOwnPropertyDescriptor(t.prototype,e);typeof r.value=="function"&&Object.defineProperty(t.prototype,e,u2(t,e,r))}}),t}function Lee(){return arguments.length===1?TF.apply(void 0,arguments):u2.apply(void 0,arguments)}const Fee=Object.freeze(Object.defineProperty({__proto__:null,boundClass:TF,boundMethod:u2,default:Lee},Symbol.toStringTag,{value:"Module"})),zee=Bv(Fee);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var va=ve&&ve.__decorate||function(t,n,e,r){var i=arguments.length,o=i<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,n,e,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(o=(i<3?a(o):i>3?a(n,e,o):a(n,e))||o);return i>3&&o&&Object.defineProperty(n,e,o),o},Bee=ve&&ve.__awaiter||function(t,n,e,r){function i(o){return o instanceof e?o:new e(function(a){a(o)})}return new(e||(e=Promise))(function(o,a){function s(c){try{l(r.next(c))}catch(d){a(d)}}function u(c){try{l(r.throw(c))}catch(d){a(d)}}function l(c){c.done?o(c.value):i(c.value).then(s,u)}l((r=r.apply(t,n||[])).next())})},jee=ve&&ve.__generator||function(t,n){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return e.label++,{value:l[1],done:!1};case 5:e.label++,i=l[1],l=[0];continue;case 7:l=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){e=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){e.label=l[1];break}if(l[0]===6&&e.label<o[1]){e.label=o[1],o=l;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(l);break}o[2]&&e.ops.pop(),e.trys.pop();continue}l=n.call(t,e)}catch(c){l=[6,c],i=0}finally{r=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};Object.defineProperty(hy,"__esModule",{value:!0});hy.Webcam=void 0;var ga=zee,Vee=Li,w1={facingMode:"user",frameRate:24},$ee=function(t){return t.facingMode=t.facingMode||w1.facingMode,t.frameRate=t.frameRate||w1.frameRate,t.aspectRatio=t.aspectRatio||w1.aspectRatio,t},Uee=function(){function t(n,e,r){n===void 0&&(n=400),e===void 0&&(e=400),r===void 0&&(r=!1),this.width=n,this.height=e,this.flip=r}return t.prototype.getWebcam=function(n){if(n===void 0&&(n={}),!window.navigator.mediaDevices||!window.navigator.mediaDevices.getUserMedia)return Promise.reject("Your browser does not support WebRTC. Please try another one.");n.width=640;var e=$ee(n),r=document.createElement("video");return window.navigator.mediaDevices.getUserMedia({video:e}).then(function(i){return r.srcObject=i,r.addEventListener("loadedmetadata",function(o){var a=r.videoWidth,s=r.videoHeight;r.width=a,r.height=s}),r},function(){return Promise.reject("Could not open your camera. You may have denied access.")})},t.prototype.setup=function(n){return n===void 0&&(n={}),Bee(this,void 0,void 0,function(){var e;return jee(this,function(r){switch(r.label){case 0:return this.webcam?[3,2]:(e=this,[4,this.getWebcam(n)]);case 1:e.webcam=r.sent(),this.canvas||(this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height),r.label=2;case 2:return[2]}})})},t.prototype.play=function(){var n=this.webcam.play();return n},t.prototype.pause=function(){this.webcam.pause()},t.prototype.stop=function(){this.stopStreamedVideo(this.webcam)},t.prototype.update=function(){this.renderCameraToCanvas()},t.prototype.stopStreamedVideo=function(n){var e=n.srcObject,r=e.getTracks();r.forEach(function(i){i.stop()}),n.srcObject=null},t.prototype.renderCameraToCanvas=function(){if(this.canvas&&this.webcam){var n=this.canvas.getContext("2d");if(this.webcam.videoWidth!==0){var e=Vee.cropTo(this.webcam,this.width,this.flip);n.drawImage(e,0,0)}}},va([ga.default],t.prototype,"getWebcam",null),va([ga.default],t.prototype,"setup",null),va([ga.default],t.prototype,"play",null),va([ga.default],t.prototype,"pause",null),va([ga.default],t.prototype,"stop",null),va([ga.default],t.prototype,"update",null),va([ga.default],t.prototype,"stopStreamedVideo",null),va([ga.default],t.prototype,"renderCameraToCanvas",null),t}();hy.Webcam=Uee;(function(t){/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object.defineProperty(t,"__esModule",{value:!0});var n=VS;Object.defineProperty(t,"IMAGE_SIZE",{enumerable:!0,get:function(){return n.IMAGE_SIZE}}),Object.defineProperty(t,"CustomMobileNet",{enumerable:!0,get:function(){return n.CustomMobileNet}}),Object.defineProperty(t,"load",{enumerable:!0,get:function(){return n.load}}),Object.defineProperty(t,"loadFromFiles",{enumerable:!0,get:function(){return n.loadFromFiles}}),Object.defineProperty(t,"loadTruncatedMobileNet",{enumerable:!0,get:function(){return n.loadTruncatedMobileNet}});var e=dc;Object.defineProperty(t,"TeachableMobileNet",{enumerable:!0,get:function(){return e.TeachableMobileNet}}),Object.defineProperty(t,"createTeachable",{enumerable:!0,get:function(){return e.createTeachable}});var r=hy;Object.defineProperty(t,"Webcam",{enumerable:!0,get:function(){return r.Webcam}});var i=Rp;Object.defineProperty(t,"version",{enumerable:!0,get:function(){return i.version}})})(WD);const l2="/assets/backSymbol-A5W0hIK8.svg",fa=H.memo(({centerText:t,align:n="start",filter:e="none",prevPath:r=-1})=>{const i=jr(),o=()=>i(r,{state:r!==-1&&{data:r}});return T.jsxs("header",{className:"header",children:[T.jsx("img",{src:l2,alt:"Back Icon",style:{filter:e},onClick:o}),T.jsx("div",{className:"center-text",style:{justifyContent:n},children:t}),T.jsx("div",{className:"none"})]})}),Tp=({hidden:t})=>T.jsxs("div",{className:"dot-spinner",style:{display:t&&"none"},children:[T.jsx("div",{className:"dot-spinner__dot"}),T.jsx("div",{className:"dot-spinner__dot"}),T.jsx("div",{className:"dot-spinner__dot"}),T.jsx("div",{className:"dot-spinner__dot"}),T.jsx("div",{className:"dot-spinner__dot"}),T.jsx("div",{className:"dot-spinner__dot"}),T.jsx("div",{className:"dot-spinner__dot"}),T.jsx("div",{className:"dot-spinner__dot"})]});var c2={},Wee=wt;Object.defineProperty(c2,"__esModule",{value:!0});var d2=c2.default=void 0,Hee=Wee(xt()),Gee=T;d2=c2.default=(0,Hee.default)((0,Gee.jsx)("path",{d:"M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"}),"InfoOutlined");const jk="/my_model/",qee=()=>{const n=Si().state.value,e=H.useRef(null),r=H.useRef(null),[i,o]=H.useState(null),[a,s]=H.useState([]);H.useState(!1);const u=async()=>{if(console.log(r.current),console.log(e.current),r.current&&e.current)try{let c=e.current;const d=await r.current.predict(c,!1);d.sort((p,h)=>parseFloat(h.probability)-parseFloat(p.probability));const f=d[0].className;console.log(f),o(f)}catch(c){console.error("Prediction error:",c)}},l=async()=>{try{const c=jk+"model.json",d=jk+"metadata.json",f=await WD.load(c,d);r.current=f,await u()}catch(c){console.error("Model loading error:",c)}};return H.useEffect(()=>(l(),()=>{e.current=null}),[]),T.jsxs(T.Fragment,{children:[T.jsxs("div",{className:"result",style:{display:!i&&"none"},children:[T.jsx(fa,{centerText:"분석완료",align:"center"}),T.jsxs("div",{className:"result-body",children:[T.jsx("div",{className:"result-img",children:T.jsx("img",{className:"ml-result",src:n,ref:e,alt:""})}),T.jsxs("div",{className:"result-content",children:[T.jsxs("div",{className:"result-fish",children:[T.jsx("div",{className:"result-name",children:i}),T.jsx("div",{className:"result-detail",children:"자세히 보기"})]}),T.jsxs("div",{className:"fish-reviews",children:[T.jsxs("h3",{className:"reviews-title",children:[i,"의 리뷰"]}),T.jsx("div",{className:"wrapper",children:a.length?a.map(c=>T.jsxs("div",{children:[T.jsx("img",{src:"https://cdn.iconsumer.or.kr/news/photo/201806/7349_8772_1719.jpg"},c),T.jsx("div",{children:c})]})):T.jsx("div",{className:"none-data",children:"정보를 준비 중입니다."})})]})]})]})]}),T.jsx(Tp,{hidden:i})]})};var f2={},Kee=wt;Object.defineProperty(f2,"__esModule",{value:!0});var NF=f2.default=void 0,Xee=Kee(xt()),Yee=T;NF=f2.default=(0,Xee.default)((0,Yee.jsx)("path",{d:"M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5m0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5m0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5M7 19h14v-2H7zm0-6h14v-2H7zm0-8v2h14V5z"}),"FormatListBulleted");var p2={},Jee=wt;Object.defineProperty(p2,"__esModule",{value:!0});var kF=p2.default=void 0,Qee=Jee(xt()),Zee=T;kF=p2.default=(0,Qee.default)((0,Zee.jsx)("path",{d:"m20.5 3-.16.03L15 5.1 9 3 3.36 4.9c-.21.07-.36.25-.36.48V20.5c0 .28.22.5.5.5l.16-.03L9 18.9l6 2.1 5.64-1.9c.21-.07.36-.25.36-.48V3.5c0-.28-.22-.5-.5-.5M10 5.47l4 1.4v11.66l-4-1.4zm-5 .99 3-1.01v11.7l-3 1.16zm14 11.08-3 1.01V6.86l3-1.16z"}),"MapOutlined");var h2={},ete=wt;Object.defineProperty(h2,"__esModule",{value:!0});var IF=h2.default=void 0,tte=ete(xt()),nte=T;IF=h2.default=(0,tte.default)((0,nte.jsx)("path",{d:"m7 10 5 5 5-5z"}),"ArrowDropDownOutlined");var m2={},rte=wt;Object.defineProperty(m2,"__esModule",{value:!0});var Yw=m2.default=void 0,ite=rte(xt()),ote=T;Yw=m2.default=(0,ite.default)((0,ote.jsx)("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"CheckOutlined");var _F={};function ate(t){const n=new Error(t);if(n.stack===void 0)try{throw n}catch{}return n}var ste=ate,tt=ste;function ute(t){return!!t&&typeof t.then=="function"}var Ut=ute;function lte(t,n){if(t!=null)return t;throw tt(n??"Got unexpected null or undefined")}var Qt=lte;function Ye(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}class my{getValue(){throw tt("BaseLoadable")}toPromise(){throw tt("BaseLoadable")}valueMaybe(){throw tt("BaseLoadable")}valueOrThrow(){throw tt(`Loadable expected value, but in "${this.state}" state`)}promiseMaybe(){throw tt("BaseLoadable")}promiseOrThrow(){throw tt(`Loadable expected promise, but in "${this.state}" state`)}errorMaybe(){throw tt("BaseLoadable")}errorOrThrow(){throw tt(`Loadable expected error, but in "${this.state}" state`)}is(n){return n.state===this.state&&n.contents===this.contents}map(n){throw tt("BaseLoadable")}}class cte extends my{constructor(n){super(),Ye(this,"state","hasValue"),Ye(this,"contents",void 0),this.contents=n}getValue(){return this.contents}toPromise(){return Promise.resolve(this.contents)}valueMaybe(){return this.contents}valueOrThrow(){return this.contents}promiseMaybe(){}errorMaybe(){}map(n){try{const e=n(this.contents);return Ut(e)?gu(e):fc(e)?e:Np(e)}catch(e){return Ut(e)?gu(e.next(()=>this.map(n))):vy(e)}}}class dte extends my{constructor(n){super(),Ye(this,"state","hasError"),Ye(this,"contents",void 0),this.contents=n}getValue(){throw this.contents}toPromise(){return Promise.reject(this.contents)}valueMaybe(){}promiseMaybe(){}errorMaybe(){return this.contents}errorOrThrow(){return this.contents}map(n){return this}}class AF extends my{constructor(n){super(),Ye(this,"state","loading"),Ye(this,"contents",void 0),this.contents=n}getValue(){throw this.contents}toPromise(){return this.contents}valueMaybe(){}promiseMaybe(){return this.contents}promiseOrThrow(){return this.contents}errorMaybe(){}map(n){return gu(this.contents.then(e=>{const r=n(e);if(fc(r)){const i=r;switch(i.state){case"hasValue":return i.contents;case"hasError":throw i.contents;case"loading":return i.contents}}return r}).catch(e=>{if(Ut(e))return e.then(()=>this.map(n).contents);throw e}))}}function Np(t){return Object.freeze(new cte(t))}function vy(t){return Object.freeze(new dte(t))}function gu(t){return Object.freeze(new AF(t))}function OF(){return Object.freeze(new AF(new Promise(()=>{})))}function fte(t){return t.every(n=>n.state==="hasValue")?Np(t.map(n=>n.contents)):t.some(n=>n.state==="hasError")?vy(Qt(t.find(n=>n.state==="hasError"),"Invalid loadable passed to loadableAll").contents):gu(Promise.all(t.map(n=>n.contents)))}function DF(t){const e=(Array.isArray(t)?t:Object.getOwnPropertyNames(t).map(i=>t[i])).map(i=>fc(i)?i:Ut(i)?gu(i):Np(i)),r=fte(e);return Array.isArray(t)?r:r.map(i=>Object.getOwnPropertyNames(t).reduce((o,a,s)=>({...o,[a]:i[s]}),{}))}function fc(t){return t instanceof my}const pte={of:t=>Ut(t)?gu(t):fc(t)?t:Np(t),error:t=>vy(t),loading:()=>OF(),all:DF,isLoadable:fc};var Mu={loadableWithValue:Np,loadableWithError:vy,loadableWithPromise:gu,loadableLoading:OF,loadableAll:DF,isLoadable:fc,RecoilLoadable:pte},hte=Mu.loadableWithValue,mte=Mu.loadableWithError,vte=Mu.loadableWithPromise,gte=Mu.loadableLoading,yte=Mu.loadableAll,bte=Mu.isLoadable,wte=Mu.RecoilLoadable,kp=Object.freeze({__proto__:null,loadableWithValue:hte,loadableWithError:mte,loadableWithPromise:vte,loadableLoading:gte,loadableAll:yte,isLoadable:bte,RecoilLoadable:wte});const Jw={RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED:!0,RECOIL_GKS_ENABLED:new Set(["recoil_hamt_2020","recoil_sync_external_store","recoil_suppress_rerender_in_callback","recoil_memory_managament_2020"])};function xte(t,n){var e,r;const i=(e=_F[t])===null||e===void 0||(r=e.toLowerCase())===null||r===void 0?void 0:r.trim();if(i==null||i==="")return;if(!["true","false"].includes(i))throw tt(`process.env.${t} value must be 'true', 'false', or empty: ${i}`);n(i==="true")}function Ste(t,n){var e;const r=(e=_F[t])===null||e===void 0?void 0:e.trim();r==null||r===""||n(r.split(/\s*,\s*|\s+/))}function Ete(){var t;typeof process>"u"||((t=process)===null||t===void 0?void 0:t.env)!=null&&(xte("RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED",n=>{Jw.RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED=n}),Ste("RECOIL_GKS_ENABLED",n=>{n.forEach(e=>{Jw.RECOIL_GKS_ENABLED.add(e)})}))}Ete();var Pc=Jw;function gy(t){return Pc.RECOIL_GKS_ENABLED.has(t)}gy.setPass=t=>{Pc.RECOIL_GKS_ENABLED.add(t)};gy.setFail=t=>{Pc.RECOIL_GKS_ENABLED.delete(t)};gy.clear=()=>{Pc.RECOIL_GKS_ENABLED.clear()};var Mt=gy;function Cte(t,n,{error:e}={}){return null}var Rte=Cte,v2=Rte,x1,S1,E1;const Tte=(x1=_e.createMutableSource)!==null&&x1!==void 0?x1:_e.unstable_createMutableSource,MF=(S1=_e.useMutableSource)!==null&&S1!==void 0?S1:_e.unstable_useMutableSource,PF=(E1=_e.useSyncExternalStore)!==null&&E1!==void 0?E1:_e.unstable_useSyncExternalStore;function Nte(){var t;const{ReactCurrentDispatcher:n,ReactCurrentOwner:e}=_e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;return((t=n==null?void 0:n.current)!==null&&t!==void 0?t:e.currentDispatcher).useSyncExternalStore!=null}function kte(){return Mt("recoil_transition_support")?{mode:"TRANSITION_SUPPORT",early:!0,concurrent:!0}:Mt("recoil_sync_external_store")&&PF!=null?{mode:"SYNC_EXTERNAL_STORE",early:!0,concurrent:!1}:Mt("recoil_mutable_source")&&MF!=null&&typeof window<"u"&&!window.$disableRecoilValueMutableSource_TEMP_HACK_DO_NOT_USE?Mt("recoil_suppress_rerender_in_callback")?{mode:"MUTABLE_SOURCE",early:!0,concurrent:!0}:{mode:"MUTABLE_SOURCE",early:!1,concurrent:!1}:Mt("recoil_suppress_rerender_in_callback")?{mode:"LEGACY",early:!0,concurrent:!1}:{mode:"LEGACY",early:!1,concurrent:!1}}function Ite(){return!1}var Ip={createMutableSource:Tte,useMutableSource:MF,useSyncExternalStore:PF,currentRendererSupportsUseSyncExternalStore:Nte,reactMode:kte,isFastRefreshEnabled:Ite};class g2{constructor(n){Ye(this,"key",void 0),this.key=n}toJSON(){return{key:this.key}}}class LF extends g2{}class FF extends g2{}function _te(t){return t instanceof LF||t instanceof FF}var yy={AbstractRecoilValue:g2,RecoilState:LF,RecoilValueReadOnly:FF,isRecoilValue:_te},Ate=yy.AbstractRecoilValue,Ote=yy.RecoilState,Dte=yy.RecoilValueReadOnly,Mte=yy.isRecoilValue,pc=Object.freeze({__proto__:null,AbstractRecoilValue:Ate,RecoilState:Ote,RecoilValueReadOnly:Dte,isRecoilValue:Mte});function Pte(t,n){return function*(){let e=0;for(const r of t)yield n(r,e++)}()}var by=Pte;class zF{}const Lte=new zF,yu=new Map,y2=new Map;function Fte(t){return by(t,n=>Qt(y2.get(n)))}function zte(t){if(yu.has(t)){const n=`Duplicate atom key "${t}". This is a FATAL ERROR in
      production. But it is safe to ignore this warning if it occurred because of
      hot module replacement.`;console.warn(n)}}function Bte(t){Pc.RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED&&zte(t.key),yu.set(t.key,t);const n=t.set==null?new pc.RecoilValueReadOnly(t.key):new pc.RecoilState(t.key);return y2.set(t.key,n),n}class BF extends Error{}function jte(t){const n=yu.get(t);if(n==null)throw new BF(`Missing definition for RecoilValue: "${t}""`);return n}function Vte(t){return yu.get(t)}const kv=new Map;function $te(t){var n;if(!Mt("recoil_memory_managament_2020"))return;const e=yu.get(t);if(e!=null&&(n=e.shouldDeleteConfigOnRelease)!==null&&n!==void 0&&n.call(e)){var r;yu.delete(t),(r=jF(t))===null||r===void 0||r(),kv.delete(t)}}function Ute(t,n){Mt("recoil_memory_managament_2020")&&(n===void 0?kv.delete(t):kv.set(t,n))}function jF(t){return kv.get(t)}var Vr={nodes:yu,recoilValues:y2,registerNode:Bte,getNode:jte,getNodeMaybe:Vte,deleteNodeConfigIfPossible:$te,setConfigDeletionHandler:Ute,getConfigDeletionHandler:jF,recoilValuesForKeys:Fte,NodeMissingError:BF,DefaultValue:zF,DEFAULT_VALUE:Lte};function Wte(t,n){n()}var Hte={enqueueExecution:Wte};function Gte(t,n){return n={exports:{}},t(n,n.exports),n.exports}var qte=Gte(function(t){var n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Q){return typeof Q}:function(Q){return Q&&typeof Symbol=="function"&&Q.constructor===Symbol&&Q!==Symbol.prototype?"symbol":typeof Q},e={},r=5,i=Math.pow(2,r),o=i-1,a=i/2,s=i/4,u={},l=function(J){return function(){return J}},c=e.hash=function(Q){var J=typeof Q>"u"?"undefined":n(Q);if(J==="number")return Q;J!=="string"&&(Q+="");for(var me=0,Ce=0,Re=Q.length;Ce<Re;++Ce){var Ie=Q.charCodeAt(Ce);me=(me<<5)-me+Ie|0}return me},d=function(J){return J-=J>>1&1431655765,J=(J&858993459)+(J>>2&858993459),J=J+(J>>4)&252645135,J+=J>>8,J+=J>>16,J&127},f=function(J,me){return me>>>J&o},p=function(J){return 1<<J},h=function(J,me){return d(J&me-1)},v=function(J,me,Ce,Re){var Ie=Re;if(!J){var $e=Re.length;Ie=new Array($e);for(var je=0;je<$e;++je)Ie[je]=Re[je]}return Ie[me]=Ce,Ie},g=function(J,me,Ce){var Re=Ce.length-1,Ie=0,$e=0,je=Ce;if(J)Ie=$e=me;else for(je=new Array(Re);Ie<me;)je[$e++]=Ce[Ie++];for(++Ie;Ie<=Re;)je[$e++]=Ce[Ie++];return J&&(je.length=Re),je},m=function(J,me,Ce,Re){var Ie=Re.length;if(J){for(var $e=Ie;$e>=me;)Re[$e--]=Re[$e];return Re[me]=Ce,Re}for(var je=0,Ve=0,ot=new Array(Ie+1);je<me;)ot[Ve++]=Re[je++];for(ot[me]=Ce;je<Ie;)ot[++Ve]=Re[je++];return ot},y=1,b=2,w=3,x=4,C={__hamt_isEmpty:!0},E=function(J){return J===C||J&&J.__hamt_isEmpty},S=function(J,me,Ce,Re){return{type:y,edit:J,hash:me,key:Ce,value:Re,_modify:_}},N=function(J,me,Ce){return{type:b,edit:J,hash:me,children:Ce,_modify:F}},k=function(J,me,Ce){return{type:w,edit:J,mask:me,children:Ce,_modify:L}},M=function(J,me,Ce){return{type:x,edit:J,size:me,children:Ce,_modify:W}},D=function(J){return J===C||J.type===y||J.type===b},R=function(J,me,Ce,Re,Ie){for(var $e=[],je=Re,Ve=0,ot=0;je;++ot)je&1&&($e[ot]=Ie[Ve++]),je>>>=1;return $e[me]=Ce,M(J,Ve+1,$e)},O=function(J,me,Ce,Re){for(var Ie=new Array(me-1),$e=0,je=0,Ve=0,ot=Re.length;Ve<ot;++Ve)if(Ve!==Ce){var qt=Re[Ve];qt&&!E(qt)&&(Ie[$e++]=qt,je|=1<<Ve)}return k(J,je,Ie)},P=function Q(J,me,Ce,Re,Ie,$e){if(Ce===Ie)return N(J,Ce,[$e,Re]);var je=f(me,Ce),Ve=f(me,Ie);return k(J,p(je)|p(Ve),je===Ve?[Q(J,me+r,Ce,Re,Ie,$e)]:je<Ve?[Re,$e]:[$e,Re])},A=function(J,me,Ce,Re,Ie,$e,je,Ve){for(var ot=Ie.length,qt=0;qt<ot;++qt){var Er=Ie[qt];if(Ce(je,Er.key)){var Dn=Er.value,li=$e(Dn);return li===Dn?Ie:li===u?(--Ve.value,g(J,qt,Ie)):v(J,qt,S(me,Re,je,li),Ie)}}var Ri=$e();return Ri===u?Ie:(++Ve.value,v(J,ot,S(me,Re,je,Ri),Ie))},I=function(J,me){return J===me.edit},_=function(J,me,Ce,Re,Ie,$e,je){if(me($e,this.key)){var Ve=Re(this.value);return Ve===this.value?this:Ve===u?(--je.value,C):I(J,this)?(this.value=Ve,this):S(J,Ie,$e,Ve)}var ot=Re();return ot===u?this:(++je.value,P(J,Ce,this.hash,this,Ie,S(J,Ie,$e,ot)))},F=function(J,me,Ce,Re,Ie,$e,je){if(Ie===this.hash){var Ve=I(J,this),ot=A(Ve,J,me,this.hash,this.children,Re,$e,je);return ot===this.children?this:ot.length>1?N(J,this.hash,ot):ot[0]}var qt=Re();return qt===u?this:(++je.value,P(J,Ce,this.hash,this,Ie,S(J,Ie,$e,qt)))},L=function(J,me,Ce,Re,Ie,$e,je){var Ve=this.mask,ot=this.children,qt=f(Ce,Ie),Er=p(qt),Dn=h(Ve,Er),li=Ve&Er,Ri=li?ot[Dn]:C,Vu=Ri._modify(J,me,Ce+r,Re,Ie,$e,je);if(Ri===Vu)return this;var Yp=I(J,this),Kc=Ve,Xc=void 0;if(li&&E(Vu)){if(Kc&=~Er,!Kc)return C;if(ot.length<=2&&D(ot[Dn^1]))return ot[Dn^1];Xc=g(Yp,Dn,ot)}else if(!li&&!E(Vu)){if(ot.length>=a)return R(J,qt,Vu,Ve,ot);Kc|=Er,Xc=m(Yp,Dn,Vu,ot)}else Xc=v(Yp,Dn,Vu,ot);return Yp?(this.mask=Kc,this.children=Xc,this):k(J,Kc,Xc)},W=function(J,me,Ce,Re,Ie,$e,je){var Ve=this.size,ot=this.children,qt=f(Ce,Ie),Er=ot[qt],Dn=(Er||C)._modify(J,me,Ce+r,Re,Ie,$e,je);if(Er===Dn)return this;var li=I(J,this),Ri=void 0;if(E(Er)&&!E(Dn))++Ve,Ri=v(li,qt,Dn,ot);else if(!E(Er)&&E(Dn)){if(--Ve,Ve<=s)return O(J,Ve,qt,ot);Ri=v(li,qt,C,ot)}else Ri=v(li,qt,Dn,ot);return li?(this.size=Ve,this.children=Ri,this):M(J,Ve,Ri)};C._modify=function(Q,J,me,Ce,Re,Ie,$e){var je=Ce();return je===u?C:(++$e.value,S(Q,Re,Ie,je))};function B(Q,J,me,Ce,Re){this._editable=Q,this._edit=J,this._config=me,this._root=Ce,this._size=Re}B.prototype.setTree=function(Q,J){return this._editable?(this._root=Q,this._size=J,this):Q===this._root?this:new B(this._editable,this._edit,this._config,Q,J)};var q=e.tryGetHash=function(Q,J,me,Ce){for(var Re=Ce._root,Ie=0,$e=Ce._config.keyEq;;)switch(Re.type){case y:return $e(me,Re.key)?Re.value:Q;case b:{if(J===Re.hash)for(var je=Re.children,Ve=0,ot=je.length;Ve<ot;++Ve){var qt=je[Ve];if($e(me,qt.key))return qt.value}return Q}case w:{var Er=f(Ie,J),Dn=p(Er);if(Re.mask&Dn){Re=Re.children[h(Re.mask,Dn)],Ie+=r;break}return Q}case x:{if(Re=Re.children[f(Ie,J)],Re){Ie+=r;break}return Q}default:return Q}};B.prototype.tryGetHash=function(Q,J,me){return q(Q,J,me,this)};var G=e.tryGet=function(Q,J,me){return q(Q,me._config.hash(J),J,me)};B.prototype.tryGet=function(Q,J){return G(Q,J,this)};var re=e.getHash=function(Q,J,me){return q(void 0,Q,J,me)};B.prototype.getHash=function(Q,J){return re(Q,J,this)},e.get=function(Q,J){return q(void 0,J._config.hash(Q),Q,J)},B.prototype.get=function(Q,J){return G(J,Q,this)};var j=e.has=function(Q,J,me){return q(u,Q,J,me)!==u};B.prototype.hasHash=function(Q,J){return j(Q,J,this)};var ae=e.has=function(Q,J){return j(J._config.hash(Q),Q,J)};B.prototype.has=function(Q){return ae(Q,this)};var te=function(J,me){return J===me};e.make=function(Q){return new B(0,0,{keyEq:Q&&Q.keyEq||te,hash:Q&&Q.hash||c},C,0)},e.empty=e.make();var le=e.isEmpty=function(Q){return Q&&!!E(Q._root)};B.prototype.isEmpty=function(){return le(this)};var Ee=e.modifyHash=function(Q,J,me,Ce){var Re={value:Ce._size},Ie=Ce._root._modify(Ce._editable?Ce._edit:NaN,Ce._config.keyEq,0,Q,J,me,Re);return Ce.setTree(Ie,Re.value)};B.prototype.modifyHash=function(Q,J,me){return Ee(me,Q,J,this)};var se=e.modify=function(Q,J,me){return Ee(Q,me._config.hash(J),J,me)};B.prototype.modify=function(Q,J){return se(J,Q,this)};var be=e.setHash=function(Q,J,me,Ce){return Ee(l(me),Q,J,Ce)};B.prototype.setHash=function(Q,J,me){return be(Q,J,me,this)};var fe=e.set=function(Q,J,me){return be(me._config.hash(Q),Q,J,me)};B.prototype.set=function(Q,J){return fe(Q,J,this)};var Z=l(u),ge=e.removeHash=function(Q,J,me){return Ee(Z,Q,J,me)};B.prototype.removeHash=B.prototype.deleteHash=function(Q,J){return ge(Q,J,this)};var we=e.remove=function(Q,J){return ge(J._config.hash(Q),Q,J)};B.prototype.remove=B.prototype.delete=function(Q){return we(Q,this)};var de=e.beginMutation=function(Q){return new B(Q._editable+1,Q._edit+1,Q._config,Q._root,Q._size)};B.prototype.beginMutation=function(){return de(this)};var On=e.endMutation=function(Q){return Q._editable=Q._editable&&Q._editable-1,Q};B.prototype.endMutation=function(){return On(this)};var fn=e.mutate=function(Q,J){var me=de(J);return Q(me),On(me)};B.prototype.mutate=function(Q){return fn(Q,this)};var pn=function(J){return J&&De(J[0],J[1],J[2],J[3],J[4])},De=function(J,me,Ce,Re,Ie){for(;Ce<J;){var $e=me[Ce++];if($e&&!E($e))return lt($e,Re,[J,me,Ce,Re,Ie])}return pn(Ie)},lt=function(J,me,Ce){switch(J.type){case y:return{value:me(J),rest:Ce};case b:case x:case w:var Re=J.children;return De(Re.length,Re,0,me,Ce);default:return pn(Ce)}},Le={done:!0};function Xe(Q){this.v=Q}Xe.prototype.next=function(){if(!this.v)return Le;var Q=this.v;return this.v=pn(Q.rest),Q},Xe.prototype[Symbol.iterator]=function(){return this};var Pe=function(J,me){return new Xe(lt(J._root,me))},ze=function(J){return[J.key,J.value]},Ze=e.entries=function(Q){return Pe(Q,ze)};B.prototype.entries=B.prototype[Symbol.iterator]=function(){return Ze(this)};var qe=function(J){return J.key},St=e.keys=function(Q){return Pe(Q,qe)};B.prototype.keys=function(){return St(this)};var Io=function(J){return J.value},ui=e.values=B.prototype.values=function(Q){return Pe(Q,Io)};B.prototype.values=function(){return ui(this)};var ju=e.fold=function(Q,J,me){var Ce=me._root;if(Ce.type===y)return Q(J,Ce.value,Ce.key);for(var Re=[Ce.children],Ie=void 0;Ie=Re.pop();)for(var $e=0,je=Ie.length;$e<je;){var Ve=Ie[$e++];Ve&&Ve.type&&(Ve.type===y?J=Q(J,Ve.value,Ve.key):Re.push(Ve.children))}return J};B.prototype.fold=function(Q,J){return ju(Q,J,this)};var Gc=e.forEach=function(Q,J){return ju(function(me,Ce,Re){return Q(Ce,Re,J)},null,J)};B.prototype.forEach=function(Q){return Gc(Q,this)};var qc=e.count=function(Q){return Q._size};B.prototype.count=function(){return qc(this)},Object.defineProperty(B.prototype,"size",{get:B.prototype.count}),t.exports?t.exports=e:(void 0).hamt=e});class Kte{constructor(n){Ye(this,"_map",void 0),this._map=new Map(n==null?void 0:n.entries())}keys(){return this._map.keys()}entries(){return this._map.entries()}get(n){return this._map.get(n)}has(n){return this._map.has(n)}set(n,e){return this._map.set(n,e),this}delete(n){return this._map.delete(n),this}clone(){return w2(this)}toMap(){return new Map(this._map)}}class b2{constructor(n){if(Ye(this,"_hamt",qte.empty.beginMutation()),n instanceof b2){const e=n._hamt.endMutation();n._hamt=e.beginMutation(),this._hamt=e.beginMutation()}else if(n)for(const[e,r]of n.entries())this._hamt.set(e,r)}keys(){return this._hamt.keys()}entries(){return this._hamt.entries()}get(n){return this._hamt.get(n)}has(n){return this._hamt.has(n)}set(n,e){return this._hamt.set(n,e),this}delete(n){return this._hamt.delete(n),this}clone(){return w2(this)}toMap(){return new Map(this._hamt)}}function w2(t){return Mt("recoil_hamt_2020")?new b2(t):new Kte(t)}var Xte={persistentMap:w2},Yte=Xte.persistentMap,Jte=Object.freeze({__proto__:null,persistentMap:Yte});function Qte(t,...n){const e=new Set;e:for(const r of t){for(const i of n)if(i.has(r))continue e;e.add(r)}return e}var ef=Qte;function Zte(t,n){const e=new Map;return t.forEach((r,i)=>{e.set(i,n(r,i))}),e}var Iv=Zte;function ene(){return{nodeDeps:new Map,nodeToNodeSubscriptions:new Map}}function tne(t){return{nodeDeps:Iv(t.nodeDeps,n=>new Set(n)),nodeToNodeSubscriptions:Iv(t.nodeToNodeSubscriptions,n=>new Set(n))}}function C1(t,n,e,r){const{nodeDeps:i,nodeToNodeSubscriptions:o}=e,a=i.get(t);if(a&&r&&a!==r.nodeDeps.get(t))return;i.set(t,n);const s=a==null?n:ef(n,a);for(const u of s)o.has(u)||o.set(u,new Set),Qt(o.get(u)).add(t);if(a){const u=ef(a,n);for(const l of u){if(!o.has(l))return;const c=Qt(o.get(l));c.delete(t),c.size===0&&o.delete(l)}}}function nne(t,n,e,r){var i,o,a,s;const u=e.getState();r===u.currentTree.version||r===((i=u.nextTree)===null||i===void 0?void 0:i.version)||((o=u.previousTree)===null||o===void 0||o.version);const l=e.getGraph(r);if(C1(t,n,l),r===((a=u.previousTree)===null||a===void 0?void 0:a.version)){const d=e.getGraph(u.currentTree.version);C1(t,n,d,l)}if(r===((s=u.previousTree)===null||s===void 0?void 0:s.version)||r===u.currentTree.version){var c;const d=(c=u.nextTree)===null||c===void 0?void 0:c.version;if(d!==void 0){const f=e.getGraph(d);C1(t,n,f,l)}}}var _p={cloneGraph:tne,graph:ene,saveDepsToStore:nne};let rne=0;const ine=()=>rne++;let one=0;const ane=()=>one++;let sne=0;const une=()=>sne++;var wy={getNextTreeStateVersion:ine,getNextStoreID:ane,getNextComponentID:une};const{persistentMap:Vk}=Jte,{graph:lne}=_p,{getNextTreeStateVersion:VF}=wy;function $F(){const t=VF();return{version:t,stateID:t,transactionMetadata:{},dirtyAtoms:new Set,atomValues:Vk(),nonvalidatedAtoms:Vk()}}function cne(){const t=$F();return{currentTree:t,nextTree:null,previousTree:null,commitDepth:0,knownAtoms:new Set,knownSelectors:new Set,transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:new Map().set(t.version,lne()),retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map}}var UF={makeEmptyTreeState:$F,makeEmptyStoreState:cne,getNextTreeStateVersion:VF};class WF{}function dne(){return new WF}var xy={RetentionZone:WF,retentionZone:dne};function fne(t,n){const e=new Set(t);return e.add(n),e}function pne(t,n){const e=new Set(t);return e.delete(n),e}function hne(t,n,e){const r=new Map(t);return r.set(n,e),r}function mne(t,n,e){const r=new Map(t);return r.set(n,e(r.get(n))),r}function vne(t,n){const e=new Map(t);return e.delete(n),e}function gne(t,n){const e=new Map(t);return n.forEach(r=>e.delete(r)),e}var HF={setByAddingToSet:fne,setByDeletingFromSet:pne,mapBySettingInMap:hne,mapByUpdatingInMap:mne,mapByDeletingFromMap:vne,mapByDeletingMultipleFromMap:gne};function*yne(t,n){let e=0;for(const r of t)n(r,e++)&&(yield r)}var x2=yne;function bne(t,n){return new Proxy(t,{get:(r,i)=>(!(i in r)&&i in n&&(r[i]=n[i]()),r[i]),ownKeys:r=>Object.keys(r)})}var GF=bne;const{getNode:Ap,getNodeMaybe:wne,recoilValuesForKeys:$k}=Vr,{RetentionZone:Uk}=xy,{setByAddingToSet:xne}=HF,Sne=Object.freeze(new Set);class Ene extends Error{}function Cne(t,n,e){if(!Mt("recoil_memory_managament_2020"))return()=>{};const{nodesRetainedByZone:r}=t.getState().retention;function i(o){let a=r.get(o);a||r.set(o,a=new Set),a.add(n)}if(e instanceof Uk)i(e);else if(Array.isArray(e))for(const o of e)i(o);return()=>{if(!Mt("recoil_memory_managament_2020"))return;const{retention:o}=t.getState();function a(s){const u=o.nodesRetainedByZone.get(s);u==null||u.delete(n),u&&u.size===0&&o.nodesRetainedByZone.delete(s)}if(e instanceof Uk)a(e);else if(Array.isArray(e))for(const s of e)a(s)}}function S2(t,n,e,r){const i=t.getState();if(i.nodeCleanupFunctions.has(e))return;const o=Ap(e),a=Cne(t,e,o.retainedBy),s=o.init(t,n,r);i.nodeCleanupFunctions.set(e,()=>{s(),a()})}function Rne(t,n,e){S2(t,t.getState().currentTree,n,e)}function Tne(t,n){var e;const r=t.getState();(e=r.nodeCleanupFunctions.get(n))===null||e===void 0||e(),r.nodeCleanupFunctions.delete(n)}function Nne(t,n,e){return S2(t,n,e,"get"),Ap(e).get(t,n)}function qF(t,n,e){return Ap(e).peek(t,n)}function kne(t,n,e){var r;const i=wne(n);return i==null||(r=i.invalidate)===null||r===void 0||r.call(i,t),{...t,atomValues:t.atomValues.clone().delete(n),nonvalidatedAtoms:t.nonvalidatedAtoms.clone().set(n,e),dirtyAtoms:xne(t.dirtyAtoms,n)}}function Ine(t,n,e,r){const i=Ap(e);if(i.set==null)throw new Ene(`Attempt to set read-only RecoilValue: ${e}`);const o=i.set;return S2(t,n,e,"set"),o(t,n,r)}function _ne(t,n,e){const r=t.getState(),i=t.getGraph(n.version),o=Ap(e).nodeType;return GF({type:o},{loadable:()=>qF(t,n,e),isActive:()=>r.knownAtoms.has(e)||r.knownSelectors.has(e),isSet:()=>o==="selector"?!1:n.atomValues.has(e),isModified:()=>n.dirtyAtoms.has(e),deps:()=>{var a;return $k((a=i.nodeDeps.get(e))!==null&&a!==void 0?a:[])},subscribers:()=>{var a,s;return{nodes:$k(x2(KF(t,n,new Set([e])),u=>u!==e)),components:by((a=(s=r.nodeToComponentSubscriptions.get(e))===null||s===void 0?void 0:s.values())!==null&&a!==void 0?a:[],([u])=>({name:u}))}}})}function KF(t,n,e){const r=new Set,i=Array.from(e),o=t.getGraph(n.version);for(let s=i.pop();s;s=i.pop()){var a;r.add(s);const u=(a=o.nodeToNodeSubscriptions.get(s))!==null&&a!==void 0?a:Sne;for(const l of u)r.has(l)||i.push(l)}return r}var Ss={getNodeLoadable:Nne,peekNodeLoadable:qF,setNodeValue:Ine,initializeNode:Rne,cleanUpNode:Tne,setUnvalidatedAtomValue_DEPRECATED:kne,peekNodeInfo:_ne,getDownstreamNodes:KF};let XF=null;function Ane(t){XF=t}function One(){var t;(t=XF)===null||t===void 0||t()}var YF={setInvalidateMemoizedSnapshot:Ane,invalidateMemoizedSnapshot:One};const{getDownstreamNodes:Dne,getNodeLoadable:JF,setNodeValue:Mne}=Ss,{getNextComponentID:Pne}=wy,{getNode:Lne,getNodeMaybe:QF}=Vr,{DefaultValue:E2}=Vr,{reactMode:Fne}=Ip,{AbstractRecoilValue:zne,RecoilState:Bne,RecoilValueReadOnly:jne,isRecoilValue:Vne}=pc,{invalidateMemoizedSnapshot:$ne}=YF;function Une(t,{key:n},e=t.getState().currentTree){var r,i;const o=t.getState();e.version===o.currentTree.version||e.version===((r=o.nextTree)===null||r===void 0?void 0:r.version)||(e.version,(i=o.previousTree)===null||i===void 0||i.version);const a=JF(t,e,n);return a.state==="loading"&&a.contents.catch(()=>{}),a}function Wne(t,n){const e=t.clone();return n.forEach((r,i)=>{r.state==="hasValue"&&r.contents instanceof E2?e.delete(i):e.set(i,r)}),e}function Hne(t,n,{key:e},r){if(typeof r=="function"){const i=JF(t,n,e);if(i.state==="loading"){const o=`Tried to set atom or selector "${e}" using an updater function while the current state is pending, this is not currently supported.`;throw tt(o)}else if(i.state==="hasError")throw i.contents;return r(i.contents)}else return r}function Gne(t,n,e){if(e.type==="set"){const{recoilValue:i,valueOrUpdater:o}=e,a=Hne(t,n,i,o),s=Mne(t,n,i.key,a);for(const[u,l]of s.entries())Qw(n,u,l)}else if(e.type==="setLoadable"){const{recoilValue:{key:i},loadable:o}=e;Qw(n,i,o)}else if(e.type==="markModified"){const{recoilValue:{key:i}}=e;n.dirtyAtoms.add(i)}else if(e.type==="setUnvalidated"){var r;const{recoilValue:{key:i},unvalidatedValue:o}=e,a=QF(i);a==null||(r=a.invalidate)===null||r===void 0||r.call(a,n),n.atomValues.delete(i),n.nonvalidatedAtoms.set(i,o),n.dirtyAtoms.add(i)}else v2(`Unknown action ${e.type}`)}function Qw(t,n,e){e.state==="hasValue"&&e.contents instanceof E2?t.atomValues.delete(n):t.atomValues.set(n,e),t.dirtyAtoms.add(n),t.nonvalidatedAtoms.delete(n)}function ZF(t,n){t.replaceState(e=>{const r=ez(e);for(const i of n)Gne(t,r,i);return tz(t,r),$ne(),r})}function Sy(t,n){if(tf.length){const e=tf[tf.length-1];let r=e.get(t);r||e.set(t,r=[]),r.push(n)}else ZF(t,[n])}const tf=[];function qne(){const t=new Map;return tf.push(t),()=>{for(const[n,e]of t)ZF(n,e);tf.pop()}}function ez(t){return{...t,atomValues:t.atomValues.clone(),nonvalidatedAtoms:t.nonvalidatedAtoms.clone(),dirtyAtoms:new Set(t.dirtyAtoms)}}function tz(t,n){const e=Dne(t,n,n.dirtyAtoms);for(const o of e){var r,i;(r=QF(o))===null||r===void 0||(i=r.invalidate)===null||i===void 0||i.call(r,n)}}function nz(t,n,e){Sy(t,{type:"set",recoilValue:n,valueOrUpdater:e})}function Kne(t,n,e){if(e instanceof E2)return nz(t,n,e);Sy(t,{type:"setLoadable",recoilValue:n,loadable:e})}function Xne(t,n){Sy(t,{type:"markModified",recoilValue:n})}function Yne(t,n,e){Sy(t,{type:"setUnvalidated",recoilValue:n,unvalidatedValue:e})}function Jne(t,{key:n},e,r=null){const i=Pne(),o=t.getState();o.nodeToComponentSubscriptions.has(n)||o.nodeToComponentSubscriptions.set(n,new Map),Qt(o.nodeToComponentSubscriptions.get(n)).set(i,[r??"<not captured>",e]);const a=Fne();if(a.early&&(a.mode==="LEGACY"||a.mode==="MUTABLE_SOURCE")){const s=t.getState().nextTree;s&&s.dirtyAtoms.has(n)&&e(s)}return{release:()=>{const s=t.getState(),u=s.nodeToComponentSubscriptions.get(n);u===void 0||!u.has(i)||(u.delete(i),u.size===0&&s.nodeToComponentSubscriptions.delete(n))}}}function Qne(t,n){var e;const{currentTree:r}=t.getState(),i=Lne(n.key);(e=i.clearCache)===null||e===void 0||e.call(i,t,r)}var To={RecoilValueReadOnly:jne,AbstractRecoilValue:zne,RecoilState:Bne,getRecoilValueAsLoadable:Une,setRecoilValue:nz,setRecoilValueLoadable:Kne,markRecoilValueModified:Xne,setUnvalidatedRecoilValue:Yne,subscribeToRecoilValue:Jne,isRecoilValue:Vne,applyAtomValueWrites:Wne,batchStart:qne,writeLoadableToTreeState:Qw,invalidateDownstreams:tz,copyTreeState:ez,refreshRecoilValue:Qne};function Zne(t,n,e){const r=t.entries();let i=r.next();for(;!i.done;){const o=i.value;if(n.call(e,o[1],o[0],t))return!0;i=r.next()}return!1}var ere=Zne;const{cleanUpNode:tre}=Ss,{deleteNodeConfigIfPossible:nre,getNode:rz}=Vr,{RetentionZone:iz}=xy,rre=12e4,oz=new Set;function az(t,n){const e=t.getState(),r=e.currentTree;if(e.nextTree)return;const i=new Set;for(const a of n)if(a instanceof iz)for(const s of sre(e,a))i.add(s);else i.add(a);const o=ire(t,i);for(const a of o)are(t,r,a)}function ire(t,n){const e=t.getState(),r=e.currentTree,i=t.getGraph(r.version),o=new Set,a=new Set;return s(n),o;function s(u){const l=new Set,c=ore(t,r,u,o,a);for(const h of c){var d;if(rz(h).retainedBy==="recoilRoot"){a.add(h);continue}if(((d=e.retention.referenceCounts.get(h))!==null&&d!==void 0?d:0)>0){a.add(h);continue}if(sz(h).some(g=>e.retention.referenceCounts.get(g))){a.add(h);continue}const v=i.nodeToNodeSubscriptions.get(h);if(v&&ere(v,g=>a.has(g))){a.add(h);continue}o.add(h),l.add(h)}const f=new Set;for(const h of l)for(const v of(p=i.nodeDeps.get(h))!==null&&p!==void 0?p:oz){var p;o.has(v)||f.add(v)}f.size&&s(f)}}function ore(t,n,e,r,i){const o=t.getGraph(n.version),a=[],s=new Set;for(;e.size>0;)u(Qt(e.values().next().value));return a;function u(l){if(r.has(l)||i.has(l)){e.delete(l);return}if(s.has(l))return;const c=o.nodeToNodeSubscriptions.get(l);if(c)for(const d of c)u(d);s.add(l),e.delete(l),a.push(l)}}function are(t,n,e){if(!Mt("recoil_memory_managament_2020"))return;tre(t,e);const r=t.getState();r.knownAtoms.delete(e),r.knownSelectors.delete(e),r.nodeTransactionSubscriptions.delete(e),r.retention.referenceCounts.delete(e);const i=sz(e);for(const u of i){var o;(o=r.retention.nodesRetainedByZone.get(u))===null||o===void 0||o.delete(e)}n.atomValues.delete(e),n.dirtyAtoms.delete(e),n.nonvalidatedAtoms.delete(e);const a=r.graphsByVersion.get(n.version);if(a){const u=a.nodeDeps.get(e);if(u!==void 0){a.nodeDeps.delete(e);for(const l of u){var s;(s=a.nodeToNodeSubscriptions.get(l))===null||s===void 0||s.delete(e)}}a.nodeToNodeSubscriptions.delete(e)}nre(e)}function sre(t,n){var e;return(e=t.retention.nodesRetainedByZone.get(n))!==null&&e!==void 0?e:oz}function sz(t){const n=rz(t).retainedBy;return n===void 0||n==="components"||n==="recoilRoot"?[]:n instanceof iz?[n]:n}function ure(t,n){const e=t.getState();e.nextTree?e.retention.retainablesToCheckForRelease.add(n):az(t,new Set([n]))}function lre(t,n,e){var r;if(!Mt("recoil_memory_managament_2020"))return;const i=t.getState().retention.referenceCounts,o=((r=i.get(n))!==null&&r!==void 0?r:0)+e;o===0?uz(t,n):i.set(n,o)}function uz(t,n){if(!Mt("recoil_memory_managament_2020"))return;t.getState().retention.referenceCounts.delete(n),ure(t,n)}function cre(t){if(!Mt("recoil_memory_managament_2020"))return;const n=t.getState();az(t,n.retention.retainablesToCheckForRelease),n.retention.retainablesToCheckForRelease.clear()}function dre(t){return t===void 0?"recoilRoot":t}var Pu={SUSPENSE_TIMEOUT_MS:rre,updateRetainCount:lre,updateRetainCountToZero:uz,releaseScheduledRetainablesNow:cre,retainedByOptionWithDefault:dre};const{unstable_batchedUpdates:fre}=LO;var pre={unstable_batchedUpdates:fre};const{unstable_batchedUpdates:hre}=pre;var mre={unstable_batchedUpdates:hre};const{batchStart:vre}=To,{unstable_batchedUpdates:gre}=mre;let C2=gre||(t=>t());const yre=t=>{C2=t},bre=()=>C2,wre=t=>{C2(()=>{let n=()=>{};try{n=vre(),t()}finally{n()}})};var Ey={getBatcher:bre,setBatcher:yre,batchUpdates:wre};function*xre(t){for(const n of t)for(const e of n)yield e}var lz=xre;const cz=typeof Window>"u"||typeof window>"u",Sre=t=>!cz&&(t===window||t instanceof Window),Ere=typeof navigator<"u"&&navigator.product==="ReactNative";var Cy={isSSR:cz,isReactNative:Ere,isWindow:Sre};function Cre(t,n){let e;return(...r)=>{e||(e={});const i=n(...r);return Object.hasOwnProperty.call(e,i)||(e[i]=t(...r)),e[i]}}function Rre(t,n){let e,r;return(...i)=>{const o=n(...i);return e===o||(e=o,r=t(...i)),r}}function Tre(t,n){let e,r;return[(...a)=>{const s=n(...a);return e===s||(e=s,r=t(...a)),r},()=>{e=null}]}var Nre={memoizeWithArgsHash:Cre,memoizeOneWithArgsHash:Rre,memoizeOneWithArgsHashAndInvalidation:Tre};const{batchUpdates:Zw}=Ey,{initializeNode:kre,peekNodeInfo:Ire}=Ss,{graph:_re}=_p,{getNextStoreID:Are}=wy,{DEFAULT_VALUE:Ore,recoilValues:Wk,recoilValuesForKeys:Hk}=Vr,{AbstractRecoilValue:Dre,getRecoilValueAsLoadable:Mre,setRecoilValue:Gk,setUnvalidatedRecoilValue:Pre}=To,{updateRetainCount:bm}=Pu,{setInvalidateMemoizedSnapshot:Lre}=YF,{getNextTreeStateVersion:Fre,makeEmptyStoreState:zre}=UF,{isSSR:Bre}=Cy,{memoizeOneWithArgsHashAndInvalidation:jre}=Nre;class Ry{constructor(n,e){Ye(this,"_store",void 0),Ye(this,"_refCount",1),Ye(this,"getLoadable",r=>(this.checkRefCount_INTERNAL(),Mre(this._store,r))),Ye(this,"getPromise",r=>(this.checkRefCount_INTERNAL(),this.getLoadable(r).toPromise())),Ye(this,"getNodes_UNSTABLE",r=>{if(this.checkRefCount_INTERNAL(),(r==null?void 0:r.isModified)===!0){if((r==null?void 0:r.isInitialized)===!1)return[];const a=this._store.getState().currentTree;return Hk(a.dirtyAtoms)}const i=this._store.getState().knownAtoms,o=this._store.getState().knownSelectors;return(r==null?void 0:r.isInitialized)==null?Wk.values():r.isInitialized===!0?Hk(lz([i,o])):x2(Wk.values(),({key:a})=>!i.has(a)&&!o.has(a))}),Ye(this,"getInfo_UNSTABLE",({key:r})=>(this.checkRefCount_INTERNAL(),Ire(this._store,this._store.getState().currentTree,r))),Ye(this,"map",r=>{this.checkRefCount_INTERNAL();const i=new ex(this,Zw);return r(i),i}),Ye(this,"asyncMap",async r=>{this.checkRefCount_INTERNAL();const i=new ex(this,Zw);return i.retain(),await r(i),i.autoRelease_INTERNAL(),i}),this._store={storeID:Are(),parentStoreID:e,getState:()=>n,replaceState:r=>{n.currentTree=r(n.currentTree)},getGraph:r=>{const i=n.graphsByVersion;if(i.has(r))return Qt(i.get(r));const o=_re();return i.set(r,o),o},subscribeToTransactions:()=>({release:()=>{}}),addTransactionMetadata:()=>{throw tt("Cannot subscribe to Snapshots")}};for(const r of this._store.getState().knownAtoms)kre(this._store,r,"get"),bm(this._store,r,1);this.autoRelease_INTERNAL()}retain(){this._refCount<=0,this._refCount++;let n=!1;return()=>{n||(n=!0,this._release())}}autoRelease_INTERNAL(){Bre||window.setTimeout(()=>this._release(),10)}_release(){if(this._refCount--,this._refCount===0){if(this._store.getState().nodeCleanupFunctions.forEach(n=>n()),this._store.getState().nodeCleanupFunctions.clear(),!Mt("recoil_memory_managament_2020"))return}else this._refCount<0}isRetained(){return this._refCount>0}checkRefCount_INTERNAL(){Mt("recoil_memory_managament_2020")&&this._refCount<=0}getStore_INTERNAL(){return this.checkRefCount_INTERNAL(),this._store}getID(){return this.checkRefCount_INTERNAL(),this._store.getState().currentTree.stateID}getStoreID(){return this.checkRefCount_INTERNAL(),this._store.storeID}}function dz(t,n,e=!1){const r=t.getState(),i=e?Fre():n.version;return{currentTree:{version:e?i:n.version,stateID:e?i:n.stateID,transactionMetadata:{...n.transactionMetadata},dirtyAtoms:new Set(n.dirtyAtoms),atomValues:n.atomValues.clone(),nonvalidatedAtoms:n.nonvalidatedAtoms.clone()},commitDepth:0,nextTree:null,previousTree:null,knownAtoms:new Set(r.knownAtoms),knownSelectors:new Set(r.knownSelectors),transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:new Map().set(i,t.getGraph(n.version)),retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map(by(r.nodeCleanupFunctions.entries(),([o])=>[o,()=>{}]))}}function Vre(t){const n=new Ry(zre());return t!=null?n.map(t):n}const[qk,fz]=jre((t,n)=>{var e;const r=t.getState(),i=n==="latest"?(e=r.nextTree)!==null&&e!==void 0?e:r.currentTree:Qt(r.previousTree);return new Ry(dz(t,i),t.storeID)},(t,n)=>{var e,r;return String(n)+String(t.storeID)+String((e=t.getState().nextTree)===null||e===void 0?void 0:e.version)+String(t.getState().currentTree.version)+String((r=t.getState().previousTree)===null||r===void 0?void 0:r.version)});Lre(fz);function $re(t,n="latest"){const e=qk(t,n);return e.isRetained()?e:(fz(),qk(t,n))}class ex extends Ry{constructor(n,e){super(dz(n.getStore_INTERNAL(),n.getStore_INTERNAL().getState().currentTree,!0),n.getStoreID()),Ye(this,"_batch",void 0),Ye(this,"set",(r,i)=>{this.checkRefCount_INTERNAL();const o=this.getStore_INTERNAL();this._batch(()=>{bm(o,r.key,1),Gk(this.getStore_INTERNAL(),r,i)})}),Ye(this,"reset",r=>{this.checkRefCount_INTERNAL();const i=this.getStore_INTERNAL();this._batch(()=>{bm(i,r.key,1),Gk(this.getStore_INTERNAL(),r,Ore)})}),Ye(this,"setUnvalidatedAtomValues_DEPRECATED",r=>{this.checkRefCount_INTERNAL();const i=this.getStore_INTERNAL();Zw(()=>{for(const[o,a]of r.entries())bm(i,o,1),Pre(i,new Dre(o),a)})}),this._batch=e}}var Ty={Snapshot:Ry,MutableSnapshot:ex,freshSnapshot:Vre,cloneSnapshot:$re},Ure=Ty.Snapshot,Wre=Ty.MutableSnapshot,Hre=Ty.freshSnapshot,Gre=Ty.cloneSnapshot,Ny=Object.freeze({__proto__:null,Snapshot:Ure,MutableSnapshot:Wre,freshSnapshot:Hre,cloneSnapshot:Gre});function qre(...t){const n=new Set;for(const e of t)for(const r of e)n.add(r);return n}var Kre=qre;const{useRef:Xre}=_e;function Yre(t){const n=Xre(t);return n.current===t&&typeof t=="function"&&(n.current=t()),n}var Kk=Yre;const{getNextTreeStateVersion:Jre,makeEmptyStoreState:pz}=UF,{cleanUpNode:Qre,getDownstreamNodes:Zre,initializeNode:eie,setNodeValue:tie,setUnvalidatedAtomValue_DEPRECATED:nie}=Ss,{graph:rie}=_p,{cloneGraph:iie}=_p,{getNextStoreID:hz}=wy,{createMutableSource:R1,reactMode:mz}=Ip,{applyAtomValueWrites:oie}=To,{releaseScheduledRetainablesNow:vz}=Pu,{freshSnapshot:aie}=Ny,{useCallback:sie,useContext:gz,useEffect:tx,useMemo:uie,useRef:lie,useState:cie}=_e;function fd(){throw tt("This component must be used inside a <RecoilRoot> component.")}const yz=Object.freeze({storeID:hz(),getState:fd,replaceState:fd,getGraph:fd,subscribeToTransactions:fd,addTransactionMetadata:fd});let nx=!1;function Xk(t){if(nx)throw tt("An atom update was triggered within the execution of a state updater function. State updater functions provided to Recoil must be pure functions.");const n=t.getState();if(n.nextTree===null){Mt("recoil_memory_managament_2020")&&Mt("recoil_release_on_cascading_update_killswitch_2021")&&n.commitDepth>0&&vz(t);const e=n.currentTree.version,r=Jre();n.nextTree={...n.currentTree,version:r,stateID:r,dirtyAtoms:new Set,transactionMetadata:{}},n.graphsByVersion.set(r,iie(Qt(n.graphsByVersion.get(e))))}}const bz=_e.createContext({current:yz}),ky=()=>gz(bz),wz=_e.createContext(null);function die(){return gz(wz)}function R2(t,n,e){const r=Zre(t,e,e.dirtyAtoms);for(const i of r){const o=n.nodeToComponentSubscriptions.get(i);if(o)for(const[a,[s,u]]of o)u(e)}}function xz(t){const n=t.getState(),e=n.currentTree,r=e.dirtyAtoms;if(r.size){for(const[i,o]of n.nodeTransactionSubscriptions)if(r.has(i))for(const[a,s]of o)s(t);for(const[i,o]of n.transactionSubscriptions)o(t);(!mz().early||n.suspendedComponentResolvers.size>0)&&(R2(t,n,e),n.suspendedComponentResolvers.forEach(i=>i()),n.suspendedComponentResolvers.clear())}n.queuedComponentCallbacks_DEPRECATED.forEach(i=>i(e)),n.queuedComponentCallbacks_DEPRECATED.splice(0,n.queuedComponentCallbacks_DEPRECATED.length)}function fie(t){const n=t.getState();n.commitDepth++;try{const{nextTree:e}=n;if(e==null)return;n.previousTree=n.currentTree,n.currentTree=e,n.nextTree=null,xz(t),n.previousTree!=null?n.graphsByVersion.delete(n.previousTree.version):v2("Ended batch with no previous state, which is unexpected","recoil"),n.previousTree=null,Mt("recoil_memory_managament_2020")&&e==null&&vz(t)}finally{n.commitDepth--}}function pie({setNotifyBatcherOfChange:t}){const n=ky(),[,e]=cie([]);return t(()=>e({})),tx(()=>(t(()=>e({})),()=>{t(()=>{})}),[t]),tx(()=>{Hte.enqueueExecution("Batcher",()=>{fie(n.current)})}),null}function hie(t,n){const e=pz();return n({set:(r,i)=>{const o=e.currentTree,a=tie(t,o,r.key,i),s=new Set(a.keys()),u=o.nonvalidatedAtoms.clone();for(const l of s)u.delete(l);e.currentTree={...o,dirtyAtoms:Kre(o.dirtyAtoms,s),atomValues:oie(o.atomValues,a),nonvalidatedAtoms:u}},setUnvalidatedAtomValues:r=>{r.forEach((i,o)=>{e.currentTree=nie(e.currentTree,o,i)})}}),e}function mie(t){const n=aie(t),e=n.getStore_INTERNAL().getState();return n.retain(),e.nodeCleanupFunctions.forEach(r=>r()),e.nodeCleanupFunctions.clear(),e}let Yk=0;function vie({initializeState_DEPRECATED:t,initializeState:n,store_INTERNAL:e,children:r}){let i;const o=p=>{const h=i.current.graphsByVersion;if(h.has(p))return Qt(h.get(p));const v=rie();return h.set(p,v),v},a=(p,h)=>{if(h==null){const{transactionSubscriptions:v}=d.current.getState(),g=Yk++;return v.set(g,p),{release:()=>{v.delete(g)}}}else{const{nodeTransactionSubscriptions:v}=d.current.getState();v.has(h)||v.set(h,new Map);const g=Yk++;return Qt(v.get(h)).set(g,p),{release:()=>{const m=v.get(h);m&&(m.delete(g),m.size===0&&v.delete(h))}}}},s=p=>{Xk(d.current);for(const h of Object.keys(p))Qt(d.current.getState().nextTree).transactionMetadata[h]=p[h]},u=p=>{Xk(d.current);const h=Qt(i.current.nextTree);let v;try{nx=!0,v=p(h)}finally{nx=!1}v!==h&&(i.current.nextTree=v,mz().early&&R2(d.current,i.current,v),Qt(l.current)())},l=lie(null),c=sie(p=>{l.current=p},[l]),d=Kk(()=>e??{storeID:hz(),getState:()=>i.current,replaceState:u,getGraph:o,subscribeToTransactions:a,addTransactionMetadata:s});e!=null&&(d.current=e),i=Kk(()=>t!=null?hie(d.current,t):n!=null?mie(n):pz());const f=uie(()=>R1==null?void 0:R1(i,()=>i.current.currentTree.version),[i]);return tx(()=>{const p=d.current;for(const h of new Set(p.getState().knownAtoms))eie(p,h,"get");return()=>{for(const h of p.getState().knownAtoms)Qre(p,h)}},[d]),_e.createElement(bz.Provider,{value:d},_e.createElement(wz.Provider,{value:f},_e.createElement(pie,{setNotifyBatcherOfChange:c}),r))}function gie(t){const{override:n,...e}=t,r=ky();return n===!1&&r.current!==yz?t.children:_e.createElement(vie,e)}function yie(){return ky().current.storeID}var pa={RecoilRoot:gie,useStoreRef:ky,useRecoilMutableSource:die,useRecoilStoreID:yie,notifyComponents_FOR_TESTING:R2,sendEndOfBatchNotifications_FOR_TESTING:xz};function bie(t,n){if(t===n)return!0;if(t.length!==n.length)return!1;for(let e=0,r=t.length;e<r;e++)if(t[e]!==n[e])return!1;return!0}var wie=bie;const{useEffect:xie,useRef:Sie}=_e;function Eie(t){const n=Sie();return xie(()=>{n.current=t}),n.current}var Sz=Eie;const{useStoreRef:Cie}=pa,{SUSPENSE_TIMEOUT_MS:Rie}=Pu,{updateRetainCount:pd}=Pu,{RetentionZone:Tie}=xy,{useEffect:Nie,useRef:kie}=_e,{isSSR:Jk}=Cy;function Iie(t){if(Mt("recoil_memory_managament_2020"))return _ie(t)}function _ie(t){const e=(Array.isArray(t)?t:[t]).map(a=>a instanceof Tie?a:a.key),r=Cie();Nie(()=>{if(!Mt("recoil_memory_managament_2020"))return;const a=r.current;if(i.current&&!Jk)window.clearTimeout(i.current),i.current=null;else for(const s of e)pd(a,s,1);return()=>{for(const s of e)pd(a,s,-1)}},[r,...e]);const i=kie(),o=Sz(e);if(!Jk&&(o===void 0||!wie(o,e))){const a=r.current;for(const s of e)pd(a,s,1);if(o)for(const s of o)pd(a,s,-1);i.current&&window.clearTimeout(i.current),i.current=window.setTimeout(()=>{i.current=null;for(const s of e)pd(a,s,-1)},Rie)}}var T2=Iie;function Aie(){return"<component name not available>"}var Op=Aie;const{batchUpdates:Oie}=Ey,{DEFAULT_VALUE:Ez}=Vr,{currentRendererSupportsUseSyncExternalStore:Die,reactMode:Lc,useMutableSource:Mie,useSyncExternalStore:Pie}=Ip,{useRecoilMutableSource:Lie,useStoreRef:No}=pa,{AbstractRecoilValue:rx,getRecoilValueAsLoadable:Dp,setRecoilValue:_v,setUnvalidatedRecoilValue:Fie,subscribeToRecoilValue:hc}=To,{useCallback:Pr,useEffect:mc,useMemo:Cz,useRef:nf,useState:N2}=_e,{setByAddingToSet:zie}=HF,{isSSR:Bie}=Cy;function k2(t,n,e){if(t.state==="hasValue")return t.contents;throw t.state==="loading"?new Promise(i=>{const o=e.current.getState().suspendedComponentResolvers;o.add(i),Bie&&Ut(t.contents)&&t.contents.finally(()=>{o.delete(i)})}):t.state==="hasError"?t.contents:tt(`Invalid value of loadable atom "${n.key}"`)}function jie(){const t=Op(),n=No(),[,e]=N2([]),r=nf(new Set);r.current=new Set;const i=nf(new Set),o=nf(new Map),a=Pr(u=>{const l=o.current.get(u);l&&(l.release(),o.current.delete(u))},[o]),s=Pr((u,l)=>{o.current.has(l)&&e([])},[]);return mc(()=>{const u=n.current;ef(r.current,i.current).forEach(l=>{if(o.current.has(l))return;const c=hc(u,new rx(l),f=>s(f,l),t);o.current.set(l,c),u.getState().nextTree?u.getState().queuedComponentCallbacks_DEPRECATED.push(()=>{s(u.getState(),l)}):s(u.getState(),l)}),ef(i.current,r.current).forEach(l=>{a(l)}),i.current=r.current}),mc(()=>{const u=o.current;return ef(r.current,new Set(u.keys())).forEach(l=>{const c=hc(n.current,new rx(l),d=>s(d,l),t);u.set(l,c)}),()=>u.forEach((l,c)=>a(c))},[t,n,a,s]),Cz(()=>{function u(h){return v=>{_v(n.current,h,v)}}function l(h){return()=>_v(n.current,h,Ez)}function c(h){var v;r.current.has(h.key)||(r.current=zie(r.current,h.key));const g=n.current.getState();return Dp(n.current,h,Lc().early&&(v=g.nextTree)!==null&&v!==void 0?v:g.currentTree)}function d(h){const v=c(h);return k2(v,h,n)}function f(h){return[d(h),u(h)]}function p(h){return[c(h),u(h)]}return{getRecoilValue:d,getRecoilValueLoadable:c,getRecoilState:f,getRecoilStateLoadable:p,getSetRecoilState:u,getResetRecoilState:l}},[r,n])}const Vie={current:0};function $ie(t){const n=No(),e=Op(),r=Pr(()=>{var s;const u=n.current,l=u.getState(),c=Lc().early&&(s=l.nextTree)!==null&&s!==void 0?s:l.currentTree;return{loadable:Dp(u,t,c),key:t.key}},[n,t]),i=Pr(s=>{let u;return()=>{var l,c;const d=s();return(l=u)!==null&&l!==void 0&&l.loadable.is(d.loadable)&&((c=u)===null||c===void 0?void 0:c.key)===d.key?u:(u=d,d)}},[]),o=Cz(()=>i(r),[r,i]),a=Pr(s=>{const u=n.current;return hc(u,t,s,e).release},[n,t,e]);return Pie(a,o,o).loadable}function Uie(t){const n=No(),e=Pr(()=>{var l;const c=n.current,d=c.getState(),f=Lc().early&&(l=d.nextTree)!==null&&l!==void 0?l:d.currentTree;return Dp(c,t,f)},[n,t]),r=Pr(()=>e(),[e]),i=Op(),o=Pr((l,c)=>{const d=n.current;return hc(d,t,()=>{if(!Mt("recoil_suppress_rerender_in_callback"))return c();const p=e();u.current.is(p)||c(),u.current=p},i).release},[n,t,i,e]),a=Lie();if(a==null)throw tt("Recoil hooks must be used in components contained within a <RecoilRoot> component.");const s=Mie(a,r,o),u=nf(s);return mc(()=>{u.current=s}),s}function ix(t){const n=No(),e=Op(),r=Pr(()=>{var u;const l=n.current,c=l.getState(),d=Lc().early&&(u=c.nextTree)!==null&&u!==void 0?u:c.currentTree;return Dp(l,t,d)},[n,t]),i=Pr(()=>({loadable:r(),key:t.key}),[r,t.key]),o=Pr(u=>{const l=i();return u.loadable.is(l.loadable)&&u.key===l.key?u:l},[i]);mc(()=>{const u=hc(n.current,t,l=>{s(o)},e);return s(o),u.release},[e,t,n,o]);const[a,s]=N2(i);return a.key!==t.key?i().loadable:a.loadable}function Wie(t){const n=No(),[,e]=N2([]),r=Op(),i=Pr(()=>{var s;const u=n.current,l=u.getState(),c=Lc().early&&(s=l.nextTree)!==null&&s!==void 0?s:l.currentTree;return Dp(u,t,c)},[n,t]),o=i(),a=nf(o);return mc(()=>{a.current=o}),mc(()=>{const s=n.current,u=s.getState(),l=hc(s,t,d=>{var f;if(!Mt("recoil_suppress_rerender_in_callback"))return e([]);const p=i();(f=a.current)!==null&&f!==void 0&&f.is(p)||e(p),a.current=p},r);if(u.nextTree)s.getState().queuedComponentCallbacks_DEPRECATED.push(()=>{a.current=null,e([])});else{var c;if(!Mt("recoil_suppress_rerender_in_callback"))return e([]);const d=i();(c=a.current)!==null&&c!==void 0&&c.is(d)||e(d),a.current=d}return l.release},[r,i,t,n]),o}function I2(t){return Mt("recoil_memory_managament_2020")&&T2(t),{TRANSITION_SUPPORT:ix,SYNC_EXTERNAL_STORE:Die()?$ie:ix,MUTABLE_SOURCE:Uie,LEGACY:Wie}[Lc().mode](t)}function Rz(t){const n=No(),e=I2(t);return k2(e,t,n)}function Iy(t){const n=No();return Pr(e=>{_v(n.current,t,e)},[n,t])}function Hie(t){const n=No();return Pr(()=>{_v(n.current,t,Ez)},[n,t])}function Gie(t){return[Rz(t),Iy(t)]}function qie(t){return[I2(t),Iy(t)]}function Kie(){const t=No();return(n,e={})=>{Oie(()=>{t.current.addTransactionMetadata(e),n.forEach((r,i)=>Fie(t.current,new rx(i),r))})}}function Tz(t){return Mt("recoil_memory_managament_2020")&&T2(t),ix(t)}function Nz(t){const n=No(),e=Tz(t);return k2(e,t,n)}function Xie(t){return[Nz(t),Iy(t)]}var Yie={recoilComponentGetRecoilValueCount_FOR_TESTING:Vie,useRecoilInterface:jie,useRecoilState:Gie,useRecoilStateLoadable:qie,useRecoilValue:Rz,useRecoilValueLoadable:I2,useResetRecoilState:Hie,useSetRecoilState:Iy,useSetUnvalidatedAtomValues:Kie,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:Tz,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:Nz,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:Xie};function Jie(t,n){const e=new Map;for(const[r,i]of t)n(i,r)&&e.set(r,i);return e}var Qie=Jie;function Zie(t,n){const e=new Set;for(const r of t)n(r)&&e.add(r);return e}var eoe=Zie;function toe(...t){const n=new Map;for(let e=0;e<t.length;e++){const r=t[e].keys();let i;for(;!(i=r.next()).done;)n.set(i.value,t[e].get(i.value))}return n}var noe=toe;const{batchUpdates:roe}=Ey,{DEFAULT_VALUE:ioe,getNode:kz,nodes:ooe}=Vr,{useStoreRef:_2}=pa,{AbstractRecoilValue:aoe,setRecoilValueLoadable:soe}=To,{SUSPENSE_TIMEOUT_MS:uoe}=Pu,{cloneSnapshot:Av}=Ny,{useCallback:_y,useEffect:Iz,useRef:Qk,useState:loe}=_e,{isSSR:Zk}=Cy;function Ay(t){const n=_2();Iz(()=>n.current.subscribeToTransactions(t).release,[t,n])}function eI(t){const n=t.atomValues.toMap(),e=Iv(Qie(n,(r,i)=>{const a=kz(i).persistence_UNSTABLE;return a!=null&&a.type!=="none"&&r.state==="hasValue"}),r=>r.contents);return noe(t.nonvalidatedAtoms.toMap(),e)}function coe(t){Ay(_y(n=>{let e=n.getState().previousTree;const r=n.getState().currentTree;e||(e=n.getState().currentTree);const i=eI(r),o=eI(e),a=Iv(ooe,u=>{var l,c,d,f;return{persistence_UNSTABLE:{type:(l=(c=u.persistence_UNSTABLE)===null||c===void 0?void 0:c.type)!==null&&l!==void 0?l:"none",backButton:(d=(f=u.persistence_UNSTABLE)===null||f===void 0?void 0:f.backButton)!==null&&d!==void 0?d:!1}}}),s=eoe(r.dirtyAtoms,u=>i.has(u)||o.has(u));t({atomValues:i,previousAtomValues:o,atomInfo:a,modifiedAtoms:s,transactionMetadata:{...r.transactionMetadata}})},[t]))}function doe(t){Ay(_y(n=>{const e=Av(n,"latest"),r=Av(n,"previous");t({snapshot:e,previousSnapshot:r})},[t]))}function foe(){const t=_2(),[n,e]=loe(()=>Av(t.current)),r=Sz(n),i=Qk(),o=Qk();if(Ay(_y(s=>e(Av(s)),[])),Iz(()=>{const s=n.retain();if(i.current&&!Zk){var u;window.clearTimeout(i.current),i.current=null,(u=o.current)===null||u===void 0||u.call(o),o.current=null}return()=>{window.setTimeout(s,10)}},[n]),r!==n&&!Zk){if(i.current){var a;window.clearTimeout(i.current),i.current=null,(a=o.current)===null||a===void 0||a.call(o),o.current=null}o.current=n.retain(),i.current=window.setTimeout(()=>{var s;i.current=null,(s=o.current)===null||s===void 0||s.call(o),o.current=null},uoe)}return n}function _z(t,n){var e;const r=t.getState(),i=(e=r.nextTree)!==null&&e!==void 0?e:r.currentTree,o=n.getStore_INTERNAL().getState().currentTree;roe(()=>{const a=new Set;for(const l of[i.atomValues.keys(),o.atomValues.keys()])for(const c of l){var s,u;((s=i.atomValues.get(c))===null||s===void 0?void 0:s.contents)!==((u=o.atomValues.get(c))===null||u===void 0?void 0:u.contents)&&kz(c).shouldRestoreFromSnapshots&&a.add(c)}a.forEach(l=>{soe(t,new aoe(l),o.atomValues.has(l)?Qt(o.atomValues.get(l)):ioe)}),t.replaceState(l=>({...l,stateID:n.getID()}))})}function poe(){const t=_2();return _y(n=>_z(t.current,n),[t])}var Az={useRecoilSnapshot:foe,gotoSnapshot:_z,useGotoRecoilSnapshot:poe,useRecoilTransactionObserver:doe,useTransactionObservation_DEPRECATED:coe,useTransactionSubscription_DEPRECATED:Ay};const{peekNodeInfo:hoe}=Ss,{useStoreRef:moe}=pa;function voe(){const t=moe();return({key:n})=>hoe(t.current,t.current.getState().currentTree,n)}var goe=voe;const{reactMode:yoe}=Ip,{RecoilRoot:boe,useStoreRef:woe}=pa,{useMemo:xoe}=_e;function Soe(){yoe().mode==="MUTABLE_SOURCE"&&console.warn("Warning: There are known issues using useRecoilBridgeAcrossReactRoots() in recoil_mutable_source rendering mode.  Please consider upgrading to recoil_sync_external_store mode.");const t=woe().current;return xoe(()=>{function n({children:e}){return _e.createElement(boe,{store_INTERNAL:t},e)}return n},[t])}var Eoe=Soe;const{loadableWithValue:Coe}=kp,{initializeNode:Roe}=Ss,{DEFAULT_VALUE:Toe,getNode:Noe}=Vr,{copyTreeState:koe,getRecoilValueAsLoadable:Ioe,invalidateDownstreams:_oe,writeLoadableToTreeState:Aoe}=To;function tI(t){return Noe(t.key).nodeType==="atom"}class Ooe{constructor(n,e){Ye(this,"_store",void 0),Ye(this,"_treeState",void 0),Ye(this,"_changes",void 0),Ye(this,"get",r=>{if(this._changes.has(r.key))return this._changes.get(r.key);if(!tI(r))throw tt("Reading selectors within atomicUpdate is not supported");const i=Ioe(this._store,r,this._treeState);if(i.state==="hasValue")return i.contents;throw i.state==="hasError"?i.contents:tt(`Expected Recoil atom ${r.key} to have a value, but it is in a loading state.`)}),Ye(this,"set",(r,i)=>{if(!tI(r))throw tt("Setting selectors within atomicUpdate is not supported");if(typeof i=="function"){const o=this.get(r);this._changes.set(r.key,i(o))}else Roe(this._store,r.key,"set"),this._changes.set(r.key,i)}),Ye(this,"reset",r=>{this.set(r,Toe)}),this._store=n,this._treeState=e,this._changes=new Map}newTreeState_INTERNAL(){if(this._changes.size===0)return this._treeState;const n=koe(this._treeState);for(const[e,r]of this._changes)Aoe(n,e,Coe(r));return _oe(this._store,n),n}}function Doe(t){return n=>{t.replaceState(e=>{const r=new Ooe(t,e);return n(r),r.newTreeState_INTERNAL()})}}var Moe={atomicUpdater:Doe},Poe=Moe.atomicUpdater,Oz=Object.freeze({__proto__:null,atomicUpdater:Poe});function Loe(t,n){if(!t)throw new Error(n)}var Foe=Loe,zd=Foe;const{atomicUpdater:zoe}=Oz,{batchUpdates:Boe}=Ey,{DEFAULT_VALUE:joe}=Vr,{useStoreRef:Voe}=pa,{refreshRecoilValue:$oe,setRecoilValue:nI}=To,{cloneSnapshot:Uoe}=Ny,{gotoSnapshot:Woe}=Az,{useCallback:Hoe}=_e;class Dz{}const Goe=new Dz;function Mz(t,n,e,r){let i=Goe,o;if(Boe(()=>{const s="useRecoilCallback() expects a function that returns a function: it accepts a function of the type (RecoilInterface) => (Args) => ReturnType and returns a callback function (Args) => ReturnType, where RecoilInterface is an object {snapshot, set, ...} and Args and ReturnType are the argument and return types of the callback you want to create.  Please see the docs at recoiljs.org for details.";if(typeof n!="function")throw tt(s);const u=GF({...r??{},set:(c,d)=>nI(t,c,d),reset:c=>nI(t,c,joe),refresh:c=>$oe(t,c),gotoSnapshot:c=>Woe(t,c),transact_UNSTABLE:c=>zoe(t)(c)},{snapshot:()=>{const c=Uoe(t);return o=c.retain(),c}}),l=n(u);if(typeof l!="function")throw tt(s);i=l(...e)}),i instanceof Dz&&zd(!1),Ut(i))i=i.finally(()=>{var s;(s=o)===null||s===void 0||s()});else{var a;(a=o)===null||a===void 0||a()}return i}function qoe(t,n){const e=Voe();return Hoe((...r)=>Mz(e.current,t,r),n!=null?[...n,e]:void 0)}var Pz={recoilCallback:Mz,useRecoilCallback:qoe};const{useStoreRef:Koe}=pa,{refreshRecoilValue:Xoe}=To,{useCallback:Yoe}=_e;function Joe(t){const n=Koe();return Yoe(()=>{const e=n.current;Xoe(e,t)},[t,n])}var Qoe=Joe;const{atomicUpdater:Zoe}=Oz,{useStoreRef:eae}=pa,{useMemo:tae}=_e;function nae(t,n){const e=eae();return tae(()=>(...r)=>{Zoe(e.current)(o=>{t(o)(...r)})},n!=null?[...n,e]:void 0)}var rae=nae;class iae{constructor(n){Ye(this,"value",void 0),this.value=n}}var oae={WrappedValue:iae},aae=oae.WrappedValue,Lz=Object.freeze({__proto__:null,WrappedValue:aae});const{isFastRefreshEnabled:sae}=Ip;class rI extends Error{}class uae{constructor(n){var e,r,i;Ye(this,"_name",void 0),Ye(this,"_numLeafs",void 0),Ye(this,"_root",void 0),Ye(this,"_onHit",void 0),Ye(this,"_onSet",void 0),Ye(this,"_mapNodeValue",void 0),this._name=n==null?void 0:n.name,this._numLeafs=0,this._root=null,this._onHit=(e=n==null?void 0:n.onHit)!==null&&e!==void 0?e:()=>{},this._onSet=(r=n==null?void 0:n.onSet)!==null&&r!==void 0?r:()=>{},this._mapNodeValue=(i=n==null?void 0:n.mapNodeValue)!==null&&i!==void 0?i:o=>o}size(){return this._numLeafs}root(){return this._root}get(n,e){var r;return(r=this.getLeafNode(n,e))===null||r===void 0?void 0:r.value}getLeafNode(n,e){if(this._root==null)return;let r=this._root;for(;r;){if(e==null||e.onNodeVisit(r),r.type==="leaf")return this._onHit(r),r;const i=this._mapNodeValue(n(r.nodeKey));r=r.branches.get(i)}}set(n,e,r){const i=()=>{var o,a,s,u;let l,c;for(const[g,m]of n){var d,f,p;const y=this._root;if((y==null?void 0:y.type)==="leaf")throw this.invalidCacheError();const b=l;if(l=b?b.branches.get(c):y,l=(d=l)!==null&&d!==void 0?d:{type:"branch",nodeKey:g,parent:b,branches:new Map,branchKey:c},l.type!=="branch"||l.nodeKey!==g)throw this.invalidCacheError();b==null||b.branches.set(c,l),r==null||(f=r.onNodeVisit)===null||f===void 0||f.call(r,l),c=this._mapNodeValue(m),this._root=(p=this._root)!==null&&p!==void 0?p:l}const h=l?(o=l)===null||o===void 0?void 0:o.branches.get(c):this._root;if(h!=null&&(h.type!=="leaf"||h.branchKey!==c))throw this.invalidCacheError();const v={type:"leaf",value:e,parent:l,branchKey:c};(a=l)===null||a===void 0||a.branches.set(c,v),this._root=(s=this._root)!==null&&s!==void 0?s:v,this._numLeafs++,this._onSet(v),r==null||(u=r.onNodeVisit)===null||u===void 0||u.call(r,v)};try{i()}catch(o){if(o instanceof rI)this.clear(),i();else throw o}}delete(n){const e=this.root();if(!e)return!1;if(n===e)return this._root=null,this._numLeafs=0,!0;let r=n.parent,i=n.branchKey;for(;r;){var o;if(r.branches.delete(i),r===e)return r.branches.size===0?(this._root=null,this._numLeafs=0):this._numLeafs--,!0;if(r.branches.size>0)break;i=(o=r)===null||o===void 0?void 0:o.branchKey,r=r.parent}for(;r!==e;r=r.parent)if(r==null)return!1;return this._numLeafs--,!0}clear(){this._numLeafs=0,this._root=null}invalidCacheError(){const n=sae()?"Possible Fast Refresh module reload detected.  This may also be caused by an selector returning inconsistent values. Resetting cache.":"Invalid cache values.  This happens when selectors do not return consistent values for the same input dependency values.  That may also be caused when using Fast Refresh to change a selector implementation.  Resetting cache.";throw v2(n+(this._name!=null?` - ${this._name}`:"")),new rI}}var lae={TreeCache:uae},cae=lae.TreeCache,Fz=Object.freeze({__proto__:null,TreeCache:cae});class dae{constructor(n){var e;Ye(this,"_maxSize",void 0),Ye(this,"_size",void 0),Ye(this,"_head",void 0),Ye(this,"_tail",void 0),Ye(this,"_map",void 0),Ye(this,"_keyMapper",void 0),this._maxSize=n.maxSize,this._size=0,this._head=null,this._tail=null,this._map=new Map,this._keyMapper=(e=n.mapKey)!==null&&e!==void 0?e:r=>r}head(){return this._head}tail(){return this._tail}size(){return this._size}maxSize(){return this._maxSize}has(n){return this._map.has(this._keyMapper(n))}get(n){const e=this._keyMapper(n),r=this._map.get(e);if(r)return this.set(n,r.value),r.value}set(n,e){const r=this._keyMapper(n);this._map.get(r)&&this.delete(n);const o=this.head(),a={key:n,right:o,left:null,value:e};o?o.left=a:this._tail=a,this._map.set(r,a),this._head=a,this._size++,this._maybeDeleteLRU()}_maybeDeleteLRU(){this.size()>this.maxSize()&&this.deleteLru()}deleteLru(){const n=this.tail();n&&this.delete(n.key)}delete(n){const e=this._keyMapper(n);if(!this._size||!this._map.has(e))return;const r=Qt(this._map.get(e)),i=r.right,o=r.left;i&&(i.left=r.left),o&&(o.right=r.right),r===this.head()&&(this._head=i),r===this.tail()&&(this._tail=o),this._map.delete(e),this._size--}clear(){this._size=0,this._head=null,this._tail=null,this._map=new Map}}var fae={LRUCache:dae},pae=fae.LRUCache,zz=Object.freeze({__proto__:null,LRUCache:pae});const{LRUCache:hae}=zz,{TreeCache:mae}=Fz;function vae({name:t,maxSize:n,mapNodeValue:e=r=>r}){const r=new hae({maxSize:n}),i=new mae({name:t,mapNodeValue:e,onHit:o=>{r.set(o,!0)},onSet:o=>{const a=r.tail();r.set(o,!0),a&&i.size()>n&&i.delete(a.key)}});return i}var iI=vae;function Ii(t,n,e){if(typeof t=="string"&&!t.includes('"')&&!t.includes("\\"))return`"${t}"`;switch(typeof t){case"undefined":return"";case"boolean":return t?"true":"false";case"number":case"symbol":return String(t);case"string":return JSON.stringify(t);case"function":if((n==null?void 0:n.allowFunctions)!==!0)throw tt("Attempt to serialize function in a Recoil cache key");return`__FUNCTION(${t.name})__`}if(t===null)return"null";if(typeof t!="object"){var r;return(r=JSON.stringify(t))!==null&&r!==void 0?r:""}if(Ut(t))return"__PROMISE__";if(Array.isArray(t))return`[${t.map((i,o)=>Ii(i,n,o.toString()))}]`;if(typeof t.toJSON=="function")return Ii(t.toJSON(e),n,e);if(t instanceof Map){const i={};for(const[o,a]of t)i[typeof o=="string"?o:Ii(o,n)]=a;return Ii(i,n,e)}return t instanceof Set?Ii(Array.from(t).sort((i,o)=>Ii(i,n).localeCompare(Ii(o,n))),n,e):Symbol!==void 0&&t[Symbol.iterator]!=null&&typeof t[Symbol.iterator]=="function"?Ii(Array.from(t),n,e):`{${Object.keys(t).filter(i=>t[i]!==void 0).sort().map(i=>`${Ii(i,n)}:${Ii(t[i],n,i)}`).join(",")}}`}function gae(t,n={allowFunctions:!1}){return Ii(t,n)}var Oy=gae;const{TreeCache:yae}=Fz,Ah={equality:"reference",eviction:"keep-all",maxSize:1/0};function bae({equality:t=Ah.equality,eviction:n=Ah.eviction,maxSize:e=Ah.maxSize}=Ah,r){const i=wae(t);return xae(n,e,i,r)}function wae(t){switch(t){case"reference":return n=>n;case"value":return n=>Oy(n)}throw tt(`Unrecognized equality policy ${t}`)}function xae(t,n,e,r){switch(t){case"keep-all":return new yae({name:r,mapNodeValue:e});case"lru":return iI({name:r,maxSize:Qt(n),mapNodeValue:e});case"most-recent":return iI({name:r,maxSize:1,mapNodeValue:e})}throw tt(`Unrecognized eviction policy ${t}`)}var Sae=bae;function Eae(t){return()=>null}var Cae={startPerfBlock:Eae};const{isLoadable:Rae,loadableWithError:Oh,loadableWithPromise:Tae,loadableWithValue:T1}=kp,{WrappedValue:Bz}=Lz,{getNodeLoadable:Dh,peekNodeLoadable:Nae,setNodeValue:kae}=Ss,{saveDepsToStore:Iae}=_p,{DEFAULT_VALUE:_ae,getConfigDeletionHandler:Aae,getNode:Oae,registerNode:oI}=Vr,{isRecoilValue:Dae}=pc,{markRecoilValueModified:aI}=To,{retainedByOptionWithDefault:Mae}=Pu,{recoilCallback:Pae}=Pz,{startPerfBlock:Lae}=Cae;class jz{}const hd=new jz,md=[],Mh=new Map,Fae=(()=>{let t=0;return()=>t++})();function Vz(t){let n=null;const{key:e,get:r,cachePolicy_UNSTABLE:i}=t,o=t.set!=null?t.set:void 0,a=new Set,s=Sae(i??{equality:"reference",eviction:"keep-all"},e),u=Mae(t.retainedBy_UNSTABLE),l=new Map;let c=0;function d(){return!Mt("recoil_memory_managament_2020")||c>0}function f(B){return B.getState().knownSelectors.add(e),c++,()=>{c--}}function p(){return Aae(e)!==void 0&&!d()}function h(B,q,G,re,j){A(q,re,j),v(B,G)}function v(B,q){O(B,q)&&R(B),m(q,!0)}function g(B,q){O(B,q)&&(Qt(k(B)).stateVersions.clear(),m(q,!1))}function m(B,q){const G=Mh.get(B);if(G!=null){for(const re of G)aI(re,Qt(n));q&&Mh.delete(B)}}function y(B,q){let G=Mh.get(q);G==null&&Mh.set(q,G=new Set),G.add(B)}function b(B,q,G,re,j,ae){return q.then(te=>{if(!d())throw R(B),hd;const le=T1(te);return h(B,G,j,le,re),te}).catch(te=>{if(!d())throw R(B),hd;if(Ut(te))return w(B,te,G,re,j,ae);const le=Oh(te);throw h(B,G,j,le,re),te})}function w(B,q,G,re,j,ae){return q.then(te=>{if(!d())throw R(B),hd;ae.loadingDepKey!=null&&ae.loadingDepPromise===q?G.atomValues.set(ae.loadingDepKey,T1(te)):B.getState().knownSelectors.forEach(be=>{G.atomValues.delete(be)});const le=E(B,G);if(le&&le.state!=="loading"){if((O(B,j)||k(B)==null)&&v(B,j),le.state==="hasValue")return le.contents;throw le.contents}if(!O(B,j)){const be=N(B,G);if(be!=null)return be.loadingLoadable.contents}const[Ee,se]=C(B,G,j);if(Ee.state!=="loading"&&h(B,G,j,Ee,se),Ee.state==="hasError")throw Ee.contents;return Ee.contents}).catch(te=>{if(te instanceof jz)throw hd;if(!d())throw R(B),hd;const le=Oh(te);throw h(B,G,j,le,re),te})}function x(B,q,G,re){var j,ae,te,le;if(O(B,re)||q.version===((j=B.getState())===null||j===void 0||(ae=j.currentTree)===null||ae===void 0?void 0:ae.version)||q.version===((te=B.getState())===null||te===void 0||(le=te.nextTree)===null||le===void 0?void 0:le.version)){var Ee,se,be;Iae(e,G,B,(Ee=(se=B.getState())===null||se===void 0||(be=se.nextTree)===null||be===void 0?void 0:be.version)!==null&&Ee!==void 0?Ee:B.getState().currentTree.version)}for(const fe of G)a.add(fe)}function C(B,q,G){const re=Lae(e);let j=!0,ae=!0;const te=()=>{re(),ae=!1};let le,Ee=!1,se;const be={loadingDepKey:null,loadingDepPromise:null},fe=new Map;function Z({key:we}){const de=Dh(B,q,we);switch(fe.set(we,de),j||(x(B,q,new Set(fe.keys()),G),g(B,G)),de.state){case"hasValue":return de.contents;case"hasError":throw de.contents;case"loading":throw be.loadingDepKey=we,be.loadingDepPromise=de.contents,de.contents}throw tt("Invalid Loadable state")}const ge=we=>(...de)=>{if(ae)throw tt("Callbacks from getCallback() should only be called asynchronously after the selector is evalutated.  It can be used for selectors to return objects with callbacks that can work with Recoil state without a subscription.");return n==null&&zd(!1),Pae(B,we,de,{node:n})};try{le=r({get:Z,getCallback:ge}),le=Dae(le)?Z(le):le,Rae(le)&&(le.state==="hasError"&&(Ee=!0),le=le.contents),Ut(le)?le=b(B,le,q,fe,G,be).finally(te):te(),le=le instanceof Bz?le.value:le}catch(we){le=we,Ut(le)?le=w(B,le,q,fe,G,be).finally(te):(Ee=!0,te())}return Ee?se=Oh(le):Ut(le)?se=Tae(le):se=T1(le),j=!1,D(B,G,fe),x(B,q,new Set(fe.keys()),G),[se,fe]}function E(B,q){let G=q.atomValues.get(e);if(G!=null)return G;const re=new Set;try{G=s.get(ae=>(typeof ae!="string"&&zd(!1),Dh(B,q,ae).contents),{onNodeVisit:ae=>{ae.type==="branch"&&ae.nodeKey!==e&&re.add(ae.nodeKey)}})}catch(ae){throw tt(`Problem with cache lookup for selector "${e}": ${ae.message}`)}if(G){var j;q.atomValues.set(e,G),x(B,q,re,(j=k(B))===null||j===void 0?void 0:j.executionID)}return G}function S(B,q){const G=E(B,q);if(G!=null)return R(B),G;const re=N(B,q);if(re!=null){var j;return((j=re.loadingLoadable)===null||j===void 0?void 0:j.state)==="loading"&&y(B,re.executionID),re.loadingLoadable}const ae=Fae(),[te,le]=C(B,q,ae);return te.state==="loading"?(M(B,ae,te,le,q),y(B,ae)):(R(B),A(q,te,le)),te}function N(B,q){const G=lz([l.has(B)?[Qt(l.get(B))]:[],by(x2(l,([j])=>j!==B),([,j])=>j)]);function re(j){for(const[ae,te]of j)if(!Dh(B,q,ae).is(te))return!0;return!1}for(const j of G){if(j.stateVersions.get(q.version)||!re(j.depValuesDiscoveredSoFarDuringAsyncWork))return j.stateVersions.set(q.version,!0),j;j.stateVersions.set(q.version,!1)}}function k(B){return l.get(B)}function M(B,q,G,re,j){l.set(B,{depValuesDiscoveredSoFarDuringAsyncWork:re,executionID:q,loadingLoadable:G,stateVersions:new Map([[j.version,!0]])})}function D(B,q,G){if(O(B,q)){const re=k(B);re!=null&&(re.depValuesDiscoveredSoFarDuringAsyncWork=G)}}function R(B){l.delete(B)}function O(B,q){var G;return q===((G=k(B))===null||G===void 0?void 0:G.executionID)}function P(B){return Array.from(B.entries()).map(([q,G])=>[q,G.contents])}function A(B,q,G){B.atomValues.set(e,q);try{s.set(P(G),q)}catch(re){throw tt(`Problem with setting cache for selector "${e}": ${re.message}`)}}function I(B){if(md.includes(e)){const q=`Recoil selector has circular dependencies: ${md.slice(md.indexOf(e)).join(" → ")}`;return Oh(tt(q))}md.push(e);try{return B()}finally{md.pop()}}function _(B,q){const G=q.atomValues.get(e);return G??s.get(re=>{var j;return typeof re!="string"&&zd(!1),(j=Nae(B,q,re))===null||j===void 0?void 0:j.contents})}function F(B,q){return I(()=>S(B,q))}function L(B){B.atomValues.delete(e)}function W(B,q){n==null&&zd(!1);for(const re of a){var G;const j=Oae(re);(G=j.clearCache)===null||G===void 0||G.call(j,B,q)}a.clear(),L(q),s.clear(),aI(B,n)}return o!=null?n=oI({key:e,nodeType:"selector",peek:_,get:F,set:(q,G,re)=>{let j=!1;const ae=new Map;function te({key:be}){if(j)throw tt("Recoil: Async selector sets are not currently supported.");const fe=Dh(q,G,be);if(fe.state==="hasValue")return fe.contents;if(fe.state==="loading"){const Z=`Getting value of asynchronous atom or selector "${be}" in a pending state while setting selector "${e}" is not yet supported.`;throw tt(Z)}else throw fe.contents}function le(be,fe){if(j)throw tt("Recoil: Async selector sets are not currently supported.");const Z=typeof fe=="function"?fe(te(be)):fe;kae(q,G,be.key,Z).forEach((we,de)=>ae.set(de,we))}function Ee(be){le(be,_ae)}const se=o({set:le,get:te,reset:Ee},re);if(se!==void 0)throw Ut(se)?tt("Recoil: Async selector sets are not currently supported."):tt("Recoil: selector set should be a void function.");return j=!0,ae},init:f,invalidate:L,clearCache:W,shouldDeleteConfigOnRelease:p,dangerouslyAllowMutability:t.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:u}):n=oI({key:e,nodeType:"selector",peek:_,get:F,init:f,invalidate:L,clearCache:W,shouldDeleteConfigOnRelease:p,dangerouslyAllowMutability:t.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:u})}Vz.value=t=>new Bz(t);var vc=Vz;const{isLoadable:zae,loadableWithError:N1,loadableWithPromise:k1,loadableWithValue:Yu}=kp,{WrappedValue:$z}=Lz,{peekNodeInfo:Bae}=Ss,{DEFAULT_VALUE:js,DefaultValue:Ta,getConfigDeletionHandler:Uz,registerNode:jae,setConfigDeletionHandler:Vae}=Vr,{isRecoilValue:$ae}=pc,{getRecoilValueAsLoadable:Uae,markRecoilValueModified:Wae,setRecoilValue:sI,setRecoilValueLoadable:Hae}=To,{retainedByOptionWithDefault:Gae}=Pu,vd=t=>t instanceof $z?t.value:t;function qae(t){const{key:n,persistence_UNSTABLE:e}=t,r=Gae(t.retainedBy_UNSTABLE);let i=0;function o(y){return k1(y.then(b=>(a=Yu(b),b)).catch(b=>{throw a=N1(b),b}))}let a=Ut(t.default)?o(t.default):zae(t.default)?t.default.state==="loading"?o(t.default.contents):t.default:Yu(vd(t.default));a.contents;let s;const u=new Map;function l(y){return y}function c(y,b){const w=b.then(x=>{var C,E;return((E=((C=y.getState().nextTree)!==null&&C!==void 0?C:y.getState().currentTree).atomValues.get(n))===null||E===void 0?void 0:E.contents)===w&&sI(y,m,x),x}).catch(x=>{var C,E;throw((E=((C=y.getState().nextTree)!==null&&C!==void 0?C:y.getState().currentTree).atomValues.get(n))===null||E===void 0?void 0:E.contents)===w&&Hae(y,m,N1(x)),x});return w}function d(y,b,w){var x;i++;const C=()=>{var k;i--,(k=u.get(y))===null||k===void 0||k.forEach(M=>M()),u.delete(y)};if(y.getState().knownAtoms.add(n),a.state==="loading"){const k=()=>{var M;((M=y.getState().nextTree)!==null&&M!==void 0?M:y.getState().currentTree).atomValues.has(n)||Wae(y,m)};a.contents.finally(k)}const E=(x=t.effects)!==null&&x!==void 0?x:t.effects_UNSTABLE;if(E!=null){let k=function(L){if(O&&L.key===n){const W=R;return W instanceof Ta?f(y,b):Ut(W)?k1(W.then(B=>B instanceof Ta?a.toPromise():B)):Yu(W)}return Uae(y,L)},M=function(L){return k(L).toPromise()},D=function(L){var W;const B=Bae(y,(W=y.getState().nextTree)!==null&&W!==void 0?W:y.getState().currentTree,L.key);return O&&L.key===n&&!(R instanceof Ta)?{...B,isSet:!0,loadable:k(L)}:B},R=js,O=!0,P=!1,A=null;const I=L=>W=>{if(O){const B=k(m),q=B.state==="hasValue"?B.contents:js;R=typeof W=="function"?W(q):W,Ut(R)&&(R=R.then(G=>(A={effect:L,value:G},G)))}else{if(Ut(W))throw tt("Setting atoms to async values is not implemented.");typeof W!="function"&&(A={effect:L,value:vd(W)}),sI(y,m,typeof W=="function"?B=>{const q=vd(W(B));return A={effect:L,value:q},q}:vd(W))}},_=L=>()=>I(L)(js),F=L=>W=>{var B;const{release:q}=y.subscribeToTransactions(G=>{var re;let{currentTree:j,previousTree:ae}=G.getState();ae||(ae=j);const te=(re=j.atomValues.get(n))!==null&&re!==void 0?re:a;if(te.state==="hasValue"){var le,Ee,se,be;const fe=te.contents,Z=(le=ae.atomValues.get(n))!==null&&le!==void 0?le:a,ge=Z.state==="hasValue"?Z.contents:js;((Ee=A)===null||Ee===void 0?void 0:Ee.effect)!==L||((se=A)===null||se===void 0?void 0:se.value)!==fe?W(fe,ge,!j.atomValues.has(n)):((be=A)===null||be===void 0?void 0:be.effect)===L&&(A=null)}},n);u.set(y,[...(B=u.get(y))!==null&&B!==void 0?B:[],q])};for(const L of E)try{const W=L({node:m,storeID:y.storeID,parentStoreID_UNSTABLE:y.parentStoreID,trigger:w,setSelf:I(L),resetSelf:_(L),onSet:F(L),getPromise:M,getLoadable:k,getInfo_UNSTABLE:D});if(W!=null){var S;u.set(y,[...(S=u.get(y))!==null&&S!==void 0?S:[],W])}}catch(W){R=W,P=!0}if(O=!1,!(R instanceof Ta)){var N;const L=P?N1(R):Ut(R)?k1(c(y,R)):Yu(vd(R));L.contents,b.atomValues.set(n,L),(N=y.getState().nextTree)===null||N===void 0||N.atomValues.set(n,L)}}return C}function f(y,b){var w,x;return(w=(x=b.atomValues.get(n))!==null&&x!==void 0?x:s)!==null&&w!==void 0?w:a}function p(y,b){if(b.atomValues.has(n))return Qt(b.atomValues.get(n));if(b.nonvalidatedAtoms.has(n)){if(s!=null)return s;if(e==null)return a;const w=b.nonvalidatedAtoms.get(n),x=e.validator(w,js);return s=x instanceof Ta?a:Yu(x),s}else return a}function h(){s=void 0}function v(y,b,w){if(b.atomValues.has(n)){const x=Qt(b.atomValues.get(n));if(x.state==="hasValue"&&w===x.contents)return new Map}else if(!b.nonvalidatedAtoms.has(n)&&w instanceof Ta)return new Map;return s=void 0,new Map().set(n,Yu(w))}function g(){return Uz(n)!==void 0&&i<=0}const m=jae({key:n,nodeType:"atom",peek:f,get:p,set:v,init:d,invalidate:h,shouldDeleteConfigOnRelease:g,dangerouslyAllowMutability:t.dangerouslyAllowMutability,persistence_UNSTABLE:t.persistence_UNSTABLE?{type:t.persistence_UNSTABLE.type,backButton:t.persistence_UNSTABLE.backButton}:void 0,shouldRestoreFromSnapshots:!0,retainedBy:r});return m}function A2(t){const{...n}=t,e="default"in t?t.default:new Promise(()=>{});return $ae(e)?Kae({...n,default:e}):qae({...n,default:e})}function Kae(t){const n=A2({...t,default:js,persistence_UNSTABLE:t.persistence_UNSTABLE===void 0?void 0:{...t.persistence_UNSTABLE,validator:r=>r instanceof Ta?r:Qt(t.persistence_UNSTABLE).validator(r,js)},effects:t.effects,effects_UNSTABLE:t.effects_UNSTABLE}),e=vc({key:`${t.key}__withFallback`,get:({get:r})=>{const i=r(n);return i instanceof Ta?t.default:i},set:({set:r},i)=>r(n,i),cachePolicy_UNSTABLE:{eviction:"most-recent"},dangerouslyAllowMutability:t.dangerouslyAllowMutability});return Vae(e.key,Uz(t.key)),e}A2.value=t=>new $z(t);var Wz=A2;class Xae{constructor(n){var e;Ye(this,"_map",void 0),Ye(this,"_keyMapper",void 0),this._map=new Map,this._keyMapper=(e=n==null?void 0:n.mapKey)!==null&&e!==void 0?e:r=>r}size(){return this._map.size}has(n){return this._map.has(this._keyMapper(n))}get(n){return this._map.get(this._keyMapper(n))}set(n,e){this._map.set(this._keyMapper(n),e)}delete(n){this._map.delete(this._keyMapper(n))}clear(){this._map.clear()}}var Yae={MapCache:Xae},Jae=Yae.MapCache,Qae=Object.freeze({__proto__:null,MapCache:Jae});const{LRUCache:uI}=zz,{MapCache:Zae}=Qae,Ph={equality:"reference",eviction:"none",maxSize:1/0};function ese({equality:t=Ph.equality,eviction:n=Ph.eviction,maxSize:e=Ph.maxSize}=Ph){const r=tse(t);return nse(n,e,r)}function tse(t){switch(t){case"reference":return n=>n;case"value":return n=>Oy(n)}throw tt(`Unrecognized equality policy ${t}`)}function nse(t,n,e){switch(t){case"keep-all":return new Zae({mapKey:e});case"lru":return new uI({mapKey:e,maxSize:Qt(n)});case"most-recent":return new uI({mapKey:e,maxSize:1})}throw tt(`Unrecognized eviction policy ${t}`)}var Hz=ese;const{setConfigDeletionHandler:rse}=Vr;function ise(t){var n,e;const r=Hz({equality:(n=(e=t.cachePolicyForParams_UNSTABLE)===null||e===void 0?void 0:e.equality)!==null&&n!==void 0?n:"value",eviction:"keep-all"});return i=>{var o,a;const s=r.get(i);if(s!=null)return s;const{cachePolicyForParams_UNSTABLE:u,...l}=t,c="default"in t?t.default:new Promise(()=>{}),d=Wz({...l,key:`${t.key}__${(o=Oy(i))!==null&&o!==void 0?o:"void"}`,default:typeof c=="function"?c(i):c,retainedBy_UNSTABLE:typeof t.retainedBy_UNSTABLE=="function"?t.retainedBy_UNSTABLE(i):t.retainedBy_UNSTABLE,effects:typeof t.effects=="function"?t.effects(i):typeof t.effects_UNSTABLE=="function"?t.effects_UNSTABLE(i):(a=t.effects)!==null&&a!==void 0?a:t.effects_UNSTABLE});return r.set(i,d),rse(d.key,()=>{r.delete(i)}),d}}var ose=ise;const{setConfigDeletionHandler:ase}=Vr;let sse=0;function use(t){var n,e;const r=Hz({equality:(n=(e=t.cachePolicyForParams_UNSTABLE)===null||e===void 0?void 0:e.equality)!==null&&n!==void 0?n:"value",eviction:"keep-all"});return i=>{var o;let a;try{a=r.get(i)}catch(f){throw tt(`Problem with cache lookup for selector ${t.key}: ${f.message}`)}if(a!=null)return a;const s=`${t.key}__selectorFamily/${(o=Oy(i,{allowFunctions:!0}))!==null&&o!==void 0?o:"void"}/${sse++}`,u=f=>t.get(i)(f),l=t.cachePolicy_UNSTABLE,c=typeof t.retainedBy_UNSTABLE=="function"?t.retainedBy_UNSTABLE(i):t.retainedBy_UNSTABLE;let d;if(t.set!=null){const f=t.set;d=vc({key:s,get:u,set:(h,v)=>f(i)(h,v),cachePolicy_UNSTABLE:l,dangerouslyAllowMutability:t.dangerouslyAllowMutability,retainedBy_UNSTABLE:c})}else d=vc({key:s,get:u,cachePolicy_UNSTABLE:l,dangerouslyAllowMutability:t.dangerouslyAllowMutability,retainedBy_UNSTABLE:c});return r.set(i,d),ase(d.key,()=>{r.delete(i)}),d}}var Es=use;const lse=Es({key:"__constant",get:t=>()=>t,cachePolicyForParams_UNSTABLE:{equality:"reference"}});function cse(t){return lse(t)}var dse=cse;const fse=Es({key:"__error",get:t=>()=>{throw tt(t)},cachePolicyForParams_UNSTABLE:{equality:"reference"}});function pse(t){return fse(t)}var hse=pse;function mse(t){return t}var vse=mse;const{loadableWithError:Gz,loadableWithPromise:qz,loadableWithValue:Kz}=kp;function Dy(t,n){const e=Array(n.length).fill(void 0),r=Array(n.length).fill(void 0);for(const[i,o]of n.entries())try{e[i]=t(o)}catch(a){r[i]=a}return[e,r]}function gse(t){return t!=null&&!Ut(t)}function My(t){return Array.isArray(t)?t:Object.getOwnPropertyNames(t).map(n=>t[n])}function ox(t,n){return Array.isArray(t)?n:Object.getOwnPropertyNames(t).reduce((e,r,i)=>({...e,[r]:n[i]}),{})}function Ll(t,n,e){const r=e.map((i,o)=>i==null?Kz(n[o]):Ut(i)?qz(i):Gz(i));return ox(t,r)}function yse(t,n){return n.map((e,r)=>e===void 0?t[r]:e)}const bse=Es({key:"__waitForNone",get:t=>({get:n})=>{const e=My(t),[r,i]=Dy(n,e);return Ll(t,r,i)},dangerouslyAllowMutability:!0}),wse=Es({key:"__waitForAny",get:t=>({get:n})=>{const e=My(t),[r,i]=Dy(n,e);return i.some(o=>!Ut(o))?Ll(t,r,i):new Promise(o=>{for(const[a,s]of i.entries())Ut(s)&&s.then(u=>{r[a]=u,i[a]=void 0,o(Ll(t,r,i))}).catch(u=>{i[a]=u,o(Ll(t,r,i))})})},dangerouslyAllowMutability:!0}),xse=Es({key:"__waitForAll",get:t=>({get:n})=>{const e=My(t),[r,i]=Dy(n,e);if(i.every(a=>a==null))return ox(t,r);const o=i.find(gse);if(o!=null)throw o;return Promise.all(i).then(a=>ox(t,yse(r,a)))},dangerouslyAllowMutability:!0}),Sse=Es({key:"__waitForAllSettled",get:t=>({get:n})=>{const e=My(t),[r,i]=Dy(n,e);return i.every(o=>!Ut(o))?Ll(t,r,i):Promise.all(i.map((o,a)=>Ut(o)?o.then(s=>{r[a]=s,i[a]=void 0}).catch(s=>{r[a]=void 0,i[a]=s}):null)).then(()=>Ll(t,r,i))},dangerouslyAllowMutability:!0}),Ese=Es({key:"__noWait",get:t=>({get:n})=>{try{return vc.value(Kz(n(t)))}catch(e){return vc.value(Ut(e)?qz(e):Gz(e))}},dangerouslyAllowMutability:!0});var Cse={waitForNone:bse,waitForAny:wse,waitForAll:xse,waitForAllSettled:Sse,noWait:Ese};const{RecoilLoadable:Rse}=kp,{DefaultValue:Tse}=Vr,{RecoilRoot:Nse,useRecoilStoreID:kse}=pa,{isRecoilValue:Ise}=pc,{retentionZone:_se}=xy,{freshSnapshot:Ase}=Ny,{useRecoilState:Ose,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:Dse,useRecoilStateLoadable:Mse,useRecoilValue:Pse,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:Lse,useRecoilValueLoadable:Fse,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:zse,useResetRecoilState:Bse,useSetRecoilState:jse}=Yie,{useGotoRecoilSnapshot:Vse,useRecoilSnapshot:$se,useRecoilTransactionObserver:Use}=Az,{useRecoilCallback:Wse}=Pz,{noWait:Hse,waitForAll:Gse,waitForAllSettled:qse,waitForAny:Kse,waitForNone:Xse}=Cse;var Mp={DefaultValue:Tse,isRecoilValue:Ise,RecoilLoadable:Rse,RecoilEnv:Pc,RecoilRoot:Nse,useRecoilStoreID:kse,useRecoilBridgeAcrossReactRoots_UNSTABLE:Eoe,atom:Wz,selector:vc,atomFamily:ose,selectorFamily:Es,constSelector:dse,errorSelector:hse,readOnlySelector:vse,noWait:Hse,waitForNone:Xse,waitForAny:Kse,waitForAll:Gse,waitForAllSettled:qse,useRecoilValue:Pse,useRecoilValueLoadable:Fse,useRecoilState:Ose,useRecoilStateLoadable:Mse,useSetRecoilState:jse,useResetRecoilState:Bse,useGetRecoilValueInfo_UNSTABLE:goe,useRecoilRefresher_UNSTABLE:Qoe,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:zse,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:Lse,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:Dse,useRecoilCallback:Wse,useRecoilTransaction_UNSTABLE:rae,useGotoRecoilSnapshot:Vse,useRecoilSnapshot:$se,useRecoilTransactionObserver_UNSTABLE:Use,snapshot_UNSTABLE:Ase,useRetain:T2,retentionZone:_se},Yse=Mp.RecoilRoot,Lu=Mp.atom,Xz=Mp.useRecoilValue,za=Mp.useRecoilState,lo=Mp.useSetRecoilState;const Jse=Lu({key:"prevPathAtom",default:""}),O2=Lu({key:"activeMarkerAtom",default:null}),Yz=Lu({key:"searchTermAtom",default:""}),Py=Lu({key:"centerChangeAtom",default:!1}),D2=Lu({key:"filterModeAtom",default:"dist"}),M2=Lu({key:"mapCenterAtom",default:{lat:0,lng:0}}),Ly=Lu({key:"myCenterAtom",default:{center:{lat:0,lng:0},errMsg:null,isLoading:!1}}),Qse=({item:t,idx:n,mapRef:e,getDistance:r,setOpenList:i})=>{const o=Xz(Ly),a=lo(O2),s=lo(Py),u=H.useMemo(()=>r(o.center.lat,o.center.lng,t.latlng.lat,t.latlng.lng),[]),l=()=>{i(!1),a(n);const c=new kakao.maps.LatLng(t.latlng.lat,t.latlng.lng);e.current.setLevel(4),e.current.setCenter(c),s(!1)};return console.log(t),T.jsxs("div",{className:"item",onClick:l,children:[T.jsxs("div",{className:"item-head",children:[T.jsx("div",{className:"fishing-name",children:t.content.name}),T.jsx("div",{className:"fishing-type",children:t.content.type})]}),T.jsxs("div",{className:"item-body",children:[T.jsx("div",{className:"fishing-dist",children:u>=1?`${u.toFixed(1)}km`:`${(u/1e3).toFixed()}`}),T.jsx("div",{className:"fishing-addr",children:t.content.addr})]}),T.jsxs("div",{className:"fishing-exp",children:[t.content.expense,"원"]})]})},Zse=({addData:t,mapRef:n,getDistance:e,openList:r,setOpenList:i})=>{const[o,a]=H.useState(!1),[s,u]=za(D2),l=d=>{a(!1),u(d)},c=H.useMemo(()=>t.toSorted((d,f)=>s==="dist"?d.dist-f.dist:d.content.expense-f.content.expense),[s,t]);return T.jsxs("div",{className:`FishMapFooter ${r&&"expand"}`,children:[r&&T.jsxs(T.Fragment,{children:[T.jsxs("button",{className:"filter",onClick:()=>a(!0),children:[s==="dist"?"거리순":"비용순",T.jsx(IF,{})]}),o&&T.jsxs(T.Fragment,{children:[T.jsx("div",{className:"filterOpen",onClick:()=>a(!1)}),T.jsxs("div",{className:"content",children:[T.jsx("h2",{children:"검색 설정"}),T.jsx("div",{children:T.jsxs("button",{className:`${s==="dist"?"pick":""}`,onClick:()=>l("dist"),children:["거리순"," ",T.jsx("div",{children:s==="dist"&&T.jsx(Yw,{})})]})}),T.jsx("div",{children:T.jsxs("button",{className:`${s==="money"?"pick":""}`,onClick:()=>l("money"),children:["비용순",T.jsx("div",{children:s==="money"&&T.jsx(Yw,{})})]})}),T.jsx("div",{children:T.jsx("button",{className:"cancel",onClick:()=>a(!1),children:"취소"})})]})]}),t.length?c.map((d,f)=>T.jsx(Qse,{item:d,idx:f,mapRef:n,setOpenList:i,getDistance:e},f)):T.jsxs("div",{className:"noneData",children:[T.jsx(d2,{}),T.jsx("div",{children:"조건에 맞는 업체가 없습니다."})]})]}),T.jsx("div",{className:"mode",onClick:()=>i(d=>!d),children:r?T.jsxs(T.Fragment,{children:[T.jsx(kF,{}),T.jsx("div",{children:"지도보기"})]}):T.jsxs(T.Fragment,{children:[T.jsx(NF,{}),T.jsx("div",{children:"목록보기"})]})})]})};var P2={},eue=wt;Object.defineProperty(P2,"__esModule",{value:!0});var Jz=P2.default=void 0,tue=eue(xt()),nue=T;Jz=P2.default=(0,tue.default)((0,nue.jsx)("path",{d:"m17.27 6.73-4.24 10.13-1.32-3.42-.32-.83-.82-.32-3.43-1.33zM21 3 3 10.53v.98l6.84 2.65L12.48 21h.98z"}),"NearMeOutlined");var L2={},rue=wt;Object.defineProperty(L2,"__esModule",{value:!0});var F2=L2.default=void 0,iue=rue(xt()),oue=T;F2=L2.default=(0,iue.default)((0,oue.jsx)("path",{d:"M20 10V8h-4V4h-2v4h-4V4H8v4H4v2h4v4H4v2h4v4h2v-4h4v4h2v-4h4v-2h-4v-4zm-6 4h-4v-4h4z"}),"TagOutlined");var z2={},aue=wt;Object.defineProperty(z2,"__esModule",{value:!0});var B2=z2.default=void 0,sue=aue(xt()),uue=T;B2=z2.default=(0,sue.default)((0,uue.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"CloseOutlined");const lue=({hashTags:t,mapRef:n})=>{const[e,r]=H.useState(!1),[i,o]=za(Yz),a=lo(Py),s=()=>{r(d=>!d),o("")},u=d=>{const f=n.current;f&&(f.setLevel(13),f.setCenter(new kakao.maps.LatLng(36.172823447489336,127.8675122717897)),a(!1))},l=d=>{d.preventDefault(),u()},c=H.useMemo(()=>t.map((d,f)=>T.jsxs("div",{className:"input-container",onClick:u,children:[T.jsx("input",{id:`${d}`,className:"radio-button",type:"radio",name:"radio",checked:i===d.substring(1),value:d.substring(1),onChange:p=>o(p.target.value)}),T.jsx("div",{className:"radio-tile",children:T.jsx("label",{htmlFor:`${d}`,className:"radio-tile-label",children:d})})]},f)),[t,u,i]);return T.jsxs("div",{className:`FishMapHeader ${e&&"expand"}`,children:[T.jsxs("div",{className:`wrapper ${e&&"expand"}`,children:[T.jsx("button",{className:"chmode",onClick:s,children:e?T.jsx(F2,{}):T.jsx(Jz,{})}),T.jsx("form",{onSubmit:l,children:T.jsx("input",{type:"text",placeholder:e?"해시태그 검색":"지역, 장소 검색",value:i,onChange:d=>o(d.target.value)})}),T.jsx("div",{className:"search",onClick:()=>o(""),children:i&&T.jsx(B2,{})})]}),e&&T.jsx("div",{className:"hashTags",children:c})]})},Ys=typeof window<"u"&&typeof document<"u"?H.useLayoutEffect:H.useEffect,$t=(t,n,e)=>{Ys(()=>{if(!t||!e)return;const r=function(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return o===void 0?e(t):e(t,...o)};return kakao.maps.event.addListener(t,n,r),()=>{kakao.maps.event.removeListener(t,n,r)}},[t,n,e])},Qz="__react-kakao-maps-sdk__";let gd=function(t){return t[t.INITIALIZED=0]="INITIALIZED",t[t.LOADING=1]="LOADING",t[t.SUCCESS=2]="SUCCESS",t[t.FAILURE=3]="FAILURE",t}({});const cue=`${Qz}_Loader`,Vt=class Vt{constructor(n){dr(this,"callbacks",[]);dr(this,"done",!1);dr(this,"loading",!1);dr(this,"errors",[]);let{appkey:e,id:r=cue,libraries:i=[],nonce:o,retries:a=3,url:s="//dapi.kakao.com/v2/maps/sdk.js"}=n;if(this.id=r,this.appkey=e,this.libraries=i,this.nonce=o,this.retries=a,this.url=s,Vt.instance&&!Vt.equalOptions(this.options,Vt.instance.options)&&!Vt.equalOptions(this.options,Vt.instance.options))switch(Vt.instance.status){case gd.FAILURE:throw new Error(`Loader must not be called again with different options. 
${JSON.stringify(this.options,null,2)}
!==
${JSON.stringify(Vt.instance.options,null,2)}`);default:Vt.instance.reset(),Vt.instance=this;break}return Vt.instance||(Vt.instance=this),Vt.instance}get options(){return{appkey:this.appkey,id:this.id,libraries:this.libraries,nonce:this.nonce,retries:this.retries,url:this.url}}static addLoadEventLisnter(n){return window.kakao&&window.kakao.maps&&window.kakao.maps.load(n),Vt.loadEventCallback.add(n),n}static removeLoadEventLisnter(n){return Vt.loadEventCallback.delete(n)}load(){return new Promise((n,e)=>{this.loadCallback(r=>{r?e(r):n(window.kakao)})})}get status(){return this.onEvent?gd.FAILURE:this.done?gd.SUCCESS:this.loading?gd.LOADING:gd.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}loadCallback(n){this.callbacks.push(n),this.execute()}resetIfRetryingFailed(){this.failed&&this.reset()}reset(){this.deleteScript(),this.done=!0,this.loading=!1,this.errors=[],this.onEvent=void 0}execute(){if(this.resetIfRetryingFailed(),this.done)this.callback();else{if(window.kakao&&window.kakao.maps){console.warn("Kakao Maps이 이미 외부 요소에 의해 로딩되어 있습니다.설정한 옵션과 일치 하지 않을 수 있으며, 이에 따른 예상치 동작이 발생할 수 있습니다."),window.kakao.maps.load(this.callback);return}this.loading||(this.loading=!0,this.setScript())}}setScript(){document.getElementById(this.id)&&this.callback();const n=this.createUrl(),e=document.createElement("script");e.id=this.id,e.type="text/javascript",e.src=n,e.onerror=this.loadErrorCallback.bind(this),e.onload=this.callback.bind(this),e.defer=!0,e.async=!0,this.nonce&&(e.nonce=this.nonce),document.head.appendChild(e)}loadErrorCallback(n){if(this.errors.push(n),this.errors.length<=this.retries){const e=this.errors.length*2**this.errors.length;console.log(`Failed to load Kakao Maps script, retrying in ${e} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},e)}else this.done=!0,this.loading=!1,this.onEvent=this.errors[this.errors.length-1],this.callbacks.forEach(e=>{e(this.onEvent)}),this.callbacks=[],Vt.loadEventCallback.forEach(e=>{e(this.onEvent)})}createUrl(){let n=this.url;return n+=`?appkey=${this.appkey}`,this.libraries.length&&(n+=`&libraries=${this.libraries.join(",")}`),n+="&autoload=false",n}deleteScript(){const n=document.getElementById(this.id);n&&n.remove()}callback(){kakao.maps.load(()=>{Vt.instance.done=!0,Vt.instance.loading=!1,Vt.instance.callbacks.forEach(n=>{n(Vt.instance.onEvent)}),Vt.instance.callbacks=[],Vt.loadEventCallback.forEach(n=>{n(Vt.instance.onEvent)})})}static equalOptions(n,e){if(n.appkey!==e.appkey||n.id!==e.id||n.libraries.length!==e.libraries.length)return!1;for(let r=0;r<n.libraries.length;++r)if(n.libraries[r]!==e.libraries[r])return!1;return!(n.nonce!==e.nonce||n.retries!==e.retries||n.url!==e.url)}};dr(Vt,"loadEventCallback",new Set);let Ov=Vt;const Tt=function(t,n){for(var e=arguments.length,r=new Array(e>2?e-2:0),i=2;i<e;i++)r[i-2]=arguments[i];Ys(()=>{!t||r.every(o=>typeof o>"u")||t[n].call(t,...r)},[t,n,...r])},Zz=_e.createContext(void 0),due=_e.forwardRef(function(n,e){let{id:r,as:i,children:o,center:a,isPanto:s=!1,padding:u=32,disableDoubleClick:l,disableDoubleClickZoom:c,draggable:d,zoomable:f,keyboardShortcuts:p,level:h,maxLevel:v,minLevel:g,mapTypeId:m,projectionId:y,scrollwheel:b,tileAnimation:w,onBoundsChanged:x,onCenterChanged:C,onClick:E,onDoubleClick:S,onDrag:N,onDragEnd:k,onDragStart:M,onIdle:D,onMaptypeidChanged:R,onMouseMove:O,onRightClick:P,onTileLoaded:A,onZoomChanged:I,onZoomStart:_,onCreate:F,...L}=n;const W=i||"div",[B,q]=H.useState(!1),[G,re]=H.useState(),j=H.useRef(null);return Ys(()=>{const ae=Ov.addLoadEventLisnter(te=>q(!te));return()=>{Ov.removeLoadEventLisnter(ae)}},[]),Ys(()=>{if(!B)return;const ae=j.current;if(!ae)return;const te="lat"in a?new kakao.maps.LatLng(a.lat,a.lng):new kakao.maps.Coords(a.x,a.y),le=new kakao.maps.Map(ae,{center:te,disableDoubleClick:l,disableDoubleClickZoom:c,draggable:d,keyboardShortcuts:p,level:h,mapTypeId:typeof m=="string"?kakao.maps.MapTypeId[m]:m,projectionId:y,scrollwheel:b,tileAnimation:w});return re(le),()=>{ae.innerHTML=""}},[B,l,c,w]),H.useImperativeHandle(e,()=>G,[G]),Ys(()=>{!G||!F||F(G)},[G,F]),Ys(()=>{if(!G)return;let ae=G.getCenter();ae instanceof kakao.maps.Coords&&(ae=ae.toLatLng());const te="lat"in a?new kakao.maps.LatLng(a.lat,a.lng):new kakao.maps.Coords(a.x,a.y);te instanceof kakao.maps.LatLng&&te.equals(ae)||te instanceof kakao.maps.Coords&&te.toLatLng().equals(ae)||(s?G.panTo(te,u):G.setCenter(te))},[G,a.lat,a.lng,a.x,a.y]),Tt(G,"setDraggable",d),Tt(G,"setZoomable",f),Tt(G,"setKeyboardShortcuts",p),Tt(G,"setLevel",h),Tt(G,"setMapTypeId",B?typeof m=="string"?kakao.maps.MapTypeId[m]:m:void 0),Tt(G,"setProjectionId",y),Tt(G,"setMinLevel",v),Tt(G,"setMaxLevel",g),$t(G,"bounds_changed",x),$t(G,"center_changed",C),$t(G,"click",E),$t(G,"dblclick",S),$t(G,"drag",N),$t(G,"dragstart",M),$t(G,"dragend",k),$t(G,"idle",D),$t(G,"maptypeid_changed",R),$t(G,"mousemove",O),$t(G,"rightclick",P),$t(G,"tilesloaded",A),$t(G,"zoom_changed",I),$t(G,"zoom_start",_),T.jsxs(T.Fragment,{children:[T.jsx(W,{id:r||`${Qz}_Map`,...L,ref:j}),G&&T.jsx(Zz.Provider,{value:G,children:o})]})}),j2=t=>{const n=H.useContext(Zz);if(!n)throw new Error(`${t?t+" Component":"useMap"} must exist inside Map Component!`);return n},fue=_e.forwardRef(function(n,e){let{map:r,position:i,marker:o,children:a,altitude:s,disableAutoPan:u,range:l,removable:c,zIndex:d,onCreate:f}=n;const p=H.useRef(document.createElement("div")),h=H.useMemo(()=>{const v=new kakao.maps.InfoWindow({altitude:s,disableAutoPan:u,range:l,removable:c,zIndex:d,content:p.current,position:i});return p.current.style.display="none",v},[u,c]);return H.useImperativeHandle(e,()=>h,[h]),H.useLayoutEffect(()=>(h.open(r,o),()=>{h.close()}),[r,o]),H.useLayoutEffect(()=>{f&&f(h)},[h,f]),Tt(h,"setPosition",i),Tt(h,"setAltitude",s),Tt(h,"setRange",l),Tt(h,"setZIndex",d),p.current.parentElement&&LO.createPortal(a,p.current.parentElement)}),V2=_e.createContext(void 0),pue=_e.forwardRef(function(n,e){let{onClusterclick:r,onClusterdblclick:i,onClustered:o,onClusterout:a,onClusterover:s,onClusterrightclick:u,onCreate:l,...c}=n;const{children:d,averageCenter:f,calculator:p,clickable:h,disableClickZoom:v,gridSize:g,hoverable:m,minClusterSize:y,minLevel:b,styles:w,texts:x}=c,C=j2("MarkerClusterer"),E=H.useMemo(()=>{if(!window.kakao.maps.MarkerClusterer){console.warn("clusterer 라이브러리를 별도 로드 해야 사용 가능합니다. `https://apis.map.kakao.com/web/guide/#loadlibrary`");return}return new kakao.maps.MarkerClusterer({averageCenter:f,calculator:p,clickable:h,disableClickZoom:v,gridSize:g,hoverable:m,minClusterSize:y,minLevel:b,styles:w,texts:x})},[]);return H.useImperativeHandle(e,()=>E,[E]),H.useLayoutEffect(()=>{if(E)return E.setMap(C),()=>{E.setMap(null)}},[C,E]),H.useLayoutEffect(()=>{E&&l&&l(E)},[E,l]),Tt(E,"setGridSize",g),Tt(E,"setMinClusterSize",y),Tt(E,"setAverageCenter",f),Tt(E,"setAverageCenter",f),Tt(E,"setMinLevel",b),Tt(E,"setTexts",x),Tt(E,"setCalculator",p),Tt(E,"setStyles",w),$t(E,"clustered",o),$t(E,"clusterclick",r),$t(E,"clusterover",s),$t(E,"clusterout",a),$t(E,"clusterdblclick",i),$t(E,"clusterrightclick",u),E?T.jsxs(V2.Provider,{value:E,children:[d,T.jsx(hue,{...c})]}):null}),hue=()=>{const t=H.useContext(V2);return Ys(()=>{t.redraw()}),null},mue=_e.forwardRef(function(n,e){let{map:r,position:i,children:o,altitude:a,clickable:s,draggable:u,image:l,infoWindowOptions:c,onCreate:d,onClick:f,onDragEnd:p,onDragStart:h,onMouseOut:v,onMouseOver:g,opacity:m,range:y,title:b,zIndex:w}=n;const x=H.useContext(V2),C=H.useMemo(()=>{var S,N,k,M,D,R,O,P,A,I,_,F;return l&&new kakao.maps.MarkerImage(l.src,new kakao.maps.Size(l.size.width,l.size.height),{alt:(S=l.options)==null?void 0:S.alt,coords:(N=l.options)==null?void 0:N.coords,offset:((k=l.options)==null?void 0:k.offset)&&new kakao.maps.Point((M=l.options)==null?void 0:M.offset.x,(D=l.options)==null?void 0:D.offset.y),shape:(R=l.options)==null?void 0:R.shape,spriteOrigin:((O=l.options)==null?void 0:O.spriteOrigin)&&new kakao.maps.Point((P=l.options)==null?void 0:P.spriteOrigin.x,(A=l.options)==null?void 0:A.spriteOrigin.y),spriteSize:((I=l.options)==null?void 0:I.spriteSize)&&new kakao.maps.Size((_=l.options)==null?void 0:_.spriteSize.width,(F=l.options)==null?void 0:F.spriteSize.height)})},[JSON.stringify(l)]),E=H.useMemo(()=>new kakao.maps.Marker({altitude:a,clickable:s,draggable:u,image:C,opacity:m,range:y,title:b,zIndex:w,position:i}),[]);return H.useImperativeHandle(e,()=>E,[E]),H.useLayoutEffect(()=>x?(x.addMarker(E,!0),()=>x.removeMarker(E,!0)):(E.setMap(r),()=>E.setMap(null)),[r,x,E]),H.useLayoutEffect(()=>{d&&d(E)},[E,d]),Tt(E,"setPosition",i),Tt(E,"setImage",C),Tt(E,"setAltitude",a),Tt(E,"setClickable",s),Tt(E,"setDraggable",u),Tt(E,"setOpacity",m),Tt(E,"setRange",y),Tt(E,"setRange",y),Tt(E,"setTitle",b),Tt(E,"setTitle",b),Tt(E,"setZIndex",w),$t(E,"click",f),$t(E,"dragstart",h),$t(E,"dragend",p),$t(E,"mouseout",v),$t(E,"mouseover",g),o?T.jsx(fue,{position:i,map:r,marker:E,altitude:c==null?void 0:c.altitude,disableAutoPan:c==null?void 0:c.disableAutoPan,range:c==null?void 0:c.range,removable:c==null?void 0:c.removable,zIndex:c==null?void 0:c.zIndex,children:o}):null}),eB=_e.forwardRef(function(n,e){let{position:r,...i}=n;const o=j2("MapMarker"),a=H.useMemo(()=>"lat"in r?new kakao.maps.LatLng(r.lat,r.lng):new kakao.maps.Coords(r.x,r.y).toLatLng(),[r.lat,r.lng,r.x,r.y]);return T.jsx(mue,{map:o,position:a,...i,ref:e})}),vue="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAsCAYAAAAEuLqPAAAAAXNSR0IArs4c6QAABM1JREFUWAm9WEtsG1UUvW88duJgmhQFpXXSqiBQEbBl0x1rJJDYgZBYIqiEKoEq0fKJQCoLWreAVInuSysQlZAQO4TEbwFbhKjUT5oQx2md2IntePx9nPNmbE8Sf8ZO7CvZ8/zeveecd+e9+8ajJKh9pcPy78rzIvol0fppUSouWuKi8C2ygr4k+v4RUd/LU4d/ljdUJQi06ul0ZnVGitUPQfMayA/09KeDkg18XZWo/bGcm1ntFtNZwBd6TBaS70ld3gFxjCDRsYhMxcbl4eiYhMOWhEMhg12p1aRSqUuuWJJs3pFiqexxqrxYckGOxT+Vt1XJ69x2aS/AnfUNpPUEvadiUZmdPiDjEXtbcKcfTrkqy+lNiCm6Lkr9gWy83C4buwW8m3pWarUfQX4kYtvy2OGDEotGOnF17c8Xy3J3JSPlahV+alHs0Aty/tDf/qDtAtyZ/0XyGNL8ePwRpNny+/fdrtTqcie5LnncHizSJWTiOX8mWujzOoLFxrQb8ifnpvdMTrWcALE4IWIbDnJ51hKwmTwDhxNMO2dubc9Nw3+gK7GISWxyCLk8c2mY+q3qLa7240ceHfieN0A7Xbkmbi49wDB2x4T9BG+FmwGn+gHJudoHXXCdSP39xCYHucRwCnYpK5zWKDJitpo/YBhtbmdj5AS3ZcqrlkkWmaD7fC/CyEEuVNZJclui9IsEZIUblTW5wG1JXT9DYpbXUVmTC9zIAE41WNhu7chhC2lygdsyR6oR4B4swyYnftj2uHCcc9pm6pqn+ohMt8gskqfJ61R4YIzGnEqtQZTmLjCnUwlH6KisyQVuZMD6lcQbBe/sHoGKJpdSv0BA6BvUZp3JO7pcrQ+dnhzkIqdo+1tLLs7cwTPcTyjH6kG2MHQBhgNchhPcZgdgK86T+X42r51yc4Hsuxhik8MAe5yugEuzv6MgXa/X62ohlYGe/TdiLqTWhRzkEnLCXAFsTU68iYF7BackqbUce/bViFlw8LQMDsPlobcEzB/M4jEIx7KqJddyOr2xtW8CiEVMYhsOcu0SwI4L8d/E0qdxVqp797N6bXPvW5MYxCKmwSaHz1oZaHQm5hKirLPcFVgPOpNzGiN9XxlLDGIZTGLvsN0C6HAxfg736iOqJkCpVTp3hHf+yRhDzpkTi5htrPuz76nlryHilYfGx+T40Wls3WDGFX9zMY1Fx39j6hpW/KudIttnoOE9NfEW1C+ZnbEefGek4GvI+UeEGF2suwCuVmW9jlnoZDqnt5ze/7jpQ1/GmFjfim+no7sARiTwX1/051wPWM1YT+1g3D6O0Ye+JsbEdvbnSG8B9LLt9zGjxS0Ukm7nBcfoQ183hsHdLZiA84cK2MMnCbW8ttn21OQpxzFDR1/GBLBgAgiUmPsB3zdYy5fTeAGyw9hn6jx8PN8dHu1/BhfA+HAYVVIq67miLvqeoNhmH8c8H3oHsv4EfDZzG7X8CitbEm9AGmbarHYco08f1p8AAo/bn6A2FPj6pYAtx495FYM+M9YHOV37F+C+9brM4NVM3nzYhl32v/lwu3p/9y+AmEq+RBaqmXwRz5K492ibvt58uzwGE5CYXcJj03fmlOO9Z5t9A9hgAkhkhS41+fztZucoGqf++1P42YP9D7SQLhmdOHqxAAAAAElFTkSuQmCC",gue="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAABUCAYAAADeW1RFAAAAAXNSR0IArs4c6QAAC/NJREFUeAHlXG2IXFcZfs+987Hf2XztzoSE1kYMoiCYUD/jB/ijsQWlhZTml9IfahURbfRHSb1NMGKigiLY/tFYJJIIFbXVgoFEqdWEtBJQamtC0mbJJrshO7OzMzuzM/cen+fMnO3sx0zm497Nrr4we+89533f8zz3fL3n3HtXSUSy09N9k8HER0T0Li16hxbZoURSWutBpWSQxWotOaVUDnnXkfe6EvW6iDq/2Rn56yueKkQBDeWEJ9u96yNlX/ZpFTwIrx8AoUQn3nFD5mB3Vmnnubgrxy95qYlO/CxnEwrhbd61j2lf7Rcl96HaYtWClI4n4iqeSEjMjYkbc8V1XXGUg0qsFYs7EuhAfN8Xv+JLxa9IeW4OvzIqXVeVlKqIlheVq49e9bb8ZTkS7aR1Rfhub/wTfqAPAfdHLclkT1L19vZKIpkEr87co9nLXKkks7OzUiqW5snD3Uuuow5c8dJn2iFZr9sRoru9iZTvV34AJPvoDMR0X3+/6u8fEOV05LIe04JzHWjJ52ekkM/jPlRrHSUcd93YN654I9cXKLdw0Ta6u54c3xOIPo5KGAZVjdpU/UOD4jpoqhGKHwSSn86x1k2No7Yzjqh9bx5M/7GdYtsivO3Ata9rpY6inzqJZI8MgmgsVuuy7ZTahW6lUpEciM+VimxagdJ6/9VDW37YqsuWCL/H04lp//ozmF4+x1odGBxQ/QMDrZYRiV5+ZkZmcjPV2hZ1bMhNfeFfnuLo3lRuS/hd3vSmQjDzW4yUH1bK0euGhxUGpqZOVyoTA5pkMxl07QBTuLzc5wx85g1v6Gaz8psSZs1mg/HTJItBQobXr5dYfGWbcDPwzKuUK5KZmsLUVkHjk5fXOelPNqvppiMNm7Elu2HTxlVHloRZAcTGCiFWg5kZDaQhYTNAoc+yGbNmnYhH4Qb4WkomNmIkVo4zxN7IcNkmvdW7dp/46nkYOXC0avpsIxI2nX0azRsDmQTi6gfGvC0v2jx7XELYBBVB5TXOswODg3KnR2MLtNVjdfTOobYl4zqxdy8OTpY0aRNBgWwS8+xaI8ubQszEzgojl8U3agHhrQfGP27CRYSKAwgq1qoY7OBALuRUz2MBYegcYmZvT69a6QiqHlS358RODvRjOVmf84TNEk/Lbi4E2HfXupADuaCad287MLHb8pknLIF6nIlc9Tju28lWca0dyaEXXAxu5e+3+A0z7lSgve9hnMwl3v+KDBgupi/vIUfyMnFiOZBHuFPB0S3s9ay9ebpclAA/7ZdRVGCSESiIcuPixFEufmELuSSTSVUqFWPlQD0C/z8yNYzohHtQ0tvXG3aZIFmSSm5SKoUpnM+KDhDzkjB+PGca86hD3bDFcrIcFXcXJ4LxKWwmxEdSo+jnS2KRjjH4xZwEpRlj/87NcXnwfX3yoXckJD3kmrTxaV/+dnlOnrtQkIuTZZPmJAfE7Qlv0OSoNXH9BpbxujzipNfHuJWKtAQ23DiqdUxusaElG0Oz+uanhmTv+/uwmFko92yMCX/7dvXJyVcLcuTUtFRqNygs0uTEzURsDibI1UGH2kkY8XhHO6oLGdSu2DRZsyT704c3yMPLkK035I2gDnVpQ9swm/c8N3B10LZ3sPAwA42gOG34sGbvvav1G0ld2lCsD3PR5R/LjVwd7AMawtw3DkM4GnMwYp9lM25XaENb+qCvMMRyI1c0IEnTKTfJwxBOPRQOUIv7bCv+aUNbivVlLrr4Y7mRK1bM2gyJ5olAF06tKedZCkfjTsXaWl+d+rF2lhu5OhjEqnNASCO0DSrs1GMLbedoba2vdmyX1a1xI1cMWoJI4P9DyJWRltnWDLCzH4YwXKQwqOhUrK311akfa1fH7aajtEwyI6zmw9iYwgiqU7G21lenfqyd5UauaNJqnBk+HmGEIVwIUBguogm1LbShLcX6Mhdd/JnnptQ1TEv6LH2Vy9XRtQu/xpSrHuXETGzMcLFdoQ3javoIawU1z03rc47rqpcIam4uHML05fRUoyXGxufebL1pU5c29T7MRZd/LDdydSpDqbN4MIObMIem3kkjXIrGiSeFq54K/H3pxC05gVpr5pl51KEubWhLH2EIOZEbOVa5wuvWJ8efx6h1/9DwsPDpfVhiV0z0d6eWh3yLYDqT4W7eC2MH0w+YHQ9MJL/ApHR/EZlhEuYST7kJsxBgvzxyKtvwXrLPsiuEVbO2IHKi4GnMMR4N4cSm1O9Kk+NTeK9iPZ/GhfmE0DTv+GazEFjpLR5y4bsiiKGnEhtSvydhEyVc/Koq4fWanzOhgAfNUQhHXLdvWGKDmyU+NGp+PGdaWKPxYtzzXJT6meEIhWpYhJNYwjmCOzE7Wypqvka01oUcyIWcYknnqOUzT/jyE6M3MPk9jcFL5bLVqcEqrcWj4cC3fsDJcKuRmCfM61hSfQ/DWQ7bmpiXW58/V9sNIXZyIJcqp7cRLiDMO4HdvW8zm3eIT6PWmhCzbaHkUl+75LKAMBM++N70j3G4UKmUJZ/LMWlNCTETO+RCjcsC/EsI/3qv8mOu80U0Bz9fyGu897jAYDVfECsxEzs5kMtivEsIU+GKl/o7dgcOcwDLZjM4rP62TYzESszETg6LyfJ6WcLM2O6kDiIcO8ulVXYKjla5EKNZBgKzwd4AL6apxrLt0I3tUvbP4+YNDw4OSd9Af2PlO5hTmMlLLjeN+pGMxN1dVw+MXmoEp2EN04CGSty97BO5XE7PlVbfVEVMxEaMxNqMLDk1JUyFtw6O/gmHr6FzqEx2SvPlztUixEJMxEaMNaxN4d2WMK3HDqV/gg21Z7QfqMzULR344Wz4NUV2m0xiIBZiIjZivI2JyW6JMDW3O6NfQSc5jVf1VSYzdUeDEk4a5v1KYCEmg60VttBpOmgt9rHVy25QfuEcHkpt7+ntk3XD6xarrMh1NpOV4mwB4NUl7fbdO+atu9VqwS3XMB0ax676LO5TngUW8u1v0rUKrJEey2TZxCDA0g5Z+myLMA2ueql/otM8yvPc9LS2G2S8jlpYFstkOcRALO2W2TZhFnD1YOoEXhjBa/eIxDJTGDeiH8RYBstimSybGNolS/2OCNNwu0p9C/f5TOD7KosXtKOMPuk7ewsvxaAsllktmyjal7YGrcXu+e5TKQhewR7sVrzQho8+qvvRi/W6vUYz5mc84CpjScfZ2c2Xah3XMEmYgh31EEK6OQwmkaysuAKib5aBfbeHuiFLzF0RpoMxL31OtPMU+9Z0tvE2LHU7kapPRFIow5TViZM6m64J09eQO/p9NLd/m00DBPJhSR6+zGIevk0ZITgOhTC/InFFPUY8+ZlcKLue3HWkL/qk72ZfqlCnVQmFMAvDJ3Gn0UN+iYU4dj27b9r0QV/0WfXdKqXmeqERZjHxHvU416Ql7PYXZzt/5Yi29EFf9NmcQnu5oRI2O4RaPUEIM7npjnaGOOfS1tCAr8W7ju3RW6odKmG6f9RNPY2w7zz6oJottB9r04a29EFfSyF3l9JV4NGoaH5y62v9Bzxtl02bR9g0WxLW7s3JCUZUWBeoT7f7qWwrhYRewyyUQEHyVQKvrmxagSJGlzaQf0RBlo4jIVxzfJhHzqVNH/9TiYLaNbo4dZV8x6RF8CcywleeSj+HBfpr/Opztlh9KN0MP3WoS5vPO+nfNNPtJi8ywhh0+Bb6dwkun7v9M2erQxvPU5GtNyMjTKL3OOlfocYus+aKxcbzMufdWu1epg1to5JICZ/x8D84RB8h+GbbQYX56UsfqdpERTfCQctCHnHTz2Ihm8M3B8vG2IyZmUedqq61jOYYaQ0TMv+nDvrlSdS0KhaWDl7VND4A0yej+v879bcucsIsDK8kHeNxlruN1aCRl+bcpOHU6pj0CP+sCOG3vBG+3vgfNt/6Vyl4zjTm1XQipFp1vSKEWZQS5xiPtkbrz20e06KWFSOcdOPPIqgOSsWiDvD+I388Z5rJi5ppzf+KEb7obRzDd56nuKifLeSFP54zjXkrxDe6WHo5AqjOw6zRGbx4wh/PTdpyyhGlrVgNEz8eaf4ZNfpldOg3+MN3gI8xLSJuy7r9LyKqpzm0iOL3AAAAAElFTkSuQmCC";function lI(t){return xS({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"},child:[]}]})(t)}function yue(t){return xS({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M568.482 177.448L424.479 313.433C409.3 327.768 384 317.14 384 295.985v-71.963c-144.575.97-205.566 35.113-164.775 171.353 4.483 14.973-12.846 26.567-25.006 17.33C155.252 383.105 120 326.488 120 269.339c0-143.937 117.599-172.5 264-173.312V24.012c0-21.174 25.317-31.768 40.479-17.448l144.003 135.988c10.02 9.463 10.028 25.425 0 34.896zM384 379.128V448H64V128h50.916a11.99 11.99 0 0 0 8.648-3.693c14.953-15.568 32.237-27.89 51.014-37.676C185.708 80.83 181.584 64 169.033 64H48C21.49 64 0 85.49 0 112v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48v-88.806c0-8.288-8.197-14.066-16.011-11.302a71.83 71.83 0 0 1-34.189 3.377c-7.27-1.046-13.8 4.514-13.8 11.859z"},child:[]}]})(t)}var $2={},bue=wt;Object.defineProperty($2,"__esModule",{value:!0});var tB=$2.default=void 0,wue=bue(xt()),xue=T;tB=$2.default=(0,wue.default)((0,xue.jsx)("path",{d:"M20.01 15.38c-1.23 0-2.42-.2-3.53-.56-.35-.12-.74-.03-1.01.24l-1.57 1.97c-2.83-1.35-5.48-3.9-6.89-6.83l1.95-1.66c.27-.28.35-.67.24-1.02-.37-1.11-.56-2.3-.56-3.53 0-.54-.45-.99-.99-.99H4.19C3.65 3 3 3.24 3 3.99 3 13.28 10.73 21 20.01 21c.71 0 .99-.63.99-1.18v-3.45c0-.54-.45-.99-.99-.99"}),"Call");const Sue=({position:t,content:n,isActive:e,onClick:r,getDistance:i})=>{const o=Xz(Ly),a=lo(M2),s=j2(),u=jr(),l=f=>{s.panTo(f.getPosition()),r()},c=H.useMemo(()=>i(o.center.lat,o.center.lng,t.lat,t.lng),[o,t]),d=()=>{const f=s.getCenter();a({lat:f.getLat(),lng:f.getLng()}),u(`${t.lat}-${t.lng}`,{state:{data:{content:n,position:t}}})};return T.jsxs(T.Fragment,{children:[T.jsx(eB,{position:t,onClick:l,image:e?{src:gue,size:{width:28,height:40}}:{src:vue,size:{width:18,height:25}}}),e&&T.jsxs("div",{className:"info",children:[T.jsxs("div",{className:"info_header",children:[T.jsx("div",{className:"info_name",onClick:d,children:n.name}),T.jsx("div",{className:"info_type",children:n.type})]}),T.jsxs("div",{className:"info_body",children:[T.jsx("div",{className:"info_distance",children:c>=1?`${c.toFixed(1)}km`:`${(c/1e3).toFixed()}`}),T.jsx("div",{className:"info_addr",children:n.addr})]}),T.jsxs("div",{className:"info_footer",children:[T.jsx("hr",{}),T.jsxs("div",{className:"info_icons",children:[n.tel&&T.jsx("a",{href:`tel:${n.tel}`,children:T.jsx(tB,{})}),T.jsx(yue,{})]})]})]})]})};var U2={},Eue=wt;Object.defineProperty(U2,"__esModule",{value:!0});var nB=U2.default=void 0,Cue=Eue(xt()),Rue=T;nB=U2.default=(0,Cue.default)((0,Rue.jsx)("path",{d:"M12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4m8.94 3c-.46-4.17-3.77-7.48-7.94-7.94V1h-2v2.06C6.83 3.52 3.52 6.83 3.06 11H1v2h2.06c.46 4.17 3.77 7.48 7.94 7.94V23h2v-2.06c4.17-.46 7.48-3.77 7.94-7.94H23v-2zM12 19c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7"}),"GpsFixed");var W2={},Tue=wt;Object.defineProperty(W2,"__esModule",{value:!0});var rB=W2.default=void 0,Nue=Tue(xt()),kue=T;rB=W2.default=(0,Nue.default)((0,kue.jsx)("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4z"}),"RefreshOutlined");const Iue=({mapRef:t,addData:n,getDistance:e,openList:r})=>{const[i,o]=za(Py),[a,s]=za(O2),[u,l]=za(Ly),[c,d]=za(M2),f=lo(D2),p=()=>{const v=t.current;if(!v)return;const g=v.getCenter();v.setCenter(g),o(!1),s(null),f("dist"),d({lat:g.getLat(),lng:g.getLng()})};console.log(c);const h=()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(v=>{const g=v.coords.latitude,m=v.coords.longitude,y=new kakao.maps.LatLng(g,m);t.current.setCenter(y),o(!1),l(b=>({...b,center:{lat:g,lng:m},isLoading:!0}))}):window.alert("이 브라우저에서는 Geolocation을 지원하지 않습니다.")};return T.jsxs("div",{className:"FishMapBody",children:[i&&!r&&T.jsxs("div",{className:"reSearch",onClick:p,children:[T.jsx(rB,{}),"이 지역 검색"]}),T.jsxs(due,{center:c,ref:t,level:9,onClick:()=>s(null),onCenterChanged:()=>o(!0),children:[T.jsx(pue,{minLevel:12,averageCenter:!0,children:n.map((v,g)=>T.jsx(Sue,{position:v.latlng,content:v.content,isActive:a===g,onClick:()=>s(g),getDistance:e},`EventMarkerContainer-${v.latlng.lat}-${v.latlng.lng}`))}),u.isLoading&&T.jsx(eB,{position:u.center,clickable:!0,image:{src:"https://cdn4.iconfinder.com/data/icons/small-n-flat/24/map-marker-512.png",size:{width:25,height:25}}}),!r&&T.jsx("button",{style:{bottom:a!==null?"180px":"20px"},className:"FishMap_btn",onClick:h,children:T.jsx(nB,{})})]})]})},_ue=[{content:{name:"상무낚시터",type:"기타낚시",addr:"광주광역시 서구 유덕로141번길 31-1",tel:"062-373-0558",hashTag:["월척"],expense:1e4,fishes:["용치놀래기","가다랑어","붉바리","보리멸","자리돔","참돔"]},latlng:{lat:35.16357724,lng:126.8386542}},{content:{name:"땅끝낚시터",type:"바다낚시",addr:"전라남도 해남군 송지면 갈산길 93, 땅끝낚시터",tel:"061-536-1234",hashTag:["사진맛집","월척"],expense:2e4,fishes:["가다랑어","보리멸"]},latlng:{lat:34.30556,lng:126.516116}},{content:{name:"정남진 해양낚시공원",type:"바다낚시",addr:"전라남도 장흥군 회진면 해양낚시길 135",tel:"061-867-0555",hashTag:["사진맛집"],expense:15e3,fishes:["자리돔","참돔"]},latlng:{lat:34.4706335,lng:126.9740566}},{content:{name:"거금해양낚시공원",type:"바다낚시",addr:"전라남도 고흥군 금산면 신촌내동길 18-132",tel:"061-843-6060",hashTag:["#사진맛집","#노을맛집","#월척"],expense:14e3,fishes:["가다랑어","붉바리"]},latlng:{lat:34.46942797,lng:127.104524}},{content:{name:"홀통낚시터",type:"바다낚시",addr:"전라남도 무안군 현경면 홀통길 198-1",tel:"",hashTag:["#노을맛집","#월척"],expense:1e4,fishes:["가다랑어","붉바리"]},latlng:{lat:35.0616396163,lng:126.3321694341}},{content:{name:"늘푸른낚시",type:"바다낚시",addr:"전라남도 무안군 운남면 운해로 1",tel:"061-452-5660",hashTag:["#노을맛집"],expense:2e4,fishes:["가다랑어","붉바리"]},latlng:{lat:34.9153538678,lng:126.3384728811}}],Aue=["#사진맛집","#노을맛집","#월척","#고기맛집","#산책하기좋은곳"],Oue=()=>{const t=lo(Yz),n=lo(D2),e=lo(Py),r=lo(Ly),[i,o]=za(M2),[a,s]=za(O2),[u,l]=H.useState(!1),c=Si();console.log(c);const d=H.useRef(null),f=()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(g=>{var b;const{latitude:m,longitude:y}=g.coords;r(w=>({...w,center:{lat:m,lng:y},isLoading:!0})),e(!1),(!i.lat&&!i.lng||!((b=c.state)!=null&&b.data))&&p(m,y)},g=>{console.log(g),r(m=>({...m,errMsg:g.message,isLoading:!1}))}):r(g=>({...g,errMsg:"geolocation을 사용할수 없어요..",isLoading:!1}))},p=(g,m)=>{o({lat:g,lng:m}),s(null),t(""),n("dist")},h=(g,m,y,b)=>{const w=M=>M*(Math.PI/180),C=w(y-g),E=w(b-m),S=Math.sin(C/2)*Math.sin(C/2)+Math.cos(w(g))*Math.cos(w(y))*Math.sin(E/2)*Math.sin(E/2);return 6371*(2*Math.atan2(Math.sqrt(S),Math.sqrt(1-S)))},v=H.useMemo(()=>_ue.map(g=>{const m=h(i.lat,i.lng,g.latlng.lat,g.latlng.lng);return m<=20?{...g,dist:m}:null}).filter(Boolean),[i]);return H.useEffect(()=>{f()},[]),T.jsxs("div",{className:"FishMap",children:[T.jsx(lue,{hashTags:Aue,mapRef:d}),T.jsx(Iue,{openList:u,mapRef:d,addData:v,getDistance:h}),a===null&&T.jsx(Zse,{openList:u,setOpenList:l,addData:v,mapRef:d,getDistance:h})]})},Due=["일","월","화","수","목","금","토"],Mue=({weatherData:t,sunrise:n,sunset:e})=>{const r=new Date,i=(r.getMonth()+1).toString().padStart(2,"0"),o=r.getDate().toString().padStart(2,"0"),a=u=>u.toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit",hour12:!1}),s=u=>u<12?`오전${u||12}시`:`오후${u===12?u:u-12}시`;return T.jsxs("div",{className:"MapDetailWeather",children:[T.jsx("div",{className:"todays-date",children:`${i}.${o} ${Due[r.getDay()]}`}),T.jsxs("div",{className:"sun-rs",children:[`일출 ${a(n)}`,T.jsx("span",{children:"•"}),`일몰 ${a(e)}`]}),T.jsx("div",{className:"weather-data",children:t.map((u,l)=>T.jsxs("div",{className:"weather-total",children:[T.jsx("div",{className:"weather-time",children:s(new Date(u.dt_txt).getHours())}),T.jsx("img",{className:"weather-icon",src:`http://openweathermap.org/img/wn/${u.weather[0].icon}@2x.png`,alt:"날씨 아이콘"}),T.jsxs("div",{children:[u.main.temp.toFixed(0),"°"]}),T.jsx("div",{children:`${(u.pop*100).toFixed()}%`})]},l))})]})};function iB(t,n){return function(){return t.apply(n,arguments)}}const{toString:Pue}=Object.prototype,{getPrototypeOf:H2}=Object,Fy=(t=>n=>{const e=Pue.call(n);return t[e]||(t[e]=e.slice(8,-1).toLowerCase())})(Object.create(null)),ko=t=>(t=t.toLowerCase(),n=>Fy(n)===t),zy=t=>n=>typeof n===t,{isArray:Fc}=Array,Wf=zy("undefined");function Lue(t){return t!==null&&!Wf(t)&&t.constructor!==null&&!Wf(t.constructor)&&bi(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const oB=ko("ArrayBuffer");function Fue(t){let n;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?n=ArrayBuffer.isView(t):n=t&&t.buffer&&oB(t.buffer),n}const zue=zy("string"),bi=zy("function"),aB=zy("number"),By=t=>t!==null&&typeof t=="object",Bue=t=>t===!0||t===!1,wm=t=>{if(Fy(t)!=="object")return!1;const n=H2(t);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},jue=ko("Date"),Vue=ko("File"),$ue=ko("Blob"),Uue=ko("FileList"),Wue=t=>By(t)&&bi(t.pipe),Hue=t=>{let n;return t&&(typeof FormData=="function"&&t instanceof FormData||bi(t.append)&&((n=Fy(t))==="formdata"||n==="object"&&bi(t.toString)&&t.toString()==="[object FormData]"))},Gue=ko("URLSearchParams"),que=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Pp(t,n,{allOwnKeys:e=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),Fc(t))for(r=0,i=t.length;r<i;r++)n.call(null,t[r],r,t);else{const o=e?Object.getOwnPropertyNames(t):Object.keys(t),a=o.length;let s;for(r=0;r<a;r++)s=o[r],n.call(null,t[s],s,t)}}function sB(t,n){n=n.toLowerCase();const e=Object.keys(t);let r=e.length,i;for(;r-- >0;)if(i=e[r],n===i.toLowerCase())return i;return null}const uB=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,lB=t=>!Wf(t)&&t!==uB;function ax(){const{caseless:t}=lB(this)&&this||{},n={},e=(r,i)=>{const o=t&&sB(n,i)||i;wm(n[o])&&wm(r)?n[o]=ax(n[o],r):wm(r)?n[o]=ax({},r):Fc(r)?n[o]=r.slice():n[o]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&Pp(arguments[r],e);return n}const Kue=(t,n,e,{allOwnKeys:r}={})=>(Pp(n,(i,o)=>{e&&bi(i)?t[o]=iB(i,e):t[o]=i},{allOwnKeys:r}),t),Xue=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Yue=(t,n,e,r)=>{t.prototype=Object.create(n.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:n.prototype}),e&&Object.assign(t.prototype,e)},Jue=(t,n,e,r)=>{let i,o,a;const s={};if(n=n||{},t==null)return n;do{for(i=Object.getOwnPropertyNames(t),o=i.length;o-- >0;)a=i[o],(!r||r(a,t,n))&&!s[a]&&(n[a]=t[a],s[a]=!0);t=e!==!1&&H2(t)}while(t&&(!e||e(t,n))&&t!==Object.prototype);return n},Que=(t,n,e)=>{t=String(t),(e===void 0||e>t.length)&&(e=t.length),e-=n.length;const r=t.indexOf(n,e);return r!==-1&&r===e},Zue=t=>{if(!t)return null;if(Fc(t))return t;let n=t.length;if(!aB(n))return null;const e=new Array(n);for(;n-- >0;)e[n]=t[n];return e},ele=(t=>n=>t&&n instanceof t)(typeof Uint8Array<"u"&&H2(Uint8Array)),tle=(t,n)=>{const r=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=r.next())&&!i.done;){const o=i.value;n.call(t,o[0],o[1])}},nle=(t,n)=>{let e;const r=[];for(;(e=t.exec(n))!==null;)r.push(e);return r},rle=ko("HTMLFormElement"),ile=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,r,i){return r.toUpperCase()+i}),cI=(({hasOwnProperty:t})=>(n,e)=>t.call(n,e))(Object.prototype),ole=ko("RegExp"),cB=(t,n)=>{const e=Object.getOwnPropertyDescriptors(t),r={};Pp(e,(i,o)=>{let a;(a=n(i,o,t))!==!1&&(r[o]=a||i)}),Object.defineProperties(t,r)},ale=t=>{cB(t,(n,e)=>{if(bi(t)&&["arguments","caller","callee"].indexOf(e)!==-1)return!1;const r=t[e];if(bi(r)){if(n.enumerable=!1,"writable"in n){n.writable=!1;return}n.set||(n.set=()=>{throw Error("Can not rewrite read-only method '"+e+"'")})}})},sle=(t,n)=>{const e={},r=i=>{i.forEach(o=>{e[o]=!0})};return Fc(t)?r(t):r(String(t).split(n)),e},ule=()=>{},lle=(t,n)=>(t=+t,Number.isFinite(t)?t:n),I1="abcdefghijklmnopqrstuvwxyz",dI="0123456789",dB={DIGIT:dI,ALPHA:I1,ALPHA_DIGIT:I1+I1.toUpperCase()+dI},cle=(t=16,n=dB.ALPHA_DIGIT)=>{let e="";const{length:r}=n;for(;t--;)e+=n[Math.random()*r|0];return e};function dle(t){return!!(t&&bi(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const fle=t=>{const n=new Array(10),e=(r,i)=>{if(By(r)){if(n.indexOf(r)>=0)return;if(!("toJSON"in r)){n[i]=r;const o=Fc(r)?[]:{};return Pp(r,(a,s)=>{const u=e(a,i+1);!Wf(u)&&(o[s]=u)}),n[i]=void 0,o}}return r};return e(t,0)},ple=ko("AsyncFunction"),hle=t=>t&&(By(t)||bi(t))&&bi(t.then)&&bi(t.catch),ce={isArray:Fc,isArrayBuffer:oB,isBuffer:Lue,isFormData:Hue,isArrayBufferView:Fue,isString:zue,isNumber:aB,isBoolean:Bue,isObject:By,isPlainObject:wm,isUndefined:Wf,isDate:jue,isFile:Vue,isBlob:$ue,isRegExp:ole,isFunction:bi,isStream:Wue,isURLSearchParams:Gue,isTypedArray:ele,isFileList:Uue,forEach:Pp,merge:ax,extend:Kue,trim:que,stripBOM:Xue,inherits:Yue,toFlatObject:Jue,kindOf:Fy,kindOfTest:ko,endsWith:Que,toArray:Zue,forEachEntry:tle,matchAll:nle,isHTMLForm:rle,hasOwnProperty:cI,hasOwnProp:cI,reduceDescriptors:cB,freezeMethods:ale,toObjectSet:sle,toCamelCase:ile,noop:ule,toFiniteNumber:lle,findKey:sB,global:uB,isContextDefined:lB,ALPHABET:dB,generateString:cle,isSpecCompliantForm:dle,toJSONObject:fle,isAsyncFn:ple,isThenable:hle};function vt(t,n,e,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",n&&(this.code=n),e&&(this.config=e),r&&(this.request=r),i&&(this.response=i)}ce.inherits(vt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ce.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const fB=vt.prototype,pB={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{pB[t]={value:t}});Object.defineProperties(vt,pB);Object.defineProperty(fB,"isAxiosError",{value:!0});vt.from=(t,n,e,r,i,o)=>{const a=Object.create(fB);return ce.toFlatObject(t,a,function(u){return u!==Error.prototype},s=>s!=="isAxiosError"),vt.call(a,t.message,n,e,r,i),a.cause=t,a.name=t.name,o&&Object.assign(a,o),a};const mle=null;function sx(t){return ce.isPlainObject(t)||ce.isArray(t)}function hB(t){return ce.endsWith(t,"[]")?t.slice(0,-2):t}function fI(t,n,e){return t?t.concat(n).map(function(i,o){return i=hB(i),!e&&o?"["+i+"]":i}).join(e?".":""):n}function vle(t){return ce.isArray(t)&&!t.some(sx)}const gle=ce.toFlatObject(ce,{},null,function(n){return/^is[A-Z]/.test(n)});function jy(t,n,e){if(!ce.isObject(t))throw new TypeError("target must be an object");n=n||new FormData,e=ce.toFlatObject(e,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,g){return!ce.isUndefined(g[v])});const r=e.metaTokens,i=e.visitor||c,o=e.dots,a=e.indexes,u=(e.Blob||typeof Blob<"u"&&Blob)&&ce.isSpecCompliantForm(n);if(!ce.isFunction(i))throw new TypeError("visitor must be a function");function l(h){if(h===null)return"";if(ce.isDate(h))return h.toISOString();if(!u&&ce.isBlob(h))throw new vt("Blob is not supported. Use a Buffer instead.");return ce.isArrayBuffer(h)||ce.isTypedArray(h)?u&&typeof Blob=="function"?new Blob([h]):Buffer.from(h):h}function c(h,v,g){let m=h;if(h&&!g&&typeof h=="object"){if(ce.endsWith(v,"{}"))v=r?v:v.slice(0,-2),h=JSON.stringify(h);else if(ce.isArray(h)&&vle(h)||(ce.isFileList(h)||ce.endsWith(v,"[]"))&&(m=ce.toArray(h)))return v=hB(v),m.forEach(function(b,w){!(ce.isUndefined(b)||b===null)&&n.append(a===!0?fI([v],w,o):a===null?v:v+"[]",l(b))}),!1}return sx(h)?!0:(n.append(fI(g,v,o),l(h)),!1)}const d=[],f=Object.assign(gle,{defaultVisitor:c,convertValue:l,isVisitable:sx});function p(h,v){if(!ce.isUndefined(h)){if(d.indexOf(h)!==-1)throw Error("Circular reference detected in "+v.join("."));d.push(h),ce.forEach(h,function(m,y){(!(ce.isUndefined(m)||m===null)&&i.call(n,m,ce.isString(y)?y.trim():y,v,f))===!0&&p(m,v?v.concat(y):[y])}),d.pop()}}if(!ce.isObject(t))throw new TypeError("data must be an object");return p(t),n}function pI(t){const n={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return n[r]})}function G2(t,n){this._pairs=[],t&&jy(t,this,n)}const mB=G2.prototype;mB.append=function(n,e){this._pairs.push([n,e])};mB.toString=function(n){const e=n?function(r){return n.call(this,r,pI)}:pI;return this._pairs.map(function(i){return e(i[0])+"="+e(i[1])},"").join("&")};function yle(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function vB(t,n,e){if(!n)return t;const r=e&&e.encode||yle,i=e&&e.serialize;let o;if(i?o=i(n,e):o=ce.isURLSearchParams(n)?n.toString():new G2(n,e).toString(r),o){const a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+o}return t}class hI{constructor(){this.handlers=[]}use(n,e,r){return this.handlers.push({fulfilled:n,rejected:e,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(n){this.handlers[n]&&(this.handlers[n]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(n){ce.forEach(this.handlers,function(r){r!==null&&n(r)})}}const gB={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ble=typeof URLSearchParams<"u"?URLSearchParams:G2,wle=typeof FormData<"u"?FormData:null,xle=typeof Blob<"u"?Blob:null,Sle={isBrowser:!0,classes:{URLSearchParams:ble,FormData:wle,Blob:xle},protocols:["http","https","file","blob","url","data"]},yB=typeof window<"u"&&typeof document<"u",Ele=(t=>yB&&["ReactNative","NativeScript","NS"].indexOf(t)<0)(typeof navigator<"u"&&navigator.product),Cle=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Rle=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:yB,hasStandardBrowserEnv:Ele,hasStandardBrowserWebWorkerEnv:Cle},Symbol.toStringTag,{value:"Module"})),co={...Rle,...Sle};function Tle(t,n){return jy(t,new co.classes.URLSearchParams,Object.assign({visitor:function(e,r,i,o){return co.isNode&&ce.isBuffer(e)?(this.append(r,e.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},n))}function Nle(t){return ce.matchAll(/\w+|\[(\w*)]/g,t).map(n=>n[0]==="[]"?"":n[1]||n[0])}function kle(t){const n={},e=Object.keys(t);let r;const i=e.length;let o;for(r=0;r<i;r++)o=e[r],n[o]=t[o];return n}function bB(t){function n(e,r,i,o){let a=e[o++];if(a==="__proto__")return!0;const s=Number.isFinite(+a),u=o>=e.length;return a=!a&&ce.isArray(i)?i.length:a,u?(ce.hasOwnProp(i,a)?i[a]=[i[a],r]:i[a]=r,!s):((!i[a]||!ce.isObject(i[a]))&&(i[a]=[]),n(e,r,i[a],o)&&ce.isArray(i[a])&&(i[a]=kle(i[a])),!s)}if(ce.isFormData(t)&&ce.isFunction(t.entries)){const e={};return ce.forEachEntry(t,(r,i)=>{n(Nle(r),i,e,0)}),e}return null}function Ile(t,n,e){if(ce.isString(t))try{return(n||JSON.parse)(t),ce.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(e||JSON.stringify)(t)}const q2={transitional:gB,adapter:["xhr","http"],transformRequest:[function(n,e){const r=e.getContentType()||"",i=r.indexOf("application/json")>-1,o=ce.isObject(n);if(o&&ce.isHTMLForm(n)&&(n=new FormData(n)),ce.isFormData(n))return i?JSON.stringify(bB(n)):n;if(ce.isArrayBuffer(n)||ce.isBuffer(n)||ce.isStream(n)||ce.isFile(n)||ce.isBlob(n))return n;if(ce.isArrayBufferView(n))return n.buffer;if(ce.isURLSearchParams(n))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),n.toString();let s;if(o){if(r.indexOf("application/x-www-form-urlencoded")>-1)return Tle(n,this.formSerializer).toString();if((s=ce.isFileList(n))||r.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return jy(s?{"files[]":n}:n,u&&new u,this.formSerializer)}}return o||i?(e.setContentType("application/json",!1),Ile(n)):n}],transformResponse:[function(n){const e=this.transitional||q2.transitional,r=e&&e.forcedJSONParsing,i=this.responseType==="json";if(n&&ce.isString(n)&&(r&&!this.responseType||i)){const a=!(e&&e.silentJSONParsing)&&i;try{return JSON.parse(n)}catch(s){if(a)throw s.name==="SyntaxError"?vt.from(s,vt.ERR_BAD_RESPONSE,this,null,this.response):s}}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:co.classes.FormData,Blob:co.classes.Blob},validateStatus:function(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ce.forEach(["delete","get","head","post","put","patch"],t=>{q2.headers[t]={}});const K2=q2,_le=ce.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Ale=t=>{const n={};let e,r,i;return t&&t.split(`
`).forEach(function(a){i=a.indexOf(":"),e=a.substring(0,i).trim().toLowerCase(),r=a.substring(i+1).trim(),!(!e||n[e]&&_le[e])&&(e==="set-cookie"?n[e]?n[e].push(r):n[e]=[r]:n[e]=n[e]?n[e]+", "+r:r)}),n},mI=Symbol("internals");function yd(t){return t&&String(t).trim().toLowerCase()}function xm(t){return t===!1||t==null?t:ce.isArray(t)?t.map(xm):String(t)}function Ole(t){const n=Object.create(null),e=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=e.exec(t);)n[r[1]]=r[2];return n}const Dle=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function _1(t,n,e,r,i){if(ce.isFunction(r))return r.call(this,n,e);if(i&&(n=e),!!ce.isString(n)){if(ce.isString(r))return n.indexOf(r)!==-1;if(ce.isRegExp(r))return r.test(n)}}function Mle(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(n,e,r)=>e.toUpperCase()+r)}function Ple(t,n){const e=ce.toCamelCase(" "+n);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+e,{value:function(i,o,a){return this[r].call(this,n,i,o,a)},configurable:!0})})}class Vy{constructor(n){n&&this.set(n)}set(n,e,r){const i=this;function o(s,u,l){const c=yd(u);if(!c)throw new Error("header name must be a non-empty string");const d=ce.findKey(i,c);(!d||i[d]===void 0||l===!0||l===void 0&&i[d]!==!1)&&(i[d||u]=xm(s))}const a=(s,u)=>ce.forEach(s,(l,c)=>o(l,c,u));return ce.isPlainObject(n)||n instanceof this.constructor?a(n,e):ce.isString(n)&&(n=n.trim())&&!Dle(n)?a(Ale(n),e):n!=null&&o(e,n,r),this}get(n,e){if(n=yd(n),n){const r=ce.findKey(this,n);if(r){const i=this[r];if(!e)return i;if(e===!0)return Ole(i);if(ce.isFunction(e))return e.call(this,i,r);if(ce.isRegExp(e))return e.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(n,e){if(n=yd(n),n){const r=ce.findKey(this,n);return!!(r&&this[r]!==void 0&&(!e||_1(this,this[r],r,e)))}return!1}delete(n,e){const r=this;let i=!1;function o(a){if(a=yd(a),a){const s=ce.findKey(r,a);s&&(!e||_1(r,r[s],s,e))&&(delete r[s],i=!0)}}return ce.isArray(n)?n.forEach(o):o(n),i}clear(n){const e=Object.keys(this);let r=e.length,i=!1;for(;r--;){const o=e[r];(!n||_1(this,this[o],o,n,!0))&&(delete this[o],i=!0)}return i}normalize(n){const e=this,r={};return ce.forEach(this,(i,o)=>{const a=ce.findKey(r,o);if(a){e[a]=xm(i),delete e[o];return}const s=n?Mle(o):String(o).trim();s!==o&&delete e[o],e[s]=xm(i),r[s]=!0}),this}concat(...n){return this.constructor.concat(this,...n)}toJSON(n){const e=Object.create(null);return ce.forEach(this,(r,i)=>{r!=null&&r!==!1&&(e[i]=n&&ce.isArray(r)?r.join(", "):r)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([n,e])=>n+": "+e).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(n){return n instanceof this?n:new this(n)}static concat(n,...e){const r=new this(n);return e.forEach(i=>r.set(i)),r}static accessor(n){const r=(this[mI]=this[mI]={accessors:{}}).accessors,i=this.prototype;function o(a){const s=yd(a);r[s]||(Ple(i,a),r[s]=!0)}return ce.isArray(n)?n.forEach(o):o(n),this}}Vy.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ce.reduceDescriptors(Vy.prototype,({value:t},n)=>{let e=n[0].toUpperCase()+n.slice(1);return{get:()=>t,set(r){this[e]=r}}});ce.freezeMethods(Vy);const Xo=Vy;function A1(t,n){const e=this||K2,r=n||e,i=Xo.from(r.headers);let o=r.data;return ce.forEach(t,function(s){o=s.call(e,o,i.normalize(),n?n.status:void 0)}),i.normalize(),o}function wB(t){return!!(t&&t.__CANCEL__)}function Lp(t,n,e){vt.call(this,t??"canceled",vt.ERR_CANCELED,n,e),this.name="CanceledError"}ce.inherits(Lp,vt,{__CANCEL__:!0});function Lle(t,n,e){const r=e.config.validateStatus;!e.status||!r||r(e.status)?t(e):n(new vt("Request failed with status code "+e.status,[vt.ERR_BAD_REQUEST,vt.ERR_BAD_RESPONSE][Math.floor(e.status/100)-4],e.config,e.request,e))}const Fle=co.hasStandardBrowserEnv?{write(t,n,e,r,i,o){const a=[t+"="+encodeURIComponent(n)];ce.isNumber(e)&&a.push("expires="+new Date(e).toGMTString()),ce.isString(r)&&a.push("path="+r),ce.isString(i)&&a.push("domain="+i),o===!0&&a.push("secure"),document.cookie=a.join("; ")},read(t){const n=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function zle(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Ble(t,n){return n?t.replace(/\/?\/$/,"")+"/"+n.replace(/^\/+/,""):t}function xB(t,n){return t&&!zle(n)?Ble(t,n):n}const jle=co.hasStandardBrowserEnv?function(){const n=/(msie|trident)/i.test(navigator.userAgent),e=document.createElement("a");let r;function i(o){let a=o;return n&&(e.setAttribute("href",a),a=e.href),e.setAttribute("href",a),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:e.pathname.charAt(0)==="/"?e.pathname:"/"+e.pathname}}return r=i(window.location.href),function(a){const s=ce.isString(a)?i(a):a;return s.protocol===r.protocol&&s.host===r.host}}():function(){return function(){return!0}}();function Vle(t){const n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return n&&n[1]||""}function $le(t,n){t=t||10;const e=new Array(t),r=new Array(t);let i=0,o=0,a;return n=n!==void 0?n:1e3,function(u){const l=Date.now(),c=r[o];a||(a=l),e[i]=u,r[i]=l;let d=o,f=0;for(;d!==i;)f+=e[d++],d=d%t;if(i=(i+1)%t,i===o&&(o=(o+1)%t),l-a<n)return;const p=c&&l-c;return p?Math.round(f*1e3/p):void 0}}function vI(t,n){let e=0;const r=$le(50,250);return i=>{const o=i.loaded,a=i.lengthComputable?i.total:void 0,s=o-e,u=r(s),l=o<=a;e=o;const c={loaded:o,total:a,progress:a?o/a:void 0,bytes:s,rate:u||void 0,estimated:u&&a&&l?(a-o)/u:void 0,event:i};c[n?"download":"upload"]=!0,t(c)}}const Ule=typeof XMLHttpRequest<"u",Wle=Ule&&function(t){return new Promise(function(e,r){let i=t.data;const o=Xo.from(t.headers).normalize();let{responseType:a,withXSRFToken:s}=t,u;function l(){t.cancelToken&&t.cancelToken.unsubscribe(u),t.signal&&t.signal.removeEventListener("abort",u)}let c;if(ce.isFormData(i)){if(co.hasStandardBrowserEnv||co.hasStandardBrowserWebWorkerEnv)o.setContentType(!1);else if((c=o.getContentType())!==!1){const[v,...g]=c?c.split(";").map(m=>m.trim()).filter(Boolean):[];o.setContentType([v||"multipart/form-data",...g].join("; "))}}let d=new XMLHttpRequest;if(t.auth){const v=t.auth.username||"",g=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";o.set("Authorization","Basic "+btoa(v+":"+g))}const f=xB(t.baseURL,t.url);d.open(t.method.toUpperCase(),vB(f,t.params,t.paramsSerializer),!0),d.timeout=t.timeout;function p(){if(!d)return;const v=Xo.from("getAllResponseHeaders"in d&&d.getAllResponseHeaders()),m={data:!a||a==="text"||a==="json"?d.responseText:d.response,status:d.status,statusText:d.statusText,headers:v,config:t,request:d};Lle(function(b){e(b),l()},function(b){r(b),l()},m),d=null}if("onloadend"in d?d.onloadend=p:d.onreadystatechange=function(){!d||d.readyState!==4||d.status===0&&!(d.responseURL&&d.responseURL.indexOf("file:")===0)||setTimeout(p)},d.onabort=function(){d&&(r(new vt("Request aborted",vt.ECONNABORTED,t,d)),d=null)},d.onerror=function(){r(new vt("Network Error",vt.ERR_NETWORK,t,d)),d=null},d.ontimeout=function(){let g=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const m=t.transitional||gB;t.timeoutErrorMessage&&(g=t.timeoutErrorMessage),r(new vt(g,m.clarifyTimeoutError?vt.ETIMEDOUT:vt.ECONNABORTED,t,d)),d=null},co.hasStandardBrowserEnv&&(s&&ce.isFunction(s)&&(s=s(t)),s||s!==!1&&jle(f))){const v=t.xsrfHeaderName&&t.xsrfCookieName&&Fle.read(t.xsrfCookieName);v&&o.set(t.xsrfHeaderName,v)}i===void 0&&o.setContentType(null),"setRequestHeader"in d&&ce.forEach(o.toJSON(),function(g,m){d.setRequestHeader(m,g)}),ce.isUndefined(t.withCredentials)||(d.withCredentials=!!t.withCredentials),a&&a!=="json"&&(d.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&d.addEventListener("progress",vI(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&d.upload&&d.upload.addEventListener("progress",vI(t.onUploadProgress)),(t.cancelToken||t.signal)&&(u=v=>{d&&(r(!v||v.type?new Lp(null,t,d):v),d.abort(),d=null)},t.cancelToken&&t.cancelToken.subscribe(u),t.signal&&(t.signal.aborted?u():t.signal.addEventListener("abort",u)));const h=Vle(f);if(h&&co.protocols.indexOf(h)===-1){r(new vt("Unsupported protocol "+h+":",vt.ERR_BAD_REQUEST,t));return}d.send(i||null)})},ux={http:mle,xhr:Wle};ce.forEach(ux,(t,n)=>{if(t){try{Object.defineProperty(t,"name",{value:n})}catch{}Object.defineProperty(t,"adapterName",{value:n})}});const gI=t=>`- ${t}`,Hle=t=>ce.isFunction(t)||t===null||t===!1,SB={getAdapter:t=>{t=ce.isArray(t)?t:[t];const{length:n}=t;let e,r;const i={};for(let o=0;o<n;o++){e=t[o];let a;if(r=e,!Hle(e)&&(r=ux[(a=String(e)).toLowerCase()],r===void 0))throw new vt(`Unknown adapter '${a}'`);if(r)break;i[a||"#"+o]=r}if(!r){const o=Object.entries(i).map(([s,u])=>`adapter ${s} `+(u===!1?"is not supported by the environment":"is not available in the build"));let a=n?o.length>1?`since :
`+o.map(gI).join(`
`):" "+gI(o[0]):"as no adapter specified";throw new vt("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return r},adapters:ux};function O1(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Lp(null,t)}function yI(t){return O1(t),t.headers=Xo.from(t.headers),t.data=A1.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),SB.getAdapter(t.adapter||K2.adapter)(t).then(function(r){return O1(t),r.data=A1.call(t,t.transformResponse,r),r.headers=Xo.from(r.headers),r},function(r){return wB(r)||(O1(t),r&&r.response&&(r.response.data=A1.call(t,t.transformResponse,r.response),r.response.headers=Xo.from(r.response.headers))),Promise.reject(r)})}const bI=t=>t instanceof Xo?t.toJSON():t;function gc(t,n){n=n||{};const e={};function r(l,c,d){return ce.isPlainObject(l)&&ce.isPlainObject(c)?ce.merge.call({caseless:d},l,c):ce.isPlainObject(c)?ce.merge({},c):ce.isArray(c)?c.slice():c}function i(l,c,d){if(ce.isUndefined(c)){if(!ce.isUndefined(l))return r(void 0,l,d)}else return r(l,c,d)}function o(l,c){if(!ce.isUndefined(c))return r(void 0,c)}function a(l,c){if(ce.isUndefined(c)){if(!ce.isUndefined(l))return r(void 0,l)}else return r(void 0,c)}function s(l,c,d){if(d in n)return r(l,c);if(d in t)return r(void 0,l)}const u={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s,headers:(l,c)=>i(bI(l),bI(c),!0)};return ce.forEach(Object.keys(Object.assign({},t,n)),function(c){const d=u[c]||i,f=d(t[c],n[c],c);ce.isUndefined(f)&&d!==s||(e[c]=f)}),e}const EB="1.6.7",X2={};["object","boolean","number","function","string","symbol"].forEach((t,n)=>{X2[t]=function(r){return typeof r===t||"a"+(n<1?"n ":" ")+t}});const wI={};X2.transitional=function(n,e,r){function i(o,a){return"[Axios v"+EB+"] Transitional option '"+o+"'"+a+(r?". "+r:"")}return(o,a,s)=>{if(n===!1)throw new vt(i(a," has been removed"+(e?" in "+e:"")),vt.ERR_DEPRECATED);return e&&!wI[a]&&(wI[a]=!0,console.warn(i(a," has been deprecated since v"+e+" and will be removed in the near future"))),n?n(o,a,s):!0}};function Gle(t,n,e){if(typeof t!="object")throw new vt("options must be an object",vt.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const o=r[i],a=n[o];if(a){const s=t[o],u=s===void 0||a(s,o,t);if(u!==!0)throw new vt("option "+o+" must be "+u,vt.ERR_BAD_OPTION_VALUE);continue}if(e!==!0)throw new vt("Unknown option "+o,vt.ERR_BAD_OPTION)}}const lx={assertOptions:Gle,validators:X2},ya=lx.validators;class Dv{constructor(n){this.defaults=n,this.interceptors={request:new hI,response:new hI}}async request(n,e){try{return await this._request(n,e)}catch(r){if(r instanceof Error){let i;Error.captureStackTrace?Error.captureStackTrace(i={}):i=new Error;const o=i.stack?i.stack.replace(/^.+\n/,""):"";r.stack?o&&!String(r.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+o):r.stack=o}throw r}}_request(n,e){typeof n=="string"?(e=e||{},e.url=n):e=n||{},e=gc(this.defaults,e);const{transitional:r,paramsSerializer:i,headers:o}=e;r!==void 0&&lx.assertOptions(r,{silentJSONParsing:ya.transitional(ya.boolean),forcedJSONParsing:ya.transitional(ya.boolean),clarifyTimeoutError:ya.transitional(ya.boolean)},!1),i!=null&&(ce.isFunction(i)?e.paramsSerializer={serialize:i}:lx.assertOptions(i,{encode:ya.function,serialize:ya.function},!0)),e.method=(e.method||this.defaults.method||"get").toLowerCase();let a=o&&ce.merge(o.common,o[e.method]);o&&ce.forEach(["delete","get","head","post","put","patch","common"],h=>{delete o[h]}),e.headers=Xo.concat(a,o);const s=[];let u=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(e)===!1||(u=u&&v.synchronous,s.unshift(v.fulfilled,v.rejected))});const l=[];this.interceptors.response.forEach(function(v){l.push(v.fulfilled,v.rejected)});let c,d=0,f;if(!u){const h=[yI.bind(this),void 0];for(h.unshift.apply(h,s),h.push.apply(h,l),f=h.length,c=Promise.resolve(e);d<f;)c=c.then(h[d++],h[d++]);return c}f=s.length;let p=e;for(d=0;d<f;){const h=s[d++],v=s[d++];try{p=h(p)}catch(g){v.call(this,g);break}}try{c=yI.call(this,p)}catch(h){return Promise.reject(h)}for(d=0,f=l.length;d<f;)c=c.then(l[d++],l[d++]);return c}getUri(n){n=gc(this.defaults,n);const e=xB(n.baseURL,n.url);return vB(e,n.params,n.paramsSerializer)}}ce.forEach(["delete","get","head","options"],function(n){Dv.prototype[n]=function(e,r){return this.request(gc(r||{},{method:n,url:e,data:(r||{}).data}))}});ce.forEach(["post","put","patch"],function(n){function e(r){return function(o,a,s){return this.request(gc(s||{},{method:n,headers:r?{"Content-Type":"multipart/form-data"}:{},url:o,data:a}))}}Dv.prototype[n]=e(),Dv.prototype[n+"Form"]=e(!0)});const Sm=Dv;class Y2{constructor(n){if(typeof n!="function")throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(o){e=o});const r=this;this.promise.then(i=>{if(!r._listeners)return;let o=r._listeners.length;for(;o-- >0;)r._listeners[o](i);r._listeners=null}),this.promise.then=i=>{let o;const a=new Promise(s=>{r.subscribe(s),o=s}).then(i);return a.cancel=function(){r.unsubscribe(o)},a},n(function(o,a,s){r.reason||(r.reason=new Lp(o,a,s),e(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]}unsubscribe(n){if(!this._listeners)return;const e=this._listeners.indexOf(n);e!==-1&&this._listeners.splice(e,1)}static source(){let n;return{token:new Y2(function(i){n=i}),cancel:n}}}const qle=Y2;function Kle(t){return function(e){return t.apply(null,e)}}function Xle(t){return ce.isObject(t)&&t.isAxiosError===!0}const cx={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(cx).forEach(([t,n])=>{cx[n]=t});const Yle=cx;function CB(t){const n=new Sm(t),e=iB(Sm.prototype.request,n);return ce.extend(e,Sm.prototype,n,{allOwnKeys:!0}),ce.extend(e,n,null,{allOwnKeys:!0}),e.create=function(i){return CB(gc(t,i))},e}const Nt=CB(K2);Nt.Axios=Sm;Nt.CanceledError=Lp;Nt.CancelToken=qle;Nt.isCancel=wB;Nt.VERSION=EB;Nt.toFormData=jy;Nt.AxiosError=vt;Nt.Cancel=Nt.CanceledError;Nt.all=function(n){return Promise.all(n)};Nt.spread=Kle;Nt.isAxiosError=Xle;Nt.mergeConfig=gc;Nt.AxiosHeaders=Xo;Nt.formToJSON=t=>bB(ce.isHTMLForm(t)?new FormData(t):t);Nt.getAdapter=SB.getAdapter;Nt.HttpStatusCode=Yle;Nt.default=Nt;const Jle=()=>{const t=Si();jr();const{content:n,position:e}=t.state.data,{lat:r,lng:i}=t.state.data.position,o="87246d75e1ce26e1392a087b3d1d88c5",a=lo(Jse);console.log(n,e);const[s,u]=H.useState([]),[l,c]=H.useState([]),[d,f]=H.useState(""),[p,h]=H.useState(""),v=async()=>{try{const g=await Nt.get(`https://api.openweathermap.org/data/2.5/forecast?lat=${r}&lon=${i}&appid=${o}&units=metric&lang=kr`);f(new Date(g.data.city.sunrise*1e3)),h(new Date(g.data.city.sunset*1e3)),c(g.data.list)}catch(g){console.log(g)}finally{a(t.pathname)}};return H.useEffect(()=>{v()},[]),l.length?T.jsxs("div",{className:"FishMapDetailPage",children:[T.jsx(fa,{prevPath:"/fish/map"}),T.jsxs("div",{className:"body",children:[T.jsxs("div",{className:"fishing-info",children:[T.jsxs("div",{className:"fishing-name",children:[T.jsx("h2",{children:n.name}),T.jsx("div",{children:n.type})]}),T.jsx("div",{children:n.addr})]}),T.jsx(Mue,{weatherData:l,sunrise:d,sunset:p}),T.jsxs("div",{className:"fish-species",children:[T.jsxs("h3",{className:"name",children:[n.name,"의 주요어종"]}),T.jsx("div",{className:"wrapper",children:n.fishes.map(g=>T.jsxs("div",{children:[T.jsx("img",{src:"https://img.freepik.com/premium-photo/a-colorful-fish-with-a-white-and-blue-tail_899894-16102.jpg"},g),T.jsx("div",{children:g})]},g))})]}),T.jsxs("div",{className:"fishing-reviews",children:[T.jsxs("h3",{className:"name",children:[n.name,"의 리뷰"]}),T.jsx("div",{className:"wrapper",children:s.length?s.map(g=>T.jsxs("div",{children:[T.jsx("img",{src:"https://cdn.iconsumer.or.kr/news/photo/201806/7349_8772_1719.jpg"},g),T.jsx("div",{children:g})]})):T.jsx("div",{className:"none-data",children:"정보를 준비 중입니다."})})]})]})]}):T.jsx(Tp,{})};/*!
 * Cropper.js v1.6.1
 * https://fengyuanchen.github.io/cropperjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2023-09-17T03:44:19.860Z
 */function xI(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,r)}return e}function RB(t){for(var n=1;n<arguments.length;n++){var e=arguments[n]!=null?arguments[n]:{};n%2?xI(Object(e),!0).forEach(function(r){ece(t,r,e[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):xI(Object(e)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))})}return t}function dx(t){"@babel/helpers - typeof";return dx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},dx(t)}function Qle(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function SI(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,NB(r.key),r)}}function Zle(t,n,e){return n&&SI(t.prototype,n),e&&SI(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function ece(t,n,e){return n=NB(n),n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function TB(t){return tce(t)||nce(t)||rce(t)||ice()}function tce(t){if(Array.isArray(t))return fx(t)}function nce(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function rce(t,n){if(t){if(typeof t=="string")return fx(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return fx(t,n)}}function fx(t,n){(n==null||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function ice(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oce(t,n){if(typeof t!="object"||t===null)return t;var e=t[Symbol.toPrimitive];if(e!==void 0){var r=e.call(t,n||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(t)}function NB(t){var n=oce(t,"string");return typeof n=="symbol"?n:String(n)}var $y=typeof window<"u"&&typeof window.document<"u",So=$y?window:{},J2=$y&&So.document.documentElement?"ontouchstart"in So.document.documentElement:!1,Q2=$y?"PointerEvent"in So:!1,Xt="cropper",Z2="all",kB="crop",IB="move",_B="zoom",Ns="e",ks="w",Ju="s",ba="n",bd="ne",wd="nw",xd="se",Sd="sw",px="".concat(Xt,"-crop"),EI="".concat(Xt,"-disabled"),Nr="".concat(Xt,"-hidden"),CI="".concat(Xt,"-hide"),ace="".concat(Xt,"-invisible"),Mv="".concat(Xt,"-modal"),hx="".concat(Xt,"-move"),Hf="".concat(Xt,"Action"),Lh="".concat(Xt,"Preview"),eR="crop",AB="move",OB="none",mx="crop",vx="cropend",gx="cropmove",yx="cropstart",RI="dblclick",sce=J2?"touchstart":"mousedown",uce=J2?"touchmove":"mousemove",lce=J2?"touchend touchcancel":"mouseup",TI=Q2?"pointerdown":sce,NI=Q2?"pointermove":uce,kI=Q2?"pointerup pointercancel":lce,II="ready",_I="resize",AI="wheel",bx="zoom",OI="image/jpeg",cce=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,dce=/^data:/,fce=/^data:image\/jpeg;base64,/,pce=/^img|canvas$/i,DB=200,MB=100,DI={viewMode:0,dragMode:eR,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:DB,minContainerHeight:MB,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},hce='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',mce=Number.isNaN||So.isNaN;function ct(t){return typeof t=="number"&&!mce(t)}var MI=function(n){return n>0&&n<1/0};function D1(t){return typeof t>"u"}function bu(t){return dx(t)==="object"&&t!==null}var vce=Object.prototype.hasOwnProperty;function wl(t){if(!bu(t))return!1;try{var n=t.constructor,e=n.prototype;return n&&e&&vce.call(e,"isPrototypeOf")}catch{return!1}}function Rr(t){return typeof t=="function"}var gce=Array.prototype.slice;function PB(t){return Array.from?Array.from(t):gce.call(t)}function Sn(t,n){return t&&Rr(n)&&(Array.isArray(t)||ct(t.length)?PB(t).forEach(function(e,r){n.call(t,e,r,t)}):bu(t)&&Object.keys(t).forEach(function(e){n.call(t,t[e],e,t)})),t}var Yt=Object.assign||function(n){for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];return bu(n)&&r.length>0&&r.forEach(function(o){bu(o)&&Object.keys(o).forEach(function(a){n[a]=o[a]})}),n},yce=/\.\d*(?:0|9){12}\d*$/;function Fl(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return yce.test(t)?Math.round(t*n)/n:t}var bce=/^width|height|left|top|marginLeft|marginTop$/;function Ba(t,n){var e=t.style;Sn(n,function(r,i){bce.test(i)&&ct(r)&&(r="".concat(r,"px")),e[i]=r})}function wce(t,n){return t.classList?t.classList.contains(n):t.className.indexOf(n)>-1}function Pn(t,n){if(n){if(ct(t.length)){Sn(t,function(r){Pn(r,n)});return}if(t.classList){t.classList.add(n);return}var e=t.className.trim();e?e.indexOf(n)<0&&(t.className="".concat(e," ").concat(n)):t.className=n}}function yo(t,n){if(n){if(ct(t.length)){Sn(t,function(e){yo(e,n)});return}if(t.classList){t.classList.remove(n);return}t.className.indexOf(n)>=0&&(t.className=t.className.replace(n,""))}}function xl(t,n,e){if(n){if(ct(t.length)){Sn(t,function(r){xl(r,n,e)});return}e?Pn(t,n):yo(t,n)}}var xce=/([a-z\d])([A-Z])/g;function tR(t){return t.replace(xce,"$1-$2").toLowerCase()}function wx(t,n){return bu(t[n])?t[n]:t.dataset?t.dataset[n]:t.getAttribute("data-".concat(tR(n)))}function Gf(t,n,e){bu(e)?t[n]=e:t.dataset?t.dataset[n]=e:t.setAttribute("data-".concat(tR(n)),e)}function Sce(t,n){if(bu(t[n]))try{delete t[n]}catch{t[n]=void 0}else if(t.dataset)try{delete t.dataset[n]}catch{t.dataset[n]=void 0}else t.removeAttribute("data-".concat(tR(n)))}var LB=/\s\s*/,FB=function(){var t=!1;if($y){var n=!1,e=function(){},r=Object.defineProperty({},"once",{get:function(){return t=!0,n},set:function(o){n=o}});So.addEventListener("test",e,r),So.removeEventListener("test",e,r)}return t}();function Ni(t,n,e){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},i=e;n.trim().split(LB).forEach(function(o){if(!FB){var a=t.listeners;a&&a[o]&&a[o][e]&&(i=a[o][e],delete a[o][e],Object.keys(a[o]).length===0&&delete a[o],Object.keys(a).length===0&&delete t.listeners)}t.removeEventListener(o,i,r)})}function fi(t,n,e){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},i=e;n.trim().split(LB).forEach(function(o){if(r.once&&!FB){var a=t.listeners,s=a===void 0?{}:a;i=function(){delete s[o][e],t.removeEventListener(o,i,r);for(var l=arguments.length,c=new Array(l),d=0;d<l;d++)c[d]=arguments[d];e.apply(t,c)},s[o]||(s[o]={}),s[o][e]&&t.removeEventListener(o,s[o][e],r),s[o][e]=i,t.listeners=s}t.addEventListener(o,i,r)})}function zl(t,n,e){var r;return Rr(Event)&&Rr(CustomEvent)?r=new CustomEvent(n,{detail:e,bubbles:!0,cancelable:!0}):(r=document.createEvent("CustomEvent"),r.initCustomEvent(n,!0,!0,e)),t.dispatchEvent(r)}function zB(t){var n=t.getBoundingClientRect();return{left:n.left+(window.pageXOffset-document.documentElement.clientLeft),top:n.top+(window.pageYOffset-document.documentElement.clientTop)}}var M1=So.location,Ece=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function PI(t){var n=t.match(Ece);return n!==null&&(n[1]!==M1.protocol||n[2]!==M1.hostname||n[3]!==M1.port)}function LI(t){var n="timestamp=".concat(new Date().getTime());return t+(t.indexOf("?")===-1?"?":"&")+n}function rf(t){var n=t.rotate,e=t.scaleX,r=t.scaleY,i=t.translateX,o=t.translateY,a=[];ct(i)&&i!==0&&a.push("translateX(".concat(i,"px)")),ct(o)&&o!==0&&a.push("translateY(".concat(o,"px)")),ct(n)&&n!==0&&a.push("rotate(".concat(n,"deg)")),ct(e)&&e!==1&&a.push("scaleX(".concat(e,")")),ct(r)&&r!==1&&a.push("scaleY(".concat(r,")"));var s=a.length?a.join(" "):"none";return{WebkitTransform:s,msTransform:s,transform:s}}function Cce(t){var n=RB({},t),e=0;return Sn(t,function(r,i){delete n[i],Sn(n,function(o){var a=Math.abs(r.startX-o.startX),s=Math.abs(r.startY-o.startY),u=Math.abs(r.endX-o.endX),l=Math.abs(r.endY-o.endY),c=Math.sqrt(a*a+s*s),d=Math.sqrt(u*u+l*l),f=(d-c)/c;Math.abs(f)>Math.abs(e)&&(e=f)})}),e}function Fh(t,n){var e=t.pageX,r=t.pageY,i={endX:e,endY:r};return n?i:RB({startX:e,startY:r},i)}function Rce(t){var n=0,e=0,r=0;return Sn(t,function(i){var o=i.startX,a=i.startY;n+=o,e+=a,r+=1}),n/=r,e/=r,{pageX:n,pageY:e}}function ja(t){var n=t.aspectRatio,e=t.height,r=t.width,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"contain",o=MI(r),a=MI(e);if(o&&a){var s=e*n;i==="contain"&&s>r||i==="cover"&&s<r?e=r/n:r=e*n}else o?e=r/n:a&&(r=e*n);return{width:r,height:e}}function Tce(t){var n=t.width,e=t.height,r=t.degree;if(r=Math.abs(r)%180,r===90)return{width:e,height:n};var i=r%90*Math.PI/180,o=Math.sin(i),a=Math.cos(i),s=n*a+e*o,u=n*o+e*a;return r>90?{width:u,height:s}:{width:s,height:u}}function Nce(t,n,e,r){var i=n.aspectRatio,o=n.naturalWidth,a=n.naturalHeight,s=n.rotate,u=s===void 0?0:s,l=n.scaleX,c=l===void 0?1:l,d=n.scaleY,f=d===void 0?1:d,p=e.aspectRatio,h=e.naturalWidth,v=e.naturalHeight,g=r.fillColor,m=g===void 0?"transparent":g,y=r.imageSmoothingEnabled,b=y===void 0?!0:y,w=r.imageSmoothingQuality,x=w===void 0?"low":w,C=r.maxWidth,E=C===void 0?1/0:C,S=r.maxHeight,N=S===void 0?1/0:S,k=r.minWidth,M=k===void 0?0:k,D=r.minHeight,R=D===void 0?0:D,O=document.createElement("canvas"),P=O.getContext("2d"),A=ja({aspectRatio:p,width:E,height:N}),I=ja({aspectRatio:p,width:M,height:R},"cover"),_=Math.min(A.width,Math.max(I.width,h)),F=Math.min(A.height,Math.max(I.height,v)),L=ja({aspectRatio:i,width:E,height:N}),W=ja({aspectRatio:i,width:M,height:R},"cover"),B=Math.min(L.width,Math.max(W.width,o)),q=Math.min(L.height,Math.max(W.height,a)),G=[-B/2,-q/2,B,q];return O.width=Fl(_),O.height=Fl(F),P.fillStyle=m,P.fillRect(0,0,_,F),P.save(),P.translate(_/2,F/2),P.rotate(u*Math.PI/180),P.scale(c,f),P.imageSmoothingEnabled=b,P.imageSmoothingQuality=x,P.drawImage.apply(P,[t].concat(TB(G.map(function(re){return Math.floor(Fl(re))})))),P.restore(),O}var BB=String.fromCharCode;function kce(t,n,e){var r="";e+=n;for(var i=n;i<e;i+=1)r+=BB(t.getUint8(i));return r}var Ice=/^data:.*,/;function _ce(t){var n=t.replace(Ice,""),e=atob(n),r=new ArrayBuffer(e.length),i=new Uint8Array(r);return Sn(i,function(o,a){i[a]=e.charCodeAt(a)}),r}function Ace(t,n){for(var e=[],r=8192,i=new Uint8Array(t);i.length>0;)e.push(BB.apply(null,PB(i.subarray(0,r)))),i=i.subarray(r);return"data:".concat(n,";base64,").concat(btoa(e.join("")))}function Oce(t){var n=new DataView(t),e;try{var r,i,o;if(n.getUint8(0)===255&&n.getUint8(1)===216)for(var a=n.byteLength,s=2;s+1<a;){if(n.getUint8(s)===255&&n.getUint8(s+1)===225){i=s;break}s+=1}if(i){var u=i+4,l=i+10;if(kce(n,u,4)==="Exif"){var c=n.getUint16(l);if(r=c===18761,(r||c===19789)&&n.getUint16(l+2,r)===42){var d=n.getUint32(l+4,r);d>=8&&(o=l+d)}}}if(o){var f=n.getUint16(o,r),p,h;for(h=0;h<f;h+=1)if(p=o+h*12+2,n.getUint16(p,r)===274){p+=8,e=n.getUint16(p,r),n.setUint16(p,1,r);break}}}catch{e=1}return e}function Dce(t){var n=0,e=1,r=1;switch(t){case 2:e=-1;break;case 3:n=-180;break;case 4:r=-1;break;case 5:n=90,r=-1;break;case 6:n=90;break;case 7:n=90,e=-1;break;case 8:n=-90;break}return{rotate:n,scaleX:e,scaleY:r}}var Mce={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var n=this.element,e=this.options,r=this.container,i=this.cropper,o=Number(e.minContainerWidth),a=Number(e.minContainerHeight);Pn(i,Nr),yo(n,Nr);var s={width:Math.max(r.offsetWidth,o>=0?o:DB),height:Math.max(r.offsetHeight,a>=0?a:MB)};this.containerData=s,Ba(i,{width:s.width,height:s.height}),Pn(n,Nr),yo(i,Nr)},initCanvas:function(){var n=this.containerData,e=this.imageData,r=this.options.viewMode,i=Math.abs(e.rotate)%180===90,o=i?e.naturalHeight:e.naturalWidth,a=i?e.naturalWidth:e.naturalHeight,s=o/a,u=n.width,l=n.height;n.height*s>n.width?r===3?u=n.height*s:l=n.width/s:r===3?l=n.width/s:u=n.height*s;var c={aspectRatio:s,naturalWidth:o,naturalHeight:a,width:u,height:l};this.canvasData=c,this.limited=r===1||r===2,this.limitCanvas(!0,!0),c.width=Math.min(Math.max(c.width,c.minWidth),c.maxWidth),c.height=Math.min(Math.max(c.height,c.minHeight),c.maxHeight),c.left=(n.width-c.width)/2,c.top=(n.height-c.height)/2,c.oldLeft=c.left,c.oldTop=c.top,this.initialCanvasData=Yt({},c)},limitCanvas:function(n,e){var r=this.options,i=this.containerData,o=this.canvasData,a=this.cropBoxData,s=r.viewMode,u=o.aspectRatio,l=this.cropped&&a;if(n){var c=Number(r.minCanvasWidth)||0,d=Number(r.minCanvasHeight)||0;s>1?(c=Math.max(c,i.width),d=Math.max(d,i.height),s===3&&(d*u>c?c=d*u:d=c/u)):s>0&&(c?c=Math.max(c,l?a.width:0):d?d=Math.max(d,l?a.height:0):l&&(c=a.width,d=a.height,d*u>c?c=d*u:d=c/u));var f=ja({aspectRatio:u,width:c,height:d});c=f.width,d=f.height,o.minWidth=c,o.minHeight=d,o.maxWidth=1/0,o.maxHeight=1/0}if(e)if(s>(l?0:1)){var p=i.width-o.width,h=i.height-o.height;o.minLeft=Math.min(0,p),o.minTop=Math.min(0,h),o.maxLeft=Math.max(0,p),o.maxTop=Math.max(0,h),l&&this.limited&&(o.minLeft=Math.min(a.left,a.left+(a.width-o.width)),o.minTop=Math.min(a.top,a.top+(a.height-o.height)),o.maxLeft=a.left,o.maxTop=a.top,s===2&&(o.width>=i.width&&(o.minLeft=Math.min(0,p),o.maxLeft=Math.max(0,p)),o.height>=i.height&&(o.minTop=Math.min(0,h),o.maxTop=Math.max(0,h))))}else o.minLeft=-o.width,o.minTop=-o.height,o.maxLeft=i.width,o.maxTop=i.height},renderCanvas:function(n,e){var r=this.canvasData,i=this.imageData;if(e){var o=Tce({width:i.naturalWidth*Math.abs(i.scaleX||1),height:i.naturalHeight*Math.abs(i.scaleY||1),degree:i.rotate||0}),a=o.width,s=o.height,u=r.width*(a/r.naturalWidth),l=r.height*(s/r.naturalHeight);r.left-=(u-r.width)/2,r.top-=(l-r.height)/2,r.width=u,r.height=l,r.aspectRatio=a/s,r.naturalWidth=a,r.naturalHeight=s,this.limitCanvas(!0,!1)}(r.width>r.maxWidth||r.width<r.minWidth)&&(r.left=r.oldLeft),(r.height>r.maxHeight||r.height<r.minHeight)&&(r.top=r.oldTop),r.width=Math.min(Math.max(r.width,r.minWidth),r.maxWidth),r.height=Math.min(Math.max(r.height,r.minHeight),r.maxHeight),this.limitCanvas(!1,!0),r.left=Math.min(Math.max(r.left,r.minLeft),r.maxLeft),r.top=Math.min(Math.max(r.top,r.minTop),r.maxTop),r.oldLeft=r.left,r.oldTop=r.top,Ba(this.canvas,Yt({width:r.width,height:r.height},rf({translateX:r.left,translateY:r.top}))),this.renderImage(n),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(n){var e=this.canvasData,r=this.imageData,i=r.naturalWidth*(e.width/e.naturalWidth),o=r.naturalHeight*(e.height/e.naturalHeight);Yt(r,{width:i,height:o,left:(e.width-i)/2,top:(e.height-o)/2}),Ba(this.image,Yt({width:r.width,height:r.height},rf(Yt({translateX:r.left,translateY:r.top},r)))),n&&this.output()},initCropBox:function(){var n=this.options,e=this.canvasData,r=n.aspectRatio||n.initialAspectRatio,i=Number(n.autoCropArea)||.8,o={width:e.width,height:e.height};r&&(e.height*r>e.width?o.height=o.width/r:o.width=o.height*r),this.cropBoxData=o,this.limitCropBox(!0,!0),o.width=Math.min(Math.max(o.width,o.minWidth),o.maxWidth),o.height=Math.min(Math.max(o.height,o.minHeight),o.maxHeight),o.width=Math.max(o.minWidth,o.width*i),o.height=Math.max(o.minHeight,o.height*i),o.left=e.left+(e.width-o.width)/2,o.top=e.top+(e.height-o.height)/2,o.oldLeft=o.left,o.oldTop=o.top,this.initialCropBoxData=Yt({},o)},limitCropBox:function(n,e){var r=this.options,i=this.containerData,o=this.canvasData,a=this.cropBoxData,s=this.limited,u=r.aspectRatio;if(n){var l=Number(r.minCropBoxWidth)||0,c=Number(r.minCropBoxHeight)||0,d=s?Math.min(i.width,o.width,o.width+o.left,i.width-o.left):i.width,f=s?Math.min(i.height,o.height,o.height+o.top,i.height-o.top):i.height;l=Math.min(l,i.width),c=Math.min(c,i.height),u&&(l&&c?c*u>l?c=l/u:l=c*u:l?c=l/u:c&&(l=c*u),f*u>d?f=d/u:d=f*u),a.minWidth=Math.min(l,d),a.minHeight=Math.min(c,f),a.maxWidth=d,a.maxHeight=f}e&&(s?(a.minLeft=Math.max(0,o.left),a.minTop=Math.max(0,o.top),a.maxLeft=Math.min(i.width,o.left+o.width)-a.width,a.maxTop=Math.min(i.height,o.top+o.height)-a.height):(a.minLeft=0,a.minTop=0,a.maxLeft=i.width-a.width,a.maxTop=i.height-a.height))},renderCropBox:function(){var n=this.options,e=this.containerData,r=this.cropBoxData;(r.width>r.maxWidth||r.width<r.minWidth)&&(r.left=r.oldLeft),(r.height>r.maxHeight||r.height<r.minHeight)&&(r.top=r.oldTop),r.width=Math.min(Math.max(r.width,r.minWidth),r.maxWidth),r.height=Math.min(Math.max(r.height,r.minHeight),r.maxHeight),this.limitCropBox(!1,!0),r.left=Math.min(Math.max(r.left,r.minLeft),r.maxLeft),r.top=Math.min(Math.max(r.top,r.minTop),r.maxTop),r.oldLeft=r.left,r.oldTop=r.top,n.movable&&n.cropBoxMovable&&Gf(this.face,Hf,r.width>=e.width&&r.height>=e.height?IB:Z2),Ba(this.cropBox,Yt({width:r.width,height:r.height},rf({translateX:r.left,translateY:r.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),zl(this.element,mx,this.getData())}},Pce={initPreview:function(){var n=this.element,e=this.crossOrigin,r=this.options.preview,i=e?this.crossOriginUrl:this.url,o=n.alt||"The image to preview",a=document.createElement("img");if(e&&(a.crossOrigin=e),a.src=i,a.alt=o,this.viewBox.appendChild(a),this.viewBoxImage=a,!!r){var s=r;typeof r=="string"?s=n.ownerDocument.querySelectorAll(r):r.querySelector&&(s=[r]),this.previews=s,Sn(s,function(u){var l=document.createElement("img");Gf(u,Lh,{width:u.offsetWidth,height:u.offsetHeight,html:u.innerHTML}),e&&(l.crossOrigin=e),l.src=i,l.alt=o,l.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',u.innerHTML="",u.appendChild(l)})}},resetPreview:function(){Sn(this.previews,function(n){var e=wx(n,Lh);Ba(n,{width:e.width,height:e.height}),n.innerHTML=e.html,Sce(n,Lh)})},preview:function(){var n=this.imageData,e=this.canvasData,r=this.cropBoxData,i=r.width,o=r.height,a=n.width,s=n.height,u=r.left-e.left-n.left,l=r.top-e.top-n.top;!this.cropped||this.disabled||(Ba(this.viewBoxImage,Yt({width:a,height:s},rf(Yt({translateX:-u,translateY:-l},n)))),Sn(this.previews,function(c){var d=wx(c,Lh),f=d.width,p=d.height,h=f,v=p,g=1;i&&(g=f/i,v=o*g),o&&v>p&&(g=p/o,h=i*g,v=p),Ba(c,{width:h,height:v}),Ba(c.getElementsByTagName("img")[0],Yt({width:a*g,height:s*g},rf(Yt({translateX:-u*g,translateY:-l*g},n))))}))}},Lce={bind:function(){var n=this.element,e=this.options,r=this.cropper;Rr(e.cropstart)&&fi(n,yx,e.cropstart),Rr(e.cropmove)&&fi(n,gx,e.cropmove),Rr(e.cropend)&&fi(n,vx,e.cropend),Rr(e.crop)&&fi(n,mx,e.crop),Rr(e.zoom)&&fi(n,bx,e.zoom),fi(r,TI,this.onCropStart=this.cropStart.bind(this)),e.zoomable&&e.zoomOnWheel&&fi(r,AI,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),e.toggleDragModeOnDblclick&&fi(r,RI,this.onDblclick=this.dblclick.bind(this)),fi(n.ownerDocument,NI,this.onCropMove=this.cropMove.bind(this)),fi(n.ownerDocument,kI,this.onCropEnd=this.cropEnd.bind(this)),e.responsive&&fi(window,_I,this.onResize=this.resize.bind(this))},unbind:function(){var n=this.element,e=this.options,r=this.cropper;Rr(e.cropstart)&&Ni(n,yx,e.cropstart),Rr(e.cropmove)&&Ni(n,gx,e.cropmove),Rr(e.cropend)&&Ni(n,vx,e.cropend),Rr(e.crop)&&Ni(n,mx,e.crop),Rr(e.zoom)&&Ni(n,bx,e.zoom),Ni(r,TI,this.onCropStart),e.zoomable&&e.zoomOnWheel&&Ni(r,AI,this.onWheel,{passive:!1,capture:!0}),e.toggleDragModeOnDblclick&&Ni(r,RI,this.onDblclick),Ni(n.ownerDocument,NI,this.onCropMove),Ni(n.ownerDocument,kI,this.onCropEnd),e.responsive&&Ni(window,_I,this.onResize)}},Fce={resize:function(){if(!this.disabled){var n=this.options,e=this.container,r=this.containerData,i=e.offsetWidth/r.width,o=e.offsetHeight/r.height,a=Math.abs(i-1)>Math.abs(o-1)?i:o;if(a!==1){var s,u;n.restore&&(s=this.getCanvasData(),u=this.getCropBoxData()),this.render(),n.restore&&(this.setCanvasData(Sn(s,function(l,c){s[c]=l*a})),this.setCropBoxData(Sn(u,function(l,c){u[c]=l*a})))}}},dblclick:function(){this.disabled||this.options.dragMode===OB||this.setDragMode(wce(this.dragBox,px)?AB:eR)},wheel:function(n){var e=this,r=Number(this.options.wheelZoomRatio)||.1,i=1;this.disabled||(n.preventDefault(),!this.wheeling&&(this.wheeling=!0,setTimeout(function(){e.wheeling=!1},50),n.deltaY?i=n.deltaY>0?1:-1:n.wheelDelta?i=-n.wheelDelta/120:n.detail&&(i=n.detail>0?1:-1),this.zoom(-i*r,n)))},cropStart:function(n){var e=n.buttons,r=n.button;if(!(this.disabled||(n.type==="mousedown"||n.type==="pointerdown"&&n.pointerType==="mouse")&&(ct(e)&&e!==1||ct(r)&&r!==0||n.ctrlKey))){var i=this.options,o=this.pointers,a;n.changedTouches?Sn(n.changedTouches,function(s){o[s.identifier]=Fh(s)}):o[n.pointerId||0]=Fh(n),Object.keys(o).length>1&&i.zoomable&&i.zoomOnTouch?a=_B:a=wx(n.target,Hf),cce.test(a)&&zl(this.element,yx,{originalEvent:n,action:a})!==!1&&(n.preventDefault(),this.action=a,this.cropping=!1,a===kB&&(this.cropping=!0,Pn(this.dragBox,Mv)))}},cropMove:function(n){var e=this.action;if(!(this.disabled||!e)){var r=this.pointers;n.preventDefault(),zl(this.element,gx,{originalEvent:n,action:e})!==!1&&(n.changedTouches?Sn(n.changedTouches,function(i){Yt(r[i.identifier]||{},Fh(i,!0))}):Yt(r[n.pointerId||0]||{},Fh(n,!0)),this.change(n))}},cropEnd:function(n){if(!this.disabled){var e=this.action,r=this.pointers;n.changedTouches?Sn(n.changedTouches,function(i){delete r[i.identifier]}):delete r[n.pointerId||0],e&&(n.preventDefault(),Object.keys(r).length||(this.action=""),this.cropping&&(this.cropping=!1,xl(this.dragBox,Mv,this.cropped&&this.options.modal)),zl(this.element,vx,{originalEvent:n,action:e}))}}},zce={change:function(n){var e=this.options,r=this.canvasData,i=this.containerData,o=this.cropBoxData,a=this.pointers,s=this.action,u=e.aspectRatio,l=o.left,c=o.top,d=o.width,f=o.height,p=l+d,h=c+f,v=0,g=0,m=i.width,y=i.height,b=!0,w;!u&&n.shiftKey&&(u=d&&f?d/f:1),this.limited&&(v=o.minLeft,g=o.minTop,m=v+Math.min(i.width,r.width,r.left+r.width),y=g+Math.min(i.height,r.height,r.top+r.height));var x=a[Object.keys(a)[0]],C={x:x.endX-x.startX,y:x.endY-x.startY},E=function(N){switch(N){case Ns:p+C.x>m&&(C.x=m-p);break;case ks:l+C.x<v&&(C.x=v-l);break;case ba:c+C.y<g&&(C.y=g-c);break;case Ju:h+C.y>y&&(C.y=y-h);break}};switch(s){case Z2:l+=C.x,c+=C.y;break;case Ns:if(C.x>=0&&(p>=m||u&&(c<=g||h>=y))){b=!1;break}E(Ns),d+=C.x,d<0&&(s=ks,d=-d,l-=d),u&&(f=d/u,c+=(o.height-f)/2);break;case ba:if(C.y<=0&&(c<=g||u&&(l<=v||p>=m))){b=!1;break}E(ba),f-=C.y,c+=C.y,f<0&&(s=Ju,f=-f,c-=f),u&&(d=f*u,l+=(o.width-d)/2);break;case ks:if(C.x<=0&&(l<=v||u&&(c<=g||h>=y))){b=!1;break}E(ks),d-=C.x,l+=C.x,d<0&&(s=Ns,d=-d,l-=d),u&&(f=d/u,c+=(o.height-f)/2);break;case Ju:if(C.y>=0&&(h>=y||u&&(l<=v||p>=m))){b=!1;break}E(Ju),f+=C.y,f<0&&(s=ba,f=-f,c-=f),u&&(d=f*u,l+=(o.width-d)/2);break;case bd:if(u){if(C.y<=0&&(c<=g||p>=m)){b=!1;break}E(ba),f-=C.y,c+=C.y,d=f*u}else E(ba),E(Ns),C.x>=0?p<m?d+=C.x:C.y<=0&&c<=g&&(b=!1):d+=C.x,C.y<=0?c>g&&(f-=C.y,c+=C.y):(f-=C.y,c+=C.y);d<0&&f<0?(s=Sd,f=-f,d=-d,c-=f,l-=d):d<0?(s=wd,d=-d,l-=d):f<0&&(s=xd,f=-f,c-=f);break;case wd:if(u){if(C.y<=0&&(c<=g||l<=v)){b=!1;break}E(ba),f-=C.y,c+=C.y,d=f*u,l+=o.width-d}else E(ba),E(ks),C.x<=0?l>v?(d-=C.x,l+=C.x):C.y<=0&&c<=g&&(b=!1):(d-=C.x,l+=C.x),C.y<=0?c>g&&(f-=C.y,c+=C.y):(f-=C.y,c+=C.y);d<0&&f<0?(s=xd,f=-f,d=-d,c-=f,l-=d):d<0?(s=bd,d=-d,l-=d):f<0&&(s=Sd,f=-f,c-=f);break;case Sd:if(u){if(C.x<=0&&(l<=v||h>=y)){b=!1;break}E(ks),d-=C.x,l+=C.x,f=d/u}else E(Ju),E(ks),C.x<=0?l>v?(d-=C.x,l+=C.x):C.y>=0&&h>=y&&(b=!1):(d-=C.x,l+=C.x),C.y>=0?h<y&&(f+=C.y):f+=C.y;d<0&&f<0?(s=bd,f=-f,d=-d,c-=f,l-=d):d<0?(s=xd,d=-d,l-=d):f<0&&(s=wd,f=-f,c-=f);break;case xd:if(u){if(C.x>=0&&(p>=m||h>=y)){b=!1;break}E(Ns),d+=C.x,f=d/u}else E(Ju),E(Ns),C.x>=0?p<m?d+=C.x:C.y>=0&&h>=y&&(b=!1):d+=C.x,C.y>=0?h<y&&(f+=C.y):f+=C.y;d<0&&f<0?(s=wd,f=-f,d=-d,c-=f,l-=d):d<0?(s=Sd,d=-d,l-=d):f<0&&(s=bd,f=-f,c-=f);break;case IB:this.move(C.x,C.y),b=!1;break;case _B:this.zoom(Cce(a),n),b=!1;break;case kB:if(!C.x||!C.y){b=!1;break}w=zB(this.cropper),l=x.startX-w.left,c=x.startY-w.top,d=o.minWidth,f=o.minHeight,C.x>0?s=C.y>0?xd:bd:C.x<0&&(l-=d,s=C.y>0?Sd:wd),C.y<0&&(c-=f),this.cropped||(yo(this.cropBox,Nr),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0));break}b&&(o.width=d,o.height=f,o.left=l,o.top=c,this.action=s,this.renderCropBox()),Sn(a,function(S){S.startX=S.endX,S.startY=S.endY})}},Bce={crop:function(){return this.ready&&!this.cropped&&!this.disabled&&(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&Pn(this.dragBox,Mv),yo(this.cropBox,Nr),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=Yt({},this.initialImageData),this.canvasData=Yt({},this.initialCanvasData),this.cropBoxData=Yt({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(Yt(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),yo(this.dragBox,Mv),Pn(this.cropBox,Nr)),this},replace:function(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return!this.disabled&&n&&(this.isImg&&(this.element.src=n),e?(this.url=n,this.image.src=n,this.ready&&(this.viewBoxImage.src=n,Sn(this.previews,function(r){r.getElementsByTagName("img")[0].src=n}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(n))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,yo(this.cropper,EI)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,Pn(this.cropper,EI)),this},destroy:function(){var n=this.element;return n[Xt]?(n[Xt]=void 0,this.isImg&&this.replaced&&(n.src=this.originalUrl),this.uncreate(),this):this},move:function(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:n,r=this.canvasData,i=r.left,o=r.top;return this.moveTo(D1(n)?n:i+Number(n),D1(e)?e:o+Number(e))},moveTo:function(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:n,r=this.canvasData,i=!1;return n=Number(n),e=Number(e),this.ready&&!this.disabled&&this.options.movable&&(ct(n)&&(r.left=n,i=!0),ct(e)&&(r.top=e,i=!0),i&&this.renderCanvas(!0)),this},zoom:function(n,e){var r=this.canvasData;return n=Number(n),n<0?n=1/(1-n):n=1+n,this.zoomTo(r.width*n/r.naturalWidth,null,e)},zoomTo:function(n,e,r){var i=this.options,o=this.canvasData,a=o.width,s=o.height,u=o.naturalWidth,l=o.naturalHeight;if(n=Number(n),n>=0&&this.ready&&!this.disabled&&i.zoomable){var c=u*n,d=l*n;if(zl(this.element,bx,{ratio:n,oldRatio:a/u,originalEvent:r})===!1)return this;if(r){var f=this.pointers,p=zB(this.cropper),h=f&&Object.keys(f).length?Rce(f):{pageX:r.pageX,pageY:r.pageY};o.left-=(c-a)*((h.pageX-p.left-o.left)/a),o.top-=(d-s)*((h.pageY-p.top-o.top)/s)}else wl(e)&&ct(e.x)&&ct(e.y)?(o.left-=(c-a)*((e.x-o.left)/a),o.top-=(d-s)*((e.y-o.top)/s)):(o.left-=(c-a)/2,o.top-=(d-s)/2);o.width=c,o.height=d,this.renderCanvas(!0)}return this},rotate:function(n){return this.rotateTo((this.imageData.rotate||0)+Number(n))},rotateTo:function(n){return n=Number(n),ct(n)&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=n%360,this.renderCanvas(!0,!0)),this},scaleX:function(n){var e=this.imageData.scaleY;return this.scale(n,ct(e)?e:1)},scaleY:function(n){var e=this.imageData.scaleX;return this.scale(ct(e)?e:1,n)},scale:function(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:n,r=this.imageData,i=!1;return n=Number(n),e=Number(e),this.ready&&!this.disabled&&this.options.scalable&&(ct(n)&&(r.scaleX=n,i=!0),ct(e)&&(r.scaleY=e,i=!0),i&&this.renderCanvas(!0,!0)),this},getData:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.options,r=this.imageData,i=this.canvasData,o=this.cropBoxData,a;if(this.ready&&this.cropped){a={x:o.left-i.left,y:o.top-i.top,width:o.width,height:o.height};var s=r.width/r.naturalWidth;if(Sn(a,function(c,d){a[d]=c/s}),n){var u=Math.round(a.y+a.height),l=Math.round(a.x+a.width);a.x=Math.round(a.x),a.y=Math.round(a.y),a.width=l-a.x,a.height=u-a.y}}else a={x:0,y:0,width:0,height:0};return e.rotatable&&(a.rotate=r.rotate||0),e.scalable&&(a.scaleX=r.scaleX||1,a.scaleY=r.scaleY||1),a},setData:function(n){var e=this.options,r=this.imageData,i=this.canvasData,o={};if(this.ready&&!this.disabled&&wl(n)){var a=!1;e.rotatable&&ct(n.rotate)&&n.rotate!==r.rotate&&(r.rotate=n.rotate,a=!0),e.scalable&&(ct(n.scaleX)&&n.scaleX!==r.scaleX&&(r.scaleX=n.scaleX,a=!0),ct(n.scaleY)&&n.scaleY!==r.scaleY&&(r.scaleY=n.scaleY,a=!0)),a&&this.renderCanvas(!0,!0);var s=r.width/r.naturalWidth;ct(n.x)&&(o.left=n.x*s+i.left),ct(n.y)&&(o.top=n.y*s+i.top),ct(n.width)&&(o.width=n.width*s),ct(n.height)&&(o.height=n.height*s),this.setCropBoxData(o)}return this},getContainerData:function(){return this.ready?Yt({},this.containerData):{}},getImageData:function(){return this.sized?Yt({},this.imageData):{}},getCanvasData:function(){var n=this.canvasData,e={};return this.ready&&Sn(["left","top","width","height","naturalWidth","naturalHeight"],function(r){e[r]=n[r]}),e},setCanvasData:function(n){var e=this.canvasData,r=e.aspectRatio;return this.ready&&!this.disabled&&wl(n)&&(ct(n.left)&&(e.left=n.left),ct(n.top)&&(e.top=n.top),ct(n.width)?(e.width=n.width,e.height=n.width/r):ct(n.height)&&(e.height=n.height,e.width=n.height*r),this.renderCanvas(!0)),this},getCropBoxData:function(){var n=this.cropBoxData,e;return this.ready&&this.cropped&&(e={left:n.left,top:n.top,width:n.width,height:n.height}),e||{}},setCropBoxData:function(n){var e=this.cropBoxData,r=this.options.aspectRatio,i,o;return this.ready&&this.cropped&&!this.disabled&&wl(n)&&(ct(n.left)&&(e.left=n.left),ct(n.top)&&(e.top=n.top),ct(n.width)&&n.width!==e.width&&(i=!0,e.width=n.width),ct(n.height)&&n.height!==e.height&&(o=!0,e.height=n.height),r&&(i?e.height=e.width/r:o&&(e.width=e.height*r)),this.renderCropBox()),this},getCroppedCanvas:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var e=this.canvasData,r=Nce(this.image,this.imageData,e,n);if(!this.cropped)return r;var i=this.getData(n.rounded),o=i.x,a=i.y,s=i.width,u=i.height,l=r.width/Math.floor(e.naturalWidth);l!==1&&(o*=l,a*=l,s*=l,u*=l);var c=s/u,d=ja({aspectRatio:c,width:n.maxWidth||1/0,height:n.maxHeight||1/0}),f=ja({aspectRatio:c,width:n.minWidth||0,height:n.minHeight||0},"cover"),p=ja({aspectRatio:c,width:n.width||(l!==1?r.width:s),height:n.height||(l!==1?r.height:u)}),h=p.width,v=p.height;h=Math.min(d.width,Math.max(f.width,h)),v=Math.min(d.height,Math.max(f.height,v));var g=document.createElement("canvas"),m=g.getContext("2d");g.width=Fl(h),g.height=Fl(v),m.fillStyle=n.fillColor||"transparent",m.fillRect(0,0,h,v);var y=n.imageSmoothingEnabled,b=y===void 0?!0:y,w=n.imageSmoothingQuality;m.imageSmoothingEnabled=b,w&&(m.imageSmoothingQuality=w);var x=r.width,C=r.height,E=o,S=a,N,k,M,D,R,O;E<=-s||E>x?(E=0,N=0,M=0,R=0):E<=0?(M=-E,E=0,N=Math.min(x,s+E),R=N):E<=x&&(M=0,N=Math.min(s,x-E),R=N),N<=0||S<=-u||S>C?(S=0,k=0,D=0,O=0):S<=0?(D=-S,S=0,k=Math.min(C,u+S),O=k):S<=C&&(D=0,k=Math.min(u,C-S),O=k);var P=[E,S,N,k];if(R>0&&O>0){var A=h/s;P.push(M*A,D*A,R*A,O*A)}return m.drawImage.apply(m,[r].concat(TB(P.map(function(I){return Math.floor(Fl(I))})))),g},setAspectRatio:function(n){var e=this.options;return!this.disabled&&!D1(n)&&(e.aspectRatio=Math.max(0,n)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(n){var e=this.options,r=this.dragBox,i=this.face;if(this.ready&&!this.disabled){var o=n===eR,a=e.movable&&n===AB;n=o||a?n:OB,e.dragMode=n,Gf(r,Hf,n),xl(r,px,o),xl(r,hx,a),e.cropBoxMovable||(Gf(i,Hf,n),xl(i,px,o),xl(i,hx,a))}return this}},jce=So.Cropper,jB=function(){function t(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Qle(this,t),!n||!pce.test(n.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=n,this.options=Yt({},DI,wl(e)&&e),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return Zle(t,[{key:"init",value:function(){var e=this.element,r=e.tagName.toLowerCase(),i;if(!e[Xt]){if(e[Xt]=this,r==="img"){if(this.isImg=!0,i=e.getAttribute("src")||"",this.originalUrl=i,!i)return;i=e.src}else r==="canvas"&&window.HTMLCanvasElement&&(i=e.toDataURL());this.load(i)}}},{key:"load",value:function(e){var r=this;if(e){this.url=e,this.imageData={};var i=this.element,o=this.options;if(!o.rotatable&&!o.scalable&&(o.checkOrientation=!1),!o.checkOrientation||!window.ArrayBuffer){this.clone();return}if(dce.test(e)){fce.test(e)?this.read(_ce(e)):this.clone();return}var a=new XMLHttpRequest,s=this.clone.bind(this);this.reloading=!0,this.xhr=a,a.onabort=s,a.onerror=s,a.ontimeout=s,a.onprogress=function(){a.getResponseHeader("content-type")!==OI&&a.abort()},a.onload=function(){r.read(a.response)},a.onloadend=function(){r.reloading=!1,r.xhr=null},o.checkCrossOrigin&&PI(e)&&i.crossOrigin&&(e=LI(e)),a.open("GET",e,!0),a.responseType="arraybuffer",a.withCredentials=i.crossOrigin==="use-credentials",a.send()}}},{key:"read",value:function(e){var r=this.options,i=this.imageData,o=Oce(e),a=0,s=1,u=1;if(o>1){this.url=Ace(e,OI);var l=Dce(o);a=l.rotate,s=l.scaleX,u=l.scaleY}r.rotatable&&(i.rotate=a),r.scalable&&(i.scaleX=s,i.scaleY=u),this.clone()}},{key:"clone",value:function(){var e=this.element,r=this.url,i=e.crossOrigin,o=r;this.options.checkCrossOrigin&&PI(r)&&(i||(i="anonymous"),o=LI(r)),this.crossOrigin=i,this.crossOriginUrl=o;var a=document.createElement("img");i&&(a.crossOrigin=i),a.src=o||r,a.alt=e.alt||"The image to crop",this.image=a,a.onload=this.start.bind(this),a.onerror=this.stop.bind(this),Pn(a,CI),e.parentNode.insertBefore(a,e.nextSibling)}},{key:"start",value:function(){var e=this,r=this.image;r.onload=null,r.onerror=null,this.sizing=!0;var i=So.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(So.navigator.userAgent),o=function(l,c){Yt(e.imageData,{naturalWidth:l,naturalHeight:c,aspectRatio:l/c}),e.initialImageData=Yt({},e.imageData),e.sizing=!1,e.sized=!0,e.build()};if(r.naturalWidth&&!i){o(r.naturalWidth,r.naturalHeight);return}var a=document.createElement("img"),s=document.body||document.documentElement;this.sizingImage=a,a.onload=function(){o(a.width,a.height),i||s.removeChild(a)},a.src=r.src,i||(a.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",s.appendChild(a))}},{key:"stop",value:function(){var e=this.image;e.onload=null,e.onerror=null,e.parentNode.removeChild(e),this.image=null}},{key:"build",value:function(){if(!(!this.sized||this.ready)){var e=this.element,r=this.options,i=this.image,o=e.parentNode,a=document.createElement("div");a.innerHTML=hce;var s=a.querySelector(".".concat(Xt,"-container")),u=s.querySelector(".".concat(Xt,"-canvas")),l=s.querySelector(".".concat(Xt,"-drag-box")),c=s.querySelector(".".concat(Xt,"-crop-box")),d=c.querySelector(".".concat(Xt,"-face"));this.container=o,this.cropper=s,this.canvas=u,this.dragBox=l,this.cropBox=c,this.viewBox=s.querySelector(".".concat(Xt,"-view-box")),this.face=d,u.appendChild(i),Pn(e,Nr),o.insertBefore(s,e.nextSibling),yo(i,CI),this.initPreview(),this.bind(),r.initialAspectRatio=Math.max(0,r.initialAspectRatio)||NaN,r.aspectRatio=Math.max(0,r.aspectRatio)||NaN,r.viewMode=Math.max(0,Math.min(3,Math.round(r.viewMode)))||0,Pn(c,Nr),r.guides||Pn(c.getElementsByClassName("".concat(Xt,"-dashed")),Nr),r.center||Pn(c.getElementsByClassName("".concat(Xt,"-center")),Nr),r.background&&Pn(s,"".concat(Xt,"-bg")),r.highlight||Pn(d,ace),r.cropBoxMovable&&(Pn(d,hx),Gf(d,Hf,Z2)),r.cropBoxResizable||(Pn(c.getElementsByClassName("".concat(Xt,"-line")),Nr),Pn(c.getElementsByClassName("".concat(Xt,"-point")),Nr)),this.render(),this.ready=!0,this.setDragMode(r.dragMode),r.autoCrop&&this.crop(),this.setData(r.data),Rr(r.ready)&&fi(e,II,r.ready,{once:!0}),zl(e,II)}}},{key:"unbuild",value:function(){if(this.ready){this.ready=!1,this.unbind(),this.resetPreview();var e=this.cropper.parentNode;e&&e.removeChild(this.cropper),yo(this.element,Nr)}}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=jce,t}},{key:"setDefaults",value:function(e){Yt(DI,wl(e)&&e)}}]),t}();Yt(jB.prototype,Mce,Pce,Lce,Fce,zce,Bce);var Vs=function(){return Vs=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var i in n=arguments[e])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t},Vs.apply(this,arguments)};function P1(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function"){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]])}return e}var Vce=["aspectRatio","autoCrop","autoCropArea","background","center","checkCrossOrigin","checkOrientation","cropBoxMovable","cropBoxResizable","data","dragMode","guides","highlight","initialAspectRatio","minCanvasHeight","minCanvasWidth","minContainerHeight","minContainerWidth","minCropBoxHeight","minCropBoxWidth","modal","movable","preview","responsive","restore","rotatable","scalable","toggleDragModeOnDblclick","viewMode","wheelZoomRatio","zoomOnTouch","zoomOnWheel","zoomable","cropstart","cropmove","cropend","crop","zoom","ready"],$ce={opacity:0,maxWidth:"100%"},Uce=_e.forwardRef(function(t,n){var e=P1(t,[]),r=e.dragMode,i=r===void 0?"crop":r,o=e.src,a=e.style,s=e.className,u=e.crossOrigin,l=e.scaleX,c=e.scaleY,d=e.enable,f=e.zoomTo,p=e.rotateTo,h=e.alt,v=h===void 0?"picture":h,g=e.ready,m=e.onInitialized,y=P1(e,["dragMode","src","style","className","crossOrigin","scaleX","scaleY","enable","zoomTo","rotateTo","alt","ready","onInitialized"]),b={scaleY:c,scaleX:l,enable:d,zoomTo:f,rotateTo:p},w=function(){for(var C=[],E=0;E<arguments.length;E++)C[E]=arguments[E];var S=H.useRef(null);return _e.useEffect(function(){C.forEach(function(N){N&&(typeof N=="function"?N(S.current):N.current=S.current)})},[C]),S}(n,H.useRef(null));H.useEffect(function(){var C;!((C=w.current)===null||C===void 0)&&C.cropper&&typeof f=="number"&&w.current.cropper.zoomTo(f)},[e.zoomTo]),H.useEffect(function(){var C;!((C=w.current)===null||C===void 0)&&C.cropper&&o!==void 0&&w.current.cropper.reset().clear().replace(o)},[o]),H.useEffect(function(){if(w.current!==null){var C=new jB(w.current,Vs(Vs({dragMode:i},y),{ready:function(E){E.currentTarget!==null&&function(S,N){N===void 0&&(N={});var k=N.enable,M=k===void 0||k,D=N.scaleX,R=D===void 0?1:D,O=N.scaleY,P=O===void 0?1:O,A=N.zoomTo,I=A===void 0?0:A,_=N.rotateTo;M?S.enable():S.disable(),S.scaleX(R),S.scaleY(P),_!==void 0&&S.rotateTo(_),I>0&&S.zoomTo(I)}(E.currentTarget.cropper,b),g&&g(E)}}));m&&m(C)}return function(){var E,S;(S=(E=w.current)===null||E===void 0?void 0:E.cropper)===null||S===void 0||S.destroy()}},[w]);var x=function(C){return Vce.reduce(function(E,S){var N=E,k=S;return N[k],P1(N,[typeof k=="symbol"?k:k+""])},C)}(Vs(Vs({},y),{crossOrigin:u,src:o,alt:v}));return _e.createElement("div",{style:a,className:s},_e.createElement("img",Vs({},x,{style:$ce,ref:w})))});const Wce=({cropperRef:t})=>{const[n,e]=H.useState(1);return T.jsxs("div",{className:"Aspect",children:[T.jsxs("div",{className:"Aspect_header",children:[T.jsx("div",{className:`Aspect_length ${n&&"active"}`,onClick:()=>e(1),children:T.jsx(lI,{style:{color:"#191919"}})}),T.jsx("div",{className:`Aspect_width ${!n&&"active"}`,onClick:()=>e(0),children:T.jsx(lI,{style:{color:"#191919"}})})]}),T.jsxs("div",{className:"Aspect_body",children:[T.jsx("button",{onClick:()=>t.current.cropper.setAspectRatio(NaN),children:"원본"}),T.jsx("button",{onClick:()=>t.current.cropper.setAspectRatio(1),children:"1:1"}),n?T.jsxs(T.Fragment,{children:[T.jsx("button",{onClick:()=>t.current.cropper.setAspectRatio(3/4),children:"3:4"}),T.jsx("button",{onClick:()=>t.current.cropper.setAspectRatio(9/16),children:"9:16"})]}):T.jsxs(T.Fragment,{children:[T.jsx("button",{onClick:()=>t.current.cropper.setAspectRatio(4/3),children:"4:3"}),T.jsx("button",{onClick:()=>t.current.cropper.setAspectRatio(16/9),children:"16:9"})]})]})]})};function Hce(){const t=Si(),n=jr(),e=t.state.value,r=H.useRef(null);console.log(e);const i=()=>{var o;n("/fish/image/result",{replace:!0,state:{value:(o=r.current)==null?void 0:o.cropper.getCroppedCanvas().toDataURL()}})};return T.jsxs("div",{className:"Demo",children:[T.jsx(fa,{filter:"invert(1)"}),T.jsx("div",{className:"crop",onClick:i,children:"자르기"}),T.jsx("div",{className:"Demo_body",children:T.jsx(Uce,{ref:r,style:{height:"100%",width:"100%"},dragMode:"none",viewMode:1,highlight:!1,background:!1,autoCropArea:1,minCropBoxWidth:150,minCropBoxHeight:150,src:e})}),T.jsx("div",{className:"Demo_footer",children:T.jsx(Wce,{cropperRef:r})})]})}const Gce=[{id:1,name:"가다랑어",tabooStartAt:null,tabooEndAt:null,minimumSize:null,imageUrl:""},{id:2,name:"갈치",tabooStartAt:"2024-07-01",tabooEndAt:"2024-07-31",minimumSize:null,imageUrl:""},{id:3,name:"감성돔",tabooStartAt:"2024-05-01",tabooEndAt:"2024-05-31",minimumSize:25,imageUrl:""},{id:4,name:"갑오징어",tabooStartAt:null,tabooEndAt:null,minimumSize:null,imageUrl:""},{id:5,name:"까치상어",tabooStartAt:null,tabooEndAt:null,minimumSize:null,imageUrl:""},{id:6,name:"넙치",tabooStartAt:null,tabooEndAt:null,minimumSize:35,imageUrl:""}],qce={fishbook:Gce};function Kce(){return T.jsx("ul",{className:"fish-list",children:qce.fishbook.map(t=>T.jsx(Ja,{to:`/fishbook/${t.id}`,children:T.jsxs("li",{className:"fish-item",children:[T.jsx("div",{children:t.name}),T.jsx("div",{children:t.endangeredSpecies}),T.jsx("div",{children:t.minimumSize}),T.jsx("div",{children:t.tabooStartAt}),T.jsx("div",{children:t.tabooEndAt})]})},t.id))})}function Xce(t){return T.jsxs(T.Fragment,{children:[T.jsx("div",{children:"FishBook"}),";",T.jsx(Kce,{}),T.jsx("div",{className:""})]})}const Yce=({fish:t})=>{const[n,e]=H.useState(!1),r=()=>{e(!n)};return T.jsx(T.Fragment,{children:T.jsxs("div",{className:n?"card-rotate":"back-rotate",onClick:r,children:[T.jsxs("div",{className:"front",children:[T.jsx("div",{className:"detail-title",children:"Mulgogi"}),T.jsxs("div",{className:"size",children:["size",T.jsx("div",{children:t.size})]}),T.jsx("img",{className:"fish-img",src:t.imageUrl}),T.jsx("div",{className:"sub-one",children:"the fish"}),T.jsx("div",{className:"sub-two",children:"we love"}),T.jsx("div",{className:"fish-name",children:t.name}),T.jsxs("div",{className:"science-name",children:["학명",T.jsx("div",{style:{whiteSpace:"pre-line"},children:t.scientificName})]}),T.jsxs("div",{className:"food",children:["Food",T.jsx("div",{style:{whiteSpace:"pre-line"},children:t.bait})]}),T.jsxs("div",{className:"live",children:["Where",T.jsx("br",{}),"you live"]}),T.jsx("div",{className:"habitat",style:{whiteSpace:"pre-line"},children:t.habitat})]}),T.jsxs("div",{className:"back",children:[T.jsxs("div",{className:"question",children:["Q. ",t.interview.FirstQuestion,T.jsx("div",{style:{whiteSpace:"pre-line"},children:t.interview.FirstAnswer})]}),T.jsxs("div",{className:"question",children:["Q. ",t.interview.SecondQuestion,T.jsx("div",{style:{whiteSpace:"pre-line"},children:t.interview.SecondAnswer})]}),T.jsxs("div",{className:"question",children:["Q. ",t.interview.thirdQuestion,T.jsx("div",{style:{whiteSpace:"pre-line"},children:t.interview.thirdAnswer})]})]})]})})},Jce="/assets/감성돔-1jgNHgKu.jpg",Qce=()=>{wS();const[t,n]=H.useState({id:1,name:"감성돔",scientificName:`Acantopagrus
scblegeli`,fishType:"SEA",size:"30~50cm이상",habitat:`흐르지 않는 연못, 저수지, 늪지 등의 탁한 물 밑
물풀이 무성한 곳`,bait:`참갯지렁이
크릴
쏙
조개류
갯지렁이`,interview:{FirstQuestion:"이름이 무슨뜻인가요?",FirstAnswer:`검은 돔에서 변화한 것입니다.
감상어, 먹도미, 감성도미, 감셍이,
구릿, 맹이, 남정바리 등으로
불리기도 합니다.`,SecondQuestion:"외모자랑 한번 해주세요",SecondAnswer:"몸이 크고 긴 원통 모양이며 옆으로 납작합니다. 눈은 작은 편이며 아래턱이 위턱보다 조금 짧고 입 둘레에 두 쌍의 수염이 있습니다.몸은 누른빛을 띤 녹색이고 등 쪽은 짙고 배 쪽은 연한 색이며 옆구리는 갈색입니다.",thirdQuestion:"특별한 능력이 있다구요?",thirdAnswer:`성전환이 가능합니다.
1년생동안은 대부분 수컷이지만,
이후 암수한몸이었다가
4~5년부터는 암수로 완전히 분리되요.
대부분이 암컷으로 성전환합니다.`},imageUrl:Jce,detailImageUrl:""});return T.jsx(Yce,{fish:t})},Zce="/assets/naver_logo-8-qEmV51.png",ede=()=>{const r="https://nid.naver.com/oauth2.0/authorize?client_id=w88WA5fuXobhPaQEmw1p&response_type=code&redirect_uri=http://localhost:5173/login/naver&state=niwXgvCl5E",i=()=>{window.location.href=r};return T.jsx(T.Fragment,{children:T.jsx("img",{src:Zce,alt:"네이버로그인",onClick:i})})},tde="/assets/kakao_logo-F_W8h3hn.png",nde=()=>{const e="https://kauth.kakao.com/oauth/authorize?client_id=db5b74e6c640443403b9705680d9dbac&redirect_uri=https://i10c203.p.ssafy.io/login/kakao&response_type=code",r=()=>{window.location.href=e};return T.jsx(T.Fragment,{children:T.jsx("img",{src:tde,alt:"카카오로그인",onClick:r})})},rde="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAACXBIWXMAAAI2AAACNgElQaYmAAAHT0lEQVR4nO2dTWwTRxTHX+wEh5R0I6GqMkJNaKVWRaJEtjhUVV2skkNPgMyhFhIQ5daqarjQm4Hc6AVz6K1V3JNPFkEqpxwczKWqZCdUFUipEA6qcNWqxabgfJG4mu1zMZY3mZmdmR1v5idFSZzN7Hj/nvfevPkCg8FgMBgMBoPBYDDsbHq66d1X4tFRABgBgFF86aMtLq8CwB38eQ4AyuF8saygmq7QWhAU4AQ++KMCiqyiOLfI93C+uCCgTKFoJ0glHiUP/iwKMST5dqTFzADANV1ajxaCVOJR8uDPAcCXaJK8gLSc78P5YsbLZ+GpICjEJAohuzXQQlrKZa+E8UyQSjxKhLiokRDtzKEwcypvqlwQ9BFXWyIl3UmjMFUV9VQqSCUevYStotsgZmxcRWtRIkglHiWO+noXtQonzofzxbTMG0gXBE3UdY19BSuZcL44LqtwqYJU4lESyk7LvIdHkA5lXIZfCch6Pz4Wg7Agy8lLaSE+F6O7TJYRwx1CBUEHnpdZYQ+RLgaIFAQzs3kfRVOtKBEDRAmCOam8B/2MMn51YlTQh0OZGIReQeVcVCRGM11+gybSwQ4pqddxznS+UjFARAtR5DcyOGbhakCpEo+ewMwyzWCXcjHArSBoquYljmFkMLEndPCIIsHpiRggQBBZyUIlyTyH+nsmBrgRBO3zvISoKoNJPCXp7rbo0FMxwKUg0zjsKhLp2VSH92JPpgjni5dU37sdLkFWZ2GksRJ88DT3FqwvDYqqCzFRno5n6wBvcvFcT/8GDJ5ehP4jf4h4G0YMhLeFPG71HWuLQ/DshxForAR5ikuH88XzPP/oR5if4Oqs7Tc+bX0tuHcFQgf/hvWHg9B41sdSHJmsltyBz90RHpN1vNOLAWsNXj29CKH3/qIth0RRnkY0OsJkslZnbTP1eNvrft5rm7Bt8CSi0h3WFnKC5iLSSqyJe3arcaBsxOgMqyBbzTZ/ieDrdbAm7kLf8D+d/nyZv8r+htVkPeDJWy3f3gfLt8PNX0nrOLDTH7wT1C2EdAZ5k4i7P3wEe07dB9J3IROaXdbZ17CMh7jK6O56uwq9E3eh+s0hKR3A2FRtREIqRxSZQsqiylizCOJ6wUzAWpO5imlE42mqVZwjvC0sTn1YQMVmBJTRjVBnxFkEETEIdYfiGj9CHZ1Km7nogPaLLr2GRRDXPiQ0BkoXv2iEFJNl4Id6Ro4RRDOMIJphBNEMI4hmsAjiOkJanRWyPYavUd1CvNqlwWuop8CyCCKiU3dYQBndCPWkPxZBlgQ8CKoRx52MUh9CTBaOq+w0btG+X5b0uyuT9bTRB+lnh+HmyvA5gJyMKZtlSUPDIvbqojZZSoZwK5sD8NWT9+HX53ZKp1xK5rpmCDc2VbsuwNTGCymLysKwRlnMZquwtg/OPD7WFIMwEskmdB3Z64QIvyclygIWW0j4rn7QbhnEXLXRFRvQxKZqIj44C4WUJSXKAtoRPyLA57UYfFt/1+kS0komGe/tBWcF3JNpGR6TIKEx2zltKQoxTWeqx6C0/tp2xV2MZBPaRlyxqdpRQRtv3mC5mKen7niDm6vDcKb6MVQ2BmjKGdJ8xwdRZpXJ7wpZjtAS0vIUly4lc1otR4hN1SZxUahbZgop6yRLGby5rGvNH4iJ+qwW4xWDMKlT1BWbqo0KEgNYzRW4EMSe7EZCWiJGS0jLy7QOoqAYotbcb+tvO8ElSGgMyleeRjIOIS0vRBTPIq8WMUStKp5hCXebcK/CxQhJ2rLoUjKnZFk0vIioRG9DeIB2+mgr3OMhpWSu3OpLBEJM13wkm5A+mBXJJoaOTF+42gjURe9iRD2Xtx23A1RpSZPfSOvLR7KJaVl9FfRZ8xv99yeX938Nm6GHIovnTnK63nwGP8lKNp8pJXOuNp8hLcJpj/mezQEI/ZmE3icfuK1rupCyuMN4IftlRbKJq7iHu2xe2p6Jxs/gB2YU0+jbJgr7qmO2MJxU0Xdw+z9Rgui4gRn3AqPA6huw+7cLdqth5GQhZbma4S9si79INuGrLf6IGP2PvoDg8ju0/8LcK++EsFknaN9dV0gXGoE6LO+/AutDszQ1WhC15p5rLwwnKrl75fCpg0t+msyw8covdgQWrB+Cns6d4CqaKiHRplBB4D9RFvwmyuau321hgitvQs+G1f7nTwop60dR9xIuCPhUlEZvDZ4P/gSBDct2+si4WyfejhRBwKeiQM86PN8zD41gHXrrh4gYwlcUSz+uAvsBfjquwvYZpWROymowJQe6YPrDDwe6lFEMaecfKj3yKJJNdOuRR4AZgnHZWWjlh4KhCeumQ8GqKISSNfaeHZuHg1E6H5sHXozNeHqwJObAdDtYEpo7auOYj1K0OHp1q7S4Qppj4J4I0US7w4nRx6g6nBha0vkzKk2TE1of340ZZJHHdwMmAv8/wlsHEVrpqgPuUSDaA+6hZXL4Ai6D0O78dIPBYDAYDAaDwWAwGF4AAP8CR9JwtW2tQjkAAAAASUVORK5CYII=",ide=()=>{const e="https://accounts.google.com/o/oauth2/v2/auth?scope=email%20openid&response_type=code&redirect_uri=http://localhost:5173/login/google&client_id=68067767440-hri2501h11p1d08asfsfaf6t2705u9cr.apps.googleusercontent.com",r=()=>{window.location.href=e};return T.jsx(T.Fragment,{children:T.jsx("img",{src:rde,alt:"구글로그인",onClick:r})})},ode=()=>{var i;const t=jr(),e=(i=Si().state)==null?void 0:i.path,r=sessionStorage.getItem("jwt");return H.useEffect(()=>{r&&t("/")},[]),T.jsxs("div",{className:"LoginPage",children:[T.jsx(fa,{centerText:"Login",prevPath:e}),T.jsx("div",{className:"LoginPage_body",children:T.jsx("img",{src:YO,alt:""})}),T.jsxs("div",{className:"LoginPage_footer",children:[T.jsx(ede,{}),T.jsx(nde,{}),T.jsx(ide,{})]})]})},nR="/assets/Group-cDp7Suxl.svg",ade="/assets/Sort-ccnrWBQT.svg";function sde({state:t,sortBy:n}){const e=H.useRef();H.useEffect(()=>{e.current.showModal()});const r=a=>{const u=a.target.getBoundingClientRect();(u.left>a.clientX||u.right<a.clientX||u.top>a.clientY||u.bottom<a.clientY)&&(e.current.close(),t(!t))},i=()=>{e.current.close(),n(1),t(!t)},o=()=>{e.current.close(),n(0),t(!t)};return T.jsx(T.Fragment,{children:T.jsxs("dialog",{ref:e,onClick:r,className:"room-filter-modal",children:[T.jsx("header",{className:"room-filter-header",children:T.jsx("span",{children:"정렬"})}),T.jsxs("div",{className:"room-filter-body",children:[T.jsxs("div",{onClick:i,children:[T.jsx("img",{src:nR,alt:""}),T.jsx("span",{children:"인원순"})]}),T.jsxs("div",{onClick:o,children:[T.jsx("img",{src:ade,alt:""}),T.jsx("span",{children:"최신순"})]})]})]})})}var rR={},ude=wt;Object.defineProperty(rR,"__esModule",{value:!0});var VB=rR.default=void 0,lde=ude(xt()),FI=T;VB=rR.default=(0,lde.default)([(0,FI.jsx)("path",{d:"m7.3 14.7 1.2-1.2c-1-1-1.5-2.3-1.5-3.5 0-1.3.5-2.6 1.5-3.5L7.3 5.3c-1.3 1.3-2 3-2 4.7s.7 3.4 2 4.7M19.1 2.9l-1.2 1.2c1.6 1.6 2.4 3.8 2.4 5.9 0 2.1-.8 4.3-2.4 5.9l1.2 1.2c2-2 2.9-4.5 2.9-7.1 0-2.6-1-5.1-2.9-7.1"},"0"),(0,FI.jsx)("path",{d:"M6.1 4.1 4.9 2.9C3 4.9 2 7.4 2 10c0 2.6 1 5.1 2.9 7.1l1.2-1.2c-1.6-1.6-2.4-3.8-2.4-5.9 0-2.1.8-4.3 2.4-5.9m10.6 10.6c1.3-1.3 2-3 2-4.7-.1-1.7-.7-3.4-2-4.7l-1.2 1.2c1 1 1.5 2.3 1.5 3.5 0 1.3-.5 2.6-1.5 3.5zM14.5 10c0-1.38-1.12-2.5-2.5-2.5S9.5 8.62 9.5 10c0 .76.34 1.42.87 1.88L7 22h2l.67-2h4.67l.66 2h2l-3.37-10.12c.53-.46.87-1.12.87-1.88m-4.17 8L12 13l1.67 5z"},"1")],"CellTowerOutlined");const $B="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADcAAAA3CAYAAACo29JGAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAOLSURBVHgB7ZpbiE1RGMf/jpmQwRAaGZkYklt5kCmXEimX8ICUB8QrXnjgAS/S4MmLJFJK8iAveBAPRG5D7iGZzCCkxv0wxvj+rXNqn7XWsfc5s885a53Or/6n9m3t7ztrr29969sbAJpED0R/Rd1lIPrxSbS+l/zcFU1D+dGRkJ9hKE9q6dw3lCfdVVDPZ5Bzov3wjwWiHYHtJJ17LZoZ2DlIdE30B36xSNt+xceyRds5HspBn2AnzdL2PeHPVFEnMkPpUvjFKNEXZE4JG3mgv6hVO3AGfsGxFrSfQbIhfbBZO8ienAA/6Cd6g0z7L4mq0ydMgtmt7L3ecJ9tMLOUNfpJJ2D23jy4zUSoqSxo933RYP3ERtEP7cQ20Ti4yUDRZZh5ZdZguB1mF98UjYBbcJydgmnrFVEi20U1okeWi25BhVsXoI0nYa5iGFQawy7mCW0wHXwhmoLSMhwq0Om2fRctj9rIXNF7SyPtKF2QaYAaIrpNSagJu1cujdHBr5bG3olW5NpYD+F6s8Viy0/R1nxtYaPPYf+3NqHw8yCNni/6YLGhQ7QWPfyTx0AFFL1xrhp2iQagMNDoZTCTC+otYhwe9aILsA/kw1D5aZzwidical+/5zPRHMQMHTgu6rLc8KJoKOKhj2hflvtcF41GgWAyylV60nJjJqs9TbY5hx2BvaLF9oegwHCMMVlNWgy4IRqL/KiDPetgDx4V1aKIMFJ1wJ6u5ToGmTIdQ+aimfot2oMiO5aGSepLmA4eQG4wKurpFJP4vOewOOA/PhtmusZ5aXLENviY34Hp2AY4AstqnPeCBjZHvHad5drdUFHTGc4i08DHCI9uCct1rVBLGqdYCDPvawq5ZqToqXbdTsREAvHBdeDnwHZfqNTtf9SlFOQqYiJO55gqtWv7wkI4p4wabV8bYiJO5xjKO7V91Qi/f1Vgu9vSRt7E6ZxzVJzzlYpzvlJxzlcqzvlKxbkCwZwycn0/H6pQfFg2mCE6KJquHetKKRaK7Rw/AWFNchXsK4bzoo9wEBp7D5kLzy2pY1wdsPz9EGYxKV3lOgT1ispJsjnHsbUX9jdGFL9gWokSVrmiYHPutOg2sn/Lyeq1s70VxOacTXSUJYnF8IgozrGEx3cBXvRWkDDn+EJ+NcJLD05C5/hJse7UL6hIWAePYSVL/9KAkXAJHI+EUeE7dH6exPol37jWo4T8A7CzoWgJ7WGLAAAAAElFTkSuQmCC";var iR={},cde=wt;Object.defineProperty(iR,"__esModule",{value:!0});var UB=iR.default=void 0,dde=cde(xt()),fde=T;UB=iR.default=(0,dde.default)((0,fde.jsx)("path",{d:"m19 8-4 4h3c0 3.31-2.69 6-6 6-1.01 0-1.97-.25-2.8-.7l-1.46 1.46C8.97 19.54 10.43 20 12 20c4.42 0 8-3.58 8-8h3zM6 12c0-3.31 2.69-6 6-6 1.01 0 1.97.25 2.8.7l1.46-1.46C15.03 4.46 13.57 4 12 4c-4.42 0-8 3.58-8 8H1l4 4 4-4z"}),"Cached");function pde(){const t=jr(),[n,e]=H.useState([]),[r,i]=H.useState([]),[o,a]=H.useState(!1),[s,u]=H.useState(0),[l,c]=H.useState(!0),d=!1,f="https://i10c203.p.ssafy.io",p="wearegitaehasam";H.useEffect(()=>{v()},[]);const h=()=>{a(!o)},v=()=>{c(!0),Nt.get(f+"/api/lives").then(m=>{Nt.get(f+"/openvidu/api/sessions",{headers:{Authorization:"Basic "+btoa("OPENVIDUAPP:"+p),"Content-Type":"application/json"}}).then(y=>{e(m.data),i(y.data),c(!1)})}).catch(m=>{console.log(m)})},g=m=>{console.log("enterLive-liveRoomId: ",m.liveRoomId),console.log("enterLive-sessionId: ",m.sessionId);const y=m.liveRoomId,b=m.sessionId;t(`/live/${m.sessionId}`,{state:{isHost:d,roomId:y,subscriberSession:b}})};return console.log(n),console.log(r),T.jsx(T.Fragment,{children:l?T.jsx(Tp,{}):T.jsxs("div",{children:[T.jsx(fa,{centerText:"낚시 라이브"}),T.jsx(UB,{className:"room-list-reload-btn",onClick:v}),n.liveRooms&&n.liveRooms.length>0?T.jsxs("div",{onClick:h,className:"roomList-filter",children:[s===1?T.jsx("span",{children:"참여인원순"}):T.jsx("span",{children:"최신순"}),T.jsx("img",{src:$B,alt:""}),o&&T.jsx(sde,{state:a,sortBy:u})]}):T.jsxs("div",{className:"no-live",children:[T.jsx(VB,{}),T.jsx("span",{children:"진행중인 라이브가 없습니다."})]}),n.liveRooms&&n.liveRooms.map((m,y)=>T.jsxs("div",{className:"roomList-info",onClick:()=>g(m),children:[T.jsx("img",{src:m.thumbnailURL?m.thumbnailURL:YO,alt:"room thumbnail",className:"thumbnail"}),T.jsxs("div",{className:"roomList-info-header",children:[T.jsx("p",{children:m.name}),T.jsxs("div",{className:"roomList-info-body",children:[T.jsx("span",{children:m.nickName}),T.jsxs("p",{children:[T.jsx("img",{className:"subscriber",src:nR,alt:"group"})," "]})]})]})]},y)),T.jsx(Od,{to:"/media/roomList/create",className:"nav-item createLive-btn",children:T.jsx("span",{children:"라이브 켜기"})})]})})}var oR={},hde=wt;Object.defineProperty(oR,"__esModule",{value:!0});var WB=oR.default=void 0,mde=hde(xt()),vde=T;WB=oR.default=(0,mde.default)((0,vde.jsx)("path",{d:"M21 6h-3.17L16 4h-6v2h5.12l1.83 2H21v12H5v-9H3v9c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2M8 14c0 2.76 2.24 5 5 5s5-2.24 5-5-2.24-5-5-5-5 2.24-5 5m5-3c1.65 0 3 1.35 3 3s-1.35 3-3 3-3-1.35-3-3 1.35-3 3-3M5 6h3V4H5V1H3v3H0v2h3v3h2z"}),"AddAPhotoOutlined");var aR={},gde=wt;Object.defineProperty(aR,"__esModule",{value:!0});var HB=aR.default=void 0,yde=gde(xt()),bde=T;HB=aR.default=(0,yde.default)((0,bde.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8m4.17-5.24-1.1-1.1c.71-1.33.53-3.01-.59-4.13C13.79 8.84 12.9 8.5 12 8.5c-.03 0-.06.01-.09.01L13 9.6l-1.06 1.06-2.83-2.83L11.94 5 13 6.06l-.96.96c1.27.01 2.53.48 3.5 1.44 1.7 1.71 1.91 4.36.63 6.3m-1.28 1.41L12.06 19 11 17.94l.95-.95c-1.26-.01-2.52-.5-3.48-1.46-1.71-1.71-1.92-4.35-.64-6.29l1.1 1.1c-.71 1.33-.53 3.01.59 4.13.7.7 1.63 1.04 2.56 1.01L11 14.4l1.06-1.06z"}),"ChangeCircleOutlined");function wde(){const t=jr(),n=!0,e="https://i10c203.p.ssafy.io/api",[r,i]=H.useState(""),[o,a]=H.useState(""),[s,u]=H.useState(null),[l,c]=H.useState(null),d=H.useRef(),f=y=>{i(y.target.value)},p=y=>{y.preventDefault(),d.current.click()};H.useEffect(()=>{o&&u(T.jsx("img",{className:"room-create-upload-img",src:o}))},[o]);const h=y=>{y.preventDefault();const b=y.target.files[0],w=new FileReader;w.onloadend=()=>{a(w.result)},b&&(w.readAsDataURL(b),v(b))},v=y=>{Nt.post(e+"/images/presigned",{filename:y.name}).then(b=>{console.log(b.data),c(b.data.imageUrl),g(b.data.preSignedUrl,y)}).catch(b=>console.error(b))},g=(y,b)=>{Nt.put(y,b,{headers:{"Content-Type":b==null?void 0:b.type}}).then(w=>{console.log(w)}).catch(w=>{console.log(w)})},m=y=>{const b=Math.floor(Math.random()*1e6);t(`/live/Gitaehasam${b}`,{state:{isHost:n,roomId:b,imageUrl:l||null,name:r}})};return T.jsxs(T.Fragment,{children:[T.jsxs("div",{className:"roomList-header",onClick:()=>t("/media/roomList"),children:[T.jsx("img",{src:l2,alt:""}),T.jsx("span",{children:"라이브 생성"})]}),T.jsxs("form",{className:"room-create-form",onSubmit:m,children:[T.jsxs("div",{className:"room-create-header",children:[T.jsx("div",{className:"room-create-thumbnail-title",children:"특별한 사진으로 라이브를 표현해보세요"}),T.jsxs("div",{className:"room-create-thumbnail",children:[s,o?T.jsx("div",{className:"room-create-thumbnail-btn-bottom",onClick:p,children:T.jsx(HB,{})}):T.jsx("div",{className:"room-create-thumbnail-btn",onClick:p,children:T.jsx(WB,{})})]}),T.jsx("input",{ref:d,hidden:!0,type:"file",onChange:h})]}),T.jsxs("div",{className:"room-create-header",children:[T.jsx("div",{className:"room-create-thumbnail-title",children:"제목"}),T.jsx("input",{className:"room-create-title",type:"text",maxLength:15,value:r,onChange:f,placeholder:"라이브 제목을 적어주세요.",required:!0})]}),T.jsx("div",{className:"room-create-btn",children:T.jsx("button",{type:"submit",children:"라이브 켜기"})})]})]})}var GB={},sR={};(function(t){var n=ve&&ve.__extends||function(){var r=function(i,o){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,s){a.__proto__=s}||function(a,s){for(var u in s)Object.prototype.hasOwnProperty.call(s,u)&&(a[u]=s[u])},r(i,o)};return function(i,o){r(i,o);function a(){this.constructor=i}i.prototype=o===null?Object.create(o):(a.prototype=o.prototype,new a)}}();function e(r){if(!r)return e.__;Array.prototype.reduce||(Array.prototype.reduce=function(a,s){for(var u=s,l=0;l<this.length;l++)u=a(u,this[l],l,this);return u});var i="",o=("."+r).split(".").reduce(function(a,s,u,l){i?i+="."+s:i=s;var c=a["__"+i];return c===void 0&&(e.Logger.prototype=a,c=new e.Logger(i),a["__"+i]=c),c},e.__);return o}(function(r){r.requestId="",r.entryId=0,r._createXMLHttpRequest=function(){return new XMLHttpRequest},r._getTime=function(){return new Date().getTime()},r._console=console,r._appenderNames=[];function i(A,I,_){if(I[A]!==void 0){if(I[A]===null){delete _[A];return}_[A]=I[A]}}function o(A){if(r.enabled!=null&&!r.enabled)return!1;try{if(A.userAgentRegex&&!new RegExp(A.userAgentRegex).test(navigator.userAgent))return!1}catch{}try{if(A.ipRegex&&r.clientIP&&!new RegExp(A.ipRegex).test(r.clientIP))return!1}catch{}return!0}function a(A,I){try{if(A.disallow&&new RegExp(A.disallow).test(I))return!1}catch{}return!0}function s(A){return typeof A=="function"?A instanceof RegExp?A.toString():A():A}var u=function(){function A(I,_,F){this.msg=I,this.meta=_,this.finalString=F}return A}();function l(A){var I=s(A),_;switch(typeof I){case"string":return new u(I,null,I);case"number":return _=I.toString(),new u(_,null,_);case"boolean":return _=I.toString(),new u(_,null,_);case"undefined":return new u("undefined",null,"undefined");case"object":return I instanceof RegExp||I instanceof String||I instanceof Number||I instanceof Boolean?(_=I.toString(),new u(_,null,_)):(typeof r.serialize=="function"?_=r.serialize.call(this,I):_=JSON.stringify(I),new u("",I,_));default:return new u("unknown",null,"unknown")}}function c(A){return i("enabled",A,this),i("maxMessages",A,this),i("defaultAjaxUrl",A,this),i("clientIP",A,this),i("requestId",A,this),i("defaultBeforeSend",A,this),i("serialize",A,this),this}r.setOptions=c;function d(){return-2147483648}r.getAllLevel=d;function f(){return 1e3}r.getTraceLevel=f;function p(){return 2e3}r.getDebugLevel=p;function h(){return 3e3}r.getInfoLevel=h;function v(){return 4e3}r.getWarnLevel=v;function g(){return 5e3}r.getErrorLevel=g;function m(){return 6e3}r.getFatalLevel=m;function y(){return 2147483647}r.getOffLevel=y;function b(A){return A<=1e3?"trace":A<=2e3?"debug":A<=3e3?"info":A<=4e3?"warn":A<=5e3?"error":"fatal"}var w=function(){function A(I,_){this.inner=_,this.name="JL.Exception",this.message=l(I).finalString}return A}();r.Exception=w,w.prototype=new Error;var x=function(){function A(I,_,F,L,W){this.l=I,this.m=_,this.n=F,this.t=L,this.u=W}return A}();r.LogItem=x;function C(A,I,_){return r.entryId++,new x(A,I,_,r._getTime(),r.entryId)}function E(A){A.id&&(clearTimeout(A.id),A.id=null)}function S(A,I,_){var F=this;A.id||(A.id=setTimeout(function(){_.call(F)},I))}var N=function(){function A(I,_){this.appenderName=I,this.sendLogItems=_,this.level=r.getTraceLevel(),this.sendWithBufferLevel=2147483647,this.storeInBufferLevel=-2147483648,this.bufferSize=0,this.batchSize=1,this.maxBatchSize=20,this.batchTimeout=2147483647,this.sendTimeout=5e3,this.buffer=[],this.batchBuffer=[],this.batchTimeoutTimer={id:null},this.sendTimeoutTimer={id:null},this.nbrLogItemsSkipped=0,this.nbrLogItemsBeingSent=0;var F="Trying to create an appender without a name or with an empty name";if(I==null)throw F;if(r._appenderNames.indexOf(I)!=-1)throw I?"Multiple appenders use the same name "+I:F;r._appenderNames.push(I)}return A.prototype.addLogItemsToBuffer=function(I){if(this.batchBuffer.length>=this.maxBatchSize){this.nbrLogItemsSkipped+=I.length;return}if(r.maxMessages!=null){if(r.maxMessages<1)return;r.maxMessages-=I.length}this.batchBuffer=this.batchBuffer.concat(I);var _=this;S(this.batchTimeoutTimer,this.batchTimeout,function(){_.sendBatch.call(_)})},A.prototype.batchBufferHasOverdueMessages=function(){for(var I=0;I<this.batchBuffer.length;I++){var _=r._getTime()-this.batchBuffer[I].t;if(_>this.batchTimeout)return!0}return!1},A.prototype.batchBufferHasStrandedMessage=function(){return r.maxMessages!=null&&r.maxMessages<1&&this.batchBuffer.length>0},A.prototype.sendBatchIfComplete=function(){(this.batchBuffer.length>=this.batchSize||this.batchBufferHasOverdueMessages()||this.batchBufferHasStrandedMessage())&&this.sendBatch()},A.prototype.onSendingEnded=function(){E(this.sendTimeoutTimer),this.nbrLogItemsBeingSent=0,this.sendBatchIfComplete()},A.prototype.setOptions=function(I){if(i("level",I,this),i("ipRegex",I,this),i("userAgentRegex",I,this),i("disallow",I,this),i("sendWithBufferLevel",I,this),i("storeInBufferLevel",I,this),i("bufferSize",I,this),i("batchSize",I,this),i("maxBatchSize",I,this),i("batchTimeout",I,this),i("sendTimeout",I,this),this.bufferSize<this.buffer.length&&(this.buffer.length=this.bufferSize),this.maxBatchSize<this.batchSize)throw new r.Exception({message:"maxBatchSize cannot be smaller than batchSize",maxBatchSize:this.maxBatchSize,batchSize:this.batchSize});return this},A.prototype.log=function(I,_,F,L,W,B,q){var G;if(o(this)&&a(this,B)&&!(W<this.storeInBufferLevel)){if(G=C(W,B,q),W<this.level){this.bufferSize>0&&(this.buffer.push(G),this.buffer.length>this.bufferSize&&this.buffer.shift());return}this.addLogItemsToBuffer([G]),W>=this.sendWithBufferLevel&&this.buffer.length&&(this.addLogItemsToBuffer(this.buffer),this.buffer.length=0),this.sendBatchIfComplete()}},A.prototype.sendBatch=function(){if(!(this.nbrLogItemsBeingSent>0)&&(E(this.batchTimeoutTimer),this.batchBuffer.length!=0)){this.nbrLogItemsBeingSent=this.batchBuffer.length;var I=this;S(this.sendTimeoutTimer,this.sendTimeout,function(){I.onSendingEnded.call(I)}),this.sendLogItems(this.batchBuffer,function(){I.batchBuffer.splice(0,I.nbrLogItemsBeingSent),I.nbrLogItemsSkipped>0&&(I.batchBuffer.push(C(v(),"Lost "+I.nbrLogItemsSkipped+" messages. Either connection with the server was down or logging was disabled via the enabled option. Reduce lost messages by increasing the ajaxAppender option maxBatchSize.",I.appenderName)),I.nbrLogItemsSkipped=0),I.onSendingEnded.call(I)})}},A}();r.Appender=N;var k=function(A){n(I,A);function I(_){return A.call(this,_,I.prototype.sendLogItemsAjax)||this}return I.prototype.setOptions=function(_){return i("url",_,this),i("beforeSend",_,this),A.prototype.setOptions.call(this,_),this},I.prototype.sendLogItemsAjax=function(_,F){try{if(!o(this))return;this.xhr&&this.xhr.readyState!=0&&this.xhr.readyState!=4&&this.xhr.abort(),this.xhr=r._createXMLHttpRequest();var L="/jsnlog.logger";r.defaultAjaxUrl!=null&&(L=r.defaultAjaxUrl),this.url&&(L=this.url),this.xhr.open("POST",L),this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.setRequestHeader("JSNLog-RequestId",r.requestId);var W=this;this.xhr.onreadystatechange=function(){W.xhr.readyState==4&&W.xhr.status>=200&&W.xhr.status<300&&F()};var B={r:r.requestId,lg:_};typeof this.beforeSend=="function"?this.beforeSend.call(this,this.xhr,B):typeof r.defaultBeforeSend=="function"&&r.defaultBeforeSend.call(this,this.xhr,B);var q=JSON.stringify(B);this.xhr.send(q)}catch{}},I}(N);r.AjaxAppender=k;var M=function(A){n(I,A);function I(_){return A.call(this,_,I.prototype.sendLogItemsConsole)||this}return I.prototype.clog=function(_){r._console.log(_)},I.prototype.cerror=function(_){r._console.error?r._console.error(_):this.clog(_)},I.prototype.cwarn=function(_){r._console.warn?r._console.warn(_):this.clog(_)},I.prototype.cinfo=function(_){r._console.info?r._console.info(_):this.clog(_)},I.prototype.cdebug=function(_){r._console.debug?r._console.debug(_):this.cinfo(_)},I.prototype.sendLogItemsConsole=function(_,F){try{if(!o(this)||!r._console)return;var L;for(L=0;L<_.length;++L){var W=_[L],B=W.n+": "+W.m;typeof window>"u"&&(B=new Date(W.t)+" | "+B),W.l<=r.getDebugLevel()?this.cdebug(B):W.l<=r.getInfoLevel()?this.cinfo(B):W.l<=r.getWarnLevel()?this.cwarn(B):this.cerror(B)}}catch{}F()},I}(N);r.ConsoleAppender=M;var D=function(){function A(I){this.loggerName=I,this.seenRegexes=[]}return A.prototype.setOptions=function(I){return i("level",I,this),i("userAgentRegex",I,this),i("disallow",I,this),i("ipRegex",I,this),i("appenders",I,this),i("onceOnly",I,this),this.seenRegexes=[],this},A.prototype.buildExceptionObject=function(I){var _={};return I.stack?_.stack=I.stack:_.e=I,I.message&&(_.message=I.message),I.name&&(_.name=I.name),I.data&&(_.data=I.data),I.inner&&(_.inner=this.buildExceptionObject(I.inner)),_},A.prototype.log=function(I,_,F){var L=0,W,B;if(!this.appenders)return this;if(I>=this.level&&o(this)&&(F?(B=this.buildExceptionObject(F),B.logData=s(_)):B=_,W=l(B),a(this,W.finalString))){if(this.onceOnly)for(L=this.onceOnly.length-1;L>=0;){if(new RegExp(this.onceOnly[L]).test(W.finalString)){if(this.seenRegexes[L])return this;this.seenRegexes[L]=!0}L--}for(W.meta=W.meta||{},L=this.appenders.length-1;L>=0;)this.appenders[L].log(b(I),W.msg,W.meta,function(){},I,W.finalString,this.loggerName),L--}return this},A.prototype.trace=function(I){return this.log(f(),I)},A.prototype.debug=function(I){return this.log(p(),I)},A.prototype.info=function(I){return this.log(h(),I)},A.prototype.warn=function(I){return this.log(v(),I)},A.prototype.error=function(I){return this.log(g(),I)},A.prototype.fatal=function(I){return this.log(m(),I)},A.prototype.fatalException=function(I,_){return this.log(m(),I,_)},A}();r.Logger=D;function R(A){return new k(A)}r.createAjaxAppender=R;function O(A){return new M(A)}r.createConsoleAppender=O;var P;typeof window<"u"?P=new k(""):P=new M(""),r.__=new r.Logger(""),r.__.setOptions({level:r.getDebugLevel(),appenders:[P]})})(e||(e={})),t.__esModule=!0,t.JL=e,typeof __jsnlog_configure=="function"&&__jsnlog_configure(e),typeof window<"u"&&!window.onerror&&(window.onerror=function(r,i,o,a,s){return e("onerrorLogger").fatalException({msg:"Uncaught Exception",errorMsg:r?r.message||r:"",url:i,"line number":o,column:a},s),!1}),typeof window<"u"&&!window.onunhandledrejection&&(window.onunhandledrejection=function(r){e("onerrorLogger").fatalException({msg:"unhandledrejection",errorMsg:r.reason?r.reason.message:r.message||null},r.reason)})})(sR);var Uy={},Fp={},uR={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.LocalRecorderState=void 0,function(n){n.READY="READY",n.RECORDING="RECORDING",n.PAUSED="PAUSED",n.FINISHED="FINISHED"}(t.LocalRecorderState||(t.LocalRecorderState={}))})(uR);var An={},Wy={};Object.defineProperty(Wy,"__esModule",{value:!0});Wy.ConsoleLogger=void 0;var xde=function(){function t(n){this.logger=n,this.log=n.log,this.info=n.info,this.debug=n.debug,this.warn=n.warn,this.error=n.error}return t}();Wy.ConsoleLogger=xde;var lR={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.OpenViduLoggerConfiguration=void 0,function(n){n.disabled="disabled",n.debug="debug",n.debug_app="debug_app"}(t.OpenViduLoggerConfiguration||(t.OpenViduLoggerConfiguration={}))})(lR);Object.defineProperty(An,"__esModule",{value:!0});An.OpenViduLogger=void 0;var di=sR,Sde=Wy,L1=lR,Ede=function(){function t(){this.JSNLOG_URL="/openvidu/elk/openvidu-browser-logs",this.MAX_JSNLOG_BATCH_LOG_MESSAGES=100,this.MAX_MSECONDS_BATCH_MESSAGES=5e3,this.MAX_LENGTH_STRING_JSON=1e3,this.defaultConsoleLogger=new Sde.ConsoleLogger(globalThis.console),this.isProdMode=!1,this.isJSNLogSetup=!1}return t.configureJSNLog=function(n,e){var r=this;try{if(globalThis.LOG_JSNLOG_RESULTS||this.instance&&n.isAtLeastPro&&this.instance.isOpenViduBrowserLogsDebugActive(n)&&this.instance.canConfigureJSNLog(n,this.instance)){n.sendBrowserLogs===L1.OpenViduLoggerConfiguration.debug_app&&this.instance.replaceWindowConsole(),this.instance.isJSNLogSetup=!1,this.instance.info("Configuring JSNLogs.");var i=n.finalUserId,o=n.session.sessionId,a=function(u){var l=u.onreadystatechange;u.onreadystatechange=function(){r.isInvalidResponse(u)&&(Object.defineProperty(u,"readyState",{value:4}),Object.defineProperty(u,"status",{value:200}),r.instance.disableLogger()),l()},u.setRequestHeader("Authorization","Basic "+btoa("".concat(i,"%/%").concat(o)+":"+e)),u.setRequestHeader("X-Requested-With","XMLHttpRequest"),u.setRequestHeader("OV-Final-User-Id",i),u.setRequestHeader("OV-Session-Id",o),u.setRequestHeader("OV-Token",e)};this.instance.currentAppender=di.JL.createAjaxAppender("appender-".concat(i,"-").concat(o)),this.instance.currentAppender.setOptions({beforeSend:a,maxBatchSize:1e3,batchSize:this.instance.MAX_JSNLOG_BATCH_LOG_MESSAGES,batchTimeout:this.instance.MAX_MSECONDS_BATCH_MESSAGES});var s=function(u){var l=function(){var d=new WeakSet;return function(f,p){if(typeof p=="object"&&p!=null){if(d.has(p)||globalThis.HTMLElement&&p instanceof HTMLElement)return;d.add(p)}return p}},c=JSON.stringify(u,l());return c.length>r.instance.MAX_LENGTH_STRING_JSON&&(c="".concat(c.substring(0,r.instance.MAX_LENGTH_STRING_JSON),"...")),globalThis.LOG_JSNLOG_RESULTS&&console.log(c),c};di.JL.setOptions({defaultAjaxUrl:n.httpUri+this.instance.JSNLOG_URL,serialize:s,enabled:!0}),(0,di.JL)().setOptions({appenders:[this.instance.currentAppender]}),this.instance.isJSNLogSetup=!0,this.instance.loggingSessionId=o,this.instance.info("JSNLog configured.")}}catch(u){console.error("Error configuring JSNLog: "),console.error(u),this.instance.disableLogger()}},t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.isInvalidResponse=function(n){return n.status==401||n.status==403||n.status==404||n.status==0},t.prototype.canConfigureJSNLog=function(n,e){return n.session.sessionId!=e.loggingSessionId},t.prototype.isOpenViduBrowserLogsDebugActive=function(n){return n.sendBrowserLogs===L1.OpenViduLoggerConfiguration.debug||n.sendBrowserLogs===L1.OpenViduLoggerConfiguration.debug_app},t.prototype.getConsoleWithJSNLog=function(){return function(n){return{log:function(){n.defaultConsoleLogger.log.apply(n.defaultConsoleLogger.logger,arguments),n.isJSNLogSetup&&(0,di.JL)().info(arguments)},info:function(){n.defaultConsoleLogger.info.apply(n.defaultConsoleLogger.logger,arguments),n.isJSNLogSetup&&(0,di.JL)().info(arguments)},debug:function(){n.defaultConsoleLogger.debug.apply(n.defaultConsoleLogger.logger,arguments)},warn:function(){n.defaultConsoleLogger.warn.apply(n.defaultConsoleLogger.logger,arguments),n.isJSNLogSetup&&(0,di.JL)().warn(arguments)},error:function(){n.defaultConsoleLogger.error.apply(n.defaultConsoleLogger.logger,arguments),n.isJSNLogSetup&&(0,di.JL)().error(arguments)}}}(this)},t.prototype.replaceWindowConsole=function(){globalThis.console=this.defaultConsoleLogger.logger,globalThis.console.log=this.getConsoleWithJSNLog().log,globalThis.console.info=this.getConsoleWithJSNLog().info,globalThis.console.debug=this.getConsoleWithJSNLog().debug,globalThis.console.warn=this.getConsoleWithJSNLog().warn,globalThis.console.error=this.getConsoleWithJSNLog().error},t.prototype.disableLogger=function(){di.JL.setOptions({enabled:!1}),this.isJSNLogSetup=!1,this.loggingSessionId=void 0,this.currentAppender=void 0,globalThis.console=this.defaultConsoleLogger.logger,globalThis.console.log=this.defaultConsoleLogger.log,globalThis.console.info=this.defaultConsoleLogger.info,globalThis.console.debug=this.defaultConsoleLogger.debug,globalThis.console.warn=this.defaultConsoleLogger.warn,globalThis.console.error=this.defaultConsoleLogger.error},t.prototype.log=function(){this.isProdMode||this.defaultConsoleLogger.log.apply(this.defaultConsoleLogger.logger,arguments),this.isJSNLogSetup&&(0,di.JL)().info(arguments)},t.prototype.debug=function(){this.isProdMode||this.defaultConsoleLogger.debug.apply(this.defaultConsoleLogger.logger,arguments)},t.prototype.info=function(){this.isProdMode||this.defaultConsoleLogger.info.apply(this.defaultConsoleLogger.logger,arguments),this.isJSNLogSetup&&(0,di.JL)().info(arguments)},t.prototype.warn=function(){this.defaultConsoleLogger.warn.apply(this.defaultConsoleLogger.logger,arguments),this.isJSNLogSetup&&(0,di.JL)().warn(arguments)},t.prototype.error=function(){this.defaultConsoleLogger.error.apply(this.defaultConsoleLogger.logger,arguments),this.isJSNLogSetup&&(0,di.JL)().error(arguments)},t.prototype.flush=function(){this.isJSNLogSetup&&this.currentAppender!=null&&this.currentAppender.sendBatch()},t.prototype.enableProdMode=function(){this.isProdMode=!0},t}();An.OpenViduLogger=Ede;var Yi={},Pv={exports:{}};/*!
 * Platform.js v1.3.6
 * Copyright 2014-2020 Benjamin Tan
 * Copyright 2011-2013 John-David Dalton
 * Available under MIT license
 */Pv.exports;(function(t,n){(function(){var e={function:!0,object:!0},r=e[typeof window]&&window||this,i=n,o=t&&!t.nodeType&&t,a=i&&o&&typeof ve=="object"&&ve;a&&(a.global===a||a.window===a||a.self===a)&&(r=a);var s=Math.pow(2,53)-1,u=/\bOpera/,l=Object.prototype,c=l.hasOwnProperty,d=l.toString;function f(S){return S=String(S),S.charAt(0).toUpperCase()+S.slice(1)}function p(S,N,k){var M={"10.0":"10","6.4":"10 Technical Preview","6.3":"8.1","6.2":"8","6.1":"Server 2008 R2 / 7","6.0":"Server 2008 / Vista","5.2":"Server 2003 / XP 64-bit","5.1":"XP","5.01":"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return N&&k&&/^Win/i.test(S)&&!/^Windows Phone /i.test(S)&&(M=M[/[\d.]+$/.exec(S)])&&(S="Windows "+M),S=String(S),N&&k&&(S=S.replace(RegExp(N,"i"),k)),S=v(S.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0]),S}function h(S,N){var k=-1,M=S?S.length:0;if(typeof M=="number"&&M>-1&&M<=s)for(;++k<M;)N(S[k],k,S);else g(S,N)}function v(S){return S=x(S),/^(?:webOS|i(?:OS|P))/.test(S)?S:f(S)}function g(S,N){for(var k in S)c.call(S,k)&&N(S[k],k,S)}function m(S){return S==null?f(S):d.call(S).slice(8,-1)}function y(S,N){var k=S!=null?typeof S[N]:"number";return!/^(?:boolean|number|string|undefined)$/.test(k)&&(k=="object"?!!S[N]:!0)}function b(S){return String(S).replace(/([ -])(?!$)/g,"$1?")}function w(S,N){var k=null;return h(S,function(M,D){k=N(k,M,D,S)}),k}function x(S){return String(S).replace(/^ +| +$/g,"")}function C(S){var N=r,k=S&&typeof S=="object"&&m(S)!="String";k&&(N=S,S=null);var M=N.navigator||{},D=M.userAgent||"";S||(S=D);var R=k?!!M.likeChrome:/\bChrome\b/.test(S)&&!/internal|\n/i.test(d.toString()),O="Object",P=k?O:"ScriptBridgingProxyObject",A=k?O:"Environment",I=k&&N.java?"JavaPackage":m(N.java),_=k?O:"RuntimeObject",F=/\bJava/.test(I)&&N.java,L=F&&m(N.environment)==A,W=F?"a":"α",B=F?"b":"β",q=N.document||{},G=N.operamini||N.opera,re=u.test(re=k&&G?G["[[Class]]"]:m(G))?re:G=null,j,ae=S,te=[],le=null,Ee=S==D,se=Ee&&G&&typeof G.version=="function"&&G.version(),be,fe=On([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"]),Z=pn(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"(?:Edge|Edg|EdgA|EdgiOS)"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Vivaldi","Waterfox","WebPositive",{label:"Yandex Browser",pattern:"YaBrowser"},{label:"UC Browser",pattern:"UCBrowser"},"Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chromium","Chrome",{label:"Chrome",pattern:"(?:HeadlessChrome)"},{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),ge=lt([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),we=fn({Apple:{iPad:1,iPhone:1,iPod:1},Alcatel:{},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},Huawei:{},Lenovo:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Oppo:{},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1},Xiaomi:{Mi:1,Redmi:1}}),de=De(["Windows Phone","KaiOS","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian",{label:"DragonFly BSD",pattern:"DragonFly"},"Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);function On(ze){return w(ze,function(Ze,qe){return Ze||RegExp("\\b"+(qe.pattern||b(qe))+"\\b","i").exec(S)&&(qe.label||qe)})}function fn(ze){return w(ze,function(Ze,qe,St){return Ze||(qe[ge]||qe[/^[a-z]+(?: +[a-z]+\b)*/i.exec(ge)]||RegExp("\\b"+b(St)+"(?:\\b|\\w*\\d)","i").exec(S))&&St})}function pn(ze){return w(ze,function(Ze,qe){return Ze||RegExp("\\b"+(qe.pattern||b(qe))+"\\b","i").exec(S)&&(qe.label||qe)})}function De(ze){return w(ze,function(Ze,qe){var St=qe.pattern||b(qe);return!Ze&&(Ze=RegExp("\\b"+St+"(?:/[\\d.]+|[ \\w.]*)","i").exec(S))&&(Ze=p(Ze,St,qe.label||qe)),Ze})}function lt(ze){return w(ze,function(Ze,qe){var St=qe.pattern||b(qe);return!Ze&&(Ze=RegExp("\\b"+St+" *\\d+[.\\w_]*","i").exec(S)||RegExp("\\b"+St+" *\\w+-[\\w]*","i").exec(S)||RegExp("\\b"+St+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(S))&&((Ze=String(qe.label&&!RegExp(St,"i").test(qe.label)?qe.label:Ze).split("/"))[1]&&!/[\d.]+/.test(Ze[0])&&(Ze[0]+=" "+Ze[1]),qe=qe.label||qe,Ze=v(Ze[0].replace(RegExp(St,"i"),qe).replace(RegExp("; *(?:"+qe+"[_-])?","i")," ").replace(RegExp("("+qe+")[-_.]?(\\w)","i"),"$1 $2"))),Ze})}function Le(ze){return w(ze,function(Ze,qe){return Ze||(RegExp(qe+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(S)||0)[1]||null})}function Xe(){return this.description||""}if(fe&&(fe=[fe]),/\bAndroid\b/.test(de)&&!ge&&(j=/\bAndroid[^;]*;(.*?)(?:Build|\) AppleWebKit)\b/i.exec(S))&&(ge=x(j[1]).replace(/^[a-z]{2}-[a-z]{2};\s*/i,"")||null),we&&!ge?ge=lt([we]):we&&ge&&(ge=ge.replace(RegExp("^("+b(we)+")[-_.\\s]","i"),we+" ").replace(RegExp("^("+b(we)+")[-_.]?(\\w)","i"),we+" $2")),(j=/\bGoogle TV\b/.exec(ge))&&(ge=j[0]),/\bSimulator\b/i.test(S)&&(ge=(ge?ge+" ":"")+"Simulator"),Z=="Opera Mini"&&/\bOPiOS\b/.test(S)&&te.push("running in Turbo/Uncompressed mode"),Z=="IE"&&/\blike iPhone OS\b/.test(S)?(j=C(S.replace(/like iPhone OS/,"")),we=j.manufacturer,ge=j.product):/^iP/.test(ge)?(Z||(Z="Safari"),de="iOS"+((j=/ OS ([\d_]+)/i.exec(S))?" "+j[1].replace(/_/g,"."):"")):Z=="Konqueror"&&/^Linux\b/i.test(de)?de="Kubuntu":we&&we!="Google"&&(/Chrome/.test(Z)&&!/\bMobile Safari\b/i.test(S)||/\bVita\b/.test(ge))||/\bAndroid\b/.test(de)&&/^Chrome/.test(Z)&&/\bVersion\//i.test(S)?(Z="Android Browser",de=/\bAndroid\b/.test(de)?de:"Android"):Z=="Silk"?(/\bMobi/i.test(S)||(de="Android",te.unshift("desktop mode")),/Accelerated *= *true/i.test(S)&&te.unshift("accelerated")):Z=="UC Browser"&&/\bUCWEB\b/.test(S)?te.push("speed mode"):Z=="PaleMoon"&&(j=/\bFirefox\/([\d.]+)\b/.exec(S))?te.push("identifying as Firefox "+j[1]):Z=="Firefox"&&(j=/\b(Mobile|Tablet|TV)\b/i.exec(S))?(de||(de="Firefox OS"),ge||(ge=j[1])):!Z||(j=!/\bMinefield\b/i.test(S)&&/\b(?:Firefox|Safari)\b/.exec(Z))?(Z&&!ge&&/[\/,]|^[^(]+?\)/.test(S.slice(S.indexOf(j+"/")+8))&&(Z=null),(j=ge||we||de)&&(ge||we||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(de))&&(Z=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(de)?de:j)+" Browser")):Z=="Electron"&&(j=(/\bChrome\/([\d.]+)\b/.exec(S)||0)[1])&&te.push("Chromium "+j),se||(se=Le(["(?:Cloud9|CriOS|CrMo|Edge|Edg|EdgA|EdgiOS|FxiOS|HeadlessChrome|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$)|UCBrowser|YaBrowser)","Version",b(Z),"(?:Firefox|Minefield|NetFront)"])),(j=fe=="iCab"&&parseFloat(se)>3&&"WebKit"||/\bOpera\b/.test(Z)&&(/\bOPR\b/.test(S)?"Blink":"Presto")||/\b(?:Midori|Nook|Safari)\b/i.test(S)&&!/^(?:Trident|EdgeHTML)$/.test(fe)&&"WebKit"||!fe&&/\bMSIE\b/i.test(S)&&(de=="Mac OS"?"Tasman":"Trident")||fe=="WebKit"&&/\bPlayStation\b(?! Vita\b)/i.test(Z)&&"NetFront")&&(fe=[j]),Z=="IE"&&(j=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(S)||0)[1])?(Z+=" Mobile",de="Windows Phone "+(/\+$/.test(j)?j:j+".x"),te.unshift("desktop mode")):/\bWPDesktop\b/i.test(S)?(Z="IE Mobile",de="Windows Phone 8.x",te.unshift("desktop mode"),se||(se=(/\brv:([\d.]+)/.exec(S)||0)[1])):Z!="IE"&&fe=="Trident"&&(j=/\brv:([\d.]+)/.exec(S))&&(Z&&te.push("identifying as "+Z+(se?" "+se:"")),Z="IE",se=j[1]),Ee){if(y(N,"global"))if(F&&(j=F.lang.System,ae=j.getProperty("os.arch"),de=de||j.getProperty("os.name")+" "+j.getProperty("os.version")),L){try{se=N.require("ringo/engine").version.join("."),Z="RingoJS"}catch{(j=N.system)&&j.global.system==N.system&&(Z="Narwhal",de||(de=j[0].os||null))}Z||(Z="Rhino")}else typeof N.process=="object"&&!N.process.browser&&(j=N.process)&&(typeof j.versions=="object"&&(typeof j.versions.electron=="string"?(te.push("Node "+j.versions.node),Z="Electron",se=j.versions.electron):typeof j.versions.nw=="string"&&(te.push("Chromium "+se,"Node "+j.versions.node),Z="NW.js",se=j.versions.nw)),Z||(Z="Node.js",ae=j.arch,de=j.platform,se=/[\d.]+/.exec(j.version),se=se?se[0]:null));else m(j=N.runtime)==P?(Z="Adobe AIR",de=j.flash.system.Capabilities.os):m(j=N.phantom)==_?(Z="PhantomJS",se=(j=j.version||null)&&j.major+"."+j.minor+"."+j.patch):typeof q.documentMode=="number"&&(j=/\bTrident\/(\d+)/i.exec(S))?(se=[se,q.documentMode],(j=+j[1]+4)!=se[1]&&(te.push("IE "+se[1]+" mode"),fe&&(fe[1]=""),se[1]=j),se=Z=="IE"?String(se[1].toFixed(1)):se[0]):typeof q.documentMode=="number"&&/^(?:Chrome|Firefox)\b/.test(Z)&&(te.push("masking as "+Z+" "+se),Z="IE",se="11.0",fe=["Trident"],de="Windows");de=de&&v(de)}if(se&&(j=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(se)||/(?:alpha|beta)(?: ?\d)?/i.exec(S+";"+(Ee&&M.appMinorVersion))||/\bMinefield\b/i.test(S)&&"a")&&(le=/b/i.test(j)?"beta":"alpha",se=se.replace(RegExp(j+"\\+?$"),"")+(le=="beta"?B:W)+(/\d+\+?/.exec(j)||"")),Z=="Fennec"||Z=="Firefox"&&/\b(?:Android|Firefox OS|KaiOS)\b/.test(de))Z="Firefox Mobile";else if(Z=="Maxthon"&&se)se=se.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(ge))ge=="Xbox 360"&&(de=null),ge=="Xbox 360"&&/\bIEMobile\b/.test(S)&&te.unshift("mobile mode");else if((/^(?:Chrome|IE|Opera)$/.test(Z)||Z&&!ge&&!/Browser|Mobi/.test(Z))&&(de=="Windows CE"||/Mobi/i.test(S)))Z+=" Mobile";else if(Z=="IE"&&Ee)try{N.external===null&&te.unshift("platform preview")}catch{te.unshift("embedded")}else(/\bBlackBerry\b/.test(ge)||/\bBB10\b/.test(S))&&(j=(RegExp(ge.replace(/ +/g," *")+"/([.\\d]+)","i").exec(S)||0)[1]||se)?(j=[j,/BB10/.test(S)],de=(j[1]?(ge=null,we="BlackBerry"):"Device Software")+" "+j[0],se=null):this!=g&&ge!="Wii"&&(Ee&&G||/Opera/.test(Z)&&/\b(?:MSIE|Firefox)\b/i.test(S)||Z=="Firefox"&&/\bOS X (?:\d+\.){2,}/.test(de)||Z=="IE"&&(de&&!/^Win/.test(de)&&se>5.5||/\bWindows XP\b/.test(de)&&se>8||se==8&&!/\bTrident\b/.test(S)))&&!u.test(j=C.call(g,S.replace(u,"")+";"))&&j.name&&(j="ing as "+j.name+((j=j.version)?" "+j:""),u.test(Z)?(/\bIE\b/.test(j)&&de=="Mac OS"&&(de=null),j="identify"+j):(j="mask"+j,re?Z=v(re.replace(/([a-z])([A-Z])/g,"$1 $2")):Z="Opera",/\bIE\b/.test(j)&&(de=null),Ee||(se=null)),fe=["Presto"],te.push(j));(j=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(S)||0)[1])&&(j=[parseFloat(j.replace(/\.(\d)$/,".0$1")),j],Z=="Safari"&&j[1].slice(-1)=="+"?(Z="WebKit Nightly",le="alpha",se=j[1].slice(0,-1)):(se==j[1]||se==(j[2]=(/\bSafari\/([\d.]+\+?)/i.exec(S)||0)[1]))&&(se=null),j[1]=(/\b(?:Headless)?Chrome\/([\d.]+)/i.exec(S)||0)[1],j[0]==537.36&&j[2]==537.36&&parseFloat(j[1])>=28&&fe=="WebKit"&&(fe=["Blink"]),!Ee||!R&&!j[1]?(fe&&(fe[1]="like Safari"),j=(j=j[0],j<400?1:j<500?2:j<526?3:j<533?4:j<534?"4+":j<535?5:j<537?6:j<538?7:j<601?8:j<602?9:j<604?10:j<606?11:j<608?12:"12")):(fe&&(fe[1]="like Chrome"),j=j[1]||(j=j[0],j<530?1:j<532?2:j<532.05?3:j<533?4:j<534.03?5:j<534.07?6:j<534.1?7:j<534.13?8:j<534.16?9:j<534.24?10:j<534.3?11:j<535.01?12:j<535.02?"13+":j<535.07?15:j<535.11?16:j<535.19?17:j<536.05?18:j<536.1?19:j<537.01?20:j<537.11?"21+":j<537.13?23:j<537.18?24:j<537.24?25:j<537.36?26:fe!="Blink"?"27":"28")),fe&&(fe[1]+=" "+(j+=typeof j=="number"?".x":/[.+]/.test(j)?"":"+")),Z=="Safari"&&(!se||parseInt(se)>45)?se=j:Z=="Chrome"&&/\bHeadlessChrome/i.test(S)&&te.unshift("headless")),Z=="Opera"&&(j=/\bzbov|zvav$/.exec(de))?(Z+=" ",te.unshift("desktop mode"),j=="zvav"?(Z+="Mini",se=null):Z+="Mobile",de=de.replace(RegExp(" *"+j+"$"),"")):Z=="Safari"&&/\bChrome\b/.exec(fe&&fe[1])?(te.unshift("desktop mode"),Z="Chrome Mobile",se=null,/\bOS X\b/.test(de)?(we="Apple",de="iOS 4.3+"):de=null):/\bSRWare Iron\b/.test(Z)&&!se&&(se=Le("Chrome")),se&&se.indexOf(j=/[\d.]+$/.exec(de))==0&&S.indexOf("/"+j+"-")>-1&&(de=x(de.replace(j,""))),de&&de.indexOf(Z)!=-1&&!RegExp(Z+" OS").test(de)&&(de=de.replace(RegExp(" *"+b(Z)+" *"),"")),fe&&!/\b(?:Avant|Nook)\b/.test(Z)&&(/Browser|Lunascape|Maxthon/.test(Z)||Z!="Safari"&&/^iOS/.test(de)&&/\bSafari\b/.test(fe[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|SRWare Iron|Vivaldi|Web)/.test(Z)&&fe[1])&&(j=fe[fe.length-1])&&te.push(j),te.length&&(te=["("+te.join("; ")+")"]),we&&ge&&ge.indexOf(we)<0&&te.push("on "+we),ge&&te.push((/^on /.test(te[te.length-1])?"":"on ")+ge),de&&(j=/ ([\d.+]+)$/.exec(de),be=j&&de.charAt(de.length-j[0].length-1)=="/",de={architecture:32,family:j&&!be?de.replace(j[0],""):de,version:j?j[1]:null,toString:function(){var ze=this.version;return this.family+(ze&&!be?" "+ze:"")+(this.architecture==64?" 64-bit":"")}}),(j=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(ae))&&!/\bi686\b/i.test(ae)?(de&&(de.architecture=64,de.family=de.family.replace(RegExp(" *"+j),"")),Z&&(/\bWOW64\b/i.test(S)||Ee&&/\w(?:86|32)$/.test(M.cpuClass||M.platform)&&!/\bWin64; x64\b/i.test(S))&&te.unshift("32-bit")):de&&/^OS X/.test(de.family)&&Z=="Chrome"&&parseFloat(se)>=39&&(de.architecture=64),S||(S=null);var Pe={};return Pe.description=S,Pe.layout=fe&&fe[0],Pe.manufacturer=we,Pe.name=Z,Pe.prerelease=le,Pe.product=ge,Pe.ua=S,Pe.version=Z&&se,Pe.os=de||{architecture:null,family:null,version:null,toString:function(){return"null"}},Pe.parse=C,Pe.toString=Xe,Pe.version&&te.unshift(se),Pe.name&&te.unshift(Z),de&&Z&&!(de==String(de).split(" ")[0]&&(de==Z.split(" ")[0]||ge))&&te.push(ge?"("+de+")":"on "+de),te.length&&(Pe.description=te.join(" ")),Pe}var E=C();i&&o?g(E,function(S,N){i[N]=S}):r.platform=E}).call(ve)})(Pv,Pv.exports);var Cde=Pv.exports;Object.defineProperty(Yi,"__esModule",{value:!0});Yi.PlatformUtils=void 0;var Ke=Cde,Rde=function(){function t(){}return t.getInstance=function(){return this.instance||(this.instance=new t),t.instance},t.prototype.isChromeBrowser=function(){return Ke.name==="Chrome"},t.prototype.isSafariBrowser=function(){return Ke.name==="Safari"},t.prototype.isChromeMobileBrowser=function(){return Ke.name==="Chrome Mobile"},t.prototype.isFirefoxBrowser=function(){return Ke.name==="Firefox"},t.prototype.isFirefoxMobileBrowser=function(){return Ke.name==="Firefox Mobile"||Ke.name==="Firefox for iOS"},t.prototype.isOperaBrowser=function(){return Ke.name==="Opera"},t.prototype.isOperaMobileBrowser=function(){return Ke.name==="Opera Mobile"},t.prototype.isEdgeBrowser=function(){var n=Ke!=null&&Ke.version?parseFloat(Ke.version):-1;return Ke.name==="Microsoft Edge"&&n>=80},t.prototype.isEdgeMobileBrowser=function(){var n,e,r=Ke!=null&&Ke.version?parseFloat(Ke.version):-1;return Ke.name==="Microsoft Edge"&&(((n=Ke.os)===null||n===void 0?void 0:n.family)==="Android"||((e=Ke.os)===null||e===void 0?void 0:e.family)==="iOS")&&r>45},t.prototype.isAndroidBrowser=function(){return Ke.name==="Android Browser"},t.prototype.isElectron=function(){return Ke.name==="Electron"},t.prototype.isNodeJs=function(){return Ke.name==="Node.js"},t.prototype.isSamsungBrowser=function(){return Ke.name==="Samsung Internet Mobile"||Ke.name==="Samsung Internet"},t.prototype.isMotorolaEdgeDevice=function(){var n;return((n=Ke.product)===null||n===void 0?void 0:n.toLowerCase().includes("motorola edge"))||!1},t.prototype.isIPhoneOrIPad=function(){var n=Ke.ua?Ke.ua:navigator.userAgent,e="ontouchend"in document,r=/\b(\w*Macintosh\w*)\b/.test(n)&&e,i=/\b(\w*iPhone\w*)\b/.test(n)&&/\b(\w*Mobile\w*)\b/.test(n)&&e;return r||i},t.prototype.isIOSWithSafari=function(){var n=Ke.ua?Ke.ua:navigator.userAgent;return this.isIPhoneOrIPad()&&/\b(\w*Apple\w*)\b/.test(navigator.vendor)&&/\b(\w*Safari\w*)\b/.test(n)&&!/\b(\w*CriOS\w*)\b/.test(n)&&!/\b(\w*FxiOS\w*)\b/.test(n)},t.prototype.isIonicIos=function(){return this.isIPhoneOrIPad()&&Ke.ua.indexOf("Safari")===-1},t.prototype.isIonicAndroid=function(){return Ke.os.family==="Android"&&Ke.name=="Android Browser"},t.prototype.isMobileDevice=function(){return Ke.os.family==="iOS"||Ke.os.family==="Android"},t.prototype.isReactNative=function(){return!1},t.prototype.isChromium=function(){return this.isChromeBrowser()||this.isChromeMobileBrowser()||this.isOperaBrowser()||this.isOperaMobileBrowser()||this.isEdgeBrowser()||this.isEdgeMobileBrowser()||this.isSamsungBrowser()||this.isIonicAndroid()||this.isIonicIos()||this.isElectron()||this.isMotorolaEdgeDevice()},t.prototype.canScreenShare=function(){var n=Ke!=null&&Ke.version?parseFloat(Ke.version):-1;return this.isMobileDevice()?!1:this.isChromeBrowser()||this.isFirefoxBrowser()||this.isOperaBrowser()||this.isElectron()||this.isEdgeBrowser()||this.isSafariBrowser()&&n>=13},t.prototype.getName=function(){return Ke.name||""},t.prototype.getVersion=function(){return Ke.version||""},t.prototype.getFamily=function(){return Ke.os.family||""},t.prototype.getDescription=function(){return Ke.description||""},t}();Yi.PlatformUtils=Rde;function Hy(){this._types=Object.create(null),this._extensions=Object.create(null);for(let t=0;t<arguments.length;t++)this.define(arguments[t]);this.define=this.define.bind(this),this.getType=this.getType.bind(this),this.getExtension=this.getExtension.bind(this)}Hy.prototype.define=function(t,n){for(let e in t){let r=t[e].map(function(i){return i.toLowerCase()});e=e.toLowerCase();for(let i=0;i<r.length;i++){const o=r[i];if(o[0]!=="*"){if(!n&&o in this._types)throw new Error('Attempt to change mapping for "'+o+'" extension from "'+this._types[o]+'" to "'+e+'". Pass `force=true` to allow this, otherwise remove "'+o+'" from the list of extensions for "'+e+'".');this._types[o]=e}}if(n||!this._extensions[e]){const i=r[0];this._extensions[e]=i[0]!=="*"?i:i.substr(1)}}};Hy.prototype.getType=function(t){t=String(t);let n=t.replace(/^.*[/\\]/,"").toLowerCase(),e=n.replace(/^.*\./,"").toLowerCase(),r=n.length<t.length;return(e.length<n.length-1||!r)&&this._types[e]||null};Hy.prototype.getExtension=function(t){return t=/^\s*([^;\s]*)/.test(t)&&RegExp.$1,t&&this._extensions[t.toLowerCase()]||null};var Tde=Hy,Nde={"application/andrew-inset":["ez"],"application/applixware":["aw"],"application/atom+xml":["atom"],"application/atomcat+xml":["atomcat"],"application/atomdeleted+xml":["atomdeleted"],"application/atomsvc+xml":["atomsvc"],"application/atsc-dwd+xml":["dwd"],"application/atsc-held+xml":["held"],"application/atsc-rsat+xml":["rsat"],"application/bdoc":["bdoc"],"application/calendar+xml":["xcs"],"application/ccxml+xml":["ccxml"],"application/cdfx+xml":["cdfx"],"application/cdmi-capability":["cdmia"],"application/cdmi-container":["cdmic"],"application/cdmi-domain":["cdmid"],"application/cdmi-object":["cdmio"],"application/cdmi-queue":["cdmiq"],"application/cu-seeme":["cu"],"application/dash+xml":["mpd"],"application/davmount+xml":["davmount"],"application/docbook+xml":["dbk"],"application/dssc+der":["dssc"],"application/dssc+xml":["xdssc"],"application/ecmascript":["es","ecma"],"application/emma+xml":["emma"],"application/emotionml+xml":["emotionml"],"application/epub+zip":["epub"],"application/exi":["exi"],"application/express":["exp"],"application/fdt+xml":["fdt"],"application/font-tdpfr":["pfr"],"application/geo+json":["geojson"],"application/gml+xml":["gml"],"application/gpx+xml":["gpx"],"application/gxf":["gxf"],"application/gzip":["gz"],"application/hjson":["hjson"],"application/hyperstudio":["stk"],"application/inkml+xml":["ink","inkml"],"application/ipfix":["ipfix"],"application/its+xml":["its"],"application/java-archive":["jar","war","ear"],"application/java-serialized-object":["ser"],"application/java-vm":["class"],"application/javascript":["js","mjs"],"application/json":["json","map"],"application/json5":["json5"],"application/jsonml+json":["jsonml"],"application/ld+json":["jsonld"],"application/lgr+xml":["lgr"],"application/lost+xml":["lostxml"],"application/mac-binhex40":["hqx"],"application/mac-compactpro":["cpt"],"application/mads+xml":["mads"],"application/manifest+json":["webmanifest"],"application/marc":["mrc"],"application/marcxml+xml":["mrcx"],"application/mathematica":["ma","nb","mb"],"application/mathml+xml":["mathml"],"application/mbox":["mbox"],"application/mediaservercontrol+xml":["mscml"],"application/metalink+xml":["metalink"],"application/metalink4+xml":["meta4"],"application/mets+xml":["mets"],"application/mmt-aei+xml":["maei"],"application/mmt-usd+xml":["musd"],"application/mods+xml":["mods"],"application/mp21":["m21","mp21"],"application/mp4":["mp4s","m4p"],"application/msword":["doc","dot"],"application/mxf":["mxf"],"application/n-quads":["nq"],"application/n-triples":["nt"],"application/node":["cjs"],"application/octet-stream":["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"],"application/oda":["oda"],"application/oebps-package+xml":["opf"],"application/ogg":["ogx"],"application/omdoc+xml":["omdoc"],"application/onenote":["onetoc","onetoc2","onetmp","onepkg"],"application/oxps":["oxps"],"application/p2p-overlay+xml":["relo"],"application/patch-ops-error+xml":["xer"],"application/pdf":["pdf"],"application/pgp-encrypted":["pgp"],"application/pgp-signature":["asc","sig"],"application/pics-rules":["prf"],"application/pkcs10":["p10"],"application/pkcs7-mime":["p7m","p7c"],"application/pkcs7-signature":["p7s"],"application/pkcs8":["p8"],"application/pkix-attr-cert":["ac"],"application/pkix-cert":["cer"],"application/pkix-crl":["crl"],"application/pkix-pkipath":["pkipath"],"application/pkixcmp":["pki"],"application/pls+xml":["pls"],"application/postscript":["ai","eps","ps"],"application/provenance+xml":["provx"],"application/pskc+xml":["pskcxml"],"application/raml+yaml":["raml"],"application/rdf+xml":["rdf","owl"],"application/reginfo+xml":["rif"],"application/relax-ng-compact-syntax":["rnc"],"application/resource-lists+xml":["rl"],"application/resource-lists-diff+xml":["rld"],"application/rls-services+xml":["rs"],"application/route-apd+xml":["rapd"],"application/route-s-tsid+xml":["sls"],"application/route-usd+xml":["rusd"],"application/rpki-ghostbusters":["gbr"],"application/rpki-manifest":["mft"],"application/rpki-roa":["roa"],"application/rsd+xml":["rsd"],"application/rss+xml":["rss"],"application/rtf":["rtf"],"application/sbml+xml":["sbml"],"application/scvp-cv-request":["scq"],"application/scvp-cv-response":["scs"],"application/scvp-vp-request":["spq"],"application/scvp-vp-response":["spp"],"application/sdp":["sdp"],"application/senml+xml":["senmlx"],"application/sensml+xml":["sensmlx"],"application/set-payment-initiation":["setpay"],"application/set-registration-initiation":["setreg"],"application/shf+xml":["shf"],"application/sieve":["siv","sieve"],"application/smil+xml":["smi","smil"],"application/sparql-query":["rq"],"application/sparql-results+xml":["srx"],"application/srgs":["gram"],"application/srgs+xml":["grxml"],"application/sru+xml":["sru"],"application/ssdl+xml":["ssdl"],"application/ssml+xml":["ssml"],"application/swid+xml":["swidtag"],"application/tei+xml":["tei","teicorpus"],"application/thraud+xml":["tfi"],"application/timestamped-data":["tsd"],"application/toml":["toml"],"application/trig":["trig"],"application/ttml+xml":["ttml"],"application/ubjson":["ubj"],"application/urc-ressheet+xml":["rsheet"],"application/urc-targetdesc+xml":["td"],"application/voicexml+xml":["vxml"],"application/wasm":["wasm"],"application/widget":["wgt"],"application/winhlp":["hlp"],"application/wsdl+xml":["wsdl"],"application/wspolicy+xml":["wspolicy"],"application/xaml+xml":["xaml"],"application/xcap-att+xml":["xav"],"application/xcap-caps+xml":["xca"],"application/xcap-diff+xml":["xdf"],"application/xcap-el+xml":["xel"],"application/xcap-ns+xml":["xns"],"application/xenc+xml":["xenc"],"application/xhtml+xml":["xhtml","xht"],"application/xliff+xml":["xlf"],"application/xml":["xml","xsl","xsd","rng"],"application/xml-dtd":["dtd"],"application/xop+xml":["xop"],"application/xproc+xml":["xpl"],"application/xslt+xml":["*xsl","xslt"],"application/xspf+xml":["xspf"],"application/xv+xml":["mxml","xhvml","xvml","xvm"],"application/yang":["yang"],"application/yin+xml":["yin"],"application/zip":["zip"],"audio/3gpp":["*3gpp"],"audio/adpcm":["adp"],"audio/amr":["amr"],"audio/basic":["au","snd"],"audio/midi":["mid","midi","kar","rmi"],"audio/mobile-xmf":["mxmf"],"audio/mp3":["*mp3"],"audio/mp4":["m4a","mp4a"],"audio/mpeg":["mpga","mp2","mp2a","mp3","m2a","m3a"],"audio/ogg":["oga","ogg","spx","opus"],"audio/s3m":["s3m"],"audio/silk":["sil"],"audio/wav":["wav"],"audio/wave":["*wav"],"audio/webm":["weba"],"audio/xm":["xm"],"font/collection":["ttc"],"font/otf":["otf"],"font/ttf":["ttf"],"font/woff":["woff"],"font/woff2":["woff2"],"image/aces":["exr"],"image/apng":["apng"],"image/avif":["avif"],"image/bmp":["bmp"],"image/cgm":["cgm"],"image/dicom-rle":["drle"],"image/emf":["emf"],"image/fits":["fits"],"image/g3fax":["g3"],"image/gif":["gif"],"image/heic":["heic"],"image/heic-sequence":["heics"],"image/heif":["heif"],"image/heif-sequence":["heifs"],"image/hej2k":["hej2"],"image/hsj2":["hsj2"],"image/ief":["ief"],"image/jls":["jls"],"image/jp2":["jp2","jpg2"],"image/jpeg":["jpeg","jpg","jpe"],"image/jph":["jph"],"image/jphc":["jhc"],"image/jpm":["jpm"],"image/jpx":["jpx","jpf"],"image/jxr":["jxr"],"image/jxra":["jxra"],"image/jxrs":["jxrs"],"image/jxs":["jxs"],"image/jxsc":["jxsc"],"image/jxsi":["jxsi"],"image/jxss":["jxss"],"image/ktx":["ktx"],"image/ktx2":["ktx2"],"image/png":["png"],"image/sgi":["sgi"],"image/svg+xml":["svg","svgz"],"image/t38":["t38"],"image/tiff":["tif","tiff"],"image/tiff-fx":["tfx"],"image/webp":["webp"],"image/wmf":["wmf"],"message/disposition-notification":["disposition-notification"],"message/global":["u8msg"],"message/global-delivery-status":["u8dsn"],"message/global-disposition-notification":["u8mdn"],"message/global-headers":["u8hdr"],"message/rfc822":["eml","mime"],"model/3mf":["3mf"],"model/gltf+json":["gltf"],"model/gltf-binary":["glb"],"model/iges":["igs","iges"],"model/mesh":["msh","mesh","silo"],"model/mtl":["mtl"],"model/obj":["obj"],"model/step+xml":["stpx"],"model/step+zip":["stpz"],"model/step-xml+zip":["stpxz"],"model/stl":["stl"],"model/vrml":["wrl","vrml"],"model/x3d+binary":["*x3db","x3dbz"],"model/x3d+fastinfoset":["x3db"],"model/x3d+vrml":["*x3dv","x3dvz"],"model/x3d+xml":["x3d","x3dz"],"model/x3d-vrml":["x3dv"],"text/cache-manifest":["appcache","manifest"],"text/calendar":["ics","ifb"],"text/coffeescript":["coffee","litcoffee"],"text/css":["css"],"text/csv":["csv"],"text/html":["html","htm","shtml"],"text/jade":["jade"],"text/jsx":["jsx"],"text/less":["less"],"text/markdown":["markdown","md"],"text/mathml":["mml"],"text/mdx":["mdx"],"text/n3":["n3"],"text/plain":["txt","text","conf","def","list","log","in","ini"],"text/richtext":["rtx"],"text/rtf":["*rtf"],"text/sgml":["sgml","sgm"],"text/shex":["shex"],"text/slim":["slim","slm"],"text/spdx":["spdx"],"text/stylus":["stylus","styl"],"text/tab-separated-values":["tsv"],"text/troff":["t","tr","roff","man","me","ms"],"text/turtle":["ttl"],"text/uri-list":["uri","uris","urls"],"text/vcard":["vcard"],"text/vtt":["vtt"],"text/xml":["*xml"],"text/yaml":["yaml","yml"],"video/3gpp":["3gp","3gpp"],"video/3gpp2":["3g2"],"video/h261":["h261"],"video/h263":["h263"],"video/h264":["h264"],"video/iso.segment":["m4s"],"video/jpeg":["jpgv"],"video/jpm":["*jpm","jpgm"],"video/mj2":["mj2","mjp2"],"video/mp2t":["ts"],"video/mp4":["mp4","mp4v","mpg4"],"video/mpeg":["mpeg","mpg","mpe","m1v","m2v"],"video/ogg":["ogv"],"video/quicktime":["qt","mov"],"video/webm":["webm"]};let kde=Tde;var Ide=new kde(Nde);Object.defineProperty(Fp,"__esModule",{value:!0});Fp.LocalRecorder=void 0;var Mn=uR,_de=An,Ade=Yi,zI=Ide,Is=_de.OpenViduLogger.getInstance(),BI,Ode=function(){function t(n){this.stream=n,this.chunks=[],BI=Ade.PlatformUtils.getInstance(),this.connectionId=this.stream.connection?this.stream.connection.connectionId:"default-connection",this.id=this.stream.streamId+"_"+this.connectionId+"_localrecord",this.state=Mn.LocalRecorderState.READY}return t.prototype.record=function(n){var e=this;return new Promise(function(r,i){try{if(typeof n=="string"||n instanceof String)return i(`When calling LocalRecorder.record(options) parameter 'options' cannot be a string. Must be an object like { mimeType: "`.concat(n,'" }'));if(typeof MediaRecorder>"u")throw Is.error("MediaRecorder not supported on your device. See compatibility in https://caniuse.com/#search=MediaRecorder"),Error("MediaRecorder not supported on your device. See compatibility in https://caniuse.com/#search=MediaRecorder");if(e.state!==Mn.LocalRecorderState.READY)throw Error("'LocalRecord.record()' needs 'LocalRecord.state' to be 'READY' (current value: '"+e.state+"'). Call 'LocalRecorder.clean()' or init a new LocalRecorder before");Is.log("Starting local recording of stream '"+e.stream.streamId+"' of connection '"+e.connectionId+"'"),n?n.mimeType||(n.mimeType="video/webm"):n={mimeType:"video/webm"},e.mediaRecorder=new MediaRecorder(e.stream.getMediaStream(),n),e.mediaRecorder.start()}catch(o){return i(o)}return e.mediaRecorder.ondataavailable=function(o){o.data.size>0&&e.chunks.push(o.data)},e.mediaRecorder.onerror=function(o){Is.error("MediaRecorder error: ",o)},e.mediaRecorder.onstart=function(){Is.log("MediaRecorder started (state="+e.mediaRecorder.state+")")},e.mediaRecorder.onstop=function(){e.onStopDefault()},e.mediaRecorder.onpause=function(){Is.log("MediaRecorder paused (state="+e.mediaRecorder.state+")")},e.mediaRecorder.onresume=function(){Is.log("MediaRecorder resumed (state="+e.mediaRecorder.state+")")},e.state=Mn.LocalRecorderState.RECORDING,r()})},t.prototype.stop=function(){var n=this;return new Promise(function(e,r){try{if(n.state===Mn.LocalRecorderState.READY||n.state===Mn.LocalRecorderState.FINISHED)throw Error("'LocalRecord.stop()' needs 'LocalRecord.state' to be 'RECORDING' or 'PAUSED' (current value: '"+n.state+"'). Call 'LocalRecorder.start()' before");n.mediaRecorder.onstop=function(){return n.onStopDefault(),e()},n.mediaRecorder.stop()}catch(i){return r(i)}})},t.prototype.pause=function(){var n=this;return new Promise(function(e,r){try{return n.state!==Mn.LocalRecorderState.RECORDING?r(Error("'LocalRecord.pause()' needs 'LocalRecord.state' to be 'RECORDING' (current value: '"+n.state+"'). Call 'LocalRecorder.start()' or 'LocalRecorder.resume()' before")):(n.mediaRecorder.pause(),n.state=Mn.LocalRecorderState.PAUSED,e())}catch(i){return r(i)}})},t.prototype.resume=function(){var n=this;return new Promise(function(e,r){try{if(n.state!==Mn.LocalRecorderState.PAUSED)throw Error("'LocalRecord.resume()' needs 'LocalRecord.state' to be 'PAUSED' (current value: '"+n.state+"'). Call 'LocalRecorder.pause()' before");return n.mediaRecorder.resume(),n.state=Mn.LocalRecorderState.RECORDING,e()}catch(i){return r(i)}})},t.prototype.preview=function(n){if(this.state!==Mn.LocalRecorderState.FINISHED)throw Error("'LocalRecord.preview()' needs 'LocalRecord.state' to be 'FINISHED' (current value: '"+this.state+"'). Call 'LocalRecorder.stop()' before");if(this.videoPreview=document.createElement("video"),this.videoPreview.id=this.id,this.videoPreview.autoplay=!0,BI.isSafariBrowser()&&(this.videoPreview.playsInline=!0),typeof n=="string"){var e=document.getElementById(n);e&&(this.videoPreview=e.appendChild(this.videoPreview))}else this.videoPreview=n.appendChild(this.videoPreview);return this.videoPreview.src=this.videoPreviewSrc,this.videoPreview},t.prototype.clean=function(){var n=this,e=function(){delete n.blob,n.chunks=[],n.state=Mn.LocalRecorderState.READY};this.state===Mn.LocalRecorderState.RECORDING||this.state===Mn.LocalRecorderState.PAUSED?this.stop().then(function(){return e()}).catch(function(){return e()}):e()},t.prototype.download=function(){if(this.state!==Mn.LocalRecorderState.FINISHED)throw Error("'LocalRecord.download()' needs 'LocalRecord.state' to be 'FINISHED' (current value: '"+this.state+"'). Call 'LocalRecorder.stop()' before");var n=document.createElement("a");n.style.display="none",document.body.appendChild(n);var e=globalThis.URL.createObjectURL(this.blob);n.href=e,n.download=this.id+"."+zI.getExtension(this.blob.type),n.click(),globalThis.URL.revokeObjectURL(e),document.body.removeChild(n)},t.prototype.getBlob=function(){if(this.state!==Mn.LocalRecorderState.FINISHED)throw Error("Call 'LocalRecord.stop()' before getting Blob file");return this.blob},t.prototype.uploadAsBinary=function(n,e){var r=this;return new Promise(function(i,o){if(r.state!==Mn.LocalRecorderState.FINISHED)return o(Error("'LocalRecord.uploadAsBinary()' needs 'LocalRecord.state' to be 'FINISHED' (current value: '"+r.state+"'). Call 'LocalRecorder.stop()' before"));var a=new XMLHttpRequest;if(a.open("POST",n,!0),typeof e=="object")for(var s=0,u=Object.keys(e);s<u.length;s++){var l=u[s];a.setRequestHeader(l,e[l])}a.onreadystatechange=function(){if(a.readyState===4)return a.status.toString().charAt(0)==="2"?i(a.responseText):o(a.status)},a.send(r.blob)})},t.prototype.uploadAsMultipartfile=function(n,e){var r=this;return new Promise(function(i,o){if(r.state!==Mn.LocalRecorderState.FINISHED)return o(Error("'LocalRecord.uploadAsMultipartfile()' needs 'LocalRecord.state' to be 'FINISHED' (current value: '"+r.state+"'). Call 'LocalRecorder.stop()' before"));var a=new XMLHttpRequest;if(a.open("POST",n,!0),typeof e=="object")for(var s=0,u=Object.keys(e);s<u.length;s++){var l=u[s];a.setRequestHeader(l,e[l])}var c=new FormData;c.append("file",r.blob,r.id+"."+zI.getExtension(r.blob.type)),a.onreadystatechange=function(){if(a.readyState===4)return a.status.toString().charAt(0)==="2"?i(a.responseText):o(a.status)},a.send(c)})},t.prototype.onStopDefault=function(){Is.log("MediaRecorder stopped  (state="+this.mediaRecorder.state+")"),this.blob=new Blob(this.chunks,{type:this.mediaRecorder.mimeType}),this.chunks=[],this.videoPreviewSrc=globalThis.URL.createObjectURL(this.blob),this.state=Mn.LocalRecorderState.FINISHED},t}();Fp.LocalRecorder=Ode;var Ed={},Cd={},zp={},zc={},Bc={},ha={},$n={};Object.defineProperty($n,"__esModule",{value:!0});$n.Event=void 0;var Dde=function(){function t(n,e,r){this.hasBeenPrevented=!1,this.cancelable=n,this.target=e,this.type=r}return t.prototype.isDefaultPrevented=function(){return this.hasBeenPrevented},t.prototype.preventDefault=function(){this.callDefaultBehavior=function(){},this.hasBeenPrevented=!0},t}();$n.Event=Dde;var Mde=ve&&ve.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();Object.defineProperty(ha,"__esModule",{value:!0});ha.StreamPropertyChangedEvent=void 0;var Pde=$n,Lde=function(t){Mde(n,t);function n(e,r,i,o,a,s){var u=t.call(this,!1,e,"streamPropertyChanged")||this;return u.stream=r,u.changedProperty=i,u.newValue=o,u.oldValue=a,u.reason=s,u}return n.prototype.callDefaultBehavior=function(){},n}(Pde.Event);ha.StreamPropertyChangedEvent=Lde;var Fu={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.OpenViduError=t.OpenViduErrorName=void 0,function(e){e.BROWSER_NOT_SUPPORTED="BROWSER_NOT_SUPPORTED",e.DEVICE_ACCESS_DENIED="DEVICE_ACCESS_DENIED",e.DEVICE_ALREADY_IN_USE="DEVICE_ALREADY_IN_USE",e.SCREEN_CAPTURE_DENIED="SCREEN_CAPTURE_DENIED",e.SCREEN_SHARING_NOT_SUPPORTED="SCREEN_SHARING_NOT_SUPPORTED",e.SCREEN_EXTENSION_NOT_INSTALLED="SCREEN_EXTENSION_NOT_INSTALLED",e.SCREEN_EXTENSION_DISABLED="SCREEN_EXTENSION_DISABLED",e.INPUT_VIDEO_DEVICE_NOT_FOUND="INPUT_VIDEO_DEVICE_NOT_FOUND",e.INPUT_AUDIO_DEVICE_NOT_FOUND="INPUT_AUDIO_DEVICE_NOT_FOUND",e.INPUT_AUDIO_DEVICE_GENERIC_ERROR="INPUT_AUDIO_DEVICE_GENERIC_ERROR",e.NO_INPUT_SOURCE_SET="NO_INPUT_SOURCE_SET",e.PUBLISHER_PROPERTIES_ERROR="PUBLISHER_PROPERTIES_ERROR",e.OPENVIDU_PERMISSION_DENIED="OPENVIDU_PERMISSION_DENIED",e.OPENVIDU_NOT_CONNECTED="OPENVIDU_NOT_CONNECTED",e.VIRTUAL_BACKGROUND_ERROR="VIRTUAL_BACKGROUND_ERROR",e.GENERIC_ERROR="GENERIC_ERROR"}(t.OpenViduErrorName||(t.OpenViduErrorName={}));var n=function(){function e(r,i){this.name=r,this.message=i}return e}();t.OpenViduError=n})(Fu);Object.defineProperty(Bc,"__esModule",{value:!0});Bc.Filter=void 0;var jI=ha,er=Fu,Fde=An,Qi=Fde.OpenViduLogger.getInstance(),zde=function(){function t(n,e){this.handlers=new Map,this.type=n,this.options=e}return t.prototype.execMethod=function(n,e){var r=this;return new Promise(function(i,o){var a;Qi.info("Executing filter method to stream "+r.stream.streamId);var s,u=function(d){Qi.info("Filter method successfully executed on Stream "+r.stream.streamId);var f=Object.assign({},r.stream.filter);return r.stream.filter.lastExecMethod={method:n,params:s},d&&(r.stream.session.emitEvent("streamPropertyChanged",[new jI.StreamPropertyChangedEvent(r.stream.session,r.stream,"filter",r.stream.filter,f,"execFilterMethod")]),r.stream.streamManager.emitEvent("streamPropertyChanged",[new jI.StreamPropertyChangedEvent(r.stream.streamManager,r.stream,"filter",r.stream.filter,f,"execFilterMethod")])),i()};if(r.type.startsWith("VB:")){if(typeof e=="string")try{e=JSON.parse(e)}catch(d){return o(new er.OpenViduError(er.OpenViduErrorName.VIRTUAL_BACKGROUND_ERROR,"Wrong params syntax: "+d))}if(s=e,n==="update")if(!((a=r.stream.virtualBackgroundSinkElements)===null||a===void 0)&&a.VB)r.stream.virtualBackgroundSinkElements.VB.updateValues(e).then(function(){return u(!1)}).catch(function(d){return d.name===er.OpenViduErrorName.VIRTUAL_BACKGROUND_ERROR?o(new er.OpenViduError(d.name,d.message)):o(new er.OpenViduError(er.OpenViduErrorName.VIRTUAL_BACKGROUND_ERROR,"Error updating values on Virtual Background filter: "+d))});else return o(new er.OpenViduError(er.OpenViduErrorName.VIRTUAL_BACKGROUND_ERROR,"There is no Virtual Background filter applied"));else return o(new er.OpenViduError(er.OpenViduErrorName.VIRTUAL_BACKGROUND_ERROR,'Unknown Virtual Background method "'.concat(n,'"')))}else{var l=void 0;if(typeof e!="string")try{l=JSON.stringify(e)}catch{var c="'params' property must be a JSON formatted object";return Qi.error(c),o(c)}else l=e;s=l,r.stream.session.openvidu.sendRequest("execFilterMethod",{streamId:r.stream.streamId,method:n,params:l},function(d,f){return d?(Qi.error("Error executing filter method for Stream "+r.stream.streamId,d),d.code===401?o(new er.OpenViduError(er.OpenViduErrorName.OPENVIDU_PERMISSION_DENIED,"You don't have permissions to execute a filter method")):o(d)):u(!0)})}})},t.prototype.addEventListener=function(n,e){var r=this;return new Promise(function(i,o){Qi.info("Adding filter event listener to event "+n+" to stream "+r.stream.streamId),r.stream.session.openvidu.sendRequest("addFilterEventListener",{streamId:r.stream.streamId,eventType:n},function(a,s){return a?(Qi.error("Error adding filter event listener to event "+n+"for Stream "+r.stream.streamId,a),a.code===401?o(new er.OpenViduError(er.OpenViduErrorName.OPENVIDU_PERMISSION_DENIED,"You don't have permissions to add a filter event listener")):o(a)):(r.handlers.set(n,e),Qi.info("Filter event listener to event "+n+" successfully applied on Stream "+r.stream.streamId),i())})})},t.prototype.removeEventListener=function(n){var e=this;return new Promise(function(r,i){Qi.info("Removing filter event listener to event "+n+" to stream "+e.stream.streamId),e.stream.session.openvidu.sendRequest("removeFilterEventListener",{streamId:e.stream.streamId,eventType:n},function(o,a){return o?(Qi.error("Error removing filter event listener to event "+n+"for Stream "+e.stream.streamId,o),o.code===401?i(new er.OpenViduError(er.OpenViduErrorName.OPENVIDU_PERMISSION_DENIED,"You don't have permissions to add a filter event listener")):i(o)):(e.handlers.delete(n),Qi.info("Filter event listener to event "+n+" successfully removed on Stream "+e.stream.streamId),r())})})},t}();Bc.Filter=zde;var jc={},Vc={},$c={},qB={exports:{}};/*!
 * EventEmitter v5.2.9 - git.io/ee
 * Unlicense - http://unlicense.org/
 * Oliver Caldwell - https://oli.me.uk/
 * @preserve
 */(function(t){(function(n){function e(){}var r=e.prototype,i=n.EventEmitter;function o(u,l){for(var c=u.length;c--;)if(u[c].listener===l)return c;return-1}function a(u){return function(){return this[u].apply(this,arguments)}}r.getListeners=function(l){var c=this._getEvents(),d,f;if(l instanceof RegExp){d={};for(f in c)c.hasOwnProperty(f)&&l.test(f)&&(d[f]=c[f])}else d=c[l]||(c[l]=[]);return d},r.flattenListeners=function(l){var c=[],d;for(d=0;d<l.length;d+=1)c.push(l[d].listener);return c},r.getListenersAsObject=function(l){var c=this.getListeners(l),d;return c instanceof Array&&(d={},d[l]=c),d||c};function s(u){return typeof u=="function"||u instanceof RegExp?!0:u&&typeof u=="object"?s(u.listener):!1}r.addListener=function(l,c){if(!s(c))throw new TypeError("listener must be a function");var d=this.getListenersAsObject(l),f=typeof c=="object",p;for(p in d)d.hasOwnProperty(p)&&o(d[p],c)===-1&&d[p].push(f?c:{listener:c,once:!1});return this},r.on=a("addListener"),r.addOnceListener=function(l,c){return this.addListener(l,{listener:c,once:!0})},r.once=a("addOnceListener"),r.defineEvent=function(l){return this.getListeners(l),this},r.defineEvents=function(l){for(var c=0;c<l.length;c+=1)this.defineEvent(l[c]);return this},r.removeListener=function(l,c){var d=this.getListenersAsObject(l),f,p;for(p in d)d.hasOwnProperty(p)&&(f=o(d[p],c),f!==-1&&d[p].splice(f,1));return this},r.off=a("removeListener"),r.addListeners=function(l,c){return this.manipulateListeners(!1,l,c)},r.removeListeners=function(l,c){return this.manipulateListeners(!0,l,c)},r.manipulateListeners=function(l,c,d){var f,p,h=l?this.removeListener:this.addListener,v=l?this.removeListeners:this.addListeners;if(typeof c=="object"&&!(c instanceof RegExp))for(f in c)c.hasOwnProperty(f)&&(p=c[f])&&(typeof p=="function"?h.call(this,f,p):v.call(this,f,p));else for(f=d.length;f--;)h.call(this,c,d[f]);return this},r.removeEvent=function(l){var c=typeof l,d=this._getEvents(),f;if(c==="string")delete d[l];else if(l instanceof RegExp)for(f in d)d.hasOwnProperty(f)&&l.test(f)&&delete d[f];else delete this._events;return this},r.removeAllListeners=a("removeEvent"),r.emitEvent=function(l,c){var d=this.getListenersAsObject(l),f,p,h,v,g;for(v in d)if(d.hasOwnProperty(v))for(f=d[v].slice(0),h=0;h<f.length;h++)p=f[h],p.once===!0&&this.removeListener(l,p.listener),g=p.listener.apply(this,c||[]),g===this._getOnceReturnValue()&&this.removeListener(l,p.listener);return this},r.trigger=a("emitEvent"),r.emit=function(l){var c=Array.prototype.slice.call(arguments,1);return this.emitEvent(l,c)},r.setOnceReturnValue=function(l){return this._onceReturnValue=l,this},r._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},r._getEvents=function(){return this._events||(this._events={})},e.noConflict=function(){return n.EventEmitter=i,e},t.exports?t.exports=e:n.EventEmitter=e})(typeof window<"u"?window:ve||{})})(qB);var cR=qB.exports;Object.defineProperty($c,"__esModule",{value:!0});$c.EventDispatcher=void 0;var Bde=An,jde=cR,zh=Bde.OpenViduLogger.getInstance(),Vde=function(){function t(){this.userHandlerArrowHandler=new WeakMap,this.ee=new jde}return t.prototype.onAux=function(n,e,r){var i=function(o){o?zh.debug(e,o):zh.debug(e),r(o)};return this.userHandlerArrowHandler.set(r,i),this.ee.on(n,i),this},t.prototype.onceAux=function(n,e,r){var i=this,o=function(a){a?zh.debug(e,a):zh.debug(e),r(a),i.userHandlerArrowHandler.delete(r)};return this.userHandlerArrowHandler.set(r,o),this.ee.once(n,o),this},t.prototype.offAux=function(n,e){if(!e)this.ee.removeAllListeners(n);else{var r=this.userHandlerArrowHandler.get(e);r&&this.ee.off(n,r),this.userHandlerArrowHandler.delete(e)}return this},t}();$c.EventDispatcher=Vde;var Uc={},$de=ve&&ve.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();Object.defineProperty(Uc,"__esModule",{value:!0});Uc.StreamManagerEvent=void 0;var Ude=$n,Wde=function(t){$de(n,t);function n(e,r,i){var o=t.call(this,!1,e,r)||this;return o.value=i,o}return n.prototype.callDefaultBehavior=function(){},n}(Ude.Event);Uc.StreamManagerEvent=Wde;var Bp={},Hde=ve&&ve.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();Object.defineProperty(Bp,"__esModule",{value:!0});Bp.VideoElementEvent=void 0;var Gde=$n,qde=function(t){Hde(n,t);function n(e,r,i){var o=t.call(this,!1,r,i)||this;return o.element=e,o}return n.prototype.callDefaultBehavior=function(){},n}(Gde.Event);Bp.VideoElementEvent=qde;var zu={};(function(t){var n=ve&&ve.__extends||function(){var i=function(o,a){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,u){s.__proto__=u}||function(s,u){for(var l in u)Object.prototype.hasOwnProperty.call(u,l)&&(s[l]=u[l])},i(o,a)};return function(o,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");i(o,a);function s(){this.constructor=o}o.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.ExceptionEvent=t.ExceptionEventName=void 0;var e=$n;(function(i){i.ICE_CANDIDATE_ERROR="ICE_CANDIDATE_ERROR",i.ICE_CONNECTION_FAILED="ICE_CONNECTION_FAILED",i.ICE_CONNECTION_DISCONNECTED="ICE_CONNECTION_DISCONNECTED",i.NO_STREAM_PLAYING_EVENT="NO_STREAM_PLAYING_EVENT",i.SPEECH_TO_TEXT_DISCONNECTED="SPEECH_TO_TEXT_DISCONNECTED"})(t.ExceptionEventName||(t.ExceptionEventName={}));var r=function(i){n(o,i);function o(a,s,u,l,c){var d=i.call(this,!1,a,"exception")||this;return d.name=s,d.origin=u,d.message=l,d.data=c,d}return o.prototype.callDefaultBehavior=function(){},o}(e.Event);t.ExceptionEvent=r})(zu);var jp={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.VideoInsertMode=void 0,function(n){n.AFTER="AFTER",n.APPEND="APPEND",n.BEFORE="BEFORE",n.PREPEND="PREPEND",n.REPLACE="REPLACE"}(t.VideoInsertMode||(t.VideoInsertMode={}))})(jp);var Kde=ve&&ve.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();Object.defineProperty(Vc,"__esModule",{value:!0});Vc.StreamManager=void 0;var Xde=$c,F1=Uc,Bh=Bp,VI=zu,_s=jp,Yde=An,Jde=Yi,z1=Yde.OpenViduLogger.getInstance(),fr,Qde=function(t){Kde(n,t);function n(e,r){var i=t.call(this)||this;if(i.videos=[],i.lazyLaunchVideoElementCreatedEvent=!1,fr=Jde.PlatformUtils.getInstance(),i.stream=e,i.stream.streamManager=i,i.remote=!i.stream.isLocal(),r){var o=void 0;typeof r=="string"?o=document.getElementById(r):r instanceof HTMLElement&&(o=r),o&&(i.firstVideoElement={targetElement:o,video:document.createElement("video"),id:"",canplayListenerAdded:!1},(fr.isSafariBrowser()||fr.isIPhoneOrIPad()&&(fr.isChromeMobileBrowser()||fr.isEdgeMobileBrowser()||fr.isOperaMobileBrowser()||fr.isFirefoxMobileBrowser()))&&(i.firstVideoElement.video.playsInline=!0),i.targetElement=o,i.element=o)}return i.canPlayListener=function(){i.deactivateStreamPlayingEventExceptionTimeout(),i.ee.emitEvent("streamPlaying",[new F1.StreamManagerEvent(i,"streamPlaying",void 0)])},i}return n.prototype.on=function(e,r){return t.prototype.onAux.call(this,e,"Event '"+e+"' triggered by '"+(this.remote?"Subscriber":"Publisher")+"'",r),e==="videoElementCreated"&&this.stream&&this.lazyLaunchVideoElementCreatedEvent&&(this.ee.emitEvent("videoElementCreated",[new Bh.VideoElementEvent(this.videos[0].video,this,"videoElementCreated")]),this.lazyLaunchVideoElementCreatedEvent=!1),e==="streamPlaying"&&this.videos[0]&&this.videos[0].video&&this.videos[0].video.currentTime>0&&this.videos[0].video.paused===!1&&this.videos[0].video.ended===!1&&this.videos[0].video.readyState===4&&this.ee.emitEvent("streamPlaying",[new F1.StreamManagerEvent(this,"streamPlaying",void 0)]),this.stream.hasAudio&&(e==="publisherStartSpeaking"&&this.stream.enableHarkSpeakingEvent(),e==="publisherStopSpeaking"&&this.stream.enableHarkStoppedSpeakingEvent(),e==="streamAudioVolumeChange"&&this.stream.enableHarkVolumeChangeEvent(!1)),this},n.prototype.once=function(e,r){return t.prototype.onceAux.call(this,e,"Event '"+e+"' triggered once by '"+(this.remote?"Subscriber":"Publisher")+"'",r),e==="videoElementCreated"&&this.stream&&this.lazyLaunchVideoElementCreatedEvent&&this.ee.emitEvent("videoElementCreated",[new Bh.VideoElementEvent(this.videos[0].video,this,"videoElementCreated")]),e==="streamPlaying"&&this.videos[0]&&this.videos[0].video&&this.videos[0].video.currentTime>0&&this.videos[0].video.paused===!1&&this.videos[0].video.ended===!1&&this.videos[0].video.readyState===4&&this.ee.emitEvent("streamPlaying",[new F1.StreamManagerEvent(this,"streamPlaying",void 0)]),this.stream.hasAudio&&(e==="publisherStartSpeaking"&&this.stream.enableOnceHarkSpeakingEvent(),e==="publisherStopSpeaking"&&this.stream.enableOnceHarkStoppedSpeakingEvent(),e==="streamAudioVolumeChange"&&this.stream.enableOnceHarkVolumeChangeEvent(!1)),this},n.prototype.off=function(e,r){if(t.prototype.offAux.call(this,e,r),e==="publisherStartSpeaking"){var i=this.ee.getListeners(e).length+this.stream.session.ee.getListeners(e).length;i===0&&this.stream.disableHarkSpeakingEvent(!1)}if(e==="publisherStopSpeaking"){var o=this.ee.getListeners(e).length+this.stream.session.ee.getListeners(e).length;o===0&&this.stream.disableHarkStoppedSpeakingEvent(!1)}if(e==="streamAudioVolumeChange"){var a=this.ee.getListeners(e).length;a===0&&this.stream.disableHarkVolumeChangeEvent(!1)}return this},n.prototype.addVideoElement=function(e){this.initializeVideoProperties(e),!this.remote&&this.stream.displayMyRemote()&&e.srcObject!==this.stream.getMediaStream()&&(e.srcObject=this.stream.getMediaStream());for(var r=0,i=this.videos;r<i.length;r++){var o=i[r];if(o.video===e)return 0}for(var a=1,s=0,u=this.stream.session.streamManagers;s<u.length;s++){var l=u[s];if(l.disassociateVideo(e)){a=-1;break}}return this.stream.session.streamManagers.forEach(function(c){c.disassociateVideo(e)}),this.pushNewStreamManagerVideo({video:e,id:e.id,canplayListenerAdded:!1}),z1.info("New video element associated to ",this),a},n.prototype.createVideoElement=function(e,r){var i;if(typeof e=="string"){if(i=document.getElementById(e),!i)throw new Error("The provided 'targetElement' couldn't be resolved to any HTML element: "+e)}else if(e instanceof HTMLElement)i=e;else throw new Error("The provided 'targetElement' couldn't be resolved to any HTML element: "+e);var o=this.createVideo();this.initializeVideoProperties(o);var a=r||_s.VideoInsertMode.APPEND;switch(a){case _s.VideoInsertMode.AFTER:i.parentNode.insertBefore(o,i.nextSibling);break;case _s.VideoInsertMode.APPEND:i.appendChild(o);break;case _s.VideoInsertMode.BEFORE:i.parentNode.insertBefore(o,i);break;case _s.VideoInsertMode.PREPEND:i.insertBefore(o,i.childNodes[0]);break;case _s.VideoInsertMode.REPLACE:i.parentNode.replaceChild(o,i);break;default:a=_s.VideoInsertMode.APPEND,i.appendChild(o);break}var s={targetElement:i,video:o,insertMode:a,id:o.id,canplayListenerAdded:!1};return this.pushNewStreamManagerVideo(s),this.ee.emitEvent("videoElementCreated",[new Bh.VideoElementEvent(s.video,this,"videoElementCreated")]),this.lazyLaunchVideoElementCreatedEvent=!!this.firstVideoElement,o},n.prototype.updatePublisherSpeakingEventsOptions=function(e){var r=this.stream.harkOptions?this.stream.harkOptions:this.stream.session.openvidu.advancedConfiguration.publisherSpeakingEventsOptions||{},i=typeof e.interval=="number"?e.interval:typeof r.interval=="number"?r.interval:100,o=typeof e.threshold=="number"?e.threshold:typeof r.threshold=="number"?r.threshold:-50;this.stream.harkOptions={interval:i,threshold:o},this.stream.speechEvent&&(this.stream.speechEvent.setInterval(i),this.stream.speechEvent.setThreshold(o))},n.prototype.initializeVideoProperties=function(e){!this.remote&&this.stream.displayMyRemote()||e.srcObject!==this.stream.getMediaStream()&&(e.srcObject=this.stream.getMediaStream()),e.autoplay=!0,e.controls=!1,(fr.isSafariBrowser()||fr.isIPhoneOrIPad()&&(fr.isChromeMobileBrowser()||fr.isEdgeMobileBrowser()||fr.isOperaMobileBrowser()||fr.isFirefoxMobileBrowser()))&&(e.playsInline=!0),e.id||(e.id=(this.remote?"remote-":"local-")+"video-"+this.stream.streamId,!this.id&&this.targetElement&&(this.id=e.id)),this.remote&&this.isMirroredVideo(e)?this.removeMirrorVideo(e):!this.remote&&!this.stream.displayMyRemote()&&(e.muted=!0,this.isMirroredVideo(e)&&!this.stream.outboundStreamOpts.publisherProperties.mirror?this.removeMirrorVideo(e):this.stream.outboundStreamOpts.publisherProperties.mirror&&!this.stream.isSendScreen()&&this.mirrorVideo(e))},n.prototype.removeAllVideos=function(){for(var e=this,r=this.stream.session.streamManagers.length-1;r>=0;--r)this.stream.session.streamManagers[r]===this&&this.stream.session.streamManagers.splice(r,1);this.videos.forEach(function(i){i.video&&i.video.removeEventListener&&i.video.removeEventListener("canplay",e.canPlayListener),i.canplayListenerAdded=!1,i.targetElement&&(i.video.parentNode.removeChild(i.video),e.ee.emitEvent("videoElementDestroyed",[new Bh.VideoElementEvent(i.video,e,"videoElementDestroyed")])),e.removeSrcObject(i),e.videos.filter(function(o){return!o.targetElement})})},n.prototype.disassociateVideo=function(e){for(var r=!1,i=0;i<this.videos.length;i++)if(this.videos[i].video===e){this.videos[i].video.removeEventListener("canplay",this.canPlayListener),this.videos.splice(i,1),r=!0,z1.info("Video element disassociated from ",this);break}return r},n.prototype.addPlayEventToFirstVideo=function(){this.videos[0]&&this.videos[0].video&&!this.videos[0].canplayListenerAdded&&(this.activateStreamPlayingEventExceptionTimeout(),this.videos[0].video.addEventListener("canplay",this.canPlayListener),this.videos[0].canplayListenerAdded=!0)},n.prototype.updateMediaStream=function(e){this.videos.forEach(function(r){if(r.video.srcObject=e,fr.isIonicIos()){var i=r.video.parentElement,o=r.video;i.replaceChild(o,r.video),r.video=o}})},n.prototype.emitEvent=function(e,r){this.ee.emitEvent(e,r)},n.prototype.createVideo=function(){return document.createElement("video")},n.prototype.removeSrcObject=function(e){e.video.srcObject=null,this.deactivateStreamPlayingEventExceptionTimeout()},n.prototype.pushNewStreamManagerVideo=function(e){this.videos.push(e),this.addPlayEventToFirstVideo(),this.stream.session.streamManagers.indexOf(this)===-1&&this.stream.session.streamManagers.push(this)},n.prototype.mirrorVideo=function(e){fr.isIonicIos()||(e.style.transform="rotateY(180deg)",e.style.webkitTransform="rotateY(180deg)")},n.prototype.removeMirrorVideo=function(e){e.style.transform="unset",e.style.webkitTransform="unset"},n.prototype.isMirroredVideo=function(e){return e.style.transform==="rotateY(180deg)"||e.style.webkitTransform==="rotateY(180deg)"},n.prototype.activateStreamPlayingEventExceptionTimeout=function(){var e=this;if(this.remote&&this.streamPlayingEventExceptionTimeout==null){var r=this.stream.session.openvidu.advancedConfiguration.noStreamPlayingEventExceptionTimeout||4e3;this.streamPlayingEventExceptionTimeout=setTimeout(function(){var i="StreamManager of Stream "+e.stream.streamId+" ("+(e.remote?"Subscriber":"Publisher")+') did not trigger "streamPlaying" event in '+r+" ms";z1.warn(i),e.stream.session.emitEvent("exception",[new VI.ExceptionEvent(e.stream.session,VI.ExceptionEventName.NO_STREAM_PLAYING_EVENT,e,i)]),delete e.streamPlayingEventExceptionTimeout},r)}},n.prototype.deactivateStreamPlayingEventExceptionTimeout=function(){clearTimeout(this.streamPlayingEventExceptionTimeout),delete this.streamPlayingEventExceptionTimeout},n}(Xde.EventDispatcher);Vc.StreamManager=Qde;var Zde=ve&&ve.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();Object.defineProperty(jc,"__esModule",{value:!0});jc.Subscriber=void 0;var efe=Vc,tfe=An,$I=tfe.OpenViduLogger.getInstance(),nfe=function(t){Zde(n,t);function n(e,r,i){var o=t.call(this,e,r)||this;return o.element=o.targetElement,o.stream=e,o.properties=i,o}return n.prototype.subscribeToAudio=function(e){return this.stream.getMediaStream().getAudioTracks().forEach(function(r){r.enabled=e}),this.stream.audioActive=e,$I.info("'Subscriber' has "+(e?"subscribed to":"unsubscribed from")+" its audio stream"),this},n.prototype.subscribeToVideo=function(e){return this.stream.getMediaStream().getVideoTracks().forEach(function(r){r.enabled=e}),this.stream.videoActive=e,$I.info("'Subscriber' has "+(e?"subscribed to":"unsubscribed from")+" its video stream"),this},n.prototype.replaceTrackInMediaStream=function(e,r){var i=this.stream.getMediaStream(),o;e.kind==="video"?(o=i.getVideoTracks()[0],r&&(this.stream.lastVideoTrackConstraints=e.getConstraints())):o=i.getAudioTracks()[0],i.removeTrack(o),o.stop(),i.addTrack(e)},n}(efe.StreamManager);jc.Subscriber=nfe;var fo={},UI=["stun:","turn:"],rfe=function(t){var n=(t||{}).url||t,e,r,i={};return typeof n!="string"&&!(n instanceof String)||(n=n.trim(),e=UI[UI.indexOf(n.slice(0,5))],!e)?t:(n=n.slice(5),r=n.split("@"),i.username=t.username,i.credential=t.credential,r.length>1&&(n=r[1],r=r[0].split(":"),i.username=r[0],i.credential=(t||{}).credential||r[1]||""),i.url=e+n,i.urls=[i.url],i)};const ife=["stun.l.google.com:19302","stun1.l.google.com:19302","stun2.l.google.com:19302","stun3.l.google.com:19302","stun4.l.google.com:19302","stun.ekiga.net","stun.ideasip.com","stun.schlund.de","stun.stunprotocol.org:3478","stun.voiparound.com","stun.voipbuster.com","stun.voipstunt.com","stun.voxgratia.org"],ofe=[];var afe=rfe,sfe=function(t){var n={stun:(t||{}).stun||ife,turn:(t||{}).turn||ofe},e=(t||{}).stunCount||2,r=(t||{}).turnCount||0,i;function o(a,s){for(var u=[],l=[].concat(n[a]),c;l.length&&u.length<s;)c=Math.random()*l.length|0,u=u.concat(l.splice(c,1));return u.map(function(d){return typeof d!="string"&&!(d instanceof String)?d:afe(a+":"+d)})}return i=[].concat(o("stun",e)),r&&(i=i.concat(o("turn",r))),i},ufe=sfe,dR={},Gy={},qy={};Object.defineProperty(qy,"__esModule",{value:!0});qy.default=cfe;let jh;const lfe=new Uint8Array(16);function cfe(){if(!jh&&(jh=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!jh))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return jh(lfe)}var Cs={},Bu={},Ky={};Object.defineProperty(Ky,"__esModule",{value:!0});Ky.default=void 0;var dfe=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;Ky.default=dfe;Object.defineProperty(Bu,"__esModule",{value:!0});Bu.default=void 0;var ffe=pfe(Ky);function pfe(t){return t&&t.__esModule?t:{default:t}}function hfe(t){return typeof t=="string"&&ffe.default.test(t)}var mfe=hfe;Bu.default=mfe;Object.defineProperty(Cs,"__esModule",{value:!0});Cs.default=void 0;Cs.unsafeStringify=KB;var vfe=gfe(Bu);function gfe(t){return t&&t.__esModule?t:{default:t}}const Wn=[];for(let t=0;t<256;++t)Wn.push((t+256).toString(16).slice(1));function KB(t,n=0){return(Wn[t[n+0]]+Wn[t[n+1]]+Wn[t[n+2]]+Wn[t[n+3]]+"-"+Wn[t[n+4]]+Wn[t[n+5]]+"-"+Wn[t[n+6]]+Wn[t[n+7]]+"-"+Wn[t[n+8]]+Wn[t[n+9]]+"-"+Wn[t[n+10]]+Wn[t[n+11]]+Wn[t[n+12]]+Wn[t[n+13]]+Wn[t[n+14]]+Wn[t[n+15]]).toLowerCase()}function yfe(t,n=0){const e=KB(t,n);if(!(0,vfe.default)(e))throw TypeError("Stringified UUID is invalid");return e}var bfe=yfe;Cs.default=bfe;Object.defineProperty(Gy,"__esModule",{value:!0});Gy.default=void 0;var wfe=Sfe(qy),xfe=Cs;function Sfe(t){return t&&t.__esModule?t:{default:t}}let WI,B1,j1=0,V1=0;function Efe(t,n,e){let r=n&&e||0;const i=n||new Array(16);t=t||{};let o=t.node||WI,a=t.clockseq!==void 0?t.clockseq:B1;if(o==null||a==null){const f=t.random||(t.rng||wfe.default)();o==null&&(o=WI=[f[0]|1,f[1],f[2],f[3],f[4],f[5]]),a==null&&(a=B1=(f[6]<<8|f[7])&16383)}let s=t.msecs!==void 0?t.msecs:Date.now(),u=t.nsecs!==void 0?t.nsecs:V1+1;const l=s-j1+(u-V1)/1e4;if(l<0&&t.clockseq===void 0&&(a=a+1&16383),(l<0||s>j1)&&t.nsecs===void 0&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");j1=s,V1=u,B1=a,s+=122192928e5;const c=((s&268435455)*1e4+u)%4294967296;i[r++]=c>>>24&255,i[r++]=c>>>16&255,i[r++]=c>>>8&255,i[r++]=c&255;const d=s/4294967296*1e4&268435455;i[r++]=d>>>8&255,i[r++]=d&255,i[r++]=d>>>24&15|16,i[r++]=d>>>16&255,i[r++]=a>>>8|128,i[r++]=a&255;for(let f=0;f<6;++f)i[r+f]=o[f];return n||(0,xfe.unsafeStringify)(i)}var Cfe=Efe;Gy.default=Cfe;var Xy={},ds={},Vp={};Object.defineProperty(Vp,"__esModule",{value:!0});Vp.default=void 0;var Rfe=Tfe(Bu);function Tfe(t){return t&&t.__esModule?t:{default:t}}function Nfe(t){if(!(0,Rfe.default)(t))throw TypeError("Invalid UUID");let n;const e=new Uint8Array(16);return e[0]=(n=parseInt(t.slice(0,8),16))>>>24,e[1]=n>>>16&255,e[2]=n>>>8&255,e[3]=n&255,e[4]=(n=parseInt(t.slice(9,13),16))>>>8,e[5]=n&255,e[6]=(n=parseInt(t.slice(14,18),16))>>>8,e[7]=n&255,e[8]=(n=parseInt(t.slice(19,23),16))>>>8,e[9]=n&255,e[10]=(n=parseInt(t.slice(24,36),16))/1099511627776&255,e[11]=n/4294967296&255,e[12]=n>>>24&255,e[13]=n>>>16&255,e[14]=n>>>8&255,e[15]=n&255,e}var kfe=Nfe;Vp.default=kfe;Object.defineProperty(ds,"__esModule",{value:!0});ds.URL=ds.DNS=void 0;ds.default=Dfe;var Ife=Cs,_fe=Afe(Vp);function Afe(t){return t&&t.__esModule?t:{default:t}}function Ofe(t){t=unescape(encodeURIComponent(t));const n=[];for(let e=0;e<t.length;++e)n.push(t.charCodeAt(e));return n}const XB="6ba7b810-9dad-11d1-80b4-00c04fd430c8";ds.DNS=XB;const YB="6ba7b811-9dad-11d1-80b4-00c04fd430c8";ds.URL=YB;function Dfe(t,n,e){function r(i,o,a,s){var u;if(typeof i=="string"&&(i=Ofe(i)),typeof o=="string"&&(o=(0,_fe.default)(o)),((u=o)===null||u===void 0?void 0:u.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let l=new Uint8Array(16+i.length);if(l.set(o),l.set(i,o.length),l=e(l),l[6]=l[6]&15|n,l[8]=l[8]&63|128,a){s=s||0;for(let c=0;c<16;++c)a[s+c]=l[c];return a}return(0,Ife.unsafeStringify)(l)}try{r.name=t}catch{}return r.DNS=XB,r.URL=YB,r}var Yy={};Object.defineProperty(Yy,"__esModule",{value:!0});Yy.default=void 0;function Mfe(t){if(typeof t=="string"){const n=unescape(encodeURIComponent(t));t=new Uint8Array(n.length);for(let e=0;e<n.length;++e)t[e]=n.charCodeAt(e)}return Pfe(Lfe(Ffe(t),t.length*8))}function Pfe(t){const n=[],e=t.length*32,r="0123456789abcdef";for(let i=0;i<e;i+=8){const o=t[i>>5]>>>i%32&255,a=parseInt(r.charAt(o>>>4&15)+r.charAt(o&15),16);n.push(a)}return n}function JB(t){return(t+64>>>9<<4)+14+1}function Lfe(t,n){t[n>>5]|=128<<n%32,t[JB(n)-1]=n;let e=1732584193,r=-271733879,i=-1732584194,o=271733878;for(let a=0;a<t.length;a+=16){const s=e,u=r,l=i,c=o;e=tr(e,r,i,o,t[a],7,-680876936),o=tr(o,e,r,i,t[a+1],12,-389564586),i=tr(i,o,e,r,t[a+2],17,606105819),r=tr(r,i,o,e,t[a+3],22,-1044525330),e=tr(e,r,i,o,t[a+4],7,-176418897),o=tr(o,e,r,i,t[a+5],12,1200080426),i=tr(i,o,e,r,t[a+6],17,-1473231341),r=tr(r,i,o,e,t[a+7],22,-45705983),e=tr(e,r,i,o,t[a+8],7,1770035416),o=tr(o,e,r,i,t[a+9],12,-1958414417),i=tr(i,o,e,r,t[a+10],17,-42063),r=tr(r,i,o,e,t[a+11],22,-1990404162),e=tr(e,r,i,o,t[a+12],7,1804603682),o=tr(o,e,r,i,t[a+13],12,-40341101),i=tr(i,o,e,r,t[a+14],17,-1502002290),r=tr(r,i,o,e,t[a+15],22,1236535329),e=nr(e,r,i,o,t[a+1],5,-165796510),o=nr(o,e,r,i,t[a+6],9,-1069501632),i=nr(i,o,e,r,t[a+11],14,643717713),r=nr(r,i,o,e,t[a],20,-373897302),e=nr(e,r,i,o,t[a+5],5,-701558691),o=nr(o,e,r,i,t[a+10],9,38016083),i=nr(i,o,e,r,t[a+15],14,-660478335),r=nr(r,i,o,e,t[a+4],20,-405537848),e=nr(e,r,i,o,t[a+9],5,568446438),o=nr(o,e,r,i,t[a+14],9,-1019803690),i=nr(i,o,e,r,t[a+3],14,-187363961),r=nr(r,i,o,e,t[a+8],20,1163531501),e=nr(e,r,i,o,t[a+13],5,-1444681467),o=nr(o,e,r,i,t[a+2],9,-51403784),i=nr(i,o,e,r,t[a+7],14,1735328473),r=nr(r,i,o,e,t[a+12],20,-1926607734),e=rr(e,r,i,o,t[a+5],4,-378558),o=rr(o,e,r,i,t[a+8],11,-2022574463),i=rr(i,o,e,r,t[a+11],16,1839030562),r=rr(r,i,o,e,t[a+14],23,-35309556),e=rr(e,r,i,o,t[a+1],4,-1530992060),o=rr(o,e,r,i,t[a+4],11,1272893353),i=rr(i,o,e,r,t[a+7],16,-155497632),r=rr(r,i,o,e,t[a+10],23,-1094730640),e=rr(e,r,i,o,t[a+13],4,681279174),o=rr(o,e,r,i,t[a],11,-358537222),i=rr(i,o,e,r,t[a+3],16,-722521979),r=rr(r,i,o,e,t[a+6],23,76029189),e=rr(e,r,i,o,t[a+9],4,-640364487),o=rr(o,e,r,i,t[a+12],11,-421815835),i=rr(i,o,e,r,t[a+15],16,530742520),r=rr(r,i,o,e,t[a+2],23,-995338651),e=ir(e,r,i,o,t[a],6,-198630844),o=ir(o,e,r,i,t[a+7],10,1126891415),i=ir(i,o,e,r,t[a+14],15,-1416354905),r=ir(r,i,o,e,t[a+5],21,-57434055),e=ir(e,r,i,o,t[a+12],6,1700485571),o=ir(o,e,r,i,t[a+3],10,-1894986606),i=ir(i,o,e,r,t[a+10],15,-1051523),r=ir(r,i,o,e,t[a+1],21,-2054922799),e=ir(e,r,i,o,t[a+8],6,1873313359),o=ir(o,e,r,i,t[a+15],10,-30611744),i=ir(i,o,e,r,t[a+6],15,-1560198380),r=ir(r,i,o,e,t[a+13],21,1309151649),e=ir(e,r,i,o,t[a+4],6,-145523070),o=ir(o,e,r,i,t[a+11],10,-1120210379),i=ir(i,o,e,r,t[a+2],15,718787259),r=ir(r,i,o,e,t[a+9],21,-343485551),e=Va(e,s),r=Va(r,u),i=Va(i,l),o=Va(o,c)}return[e,r,i,o]}function Ffe(t){if(t.length===0)return[];const n=t.length*8,e=new Uint32Array(JB(n));for(let r=0;r<n;r+=8)e[r>>5]|=(t[r/8]&255)<<r%32;return e}function Va(t,n){const e=(t&65535)+(n&65535);return(t>>16)+(n>>16)+(e>>16)<<16|e&65535}function zfe(t,n){return t<<n|t>>>32-n}function Jy(t,n,e,r,i,o){return Va(zfe(Va(Va(n,t),Va(r,o)),i),e)}function tr(t,n,e,r,i,o,a){return Jy(n&e|~n&r,t,n,i,o,a)}function nr(t,n,e,r,i,o,a){return Jy(n&r|e&~r,t,n,i,o,a)}function rr(t,n,e,r,i,o,a){return Jy(n^e^r,t,n,i,o,a)}function ir(t,n,e,r,i,o,a){return Jy(e^(n|~r),t,n,i,o,a)}var Bfe=Mfe;Yy.default=Bfe;Object.defineProperty(Xy,"__esModule",{value:!0});Xy.default=void 0;var jfe=QB(ds),Vfe=QB(Yy);function QB(t){return t&&t.__esModule?t:{default:t}}const $fe=(0,jfe.default)("v3",48,Vfe.default);var Ufe=$fe;Xy.default=Ufe;var Qy={},Zy={};Object.defineProperty(Zy,"__esModule",{value:!0});Zy.default=void 0;const Wfe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var Hfe={randomUUID:Wfe};Zy.default=Hfe;Object.defineProperty(Qy,"__esModule",{value:!0});Qy.default=void 0;var HI=ZB(Zy),Gfe=ZB(qy),qfe=Cs;function ZB(t){return t&&t.__esModule?t:{default:t}}function Kfe(t,n,e){if(HI.default.randomUUID&&!n&&!t)return HI.default.randomUUID();t=t||{};const r=t.random||(t.rng||Gfe.default)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,n){e=e||0;for(let i=0;i<16;++i)n[e+i]=r[i];return n}return(0,qfe.unsafeStringify)(r)}var Xfe=Kfe;Qy.default=Xfe;var e0={},t0={};Object.defineProperty(t0,"__esModule",{value:!0});t0.default=void 0;function Yfe(t,n,e,r){switch(t){case 0:return n&e^~n&r;case 1:return n^e^r;case 2:return n&e^n&r^e&r;case 3:return n^e^r}}function $1(t,n){return t<<n|t>>>32-n}function Jfe(t){const n=[1518500249,1859775393,2400959708,3395469782],e=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof t=="string"){const a=unescape(encodeURIComponent(t));t=[];for(let s=0;s<a.length;++s)t.push(a.charCodeAt(s))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);const r=t.length/4+2,i=Math.ceil(r/16),o=new Array(i);for(let a=0;a<i;++a){const s=new Uint32Array(16);for(let u=0;u<16;++u)s[u]=t[a*64+u*4]<<24|t[a*64+u*4+1]<<16|t[a*64+u*4+2]<<8|t[a*64+u*4+3];o[a]=s}o[i-1][14]=(t.length-1)*8/Math.pow(2,32),o[i-1][14]=Math.floor(o[i-1][14]),o[i-1][15]=(t.length-1)*8&4294967295;for(let a=0;a<i;++a){const s=new Uint32Array(80);for(let p=0;p<16;++p)s[p]=o[a][p];for(let p=16;p<80;++p)s[p]=$1(s[p-3]^s[p-8]^s[p-14]^s[p-16],1);let u=e[0],l=e[1],c=e[2],d=e[3],f=e[4];for(let p=0;p<80;++p){const h=Math.floor(p/20),v=$1(u,5)+Yfe(h,l,c,d)+f+n[h]+s[p]>>>0;f=d,d=c,c=$1(l,30)>>>0,l=u,u=v}e[0]=e[0]+u>>>0,e[1]=e[1]+l>>>0,e[2]=e[2]+c>>>0,e[3]=e[3]+d>>>0,e[4]=e[4]+f>>>0}return[e[0]>>24&255,e[0]>>16&255,e[0]>>8&255,e[0]&255,e[1]>>24&255,e[1]>>16&255,e[1]>>8&255,e[1]&255,e[2]>>24&255,e[2]>>16&255,e[2]>>8&255,e[2]&255,e[3]>>24&255,e[3]>>16&255,e[3]>>8&255,e[3]&255,e[4]>>24&255,e[4]>>16&255,e[4]>>8&255,e[4]&255]}var Qfe=Jfe;t0.default=Qfe;Object.defineProperty(e0,"__esModule",{value:!0});e0.default=void 0;var Zfe=ej(ds),epe=ej(t0);function ej(t){return t&&t.__esModule?t:{default:t}}const tpe=(0,Zfe.default)("v5",80,epe.default);var npe=tpe;e0.default=npe;var n0={};Object.defineProperty(n0,"__esModule",{value:!0});n0.default=void 0;var rpe="00000000-0000-0000-0000-000000000000";n0.default=rpe;var r0={};Object.defineProperty(r0,"__esModule",{value:!0});r0.default=void 0;var ipe=ope(Bu);function ope(t){return t&&t.__esModule?t:{default:t}}function ape(t){if(!(0,ipe.default)(t))throw TypeError("Invalid UUID");return parseInt(t.slice(14,15),16)}var spe=ape;r0.default=spe;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"NIL",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"parse",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"v1",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"v3",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(t,"v4",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"v5",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"validate",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return a.default}});var n=c(Gy),e=c(Xy),r=c(Qy),i=c(e0),o=c(n0),a=c(r0),s=c(Bu),u=c(Cs),l=c(Vp);function c(d){return d&&d.__esModule?d:{default:d}}})(dR);var fR=ve&&ve.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Lv=ve&&ve.__assign||function(){return Lv=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++){n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Lv.apply(this,arguments)},U1=ve&&ve.__awaiter||function(t,n,e,r){function i(o){return o instanceof e?o:new e(function(a){a(o)})}return new(e||(e=Promise))(function(o,a){function s(c){try{l(r.next(c))}catch(d){a(d)}}function u(c){try{l(r.throw(c))}catch(d){a(d)}}function l(c){c.done?o(c.value):i(c.value).then(s,u)}l((r=r.apply(t,n||[])).next())})},W1=ve&&ve.__generator||function(t,n){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,l[0]&&(e=0)),e;)try{if(r=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return e.label++,{value:l[1],done:!1};case 5:e.label++,i=l[1],l=[0];continue;case 7:l=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){e=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){e.label=l[1];break}if(l[0]===6&&e.label<o[1]){e.label=o[1],o=l;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(l);break}o[2]&&e.ops.pop(),e.trys.pop();continue}l=n.call(t,e)}catch(c){l=[6,c],i=0}finally{r=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};Object.defineProperty(fo,"__esModule",{value:!0});fo.WebRtcPeerSendrecv=fo.WebRtcPeerSendonly=fo.WebRtcPeerRecvonly=fo.WebRtcPeer=void 0;var upe=ufe,lpe=dR,GI=zu,cpe=An,dpe=Yi,an=cpe.OpenViduLogger.getInstance(),i0=function(){function t(n){var e=this;this.remoteCandidatesQueue=[],this.localCandidatesQueue=[],this.iceCandidateList=[],dpe.PlatformUtils.getInstance(),this.configuration=Lv(Lv({},n),{iceServers:n.iceServers&&n.iceServers.length>0?n.iceServers:upe(),mediaStream:n.mediaStream!==void 0?n.mediaStream:null,mode:n.mode?n.mode:"sendrecv",id:n.id?n.id:this.generateUniqueId()}),an.debug(`[WebRtcPeer] configuration:
`.concat(JSON.stringify(this.configuration,null,2))),this.pc=new RTCPeerConnection({iceServers:this.configuration.iceServers}),this.pc.addEventListener("icecandidate",function(r){if(r.candidate!==null){var i=r.candidate,o=new RTCIceCandidate(i);e.configuration.onIceCandidate(o),o.candidate!==""&&e.localCandidatesQueue.push(o)}}),this.pc.addEventListener("signalingstatechange",function(){return U1(e,void 0,void 0,function(){var r,i;return W1(this,function(o){switch(o.label){case 0:if(this.pc.signalingState!=="stable")return[3,6];o.label=1;case 1:if(!(this.iceCandidateList.length>0))return[3,6];r=this.iceCandidateList.shift(),o.label=2;case 2:return o.trys.push([2,4,,5]),[4,this.pc.addIceCandidate(r)];case 3:return o.sent(),[3,5];case 4:return i=o.sent(),an.error("Error when calling RTCPeerConnection#addIceCandidate for RTCPeerConnection "+this.getId(),i),[3,5];case 5:return[3,1];case 6:return[2]}})})})}return t.prototype.getId=function(){return this.configuration.id},t.prototype.dispose=function(){if(an.debug("Disposing WebRtcPeer"),this.pc){if(this.pc.signalingState==="closed")return;this.pc.close(),this.remoteCandidatesQueue=[],this.localCandidatesQueue=[]}},t.prototype.createOfferLegacy=function(){this.configuration.mediaStream&&this.deprecatedPeerConnectionTrackApi();var n=this.configuration.mediaConstraints.audio,e=this.configuration.mediaConstraints.video,r={offerToReceiveAudio:this.configuration.mode!=="sendonly"&&n,offerToReceiveVideo:this.configuration.mode!=="sendonly"&&e};return an.debug("[createOfferLegacy] RTCPeerConnection.createOffer() options:",JSON.stringify(r)),this.pc.createOffer(r)},t.prototype.createOffer=function(){var n,e,r,i,o,a,s,u;return U1(this,void 0,void 0,function(){var l,c,d,f,p,h,v,g,m,y,b,w,x,C,E,S,N,P,k,M,D,R,O,P;return W1(this,function(A){switch(A.label){case 0:if("addTransceiver"in this.pc)an.debug("[createOffer] Method RTCPeerConnection.addTransceiver() is available; using it");else return an.warn("[createOffer] Method RTCPeerConnection.addTransceiver() is NOT available; using LEGACY offerToReceive{Audio,Video}"),[2,this.createOfferLegacy()];if(this.configuration.mode==="recvonly")return[3,7];if(!this.configuration.mediaStream)throw new Error("[WebRtcPeer.createOffer] Direction is '".concat(this.configuration.mode,"', but no stream was configured to be sent"));l=0,c=this.configuration.mediaStream.getTracks(),A.label=1;case 1:if(!(l<c.length))return[3,6];if(d=c[l],f={direction:this.configuration.mode,streams:[this.configuration.mediaStream]},d.kind==="video"&&this.configuration.simulcast)for(p=d.getSettings(),h=d.getConstraints(),v=(r=(e=(n=p.width)!==null&&n!==void 0?n:h.width.ideal)!==null&&e!==void 0?e:h.width)!==null&&r!==void 0?r:0,g=(a=(o=(i=p.height)!==null&&i!==void 0?i:h.height.ideal)!==null&&o!==void 0?o:h.height)!==null&&a!==void 0?a:0,an.info("[createOffer] Video track dimensions: ".concat(v,"x").concat(g)),m=v*g,y=0,m>=960*540?y=3:m>=480*270?y=2:y=1,f.sendEncodings=[],b=0;b<y;b++)w=Math.pow(2,y-b-1),x={rid:"rdiv"+w.toString(),scalabilityMode:"L1T1"},["detail","text"].includes(d.contentHint)?(x.scaleResolutionDownBy=1,x.maxFramerate=Math.floor(30/w)):x.scaleResolutionDownBy=w,f.sendEncodings.push(x);if(C=this.pc.addTransceiver(d,f),d.kind!=="video")return[3,5];if(E=C.sender.getParameters(),S=!1,!((s=E.degradationPreference)===null||s===void 0)&&s.length||(["detail","text"].includes(d.contentHint)?E.degradationPreference="maintain-resolution":E.degradationPreference="balanced",an.info("[createOffer] Video sender Degradation Preference set: ".concat(E.degradationPreference)),S=!0),this.configuration.simulcast&&((u=E.encodings)===null||u===void 0?void 0:u.length)!==f.sendEncodings.length&&(E.encodings=f.sendEncodings,S=!0),!S)return[3,5];an.debug("[createOffer] Setting new RTCRtpSendParameters to video sender"),A.label=2;case 2:return A.trys.push([2,4,,5]),[4,C.sender.setParameters(E)];case 3:return A.sent(),[3,5];case 4:throw N=A.sent(),P="[WebRtcPeer.createOffer] Cannot set RTCRtpSendParameters to video sender",N instanceof Error&&(P+=": ".concat(N.message)),new Error(P);case 5:return l++,[3,1];case 6:return[3,8];case 7:for(k=0,M=["audio","video"];k<M.length;k++)D=M[k],this.configuration.mediaConstraints[D]&&(this.configuration.mediaStream=new MediaStream,this.pc.addTransceiver(D,{direction:this.configuration.mode,streams:[this.configuration.mediaStream]}));A.label=8;case 8:return A.trys.push([8,10,,11]),[4,this.pc.createOffer()];case 9:return R=A.sent(),[3,11];case 10:throw O=A.sent(),P="[WebRtcPeer.createOffer] Browser failed creating an SDP Offer",O instanceof Error&&(P+=": ".concat(O.message)),new Error(P);case 11:return[2,R]}})})},t.prototype.deprecatedPeerConnectionTrackApi=function(){for(var n=0,e=this.configuration.mediaStream.getTracks();n<e.length;n++){var r=e[n];this.pc.addTrack(r,this.configuration.mediaStream)}},t.prototype.createAnswer=function(){var n=this;return new Promise(function(e,r){if("getTransceivers"in n.pc){an.debug("[createAnswer] Method RTCPeerConnection.getTransceivers() is available; using it");for(var i=function(f){if(!n.configuration.mediaConstraints[f])return"continue";var p=n.pc.getTransceivers().find(function(h){return h.receiver.track.kind===f});if(p)p.direction=n.configuration.mode;else return{value:r(new Error("".concat(f," requested, but no transceiver was created from remote description")))}},o=0,a=["audio","video"];o<a.length;o++){var s=a[o],u=i(s);if(typeof u=="object")return u.value}n.pc.createAnswer().then(function(f){return e(f)}).catch(function(f){return r(f)})}else{var l=void 0,c=!0;if(n.configuration.mediaConstraints){l=typeof n.configuration.mediaConstraints.audio=="boolean"?n.configuration.mediaConstraints.audio:!0,c=typeof n.configuration.mediaConstraints.video=="boolean"?n.configuration.mediaConstraints.video:!0;var d={offerToReceiveAudio:l,offerToReceiveVideo:c};n.pc.createAnswer(d).then(function(f){return e(f)}).catch(function(f){return r(f)})}}})},t.prototype.processLocalOffer=function(n){var e=this;return new Promise(function(r,i){e.pc.setLocalDescription(n).then(function(){var o=e.pc.localDescription;return o?(an.debug("Local description set",o.sdp),r()):i("Local description is not defined")}).catch(function(o){return i(o)})})},t.prototype.processRemoteOffer=function(n){var e=this;return new Promise(function(r,i){var o={type:"offer",sdp:n};if(an.debug("SDP offer received, setting remote description",o),e.pc.signalingState==="closed")return i("RTCPeerConnection is closed when trying to set remote description");e.setRemoteDescription(o).then(function(){return r()}).catch(function(a){return i(a)})})},t.prototype.processLocalAnswer=function(n){var e=this;return new Promise(function(r,i){if(an.debug("SDP answer created, setting local description"),e.pc.signalingState==="closed")return i("RTCPeerConnection is closed when trying to set local description");e.pc.setLocalDescription(n).then(function(){return r()}).catch(function(o){return i(o)})})},t.prototype.processRemoteAnswer=function(n){var e=this;return new Promise(function(r,i){var o={type:"answer",sdp:n};if(an.debug("SDP answer received, setting remote description"),e.pc.signalingState==="closed")return i("RTCPeerConnection is closed when trying to set remote description");e.setRemoteDescription(o).then(function(){r()}).catch(function(a){return i(a)})})},t.prototype.setRemoteDescription=function(n){return U1(this,void 0,void 0,function(){return W1(this,function(e){return[2,this.pc.setRemoteDescription(n)]})})},t.prototype.addIceCandidate=function(n){var e=this;return new Promise(function(r,i){switch(an.debug("Remote ICE candidate received",n),e.remoteCandidatesQueue.push(n),e.pc.signalingState){case"closed":i(new Error("PeerConnection object is closed"));break;case"stable":e.pc.remoteDescription?e.pc.addIceCandidate(n).then(function(){return r()}).catch(function(o){return i(o)}):(e.iceCandidateList.push(n),r());break;default:e.iceCandidateList.push(n),r()}})},t.prototype.addIceConnectionStateChangeListener=function(n){var e=this;this.pc.addEventListener("iceconnectionstatechange",function(){var r=e.pc.iceConnectionState;switch(r){case"disconnected":var i="IceConnectionState of RTCPeerConnection "+e.configuration.id+" ("+n+') change to "disconnected". Possible network disconnection';an.warn(i),e.configuration.onIceConnectionStateException(GI.ExceptionEventName.ICE_CONNECTION_DISCONNECTED,i);break;case"failed":var o="IceConnectionState of RTCPeerConnection "+e.configuration.id+" ("+n+') to "failed"';an.error(o),e.configuration.onIceConnectionStateException(GI.ExceptionEventName.ICE_CONNECTION_FAILED,o);break;case"closed":an.log("IceConnectionState of RTCPeerConnection "+e.configuration.id+" ("+n+') change to "closed"');break;case"new":an.log("IceConnectionState of RTCPeerConnection "+e.configuration.id+" ("+n+') change to "new"');break;case"checking":an.log("IceConnectionState of RTCPeerConnection "+e.configuration.id+" ("+n+') change to "checking"');break;case"connected":an.log("IceConnectionState of RTCPeerConnection "+e.configuration.id+" ("+n+') change to "connected"');break;case"completed":an.log("IceConnectionState of RTCPeerConnection "+e.configuration.id+" ("+n+') change to "completed"');break}})},t.prototype.generateUniqueId=function(){return(0,lpe.v4)()},t}();fo.WebRtcPeer=i0;var fpe=function(t){fR(n,t);function n(e){return e.mode="recvonly",t.call(this,e)||this}return n}(i0);fo.WebRtcPeerRecvonly=fpe;var ppe=function(t){fR(n,t);function n(e){return e.mode="sendonly",t.call(this,e)||this}return n}(i0);fo.WebRtcPeerSendonly=ppe;var hpe=function(t){fR(n,t);function n(e){return e.mode="sendrecv",t.call(this,e)||this}return n}(i0);fo.WebRtcPeerSendrecv=hpe;var o0={},Qu=ve&&ve.__awaiter||function(t,n,e,r){function i(o){return o instanceof e?o:new e(function(a){a(o)})}return new(e||(e=Promise))(function(o,a){function s(c){try{l(r.next(c))}catch(d){a(d)}}function u(c){try{l(r.throw(c))}catch(d){a(d)}}function l(c){c.done?o(c.value):i(c.value).then(s,u)}l((r=r.apply(t,n||[])).next())})},Zu=ve&&ve.__generator||function(t,n){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,l[0]&&(e=0)),e;)try{if(r=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return e.label++,{value:l[1],done:!1};case 5:e.label++,i=l[1],l=[0];continue;case 7:l=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){e=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){e.label=l[1];break}if(l[0]===6&&e.label<o[1]){e.label=o[1],o=l;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(l);break}o[2]&&e.ops.pop(),e.trys.pop();continue}l=n.call(t,e)}catch(c){l=[6,c],i=0}finally{r=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};Object.defineProperty(o0,"__esModule",{value:!0});o0.WebRtcStats=void 0;var mpe=An,vpe=Yi,As=mpe.OpenViduLogger.getInstance(),el,gpe=function(){function t(n){this.stream=n,this.STATS_ITEM_NAME="webrtc-stats-config",this.webRtcStatsEnabled=!1,this.statsInterval=1,el=vpe.PlatformUtils.getInstance()}return t.prototype.isEnabled=function(){return this.webRtcStatsEnabled},t.prototype.initWebRtcStats=function(){var n=this,e;try{e=localStorage.getItem(this.STATS_ITEM_NAME)}catch{}if(e){this.webRtcStatsEnabled=!0;var r=JSON.parse(e);As.warn("WebRtc stats enabled for stream "+this.stream.streamId+" of connection "+this.stream.connection.connectionId),As.warn("localStorage item: "+JSON.stringify(r)),this.POST_URL=r.httpEndpoint,this.statsInterval=r.interval,this.webRtcStatsIntervalId=setInterval(function(){return Qu(n,void 0,void 0,function(){return Zu(this,function(i){switch(i.label){case 0:return[4,this.sendStatsToHttpEndpoint()];case 1:return i.sent(),[2]}})})},this.statsInterval*1e3)}else As.debug("WebRtc stats not enabled")},t.prototype.getSelectedIceCandidateInfo=function(){var n=this;return new Promise(function(e,r){return Qu(n,void 0,void 0,function(){var i,o,a,s,u,l,c,d,f,p,h,v,g,m,x,C,y,b,N,w,x,C,E,S,N;return Zu(this,function(k){switch(k.label){case 0:return[4,this.stream.getRTCPeerConnection().getStats()];case 1:if(i=k.sent(),a=new Map,s=new Map,u=new Map,i.forEach(function(M){switch(M.type==="transport"&&(el.isChromium()||el.isSafariBrowser()||el.isReactNative())&&(o=M),M.type){case"candidate-pair":a.set(M.id,M);break;case"local-candidate":s.set(M.id,M);break;case"remote-candidate":u.set(M.id,M);break}}),o!=null)c=o.selectedCandidatePairId,l=a.get(c);else for(d=a.size,f=a.values(),p=0;p<d;p++)if(h=f.next().value,h.selected){l=h;break}if(v=l.localCandidateId,g=l.remoteCandidateId,m=s.get(v),m)for(x=this.stream.getLocalIceCandidateList(),C=x.filter(function(M){return!!M.candidate&&(M.candidate.indexOf(m.ip)>=0||M.candidate.indexOf(m.address)>=0)&&M.candidate.indexOf(m.port)>=0}),m.raw=[],y=0,b=C;y<b.length;y++)N=b[y],m.raw.push(N.candidate);else m="ERROR: No active local ICE candidate. Probably ICE-TCP is being used";if(w=u.get(g),w)for(x=this.stream.getRemoteIceCandidateList(),C=x.filter(function(M){return!!M.candidate&&(M.candidate.indexOf(w.ip)>=0||M.candidate.indexOf(w.address)>=0)&&M.candidate.indexOf(w.port)>=0}),w.raw=[],E=0,S=C;E<S.length;E++)N=S[E],w.raw.push(N.candidate);else w="ERROR: No active remote ICE candidate. Probably ICE-TCP is being used";return[2,e({localCandidate:m,remoteCandidate:w})]}})})})},t.prototype.stopWebRtcStats=function(){this.webRtcStatsEnabled&&(clearInterval(this.webRtcStatsIntervalId),As.warn("WebRtc stats stopped for disposed stream "+this.stream.streamId+" of connection "+this.stream.connection.connectionId))},t.prototype.sendStats=function(n,e){return Qu(this,void 0,void 0,function(){var r,i;return Zu(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),r={headers:{"Content-type":"application/json"},body:JSON.stringify(e),method:"POST"},[4,fetch(n,r)];case 1:return o.sent(),[3,3];case 2:return i=o.sent(),As.error("sendStats error: ".concat(JSON.stringify(i))),[3,3];case 3:return[2]}})})},t.prototype.sendStatsToHttpEndpoint=function(){return Qu(this,void 0,void 0,function(){var n,e,r;return Zu(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),[4,this.getCommonStats()];case 1:return n=i.sent(),e=this.generateJSONStatsResponse(n),[4,this.sendStats(this.POST_URL,e)];case 2:return i.sent(),[3,4];case 3:return r=i.sent(),As.log(r),[3,4];case 4:return[2]}})})},t.prototype.getCommonStats=function(){return Qu(this,void 0,void 0,function(){var n=this;return Zu(this,function(e){return[2,new Promise(function(r,i){return Qu(n,void 0,void 0,function(){var o,a,s,u,l,c=this;return Zu(this,function(d){switch(d.label){case 0:return d.trys.push([0,2,,3]),[4,this.stream.getRTCPeerConnection().getStats()];case 1:return o=d.sent(),a=this.getWebRtcStatsResponseOutline(),s=["framesReceived","framesDropped","framesSent","frameHeight","frameWidth"],u=["availableOutgoingBitrate","currentRoundTripTime"],o.forEach(function(f){var p=f.mediaType!=null?f.mediaType:f.kind,h=function(v,g){f[g]!=null&&a[v]!=null&&(!p&&s.indexOf(g)>-1&&(p="video"),v!=null&&p!=null&&g!=null&&a[v][p]!=null?a[v][p][g]=Number(f[g]):v!=null&&g!=null&&u.includes(g)&&(a[v][g]=Number(f[g])))};switch(f.type){case"outbound-rtp":h("outbound","bytesSent"),h("outbound","packetsSent"),h("outbound","framesEncoded"),h("outbound","nackCount"),h("outbound","firCount"),h("outbound","pliCount"),h("outbound","qpSum");break;case"inbound-rtp":h("inbound","bytesReceived"),h("inbound","packetsReceived"),h("inbound","packetsLost"),h("inbound","jitter"),h("inbound","framesDecoded"),h("inbound","nackCount"),h("inbound","firCount"),h("inbound","pliCount");break;case"track":h("inbound","jitterBufferDelay"),h("inbound","framesReceived"),h("outbound","framesDropped"),h("outbound","framesSent"),h(c.stream.isLocal()?"outbound":"inbound","frameHeight"),h(c.stream.isLocal()?"outbound":"inbound","frameWidth");break;case"candidate-pair":h("candidatepair","currentRoundTripTime"),h("candidatepair","availableOutgoingBitrate");break}}),(!(a!=null&&a.candidatepair)||Object.keys(a.candidatepair).length===0)&&delete a.candidatepair,[2,r(a)];case 2:return l=d.sent(),As.error("Error getting common stats: ",l),[2,i(l)];case 3:return[2]}})})})]})})},t.prototype.generateJSONStatsResponse=function(n){return{"@timestamp":new Date().toISOString(),participant_id:this.stream.connection.data,session_id:this.stream.session.sessionId,platform:el.getName(),platform_description:el.getDescription(),stream:"webRTC",webrtc_stats:n}},t.prototype.getWebRtcStatsResponseOutline=function(){return this.stream.isLocal()?{outbound:{audio:{},video:{}},candidatepair:{}}:{inbound:{audio:{},video:{}}}},t}();o0.WebRtcStats=gpe;var $p={},ype=ve&&ve.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();Object.defineProperty($p,"__esModule",{value:!0});$p.PublisherSpeakingEvent=void 0;var bpe=$n,wpe=function(t){ype(n,t);function n(e,r,i,o){var a=t.call(this,!1,e,r)||this;return a.type=r,a.connection=i,a.streamId=o,a}return n.prototype.callDefaultBehavior=function(){},n}(bpe.Event);$p.PublisherSpeakingEvent=wpe;var a0={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.TypeOfVideo=void 0,function(n){n.CAMERA="CAMERA",n.SCREEN="SCREEN",n.CUSTOM="CUSTOM",n.IPCAM="IPCAM"}(t.TypeOfVideo||(t.TypeOfVideo={}))})(a0);var xpe=Fv;function Fv(){}Fv.mixin=function(t){var n=t.prototype||t;n.isWildEmitter=!0,n.on=function(e,r,i){this.callbacks=this.callbacks||{};var o=arguments.length===3,a=o?arguments[1]:void 0,s=o?arguments[2]:arguments[1];return s._groupName=a,(this.callbacks[e]=this.callbacks[e]||[]).push(s),this},n.once=function(e,r,i){var o=this,a=arguments.length===3,s=a?arguments[1]:void 0,u=a?arguments[2]:arguments[1];function l(){o.off(e,l),u.apply(this,arguments)}return this.on(e,s,l),this},n.releaseGroup=function(e){this.callbacks=this.callbacks||{};var r,i,o,a;for(r in this.callbacks)for(a=this.callbacks[r],i=0,o=a.length;i<o;i++)a[i]._groupName===e&&(a.splice(i,1),i--,o--);return this},n.off=function(e,r){this.callbacks=this.callbacks||{};var i=this.callbacks[e],o;return i?arguments.length===1?(delete this.callbacks[e],this):(o=i.indexOf(r),o!==-1&&(i.splice(o,1),i.length===0&&delete this.callbacks[e]),this):this},n.emit=function(e){this.callbacks=this.callbacks||{};var r=[].slice.call(arguments,1),i=this.callbacks[e],o=this.getWildcardCallbacks(e),a,s,u;if(i)for(u=i.slice(),a=0,s=u.length;a<s&&u[a];++a)u[a].apply(this,r);if(o)for(s=o.length,u=o.slice(),a=0,s=u.length;a<s&&u[a];++a)u[a].apply(this,[e].concat(r));return this},n.getWildcardCallbacks=function(e){this.callbacks=this.callbacks||{};var r,i,o=[];for(r in this.callbacks)i=r.split("*"),(r==="*"||i.length===2&&e.slice(0,i[0].length)===i[0])&&(o=o.concat(this.callbacks[r]));return o}};Fv.mixin(Fv);var Spe=xpe;function Epe(t,n){var e=-1/0;t.getFloatFrequencyData(n);for(var r=4,i=n.length;r<i;r++)n[r]>e&&n[r]<0&&(e=n[r]);return e}var xx;typeof window<"u"&&(xx=window.AudioContext||window.webkitAudioContext);var ki=null,Cpe=function(t,r){var e=new Spe;if(!xx)return e;var r=r||{},i=r.smoothing||.1,o=r.interval||50,a=r.threshold,s=r.play,u=r.history||10,l=!0;ki=r.audioContext||ki||new xx;var c,d,f;f=ki.createAnalyser(),f.fftSize=512,f.smoothingTimeConstant=i,d=new Float32Array(f.frequencyBinCount),t.jquery&&(t=t[0]),t instanceof HTMLAudioElement||t instanceof HTMLVideoElement?(c=ki.createMediaElementSource(t),typeof s>"u"&&(s=!0),a=a||-50):(c=ki.createMediaStreamSource(t),a=a||-50),c.connect(f),s&&f.connect(ki.destination),e.speaking=!1,e.suspend=function(){return ki.suspend()},e.resume=function(){return ki.resume()},Object.defineProperty(e,"state",{get:function(){return ki.state}}),ki.onstatechange=function(){e.emit("state_change",ki.state)},e.setThreshold=function(v){a=v},e.setInterval=function(v){o=v},e.stop=function(){l=!1,e.emit("volume_change",-100,a),e.speaking&&(e.speaking=!1,e.emit("stopped_speaking")),f.disconnect(),c.disconnect()},e.speakingHistory=[];for(var p=0;p<u;p++)e.speakingHistory.push(0);var h=function(){setTimeout(function(){if(l){var v=Epe(f,d);e.emit("volume_change",v,a);var g=0;if(v>a&&!e.speaking){for(var m=e.speakingHistory.length-3;m<e.speakingHistory.length;m++)g+=e.speakingHistory[m];g>=2&&(e.speaking=!0,e.emit("speaking"))}else if(v<a&&e.speaking){for(var m=0;m<e.speakingHistory.length;m++)g+=e.speakingHistory[m];g==0&&(e.speaking=!1,e.emit("stopped_speaking"))}e.speakingHistory.shift(),e.speakingHistory.push(0+(v>a)),h()}},o)};return h(),e},Zi=ve&&ve.__awaiter||function(t,n,e,r){function i(o){return o instanceof e?o:new e(function(a){a(o)})}return new(e||(e=Promise))(function(o,a){function s(c){try{l(r.next(c))}catch(d){a(d)}}function u(c){try{l(r.throw(c))}catch(d){a(d)}}function l(c){c.done?o(c.value):i(c.value).then(s,u)}l((r=r.apply(t,n||[])).next())})},eo=ve&&ve.__generator||function(t,n){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,l[0]&&(e=0)),e;)try{if(r=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return e.label++,{value:l[1],done:!1};case 5:e.label++,i=l[1],l=[0];continue;case 7:l=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){e=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){e.label=l[1];break}if(l[0]===6&&e.label<o[1]){e.label=o[1],o=l;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(l);break}o[2]&&e.ops.pop(),e.trys.pop();continue}l=n.call(t,e)}catch(c){l=[6,c],i=0}finally{r=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};Object.defineProperty(zc,"__esModule",{value:!0});zc.Stream=void 0;var H1=Bc,Rpe=jc,G1=fo,Tpe=o0,Rd=zu,wa=$p,qI=Uc,Vh=ha,hn=Fu,xa=a0,Npe=An,kpe=Yi,Ipe=dR,_pe=Cpe,KI=cR,Et=Npe.OpenViduLogger.getInstance(),XI,Ape=function(){function t(n,e){var r=this;this.isSubscribeToRemote=!1,this.isLocalStreamReadyToPublish=!1,this.isLocalStreamPublished=!1,this.publishedOnce=!1,this.harkSpeakingEnabled=!1,this.harkSpeakingEnabledOnce=!1,this.harkStoppedSpeakingEnabled=!1,this.harkStoppedSpeakingEnabledOnce=!1,this.harkVolumeChangeEnabled=!1,this.harkVolumeChangeEnabledOnce=!1,this.ee=new KI,XI=kpe.PlatformUtils.getInstance(),this.session=n,e.hasOwnProperty("id")?(this.inboundStreamOpts=e,this.streamId=this.inboundStreamOpts.id,this.creationTime=this.inboundStreamOpts.createdAt,this.hasAudio=this.inboundStreamOpts.hasAudio,this.hasVideo=this.inboundStreamOpts.hasVideo,this.hasAudio&&(this.audioActive=this.inboundStreamOpts.audioActive),this.hasVideo&&(this.videoActive=this.inboundStreamOpts.videoActive,this.typeOfVideo=this.inboundStreamOpts.typeOfVideo?this.inboundStreamOpts.typeOfVideo:void 0,this.frameRate=this.inboundStreamOpts.frameRate===-1?void 0:this.inboundStreamOpts.frameRate,this.videoDimensions=this.inboundStreamOpts.videoDimensions),this.inboundStreamOpts.filter&&Object.keys(this.inboundStreamOpts.filter).length>0&&(this.inboundStreamOpts.filter.lastExecMethod&&Object.keys(this.inboundStreamOpts.filter.lastExecMethod).length===0&&delete this.inboundStreamOpts.filter.lastExecMethod,this.filter=this.inboundStreamOpts.filter)):(this.outboundStreamOpts=e,this.hasAudio=this.isSendAudio(),this.hasVideo=this.isSendVideo(),this.hasAudio&&(this.audioActive=!!this.outboundStreamOpts.publisherProperties.publishAudio),this.hasVideo&&(this.videoActive=!!this.outboundStreamOpts.publisherProperties.publishVideo,this.frameRate=this.outboundStreamOpts.publisherProperties.frameRate,typeof MediaStreamTrack<"u"&&this.outboundStreamOpts.publisherProperties.videoSource instanceof MediaStreamTrack?this.typeOfVideo=xa.TypeOfVideo.CUSTOM:this.typeOfVideo=this.isSendScreen()?xa.TypeOfVideo.SCREEN:xa.TypeOfVideo.CAMERA),this.outboundStreamOpts.publisherProperties.filter&&(this.filter=this.outboundStreamOpts.publisherProperties.filter)),this.ee.on("mediastream-updated",function(){var i;r.streamManager.updateMediaStream(r.mediaStream),Et.debug("Video srcObject ["+((i=r.mediaStream)===null||i===void 0?void 0:i.id)+"] updated in stream ["+r.streamId+"]")})}return t.prototype.reconnect=function(){return this.reconnectStream("API")},t.prototype.applyFilter=function(n,e){var r=this;return new Promise(function(i,o){return Zi(r,void 0,void 0,function(){var a,s,u,l,c,d,f=this;return eo(this,function(p){if(this.filter)return[2,o(new hn.OpenViduError(hn.OpenViduErrorName.GENERIC_ERROR,"There is already a filter applied to Stream "+this.streamId))];if(a=function(h,v){if(h)return Et.error("Error applying filter for Stream "+f.streamId,h),h.code===401?o(new hn.OpenViduError(hn.OpenViduErrorName.OPENVIDU_PERMISSION_DENIED,"You don't have permissions to apply a filter")):o(h);Et.info("Filter successfully applied on Stream "+f.streamId);var g=f.filter;return f.filter=new H1.Filter(n,e),f.filter.stream=f,v&&(f.session.emitEvent("streamPropertyChanged",[new Vh.StreamPropertyChangedEvent(f.session,f,"filter",f.filter,g,"applyFilter")]),f.streamManager.emitEvent("streamPropertyChanged",[new Vh.StreamPropertyChangedEvent(f.streamManager,f,"filter",f.filter,g,"applyFilter")])),i(f.filter)},n.startsWith("VB:")){if(!this.hasVideo)return[2,o(new hn.OpenViduError(hn.OpenViduErrorName.VIRTUAL_BACKGROUND_ERROR,"The Virtual Background filter requires a video track to be applied"))];if(!this.mediaStream||this.streamManager.videos.length===0)return[2,o(new hn.OpenViduError(hn.OpenViduErrorName.VIRTUAL_BACKGROUND_ERROR,"The StreamManager requires some video element to be attached to it in order to apply a Virtual Background filter"))];if(this.session.token?s=this.session.token:s=e.token,!s)return[2,o(new hn.OpenViduError(hn.OpenViduErrorName.VIRTUAL_BACKGROUND_ERROR,'Virtual Background requires the client to be connected to a Session or to have a "token" property available in "options" parameter with a valid OpenVidu token'))];if(u=this.session.getTokenParams(s),u.edition!=="pro"&&u.edition!=="enterprise")return[2,o(new hn.OpenViduError(hn.OpenViduErrorName.VIRTUAL_BACKGROUND_ERROR,"OpenVidu Virtual Background API is available from OpenVidu Pro edition onwards"))];s=encodeURIComponent(btoa(s)),Et.info("Applying Virtual Background to stream "+this.streamId),l=function(){return Zi(f,void 0,void 0,function(){var h,v,g,m,y,b,w;return eo(this,function(x){switch(x.label){case 0:return x.trys.push([0,8,,9]),h=this.streamId+"_"+(0,Ipe.v4)(),v=this.mediaStream.clone(),g=this.streamManager.videos[0].video.cloneNode(!1),g.id=VirtualBackground.VirtualBackground.SOURCE_VIDEO_PREFIX+h,g.srcObject=v,g.muted=!0,this.virtualBackgroundSourceElements={videoClone:g,mediaStreamClone:v},VirtualBackground.VirtualBackground.hideHtmlElement(g,!1),VirtualBackground.VirtualBackground.appendHtmlElementToHiddenContainer(g,h),[4,g.play()];case 1:switch(x.sent(),m=new VirtualBackground.VirtualBackground({id:h,openviduServerUrl:new URL(u.httpUri),openviduToken:s,inputVideo:g,inputResolution:"160x96",outputFramerate:24}),y=void 0,b=n,b){case"VB:blur":return[3,2];case"VB:image":return[3,4]}return[3,6];case 2:return[4,m.backgroundBlur(e)];case 3:return y=x.sent(),[3,7];case 4:return[4,m.backgroundImage(e)];case 5:return y=x.sent(),[3,7];case 6:throw new Error("Unknown Virtual Background filter: "+n);case 7:return this.virtualBackgroundSinkElements={VB:m,video:y},g.style.display="none",this.streamManager.remote?this.streamManager.replaceTrackInMediaStream(this.virtualBackgroundSinkElements.video.srcObject.getVideoTracks()[0],!1):this.streamManager.replaceTrackAux(this.virtualBackgroundSinkElements.video.srcObject.getVideoTracks()[0],!1),a(void 0,!1),[3,9];case 8:return w=x.sent(),w.name===hn.OpenViduErrorName.VIRTUAL_BACKGROUND_ERROR?a(new hn.OpenViduError(hn.OpenViduErrorName.VIRTUAL_BACKGROUND_ERROR,w.message),!1):a(w,!1),[3,9];case 9:return[2]}})})},typeof VirtualBackground>"u"?(c=document.createElement("script"),c.type="text/javascript",c.src=u.httpUri+"/openvidu/virtual-background/openvidu-virtual-background.js?token="+s,c.onload=function(){return Zi(f,void 0,void 0,function(){var h;return eo(this,function(v){switch(v.label){case 0:return v.trys.push([0,2,,3]),[4,l()];case 1:return v.sent(),i(new H1.Filter(n,e)),[3,3];case 2:return h=v.sent(),o(h),[3,3];case 3:return[2]}})})},document.body.appendChild(c)):l().then(function(){return i(new H1.Filter(n,e))}).catch(function(h){return o(h)})}else{if(!this.session.sessionConnected())return[2,o(this.session.notConnectedError())];Et.info("Applying server filter to stream "+this.streamId),e=e??{},d=e,typeof d!="string"&&(d=JSON.stringify(d)),this.session.openvidu.sendRequest("applyFilter",{streamId:this.streamId,type:n,options:d},function(h,v){a(h,!0)})}return[2]})})})},t.prototype.removeFilter=function(){return Zi(this,void 0,void 0,function(){return eo(this,function(n){switch(n.label){case 0:return[4,this.removeFilterAux(!1)];case 1:return[2,n.sent()]}})})},t.prototype.getRTCPeerConnection=function(){return this.webRtcPeer.pc},t.prototype.getMediaStream=function(){return this.mediaStream},t.prototype.removeFilterAux=function(n){var e=this;return new Promise(function(r,i){return Zi(e,void 0,void 0,function(){var o,a,s,u=this,l;return eo(this,function(c){switch(c.label){case 0:if(o=function(d,f){if(d)return delete u.filter,Et.error("Error removing filter for Stream "+u.streamId,d),d.code===401?i(new hn.OpenViduError(hn.OpenViduErrorName.OPENVIDU_PERMISSION_DENIED,"You don't have permissions to remove a filter")):i(d);Et.info("Filter successfully removed from Stream "+u.streamId);var p=u.filter;return delete u.filter,f&&(u.session.emitEvent("streamPropertyChanged",[new Vh.StreamPropertyChangedEvent(u.session,u,"filter",u.filter,p,"applyFilter")]),u.streamManager.emitEvent("streamPropertyChanged",[new Vh.StreamPropertyChangedEvent(u.streamManager,u,"filter",u.filter,p,"applyFilter")])),r()},!this.filter)return[3,11];if(!(!((l=this.filter)===null||l===void 0)&&l.type.startsWith("VB:")))return[3,9];c.label=1;case 1:return c.trys.push([1,7,,8]),a=this.virtualBackgroundSourceElements.mediaStreamClone,n?[3,5]:this.streamManager.remote?(this.streamManager.replaceTrackInMediaStream(a.getVideoTracks()[0],!1),[3,4]):[3,2];case 2:return[4,this.streamManager.replaceTrackAux(a.getVideoTracks()[0],!1)];case 3:c.sent(),c.label=4;case 4:return[3,6];case 5:a.getTracks().forEach(function(d){return d.stop()}),c.label=6;case 6:return this.virtualBackgroundSinkElements.VB.cleanUp(),delete this.virtualBackgroundSinkElements,delete this.virtualBackgroundSourceElements,[2,o(void 0,!1)];case 7:return s=c.sent(),[2,o(s,!1)];case 8:return[3,10];case 9:if(!this.session.sessionConnected())return[2,i(this.session.notConnectedError())];Et.info("Removing filter of stream "+this.streamId),this.session.openvidu.sendRequest("removeFilter",{streamId:this.streamId},function(d,f){return o(d,!0)}),c.label=10;case 10:return[3,12];case 11:return[2,i(new hn.OpenViduError(hn.OpenViduErrorName.GENERIC_ERROR,"Stream "+this.streamId+" has no filter applied"))];case 12:return[2]}})})})},t.prototype.setMediaStream=function(n){this.mediaStream=n},t.prototype.updateMediaStreamInVideos=function(){this.ee.emitEvent("mediastream-updated",[])},t.prototype.getWebRtcPeer=function(){return this.webRtcPeer},t.prototype.subscribeToMyRemote=function(n){this.isSubscribeToRemote=n},t.prototype.setOutboundStreamOptions=function(n){this.outboundStreamOpts=n},t.prototype.subscribe=function(){var n=this;return new Promise(function(e,r){n.initWebRtcPeerReceive(!1).then(function(){return e()}).catch(function(i){return r(i)})})},t.prototype.publish=function(){var n=this;return new Promise(function(e,r){n.isLocalStreamReadyToPublish?n.initWebRtcPeerSend(!1).then(function(){return e()}).catch(function(i){return r(i)}):n.ee.once("stream-ready-to-publish",function(){n.publish().then(function(){return e()}).catch(function(i){return r(i)})})})},t.prototype.disposeWebRtcPeer=function(){var n;this.webRtcPeer&&(this.webRtcPeer.dispose(),n=this.webRtcPeer.getId()),this.stopWebRtcStats(),Et.info((this.outboundStreamOpts?"Outbound ":"Inbound ")+"RTCPeerConnection with id ["+n+"] from 'Stream' with id ["+this.streamId+"] is now closed")},t.prototype.disposeMediaStream=function(){return Zi(this,void 0,void 0,function(){var n;return eo(this,function(e){switch(e.label){case 0:if(!(this.filter&&this.filter.type.startsWith("VB:")))return[3,4];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.removeFilterAux(!0)];case 2:return e.sent(),console.debug("Success removing Virtual Background filter for stream ".concat(this.streamId)),[3,4];case 3:return n=e.sent(),console.error("Error removing Virtual Background filter for stream ".concat(this.streamId),n),[3,4];case 4:return this.mediaStream&&(this.mediaStream.getAudioTracks().forEach(function(r){r.stop()}),this.mediaStream.getVideoTracks().forEach(function(r){r.stop()}),delete this.mediaStream),this.localMediaStreamWhenSubscribedToRemote&&(this.localMediaStreamWhenSubscribedToRemote.getAudioTracks().forEach(function(r){r.stop()}),this.localMediaStreamWhenSubscribedToRemote.getVideoTracks().forEach(function(r){r.stop()}),delete this.localMediaStreamWhenSubscribedToRemote),this.speechEvent&&(this.speechEvent.stop&&this.speechEvent.stop(),delete this.speechEvent),Et.info((this.outboundStreamOpts?"Local ":"Remote ")+"MediaStream from 'Stream' with id ["+this.streamId+"] is now disposed"),[2]}})})},t.prototype.displayMyRemote=function(){return this.isSubscribeToRemote},t.prototype.isSendAudio=function(){return!!this.outboundStreamOpts&&this.outboundStreamOpts.publisherProperties.audioSource!==null&&this.outboundStreamOpts.publisherProperties.audioSource!==!1},t.prototype.isSendVideo=function(){return!!this.outboundStreamOpts&&this.outboundStreamOpts.publisherProperties.videoSource!==null&&this.outboundStreamOpts.publisherProperties.videoSource!==!1},t.prototype.isSendScreen=function(){var n=!1;if(typeof MediaStreamTrack<"u"&&this.outboundStreamOpts.publisherProperties.videoSource instanceof MediaStreamTrack){var e=this.outboundStreamOpts.publisherProperties.videoSource.getSettings();e.displaySurface&&(n=["monitor","window","browser"].includes(e.displaySurface))}return!n&&XI.isElectron()&&(n=typeof this.outboundStreamOpts.publisherProperties.videoSource=="string"&&this.outboundStreamOpts.publisherProperties.videoSource.startsWith("screen:")),n||(n=this.outboundStreamOpts.publisherProperties.videoSource==="screen"),!!this.outboundStreamOpts&&n},t.prototype.enableHarkSpeakingEvent=function(){var n=this;this.setHarkListenerIfNotExists(),!this.harkSpeakingEnabled&&this.speechEvent&&(this.harkSpeakingEnabled=!0,this.speechEvent.on("speaking",function(){n.session.emitEvent("publisherStartSpeaking",[new wa.PublisherSpeakingEvent(n.session,"publisherStartSpeaking",n.connection,n.streamId)]),n.streamManager.emitEvent("publisherStartSpeaking",[new wa.PublisherSpeakingEvent(n.streamManager,"publisherStartSpeaking",n.connection,n.streamId)]),n.harkSpeakingEnabledOnce=!1}))},t.prototype.enableOnceHarkSpeakingEvent=function(){var n=this;this.setHarkListenerIfNotExists(),!this.harkSpeakingEnabledOnce&&this.speechEvent&&(this.harkSpeakingEnabledOnce=!0,this.speechEvent.once("speaking",function(){n.harkSpeakingEnabledOnce&&(n.session.emitEvent("publisherStartSpeaking",[new wa.PublisherSpeakingEvent(n.session,"publisherStartSpeaking",n.connection,n.streamId)]),n.streamManager.emitEvent("publisherStartSpeaking",[new wa.PublisherSpeakingEvent(n.streamManager,"publisherStartSpeaking",n.connection,n.streamId)])),n.disableHarkSpeakingEvent(!0)}))},t.prototype.disableHarkSpeakingEvent=function(n){if(this.speechEvent){if(this.harkSpeakingEnabledOnce=!1,n){if(this.harkSpeakingEnabled)return}else this.harkSpeakingEnabled=!1;this.harkVolumeChangeEnabled||this.harkVolumeChangeEnabledOnce||this.harkStoppedSpeakingEnabled||this.harkStoppedSpeakingEnabledOnce?this.speechEvent.off("speaking"):(this.speechEvent.stop(),delete this.speechEvent)}},t.prototype.enableHarkStoppedSpeakingEvent=function(){var n=this;this.setHarkListenerIfNotExists(),!this.harkStoppedSpeakingEnabled&&this.speechEvent&&(this.harkStoppedSpeakingEnabled=!0,this.speechEvent.on("stopped_speaking",function(){n.session.emitEvent("publisherStopSpeaking",[new wa.PublisherSpeakingEvent(n.session,"publisherStopSpeaking",n.connection,n.streamId)]),n.streamManager.emitEvent("publisherStopSpeaking",[new wa.PublisherSpeakingEvent(n.streamManager,"publisherStopSpeaking",n.connection,n.streamId)]),n.harkStoppedSpeakingEnabledOnce=!1}))},t.prototype.enableOnceHarkStoppedSpeakingEvent=function(){var n=this;this.setHarkListenerIfNotExists(),!this.harkStoppedSpeakingEnabledOnce&&this.speechEvent&&(this.harkStoppedSpeakingEnabledOnce=!0,this.speechEvent.once("stopped_speaking",function(){n.harkStoppedSpeakingEnabledOnce&&(n.session.emitEvent("publisherStopSpeaking",[new wa.PublisherSpeakingEvent(n.session,"publisherStopSpeaking",n.connection,n.streamId)]),n.streamManager.emitEvent("publisherStopSpeaking",[new wa.PublisherSpeakingEvent(n.streamManager,"publisherStopSpeaking",n.connection,n.streamId)])),n.disableHarkStoppedSpeakingEvent(!0)}))},t.prototype.disableHarkStoppedSpeakingEvent=function(n){if(this.speechEvent){if(this.harkStoppedSpeakingEnabledOnce=!1,n){if(this.harkStoppedSpeakingEnabled)return}else this.harkStoppedSpeakingEnabled=!1;this.harkVolumeChangeEnabled||this.harkVolumeChangeEnabledOnce||this.harkSpeakingEnabled||this.harkSpeakingEnabledOnce?this.speechEvent.off("stopped_speaking"):(this.speechEvent.stop(),delete this.speechEvent)}},t.prototype.enableHarkVolumeChangeEvent=function(n){var e=this;this.setHarkListenerIfNotExists()?(!this.harkVolumeChangeEnabled||n)&&(this.harkVolumeChangeEnabled=!0,this.speechEvent.on("volume_change",function(r){var i=e.speechEvent.oldVolumeValue,o={newValue:r,oldValue:i};e.speechEvent.oldVolumeValue=r,e.streamManager.emitEvent("streamAudioVolumeChange",[new qI.StreamManagerEvent(e.streamManager,"streamAudioVolumeChange",o)])})):this.harkVolumeChangeEnabled=!0},t.prototype.enableOnceHarkVolumeChangeEvent=function(n){var e=this;this.setHarkListenerIfNotExists()?(!this.harkVolumeChangeEnabledOnce||n)&&(this.harkVolumeChangeEnabledOnce=!0,this.speechEvent.once("volume_change",function(r){var i=e.speechEvent.oldVolumeValue,o={newValue:r,oldValue:i};e.speechEvent.oldVolumeValue=r,e.disableHarkVolumeChangeEvent(!0),e.streamManager.emitEvent("streamAudioVolumeChange",[new qI.StreamManagerEvent(e.streamManager,"streamAudioVolumeChange",o)])})):this.harkVolumeChangeEnabledOnce=!0},t.prototype.disableHarkVolumeChangeEvent=function(n){if(this.speechEvent){if(this.harkVolumeChangeEnabledOnce=!1,n){if(this.harkVolumeChangeEnabled)return}else this.harkVolumeChangeEnabled=!1;this.harkSpeakingEnabled||this.harkSpeakingEnabledOnce||this.harkStoppedSpeakingEnabled||this.harkStoppedSpeakingEnabledOnce?this.speechEvent.off("volume_change"):(this.speechEvent.stop(),delete this.speechEvent)}},t.prototype.isLocal=function(){return!this.inboundStreamOpts&&!!this.outboundStreamOpts},t.prototype.getSelectedIceCandidate=function(){var n=this;return new Promise(function(e,r){n.webRtcStats.getSelectedIceCandidateInfo().then(function(i){return e(i)}).catch(function(i){return r(i)})})},t.prototype.getRemoteIceCandidateList=function(){return this.webRtcPeer.remoteCandidatesQueue},t.prototype.getLocalIceCandidateList=function(){return this.webRtcPeer.localCandidatesQueue},t.prototype.streamIceConnectionStateBroken=function(){if(!this.getWebRtcPeer()||!this.getRTCPeerConnection())return!1;if(this.session.openvidu.advancedConfiguration.forceMediaReconnectionAfterNetworkDrop)return Et.warn('OpenVidu Browser advanced configuration option "forceMediaReconnectionAfterNetworkDrop" is enabled. Stream '.concat(this.streamId," (").concat(this.isLocal()?"Publisher":"Subscriber",") will force a reconnection")),!0;var n=this.getRTCPeerConnection().iceConnectionState;return n!=="connected"&&n!=="completed"},t.prototype.setHarkListenerIfNotExists=function(){if(this.mediaStream){if(!this.speechEvent){var n=this.harkOptions?this.harkOptions:this.session.openvidu.advancedConfiguration.publisherSpeakingEventsOptions||{};n.interval=typeof n.interval=="number"?n.interval:100,n.threshold=typeof n.threshold=="number"?n.threshold:-50,this.speechEvent=_pe(this.mediaStream,n)}return!0}return!1},t.prototype.setupReconnectionEventEmitter=function(n,e){return this.reconnectionEventEmitter==null?(this.reconnectionEventEmitter=new KI,!1):(console.warn("Trying to reconnect stream ".concat(this.streamId," (").concat(this.isLocal()?"Publisher":"Subscriber",") but an ongoing reconnection process is active. Waiting for response...")),this.reconnectionEventEmitter.once("success",function(){return n()}),this.reconnectionEventEmitter.once("error",function(r){return e(r)}),!0)},t.prototype.initWebRtcPeerSend=function(n){var e=this;return new Promise(function(r,i){var o;if(n){if(e.setupReconnectionEventEmitter(r,i))return}else e.initHarkEvents();var a=function(){var c;return n&&((c=e.reconnectionEventEmitter)===null||c===void 0||c.emitEvent("success"),delete e.reconnectionEventEmitter),r()},s=function(c){var d;return n&&((d=e.reconnectionEventEmitter)===null||d===void 0||d.emitEvent("error",[c]),delete e.reconnectionEventEmitter),i(c)},u=function(c){Et.debug("Sending SDP offer to publish as "+e.streamId,c);var d=n?"reconnectStream":"publishVideo",f;if(n)f={stream:e.streamId,sdpString:c};else{var p=void 0;e.isSendVideo()&&(p=typeof MediaStreamTrack<"u"&&e.outboundStreamOpts.publisherProperties.videoSource instanceof MediaStreamTrack?xa.TypeOfVideo.CUSTOM:e.isSendScreen()?xa.TypeOfVideo.SCREEN:xa.TypeOfVideo.CAMERA),f={doLoopback:e.displayMyRemote()||!1,hasAudio:e.isSendAudio(),hasVideo:e.isSendVideo(),audioActive:e.audioActive,videoActive:e.videoActive,typeOfVideo:p,frameRate:e.frameRate?e.frameRate:-1,videoDimensions:JSON.stringify(e.videoDimensions),filter:e.outboundStreamOpts.publisherProperties.filter,sdpOffer:c}}e.session.openvidu.sendRequest(d,f,function(h,v){h?h.code===401?s(new hn.OpenViduError(hn.OpenViduErrorName.OPENVIDU_PERMISSION_DENIED,"You don't have permissions to publish")):s("Error on publishVideo: "+JSON.stringify(h)):e.webRtcPeer.processRemoteAnswer(v.sdpAnswer).then(function(){e.streamId=v.id,e.creationTime=v.createdAt,e.isLocalStreamPublished=!0,e.publishedOnce=!0,e.displayMyRemote()&&(e.localMediaStreamWhenSubscribedToRemote=e.mediaStream,e.remotePeerSuccessfullyEstablished(n)),n?e.ee.emitEvent("stream-reconnected-by-publisher",[]):e.ee.emitEvent("stream-created-by-publisher",[]),e.initWebRtcStats(),Et.info("'Publisher' ("+e.streamId+") successfully "+(n?"reconnected":"published")+" to session"),a()}).catch(function(g){s(g)})})},l={mediaConstraints:{audio:e.hasAudio,video:e.hasVideo},simulcast:(o=e.outboundStreamOpts.publisherProperties.videoSimulcast)!==null&&o!==void 0?o:e.session.openvidu.videoSimulcast,onIceCandidate:e.connection.sendIceCandidate.bind(e.connection),onIceConnectionStateException:e.onIceConnectionStateExceptionHandler.bind(e),iceServers:e.getIceServersConf(),mediaStream:e.mediaStream,mediaServer:e.session.openvidu.mediaServer,typeOfVideo:e.typeOfVideo?xa.TypeOfVideo[e.typeOfVideo]:void 0};e.session.openvidu.mediaServer!=="mediasoup"&&(l.simulcast=!1),n&&e.disposeWebRtcPeer(),e.displayMyRemote()?e.webRtcPeer=new G1.WebRtcPeerSendrecv(l):e.webRtcPeer=new G1.WebRtcPeerSendonly(l),e.webRtcPeer.addIceConnectionStateChangeListener("publisher of "+e.connection.connectionId),e.webRtcPeer.createOffer().then(function(c){e.webRtcPeer.processLocalOffer(c).then(function(){u(c.sdp)}).catch(function(d){s(new Error("(publish) SDP process local offer error: "+JSON.stringify(d)))})}).catch(function(c){s(new Error("(publish) SDP create offer error: "+JSON.stringify(c)))})})},t.prototype.finalResolveForSubscription=function(n,e){var r;return Et.info("'Subscriber' ("+this.streamId+") successfully "+(n?"reconnected":"subscribed")),this.remotePeerSuccessfullyEstablished(n),this.initWebRtcStats(),n&&((r=this.reconnectionEventEmitter)===null||r===void 0||r.emitEvent("success"),delete this.reconnectionEventEmitter),e()},t.prototype.finalRejectForSubscription=function(n,e,r){var i;return Et.error("Error for 'Subscriber' ("+this.streamId+") while trying to "+(n?"reconnect":"subscribe")+": "+e.toString()),n&&((i=this.reconnectionEventEmitter)===null||i===void 0||i.emitEvent("error",[e]),delete this.reconnectionEventEmitter),r(e)},t.prototype.initWebRtcPeerReceive=function(n){var e=this;return new Promise(function(r,i){n&&e.setupReconnectionEventEmitter(r,i)||(e.session.openvidu.mediaServer==="mediasoup"?e.initWebRtcPeerReceiveFromServer(n).then(function(){return e.finalResolveForSubscription(n,r)}).catch(function(o){return e.finalRejectForSubscription(n,o,i)}):e.initWebRtcPeerReceiveFromClient(n).then(function(){return e.finalResolveForSubscription(n,r)}).catch(function(o){return e.finalRejectForSubscription(n,o,i)}))})},t.prototype.initWebRtcPeerReceiveFromClient=function(n){var e=this;return new Promise(function(r,i){e.completeWebRtcPeerReceive(n,!1).then(function(o){e.webRtcPeer.processRemoteAnswer(o.sdpAnswer).then(function(){return r()}).catch(function(a){return i(a)})}).catch(function(o){return i(o)})})},t.prototype.initWebRtcPeerReceiveFromServer=function(n){var e=this;return new Promise(function(r,i){e.session.openvidu.sendRequest("prepareReceiveVideoFrom",{sender:e.streamId,reconnect:n},function(o,a){if(o)return i(new Error("Error on prepareReceiveVideoFrom: "+JSON.stringify(o)));e.completeWebRtcPeerReceive(n,!1,a.sdpOffer).then(function(){return r()}).catch(function(s){return i(s)})})})},t.prototype.completeWebRtcPeerReceive=function(n,e,r){var i=this;return new Promise(function(o,a){Et.debug("'Session.subscribe(Stream)' called");var s=function(l){Et.debug("Sending local SDP ".concat(r?"answer":"offer"," to subscribe to ").concat(i.streamId),l);var c=n?"reconnectStream":"receiveVideoFrom",d={};d[n?"stream":"sender"]=i.streamId,r?d[n?"sdpString":"sdpAnswer"]=l:d.sdpOffer=l,n&&(d.forciblyReconnect=e),i.session.openvidu.sendRequest(c,d,function(f,p){return f?a(new Error("Error on "+c+" : "+JSON.stringify(f))):o(p)})},u={mediaConstraints:{audio:i.hasAudio,video:i.hasVideo},simulcast:!1,onIceCandidate:i.connection.sendIceCandidate.bind(i.connection),onIceConnectionStateException:i.onIceConnectionStateExceptionHandler.bind(i),iceServers:i.getIceServersConf(),mediaServer:i.session.openvidu.mediaServer,typeOfVideo:i.typeOfVideo?xa.TypeOfVideo[i.typeOfVideo]:void 0};n&&i.disposeWebRtcPeer(),i.webRtcPeer=new G1.WebRtcPeerRecvonly(u),i.webRtcPeer.addIceConnectionStateChangeListener(i.streamId),r?i.webRtcPeer.processRemoteOffer(r).then(function(){i.webRtcPeer.createAnswer().then(function(l){i.webRtcPeer.processLocalAnswer(l).then(function(){s(l.sdp)}).catch(function(c){return a(new Error("(subscribe) SDP process local answer error: "+JSON.stringify(c)))})}).catch(function(l){return a(new Error("(subscribe) SDP create answer error: "+JSON.stringify(l)))})}).catch(function(l){return a(new Error("(subscribe) SDP process remote offer error: "+JSON.stringify(l)))}):i.webRtcPeer.createOffer().then(function(l){i.webRtcPeer.processLocalOffer(l).then(function(){s(l.sdp)}).catch(function(c){return a(new Error("(subscribe) SDP process local offer error: "+JSON.stringify(c)))})}).catch(function(l){return a(new Error("(subscribe) SDP create offer error: "+JSON.stringify(l)))})})},t.prototype.remotePeerSuccessfullyEstablished=function(n){n&&this.mediaStream!=null&&this.disposeMediaStream(),this.mediaStream=new MediaStream;for(var e,r=0,i=this.webRtcPeer.pc.getReceivers();r<i.length;r++)e=i[r],e.track&&this.mediaStream.addTrack(e.track);if(Et.debug("Peer remote stream",this.mediaStream),this.mediaStream){if(this.streamManager instanceof Rpe.Subscriber){if(this.mediaStream.getAudioTracks()[0]){var o=n?this.audioActive:!!this.streamManager.properties.subscribeToAudio;this.mediaStream.getAudioTracks()[0].enabled=o}if(this.mediaStream.getVideoTracks()[0]){var o=n?this.videoActive:!!this.videoActive&&!!this.streamManager.properties.subscribeToVideo;this.mediaStream.getVideoTracks()[0].enabled=o}}this.updateMediaStreamInVideos(),this.initHarkEvents()}},t.prototype.initHarkEvents=function(){this.mediaStream.getAudioTracks()[0]&&(this.session.anySpeechEventListenerEnabled("publisherStartSpeaking",!0,this.streamManager)&&this.enableOnceHarkSpeakingEvent(),this.session.anySpeechEventListenerEnabled("publisherStartSpeaking",!1,this.streamManager)&&this.enableHarkSpeakingEvent(),this.session.anySpeechEventListenerEnabled("publisherStopSpeaking",!0,this.streamManager)&&this.enableOnceHarkStoppedSpeakingEvent(),this.session.anySpeechEventListenerEnabled("publisherStopSpeaking",!1,this.streamManager)&&this.enableHarkStoppedSpeakingEvent(),this.harkVolumeChangeEnabledOnce&&this.enableOnceHarkVolumeChangeEvent(!0),this.harkVolumeChangeEnabled&&this.enableHarkVolumeChangeEvent(!0))},t.prototype.onIceConnectionStateExceptionHandler=function(n,e,r){switch(n){case Rd.ExceptionEventName.ICE_CONNECTION_FAILED:this.onIceConnectionFailed();break;case Rd.ExceptionEventName.ICE_CONNECTION_DISCONNECTED:this.onIceConnectionDisconnected();break}this.session.emitEvent("exception",[new Rd.ExceptionEvent(this.session,n,this,e,r)])},t.prototype.onIceConnectionFailed=function(){Et.log("[ICE_CONNECTION_FAILED] Handling ICE_CONNECTION_FAILED event. Reconnecting stream ".concat(this.streamId," (").concat(this.isLocal()?"Publisher":"Subscriber",")")),this.reconnectStreamAndLogResultingIceConnectionState(Rd.ExceptionEventName.ICE_CONNECTION_FAILED)},t.prototype.onIceConnectionDisconnected=function(){var n=this;Et.log("[ICE_CONNECTION_DISCONNECTED] Handling ICE_CONNECTION_DISCONNECTED event. Waiting for ICE to be restored and reconnect stream ".concat(this.streamId," (").concat(this.isLocal()?"Publisher":"Subscriber",") if not possible"));var e=this.session.openvidu.advancedConfiguration.iceConnectionDisconnectedExceptionTimeout||4e3;this.awaitWebRtcPeerConnectionState(e).then(function(r){switch(r){case"failed":Et.warn("[ICE_CONNECTION_DISCONNECTED] ICE connection of stream ".concat(n.streamId," (").concat(n.isLocal()?"Publisher":"Subscriber",") is now failed after ICE_CONNECTION_DISCONNECTED"));break;case"connected":case"completed":Et.log("[ICE_CONNECTION_DISCONNECTED] ICE connection of stream ".concat(n.streamId," (").concat(n.isLocal()?"Publisher":"Subscriber",") automatically restored after ICE_CONNECTION_DISCONNECTED. Current ICE connection state: ").concat(r));break;case"closed":case"checking":case"new":case"disconnected":Et.warn("[ICE_CONNECTION_DISCONNECTED] ICE connection of stream ".concat(n.streamId," (").concat(n.isLocal()?"Publisher":"Subscriber",") couldn't be restored after ICE_CONNECTION_DISCONNECTED event. Current ICE connection state after ").concat(e," ms: ").concat(r)),n.reconnectStreamAndLogResultingIceConnectionState(Rd.ExceptionEventName.ICE_CONNECTION_DISCONNECTED);break}})},t.prototype.reconnectStreamAndLogResultingIceConnectionState=function(n){return Zi(this,void 0,void 0,function(){var e,r;return eo(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.reconnectStreamAndReturnIceConnectionState(n)];case 1:switch(e=i.sent(),e){case"connected":case"completed":Et.log("[".concat(n,"] Stream ").concat(this.streamId," (").concat(this.isLocal()?"Publisher":"Subscriber",") successfully reconnected after ").concat(n,". Current ICE connection state: ").concat(e));break;default:Et.error("[".concat(n,"] Stream ").concat(this.streamId," (").concat(this.isLocal()?"Publisher":"Subscriber",") failed to reconnect after ").concat(n,". Current ICE connection state: ").concat(e));break}return[3,3];case 2:return r=i.sent(),Et.error("[".concat(n,"] Error reconnecting stream ").concat(this.streamId," (").concat(this.isLocal()?"Publisher":"Subscriber",") after ").concat(n,": ").concat(r)),[3,3];case 3:return[2]}})})},t.prototype.reconnectStreamAndReturnIceConnectionState=function(n){return Zi(this,void 0,void 0,function(){var e,r;return eo(this,function(i){switch(i.label){case 0:Et.log("[".concat(n,"] Reconnecting stream ").concat(this.streamId," (").concat(this.isLocal()?"Publisher":"Subscriber",") after event ").concat(n)),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.reconnectStream(n)];case 2:return i.sent(),e=this.session.openvidu.advancedConfiguration.iceConnectionDisconnectedExceptionTimeout||4e3,[2,this.awaitWebRtcPeerConnectionState(e)];case 3:return r=i.sent(),Et.warn("[".concat(n,"] Error reconnecting stream ").concat(this.streamId," (").concat(this.isLocal()?"Publisher":"Subscriber","). Reason: ").concat(r)),[2,this.awaitWebRtcPeerConnectionState(1)];case 4:return[2]}})})},t.prototype.awaitWebRtcPeerConnectionState=function(n){return Zi(this,void 0,void 0,function(){var e,r,i,o;return eo(this,function(a){switch(a.label){case 0:e=this.getRTCPeerConnection().iceConnectionState,r=150,i=Math.ceil(n/r),o=0,a.label=1;case 1:return o<i?(e=this.getRTCPeerConnection().iceConnectionState,e==="connected"||e==="completed"?[3,4]:[4,new Promise(function(s){return setTimeout(s,r)})]):[3,4];case 2:a.sent(),a.label=3;case 3:return o++,[3,1];case 4:return[2,e]}})})},t.prototype.reconnectStream=function(n){return Zi(this,void 0,void 0,function(){var e,r;return eo(this,function(i){switch(i.label){case 0:return[4,this.isWebsocketConnected(n,3e3)];case 1:if(e=i.sent(),e)return Et.log("[".concat(n,"] Trying to reconnect stream ").concat(this.streamId," (").concat(this.isLocal()?"Publisher":"Subscriber",") and the websocket is opened")),this.isLocal()?[2,this.initWebRtcPeerSend(!0)]:[2,this.initWebRtcPeerReceive(!0)];throw r="[".concat(n,"] Trying to reconnect stream ").concat(this.streamId," (").concat(this.isLocal()?"Publisher":"Subscriber",") but the websocket wasn't opened"),Et.error(r),Error(r)}})})},t.prototype.isWebsocketConnected=function(n,e){var r=this;return new Promise(function(i,o){var a=r.session.openvidu.getWsReadyState();if(a===1){var s=setTimeout(function(){return console.warn("[".concat(n,"] Websocket timeout of ").concat(e,"ms")),i(!1)},e);r.session.openvidu.sendRequest("echo",{},function(u,l){return clearTimeout(s),u?(console.warn("[".concat(n,"] Websocket 'echo' returned error: ").concat(u)),i(!1)):i(!0)})}else return console.warn("[".concat(n,"] Websocket readyState is ").concat(a)),i(!1)})},t.prototype.initWebRtcStats=function(){this.webRtcStats=new Tpe.WebRtcStats(this),this.webRtcStats.initWebRtcStats()},t.prototype.stopWebRtcStats=function(){this.webRtcStats&&this.webRtcStats.isEnabled()&&this.webRtcStats.stopWebRtcStats()},t.prototype.getIceServersConf=function(){var n;return this.session.openvidu.advancedConfiguration.iceServers?n=this.session.openvidu.advancedConfiguration.iceServers==="freeice"?void 0:this.session.openvidu.advancedConfiguration.iceServers:this.session.openvidu.iceServers?n=this.session.openvidu.iceServers:n=void 0,n},t.prototype.gatherStatsForPeer=function(){var n=this;return new Promise(function(e,r){n.isLocal()?n.getRTCPeerConnection().getSenders().forEach(function(i){return i.getStats().then(function(o){o.forEach(function(a){if(n.isReportWanted(a)){var s={};s.type=a.type,s.timestamp=a.timestamp,s.id=a.id,a.type==="outbound-rtp"&&(s.ssrc=a.ssrc,s.firCount=a.firCount,s.pliCount=a.pliCount,s.nackCount=a.nackCount,s.qpSum=a.qpSum,a.kind?s.mediaType=a.kind:a.mediaType?s.mediaType=a.mediaType:s.mediaType=a.id.indexOf("VideoStream")!==-1?"video":"audio",s.mediaType==="video"&&(s.framesEncoded=a.framesEncoded),s.packetsSent=a.packetsSent,s.bytesSent=a.bytesSent),a.type==="candidate-pair"&&a.totalRoundTripTime!==void 0&&(s.availableOutgoingBitrate=a.availableOutgoingBitrate,s.rtt=a.currentRoundTripTime,s.averageRtt=a.totalRoundTripTime/a.responsesReceived),a.type==="remote-inbound-rtp"||a.type,Et.log(s)}})})}):n.getRTCPeerConnection().getReceivers().forEach(function(i){return i.getStats().then(function(o){o.forEach(function(a){if(n.isReportWanted(a)){var s={};s.type=a.type,s.timestamp=a.timestamp,s.id=a.id,a.type==="inbound-rtp"&&(s.ssrc=a.ssrc,s.firCount=a.firCount,s.pliCount=a.pliCount,s.nackCount=a.nackCount,s.qpSum=a.qpSum,a.kind?s.mediaType=a.kind:a.mediaType?s.mediaType=a.mediaType:s.mediaType=a.id.indexOf("VideoStream")!==-1?"video":"audio",s.mediaType==="video"&&(s.framesDecoded=a.framesDecoded),s.packetsReceived=a.packetsReceived,s.packetsLost=a.packetsLost,s.jitter=a.jitter,s.bytesReceived=a.bytesReceived),a.type==="candidate-pair"&&a.totalRoundTripTime!==void 0&&(s.availableIncomingBitrate=a.availableIncomingBitrate,s.rtt=a.currentRoundTripTime,s.averageRtt=a.totalRoundTripTime/a.responsesReceived),a.type==="remote-inbound-rtp"||a.type,Et.log(s)}})})})})},t.prototype.isReportWanted=function(n){return n.type==="inbound-rtp"&&!this.isLocal()||n.type==="outbound-rtp"&&this.isLocal()||n.type==="candidate-pair"&&n.nominated&&n.bytesSent>0},t}();zc.Stream=Ape;Object.defineProperty(zp,"__esModule",{value:!0});zp.Connection=void 0;var Ope=zc,Dpe=An,YI=zu,Td=Dpe.OpenViduLogger.getInstance(),Mpe=function(){function t(n,e){this.session=n,this.disposed=!1;var r="'Connection' created ";e.role?(this.localOptions=e,this.connectionId=this.localOptions.id,this.creationTime=this.localOptions.createdAt,this.data=this.localOptions.metadata,this.rpcSessionId=this.localOptions.sessionId,this.role=this.localOptions.role,this.record=this.localOptions.record,r+="(local)"):(this.remoteOptions=e,this.connectionId=this.remoteOptions.id,this.creationTime=this.remoteOptions.createdAt,this.remoteOptions.metadata&&(this.data=this.remoteOptions.metadata),this.remoteOptions.streams&&this.initRemoteStreams(this.remoteOptions.streams),r+="(remote) with 'connectionId' ["+this.remoteOptions.id+"]"),Td.info(r)}return t.prototype.sendIceCandidate=function(n){var e=this;this.disposed?Td.warn("Connection ".concat(this.connectionId," disposed when trying to send an ICE candidate. ICE candidate not sent")):(Td.debug((this.stream.outboundStreamOpts?"Local":"Remote")+"candidate for"+this.connectionId,n),this.session.openvidu.sendRequest("onIceCandidate",{endpointName:this.connectionId,candidate:n.candidate,sdpMid:n.sdpMid,sdpMLineIndex:n.sdpMLineIndex},function(r,i){r&&(Td.error("Error sending ICE candidate: "+JSON.stringify(r)),e.session.emitEvent("exception",[new YI.ExceptionEvent(e.session,YI.ExceptionEventName.ICE_CANDIDATE_ERROR,e.session,"There was an unexpected error on the server-side processing an ICE candidate generated and sent by the client-side",r)]))}))},t.prototype.initRemoteStreams=function(n){var e=this;n.forEach(function(r){var i={id:r.id,createdAt:r.createdAt,connection:e,hasAudio:r.hasAudio,hasVideo:r.hasVideo,audioActive:r.audioActive,videoActive:r.videoActive,typeOfVideo:r.typeOfVideo,frameRate:r.frameRate,videoDimensions:r.videoDimensions?JSON.parse(r.videoDimensions):void 0,filter:r.filter?r.filter:void 0},o=new Ope.Stream(e.session,i);e.addStream(o)}),Td.info("Remote 'Connection' with 'connectionId' ["+this.connectionId+"] is now configured for receiving Streams with options: ",this.stream.inboundStreamOpts)},t.prototype.addStream=function(n){n.connection=this,this.stream=n},t.prototype.removeStream=function(){delete this.stream},t.prototype.dispose=function(){this.disposed=!0,this.removeStream()},t}();zp.Connection=Mpe;var Up={},Ppe=ve&&ve.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();Object.defineProperty(Up,"__esModule",{value:!0});Up.ConnectionEvent=void 0;var Lpe=$n,Fpe=function(t){Ppe(n,t);function n(e,r,i,o,a){var s=t.call(this,e,r,i)||this;return s.connection=o,s.reason=a,s}return n.prototype.callDefaultBehavior=function(){},n}(Lpe.Event);Up.ConnectionEvent=Fpe;var Wp={},zpe=ve&&ve.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();Object.defineProperty(Wp,"__esModule",{value:!0});Wp.FilterEvent=void 0;var Bpe=$n,jpe=function(t){zpe(n,t);function n(e,r,i){var o=t.call(this,!1,e,r)||this;return o.data=i,o}return n.prototype.callDefaultBehavior=function(){},n}(Bpe.Event);Wp.FilterEvent=jpe;var Hp={},Vpe=ve&&ve.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();Object.defineProperty(Hp,"__esModule",{value:!0});Hp.RecordingEvent=void 0;var $pe=$n,Upe=function(t){Vpe(n,t);function n(e,r,i,o,a){var s=t.call(this,!1,e,r)||this;return s.id=i,o!==i&&(s.name=o),s.reason=a,s}return n.prototype.callDefaultBehavior=function(){},n}($pe.Event);Hp.RecordingEvent=Upe;var Wc={},Wpe=ve&&ve.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();Object.defineProperty(Wc,"__esModule",{value:!0});Wc.SessionDisconnectedEvent=void 0;var Hpe=$n,Gpe=An,qpe=Gpe.OpenViduLogger.getInstance(),Kpe=function(t){Wpe(n,t);function n(e,r){var i=t.call(this,!0,e,"sessionDisconnected")||this;return i.reason=r,i}return n.prototype.callDefaultBehavior=function(){qpe.info("Calling default behavior upon '"+this.type+"' event dispatched by 'Session'");var e=this.target;e.remoteConnections.forEach(function(r){var i,o,a,s,u,l,c,d,f=r.connectionId;if(!((i=e.remoteConnections.get(f))===null||i===void 0)&&i.stream){(o=e.remoteConnections.get(f))===null||o===void 0||o.stream.disposeWebRtcPeer(),(a=e.remoteConnections.get(f))===null||a===void 0||a.stream.disposeMediaStream(),!((s=e.remoteConnections.get(f))===null||s===void 0)&&s.stream.streamManager&&((u=e.remoteConnections.get(f))===null||u===void 0||u.stream.streamManager.removeAllVideos());var p=(c=(l=e.remoteConnections.get(f))===null||l===void 0?void 0:l.stream)===null||c===void 0?void 0:c.streamId;p&&e.remoteStreamsCreated.delete(p),(d=e.remoteConnections.get(f))===null||d===void 0||d.dispose()}e.remoteConnections.delete(f)})},n}(Hpe.Event);Wc.SessionDisconnectedEvent=Kpe;var Gp={},Xpe=ve&&ve.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();Object.defineProperty(Gp,"__esModule",{value:!0});Gp.SignalEvent=void 0;var Ype=$n,Jpe=function(t){Xpe(n,t);function n(e,r,i,o){var a=t.call(this,!1,e,"signal")||this;return r&&(a.type="signal:"+r),a.data=i,a.from=o,a}return n.prototype.callDefaultBehavior=function(){},n}(Ype.Event);Gp.SignalEvent=Jpe;var qp={},Qpe=ve&&ve.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();Object.defineProperty(qp,"__esModule",{value:!0});qp.SpeechToTextEvent=void 0;var Zpe=$n,ehe=function(t){Qpe(n,t);function n(e,r,i,o,a,s){var u=t.call(this,!1,e,"speechToTextMessage")||this;return u.connection=r,u.text=i,u.reason=o,u.raw=a,u.lang=s,u}return n.prototype.callDefaultBehavior=function(){},n}(Zpe.Event);qp.SpeechToTextEvent=ehe;var Nd={},JI;function pR(){if(JI)return Nd;JI=1;var t=ve&&ve.__extends||function(){var s=function(u,l){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,d){c.__proto__=d}||function(c,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(c[f]=d[f])},s(u,l)};return function(u,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");s(u,l);function c(){this.constructor=u}u.prototype=l===null?Object.create(l):(c.prototype=l.prototype,new c)}}();Object.defineProperty(Nd,"__esModule",{value:!0}),Nd.StreamEvent=void 0;var n=$n,e=hR(),r=s0(),i=An,o=i.OpenViduLogger.getInstance(),a=function(s){t(u,s);function u(l,c,d,f,p){var h=s.call(this,l,c,d)||this;return h.stream=f,h.reason=p,h}return u.prototype.callDefaultBehavior=function(){if(this.type==="streamDestroyed"){if(this.target instanceof r.Session)o.info("Calling default behavior upon '"+this.type+"' event dispatched by 'Session'"),this.stream.disposeWebRtcPeer();else if(this.target instanceof e.Publisher){o.info("Calling default behavior upon '"+this.type+"' event dispatched by 'Publisher'"),clearInterval(this.target.screenShareResizeInterval),this.stream.isLocalStreamReadyToPublish=!1;for(var l=this.target.openvidu.publishers,c=0;c<l.length;c++)if(l[c]===this.target){l.splice(c,1);break}}this.stream.disposeMediaStream(),this.stream.streamManager&&this.stream.streamManager.removeAllVideos(),this.stream.session.remoteStreamsCreated.delete(this.stream.streamId);var d=this.stream.session.remoteConnections.get(this.stream.connection.connectionId);if(d&&d.remoteOptions)for(var f=d.remoteOptions.streams,c=f.length-1;c>=0;--c)f[c].id===this.stream.streamId&&f.splice(c,1)}},u}(n.Event);return Nd.StreamEvent=a,Nd}var Kp={},the=ve&&ve.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();Object.defineProperty(Kp,"__esModule",{value:!0});Kp.ConnectionPropertyChangedEvent=void 0;var nhe=$n,rhe=function(t){the(n,t);function n(e,r,i,o,a){var s=t.call(this,!1,e,"connectionPropertyChanged")||this;return s.connection=r,s.changedProperty=i,s.newValue=o,s.oldValue=a,s}return n.prototype.callDefaultBehavior=function(){},n}(nhe.Event);Kp.ConnectionPropertyChangedEvent=rhe;var Xp={},ihe=ve&&ve.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();Object.defineProperty(Xp,"__esModule",{value:!0});Xp.NetworkQualityLevelChangedEvent=void 0;var ohe=$n,ahe=function(t){ihe(n,t);function n(e,r,i,o){var a=t.call(this,!1,e,"networkQualityLevelChanged")||this;return a.newValue=r,a.oldValue=i,a.connection=o,a}return n.prototype.callDefaultBehavior=function(){},n}(ohe.Event);Xp.NetworkQualityLevelChangedEvent=ahe;var q1={};const she=typeof process=="object"&&q1&&q1.NODE_DEBUG&&/\bsemver\b/i.test(q1.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};var tj=she;const uhe="2.0.0",lhe=256,che=Number.MAX_SAFE_INTEGER||9007199254740991,dhe=16;var nj={SEMVER_SPEC_VERSION:uhe,MAX_LENGTH:lhe,MAX_SAFE_INTEGER:che,MAX_SAFE_COMPONENT_LENGTH:dhe},Sx={exports:{}};(function(t,n){const{MAX_SAFE_COMPONENT_LENGTH:e}=nj,r=tj;n=t.exports={};const i=n.re=[],o=n.src=[],a=n.t={};let s=0;const u=(l,c,d)=>{const f=s++;r(l,f,c),a[l]=f,o[f]=c,i[f]=new RegExp(c,d?"g":void 0)};u("NUMERICIDENTIFIER","0|[1-9]\\d*"),u("NUMERICIDENTIFIERLOOSE","[0-9]+"),u("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),u("MAINVERSION",`(${o[a.NUMERICIDENTIFIER]})\\.(${o[a.NUMERICIDENTIFIER]})\\.(${o[a.NUMERICIDENTIFIER]})`),u("MAINVERSIONLOOSE",`(${o[a.NUMERICIDENTIFIERLOOSE]})\\.(${o[a.NUMERICIDENTIFIERLOOSE]})\\.(${o[a.NUMERICIDENTIFIERLOOSE]})`),u("PRERELEASEIDENTIFIER",`(?:${o[a.NUMERICIDENTIFIER]}|${o[a.NONNUMERICIDENTIFIER]})`),u("PRERELEASEIDENTIFIERLOOSE",`(?:${o[a.NUMERICIDENTIFIERLOOSE]}|${o[a.NONNUMERICIDENTIFIER]})`),u("PRERELEASE",`(?:-(${o[a.PRERELEASEIDENTIFIER]}(?:\\.${o[a.PRERELEASEIDENTIFIER]})*))`),u("PRERELEASELOOSE",`(?:-?(${o[a.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${o[a.PRERELEASEIDENTIFIERLOOSE]})*))`),u("BUILDIDENTIFIER","[0-9A-Za-z-]+"),u("BUILD",`(?:\\+(${o[a.BUILDIDENTIFIER]}(?:\\.${o[a.BUILDIDENTIFIER]})*))`),u("FULLPLAIN",`v?${o[a.MAINVERSION]}${o[a.PRERELEASE]}?${o[a.BUILD]}?`),u("FULL",`^${o[a.FULLPLAIN]}$`),u("LOOSEPLAIN",`[v=\\s]*${o[a.MAINVERSIONLOOSE]}${o[a.PRERELEASELOOSE]}?${o[a.BUILD]}?`),u("LOOSE",`^${o[a.LOOSEPLAIN]}$`),u("GTLT","((?:<|>)?=?)"),u("XRANGEIDENTIFIERLOOSE",`${o[a.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),u("XRANGEIDENTIFIER",`${o[a.NUMERICIDENTIFIER]}|x|X|\\*`),u("XRANGEPLAIN",`[v=\\s]*(${o[a.XRANGEIDENTIFIER]})(?:\\.(${o[a.XRANGEIDENTIFIER]})(?:\\.(${o[a.XRANGEIDENTIFIER]})(?:${o[a.PRERELEASE]})?${o[a.BUILD]}?)?)?`),u("XRANGEPLAINLOOSE",`[v=\\s]*(${o[a.XRANGEIDENTIFIERLOOSE]})(?:\\.(${o[a.XRANGEIDENTIFIERLOOSE]})(?:\\.(${o[a.XRANGEIDENTIFIERLOOSE]})(?:${o[a.PRERELEASELOOSE]})?${o[a.BUILD]}?)?)?`),u("XRANGE",`^${o[a.GTLT]}\\s*${o[a.XRANGEPLAIN]}$`),u("XRANGELOOSE",`^${o[a.GTLT]}\\s*${o[a.XRANGEPLAINLOOSE]}$`),u("COERCE",`(^|[^\\d])(\\d{1,${e}})(?:\\.(\\d{1,${e}}))?(?:\\.(\\d{1,${e}}))?(?:$|[^\\d])`),u("COERCERTL",o[a.COERCE],!0),u("LONETILDE","(?:~>?)"),u("TILDETRIM",`(\\s*)${o[a.LONETILDE]}\\s+`,!0),n.tildeTrimReplace="$1~",u("TILDE",`^${o[a.LONETILDE]}${o[a.XRANGEPLAIN]}$`),u("TILDELOOSE",`^${o[a.LONETILDE]}${o[a.XRANGEPLAINLOOSE]}$`),u("LONECARET","(?:\\^)"),u("CARETTRIM",`(\\s*)${o[a.LONECARET]}\\s+`,!0),n.caretTrimReplace="$1^",u("CARET",`^${o[a.LONECARET]}${o[a.XRANGEPLAIN]}$`),u("CARETLOOSE",`^${o[a.LONECARET]}${o[a.XRANGEPLAINLOOSE]}$`),u("COMPARATORLOOSE",`^${o[a.GTLT]}\\s*(${o[a.LOOSEPLAIN]})$|^$`),u("COMPARATOR",`^${o[a.GTLT]}\\s*(${o[a.FULLPLAIN]})$|^$`),u("COMPARATORTRIM",`(\\s*)${o[a.GTLT]}\\s*(${o[a.LOOSEPLAIN]}|${o[a.XRANGEPLAIN]})`,!0),n.comparatorTrimReplace="$1$2$3",u("HYPHENRANGE",`^\\s*(${o[a.XRANGEPLAIN]})\\s+-\\s+(${o[a.XRANGEPLAIN]})\\s*$`),u("HYPHENRANGELOOSE",`^\\s*(${o[a.XRANGEPLAINLOOSE]})\\s+-\\s+(${o[a.XRANGEPLAINLOOSE]})\\s*$`),u("STAR","(<|>)?=?\\s*\\*"),u("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),u("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(Sx,Sx.exports);var fhe=Sx.exports;const phe=["includePrerelease","loose","rtl"],hhe=t=>t?typeof t!="object"?{loose:!0}:phe.filter(n=>t[n]).reduce((n,e)=>(n[e]=!0,n),{}):{};var mhe=hhe;const QI=/^[0-9]+$/,rj=(t,n)=>{const e=QI.test(t),r=QI.test(n);return e&&r&&(t=+t,n=+n),t===n?0:e&&!r?-1:r&&!e?1:t<n?-1:1},vhe=(t,n)=>rj(n,t);var ghe={compareIdentifiers:rj,rcompareIdentifiers:vhe};const $h=tj,{MAX_LENGTH:ZI,MAX_SAFE_INTEGER:Uh}=nj,{re:e_,t:t_}=fhe,yhe=mhe,{compareIdentifiers:tl}=ghe;let bhe=class to{constructor(n,e){if(e=yhe(e),n instanceof to){if(n.loose===!!e.loose&&n.includePrerelease===!!e.includePrerelease)return n;n=n.version}else if(typeof n!="string")throw new TypeError(`Invalid Version: ${n}`);if(n.length>ZI)throw new TypeError(`version is longer than ${ZI} characters`);$h("SemVer",n,e),this.options=e,this.loose=!!e.loose,this.includePrerelease=!!e.includePrerelease;const r=n.trim().match(e.loose?e_[t_.LOOSE]:e_[t_.FULL]);if(!r)throw new TypeError(`Invalid Version: ${n}`);if(this.raw=n,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>Uh||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Uh||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Uh||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const o=+i;if(o>=0&&o<Uh)return o}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(n){if($h("SemVer.compare",this.version,this.options,n),!(n instanceof to)){if(typeof n=="string"&&n===this.version)return 0;n=new to(n,this.options)}return n.version===this.version?0:this.compareMain(n)||this.comparePre(n)}compareMain(n){return n instanceof to||(n=new to(n,this.options)),tl(this.major,n.major)||tl(this.minor,n.minor)||tl(this.patch,n.patch)}comparePre(n){if(n instanceof to||(n=new to(n,this.options)),this.prerelease.length&&!n.prerelease.length)return-1;if(!this.prerelease.length&&n.prerelease.length)return 1;if(!this.prerelease.length&&!n.prerelease.length)return 0;let e=0;do{const r=this.prerelease[e],i=n.prerelease[e];if($h("prerelease compare",e,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return tl(r,i)}while(++e)}compareBuild(n){n instanceof to||(n=new to(n,this.options));let e=0;do{const r=this.build[e],i=n.build[e];if($h("prerelease compare",e,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return tl(r,i)}while(++e)}inc(n,e){switch(n){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",e);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",e);break;case"prepatch":this.prerelease.length=0,this.inc("patch",e),this.inc("pre",e);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",e),this.inc("pre",e);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{let r=this.prerelease.length;for(;--r>=0;)typeof this.prerelease[r]=="number"&&(this.prerelease[r]++,r=-2);r===-1&&this.prerelease.push(0)}e&&(tl(this.prerelease[0],e)===0?isNaN(this.prerelease[1])&&(this.prerelease=[e,0]):this.prerelease=[e,0]);break;default:throw new Error(`invalid increment argument: ${n}`)}return this.format(),this.raw=this.version,this}};var ij=bhe;const whe=ij,xhe=(t,n)=>new whe(t,n).major;var She=xhe;const Ehe=ij,Che=(t,n)=>new Ehe(t,n).minor;var Rhe=Che,n_;function s0(){if(n_)return Cd;n_=1;var t=ve&&ve.__extends||function(){var M=function(D,R){return M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,P){O.__proto__=P}||function(O,P){for(var A in P)Object.prototype.hasOwnProperty.call(P,A)&&(O[A]=P[A])},M(D,R)};return function(D,R){if(typeof R!="function"&&R!==null)throw new TypeError("Class extends value "+String(R)+" is not a constructor or null");M(D,R);function O(){this.constructor=D}D.prototype=R===null?Object.create(R):(O.prototype=R.prototype,new O)}}(),n=ve&&ve.__awaiter||function(M,D,R,O){function P(A){return A instanceof R?A:new R(function(I){I(A)})}return new(R||(R=Promise))(function(A,I){function _(W){try{L(O.next(W))}catch(B){I(B)}}function F(W){try{L(O.throw(W))}catch(B){I(B)}}function L(W){W.done?A(W.value):P(W.value).then(_,F)}L((O=O.apply(M,D||[])).next())})},e=ve&&ve.__generator||function(M,D){var R={label:0,sent:function(){if(A[0]&1)throw A[1];return A[1]},trys:[],ops:[]},O,P,A,I;return I={next:_(0),throw:_(1),return:_(2)},typeof Symbol=="function"&&(I[Symbol.iterator]=function(){return this}),I;function _(L){return function(W){return F([L,W])}}function F(L){if(O)throw new TypeError("Generator is already executing.");for(;I&&(I=0,L[0]&&(R=0)),R;)try{if(O=1,P&&(A=L[0]&2?P.return:L[0]?P.throw||((A=P.return)&&A.call(P),0):P.next)&&!(A=A.call(P,L[1])).done)return A;switch(P=0,A&&(L=[L[0]&2,A.value]),L[0]){case 0:case 1:A=L;break;case 4:return R.label++,{value:L[1],done:!1};case 5:R.label++,P=L[1],L=[0];continue;case 7:L=R.ops.pop(),R.trys.pop();continue;default:if(A=R.trys,!(A=A.length>0&&A[A.length-1])&&(L[0]===6||L[0]===2)){R=0;continue}if(L[0]===3&&(!A||L[1]>A[0]&&L[1]<A[3])){R.label=L[1];break}if(L[0]===6&&R.label<A[1]){R.label=A[1],A=L;break}if(A&&R.label<A[2]){R.label=A[2],R.ops.push(L);break}A[2]&&R.ops.pop(),R.trys.pop();continue}L=D.call(M,R)}catch(W){L=[6,W],P=0}finally{O=A=0}if(L[0]&5)throw L[1];return{value:L[0]?L[1]:void 0,done:!0}}};Object.defineProperty(Cd,"__esModule",{value:!0}),Cd.Session=void 0;var r=zp,i=Bc,o=jc,a=$c,s=Up,u=Wp,l=Hp,c=Wc,d=Gp,f=qp,p=pR(),h=ha,v=Kp,g=Xp,m=Fu,y=jp,b=An,w=Yi,x=She,C=Rhe,E=zu,S=b.OpenViduLogger.getInstance(),N,k=function(M){t(D,M);function D(R){var O=M.call(this)||this;return O.streamManagers=[],O.remoteStreamsCreated=new Map,O.remoteConnections=new Map,N=w.PlatformUtils.getInstance(),O.openvidu=R,O}return D.prototype.connect=function(R,O){var P=this;return new Promise(function(A,I){if(P.processToken(R),P.openvidu.checkSystemRequirements())P.options={sessionId:P.sessionId,participantId:R,metadata:O?P.stringClientMetadata(O):""},P.connectAux(R).then(function(){return A()}).catch(function(_){return I(_)});else return I(new m.OpenViduError(m.OpenViduErrorName.BROWSER_NOT_SUPPORTED,"Browser "+N.getName()+" (version "+N.getVersion()+") for "+N.getFamily()+" is not supported in OpenVidu"))})},D.prototype.disconnect=function(){this.leave(!1,"disconnect")},D.prototype.subscribe=function(R,O,P,A){var I={};P&&typeof P!="function"?I={insertMode:typeof P.insertMode<"u"?typeof P.insertMode=="string"?y.VideoInsertMode[P.insertMode]:I.insertMode:y.VideoInsertMode.APPEND,subscribeToAudio:typeof P.subscribeToAudio<"u"?P.subscribeToAudio:!0,subscribeToVideo:typeof P.subscribeToVideo<"u"?P.subscribeToVideo:!0}:I={insertMode:y.VideoInsertMode.APPEND,subscribeToAudio:!0,subscribeToVideo:!0};var _=void 0;if(P&&typeof P=="function"?_=P:A&&(_=A),!this.sessionConnected())throw _!==void 0&&_(this.notConnectedError()),this.notConnectedError();S.info("Subscribing to "+R.connection.connectionId),R.subscribe().then(function(){S.info("Subscribed correctly to "+R.connection.connectionId),_!==void 0&&_(void 0)}).catch(function(L){_!==void 0&&_(L)});var F=new o.Subscriber(R,O,I);return F.targetElement&&R.streamManager.createVideoElement(F.targetElement,I.insertMode),F},D.prototype.subscribeAsync=function(R,O,P){var A=this;return new Promise(function(I,_){if(!A.sessionConnected())return _(A.notConnectedError());var F,L=function(W){return W?_(W):I(F)};P?F=A.subscribe(R,O,P,L):F=A.subscribe(R,O,L)})},D.prototype.unsubscribe=function(R){var O=this;return new Promise(function(P,A){if(O.sessionConnected()){var I=R.stream.connection.connectionId;S.info("Unsubscribing from "+I),O.openvidu.sendRequest("unsubscribeFromVideo",{sender:R.stream.connection.connectionId},function(_,F){return _?(S.error("Error unsubscribing from "+I),A(_)):(S.info("Unsubscribed correctly from "+I),R.stream.streamManager.removeAllVideos(),R.stream.disposeWebRtcPeer(),R.stream.disposeMediaStream(),P())})}else return A(O.notConnectedError())})},D.prototype.publish=function(R){var O=this;return new Promise(function(P,A){if(!O.sessionConnected())return A(O.notConnectedError());R.session=O,R.stream.session=O,R.stream.publishedOnce?R.initialize().then(function(){O.connection.addStream(R.stream),R.reestablishStreamPlayingEvent(),R.stream.publish().then(function(){return O.sendVideoData(R,8,!0,5),P()}).catch(function(I){return A(I)})}).catch(function(I){return A(I)}):(O.connection.addStream(R.stream),R.stream.publish().then(function(){return O.sendVideoData(R,8,!0,5),P()}).catch(function(I){return A(I)}))})},D.prototype.unpublish=function(R){var O=this;return new Promise(function(P,A){if(!O.sessionConnected())throw O.notConnectedError();var I=R.stream;if(I.connection){if(I.connection!==O.connection)return A(new Error("The associated Connection object of this Publisher is not your local Connection.  Only moderators can force unpublish on remote Streams via 'forceUnpublish' method"));S.info("Unpublishing local media ("+I.connection.connectionId+")"),O.openvidu.sendRequest("unpublishVideo",function(_,F){if(_)return A(_);S.info("Media unpublished correctly"),I.disposeWebRtcPeer(),I.connection.stream==I&&delete I.connection.stream;var L=new p.StreamEvent(!0,R,"streamDestroyed",R.stream,"unpublish");return R.emitEvent("streamDestroyed",[L]),L.callDefaultBehavior(),P()})}else return A(new Error("The associated Connection object of this Publisher is null"))})},D.prototype.forceDisconnect=function(R){var O=this;return new Promise(function(P,A){if(!O.sessionConnected())return A(O.notConnectedError());S.info("Forcing disconnect for connection "+R.connectionId),O.openvidu.sendRequest("forceDisconnect",{connectionId:R.connectionId},function(I,_){return I?(S.error("Error forcing disconnect for Connection "+R.connectionId,I),I.code===401?A(new m.OpenViduError(m.OpenViduErrorName.OPENVIDU_PERMISSION_DENIED,"You don't have permissions to force a disconnection")):A(I)):(S.info("Forcing disconnect correctly for Connection "+R.connectionId),P())})})},D.prototype.forceUnpublish=function(R){var O=this;return new Promise(function(P,A){if(!O.sessionConnected())return A(O.notConnectedError());S.info("Forcing unpublish for stream "+R.streamId),O.openvidu.sendRequest("forceUnpublish",{streamId:R.streamId},function(I,_){return I?(S.error("Error forcing unpublish for Stream "+R.streamId,I),I.code===401?A(new m.OpenViduError(m.OpenViduErrorName.OPENVIDU_PERMISSION_DENIED,"You don't have permissions to force an unpublishing")):A(I)):(S.info("Forcing unpublish correctly for Stream "+R.streamId),P())})})},D.prototype.signal=function(R){var O=this;return new Promise(function(P,A){if(!O.sessionConnected())return A(O.notConnectedError());var I={};if(R.to&&R.to.length>0){var _=[];R.to.forEach(function(L){L.connectionId&&_.push(L.connectionId)}),I.to=_}else I.to=[];I.data=R.data?R.data:"";var F=R.type?R.type:"signal";F&&F.substring(0,7)!=="signal:"&&(F="signal:"+F),I.type=F,O.openvidu.sendRequest("sendMessage",{message:JSON.stringify(I)},function(L,W){return L?A(L):P()})})},D.prototype.subscribeToSpeechToText=function(R,O){var P=this;return new Promise(function(A,I){P.openvidu.sendRequest("subscribeToSpeechToText",{connectionId:R.connection.connectionId,lang:O},function(_,F){return _?I(_):A()})})},D.prototype.unsubscribeFromSpeechToText=function(R){var O=this;return new Promise(function(P,A){O.openvidu.sendRequest("unsubscribeFromSpeechToText",{connectionId:R.connection.connectionId},function(I,_){return I?A(I):P()})})},D.prototype.on=function(R,O){var P,A,I,_;return M.prototype.onAux.call(this,R,"Event '"+R+"' triggered by 'Session'",O),R==="publisherStartSpeaking"&&(this.remoteConnections.forEach(function(F){var L;!((L=F.stream)===null||L===void 0)&&L.hasAudio&&F.stream.enableHarkSpeakingEvent()}),!((A=(P=this.connection)===null||P===void 0?void 0:P.stream)===null||A===void 0)&&A.hasAudio&&this.connection.stream.enableHarkSpeakingEvent()),R==="publisherStopSpeaking"&&(this.remoteConnections.forEach(function(F){var L;!((L=F.stream)===null||L===void 0)&&L.hasAudio&&F.stream.enableHarkStoppedSpeakingEvent()}),!((_=(I=this.connection)===null||I===void 0?void 0:I.stream)===null||_===void 0)&&_.hasAudio&&this.connection.stream.enableHarkStoppedSpeakingEvent()),this},D.prototype.once=function(R,O){var P,A,I,_;return M.prototype.onceAux.call(this,R,"Event '"+R+"' triggered once by 'Session'",O),R==="publisherStartSpeaking"&&(this.remoteConnections.forEach(function(F){var L;!((L=F.stream)===null||L===void 0)&&L.hasAudio&&F.stream.enableOnceHarkSpeakingEvent()}),!((A=(P=this.connection)===null||P===void 0?void 0:P.stream)===null||A===void 0)&&A.hasAudio&&this.connection.stream.enableOnceHarkSpeakingEvent()),R==="publisherStopSpeaking"&&(this.remoteConnections.forEach(function(F){var L;!((L=F.stream)===null||L===void 0)&&L.hasAudio&&F.stream.enableOnceHarkStoppedSpeakingEvent()}),!((_=(I=this.connection)===null||I===void 0?void 0:I.stream)===null||_===void 0)&&_.hasAudio&&this.connection.stream.enableOnceHarkStoppedSpeakingEvent()),this},D.prototype.off=function(R,O){var P=this,A,I,_,F;return M.prototype.offAux.call(this,R,O),R==="publisherStartSpeaking"&&(this.anySpeechEventListenerEnabled("publisherStartSpeaking",!1)||(this.remoteConnections.forEach(function(L){var W;!((W=L.stream)===null||W===void 0)&&W.streamManager&&(P.anySpeechEventListenerEnabled("publisherStartSpeaking",!1,L.stream.streamManager)||L.stream.disableHarkSpeakingEvent(!1))}),!((I=(A=this.connection)===null||A===void 0?void 0:A.stream)===null||I===void 0)&&I.streamManager&&(this.anySpeechEventListenerEnabled("publisherStartSpeaking",!1,this.connection.stream.streamManager)||this.connection.stream.disableHarkSpeakingEvent(!1)))),R==="publisherStopSpeaking"&&(this.anySpeechEventListenerEnabled("publisherStopSpeaking",!1)||(this.remoteConnections.forEach(function(L){var W;!((W=L.stream)===null||W===void 0)&&W.streamManager&&(P.anySpeechEventListenerEnabled("publisherStopSpeaking",!1,L.stream.streamManager)||L.stream.disableHarkStoppedSpeakingEvent(!1))}),!((F=(_=this.connection)===null||_===void 0?void 0:_.stream)===null||F===void 0)&&F.streamManager&&(this.anySpeechEventListenerEnabled("publisherStopSpeaking",!1,this.connection.stream.streamManager)||this.connection.stream.disableHarkStoppedSpeakingEvent(!1)))),this},D.prototype.onParticipantJoined=function(R){var O=this;this.getConnection(R.id,"").then(function(P){S.warn("Connection "+P.connectionId+" already exists in connections list")}).catch(function(P){var A=new r.Connection(O,R);O.remoteConnections.set(R.id,A),O.ee.emitEvent("connectionCreated",[new s.ConnectionEvent(!1,O,"connectionCreated",A,"")])})},D.prototype.onParticipantLeft=function(R){var O=this;this.getRemoteConnection(R.connectionId,"onParticipantLeft").then(function(P){if(P.stream){var A=P.stream,I=new p.StreamEvent(!0,O,"streamDestroyed",A,R.reason);O.ee.emitEvent("streamDestroyed",[I]),I.callDefaultBehavior(),O.remoteStreamsCreated.delete(A.streamId)}P.dispose(),O.remoteConnections.delete(P.connectionId),O.ee.emitEvent("connectionDestroyed",[new s.ConnectionEvent(!1,O,"connectionDestroyed",P,R.reason)])}).catch(function(P){S.error(P)})},D.prototype.onParticipantPublished=function(R){var O=this,P=function(I){O.remoteConnections.set(I.connectionId,I),O.remoteStreamsCreated.get(I.stream.streamId)||O.ee.emitEvent("streamCreated",[new p.StreamEvent(!1,O,"streamCreated",I.stream,"")]),O.remoteStreamsCreated.set(I.stream.streamId,!0)},A;this.getRemoteConnection(R.id,"onParticipantPublished").then(function(I){A=I,R.metadata=I.data,A.remoteOptions=R,A.initRemoteStreams(R.streams),P(A)}).catch(function(I){A=new r.Connection(O,R),P(A)})},D.prototype.onParticipantUnpublished=function(R){var O=this;R.connectionId===this.connection.connectionId?this.stopPublisherStream(R.reason):this.getRemoteConnection(R.connectionId,"onParticipantUnpublished").then(function(P){var A=new p.StreamEvent(!0,O,"streamDestroyed",P.stream,R.reason);if(O.ee.emitEvent("streamDestroyed",[A]),A.callDefaultBehavior(),P.stream!=null){var I=P.stream.streamId;O.remoteStreamsCreated.delete(I),P.removeStream()}}).catch(function(P){S.error(P)})},D.prototype.onParticipantEvicted=function(R){R.connectionId===this.connection.connectionId&&this.sessionId&&!this.connection.disposed&&this.leave(!0,R.reason)},D.prototype.onNewMessage=function(R){var O=this;S.info("New signal: "+JSON.stringify(R));var P=R.type?R.type.replace(/^(signal:)/,""):void 0;R.from?this.getConnection(R.from,"Connection '"+R.from+"' unknown when 'onNewMessage'. Existing remote connections: "+JSON.stringify(this.remoteConnections.keys())+". Existing local connection: "+this.connection.connectionId).then(function(A){O.ee.emitEvent("signal",[new d.SignalEvent(O,P,R.data,A)]),R.type&&R.type!=="signal"&&O.ee.emitEvent(R.type,[new d.SignalEvent(O,P,R.data,A)])}).catch(function(A){S.error(A)}):(this.ee.emitEvent("signal",[new d.SignalEvent(this,P,R.data,void 0)]),R.type&&R.type!=="signal"&&this.ee.emitEvent(R.type,[new d.SignalEvent(this,P,R.data,void 0)]))},D.prototype.onStreamPropertyChanged=function(R){var O=this,P=function(A){var I,_;if(A.stream&&A.stream.streamId===R.streamId){var F=A.stream,L=void 0;switch(R.property){case"audioActive":L=F.audioActive,R.newValue=R.newValue==="true",F.audioActive=R.newValue;break;case"videoActive":L=F.videoActive,R.newValue=R.newValue==="true",F.videoActive=R.newValue;var W=(_=(I=F==null?void 0:F.getMediaStream())===null||I===void 0?void 0:I.getVideoTracks())===null||_===void 0?void 0:_[0];W&&!W.enabled&&F.videoActive&&(W.enabled=!0);break;case"videoTrack":R.newValue=JSON.parse(R.newValue);break;case"audioTrack":R.newValue=JSON.parse(R.newValue);break;case"videoDimensions":L=F.videoDimensions,R.newValue=JSON.parse(JSON.parse(R.newValue)),F.videoDimensions=R.newValue;break;case"filter":L=F.filter,R.newValue=Object.keys(R.newValue).length>0?R.newValue:void 0,R.newValue!==void 0?(F.filter=new i.Filter(R.newValue.type,R.newValue.options),F.filter.stream=F,R.newValue.lastExecMethod&&(F.filter.lastExecMethod=R.newValue.lastExecMethod)):delete F.filter,R.newValue=F.filter;break}O.ee.emitEvent("streamPropertyChanged",[new h.StreamPropertyChangedEvent(O,F,R.property,R.newValue,L,R.reason)]),F.streamManager&&F.streamManager.emitEvent("streamPropertyChanged",[new h.StreamPropertyChangedEvent(F.streamManager,F,R.property,R.newValue,L,R.reason)])}else S.error("No stream with streamId '"+R.streamId+"' found for connection '"+R.connectionId+"' on 'streamPropertyChanged' event")};R.connectionId===this.connection.connectionId?P(this.connection):this.getRemoteConnection(R.connectionId,"onStreamPropertyChanged").then(function(A){P(A)}).catch(function(A){S.error(A)})},D.prototype.onConnectionPropertyChanged=function(R){var O;switch(R.property){case"role":O=this.connection.role.slice(),this.connection.role=R.newValue,this.connection.localOptions.role=R.newValue;break;case"record":O=this.connection.record,R.newValue=R.newValue==="true",this.connection.record=R.newValue,this.connection.localOptions.record=R.newValue;break}this.ee.emitEvent("connectionPropertyChanged",[new v.ConnectionPropertyChangedEvent(this,this.connection,R.property,R.newValue,O)])},D.prototype.onNetworkQualityLevelChangedChanged=function(R){var O=this;R.connectionId===this.connection.connectionId?this.ee.emitEvent("networkQualityLevelChanged",[new g.NetworkQualityLevelChangedEvent(this,R.newValue,R.oldValue,this.connection)]):this.getConnection(R.connectionId,"Connection not found for connectionId "+R.connectionId).then(function(P){O.ee.emitEvent("networkQualityLevelChanged",[new g.NetworkQualityLevelChangedEvent(O,R.newValue,R.oldValue,P)])}).catch(function(P){S.error(P)})},D.prototype.recvIceCandidate=function(R){var O={candidate:R.candidate,sdpMLineIndex:R.sdpMLineIndex,sdpMid:R.sdpMid},P=new RTCIceCandidate(O);this.getConnection(R.senderConnectionId,"Connection not found for connectionId "+R.senderConnectionId+" owning endpoint "+R.endpointName+". Ice candidate will be ignored: "+P).then(function(A){var I=A.stream;I.getWebRtcPeer().addIceCandidate(P).catch(function(_){S.error("Error adding candidate for "+I.streamId+" stream of endpoint "+R.endpointName+": "+_)})}).catch(function(A){S.error(A)})},D.prototype.onSessionClosed=function(R){S.info("Session closed: "+JSON.stringify(R));var O=R.sessionId;O!==void 0?this.ee.emitEvent("session-closed",[{session:O}]):S.warn("Session undefined on session closed",R)},D.prototype.onLostConnection=function(R){S.warn("Lost connection in Session "+this.sessionId),this.sessionId&&this.connection&&!this.connection.disposed&&this.leave(!0,R)},D.prototype.onRecoveredConnection=function(){S.info("Recovered connection in Session "+this.sessionId),this.reconnectBrokenStreams(),this.ee.emitEvent("reconnected",[])},D.prototype.onMediaError=function(R){S.error("Media error: "+JSON.stringify(R));var O=R.error;O?this.ee.emitEvent("error-media",[{error:O}]):S.warn("Received undefined media error:",R)},D.prototype.onRecordingStarted=function(R){this.ee.emitEvent("recordingStarted",[new l.RecordingEvent(this,"recordingStarted",R.id,R.name)])},D.prototype.onRecordingStopped=function(R){this.ee.emitEvent("recordingStopped",[new l.RecordingEvent(this,"recordingStopped",R.id,R.name,R.reason)])},D.prototype.onBroadcastStarted=function(){this.ee.emitEvent("broadcastStarted",[])},D.prototype.onBroadcastStopped=function(){this.ee.emitEvent("broadcastStopped",[])},D.prototype.onFilterEventDispatched=function(R){var O=this,P=R.connectionId;this.getConnection(P,"No connection found for connectionId "+P).then(function(A){S.info('Filter event of type "'.concat(R.eventType,'" dispatched'));var I=A.stream;if(!I||!I.filter)return S.error('Filter event of type "'.concat(R.eventType,'" dispatched for stream ').concat(I.streamId," but there is no ").concat(I?"filter":"stream"," defined"));var _=I.filter.handlers.get(R.eventType);if(!_||typeof _!="function"){var F=Array.from(I.filter.handlers.keys());return S.error('Filter event of type "'.concat(R.eventType,'" not handled or not a function! Active filter events: ').concat(F.join(",")))}else _.call(O,new u.FilterEvent(I.filter,R.eventType,R.data))})},D.prototype.onForciblyReconnectSubscriber=function(R){var O=this;return new Promise(function(P,A){O.getRemoteConnection(R.connectionId,"onForciblyReconnectSubscriber").then(function(I){if(I.stream&&I.stream.streamId===R.streamId){var _=I.stream;if(_.setupReconnectionEventEmitter(P,A)){if(_.reconnectionEventEmitter.onForciblyReconnectSubscriberLastEvent!=null)return _.reconnectionEventEmitter.onForciblyReconnectSubscriberLastEvent=R,A("Ongoing forced subscriber reconnection");_.reconnectionEventEmitter.onForciblyReconnectSubscriberLastEvent=R;var F=function(){var W=_.reconnectionEventEmitter.onForciblyReconnectSubscriberLastEvent;delete _.reconnectionEventEmitter.onForciblyReconnectSubscriberLastEvent,O.onForciblyReconnectSubscriber(W)};_.reconnectionEventEmitter.once("success",function(){F()}),_.reconnectionEventEmitter.once("error",function(){F()});return}_.completeWebRtcPeerReceive(!0,!0,R.sdpOffer).then(function(){return _.finalResolveForSubscription(!0,P)}).catch(function(W){return _.finalRejectForSubscription(!0,"Error while forcibly reconnecting remote stream ".concat(R.streamId,": ").concat(W.toString()),A)})}else{var L="No stream with streamId '"+R.streamId+"' found for connection '"+R.connectionId+"' on 'streamPropertyChanged' event";return S.error(L),A(L)}}).catch(function(I){return S.error(I),A(I)})})},D.prototype.reconnectBrokenStreams=function(){S.info("Re-establishing media connections...");var R=!1;this.connection.stream&&this.connection.stream.streamIceConnectionStateBroken()&&(S.warn("Re-establishing Publisher "+this.connection.stream.streamId),this.connection.stream.initWebRtcPeerSend(!0),R=!0),this.remoteConnections.forEach(function(O){O.stream&&O.stream.streamIceConnectionStateBroken()&&(S.warn("Re-establishing Subscriber "+O.stream.streamId),O.stream.initWebRtcPeerReceive(!0),R=!0)}),R||S.info("There were no media streams in need of a reconnection")},D.prototype.onSpeechToTextMessage=function(R){return n(this,void 0,void 0,function(){var O,P;return e(this,function(A){switch(A.label){case 0:return[4,this.getConnection(R.connectionId,"No connection found for connectionId "+R.connectionId)];case 1:return O=A.sent(),P=new f.SpeechToTextEvent(this,O,R.text,R.reason.toLowerCase(),R.raw,R.lang),this.ee.emitEvent("speechToTextMessage",[P]),[2]}})})},D.prototype.onSpeechToTextDisconnected=function(R){return n(this,void 0,void 0,function(){return e(this,function(O){return this.emitEvent("exception",[new E.ExceptionEvent(this,E.ExceptionEventName.SPEECH_TO_TEXT_DISCONNECTED,this,R.message)]),[2]})})},D.prototype.emitEvent=function(R,O){this.ee.emitEvent(R,O)},D.prototype.leave=function(R,O){var P=this;if(R=!!R,S.info("Leaving Session (forced="+R+")"),this.stopVideoDataIntervals(),this.connection){if(!this.connection.disposed&&!R?this.openvidu.sendRequest("leaveRoom",function(I,_){I&&S.error("leaveRoom error: ".concat(JSON.stringify(I))),P.openvidu.closeWs()}):this.openvidu.closeWs(),this.stopPublisherStream(O),!this.connection.disposed){var A=new c.SessionDisconnectedEvent(this,O);this.ee.emitEvent("sessionDisconnected",[A]),A.callDefaultBehavior()}}else S.warn("You were not connected to the session "+this.sessionId);S.flush()},D.prototype.initializeParams=function(R){var O={token:R||"",session:this.sessionId,platform:N.getDescription()?N.getDescription():"unknown",sdkVersion:this.openvidu.libraryVersion,metadata:this.options.metadata?this.options.metadata:"",secret:this.openvidu.getSecret(),recorder:this.openvidu.getRecorder(),stt:this.openvidu.getStt()};return O},D.prototype.sendVideoData=function(R,O,P,A){var I=this,_,F;if(O===void 0&&(O=1),P===void 0&&(P=!1),A===void 0&&(A=1),N.isChromeBrowser()||N.isChromeMobileBrowser()||N.isOperaBrowser()||N.isOperaMobileBrowser()||N.isEdgeBrowser()||N.isEdgeMobileBrowser()||N.isElectron()||N.isSafariBrowser()&&!N.isIonicIos()||N.isAndroidBrowser()||N.isSamsungBrowser()||N.isIonicAndroid()||N.isIOSWithSafari()){var L=function(){return n(I,void 0,void 0,function(){var B,q,G;return e(this,function(re){switch(re.label){case 0:return B=R.stream.getRTCPeerConnection(),B.connectionState!=="connected"?[3,2]:[4,B.getStats()];case 1:q=re.sent(),G=[],q.forEach(function(j){"frameWidth"in j&&"frameHeight"in j&&G.length===0&&G.push(j)}),G.length>0&&this.openvidu.sendRequest("videoData",{height:G[0].frameHeight,width:G[0].frameWidth,videoActive:R.stream.videoActive!=null?R.stream.videoActive:!1,audioActive:R.stream.audioActive!=null?R.stream.audioActive:!1},function(j,ae){j&&S.error("Error sending 'videoData' event",j)}),re.label=2;case 2:return[2]}})})};if(P){var W=1;this.videoDataInterval=setInterval(function(){W<A?(W++,L()):clearInterval(I.videoDataInterval)},O*1e3)}else this.videoDataTimeout=setTimeout(L,O*1e3)}else N.isFirefoxBrowser()||N.isFirefoxMobileBrowser()||N.isIonicIos()||N.isReactNative()?this.openvidu.sendRequest("videoData",{height:((_=R.stream.videoDimensions)===null||_===void 0?void 0:_.height)||0,width:((F=R.stream.videoDimensions)===null||F===void 0?void 0:F.width)||0,videoActive:R.stream.videoActive!=null?R.stream.videoActive:!1,audioActive:R.stream.audioActive!=null?R.stream.audioActive:!1},function(B,q){B&&S.error("Error sending 'videoData' event",B)}):S.error("Browser "+N.getName()+" (version "+N.getVersion()+") for "+N.getFamily()+" is not supported in OpenVidu for Network Quality")},D.prototype.sessionConnected=function(){return this.connection!=null},D.prototype.notConnectedError=function(){return new m.OpenViduError(m.OpenViduErrorName.OPENVIDU_NOT_CONNECTED,"There is no connection to the session. Method 'Session.connect' must be successfully completed first")},D.prototype.anySpeechEventListenerEnabled=function(R,O,P){var A=this.ee.getListeners(R);O&&(A=A.filter(function(L){return L.once}));var I=A.length;if(I>0)return!0;var _=0;if(P){var F=P.ee.getListeners(R);O&&(F=F.filter(function(L){return L.once})),_=F.length}return _>0},D.prototype.getTokenParams=function(R){var O=R.match(/^(wss?)\:\/\/(([^:\/?#]*)(?:\:([0-9]+))?)([\/]{0,1}[^?#]*)(\?[^#]*|)(#.*|)$/);if(O){var P={protocol:O[1],host:O[2],hostname:O[3],port:O[4],pathname:O[5],search:O[6],hash:O[7]},A=R.split("?"),I=decodeURI(A[1]).split("&").map(function(_){return _.split("=")}).reduce(function(_,F){var L=F[0],W=F[1];return _[L]=W,_},{});return{sessionId:I.sessionId,secret:I.secret,recorder:I.recorder,stt:I.stt,webrtcStatsInterval:I.webrtcStatsInterval,sendBrowserLogs:I.sendBrowserLogs,edition:I.edition,wsUri:P.protocol+"://"+P.host+"/openvidu",httpUri:"https://"+P.host}}else throw new Error('Token not valid: "'.concat(R,'"'))},D.prototype.connectAux=function(R){var O=this;return new Promise(function(P,A){O.openvidu.startWs(function(I){if(I)return A(I);var _=O.initializeParams(R);O.openvidu.sendRequest("joinRoom",_,function(F,L){if(F)return A(F);O.processJoinRoomResponse(L,R),O.connection=new r.Connection(O,L);var W={connections:new Array,streams:new Array},B=L.value;return B.forEach(function(q){var G=new r.Connection(O,q);O.remoteConnections.set(G.connectionId,G),W.connections.push(G),G.stream&&(O.remoteStreamsCreated.set(G.stream.streamId,!0),W.streams.push(G.stream))}),O.ee.emitEvent("connectionCreated",[new s.ConnectionEvent(!1,O,"connectionCreated",O.connection,"")]),W.connections.forEach(function(q){O.ee.emitEvent("connectionCreated",[new s.ConnectionEvent(!1,O,"connectionCreated",q,"")])}),W.streams.forEach(function(q){O.ee.emitEvent("streamCreated",[new p.StreamEvent(!1,O,"streamCreated",q,"")])}),L.recordingId&&L.recordingName&&O.ee.emitEvent("recordingStarted",[new l.RecordingEvent(O,"recordingStarted",L.recordingId,L.recordingName)]),P()})})})},D.prototype.stopPublisherStream=function(R){this.connection.stream&&(this.connection.stream.disposeWebRtcPeer(),this.connection.stream.isLocalStreamPublished&&this.connection.stream.ee.emitEvent("local-stream-destroyed",[R]))},D.prototype.stopVideoDataIntervals=function(){clearInterval(this.videoDataInterval),clearTimeout(this.videoDataTimeout)},D.prototype.stringClientMetadata=function(R){return typeof R!="string"?JSON.stringify(R):R},D.prototype.getConnection=function(R,O){var P=this;return new Promise(function(A,I){var _=P.remoteConnections.get(R);return _?A(_):P.connection.connectionId===R?A(P.connection):I(new m.OpenViduError(m.OpenViduErrorName.GENERIC_ERROR,O))})},D.prototype.getRemoteConnection=function(R,O){var P=this;return new Promise(function(A,I){var _=P.remoteConnections.get(R);if(_)return A(_);var F="Remote connection "+R+" unknown when '"+O+"'. Existing remote connections: "+JSON.stringify(P.remoteConnections.keys());return I(new m.OpenViduError(m.OpenViduErrorName.GENERIC_ERROR,F))})},D.prototype.processToken=function(R){var O=this.getTokenParams(R);this.sessionId=O.sessionId,O.secret&&(this.openvidu.secret=O.secret),O.recorder&&(this.openvidu.recorder=!0),O.stt&&(this.openvidu.stt=!0),O.webrtcStatsInterval&&(this.openvidu.webrtcStatsInterval=O.webrtcStatsInterval),O.sendBrowserLogs&&(this.openvidu.sendBrowserLogs=O.sendBrowserLogs),this.openvidu.isAtLeastPro=O.edition==="pro"||O.edition==="enterprise",this.openvidu.isEnterprise=O.edition==="enterprise",this.openvidu.wsUri=O.wsUri,this.openvidu.httpUri=O.httpUri},D.prototype.processJoinRoomResponse=function(R,O){if(this.sessionId=R.session,R.customIceServers!=null&&R.customIceServers.length>0){this.openvidu.iceServers=[];for(var P=0,A=R.customIceServers;P<A.length;P++){var I=A[P],_={urls:[I.url]};S.log("STUN/TURN server IP: "+I.url),I.username!=null&&I.credential!=null&&(_.username=I.username,_.credential=I.credential,S.log("TURN credentials ["+I.username+":"+I.credential+"]")),this.openvidu.iceServers.push(_)}}this.openvidu.role=R.role,this.openvidu.finalUserId=R.finalUserId,this.openvidu.mediaServer=R.mediaServer,this.openvidu.videoSimulcast=R.videoSimulcast,this.capabilities={subscribe:!0,publish:this.openvidu.role!=="SUBSCRIBER",forceUnpublish:this.openvidu.role==="MODERATOR",forceDisconnect:this.openvidu.role==="MODERATOR"},S.info("openvidu-server version: "+R.version),R.life!=null&&(this.openvidu.life=R.life);var F=C(R.version)-C(this.openvidu.libraryVersion);x(R.version)!==x(this.openvidu.libraryVersion)||!(F==0||F==1)?S.error("openvidu-browser (".concat(this.openvidu.libraryVersion,") and openvidu-server (").concat(R.version,") versions are incompatible. ")+"Errors are likely to occur. openvidu-browser SDK is only compatible with the same version or the immediately following minor version of an OpenVidu deployment"):F==1&&S.warn("openvidu-browser version ".concat(this.openvidu.libraryVersion," does not match openvidu-server version ").concat(R.version,". ")+"These versions are still compatible with each other, but openvidu-browser version must be updated as soon as possible to ".concat(x(R.version),".").concat(C(R.version),".x. ")+"This client using openvidu-browser ".concat(this.openvidu.libraryVersion," will become incompatible with the next release of openvidu-server")),b.OpenViduLogger.configureJSNLog(this.openvidu,O),this.token=O},D}(a.EventDispatcher);return Cd.Session=k,Cd}var r_;function hR(){if(r_)return Ed;r_=1;var t=ve&&ve.__extends||function(){var v=function(g,m){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,b){y.__proto__=b}||function(y,b){for(var w in b)Object.prototype.hasOwnProperty.call(b,w)&&(y[w]=b[w])},v(g,m)};return function(g,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");v(g,m);function y(){this.constructor=g}g.prototype=m===null?Object.create(m):(y.prototype=m.prototype,new y)}}(),n=ve&&ve.__awaiter||function(v,g,m,y){function b(w){return w instanceof m?w:new m(function(x){x(w)})}return new(m||(m=Promise))(function(w,x){function C(N){try{S(y.next(N))}catch(k){x(k)}}function E(N){try{S(y.throw(N))}catch(k){x(k)}}function S(N){N.done?w(N.value):b(N.value).then(C,E)}S((y=y.apply(v,g||[])).next())})},e=ve&&ve.__generator||function(v,g){var m={label:0,sent:function(){if(w[0]&1)throw w[1];return w[1]},trys:[],ops:[]},y,b,w,x;return x={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function C(S){return function(N){return E([S,N])}}function E(S){if(y)throw new TypeError("Generator is already executing.");for(;x&&(x=0,S[0]&&(m=0)),m;)try{if(y=1,b&&(w=S[0]&2?b.return:S[0]?b.throw||((w=b.return)&&w.call(b),0):b.next)&&!(w=w.call(b,S[1])).done)return w;switch(b=0,w&&(S=[S[0]&2,w.value]),S[0]){case 0:case 1:w=S;break;case 4:return m.label++,{value:S[1],done:!1};case 5:m.label++,b=S[1],S=[0];continue;case 7:S=m.ops.pop(),m.trys.pop();continue;default:if(w=m.trys,!(w=w.length>0&&w[w.length-1])&&(S[0]===6||S[0]===2)){m=0;continue}if(S[0]===3&&(!w||S[1]>w[0]&&S[1]<w[3])){m.label=S[1];break}if(S[0]===6&&m.label<w[1]){m.label=w[1],w=S;break}if(w&&m.label<w[2]){m.label=w[2],m.ops.push(S);break}w[2]&&m.ops.pop(),m.trys.pop();continue}S=g.call(v,m)}catch(N){S=[6,N],b=0}finally{y=w=0}if(S[0]&5)throw S[1];return{value:S[0]?S[1]:void 0,done:!0}}};Object.defineProperty(Ed,"__esModule",{value:!0}),Ed.Publisher=void 0;var r=s0(),i=zc,o=Vc,a=pR(),s=ha,u=Fu,l=An,c=Yi,d=a0,f=l.OpenViduLogger.getInstance(),p,h=function(v){t(g,v);function g(m,y,b){var w=v.call(this,new i.Stream(b.session?b.session:new r.Session(b),{publisherProperties:y,mediaConstraints:{}}),m)||this;return w.accessAllowed=!1,w.isSubscribedToRemote=!1,w.accessDenied=!1,p=c.PlatformUtils.getInstance(),w.properties=y,w.openvidu=b,w.stream.ee.on("local-stream-destroyed",function(x){w.stream.isLocalStreamPublished=!1;var C=new a.StreamEvent(!0,w,"streamDestroyed",w.stream,x);w.emitEvent("streamDestroyed",[C]),C.callDefaultBehavior()}),w}return g.prototype.publishAudio=function(m){var y=this;if(this.stream.audioActive!==m){var b=this.stream.displayMyRemote()?this.stream.localMediaStreamWhenSubscribedToRemote:this.stream.getMediaStream();b.getAudioTracks().forEach(function(w){w.enabled=m}),this.session&&this.stream.streamId&&this.session.openvidu.sendRequest("streamPropertyChanged",{streamId:this.stream.streamId,property:"audioActive",newValue:m,reason:"publishAudio"},function(w,x){w?f.error("Error sending 'streamPropertyChanged' event",w):(y.session.emitEvent("streamPropertyChanged",[new s.StreamPropertyChangedEvent(y.session,y.stream,"audioActive",m,!m,"publishAudio")]),y.emitEvent("streamPropertyChanged",[new s.StreamPropertyChangedEvent(y,y.stream,"audioActive",m,!m,"publishAudio")]),y.session.sendVideoData(y.stream.streamManager))}),this.stream.audioActive=m,f.info("'Publisher' has "+(m?"published":"unpublished")+" its audio stream")}},g.prototype.publishVideo=function(m,y){var b=this;return new Promise(function(w,x){return n(b,void 0,void 0,function(){var C,E,S,N,k,M,D=this;return e(this,function(R){switch(R.label){case 0:return this.stream.videoActive===m?[3,9]:(C=this.stream.displayMyRemote()?this.stream.localMediaStreamWhenSubscribedToRemote:this.stream.getMediaStream(),E=!1,C.getVideoTracks().forEach(function(O){O.enabled=m,!m&&y===!0?O.stop():m&&O.readyState==="ended"&&(E=!0)}),!m&&y===!0&&this.stream.filter&&this.stream.filter.type.startsWith("VB:")?(this.stream.lastVBFilter=this.stream.filter,[4,this.stream.removeFilterAux(!0)]):[3,2]);case 1:R.sent(),R.label=2;case 2:return E?(S=C.getVideoTracks()[0],C.removeTrack(S),N=function(O){return n(D,void 0,void 0,function(){var P=this;return e(this,function(A){switch(A.label){case 0:return C.addTrack(O),this.stream.isLocalStreamPublished?[4,this.replaceTrackInRtcRtpSender(O)]:[3,2];case 1:A.sent(),A.label=2;case 2:return this.stream.lastVBFilter&&setTimeout(function(){return n(P,void 0,void 0,function(){var I,_;return e(this,function(F){switch(F.label){case 0:return I=this.stream.lastVBFilter.options,_=this.stream.lastVBFilter.lastExecMethod,_&&_.method==="update"&&(I=Object.assign({},I,_.params)),[4,this.stream.applyFilter(this.stream.lastVBFilter.type,I)];case 1:return F.sent(),delete this.stream.lastVBFilter,[2]}})})},1),[2]}})})},y&&y instanceof MediaStreamTrack?[4,N(y)]:[3,4]):[3,8];case 3:return R.sent(),[3,8];case 4:return R.trys.push([4,7,,8]),[4,navigator.mediaDevices.getUserMedia({audio:!1,video:this.stream.lastVideoTrackConstraints})];case 5:return k=R.sent(),[4,N(k.getVideoTracks()[0])];case 6:return R.sent(),[3,8];case 7:return M=R.sent(),[2,x(M)];case 8:return this.session&&this.stream.streamId&&this.session.openvidu.sendRequest("streamPropertyChanged",{streamId:this.stream.streamId,property:"videoActive",newValue:m,reason:"publishVideo"},function(O,P){O?f.error("Error sending 'streamPropertyChanged' event",O):(D.session.emitEvent("streamPropertyChanged",[new s.StreamPropertyChangedEvent(D.session,D.stream,"videoActive",m,!m,"publishVideo")]),D.emitEvent("streamPropertyChanged",[new s.StreamPropertyChangedEvent(D,D.stream,"videoActive",m,!m,"publishVideo")]),D.session.sendVideoData(D.stream.streamManager))}),this.stream.videoActive=m,f.info("'Publisher' has "+(m?"published":"unpublished")+" its video stream"),[2,w()];case 9:return[2]}})})})},g.prototype.subscribeToRemote=function(m){m=m!==void 0?m:!0,this.isSubscribedToRemote=m,this.stream.subscribeToMyRemote(m)},g.prototype.on=function(m,y){var b=this;return v.prototype.on.call(this,m,y),m==="streamCreated"&&(this.stream&&this.stream.isLocalStreamPublished?this.emitEvent("streamCreated",[new a.StreamEvent(!1,this,"streamCreated",this.stream,"")]):this.stream.ee.on("stream-created-by-publisher",function(){b.emitEvent("streamCreated",[new a.StreamEvent(!1,b,"streamCreated",b.stream,"")])})),m==="accessAllowed"&&this.accessAllowed&&this.emitEvent("accessAllowed",[]),m==="accessDenied"&&this.accessDenied&&this.emitEvent("accessDenied",[]),this},g.prototype.once=function(m,y){var b=this;return v.prototype.once.call(this,m,y),m==="streamCreated"&&(this.stream&&this.stream.isLocalStreamPublished?this.emitEvent("streamCreated",[new a.StreamEvent(!1,this,"streamCreated",this.stream,"")]):this.stream.ee.once("stream-created-by-publisher",function(){b.emitEvent("streamCreated",[new a.StreamEvent(!1,b,"streamCreated",b.stream,"")])})),m==="accessAllowed"&&this.accessAllowed&&this.emitEvent("accessAllowed",[]),m==="accessDenied"&&this.accessDenied&&this.emitEvent("accessDenied",[]),this},g.prototype.off=function(m,y){return v.prototype.off.call(this,m,y),this},g.prototype.replaceTrack=function(m){return n(this,void 0,void 0,function(){return e(this,function(y){return[2,this.replaceTrackAux(m,!0)]})})},g.prototype.initialize=function(){var m=this;return new Promise(function(y,b){return n(m,void 0,void 0,function(){var w,x,C,E,S,N,k,M,D,R,O,P,P,A,I,_=this,F,L;return e(this,function(W){switch(W.label){case 0:w={},x={},C=2e3,S=function(B){return _.accessDenied=!0,_.accessAllowed=!1,f.error("Publisher initialization failed. ".concat(B.name,": ").concat(B.message)),b(B)},N=function(B){var q,G;if(_.accessAllowed=!0,_.accessDenied=!1,typeof MediaStreamTrack<"u"&&_.properties.audioSource instanceof MediaStreamTrack&&(B.removeTrack(B.getAudioTracks()[0]),B.addTrack(_.properties.audioSource)),typeof MediaStreamTrack<"u"&&_.properties.videoSource instanceof MediaStreamTrack&&(B.removeTrack(B.getVideoTracks()[0]),B.addTrack(_.properties.videoSource)),B.getAudioTracks()[0]){var re=_.stream.audioActive!==void 0&&_.stream.audioActive!==null?_.stream.audioActive:!!_.stream.outboundStreamOpts.publisherProperties.publishAudio;B.getAudioTracks()[0].enabled=re}if(B.getVideoTracks()[0]){var re=_.stream.videoActive!==void 0&&_.stream.videoActive!==null?_.stream.videoActive:!!_.stream.outboundStreamOpts.publisherProperties.publishVideo;B.getVideoTracks()[0].enabled=re}for(var j=0,ae=B.getAudioTracks();j<ae.length;j++){var te=ae[j];!((q=te.contentHint)===null||q===void 0)&&q.length||(te.contentHint="",f.info("Audio track Content Hint set: '".concat(te.contentHint,"'")))}for(var le=0,Ee=B.getVideoTracks();le<Ee.length;le++){var te=Ee[le];if(!(!((G=te.contentHint)===null||G===void 0)&&G.length)){switch(_.stream.typeOfVideo){case d.TypeOfVideo.SCREEN:te.contentHint="detail";break;case d.TypeOfVideo.CUSTOM:f.warn("CUSTOM type video track was provided without Content Hint!"),te.contentHint="motion";break;case d.TypeOfVideo.CAMERA:case d.TypeOfVideo.IPCAM:default:te.contentHint="motion";break}f.info("Video track Content Hint set: '".concat(te.contentHint,"'"))}}return _.initializeVideoReference(B),_.stream.displayMyRemote()||_.stream.updateMediaStreamInVideos(),delete _.firstVideoElement,_.stream.isSendVideo()?_.getVideoDimensions().then(function(se){_.stream.videoDimensions={width:se.width,height:se.height},_.stream.isSendScreen()&&(_.stream.isSendAudio()&&B.getAudioTracks().length===0&&(_.stream.audioActive=!1,_.stream.hasAudio=!1,_.stream.outboundStreamOpts.publisherProperties.publishAudio=!1,_.stream.outboundStreamOpts.publisherProperties.audioSource=!1),_.screenShareResizeInterval=setInterval(function(){var be=B.getVideoTracks()[0].getSettings(),fe=be.width,Z=be.height,ge=fe!=null&&fe!==_.stream.videoDimensions.width,we=Z!=null&&Z!==_.stream.videoDimensions.height;_.stream.isLocalStreamPublished&&(ge||we)&&_.openvidu.sendVideoDimensionsChangedEvent(_,"screenResized",_.stream.videoDimensions.width,_.stream.videoDimensions.height,fe||0,Z||0)},650)),_.stream.isLocalStreamReadyToPublish=!0,_.stream.ee.emitEvent("stream-ready-to-publish",[])}):(_.stream.isLocalStreamReadyToPublish=!0,_.stream.ee.emitEvent("stream-ready-to-publish",[])),y()},k=function(B,q){return n(_,void 0,void 0,function(){var G,re;return e(this,function(j){switch(j.label){case 0:if(this.clearPermissionDialogTimer(E,C),!(this.stream.isSendScreen()&&this.properties.audioSource!=="screen"&&this.stream.isSendAudio()))return[3,5];x.audio=q,x.video=!1,E=Date.now(),this.setPermissionDialogTimer(C),j.label=1;case 1:return j.trys.push([1,3,,4]),[4,navigator.mediaDevices.getUserMedia(x)];case 2:return G=j.sent(),this.clearPermissionDialogTimer(E,C),B.addTrack(G.getAudioTracks()[0]),N(B),[3,4];case 3:return re=j.sent(),this.clearPermissionDialogTimer(E,C),B.getAudioTracks().forEach(function(ae){ae.stop()}),B.getVideoTracks().forEach(function(ae){ae.stop()}),S(this.openvidu.generateAudioDeviceError(re,w)),[2];case 4:return[3,6];case 5:N(B),j.label=6;case 6:return[2]}})})},M=function(B){return n(_,void 0,void 0,function(){var q,G,re,ae,j,ae,te;return e(this,function(le){switch(le.label){case 0:switch(f.error("getMediaError: ".concat(B.toString())),this.clearPermissionDialogTimer(E,C),B.name==="Error"&&(B.name=B.constructor.name),re=B.name.toLowerCase(),re){case"notfounderror":return[3,1];case"notallowederror":return[3,5];case"overconstrainederror":return[3,6];case"aborterror":return[3,10];case"notreadableerror":return[3,10]}return[3,11];case 1:return le.trys.push([1,3,,4]),[4,navigator.mediaDevices.getUserMedia({audio:!1,video:w.video})];case 2:return ae=le.sent(),ae.getVideoTracks().forEach(function(Ee){Ee.stop()}),q=u.OpenViduErrorName.INPUT_AUDIO_DEVICE_NOT_FOUND,G=B.toString(),S(new u.OpenViduError(q,G)),[3,4];case 3:return j=le.sent(),q=u.OpenViduErrorName.INPUT_VIDEO_DEVICE_NOT_FOUND,G=j.toString(),S(new u.OpenViduError(q,G)),[3,4];case 4:return[3,12];case 5:return q=this.stream.isSendScreen()?u.OpenViduErrorName.SCREEN_CAPTURE_DENIED:u.OpenViduErrorName.DEVICE_ACCESS_DENIED,G=B.toString(),S(new u.OpenViduError(q,G)),[3,12];case 6:return le.trys.push([6,8,,9]),[4,navigator.mediaDevices.getUserMedia({audio:!1,video:w.video})];case 7:return ae=le.sent(),ae.getVideoTracks().forEach(function(Ee){Ee.stop()}),B.constraint.toLowerCase()==="deviceid"?(q=u.OpenViduErrorName.INPUT_AUDIO_DEVICE_NOT_FOUND,G="Audio input device with deviceId '"+w.audio.deviceId.exact+"' not found"):(q=u.OpenViduErrorName.PUBLISHER_PROPERTIES_ERROR,G="Audio input device doesn't support the value passed for constraint '"+B.constraint+"'"),S(new u.OpenViduError(q,G)),[3,9];case 8:return te=le.sent(),te.constraint.toLowerCase()==="deviceid"?(q=u.OpenViduErrorName.INPUT_VIDEO_DEVICE_NOT_FOUND,G="Video input device with deviceId '"+w.video.deviceId.exact+"' not found"):(q=u.OpenViduErrorName.PUBLISHER_PROPERTIES_ERROR,G="Video input device doesn't support the value passed for constraint '"+te.constraint+"'"),S(new u.OpenViduError(q,G)),[3,9];case 9:return[3,12];case 10:return q=u.OpenViduErrorName.DEVICE_ALREADY_IN_USE,G=B.toString(),S(new u.OpenViduError(q,G)),[3,12];case 11:return q=u.OpenViduErrorName.GENERIC_ERROR,G=B.toString(),S(new u.OpenViduError(q,G)),[3,12];case 12:return[2]}})})},W.label=1;case 1:return W.trys.push([1,14,,15]),[4,this.openvidu.generateMediaConstraints(this.properties)];case 2:return D=W.sent(),D.videoTrack&&D.audioTrack||D.audioTrack&&((F=D.constraints)===null||F===void 0?void 0:F.video)===!1||D.videoTrack&&((L=D.constraints)===null||L===void 0?void 0:L.audio)===!1?(N(this.openvidu.addAlreadyProvidedTracks(D,new MediaStream,this.stream)),[3,13]):[3,3];case 3:w=D.constraints,R={mediaConstraints:w,publisherProperties:this.properties},this.stream.setOutboundStreamOptions(R),O=w.audio===void 0?!0:w.audio,x.audio=this.stream.isSendScreen()?!1:O,x.video=w.video,E=Date.now(),this.setPermissionDialogTimer(C),W.label=4;case 4:return W.trys.push([4,11,,13]),this.stream.isSendScreen()&&navigator.mediaDevices.getDisplayMedia&&!p.isElectron()?[4,navigator.mediaDevices.getDisplayMedia({video:!0,audio:this.properties.audioSource==="screen"})]:[3,7];case 5:return P=W.sent(),this.openvidu.addAlreadyProvidedTracks(D,P),[4,k(P,O)];case 6:return W.sent(),[3,10];case 7:return this.stream.lastVideoTrackConstraints=x.video,[4,navigator.mediaDevices.getUserMedia(x)];case 8:return P=W.sent(),this.openvidu.addAlreadyProvidedTracks(D,P,this.stream),[4,k(P,O)];case 9:W.sent(),W.label=10;case 10:return[3,13];case 11:return A=W.sent(),[4,M(A)];case 12:return W.sent(),[3,13];case 13:return[3,15];case 14:return I=W.sent(),S(I),[3,15];case 15:return[2]}})})})},g.prototype.replaceTrackAux=function(m,y){return n(this,void 0,void 0,function(){var b,w;return e(this,function(x){switch(x.label){case 0:b=m.enabled,m.kind==="video"?m.enabled=this.stream.videoActive:m.kind==="audio"&&(m.enabled=this.stream.audioActive),x.label=1;case 1:return x.trys.push([1,5,,6]),this.stream.isLocalStreamPublished?(this.replaceTrackInMediaStream(m,y),[4,this.replaceTrackInRtcRtpSender(m)]):[3,3];case 2:return[2,x.sent()];case 3:return[2,this.replaceTrackInMediaStream(m,y)];case 4:return[3,6];case 5:throw w=x.sent(),m.enabled=b,w;case 6:return[2]}})})},g.prototype.getVideoDimensions=function(){var m=this;return new Promise(function(y,b){var w=(p.isIonicIos()||p.isIOSWithSafari())&&m.videoReference.readyState<1,x,C=function(){var E,S;if(typeof m.stream.getMediaStream().getVideoTracks()[0].getSettings=="function"){var N=m.stream.getMediaStream().getVideoTracks()[0].getSettings();E=N.width||m.videoReference.videoWidth,S=N.height||m.videoReference.videoHeight}else f.warn("MediaStreamTrack does not have getSettings method on "+p.getDescription()),E=m.videoReference.videoWidth,S=m.videoReference.videoHeight;return x!=null&&m.videoReference.removeEventListener("loadedmetadata",x),w&&document.body.removeChild(m.videoReference),y({width:E,height:S})};m.videoReference.readyState>=1?C():(x=function(){if(m.videoReference.videoWidth)C();else var E=setInterval(function(){m.videoReference.videoWidth&&(clearInterval(E),C())},40)},m.videoReference.addEventListener("loadedmetadata",x),w&&document.body.appendChild(m.videoReference))})},g.prototype.reestablishStreamPlayingEvent=function(){this.ee.getListeners("streamPlaying").length>0&&this.addPlayEventToFirstVideo()},g.prototype.initializeVideoReference=function(m){this.videoReference=document.createElement("video"),this.videoReference.style.display="none",this.videoReference.muted=!0,this.videoReference.autoplay=!0,this.videoReference.controls=!1,(p.isSafariBrowser()||p.isIPhoneOrIPad()&&(p.isChromeMobileBrowser()||p.isEdgeMobileBrowser()||p.isOperaMobileBrowser()||p.isFirefoxMobileBrowser()))&&(this.videoReference.playsInline=!0),this.stream.setMediaStream(m),this.firstVideoElement&&this.createVideoElement(this.firstVideoElement.targetElement,this.properties.insertMode),this.videoReference.srcObject=this.stream.getMediaStream()},g.prototype.replaceTrackInMediaStream=function(m,y){var b=this.stream.displayMyRemote()?this.stream.localMediaStreamWhenSubscribedToRemote:this.stream.getMediaStream(),w;m.kind==="video"?(w=b.getVideoTracks()[0],y&&(this.stream.lastVideoTrackConstraints=m.getConstraints())):w=b.getAudioTracks()[0],w.enabled=!1,w.stop(),b.removeTrack(w),b.addTrack(m);var x={oldLabel:(w==null?void 0:w.label)||"",newLabel:(m==null?void 0:m.label)||""};m.kind==="video"&&y?(this.openvidu.sendNewVideoDimensionsIfRequired(this,"trackReplaced",50,30),this.openvidu.sendTrackChangedEvent(this,x.oldLabel,x.newLabel,"videoTrack"),this.stream.isLocalStreamPublished&&this.session.sendVideoData(this.stream.streamManager,5,!0,5)):m.kind==="audio"&&y&&this.openvidu.sendTrackChangedEvent(this,x.oldLabel,x.newLabel,"audioTrack"),m.kind==="audio"&&(this.stream.disableHarkSpeakingEvent(!1),this.stream.disableHarkStoppedSpeakingEvent(!1),this.stream.disableHarkVolumeChangeEvent(!1),this.stream.initHarkEvents())},g.prototype.setPermissionDialogTimer=function(m){var y=this;this.permissionDialogTimeout=setTimeout(function(){y.emitEvent("accessDialogOpened",[])},m)},g.prototype.clearPermissionDialogTimer=function(m,y){clearTimeout(this.permissionDialogTimeout),Date.now()-m>y&&this.emitEvent("accessDialogClosed",[])},g.prototype.replaceTrackInRtcRtpSender=function(m){return n(this,void 0,void 0,function(){var y,b;return e(this,function(w){switch(w.label){case 0:if(y=this.stream.getRTCPeerConnection().getSenders(),m.kind==="video"){if(b=y.find(function(x){return!!x.track&&x.track.kind==="video"}),!b)throw new Error("There's no replaceable track for that kind of MediaStreamTrack in this Publisher object")}else if(m.kind==="audio"){if(b=y.find(function(x){return!!x.track&&x.track.kind==="audio"}),!b)throw new Error("There's no replaceable track for that kind of MediaStreamTrack in this Publisher object")}else throw new Error("Unknown track kind "+m.kind);return[4,b.replaceTrack(m)];case 1:return w.sent(),[2]}})})},g}(o.StreamManager);return Ed.Publisher=h,Ed}var oj={};globalThis.getScreenId=function(t,n,e){if(navigator.userAgent.indexOf("Edge")!==-1&&(navigator.msSaveOrOpenBlob||navigator.msSaveBlob)){n({video:!0});return}if(navigator.mozGetUserMedia){n(null,"firefox",{video:{mozMediaSource:t,mediaSource:t}});return}globalThis.addEventListener("message",r);function r(i){i.data&&(i.data.chromeMediaSourceId&&(i.data.chromeMediaSourceId==="PermissionDeniedError"?n("permission-denied"):n(null,i.data.chromeMediaSourceId,i_(null,i.data.chromeMediaSourceId,i.data.canRequestAudioTrack)),globalThis.removeEventListener("message",r)),i.data.chromeExtensionStatus&&(n(i.data.chromeExtensionStatus,null,i_(i.data.chromeExtensionStatus)),globalThis.removeEventListener("message",r)))}setTimeout(e?function(){zv(e)}:zv,100)};function i_(t,n,e){var r={audio:!1,video:{mandatory:{chromeMediaSource:t?"screen":"desktop",maxWidth:globalThis.screen.width>1920?globalThis.screen.width:1920,maxHeight:globalThis.screen.height>1080?globalThis.screen.height:1080},optional:[]}};return e&&(r.audio={mandatory:{chromeMediaSource:t?"screen":"desktop"},optional:[]}),n&&(r.video.mandatory.chromeMediaSourceId=n,r.audio&&r.audio.mandatory&&(r.audio.mandatory.chromeMediaSourceId=n)),r}function zv(t){if(!hr){mR(function(){zv(t)});return}if(!hr.isLoaded){setTimeout(function(){zv(t)},100);return}t?t.forEach?hr.contentWindow.postMessage({captureCustomSourceId:t},"*"):hr.contentWindow.postMessage({captureSourceIdWithAudio:!0},"*"):hr.contentWindow.postMessage({captureSourceId:!0},"*")}var hr;globalThis.getScreenConstraints=function(t){mR(function(){getScreenId(function(n,e,r){r||(r={video:!0}),t(n,r.video)})})};function mR(t){if(hr){t();return}hr=document.createElement("iframe"),hr.onload=function(){hr.isLoaded=!0,t()},hr.src="https://openvidu.github.io/openvidu-screen-sharing-chrome-extension/",hr.style.display="none",(document.body||document.documentElement).appendChild(hr)}globalThis.getChromeExtensionStatus=function(t){if(navigator.mozGetUserMedia){t("installed-enabled");return}globalThis.addEventListener("message",n);function n(e){e.data&&e.data.chromeExtensionStatus&&(t(e.data.chromeExtensionStatus),globalThis.removeEventListener("message",n))}setTimeout(Ex,100)};function Ex(){if(!hr){mR(Ex);return}if(!hr.isLoaded){setTimeout(Ex,100);return}hr.contentWindow.postMessage({getChromeExtensionStatus:!0},"*")}oj.getScreenId=globalThis.getScreenId;var Hc={},ns="screen",rs,Sl;if(typeof window<"u"&&typeof navigator<"u"&&typeof navigator.userAgent<"u"){var aj=typeof window.InstallTrigger<"u";window.opera||navigator.userAgent.indexOf(" OPR/")>=0,window.addEventListener("message",function(t){t.origin==window.location.origin&&The(t.data)})}function The(t){if(t=="PermissionDeniedError"){if(Sl)return Sl("PermissionDeniedError");throw new Error("PermissionDeniedError")}t=="rtcmulticonnection-extension-loaded"&&(ns="desktop"),t.sourceId&&Sl&&Sl(rs=t.sourceId,t.canRequestAudioTrack===!0)}function Nhe(t){if(t){if(ns=="desktop")return t(!0);window.postMessage("are-you-there","*"),setTimeout(function(){ns=="screen"?t(!1):t(!0)},2e3)}}function sj(t){if(!t)throw'"callback" parameter is mandatory.';if(rs)return t(rs);Sl=t,window.postMessage("get-sourceId","*")}function khe(t){if(!t)throw'"callback" parameter is mandatory.';if(rs)return t(rs);Sl=t,window.postMessage("audio-plus-tab","*")}function Ihe(t,n){if(aj)return n("not-chrome");arguments.length!=2&&(n=t,t="lfcgfepafnobdloecchnfaclibenjold");var e=document.createElement("img");e.src="chrome-extension://"+t+"/icon.png",e.onload=function(){ns="screen",window.postMessage("are-you-there","*"),setTimeout(function(){ns=="screen"?n("installed-disabled"):n("installed-enabled")},2e3)},e.onerror=function(){n("not-installed")}}function _he(t){uj(t,!0)}function uj(t,n){rs="";var e={mozMediaSource:"window",mediaSource:"window"};if(aj)return t(null,e);var r={mandatory:{chromeMediaSource:ns,maxWidth:screen.width>1920?screen.width:1920,maxHeight:screen.height>1080?screen.height:1080},optional:[]};if(ns=="desktop"&&!rs){n?khe(function(i,o){r.mandatory.chromeMediaSourceId=i,o&&(r.canRequestAudioTrack=!0),t(i=="PermissionDeniedError"?i:null,r)}):sj(function(i){r.mandatory.chromeMediaSourceId=i,t(i=="PermissionDeniedError"?i:null,r)});return}ns=="desktop"&&(r.mandatory.chromeMediaSourceId=rs),t(null,r)}Hc.getScreenConstraints=uj;Hc.getScreenConstraintsWithAudio=_he;Hc.isChromeExtensionAvailable=Nhe;Hc.getChromeExtensionStatus=Ihe;Hc.getSourceId=sj;var vR={exports:{}},Bl=typeof Reflect=="object"?Reflect:null,o_=Bl&&typeof Bl.apply=="function"?Bl.apply:function(n,e,r){return Function.prototype.apply.call(n,e,r)},Em;Bl&&typeof Bl.ownKeys=="function"?Em=Bl.ownKeys:Object.getOwnPropertySymbols?Em=function(n){return Object.getOwnPropertyNames(n).concat(Object.getOwnPropertySymbols(n))}:Em=function(n){return Object.getOwnPropertyNames(n)};function Ahe(t){console&&console.warn&&console.warn(t)}var lj=Number.isNaN||function(n){return n!==n};function Dt(){Dt.init.call(this)}vR.exports=Dt;vR.exports.once=Phe;Dt.EventEmitter=Dt;Dt.prototype._events=void 0;Dt.prototype._eventsCount=0;Dt.prototype._maxListeners=void 0;var a_=10;function u0(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Dt,"defaultMaxListeners",{enumerable:!0,get:function(){return a_},set:function(t){if(typeof t!="number"||t<0||lj(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");a_=t}});Dt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Dt.prototype.setMaxListeners=function(n){if(typeof n!="number"||n<0||lj(n))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+n+".");return this._maxListeners=n,this};function cj(t){return t._maxListeners===void 0?Dt.defaultMaxListeners:t._maxListeners}Dt.prototype.getMaxListeners=function(){return cj(this)};Dt.prototype.emit=function(n){for(var e=[],r=1;r<arguments.length;r++)e.push(arguments[r]);var i=n==="error",o=this._events;if(o!==void 0)i=i&&o.error===void 0;else if(!i)return!1;if(i){var a;if(e.length>0&&(a=e[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var u=o[n];if(u===void 0)return!1;if(typeof u=="function")o_(u,this,e);else for(var l=u.length,c=mj(u,l),r=0;r<l;++r)o_(c[r],this,e);return!0};function dj(t,n,e,r){var i,o,a;if(u0(e),o=t._events,o===void 0?(o=t._events=Object.create(null),t._eventsCount=0):(o.newListener!==void 0&&(t.emit("newListener",n,e.listener?e.listener:e),o=t._events),a=o[n]),a===void 0)a=o[n]=e,++t._eventsCount;else if(typeof a=="function"?a=o[n]=r?[e,a]:[a,e]:r?a.unshift(e):a.push(e),i=cj(t),i>0&&a.length>i&&!a.warned){a.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(n)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=t,s.type=n,s.count=a.length,Ahe(s)}return t}Dt.prototype.addListener=function(n,e){return dj(this,n,e,!1)};Dt.prototype.on=Dt.prototype.addListener;Dt.prototype.prependListener=function(n,e){return dj(this,n,e,!0)};function Ohe(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function fj(t,n,e){var r={fired:!1,wrapFn:void 0,target:t,type:n,listener:e},i=Ohe.bind(r);return i.listener=e,r.wrapFn=i,i}Dt.prototype.once=function(n,e){return u0(e),this.on(n,fj(this,n,e)),this};Dt.prototype.prependOnceListener=function(n,e){return u0(e),this.prependListener(n,fj(this,n,e)),this};Dt.prototype.removeListener=function(n,e){var r,i,o,a,s;if(u0(e),i=this._events,i===void 0)return this;if(r=i[n],r===void 0)return this;if(r===e||r.listener===e)--this._eventsCount===0?this._events=Object.create(null):(delete i[n],i.removeListener&&this.emit("removeListener",n,r.listener||e));else if(typeof r!="function"){for(o=-1,a=r.length-1;a>=0;a--)if(r[a]===e||r[a].listener===e){s=r[a].listener,o=a;break}if(o<0)return this;o===0?r.shift():Dhe(r,o),r.length===1&&(i[n]=r[0]),i.removeListener!==void 0&&this.emit("removeListener",n,s||e)}return this};Dt.prototype.off=Dt.prototype.removeListener;Dt.prototype.removeAllListeners=function(n){var e,r,i;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[n]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[n]),this;if(arguments.length===0){var o=Object.keys(r),a;for(i=0;i<o.length;++i)a=o[i],a!=="removeListener"&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(e=r[n],typeof e=="function")this.removeListener(n,e);else if(e!==void 0)for(i=e.length-1;i>=0;i--)this.removeListener(n,e[i]);return this};function pj(t,n,e){var r=t._events;if(r===void 0)return[];var i=r[n];return i===void 0?[]:typeof i=="function"?e?[i.listener||i]:[i]:e?Mhe(i):mj(i,i.length)}Dt.prototype.listeners=function(n){return pj(this,n,!0)};Dt.prototype.rawListeners=function(n){return pj(this,n,!1)};Dt.listenerCount=function(t,n){return typeof t.listenerCount=="function"?t.listenerCount(n):hj.call(t,n)};Dt.prototype.listenerCount=hj;function hj(t){var n=this._events;if(n!==void 0){var e=n[t];if(typeof e=="function")return 1;if(e!==void 0)return e.length}return 0}Dt.prototype.eventNames=function(){return this._eventsCount>0?Em(this._events):[]};function mj(t,n){for(var e=new Array(n),r=0;r<n;++r)e[r]=t[r];return e}function Dhe(t,n){for(;n+1<t.length;n++)t[n]=t[n+1];t.pop()}function Mhe(t){for(var n=new Array(t.length),e=0;e<n.length;++e)n[e]=t[e].listener||t[e];return n}function Phe(t,n){return new Promise(function(e,r){function i(a){t.removeListener(n,o),r(a)}function o(){typeof t.removeListener=="function"&&t.removeListener("error",i),e([].slice.call(arguments))}vj(t,n,o,{once:!0}),n!=="error"&&Lhe(t,i,{once:!0})})}function Lhe(t,n,e){typeof t.on=="function"&&vj(t,"error",n,e)}function vj(t,n,e,r){if(typeof t.on=="function")r.once?t.once(n,e):t.on(n,e);else if(typeof t.addEventListener=="function")t.addEventListener(n,function i(o){r.once&&t.removeEventListener(n,i),e(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var Fhe=vR.exports,Cx={exports:{}};typeof Object.create=="function"?Cx.exports=function(n,e){e&&(n.super_=e,n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}))}:Cx.exports=function(n,e){if(e){n.super_=e;var r=function(){};r.prototype=e.prototype,n.prototype=new r,n.prototype.constructor=n}};var zhe=Cx.exports,gR={},yR={};function Bhe(t,n){var e={jsonrpc:"2.0"};if(t.method)e.method=t.method,t.params&&(e.params=t.params),n!=null&&(e.id=n);else if(n!=null){if(t.error){if(t.result!==void 0)throw new TypeError("Both result and error are defined");e.error=t.error}else if(t.result!==void 0)e.result=t.result;else throw new TypeError("No result or error is defined");e.id=n}return JSON.stringify(e)}function jhe(t){var n=t;(typeof t=="string"||t instanceof String)&&(n=JSON.parse(t));var e=n.jsonrpc;if(e!=="2.0")throw new TypeError("Invalid JsonRPC version '"+e+"': "+t);if(n.method==null){if(n.id==null)throw new TypeError("Invalid message: "+t);var r=n.result!==void 0,i=n.error!==void 0;if(r&&i)throw new TypeError("Both result and error are defined: "+t);if(!r&&!i)throw new TypeError("No result or error is defined: "+t);n.ack=n.id,delete n.id}return n}yR.pack=Bhe;yR.unpack=jhe;var bR={};function Vhe(t){throw new TypeError("Not yet implemented")}function $he(t){throw new TypeError("Not yet implemented")}bR.pack=Vhe;bR.unpack=$he;var Uhe=yR,Whe=bR;gR.JsonRPC=Uhe;gR.XmlRPC=Whe;function gj(){var t={};this.forEach=function(n){for(var e in t){var r=t[e];for(var i in r)n(r[i])}},this.get=function(n,e){var r=t[e];if(r!=null)return r[n]},this.remove=function(n,e){var r=t[e];if(r!=null){delete r[n];for(var i in r)return!1;delete t[e]}},this.set=function(n,e,r){if(n==null)return this.remove(e,r);var i=t[r];i==null&&(t[r]=i={}),i[e]=n}}gj.prototype.pop=function(t,n){var e=this.get(t,n);if(e!=null)return this.remove(t,n),e};var Hhe=gj,K1={},X1,s_;function yj(){if(s_)return X1;s_=1;var t=An.OpenViduLogger,n=t.getInstance(),e=2e3,r=3e3,i=3;function o(a){var s=!1,u,l=a.uri,c=!1,d=new WebSocket(l);d.onopen=function(){n.debug("WebSocket connected to "+l),a.onconnected&&a.onconnected()},d.onerror=function(g){n.error("Could not connect to "+l+" (invoking onerror if defined)",g),a.onerror&&a.onerror(g)};var f=function(){d.readyState===i?s?n.debug("Connection closed by user"):a.ismasternodecrashed()?n.error("Master Node has crashed. Stopping reconnection process"):(n.debug("Connection closed unexpectedly. Reconnecting..."),p(e,1)):n.debug("Close callback from previous websocket. Ignoring it")};d.onclose=f;function p(g,m){if(n.debug("reconnect (attempt #"+m+", max="+g+")"),m===1){if(c){n.warn("Trying to reconnect when already reconnecting... Ignoring this reconnection.");return}else c=!0;a.onreconnecting&&a.onreconnecting()}v(g,m)}function h(g){var m=new URLSearchParams(new URL(g).search);return m.has("reconnect")||(g=Array.from(m).length>0?g+"&reconnect=true":g+"?reconnect=true"),g}function v(g,m){n.debug("Reconnection attempt #"+m),d.close(4104,"Connection closed for reconnection"),l=h(l),d=new WebSocket(l),d.onopen=function(){n.debug("Reconnected to "+l+" after "+m+" attempts..."),c=!1,u(),a.onreconnected&&a.onreconnected(),d.onclose=f},d.onerror=function(y){n.warn("Reconnection error: ",y),m===g?a.ondisconnect&&a.ondisconnect():setTimeout(function(){p(g,m+1)},r)}}this.close=function(g,m){s=!0,d.close(g,m)},this.reconnectWs=function(){n.debug("reconnectWs"),p(e,1)},this.send=function(g){d.send(g)},this.addEventListener=function(g,m){u=function(){d.addEventListener(g,m)},u()},this.getReadyState=function(){return d.readyState}}return X1=o,X1}var Y1,u_;function Ghe(){if(u_)return Y1;u_=1;var t=bj(),n=yj(),e=An.OpenViduLogger;Date.now=Date.now||function(){return+new Date};var r=5e3,i="RECONNECTING",o="CONNECTED",a="DISCONNECTED",s=e.getInstance();function u(l){var c=this,d=l.ws,f=-1,p=0,h=!0,v=!1,g,m=a,y=d.onreconnecting,b=d.onreconnected,w=d.onconnected,x=d.onerror;l.rpc.pull=function(R,O){O.reply(null,"push")},d.onreconnecting=function(){if(s.debug("--------- ONRECONNECTING -----------"),m===i){s.error("Websocket already in RECONNECTING state when receiving a new ONRECONNECTING message. Ignoring it");return}D(),m=i,y&&y()},d.onreconnected=function(){if(s.debug("--------- ONRECONNECTED -----------"),m===o){s.error("Websocket already in CONNECTED state when receiving a new ONRECONNECTED message. Ignoring it");return}m=o,N(),b&&b()},d.onconnected=function(){if(s.debug("--------- ONCONNECTED -----------"),m===o){s.error("Websocket already in CONNECTED state when receiving a new ONCONNECTED message. Ignoring it");return}m=o,h=!0,M(),w&&w()},d.onerror=function(R){s.debug("--------- ONERROR -----------"),m=a,D(),x&&x(R)};var C=new n(d);s.debug("Connecting websocket to URI: "+d.uri);var E={request_timeout:l.rpc.requestTimeout,ping_request_timeout:l.rpc.heartbeatRequestTimeout},S=new t(t.packers.JsonRPC,E,C,function(R){s.debug("Received request: "+JSON.stringify(R));try{var O=l.rpc[R.method];O===void 0?s.error("Method "+R.method+" not registered in client"):O(R.params,R)}catch(P){s.error("Exception processing request: "+JSON.stringify(R)),s.error(P)}});this.send=function(R,O,P){var A=Date.now();S.encode(R,O,function(I,_){if(I){try{s.error("ERROR:"+I.message+" in Request: method:"+R+" params:"+JSON.stringify(O)+" request:"+I.request),I.data&&s.error("ERROR DATA:"+JSON.stringify(I.data))}catch{}I.requestTime=A}P&&(_!=null&&_.value!=="pong"&&s.debug("Response: "+JSON.stringify(_)),P(I,_))})};function N(){s.debug("notReconnectIfNumLessThan = "+p+" (old="+f+")"),f=p}function k(){if(h){var R=null;(p==0||p==f)&&(R={interval:l.heartbeat||r}),p++,c.send("ping",R,function(O){return function(P,A){P&&(s.debug("Error in ping request #"+O+" ("+P.message+")"),O>f&&(h=!1,N(),s.debug("Server did not respond to ping message #"+O+". Reconnecting... "),C.reconnectWs()))}}(p))}else s.debug("Trying to send ping, but ping is not enabled")}function M(){v||(s.debug("Starting ping (if configured)"),v=!0,l.heartbeat!=null&&(g=setInterval(k,l.heartbeat),k()))}function D(){clearInterval(g),v=!1,h=!1,p=-1,S.cancel()}this.close=function(R,O){s.debug("Closing  with code: "+R+" because: "+O),g!=null&&(s.debug("Clearing ping interval"),clearInterval(g)),v=!1,h=!1,C.close(R,O)},this.reconnect=function(){C.reconnectWs()},this.resetPing=function(){h=!0,p=0,M()},this.getReadyState=function(){return C.getReadyState()}}return Y1=u,Y1}var l_;function qhe(){if(l_)return K1;l_=1;var t=Ghe();return K1.JsonRpcClient=t,K1}var J1={},c_;function Khe(){if(c_)return J1;c_=1;var t=yj();return J1.WebSocketWithReconnection=t,J1}var Q1,d_;function bj(){if(d_)return Q1;d_=1;var t=!1;if(Object.defineProperty)try{Object.defineProperty({},"x",{})}catch{t=!0}Function.prototype.bind||(Function.prototype.bind=function(f){if(typeof this!="function")throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var p=Array.prototype.slice.call(arguments,1),h=this,v=function(){},g=function(){return h.apply(this instanceof v&&f?this:f,p.concat(Array.prototype.slice.call(arguments)))};return v.prototype=this.prototype,g.prototype=new v,g});var n=Fhe.EventEmitter,e=zhe,r=gR,i=Hhe,o=5e3;function a(f){if(!f)return{};for(var p in f){var h=f[p];typeof h=="string"&&(f[p]={response:h})}return f}function s(f){if(f){if(f instanceof Function)return{send:f};if(f.send instanceof Function)return f;if(f.postMessage instanceof Function)return f.send=f.postMessage,f;if(f.write instanceof Function)return f.send=f.write,f;if(f.onmessage===void 0&&!(f.pause instanceof Function))throw new SyntaxError("Transport is not a function nor a valid object")}}function u(f,p){t?(this.method=f,this.params=p):(Object.defineProperty(this,"method",{value:f,enumerable:!0}),Object.defineProperty(this,"params",{value:p,enumerable:!0}))}function l(f,p,h,v){var g=this;if(!f)throw new SyntaxError("Packer is not defined");if(!f.pack||!f.unpack)throw new SyntaxError("Packer is invalid");var m=a(f.responseMethods);if(p instanceof Function){if(h!=null)throw new SyntaxError("There can't be parameters after onRequest");v=p,h=void 0,p=void 0}if(p&&p.send instanceof Function){if(h&&!(h instanceof Function))throw new SyntaxError("Only a function can be after transport");v=h,h=p,p=void 0}if(h instanceof Function){if(v!=null)throw new SyntaxError("There can't be parameters after onRequest");v=h,h=void 0}if(h&&h.send instanceof Function&&v&&!(v instanceof Function))throw new SyntaxError("Only a function can be after transport");p=p||{},n.call(this),v&&this.on("request",v),t?this.peerID=p.peerID:Object.defineProperty(this,"peerID",{value:p.peerID});var y=p.max_retries||0;function b(I){g.decode(I.data||I)}this.getTransport=function(){return h},this.setTransport=function(I){h&&(h.removeEventListener?h.removeEventListener("message",b):h.removeListener&&h.removeListener("data",b)),I&&(I.addEventListener?I.addEventListener("message",b):I.addListener&&I.addListener("data",b)),h=s(I)},t||Object.defineProperty(this,"transport",{get:this.getTransport.bind(this),set:this.setTransport.bind(this)}),this.setTransport(h);var w=p.request_timeout||o,x=p.ping_request_timeout||w,C=p.response_timeout||o,E=p.duplicates_timeout||o,S=0,N=new i,k=new i,M=new i,D={};function R(I,_,F){var L={message:I,timeout:setTimeout(function(){k.remove(_,F)},C)};k.set(L,_,F)}function O(I,_){var F=setTimeout(function(){M.remove(I,_)},E);M.set(F,I,_)}function P(I,_,F,L,W){u.call(this,I,_),this.getTransport=function(){return W},this.setTransport=function(G){W=s(G)},t||Object.defineProperty(this,"transport",{get:this.getTransport.bind(this),set:this.setTransport.bind(this)});var B=k.get(F,L);W||g.getTransport()||(t?this.duplicated=!!B:Object.defineProperty(this,"duplicated",{value:!!B}));var q=m[I];this.pack=f.pack.bind(f,this,F),this.reply=function(G,re,j){if(G instanceof Function||G&&G.send instanceof Function){if(re!=null)throw new SyntaxError("There can't be parameters after callback");j=G,re=null,G=void 0}else if(re instanceof Function||re&&re.send instanceof Function){if(j!=null)throw new SyntaxError("There can't be parameters after callback");j=re,re=null}j=s(j),B&&clearTimeout(B.timeout),L!=null&&(G&&(G.dest=L),re&&(re.dest=L));var ae;if(G||re!=null){if(g.peerID!=null&&(G?G.from=g.peerID:re.from=g.peerID),q)if(q.error==null&&G)ae={error:G};else{var te=G?q.error:q.response;ae={method:te,params:G||re}}else ae={error:G,result:re};ae=f.pack(ae,F)}else B?ae=B.message:ae=f.pack({result:null},F);return R(ae,F,L),j=j||this.getTransport()||g.getTransport(),j?j.send(ae):ae}}e(P,u);function A(I){var _=D[I];if(_){delete D[I];var F=N.pop(_.id,_.dest);F&&(clearTimeout(F.timeout),O(_.id,_.dest))}}this.cancel=function(I){if(I)return A(I);for(var I in D)A(I)},this.close=function(){var I=this.getTransport();I&&I.close&&I.close(4003,"Cancel request"),this.cancel(),M.forEach(clearTimeout),k.forEach(function(_){clearTimeout(_.timeout)})},this.encode=function(I,_,F,L,W){if(_ instanceof Function){if(F!=null)throw new SyntaxError("There can't be parameters after callback");W=_,L=void 0,F=void 0,_=void 0}else if(F instanceof Function){if(L!=null)throw new SyntaxError("There can't be parameters after callback");W=F,L=void 0,F=void 0}else if(L instanceof Function){if(W!=null)throw new SyntaxError("There can't be parameters after callback");W=L,L=void 0}g.peerID!=null&&(_=_||{},_.from=g.peerID),F!=null&&(_=_||{},_.dest=F);var B={method:I,params:_};if(W){let se=function(ge,we){g.cancel(B),W(ge,we)},be=function(ge){var we=I==="ping"?x:w;return re.timeout=setTimeout(Z,we*Math.pow(2,G++)),D[B]={id:q,dest:F},N.set(re,q,F),ge=ge||j||g.getTransport(),ge?ge.send(B):B},fe=function(ge){ge=s(ge),console.warn(G+" retry for request message:",B);var we=M.pop(q,F);return clearTimeout(we),be(ge)},Z=function(){if(G<y)return fe(L);var ge=new Error("Request has timed out");ge.request=B,ge.retry=fe,se(ge)};var ae=se,te=be,le=fe,Ee=Z,q=S++,G=0;B=f.pack(B,q);var re={message:B,callback:se,responseMethods:m[I]||{}},j=s(L);return be(L)}return B=f.pack(B),L=L||this.getTransport(),L?L.send(B):B},this.decode=function(I,_){if(!I)throw new TypeError("Message is not defined");try{I=f.unpack(I)}catch(Z){return console.debug(Z,I)}var F=I.id,L=I.ack,W=I.method,B=I.params||{},q=B.from,G=B.dest;if(g.peerID!=null&&q==g.peerID)return;if(F==null&&L==null){var re=new u(W,B);return g.emit("request",re)?void 0:re}function j(){if(_=s(_)||g.getTransport(),_){var Z=k.get(F,q);if(Z)return _.send(Z.message)}var ge=F??L,we=new P(W,B,ge,q,_);if(!g.emit("request",we))return we}function ae(Z,ge,we){Z.callback(ge,we)}function te(Z){console.warn("Response already processed",I),clearTimeout(Z),O(L,q)}if(W){if(G==null||G==g.peerID){var fe=N.get(L,q);if(fe){var le=fe.responseMethods;return W==le.error?ae(fe,B):W==le.response?ae(fe,null,B):j()}var Ee=M.get(L,q);if(Ee)return te(Ee)}return j()}var se=I.error,be=I.result;if(!(se&&se.dest&&se.dest!=g.peerID)&&!(be&&be.dest&&be.dest!=g.peerID)){var fe=N.get(L,q);if(!fe){var Ee=M.get(L,q);return Ee?te(Ee):console.warn("No callback was defined for this message",I)}ae(fe,se,be)}}}e(l,n),l.RpcNotification=u,Q1=l;var c=qhe(),d=Khe();return l.clients=c,l.clients.transports=d,l.packers=r,Q1}const Xhe="OpenVidu",Yhe={freeice:"2.2.2",hark:"1.2.3",jsnlog:"2.30.0",mime:"3.0.0",platform:"1.3.6",semver:"7.3.8",uuid:"9.0.0","wolfy87-eventemitter":"5.2.9",events:"3.3.0",inherits:"2.0.4"},Jhe="OpenVidu Browser",Qhe={"@types/node":"18.11.9","@types/platform":"1.3.4",browserify:"17.0.0",grunt:"1.5.3","grunt-cli":"1.4.3","grunt-contrib-copy":"1.0.0","grunt-contrib-sass":"2.0.0","grunt-contrib-uglify":"5.2.2","grunt-contrib-watch":"1.1.0","grunt-postcss":"0.9.0","grunt-string-replace":"1.3.3","grunt-ts":"6.0.0-beta.22",terser:"5.15.1",tsify:"5.0.4",tslint:"6.1.3",typedoc:"0.23.21",typescript:"4.9.3"},Zhe="Apache-2.0",eme="lib/index.js",tme="openvidu-browser",nme={type:"git",url:"git://github.com/OpenVidu/openvidu"},rme={browserify:"VERSION=${VERSION:-dev}; mkdir -p static/js/ && cd src && ../node_modules/browserify/bin/cmd.js Main.ts -p [ tsify ] --exclude kurento-browser-extensions --debug -o ../static/js/openvidu-browser-$VERSION.js -v","browserify-prod":"VERSION=${VERSION:-dev}; mkdir -p static/js/ && cd src && ../node_modules/browserify/bin/cmd.js --debug Main.ts -p [ tsify ] --exclude kurento-browser-extensions | ../node_modules/terser/bin/terser --source-map content=inline --output ../static/js/openvidu-browser-$VERSION.min.js",build:"cd src/OpenVidu && ./../../node_modules/typescript/bin/tsc && cd ../.. && ./node_modules/typescript/bin/tsc --declaration src/index.ts --outDir ./lib --sourceMap --target es5 --lib dom,es5,es2015.promise,scripthost && rm -rf ./ts4.4 && mkdir -p ./ts4.4/lib && cp -r ./lib ./ts4.4 && find ./ts4.4/lib -type f ! -iname '*.d.ts' -delete && ./config/replace_for_ts44.sh",docs:"./generate-docs.sh"},ime="lib/index.d.ts",ome={"<4.4":{"*":["ts4.4/*"]}},ame="2.29.1",sme={author:Xhe,dependencies:Yhe,description:Jhe,devDependencies:Qhe,license:Zhe,main:eme,name:tme,repository:nme,scripts:rme,types:ime,typesVersions:ome,version:ame};var f_=ve&&ve.__awaiter||function(t,n,e,r){function i(o){return o instanceof e?o:new e(function(a){a(o)})}return new(e||(e=Promise))(function(o,a){function s(c){try{l(r.next(c))}catch(d){a(d)}}function u(c){try{l(r.throw(c))}catch(d){a(d)}}function l(c){c.done?o(c.value):i(c.value).then(s,u)}l((r=r.apply(t,n||[])).next())})},p_=ve&&ve.__generator||function(t,n){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,l[0]&&(e=0)),e;)try{if(r=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return e.label++,{value:l[1],done:!1};case 5:e.label++,i=l[1],l=[0];continue;case 7:l=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){e=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){e.label=l[1];break}if(l[0]===6&&e.label<o[1]){e.label=o[1],o=l;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(l);break}o[2]&&e.ops.pop(),e.trys.pop();continue}l=n.call(t,e)}catch(c){l=[6,c],i=0}finally{r=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};Object.defineProperty(Uy,"__esModule",{value:!0});Uy.OpenVidu=void 0;var ume=Fp,lme=hR(),h_=s0(),cme=Wc,nl=ha,mt=Fu,Z1=jp,dme=An,fme=Yi,pme=oj,m_=Hc,hme=lR,mme=cR,vme=bj(),gme=sme,Lt=dme.OpenViduLogger.getInstance(),st,yme=function(){function t(){var n=this;this.masterNodeHasCrashed=!1,this.publishers=[],this.secret="",this.recorder=!1,this.stt=!1,this.life=-1,this.advancedConfiguration={},this.webrtcStatsInterval=-1,this.sendBrowserLogs=hme.OpenViduLoggerConfiguration.disabled,this.isAtLeastPro=!1,this.isEnterprise=!1,this.ee=new mme,st=fme.PlatformUtils.getInstance(),this.libraryVersion=gme.version,Lt.info("OpenVidu initialized"),Lt.info("Platform detected: "+st.getDescription()),Lt.info("openvidu-browser version: "+this.libraryVersion),(st.isMobileDevice()||st.isReactNative())&&this.onOrientationChanged(function(){n.publishers.forEach(function(e){e.stream.isLocalStreamPublished&&e.stream&&e.stream.hasVideo&&n.sendNewVideoDimensionsIfRequired(e,"deviceRotated",75,10)})})}return t.prototype.initSession=function(){return this.session=new h_.Session(this),this.session},t.prototype.initPublisher=function(n,e,r){var i;e&&typeof e!="function"?(i=e,i={audioSource:typeof i.audioSource<"u"?i.audioSource:void 0,frameRate:typeof MediaStreamTrack<"u"&&i.videoSource instanceof MediaStreamTrack?void 0:typeof i.frameRate<"u"?i.frameRate:void 0,insertMode:typeof i.insertMode<"u"?typeof i.insertMode=="string"?Z1.VideoInsertMode[i.insertMode]:i.insertMode:Z1.VideoInsertMode.APPEND,mirror:typeof i.mirror<"u"?i.mirror:!0,publishAudio:typeof i.publishAudio<"u"?i.publishAudio:!0,publishVideo:typeof i.publishVideo<"u"?i.publishVideo:!0,resolution:typeof MediaStreamTrack<"u"&&i.videoSource instanceof MediaStreamTrack?void 0:typeof i.resolution<"u"?i.resolution:"640x480",videoSource:typeof i.videoSource<"u"?i.videoSource:void 0,videoSimulcast:i.videoSimulcast,filter:i.filter}):i={insertMode:Z1.VideoInsertMode.APPEND,mirror:!0,publishAudio:!0,publishVideo:!0,resolution:"640x480"};var o=new lme.Publisher(n,i,this),a;return e&&typeof e=="function"?a=e:r&&(a=r),o.initialize().then(function(){a!==void 0&&a(void 0),o.emitEvent("accessAllowed",[])}).catch(function(s){a!==void 0&&a(s),o.emitEvent("accessDenied",[s])}),this.publishers.push(o),o},t.prototype.initPublisherAsync=function(n,e){var r=this;return new Promise(function(i,o){var a,s=function(u){return u?o(u):i(a)};e?a=r.initPublisher(n,e,s):a=r.initPublisher(n,s)})},t.prototype.initLocalRecorder=function(n){return new ume.LocalRecorder(n)},t.prototype.checkSystemRequirements=function(){return st.isIPhoneOrIPad()?st.isIOSWithSafari()||st.isChromeMobileBrowser()||st.isFirefoxMobileBrowser()||st.isOperaMobileBrowser()||st.isEdgeMobileBrowser()||st.isIonicIos():st.isChromeBrowser()||st.isChromeMobileBrowser()||st.isFirefoxBrowser()||st.isFirefoxMobileBrowser()||st.isOperaBrowser()||st.isOperaMobileBrowser()||st.isEdgeBrowser()||st.isEdgeMobileBrowser()||st.isSamsungBrowser()||st.isSafariBrowser()||st.isAndroidBrowser()||st.isElectron()||st.isNodeJs()||st.isMotorolaEdgeDevice()},t.prototype.checkScreenSharingCapabilities=function(){return st.canScreenShare()},t.prototype.getDevices=function(){return new Promise(function(n,e){navigator.mediaDevices.enumerateDevices().then(function(r){var i,o=[];if(st.isIonicAndroid()&&typeof cordova<"u"&&(!((i=cordova==null?void 0:cordova.plugins)===null||i===void 0)&&i.EnumerateDevicesPlugin))cordova.plugins.EnumerateDevicesPlugin.getEnumerateDevices().then(function(a){var s=[],u=[],l=[];return s=a.filter(function(c){return c.kind==="audioinput"}),u=r.filter(function(c){return c.kind==="videoinput"}),l=r.filter(function(c){return c.kind==="audioinput"}),u.forEach(function(c,d){if(c.label)o.push({kind:c.kind,deviceId:c.deviceId,label:c.label});else{var f="";d===0?f="Front Camera":d===1?f="Back Camera":f="Unknown Camera",o.push({kind:c.kind,deviceId:c.deviceId,label:f})}}),l.forEach(function(c,d){if(c.label)o.push({kind:c.kind,deviceId:c.deviceId,label:c.label});else{var f="";switch(d){case 0:f="Default";break;case 1:var p=s.filter(function(g){return g.label.includes("Built")})[0];f=p?p.label:"Built-in Microphone";break;case 2:var h=s.filter(function(g){return g.label.includes("Wired")})[0];h?f=h.label:f="Headset earpiece";break;case 3:var v=s.filter(function(g){return g.label.includes("Bluetooth")})[0];f=v?v.label:"Wireless";break;default:f="Unknown Microphone";break}o.push({kind:c.kind,deviceId:c.deviceId,label:f})}}),n(o)});else return r.forEach(function(a){(a.kind==="audioinput"||a.kind==="videoinput")&&o.push({kind:a.kind,deviceId:a.deviceId,label:a.label})}),n(o)}).catch(function(r){return Lt.error("Error getting devices",r),e(r)})})},t.prototype.getUserMedia=function(n){var e,r;return f_(this,void 0,void 0,function(){var i,o,a,l,s,d,f,u,l,c,d,f,p,h=this;return p_(this,function(v){switch(v.label){case 0:i=function(g,m){return f_(h,void 0,void 0,function(){var y,b,w,x;return p_(this,function(C){switch(C.label){case 0:y=m.audio===void 0?!0:m.audio,b={audio:y,video:!1},C.label=1;case 1:return C.trys.push([1,3,,4]),[4,navigator.mediaDevices.getUserMedia(b)];case 2:return w=C.sent(),g.addTrack(w.getAudioTracks()[0]),[2,g];case 3:throw x=C.sent(),g.getAudioTracks().forEach(function(E){E.stop()}),g.getVideoTracks().forEach(function(E){E.stop()}),this.generateAudioDeviceError(x,b);case 4:return[2]}})})},v.label=1;case 1:return v.trys.push([1,20,,21]),[4,this.generateMediaConstraints(n)];case 2:return o=v.sent(),o.videoTrack&&o.audioTrack||o.audioTrack&&((e=o.constraints)===null||e===void 0?void 0:e.video)===!1||o.videoTrack&&((r=o.constraints)===null||r===void 0?void 0:r.audio)===!1?[2,this.addAlreadyProvidedTracks(o,new MediaStream)]:[3,3];case 3:if(o.videoTrack&&delete o.constraints.video,o.audioTrack&&delete o.constraints.audio,a=!1,typeof n.videoSource!="string")return[3,12];if(!(n.videoSource==="screen"||n.videoSource==="window"||st.isElectron()&&n.videoSource.startsWith("screen:")))return[3,12];if(a=!o.audioTrack&&n.audioSource!==null&&n.audioSource!==!1,!(navigator.mediaDevices.getDisplayMedia&&!st.isElectron()))return[3,11];v.label=4;case 4:return v.trys.push([4,9,,10]),[4,navigator.mediaDevices.getDisplayMedia({video:!0,audio:n.audioSource==="screen"})];case 5:return l=v.sent(),this.addAlreadyProvidedTracks(o,l),a?[4,i(l,o.constraints)]:[3,7];case 6:return[2,v.sent()];case 7:return[2,l];case 8:return[3,10];case 9:throw s=v.sent(),d=mt.OpenViduErrorName.SCREEN_CAPTURE_DENIED,f=s.toString(),new mt.OpenViduError(d,f);case 10:return[3,11];case 11:return[3,12];case 12:u=a?{video:o.constraints.video}:o.constraints,v.label=13;case 13:return v.trys.push([13,18,,19]),[4,navigator.mediaDevices.getUserMedia(u)];case 14:return l=v.sent(),this.addAlreadyProvidedTracks(o,l),a?[4,i(l,o.constraints)]:[3,16];case 15:return[2,v.sent()];case 16:return[2,l];case 17:return[3,19];case 18:throw c=v.sent(),d=void 0,f=c.toString(),n.videoSource!=="screen"?d=mt.OpenViduErrorName.DEVICE_ACCESS_DENIED:d=mt.OpenViduErrorName.SCREEN_CAPTURE_DENIED,new mt.OpenViduError(d,f);case 19:return[3,21];case 20:throw p=v.sent(),p;case 21:return[2]}})})},t.prototype.enableProdMode=function(){Lt.enableProdMode()},t.prototype.setAdvancedConfiguration=function(n){this.advancedConfiguration=n},t.prototype.onOrientationChanged=function(n){globalThis.addEventListener("orientationchange",n)},t.prototype.sendNewVideoDimensionsIfRequired=function(n,e,r,i){var o=this,a,s,u,l,c=0,d=((s=(a=n==null?void 0:n.stream)===null||a===void 0?void 0:a.videoDimensions)===null||s===void 0?void 0:s.width)||0,f=((l=(u=n==null?void 0:n.stream)===null||u===void 0?void 0:u.videoDimensions)===null||l===void 0?void 0:l.height)||0,p=setInterval(function(){c++,c>i&&clearTimeout(p),n.getVideoDimensions().then(function(h){(h.width!==d||h.height!==f)&&(clearTimeout(p),o.sendVideoDimensionsChangedEvent(n,e,d,f,h.width,h.height))})},r)},t.prototype.sendVideoDimensionsChangedEvent=function(n,e,r,i,o,a){var s=this;n.stream.videoDimensions={width:o||0,height:a||0},this.sendRequest("streamPropertyChanged",{streamId:n.stream.streamId,property:"videoDimensions",newValue:JSON.stringify(n.stream.videoDimensions),reason:e},function(u,l){u?Lt.error("Error sending 'streamPropertyChanged' event",u):(s.session.emitEvent("streamPropertyChanged",[new nl.StreamPropertyChangedEvent(s.session,n.stream,"videoDimensions",n.stream.videoDimensions,{width:r,height:i},e)]),n.emitEvent("streamPropertyChanged",[new nl.StreamPropertyChangedEvent(n,n.stream,"videoDimensions",n.stream.videoDimensions,{width:r,height:i},e)]),s.session.sendVideoData(n))})},t.prototype.sendTrackChangedEvent=function(n,e,r,i){var o=this,a={label:e},s={label:r},u="trackReplaced";n.stream.isLocalStreamPublished?this.sendRequest("streamPropertyChanged",{streamId:n.stream.streamId,property:i,newValue:s,reason:u},function(l,c){l?Lt.error("Error sending 'streamPropertyChanged' event",l):(o.session.emitEvent("streamPropertyChanged",[new nl.StreamPropertyChangedEvent(o.session,n.stream,i,s,a,u)]),n.emitEvent("streamPropertyChanged",[new nl.StreamPropertyChangedEvent(n,n.stream,i,s,a,u)]))}):(this.session.emitEvent("streamPropertyChanged",[new nl.StreamPropertyChangedEvent(this.session,n.stream,i,s,a,u)]),n.emitEvent("streamPropertyChanged",[new nl.StreamPropertyChangedEvent(n,n.stream,i,s,a,u)]))},t.prototype.generateMediaConstraints=function(n){var e=this;return new Promise(function(r,i){var o={audioTrack:void 0,videoTrack:void 0,constraints:{audio:void 0,video:void 0}},a=n.audioSource,s=n.videoSource;if((a===null||a===!1)&&(o.constraints.audio=!1),(s===null||s===!1)&&(o.constraints.video=!1),o.constraints.audio===!1&&o.constraints.video===!1)return i(new mt.OpenViduError(mt.OpenViduErrorName.NO_INPUT_SOURCE_SET,"Properties 'audioSource' and 'videoSource' cannot be set to false or null at the same time"));if(typeof MediaStreamTrack<"u"&&a instanceof MediaStreamTrack&&(o.audioTrack=a),typeof MediaStreamTrack<"u"&&s instanceof MediaStreamTrack&&(o.videoTrack=s),a===void 0&&(o.constraints.audio=!0),s===void 0&&(o.constraints.video={width:{ideal:640},height:{ideal:480}}),s!==null&&s!==!1){if(n.resolution){var u=n.resolution.toLowerCase().split("x"),l=Number(u[0]),c=Number(u[1]);o.constraints.video={width:{ideal:l},height:{ideal:c}}}n.frameRate&&(o.constraints.video.frameRate={ideal:n.frameRate})}return e.configureDeviceIdOrScreensharing(o,n,r,i),r(o)})},t.prototype.startWs=function(n){var e={heartbeat:5e3,ws:{uri:this.wsUri+"?sessionId="+this.session.sessionId,onconnected:n,ondisconnect:this.disconnectCallback.bind(this),onreconnecting:this.reconnectingCallback.bind(this),onreconnected:this.reconnectedCallback.bind(this),ismasternodecrashed:this.isMasterNodeCrashed.bind(this)},rpc:{requestTimeout:1e4,heartbeatRequestTimeout:5e3,participantJoined:this.session.onParticipantJoined.bind(this.session),participantPublished:this.session.onParticipantPublished.bind(this.session),participantUnpublished:this.session.onParticipantUnpublished.bind(this.session),participantLeft:this.session.onParticipantLeft.bind(this.session),participantEvicted:this.session.onParticipantEvicted.bind(this.session),recordingStarted:this.session.onRecordingStarted.bind(this.session),recordingStopped:this.session.onRecordingStopped.bind(this.session),broadcastStarted:this.session.onBroadcastStarted.bind(this.session),broadcastStopped:this.session.onBroadcastStopped.bind(this.session),sendMessage:this.session.onNewMessage.bind(this.session),streamPropertyChanged:this.session.onStreamPropertyChanged.bind(this.session),connectionPropertyChanged:this.session.onConnectionPropertyChanged.bind(this.session),networkQualityLevelChanged:this.session.onNetworkQualityLevelChangedChanged.bind(this.session),filterEventDispatched:this.session.onFilterEventDispatched.bind(this.session),iceCandidate:this.session.recvIceCandidate.bind(this.session),mediaError:this.session.onMediaError.bind(this.session),masterNodeCrashedNotification:this.onMasterNodeCrashedNotification.bind(this),forciblyReconnectSubscriber:this.session.onForciblyReconnectSubscriber.bind(this.session),speechToTextMessage:this.session.onSpeechToTextMessage.bind(this.session),speechToTextDisconnected:this.session.onSpeechToTextDisconnected.bind(this.session)}};this.jsonRpcClient=new vme.clients.JsonRpcClient(e)},t.prototype.onMasterNodeCrashedNotification=function(n){console.error("Master Node has crashed"),this.masterNodeHasCrashed=!0,this.session.onLostConnection("nodeCrashed"),this.jsonRpcClient.close(4103,"Master Node has crashed")},t.prototype.getWsReadyState=function(){return this.jsonRpcClient.getReadyState()},t.prototype.closeWs=function(){this.jsonRpcClient.close(4102,"Connection closed by client")},t.prototype.sendRequest=function(n,e,r){var i;e&&e instanceof Function&&(r=e,e={}),Lt.debug('Sending request: {method:"'+n+'", params: '+JSON.stringify(e)+"}"),(i=this.jsonRpcClient)===null||i===void 0||i.send(n,e,r)},t.prototype.getWsUri=function(){return this.wsUri},t.prototype.getSecret=function(){return this.secret},t.prototype.getRecorder=function(){return this.recorder},t.prototype.getStt=function(){return this.stt},t.prototype.generateAudioDeviceError=function(n,e){n.name==="Error"&&(n.name=n.constructor.name);var r,i;switch(n.name.toLowerCase()){case"notfounderror":return r=mt.OpenViduErrorName.INPUT_AUDIO_DEVICE_NOT_FOUND,i=n.toString(),new mt.OpenViduError(r,i);case"notallowederror":return r=mt.OpenViduErrorName.DEVICE_ACCESS_DENIED,i=n.toString(),new mt.OpenViduError(r,i);case"overconstrainederror":return n.constraint.toLowerCase()==="deviceid"?(r=mt.OpenViduErrorName.INPUT_AUDIO_DEVICE_NOT_FOUND,i="Audio input device with deviceId '"+e.audio.deviceId.exact+"' not found"):(r=mt.OpenViduErrorName.PUBLISHER_PROPERTIES_ERROR,i="Audio input device doesn't support the value passed for constraint '"+n.constraint+"'"),new mt.OpenViduError(r,i);case"notreadableerror":return r=mt.OpenViduErrorName.DEVICE_ALREADY_IN_USE,i=n.toString(),new mt.OpenViduError(r,i);default:return new mt.OpenViduError(mt.OpenViduErrorName.INPUT_AUDIO_DEVICE_GENERIC_ERROR,n.toString())}},t.prototype.addAlreadyProvidedTracks=function(n,e,r){return n.videoTrack&&(e.addTrack(n.videoTrack),r&&(n.constraints.video?r.lastVideoTrackConstraints=n.constraints.video:r.lastVideoTrackConstraints=n.videoTrack.getConstraints())),n.audioTrack&&e.addTrack(n.audioTrack),e},t.prototype.configureDeviceIdOrScreensharing=function(n,e,r,i){var o=this,a=e.audioSource,s=e.videoSource;if(typeof a=="string"&&a!=="screen"&&(n.constraints.audio={deviceId:{exact:a}}),typeof s=="string")if(!this.isScreenShare(s))this.setVideoSource(n,s),a==="screen"&&(Lt.warn('Parameter "audioSource" is set to "screen", which means rquesting audio from screen sharing source. But "videoSource" is not set to "screen". No audio source will be requested'),n.constraints.audio=!1);else if(this.checkScreenSharingCapabilities())if(st.isElectron()){var l="screen:",c=s,d=c.substr(c.indexOf(l)+l.length);return n.constraints.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:d}},r(n)}else if(this.advancedConfiguration.screenShareChromeExtension&&!(st.isFirefoxBrowser()||st.isFirefoxMobileBrowser())&&!navigator.mediaDevices.getDisplayMedia){m_.getScreenConstraints(function(p,h){if(p||h.mandatory&&h.mandatory.chromeMediaSource==="screen")if(p==="permission-denied"||p==="PermissionDeniedError"){var v=new mt.OpenViduError(mt.OpenViduErrorName.SCREEN_CAPTURE_DENIED,"You must allow access to one window of your desktop");return Lt.error(v),i(v)}else{var g=o.advancedConfiguration.screenShareChromeExtension.split("/").pop().trim();m_.getChromeExtensionStatus(g,function(m){if(m==="installed-disabled"){var y=new mt.OpenViduError(mt.OpenViduErrorName.SCREEN_EXTENSION_DISABLED,"You must enable the screen extension");return Lt.error(y),i(y)}if(m==="not-installed"){var b=new mt.OpenViduError(mt.OpenViduErrorName.SCREEN_EXTENSION_NOT_INSTALLED,o.advancedConfiguration.screenShareChromeExtension);return Lt.error(b),i(b)}});return}else return n.constraints.video=h,r(n)});return}else{if(navigator.mediaDevices.getDisplayMedia)return r(n);var f=st.isFirefoxBrowser()||st.isFirefoxMobileBrowser()?e.videoSource:void 0;pme.getScreenId(f,function(p,h,v){if(p)if(p==="not-installed"){var g=o.advancedConfiguration.screenShareChromeExtension?o.advancedConfiguration.screenShareChromeExtension:"https://chrome.google.com/webstore/detail/openvidu-screensharing/lfcgfepafnobdloecchnfaclibenjold",m=new mt.OpenViduError(mt.OpenViduErrorName.SCREEN_EXTENSION_NOT_INSTALLED,g);return Lt.error(m),i(m)}else if(p==="installed-disabled"){var m=new mt.OpenViduError(mt.OpenViduErrorName.SCREEN_EXTENSION_DISABLED,"You must enable the screen extension");return Lt.error(m),i(m)}else if(p==="permission-denied"){var m=new mt.OpenViduError(mt.OpenViduErrorName.SCREEN_CAPTURE_DENIED,"You must allow access to one window of your desktop");return Lt.error(m),i(m)}else{var m=new mt.OpenViduError(mt.OpenViduErrorName.GENERIC_ERROR,"Unknown error when accessing screen share");return Lt.error(m),Lt.error(p),i(m)}else return n.constraints.video=v.video,r(n)});return}else{var u=new mt.OpenViduError(mt.OpenViduErrorName.SCREEN_SHARING_NOT_SUPPORTED,"You can only screen share in desktop Chrome, Firefox, Opera, Safari (>=13.0), Edge (>= 80) or Electron. Detected client: "+st.getName()+" "+st.getVersion());return Lt.error(u),i(u)}},t.prototype.setVideoSource=function(n,e){n.constraints.video||(n.constraints.video={}),n.constraints.video.deviceId={exact:e}},t.prototype.disconnectCallback=function(){Lt.warn("Websocket connection lost"),this.isRoomAvailable()?this.session.onLostConnection("networkDisconnect"):alert("Connection error. Please reload page.")},t.prototype.reconnectingCallback=function(){Lt.warn("Websocket connection lost (reconnecting)"),this.isRoomAvailable()?this.session.emitEvent("reconnecting",[]):alert("Connection error. Please reload page.")},t.prototype.reconnectWebsocketThroughRpcConnectMethod=function(n){var e=this;this.sendRequest("connect",{sessionId:n,reconnect:!0},function(r,i){if(r)if(e.isMasterNodeCrashed())Lt.warn("Master Node has crashed!");else{Lt.error(r);var o=function(s,u){Lt.warn(u),e.session.onLostConnection(s),e.jsonRpcClient.close(4101,"Reconnection fault: "+u)},a=function(){e.life===-1?o("networkDisconnect","WS successfully reconnected but the user was already evicted due to timeout"):e.sendRequest("sessionStatus",{sessionId:e.session.sessionId},function(s,u){s!=null?console.error("Error checking session status",s):e.life===u.life?o("networkDisconnect","WS successfully reconnected but the user was already evicted due to timeout"):o("nodeCrashed","WS successfully reconnected to OpenVidu Server but your Master Node crashed")})};r.code===40007&&r.message==="reconnection error"&&console.error("Invalid RPC sessionId. Client network disconnection or Master Node crash"),a()}else e.jsonRpcClient.resetPing(),e.session.onRecoveredConnection()})},t.prototype.reconnectedCallback=function(){if(Lt.warn("Websocket reconnected"),this.isRoomAvailable())if(this.session.connection)this.reconnectWebsocketThroughRpcConnectMethod(this.session.connection.rpcSessionId);else{Lt.warn("There was no previous connection when running reconnection callback");var n=new cme.SessionDisconnectedEvent(this.session,"networkDisconnect");this.session.ee.emitEvent("sessionDisconnected",[n]),n.callDefaultBehavior()}else alert("Connection error. Please reload page.")},t.prototype.isMasterNodeCrashed=function(){return this.masterNodeHasCrashed},t.prototype.isRoomAvailable=function(){return this.session!==void 0&&this.session instanceof h_.Session?!0:(Lt.warn("Session instance not found"),!1)},t.prototype.isScreenShare=function(n){return n==="screen"||n==="window"||st.isElectron()&&n.startsWith("screen:")},t}();Uy.OpenVidu=yme;var wj={};Object.defineProperty(wj,"__esModule",{value:!0});(function(t){var n=ve&&ve.__createBinding||(Object.create?function(I,_,F,L){L===void 0&&(L=F);var W=Object.getOwnPropertyDescriptor(_,F);(!W||("get"in W?!_.__esModule:W.writable||W.configurable))&&(W={enumerable:!0,get:function(){return _[F]}}),Object.defineProperty(I,L,W)}:function(I,_,F,L){L===void 0&&(L=F),I[L]=_[F]}),e=ve&&ve.__exportStar||function(I,_){for(var F in I)F!=="default"&&!Object.prototype.hasOwnProperty.call(_,F)&&n(_,I,F)};Object.defineProperty(t,"__esModule",{value:!0}),t.EventDispatcher=t.ExceptionEventName=t.ExceptionEvent=t.SpeechToTextEvent=t.NetworkQualityLevelChangedEvent=t.FilterEvent=t.ConnectionPropertyChangedEvent=t.StreamPropertyChangedEvent=t.VideoElementEvent=t.StreamManagerEvent=t.StreamEvent=t.SignalEvent=t.SessionDisconnectedEvent=t.RecordingEvent=t.PublisherSpeakingEvent=t.ConnectionEvent=t.Event=t.VideoInsertMode=t.TypeOfVideo=t.OpenViduErrorName=t.OpenViduError=t.LocalRecorderState=t.Filter=t.LocalRecorder=t.Connection=t.Stream=t.StreamManager=t.Subscriber=t.Publisher=t.Session=t.OpenVidu=void 0;var r=sR,i=Uy;Object.defineProperty(t,"OpenVidu",{enumerable:!0,get:function(){return i.OpenVidu}});var o=s0();Object.defineProperty(t,"Session",{enumerable:!0,get:function(){return o.Session}});var a=hR();Object.defineProperty(t,"Publisher",{enumerable:!0,get:function(){return a.Publisher}});var s=jc;Object.defineProperty(t,"Subscriber",{enumerable:!0,get:function(){return s.Subscriber}});var u=Vc;Object.defineProperty(t,"StreamManager",{enumerable:!0,get:function(){return u.StreamManager}});var l=zc;Object.defineProperty(t,"Stream",{enumerable:!0,get:function(){return l.Stream}});var c=zp;Object.defineProperty(t,"Connection",{enumerable:!0,get:function(){return c.Connection}});var d=Fp;Object.defineProperty(t,"LocalRecorder",{enumerable:!0,get:function(){return d.LocalRecorder}});var f=Bc;Object.defineProperty(t,"Filter",{enumerable:!0,get:function(){return f.Filter}});var p=uR;Object.defineProperty(t,"LocalRecorderState",{enumerable:!0,get:function(){return p.LocalRecorderState}});var h=Fu;Object.defineProperty(t,"OpenViduError",{enumerable:!0,get:function(){return h.OpenViduError}}),Object.defineProperty(t,"OpenViduErrorName",{enumerable:!0,get:function(){return h.OpenViduErrorName}});var v=a0;Object.defineProperty(t,"TypeOfVideo",{enumerable:!0,get:function(){return v.TypeOfVideo}});var g=jp;Object.defineProperty(t,"VideoInsertMode",{enumerable:!0,get:function(){return g.VideoInsertMode}});var m=$n;Object.defineProperty(t,"Event",{enumerable:!0,get:function(){return m.Event}});var y=Up;Object.defineProperty(t,"ConnectionEvent",{enumerable:!0,get:function(){return y.ConnectionEvent}});var b=$p;Object.defineProperty(t,"PublisherSpeakingEvent",{enumerable:!0,get:function(){return b.PublisherSpeakingEvent}});var w=Hp;Object.defineProperty(t,"RecordingEvent",{enumerable:!0,get:function(){return w.RecordingEvent}});var x=Wc;Object.defineProperty(t,"SessionDisconnectedEvent",{enumerable:!0,get:function(){return x.SessionDisconnectedEvent}});var C=Gp;Object.defineProperty(t,"SignalEvent",{enumerable:!0,get:function(){return C.SignalEvent}});var E=pR();Object.defineProperty(t,"StreamEvent",{enumerable:!0,get:function(){return E.StreamEvent}});var S=Uc;Object.defineProperty(t,"StreamManagerEvent",{enumerable:!0,get:function(){return S.StreamManagerEvent}});var N=Bp;Object.defineProperty(t,"VideoElementEvent",{enumerable:!0,get:function(){return N.VideoElementEvent}});var k=ha;Object.defineProperty(t,"StreamPropertyChangedEvent",{enumerable:!0,get:function(){return k.StreamPropertyChangedEvent}});var M=Kp;Object.defineProperty(t,"ConnectionPropertyChangedEvent",{enumerable:!0,get:function(){return M.ConnectionPropertyChangedEvent}});var D=Wp;Object.defineProperty(t,"FilterEvent",{enumerable:!0,get:function(){return D.FilterEvent}});var R=Xp;Object.defineProperty(t,"NetworkQualityLevelChangedEvent",{enumerable:!0,get:function(){return R.NetworkQualityLevelChangedEvent}});var O=qp;Object.defineProperty(t,"SpeechToTextEvent",{enumerable:!0,get:function(){return O.SpeechToTextEvent}});var P=zu;Object.defineProperty(t,"ExceptionEvent",{enumerable:!0,get:function(){return P.ExceptionEvent}}),Object.defineProperty(t,"ExceptionEventName",{enumerable:!0,get:function(){return P.ExceptionEventName}});var A=$c;Object.defineProperty(t,"EventDispatcher",{enumerable:!0,get:function(){return A.EventDispatcher}}),e(wj,t),r.JL.setOptions({enabled:!1})})(GB);class bme{constructor(){dr(this,"connectionId");dr(this,"audioActive");dr(this,"videoActive");dr(this,"screenShareActive");dr(this,"nickname");dr(this,"streamManager");dr(this,"type");this.connectionId="",this.audioActive=!0,this.videoActive=!0,this.screenShareActive=!1,this.nickname="",this.streamManager=null,this.type="local"}isAudioActive(){return this.audioActive}isVideoActive(){return this.videoActive}isScreenShareActive(){return this.screenShareActive}getConnectionId(){return this.connectionId}getNickname(){return this.nickname}getStreamManager(){return this.streamManager}isLocal(){return this.type==="local"}isRemote(){return!this.isLocal()}setAudioActive(n){this.audioActive=n}setVideoActive(n){this.videoActive=n}setScreenShareActive(n){this.screenShareActive=n}setStreamManager(n){this.streamManager=n}setConnectionId(n){this.connectionId=n}setNickname(n){this.nickname=n}setType(n){n==="local"|n==="remote"&&(this.type=n)}}class wme{constructor(){dr(this,"layoutContainer");dr(this,"opts")}fixAspectRatio(n,e){const r=n.querySelector(".OT_root");if(r){const i=r.style.width;r.style.width=e+"px",r.style.width=i||""}}positionElement(n,e,r,i,o,a){const s={left:e+"px",top:r+"px",width:i+"px",height:o+"px"};this.fixAspectRatio(n,i),a&&$?($(n).stop(),$(n).animate(s,a.duration||200,a.easing||"swing",()=>{this.fixAspectRatio(n,i),a.complete&&a.complete.call(this)})):$(n).css(s),this.fixAspectRatio(n,i)}getVideoRatio(n){if(!n)return 3/4;const e=n.querySelector("video");return e&&e.videoHeight&&e.videoWidth?e.videoHeight/e.videoWidth:n.videoHeight&&n.videoWidth?n.videoHeight/n.videoWidth:3/4}getCSSNumber(n,e){const r=$(n).css(e);return r?parseInt(r,10):0}cheapUUID(){return(Math.random()*1e8).toFixed(0)}getHeight(n){const e=$(n).css("height");return e?parseInt(e,10):0}getWidth(n){const e=$(n).css("width");return e?parseInt(e,10):0}getBestDimensions(n,e,r,i,o,a){let s,u,l,c,d,f,p;for(let h=1;h<=r;h++){const v=h,g=Math.ceil(r/v);f=Math.floor(o/g),d=Math.floor(i/v),p=f/d,p>e?(p=e,f=d*p):p<n&&(p=n,d=f/p);const m=d*f*r;(s===void 0||m>s)&&(s=m,a=f,c=d,u=v,l=g)}return{maxArea:s,targetCols:u,targetRows:l,targetHeight:a,targetWidth:c,ratio:a/c}}arrange(n,e,r,i,o,a,s,u,l){let c;const d=n.length;let f;if(!a)f=this.getBestDimensions(s,u,d,e,r,c);else{const b=this.getVideoRatio(n.length>0?n[0]:null);f=this.getBestDimensions(b,b,d,e,r,c)}let p=0,h=0;const v=[];let g;for(let b=0;b<n.length;b++){b%f.targetCols===0&&(g={children:[],width:0,height:0},v.push(g));const w=n[b];g.children.push(w);let x=f.targetWidth;c=f.targetHeight,a&&(x=c/this.getVideoRatio(w)),g.width+=x,g.height=c}let m=0,y=0;for(let b=0;b<v.length;b++)g=v[b],g.width>e?(g.height=Math.floor(g.height*(e/g.width)),g.width=e):g.width<e&&(y+=1),m+=g.height;if(m<r&&y>0){let b=r-m;m=0;for(let w=0;w<v.length;w++){if(g=v[w],g.width<e){let x=b/y;x/g.height>(e-g.width)/g.width&&(x=Math.floor((e-g.width)/g.width*g.height)),g.width+=Math.floor(x/g.height*g.width),g.height+=x,b-=x,y-=1}m+=g.height}}h=(r-m)/2;for(let b=0;b<v.length;b++){g=v[b],p=(e-g.width)/2;for(let x=0;x<g.children.length;x++){const C=g.children[x];let E=f.targetWidth;c=g.height,a&&(E=Math.floor(c/this.getVideoRatio(C))),C.style.position="absolute";const S=E-this.getCSSNumber(C,"paddingLeft")-this.getCSSNumber(C,"paddingRight")-this.getCSSNumber(C,"marginLeft")-this.getCSSNumber(C,"marginRight")-this.getCSSNumber(C,"borderLeft")-this.getCSSNumber(C,"borderRight"),N=c-this.getCSSNumber(C,"paddingTop")-this.getCSSNumber(C,"paddingBottom")-this.getCSSNumber(C,"marginTop")-this.getCSSNumber(C,"marginBottom")-this.getCSSNumber(C,"borderTop")-this.getCSSNumber(C,"borderBottom");this.positionElement(C,p+i,h+o,S,N,l),p+=E}h+=c}}filterDisplayNone(n){return n.style.display!=="none"}updateLayout(){if(this.layoutContainer.style.display==="none")return;let n=this.layoutContainer.id;n||(n="OT_"+this.cheapUUID(),this.layoutContainer.id=n);const e=this.getHeight(this.layoutContainer)-this.getCSSNumber(this.layoutContainer,"borderTop")-this.getCSSNumber(this.layoutContainer,"borderBottom"),r=this.getWidth(this.layoutContainer)-this.getCSSNumber(this.layoutContainer,"borderLeft")-this.getCSSNumber(this.layoutContainer,"borderRight"),i=e/r;let o=0,a=0,s=0,u=0;const l=Array.prototype.filter.call(this.layoutContainer.querySelectorAll("#"+n+">."+this.opts.bigClass),this.filterDisplayNone),c=Array.prototype.filter.call(this.layoutContainer.querySelectorAll("#"+n+">*:not(."+this.opts.bigClass+")"),this.filterDisplayNone);if(l.length>0&&c.length>0){let d,f;i>this.getVideoRatio(l[0])?(d=r,f=Math.floor(e*this.opts.bigPercentage),a=f,s=e-a):(f=e,d=Math.floor(r*this.opts.bigPercentage),o=d,u=r-o),this.opts.bigFirst?(this.arrange(l,d,f,0,0,this.opts.bigFixedRatio,this.opts.bigMinRatio,this.opts.bigMaxRatio,this.opts.animate),this.arrange(c,r-o,e-a,o,a,this.opts.fixedRatio,this.opts.minRatio,this.opts.maxRatio,this.opts.animate)):(this.arrange(c,r-o,e-a,0,0,this.opts.fixedRatio,this.opts.minRatio,this.opts.maxRatio,this.opts.animate),this.arrange(l,d,f,u,s,this.opts.bigFixedRatio,this.opts.bigMinRatio,this.opts.bigMaxRatio,this.opts.animate))}else l.length>0&&c.length===0?this.arrange(l,r,e,0,0,this.opts.bigFixedRatio,this.opts.bigMinRatio,this.opts.bigMaxRatio,this.opts.animate):this.arrange(c,r-o,e-a,o,a,this.opts.fixedRatio,this.opts.minRatio,this.opts.maxRatio,this.opts.animate)}initLayoutContainer(n,e){this.opts={maxRatio:e.maxRatio!=null?e.maxRatio:3/2,minRatio:e.minRatio!=null?e.minRatio:9/16,fixedRatio:e.fixedRatio!=null?e.fixedRatio:!1,animate:e.animate!=null?e.animate:!1,bigClass:e.bigClass!=null?e.bigClass:"OT_big",bigPercentage:e.bigPercentage!=null?e.bigPercentage:.8,bigFixedRatio:e.bigFixedRatio!=null?e.bigFixedRatio:!1,bigMaxRatio:e.bigMaxRatio!=null?e.bigMaxRatio:3/2,bigMinRatio:e.bigMinRatio!=null?e.bigMinRatio:9/16,bigFirst:e.bigFirst!=null?e.bigFirst:!0},this.layoutContainer=typeof n=="string"?$(n):n}setLayoutOptions(n){this.opts=n}}class xme extends H.Component{constructor(n){super(n),this.videoRef=_e.createRef(),console.log(n)}componentDidUpdate(n){n&&this.videoRef&&this.props.streamManager.addVideoElement(this.videoRef.current)}componentDidMount(){this.props&&this.videoRef&&this.props.streamManager.addVideoElement(this.videoRef.current)}render(){return T.jsx("video",{autoPlay:!0,ref:this.videoRef})}}class v_ extends H.Component{constructor(n){super(n),console.log(n)}render(){return T.jsx("div",{children:this.props.streamManager!==void 0?T.jsx("div",{className:"streamcomponent",children:T.jsx(xme,{streamManager:this.props.streamManager})}):T.jsx("span",{children:"호스트가 없습니다."})})}}var wR={},Sme=wt;Object.defineProperty(wR,"__esModule",{value:!0});var xj=wR.default=void 0,Eme=Sme(xt()),Cme=T;xj=wR.default=(0,Eme.default)((0,Cme.jsx)("path",{d:"M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3m-1-9c0-.55.45-1 1-1s1 .45 1 1v6c0 .55-.45 1-1 1s-1-.45-1-1zm6 6c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92z"}),"MicNoneOutlined");var xR={},Rme=wt;Object.defineProperty(xR,"__esModule",{value:!0});var Sj=xR.default=void 0,Tme=Rme(xt()),Nme=T;Sj=xR.default=(0,Tme.default)((0,Nme.jsx)("path",{d:"M10.8 4.9c0-.66.54-1.2 1.2-1.2s1.2.54 1.2 1.2l-.01 3.91L15 10.6V5c0-1.66-1.34-3-3-3-1.54 0-2.79 1.16-2.96 2.65l1.76 1.76zM19 11h-1.7c0 .58-.1 1.13-.27 1.64l1.27 1.27c.44-.88.7-1.87.7-2.91M4.41 2.86 3 4.27l6 6V11c0 1.66 1.34 3 3 3 .23 0 .44-.03.65-.08l1.66 1.66c-.71.33-1.5.52-2.31.52-2.76 0-5.3-2.1-5.3-5.1H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c.91-.13 1.77-.45 2.55-.9l4.2 4.2 1.41-1.41z"}),"MicOffOutlined");var SR={},kme=wt;Object.defineProperty(SR,"__esModule",{value:!0});var Ej=SR.default=void 0,Ime=kme(xt()),_me=T;Ej=SR.default=(0,Ime.default)((0,_me.jsx)("path",{d:"M15 8v8H5V8zm1-2H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4V7c0-.55-.45-1-1-1"}),"VideocamOutlined");var ER={},Ame=wt;Object.defineProperty(ER,"__esModule",{value:!0});var Cj=ER.default=void 0,Ome=Ame(xt()),Dme=T;Cj=ER.default=(0,Ome.default)((0,Dme.jsx)("path",{d:"m9.56 8-2-2-4.15-4.14L2 3.27 4.73 6H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.21 0 .39-.08.55-.18L19.73 21l1.41-1.41-8.86-8.86zM5 16V8h1.73l8 8zm10-8v2.61l6 6V6.5l-4 4V7c0-.55-.45-1-1-1h-5.61l2 2z"}),"VideocamOffOutlined");var CR={},Mme=wt;Object.defineProperty(CR,"__esModule",{value:!0});var Rj=CR.default=void 0,Pme=Mme(xt()),Lme=T;Rj=CR.default=(0,Pme.default)((0,Lme.jsx)("path",{d:"M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8m0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4z"}),"LoopOutlined");const Tj="/assets/profileImg-y16nwSgO.jpg",Fme=({sessionId:t,user:n,isHost:e,micStatusChanged:r,camStatusChanged:i,switchCamera:o,leaveSession:a,hostNickname:s,hostProfileImg:u,setLeaveModal:l,totalUsers:c})=>{const[d,f]=H.useState(!0),[p,h]=H.useState(!0);return H.useEffect(()=>{f(n.stream.audioActive)},[n.stream.audioActive]),H.useEffect(()=>{h(n.stream.videoActive)},[n.stream.videoActive]),T.jsxs("div",{className:"toolbar-container",children:[T.jsxs("div",{className:"toolbar-host-info",children:[T.jsx("img",{src:Tj,alt:"toolbar-Host profile"}),T.jsxs("span",{children:[s,"yxwxwq"]})]}),T.jsxs("div",{className:"toolbar-count-subscribers",children:[T.jsx("img",{src:nR,alt:""}),c]}),T.jsxs("div",{className:"toolbar-option-btn",children:[T.jsx(B2,{onClick:()=>l(!0),className:"toolbar-option-icon"}),e&&T.jsxs(T.Fragment,{children:[d?T.jsx(xj,{onClick:r,className:"toolbar-option-icon"}):T.jsx(Sj,{onClick:r,className:"toolbar-option-icon"}),p?T.jsx(Ej,{onClick:i,className:"toolbar-option-icon"}):T.jsx(Cj,{onClick:i,className:"toolbar-option-icon"}),T.jsx(Rj,{onClick:o,className:"toolbar-option-icon"})]})]})]})},zme=t=>{const n=H.useRef(),e=H.useRef(null),r=H.useRef(null),[i,o]=H.useState(!0),a=()=>{r.current&&clearTimeout(r.current),r.current=setTimeout(()=>{const u=e.current.scrollTop,l=e.current.clientHeight,c=e.current.scrollHeight;o(u+l>=c-100)},100)},s=H.useCallback(()=>{a()},[]);return H.useEffect(()=>{i&&n.current.scrollIntoView({behavior:"smooth"})},[t.messageList]),H.useEffect(()=>(e.current.addEventListener("scroll",s),()=>{r.current&&clearTimeout(r.current),e.current&&e.current.removeEventListener("scroll",s)}),[s]),t.chatDisplay,T.jsxs("div",{className:"chatContainer",ref:e,children:[T.jsx("div",{children:t.messageList.map((u,l)=>T.jsx("div",{children:T.jsxs("div",{className:"chat-box",children:[T.jsx("img",{src:Tj,alt:"",className:"user-img"}),T.jsxs("div",{className:"msg-detail",children:[T.jsx("div",{className:"msg-info",children:T.jsx("p",{children:u.split(":")[0]})}),T.jsxs("div",{className:"msg-content",children:[T.jsx("span",{className:"triangle"}),T.jsx("p",{className:"text",children:u.split(":")[1]})]})]})]})},l))}),T.jsx("div",{ref:n})]})},Bme=t=>{const[n,e]=H.useState(""),r=a=>{a.preventDefault(),n.trim()!==""&&t.onMessage(`${t.myUserName}: `+n.trim(),t.currentSession),e("")},i=a=>{e(a.target.value)},o=a=>{a.key==="Enter"&&(a.preventDefault(),r(a))};return T.jsx(T.Fragment,{children:T.jsx("div",{id:"messageInput",children:T.jsx("input",{placeholder:"댓글 달기",id:"chatInput",value:n,onChange:i,onKeyPress:o,onpaste:"return false;"})})})},jme=()=>{const[t,n]=H.useState({width:window.innerWidth,height:window.innerHeight});return H.useEffect(()=>{const e=()=>{n({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]),t};function Vme({state:t,leaveSession:n}){const e=H.useRef();H.useEffect(()=>{e.current.showModal()});const r=a=>{const u=a.target.getBoundingClientRect();(u.left>a.clientX||u.right<a.clientX||u.top>a.clientY||u.bottom<a.clientY)&&(e.current.close(),t(!t))},i=a=>{e.current.close(),t(!t)},o=a=>{t(!t),n()};return T.jsx(T.Fragment,{children:T.jsxs("dialog",{ref:e,onClick:r,className:"leave-modal",children:[T.jsx("header",{className:"leave-modal-header",children:T.jsx("h3",{children:"라이브를 종료하시겠어요?"})}),T.jsxs("div",{className:"leave-modal-body",children:[T.jsx("div",{onClick:i,children:"취소"}),T.jsx("div",{onClick:o,children:"나가기"})]})]})})}function $me({open:t,close:n}){return T.jsxs("dialog",{open:t,children:[T.jsx("div",{children:"라이브가 종료되었습니다."}),T.jsx("div",{onClick:n,children:"확인"})]})}var eb=new bme;const Wh="https://i10c203.p.ssafy.io",tb="wearegitaehasam",Ume=t=>{const n=jr(),e=Si(),r=jme(),i="https://i10c203.p.ssafy.io/api",o=e.state.roomId,a=e.state.isHost,s=e.state.imageUrl?e.state.imageUrl:null,u=e.state.name?e.state.name:null,l=e.state.subscriberSession?e.state.subscriberSession:null,[c,d]=H.useState(null),[f,p]=H.useState("Gitaehasam"),[h,v]=H.useState("Participant"+Math.floor(Math.random()*100)),[g,m]=H.useState(void 0),[y,b]=H.useState(void 0),[w,x]=H.useState([]),[C,E]=H.useState(void 0),[S,N]=H.useState([]),[k,M]=H.useState(0),[D,R]=H.useState(!0);H.useState(null);const[O,P]=H.useState(!0),[A,I]=H.useState(!0),[_,F]=H.useState(!1),[L,W]=H.useState(""),[B,q]=H.useState(""),[G,re]=H.useState(!1),[j,ae]=H.useState(!0);let te;H.useEffect(()=>{g&&y&&ae(!1)},[g,y]);const le=H.useCallback(()=>a?Ee(f).then(De=>se(De)):se(l),[f,a]),Ee=De=>a?new Promise((lt,Le)=>{console.log(o);let Xe=JSON.stringify({customSessionId:De});Nt.post(Wh+"/openvidu/api/sessions",Xe,{headers:{Authorization:"Basic "+btoa("OPENVIDUAPP:"+tb),"Content-Type":"application/json"}}).then(Pe=>{console.log("CREATE SESION",Pe),Nt.post(i+"/lives",{imageUrl:s,name:u,sessionId:Pe.data.sessionId},{headers:{Authorization:localStorage.getItem("jwt"),"Content-Type":"application/json"}}).then(ze=>{console.log("apiRoomId: ",ze.data.id),console.log(ze.data),d(ze.data.id),lt(Pe.data.id)}).catch(ze=>{console.log("Error on /lives request:",ze)})}).catch(Pe=>{var Ze;var ze=Object.assign({},Pe);((Ze=ze==null?void 0:ze.response)==null?void 0:Ze.status)===409?lt(De):console.log(ze)})}):Promise.resolve(l),se=De=>{let lt=a?"PUBLISHER":"SUBSCRIBER";return console.log(De),new Promise((Le,Xe)=>{const Pe={role:lt,sessionId:De};Nt.post(Wh+"/openvidu/api/sessions/"+De+"/connection",Pe,{headers:{Authorization:"Basic "+btoa("OPENVIDUAPP:"+tb),"Content-Type":"application/json"}}).then(ze=>{console.log("TOKEN",ze),Le(ze.data.token)}).catch(ze=>Xe(ze))})};let be;H.useEffect(()=>{p(`Gitaehasam${o}`)},[o]),H.useEffect(()=>{be=new wme;const De={maxRatio:1,minRatio:1,fixedRatio:!0,bigClass:"OV_big",bigPercentage:1,bigFixedRatio:!1,bigMaxRatio:1,bigMinRatio:1,bigFirst:!0,animate:!0};be.initLayoutContainer(document.getElementById("layout"),De),be.setLayoutOptions(De),window.addEventListener("beforeunload",onbeforeunload),f!=="Gitaehasam"&&fe()},[f]);const fe=async()=>{te=new GB.OpenVidu;let De=te.initSession();m(De);let lt;try{lt=await le()}catch(Xe){console.log(Xe);return}const Le=te.initPublisher(void 0,{audioSource:void 0,videoSource:void 0,publishAudio:A,publishVideo:O,resolution:`${r.width}x${r.height}`,frameRate:30,insertMode:"APPEND",mirror:!1});De.connect(lt,{clientData:h}).then(()=>{De.publish(Le).then(()=>{eb.setNickname(h),eb.setConnectionId(De.connection.connectionId),eb.setStreamManager(Le)}),E(Le),b(Le)}),De.on("streamCreated",Xe=>{const Pe=De.subscribe(Xe.stream,"publisher");N(Pe)}),De.on("exception",Xe=>{console.warn(Xe)}),De.on("connectionCreated",({stream:Xe})=>{M(Pe=>Pe+1)}),De.on("connectionDestroyed",({stream:Xe})=>{M(Pe=>Pe-1)}),De.on("signal:chat",Xe=>{x(Pe=>[...Pe,Xe.data])}),Nt.get(Wh+"/openvidu/api/sessions/"+f,{headers:{Authorization:"Basic "+btoa("OPENVIDUAPP:"+tb),"Content-Type":"application/json"}}).then(Xe=>{const Pe=Xe.data.publisher;Pe&&(W(Pe.nickname),q(Pe.thumbnail))}).catch(Xe=>{console.log(Xe)})},Z=()=>{C.publishVideo(!C.stream.videoActive),P(!O),E(C)},ge=()=>{C.publishAudio(!C.stream.audioActive),I(!A),E(C)},we=async()=>{try{const lt=(await te.getDevices()).filter(Le=>Le.kind==="videoinput");if(lt&&lt.length>1){const Le=lt.find(Xe=>Xe.deviceId!==C.stream.videoSource.deviceId);if(Le){const Xe=te.initPublisher(void 0,{audioSource:void 0,videoSource:Le.deviceId,publishAudio:C.stream.audioActive,publishVideo:C.stream.videoActive,mirror:!0});await g.unpublish(C),await g.publish(Xe),E(Xe)}}}catch(De){console.error(De)}},de=async()=>{const De=g;De&&(te=null,m(void 0),N([]),p("SessionA"),v("Participant"+Math.floor(Math.random()*100)),b(void 0),E(void 0),x([]),R(!0),M(lt=>0),await On(De))},On=async De=>{try{await Nt.delete(Wh+`/api/lives/${c}`,{headers:{Authorization:localStorage.getItem("jwt"),"Content-Type":"application/json"}}),De.disconnect()}catch(lt){console.error(lt)}finally{n("/media/roomList")}};H.useEffect(()=>{v("Participant"+Math.floor(Math.random()*100))},[]),H.useEffect(()=>{const De=lt=>{de()};return window.addEventListener("beforeunload",De),()=>{window.removeEventListener("beforeunload",De)}},[de]),H.useEffect(()=>{if(g){const De=()=>{re(!0)};return g.on("sessionDisconnected",De),()=>{g.off("sessionDisconnected",De)}}},[g]);const fn=()=>{re(!1),n("/media/roomList")},pn=(De,lt)=>{lt.signal({data:De,to:[],type:"chat"}).then(()=>{console.log("Message successfully sent")}).catch(Le=>{console.error(Le)})};return T.jsx(T.Fragment,{children:j?T.jsx(Tp,{}):T.jsxs("div",{className:"bounds",children:[g!==void 0&&y!==void 0?T.jsxs("div",{children:[T.jsx(Fme,{sessionId:f,user:C,isHost:a,micStatusChanged:ge,camStatusChanged:Z,switchCamera:we,leaveSession:de,setLeaveModal:F,hostNickname:L,hostProfileImg:B,totalUsers:k}),a&&T.jsx(v_,{streamManager:C}),!a&&T.jsx(v_,{streamManager:S}),D&&T.jsxs("div",{className:"chatting",children:[T.jsx(zme,{messageList:w}),T.jsx(Bme,{myUserName:h,onMessage:pn,currentSession:g})]})]}):T.jsxs("div",{className:"noneData",children:[T.jsx(d2,{}),T.jsx("div",{children:"존재하지 않는 방송입니다."}),T.jsx("button",{onClick:()=>n("/media/roomList"),children:"나가기"})]}),_?T.jsx(Vme,{state:F,leaveSession:de}):null,T.jsx($me,{open:G,onClose:fn})]})})},g_=()=>T.jsxs(T.Fragment,{children:[T.jsx(fa,{}),T.jsxs("div",{className:"choose-list",children:[T.jsx(Ja,{to:"/media/roomlist",children:T.jsx("div",{className:"choose-item",children:T.jsx("div",{className:"bg-blue liveroom",children:"Live"})})}),T.jsx(Ja,{to:"/media/board",children:T.jsx("div",{className:"choose-item",children:T.jsx("div",{className:"bg-blue card photo",children:"Photo"})})})]})]});var RR={},Wme=wt;Object.defineProperty(RR,"__esModule",{value:!0});var Nj=RR.default=void 0,Hme=Wme(xt()),Gme=T;Nj=RR.default=(0,Hme.default)((0,Gme.jsx)("path",{d:"M11 11V3H5c-1.1 0-2 .9-2 2v6zm2 0h8V5c0-1.1-.9-2-2-2h-6zm-2 2H3v6c0 1.1.9 2 2 2h6zm2 0v8h6c1.1 0 2-.9 2-2v-6z"}),"Window");var TR={},qme=wt;Object.defineProperty(TR,"__esModule",{value:!0});var NR=TR.default=void 0,Kme=qme(xt()),Xme=T;NR=TR.default=(0,Kme.default)((0,Xme.jsx)("path",{d:"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3m-4.4 15.55-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05"}),"FavoriteBorder");var kR={},Yme=wt;Object.defineProperty(kR,"__esModule",{value:!0});var kj=kR.default=void 0,Jme=Yme(xt()),Qme=T;kj=kR.default=(0,Jme.default)((0,Qme.jsx)("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m0 14H6l-2 2V4h16z"}),"ChatBubbleOutline");const Zme=({data:t})=>{const n=e=>{const r=new Date(e),o=Math.floor((new Date().getTime()-r.getTime())/1e3);if(o<60)return"방금 전";const a=o/60;if(a<60)return`${Math.floor(a)}분 전`;const s=a/60;if(s<24)return`${Math.floor(s)}시간 전`;const u=s/24;return u<7?`${Math.floor(u)}일 전`:`${r.toLocaleDateString()}`};return T.jsxs("li",{className:"shadow board-contents",children:[T.jsxs("div",{className:"board-title-area",children:[T.jsx("img",{className:"board-profile",src:t.profileImageUrl,alt:""}),T.jsx("div",{className:"nick",children:t.nickName})]}),T.jsx("img",{className:"main-img",src:t.boardImageUrl,alt:""}),T.jsxs("div",{className:"content",children:[T.jsx("div",{className:"hashtag-list",children:t.hashtags.map((e,r)=>T.jsx("div",{className:"hashtag",children:e},r))}),T.jsx("div",{className:"post-text",children:t.content}),T.jsxs("div",{className:"post-bottom",children:[T.jsx("div",{className:"time",children:n(t.createdAt)}),T.jsxs("div",{className:"post-info",children:[T.jsx("div",{className:"post-icon",children:T.jsx(kj,{})}),T.jsx("div",{className:"comment",children:t.commentCnt}),T.jsx("div",{className:"post-icon",children:T.jsx(NR,{})}),T.jsx("div",{className:"like",children:t.likeCnt})]})]})]})]})},eve=[{nickName:"귀여운돌돔",profileImageUrl:"https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FtEMUl%2FbtrDc6957nj%2FNwJoDw0EOapJNDSNRNZK8K%2Fimg.jpg",boardId:2,boardImageUrl:"https://img.hankyung.com/photo/202307/99.28885943.1.jpg",hashtags:["#돌돔"],content:"첫 게시글",createdAt:"2024-01-25T21:58:14",commentCnt:2,likeCnt:1},{nickName:"슬픈도다리",profileImageUrl:"https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FtEMUl%2FbtrDc6957nj%2FNwJoDw0EOapJNDSNRNZK8K%2Fimg.jpg",boardId:10,boardImageUrl:"https://img.hankyung.com/photo/202307/99.28885943.1.jpg",hashtags:["#돌돔","#돌돔","#돌돔"],content:"잡은 물고기 게시글 ",createdAt:"2024-01-26T21:59:20",commentCnt:3,likeCnt:2},{nickName:"매력적인오징어",profileImageUrl:"https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FtEMUl%2FbtrDc6957nj%2FNwJoDw0EOapJNDSNRNZK8K%2Fimg.jpg",boardId:11,boardImageUrl:"https://img.hankyung.com/photo/202307/99.28885943.1.jpg",hashtags:["#돌돔","#돌돔"],content:"잡은 물고기 게시글",createdAt:"2024-01-27T21:59:20",commentCnt:3,likeCnt:1},{nickName:"까칠한가물치",profileImageUrl:"https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FtEMUl%2FbtrDc6957nj%2FNwJoDw0EOapJNDSNRNZK8K%2Fimg.jpg",boardId:12,boardImageUrl:"https://img.hankyung.com/photo/202307/99.28885943.1.jpg",hashtags:["#돌돔"],content:"잡은 물고기 게시글",createdAt:"2024-01-28T21:59:20",commentCnt:1,likeCnt:2},{nickName:"까칠한가물치",profileImageUrl:"https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FtEMUl%2FbtrDc6957nj%2FNwJoDw0EOapJNDSNRNZK8K%2Fimg.jpg",boardId:13,boardImageUrl:"https://img.hankyung.com/photo/202307/99.28885943.1.jpg",hashtags:["#돌돔","#돌돔"],content:"잡은 물고기 게시글",createdAt:"2024-01-29T21:59:20",commentCnt:5,likeCnt:10},{nickName:"까칠한가물치",profileImageUrl:"https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FtEMUl%2FbtrDc6957nj%2FNwJoDw0EOapJNDSNRNZK8K%2Fimg.jpg",boardId:14,boardImageUrl:"https://img.hankyung.com/photo/202307/99.28885943.1.jpg",hashtags:["#돌돔","#물반고기반"],content:"잡은 물고기 게시글",createdAt:"2024-01-30T21:59:20",commentCnt:3,likeCnt:0}],tve=!1,nve={boards:eve,hasNext:tve},rve="https://i10c203.p.ssafy.io/api",ive=()=>{const t=Nt.create({baseURL:rve});return t.defaults.headers.common.Authorization="",t.defaults.headers.post["Content-Type"]="application/json",t.defaults.headers.put["Content-Type"]="application/json",t.defaults.headers.delete["Content-Type"]="application/json",t};ive();const y_=({category:t,viewType:n})=>{const[e,r]=H.useState([]);return H.useEffect(()=>{t==1||t==2&&r(nve.boards)},[t]),T.jsx(T.Fragment,{children:T.jsx("ul",{className:`${n==0?"full-size":"mini-size"}`,children:e.map(i=>T.jsx(Ja,{to:`/media/board/${i.boardId}`,children:T.jsx(Zme,{data:i})},i.boardId))})})};var IR={},ove=wt;Object.defineProperty(IR,"__esModule",{value:!0});var Ij=IR.default=void 0,ave=ove(xt()),sve=T;Ij=IR.default=(0,ave.default)((0,sve.jsx)("path",{d:"M3 10h11v2H3zm0-2h11V6H3zm0 8h7v-2H3zm15.01-3.13.71-.71c.39-.39 1.02-.39 1.41 0l.71.71c.39.39.39 1.02 0 1.41l-.71.71zm-.71.71-5.3 5.3V21h2.12l5.3-5.3z"}),"EditNote");const b_=()=>{const[t,n]=H.useState(1),[e,r]=H.useState(0),i=l=>{n(l)},o=l=>{r(l)},a=jr(),s=()=>{a("/media/board/create",{state:{categoryId:t}})},u=()=>{console.log("ss")};return T.jsxs(T.Fragment,{children:[T.jsx("img",{className:"backfish",src:l2,alt:"",onClick:()=>history.back()}),T.jsxs("div",{className:"category-header",children:[T.jsx("div",{className:`category-title ${t==1?"active":""}`,onClick:()=>i(1),children:"물고기"}),T.jsx("div",{className:`category-title ${t==2?"active":""}`,onClick:()=>i(2),children:"장소자랑"})]}),T.jsxs("div",{className:"type-select",children:[T.jsx("div",{className:`full ${e==0&&"active"}`,onClick:()=>o(0)}),T.jsx("div",{className:`divide ${e==1&&"active"}`,onClick:()=>o(1),children:T.jsx(Nj,{})}),T.jsx("div",{className:"filter",children:T.jsx("img",{src:$B,alt:"",onClick:()=>u()})})]}),t==1&&T.jsx(y_,{category:t,viewType:e}),t==2&&T.jsx(y_,{category:t,viewType:e}),T.jsx("div",{className:"create-post-btn bg-blue",onClick:()=>s(),children:T.jsx(Ij,{})})]})};var _R={},uve=wt;Object.defineProperty(_R,"__esModule",{value:!0});var _j=_R.default=void 0,lve=uve(xt()),cve=T;_j=_R.default=(0,lve.default)((0,cve.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"AddOutlined");const dve=({type:t,categoryId:n})=>{const[e,r]=H.useState(""),[i,o]=H.useState(""),[a,s]=H.useState(null),u=H.useRef();H.useEffect(()=>(e!==""&&s(T.jsx("img",{className:"img_preview",src:i})),()=>{}),[i]);const l=f=>{console.log("2w"),f.preventDefault();let p=f.target.files[0],h=new FileReader;h.onloadend=v=>{r(p),o(h.result)},p&&h.readAsDataURL(p)},c=f=>{console.log("cleick"),console.log(a),f.preventDefault(),u.current.click()},d=()=>{console.log("s")};return T.jsx(T.Fragment,{children:T.jsxs("div",{className:"post-area",children:[T.jsxs("div",{className:"post-item",children:[T.jsxs("div",{className:"post-sub",children:[n==1&&T.jsx("div",{children:"잡은 물고기를 등록해 주세요"}),n==2&&T.jsx("div",{children:"리뷰를 작성해 주세요."})]}),T.jsxs("div",{className:"post-image-upload",children:[a,T.jsx("input",{ref:u,hidden:!0,id:"file",type:"file",onChange:l}),T.jsxs("div",{className:`shadow bg-blue ${e?"reupload-btn":"upload-btn"}`,onClick:c,children:[!e&&T.jsx(_j,{}),e&&"이미지 다시 선택하기"]})]})]}),T.jsxs("div",{className:"post-item",children:[T.jsx("div",{className:"post-sub",children:"장소"}),T.jsx("div",{className:"position",children:T.jsx("div",{})})]}),T.jsxs("div",{className:"post-item",children:[T.jsxs("div",{className:"post-sub",children:[n==1&&T.jsx("div",{children:"물고기종류"}),n==2&&T.jsx("div",{children:"해시태그"})]}),T.jsxs("div",{className:"hashtag-add",children:[T.jsx("div",{className:"hashtag-icon shadow bg-blue",children:T.jsx(F2,{})}),n==1&&T.jsx("input",{className:"hashtag-search",type:"text",onKeyUp:()=>d(),placeholder:"물고기이름"}),n==2&&T.jsx("input",{className:"hashtag-search",type:"text",onKeyUp:()=>d(),placeholder:"최대 5개까지 입력할 수 있어요"})]})]}),T.jsxs("div",{className:"post-item",children:[T.jsx("div",{className:"post-sub",children:"하고싶은 말"}),T.jsx("textarea",{})]})]})})},jo="/assets/공유-NUwAFK4H.jpg";var AR={},fve=wt;Object.defineProperty(AR,"__esModule",{value:!0});var OR=AR.default=void 0,pve=fve(xt()),hve=T;OR=AR.default=(0,pve.default)((0,hve.jsx)("path",{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"}),"Send");const w_=()=>{wS();const[t,n]=H.useState({nickName:"강민정0173",socialId:"1234",profileImageUrl:jo,boardId:9,boardImageUrl:"https://www.thesprucepets.com/thmb/cQPbLr_MPjBgKpiWVbSbtgmxH4k=/750x0/filters:no_upscale():max_bytes(150000):strip_icc():format(webp)/low-maintenance-freshwater-fish-4770223-hero-ffb66c229c194e2db4916e88bbd17a15.jpg",fishName:null,hashtags:["#여수","#뷰 맛집"],content:"장소 게시글 베타 너무 예뻐용요요용 집가고 싶어요 담주까지 이거 끝날까여",createdAt:"2024-01-26T21:47:49",commentCnt:0,comments:[{id:4,profileImageUrl:jo,nickName:"강민정0173",content:"안녕",createdAt:"2024-01-28T03:33:53"},{id:5,profileImageUrl:jo,nickName:"귀여운도다리",content:"너무이뻐염",createdAt:"2024-01-28T03:33:53"}],likeCnt:20,longitude:128.29192,latitude:37.522514}),e=r=>{const i=r+"",o=i.substring(0,10),a=i.substring(11,16);return console.log(o),o+" "+a};return T.jsxs(T.Fragment,{children:[T.jsxs("div",{className:"board-detail-area",children:[T.jsxs("div",{className:"board-detail-item",children:[T.jsxs("div",{className:"board-title",children:[T.jsx("img",{className:"board-detail-profile",src:t.profileImageUrl,alt:"프로필"}),T.jsx("div",{className:"board-nickname",children:t.nickName}),T.jsxs("div",{className:"like-area",children:[T.jsx(NR,{}),T.jsx("div",{children:t.likeCnt})]})]}),T.jsx("img",{className:"board-content-img",src:t.boardImageUrl,alt:""}),T.jsx("div",{className:"board-text",children:t.content}),T.jsx("div",{className:"board-hashtag-area",children:t.hashtags.map((r,i)=>T.jsx("div",{className:"blue-bd",children:T.jsx("div",{children:r})},i))})]}),T.jsx("div",{className:"line bg-blue"}),T.jsxs("div",{className:"board-detail-item",children:[T.jsx("div",{className:"board-place",children:"Place Info"}),T.jsx("div",{className:"board-map"})]}),T.jsx("div",{className:"line bg-blue"}),T.jsxs("div",{className:"reply-area",children:[T.jsxs("div",{className:"reply-title",children:[T.jsx("div",{children:"댓글"}),T.jsx("div",{className:"blue-fc",children:t.comments.length})]}),T.jsx("div",{className:"reply-line bg-blue"}),T.jsx("div",{className:"reply-list",children:t.comments.map((r,i)=>T.jsxs("div",{className:"reply",children:[T.jsx("img",{src:r.profileImageUrl,alt:""}),T.jsx("div",{children:r.nickName}),T.jsx("div",{children:e(r.createdAt)}),T.jsx("div",{children:r.content})]},i))})]})]}),T.jsxs("div",{className:"reply-add",children:[T.jsx("div",{className:"reply-line bg-blue"}),T.jsx("img",{src:jo,alt:""}),T.jsxs("div",{className:"reply-add-area",children:[T.jsx("input",{type:"text",placeholder:"댓글작성하기"}),T.jsx("div",{className:"send-reply bg-blue",children:T.jsx(OR,{})})]})]})]})},mve=()=>{var r;const t=Si(),[n,e]=H.useState((r=t.state)==null?void 0:r.categoryId);return T.jsxs(T.Fragment,{children:[T.jsx("div",{className:"post-title",children:"글쓰기"}),T.jsx("div",{className:"post-btn",children:"등록하기"}),T.jsx("div",{children:T.jsx(dve,{type:"create",categoryId:n})})]})},vve=()=>{const{social:t}=wS(),e=new URL(document.URL).searchParams.get("code"),r=jr();e||r("/");const i=async()=>{console.log(e),console.log(t),console.log("https://i10c203.p.ssafy.io/api");try{const a=(await Nt.post(`https://i10c203.p.ssafy.io/api/login/${t}`,{code:e})).data.accessToken;localStorage.setItem("jwt",a),r("/",{replace:!0}),console.log(a)}catch(o){console.log(o)}};return H.useEffect(()=>{i()},[]),T.jsx(Tp,{})};var DR={},gve=wt;Object.defineProperty(DR,"__esModule",{value:!0});var Aj=DR.default=void 0,yve=gve(xt()),bve=T;Aj=DR.default=(0,yve.default)((0,bve.jsx)("path",{d:"M19.43 12.98c.04-.32.07-.64.07-.98 0-.34-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.09-.16-.26-.25-.44-.25-.06 0-.12.01-.17.03l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65C14.46 2.18 14.25 2 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1c-.06-.02-.12-.03-.18-.03-.17 0-.34.09-.43.25l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98 0 .33.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46c.09.16.26.25.44.25.06 0 .12-.01.17-.03l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.06.02.12.03.18.03.17 0 .34-.09.43-.25l2-3.46c.12-.22.07-.49-.12-.64zm-1.98-1.71c.04.31.05.52.05.73 0 .21-.02.43-.05.73l-.14 1.13.89.7 1.08.84-.7 1.21-1.27-.51-1.04-.42-.9.68c-.43.32-.84.56-1.25.73l-1.06.43-.16 1.13-.2 1.35h-1.4l-.19-1.35-.16-1.13-1.06-.43c-.43-.18-.83-.41-1.23-.71l-.91-.7-1.06.43-1.27.51-.7-1.21 1.08-.84.89-.7-.14-1.13c-.03-.31-.05-.54-.05-.74s.02-.43.05-.73l.14-1.13-.89-.7-1.08-.84.7-1.21 1.27.51 1.04.42.9-.68c.43-.32.84-.56 1.25-.73l1.06-.43.16-1.13.2-1.35h1.39l.19 1.35.16 1.13 1.06.43c.43.18.83.41 1.23.71l.91.7 1.06-.43 1.27-.51.7 1.21-1.07.85-.89.7zM12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4m0 6c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2"}),"SettingsOutlined");const wve=()=>{const t=jr(),n=localStorage.getItem("user");H.useEffect(()=>{localStorage.setItem("user",JSON.stringify({imageUrl:"https://mblogthumb-phinf.pstatic.net/MjAyMDExMDFfMyAg/MDAxNjA0MjI5NDA4NDMy.5zGHwAo_UtaQFX8Hd7zrDi1WiV5KrDsPHcRzu3e6b8Eg.IlkR3QN__c3o7Qe9z5_xYyCyr2vcx7L_W1arNFgwAJwg.JPEG.gambasg/%EC%9C%A0%ED%8A%9C%EB%B8%8C_%EA%B8%B0%EB%B3%B8%ED%94%84%EB%A1%9C%ED%95%84_%ED%8C%8C%EC%8A%A4%ED%85%94.jpg?type=w800",nickname:"참돔참돔"}))});const e=()=>{t("edit")};return T.jsxs("div",{className:"mypage",children:[T.jsx(fa,{centerText:"My 낚시",align:"center"}),T.jsx(Aj,{onClick:e}),T.jsx("div",{children:T.jsx("img",{src:n.imageUrl,alt:""})})]})},xve=()=>{const t=H.useRef([]),n=H.useRef([]),[e,r]=H.useState(50),[i,o]=H.useState(0),[a,s]=H.useState(0),[u,l]=H.useState(!1),[c,d]=H.useState([{title:"제목",num:1,imageSrc:jo},{title:"제목",num:2,imageSrc:jo},{title:"제목",num:3,imageSrc:jo},{title:"제목",num:4,imageSrc:jo},{title:"제목",num:5,imageSrc:jo}]),f=.02,p=-.1;H.useEffect(()=>{const v=t.current,g=n.current,m=(E,S,N)=>{const k=h([...v],N)[S];E.style.setProperty("--zIndex",k),E.style.setProperty("--active",(S-N)/v.length)},y=()=>{const E=Math.max(0,Math.min(e,100)),S=Math.floor(E/100*(v.length-1));s(S),v.forEach((N,k)=>m(N,k,S))};y();const b=E=>{const S=E.deltaY*f;r(N=>N+S),y()},w=E=>{if(E.type==="mousemove"&&g.forEach(k=>{k.style.transform=`translate(${E.clientX}px, ${E.clientY}px)`}),!u)return;const S=E.clientX||E.touches&&E.touches[0].clientX||0,N=(S-i)*p;r(k=>k+N),o(S),y()},x=E=>{l(!0);const S=E.clientX||E.touches&&E.touches[0].clientX||0;o(S)},C=()=>{l(!1)};return document.addEventListener("mousewheel",b),document.addEventListener("mousedown",x),document.addEventListener("mousemove",w),document.addEventListener("mouseup",C),document.addEventListener("touchstart",x),document.addEventListener("touchmove",w),document.addEventListener("touchend",C),()=>{document.removeEventListener("mousewheel",b),document.removeEventListener("mousedown",x),document.removeEventListener("mousemove",w),document.removeEventListener("mouseup",C),document.removeEventListener("touchstart",x),document.removeEventListener("touchmove",w),document.removeEventListener("touchend",C)}},[e,u,i]);const h=(v,g)=>v.map((m,y)=>g===y?v.length:v.length-Math.abs(g-y));return T.jsx(T.Fragment,{children:T.jsx("div",{className:"carousel",children:c.map((v,g)=>T.jsx("div",{ref:m=>t.current[g]=m,className:"carousel-item",children:T.jsxs("div",{className:"carousel-box",children:[T.jsx("div",{className:"title",children:v.title}),T.jsx("div",{className:"num",children:v.num}),T.jsx("img",{src:v.imageSrc,alt:v.title})]})},g))})})};function Sve(t){const[n,e]=H.useState(""),r=o=>{e(o.target.value)},i=o=>{o.preventDefault(),t.onChat(n),e("")};return T.jsx(T.Fragment,{children:T.jsxs("div",{children:[T.jsx("input",{placeholder:"메세지 보내기...",id:"chatBotInput",value:n,onChange:r,type:"text"}),n.trim()!==""&&T.jsx(OR,{onClick:i})]})})}function Eve(t){return T.jsx(T.Fragment,{children:T.jsx("h1",{children:"ㅎㅇㅎㅇ"})})}function Cve(){const t=jr(),n=e=>{console.log(e)};return T.jsx(T.Fragment,{children:T.jsxs("div",{children:[T.jsx("div",{className:"chatbot-toolbar",onClick:()=>t("/"),children:T.jsx(fa,{centerText:"낚시왕"})}),T.jsx("hr",{}),T.jsxs("div",{children:[T.jsx(Eve,{}),T.jsx(Sve,{onChat:n})]})]})})}const Rve=()=>{const t=JSON.parse(localStorage.getItem("user"));return T.jsxs("div",{className:"mypage-edit",children:[T.jsx(fa,{centerText:"My 정보수정",align:"center"}),T.jsx("div",{className:"complete",children:"완료"}),T.jsx("div",{className:"profile",children:T.jsx("img",{src:t.imageUrl,alt:"",className:"profile-img"})}),T.jsxs("div",{className:"user-info",children:[T.jsx("div",{className:"info-title",children:"닉네임"}),T.jsx("input",{className:"info-nick",type:"text"})]}),T.jsxs("div",{className:"user-change",children:[T.jsx("button",{className:"logout",children:"로그아웃"}),T.jsx("button",{className:"resign",children:"회원탈퇴"})]})]})};function Tve(){return T.jsxs(X5,{children:[T.jsxs(it,{path:"/",element:T.jsx(sH,{}),children:[T.jsx(it,{index:!0,element:T.jsx(q9,{})}),T.jsxs(it,{path:"fish",children:[T.jsx(it,{path:"image/result",element:T.jsx(qee,{})}),T.jsx(it,{path:"map",element:T.jsx(Oue,{})})]}),T.jsxs(it,{path:"media",children:[T.jsx(it,{index:!0,element:T.jsx(g_,{})}),T.jsxs(it,{path:"roomList",children:[T.jsx(it,{index:!0,element:T.jsx(pde,{})}),T.jsx(it,{path:"create",children:T.jsx(it,{index:!0,element:T.jsx(wde,{})})})]}),T.jsxs(it,{path:"board",children:[T.jsx(it,{index:!0,element:T.jsx(b_,{})}),T.jsx(it,{path:":id",element:T.jsx(w_,{})})]})]}),T.jsxs(it,{path:"user/mypage",children:[T.jsx(it,{index:!0,element:T.jsx(wve,{})}),T.jsx(it,{path:"edit",element:T.jsx(Rve,{})})]})]}),T.jsxs(it,{path:"media",children:[T.jsx(it,{index:!0,element:T.jsx(g_,{})}),T.jsxs(it,{path:"board",children:[T.jsx(it,{index:!0,element:T.jsx(b_,{})}),T.jsx(it,{path:"create",element:T.jsx(mve,{})}),T.jsx(it,{path:":id",element:T.jsx(w_,{})})]})]}),T.jsx(it,{path:"/tutorial",children:T.jsx(it,{index:!0,element:T.jsx(xve,{})})}),T.jsxs(it,{path:"/fish",children:[T.jsx(it,{path:"map",children:T.jsx(it,{path:":idx",element:T.jsx(Jle,{})})}),T.jsx(it,{path:"image/edit",element:T.jsx(Hce,{})})]}),T.jsxs(it,{path:"/fishbook",children:[T.jsx(it,{index:!0,element:T.jsx(Xce,{})}),T.jsx(it,{path:":id",element:T.jsx(Qce,{})})]}),T.jsxs(it,{path:"/login",children:[T.jsx(it,{index:!0,element:T.jsx(ode,{})}),T.jsx(it,{path:":social",element:T.jsx(vve,{})})]}),T.jsx(it,{path:"/live/:id",element:T.jsx(Ume,{})}),T.jsx(it,{path:"/chatBot",children:T.jsx(it,{index:!0,element:T.jsx(Cve,{})})})]})}Qb.createRoot(document.getElementById("root")).render(T.jsx(Yse,{children:T.jsx(nU,{children:T.jsx(Tve,{})})}));
