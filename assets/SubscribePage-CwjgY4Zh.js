import{e as f,j as e,t as u,r as x}from"./index-C_vzieaQ.js";import{N as j}from"./NavHeader-CyEfwV3U.js";import{a as g}from"./index-_j2WResJ.js";import{T as N}from"./Common-BS4uVQHZ.js";import{a as b}from"./commons-BJ5SslBL.js";import{N as k}from"./NoneData-Bck3FDg4.js";import"./index-prcx37CQ.js";import"./iconBase-rz0zWS2w.js";import"./axios-Bo0ATomq.js";import"./profileImg-Fhzvd9kH.js";const y=({movieId:s,title:t,status:l,likeCnt:r,poster:d,requestCnt:a,handleClick:i,isType:n})=>{const o=f(),h=()=>o(`/fund/list/${s}`),c=p=>{p.stopPropagation(),i(s)};return e.jsxs("div",{className:"w-full relative shadow-test rounded-[1.5vh] cursor-pointer",onClick:h,children:[e.jsx("img",{className:"w-full h-full object-cover rounded-[1.5vh] brightness-90",src:d,loading:"lazy",alt:"영화포스터"}),e.jsxs("div",{className:"absolute inset-0 flex flex-col justify-between",children:[e.jsx("div",{className:"flex justify-between items-center p-[1vh]",children:n&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-[#C00202] blur-sm"}),e.jsx("div",{className:"relative text-[1.5vh] px-[1vh] py-[0.5vh]",children:l})]}),e.jsx(g,{className:"text-[#C00202] text-[2.5vh] cursor-pointer",onClick:c})]})}),e.jsxs("div",{className:"py-[1vh] px-[2vh] flex flex-col gap-[1vh] bg-black rounded-b-[1.5vh] bg-opacity-80 ",children:[e.jsx("div",{className:"text-[2vh]",children:t}),e.jsx("div",{className:"text-[1.5vh] text-[#C00202] font-bold ",children:n?`${r}명 좋아해요`:`${a}명 요청했어요`})]})]})]})},v=({type:s,data:t,setData:l})=>{const r=s==="like",d=async a=>{try{const i=await b().delete(`/fundings/movies/${a}/likes`);console.log(i),l(n=>n.filter(o=>o.movieId!==a)),u(r?"좋아요를 취소했어요.":"요청을 취소했어요.")}catch(i){console.log(i),u("나중에 다시 시도해주세요.")}};return e.jsxs(e.Fragment,{children:[t.length?t.map(a=>e.jsx(y,{...a,handleClick:d,isType:r},a.movieId)):e.jsx(k,{content:r?"찜한 펀딩이 없습니다":"요청한 펀딩이 없습니다."}),e.jsx(N,{})]})},m=({value:s,label:t,checkedValue:l,onChange:r})=>e.jsxs("label",{className:`flex-1 flex items-center justify-center text-[2vh] cursor-pointer ${l===s&&"border-t-2 border-t-transparent border-b-2 border-b-red-600 font-bold text-white"}`,children:[e.jsx("input",{type:"radio",name:"subscribe",value:s,className:"hidden peer",checked:l===s,onChange:r}),t]}),w=({check:s,handleChange:t})=>e.jsxs("div",{className:"w-full h-[5vh] flex border-b border-b-red-600 text-textGray",children:[e.jsx(m,{value:"like",label:"좋아요",checkedValue:s,onChange:t}),e.jsx(m,{value:"req",label:"펀딩요청",checkedValue:s,onChange:t})]}),I=()=>{const[s,t]=x.useState("like"),[l,r]=x.useState([]),[d,a]=x.useState([]),i=o=>{t(o.target.value)},n=async o=>{const h=`/fundings/movies/${o==="like"?"like":"request"}`;try{const{data:c}=await b().get(h);console.log(c),o==="like"?r(c):a(c.requestMovieResponseList)}catch(c){console.error("Error fetching funds",c)}};return x.useEffect(()=>{n("like"),n("req")},[]),e.jsxs("div",{className:"flex flex-col subscribe-container",children:[e.jsx(j,{leftWord:"관심 있는 소식만 모았어요"}),e.jsxs("div",{children:[e.jsx(w,{check:s,handleChange:i}),e.jsx("div",{className:"h-[88vh] relative",children:e.jsx("div",{className:"none-scroll max-h-[88vh] overflow-auto p-[3vh] pb-[10vh] grid grid-cols-2 gap-[3vh]",children:s==="like"?e.jsx(v,{type:"like",data:l,setData:r}):e.jsx(v,{type:"req",data:d,setData:a})})})]})]})};export{I as default};
