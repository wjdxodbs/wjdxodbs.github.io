import{i as l,u,r as p,j as d}from"./index-DxiVO21r.js";import{a as g}from"./axios-Bo0ATomq.js";const h="http://localhost:8086",m=()=>{const t=g.create({baseURL:`${h}`}),a=localStorage.getItem("jwt");return t.defaults.headers.common.Authorization=a,t.defaults.headers.post["Content-Type"]="application/json",t.defaults.headers.put["Content-Type"]="application/json",t.defaults.headers.delete["Content-Type"]="application/json",t},c="/users",r=m();async function f(t,a){try{const{data:e}=await r.get(`${c}/auth/login/${t}?code=${a}`);return console.log(e),e}catch(e){console.log(e)}}async function j(){try{const{data:t}=await r.get(`${c}/user`);return t}catch(t){console.log(t)}}const x=()=>{const{social:t}=l(),e=new URL(document.URL).searchParams.get("code"),n=u(),i=async()=>{t&&e?(await f(t,e).then(o=>{const s=o.data.accessToken;localStorage.setItem("jwt",s)}),await j().then(o=>{const s=o;localStorage.setItem("user",s)}),n("/",{replace:!0})):console.error()};return p.useEffect(()=>{i(),n("/")},[]),d.jsx("div",{children:e})};export{x as default};
