import{c as m,m as x,r,a as h,j as o,s as g,t as j,v as f,w as v,x as C,y,z,A as N}from"./index-BFfqBe_w.js";import{L as q}from"./Loading-DoK-N6Ig.js";const w=m(),E=async n=>{try{return(await w.get(`/quizzes/coupons/${n}`)).data}catch(s){throw x.isAxiosError(s)&&console.error("이미 쿠폰을 뽑았습니다",s),s}},I={"반경 밖 노래 조회 쿠폰":g,"24시간 무제한 쓰롱 쿠폰":j,"레벨 2배 쓰롱 쿠폰":f,"레벨만큼 추가 쓰롱 쿠폰":v,"쓰롱 5개 추가 쿠폰":C,"닉네임 변경 쿠폰":y,꽝:z,"물음표 음악 조회 쿠폰":N},D=({storageKey:n,couponType:s,redirectPath:t})=>{const[e,i]=r.useState(null),[p,u]=r.useState(!0),c=h();if(r.useEffect(()=>{if(!sessionStorage.getItem(n)){c(t,{replace:!0});return}(async()=>{u(!0);try{const a=await E(s);i(a)}catch(a){console.error("Failed to fetch coupon:",a)}u(!1)})()},[c,n,s,t]),p)return o.jsx("div",{children:o.jsx(q,{})});if(!e)return c(t,{replace:!0}),null;const l=()=>{c("/user/mycoupons",{replace:!0})},d=I[e.couponType];return o.jsxs("div",{className:"QuizCouponPage",children:[o.jsx("div",{className:"quiz-coupon-header",children:o.jsx("h2",{children:"무슨 쿠폰이 나왔을까요?"})}),o.jsxs("div",{className:"quiz-coupon-img",children:[o.jsx("img",{src:d,alt:e.couponType}),o.jsx("h2",{children:e.couponType})]}),o.jsx("div",{className:"quiz-coupon-footer",children:o.jsx("p",{children:e.couponDescription})}),o.jsx("div",{className:"quiz-coupon-button",children:o.jsx("button",{onClick:l,children:"쿠폰함으로 이동"})})]})};export{D as C};
