import{j as e,d as j,r as l}from"./index-DH76QrY1.js";import{a as m}from"./commons-D5rr2GKD.js";import{N as g}from"./NavHeader-BCN_ZTsH.js";import{L as N}from"./Loading-C-b2YYv0.js";import{a as k}from"./index-DdHk3kkt.js";import{N as p}from"./NoneData-CexJgTaz.js";import"./axios-Bo0ATomq.js";import"./index-R6LbOZZC.js";import"./iconBase-DQP2xcrS.js";import"./profileImg-Fhzvd9kH.js";const v=({value:s,label:t,checkedValue:r,onChange:a})=>e.jsxs("label",{className:`flex-1 flex items-center justify-center text-[2vh] cursor-pointer ${r===s&&"border-t-2 border-t-transparent border-b-2 border-b-red-600 font-bold text-white"}`,children:[e.jsx("input",{type:"radio",name:"subscribe",value:s,className:"hidden peer",checked:r===s,onChange:a}),t]}),y=({check:s,handleChange:t})=>e.jsxs("div",{className:"w-full h-[5vh] flex border-b border-b-red-600 text-textGray",children:[e.jsx(v,{value:"like",label:"좋아요",checkedValue:s,onChange:t}),e.jsx(v,{value:"req",label:"펀딩요청",checkedValue:s,onChange:t})]}),b=({movieId:s,title:t,status:r,likeCnt:a,poster:i,requestCnt:o,type:c})=>{const d=j(),n=c==="like",u=()=>d(`/fund/list/${s}`,{state:{type:"list"}});return e.jsxs("div",{className:"w-full relative shadow-test rounded-lg cursor-pointer",onClick:u,children:[n&&e.jsxs("div",{className:" absolute z-10 top-[1vh] right-[1vh]",children:[e.jsx("div",{className:"absolute inset-0 bg-[#C00202] blur-sm"}),e.jsx("div",{className:"relative text-[1.5vh] px-[1vh] py-[0.5vh]",children:r})]}),e.jsx("div",{className:"bbb relative",children:e.jsx("img",{className:"w-full h-full object-cover rounded-t-lg ",src:i,loading:"lazy",alt:"영화포스터"})}),e.jsxs("div",{className:"bg-black rounded-b-lg pb-[1vh] px-[2vh] flex flex-col gap-[1vh]",children:[e.jsx("div",{className:"text-[2vh] font-bold",children:t}),e.jsxs("div",{className:"text-[1.5vh] text-[#C00202] font-bold flex items-center gap-[1vh]",children:[e.jsx(k,{className:""}),n?`${a}명 좋아해요`:`${o}명 요청했어요`]})]})]})},q=({data:s})=>s.length?e.jsx(e.Fragment,{children:s.map(t=>e.jsx(b,{...t,type:"like"},t.movieId))}):e.jsx(p,{content:"찜한 펀딩이 없습니다"}),w=({data:s})=>s.length?e.jsx(e.Fragment,{children:s.map(t=>e.jsx(b,{...t,type:"req"},t.movieId))}):e.jsx(p,{content:"요청한 펀딩이 없습니다"}),z=()=>{const[s,t]=l.useState("like"),[r,a]=l.useState([]),[i,o]=l.useState([]),[c,d]=l.useState(!0),n=h=>{t(h.target.value)};l.useEffect(()=>{(async()=>{try{const[x,f]=await Promise.all([m().get("/fundings/movies/like"),m().get("/fundings/movies/request")]);a(x.data),o(f.data.requestMovieResponseList)}catch(x){console.error("Error fetching funds",x)}finally{d(!1)}})()},[]);const u=()=>{switch(s){case"like":return e.jsx(q,{data:r});case"req":return e.jsx(w,{data:i});default:return null}};return e.jsxs("div",{className:"flex flex-col",children:[e.jsx(g,{leftWord:"관심 있는 소식만 모았어요"}),e.jsxs("div",{children:[e.jsx(y,{check:s,handleChange:n}),e.jsx("div",{className:"h-[88vh] relative",children:c?e.jsx(N,{}):e.jsx("div",{className:"none-scroll max-h-[88vh] overflow-auto p-[3vh] pb-[10vh] grid grid-cols-2 gap-[3vh]",children:u()})})]})]})};export{z as default};
