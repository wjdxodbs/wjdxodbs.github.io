import{d as l,e as m,r as g,j as u}from"./index-C_vzieaQ.js";import{a as s}from"./commons-BJ5SslBL.js";import{L as d}from"./Loading-40w_W7_4.js";import"./axios-Bo0ATomq.js";const r="/users";async function p(t,o){try{const{data:e}=await s().get(`${r}/auth/login/${t}?code=${o}`);return console.log(e),e}catch(e){console.log(e)}}async function f(){try{const{data:t}=await s().get(`${r}/user`);return t}catch(t){console.log(t)}}const U=()=>{const{social:t}=l(),e=new URL(document.URL).searchParams.get("code"),c=m(),n=async()=>{t&&e?(await p(t,e).then(a=>{const i=a.accessToken;localStorage.setItem("jwt",i)}),await f().then(a=>{localStorage.setItem("imageUrl",a.imageUrl),localStorage.setItem("nickname",a.nickname)}),c("/",{replace:!0})):console.error()};return g.useEffect(()=>{n()},[]),u.jsx(d,{})};export{U as default};
