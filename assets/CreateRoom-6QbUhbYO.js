import{u as C,r as o,j as e}from"./index-iFnTy7A3.js";import{a as L}from"./axios-L6U4YIEh.js";import{d as U}from"./AddOutlined-1YF-tUN7.js";import{H as S}from"./Header-eUfDExoc.js";import"./backSymbol-0aRp874W.js";function T(){const m=C(),d=!0,u="https://i10c203.p.ssafy.io",n=JSON.parse(localStorage.getItem("user")),h=localStorage.getItem("jwt"),[i,p]=o.useState(""),[r,f]=o.useState(""),[g,x]=o.useState(null),[l,j]=o.useState(null),c=o.useRef(),v=a=>{p(a.target.value)},b=a=>{a.preventDefault(),c.current.click()};o.useEffect(()=>{r&&x(e.jsx("img",{className:"room-create-upload-img",src:r}))},[r]);const N=a=>{a.preventDefault();const t=a.target.files[0],s=new FileReader;s.onloadend=()=>{f(s.result)},t&&(s.readAsDataURL(t),R(t))},R=a=>{const t=new FormData;t.append("images",a),t.append("type","LIVEROOM"),L.post(u+"/api/images",t,{headers:{Authorization:h,"Content-Type":"multipart/form-data"}}).then(s=>{j(s.data.imageNames[0])}).catch(s=>console.log(s))},w=a=>{const t=Math.floor(Math.random()*1e6);m(`/live/Gitaehasam${t}`,{state:{isHost:d,roomId:t,imageUrl:l||null,name:i,nickname:n.nickname,userImg:n.imageUrl}})};return e.jsxs(e.Fragment,{children:[e.jsx(S,{centerText:"라이브 생성"}),e.jsx("form",{className:"room-create-form",children:e.jsxs("div",{className:"create-room-wrapper",children:[e.jsxs("div",{className:"room-create-header",children:[e.jsx("div",{className:"room-create-thumbnail-title",children:"특별한 사진으로 라이브를 표현해보세요"}),e.jsxs("div",{className:"room-create-thumbnail",children:[g,e.jsxs("div",{className:`shadow ${r?"reupload-btn blue-bd":"upload-btn bg-blue"}`,onClick:b,children:[!r&&e.jsx(U,{}),r&&"이미지 다시 선택하기"]})]}),e.jsx("input",{ref:c,hidden:!0,type:"file",onChange:N})]}),e.jsxs("div",{className:"room-create-header",children:[e.jsx("div",{className:"room-create-thumbnail-title",children:"제목"}),e.jsx("input",{className:"room-create-title",type:"text",maxLength:15,value:i,onChange:v,placeholder:"라이브 제목을 적어주세요.",required:!0})]}),e.jsx("div",{className:"room-create-btn bg-blue",onClick:w,children:e.jsx("button",{type:"submit",children:"라이브 켜기"})})]})})]})}export{T as default};
