import{r as i,d as p,j as e,R as h,k as v}from"./index-1P3YGDad.js";import{m as j,H as f}from"./Header-D3HjMQNp.js";import{w as g}from"./whiteBox-CgJCDTJb.js";import{a as N}from"./index-kK4qMl3A.js";import{l as b,a as R}from"./atoms-C_nf9jLj.js";import{p as C}from"./MusicSearchApi-CbvlMjAA.js";import"./iconBase-B1aeAzFp.js";import"./common--nYADsze.js";const k=({songInfo:s})=>{const a=i.useRef(null),l=i.useRef(null),[d,m]=i.useState(!1),[c,u]=p(j);i.useEffect(()=>{if(l.current){const t=l.current.scrollWidth,n=l.current.clientWidth;t>n?m(!0):m(!1)}},[]);const r=()=>{a.current.click()},x=t=>{if(t.target.files&&t.target.files[0]){const n=t.target.files[0];u(URL.createObjectURL(n))}};return e.jsxs("div",{className:"MusicDropHeader",children:[e.jsx("div",{className:"album-image-container",children:e.jsx("img",{className:"album-image",src:s.albumImage,alt:""})}),e.jsxs("div",{className:"cover",children:[e.jsx("div",{className:"black-cover"}),e.jsx("div",{className:"black-gradient"}),e.jsxs("div",{className:"content",children:[e.jsx(f,{}),e.jsxs("div",{className:"content-bottom",children:[e.jsxs("div",{children:[e.jsx("div",{className:"title",children:e.jsx("div",{ref:l,className:`scrolling-text ${d?"animated":""}`,children:s.title})}),e.jsx("div",{className:"artist",children:s.artist})]}),e.jsxs("div",{className:"upload-image-div",onClick:r,children:[e.jsx("img",{src:c||g,alt:"",className:"upload-image",onError:t=>{t.currentTarget.src=g}}),!c&&e.jsx(N,{})]}),c&&e.jsx("div",{className:"reselect-image",onClick:r,children:"이미지 다시 선택하기"}),e.jsx("input",{type:"file",ref:a,hidden:!0,onChange:x,className:"image-input"})]})]})]})]})},w=({songInfo:s})=>{const[a,l]=i.useState(0),[d,m]=i.useState(""),c=i.useRef(null),u=h(b),r=h(R),x=h(j),t=o=>{o.target.value.length<=50?(m(o.target.value),l(o.target.value.length)):alert("텍스트는 최대 50자까지 입력 가능합니다.")},n=()=>{const o={longitude:u.lng,latitude:u.lat,location:r,imageUrl:x,comment:d,title:s.title,artist:s.artist,albumImageUrl:s.albumImage};C(s.youtubeId,o)};return e.jsx("div",{className:"MusicDrop",children:e.jsxs("div",{className:"body",children:[e.jsxs("div",{className:"header",children:[e.jsxs("p",{children:[e.jsx("span",{children:r}),"에"]}),"음악을 두고 갈까요?"]}),e.jsxs("div",{className:"input-div",children:[e.jsx("textarea",{onChange:t,placeholder:"노래, 현재 감정, 상황, 관련 에피소드, 거리, 가수 등 떠오르는 말을 적어보세요.",value:d,maxLength:50,className:"input-area",ref:c,required:!0}),e.jsxs("div",{className:"input-count",children:[a,"/50"]})]}),e.jsx("div",{className:"waring-div",children:e.jsx("div",{className:"warning-msg",children:"텍스트 및 사진은 생략이 가능하며 욕설, 성희롱, 비방과 같은 내용은 삭제됩니다."})}),e.jsx("div",{className:"put-btn-div",children:e.jsx("button",{className:"put-btn",onClick:n,children:"쓰롱하기"})})]})})},B=()=>{const a=v().state;return e.jsxs(e.Fragment,{children:[e.jsx(k,{songInfo:a.song}),e.jsx(w,{songInfo:a.song})]})};export{B as default};
