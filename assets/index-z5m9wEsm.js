var Wm=Object.defineProperty;var Gm=(_d,np,rp)=>np in _d?Wm(_d,np,{enumerable:!0,configurable:!0,writable:!0,value:rp}):_d[np]=rp;var Pm=(_d,np,rp)=>(Gm(_d,typeof np!="symbol"?np+"":np,rp),rp);function _mergeNamespaces(_d,np){for(var rp=0;rp<np.length;rp++){const ap=np[rp];if(typeof ap!="string"&&!Array.isArray(ap)){for(const sp in ap)if(sp!=="default"&&!(sp in _d)){const lp=Object.getOwnPropertyDescriptor(ap,sp);lp&&Object.defineProperty(_d,sp,lp.get?lp:{enumerable:!0,get:()=>ap[sp]})}}}return Object.freeze(Object.defineProperty(_d,Symbol.toStringTag,{value:"Module"}))}(function(){const np=document.createElement("link").relList;if(np&&np.supports&&np.supports("modulepreload"))return;for(const sp of document.querySelectorAll('link[rel="modulepreload"]'))ap(sp);new MutationObserver(sp=>{for(const lp of sp)if(lp.type==="childList")for(const up of lp.addedNodes)up.tagName==="LINK"&&up.rel==="modulepreload"&&ap(up)}).observe(document,{childList:!0,subtree:!0});function rp(sp){const lp={};return sp.integrity&&(lp.integrity=sp.integrity),sp.referrerPolicy&&(lp.referrerPolicy=sp.referrerPolicy),sp.crossOrigin==="use-credentials"?lp.credentials="include":sp.crossOrigin==="anonymous"?lp.credentials="omit":lp.credentials="same-origin",lp}function ap(sp){if(sp.ep)return;sp.ep=!0;const lp=rp(sp);fetch(sp.href,lp)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(_d){return _d&&_d.__esModule&&Object.prototype.hasOwnProperty.call(_d,"default")?_d.default:_d}function getAugmentedNamespace(_d){if(_d.__esModule)return _d;var np=_d.default;if(typeof np=="function"){var rp=function ap(){return this instanceof ap?Reflect.construct(np,arguments,this.constructor):np.apply(this,arguments)};rp.prototype=np.prototype}else rp={};return Object.defineProperty(rp,"__esModule",{value:!0}),Object.keys(_d).forEach(function(ap){var sp=Object.getOwnPropertyDescriptor(_d,ap);Object.defineProperty(rp,ap,sp.get?sp:{enumerable:!0,get:function(){return _d[ap]}})}),rp}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$3=Symbol.for("react.element"),n$3=Symbol.for("react.portal"),p$3=Symbol.for("react.fragment"),q$2=Symbol.for("react.strict_mode"),r$2=Symbol.for("react.profiler"),t$2=Symbol.for("react.provider"),u$1=Symbol.for("react.context"),v$3=Symbol.for("react.forward_ref"),w$2=Symbol.for("react.suspense"),x$1=Symbol.for("react.memo"),y$1=Symbol.for("react.lazy"),z$2=Symbol.iterator;function A$2(_d){return _d===null||typeof _d!="object"?null:(_d=z$2&&_d[z$2]||_d["@@iterator"],typeof _d=="function"?_d:null)}var B$2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$2=Object.assign,D$2={};function E$2(_d,np,rp){this.props=_d,this.context=np,this.refs=D$2,this.updater=rp||B$2}E$2.prototype.isReactComponent={};E$2.prototype.setState=function(_d,np){if(typeof _d!="object"&&typeof _d!="function"&&_d!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,_d,np,"setState")};E$2.prototype.forceUpdate=function(_d){this.updater.enqueueForceUpdate(this,_d,"forceUpdate")};function F$1(){}F$1.prototype=E$2.prototype;function G$2(_d,np,rp){this.props=_d,this.context=np,this.refs=D$2,this.updater=rp||B$2}var H$2=G$2.prototype=new F$1;H$2.constructor=G$2;C$2(H$2,E$2.prototype);H$2.isPureReactComponent=!0;var I$2=Array.isArray,J$1=Object.prototype.hasOwnProperty,K$2={current:null},L$2={key:!0,ref:!0,__self:!0,__source:!0};function M$2(_d,np,rp){var ap,sp={},lp=null,up=null;if(np!=null)for(ap in np.ref!==void 0&&(up=np.ref),np.key!==void 0&&(lp=""+np.key),np)J$1.call(np,ap)&&!L$2.hasOwnProperty(ap)&&(sp[ap]=np[ap]);var cp=arguments.length-2;if(cp===1)sp.children=rp;else if(1<cp){for(var dp=Array(cp),fp=0;fp<cp;fp++)dp[fp]=arguments[fp+2];sp.children=dp}if(_d&&_d.defaultProps)for(ap in cp=_d.defaultProps,cp)sp[ap]===void 0&&(sp[ap]=cp[ap]);return{$$typeof:l$3,type:_d,key:lp,ref:up,props:sp,_owner:K$2.current}}function N$2(_d,np){return{$$typeof:l$3,type:_d.type,key:np,ref:_d.ref,props:_d.props,_owner:_d._owner}}function O$2(_d){return typeof _d=="object"&&_d!==null&&_d.$$typeof===l$3}function escape(_d){var np={"=":"=0",":":"=2"};return"$"+_d.replace(/[=:]/g,function(rp){return np[rp]})}var P$2=/\/+/g;function Q$2(_d,np){return typeof _d=="object"&&_d!==null&&_d.key!=null?escape(""+_d.key):np.toString(36)}function R$3(_d,np,rp,ap,sp){var lp=typeof _d;(lp==="undefined"||lp==="boolean")&&(_d=null);var up=!1;if(_d===null)up=!0;else switch(lp){case"string":case"number":up=!0;break;case"object":switch(_d.$$typeof){case l$3:case n$3:up=!0}}if(up)return up=_d,sp=sp(up),_d=ap===""?"."+Q$2(up,0):ap,I$2(sp)?(rp="",_d!=null&&(rp=_d.replace(P$2,"$&/")+"/"),R$3(sp,np,rp,"",function(fp){return fp})):sp!=null&&(O$2(sp)&&(sp=N$2(sp,rp+(!sp.key||up&&up.key===sp.key?"":(""+sp.key).replace(P$2,"$&/")+"/")+_d)),np.push(sp)),1;if(up=0,ap=ap===""?".":ap+":",I$2(_d))for(var cp=0;cp<_d.length;cp++){lp=_d[cp];var dp=ap+Q$2(lp,cp);up+=R$3(lp,np,rp,dp,sp)}else if(dp=A$2(_d),typeof dp=="function")for(_d=dp.call(_d),cp=0;!(lp=_d.next()).done;)lp=lp.value,dp=ap+Q$2(lp,cp++),up+=R$3(lp,np,rp,dp,sp);else if(lp==="object")throw np=String(_d),Error("Objects are not valid as a React child (found: "+(np==="[object Object]"?"object with keys {"+Object.keys(_d).join(", ")+"}":np)+"). If you meant to render a collection of children, use an array instead.");return up}function S$2(_d,np,rp){if(_d==null)return _d;var ap=[],sp=0;return R$3(_d,ap,"","",function(lp){return np.call(rp,lp,sp++)}),ap}function T$2(_d){if(_d._status===-1){var np=_d._result;np=np(),np.then(function(rp){(_d._status===0||_d._status===-1)&&(_d._status=1,_d._result=rp)},function(rp){(_d._status===0||_d._status===-1)&&(_d._status=2,_d._result=rp)}),_d._status===-1&&(_d._status=0,_d._result=np)}if(_d._status===1)return _d._result.default;throw _d._result}var U$2={current:null},V$2={transition:null},W$2={ReactCurrentDispatcher:U$2,ReactCurrentBatchConfig:V$2,ReactCurrentOwner:K$2};react_production_min.Children={map:S$2,forEach:function(_d,np,rp){S$2(_d,function(){np.apply(this,arguments)},rp)},count:function(_d){var np=0;return S$2(_d,function(){np++}),np},toArray:function(_d){return S$2(_d,function(np){return np})||[]},only:function(_d){if(!O$2(_d))throw Error("React.Children.only expected to receive a single React element child.");return _d}};react_production_min.Component=E$2;react_production_min.Fragment=p$3;react_production_min.Profiler=r$2;react_production_min.PureComponent=G$2;react_production_min.StrictMode=q$2;react_production_min.Suspense=w$2;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$2;react_production_min.cloneElement=function(_d,np,rp){if(_d==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+_d+".");var ap=C$2({},_d.props),sp=_d.key,lp=_d.ref,up=_d._owner;if(np!=null){if(np.ref!==void 0&&(lp=np.ref,up=K$2.current),np.key!==void 0&&(sp=""+np.key),_d.type&&_d.type.defaultProps)var cp=_d.type.defaultProps;for(dp in np)J$1.call(np,dp)&&!L$2.hasOwnProperty(dp)&&(ap[dp]=np[dp]===void 0&&cp!==void 0?cp[dp]:np[dp])}var dp=arguments.length-2;if(dp===1)ap.children=rp;else if(1<dp){cp=Array(dp);for(var fp=0;fp<dp;fp++)cp[fp]=arguments[fp+2];ap.children=cp}return{$$typeof:l$3,type:_d.type,key:sp,ref:lp,props:ap,_owner:up}};react_production_min.createContext=function(_d){return _d={$$typeof:u$1,_currentValue:_d,_currentValue2:_d,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},_d.Provider={$$typeof:t$2,_context:_d},_d.Consumer=_d};react_production_min.createElement=M$2;react_production_min.createFactory=function(_d){var np=M$2.bind(null,_d);return np.type=_d,np};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(_d){return{$$typeof:v$3,render:_d}};react_production_min.isValidElement=O$2;react_production_min.lazy=function(_d){return{$$typeof:y$1,_payload:{_status:-1,_result:_d},_init:T$2}};react_production_min.memo=function(_d,np){return{$$typeof:x$1,type:_d,compare:np===void 0?null:np}};react_production_min.startTransition=function(_d){var np=V$2.transition;V$2.transition={};try{_d()}finally{V$2.transition=np}};react_production_min.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};react_production_min.useCallback=function(_d,np){return U$2.current.useCallback(_d,np)};react_production_min.useContext=function(_d){return U$2.current.useContext(_d)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(_d){return U$2.current.useDeferredValue(_d)};react_production_min.useEffect=function(_d,np){return U$2.current.useEffect(_d,np)};react_production_min.useId=function(){return U$2.current.useId()};react_production_min.useImperativeHandle=function(_d,np,rp){return U$2.current.useImperativeHandle(_d,np,rp)};react_production_min.useInsertionEffect=function(_d,np){return U$2.current.useInsertionEffect(_d,np)};react_production_min.useLayoutEffect=function(_d,np){return U$2.current.useLayoutEffect(_d,np)};react_production_min.useMemo=function(_d,np){return U$2.current.useMemo(_d,np)};react_production_min.useReducer=function(_d,np,rp){return U$2.current.useReducer(_d,np,rp)};react_production_min.useRef=function(_d){return U$2.current.useRef(_d)};react_production_min.useState=function(_d){return U$2.current.useState(_d)};react_production_min.useSyncExternalStore=function(_d,np,rp){return U$2.current.useSyncExternalStore(_d,np,rp)};react_production_min.useTransition=function(){return U$2.current.useTransition()};react_production_min.version="18.2.0";react.exports=react_production_min;var reactExports=react.exports;const React=getDefaultExportFromCjs(reactExports),React$1=_mergeNamespaces({__proto__:null,default:React},[reactExports]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$2=reactExports,k$2=Symbol.for("react.element"),l$2=Symbol.for("react.fragment"),m$2=Object.prototype.hasOwnProperty,n$2=f$2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$2={key:!0,ref:!0,__self:!0,__source:!0};function q$1(_d,np,rp){var ap,sp={},lp=null,up=null;rp!==void 0&&(lp=""+rp),np.key!==void 0&&(lp=""+np.key),np.ref!==void 0&&(up=np.ref);for(ap in np)m$2.call(np,ap)&&!p$2.hasOwnProperty(ap)&&(sp[ap]=np[ap]);if(_d&&_d.defaultProps)for(ap in np=_d.defaultProps,np)sp[ap]===void 0&&(sp[ap]=np[ap]);return{$$typeof:k$2,type:_d,key:lp,ref:up,props:sp,_owner:n$2.current}}reactJsxRuntime_production_min.Fragment=l$2;reactJsxRuntime_production_min.jsx=q$1;reactJsxRuntime_production_min.jsxs=q$1;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(_d){function np(Tp,Np){var Lp=Tp.length;Tp.push(Np);e:for(;0<Lp;){var Vp=Lp-1>>>1,zp=Tp[Vp];if(0<sp(zp,Np))Tp[Vp]=Np,Tp[Lp]=zp,Lp=Vp;else break e}}function rp(Tp){return Tp.length===0?null:Tp[0]}function ap(Tp){if(Tp.length===0)return null;var Np=Tp[0],Lp=Tp.pop();if(Lp!==Np){Tp[0]=Lp;e:for(var Vp=0,zp=Tp.length,Wp=zp>>>1;Vp<Wp;){var Up=2*(Vp+1)-1,qp=Tp[Up],Bp=Up+1,Yp=Tp[Bp];if(0>sp(qp,Lp))Bp<zp&&0>sp(Yp,qp)?(Tp[Vp]=Yp,Tp[Bp]=Lp,Vp=Bp):(Tp[Vp]=qp,Tp[Up]=Lp,Vp=Up);else if(Bp<zp&&0>sp(Yp,Lp))Tp[Vp]=Yp,Tp[Bp]=Lp,Vp=Bp;else break e}}return Np}function sp(Tp,Np){var Lp=Tp.sortIndex-Np.sortIndex;return Lp!==0?Lp:Tp.id-Np.id}if(typeof performance=="object"&&typeof performance.now=="function"){var lp=performance;_d.unstable_now=function(){return lp.now()}}else{var up=Date,cp=up.now();_d.unstable_now=function(){return up.now()-cp}}var dp=[],fp=[],pp=1,hp=null,mp=3,gp=!1,vp=!1,xp=!1,Sp=typeof setTimeout=="function"?setTimeout:null,yp=typeof clearTimeout=="function"?clearTimeout:null,bp=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Ep(Tp){for(var Np=rp(fp);Np!==null;){if(Np.callback===null)ap(fp);else if(Np.startTime<=Tp)ap(fp),Np.sortIndex=Np.expirationTime,np(dp,Np);else break;Np=rp(fp)}}function wp(Tp){if(xp=!1,Ep(Tp),!vp)if(rp(dp)!==null)vp=!0,Ip(_p);else{var Np=rp(fp);Np!==null&&kp(wp,Np.startTime-Tp)}}function _p(Tp,Np){vp=!1,xp&&(xp=!1,yp(Rp),Rp=-1),gp=!0;var Lp=mp;try{for(Ep(Np),hp=rp(dp);hp!==null&&(!(hp.expirationTime>Np)||Tp&&!jp());){var Vp=hp.callback;if(typeof Vp=="function"){hp.callback=null,mp=hp.priorityLevel;var zp=Vp(hp.expirationTime<=Np);Np=_d.unstable_now(),typeof zp=="function"?hp.callback=zp:hp===rp(dp)&&ap(dp),Ep(Np)}else ap(dp);hp=rp(dp)}if(hp!==null)var Wp=!0;else{var Up=rp(fp);Up!==null&&kp(wp,Up.startTime-Np),Wp=!1}return Wp}finally{hp=null,mp=Lp,gp=!1}}var Cp=!1,$p=null,Rp=-1,Pp=5,Op=-1;function jp(){return!(_d.unstable_now()-Op<Pp)}function Mp(){if($p!==null){var Tp=_d.unstable_now();Op=Tp;var Np=!0;try{Np=$p(!0,Tp)}finally{Np?Ap():(Cp=!1,$p=null)}}else Cp=!1}var Ap;if(typeof bp=="function")Ap=function(){bp(Mp)};else if(typeof MessageChannel<"u"){var Dp=new MessageChannel,Fp=Dp.port2;Dp.port1.onmessage=Mp,Ap=function(){Fp.postMessage(null)}}else Ap=function(){Sp(Mp,0)};function Ip(Tp){$p=Tp,Cp||(Cp=!0,Ap())}function kp(Tp,Np){Rp=Sp(function(){Tp(_d.unstable_now())},Np)}_d.unstable_IdlePriority=5,_d.unstable_ImmediatePriority=1,_d.unstable_LowPriority=4,_d.unstable_NormalPriority=3,_d.unstable_Profiling=null,_d.unstable_UserBlockingPriority=2,_d.unstable_cancelCallback=function(Tp){Tp.callback=null},_d.unstable_continueExecution=function(){vp||gp||(vp=!0,Ip(_p))},_d.unstable_forceFrameRate=function(Tp){0>Tp||125<Tp?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Pp=0<Tp?Math.floor(1e3/Tp):5},_d.unstable_getCurrentPriorityLevel=function(){return mp},_d.unstable_getFirstCallbackNode=function(){return rp(dp)},_d.unstable_next=function(Tp){switch(mp){case 1:case 2:case 3:var Np=3;break;default:Np=mp}var Lp=mp;mp=Np;try{return Tp()}finally{mp=Lp}},_d.unstable_pauseExecution=function(){},_d.unstable_requestPaint=function(){},_d.unstable_runWithPriority=function(Tp,Np){switch(Tp){case 1:case 2:case 3:case 4:case 5:break;default:Tp=3}var Lp=mp;mp=Tp;try{return Np()}finally{mp=Lp}},_d.unstable_scheduleCallback=function(Tp,Np,Lp){var Vp=_d.unstable_now();switch(typeof Lp=="object"&&Lp!==null?(Lp=Lp.delay,Lp=typeof Lp=="number"&&0<Lp?Vp+Lp:Vp):Lp=Vp,Tp){case 1:var zp=-1;break;case 2:zp=250;break;case 5:zp=1073741823;break;case 4:zp=1e4;break;default:zp=5e3}return zp=Lp+zp,Tp={id:pp++,callback:Np,priorityLevel:Tp,startTime:Lp,expirationTime:zp,sortIndex:-1},Lp>Vp?(Tp.sortIndex=Lp,np(fp,Tp),rp(dp)===null&&Tp===rp(fp)&&(xp?(yp(Rp),Rp=-1):xp=!0,kp(wp,Lp-Vp))):(Tp.sortIndex=zp,np(dp,Tp),vp||gp||(vp=!0,Ip(_p))),Tp},_d.unstable_shouldYield=jp,_d.unstable_wrapCallback=function(Tp){var Np=mp;return function(){var Lp=mp;mp=Np;try{return Tp.apply(this,arguments)}finally{mp=Lp}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa$1=reactExports,ca$1=schedulerExports;function p$1(_d){for(var np="https://reactjs.org/docs/error-decoder.html?invariant="+_d,rp=1;rp<arguments.length;rp++)np+="&args[]="+encodeURIComponent(arguments[rp]);return"Minified React error #"+_d+"; visit "+np+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da$1=new Set,ea$1={};function fa$1(_d,np){ha$1(_d,np),ha$1(_d+"Capture",np)}function ha$1(_d,np){for(ea$1[_d]=np,_d=0;_d<np.length;_d++)da$1.add(np[_d])}var ia$1=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja$1=Object.prototype.hasOwnProperty,ka$1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la$1={},ma$1={};function oa$1(_d){return ja$1.call(ma$1,_d)?!0:ja$1.call(la$1,_d)?!1:ka$1.test(_d)?ma$1[_d]=!0:(la$1[_d]=!0,!1)}function pa$1(_d,np,rp,ap){if(rp!==null&&rp.type===0)return!1;switch(typeof np){case"function":case"symbol":return!0;case"boolean":return ap?!1:rp!==null?!rp.acceptsBooleans:(_d=_d.toLowerCase().slice(0,5),_d!=="data-"&&_d!=="aria-");default:return!1}}function qa$1(_d,np,rp,ap){if(np===null||typeof np>"u"||pa$1(_d,np,rp,ap))return!0;if(ap)return!1;if(rp!==null)switch(rp.type){case 3:return!np;case 4:return np===!1;case 5:return isNaN(np);case 6:return isNaN(np)||1>np}return!1}function v$2(_d,np,rp,ap,sp,lp,up){this.acceptsBooleans=np===2||np===3||np===4,this.attributeName=ap,this.attributeNamespace=sp,this.mustUseProperty=rp,this.propertyName=_d,this.type=np,this.sanitizeURL=lp,this.removeEmptyString=up}var z$1={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(_d){z$1[_d]=new v$2(_d,0,!1,_d,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(_d){var np=_d[0];z$1[np]=new v$2(np,1,!1,_d[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(_d){z$1[_d]=new v$2(_d,2,!1,_d.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(_d){z$1[_d]=new v$2(_d,2,!1,_d,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(_d){z$1[_d]=new v$2(_d,3,!1,_d.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(_d){z$1[_d]=new v$2(_d,3,!0,_d,null,!1,!1)});["capture","download"].forEach(function(_d){z$1[_d]=new v$2(_d,4,!1,_d,null,!1,!1)});["cols","rows","size","span"].forEach(function(_d){z$1[_d]=new v$2(_d,6,!1,_d,null,!1,!1)});["rowSpan","start"].forEach(function(_d){z$1[_d]=new v$2(_d,5,!1,_d.toLowerCase(),null,!1,!1)});var ra$1=/[\-:]([a-z])/g;function sa$1(_d){return _d[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(_d){var np=_d.replace(ra$1,sa$1);z$1[np]=new v$2(np,1,!1,_d,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(_d){var np=_d.replace(ra$1,sa$1);z$1[np]=new v$2(np,1,!1,_d,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(_d){var np=_d.replace(ra$1,sa$1);z$1[np]=new v$2(np,1,!1,_d,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(_d){z$1[_d]=new v$2(_d,1,!1,_d.toLowerCase(),null,!1,!1)});z$1.xlinkHref=new v$2("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(_d){z$1[_d]=new v$2(_d,1,!1,_d.toLowerCase(),null,!0,!0)});function ta$1(_d,np,rp,ap){var sp=z$1.hasOwnProperty(np)?z$1[np]:null;(sp!==null?sp.type!==0:ap||!(2<np.length)||np[0]!=="o"&&np[0]!=="O"||np[1]!=="n"&&np[1]!=="N")&&(qa$1(np,rp,sp,ap)&&(rp=null),ap||sp===null?oa$1(np)&&(rp===null?_d.removeAttribute(np):_d.setAttribute(np,""+rp)):sp.mustUseProperty?_d[sp.propertyName]=rp===null?sp.type===3?!1:"":rp:(np=sp.attributeName,ap=sp.attributeNamespace,rp===null?_d.removeAttribute(np):(sp=sp.type,rp=sp===3||sp===4&&rp===!0?"":""+rp,ap?_d.setAttributeNS(ap,np,rp):_d.setAttribute(np,rp))))}var ua$1=aa$1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va$1=Symbol.for("react.element"),wa$1=Symbol.for("react.portal"),ya$1=Symbol.for("react.fragment"),za$1=Symbol.for("react.strict_mode"),Aa$1=Symbol.for("react.profiler"),Ba$1=Symbol.for("react.provider"),Ca$1=Symbol.for("react.context"),Da$1=Symbol.for("react.forward_ref"),Ea$1=Symbol.for("react.suspense"),Fa$1=Symbol.for("react.suspense_list"),Ga$1=Symbol.for("react.memo"),Ha$1=Symbol.for("react.lazy"),Ia$1=Symbol.for("react.offscreen"),Ja$1=Symbol.iterator;function Ka$1(_d){return _d===null||typeof _d!="object"?null:(_d=Ja$1&&_d[Ja$1]||_d["@@iterator"],typeof _d=="function"?_d:null)}var A$1=Object.assign,La$1;function Ma$1(_d){if(La$1===void 0)try{throw Error()}catch(rp){var np=rp.stack.trim().match(/\n( *(at )?)/);La$1=np&&np[1]||""}return`
`+La$1+_d}var Na$1=!1;function Oa$1(_d,np){if(!_d||Na$1)return"";Na$1=!0;var rp=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(np)if(np=function(){throw Error()},Object.defineProperty(np.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(np,[])}catch(fp){var ap=fp}Reflect.construct(_d,[],np)}else{try{np.call()}catch(fp){ap=fp}_d.call(np.prototype)}else{try{throw Error()}catch(fp){ap=fp}_d()}}catch(fp){if(fp&&ap&&typeof fp.stack=="string"){for(var sp=fp.stack.split(`
`),lp=ap.stack.split(`
`),up=sp.length-1,cp=lp.length-1;1<=up&&0<=cp&&sp[up]!==lp[cp];)cp--;for(;1<=up&&0<=cp;up--,cp--)if(sp[up]!==lp[cp]){if(up!==1||cp!==1)do if(up--,cp--,0>cp||sp[up]!==lp[cp]){var dp=`
`+sp[up].replace(" at new "," at ");return _d.displayName&&dp.includes("<anonymous>")&&(dp=dp.replace("<anonymous>",_d.displayName)),dp}while(1<=up&&0<=cp);break}}}finally{Na$1=!1,Error.prepareStackTrace=rp}return(_d=_d?_d.displayName||_d.name:"")?Ma$1(_d):""}function Pa$1(_d){switch(_d.tag){case 5:return Ma$1(_d.type);case 16:return Ma$1("Lazy");case 13:return Ma$1("Suspense");case 19:return Ma$1("SuspenseList");case 0:case 2:case 15:return _d=Oa$1(_d.type,!1),_d;case 11:return _d=Oa$1(_d.type.render,!1),_d;case 1:return _d=Oa$1(_d.type,!0),_d;default:return""}}function Qa$1(_d){if(_d==null)return null;if(typeof _d=="function")return _d.displayName||_d.name||null;if(typeof _d=="string")return _d;switch(_d){case ya$1:return"Fragment";case wa$1:return"Portal";case Aa$1:return"Profiler";case za$1:return"StrictMode";case Ea$1:return"Suspense";case Fa$1:return"SuspenseList"}if(typeof _d=="object")switch(_d.$$typeof){case Ca$1:return(_d.displayName||"Context")+".Consumer";case Ba$1:return(_d._context.displayName||"Context")+".Provider";case Da$1:var np=_d.render;return _d=_d.displayName,_d||(_d=np.displayName||np.name||"",_d=_d!==""?"ForwardRef("+_d+")":"ForwardRef"),_d;case Ga$1:return np=_d.displayName||null,np!==null?np:Qa$1(_d.type)||"Memo";case Ha$1:np=_d._payload,_d=_d._init;try{return Qa$1(_d(np))}catch{}}return null}function Ra$1(_d){var np=_d.type;switch(_d.tag){case 24:return"Cache";case 9:return(np.displayName||"Context")+".Consumer";case 10:return(np._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return _d=np.render,_d=_d.displayName||_d.name||"",np.displayName||(_d!==""?"ForwardRef("+_d+")":"ForwardRef");case 7:return"Fragment";case 5:return np;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa$1(np);case 8:return np===za$1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof np=="function")return np.displayName||np.name||null;if(typeof np=="string")return np}return null}function Sa$1(_d){switch(typeof _d){case"boolean":case"number":case"string":case"undefined":return _d;case"object":return _d;default:return""}}function Ta$1(_d){var np=_d.type;return(_d=_d.nodeName)&&_d.toLowerCase()==="input"&&(np==="checkbox"||np==="radio")}function Ua$1(_d){var np=Ta$1(_d)?"checked":"value",rp=Object.getOwnPropertyDescriptor(_d.constructor.prototype,np),ap=""+_d[np];if(!_d.hasOwnProperty(np)&&typeof rp<"u"&&typeof rp.get=="function"&&typeof rp.set=="function"){var sp=rp.get,lp=rp.set;return Object.defineProperty(_d,np,{configurable:!0,get:function(){return sp.call(this)},set:function(up){ap=""+up,lp.call(this,up)}}),Object.defineProperty(_d,np,{enumerable:rp.enumerable}),{getValue:function(){return ap},setValue:function(up){ap=""+up},stopTracking:function(){_d._valueTracker=null,delete _d[np]}}}}function Va$1(_d){_d._valueTracker||(_d._valueTracker=Ua$1(_d))}function Wa$1(_d){if(!_d)return!1;var np=_d._valueTracker;if(!np)return!0;var rp=np.getValue(),ap="";return _d&&(ap=Ta$1(_d)?_d.checked?"true":"false":_d.value),_d=ap,_d!==rp?(np.setValue(_d),!0):!1}function Xa$1(_d){if(_d=_d||(typeof document<"u"?document:void 0),typeof _d>"u")return null;try{return _d.activeElement||_d.body}catch{return _d.body}}function Ya$1(_d,np){var rp=np.checked;return A$1({},np,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:rp??_d._wrapperState.initialChecked})}function Za$1(_d,np){var rp=np.defaultValue==null?"":np.defaultValue,ap=np.checked!=null?np.checked:np.defaultChecked;rp=Sa$1(np.value!=null?np.value:rp),_d._wrapperState={initialChecked:ap,initialValue:rp,controlled:np.type==="checkbox"||np.type==="radio"?np.checked!=null:np.value!=null}}function ab(_d,np){np=np.checked,np!=null&&ta$1(_d,"checked",np,!1)}function bb(_d,np){ab(_d,np);var rp=Sa$1(np.value),ap=np.type;if(rp!=null)ap==="number"?(rp===0&&_d.value===""||_d.value!=rp)&&(_d.value=""+rp):_d.value!==""+rp&&(_d.value=""+rp);else if(ap==="submit"||ap==="reset"){_d.removeAttribute("value");return}np.hasOwnProperty("value")?cb(_d,np.type,rp):np.hasOwnProperty("defaultValue")&&cb(_d,np.type,Sa$1(np.defaultValue)),np.checked==null&&np.defaultChecked!=null&&(_d.defaultChecked=!!np.defaultChecked)}function db(_d,np,rp){if(np.hasOwnProperty("value")||np.hasOwnProperty("defaultValue")){var ap=np.type;if(!(ap!=="submit"&&ap!=="reset"||np.value!==void 0&&np.value!==null))return;np=""+_d._wrapperState.initialValue,rp||np===_d.value||(_d.value=np),_d.defaultValue=np}rp=_d.name,rp!==""&&(_d.name=""),_d.defaultChecked=!!_d._wrapperState.initialChecked,rp!==""&&(_d.name=rp)}function cb(_d,np,rp){(np!=="number"||Xa$1(_d.ownerDocument)!==_d)&&(rp==null?_d.defaultValue=""+_d._wrapperState.initialValue:_d.defaultValue!==""+rp&&(_d.defaultValue=""+rp))}var eb=Array.isArray;function fb(_d,np,rp,ap){if(_d=_d.options,np){np={};for(var sp=0;sp<rp.length;sp++)np["$"+rp[sp]]=!0;for(rp=0;rp<_d.length;rp++)sp=np.hasOwnProperty("$"+_d[rp].value),_d[rp].selected!==sp&&(_d[rp].selected=sp),sp&&ap&&(_d[rp].defaultSelected=!0)}else{for(rp=""+Sa$1(rp),np=null,sp=0;sp<_d.length;sp++){if(_d[sp].value===rp){_d[sp].selected=!0,ap&&(_d[sp].defaultSelected=!0);return}np!==null||_d[sp].disabled||(np=_d[sp])}np!==null&&(np.selected=!0)}}function gb(_d,np){if(np.dangerouslySetInnerHTML!=null)throw Error(p$1(91));return A$1({},np,{value:void 0,defaultValue:void 0,children:""+_d._wrapperState.initialValue})}function hb(_d,np){var rp=np.value;if(rp==null){if(rp=np.children,np=np.defaultValue,rp!=null){if(np!=null)throw Error(p$1(92));if(eb(rp)){if(1<rp.length)throw Error(p$1(93));rp=rp[0]}np=rp}np==null&&(np=""),rp=np}_d._wrapperState={initialValue:Sa$1(rp)}}function ib(_d,np){var rp=Sa$1(np.value),ap=Sa$1(np.defaultValue);rp!=null&&(rp=""+rp,rp!==_d.value&&(_d.value=rp),np.defaultValue==null&&_d.defaultValue!==rp&&(_d.defaultValue=rp)),ap!=null&&(_d.defaultValue=""+ap)}function jb(_d){var np=_d.textContent;np===_d._wrapperState.initialValue&&np!==""&&np!==null&&(_d.value=np)}function kb(_d){switch(_d){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(_d,np){return _d==null||_d==="http://www.w3.org/1999/xhtml"?kb(np):_d==="http://www.w3.org/2000/svg"&&np==="foreignObject"?"http://www.w3.org/1999/xhtml":_d}var mb,nb=function(_d){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(np,rp,ap,sp){MSApp.execUnsafeLocalFunction(function(){return _d(np,rp,ap,sp)})}:_d}(function(_d,np){if(_d.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in _d)_d.innerHTML=np;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+np.valueOf().toString()+"</svg>",np=mb.firstChild;_d.firstChild;)_d.removeChild(_d.firstChild);for(;np.firstChild;)_d.appendChild(np.firstChild)}});function ob(_d,np){if(np){var rp=_d.firstChild;if(rp&&rp===_d.lastChild&&rp.nodeType===3){rp.nodeValue=np;return}}_d.textContent=np}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(_d){qb.forEach(function(np){np=np+_d.charAt(0).toUpperCase()+_d.substring(1),pb[np]=pb[_d]})});function rb(_d,np,rp){return np==null||typeof np=="boolean"||np===""?"":rp||typeof np!="number"||np===0||pb.hasOwnProperty(_d)&&pb[_d]?(""+np).trim():np+"px"}function sb(_d,np){_d=_d.style;for(var rp in np)if(np.hasOwnProperty(rp)){var ap=rp.indexOf("--")===0,sp=rb(rp,np[rp],ap);rp==="float"&&(rp="cssFloat"),ap?_d.setProperty(rp,sp):_d[rp]=sp}}var tb=A$1({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(_d,np){if(np){if(tb[_d]&&(np.children!=null||np.dangerouslySetInnerHTML!=null))throw Error(p$1(137,_d));if(np.dangerouslySetInnerHTML!=null){if(np.children!=null)throw Error(p$1(60));if(typeof np.dangerouslySetInnerHTML!="object"||!("__html"in np.dangerouslySetInnerHTML))throw Error(p$1(61))}if(np.style!=null&&typeof np.style!="object")throw Error(p$1(62))}}function vb(_d,np){if(_d.indexOf("-")===-1)return typeof np.is=="string";switch(_d){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(_d){return _d=_d.target||_d.srcElement||window,_d.correspondingUseElement&&(_d=_d.correspondingUseElement),_d.nodeType===3?_d.parentNode:_d}var yb=null,zb=null,Ab=null;function Bb(_d){if(_d=Cb(_d)){if(typeof yb!="function")throw Error(p$1(280));var np=_d.stateNode;np&&(np=Db(np),yb(_d.stateNode,_d.type,np))}}function Eb(_d){zb?Ab?Ab.push(_d):Ab=[_d]:zb=_d}function Fb(){if(zb){var _d=zb,np=Ab;if(Ab=zb=null,Bb(_d),np)for(_d=0;_d<np.length;_d++)Bb(np[_d])}}function Gb(_d,np){return _d(np)}function Hb(){}var Ib=!1;function Jb(_d,np,rp){if(Ib)return _d(np,rp);Ib=!0;try{return Gb(_d,np,rp)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(_d,np){var rp=_d.stateNode;if(rp===null)return null;var ap=Db(rp);if(ap===null)return null;rp=ap[np];e:switch(np){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(ap=!ap.disabled)||(_d=_d.type,ap=!(_d==="button"||_d==="input"||_d==="select"||_d==="textarea")),_d=!ap;break e;default:_d=!1}if(_d)return null;if(rp&&typeof rp!="function")throw Error(p$1(231,np,typeof rp));return rp}var Lb=!1;if(ia$1)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(_d,np,rp,ap,sp,lp,up,cp,dp){var fp=Array.prototype.slice.call(arguments,3);try{np.apply(rp,fp)}catch(pp){this.onError(pp)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(_d){Ob=!0,Pb=_d}};function Tb(_d,np,rp,ap,sp,lp,up,cp,dp){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(_d,np,rp,ap,sp,lp,up,cp,dp){if(Tb.apply(this,arguments),Ob){if(Ob){var fp=Pb;Ob=!1,Pb=null}else throw Error(p$1(198));Qb||(Qb=!0,Rb=fp)}}function Vb(_d){var np=_d,rp=_d;if(_d.alternate)for(;np.return;)np=np.return;else{_d=np;do np=_d,np.flags&4098&&(rp=np.return),_d=np.return;while(_d)}return np.tag===3?rp:null}function Wb(_d){if(_d.tag===13){var np=_d.memoizedState;if(np===null&&(_d=_d.alternate,_d!==null&&(np=_d.memoizedState)),np!==null)return np.dehydrated}return null}function Xb(_d){if(Vb(_d)!==_d)throw Error(p$1(188))}function Yb(_d){var np=_d.alternate;if(!np){if(np=Vb(_d),np===null)throw Error(p$1(188));return np!==_d?null:_d}for(var rp=_d,ap=np;;){var sp=rp.return;if(sp===null)break;var lp=sp.alternate;if(lp===null){if(ap=sp.return,ap!==null){rp=ap;continue}break}if(sp.child===lp.child){for(lp=sp.child;lp;){if(lp===rp)return Xb(sp),_d;if(lp===ap)return Xb(sp),np;lp=lp.sibling}throw Error(p$1(188))}if(rp.return!==ap.return)rp=sp,ap=lp;else{for(var up=!1,cp=sp.child;cp;){if(cp===rp){up=!0,rp=sp,ap=lp;break}if(cp===ap){up=!0,ap=sp,rp=lp;break}cp=cp.sibling}if(!up){for(cp=lp.child;cp;){if(cp===rp){up=!0,rp=lp,ap=sp;break}if(cp===ap){up=!0,ap=lp,rp=sp;break}cp=cp.sibling}if(!up)throw Error(p$1(189))}}if(rp.alternate!==ap)throw Error(p$1(190))}if(rp.tag!==3)throw Error(p$1(188));return rp.stateNode.current===rp?_d:np}function Zb(_d){return _d=Yb(_d),_d!==null?$b(_d):null}function $b(_d){if(_d.tag===5||_d.tag===6)return _d;for(_d=_d.child;_d!==null;){var np=$b(_d);if(np!==null)return np;_d=_d.sibling}return null}var ac$1=ca$1.unstable_scheduleCallback,bc$1=ca$1.unstable_cancelCallback,cc$1=ca$1.unstable_shouldYield,dc$1=ca$1.unstable_requestPaint,B$1=ca$1.unstable_now,ec$1=ca$1.unstable_getCurrentPriorityLevel,fc$1=ca$1.unstable_ImmediatePriority,gc$1=ca$1.unstable_UserBlockingPriority,hc$1=ca$1.unstable_NormalPriority,ic$1=ca$1.unstable_LowPriority,jc$1=ca$1.unstable_IdlePriority,kc$1=null,lc$1=null;function mc$1(_d){if(lc$1&&typeof lc$1.onCommitFiberRoot=="function")try{lc$1.onCommitFiberRoot(kc$1,_d,void 0,(_d.current.flags&128)===128)}catch{}}var oc$1=Math.clz32?Math.clz32:nc$1,pc$1=Math.log,qc$1=Math.LN2;function nc$1(_d){return _d>>>=0,_d===0?32:31-(pc$1(_d)/qc$1|0)|0}var rc$1=64,sc$1=4194304;function tc$1(_d){switch(_d&-_d){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return _d&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return _d&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return _d}}function uc$1(_d,np){var rp=_d.pendingLanes;if(rp===0)return 0;var ap=0,sp=_d.suspendedLanes,lp=_d.pingedLanes,up=rp&268435455;if(up!==0){var cp=up&~sp;cp!==0?ap=tc$1(cp):(lp&=up,lp!==0&&(ap=tc$1(lp)))}else up=rp&~sp,up!==0?ap=tc$1(up):lp!==0&&(ap=tc$1(lp));if(ap===0)return 0;if(np!==0&&np!==ap&&!(np&sp)&&(sp=ap&-ap,lp=np&-np,sp>=lp||sp===16&&(lp&4194240)!==0))return np;if(ap&4&&(ap|=rp&16),np=_d.entangledLanes,np!==0)for(_d=_d.entanglements,np&=ap;0<np;)rp=31-oc$1(np),sp=1<<rp,ap|=_d[rp],np&=~sp;return ap}function vc$1(_d,np){switch(_d){case 1:case 2:case 4:return np+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return np+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc$1(_d,np){for(var rp=_d.suspendedLanes,ap=_d.pingedLanes,sp=_d.expirationTimes,lp=_d.pendingLanes;0<lp;){var up=31-oc$1(lp),cp=1<<up,dp=sp[up];dp===-1?(!(cp&rp)||cp&ap)&&(sp[up]=vc$1(cp,np)):dp<=np&&(_d.expiredLanes|=cp),lp&=~cp}}function xc$1(_d){return _d=_d.pendingLanes&-1073741825,_d!==0?_d:_d&1073741824?1073741824:0}function yc$1(){var _d=rc$1;return rc$1<<=1,!(rc$1&4194240)&&(rc$1=64),_d}function zc$1(_d){for(var np=[],rp=0;31>rp;rp++)np.push(_d);return np}function Ac$1(_d,np,rp){_d.pendingLanes|=np,np!==536870912&&(_d.suspendedLanes=0,_d.pingedLanes=0),_d=_d.eventTimes,np=31-oc$1(np),_d[np]=rp}function Bc$1(_d,np){var rp=_d.pendingLanes&~np;_d.pendingLanes=np,_d.suspendedLanes=0,_d.pingedLanes=0,_d.expiredLanes&=np,_d.mutableReadLanes&=np,_d.entangledLanes&=np,np=_d.entanglements;var ap=_d.eventTimes;for(_d=_d.expirationTimes;0<rp;){var sp=31-oc$1(rp),lp=1<<sp;np[sp]=0,ap[sp]=-1,_d[sp]=-1,rp&=~lp}}function Cc$1(_d,np){var rp=_d.entangledLanes|=np;for(_d=_d.entanglements;rp;){var ap=31-oc$1(rp),sp=1<<ap;sp&np|_d[ap]&np&&(_d[ap]|=np),rp&=~sp}}var C$1=0;function Dc$1(_d){return _d&=-_d,1<_d?4<_d?_d&268435455?16:536870912:4:1}var Ec$1,Fc$1,Gc$1,Hc$1,Ic$1,Jc$1=!1,Kc$1=[],Lc$1=null,Mc$1=null,Nc$1=null,Oc$1=new Map,Pc$1=new Map,Qc$1=[],Rc$1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc$1(_d,np){switch(_d){case"focusin":case"focusout":Lc$1=null;break;case"dragenter":case"dragleave":Mc$1=null;break;case"mouseover":case"mouseout":Nc$1=null;break;case"pointerover":case"pointerout":Oc$1.delete(np.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc$1.delete(np.pointerId)}}function Tc$1(_d,np,rp,ap,sp,lp){return _d===null||_d.nativeEvent!==lp?(_d={blockedOn:np,domEventName:rp,eventSystemFlags:ap,nativeEvent:lp,targetContainers:[sp]},np!==null&&(np=Cb(np),np!==null&&Fc$1(np)),_d):(_d.eventSystemFlags|=ap,np=_d.targetContainers,sp!==null&&np.indexOf(sp)===-1&&np.push(sp),_d)}function Uc$1(_d,np,rp,ap,sp){switch(np){case"focusin":return Lc$1=Tc$1(Lc$1,_d,np,rp,ap,sp),!0;case"dragenter":return Mc$1=Tc$1(Mc$1,_d,np,rp,ap,sp),!0;case"mouseover":return Nc$1=Tc$1(Nc$1,_d,np,rp,ap,sp),!0;case"pointerover":var lp=sp.pointerId;return Oc$1.set(lp,Tc$1(Oc$1.get(lp)||null,_d,np,rp,ap,sp)),!0;case"gotpointercapture":return lp=sp.pointerId,Pc$1.set(lp,Tc$1(Pc$1.get(lp)||null,_d,np,rp,ap,sp)),!0}return!1}function Vc$1(_d){var np=Wc$1(_d.target);if(np!==null){var rp=Vb(np);if(rp!==null){if(np=rp.tag,np===13){if(np=Wb(rp),np!==null){_d.blockedOn=np,Ic$1(_d.priority,function(){Gc$1(rp)});return}}else if(np===3&&rp.stateNode.current.memoizedState.isDehydrated){_d.blockedOn=rp.tag===3?rp.stateNode.containerInfo:null;return}}}_d.blockedOn=null}function Xc$1(_d){if(_d.blockedOn!==null)return!1;for(var np=_d.targetContainers;0<np.length;){var rp=Yc$1(_d.domEventName,_d.eventSystemFlags,np[0],_d.nativeEvent);if(rp===null){rp=_d.nativeEvent;var ap=new rp.constructor(rp.type,rp);wb=ap,rp.target.dispatchEvent(ap),wb=null}else return np=Cb(rp),np!==null&&Fc$1(np),_d.blockedOn=rp,!1;np.shift()}return!0}function Zc$1(_d,np,rp){Xc$1(_d)&&rp.delete(np)}function $c$1(){Jc$1=!1,Lc$1!==null&&Xc$1(Lc$1)&&(Lc$1=null),Mc$1!==null&&Xc$1(Mc$1)&&(Mc$1=null),Nc$1!==null&&Xc$1(Nc$1)&&(Nc$1=null),Oc$1.forEach(Zc$1),Pc$1.forEach(Zc$1)}function ad(_d,np){_d.blockedOn===np&&(_d.blockedOn=null,Jc$1||(Jc$1=!0,ca$1.unstable_scheduleCallback(ca$1.unstable_NormalPriority,$c$1)))}function bd(_d){function np(sp){return ad(sp,_d)}if(0<Kc$1.length){ad(Kc$1[0],_d);for(var rp=1;rp<Kc$1.length;rp++){var ap=Kc$1[rp];ap.blockedOn===_d&&(ap.blockedOn=null)}}for(Lc$1!==null&&ad(Lc$1,_d),Mc$1!==null&&ad(Mc$1,_d),Nc$1!==null&&ad(Nc$1,_d),Oc$1.forEach(np),Pc$1.forEach(np),rp=0;rp<Qc$1.length;rp++)ap=Qc$1[rp],ap.blockedOn===_d&&(ap.blockedOn=null);for(;0<Qc$1.length&&(rp=Qc$1[0],rp.blockedOn===null);)Vc$1(rp),rp.blockedOn===null&&Qc$1.shift()}var cd=ua$1.ReactCurrentBatchConfig,dd=!0;function ed(_d,np,rp,ap){var sp=C$1,lp=cd.transition;cd.transition=null;try{C$1=1,fd(_d,np,rp,ap)}finally{C$1=sp,cd.transition=lp}}function gd(_d,np,rp,ap){var sp=C$1,lp=cd.transition;cd.transition=null;try{C$1=4,fd(_d,np,rp,ap)}finally{C$1=sp,cd.transition=lp}}function fd(_d,np,rp,ap){if(dd){var sp=Yc$1(_d,np,rp,ap);if(sp===null)hd(_d,np,ap,id$2,rp),Sc$1(_d,ap);else if(Uc$1(sp,_d,np,rp,ap))ap.stopPropagation();else if(Sc$1(_d,ap),np&4&&-1<Rc$1.indexOf(_d)){for(;sp!==null;){var lp=Cb(sp);if(lp!==null&&Ec$1(lp),lp=Yc$1(_d,np,rp,ap),lp===null&&hd(_d,np,ap,id$2,rp),lp===sp)break;sp=lp}sp!==null&&ap.stopPropagation()}else hd(_d,np,ap,null,rp)}}var id$2=null;function Yc$1(_d,np,rp,ap){if(id$2=null,_d=xb(ap),_d=Wc$1(_d),_d!==null)if(np=Vb(_d),np===null)_d=null;else if(rp=np.tag,rp===13){if(_d=Wb(np),_d!==null)return _d;_d=null}else if(rp===3){if(np.stateNode.current.memoizedState.isDehydrated)return np.tag===3?np.stateNode.containerInfo:null;_d=null}else np!==_d&&(_d=null);return id$2=_d,null}function jd(_d){switch(_d){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec$1()){case fc$1:return 1;case gc$1:return 4;case hc$1:case ic$1:return 16;case jc$1:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var _d,np=ld,rp=np.length,ap,sp="value"in kd?kd.value:kd.textContent,lp=sp.length;for(_d=0;_d<rp&&np[_d]===sp[_d];_d++);var up=rp-_d;for(ap=1;ap<=up&&np[rp-ap]===sp[lp-ap];ap++);return md=sp.slice(_d,1<ap?1-ap:void 0)}function od(_d){var np=_d.keyCode;return"charCode"in _d?(_d=_d.charCode,_d===0&&np===13&&(_d=13)):_d=np,_d===10&&(_d=13),32<=_d||_d===13?_d:0}function pd(){return!0}function qd(){return!1}function rd(_d){function np(rp,ap,sp,lp,up){this._reactName=rp,this._targetInst=sp,this.type=ap,this.nativeEvent=lp,this.target=up,this.currentTarget=null;for(var cp in _d)_d.hasOwnProperty(cp)&&(rp=_d[cp],this[cp]=rp?rp(lp):lp[cp]);return this.isDefaultPrevented=(lp.defaultPrevented!=null?lp.defaultPrevented:lp.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A$1(np.prototype,{preventDefault:function(){this.defaultPrevented=!0;var rp=this.nativeEvent;rp&&(rp.preventDefault?rp.preventDefault():typeof rp.returnValue!="unknown"&&(rp.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var rp=this.nativeEvent;rp&&(rp.stopPropagation?rp.stopPropagation():typeof rp.cancelBubble!="unknown"&&(rp.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),np}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(_d){return _d.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A$1({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A$1({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(_d){return _d.relatedTarget===void 0?_d.fromElement===_d.srcElement?_d.toElement:_d.fromElement:_d.relatedTarget},movementX:function(_d){return"movementX"in _d?_d.movementX:(_d!==yd&&(yd&&_d.type==="mousemove"?(wd=_d.screenX-yd.screenX,xd=_d.screenY-yd.screenY):xd=wd=0,yd=_d),wd)},movementY:function(_d){return"movementY"in _d?_d.movementY:xd}}),Bd=rd(Ad),Cd=A$1({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A$1({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A$1({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A$1({},sd,{clipboardData:function(_d){return"clipboardData"in _d?_d.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A$1({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(_d){var np=this.nativeEvent;return np.getModifierState?np.getModifierState(_d):(_d=Od[_d])?!!np[_d]:!1}function zd(){return Pd}var Qd=A$1({},ud,{key:function(_d){if(_d.key){var np=Md[_d.key]||_d.key;if(np!=="Unidentified")return np}return _d.type==="keypress"?(_d=od(_d),_d===13?"Enter":String.fromCharCode(_d)):_d.type==="keydown"||_d.type==="keyup"?Nd[_d.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(_d){return _d.type==="keypress"?od(_d):0},keyCode:function(_d){return _d.type==="keydown"||_d.type==="keyup"?_d.keyCode:0},which:function(_d){return _d.type==="keypress"?od(_d):_d.type==="keydown"||_d.type==="keyup"?_d.keyCode:0}}),Rd=rd(Qd),Sd=A$1({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A$1({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A$1({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A$1({},Ad,{deltaX:function(_d){return"deltaX"in _d?_d.deltaX:"wheelDeltaX"in _d?-_d.wheelDeltaX:0},deltaY:function(_d){return"deltaY"in _d?_d.deltaY:"wheelDeltaY"in _d?-_d.wheelDeltaY:"wheelDelta"in _d?-_d.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae$1=ia$1&&"CompositionEvent"in window,be$1=null;ia$1&&"documentMode"in document&&(be$1=document.documentMode);var ce$1=ia$1&&"TextEvent"in window&&!be$1,de$1=ia$1&&(!ae$1||be$1&&8<be$1&&11>=be$1),ee$1=" ",fe$1=!1;function ge$1(_d,np){switch(_d){case"keyup":return $d.indexOf(np.keyCode)!==-1;case"keydown":return np.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he$1(_d){return _d=_d.detail,typeof _d=="object"&&"data"in _d?_d.data:null}var ie$1=!1;function je$1(_d,np){switch(_d){case"compositionend":return he$1(np);case"keypress":return np.which!==32?null:(fe$1=!0,ee$1);case"textInput":return _d=np.data,_d===ee$1&&fe$1?null:_d;default:return null}}function ke$1(_d,np){if(ie$1)return _d==="compositionend"||!ae$1&&ge$1(_d,np)?(_d=nd(),md=ld=kd=null,ie$1=!1,_d):null;switch(_d){case"paste":return null;case"keypress":if(!(np.ctrlKey||np.altKey||np.metaKey)||np.ctrlKey&&np.altKey){if(np.char&&1<np.char.length)return np.char;if(np.which)return String.fromCharCode(np.which)}return null;case"compositionend":return de$1&&np.locale!=="ko"?null:np.data;default:return null}}var le$1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me$1(_d){var np=_d&&_d.nodeName&&_d.nodeName.toLowerCase();return np==="input"?!!le$1[_d.type]:np==="textarea"}function ne$1(_d,np,rp,ap){Eb(ap),np=oe$1(np,"onChange"),0<np.length&&(rp=new td("onChange","change",null,rp,ap),_d.push({event:rp,listeners:np}))}var pe$1=null,qe$1=null;function re$3(_d){se$1(_d,0)}function te$1(_d){var np=ue$1(_d);if(Wa$1(np))return _d}function ve$1(_d,np){if(_d==="change")return np}var we$1=!1;if(ia$1){var xe$1;if(ia$1){var ye$1="oninput"in document;if(!ye$1){var ze$1=document.createElement("div");ze$1.setAttribute("oninput","return;"),ye$1=typeof ze$1.oninput=="function"}xe$1=ye$1}else xe$1=!1;we$1=xe$1&&(!document.documentMode||9<document.documentMode)}function Ae$1(){pe$1&&(pe$1.detachEvent("onpropertychange",Be$1),qe$1=pe$1=null)}function Be$1(_d){if(_d.propertyName==="value"&&te$1(qe$1)){var np=[];ne$1(np,qe$1,_d,xb(_d)),Jb(re$3,np)}}function Ce$1(_d,np,rp){_d==="focusin"?(Ae$1(),pe$1=np,qe$1=rp,pe$1.attachEvent("onpropertychange",Be$1)):_d==="focusout"&&Ae$1()}function De$1(_d){if(_d==="selectionchange"||_d==="keyup"||_d==="keydown")return te$1(qe$1)}function Ee$1(_d,np){if(_d==="click")return te$1(np)}function Fe$1(_d,np){if(_d==="input"||_d==="change")return te$1(np)}function Ge$1(_d,np){return _d===np&&(_d!==0||1/_d===1/np)||_d!==_d&&np!==np}var He$1=typeof Object.is=="function"?Object.is:Ge$1;function Ie$1(_d,np){if(He$1(_d,np))return!0;if(typeof _d!="object"||_d===null||typeof np!="object"||np===null)return!1;var rp=Object.keys(_d),ap=Object.keys(np);if(rp.length!==ap.length)return!1;for(ap=0;ap<rp.length;ap++){var sp=rp[ap];if(!ja$1.call(np,sp)||!He$1(_d[sp],np[sp]))return!1}return!0}function Je$1(_d){for(;_d&&_d.firstChild;)_d=_d.firstChild;return _d}function Ke$1(_d,np){var rp=Je$1(_d);_d=0;for(var ap;rp;){if(rp.nodeType===3){if(ap=_d+rp.textContent.length,_d<=np&&ap>=np)return{node:rp,offset:np-_d};_d=ap}e:{for(;rp;){if(rp.nextSibling){rp=rp.nextSibling;break e}rp=rp.parentNode}rp=void 0}rp=Je$1(rp)}}function Le$1(_d,np){return _d&&np?_d===np?!0:_d&&_d.nodeType===3?!1:np&&np.nodeType===3?Le$1(_d,np.parentNode):"contains"in _d?_d.contains(np):_d.compareDocumentPosition?!!(_d.compareDocumentPosition(np)&16):!1:!1}function Me$1(){for(var _d=window,np=Xa$1();np instanceof _d.HTMLIFrameElement;){try{var rp=typeof np.contentWindow.location.href=="string"}catch{rp=!1}if(rp)_d=np.contentWindow;else break;np=Xa$1(_d.document)}return np}function Ne$1(_d){var np=_d&&_d.nodeName&&_d.nodeName.toLowerCase();return np&&(np==="input"&&(_d.type==="text"||_d.type==="search"||_d.type==="tel"||_d.type==="url"||_d.type==="password")||np==="textarea"||_d.contentEditable==="true")}function Oe$1(_d){var np=Me$1(),rp=_d.focusedElem,ap=_d.selectionRange;if(np!==rp&&rp&&rp.ownerDocument&&Le$1(rp.ownerDocument.documentElement,rp)){if(ap!==null&&Ne$1(rp)){if(np=ap.start,_d=ap.end,_d===void 0&&(_d=np),"selectionStart"in rp)rp.selectionStart=np,rp.selectionEnd=Math.min(_d,rp.value.length);else if(_d=(np=rp.ownerDocument||document)&&np.defaultView||window,_d.getSelection){_d=_d.getSelection();var sp=rp.textContent.length,lp=Math.min(ap.start,sp);ap=ap.end===void 0?lp:Math.min(ap.end,sp),!_d.extend&&lp>ap&&(sp=ap,ap=lp,lp=sp),sp=Ke$1(rp,lp);var up=Ke$1(rp,ap);sp&&up&&(_d.rangeCount!==1||_d.anchorNode!==sp.node||_d.anchorOffset!==sp.offset||_d.focusNode!==up.node||_d.focusOffset!==up.offset)&&(np=np.createRange(),np.setStart(sp.node,sp.offset),_d.removeAllRanges(),lp>ap?(_d.addRange(np),_d.extend(up.node,up.offset)):(np.setEnd(up.node,up.offset),_d.addRange(np)))}}for(np=[],_d=rp;_d=_d.parentNode;)_d.nodeType===1&&np.push({element:_d,left:_d.scrollLeft,top:_d.scrollTop});for(typeof rp.focus=="function"&&rp.focus(),rp=0;rp<np.length;rp++)_d=np[rp],_d.element.scrollLeft=_d.left,_d.element.scrollTop=_d.top}}var Pe$1=ia$1&&"documentMode"in document&&11>=document.documentMode,Qe$1=null,Re$1=null,Se$1=null,Te$1=!1;function Ue$1(_d,np,rp){var ap=rp.window===rp?rp.document:rp.nodeType===9?rp:rp.ownerDocument;Te$1||Qe$1==null||Qe$1!==Xa$1(ap)||(ap=Qe$1,"selectionStart"in ap&&Ne$1(ap)?ap={start:ap.selectionStart,end:ap.selectionEnd}:(ap=(ap.ownerDocument&&ap.ownerDocument.defaultView||window).getSelection(),ap={anchorNode:ap.anchorNode,anchorOffset:ap.anchorOffset,focusNode:ap.focusNode,focusOffset:ap.focusOffset}),Se$1&&Ie$1(Se$1,ap)||(Se$1=ap,ap=oe$1(Re$1,"onSelect"),0<ap.length&&(np=new td("onSelect","select",null,np,rp),_d.push({event:np,listeners:ap}),np.target=Qe$1)))}function Ve$1(_d,np){var rp={};return rp[_d.toLowerCase()]=np.toLowerCase(),rp["Webkit"+_d]="webkit"+np,rp["Moz"+_d]="moz"+np,rp}var We$1={animationend:Ve$1("Animation","AnimationEnd"),animationiteration:Ve$1("Animation","AnimationIteration"),animationstart:Ve$1("Animation","AnimationStart"),transitionend:Ve$1("Transition","TransitionEnd")},Xe$1={},Ye$1={};ia$1&&(Ye$1=document.createElement("div").style,"AnimationEvent"in window||(delete We$1.animationend.animation,delete We$1.animationiteration.animation,delete We$1.animationstart.animation),"TransitionEvent"in window||delete We$1.transitionend.transition);function Ze$1(_d){if(Xe$1[_d])return Xe$1[_d];if(!We$1[_d])return _d;var np=We$1[_d],rp;for(rp in np)if(np.hasOwnProperty(rp)&&rp in Ye$1)return Xe$1[_d]=np[rp];return _d}var $e$1=Ze$1("animationend"),af$1=Ze$1("animationiteration"),bf$1=Ze$1("animationstart"),cf$1=Ze$1("transitionend"),df$1=new Map,ef$1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff$1(_d,np){df$1.set(_d,np),fa$1(np,[_d])}for(var gf$1=0;gf$1<ef$1.length;gf$1++){var hf$1=ef$1[gf$1],jf$1=hf$1.toLowerCase(),kf$1=hf$1[0].toUpperCase()+hf$1.slice(1);ff$1(jf$1,"on"+kf$1)}ff$1($e$1,"onAnimationEnd");ff$1(af$1,"onAnimationIteration");ff$1(bf$1,"onAnimationStart");ff$1("dblclick","onDoubleClick");ff$1("focusin","onFocus");ff$1("focusout","onBlur");ff$1(cf$1,"onTransitionEnd");ha$1("onMouseEnter",["mouseout","mouseover"]);ha$1("onMouseLeave",["mouseout","mouseover"]);ha$1("onPointerEnter",["pointerout","pointerover"]);ha$1("onPointerLeave",["pointerout","pointerover"]);fa$1("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa$1("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa$1("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa$1("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa$1("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa$1("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf$1="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf$1=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf$1));function nf$1(_d,np,rp){var ap=_d.type||"unknown-event";_d.currentTarget=rp,Ub(ap,np,void 0,_d),_d.currentTarget=null}function se$1(_d,np){np=(np&4)!==0;for(var rp=0;rp<_d.length;rp++){var ap=_d[rp],sp=ap.event;ap=ap.listeners;e:{var lp=void 0;if(np)for(var up=ap.length-1;0<=up;up--){var cp=ap[up],dp=cp.instance,fp=cp.currentTarget;if(cp=cp.listener,dp!==lp&&sp.isPropagationStopped())break e;nf$1(sp,cp,fp),lp=dp}else for(up=0;up<ap.length;up++){if(cp=ap[up],dp=cp.instance,fp=cp.currentTarget,cp=cp.listener,dp!==lp&&sp.isPropagationStopped())break e;nf$1(sp,cp,fp),lp=dp}}}if(Qb)throw _d=Rb,Qb=!1,Rb=null,_d}function D$1(_d,np){var rp=np[of$1];rp===void 0&&(rp=np[of$1]=new Set);var ap=_d+"__bubble";rp.has(ap)||(pf$1(np,_d,2,!1),rp.add(ap))}function qf$1(_d,np,rp){var ap=0;np&&(ap|=4),pf$1(rp,_d,ap,np)}var rf$1="_reactListening"+Math.random().toString(36).slice(2);function sf$1(_d){if(!_d[rf$1]){_d[rf$1]=!0,da$1.forEach(function(rp){rp!=="selectionchange"&&(mf$1.has(rp)||qf$1(rp,!1,_d),qf$1(rp,!0,_d))});var np=_d.nodeType===9?_d:_d.ownerDocument;np===null||np[rf$1]||(np[rf$1]=!0,qf$1("selectionchange",!1,np))}}function pf$1(_d,np,rp,ap){switch(jd(np)){case 1:var sp=ed;break;case 4:sp=gd;break;default:sp=fd}rp=sp.bind(null,np,rp,_d),sp=void 0,!Lb||np!=="touchstart"&&np!=="touchmove"&&np!=="wheel"||(sp=!0),ap?sp!==void 0?_d.addEventListener(np,rp,{capture:!0,passive:sp}):_d.addEventListener(np,rp,!0):sp!==void 0?_d.addEventListener(np,rp,{passive:sp}):_d.addEventListener(np,rp,!1)}function hd(_d,np,rp,ap,sp){var lp=ap;if(!(np&1)&&!(np&2)&&ap!==null)e:for(;;){if(ap===null)return;var up=ap.tag;if(up===3||up===4){var cp=ap.stateNode.containerInfo;if(cp===sp||cp.nodeType===8&&cp.parentNode===sp)break;if(up===4)for(up=ap.return;up!==null;){var dp=up.tag;if((dp===3||dp===4)&&(dp=up.stateNode.containerInfo,dp===sp||dp.nodeType===8&&dp.parentNode===sp))return;up=up.return}for(;cp!==null;){if(up=Wc$1(cp),up===null)return;if(dp=up.tag,dp===5||dp===6){ap=lp=up;continue e}cp=cp.parentNode}}ap=ap.return}Jb(function(){var fp=lp,pp=xb(rp),hp=[];e:{var mp=df$1.get(_d);if(mp!==void 0){var gp=td,vp=_d;switch(_d){case"keypress":if(od(rp)===0)break e;case"keydown":case"keyup":gp=Rd;break;case"focusin":vp="focus",gp=Fd;break;case"focusout":vp="blur",gp=Fd;break;case"beforeblur":case"afterblur":gp=Fd;break;case"click":if(rp.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":gp=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":gp=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":gp=Vd;break;case $e$1:case af$1:case bf$1:gp=Hd;break;case cf$1:gp=Xd;break;case"scroll":gp=vd;break;case"wheel":gp=Zd;break;case"copy":case"cut":case"paste":gp=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":gp=Td}var xp=(np&4)!==0,Sp=!xp&&_d==="scroll",yp=xp?mp!==null?mp+"Capture":null:mp;xp=[];for(var bp=fp,Ep;bp!==null;){Ep=bp;var wp=Ep.stateNode;if(Ep.tag===5&&wp!==null&&(Ep=wp,yp!==null&&(wp=Kb(bp,yp),wp!=null&&xp.push(tf$4(bp,wp,Ep)))),Sp)break;bp=bp.return}0<xp.length&&(mp=new gp(mp,vp,null,rp,pp),hp.push({event:mp,listeners:xp}))}}if(!(np&7)){e:{if(mp=_d==="mouseover"||_d==="pointerover",gp=_d==="mouseout"||_d==="pointerout",mp&&rp!==wb&&(vp=rp.relatedTarget||rp.fromElement)&&(Wc$1(vp)||vp[uf$1]))break e;if((gp||mp)&&(mp=pp.window===pp?pp:(mp=pp.ownerDocument)?mp.defaultView||mp.parentWindow:window,gp?(vp=rp.relatedTarget||rp.toElement,gp=fp,vp=vp?Wc$1(vp):null,vp!==null&&(Sp=Vb(vp),vp!==Sp||vp.tag!==5&&vp.tag!==6)&&(vp=null)):(gp=null,vp=fp),gp!==vp)){if(xp=Bd,wp="onMouseLeave",yp="onMouseEnter",bp="mouse",(_d==="pointerout"||_d==="pointerover")&&(xp=Td,wp="onPointerLeave",yp="onPointerEnter",bp="pointer"),Sp=gp==null?mp:ue$1(gp),Ep=vp==null?mp:ue$1(vp),mp=new xp(wp,bp+"leave",gp,rp,pp),mp.target=Sp,mp.relatedTarget=Ep,wp=null,Wc$1(pp)===fp&&(xp=new xp(yp,bp+"enter",vp,rp,pp),xp.target=Ep,xp.relatedTarget=Sp,wp=xp),Sp=wp,gp&&vp)t:{for(xp=gp,yp=vp,bp=0,Ep=xp;Ep;Ep=vf$1(Ep))bp++;for(Ep=0,wp=yp;wp;wp=vf$1(wp))Ep++;for(;0<bp-Ep;)xp=vf$1(xp),bp--;for(;0<Ep-bp;)yp=vf$1(yp),Ep--;for(;bp--;){if(xp===yp||yp!==null&&xp===yp.alternate)break t;xp=vf$1(xp),yp=vf$1(yp)}xp=null}else xp=null;gp!==null&&wf$1(hp,mp,gp,xp,!1),vp!==null&&Sp!==null&&wf$1(hp,Sp,vp,xp,!0)}}e:{if(mp=fp?ue$1(fp):window,gp=mp.nodeName&&mp.nodeName.toLowerCase(),gp==="select"||gp==="input"&&mp.type==="file")var _p=ve$1;else if(me$1(mp))if(we$1)_p=Fe$1;else{_p=De$1;var Cp=Ce$1}else(gp=mp.nodeName)&&gp.toLowerCase()==="input"&&(mp.type==="checkbox"||mp.type==="radio")&&(_p=Ee$1);if(_p&&(_p=_p(_d,fp))){ne$1(hp,_p,rp,pp);break e}Cp&&Cp(_d,mp,fp),_d==="focusout"&&(Cp=mp._wrapperState)&&Cp.controlled&&mp.type==="number"&&cb(mp,"number",mp.value)}switch(Cp=fp?ue$1(fp):window,_d){case"focusin":(me$1(Cp)||Cp.contentEditable==="true")&&(Qe$1=Cp,Re$1=fp,Se$1=null);break;case"focusout":Se$1=Re$1=Qe$1=null;break;case"mousedown":Te$1=!0;break;case"contextmenu":case"mouseup":case"dragend":Te$1=!1,Ue$1(hp,rp,pp);break;case"selectionchange":if(Pe$1)break;case"keydown":case"keyup":Ue$1(hp,rp,pp)}var $p;if(ae$1)e:{switch(_d){case"compositionstart":var Rp="onCompositionStart";break e;case"compositionend":Rp="onCompositionEnd";break e;case"compositionupdate":Rp="onCompositionUpdate";break e}Rp=void 0}else ie$1?ge$1(_d,rp)&&(Rp="onCompositionEnd"):_d==="keydown"&&rp.keyCode===229&&(Rp="onCompositionStart");Rp&&(de$1&&rp.locale!=="ko"&&(ie$1||Rp!=="onCompositionStart"?Rp==="onCompositionEnd"&&ie$1&&($p=nd()):(kd=pp,ld="value"in kd?kd.value:kd.textContent,ie$1=!0)),Cp=oe$1(fp,Rp),0<Cp.length&&(Rp=new Ld(Rp,_d,null,rp,pp),hp.push({event:Rp,listeners:Cp}),$p?Rp.data=$p:($p=he$1(rp),$p!==null&&(Rp.data=$p)))),($p=ce$1?je$1(_d,rp):ke$1(_d,rp))&&(fp=oe$1(fp,"onBeforeInput"),0<fp.length&&(pp=new Ld("onBeforeInput","beforeinput",null,rp,pp),hp.push({event:pp,listeners:fp}),pp.data=$p))}se$1(hp,np)})}function tf$4(_d,np,rp){return{instance:_d,listener:np,currentTarget:rp}}function oe$1(_d,np){for(var rp=np+"Capture",ap=[];_d!==null;){var sp=_d,lp=sp.stateNode;sp.tag===5&&lp!==null&&(sp=lp,lp=Kb(_d,rp),lp!=null&&ap.unshift(tf$4(_d,lp,sp)),lp=Kb(_d,np),lp!=null&&ap.push(tf$4(_d,lp,sp))),_d=_d.return}return ap}function vf$1(_d){if(_d===null)return null;do _d=_d.return;while(_d&&_d.tag!==5);return _d||null}function wf$1(_d,np,rp,ap,sp){for(var lp=np._reactName,up=[];rp!==null&&rp!==ap;){var cp=rp,dp=cp.alternate,fp=cp.stateNode;if(dp!==null&&dp===ap)break;cp.tag===5&&fp!==null&&(cp=fp,sp?(dp=Kb(rp,lp),dp!=null&&up.unshift(tf$4(rp,dp,cp))):sp||(dp=Kb(rp,lp),dp!=null&&up.push(tf$4(rp,dp,cp)))),rp=rp.return}up.length!==0&&_d.push({event:np,listeners:up})}var xf$1=/\r\n?/g,yf$1=/\u0000|\uFFFD/g;function zf$1(_d){return(typeof _d=="string"?_d:""+_d).replace(xf$1,`
`).replace(yf$1,"")}function Af$1(_d,np,rp){if(np=zf$1(np),zf$1(_d)!==np&&rp)throw Error(p$1(425))}function Bf$1(){}var Cf$1=null,Df$1=null;function Ef$1(_d,np){return _d==="textarea"||_d==="noscript"||typeof np.children=="string"||typeof np.children=="number"||typeof np.dangerouslySetInnerHTML=="object"&&np.dangerouslySetInnerHTML!==null&&np.dangerouslySetInnerHTML.__html!=null}var Ff$1=typeof setTimeout=="function"?setTimeout:void 0,Gf$1=typeof clearTimeout=="function"?clearTimeout:void 0,Hf$1=typeof Promise=="function"?Promise:void 0,Jf$1=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf$1<"u"?function(_d){return Hf$1.resolve(null).then(_d).catch(If$1)}:Ff$1;function If$1(_d){setTimeout(function(){throw _d})}function Kf$1(_d,np){var rp=np,ap=0;do{var sp=rp.nextSibling;if(_d.removeChild(rp),sp&&sp.nodeType===8)if(rp=sp.data,rp==="/$"){if(ap===0){_d.removeChild(sp),bd(np);return}ap--}else rp!=="$"&&rp!=="$?"&&rp!=="$!"||ap++;rp=sp}while(rp);bd(np)}function Lf$1(_d){for(;_d!=null;_d=_d.nextSibling){var np=_d.nodeType;if(np===1||np===3)break;if(np===8){if(np=_d.data,np==="$"||np==="$!"||np==="$?")break;if(np==="/$")return null}}return _d}function Mf$1(_d){_d=_d.previousSibling;for(var np=0;_d;){if(_d.nodeType===8){var rp=_d.data;if(rp==="$"||rp==="$!"||rp==="$?"){if(np===0)return _d;np--}else rp==="/$"&&np++}_d=_d.previousSibling}return null}var Nf$1=Math.random().toString(36).slice(2),Of$1="__reactFiber$"+Nf$1,Pf$1="__reactProps$"+Nf$1,uf$1="__reactContainer$"+Nf$1,of$1="__reactEvents$"+Nf$1,Qf$1="__reactListeners$"+Nf$1,Rf$1="__reactHandles$"+Nf$1;function Wc$1(_d){var np=_d[Of$1];if(np)return np;for(var rp=_d.parentNode;rp;){if(np=rp[uf$1]||rp[Of$1]){if(rp=np.alternate,np.child!==null||rp!==null&&rp.child!==null)for(_d=Mf$1(_d);_d!==null;){if(rp=_d[Of$1])return rp;_d=Mf$1(_d)}return np}_d=rp,rp=_d.parentNode}return null}function Cb(_d){return _d=_d[Of$1]||_d[uf$1],!_d||_d.tag!==5&&_d.tag!==6&&_d.tag!==13&&_d.tag!==3?null:_d}function ue$1(_d){if(_d.tag===5||_d.tag===6)return _d.stateNode;throw Error(p$1(33))}function Db(_d){return _d[Pf$1]||null}var Sf$1=[],Tf$1=-1;function Uf$1(_d){return{current:_d}}function E$1(_d){0>Tf$1||(_d.current=Sf$1[Tf$1],Sf$1[Tf$1]=null,Tf$1--)}function G$1(_d,np){Tf$1++,Sf$1[Tf$1]=_d.current,_d.current=np}var Vf$1={},H$1=Uf$1(Vf$1),Wf$1=Uf$1(!1),Xf$1=Vf$1;function Yf$1(_d,np){var rp=_d.type.contextTypes;if(!rp)return Vf$1;var ap=_d.stateNode;if(ap&&ap.__reactInternalMemoizedUnmaskedChildContext===np)return ap.__reactInternalMemoizedMaskedChildContext;var sp={},lp;for(lp in rp)sp[lp]=np[lp];return ap&&(_d=_d.stateNode,_d.__reactInternalMemoizedUnmaskedChildContext=np,_d.__reactInternalMemoizedMaskedChildContext=sp),sp}function Zf$1(_d){return _d=_d.childContextTypes,_d!=null}function $f$1(){E$1(Wf$1),E$1(H$1)}function ag(_d,np,rp){if(H$1.current!==Vf$1)throw Error(p$1(168));G$1(H$1,np),G$1(Wf$1,rp)}function bg(_d,np,rp){var ap=_d.stateNode;if(np=np.childContextTypes,typeof ap.getChildContext!="function")return rp;ap=ap.getChildContext();for(var sp in ap)if(!(sp in np))throw Error(p$1(108,Ra$1(_d)||"Unknown",sp));return A$1({},rp,ap)}function cg(_d){return _d=(_d=_d.stateNode)&&_d.__reactInternalMemoizedMergedChildContext||Vf$1,Xf$1=H$1.current,G$1(H$1,_d),G$1(Wf$1,Wf$1.current),!0}function dg(_d,np,rp){var ap=_d.stateNode;if(!ap)throw Error(p$1(169));rp?(_d=bg(_d,np,Xf$1),ap.__reactInternalMemoizedMergedChildContext=_d,E$1(Wf$1),E$1(H$1),G$1(H$1,_d)):E$1(Wf$1),G$1(Wf$1,rp)}var eg=null,fg=!1,gg=!1;function hg(_d){eg===null?eg=[_d]:eg.push(_d)}function ig(_d){fg=!0,hg(_d)}function jg(){if(!gg&&eg!==null){gg=!0;var _d=0,np=C$1;try{var rp=eg;for(C$1=1;_d<rp.length;_d++){var ap=rp[_d];do ap=ap(!0);while(ap!==null)}eg=null,fg=!1}catch(sp){throw eg!==null&&(eg=eg.slice(_d+1)),ac$1(fc$1,jg),sp}finally{C$1=np,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(_d,np){kg[lg++]=ng,kg[lg++]=mg,mg=_d,ng=np}function ug(_d,np,rp){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=_d;var ap=rg;_d=sg;var sp=32-oc$1(ap)-1;ap&=~(1<<sp),rp+=1;var lp=32-oc$1(np)+sp;if(30<lp){var up=sp-sp%5;lp=(ap&(1<<up)-1).toString(32),ap>>=up,sp-=up,rg=1<<32-oc$1(np)+sp|rp<<sp|ap,sg=lp+_d}else rg=1<<lp|rp<<sp|ap,sg=_d}function vg(_d){_d.return!==null&&(tg(_d,1),ug(_d,1,0))}function wg(_d){for(;_d===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;_d===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I$1=!1,zg=null;function Ag(_d,np){var rp=Bg(5,null,null,0);rp.elementType="DELETED",rp.stateNode=np,rp.return=_d,np=_d.deletions,np===null?(_d.deletions=[rp],_d.flags|=16):np.push(rp)}function Cg(_d,np){switch(_d.tag){case 5:var rp=_d.type;return np=np.nodeType!==1||rp.toLowerCase()!==np.nodeName.toLowerCase()?null:np,np!==null?(_d.stateNode=np,xg=_d,yg=Lf$1(np.firstChild),!0):!1;case 6:return np=_d.pendingProps===""||np.nodeType!==3?null:np,np!==null?(_d.stateNode=np,xg=_d,yg=null,!0):!1;case 13:return np=np.nodeType!==8?null:np,np!==null?(rp=qg!==null?{id:rg,overflow:sg}:null,_d.memoizedState={dehydrated:np,treeContext:rp,retryLane:1073741824},rp=Bg(18,null,null,0),rp.stateNode=np,rp.return=_d,_d.child=rp,xg=_d,yg=null,!0):!1;default:return!1}}function Dg(_d){return(_d.mode&1)!==0&&(_d.flags&128)===0}function Eg(_d){if(I$1){var np=yg;if(np){var rp=np;if(!Cg(_d,np)){if(Dg(_d))throw Error(p$1(418));np=Lf$1(rp.nextSibling);var ap=xg;np&&Cg(_d,np)?Ag(ap,rp):(_d.flags=_d.flags&-4097|2,I$1=!1,xg=_d)}}else{if(Dg(_d))throw Error(p$1(418));_d.flags=_d.flags&-4097|2,I$1=!1,xg=_d}}}function Fg(_d){for(_d=_d.return;_d!==null&&_d.tag!==5&&_d.tag!==3&&_d.tag!==13;)_d=_d.return;xg=_d}function Gg(_d){if(_d!==xg)return!1;if(!I$1)return Fg(_d),I$1=!0,!1;var np;if((np=_d.tag!==3)&&!(np=_d.tag!==5)&&(np=_d.type,np=np!=="head"&&np!=="body"&&!Ef$1(_d.type,_d.memoizedProps)),np&&(np=yg)){if(Dg(_d))throw Hg(),Error(p$1(418));for(;np;)Ag(_d,np),np=Lf$1(np.nextSibling)}if(Fg(_d),_d.tag===13){if(_d=_d.memoizedState,_d=_d!==null?_d.dehydrated:null,!_d)throw Error(p$1(317));e:{for(_d=_d.nextSibling,np=0;_d;){if(_d.nodeType===8){var rp=_d.data;if(rp==="/$"){if(np===0){yg=Lf$1(_d.nextSibling);break e}np--}else rp!=="$"&&rp!=="$!"&&rp!=="$?"||np++}_d=_d.nextSibling}yg=null}}else yg=xg?Lf$1(_d.stateNode.nextSibling):null;return!0}function Hg(){for(var _d=yg;_d;)_d=Lf$1(_d.nextSibling)}function Ig(){yg=xg=null,I$1=!1}function Jg(_d){zg===null?zg=[_d]:zg.push(_d)}var Kg=ua$1.ReactCurrentBatchConfig;function Lg(_d,np){if(_d&&_d.defaultProps){np=A$1({},np),_d=_d.defaultProps;for(var rp in _d)np[rp]===void 0&&(np[rp]=_d[rp]);return np}return np}var Mg=Uf$1(null),Ng=null,Og=null,Pg=null;function Qg(){Pg=Og=Ng=null}function Rg(_d){var np=Mg.current;E$1(Mg),_d._currentValue=np}function Sg(_d,np,rp){for(;_d!==null;){var ap=_d.alternate;if((_d.childLanes&np)!==np?(_d.childLanes|=np,ap!==null&&(ap.childLanes|=np)):ap!==null&&(ap.childLanes&np)!==np&&(ap.childLanes|=np),_d===rp)break;_d=_d.return}}function Tg(_d,np){Ng=_d,Pg=Og=null,_d=_d.dependencies,_d!==null&&_d.firstContext!==null&&(_d.lanes&np&&(Ug=!0),_d.firstContext=null)}function Vg(_d){var np=_d._currentValue;if(Pg!==_d)if(_d={context:_d,memoizedValue:np,next:null},Og===null){if(Ng===null)throw Error(p$1(308));Og=_d,Ng.dependencies={lanes:0,firstContext:_d}}else Og=Og.next=_d;return np}var Wg=null;function Xg(_d){Wg===null?Wg=[_d]:Wg.push(_d)}function Yg(_d,np,rp,ap){var sp=np.interleaved;return sp===null?(rp.next=rp,Xg(np)):(rp.next=sp.next,sp.next=rp),np.interleaved=rp,Zg(_d,ap)}function Zg(_d,np){_d.lanes|=np;var rp=_d.alternate;for(rp!==null&&(rp.lanes|=np),rp=_d,_d=_d.return;_d!==null;)_d.childLanes|=np,rp=_d.alternate,rp!==null&&(rp.childLanes|=np),rp=_d,_d=_d.return;return rp.tag===3?rp.stateNode:null}var $g=!1;function ah$1(_d){_d.updateQueue={baseState:_d.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bh$1(_d,np){_d=_d.updateQueue,np.updateQueue===_d&&(np.updateQueue={baseState:_d.baseState,firstBaseUpdate:_d.firstBaseUpdate,lastBaseUpdate:_d.lastBaseUpdate,shared:_d.shared,effects:_d.effects})}function ch$1(_d,np){return{eventTime:_d,lane:np,tag:0,payload:null,callback:null,next:null}}function dh$1(_d,np,rp){var ap=_d.updateQueue;if(ap===null)return null;if(ap=ap.shared,K$1&2){var sp=ap.pending;return sp===null?np.next=np:(np.next=sp.next,sp.next=np),ap.pending=np,Zg(_d,rp)}return sp=ap.interleaved,sp===null?(np.next=np,Xg(ap)):(np.next=sp.next,sp.next=np),ap.interleaved=np,Zg(_d,rp)}function eh$1(_d,np,rp){if(np=np.updateQueue,np!==null&&(np=np.shared,(rp&4194240)!==0)){var ap=np.lanes;ap&=_d.pendingLanes,rp|=ap,np.lanes=rp,Cc$1(_d,rp)}}function fh$1(_d,np){var rp=_d.updateQueue,ap=_d.alternate;if(ap!==null&&(ap=ap.updateQueue,rp===ap)){var sp=null,lp=null;if(rp=rp.firstBaseUpdate,rp!==null){do{var up={eventTime:rp.eventTime,lane:rp.lane,tag:rp.tag,payload:rp.payload,callback:rp.callback,next:null};lp===null?sp=lp=up:lp=lp.next=up,rp=rp.next}while(rp!==null);lp===null?sp=lp=np:lp=lp.next=np}else sp=lp=np;rp={baseState:ap.baseState,firstBaseUpdate:sp,lastBaseUpdate:lp,shared:ap.shared,effects:ap.effects},_d.updateQueue=rp;return}_d=rp.lastBaseUpdate,_d===null?rp.firstBaseUpdate=np:_d.next=np,rp.lastBaseUpdate=np}function gh$1(_d,np,rp,ap){var sp=_d.updateQueue;$g=!1;var lp=sp.firstBaseUpdate,up=sp.lastBaseUpdate,cp=sp.shared.pending;if(cp!==null){sp.shared.pending=null;var dp=cp,fp=dp.next;dp.next=null,up===null?lp=fp:up.next=fp,up=dp;var pp=_d.alternate;pp!==null&&(pp=pp.updateQueue,cp=pp.lastBaseUpdate,cp!==up&&(cp===null?pp.firstBaseUpdate=fp:cp.next=fp,pp.lastBaseUpdate=dp))}if(lp!==null){var hp=sp.baseState;up=0,pp=fp=dp=null,cp=lp;do{var mp=cp.lane,gp=cp.eventTime;if((ap&mp)===mp){pp!==null&&(pp=pp.next={eventTime:gp,lane:0,tag:cp.tag,payload:cp.payload,callback:cp.callback,next:null});e:{var vp=_d,xp=cp;switch(mp=np,gp=rp,xp.tag){case 1:if(vp=xp.payload,typeof vp=="function"){hp=vp.call(gp,hp,mp);break e}hp=vp;break e;case 3:vp.flags=vp.flags&-65537|128;case 0:if(vp=xp.payload,mp=typeof vp=="function"?vp.call(gp,hp,mp):vp,mp==null)break e;hp=A$1({},hp,mp);break e;case 2:$g=!0}}cp.callback!==null&&cp.lane!==0&&(_d.flags|=64,mp=sp.effects,mp===null?sp.effects=[cp]:mp.push(cp))}else gp={eventTime:gp,lane:mp,tag:cp.tag,payload:cp.payload,callback:cp.callback,next:null},pp===null?(fp=pp=gp,dp=hp):pp=pp.next=gp,up|=mp;if(cp=cp.next,cp===null){if(cp=sp.shared.pending,cp===null)break;mp=cp,cp=mp.next,mp.next=null,sp.lastBaseUpdate=mp,sp.shared.pending=null}}while(!0);if(pp===null&&(dp=hp),sp.baseState=dp,sp.firstBaseUpdate=fp,sp.lastBaseUpdate=pp,np=sp.shared.interleaved,np!==null){sp=np;do up|=sp.lane,sp=sp.next;while(sp!==np)}else lp===null&&(sp.shared.lanes=0);hh$1|=up,_d.lanes=up,_d.memoizedState=hp}}function ih$1(_d,np,rp){if(_d=np.effects,np.effects=null,_d!==null)for(np=0;np<_d.length;np++){var ap=_d[np],sp=ap.callback;if(sp!==null){if(ap.callback=null,ap=rp,typeof sp!="function")throw Error(p$1(191,sp));sp.call(ap)}}}var jh$1=new aa$1.Component().refs;function kh$1(_d,np,rp,ap){np=_d.memoizedState,rp=rp(ap,np),rp=rp==null?np:A$1({},np,rp),_d.memoizedState=rp,_d.lanes===0&&(_d.updateQueue.baseState=rp)}var nh$1={isMounted:function(_d){return(_d=_d._reactInternals)?Vb(_d)===_d:!1},enqueueSetState:function(_d,np,rp){_d=_d._reactInternals;var ap=L$1(),sp=lh$1(_d),lp=ch$1(ap,sp);lp.payload=np,rp!=null&&(lp.callback=rp),np=dh$1(_d,lp,sp),np!==null&&(mh$1(np,_d,sp,ap),eh$1(np,_d,sp))},enqueueReplaceState:function(_d,np,rp){_d=_d._reactInternals;var ap=L$1(),sp=lh$1(_d),lp=ch$1(ap,sp);lp.tag=1,lp.payload=np,rp!=null&&(lp.callback=rp),np=dh$1(_d,lp,sp),np!==null&&(mh$1(np,_d,sp,ap),eh$1(np,_d,sp))},enqueueForceUpdate:function(_d,np){_d=_d._reactInternals;var rp=L$1(),ap=lh$1(_d),sp=ch$1(rp,ap);sp.tag=2,np!=null&&(sp.callback=np),np=dh$1(_d,sp,ap),np!==null&&(mh$1(np,_d,ap,rp),eh$1(np,_d,ap))}};function oh$1(_d,np,rp,ap,sp,lp,up){return _d=_d.stateNode,typeof _d.shouldComponentUpdate=="function"?_d.shouldComponentUpdate(ap,lp,up):np.prototype&&np.prototype.isPureReactComponent?!Ie$1(rp,ap)||!Ie$1(sp,lp):!0}function ph$1(_d,np,rp){var ap=!1,sp=Vf$1,lp=np.contextType;return typeof lp=="object"&&lp!==null?lp=Vg(lp):(sp=Zf$1(np)?Xf$1:H$1.current,ap=np.contextTypes,lp=(ap=ap!=null)?Yf$1(_d,sp):Vf$1),np=new np(rp,lp),_d.memoizedState=np.state!==null&&np.state!==void 0?np.state:null,np.updater=nh$1,_d.stateNode=np,np._reactInternals=_d,ap&&(_d=_d.stateNode,_d.__reactInternalMemoizedUnmaskedChildContext=sp,_d.__reactInternalMemoizedMaskedChildContext=lp),np}function qh$1(_d,np,rp,ap){_d=np.state,typeof np.componentWillReceiveProps=="function"&&np.componentWillReceiveProps(rp,ap),typeof np.UNSAFE_componentWillReceiveProps=="function"&&np.UNSAFE_componentWillReceiveProps(rp,ap),np.state!==_d&&nh$1.enqueueReplaceState(np,np.state,null)}function rh$1(_d,np,rp,ap){var sp=_d.stateNode;sp.props=rp,sp.state=_d.memoizedState,sp.refs=jh$1,ah$1(_d);var lp=np.contextType;typeof lp=="object"&&lp!==null?sp.context=Vg(lp):(lp=Zf$1(np)?Xf$1:H$1.current,sp.context=Yf$1(_d,lp)),sp.state=_d.memoizedState,lp=np.getDerivedStateFromProps,typeof lp=="function"&&(kh$1(_d,np,lp,rp),sp.state=_d.memoizedState),typeof np.getDerivedStateFromProps=="function"||typeof sp.getSnapshotBeforeUpdate=="function"||typeof sp.UNSAFE_componentWillMount!="function"&&typeof sp.componentWillMount!="function"||(np=sp.state,typeof sp.componentWillMount=="function"&&sp.componentWillMount(),typeof sp.UNSAFE_componentWillMount=="function"&&sp.UNSAFE_componentWillMount(),np!==sp.state&&nh$1.enqueueReplaceState(sp,sp.state,null),gh$1(_d,rp,sp,ap),sp.state=_d.memoizedState),typeof sp.componentDidMount=="function"&&(_d.flags|=4194308)}function sh$1(_d,np,rp){if(_d=rp.ref,_d!==null&&typeof _d!="function"&&typeof _d!="object"){if(rp._owner){if(rp=rp._owner,rp){if(rp.tag!==1)throw Error(p$1(309));var ap=rp.stateNode}if(!ap)throw Error(p$1(147,_d));var sp=ap,lp=""+_d;return np!==null&&np.ref!==null&&typeof np.ref=="function"&&np.ref._stringRef===lp?np.ref:(np=function(up){var cp=sp.refs;cp===jh$1&&(cp=sp.refs={}),up===null?delete cp[lp]:cp[lp]=up},np._stringRef=lp,np)}if(typeof _d!="string")throw Error(p$1(284));if(!rp._owner)throw Error(p$1(290,_d))}return _d}function th$1(_d,np){throw _d=Object.prototype.toString.call(np),Error(p$1(31,_d==="[object Object]"?"object with keys {"+Object.keys(np).join(", ")+"}":_d))}function uh$1(_d){var np=_d._init;return np(_d._payload)}function vh$1(_d){function np(yp,bp){if(_d){var Ep=yp.deletions;Ep===null?(yp.deletions=[bp],yp.flags|=16):Ep.push(bp)}}function rp(yp,bp){if(!_d)return null;for(;bp!==null;)np(yp,bp),bp=bp.sibling;return null}function ap(yp,bp){for(yp=new Map;bp!==null;)bp.key!==null?yp.set(bp.key,bp):yp.set(bp.index,bp),bp=bp.sibling;return yp}function sp(yp,bp){return yp=wh$1(yp,bp),yp.index=0,yp.sibling=null,yp}function lp(yp,bp,Ep){return yp.index=Ep,_d?(Ep=yp.alternate,Ep!==null?(Ep=Ep.index,Ep<bp?(yp.flags|=2,bp):Ep):(yp.flags|=2,bp)):(yp.flags|=1048576,bp)}function up(yp){return _d&&yp.alternate===null&&(yp.flags|=2),yp}function cp(yp,bp,Ep,wp){return bp===null||bp.tag!==6?(bp=xh$1(Ep,yp.mode,wp),bp.return=yp,bp):(bp=sp(bp,Ep),bp.return=yp,bp)}function dp(yp,bp,Ep,wp){var _p=Ep.type;return _p===ya$1?pp(yp,bp,Ep.props.children,wp,Ep.key):bp!==null&&(bp.elementType===_p||typeof _p=="object"&&_p!==null&&_p.$$typeof===Ha$1&&uh$1(_p)===bp.type)?(wp=sp(bp,Ep.props),wp.ref=sh$1(yp,bp,Ep),wp.return=yp,wp):(wp=yh$1(Ep.type,Ep.key,Ep.props,null,yp.mode,wp),wp.ref=sh$1(yp,bp,Ep),wp.return=yp,wp)}function fp(yp,bp,Ep,wp){return bp===null||bp.tag!==4||bp.stateNode.containerInfo!==Ep.containerInfo||bp.stateNode.implementation!==Ep.implementation?(bp=zh$1(Ep,yp.mode,wp),bp.return=yp,bp):(bp=sp(bp,Ep.children||[]),bp.return=yp,bp)}function pp(yp,bp,Ep,wp,_p){return bp===null||bp.tag!==7?(bp=Ah$1(Ep,yp.mode,wp,_p),bp.return=yp,bp):(bp=sp(bp,Ep),bp.return=yp,bp)}function hp(yp,bp,Ep){if(typeof bp=="string"&&bp!==""||typeof bp=="number")return bp=xh$1(""+bp,yp.mode,Ep),bp.return=yp,bp;if(typeof bp=="object"&&bp!==null){switch(bp.$$typeof){case va$1:return Ep=yh$1(bp.type,bp.key,bp.props,null,yp.mode,Ep),Ep.ref=sh$1(yp,null,bp),Ep.return=yp,Ep;case wa$1:return bp=zh$1(bp,yp.mode,Ep),bp.return=yp,bp;case Ha$1:var wp=bp._init;return hp(yp,wp(bp._payload),Ep)}if(eb(bp)||Ka$1(bp))return bp=Ah$1(bp,yp.mode,Ep,null),bp.return=yp,bp;th$1(yp,bp)}return null}function mp(yp,bp,Ep,wp){var _p=bp!==null?bp.key:null;if(typeof Ep=="string"&&Ep!==""||typeof Ep=="number")return _p!==null?null:cp(yp,bp,""+Ep,wp);if(typeof Ep=="object"&&Ep!==null){switch(Ep.$$typeof){case va$1:return Ep.key===_p?dp(yp,bp,Ep,wp):null;case wa$1:return Ep.key===_p?fp(yp,bp,Ep,wp):null;case Ha$1:return _p=Ep._init,mp(yp,bp,_p(Ep._payload),wp)}if(eb(Ep)||Ka$1(Ep))return _p!==null?null:pp(yp,bp,Ep,wp,null);th$1(yp,Ep)}return null}function gp(yp,bp,Ep,wp,_p){if(typeof wp=="string"&&wp!==""||typeof wp=="number")return yp=yp.get(Ep)||null,cp(bp,yp,""+wp,_p);if(typeof wp=="object"&&wp!==null){switch(wp.$$typeof){case va$1:return yp=yp.get(wp.key===null?Ep:wp.key)||null,dp(bp,yp,wp,_p);case wa$1:return yp=yp.get(wp.key===null?Ep:wp.key)||null,fp(bp,yp,wp,_p);case Ha$1:var Cp=wp._init;return gp(yp,bp,Ep,Cp(wp._payload),_p)}if(eb(wp)||Ka$1(wp))return yp=yp.get(Ep)||null,pp(bp,yp,wp,_p,null);th$1(bp,wp)}return null}function vp(yp,bp,Ep,wp){for(var _p=null,Cp=null,$p=bp,Rp=bp=0,Pp=null;$p!==null&&Rp<Ep.length;Rp++){$p.index>Rp?(Pp=$p,$p=null):Pp=$p.sibling;var Op=mp(yp,$p,Ep[Rp],wp);if(Op===null){$p===null&&($p=Pp);break}_d&&$p&&Op.alternate===null&&np(yp,$p),bp=lp(Op,bp,Rp),Cp===null?_p=Op:Cp.sibling=Op,Cp=Op,$p=Pp}if(Rp===Ep.length)return rp(yp,$p),I$1&&tg(yp,Rp),_p;if($p===null){for(;Rp<Ep.length;Rp++)$p=hp(yp,Ep[Rp],wp),$p!==null&&(bp=lp($p,bp,Rp),Cp===null?_p=$p:Cp.sibling=$p,Cp=$p);return I$1&&tg(yp,Rp),_p}for($p=ap(yp,$p);Rp<Ep.length;Rp++)Pp=gp($p,yp,Rp,Ep[Rp],wp),Pp!==null&&(_d&&Pp.alternate!==null&&$p.delete(Pp.key===null?Rp:Pp.key),bp=lp(Pp,bp,Rp),Cp===null?_p=Pp:Cp.sibling=Pp,Cp=Pp);return _d&&$p.forEach(function(jp){return np(yp,jp)}),I$1&&tg(yp,Rp),_p}function xp(yp,bp,Ep,wp){var _p=Ka$1(Ep);if(typeof _p!="function")throw Error(p$1(150));if(Ep=_p.call(Ep),Ep==null)throw Error(p$1(151));for(var Cp=_p=null,$p=bp,Rp=bp=0,Pp=null,Op=Ep.next();$p!==null&&!Op.done;Rp++,Op=Ep.next()){$p.index>Rp?(Pp=$p,$p=null):Pp=$p.sibling;var jp=mp(yp,$p,Op.value,wp);if(jp===null){$p===null&&($p=Pp);break}_d&&$p&&jp.alternate===null&&np(yp,$p),bp=lp(jp,bp,Rp),Cp===null?_p=jp:Cp.sibling=jp,Cp=jp,$p=Pp}if(Op.done)return rp(yp,$p),I$1&&tg(yp,Rp),_p;if($p===null){for(;!Op.done;Rp++,Op=Ep.next())Op=hp(yp,Op.value,wp),Op!==null&&(bp=lp(Op,bp,Rp),Cp===null?_p=Op:Cp.sibling=Op,Cp=Op);return I$1&&tg(yp,Rp),_p}for($p=ap(yp,$p);!Op.done;Rp++,Op=Ep.next())Op=gp($p,yp,Rp,Op.value,wp),Op!==null&&(_d&&Op.alternate!==null&&$p.delete(Op.key===null?Rp:Op.key),bp=lp(Op,bp,Rp),Cp===null?_p=Op:Cp.sibling=Op,Cp=Op);return _d&&$p.forEach(function(Mp){return np(yp,Mp)}),I$1&&tg(yp,Rp),_p}function Sp(yp,bp,Ep,wp){if(typeof Ep=="object"&&Ep!==null&&Ep.type===ya$1&&Ep.key===null&&(Ep=Ep.props.children),typeof Ep=="object"&&Ep!==null){switch(Ep.$$typeof){case va$1:e:{for(var _p=Ep.key,Cp=bp;Cp!==null;){if(Cp.key===_p){if(_p=Ep.type,_p===ya$1){if(Cp.tag===7){rp(yp,Cp.sibling),bp=sp(Cp,Ep.props.children),bp.return=yp,yp=bp;break e}}else if(Cp.elementType===_p||typeof _p=="object"&&_p!==null&&_p.$$typeof===Ha$1&&uh$1(_p)===Cp.type){rp(yp,Cp.sibling),bp=sp(Cp,Ep.props),bp.ref=sh$1(yp,Cp,Ep),bp.return=yp,yp=bp;break e}rp(yp,Cp);break}else np(yp,Cp);Cp=Cp.sibling}Ep.type===ya$1?(bp=Ah$1(Ep.props.children,yp.mode,wp,Ep.key),bp.return=yp,yp=bp):(wp=yh$1(Ep.type,Ep.key,Ep.props,null,yp.mode,wp),wp.ref=sh$1(yp,bp,Ep),wp.return=yp,yp=wp)}return up(yp);case wa$1:e:{for(Cp=Ep.key;bp!==null;){if(bp.key===Cp)if(bp.tag===4&&bp.stateNode.containerInfo===Ep.containerInfo&&bp.stateNode.implementation===Ep.implementation){rp(yp,bp.sibling),bp=sp(bp,Ep.children||[]),bp.return=yp,yp=bp;break e}else{rp(yp,bp);break}else np(yp,bp);bp=bp.sibling}bp=zh$1(Ep,yp.mode,wp),bp.return=yp,yp=bp}return up(yp);case Ha$1:return Cp=Ep._init,Sp(yp,bp,Cp(Ep._payload),wp)}if(eb(Ep))return vp(yp,bp,Ep,wp);if(Ka$1(Ep))return xp(yp,bp,Ep,wp);th$1(yp,Ep)}return typeof Ep=="string"&&Ep!==""||typeof Ep=="number"?(Ep=""+Ep,bp!==null&&bp.tag===6?(rp(yp,bp.sibling),bp=sp(bp,Ep),bp.return=yp,yp=bp):(rp(yp,bp),bp=xh$1(Ep,yp.mode,wp),bp.return=yp,yp=bp),up(yp)):rp(yp,bp)}return Sp}var Bh$1=vh$1(!0),Ch$1=vh$1(!1),Dh$1={},Eh$1=Uf$1(Dh$1),Fh$1=Uf$1(Dh$1),Gh$1=Uf$1(Dh$1);function Hh$1(_d){if(_d===Dh$1)throw Error(p$1(174));return _d}function Ih$1(_d,np){switch(G$1(Gh$1,np),G$1(Fh$1,_d),G$1(Eh$1,Dh$1),_d=np.nodeType,_d){case 9:case 11:np=(np=np.documentElement)?np.namespaceURI:lb(null,"");break;default:_d=_d===8?np.parentNode:np,np=_d.namespaceURI||null,_d=_d.tagName,np=lb(np,_d)}E$1(Eh$1),G$1(Eh$1,np)}function Jh$1(){E$1(Eh$1),E$1(Fh$1),E$1(Gh$1)}function Kh$1(_d){Hh$1(Gh$1.current);var np=Hh$1(Eh$1.current),rp=lb(np,_d.type);np!==rp&&(G$1(Fh$1,_d),G$1(Eh$1,rp))}function Lh$1(_d){Fh$1.current===_d&&(E$1(Eh$1),E$1(Fh$1))}var M$1=Uf$1(0);function Mh$1(_d){for(var np=_d;np!==null;){if(np.tag===13){var rp=np.memoizedState;if(rp!==null&&(rp=rp.dehydrated,rp===null||rp.data==="$?"||rp.data==="$!"))return np}else if(np.tag===19&&np.memoizedProps.revealOrder!==void 0){if(np.flags&128)return np}else if(np.child!==null){np.child.return=np,np=np.child;continue}if(np===_d)break;for(;np.sibling===null;){if(np.return===null||np.return===_d)return null;np=np.return}np.sibling.return=np.return,np=np.sibling}return null}var Nh$1=[];function Oh$1(){for(var _d=0;_d<Nh$1.length;_d++)Nh$1[_d]._workInProgressVersionPrimary=null;Nh$1.length=0}var Ph$1=ua$1.ReactCurrentDispatcher,Qh$1=ua$1.ReactCurrentBatchConfig,Rh$1=0,N$1=null,O$1=null,P$1=null,Sh$1=!1,Th$1=!1,Uh$1=0,Vh$1=0;function Q$1(){throw Error(p$1(321))}function Wh$1(_d,np){if(np===null)return!1;for(var rp=0;rp<np.length&&rp<_d.length;rp++)if(!He$1(_d[rp],np[rp]))return!1;return!0}function Xh$1(_d,np,rp,ap,sp,lp){if(Rh$1=lp,N$1=np,np.memoizedState=null,np.updateQueue=null,np.lanes=0,Ph$1.current=_d===null||_d.memoizedState===null?Yh$1:Zh$1,_d=rp(ap,sp),Th$1){lp=0;do{if(Th$1=!1,Uh$1=0,25<=lp)throw Error(p$1(301));lp+=1,P$1=O$1=null,np.updateQueue=null,Ph$1.current=$h$1,_d=rp(ap,sp)}while(Th$1)}if(Ph$1.current=ai$1,np=O$1!==null&&O$1.next!==null,Rh$1=0,P$1=O$1=N$1=null,Sh$1=!1,np)throw Error(p$1(300));return _d}function bi$1(){var _d=Uh$1!==0;return Uh$1=0,_d}function ci$1(){var _d={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return P$1===null?N$1.memoizedState=P$1=_d:P$1=P$1.next=_d,P$1}function di$1(){if(O$1===null){var _d=N$1.alternate;_d=_d!==null?_d.memoizedState:null}else _d=O$1.next;var np=P$1===null?N$1.memoizedState:P$1.next;if(np!==null)P$1=np,O$1=_d;else{if(_d===null)throw Error(p$1(310));O$1=_d,_d={memoizedState:O$1.memoizedState,baseState:O$1.baseState,baseQueue:O$1.baseQueue,queue:O$1.queue,next:null},P$1===null?N$1.memoizedState=P$1=_d:P$1=P$1.next=_d}return P$1}function ei$1(_d,np){return typeof np=="function"?np(_d):np}function fi$1(_d){var np=di$1(),rp=np.queue;if(rp===null)throw Error(p$1(311));rp.lastRenderedReducer=_d;var ap=O$1,sp=ap.baseQueue,lp=rp.pending;if(lp!==null){if(sp!==null){var up=sp.next;sp.next=lp.next,lp.next=up}ap.baseQueue=sp=lp,rp.pending=null}if(sp!==null){lp=sp.next,ap=ap.baseState;var cp=up=null,dp=null,fp=lp;do{var pp=fp.lane;if((Rh$1&pp)===pp)dp!==null&&(dp=dp.next={lane:0,action:fp.action,hasEagerState:fp.hasEagerState,eagerState:fp.eagerState,next:null}),ap=fp.hasEagerState?fp.eagerState:_d(ap,fp.action);else{var hp={lane:pp,action:fp.action,hasEagerState:fp.hasEagerState,eagerState:fp.eagerState,next:null};dp===null?(cp=dp=hp,up=ap):dp=dp.next=hp,N$1.lanes|=pp,hh$1|=pp}fp=fp.next}while(fp!==null&&fp!==lp);dp===null?up=ap:dp.next=cp,He$1(ap,np.memoizedState)||(Ug=!0),np.memoizedState=ap,np.baseState=up,np.baseQueue=dp,rp.lastRenderedState=ap}if(_d=rp.interleaved,_d!==null){sp=_d;do lp=sp.lane,N$1.lanes|=lp,hh$1|=lp,sp=sp.next;while(sp!==_d)}else sp===null&&(rp.lanes=0);return[np.memoizedState,rp.dispatch]}function gi$1(_d){var np=di$1(),rp=np.queue;if(rp===null)throw Error(p$1(311));rp.lastRenderedReducer=_d;var ap=rp.dispatch,sp=rp.pending,lp=np.memoizedState;if(sp!==null){rp.pending=null;var up=sp=sp.next;do lp=_d(lp,up.action),up=up.next;while(up!==sp);He$1(lp,np.memoizedState)||(Ug=!0),np.memoizedState=lp,np.baseQueue===null&&(np.baseState=lp),rp.lastRenderedState=lp}return[lp,ap]}function hi$1(){}function ii$1(_d,np){var rp=N$1,ap=di$1(),sp=np(),lp=!He$1(ap.memoizedState,sp);if(lp&&(ap.memoizedState=sp,Ug=!0),ap=ap.queue,ji$1(ki$1.bind(null,rp,ap,_d),[_d]),ap.getSnapshot!==np||lp||P$1!==null&&P$1.memoizedState.tag&1){if(rp.flags|=2048,li$1(9,mi$1.bind(null,rp,ap,sp,np),void 0,null),R$2===null)throw Error(p$1(349));Rh$1&30||ni$1(rp,np,sp)}return sp}function ni$1(_d,np,rp){_d.flags|=16384,_d={getSnapshot:np,value:rp},np=N$1.updateQueue,np===null?(np={lastEffect:null,stores:null},N$1.updateQueue=np,np.stores=[_d]):(rp=np.stores,rp===null?np.stores=[_d]:rp.push(_d))}function mi$1(_d,np,rp,ap){np.value=rp,np.getSnapshot=ap,oi$1(np)&&pi$1(_d)}function ki$1(_d,np,rp){return rp(function(){oi$1(np)&&pi$1(_d)})}function oi$1(_d){var np=_d.getSnapshot;_d=_d.value;try{var rp=np();return!He$1(_d,rp)}catch{return!0}}function pi$1(_d){var np=Zg(_d,1);np!==null&&mh$1(np,_d,1,-1)}function qi$1(_d){var np=ci$1();return typeof _d=="function"&&(_d=_d()),np.memoizedState=np.baseState=_d,_d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ei$1,lastRenderedState:_d},np.queue=_d,_d=_d.dispatch=ri$1.bind(null,N$1,_d),[np.memoizedState,_d]}function li$1(_d,np,rp,ap){return _d={tag:_d,create:np,destroy:rp,deps:ap,next:null},np=N$1.updateQueue,np===null?(np={lastEffect:null,stores:null},N$1.updateQueue=np,np.lastEffect=_d.next=_d):(rp=np.lastEffect,rp===null?np.lastEffect=_d.next=_d:(ap=rp.next,rp.next=_d,_d.next=ap,np.lastEffect=_d)),_d}function si$1(){return di$1().memoizedState}function ti$1(_d,np,rp,ap){var sp=ci$1();N$1.flags|=_d,sp.memoizedState=li$1(1|np,rp,void 0,ap===void 0?null:ap)}function ui$1(_d,np,rp,ap){var sp=di$1();ap=ap===void 0?null:ap;var lp=void 0;if(O$1!==null){var up=O$1.memoizedState;if(lp=up.destroy,ap!==null&&Wh$1(ap,up.deps)){sp.memoizedState=li$1(np,rp,lp,ap);return}}N$1.flags|=_d,sp.memoizedState=li$1(1|np,rp,lp,ap)}function vi$1(_d,np){return ti$1(8390656,8,_d,np)}function ji$1(_d,np){return ui$1(2048,8,_d,np)}function wi$1(_d,np){return ui$1(4,2,_d,np)}function xi$1(_d,np){return ui$1(4,4,_d,np)}function yi$1(_d,np){if(typeof np=="function")return _d=_d(),np(_d),function(){np(null)};if(np!=null)return _d=_d(),np.current=_d,function(){np.current=null}}function zi$1(_d,np,rp){return rp=rp!=null?rp.concat([_d]):null,ui$1(4,4,yi$1.bind(null,np,_d),rp)}function Ai$1(){}function Bi$1(_d,np){var rp=di$1();np=np===void 0?null:np;var ap=rp.memoizedState;return ap!==null&&np!==null&&Wh$1(np,ap[1])?ap[0]:(rp.memoizedState=[_d,np],_d)}function Ci$1(_d,np){var rp=di$1();np=np===void 0?null:np;var ap=rp.memoizedState;return ap!==null&&np!==null&&Wh$1(np,ap[1])?ap[0]:(_d=_d(),rp.memoizedState=[_d,np],_d)}function Di$1(_d,np,rp){return Rh$1&21?(He$1(rp,np)||(rp=yc$1(),N$1.lanes|=rp,hh$1|=rp,_d.baseState=!0),np):(_d.baseState&&(_d.baseState=!1,Ug=!0),_d.memoizedState=rp)}function Ei$1(_d,np){var rp=C$1;C$1=rp!==0&&4>rp?rp:4,_d(!0);var ap=Qh$1.transition;Qh$1.transition={};try{_d(!1),np()}finally{C$1=rp,Qh$1.transition=ap}}function Fi$1(){return di$1().memoizedState}function Gi$1(_d,np,rp){var ap=lh$1(_d);if(rp={lane:ap,action:rp,hasEagerState:!1,eagerState:null,next:null},Hi$1(_d))Ii$1(np,rp);else if(rp=Yg(_d,np,rp,ap),rp!==null){var sp=L$1();mh$1(rp,_d,ap,sp),Ji$1(rp,np,ap)}}function ri$1(_d,np,rp){var ap=lh$1(_d),sp={lane:ap,action:rp,hasEagerState:!1,eagerState:null,next:null};if(Hi$1(_d))Ii$1(np,sp);else{var lp=_d.alternate;if(_d.lanes===0&&(lp===null||lp.lanes===0)&&(lp=np.lastRenderedReducer,lp!==null))try{var up=np.lastRenderedState,cp=lp(up,rp);if(sp.hasEagerState=!0,sp.eagerState=cp,He$1(cp,up)){var dp=np.interleaved;dp===null?(sp.next=sp,Xg(np)):(sp.next=dp.next,dp.next=sp),np.interleaved=sp;return}}catch{}finally{}rp=Yg(_d,np,sp,ap),rp!==null&&(sp=L$1(),mh$1(rp,_d,ap,sp),Ji$1(rp,np,ap))}}function Hi$1(_d){var np=_d.alternate;return _d===N$1||np!==null&&np===N$1}function Ii$1(_d,np){Th$1=Sh$1=!0;var rp=_d.pending;rp===null?np.next=np:(np.next=rp.next,rp.next=np),_d.pending=np}function Ji$1(_d,np,rp){if(rp&4194240){var ap=np.lanes;ap&=_d.pendingLanes,rp|=ap,np.lanes=rp,Cc$1(_d,rp)}}var ai$1={readContext:Vg,useCallback:Q$1,useContext:Q$1,useEffect:Q$1,useImperativeHandle:Q$1,useInsertionEffect:Q$1,useLayoutEffect:Q$1,useMemo:Q$1,useReducer:Q$1,useRef:Q$1,useState:Q$1,useDebugValue:Q$1,useDeferredValue:Q$1,useTransition:Q$1,useMutableSource:Q$1,useSyncExternalStore:Q$1,useId:Q$1,unstable_isNewReconciler:!1},Yh$1={readContext:Vg,useCallback:function(_d,np){return ci$1().memoizedState=[_d,np===void 0?null:np],_d},useContext:Vg,useEffect:vi$1,useImperativeHandle:function(_d,np,rp){return rp=rp!=null?rp.concat([_d]):null,ti$1(4194308,4,yi$1.bind(null,np,_d),rp)},useLayoutEffect:function(_d,np){return ti$1(4194308,4,_d,np)},useInsertionEffect:function(_d,np){return ti$1(4,2,_d,np)},useMemo:function(_d,np){var rp=ci$1();return np=np===void 0?null:np,_d=_d(),rp.memoizedState=[_d,np],_d},useReducer:function(_d,np,rp){var ap=ci$1();return np=rp!==void 0?rp(np):np,ap.memoizedState=ap.baseState=np,_d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_d,lastRenderedState:np},ap.queue=_d,_d=_d.dispatch=Gi$1.bind(null,N$1,_d),[ap.memoizedState,_d]},useRef:function(_d){var np=ci$1();return _d={current:_d},np.memoizedState=_d},useState:qi$1,useDebugValue:Ai$1,useDeferredValue:function(_d){return ci$1().memoizedState=_d},useTransition:function(){var _d=qi$1(!1),np=_d[0];return _d=Ei$1.bind(null,_d[1]),ci$1().memoizedState=_d,[np,_d]},useMutableSource:function(){},useSyncExternalStore:function(_d,np,rp){var ap=N$1,sp=ci$1();if(I$1){if(rp===void 0)throw Error(p$1(407));rp=rp()}else{if(rp=np(),R$2===null)throw Error(p$1(349));Rh$1&30||ni$1(ap,np,rp)}sp.memoizedState=rp;var lp={value:rp,getSnapshot:np};return sp.queue=lp,vi$1(ki$1.bind(null,ap,lp,_d),[_d]),ap.flags|=2048,li$1(9,mi$1.bind(null,ap,lp,rp,np),void 0,null),rp},useId:function(){var _d=ci$1(),np=R$2.identifierPrefix;if(I$1){var rp=sg,ap=rg;rp=(ap&~(1<<32-oc$1(ap)-1)).toString(32)+rp,np=":"+np+"R"+rp,rp=Uh$1++,0<rp&&(np+="H"+rp.toString(32)),np+=":"}else rp=Vh$1++,np=":"+np+"r"+rp.toString(32)+":";return _d.memoizedState=np},unstable_isNewReconciler:!1},Zh$1={readContext:Vg,useCallback:Bi$1,useContext:Vg,useEffect:ji$1,useImperativeHandle:zi$1,useInsertionEffect:wi$1,useLayoutEffect:xi$1,useMemo:Ci$1,useReducer:fi$1,useRef:si$1,useState:function(){return fi$1(ei$1)},useDebugValue:Ai$1,useDeferredValue:function(_d){var np=di$1();return Di$1(np,O$1.memoizedState,_d)},useTransition:function(){var _d=fi$1(ei$1)[0],np=di$1().memoizedState;return[_d,np]},useMutableSource:hi$1,useSyncExternalStore:ii$1,useId:Fi$1,unstable_isNewReconciler:!1},$h$1={readContext:Vg,useCallback:Bi$1,useContext:Vg,useEffect:ji$1,useImperativeHandle:zi$1,useInsertionEffect:wi$1,useLayoutEffect:xi$1,useMemo:Ci$1,useReducer:gi$1,useRef:si$1,useState:function(){return gi$1(ei$1)},useDebugValue:Ai$1,useDeferredValue:function(_d){var np=di$1();return O$1===null?np.memoizedState=_d:Di$1(np,O$1.memoizedState,_d)},useTransition:function(){var _d=gi$1(ei$1)[0],np=di$1().memoizedState;return[_d,np]},useMutableSource:hi$1,useSyncExternalStore:ii$1,useId:Fi$1,unstable_isNewReconciler:!1};function Ki$1(_d,np){try{var rp="",ap=np;do rp+=Pa$1(ap),ap=ap.return;while(ap);var sp=rp}catch(lp){sp=`
Error generating stack: `+lp.message+`
`+lp.stack}return{value:_d,source:np,stack:sp,digest:null}}function Li$1(_d,np,rp){return{value:_d,source:null,stack:rp??null,digest:np??null}}function Mi$1(_d,np){try{console.error(np.value)}catch(rp){setTimeout(function(){throw rp})}}var Ni$1=typeof WeakMap=="function"?WeakMap:Map;function Oi$1(_d,np,rp){rp=ch$1(-1,rp),rp.tag=3,rp.payload={element:null};var ap=np.value;return rp.callback=function(){Pi$1||(Pi$1=!0,Qi$1=ap),Mi$1(_d,np)},rp}function Ri$1(_d,np,rp){rp=ch$1(-1,rp),rp.tag=3;var ap=_d.type.getDerivedStateFromError;if(typeof ap=="function"){var sp=np.value;rp.payload=function(){return ap(sp)},rp.callback=function(){Mi$1(_d,np)}}var lp=_d.stateNode;return lp!==null&&typeof lp.componentDidCatch=="function"&&(rp.callback=function(){Mi$1(_d,np),typeof ap!="function"&&(Si$1===null?Si$1=new Set([this]):Si$1.add(this));var up=np.stack;this.componentDidCatch(np.value,{componentStack:up!==null?up:""})}),rp}function Ti$1(_d,np,rp){var ap=_d.pingCache;if(ap===null){ap=_d.pingCache=new Ni$1;var sp=new Set;ap.set(np,sp)}else sp=ap.get(np),sp===void 0&&(sp=new Set,ap.set(np,sp));sp.has(rp)||(sp.add(rp),_d=Ui$1.bind(null,_d,np,rp),np.then(_d,_d))}function Vi$1(_d){do{var np;if((np=_d.tag===13)&&(np=_d.memoizedState,np=np!==null?np.dehydrated!==null:!0),np)return _d;_d=_d.return}while(_d!==null);return null}function Wi$1(_d,np,rp,ap,sp){return _d.mode&1?(_d.flags|=65536,_d.lanes=sp,_d):(_d===np?_d.flags|=65536:(_d.flags|=128,rp.flags|=131072,rp.flags&=-52805,rp.tag===1&&(rp.alternate===null?rp.tag=17:(np=ch$1(-1,1),np.tag=2,dh$1(rp,np,1))),rp.lanes|=1),_d)}var Xi$1=ua$1.ReactCurrentOwner,Ug=!1;function Yi$1(_d,np,rp,ap){np.child=_d===null?Ch$1(np,null,rp,ap):Bh$1(np,_d.child,rp,ap)}function Zi$1(_d,np,rp,ap,sp){rp=rp.render;var lp=np.ref;return Tg(np,sp),ap=Xh$1(_d,np,rp,ap,lp,sp),rp=bi$1(),_d!==null&&!Ug?(np.updateQueue=_d.updateQueue,np.flags&=-2053,_d.lanes&=~sp,$i$1(_d,np,sp)):(I$1&&rp&&vg(np),np.flags|=1,Yi$1(_d,np,ap,sp),np.child)}function aj(_d,np,rp,ap,sp){if(_d===null){var lp=rp.type;return typeof lp=="function"&&!bj(lp)&&lp.defaultProps===void 0&&rp.compare===null&&rp.defaultProps===void 0?(np.tag=15,np.type=lp,cj(_d,np,lp,ap,sp)):(_d=yh$1(rp.type,null,ap,np,np.mode,sp),_d.ref=np.ref,_d.return=np,np.child=_d)}if(lp=_d.child,!(_d.lanes&sp)){var up=lp.memoizedProps;if(rp=rp.compare,rp=rp!==null?rp:Ie$1,rp(up,ap)&&_d.ref===np.ref)return $i$1(_d,np,sp)}return np.flags|=1,_d=wh$1(lp,ap),_d.ref=np.ref,_d.return=np,np.child=_d}function cj(_d,np,rp,ap,sp){if(_d!==null){var lp=_d.memoizedProps;if(Ie$1(lp,ap)&&_d.ref===np.ref)if(Ug=!1,np.pendingProps=ap=lp,(_d.lanes&sp)!==0)_d.flags&131072&&(Ug=!0);else return np.lanes=_d.lanes,$i$1(_d,np,sp)}return dj(_d,np,rp,ap,sp)}function ej(_d,np,rp){var ap=np.pendingProps,sp=ap.children,lp=_d!==null?_d.memoizedState:null;if(ap.mode==="hidden")if(!(np.mode&1))np.memoizedState={baseLanes:0,cachePool:null,transitions:null},G$1(fj,gj),gj|=rp;else{if(!(rp&1073741824))return _d=lp!==null?lp.baseLanes|rp:rp,np.lanes=np.childLanes=1073741824,np.memoizedState={baseLanes:_d,cachePool:null,transitions:null},np.updateQueue=null,G$1(fj,gj),gj|=_d,null;np.memoizedState={baseLanes:0,cachePool:null,transitions:null},ap=lp!==null?lp.baseLanes:rp,G$1(fj,gj),gj|=ap}else lp!==null?(ap=lp.baseLanes|rp,np.memoizedState=null):ap=rp,G$1(fj,gj),gj|=ap;return Yi$1(_d,np,sp,rp),np.child}function hj(_d,np){var rp=np.ref;(_d===null&&rp!==null||_d!==null&&_d.ref!==rp)&&(np.flags|=512,np.flags|=2097152)}function dj(_d,np,rp,ap,sp){var lp=Zf$1(rp)?Xf$1:H$1.current;return lp=Yf$1(np,lp),Tg(np,sp),rp=Xh$1(_d,np,rp,ap,lp,sp),ap=bi$1(),_d!==null&&!Ug?(np.updateQueue=_d.updateQueue,np.flags&=-2053,_d.lanes&=~sp,$i$1(_d,np,sp)):(I$1&&ap&&vg(np),np.flags|=1,Yi$1(_d,np,rp,sp),np.child)}function ij(_d,np,rp,ap,sp){if(Zf$1(rp)){var lp=!0;cg(np)}else lp=!1;if(Tg(np,sp),np.stateNode===null)jj(_d,np),ph$1(np,rp,ap),rh$1(np,rp,ap,sp),ap=!0;else if(_d===null){var up=np.stateNode,cp=np.memoizedProps;up.props=cp;var dp=up.context,fp=rp.contextType;typeof fp=="object"&&fp!==null?fp=Vg(fp):(fp=Zf$1(rp)?Xf$1:H$1.current,fp=Yf$1(np,fp));var pp=rp.getDerivedStateFromProps,hp=typeof pp=="function"||typeof up.getSnapshotBeforeUpdate=="function";hp||typeof up.UNSAFE_componentWillReceiveProps!="function"&&typeof up.componentWillReceiveProps!="function"||(cp!==ap||dp!==fp)&&qh$1(np,up,ap,fp),$g=!1;var mp=np.memoizedState;up.state=mp,gh$1(np,ap,up,sp),dp=np.memoizedState,cp!==ap||mp!==dp||Wf$1.current||$g?(typeof pp=="function"&&(kh$1(np,rp,pp,ap),dp=np.memoizedState),(cp=$g||oh$1(np,rp,cp,ap,mp,dp,fp))?(hp||typeof up.UNSAFE_componentWillMount!="function"&&typeof up.componentWillMount!="function"||(typeof up.componentWillMount=="function"&&up.componentWillMount(),typeof up.UNSAFE_componentWillMount=="function"&&up.UNSAFE_componentWillMount()),typeof up.componentDidMount=="function"&&(np.flags|=4194308)):(typeof up.componentDidMount=="function"&&(np.flags|=4194308),np.memoizedProps=ap,np.memoizedState=dp),up.props=ap,up.state=dp,up.context=fp,ap=cp):(typeof up.componentDidMount=="function"&&(np.flags|=4194308),ap=!1)}else{up=np.stateNode,bh$1(_d,np),cp=np.memoizedProps,fp=np.type===np.elementType?cp:Lg(np.type,cp),up.props=fp,hp=np.pendingProps,mp=up.context,dp=rp.contextType,typeof dp=="object"&&dp!==null?dp=Vg(dp):(dp=Zf$1(rp)?Xf$1:H$1.current,dp=Yf$1(np,dp));var gp=rp.getDerivedStateFromProps;(pp=typeof gp=="function"||typeof up.getSnapshotBeforeUpdate=="function")||typeof up.UNSAFE_componentWillReceiveProps!="function"&&typeof up.componentWillReceiveProps!="function"||(cp!==hp||mp!==dp)&&qh$1(np,up,ap,dp),$g=!1,mp=np.memoizedState,up.state=mp,gh$1(np,ap,up,sp);var vp=np.memoizedState;cp!==hp||mp!==vp||Wf$1.current||$g?(typeof gp=="function"&&(kh$1(np,rp,gp,ap),vp=np.memoizedState),(fp=$g||oh$1(np,rp,fp,ap,mp,vp,dp)||!1)?(pp||typeof up.UNSAFE_componentWillUpdate!="function"&&typeof up.componentWillUpdate!="function"||(typeof up.componentWillUpdate=="function"&&up.componentWillUpdate(ap,vp,dp),typeof up.UNSAFE_componentWillUpdate=="function"&&up.UNSAFE_componentWillUpdate(ap,vp,dp)),typeof up.componentDidUpdate=="function"&&(np.flags|=4),typeof up.getSnapshotBeforeUpdate=="function"&&(np.flags|=1024)):(typeof up.componentDidUpdate!="function"||cp===_d.memoizedProps&&mp===_d.memoizedState||(np.flags|=4),typeof up.getSnapshotBeforeUpdate!="function"||cp===_d.memoizedProps&&mp===_d.memoizedState||(np.flags|=1024),np.memoizedProps=ap,np.memoizedState=vp),up.props=ap,up.state=vp,up.context=dp,ap=fp):(typeof up.componentDidUpdate!="function"||cp===_d.memoizedProps&&mp===_d.memoizedState||(np.flags|=4),typeof up.getSnapshotBeforeUpdate!="function"||cp===_d.memoizedProps&&mp===_d.memoizedState||(np.flags|=1024),ap=!1)}return kj(_d,np,rp,ap,lp,sp)}function kj(_d,np,rp,ap,sp,lp){hj(_d,np);var up=(np.flags&128)!==0;if(!ap&&!up)return sp&&dg(np,rp,!1),$i$1(_d,np,lp);ap=np.stateNode,Xi$1.current=np;var cp=up&&typeof rp.getDerivedStateFromError!="function"?null:ap.render();return np.flags|=1,_d!==null&&up?(np.child=Bh$1(np,_d.child,null,lp),np.child=Bh$1(np,null,cp,lp)):Yi$1(_d,np,cp,lp),np.memoizedState=ap.state,sp&&dg(np,rp,!0),np.child}function lj(_d){var np=_d.stateNode;np.pendingContext?ag(_d,np.pendingContext,np.pendingContext!==np.context):np.context&&ag(_d,np.context,!1),Ih$1(_d,np.containerInfo)}function mj(_d,np,rp,ap,sp){return Ig(),Jg(sp),np.flags|=256,Yi$1(_d,np,rp,ap),np.child}var nj={dehydrated:null,treeContext:null,retryLane:0};function oj(_d){return{baseLanes:_d,cachePool:null,transitions:null}}function pj(_d,np,rp){var ap=np.pendingProps,sp=M$1.current,lp=!1,up=(np.flags&128)!==0,cp;if((cp=up)||(cp=_d!==null&&_d.memoizedState===null?!1:(sp&2)!==0),cp?(lp=!0,np.flags&=-129):(_d===null||_d.memoizedState!==null)&&(sp|=1),G$1(M$1,sp&1),_d===null)return Eg(np),_d=np.memoizedState,_d!==null&&(_d=_d.dehydrated,_d!==null)?(np.mode&1?_d.data==="$!"?np.lanes=8:np.lanes=1073741824:np.lanes=1,null):(up=ap.children,_d=ap.fallback,lp?(ap=np.mode,lp=np.child,up={mode:"hidden",children:up},!(ap&1)&&lp!==null?(lp.childLanes=0,lp.pendingProps=up):lp=qj(up,ap,0,null),_d=Ah$1(_d,ap,rp,null),lp.return=np,_d.return=np,lp.sibling=_d,np.child=lp,np.child.memoizedState=oj(rp),np.memoizedState=nj,_d):rj(np,up));if(sp=_d.memoizedState,sp!==null&&(cp=sp.dehydrated,cp!==null))return sj(_d,np,up,ap,cp,sp,rp);if(lp){lp=ap.fallback,up=np.mode,sp=_d.child,cp=sp.sibling;var dp={mode:"hidden",children:ap.children};return!(up&1)&&np.child!==sp?(ap=np.child,ap.childLanes=0,ap.pendingProps=dp,np.deletions=null):(ap=wh$1(sp,dp),ap.subtreeFlags=sp.subtreeFlags&14680064),cp!==null?lp=wh$1(cp,lp):(lp=Ah$1(lp,up,rp,null),lp.flags|=2),lp.return=np,ap.return=np,ap.sibling=lp,np.child=ap,ap=lp,lp=np.child,up=_d.child.memoizedState,up=up===null?oj(rp):{baseLanes:up.baseLanes|rp,cachePool:null,transitions:up.transitions},lp.memoizedState=up,lp.childLanes=_d.childLanes&~rp,np.memoizedState=nj,ap}return lp=_d.child,_d=lp.sibling,ap=wh$1(lp,{mode:"visible",children:ap.children}),!(np.mode&1)&&(ap.lanes=rp),ap.return=np,ap.sibling=null,_d!==null&&(rp=np.deletions,rp===null?(np.deletions=[_d],np.flags|=16):rp.push(_d)),np.child=ap,np.memoizedState=null,ap}function rj(_d,np){return np=qj({mode:"visible",children:np},_d.mode,0,null),np.return=_d,_d.child=np}function tj(_d,np,rp,ap){return ap!==null&&Jg(ap),Bh$1(np,_d.child,null,rp),_d=rj(np,np.pendingProps.children),_d.flags|=2,np.memoizedState=null,_d}function sj(_d,np,rp,ap,sp,lp,up){if(rp)return np.flags&256?(np.flags&=-257,ap=Li$1(Error(p$1(422))),tj(_d,np,up,ap)):np.memoizedState!==null?(np.child=_d.child,np.flags|=128,null):(lp=ap.fallback,sp=np.mode,ap=qj({mode:"visible",children:ap.children},sp,0,null),lp=Ah$1(lp,sp,up,null),lp.flags|=2,ap.return=np,lp.return=np,ap.sibling=lp,np.child=ap,np.mode&1&&Bh$1(np,_d.child,null,up),np.child.memoizedState=oj(up),np.memoizedState=nj,lp);if(!(np.mode&1))return tj(_d,np,up,null);if(sp.data==="$!"){if(ap=sp.nextSibling&&sp.nextSibling.dataset,ap)var cp=ap.dgst;return ap=cp,lp=Error(p$1(419)),ap=Li$1(lp,ap,void 0),tj(_d,np,up,ap)}if(cp=(up&_d.childLanes)!==0,Ug||cp){if(ap=R$2,ap!==null){switch(up&-up){case 4:sp=2;break;case 16:sp=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:sp=32;break;case 536870912:sp=268435456;break;default:sp=0}sp=sp&(ap.suspendedLanes|up)?0:sp,sp!==0&&sp!==lp.retryLane&&(lp.retryLane=sp,Zg(_d,sp),mh$1(ap,_d,sp,-1))}return uj(),ap=Li$1(Error(p$1(421))),tj(_d,np,up,ap)}return sp.data==="$?"?(np.flags|=128,np.child=_d.child,np=vj.bind(null,_d),sp._reactRetry=np,null):(_d=lp.treeContext,yg=Lf$1(sp.nextSibling),xg=np,I$1=!0,zg=null,_d!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=_d.id,sg=_d.overflow,qg=np),np=rj(np,ap.children),np.flags|=4096,np)}function wj(_d,np,rp){_d.lanes|=np;var ap=_d.alternate;ap!==null&&(ap.lanes|=np),Sg(_d.return,np,rp)}function xj(_d,np,rp,ap,sp){var lp=_d.memoizedState;lp===null?_d.memoizedState={isBackwards:np,rendering:null,renderingStartTime:0,last:ap,tail:rp,tailMode:sp}:(lp.isBackwards=np,lp.rendering=null,lp.renderingStartTime=0,lp.last=ap,lp.tail=rp,lp.tailMode=sp)}function yj(_d,np,rp){var ap=np.pendingProps,sp=ap.revealOrder,lp=ap.tail;if(Yi$1(_d,np,ap.children,rp),ap=M$1.current,ap&2)ap=ap&1|2,np.flags|=128;else{if(_d!==null&&_d.flags&128)e:for(_d=np.child;_d!==null;){if(_d.tag===13)_d.memoizedState!==null&&wj(_d,rp,np);else if(_d.tag===19)wj(_d,rp,np);else if(_d.child!==null){_d.child.return=_d,_d=_d.child;continue}if(_d===np)break e;for(;_d.sibling===null;){if(_d.return===null||_d.return===np)break e;_d=_d.return}_d.sibling.return=_d.return,_d=_d.sibling}ap&=1}if(G$1(M$1,ap),!(np.mode&1))np.memoizedState=null;else switch(sp){case"forwards":for(rp=np.child,sp=null;rp!==null;)_d=rp.alternate,_d!==null&&Mh$1(_d)===null&&(sp=rp),rp=rp.sibling;rp=sp,rp===null?(sp=np.child,np.child=null):(sp=rp.sibling,rp.sibling=null),xj(np,!1,sp,rp,lp);break;case"backwards":for(rp=null,sp=np.child,np.child=null;sp!==null;){if(_d=sp.alternate,_d!==null&&Mh$1(_d)===null){np.child=sp;break}_d=sp.sibling,sp.sibling=rp,rp=sp,sp=_d}xj(np,!0,rp,null,lp);break;case"together":xj(np,!1,null,null,void 0);break;default:np.memoizedState=null}return np.child}function jj(_d,np){!(np.mode&1)&&_d!==null&&(_d.alternate=null,np.alternate=null,np.flags|=2)}function $i$1(_d,np,rp){if(_d!==null&&(np.dependencies=_d.dependencies),hh$1|=np.lanes,!(rp&np.childLanes))return null;if(_d!==null&&np.child!==_d.child)throw Error(p$1(153));if(np.child!==null){for(_d=np.child,rp=wh$1(_d,_d.pendingProps),np.child=rp,rp.return=np;_d.sibling!==null;)_d=_d.sibling,rp=rp.sibling=wh$1(_d,_d.pendingProps),rp.return=np;rp.sibling=null}return np.child}function zj(_d,np,rp){switch(np.tag){case 3:lj(np),Ig();break;case 5:Kh$1(np);break;case 1:Zf$1(np.type)&&cg(np);break;case 4:Ih$1(np,np.stateNode.containerInfo);break;case 10:var ap=np.type._context,sp=np.memoizedProps.value;G$1(Mg,ap._currentValue),ap._currentValue=sp;break;case 13:if(ap=np.memoizedState,ap!==null)return ap.dehydrated!==null?(G$1(M$1,M$1.current&1),np.flags|=128,null):rp&np.child.childLanes?pj(_d,np,rp):(G$1(M$1,M$1.current&1),_d=$i$1(_d,np,rp),_d!==null?_d.sibling:null);G$1(M$1,M$1.current&1);break;case 19:if(ap=(rp&np.childLanes)!==0,_d.flags&128){if(ap)return yj(_d,np,rp);np.flags|=128}if(sp=np.memoizedState,sp!==null&&(sp.rendering=null,sp.tail=null,sp.lastEffect=null),G$1(M$1,M$1.current),ap)break;return null;case 22:case 23:return np.lanes=0,ej(_d,np,rp)}return $i$1(_d,np,rp)}var Aj,Bj,Cj,Dj;Aj=function(_d,np){for(var rp=np.child;rp!==null;){if(rp.tag===5||rp.tag===6)_d.appendChild(rp.stateNode);else if(rp.tag!==4&&rp.child!==null){rp.child.return=rp,rp=rp.child;continue}if(rp===np)break;for(;rp.sibling===null;){if(rp.return===null||rp.return===np)return;rp=rp.return}rp.sibling.return=rp.return,rp=rp.sibling}};Bj=function(){};Cj=function(_d,np,rp,ap){var sp=_d.memoizedProps;if(sp!==ap){_d=np.stateNode,Hh$1(Eh$1.current);var lp=null;switch(rp){case"input":sp=Ya$1(_d,sp),ap=Ya$1(_d,ap),lp=[];break;case"select":sp=A$1({},sp,{value:void 0}),ap=A$1({},ap,{value:void 0}),lp=[];break;case"textarea":sp=gb(_d,sp),ap=gb(_d,ap),lp=[];break;default:typeof sp.onClick!="function"&&typeof ap.onClick=="function"&&(_d.onclick=Bf$1)}ub(rp,ap);var up;rp=null;for(fp in sp)if(!ap.hasOwnProperty(fp)&&sp.hasOwnProperty(fp)&&sp[fp]!=null)if(fp==="style"){var cp=sp[fp];for(up in cp)cp.hasOwnProperty(up)&&(rp||(rp={}),rp[up]="")}else fp!=="dangerouslySetInnerHTML"&&fp!=="children"&&fp!=="suppressContentEditableWarning"&&fp!=="suppressHydrationWarning"&&fp!=="autoFocus"&&(ea$1.hasOwnProperty(fp)?lp||(lp=[]):(lp=lp||[]).push(fp,null));for(fp in ap){var dp=ap[fp];if(cp=sp!=null?sp[fp]:void 0,ap.hasOwnProperty(fp)&&dp!==cp&&(dp!=null||cp!=null))if(fp==="style")if(cp){for(up in cp)!cp.hasOwnProperty(up)||dp&&dp.hasOwnProperty(up)||(rp||(rp={}),rp[up]="");for(up in dp)dp.hasOwnProperty(up)&&cp[up]!==dp[up]&&(rp||(rp={}),rp[up]=dp[up])}else rp||(lp||(lp=[]),lp.push(fp,rp)),rp=dp;else fp==="dangerouslySetInnerHTML"?(dp=dp?dp.__html:void 0,cp=cp?cp.__html:void 0,dp!=null&&cp!==dp&&(lp=lp||[]).push(fp,dp)):fp==="children"?typeof dp!="string"&&typeof dp!="number"||(lp=lp||[]).push(fp,""+dp):fp!=="suppressContentEditableWarning"&&fp!=="suppressHydrationWarning"&&(ea$1.hasOwnProperty(fp)?(dp!=null&&fp==="onScroll"&&D$1("scroll",_d),lp||cp===dp||(lp=[])):(lp=lp||[]).push(fp,dp))}rp&&(lp=lp||[]).push("style",rp);var fp=lp;(np.updateQueue=fp)&&(np.flags|=4)}};Dj=function(_d,np,rp,ap){rp!==ap&&(np.flags|=4)};function Ej(_d,np){if(!I$1)switch(_d.tailMode){case"hidden":np=_d.tail;for(var rp=null;np!==null;)np.alternate!==null&&(rp=np),np=np.sibling;rp===null?_d.tail=null:rp.sibling=null;break;case"collapsed":rp=_d.tail;for(var ap=null;rp!==null;)rp.alternate!==null&&(ap=rp),rp=rp.sibling;ap===null?np||_d.tail===null?_d.tail=null:_d.tail.sibling=null:ap.sibling=null}}function S$1(_d){var np=_d.alternate!==null&&_d.alternate.child===_d.child,rp=0,ap=0;if(np)for(var sp=_d.child;sp!==null;)rp|=sp.lanes|sp.childLanes,ap|=sp.subtreeFlags&14680064,ap|=sp.flags&14680064,sp.return=_d,sp=sp.sibling;else for(sp=_d.child;sp!==null;)rp|=sp.lanes|sp.childLanes,ap|=sp.subtreeFlags,ap|=sp.flags,sp.return=_d,sp=sp.sibling;return _d.subtreeFlags|=ap,_d.childLanes=rp,np}function Fj(_d,np,rp){var ap=np.pendingProps;switch(wg(np),np.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S$1(np),null;case 1:return Zf$1(np.type)&&$f$1(),S$1(np),null;case 3:return ap=np.stateNode,Jh$1(),E$1(Wf$1),E$1(H$1),Oh$1(),ap.pendingContext&&(ap.context=ap.pendingContext,ap.pendingContext=null),(_d===null||_d.child===null)&&(Gg(np)?np.flags|=4:_d===null||_d.memoizedState.isDehydrated&&!(np.flags&256)||(np.flags|=1024,zg!==null&&(Gj(zg),zg=null))),Bj(_d,np),S$1(np),null;case 5:Lh$1(np);var sp=Hh$1(Gh$1.current);if(rp=np.type,_d!==null&&np.stateNode!=null)Cj(_d,np,rp,ap,sp),_d.ref!==np.ref&&(np.flags|=512,np.flags|=2097152);else{if(!ap){if(np.stateNode===null)throw Error(p$1(166));return S$1(np),null}if(_d=Hh$1(Eh$1.current),Gg(np)){ap=np.stateNode,rp=np.type;var lp=np.memoizedProps;switch(ap[Of$1]=np,ap[Pf$1]=lp,_d=(np.mode&1)!==0,rp){case"dialog":D$1("cancel",ap),D$1("close",ap);break;case"iframe":case"object":case"embed":D$1("load",ap);break;case"video":case"audio":for(sp=0;sp<lf$1.length;sp++)D$1(lf$1[sp],ap);break;case"source":D$1("error",ap);break;case"img":case"image":case"link":D$1("error",ap),D$1("load",ap);break;case"details":D$1("toggle",ap);break;case"input":Za$1(ap,lp),D$1("invalid",ap);break;case"select":ap._wrapperState={wasMultiple:!!lp.multiple},D$1("invalid",ap);break;case"textarea":hb(ap,lp),D$1("invalid",ap)}ub(rp,lp),sp=null;for(var up in lp)if(lp.hasOwnProperty(up)){var cp=lp[up];up==="children"?typeof cp=="string"?ap.textContent!==cp&&(lp.suppressHydrationWarning!==!0&&Af$1(ap.textContent,cp,_d),sp=["children",cp]):typeof cp=="number"&&ap.textContent!==""+cp&&(lp.suppressHydrationWarning!==!0&&Af$1(ap.textContent,cp,_d),sp=["children",""+cp]):ea$1.hasOwnProperty(up)&&cp!=null&&up==="onScroll"&&D$1("scroll",ap)}switch(rp){case"input":Va$1(ap),db(ap,lp,!0);break;case"textarea":Va$1(ap),jb(ap);break;case"select":case"option":break;default:typeof lp.onClick=="function"&&(ap.onclick=Bf$1)}ap=sp,np.updateQueue=ap,ap!==null&&(np.flags|=4)}else{up=sp.nodeType===9?sp:sp.ownerDocument,_d==="http://www.w3.org/1999/xhtml"&&(_d=kb(rp)),_d==="http://www.w3.org/1999/xhtml"?rp==="script"?(_d=up.createElement("div"),_d.innerHTML="<script><\/script>",_d=_d.removeChild(_d.firstChild)):typeof ap.is=="string"?_d=up.createElement(rp,{is:ap.is}):(_d=up.createElement(rp),rp==="select"&&(up=_d,ap.multiple?up.multiple=!0:ap.size&&(up.size=ap.size))):_d=up.createElementNS(_d,rp),_d[Of$1]=np,_d[Pf$1]=ap,Aj(_d,np,!1,!1),np.stateNode=_d;e:{switch(up=vb(rp,ap),rp){case"dialog":D$1("cancel",_d),D$1("close",_d),sp=ap;break;case"iframe":case"object":case"embed":D$1("load",_d),sp=ap;break;case"video":case"audio":for(sp=0;sp<lf$1.length;sp++)D$1(lf$1[sp],_d);sp=ap;break;case"source":D$1("error",_d),sp=ap;break;case"img":case"image":case"link":D$1("error",_d),D$1("load",_d),sp=ap;break;case"details":D$1("toggle",_d),sp=ap;break;case"input":Za$1(_d,ap),sp=Ya$1(_d,ap),D$1("invalid",_d);break;case"option":sp=ap;break;case"select":_d._wrapperState={wasMultiple:!!ap.multiple},sp=A$1({},ap,{value:void 0}),D$1("invalid",_d);break;case"textarea":hb(_d,ap),sp=gb(_d,ap),D$1("invalid",_d);break;default:sp=ap}ub(rp,sp),cp=sp;for(lp in cp)if(cp.hasOwnProperty(lp)){var dp=cp[lp];lp==="style"?sb(_d,dp):lp==="dangerouslySetInnerHTML"?(dp=dp?dp.__html:void 0,dp!=null&&nb(_d,dp)):lp==="children"?typeof dp=="string"?(rp!=="textarea"||dp!=="")&&ob(_d,dp):typeof dp=="number"&&ob(_d,""+dp):lp!=="suppressContentEditableWarning"&&lp!=="suppressHydrationWarning"&&lp!=="autoFocus"&&(ea$1.hasOwnProperty(lp)?dp!=null&&lp==="onScroll"&&D$1("scroll",_d):dp!=null&&ta$1(_d,lp,dp,up))}switch(rp){case"input":Va$1(_d),db(_d,ap,!1);break;case"textarea":Va$1(_d),jb(_d);break;case"option":ap.value!=null&&_d.setAttribute("value",""+Sa$1(ap.value));break;case"select":_d.multiple=!!ap.multiple,lp=ap.value,lp!=null?fb(_d,!!ap.multiple,lp,!1):ap.defaultValue!=null&&fb(_d,!!ap.multiple,ap.defaultValue,!0);break;default:typeof sp.onClick=="function"&&(_d.onclick=Bf$1)}switch(rp){case"button":case"input":case"select":case"textarea":ap=!!ap.autoFocus;break e;case"img":ap=!0;break e;default:ap=!1}}ap&&(np.flags|=4)}np.ref!==null&&(np.flags|=512,np.flags|=2097152)}return S$1(np),null;case 6:if(_d&&np.stateNode!=null)Dj(_d,np,_d.memoizedProps,ap);else{if(typeof ap!="string"&&np.stateNode===null)throw Error(p$1(166));if(rp=Hh$1(Gh$1.current),Hh$1(Eh$1.current),Gg(np)){if(ap=np.stateNode,rp=np.memoizedProps,ap[Of$1]=np,(lp=ap.nodeValue!==rp)&&(_d=xg,_d!==null))switch(_d.tag){case 3:Af$1(ap.nodeValue,rp,(_d.mode&1)!==0);break;case 5:_d.memoizedProps.suppressHydrationWarning!==!0&&Af$1(ap.nodeValue,rp,(_d.mode&1)!==0)}lp&&(np.flags|=4)}else ap=(rp.nodeType===9?rp:rp.ownerDocument).createTextNode(ap),ap[Of$1]=np,np.stateNode=ap}return S$1(np),null;case 13:if(E$1(M$1),ap=np.memoizedState,_d===null||_d.memoizedState!==null&&_d.memoizedState.dehydrated!==null){if(I$1&&yg!==null&&np.mode&1&&!(np.flags&128))Hg(),Ig(),np.flags|=98560,lp=!1;else if(lp=Gg(np),ap!==null&&ap.dehydrated!==null){if(_d===null){if(!lp)throw Error(p$1(318));if(lp=np.memoizedState,lp=lp!==null?lp.dehydrated:null,!lp)throw Error(p$1(317));lp[Of$1]=np}else Ig(),!(np.flags&128)&&(np.memoizedState=null),np.flags|=4;S$1(np),lp=!1}else zg!==null&&(Gj(zg),zg=null),lp=!0;if(!lp)return np.flags&65536?np:null}return np.flags&128?(np.lanes=rp,np):(ap=ap!==null,ap!==(_d!==null&&_d.memoizedState!==null)&&ap&&(np.child.flags|=8192,np.mode&1&&(_d===null||M$1.current&1?T$1===0&&(T$1=3):uj())),np.updateQueue!==null&&(np.flags|=4),S$1(np),null);case 4:return Jh$1(),Bj(_d,np),_d===null&&sf$1(np.stateNode.containerInfo),S$1(np),null;case 10:return Rg(np.type._context),S$1(np),null;case 17:return Zf$1(np.type)&&$f$1(),S$1(np),null;case 19:if(E$1(M$1),lp=np.memoizedState,lp===null)return S$1(np),null;if(ap=(np.flags&128)!==0,up=lp.rendering,up===null)if(ap)Ej(lp,!1);else{if(T$1!==0||_d!==null&&_d.flags&128)for(_d=np.child;_d!==null;){if(up=Mh$1(_d),up!==null){for(np.flags|=128,Ej(lp,!1),ap=up.updateQueue,ap!==null&&(np.updateQueue=ap,np.flags|=4),np.subtreeFlags=0,ap=rp,rp=np.child;rp!==null;)lp=rp,_d=ap,lp.flags&=14680066,up=lp.alternate,up===null?(lp.childLanes=0,lp.lanes=_d,lp.child=null,lp.subtreeFlags=0,lp.memoizedProps=null,lp.memoizedState=null,lp.updateQueue=null,lp.dependencies=null,lp.stateNode=null):(lp.childLanes=up.childLanes,lp.lanes=up.lanes,lp.child=up.child,lp.subtreeFlags=0,lp.deletions=null,lp.memoizedProps=up.memoizedProps,lp.memoizedState=up.memoizedState,lp.updateQueue=up.updateQueue,lp.type=up.type,_d=up.dependencies,lp.dependencies=_d===null?null:{lanes:_d.lanes,firstContext:_d.firstContext}),rp=rp.sibling;return G$1(M$1,M$1.current&1|2),np.child}_d=_d.sibling}lp.tail!==null&&B$1()>Hj&&(np.flags|=128,ap=!0,Ej(lp,!1),np.lanes=4194304)}else{if(!ap)if(_d=Mh$1(up),_d!==null){if(np.flags|=128,ap=!0,rp=_d.updateQueue,rp!==null&&(np.updateQueue=rp,np.flags|=4),Ej(lp,!0),lp.tail===null&&lp.tailMode==="hidden"&&!up.alternate&&!I$1)return S$1(np),null}else 2*B$1()-lp.renderingStartTime>Hj&&rp!==1073741824&&(np.flags|=128,ap=!0,Ej(lp,!1),np.lanes=4194304);lp.isBackwards?(up.sibling=np.child,np.child=up):(rp=lp.last,rp!==null?rp.sibling=up:np.child=up,lp.last=up)}return lp.tail!==null?(np=lp.tail,lp.rendering=np,lp.tail=np.sibling,lp.renderingStartTime=B$1(),np.sibling=null,rp=M$1.current,G$1(M$1,ap?rp&1|2:rp&1),np):(S$1(np),null);case 22:case 23:return Ij(),ap=np.memoizedState!==null,_d!==null&&_d.memoizedState!==null!==ap&&(np.flags|=8192),ap&&np.mode&1?gj&1073741824&&(S$1(np),np.subtreeFlags&6&&(np.flags|=8192)):S$1(np),null;case 24:return null;case 25:return null}throw Error(p$1(156,np.tag))}function Jj(_d,np){switch(wg(np),np.tag){case 1:return Zf$1(np.type)&&$f$1(),_d=np.flags,_d&65536?(np.flags=_d&-65537|128,np):null;case 3:return Jh$1(),E$1(Wf$1),E$1(H$1),Oh$1(),_d=np.flags,_d&65536&&!(_d&128)?(np.flags=_d&-65537|128,np):null;case 5:return Lh$1(np),null;case 13:if(E$1(M$1),_d=np.memoizedState,_d!==null&&_d.dehydrated!==null){if(np.alternate===null)throw Error(p$1(340));Ig()}return _d=np.flags,_d&65536?(np.flags=_d&-65537|128,np):null;case 19:return E$1(M$1),null;case 4:return Jh$1(),null;case 10:return Rg(np.type._context),null;case 22:case 23:return Ij(),null;case 24:return null;default:return null}}var Kj=!1,U$1=!1,Lj=typeof WeakSet=="function"?WeakSet:Set,V$1=null;function Mj(_d,np){var rp=_d.ref;if(rp!==null)if(typeof rp=="function")try{rp(null)}catch(ap){W$1(_d,np,ap)}else rp.current=null}function Nj(_d,np,rp){try{rp()}catch(ap){W$1(_d,np,ap)}}var Oj=!1;function Pj(_d,np){if(Cf$1=dd,_d=Me$1(),Ne$1(_d)){if("selectionStart"in _d)var rp={start:_d.selectionStart,end:_d.selectionEnd};else e:{rp=(rp=_d.ownerDocument)&&rp.defaultView||window;var ap=rp.getSelection&&rp.getSelection();if(ap&&ap.rangeCount!==0){rp=ap.anchorNode;var sp=ap.anchorOffset,lp=ap.focusNode;ap=ap.focusOffset;try{rp.nodeType,lp.nodeType}catch{rp=null;break e}var up=0,cp=-1,dp=-1,fp=0,pp=0,hp=_d,mp=null;t:for(;;){for(var gp;hp!==rp||sp!==0&&hp.nodeType!==3||(cp=up+sp),hp!==lp||ap!==0&&hp.nodeType!==3||(dp=up+ap),hp.nodeType===3&&(up+=hp.nodeValue.length),(gp=hp.firstChild)!==null;)mp=hp,hp=gp;for(;;){if(hp===_d)break t;if(mp===rp&&++fp===sp&&(cp=up),mp===lp&&++pp===ap&&(dp=up),(gp=hp.nextSibling)!==null)break;hp=mp,mp=hp.parentNode}hp=gp}rp=cp===-1||dp===-1?null:{start:cp,end:dp}}else rp=null}rp=rp||{start:0,end:0}}else rp=null;for(Df$1={focusedElem:_d,selectionRange:rp},dd=!1,V$1=np;V$1!==null;)if(np=V$1,_d=np.child,(np.subtreeFlags&1028)!==0&&_d!==null)_d.return=np,V$1=_d;else for(;V$1!==null;){np=V$1;try{var vp=np.alternate;if(np.flags&1024)switch(np.tag){case 0:case 11:case 15:break;case 1:if(vp!==null){var xp=vp.memoizedProps,Sp=vp.memoizedState,yp=np.stateNode,bp=yp.getSnapshotBeforeUpdate(np.elementType===np.type?xp:Lg(np.type,xp),Sp);yp.__reactInternalSnapshotBeforeUpdate=bp}break;case 3:var Ep=np.stateNode.containerInfo;Ep.nodeType===1?Ep.textContent="":Ep.nodeType===9&&Ep.documentElement&&Ep.removeChild(Ep.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$1(163))}}catch(wp){W$1(np,np.return,wp)}if(_d=np.sibling,_d!==null){_d.return=np.return,V$1=_d;break}V$1=np.return}return vp=Oj,Oj=!1,vp}function Qj(_d,np,rp){var ap=np.updateQueue;if(ap=ap!==null?ap.lastEffect:null,ap!==null){var sp=ap=ap.next;do{if((sp.tag&_d)===_d){var lp=sp.destroy;sp.destroy=void 0,lp!==void 0&&Nj(np,rp,lp)}sp=sp.next}while(sp!==ap)}}function Rj(_d,np){if(np=np.updateQueue,np=np!==null?np.lastEffect:null,np!==null){var rp=np=np.next;do{if((rp.tag&_d)===_d){var ap=rp.create;rp.destroy=ap()}rp=rp.next}while(rp!==np)}}function Sj(_d){var np=_d.ref;if(np!==null){var rp=_d.stateNode;switch(_d.tag){case 5:_d=rp;break;default:_d=rp}typeof np=="function"?np(_d):np.current=_d}}function Tj(_d){var np=_d.alternate;np!==null&&(_d.alternate=null,Tj(np)),_d.child=null,_d.deletions=null,_d.sibling=null,_d.tag===5&&(np=_d.stateNode,np!==null&&(delete np[Of$1],delete np[Pf$1],delete np[of$1],delete np[Qf$1],delete np[Rf$1])),_d.stateNode=null,_d.return=null,_d.dependencies=null,_d.memoizedProps=null,_d.memoizedState=null,_d.pendingProps=null,_d.stateNode=null,_d.updateQueue=null}function Uj(_d){return _d.tag===5||_d.tag===3||_d.tag===4}function Vj(_d){e:for(;;){for(;_d.sibling===null;){if(_d.return===null||Uj(_d.return))return null;_d=_d.return}for(_d.sibling.return=_d.return,_d=_d.sibling;_d.tag!==5&&_d.tag!==6&&_d.tag!==18;){if(_d.flags&2||_d.child===null||_d.tag===4)continue e;_d.child.return=_d,_d=_d.child}if(!(_d.flags&2))return _d.stateNode}}function Wj(_d,np,rp){var ap=_d.tag;if(ap===5||ap===6)_d=_d.stateNode,np?rp.nodeType===8?rp.parentNode.insertBefore(_d,np):rp.insertBefore(_d,np):(rp.nodeType===8?(np=rp.parentNode,np.insertBefore(_d,rp)):(np=rp,np.appendChild(_d)),rp=rp._reactRootContainer,rp!=null||np.onclick!==null||(np.onclick=Bf$1));else if(ap!==4&&(_d=_d.child,_d!==null))for(Wj(_d,np,rp),_d=_d.sibling;_d!==null;)Wj(_d,np,rp),_d=_d.sibling}function Xj(_d,np,rp){var ap=_d.tag;if(ap===5||ap===6)_d=_d.stateNode,np?rp.insertBefore(_d,np):rp.appendChild(_d);else if(ap!==4&&(_d=_d.child,_d!==null))for(Xj(_d,np,rp),_d=_d.sibling;_d!==null;)Xj(_d,np,rp),_d=_d.sibling}var X$1=null,Yj=!1;function Zj(_d,np,rp){for(rp=rp.child;rp!==null;)ak(_d,np,rp),rp=rp.sibling}function ak(_d,np,rp){if(lc$1&&typeof lc$1.onCommitFiberUnmount=="function")try{lc$1.onCommitFiberUnmount(kc$1,rp)}catch{}switch(rp.tag){case 5:U$1||Mj(rp,np);case 6:var ap=X$1,sp=Yj;X$1=null,Zj(_d,np,rp),X$1=ap,Yj=sp,X$1!==null&&(Yj?(_d=X$1,rp=rp.stateNode,_d.nodeType===8?_d.parentNode.removeChild(rp):_d.removeChild(rp)):X$1.removeChild(rp.stateNode));break;case 18:X$1!==null&&(Yj?(_d=X$1,rp=rp.stateNode,_d.nodeType===8?Kf$1(_d.parentNode,rp):_d.nodeType===1&&Kf$1(_d,rp),bd(_d)):Kf$1(X$1,rp.stateNode));break;case 4:ap=X$1,sp=Yj,X$1=rp.stateNode.containerInfo,Yj=!0,Zj(_d,np,rp),X$1=ap,Yj=sp;break;case 0:case 11:case 14:case 15:if(!U$1&&(ap=rp.updateQueue,ap!==null&&(ap=ap.lastEffect,ap!==null))){sp=ap=ap.next;do{var lp=sp,up=lp.destroy;lp=lp.tag,up!==void 0&&(lp&2||lp&4)&&Nj(rp,np,up),sp=sp.next}while(sp!==ap)}Zj(_d,np,rp);break;case 1:if(!U$1&&(Mj(rp,np),ap=rp.stateNode,typeof ap.componentWillUnmount=="function"))try{ap.props=rp.memoizedProps,ap.state=rp.memoizedState,ap.componentWillUnmount()}catch(cp){W$1(rp,np,cp)}Zj(_d,np,rp);break;case 21:Zj(_d,np,rp);break;case 22:rp.mode&1?(U$1=(ap=U$1)||rp.memoizedState!==null,Zj(_d,np,rp),U$1=ap):Zj(_d,np,rp);break;default:Zj(_d,np,rp)}}function bk(_d){var np=_d.updateQueue;if(np!==null){_d.updateQueue=null;var rp=_d.stateNode;rp===null&&(rp=_d.stateNode=new Lj),np.forEach(function(ap){var sp=ck.bind(null,_d,ap);rp.has(ap)||(rp.add(ap),ap.then(sp,sp))})}}function dk(_d,np){var rp=np.deletions;if(rp!==null)for(var ap=0;ap<rp.length;ap++){var sp=rp[ap];try{var lp=_d,up=np,cp=up;e:for(;cp!==null;){switch(cp.tag){case 5:X$1=cp.stateNode,Yj=!1;break e;case 3:X$1=cp.stateNode.containerInfo,Yj=!0;break e;case 4:X$1=cp.stateNode.containerInfo,Yj=!0;break e}cp=cp.return}if(X$1===null)throw Error(p$1(160));ak(lp,up,sp),X$1=null,Yj=!1;var dp=sp.alternate;dp!==null&&(dp.return=null),sp.return=null}catch(fp){W$1(sp,np,fp)}}if(np.subtreeFlags&12854)for(np=np.child;np!==null;)ek(np,_d),np=np.sibling}function ek(_d,np){var rp=_d.alternate,ap=_d.flags;switch(_d.tag){case 0:case 11:case 14:case 15:if(dk(np,_d),fk(_d),ap&4){try{Qj(3,_d,_d.return),Rj(3,_d)}catch(xp){W$1(_d,_d.return,xp)}try{Qj(5,_d,_d.return)}catch(xp){W$1(_d,_d.return,xp)}}break;case 1:dk(np,_d),fk(_d),ap&512&&rp!==null&&Mj(rp,rp.return);break;case 5:if(dk(np,_d),fk(_d),ap&512&&rp!==null&&Mj(rp,rp.return),_d.flags&32){var sp=_d.stateNode;try{ob(sp,"")}catch(xp){W$1(_d,_d.return,xp)}}if(ap&4&&(sp=_d.stateNode,sp!=null)){var lp=_d.memoizedProps,up=rp!==null?rp.memoizedProps:lp,cp=_d.type,dp=_d.updateQueue;if(_d.updateQueue=null,dp!==null)try{cp==="input"&&lp.type==="radio"&&lp.name!=null&&ab(sp,lp),vb(cp,up);var fp=vb(cp,lp);for(up=0;up<dp.length;up+=2){var pp=dp[up],hp=dp[up+1];pp==="style"?sb(sp,hp):pp==="dangerouslySetInnerHTML"?nb(sp,hp):pp==="children"?ob(sp,hp):ta$1(sp,pp,hp,fp)}switch(cp){case"input":bb(sp,lp);break;case"textarea":ib(sp,lp);break;case"select":var mp=sp._wrapperState.wasMultiple;sp._wrapperState.wasMultiple=!!lp.multiple;var gp=lp.value;gp!=null?fb(sp,!!lp.multiple,gp,!1):mp!==!!lp.multiple&&(lp.defaultValue!=null?fb(sp,!!lp.multiple,lp.defaultValue,!0):fb(sp,!!lp.multiple,lp.multiple?[]:"",!1))}sp[Pf$1]=lp}catch(xp){W$1(_d,_d.return,xp)}}break;case 6:if(dk(np,_d),fk(_d),ap&4){if(_d.stateNode===null)throw Error(p$1(162));sp=_d.stateNode,lp=_d.memoizedProps;try{sp.nodeValue=lp}catch(xp){W$1(_d,_d.return,xp)}}break;case 3:if(dk(np,_d),fk(_d),ap&4&&rp!==null&&rp.memoizedState.isDehydrated)try{bd(np.containerInfo)}catch(xp){W$1(_d,_d.return,xp)}break;case 4:dk(np,_d),fk(_d);break;case 13:dk(np,_d),fk(_d),sp=_d.child,sp.flags&8192&&(lp=sp.memoizedState!==null,sp.stateNode.isHidden=lp,!lp||sp.alternate!==null&&sp.alternate.memoizedState!==null||(gk=B$1())),ap&4&&bk(_d);break;case 22:if(pp=rp!==null&&rp.memoizedState!==null,_d.mode&1?(U$1=(fp=U$1)||pp,dk(np,_d),U$1=fp):dk(np,_d),fk(_d),ap&8192){if(fp=_d.memoizedState!==null,(_d.stateNode.isHidden=fp)&&!pp&&_d.mode&1)for(V$1=_d,pp=_d.child;pp!==null;){for(hp=V$1=pp;V$1!==null;){switch(mp=V$1,gp=mp.child,mp.tag){case 0:case 11:case 14:case 15:Qj(4,mp,mp.return);break;case 1:Mj(mp,mp.return);var vp=mp.stateNode;if(typeof vp.componentWillUnmount=="function"){ap=mp,rp=mp.return;try{np=ap,vp.props=np.memoizedProps,vp.state=np.memoizedState,vp.componentWillUnmount()}catch(xp){W$1(ap,rp,xp)}}break;case 5:Mj(mp,mp.return);break;case 22:if(mp.memoizedState!==null){hk(hp);continue}}gp!==null?(gp.return=mp,V$1=gp):hk(hp)}pp=pp.sibling}e:for(pp=null,hp=_d;;){if(hp.tag===5){if(pp===null){pp=hp;try{sp=hp.stateNode,fp?(lp=sp.style,typeof lp.setProperty=="function"?lp.setProperty("display","none","important"):lp.display="none"):(cp=hp.stateNode,dp=hp.memoizedProps.style,up=dp!=null&&dp.hasOwnProperty("display")?dp.display:null,cp.style.display=rb("display",up))}catch(xp){W$1(_d,_d.return,xp)}}}else if(hp.tag===6){if(pp===null)try{hp.stateNode.nodeValue=fp?"":hp.memoizedProps}catch(xp){W$1(_d,_d.return,xp)}}else if((hp.tag!==22&&hp.tag!==23||hp.memoizedState===null||hp===_d)&&hp.child!==null){hp.child.return=hp,hp=hp.child;continue}if(hp===_d)break e;for(;hp.sibling===null;){if(hp.return===null||hp.return===_d)break e;pp===hp&&(pp=null),hp=hp.return}pp===hp&&(pp=null),hp.sibling.return=hp.return,hp=hp.sibling}}break;case 19:dk(np,_d),fk(_d),ap&4&&bk(_d);break;case 21:break;default:dk(np,_d),fk(_d)}}function fk(_d){var np=_d.flags;if(np&2){try{e:{for(var rp=_d.return;rp!==null;){if(Uj(rp)){var ap=rp;break e}rp=rp.return}throw Error(p$1(160))}switch(ap.tag){case 5:var sp=ap.stateNode;ap.flags&32&&(ob(sp,""),ap.flags&=-33);var lp=Vj(_d);Xj(_d,lp,sp);break;case 3:case 4:var up=ap.stateNode.containerInfo,cp=Vj(_d);Wj(_d,cp,up);break;default:throw Error(p$1(161))}}catch(dp){W$1(_d,_d.return,dp)}_d.flags&=-3}np&4096&&(_d.flags&=-4097)}function ik(_d,np,rp){V$1=_d,jk(_d)}function jk(_d,np,rp){for(var ap=(_d.mode&1)!==0;V$1!==null;){var sp=V$1,lp=sp.child;if(sp.tag===22&&ap){var up=sp.memoizedState!==null||Kj;if(!up){var cp=sp.alternate,dp=cp!==null&&cp.memoizedState!==null||U$1;cp=Kj;var fp=U$1;if(Kj=up,(U$1=dp)&&!fp)for(V$1=sp;V$1!==null;)up=V$1,dp=up.child,up.tag===22&&up.memoizedState!==null?kk(sp):dp!==null?(dp.return=up,V$1=dp):kk(sp);for(;lp!==null;)V$1=lp,jk(lp),lp=lp.sibling;V$1=sp,Kj=cp,U$1=fp}lk(_d)}else sp.subtreeFlags&8772&&lp!==null?(lp.return=sp,V$1=lp):lk(_d)}}function lk(_d){for(;V$1!==null;){var np=V$1;if(np.flags&8772){var rp=np.alternate;try{if(np.flags&8772)switch(np.tag){case 0:case 11:case 15:U$1||Rj(5,np);break;case 1:var ap=np.stateNode;if(np.flags&4&&!U$1)if(rp===null)ap.componentDidMount();else{var sp=np.elementType===np.type?rp.memoizedProps:Lg(np.type,rp.memoizedProps);ap.componentDidUpdate(sp,rp.memoizedState,ap.__reactInternalSnapshotBeforeUpdate)}var lp=np.updateQueue;lp!==null&&ih$1(np,lp,ap);break;case 3:var up=np.updateQueue;if(up!==null){if(rp=null,np.child!==null)switch(np.child.tag){case 5:rp=np.child.stateNode;break;case 1:rp=np.child.stateNode}ih$1(np,up,rp)}break;case 5:var cp=np.stateNode;if(rp===null&&np.flags&4){rp=cp;var dp=np.memoizedProps;switch(np.type){case"button":case"input":case"select":case"textarea":dp.autoFocus&&rp.focus();break;case"img":dp.src&&(rp.src=dp.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(np.memoizedState===null){var fp=np.alternate;if(fp!==null){var pp=fp.memoizedState;if(pp!==null){var hp=pp.dehydrated;hp!==null&&bd(hp)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$1(163))}U$1||np.flags&512&&Sj(np)}catch(mp){W$1(np,np.return,mp)}}if(np===_d){V$1=null;break}if(rp=np.sibling,rp!==null){rp.return=np.return,V$1=rp;break}V$1=np.return}}function hk(_d){for(;V$1!==null;){var np=V$1;if(np===_d){V$1=null;break}var rp=np.sibling;if(rp!==null){rp.return=np.return,V$1=rp;break}V$1=np.return}}function kk(_d){for(;V$1!==null;){var np=V$1;try{switch(np.tag){case 0:case 11:case 15:var rp=np.return;try{Rj(4,np)}catch(dp){W$1(np,rp,dp)}break;case 1:var ap=np.stateNode;if(typeof ap.componentDidMount=="function"){var sp=np.return;try{ap.componentDidMount()}catch(dp){W$1(np,sp,dp)}}var lp=np.return;try{Sj(np)}catch(dp){W$1(np,lp,dp)}break;case 5:var up=np.return;try{Sj(np)}catch(dp){W$1(np,up,dp)}}}catch(dp){W$1(np,np.return,dp)}if(np===_d){V$1=null;break}var cp=np.sibling;if(cp!==null){cp.return=np.return,V$1=cp;break}V$1=np.return}}var mk=Math.ceil,nk=ua$1.ReactCurrentDispatcher,ok=ua$1.ReactCurrentOwner,pk=ua$1.ReactCurrentBatchConfig,K$1=0,R$2=null,Y$1=null,Z$1=0,gj=0,fj=Uf$1(0),T$1=0,qk=null,hh$1=0,rk=0,sk=0,tk=null,uk=null,gk=0,Hj=1/0,vk=null,Pi$1=!1,Qi$1=null,Si$1=null,wk=!1,xk=null,yk=0,zk=0,Ak=null,Bk=-1,Ck=0;function L$1(){return K$1&6?B$1():Bk!==-1?Bk:Bk=B$1()}function lh$1(_d){return _d.mode&1?K$1&2&&Z$1!==0?Z$1&-Z$1:Kg.transition!==null?(Ck===0&&(Ck=yc$1()),Ck):(_d=C$1,_d!==0||(_d=window.event,_d=_d===void 0?16:jd(_d.type)),_d):1}function mh$1(_d,np,rp,ap){if(50<zk)throw zk=0,Ak=null,Error(p$1(185));Ac$1(_d,rp,ap),(!(K$1&2)||_d!==R$2)&&(_d===R$2&&(!(K$1&2)&&(rk|=rp),T$1===4&&Dk(_d,Z$1)),Ek(_d,ap),rp===1&&K$1===0&&!(np.mode&1)&&(Hj=B$1()+500,fg&&jg()))}function Ek(_d,np){var rp=_d.callbackNode;wc$1(_d,np);var ap=uc$1(_d,_d===R$2?Z$1:0);if(ap===0)rp!==null&&bc$1(rp),_d.callbackNode=null,_d.callbackPriority=0;else if(np=ap&-ap,_d.callbackPriority!==np){if(rp!=null&&bc$1(rp),np===1)_d.tag===0?ig(Fk.bind(null,_d)):hg(Fk.bind(null,_d)),Jf$1(function(){!(K$1&6)&&jg()}),rp=null;else{switch(Dc$1(ap)){case 1:rp=fc$1;break;case 4:rp=gc$1;break;case 16:rp=hc$1;break;case 536870912:rp=jc$1;break;default:rp=hc$1}rp=Gk(rp,Hk.bind(null,_d))}_d.callbackPriority=np,_d.callbackNode=rp}}function Hk(_d,np){if(Bk=-1,Ck=0,K$1&6)throw Error(p$1(327));var rp=_d.callbackNode;if(Ik()&&_d.callbackNode!==rp)return null;var ap=uc$1(_d,_d===R$2?Z$1:0);if(ap===0)return null;if(ap&30||ap&_d.expiredLanes||np)np=Jk(_d,ap);else{np=ap;var sp=K$1;K$1|=2;var lp=Kk();(R$2!==_d||Z$1!==np)&&(vk=null,Hj=B$1()+500,Lk(_d,np));do try{Mk();break}catch(cp){Nk(_d,cp)}while(!0);Qg(),nk.current=lp,K$1=sp,Y$1!==null?np=0:(R$2=null,Z$1=0,np=T$1)}if(np!==0){if(np===2&&(sp=xc$1(_d),sp!==0&&(ap=sp,np=Ok(_d,sp))),np===1)throw rp=qk,Lk(_d,0),Dk(_d,ap),Ek(_d,B$1()),rp;if(np===6)Dk(_d,ap);else{if(sp=_d.current.alternate,!(ap&30)&&!Pk(sp)&&(np=Jk(_d,ap),np===2&&(lp=xc$1(_d),lp!==0&&(ap=lp,np=Ok(_d,lp))),np===1))throw rp=qk,Lk(_d,0),Dk(_d,ap),Ek(_d,B$1()),rp;switch(_d.finishedWork=sp,_d.finishedLanes=ap,np){case 0:case 1:throw Error(p$1(345));case 2:Qk(_d,uk,vk);break;case 3:if(Dk(_d,ap),(ap&130023424)===ap&&(np=gk+500-B$1(),10<np)){if(uc$1(_d,0)!==0)break;if(sp=_d.suspendedLanes,(sp&ap)!==ap){L$1(),_d.pingedLanes|=_d.suspendedLanes&sp;break}_d.timeoutHandle=Ff$1(Qk.bind(null,_d,uk,vk),np);break}Qk(_d,uk,vk);break;case 4:if(Dk(_d,ap),(ap&4194240)===ap)break;for(np=_d.eventTimes,sp=-1;0<ap;){var up=31-oc$1(ap);lp=1<<up,up=np[up],up>sp&&(sp=up),ap&=~lp}if(ap=sp,ap=B$1()-ap,ap=(120>ap?120:480>ap?480:1080>ap?1080:1920>ap?1920:3e3>ap?3e3:4320>ap?4320:1960*mk(ap/1960))-ap,10<ap){_d.timeoutHandle=Ff$1(Qk.bind(null,_d,uk,vk),ap);break}Qk(_d,uk,vk);break;case 5:Qk(_d,uk,vk);break;default:throw Error(p$1(329))}}}return Ek(_d,B$1()),_d.callbackNode===rp?Hk.bind(null,_d):null}function Ok(_d,np){var rp=tk;return _d.current.memoizedState.isDehydrated&&(Lk(_d,np).flags|=256),_d=Jk(_d,np),_d!==2&&(np=uk,uk=rp,np!==null&&Gj(np)),_d}function Gj(_d){uk===null?uk=_d:uk.push.apply(uk,_d)}function Pk(_d){for(var np=_d;;){if(np.flags&16384){var rp=np.updateQueue;if(rp!==null&&(rp=rp.stores,rp!==null))for(var ap=0;ap<rp.length;ap++){var sp=rp[ap],lp=sp.getSnapshot;sp=sp.value;try{if(!He$1(lp(),sp))return!1}catch{return!1}}}if(rp=np.child,np.subtreeFlags&16384&&rp!==null)rp.return=np,np=rp;else{if(np===_d)break;for(;np.sibling===null;){if(np.return===null||np.return===_d)return!0;np=np.return}np.sibling.return=np.return,np=np.sibling}}return!0}function Dk(_d,np){for(np&=~sk,np&=~rk,_d.suspendedLanes|=np,_d.pingedLanes&=~np,_d=_d.expirationTimes;0<np;){var rp=31-oc$1(np),ap=1<<rp;_d[rp]=-1,np&=~ap}}function Fk(_d){if(K$1&6)throw Error(p$1(327));Ik();var np=uc$1(_d,0);if(!(np&1))return Ek(_d,B$1()),null;var rp=Jk(_d,np);if(_d.tag!==0&&rp===2){var ap=xc$1(_d);ap!==0&&(np=ap,rp=Ok(_d,ap))}if(rp===1)throw rp=qk,Lk(_d,0),Dk(_d,np),Ek(_d,B$1()),rp;if(rp===6)throw Error(p$1(345));return _d.finishedWork=_d.current.alternate,_d.finishedLanes=np,Qk(_d,uk,vk),Ek(_d,B$1()),null}function Rk(_d,np){var rp=K$1;K$1|=1;try{return _d(np)}finally{K$1=rp,K$1===0&&(Hj=B$1()+500,fg&&jg())}}function Sk(_d){xk!==null&&xk.tag===0&&!(K$1&6)&&Ik();var np=K$1;K$1|=1;var rp=pk.transition,ap=C$1;try{if(pk.transition=null,C$1=1,_d)return _d()}finally{C$1=ap,pk.transition=rp,K$1=np,!(K$1&6)&&jg()}}function Ij(){gj=fj.current,E$1(fj)}function Lk(_d,np){_d.finishedWork=null,_d.finishedLanes=0;var rp=_d.timeoutHandle;if(rp!==-1&&(_d.timeoutHandle=-1,Gf$1(rp)),Y$1!==null)for(rp=Y$1.return;rp!==null;){var ap=rp;switch(wg(ap),ap.tag){case 1:ap=ap.type.childContextTypes,ap!=null&&$f$1();break;case 3:Jh$1(),E$1(Wf$1),E$1(H$1),Oh$1();break;case 5:Lh$1(ap);break;case 4:Jh$1();break;case 13:E$1(M$1);break;case 19:E$1(M$1);break;case 10:Rg(ap.type._context);break;case 22:case 23:Ij()}rp=rp.return}if(R$2=_d,Y$1=_d=wh$1(_d.current,null),Z$1=gj=np,T$1=0,qk=null,sk=rk=hh$1=0,uk=tk=null,Wg!==null){for(np=0;np<Wg.length;np++)if(rp=Wg[np],ap=rp.interleaved,ap!==null){rp.interleaved=null;var sp=ap.next,lp=rp.pending;if(lp!==null){var up=lp.next;lp.next=sp,ap.next=up}rp.pending=ap}Wg=null}return _d}function Nk(_d,np){do{var rp=Y$1;try{if(Qg(),Ph$1.current=ai$1,Sh$1){for(var ap=N$1.memoizedState;ap!==null;){var sp=ap.queue;sp!==null&&(sp.pending=null),ap=ap.next}Sh$1=!1}if(Rh$1=0,P$1=O$1=N$1=null,Th$1=!1,Uh$1=0,ok.current=null,rp===null||rp.return===null){T$1=1,qk=np,Y$1=null;break}e:{var lp=_d,up=rp.return,cp=rp,dp=np;if(np=Z$1,cp.flags|=32768,dp!==null&&typeof dp=="object"&&typeof dp.then=="function"){var fp=dp,pp=cp,hp=pp.tag;if(!(pp.mode&1)&&(hp===0||hp===11||hp===15)){var mp=pp.alternate;mp?(pp.updateQueue=mp.updateQueue,pp.memoizedState=mp.memoizedState,pp.lanes=mp.lanes):(pp.updateQueue=null,pp.memoizedState=null)}var gp=Vi$1(up);if(gp!==null){gp.flags&=-257,Wi$1(gp,up,cp,lp,np),gp.mode&1&&Ti$1(lp,fp,np),np=gp,dp=fp;var vp=np.updateQueue;if(vp===null){var xp=new Set;xp.add(dp),np.updateQueue=xp}else vp.add(dp);break e}else{if(!(np&1)){Ti$1(lp,fp,np),uj();break e}dp=Error(p$1(426))}}else if(I$1&&cp.mode&1){var Sp=Vi$1(up);if(Sp!==null){!(Sp.flags&65536)&&(Sp.flags|=256),Wi$1(Sp,up,cp,lp,np),Jg(Ki$1(dp,cp));break e}}lp=dp=Ki$1(dp,cp),T$1!==4&&(T$1=2),tk===null?tk=[lp]:tk.push(lp),lp=up;do{switch(lp.tag){case 3:lp.flags|=65536,np&=-np,lp.lanes|=np;var yp=Oi$1(lp,dp,np);fh$1(lp,yp);break e;case 1:cp=dp;var bp=lp.type,Ep=lp.stateNode;if(!(lp.flags&128)&&(typeof bp.getDerivedStateFromError=="function"||Ep!==null&&typeof Ep.componentDidCatch=="function"&&(Si$1===null||!Si$1.has(Ep)))){lp.flags|=65536,np&=-np,lp.lanes|=np;var wp=Ri$1(lp,cp,np);fh$1(lp,wp);break e}}lp=lp.return}while(lp!==null)}Tk(rp)}catch(_p){np=_p,Y$1===rp&&rp!==null&&(Y$1=rp=rp.return);continue}break}while(!0)}function Kk(){var _d=nk.current;return nk.current=ai$1,_d===null?ai$1:_d}function uj(){(T$1===0||T$1===3||T$1===2)&&(T$1=4),R$2===null||!(hh$1&268435455)&&!(rk&268435455)||Dk(R$2,Z$1)}function Jk(_d,np){var rp=K$1;K$1|=2;var ap=Kk();(R$2!==_d||Z$1!==np)&&(vk=null,Lk(_d,np));do try{Uk();break}catch(sp){Nk(_d,sp)}while(!0);if(Qg(),K$1=rp,nk.current=ap,Y$1!==null)throw Error(p$1(261));return R$2=null,Z$1=0,T$1}function Uk(){for(;Y$1!==null;)Vk(Y$1)}function Mk(){for(;Y$1!==null&&!cc$1();)Vk(Y$1)}function Vk(_d){var np=Wk(_d.alternate,_d,gj);_d.memoizedProps=_d.pendingProps,np===null?Tk(_d):Y$1=np,ok.current=null}function Tk(_d){var np=_d;do{var rp=np.alternate;if(_d=np.return,np.flags&32768){if(rp=Jj(rp,np),rp!==null){rp.flags&=32767,Y$1=rp;return}if(_d!==null)_d.flags|=32768,_d.subtreeFlags=0,_d.deletions=null;else{T$1=6,Y$1=null;return}}else if(rp=Fj(rp,np,gj),rp!==null){Y$1=rp;return}if(np=np.sibling,np!==null){Y$1=np;return}Y$1=np=_d}while(np!==null);T$1===0&&(T$1=5)}function Qk(_d,np,rp){var ap=C$1,sp=pk.transition;try{pk.transition=null,C$1=1,Xk(_d,np,rp,ap)}finally{pk.transition=sp,C$1=ap}return null}function Xk(_d,np,rp,ap){do Ik();while(xk!==null);if(K$1&6)throw Error(p$1(327));rp=_d.finishedWork;var sp=_d.finishedLanes;if(rp===null)return null;if(_d.finishedWork=null,_d.finishedLanes=0,rp===_d.current)throw Error(p$1(177));_d.callbackNode=null,_d.callbackPriority=0;var lp=rp.lanes|rp.childLanes;if(Bc$1(_d,lp),_d===R$2&&(Y$1=R$2=null,Z$1=0),!(rp.subtreeFlags&2064)&&!(rp.flags&2064)||wk||(wk=!0,Gk(hc$1,function(){return Ik(),null})),lp=(rp.flags&15990)!==0,rp.subtreeFlags&15990||lp){lp=pk.transition,pk.transition=null;var up=C$1;C$1=1;var cp=K$1;K$1|=4,ok.current=null,Pj(_d,rp),ek(rp,_d),Oe$1(Df$1),dd=!!Cf$1,Df$1=Cf$1=null,_d.current=rp,ik(rp),dc$1(),K$1=cp,C$1=up,pk.transition=lp}else _d.current=rp;if(wk&&(wk=!1,xk=_d,yk=sp),lp=_d.pendingLanes,lp===0&&(Si$1=null),mc$1(rp.stateNode),Ek(_d,B$1()),np!==null)for(ap=_d.onRecoverableError,rp=0;rp<np.length;rp++)sp=np[rp],ap(sp.value,{componentStack:sp.stack,digest:sp.digest});if(Pi$1)throw Pi$1=!1,_d=Qi$1,Qi$1=null,_d;return yk&1&&_d.tag!==0&&Ik(),lp=_d.pendingLanes,lp&1?_d===Ak?zk++:(zk=0,Ak=_d):zk=0,jg(),null}function Ik(){if(xk!==null){var _d=Dc$1(yk),np=pk.transition,rp=C$1;try{if(pk.transition=null,C$1=16>_d?16:_d,xk===null)var ap=!1;else{if(_d=xk,xk=null,yk=0,K$1&6)throw Error(p$1(331));var sp=K$1;for(K$1|=4,V$1=_d.current;V$1!==null;){var lp=V$1,up=lp.child;if(V$1.flags&16){var cp=lp.deletions;if(cp!==null){for(var dp=0;dp<cp.length;dp++){var fp=cp[dp];for(V$1=fp;V$1!==null;){var pp=V$1;switch(pp.tag){case 0:case 11:case 15:Qj(8,pp,lp)}var hp=pp.child;if(hp!==null)hp.return=pp,V$1=hp;else for(;V$1!==null;){pp=V$1;var mp=pp.sibling,gp=pp.return;if(Tj(pp),pp===fp){V$1=null;break}if(mp!==null){mp.return=gp,V$1=mp;break}V$1=gp}}}var vp=lp.alternate;if(vp!==null){var xp=vp.child;if(xp!==null){vp.child=null;do{var Sp=xp.sibling;xp.sibling=null,xp=Sp}while(xp!==null)}}V$1=lp}}if(lp.subtreeFlags&2064&&up!==null)up.return=lp,V$1=up;else e:for(;V$1!==null;){if(lp=V$1,lp.flags&2048)switch(lp.tag){case 0:case 11:case 15:Qj(9,lp,lp.return)}var yp=lp.sibling;if(yp!==null){yp.return=lp.return,V$1=yp;break e}V$1=lp.return}}var bp=_d.current;for(V$1=bp;V$1!==null;){up=V$1;var Ep=up.child;if(up.subtreeFlags&2064&&Ep!==null)Ep.return=up,V$1=Ep;else e:for(up=bp;V$1!==null;){if(cp=V$1,cp.flags&2048)try{switch(cp.tag){case 0:case 11:case 15:Rj(9,cp)}}catch(_p){W$1(cp,cp.return,_p)}if(cp===up){V$1=null;break e}var wp=cp.sibling;if(wp!==null){wp.return=cp.return,V$1=wp;break e}V$1=cp.return}}if(K$1=sp,jg(),lc$1&&typeof lc$1.onPostCommitFiberRoot=="function")try{lc$1.onPostCommitFiberRoot(kc$1,_d)}catch{}ap=!0}return ap}finally{C$1=rp,pk.transition=np}}return!1}function Yk(_d,np,rp){np=Ki$1(rp,np),np=Oi$1(_d,np,1),_d=dh$1(_d,np,1),np=L$1(),_d!==null&&(Ac$1(_d,1,np),Ek(_d,np))}function W$1(_d,np,rp){if(_d.tag===3)Yk(_d,_d,rp);else for(;np!==null;){if(np.tag===3){Yk(np,_d,rp);break}else if(np.tag===1){var ap=np.stateNode;if(typeof np.type.getDerivedStateFromError=="function"||typeof ap.componentDidCatch=="function"&&(Si$1===null||!Si$1.has(ap))){_d=Ki$1(rp,_d),_d=Ri$1(np,_d,1),np=dh$1(np,_d,1),_d=L$1(),np!==null&&(Ac$1(np,1,_d),Ek(np,_d));break}}np=np.return}}function Ui$1(_d,np,rp){var ap=_d.pingCache;ap!==null&&ap.delete(np),np=L$1(),_d.pingedLanes|=_d.suspendedLanes&rp,R$2===_d&&(Z$1&rp)===rp&&(T$1===4||T$1===3&&(Z$1&130023424)===Z$1&&500>B$1()-gk?Lk(_d,0):sk|=rp),Ek(_d,np)}function Zk(_d,np){np===0&&(_d.mode&1?(np=sc$1,sc$1<<=1,!(sc$1&130023424)&&(sc$1=4194304)):np=1);var rp=L$1();_d=Zg(_d,np),_d!==null&&(Ac$1(_d,np,rp),Ek(_d,rp))}function vj(_d){var np=_d.memoizedState,rp=0;np!==null&&(rp=np.retryLane),Zk(_d,rp)}function ck(_d,np){var rp=0;switch(_d.tag){case 13:var ap=_d.stateNode,sp=_d.memoizedState;sp!==null&&(rp=sp.retryLane);break;case 19:ap=_d.stateNode;break;default:throw Error(p$1(314))}ap!==null&&ap.delete(np),Zk(_d,rp)}var Wk;Wk=function(_d,np,rp){if(_d!==null)if(_d.memoizedProps!==np.pendingProps||Wf$1.current)Ug=!0;else{if(!(_d.lanes&rp)&&!(np.flags&128))return Ug=!1,zj(_d,np,rp);Ug=!!(_d.flags&131072)}else Ug=!1,I$1&&np.flags&1048576&&ug(np,ng,np.index);switch(np.lanes=0,np.tag){case 2:var ap=np.type;jj(_d,np),_d=np.pendingProps;var sp=Yf$1(np,H$1.current);Tg(np,rp),sp=Xh$1(null,np,ap,_d,sp,rp);var lp=bi$1();return np.flags|=1,typeof sp=="object"&&sp!==null&&typeof sp.render=="function"&&sp.$$typeof===void 0?(np.tag=1,np.memoizedState=null,np.updateQueue=null,Zf$1(ap)?(lp=!0,cg(np)):lp=!1,np.memoizedState=sp.state!==null&&sp.state!==void 0?sp.state:null,ah$1(np),sp.updater=nh$1,np.stateNode=sp,sp._reactInternals=np,rh$1(np,ap,_d,rp),np=kj(null,np,ap,!0,lp,rp)):(np.tag=0,I$1&&lp&&vg(np),Yi$1(null,np,sp,rp),np=np.child),np;case 16:ap=np.elementType;e:{switch(jj(_d,np),_d=np.pendingProps,sp=ap._init,ap=sp(ap._payload),np.type=ap,sp=np.tag=$k(ap),_d=Lg(ap,_d),sp){case 0:np=dj(null,np,ap,_d,rp);break e;case 1:np=ij(null,np,ap,_d,rp);break e;case 11:np=Zi$1(null,np,ap,_d,rp);break e;case 14:np=aj(null,np,ap,Lg(ap.type,_d),rp);break e}throw Error(p$1(306,ap,""))}return np;case 0:return ap=np.type,sp=np.pendingProps,sp=np.elementType===ap?sp:Lg(ap,sp),dj(_d,np,ap,sp,rp);case 1:return ap=np.type,sp=np.pendingProps,sp=np.elementType===ap?sp:Lg(ap,sp),ij(_d,np,ap,sp,rp);case 3:e:{if(lj(np),_d===null)throw Error(p$1(387));ap=np.pendingProps,lp=np.memoizedState,sp=lp.element,bh$1(_d,np),gh$1(np,ap,null,rp);var up=np.memoizedState;if(ap=up.element,lp.isDehydrated)if(lp={element:ap,isDehydrated:!1,cache:up.cache,pendingSuspenseBoundaries:up.pendingSuspenseBoundaries,transitions:up.transitions},np.updateQueue.baseState=lp,np.memoizedState=lp,np.flags&256){sp=Ki$1(Error(p$1(423)),np),np=mj(_d,np,ap,rp,sp);break e}else if(ap!==sp){sp=Ki$1(Error(p$1(424)),np),np=mj(_d,np,ap,rp,sp);break e}else for(yg=Lf$1(np.stateNode.containerInfo.firstChild),xg=np,I$1=!0,zg=null,rp=Ch$1(np,null,ap,rp),np.child=rp;rp;)rp.flags=rp.flags&-3|4096,rp=rp.sibling;else{if(Ig(),ap===sp){np=$i$1(_d,np,rp);break e}Yi$1(_d,np,ap,rp)}np=np.child}return np;case 5:return Kh$1(np),_d===null&&Eg(np),ap=np.type,sp=np.pendingProps,lp=_d!==null?_d.memoizedProps:null,up=sp.children,Ef$1(ap,sp)?up=null:lp!==null&&Ef$1(ap,lp)&&(np.flags|=32),hj(_d,np),Yi$1(_d,np,up,rp),np.child;case 6:return _d===null&&Eg(np),null;case 13:return pj(_d,np,rp);case 4:return Ih$1(np,np.stateNode.containerInfo),ap=np.pendingProps,_d===null?np.child=Bh$1(np,null,ap,rp):Yi$1(_d,np,ap,rp),np.child;case 11:return ap=np.type,sp=np.pendingProps,sp=np.elementType===ap?sp:Lg(ap,sp),Zi$1(_d,np,ap,sp,rp);case 7:return Yi$1(_d,np,np.pendingProps,rp),np.child;case 8:return Yi$1(_d,np,np.pendingProps.children,rp),np.child;case 12:return Yi$1(_d,np,np.pendingProps.children,rp),np.child;case 10:e:{if(ap=np.type._context,sp=np.pendingProps,lp=np.memoizedProps,up=sp.value,G$1(Mg,ap._currentValue),ap._currentValue=up,lp!==null)if(He$1(lp.value,up)){if(lp.children===sp.children&&!Wf$1.current){np=$i$1(_d,np,rp);break e}}else for(lp=np.child,lp!==null&&(lp.return=np);lp!==null;){var cp=lp.dependencies;if(cp!==null){up=lp.child;for(var dp=cp.firstContext;dp!==null;){if(dp.context===ap){if(lp.tag===1){dp=ch$1(-1,rp&-rp),dp.tag=2;var fp=lp.updateQueue;if(fp!==null){fp=fp.shared;var pp=fp.pending;pp===null?dp.next=dp:(dp.next=pp.next,pp.next=dp),fp.pending=dp}}lp.lanes|=rp,dp=lp.alternate,dp!==null&&(dp.lanes|=rp),Sg(lp.return,rp,np),cp.lanes|=rp;break}dp=dp.next}}else if(lp.tag===10)up=lp.type===np.type?null:lp.child;else if(lp.tag===18){if(up=lp.return,up===null)throw Error(p$1(341));up.lanes|=rp,cp=up.alternate,cp!==null&&(cp.lanes|=rp),Sg(up,rp,np),up=lp.sibling}else up=lp.child;if(up!==null)up.return=lp;else for(up=lp;up!==null;){if(up===np){up=null;break}if(lp=up.sibling,lp!==null){lp.return=up.return,up=lp;break}up=up.return}lp=up}Yi$1(_d,np,sp.children,rp),np=np.child}return np;case 9:return sp=np.type,ap=np.pendingProps.children,Tg(np,rp),sp=Vg(sp),ap=ap(sp),np.flags|=1,Yi$1(_d,np,ap,rp),np.child;case 14:return ap=np.type,sp=Lg(ap,np.pendingProps),sp=Lg(ap.type,sp),aj(_d,np,ap,sp,rp);case 15:return cj(_d,np,np.type,np.pendingProps,rp);case 17:return ap=np.type,sp=np.pendingProps,sp=np.elementType===ap?sp:Lg(ap,sp),jj(_d,np),np.tag=1,Zf$1(ap)?(_d=!0,cg(np)):_d=!1,Tg(np,rp),ph$1(np,ap,sp),rh$1(np,ap,sp,rp),kj(null,np,ap,!0,_d,rp);case 19:return yj(_d,np,rp);case 22:return ej(_d,np,rp)}throw Error(p$1(156,np.tag))};function Gk(_d,np){return ac$1(_d,np)}function al$1(_d,np,rp,ap){this.tag=_d,this.key=rp,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=np,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=ap,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(_d,np,rp,ap){return new al$1(_d,np,rp,ap)}function bj(_d){return _d=_d.prototype,!(!_d||!_d.isReactComponent)}function $k(_d){if(typeof _d=="function")return bj(_d)?1:0;if(_d!=null){if(_d=_d.$$typeof,_d===Da$1)return 11;if(_d===Ga$1)return 14}return 2}function wh$1(_d,np){var rp=_d.alternate;return rp===null?(rp=Bg(_d.tag,np,_d.key,_d.mode),rp.elementType=_d.elementType,rp.type=_d.type,rp.stateNode=_d.stateNode,rp.alternate=_d,_d.alternate=rp):(rp.pendingProps=np,rp.type=_d.type,rp.flags=0,rp.subtreeFlags=0,rp.deletions=null),rp.flags=_d.flags&14680064,rp.childLanes=_d.childLanes,rp.lanes=_d.lanes,rp.child=_d.child,rp.memoizedProps=_d.memoizedProps,rp.memoizedState=_d.memoizedState,rp.updateQueue=_d.updateQueue,np=_d.dependencies,rp.dependencies=np===null?null:{lanes:np.lanes,firstContext:np.firstContext},rp.sibling=_d.sibling,rp.index=_d.index,rp.ref=_d.ref,rp}function yh$1(_d,np,rp,ap,sp,lp){var up=2;if(ap=_d,typeof _d=="function")bj(_d)&&(up=1);else if(typeof _d=="string")up=5;else e:switch(_d){case ya$1:return Ah$1(rp.children,sp,lp,np);case za$1:up=8,sp|=8;break;case Aa$1:return _d=Bg(12,rp,np,sp|2),_d.elementType=Aa$1,_d.lanes=lp,_d;case Ea$1:return _d=Bg(13,rp,np,sp),_d.elementType=Ea$1,_d.lanes=lp,_d;case Fa$1:return _d=Bg(19,rp,np,sp),_d.elementType=Fa$1,_d.lanes=lp,_d;case Ia$1:return qj(rp,sp,lp,np);default:if(typeof _d=="object"&&_d!==null)switch(_d.$$typeof){case Ba$1:up=10;break e;case Ca$1:up=9;break e;case Da$1:up=11;break e;case Ga$1:up=14;break e;case Ha$1:up=16,ap=null;break e}throw Error(p$1(130,_d==null?_d:typeof _d,""))}return np=Bg(up,rp,np,sp),np.elementType=_d,np.type=ap,np.lanes=lp,np}function Ah$1(_d,np,rp,ap){return _d=Bg(7,_d,ap,np),_d.lanes=rp,_d}function qj(_d,np,rp,ap){return _d=Bg(22,_d,ap,np),_d.elementType=Ia$1,_d.lanes=rp,_d.stateNode={isHidden:!1},_d}function xh$1(_d,np,rp){return _d=Bg(6,_d,null,np),_d.lanes=rp,_d}function zh$1(_d,np,rp){return np=Bg(4,_d.children!==null?_d.children:[],_d.key,np),np.lanes=rp,np.stateNode={containerInfo:_d.containerInfo,pendingChildren:null,implementation:_d.implementation},np}function bl$1(_d,np,rp,ap,sp){this.tag=np,this.containerInfo=_d,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc$1(0),this.expirationTimes=zc$1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc$1(0),this.identifierPrefix=ap,this.onRecoverableError=sp,this.mutableSourceEagerHydrationData=null}function cl$1(_d,np,rp,ap,sp,lp,up,cp,dp){return _d=new bl$1(_d,np,rp,cp,dp),np===1?(np=1,lp===!0&&(np|=8)):np=0,lp=Bg(3,null,null,np),_d.current=lp,lp.stateNode=_d,lp.memoizedState={element:ap,isDehydrated:rp,cache:null,transitions:null,pendingSuspenseBoundaries:null},ah$1(lp),_d}function dl$1(_d,np,rp){var ap=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa$1,key:ap==null?null:""+ap,children:_d,containerInfo:np,implementation:rp}}function el$1(_d){if(!_d)return Vf$1;_d=_d._reactInternals;e:{if(Vb(_d)!==_d||_d.tag!==1)throw Error(p$1(170));var np=_d;do{switch(np.tag){case 3:np=np.stateNode.context;break e;case 1:if(Zf$1(np.type)){np=np.stateNode.__reactInternalMemoizedMergedChildContext;break e}}np=np.return}while(np!==null);throw Error(p$1(171))}if(_d.tag===1){var rp=_d.type;if(Zf$1(rp))return bg(_d,rp,np)}return np}function fl$1(_d,np,rp,ap,sp,lp,up,cp,dp){return _d=cl$1(rp,ap,!0,_d,sp,lp,up,cp,dp),_d.context=el$1(null),rp=_d.current,ap=L$1(),sp=lh$1(rp),lp=ch$1(ap,sp),lp.callback=np??null,dh$1(rp,lp,sp),_d.current.lanes=sp,Ac$1(_d,sp,ap),Ek(_d,ap),_d}function gl$1(_d,np,rp,ap){var sp=np.current,lp=L$1(),up=lh$1(sp);return rp=el$1(rp),np.context===null?np.context=rp:np.pendingContext=rp,np=ch$1(lp,up),np.payload={element:_d},ap=ap===void 0?null:ap,ap!==null&&(np.callback=ap),_d=dh$1(sp,np,up),_d!==null&&(mh$1(_d,sp,up,lp),eh$1(_d,sp,up)),up}function hl$1(_d){if(_d=_d.current,!_d.child)return null;switch(_d.child.tag){case 5:return _d.child.stateNode;default:return _d.child.stateNode}}function il$1(_d,np){if(_d=_d.memoizedState,_d!==null&&_d.dehydrated!==null){var rp=_d.retryLane;_d.retryLane=rp!==0&&rp<np?rp:np}}function jl$1(_d,np){il$1(_d,np),(_d=_d.alternate)&&il$1(_d,np)}function kl$1(){return null}var ll$1=typeof reportError=="function"?reportError:function(_d){console.error(_d)};function ml$1(_d){this._internalRoot=_d}nl$1.prototype.render=ml$1.prototype.render=function(_d){var np=this._internalRoot;if(np===null)throw Error(p$1(409));gl$1(_d,np,null,null)};nl$1.prototype.unmount=ml$1.prototype.unmount=function(){var _d=this._internalRoot;if(_d!==null){this._internalRoot=null;var np=_d.containerInfo;Sk(function(){gl$1(null,_d,null,null)}),np[uf$1]=null}};function nl$1(_d){this._internalRoot=_d}nl$1.prototype.unstable_scheduleHydration=function(_d){if(_d){var np=Hc$1();_d={blockedOn:null,target:_d,priority:np};for(var rp=0;rp<Qc$1.length&&np!==0&&np<Qc$1[rp].priority;rp++);Qc$1.splice(rp,0,_d),rp===0&&Vc$1(_d)}};function ol$1(_d){return!(!_d||_d.nodeType!==1&&_d.nodeType!==9&&_d.nodeType!==11)}function pl$1(_d){return!(!_d||_d.nodeType!==1&&_d.nodeType!==9&&_d.nodeType!==11&&(_d.nodeType!==8||_d.nodeValue!==" react-mount-point-unstable "))}function ql$1(){}function rl$1(_d,np,rp,ap,sp){if(sp){if(typeof ap=="function"){var lp=ap;ap=function(){var fp=hl$1(up);lp.call(fp)}}var up=fl$1(np,ap,_d,0,null,!1,!1,"",ql$1);return _d._reactRootContainer=up,_d[uf$1]=up.current,sf$1(_d.nodeType===8?_d.parentNode:_d),Sk(),up}for(;sp=_d.lastChild;)_d.removeChild(sp);if(typeof ap=="function"){var cp=ap;ap=function(){var fp=hl$1(dp);cp.call(fp)}}var dp=cl$1(_d,0,!1,null,null,!1,!1,"",ql$1);return _d._reactRootContainer=dp,_d[uf$1]=dp.current,sf$1(_d.nodeType===8?_d.parentNode:_d),Sk(function(){gl$1(np,dp,rp,ap)}),dp}function sl$1(_d,np,rp,ap,sp){var lp=rp._reactRootContainer;if(lp){var up=lp;if(typeof sp=="function"){var cp=sp;sp=function(){var dp=hl$1(up);cp.call(dp)}}gl$1(np,up,_d,sp)}else up=rl$1(rp,np,_d,sp,ap);return hl$1(up)}Ec$1=function(_d){switch(_d.tag){case 3:var np=_d.stateNode;if(np.current.memoizedState.isDehydrated){var rp=tc$1(np.pendingLanes);rp!==0&&(Cc$1(np,rp|1),Ek(np,B$1()),!(K$1&6)&&(Hj=B$1()+500,jg()))}break;case 13:Sk(function(){var ap=Zg(_d,1);if(ap!==null){var sp=L$1();mh$1(ap,_d,1,sp)}}),jl$1(_d,1)}};Fc$1=function(_d){if(_d.tag===13){var np=Zg(_d,134217728);if(np!==null){var rp=L$1();mh$1(np,_d,134217728,rp)}jl$1(_d,134217728)}};Gc$1=function(_d){if(_d.tag===13){var np=lh$1(_d),rp=Zg(_d,np);if(rp!==null){var ap=L$1();mh$1(rp,_d,np,ap)}jl$1(_d,np)}};Hc$1=function(){return C$1};Ic$1=function(_d,np){var rp=C$1;try{return C$1=_d,np()}finally{C$1=rp}};yb=function(_d,np,rp){switch(np){case"input":if(bb(_d,rp),np=rp.name,rp.type==="radio"&&np!=null){for(rp=_d;rp.parentNode;)rp=rp.parentNode;for(rp=rp.querySelectorAll("input[name="+JSON.stringify(""+np)+'][type="radio"]'),np=0;np<rp.length;np++){var ap=rp[np];if(ap!==_d&&ap.form===_d.form){var sp=Db(ap);if(!sp)throw Error(p$1(90));Wa$1(ap),bb(ap,sp)}}}break;case"textarea":ib(_d,rp);break;case"select":np=rp.value,np!=null&&fb(_d,!!rp.multiple,np,!1)}};Gb=Rk;Hb=Sk;var tl$1={usingClientEntryPoint:!1,Events:[Cb,ue$1,Db,Eb,Fb,Rk]},ul$1={findFiberByHostInstance:Wc$1,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},vl$1={bundleType:ul$1.bundleType,version:ul$1.version,rendererPackageName:ul$1.rendererPackageName,rendererConfig:ul$1.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua$1.ReactCurrentDispatcher,findHostInstanceByFiber:function(_d){return _d=Zb(_d),_d===null?null:_d.stateNode},findFiberByHostInstance:ul$1.findFiberByHostInstance||kl$1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wl$1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wl$1.isDisabled&&wl$1.supportsFiber)try{kc$1=wl$1.inject(vl$1),lc$1=wl$1}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl$1;reactDom_production_min.createPortal=function(_d,np){var rp=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ol$1(np))throw Error(p$1(200));return dl$1(_d,np,null,rp)};reactDom_production_min.createRoot=function(_d,np){if(!ol$1(_d))throw Error(p$1(299));var rp=!1,ap="",sp=ll$1;return np!=null&&(np.unstable_strictMode===!0&&(rp=!0),np.identifierPrefix!==void 0&&(ap=np.identifierPrefix),np.onRecoverableError!==void 0&&(sp=np.onRecoverableError)),np=cl$1(_d,1,!1,null,null,rp,!1,ap,sp),_d[uf$1]=np.current,sf$1(_d.nodeType===8?_d.parentNode:_d),new ml$1(np)};reactDom_production_min.findDOMNode=function(_d){if(_d==null)return null;if(_d.nodeType===1)return _d;var np=_d._reactInternals;if(np===void 0)throw typeof _d.render=="function"?Error(p$1(188)):(_d=Object.keys(_d).join(","),Error(p$1(268,_d)));return _d=Zb(np),_d=_d===null?null:_d.stateNode,_d};reactDom_production_min.flushSync=function(_d){return Sk(_d)};reactDom_production_min.hydrate=function(_d,np,rp){if(!pl$1(np))throw Error(p$1(200));return sl$1(null,_d,np,!0,rp)};reactDom_production_min.hydrateRoot=function(_d,np,rp){if(!ol$1(_d))throw Error(p$1(405));var ap=rp!=null&&rp.hydratedSources||null,sp=!1,lp="",up=ll$1;if(rp!=null&&(rp.unstable_strictMode===!0&&(sp=!0),rp.identifierPrefix!==void 0&&(lp=rp.identifierPrefix),rp.onRecoverableError!==void 0&&(up=rp.onRecoverableError)),np=fl$1(np,null,_d,1,rp??null,sp,!1,lp,up),_d[uf$1]=np.current,sf$1(_d),ap)for(_d=0;_d<ap.length;_d++)rp=ap[_d],sp=rp._getVersion,sp=sp(rp._source),np.mutableSourceEagerHydrationData==null?np.mutableSourceEagerHydrationData=[rp,sp]:np.mutableSourceEagerHydrationData.push(rp,sp);return new nl$1(np)};reactDom_production_min.render=function(_d,np,rp){if(!pl$1(np))throw Error(p$1(200));return sl$1(null,_d,np,!1,rp)};reactDom_production_min.unmountComponentAtNode=function(_d){if(!pl$1(_d))throw Error(p$1(40));return _d._reactRootContainer?(Sk(function(){sl$1(null,null,_d,!1,function(){_d._reactRootContainer=null,_d[uf$1]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Rk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(_d,np,rp,ap){if(!pl$1(rp))throw Error(p$1(200));if(_d==null||_d._reactInternals===void 0)throw Error(p$1(38));return sl$1(_d,np,rp,!1,ap)};reactDom_production_min.version="18.2.0-next-9e3b772b8-20220608";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(_d){console.error(_d)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports;const ReactDOM=getDefaultExportFromCjs(reactDomExports);/**
 * @remix-run/router v1.14.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$6(){return _extends$6=Object.assign?Object.assign.bind():function(_d){for(var np=1;np<arguments.length;np++){var rp=arguments[np];for(var ap in rp)Object.prototype.hasOwnProperty.call(rp,ap)&&(_d[ap]=rp[ap])}return _d},_extends$6.apply(this,arguments)}var Action;(function(_d){_d.Pop="POP",_d.Push="PUSH",_d.Replace="REPLACE"})(Action||(Action={}));const PopStateEventType="popstate";function createBrowserHistory(_d){_d===void 0&&(_d={});function np(ap,sp){let{pathname:lp,search:up,hash:cp}=ap.location;return createLocation("",{pathname:lp,search:up,hash:cp},sp.state&&sp.state.usr||null,sp.state&&sp.state.key||"default")}function rp(ap,sp){return typeof sp=="string"?sp:createPath(sp)}return getUrlBasedHistory(np,rp,null,_d)}function invariant$1(_d,np){if(_d===!1||_d===null||typeof _d>"u")throw new Error(np)}function warning(_d,np){if(!_d){typeof console<"u"&&console.warn(np);try{throw new Error(np)}catch{}}}function createKey(){return Math.random().toString(36).substr(2,8)}function getHistoryState(_d,np){return{usr:_d.state,key:_d.key,idx:np}}function createLocation(_d,np,rp,ap){return rp===void 0&&(rp=null),_extends$6({pathname:typeof _d=="string"?_d:_d.pathname,search:"",hash:""},typeof np=="string"?parsePath(np):np,{state:rp,key:np&&np.key||ap||createKey()})}function createPath(_d){let{pathname:np="/",search:rp="",hash:ap=""}=_d;return rp&&rp!=="?"&&(np+=rp.charAt(0)==="?"?rp:"?"+rp),ap&&ap!=="#"&&(np+=ap.charAt(0)==="#"?ap:"#"+ap),np}function parsePath(_d){let np={};if(_d){let rp=_d.indexOf("#");rp>=0&&(np.hash=_d.substr(rp),_d=_d.substr(0,rp));let ap=_d.indexOf("?");ap>=0&&(np.search=_d.substr(ap),_d=_d.substr(0,ap)),_d&&(np.pathname=_d)}return np}function getUrlBasedHistory(_d,np,rp,ap){ap===void 0&&(ap={});let{window:sp=document.defaultView,v5Compat:lp=!1}=ap,up=sp.history,cp=Action.Pop,dp=null,fp=pp();fp==null&&(fp=0,up.replaceState(_extends$6({},up.state,{idx:fp}),""));function pp(){return(up.state||{idx:null}).idx}function hp(){cp=Action.Pop;let Sp=pp(),yp=Sp==null?null:Sp-fp;fp=Sp,dp&&dp({action:cp,location:xp.location,delta:yp})}function mp(Sp,yp){cp=Action.Push;let bp=createLocation(xp.location,Sp,yp);rp&&rp(bp,Sp),fp=pp()+1;let Ep=getHistoryState(bp,fp),wp=xp.createHref(bp);try{up.pushState(Ep,"",wp)}catch(_p){if(_p instanceof DOMException&&_p.name==="DataCloneError")throw _p;sp.location.assign(wp)}lp&&dp&&dp({action:cp,location:xp.location,delta:1})}function gp(Sp,yp){cp=Action.Replace;let bp=createLocation(xp.location,Sp,yp);rp&&rp(bp,Sp),fp=pp();let Ep=getHistoryState(bp,fp),wp=xp.createHref(bp);up.replaceState(Ep,"",wp),lp&&dp&&dp({action:cp,location:xp.location,delta:0})}function vp(Sp){let yp=sp.location.origin!=="null"?sp.location.origin:sp.location.href,bp=typeof Sp=="string"?Sp:createPath(Sp);return invariant$1(yp,"No window.location.(origin|href) available to create URL for href: "+bp),new URL(bp,yp)}let xp={get action(){return cp},get location(){return _d(sp,up)},listen(Sp){if(dp)throw new Error("A history only accepts one active listener");return sp.addEventListener(PopStateEventType,hp),dp=Sp,()=>{sp.removeEventListener(PopStateEventType,hp),dp=null}},createHref(Sp){return np(sp,Sp)},createURL:vp,encodeLocation(Sp){let yp=vp(Sp);return{pathname:yp.pathname,search:yp.search,hash:yp.hash}},push:mp,replace:gp,go(Sp){return up.go(Sp)}};return xp}var ResultType;(function(_d){_d.data="data",_d.deferred="deferred",_d.redirect="redirect",_d.error="error"})(ResultType||(ResultType={}));function matchRoutes(_d,np,rp){rp===void 0&&(rp="/");let ap=typeof np=="string"?parsePath(np):np,sp=stripBasename(ap.pathname||"/",rp);if(sp==null)return null;let lp=flattenRoutes(_d);rankRouteBranches(lp);let up=null;for(let cp=0;up==null&&cp<lp.length;++cp)up=matchRouteBranch(lp[cp],safelyDecodeURI(sp));return up}function flattenRoutes(_d,np,rp,ap){np===void 0&&(np=[]),rp===void 0&&(rp=[]),ap===void 0&&(ap="");let sp=(lp,up,cp)=>{let dp={relativePath:cp===void 0?lp.path||"":cp,caseSensitive:lp.caseSensitive===!0,childrenIndex:up,route:lp};dp.relativePath.startsWith("/")&&(invariant$1(dp.relativePath.startsWith(ap),'Absolute route path "'+dp.relativePath+'" nested under path '+('"'+ap+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),dp.relativePath=dp.relativePath.slice(ap.length));let fp=joinPaths([ap,dp.relativePath]),pp=rp.concat(dp);lp.children&&lp.children.length>0&&(invariant$1(lp.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+fp+'".')),flattenRoutes(lp.children,np,pp,fp)),!(lp.path==null&&!lp.index)&&np.push({path:fp,score:computeScore(fp,lp.index),routesMeta:pp})};return _d.forEach((lp,up)=>{var cp;if(lp.path===""||!((cp=lp.path)!=null&&cp.includes("?")))sp(lp,up);else for(let dp of explodeOptionalSegments(lp.path))sp(lp,up,dp)}),np}function explodeOptionalSegments(_d){let np=_d.split("/");if(np.length===0)return[];let[rp,...ap]=np,sp=rp.endsWith("?"),lp=rp.replace(/\?$/,"");if(ap.length===0)return sp?[lp,""]:[lp];let up=explodeOptionalSegments(ap.join("/")),cp=[];return cp.push(...up.map(dp=>dp===""?lp:[lp,dp].join("/"))),sp&&cp.push(...up),cp.map(dp=>_d.startsWith("/")&&dp===""?"/":dp)}function rankRouteBranches(_d){_d.sort((np,rp)=>np.score!==rp.score?rp.score-np.score:compareIndexes(np.routesMeta.map(ap=>ap.childrenIndex),rp.routesMeta.map(ap=>ap.childrenIndex)))}const paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=_d=>_d==="*";function computeScore(_d,np){let rp=_d.split("/"),ap=rp.length;return rp.some(isSplat)&&(ap+=splatPenalty),np&&(ap+=indexRouteValue),rp.filter(sp=>!isSplat(sp)).reduce((sp,lp)=>sp+(paramRe.test(lp)?dynamicSegmentValue:lp===""?emptySegmentValue:staticSegmentValue),ap)}function compareIndexes(_d,np){return _d.length===np.length&&_d.slice(0,-1).every((ap,sp)=>ap===np[sp])?_d[_d.length-1]-np[np.length-1]:0}function matchRouteBranch(_d,np){let{routesMeta:rp}=_d,ap={},sp="/",lp=[];for(let up=0;up<rp.length;++up){let cp=rp[up],dp=up===rp.length-1,fp=sp==="/"?np:np.slice(sp.length)||"/",pp=matchPath({path:cp.relativePath,caseSensitive:cp.caseSensitive,end:dp},fp);if(!pp)return null;Object.assign(ap,pp.params);let hp=cp.route;lp.push({params:ap,pathname:joinPaths([sp,pp.pathname]),pathnameBase:normalizePathname(joinPaths([sp,pp.pathnameBase])),route:hp}),pp.pathnameBase!=="/"&&(sp=joinPaths([sp,pp.pathnameBase]))}return lp}function matchPath(_d,np){typeof _d=="string"&&(_d={path:_d,caseSensitive:!1,end:!0});let[rp,ap]=compilePath(_d.path,_d.caseSensitive,_d.end),sp=np.match(rp);if(!sp)return null;let lp=sp[0],up=lp.replace(/(.)\/+$/,"$1"),cp=sp.slice(1);return{params:ap.reduce((fp,pp,hp)=>{let{paramName:mp,isOptional:gp}=pp;if(mp==="*"){let xp=cp[hp]||"";up=lp.slice(0,lp.length-xp.length).replace(/(.)\/+$/,"$1")}const vp=cp[hp];return gp&&!vp?fp[mp]=void 0:fp[mp]=safelyDecodeURIComponent(vp||"",mp),fp},{}),pathname:lp,pathnameBase:up,pattern:_d}}function compilePath(_d,np,rp){np===void 0&&(np=!1),rp===void 0&&(rp=!0),warning(_d==="*"||!_d.endsWith("*")||_d.endsWith("/*"),'Route path "'+_d+'" will be treated as if it were '+('"'+_d.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+_d.replace(/\*$/,"/*")+'".'));let ap=[],sp="^"+_d.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(up,cp,dp)=>(ap.push({paramName:cp,isOptional:dp!=null}),dp?"/?([^\\/]+)?":"/([^\\/]+)"));return _d.endsWith("*")?(ap.push({paramName:"*"}),sp+=_d==="*"||_d==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):rp?sp+="\\/*$":_d!==""&&_d!=="/"&&(sp+="(?:(?=\\/|$))"),[new RegExp(sp,np?void 0:"i"),ap]}function safelyDecodeURI(_d){try{return decodeURI(_d)}catch(np){return warning(!1,'The URL path "'+_d+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+np+").")),_d}}function safelyDecodeURIComponent(_d,np){try{return decodeURIComponent(_d)}catch(rp){return warning(!1,'The value for the URL param "'+np+'" will not be decoded because'+(' the string "'+_d+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+rp+").")),_d}}function stripBasename(_d,np){if(np==="/")return _d;if(!_d.toLowerCase().startsWith(np.toLowerCase()))return null;let rp=np.endsWith("/")?np.length-1:np.length,ap=_d.charAt(rp);return ap&&ap!=="/"?null:_d.slice(rp)||"/"}function resolvePath(_d,np){np===void 0&&(np="/");let{pathname:rp,search:ap="",hash:sp=""}=typeof _d=="string"?parsePath(_d):_d;return{pathname:rp?rp.startsWith("/")?rp:resolvePathname(rp,np):np,search:normalizeSearch(ap),hash:normalizeHash(sp)}}function resolvePathname(_d,np){let rp=np.replace(/\/+$/,"").split("/");return _d.split("/").forEach(sp=>{sp===".."?rp.length>1&&rp.pop():sp!=="."&&rp.push(sp)}),rp.length>1?rp.join("/"):"/"}function getInvalidPathError(_d,np,rp,ap){return"Cannot include a '"+_d+"' character in a manually specified "+("`to."+np+"` field ["+JSON.stringify(ap)+"].  Please separate it out to the ")+("`to."+rp+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function getPathContributingMatches(_d){return _d.filter((np,rp)=>rp===0||np.route.path&&np.route.path.length>0)}function getResolveToMatches(_d,np){let rp=getPathContributingMatches(_d);return np?rp.map((ap,sp)=>sp===_d.length-1?ap.pathname:ap.pathnameBase):rp.map(ap=>ap.pathnameBase)}function resolveTo(_d,np,rp,ap){ap===void 0&&(ap=!1);let sp;typeof _d=="string"?sp=parsePath(_d):(sp=_extends$6({},_d),invariant$1(!sp.pathname||!sp.pathname.includes("?"),getInvalidPathError("?","pathname","search",sp)),invariant$1(!sp.pathname||!sp.pathname.includes("#"),getInvalidPathError("#","pathname","hash",sp)),invariant$1(!sp.search||!sp.search.includes("#"),getInvalidPathError("#","search","hash",sp)));let lp=_d===""||sp.pathname==="",up=lp?"/":sp.pathname,cp;if(up==null)cp=rp;else{let hp=np.length-1;if(!ap&&up.startsWith("..")){let mp=up.split("/");for(;mp[0]==="..";)mp.shift(),hp-=1;sp.pathname=mp.join("/")}cp=hp>=0?np[hp]:"/"}let dp=resolvePath(sp,cp),fp=up&&up!=="/"&&up.endsWith("/"),pp=(lp||up===".")&&rp.endsWith("/");return!dp.pathname.endsWith("/")&&(fp||pp)&&(dp.pathname+="/"),dp}const joinPaths=_d=>_d.join("/").replace(/\/\/+/g,"/"),normalizePathname=_d=>_d.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=_d=>!_d||_d==="?"?"":_d.startsWith("?")?_d:"?"+_d,normalizeHash=_d=>!_d||_d==="#"?"":_d.startsWith("#")?_d:"#"+_d;function isRouteErrorResponse(_d){return _d!=null&&typeof _d.status=="number"&&typeof _d.statusText=="string"&&typeof _d.internal=="boolean"&&"data"in _d}const validMutationMethodsArr=["post","put","patch","delete"];new Set(validMutationMethodsArr);const validRequestMethodsArr=["get",...validMutationMethodsArr];new Set(validRequestMethodsArr);/**
 * React Router v6.21.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$5(){return _extends$5=Object.assign?Object.assign.bind():function(_d){for(var np=1;np<arguments.length;np++){var rp=arguments[np];for(var ap in rp)Object.prototype.hasOwnProperty.call(rp,ap)&&(_d[ap]=rp[ap])}return _d},_extends$5.apply(this,arguments)}const DataRouterContext=reactExports.createContext(null),DataRouterStateContext=reactExports.createContext(null),NavigationContext=reactExports.createContext(null),LocationContext=reactExports.createContext(null),RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1}),RouteErrorContext=reactExports.createContext(null);function useHref(_d,np){let{relative:rp}=np===void 0?{}:np;useInRouterContext()||invariant$1(!1);let{basename:ap,navigator:sp}=reactExports.useContext(NavigationContext),{hash:lp,pathname:up,search:cp}=useResolvedPath(_d,{relative:rp}),dp=up;return ap!=="/"&&(dp=up==="/"?ap:joinPaths([ap,up])),sp.createHref({pathname:dp,search:cp,hash:lp})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return useInRouterContext()||invariant$1(!1),reactExports.useContext(LocationContext).location}function useIsomorphicLayoutEffect$2(_d){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(_d)}function useNavigate(){let{isDataRoute:_d}=reactExports.useContext(RouteContext);return _d?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){useInRouterContext()||invariant$1(!1);let _d=reactExports.useContext(DataRouterContext),{basename:np,future:rp,navigator:ap}=reactExports.useContext(NavigationContext),{matches:sp}=reactExports.useContext(RouteContext),{pathname:lp}=useLocation(),up=JSON.stringify(getResolveToMatches(sp,rp.v7_relativeSplatPath)),cp=reactExports.useRef(!1);return useIsomorphicLayoutEffect$2(()=>{cp.current=!0}),reactExports.useCallback(function(fp,pp){if(pp===void 0&&(pp={}),!cp.current)return;if(typeof fp=="number"){ap.go(fp);return}let hp=resolveTo(fp,JSON.parse(up),lp,pp.relative==="path");_d==null&&np!=="/"&&(hp.pathname=hp.pathname==="/"?np:joinPaths([np,hp.pathname])),(pp.replace?ap.replace:ap.push)(hp,pp.state,pp)},[np,ap,up,lp,_d])}const OutletContext=reactExports.createContext(null);function useOutlet(_d){let np=reactExports.useContext(RouteContext).outlet;return np&&reactExports.createElement(OutletContext.Provider,{value:_d},np)}function useParams(){let{matches:_d}=reactExports.useContext(RouteContext),np=_d[_d.length-1];return np?np.params:{}}function useResolvedPath(_d,np){let{relative:rp}=np===void 0?{}:np,{future:ap}=reactExports.useContext(NavigationContext),{matches:sp}=reactExports.useContext(RouteContext),{pathname:lp}=useLocation(),up=JSON.stringify(getResolveToMatches(sp,ap.v7_relativeSplatPath));return reactExports.useMemo(()=>resolveTo(_d,JSON.parse(up),lp,rp==="path"),[_d,up,lp,rp])}function useRoutes(_d,np){return useRoutesImpl(_d,np)}function useRoutesImpl(_d,np,rp,ap){useInRouterContext()||invariant$1(!1);let{navigator:sp}=reactExports.useContext(NavigationContext),{matches:lp}=reactExports.useContext(RouteContext),up=lp[lp.length-1],cp=up?up.params:{};up&&up.pathname;let dp=up?up.pathnameBase:"/";up&&up.route;let fp=useLocation(),pp;if(np){var hp;let Sp=typeof np=="string"?parsePath(np):np;dp==="/"||(hp=Sp.pathname)!=null&&hp.startsWith(dp)||invariant$1(!1),pp=Sp}else pp=fp;let mp=pp.pathname||"/",gp=dp==="/"?mp:mp.slice(dp.length)||"/",vp=matchRoutes(_d,{pathname:gp}),xp=_renderMatches(vp&&vp.map(Sp=>Object.assign({},Sp,{params:Object.assign({},cp,Sp.params),pathname:joinPaths([dp,sp.encodeLocation?sp.encodeLocation(Sp.pathname).pathname:Sp.pathname]),pathnameBase:Sp.pathnameBase==="/"?dp:joinPaths([dp,sp.encodeLocation?sp.encodeLocation(Sp.pathnameBase).pathname:Sp.pathnameBase])})),lp,rp,ap);return np&&xp?reactExports.createElement(LocationContext.Provider,{value:{location:_extends$5({pathname:"/",search:"",hash:"",state:null,key:"default"},pp),navigationType:Action.Pop}},xp):xp}function DefaultErrorComponent(){let _d=useRouteError(),np=isRouteErrorResponse(_d)?_d.status+" "+_d.statusText:_d instanceof Error?_d.message:JSON.stringify(_d),rp=_d instanceof Error?_d.stack:null,sp={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},np),rp?reactExports.createElement("pre",{style:sp},rp):null,null)}const defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null);class RenderErrorBoundary extends reactExports.Component{constructor(np){super(np),this.state={location:np.location,revalidation:np.revalidation,error:np.error}}static getDerivedStateFromError(np){return{error:np}}static getDerivedStateFromProps(np,rp){return rp.location!==np.location||rp.revalidation!=="idle"&&np.revalidation==="idle"?{error:np.error,location:np.location,revalidation:np.revalidation}:{error:np.error!==void 0?np.error:rp.error,location:rp.location,revalidation:np.revalidation||rp.revalidation}}componentDidCatch(np,rp){console.error("React Router caught the following error during render",np,rp)}render(){return this.state.error!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RenderedRoute(_d){let{routeContext:np,match:rp,children:ap}=_d,sp=reactExports.useContext(DataRouterContext);return sp&&sp.static&&sp.staticContext&&(rp.route.errorElement||rp.route.ErrorBoundary)&&(sp.staticContext._deepestRenderedBoundaryId=rp.route.id),reactExports.createElement(RouteContext.Provider,{value:np},ap)}function _renderMatches(_d,np,rp,ap){var sp;if(np===void 0&&(np=[]),rp===void 0&&(rp=null),ap===void 0&&(ap=null),_d==null){var lp;if((lp=rp)!=null&&lp.errors)_d=rp.matches;else return null}let up=_d,cp=(sp=rp)==null?void 0:sp.errors;if(cp!=null){let pp=up.findIndex(hp=>hp.route.id&&(cp==null?void 0:cp[hp.route.id]));pp>=0||invariant$1(!1),up=up.slice(0,Math.min(up.length,pp+1))}let dp=!1,fp=-1;if(rp&&ap&&ap.v7_partialHydration)for(let pp=0;pp<up.length;pp++){let hp=up[pp];if((hp.route.HydrateFallback||hp.route.hydrateFallbackElement)&&(fp=pp),hp.route.id){let{loaderData:mp,errors:gp}=rp,vp=hp.route.loader&&mp[hp.route.id]===void 0&&(!gp||gp[hp.route.id]===void 0);if(hp.route.lazy||vp){dp=!0,fp>=0?up=up.slice(0,fp+1):up=[up[0]];break}}}return up.reduceRight((pp,hp,mp)=>{let gp,vp=!1,xp=null,Sp=null;rp&&(gp=cp&&hp.route.id?cp[hp.route.id]:void 0,xp=hp.route.errorElement||defaultErrorElement,dp&&(fp<0&&mp===0?(warningOnce("route-fallback",!1),vp=!0,Sp=null):fp===mp&&(vp=!0,Sp=hp.route.hydrateFallbackElement||null)));let yp=np.concat(up.slice(0,mp+1)),bp=()=>{let Ep;return gp?Ep=xp:vp?Ep=Sp:hp.route.Component?Ep=reactExports.createElement(hp.route.Component,null):hp.route.element?Ep=hp.route.element:Ep=pp,reactExports.createElement(RenderedRoute,{match:hp,routeContext:{outlet:pp,matches:yp,isDataRoute:rp!=null},children:Ep})};return rp&&(hp.route.ErrorBoundary||hp.route.errorElement||mp===0)?reactExports.createElement(RenderErrorBoundary,{location:rp.location,revalidation:rp.revalidation,component:xp,error:gp,children:bp(),routeContext:{outlet:null,matches:yp,isDataRoute:!0}}):bp()},null)}var DataRouterHook$1=function(_d){return _d.UseBlocker="useBlocker",_d.UseRevalidator="useRevalidator",_d.UseNavigateStable="useNavigate",_d}(DataRouterHook$1||{}),DataRouterStateHook$1=function(_d){return _d.UseBlocker="useBlocker",_d.UseLoaderData="useLoaderData",_d.UseActionData="useActionData",_d.UseRouteError="useRouteError",_d.UseNavigation="useNavigation",_d.UseRouteLoaderData="useRouteLoaderData",_d.UseMatches="useMatches",_d.UseRevalidator="useRevalidator",_d.UseNavigateStable="useNavigate",_d.UseRouteId="useRouteId",_d}(DataRouterStateHook$1||{});function useDataRouterContext$1(_d){let np=reactExports.useContext(DataRouterContext);return np||invariant$1(!1),np}function useDataRouterState(_d){let np=reactExports.useContext(DataRouterStateContext);return np||invariant$1(!1),np}function useRouteContext(_d){let np=reactExports.useContext(RouteContext);return np||invariant$1(!1),np}function useCurrentRouteId(_d){let np=useRouteContext(),rp=np.matches[np.matches.length-1];return rp.route.id||invariant$1(!1),rp.route.id}function useRouteError(){var _d;let np=reactExports.useContext(RouteErrorContext),rp=useDataRouterState(DataRouterStateHook$1.UseRouteError),ap=useCurrentRouteId(DataRouterStateHook$1.UseRouteError);return np!==void 0?np:(_d=rp.errors)==null?void 0:_d[ap]}function useNavigateStable(){let{router:_d}=useDataRouterContext$1(DataRouterHook$1.UseNavigateStable),np=useCurrentRouteId(DataRouterStateHook$1.UseNavigateStable),rp=reactExports.useRef(!1);return useIsomorphicLayoutEffect$2(()=>{rp.current=!0}),reactExports.useCallback(function(sp,lp){lp===void 0&&(lp={}),rp.current&&(typeof sp=="number"?_d.navigate(sp):_d.navigate(sp,_extends$5({fromRouteId:np},lp)))},[_d,np])}const alreadyWarned={};function warningOnce(_d,np,rp){!np&&!alreadyWarned[_d]&&(alreadyWarned[_d]=!0)}function Outlet(_d){return useOutlet(_d.context)}function Route(_d){invariant$1(!1)}function Router(_d){let{basename:np="/",children:rp=null,location:ap,navigationType:sp=Action.Pop,navigator:lp,static:up=!1,future:cp}=_d;useInRouterContext()&&invariant$1(!1);let dp=np.replace(/^\/*/,"/"),fp=reactExports.useMemo(()=>({basename:dp,navigator:lp,static:up,future:_extends$5({v7_relativeSplatPath:!1},cp)}),[dp,cp,lp,up]);typeof ap=="string"&&(ap=parsePath(ap));let{pathname:pp="/",search:hp="",hash:mp="",state:gp=null,key:vp="default"}=ap,xp=reactExports.useMemo(()=>{let Sp=stripBasename(pp,dp);return Sp==null?null:{location:{pathname:Sp,search:hp,hash:mp,state:gp,key:vp},navigationType:sp}},[dp,pp,hp,mp,gp,vp,sp]);return xp==null?null:reactExports.createElement(NavigationContext.Provider,{value:fp},reactExports.createElement(LocationContext.Provider,{children:rp,value:xp}))}function Routes(_d){let{children:np,location:rp}=_d;return useRoutes(createRoutesFromChildren(np),rp)}new Promise(()=>{});function createRoutesFromChildren(_d,np){np===void 0&&(np=[]);let rp=[];return reactExports.Children.forEach(_d,(ap,sp)=>{if(!reactExports.isValidElement(ap))return;let lp=[...np,sp];if(ap.type===reactExports.Fragment){rp.push.apply(rp,createRoutesFromChildren(ap.props.children,lp));return}ap.type!==Route&&invariant$1(!1),!ap.props.index||!ap.props.children||invariant$1(!1);let up={id:ap.props.id||lp.join("-"),caseSensitive:ap.props.caseSensitive,element:ap.props.element,Component:ap.props.Component,index:ap.props.index,path:ap.props.path,loader:ap.props.loader,action:ap.props.action,errorElement:ap.props.errorElement,ErrorBoundary:ap.props.ErrorBoundary,hasErrorBoundary:ap.props.ErrorBoundary!=null||ap.props.errorElement!=null,shouldRevalidate:ap.props.shouldRevalidate,handle:ap.props.handle,lazy:ap.props.lazy};ap.props.children&&(up.children=createRoutesFromChildren(ap.props.children,lp)),rp.push(up)}),rp}/**
 * React Router DOM v6.21.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$4(){return _extends$4=Object.assign?Object.assign.bind():function(_d){for(var np=1;np<arguments.length;np++){var rp=arguments[np];for(var ap in rp)Object.prototype.hasOwnProperty.call(rp,ap)&&(_d[ap]=rp[ap])}return _d},_extends$4.apply(this,arguments)}function _objectWithoutPropertiesLoose$2(_d,np){if(_d==null)return{};var rp={},ap=Object.keys(_d),sp,lp;for(lp=0;lp<ap.length;lp++)sp=ap[lp],!(np.indexOf(sp)>=0)&&(rp[sp]=_d[sp]);return rp}function isModifiedEvent(_d){return!!(_d.metaKey||_d.altKey||_d.ctrlKey||_d.shiftKey)}function shouldProcessLinkClick(_d,np){return _d.button===0&&(!np||np==="_self")&&!isModifiedEvent(_d)}const _excluded$a=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],_excluded2=["aria-current","caseSensitive","className","end","style","to","unstable_viewTransition","children"],ViewTransitionContext=reactExports.createContext({isTransitioning:!1}),START_TRANSITION="startTransition",startTransitionImpl=React$1[START_TRANSITION];function BrowserRouter(_d){let{basename:np,children:rp,future:ap,window:sp}=_d,lp=reactExports.useRef();lp.current==null&&(lp.current=createBrowserHistory({window:sp,v5Compat:!0}));let up=lp.current,[cp,dp]=reactExports.useState({action:up.action,location:up.location}),{v7_startTransition:fp}=ap||{},pp=reactExports.useCallback(hp=>{fp&&startTransitionImpl?startTransitionImpl(()=>dp(hp)):dp(hp)},[dp,fp]);return reactExports.useLayoutEffect(()=>up.listen(pp),[up,pp]),reactExports.createElement(Router,{basename:np,children:rp,location:cp.location,navigationType:cp.action,navigator:up,future:ap})}const isBrowser$1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ABSOLUTE_URL_REGEX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link=reactExports.forwardRef(function(np,rp){let{onClick:ap,relative:sp,reloadDocument:lp,replace:up,state:cp,target:dp,to:fp,preventScrollReset:pp,unstable_viewTransition:hp}=np,mp=_objectWithoutPropertiesLoose$2(np,_excluded$a),{basename:gp}=reactExports.useContext(NavigationContext),vp,xp=!1;if(typeof fp=="string"&&ABSOLUTE_URL_REGEX.test(fp)&&(vp=fp,isBrowser$1))try{let Ep=new URL(window.location.href),wp=fp.startsWith("//")?new URL(Ep.protocol+fp):new URL(fp),_p=stripBasename(wp.pathname,gp);wp.origin===Ep.origin&&_p!=null?fp=_p+wp.search+wp.hash:xp=!0}catch{}let Sp=useHref(fp,{relative:sp}),yp=useLinkClickHandler(fp,{replace:up,state:cp,target:dp,preventScrollReset:pp,relative:sp,unstable_viewTransition:hp});function bp(Ep){ap&&ap(Ep),Ep.defaultPrevented||yp(Ep)}return reactExports.createElement("a",_extends$4({},mp,{href:vp||Sp,onClick:xp||lp?ap:bp,ref:rp,target:dp}))}),NavLink=reactExports.forwardRef(function(np,rp){let{"aria-current":ap="page",caseSensitive:sp=!1,className:lp="",end:up=!1,style:cp,to:dp,unstable_viewTransition:fp,children:pp}=np,hp=_objectWithoutPropertiesLoose$2(np,_excluded2),mp=useResolvedPath(dp,{relative:hp.relative}),gp=useLocation(),vp=reactExports.useContext(DataRouterStateContext),{navigator:xp,basename:Sp}=reactExports.useContext(NavigationContext),yp=vp!=null&&useViewTransitionState(mp)&&fp===!0,bp=xp.encodeLocation?xp.encodeLocation(mp).pathname:mp.pathname,Ep=gp.pathname,wp=vp&&vp.navigation&&vp.navigation.location?vp.navigation.location.pathname:null;sp||(Ep=Ep.toLowerCase(),wp=wp?wp.toLowerCase():null,bp=bp.toLowerCase()),wp&&Sp&&(wp=stripBasename(wp,Sp)||wp);const _p=bp!=="/"&&bp.endsWith("/")?bp.length-1:bp.length;let Cp=Ep===bp||!up&&Ep.startsWith(bp)&&Ep.charAt(_p)==="/",$p=wp!=null&&(wp===bp||!up&&wp.startsWith(bp)&&wp.charAt(bp.length)==="/"),Rp={isActive:Cp,isPending:$p,isTransitioning:yp},Pp=Cp?ap:void 0,Op;typeof lp=="function"?Op=lp(Rp):Op=[lp,Cp?"active":null,$p?"pending":null,yp?"transitioning":null].filter(Boolean).join(" ");let jp=typeof cp=="function"?cp(Rp):cp;return reactExports.createElement(Link,_extends$4({},hp,{"aria-current":Pp,className:Op,ref:rp,style:jp,to:dp,unstable_viewTransition:fp}),typeof pp=="function"?pp(Rp):pp)});var DataRouterHook;(function(_d){_d.UseScrollRestoration="useScrollRestoration",_d.UseSubmit="useSubmit",_d.UseSubmitFetcher="useSubmitFetcher",_d.UseFetcher="useFetcher",_d.useViewTransitionState="useViewTransitionState"})(DataRouterHook||(DataRouterHook={}));var DataRouterStateHook;(function(_d){_d.UseFetcher="useFetcher",_d.UseFetchers="useFetchers",_d.UseScrollRestoration="useScrollRestoration"})(DataRouterStateHook||(DataRouterStateHook={}));function useDataRouterContext(_d){let np=reactExports.useContext(DataRouterContext);return np||invariant$1(!1),np}function useLinkClickHandler(_d,np){let{target:rp,replace:ap,state:sp,preventScrollReset:lp,relative:up,unstable_viewTransition:cp}=np===void 0?{}:np,dp=useNavigate(),fp=useLocation(),pp=useResolvedPath(_d,{relative:up});return reactExports.useCallback(hp=>{if(shouldProcessLinkClick(hp,rp)){hp.preventDefault();let mp=ap!==void 0?ap:createPath(fp)===createPath(pp);dp(_d,{replace:mp,state:sp,preventScrollReset:lp,relative:up,unstable_viewTransition:cp})}},[fp,dp,pp,ap,sp,rp,_d,lp,up,cp])}function useViewTransitionState(_d,np){np===void 0&&(np={});let rp=reactExports.useContext(ViewTransitionContext);rp==null&&invariant$1(!1);let{basename:ap}=useDataRouterContext(DataRouterHook.useViewTransitionState),sp=useResolvedPath(_d,{relative:np.relative});if(!rp.isTransitioning)return!1;let lp=stripBasename(rp.currentLocation.pathname,ap)||rp.currentLocation.pathname,up=stripBasename(rp.nextLocation.pathname,ap)||rp.nextLocation.pathname;return matchPath(sp.pathname,up)!=null||matchPath(sp.pathname,lp)!=null}var client={},m$1=reactDomExports;client.createRoot=m$1.createRoot,client.hydrateRoot=m$1.hydrateRoot;var DefaultContext={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},IconContext=React.createContext&&React.createContext(DefaultContext),_excluded$9=["attr","size","title"];function _objectWithoutProperties(_d,np){if(_d==null)return{};var rp=_objectWithoutPropertiesLoose$1(_d,np),ap,sp;if(Object.getOwnPropertySymbols){var lp=Object.getOwnPropertySymbols(_d);for(sp=0;sp<lp.length;sp++)ap=lp[sp],!(np.indexOf(ap)>=0)&&Object.prototype.propertyIsEnumerable.call(_d,ap)&&(rp[ap]=_d[ap])}return rp}function _objectWithoutPropertiesLoose$1(_d,np){if(_d==null)return{};var rp={},ap=Object.keys(_d),sp,lp;for(lp=0;lp<ap.length;lp++)sp=ap[lp],!(np.indexOf(sp)>=0)&&(rp[sp]=_d[sp]);return rp}function _extends$3(){return _extends$3=Object.assign?Object.assign.bind():function(_d){for(var np=1;np<arguments.length;np++){var rp=arguments[np];for(var ap in rp)Object.prototype.hasOwnProperty.call(rp,ap)&&(_d[ap]=rp[ap])}return _d},_extends$3.apply(this,arguments)}function ownKeys$1(_d,np){var rp=Object.keys(_d);if(Object.getOwnPropertySymbols){var ap=Object.getOwnPropertySymbols(_d);np&&(ap=ap.filter(function(sp){return Object.getOwnPropertyDescriptor(_d,sp).enumerable})),rp.push.apply(rp,ap)}return rp}function _objectSpread(_d){for(var np=1;np<arguments.length;np++){var rp=arguments[np]!=null?arguments[np]:{};np%2?ownKeys$1(Object(rp),!0).forEach(function(ap){_defineProperty$3(_d,ap,rp[ap])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_d,Object.getOwnPropertyDescriptors(rp)):ownKeys$1(Object(rp)).forEach(function(ap){Object.defineProperty(_d,ap,Object.getOwnPropertyDescriptor(rp,ap))})}return _d}function _defineProperty$3(_d,np,rp){return np=_toPropertyKey$1(np),np in _d?Object.defineProperty(_d,np,{value:rp,enumerable:!0,configurable:!0,writable:!0}):_d[np]=rp,_d}function _toPropertyKey$1(_d){var np=_toPrimitive$2(_d,"string");return typeof np=="symbol"?np:String(np)}function _toPrimitive$2(_d,np){if(typeof _d!="object"||_d===null)return _d;var rp=_d[Symbol.toPrimitive];if(rp!==void 0){var ap=rp.call(_d,np||"default");if(typeof ap!="object")return ap;throw new TypeError("@@toPrimitive must return a primitive value.")}return(np==="string"?String:Number)(_d)}function Tree2Element(_d){return _d&&_d.map((np,rp)=>React.createElement(np.tag,_objectSpread({key:rp},np.attr),Tree2Element(np.child)))}function GenIcon(_d){return np=>React.createElement(IconBase,_extends$3({attr:_objectSpread({},_d.attr)},np),Tree2Element(_d.child))}function IconBase(_d){var np=rp=>{var{attr:ap,size:sp,title:lp}=_d,up=_objectWithoutProperties(_d,_excluded$9),cp=sp||rp.size||"1em",dp;return rp.className&&(dp=rp.className),_d.className&&(dp=(dp?dp+" ":"")+_d.className),React.createElement("svg",_extends$3({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},rp.attr,ap,up,{className:dp,style:_objectSpread(_objectSpread({color:_d.color||rp.color},rp.style),_d.style),height:cp,width:cp,xmlns:"http://www.w3.org/2000/svg"}),lp&&React.createElement("title",null,lp),_d.children)};return IconContext!==void 0?React.createElement(IconContext.Consumer,null,rp=>np(rp)):np(DefaultContext)}const defaultImg="/assets/login_img-6Ph5owg1.png";function isObject$8(_d){return _d!==null&&typeof _d=="object"&&"constructor"in _d&&_d.constructor===Object}function extend$3(_d,np){_d===void 0&&(_d={}),np===void 0&&(np={}),Object.keys(np).forEach(rp=>{typeof _d[rp]>"u"?_d[rp]=np[rp]:isObject$8(np[rp])&&isObject$8(_d[rp])&&Object.keys(np[rp]).length>0&&extend$3(_d[rp],np[rp])})}const ssrDocument={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function getDocument(){const _d=typeof document<"u"?document:{};return extend$3(_d,ssrDocument),_d}const ssrWindow={document:ssrDocument,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(_d){return typeof setTimeout>"u"?(_d(),null):setTimeout(_d,0)},cancelAnimationFrame(_d){typeof setTimeout>"u"||clearTimeout(_d)}};function getWindow(){const _d=typeof window<"u"?window:{};return extend$3(_d,ssrWindow),_d}function classesToTokens(_d){return _d===void 0&&(_d=""),_d.trim().split(" ").filter(np=>!!np.trim())}function deleteProps(_d){const np=_d;Object.keys(np).forEach(rp=>{try{np[rp]=null}catch{}try{delete np[rp]}catch{}})}function nextTick(_d,np){return np===void 0&&(np=0),setTimeout(_d,np)}function now(){return Date.now()}function getComputedStyle$1(_d){const np=getWindow();let rp;return np.getComputedStyle&&(rp=np.getComputedStyle(_d,null)),!rp&&_d.currentStyle&&(rp=_d.currentStyle),rp||(rp=_d.style),rp}function getTranslate(_d,np){np===void 0&&(np="x");const rp=getWindow();let ap,sp,lp;const up=getComputedStyle$1(_d);return rp.WebKitCSSMatrix?(sp=up.transform||up.webkitTransform,sp.split(",").length>6&&(sp=sp.split(", ").map(cp=>cp.replace(",",".")).join(", ")),lp=new rp.WebKitCSSMatrix(sp==="none"?"":sp)):(lp=up.MozTransform||up.OTransform||up.MsTransform||up.msTransform||up.transform||up.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),ap=lp.toString().split(",")),np==="x"&&(rp.WebKitCSSMatrix?sp=lp.m41:ap.length===16?sp=parseFloat(ap[12]):sp=parseFloat(ap[4])),np==="y"&&(rp.WebKitCSSMatrix?sp=lp.m42:ap.length===16?sp=parseFloat(ap[13]):sp=parseFloat(ap[5])),sp||0}function isObject$7(_d){return typeof _d=="object"&&_d!==null&&_d.constructor&&Object.prototype.toString.call(_d).slice(8,-1)==="Object"}function isNode(_d){return typeof window<"u"&&typeof window.HTMLElement<"u"?_d instanceof HTMLElement:_d&&(_d.nodeType===1||_d.nodeType===11)}function extend$2(){const _d=Object(arguments.length<=0?void 0:arguments[0]),np=["__proto__","constructor","prototype"];for(let rp=1;rp<arguments.length;rp+=1){const ap=rp<0||arguments.length<=rp?void 0:arguments[rp];if(ap!=null&&!isNode(ap)){const sp=Object.keys(Object(ap)).filter(lp=>np.indexOf(lp)<0);for(let lp=0,up=sp.length;lp<up;lp+=1){const cp=sp[lp],dp=Object.getOwnPropertyDescriptor(ap,cp);dp!==void 0&&dp.enumerable&&(isObject$7(_d[cp])&&isObject$7(ap[cp])?ap[cp].__swiper__?_d[cp]=ap[cp]:extend$2(_d[cp],ap[cp]):!isObject$7(_d[cp])&&isObject$7(ap[cp])?(_d[cp]={},ap[cp].__swiper__?_d[cp]=ap[cp]:extend$2(_d[cp],ap[cp])):_d[cp]=ap[cp])}}}return _d}function setCSSProperty(_d,np,rp){_d.style.setProperty(np,rp)}function animateCSSModeScroll(_d){let{swiper:np,targetPosition:rp,side:ap}=_d;const sp=getWindow(),lp=-np.translate;let up=null,cp;const dp=np.params.speed;np.wrapperEl.style.scrollSnapType="none",sp.cancelAnimationFrame(np.cssModeFrameID);const fp=rp>lp?"next":"prev",pp=(mp,gp)=>fp==="next"&&mp>=gp||fp==="prev"&&mp<=gp,hp=()=>{cp=new Date().getTime(),up===null&&(up=cp);const mp=Math.max(Math.min((cp-up)/dp,1),0),gp=.5-Math.cos(mp*Math.PI)/2;let vp=lp+gp*(rp-lp);if(pp(vp,rp)&&(vp=rp),np.wrapperEl.scrollTo({[ap]:vp}),pp(vp,rp)){np.wrapperEl.style.overflow="hidden",np.wrapperEl.style.scrollSnapType="",setTimeout(()=>{np.wrapperEl.style.overflow="",np.wrapperEl.scrollTo({[ap]:vp})}),sp.cancelAnimationFrame(np.cssModeFrameID);return}np.cssModeFrameID=sp.requestAnimationFrame(hp)};hp()}function getSlideTransformEl(_d){return _d.querySelector(".swiper-slide-transform")||_d.shadowRoot&&_d.shadowRoot.querySelector(".swiper-slide-transform")||_d}function elementChildren(_d,np){return np===void 0&&(np=""),[..._d.children].filter(rp=>rp.matches(np))}function showWarning(_d){try{console.warn(_d);return}catch{}}function createElement(_d,np){np===void 0&&(np=[]);const rp=document.createElement(_d);return rp.classList.add(...Array.isArray(np)?np:classesToTokens(np)),rp}function elementPrevAll(_d,np){const rp=[];for(;_d.previousElementSibling;){const ap=_d.previousElementSibling;np?ap.matches(np)&&rp.push(ap):rp.push(ap),_d=ap}return rp}function elementNextAll(_d,np){const rp=[];for(;_d.nextElementSibling;){const ap=_d.nextElementSibling;np?ap.matches(np)&&rp.push(ap):rp.push(ap),_d=ap}return rp}function elementStyle(_d,np){return getWindow().getComputedStyle(_d,null).getPropertyValue(np)}function elementIndex(_d){let np=_d,rp;if(np){for(rp=0;(np=np.previousSibling)!==null;)np.nodeType===1&&(rp+=1);return rp}}function elementParents(_d,np){const rp=[];let ap=_d.parentElement;for(;ap;)np?ap.matches(np)&&rp.push(ap):rp.push(ap),ap=ap.parentElement;return rp}function elementTransitionEnd(_d,np){function rp(ap){ap.target===_d&&(np.call(_d,ap),_d.removeEventListener("transitionend",rp))}np&&_d.addEventListener("transitionend",rp)}function elementOuterSize(_d,np,rp){const ap=getWindow();return rp?_d[np==="width"?"offsetWidth":"offsetHeight"]+parseFloat(ap.getComputedStyle(_d,null).getPropertyValue(np==="width"?"margin-right":"margin-top"))+parseFloat(ap.getComputedStyle(_d,null).getPropertyValue(np==="width"?"margin-left":"margin-bottom")):_d.offsetWidth}let support;function calcSupport(){const _d=getWindow(),np=getDocument();return{smoothScroll:np.documentElement&&np.documentElement.style&&"scrollBehavior"in np.documentElement.style,touch:!!("ontouchstart"in _d||_d.DocumentTouch&&np instanceof _d.DocumentTouch)}}function getSupport(){return support||(support=calcSupport()),support}let deviceCached;function calcDevice(_d){let{userAgent:np}=_d===void 0?{}:_d;const rp=getSupport(),ap=getWindow(),sp=ap.navigator.platform,lp=np||ap.navigator.userAgent,up={ios:!1,android:!1},cp=ap.screen.width,dp=ap.screen.height,fp=lp.match(/(Android);?[\s\/]+([\d.]+)?/);let pp=lp.match(/(iPad).*OS\s([\d_]+)/);const hp=lp.match(/(iPod)(.*OS\s([\d_]+))?/),mp=!pp&&lp.match(/(iPhone\sOS|iOS)\s([\d_]+)/),gp=sp==="Win32";let vp=sp==="MacIntel";const xp=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!pp&&vp&&rp.touch&&xp.indexOf(`${cp}x${dp}`)>=0&&(pp=lp.match(/(Version)\/([\d.]+)/),pp||(pp=[0,1,"13_0_0"]),vp=!1),fp&&!gp&&(up.os="android",up.android=!0),(pp||mp||hp)&&(up.os="ios",up.ios=!0),up}function getDevice(_d){return _d===void 0&&(_d={}),deviceCached||(deviceCached=calcDevice(_d)),deviceCached}let browser;function calcBrowser(){const _d=getWindow();let np=!1;function rp(){const ap=_d.navigator.userAgent.toLowerCase();return ap.indexOf("safari")>=0&&ap.indexOf("chrome")<0&&ap.indexOf("android")<0}if(rp()){const ap=String(_d.navigator.userAgent);if(ap.includes("Version/")){const[sp,lp]=ap.split("Version/")[1].split(" ")[0].split(".").map(up=>Number(up));np=sp<16||sp===16&&lp<2}}return{isSafari:np||rp(),needPerspectiveFix:np,isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(_d.navigator.userAgent)}}function getBrowser(){return browser||(browser=calcBrowser()),browser}function Resize(_d){let{swiper:np,on:rp,emit:ap}=_d;const sp=getWindow();let lp=null,up=null;const cp=()=>{!np||np.destroyed||!np.initialized||(ap("beforeResize"),ap("resize"))},dp=()=>{!np||np.destroyed||!np.initialized||(lp=new ResizeObserver(hp=>{up=sp.requestAnimationFrame(()=>{const{width:mp,height:gp}=np;let vp=mp,xp=gp;hp.forEach(Sp=>{let{contentBoxSize:yp,contentRect:bp,target:Ep}=Sp;Ep&&Ep!==np.el||(vp=bp?bp.width:(yp[0]||yp).inlineSize,xp=bp?bp.height:(yp[0]||yp).blockSize)}),(vp!==mp||xp!==gp)&&cp()})}),lp.observe(np.el))},fp=()=>{up&&sp.cancelAnimationFrame(up),lp&&lp.unobserve&&np.el&&(lp.unobserve(np.el),lp=null)},pp=()=>{!np||np.destroyed||!np.initialized||ap("orientationchange")};rp("init",()=>{if(np.params.resizeObserver&&typeof sp.ResizeObserver<"u"){dp();return}sp.addEventListener("resize",cp),sp.addEventListener("orientationchange",pp)}),rp("destroy",()=>{fp(),sp.removeEventListener("resize",cp),sp.removeEventListener("orientationchange",pp)})}function Observer(_d){let{swiper:np,extendParams:rp,on:ap,emit:sp}=_d;const lp=[],up=getWindow(),cp=function(pp,hp){hp===void 0&&(hp={});const mp=up.MutationObserver||up.WebkitMutationObserver,gp=new mp(vp=>{if(np.__preventObserver__)return;if(vp.length===1){sp("observerUpdate",vp[0]);return}const xp=function(){sp("observerUpdate",vp[0])};up.requestAnimationFrame?up.requestAnimationFrame(xp):up.setTimeout(xp,0)});gp.observe(pp,{attributes:typeof hp.attributes>"u"?!0:hp.attributes,childList:typeof hp.childList>"u"?!0:hp.childList,characterData:typeof hp.characterData>"u"?!0:hp.characterData}),lp.push(gp)},dp=()=>{if(np.params.observer){if(np.params.observeParents){const pp=elementParents(np.hostEl);for(let hp=0;hp<pp.length;hp+=1)cp(pp[hp])}cp(np.hostEl,{childList:np.params.observeSlideChildren}),cp(np.wrapperEl,{attributes:!1})}},fp=()=>{lp.forEach(pp=>{pp.disconnect()}),lp.splice(0,lp.length)};rp({observer:!1,observeParents:!1,observeSlideChildren:!1}),ap("init",dp),ap("destroy",fp)}var eventsEmitter={on(_d,np,rp){const ap=this;if(!ap.eventsListeners||ap.destroyed||typeof np!="function")return ap;const sp=rp?"unshift":"push";return _d.split(" ").forEach(lp=>{ap.eventsListeners[lp]||(ap.eventsListeners[lp]=[]),ap.eventsListeners[lp][sp](np)}),ap},once(_d,np,rp){const ap=this;if(!ap.eventsListeners||ap.destroyed||typeof np!="function")return ap;function sp(){ap.off(_d,sp),sp.__emitterProxy&&delete sp.__emitterProxy;for(var lp=arguments.length,up=new Array(lp),cp=0;cp<lp;cp++)up[cp]=arguments[cp];np.apply(ap,up)}return sp.__emitterProxy=np,ap.on(_d,sp,rp)},onAny(_d,np){const rp=this;if(!rp.eventsListeners||rp.destroyed||typeof _d!="function")return rp;const ap=np?"unshift":"push";return rp.eventsAnyListeners.indexOf(_d)<0&&rp.eventsAnyListeners[ap](_d),rp},offAny(_d){const np=this;if(!np.eventsListeners||np.destroyed||!np.eventsAnyListeners)return np;const rp=np.eventsAnyListeners.indexOf(_d);return rp>=0&&np.eventsAnyListeners.splice(rp,1),np},off(_d,np){const rp=this;return!rp.eventsListeners||rp.destroyed||!rp.eventsListeners||_d.split(" ").forEach(ap=>{typeof np>"u"?rp.eventsListeners[ap]=[]:rp.eventsListeners[ap]&&rp.eventsListeners[ap].forEach((sp,lp)=>{(sp===np||sp.__emitterProxy&&sp.__emitterProxy===np)&&rp.eventsListeners[ap].splice(lp,1)})}),rp},emit(){const _d=this;if(!_d.eventsListeners||_d.destroyed||!_d.eventsListeners)return _d;let np,rp,ap;for(var sp=arguments.length,lp=new Array(sp),up=0;up<sp;up++)lp[up]=arguments[up];return typeof lp[0]=="string"||Array.isArray(lp[0])?(np=lp[0],rp=lp.slice(1,lp.length),ap=_d):(np=lp[0].events,rp=lp[0].data,ap=lp[0].context||_d),rp.unshift(ap),(Array.isArray(np)?np:np.split(" ")).forEach(dp=>{_d.eventsAnyListeners&&_d.eventsAnyListeners.length&&_d.eventsAnyListeners.forEach(fp=>{fp.apply(ap,[dp,...rp])}),_d.eventsListeners&&_d.eventsListeners[dp]&&_d.eventsListeners[dp].forEach(fp=>{fp.apply(ap,rp)})}),_d}};function updateSize(){const _d=this;let np,rp;const ap=_d.el;typeof _d.params.width<"u"&&_d.params.width!==null?np=_d.params.width:np=ap.clientWidth,typeof _d.params.height<"u"&&_d.params.height!==null?rp=_d.params.height:rp=ap.clientHeight,!(np===0&&_d.isHorizontal()||rp===0&&_d.isVertical())&&(np=np-parseInt(elementStyle(ap,"padding-left")||0,10)-parseInt(elementStyle(ap,"padding-right")||0,10),rp=rp-parseInt(elementStyle(ap,"padding-top")||0,10)-parseInt(elementStyle(ap,"padding-bottom")||0,10),Number.isNaN(np)&&(np=0),Number.isNaN(rp)&&(rp=0),Object.assign(_d,{width:np,height:rp,size:_d.isHorizontal()?np:rp}))}function updateSlides(){const _d=this;function np(Op,jp){return parseFloat(Op.getPropertyValue(_d.getDirectionLabel(jp))||0)}const rp=_d.params,{wrapperEl:ap,slidesEl:sp,size:lp,rtlTranslate:up,wrongRTL:cp}=_d,dp=_d.virtual&&rp.virtual.enabled,fp=dp?_d.virtual.slides.length:_d.slides.length,pp=elementChildren(sp,`.${_d.params.slideClass}, swiper-slide`),hp=dp?_d.virtual.slides.length:pp.length;let mp=[];const gp=[],vp=[];let xp=rp.slidesOffsetBefore;typeof xp=="function"&&(xp=rp.slidesOffsetBefore.call(_d));let Sp=rp.slidesOffsetAfter;typeof Sp=="function"&&(Sp=rp.slidesOffsetAfter.call(_d));const yp=_d.snapGrid.length,bp=_d.slidesGrid.length;let Ep=rp.spaceBetween,wp=-xp,_p=0,Cp=0;if(typeof lp>"u")return;typeof Ep=="string"&&Ep.indexOf("%")>=0?Ep=parseFloat(Ep.replace("%",""))/100*lp:typeof Ep=="string"&&(Ep=parseFloat(Ep)),_d.virtualSize=-Ep,pp.forEach(Op=>{up?Op.style.marginLeft="":Op.style.marginRight="",Op.style.marginBottom="",Op.style.marginTop=""}),rp.centeredSlides&&rp.cssMode&&(setCSSProperty(ap,"--swiper-centered-offset-before",""),setCSSProperty(ap,"--swiper-centered-offset-after",""));const $p=rp.grid&&rp.grid.rows>1&&_d.grid;$p?_d.grid.initSlides(pp):_d.grid&&_d.grid.unsetSlides();let Rp;const Pp=rp.slidesPerView==="auto"&&rp.breakpoints&&Object.keys(rp.breakpoints).filter(Op=>typeof rp.breakpoints[Op].slidesPerView<"u").length>0;for(let Op=0;Op<hp;Op+=1){Rp=0;let jp;if(pp[Op]&&(jp=pp[Op]),$p&&_d.grid.updateSlide(Op,jp,pp),!(pp[Op]&&elementStyle(jp,"display")==="none")){if(rp.slidesPerView==="auto"){Pp&&(pp[Op].style[_d.getDirectionLabel("width")]="");const Mp=getComputedStyle(jp),Ap=jp.style.transform,Dp=jp.style.webkitTransform;if(Ap&&(jp.style.transform="none"),Dp&&(jp.style.webkitTransform="none"),rp.roundLengths)Rp=_d.isHorizontal()?elementOuterSize(jp,"width",!0):elementOuterSize(jp,"height",!0);else{const Fp=np(Mp,"width"),Ip=np(Mp,"padding-left"),kp=np(Mp,"padding-right"),Tp=np(Mp,"margin-left"),Np=np(Mp,"margin-right"),Lp=Mp.getPropertyValue("box-sizing");if(Lp&&Lp==="border-box")Rp=Fp+Tp+Np;else{const{clientWidth:Vp,offsetWidth:zp}=jp;Rp=Fp+Ip+kp+Tp+Np+(zp-Vp)}}Ap&&(jp.style.transform=Ap),Dp&&(jp.style.webkitTransform=Dp),rp.roundLengths&&(Rp=Math.floor(Rp))}else Rp=(lp-(rp.slidesPerView-1)*Ep)/rp.slidesPerView,rp.roundLengths&&(Rp=Math.floor(Rp)),pp[Op]&&(pp[Op].style[_d.getDirectionLabel("width")]=`${Rp}px`);pp[Op]&&(pp[Op].swiperSlideSize=Rp),vp.push(Rp),rp.centeredSlides?(wp=wp+Rp/2+_p/2+Ep,_p===0&&Op!==0&&(wp=wp-lp/2-Ep),Op===0&&(wp=wp-lp/2-Ep),Math.abs(wp)<1/1e3&&(wp=0),rp.roundLengths&&(wp=Math.floor(wp)),Cp%rp.slidesPerGroup===0&&mp.push(wp),gp.push(wp)):(rp.roundLengths&&(wp=Math.floor(wp)),(Cp-Math.min(_d.params.slidesPerGroupSkip,Cp))%_d.params.slidesPerGroup===0&&mp.push(wp),gp.push(wp),wp=wp+Rp+Ep),_d.virtualSize+=Rp+Ep,_p=Rp,Cp+=1}}if(_d.virtualSize=Math.max(_d.virtualSize,lp)+Sp,up&&cp&&(rp.effect==="slide"||rp.effect==="coverflow")&&(ap.style.width=`${_d.virtualSize+Ep}px`),rp.setWrapperSize&&(ap.style[_d.getDirectionLabel("width")]=`${_d.virtualSize+Ep}px`),$p&&_d.grid.updateWrapperSize(Rp,mp),!rp.centeredSlides){const Op=[];for(let jp=0;jp<mp.length;jp+=1){let Mp=mp[jp];rp.roundLengths&&(Mp=Math.floor(Mp)),mp[jp]<=_d.virtualSize-lp&&Op.push(Mp)}mp=Op,Math.floor(_d.virtualSize-lp)-Math.floor(mp[mp.length-1])>1&&mp.push(_d.virtualSize-lp)}if(dp&&rp.loop){const Op=vp[0]+Ep;if(rp.slidesPerGroup>1){const jp=Math.ceil((_d.virtual.slidesBefore+_d.virtual.slidesAfter)/rp.slidesPerGroup),Mp=Op*rp.slidesPerGroup;for(let Ap=0;Ap<jp;Ap+=1)mp.push(mp[mp.length-1]+Mp)}for(let jp=0;jp<_d.virtual.slidesBefore+_d.virtual.slidesAfter;jp+=1)rp.slidesPerGroup===1&&mp.push(mp[mp.length-1]+Op),gp.push(gp[gp.length-1]+Op),_d.virtualSize+=Op}if(mp.length===0&&(mp=[0]),Ep!==0){const Op=_d.isHorizontal()&&up?"marginLeft":_d.getDirectionLabel("marginRight");pp.filter((jp,Mp)=>!rp.cssMode||rp.loop?!0:Mp!==pp.length-1).forEach(jp=>{jp.style[Op]=`${Ep}px`})}if(rp.centeredSlides&&rp.centeredSlidesBounds){let Op=0;vp.forEach(Mp=>{Op+=Mp+(Ep||0)}),Op-=Ep;const jp=Op-lp;mp=mp.map(Mp=>Mp<=0?-xp:Mp>jp?jp+Sp:Mp)}if(rp.centerInsufficientSlides){let Op=0;if(vp.forEach(jp=>{Op+=jp+(Ep||0)}),Op-=Ep,Op<lp){const jp=(lp-Op)/2;mp.forEach((Mp,Ap)=>{mp[Ap]=Mp-jp}),gp.forEach((Mp,Ap)=>{gp[Ap]=Mp+jp})}}if(Object.assign(_d,{slides:pp,snapGrid:mp,slidesGrid:gp,slidesSizesGrid:vp}),rp.centeredSlides&&rp.cssMode&&!rp.centeredSlidesBounds){setCSSProperty(ap,"--swiper-centered-offset-before",`${-mp[0]}px`),setCSSProperty(ap,"--swiper-centered-offset-after",`${_d.size/2-vp[vp.length-1]/2}px`);const Op=-_d.snapGrid[0],jp=-_d.slidesGrid[0];_d.snapGrid=_d.snapGrid.map(Mp=>Mp+Op),_d.slidesGrid=_d.slidesGrid.map(Mp=>Mp+jp)}if(hp!==fp&&_d.emit("slidesLengthChange"),mp.length!==yp&&(_d.params.watchOverflow&&_d.checkOverflow(),_d.emit("snapGridLengthChange")),gp.length!==bp&&_d.emit("slidesGridLengthChange"),rp.watchSlidesProgress&&_d.updateSlidesOffset(),_d.emit("slidesUpdated"),!dp&&!rp.cssMode&&(rp.effect==="slide"||rp.effect==="fade")){const Op=`${rp.containerModifierClass}backface-hidden`,jp=_d.el.classList.contains(Op);hp<=rp.maxBackfaceHiddenSlides?jp||_d.el.classList.add(Op):jp&&_d.el.classList.remove(Op)}}function updateAutoHeight(_d){const np=this,rp=[],ap=np.virtual&&np.params.virtual.enabled;let sp=0,lp;typeof _d=="number"?np.setTransition(_d):_d===!0&&np.setTransition(np.params.speed);const up=cp=>ap?np.slides[np.getSlideIndexByData(cp)]:np.slides[cp];if(np.params.slidesPerView!=="auto"&&np.params.slidesPerView>1)if(np.params.centeredSlides)(np.visibleSlides||[]).forEach(cp=>{rp.push(cp)});else for(lp=0;lp<Math.ceil(np.params.slidesPerView);lp+=1){const cp=np.activeIndex+lp;if(cp>np.slides.length&&!ap)break;rp.push(up(cp))}else rp.push(up(np.activeIndex));for(lp=0;lp<rp.length;lp+=1)if(typeof rp[lp]<"u"){const cp=rp[lp].offsetHeight;sp=cp>sp?cp:sp}(sp||sp===0)&&(np.wrapperEl.style.height=`${sp}px`)}function updateSlidesOffset(){const _d=this,np=_d.slides,rp=_d.isElement?_d.isHorizontal()?_d.wrapperEl.offsetLeft:_d.wrapperEl.offsetTop:0;for(let ap=0;ap<np.length;ap+=1)np[ap].swiperSlideOffset=(_d.isHorizontal()?np[ap].offsetLeft:np[ap].offsetTop)-rp-_d.cssOverflowAdjustment()}function updateSlidesProgress(_d){_d===void 0&&(_d=this&&this.translate||0);const np=this,rp=np.params,{slides:ap,rtlTranslate:sp,snapGrid:lp}=np;if(ap.length===0)return;typeof ap[0].swiperSlideOffset>"u"&&np.updateSlidesOffset();let up=-_d;sp&&(up=_d),ap.forEach(dp=>{dp.classList.remove(rp.slideVisibleClass,rp.slideFullyVisibleClass)}),np.visibleSlidesIndexes=[],np.visibleSlides=[];let cp=rp.spaceBetween;typeof cp=="string"&&cp.indexOf("%")>=0?cp=parseFloat(cp.replace("%",""))/100*np.size:typeof cp=="string"&&(cp=parseFloat(cp));for(let dp=0;dp<ap.length;dp+=1){const fp=ap[dp];let pp=fp.swiperSlideOffset;rp.cssMode&&rp.centeredSlides&&(pp-=ap[0].swiperSlideOffset);const hp=(up+(rp.centeredSlides?np.minTranslate():0)-pp)/(fp.swiperSlideSize+cp),mp=(up-lp[0]+(rp.centeredSlides?np.minTranslate():0)-pp)/(fp.swiperSlideSize+cp),gp=-(up-pp),vp=gp+np.slidesSizesGrid[dp],xp=gp>=0&&gp<=np.size-np.slidesSizesGrid[dp];(gp>=0&&gp<np.size-1||vp>1&&vp<=np.size||gp<=0&&vp>=np.size)&&(np.visibleSlides.push(fp),np.visibleSlidesIndexes.push(dp),ap[dp].classList.add(rp.slideVisibleClass)),xp&&ap[dp].classList.add(rp.slideFullyVisibleClass),fp.progress=sp?-hp:hp,fp.originalProgress=sp?-mp:mp}}function updateProgress(_d){const np=this;if(typeof _d>"u"){const pp=np.rtlTranslate?-1:1;_d=np&&np.translate&&np.translate*pp||0}const rp=np.params,ap=np.maxTranslate()-np.minTranslate();let{progress:sp,isBeginning:lp,isEnd:up,progressLoop:cp}=np;const dp=lp,fp=up;if(ap===0)sp=0,lp=!0,up=!0;else{sp=(_d-np.minTranslate())/ap;const pp=Math.abs(_d-np.minTranslate())<1,hp=Math.abs(_d-np.maxTranslate())<1;lp=pp||sp<=0,up=hp||sp>=1,pp&&(sp=0),hp&&(sp=1)}if(rp.loop){const pp=np.getSlideIndexByData(0),hp=np.getSlideIndexByData(np.slides.length-1),mp=np.slidesGrid[pp],gp=np.slidesGrid[hp],vp=np.slidesGrid[np.slidesGrid.length-1],xp=Math.abs(_d);xp>=mp?cp=(xp-mp)/vp:cp=(xp+vp-gp)/vp,cp>1&&(cp-=1)}Object.assign(np,{progress:sp,progressLoop:cp,isBeginning:lp,isEnd:up}),(rp.watchSlidesProgress||rp.centeredSlides&&rp.autoHeight)&&np.updateSlidesProgress(_d),lp&&!dp&&np.emit("reachBeginning toEdge"),up&&!fp&&np.emit("reachEnd toEdge"),(dp&&!lp||fp&&!up)&&np.emit("fromEdge"),np.emit("progress",sp)}function updateSlidesClasses(){const _d=this,{slides:np,params:rp,slidesEl:ap,activeIndex:sp}=_d,lp=_d.virtual&&rp.virtual.enabled,up=_d.grid&&rp.grid&&rp.grid.rows>1,cp=hp=>elementChildren(ap,`.${rp.slideClass}${hp}, swiper-slide${hp}`)[0];np.forEach(hp=>{hp.classList.remove(rp.slideActiveClass,rp.slideNextClass,rp.slidePrevClass)});let dp,fp,pp;if(lp)if(rp.loop){let hp=sp-_d.virtual.slidesBefore;hp<0&&(hp=_d.virtual.slides.length+hp),hp>=_d.virtual.slides.length&&(hp-=_d.virtual.slides.length),dp=cp(`[data-swiper-slide-index="${hp}"]`)}else dp=cp(`[data-swiper-slide-index="${sp}"]`);else up?(dp=np.filter(hp=>hp.column===sp)[0],pp=np.filter(hp=>hp.column===sp+1)[0],fp=np.filter(hp=>hp.column===sp-1)[0]):dp=np[sp];dp&&(dp.classList.add(rp.slideActiveClass),up?(pp&&pp.classList.add(rp.slideNextClass),fp&&fp.classList.add(rp.slidePrevClass)):(pp=elementNextAll(dp,`.${rp.slideClass}, swiper-slide`)[0],rp.loop&&!pp&&(pp=np[0]),pp&&pp.classList.add(rp.slideNextClass),fp=elementPrevAll(dp,`.${rp.slideClass}, swiper-slide`)[0],rp.loop&&!fp===0&&(fp=np[np.length-1]),fp&&fp.classList.add(rp.slidePrevClass))),_d.emitSlidesClasses()}const processLazyPreloader=(_d,np)=>{if(!_d||_d.destroyed||!_d.params)return;const rp=()=>_d.isElement?"swiper-slide":`.${_d.params.slideClass}`,ap=np.closest(rp());if(ap){let sp=ap.querySelector(`.${_d.params.lazyPreloaderClass}`);!sp&&_d.isElement&&(ap.shadowRoot?sp=ap.shadowRoot.querySelector(`.${_d.params.lazyPreloaderClass}`):requestAnimationFrame(()=>{ap.shadowRoot&&(sp=ap.shadowRoot.querySelector(`.${_d.params.lazyPreloaderClass}`),sp&&sp.remove())})),sp&&sp.remove()}},unlazy=(_d,np)=>{if(!_d.slides[np])return;const rp=_d.slides[np].querySelector('[loading="lazy"]');rp&&rp.removeAttribute("loading")},preload=_d=>{if(!_d||_d.destroyed||!_d.params)return;let np=_d.params.lazyPreloadPrevNext;const rp=_d.slides.length;if(!rp||!np||np<0)return;np=Math.min(np,rp);const ap=_d.params.slidesPerView==="auto"?_d.slidesPerViewDynamic():Math.ceil(_d.params.slidesPerView),sp=_d.activeIndex;if(_d.params.grid&&_d.params.grid.rows>1){const up=sp,cp=[up-np];cp.push(...Array.from({length:np}).map((dp,fp)=>up+ap+fp)),_d.slides.forEach((dp,fp)=>{cp.includes(dp.column)&&unlazy(_d,fp)});return}const lp=sp+ap-1;if(_d.params.rewind||_d.params.loop)for(let up=sp-np;up<=lp+np;up+=1){const cp=(up%rp+rp)%rp;(cp<sp||cp>lp)&&unlazy(_d,cp)}else for(let up=Math.max(sp-np,0);up<=Math.min(lp+np,rp-1);up+=1)up!==sp&&(up>lp||up<sp)&&unlazy(_d,up)};function getActiveIndexByTranslate(_d){const{slidesGrid:np,params:rp}=_d,ap=_d.rtlTranslate?_d.translate:-_d.translate;let sp;for(let lp=0;lp<np.length;lp+=1)typeof np[lp+1]<"u"?ap>=np[lp]&&ap<np[lp+1]-(np[lp+1]-np[lp])/2?sp=lp:ap>=np[lp]&&ap<np[lp+1]&&(sp=lp+1):ap>=np[lp]&&(sp=lp);return rp.normalizeSlideIndex&&(sp<0||typeof sp>"u")&&(sp=0),sp}function updateActiveIndex(_d){const np=this,rp=np.rtlTranslate?np.translate:-np.translate,{snapGrid:ap,params:sp,activeIndex:lp,realIndex:up,snapIndex:cp}=np;let dp=_d,fp;const pp=gp=>{let vp=gp-np.virtual.slidesBefore;return vp<0&&(vp=np.virtual.slides.length+vp),vp>=np.virtual.slides.length&&(vp-=np.virtual.slides.length),vp};if(typeof dp>"u"&&(dp=getActiveIndexByTranslate(np)),ap.indexOf(rp)>=0)fp=ap.indexOf(rp);else{const gp=Math.min(sp.slidesPerGroupSkip,dp);fp=gp+Math.floor((dp-gp)/sp.slidesPerGroup)}if(fp>=ap.length&&(fp=ap.length-1),dp===lp&&!np.params.loop){fp!==cp&&(np.snapIndex=fp,np.emit("snapIndexChange"));return}if(dp===lp&&np.params.loop&&np.virtual&&np.params.virtual.enabled){np.realIndex=pp(dp);return}const hp=np.grid&&sp.grid&&sp.grid.rows>1;let mp;if(np.virtual&&sp.virtual.enabled&&sp.loop)mp=pp(dp);else if(hp){const gp=np.slides.filter(xp=>xp.column===dp)[0];let vp=parseInt(gp.getAttribute("data-swiper-slide-index"),10);Number.isNaN(vp)&&(vp=Math.max(np.slides.indexOf(gp),0)),mp=Math.floor(vp/sp.grid.rows)}else if(np.slides[dp]){const gp=np.slides[dp].getAttribute("data-swiper-slide-index");gp?mp=parseInt(gp,10):mp=dp}else mp=dp;Object.assign(np,{previousSnapIndex:cp,snapIndex:fp,previousRealIndex:up,realIndex:mp,previousIndex:lp,activeIndex:dp}),np.initialized&&preload(np),np.emit("activeIndexChange"),np.emit("snapIndexChange"),(np.initialized||np.params.runCallbacksOnInit)&&(up!==mp&&np.emit("realIndexChange"),np.emit("slideChange"))}function updateClickedSlide(_d,np){const rp=this,ap=rp.params;let sp=_d.closest(`.${ap.slideClass}, swiper-slide`);!sp&&rp.isElement&&np&&np.length>1&&np.includes(_d)&&[...np.slice(np.indexOf(_d)+1,np.length)].forEach(cp=>{!sp&&cp.matches&&cp.matches(`.${ap.slideClass}, swiper-slide`)&&(sp=cp)});let lp=!1,up;if(sp){for(let cp=0;cp<rp.slides.length;cp+=1)if(rp.slides[cp]===sp){lp=!0,up=cp;break}}if(sp&&lp)rp.clickedSlide=sp,rp.virtual&&rp.params.virtual.enabled?rp.clickedIndex=parseInt(sp.getAttribute("data-swiper-slide-index"),10):rp.clickedIndex=up;else{rp.clickedSlide=void 0,rp.clickedIndex=void 0;return}ap.slideToClickedSlide&&rp.clickedIndex!==void 0&&rp.clickedIndex!==rp.activeIndex&&rp.slideToClickedSlide()}var update={updateSize,updateSlides,updateAutoHeight,updateSlidesOffset,updateSlidesProgress,updateProgress,updateSlidesClasses,updateActiveIndex,updateClickedSlide};function getSwiperTranslate(_d){_d===void 0&&(_d=this.isHorizontal()?"x":"y");const np=this,{params:rp,rtlTranslate:ap,translate:sp,wrapperEl:lp}=np;if(rp.virtualTranslate)return ap?-sp:sp;if(rp.cssMode)return sp;let up=getTranslate(lp,_d);return up+=np.cssOverflowAdjustment(),ap&&(up=-up),up||0}function setTranslate(_d,np){const rp=this,{rtlTranslate:ap,params:sp,wrapperEl:lp,progress:up}=rp;let cp=0,dp=0;const fp=0;rp.isHorizontal()?cp=ap?-_d:_d:dp=_d,sp.roundLengths&&(cp=Math.floor(cp),dp=Math.floor(dp)),rp.previousTranslate=rp.translate,rp.translate=rp.isHorizontal()?cp:dp,sp.cssMode?lp[rp.isHorizontal()?"scrollLeft":"scrollTop"]=rp.isHorizontal()?-cp:-dp:sp.virtualTranslate||(rp.isHorizontal()?cp-=rp.cssOverflowAdjustment():dp-=rp.cssOverflowAdjustment(),lp.style.transform=`translate3d(${cp}px, ${dp}px, ${fp}px)`);let pp;const hp=rp.maxTranslate()-rp.minTranslate();hp===0?pp=0:pp=(_d-rp.minTranslate())/hp,pp!==up&&rp.updateProgress(_d),rp.emit("setTranslate",rp.translate,np)}function minTranslate(){return-this.snapGrid[0]}function maxTranslate(){return-this.snapGrid[this.snapGrid.length-1]}function translateTo(_d,np,rp,ap,sp){_d===void 0&&(_d=0),np===void 0&&(np=this.params.speed),rp===void 0&&(rp=!0),ap===void 0&&(ap=!0);const lp=this,{params:up,wrapperEl:cp}=lp;if(lp.animating&&up.preventInteractionOnTransition)return!1;const dp=lp.minTranslate(),fp=lp.maxTranslate();let pp;if(ap&&_d>dp?pp=dp:ap&&_d<fp?pp=fp:pp=_d,lp.updateProgress(pp),up.cssMode){const hp=lp.isHorizontal();if(np===0)cp[hp?"scrollLeft":"scrollTop"]=-pp;else{if(!lp.support.smoothScroll)return animateCSSModeScroll({swiper:lp,targetPosition:-pp,side:hp?"left":"top"}),!0;cp.scrollTo({[hp?"left":"top"]:-pp,behavior:"smooth"})}return!0}return np===0?(lp.setTransition(0),lp.setTranslate(pp),rp&&(lp.emit("beforeTransitionStart",np,sp),lp.emit("transitionEnd"))):(lp.setTransition(np),lp.setTranslate(pp),rp&&(lp.emit("beforeTransitionStart",np,sp),lp.emit("transitionStart")),lp.animating||(lp.animating=!0,lp.onTranslateToWrapperTransitionEnd||(lp.onTranslateToWrapperTransitionEnd=function(mp){!lp||lp.destroyed||mp.target===this&&(lp.wrapperEl.removeEventListener("transitionend",lp.onTranslateToWrapperTransitionEnd),lp.onTranslateToWrapperTransitionEnd=null,delete lp.onTranslateToWrapperTransitionEnd,rp&&lp.emit("transitionEnd"))}),lp.wrapperEl.addEventListener("transitionend",lp.onTranslateToWrapperTransitionEnd))),!0}var translate={getTranslate:getSwiperTranslate,setTranslate,minTranslate,maxTranslate,translateTo};function setTransition(_d,np){const rp=this;rp.params.cssMode||(rp.wrapperEl.style.transitionDuration=`${_d}ms`,rp.wrapperEl.style.transitionDelay=_d===0?"0ms":""),rp.emit("setTransition",_d,np)}function transitionEmit(_d){let{swiper:np,runCallbacks:rp,direction:ap,step:sp}=_d;const{activeIndex:lp,previousIndex:up}=np;let cp=ap;if(cp||(lp>up?cp="next":lp<up?cp="prev":cp="reset"),np.emit(`transition${sp}`),rp&&lp!==up){if(cp==="reset"){np.emit(`slideResetTransition${sp}`);return}np.emit(`slideChangeTransition${sp}`),cp==="next"?np.emit(`slideNextTransition${sp}`):np.emit(`slidePrevTransition${sp}`)}}function transitionStart(_d,np){_d===void 0&&(_d=!0);const rp=this,{params:ap}=rp;ap.cssMode||(ap.autoHeight&&rp.updateAutoHeight(),transitionEmit({swiper:rp,runCallbacks:_d,direction:np,step:"Start"}))}function transitionEnd(_d,np){_d===void 0&&(_d=!0);const rp=this,{params:ap}=rp;rp.animating=!1,!ap.cssMode&&(rp.setTransition(0),transitionEmit({swiper:rp,runCallbacks:_d,direction:np,step:"End"}))}var transition={setTransition,transitionStart,transitionEnd};function slideTo(_d,np,rp,ap,sp){_d===void 0&&(_d=0),np===void 0&&(np=this.params.speed),rp===void 0&&(rp=!0),typeof _d=="string"&&(_d=parseInt(_d,10));const lp=this;let up=_d;up<0&&(up=0);const{params:cp,snapGrid:dp,slidesGrid:fp,previousIndex:pp,activeIndex:hp,rtlTranslate:mp,wrapperEl:gp,enabled:vp}=lp;if(lp.animating&&cp.preventInteractionOnTransition||!vp&&!ap&&!sp)return!1;const xp=Math.min(lp.params.slidesPerGroupSkip,up);let Sp=xp+Math.floor((up-xp)/lp.params.slidesPerGroup);Sp>=dp.length&&(Sp=dp.length-1);const yp=-dp[Sp];if(cp.normalizeSlideIndex)for(let Ep=0;Ep<fp.length;Ep+=1){const wp=-Math.floor(yp*100),_p=Math.floor(fp[Ep]*100),Cp=Math.floor(fp[Ep+1]*100);typeof fp[Ep+1]<"u"?wp>=_p&&wp<Cp-(Cp-_p)/2?up=Ep:wp>=_p&&wp<Cp&&(up=Ep+1):wp>=_p&&(up=Ep)}if(lp.initialized&&up!==hp&&(!lp.allowSlideNext&&(mp?yp>lp.translate&&yp>lp.minTranslate():yp<lp.translate&&yp<lp.minTranslate())||!lp.allowSlidePrev&&yp>lp.translate&&yp>lp.maxTranslate()&&(hp||0)!==up))return!1;up!==(pp||0)&&rp&&lp.emit("beforeSlideChangeStart"),lp.updateProgress(yp);let bp;if(up>hp?bp="next":up<hp?bp="prev":bp="reset",mp&&-yp===lp.translate||!mp&&yp===lp.translate)return lp.updateActiveIndex(up),cp.autoHeight&&lp.updateAutoHeight(),lp.updateSlidesClasses(),cp.effect!=="slide"&&lp.setTranslate(yp),bp!=="reset"&&(lp.transitionStart(rp,bp),lp.transitionEnd(rp,bp)),!1;if(cp.cssMode){const Ep=lp.isHorizontal(),wp=mp?yp:-yp;if(np===0){const _p=lp.virtual&&lp.params.virtual.enabled;_p&&(lp.wrapperEl.style.scrollSnapType="none",lp._immediateVirtual=!0),_p&&!lp._cssModeVirtualInitialSet&&lp.params.initialSlide>0?(lp._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{gp[Ep?"scrollLeft":"scrollTop"]=wp})):gp[Ep?"scrollLeft":"scrollTop"]=wp,_p&&requestAnimationFrame(()=>{lp.wrapperEl.style.scrollSnapType="",lp._immediateVirtual=!1})}else{if(!lp.support.smoothScroll)return animateCSSModeScroll({swiper:lp,targetPosition:wp,side:Ep?"left":"top"}),!0;gp.scrollTo({[Ep?"left":"top"]:wp,behavior:"smooth"})}return!0}return lp.setTransition(np),lp.setTranslate(yp),lp.updateActiveIndex(up),lp.updateSlidesClasses(),lp.emit("beforeTransitionStart",np,ap),lp.transitionStart(rp,bp),np===0?lp.transitionEnd(rp,bp):lp.animating||(lp.animating=!0,lp.onSlideToWrapperTransitionEnd||(lp.onSlideToWrapperTransitionEnd=function(wp){!lp||lp.destroyed||wp.target===this&&(lp.wrapperEl.removeEventListener("transitionend",lp.onSlideToWrapperTransitionEnd),lp.onSlideToWrapperTransitionEnd=null,delete lp.onSlideToWrapperTransitionEnd,lp.transitionEnd(rp,bp))}),lp.wrapperEl.addEventListener("transitionend",lp.onSlideToWrapperTransitionEnd)),!0}function slideToLoop(_d,np,rp,ap){_d===void 0&&(_d=0),np===void 0&&(np=this.params.speed),rp===void 0&&(rp=!0),typeof _d=="string"&&(_d=parseInt(_d,10));const sp=this,lp=sp.grid&&sp.params.grid&&sp.params.grid.rows>1;let up=_d;if(sp.params.loop)if(sp.virtual&&sp.params.virtual.enabled)up=up+sp.virtual.slidesBefore;else{let cp;if(lp){const mp=up*sp.params.grid.rows;cp=sp.slides.filter(gp=>gp.getAttribute("data-swiper-slide-index")*1===mp)[0].column}else cp=sp.getSlideIndexByData(up);const dp=lp?Math.ceil(sp.slides.length/sp.params.grid.rows):sp.slides.length,{centeredSlides:fp}=sp.params;let pp=sp.params.slidesPerView;pp==="auto"?pp=sp.slidesPerViewDynamic():(pp=Math.ceil(parseFloat(sp.params.slidesPerView,10)),fp&&pp%2===0&&(pp=pp+1));let hp=dp-cp<pp;if(fp&&(hp=hp||cp<Math.ceil(pp/2)),hp){const mp=fp?cp<sp.activeIndex?"prev":"next":cp-sp.activeIndex-1<sp.params.slidesPerView?"next":"prev";sp.loopFix({direction:mp,slideTo:!0,activeSlideIndex:mp==="next"?cp+1:cp-dp+1,slideRealIndex:mp==="next"?sp.realIndex:void 0})}if(lp){const mp=up*sp.params.grid.rows;up=sp.slides.filter(gp=>gp.getAttribute("data-swiper-slide-index")*1===mp)[0].column}else up=sp.getSlideIndexByData(up)}return requestAnimationFrame(()=>{sp.slideTo(up,np,rp,ap)}),sp}function slideNext(_d,np,rp){_d===void 0&&(_d=this.params.speed),np===void 0&&(np=!0);const ap=this,{enabled:sp,params:lp,animating:up}=ap;if(!sp)return ap;let cp=lp.slidesPerGroup;lp.slidesPerView==="auto"&&lp.slidesPerGroup===1&&lp.slidesPerGroupAuto&&(cp=Math.max(ap.slidesPerViewDynamic("current",!0),1));const dp=ap.activeIndex<lp.slidesPerGroupSkip?1:cp,fp=ap.virtual&&lp.virtual.enabled;if(lp.loop){if(up&&!fp&&lp.loopPreventsSliding)return!1;if(ap.loopFix({direction:"next"}),ap._clientLeft=ap.wrapperEl.clientLeft,ap.activeIndex===ap.slides.length-1&&lp.cssMode)return requestAnimationFrame(()=>{ap.slideTo(ap.activeIndex+dp,_d,np,rp)}),!0}return lp.rewind&&ap.isEnd?ap.slideTo(0,_d,np,rp):ap.slideTo(ap.activeIndex+dp,_d,np,rp)}function slidePrev(_d,np,rp){_d===void 0&&(_d=this.params.speed),np===void 0&&(np=!0);const ap=this,{params:sp,snapGrid:lp,slidesGrid:up,rtlTranslate:cp,enabled:dp,animating:fp}=ap;if(!dp)return ap;const pp=ap.virtual&&sp.virtual.enabled;if(sp.loop){if(fp&&!pp&&sp.loopPreventsSliding)return!1;ap.loopFix({direction:"prev"}),ap._clientLeft=ap.wrapperEl.clientLeft}const hp=cp?ap.translate:-ap.translate;function mp(yp){return yp<0?-Math.floor(Math.abs(yp)):Math.floor(yp)}const gp=mp(hp),vp=lp.map(yp=>mp(yp));let xp=lp[vp.indexOf(gp)-1];if(typeof xp>"u"&&sp.cssMode){let yp;lp.forEach((bp,Ep)=>{gp>=bp&&(yp=Ep)}),typeof yp<"u"&&(xp=lp[yp>0?yp-1:yp])}let Sp=0;if(typeof xp<"u"&&(Sp=up.indexOf(xp),Sp<0&&(Sp=ap.activeIndex-1),sp.slidesPerView==="auto"&&sp.slidesPerGroup===1&&sp.slidesPerGroupAuto&&(Sp=Sp-ap.slidesPerViewDynamic("previous",!0)+1,Sp=Math.max(Sp,0))),sp.rewind&&ap.isBeginning){const yp=ap.params.virtual&&ap.params.virtual.enabled&&ap.virtual?ap.virtual.slides.length-1:ap.slides.length-1;return ap.slideTo(yp,_d,np,rp)}else if(sp.loop&&ap.activeIndex===0&&sp.cssMode)return requestAnimationFrame(()=>{ap.slideTo(Sp,_d,np,rp)}),!0;return ap.slideTo(Sp,_d,np,rp)}function slideReset(_d,np,rp){_d===void 0&&(_d=this.params.speed),np===void 0&&(np=!0);const ap=this;return ap.slideTo(ap.activeIndex,_d,np,rp)}function slideToClosest(_d,np,rp,ap){_d===void 0&&(_d=this.params.speed),np===void 0&&(np=!0),ap===void 0&&(ap=.5);const sp=this;let lp=sp.activeIndex;const up=Math.min(sp.params.slidesPerGroupSkip,lp),cp=up+Math.floor((lp-up)/sp.params.slidesPerGroup),dp=sp.rtlTranslate?sp.translate:-sp.translate;if(dp>=sp.snapGrid[cp]){const fp=sp.snapGrid[cp],pp=sp.snapGrid[cp+1];dp-fp>(pp-fp)*ap&&(lp+=sp.params.slidesPerGroup)}else{const fp=sp.snapGrid[cp-1],pp=sp.snapGrid[cp];dp-fp<=(pp-fp)*ap&&(lp-=sp.params.slidesPerGroup)}return lp=Math.max(lp,0),lp=Math.min(lp,sp.slidesGrid.length-1),sp.slideTo(lp,_d,np,rp)}function slideToClickedSlide(){const _d=this,{params:np,slidesEl:rp}=_d,ap=np.slidesPerView==="auto"?_d.slidesPerViewDynamic():np.slidesPerView;let sp=_d.clickedIndex,lp;const up=_d.isElement?"swiper-slide":`.${np.slideClass}`;if(np.loop){if(_d.animating)return;lp=parseInt(_d.clickedSlide.getAttribute("data-swiper-slide-index"),10),np.centeredSlides?sp<_d.loopedSlides-ap/2||sp>_d.slides.length-_d.loopedSlides+ap/2?(_d.loopFix(),sp=_d.getSlideIndex(elementChildren(rp,`${up}[data-swiper-slide-index="${lp}"]`)[0]),nextTick(()=>{_d.slideTo(sp)})):_d.slideTo(sp):sp>_d.slides.length-ap?(_d.loopFix(),sp=_d.getSlideIndex(elementChildren(rp,`${up}[data-swiper-slide-index="${lp}"]`)[0]),nextTick(()=>{_d.slideTo(sp)})):_d.slideTo(sp)}else _d.slideTo(sp)}var slide={slideTo,slideToLoop,slideNext,slidePrev,slideReset,slideToClosest,slideToClickedSlide};function loopCreate(_d){const np=this,{params:rp,slidesEl:ap}=np;if(!rp.loop||np.virtual&&np.params.virtual.enabled)return;const sp=()=>{elementChildren(ap,`.${rp.slideClass}, swiper-slide`).forEach((hp,mp)=>{hp.setAttribute("data-swiper-slide-index",mp)})},lp=np.grid&&rp.grid&&rp.grid.rows>1,up=rp.slidesPerGroup*(lp?rp.grid.rows:1),cp=np.slides.length%up!==0,dp=lp&&np.slides.length%rp.grid.rows!==0,fp=pp=>{for(let hp=0;hp<pp;hp+=1){const mp=np.isElement?createElement("swiper-slide",[rp.slideBlankClass]):createElement("div",[rp.slideClass,rp.slideBlankClass]);np.slidesEl.append(mp)}};if(cp){if(rp.loopAddBlankSlides){const pp=up-np.slides.length%up;fp(pp),np.recalcSlides(),np.updateSlides()}else showWarning("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");sp()}else if(dp){if(rp.loopAddBlankSlides){const pp=rp.grid.rows-np.slides.length%rp.grid.rows;fp(pp),np.recalcSlides(),np.updateSlides()}else showWarning("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");sp()}else sp();np.loopFix({slideRealIndex:_d,direction:rp.centeredSlides?void 0:"next"})}function loopFix(_d){let{slideRealIndex:np,slideTo:rp=!0,direction:ap,setTranslate:sp,activeSlideIndex:lp,byController:up,byMousewheel:cp}=_d===void 0?{}:_d;const dp=this;if(!dp.params.loop)return;dp.emit("beforeLoopFix");const{slides:fp,allowSlidePrev:pp,allowSlideNext:hp,slidesEl:mp,params:gp}=dp,{centeredSlides:vp}=gp;if(dp.allowSlidePrev=!0,dp.allowSlideNext=!0,dp.virtual&&gp.virtual.enabled){rp&&(!gp.centeredSlides&&dp.snapIndex===0?dp.slideTo(dp.virtual.slides.length,0,!1,!0):gp.centeredSlides&&dp.snapIndex<gp.slidesPerView?dp.slideTo(dp.virtual.slides.length+dp.snapIndex,0,!1,!0):dp.snapIndex===dp.snapGrid.length-1&&dp.slideTo(dp.virtual.slidesBefore,0,!1,!0)),dp.allowSlidePrev=pp,dp.allowSlideNext=hp,dp.emit("loopFix");return}let xp=gp.slidesPerView;xp==="auto"?xp=dp.slidesPerViewDynamic():(xp=Math.ceil(parseFloat(gp.slidesPerView,10)),vp&&xp%2===0&&(xp=xp+1));const Sp=gp.slidesPerGroupAuto?xp:gp.slidesPerGroup;let yp=Sp;yp%Sp!==0&&(yp+=Sp-yp%Sp),yp+=gp.loopAdditionalSlides,dp.loopedSlides=yp;const bp=dp.grid&&gp.grid&&gp.grid.rows>1;fp.length<xp+yp?showWarning("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled and not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):bp&&gp.grid.fill==="row"&&showWarning("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`");const Ep=[],wp=[];let _p=dp.activeIndex;typeof lp>"u"?lp=dp.getSlideIndex(fp.filter(Ap=>Ap.classList.contains(gp.slideActiveClass))[0]):_p=lp;const Cp=ap==="next"||!ap,$p=ap==="prev"||!ap;let Rp=0,Pp=0;const Op=bp?Math.ceil(fp.length/gp.grid.rows):fp.length,Mp=(bp?fp[lp].column:lp)+(vp&&typeof sp>"u"?-xp/2+.5:0);if(Mp<yp){Rp=Math.max(yp-Mp,Sp);for(let Ap=0;Ap<yp-Mp;Ap+=1){const Dp=Ap-Math.floor(Ap/Op)*Op;if(bp){const Fp=Op-Dp-1;for(let Ip=fp.length-1;Ip>=0;Ip-=1)fp[Ip].column===Fp&&Ep.push(Ip)}else Ep.push(Op-Dp-1)}}else if(Mp+xp>Op-yp){Pp=Math.max(Mp-(Op-yp*2),Sp);for(let Ap=0;Ap<Pp;Ap+=1){const Dp=Ap-Math.floor(Ap/Op)*Op;bp?fp.forEach((Fp,Ip)=>{Fp.column===Dp&&wp.push(Ip)}):wp.push(Dp)}}if(dp.__preventObserver__=!0,requestAnimationFrame(()=>{dp.__preventObserver__=!1}),$p&&Ep.forEach(Ap=>{fp[Ap].swiperLoopMoveDOM=!0,mp.prepend(fp[Ap]),fp[Ap].swiperLoopMoveDOM=!1}),Cp&&wp.forEach(Ap=>{fp[Ap].swiperLoopMoveDOM=!0,mp.append(fp[Ap]),fp[Ap].swiperLoopMoveDOM=!1}),dp.recalcSlides(),gp.slidesPerView==="auto"?dp.updateSlides():bp&&(Ep.length>0&&$p||wp.length>0&&Cp)&&dp.slides.forEach((Ap,Dp)=>{dp.grid.updateSlide(Dp,Ap,dp.slides)}),gp.watchSlidesProgress&&dp.updateSlidesOffset(),rp){if(Ep.length>0&&$p){if(typeof np>"u"){const Ap=dp.slidesGrid[_p],Fp=dp.slidesGrid[_p+Rp]-Ap;cp?dp.setTranslate(dp.translate-Fp):(dp.slideTo(_p+Rp,0,!1,!0),sp&&(dp.touchEventsData.startTranslate=dp.touchEventsData.startTranslate-Fp,dp.touchEventsData.currentTranslate=dp.touchEventsData.currentTranslate-Fp))}else if(sp){const Ap=bp?Ep.length/gp.grid.rows:Ep.length;dp.slideTo(dp.activeIndex+Ap,0,!1,!0),dp.touchEventsData.currentTranslate=dp.translate}}else if(wp.length>0&&Cp)if(typeof np>"u"){const Ap=dp.slidesGrid[_p],Fp=dp.slidesGrid[_p-Pp]-Ap;cp?dp.setTranslate(dp.translate-Fp):(dp.slideTo(_p-Pp,0,!1,!0),sp&&(dp.touchEventsData.startTranslate=dp.touchEventsData.startTranslate-Fp,dp.touchEventsData.currentTranslate=dp.touchEventsData.currentTranslate-Fp))}else{const Ap=bp?wp.length/gp.grid.rows:wp.length;dp.slideTo(dp.activeIndex-Ap,0,!1,!0)}}if(dp.allowSlidePrev=pp,dp.allowSlideNext=hp,dp.controller&&dp.controller.control&&!up){const Ap={slideRealIndex:np,direction:ap,setTranslate:sp,activeSlideIndex:lp,byController:!0};Array.isArray(dp.controller.control)?dp.controller.control.forEach(Dp=>{!Dp.destroyed&&Dp.params.loop&&Dp.loopFix({...Ap,slideTo:Dp.params.slidesPerView===gp.slidesPerView?rp:!1})}):dp.controller.control instanceof dp.constructor&&dp.controller.control.params.loop&&dp.controller.control.loopFix({...Ap,slideTo:dp.controller.control.params.slidesPerView===gp.slidesPerView?rp:!1})}dp.emit("loopFix")}function loopDestroy(){const _d=this,{params:np,slidesEl:rp}=_d;if(!np.loop||_d.virtual&&_d.params.virtual.enabled)return;_d.recalcSlides();const ap=[];_d.slides.forEach(sp=>{const lp=typeof sp.swiperSlideIndex>"u"?sp.getAttribute("data-swiper-slide-index")*1:sp.swiperSlideIndex;ap[lp]=sp}),_d.slides.forEach(sp=>{sp.removeAttribute("data-swiper-slide-index")}),ap.forEach(sp=>{rp.append(sp)}),_d.recalcSlides(),_d.slideTo(_d.realIndex,0)}var loop={loopCreate,loopFix,loopDestroy};function setGrabCursor(_d){const np=this;if(!np.params.simulateTouch||np.params.watchOverflow&&np.isLocked||np.params.cssMode)return;const rp=np.params.touchEventsTarget==="container"?np.el:np.wrapperEl;np.isElement&&(np.__preventObserver__=!0),rp.style.cursor="move",rp.style.cursor=_d?"grabbing":"grab",np.isElement&&requestAnimationFrame(()=>{np.__preventObserver__=!1})}function unsetGrabCursor(){const _d=this;_d.params.watchOverflow&&_d.isLocked||_d.params.cssMode||(_d.isElement&&(_d.__preventObserver__=!0),_d[_d.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",_d.isElement&&requestAnimationFrame(()=>{_d.__preventObserver__=!1}))}var grabCursor={setGrabCursor,unsetGrabCursor};function closestElement(_d,np){np===void 0&&(np=this);function rp(ap){if(!ap||ap===getDocument()||ap===getWindow())return null;ap.assignedSlot&&(ap=ap.assignedSlot);const sp=ap.closest(_d);return!sp&&!ap.getRootNode?null:sp||rp(ap.getRootNode().host)}return rp(np)}function preventEdgeSwipe(_d,np,rp){const ap=getWindow(),{params:sp}=_d,lp=sp.edgeSwipeDetection,up=sp.edgeSwipeThreshold;return lp&&(rp<=up||rp>=ap.innerWidth-up)?lp==="prevent"?(np.preventDefault(),!0):!1:!0}function onTouchStart(_d){const np=this,rp=getDocument();let ap=_d;ap.originalEvent&&(ap=ap.originalEvent);const sp=np.touchEventsData;if(ap.type==="pointerdown"){if(sp.pointerId!==null&&sp.pointerId!==ap.pointerId)return;sp.pointerId=ap.pointerId}else ap.type==="touchstart"&&ap.targetTouches.length===1&&(sp.touchId=ap.targetTouches[0].identifier);if(ap.type==="touchstart"){preventEdgeSwipe(np,ap,ap.targetTouches[0].pageX);return}const{params:lp,touches:up,enabled:cp}=np;if(!cp||!lp.simulateTouch&&ap.pointerType==="mouse"||np.animating&&lp.preventInteractionOnTransition)return;!np.animating&&lp.cssMode&&lp.loop&&np.loopFix();let dp=ap.target;if(lp.touchEventsTarget==="wrapper"&&!np.wrapperEl.contains(dp)||"which"in ap&&ap.which===3||"button"in ap&&ap.button>0||sp.isTouched&&sp.isMoved)return;const fp=!!lp.noSwipingClass&&lp.noSwipingClass!=="",pp=ap.composedPath?ap.composedPath():ap.path;fp&&ap.target&&ap.target.shadowRoot&&pp&&(dp=pp[0]);const hp=lp.noSwipingSelector?lp.noSwipingSelector:`.${lp.noSwipingClass}`,mp=!!(ap.target&&ap.target.shadowRoot);if(lp.noSwiping&&(mp?closestElement(hp,dp):dp.closest(hp))){np.allowClick=!0;return}if(lp.swipeHandler&&!dp.closest(lp.swipeHandler))return;up.currentX=ap.pageX,up.currentY=ap.pageY;const gp=up.currentX,vp=up.currentY;if(!preventEdgeSwipe(np,ap,gp))return;Object.assign(sp,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),up.startX=gp,up.startY=vp,sp.touchStartTime=now(),np.allowClick=!0,np.updateSize(),np.swipeDirection=void 0,lp.threshold>0&&(sp.allowThresholdMove=!1);let xp=!0;dp.matches(sp.focusableElements)&&(xp=!1,dp.nodeName==="SELECT"&&(sp.isTouched=!1)),rp.activeElement&&rp.activeElement.matches(sp.focusableElements)&&rp.activeElement!==dp&&rp.activeElement.blur();const Sp=xp&&np.allowTouchMove&&lp.touchStartPreventDefault;(lp.touchStartForcePreventDefault||Sp)&&!dp.isContentEditable&&ap.preventDefault(),lp.freeMode&&lp.freeMode.enabled&&np.freeMode&&np.animating&&!lp.cssMode&&np.freeMode.onTouchStart(),np.emit("touchStart",ap)}function onTouchMove(_d){const np=getDocument(),rp=this,ap=rp.touchEventsData,{params:sp,touches:lp,rtlTranslate:up,enabled:cp}=rp;if(!cp||!sp.simulateTouch&&_d.pointerType==="mouse")return;let dp=_d;if(dp.originalEvent&&(dp=dp.originalEvent),dp.type==="pointermove"&&(ap.touchId!==null||dp.pointerId!==ap.pointerId))return;let fp;if(dp.type==="touchmove"){if(fp=[...dp.changedTouches].filter(Cp=>Cp.identifier===ap.touchId)[0],!fp||fp.identifier!==ap.touchId)return}else fp=dp;if(!ap.isTouched){ap.startMoving&&ap.isScrolling&&rp.emit("touchMoveOpposite",dp);return}const pp=fp.pageX,hp=fp.pageY;if(dp.preventedByNestedSwiper){lp.startX=pp,lp.startY=hp;return}if(!rp.allowTouchMove){dp.target.matches(ap.focusableElements)||(rp.allowClick=!1),ap.isTouched&&(Object.assign(lp,{startX:pp,startY:hp,currentX:pp,currentY:hp}),ap.touchStartTime=now());return}if(sp.touchReleaseOnEdges&&!sp.loop){if(rp.isVertical()){if(hp<lp.startY&&rp.translate<=rp.maxTranslate()||hp>lp.startY&&rp.translate>=rp.minTranslate()){ap.isTouched=!1,ap.isMoved=!1;return}}else if(pp<lp.startX&&rp.translate<=rp.maxTranslate()||pp>lp.startX&&rp.translate>=rp.minTranslate())return}if(np.activeElement&&dp.target===np.activeElement&&dp.target.matches(ap.focusableElements)){ap.isMoved=!0,rp.allowClick=!1;return}ap.allowTouchCallbacks&&rp.emit("touchMove",dp),lp.previousX=lp.currentX,lp.previousY=lp.currentY,lp.currentX=pp,lp.currentY=hp;const mp=lp.currentX-lp.startX,gp=lp.currentY-lp.startY;if(rp.params.threshold&&Math.sqrt(mp**2+gp**2)<rp.params.threshold)return;if(typeof ap.isScrolling>"u"){let Cp;rp.isHorizontal()&&lp.currentY===lp.startY||rp.isVertical()&&lp.currentX===lp.startX?ap.isScrolling=!1:mp*mp+gp*gp>=25&&(Cp=Math.atan2(Math.abs(gp),Math.abs(mp))*180/Math.PI,ap.isScrolling=rp.isHorizontal()?Cp>sp.touchAngle:90-Cp>sp.touchAngle)}if(ap.isScrolling&&rp.emit("touchMoveOpposite",dp),typeof ap.startMoving>"u"&&(lp.currentX!==lp.startX||lp.currentY!==lp.startY)&&(ap.startMoving=!0),ap.isScrolling){ap.isTouched=!1;return}if(!ap.startMoving)return;rp.allowClick=!1,!sp.cssMode&&dp.cancelable&&dp.preventDefault(),sp.touchMoveStopPropagation&&!sp.nested&&dp.stopPropagation();let vp=rp.isHorizontal()?mp:gp,xp=rp.isHorizontal()?lp.currentX-lp.previousX:lp.currentY-lp.previousY;sp.oneWayMovement&&(vp=Math.abs(vp)*(up?1:-1),xp=Math.abs(xp)*(up?1:-1)),lp.diff=vp,vp*=sp.touchRatio,up&&(vp=-vp,xp=-xp);const Sp=rp.touchesDirection;rp.swipeDirection=vp>0?"prev":"next",rp.touchesDirection=xp>0?"prev":"next";const yp=rp.params.loop&&!sp.cssMode,bp=rp.touchesDirection==="next"&&rp.allowSlideNext||rp.touchesDirection==="prev"&&rp.allowSlidePrev;if(!ap.isMoved){if(yp&&bp&&rp.loopFix({direction:rp.swipeDirection}),ap.startTranslate=rp.getTranslate(),rp.setTransition(0),rp.animating){const Cp=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});rp.wrapperEl.dispatchEvent(Cp)}ap.allowMomentumBounce=!1,sp.grabCursor&&(rp.allowSlideNext===!0||rp.allowSlidePrev===!0)&&rp.setGrabCursor(!0),rp.emit("sliderFirstMove",dp)}let Ep;if(new Date().getTime(),ap.isMoved&&ap.allowThresholdMove&&Sp!==rp.touchesDirection&&yp&&bp&&Math.abs(vp)>=1){Object.assign(lp,{startX:pp,startY:hp,currentX:pp,currentY:hp,startTranslate:ap.currentTranslate}),ap.loopSwapReset=!0,ap.startTranslate=ap.currentTranslate;return}rp.emit("sliderMove",dp),ap.isMoved=!0,ap.currentTranslate=vp+ap.startTranslate;let wp=!0,_p=sp.resistanceRatio;if(sp.touchReleaseOnEdges&&(_p=0),vp>0?(yp&&bp&&!Ep&&ap.allowThresholdMove&&ap.currentTranslate>(sp.centeredSlides?rp.minTranslate()-rp.slidesSizesGrid[rp.activeIndex+1]:rp.minTranslate())&&rp.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),ap.currentTranslate>rp.minTranslate()&&(wp=!1,sp.resistance&&(ap.currentTranslate=rp.minTranslate()-1+(-rp.minTranslate()+ap.startTranslate+vp)**_p))):vp<0&&(yp&&bp&&!Ep&&ap.allowThresholdMove&&ap.currentTranslate<(sp.centeredSlides?rp.maxTranslate()+rp.slidesSizesGrid[rp.slidesSizesGrid.length-1]:rp.maxTranslate())&&rp.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:rp.slides.length-(sp.slidesPerView==="auto"?rp.slidesPerViewDynamic():Math.ceil(parseFloat(sp.slidesPerView,10)))}),ap.currentTranslate<rp.maxTranslate()&&(wp=!1,sp.resistance&&(ap.currentTranslate=rp.maxTranslate()+1-(rp.maxTranslate()-ap.startTranslate-vp)**_p))),wp&&(dp.preventedByNestedSwiper=!0),!rp.allowSlideNext&&rp.swipeDirection==="next"&&ap.currentTranslate<ap.startTranslate&&(ap.currentTranslate=ap.startTranslate),!rp.allowSlidePrev&&rp.swipeDirection==="prev"&&ap.currentTranslate>ap.startTranslate&&(ap.currentTranslate=ap.startTranslate),!rp.allowSlidePrev&&!rp.allowSlideNext&&(ap.currentTranslate=ap.startTranslate),sp.threshold>0)if(Math.abs(vp)>sp.threshold||ap.allowThresholdMove){if(!ap.allowThresholdMove){ap.allowThresholdMove=!0,lp.startX=lp.currentX,lp.startY=lp.currentY,ap.currentTranslate=ap.startTranslate,lp.diff=rp.isHorizontal()?lp.currentX-lp.startX:lp.currentY-lp.startY;return}}else{ap.currentTranslate=ap.startTranslate;return}!sp.followFinger||sp.cssMode||((sp.freeMode&&sp.freeMode.enabled&&rp.freeMode||sp.watchSlidesProgress)&&(rp.updateActiveIndex(),rp.updateSlidesClasses()),sp.freeMode&&sp.freeMode.enabled&&rp.freeMode&&rp.freeMode.onTouchMove(),rp.updateProgress(ap.currentTranslate),rp.setTranslate(ap.currentTranslate))}function onTouchEnd(_d){const np=this,rp=np.touchEventsData;let ap=_d;ap.originalEvent&&(ap=ap.originalEvent);let sp;if(ap.type==="touchend"||ap.type==="touchcancel"){if(sp=[...ap.changedTouches].filter(_p=>_p.identifier===rp.touchId)[0],!sp||sp.identifier!==rp.touchId)return}else{if(rp.touchId!==null||ap.pointerId!==rp.pointerId)return;sp=ap}if(["pointercancel","pointerout","pointerleave","contextmenu"].includes(ap.type)&&!(["pointercancel","contextmenu"].includes(ap.type)&&(np.browser.isSafari||np.browser.isWebView)))return;rp.pointerId=null,rp.touchId=null;const{params:up,touches:cp,rtlTranslate:dp,slidesGrid:fp,enabled:pp}=np;if(!pp||!up.simulateTouch&&ap.pointerType==="mouse")return;if(rp.allowTouchCallbacks&&np.emit("touchEnd",ap),rp.allowTouchCallbacks=!1,!rp.isTouched){rp.isMoved&&up.grabCursor&&np.setGrabCursor(!1),rp.isMoved=!1,rp.startMoving=!1;return}up.grabCursor&&rp.isMoved&&rp.isTouched&&(np.allowSlideNext===!0||np.allowSlidePrev===!0)&&np.setGrabCursor(!1);const hp=now(),mp=hp-rp.touchStartTime;if(np.allowClick){const _p=ap.path||ap.composedPath&&ap.composedPath();np.updateClickedSlide(_p&&_p[0]||ap.target,_p),np.emit("tap click",ap),mp<300&&hp-rp.lastClickTime<300&&np.emit("doubleTap doubleClick",ap)}if(rp.lastClickTime=now(),nextTick(()=>{np.destroyed||(np.allowClick=!0)}),!rp.isTouched||!rp.isMoved||!np.swipeDirection||cp.diff===0&&!rp.loopSwapReset||rp.currentTranslate===rp.startTranslate&&!rp.loopSwapReset){rp.isTouched=!1,rp.isMoved=!1,rp.startMoving=!1;return}rp.isTouched=!1,rp.isMoved=!1,rp.startMoving=!1;let gp;if(up.followFinger?gp=dp?np.translate:-np.translate:gp=-rp.currentTranslate,up.cssMode)return;if(up.freeMode&&up.freeMode.enabled){np.freeMode.onTouchEnd({currentPos:gp});return}const vp=gp>=-np.maxTranslate()&&!np.params.loop;let xp=0,Sp=np.slidesSizesGrid[0];for(let _p=0;_p<fp.length;_p+=_p<up.slidesPerGroupSkip?1:up.slidesPerGroup){const Cp=_p<up.slidesPerGroupSkip-1?1:up.slidesPerGroup;typeof fp[_p+Cp]<"u"?(vp||gp>=fp[_p]&&gp<fp[_p+Cp])&&(xp=_p,Sp=fp[_p+Cp]-fp[_p]):(vp||gp>=fp[_p])&&(xp=_p,Sp=fp[fp.length-1]-fp[fp.length-2])}let yp=null,bp=null;up.rewind&&(np.isBeginning?bp=up.virtual&&up.virtual.enabled&&np.virtual?np.virtual.slides.length-1:np.slides.length-1:np.isEnd&&(yp=0));const Ep=(gp-fp[xp])/Sp,wp=xp<up.slidesPerGroupSkip-1?1:up.slidesPerGroup;if(mp>up.longSwipesMs){if(!up.longSwipes){np.slideTo(np.activeIndex);return}np.swipeDirection==="next"&&(Ep>=up.longSwipesRatio?np.slideTo(up.rewind&&np.isEnd?yp:xp+wp):np.slideTo(xp)),np.swipeDirection==="prev"&&(Ep>1-up.longSwipesRatio?np.slideTo(xp+wp):bp!==null&&Ep<0&&Math.abs(Ep)>up.longSwipesRatio?np.slideTo(bp):np.slideTo(xp))}else{if(!up.shortSwipes){np.slideTo(np.activeIndex);return}np.navigation&&(ap.target===np.navigation.nextEl||ap.target===np.navigation.prevEl)?ap.target===np.navigation.nextEl?np.slideTo(xp+wp):np.slideTo(xp):(np.swipeDirection==="next"&&np.slideTo(yp!==null?yp:xp+wp),np.swipeDirection==="prev"&&np.slideTo(bp!==null?bp:xp))}}function onResize(){const _d=this,{params:np,el:rp}=_d;if(rp&&rp.offsetWidth===0)return;np.breakpoints&&_d.setBreakpoint();const{allowSlideNext:ap,allowSlidePrev:sp,snapGrid:lp}=_d,up=_d.virtual&&_d.params.virtual.enabled;_d.allowSlideNext=!0,_d.allowSlidePrev=!0,_d.updateSize(),_d.updateSlides(),_d.updateSlidesClasses();const cp=up&&np.loop;(np.slidesPerView==="auto"||np.slidesPerView>1)&&_d.isEnd&&!_d.isBeginning&&!_d.params.centeredSlides&&!cp?_d.slideTo(_d.slides.length-1,0,!1,!0):_d.params.loop&&!up?_d.slideToLoop(_d.realIndex,0,!1,!0):_d.slideTo(_d.activeIndex,0,!1,!0),_d.autoplay&&_d.autoplay.running&&_d.autoplay.paused&&(clearTimeout(_d.autoplay.resizeTimeout),_d.autoplay.resizeTimeout=setTimeout(()=>{_d.autoplay&&_d.autoplay.running&&_d.autoplay.paused&&_d.autoplay.resume()},500)),_d.allowSlidePrev=sp,_d.allowSlideNext=ap,_d.params.watchOverflow&&lp!==_d.snapGrid&&_d.checkOverflow()}function onClick(_d){const np=this;np.enabled&&(np.allowClick||(np.params.preventClicks&&_d.preventDefault(),np.params.preventClicksPropagation&&np.animating&&(_d.stopPropagation(),_d.stopImmediatePropagation())))}function onScroll(){const _d=this,{wrapperEl:np,rtlTranslate:rp,enabled:ap}=_d;if(!ap)return;_d.previousTranslate=_d.translate,_d.isHorizontal()?_d.translate=-np.scrollLeft:_d.translate=-np.scrollTop,_d.translate===0&&(_d.translate=0),_d.updateActiveIndex(),_d.updateSlidesClasses();let sp;const lp=_d.maxTranslate()-_d.minTranslate();lp===0?sp=0:sp=(_d.translate-_d.minTranslate())/lp,sp!==_d.progress&&_d.updateProgress(rp?-_d.translate:_d.translate),_d.emit("setTranslate",_d.translate,!1)}function onLoad(_d){const np=this;processLazyPreloader(np,_d.target),!(np.params.cssMode||np.params.slidesPerView!=="auto"&&!np.params.autoHeight)&&np.update()}function onDocumentTouchStart(){const _d=this;_d.documentTouchHandlerProceeded||(_d.documentTouchHandlerProceeded=!0,_d.params.touchReleaseOnEdges&&(_d.el.style.touchAction="auto"))}const events$2=(_d,np)=>{const rp=getDocument(),{params:ap,el:sp,wrapperEl:lp,device:up}=_d,cp=!!ap.nested,dp=np==="on"?"addEventListener":"removeEventListener",fp=np;rp[dp]("touchstart",_d.onDocumentTouchStart,{passive:!1,capture:cp}),sp[dp]("touchstart",_d.onTouchStart,{passive:!1}),sp[dp]("pointerdown",_d.onTouchStart,{passive:!1}),rp[dp]("touchmove",_d.onTouchMove,{passive:!1,capture:cp}),rp[dp]("pointermove",_d.onTouchMove,{passive:!1,capture:cp}),rp[dp]("touchend",_d.onTouchEnd,{passive:!0}),rp[dp]("pointerup",_d.onTouchEnd,{passive:!0}),rp[dp]("pointercancel",_d.onTouchEnd,{passive:!0}),rp[dp]("touchcancel",_d.onTouchEnd,{passive:!0}),rp[dp]("pointerout",_d.onTouchEnd,{passive:!0}),rp[dp]("pointerleave",_d.onTouchEnd,{passive:!0}),rp[dp]("contextmenu",_d.onTouchEnd,{passive:!0}),(ap.preventClicks||ap.preventClicksPropagation)&&sp[dp]("click",_d.onClick,!0),ap.cssMode&&lp[dp]("scroll",_d.onScroll),ap.updateOnWindowResize?_d[fp](up.ios||up.android?"resize orientationchange observerUpdate":"resize observerUpdate",onResize,!0):_d[fp]("observerUpdate",onResize,!0),sp[dp]("load",_d.onLoad,{capture:!0})};function attachEvents(){const _d=this,{params:np}=_d;_d.onTouchStart=onTouchStart.bind(_d),_d.onTouchMove=onTouchMove.bind(_d),_d.onTouchEnd=onTouchEnd.bind(_d),_d.onDocumentTouchStart=onDocumentTouchStart.bind(_d),np.cssMode&&(_d.onScroll=onScroll.bind(_d)),_d.onClick=onClick.bind(_d),_d.onLoad=onLoad.bind(_d),events$2(_d,"on")}function detachEvents(){events$2(this,"off")}var events$1$1={attachEvents,detachEvents};const isGridEnabled=(_d,np)=>_d.grid&&np.grid&&np.grid.rows>1;function setBreakpoint(){const _d=this,{realIndex:np,initialized:rp,params:ap,el:sp}=_d,lp=ap.breakpoints;if(!lp||lp&&Object.keys(lp).length===0)return;const up=_d.getBreakpoint(lp,_d.params.breakpointsBase,_d.el);if(!up||_d.currentBreakpoint===up)return;const dp=(up in lp?lp[up]:void 0)||_d.originalParams,fp=isGridEnabled(_d,ap),pp=isGridEnabled(_d,dp),hp=ap.enabled;fp&&!pp?(sp.classList.remove(`${ap.containerModifierClass}grid`,`${ap.containerModifierClass}grid-column`),_d.emitContainerClasses()):!fp&&pp&&(sp.classList.add(`${ap.containerModifierClass}grid`),(dp.grid.fill&&dp.grid.fill==="column"||!dp.grid.fill&&ap.grid.fill==="column")&&sp.classList.add(`${ap.containerModifierClass}grid-column`),_d.emitContainerClasses()),["navigation","pagination","scrollbar"].forEach(yp=>{if(typeof dp[yp]>"u")return;const bp=ap[yp]&&ap[yp].enabled,Ep=dp[yp]&&dp[yp].enabled;bp&&!Ep&&_d[yp].disable(),!bp&&Ep&&_d[yp].enable()});const mp=dp.direction&&dp.direction!==ap.direction,gp=ap.loop&&(dp.slidesPerView!==ap.slidesPerView||mp),vp=ap.loop;mp&&rp&&_d.changeDirection(),extend$2(_d.params,dp);const xp=_d.params.enabled,Sp=_d.params.loop;Object.assign(_d,{allowTouchMove:_d.params.allowTouchMove,allowSlideNext:_d.params.allowSlideNext,allowSlidePrev:_d.params.allowSlidePrev}),hp&&!xp?_d.disable():!hp&&xp&&_d.enable(),_d.currentBreakpoint=up,_d.emit("_beforeBreakpoint",dp),rp&&(gp?(_d.loopDestroy(),_d.loopCreate(np),_d.updateSlides()):!vp&&Sp?(_d.loopCreate(np),_d.updateSlides()):vp&&!Sp&&_d.loopDestroy()),_d.emit("breakpoint",dp)}function getBreakpoint(_d,np,rp){if(np===void 0&&(np="window"),!_d||np==="container"&&!rp)return;let ap=!1;const sp=getWindow(),lp=np==="window"?sp.innerHeight:rp.clientHeight,up=Object.keys(_d).map(cp=>{if(typeof cp=="string"&&cp.indexOf("@")===0){const dp=parseFloat(cp.substr(1));return{value:lp*dp,point:cp}}return{value:cp,point:cp}});up.sort((cp,dp)=>parseInt(cp.value,10)-parseInt(dp.value,10));for(let cp=0;cp<up.length;cp+=1){const{point:dp,value:fp}=up[cp];np==="window"?sp.matchMedia(`(min-width: ${fp}px)`).matches&&(ap=dp):fp<=rp.clientWidth&&(ap=dp)}return ap||"max"}var breakpoints={setBreakpoint,getBreakpoint};function prepareClasses(_d,np){const rp=[];return _d.forEach(ap=>{typeof ap=="object"?Object.keys(ap).forEach(sp=>{ap[sp]&&rp.push(np+sp)}):typeof ap=="string"&&rp.push(np+ap)}),rp}function addClasses(){const _d=this,{classNames:np,params:rp,rtl:ap,el:sp,device:lp}=_d,up=prepareClasses(["initialized",rp.direction,{"free-mode":_d.params.freeMode&&rp.freeMode.enabled},{autoheight:rp.autoHeight},{rtl:ap},{grid:rp.grid&&rp.grid.rows>1},{"grid-column":rp.grid&&rp.grid.rows>1&&rp.grid.fill==="column"},{android:lp.android},{ios:lp.ios},{"css-mode":rp.cssMode},{centered:rp.cssMode&&rp.centeredSlides},{"watch-progress":rp.watchSlidesProgress}],rp.containerModifierClass);np.push(...up),sp.classList.add(...np),_d.emitContainerClasses()}function removeClasses(){const _d=this,{el:np,classNames:rp}=_d;np.classList.remove(...rp),_d.emitContainerClasses()}var classes={addClasses,removeClasses};function checkOverflow(){const _d=this,{isLocked:np,params:rp}=_d,{slidesOffsetBefore:ap}=rp;if(ap){const sp=_d.slides.length-1,lp=_d.slidesGrid[sp]+_d.slidesSizesGrid[sp]+ap*2;_d.isLocked=_d.size>lp}else _d.isLocked=_d.snapGrid.length===1;rp.allowSlideNext===!0&&(_d.allowSlideNext=!_d.isLocked),rp.allowSlidePrev===!0&&(_d.allowSlidePrev=!_d.isLocked),np&&np!==_d.isLocked&&(_d.isEnd=!1),np!==_d.isLocked&&_d.emit(_d.isLocked?"lock":"unlock")}var checkOverflow$1={checkOverflow},defaults$2={init:!0,direction:"horizontal",oneWayMovement:!1,touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function moduleExtendParams(_d,np){return function(ap){ap===void 0&&(ap={});const sp=Object.keys(ap)[0],lp=ap[sp];if(typeof lp!="object"||lp===null){extend$2(np,ap);return}if(_d[sp]===!0&&(_d[sp]={enabled:!0}),sp==="navigation"&&_d[sp]&&_d[sp].enabled&&!_d[sp].prevEl&&!_d[sp].nextEl&&(_d[sp].auto=!0),["pagination","scrollbar"].indexOf(sp)>=0&&_d[sp]&&_d[sp].enabled&&!_d[sp].el&&(_d[sp].auto=!0),!(sp in _d&&"enabled"in lp)){extend$2(np,ap);return}typeof _d[sp]=="object"&&!("enabled"in _d[sp])&&(_d[sp].enabled=!0),_d[sp]||(_d[sp]={enabled:!1}),extend$2(np,ap)}}const prototypes={eventsEmitter,update,translate,transition,slide,loop,grabCursor,events:events$1$1,breakpoints,checkOverflow:checkOverflow$1,classes},extendedDefaults={};let Swiper$1=class jm{constructor(){let np,rp;for(var ap=arguments.length,sp=new Array(ap),lp=0;lp<ap;lp++)sp[lp]=arguments[lp];sp.length===1&&sp[0].constructor&&Object.prototype.toString.call(sp[0]).slice(8,-1)==="Object"?rp=sp[0]:[np,rp]=sp,rp||(rp={}),rp=extend$2({},rp),np&&!rp.el&&(rp.el=np);const up=getDocument();if(rp.el&&typeof rp.el=="string"&&up.querySelectorAll(rp.el).length>1){const pp=[];return up.querySelectorAll(rp.el).forEach(hp=>{const mp=extend$2({},rp,{el:hp});pp.push(new jm(mp))}),pp}const cp=this;cp.__swiper__=!0,cp.support=getSupport(),cp.device=getDevice({userAgent:rp.userAgent}),cp.browser=getBrowser(),cp.eventsListeners={},cp.eventsAnyListeners=[],cp.modules=[...cp.__modules__],rp.modules&&Array.isArray(rp.modules)&&cp.modules.push(...rp.modules);const dp={};cp.modules.forEach(pp=>{pp({params:rp,swiper:cp,extendParams:moduleExtendParams(rp,dp),on:cp.on.bind(cp),once:cp.once.bind(cp),off:cp.off.bind(cp),emit:cp.emit.bind(cp)})});const fp=extend$2({},defaults$2,dp);return cp.params=extend$2({},fp,extendedDefaults,rp),cp.originalParams=extend$2({},cp.params),cp.passedParams=extend$2({},rp),cp.params&&cp.params.on&&Object.keys(cp.params.on).forEach(pp=>{cp.on(pp,cp.params.on[pp])}),cp.params&&cp.params.onAny&&cp.onAny(cp.params.onAny),Object.assign(cp,{enabled:cp.params.enabled,el:np,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return cp.params.direction==="horizontal"},isVertical(){return cp.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:cp.params.allowSlideNext,allowSlidePrev:cp.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:cp.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:cp.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),cp.emit("_swiper"),cp.params.init&&cp.init(),cp}getDirectionLabel(np){return this.isHorizontal()?np:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[np]}getSlideIndex(np){const{slidesEl:rp,params:ap}=this,sp=elementChildren(rp,`.${ap.slideClass}, swiper-slide`),lp=elementIndex(sp[0]);return elementIndex(np)-lp}getSlideIndexByData(np){return this.getSlideIndex(this.slides.filter(rp=>rp.getAttribute("data-swiper-slide-index")*1===np)[0])}recalcSlides(){const np=this,{slidesEl:rp,params:ap}=np;np.slides=elementChildren(rp,`.${ap.slideClass}, swiper-slide`)}enable(){const np=this;np.enabled||(np.enabled=!0,np.params.grabCursor&&np.setGrabCursor(),np.emit("enable"))}disable(){const np=this;np.enabled&&(np.enabled=!1,np.params.grabCursor&&np.unsetGrabCursor(),np.emit("disable"))}setProgress(np,rp){const ap=this;np=Math.min(Math.max(np,0),1);const sp=ap.minTranslate(),up=(ap.maxTranslate()-sp)*np+sp;ap.translateTo(up,typeof rp>"u"?0:rp),ap.updateActiveIndex(),ap.updateSlidesClasses()}emitContainerClasses(){const np=this;if(!np.params._emitClasses||!np.el)return;const rp=np.el.className.split(" ").filter(ap=>ap.indexOf("swiper")===0||ap.indexOf(np.params.containerModifierClass)===0);np.emit("_containerClasses",rp.join(" "))}getSlideClasses(np){const rp=this;return rp.destroyed?"":np.className.split(" ").filter(ap=>ap.indexOf("swiper-slide")===0||ap.indexOf(rp.params.slideClass)===0).join(" ")}emitSlidesClasses(){const np=this;if(!np.params._emitClasses||!np.el)return;const rp=[];np.slides.forEach(ap=>{const sp=np.getSlideClasses(ap);rp.push({slideEl:ap,classNames:sp}),np.emit("_slideClass",ap,sp)}),np.emit("_slideClasses",rp)}slidesPerViewDynamic(np,rp){np===void 0&&(np="current"),rp===void 0&&(rp=!1);const ap=this,{params:sp,slides:lp,slidesGrid:up,slidesSizesGrid:cp,size:dp,activeIndex:fp}=ap;let pp=1;if(typeof sp.slidesPerView=="number")return sp.slidesPerView;if(sp.centeredSlides){let hp=lp[fp]?lp[fp].swiperSlideSize:0,mp;for(let gp=fp+1;gp<lp.length;gp+=1)lp[gp]&&!mp&&(hp+=lp[gp].swiperSlideSize,pp+=1,hp>dp&&(mp=!0));for(let gp=fp-1;gp>=0;gp-=1)lp[gp]&&!mp&&(hp+=lp[gp].swiperSlideSize,pp+=1,hp>dp&&(mp=!0))}else if(np==="current")for(let hp=fp+1;hp<lp.length;hp+=1)(rp?up[hp]+cp[hp]-up[fp]<dp:up[hp]-up[fp]<dp)&&(pp+=1);else for(let hp=fp-1;hp>=0;hp-=1)up[fp]-up[hp]<dp&&(pp+=1);return pp}update(){const np=this;if(!np||np.destroyed)return;const{snapGrid:rp,params:ap}=np;ap.breakpoints&&np.setBreakpoint(),[...np.el.querySelectorAll('[loading="lazy"]')].forEach(up=>{up.complete&&processLazyPreloader(np,up)}),np.updateSize(),np.updateSlides(),np.updateProgress(),np.updateSlidesClasses();function sp(){const up=np.rtlTranslate?np.translate*-1:np.translate,cp=Math.min(Math.max(up,np.maxTranslate()),np.minTranslate());np.setTranslate(cp),np.updateActiveIndex(),np.updateSlidesClasses()}let lp;if(ap.freeMode&&ap.freeMode.enabled&&!ap.cssMode)sp(),ap.autoHeight&&np.updateAutoHeight();else{if((ap.slidesPerView==="auto"||ap.slidesPerView>1)&&np.isEnd&&!ap.centeredSlides){const up=np.virtual&&ap.virtual.enabled?np.virtual.slides:np.slides;lp=np.slideTo(up.length-1,0,!1,!0)}else lp=np.slideTo(np.activeIndex,0,!1,!0);lp||sp()}ap.watchOverflow&&rp!==np.snapGrid&&np.checkOverflow(),np.emit("update")}changeDirection(np,rp){rp===void 0&&(rp=!0);const ap=this,sp=ap.params.direction;return np||(np=sp==="horizontal"?"vertical":"horizontal"),np===sp||np!=="horizontal"&&np!=="vertical"||(ap.el.classList.remove(`${ap.params.containerModifierClass}${sp}`),ap.el.classList.add(`${ap.params.containerModifierClass}${np}`),ap.emitContainerClasses(),ap.params.direction=np,ap.slides.forEach(lp=>{np==="vertical"?lp.style.width="":lp.style.height=""}),ap.emit("changeDirection"),rp&&ap.update()),ap}changeLanguageDirection(np){const rp=this;rp.rtl&&np==="rtl"||!rp.rtl&&np==="ltr"||(rp.rtl=np==="rtl",rp.rtlTranslate=rp.params.direction==="horizontal"&&rp.rtl,rp.rtl?(rp.el.classList.add(`${rp.params.containerModifierClass}rtl`),rp.el.dir="rtl"):(rp.el.classList.remove(`${rp.params.containerModifierClass}rtl`),rp.el.dir="ltr"),rp.update())}mount(np){const rp=this;if(rp.mounted)return!0;let ap=np||rp.params.el;if(typeof ap=="string"&&(ap=document.querySelector(ap)),!ap)return!1;ap.swiper=rp,ap.parentNode&&ap.parentNode.host&&ap.parentNode.host.nodeName==="SWIPER-CONTAINER"&&(rp.isElement=!0);const sp=()=>`.${(rp.params.wrapperClass||"").trim().split(" ").join(".")}`;let up=ap&&ap.shadowRoot&&ap.shadowRoot.querySelector?ap.shadowRoot.querySelector(sp()):elementChildren(ap,sp())[0];return!up&&rp.params.createElements&&(up=createElement("div",rp.params.wrapperClass),ap.append(up),elementChildren(ap,`.${rp.params.slideClass}`).forEach(cp=>{up.append(cp)})),Object.assign(rp,{el:ap,wrapperEl:up,slidesEl:rp.isElement&&!ap.parentNode.host.slideSlots?ap.parentNode.host:up,hostEl:rp.isElement?ap.parentNode.host:ap,mounted:!0,rtl:ap.dir.toLowerCase()==="rtl"||elementStyle(ap,"direction")==="rtl",rtlTranslate:rp.params.direction==="horizontal"&&(ap.dir.toLowerCase()==="rtl"||elementStyle(ap,"direction")==="rtl"),wrongRTL:elementStyle(up,"display")==="-webkit-box"}),!0}init(np){const rp=this;if(rp.initialized||rp.mount(np)===!1)return rp;rp.emit("beforeInit"),rp.params.breakpoints&&rp.setBreakpoint(),rp.addClasses(),rp.updateSize(),rp.updateSlides(),rp.params.watchOverflow&&rp.checkOverflow(),rp.params.grabCursor&&rp.enabled&&rp.setGrabCursor(),rp.params.loop&&rp.virtual&&rp.params.virtual.enabled?rp.slideTo(rp.params.initialSlide+rp.virtual.slidesBefore,0,rp.params.runCallbacksOnInit,!1,!0):rp.slideTo(rp.params.initialSlide,0,rp.params.runCallbacksOnInit,!1,!0),rp.params.loop&&rp.loopCreate(),rp.attachEvents();const sp=[...rp.el.querySelectorAll('[loading="lazy"]')];return rp.isElement&&sp.push(...rp.hostEl.querySelectorAll('[loading="lazy"]')),sp.forEach(lp=>{lp.complete?processLazyPreloader(rp,lp):lp.addEventListener("load",up=>{processLazyPreloader(rp,up.target)})}),preload(rp),rp.initialized=!0,preload(rp),rp.emit("init"),rp.emit("afterInit"),rp}destroy(np,rp){np===void 0&&(np=!0),rp===void 0&&(rp=!0);const ap=this,{params:sp,el:lp,wrapperEl:up,slides:cp}=ap;return typeof ap.params>"u"||ap.destroyed||(ap.emit("beforeDestroy"),ap.initialized=!1,ap.detachEvents(),sp.loop&&ap.loopDestroy(),rp&&(ap.removeClasses(),lp.removeAttribute("style"),up.removeAttribute("style"),cp&&cp.length&&cp.forEach(dp=>{dp.classList.remove(sp.slideVisibleClass,sp.slideFullyVisibleClass,sp.slideActiveClass,sp.slideNextClass,sp.slidePrevClass),dp.removeAttribute("style"),dp.removeAttribute("data-swiper-slide-index")})),ap.emit("destroy"),Object.keys(ap.eventsListeners).forEach(dp=>{ap.off(dp)}),np!==!1&&(ap.el.swiper=null,deleteProps(ap)),ap.destroyed=!0),null}static extendDefaults(np){extend$2(extendedDefaults,np)}static get extendedDefaults(){return extendedDefaults}static get defaults(){return defaults$2}static installModule(np){jm.prototype.__modules__||(jm.prototype.__modules__=[]);const rp=jm.prototype.__modules__;typeof np=="function"&&rp.indexOf(np)<0&&rp.push(np)}static use(np){return Array.isArray(np)?(np.forEach(rp=>jm.installModule(rp)),jm):(jm.installModule(np),jm)}};Object.keys(prototypes).forEach(_d=>{Object.keys(prototypes[_d]).forEach(np=>{Swiper$1.prototype[np]=prototypes[_d][np]})});Swiper$1.use([Resize,Observer]);const paramsList=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","breakpointsBase","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopAdditionalSlides","loopAddBlankSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideFullyVisibleClass","slideNextClass","slidePrevClass","slideBlankClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function isObject$6(_d){return typeof _d=="object"&&_d!==null&&_d.constructor&&Object.prototype.toString.call(_d).slice(8,-1)==="Object"&&!_d.__swiper__}function extend$1(_d,np){const rp=["__proto__","constructor","prototype"];Object.keys(np).filter(ap=>rp.indexOf(ap)<0).forEach(ap=>{typeof _d[ap]>"u"?_d[ap]=np[ap]:isObject$6(np[ap])&&isObject$6(_d[ap])&&Object.keys(np[ap]).length>0?np[ap].__swiper__?_d[ap]=np[ap]:extend$1(_d[ap],np[ap]):_d[ap]=np[ap]})}function needsNavigation(_d){return _d===void 0&&(_d={}),_d.navigation&&typeof _d.navigation.nextEl>"u"&&typeof _d.navigation.prevEl>"u"}function needsPagination(_d){return _d===void 0&&(_d={}),_d.pagination&&typeof _d.pagination.el>"u"}function needsScrollbar(_d){return _d===void 0&&(_d={}),_d.scrollbar&&typeof _d.scrollbar.el>"u"}function uniqueClasses(_d){_d===void 0&&(_d="");const np=_d.split(" ").map(ap=>ap.trim()).filter(ap=>!!ap),rp=[];return np.forEach(ap=>{rp.indexOf(ap)<0&&rp.push(ap)}),rp.join(" ")}function wrapperClass(_d){return _d===void 0&&(_d=""),_d?_d.includes("swiper-wrapper")?_d:`swiper-wrapper ${_d}`:"swiper-wrapper"}function updateSwiper(_d){let{swiper:np,slides:rp,passedParams:ap,changedParams:sp,nextEl:lp,prevEl:up,scrollbarEl:cp,paginationEl:dp}=_d;const fp=sp.filter(Pp=>Pp!=="children"&&Pp!=="direction"&&Pp!=="wrapperClass"),{params:pp,pagination:hp,navigation:mp,scrollbar:gp,virtual:vp,thumbs:xp}=np;let Sp,yp,bp,Ep,wp,_p,Cp,$p;sp.includes("thumbs")&&ap.thumbs&&ap.thumbs.swiper&&pp.thumbs&&!pp.thumbs.swiper&&(Sp=!0),sp.includes("controller")&&ap.controller&&ap.controller.control&&pp.controller&&!pp.controller.control&&(yp=!0),sp.includes("pagination")&&ap.pagination&&(ap.pagination.el||dp)&&(pp.pagination||pp.pagination===!1)&&hp&&!hp.el&&(bp=!0),sp.includes("scrollbar")&&ap.scrollbar&&(ap.scrollbar.el||cp)&&(pp.scrollbar||pp.scrollbar===!1)&&gp&&!gp.el&&(Ep=!0),sp.includes("navigation")&&ap.navigation&&(ap.navigation.prevEl||up)&&(ap.navigation.nextEl||lp)&&(pp.navigation||pp.navigation===!1)&&mp&&!mp.prevEl&&!mp.nextEl&&(wp=!0);const Rp=Pp=>{np[Pp]&&(np[Pp].destroy(),Pp==="navigation"?(np.isElement&&(np[Pp].prevEl.remove(),np[Pp].nextEl.remove()),pp[Pp].prevEl=void 0,pp[Pp].nextEl=void 0,np[Pp].prevEl=void 0,np[Pp].nextEl=void 0):(np.isElement&&np[Pp].el.remove(),pp[Pp].el=void 0,np[Pp].el=void 0))};sp.includes("loop")&&np.isElement&&(pp.loop&&!ap.loop?_p=!0:!pp.loop&&ap.loop?Cp=!0:$p=!0),fp.forEach(Pp=>{if(isObject$6(pp[Pp])&&isObject$6(ap[Pp]))Object.assign(pp[Pp],ap[Pp]),(Pp==="navigation"||Pp==="pagination"||Pp==="scrollbar")&&"enabled"in ap[Pp]&&!ap[Pp].enabled&&Rp(Pp);else{const Op=ap[Pp];(Op===!0||Op===!1)&&(Pp==="navigation"||Pp==="pagination"||Pp==="scrollbar")?Op===!1&&Rp(Pp):pp[Pp]=ap[Pp]}}),fp.includes("controller")&&!yp&&np.controller&&np.controller.control&&pp.controller&&pp.controller.control&&(np.controller.control=pp.controller.control),sp.includes("children")&&rp&&vp&&pp.virtual.enabled?(vp.slides=rp,vp.update(!0)):sp.includes("virtual")&&vp&&pp.virtual.enabled&&(rp&&(vp.slides=rp),vp.update(!0)),sp.includes("children")&&rp&&pp.loop&&($p=!0),Sp&&xp.init()&&xp.update(!0),yp&&(np.controller.control=pp.controller.control),bp&&(np.isElement&&(!dp||typeof dp=="string")&&(dp=document.createElement("div"),dp.classList.add("swiper-pagination"),dp.part.add("pagination"),np.el.appendChild(dp)),dp&&(pp.pagination.el=dp),hp.init(),hp.render(),hp.update()),Ep&&(np.isElement&&(!cp||typeof cp=="string")&&(cp=document.createElement("div"),cp.classList.add("swiper-scrollbar"),cp.part.add("scrollbar"),np.el.appendChild(cp)),cp&&(pp.scrollbar.el=cp),gp.init(),gp.updateSize(),gp.setTranslate()),wp&&(np.isElement&&((!lp||typeof lp=="string")&&(lp=document.createElement("div"),lp.classList.add("swiper-button-next"),lp.innerHTML=np.hostEl.constructor.nextButtonSvg,lp.part.add("button-next"),np.el.appendChild(lp)),(!up||typeof up=="string")&&(up=document.createElement("div"),up.classList.add("swiper-button-prev"),up.innerHTML=np.hostEl.constructor.prevButtonSvg,up.part.add("button-prev"),np.el.appendChild(up))),lp&&(pp.navigation.nextEl=lp),up&&(pp.navigation.prevEl=up),mp.init(),mp.update()),sp.includes("allowSlideNext")&&(np.allowSlideNext=ap.allowSlideNext),sp.includes("allowSlidePrev")&&(np.allowSlidePrev=ap.allowSlidePrev),sp.includes("direction")&&np.changeDirection(ap.direction,!1),(_p||$p)&&np.loopDestroy(),(Cp||$p)&&np.loopCreate(),np.update()}function getParams(_d,np){_d===void 0&&(_d={}),np===void 0&&(np=!0);const rp={on:{}},ap={},sp={};extend$1(rp,defaults$2),rp._emitClasses=!0,rp.init=!1;const lp={},up=paramsList.map(dp=>dp.replace(/_/,"")),cp=Object.assign({},_d);return Object.keys(cp).forEach(dp=>{typeof _d[dp]>"u"||(up.indexOf(dp)>=0?isObject$6(_d[dp])?(rp[dp]={},sp[dp]={},extend$1(rp[dp],_d[dp]),extend$1(sp[dp],_d[dp])):(rp[dp]=_d[dp],sp[dp]=_d[dp]):dp.search(/on[A-Z]/)===0&&typeof _d[dp]=="function"?np?ap[`${dp[2].toLowerCase()}${dp.substr(3)}`]=_d[dp]:rp.on[`${dp[2].toLowerCase()}${dp.substr(3)}`]=_d[dp]:lp[dp]=_d[dp])}),["navigation","pagination","scrollbar"].forEach(dp=>{rp[dp]===!0&&(rp[dp]={}),rp[dp]===!1&&delete rp[dp]}),{params:rp,passedParams:sp,rest:lp,events:ap}}function mountSwiper(_d,np){let{el:rp,nextEl:ap,prevEl:sp,paginationEl:lp,scrollbarEl:up,swiper:cp}=_d;needsNavigation(np)&&ap&&sp&&(cp.params.navigation.nextEl=ap,cp.originalParams.navigation.nextEl=ap,cp.params.navigation.prevEl=sp,cp.originalParams.navigation.prevEl=sp),needsPagination(np)&&lp&&(cp.params.pagination.el=lp,cp.originalParams.pagination.el=lp),needsScrollbar(np)&&up&&(cp.params.scrollbar.el=up,cp.originalParams.scrollbar.el=up),cp.init(rp)}function getChangedParams(_d,np,rp,ap,sp){const lp=[];if(!np)return lp;const up=dp=>{lp.indexOf(dp)<0&&lp.push(dp)};if(rp&&ap){const dp=ap.map(sp),fp=rp.map(sp);dp.join("")!==fp.join("")&&up("children"),ap.length!==rp.length&&up("children")}return paramsList.filter(dp=>dp[0]==="_").map(dp=>dp.replace(/_/,"")).forEach(dp=>{if(dp in _d&&dp in np)if(isObject$6(_d[dp])&&isObject$6(np[dp])){const fp=Object.keys(_d[dp]),pp=Object.keys(np[dp]);fp.length!==pp.length?up(dp):(fp.forEach(hp=>{_d[dp][hp]!==np[dp][hp]&&up(dp)}),pp.forEach(hp=>{_d[dp][hp]!==np[dp][hp]&&up(dp)}))}else _d[dp]!==np[dp]&&up(dp)}),lp}const updateOnVirtualData=_d=>{!_d||_d.destroyed||!_d.params.virtual||_d.params.virtual&&!_d.params.virtual.enabled||(_d.updateSlides(),_d.updateProgress(),_d.updateSlidesClasses(),_d.parallax&&_d.params.parallax&&_d.params.parallax.enabled&&_d.parallax.setTranslate())};function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(_d){for(var np=1;np<arguments.length;np++){var rp=arguments[np];for(var ap in rp)Object.prototype.hasOwnProperty.call(rp,ap)&&(_d[ap]=rp[ap])}return _d},_extends$2.apply(this,arguments)}function isChildSwiperSlide(_d){return _d.type&&_d.type.displayName&&_d.type.displayName.includes("SwiperSlide")}function processChildren(_d){const np=[];return React.Children.toArray(_d).forEach(rp=>{isChildSwiperSlide(rp)?np.push(rp):rp.props&&rp.props.children&&processChildren(rp.props.children).forEach(ap=>np.push(ap))}),np}function getChildren(_d){const np=[],rp={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return React.Children.toArray(_d).forEach(ap=>{if(isChildSwiperSlide(ap))np.push(ap);else if(ap.props&&ap.props.slot&&rp[ap.props.slot])rp[ap.props.slot].push(ap);else if(ap.props&&ap.props.children){const sp=processChildren(ap.props.children);sp.length>0?sp.forEach(lp=>np.push(lp)):rp["container-end"].push(ap)}else rp["container-end"].push(ap)}),{slides:np,slots:rp}}function renderVirtual(_d,np,rp){if(!rp)return null;const ap=pp=>{let hp=pp;return pp<0?hp=np.length+pp:hp>=np.length&&(hp=hp-np.length),hp},sp=_d.isHorizontal()?{[_d.rtlTranslate?"right":"left"]:`${rp.offset}px`}:{top:`${rp.offset}px`},{from:lp,to:up}=rp,cp=_d.params.loop?-np.length:0,dp=_d.params.loop?np.length*2:np.length,fp=[];for(let pp=cp;pp<dp;pp+=1)pp>=lp&&pp<=up&&fp.push(np[ap(pp)]);return fp.map((pp,hp)=>React.cloneElement(pp,{swiper:_d,style:sp,key:`slide-${hp}`}))}function useIsomorphicLayoutEffect$1(_d,np){return typeof window>"u"?reactExports.useEffect(_d,np):reactExports.useLayoutEffect(_d,np)}const SwiperSlideContext=reactExports.createContext(null),SwiperContext=reactExports.createContext(null),Swiper=reactExports.forwardRef(function(_d,np){let{className:rp,tag:ap="div",wrapperTag:sp="div",children:lp,onSwiper:up,...cp}=_d===void 0?{}:_d,dp=!1;const[fp,pp]=reactExports.useState("swiper"),[hp,mp]=reactExports.useState(null),[gp,vp]=reactExports.useState(!1),xp=reactExports.useRef(!1),Sp=reactExports.useRef(null),yp=reactExports.useRef(null),bp=reactExports.useRef(null),Ep=reactExports.useRef(null),wp=reactExports.useRef(null),_p=reactExports.useRef(null),Cp=reactExports.useRef(null),$p=reactExports.useRef(null),{params:Rp,passedParams:Pp,rest:Op,events:jp}=getParams(cp),{slides:Mp,slots:Ap}=getChildren(lp),Dp=()=>{vp(!gp)};Object.assign(Rp.on,{_containerClasses(Np,Lp){pp(Lp)}});const Fp=()=>{Object.assign(Rp.on,jp),dp=!0;const Np={...Rp};if(delete Np.wrapperClass,yp.current=new Swiper$1(Np),yp.current.virtual&&yp.current.params.virtual.enabled){yp.current.virtual.slides=Mp;const Lp={cache:!1,slides:Mp,renderExternal:mp,renderExternalUpdate:!1};extend$1(yp.current.params.virtual,Lp),extend$1(yp.current.originalParams.virtual,Lp)}};Sp.current||Fp(),yp.current&&yp.current.on("_beforeBreakpoint",Dp);const Ip=()=>{dp||!jp||!yp.current||Object.keys(jp).forEach(Np=>{yp.current.on(Np,jp[Np])})},kp=()=>{!jp||!yp.current||Object.keys(jp).forEach(Np=>{yp.current.off(Np,jp[Np])})};reactExports.useEffect(()=>()=>{yp.current&&yp.current.off("_beforeBreakpoint",Dp)}),reactExports.useEffect(()=>{!xp.current&&yp.current&&(yp.current.emitSlidesClasses(),xp.current=!0)}),useIsomorphicLayoutEffect$1(()=>{if(np&&(np.current=Sp.current),!!Sp.current)return yp.current.destroyed&&Fp(),mountSwiper({el:Sp.current,nextEl:wp.current,prevEl:_p.current,paginationEl:Cp.current,scrollbarEl:$p.current,swiper:yp.current},Rp),up&&up(yp.current),()=>{yp.current&&!yp.current.destroyed&&yp.current.destroy(!0,!1)}},[]),useIsomorphicLayoutEffect$1(()=>{Ip();const Np=getChangedParams(Pp,bp.current,Mp,Ep.current,Lp=>Lp.key);return bp.current=Pp,Ep.current=Mp,Np.length&&yp.current&&!yp.current.destroyed&&updateSwiper({swiper:yp.current,slides:Mp,passedParams:Pp,changedParams:Np,nextEl:wp.current,prevEl:_p.current,scrollbarEl:$p.current,paginationEl:Cp.current}),()=>{kp()}}),useIsomorphicLayoutEffect$1(()=>{updateOnVirtualData(yp.current)},[hp]);function Tp(){return Rp.virtual?renderVirtual(yp.current,Mp,hp):Mp.map((Np,Lp)=>React.cloneElement(Np,{swiper:yp.current,swiperSlideIndex:Lp}))}return React.createElement(ap,_extends$2({ref:Sp,className:uniqueClasses(`${fp}${rp?` ${rp}`:""}`)},Op),React.createElement(SwiperContext.Provider,{value:yp.current},Ap["container-start"],React.createElement(sp,{className:wrapperClass(Rp.wrapperClass)},Ap["wrapper-start"],Tp(),Ap["wrapper-end"]),needsNavigation(Rp)&&React.createElement(React.Fragment,null,React.createElement("div",{ref:_p,className:"swiper-button-prev"}),React.createElement("div",{ref:wp,className:"swiper-button-next"})),needsScrollbar(Rp)&&React.createElement("div",{ref:$p,className:"swiper-scrollbar"}),needsPagination(Rp)&&React.createElement("div",{ref:Cp,className:"swiper-pagination"}),Ap["container-end"]))});Swiper.displayName="Swiper";const SwiperSlide=reactExports.forwardRef(function(_d,np){let{tag:rp="div",children:ap,className:sp="",swiper:lp,zoom:up,lazy:cp,virtualIndex:dp,swiperSlideIndex:fp,...pp}=_d===void 0?{}:_d;const hp=reactExports.useRef(null),[mp,gp]=reactExports.useState("swiper-slide"),[vp,xp]=reactExports.useState(!1);function Sp(wp,_p,Cp){_p===hp.current&&gp(Cp)}useIsomorphicLayoutEffect$1(()=>{if(typeof fp<"u"&&(hp.current.swiperSlideIndex=fp),np&&(np.current=hp.current),!(!hp.current||!lp)){if(lp.destroyed){mp!=="swiper-slide"&&gp("swiper-slide");return}return lp.on("_slideClass",Sp),()=>{lp&&lp.off("_slideClass",Sp)}}}),useIsomorphicLayoutEffect$1(()=>{lp&&hp.current&&!lp.destroyed&&gp(lp.getSlideClasses(hp.current))},[lp]);const yp={isActive:mp.indexOf("swiper-slide-active")>=0,isVisible:mp.indexOf("swiper-slide-visible")>=0,isPrev:mp.indexOf("swiper-slide-prev")>=0,isNext:mp.indexOf("swiper-slide-next")>=0},bp=()=>typeof ap=="function"?ap(yp):ap,Ep=()=>{xp(!0)};return React.createElement(rp,_extends$2({ref:hp,className:uniqueClasses(`${mp}${sp?` ${sp}`:""}`),"data-swiper-slide-index":dp,onLoad:Ep},pp),up&&React.createElement(SwiperSlideContext.Provider,{value:yp},React.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":typeof up=="number"?up:void 0},bp(),cp&&!vp&&React.createElement("div",{className:"swiper-lazy-preloader"}))),!up&&React.createElement(SwiperSlideContext.Provider,{value:yp},bp(),cp&&!vp&&React.createElement("div",{className:"swiper-lazy-preloader"})))});SwiperSlide.displayName="SwiperSlide";function effectInit(_d){const{effect:np,swiper:rp,on:ap,setTranslate:sp,setTransition:lp,overwriteParams:up,perspective:cp,recreateShadows:dp,getEffectParams:fp}=_d;ap("beforeInit",()=>{if(rp.params.effect!==np)return;rp.classNames.push(`${rp.params.containerModifierClass}${np}`),cp&&cp()&&rp.classNames.push(`${rp.params.containerModifierClass}3d`);const hp=up?up():{};Object.assign(rp.params,hp),Object.assign(rp.originalParams,hp)}),ap("setTranslate",()=>{rp.params.effect===np&&sp()}),ap("setTransition",(hp,mp)=>{rp.params.effect===np&&lp(mp)}),ap("transitionEnd",()=>{if(rp.params.effect===np&&dp){if(!fp||!fp().slideShadows)return;rp.slides.forEach(hp=>{hp.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(mp=>mp.remove())}),dp()}});let pp;ap("virtualUpdate",()=>{rp.params.effect===np&&(rp.slides.length||(pp=!0),requestAnimationFrame(()=>{pp&&rp.slides&&rp.slides.length&&(sp(),pp=!1)}))})}function effectTarget(_d,np){const rp=getSlideTransformEl(np);return rp!==np&&(rp.style.backfaceVisibility="hidden",rp.style["-webkit-backface-visibility"]="hidden"),rp}function effectVirtualTransitionEnd(_d){let{swiper:np,duration:rp,transformElements:ap,allSlides:sp}=_d;const{activeIndex:lp}=np,up=cp=>cp.parentElement?cp.parentElement:np.slides.filter(fp=>fp.shadowRoot&&fp.shadowRoot===cp.parentNode)[0];if(np.params.virtualTranslate&&rp!==0){let cp=!1,dp;sp?dp=ap:dp=ap.filter(fp=>{const pp=fp.classList.contains("swiper-slide-transform")?up(fp):fp;return np.getSlideIndex(pp)===lp}),dp.forEach(fp=>{elementTransitionEnd(fp,()=>{if(cp||!np||np.destroyed)return;cp=!0,np.animating=!1;const pp=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});np.wrapperEl.dispatchEvent(pp)})})}}function EffectFade(_d){let{swiper:np,extendParams:rp,on:ap}=_d;rp({fadeEffect:{crossFade:!1}}),effectInit({effect:"fade",swiper:np,on:ap,setTranslate:()=>{const{slides:up}=np,cp=np.params.fadeEffect;for(let dp=0;dp<up.length;dp+=1){const fp=np.slides[dp];let hp=-fp.swiperSlideOffset;np.params.virtualTranslate||(hp-=np.translate);let mp=0;np.isHorizontal()||(mp=hp,hp=0);const gp=np.params.fadeEffect.crossFade?Math.max(1-Math.abs(fp.progress),0):1+Math.min(Math.max(fp.progress,-1),0),vp=effectTarget(cp,fp);vp.style.opacity=gp,vp.style.transform=`translate3d(${hp}px, ${mp}px, 0px)`}},setTransition:up=>{const cp=np.slides.map(dp=>getSlideTransformEl(dp));cp.forEach(dp=>{dp.style.transitionDuration=`${up}ms`}),effectVirtualTransitionEnd({swiper:np,duration:up,transformElements:cp,allSlides:!0})},overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!np.params.cssMode})})}function createShadow$1(_d,np,rp){const ap=`swiper-slide-shadow${rp?`-${rp}`:""}${_d?` swiper-slide-shadow-${_d}`:""}`,sp=getSlideTransformEl(np);let lp=sp.querySelector(`.${ap.split(" ").join(".")}`);return lp||(lp=createElement("div",ap.split(" ")),sp.append(lp)),lp}function EffectCoverflow(_d){let{swiper:np,extendParams:rp,on:ap}=_d;rp({coverflowEffect:{rotate:50,stretch:0,depth:100,scale:1,modifier:1,slideShadows:!0}}),effectInit({effect:"coverflow",swiper:np,on:ap,setTranslate:()=>{const{width:up,height:cp,slides:dp,slidesSizesGrid:fp}=np,pp=np.params.coverflowEffect,hp=np.isHorizontal(),mp=np.translate,gp=hp?-mp+up/2:-mp+cp/2,vp=hp?pp.rotate:-pp.rotate,xp=pp.depth;for(let Sp=0,yp=dp.length;Sp<yp;Sp+=1){const bp=dp[Sp],Ep=fp[Sp],wp=bp.swiperSlideOffset,_p=(gp-wp-Ep/2)/Ep,Cp=typeof pp.modifier=="function"?pp.modifier(_p):_p*pp.modifier;let $p=hp?vp*Cp:0,Rp=hp?0:vp*Cp,Pp=-xp*Math.abs(Cp),Op=pp.stretch;typeof Op=="string"&&Op.indexOf("%")!==-1&&(Op=parseFloat(pp.stretch)/100*Ep);let jp=hp?0:Op*Cp,Mp=hp?Op*Cp:0,Ap=1-(1-pp.scale)*Math.abs(Cp);Math.abs(Mp)<.001&&(Mp=0),Math.abs(jp)<.001&&(jp=0),Math.abs(Pp)<.001&&(Pp=0),Math.abs($p)<.001&&($p=0),Math.abs(Rp)<.001&&(Rp=0),Math.abs(Ap)<.001&&(Ap=0),np.browser&&np.browser.isSafari&&(Math.abs($p)/90%2===1&&($p+=.001),Math.abs(Rp)/90%2===1&&(Rp+=.001));const Dp=`translate3d(${Mp}px,${jp}px,${Pp}px)  rotateX(${Rp}deg) rotateY(${$p}deg) scale(${Ap})`,Fp=effectTarget(pp,bp);if(Fp.style.transform=Dp,bp.style.zIndex=-Math.abs(Math.round(Cp))+1,pp.slideShadows){let Ip=hp?bp.querySelector(".swiper-slide-shadow-left"):bp.querySelector(".swiper-slide-shadow-top"),kp=hp?bp.querySelector(".swiper-slide-shadow-right"):bp.querySelector(".swiper-slide-shadow-bottom");Ip||(Ip=createShadow$1("coverflow",bp,hp?"left":"top")),kp||(kp=createShadow$1("coverflow",bp,hp?"right":"bottom")),Ip&&(Ip.style.opacity=Cp>0?Cp:0),kp&&(kp.style.opacity=-Cp>0?-Cp:0)}}},setTransition:up=>{np.slides.map(dp=>getSlideTransformEl(dp)).forEach(dp=>{dp.style.transitionDuration=`${up}ms`,dp.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(fp=>{fp.style.transitionDuration=`${up}ms`})})},perspective:()=>!0,overwriteParams:()=>({watchSlidesProgress:!0})})}const Carousel=()=>{const[_d,np]=reactExports.useState(0),rp=sp=>{np(sp.realIndex)},ap=[{rating:8.5,title:"The Queen's Gambit"},{rating:9.5,title:"Breaking Bad"},{rating:8.1,title:"Wednesday"},{rating:8.7,title:"Stranger Things"}];return jsxRuntimeExports.jsxs("div",{className:"Carousel",children:[jsxRuntimeExports.jsx(Swiper,{modules:[EffectFade],onSlideChange:rp,effect:"fade",centeredSlides:!0,mousewheel:{invert:!1},slideToClickedSlide:!0,children:ap.map((sp,lp)=>jsxRuntimeExports.jsx(SwiperSlide,{},lp))}),jsxRuntimeExports.jsxs("div",{className:"Carousel_idx",children:[_d+1," / ",jsxRuntimeExports.jsx("span",{children:ap.length})]})]})};var PersonOutlineOutlined={},interopRequireDefault={exports:{}};(function(_d){function np(rp){return rp&&rp.__esModule?rp:{default:rp}}_d.exports=np,_d.exports.__esModule=!0,_d.exports.default=_d.exports})(interopRequireDefault);var interopRequireDefaultExports=interopRequireDefault.exports,createSvgIcon$1={};function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(_d){for(var np=1;np<arguments.length;np++){var rp=arguments[np];for(var ap in rp)Object.prototype.hasOwnProperty.call(rp,ap)&&(_d[ap]=rp[ap])}return _d},_extends$1.apply(this,arguments)}function isPlainObject$2(_d){if(typeof _d!="object"||_d===null)return!1;const np=Object.getPrototypeOf(_d);return(np===null||np===Object.prototype||Object.getPrototypeOf(np)===null)&&!(Symbol.toStringTag in _d)&&!(Symbol.iterator in _d)}function deepClone$1(_d){if(!isPlainObject$2(_d))return _d;const np={};return Object.keys(_d).forEach(rp=>{np[rp]=deepClone$1(_d[rp])}),np}function deepmerge(_d,np,rp={clone:!0}){const ap=rp.clone?_extends$1({},_d):_d;return isPlainObject$2(_d)&&isPlainObject$2(np)&&Object.keys(np).forEach(sp=>{sp!=="__proto__"&&(isPlainObject$2(np[sp])&&sp in _d&&isPlainObject$2(_d[sp])?ap[sp]=deepmerge(_d[sp],np[sp],rp):rp.clone?ap[sp]=isPlainObject$2(np[sp])?deepClone$1(np[sp]):np[sp]:ap[sp]=np[sp])}),ap}var propTypes={exports:{}},ReactPropTypesSecret$1="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1=ReactPropTypesSecret$1,ReactPropTypesSecret=ReactPropTypesSecret_1;function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;var factoryWithThrowingShims=function(){function _d(ap,sp,lp,up,cp,dp){if(dp!==ReactPropTypesSecret){var fp=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw fp.name="Invariant Violation",fp}}_d.isRequired=_d;function np(){return _d}var rp={array:_d,bigint:_d,bool:_d,func:_d,number:_d,object:_d,string:_d,symbol:_d,any:_d,arrayOf:np,element:_d,elementType:_d,instanceOf:np,node:_d,objectOf:np,oneOf:np,oneOfType:np,shape:np,exact:np,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return rp.PropTypes=rp,rp};propTypes.exports=factoryWithThrowingShims();var propTypesExports=propTypes.exports;function formatMuiErrorMessage(_d){let np="https://mui.com/production-error/?code="+_d;for(let rp=1;rp<arguments.length;rp+=1)np+="&args[]="+encodeURIComponent(arguments[rp]);return"Minified MUI error #"+_d+"; visit "+np+" for the full message."}function capitalize(_d){if(typeof _d!="string")throw new Error(formatMuiErrorMessage(7));return _d.charAt(0).toUpperCase()+_d.slice(1)}function createChainedFunction(..._d){return _d.reduce((np,rp)=>rp==null?np:function(...sp){np.apply(this,sp),rp.apply(this,sp)},()=>{})}function debounce$1(_d,np=166){let rp;function ap(...sp){const lp=()=>{_d.apply(this,sp)};clearTimeout(rp),rp=setTimeout(lp,np)}return ap.clear=()=>{clearTimeout(rp)},ap}function deprecatedPropType(_d,np){return()=>null}function isMuiElement(_d,np){var rp,ap;return reactExports.isValidElement(_d)&&np.indexOf((rp=_d.type.muiName)!=null?rp:(ap=_d.type)==null||(ap=ap._payload)==null||(ap=ap.value)==null?void 0:ap.muiName)!==-1}function ownerDocument(_d){return _d&&_d.ownerDocument||document}function ownerWindow(_d){return ownerDocument(_d).defaultView||window}function requirePropFactory(_d,np){return()=>null}function setRef(_d,np){typeof _d=="function"?_d(np):_d&&(_d.current=np)}const useEnhancedEffect=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect,useEnhancedEffect$1=useEnhancedEffect;let globalId=0;function useGlobalId(_d){const[np,rp]=reactExports.useState(_d),ap=_d||np;return reactExports.useEffect(()=>{np==null&&(globalId+=1,rp(`mui-${globalId}`))},[np]),ap}const maybeReactUseId=React$1.useId;function useId(_d){if(maybeReactUseId!==void 0){const np=maybeReactUseId();return _d??np}return useGlobalId(_d)}function unsupportedProp(_d,np,rp,ap,sp){return null}function useControlled({controlled:_d,default:np,name:rp,state:ap="value"}){const{current:sp}=reactExports.useRef(_d!==void 0),[lp,up]=reactExports.useState(np),cp=sp?_d:lp,dp=reactExports.useCallback(fp=>{sp||up(fp)},[]);return[cp,dp]}function useEventCallback(_d){const np=reactExports.useRef(_d);return useEnhancedEffect$1(()=>{np.current=_d}),reactExports.useRef((...rp)=>(0,np.current)(...rp)).current}function useForkRef(..._d){return reactExports.useMemo(()=>_d.every(np=>np==null)?null:np=>{_d.forEach(rp=>{setRef(rp,np)})},_d)}let hadKeyboardEvent=!0,hadFocusVisibleRecently=!1,hadFocusVisibleRecentlyTimeout;const inputTypesWhitelist={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function focusTriggersKeyboardModality(_d){const{type:np,tagName:rp}=_d;return!!(rp==="INPUT"&&inputTypesWhitelist[np]&&!_d.readOnly||rp==="TEXTAREA"&&!_d.readOnly||_d.isContentEditable)}function handleKeyDown(_d){_d.metaKey||_d.altKey||_d.ctrlKey||(hadKeyboardEvent=!0)}function handlePointerDown(){hadKeyboardEvent=!1}function handleVisibilityChange(){this.visibilityState==="hidden"&&hadFocusVisibleRecently&&(hadKeyboardEvent=!0)}function prepare(_d){_d.addEventListener("keydown",handleKeyDown,!0),_d.addEventListener("mousedown",handlePointerDown,!0),_d.addEventListener("pointerdown",handlePointerDown,!0),_d.addEventListener("touchstart",handlePointerDown,!0),_d.addEventListener("visibilitychange",handleVisibilityChange,!0)}function isFocusVisible(_d){const{target:np}=_d;try{return np.matches(":focus-visible")}catch{}return hadKeyboardEvent||focusTriggersKeyboardModality(np)}function useIsFocusVisible(){const _d=reactExports.useCallback(sp=>{sp!=null&&prepare(sp.ownerDocument)},[]),np=reactExports.useRef(!1);function rp(){return np.current?(hadFocusVisibleRecently=!0,window.clearTimeout(hadFocusVisibleRecentlyTimeout),hadFocusVisibleRecentlyTimeout=window.setTimeout(()=>{hadFocusVisibleRecently=!1},100),np.current=!1,!0):!1}function ap(sp){return isFocusVisible(sp)?(np.current=!0,!0):!1}return{isFocusVisibleRef:np,onFocus:ap,onBlur:rp,ref:_d}}function resolveProps(_d,np){const rp=_extends$1({},np);return Object.keys(_d).forEach(ap=>{if(ap.toString().match(/^(components|slots)$/))rp[ap]=_extends$1({},_d[ap],rp[ap]);else if(ap.toString().match(/^(componentsProps|slotProps)$/)){const sp=_d[ap]||{},lp=np[ap];rp[ap]={},!lp||!Object.keys(lp)?rp[ap]=sp:!sp||!Object.keys(sp)?rp[ap]=lp:(rp[ap]=_extends$1({},lp),Object.keys(sp).forEach(up=>{rp[ap][up]=resolveProps(sp[up],lp[up])}))}else rp[ap]===void 0&&(rp[ap]=_d[ap])}),rp}function composeClasses(_d,np,rp=void 0){const ap={};return Object.keys(_d).forEach(sp=>{ap[sp]=_d[sp].reduce((lp,up)=>{if(up){const cp=np(up);cp!==""&&lp.push(cp),rp&&rp[up]&&lp.push(rp[up])}return lp},[]).join(" ")}),ap}const defaultGenerator=_d=>_d,createClassNameGenerator=()=>{let _d=defaultGenerator;return{configure(np){_d=np},generate(np){return _d(np)},reset(){_d=defaultGenerator}}},ClassNameGenerator=createClassNameGenerator(),globalStateClasses={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function generateUtilityClass(_d,np,rp="Mui"){const ap=globalStateClasses[np];return ap?`${rp}-${ap}`:`${ClassNameGenerator.generate(_d)}-${np}`}function generateUtilityClasses(_d,np,rp="Mui"){const ap={};return np.forEach(sp=>{ap[sp]=generateUtilityClass(_d,sp,rp)}),ap}function clamp(_d,np=Number.MIN_SAFE_INTEGER,rp=Number.MAX_SAFE_INTEGER){return Math.max(np,Math.min(_d,rp))}function _objectWithoutPropertiesLoose(_d,np){if(_d==null)return{};var rp={},ap=Object.keys(_d),sp,lp;for(lp=0;lp<ap.length;lp++)sp=ap[lp],!(np.indexOf(sp)>=0)&&(rp[sp]=_d[sp]);return rp}function r$1(_d){var np,rp,ap="";if(typeof _d=="string"||typeof _d=="number")ap+=_d;else if(typeof _d=="object")if(Array.isArray(_d)){var sp=_d.length;for(np=0;np<sp;np++)_d[np]&&(rp=r$1(_d[np]))&&(ap&&(ap+=" "),ap+=rp)}else for(rp in _d)_d[rp]&&(ap&&(ap+=" "),ap+=rp);return ap}function clsx(){for(var _d,np,rp=0,ap="",sp=arguments.length;rp<sp;rp++)(_d=arguments[rp])&&(np=r$1(_d))&&(ap&&(ap+=" "),ap+=np);return ap}function memoize$1(_d){var np=Object.create(null);return function(rp){return np[rp]===void 0&&(np[rp]=_d(rp)),np[rp]}}var reactPropsRegex=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,isPropValid=memoize$1(function(_d){return reactPropsRegex.test(_d)||_d.charCodeAt(0)===111&&_d.charCodeAt(1)===110&&_d.charCodeAt(2)<91});function sheetForTag(_d){if(_d.sheet)return _d.sheet;for(var np=0;np<document.styleSheets.length;np++)if(document.styleSheets[np].ownerNode===_d)return document.styleSheets[np]}function createStyleElement(_d){var np=document.createElement("style");return np.setAttribute("data-emotion",_d.key),_d.nonce!==void 0&&np.setAttribute("nonce",_d.nonce),np.appendChild(document.createTextNode("")),np.setAttribute("data-s",""),np}var StyleSheet=function(){function _d(rp){var ap=this;this._insertTag=function(sp){var lp;ap.tags.length===0?ap.insertionPoint?lp=ap.insertionPoint.nextSibling:ap.prepend?lp=ap.container.firstChild:lp=ap.before:lp=ap.tags[ap.tags.length-1].nextSibling,ap.container.insertBefore(sp,lp),ap.tags.push(sp)},this.isSpeedy=rp.speedy===void 0?!0:rp.speedy,this.tags=[],this.ctr=0,this.nonce=rp.nonce,this.key=rp.key,this.container=rp.container,this.prepend=rp.prepend,this.insertionPoint=rp.insertionPoint,this.before=null}var np=_d.prototype;return np.hydrate=function(ap){ap.forEach(this._insertTag)},np.insert=function(ap){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(createStyleElement(this));var sp=this.tags[this.tags.length-1];if(this.isSpeedy){var lp=sheetForTag(sp);try{lp.insertRule(ap,lp.cssRules.length)}catch{}}else sp.appendChild(document.createTextNode(ap));this.ctr++},np.flush=function(){this.tags.forEach(function(ap){return ap.parentNode&&ap.parentNode.removeChild(ap)}),this.tags=[],this.ctr=0},_d}(),MS="-ms-",MOZ="-moz-",WEBKIT="-webkit-",COMMENT="comm",RULESET="rule",DECLARATION="decl",IMPORT="@import",KEYFRAMES="@keyframes",LAYER="@layer",abs=Math.abs,from=String.fromCharCode,assign$3=Object.assign;function hash(_d,np){return charat(_d,0)^45?(((np<<2^charat(_d,0))<<2^charat(_d,1))<<2^charat(_d,2))<<2^charat(_d,3):0}function trim$1(_d){return _d.trim()}function match(_d,np){return(_d=np.exec(_d))?_d[0]:_d}function replace(_d,np,rp){return _d.replace(np,rp)}function indexof(_d,np){return _d.indexOf(np)}function charat(_d,np){return _d.charCodeAt(np)|0}function substr(_d,np,rp){return _d.slice(np,rp)}function strlen(_d){return _d.length}function sizeof(_d){return _d.length}function append(_d,np){return np.push(_d),_d}function combine(_d,np){return _d.map(np).join("")}var line=1,column=1,length=0,position=0,character=0,characters="";function node(_d,np,rp,ap,sp,lp,up){return{value:_d,root:np,parent:rp,type:ap,props:sp,children:lp,line,column,length:up,return:""}}function copy(_d,np){return assign$3(node("",null,null,"",null,null,0),_d,{length:-_d.length},np)}function char(){return character}function prev(){return character=position>0?charat(characters,--position):0,column--,character===10&&(column=1,line--),character}function next(){return character=position<length?charat(characters,position++):0,column++,character===10&&(column=1,line++),character}function peek(){return charat(characters,position)}function caret(){return position}function slice$1(_d,np){return substr(characters,_d,np)}function token(_d){switch(_d){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function alloc(_d){return line=column=1,length=strlen(characters=_d),position=0,[]}function dealloc(_d){return characters="",_d}function delimit(_d){return trim$1(slice$1(position-1,delimiter(_d===91?_d+2:_d===40?_d+1:_d)))}function whitespace(_d){for(;(character=peek())&&character<33;)next();return token(_d)>2||token(character)>3?"":" "}function escaping(_d,np){for(;--np&&next()&&!(character<48||character>102||character>57&&character<65||character>70&&character<97););return slice$1(_d,caret()+(np<6&&peek()==32&&next()==32))}function delimiter(_d){for(;next();)switch(character){case _d:return position;case 34:case 39:_d!==34&&_d!==39&&delimiter(character);break;case 40:_d===41&&delimiter(_d);break;case 92:next();break}return position}function commenter(_d,np){for(;next()&&_d+character!==57;)if(_d+character===84&&peek()===47)break;return"/*"+slice$1(np,position-1)+"*"+from(_d===47?_d:next())}function identifier(_d){for(;!token(peek());)next();return slice$1(_d,position)}function compile(_d){return dealloc(parse$2("",null,null,null,[""],_d=alloc(_d),0,[0],_d))}function parse$2(_d,np,rp,ap,sp,lp,up,cp,dp){for(var fp=0,pp=0,hp=up,mp=0,gp=0,vp=0,xp=1,Sp=1,yp=1,bp=0,Ep="",wp=sp,_p=lp,Cp=ap,$p=Ep;Sp;)switch(vp=bp,bp=next()){case 40:if(vp!=108&&charat($p,hp-1)==58){indexof($p+=replace(delimit(bp),"&","&\f"),"&\f")!=-1&&(yp=-1);break}case 34:case 39:case 91:$p+=delimit(bp);break;case 9:case 10:case 13:case 32:$p+=whitespace(vp);break;case 92:$p+=escaping(caret()-1,7);continue;case 47:switch(peek()){case 42:case 47:append(comment(commenter(next(),caret()),np,rp),dp);break;default:$p+="/"}break;case 123*xp:cp[fp++]=strlen($p)*yp;case 125*xp:case 59:case 0:switch(bp){case 0:case 125:Sp=0;case 59+pp:yp==-1&&($p=replace($p,/\f/g,"")),gp>0&&strlen($p)-hp&&append(gp>32?declaration($p+";",ap,rp,hp-1):declaration(replace($p," ","")+";",ap,rp,hp-2),dp);break;case 59:$p+=";";default:if(append(Cp=ruleset($p,np,rp,fp,pp,sp,cp,Ep,wp=[],_p=[],hp),lp),bp===123)if(pp===0)parse$2($p,np,Cp,Cp,wp,lp,hp,cp,_p);else switch(mp===99&&charat($p,3)===110?100:mp){case 100:case 108:case 109:case 115:parse$2(_d,Cp,Cp,ap&&append(ruleset(_d,Cp,Cp,0,0,sp,cp,Ep,sp,wp=[],hp),_p),sp,_p,hp,cp,ap?wp:_p);break;default:parse$2($p,Cp,Cp,Cp,[""],_p,0,cp,_p)}}fp=pp=gp=0,xp=yp=1,Ep=$p="",hp=up;break;case 58:hp=1+strlen($p),gp=vp;default:if(xp<1){if(bp==123)--xp;else if(bp==125&&xp++==0&&prev()==125)continue}switch($p+=from(bp),bp*xp){case 38:yp=pp>0?1:($p+="\f",-1);break;case 44:cp[fp++]=(strlen($p)-1)*yp,yp=1;break;case 64:peek()===45&&($p+=delimit(next())),mp=peek(),pp=hp=strlen(Ep=$p+=identifier(caret())),bp++;break;case 45:vp===45&&strlen($p)==2&&(xp=0)}}return lp}function ruleset(_d,np,rp,ap,sp,lp,up,cp,dp,fp,pp){for(var hp=sp-1,mp=sp===0?lp:[""],gp=sizeof(mp),vp=0,xp=0,Sp=0;vp<ap;++vp)for(var yp=0,bp=substr(_d,hp+1,hp=abs(xp=up[vp])),Ep=_d;yp<gp;++yp)(Ep=trim$1(xp>0?mp[yp]+" "+bp:replace(bp,/&\f/g,mp[yp])))&&(dp[Sp++]=Ep);return node(_d,np,rp,sp===0?RULESET:cp,dp,fp,pp)}function comment(_d,np,rp){return node(_d,np,rp,COMMENT,from(char()),substr(_d,2,-2),0)}function declaration(_d,np,rp,ap){return node(_d,np,rp,DECLARATION,substr(_d,0,ap),substr(_d,ap+1,-1),ap)}function serialize(_d,np){for(var rp="",ap=sizeof(_d),sp=0;sp<ap;sp++)rp+=np(_d[sp],sp,_d,np)||"";return rp}function stringify$3(_d,np,rp,ap){switch(_d.type){case LAYER:if(_d.children.length)break;case IMPORT:case DECLARATION:return _d.return=_d.return||_d.value;case COMMENT:return"";case KEYFRAMES:return _d.return=_d.value+"{"+serialize(_d.children,ap)+"}";case RULESET:_d.value=_d.props.join(",")}return strlen(rp=serialize(_d.children,ap))?_d.return=_d.value+"{"+rp+"}":""}function middleware(_d){var np=sizeof(_d);return function(rp,ap,sp,lp){for(var up="",cp=0;cp<np;cp++)up+=_d[cp](rp,ap,sp,lp)||"";return up}}function rulesheet(_d){return function(np){np.root||(np=np.return)&&_d(np)}}var identifierWithPointTracking=function(np,rp,ap){for(var sp=0,lp=0;sp=lp,lp=peek(),sp===38&&lp===12&&(rp[ap]=1),!token(lp);)next();return slice$1(np,position)},toRules=function(np,rp){var ap=-1,sp=44;do switch(token(sp)){case 0:sp===38&&peek()===12&&(rp[ap]=1),np[ap]+=identifierWithPointTracking(position-1,rp,ap);break;case 2:np[ap]+=delimit(sp);break;case 4:if(sp===44){np[++ap]=peek()===58?"&\f":"",rp[ap]=np[ap].length;break}default:np[ap]+=from(sp)}while(sp=next());return np},getRules=function(np,rp){return dealloc(toRules(alloc(np),rp))},fixedElements=new WeakMap,compat=function(np){if(!(np.type!=="rule"||!np.parent||np.length<1)){for(var rp=np.value,ap=np.parent,sp=np.column===ap.column&&np.line===ap.line;ap.type!=="rule";)if(ap=ap.parent,!ap)return;if(!(np.props.length===1&&rp.charCodeAt(0)!==58&&!fixedElements.get(ap))&&!sp){fixedElements.set(np,!0);for(var lp=[],up=getRules(rp,lp),cp=ap.props,dp=0,fp=0;dp<up.length;dp++)for(var pp=0;pp<cp.length;pp++,fp++)np.props[fp]=lp[dp]?up[dp].replace(/&\f/g,cp[pp]):cp[pp]+" "+up[dp]}}},removeLabel=function(np){if(np.type==="decl"){var rp=np.value;rp.charCodeAt(0)===108&&rp.charCodeAt(2)===98&&(np.return="",np.value="")}};function prefix(_d,np){switch(hash(_d,np)){case 5103:return WEBKIT+"print-"+_d+_d;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return WEBKIT+_d+_d;case 5349:case 4246:case 4810:case 6968:case 2756:return WEBKIT+_d+MOZ+_d+MS+_d+_d;case 6828:case 4268:return WEBKIT+_d+MS+_d+_d;case 6165:return WEBKIT+_d+MS+"flex-"+_d+_d;case 5187:return WEBKIT+_d+replace(_d,/(\w+).+(:[^]+)/,WEBKIT+"box-$1$2"+MS+"flex-$1$2")+_d;case 5443:return WEBKIT+_d+MS+"flex-item-"+replace(_d,/flex-|-self/,"")+_d;case 4675:return WEBKIT+_d+MS+"flex-line-pack"+replace(_d,/align-content|flex-|-self/,"")+_d;case 5548:return WEBKIT+_d+MS+replace(_d,"shrink","negative")+_d;case 5292:return WEBKIT+_d+MS+replace(_d,"basis","preferred-size")+_d;case 6060:return WEBKIT+"box-"+replace(_d,"-grow","")+WEBKIT+_d+MS+replace(_d,"grow","positive")+_d;case 4554:return WEBKIT+replace(_d,/([^-])(transform)/g,"$1"+WEBKIT+"$2")+_d;case 6187:return replace(replace(replace(_d,/(zoom-|grab)/,WEBKIT+"$1"),/(image-set)/,WEBKIT+"$1"),_d,"")+_d;case 5495:case 3959:return replace(_d,/(image-set\([^]*)/,WEBKIT+"$1$`$1");case 4968:return replace(replace(_d,/(.+:)(flex-)?(.*)/,WEBKIT+"box-pack:$3"+MS+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+WEBKIT+_d+_d;case 4095:case 3583:case 4068:case 2532:return replace(_d,/(.+)-inline(.+)/,WEBKIT+"$1$2")+_d;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(strlen(_d)-1-np>6)switch(charat(_d,np+1)){case 109:if(charat(_d,np+4)!==45)break;case 102:return replace(_d,/(.+:)(.+)-([^]+)/,"$1"+WEBKIT+"$2-$3$1"+MOZ+(charat(_d,np+3)==108?"$3":"$2-$3"))+_d;case 115:return~indexof(_d,"stretch")?prefix(replace(_d,"stretch","fill-available"),np)+_d:_d}break;case 4949:if(charat(_d,np+1)!==115)break;case 6444:switch(charat(_d,strlen(_d)-3-(~indexof(_d,"!important")&&10))){case 107:return replace(_d,":",":"+WEBKIT)+_d;case 101:return replace(_d,/(.+:)([^;!]+)(;|!.+)?/,"$1"+WEBKIT+(charat(_d,14)===45?"inline-":"")+"box$3$1"+WEBKIT+"$2$3$1"+MS+"$2box$3")+_d}break;case 5936:switch(charat(_d,np+11)){case 114:return WEBKIT+_d+MS+replace(_d,/[svh]\w+-[tblr]{2}/,"tb")+_d;case 108:return WEBKIT+_d+MS+replace(_d,/[svh]\w+-[tblr]{2}/,"tb-rl")+_d;case 45:return WEBKIT+_d+MS+replace(_d,/[svh]\w+-[tblr]{2}/,"lr")+_d}return WEBKIT+_d+MS+_d+_d}return _d}var prefixer=function(np,rp,ap,sp){if(np.length>-1&&!np.return)switch(np.type){case DECLARATION:np.return=prefix(np.value,np.length);break;case KEYFRAMES:return serialize([copy(np,{value:replace(np.value,"@","@"+WEBKIT)})],sp);case RULESET:if(np.length)return combine(np.props,function(lp){switch(match(lp,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return serialize([copy(np,{props:[replace(lp,/:(read-\w+)/,":"+MOZ+"$1")]})],sp);case"::placeholder":return serialize([copy(np,{props:[replace(lp,/:(plac\w+)/,":"+WEBKIT+"input-$1")]}),copy(np,{props:[replace(lp,/:(plac\w+)/,":"+MOZ+"$1")]}),copy(np,{props:[replace(lp,/:(plac\w+)/,MS+"input-$1")]})],sp)}return""})}},defaultStylisPlugins=[prefixer],createCache=function(np){var rp=np.key;if(rp==="css"){var ap=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(ap,function(xp){var Sp=xp.getAttribute("data-emotion");Sp.indexOf(" ")!==-1&&(document.head.appendChild(xp),xp.setAttribute("data-s",""))})}var sp=np.stylisPlugins||defaultStylisPlugins,lp={},up,cp=[];up=np.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+rp+' "]'),function(xp){for(var Sp=xp.getAttribute("data-emotion").split(" "),yp=1;yp<Sp.length;yp++)lp[Sp[yp]]=!0;cp.push(xp)});var dp,fp=[compat,removeLabel];{var pp,hp=[stringify$3,rulesheet(function(xp){pp.insert(xp)})],mp=middleware(fp.concat(sp,hp)),gp=function(Sp){return serialize(compile(Sp),mp)};dp=function(Sp,yp,bp,Ep){pp=bp,gp(Sp?Sp+"{"+yp.styles+"}":yp.styles),Ep&&(vp.inserted[yp.name]=!0)}}var vp={key:rp,sheet:new StyleSheet({key:rp,container:up,nonce:np.nonce,speedy:np.speedy,prepend:np.prepend,insertionPoint:np.insertionPoint}),nonce:np.nonce,inserted:lp,registered:{},insert:dp};return vp.sheet.hydrate(cp),vp},isBrowser=!0;function getRegisteredStyles(_d,np,rp){var ap="";return rp.split(" ").forEach(function(sp){_d[sp]!==void 0?np.push(_d[sp]+";"):ap+=sp+" "}),ap}var registerStyles=function(np,rp,ap){var sp=np.key+"-"+rp.name;(ap===!1||isBrowser===!1)&&np.registered[sp]===void 0&&(np.registered[sp]=rp.styles)},insertStyles=function(np,rp,ap){registerStyles(np,rp,ap);var sp=np.key+"-"+rp.name;if(np.inserted[rp.name]===void 0){var lp=rp;do np.insert(rp===lp?"."+sp:"",lp,np.sheet,!0),lp=lp.next;while(lp!==void 0)}};function murmur2(_d){for(var np=0,rp,ap=0,sp=_d.length;sp>=4;++ap,sp-=4)rp=_d.charCodeAt(ap)&255|(_d.charCodeAt(++ap)&255)<<8|(_d.charCodeAt(++ap)&255)<<16|(_d.charCodeAt(++ap)&255)<<24,rp=(rp&65535)*1540483477+((rp>>>16)*59797<<16),rp^=rp>>>24,np=(rp&65535)*1540483477+((rp>>>16)*59797<<16)^(np&65535)*1540483477+((np>>>16)*59797<<16);switch(sp){case 3:np^=(_d.charCodeAt(ap+2)&255)<<16;case 2:np^=(_d.charCodeAt(ap+1)&255)<<8;case 1:np^=_d.charCodeAt(ap)&255,np=(np&65535)*1540483477+((np>>>16)*59797<<16)}return np^=np>>>13,np=(np&65535)*1540483477+((np>>>16)*59797<<16),((np^np>>>15)>>>0).toString(36)}var unitlessKeys={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},hyphenateRegex=/[A-Z]|^ms/g,animationRegex=/_EMO_([^_]+?)_([^]*?)_EMO_/g,isCustomProperty=function(np){return np.charCodeAt(1)===45},isProcessableValue=function(np){return np!=null&&typeof np!="boolean"},processStyleName=memoize$1(function(_d){return isCustomProperty(_d)?_d:_d.replace(hyphenateRegex,"-$&").toLowerCase()}),processStyleValue=function(np,rp){switch(np){case"animation":case"animationName":if(typeof rp=="string")return rp.replace(animationRegex,function(ap,sp,lp){return cursor={name:sp,styles:lp,next:cursor},sp})}return unitlessKeys[np]!==1&&!isCustomProperty(np)&&typeof rp=="number"&&rp!==0?rp+"px":rp},noComponentSelectorMessage="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function handleInterpolation(_d,np,rp){if(rp==null)return"";if(rp.__emotion_styles!==void 0)return rp;switch(typeof rp){case"boolean":return"";case"object":{if(rp.anim===1)return cursor={name:rp.name,styles:rp.styles,next:cursor},rp.name;if(rp.styles!==void 0){var ap=rp.next;if(ap!==void 0)for(;ap!==void 0;)cursor={name:ap.name,styles:ap.styles,next:cursor},ap=ap.next;var sp=rp.styles+";";return sp}return createStringFromObject(_d,np,rp)}case"function":{if(_d!==void 0){var lp=cursor,up=rp(_d);return cursor=lp,handleInterpolation(_d,np,up)}break}}if(np==null)return rp;var cp=np[rp];return cp!==void 0?cp:rp}function createStringFromObject(_d,np,rp){var ap="";if(Array.isArray(rp))for(var sp=0;sp<rp.length;sp++)ap+=handleInterpolation(_d,np,rp[sp])+";";else for(var lp in rp){var up=rp[lp];if(typeof up!="object")np!=null&&np[up]!==void 0?ap+=lp+"{"+np[up]+"}":isProcessableValue(up)&&(ap+=processStyleName(lp)+":"+processStyleValue(lp,up)+";");else if(Array.isArray(up)&&typeof up[0]=="string"&&(np==null||np[up[0]]===void 0))for(var cp=0;cp<up.length;cp++)isProcessableValue(up[cp])&&(ap+=processStyleName(lp)+":"+processStyleValue(lp,up[cp])+";");else{var dp=handleInterpolation(_d,np,up);switch(lp){case"animation":case"animationName":{ap+=processStyleName(lp)+":"+dp+";";break}default:ap+=lp+"{"+dp+"}"}}}return ap}var labelPattern=/label:\s*([^\s;\n{]+)\s*(;|$)/g,cursor,serializeStyles=function(np,rp,ap){if(np.length===1&&typeof np[0]=="object"&&np[0]!==null&&np[0].styles!==void 0)return np[0];var sp=!0,lp="";cursor=void 0;var up=np[0];up==null||up.raw===void 0?(sp=!1,lp+=handleInterpolation(ap,rp,up)):lp+=up[0];for(var cp=1;cp<np.length;cp++)lp+=handleInterpolation(ap,rp,np[cp]),sp&&(lp+=up[cp]);labelPattern.lastIndex=0;for(var dp="",fp;(fp=labelPattern.exec(lp))!==null;)dp+="-"+fp[1];var pp=murmur2(lp)+dp;return{name:pp,styles:lp,next:cursor}},syncFallback=function(np){return np()},useInsertionEffect=React$1.useInsertionEffect?React$1.useInsertionEffect:!1,useInsertionEffectAlwaysWithSyncFallback=useInsertionEffect||syncFallback,EmotionCacheContext=reactExports.createContext(typeof HTMLElement<"u"?createCache({key:"css"}):null);EmotionCacheContext.Provider;var withEmotionCache=function(np){return reactExports.forwardRef(function(rp,ap){var sp=reactExports.useContext(EmotionCacheContext);return np(rp,sp,ap)})},ThemeContext=reactExports.createContext({}),testOmitPropsOnStringTag=isPropValid,testOmitPropsOnComponent=function(np){return np!=="theme"},getDefaultShouldForwardProp=function(np){return typeof np=="string"&&np.charCodeAt(0)>96?testOmitPropsOnStringTag:testOmitPropsOnComponent},composeShouldForwardProps=function(np,rp,ap){var sp;if(rp){var lp=rp.shouldForwardProp;sp=np.__emotion_forwardProp&&lp?function(up){return np.__emotion_forwardProp(up)&&lp(up)}:lp}return typeof sp!="function"&&ap&&(sp=np.__emotion_forwardProp),sp},Insertion=function(np){var rp=np.cache,ap=np.serialized,sp=np.isStringTag;return registerStyles(rp,ap,sp),useInsertionEffectAlwaysWithSyncFallback(function(){return insertStyles(rp,ap,sp)}),null},createStyled$1=function _d(np,rp){var ap=np.__emotion_real===np,sp=ap&&np.__emotion_base||np,lp,up;rp!==void 0&&(lp=rp.label,up=rp.target);var cp=composeShouldForwardProps(np,rp,ap),dp=cp||getDefaultShouldForwardProp(sp),fp=!dp("as");return function(){var pp=arguments,hp=ap&&np.__emotion_styles!==void 0?np.__emotion_styles.slice(0):[];if(lp!==void 0&&hp.push("label:"+lp+";"),pp[0]==null||pp[0].raw===void 0)hp.push.apply(hp,pp);else{hp.push(pp[0][0]);for(var mp=pp.length,gp=1;gp<mp;gp++)hp.push(pp[gp],pp[0][gp])}var vp=withEmotionCache(function(xp,Sp,yp){var bp=fp&&xp.as||sp,Ep="",wp=[],_p=xp;if(xp.theme==null){_p={};for(var Cp in xp)_p[Cp]=xp[Cp];_p.theme=reactExports.useContext(ThemeContext)}typeof xp.className=="string"?Ep=getRegisteredStyles(Sp.registered,wp,xp.className):xp.className!=null&&(Ep=xp.className+" ");var $p=serializeStyles(hp.concat(wp),Sp.registered,_p);Ep+=Sp.key+"-"+$p.name,up!==void 0&&(Ep+=" "+up);var Rp=fp&&cp===void 0?getDefaultShouldForwardProp(bp):dp,Pp={};for(var Op in xp)fp&&Op==="as"||Rp(Op)&&(Pp[Op]=xp[Op]);return Pp.className=Ep,Pp.ref=yp,reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(Insertion,{cache:Sp,serialized:$p,isStringTag:typeof bp=="string"}),reactExports.createElement(bp,Pp))});return vp.displayName=lp!==void 0?lp:"Styled("+(typeof sp=="string"?sp:sp.displayName||sp.name||"Component")+")",vp.defaultProps=np.defaultProps,vp.__emotion_real=vp,vp.__emotion_base=sp,vp.__emotion_styles=hp,vp.__emotion_forwardProp=cp,Object.defineProperty(vp,"toString",{value:function(){return"."+up}}),vp.withComponent=function(xp,Sp){return _d(xp,_extends$1({},rp,Sp,{shouldForwardProp:composeShouldForwardProps(vp,Sp,!0)})).apply(void 0,hp)},vp}},tags=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],newStyled=createStyled$1.bind();tags.forEach(function(_d){newStyled[_d]=newStyled(_d)});function styled$1(_d,np){return newStyled(_d,np)}const internal_processStyles=(_d,np)=>{Array.isArray(_d.__emotion_styles)&&(_d.__emotion_styles=np(_d.__emotion_styles))},_excluded$8=["values","unit","step"],sortBreakpointsValues=_d=>{const np=Object.keys(_d).map(rp=>({key:rp,val:_d[rp]}))||[];return np.sort((rp,ap)=>rp.val-ap.val),np.reduce((rp,ap)=>_extends$1({},rp,{[ap.key]:ap.val}),{})};function createBreakpoints(_d){const{values:np={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:rp="px",step:ap=5}=_d,sp=_objectWithoutPropertiesLoose(_d,_excluded$8),lp=sortBreakpointsValues(np),up=Object.keys(lp);function cp(mp){return`@media (min-width:${typeof np[mp]=="number"?np[mp]:mp}${rp})`}function dp(mp){return`@media (max-width:${(typeof np[mp]=="number"?np[mp]:mp)-ap/100}${rp})`}function fp(mp,gp){const vp=up.indexOf(gp);return`@media (min-width:${typeof np[mp]=="number"?np[mp]:mp}${rp}) and (max-width:${(vp!==-1&&typeof np[up[vp]]=="number"?np[up[vp]]:gp)-ap/100}${rp})`}function pp(mp){return up.indexOf(mp)+1<up.length?fp(mp,up[up.indexOf(mp)+1]):cp(mp)}function hp(mp){const gp=up.indexOf(mp);return gp===0?cp(up[1]):gp===up.length-1?dp(up[gp]):fp(mp,up[up.indexOf(mp)+1]).replace("@media","@media not all and")}return _extends$1({keys:up,values:lp,up:cp,down:dp,between:fp,only:pp,not:hp,unit:rp},sp)}const shape={borderRadius:4},shape$1=shape;function merge$1(_d,np){return np?deepmerge(_d,np,{clone:!1}):_d}const values={xs:0,sm:600,md:900,lg:1200,xl:1536},defaultBreakpoints={keys:["xs","sm","md","lg","xl"],up:_d=>`@media (min-width:${values[_d]}px)`};function handleBreakpoints(_d,np,rp){const ap=_d.theme||{};if(Array.isArray(np)){const lp=ap.breakpoints||defaultBreakpoints;return np.reduce((up,cp,dp)=>(up[lp.up(lp.keys[dp])]=rp(np[dp]),up),{})}if(typeof np=="object"){const lp=ap.breakpoints||defaultBreakpoints;return Object.keys(np).reduce((up,cp)=>{if(Object.keys(lp.values||values).indexOf(cp)!==-1){const dp=lp.up(cp);up[dp]=rp(np[cp],cp)}else{const dp=cp;up[dp]=np[dp]}return up},{})}return rp(np)}function createEmptyBreakpointObject(_d={}){var np;return((np=_d.keys)==null?void 0:np.reduce((ap,sp)=>{const lp=_d.up(sp);return ap[lp]={},ap},{}))||{}}function removeUnusedBreakpoints(_d,np){return _d.reduce((rp,ap)=>{const sp=rp[ap];return(!sp||Object.keys(sp).length===0)&&delete rp[ap],rp},np)}function getPath(_d,np,rp=!0){if(!np||typeof np!="string")return null;if(_d&&_d.vars&&rp){const ap=`vars.${np}`.split(".").reduce((sp,lp)=>sp&&sp[lp]?sp[lp]:null,_d);if(ap!=null)return ap}return np.split(".").reduce((ap,sp)=>ap&&ap[sp]!=null?ap[sp]:null,_d)}function getStyleValue(_d,np,rp,ap=rp){let sp;return typeof _d=="function"?sp=_d(rp):Array.isArray(_d)?sp=_d[rp]||ap:sp=getPath(_d,rp)||ap,np&&(sp=np(sp,ap,_d)),sp}function style$1(_d){const{prop:np,cssProperty:rp=_d.prop,themeKey:ap,transform:sp}=_d,lp=up=>{if(up[np]==null)return null;const cp=up[np],dp=up.theme,fp=getPath(dp,ap)||{};return handleBreakpoints(up,cp,hp=>{let mp=getStyleValue(fp,sp,hp);return hp===mp&&typeof hp=="string"&&(mp=getStyleValue(fp,sp,`${np}${hp==="default"?"":capitalize(hp)}`,hp)),rp===!1?mp:{[rp]:mp}})};return lp.propTypes={},lp.filterProps=[np],lp}function memoize(_d){const np={};return rp=>(np[rp]===void 0&&(np[rp]=_d(rp)),np[rp])}const properties={m:"margin",p:"padding"},directions={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},aliases={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},getCssProperties=memoize(_d=>{if(_d.length>2)if(aliases[_d])_d=aliases[_d];else return[_d];const[np,rp]=_d.split(""),ap=properties[np],sp=directions[rp]||"";return Array.isArray(sp)?sp.map(lp=>ap+lp):[ap+sp]}),marginKeys=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],paddingKeys=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...marginKeys,...paddingKeys];function createUnaryUnit(_d,np,rp,ap){var sp;const lp=(sp=getPath(_d,np,!1))!=null?sp:rp;return typeof lp=="number"?up=>typeof up=="string"?up:lp*up:Array.isArray(lp)?up=>typeof up=="string"?up:lp[up]:typeof lp=="function"?lp:()=>{}}function createUnarySpacing(_d){return createUnaryUnit(_d,"spacing",8)}function getValue(_d,np){if(typeof np=="string"||np==null)return np;const rp=Math.abs(np),ap=_d(rp);return np>=0?ap:typeof ap=="number"?-ap:`-${ap}`}function getStyleFromPropValue(_d,np){return rp=>_d.reduce((ap,sp)=>(ap[sp]=getValue(np,rp),ap),{})}function resolveCssProperty(_d,np,rp,ap){if(np.indexOf(rp)===-1)return null;const sp=getCssProperties(rp),lp=getStyleFromPropValue(sp,ap),up=_d[rp];return handleBreakpoints(_d,up,lp)}function style(_d,np){const rp=createUnarySpacing(_d.theme);return Object.keys(_d).map(ap=>resolveCssProperty(_d,np,ap,rp)).reduce(merge$1,{})}function margin(_d){return style(_d,marginKeys)}margin.propTypes={};margin.filterProps=marginKeys;function padding(_d){return style(_d,paddingKeys)}padding.propTypes={};padding.filterProps=paddingKeys;function createSpacing(_d=8){if(_d.mui)return _d;const np=createUnarySpacing({spacing:_d}),rp=(...ap)=>(ap.length===0?[1]:ap).map(lp=>{const up=np(lp);return typeof up=="number"?`${up}px`:up}).join(" ");return rp.mui=!0,rp}function compose(..._d){const np=_d.reduce((ap,sp)=>(sp.filterProps.forEach(lp=>{ap[lp]=sp}),ap),{}),rp=ap=>Object.keys(ap).reduce((sp,lp)=>np[lp]?merge$1(sp,np[lp](ap)):sp,{});return rp.propTypes={},rp.filterProps=_d.reduce((ap,sp)=>ap.concat(sp.filterProps),[]),rp}function borderTransform(_d){return typeof _d!="number"?_d:`${_d}px solid`}function createBorderStyle(_d,np){return style$1({prop:_d,themeKey:"borders",transform:np})}const border=createBorderStyle("border",borderTransform),borderTop=createBorderStyle("borderTop",borderTransform),borderRight=createBorderStyle("borderRight",borderTransform),borderBottom=createBorderStyle("borderBottom",borderTransform),borderLeft=createBorderStyle("borderLeft",borderTransform),borderColor=createBorderStyle("borderColor"),borderTopColor=createBorderStyle("borderTopColor"),borderRightColor=createBorderStyle("borderRightColor"),borderBottomColor=createBorderStyle("borderBottomColor"),borderLeftColor=createBorderStyle("borderLeftColor"),outline=createBorderStyle("outline",borderTransform),outlineColor=createBorderStyle("outlineColor"),borderRadius=_d=>{if(_d.borderRadius!==void 0&&_d.borderRadius!==null){const np=createUnaryUnit(_d.theme,"shape.borderRadius",4),rp=ap=>({borderRadius:getValue(np,ap)});return handleBreakpoints(_d,_d.borderRadius,rp)}return null};borderRadius.propTypes={};borderRadius.filterProps=["borderRadius"];compose(border,borderTop,borderRight,borderBottom,borderLeft,borderColor,borderTopColor,borderRightColor,borderBottomColor,borderLeftColor,borderRadius,outline,outlineColor);const gap=_d=>{if(_d.gap!==void 0&&_d.gap!==null){const np=createUnaryUnit(_d.theme,"spacing",8),rp=ap=>({gap:getValue(np,ap)});return handleBreakpoints(_d,_d.gap,rp)}return null};gap.propTypes={};gap.filterProps=["gap"];const columnGap=_d=>{if(_d.columnGap!==void 0&&_d.columnGap!==null){const np=createUnaryUnit(_d.theme,"spacing",8),rp=ap=>({columnGap:getValue(np,ap)});return handleBreakpoints(_d,_d.columnGap,rp)}return null};columnGap.propTypes={};columnGap.filterProps=["columnGap"];const rowGap=_d=>{if(_d.rowGap!==void 0&&_d.rowGap!==null){const np=createUnaryUnit(_d.theme,"spacing",8),rp=ap=>({rowGap:getValue(np,ap)});return handleBreakpoints(_d,_d.rowGap,rp)}return null};rowGap.propTypes={};rowGap.filterProps=["rowGap"];const gridColumn=style$1({prop:"gridColumn"}),gridRow=style$1({prop:"gridRow"}),gridAutoFlow=style$1({prop:"gridAutoFlow"}),gridAutoColumns=style$1({prop:"gridAutoColumns"}),gridAutoRows=style$1({prop:"gridAutoRows"}),gridTemplateColumns=style$1({prop:"gridTemplateColumns"}),gridTemplateRows=style$1({prop:"gridTemplateRows"}),gridTemplateAreas=style$1({prop:"gridTemplateAreas"}),gridArea=style$1({prop:"gridArea"});compose(gap,columnGap,rowGap,gridColumn,gridRow,gridAutoFlow,gridAutoColumns,gridAutoRows,gridTemplateColumns,gridTemplateRows,gridTemplateAreas,gridArea);function paletteTransform(_d,np){return np==="grey"?np:_d}const color=style$1({prop:"color",themeKey:"palette",transform:paletteTransform}),bgcolor=style$1({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:paletteTransform}),backgroundColor=style$1({prop:"backgroundColor",themeKey:"palette",transform:paletteTransform});compose(color,bgcolor,backgroundColor);function sizingTransform(_d){return _d<=1&&_d!==0?`${_d*100}%`:_d}const width=style$1({prop:"width",transform:sizingTransform}),maxWidth=_d=>{if(_d.maxWidth!==void 0&&_d.maxWidth!==null){const np=rp=>{var ap,sp;const lp=((ap=_d.theme)==null||(ap=ap.breakpoints)==null||(ap=ap.values)==null?void 0:ap[rp])||values[rp];return lp?((sp=_d.theme)==null||(sp=sp.breakpoints)==null?void 0:sp.unit)!=="px"?{maxWidth:`${lp}${_d.theme.breakpoints.unit}`}:{maxWidth:lp}:{maxWidth:sizingTransform(rp)}};return handleBreakpoints(_d,_d.maxWidth,np)}return null};maxWidth.filterProps=["maxWidth"];const minWidth=style$1({prop:"minWidth",transform:sizingTransform}),height=style$1({prop:"height",transform:sizingTransform}),maxHeight=style$1({prop:"maxHeight",transform:sizingTransform}),minHeight=style$1({prop:"minHeight",transform:sizingTransform});style$1({prop:"size",cssProperty:"width",transform:sizingTransform});style$1({prop:"size",cssProperty:"height",transform:sizingTransform});const boxSizing=style$1({prop:"boxSizing"});compose(width,maxWidth,minWidth,height,maxHeight,minHeight,boxSizing);const defaultSxConfig={border:{themeKey:"borders",transform:borderTransform},borderTop:{themeKey:"borders",transform:borderTransform},borderRight:{themeKey:"borders",transform:borderTransform},borderBottom:{themeKey:"borders",transform:borderTransform},borderLeft:{themeKey:"borders",transform:borderTransform},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:borderTransform},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:borderRadius},color:{themeKey:"palette",transform:paletteTransform},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:paletteTransform},backgroundColor:{themeKey:"palette",transform:paletteTransform},p:{style:padding},pt:{style:padding},pr:{style:padding},pb:{style:padding},pl:{style:padding},px:{style:padding},py:{style:padding},padding:{style:padding},paddingTop:{style:padding},paddingRight:{style:padding},paddingBottom:{style:padding},paddingLeft:{style:padding},paddingX:{style:padding},paddingY:{style:padding},paddingInline:{style:padding},paddingInlineStart:{style:padding},paddingInlineEnd:{style:padding},paddingBlock:{style:padding},paddingBlockStart:{style:padding},paddingBlockEnd:{style:padding},m:{style:margin},mt:{style:margin},mr:{style:margin},mb:{style:margin},ml:{style:margin},mx:{style:margin},my:{style:margin},margin:{style:margin},marginTop:{style:margin},marginRight:{style:margin},marginBottom:{style:margin},marginLeft:{style:margin},marginX:{style:margin},marginY:{style:margin},marginInline:{style:margin},marginInlineStart:{style:margin},marginInlineEnd:{style:margin},marginBlock:{style:margin},marginBlockStart:{style:margin},marginBlockEnd:{style:margin},displayPrint:{cssProperty:!1,transform:_d=>({"@media print":{display:_d}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:gap},rowGap:{style:rowGap},columnGap:{style:columnGap},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:sizingTransform},maxWidth:{style:maxWidth},minWidth:{transform:sizingTransform},height:{transform:sizingTransform},maxHeight:{transform:sizingTransform},minHeight:{transform:sizingTransform},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}},defaultSxConfig$1=defaultSxConfig;function objectsHaveSameKeys(..._d){const np=_d.reduce((ap,sp)=>ap.concat(Object.keys(sp)),[]),rp=new Set(np);return _d.every(ap=>rp.size===Object.keys(ap).length)}function callIfFn(_d,np){return typeof _d=="function"?_d(np):_d}function unstable_createStyleFunctionSx(){function _d(rp,ap,sp,lp){const up={[rp]:ap,theme:sp},cp=lp[rp];if(!cp)return{[rp]:ap};const{cssProperty:dp=rp,themeKey:fp,transform:pp,style:hp}=cp;if(ap==null)return null;if(fp==="typography"&&ap==="inherit")return{[rp]:ap};const mp=getPath(sp,fp)||{};return hp?hp(up):handleBreakpoints(up,ap,vp=>{let xp=getStyleValue(mp,pp,vp);return vp===xp&&typeof vp=="string"&&(xp=getStyleValue(mp,pp,`${rp}${vp==="default"?"":capitalize(vp)}`,vp)),dp===!1?xp:{[dp]:xp}})}function np(rp){var ap;const{sx:sp,theme:lp={}}=rp||{};if(!sp)return null;const up=(ap=lp.unstable_sxConfig)!=null?ap:defaultSxConfig$1;function cp(dp){let fp=dp;if(typeof dp=="function")fp=dp(lp);else if(typeof dp!="object")return dp;if(!fp)return null;const pp=createEmptyBreakpointObject(lp.breakpoints),hp=Object.keys(pp);let mp=pp;return Object.keys(fp).forEach(gp=>{const vp=callIfFn(fp[gp],lp);if(vp!=null)if(typeof vp=="object")if(up[gp])mp=merge$1(mp,_d(gp,vp,lp,up));else{const xp=handleBreakpoints({theme:lp},vp,Sp=>({[gp]:Sp}));objectsHaveSameKeys(xp,vp)?mp[gp]=np({sx:vp,theme:lp}):mp=merge$1(mp,xp)}else mp=merge$1(mp,_d(gp,vp,lp,up))}),removeUnusedBreakpoints(hp,mp)}return Array.isArray(sp)?sp.map(cp):cp(sp)}return np}const styleFunctionSx=unstable_createStyleFunctionSx();styleFunctionSx.filterProps=["sx"];const _excluded$7=["breakpoints","palette","spacing","shape"];function createTheme$1(_d={},...np){const{breakpoints:rp={},palette:ap={},spacing:sp,shape:lp={}}=_d,up=_objectWithoutPropertiesLoose(_d,_excluded$7),cp=createBreakpoints(rp),dp=createSpacing(sp);let fp=deepmerge({breakpoints:cp,direction:"ltr",components:{},palette:_extends$1({mode:"light"},ap),spacing:dp,shape:_extends$1({},shape$1,lp)},up);return fp=np.reduce((pp,hp)=>deepmerge(pp,hp),fp),fp.unstable_sxConfig=_extends$1({},defaultSxConfig$1,up==null?void 0:up.unstable_sxConfig),fp.unstable_sx=function(hp){return styleFunctionSx({sx:hp,theme:this})},fp}function isObjectEmpty$1(_d){return Object.keys(_d).length===0}function useTheme$1(_d=null){const np=reactExports.useContext(ThemeContext);return!np||isObjectEmpty$1(np)?_d:np}const systemDefaultTheme$1=createTheme$1();function useTheme(_d=systemDefaultTheme$1){return useTheme$1(_d)}const _excluded$6=["variant"];function isEmpty$1(_d){return _d.length===0}function propsToClassKey(_d){const{variant:np}=_d,rp=_objectWithoutPropertiesLoose(_d,_excluded$6);let ap=np||"";return Object.keys(rp).sort().forEach(sp=>{sp==="color"?ap+=isEmpty$1(ap)?_d[sp]:capitalize(_d[sp]):ap+=`${isEmpty$1(ap)?sp:capitalize(sp)}${capitalize(_d[sp].toString())}`}),ap}const _excluded$5=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function isEmpty(_d){return Object.keys(_d).length===0}function isStringTag(_d){return typeof _d=="string"&&_d.charCodeAt(0)>96}const getStyleOverrides=(_d,np)=>np.components&&np.components[_d]&&np.components[_d].styleOverrides?np.components[_d].styleOverrides:null,transformVariants=_d=>{let np=0;const rp={};return _d&&_d.forEach(ap=>{let sp="";typeof ap.props=="function"?(sp=`callback${np}`,np+=1):sp=propsToClassKey(ap.props),rp[sp]=ap.style}),rp},getVariantStyles=(_d,np)=>{let rp=[];return np&&np.components&&np.components[_d]&&np.components[_d].variants&&(rp=np.components[_d].variants),transformVariants(rp)},variantsResolver=(_d,np,rp)=>{const{ownerState:ap={}}=_d,sp=[];let lp=0;return rp&&rp.forEach(up=>{let cp=!0;if(typeof up.props=="function"){const dp=_extends$1({},_d,ap);cp=up.props(dp)}else Object.keys(up.props).forEach(dp=>{ap[dp]!==up.props[dp]&&_d[dp]!==up.props[dp]&&(cp=!1)});cp&&(typeof up.props=="function"?sp.push(np[`callback${lp}`]):sp.push(np[propsToClassKey(up.props)])),typeof up.props=="function"&&(lp+=1)}),sp},themeVariantsResolver=(_d,np,rp,ap)=>{var sp;const lp=rp==null||(sp=rp.components)==null||(sp=sp[ap])==null?void 0:sp.variants;return variantsResolver(_d,np,lp)};function shouldForwardProp(_d){return _d!=="ownerState"&&_d!=="theme"&&_d!=="sx"&&_d!=="as"}const systemDefaultTheme=createTheme$1(),lowercaseFirstLetter=_d=>_d&&_d.charAt(0).toLowerCase()+_d.slice(1);function resolveTheme({defaultTheme:_d,theme:np,themeId:rp}){return isEmpty(np)?_d:np[rp]||np}function defaultOverridesResolver(_d){return _d?(np,rp)=>rp[_d]:null}const muiStyledFunctionResolver=({styledArg:_d,props:np,defaultTheme:rp,themeId:ap})=>{const sp=_d(_extends$1({},np,{theme:resolveTheme(_extends$1({},np,{defaultTheme:rp,themeId:ap}))}));let lp;if(sp&&sp.variants&&(lp=sp.variants,delete sp.variants),lp){const up=variantsResolver(np,transformVariants(lp),lp);return[sp,...up]}return sp};function createStyled(_d={}){const{themeId:np,defaultTheme:rp=systemDefaultTheme,rootShouldForwardProp:ap=shouldForwardProp,slotShouldForwardProp:sp=shouldForwardProp}=_d,lp=up=>styleFunctionSx(_extends$1({},up,{theme:resolveTheme(_extends$1({},up,{defaultTheme:rp,themeId:np}))}));return lp.__mui_systemSx=!0,(up,cp={})=>{internal_processStyles(up,wp=>wp.filter(_p=>!(_p!=null&&_p.__mui_systemSx)));const{name:dp,slot:fp,skipVariantsResolver:pp,skipSx:hp,overridesResolver:mp=defaultOverridesResolver(lowercaseFirstLetter(fp))}=cp,gp=_objectWithoutPropertiesLoose(cp,_excluded$5),vp=pp!==void 0?pp:fp&&fp!=="Root"&&fp!=="root"||!1,xp=hp||!1;let Sp,yp=shouldForwardProp;fp==="Root"||fp==="root"?yp=ap:fp?yp=sp:isStringTag(up)&&(yp=void 0);const bp=styled$1(up,_extends$1({shouldForwardProp:yp,label:Sp},gp)),Ep=(wp,..._p)=>{const Cp=_p?_p.map(Op=>{if(typeof Op=="function"&&Op.__emotion_real!==Op)return jp=>muiStyledFunctionResolver({styledArg:Op,props:jp,defaultTheme:rp,themeId:np});if(isPlainObject$2(Op)){let jp=Op,Mp;return Op&&Op.variants&&(Mp=Op.variants,delete jp.variants,jp=Ap=>{let Dp=Op;return variantsResolver(Ap,transformVariants(Mp),Mp).forEach(Ip=>{Dp=deepmerge(Dp,Ip)}),Dp}),jp}return Op}):[];let $p=wp;if(isPlainObject$2(wp)){let Op;wp&&wp.variants&&(Op=wp.variants,delete $p.variants,$p=jp=>{let Mp=wp;return variantsResolver(jp,transformVariants(Op),Op).forEach(Dp=>{Mp=deepmerge(Mp,Dp)}),Mp})}else typeof wp=="function"&&wp.__emotion_real!==wp&&($p=Op=>muiStyledFunctionResolver({styledArg:wp,props:Op,defaultTheme:rp,themeId:np}));dp&&mp&&Cp.push(Op=>{const jp=resolveTheme(_extends$1({},Op,{defaultTheme:rp,themeId:np})),Mp=getStyleOverrides(dp,jp);if(Mp){const Ap={};return Object.entries(Mp).forEach(([Dp,Fp])=>{Ap[Dp]=typeof Fp=="function"?Fp(_extends$1({},Op,{theme:jp})):Fp}),mp(Op,Ap)}return null}),dp&&!vp&&Cp.push(Op=>{const jp=resolveTheme(_extends$1({},Op,{defaultTheme:rp,themeId:np}));return themeVariantsResolver(Op,getVariantStyles(dp,jp),jp,dp)}),xp||Cp.push(lp);const Rp=Cp.length-_p.length;if(Array.isArray(wp)&&Rp>0){const Op=new Array(Rp).fill("");$p=[...wp,...Op],$p.raw=[...wp.raw,...Op]}const Pp=bp($p,...Cp);return up.muiName&&(Pp.muiName=up.muiName),Pp};return bp.withConfig&&(Ep.withConfig=bp.withConfig),Ep}}function getThemeProps(_d){const{theme:np,name:rp,props:ap}=_d;return!np||!np.components||!np.components[rp]||!np.components[rp].defaultProps?ap:resolveProps(np.components[rp].defaultProps,ap)}function useThemeProps$1({props:_d,name:np,defaultTheme:rp,themeId:ap}){let sp=useTheme(rp);return ap&&(sp=sp[ap]||sp),getThemeProps({theme:sp,name:np,props:_d})}function clampWrapper(_d,np=0,rp=1){return clamp(_d,np,rp)}function hexToRgb(_d){_d=_d.slice(1);const np=new RegExp(`.{1,${_d.length>=6?2:1}}`,"g");let rp=_d.match(np);return rp&&rp[0].length===1&&(rp=rp.map(ap=>ap+ap)),rp?`rgb${rp.length===4?"a":""}(${rp.map((ap,sp)=>sp<3?parseInt(ap,16):Math.round(parseInt(ap,16)/255*1e3)/1e3).join(", ")})`:""}function decomposeColor(_d){if(_d.type)return _d;if(_d.charAt(0)==="#")return decomposeColor(hexToRgb(_d));const np=_d.indexOf("("),rp=_d.substring(0,np);if(["rgb","rgba","hsl","hsla","color"].indexOf(rp)===-1)throw new Error(formatMuiErrorMessage(9,_d));let ap=_d.substring(np+1,_d.length-1),sp;if(rp==="color"){if(ap=ap.split(" "),sp=ap.shift(),ap.length===4&&ap[3].charAt(0)==="/"&&(ap[3]=ap[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(sp)===-1)throw new Error(formatMuiErrorMessage(10,sp))}else ap=ap.split(",");return ap=ap.map(lp=>parseFloat(lp)),{type:rp,values:ap,colorSpace:sp}}function recomposeColor(_d){const{type:np,colorSpace:rp}=_d;let{values:ap}=_d;return np.indexOf("rgb")!==-1?ap=ap.map((sp,lp)=>lp<3?parseInt(sp,10):sp):np.indexOf("hsl")!==-1&&(ap[1]=`${ap[1]}%`,ap[2]=`${ap[2]}%`),np.indexOf("color")!==-1?ap=`${rp} ${ap.join(" ")}`:ap=`${ap.join(", ")}`,`${np}(${ap})`}function hslToRgb(_d){_d=decomposeColor(_d);const{values:np}=_d,rp=np[0],ap=np[1]/100,sp=np[2]/100,lp=ap*Math.min(sp,1-sp),up=(fp,pp=(fp+rp/30)%12)=>sp-lp*Math.max(Math.min(pp-3,9-pp,1),-1);let cp="rgb";const dp=[Math.round(up(0)*255),Math.round(up(8)*255),Math.round(up(4)*255)];return _d.type==="hsla"&&(cp+="a",dp.push(np[3])),recomposeColor({type:cp,values:dp})}function getLuminance(_d){_d=decomposeColor(_d);let np=_d.type==="hsl"||_d.type==="hsla"?decomposeColor(hslToRgb(_d)).values:_d.values;return np=np.map(rp=>(_d.type!=="color"&&(rp/=255),rp<=.03928?rp/12.92:((rp+.055)/1.055)**2.4)),Number((.2126*np[0]+.7152*np[1]+.0722*np[2]).toFixed(3))}function getContrastRatio(_d,np){const rp=getLuminance(_d),ap=getLuminance(np);return(Math.max(rp,ap)+.05)/(Math.min(rp,ap)+.05)}function darken(_d,np){if(_d=decomposeColor(_d),np=clampWrapper(np),_d.type.indexOf("hsl")!==-1)_d.values[2]*=1-np;else if(_d.type.indexOf("rgb")!==-1||_d.type.indexOf("color")!==-1)for(let rp=0;rp<3;rp+=1)_d.values[rp]*=1-np;return recomposeColor(_d)}function lighten(_d,np){if(_d=decomposeColor(_d),np=clampWrapper(np),_d.type.indexOf("hsl")!==-1)_d.values[2]+=(100-_d.values[2])*np;else if(_d.type.indexOf("rgb")!==-1)for(let rp=0;rp<3;rp+=1)_d.values[rp]+=(255-_d.values[rp])*np;else if(_d.type.indexOf("color")!==-1)for(let rp=0;rp<3;rp+=1)_d.values[rp]+=(1-_d.values[rp])*np;return recomposeColor(_d)}function createMixins(_d,np){return _extends$1({toolbar:{minHeight:56,[_d.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[_d.up("sm")]:{minHeight:64}}},np)}const common={black:"#000",white:"#fff"},common$1=common,grey={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},grey$1=grey,purple={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},purple$1=purple,red={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},red$1=red,orange={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},orange$1=orange,blue={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},blue$1=blue,lightBlue={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},lightBlue$1=lightBlue,green={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},green$1=green,_excluded$4=["mode","contrastThreshold","tonalOffset"],light={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:common$1.white,default:common$1.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},dark={text:{primary:common$1.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:common$1.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function addLightOrDark(_d,np,rp,ap){const sp=ap.light||ap,lp=ap.dark||ap*1.5;_d[np]||(_d.hasOwnProperty(rp)?_d[np]=_d[rp]:np==="light"?_d.light=lighten(_d.main,sp):np==="dark"&&(_d.dark=darken(_d.main,lp)))}function getDefaultPrimary(_d="light"){return _d==="dark"?{main:blue$1[200],light:blue$1[50],dark:blue$1[400]}:{main:blue$1[700],light:blue$1[400],dark:blue$1[800]}}function getDefaultSecondary(_d="light"){return _d==="dark"?{main:purple$1[200],light:purple$1[50],dark:purple$1[400]}:{main:purple$1[500],light:purple$1[300],dark:purple$1[700]}}function getDefaultError(_d="light"){return _d==="dark"?{main:red$1[500],light:red$1[300],dark:red$1[700]}:{main:red$1[700],light:red$1[400],dark:red$1[800]}}function getDefaultInfo(_d="light"){return _d==="dark"?{main:lightBlue$1[400],light:lightBlue$1[300],dark:lightBlue$1[700]}:{main:lightBlue$1[700],light:lightBlue$1[500],dark:lightBlue$1[900]}}function getDefaultSuccess(_d="light"){return _d==="dark"?{main:green$1[400],light:green$1[300],dark:green$1[700]}:{main:green$1[800],light:green$1[500],dark:green$1[900]}}function getDefaultWarning(_d="light"){return _d==="dark"?{main:orange$1[400],light:orange$1[300],dark:orange$1[700]}:{main:"#ed6c02",light:orange$1[500],dark:orange$1[900]}}function createPalette(_d){const{mode:np="light",contrastThreshold:rp=3,tonalOffset:ap=.2}=_d,sp=_objectWithoutPropertiesLoose(_d,_excluded$4),lp=_d.primary||getDefaultPrimary(np),up=_d.secondary||getDefaultSecondary(np),cp=_d.error||getDefaultError(np),dp=_d.info||getDefaultInfo(np),fp=_d.success||getDefaultSuccess(np),pp=_d.warning||getDefaultWarning(np);function hp(xp){return getContrastRatio(xp,dark.text.primary)>=rp?dark.text.primary:light.text.primary}const mp=({color:xp,name:Sp,mainShade:yp=500,lightShade:bp=300,darkShade:Ep=700})=>{if(xp=_extends$1({},xp),!xp.main&&xp[yp]&&(xp.main=xp[yp]),!xp.hasOwnProperty("main"))throw new Error(formatMuiErrorMessage(11,Sp?` (${Sp})`:"",yp));if(typeof xp.main!="string")throw new Error(formatMuiErrorMessage(12,Sp?` (${Sp})`:"",JSON.stringify(xp.main)));return addLightOrDark(xp,"light",bp,ap),addLightOrDark(xp,"dark",Ep,ap),xp.contrastText||(xp.contrastText=hp(xp.main)),xp},gp={dark,light};return deepmerge(_extends$1({common:_extends$1({},common$1),mode:np,primary:mp({color:lp,name:"primary"}),secondary:mp({color:up,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:mp({color:cp,name:"error"}),warning:mp({color:pp,name:"warning"}),info:mp({color:dp,name:"info"}),success:mp({color:fp,name:"success"}),grey:grey$1,contrastThreshold:rp,getContrastText:hp,augmentColor:mp,tonalOffset:ap},gp[np]),sp)}const _excluded$3=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function round(_d){return Math.round(_d*1e5)/1e5}const caseAllCaps={textTransform:"uppercase"},defaultFontFamily='"Roboto", "Helvetica", "Arial", sans-serif';function createTypography(_d,np){const rp=typeof np=="function"?np(_d):np,{fontFamily:ap=defaultFontFamily,fontSize:sp=14,fontWeightLight:lp=300,fontWeightRegular:up=400,fontWeightMedium:cp=500,fontWeightBold:dp=700,htmlFontSize:fp=16,allVariants:pp,pxToRem:hp}=rp,mp=_objectWithoutPropertiesLoose(rp,_excluded$3),gp=sp/14,vp=hp||(yp=>`${yp/fp*gp}rem`),xp=(yp,bp,Ep,wp,_p)=>_extends$1({fontFamily:ap,fontWeight:yp,fontSize:vp(bp),lineHeight:Ep},ap===defaultFontFamily?{letterSpacing:`${round(wp/bp)}em`}:{},_p,pp),Sp={h1:xp(lp,96,1.167,-1.5),h2:xp(lp,60,1.2,-.5),h3:xp(up,48,1.167,0),h4:xp(up,34,1.235,.25),h5:xp(up,24,1.334,0),h6:xp(cp,20,1.6,.15),subtitle1:xp(up,16,1.75,.15),subtitle2:xp(cp,14,1.57,.1),body1:xp(up,16,1.5,.15),body2:xp(up,14,1.43,.15),button:xp(cp,14,1.75,.4,caseAllCaps),caption:xp(up,12,1.66,.4),overline:xp(up,12,2.66,1,caseAllCaps),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return deepmerge(_extends$1({htmlFontSize:fp,pxToRem:vp,fontFamily:ap,fontSize:sp,fontWeightLight:lp,fontWeightRegular:up,fontWeightMedium:cp,fontWeightBold:dp},Sp),mp,{clone:!1})}const shadowKeyUmbraOpacity=.2,shadowKeyPenumbraOpacity=.14,shadowAmbientShadowOpacity=.12;function createShadow(..._d){return[`${_d[0]}px ${_d[1]}px ${_d[2]}px ${_d[3]}px rgba(0,0,0,${shadowKeyUmbraOpacity})`,`${_d[4]}px ${_d[5]}px ${_d[6]}px ${_d[7]}px rgba(0,0,0,${shadowKeyPenumbraOpacity})`,`${_d[8]}px ${_d[9]}px ${_d[10]}px ${_d[11]}px rgba(0,0,0,${shadowAmbientShadowOpacity})`].join(",")}const shadows=["none",createShadow(0,2,1,-1,0,1,1,0,0,1,3,0),createShadow(0,3,1,-2,0,2,2,0,0,1,5,0),createShadow(0,3,3,-2,0,3,4,0,0,1,8,0),createShadow(0,2,4,-1,0,4,5,0,0,1,10,0),createShadow(0,3,5,-1,0,5,8,0,0,1,14,0),createShadow(0,3,5,-1,0,6,10,0,0,1,18,0),createShadow(0,4,5,-2,0,7,10,1,0,2,16,1),createShadow(0,5,5,-3,0,8,10,1,0,3,14,2),createShadow(0,5,6,-3,0,9,12,1,0,3,16,2),createShadow(0,6,6,-3,0,10,14,1,0,4,18,3),createShadow(0,6,7,-4,0,11,15,1,0,4,20,3),createShadow(0,7,8,-4,0,12,17,2,0,5,22,4),createShadow(0,7,8,-4,0,13,19,2,0,5,24,4),createShadow(0,7,9,-4,0,14,21,2,0,5,26,4),createShadow(0,8,9,-5,0,15,22,2,0,6,28,5),createShadow(0,8,10,-5,0,16,24,2,0,6,30,5),createShadow(0,8,11,-5,0,17,26,2,0,6,32,5),createShadow(0,9,11,-5,0,18,28,2,0,7,34,6),createShadow(0,9,12,-6,0,19,29,2,0,7,36,6),createShadow(0,10,13,-6,0,20,31,3,0,8,38,7),createShadow(0,10,13,-6,0,21,33,3,0,8,40,7),createShadow(0,10,14,-6,0,22,35,3,0,8,42,7),createShadow(0,11,14,-7,0,23,36,3,0,9,44,8),createShadow(0,11,15,-7,0,24,38,3,0,9,46,8)],_excluded$2=["duration","easing","delay"],easing={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},duration={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function formatMs(_d){return`${Math.round(_d)}ms`}function getAutoHeightDuration(_d){if(!_d)return 0;const np=_d/36;return Math.round((4+15*np**.25+np/5)*10)}function createTransitions(_d){const np=_extends$1({},easing,_d.easing),rp=_extends$1({},duration,_d.duration);return _extends$1({getAutoHeightDuration,create:(sp=["all"],lp={})=>{const{duration:up=rp.standard,easing:cp=np.easeInOut,delay:dp=0}=lp;return _objectWithoutPropertiesLoose(lp,_excluded$2),(Array.isArray(sp)?sp:[sp]).map(fp=>`${fp} ${typeof up=="string"?up:formatMs(up)} ${cp} ${typeof dp=="string"?dp:formatMs(dp)}`).join(",")}},_d,{easing:np,duration:rp})}const zIndex={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},zIndex$1=zIndex,_excluded$1=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function createTheme(_d={},...np){const{mixins:rp={},palette:ap={},transitions:sp={},typography:lp={}}=_d,up=_objectWithoutPropertiesLoose(_d,_excluded$1);if(_d.vars)throw new Error(formatMuiErrorMessage(18));const cp=createPalette(ap),dp=createTheme$1(_d);let fp=deepmerge(dp,{mixins:createMixins(dp.breakpoints,rp),palette:cp,shadows:shadows.slice(),typography:createTypography(cp,lp),transitions:createTransitions(sp),zIndex:_extends$1({},zIndex$1),applyDarkStyles(pp){return this.vars?{[this.getColorSchemeSelector("dark").replace(/(\[[^\]]+\])/,":where($1)")]:pp}:this.palette.mode==="dark"?pp:{}}});return fp=deepmerge(fp,up),fp=np.reduce((pp,hp)=>deepmerge(pp,hp),fp),fp.unstable_sxConfig=_extends$1({},defaultSxConfig$1,up==null?void 0:up.unstable_sxConfig),fp.unstable_sx=function(hp){return styleFunctionSx({sx:hp,theme:this})},fp}const defaultTheme=createTheme(),defaultTheme$1=defaultTheme,THEME_ID="$$material";function useThemeProps({props:_d,name:np}){return useThemeProps$1({props:_d,name:np,defaultTheme:defaultTheme$1,themeId:THEME_ID})}const rootShouldForwardProp=_d=>shouldForwardProp(_d)&&_d!=="classes",styled=createStyled({themeId:THEME_ID,defaultTheme:defaultTheme$1,rootShouldForwardProp});function getSvgIconUtilityClass(_d){return generateUtilityClass("MuiSvgIcon",_d)}generateUtilityClasses("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const _excluded=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],useUtilityClasses=_d=>{const{color:np,fontSize:rp,classes:ap}=_d,sp={root:["root",np!=="inherit"&&`color${capitalize(np)}`,`fontSize${capitalize(rp)}`]};return composeClasses(sp,getSvgIconUtilityClass,ap)},SvgIconRoot=styled("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(_d,np)=>{const{ownerState:rp}=_d;return[np.root,rp.color!=="inherit"&&np[`color${capitalize(rp.color)}`],np[`fontSize${capitalize(rp.fontSize)}`]]}})(({theme:_d,ownerState:np})=>{var rp,ap,sp,lp,up,cp,dp,fp,pp,hp,mp,gp,vp;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:np.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:(rp=_d.transitions)==null||(ap=rp.create)==null?void 0:ap.call(rp,"fill",{duration:(sp=_d.transitions)==null||(sp=sp.duration)==null?void 0:sp.shorter}),fontSize:{inherit:"inherit",small:((lp=_d.typography)==null||(up=lp.pxToRem)==null?void 0:up.call(lp,20))||"1.25rem",medium:((cp=_d.typography)==null||(dp=cp.pxToRem)==null?void 0:dp.call(cp,24))||"1.5rem",large:((fp=_d.typography)==null||(pp=fp.pxToRem)==null?void 0:pp.call(fp,35))||"2.1875rem"}[np.fontSize],color:(hp=(mp=(_d.vars||_d).palette)==null||(mp=mp[np.color])==null?void 0:mp.main)!=null?hp:{action:(gp=(_d.vars||_d).palette)==null||(gp=gp.action)==null?void 0:gp.active,disabled:(vp=(_d.vars||_d).palette)==null||(vp=vp.action)==null?void 0:vp.disabled,inherit:void 0}[np.color]}}),SvgIcon=reactExports.forwardRef(function(np,rp){const ap=useThemeProps({props:np,name:"MuiSvgIcon"}),{children:sp,className:lp,color:up="inherit",component:cp="svg",fontSize:dp="medium",htmlColor:fp,inheritViewBox:pp=!1,titleAccess:hp,viewBox:mp="0 0 24 24"}=ap,gp=_objectWithoutPropertiesLoose(ap,_excluded),vp=reactExports.isValidElement(sp)&&sp.type==="svg",xp=_extends$1({},ap,{color:up,component:cp,fontSize:dp,instanceFontSize:np.fontSize,inheritViewBox:pp,viewBox:mp,hasSvgAsChild:vp}),Sp={};pp||(Sp.viewBox=mp);const yp=useUtilityClasses(xp);return jsxRuntimeExports.jsxs(SvgIconRoot,_extends$1({as:cp,className:clsx(yp.root,lp),focusable:"false",color:fp,"aria-hidden":hp?void 0:!0,role:hp?"img":void 0,ref:rp},Sp,gp,vp&&sp.props,{ownerState:xp,children:[vp?sp.props.children:sp,hp?jsxRuntimeExports.jsx("title",{children:hp}):null]}))});SvgIcon.muiName="SvgIcon";function createSvgIcon(_d,np){function rp(ap,sp){return jsxRuntimeExports.jsx(SvgIcon,_extends$1({"data-testid":`${np}Icon`,ref:sp},ap,{children:_d}))}return rp.muiName=SvgIcon.muiName,reactExports.memo(reactExports.forwardRef(rp))}const unstable_ClassNameGenerator={configure:_d=>{ClassNameGenerator.configure(_d)}},utils$2=Object.freeze(Object.defineProperty({__proto__:null,capitalize,createChainedFunction,createSvgIcon,debounce:debounce$1,deprecatedPropType,isMuiElement,ownerDocument,ownerWindow,requirePropFactory,setRef,unstable_ClassNameGenerator,unstable_useEnhancedEffect:useEnhancedEffect$1,unstable_useId:useId,unsupportedProp,useControlled,useEventCallback,useForkRef,useIsFocusVisible},Symbol.toStringTag,{value:"Module"})),require$$0$3=getAugmentedNamespace(utils$2);var hasRequiredCreateSvgIcon;function requireCreateSvgIcon(){return hasRequiredCreateSvgIcon||(hasRequiredCreateSvgIcon=1,function(_d){"use client";Object.defineProperty(_d,"__esModule",{value:!0}),Object.defineProperty(_d,"default",{enumerable:!0,get:function(){return np.createSvgIcon}});var np=require$$0$3}(createSvgIcon$1)),createSvgIcon$1}var _interopRequireDefault$O=interopRequireDefaultExports;Object.defineProperty(PersonOutlineOutlined,"__esModule",{value:!0});var default_1$z=PersonOutlineOutlined.default=void 0,_createSvgIcon$z=_interopRequireDefault$O(requireCreateSvgIcon()),_jsxRuntime$z=jsxRuntimeExports;default_1$z=PersonOutlineOutlined.default=(0,_createSvgIcon$z.default)((0,_jsxRuntime$z.jsx)("path",{d:"M12 5.9c1.16 0 2.1.94 2.1 2.1s-.94 2.1-2.1 2.1S9.9 9.16 9.9 8s.94-2.1 2.1-2.1m0 9c2.97 0 6.1 1.46 6.1 2.1v1.1H5.9V17c0-.64 3.13-2.1 6.1-2.1M12 4C9.79 4 8 5.79 8 8s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4m0 9c-2.67 0-8 1.34-8 4v3h16v-3c0-2.66-5.33-4-8-4"}),"PersonOutlineOutlined");const NoneLogin=()=>{const[_d,np]=reactExports.useState(!1),rp=reactExports.useCallback(()=>{np(!0)},[]),ap=reactExports.useCallback(()=>{np(!1)},[]);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{onClick:rp,className:"NoneLogin_wrapper",children:[jsxRuntimeExports.jsx(default_1$z,{}),jsxRuntimeExports.jsx("div",{className:"login-btn",children:"마이"})]}),_d&&jsxRuntimeExports.jsxs("div",{className:"NoneLogin_open",children:[jsxRuntimeExports.jsxs("div",{className:"NoneLogin_header",children:[jsxRuntimeExports.jsx("span",{children:"해당 기능을 이용하시려면"}),jsxRuntimeExports.jsx("span",{children:"로그인이 필요합니다!"})]}),jsxRuntimeExports.jsxs("div",{className:"NoneLogin_footer",children:[jsxRuntimeExports.jsx(Carousel,{}),jsxRuntimeExports.jsxs("div",{className:"NoneLogin_footer_btn",children:[jsxRuntimeExports.jsx(Link,{to:"/login",onClick:ap,children:"로그인 하기"}),jsxRuntimeExports.jsx("div",{children:"|"}),jsxRuntimeExports.jsx("button",{onClick:ap,children:"나중에 하기"})]})]})]})]})};var Camera={},_interopRequireDefault$N=interopRequireDefaultExports;Object.defineProperty(Camera,"__esModule",{value:!0});var default_1$y=Camera.default=void 0,_createSvgIcon$y=_interopRequireDefault$N(requireCreateSvgIcon()),_jsxRuntime$y=jsxRuntimeExports;default_1$y=Camera.default=(0,_createSvgIcon$y.default)((0,_jsxRuntime$y.jsx)("path",{d:"m9.4 10.5 4.77-8.26C13.47 2.09 12.75 2 12 2c-2.4 0-4.6.85-6.32 2.25l3.66 6.35zM21.54 9c-.92-2.92-3.15-5.26-6-6.34L11.88 9zm.26 1h-7.49l.29.5 4.76 8.25C21 16.97 22 14.61 22 12c0-.69-.07-1.35-.2-2M8.54 12l-3.9-6.75C3.01 7.03 2 9.39 2 12c0 .69.07 1.35.2 2h7.49zm-6.08 3c.92 2.92 3.15 5.26 6 6.34L12.12 15zm11.27 0-3.9 6.76c.7.15 1.42.24 2.17.24 2.4 0 4.6-.85 6.32-2.25l-3.66-6.35z"}),"Camera");var DashboardOutlined={},_interopRequireDefault$M=interopRequireDefaultExports;Object.defineProperty(DashboardOutlined,"__esModule",{value:!0});var default_1$x=DashboardOutlined.default=void 0,_createSvgIcon$x=_interopRequireDefault$M(requireCreateSvgIcon()),_jsxRuntime$x=jsxRuntimeExports;default_1$x=DashboardOutlined.default=(0,_createSvgIcon$x.default)((0,_jsxRuntime$x.jsx)("path",{d:"M19 5v2h-4V5zM9 5v6H5V5zm10 8v6h-4v-6zM9 17v2H5v-2zM21 3h-8v6h8zM11 3H3v10h8zm10 8h-8v10h8zm-10 4H3v6h8z"}),"DashboardOutlined");var HomeOutlined={},_interopRequireDefault$L=interopRequireDefaultExports;Object.defineProperty(HomeOutlined,"__esModule",{value:!0});var default_1$w=HomeOutlined.default=void 0,_createSvgIcon$w=_interopRequireDefault$L(requireCreateSvgIcon()),_jsxRuntime$w=jsxRuntimeExports;default_1$w=HomeOutlined.default=(0,_createSvgIcon$w.default)((0,_jsxRuntime$w.jsx)("path",{d:"m12 5.69 5 4.5V18h-2v-6H9v6H7v-7.81zM12 3 2 12h3v8h6v-6h2v6h6v-8h3z"}),"HomeOutlined");var LocationOnOutlined={},_interopRequireDefault$K=interopRequireDefaultExports;Object.defineProperty(LocationOnOutlined,"__esModule",{value:!0});var default_1$v=LocationOnOutlined.default=void 0,_createSvgIcon$v=_interopRequireDefault$K(requireCreateSvgIcon()),_jsxRuntime$v=jsxRuntimeExports;default_1$v=LocationOnOutlined.default=(0,_createSvgIcon$v.default)([(0,_jsxRuntime$v.jsx)("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7M7 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 2.88-2.88 7.19-5 9.88C9.92 16.21 7 11.85 7 9"},"0"),(0,_jsxRuntime$v.jsx)("circle",{cx:"12",cy:"9",r:"2.5"},"1")],"LocationOnOutlined");var CameraAltOutlined={},_interopRequireDefault$J=interopRequireDefaultExports;Object.defineProperty(CameraAltOutlined,"__esModule",{value:!0});var default_1$u=CameraAltOutlined.default=void 0,_createSvgIcon$u=_interopRequireDefault$J(requireCreateSvgIcon()),_jsxRuntime$u=jsxRuntimeExports;default_1$u=CameraAltOutlined.default=(0,_createSvgIcon$u.default)((0,_jsxRuntime$u.jsx)("path",{d:"M20 4h-3.17L15 2H9L7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 14H4V6h4.05l1.83-2h4.24l1.83 2H20zM12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5m0 8c-1.65 0-3-1.35-3-3s1.35-3 3-3 3 1.35 3 3-1.35 3-3 3"}),"CameraAltOutlined");var PhotoLibraryOutlined={},_interopRequireDefault$I=interopRequireDefaultExports;Object.defineProperty(PhotoLibraryOutlined,"__esModule",{value:!0});var default_1$t=PhotoLibraryOutlined.default=void 0,_createSvgIcon$t=_interopRequireDefault$I(requireCreateSvgIcon()),_jsxRuntime$t=jsxRuntimeExports;default_1$t=PhotoLibraryOutlined.default=(0,_createSvgIcon$t.default)((0,_jsxRuntime$t.jsx)("path",{d:"M20 4v12H8V4zm0-2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m-8.5 9.67 1.69 2.26 2.48-3.1L19 15H9zM2 6v14c0 1.1.9 2 2 2h14v-2H4V6z"}),"PhotoLibraryOutlined");const Navbar=()=>{const _d=useNavigate(),np=localStorage.getItem("jwt"),[rp,ap]=reactExports.useState(!1),sp=lp=>{const up=lp.target.files[0],cp=new FileReader;cp.readAsDataURL(up),cp.onloadend=()=>[_d("/fish/image/edit",{state:{value:cp.result}})]};return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:"container",children:[jsxRuntimeExports.jsx("div",{className:"Navbar_body",children:jsxRuntimeExports.jsx(Outlet,{})}),jsxRuntimeExports.jsxs("nav",{className:"nav",children:[jsxRuntimeExports.jsxs(NavLink,{to:"/",className:"nav-item",children:[jsxRuntimeExports.jsx(default_1$w,{}),jsxRuntimeExports.jsx("span",{children:"홈"})]}),jsxRuntimeExports.jsxs(NavLink,{to:"/fish/map",className:"nav-item",children:[jsxRuntimeExports.jsx(default_1$v,{}),jsxRuntimeExports.jsx("span",{children:"피싱맵"})]}),jsxRuntimeExports.jsxs("div",{className:"nav-item hidden",children:[jsxRuntimeExports.jsxs("svg",{className:"icon",stroke:"currentColor",fill:"none",strokeWidth:"2",viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsx("circle",{cx:"9",cy:"21",r:"1"}),jsxRuntimeExports.jsx("circle",{cx:"20",cy:"21",r:"1"}),jsxRuntimeExports.jsx("path",{d:"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"})]}),jsxRuntimeExports.jsx("span",{children:"Home"})]}),jsxRuntimeExports.jsx("div",{className:"nav-item btn",children:jsxRuntimeExports.jsx("div",{className:"custum-file-upload bg-blue",onClick:()=>ap(!0),children:jsxRuntimeExports.jsx(default_1$y,{})})}),jsxRuntimeExports.jsxs(NavLink,{to:"/media",className:"nav-item",children:[jsxRuntimeExports.jsx(default_1$x,{}),jsxRuntimeExports.jsx("span",{children:"RoomList"})]}),np?jsxRuntimeExports.jsxs(NavLink,{to:"/user/mypage",className:"nav-item",children:[jsxRuntimeExports.jsx(default_1$z,{}),jsxRuntimeExports.jsx("span",{children:"마이"})]}):jsxRuntimeExports.jsx("div",{className:"nav-item",children:jsxRuntimeExports.jsx(NoneLogin,{})})]}),rp&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"choice",onClick:()=>ap(!1)}),jsxRuntimeExports.jsxs("div",{className:"camera-content",children:[jsxRuntimeExports.jsxs("label",{htmlFor:"file1",children:[jsxRuntimeExports.jsx(default_1$u,{}),"카메라로 촬영",jsxRuntimeExports.jsx("input",{type:"file",id:"file1",accept:"image/*",capture:"camera",onChange:sp})]}),jsxRuntimeExports.jsxs("label",{htmlFor:"file2",children:[jsxRuntimeExports.jsx(default_1$t,{}),"앨범에서 선택",jsxRuntimeExports.jsx("input",{type:"file",id:"file2",accept:"image/*",onChange:sp})]})]})]})]})})};function IoBookOutline(_d){return GenIcon({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M256 160c16-63.16 76.43-95.41 208-96a15.94 15.94 0 0 1 16 16v288a16 16 0 0 1-16 16c-128 0-177.45 25.81-208 64-30.37-38-80-64-208-64-9.88 0-16-8.05-16-17.93V80a15.94 15.94 0 0 1 16-16c131.57.59 192 32.84 208 96zm0 0v288"},child:[]}]})(_d)}const logo="/assets/Logo-WtStl40p.svg",SHOWS=[{rating:8.5,title:"The Queen's Gambit"},{rating:9.5,title:"Breaking Bad"},{rating:8.1,title:"Wednesday"},{rating:8.7,title:"Stranger Things"}],Slider=()=>jsxRuntimeExports.jsx("div",{className:"slider",children:jsxRuntimeExports.jsx(Swiper,{modules:[EffectCoverflow],effect:"coverflow",slidesPerView:1.4,centeredSlides:!0,mousewheel:{invert:!1},onSlideChange:()=>console.log("slide change"),spaceBetween:-100,slideToClickedSlide:!0,coverflowEffect:{rotate:50,stretch:0,depth:100,modifier:1,slideShadows:!0},children:SHOWS.map((_d,np)=>jsxRuntimeExports.jsx(SwiperSlide,{},np))})});var Phishing={},_interopRequireDefault$H=interopRequireDefaultExports;Object.defineProperty(Phishing,"__esModule",{value:!0});var default_1$s=Phishing.default=void 0,_createSvgIcon$s=_interopRequireDefault$H(requireCreateSvgIcon()),_jsxRuntime$s=jsxRuntimeExports;default_1$s=Phishing.default=(0,_createSvgIcon$s.default)((0,_jsxRuntime$s.jsx)("path",{d:"M19 9c0-1.3-.84-2.4-2-2.82V2h-2v4.18C13.84 6.6 13 7.7 13 9s.84 2.4 2 2.82V15c0 2.21-1.79 4-4 4s-4-1.79-4-4v-1h3L5 9v6c0 3.31 2.69 6 6 6s6-2.69 6-6v-3.18c1.16-.42 2-1.52 2-2.82m-3 1c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1"}),"Phishing");var define_import_meta_env_default={VITE_BASE_URL:"https://i10c203.p.ssafy.io",VITE_FRONT_URL:"https://i10c203.p.ssafy.io",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};function HomePage(){return console.log(define_import_meta_env_default),jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:"Home",children:[jsxRuntimeExports.jsxs("div",{className:"Home_header",children:[jsxRuntimeExports.jsx("img",{src:logo,alt:"logo"}),jsxRuntimeExports.jsx(Link,{to:"/fishbook","aria-label":"어종도감 이동",children:jsxRuntimeExports.jsx(IoBookOutline,{})}),jsxRuntimeExports.jsx(Link,{to:"/tutorial","aria-label":"튜토리얼 도감",children:jsxRuntimeExports.jsx(IoBookOutline,{})}),jsxRuntimeExports.jsx(Link,{to:"/chatbot","aria-label":"챗봇 이동",children:jsxRuntimeExports.jsx(default_1$s,{})})]}),jsxRuntimeExports.jsx(Slider,{})]})})}var dist$1={},customMobilenet={};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var t$1=function(_d,np){return(t$1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(rp,ap){rp.__proto__=ap}||function(rp,ap){for(var sp in ap)ap.hasOwnProperty(sp)&&(rp[sp]=ap[sp])})(_d,np)};function e(_d,np){function rp(){this.constructor=_d}t$1(_d,np),_d.prototype=np===null?Object.create(np):(rp.prototype=np.prototype,new rp)}function n$1(_d,np,rp,ap){return new(rp||(rp=Promise))(function(sp,lp){function up(fp){try{dp(ap.next(fp))}catch(pp){lp(pp)}}function cp(fp){try{dp(ap.throw(fp))}catch(pp){lp(pp)}}function dp(fp){fp.done?sp(fp.value):new rp(function(pp){pp(fp.value)}).then(up,cp)}dp((ap=ap.apply(_d,np||[])).next())})}function r(_d,np){var rp,ap,sp,lp,up={label:0,sent:function(){if(1&sp[0])throw sp[1];return sp[1]},trys:[],ops:[]};return lp={next:cp(0),throw:cp(1),return:cp(2)},typeof Symbol=="function"&&(lp[Symbol.iterator]=function(){return this}),lp;function cp(dp){return function(fp){return function(pp){if(rp)throw new TypeError("Generator is already executing.");for(;up;)try{if(rp=1,ap&&(sp=2&pp[0]?ap.return:pp[0]?ap.throw||((sp=ap.return)&&sp.call(ap),0):ap.next)&&!(sp=sp.call(ap,pp[1])).done)return sp;switch(ap=0,sp&&(pp=[2&pp[0],sp.value]),pp[0]){case 0:case 1:sp=pp;break;case 4:return up.label++,{value:pp[1],done:!1};case 5:up.label++,ap=pp[1],pp=[0];continue;case 7:pp=up.ops.pop(),up.trys.pop();continue;default:if(!(sp=(sp=up.trys).length>0&&sp[sp.length-1])&&(pp[0]===6||pp[0]===2)){up=0;continue}if(pp[0]===3&&(!sp||pp[1]>sp[0]&&pp[1]<sp[3])){up.label=pp[1];break}if(pp[0]===6&&up.label<sp[1]){up.label=sp[1],sp=pp;break}if(sp&&up.label<sp[2]){up.label=sp[2],up.ops.push(pp);break}sp[2]&&up.ops.pop(),up.trys.pop();continue}pp=np.call(_d,up)}catch(hp){pp=[6,hp],ap=0}finally{rp=sp=0}if(5&pp[0])throw pp[1];return{value:pp[0]?pp[1]:void 0,done:!0}}([dp,fp])}}}var o=function(){function _d(np){this.global=np,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return _d.prototype.setPlatform=function(np,rp){this.platform!=null&&console.warn("Platform "+this.platformName+" has already been set. Overwriting the platform with "+rp+"."),this.platformName=np,this.platform=rp},_d.prototype.registerFlag=function(np,rp,ap){if(this.flagRegistry[np]={evaluationFn:rp,setHook:ap},this.urlFlags[np]!=null){var sp=this.urlFlags[np];console.warn("Setting feature override from URL "+np+": "+sp+"."),this.set(np,sp)}},_d.prototype.get=function(np){return np in this.flags?this.flags[np]:(this.flags[np]=this.evaluateFlag(np),this.flags[np])},_d.prototype.getNumber=function(np){return this.get(np)},_d.prototype.getBool=function(np){return this.get(np)},_d.prototype.getFlags=function(){return this.flags},Object.defineProperty(_d.prototype,"features",{get:function(){return this.flags},enumerable:!0,configurable:!0}),_d.prototype.set=function(np,rp){if(this.flagRegistry[np]==null)throw new Error("Cannot set flag "+np+" as it has not been registered.");this.flags[np]=rp,this.flagRegistry[np].setHook!=null&&this.flagRegistry[np].setHook(rp)},_d.prototype.evaluateFlag=function(np){if(this.flagRegistry[np]==null)throw new Error("Cannot evaluate flag '"+np+"': no evaluation function found.");return this.flagRegistry[np].evaluationFn()},_d.prototype.setFlags=function(np){this.flags=Object.assign({},np)},_d.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},_d.prototype.populateURLFlags=function(){var np=this;if(this.global!==void 0&&this.global.location!==void 0&&this.global.location.search!==void 0){var rp,ap,sp=(rp=this.global.location.search,ap={},rp.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,function(lp){for(var up=[],cp=1;cp<arguments.length;cp++)up[cp-1]=arguments[cp];return function(dp,fp,pp){dp[decodeURIComponent(fp)]=decodeURIComponent(pp||"")}(ap,up[0],up[1]),up.join("=")}),ap);"tfjsflags"in sp&&sp.tfjsflags.split(",").forEach(function(lp){var up=lp.split(":"),cp=up[0],dp=up[1];np.urlFlags[cp]=function(fp,pp){if((pp=pp.toLowerCase())==="true"||pp==="false")return pp==="true";if(""+ +pp===pp)return+pp;throw new Error("Could not parse value flag value "+pp+" for flag "+fp+".")}(cp,dp)})}},_d}();function a$1(){return i$2}var i$2=null,u=new Map;function s(_d,np){var rp=f$1(_d,np);return u.get(rp)}function c$1(_d){for(var np=u.entries(),rp=[];;){var ap=np.next(),sp=ap.done,lp=ap.value;if(sp)break;var up=lp[0],cp=lp[1];up.split("_")[0]===_d&&rp.push(cp)}return rp}function l$1(_d){var np=_d.kernelName,rp=_d.backendName,ap=f$1(np,rp);if(u.has(ap))throw new Error("The kernel '"+np+"' for backend '"+rp+"' is already registered");u.set(ap,_d)}function h$1(_d,np){var rp=f$1(_d,np);if(!u.has(rp))throw new Error("The kernel '"+_d+"' for backend '"+np+"' is not registered");u.delete(rp)}function f$1(_d,np){return np+"_"+_d}function p(_d){for(var np=_d.length,rp=0,ap=0;np>0;)ap=Math.random()*np|0,rp=_d[--np],_d[np]=_d[ap],_d[ap]=rp}function d(_d,np,rp){return Math.max(_d,Math.min(np,rp))}function v$1(_d){return _d%2==0?_d:_d+1}function m(_d){for(var np=0,rp=0;rp<_d.length;rp++)np+=_d[rp];return np}function g(_d,np){if(!_d)throw new Error(typeof np=="string"?np:np())}function y(_d,np,rp){rp===void 0&&(rp=""),g(C(_d,np),function(){return rp+" Shapes "+_d+" and "+np+" must match"})}function x(_d){g(_d!=null,function(){return"The input to the tensor constructor must be a non-null value."})}function b(_d,np,rp){if(np===void 0&&(np=[]),rp===void 0&&(rp=!1),np==null&&(np=[]),Array.isArray(_d)||B(_d)&&!rp)for(var ap=0;ap<_d.length;++ap)b(_d[ap],np,rp);else np.push(_d);return np}function w$1(_d){if(_d.length===0)return 1;for(var np=_d[0],rp=1;rp<_d.length;rp++)np*=_d[rp];return np}function C(_d,np){if(_d===np)return!0;if(_d==null||np==null||_d.length!==np.length)return!1;for(var rp=0;rp<_d.length;rp++)if(_d[rp]!==np[rp])return!1;return!0}function E(_d){return _d%1==0}function R$1(_d){if(Math.tanh!=null)return Math.tanh(_d);if(_d===1/0)return 1;if(_d===-1/0)return-1;var np=Math.exp(2*_d);return(np-1)/(np+1)}function I(_d){var np=Math.ceil(Math.sqrt(_d));return[np,Math.ceil(_d/np)]}function k$1(_d,np){return np<=_d.length?_d:_d+" ".repeat(np-_d.length)}function S(_d,np,rp){return np===void 0&&(np=function(ap){return 0}),new Promise(function(ap,sp){var lp=0,up=function(){if(_d())ap();else{var cp=np(++lp);rp!=null&&lp>=rp?sp():setTimeout(up,cp)}};up()})}function A(_d,np){for(var rp=1,ap=-1,sp=0;sp<_d.length;++sp)if(_d[sp]>=0)rp*=_d[sp];else if(_d[sp]===-1){if(ap!==-1)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+ap+" and dim "+sp);ap=sp}else if(_d[sp]<0)throw Error("Shapes can not be < 0. Found "+_d[sp]+" at dim "+sp);if(ap===-1){if(np>0&&np!==rp)throw Error("Size("+np+") must match the product of shape "+_d);return _d}if(rp===0)throw Error("Cannot infer the missing size in ["+_d+"] when there are 0 elements");if(np%rp!=0)throw Error("The implicit shape can't be a fractional number. Got "+np+" / "+rp);var lp=_d.slice();return lp[ap]=np/rp,lp}function D(_d,np){var rp=np.length;return g((_d=_d==null?np.map(function(ap,sp){return sp}):[].concat(_d)).every(function(ap){return ap>=-rp&&ap<rp}),function(){return"All values in axis param must be in range [-"+rp+", "+rp+") but got axis "+_d}),g(_d.every(function(ap){return E(ap)}),function(){return"All values in axis param must be integers but got axis "+_d}),_d.map(function(ap){return ap<0?rp+ap:ap})}function T(_d,np){for(var rp=[],ap=[],sp=np!=null&&Array.isArray(np)&&np.length===0,lp=np==null||sp?null:D(np,_d).sort(),up=0,cp=0;cp<_d.length;++cp){if(lp!=null){if(lp[up]===cp&&_d[cp]!==1)throw new Error("Can't squeeze axis "+cp+" since its dim '"+_d[cp]+"' is not 1");(lp[up]==null||lp[up]>cp)&&_d[cp]===1&&(rp.push(_d[cp]),ap.push(cp)),lp[up]<=cp&&up++}_d[cp]!==1&&(rp.push(_d[cp]),ap.push(cp))}return{newShape:rp,keptDims:ap}}function N(_d,np){var rp=null;if(_d==null||_d==="float32")rp=new Float32Array(np);else if(_d==="int32")rp=new Int32Array(np);else{if(_d!=="bool")throw new Error("Unknown data type "+_d);rp=new Uint8Array(np)}return rp}function F(_d,np){var rp=null;if(_d==null||_d==="float32")rp=new Float32Array(np);else if(_d==="int32")rp=new Int32Array(np);else if(_d==="bool")rp=new Uint8Array(np);else{if(_d!=="string")throw new Error("Unknown data type "+_d);rp=new Array(np)}return rp}function O(_d,np){for(var rp=0;rp<_d.length;rp++){var ap=_d[rp];if(isNaN(ap)||!isFinite(ap))throw Error("A tensor of type "+np+" being uploaded contains "+ap+".")}}function _(_d){return _d==="bool"||_d==="complex64"||_d==="float32"||_d==="int32"||_d==="string"}function M(_d,np){return np!=="complex64"&&(np!=="float32"||_d==="complex64")&&(np!=="int32"||_d==="float32"||_d==="complex64")&&(np!=="bool"||_d!=="bool")}function B(_d){return _d instanceof Float32Array||_d instanceof Int32Array||_d instanceof Uint8Array}function P(_d){if(_d==="float32"||_d==="int32")return 4;if(_d==="complex64")return 8;if(_d==="bool")return 1;throw new Error("Unknown dtype "+_d)}function L(_d){if(_d==null)return 0;var np=0;return _d.forEach(function(rp){return np+=rp.length}),np}function W(_d){return typeof _d=="string"||_d instanceof String}function U(_d){return typeof _d=="boolean"}function V(_d){return typeof _d=="number"}function z(_d){return Array.isArray(_d)?z(_d[0]):_d instanceof Float32Array?"float32":_d instanceof Int32Array||_d instanceof Uint8Array?"int32":V(_d)?"float32":W(_d)?"string":U(_d)?"bool":"float32"}function G(_d){return!!(_d&&_d.constructor&&_d.call&&_d.apply)}function H(_d,np){for(var rp=np;rp<_d;++rp)if(_d%rp==0)return rp;return _d}function q(_d){var np=_d.length;if(np<2)return[];var rp=new Array(np-1);rp[np-2]=_d[np-1];for(var ap=np-3;ap>=0;--ap)rp[ap]=rp[ap+1]*_d[ap+1];return rp}function K(_d,np,rp){if(np==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(_d)&&(_d=b(_d)),rp&&O(_d,np),function(lp,up){return lp instanceof Float32Array&&up==="float32"||lp instanceof Int32Array&&up==="int32"||lp instanceof Uint8Array&&up==="bool"}(_d,np))return _d;if(np==null||np==="float32"||np==="complex64")return new Float32Array(_d);if(np==="int32")return new Int32Array(_d);if(np==="bool"){for(var ap=new Uint8Array(_d.length),sp=0;sp<ap.length;++sp)Math.round(_d[sp])!==0&&(ap[sp]=1);return ap}throw new Error("Unknown data type "+np)}function j$1(_d,np){if(_d.length===0)return np[0];var rp=_d.reduce(function(ap,sp){return ap*sp});if(rp===0)return[];if(rp!==np.length)throw new Error("["+_d+"] does not match the input size.");return function ap(sp,lp,up){var cp=new Array;if(lp.length===1)for(var dp=lp[0],fp=0;fp<dp;fp++)cp[fp]=up[sp+fp];else{dp=lp[0];var pp=lp.slice(1),hp=pp.reduce(function(mp,gp){return mp*gp});for(fp=0;fp<dp;fp++)cp[fp]=ap(sp+fp*hp,pp,up)}return cp}(0,_d,np)}function X(_d,np){for(var rp=$$1(_d,np),ap=0;ap<rp.length;ap++)rp[ap]=1;return rp}function $$1(_d,np){if(np==null||np==="float32"||np==="complex64")return new Float32Array(_d);if(np==="int32")return new Int32Array(_d);if(np==="bool")return new Uint8Array(_d);throw new Error("Unknown data type "+np)}function Y(){return a$1().platform.now()}function Q(_d){_d.forEach(function(np){g(Number.isInteger(np)&&np>=0,function(){return"Tensor must have a shape comprised of positive integers but got shape ["+_d+"]."})})}function J(_d,np){return np===void 0&&(np="utf-8"),np=np||"utf-8",a$1().platform.encode(_d,np)}function Z(_d,np){return np===void 0&&(np="utf-8"),np=np||"utf-8",a$1().platform.decode(_d,np)}var tt=Object.freeze({shuffle:p,clamp:d,nearestLargerEven:v$1,sum:m,randUniform:function(_d,np){var rp=Math.random();return np*rp+(1-rp)*_d},distSquared:function(_d,np){for(var rp=0,ap=0;ap<_d.length;ap++){var sp=Number(_d[ap])-Number(np[ap]);rp+=sp*sp}return rp},assert:g,assertShapesMatch:y,assertNonNull:x,flatten:b,sizeFromShape:w$1,isScalarShape:function(_d){return _d.length===0},arraysEqual:C,isInt:E,tanh:R$1,sizeToSquarishShape:I,createShuffledIndices:function(_d){for(var np=new Uint32Array(_d),rp=0;rp<_d;++rp)np[rp]=rp;return p(np),np},rightPad:k$1,repeatedTry:S,inferFromImplicitShape:A,parseAxisParam:D,squeezeShape:T,getTypedArrayFromDType:N,getArrayFromDType:F,checkConversionForErrors:O,isValidDtype:_,hasEncodingLoss:M,isTypedArray:B,bytesPerElement:P,bytesFromStringArray:L,isString:W,isBoolean:U,isNumber:V,inferDtype:z,isFunction:G,nearestDivisor:H,computeStrides:q,toTypedArray:K,toNestedArray:j$1,makeOnesTypedArray:X,makeZerosTypedArray:$$1,now:Y,assertNonNegativeIntegerDimensions:Q,fetch:function(_d,np){return a$1().platform.fetch(_d,np)},encodeString:J,decodeString:Z}),et=function(){function _d(np,rp){this.backendTimer=np,this.logger=rp,rp==null&&(this.logger=new nt)}return _d.prototype.profileKernel=function(np,rp,ap){var sp,lp=this,up=this.backendTimer.time(function(){sp=ap()});return sp.forEach(function(cp){cp.data().then(function(dp){(function(fp,pp,hp){if(pp!=="float32")return!1;for(var mp=0;mp<fp.length;mp++){var gp=fp[mp];if(isNaN(gp)||!isFinite(gp))return console.warn("Found "+gp+" in the result of '"+hp+"'"),!0}})(dp,cp.dtype,np),up.then(function(fp){var pp="";fp.getExtraProfileInfo!=null&&(pp=fp.getExtraProfileInfo()),lp.logger.logKernelProfile(np,cp,dp,fp.kernelMs,rp,pp)})})}),sp},_d}(),nt=function(){function _d(){}return _d.prototype.logKernelProfile=function(np,rp,ap,sp,lp,up){var cp=k$1(sp+"ms",9),dp=k$1(np,25),fp=rp.rank,pp=rp.size,hp=k$1(rp.shape.toString(),14),mp="";for(var gp in lp){var vp=lp[gp].shape,xp=vp.length;mp+=gp+": "+xp+"D "+(xp>0?vp:"")+" "}console.log("%c"+dp+"	%c"+cp+"	%c"+fp+"D "+hp+"	%c"+pp+"	%c"+mp+"	%c"+up,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")},_d}(),rt=20,ot=3,at=7;function it(_d,np,rp,ap){var sp=q(np),lp=function(fp,pp,hp,mp){var gp=w$1(pp),vp=mp[mp.length-1],xp=new Array(vp).fill(0),Sp=pp.length,yp=hp==="complex64"?ct(fp):fp;if(Sp>1)for(var bp=0;bp<gp/vp;bp++)for(var Ep=bp*vp,wp=0;wp<vp;wp++)xp[wp]=Math.max(xp[wp],ut(yp[Ep+wp],0,hp).length);return xp}(_d,np,rp,sp),up=np.length,cp=function fp(pp,hp,mp,gp,vp,xp){xp===void 0&&(xp=!0);var Sp=mp==="complex64"?2:1,yp=hp[0],bp=hp.length;if(bp===0){if(mp==="complex64"){var Ep=ct(pp);return[ut(Ep[0],0,mp)]}return mp==="bool"?[st(pp[0])]:[pp[0].toString()]}if(bp===1){if(yp>rt){var wp=ot*Sp,_p=Array.from(pp.slice(0,wp)),Cp=Array.from(pp.slice(yp-ot*Sp,yp));return mp==="complex64"&&(_p=ct(_p),Cp=ct(Cp)),["["+_p.map(function(kp,Tp){return ut(kp,vp[Tp],mp)}).join(", ")+", ..., "+Cp.map(function(kp,Tp){return ut(kp,vp[yp-ot+Tp],mp)}).join(", ")+"]"]}var $p=mp==="complex64"?ct(pp):Array.from(pp);return["["+$p.map(function(kp,Tp){return ut(kp,vp[Tp],mp)}).join(", ")+"]"]}var Rp=hp.slice(1),Pp=gp.slice(1),Op=gp[0]*Sp,jp=[];if(yp>rt){for(var Mp=0;Mp<ot;Mp++){var Ap=Mp*Op,Dp=Ap+Op;jp.push.apply(jp,fp(pp.slice(Ap,Dp),Rp,mp,Pp,vp,!1))}jp.push("...");for(var Mp=yp-ot;Mp<yp;Mp++){var Ap=Mp*Op,Dp=Ap+Op;jp.push.apply(jp,fp(pp.slice(Ap,Dp),Rp,mp,Pp,vp,Mp===yp-1))}}else for(var Mp=0;Mp<yp;Mp++){var Ap=Mp*Op,Dp=Ap+Op;jp.push.apply(jp,fp(pp.slice(Ap,Dp),Rp,mp,Pp,vp,Mp===yp-1))}var Fp=bp===2?",":"";jp[0]="["+jp[0]+Fp;for(var Mp=1;Mp<jp.length-1;Mp++)jp[Mp]=" "+jp[Mp]+Fp;for(var Ip=`,
`,Mp=2;Mp<bp;Mp++)Ip+=`
`;return jp[jp.length-1]=" "+jp[jp.length-1]+"]"+(xp?"":Ip),jp}(_d,np,rp,sp,lp),dp=["Tensor"];return ap&&(dp.push("  dtype: "+rp),dp.push("  rank: "+up),dp.push("  shape: ["+np+"]"),dp.push("  values:")),dp.push(cp.map(function(fp){return"    "+fp}).join(`
`)),dp.join(`
`)}function ut(_d,np,rp){return k$1(Array.isArray(_d)?parseFloat(_d[0].toFixed(at))+" + "+parseFloat(_d[1].toFixed(at))+"j":W(_d)?"'"+_d+"'":rp==="bool"?st(_d):parseFloat(_d.toFixed(at)).toString(),np)}function st(_d){return _d===0?"false":"true"}function ct(_d){for(var np=[],rp=0;rp<_d.length;rp+=2)np.push([_d[rp],_d[rp+1]]);return np}var lt=function(){function _d(np,rp,ap){var sp=this;if(this.dtype=rp,this.shape=np.slice(),this.size=w$1(np),ap!=null){var lp=ap.length;g(lp===this.size,function(){return"Length of values '"+lp+"' does not match the size inferred by the shape '"+sp.size+"'."})}if(rp==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=ap||F(rp,this.size),this.strides=q(np)}return _d.prototype.set=function(np){for(var rp=this,ap=[],sp=1;sp<arguments.length;sp++)ap[sp-1]=arguments[sp];ap.length===0&&(ap=[0]),g(ap.length===this.rank,function(){return"The number of provided coordinates ("+ap.length+") must match the rank ("+rp.rank+")"});var lp=this.locToIndex(ap);this.values[lp]=np},_d.prototype.get=function(){for(var np=[],rp=0;rp<arguments.length;rp++)np[rp]=arguments[rp];np.length===0&&(np=[0]);for(var ap=0,sp=0,lp=np;sp<lp.length;sp++){var up=lp[sp];if(up<0||up>=this.shape[ap]){var cp="Requested out of range element at "+np+".   Buffer shape="+this.shape;throw new Error(cp)}ap++}for(var dp=np[np.length-1],fp=0;fp<np.length-1;++fp)dp+=this.strides[fp]*np[fp];return this.values[dp]},_d.prototype.locToIndex=function(np){if(this.rank===0)return 0;if(this.rank===1)return np[0];for(var rp=np[np.length-1],ap=0;ap<np.length-1;++ap)rp+=this.strides[ap]*np[ap];return rp},_d.prototype.indexToLoc=function(np){if(this.rank===0)return[];if(this.rank===1)return[np];for(var rp=new Array(this.shape.length),ap=0;ap<rp.length-1;++ap)rp[ap]=Math.floor(np/this.strides[ap]),np-=rp[ap]*this.strides[ap];return rp[rp.length-1]=np,rp},Object.defineProperty(_d.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),_d.prototype.toTensor=function(){return ht().makeTensor(this.values,this.shape,this.dtype)},_d}(),ht=null,ft=null,pt=null,dt=function(){function _d(np,rp,ap,sp){this.kept=!1,this.isDisposedInternal=!1,this.shape=np.slice(),this.dtype=rp||"float32",this.size=w$1(np),this.strides=q(np),this.dataId=ap,this.id=sp,this.rankType=this.rank<5?this.rank.toString():"higher"}return _d.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},_d.prototype.asScalar=function(){return this.throwIfDisposed(),g(this.size===1,function(){return"The array must have only 1 element."}),this.reshape([])},_d.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},_d.prototype.as2D=function(np,rp){return this.throwIfDisposed(),this.reshape([np,rp])},_d.prototype.as3D=function(np,rp,ap){return this.throwIfDisposed(),this.reshape([np,rp,ap])},_d.prototype.as4D=function(np,rp,ap,sp){return this.throwIfDisposed(),this.reshape([np,rp,ap,sp])},_d.prototype.as5D=function(np,rp,ap,sp,lp){return this.throwIfDisposed(),this.reshape([np,rp,ap,sp,lp])},_d.prototype.asType=function(np){return this.throwIfDisposed(),ft.cast(this,np)},Object.defineProperty(_d.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),_d.prototype.buffer=function(){return n$1(this,void 0,void 0,function(){var np;return r(this,function(rp){switch(rp.label){case 0:return[4,this.data()];case 1:return np=rp.sent(),[2,ft.buffer(this.shape,this.dtype,np)]}})})},_d.prototype.bufferSync=function(){return ft.buffer(this.shape,this.dtype,this.dataSync())},_d.prototype.array=function(){return n$1(this,void 0,void 0,function(){var np;return r(this,function(rp){switch(rp.label){case 0:return[4,this.data()];case 1:return np=rp.sent(),[2,j$1(this.shape,np)]}})})},_d.prototype.arraySync=function(){return j$1(this.shape,this.dataSync())},_d.prototype.data=function(){return n$1(this,void 0,void 0,function(){var np,rp;return r(this,function(ap){switch(ap.label){case 0:return this.throwIfDisposed(),np=ht().read(this.dataId),this.dtype!=="string"?[3,2]:[4,np];case 1:rp=ap.sent();try{return[2,rp.map(function(sp){return Z(sp)})]}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}ap.label=2;case 2:return[2,np]}})})},_d.prototype.dataSync=function(){this.throwIfDisposed();var np=ht().readSync(this.dataId);if(this.dtype==="string")try{return np.map(function(rp){return Z(rp)})}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return np},_d.prototype.bytes=function(){return n$1(this,void 0,void 0,function(){var np;return r(this,function(rp){switch(rp.label){case 0:return this.throwIfDisposed(),[4,ht().read(this.dataId)];case 1:return np=rp.sent(),this.dtype==="string"?[2,np]:[2,new Uint8Array(np.buffer)]}})})},_d.prototype.dispose=function(){this.isDisposed||(ht().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(_d.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),_d.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},_d.prototype.toFloat=function(){return this.asType("float32")},_d.prototype.toInt=function(){return this.asType("int32")},_d.prototype.toBool=function(){return this.asType("bool")},_d.prototype.print=function(np){return np===void 0&&(np=!1),ft.print(this,np)},_d.prototype.reshape=function(np){return this.throwIfDisposed(),ft.reshape(this,np)},_d.prototype.reshapeAs=function(np){return this.throwIfDisposed(),this.reshape(np.shape)},_d.prototype.expandDims=function(np){return np===void 0&&(np=0),ft.expandDims(this,np)},_d.prototype.cumsum=function(np,rp,ap){return np===void 0&&(np=0),rp===void 0&&(rp=!1),ap===void 0&&(ap=!1),ft.cumsum(this,np,rp,ap)},_d.prototype.squeeze=function(np){return this.throwIfDisposed(),ft.squeeze(this,np)},_d.prototype.clone=function(){return this.throwIfDisposed(),ft.clone(this)},_d.prototype.oneHot=function(np,rp,ap){return this.throwIfDisposed(),ft.oneHot(this,np,rp,ap)},_d.prototype.toString=function(np){return np===void 0&&(np=!1),it(this.dataSync(),this.shape,this.dtype,np)},_d.prototype.tile=function(np){return this.throwIfDisposed(),ft.tile(this,np)},_d.prototype.gather=function(np,rp){return rp===void 0&&(rp=0),this.throwIfDisposed(),ft.gather(this,np,rp)},_d.prototype.matMul=function(np,rp,ap){return rp===void 0&&(rp=!1),ap===void 0&&(ap=!1),this.throwIfDisposed(),ft.matMul(this,np,rp,ap)},_d.prototype.dot=function(np){return this.throwIfDisposed(),ft.dot(this,np)},_d.prototype.norm=function(np,rp,ap){return np===void 0&&(np="euclidean"),rp===void 0&&(rp=null),ap===void 0&&(ap=!1),this.throwIfDisposed(),ft.norm(this,np,rp,ap)},_d.prototype.slice=function(np,rp){return this.throwIfDisposed(),ft.slice(this,np,rp)},_d.prototype.reverse=function(np){return this.throwIfDisposed(),ft.reverse(this,np)},_d.prototype.concat=function(np,rp){return rp===void 0&&(rp=0),this.throwIfDisposed(),np instanceof _d&&(np=[np]),ft.concat([this].concat(np),rp)},_d.prototype.split=function(np,rp){return rp===void 0&&(rp=0),this.throwIfDisposed(),ft.split(this,np,rp)},_d.prototype.stack=function(np,rp){return rp===void 0&&(rp=0),ft.stack([this,np],rp)},_d.prototype.unstack=function(np){return np===void 0&&(np=0),ft.unstack(this,np)},_d.prototype.pad=function(np,rp){return rp===void 0&&(rp=0),ft.pad(this,np,rp)},_d.prototype.batchNormalization=function(np,rp,ap,sp,lp){return ap===void 0&&(ap=.001),pt("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon"),this.batchNorm(np,rp,lp,sp,ap)},_d.prototype.batchNorm=function(np,rp,ap,sp,lp){return lp===void 0&&(lp=.001),this.throwIfDisposed(),ft.batchNorm(this,np,rp,ap,sp,lp)},_d.prototype.all=function(np,rp){return np===void 0&&(np=null),rp===void 0&&(rp=!1),this.throwIfDisposed(),ft.all(this,np,rp)},_d.prototype.any=function(np,rp){return np===void 0&&(np=null),rp===void 0&&(rp=!1),this.throwIfDisposed(),ft.any(this,np,rp)},_d.prototype.logSumExp=function(np,rp){return np===void 0&&(np=null),rp===void 0&&(rp=!1),this.throwIfDisposed(),ft.logSumExp(this,np,rp)},_d.prototype.sum=function(np,rp){return np===void 0&&(np=null),rp===void 0&&(rp=!1),this.throwIfDisposed(),ft.sum(this,np,rp)},_d.prototype.prod=function(np,rp){return np===void 0&&(np=null),rp===void 0&&(rp=!1),this.throwIfDisposed(),ft.prod(this,np,rp)},_d.prototype.mean=function(np,rp){return np===void 0&&(np=null),rp===void 0&&(rp=!1),this.throwIfDisposed(),ft.mean(this,np,rp)},_d.prototype.min=function(np,rp){return np===void 0&&(np=null),rp===void 0&&(rp=!1),this.throwIfDisposed(),ft.min(this,np,rp)},_d.prototype.max=function(np,rp){return np===void 0&&(np=null),rp===void 0&&(rp=!1),this.throwIfDisposed(),ft.max(this,np,rp)},_d.prototype.argMin=function(np){return np===void 0&&(np=null),this.throwIfDisposed(),ft.argMin(this,np)},_d.prototype.argMax=function(np){return np===void 0&&(np=null),this.throwIfDisposed(),ft.argMax(this,np)},_d.prototype.cast=function(np){return this.throwIfDisposed(),ft.cast(this,np)},_d.prototype.add=function(np){return this.throwIfDisposed(),ft.add(this,np)},_d.prototype.addStrict=function(np){return this.throwIfDisposed(),ft.addStrict(this,np)},_d.prototype.atan2=function(np){return this.throwIfDisposed(),ft.atan2(this,np)},_d.prototype.sub=function(np){return this.throwIfDisposed(),ft.sub(this,np)},_d.prototype.subStrict=function(np){return this.throwIfDisposed(),ft.subStrict(this,np)},_d.prototype.pow=function(np){return this.throwIfDisposed(),ft.pow(this,np)},_d.prototype.powStrict=function(np){return this.throwIfDisposed(),ft.powStrict(this,np)},_d.prototype.mul=function(np){return this.throwIfDisposed(),ft.mul(this,np)},_d.prototype.mulStrict=function(np){return this.throwIfDisposed(),ft.mulStrict(this,np)},_d.prototype.div=function(np){return this.throwIfDisposed(),ft.div(this,np)},_d.prototype.floorDiv=function(np){return this.throwIfDisposed(),ft.floorDiv(this,np)},_d.prototype.divStrict=function(np){return this.throwIfDisposed(),ft.divStrict(this,np)},_d.prototype.minimum=function(np){return this.throwIfDisposed(),ft.minimum(this,np)},_d.prototype.minimumStrict=function(np){return this.throwIfDisposed(),ft.minimumStrict(this,np)},_d.prototype.maximum=function(np){return this.throwIfDisposed(),ft.maximum(this,np)},_d.prototype.maximumStrict=function(np){return this.throwIfDisposed(),ft.maximumStrict(this,np)},_d.prototype.mod=function(np){return this.throwIfDisposed(),ft.mod(this,np)},_d.prototype.modStrict=function(np){return this.throwIfDisposed(),ft.modStrict(this,np)},_d.prototype.squaredDifference=function(np){return this.throwIfDisposed(),ft.squaredDifference(this,np)},_d.prototype.squaredDifferenceStrict=function(np){return this.throwIfDisposed(),ft.squaredDifferenceStrict(this,np)},_d.prototype.transpose=function(np){return this.throwIfDisposed(),ft.transpose(this,np)},_d.prototype.notEqual=function(np){return this.throwIfDisposed(),ft.notEqual(this,np)},_d.prototype.notEqualStrict=function(np){return this.throwIfDisposed(),ft.notEqualStrict(this,np)},_d.prototype.less=function(np){return this.throwIfDisposed(),ft.less(this,np)},_d.prototype.lessStrict=function(np){return this.throwIfDisposed(),ft.lessStrict(this,np)},_d.prototype.equal=function(np){return this.throwIfDisposed(),ft.equal(this,np)},_d.prototype.equalStrict=function(np){return this.throwIfDisposed(),ft.equalStrict(this,np)},_d.prototype.lessEqual=function(np){return this.throwIfDisposed(),ft.lessEqual(this,np)},_d.prototype.lessEqualStrict=function(np){return this.throwIfDisposed(),ft.lessEqualStrict(this,np)},_d.prototype.greater=function(np){return this.throwIfDisposed(),ft.greater(this,np)},_d.prototype.greaterStrict=function(np){return this.throwIfDisposed(),ft.greaterStrict(this,np)},_d.prototype.greaterEqual=function(np){return this.throwIfDisposed(),ft.greaterEqual(this,np)},_d.prototype.greaterEqualStrict=function(np){return this.throwIfDisposed(),ft.greaterEqualStrict(this,np)},_d.prototype.logicalAnd=function(np){return this.throwIfDisposed(),ft.logicalAnd(this,np)},_d.prototype.logicalOr=function(np){return this.throwIfDisposed(),ft.logicalOr(this,np)},_d.prototype.logicalNot=function(){return this.throwIfDisposed(),ft.logicalNot(this)},_d.prototype.logicalXor=function(np){return this.throwIfDisposed(),ft.logicalXor(this,np)},_d.prototype.where=function(np,rp){return this.throwIfDisposed(),ft.where(np,this,rp)},_d.prototype.neg=function(){return this.throwIfDisposed(),ft.neg(this)},_d.prototype.ceil=function(){return this.throwIfDisposed(),ft.ceil(this)},_d.prototype.floor=function(){return this.throwIfDisposed(),ft.floor(this)},_d.prototype.sign=function(){return this.throwIfDisposed(),ft.sign(this)},_d.prototype.isNaN=function(){return this.throwIfDisposed(),ft.isNaN(this)},_d.prototype.isInf=function(){return this.throwIfDisposed(),ft.isInf(this)},_d.prototype.isFinite=function(){return this.throwIfDisposed(),ft.isFinite(this)},_d.prototype.exp=function(){return this.throwIfDisposed(),ft.exp(this)},_d.prototype.expm1=function(){return this.throwIfDisposed(),ft.expm1(this)},_d.prototype.log=function(){return this.throwIfDisposed(),ft.log(this)},_d.prototype.log1p=function(){return this.throwIfDisposed(),ft.log1p(this)},_d.prototype.sqrt=function(){return this.throwIfDisposed(),ft.sqrt(this)},_d.prototype.rsqrt=function(){return this.throwIfDisposed(),ft.rsqrt(this)},_d.prototype.square=function(){return this.throwIfDisposed(),ft.square(this)},_d.prototype.reciprocal=function(){return this.throwIfDisposed(),ft.reciprocal(this)},_d.prototype.abs=function(){return this.throwIfDisposed(),ft.abs(this)},_d.prototype.clipByValue=function(np,rp){return this.throwIfDisposed(),ft.clipByValue(this,np,rp)},_d.prototype.relu=function(){return this.throwIfDisposed(),ft.relu(this)},_d.prototype.relu6=function(){return this.throwIfDisposed(),ft.relu6(this)},_d.prototype.elu=function(){return this.throwIfDisposed(),ft.elu(this)},_d.prototype.selu=function(){return this.throwIfDisposed(),ft.selu(this)},_d.prototype.leakyRelu=function(np){return np===void 0&&(np=.2),this.throwIfDisposed(),ft.leakyRelu(this,np)},_d.prototype.prelu=function(np){return this.throwIfDisposed(),ft.prelu(this,np)},_d.prototype.sigmoid=function(){return this.throwIfDisposed(),ft.sigmoid(this)},_d.prototype.logSigmoid=function(){return this.throwIfDisposed(),ft.logSigmoid(this)},_d.prototype.softplus=function(){return this.throwIfDisposed(),ft.softplus(this)},_d.prototype.zerosLike=function(){return this.throwIfDisposed(),ft.zerosLike(this)},_d.prototype.onesLike=function(){return this.throwIfDisposed(),ft.onesLike(this)},_d.prototype.sin=function(){return this.throwIfDisposed(),ft.sin(this)},_d.prototype.cos=function(){return this.throwIfDisposed(),ft.cos(this)},_d.prototype.tan=function(){return this.throwIfDisposed(),ft.tan(this)},_d.prototype.asin=function(){return this.throwIfDisposed(),ft.asin(this)},_d.prototype.acos=function(){return this.throwIfDisposed(),ft.acos(this)},_d.prototype.atan=function(){return this.throwIfDisposed(),ft.atan(this)},_d.prototype.sinh=function(){return this.throwIfDisposed(),ft.sinh(this)},_d.prototype.cosh=function(){return this.throwIfDisposed(),ft.cosh(this)},_d.prototype.tanh=function(){return this.throwIfDisposed(),ft.tanh(this)},_d.prototype.asinh=function(){return this.throwIfDisposed(),ft.asinh(this)},_d.prototype.acosh=function(){return this.throwIfDisposed(),ft.acosh(this)},_d.prototype.atanh=function(){return this.throwIfDisposed(),ft.atanh(this)},_d.prototype.erf=function(){return this.throwIfDisposed(),ft.erf(this)},_d.prototype.round=function(){return this.throwIfDisposed(),ft.round(this)},_d.prototype.step=function(np){return np===void 0&&(np=0),this.throwIfDisposed(),ft.step(this,np)},_d.prototype.softmax=function(np){return np===void 0&&(np=-1),this.throwIfDisposed(),ft.softmax(this,np)},_d.prototype.logSoftmax=function(np){return np===void 0&&(np=-1),this.throwIfDisposed(),ft.logSoftmax(this,np)},_d.prototype.resizeBilinear=function(np,rp){return rp===void 0&&(rp=!1),this.throwIfDisposed(),ft.image.resizeBilinear(this,np,rp)},_d.prototype.resizeNearestNeighbor=function(np,rp){return rp===void 0&&(rp=!1),this.throwIfDisposed(),ft.image.resizeNearestNeighbor(this,np,rp)},_d.prototype.conv1d=function(np,rp,ap,sp,lp,up){return sp===void 0&&(sp="NWC"),lp===void 0&&(lp=1),this.throwIfDisposed(),ft.conv1d(this,np,rp,ap,sp,lp,up)},_d.prototype.conv2d=function(np,rp,ap,sp,lp,up){return sp===void 0&&(sp="NHWC"),lp===void 0&&(lp=[1,1]),this.throwIfDisposed(),ft.conv2d(this,np,rp,ap,sp,lp,up)},_d.prototype.conv2dTranspose=function(np,rp,ap,sp,lp){return this.throwIfDisposed(),ft.conv2dTranspose(this,np,rp,ap,sp,lp)},_d.prototype.depthwiseConv2D=function(np,rp,ap,sp,lp,up){return sp===void 0&&(sp="NHWC"),lp===void 0&&(lp=[1,1]),this.throwIfDisposed(),ft.depthwiseConv2d(this,np,rp,ap,sp,lp,up)},_d.prototype.separableConv2d=function(np,rp,ap,sp,lp,up){return lp===void 0&&(lp=[1,1]),up===void 0&&(up="NHWC"),this.throwIfDisposed(),ft.separableConv2d(this,np,rp,ap,sp,lp,up)},_d.prototype.avgPool=function(np,rp,ap,sp){return this.throwIfDisposed(),ft.avgPool(this,np,rp,ap,sp)},_d.prototype.maxPool=function(np,rp,ap,sp){return this.throwIfDisposed(),ft.maxPool(this,np,rp,ap,sp)},_d.prototype.localResponseNormalization=function(np,rp,ap,sp){return np===void 0&&(np=5),rp===void 0&&(rp=1),ap===void 0&&(ap=1),sp===void 0&&(sp=.5),ft.localResponseNormalization(this,np,rp,ap,sp)},_d.prototype.pool=function(np,rp,ap,sp,lp){return this.throwIfDisposed(),ft.pool(this,np,rp,ap,sp,lp)},_d.prototype.variable=function(np,rp,ap){return np===void 0&&(np=!0),this.throwIfDisposed(),ht().makeVariable(this,np,rp,ap)},_d.prototype.unsortedSegmentSum=function(np,rp){return this.throwIfDisposed(),ft.unsortedSegmentSum(this,np,rp)},_d.prototype.batchToSpaceND=function(np,rp){return this.throwIfDisposed(),ft.batchToSpaceND(this,np,rp)},_d.prototype.spaceToBatchND=function(np,rp){return this.throwIfDisposed(),ft.spaceToBatchND(this,np,rp)},_d.prototype.topk=function(np,rp){return np===void 0&&(np=1),rp===void 0&&(rp=!0),this.throwIfDisposed(),ft.topk(this,np,rp)},_d.prototype.stridedSlice=function(np,rp,ap,sp,lp,up,cp,dp){return sp===void 0&&(sp=0),lp===void 0&&(lp=0),up===void 0&&(up=0),cp===void 0&&(cp=0),dp===void 0&&(dp=0),this.throwIfDisposed(),ft.stridedSlice(this,np,rp,ap,sp,lp,up,cp,dp)},_d.prototype.depthToSpace=function(np,rp){return this.throwIfDisposed(),ft.depthToSpace(this,np,rp)},_d.prototype.fft=function(){return this.throwIfDisposed(),ft.spectral.fft(this)},_d.prototype.ifft=function(){return this.throwIfDisposed(),ft.spectral.ifft(this)},_d.prototype.rfft=function(){return this.throwIfDisposed(),ft.spectral.rfft(this)},_d.prototype.irfft=function(){return this.throwIfDisposed(),ft.spectral.irfft(this)},_d}();Object.defineProperty(dt,Symbol.hasInstance,{value:function(_d){return!!_d&&_d.dataId!=null&&_d.shape!=null&&_d.dtype!=null}});var vt,mt,gt,yt,xt,bt=function(_d){function np(rp,ap,sp,lp){var up=_d.call(this,rp.shape,rp.dtype,rp.dataId,lp)||this;return up.trainable=ap,up.name=sp,up}return e(np,_d),np.prototype.assign=function(rp){if(rp.dtype!==this.dtype)throw new Error("dtype of the new value ("+rp.dtype+") and previous value ("+this.dtype+") must match");if(!C(rp.shape,this.shape))throw new Error("shape of the new value ("+rp.shape+") and previous value ("+this.shape+") must match");ht().disposeTensor(this),this.dataId=rp.dataId,ht().incRef(this,null)},np.prototype.dispose=function(){ht().disposeVariable(this),this.isDisposedInternal=!0},np}(dt);Object.defineProperty(bt,Symbol.hasInstance,{value:function(_d){return _d instanceof dt&&_d.assign!=null&&_d.assign instanceof Function}}),function(_d){_d.R0="R0",_d.R1="R1",_d.R2="R2",_d.R3="R3",_d.R4="R4",_d.R5="R5",_d.R6="R6"}(vt||(vt={})),function(_d){_d.float32="float32",_d.int32="int32",_d.bool="int32",_d.complex64="complex64"}(mt||(mt={})),function(_d){_d.float32="float32",_d.int32="int32",_d.bool="bool",_d.complex64="complex64"}(gt||(gt={})),function(_d){_d.float32="float32",_d.int32="float32",_d.bool="float32",_d.complex64="complex64"}(yt||(yt={})),function(_d){_d.float32="complex64",_d.int32="complex64",_d.bool="complex64",_d.complex64="complex64"}(xt||(xt={}));var wt={float32:yt,int32:mt,bool:gt,complex64:xt};function Ct(_d,np){if(_d==="string"||np==="string"){if(_d==="string"&&np==="string")return"string";throw new Error("Can not upcast "+_d+" with "+np)}return wt[_d][np]}function Et(_d){return Ct(_d,"int32")}function Rt(_d,np){if(_d.dtype===np.dtype)return[_d,np];var rp=Ct(_d.dtype,np.dtype);return[_d.cast(rp),np.cast(rp)]}function It(_d,np){g(_d.dtype===np.dtype,function(){return"The dtypes of the first("+_d.dtype+") and second("+np.dtype+") input must match"})}function kt(_d){var np=[];return function rp(ap,sp,lp){if(ap!=null){if(ap instanceof dt)return void sp.push(ap);if(up=ap,!(!Array.isArray(up)&&typeof up!="object")){var up,cp=ap;for(var dp in cp){var fp=cp[dp];lp.has(fp)||(lp.add(fp),rp(fp,sp,lp))}}}}(_d,np,new Set),np}var St,At=Object.freeze({makeTypesMatch:Rt,assertTypesMatch:It,isTensorInList:function(_d,np){for(var rp=0;rp<np.length;rp++)if(np[rp].id===_d.id)return!0;return!1},getTensorsInContainer:kt}),Dt=function(){function _d(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return _d.prototype.dispose=function(){for(var np in this.registeredVariables)this.registeredVariables[np].dispose()},_d}(),Tt=function(){function _d(np){this.ENV=np,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new Dt}return _d.prototype.ready=function(){return n$1(this,void 0,void 0,function(){var np,rp,ap;return r(this,function(sp){switch(sp.label){case 0:if(this.pendingBackendInit!=null)return[2,this.pendingBackendInit.then(function(){})];if(this.backendInstance!=null)return[2];np=this.getSortedBackends(),rp=0,sp.label=1;case 1:return rp<np.length?(ap=np[rp],[4,this.initializeBackend(ap).success]):[3,5];case 2:return sp.sent()?[4,this.setBackend(ap)]:[3,4];case 3:return sp.sent(),[2];case 4:return rp++,[3,1];case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}})})},Object.defineProperty(_d.prototype,"backend",{get:function(){if(this.pendingBackendInit!=null)throw new Error("Backend '"+this.backendName+"' has not yet been initialized. Make sure to await tf.ready() before calling other methods");if(this.backendInstance==null){var np=this.initializeBackendsAndReturnBest(),rp=np.name;if(np.asyncInit)throw new Error("The highest priority backend '"+rp+"' has not yet been initialized. Make sure to await tf.ready() before calling other methods");this.setBackend(rp)}return this.backendInstance},enumerable:!0,configurable:!0}),_d.prototype.backendNames=function(){return Object.keys(this.registryFactory)},_d.prototype.findBackend=function(np){return!(np in this.registry)&&(!(np in this.registryFactory)||this.initializeBackend(np).asyncInit)?null:this.registry[np]},_d.prototype.findBackendFactory=function(np){return np in this.registryFactory?this.registryFactory[np].factory:null},_d.prototype.registerBackend=function(np,rp,ap){return ap===void 0&&(ap=1),np in this.registryFactory?(console.warn(np+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[np]={factory:rp,priority:ap},!0)},_d.prototype.setBackend=function(np){return n$1(this,void 0,void 0,function(){var rp,ap,sp;return r(this,function(lp){switch(lp.label){case 0:if(this.registryFactory[np]==null)throw new Error("Backend name '"+np+"' not found in registry");return this.backendName=np,this.registry[np]!=null?[3,4]:(this.backendInstance=null,rp=this.initializeBackend(np),ap=rp.success,rp.asyncInit?[4,ap]:[3,2]);case 1:return sp=lp.sent(),[3,3];case 2:sp=ap,lp.label=3;case 3:if(!sp)return[2,!1];lp.label=4;case 4:return this.backendInstance=this.registry[np],this.setupRegisteredKernels(),this.profiler=new et(this.backendInstance),[2,!0]}})})},_d.prototype.setupRegisteredKernels=function(){var np=this;c$1(this.backendName).forEach(function(rp){rp.setupFunc!=null&&rp.setupFunc(np.backendInstance)})},_d.prototype.disposeRegisteredKernels=function(np){var rp=this;c$1(np).forEach(function(ap){ap.disposeFunc!=null&&ap.disposeFunc(rp.registry[np])})},_d.prototype.initializeBackend=function(np){var rp=this,ap=this.registryFactory[np];if(ap==null)throw new Error("Cannot initialize backend "+np+", no registration found.");try{var sp=ap.factory();if(Promise.resolve(sp)===sp){var lp=++this.pendingBackendInitId,up=sp.then(function(cp){return!(lp<rp.pendingBackendInitId)&&(rp.registry[np]=cp,rp.pendingBackendInit=null,!0)}).catch(function(cp){return!(lp<rp.pendingBackendInitId)&&(rp.pendingBackendInit=null,console.warn("Initialization of backend "+np+" failed"),console.warn(cp.stack||cp.message),!1)});return this.pendingBackendInit=up,{success:up,asyncInit:!0}}return this.registry[np]=sp,{success:!0,asyncInit:!1}}catch(cp){return console.warn("Initialization of backend "+np+" failed"),console.warn(cp.stack||cp.message),{success:!1,asyncInit:!1}}},_d.prototype.removeBackend=function(np){if(!(np in this.registryFactory))throw new Error(np+" backend not found in registry");this.backendName===np&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,np in this.registry&&(this.disposeRegisteredKernels(np),this.registry[np].dispose(),delete this.registry[np]),delete this.registryFactory[np],this.backendName===np&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},_d.prototype.getSortedBackends=function(){var np=this;if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(function(rp,ap){return np.registryFactory[ap].priority-np.registryFactory[rp].priority})},_d.prototype.initializeBackendsAndReturnBest=function(){for(var np=this.getSortedBackends(),rp=0;rp<np.length;rp++){var ap=np[rp],sp=this.initializeBackend(ap),lp=sp.success,up=sp.asyncInit;if(up||lp)return{name:ap,asyncInit:up}}throw new Error("Could not initialize any backends, all backend initializations failed.")},_d.prototype.moveData=function(np,rp){var ap=this.state.tensorInfo.get(rp),sp=ap.backend,lp=this.readSync(rp);sp.disposeData(rp),ap.backend=np,np.move(rp,lp,ap.shape,ap.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++},_d.prototype.tidy=function(np,rp){var ap,sp=this,lp=null;if(rp==null){if(typeof np!="function")throw new Error("Please provide a function to tidy()");rp=np}else{if(typeof np!="string"&&!(np instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof rp!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");lp=np}return this.scopedRun(function(){return sp.startScope(lp)},function(){return sp.endScope(ap)},function(){return(ap=rp())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),ap})},_d.prototype.scopedRun=function(np,rp,ap){np();try{var sp=ap();return rp(),sp}catch(lp){throw rp(),lp}},_d.prototype.nextTensorId=function(){return _d.nextTensorId++},_d.prototype.nextVariableId=function(){return _d.nextVariableId++},_d.prototype.clone=function(np){var rp=this.makeTensorFromDataId(np.dataId,np.shape,np.dtype),ap={x:np};return this.addTapeNode(this.state.activeScope.name,ap,[rp],function(sp){return{x:function(){return sp.toFloat()}}},[]),rp},_d.prototype.runKernel=function(np,rp,ap,sp,lp){return this.runKernelFunc(null,rp,null,np,ap,sp,lp)},_d.prototype.shouldCheckForMemLeaks=function(){return this.ENV.getBool("IS_TEST")},_d.prototype.checkKernelForMemLeak=function(np,rp,ap){var sp=this.backend.numDataIds(),lp=0;ap.forEach(function(dp){lp+=dp.dtype==="complex64"?3:1});var up=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],cp=sp-rp-lp-up;if(cp>0)throw new Error("Backend '"+this.backendName+"' has an internal memory leak ("+cp+" data ids) after running '"+np+"'")},_d.prototype.runKernelFunc=function(np,rp,ap,sp,lp,up,cp){var dp,fp=this;up===void 0&&(up=[]),cp===void 0&&(cp=[]);var pp,hp=[],mp=this.isTapeOn(),gp=this.state.activeScope!=null?this.state.activeScope.name:"",vp=function(Ep){mp&&(hp=Ep.map(function(wp){return fp.keep(fp.clone(wp))}))},xp=this.state.numBytes,Sp=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);var yp,bp=s(sp,this.backendName);return pp=bp!=null?function(){var Ep=fp.backend.numDataIds();yp=bp.kernelFunc({inputs:rp,attrs:lp,backend:fp.backend});var wp=Array.isArray(yp)?yp:[yp];fp.shouldCheckForMemLeaks()&&fp.checkKernelForMemLeak(gp,Ep,wp);var _p=wp.map(function($p){var Rp=$p.dataId,Pp=$p.shape,Op=$p.dtype;return fp.makeTensorFromDataId(Rp,Pp,Op)}),Cp=_p.filter(function($p,Rp){return cp[Rp]});return vp(up.slice().concat(Cp)),_p}:function(){var Ep=fp.backend.numDataIds();yp=fp.tidy(function(){return np(fp.backend,vp)});var wp=Array.isArray(yp)?yp:[yp];return fp.shouldCheckForMemLeaks()&&fp.checkKernelForMemLeak(gp,Ep,wp),wp},this.scopedRun(function(){return fp.state.kernelDepth++},function(){return fp.state.kernelDepth--},function(){dp=fp.ENV.getBool("DEBUG")?fp.profiler.profileKernel(gp,rp,function(){return pp()}):pp()}),mp&&this.addTapeNode(gp,rp,dp,ap,hp),this.state.profiling&&this.state.activeProfile.kernels.push({name:gp,bytesAdded:this.state.numBytes-xp,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-Sp,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(rp).map(function(Ep){return rp[Ep].shape}),outputShapes:dp.map(function(Ep){return Ep.shape})}),Array.isArray(yp)?dp:dp[0]},_d.prototype.makeTensor=function(np,rp,ap,sp){if(np==null)throw new Error("Values passed to engine.makeTensor() are null");ap=ap||"float32",sp=sp||this.backend;var lp=np;ap==="string"&&W(np[0])&&(lp=np.map(function(pp){return J(pp)}));var up=sp.write(lp,rp,ap),cp=new dt(rp,ap,up,this.nextTensorId());if(this.incRef(cp,sp),ap==="string"){var dp=this.state.tensorInfo.get(up),fp=L(lp);this.state.numBytes+=fp-dp.bytes,dp.bytes=fp}return cp},_d.prototype.makeTensorFromDataId=function(np,rp,ap,sp){var lp=new dt(rp,ap=ap||"float32",np,this.nextTensorId());return this.incRef(lp,sp),lp},_d.prototype.makeVariable=function(np,rp,ap,sp){rp===void 0&&(rp=!0),ap=ap||this.nextVariableId().toString(),sp!=null&&sp!==np.dtype&&(np=np.asType(sp));var lp=new bt(np,rp,ap,this.nextTensorId());if(this.state.registeredVariables[lp.name]!=null)throw new Error("Variable with name "+lp.name+" was already registered");return this.state.registeredVariables[lp.name]=lp,this.incRef(lp,this.backend),lp},_d.prototype.incRef=function(np,rp){var ap=this.state.tensorInfo.has(np.dataId)?this.state.tensorInfo.get(np.dataId).refCount:0;if(this.state.numTensors++,np.dtype==="string"&&this.state.numStringTensors++,ap===0){this.state.numDataBuffers++;var sp=0;np.dtype!=="complex64"&&np.dtype!=="string"&&(sp=np.size*P(np.dtype)),this.state.tensorInfo.set(np.dataId,{backend:rp||this.backend,dtype:np.dtype,shape:np.shape,bytes:sp,refCount:0}),this.state.numBytes+=sp}this.state.tensorInfo.get(np.dataId).refCount++,np instanceof bt||this.track(np)},_d.prototype.disposeTensor=function(np){if(this.state.tensorInfo.has(np.dataId)){this.state.numTensors--,np.dtype==="string"&&this.state.numStringTensors--;var rp=this.state.tensorInfo.get(np.dataId);rp.refCount<=1?(np.dtype!=="complex64"&&(this.state.numBytes-=rp.bytes),this.state.numDataBuffers--,rp.backend.disposeData(np.dataId),this.state.tensorInfo.delete(np.dataId)):this.state.tensorInfo.get(np.dataId).refCount--}},_d.prototype.disposeVariables=function(){for(var np in this.state.registeredVariables){var rp=this.state.registeredVariables[np];this.disposeVariable(rp)}},_d.prototype.disposeVariable=function(np){this.disposeTensor(np),this.state.registeredVariables[np.name]!=null&&delete this.state.registeredVariables[np.name]},_d.prototype.memory=function(){var np=this.backend.memory();return np.numTensors=this.state.numTensors,np.numDataBuffers=this.state.numDataBuffers,np.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(np.unreliable=!0,np.reasons==null&&(np.reasons=[]),np.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),np},_d.prototype.profile=function(np){return n$1(this,void 0,void 0,function(){var rp,ap;return r(this,function(sp){return this.state.profiling=!0,rp=this.state.numBytes,ap=this.state.numTensors,this.state.activeProfile.kernels=[],this.state.activeProfile.result=np(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,this.state.activeProfile.kernels.map(function(lp){return lp.totalBytesSnapshot})),this.state.activeProfile.newBytes=this.state.numBytes-rp,this.state.activeProfile.newTensors=this.state.numTensors-ap,[2,this.state.activeProfile]})})},_d.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&this.state.kernelDepth===0},_d.prototype.addTapeNode=function(np,rp,ap,sp,lp){var up=this,cp={id:this.state.nextTapeNodeId++,name:np,inputs:rp,outputs:ap,saved:lp};sp!=null&&(cp.gradient=function(dp){return dp=dp.map(function(fp,pp){if(fp==null){var hp=ap[pp],mp=$$1(hp.size,hp.dtype);return up.makeTensor(mp,hp.shape,hp.dtype)}return fp}),sp(dp.length>1?dp:dp[0],lp)}),this.state.activeTape.push(cp)},_d.prototype.keep=function(np){return np.kept=!0,np},_d.prototype.startTape=function(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++},_d.prototype.endTape=function(){this.state.gradientDepth--},_d.prototype.startScope=function(np){var rp={track:[],name:"unnamed scope",id:this.state.nextScopeId++};np&&(rp.name=np),this.state.scopeStack.push(rp),this.state.activeScope=rp},_d.prototype.endScope=function(np){for(var rp=this,ap=kt(np),sp=new Set(ap.map(function(dp){return dp.id})),lp=0;lp<this.state.activeScope.track.length;lp++){var up=this.state.activeScope.track[lp];up.kept||sp.has(up.id)||up.dispose()}var cp=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],ap.forEach(function(dp){dp.kept||dp.scopeId!==cp.id||rp.track(dp)})},_d.prototype.gradients=function(np,rp,ap,sp){var lp=this;if(sp===void 0&&(sp=!1),g(rp.length>0,function(){return"gradients() received an empty list of xs."}),ap!=null&&ap.dtype!=="float32")throw new Error("dy must have 'float32' dtype, but has '"+ap.dtype+"'");var up=this.scopedRun(function(){return lp.startTape()},function(){return lp.endTape()},function(){return lp.tidy("forward",np)});g(up instanceof dt,function(){return"The result y returned by f() must be a tensor."});var cp=function(dp,fp,pp){for(var hp={},mp={},gp=0;gp<fp.length;gp++)hp[fp[gp].id]=!0;for(gp=0;gp<dp.length;gp++){var vp=(Cp=dp[gp]).inputs;for(var xp in vp){for(var Sp=vp[xp],yp=!1,bp=0;bp<fp.length;bp++)if(hp[Sp.id]){Cp.outputs.forEach(function(Op){return hp[Op.id]=!0}),yp=!0,mp[Cp.id]=!0;break}if(yp)break}}var Ep={};Ep[pp.id]=!0;var wp={};for(gp=dp.length-1;gp>=0;gp--)for(vp=(Cp=dp[gp]).inputs,bp=0;bp<Cp.outputs.length;bp++)if(Ep[Cp.outputs[bp].id]){for(var xp in vp)Ep[vp[xp].id]=!0,wp[Cp.id]=!0;break}var _p=[];for(gp=0;gp<dp.length;gp++){var Cp;if(mp[(Cp=dp[gp]).id]&&wp[Cp.id]){var $p={};for(var xp in Cp.inputs){var Rp=Cp.inputs[xp];hp[Rp.id]&&($p[xp]=Rp)}var Pp=Object.assign({},Cp);Pp.inputs=$p,Pp.outputs=Cp.outputs,_p.push(Pp)}}return _p}(this.state.activeTape,rp,up);if(!sp&&cp.length===0&&rp.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",function(){var dp,fp,pp={};pp[up.id]=ap??(dp=up.shape,fp=X(w$1(dp),"float32"),Nt.makeTensor(fp,dp,"float32")),function(mp,gp,vp){for(var xp=function(yp){var bp=gp[yp],Ep=[];if(bp.outputs.forEach(function($p){var Rp=mp[$p.id];Rp!=null?Ep.push(Rp):Ep.push(null)}),bp.gradient==null)throw new Error("Cannot compute gradient: gradient function not found for "+bp.name+".");var wp=bp.gradient(Ep),_p=function($p){if(!($p in wp))throw new Error("Cannot backprop through input "+$p+". Available gradients found: "+Object.keys(wp)+".");var Rp=vp(function(){return wp[$p]()});if(Rp.dtype!=="float32")throw new Error("Error in gradient for op "+bp.name+". The gradient of input "+$p+" must have 'float32' dtype, but has '"+Rp.dtype+"'");var Pp=bp.inputs[$p];if(!C(Rp.shape,Pp.shape))throw new Error("Error in gradient for op "+bp.name+". The gradient of input '"+$p+"' has shape '"+Rp.shape+"', which does not match the shape of the input '"+Pp.shape+"'");if(mp[Pp.id]==null)mp[Pp.id]=Rp;else{var Op=mp[Pp.id];mp[Pp.id]=Op.add(Rp),Op.dispose()}};for(var Cp in bp.inputs)_p(Cp)},Sp=gp.length-1;Sp>=0;Sp--)xp(Sp)}(pp,cp,function(mp){return lp.tidy(mp)});var hp=rp.map(function(mp){return pp[mp.id]});return lp.state.gradientDepth===0&&(lp.state.activeTape.forEach(function(mp){for(var gp in mp.saved)mp.saved[gp].dispose()}),lp.state.activeTape=null),{value:up,grads:hp}})},_d.prototype.customGrad=function(np){var rp=this;return g(G(np),function(){return"The f passed in customGrad(f) must be a function."}),function(){for(var ap,sp=[],lp=0;lp<arguments.length;lp++)sp[lp]=arguments[lp];g(sp.every(function(cp){return cp instanceof dt}),function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"});var up={};return sp.forEach(function(cp,dp){up[dp]=cp}),rp.runKernelFunc(function(cp,dp){return g((ap=np.apply(void 0,sp.concat([dp]))).value instanceof dt,function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"}),g(G(ap.gradFunc),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."}),ap.value},up,function(cp,dp){var fp=ap.gradFunc(cp,dp),pp=Array.isArray(fp)?fp:[fp];g(pp.length===sp.length,function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."}),g(pp.every(function(mp){return mp instanceof dt}),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."});var hp={};return pp.forEach(function(mp,gp){hp[gp]=function(){return mp}}),hp})}},_d.prototype.readSync=function(np){return this.state.tensorInfo.get(np).backend.readSync(np)},_d.prototype.read=function(np){return this.state.tensorInfo.get(np).backend.read(np)},_d.prototype.fromPixels=function(np,rp){return this.backend.fromPixels(np,rp)},_d.prototype.time=function(np){return n$1(this,void 0,void 0,function(){var rp,ap;return r(this,function(sp){switch(sp.label){case 0:return rp=Y(),[4,this.backend.time(np)];case 1:return(ap=sp.sent()).wallMs=Y()-rp,[2,ap]}})})},_d.prototype.track=function(np){return this.state.activeScope!=null&&(np.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(np)),np},Object.defineProperty(_d.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!0,configurable:!0}),_d.prototype.reset=function(){for(var np in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new Dt,this.registry)this.disposeRegisteredKernels(np),this.registry[np].dispose(),delete this.registry[np];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},_d.nextTensorId=0,_d.nextVariableId=0,_d}(),Nt=function(){var _d=function(){if(St==null){var rp=void 0;if(typeof window<"u")rp=window;else if(typeof global<"u")rp=global;else if(typeof process<"u")rp=process;else{if(typeof self>"u")throw new Error("Could not find a global object");rp=self}St=rp}return St}();if(_d._tfengine==null){var np=new o(_d);_d._tfengine=new Tt(np)}return function(rp){i$2=rp}(_d._tfengine.ENV),ht=function(){return _d._tfengine},_d._tfengine}();function Ft(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}var Ot=a$1();Ot.registerFlag("DEBUG",function(){return!1},function(_d){_d&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),Ot.registerFlag("IS_BROWSER",function(){return Ft()}),Ot.registerFlag("IS_NODE",function(){return typeof process<"u"&&process.versions!==void 0&&process.versions.node!==void 0}),Ot.registerFlag("IS_CHROME",function(){return typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}),Ot.registerFlag("PROD",function(){return!1}),Ot.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",function(){return Ot.getBool("DEBUG")}),Ot.registerFlag("DEPRECATION_WARNINGS_ENABLED",function(){return!0}),Ot.registerFlag("IS_TEST",function(){return!1});var _t,Mt,Bt,Pt={},Lt={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function Wt(_d,np){Pt[_d]=np}function Ut(_d){_d in Pt||(Pt[_d]=function(rp){if(rp!==1&&rp!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var ap=Vt(rp);return ap.addEventListener("webglcontextlost",function(sp){sp.preventDefault(),delete Pt[rp]},!1),rp===1?ap.getContext("webgl",Lt)||ap.getContext("experimental-webgl",Lt):ap.getContext("webgl2",Lt)}(_d));var np=Pt[_d];return np.isContextLost()?(delete Pt[_d],Ut(_d)):(np.disable(np.DEPTH_TEST),np.disable(np.STENCIL_TEST),np.disable(np.BLEND),np.disable(np.DITHER),np.disable(np.POLYGON_OFFSET_FILL),np.disable(np.SAMPLE_COVERAGE),np.enable(np.SCISSOR_TEST),np.enable(np.CULL_FACE),np.cullFace(np.BACK),Pt[_d])}function Vt(_d){if(typeof OffscreenCanvas<"u"&&_d===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function zt(_d,np){return[np,_d]}function Gt(_d){var np=w$1(_d);return I(Math.ceil(np/4))}function Ht(_d,np){return[Math.max(1,Math.ceil(np/2)),Math.max(1,Math.ceil(_d/2))]}function qt(_d,np){var rp,ap,sp,lp,up,cp,dp,fp,pp,hp=_d;return a$1().getNumber("WEBGL_VERSION")===2?(rp=hp.R32F,ap=hp.R16F,sp=hp.RGBA16F,lp=hp.RGBA32F,up=hp.RED,cp=4,dp=1,fp=hp.HALF_FLOAT,pp=hp.FLOAT):(rp=_d.RGBA,ap=_d.RGBA,sp=_d.RGBA,lp=hp.RGBA,up=_d.RGBA,cp=4,dp=4,fp=np!=null?np.HALF_FLOAT_OES:null,pp=_d.FLOAT),{internalFormatFloat:rp,internalFormatHalfFloat:ap,internalFormatPackedHalfFloat:sp,internalFormatPackedFloat:lp,textureFormatFloat:up,downloadTextureFormat:_d.RGBA,downloadUnpackNumChannels:cp,defaultNumChannels:dp,textureTypeHalfFloat:fp,textureTypeFloat:pp}}function Kt(_d,np,rp){var ap=rp();return np&&function(sp){var lp=sp.getError();if(lp!==sp.NO_ERROR)throw new Error("WebGL Error: "+Yt(sp,lp))}(_d),ap}(function(_d){_d[_d.DENSE=0]="DENSE",_d[_d.SHARED_BATCH=1]="SHARED_BATCH"})(_t||(_t={})),function(_d){_d[_d.RENDER=0]="RENDER",_d[_d.UPLOAD=1]="UPLOAD",_d[_d.PIXELS=2]="PIXELS",_d[_d.DOWNLOAD=3]="DOWNLOAD"}(Mt||(Mt={})),function(_d){_d[_d.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",_d[_d.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",_d[_d.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",_d[_d.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",_d[_d.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(Bt||(Bt={}));var jt=596e-10,Xt=65504;function $t(_d){return!!(a$1().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||_d===0||jt<Math.abs(_d)&&Math.abs(_d)<Xt)}function Yt(_d,np){switch(np){case _d.NO_ERROR:return"NO_ERROR";case _d.INVALID_ENUM:return"INVALID_ENUM";case _d.INVALID_VALUE:return"INVALID_VALUE";case _d.INVALID_OPERATION:return"INVALID_OPERATION";case _d.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case _d.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case _d.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+np}}function Qt(_d,np,rp){return be(_d,np,function(){return _d.getExtension(rp)},'Extension "'+rp+'" not supported on this browser.')}function Jt(_d,np,rp){var ap=be(_d,np,function(){return _d.createShader(_d.VERTEX_SHADER)},"Unable to create vertex WebGLShader.");if(Kt(_d,np,function(){return _d.shaderSource(ap,rp)}),Kt(_d,np,function(){return _d.compileShader(ap)}),_d.getShaderParameter(ap,_d.COMPILE_STATUS)===!1)throw console.log(_d.getShaderInfoLog(ap)),new Error("Failed to compile vertex shader.");return ap}function Zt(_d,np,rp){var ap=be(_d,np,function(){return _d.createShader(_d.FRAGMENT_SHADER)},"Unable to create fragment WebGLShader.");if(Kt(_d,np,function(){return _d.shaderSource(ap,rp)}),Kt(_d,np,function(){return _d.compileShader(ap)}),_d.getShaderParameter(ap,_d.COMPILE_STATUS)===!1)throw function(sp,lp){var up=ne.exec(lp);if(up==null)return console.log("Couldn't parse line number in error: "+lp),void console.log(sp);for(var cp=+up[1],dp=sp.split(`
`),fp=dp.length.toString().length+2,pp=dp.map(function(Sp,yp){return k$1((yp+1).toString(),fp)+Sp}),hp=0,mp=0;mp<pp.length;mp++)hp=Math.max(pp[mp].length,hp);var gp=pp.slice(0,cp-1),vp=pp.slice(cp-1,cp),xp=pp.slice(cp);console.log(gp.join(`
`)),console.log(lp.split(`
`)[0]),console.log("%c "+k$1(vp[0],hp),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(xp.join(`
`))}(rp,_d.getShaderInfoLog(ap)),new Error("Failed to compile fragment shader.");return ap}var te,ee,ne=/ERROR: [0-9]+:([0-9]+):/g;function re$2(_d,np){return be(_d,np,function(){return _d.createProgram()},"Unable to create WebGLProgram.")}function oe(_d,np,rp){if(Kt(_d,np,function(){return _d.linkProgram(rp)}),_d.getProgramParameter(rp,_d.LINK_STATUS)===!1)throw console.log(_d.getProgramInfoLog(rp)),new Error("Failed to link vertex and fragment shaders.")}function ae(_d,np,rp){if(Kt(_d,np,function(){return _d.validateProgram(rp)}),_d.getProgramParameter(rp,_d.VALIDATE_STATUS)===!1)throw console.log(_d.getProgramInfoLog(rp)),new Error("Shader program validation failed.")}function ie(_d,np,rp){var ap=be(_d,np,function(){return _d.createBuffer()},"Unable to create WebGLBuffer");return Kt(_d,np,function(){return _d.bindBuffer(_d.ARRAY_BUFFER,ap)}),Kt(_d,np,function(){return _d.bufferData(_d.ARRAY_BUFFER,rp,_d.STATIC_DRAW)}),ap}function ue(_d,np,rp){var ap=be(_d,np,function(){return _d.createBuffer()},"Unable to create WebGLBuffer");return Kt(_d,np,function(){return _d.bindBuffer(_d.ELEMENT_ARRAY_BUFFER,ap)}),Kt(_d,np,function(){return _d.bufferData(_d.ELEMENT_ARRAY_BUFFER,rp,_d.STATIC_DRAW)}),ap}function se(_d,np){return be(_d,np,function(){return _d.createTexture()},"Unable to create WebGLTexture.")}function ce(_d,np){var rp=a$1().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(_d<=0||np<=0){var ap="["+_d+"x"+np+"]";throw new Error("Requested texture size "+ap+" is invalid.")}if(_d>rp||np>rp)throw ap="["+_d+"x"+np+"]",new Error("Requested texture size "+ap+" greater than WebGL maximum on this browser / GPU "+("["+rp+"x"+rp+"]")+".")}function le(_d,np){return be(_d,np,function(){return _d.createFramebuffer()},"Unable to create WebGLFramebuffer.")}function he(_d,np,rp,ap,sp,lp,up,cp){var dp=_d.getAttribLocation(rp,ap);return dp!==-1&&(Kt(_d,np,function(){return _d.bindBuffer(_d.ARRAY_BUFFER,sp)}),Kt(_d,np,function(){return _d.vertexAttribPointer(dp,lp,_d.FLOAT,!1,up,cp)}),Kt(_d,np,function(){return _d.enableVertexAttribArray(dp)}),!0)}function fe(_d,np,rp,ap){we(_d,ap),Kt(_d,np,function(){return _d.activeTexture(_d.TEXTURE0+ap)}),Kt(_d,np,function(){return _d.bindTexture(_d.TEXTURE_2D,rp)})}function pe(_d,np,rp,ap){return be(_d,np,function(){return _d.getUniformLocation(rp,ap)},'uniform "'+ap+'" not present in program.')}function de(_d,np,rp){return _d.getUniformLocation(np,rp)}function ve(_d,np,rp,ap,sp,lp){Kt(_d,np,function(){return fe(_d,np,ap,lp)}),Kt(_d,np,function(){return _d.uniform1i(sp,lp)})}function me(_d,np,rp,ap){Kt(_d,np,function(){return _d.bindFramebuffer(_d.FRAMEBUFFER,ap)}),Kt(_d,np,function(){return _d.framebufferTexture2D(_d.FRAMEBUFFER,_d.COLOR_ATTACHMENT0,_d.TEXTURE_2D,rp,0)})}function ge(_d,np,rp){Kt(_d,np,function(){return _d.bindFramebuffer(_d.FRAMEBUFFER,rp)}),Kt(_d,np,function(){return _d.framebufferTexture2D(_d.FRAMEBUFFER,_d.COLOR_ATTACHMENT0,_d.TEXTURE_2D,null,0)})}function ye(_d){var np=_d.checkFramebufferStatus(_d.FRAMEBUFFER);if(np!==_d.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+xe(_d,np))}function xe(_d,np){switch(np){case _d.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case _d.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case _d.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case _d.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+np}}function be(_d,np,rp,ap){var sp=Kt(_d,np,function(){return rp()});if(sp==null)throw new Error(ap);return sp}function we(_d,np){var rp=_d.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,ap=np+_d.TEXTURE0;if(ap<_d.TEXTURE0||ap>rp)throw new Error("textureUnit must be in "+("[gl.TEXTURE0, gl.TEXTURE"+rp+"]")+".")}function Ce(_d,np){return np===void 0&&(np=2),w$1(_d.slice(0,_d.length-np))}function Ee(_d){if(_d.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[_d.length>1?_d[_d.length-2]:1,_d[_d.length-1]]}function Re(_d){var np=[1,1,1];return _d.length===0||_d.length===1&&_d[0]===1||(np=[Ce(_d)].concat(Ee(_d))),np}function Ie(_d,np){var rp;np===void 0&&(np=!1);var ap=a$1().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(np&&(ap*=2,(_d=_d.map(function(fp,pp){return pp>=_d.length-2?v$1(_d[pp]):_d[pp]})).length===1&&(_d=[2,_d[0]])),_d.length!==2){var sp=T(_d);_d=sp.newShape}var lp=w$1(_d);if(_d.length<=1&&lp<=ap)return[1,lp];if(_d.length===2&&_d[0]<=ap&&_d[1]<=ap)return _d;if(_d.length===3&&_d[0]*_d[1]<=ap&&_d[2]<=ap)return[_d[0]*_d[1],_d[2]];if(_d.length===3&&_d[0]<=ap&&_d[1]*_d[2]<=ap)return[_d[0],_d[1]*_d[2]];if(_d.length===4&&_d[0]*_d[1]*_d[2]<=ap&&_d[3]<=ap)return[_d[0]*_d[1]*_d[2],_d[3]];if(_d.length===4&&_d[0]<=ap&&_d[1]*_d[2]*_d[3]<=ap)return[_d[0],_d[1]*_d[2]*_d[3]];if(np){var up=Ce(_d),cp=2,dp=2;return _d.length&&(cp=(rp=Ee(_d))[0],dp=rp[1]),I(lp=up*(cp/2)*(dp/2)).map(function(fp){return 2*fp})}return I(lp)}function ke(_d){return _d%2==0}function Se(_d,np){if(C(_d=_d.slice(-2),np=np.slice(-2))||!_d.length||!np.length||_d[0]===0||_d[1]===0||np[0]===0||np[1]===0)return!0;if(_d.length!==np.length){var rp=_d.slice(-1)[0],ap=np.slice(-1)[0];if(rp===ap||ke(rp)&&ke(ap)&&(_d[0]===1||np[0]===1))return!0}return _d[1]===np[1]&&ke(_d[0])&&ke(np[0])}function Ae(_d){if(te==null){var np=Ut(_d);te=np.getParameter(np.MAX_TEXTURE_SIZE)}return te}function De(_d){if(ee==null){var np=Ut(_d);ee=np.getParameter(np.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,ee)}function Te(_d){if(_d===0)return 0;var np=Ut(_d);return Ne(np,"EXT_disjoint_timer_query_webgl2")&&_d===2?2:Ne(np,"EXT_disjoint_timer_query")?1:0}function Ne(_d,np){return _d.getExtension(np)!=null}function Fe(_d){try{if(Ut(_d)!=null)return!0}catch{return!1}return!1}function Oe(_d){if(_d===0)return!1;var np=Ut(_d);if(_d===1){if(!Ne(np,"OES_texture_float"))return!1}else if(!Ne(np,"EXT_color_buffer_float"))return!1;return Me(np)}function _e(_d){if(_d===0)return!1;var np=Ut(_d);if(_d!==1){if(Ne(np,"EXT_color_buffer_float"))return Me(np);if(Ne(np,"EXT_color_buffer_half_float")){var rp=np.getExtension("EXT_color_buffer_half_float");return function(ap,sp){var lp=qt(ap,sp),up=ap.createTexture();ap.bindTexture(ap.TEXTURE_2D,up),ap.texImage2D(ap.TEXTURE_2D,0,lp.internalFormatHalfFloat,1,1,0,lp.textureFormatFloat,lp.textureTypeHalfFloat,null);var cp=ap.createFramebuffer();ap.bindFramebuffer(ap.FRAMEBUFFER,cp),ap.framebufferTexture2D(ap.FRAMEBUFFER,ap.COLOR_ATTACHMENT0,ap.TEXTURE_2D,up,0);var dp=ap.checkFramebufferStatus(ap.FRAMEBUFFER)===ap.FRAMEBUFFER_COMPLETE;return ap.bindTexture(ap.TEXTURE_2D,null),ap.bindFramebuffer(ap.FRAMEBUFFER,null),ap.deleteTexture(up),ap.deleteFramebuffer(cp),dp}(np,rp)}return!1}return!!Ne(np,"OES_texture_float")&&!!Ne(np,"WEBGL_color_buffer_float")&&Me(np)}function Me(_d){var np=qt(_d),rp=_d.createTexture();_d.bindTexture(_d.TEXTURE_2D,rp),_d.texImage2D(_d.TEXTURE_2D,0,np.internalFormatFloat,1,1,0,np.textureFormatFloat,np.textureTypeFloat,null);var ap=_d.createFramebuffer();_d.bindFramebuffer(_d.FRAMEBUFFER,ap),_d.framebufferTexture2D(_d.FRAMEBUFFER,_d.COLOR_ATTACHMENT0,_d.TEXTURE_2D,rp,0);var sp=_d.checkFramebufferStatus(_d.FRAMEBUFFER)===_d.FRAMEBUFFER_COMPLETE;return _d.bindTexture(_d.TEXTURE_2D,null),_d.bindFramebuffer(_d.FRAMEBUFFER,null),_d.deleteTexture(rp),_d.deleteFramebuffer(ap),sp}function Be(_d){return _d===2&&Ut(_d).fenceSync!=null}var Pe=Object.freeze({callAndCheck:Kt,canBeRepresented:$t,getWebGLErrorMessage:Yt,getExtensionOrThrow:Qt,createVertexShader:Jt,createFragmentShader:Zt,createProgram:re$2,linkProgram:oe,validateProgram:ae,createStaticVertexBuffer:ie,createStaticIndexBuffer:ue,getNumChannels:function(){return a$1().getNumber("WEBGL_VERSION")===2?1:4},createTexture:se,validateTextureSize:ce,createFramebuffer:le,bindVertexBufferToProgramAttribute:he,bindTextureUnit:fe,unbindTextureUnit:function(_d,np,rp){we(_d,rp),Kt(_d,np,function(){return _d.activeTexture(_d.TEXTURE0+rp)}),Kt(_d,np,function(){return _d.bindTexture(_d.TEXTURE_2D,null)})},getProgramUniformLocationOrThrow:pe,getProgramUniformLocation:de,bindTextureToProgramUniformSampler:ve,bindCanvasToFramebuffer:function(_d,np){Kt(_d,np,function(){return _d.bindFramebuffer(_d.FRAMEBUFFER,null)}),Kt(_d,np,function(){return _d.viewport(0,0,_d.canvas.width,_d.canvas.height)}),Kt(_d,np,function(){return _d.scissor(0,0,_d.canvas.width,_d.canvas.height)})},bindColorTextureToFramebuffer:me,unbindColorTextureFromFramebuffer:ge,validateFramebuffer:ye,getFramebufferErrorMessage:xe,getBatchDim:Ce,getRowsCols:Ee,getShapeAs3D:Re,getTextureShapeFromLogicalShape:Ie,isReshapeFree:Se,getWebGLMaxTextureSize:Ae,resetMaxTextureSize:function(){te=null},resetMaxTexturesInShader:function(){ee=null},getMaxTexturesInShader:De,getWebGLDisjointQueryTimerVersion:Te,hasExtension:Ne,isWebGLVersionEnabled:Fe,isCapableOfRenderingToFloatTexture:Oe,isDownloadFloatTextureEnabled:_e,isWebGLFenceEnabled:Be}),Le=a$1();function We(){a$1().set("PROD",!0)}function Ue(){a$1().set("DEBUG",!0)}function Ve(){a$1().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function ze(_d){a$1().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(_d+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function Ge(){Nt.disposeVariables()}function He(){return Nt}function qe(){return Nt.memory()}function Ke(_d){return Nt.profile(_d)}function je(_d,np){return Nt.tidy(_d,np)}function Xe(_d){kt(_d).forEach(function(np){return np.dispose()})}function $e(_d){return Nt.keep(_d)}function Ye(_d){return Nt.time(_d)}function Qe(_d){return Nt.setBackend(_d)}function Je(){return Nt.ready()}function Ze(){return Nt.backendName}function tn(_d){Nt.removeBackend(_d)}function en(_d){return Nt.findBackend(_d)}function nn(_d){return Nt.findBackendFactory(_d)}function rn(_d,np,rp){return rp===void 0&&(rp=1),Nt.registerBackend(_d,np,rp)}function on(){return Nt.backend}function an(_d,np){a$1().setPlatform(_d,np)}function un(){for(var _d=[],np=0;np<arguments.length;np++)_d[np]=arguments[np];a$1().getBool("IS_TEST")||console.warn.apply(console,_d)}function sn(_d,np){var rp=_d;if(B(_d))return np==="string"?[]:[_d.length];if(!Array.isArray(_d))return[];for(var ap=[];Array.isArray(rp)||B(rp)&&np!=="string";)ap.push(rp.length),rp=rp[0];return Array.isArray(_d)&&a$1().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function sp(lp,up,cp){if(cp=cp||[],!Array.isArray(lp)&&!B(lp))return void g(up.length===0,function(){return"Element arr["+cp.join("][")+"] is a primitive, but should be an array/TypedArray of "+up[0]+" elements"});g(up.length>0,function(){return"Element arr["+cp.join("][")+"] should be a primitive, but is an array of "+lp.length+" elements"}),g(lp.length===up[0],function(){return"Element arr["+cp.join("][")+"] should have "+up[0]+" elements, but has "+lp.length+" elements"});for(var dp=up.slice(1),fp=0;fp<lp.length;++fp)sp(lp[fp],dp,cp.concat(fp))}(_d,ap,[]),ap}function cn(_d,np,rp,ap){if(_d!=null&&(_d!=="numeric"&&_d!==np||_d==="numeric"&&np==="string"))throw new Error("Argument '"+rp+"' passed to '"+ap+"' must be "+_d+" tensor, but got "+np+" tensor")}function ln(_d,np,rp,ap){if(ap===void 0&&(ap="numeric"),_d instanceof dt)return cn(ap,_d.dtype,np,rp),_d;var sp=z(_d);if(sp!=="string"&&["bool","int32","float32"].indexOf(ap)>=0&&(sp=ap),cn(ap,sp,np,rp),_d==null||!B(_d)&&!Array.isArray(_d)&&typeof _d!="number"&&typeof _d!="boolean"&&typeof _d!="string"){var lp=_d==null?"null":_d.constructor.name;throw new Error("Argument '"+np+"' passed to '"+rp+"' must be a Tensor or TensorLike, but got '"+lp+"'")}var up=sn(_d,sp);B(_d)||Array.isArray(_d)||(_d=[_d]);var cp=sp!=="string"?K(_d,sp,a$1().getBool("DEBUG")):b(_d,[],!0);return Nt.makeTensor(cp,up,sp)}function hn(_d,np,rp,ap){if(ap===void 0&&(ap="numeric"),!Array.isArray(_d))throw new Error("Argument "+np+" passed to "+rp+" must be a `Tensor[]` or `TensorLike[]`");return _d.map(function(sp,lp){return ln(sp,np+"["+lp+"]",rp)},ap)}function fn(_d,np){for(var rp=0;rp<_d.length;++rp)if(_d[_d.length-rp-1]!==np-1-rp)return!1;return!0}function pn(_d,np,rp){for(var ap=_d.length+np.length,sp=[],lp=0,up=0,cp=0;cp<ap;cp++)rp.indexOf(cp)===-1?sp.push(_d[lp++]):sp.push(np[up++]);return sp}function dn(_d,np){for(var rp=[],ap=_d.length,sp=0;sp<ap;sp++)np.indexOf(sp)===-1&&rp.push(_d[sp]);return[rp,np.map(function(lp){return _d[lp]})]}function vn(_d,np){return pn(_d,np.map(function(rp){return 1}),np)}function mn(_d,np,rp){g(fn(np,rp),function(){return _d+" supports only inner-most axes for now. Got axes "+np+" and rank-"+rp+" input."})}function gn(_d,np){if(fn(_d,np))return null;for(var rp=[],ap=0;ap<np;++ap)_d.indexOf(ap)===-1&&rp.push(ap);return _d.forEach(function(sp){return rp.push(sp)}),rp}function yn(_d){return _d.map(function(np,rp){return[rp,np]}).sort(function(np,rp){return np[1]-rp[1]}).map(function(np){return np[0]})}function xn(_d,np){for(var rp=[],ap=np-_d;ap<np;++ap)rp.push(ap);return rp}function bn(_d,np){var rp=_d[0].length;_d.forEach(function(sp,lp){g(sp.length===rp,function(){return"Error in concat"+rp+"D: rank of tensors["+lp+"] must be the same as the rank of the rest ("+rp+")"})}),g(np>=0&&np<rp,function(){return"Error in concat"+rp+"D: axis must be between 0 and "+(rp-1)+"."});var ap=_d[0];_d.forEach(function(sp,lp){for(var up=0;up<rp;up++)g(up===np||sp[up]===ap[up],function(){return"Error in concat"+rp+"D: Shape of tensors["+lp+"] ("+sp+") does not match the shape of the rest ("+ap+") along the non-concatenated axis "+lp+"."})})}function wn(_d,np){for(var rp=_d[0].slice(),ap=1;ap<_d.length;ap++)rp[np]+=_d[ap][np];return rp}function Cn(_d){var np=Object.keys(_d);if(np.length!==1)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+np.length+" keys.");var rp=np[0],ap=_d[rp];rp.endsWith("_")&&(rp=rp.substring(0,rp.length-1));var sp=function(){for(var lp=[],up=0;up<arguments.length;up++)lp[up]=arguments[up];Nt.startScope(rp);try{var cp=ap.apply(void 0,lp);return cp instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),Nt.endScope(cp),cp}catch(dp){throw Nt.endScope(null),dp}};return Object.defineProperty(sp,"name",{value:rp,configurable:!0}),sp}Le.registerFlag("HAS_WEBGL",function(){return Le.getNumber("WEBGL_VERSION")>0}),Le.registerFlag("WEBGL_VERSION",function(){return Fe(2)?2:Fe(1)?1:0}),Le.registerFlag("WEBGL_BUFFER_SUPPORTED",function(){return Le.get("WEBGL_VERSION")===2}),Le.registerFlag("WEBGL_CPU_FORWARD",function(){return!0}),Le.registerFlag("WEBGL_FORCE_F16_TEXTURES",function(){return!1}),Le.registerFlag("WEBGL_PACK",function(){return Le.getBool("HAS_WEBGL")}),Le.registerFlag("WEBGL_PACK_NORMALIZATION",function(){return Le.getBool("WEBGL_PACK")}),Le.registerFlag("WEBGL_PACK_CLIP",function(){return Le.getBool("WEBGL_PACK")}),Le.registerFlag("WEBGL_PACK_DEPTHWISECONV",function(){return!1}),Le.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",function(){return Le.getBool("WEBGL_PACK")}),Le.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",function(){return Le.getBool("WEBGL_PACK")}),Le.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",function(){return Le.getBool("WEBGL_PACK")}),Le.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",function(){return Le.getBool("WEBGL_PACK")}),Le.registerFlag("WEBGL_PACK_REDUCE",function(){return Le.getBool("WEBGL_PACK")}),Le.registerFlag("WEBGL_LAZILY_UNPACK",function(){return Le.getBool("WEBGL_PACK")}),Le.registerFlag("WEBGL_CONV_IM2COL",function(){return Le.getBool("WEBGL_PACK")}),Le.registerFlag("WEBGL_MAX_TEXTURE_SIZE",function(){return Ae(Le.getNumber("WEBGL_VERSION"))}),Le.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",function(){return De(Le.getNumber("WEBGL_VERSION"))}),Le.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",function(){var _d=Le.getNumber("WEBGL_VERSION");return _d===0?0:Te(_d)}),Le.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",function(){return Le.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&(_d=navigator.userAgent||navigator.vendor||window.opera,!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(_d)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(_d.substr(0,4))));var _d}),Le.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",function(){return Oe(Le.getNumber("WEBGL_VERSION"))}),Le.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",function(){return!Le.getBool("WEBGL_FORCE_F16_TEXTURES")&&Le.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")}),Le.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",function(){return _e(Le.getNumber("WEBGL_VERSION"))}),Le.registerFlag("WEBGL_FENCE_API_ENABLED",function(){return Be(Le.getNumber("WEBGL_VERSION"))}),Le.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",function(){return Le.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0}),pt=ze;var En=Cn({complex_:function(_d,np){var rp=ln(_d,"real","complex"),ap=ln(np,"imag","complex");return y(rp.shape,ap.shape,"real and imag shapes, "+rp.shape+" and "+ap.shape+", must match in call to tf.complex()."),Nt.runKernelFunc(function(sp){return sp.complex(rp,ap)},{$real:rp,$imag:ap})}}),Rn=Cn({real_:function(_d){var np=ln(_d,"input","real");return Nt.runKernelFunc(function(rp){return rp.real(np)},{$input:np})}}),In=Cn({imag_:function(_d){var np=ln(_d,"input","imag");return Nt.runKernelFunc(function(rp){return rp.imag(np)},{$input:np})}});function kn(_d,np,rp){return Sn(_d,np,sn(_d,rp),rp)}function Sn(_d,np,rp,ap){if(ap==null&&(ap=z(_d)),ap==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!B(_d)&&!Array.isArray(_d)&&typeof _d!="number"&&typeof _d!="boolean"&&typeof _d!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(np!=null){Q(np);var sp=w$1(np),lp=w$1(rp);g(sp===lp,function(){return"Based on the provided shape, ["+np+"], the tensor should have "+sp+" values but has "+lp});for(var up=0;up<rp.length;++up){var cp=rp[up],dp=up!==rp.length-1||cp!==w$1(np.slice(up));g(rp[up]===np[up]||!dp,function(){return"Error creating a new Tensor. Inferred shape ("+rp+") does not match the provided shape ("+np+"). "})}}return B(_d)||Array.isArray(_d)||(_d=[_d]),np=np||rp,_d=ap!=="string"?K(_d,ap,a$1().getBool("DEBUG")):b(_d,[],!0),Nt.makeTensor(_d,np,ap)}function An(_d,np){if((B(_d)&&np!=="string"||Array.isArray(_d))&&np!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(np==="string"&&B(_d)&&!(_d instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Sn(_d,[],[],np)}function Dn(_d,np){x(_d);var rp=sn(_d,np);if(rp.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Sn(_d,null,rp,np)}function Tn(_d,np,rp){if(x(_d),np!=null&&np.length!==2)throw new Error("tensor2d() requires shape to have two numbers");var ap=sn(_d,rp);if(ap.length!==2&&ap.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(ap.length===1&&np==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Sn(_d,np,ap,rp)}function Nn(_d,np,rp){if(x(_d),np!=null&&np.length!==3)throw new Error("tensor3d() requires shape to have three numbers");var ap=sn(_d,rp);if(ap.length!==3&&ap.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(ap.length===1&&np==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Sn(_d,np,ap,rp)}function Fn(_d,np,rp){if(x(_d),np!=null&&np.length!==4)throw new Error("tensor4d() requires shape to have four numbers");var ap=sn(_d,rp);if(ap.length!==4&&ap.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(ap.length===1&&np==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Sn(_d,np,ap,rp)}function On(_d,np,rp){if(x(_d),np!=null&&np.length!==5)throw new Error("tensor5d() requires shape to have five numbers");var ap=sn(_d,rp);if(ap.length!==5&&ap.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(ap.length===1&&np==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Sn(_d,np,ap,rp)}function _n(_d,np,rp){if(x(_d),np!=null&&np.length!==6)throw new Error("tensor6d() requires shape to have six numbers");var ap=sn(_d,rp);if(ap.length!==6&&ap.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(ap.length===1&&np==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return Sn(_d,np=np||ap,ap,rp)}function Mn(_d,np,rp,ap){return np===void 0&&(np=!0),Nt.makeVariable(_d,np,rp,ap)}function Bn(_d,np){if(np===void 0&&(np="float32"),np==="complex64"){var rp=Bn(_d,"float32"),ap=Pn(_d,"float32");return En(rp,ap)}var sp=X(w$1(_d),np);return Nt.makeTensor(sp,_d,np)}function Pn(_d,np){if(np===void 0&&(np="float32"),np==="complex64"){var rp=Pn(_d,"float32"),ap=Pn(_d,"float32");return En(rp,ap)}var sp=$$1(w$1(_d),np);return Nt.makeTensor(sp,_d,np)}function Ln(_d,np,rp){return Nt.runKernelFunc(function(ap){return ap.fill(_d,np,rp)},{})}function Wn(_d,np,rp){if(rp<=0)throw new Error("The number of values should be positive.");return Nt.runKernelFunc(function(ap){return ap.linspace(_d,np,rp)},{})}function Un(_d,np,rp,ap){if(rp===void 0&&(rp=1),ap===void 0&&(ap="float32"),rp===0)throw new Error("Cannot have a step of zero");if(_d===np||_d<np&&rp<0||np<_d&&rp>1)return Pn([0],ap);var sp=$$1(Math.abs(Math.ceil((np-_d)/rp)),ap);np<_d&&rp===1&&(rp=-1),sp[0]=_d;for(var lp=1;lp<sp.length;lp++)sp[lp]=sp[lp-1]+rp;return Dn(sp,ap)}var Vn=Cn({onesLike_:function(_d){var np=ln(_d,"x","onesLike");if(np.dtype==="complex64"){var rp=Vn(Rn(np)),ap=zn(In(np));return En(rp,ap)}return Nt.runKernelFunc(function(sp){return sp.onesLike(np)},{$x:np},function(sp,lp){return{$x:function(){return zn(sp)}}})}}),zn=Cn({zerosLike_:function(_d){var np=ln(_d,"x","zerosLike");return Nt.runKernelFunc(function(rp){return rp.zerosLike(np)},{$x:np},function(rp,ap){return{$x:function(){return zn(rp)}}})}}),Gn=Cn({concat_:function(_d,np){np===void 0&&(np=0),g(_d.length>=1,function(){return"Pass at least one tensor to concat"});var rp=hn(_d,"tensors","concat");rp[0].dtype==="complex64"&&rp.forEach(function(up){if(up.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype `+up.dtype+". ")}),np=D(np,rp[0].shape)[0];var ap=wn(rp.map(function(up){return up.shape}),np);if(w$1(ap)===0)return kn([],ap);if((rp=rp.filter(function(up){return up.size>0})).length===1)return rp[0];var sp=rp.map(function(up){return up.shape});bn(sp,np);var lp=rp;return Nt.runKernelFunc(function(up){return up.concat(rp,np)},lp,function(up){var cp=sp.map(function(dp){return dp[np]});return Xn(up,cp,np).map(function(dp){return function(){return dp}})})}}),Hn=Cn({concat1d_:function(_d){return Gn(_d,0)}}),qn=Cn({concat2d_:function(_d,np){return Gn(_d,np)}}),Kn=Cn({concat3d_:function(_d,np){return Gn(_d,np)}}),jn=Cn({concat4d_:function(_d,np){return Gn(_d,np)}}),Xn=Cn({split_:function(_d,np,rp){rp===void 0&&(rp=0);var ap,sp=ln(_d,"x","split");return rp=D(rp,sp.shape)[0],typeof np=="number"?(g(sp.shape[rp]%np==0,function(){return"Number of splits must evenly divide the axis."}),ap=new Array(np).fill(sp.shape[rp]/np)):(g(sp.shape[rp]===np.reduce(function(lp,up){return lp+up}),function(){return"The sum of sizes must match the size of the axis dimension."}),ap=np),Nt.runKernelFunc(function(lp){return lp.split(sp,ap,rp)},{$x:sp},function(lp){return{$x:function(){return Gn(lp,rp)}}})}});function $n(_d,np){return _d(np={exports:{}},np.exports),np.exports}var Yn=$n(function(_d){(function(np,rp,ap){function sp(cp){var dp,fp=this,pp=(dp=4022871197,function(hp){hp=hp.toString();for(var mp=0;mp<hp.length;mp++){var gp=.02519603282416938*(dp+=hp.charCodeAt(mp));gp-=dp=gp>>>0,dp=(gp*=dp)>>>0,dp+=4294967296*(gp-=dp)}return 23283064365386963e-26*(dp>>>0)});fp.next=function(){var hp=2091639*fp.s0+23283064365386963e-26*fp.c;return fp.s0=fp.s1,fp.s1=fp.s2,fp.s2=hp-(fp.c=0|hp)},fp.c=1,fp.s0=pp(" "),fp.s1=pp(" "),fp.s2=pp(" "),fp.s0-=pp(cp),fp.s0<0&&(fp.s0+=1),fp.s1-=pp(cp),fp.s1<0&&(fp.s1+=1),fp.s2-=pp(cp),fp.s2<0&&(fp.s2+=1),pp=null}function lp(cp,dp){return dp.c=cp.c,dp.s0=cp.s0,dp.s1=cp.s1,dp.s2=cp.s2,dp}function up(cp,dp){var fp=new sp(cp),pp=dp&&dp.state,hp=fp.next;return hp.int32=function(){return 4294967296*fp.next()|0},hp.double=function(){return hp()+11102230246251565e-32*(2097152*hp()|0)},hp.quick=hp,pp&&(typeof pp=="object"&&lp(pp,fp),hp.state=function(){return lp(fp,{})}),hp}rp&&rp.exports?rp.exports=up:ap&&ap.amd?ap(function(){return up}):this.alea=up})(0,_d,!1)}),Qn=$n(function(_d){(function(np,rp,ap){function sp(cp){var dp=this,fp="";dp.x=0,dp.y=0,dp.z=0,dp.w=0,dp.next=function(){var hp=dp.x^dp.x<<11;return dp.x=dp.y,dp.y=dp.z,dp.z=dp.w,dp.w^=dp.w>>>19^hp^hp>>>8},cp===(0|cp)?dp.x=cp:fp+=cp;for(var pp=0;pp<fp.length+64;pp++)dp.x^=0|fp.charCodeAt(pp),dp.next()}function lp(cp,dp){return dp.x=cp.x,dp.y=cp.y,dp.z=cp.z,dp.w=cp.w,dp}function up(cp,dp){var fp=new sp(cp),pp=dp&&dp.state,hp=function(){return(fp.next()>>>0)/4294967296};return hp.double=function(){do var mp=((fp.next()>>>11)+(fp.next()>>>0)/4294967296)/2097152;while(mp===0);return mp},hp.int32=fp.next,hp.quick=hp,pp&&(typeof pp=="object"&&lp(pp,fp),hp.state=function(){return lp(fp,{})}),hp}rp&&rp.exports?rp.exports=up:ap&&ap.amd?ap(function(){return up}):this.xor128=up})(0,_d,!1)}),Jn=$n(function(_d){(function(np,rp,ap){function sp(cp){var dp=this,fp="";dp.next=function(){var hp=dp.x^dp.x>>>2;return dp.x=dp.y,dp.y=dp.z,dp.z=dp.w,dp.w=dp.v,(dp.d=dp.d+362437|0)+(dp.v=dp.v^dp.v<<4^hp^hp<<1)|0},dp.x=0,dp.y=0,dp.z=0,dp.w=0,dp.v=0,cp===(0|cp)?dp.x=cp:fp+=cp;for(var pp=0;pp<fp.length+64;pp++)dp.x^=0|fp.charCodeAt(pp),pp==fp.length&&(dp.d=dp.x<<10^dp.x>>>4),dp.next()}function lp(cp,dp){return dp.x=cp.x,dp.y=cp.y,dp.z=cp.z,dp.w=cp.w,dp.v=cp.v,dp.d=cp.d,dp}function up(cp,dp){var fp=new sp(cp),pp=dp&&dp.state,hp=function(){return(fp.next()>>>0)/4294967296};return hp.double=function(){do var mp=((fp.next()>>>11)+(fp.next()>>>0)/4294967296)/2097152;while(mp===0);return mp},hp.int32=fp.next,hp.quick=hp,pp&&(typeof pp=="object"&&lp(pp,fp),hp.state=function(){return lp(fp,{})}),hp}rp&&rp.exports?rp.exports=up:ap&&ap.amd?ap(function(){return up}):this.xorwow=up})(0,_d,!1)}),Zn=$n(function(_d){(function(np,rp,ap){function sp(cp){var dp=this;dp.next=function(){var fp,pp,hp=dp.x,mp=dp.i;return fp=hp[mp],pp=(fp^=fp>>>7)^fp<<24,pp^=(fp=hp[mp+1&7])^fp>>>10,pp^=(fp=hp[mp+3&7])^fp>>>3,pp^=(fp=hp[mp+4&7])^fp<<7,fp=hp[mp+7&7],pp^=(fp^=fp<<13)^fp<<9,hp[mp]=pp,dp.i=mp+1&7,pp},function(fp,pp){var hp,mp=[];if(pp===(0|pp))mp[0]=pp;else for(pp=""+pp,hp=0;hp<pp.length;++hp)mp[7&hp]=mp[7&hp]<<15^pp.charCodeAt(hp)+mp[hp+1&7]<<13;for(;mp.length<8;)mp.push(0);for(hp=0;hp<8&&mp[hp]===0;++hp);for(hp==8?mp[7]=-1:mp[hp],fp.x=mp,fp.i=0,hp=256;hp>0;--hp)fp.next()}(dp,cp)}function lp(cp,dp){return dp.x=cp.x.slice(),dp.i=cp.i,dp}function up(cp,dp){cp==null&&(cp=+new Date);var fp=new sp(cp),pp=dp&&dp.state,hp=function(){return(fp.next()>>>0)/4294967296};return hp.double=function(){do var mp=((fp.next()>>>11)+(fp.next()>>>0)/4294967296)/2097152;while(mp===0);return mp},hp.int32=fp.next,hp.quick=hp,pp&&(pp.x&&lp(pp,fp),hp.state=function(){return lp(fp,{})}),hp}rp&&rp.exports?rp.exports=up:ap&&ap.amd?ap(function(){return up}):this.xorshift7=up})(0,_d,!1)}),tr=$n(function(_d){(function(np,rp,ap){function sp(cp){var dp=this;dp.next=function(){var fp,pp,hp=dp.w,mp=dp.X,gp=dp.i;return dp.w=hp=hp+1640531527|0,pp=mp[gp+34&127],fp=mp[gp=gp+1&127],pp^=pp<<13,fp^=fp<<17,pp^=pp>>>15,fp^=fp>>>12,pp=mp[gp]=pp^fp,dp.i=gp,pp+(hp^hp>>>16)|0},function(fp,pp){var hp,mp,gp,vp,xp,Sp=[],yp=128;for(pp===(0|pp)?(mp=pp,pp=null):(pp+="\0",mp=0,yp=Math.max(yp,pp.length)),gp=0,vp=-32;vp<yp;++vp)pp&&(mp^=pp.charCodeAt((vp+32)%pp.length)),vp===0&&(xp=mp),mp^=mp<<10,mp^=mp>>>15,mp^=mp<<4,mp^=mp>>>13,vp>=0&&(xp=xp+1640531527|0,gp=(hp=Sp[127&vp]^=mp+xp)==0?gp+1:0);for(gp>=128&&(Sp[127&(pp&&pp.length||0)]=-1),gp=127,vp=512;vp>0;--vp)mp=Sp[gp+34&127],hp=Sp[gp=gp+1&127],mp^=mp<<13,hp^=hp<<17,mp^=mp>>>15,hp^=hp>>>12,Sp[gp]=mp^hp;fp.w=xp,fp.X=Sp,fp.i=gp}(dp,cp)}function lp(cp,dp){return dp.i=cp.i,dp.w=cp.w,dp.X=cp.X.slice(),dp}function up(cp,dp){cp==null&&(cp=+new Date);var fp=new sp(cp),pp=dp&&dp.state,hp=function(){return(fp.next()>>>0)/4294967296};return hp.double=function(){do var mp=((fp.next()>>>11)+(fp.next()>>>0)/4294967296)/2097152;while(mp===0);return mp},hp.int32=fp.next,hp.quick=hp,pp&&(pp.X&&lp(pp,fp),hp.state=function(){return lp(fp,{})}),hp}rp&&rp.exports?rp.exports=up:ap&&ap.amd?ap(function(){return up}):this.xor4096=up})(0,_d,!1)}),er=$n(function(_d){(function(np,rp,ap){function sp(cp){var dp=this,fp="";dp.next=function(){var hp=dp.b,mp=dp.c,gp=dp.d,vp=dp.a;return hp=hp<<25^hp>>>7^mp,mp=mp-gp|0,gp=gp<<24^gp>>>8^vp,vp=vp-hp|0,dp.b=hp=hp<<20^hp>>>12^mp,dp.c=mp=mp-gp|0,dp.d=gp<<16^mp>>>16^vp,dp.a=vp-hp|0},dp.a=0,dp.b=0,dp.c=-1640531527,dp.d=1367130551,cp===Math.floor(cp)?(dp.a=cp/4294967296|0,dp.b=0|cp):fp+=cp;for(var pp=0;pp<fp.length+20;pp++)dp.b^=0|fp.charCodeAt(pp),dp.next()}function lp(cp,dp){return dp.a=cp.a,dp.b=cp.b,dp.c=cp.c,dp.d=cp.d,dp}function up(cp,dp){var fp=new sp(cp),pp=dp&&dp.state,hp=function(){return(fp.next()>>>0)/4294967296};return hp.double=function(){do var mp=((fp.next()>>>11)+(fp.next()>>>0)/4294967296)/2097152;while(mp===0);return mp},hp.int32=fp.next,hp.quick=hp,pp&&(typeof pp=="object"&&lp(pp,fp),hp.state=function(){return lp(fp,{})}),hp}rp&&rp.exports?rp.exports=up:ap&&ap.amd?ap(function(){return up}):this.tychei=up})(0,_d,!1)}),nr=$n(function(_d){(function(np,rp){var ap,sp=this,lp=256,up=6,cp="random",dp=rp.pow(lp,up),fp=rp.pow(2,52),pp=2*fp,hp=lp-1;function mp(yp,bp,Ep){var wp=[],_p=xp(function Rp(Pp,Op){var jp,Mp=[],Ap=typeof Pp;if(Op&&Ap=="object")for(jp in Pp)try{Mp.push(Rp(Pp[jp],Op-1))}catch{}return Mp.length?Mp:Ap=="string"?Pp:Pp+"\0"}((bp=bp==1?{entropy:!0}:bp||{}).entropy?[yp,Sp(np)]:yp??function(){try{var Rp;return ap&&(Rp=ap.randomBytes)?Rp=Rp(lp):(Rp=new Uint8Array(lp),(sp.crypto||sp.msCrypto).getRandomValues(Rp)),Sp(Rp)}catch{var Pp=sp.navigator,Op=Pp&&Pp.plugins;return[+new Date,sp,Op,sp.screen,Sp(np)]}}(),3),wp),Cp=new gp(wp),$p=function(){for(var Rp=Cp.g(up),Pp=dp,Op=0;Rp<fp;)Rp=(Rp+Op)*lp,Pp*=lp,Op=Cp.g(1);for(;Rp>=pp;)Rp/=2,Pp/=2,Op>>>=1;return(Rp+Op)/Pp};return $p.int32=function(){return 0|Cp.g(4)},$p.quick=function(){return Cp.g(4)/4294967296},$p.double=$p,xp(Sp(Cp.S),np),(bp.pass||Ep||function(Rp,Pp,Op,jp){return jp&&(jp.S&&vp(jp,Cp),Rp.state=function(){return vp(Cp,{})}),Op?(rp[cp]=Rp,Pp):Rp})($p,_p,"global"in bp?bp.global:this==rp,bp.state)}function gp(yp){var bp,Ep=yp.length,wp=this,_p=0,Cp=wp.i=wp.j=0,$p=wp.S=[];for(Ep||(yp=[Ep++]);_p<lp;)$p[_p]=_p++;for(_p=0;_p<lp;_p++)$p[_p]=$p[Cp=hp&Cp+yp[_p%Ep]+(bp=$p[_p])],$p[Cp]=bp;(wp.g=function(Rp){for(var Pp,Op=0,jp=wp.i,Mp=wp.j,Ap=wp.S;Rp--;)Pp=Ap[jp=hp&jp+1],Op=Op*lp+Ap[hp&(Ap[jp]=Ap[Mp=hp&Mp+Pp])+(Ap[Mp]=Pp)];return wp.i=jp,wp.j=Mp,Op})(lp)}function vp(yp,bp){return bp.i=yp.i,bp.j=yp.j,bp.S=yp.S.slice(),bp}function xp(yp,bp){for(var Ep,wp=yp+"",_p=0;_p<wp.length;)bp[hp&_p]=hp&(Ep^=19*bp[hp&_p])+wp.charCodeAt(_p++);return Sp(bp)}function Sp(yp){return String.fromCharCode.apply(0,yp)}if(rp["seed"+cp]=mp,xp(rp.random(),np),_d.exports){_d.exports=mp;try{ap=require("crypto")}catch{}}})([],Math)});nr.alea=Yn,nr.xor128=Qn,nr.xorwow=Jn,nr.xorshift7=Zn,nr.xor4096=tr,nr.tychei=er;var rr=nr.alea,or=function(){function _d(np,rp,ap,sp,lp){this.mean=np,this.stdDev=rp,this.dtype=ap,this.nextVal=NaN,this.truncated=sp,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var up=lp||Math.random();this.random=rr(up.toString())}return _d.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var np=this.nextVal;return this.nextVal=NaN,np}for(var rp,ap,sp=!1;!sp;){var lp=void 0,up=void 0,cp=void 0;do cp=(lp=2*this.random()-1)*lp+(up=2*this.random()-1)*up;while(cp>=1||cp===0);var dp=Math.sqrt(-2*Math.log(cp)/cp);rp=this.mean+this.stdDev*lp*dp,ap=this.mean+this.stdDev*up*dp,this.truncated&&!this.isValidTruncated(rp)||(sp=!0)}return this.truncated&&!this.isValidTruncated(ap)||(this.nextVal=this.convertValue(ap)),this.convertValue(rp)},_d.prototype.convertValue=function(np){return this.dtype==null||this.dtype==="float32"?np:Math.round(np)},_d.prototype.isValidTruncated=function(np){return np<=this.upper&&np>=this.lower},_d}(),ar=function(){function _d(np,rp,ap,sp){this.alpha=np,this.beta=1/rp,this.dtype=ap;var lp=sp||Math.random();this.randu=rr(lp.toString()),this.randn=new or(0,1,ap,!1,this.randu()),this.d=np<1?np+2/3:np-1/3,this.c=1/Math.sqrt(9*this.d)}return _d.prototype.nextValue=function(){for(var np,rp,ap,sp,lp,up;;){do sp=this.randn.nextValue(),up=1+this.c*sp;while(up<=0);if(up*=up*up,rp=1-.331*(np=sp*sp)*np,ap=.5*np+this.d*(1-up+Math.log(up)),(lp=this.randu())<rp||Math.log(lp)<ap)break}return up=1/this.beta*this.d*up,this.alpha<1&&(up*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(up)},_d.prototype.convertValue=function(np){return this.dtype==="float32"?np:Math.round(np)},_d}(),ir=function(){function _d(np,rp,ap,sp){var lp=this;if(np===void 0&&(np=0),rp===void 0&&(rp=1),this.canReturnFloat=function(){return lp.dtype==null||lp.dtype==="float32"},this.min=np,this.range=rp-np,this.dtype=ap,sp==null&&(sp=Math.random()),typeof sp=="number"&&(sp=sp.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between "+np+" - "+rp+" <= 1 and dtype is not float");this.random=rr(sp)}return _d.prototype.convertValue=function(np){return this.canReturnFloat()?np:Math.round(np)},_d.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},_d}();function ur(_d,np,rp){return np===void 0&&(np="float32"),np=np||"float32",Q(_d),new lt(_d,np,rp)}function sr$1(_d,np){np===void 0&&(np=!1),console.log(_d.toString(np))}var cr=Cn({batchToSpaceND_:function(_d,np,rp){var ap=ln(_d,"x","batchToSpaceND"),sp=np.reduce(function(lp,up){return lp*up});return g(ap.rank>=1+np.length,function(){return"input rank is "+ap.rank+" but should be > than blockShape.length "+np.length}),g(rp.length===np.length,function(){return"crops.length is "+rp.length+" but should be equal to blockShape.length  "+np.length}),g(ap.shape[0]%sp==0,function(){return"input tensor batch is "+ap.shape[0]+" but is not divisible by the product of the elements of blockShape "+np.join(" * ")+" === "+sp}),Nt.runKernelFunc(function(lp){return lp.batchToSpaceND(ap,np,rp)},{$x:ap},function(lp){return{$x:function(){return lp.spaceToBatchND(np,rp)}}})}}),lr=Cn({cast_:function(_d,np){var rp=ln(_d,"x","cast");if(!_(np))throw new Error("Failed to cast to unknown dtype "+np);if(np==="string"&&rp.dtype!=="string"||np!=="string"&&rp.dtype==="string")throw new Error("Only strings can be casted to strings");var ap={dtype:np};return Nt.runKernelFunc(function(sp){return sp.cast(rp,np)},{x:rp},function(sp){return{x:function(){return sp.clone()}}},"Cast",ap)}}),hr=Cn({clone_:function(_d){var np=ln(_d,"x","clone",null);return Nt.runKernelFunc(function(){return Nt.makeTensorFromDataId(np.dataId,np.shape,np.dtype)},{$x:np},function(rp){return{$x:function(){return rp.toFloat()}}})}}),fr$1=Cn({cumsum_:function(_d,np,rp,ap){np===void 0&&(np=0),rp===void 0&&(rp=!1),ap===void 0&&(ap=!1);var sp=ln(_d,"x","cumsum"),lp=gn([np|=0],sp.rank),up=sp;lp!=null&&(up=sp.transpose(lp));var cp=xn(1,sp.rank)[0],dp=Nt.runKernelFunc(function(fp){return fp.cumsum(up,cp,rp,ap)},{permutedX:up},function(fp){return{permutedX:function(){return fp.cumsum(np,rp,!ap)}}});return lp!=null&&(dp=dp.transpose(lp)),dp}}),pr=Cn({depthToSpace_:function(_d,np,rp){rp===void 0&&(rp="NHWC");var ap=ln(_d,"x","depthToSpace"),sp=rp==="NHWC"?ap.shape[1]:ap.shape[2],lp=rp==="NHWC"?ap.shape[2]:ap.shape[3],up=rp==="NHWC"?ap.shape[3]:ap.shape[1];return g(sp*np>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+sp+" and "+np+`  for depthToSpace with input shape
      `+ap.shape}),g(lp*np>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+lp+" and "+np+` for depthToSpace with input shape
          `+ap.shape}),g(up%(np*np)==0,function(){return"Dimension size must be evenly divisible by "+np*np+" but is "+up+" for depthToSpace with input shape "+ap.shape}),Nt.runKernelFunc(function(cp){return cp.depthToSpace(ap,np,rp)},{$x:ap})}}),dr=Cn({expandDims_:function(_d,np){np===void 0&&(np=0);var rp=ln(_d,"x","expandDims",null);g(np<=rp.rank,function(){return"Axis must be <= rank of the tensor"});var ap=rp.shape.slice();return np<0&&(g(-(rp.rank+1)<=np,function(){return"Axis must be in the interval ["+-(rp.rank+1)+", "+rp.rank+"]"}),np=rp.rank+np+1),ap.splice(np,0,1),Sr(rp,ap)}}),vr=Cn({eye_:function(_d,np,rp,ap){ap===void 0&&(ap="float32"),np==null&&(np=_d);for(var sp=ur([_d,np],ap),lp=_d<=np?_d:np,up=0;up<lp;++up)sp.set(1,up,up);var cp=sp.toTensor().as2D(_d,np);if(rp==null)return cp;if(rp.length===1)return Nr(dr(cp,0),[rp[0],1,1]);if(rp.length===2)return Nr(dr(dr(cp,0),0),[rp[0],rp[1],1,1]);if(rp.length===3)return Nr(dr(dr(dr(cp,0),0),0),[rp[0],rp[1],rp[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+rp.length+"D.")}}),mr=Cn({multinomial_:function(_d,np,rp,ap){ap===void 0&&(ap=!1);var sp=ln(_d,"logits","multinomial"),lp=sp.size,up=sp.rank;if(lp<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+lp+".");if(up>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+up);rp=rp||Math.random();var cp=up===1?sp.as2D(1,-1):sp,dp=Nt.runKernelFunc(function(fp){return fp.multinomial(cp,ap,np,rp)},{logits2D:cp});return up===1?dp.as1D():dp}}),gr=Cn({oneHot_:function(_d,np,rp,ap){if(rp===void 0&&(rp=1),ap===void 0&&(ap=0),np<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+np);var sp=ln(_d,"indices","oneHot","int32"),lp=sp.shape.concat([np]);return sp=sp.flatten(),Nt.runKernelFunc(function(up){return up.oneHot(sp,np,rp,ap)},{$indices:sp},function(up){return{$indices:function(){return Pn(sp.shape,"float32")}}}).reshape(lp)}}),yr=Cn({pad_:function(_d,np,rp){rp===void 0&&(rp=0);var ap=ln(_d,"x","pad");if(ap.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var sp=np.map(function(lp){return lp[0]});return Nt.runKernelFunc(function(lp){return lp.pad(ap,np,rp)},{$x:ap},function(lp){return{$x:function(){return lp.slice(sp,ap.shape)}}})}}),xr=Cn({pad1d_:function(_d,np,rp){return rp===void 0&&(rp=0),g(np.length===2,function(){return"Invalid number of paddings. Must be length of 2."}),yr(_d,[np],rp)}}),br=Cn({pad2d_:function(_d,np,rp){return rp===void 0&&(rp=0),g(np.length===2&&np[0].length===2&&np[1].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),yr(_d,np,rp)}}),wr=Cn({pad3d_:function(_d,np,rp){return rp===void 0&&(rp=0),g(np.length===3&&np[0].length===2&&np[1].length===2&&np[2].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),yr(_d,np,rp)}}),Cr=Cn({pad4d_:function(_d,np,rp){return rp===void 0&&(rp=0),g(np.length===4&&np[0].length===2&&np[1].length===2&&np[2].length===2&&np[3].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),yr(_d,np,rp)}}),Er=Cn({rand_:function(_d,np,rp){var ap=w$1(_d),sp=null;if(rp==null||rp==="float32")sp=new Float32Array(ap);else if(rp==="int32")sp=new Int32Array(ap);else{if(rp!=="bool")throw new Error("Unknown data type "+rp);sp=new Uint8Array(ap)}for(var lp=0;lp<ap;lp++)sp[lp]=np();return Nt.makeTensor(sp,_d,rp)}}),Rr=Cn({randomNormal_:function(_d,np,rp,ap,sp){if(np===void 0&&(np=0),rp===void 0&&(rp=1),ap!=null&&ap==="bool")throw new Error("Unsupported data type "+ap);for(var lp=new or(np,rp,ap,!1,sp),up=ur(_d,ap),cp=0;cp<up.values.length;cp++)up.values[cp]=lp.nextValue();return up.toTensor()}}),Ir=Cn({randomGamma_:function(_d,np,rp,ap,sp){if(rp===void 0&&(rp=1),ap===void 0&&(ap="float32"),rp==null&&(rp=1),ap==null&&(ap="float32"),ap!=="float32"&&ap!=="int32")throw new Error("Unsupported data type "+ap);for(var lp=new ar(np,rp,ap,sp),up=ur(_d,ap),cp=0;cp<up.values.length;cp++)up.values[cp]=lp.nextValue();return up.toTensor()}}),kr=Cn({randomUniform_:function(_d,np,rp,ap,sp){np===void 0&&(np=0),rp===void 0&&(rp=1),ap===void 0&&(ap="float32");for(var lp=ur(_d,ap),up=new ir(np,rp,null,sp),cp=0;cp<lp.values.length;cp++)lp.values[cp]=up.nextValue();return lp.toTensor()}}),Sr=Cn({reshape_:function(_d,np){var rp=ln(_d,"x","reshape",null);np=A(np,rp.size),g(rp.size===w$1(np),function(){return"new shape and old shape must have the same number of elements."});var ap={shape:np};return Nt.runKernelFunc(function(sp){return sp.reshape(rp,np)},{x:rp},function(sp){return{x:function(){return sp.reshape(rp.shape)}}},"Reshape",ap)}}),Ar=Cn({spaceToBatchND_:function(_d,np,rp){var ap=ln(_d,"x","spaceToBatchND");return g(ap.rank>=1+np.length,function(){return"input rank "+ap.rank+" should be > than [blockShape] "+np.length}),g(rp.length===np.length,function(){return"paddings.shape[0] "+rp.length+" must be equal to [blockShape] "+np.length}),g(ap.shape.reduce(function(sp,lp,up){return up>0&&up<=np.length?sp&&(lp+rp[up-1][0]+rp[up-1][1])%np[up-1]==0:sp},!0),function(){return"input spatial dimensions "+ap.shape.slice(1)+" with paddings "+rp.toString()+" must be divisible by blockShapes "+np.toString()}),Nt.runKernelFunc(function(sp){return sp.spaceToBatchND(ap,np,rp)},{$x:ap},function(sp){return{$x:function(){return sp.batchToSpaceND(np,rp)}}})}}),Dr=Cn({squeeze_:function(_d,np){var rp=ln(_d,"x","squeeze");return Sr(rp,T(rp.shape,np).newShape)}}),Tr=Cn({stack_:function(_d,np){np===void 0&&(np=0);var rp=hn(_d,"tensors","stack");if(g(rp.length>=1,function(){return"Pass at least one tensor to tf.stack"}),rp.length===1)return rp[0].expandDims(np);var ap=rp[0].rank,sp=rp[0].shape,lp=rp[0].dtype;g(np<=ap,function(){return"Axis must be <= rank of the tensor"}),rp.forEach(function(cp){y(sp,cp.shape,"All tensors passed to stack must have matching shapes")}),rp.forEach(function(cp){g(lp===cp.dtype,function(){return"All tensors passed to stack must have matching dtypes"})});var up=rp.map(function(cp){return cp.expandDims(np)});return Gn(up,np)}}),Nr=Cn({tile_:function(_d,np){var rp=ln(_d,"x","tile",null);return g(rp.rank===np.length,function(){return"Error in transpose: rank of input "+rp.rank+" must match length of reps "+np+"."}),Nt.runKernelFunc(function(ap,sp){var lp=ap.tile(rp,np);return sp([rp]),lp},{$x:rp},function(ap,sp){var lp=sp[0];return{$x:function(){var up=zn(lp);if(lp.rank===1)for(var cp=0;cp<np[0];++cp)up=up.add(ap.slice([cp*lp.shape[0]],[lp.shape[0]]));else if(lp.rank===2)for(cp=0;cp<np[0];++cp)for(var dp=0;dp<np[1];++dp)up=up.add(ap.slice([cp*lp.shape[0],dp*lp.shape[1]],[lp.shape[0],lp.shape[1]]));else if(lp.rank===3)for(cp=0;cp<np[0];++cp)for(dp=0;dp<np[1];++dp)for(var fp=0;fp<np[2];++fp)up=up.add(ap.slice([cp*lp.shape[0],dp*lp.shape[1],fp*lp.shape[2]],[lp.shape[0],lp.shape[1],lp.shape[2]]));else{if(lp.rank!==4)throw new Error("Gradient for tile operation is not implemented for rank-"+lp.rank+" tensors yet.");for(cp=0;cp<np[0];++cp)for(dp=0;dp<np[1];++dp)for(fp=0;fp<np[2];++fp)for(var pp=0;pp<np[3];++pp)up=up.add(ap.slice([cp*lp.shape[0],dp*lp.shape[1],fp*lp.shape[2],pp*lp.shape[3]],[lp.shape[0],lp.shape[1],lp.shape[2],lp.shape[3]]))}return up}}})}}),Fr=Cn({truncatedNormal_:function(_d,np,rp,ap,sp){if(np===void 0&&(np=0),rp===void 0&&(rp=1),ap!=null&&ap==="bool")throw new Error("Unsupported data type "+ap);for(var lp=new or(np,rp,ap,!0,sp),up=ur(_d,ap),cp=0;cp<up.values.length;cp++)up.values[cp]=lp.nextValue();return up.toTensor()}}),Or=Cn({unstack_:function(_d,np){np===void 0&&(np=0),np=np||0;var rp=ln(_d,"x","unstack");return g(np>=-rp.shape.length&&np<rp.shape.length,function(){return"Axis = "+np+" is not in [-"+rp.shape.length+", "+rp.shape.length+")"}),np<0&&(np+=rp.shape.length),Nt.runKernelFunc(function(ap){return ap.unstack(rp,np)},{$x:rp},function(ap){return{$x:function(){return Tr(ap,np)}}})}}),_r=function(_d,np){return n$1(this,void 0,void 0,function(){var rp,ap,sp,lp,up,cp,dp,fp,pp,hp;return r(this,function(mp){switch(mp.label){case 0:return rp=ln(_d,"x","setdiff1d"),ap=ln(np,"y","setdiff1d"),g(rp.dtype===ap.dtype,function(){return"x and y should have the same dtype, but got x ("+rp.dtype+") and y ("+ap.dtype+")."}),g(rp.rank===1,function(){return"x should be 1D tensor, but got x ("+rp.shape+")."}),g(ap.rank===1,function(){return"y should be 1D tensor, but got y ("+ap.shape+")."}),[4,rp.data()];case 1:return sp=mp.sent(),[4,ap.data()];case 2:for(lp=mp.sent(),up=new Set(lp),cp=0,pp=0;pp<sp.length;pp++)up.has(sp[pp])||cp++;for(dp=new lt([cp],rp.dtype),fp=new lt([cp],"int32"),pp=0,hp=0;pp<sp.length;pp++)up.has(sp[pp])||(dp.values[hp]=sp[pp],fp.values[hp]=pp,hp++);return[2,[dp.toTensor(),fp.toTensor()]]}})})};function Mr(_d,np,rp,ap){ap===void 0&&(ap=!0);var sp=[];if(ap)(sp=sp.concat(np.slice(0))).push(_d[0]/rp),sp=sp.concat(_d.slice(1));else{sp=sp.concat(_d[0]);for(var lp=np.length,up=0;up<lp;++up)sp=sp.concat([_d[up+1]/np[up],np[up]]);sp=sp.concat(_d.slice(lp+1))}return sp}function Br(_d,np,rp){rp===void 0&&(rp=!0);var ap=[];if(rp){ap.push(np);for(var sp=np+1;sp<_d;++sp)sp<=2*np?(ap.push(sp),ap.push(sp-(np+1))):ap.push(sp)}else{var lp=[],up=[];for(sp=1;sp<_d;++sp)sp>=2*np+1||sp%2==1?up.push(sp):lp.push(sp);ap.push.apply(ap,lp),ap.push(0),ap.push.apply(ap,up)}return ap}function Pr(_d,np,rp,ap){ap===void 0&&(ap=!0);var sp=[];ap?sp.push(_d[0]/rp):sp.push(_d[0]*rp);for(var lp=1;lp<_d.length;++lp)lp<=np.length?ap?sp.push(np[lp-1]*_d[lp]):sp.push(_d[lp]/np[lp-1]):sp.push(_d[lp]);return sp}function Lr(_d,np){for(var rp=[0],ap=0;ap<np;++ap)rp.push(_d[ap][0]);return rp}function Wr(_d,np,rp){for(var ap=_d.slice(0,1),sp=0;sp<rp;++sp)ap.push(_d[sp+1]-np[sp][0]-np[sp][1]);return ap}function Ur(_d,np){if(_d.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+_d.rank+".");if(np.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+np.rank+".");if(np.dtype!=="int32")throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+np.dtype+".");if(np.shape[np.rank-1]>_d.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+np.shape[np.rank-1]+" vs. "+_d.rank);if(_d.size===0)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+_d.shape+".");for(var rp=np.shape,ap=rp[rp.length-1],sp=1,lp=0;lp<rp.length-1;++lp)sp*=rp[lp];var up=_d.shape,cp=rp.slice();cp.pop();var dp=1;for(lp=ap;lp<_d.rank;++lp)dp*=up[lp],cp.push(up[lp]);var fp=q(_d.shape).map(function(pp){return pp/dp}).concat([1]).slice(0,ap);return[cp,sp,dp,fp]}var Vr=30;function zr(_d){return _d<=Vr?_d:H(_d,Math.floor(Math.sqrt(_d)))}function Gr(_d,np,rp){if(np.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+np.rank+".");if(_d.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+_d.rank+".");if(np.dtype!=="int32")throw new Error("The dtype of 'indices' should be int32, but got dtype: "+np.dtype);if(rp.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+rp);if(rp.length===0){if(np.size===0)throw new Error("Indices specified for empty output. indices shape: "+np.shape);if(_d.size===0)throw new Error("Updates specified for empty output. updates shape: "+_d.shape)}(function(ap,sp,lp){var up=sp.rank>1?sp.shape[sp.rank-1]:1,cp=sp.rank>1?sp.rank-1:1,dp="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+lp.shape+", indices.shape: "+sp.shape+", shape: "+ap+", sliceDim: "+up+", and batchDim: "+cp+".";if(lp.rank<cp)throw new Error(dp+" update.rank < "+cp+". ");if(ap.length<up+(lp.rank-cp))throw new Error(dp+" Output shape length < "+(up+(lp.rank-cp)));if(lp.rank!==cp+ap.length-up)throw new Error(dp+" update.rank != "+(cp+ap.length-up));for(var fp=0;fp<cp;++fp)if(lp.shape[fp]!==sp.shape[fp])throw new Error(dp+" updates.shape["+fp+"] ("+lp.shape[fp]+") != indices.shape["+fp+"] ("+sp.shape[fp]+").");for(fp=0;fp<lp.rank-cp;++fp)if(lp.shape[fp+cp]!==ap[fp+up])throw new Error(dp+" updates.shape["+(fp+cp)+"] ("+lp.shape[fp+cp]+") != shape["+(fp+cp)+"] ("+ap[fp+cp]+")")})(rp,np,_d)}function Hr(_d,np,rp){for(var ap=np.rank>1?np.shape[np.rank-1]:1,sp=rp.length,lp=1,up=ap;up<sp;++up)lp*=rp[up];var cp=ap<1?1:ap;return{sliceRank:ap,numUpdates:np.size/cp,sliceSize:lp,strides:q(rp.slice(0,ap)).concat([1]),outputSize:w$1(rp)}}function qr(_d,np,rp){g(_d.rank===np.length,function(){return"Error in slice"+_d.rank+"D: Length of begin "+np+" must match the rank of the array ("+_d.rank+")."}),g(_d.rank===rp.length,function(){return"Error in slice"+_d.rank+"D: Length of size "+rp+" must match the rank of the array ("+_d.rank+")."});for(var ap=function(lp){g(np[lp]+rp[lp]<=_d.shape[lp],function(){return"Error in slice"+_d.rank+"D: begin["+lp+"] + size["+lp+"] ("+(np[lp]+rp[lp])+") would overflow input.shape["+lp+"] ("+_d.shape[lp]+")"})},sp=0;sp<_d.rank;++sp)ap(sp)}function Kr(_d){for(var np=[],rp=0;_d>0;)1&_d&&np.push(rp),_d/=2,rp++;return np}function jr(_d,np,rp){for(var ap=[],sp=0;sp<_d.length;sp++)ap[sp]=Math.ceil((np[sp]-_d[sp])/rp[sp]);return ap}function Xr(_d,np,rp,ap,sp){var lp=np[sp],up=rp[sp]||1;(_d&1<<sp||lp==null)&&(lp=up>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var cp=ap[sp];return lp<0&&(lp+=cp),lp=d(0,lp,cp-1)}function $r(_d,np,rp,ap,sp){var lp=np[sp],up=rp[sp]||1;(_d&1<<sp||lp==null)&&(lp=up>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var cp=ap[sp];return lp<0&&(lp+=cp),lp=up>0?d(0,lp,cp):d(-1,lp,cp-1)}function Yr(_d,np,rp){for(var ap=rp.length,sp=0;sp<rp.length;sp++)if(rp[sp]>1){ap=sp;break}for(sp=ap+1;sp<rp.length;sp++)if(np[sp]>0||rp[sp]!==_d[sp])return!1;return!0}function Qr(_d,np){for(var rp=_d.length>0?_d[_d.length-1]:1,ap=0;ap<_d.length-1;ap++)rp+=_d[ap]*np[ap];return rp}var Jr=Object.freeze({assertParamsValid:qr,maskToAxes:Kr,computeOutShape:jr,startForAxis:Xr,stopForAxis:$r,isSliceContinous:Yr,computeFlatOffset:Qr});function Zr(_d){return g(G(_d),function(){return"The f passed in grad(f) must be a function"}),function(np,rp){var ap=ln(np,"x","tf.grad",null),sp=rp!=null?ln(rp,"dy","tf.grad"):null;return Nt.tidy(function(){var lp=Nt.gradients(function(){return _d(ap)},[ap],sp),up=lp.value,cp=lp.grads;return sp!=null&&y(up.shape,sp.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),ao(cp),cp[0]})}}function to(_d){return g(G(_d),function(){return"The f passed in grads(f) must be a function"}),function(np,rp){g(Array.isArray(np),function(){return"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s"});var ap=hn(np,"args","tf.grads",null),sp=rp!=null?ln(rp,"dy","tf.grads"):null;return Nt.tidy(function(){var lp=Nt.gradients(function(){return _d.apply(void 0,ap)},ap,sp),up=lp.value,cp=lp.grads;return sp!=null&&y(up.shape,sp.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),ao(cp),cp})}}function eo(_d){return g(G(_d),function(){return"The f passed in valueAndGrad(f) must be a function"}),function(np,rp){g(np instanceof dt,function(){return"The x passed in valueAndGrad(f)(x) must be a tensor"}),g(rp==null||rp instanceof dt,function(){return"The dy passed in valueAndGrad(f)(x, dy) must be a tensor"});var ap=Nt.gradients(function(){return _d(np)},[np],rp),sp=ap.grads,lp=ap.value;return ao(sp),{grad:sp[0],value:lp}}}function no(_d){return g(G(_d),function(){return"The f passed in valueAndGrads(f) must be a function"}),function(np,rp){g(Array.isArray(np)&&np.every(function(sp){return sp instanceof dt}),function(){return"The args passed in valueAndGrads(f)(args) must be array of tensors"}),g(rp==null||rp instanceof dt,function(){return"The dy passed in valueAndGrads(f)(args, dy) must be a tensor"});var ap=Nt.gradients(function(){return _d.apply(void 0,np)},np,rp);return rp!=null&&y(ap.value.shape,rp.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),ao(ap.grads),ap}}function ro(_d,np){g(G(_d),function(){return"The f passed in variableGrads(f) must be a function"}),g(np==null||Array.isArray(np)&&np.every(function(pp){return pp instanceof bt}),function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"});var rp=np!=null;if(!rp)for(var ap in np=[],Nt.registeredVariables)np.push(Nt.registeredVariables[ap]);var sp=rp?np.filter(function(pp){return!pp.trainable}):null,lp=np.length;g((np=np.filter(function(pp){return pp.trainable})).length>0,function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+lp+" variables is trainable."});var up=Nt.gradients(_d,np,null,!0),cp=up.value,dp=up.grads;g(dp.some(function(pp){return pp!=null}),function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."}),g(cp.rank===0,function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+cp.rank+" tensor"});var fp={};return np.forEach(function(pp,hp){dp[hp]!=null&&(fp[pp.name]=dp[hp])}),sp!=null&&sp.forEach(function(pp){return fp[pp.name]=null}),{value:cp,grads:fp}}function oo(_d){return Nt.customGrad(_d)}function ao(_d){if(_d.filter(function(np){return np==null}).length>0)throw new Error(`Cannot compute gradient of y=f(x) with respect to x. Make sure that
    the f you passed encloses all operations that lead from x to y.`)}var io=Cn({softmax_:function(_d,np){np===void 0&&(np=-1);var rp=ln(_d,"logits","softmax");if(np===-1&&(np=rp.rank-1),np!==rp.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+rp.rank+" and dim was "+np);return oo(function(ap,sp){var lp=ap.logSumExp([np],!0),up=ap.toFloat().sub(lp).exp();return sp([up]),{value:up,gradFunc:function(cp,dp){var fp=dp[0],pp=cp.mul(fp);return pp.sub(pp.sum([np],!0).mul(fp))}}})(rp)}}),uo=Cn({logSoftmax_:function(_d,np){np===void 0&&(np=-1);var rp=ln(_d,"logits","logSoftmax");if(np===-1&&(np=rp.rank-1),np!==rp.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+rp.rank+" and axis was "+np);return oo(function(ap,sp){var lp=ap.max(np,!0),up=ap.sub(lp),cp=up.toFloat().sub(up.exp().sum(np,!0).log());return sp([cp]),{value:cp,gradFunc:function(dp,fp){var pp=fp[0].exp();return dp.sub(dp.sum(np,!0).mul(pp))}}})(rp)}}),so=function(){function _d(np,rp){this.backend=np,this.dataMover=rp,this.data=new WeakMap,this.dataIdsCount=0}return _d.prototype.get=function(np){return this.data.has(np)||this.dataMover.moveData(this.backend,np),this.data.get(np)},_d.prototype.set=function(np,rp){this.dataIdsCount++,this.data.set(np,rp)},_d.prototype.has=function(np){return this.data.has(np)},_d.prototype.delete=function(np){return this.dataIdsCount--,this.data.delete(np)},_d.prototype.numDataIds=function(){return this.dataIdsCount},_d}(),co=function(){function _d(){}return _d.prototype.time=function(np){return lo()},_d.prototype.read=function(np){return lo()},_d.prototype.readSync=function(np){return lo()},_d.prototype.numDataIds=function(){return lo()},_d.prototype.disposeData=function(np){return lo()},_d.prototype.fromPixels=function(np,rp){return lo()},_d.prototype.write=function(np,rp,ap){return lo()},_d.prototype.move=function(np,rp,ap,sp){return lo()},_d.prototype.memory=function(){return lo()},_d.prototype.floatPrecision=function(){return lo()},_d.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},_d.prototype.batchMatMul=function(np,rp,ap,sp){return lo()},_d.prototype.fusedBatchMatMul=function(np){return np.a,np.b,np.transposeA,np.transposeB,np.bias,np.activation,np.preluActivationWeights,lo()},_d.prototype.slice=function(np,rp,ap){return lo()},_d.prototype.stridedSlice=function(np,rp,ap,sp){return lo()},_d.prototype.unstack=function(np,rp){return lo()},_d.prototype.reverse=function(np,rp){return lo()},_d.prototype.concat=function(np,rp){return lo()},_d.prototype.neg=function(np){return lo()},_d.prototype.add=function(np,rp){return lo()},_d.prototype.addN=function(np){return lo()},_d.prototype.subtract=function(np,rp){return lo()},_d.prototype.multiply=function(np,rp){return lo()},_d.prototype.realDivide=function(np,rp){return lo()},_d.prototype.floorDiv=function(np,rp){return lo()},_d.prototype.sum=function(np,rp){return lo()},_d.prototype.prod=function(np,rp){return lo()},_d.prototype.unsortedSegmentSum=function(np,rp,ap){return lo()},_d.prototype.argMin=function(np,rp){return lo()},_d.prototype.argMax=function(np,rp){return lo()},_d.prototype.equal=function(np,rp){return lo()},_d.prototype.notEqual=function(np,rp){return lo()},_d.prototype.less=function(np,rp){return lo()},_d.prototype.lessEqual=function(np,rp){return lo()},_d.prototype.greater=function(np,rp){return lo()},_d.prototype.greaterEqual=function(np,rp){return lo()},_d.prototype.logicalNot=function(np){return lo()},_d.prototype.logicalAnd=function(np,rp){return lo()},_d.prototype.logicalOr=function(np,rp){return lo()},_d.prototype.where=function(np){return lo()},_d.prototype.select=function(np,rp,ap){return lo()},_d.prototype.topk=function(np,rp,ap){return lo()},_d.prototype.min=function(np,rp){return lo()},_d.prototype.minimum=function(np,rp){return lo()},_d.prototype.mod=function(np,rp){return lo()},_d.prototype.max=function(np,rp){return lo()},_d.prototype.maximum=function(np,rp){return lo()},_d.prototype.all=function(np,rp){return lo()},_d.prototype.any=function(np,rp){return lo()},_d.prototype.squaredDifference=function(np,rp){return lo()},_d.prototype.ceil=function(np){return lo()},_d.prototype.floor=function(np){return lo()},_d.prototype.round=function(np){return lo()},_d.prototype.sign=function(np){return lo()},_d.prototype.isNaN=function(np){return lo()},_d.prototype.isInf=function(np){return lo()},_d.prototype.isFinite=function(np){return lo()},_d.prototype.pow=function(np,rp){return lo()},_d.prototype.exp=function(np){return lo()},_d.prototype.expm1=function(np){return lo()},_d.prototype.log=function(np){return lo()},_d.prototype.log1p=function(np){return lo()},_d.prototype.sqrt=function(np){return lo()},_d.prototype.rsqrt=function(np){return lo()},_d.prototype.square=function(np){return lo()},_d.prototype.reciprocal=function(np){return lo()},_d.prototype.relu=function(np){return lo()},_d.prototype.relu6=function(np){return lo()},_d.prototype.prelu=function(np,rp){return lo()},_d.prototype.elu=function(np){return lo()},_d.prototype.eluDer=function(np,rp){return lo()},_d.prototype.selu=function(np){return lo()},_d.prototype.int=function(np){return lo()},_d.prototype.clip=function(np,rp,ap){return lo()},_d.prototype.abs=function(np){return lo()},_d.prototype.complexAbs=function(np){return lo()},_d.prototype.sigmoid=function(np){return lo()},_d.prototype.softplus=function(np){return lo()},_d.prototype.sin=function(np){return lo()},_d.prototype.cos=function(np){return lo()},_d.prototype.tan=function(np){return lo()},_d.prototype.asin=function(np){return lo()},_d.prototype.acos=function(np){return lo()},_d.prototype.atan=function(np){return lo()},_d.prototype.atan2=function(np,rp){return lo()},_d.prototype.sinh=function(np){return lo()},_d.prototype.cosh=function(np){return lo()},_d.prototype.tanh=function(np){return lo()},_d.prototype.asinh=function(np){return lo()},_d.prototype.acosh=function(np){return lo()},_d.prototype.atanh=function(np){return lo()},_d.prototype.erf=function(np){return lo()},_d.prototype.step=function(np,rp){return lo()},_d.prototype.fusedConv2d=function(np){return np.input,np.filter,np.convInfo,np.bias,np.activation,np.preluActivationWeights,lo()},_d.prototype.conv2d=function(np,rp,ap){return lo()},_d.prototype.conv2dDerInput=function(np,rp,ap){return lo()},_d.prototype.conv2dDerFilter=function(np,rp,ap){return lo()},_d.prototype.fusedDepthwiseConv2D=function(np){return np.input,np.filter,np.convInfo,np.bias,np.activation,np.preluActivationWeights,lo()},_d.prototype.depthwiseConv2D=function(np,rp,ap){return lo()},_d.prototype.depthwiseConv2DDerInput=function(np,rp,ap){return lo()},_d.prototype.depthwiseConv2DDerFilter=function(np,rp,ap){return lo()},_d.prototype.conv3d=function(np,rp,ap){return lo()},_d.prototype.conv3dDerInput=function(np,rp,ap){return lo()},_d.prototype.conv3dDerFilter=function(np,rp,ap){return lo()},_d.prototype.maxPool=function(np,rp){return lo()},_d.prototype.maxPoolBackprop=function(np,rp,ap,sp){return lo()},_d.prototype.avgPool=function(np,rp){return lo()},_d.prototype.avgPoolBackprop=function(np,rp,ap){return lo()},_d.prototype.avgPool3d=function(np,rp){return lo()},_d.prototype.avgPool3dBackprop=function(np,rp,ap){return lo()},_d.prototype.maxPool3d=function(np,rp){return lo()},_d.prototype.maxPool3dBackprop=function(np,rp,ap,sp){return lo()},_d.prototype.reshape=function(np,rp){return lo()},_d.prototype.cast=function(np,rp){return lo()},_d.prototype.tile=function(np,rp){return lo()},_d.prototype.pad=function(np,rp,ap){return lo()},_d.prototype.transpose=function(np,rp){return lo()},_d.prototype.gather=function(np,rp,ap){return lo()},_d.prototype.gatherND=function(np,rp){return lo()},_d.prototype.scatterND=function(np,rp,ap){return lo()},_d.prototype.batchToSpaceND=function(np,rp,ap){return lo()},_d.prototype.spaceToBatchND=function(np,rp,ap){return lo()},_d.prototype.resizeBilinear=function(np,rp,ap,sp){return lo()},_d.prototype.resizeBilinearBackprop=function(np,rp,ap){return lo()},_d.prototype.resizeNearestNeighbor=function(np,rp,ap,sp){return lo()},_d.prototype.resizeNearestNeighborBackprop=function(np,rp,ap){return lo()},_d.prototype.batchNormalization=function(np,rp,ap,sp,lp,up){return lo()},_d.prototype.localResponseNormalization4D=function(np,rp,ap,sp,lp){return lo()},_d.prototype.LRNGrad=function(np,rp,ap,sp,lp,up,cp){return lo()},_d.prototype.multinomial=function(np,rp,ap,sp){return lo()},_d.prototype.oneHot=function(np,rp,ap,sp){return lo()},_d.prototype.cumsum=function(np,rp,ap,sp){return lo()},_d.prototype.nonMaxSuppression=function(np,rp,ap,sp,lp){return lo()},_d.prototype.fft=function(np){return lo()},_d.prototype.ifft=function(np){return lo()},_d.prototype.complex=function(np,rp){return lo()},_d.prototype.real=function(np){return lo()},_d.prototype.imag=function(np){return lo()},_d.prototype.cropAndResize=function(np,rp,ap,sp,lp,up){return lo()},_d.prototype.depthToSpace=function(np,rp,ap){return lo()},_d.prototype.split=function(np,rp,ap){return lo()},_d.prototype.sparseToDense=function(np,rp,ap,sp){return lo()},_d.prototype.diag=function(np){return lo()},_d.prototype.fill=function(np,rp,ap){throw new Error("Not yet implemented.")},_d.prototype.onesLike=function(np){return lo()},_d.prototype.zerosLike=function(np){return lo()},_d.prototype.linspace=function(np,rp,ap){return lo()},_d.prototype.dispose=function(){return lo()},_d}();function lo(){throw new Error("Not yet implemented or not found in the registry. Did you forget to import the kernel?")}function ho(_d,np){for(var rp=_d.length,ap=[],sp=0;sp<rp;sp++){var lp=rp-1-sp,up=_d[lp]||1;(np[np.length-1-sp]||1)>1&&up===1&&ap.unshift(lp)}return ap}function fo(_d,np){for(var rp=[],ap=0;ap<np.length;ap++){var sp=_d[_d.length-ap-1],lp=np.length-ap-1,up=np[lp];(sp==null||sp===1&&up>1)&&rp.unshift(lp)}return rp}function po(_d,np){for(var rp=[],ap=Math.max(_d.length,np.length),sp=0;sp<ap;sp++){var lp=_d[_d.length-sp-1];lp==null&&(lp=1);var up=np[np.length-sp-1];if(up==null&&(up=1),lp===1)rp.unshift(up);else if(up===1)rp.unshift(lp);else{if(lp!==up)throw Error("Operands could not be broadcast together with shapes "+_d+" and "+np+".");rp.unshift(lp)}}return rp}function vo(_d,np,rp,ap,sp,lp,up){up===void 0&&(up="channelsLast");var cp,dp=bo(np),fp=dp[0],pp=dp[1];if(up==="channelsLast")cp=[fp,pp,_d[3],_d[3]];else{if(up!=="channelsFirst")throw new Error("Unknown dataFormat "+up);cp=[fp,pp,_d[1],_d[1]]}return go(_d,cp,rp,ap,sp,lp,!1,up)}function mo(_d,np,rp,ap,sp,lp,up){up===void 0&&(up="NDHWC");var cp,dp,fp=wo(np),pp=fp[0],hp=fp[1],mp=fp[2];if(up==="NDHWC")dp="channelsLast",cp=[pp,hp,mp,_d[4],_d[4]];else{if(up!=="NCDHW")throw new Error("Unknown dataFormat "+up);dp="channelsFirst",cp=[pp,hp,mp,_d[1],_d[1]]}return yo(_d,cp,rp,ap,sp,!1,dp,lp)}function go(_d,np,rp,ap,sp,lp,up,cp){up===void 0&&(up=!1),cp===void 0&&(cp="channelsLast");var dp=[-1,-1,-1,-1],fp=dp[0],pp=dp[1],hp=dp[2],mp=dp[3];if(cp==="channelsLast")fp=_d[0],pp=_d[1],hp=_d[2],mp=_d[3];else{if(cp!=="channelsFirst")throw new Error("Unknown dataFormat "+cp);fp=_d[0],mp=_d[1],pp=_d[2],hp=_d[3]}var gp,vp=np[0],xp=np[1],Sp=np[3],yp=bo(rp),bp=yp[0],Ep=yp[1],wp=bo(ap),_p=wp[0],Cp=wp[1],$p=Co(vp,_p),Rp=Co(xp,Cp),Pp=function(Dp,Fp,Ip,kp,Tp,Np,Lp,Vp){var zp,Wp,Up;if(typeof Dp=="number"){var qp=Dp===0?"VALID":"NUMBER";zp={top:Dp,bottom:Dp,left:Dp,right:Dp,type:qp};var Bp=function(Zp,Gp,tm,om,em){om==null&&(om=xo(Zp,Gp,tm));var _m=Zp[0],Cm=Zp[1],Rm=Eo((_m-Gp+2*om)/tm+1,em);g(E(Rm),function(){return"The output # of rows ("+Rm+") must be an integer. Change the stride and/or zero pad parameters"});var Em=Eo((Cm-Gp+2*om)/tm+1,em);return g(E(Em),function(){return"The output # of columns ("+Em+") must be an integer. Change the stride and/or zero pad parameters"}),[Rm,Em]}([Fp,Ip],Np,kp,Dp,Vp);Wp=Bp[0],Up=Bp[1]}else if(Dp==="same"){Wp=Math.ceil(Fp/kp),Up=Math.ceil(Ip/Tp);var Yp=Math.max(0,(Wp-1)*kp+Np-Fp),Xp=Math.max(0,(Up-1)*Tp+Lp-Ip),Qp=Math.floor(Yp/2),am=Yp-Qp,Jp=Math.floor(Xp/2),im=Xp-Jp;zp={top:Qp,bottom:am,left:Jp,right:im,type:"SAME"}}else{if(Dp!=="valid")throw Error("Unknown padding parameter: "+Dp);zp={top:0,bottom:0,left:0,right:0,type:"VALID"},Wp=Math.ceil((Fp-Np+1)/kp),Up=Math.ceil((Ip-Lp+1)/Tp)}return{padInfo:zp,outHeight:Wp,outWidth:Up}}(sp,pp,hp,bp,Ep,$p,Rp,lp),Op=Pp.padInfo,jp=Pp.outHeight,Mp=Pp.outWidth,Ap=up?Sp*mp:Sp;return cp==="channelsFirst"?gp=[fp,Ap,jp,Mp]:cp==="channelsLast"&&(gp=[fp,jp,Mp,Ap]),{batchSize:fp,dataFormat:cp,inHeight:pp,inWidth:hp,inChannels:mp,outHeight:jp,outWidth:Mp,outChannels:Ap,padInfo:Op,strideHeight:bp,strideWidth:Ep,filterHeight:vp,filterWidth:xp,effectiveFilterHeight:$p,effectiveFilterWidth:Rp,dilationHeight:_p,dilationWidth:Cp,inShape:_d,outShape:gp,filterShape:np}}function yo(_d,np,rp,ap,sp,lp,up,cp){lp===void 0&&(lp=!1),up===void 0&&(up="channelsLast");var dp=[-1,-1,-1,-1,-1],fp=dp[0],pp=dp[1],hp=dp[2],mp=dp[3],gp=dp[4];if(up==="channelsLast")fp=_d[0],pp=_d[1],hp=_d[2],mp=_d[3],gp=_d[4];else{if(up!=="channelsFirst")throw new Error("Unknown dataFormat "+up);fp=_d[0],gp=_d[1],pp=_d[2],hp=_d[3],mp=_d[4]}var vp,xp=np[0],Sp=np[1],yp=np[2],bp=np[4],Ep=wo(rp),wp=Ep[0],_p=Ep[1],Cp=Ep[2],$p=wo(ap),Rp=$p[0],Pp=$p[1],Op=$p[2],jp=Co(xp,Rp),Mp=Co(Sp,Pp),Ap=Co(yp,Op),Dp=function(Lp,Vp,zp,Wp,Up,qp,Bp,Yp,Xp,Qp,am){var Jp,im,Zp,Gp;if(typeof Lp=="number"){var tm=Lp===0?"VALID":"NUMBER";Jp={top:Lp,bottom:Lp,left:Lp,right:Lp,front:Lp,back:Lp,type:tm};var om=function(hm,sm,cm,ym,Tm,xm){Tm==null&&(Tm=xo(hm,sm,ym));var bm=hm[0],Dm=hm[1],Vm=hm[2],Kp=Eo((bm-sm+2*Tm)/ym+1,xm);g(E(Kp),function(){return"The output # of depths ("+Kp+") must be an integer. Change the stride and/or zero pad parameters"});var Hp=Eo((Dm-sm+2*Tm)/ym+1,xm);g(E(Hp),function(){return"The output # of rows ("+Hp+") must be an integer. Change the stride and/or zero pad parameters"});var rm=Eo((Vm-sm+2*Tm)/ym+1,xm);return g(E(rm),function(){return"The output # of columns ("+rm+") must be an integer. Change the stride and/or zero pad parameters"}),[Kp,Hp,rm,cm]}([Vp,zp,Wp,1],Yp,1,Up,Lp,am);im=om[0],Zp=om[1],Gp=om[2]}else if(Lp==="same"){im=Math.ceil(Vp/Up),Zp=Math.ceil(zp/qp),Gp=Math.ceil(Wp/Bp);var em=(im-1)*Up+Yp-Vp,_m=(Zp-1)*qp+Xp-zp,Cm=(Gp-1)*Bp+Qp-Wp,Rm=Math.floor(em/2),Em=em-Rm,$m=Math.floor(_m/2),fm=_m-$m,wm=Math.floor(Cm/2),pm=Cm-wm;Jp={top:$m,bottom:fm,left:wm,right:pm,front:Rm,back:Em,type:"SAME"}}else{if(Lp!=="valid")throw Error("Unknown padding parameter: "+Lp);Jp={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},im=Math.ceil((Vp-Yp+1)/Up),Zp=Math.ceil((zp-Xp+1)/qp),Gp=Math.ceil((Wp-Qp+1)/Bp)}return{padInfo:Jp,outDepth:im,outHeight:Zp,outWidth:Gp}}(sp,pp,hp,mp,wp,_p,Cp,jp,Mp,Ap,cp),Fp=Dp.padInfo,Ip=Dp.outDepth,kp=Dp.outHeight,Tp=Dp.outWidth,Np=lp?bp*gp:bp;return up==="channelsFirst"?vp=[fp,Np,Ip,kp,Tp]:up==="channelsLast"&&(vp=[fp,Ip,kp,Tp,Np]),{batchSize:fp,dataFormat:up,inDepth:pp,inHeight:hp,inWidth:mp,inChannels:gp,outDepth:Ip,outHeight:kp,outWidth:Tp,outChannels:Np,padInfo:Fp,strideDepth:wp,strideHeight:_p,strideWidth:Cp,filterDepth:xp,filterHeight:Sp,filterWidth:yp,effectiveFilterDepth:jp,effectiveFilterHeight:Mp,effectiveFilterWidth:Ap,dilationDepth:Rp,dilationHeight:Pp,dilationWidth:Op,inShape:_d,outShape:vp,filterShape:np}}function xo(_d,np,rp,ap){ap===void 0&&(ap=1);var sp=Co(np,ap);return Math.floor((_d[0]*(rp-1)-rp+sp)/2)}function bo(_d){return typeof _d=="number"?[_d,_d,_d]:_d.length===2?[_d[0],_d[1],1]:_d}function wo(_d){return typeof _d=="number"?[_d,_d,_d]:_d}function Co(_d,np){return np<=1?_d:_d+(_d-1)*(np-1)}function Eo(_d,np){if(!np)return _d;switch(np){case"round":return Math.round(_d);case"ceil":return Math.ceil(_d);case"floor":return Math.floor(_d);default:throw new Error("Unknown roundingMode "+np)}}function Ro(_d){var np=bo(_d),rp=np[0],ap=np[1],sp=np[2];return rp===1&&ap===1&&sp===1}function Io(_d,np){return Ro(_d)||Ro(np)}function ko(_d){if(_d==="NHWC")return"channelsLast";if(_d==="NCHW")return"channelsFirst";throw new Error("Unknown dataFormat "+_d)}function So(_d,np,rp){if(np==="complex64"){if(_d.dtype==="complex64")return _d.clone();var ap=Pn(_d.shape),sp=_d.toFloat(),lp=rp.complex(sp,ap);return ap.dispose(),sp.dispose(),lp}if(!M(_d.dtype,np))return Nt.makeTensorFromDataId(_d.dataId,_d.shape,np);if(_d.dtype==="complex64"){var up=rp.real(_d);return lp=up.cast(np),up.dispose(),lp}if(np==="int32")return rp.int(_d);if(np==="bool"){var cp=An(0,_d.dtype);return lp=rp.notEqual(_d,cp),cp.dispose(),lp}throw new Error("Error in Cast: failed to cast "+_d.dtype+" to "+np)}function Ao(_d,np){return Nt.makeTensorFromDataId(_d.dataId,np,_d.dtype)}function Do(_d,np,rp){var ap=(np-_d)/(rp-1),sp=$$1(rp,"float32");sp[0]=_d;for(var lp=1;lp<sp.length;lp++)sp[lp]=sp[lp-1]+ap;return Dn(sp,"float32")}var To=Object.freeze({castTensor:So,reshapeTensor:Ao,linspaceImpl:Do,upcastType:Ct,axesAreInnerMostDims:fn,combineLocations:pn,computeOutAndReduceShapes:dn,expandShapeToKeepDim:vn,assertAxesAreInnerMostDims:mn,getAxesPermutation:gn,getUndoAxesPermutation:yn,getInnerMostAxes:xn,getBroadcastDims:ho,getReductionAxes:fo,assertAndGetBroadcastShape:po,assertParamsConsistent:bn,computeOutShape:wn,computePool2DInfo:vo,computePool3DInfo:mo,computeConv2DInfo:go,computeConv3DInfo:yo,computeDefaultPad:xo,tupleValuesAreOne:Ro,eitherStridesOrDilationsAreOne:Io,convertConv2DDataFormat:ko});function No(_d,np){if(_d.length!==np.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+_d.length+", imag: "+np.length+".");for(var rp=new Float32Array(2*_d.length),ap=0;ap<rp.length;ap+=2)rp[ap]=_d[ap/2],rp[ap+1]=np[ap/2];return rp}function Fo(_d,np){return{real:_d[2*np],imag:_d[2*np+1]}}function Oo(_d,np,rp,ap){_d[2*ap]=np,_d[2*ap+1]=rp}function _o(_d,np,rp){var ap=(rp?2:-2)*Math.PI*(_d/np);return{real:Math.cos(ap),imag:Math.sin(ap)}}function Mo(_d,np,rp,ap,sp){for(var lp=Array.from(np).map(function(gp,vp){return{score:gp,boxIndex:vp}}).filter(function(gp){return gp.score>sp}).sort(function(gp,vp){return vp.score-gp.score}),up=[],cp=0;cp<lp.length;cp++){var dp=lp[cp],fp=dp.score,pp=dp.boxIndex;if(fp<sp)break;for(var hp=!1,mp=up.length-1;mp>=0;--mp)if(Bo(_d,pp,up[mp])>=ap){hp=!0;break}if(!hp&&(up.push(pp),up.length>=rp))break}return Dn(up,"int32")}function Bo(_d,np,rp){var ap=_d.subarray(4*np,4*np+4),sp=_d.subarray(4*rp,4*rp+4),lp=Math.min(ap[0],ap[2]),up=Math.min(ap[1],ap[3]),cp=Math.max(ap[0],ap[2]),dp=Math.max(ap[1],ap[3]),fp=Math.min(sp[0],sp[2]),pp=Math.min(sp[1],sp[3]),hp=Math.max(sp[0],sp[2]),mp=Math.max(sp[1],sp[3]),gp=(cp-lp)*(dp-up),vp=(hp-fp)*(mp-pp);if(gp<=0||vp<=0)return 0;var xp=Math.max(lp,fp),Sp=Math.max(up,pp),yp=Math.min(cp,hp),bp=Math.min(dp,mp),Ep=Math.max(yp-xp,0)*Math.max(bp-Sp,0);return Ep/(gp+vp-Ep)}function Po(_d,np,rp){var ap=new Array(_d.rank).fill(0),sp=_d.shape.slice();return np.map(function(lp){sp[rp]=lp;var up=_d.slice(ap,sp);return ap[rp]+=lp,up})}function Lo(_d,np){for(var rp=new Array(_d.rank),ap=0;ap<rp.length;ap++)rp[ap]=_d.shape[ap]*np[ap];var sp=ur(rp,_d.dtype);for(ap=0;ap<sp.values.length;++ap){for(var lp=sp.indexToLoc(ap),up=new Array(_d.rank),cp=0;cp<up.length;cp++)up[cp]=lp[cp]%_d.shape[cp];var dp=_d.locToIndex(up);sp.values[ap]=_d.values[dp]}return sp.toTensor()}function Wo(_d,np,rp,ap,sp){for(var lp=np[np.length-1],up=[_d.length/lp,lp],cp=up[0],dp=up[1],fp=N(rp,cp*ap),pp=N("int32",cp*ap),hp=0;hp<cp;hp++){for(var mp=hp*dp,gp=_d.subarray(mp,mp+dp),vp=[],xp=0;xp<gp.length;xp++)vp.push({value:gp[xp],index:xp});vp.sort(function(wp,_p){return _p.value-wp.value});var Sp=hp*ap,yp=fp.subarray(Sp,Sp+ap),bp=pp.subarray(Sp,Sp+ap);for(xp=0;xp<ap;xp++)yp[xp]=vp[xp].value,bp[xp]=vp[xp].index}var Ep=np.slice();return Ep[Ep.length-1]=ap,[kn(fp,Ep,rp),kn(pp,Ep,"int32")]}function Uo(_d,np){for(var rp=[],ap=0;ap<np.length;ap++)np[ap]&&rp.push(ap);var sp=ur(_d,"int32"),lp=ur([rp.length,_d.length],"int32");for(ap=0;ap<rp.length;ap++){var up=sp.indexToLoc(rp[ap]),cp=ap*_d.length;lp.values.set(up,cp)}return lp.toTensor()}var Vo=function(){return function(_d,np){this.outputShape=[],this.outputShape=_d,this.variableNames=np.map(function(sp,lp){return"T"+lp});var rp=[];this.variableNames.forEach(function(sp){rp.push("float v"+sp+" = get"+sp+"AtOutCoords();")});var ap=this.variableNames.map(function(sp){return"v"+sp}).join(" + ");this.userCode=`
      void main() {
        `+rp.join(`
        `)+`

        float result = `+ap+`;
        setOutput(result);
      }
    `}}(),zo=function(){return function(_d,np){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=_d,this.variableNames=np.map(function(sp,lp){return"T"+lp});var rp=[];this.variableNames.forEach(function(sp){rp.push("vec4 v"+sp+" = get"+sp+"AtOutCoords();")});var ap=this.variableNames.map(function(sp){return"v"+sp}).join(" + ");this.userCode=`
      void main() {
        `+rp.join(`
        `)+`

        vec4 result = `+ap+`;
        setOutput(result);
      }
    `}}(),Go=function(){return function(_d,np,rp){this.variableNames=["A"];var ap=_d.windowSize,sp=_d.batchSize,lp=_d.inSize,up=Math.ceil(lp/ap);rp||this.variableNames.push("bestIndicesA"),this.outputShape=[sp,up];var cp=np==="max"?">":"<",dp=rp?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+ap+`;

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < `+ap+`; i++) {
          int inIdx = `+dp+`;
          float candidate = getA(batch, inIdx);
          if (candidate `+cp+` bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}();function Ho(_d,np){return["x","y","z","w","u","v"].slice(0,np).map(function(rp){return _d+"."+rp})}function qo(_d,np){return np===1?[_d]:Ho(_d,np)}function Ko(){var _d,np,rp,ap,sp,lp,up,cp,dp,fp;return a$1().getNumber("WEBGL_VERSION")===2?(_d="#version 300 es",np="in",rp="out",ap="in",sp="texture",lp="outputColor",up="out vec4 outputColor;",cp=`
      bool isnan_custom(float val) {
        return (val > 0.0 || val < 0.0) ? false : val != 0.0;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `,dp="",fp=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(_d="",np="attribute",rp="varying",ap="varying",sp="texture2D",lp="gl_FragColor",up="",cp=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,dp=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,fp=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:_d,attribute:np,varyingVs:rp,varyingFs:ap,texture2D:sp,output:lp,defineOutput:up,defineSpecialNaN:cp,defineSpecialInf:dp,defineRound:fp}}function jo(_d,np,rp){rp===void 0&&(rp="index");var ap=q(np);return ap.map(function(sp,lp){return"int "+_d[lp]+" = "+rp+" / "+sp+"; "+(lp===ap.length-1?"int "+_d[lp+1]+" = "+rp+" - "+_d[lp]+" * "+sp:"index -= "+_d[lp]+" * "+sp)+";"}).join("")}function Xo(_d){var np=q(_d).map(function(rp){return rp.toString()});return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * `+np[0]+" + coords.y * "+np[1]+` + coords.z;
  }
`}var $o=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;function Yo(_d,np,rp,ap){var sp=[];_d.forEach(function(gp){var vp=w$1(gp.shapeInfo.logicalShape);gp.shapeInfo.isUniform?sp.push("uniform float "+gp.name+(vp>1?"["+vp+"]":"")+";"):(sp.push("uniform sampler2D "+gp.name+";"),sp.push("uniform int offset"+gp.name+";"))});var lp,up,cp=sp.join(`
`),dp=_d.map(function(gp){return function(vp,xp,Sp){Sp===void 0&&(Sp=!1);var yp="";yp+=Sp?Jo(vp):Qo(vp);var bp=vp.shapeInfo.logicalShape,Ep=xp.logicalShape;return bp.length<=Ep.length&&(yp+=Sp?function(wp,_p){var Cp,$p=wp.name,Rp=$p.charAt(0).toUpperCase()+$p.slice(1),Pp="get"+Rp+"AtOutCoords",Op=wp.shapeInfo.logicalShape.length,jp=_p.logicalShape.length,Mp=ho(wp.shapeInfo.logicalShape,_p.logicalShape),Ap=aa(jp),Dp=jp-Op,Fp=["x","y","z","w","u","v"];Cp=Op===0?"":jp<2&&Mp.length>=1?"coords = 0;":Mp.map(function(zp){return"coords."+Fp[zp+Dp]+" = 0;"}).join(`
`);var Ip="";Ip=jp<2&&Op>0?"coords":wp.shapeInfo.logicalShape.map(function(zp,Wp){return"coords."+Fp[Wp+Dp]}).join(", ");var kp="return outputValue;",Tp=w$1(wp.shapeInfo.logicalShape)===1,Np=w$1(_p.logicalShape)===1;if(Op!==1||Tp||Np){if(Tp&&!Np)kp=jp===1?`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:`
        return vec4(outputValue.x);
      `;else if(Mp.length){var Lp=Op-2,Vp=Op-1;Mp.indexOf(Lp)>-1&&Mp.indexOf(Vp)>-1?kp="return vec4(outputValue.x);":Mp.indexOf(Lp)>-1?kp="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":Mp.indexOf(Vp)>-1&&(kp="return vec4(outputValue.xx, outputValue.zz);")}}else kp=`
      return vec4(outputValue.xy, outputValue.xy);
    `;return`
    vec4 `+Pp+`() {
      `+Ap+` coords = getOutputCoords();
      `+Cp+`
      vec4 outputValue = get`+Rp+"("+Ip+`);
      `+kp+`
    }
  `}(vp,xp):function(wp,_p){var Cp=wp.name,$p=Cp.charAt(0).toUpperCase()+Cp.slice(1),Rp="get"+$p+"AtOutCoords",Pp=_p.texShape,Op=wp.shapeInfo.texShape,jp=wp.shapeInfo.logicalShape.length,Mp=_p.logicalShape.length;if(!wp.shapeInfo.isUniform&&jp===Mp&&wp.shapeInfo.flatOffset==null&&C(Op,Pp))return`
      float `+Rp+`() {
        return sampleTexture(`+Cp+`, resultUV);
      }
    `;var Ap,Dp=aa(Mp),Fp=ho(wp.shapeInfo.logicalShape,_p.logicalShape),Ip=Mp-jp,kp=["x","y","z","w","u","v"];Ap=jp===0?"":Mp<2&&Fp.length>=1?"coords = 0;":Fp.map(function(Np){return"coords."+kp[Np+Ip]+" = 0;"}).join(`
`);var Tp="";return Tp=Mp<2&&jp>0?"coords":wp.shapeInfo.logicalShape.map(function(Np,Lp){return"coords."+kp[Lp+Ip]}).join(", "),`
    float `+Rp+`() {
      `+Dp+` coords = getOutputCoords();
      `+Ap+`
      return get`+$p+"("+Tp+`);
    }
  `}(vp,xp)),yp}(gp,np,ap)}).join(`
`),fp=np.texShape,pp=Ko(),hp=function(gp){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return `+gp.texture2D+`(textureSampler, uv).r;
    }
  `}(pp),mp=function(gp){return gp.version+`
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    `+gp.varyingFs+` vec2 resultUV;
    `+gp.defineOutput+`
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    `+gp.defineSpecialNaN+`
    `+gp.defineSpecialInf+`
    `+gp.defineRound+`

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    `+Zo+`
    `+ta+`
    `+ea+`
  `}(pp);return np.isPacked?(lp=function(gp,vp){switch(gp.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(wp,_p){var Cp=[Math.ceil(_p[0]/2),Math.ceil(_p[1]/2)];return Cp[0]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * `+Cp[1]+`.0);
      }
    `:Cp[1]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * `+Cp[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+Cp[0]+", "+Cp[1]+`));
      return 2 * (resTexRC.x * `+Cp[1]+` + resTexRC.y);
    }
  `}(0,vp);case 2:return function(wp,_p){var Cp=[Math.ceil(_p[0]/2),Math.ceil(_p[1]/2)];if(C(wp,_p))return`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(`+Cp[0]+", "+Cp[1]+`));
      }
    `;var $p=Math.ceil(wp[1]/2);return`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+Cp[0]+", "+Cp[1]+`));

      int index = resTexRC.x * `+Cp[1]+` + resTexRC.y;
      int r = 2 * (index / `+$p+`);
      int c = imod(index, `+$p+`) * 2;

      return ivec2(r, c);
    }
  `}(gp,vp);case 3:return xp=gp,Sp=vp,yp=[Math.ceil(Sp[0]/2),Math.ceil(Sp[1]/2)],bp=Math.ceil(xp[2]/2),Ep=bp*Math.ceil(xp[1]/2),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+yp[0]+", "+yp[1]+`));
      int index = resTexRC.x * `+yp[1]+` + resTexRC.y;

      int b = index / `+Ep+`;
      index -= b * `+Ep+`;

      int r = 2 * (index / `+bp+`);
      int c = imod(index, `+bp+`) * 2;

      return ivec3(b, r, c);
    }
  `;default:return function(wp,_p){for(var Cp=[Math.ceil(_p[0]/2),Math.ceil(_p[1]/2)],$p=Math.ceil(wp[wp.length-1]/2),Rp=$p*Math.ceil(wp[wp.length-2]/2),Pp=Rp,Op="",jp="b, r, c",Mp=2;Mp<wp.length-1;Mp++)Pp*=wp[wp.length-Mp-1],Op=`
      int b`+Mp+" = index / "+Pp+`;
      index -= b`+Mp+" * "+Pp+`;
    `+Op,jp="b"+Mp+", "+jp;return`
    ivec`+wp.length+` getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+Cp[0]+", "+Cp[1]+`));
      int index = resTexRC.x * `+Cp[1]+` + resTexRC.y;

      `+Op+`

      int b = index / `+Rp+`;
      index -= b * `+Rp+`;

      int r = 2 * (index / `+$p+`);
      int c = imod(index, `+$p+`) * 2;

      return ivec`+wp.length+"("+jp+`);
    }
  `}(gp,vp)}var xp,Sp,yp,bp,Ep}(np.logicalShape,fp),up=function(gp){return`
    void setOutput(vec4 val) {
      `+gp.output+` = val;
    }
  `}(pp)):(lp=function(gp,vp){switch(gp.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(yp,bp){return bp[0]===1?`
      int getOutputCoords() {
        return int(resultUV.x * `+bp[1]+`.0);
      }
    `:bp[1]===1?`
      int getOutputCoords() {
        return int(resultUV.y * `+bp[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+bp[0]+", "+bp[1]+`));
      return resTexRC.x * `+bp[1]+` + resTexRC.y;
    }
  `}(0,vp);case 2:return function(yp,bp){return C(yp,bp)?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(`+bp[0]+", "+bp[1]+`));
      }
    `:yp[1]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+bp[0]+", "+bp[1]+`));
        int index = resTexRC.x * `+bp[1]+` + resTexRC.y;
        return ivec2(index, 0);
      }
    `:yp[0]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+bp[0]+", "+bp[1]+`));
        int index = resTexRC.x * `+bp[1]+` + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+bp[0]+", "+bp[1]+`));
      int index = resTexRC.x * `+bp[1]+` + resTexRC.y;
      int r = index / `+yp[1]+`;
      int c = index - r * `+yp[1]+`;
      return ivec2(r, c);
    }
  `}(gp,vp);case 3:return xp=vp,Sp=jo(["r","c","d"],gp),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+xp[0]+", "+xp[1]+`));
      int index = resTexRC.x * `+xp[1]+` + resTexRC.y;
      `+Sp+`
      return ivec3(r, c, d);
    }
  `;case 4:return function(yp,bp){var Ep=jo(["r","c","d","d2"],yp);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+bp[0]+", "+bp[1]+`));
      int index = resTexRC.x * `+bp[1]+` + resTexRC.y;
      `+Ep+`
      return ivec4(r, c, d, d2);
    }
  `}(gp,vp);case 5:return function(yp,bp){var Ep=jo(["r","c","d","d2","d3"],yp);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(`+bp[0]+`,
                             `+bp[1]+`));

      int index = resTexRC.x * `+bp[1]+` + resTexRC.y;

      `+Ep+`

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}(gp,vp);case 6:return function(yp,bp){var Ep=jo(["r","c","d","d2","d3","d4"],yp);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+bp[0]+", "+bp[1]+`));
      int index = resTexRC.x * `+bp[1]+` + resTexRC.y;

      `+Ep+`

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}(gp,vp);default:throw new Error(gp.length+"-D output sampling is not yet supported")}var xp,Sp}(np.logicalShape,fp),up=function(gp){return`
    void setOutput(float val) {
      `+gp.output+` = vec4(val, 0, 0, 0);
    }
  `}(pp)),ap&&(mp+=na),[mp,hp,up,cp,lp,dp,rp].join(`
`)}function Qo(_d){var np=_d.shapeInfo.logicalShape;switch(np.length){case 0:return function(rp){var ap=rp.name,sp="get"+ap.charAt(0).toUpperCase()+ap.slice(1);if(rp.shapeInfo.isUniform)return"float "+sp+"() {return "+ap+";}";var lp=rp.shapeInfo.texShape,up=lp[0],cp=lp[1];if(up===1&&cp===1)return`
      float `+sp+`() {
        return sampleTexture(`+ap+`, halfCR);
      }
    `;var dp=rp.shapeInfo.texShape,fp=dp[0],pp=dp[1],hp=ra(ap);return`
    float `+sp+`() {
      vec2 uv = uvFromFlat(`+fp+", "+pp+", "+hp+`);
      return sampleTexture(`+ap+`, uv);
    }
  `}(_d);case 1:return function(rp){var ap=rp.name,sp="get"+ap.charAt(0).toUpperCase()+ap.slice(1);if(rp.shapeInfo.isUniform)return`
      float `+sp+`(int index) {
        `+oa(rp)+`
      }
    `;var lp=rp.shapeInfo.texShape,up=lp[0],cp=lp[1];if(cp===1&&up===1)return`
      float `+sp+`(int index) {
        return sampleTexture(`+ap+`, halfCR);
      }
    `;var dp=ra(ap);return cp===1?`
      float `+sp+`(int index) {
        vec2 uv = vec2(0.5, (float(index + `+dp+") + 0.5) / "+up+`.0);
        return sampleTexture(`+ap+`, uv);
      }
    `:up===1?`
      float `+sp+`(int index) {
        vec2 uv = vec2((float(index + `+dp+") + 0.5) / "+cp+`.0, 0.5);
        return sampleTexture(`+ap+`, uv);
      }
    `:`
    float `+sp+`(int index) {
      vec2 uv = uvFromFlat(`+up+", "+cp+", index + "+dp+`);
      return sampleTexture(`+ap+`, uv);
    }
  `}(_d);case 2:return function(rp){var ap=rp.shapeInfo.logicalShape,sp=rp.name,lp="get"+sp.charAt(0).toUpperCase()+sp.slice(1),up=rp.shapeInfo.texShape;if(up!=null&&C(ap,up)){var cp=up[0],dp=up[1];return`
    float `+lp+`(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(`+dp+".0, "+cp+`.0);
      return sampleTexture(`+sp+`, uv);
    }
  `}var fp=T(ap),pp=fp.newShape,hp=fp.keptDims,mp=pp;if(mp.length<ap.length){var gp=ia(rp,mp);return`
      `+Qo(gp)+`
      float `+lp+`(int row, int col) {
        return `+lp+"("+ua(["row","col"],hp)+`);
      }
    `}if(rp.shapeInfo.isUniform)return`
      float `+lp+`(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(`+ap[1]+`, 1)));
        `+oa(rp)+`
      }
    `;var vp=up[0],xp=up[1],Sp=ra(sp);return xp===1?`
    float `+lp+`(int row, int col) {
      float index = dot(vec3(row, col, `+Sp+"), vec3("+ap[1]+`, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / `+vp+`.0);
      return sampleTexture(`+sp+`, uv);
    }
  `:vp===1?`
    float `+lp+`(int row, int col) {
      float index = dot(vec3(row, col, `+Sp+"), vec3("+ap[1]+`, 1, 1));
      vec2 uv = vec2((index + 0.5) / `+xp+`.0, 0.5);
      return sampleTexture(`+sp+`, uv);
    }
  `:`
  float `+lp+`(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * `+ap[1]+" + col + "+Sp+`;
    vec2 uv = uvFromFlat(`+vp+", "+xp+`, index);
    return sampleTexture(`+sp+`, uv);
  }
`}(_d);case 3:return function(rp){var ap=rp.shapeInfo.logicalShape,sp=rp.name,lp="get"+sp.charAt(0).toUpperCase()+sp.slice(1),up=ap[1]*ap[2],cp=ap[2],dp=T(ap),fp=dp.newShape,pp=dp.keptDims,hp=fp;if(hp.length<ap.length){var mp=ia(rp,hp);return`
        `+Qo(mp)+`
        float `+lp+`(int row, int col, int depth) {
          return `+lp+"("+ua(["row","col","depth"],pp)+`);
        }
      `}if(rp.shapeInfo.isUniform)return`
      float `+lp+`(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(`+up+", "+cp+`, 1)));
        `+oa(rp)+`
      }
    `;var gp=rp.shapeInfo.texShape,vp=gp[0],xp=gp[1],Sp=rp.shapeInfo.flatOffset;if(xp===up&&Sp==null)return`
        float `+lp+`(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(`+cp+`, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(`+xp+".0, "+vp+`.0);
          return sampleTexture(`+sp+`, uv);
        }
      `;if(xp===cp&&Sp==null)return`
    float `+lp+`(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(`+ap[1]+`, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+xp+".0, "+vp+`.0);
      return sampleTexture(`+sp+`, uv);
    }
  `;var yp=ra(sp);return`
      float `+lp+`(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * `+up+" + col * "+cp+" + depth + "+yp+`;
        vec2 uv = uvFromFlat(`+vp+", "+xp+`, index);
        return sampleTexture(`+sp+`, uv);
      }
  `}(_d);case 4:return function(rp){var ap=rp.shapeInfo.logicalShape,sp=rp.name,lp="get"+sp.charAt(0).toUpperCase()+sp.slice(1),up=ap[3],cp=ap[2]*up,dp=ap[1]*cp,fp=T(ap),pp=fp.newShape,hp=fp.keptDims;if(pp.length<ap.length){var mp=ia(rp,pp);return`
      `+Qo(mp)+`
      float `+lp+`(int row, int col, int depth, int depth2) {
        return `+lp+"("+ua(["row","col","depth","depth2"],hp)+`);
      }
    `}if(rp.shapeInfo.isUniform)return`
      float `+lp+`(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(`+dp+", "+cp+", "+up+`, 1)));
        `+oa(rp)+`
      }
    `;var gp=rp.shapeInfo.flatOffset,vp=rp.shapeInfo.texShape,xp=vp[0],Sp=vp[1];if(Sp===dp&&gp==null)return`
      float `+lp+`(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(`+cp+", "+up+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+Sp+".0, "+xp+`.0);
        return sampleTexture(`+sp+`, uv);
      }
    `;if(Sp===up&&gp==null)return`
      float `+lp+`(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(`+ap[1]*ap[2]+", "+ap[2]+`, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+Sp+".0, "+xp+`.0);
        return sampleTexture(`+sp+`, uv);
      }
    `;var yp=ra(sp);return`
    float `+lp+`(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+dp+" + col * "+cp+` +
          depth * `+up+` + depth2;
      vec2 uv = uvFromFlat(`+xp+", "+Sp+", index + "+yp+`);
      return sampleTexture(`+sp+`, uv);
    }
  `}(_d);case 5:return function(rp){var ap=rp.shapeInfo.logicalShape,sp=rp.name,lp="get"+sp.charAt(0).toUpperCase()+sp.slice(1),up=ap[4],cp=ap[3]*up,dp=ap[2]*cp,fp=ap[1]*dp,pp=T(ap),hp=pp.newShape,mp=pp.keptDims;if(hp.length<ap.length){var gp=ia(rp,hp);return`
      `+Qo(gp)+`
      float `+lp+`(int row, int col, int depth, int depth2, int depth3) {
        return `+lp+"("+ua(["row","col","depth","depth2","depth3"],mp)+`);
      }
    `}if(rp.shapeInfo.isUniform)return`
      float `+lp+`(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(`+fp+", "+dp+", "+cp+", "+up+`)) +
          depth3;
        `+oa(rp)+`
      }
    `;var vp=rp.shapeInfo.flatOffset,xp=rp.shapeInfo.texShape,Sp=xp[0],yp=xp[1];if(yp===fp&&vp==null)return`
      float `+lp+`(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(`+dp+", "+cp+", "+up+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+yp+".0, "+Sp+`.0);
        return sampleTexture(`+sp+`, uv);
      }
    `;if(yp===up&&vp==null)return`
      float `+lp+`(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(`+ap[1]*ap[2]*ap[3]+`,
               `+ap[2]*ap[3]+", "+ap[3]+`, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+yp+".0, "+Sp+`.0);
        return sampleTexture(`+sp+`, uv);
      }
    `;var bp=ra(sp);return`
    float `+lp+`(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+fp+" + col * "+dp+" + depth * "+cp+` +
          depth2 * `+up+" + depth3 + "+bp+`;
      vec2 uv = uvFromFlat(`+Sp+", "+yp+`, index);
      return sampleTexture(`+sp+`, uv);
    }
  `}(_d);case 6:return function(rp){var ap=rp.shapeInfo.logicalShape,sp=rp.name,lp="get"+sp.charAt(0).toUpperCase()+sp.slice(1),up=T(ap),cp=up.newShape,dp=up.keptDims;if(cp.length<ap.length){var fp=ia(rp,cp);return`
      `+Qo(fp)+`
      float `+lp+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return `+lp+"("+ua(["row","col","depth","depth2","depth3","depth4"],dp)+`);
      }
    `}var pp=ap[5],hp=ap[4]*pp,mp=ap[3]*hp,gp=ap[2]*mp,vp=ap[1]*gp;if(rp.shapeInfo.isUniform)return`
      float `+lp+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(`+vp+", "+gp+", "+mp+", "+hp+`)) +
          dot(
            vec2(depth3, depth4),
            vec2(`+pp+`, 1)));
        `+oa(rp)+`
      }
    `;var xp=rp.shapeInfo.flatOffset,Sp=rp.shapeInfo.texShape,yp=Sp[0],bp=Sp[1];if(bp===vp&&xp==null)return`
      float `+lp+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(`+gp+", "+mp+", "+hp+", "+pp+`)) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+bp+".0, "+yp+`.0);
        return sampleTexture(`+sp+`, uv);
      }
    `;if(bp===pp&&xp==null)return`
      float `+lp+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(`+ap[1]*ap[2]*ap[3]*ap[4]+`,
               `+ap[2]*ap[3]*ap[4]+`,
               `+ap[3]*ap[4]+`,
               `+ap[4]+`)) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+bp+".0, "+yp+`.0);
        return sampleTexture(`+sp+`, uv);
      }
    `;var Ep=ra(sp);return`
    float `+lp+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+vp+" + col * "+gp+" + depth * "+mp+` +
          depth2 * `+hp+" + depth3 * "+pp+" + depth4 + "+Ep+`;
      vec2 uv = uvFromFlat(`+yp+", "+bp+`, index);
      return sampleTexture(`+sp+`, uv);
    }
  `}(_d);default:throw new Error(np.length+"-D input sampling is not yet supported")}}function Jo(_d){var np,rp,ap;switch(_d.shapeInfo.logicalShape.length){case 0:return np=_d.name,rp="get"+np.charAt(0).toUpperCase()+np.slice(1),ap=Ko(),`
    vec4 `+rp+`() {
      return `+ap.texture2D+"("+np+`, halfCR);
    }
  `;case 1:return function(sp){var lp=sp.name,up="get"+lp.charAt(0).toUpperCase()+lp.slice(1),cp=sp.shapeInfo.texShape,dp=[Math.ceil(cp[0]/2),Math.ceil(cp[1]/2)],fp=Ko();return`
    vec4 `+up+`(int index) {
      vec2 uv = packedUVfrom1D(
        `+dp[0]+", "+dp[1]+`, index);
      return `+fp.texture2D+"("+lp+`, uv);
    }
  `}(_d);case 2:return function(sp){var lp=sp.shapeInfo.logicalShape,up=sp.name,cp="get"+up.charAt(0).toUpperCase()+up.slice(1),dp=sp.shapeInfo.texShape,fp=dp[0],pp=dp[1],hp=Ko();if(dp!=null&&C(lp,dp))return`
      vec4 `+cp+`(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(`+pp+".0, "+fp+`.0);

        return `+hp.texture2D+"("+up+`, uv);
      }
    `;var mp=[Math.ceil(dp[0]/2),Math.ceil(dp[1]/2)],gp=Math.ceil(lp[1]/2);return`
    vec4 `+cp+`(int row, int col) {
      vec2 uv = packedUVfrom2D(`+gp+", "+mp[0]+", "+mp[1]+`, row, col);
      return `+hp.texture2D+"("+up+`, uv);
    }
  `}(_d);case 3:return function(sp){var lp=sp.shapeInfo.logicalShape,up=sp.name,cp="get"+up.charAt(0).toUpperCase()+up.slice(1),dp=sp.shapeInfo.texShape,fp=[Math.ceil(dp[0]/2),Math.ceil(dp[1]/2)];if(lp[0]===1){var pp=lp.slice(1),hp=ia(sp,pp);return`
        `+Jo(hp)+`
        vec4 `+cp+`(int b, int row, int col) {
          return `+cp+"("+ua(["b","row","col"],[1,2])+`);
        }
      `}var mp=fp[0],gp=fp[1],vp=Math.ceil(lp[2]/2),xp=vp*Math.ceil(lp[1]/2),Sp=Ko();return`
    vec4 `+cp+`(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        `+mp+", "+gp+", "+xp+", "+vp+`, b, row, col);
      return `+Sp.texture2D+"("+up+`, uv);
    }
  `}(_d);default:return function(sp){for(var lp=sp.shapeInfo.logicalShape,up=lp.length,cp=sp.name,dp="get"+cp.charAt(0).toUpperCase()+cp.slice(1),fp=sp.shapeInfo.texShape,pp=[Math.ceil(fp[0]/2),Math.ceil(fp[1]/2)],hp=pp[0],mp=pp[1],gp=Math.ceil(lp[up-1]/2),vp=gp*Math.ceil(lp[up-2]/2),xp="int b, int row, int col",Sp="b * "+vp+" + (row / 2) * "+gp+" + (col / 2)",yp=2;yp<up-1;yp++)xp="int b"+yp+", "+xp,vp*=lp[up-yp-1],Sp="b"+yp+" * "+vp+" + "+Sp;var bp=Ko();return`
    vec4 `+dp+"("+xp+`) {
      int index = `+Sp+`;
      int texR = index / `+mp+`;
      int texC = index - texR * `+mp+`;
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+mp+", "+hp+`);
      return `+bp.texture2D+"("+cp+`, uv);
    }
  `}(_d)}}var Zo=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,ta=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,ea=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,na=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function ra(_d){return"offset"+_d}function oa(_d){var np=_d.name,rp=w$1(_d.shapeInfo.logicalShape);return rp<2?"return "+np+";":`
    for (int i = 0; i < `+rp+`; i++) {
      if (i == index) {
        return `+np+`[i];
      }
    }
  `}function aa(_d){if(_d<=1)return"int";if(_d===2)return"ivec2";if(_d===3)return"ivec3";if(_d===4)return"ivec4";if(_d===5)return"ivec5";if(_d===6)return"ivec6";throw Error("GPU for rank "+_d+" is not yet supported")}function ia(_d,np){var rp=JSON.parse(JSON.stringify(_d));return rp.shapeInfo.logicalShape=np,rp}function ua(_d,np){return np.map(function(rp){return _d[rp]}).join(", ")}var sa=function(){return function(_d,np,rp,ap){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,g(_d.length>2,function(){return"Packed arg"+(rp.charAt(0).toUpperCase()+rp.slice(1))+" supports only inputs with rank above 2."});var sp=_d[_d.length-1],lp=Math.ceil(sp/np);this.outputShape=_d.slice(0,-1),lp>1&&this.outputShape.push(lp),ap||this.variableNames.push("bestIndicesA");var up,cp,dp=this.outputShape,fp=dp.length,pp=aa(fp),hp=qo("coords",fp);if(lp===1){var mp=aa(cp=fp+1);up=`
        `+mp+" sourceLocR = "+mp+"("+hp.join()+`, 0);
        ++`+hp[fp-1]+`;
        `+mp+" sourceLocG = "+mp+"("+hp.join()+`, 0);
        ++`+hp[fp-2]+`;
        `+mp+" sourceLocA = "+mp+"("+hp.join()+`, 0);
        --`+hp[fp-1]+`;
        `+mp+" sourceLocB = "+mp+"("+hp.join()+`, 0);
        --`+hp[fp-2]+";"}else cp=fp,up=`
        `+pp+` sourceLocR = coords;
        ++`+hp[fp-1]+`;
        `+pp+` sourceLocG = coords;
        ++`+hp[fp-2]+`;
        `+pp+` sourceLocA = coords;
        --`+hp[fp-1]+`;
        `+pp+` sourceLocB = coords;
        --`+hp[fp-2]+";";var gp=["x","y","z","w","u","v"].slice(0,cp),vp="."+gp[cp-1],xp=gp.map(function(Rp){return"int "+Rp}),Sp=qo("sourceLocR",cp-1).concat("inIdx.r"),yp=qo("sourceLocG",cp-1).concat("inIdx.g"),bp=qo("sourceLocB",cp-1).concat("inIdx.b"),Ep=qo("sourceLocA",cp-1).concat("inIdx.a"),wp=rp==="max"?"greaterThan":"lessThan",_p=ap?"":`
          inIdx = round(vec4(getBestIndicesAChannel(`+Sp.join()+`),
                             getBestIndicesAChannel(`+yp.join()+`),
                             getBestIndicesAChannel(`+bp.join()+`),
                             getBestIndicesAChannel(`+Ep.join()+")));",Cp=`vec4(
            getAChannel(`+Sp.join()+`),
            hasNextCol ? getAChannel(`+yp.join()+`) : 0.,
            hasNextRow ? getAChannel(`+bp.join()+`) : 0.,
            hasNextRow && hasNextCol ? getAChannel(`+Ep.join()+") : 0.)",$p=ap?"":`
      float getBestIndicesAChannel(`+xp.join()+`) {
        return getChannel(getBestIndicesA(`+gp.join()+`),
                                          vec2(`+gp.slice(-2).join()+`));
      }`;this.userCode=`
      float getAChannel(`+xp.join()+`) {
        return getChannel(getA(`+gp.join()+`),
                               vec2(`+gp.slice(-2).join()+`));
      }
      `+$p+`
      void main() {
        `+pp+` coords = getOutputCoords();
        bool hasNextCol = `+hp[fp-1]+" < "+(dp[fp-1]-1)+`;
        bool hasNextRow = `+hp[fp-2]+" < "+(dp[fp-2]-1)+`;
        `+up+`
        ivec4 srcIdx = ivec4(sourceLocR`+vp+", sourceLocG"+vp+`,
          sourceLocB`+vp+", sourceLocA"+vp+") * "+np+`;
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = `+Cp+`;

        for (int i = 0; i < `+np+`; i++) {
          inIdx = srcIdx;
          `+_p+`
          vec4 candidate = `+Cp+`;
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(`+wp+`(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}(),ca=function(){return function(_d){this.variableNames=["dy"],this.outputShape=_d.inShape;var np=_d.filterHeight,rp=_d.filterWidth,ap=_d.strideHeight,sp=_d.strideWidth,lp=_d.dilationHeight,up=_d.dilationWidth,cp=_d.effectiveFilterHeight,dp=_d.effectiveFilterWidth,fp=cp-1-_d.padInfo.top,pp=dp-1-_d.padInfo.left,hp=1/(np*rp);this.userCode=`
      const ivec2 pads = ivec2(`+fp+", "+pp+`);
      const float avgMultiplier = float(`+hp+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+cp+`;
            wR += `+lp+`) {
          float dyR = float(dyRCorner + wR) / `+ap+`.0;

          if (dyR < 0.0 || dyR >= `+_d.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+dp+`;
            wC+= `+up+`) {
            float dyC = float(dyCCorner + wC) / `+sp+`.0;

            if (dyC < 0.0 || dyC >= `+_d.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}(),la=function(){return function(_d){this.variableNames=["dy"],this.outputShape=_d.inShape;var np=_d.filterDepth,rp=_d.filterHeight,ap=_d.filterWidth,sp=_d.strideDepth,lp=_d.strideHeight,up=_d.strideWidth,cp=_d.dilationDepth,dp=_d.dilationHeight,fp=_d.dilationWidth,pp=_d.effectiveFilterDepth,hp=_d.effectiveFilterHeight,mp=_d.effectiveFilterWidth,gp=pp-1-_d.padInfo.front,vp=hp-1-_d.padInfo.top,xp=mp-1-_d.padInfo.left,Sp=1/(np*rp*ap);this.userCode=`
      const ivec3 pads = ivec3(`+gp+", "+vp+", "+xp+`);
      const float avgMultiplier = float(`+Sp+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+pp+`;
            wD += `+cp+`) {
          float dyD = float(dyDCorner + wD) / `+sp+`.0;

          if (dyD < 0.0 || dyD >= `+_d.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+hp+`;
              wR += `+dp+`) {
            float dyR = float(dyRCorner + wR) / `+lp+`.0;

            if (dyR < 0.0 || dyR >= `+_d.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+mp+`;
                wC += `+fp+`) {
              float dyC = float(dyCCorner + wC) / `+up+`.0;

              if (dyC < 0.0 || dyC >= `+_d.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}(),ha=function(){return function(_d,np,rp,ap,sp,lp){this.outputShape=[],this.variableNames=["x","mean","variance"],po(_d,np),po(_d,rp);var up="0.0";ap!=null&&(po(_d,ap),this.variableNames.push("offset"),up="getOffsetAtOutCoords()");var cp="1.0";sp!=null&&(po(_d,sp),this.variableNames.push("scale"),cp="getScaleAtOutCoords()"),this.outputShape=_d,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = `+up+`;
        float scale = `+cp+`;
        float inv = scale * inversesqrt(variance + float(`+lp+`));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}(),fa=function(){return function(_d,np,rp,ap,sp,lp){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],po(_d,np),po(_d,rp);var up="vec4(0.0)";ap!=null&&(po(_d,ap),this.variableNames.push("offset"),up="getOffsetAtOutCoords()");var cp="vec4(1.0)";sp!=null&&(po(_d,sp),this.variableNames.push("scale"),cp="getScaleAtOutCoords()"),this.outputShape=_d,this.userCode=`
      void main() {
        vec4 offset = `+up+`;
        vec4 scale = `+cp+`;

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(`+lp+`));

        setOutput((x - mean) * inv + offset);
      }
    `}}(),pa="return areal * breal - aimag * bimag;",da="return areal * bimag + aimag * breal;",va=function(){return function(_d,np,rp){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=po(np,rp),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        `+_d+`
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}(),ma="return a + b;",ga="return a - b;",ya="return a * b;",xa="return (a < 0.) ? b * a : a;",ba=function(){return function(_d,np,rp){this.variableNames=["A","B"],this.outputShape=po(np,rp),this.userCode=`
      float binaryOperation(float a, float b) {
        `+_d+`
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}(),wa=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`,Ca=function(){return function(_d,np,rp,ap){ap===void 0&&(ap=!1),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=po(np,rp);var sp=this.outputShape.length,lp="";if(ap)if(sp===0||w$1(this.outputShape)===1)lp=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(lp=`
          `+aa(sp)+` coords = getOutputCoords();
        `,sp===1)lp+=`
            result.y = (coords + 1) >= `+this.outputShape[0]+` ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{var up=qo("coords",sp);lp+=`
            bool nextRowOutOfBounds =
              (`+up[sp-2]+" + 1) >= "+this.outputShape[sp-2]+`;
            bool nextColOutOfBounds =
              (`+up[sp-1]+" + 1) >= "+this.outputShape[sp-1]+`;
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        `+_d+`
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        `+lp+`

        setOutput(result);
      }
    `}}(),Ea=function(){function _d(np){this.variableNames=["A"],this.outputShape=np,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}return _d.prototype.getCustomSetupFunc=function(np,rp){var ap=this;return function(sp,lp){ap.minLoc==null&&(ap.minLoc=sp.getUniformLocationNoThrow(lp,"minVal"),ap.maxLoc=sp.getUniformLocationNoThrow(lp,"maxVal")),sp.gl.uniform1f(ap.minLoc,np),sp.gl.uniform1f(ap.maxLoc,rp)}},_d}(),Ra=function(){function _d(np){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=np,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}return _d.prototype.getCustomSetupFunc=function(np,rp){var ap=this;return function(sp,lp){ap.minLoc==null&&(ap.minLoc=sp.getUniformLocationNoThrow(lp,"minVal"),ap.maxLoc=sp.getUniformLocationNoThrow(lp,"maxVal")),sp.gl.uniform1f(ap.minLoc,np),sp.gl.uniform1f(ap.maxLoc,rp)}},_d}(),Ia=function(){return function(_d){this.variableNames=["real","imag"],this.outputShape=_d,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}(),ka=function(){return function(_d){this.outputShape=[],this.outputShape=wn(_d,1),this.variableNames=_d.map(function(cp,dp){return"T"+dp});var np=new Array(_d.length-1);np[0]=_d[0][1];for(var rp=1;rp<np.length;rp++)np[rp]=np[rp-1]+_d[rp][1];var ap=["if (yC < "+np[0]+") setOutput(getT0(yR, yC));"];for(rp=1;rp<np.length;rp++){var sp=np[rp-1];ap.push("else if (yC < "+np[rp]+") setOutput(getT"+rp+"(yR, yC-"+sp+"));")}var lp=np.length,up=np[np.length-1];ap.push("else setOutput(getT"+lp+"(yR, yC-"+up+"));"),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        `+ap.join(`
        `)+`
      }
    `}}(),Sa=function(){return function(_d,np){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=wn(_d,np);var rp=this.outputShape,ap=rp.length,sp=aa(ap),lp=qo("coords",ap),up=["x","y","z","w","u","v"].slice(0,ap);this.variableNames=_d.map(function(Sp,yp){return"T"+yp});var cp=new Array(_d.length-1);cp[0]=_d[0][np];for(var dp=1;dp<cp.length;dp++)cp[dp]=cp[dp-1]+_d[dp][np];var fp=up[np],pp=up.slice(-2),hp=up.join(),mp="if ("+fp+" < "+cp[0]+`) {
        return getChannel(
            getT0(`+hp+"), vec2("+pp.join()+`));
        }`;for(dp=1;dp<cp.length;dp++){var gp=cp[dp-1];mp+=`
        if (`+fp+" < "+cp[dp]+"  && "+fp+" >= "+cp[dp-1]+`) {
          return getChannel(
            getT`+dp+"("+Aa(up,fp,gp)+`),
            vec2(`+Aa(pp,fp,gp)+`));
        }`}var vp=cp.length,xp=cp[cp.length-1];mp+=`
        return getChannel(
          getT`+vp+"("+Aa(up,fp,xp)+`),
          vec2(`+Aa(pp,fp,xp)+"));",this.userCode=`
      float getValue(`+up.map(function(Sp){return"int "+Sp})+`) {
        `+mp+`
      }

      void main() {
        `+sp+` coords = getOutputCoords();
        vec4 result = vec4(getValue(`+lp+`), 0., 0., 0.);

        `+lp[ap-1]+" = "+lp[ap-1]+` + 1;
        if (`+lp[ap-1]+" < "+rp[ap-1]+`) {
          result.g = getValue(`+lp+`);
        }

        `+lp[ap-2]+" = "+lp[ap-2]+` + 1;
        if (`+lp[ap-2]+" < "+rp[ap-2]+`) {
          result.a = getValue(`+lp+`);
        }

        `+lp[ap-1]+" = "+lp[ap-1]+` - 1;
        if (`+lp[ap-2]+" < "+rp[ap-2]+` &&
            `+lp[ap-1]+" < "+rp[ap-1]+`) {
          result.b = getValue(`+lp+`);
        }
        setOutput(result);
      }
    `}}();function Aa(_d,np,rp){var ap=_d.indexOf(np);return _d.map(function(sp,lp){return lp===ap?sp+" - "+rp:sp}).join()}var Da=function(){return function(_d){this.variableNames=["x","dy"],this.outputShape=_d.filterShape;var np=_d.strideHeight,rp=_d.strideWidth,ap=_d.padInfo.top,sp=_d.padInfo.left,lp=_d.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < `+_d.batchSize+`; b++) {
          for (int yR = 0; yR < `+_d.outHeight+`; yR++) {
            int xR = wR + yR * `+np+" - "+ap+`;

            if (xR < 0 || xR >= `+_d.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+_d.outWidth+`; yC++) {
              int xC = wC + yC * `+rp+" - "+sp+`;

              if (xC < 0 || xC >= `+_d.inWidth+`) {
                continue;
              }

              if (`+lp+`) {
                float dyValue = getDy(b, yR, yC, d2);
                float xValue = getX(b, xR, xC, d1);
                dotProd += (xValue * dyValue);
              } else {
                float dyValue = getDy(b, d2, yR, yC);
                float xValue = getX(b, d1, xR, xC);
                dotProd += (xValue * dyValue);
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}(),Ta=function(){return function(_d){this.variableNames=["dy","W"],this.outputShape=_d.inShape;var np=_d.filterHeight,rp=_d.filterWidth,ap=_d.strideHeight,sp=_d.strideWidth,lp=_d.dataFormat==="channelsLast",up=np-1-_d.padInfo.top,cp=rp-1-_d.padInfo.left,dp=lp?1:2,fp=lp?2:3,pp=lp?3:1;this.userCode=`
      const ivec2 pads = ivec2(`+up+", "+cp+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[`+pp+`];

        ivec2 dyCorner = ivec2(coords[`+dp+"], coords["+fp+`]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+np+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+ap+`.0;

          if (dyR < 0.0 || dyR >= `+_d.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+np+` - 1 - wR;

          for (int wC = 0; wC < `+rp+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+sp+`.0;

            if (dyC < 0.0 || dyC >= `+_d.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+rp+` - 1 - wC;

            for (int d2 = 0; d2 < `+_d.outChannels+`; d2++) {

              if (`+lp+`) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}(),Na=function(){return function(_d){this.variableNames=["x","dy"],this.outputShape=_d.filterShape;var np=_d.strideDepth,rp=_d.strideHeight,ap=_d.strideWidth,sp=_d.padInfo.front,lp=_d.padInfo.top,up=_d.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < `+_d.batchSize+`; b++) {
          for (int yF = 0; yF < `+_d.outDepth+`; yF++) {
            int xF = wF + yF * `+np+" - "+sp+`;

            if (xF < 0 || xF >= `+_d.inDepth+`) {
              continue;
            }

            for (int yR = 0; yR < `+_d.outHeight+`; yR++) {
              int xR = wR + yR * `+rp+" - "+lp+`;

              if (xR < 0 || xR >= `+_d.inHeight+`) {
                continue;
              }

              for (int yC = 0; yC < `+_d.outWidth+`; yC++) {
                int xC = wC + yC * `+ap+" - "+up+`;

                if (xC < 0 || xC >= `+_d.inWidth+`) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}(),Fa=function(){return function(_d){this.variableNames=["dy","W"],this.outputShape=_d.inShape;var np=_d.filterDepth,rp=_d.filterHeight,ap=_d.filterWidth,sp=_d.strideDepth,lp=_d.strideHeight,up=_d.strideWidth,cp=np-1-_d.padInfo.front,dp=rp-1-_d.padInfo.top,fp=ap-1-_d.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(`+cp+", "+dp+", "+fp+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < `+np+`; wF++) {
          float dyF = float(dyFCorner + wF) / `+sp+`.0;

          if (dyF < 0.0 || dyF >= `+_d.outDepth+`.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = `+np+` - 1 - wF;

          for (int wR = 0; wR < `+rp+`; wR++) {
            float dyR = float(dyRCorner + wR) / `+lp+`.0;

            if (dyR < 0.0 || dyR >= `+_d.outHeight+`.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = `+rp+` - 1 - wR;

            for (int wC = 0; wC < `+ap+`; wC++) {
              float dyC = float(dyCCorner + wC) / `+up+`.0;

              if (dyC < 0.0 || dyC >= `+_d.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = `+ap+` - 1 - wC;

              for (int d2 = 0; d2 < `+_d.outChannels+`; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}(),Oa=function(){return function(_d){this.variableNames=["x","dy"],this.outputShape=_d.filterShape;var np=_d.strideHeight,rp=_d.strideWidth,ap=_d.padInfo.top,sp=_d.padInfo.left,lp=_d.outChannels/_d.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * `+lp+` + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < `+_d.batchSize+`; b++) {
          for (int yR = 0; yR < `+_d.outHeight+`; yR++) {
            int xR = wR + yR * `+np+" - "+ap+`;

            if (xR < 0 || xR >= `+_d.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+_d.outWidth+`; yC++) {
              int xC = wC + yC * `+rp+" - "+sp+`;

              if (xC < 0 || xC >= `+_d.inWidth+`) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}(),_a=function(){return function(_d){this.variableNames=["dy","W"],this.outputShape=_d.inShape;var np=_d.filterHeight,rp=_d.filterWidth,ap=_d.strideHeight,sp=_d.strideWidth,lp=np-1-_d.padInfo.top,up=rp-1-_d.padInfo.left,cp=_d.outChannels/_d.inChannels;this.userCode=`
      const ivec2 pads = ivec2(`+lp+", "+up+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < `+np+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+ap+`.0;

          if (dyR < 0.0 || dyR >= `+_d.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+np+` - 1 - wR;

          for (int wC = 0; wC < `+rp+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+sp+`.0;

            if (dyC < 0.0 || dyC >= `+_d.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+rp+` - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < `+cp+`; dm++) {
              int d2 = d1 * `+cp+` + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}(),Ma=function(){return function(_d,np,rp,ap){np===void 0&&(np=!1),rp===void 0&&(rp=null),ap===void 0&&(ap=!1),this.variableNames=["x","W"],this.outputShape=_d.outShape;var sp=_d.padInfo.top,lp=_d.padInfo.left,up=_d.strideHeight,cp=_d.strideWidth,dp=_d.dilationHeight,fp=_d.dilationWidth,pp=_d.filterHeight,hp=_d.filterWidth,mp=4*Math.floor(_d.inChannels/4),gp=_d.inChannels%4,vp=_d.dataFormat==="channelsLast",xp=vp?1:2,Sp=vp?2:3,yp=vp?3:1,bp="",Ep="";rp&&(bp=ap?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+rp+`
        }`:`
          float activation(float x) {
            `+rp+`
          }
        `,Ep="result = activation(result);");var wp=np?"result += getBiasAtOutCoords();":"";np&&this.variableNames.push("bias"),ap&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+bp+`

      const ivec2 strides = ivec2(`+up+", "+cp+`);
      const ivec2 pads = ivec2(`+sp+", "+lp+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[`+yp+`];

        ivec2 xRCCorner =
            ivec2(coords[`+xp+"], coords["+Sp+`]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+pp+`; wR++) {
          int xR = xRCorner + wR * `+dp+`;

          if (xR < 0 || xR >= `+_d.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+hp+`; wC++) {
            int xC = xCCorner + wC * `+fp+`;

            if (xC < 0 || xC >= `+_d.inWidth+`) {
              continue;
            }

            for (int d1 = 0; d1 < `+mp+`; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (`+vp+`) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (`+(gp===1)+`) {

              if (`+vp+`) {
                dotProd +=
                    getX(batch, xR, xC, `+mp+`) *
                    getW(wR, wC, `+mp+`, d2);
              } else {
                dotProd +=
                    getX(batch, `+mp+`, xR, xC) *
                    getW(wR, wC, `+mp+`, d2);
              }

            } else if (`+(gp===2)+`) {
              vec2 wValues = vec2(
                getW(wR, wC, `+mp+`, d2),
                getW(wR, wC, `+mp+` + 1, d2)
              );

              if (`+vp+`) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, `+mp+`),
                  getX(batch, xR, xC, `+mp+` + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, `+mp+`, xR, xC),
                  getX(batch, `+mp+` + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (`+(gp===3)+`) {
              vec3 wValues = vec3(
                getW(wR, wC, `+mp+`, d2),
                getW(wR, wC, `+mp+` + 1, d2),
                getW(wR, wC, `+mp+` + 2, d2)
              );

              if (`+vp+`) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, `+mp+`),
                  getX(batch, xR, xC, `+mp+` + 1),
                  getX(batch, xR, xC, `+mp+` + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, `+mp+`, xR, xC),
                  getX(batch, `+mp+` + 1, xR, xC),
                  getX(batch, `+mp+` + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        `+wp+`
        `+Ep+`
        setOutput(result);
      }
    `}}(),Ba=function(){return function(_d){this.variableNames=["x","W"],this.outputShape=_d.outShape;var np=_d.padInfo.front,rp=_d.padInfo.top,ap=_d.padInfo.left,sp=_d.strideDepth,lp=_d.strideHeight,up=_d.strideWidth,cp=_d.dilationDepth,dp=_d.dilationHeight,fp=_d.dilationWidth,pp=_d.filterDepth,hp=_d.filterHeight,mp=_d.filterWidth,gp=4*Math.floor(_d.inChannels/4),vp=_d.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(`+sp+", "+lp+", "+up+`);
      const ivec3 pads = ivec3(`+np+", "+rp+", "+ap+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < `+pp+`; wF++) {
          int xF = xFCorner + wF * `+cp+`;

          if (xF < 0 || xF >= `+_d.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+hp+`; wR++) {
            int xR = xRCorner + wR * `+dp+`;

            if (xR < 0 || xR >= `+_d.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+mp+`; wC++) {
              int xC = xCCorner + wC * `+fp+`;

              if (xC < 0 || xC >= `+_d.inWidth+`) {
                continue;
              }

              for (int d1 = 0; d1 < `+gp+`; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (`+(vp===1)+`) {
                dotProd +=
                  getX(batch, xF, xR, xC, `+gp+`) *
                  getW(wF, wR, wC, `+gp+`, d2);
              } else if (`+(vp===2)+`) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, `+gp+`),
                  getX(batch, xF, xR, xC, `+gp+` + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, `+gp+`, d2),
                  getW(wF, wR, wC, `+gp+` + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (`+(vp===3)+`) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, `+gp+`),
                  getX(batch, xF, xR, xC, `+gp+` + 1),
                  getX(batch, xF, xR, xC, `+gp+` + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, `+gp+`, d2),
                  getW(wF, wR, wC, `+gp+` + 1, d2),
                  getW(wF, wR, wC, `+gp+` + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}(),Pa=function(){return function(_d,np,rp,ap){np===void 0&&(np=!1),rp===void 0&&(rp=null),ap===void 0&&(ap=!1),this.variableNames=["x","W"],this.outputShape=_d.outShape;var sp=_d.inHeight,lp=_d.inWidth,up=_d.padInfo.top,cp=_d.padInfo.left,dp=_d.strideHeight,fp=_d.strideWidth,pp=_d.dilationHeight,hp=_d.dilationWidth,mp=_d.filterHeight,gp=_d.filterWidth,vp=_d.outChannels/_d.inChannels,xp="",Sp="";rp&&(xp=ap?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+rp+`
        }`:`
          float activation(float x) {
            `+rp+`
          }
        `,Sp="result = activation(result);");var yp=np?"result += getBiasAtOutCoords();":"";np&&this.variableNames.push("bias"),ap&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+xp+`

      const ivec2 strides = ivec2(`+dp+", "+fp+`);
      const ivec2 pads = ivec2(`+up+", "+cp+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / `+vp+`;
        int q = d2 - d1 * `+vp+`;

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < `+mp+`; wR++) {
          int xR = xRCorner + wR * `+pp+`;

          if (xR < 0 || xR >= `+sp+`) {
            continue;
          }

          for (int wC = 0; wC < `+gp+`; wC++) {
            int xC = xCCorner + wC * `+hp+`;

            if (xC < 0 || xC >= `+lp+`) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        `+yp+`
        `+Sp+`
        setOutput(result);
      }
    `}}(),La=function(){return function(_d,np,rp,ap){np===void 0&&(np=!1),rp===void 0&&(rp=null),ap===void 0&&(ap=!1),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=_d.outShape;for(var sp=_d.inHeight,lp=_d.inWidth,up=_d.padInfo.top,cp=_d.padInfo.left,dp=_d.strideHeight,fp=_d.strideWidth,pp=_d.dilationHeight,hp=_d.dilationWidth,mp=_d.filterHeight,gp=_d.filterWidth,vp=gp,xp="int xR; int xC; int xCOffset;",Sp=0;Sp<mp;Sp++)for(var yp=0;yp<gp;yp++)xp+=`
          vec4 xTexelR`+Sp+"C"+2*yp+` = vec4(0.);
          vec4 wR`+Sp+"C"+yp+` = vec4(0.);
          vec4 xR`+Sp+"C"+yp+" = vec4(0.);";for(Sp=0;Sp<mp;Sp++)for(var bp=0;bp<vp;bp++){if(xp+=`
          xR = xRCorner + `+Sp*pp+`;
          xC = xCCorner + `+(yp=2*bp)*hp+`;
        `,fp===1){if(yp<gp&&(xp+=cp%2==1?`
                xCOffset = xC + 1;
                if(xR >= 0 && xR < `+sp+" && xCOffset >= 0 && xCOffset < "+lp+`) {
                  xTexelR`+Sp+"C"+yp+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+Sp+"C"+yp+` = vec4(0.);
                }

                xCOffset = xC + 1 - 2;
                if(xR >= 0 && xR < `+sp+" && xCOffset >= 0 && xCOffset < "+lp+`) {
                  vec4 previous = getX(batch, xR, xCOffset, d1);
                  xR`+Sp+"C"+yp+" = vec4(previous.zw, xTexelR"+Sp+"C"+yp+`.xy);
                } else {
                  xR`+Sp+"C"+yp+" = vec4(0, 0, xTexelR"+Sp+"C"+yp+`.xy);
                }
              `:`
                if(xR >= 0 && xR < `+sp+" && xC >= 0 && xC < "+lp+`) {
                  xTexelR`+Sp+"C"+yp+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+Sp+"C"+yp+` = vec4(0.);
                }

                xR`+Sp+"C"+yp+" = xTexelR"+Sp+"C"+yp+`;
              `,yp+1<gp)){var Ep=cp%2==0?v$1(hp):hp;hp%2==0&&cp%2==1||hp%2!=0&&cp%2!=1?(xp+=`
                  xCOffset = xC + `+cp%2+" + "+Ep+`;

                  if(xR >= 0 && xR < `+sp+` &&
                    xCOffset >= 0 && xCOffset < `+lp+`) {
                    xTexelR`+Sp+"C"+(yp+2)+` = getX(batch, xR, xCOffset, d1);
                  }
                `,hp>1&&(xp+=`
                    xCOffset -= 2;
                    if(xR >= 0 && xR < `+sp+` &&
                      xCOffset >= 0 && xCOffset < `+lp+`) {
                      xTexelR`+Sp+"C"+yp+` = getX(batch, xR, xCOffset, d1);
                    } else {
                      xTexelR`+Sp+"C"+yp+` = vec4(0.);
                    }
                  `),xp+=`
                  xR`+Sp+"C"+(yp+1)+` = vec4(
                    xTexelR`+Sp+"C"+yp+".zw, xTexelR"+Sp+"C"+(yp+2)+`.xy);
                `):xp+=`
                  xCOffset = xC + `+Ep+`;

                  if(xR >= 0 && xR < `+sp+` &&
                    xCOffset >= 0 && xCOffset < `+lp+`) {
                    xTexelR`+Sp+"C"+(yp+2)+` = getX(batch, xR, xCOffset, d1);
                  }

                  xR`+Sp+"C"+(yp+1)+" = xTexelR"+Sp+"C"+(yp+2)+`;
                `}}else yp<gp&&(xp+=`
              if(xR >= 0 && xR < `+sp+`) {
            `,cp%2==1?(xp+=`
                xCOffset = xC + 1 - `+fp+`;
                if(xCOffset >= 0 && xCOffset < `+lp+`) {
                  xTexelR`+Sp+"C"+yp+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+Sp+"C"+yp+` = vec4(0.);
                }

                if(xC + 1 >= 0 && xC + 1 < `+lp+`) {
                  xTexelR`+Sp+"C"+(yp+2)+` = getX(batch, xR, xC + 1, d1);
                } else {
                  xTexelR`+Sp+"C"+(yp+2)+` = vec4(0.);
                }

                xR`+Sp+"C"+yp+` = vec4(
                  xTexelR`+Sp+"C"+yp+".zw, xTexelR"+Sp+"C"+(yp+2)+`.zw);
              `,yp+1<gp&&(xp+=`
                  vec4 final = vec4(0.);
                  xCOffset = xC + 1 + `+fp+`;
                  if(xCOffset >= 0 && xCOffset < `+lp+`) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xR`+Sp+"C"+(yp+1)+" = vec4(xTexelR"+Sp+"C"+(yp+2)+`.xy, final.xy);
                `)):(xp+=`
                if(xC >= 0 && xC < `+lp+`) {
                  xTexelR`+Sp+"C"+yp+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+Sp+"C"+yp+` = vec4(0.);
                }

                xCOffset = xC + `+fp+`;
                if(xCOffset >= 0 && xCOffset < `+lp+`) {
                  xTexelR`+Sp+"C"+(yp+2)+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+Sp+"C"+(yp+2)+` = vec4(0.);
                }

                xR`+Sp+"C"+yp+` = vec4(
                  xTexelR`+Sp+"C"+yp+".xy, xTexelR"+Sp+"C"+(yp+2)+`.xy);
              `,yp+1<gp&&(xp+=`
                  xR`+Sp+"C"+(yp+1)+` = vec4(
                    xTexelR`+Sp+"C"+yp+".zw, xTexelR"+Sp+"C"+(yp+2)+`.zw);
                `)),xp+="}");yp<gp&&(xp+=`
            vec4 wTexelR`+Sp+"C"+yp+" = getW("+Sp+", "+yp+`, d1, q);
            wR`+Sp+"C"+yp+" = vec4(wTexelR"+Sp+"C"+yp+".xz, wTexelR"+Sp+"C"+yp+`.xz);
          `,yp+1<gp&&(xp+=`
              vec4 wTexelR`+Sp+"C"+(yp+1)+" = getW("+Sp+", "+(yp+1)+`, d1, q);
              wR`+Sp+"C"+(yp+1)+` =
                vec4(wTexelR`+Sp+"C"+(yp+1)+".xz, wTexelR"+Sp+"C"+(yp+1)+".xz);"))}for(Sp=0;Sp<mp;Sp++)for(yp=0;yp<gp;yp++)xp+="dotProd += xR"+Sp+"C"+yp+" * wR"+Sp+"C"+yp+";";var wp="",_p="";rp&&(wp=ap?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+rp+`
        }`:`vec4 activation(vec4 x) {
          `+rp+`
        }`,_p="result = activation(result);");var Cp=np?"result += getBiasAtOutCoords();":"";np&&this.variableNames.push("bias"),ap&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+wp+`

      const ivec2 strides = ivec2(`+dp+", "+fp+`);
      const ivec2 pads = ivec2(`+up+", "+cp+`);

      void main() {

        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2;
        int q = 0;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        vec4 dotProd = vec4(0.);

        `+xp+`

        vec4 result = dotProd;
        `+Cp+`
        `+_p+`
        setOutput(result);
      }
    `}}(),Wa=function(){return function(_d,np,rp,ap,sp){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var lp=_d[0],up=_d[1],cp=_d[2],dp=_d[3],fp=np[0],pp=rp[0],hp=rp[1];this.outputShape=[fp,pp,hp,dp];var mp=ap==="bilinear"?1:0,gp=[up-1+".0",cp-1+".0"],vp=gp[0],xp=gp[1],Sp=pp>1?[""+(up-1)/(pp-1),"(y2-y1) * height_ratio","y1*"+vp+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+vp],yp=Sp[0],bp=Sp[1],Ep=Sp[2],wp=hp>1?[""+(cp-1)/(hp-1),"(x2-x1) * width_ratio","x1*"+xp+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+xp],_p=wp[0],Cp=wp[1],$p=wp[2];this.userCode=`
      const float height_ratio = float(`+yp+`);
      const float width_ratio = float(`+_p+`);
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= `+lp+`) {
          return;
        }

        float height_scale = `+bp+`;
        float width_scale = `+Cp+`;

        float in_y = `+Ep+`;
        if( in_y < 0.0 || in_y > `+vp+` ) {
          setOutput(float(`+sp+`));
          return;
        }
        float in_x = `+$p+`;
        if( in_x < 0.0 || in_x > `+xp+` ) {
          setOutput(float(`+sp+`));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(`+mp+` == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}(),Ua=function(){return function(_d,np,rp){this.variableNames=["x"],this.outputShape=_d;var ap=_d.length,sp=_d[_d.length-1],lp=rp?"<":">";this.userCode=`
      int getIndex(int i) {
        `+(rp?"return "+sp+" -i - 1;":"return i;")+`
      }

      void main() {
        `+aa(ap)+` coords = getOutputCoords();
        int end = `+Va(ap,"coords")+`;
        float val = 0.0;
        for (int i = `+sp+` - 1; i >= 0; i -= 1) {
          int idx = getIndex(i);
          if (idx `+lp+` end) {
            continue;
          }
          if (idx == end && `+np+`) {
            continue;
          }
          `+Va(ap,"coords")+` = idx;
          val += getX(`+function(up,cp){if(up===1)return""+cp;if(up===2)return cp+".x, "+cp+".y";if(up===3)return cp+".x, "+cp+".y, "+cp+".z";if(up===4)return cp+".x, "+cp+".y, "+cp+".z, "+cp+".w";throw Error("Cumulative sum for rank "+up+" is not yet supported")}(ap,"coords")+`);
        }
        setOutput(val);
      }
    `}}();function Va(_d,np){if(_d===1)return""+np;if(_d===2)return np+".y";if(_d===3)return np+".z";if(_d===4)return np+".w";throw Error("Cumulative sum for rank "+_d+" is not yet supported")}var za=function(){return function(_d){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=_t.DENSE;var np=Gt(_d),rp=Ko();this.outputShape=_d,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+jo(["r","c","d"],_d)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+np[0]+", "+np[1]+`));
        int index = 4 * (resTexRC.x * `+np[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        `+rp.output+` = result;
      }
    `}}(),Ga=function(){return function(_d){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=_t.DENSE;var np=Gt(_d),rp=Ko();this.outputShape=_d,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+jo(["r","c","d"],_d)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+np[0]+", "+np[1]+`));
        int index = 4 * (resTexRC.x * `+np[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        `+rp.output+` = result;
      }
    `}}(),Ha=function(){function _d(np,rp,ap){this.variableNames=["x"],this.outputShape=[],this.outputShape=np,this.blockSize=rp,this.dataFormat=ap,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = `+this.getHeightCoordString()+`;
      int w = `+this.getWidthCoordString()+`;
      int d = `+this.getDepthCoordString()+`;

      int in_h = h / `+rp+`;
      int offset_h = imod(h, `+rp+`);
      int in_w = w / `+rp+`;
      int offset_w = imod(w, `+rp+`);
      int offset_d = (offset_h * `+rp+` + offset_w) *
        `+this.getOutputDepthSize()+`;
      int in_d = d + offset_d;

      float result = `+this.getInputSamplingString()+`;
      setOutput(result);
    }
  `}return _d.prototype.getHeightCoordString=function(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"},_d.prototype.getWidthCoordString=function(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"},_d.prototype.getDepthCoordString=function(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"},_d.prototype.getOutputDepthSize=function(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]},_d.prototype.getInputSamplingString=function(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},_d}(),qa=function(){return function(_d){this.variableNames=["X"],this.outputShape=[_d,_d],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}(),Ka=function(){return function(_d){this.variableNames=["A"],this.outTexUsage=Mt.DOWNLOAD;var np=Ko();this.outputShape=_d,this.userCode=`
      `+$o+`

      void main() {
        float x = getAAtOutCoords();
        `+np.output+` = encode_float(x);
      }
    `}}(),ja=function(){return function(_d){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=Mt.DOWNLOAD;var np=Ko();this.outputShape=_d,this.userCode=`
      `+$o+`

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        `+np.output+` = encode_float(x);
      }
    `}}(),Xa=function(){return function(_d,np,rp){rp===void 0&&(rp=!1),this.variableNames=["A"];var ap=Ko(),sp=np[0],lp=np[1];this.outputShape=_d;var up="result";rp&&(up="floor(result * 255. + 0.5)"),this.userCode=`
      `+Xo(_d)+`

      void main() {
        ivec3 coords = getOutputCoords();

        int flatIndex = getFlatIndex(coords);
        int offset = imod(flatIndex, 4);

        flatIndex = idiv(flatIndex, 4, 1.);
        
        int r = flatIndex / `+lp+`;
        int c = imod(flatIndex, `+lp+`);
        vec2 uv = (vec2(c, r) + halfCR) / vec2(`+lp+".0, "+sp+`.0);
        vec4 values = `+ap.texture2D+`(A, uv);

        float result;

        if(offset == 0) {
          result = values[0];
        } else if(offset == 1) {
          result = values[1];
        } else if(offset == 2) {
          result = values[2];
        } else {
          result = values[3];
        }

        `+ap.output+" = vec4("+up+`, 0., 0., 0.);
      }
    `}}(),$a=function(){return function(_d,np,rp){rp===void 0&&(rp=!1),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var ap=Ko(),sp=np[0],lp=np[1];this.outputShape=_d;var up="",cp="result";rp&&(cp="floor(result * 255. + 0.5)");for(var dp=0;dp<=1;dp++)for(var fp=0;fp<=1;fp++){var pp=2*dp+fp;up+=`
          localCoords = coords;
          if(localCoords[2] + `+fp+" < "+_d[2]+`) {
            localCoords[2] += `+fp+`;
            if(localCoords[1] + `+dp+" < "+_d[1]+`) {
              localCoords[1] += `+dp+`;

              flatIndex = getFlatIndex(localCoords);
              offset = imod(flatIndex, 4);

              flatIndex = idiv(flatIndex, 4, 1.);

              r = flatIndex / `+lp+`;
              c = imod(flatIndex, `+lp+`);
              uv = (vec2(c, r) + halfCR) / vec2(`+lp+".0, "+sp+`.0);
              values = `+ap.texture2D+`(A, uv);

              if(offset == 0) {
                result[`+pp+`] = values[0];
              } else if(offset == 1) {
                result[`+pp+`] = values[1];
              } else if(offset == 2) {
                result[`+pp+`] = values[2];
              } else {
                result[`+pp+`] = values[3];
              }
            }
          }
        `}this.userCode=`
      `+Xo(_d)+`

      void main() {
        ivec3 coords = getOutputCoords();

        vec4 result = vec4(0.);
        int flatIndex, r, c, offset;
        ivec3 localCoords;
        vec2 uv;
        vec4 values;

        `+up+`

        `+ap.output+" = "+cp+`;
      }
    `}}(),Ya="return real * expR - imag * expI;",Qa="return real * expI + imag * expR;",Ja=function(){return function(_d,np,rp){this.variableNames=["real","imag"];var ap=np[1];this.outputShape=np;var sp=rp?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,lp=rp?ap+".0":"1.0";this.userCode=`
      const float exponentMultiplier = `+sp+`;

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        `+_d+`
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(`+ap+`);
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < `+ap+`; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / `+lp+`;
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}(),Za=function(){function _d(np,rp){this.outputShape=[],this.variableNames=["x"],this.outputShape=np,this.userCode=`
      uniform float value;
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}return _d.prototype.getCustomSetupFunc=function(np){var rp=this;return function(ap,sp){rp.valueLoc==null&&(rp.valueLoc=ap.getUniformLocationNoThrow(sp,"value")),ap.gl.uniform1f(rp.valueLoc,np)}},_d}(),ti=function(){return function(_d){this.variableNames=["A"];var np=Ko(),rp=_d[0],ap=_d[1];this.outputShape=_d,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+ap+".0, "+rp+`.0);

        vec4 values = `+np.texture2D+`(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}(),ei=function(){return function(_d){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var np=Ko(),rp=_d[0],ap=_d[1];this.outputShape=_d,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(`+ap+".0, "+rp+`.0);
            vec4 values = `+np.texture2D+`(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        `+np.output+` = result;
      }
    `}}(),ni=function(){return function(_d,np,rp){this.variableNames=["A","indices"];var ap=_d.slice();ap[rp]=np,this.outputShape=ap,this.rank=ap.length;var sp=aa(this.rank),lp=function(up,cp){var dp=up.length;if(dp>4)throw Error("Gather for rank "+dp+" is not yet supported");if(dp===1)return"int(getIndices(resRC))";for(var fp=["resRC.x","resRC.y","resRC.z","resRC.w"],pp=[],hp=0;hp<up.length;hp++)hp===cp?pp.push("int(getIndices("+fp[hp]+"))"):pp.push(""+fp[hp]);return pp.join()}(_d,rp);this.userCode=`
      void main() {
        `+sp+` resRC = getOutputCoords();
        setOutput(getA(`+lp+`));
      }
    `}}(),ri=function(){return function(_d,np,rp){this.sliceDim=_d,this.strides=np,this.variableNames=["x","indices"],this.outputShape=rp;var ap=aa(np.length),sp=aa(rp.length),lp=this.sliceDim>1?"strides[j]":"strides";this.userCode=`
        `+ap+" strides = "+ap+"("+this.strides+`);
         void main() {
          `+sp+` coords = getOutputCoords();
          int flattenIndex = 0;
          for (int j = 0; j < `+this.sliceDim+`; j++) {
            int index = round(getIndices(coords[0], j));
            flattenIndex += index * `+lp+`;
          }
          setOutput(getX(flattenIndex, coords[1]));
        }
      `}}();function oi(_d,np){var rp=Ko();return Jt(_d,np,rp.version+`
    precision highp float;
    `+rp.attribute+` vec3 clipSpacePos;
    `+rp.attribute+` vec2 uv;
    `+rp.varyingVs+` vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`)}function ai(_d,np){return ie(_d,np,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function ii(_d,np){return ue(_d,np,new Uint16Array([0,1,2,2,1,3]))}function ui(_d,np,rp,ap,sp,lp,up){ce(rp,ap);var cp=se(_d,np),dp=_d.TEXTURE_2D;return Kt(_d,np,function(){return _d.bindTexture(dp,cp)}),Kt(_d,np,function(){return _d.texParameteri(dp,_d.TEXTURE_WRAP_S,_d.CLAMP_TO_EDGE)}),Kt(_d,np,function(){return _d.texParameteri(dp,_d.TEXTURE_WRAP_T,_d.CLAMP_TO_EDGE)}),Kt(_d,np,function(){return _d.texParameteri(dp,_d.TEXTURE_MIN_FILTER,_d.NEAREST)}),Kt(_d,np,function(){return _d.texParameteri(dp,_d.TEXTURE_MAG_FILTER,_d.NEAREST)}),Kt(_d,np,function(){return _d.texImage2D(dp,0,sp,rp,ap,0,lp,up,null)}),Kt(_d,np,function(){return _d.bindTexture(_d.TEXTURE_2D,null)}),cp}function si(_d,np,rp,ap,sp){var lp=zt(rp,ap);return ui(_d,np,lp[0],lp[1],sp.internalFormatFloat,sp.textureFormatFloat,_d.FLOAT)}function ci(_d,np,rp,ap,sp){var lp=zt(rp,ap);return ui(_d,np,lp[0],lp[1],sp.internalFormatHalfFloat,sp.textureFormatFloat,sp.textureTypeHalfFloat)}function li(_d,np,rp,ap,sp){var lp=zt(rp,ap);return ui(_d,np,lp[0],lp[1],_d.RGBA,_d.RGBA,_d.UNSIGNED_BYTE)}function hi(_d,np,rp,ap,sp){var lp=Ht(rp,ap);return ui(_d,np,lp[0],lp[1],sp.internalFormatPackedFloat,_d.RGBA,_d.FLOAT)}function fi(_d,np,rp,ap,sp){var lp=Ht(rp,ap);return ui(_d,np,lp[0],lp[1],sp.internalFormatPackedHalfFloat,_d.RGBA,sp.textureTypeHalfFloat)}function pi(_d,np,rp,ap){return Kt(_d,np,function(){return _d.bindBuffer(_d.ARRAY_BUFFER,ap)}),he(_d,np,rp,"clipSpacePos",ap,3,20,0)&&he(_d,np,rp,"uv",ap,2,20,12)}function di(_d,np,rp,ap,sp,lp,up){var cp,dp,fp;Kt(_d,np,function(){return _d.bindTexture(_d.TEXTURE_2D,rp)}),lp instanceof Uint8Array?(cp=new Uint8Array(ap*sp*4),dp=_d.UNSIGNED_BYTE,fp=_d.RGBA):(cp=new Float32Array(ap*sp*4),dp=_d.FLOAT,fp=up.internalFormatPackedFloat),cp.set(lp),Kt(_d,np,function(){return _d.texImage2D(_d.TEXTURE_2D,0,fp,ap,sp,0,_d.RGBA,dp,cp)}),Kt(_d,np,function(){return _d.bindTexture(_d.TEXTURE_2D,null)})}function vi(_d,np,rp,ap){Kt(_d,np,function(){return _d.bindTexture(_d.TEXTURE_2D,rp)}),ap.data instanceof Uint8Array?Kt(_d,np,function(){return _d.texImage2D(_d.TEXTURE_2D,0,_d.RGBA,ap.width,ap.height,0,_d.RGBA,_d.UNSIGNED_BYTE,ap.data)}):Kt(_d,np,function(){return _d.texImage2D(_d.TEXTURE_2D,0,_d.RGBA,_d.RGBA,_d.UNSIGNED_BYTE,ap)}),Kt(_d,np,function(){return _d.bindTexture(_d.TEXTURE_2D,null)})}function mi(_d,np,rp,ap,sp){var lp=_d.createBuffer();Kt(_d,np,function(){return _d.bindBuffer(_d.PIXEL_PACK_BUFFER,lp)});var up=16*rp*ap;return Kt(_d,np,function(){return _d.bufferData(_d.PIXEL_PACK_BUFFER,up,_d.STREAM_READ)}),Kt(_d,np,function(){return _d.readPixels(0,0,ap,rp,_d.RGBA,_d.FLOAT,0)}),Kt(_d,np,function(){return _d.bindBuffer(_d.PIXEL_PACK_BUFFER,null)}),lp}function gi(_d,np,rp){var ap=_d,sp=new Float32Array(rp);return ap.bindBuffer(ap.PIXEL_PACK_BUFFER,np),ap.getBufferSubData(ap.PIXEL_PACK_BUFFER,0,sp),ap.bindBuffer(ap.PIXEL_PACK_BUFFER,null),sp}function yi(_d,np,rp,ap,sp){var lp=zt(rp,ap),up=lp[0],cp=lp[1],dp=new Uint8Array(rp*ap*4);return Kt(_d,np,function(){return _d.readPixels(0,0,up,cp,sp.downloadTextureFormat,_d.UNSIGNED_BYTE,dp)}),new Float32Array(dp.buffer)}function xi(_d,np,rp,ap,sp,lp,up,cp){var dp=_d,fp=new Float32Array(function(pp,hp){var mp=Ht(pp,hp);return mp[0]*mp[1]*4}(lp,up));return dp.bindBuffer(dp.PIXEL_PACK_BUFFER,np),dp.getBufferSubData(dp.PIXEL_PACK_BUFFER,0,fp),dp.bindBuffer(dp.PIXEL_PACK_BUFFER,null),fp}function bi(_d,np,rp,ap){var sp=new Float32Array(rp*ap*4);return Kt(_d,np,function(){return _d.readPixels(0,0,ap,rp,_d.RGBA,_d.FLOAT,sp)}),sp}var wi=Object.freeze({createVertexShader:oi,createVertexBuffer:ai,createIndexBuffer:ii,createFloat32MatrixTexture:si,createFloat16MatrixTexture:ci,createUnsignedBytesMatrixTexture:li,createPackedMatrixTexture:hi,createFloat16PackedMatrixTexture:fi,bindVertexProgramAttributeStreams:pi,uploadDenseMatrixToTexture:di,uploadPixelDataToTexture:vi,createBufferFromOutputTexture:mi,downloadFloat32MatrixFromBuffer:gi,downloadByteEncodedFloatMatrixFromOutputTexture:yi,downloadPackedMatrixFromBuffer:xi,downloadMatrixFromPackedOutputTexture:bi}),Ci=function(){function _d(np){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var rp=a$1().getNumber("WEBGL_VERSION");if(np!=null?(this.gl=np,Wt(rp,np)):this.gl=Ut(rp),a$1().getNumber("WEBGL_VERSION")===1)this.textureFloatExtension=Qt(this.gl,this.debug,"OES_texture_float"),this.colorBufferFloatExtension=this.gl.getExtension("WEBGL_color_buffer_float"),this.textureHalfFloatExtension=Qt(this.gl,this.debug,"OES_texture_half_float"),this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float");else if(Ne(this.gl,"EXT_color_buffer_float"))this.colorBufferFloatExtension=this.gl.getExtension("EXT_color_buffer_float");else{if(!Ne(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=ai(this.gl,this.debug),this.indexBuffer=ii(this.gl,this.debug),this.framebuffer=le(this.gl,this.debug),this.textureConfig=qt(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(_d.prototype,"debug",{get:function(){return a$1().getBool("DEBUG")},enumerable:!0,configurable:!0}),_d.prototype.dispose=function(){var np=this;if(!this.disposed){this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var rp=this.gl;Kt(rp,this.debug,function(){return rp.finish()}),Kt(rp,this.debug,function(){return rp.bindFramebuffer(rp.FRAMEBUFFER,null)}),Kt(rp,this.debug,function(){return rp.deleteFramebuffer(np.framebuffer)}),Kt(rp,this.debug,function(){return rp.bindBuffer(rp.ARRAY_BUFFER,null)}),Kt(rp,this.debug,function(){return rp.bindBuffer(rp.ELEMENT_ARRAY_BUFFER,null)}),Kt(rp,this.debug,function(){return rp.deleteBuffer(np.indexBuffer)}),this.disposed=!0}},_d.prototype.createFloat32MatrixTexture=function(np,rp){return this.throwIfDisposed(),si(this.gl,this.debug,np,rp,this.textureConfig)},_d.prototype.createFloat16MatrixTexture=function(np,rp){return this.throwIfDisposed(),ci(this.gl,this.debug,np,rp,this.textureConfig)},_d.prototype.createUnsignedBytesMatrixTexture=function(np,rp){return this.throwIfDisposed(),li(this.gl,this.debug,np,rp,this.textureConfig)},_d.prototype.uploadPixelDataToTexture=function(np,rp){this.throwIfDisposed(),vi(this.gl,this.debug,np,rp)},_d.prototype.uploadDenseMatrixToTexture=function(np,rp,ap,sp){this.throwIfDisposed(),di(this.gl,this.debug,np,rp,ap,sp,this.textureConfig)},_d.prototype.createFloat16PackedMatrixTexture=function(np,rp){return this.throwIfDisposed(),fi(this.gl,this.debug,np,rp,this.textureConfig)},_d.prototype.createPackedMatrixTexture=function(np,rp){return this.throwIfDisposed(),hi(this.gl,this.debug,np,rp,this.textureConfig)},_d.prototype.deleteMatrixTexture=function(np){var rp=this;this.throwIfDisposed(),this.outputTexture===np&&(ge(this.gl,this.debug,this.framebuffer),this.outputTexture=null),Kt(this.gl,this.debug,function(){return rp.gl.deleteTexture(np)})},_d.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(np,rp,ap){var sp=this;return this.downloadMatrixDriver(np,function(){return yi(sp.gl,sp.debug,rp,ap,sp.textureConfig)})},_d.prototype.downloadPackedMatrixFromBuffer=function(np,rp,ap,sp,lp,up){return xi(this.gl,np,0,0,0,lp,up,this.textureConfig)},_d.prototype.downloadFloat32MatrixFromBuffer=function(np,rp){return gi(this.gl,np,rp)},_d.prototype.createBufferFromTexture=function(np,rp,ap){this.bindTextureToFrameBuffer(np);var sp=mi(this.gl,this.debug,rp,ap,this.textureConfig);return this.unbindTextureToFrameBuffer(),sp},_d.prototype.createAndWaitForFence=function(){var np=this.createFence(this.gl);return this.pollFence(np)},_d.prototype.createFence=function(np){var rp,ap,sp=this;if(a$1().getBool("WEBGL_FENCE_API_ENABLED")){var lp=np,up=lp.fenceSync(lp.SYNC_GPU_COMMANDS_COMPLETE,0);np.flush(),ap=function(){var cp=lp.clientWaitSync(up,0,0);return cp===lp.ALREADY_SIGNALED||cp===lp.CONDITION_SATISFIED},rp=up}else a$1().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(rp=this.beginQuery(),this.endQuery(),ap=function(){return sp.isQueryAvailable(rp,a$1().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):ap=function(){return!0};return{query:rp,isFencePassed:ap}},_d.prototype.downloadMatrixFromPackedTexture=function(np,rp,ap){var sp=this;return this.downloadMatrixDriver(np,function(){return bi(sp.gl,sp.debug,rp,ap)})},_d.prototype.createProgram=function(np){this.throwIfDisposed();var rp=this.gl,ap=Zt(rp,this.debug,np),sp=oi(rp,this.debug),lp=re$2(rp,this.debug);return Kt(rp,this.debug,function(){return rp.attachShader(lp,sp)}),Kt(rp,this.debug,function(){return rp.attachShader(lp,ap)}),oe(rp,this.debug,lp),this.debug&&ae(rp,this.debug,lp),this.vertexAttrsAreBound||(this.setProgram(lp),this.vertexAttrsAreBound=pi(rp,this.debug,this.program,this.vertexBuffer)),lp},_d.prototype.deleteProgram=function(np){var rp=this;this.throwIfDisposed(),np===this.program&&(this.program=null),np!=null&&Kt(this.gl,this.debug,function(){return rp.gl.deleteProgram(np)})},_d.prototype.setProgram=function(np){var rp=this;this.throwIfDisposed(),this.program=np,this.program!=null&&this.debug&&ae(this.gl,this.debug,this.program),Kt(this.gl,this.debug,function(){return rp.gl.useProgram(np)})},_d.prototype.getUniformLocation=function(np,rp,ap){return ap===void 0&&(ap=!0),this.throwIfDisposed(),ap?pe(this.gl,this.debug,np,rp):de(this.gl,np,rp)},_d.prototype.getAttributeLocation=function(np,rp){var ap=this;return this.throwIfDisposed(),Kt(this.gl,this.debug,function(){return ap.gl.getAttribLocation(np,rp)})},_d.prototype.getUniformLocationNoThrow=function(np,rp){return this.throwIfDisposed(),this.gl.getUniformLocation(np,rp)},_d.prototype.setInputMatrixTexture=function(np,rp,ap){this.throwIfDisposed(),this.throwIfNoProgram(),ve(this.gl,this.debug,this.program,np,rp,ap)},_d.prototype.setOutputMatrixTexture=function(np,rp,ap){this.setOutputMatrixTextureDriver(np,ap,rp)},_d.prototype.setOutputPackedMatrixTexture=function(np,rp,ap){this.throwIfDisposed();var sp=Ht(rp,ap),lp=sp[0],up=sp[1];this.setOutputMatrixTextureDriver(np,lp,up)},_d.prototype.setOutputMatrixWriteRegion=function(np,rp,ap,sp){this.setOutputMatrixWriteRegionDriver(ap,np,sp,rp)},_d.prototype.setOutputPackedMatrixWriteRegion=function(np,rp,ap,sp){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},_d.prototype.debugValidate=function(){this.program!=null&&ae(this.gl,this.debug,this.program),ye(this.gl)},_d.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var np=this.gl;this.debug&&this.debugValidate(),Kt(np,this.debug,function(){return np.drawElements(np.TRIANGLES,6,np.UNSIGNED_SHORT,0)})},_d.prototype.blockUntilAllProgramsCompleted=function(){var np=this;this.throwIfDisposed(),Kt(this.gl,this.debug,function(){return np.gl.finish()})},_d.prototype.getQueryTimerExtension=function(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=Qt(this.gl,this.debug,a$1().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},_d.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},_d.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},_d.prototype.beginQuery=function(){if(a$1().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){var np=this.gl,rp=this.getQueryTimerExtensionWebGL2(),ap=np.createQuery();return np.beginQuery(rp.TIME_ELAPSED_EXT,ap),ap}var sp=this.getQueryTimerExtensionWebGL1(),lp=sp.createQueryEXT();return sp.beginQueryEXT(sp.TIME_ELAPSED_EXT,lp),lp},_d.prototype.endQuery=function(){if(a$1().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")!==2){var np=this.getQueryTimerExtensionWebGL1();np.endQueryEXT(np.TIME_ELAPSED_EXT)}else{var rp=this.gl,ap=this.getQueryTimerExtensionWebGL2();rp.endQuery(ap.TIME_ELAPSED_EXT)}},_d.prototype.waitForQueryAndGetTime=function(np){return n$1(this,void 0,void 0,function(){var rp=this;return r(this,function(ap){switch(ap.label){case 0:return[4,S(function(){return rp.disposed||rp.isQueryAvailable(np,a$1().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))})];case 1:return ap.sent(),[2,this.getQueryTime(np,a$1().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}})})},_d.prototype.getQueryTime=function(np,rp){if(rp===0)return null;if(rp===2){var ap=this.gl;return ap.getQueryParameter(np,ap.QUERY_RESULT)/1e6}var sp=this.getQueryTimerExtensionWebGL1();return sp.getQueryObjectEXT(np,sp.QUERY_RESULT_EXT)/1e6},_d.prototype.isQueryAvailable=function(np,rp){if(rp===0)return!0;if(rp===2){var ap=this.gl,sp=this.getQueryTimerExtensionWebGL2(),lp=ap.getQueryParameter(np,ap.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(sp.GPU_DISJOINT_EXT)),lp&&!this.disjoint}return lp=(sp=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(np,sp.QUERY_RESULT_AVAILABLE_EXT),this.disjoint==null&&(this.disjoint=this.gl.getParameter(sp.GPU_DISJOINT_EXT)),lp&&!this.disjoint},_d.prototype.pollFence=function(np){var rp=this;return new Promise(function(ap){rp.addItemToPoll(function(){return np.isFencePassed()},function(){return ap()})})},_d.prototype.pollItems=function(){for(var np=function(ap){for(var sp=0;sp<ap.length;++sp){var lp=ap[sp]();if(!lp)break}return sp-1}(this.itemsToPoll.map(function(ap){return ap.isDoneFn})),rp=0;rp<=np;++rp)(0,this.itemsToPoll[rp].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(np+1)},_d.prototype.addItemToPoll=function(np,rp){var ap=this;this.itemsToPoll.push({isDoneFn:np,resolveFn:rp}),this.itemsToPoll.length>1||S(function(){return ap.pollItems(),ap.itemsToPoll.length===0})},_d.prototype.bindTextureToFrameBuffer=function(np){this.throwIfDisposed(),me(this.gl,this.debug,np,this.framebuffer),this.debug&&ye(this.gl)},_d.prototype.unbindTextureToFrameBuffer=function(){this.outputTexture!=null?(me(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&ye(this.gl)):ge(this.gl,this.debug,this.framebuffer)},_d.prototype.downloadMatrixDriver=function(np,rp){this.bindTextureToFrameBuffer(np);var ap=rp();return this.unbindTextureToFrameBuffer(),ap},_d.prototype.setOutputMatrixTextureDriver=function(np,rp,ap){this.throwIfDisposed();var sp=this.gl;me(sp,this.debug,np,this.framebuffer),this.debug&&ye(sp),this.outputTexture=np,Kt(sp,this.debug,function(){return sp.viewport(0,0,rp,ap)}),Kt(sp,this.debug,function(){return sp.scissor(0,0,rp,ap)})},_d.prototype.setOutputMatrixWriteRegionDriver=function(np,rp,ap,sp){var lp=this;this.throwIfDisposed(),Kt(this.gl,this.debug,function(){return lp.gl.scissor(np,rp,ap,sp)})},_d.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},_d.prototype.throwIfNoProgram=function(){if(this.program==null)throw new Error("No GPU program is currently set.")},_d}();function Ei(_d,np){if(_d.length!==np.length)throw Error("Binary was compiled with "+_d.length+" inputs, but was executed with "+np.length+" inputs");_d.forEach(function(rp,ap){var sp=rp.logicalShape,lp=np[ap],up=lp.shape;if(!C(sp,up))throw Error("Binary was compiled with different shapes than the current args. Shapes "+sp+" and "+up+" must match");if(!rp.isUniform||!lp.isUniform){var cp=rp.texShape,dp=lp.isUniform?null:lp.texData.texShape;if(!C(cp,dp))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+cp+" and "+dp+" must match")}})}var Ri=function(){return function(_d,np,rp){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=_d;for(var ap=rp.filterWidth,sp=rp.inChannels,lp=rp.strideWidth,up=rp.strideHeight,cp=rp.padInfo,dp=rp.outWidth,fp=rp.dilationWidth,pp=rp.dilationHeight,hp=rp.dataFormat,mp=cp.left,gp=cp.top,vp=sp*ap,xp=Ko(),Sp=hp==="channelsLast",yp=Sp?0:1,bp=Sp?1:2,Ep="",wp=0;wp<=1;wp++)for(var _p=0;_p<=1;_p++)Ep+=`
          blockIndex = rc.y + `+_p+`;
          pos = rc.x + `+wp+`;

          if(blockIndex < `+_d[1]+" && pos < "+_d[0]+`) {
            offsetY = int(blockIndex / (`+dp+")) * "+up+" - "+gp+`;
            d0 = offsetY + `+pp+" * (pos / "+vp+`);

            if(d0 < `+np[yp]+` && d0 >= 0) {

              offsetX = int(mod(float(blockIndex), `+dp+".) * "+lp+". - "+mp+`.);
              d1 = offsetX + `+fp+" * (int(mod(float(pos), "+vp+".) / "+sp+`.));

              if(d1 < `+np[bp]+` && d1 >= 0) {

                ch = int(mod(float(pos), `+sp+`.));

                if (`+Sp+`) {
                  innerDims = vec2(d1, ch);
                  result[`+(2*wp+_p)+`] = getChannel(
                    getA(d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[`+(2*wp+_p)+`] = getChannel(
                    getA(ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec2 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        `+Ep+`

        `+xp.output+` = result;
      }
    `}}(),Ii=function(){return function(_d,np,rp,ap,sp){this.variableNames=["x"],this.outputShape=[];var lp,up=np,cp=_d[3]-1;this.outputShape=_d;var dp="float("+rp+") + float("+ap+") * sum";lp=sp===.5?"inversesqrt("+dp+")":sp===1?"1.0/("+dp+")":"exp(log("+dp+") * float(-"+sp+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -`+up+"; j <= "+up+`; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  `+cp+`) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * `+lp+`;
        setOutput(val);
      }
    `}}(),ki=function(){return function(_d,np,rp,ap,sp){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=_d,this.depth=_d[3],this.depthRadius=np,this.bias=rp,this.alpha=ap,this.beta=sp,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < `+this.depth+`; ++d) {
          int depthBegin = int(max(0.0, float(d - `+np+`)));
          int depthEnd = int(min(float(`+this.depth+`),
              float(d + `+np+` + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = `+this.depth+`;

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(`+ap+") * norm + float("+rp+`);

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(`+ap+`)
                * float(`+sp+`)
                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * `+sp+`);
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}(),Si=function(){return function(_d,np,rp,ap,sp){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var lp,up=np,cp=_d[3]-1;this.outputShape=_d;var dp="float("+rp+") + float("+ap+") * sum";lp=sp===.5?"inversesqrt("+dp+")":sp===1?"1.0/("+dp+")":"exp(log("+dp+") * float(-"+sp+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < `+this.outputShape[3]+`;
        bool hasNextRow = c < `+this.outputShape[2]+`;

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - `+up+`;
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - `+up+"; j <= "+up+`; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(`+cp+`));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * `+lp+`;
        setOutput(result);
      }
    `}}(),Ai=function(){return function(_d){this.variableNames=["dy","maxPos"],this.outputShape=_d.inShape;var np=_d.strideHeight,rp=_d.strideWidth,ap=_d.dilationHeight,sp=_d.effectiveFilterHeight,lp=_d.effectiveFilterWidth,up=sp-1-_d.padInfo.top,cp=lp-1-_d.padInfo.left,dp=sp*lp-1;this.userCode=`
      const ivec2 pads = ivec2(`+up+", "+cp+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+sp+`;
          wR += `+ap+`) {
          float dyR = float(dyRCorner + wR) / `+np+`.0;

          if (dyR < 0.0 || dyR >= `+_d.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+lp+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+rp+`.0;

            if (dyC < 0.0 || dyC >= `+_d.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = `+dp+` - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * `+lp+` + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}(),Di=function(){return function(_d){this.variableNames=["dy","maxPos"],this.outputShape=_d.inShape;var np=_d.strideDepth,rp=_d.strideHeight,ap=_d.strideWidth,sp=_d.dilationDepth,lp=_d.dilationHeight,up=_d.dilationWidth,cp=_d.effectiveFilterDepth,dp=_d.effectiveFilterHeight,fp=_d.effectiveFilterWidth,pp=cp-1-_d.padInfo.front,hp=dp-1-_d.padInfo.top,mp=fp-1-_d.padInfo.left,gp=cp*dp*fp-1;this.userCode=`
      const ivec3 pads = ivec3(`+pp+", "+hp+", "+mp+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+cp+`;
           wD += `+sp+`) {
          float dyD = float(dyDCorner + wD) / `+np+`.0;

          if (dyD < 0.0 || dyD >= `+_d.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+dp+`;
              wR += `+lp+`) {
            float dyR = float(dyRCorner + wR) / `+rp+`.0;

            if (dyR < 0.0 || dyR >= `+_d.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+fp+`;
                wC += `+up+`) {
              float dyC = float(dyCCorner + wC) / `+ap+`.0;

              if (dyC < 0.0 || dyC >= `+_d.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = `+gp+` -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * `+dp+" * "+fp+` +
                  wR * `+fp+` + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}(),Ti=function(){return function(_d,np,rp,ap,sp,lp,up){rp===void 0&&(rp=!1),ap===void 0&&(ap=!1),sp===void 0&&(sp=!1),lp===void 0&&(lp=null),up===void 0&&(up=!1),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=np;var cp=rp?_d[1]:_d[2],dp=Math.ceil(cp/2),fp=rp?"i * 2, rc.y":"rc.y, i * 2",pp=ap?"rc.z, i * 2":"i * 2, rc.z",hp=rp?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],mp=ap?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],gp="",vp="";lp&&(gp=up?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+lp+`
        }`:`vec4 activation(vec4 x) {
          `+lp+`
        }`,vp="result = activation(result);");var xp=sp?"result += getBiasAtOutCoords();":"";sp&&this.variableNames.push("bias"),up&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+gp+`

      const float sharedDimension = `+dp+`.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        for (int i = 0; i < `+dp+`; i++) {
          vec4 a = getMatrixA(rc.x, `+fp+`);
          vec4 b = getMatrixB(rc.x, `+pp+`);

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (`+hp[0]+" * "+mp[0]+`);
          result += (`+hp[1]+" * "+mp[1]+`);
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        `+xp+`

        `+vp+`

        setOutput(result);
      }
    `}}(),Ni=function(){function _d(np,rp,ap){this.variableNames=["probs"],this.outputShape=[np,ap],this.userCode=`
      uniform float seed;

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < `+(rp-1)+`; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(`+(rp-1)+`));
      }
    `}return _d.prototype.getCustomSetupFunc=function(np){var rp=this;return function(ap,sp){rp.seedLoc==null&&(rp.seedLoc=ap.getUniformLocation(sp,"seed")),ap.gl.uniform1f(rp.seedLoc,np)}},_d}(),Fi=function(){return function(_d,np,rp,ap){this.variableNames=["indices"],this.outputShape=[_d,np],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(`+ap+"), float("+rp+`),
                      float(index == coords.y)));
      }
    `}}(),Oi=function(){return function(_d){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=_d;var np=_d.length;if(np===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{var rp=qo("rc",np),ap=aa(np),sp=function(cp,dp,fp){if(cp===1)return"rc > "+dp[0];for(var pp="",hp=cp-2;hp<cp;hp++)pp+=fp[hp]+" >= "+dp[hp],hp<cp-1&&(pp+="||");return pp}(np,_d,rp),lp=function(cp,dp,fp,pp){if(cp===1)return"";var hp=pp.slice(-2);return`
    int r = `+hp[0]+`;
    int c = `+hp[1]+`;
    int rp1 = r + 1;
    int cp1 = c + 1;

    bool cEdge = cp1 >= `+dp+`;
    bool rEdge = rp1 >= `+fp+`;
  `}(np,_d[_d.length-1],_d[_d.length-2],rp),up=function(cp,dp){var fp=cp.length,pp=function(hp,mp){for(var gp=[],vp=0;vp<=1;vp++)for(var xp=0;xp<=1;xp++){for(var Sp=(vp===0?"r":"rp1")+", "+(xp===0?"c":"cp1"),yp=2;yp<hp;yp++)Sp=mp[mp.length-1-yp]+","+Sp;gp.push(Sp)}return gp}(fp,dp);return fp===1?`getA(rc),
            rc + 1 >= `+cp[0]+` ? 0. : getA(rc + 1),
            0, 0`:"getA("+pp[0]+`),
          cEdge ? 0. : getA(`+pp[1]+`),
          rEdge ? 0. : getA(`+pp[2]+`),
          rEdge || cEdge ? 0. : getA(`+pp[3]+")"}(_d,rp);this.userCode=`
        void main() {
          `+ap+` rc = getOutputCoords();

          if(`+sp+`) {
            setOutput(vec4(0));
          } else {
            `+lp+`

            setOutput(vec4(`+up+`));
          }
        }
      `}}}(),_i=function(){return function(_d,np,rp){this.variableNames=["x"],this.outputShape=np.map(function(dp,fp){return dp[0]+_d[fp]+dp[1]});var ap=_d.length,sp=aa(ap),lp=np.map(function(dp){return dp[0]}).join(","),up=np.map(function(dp,fp){return dp[0]+_d[fp]}).join(","),cp=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,ap);this.userCode=ap!==1?`
      `+sp+" start = "+sp+"("+lp+`);
      `+sp+" end = "+sp+"("+up+`);

      void main() {
        `+sp+` outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(float(`+rp+`));
        } else {
          `+sp+` coords = outC - start;
          setOutput(getX(`+cp+`));
        }
      }
    `:`
        int start = `+lp+`;
        int end = `+up+`;

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(float(`+rp+`));
          } else {
            setOutput(getX(outC - start));
          }
        }
      `}}(),Mi=function(){return function(_d,np,rp){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=np.map(function(Sp,yp){return Sp[0]+_d[yp]+Sp[1]});for(var ap=_d.length,sp=aa(ap),lp=np.map(function(Sp){return Sp[0]}).join(","),up=np.map(function(Sp,yp){return Sp[0]+_d[yp]}).join(","),cp=qo("rc",ap),dp=qo("source",ap),fp=cp[ap-1]+" < "+this.outputShape[ap-1],pp=ap===1?"source":"vec2("+dp.slice(-2).join()+")",hp=[sp+" rc = outputLoc;",cp[ap-1]+` += 1;
       if(`+fp+`) {
      `,ap===1?"":`}
       rc = outputLoc;
       `+cp[ap-2]+` += 1;
       if(`+cp[ap-2]+" < "+this.outputShape[ap-2]+") {",ap===1?"":"  "+cp[ap-1]+` += 1;
         if(`+fp+") {"],mp=ap===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",gp="",vp=0,xp=ap===1?2:4;vp<xp;vp++)gp+=`
        `+hp[vp]+`
        if (`+mp+`) {
          result[`+vp+"] = float("+rp+`);
        } else {
          `+sp+` source = rc - start;
          result[`+vp+"] = getChannel(getX("+dp.join()+"), "+pp+`);
        }
      `;gp+=ap===1?"} ":"}}",this.userCode=`
      const `+sp+" start = "+sp+"("+lp+`);
      const `+sp+" end = "+sp+"("+up+`);

      void main() {
        `+sp+` outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        `+gp+`
        setOutput(result);
      }
    `}}(),Bi=function(){return function(_d,np,rp){if(this.variableNames=["x"],np==="avg"&&rp)throw new Error("Cannot compute positions for average pool.");var ap=_d.filterWidth,sp=_d.strideHeight,lp=_d.strideWidth,up=_d.dilationHeight,cp=_d.dilationWidth,dp=_d.effectiveFilterHeight,fp=_d.effectiveFilterWidth,pp=_d.padInfo.top,hp=_d.padInfo.left;this.outputShape=_d.outShape;var mp=np==="avg",gp="0.0";if(mp||(gp="-1.0 / 1e-20"),rp)this.userCode=`
        const ivec2 strides = ivec2(`+sp+", "+lp+`);
        const ivec2 pads = ivec2(`+pp+", "+hp+`);

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < `+dp+`;
              wR += `+up+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+_d.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+fp+`;
                wC += `+cp+`) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= `+_d.inWidth+`) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value >= currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = wR * `+fp+` + wC;
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var vp=np+"("+np+"("+np+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";np==="avg"&&(vp="avgValue / count");var xp=4*Math.floor(ap/4),Sp=ap%4,yp=`
      if (`+mp+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(`+sp+", "+lp+`);
      const ivec2 pads = ivec2(`+pp+", "+hp+`);
      const float initializationValue = `+gp+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= `+_d.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+gp+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < `+dp+`;
            wR += `+up+`) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= `+_d.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+xp+`; wC += 4) {
            int xC = xCCorner + wC * `+cp+`;

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+cp+`, d),
              getValue(batch, xR, xC + 2 * `+cp+`, d),
              getValue(batch, xR, xC + 3 * `+cp+`, d)
            );

            `+yp+`
          }

          int xC = xCCorner + `+xp+`;
          if (`+(Sp===1)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            `+yp+`
          } else if (`+(Sp===2)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+cp+`, d),
              initializationValue,
              initializationValue
            );

            `+yp+`
          } else if (`+(Sp===3)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+cp+`, d),
              getValue(batch, xR, xC + 2 * `+cp+`, d),
              initializationValue
            );

            `+yp+`
          }
        }
        setOutput(`+vp+`);
      }
    `}}}(),Pi=function(){return function(_d,np,rp){if(this.variableNames=["x"],np==="avg"&&rp)throw new Error("Cannot compute positions for average pool.");var ap=_d.filterWidth,sp=_d.strideDepth,lp=_d.strideHeight,up=_d.strideWidth,cp=_d.dilationDepth,dp=_d.dilationHeight,fp=_d.dilationWidth,pp=_d.effectiveFilterDepth,hp=_d.effectiveFilterHeight,mp=_d.effectiveFilterWidth,gp=_d.padInfo.front,vp=_d.padInfo.top,xp=_d.padInfo.left;this.outputShape=_d.outShape;var Sp=np==="avg",yp="0.0";if(Sp||(yp="-1.0 / 1e-20"),rp)this.userCode=`
        const ivec3 strides =
            ivec3(`+sp+", "+lp+", "+up+`);
        const ivec3 pads = ivec3(`+gp+", "+vp+", "+xp+`);

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < `+pp+`;
              wD += `+cp+`) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= `+_d.inDepth+`) {
              continue;
            }

            for (int wR = 0; wR < `+hp+`;
                wR += `+dp+`) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= `+_d.inHeight+`) {
                continue;
              }

              for (int wC = 0; wC < `+mp+`;
                  wC += `+fp+`) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= `+_d.inWidth+`) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value >= currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition =
                      wD * `+hp+" * "+mp+` +
                      wR * `+mp+` + wC;;
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var bp=np+"("+np+"("+np+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";np==="avg"&&(bp="avgValue / count");var Ep=4*Math.floor(ap/4),wp=ap%4,_p=`
      if (`+Sp+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(`+sp+", "+lp+", "+up+`);
      const ivec3 pads = ivec3(`+gp+", "+vp+", "+xp+`);
      const float initializationValue = `+yp+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= `+_d.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+yp+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < `+pp+`;
            wD += `+cp+`) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= `+_d.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+hp+`;
            wR += `+dp+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+_d.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+Ep+`; wC += 4) {
              int xC = xCCorner + wC * `+fp+`;

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+fp+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+fp+`, ch),
                getValue(batch, xD, xR, xC + 3 * `+fp+`, ch)
              );

              `+_p+`
            }

            int xC = xCCorner + `+Ep+`;
            if (`+(wp===1)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              `+_p+`
            } else if (`+(wp===2)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+fp+`, ch),
                initializationValue,
                initializationValue
              );

              `+_p+`
            } else if (`+(wp===3)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+fp+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+fp+`, ch),
                initializationValue
              );

              `+_p+`
            }
          }
          setOutput(`+bp+`);
        }
      }
    `}}}(),Li=function(){return function(_d,np){this.variableNames=["x"];var rp=_d.windowSize,ap=_d.batchSize,sp=_d.inSize,lp=Math.ceil(sp/rp);this.outputShape=[ap,lp];var up="0.0",cp="";np==="prod"?up="1.0":np==="min"?(up="1.0 / 1e-20",cp="min"):np==="max"&&(up="-1.0 / 1e-20",cp="max");var dp=np+"("+np+"("+np+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";np==="sum"?dp="sumValue":np==="prod"?dp="prodValue":np==="all"?dp="allValue":np==="any"&&(dp="anyValue");var fp=4*Math.floor(rp/4),pp=rp%4,hp=`
      if (`+(np==="sum")+`) {
        sumValue += dot(values, ones);
      } else if (`+(np==="prod")+`) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = `+cp+`(values, minMaxValue);
      }
    `,mp="vec4";np==="all"?(up="1.0",hp=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,mp="bvec4"):np==="any"&&(up="0.0",hp=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,mp="bvec4");var gp="";sp%rp>0&&(gp=`
        if (inIdx < 0 || inIdx >= `+sp+`) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = `+up+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        `+gp+`
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+rp+`;

        vec4 minMaxValue = vec4(`+up+`);
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < `+fp+`; i += 4) {
          int inIdx = inOffset + i;
          `+mp+" values = "+mp+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          `+hp+`
        }

        int inIdx = inOffset + `+fp+`;
        if (`+(pp===1)+`) {
          `+mp+" values = "+mp+`(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          `+hp+`
        } else if (`+(pp===2)+`) {
          `+mp+" values = "+mp+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          `+hp+`
        } else if (`+(pp===3)+`) {
          `+mp+" values = "+mp+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          `+hp+`
        }
        setOutput(`+dp+`);
      }
    `}}(),Wi=function(){return function(_d,np){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=_d;for(var rp="",ap=0;ap<4;ap++){var sp="thisRC = rc;";ap%2==1&&(sp+="thisRC.z += 1;"),ap>1&&(sp+="thisRC.y += 1;"),rp+=`
        `+sp+`
        `+(ap>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+`
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[`+ap+`] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        `+(ap>0?"}":"")+`
      `}this.userCode=`
      
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      `+jo(["r","c","d"],np)+`
      return ivec3(r, c, d);
    }
  
      `+Xo(_d)+`

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = `+_d[1]+`;
        int cols = `+_d[2]+`;

        `+rp+`

        setOutput(result);
      }
    `}}(),Ui=function(){return function(_d,np,rp){this.variableNames=["dy"],this.outputShape=[],this.outputShape=np.shape;var ap=np.shape,sp=ap[1],lp=ap[2],up=_d.shape,cp=up[1],dp=up[2],fp=[rp&&cp>1?sp-1:sp,rp&&dp>1?lp-1:lp],pp=[rp&&cp>1?cp-1:cp,rp&&dp>1?dp-1:dp],hp=fp[0]/pp[0],mp=fp[1]/pp[1],gp=1/hp,vp=1/mp,xp=2*Math.ceil(gp)+2,Sp=2*Math.ceil(vp)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+hp+`);
        const float widthScale = float(`+mp+`);

        const float invHeightScale = float(`+gp+`);
        const float invWidthScale = float(`+vp+`);

        const int winHeight = int(`+xp+`);
        const int winWidth = int(`+Sp+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+cp+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+dp+`) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), `+(sp-1)+`.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), `+(lp-1)+`.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}(),Vi=function(){return function(_d,np,rp,ap){this.variableNames=["A"],this.outputShape=[];var sp=_d[0],lp=_d[1],up=_d[2],cp=_d[3];this.outputShape=[sp,np,rp,cp];var dp=[ap&&np>1?lp-1:lp,ap&&rp>1?up-1:up],fp=[ap&&np>1?np-1:np,ap&&rp>1?rp-1:rp];this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+dp[0]/fp[0]+`,
          `+dp[1]/fp[1]+`);
      const vec2 inputShapeRC = vec2(`+lp+".0, "+up+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}(),zi=function(){return function(_d,np,rp,ap){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var sp=_d[0],lp=_d[1],up=_d[2],cp=_d[3];this.outputShape=[sp,np,rp,cp];var dp=[ap&&np>1?lp-1:lp,ap&&rp>1?up-1:up],fp=[ap&&np>1?np-1:np,ap&&rp>1?rp-1:rp];this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          `+dp[0]/fp[0]+`,
          `+dp[1]/fp[1]+`,
          `+dp[1]/fp[1]+`);
      const vec3 inputShapeRC = vec3(`+lp+".0, "+up+`.0,
                                     `+up+`.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < `+(cp-1)+`;
        bool hasNextRow = coords.z < `+(rp-1)+`;

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}(),Gi=function(){return function(_d,np,rp){this.variableNames=["dy"],this.outputShape=[],this.outputShape=np.shape;var ap=np.shape,sp=ap[1],lp=ap[2],up=_d.shape,cp=up[1],dp=up[2],fp=[rp&&cp>1?sp-1:sp,rp&&dp>1?lp-1:lp],pp=[rp&&cp>1?cp-1:cp,rp&&dp>1?dp-1:dp],hp=fp[0]/pp[0],mp=fp[1]/pp[1],gp=1/hp,vp=1/mp,xp=2*Math.ceil(gp)+2,Sp=2*Math.ceil(vp)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+hp+`);
        const float widthScale = float(`+mp+`);

        const float invHeightScale = float(`+gp+`);
        const float invWidthScale = float(`+vp+`);

        const int winHeight = int(`+xp+`);
        const int winWidth = int(`+Sp+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+cp+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+dp+`) {
              continue;
            }

            float sourceFracRow =
              float(`+fp[0]+`) *
                (float(dyR) / float(`+pp[0]+`));

            float sourceFracCol =
                float(`+fp[1]+`) *
                  (float(dyC) / float(`+pp[1]+`));

            int sourceNearestRow = int(min(
                float(int(`+sp+`) - 1),
                `+rp+` ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(`+lp+`) - 1),
                `+rp+` ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}(),Hi=function(){return function(_d,np,rp,ap){this.variableNames=["A"],this.outputShape=[];var sp=_d[0],lp=_d[1],up=_d[2],cp=_d[3];this.outputShape=[sp,np,rp,cp];var dp=[ap&&np>1?lp-1:lp,ap&&rp>1?up-1:up],fp=[ap&&np>1?np-1:np,ap&&rp>1?rp-1:rp],pp=ap?"0.5":"0.0";this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+dp[0]/fp[0]+`,
          `+dp[1]/fp[1]+`);
      const vec2 inputShapeRC = vec2(`+lp+".0, "+up+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + `+pp+`)));

        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}(),qi=function(){return function(_d,np){this.variableNames=["x"];var rp=_d.length;if(rp>4)throw new Error("WebGL backend: Reverse of rank-"+rp+" tensor is not yet supported");if(this.outputShape=_d,rp!==1){var ap=_d.map(function(lp,up){return function(cp){return np.indexOf(cp)!==-1&&_d[cp]!==1?_d[cp]+" - coords["+cp+"] - 1":"coords["+cp+"]"}(up)}).join(","),sp=aa(rp);this.userCode=`
      void main() {
        `+sp+` coords = getOutputCoords();
        setOutput(getX(`+ap+`));
      }
    `}else this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(`+_d[0]+` - coord - 1));
        }
      `}}(),Ki=function(){return function(_d,np){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var rp=_d.length;if(rp>4)throw new Error("WebGL backend: Reverse of rank-"+rp+" tensor is not yet supported");this.outputShape=_d;var ap=qo("rc",rp),sp=ap[rp-1]+" + 1 < "+this.outputShape[rp-1],lp=ap[rp-2]+" + 1 < "+this.outputShape[rp-2],up=aa(rp);function cp(dp){var fp=_d.map(function(pp,hp){return function(mp,gp){return np.indexOf(mp)!==-1&&_d[mp]!==1?_d[mp]+" - "+gp[mp]+" - 1":""+gp[mp]}(hp,dp)});return"getChannel(getX("+fp.join(",")+"), vec2("+fp.slice(-2).join(",")+"))"}this.userCode=rp===1?`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(`+_d[0]+` - rc - 1),
            `+_d[0]+` - rc - 1);
          if(`+sp+`){
              result.g = getChannel(getX(`+_d[0]+` - (rc  + 1) - 1),
                `+_d[0]+` - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:`
        void main() {
          `+up+` rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = `+function(dp){return cp(dp)}(ap.slice())+`;
          if(`+sp+`){
            result.g = `+function(dp){return dp[rp-1]="("+dp[rp-1]+" + 1)",cp(dp)}(ap.slice())+`;
          }
          if(`+lp+`) {
            result.b = `+function(dp){return dp[rp-2]="("+dp[rp-2]+" + 1)",cp(dp)}(ap.slice())+`;
            if(`+sp+`) {
              result.a = `+function(dp){return dp[rp-1]="("+dp[rp-1]+" + 1)",dp[rp-2]="("+dp[rp-2]+" + 1)",cp(dp)}(ap.slice())+`;
            }
          }
          setOutput(result);
        }
    `}}(),ji=function(){return function(_d,np,rp,ap,sp,lp,up){this.variableNames=["updates","indices","defaultValue"],this.outputShape=lp;var cp=aa(sp.length),dp=aa(lp.length),fp="";rp===1?fp="i":rp===2&&(fp="i, j");var pp="getIndices("+fp+")",hp="";ap===1?hp="i":ap===2&&(hp="i, coords[1]");var mp="getUpdates("+hp+")",gp=np>1?"strides[j]":"strides";this.userCode=`
        `+cp+" strides = "+cp+"("+sp+`);

        void main() {
          `+dp+` coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < `+_d+`; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < `+np+`; j++) {
              int index = round(`+pp+`);
              flattenedIndex += index * `+gp+`;
            }
            if (flattenedIndex == coords[0]) {
              sum += `+mp+`;
              found = true;
            }
          }
          setOutput(mix(getDefaultValue(), sum, float(found)));
        }
      `}}(),Xi=function(){return function(_d,np){this.variableNames=["x","segmentIds"];var rp=_d.windowSize,ap=_d.batchSize,sp=_d.inSize,lp=_d.numSegments,up=lp*Math.ceil(sp/rp);this.outputShape=[ap,up];var cp=4*Math.floor(rp/4),dp=rp%4,fp=`
        sumValue += dot(values, segFilter);
    `,pp="";sp%rp>0&&(pp=`
        if (inIdx < 0 || inIdx >= `+sp+`) {
          return initializationValue;
        }
      `);var hp="";sp%rp>0&&(hp=`
        if (inIdx < 0 || inIdx >= `+sp+`) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = 0.0;

      float getValue(int batch, int inIdx) {
        `+pp+`
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        `+hp+`
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          `+lp+")) * float("+rp+`));
        int currentSeg = int(mod(float(outIdx), float(`+lp+`)));

        float sumValue = 0.0;

        for (int i = 0; i < `+cp+`; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          `+fp+`
        }

        int inIdx = inOffset + `+cp+`;
        if (`+(dp===1)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          `+fp+`
        } else if (`+(dp===2)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          `+fp+`
        } else if (`+(dp===3)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          `+fp+`
        }
        setOutput(sumValue);
      }
    `}}(),$i=function(){return function(_d,np,rp){var ap,sp;if(this.variableNames=["c","a","b"],this.outputShape=np,rp>4)throw Error("Where for rank "+rp+" is not yet supported");if(rp===1)sp="resRC",ap="resRC";else{for(var lp=["resRC.x","resRC.y","resRC.z","resRC.w"],up=[],cp=[],dp=0;dp<np.length;dp++)cp.push(""+lp[dp]),dp<_d&&up.push(""+lp[dp]);ap=up.join(),sp=cp.join()}var fp=aa(rp);this.userCode=`
      void main() {
        `+fp+` resRC = getOutputCoords();
        float cVal = getC(`+ap+`);
        if (cVal >= 1.0) {
          setOutput(getA(`+sp+`));
        } else {
          setOutput(getB(`+sp+`));
        }
      }
    `}}(),Yi=function(){function _d(np){this.variableNames=["source"],this.outputShape=np,this.rank=np.length;var rp,ap=aa(this.rank),sp="uniform int start["+this.rank+"];",lp=function(up){if(up===1)return"sourceLoc";if(up<=6)return Qi.slice(0,up).map(function(cp){return"sourceLoc."+cp}).join(",");throw Error("Slicing for rank "+up+" is not yet supported")}(this.rank);rp=`
        `+ap+` sourceLoc;
        `+ap+` coords = getOutputCoords();
        `+np.map(function(up,cp){return"sourceLoc."+Qi[cp]+" = start["+cp+"] + coords."+Qi[cp]+";"}).join(`
`)+`
      `,this.userCode=`
      `+sp+`
      void main() {
        `+rp+`
        setOutput(getSource(`+lp+`));
      }
    `}return _d.prototype.getCustomSetupFunc=function(np){var rp=this;if(np.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+np.length+")");return function(ap,sp){rp.startLoc==null&&(rp.startLoc=ap.getUniformLocationNoThrow(sp,"start"),rp.startLoc==null)||ap.gl.uniform1iv(rp.startLoc,np)}},_d}(),Qi=["x","y","z","w","u","v"],Ji=function(){function _d(np){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=np,this.rank=np.length;var rp=aa(this.rank),ap=qo("coords",this.rank),sp=qo("sourceLoc",this.rank),lp=this.rank===1?"sourceLoc":"vec2("+sp.slice(-2).join()+")",up="getChannel(getSource("+sp.join()+"), "+lp+")",cp=`
      result.x = `+up+`;
      if (++`+ap[this.rank-1]+" < "+np[this.rank-1]+`) {
        ++`+sp[this.rank-1]+`;
        result.y = `+up+`;
        --`+sp[this.rank-1]+`;
      }
    `,dp=this.rank===1?"":`
      --`+ap[this.rank-1]+`;
      if (++`+ap[this.rank-2]+" < "+np[this.rank-2]+`) {
        ++`+sp[this.rank-2]+`;
        result.z = `+up+`;
        if (++`+ap[this.rank-1]+" < "+np[this.rank-1]+`) {
          ++`+sp[this.rank-1]+`;
          result.w = `+up+`;
        }
      }
    `,fp=this.rank<=4?`sourceLoc = coords +
            `+rp+"("+np.map(function(pp,hp){return"start["+hp+"]"}).join()+");":np.map(function(pp,hp){return sp[hp]+" = "+ap[hp]+" + start["+hp+"];"}).join(`
`);this.userCode=`
      uniform int start[`+this.rank+`];
      void main() {
        `+rp+` coords = getOutputCoords();
        `+rp+` sourceLoc;
        `+fp+`
        vec4 result = vec4(0.);
        `+cp+`
        `+dp+`
        setOutput(result);
      }
    `}return _d.prototype.getCustomSetupFunc=function(np){var rp=this;if(np.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+np.length+")");return function(ap,sp){rp.startLoc==null&&(rp.startLoc=ap.getUniformLocationNoThrow(sp,"start"),rp.startLoc==null)||ap.gl.uniform1iv(rp.startLoc,np)}},_d}(),Zi=function(){return function(_d,np,rp){this.variableNames=["x"],this.outputShape=rp;var ap=rp.length,sp=aa(rp.length),lp=aa(rp.length),up="";if(ap===1)up="coords * strides + begin";else{var cp=0;up=rp.map(function(dp,fp){return cp++,rp.length===1?"coords * strides["+fp+"] + begin["+fp+"]":"coords["+(cp-1)+"] * strides["+fp+"] + begin["+fp+"]"}).join(",")}this.userCode=`
      `+sp+" begin = "+sp+"("+_d+`);
      `+sp+" strides = "+sp+"("+np+`);

      void main() {
        `+lp+` coords = getOutputCoords();
        setOutput(getX(`+up+`));
      }
    `}}(),tu=function(){function _d(np){this.gpgpu=np,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return _d.prototype.acquireTexture=function(np,rp,ap){var sp,lp=eu(rp,ap),up=nu(np,lp,ap);if(up in this.freeTextures||(this.freeTextures[up]=[]),up in this.usedTextures||(this.usedTextures[up]=[]),this.freeTextures[up].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var cp=this.freeTextures[up].shift();return this.usedTextures[up].push(cp),cp}return this.numUsedTextures++,this.log(),lp===Bt.PACKED_2X2_FLOAT32?sp=this.gpgpu.createPackedMatrixTexture(np[0],np[1]):lp===Bt.PACKED_2X2_FLOAT16?sp=this.gpgpu.createFloat16PackedMatrixTexture(np[0],np[1]):lp===Bt.UNPACKED_FLOAT32?sp=this.gpgpu.createFloat32MatrixTexture(np[0],np[1]):lp===Bt.UNPACKED_FLOAT16?sp=this.gpgpu.createFloat16MatrixTexture(np[0],np[1]):lp===Bt.PACKED_4X1_UNSIGNED_BYTE&&(sp=this.gpgpu.createUnsignedBytesMatrixTexture(np[0],np[1])),this.usedTextures[up].push(sp),sp},_d.prototype.releaseTexture=function(np,rp,ap,sp){if(this.freeTextures!=null){var lp=nu(rp,eu(ap,sp),sp);lp in this.freeTextures||(this.freeTextures[lp]=[]),this.freeTextures[lp].push(np),this.numFreeTextures++,this.numUsedTextures--;var up=this.usedTextures[lp],cp=up.indexOf(np);if(cp<0)throw new Error("Cannot release a texture that was never provided by this texture manager");up.splice(cp,1),this.log()}},_d.prototype.log=function(){if(this.logEnabled){var np=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+np+")")}},_d.prototype.getNumUsedTextures=function(){return this.numUsedTextures},_d.prototype.getNumFreeTextures=function(){return this.numFreeTextures},_d.prototype.dispose=function(){var np=this;if(this.freeTextures!=null){for(var rp in this.freeTextures)this.freeTextures[rp].forEach(function(ap){np.gpgpu.deleteMatrixTexture(ap)});for(var rp in this.usedTextures)this.usedTextures[rp].forEach(function(sp){np.gpgpu.deleteMatrixTexture(sp)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},_d}();function eu(_d,np){if(_d===Mt.UPLOAD)return Bt.PACKED_2X2_FLOAT32;if(_d===Mt.RENDER||_d==null)return function(rp){return a$1().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?rp?Bt.PACKED_2X2_FLOAT32:Bt.UNPACKED_FLOAT32:rp?Bt.PACKED_2X2_FLOAT16:Bt.UNPACKED_FLOAT16}(np);if(_d===Mt.DOWNLOAD||_d===Mt.PIXELS)return Bt.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+_d)}function nu(_d,np,rp){return _d[0]+"_"+_d[1]+"_"+np+"_"+rp}var ru=function(){return function(_d,np){this.variableNames=["A"];for(var rp=new Array(_d.length),ap=0;ap<rp.length;ap++)rp[ap]=_d[ap]*np[ap];this.outputShape=rp,this.rank=rp.length;var sp=aa(this.rank),lp=function(up){var cp=up.length;if(cp>5)throw Error("Tile for rank "+cp+" is not yet supported");if(cp===1)return"imod(resRC, "+up[0]+")";for(var dp=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],fp=[],pp=0;pp<up.length;pp++)fp.push("imod("+dp[pp]+", "+up[pp]+")");return fp.join()}(_d);this.userCode=`
      void main() {
        `+sp+` resRC = getOutputCoords();
        setOutput(getA(`+lp+`));
      }
    `}}(),ou=function(){return function(_d,np){this.variableNames=["A"];for(var rp=new Array(_d.length),ap=0;ap<rp.length;ap++)rp[ap]=_d[np[ap]];this.outputShape=rp,this.rank=rp.length;var sp=aa(this.rank),lp=function(up){var cp=up.length;if(cp>6)throw Error("Transpose for rank "+cp+" is not yet supported");for(var dp=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],fp=new Array(cp),pp=0;pp<up.length;pp++)fp[up[pp]]=dp[pp];return fp.join()}(np);this.userCode=`
    void main() {
      `+sp+` resRC = getOutputCoords();
      setOutput(getA(`+lp+`));
    }
    `}}(),au=function(){return function(_d,np){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var rp=new Array(_d.length),ap=0;ap<rp.length;ap++)rp[ap]=_d[np[ap]];if(this.outputShape=rp,this.rank=rp.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.");var sp=aa(this.rank),lp=Ho("rc",this.rank),up=new Array(this.rank);for(ap=0;ap<np.length;ap++)up[np[ap]]=lp[ap];var cp="vec2("+up.slice(-2).join()+")",dp="++"+lp[this.rank-1]+" < "+rp[this.rank-1],fp="getChannel(getA("+up.join()+"), "+cp+")";this.userCode=`
    void main() {
      `+sp+` rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = `+fp+`;
      if(`+dp+`) {
        result[1] = `+fp+`;
      }
      --`+lp[this.rank-1]+`;
      if(++`+lp[this.rank-2]+" < "+rp[this.rank-2]+`) {
        result[2] = `+fp+`;
        if(`+dp+`) {
          result[3] = `+fp+`;
        }
      }
      setOutput(result);
    }
    `}}(),iu=1.7580993408473768,uu=1.0507009873554805,su=function(){return function(_d,np){this.variableNames=["A"],this.outputShape=_d,this.userCode=`
      float unaryOperation(float x) {
        `+np+`
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}(),cu="if (isnan(x)) return x;",lu="return x;",hu="return abs(x);",fu=cu+`
  return (x < 0.0) ? 0.0 : x;
`,pu=cu+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,du="return (x >= 0.0) ? x : (exp(x) - 1.0);",vu=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = `+iu+`;
  float scale = `+uu+`;
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,mu="return -x;",gu="return ceil(x);",yu="return floor(x);",xu="return exp(x);",bu="return exp(x) - 1.0;",wu=cu+`
  return sin(x);
`,Cu=cu+`
  return cos(x);
`,Eu=cu+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,Ru=cu+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,Iu=cu+`
  return atan(x);
`,ku=cu+"return log(x + sqrt(x * x + 1.0));",Su=cu+`
  if (x < 1.0) return NAN;
  return log(x + sqrt(x * x - 1.0));`,Au=cu+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
  return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,Du="return x;",Tu="return x;",Nu=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Fu=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Ou=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,_u=function(){return function(_d,np){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=_d,this.userCode=`
      vec4 unaryOperation(vec4 x) {
        `+np+`
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}(),Mu=function(){return function(_d){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=_d;var np=_d.length,rp=qo("rc",np),ap=aa(np),sp=function(cp,dp){if(cp===1)return"rc";for(var fp="",pp=0;pp<cp;pp++)fp+=dp[pp],pp<cp-1&&(fp+=",");return fp}(np,rp),lp=rp.slice(-2),up=np<=1?"rc":"vec2("+lp.join(",")+")";this.userCode=`
      void main() {
        `+ap+` rc = getOutputCoords();
        vec4 packedInput = getA(`+sp+`);

        setOutput(getChannel(packedInput, `+up+`));
      }
    `}}(),Bu={};function Pu(_d,np){if(np===void 0&&(np=!1),_d==="linear")return np?Tu:lu;if(_d==="relu")return np?Nu:fu;if(_d==="elu")return np?Ou:du;if(_d==="relu6")return np?Fu:pu;if(_d==="prelu")return np?wa:xa;throw new Error("Activation "+_d+" has not been implemented for the WebGL backend.")}var Lu=600,Wu=function(_d){function np(rp){var ap,sp=_d.call(this)||this;if(sp.gpgpu=rp,sp.pendingRead=new WeakMap,sp.pendingDisposal=new WeakSet,sp.dataRefCount=new WeakMap,sp.numBytesInGPU=0,sp.uploadWaitMs=0,sp.downloadWaitMs=0,sp.warnedAboutMemory=!1,sp.pendingDeletes=0,sp.disposed=!1,!a$1().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(rp==null){var lp=Ut(a$1().getNumber("WEBGL_VERSION"));sp.binaryCache=((ap=a$1().getNumber("WEBGL_VERSION"))in Bu||(Bu[ap]={}),Bu[ap]),sp.gpgpu=new Ci(lp),sp.canvas=lp.canvas,sp.gpgpuCreatedLocally=!0}else sp.binaryCache={},sp.gpgpuCreatedLocally=!1,sp.canvas=rp.gl.canvas;return sp.textureManager=new tu(sp.gpgpu),sp.numMBBeforeWarning=a$1().global.screen==null?1024:a$1().global.screen.height*a$1().global.screen.width*window.devicePixelRatio*Lu/1024/1024,sp.texData=new so(sp,Nt),sp}return e(np,_d),np.prototype.numDataIds=function(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes},np.prototype.fromPixels=function(rp,ap){if(rp==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var sp=typeof OffscreenCanvas<"u"&&rp instanceof OffscreenCanvas||typeof HTMLCanvasElement<"u"&&rp instanceof HTMLCanvasElement,lp=rp.data instanceof Uint8Array,up=typeof ImageData<"u"&&rp instanceof ImageData,cp=typeof HTMLVideoElement<"u"&&rp instanceof HTMLVideoElement,dp=typeof HTMLImageElement<"u"&&rp instanceof HTMLImageElement,fp=cp?[rp.videoWidth,rp.videoHeight]:[rp.width,rp.height],pp=fp[0],hp=fp[1],mp=[hp,pp],gp=[hp,pp,ap];if(!(sp||lp||up||cp||dp))throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+rp.constructor.name);(dp||cp)&&(this.fromPixels2DContext==null&&(this.fromPixels2DContext=Vt(a$1().getNumber("WEBGL_VERSION")).getContext("2d")),this.fromPixels2DContext.canvas.width=pp,this.fromPixels2DContext.canvas.height=hp,this.fromPixels2DContext.drawImage(rp,0,0,pp,hp),rp=this.fromPixels2DContext.canvas);var vp,xp,Sp=this.makeTensorInfo(mp,"int32");return this.texData.get(Sp.dataId).usage=Mt.PIXELS,this.gpgpu.uploadPixelDataToTexture(this.getTexture(Sp.dataId),rp),a$1().getBool("WEBGL_PACK")?(vp=new ei(gp),xp=this.compileAndRun(vp,[Sp])):(vp=new ti(gp),xp=this.compileAndRun(vp,[Sp])),this.disposeData(Sp.dataId),xp},np.prototype.write=function(rp,ap,sp){if(a$1().getBool("DEBUG")&&this.checkNumericalProblems(rp),sp==="complex64"&&rp!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var lp={};return this.texData.set(lp,{shape:ap,dtype:sp,values:rp,usage:Mt.UPLOAD}),lp},np.prototype.move=function(rp,ap,sp,lp){if(a$1().getBool("DEBUG")&&this.checkNumericalProblems(ap),lp==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(rp,{shape:sp,dtype:lp,values:ap,usage:Mt.UPLOAD})},np.prototype.readSync=function(rp){var ap=this.texData.get(rp),sp=ap.values,lp=ap.dtype,up=ap.complexTensors,cp=ap.slice,dp=ap.shape,fp=ap.isPacked;if(cp!=null){var pp=void 0;pp=fp?new _u(dp,Du):new su(dp,Du);var hp=this.runWebGLProgram(pp,[{dataId:rp,shape:dp,dtype:lp}],lp),mp=this.readSync(hp.dataId);return this.disposeData(hp.dataId),mp}if(sp!=null)return this.convertAndCacheOnCPU(rp);if(lp==="string")return sp;var gp,vp,xp=this.activeTimers!=null;return xp&&(gp=Y()),lp==="complex64"?vp=No(up.real.dataSync(),up.imag.dataSync()):vp=this.getValuesFromTexture(rp),xp&&(this.downloadWaitMs+=Y()-gp),this.convertAndCacheOnCPU(rp,vp)},np.prototype.read=function(rp){return n$1(this,void 0,void 0,function(){var ap,sp,lp,up,cp,dp,fp,pp,hp,mp,gp,vp,xp,Sp,yp,bp,Ep,wp,_p,Cp,$p,Rp;return r(this,function(Pp){switch(Pp.label){case 0:if(this.pendingRead.has(rp))return ap=this.pendingRead.get(rp),[2,new Promise(function(Op){return ap.push(Op)})];if(sp=this.texData.get(rp),lp=sp.values,up=sp.shape,cp=sp.slice,dp=sp.dtype,fp=sp.complexTensors,pp=sp.isPacked,cp!=null)return hp=void 0,hp=pp?new _u(up,Du):new su(up,Du),mp=this.runWebGLProgram(hp,[{dataId:rp,shape:up,dtype:dp}],dp),gp=this.read(mp.dataId),this.disposeData(mp.dataId),[2,gp];if(lp!=null)return[2,this.convertAndCacheOnCPU(rp)];if(!a$1().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&a$1().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return vp=null,dp!=="complex64"&&a$1().get("WEBGL_BUFFER_SUPPORTED")&&(xp=this.decode(rp),Sp=this.texData.get(xp.dataId),vp=(Rp=this.gpgpu).createBufferFromTexture.apply(Rp,[Sp.texture].concat(Gt(up)))),this.pendingRead.set(rp,[]),dp==="complex64"?[3,2]:[4,this.gpgpu.createAndWaitForFence()];case 1:Pp.sent(),Pp.label=2;case 2:return dp!=="complex64"?[3,4]:[4,Promise.all([fp.real.data(),fp.imag.data()])];case 3:return bp=Pp.sent(),Ep=bp[0],wp=bp[1],yp=No(Ep,wp),[3,5];case 4:vp==null?yp=this.getValuesFromTexture(rp):(_p=w$1(up),yp=this.gpgpu.downloadFloat32MatrixFromBuffer(vp,_p)),Pp.label=5;case 5:return xp!=null&&this.disposeData(xp.dataId),Cp=this.convertAndCacheOnCPU(rp,yp),$p=this.pendingRead.get(rp),this.pendingRead.delete(rp),$p.forEach(function(Op){return Op(Cp)}),this.pendingDisposal.has(rp)&&(this.pendingDisposal.delete(rp),this.disposeData(rp),this.pendingDeletes--),[2,Cp]}})})},np.prototype.checkNumericalProblems=function(rp){if(rp!=null)for(var ap=0;ap<rp.length;ap++){var sp=rp[ap];if(!$t(sp))throw a$1().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error("The value "+sp+" cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'"):Error("The value "+sp+" cannot be represented on this device.")}},np.prototype.getValuesFromTexture=function(rp){var ap,sp=this.texData.get(rp),lp=sp.shape,up=sp.dtype,cp=sp.isPacked,dp=w$1(lp);if(a$1().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var fp=this.decode(rp),pp=this.texData.get(fp.dataId),hp=(ap=this.gpgpu).downloadMatrixFromPackedTexture.apply(ap,[pp.texture].concat(Gt(lp))).subarray(0,dp);return this.disposeData(fp.dataId),hp}var mp=a$1().getBool("WEBGL_PACK")&&cp===!0,gp=mp?Re(lp):lp,vp=mp?new ja(gp):new Ka(gp),xp=this.runWebGLProgram(vp,[{shape:gp,dtype:up,dataId:rp}],"float32"),Sp=this.texData.get(xp.dataId),yp=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(Sp.texture,Sp.texShape[0],Sp.texShape[1]).subarray(0,dp);return this.disposeData(xp.dataId),yp},np.prototype.time=function(rp){return n$1(this,void 0,void 0,function(){var ap,sp,lp,up,cp,dp,fp;return r(this,function(pp){switch(pp.label){case 0:return ap=this.activeTimers,sp=[],lp=!1,this.programTimersStack==null?(this.programTimersStack=sp,lp=!0):this.activeTimers.push(sp),this.activeTimers=sp,rp(),up=b(this.activeTimers.map(function(hp){return hp.query})).filter(function(hp){return hp!=null}),cp=b(this.activeTimers.map(function(hp){return hp.name})).filter(function(hp){return hp!=null}),this.activeTimers=ap,lp&&(this.programTimersStack=null),[4,Promise.all(up)];case 1:return dp=pp.sent(),fp={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:m(dp),getExtraProfileInfo:function(){return dp.map(function(hp,mp){return{name:cp[mp],ms:hp}}).map(function(hp){return hp.name+": "+hp.ms}).join(", ")},wallMs:null},this.uploadWaitMs=0,this.downloadWaitMs=0,[2,fp]}})})},np.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},np.prototype.startTimer=function(){return a$1().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?this.gpgpu.beginQuery():{startMs:Y(),endMs:null}},np.prototype.endTimer=function(rp){return a$1().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(this.gpgpu.endQuery(),rp):(rp.endMs=Y(),rp)},np.prototype.getQueryTime=function(rp){return n$1(this,void 0,void 0,function(){var ap;return r(this,function(sp){return a$1().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?[2,this.gpgpu.waitForQueryAndGetTime(rp)]:[2,(ap=rp).endMs-ap.startMs]})})},np.prototype.disposeData=function(rp){if(!this.pendingDisposal.has(rp)){if(this.pendingRead.has(rp))return this.pendingDisposal.add(rp),void this.pendingDeletes++;if(this.texData.has(rp)){this.releaseGPUData(rp);var ap=this.texData.get(rp).complexTensors;ap!=null&&(ap.real.dispose(),ap.imag.dispose()),this.texData.delete(rp)}}},np.prototype.releaseGPUData=function(rp){var ap=this.texData.get(rp),sp=ap.texture,lp=ap.dtype,up=ap.texShape,cp=ap.usage,dp=ap.isPacked,fp=ap.slice,pp=fp&&fp.origDataId||rp,hp=this.dataRefCount.get(pp);hp>1?this.dataRefCount.set(pp,hp-1):(this.dataRefCount.delete(pp),sp!=null&&(this.numBytesInGPU-=this.computeBytes(up,lp),this.textureManager.releaseTexture(sp,up,cp,dp)));var mp=this.texData.get(rp);mp.texture=null,mp.texShape=null,mp.isPacked=!1,mp.slice=null},np.prototype.getTexture=function(rp){return this.uploadToGPU(rp),this.texData.get(rp).texture},np.prototype.getDataInfo=function(rp){return this.texData.get(rp)},np.prototype.getCPUBackend=function(){return a$1().getBool("WEBGL_CPU_FORWARD")?(this.cpuBackend==null&&(this.cpuBackend=Nt.findBackend("cpu")),this.cpuBackend):null},np.prototype.shouldExecuteOnCPU=function(rp,ap){var sp=this;return ap===void 0&&(ap=128),this.getCPUBackend()!=null&&rp.every(function(lp){return sp.texData.get(lp.dataId).texture==null&&lp.size<ap})},np.prototype.getGPGPUContext=function(){return this.gpgpu},np.prototype.complex=function(rp,ap){var sp=this.makeOutput(rp.shape,"complex64");return this.texData.get(sp.dataId).complexTensors={real:Nt.keep(rp.clone()),imag:Nt.keep(ap.clone())},sp},np.prototype.real=function(rp){return this.texData.get(rp.dataId).complexTensors.real.clone()},np.prototype.imag=function(rp){return this.texData.get(rp.dataId).complexTensors.imag.clone()},np.prototype.slice=function(rp,ap,sp){if(this.shouldExecuteOnCPU([rp]))return this.cpuBackend.slice(rp,ap,sp);if(w$1(sp)===0)return kn([],sp,rp.dtype);var lp=this.texData.get(rp.dataId).isPacked,up=Yr(rp.shape,ap,sp);if(lp||!up){var cp=a$1().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Ji(sp):new Yi(sp),dp=cp.getCustomSetupFunc(ap);return this.compileAndRun(cp,[rp],null,dp)}return this.uploadToGPU(rp.dataId),this.shallowSlice(rp,ap,sp)},np.prototype.shallowSlice=function(rp,ap,sp){var lp=this.texData.get(rp.dataId),up=this.makeOutput(sp,rp.dtype),cp=this.texData.get(up.dataId);Object.assign(cp,lp),cp.shape=sp,cp.dtype=rp.dtype;var dp=Qr(ap,rp.strides);lp.slice&&(dp+=lp.slice.flatOffset),cp.slice={flatOffset:dp,origDataId:lp.slice&&lp.slice.origDataId||rp.dataId};var fp=this.dataRefCount.get(cp.slice.origDataId)||1;return this.dataRefCount.set(cp.slice.origDataId,fp+1),up},np.prototype.stridedSlice=function(rp,ap,sp,lp){if(this.shouldExecuteOnCPU([rp]))return this.cpuBackend.stridedSlice(rp,ap,sp,lp);var up=jr(ap,sp,lp);if(up.some(function(dp){return dp===0}))return kn([],up);var cp=new Zi(ap,lp,up);return this.compileAndRun(cp,[rp])},np.prototype.reverse=function(rp,ap){var sp=a$1().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Ki(rp.shape,ap):new qi(rp.shape,ap);return this.compileAndRun(sp,[rp])},np.prototype.concat=function(rp,ap){if(rp[0].dtype==="complex64"){var sp=rp.map(function(gp){return Rn(gp)}),lp=rp.map(function(gp){return In(gp)});return En(this.concat(sp,ap),this.concat(lp,ap))}if(this.shouldExecuteOnCPU(rp))return this.cpuBackend.concat(rp,ap);if(rp.length===1)return rp[0];if(rp.length>a$1().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var up=Math.floor(rp.length/2),cp=this.concat(rp.slice(0,up),ap),dp=this.concat(rp.slice(up),ap);return this.concat([cp,dp],ap)}if(a$1().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&rp[0].rank>1){var fp=new Sa(rp.map(function(gp){return gp.shape}),ap);return this.compileAndRun(fp,rp)}var pp=wn(rp.map(function(gp){return gp.shape}),ap),hp=rp.map(function(gp){return gp.as2D(-1,w$1(gp.shape.slice(ap)))}),mp=new ka(hp.map(function(gp){return gp.shape}));return this.compileAndRun(mp,hp).reshape(pp)},np.prototype.neg=function(rp){if(this.shouldExecuteOnCPU([rp]))return this.cpuBackend.neg(rp);if(a$1().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(rp,mu,rp.dtype);var ap=new su(rp.shape,mu);return this.compileAndRun(ap,[rp])},np.prototype.batchMatMul=function(rp,ap,sp,lp){var up=sp?rp.shape[2]:rp.shape[1],cp=lp?ap.shape[1]:ap.shape[2],dp=sp?rp.shape[1]:rp.shape[2],fp=rp.shape[0];if((up===1||cp===1)&&dp>1e3){sp&&(rp=rp.transpose([0,2,1])),lp&&(ap=ap.transpose([0,2,1]));var pp=cp===1?rp:rp.as3D(fp,dp,1),hp=cp===1?2:1,mp=cp===1?ap.as3D(fp,1,dp):ap;return this.multiply(pp,mp).sum(hp,!0)}var gp=Ct(rp.dtype,ap.dtype),vp=new Ti(rp.shape,[fp,up,cp],sp,lp);return this.compileAndRun(vp,[rp,ap],gp)},np.prototype.fusedBatchMatMul=function(rp){var ap=rp.a,sp=rp.b,lp=rp.transposeA,up=rp.transposeB,cp=rp.bias,dp=rp.activation,fp=rp.preluActivationWeights,pp=lp?ap.shape[2]:ap.shape[1],hp=up?sp.shape[1]:sp.shape[2],mp=ap.shape[0],gp=Ct(ap.dtype,sp.dtype),vp=cp!=null,xp=fp!=null,Sp=dp?Pu(dp,!0):null,yp=new Ti(ap.shape,[mp,pp,hp],lp,up,vp,Sp,xp),bp=[ap,sp];return cp&&bp.push(cp),fp&&bp.push(fp),this.compileAndRun(yp,bp,gp)},np.prototype.multiply=function(rp,ap){if(rp.dtype==="complex64"){var sp=this.texData.get(rp.dataId),lp=this.texData.get(ap.dataId),up=new va(pa,rp.shape,ap.shape),cp=new va(da,rp.shape,ap.shape),dp=[this.makeComplexComponentTensorInfo(rp,sp.complexTensors.real),this.makeComplexComponentTensorInfo(rp,sp.complexTensors.imag),this.makeComplexComponentTensorInfo(ap,lp.complexTensors.real),this.makeComplexComponentTensorInfo(ap,lp.complexTensors.imag)],fp=this.compileAndRun(up,dp),pp=this.compileAndRun(cp,dp),hp=this.complex(fp,pp);return fp.dispose(),pp.dispose(),hp}if(this.shouldExecuteOnCPU([rp,ap]))return this.cpuBackend.multiply(rp,ap);if(a$1().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(rp,ap,ya,rp.dtype);var mp=new ba(ya,rp.shape,ap.shape);return this.compileAndRun(mp,[rp,ap],rp.dtype)},np.prototype.batchNormalization=function(rp,ap,sp,lp,up,cp){var dp=[rp,ap,sp],fp=null;cp!=null&&(fp=cp.shape,dp.push(cp));var pp=null;if(up!=null&&(pp=up.shape,dp.push(up)),a$1().getBool("WEBGL_PACK_NORMALIZATION")){var hp=new fa(rp.shape,ap.shape,sp.shape,fp,pp,lp);return this.compileAndRun(hp,dp)}var mp=new ha(rp.shape,ap.shape,sp.shape,fp,pp,lp);return this.compileAndRun(mp,dp)},np.prototype.localResponseNormalization4D=function(rp,ap,sp,lp,up){var cp=a$1().getBool("WEBGL_PACK_NORMALIZATION")?new Si(rp.shape,ap,sp,lp,up):new Ii(rp.shape,ap,sp,lp,up);return this.compileAndRun(cp,[rp])},np.prototype.LRNGrad=function(rp,ap,sp,lp,up,cp,dp){var fp=new ki(ap.shape,lp,up,cp,dp);return this.compileAndRun(fp,[ap,sp,rp])},np.prototype.tile=function(rp,ap){if(rp.dtype==="string"){var sp=this.readSync(rp.dataId).map(function(up){return Z(up)});return Lo(ur(rp.shape,rp.dtype,sp),ap)}var lp=new ru(rp.shape,ap);return this.compileAndRun(lp,[rp])},np.prototype.pad=function(rp,ap,sp){var lp=a$1().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Mi(rp.shape,ap,sp):new _i(rp.shape,ap,sp);return this.compileAndRun(lp,[rp])},np.prototype.transpose=function(rp,ap){if(this.shouldExecuteOnCPU([rp]))return this.cpuBackend.transpose(rp,ap);var sp=a$1().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new au(rp.shape,ap):new ou(rp.shape,ap);return this.compileAndRun(sp,[rp])},np.prototype.gather=function(rp,ap,sp){if(this.shouldExecuteOnCPU([rp,ap]))return this.cpuBackend.gather(rp,ap,sp);var lp=new ni(rp.shape,ap.size,sp);return this.compileAndRun(lp,[rp,ap])},np.prototype.batchToSpaceND=function(rp,ap,sp){g(rp.rank<=4,function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"});var lp=ap.reduce(function(hp,mp){return hp*mp}),up=Mr(rp.shape,ap,lp),cp=Br(up.length,ap.length),dp=Pr(rp.shape,ap,lp),fp=Lr(sp,ap.length),pp=Wr(dp,sp,ap.length);return rp.reshape(up).transpose(cp).reshape(dp).slice(fp,pp)},np.prototype.spaceToBatchND=function(rp,ap,sp){g(rp.rank<=4,function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"});var lp=ap.reduce(function(mp,gp){return mp*gp}),up=[[0,0]];up.push.apply(up,sp);for(var cp=1+ap.length;cp<rp.shape.length;++cp)up.push([0,0]);var dp=rp.pad(up),fp=Mr(dp.shape,ap,lp,!1),pp=Br(fp.length,ap.length,!1),hp=Pr(dp.shape,ap,lp,!1);return dp.reshape(fp).transpose(pp).reshape(hp)},np.prototype.reduce=function(rp,ap,sp){var lp=rp.shape[0],up=rp.shape[1],cp=zr(up),dp=new Li({windowSize:cp,inSize:up,batchSize:lp},ap),fp=this.compileAndRun(dp,[rp],sp);return fp.shape[1]===1?fp:this.reduce(fp,ap,sp)},np.prototype.argReduce=function(rp,ap,sp){sp===void 0&&(sp=null);var lp=rp.shape[0],up=rp.shape[1];sp!=null&&(lp=sp.shape[0],up=sp.shape[1]);var cp=zr(up),dp=new Go({windowSize:cp,inSize:up,batchSize:lp},ap,sp==null),fp=[rp];sp!=null&&fp.push(sp);var pp=this.compileAndRun(dp,fp,"int32");return pp.shape[1]===1?pp:this.argReduce(rp,ap,pp)},np.prototype.argReducePacked=function(rp,ap,sp){sp===void 0&&(sp=null);var lp=sp!=null?sp.shape:rp.shape,up=zr(lp[lp.length-1]),cp=new sa(lp,up,ap,sp==null),dp=sp==null?[rp]:[rp,sp],fp=this.compileAndRun(cp,dp,"int32");return fp.rank===rp.rank?this.argReducePacked(rp,ap,fp):fp},np.prototype.sum=function(rp,ap){mn("sum",ap,rp.rank);var sp=dn(rp.shape,ap),lp=sp[0],up=w$1(sp[1]),cp=rp.as2D(-1,up),dp=Et(rp.dtype);return this.reduce(cp,"sum",dp).reshape(lp)},np.prototype.prod=function(rp,ap){if(this.shouldExecuteOnCPU([rp]))return this.cpuBackend.prod(rp,ap);var sp=dn(rp.shape,ap),lp=sp[0],up=w$1(sp[1]),cp=rp.as2D(-1,up),dp=Et(rp.dtype);return this.reduce(cp,"prod",dp).reshape(lp)},np.prototype.unsortedSegmentSum=function(rp,ap,sp){var lp=0,up=gn([lp],rp.rank),cp=rp;up!=null&&(cp=rp.transpose(up),lp=xn(1,rp.rank)[0]);var dp=function(gp,vp,xp){for(var Sp=[],yp=gp.length,bp=0;bp<yp;bp++)bp!==vp?Sp.push(gp[bp]):Sp.push(xp);return Sp}(cp.shape,lp,sp),fp=w$1([cp.shape[lp]]),pp=cp.as2D(-1,fp),hp=Et(rp.dtype),mp=this.segOpCompute(pp,"unsortedSegmentSum",ap,hp,sp).reshape(dp);return up!=null&&(mp=mp.transpose(yn(up))),mp},np.prototype.segOpCompute=function(rp,ap,sp,lp,up){var cp=rp.shape[0],dp=rp.shape[1],fp=function(mp,gp){var vp,xp=!1;for(mp<=Vr?(vp=mp,xp=!0):vp=H(mp,Math.floor(Math.sqrt(mp)));!xp;)vp>gp||vp===mp?xp=!0:vp=H(mp,vp+1);return vp}(dp,up),pp=new Xi({windowSize:fp,inSize:dp,batchSize:cp,numSegments:up},ap),hp=this.compileAndRun(pp,[rp,sp],lp);return hp.shape[1]===up?hp:(sp=Un(0,up).tile([dp/fp]),this.segOpCompute(hp,ap,sp,lp,up))},np.prototype.argMinMaxReduce=function(rp,ap,sp){var lp=[ap];if(mn("arg"+sp.charAt(0).toUpperCase()+sp.slice(1),lp,rp.rank),!a$1().getBool("WEBGL_PACK_REDUCE")||rp.rank<=2){var up=dn(rp.shape,lp),cp=up[0],dp=w$1(up[1]),fp=rp.as2D(-1,dp);return this.argReduce(fp,sp).reshape(cp)}return this.argReducePacked(rp,sp)},np.prototype.argMin=function(rp,ap){return this.argMinMaxReduce(rp,ap,"min")},np.prototype.argMax=function(rp,ap){return this.argMinMaxReduce(rp,ap,"max")},np.prototype.cumsum=function(rp,ap,sp,lp){if(ap!==rp.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(rp.rank-1)+" but got axis="+ap);var up=new Ua(rp.shape,sp,lp);return this.compileAndRun(up,[rp])},np.prototype.equal=function(rp,ap){if(a$1().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(rp,ap,`
  return vec4(equal(a, b));
`,"bool");var sp=new ba("return float(a == b);",rp.shape,ap.shape);return this.compileAndRun(sp,[rp,ap],"bool")},np.prototype.notEqual=function(rp,ap){if(a$1().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(rp,ap,`
  return vec4(notEqual(a, b));
`,"bool");var sp=new ba("return float(a != b);",rp.shape,ap.shape);return this.compileAndRun(sp,[rp,ap],"bool")},np.prototype.less=function(rp,ap){if(this.shouldExecuteOnCPU([rp,ap]))return this.cpuBackend.less(rp,ap);if(a$1().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(rp,ap,`
  return vec4(lessThan(a, b));
`,"bool");var sp=new ba("return float(a < b);",rp.shape,ap.shape);return this.compileAndRun(sp,[rp,ap],"bool")},np.prototype.lessEqual=function(rp,ap){if(a$1().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(rp,ap,`
  return vec4(lessThanEqual(a, b));
`,"bool");var sp=new ba("return float(a <= b);",rp.shape,ap.shape);return this.compileAndRun(sp,[rp,ap],"bool")},np.prototype.greater=function(rp,ap){if(this.shouldExecuteOnCPU([rp,ap]))return this.cpuBackend.greater(rp,ap);if(a$1().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(rp,ap,`
  return vec4(greaterThan(a, b));
`,"bool");var sp=new ba("return float(a > b);",rp.shape,ap.shape);return this.compileAndRun(sp,[rp,ap],"bool")},np.prototype.greaterEqual=function(rp,ap){if(a$1().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(rp,ap,`
  return vec4(greaterThanEqual(a, b));
`,"bool");var sp=new ba("return float(a >= b);",rp.shape,ap.shape);return this.compileAndRun(sp,[rp,ap],"bool")},np.prototype.logicalNot=function(rp){var ap=new su(rp.shape,"return float(!(x >= 1.0));");return this.compileAndRun(ap,[rp])},np.prototype.logicalAnd=function(rp,ap){if(a$1().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(rp,ap,`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,"bool");var sp=new ba("return float(a >= 1.0 && b >= 1.0);",rp.shape,ap.shape);return this.compileAndRun(sp,[rp,ap],"bool")},np.prototype.logicalOr=function(rp,ap){if(a$1().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(rp,ap,`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,"bool");var sp=new ba("return float(a >= 1.0 || b >= 1.0);",rp.shape,ap.shape);return this.compileAndRun(sp,[rp,ap],"bool")},np.prototype.select=function(rp,ap,sp){var lp=new $i(rp.rank,ap.shape,ap.rank);return this.compileAndRun(lp,[rp,ap,sp],Ct(ap.dtype,sp.dtype))},np.prototype.where=function(rp){un("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var ap=rp.dataSync();return Uo(rp.shape,ap)},np.prototype.topk=function(rp,ap,sp){return Wo(rp.dataSync(),rp.shape,rp.dtype,ap)},np.prototype.min=function(rp,ap){mn("min",ap,rp.rank);var sp=dn(rp.shape,ap),lp=sp[0],up=w$1(sp[1]),cp=rp.as2D(-1,up);return this.reduce(cp,"min",cp.dtype).reshape(lp)},np.prototype.minimum=function(rp,ap){if(this.shouldExecuteOnCPU([rp,ap]))return this.cpuBackend.minimum(rp,ap);var sp=a$1().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ca(`
  vec4 result = vec4(min(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,rp.shape,ap.shape):new ba(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return min(a, b);
`,rp.shape,ap.shape);return this.compileAndRun(sp,[rp,ap])},np.prototype.mod=function(rp,ap){var sp=a$1().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ca(`
  vec4 result = mod(a, b);
  vec4 isNaN = vec4(equal(b, vec4(0.0)));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,rp.shape,ap.shape):new ba(`if (b == 0.0) return NAN;
  return mod(a, b);`,rp.shape,ap.shape);return this.compileAndRun(sp,[rp,ap])},np.prototype.max=function(rp,ap){if(this.shouldExecuteOnCPU([rp]))return this.cpuBackend.max(rp,ap);mn("max",ap,rp.rank);var sp=dn(rp.shape,ap),lp=sp[0],up=w$1(sp[1]),cp=rp.as2D(-1,up);return this.reduce(cp,"max",cp.dtype).reshape(lp)},np.prototype.maximum=function(rp,ap){if(this.shouldExecuteOnCPU([rp,ap]))return this.cpuBackend.maximum(rp,ap);var sp=a$1().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ca(`
  vec4 result = vec4(max(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,rp.shape,ap.shape):new ba(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return max(a, b);
`,rp.shape,ap.shape);return this.compileAndRun(sp,[rp,ap])},np.prototype.all=function(rp,ap){mn("all",ap,rp.rank);var sp=dn(rp.shape,ap),lp=sp[0],up=w$1(sp[1]),cp=rp.as2D(-1,up);return this.reduce(cp,"all",cp.dtype).reshape(lp)},np.prototype.any=function(rp,ap){mn("any",ap,rp.rank);var sp=dn(rp.shape,ap),lp=sp[0],up=w$1(sp[1]),cp=rp.as2D(-1,up);return this.reduce(cp,"any",cp.dtype).reshape(lp)},np.prototype.squaredDifference=function(rp,ap){var sp=a$1().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ca("return (a - b) * (a - b);",rp.shape,ap.shape):new ba("return (a - b) * (a - b);",rp.shape,ap.shape);return this.compileAndRun(sp,[rp,ap])},np.prototype.realDivide=function(rp,ap){if(a$1().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(rp,ap,`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,"float32",!0);var sp=new ba(`
if (a == b) {
  return 1.0;
};
return a / b;`,rp.shape,ap.shape);return this.compileAndRun(sp,[rp,ap],"float32")},np.prototype.floorDiv=function(rp,ap){if(a$1().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(rp,ap,`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,"int32");var sp=new ba(`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,rp.shape,ap.shape);return this.compileAndRun(sp,[rp,ap],"int32")},np.prototype.add=function(rp,ap){if(rp.dtype==="complex64"&&ap.dtype==="complex64")return this.complexSeparableBinaryOp(rp,ap,ma);if(this.shouldExecuteOnCPU([rp,ap]))return this.cpuBackend.add(rp,ap);var sp=Ct(rp.dtype,ap.dtype);if(a$1().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(rp,ap,ma,sp);var lp=new ba(ma,rp.shape,ap.shape);return this.compileAndRun(lp,[rp,ap],sp)},np.prototype.packedUnaryOp=function(rp,ap,sp){var lp=new _u(rp.shape,ap);return this.compileAndRun(lp,[rp],sp)},np.prototype.packedBinaryOp=function(rp,ap,sp,lp,up){up===void 0&&(up=!1);var cp=new Ca(sp,rp.shape,ap.shape,up);return this.compileAndRun(cp,[rp,ap],lp)},np.prototype.complexSeparableBinaryOp=function(rp,ap,sp){var lp=this,up=this.texData.get(rp.dataId),cp=this.texData.get(ap.dataId),dp=[[up.complexTensors.real,cp.complexTensors.real],[up.complexTensors.imag,cp.complexTensors.imag]].map(function(mp){var gp=mp[0],vp=mp[1],xp=lp.makeComplexComponentTensorInfo(rp,gp),Sp=lp.makeComplexComponentTensorInfo(ap,vp),yp=new ba(sp,rp.shape,ap.shape);return lp.compileAndRun(yp,[xp,Sp],Ct(gp.dtype,vp.dtype))}),fp=dp[0],pp=dp[1],hp=this.complex(fp,pp);return fp.dispose(),pp.dispose(),hp},np.prototype.makeComplexComponentTensorInfo=function(rp,ap){return{dataId:ap.dataId,dtype:ap.dtype,shape:rp.shape}},np.prototype.addN=function(rp){if(rp.length===1)return rp[0];if(rp.length>a$1().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var ap=Math.floor(rp.length/2),sp=this.addN(rp.slice(0,ap)),lp=this.addN(rp.slice(ap));return this.addN([sp,lp])}var up=rp.map(function(fp){return fp.dtype}).reduce(function(fp,pp){return Ct(fp,pp)}),cp=rp.map(function(fp){return fp.shape}),dp=a$1().getBool("WEBGL_PACK")?new zo(rp[0].shape,cp):new Vo(rp[0].shape,cp);return this.compileAndRun(dp,rp,up)},np.prototype.subtract=function(rp,ap){if(rp.dtype==="complex64"&&ap.dtype==="complex64")return this.complexSeparableBinaryOp(rp,ap,ga);if(this.shouldExecuteOnCPU([rp,ap]))return this.cpuBackend.subtract(rp,ap);var sp=Ct(rp.dtype,ap.dtype);if(a$1().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(rp,ap,ga,rp.dtype);var lp=new ba(ga,rp.shape,ap.shape);return this.compileAndRun(lp,[rp,ap],sp)},np.prototype.pow=function(rp,ap){var sp=a$1().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ca(`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,rp.shape,ap.shape):new ba(`
if(a < 0.0 && floor(b) < b){
  return NAN;
}
if (b == 0.0) {
  return 1.0;
}
return (round(mod(b, 2.0)) != 1) ?
    pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,rp.shape,ap.shape),lp=Ct(rp.dtype,ap.dtype);return this.compileAndRun(sp,[rp,ap],lp)},np.prototype.ceil=function(rp){if(this.shouldExecuteOnCPU([rp]))return this.cpuBackend.ceil(rp);if(a$1().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(rp,gu,rp.dtype);var ap=new su(rp.shape,gu);return this.compileAndRun(ap,[rp])},np.prototype.floor=function(rp){if(this.shouldExecuteOnCPU([rp]))return this.cpuBackend.floor(rp);if(a$1().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(rp,yu,rp.dtype);var ap=new su(rp.shape,yu);return this.compileAndRun(ap,[rp])},np.prototype.sign=function(rp){var ap=new su(rp.shape,`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`);return this.compileAndRun(ap,[rp])},np.prototype.isNaN=function(rp){var ap=new su(rp.shape,"return float(isnan(x));");return this.compileAndRun(ap,[rp],"bool")},np.prototype.isInf=function(rp){var ap=new su(rp.shape,"return float(isinf(x));");return this.compileAndRun(ap,[rp],"bool")},np.prototype.isFinite=function(rp){var ap=new su(rp.shape,"return float(!isnan(x) && !isinf(x));");return this.compileAndRun(ap,[rp],"bool")},np.prototype.round=function(rp){var ap=new su(rp.shape,`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`);return this.compileAndRun(ap,[rp])},np.prototype.exp=function(rp){if(this.shouldExecuteOnCPU([rp]))return this.cpuBackend.exp(rp);if(a$1().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(rp,xu,rp.dtype);var ap=new su(rp.shape,xu);return this.compileAndRun(ap,[rp])},np.prototype.expm1=function(rp){if(this.shouldExecuteOnCPU([rp]))return this.cpuBackend.expm1(rp);if(a$1().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(rp,bu,rp.dtype);var ap=new su(rp.shape,bu);return this.compileAndRun(ap,[rp])},np.prototype.log=function(rp){if(this.shouldExecuteOnCPU([rp]))return this.cpuBackend.log(rp);if(a$1().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(rp,`
  vec4 result = log(x);
  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));
  result.r = isNaN.r == 1.0 ? NAN : result.r;
  result.g = isNaN.g == 1.0 ? NAN : result.g;
  result.b = isNaN.b == 1.0 ? NAN : result.b;
  result.a = isNaN.a == 1.0 ? NAN : result.a;

  return result;
`,rp.dtype);var ap=new su(rp.shape,`if (x < 0.0) return NAN;
  return log(x);`);return this.compileAndRun(ap,[rp])},np.prototype.log1p=function(rp){var ap=new su(rp.shape,"return log(1.0 + x);");return this.compileAndRun(ap,[rp])},np.prototype.sqrt=function(rp){var ap=new su(rp.shape,"return sqrt(x);");return this.compileAndRun(ap,[rp])},np.prototype.rsqrt=function(rp){if(this.shouldExecuteOnCPU([rp]))return this.cpuBackend.rsqrt(rp);var ap=new su(rp.shape,"return inversesqrt(x);");return this.compileAndRun(ap,[rp])},np.prototype.reciprocal=function(rp){var ap=new su(rp.shape,"return 1.0 / x;");return this.compileAndRun(ap,[rp])},np.prototype.relu=function(rp){var ap;return ap=a$1().getBool("WEBGL_PACK")?new _u(rp.shape,Nu):new su(rp.shape,fu),this.compileAndRun(ap,[rp])},np.prototype.relu6=function(rp){var ap;return ap=a$1().getBool("WEBGL_PACK")?new _u(rp.shape,Fu):new su(rp.shape,pu),this.compileAndRun(ap,[rp])},np.prototype.prelu=function(rp,ap){var sp=a$1().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ca(wa,rp.shape,ap.shape):new ba(xa,rp.shape,ap.shape);return this.compileAndRun(sp,[rp,ap])},np.prototype.elu=function(rp){if(a$1().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(rp,Ou,rp.dtype);var ap=new su(rp.shape,du);return this.compileAndRun(ap,[rp])},np.prototype.eluDer=function(rp,ap){var sp=a$1().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ca(`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,rp.shape,ap.shape):new ba("return (b >= 1.0) ? a : a * (b + 1.0);",rp.shape,ap.shape);return this.compileAndRun(sp,[rp,ap])},np.prototype.selu=function(rp){var ap=new su(rp.shape,vu);return this.compileAndRun(ap,[rp])},np.prototype.int=function(rp){var ap=new su(rp.shape,"return float(int(x));");return this.compileAndRun(ap,[rp],"int32")},np.prototype.clip=function(rp,ap,sp){var lp,up=(lp=a$1().getBool("WEBGL_PACK_CLIP")?new Ra(rp.shape):new Ea(rp.shape)).getCustomSetupFunc(ap,sp);return this.compileAndRun(lp,[rp],null,up)},np.prototype.abs=function(rp){if(this.shouldExecuteOnCPU([rp]))return this.cpuBackend.abs(rp);if(a$1().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(rp,hu,rp.dtype);var ap=new su(rp.shape,hu);return this.compileAndRun(ap,[rp])},np.prototype.complexAbs=function(rp){var ap=this.texData.get(rp.dataId),sp=new Ia(rp.shape),lp=[this.makeComplexComponentTensorInfo(rp,ap.complexTensors.real),this.makeComplexComponentTensorInfo(rp,ap.complexTensors.imag)];return this.compileAndRun(sp,lp)},np.prototype.sigmoid=function(rp){var ap=new su(rp.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(ap,[rp])},np.prototype.softplus=function(rp){var ap=new su(rp.shape,`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`);return this.compileAndRun(ap,[rp])},np.prototype.sin=function(rp){var ap=new su(rp.shape,wu);return this.compileAndRun(ap,[rp])},np.prototype.cos=function(rp){var ap=new su(rp.shape,Cu);return this.compileAndRun(ap,[rp])},np.prototype.tan=function(rp){var ap=new su(rp.shape,"return tan(x);");return this.compileAndRun(ap,[rp])},np.prototype.asin=function(rp){var ap=new su(rp.shape,Eu);return this.compileAndRun(ap,[rp])},np.prototype.acos=function(rp){var ap=new su(rp.shape,Ru);return this.compileAndRun(ap,[rp])},np.prototype.atan=function(rp){var ap=new su(rp.shape,Iu);return this.compileAndRun(ap,[rp])},np.prototype.atan2=function(rp,ap){var sp=a$1().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ca(`
  vec4 result = atan(a, b);
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,rp.shape,ap.shape):new ba(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return atan(a, b);
`,rp.shape,ap.shape);return this.compileAndRun(sp,[rp,ap])},np.prototype.sinh=function(rp){var ap=new su(rp.shape,`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`);return this.compileAndRun(ap,[rp])},np.prototype.cosh=function(rp){var ap=new su(rp.shape,`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`);return this.compileAndRun(ap,[rp])},np.prototype.tanh=function(rp){var ap=new su(rp.shape,`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`);return this.compileAndRun(ap,[rp])},np.prototype.asinh=function(rp){var ap=new su(rp.shape,ku);return this.compileAndRun(ap,[rp])},np.prototype.acosh=function(rp){var ap=new su(rp.shape,Su);return this.compileAndRun(ap,[rp])},np.prototype.atanh=function(rp){var ap=new su(rp.shape,Au);return this.compileAndRun(ap,[rp])},np.prototype.erf=function(rp){var ap=new su(rp.shape,`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = 0.3275911;
  float a1 = 0.254829592;
  float a2 = -0.284496736;
  float a3 = 1.421413741;
  float a4 = -1.453152027;
  float a5 = 1.061405429;

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`);return this.compileAndRun(ap,[rp])},np.prototype.step=function(rp,ap){var sp=new su(rp.shape,function(lp){return lp===void 0&&(lp=0),cu+`
    return x > 0.0 ? 1.0 : float(`+lp+`);
  `}(ap));return this.compileAndRun(sp,[rp])},np.prototype.conv2dByMatMul=function(rp,ap,sp,lp,up,cp){var dp=rp.shape,fp=this.texData.get(rp.dataId),pp=sp.inChannels,hp=dp[0]*dp[1]*dp[2],mp=sp.outChannels,gp=sp.dataFormat==="channelsLast",vp=(hp===1||mp===1)&&pp>1e3,xp=dp[2]%2!=0&&!!fp.isPacked;if(vp||!a$1().getBool("WEBGL_LAZILY_UNPACK")||!a$1().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!xp){var Sp=gp?dp[0]*dp[1]*dp[2]:dp[0]*dp[2]*dp[3],yp=this.reshape(rp,[1,Sp,sp.inChannels]),bp=this.reshape(ap,[1,sp.inChannels,sp.outChannels]);return this.reshape(this.fusedBatchMatMul({a:yp,b:bp,transposeA:!1,transposeB:!1,bias:lp,activation:up,preluActivationWeights:cp}),sp.outShape)}var Ep=gp?dp[0]*dp[1]*(dp[2]+1):dp[0]*dp[2]*(dp[3]+1),wp={dataId:rp.dataId,shape:[1,Ep,sp.inChannels],dtype:rp.dtype},_p=fp.shape;fp.shape=fp.shape.slice(),fp.shape[fp.shape.length-2]++,g(Se(fp.shape,wp.shape),function(){return"packed reshape "+fp.shape+" to "+wp.shape+" isn't free"});var Cp=this.reshape(ap,[1,sp.inChannels,sp.outChannels]),$p=this.fusedBatchMatMul({a:wp,b:Cp,transposeA:!1,transposeB:!1,bias:lp,activation:up,preluActivationWeights:cp}),Rp=this.texData.get($p.dataId);return g(Rp.isPacked,function(){return"batchMatMul result is expected to be packed"}),fp.shape=_p,Rp.shape=sp.outShape,Nt.makeTensorFromDataId($p.dataId,sp.outShape,$p.dtype)},np.prototype.conv2dWithIm2Row=function(rp,ap,sp,lp,up,cp){var dp=sp.filterWidth,fp=sp.filterHeight,pp=sp.inChannels,hp=sp.outWidth,mp=sp.outHeight,gp=sp.dataFormat==="channelsLast",vp=dp*fp*pp,xp=mp*hp,Sp=[vp,xp],yp=rp.squeeze([0]),bp=ap.reshape([1,vp,-1]),Ep=new Ri(Sp,yp.shape,sp),wp=this.compileAndRun(Ep,[yp]).reshape([1,Sp[0],Sp[1]]),_p=lp!=null,Cp=cp!=null,$p=up?Pu(up,!0):null,Rp=new Ti(wp.shape,[1,xp,sp.outChannels],!0,!1,_p,$p,Cp),Pp=[wp,bp];lp&&Pp.push(lp),Cp&&Pp.push(cp);var Op=this.compileAndRun(Rp,Pp);return gp?Op.reshape([1,mp,hp,sp.outChannels]):Op.reshape([1,sp.outChannels,mp,hp])},np.prototype.fusedConv2d=function(rp){var ap=rp.input,sp=rp.filter,lp=rp.convInfo,up=rp.bias,cp=rp.activation,dp=rp.preluActivationWeights;if(lp.filterHeight===1&&lp.filterWidth===1&&lp.dilationHeight===1&&lp.dilationWidth===1&&lp.strideHeight===1&&lp.strideWidth===1&&(lp.padInfo.type==="SAME"||lp.padInfo.type==="VALID"))return this.conv2dByMatMul(ap,sp,lp,up,cp,dp);if(a$1().getBool("WEBGL_CONV_IM2COL")&&ap.shape[0]===1)return this.conv2dWithIm2Row(ap,sp,lp,up,cp,dp);var fp=up!=null,pp=dp!=null,hp=cp?Pu(cp,!1):null,mp=new Ma(lp,fp,hp,pp),gp=[ap,sp];return up&&gp.push(up),dp&&gp.push(dp),this.compileAndRun(mp,gp)},np.prototype.conv2d=function(rp,ap,sp){if(sp.filterHeight===1&&sp.filterWidth===1&&sp.dilationHeight===1&&sp.dilationWidth===1&&sp.strideHeight===1&&sp.strideWidth===1&&(sp.padInfo.type==="SAME"||sp.padInfo.type==="VALID"))return this.conv2dByMatMul(rp,ap,sp);if(a$1().getBool("WEBGL_CONV_IM2COL")&&rp.shape[0]===1)return this.conv2dWithIm2Row(rp,ap,sp);var lp=new Ma(sp);return this.compileAndRun(lp,[rp,ap])},np.prototype.conv2dDerInput=function(rp,ap,sp){var lp=new Ta(sp);return this.compileAndRun(lp,[rp,ap])},np.prototype.conv2dDerFilter=function(rp,ap,sp){var lp=new Da(sp);return this.compileAndRun(lp,[rp,ap])},np.prototype.fusedDepthwiseConv2D=function(rp){var ap,sp=rp.input,lp=rp.filter,up=rp.convInfo,cp=rp.bias,dp=rp.activation,fp=rp.preluActivationWeights,pp=a$1().getBool("WEBGL_PACK_DEPTHWISECONV")&&up.strideWidth<=2&&up.outChannels/up.inChannels==1,hp=dp?Pu(dp,pp):null,mp=[sp,lp],gp=cp!=null,vp=fp!=null;return gp&&mp.push(cp),vp&&mp.push(fp),pp?(ap=new La(up,gp,hp,vp),this.compileAndRun(ap,mp)):(ap=new Pa(up,gp,hp,vp),this.compileAndRun(ap,mp))},np.prototype.depthwiseConv2D=function(rp,ap,sp){var lp;return a$1().getBool("WEBGL_PACK_DEPTHWISECONV")&&sp.strideWidth<=2&&sp.outChannels/sp.inChannels==1?(lp=new La(sp),this.compileAndRun(lp,[rp,ap])):(lp=new Pa(sp),this.compileAndRun(lp,[rp,ap]))},np.prototype.depthwiseConv2DDerInput=function(rp,ap,sp){var lp=new _a(sp);return this.compileAndRun(lp,[rp,ap])},np.prototype.depthwiseConv2DDerFilter=function(rp,ap,sp){var lp=new Oa(sp);return this.compileAndRun(lp,[rp,ap])},np.prototype.conv3d=function(rp,ap,sp){var lp=new Ba(sp);return this.compileAndRun(lp,[rp,ap])},np.prototype.conv3dDerInput=function(rp,ap,sp){var lp=new Fa(sp);return this.compileAndRun(lp,[rp,ap])},np.prototype.conv3dDerFilter=function(rp,ap,sp){var lp=new Na(sp);return this.compileAndRun(lp,[rp,ap])},np.prototype.maxPool=function(rp,ap){var sp=new Bi(ap,"max",!1);return this.compileAndRun(sp,[rp])},np.prototype.avgPool=function(rp,ap){var sp=new Bi(ap,"avg",!1);return this.compileAndRun(sp,[rp],"float32")},np.prototype.maxPoolBackprop=function(rp,ap,sp,lp){var up=new Bi(lp,"max",!0),cp=this.compileAndRun(up,[ap]),dp=new Ai(lp),fp=this.compileAndRun(dp,[rp,cp],ap.dtype);return cp.dispose(),fp},np.prototype.avgPoolBackprop=function(rp,ap,sp){var lp=new ca(sp);return this.compileAndRun(lp,[rp],ap.dtype)},np.prototype.cast=function(rp,ap){return So(rp,ap,this)},np.prototype.unstack=function(rp,ap){for(var sp=rp.shape[ap],lp=new Array(rp.rank-1),up=0,cp=0;cp<rp.rank;cp++)cp!==ap&&(lp[up++]=rp.shape[cp]);var dp=new Array(rp.rank).fill(0),fp=rp.shape.slice();fp[ap]=1;var pp=new Array(sp);for(cp=0;cp<pp.length;cp++)dp[ap]=cp,pp[cp]=this.slice(rp,dp,fp).reshape(lp);return pp},np.prototype.avgPool3d=function(rp,ap){var sp=new Pi(ap,"avg",!1);return this.compileAndRun(sp,[rp],"float32")},np.prototype.avgPool3dBackprop=function(rp,ap,sp){var lp=new la(sp);return this.compileAndRun(lp,[rp],ap.dtype)},np.prototype.maxPool3d=function(rp,ap){var sp=new Pi(ap,"max",!1);return this.compileAndRun(sp,[rp],"float32")},np.prototype.maxPool3dBackprop=function(rp,ap,sp,lp){var up=new Pi(lp,"max",!0),cp=this.compileAndRun(up,[ap]),dp=new Di(lp),fp=this.compileAndRun(dp,[rp,cp],ap.dtype);return cp.dispose(),fp},np.prototype.reshape=function(rp,ap){var sp=this.texData.get(rp.dataId);if(sp.isPacked&&!Se(rp.shape,ap)&&(sp.texture===null||!Se(sp.shape,ap))){var lp=this.packedReshape(rp,ap);return Nt.makeTensorFromDataId(lp.dataId,lp.shape,lp.dtype)}return Ao(rp,ap)},np.prototype.resizeBilinear=function(rp,ap,sp,lp){var up=a$1().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new zi(rp.shape,ap,sp,lp):new Vi(rp.shape,ap,sp,lp);return this.compileAndRun(up,[rp])},np.prototype.resizeBilinearBackprop=function(rp,ap,sp){var lp=new Ui(rp,ap,sp);return this.compileAndRun(lp,[rp])},np.prototype.resizeNearestNeighbor=function(rp,ap,sp,lp){var up=new Hi(rp.shape,ap,sp,lp);return this.compileAndRun(up,[rp])},np.prototype.resizeNearestNeighborBackprop=function(rp,ap,sp){var lp=new Gi(rp,ap,sp);return this.compileAndRun(lp,[rp])},np.prototype.multinomial=function(rp,ap,sp,lp){var up=ap?rp:io(rp),cp=up.shape[0],dp=up.shape[1],fp=new Ni(cp,dp,sp),pp=fp.getCustomSetupFunc(lp);return this.compileAndRun(fp,[up],"int32",pp)},np.prototype.oneHot=function(rp,ap,sp,lp){var up=new Fi(rp.size,ap,sp,lp);return this.compileAndRun(up,[rp])},np.prototype.diag=function(rp){var ap=new qa(rp.size);return this.compileAndRun(ap,[rp])},np.prototype.nonMaxSuppression=function(rp,ap,sp,lp,up){return un("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),Mo(rp.dataSync(),ap.dataSync(),sp,lp,up)},np.prototype.cropAndResize=function(rp,ap,sp,lp,up,cp){var dp=new Wa(rp.shape,ap.shape,lp,up,cp);return this.compileAndRun(dp,[rp,ap,sp])},np.prototype.depthToSpace=function(rp,ap,sp){g(ap>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+ap});var lp=rp.shape[0],up=sp==="NHWC"?rp.shape[1]:rp.shape[2],cp=sp==="NHWC"?rp.shape[2]:rp.shape[3],dp=sp==="NHWC"?rp.shape[3]:rp.shape[1],fp=up*ap,pp=cp*ap,hp=dp/(ap*ap),mp=new Ha(sp==="NHWC"?[lp,fp,pp,hp]:[lp,hp,fp,pp],ap,sp);return this.compileAndRun(mp,[rp])},np.prototype.split=function(rp,ap,sp){return Po(rp,ap,sp)},np.prototype.scatterND=function(rp,ap,sp){var lp=Hr(0,rp,sp),up=lp.sliceRank,cp=lp.numUpdates,dp=lp.sliceSize,fp=lp.strides,pp=lp.outputSize,hp=[pp/dp,dp],mp=rp.reshape([cp,up]),gp=ap.reshape([cp,dp]);if(pp===0)return Ao(kn([]),sp);var vp=An(0),xp=new ji(cp,up,mp.rank,gp.rank,fp,hp);return this.compileAndRun(xp,[gp,mp,vp]).reshape(sp)},np.prototype.sparseToDense=function(rp,ap,sp,lp){var up=Hr(0,rp,sp),cp=up.sliceRank,dp=up.numUpdates,fp=up.strides,pp=up.outputSize,hp=new ji(dp,cp,rp.rank,ap.rank,fp,[pp,1],!1);return this.compileAndRun(hp,[ap,rp,lp]).reshape(sp)},np.prototype.fft=function(rp){return this.fftImpl(rp,!1)},np.prototype.ifft=function(rp){return this.fftImpl(rp,!0)},np.prototype.fftImpl=function(rp,ap){var sp=this.texData.get(rp.dataId),lp=new Ja(Ya,rp.shape,ap),up=new Ja(Qa,rp.shape,ap),cp=[this.makeComplexComponentTensorInfo(rp,sp.complexTensors.real),this.makeComplexComponentTensorInfo(rp,sp.complexTensors.imag)],dp=this.compileAndRun(lp,cp),fp=this.compileAndRun(up,cp),pp=this.complex(dp,fp).as2D(rp.shape[0],rp.shape[1]);return dp.dispose(),fp.dispose(),pp},np.prototype.gatherND=function(rp,ap){var sp=ap.shape,lp=sp[sp.length-1],up=Ur(rp,ap),cp=up[0],dp=up[1],fp=up[2],pp=up[3],hp=ap.reshape([dp,lp]),mp=rp.reshape([rp.size/fp,fp]),gp=new ri(lp,pp,[dp,fp]);return this.compileAndRun(gp,[mp,hp]).reshape(cp)},np.prototype.fill=function(rp,ap,sp){if((sp=sp||z(ap))==="string"){var lp=F(sp,w$1(rp));return lp.fill(ap),Nt.makeTensor(lp,rp,sp,this)}var up=new Za(rp,ap),cp=up.getCustomSetupFunc(ap);return this.compileAndRun(up,[],sp,cp)},np.prototype.onesLike=function(rp){if(rp.dtype==="string")throw new Error("onesLike is not supported under string dtype");return this.fill(rp.shape,1,rp.dtype)},np.prototype.zerosLike=function(rp){return this.fill(rp.shape,rp.dtype==="string"?"":0,rp.dtype)},np.prototype.linspace=function(rp,ap,sp){return Do(rp,ap,sp)},np.prototype.makeTensorInfo=function(rp,ap){var sp=this.write(null,rp,ap);return this.texData.get(sp).usage=null,{dataId:sp,shape:rp,dtype:ap}},np.prototype.makeOutput=function(rp,ap){var sp=this.makeTensorInfo(rp,ap).dataId;return Nt.makeTensorFromDataId(sp,rp,ap,this)},np.prototype.unpackTensor=function(rp){var ap=new Mu(rp.shape);return this.runWebGLProgram(ap,[rp],rp.dtype)},np.prototype.packTensor=function(rp){var ap=new Oi(rp.shape);return this.runWebGLProgram(ap,[rp],rp.dtype,null,!0)},np.prototype.packedReshape=function(rp,ap){var sp=[Ce(rp.shape)].concat(Ee(rp.shape)),lp={dtype:rp.dtype,shape:sp,dataId:rp.dataId},up=[Ce(ap)].concat(Ee(ap)),cp=new Wi(up,sp),dp=this.runWebGLProgram(cp,[lp],rp.dtype,null,!0);return{dataId:dp.dataId,shape:ap,dtype:dp.dtype}},np.prototype.decode=function(rp){var ap,sp=this.texData.get(rp),lp=sp.isPacked,up=sp.shape,cp=sp.dtype,dp=Re(up);return ap=lp?new Ga(dp):new za(dp),{dtype:cp,shape:up,dataId:this.runWebGLProgram(ap,[{shape:dp,dtype:cp,dataId:rp}],cp,null,!0).dataId}},np.prototype.runWebGLProgram=function(rp,ap,sp,lp,up){var cp=this;up===void 0&&(up=!1);var dp=this.makeTensorInfo(rp.outputShape,sp),fp=this.texData.get(dp.dataId);if(rp.packedOutput&&(fp.isPacked=!0),rp.outPackingScheme===_t.DENSE){var pp=Gt(rp.outputShape);fp.texShape=pp.map(function(Ep){return 2*Ep})}if(rp.outTexUsage!=null&&(fp.usage=rp.outTexUsage),w$1(dp.shape)===0)return fp.values=N(dp.dtype,0),dp;var hp=[],mp=ap.map(function(Ep){if(Ep.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var wp=cp.texData.get(Ep.dataId);if(wp.texture==null){if(!rp.packedInputs&&w$1(Ep.shape)<=a$1().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:Ep.shape,texData:null,isUniform:!0,uniformValues:wp.values};rp.packedInputs&&(wp.isPacked=!0,wp.shape=Ep.shape)}else if(!!wp.isPacked!=!!rp.packedInputs)Ep=wp.isPacked?cp.unpackTensor(Ep):cp.packTensor(Ep),hp.push(Ep),wp=cp.texData.get(Ep.dataId);else if(wp.isPacked&&!Se(wp.shape,Ep.shape)){var _p=Ep,Cp=Ep.shape;Ep.shape=wp.shape,Ep=cp.packedReshape(Ep,Cp),hp.push(Ep),wp=cp.texData.get(Ep.dataId),_p.shape=Cp}return cp.uploadToGPU(Ep.dataId),{shape:Ep.shape,texData:wp,isUniform:!1}});this.uploadToGPU(dp.dataId);var gp,vp={shape:dp.shape,texData:fp,isUniform:!1},xp=function(Ep,wp,_p){var Cp="";wp.concat(_p).forEach(function(Pp){var Op=Pp.texData!=null&&Pp.texData.slice!=null&&Pp.texData.slice.flatOffset>0,jp=Pp.isUniform?"uniform":Pp.texData.texShape;Cp+=Pp.shape+"_"+jp+"_"+Op});var $p=Ep.userCode,Rp=Ep.constructor.name;return Rp+="_"+Cp+"_"+$p}(rp,mp,vp),Sp=this.getAndSaveBinary(xp,function(){return function(Ep,wp,_p,Cp){var $p=wp.userCode,Rp=_p.map(function(Tp,Np){var Lp={logicalShape:Tp.shape,texShape:Tp.isUniform?null:Tp.texData.texShape,isUniform:Tp.isUniform,isPacked:!Tp.isUniform&&Tp.texData.isPacked,flatOffset:null};return Tp.texData!=null&&Tp.texData.slice!=null&&Tp.texData.slice.flatOffset>0&&(Lp.flatOffset=Tp.texData.slice.flatOffset),{name:wp.variableNames[Np],shapeInfo:Lp}}),Pp=Rp.map(function(Tp){return Tp.shapeInfo}),Op={logicalShape:Cp.shape,texShape:Cp.texData.texShape,isUniform:!1,isPacked:Cp.texData.isPacked,flatOffset:null},jp=Yo(Rp,Op,$p,wp.packedInputs),Mp=Ep.createProgram(jp),Ap=null,Dp=Ep.getUniformLocation(Mp,"NAN",!1);a$1().getNumber("WEBGL_VERSION")===1&&(Ap=Ep.getUniformLocation(Mp,"INFINITY",!1));for(var Fp={},Ip=0;Ip<wp.variableNames.length;Ip++){var kp=wp.variableNames[Ip];Fp[kp]=Ep.getUniformLocation(Mp,kp,!1),Fp["offset"+kp]=Ep.getUniformLocation(Mp,"offset"+kp,!1)}return{program:wp,source:jp,webGLProgram:Mp,uniformLocations:Fp,inShapeInfos:Pp,outShapeInfo:Op,infLoc:Ap,nanLoc:Dp}}(cp.gpgpu,rp,mp,vp)}),yp=this.activeTimers!=null;if(yp&&(gp=this.startTimer()),function(Ep,wp,_p,Cp,$p){Ei(wp.inShapeInfos,_p),Ei([wp.outShapeInfo],[Cp]);var Rp=Cp.texData.texture,Pp=Cp.texData.texShape;Cp.texData.isPacked?Ep.setOutputPackedMatrixTexture(Rp,Pp[0],Pp[1]):Ep.setOutputMatrixTexture(Rp,Pp[0],Pp[1]),Ep.setProgram(wp.webGLProgram),a$1().getNumber("WEBGL_VERSION")===1&&wp.infLoc!==null&&Ep.gl.uniform1f(wp.infLoc,1/0),wp.nanLoc!==null&&Ep.gl.uniform1f(wp.nanLoc,NaN),_p.forEach(function(Op,jp){var Mp=wp.program.variableNames[jp],Ap=wp.uniformLocations[Mp],Dp=wp.uniformLocations["offset"+Mp];if(Ap!=null)if(Op.isUniform)if(w$1(Op.shape)<2)Ep.gl.uniform1f(Ap,Op.uniformValues[0]);else{var Fp=Op.uniformValues;Fp instanceof Float32Array||(Fp=new Float32Array(Fp)),Ep.gl.uniform1fv(Ap,Fp)}else Op.texData.slice!=null&&Dp!=null&&Ep.gl.uniform1i(Dp,Op.texData.slice.flatOffset),Ep.setInputMatrixTexture(Op.texData.texture,Ap,jp)}),$p!=null&&$p(Ep,wp.webGLProgram),Ep.executeProgram()}(this.gpgpu,Sp,mp,vp,lp),hp.forEach(function(Ep){return cp.disposeData(Ep.dataId)}),yp&&(gp=this.endTimer(gp),this.activeTimers.push({name:rp.constructor.name,query:this.getQueryTime(gp)})),!a$1().getBool("WEBGL_LAZILY_UNPACK")&&fp.isPacked&&up===!1){var bp=this.unpackTensor(dp);return this.disposeData(dp.dataId),bp}return dp},np.prototype.compileAndRun=function(rp,ap,sp,lp,up){up===void 0&&(up=!1),sp=sp||ap[0].dtype;var cp=this.runWebGLProgram(rp,ap,sp,lp,up);return Nt.makeTensorFromDataId(cp.dataId,cp.shape,cp.dtype)},np.prototype.getAndSaveBinary=function(rp,ap){return rp in this.binaryCache||(this.binaryCache[rp]=ap()),this.binaryCache[rp]},np.prototype.getTextureManager=function(){return this.textureManager},np.prototype.dispose=function(){this.disposed||(this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.fromPixels2DContext!=null&&this.fromPixels2DContext.canvas.remove&&this.fromPixels2DContext.canvas.remove(),this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},np.prototype.floatPrecision=function(){var rp=this;return this.floatPrecisionValue==null&&(this.floatPrecisionValue=je(function(){if(!a$1().get("WEBGL_RENDER_FLOAT32_ENABLED")){var ap=a$1().getBool("DEBUG");a$1().set("DEBUG",!1);var sp=rp.abs(An(1e-8)).dataSync()[0];if(a$1().set("DEBUG",ap),sp>0)return 32}return 16})),this.floatPrecisionValue},np.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},np.prototype.uploadToGPU=function(rp){var ap,sp=this.texData.get(rp),lp=sp.shape,up=sp.dtype,cp=sp.values,dp=sp.texture,fp=sp.usage,pp=sp.isPacked;if(dp==null){var hp,mp=this.activeTimers!=null;mp&&(hp=Y());var gp=sp.texShape;if(gp==null&&(gp=Ie(lp,pp),sp.texShape=gp),cp!=null){var vp=Re(lp),xp=void 0,Sp=gp[1],yp=gp[0],bp=cp instanceof Uint8Array;pp?(Sp=(ap=Ht(gp[0],gp[1]))[0],yp=ap[1],xp=new $a(vp,[yp,Sp],bp)):xp=new Xa(vp,[yp,Sp],bp);var Ep=this.makeTensorInfo([yp,Sp],up);this.texData.get(Ep.dataId).usage=bp?Mt.PIXELS:Mt.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(Ep.dataId),Sp,yp,cp);var wp=this.runWebGLProgram(xp,[Ep],up,null,!0),_p=this.texData.get(wp.dataId);sp.texture=_p.texture,sp.texShape=_p.texShape,sp.isPacked=_p.isPacked,sp.usage=_p.usage,this.disposeData(Ep.dataId),this.texData.delete(wp.dataId),sp.values=null,mp&&(this.uploadWaitMs+=Y()-hp)}else{var Cp=this.acquireTexture(gp,fp,up,pp);sp.texture=Cp}}},np.prototype.convertAndCacheOnCPU=function(rp,ap){var sp=this.texData.get(rp),lp=sp.dtype;return this.releaseGPUData(rp),ap!=null&&(sp.values=function(up,cp){if(cp==="float32"||cp==="complex64")return up;if(cp==="int32"||cp==="bool"){for(var dp=cp==="int32"?new Int32Array(up.length):new Uint8Array(up.length),fp=0;fp<dp.length;++fp)dp[fp]=Math.round(up[fp]);return dp}throw new Error("Unknown dtype "+cp)}(ap,lp)),sp.values},np.prototype.acquireTexture=function(rp,ap,sp,lp){if(this.numBytesInGPU+=this.computeBytes(rp,sp),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var up=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: "+up+" MB, most likely due to a memory leak")}return this.textureManager.acquireTexture(rp,ap,lp)},np.prototype.computeBytes=function(rp,ap){return rp[0]*rp[1]*P(ap)},np}(co);Ft()&&Nt.registerBackend("webgl",function(){return new Wu},2);var Uu=Cn({square_:function(_d){var np=ln(_d,"x","square"),rp=[np];return Nt.runKernelFunc(function(ap,sp){return sp([np]),ap.square(np)},{x:np},function(ap,sp){var lp=sp[0];return{x:function(){return ap.mul(lp.toFloat().mul(2))}}},"Square",{},rp,[])}}),Vu=Cn({abs_:function(_d){var np=ln(_d,"x","abs");return np.dtype==="complex64"?Nt.runKernelFunc(function(rp){return rp.complexAbs(np)},{$x:np}):Nt.runKernelFunc(function(rp,ap){var sp=rp.abs(np);return ap([np]),sp},{x:np},function(rp,ap){var sp=ap[0];return{x:function(){return rp.mul(sp.toFloat().step(-1))}}},"Abs")}}),zu=Cn({acos_:function(_d){var np=ln(_d,"x","acos");return Nt.runKernelFunc(function(rp,ap){var sp=rp.acos(np);return ap([np]),sp},{$x:np},function(rp,ap){var sp=ap[0];return{$x:function(){return rp.divStrict(An(1).sub(sp.toFloat().square()).sqrt()).neg()}}})}}),Gu=Cn({acosh_:function(_d){var np=ln(_d,"x","acosh");return Nt.runKernelFunc(function(rp,ap){var sp=rp.acosh(np);return ap([np]),sp},{$x:np},function(rp,ap){var sp=ap[0];return{$x:function(){return rp.divStrict(sp.toFloat().square().sub(1).sqrt())}}})}}),Hu=Cn({asin_:function(_d){var np=ln(_d,"x","asin");return Nt.runKernelFunc(function(rp,ap){var sp=rp.asin(np);return ap([np]),sp},{$x:np},function(rp,ap){var sp=ap[0];return{$x:function(){return rp.divStrict(An(1).sub(sp.toFloat().square()).sqrt())}}})}}),qu=Cn({asinh_:function(_d){var np=ln(_d,"x","asinh");return Nt.runKernelFunc(function(rp,ap){var sp=rp.asinh(np);return ap([np]),sp},{$x:np},function(rp,ap){var sp=ap[0];return{$x:function(){return rp.divStrict(An(1).add(sp.toFloat().square()).sqrt())}}})}}),Ku=Cn({atan_:function(_d){var np=ln(_d,"x","atan");return Nt.runKernelFunc(function(rp,ap){var sp=rp.atan(np);return ap([np]),sp},{$x:np},function(rp,ap){var sp=ap[0];return{$x:function(){return rp.div(sp.toFloat().square().add(1))}}})}}),ju=Cn({atanh_:function(_d){var np=ln(_d,"x","atanh");return Nt.runKernelFunc(function(rp,ap){var sp=rp.atanh(np);return ap([np]),sp},{$x:np},function(rp,ap){var sp=ap[0];return{$x:function(){return rp.div(An(1).sub(sp.toFloat().square()))}}})}}),Xu=Cn({ceil_:function(_d){var np=ln(_d,"x","ceil");return Nt.runKernelFunc(function(rp){return rp.ceil(np)},{$x:np},function(rp){return{$x:function(){return zn(rp)}}})}}),$u=Cn({clipByValue_:function(_d,np,rp){var ap=ln(_d,"x","clipByValue");return g(np<=rp,function(){return"Error in clip: min ("+np+") must be less than or equal to max ("+rp+")."}),Nt.runKernelFunc(function(sp,lp){var up=sp.clip(ap,np,rp);return lp([ap]),up},{$x:ap},function(sp,lp){var up=lp[0];return{$x:function(){return sp.where(up.greaterEqual(np).logicalAnd(up.lessEqual(rp)),zn(sp))}}})}}),Yu=Cn({cos_:function(_d){var np=ln(_d,"x","cos");return Nt.runKernelFunc(function(rp,ap){var sp=rp.cos(np);return ap([np]),sp},{$x:np},function(rp,ap){var sp=ap[0];return{$x:function(){return sp.toFloat().sin().neg().mul(rp)}}})}}),Qu=Cn({cosh_:function(_d){var np=ln(_d,"x","cosh");return Nt.runKernelFunc(function(rp,ap){var sp=rp.cosh(np);return ap([np]),sp},{$x:np},function(rp,ap){var sp=ap[0];return{$x:function(){return sp.toFloat().sinh().mulStrict(rp)}}})}}),Ju=Cn({erf_:function(_d){var np=ln(_d,"x","erf");return g(np.dtype==="int32"||np.dtype==="float32",function(){return"Input dtype must be `int32` or `float32`."}),np.dtype==="int32"&&(np=np.toFloat()),Nt.runKernelFunc(function(rp,ap){var sp=rp.erf(np);return ap([np]),sp},{$x:np},function(rp,ap){var sp=ap[0];return{$x:function(){return rp.mul(sp.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}})}}),Zu=Cn({exp_:function(_d){var np=ln(_d,"x","exp");return Nt.runKernelFunc(function(rp,ap){var sp=rp.exp(np);return ap([sp]),sp},{$x:np},function(rp,ap){return{$x:function(){return rp.mulStrict(ap[0])}}})}}),ts=Cn({expm1_:function(_d){var np=ln(_d,"x","expm1");return Nt.runKernelFunc(function(rp,ap){var sp=rp.expm1(np);return ap([np]),sp},{$x:np},function(rp,ap){var sp=ap[0];return{$x:function(){return rp.mul(sp.exp())}}})}}),es=Cn({floor_:function(_d){var np=ln(_d,"x","floor");return Nt.runKernelFunc(function(rp){return rp.floor(np)},{$x:np},function(rp){return{$x:function(){return zn(rp)}}})}}),ns=Cn({log_:function(_d){var np=ln(_d,"x","log");return Nt.runKernelFunc(function(rp,ap){var sp=rp.log(np);return ap([np]),sp},{$x:np},function(rp,ap){var sp=ap[0];return{$x:function(){return rp.div(sp.toFloat())}}})}}),rs=Cn({log1p_:function(_d){var np=ln(_d,"x","log1p");return Nt.runKernelFunc(function(rp,ap){var sp=rp.log1p(np);return ap([np]),sp},{$x:np},function(rp,ap){var sp=ap[0];return{$x:function(){return rp.div(sp.add(1))}}})}}),os=Cn({logSigmoid_:function(_d){var np=ln(_d,"x","logSigmoid");return Nt.runKernelFunc(function(rp,ap){var sp=rp.softplus(np.neg()).neg();return ap([np]),sp},{$x:np},function(rp,ap){var sp=ap[0];return{$x:function(){return rp.mul(sp.neg().sigmoid())}}})}}),as=Cn({neg_:function(_d){var np=ln(_d,"x","neg");return Nt.runKernelFunc(function(rp){return rp.neg(np)},{$x:np},function(rp){return{$x:function(){return rp.neg()}}})}}),is=Cn({reciprocal_:function(_d){var np=ln(_d,"x","reciprocal");return Nt.runKernelFunc(function(rp,ap){var sp=rp.reciprocal(np);return ap([np]),sp},{$x:np},function(rp,ap){var sp=ap[0];return{$x:function(){return rp.div(sp.square().neg())}}})}}),us=Cn({round_:function(_d){var np=ln(_d,"x","round");return Nt.runKernelFunc(function(rp){return rp.round(np)},{$x:np},function(rp){return{$x:function(){return zn(rp)}}})}}),ss=Cn({rsqrt_:function(_d){var np=ln(_d,"x","rsqrt");return Nt.runKernelFunc(function(rp,ap){var sp=rp.rsqrt(np);return ap([np]),sp},{$x:np},function(rp,ap){var sp=ap[0];return{$x:function(){return rp.div(sp.pow(1.5).mul(2)).neg()}}})}}),cs=Cn({sigmoid_:function(_d){var np=ln(_d,"x","sigmoid");return Nt.runKernelFunc(function(rp,ap){var sp=rp.sigmoid(np);return ap([sp]),sp},{x:np},function(rp,ap){var sp=ap[0];return{x:function(){return rp.mul(sp.mul(An(1).sub(sp)))}}},"Sigmoid")}}),ls=Cn({sign_:function(_d){var np=ln(_d,"x","sign");return Nt.runKernelFunc(function(rp){return rp.sign(np)},{$x:np},function(rp){return{$x:function(){return zn(rp)}}})}}),hs=Cn({isNaN_:function(_d){var np=ln(_d,"x","isNaN");return Nt.runKernelFunc(function(rp){return rp.isNaN(np)},{$x:np},function(rp){return{$x:function(){return zn(rp)}}})}}),fs=Cn({isInf_:function(_d){var np=ln(_d,"x","isInf");return Nt.runKernelFunc(function(rp){return rp.isInf(np)},{$x:np},function(rp){return{$x:function(){return zn(rp)}}})}}),ps=Cn({isFinite_:function(_d){var np=ln(_d,"x","isFinite");return Nt.runKernelFunc(function(rp){return rp.isFinite(np)},{$x:np},function(rp){return{$x:function(){return zn(rp)}}})}}),ds=Cn({sin_:function(_d){var np=ln(_d,"x","sin");return Nt.runKernelFunc(function(rp,ap){var sp=rp.sin(np);return ap([np]),sp},{$x:np},function(rp,ap){var sp=ap[0];return{$x:function(){return sp.toFloat().cos().mul(rp)}}})}}),vs=Cn({sinh_:function(_d){var np=ln(_d,"x","sinh");return Nt.runKernelFunc(function(rp,ap){var sp=rp.sinh(np);return ap([np]),sp},{$x:np},function(rp,ap){var sp=ap[0];return{$x:function(){return sp.toFloat().cosh().mulStrict(rp)}}})}}),ms=Cn({softplus_:function(_d){var np=ln(_d,"x","softplus");return Nt.runKernelFunc(function(rp,ap){var sp=rp.softplus(np);return ap([np]),sp},{$x:np},function(rp,ap){var sp=ap[0];return{$x:function(){return rp.mul(sp.sigmoid())}}})}}),gs=Cn({sqrt_:function(_d){var np=ln(_d,"x","sqrt");return Nt.runKernelFunc(function(rp,ap){var sp=rp.sqrt(np);return ap([np]),sp},{$x:np},function(rp,ap){var sp=ap[0];return{$x:function(){return rp.div(sp.toFloat().sqrt().mul(2))}}})}}),ys=Cn({step_:function(_d,np){np===void 0&&(np=0);var rp=ln(_d,"x","step");return Nt.runKernelFunc(function(ap){return ap.step(rp,np)},{$x:rp},function(ap){return{$x:function(){return zn(ap)}}})}}),xs=Cn({tan_:function(_d){var np=ln(_d,"x","tan");return Nt.runKernelFunc(function(rp,ap){var sp=rp.tan(np);return ap([np]),sp},{$x:np},function(rp,ap){var sp=ap[0];return{$x:function(){return rp.div(sp.cos().square())}}})}}),bs=Cn({tanh_:function(_d){var np=ln(_d,"x","tanh");return Nt.runKernelFunc(function(rp,ap){var sp=rp.tanh(np);return ap([sp]),sp},{$x:np},function(rp,ap){var sp=ap[0];return{$x:function(){return An(1).sub(sp.square()).mulStrict(rp)}}})}});function ws(_d,np,rp,ap,sp,lp){var up,cp,dp=ln(_d,"x","batchNorm"),fp=ln(np,"mean","batchNorm"),pp=ln(rp,"variance","batchNorm");return sp!=null&&(up=ln(sp,"scale","batchNorm")),ap!=null&&(cp=ln(ap,"offset","batchNorm")),g(dp.rank===2,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+dp.rank+"."}),g(fp.rank===2||fp.rank===1,function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+fp.rank+"."}),g(pp.rank===2||pp.rank===1,function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+pp.rank+"."}),up!=null&&g(up.rank===2||up.rank===1,function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+up.rank+"."}),cp!=null&&g(cp.rank===2||cp.rank===1,function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+cp.rank+"."}),Rs(dp,fp,pp,cp,up,lp)}function Cs(_d,np,rp,ap,sp,lp){var up,cp,dp=ln(_d,"x","batchNorm"),fp=ln(np,"mean","batchNorm"),pp=ln(rp,"variance","batchNorm");return sp!=null&&(up=ln(sp,"scale","batchNorm")),ap!=null&&(cp=ln(ap,"offset","batchNorm")),g(dp.rank===3,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+dp.rank+"."}),g(fp.rank===3||fp.rank===1,function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+fp.rank+"."}),g(pp.rank===3||pp.rank===1,function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+pp.rank+"."}),up!=null&&g(up.rank===3||up.rank===1,function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+up.rank+"."}),cp!=null&&g(cp.rank===3||cp.rank===1,function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+cp.rank+"."}),Rs(dp,fp,pp,cp,up,lp)}function Es(_d,np,rp,ap,sp,lp){var up,cp,dp=ln(_d,"x","batchNorm"),fp=ln(np,"mean","batchNorm"),pp=ln(rp,"variance","batchNorm");return sp!=null&&(up=ln(sp,"scale","batchNorm")),ap!=null&&(cp=ln(ap,"offset","batchNorm")),g(dp.rank===4,function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+dp.rank+"."}),g(fp.rank===4||fp.rank===1,function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+fp.rank+"."}),g(pp.rank===4||pp.rank===1,function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+pp.rank+"."}),up!=null&&g(up.rank===4||up.rank===1,function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+up.rank+"."}),cp!=null&&g(cp.rank===4||cp.rank===1,function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+cp.rank+"."}),Rs(dp,fp,pp,cp,up,lp)}function Rs(_d,np,rp,ap,sp,lp){lp==null&&(lp=.001);var up,cp,dp,fp=ln(_d,"x","batchNorm"),pp=ln(np,"mean","batchNorm"),hp=ln(rp,"variance","batchNorm");sp!=null&&(up=ln(sp,"scale","batchNorm")),ap!=null&&(cp=ln(ap,"offset","batchNorm")),g(pp.rank===hp.rank,function(){return"Batch normalization gradient requires mean and variance to have equal ranks."}),g(cp==null||pp.rank===cp.rank,function(){return"Batch normalization gradient requires mean and offset to have equal ranks."}),g(up==null||pp.rank===up.rank,function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}),dp=fp.rank===0||fp.rank===1?fp.as4D(1,1,1,fp.size):fp.rank===2?fp.as4D(1,1,fp.shape[0],fp.shape[1]):fp.rank===3?fp.as4D(1,fp.shape[0],fp.shape[1],fp.shape[2]):fp;var mp=[fp,pp,hp,up];return Nt.runKernelFunc(function(gp,vp){var xp=gp.batchNormalization(dp,Is(pp),Is(hp),lp,Is(up),Is(cp));return vp([fp,pp,hp,up]),xp},{x:fp,mean:pp,variance:hp,scale:up,offset:cp},function(gp,vp){var xp=vp,Sp=xp[0],yp=xp[1],bp=xp[2],Ep=xp[3],wp=Ep??An(1),_p=fo(yp.shape,dp.shape),Cp=[];if(yp.rank===1){for(var $p=0;$p<dp.shape.length-1;++$p)Cp.push(dp.shape[$p]);Cp.push(1)}var Rp=Sp.sub(yp),Pp=gp.mul(wp),Op=ss(bp.add(An(lp))),jp=Op.mul(Op).mul(Op).mul(An(-.5));return{x:function(){return yp.rank===1?gp.mul(Nr(Op.as4D(1,1,1,yp.shape[0]),Cp)).mul(wp).reshape(Sp.shape):gp.mul(Op).mul(wp).reshape(Sp.shape)},mean:function(){var Mp=Op.mul(An(-1)).mul(Pp);return yp.rank===1&&(Mp=Mp.sum(_p)),Mp.reshape(yp.shape)},variance:function(){var Mp=jp.mul(Rp).mul(Pp);return yp.rank===1&&(Mp=Mp.sum(_p)),Mp.reshape(yp.shape)},scale:function(){var Mp=Rp.mul(Op),Ap=gp.mul(Mp);return yp.rank===1&&(Ap=Ap.sum(_p)),Ap.reshape(yp.shape)},offset:function(){var Mp=gp;return yp.rank===1&&(Mp=Mp.sum(_p)),Mp.reshape(yp.shape)}}},"BatchNormalization",{varianceEpsilon:lp},mp).reshape(fp.shape)}function Is(_d){return _d==null?null:_d.rank===0?_d.as1D():_d.rank===1?_d:_d.rank===2?_d.as4D(1,1,_d.shape[0],_d.shape[1]):_d.rank===3?_d.as4D(1,_d.shape[0],_d.shape[1],_d.shape[2]):_d}function ks(){ze("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon")}var Ss=Cn({batchNormalization2d_:function(_d,np,rp,ap,sp,lp){return ap===void 0&&(ap=.001),ks(),ws(_d,np,rp,lp,sp,ap)}}),As=Cn({batchNormalization3d_:function(_d,np,rp,ap,sp,lp){return ap===void 0&&(ap=.001),ks(),Cs(_d,np,rp,lp,sp,ap)}}),Ds=Cn({batchNormalization4d_:function(_d,np,rp,ap,sp,lp){return ap===void 0&&(ap=.001),ks(),Es(_d,np,rp,lp,sp,ap)}}),Ts=Cn({batchNormalization_:function(_d,np,rp,ap,sp,lp){return ap===void 0&&(ap=.001),ks(),Rs(_d,np,rp,lp,sp,ap)}}),Ns=Cn({batchNorm_:Rs}),Fs=Cn({batchNorm2d_:ws}),Os=Cn({batchNorm3d_:Cs}),_s=Cn({batchNorm4d_:Es}),Ms=Cn({logicalAnd_:function(_d,np){var rp=ln(_d,"a","logicalAnd","bool"),ap=ln(np,"b","logicalAnd","bool");return po(rp.shape,ap.shape),Nt.runKernelFunc(function(sp){return sp.logicalAnd(rp,ap)},{$a:rp,$b:ap})}}),Bs=Cn({logicalNot_:function(_d){var np=ln(_d,"x","logicalNot","bool");return Nt.runKernelFunc(function(rp){return rp.logicalNot(np)},{$x:np})}}),Ps=Cn({logicalOr_:function(_d,np){var rp=ln(_d,"a","logicalOr","bool"),ap=ln(np,"b","logicalOr","bool");return po(rp.shape,ap.shape),Nt.runKernelFunc(function(sp){return sp.logicalOr(rp,ap)},{$a:rp,$b:ap})}}),Ls=Cn({logicalXor_:function(_d,np){var rp=ln(_d,"a","logicalXor","bool"),ap=ln(np,"b","logicalXor","bool");return po(rp.shape,ap.shape),Ps(_d,np).logicalAnd(Ms(_d,np).logicalNot())}}),Ws=Cn({where_:function(_d,np,rp){var ap=ln(np,"a","where"),sp=ln(rp,"b","where"),lp=ln(_d,"condition","where","bool");return y(ap.shape,sp.shape,"Error in where: "),lp.rank===1?g(lp.shape[0]===ap.shape[0],function(){return"The first dimension of `a` must match the size of `condition`."}):y(lp.shape,sp.shape,"Error in where: "),Nt.runKernelFunc(function(up,cp){var dp=up.select(lp,ap,sp);return cp([lp]),dp},{$condition:lp,$a:ap,$b:sp},function(up,cp){var dp=cp[0];return{$condition:function(){return zn(dp).toFloat()},$a:function(){return up.mul(dp.cast(up.dtype))},$b:function(){return up.mul(dp.logicalNot().cast(up.dtype))}}})}}),Us=function(_d){return n$1(this,void 0,void 0,function(){var np,rp,ap;return r(this,function(sp){switch(sp.label){case 0:return[4,(np=ln(_d,"condition","whereAsync","bool")).data()];case 1:return rp=sp.sent(),ap=Uo(np.shape,rp),_d!==np&&np.dispose(),[2,ap]}})})},Vs=Cn({add_:function(_d,np){var rp,ap=ln(_d,"a","add"),sp=ln(np,"b","add");rp=Rt(ap,sp),ap=rp[0],sp=rp[1];var lp=po(ap.shape,sp.shape);return Nt.runKernelFunc(function(up){return up.add(ap,sp)},{a:ap,b:sp},function(up){return{a:function(){var cp=up,dp=fo(ap.shape,lp);return dp.length>0&&(cp=cp.sum(dp)),cp.reshape(ap.shape)},b:function(){var cp=up,dp=fo(sp.shape,lp);return dp.length>0&&(cp=cp.sum(dp)),cp.reshape(sp.shape)}}},"Add")}}),zs=Cn({addN_:function(_d){g(Array.isArray(_d),function(){return"The argument passed to tf.addN() must be a list of tensors"}),g(_d.length>=1,function(){return"Must pass at least one tensor to tf.addN(), but got "+_d.length});var np=_d.map(function(sp,lp){return ln(sp,"tensors"+lp,"addN")}),rp=np[0];np.forEach(function(sp){if(sp.dtype!==rp.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),np.forEach(function(sp){if(!C(sp.shape,rp.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});var ap=np;return Nt.runKernelFunc(function(sp){return sp.addN(np)},ap,function(sp){var lp={};return np.forEach(function(up,cp){lp[cp]=function(){return sp.clone()}}),lp})}}),Gs=Cn({addStrict_:function(_d,np){var rp=ln(_d,"a","addStrict"),ap=ln(np,"b","addStrict");return y(rp.shape,ap.shape,"Error in addStrict: "),rp.add(ap)}}),Hs=Cn({atan2_:function(_d,np){var rp,ap=ln(_d,"a","atan2"),sp=ln(np,"b","atan2");rp=Rt(ap,sp),ap=rp[0],sp=rp[1];var lp=po(ap.shape,sp.shape);return Nt.runKernelFunc(function(up,cp){var dp=up.atan2(ap,sp);return cp([ap,sp]),dp},{$a:ap,$b:sp},function(up,cp){var dp=cp[0],fp=cp[1];return{$a:function(){var pp=Vs(dp.square(),fp.square()),hp=up.mul(fp.div(pp)),mp=fo(dp.shape,lp);return mp.length>0&&(hp=hp.sum(mp)),hp.reshape(dp.shape)},$b:function(){var pp=Vs(dp.square(),fp.square()),hp=as(up.mul(dp.div(pp))),mp=fo(fp.shape,lp);return mp.length>0&&(hp=hp.sum(mp)),hp.reshape(fp.shape)}}})}}),qs=Cn({div_:function(_d,np){var rp,ap=ln(_d,"a","div"),sp=ln(np,"b","div");if(rp=Rt(ap,sp),ap=rp[0],sp=rp[1],ap.dtype==="int32"&&sp.dtype==="int32")return js(ap,sp);var lp=po(ap.shape,sp.shape);return Nt.runKernelFunc(function(up,cp){var dp=up.realDivide(ap,sp);return cp([ap,sp]),dp},{a:ap,b:sp},function(up,cp){var dp=cp[0],fp=cp[1];return{a:function(){var pp=up.div(fp.toFloat()),hp=fo(dp.shape,lp);return hp.length>0?pp.sum(hp).reshape(dp.shape):pp},b:function(){var pp=up.mul(dp.toFloat()),hp=fo(fp.shape,lp);hp.length>0&&(pp=pp.sum(hp).reshape(fp.shape));var mp=fp.square();return pp.div(mp.toFloat()).neg()}}},"Div")}}),Ks=Cn({divStrict_:function(_d,np){var rp=ln(_d,"a","div"),ap=ln(np,"b","div");return y(rp.shape,ap.shape,"Error in divideStrict: "),rp.div(ap)}}),js=Cn({floorDiv_:function(_d,np){var rp,ap=ln(_d,"a","floorDiv"),sp=ln(np,"b","floorDiv");rp=Rt(ap,sp),ap=rp[0],sp=rp[1];var lp=po(ap.shape,sp.shape);return Nt.runKernelFunc(function(up,cp){var dp=up.floorDiv(ap,sp);return cp([ap,sp]),dp},{$a:ap,$b:sp},function(up,cp){var dp=cp[0],fp=cp[1];return{$a:function(){var pp=up.div(fp.toFloat()),hp=fo(dp.shape,lp);return hp.length>0?pp.sum(hp).reshape(dp.shape):pp},$b:function(){var pp=up.mul(dp.toFloat()),hp=fo(fp.shape,lp);hp.length>0&&(pp=pp.sum(hp).reshape(fp.shape));var mp=fp.square();return pp.div(mp.toFloat()).neg()}}})}}),Xs=Cn({maximum_:function(_d,np){var rp,ap=ln(_d,"a","maximum"),sp=ln(np,"b","maximum");return rp=Rt(ap,sp),ap=rp[0],sp=rp[1],ap.dtype==="bool"&&(ap=ap.toInt(),sp=sp.toInt()),po(ap.shape,sp.shape),Nt.runKernelFunc(function(lp,up){var cp=lp.maximum(ap,sp);return up([ap,sp]),cp},{$a:ap,$b:sp},function(lp,up){var cp=up[0],dp=up[1];return{$a:function(){return lp.mul(cp.greaterEqual(dp).toFloat())},$b:function(){return lp.mul(cp.less(dp).toFloat())}}})}}),$s=Cn({maximumStrict_:function(_d,np){var rp=ln(_d,"a","maximumStrict"),ap=ln(np,"b","maximumStrict");return y(rp.shape,ap.shape,"Error in maximumStrict: "),rp.maximum(ap)}}),Ys=Cn({minimum_:function(_d,np){var rp,ap=ln(_d,"a","minimum"),sp=ln(np,"b","minimum");return rp=Rt(ap,sp),ap=rp[0],sp=rp[1],ap.dtype==="bool"&&(ap=ap.toInt(),sp=sp.toInt()),po(ap.shape,sp.shape),Nt.runKernelFunc(function(lp,up){var cp=lp.minimum(ap,sp);return up([ap,sp]),cp},{$a:ap,$b:sp},function(lp,up){var cp=up[0],dp=up[1];return{$a:function(){return lp.mul(cp.lessEqual(dp).toFloat())},$b:function(){return lp.mul(cp.greater(dp).toFloat())}}})}}),Qs=Cn({minimumStrict_:function(_d,np){var rp=ln(_d,"a","minimumStrict"),ap=ln(np,"b","minimumStrict");return y(rp.shape,ap.shape,"Error in minimumStrict: "),rp.minimum(ap)}}),Js=Cn({mod_:function(_d,np){var rp,ap=ln(_d,"a","mod"),sp=ln(np,"b","mod");rp=Rt(ap,sp),ap=rp[0],sp=rp[1];var lp=po(ap.shape,sp.shape);return Nt.runKernelFunc(function(up,cp){var dp=up.mod(ap,sp);return cp([ap,sp]),dp},{$a:ap,$b:sp},function(up,cp){var dp=cp[0],fp=cp[1];return{$a:function(){var pp=fo(dp.shape,lp);return pp.length>0?up.sum(pp).reshape(dp.shape):up},$b:function(){var pp=up.mul(dp.div(fp).floor().neg()),hp=fo(fp.shape,lp);return hp.length>0?pp.sum(hp).reshape(fp.shape):pp}}})}}),Zs=Cn({modStrict_:function(_d,np){var rp=ln(_d,"a","modStrict"),ap=ln(np,"b","modStrict");return y(rp.shape,ap.shape,"Error in modStrict: "),rp.mod(ap)}}),tc=Cn({mul_:function(_d,np){var rp,ap=ln(_d,"a","mul"),sp=ln(np,"b","mul");rp=Rt(ap,sp),ap=rp[0],sp=rp[1];var lp=po(ap.shape,sp.shape);return Nt.runKernelFunc(function(up,cp){var dp=up.multiply(ap,sp);return cp([ap,sp]),dp},{a:ap,b:sp},function(up,cp){var dp=cp[0],fp=cp[1];return{a:function(){var pp=up.mul(fp.toFloat()),hp=fo(dp.shape,lp);return hp.length>0?pp.sum(hp).reshape(dp.shape):pp},b:function(){var pp=up.mul(dp.toFloat()),hp=fo(fp.shape,lp);return hp.length>0?pp.sum(hp).reshape(fp.shape):pp}}},"Mul")}}),ec=Cn({mulStrict_:function(_d,np){var rp=ln(_d,"a","mul"),ap=ln(np,"b","mul");return y(rp.shape,ap.shape,"Error in multiplyStrict: "),rp.mul(ap)}}),nc=Cn({pow_:function(_d,np){var rp=ln(_d,"base","pow"),ap=ln(np,"exp","pow"),sp=po(rp.shape,ap.shape);return _d=rp.cast(Ct(rp.dtype,ap.dtype)),np=ap.cast(Ct(rp.dtype,ap.dtype)),Nt.runKernelFunc(function(lp,up){var cp=lp.pow(rp,ap);return up([rp,ap,cp]),cp},{$base:rp,$exp:ap},function(lp,up){var cp=up[0],dp=up[1],fp=up[2];return{$base:function(){var pp=dp.toFloat(),hp=lp.mul(pp.mul(cp.pow(pp.sub(An(1))))),mp=fo(cp.shape,sp);return mp.length>0&&(hp=hp.sum(mp)),hp.reshape(cp.shape)},$exp:function(){var pp=cp.greater(0),hp=cp.log().where(pp,zn(cp)),mp=lp.mul(fp.mul(hp)),gp=fo(dp.shape,sp);return gp.length>0&&(mp=mp.sum(gp)),mp.reshape(dp.shape)}}})}}),rc=Cn({powStrict_:function(_d,np){return y(_d.shape,np.shape,"Error in powStrict: "),_d.pow(np)}}),oc=Cn({squaredDifference_:function(_d,np){var rp,ap=ln(_d,"a","squaredDifference"),sp=ln(np,"b","squaredDifference");return rp=Rt(ap,sp),ap=rp[0],sp=rp[1],po(ap.shape,sp.shape),Nt.runKernelFunc(function(lp,up){var cp=lp.squaredDifference(ap,sp);return up([ap,sp]),cp},{$a:ap,$b:sp},function(lp,up){var cp=up[0],dp=up[1],fp=An(2);return{$a:function(){return lp.mul(cp.sub(dp).mul(fp))},$b:function(){return lp.mul(dp.sub(cp).mul(fp))}}})}}),ac=Cn({squaredDifferenceStrict_:function(_d,np){var rp=ln(_d,"a","squaredDifferenceStrict"),ap=ln(np,"b","squaredDifferenceStrict");return y(rp.shape,ap.shape,"Error in squaredDifferenceStrict: "),rp.squaredDifference(ap)}}),ic=Cn({sub_:function(_d,np){var rp,ap=ln(_d,"a","sub"),sp=ln(np,"b","sub");rp=Rt(ap,sp),ap=rp[0],sp=rp[1];var lp=po(ap.shape,sp.shape);return Nt.runKernelFunc(function(up){return up.subtract(ap,sp)},{a:ap,b:sp},function(up){return{a:function(){var cp=up,dp=fo(ap.shape,lp);return dp.length>0&&(cp=cp.sum(dp)),cp.reshape(ap.shape)},b:function(){var cp=up,dp=fo(sp.shape,lp);return dp.length>0&&(cp=cp.sum(dp)),cp.neg().reshape(sp.shape)}}},"Sub")}}),uc=Cn({subStrict_:function(_d,np){var rp=ln(_d,"a","subStrict"),ap=ln(np,"b","subStrict");return y(rp.shape,ap.shape,"Error in subStrict: "),rp.sub(ap)}}),sc=Cn({equal_:function(_d,np){var rp,ap=ln(_d,"a","equal"),sp=ln(np,"b","equal");return rp=Rt(ap,sp),ap=rp[0],sp=rp[1],po(ap.shape,sp.shape),Nt.runKernelFunc(function(lp){return lp.equal(ap,sp)},{$a:ap,$b:sp})}}),cc=Cn({equalStrict_:function(_d,np){var rp=ln(_d,"a","equalStrict"),ap=ln(np,"b","equalStrict");return y(rp.shape,ap.shape,"Error in equalStrict: "),rp.equal(ap)}}),lc=Cn({greater_:function(_d,np){var rp,ap=ln(_d,"a","greater"),sp=ln(np,"b","greater");return rp=Rt(ap,sp),ap=rp[0],sp=rp[1],po(ap.shape,sp.shape),Nt.runKernelFunc(function(lp){return lp.greater(ap,sp)},{$a:ap,$b:sp})}}),hc=Cn({greaterEqual_:function(_d,np){var rp,ap=ln(_d,"a","greaterEqual"),sp=ln(np,"b","greaterEqual");return rp=Rt(ap,sp),ap=rp[0],sp=rp[1],po(ap.shape,sp.shape),Nt.runKernelFunc(function(lp,up){var cp=lp.greaterEqual(ap,sp);return up([ap,sp]),cp},{$a:ap,$b:sp},function(lp,up){var cp=up[0],dp=up[1];return{$a:function(){return zn(cp)},$b:function(){return zn(dp)}}})}}),fc=Cn({greaterEqualStrict_:function(_d,np){var rp=ln(_d,"a","greaterEqualStrict"),ap=ln(np,"b","greaterEqualStrict");return y(rp.shape,ap.shape,"Error in greaterEqualStrict: "),rp.greaterEqual(ap)}}),pc=Cn({greaterStrict_:function(_d,np){var rp=ln(_d,"a","greaterStrict"),ap=ln(np,"b","greaterStrict");return y(rp.shape,ap.shape,"Error in greaterStrict: "),rp.greater(ap)}}),dc=Cn({less_:function(_d,np){var rp,ap=ln(_d,"a","less"),sp=ln(np,"b","less");return rp=Rt(ap,sp),ap=rp[0],sp=rp[1],po(ap.shape,sp.shape),Nt.runKernelFunc(function(lp){return lp.less(ap,sp)},{$a:ap,$b:sp})}}),vc=Cn({lessEqual_:function(_d,np){var rp,ap=ln(_d,"a","lessEqual"),sp=ln(np,"b","lessEqual");return rp=Rt(ap,sp),ap=rp[0],sp=rp[1],po(ap.shape,sp.shape),Nt.runKernelFunc(function(lp){return lp.lessEqual(ap,sp)},{$a:ap,$b:sp})}}),mc=Cn({lessEqualStrict_:function(_d,np){var rp=ln(_d,"a","lessEqualStrict"),ap=ln(np,"b","lessEqualStrict");return y(rp.shape,ap.shape,"Error in lessEqualStrict: "),rp.lessEqual(ap)}}),gc=Cn({lessStrict_:function(_d,np){var rp=ln(_d,"a","lessStrict"),ap=ln(np,"b","lessStrict");return y(rp.shape,ap.shape,"Error in lessStrict: "),rp.less(ap)}}),yc=Cn({notEqual_:function(_d,np){var rp,ap=ln(_d,"a","notEqual"),sp=ln(np,"b","notEqual");return rp=Rt(ap,sp),ap=rp[0],sp=rp[1],po(ap.shape,sp.shape),Nt.runKernelFunc(function(lp){return lp.notEqual(ap,sp)},{$a:ap,$b:sp})}}),xc=Cn({notEqualStrict_:function(_d,np){var rp=ln(_d,"a","notEqualStrict"),ap=ln(np,"b","notEqualStrict");return y(rp.shape,ap.shape,"Error in notEqualStrict: "),rp.notEqual(ap)}});function bc(_d,np){for(var rp=[],ap=_d;ap<np;++ap)rp.push(ap);return rp}function wc(_d){for(var np=[],rp=0;rp<_d.length;++rp)for(var ap=0;ap<_d[rp].length;++ap)np.push(_d[rp][ap]);return np}var Cc=Cn({gather_:function(_d,np,rp){rp===void 0&&(rp=0);var ap=ln(_d,"x","gather"),sp=ln(np,"indices","gather","int32");rp=D(rp,ap.shape)[0];var lp=function(up,cp,dp){for(var fp=up.shape[dp],pp=[],hp=1,mp=1,gp=0;gp<dp;gp++)pp.push(up.shape[gp]),hp*=up.shape[gp];for(gp=0;gp<cp.rank;gp++)pp.push(cp.shape[gp]);for(gp=dp+1;gp<up.rank;gp++)pp.push(up.shape[gp]),mp*=up.shape[gp];return{batchSize:hp,sliceSize:mp,dimSize:fp,outputShape:pp}}(ap,sp,rp);return Nt.runKernelFunc(function(up,cp){var dp=up.gather(ap,sp.flatten(),rp);return cp([sp]),dp},{$x:ap},function(up,cp){var dp=cp[0];return{$x:function(){var fp=ap.shape,pp=dp.size,hp=fp.slice(0,rp),mp=hp.length,gp=fp.slice(rp,fp.length).slice(1),vp=gp.length,xp=bc(0,mp),Sp=bc(mp+1,mp+1+vp),yp=wc([hp,[pp],gp]),bp=up.reshape(yp),Ep=dp.reshape([pp]),wp=wc([[mp],xp,Sp]),_p=bp.transpose(wp),Cp=Ec(_p,Ep,ap.shape[rp]),$p=yn(wp);return Cp=Cp.transpose($p)}}}).reshape(lp.outputShape)}}),Ec=Cn({unsortedSegmentSum_:function(_d,np,rp){var ap=ln(_d,"x","unsortedSegmentSum"),sp=ln(np,"segmentIds","unsortedSegmentSum","int32");return g(E(rp),function(){return"numSegments must be of dtype int"}),Nt.runKernelFunc(function(lp,up){var cp=lp.unsortedSegmentSum(ap,sp,rp);return up([sp]),cp},{$x:ap},function(lp,up){var cp=up[0];return{$x:function(){return function(dp,fp){for(var pp=Xs(fp,zn(fp)),hp=Cc(dp,pp),mp=hc(fp,An(0,"int32")),gp=hp.rank-mp.rank,vp=0;vp<gp;++vp)mp=dr(mp,vp+1);mp=Ms(mp,Bn(hp.shape,"bool"));var xp=zn(hp);return Ws(mp,hp,xp)}(lp,cp)}}})}}),Rc=function(_d,np,rp){return n$1(this,void 0,void 0,function(){var ap,sp,lp,up,cp,dp,fp,pp,hp,mp,gp,vp,xp;return r(this,function(Sp){switch(Sp.label){case 0:for(ap=ln(_d,"tensor","boolMask"),sp=ln(np,"mask","boolMask","bool"),lp=rp??0,up=sp.rank,cp=ap.shape,g(up>0,function(){return"mask cannot be scalar"}),y(cp.slice(lp,lp+up),sp.shape,"mask's shape must match the first K dimensions of tensor's shape,"),dp=1,fp=lp;fp<lp+up;fp++)dp*=cp[fp];return pp=cp.slice(0,lp).concat([dp],cp.slice(lp+up)),hp=ap.reshape(pp),mp=sp.reshape([-1]),[4,Us(mp)];case 1:return gp=Sp.sent(),vp=gp.squeeze([1]),xp=Cc(hp,vp,lp),_d!==ap&&ap.dispose(),np!==sp&&sp.dispose(),vp.dispose(),hp.dispose(),mp.dispose(),gp.dispose(),[2,xp]}})})};function Ic(_d,np,rp,ap,sp,lp,up){lp===void 0&&(lp="NHWC"),g(_d.length===np.rank,function(){return"Length of inShape ("+_d.length+") and rank of dy ("+np.rank+") must match"});var cp=_d,dp=np,fp=!1;np.rank===3&&(fp=!0,dp=np.as4D(1,np.shape[0],np.shape[1],np.shape[2]),cp=[1,_d[0],_d[1],_d[2]]),g(cp.length===4,function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+cp.length+"."}),g(dp.rank===4,function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+dp.rank}),g(rp.rank===4,function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+rp.rank});var pp=lp==="NHWC"?cp[3]:cp[1],hp=lp==="NHWC"?dp.shape[3]:dp.shape[1];g(pp===rp.shape[2],function(){return"Error in conv2dDerInput: depth of input ("+pp+") must match input depth for filter "+rp.shape[2]+"."}),g(hp===rp.shape[3],function(){return"Error in conv2dDerInput: depth of output ("+hp+") must match output depth for filter "+rp.shape[3]+"."}),up!=null&&g(E(sp),function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+up+" but got pad "+sp+"."});var mp=ko(lp),gp=go(cp,rp.shape,ap,1,sp,up,!1,mp),vp=Nt.runKernelFunc(function(xp,Sp){var yp=xp.conv2dDerInput(dp,rp,gp);return Sp([rp,dp]),yp},{dy4D:dp,filter:rp},function(xp,Sp){var yp=Sp[0],bp=Sp[1];return{dy4D:function(){return Dc(xp,yp,ap,sp,lp,1,up)},filter:function(){return Nc(xp,bp,yp.shape,ap,sp,lp,up)}}});return fp?vp.as3D(vp.shape[1],vp.shape[2],vp.shape[3]):vp}function kc(_d){var np=function(lp){return typeof lp=="number"?[lp,lp,lp]:lp.length===2?[lp[0],lp[1],1]:lp}(_d),rp=np[0],ap=np[1],sp=np[2];return rp===1&&ap===1&&sp===1}function Sc(_d,np,rp,ap,sp){g(_d.length===np.rank,function(){return"Length of inShape ("+_d.length+") and rank of dy ("+np.rank+") must match"});var lp=_d,up=np,cp=!1;np.rank===4&&(cp=!0,up=np.as5D(1,np.shape[0],np.shape[1],np.shape[2],np.shape[3]),lp=[1,_d[0],_d[1],_d[2],_d[3]]);var dp=lp[4],fp=up.shape[4];g(lp.length===5,function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+lp.length+"."}),g(up.rank===5,function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+up.rank}),g(rp.rank===5,function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+rp.rank}),g(dp===rp.shape[3],function(){return"Error in conv3dDerInput: depth of input ("+dp+") must match input depth for filter "+rp.shape[3]+"."}),g(fp===rp.shape[4],function(){return"Error in conv3dDerInput: depth of output ("+fp+") must match output depth for filter "+rp.shape[4]+"."});var pp=yo(lp,rp.shape,ap,1,sp),hp=Nt.runKernelFunc(function(mp){return mp.conv3dDerInput(up,rp,pp)},{dy5D:up});return cp?hp.as4D(hp.shape[1],hp.shape[2],hp.shape[3],hp.shape[4]):hp}var Ac=Cn({conv1d_:function(_d,np,rp,ap,sp,lp,up){sp===void 0&&(sp="NWC"),lp===void 0&&(lp=1);var cp=ln(_d,"x","conv1d"),dp=ln(np,"filter","conv1d"),fp=cp,pp=!1;cp.rank===2&&(pp=!0,fp=cp.as3D(1,cp.shape[0],cp.shape[1])),g(fp.rank===3,function(){return"Error in conv1d: input must be rank 3, but got rank "+fp.rank+"."}),g(dp.rank===3,function(){return"Error in conv1d: filter must be rank 3, but got rank "+dp.rank+"."}),up!=null&&g(E(ap),function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+up+" but got pad "+ap+"."}),g(fp.shape[2]===dp.shape[1],function(){return"Error in conv1d: depth of input ("+fp.shape[2]+") must match input depth for filter "+dp.shape[1]+"."}),g(Io(rp,lp),function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+rp+" and dilation '"+lp+"'"}),g(sp==="NWC",function(){return"Error in conv1d: got dataFormat of "+sp+" but only NWC is currently supported."});var hp=dp.as4D(1,dp.shape[0],dp.shape[1],dp.shape[2]),mp=fp.as4D(fp.shape[0],1,fp.shape[1],fp.shape[2]),gp=Dc(mp,hp,[1,rp],ap,"NHWC",[1,lp],up);return pp?gp.as2D(gp.shape[2],gp.shape[3]):gp.as3D(gp.shape[0],gp.shape[2],gp.shape[3])}}),Dc=Cn({conv2d_:function(_d,np,rp,ap,sp,lp,up){sp===void 0&&(sp="NHWC"),lp===void 0&&(lp=[1,1]);var cp=ln(_d,"x","conv2d"),dp=ln(np,"filter","conv2d"),fp=cp,pp=!1;cp.rank===3&&(pp=!0,fp=cp.as4D(1,cp.shape[0],cp.shape[1],cp.shape[2])),g(fp.rank===4,function(){return"Error in conv2d: input must be rank 4, but got rank "+fp.rank+"."}),g(dp.rank===4,function(){return"Error in conv2d: filter must be rank 4, but got rank "+dp.rank+"."}),up!=null&&g(E(ap),function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+up+" but got pad "+ap+"."});var hp=sp==="NHWC"?fp.shape[3]:fp.shape[1];g(hp===dp.shape[2],function(){return"Error in conv2d: depth of input ("+hp+") must match input depth for filter "+dp.shape[2]+"."}),g(Io(rp,lp),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+rp+" and dilations '"+lp+"'"});var mp=ko(sp),gp=go(fp.shape,dp.shape,rp,lp,ap,up,!1,mp),vp=Nt.runKernelFunc(function(xp,Sp){var yp=xp.conv2d(fp,dp,gp);return Sp([dp,fp]),yp},{x:fp,$filter:dp},function(xp,Sp){var yp=Sp,bp=yp[0],Ep=yp[1];return g(Ro(lp),function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+lp+"'"}),{x:function(){return Fc(Ep.shape,xp,bp,rp,ap,sp)},$filter:function(){return Nc(Ep,xp,bp.shape,rp,ap,sp)}}});return pp?vp.as3D(vp.shape[1],vp.shape[2],vp.shape[3]):vp}}),Tc=Cn({conv3d_:function(_d,np,rp,ap,sp,lp){sp===void 0&&(sp="NDHWC"),lp===void 0&&(lp=[1,1,1]);var up=ln(_d,"x","conv3d"),cp=ln(np,"filter","conv3d"),dp=up,fp=!1;up.rank===4&&(fp=!0,dp=up.as5D(1,up.shape[0],up.shape[1],up.shape[2],up.shape[3])),g(dp.rank===5,function(){return"Error in conv3d: input must be rank 5, but got rank "+dp.rank+"."}),g(cp.rank===5,function(){return"Error in conv3d: filter must be rank 5, but got rank "+cp.rank+"."}),g(dp.shape[4]===cp.shape[3],function(){return"Error in conv3d: depth of input ("+dp.shape[4]+") must match input depth for filter "+cp.shape[3]+"."}),g(function(mp,gp){return kc(mp)||kc(gp)}(rp,lp),function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+rp+" and dilations '"+lp+"'"}),g(sp==="NDHWC",function(){return"Error in conv3d: got dataFormat of "+sp+" but only NDHWC is currently supported."});var pp=yo(dp.shape,cp.shape,rp,lp,ap),hp=Nt.runKernelFunc(function(mp,gp){var vp=mp.conv3d(dp,cp,pp);return gp([dp,cp]),vp},{x:dp,$filter:cp},function(mp,gp){g(kc(lp),function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+lp+"'"});var vp=gp[0],xp=gp[1];return{x:function(){return Sc(vp.shape,mp,xp,rp,ap)},$filter:function(){return function(Sp,yp,bp,Ep,wp){var _p=Sp;Sp.rank===4&&(_p=Sp.as5D(1,Sp.shape[0],Sp.shape[1],Sp.shape[2],Sp.shape[3]));var Cp=yp;Cp.rank===4&&(Cp=yp.as5D(1,yp.shape[0],yp.shape[1],yp.shape[2],yp.shape[3])),g(_p.rank===5,function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+_p.shape+"."}),g(Cp.rank===5,function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+Cp.shape+"."}),g(bp.length===5,function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+bp+"."}),g(_p.shape[4]===bp[3],function(){return"Error in conv3dDerFilter: depth of input "+_p.shape[4]+") must match input depth in filter ("+bp[3]+"."}),g(Cp.shape[4]===bp[4],function(){return"Error in conv3dDerFilter: depth of dy ("+Cp.shape[4]+") must match output depth for filter ("+bp[4]+")."});var $p=yo(_p.shape,bp,Ep,1,wp);return Nt.runKernelFunc(function(Rp){return Rp.conv3dDerFilter(_p,Cp,$p)},{x5D:_p,dy5D:Cp})}(vp,mp,xp.shape,rp,ap)}}});return fp?hp.as4D(hp.shape[1],hp.shape[2],hp.shape[3],hp.shape[4]):hp}}),Nc=Cn({conv2dDerFilter_:function(_d,np,rp,ap,sp,lp,up){lp===void 0&&(lp="NHWC");var cp=_d;_d.rank===3&&(cp=_d.as4D(1,_d.shape[0],_d.shape[1],_d.shape[2]));var dp=np;dp.rank===3&&(dp=np.as4D(1,np.shape[0],np.shape[1],np.shape[2])),g(cp.rank===4,function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+cp.shape+"."}),g(dp.rank===4,function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+dp.shape+"."}),g(rp.length===4,function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+rp+"."});var fp=lp==="NHWC"?cp.shape[3]:cp.shape[1],pp=lp==="NHWC"?dp.shape[3]:dp.shape[1];g(fp===rp[2],function(){return"Error in conv2dDerFilter: depth of input "+fp+") must match input depth in filter ("+rp[2]+"."}),g(pp===rp[3],function(){return"Error in conv2dDerFilter: depth of dy ("+pp+") must match output depth for filter ("+rp[3]+")."}),up!=null&&g(E(sp),function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+up+" but got pad "+sp+"."});var hp=ko(lp),mp=go(cp.shape,rp,ap,1,sp,up,!1,hp);return Nt.runKernelFunc(function(gp){return gp.conv2dDerFilter(cp,dp,mp)},{x4D:cp,dy4D:dp})}}),Fc=Cn({conv2dDerInput_:Ic}),Oc=Cn({depthwiseConv2d_:function(_d,np,rp,ap,sp,lp,up){lp===void 0&&(lp=[1,1]);var cp=ln(_d,"x","depthwiseConv2d"),dp=ln(np,"filter","depthwiseConv2d"),fp=cp,pp=!1;cp.rank===3&&(pp=!0,fp=cp.as4D(1,cp.shape[0],cp.shape[1],cp.shape[2])),g(fp.rank===4,function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+fp.rank+"."}),g(dp.rank===4,function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+dp.rank+"."}),g(fp.shape[3]===dp.shape[2],function(){return"Error in depthwiseConv2d: number of input channels ("+fp.shape[3]+") must match the inChannels dimension in filter "+dp.shape[2]+"."}),lp==null&&(lp=[1,1]),g(Io(rp,lp),function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+rp+" and dilations '"+lp+"'"}),up!=null&&g(E(ap),function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+up+" but got pad "+ap+"."});var hp=go(fp.shape,dp.shape,rp,lp,ap,up,!0),mp=Nt.runKernelFunc(function(gp,vp){var xp=gp.depthwiseConv2D(fp,dp,hp);return vp([fp,dp]),xp},{x:fp,$filter:dp},function(gp,vp){g(Ro(lp),function(){return"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+lp+"'"});var xp=vp[0],Sp=vp[1];return{x:function(){return _c(xp.shape,gp,Sp,hp)},$filter:function(){return Mc(xp,gp,Sp.shape,hp)}}});return pp?mp.as3D(mp.shape[1],mp.shape[2],mp.shape[3]):mp}}),_c=Cn({depthwiseConv2dDerInput_:function(_d,np,rp,ap){var sp=np,lp=!1;np.rank===3&&(lp=!0,sp=np.as4D(1,np.shape[0],np.shape[1],np.shape[2]));var up=Nt.runKernelFunc(function(cp){return cp.depthwiseConv2DDerInput(sp,rp,ap)},{dy4D:sp});return lp?up.as3D(up.shape[1],up.shape[2],up.shape[3]):up}}),Mc=Cn({depthwiseConv2dDerFilter_:function(_d,np,rp,ap){var sp=_d;_d.rank===3&&(sp=_d.as4D(1,_d.shape[0],_d.shape[1],_d.shape[2]));var lp=np;return lp.rank===3&&(lp=np.as4D(1,np.shape[0],np.shape[1],np.shape[2])),Nt.runKernelFunc(function(up){return up.depthwiseConv2DDerFilter(sp,lp,ap)},{x4D:sp,dy4D:lp})}}),Bc=Cn({separableConv2d_:function(_d,np,rp,ap,sp,lp,up){lp===void 0&&(lp=[1,1]),up===void 0&&(up="NHWC");var cp=ln(_d,"x","separableConv2d"),dp=ln(np,"depthwiseFilter","separableConv2d"),fp=ln(rp,"pointwiseFilter","separableConv2d"),pp=cp,hp=!1;if(cp.rank===3&&(hp=!0,pp=cp.as4D(1,cp.shape[0],cp.shape[1],cp.shape[2])),up==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");g(pp.rank===4,function(){return"Error in separableConv2d: input must be rank 4, but got rank "+pp.rank+"."}),g(dp.rank===4,function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+dp.rank+"."}),g(fp.rank===4,function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+dp.rank+"."}),g(fp.shape[0]===1,function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+fp.shape[0]+"."}),g(fp.shape[1]===1,function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+fp.shape[1]+"."});var mp=dp.shape[2],gp=dp.shape[3];g(fp.shape[2]===mp*gp,function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+mp*gp+", but got "+fp.shape[2]+"."});var vp=Oc(pp,dp,ap,sp,up,lp),xp=Dc(vp,fp,1,"valid",up);return hp?xp.as3D(xp.shape[1],xp.shape[2],xp.shape[3]):xp}}),Pc=Cn({conv2dTranspose_:function(_d,np,rp,ap,sp,lp){return Ic(rp,ln(_d,"x","conv2dTranspose"),ln(np,"filter","conv2dTranspose"),ap,sp,"NHWC",lp)}}),Lc=Cn({conv3dTranspose_:function(_d,np,rp,ap,sp){return Sc(rp,ln(_d,"x","conv3dTranspose"),ln(np,"filter","conv3dTranspose"),ap,sp)}}),Wc=Cn({matMul_:function(_d,np,rp,ap){var sp;rp===void 0&&(rp=!1),ap===void 0&&(ap=!1);var lp=ln(_d,"a","matMul"),up=ln(np,"b","matMul");sp=Rt(lp,up),lp=sp[0],up=sp[1];var cp=rp?lp.shape[lp.rank-2]:lp.shape[lp.rank-1],dp=ap?up.shape[up.rank-1]:up.shape[up.rank-2],fp=rp?lp.shape[lp.rank-1]:lp.shape[lp.rank-2],pp=ap?up.shape[up.rank-2]:up.shape[up.rank-1],hp=lp.shape.slice(0,-2),mp=up.shape.slice(0,-2),gp=w$1(hp),vp=w$1(mp);g(lp.rank>=2&&up.rank>=2&&lp.rank===up.rank,function(){return"Error in matMul: inputs must have the same rank of at least 2, got ranks "+lp.rank+" and "+up.rank+"."}),g(C(hp,mp),function(){return"Error in matMul: outer dimensions ("+hp+") and ("+mp+") of Tensors with shapes "+lp.shape+" and "+up.shape+" must match."}),g(cp===dp,function(){return"Error in matMul: inner shapes ("+cp+") and ("+dp+") of Tensors with shapes "+lp.shape+" and "+up.shape+" and transposeA="+rp+" and transposeB="+ap+" must match."});var xp=lp.shape.slice(0,-2).concat([fp,pp]),Sp=rp?lp.as3D(gp,cp,fp):lp.as3D(gp,fp,cp),yp=ap?up.as3D(vp,pp,dp):up.as3D(vp,dp,pp),bp={transposeA:rp,transposeB:ap};return Nt.runKernelFunc(function(Ep,wp){var _p=Ep.batchMatMul(Sp,yp,rp,ap);return wp([Sp,yp]),_p},{a:Sp,b:yp},function(Ep,wp){var _p=wp,Cp=_p[0],$p=_p[1];return rp||ap?!rp&&ap?{a:function(){return Ep.matMul($p,!1,!1)},b:function(){return Ep.matMul(Cp,!0,!1)}}:rp&&!ap?{a:function(){return $p.matMul(Ep,!1,!0)},b:function(){return Cp.matMul(Ep,!1,!1)}}:{a:function(){return $p.matMul(Ep,!0,!0)},b:function(){return Ep.matMul(Cp,!0,!0)}}:{a:function(){return Ep.matMul($p,!1,!0)},b:function(){return Cp.matMul(Ep,!0,!1)}}},"BatchMatMul",bp).reshape(xp)}}),Uc=Cn({dot_:function(_d,np){var rp=ln(_d,"t1","dot"),ap=ln(np,"t2","dot");g(!(rp.rank!==1&&rp.rank!==2||ap.rank!==1&&ap.rank!==2),function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+rp.rank+" and "+ap.rank+"."});var sp=rp.rank===1?rp.size:rp.shape[1],lp=ap.rank===1?ap.size:ap.shape[0];return g(sp===lp,function(){return"Error in dot: inner dimensions of inputs must match, but got "+sp+" and "+lp+"."}),rp.rank===1&&ap.rank===1?rp.as2D(1,-1).matMul(ap.as2D(-1,1)).asScalar():rp.rank===1&&ap.rank===2?rp.as2D(1,-1).matMul(ap.as2D(ap.shape[0],ap.shape[1])).as1D():rp.rank===2&&ap.rank===1?rp.matMul(ap.as2D(-1,1)).as1D():rp.matMul(ap.as2D(ap.shape[0],ap.shape[1]))}}),Vc=Cn({outerProduct_:function(_d,np){var rp=ln(_d,"v1","outerProduct"),ap=ln(np,"v2","outerProduct");return g(rp.rank===1&&ap.rank===1,function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+rp.rank+" and "+ap.rank+"."}),rp.as2D(-1,1).matMul(ap.as2D(1,-1))}}),zc=Cn({reverse_:function(_d,np){var rp=ln(_d,"x","reverse");if(rp.rank===0)return rp.clone();var ap=D(np,rp.shape);return Nt.runKernelFunc(function(sp){return sp.reverse(rp,ap)},{$x:rp},function(sp){return{$x:function(){return sp.reverse(ap)}}}).reshapeAs(rp)}}),Gc=Cn({reverse1d_:function(_d){var np=ln(_d,"x","reverse");return g(np.rank===1,function(){return"Error in reverse1D: x must be rank 1 but got rank "+np.rank+"."}),zc(np,0)}}),Hc=Cn({reverse2d_:function(_d,np){var rp=ln(_d,"x","reverse");return g(rp.rank===2,function(){return"Error in reverse2D: x must be rank 2 but got rank "+rp.rank+"."}),zc(rp,np)}}),qc=Cn({reverse3d_:function(_d,np){var rp=ln(_d,"x","reverse");return g(rp.rank===3,function(){return"Error in reverse3D: x must be rank 3 but got rank "+rp.rank+"."}),zc(rp,np)}}),Kc=Cn({reverse4d_:function(_d,np){var rp=ln(_d,"x","reverse");return g(rp.rank===4,function(){return"Error in reverse4D: x must be rank 4 but got rank "+rp.rank+"."}),zc(rp,np)}});function jc(_d,np,rp,ap,sp,lp){var up=ln(_d,"x","maxPool"),cp=up,dp=!1;up.rank===3&&(dp=!0,cp=up.as4D(1,up.shape[0],up.shape[1],up.shape[2])),ap==null&&(ap=[1,1]),g(cp.rank===4,function(){return"Error in maxPool: input must be rank 4 but got rank "+cp.rank+"."}),g(Io(rp,ap),function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+rp+" and dilations '"+ap+"'"}),lp!=null&&g(E(sp),function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+lp+" but got pad "+sp+"."});var fp=vo(cp.shape,np,rp,ap,sp,lp),pp=Nt.runKernelFunc(function(hp,mp){var gp=hp.maxPool(cp,fp);return mp([cp,gp]),gp},{x:cp},function(hp,mp){var gp=mp[0],vp=mp[1];return{x:function(){return function(xp,Sp,yp,bp,Ep,wp,_p,Cp){var $p=ln(xp,"dy","maxPoolBackprop"),Rp=ln(Sp,"input","maxPoolBackprop"),Pp=ln(yp,"output","maxPoolBackprop");g(Rp.rank===$p.rank,function(){return"Rank of input ("+Rp.rank+") does not match rank of dy ("+$p.rank+")"}),wp==null&&(wp=[1,1]),g(Io(Ep,wp),function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+Ep+" and dilations '"+wp+"'"}),g($p.rank===4,function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+$p.rank+"."}),g(Rp.rank===4,function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+Rp.rank+"."}),Cp!=null&&g(E(_p),function(){return"Error in maxPoolBackprop: pad must be an integer when using, dimRoundingMode "+Cp+" but got pad "+_p+"."});var Op=vo(Rp.shape,bp,Ep,wp,_p,Cp);return Nt.runKernelFunc(function(jp){return jp.maxPoolBackprop($p,Rp,Pp,Op)},{$dy:$p,$input:Rp})}(hp,gp,vp,np,rp,ap,sp)}}});return dp?pp.as3D(pp.shape[1],pp.shape[2],pp.shape[3]):pp}function Xc(_d,np,rp,ap,sp,lp){var up=ln(_d,"x","avgPool","float32");ap==null&&(ap=[1,1]),g(Io(rp,ap),function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+rp+" and dilations '"+ap+"'"});var cp=up,dp=!1;up.rank===3&&(dp=!0,cp=up.as4D(1,up.shape[0],up.shape[1],up.shape[2])),g(cp.rank===4,function(){return"Error in avgPool: x must be rank 4 but got rank "+cp.rank+"."}),lp!=null&&g(E(sp),function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+lp+" but got pad "+sp+"."});var fp=vo(cp.shape,np,rp,ap,sp,lp),pp=Nt.runKernelFunc(function(hp){return hp.avgPool(cp,fp)},{x:cp},function(hp){return{x:function(){return function(mp,gp,vp,xp,Sp,yp){var bp=ln(mp,"dy","avgPoolBackprop"),Ep=ln(gp,"input","avgPoolBackprop");g(Ep.rank===bp.rank,function(){return"Rank of input ("+Ep.rank+") does not match rank of dy ("+bp.rank+")"}),Sp==null&&(Sp=[1,1]),g(Io(xp,Sp),function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+xp+" and dilations '"+Sp+"'"});var wp=Ep,_p=bp,Cp=!1;Ep.rank===3&&(Cp=!0,wp=Ep.as4D(1,Ep.shape[0],Ep.shape[1],Ep.shape[2]),_p=bp.as4D(1,bp.shape[0],bp.shape[1],bp.shape[2])),g(_p.rank===4,function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+_p.rank+"."}),g(wp.rank===4,function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+wp.rank+"."});var $p=vo(wp.shape,vp,xp,Sp,yp),Rp=Nt.runKernelFunc(function(Pp){return Pp.avgPoolBackprop(_p,wp,$p)},{dy4D:_p,input4D:wp});return Cp?Rp.as3D(Rp.shape[1],Rp.shape[2],Rp.shape[3]):Rp}(hp,cp,np,rp,ap,sp)}}});return pp=pp.cast(up.dtype),dp?pp.as3D(pp.shape[1],pp.shape[2],pp.shape[3]):pp}var $c=Cn({maxPool_:function(_d,np,rp,ap,sp){return jc(_d,np,rp,1,ap,sp)}}),Yc=Cn({avgPool_:function(_d,np,rp,ap,sp){return Xc(_d,np,rp,1,ap,sp)}}),Qc=Cn({pool_:function(_d,np,rp,ap,sp,lp){sp==null&&(sp=[1,1]),lp==null&&(lp=1),ap===0&&(ap="valid");var up=ln(_d,"x","maxPool"),cp=up,dp=!1;up.rank===3&&(dp=!0,cp=up.as4D(1,up.shape[0],up.shape[1],up.shape[2])),g(Io(lp,sp),function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+lp+" and dilations '"+sp+"'"});var fp,pp=vo(cp.shape,np,lp,sp,ap),hp=[pp.dilationHeight,pp.dilationWidth];fp=ap==="same"?function(wp,_p){var Cp=wp.map(function(Pp,Op){return Pp+(Pp-1)*(_p[Op]-1)}).map(function(Pp){return Pp-1}),$p=Cp.map(function(Pp){return Math.floor(Pp/2)}),Rp=Cp.map(function(Pp,Op){return Pp-$p[Op]});return Cp.map(function(Pp,Op){return[$p[Op],Rp[Op]]})}([pp.filterHeight,pp.filterWidth],hp):[[0,0],[0,0]];var mp=hp[0]===1&&hp[1]===1,gp=function(wp,_p,Cp){var $p=Cp.map(function(Dp){return Dp[0]}),Rp=Cp.map(function(Dp){return Dp[1]}),Pp=wp.concat($p,Rp),Op=_p.map(function(Dp,Fp){return(Dp-Pp[Fp]%Dp)%Dp}),jp=Rp.map(function(Dp,Fp){return Dp+Op[Fp]}),Mp=_p.map(function(Dp,Fp){return[$p[Fp],jp[Fp]]}),Ap=_p.map(function(Dp,Fp){return[0,Op[Fp]]});return[Mp,Ap]}([pp.inHeight,pp.inWidth],hp,fp),vp=gp[0],xp=gp[1],Sp=mp?ap:"valid",yp=mp?cp:Ar(cp,hp,vp),bp=(rp==="avg"?function(){return Xc(yp,np,lp,1,Sp)}:function(){return jc(yp,np,lp,1,Sp)})(),Ep=mp?bp:cr(bp,hp,xp);return dp?Ep.as3D(Ep.shape[1],Ep.shape[2],Ep.shape[3]):Ep}}),Jc=Cn({maxPool3d_:function(_d,np,rp,ap,sp,lp,up){lp===void 0&&(lp="NDHWC");var cp=ln(_d,"x","maxPool3d"),dp=cp,fp=!1;cp.rank===4&&(fp=!0,dp=cp.as5D(1,cp.shape[0],cp.shape[1],cp.shape[2],cp.shape[3])),up==null&&(up=[1,1,1]),g(dp.rank===5,function(){return"Error in maxPool3d: x must be rank 5 but got rank "+dp.rank+"."}),g(lp==="NDHWC",function(){return"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+lp}),g(Io(rp,up),function(){return"Error in maxPool3d: Either strides or dilations must be 1. Got strides "+rp+" and dilations '"+up+"'"}),sp!=null&&g(E(ap),function(){return"Error in maxPool3d: pad must be an integer when using, dimRoundingMode "+sp+" but got pad "+ap+"."});var pp=mo(dp.shape,np,rp,up,ap,sp,lp),hp=Nt.runKernelFunc(function(mp,gp){var vp=mp.maxPool3d(dp,pp);return gp([dp,vp]),vp},{x:dp},function(mp,gp){var vp=gp[0],xp=gp[1];return{x:function(){return function(Sp,yp,bp,Ep,wp,_p,Cp,$p){var Rp=ln(Sp,"dy","maxPool3dBackprop"),Pp=ln(yp,"input","maxPool3dBackprop"),Op=ln(bp,"output","maxPool3dBackprop"),jp=Rp,Mp=Pp,Ap=Op,Dp=!1;Pp.rank===4&&(Dp=!0,jp=Rp.as5D(1,Rp.shape[0],Rp.shape[1],Rp.shape[2],Rp.shape[3]),Mp=Pp.as5D(1,Pp.shape[0],Pp.shape[1],Pp.shape[2],Pp.shape[3]),Ap=Op.as5D(1,Op.shape[0],Op.shape[1],Op.shape[2],Op.shape[3])),g(jp.rank===5,function(){return"Error in maxPool3dBackprop: dy must be rank 5 but got rank "+jp.rank+"."}),g(Mp.rank===5,function(){return"Error in maxPool3dBackprop: input must be rank 5 but got rank "+Mp.rank+"."}),g(Ap.rank===5,function(){return"Error in maxPool3dBackprop: output must be rank 5 but got rank "+Ap.rank+"."}),_p==null&&(_p=[1,1,1]),g(Io(wp,_p),function(){return"Error in maxPool3dBackprop: Either strides or dilations must be 1. Got strides "+wp+" and dilations '"+_p+"'"}),$p!=null&&g(E(Cp),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+$p+" but got pad "+Cp+"."});var Fp=mo(Mp.shape,Ep,wp,_p,Cp,$p),Ip=Nt.runKernelFunc(function(kp){return kp.maxPool3dBackprop(jp,Mp,Ap,Fp)},{dy5D:jp,input5D:Mp});return Dp?Ip.as4D(Ip.shape[1],Ip.shape[2],Ip.shape[3],Ip.shape[4]):Ip}(mp,vp,xp,np,rp,up,ap,sp)}}});return fp?hp.as4D(hp.shape[1],hp.shape[2],hp.shape[3],hp.shape[4]):hp}}),Zc=Cn({avgPool3d_:function(_d,np,rp,ap,sp,lp,up){lp===void 0&&(lp="NDHWC");var cp=ln(_d,"x","avgPool3d","float32"),dp=cp,fp=!1;cp.rank===4&&(fp=!0,dp=cp.as5D(1,cp.shape[0],cp.shape[1],cp.shape[2],cp.shape[3])),up==null&&(up=[1,1,1]),g(dp.rank===5,function(){return"Error in avgPool3d: x must be rank 5 but got rank "+dp.rank+"."}),g(lp==="NDHWC",function(){return"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+lp}),g(Io(rp,up),function(){return"Error in avgPool3d: Either strides or dilations must be 1. Got strides "+rp+" and dilations '"+up+"'"}),sp!=null&&g(E(ap),function(){return"Error in avgPool3d: pad must be an integer when using, dimRoundingMode "+sp+" but got pad "+ap+"."});var pp=mo(dp.shape,np,rp,up,ap,sp,lp),hp=Nt.runKernelFunc(function(mp){return mp.avgPool3d(dp,pp)},{x:dp},function(mp){return{x:function(){return function(gp,vp,xp,Sp,yp,bp,Ep){var wp=ln(gp,"dy","avgPool3dBackprop"),_p=ln(vp,"input","avgPool3dBackprop"),Cp=wp,$p=_p,Rp=!1;_p.rank===4&&(Rp=!0,Cp=wp.as5D(1,wp.shape[0],wp.shape[1],wp.shape[2],wp.shape[3]),$p=_p.as5D(1,_p.shape[0],_p.shape[1],_p.shape[2],_p.shape[3])),g(Cp.rank===5,function(){return"Error in avgPool3dBackprop: dy must be rank 5 but got rank "+Cp.rank+"."}),g($p.rank===5,function(){return"Error in avgPool3dBackprop: input must be rank 5 but got rank "+$p.rank+"."}),yp==null&&(yp=[1,1,1]),g(Io(Sp,yp),function(){return"Error in avgPool3dBackprop: Either strides or dilations must be 1. Got strides "+Sp+" and dilations '"+yp+"'"}),Ep!=null&&g(E(bp),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+Ep+" but got pad "+bp+"."});var Pp=mo($p.shape,xp,Sp,yp,bp,Ep),Op=Nt.runKernelFunc(function(jp){return jp.avgPool3dBackprop(Cp,$p,Pp)},{dy5D:Cp,input5D:$p});return Rp?Op.as4D(Op.shape[1],Op.shape[2],Op.shape[3],Op.shape[4]):Op}(mp,dp,np,rp,up,ap,sp)}}});return hp=hp.cast(dp.dtype),fp?hp.as4D(hp.shape[1],hp.shape[2],hp.shape[3],hp.shape[4]):hp}}),tl=Cn({slice_:function(_d,np,rp){var ap,sp,lp=ln(_d,"x","slice");if(lp.rank===0)throw new Error("Slicing scalar is not possible");(ap=typeof np=="number"?[np].concat(new Array(lp.rank-1).fill(0)):np.length<lp.rank?np.concat(new Array(lp.rank-np.length).fill(0)):np.slice()).forEach(function(dp){g(dp!==-1,function(){return"slice() does not support negative begin indexing."})}),sp=(sp=rp==null?new Array(lp.rank).fill(-1):typeof rp=="number"?[rp].concat(new Array(lp.rank-1).fill(-1)):rp.length<lp.rank?rp.concat(new Array(lp.rank-rp.length).fill(-1)):rp).map(function(dp,fp){return dp>=0?dp:(g(dp===-1,function(){return"Negative size values should be exactly -1 but got "+dp+" for the slice() size at index "+fp+"."}),lp.shape[fp]-ap[fp])}),qr(lp,ap,sp);var up=lp.shape,cp={begin:ap,size:sp};return Nt.runKernelFunc(function(dp){return dp.slice(lp,ap,sp)},{x:lp},function(dp){for(var fp=[],pp=0;pp<dp.rank;pp++)fp.push([ap[pp],up[pp]-ap[pp]-sp[pp]]);return{x:function(){return dp.pad(fp)}}},"Slice",cp)}}),el=Cn({slice1d_:function(_d,np,rp){var ap=ln(_d,"x","slice1d");return g(ap.rank===1,function(){return"slice1d expects a rank-1 tensor, but got a rank-"+ap.rank+" tensor"}),tl(ap,[np],[rp])}}),nl=Cn({slice2d_:function(_d,np,rp){var ap=ln(_d,"x","slice2d");return g(ap.rank===2,function(){return"slice2d expects a rank-2 tensor, but got a rank-"+ap.rank+" tensor"}),tl(ap,np,rp)}}),rl=Cn({slice3d_:function(_d,np,rp){var ap=ln(_d,"x","slice3d");return g(ap.rank===3,function(){return"slice3d expects a rank-3 tensor, but got a rank-"+ap.rank+" tensor"}),tl(ap,np,rp)}}),ol=Cn({slice4d_:function(_d,np,rp){var ap=ln(_d,"x","slice4d");return g(ap.rank===4,function(){return"slice4d expects a rank-4 tensor, but got a rank-"+ap.rank+" tensor"}),tl(ap,np,rp)}});function al(_d,np,rp,ap,sp){return np.rank<rp.rank&&(np=np.reshape(vn(np.shape,ap))),_d.rank<rp.rank&&(_d=_d.reshape(vn(_d.shape,ap))),{$x:function(){var lp=_d.mul(rp.equal(np).cast(_d.dtype));return sp==null?lp:lp.transpose(sp)}}}var il=Cn({all_:function(_d,np,rp){np===void 0&&(np=null),rp===void 0&&(rp=!1);var ap=ln(_d,"x","all","bool"),sp=D(np,ap.shape),lp=sp,up=gn(lp,ap.rank);up!=null&&(ap=ap.transpose(up),lp=xn(lp.length,ap.rank));var cp=Nt.runKernelFunc(function(fp){return fp.all(ap,lp)},{$x:ap});if(rp){var dp=vn(cp.shape,sp);return cp.reshape(dp)}return cp}}),ul=Cn({any_:function(_d,np,rp){np===void 0&&(np=null),rp===void 0&&(rp=!1);var ap=ln(_d,"x","any","bool"),sp=D(np,ap.shape),lp=sp,up=gn(lp,ap.rank);up!=null&&(ap=ap.transpose(up),lp=xn(lp.length,ap.rank));var cp=Nt.runKernelFunc(function(fp){return fp.any(ap,lp)},{$x:ap});if(rp){var dp=vn(cp.shape,sp);return cp.reshape(dp)}return cp}}),sl=Cn({argMax_:function(_d,np){np===void 0&&(np=0);var rp=ln(_d,"x","argMax");np==null&&(np=0);var ap=D(np,rp.shape),sp=gn(ap,rp.rank);return sp!=null&&(rp=rp.transpose(sp),ap=xn(ap.length,rp.rank)),Nt.runKernelFunc(function(lp,up){var cp=lp.argMax(rp,ap[0]);return up([rp]),cp},{$x:rp},function(lp,up){var cp=up[0];return{$x:function(){return zn(cp)}}})}}),cl=Cn({argMin_:function(_d,np){np===void 0&&(np=0);var rp=ln(_d,"x","argMin");np==null&&(np=0);var ap=D(np,rp.shape),sp=gn(ap,rp.rank);return sp!=null&&(rp=rp.transpose(sp),ap=xn(ap.length,rp.rank)),Nt.runKernelFunc(function(lp,up){var cp=lp.argMin(rp,ap[0]);return up([rp]),cp},{$x:rp},function(lp,up){var cp=up[0];return{$x:function(){return zn(cp)}}})}}),ll=Cn({logSumExp_:function(_d,np,rp){np===void 0&&(np=null),rp===void 0&&(rp=!1);var ap=ln(_d,"x","logSumExp"),sp=D(np,ap.shape),lp=ap.max(sp,!0),up=ap.sub(lp).exp().sum(sp).log(),cp=lp.reshape(up.shape).add(up);if(rp){var dp=vn(cp.shape,sp);return cp.reshape(dp)}return cp}}),hl=Cn({max_:function(_d,np,rp){np===void 0&&(np=null),rp===void 0&&(rp=!1);var ap=ln(_d,"x","max"),sp=ap,lp=D(np,ap.shape),up=lp,cp=gn(up,ap.rank);cp!=null&&(ap=ap.transpose(cp),up=xn(up.length,ap.rank));var dp=Nt.runKernelFunc(function(pp,hp){var mp=pp.max(ap,up);return hp([sp,mp]),mp},{$x:ap},function(pp,hp){return al(pp,hp[1],hp[0],lp,cp)});if(rp){var fp=vn(dp.shape,lp);dp=dp.reshape(fp)}return dp}}),fl=Cn({mean_:function(_d,np,rp){np===void 0&&(np=null),rp===void 0&&(rp=!1);var ap=ln(_d,"x","mean"),sp=D(np,ap.shape),lp=w$1(dn(ap.shape,sp)[1]);return oo(function(up){var cp=An(lp);return{value:(cp.dtype===up.dtype?up:up.cast(cp.dtype)).div(cp).sum(np,rp),gradFunc:function(dp){var fp=up.shape.slice();return sp.forEach(function(pp){fp[pp]=1}),dp.reshape(fp).mul(Bn(up.shape,"float32")).div(lp)}}})(ap)}}),pl=Cn({min_:function(_d,np,rp){np===void 0&&(np=null),rp===void 0&&(rp=!1);var ap=ln(_d,"x","min"),sp=ap,lp=D(np,ap.shape),up=lp,cp=gn(up,ap.rank);cp!=null&&(ap=ap.transpose(cp),up=xn(up.length,ap.rank));var dp=Nt.runKernelFunc(function(pp,hp){var mp=pp.min(ap,up);return hp([sp,mp]),mp},{$x:ap},function(pp,hp){return al(pp,hp[1],hp[0],lp,cp)});if(rp){var fp=vn(dp.shape,lp);dp=dp.reshape(fp)}return dp}}),dl=Cn({moments_:function(_d,np,rp){np===void 0&&(np=null),rp===void 0&&(rp=!1);var ap=D(np,(_d=ln(_d,"x","moments")).shape),sp=_d.mean(ap,rp),lp=sp.shape;rp||(lp=vn(sp.shape,ap));var up=_d.toFloat().sub(sp.reshape(lp)).square();return{mean:sp,variance:up.mean(ap,rp)}}}),vl=Cn({sum_:function(_d,np,rp){np===void 0&&(np=null),rp===void 0&&(rp=!1);var ap=ln(_d,"x","sum");ap.dtype==="bool"&&(ap=ap.toInt());var sp=D(np,ap.shape);return oo(function(lp){var up=gn(sp,lp.rank),cp=sp,dp=lp;up!=null&&(dp=lp.transpose(up),cp=xn(cp.length,lp.rank));var fp=Nt.runKernelFunc(function(hp){return hp.sum(dp,cp)},{permutedX:dp});if(rp){var pp=vn(fp.shape,sp);fp=fp.reshape(pp)}return{value:fp,gradFunc:function(hp){var mp=lp.shape.slice();return sp.forEach(function(gp){mp[gp]=1}),hp.reshape(mp).mul(Bn(lp.shape,"float32"))}}})(ap)}}),ml=Cn({prod_:function(_d,np,rp){np===void 0&&(np=null),rp===void 0&&(rp=!1);var ap=ln(_d,"x","prod");ap.dtype==="bool"&&(ap=ap.toInt());var sp=D(np,ap.shape),lp=gn(sp,ap.rank),up=sp,cp=ap;lp!=null&&(cp=ap.transpose(lp),up=xn(up.length,ap.rank));var dp=Nt.runKernelFunc(function(pp){return pp.prod(cp,up)},{permutedX:cp});if(rp){var fp=vn(dp.shape,sp);dp=dp.reshape(fp)}return dp}}),gl=Cn({elu_:function(_d){var np=ln(_d,"x","elu");return Nt.runKernelFunc(function(rp,ap){var sp=rp.elu(np);return ap([sp]),sp},{$x:np},function(rp,ap){var sp=ap[0];return{$x:function(){return Nt.runKernelFunc(function(lp){return lp.eluDer(rp,sp)},{dy:rp,y:sp})}}})}}),yl=Cn({leakyRelu_:function(_d,np){np===void 0&&(np=.2);var rp=ln(_d,"x","leakyRelu");return Xs(An(np).mul(rp),rp)}}),xl=Cn({prelu_:function(_d,np){var rp=ln(_d,"x","prelu"),ap=ln(np,"alpha","prelu");return Nt.runKernelFunc(function(sp,lp){var up=sp.prelu(rp,ap);return lp([rp,ap]),up},{x:rp,alpha:ap},function(sp,lp){var up=lp[0],cp=lp[1],dp=up.greater(0);return{x:function(){return Ws(dp,sp,sp.mul(cp))},alpha:function(){var fp=Ws(dp,zn(sp),sp.mul(up)),pp=fo(cp.shape,sp.shape);return pp.length>0&&(fp=fp.sum(pp)),fp.reshape(cp.shape)}}},"Prelu")}}),bl=Cn({relu_:function(_d){var np=ln(_d,"x","relu");return np.dtype==="bool"?np.toInt():Nt.runKernelFunc(function(rp,ap){var sp=rp.relu(np);return ap([np]),sp},{$x:np},function(rp,ap){var sp=ap[0];return{$x:function(){return rp.mulStrict(sp.step().toFloat())}}})}}),wl=Cn({relu6_:function(_d){var np=ln(_d,"x","relu6");return np.dtype==="bool"?np.toInt():Nt.runKernelFunc(function(rp,ap){var sp=rp.relu6(np);return ap([np]),sp},{$x:np},function(rp,ap){var sp=ap[0],lp=sp.lessEqual(6).mul(sp.step());return{$x:function(){return rp.mulStrict(lp.toFloat())}}})}}),Cl=Cn({selu_:function(_d){var np=ln(_d,"x","selu");return Nt.runKernelFunc(function(rp,ap){var sp=rp.selu(np);return ap([np]),sp},{$x:np},function(rp,ap){var sp=ap[0];return{$x:function(){var lp=sp.greater(An(0)),up=An(iu),cp=An(uu),dp=rp.mul(cp),fp=rp.mul(up).mul(sp.toFloat().exp());return Ws(lp,dp,fp)}}})}}),El=Cn({transpose_:function(_d,np){var rp=ln(_d,"x","transpose");return np==null&&(np=rp.shape.map(function(ap,sp){return sp}).reverse()),g(rp.rank===np.length,function(){return"Error in transpose: rank of input "+rp.rank+" must match length of perm "+np+"."}),np.forEach(function(ap){g(ap>=0&&ap<rp.rank,function(){return"All entries in 'perm' must be between 0 and "+(rp.rank-1)+" but got "+np})}),rp.rank<=1?rp.clone():Nt.runKernelFunc(function(ap){return ap.transpose(rp,np)},{$x:rp},function(ap){var sp=yn(np);return{$x:function(){return ap.transpose(sp)}}})}}),Rl=Cn({localResponseNormalization_:function(_d,np,rp,ap,sp){np===void 0&&(np=5),rp===void 0&&(rp=1),ap===void 0&&(ap=1),sp===void 0&&(sp=.5);var lp=ln(_d,"x","localResponseNormalization");g(lp.rank===4||lp.rank===3,function(){return`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank `+lp.rank+"."}),g(E(np),function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+np+"."});var up=lp,cp=!1;lp.rank===3&&(cp=!0,up=lp.as4D(1,lp.shape[0],lp.shape[1],lp.shape[2]));var dp=Nt.runKernelFunc(function(fp,pp){var hp=fp.localResponseNormalization4D(up,np,rp,ap,sp);return pp([up,hp]),hp},{x4D:up},function(fp,pp){var hp=pp[0],mp=pp[1];return{x4D:function(){return Nt.runKernelFunc(function(gp){return gp.LRNGrad(fp,hp,mp,np,rp,ap,sp)},{})}}});return cp?dp.as3D(dp.shape[1],dp.shape[2],dp.shape[3]):dp}}),Il=Cn({norm_:function(_d,np,rp,ap){np===void 0&&(np="euclidean"),rp===void 0&&(rp=null),ap===void 0&&(ap=!1);var sp=function cp(dp,fp,pp){if(pp===void 0&&(pp=null),dp.rank===0)return dp.abs();if(dp.rank!==1&&pp===null)return cp(dp.reshape([-1]),fp,pp);if(dp.rank===1||typeof pp=="number"||Array.isArray(pp)&&pp.length===1){if(fp===1)return dp.abs().sum(pp);if(fp===1/0)return dp.abs().max(pp);if(fp===-1/0)return dp.abs().min(pp);if(fp==="euclidean"||fp===2)return dp.abs().pow(An(2,"int32")).sum(pp).sqrt();throw new Error("Error in norm: invalid ord value: "+fp)}if(Array.isArray(pp)&&pp.length===2){if(fp===1)return dp.abs().sum(pp[0]).max(pp[1]-1);if(fp===1/0)return dp.abs().sum(pp[1]).max(pp[0]);if(fp===-1/0)return dp.abs().sum(pp[1]).min(pp[0]);if(fp==="fro"||fp==="euclidean")return dp.square().sum(pp).sqrt();throw new Error("Error in norm: invalid ord value: "+fp)}throw new Error("Error in norm: invalid axis: "+pp)}(_d=ln(_d,"x","norm"),np,rp),lp=sp.shape;if(ap){var up=D(rp,_d.shape);lp=vn(sp.shape,up)}return sp.reshape(lp)}}),kl=Cn({basicLSTMCell_:function(_d,np,rp,ap,sp,lp){var up=ln(_d,"forgetBias","basicLSTMCell"),cp=ln(np,"lstmKernel","basicLSTMCell"),dp=ln(rp,"lstmBias","basicLSTMCell"),fp=ln(ap,"data","basicLSTMCell"),pp=ln(sp,"c","basicLSTMCell"),hp=ln(lp,"h","basicLSTMCell"),mp=fp.concat(hp,1).matMul(cp).add(dp),gp=mp.shape[0],vp=mp.shape[1]/4,xp=[gp,vp],Sp=mp.slice([0,0],xp),yp=mp.slice([0,vp],xp),bp=mp.slice([0,2*vp],xp),Ep=mp.slice([0,3*vp],xp),wp=Sp.sigmoid().mulStrict(yp.tanh()).addStrict(pp.mulStrict(up.add(bp).sigmoid())),_p=wp.tanh().mulStrict(Ep.sigmoid());return[wp,_p]}}),Sl=Cn({multiRNNCell_:function(_d,np,rp,ap){for(var sp=ln(np,"data","multiRNNCell"),lp=hn(rp,"c","multiRNNCell"),up=hn(ap,"h","multiRNNCell"),cp=sp,dp=[],fp=0;fp<_d.length;fp++){var pp=_d[fp](cp,lp[fp],up[fp]);dp.push(pp[0]),dp.push(pp[1]),cp=pp[1]}var hp=[],mp=[];for(fp=0;fp<dp.length;fp+=2)hp.push(dp[fp]),mp.push(dp[fp+1]);return[hp,mp]}}),Al=Cn({movingAverage_:function(_d,np,rp,ap,sp){sp===void 0&&(sp=!0);var lp=ln(_d,"v","movingAverage"),up=ln(np,"x","movingAverage"),cp=ln(rp,"decay","movingAverage");It(lp,up),g(C(lp.shape,up.shape),function(){return"Shape mismatch in v and x"});var dp=An(1),fp=dp.sub(cp),pp=up.sub(lp).mul(fp);if(sp){g(ap!=null,function(){return"When using zeroDebias: true, step is required."});var hp=ln(ap,"step","movingAverage");pp=pp.div(dp.sub(nc(cp,hp)))}return lp.add(pp)}}),Dl=Cn({stridedSlice_:function(_d,np,rp,ap,sp,lp,up,cp,dp){if(sp===void 0&&(sp=0),lp===void 0&&(lp=0),up===void 0&&(up=0),cp===void 0&&(cp=0),dp===void 0&&(dp=0),ap==null&&(ap=new Array(np.length)),up!==0)throw new Error("ellipsis mask is not yet supported");var fp=ln(_d,"x","stridedSlice"),pp=Kr(cp),hp=fp.shape.slice();pp.forEach(function(Sp){np[Sp]=0,rp[Sp]=1,hp.splice(Sp,0,1)}),fp=fp.reshape(hp);for(var mp=0;mp<fp.rank;mp++)np[mp]=Xr(sp,np,ap,fp.shape,mp),rp[mp]=$r(lp,rp,ap,fp.shape,mp),ap[mp]=ap[mp]||1;var gp=Kr(dp);gp.forEach(function(Sp){rp[Sp]=np[Sp]+1,ap[Sp]=1});var vp=jr(np,rp,ap),xp=vp.filter(function(Sp,yp){return gp.indexOf(yp)===-1});return ap.every(function(Sp){return Sp===1})?tl(fp,np,vp).reshape(xp):Nt.runKernelFunc(function(Sp){return Sp.stridedSlice(fp,np,rp,ap)},{$x:fp}).reshape(xp)}}),Tl=Cn({topk_:function(_d,np,rp){np===void 0&&(np=1),rp===void 0&&(rp=!0);var ap=ln(_d,"x","topk");if(ap.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");var sp=ap.shape[ap.shape.length-1];if(np>sp)throw new Error("'k' passed to topk() must be <= the last dimension ("+sp+") but got "+np);var lp=Nt.runKernelFunc(function(up){return up.topk(ap,np,rp)},{$x:ap});return{values:lp[0],indices:lp[1]}}}),Nl=Cn({scatterND_:function(_d,np,rp){var ap=ln(_d,"indices","scatterND","int32"),sp=ln(np,"updates","scatterND");return Gr(sp,ap,rp),Nt.runKernelFunc(function(lp){return lp.scatterND(ap,sp,rp)},{$indices:ap,$updates:sp})}}),Fl=Cn({fft_:function(_d){g(_d.dtype==="complex64",function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+_d.dtype+"."});var np=_d.shape[_d.shape.length-1],rp=_d.size/np,ap=_d.as2D(rp,np);return Nt.runKernelFunc(function(sp){return sp.fft(ap)},{input:_d}).reshape(_d.shape)}}),Ol=Cn({ifft_:function(_d){g(_d.dtype==="complex64",function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+_d.dtype+"."});var np=_d.shape[_d.shape.length-1],rp=_d.size/np,ap=_d.as2D(rp,np);return Nt.runKernelFunc(function(sp){return sp.ifft(ap)},{input:_d}).reshape(_d.shape)}}),_l=Cn({rfft_:function(_d,np){g(_d.dtype==="float32",function(){return"The dtype for rfft() must be real value but got "+_d.dtype});var rp,ap=_d.shape[_d.shape.length-1],sp=_d.size/ap;if(np!=null&&np<ap){var lp=_d.shape.map(function(yp){return 0}),up=_d.shape.map(function(yp){return yp});up[_d.shape.length-1]=np,rp=_d.slice(lp,up),ap=np}else if(np!=null&&np>ap){var cp=_d.shape.map(function(yp){return yp});cp[_d.shape.length-1]=np-ap,rp=_d.concat(Pn(cp),_d.shape.length-1),ap=np}else rp=_d;var dp=rp.zerosLike(),fp=En(rp,dp).as2D(sp,ap),pp=Fl(fp),hp=Math.floor(ap/2)+1,mp=Rn(pp),gp=In(pp),vp=mp.split([hp,ap-hp],mp.shape.length-1),xp=gp.split([hp,ap-hp],gp.shape.length-1),Sp=rp.shape.slice();return Sp[rp.shape.length-1]=hp,En(vp[0],xp[0]).reshape(Sp)}}),Ml=Cn({irfft_:function(_d){var np=_d.shape[_d.shape.length-1],rp=_d.size/np;if(np<=2){var ap=_d.as2D(rp,np),sp=Ol(ap);return Rn(sp)}var lp=[rp,2*(np-1)],up=Rn(_d).as2D(rp,np),cp=In(_d).as2D(rp,np),dp=up.slice([0,1],[rp,np-2]).reverse(1),fp=cp.slice([0,1],[rp,np-2]).reverse(1).mul(An(-1)),pp=up.concat(dp,1),hp=cp.concat(fp,1);return ap=En(pp,hp).as2D(lp[0],lp[1]),sp=Ol(ap),Rn(sp)}}),Bl=Object.freeze({fft:Fl,ifft:Ol,rfft:_l,irfft:Ml}),Pl=Cn({sparseToDense_:function(_d,np,rp,ap){ap===void 0&&(ap=0);var sp=ln(_d,"sparseIndices","sparseToDense","int32"),lp=ln(np,"sparseValues","sparseToDense"),up=ln(ap,"defaultValue","sparseToDense",lp.dtype);return function(cp,dp,fp,pp){if(cp.dtype!=="int32")throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+cp.dtype+".");if(cp.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+cp.shape+".");var hp=cp.rank>0?cp.shape[0]:1,mp=cp.rank>1?cp.shape[1]:1;if(fp.length!==mp)throw new Error("outputShape has incorrect number of elements:, "+fp.length+", should be: "+mp+".");var gp=dp.size;if(dp.rank!==0&&(dp.rank!==1||gp!==hp))throw new Error("sparseValues has incorrect shape "+dp.shape+", should be [] or ["+hp+"]");if(dp.dtype!==pp.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(sp,lp,rp,up),Nt.runKernelFunc(function(cp){return cp.sparseToDense(sp,lp,rp,up)},{$sparseIndices:sp,$sparseValues:lp,$defaultValue:up})}}),Ll=Cn({gatherND_:function(_d,np){var rp=ln(np,"indices","gatherND","int32"),ap=ln(_d,"x","gatherND");return Nt.runKernelFunc(function(sp){return sp.gatherND(ap,rp)},{$x:ap,$indices:rp})}}),Wl=Cn({diag_:function(_d){var np=ln(_d,"x","diag").flatten(),rp=_d.shape.concat(_d.shape);return Nt.runKernelFunc(function(ap){return ap.diag(np)},{$x:np}).reshape(rp)}}),Ul=Cn({dropout_:function(_d,np,rp,ap){var sp=ln(_d,"x","dropout");if(g(sp.dtype==="float32",function(){return"x has to be a floating point tensor since it's going to be scaled, but got a "+sp.dtype+" tensor instead."}),g(np>=0&&np<1,function(){return"rate must be a float in the range [0, 1), but got "+np+"."}),np===0)return _d instanceof dt?sp.clone():sp;var lp=function(dp,fp){if(fp==null)return dp.shape.slice();if(C(dp.shape,fp))return fp;if(dp.shape.length===fp.length){for(var pp=[],hp=0;hp<dp.shape.length;hp++)fp[hp]==null&&dp.shape[hp]!=null?pp.push(dp.shape[hp]):pp.push(fp[hp]);return pp}return fp}(sp,rp),up=1-np,cp=kr(lp,0,1,"float32",ap).add(up).floor().div(up);return sp.mul(cp)}});function Vl(_d,np,rp){for(var ap=1-_d%2,sp=new Float32Array(_d),lp=0;lp<_d;++lp){var up=2*Math.PI*lp/(_d+ap-1);sp[lp]=np-rp*Math.cos(up)}return Dn(sp,"float32")}var zl=Cn({hannWindow_:function(_d){return Vl(_d,.5,.5)}}),Gl=Cn({hammingWindow_:function(_d){return Vl(_d,.54,.46)}}),Hl=Cn({frame_:function(_d,np,rp,ap,sp){ap===void 0&&(ap=!1),sp===void 0&&(sp=0);for(var lp=0,up=[];lp+np<=_d.size;)up.push(tl(_d,lp,np)),lp+=rp;if(ap)for(;lp<_d.size;){var cp=lp+np-_d.size,dp=Gn([tl(_d,lp,np-cp),Ln([cp],sp)]);up.push(dp),lp+=rp}return up.length===0?Tn([],[0,np]):Gn(up).as2D(up.length,np)}}),ql=Cn({stft_:function(_d,np,rp,ap,sp){var lp;sp===void 0&&(sp=zl),ap==null&&(lp=np,ap=Math.floor(Math.pow(2,Math.ceil(Math.log(lp)/Math.log(2)))));for(var up=Hl(_d,np,rp),cp=tc(up,sp(np)),dp=[],fp=0;fp<up.shape[0];fp++)dp.push(_l(cp.slice([fp,0],[1,np]),ap));return Gn(dp)}}),Kl=Object.freeze({hannWindow:zl,hammingWindow:Gl,frame:Hl,stft:ql}),jl,Xl=function(_d,np,rp){return rp===void 0&&(rp=1),n$1(this,void 0,void 0,function(){var ap,sp,lp,up,cp,dp,fp,pp,hp,mp,gp,vp,xp,Sp;return r(this,function(yp){switch(yp.label){case 0:return ap=ln(_d,"predictions","inTopK"),sp=ln(np,"targets","inTopK"),g(ap.rank>1,function(){return"inTopK() expects the predictions to be of rank 2 or higher, but got "+ap.rank}),g(ap.rank-1===sp.rank,function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+ap.rank+" and targets rank "+sp.rank}),y(ap.shape.slice(0,ap.shape.length-1),sp.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),lp=ap.shape[ap.shape.length-1],g(rp>0&&rp<=lp,function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last dimension ("+lp+"), but got "+rp}),[4,ap.data()];case 1:return up=yp.sent(),[4,sp.data()];case 2:for(cp=yp.sent(),dp=[up.length/lp,lp],pp=dp[1],hp=N("bool",fp=dp[0]),mp=0;mp<fp;mp++){for(gp=mp*pp,vp=up.subarray(gp,gp+pp),xp=[],Sp=0;Sp<vp.length;Sp++)xp.push({value:vp[Sp],index:Sp});for(xp.sort(function(bp,Ep){return Ep.value-bp.value}),hp[mp]=0,Sp=0;Sp<rp;Sp++)if(xp[Sp].index===cp[mp]){hp[mp]=1;break}}return _d!==ap&&ap.dispose(),np!==sp&&sp.dispose(),[2,kn(hp,sp.shape,"bool")]}})})};(function(_d){_d[_d.NONE=0]="NONE",_d[_d.MEAN=1]="MEAN",_d[_d.SUM=2]="SUM",_d[_d.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(jl||(jl={}));var $l=Cn({absoluteDifference_:function(_d,np,rp,ap){ap===void 0&&(ap=jl.SUM_BY_NONZERO_WEIGHTS);var sp=ln(_d,"labels","absoluteDifference"),lp=ln(np,"predictions","absoluteDifference"),up=null;rp!=null&&(up=ln(rp,"weights","absoluteDifference")),y(sp.shape,lp.shape,"Error in absoluteDifference: ");var cp=sp.sub(lp).abs();return Yl(cp,up,ap)}}),Yl=Cn({computeWeightedLoss_:function(_d,np,rp){rp===void 0&&(rp=jl.SUM_BY_NONZERO_WEIGHTS);var ap=ln(_d,"losses","computeWeightedLoss"),sp=null;np!=null&&(sp=ln(np,"weights","computeWeightedLoss"));var lp=sp==null?ap:ap.mul(sp);if(rp===jl.NONE)return lp;if(rp===jl.SUM)return lp.sum();if(rp===jl.MEAN){if(sp==null)return lp.mean();var up=ap.size/sp.size,cp=lp.sum().div(sp.sum());return up>1?cp.div(An(up)):cp}if(rp===jl.SUM_BY_NONZERO_WEIGHTS){if(sp==null)return lp.sum().div(An(ap.size));var dp=sp.mul(Bn(ap.shape)).notEqual(An(0)).sum().toFloat();return lp.sum().div(dp)}throw Error("Unknown reduction: "+rp)}}),Ql=Cn({cosineDistance_:function(_d,np,rp,ap,sp){sp===void 0&&(sp=jl.SUM_BY_NONZERO_WEIGHTS);var lp=ln(_d,"labels","cosineDistance"),up=ln(np,"predictions","cosineDistance"),cp=null;ap!=null&&(cp=ln(ap,"weights","cosineDistance")),y(lp.shape,up.shape,"Error in cosineDistance: ");var dp=An(1).sub(lp.mul(up).sum(rp,!0));return Yl(dp,cp,sp)}}),Jl=Cn({hingeLoss_:function(_d,np,rp,ap){ap===void 0&&(ap=jl.SUM_BY_NONZERO_WEIGHTS);var sp=ln(_d,"labels","hingeLoss"),lp=ln(np,"predictions","hingeLoss"),up=null;rp!=null&&(up=ln(rp,"weights","hingeLoss")),y(sp.shape,lp.shape,"Error in hingeLoss: ");var cp=An(1);sp=An(2).mul(sp).sub(cp);var dp=cp.sub(sp.mul(lp)).relu();return Yl(dp,up,ap)}}),Zl=Cn({huberLoss_:function(_d,np,rp,ap,sp){ap===void 0&&(ap=1),sp===void 0&&(sp=jl.SUM_BY_NONZERO_WEIGHTS);var lp=ln(_d,"labels","huberLoss"),up=ln(np,"predictions","huberLoss"),cp=null;rp!=null&&(cp=ln(rp,"weights","huberLoss")),y(lp.shape,up.shape,"Error in huberLoss: ");var dp=An(ap),fp=up.sub(lp).abs(),pp=Ys(fp,dp),hp=fp.sub(pp),mp=An(.5).mul(pp.square()).add(dp.mul(hp));return Yl(mp,cp,sp)}}),th=Cn({logLoss_:function(_d,np,rp,ap,sp){ap===void 0&&(ap=1e-7),sp===void 0&&(sp=jl.SUM_BY_NONZERO_WEIGHTS);var lp=ln(_d,"labels","logLoss"),up=ln(np,"predictions","logLoss"),cp=null;rp!=null&&(cp=ln(rp,"weights","logLoss")),y(lp.shape,up.shape,"Error in logLoss: ");var dp=An(1),fp=An(ap),pp=lp.mul(up.add(fp).log()).neg().sub(dp.sub(lp).mul(dp.sub(up).add(fp).log()));return Yl(pp,cp,sp)}}),eh=Cn({meanSquaredError_:function(_d,np,rp,ap){ap===void 0&&(ap=jl.SUM_BY_NONZERO_WEIGHTS);var sp=ln(_d,"labels","meanSquaredError"),lp=ln(np,"predictions","meanSquaredError"),up=null;rp!=null&&(up=ln(rp,"weights","meanSquaredError")),y(sp.shape,lp.shape,"Error in meanSquaredError: ");var cp=sp.squaredDifference(lp);return Yl(cp,up,ap)}}),nh=Cn({sigmoidCrossEntropy_:function(_d,np,rp,ap,sp){ap===void 0&&(ap=0),sp===void 0&&(sp=jl.SUM_BY_NONZERO_WEIGHTS);var lp=ln(_d,"multiClassLabels","sigmoidCrossEntropy"),up=ln(np,"logits","sigmoidCrossEntropy"),cp=null;if(rp!=null&&(cp=ln(rp,"weights","sigmoidCrossEntropy")),y(lp.shape,up.shape,"Error in sigmoidCrossEntropy: "),ap>0){var dp=An(ap),fp=An(1),pp=An(.5);lp=lp.mul(fp.sub(dp)).add(pp.mul(dp))}var hp=function(mp,gp){var vp=ln(mp,"labels","sigmoidCrossEntropyWithLogits"),xp=ln(gp,"logits","sigmoidCrossEntropyWithLogits");y(vp.shape,xp.shape,"Error in sigmoidCrossEntropyWithLogits: ");var Sp=xp.relu(),yp=xp.mul(vp),bp=xp.abs().neg().exp().log1p();return Sp.sub(yp).add(bp)}(lp,up);return Yl(hp,cp,sp)}}),rh=Cn({softmaxCrossEntropy_:function(_d,np,rp,ap,sp){ap===void 0&&(ap=0),sp===void 0&&(sp=jl.SUM_BY_NONZERO_WEIGHTS);var lp=ln(_d,"onehotLabels","softmaxCrossEntropy"),up=ln(np,"logits","softmaxCrossEntropy"),cp=null;if(rp!=null&&(cp=ln(rp,"weights","softmaxCrossEntropy")),y(lp.shape,up.shape,"Error in softmaxCrossEntropy: "),ap>0){var dp=An(ap),fp=An(1),pp=An(lp.shape[1]);lp=lp.mul(fp.sub(dp)).add(dp.div(pp))}var hp=function(mp,gp,vp){if(vp===void 0&&(vp=-1),vp===-1&&(vp=gp.rank-1),vp!==gp.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+gp.rank+" and dim was "+vp);return oo(function(xp,Sp,yp){var bp=Sp.logSumExp([vp],!0),Ep=Sp.toFloat().sub(bp);return yp([xp,Ep]),{value:Ep.mul(xp).neg().sum([vp]),gradFunc:function(wp,_p){var Cp=_p[0],$p=_p[1],Rp=vn(wp.shape,[vp]);return[wp.reshape(Rp).mul(Cp.toFloat().sub($p.exp())),wp.reshape(Rp).mul($p.exp().sub(Cp.toFloat()))]}}})(mp,gp)}(lp,up);return Yl(hp,cp,sp)}}),oh=Object.freeze({get Reduction(){return jl},absoluteDifference:$l,computeWeightedLoss:Yl,cosineDistance:Ql,hingeLoss:Jl,huberLoss:Zl,logLoss:th,meanSquaredError:eh,sigmoidCrossEntropy:nh,softmaxCrossEntropy:rh});function ah(_d,np){return np===void 0&&(np=!1),Nt.tidy(function(){if(_d.shape.length!==2)throw new Error("qr2d() requires a 2D Tensor, but got a "+_d.shape.length+"D Tensor.");for(var rp=_d.shape[0],ap=_d.shape[1],sp=vr(rp),lp=_d.clone(),up=Tn([[1]],[1,1]),cp=up.clone(),dp=rp>=ap?ap:rp,fp=function(hp){var mp,gp=lp,vp=cp,xp=sp;mp=Nt.tidy(function(){var Sp=lp.slice([hp,hp],[rp-hp,1]),yp=Sp.norm(),bp=lp.slice([hp,hp],[1,1]),Ep=Tn([[-1]]).where(bp.greater(0),Tn([[1]])),wp=bp.sub(Ep.mul(yp)),_p=Sp.div(wp);cp=_p.shape[0]===1?up.clone():up.concat(_p.slice([1,0],[_p.shape[0]-1,_p.shape[1]]),0);var Cp=Ep.matMul(wp).div(yp).neg(),$p=lp.slice([hp,0],[rp-hp,ap]),Rp=Cp.mul(cp);if(hp===0)lp=$p.sub(Rp.matMul(cp.transpose().matMul($p)));else{var Pp=$p.sub(Rp.matMul(cp.transpose().matMul($p)));lp=lp.slice([0,0],[hp,ap]).concat(Pp,0)}var Op=sp.slice([0,hp],[rp,sp.shape[1]-hp]);if(hp===0)sp=Op.sub(Op.matMul(cp).matMul(Rp.transpose()));else{var jp=Op.sub(Op.matMul(cp).matMul(Rp.transpose()));sp=sp.slice([0,0],[rp,hp]).concat(jp,1)}return[cp,lp,sp]}),cp=mp[0],lp=mp[1],sp=mp[2],Xe([gp,vp,xp])},pp=0;pp<dp;++pp)fp(pp);return!np&&rp>ap&&(sp=sp.slice([0,0],[rp,ap]),lp=lp.slice([0,0],[ap,ap])),[sp,lp]})}var ih=Cn({gramSchmidt_:function(_d){var np;if(Array.isArray(_d)){np=!1,g(_d!=null&&_d.length>0,function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"});for(var rp=_d[0].shape[0],ap=function(dp){g(_d[dp].shape[0]===rp,function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+_d[dp].shape[0]+" vs. "+rp+")"})},sp=1;sp<_d.length;++sp)ap(sp)}else np=!0,_d=Xn(_d,_d.shape[0],0).map(function(dp){return Dr(dp,[0])});g(_d.length<=_d[0].shape[0],function(){return"Gram-Schmidt: Number of vectors ("+_d.length+") exceeds number of dimensions ("+_d[0].shape[0]+")."});var lp=[],up=_d,cp=function(dp){lp.push(Nt.tidy(function(){var fp=up[dp];if(dp>0)for(var pp=0;pp<dp;++pp){var hp=vl(lp[pp].mulStrict(fp)).mul(lp[pp]);fp=fp.sub(hp)}return fp.div(Il(fp,"euclidean"))}))};for(sp=0;sp<_d.length;++sp)cp(sp);return np?Tr(lp,0):lp}}),uh=Cn({qr_:function(_d,np){if(np===void 0&&(np=!1),_d.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+_d.rank);if(_d.rank===2)return ah(_d,np);var rp=_d.shape.slice(0,_d.shape.length-2).reduce(function(up,cp){return up*cp}),ap=Or(_d.reshape([rp,_d.shape[_d.shape.length-2],_d.shape[_d.shape.length-1]]),0),sp=[],lp=[];return ap.forEach(function(up){var cp=ah(up,np),dp=cp[0],fp=cp[1];sp.push(dp),lp.push(fp)}),[Tr(sp,0).reshape(_d.shape),Tr(lp,0).reshape(_d.shape)]}}),sh=Object.freeze({gramSchmidt:ih,qr:uh});function ch(_d,np,rp,ap,sp){ap==null&&(ap=.5),sp==null&&(sp=Number.NEGATIVE_INFINITY);var lp=_d.shape[0];return rp=Math.min(rp,lp),g(0<=ap&&ap<=1,function(){return"iouThreshold must be in [0, 1], but was '"+ap+"'"}),g(_d.rank===2,function(){return"boxes must be a 2D tensor, but was of rank '"+_d.rank+"'"}),g(_d.shape[1]===4,function(){return"boxes must have 4 columns, but 2nd dimension was "+_d.shape[1]}),g(np.rank===1,function(){return"scores must be a 1D tensor"}),g(np.shape[0]===lp,function(){return"scores has incompatible shape with boxes. Expected "+lp+", but was "+np.shape[0]}),{maxOutputSize:rp,iouThreshold:ap,scoreThreshold:sp}}var lh=Cn({resizeBilinear_:function(_d,np,rp){rp===void 0&&(rp=!1);var ap=ln(_d,"images","resizeBilinear");g(ap.rank===3||ap.rank===4,function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+ap.rank+"."}),g(np.length===2,function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+np+"."});var sp=ap,lp=!1;ap.rank===3&&(lp=!0,sp=ap.as4D(1,ap.shape[0],ap.shape[1],ap.shape[2]));var up=np[0],cp=np[1],dp=Nt.runKernelFunc(function(fp,pp){return pp([sp]),fp.resizeBilinear(sp,up,cp,rp)},{batchImages:sp},function(fp,pp){return{batchImages:function(){return Nt.runKernelFunc(function(hp){return hp.resizeBilinearBackprop(fp,pp[0],rp)},{})}}});return lp?dp.as3D(dp.shape[1],dp.shape[2],dp.shape[3]):dp}}),hh=Cn({resizeNearestNeighbor_:function(_d,np,rp){rp===void 0&&(rp=!1);var ap=ln(_d,"images","resizeNearestNeighbor");g(ap.rank===3||ap.rank===4,function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+ap.rank+"."}),g(np.length===2,function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+np+"."}),g(ap.dtype==="float32"||ap.dtype==="int32",function(){return"`images` must have `int32` or `float32` as dtype"});var sp=ap,lp=!1;ap.rank===3&&(lp=!0,sp=ap.as4D(1,ap.shape[0],ap.shape[1],ap.shape[2]));var up=np[0],cp=np[1],dp=Nt.runKernelFunc(function(fp,pp){return pp([sp]),fp.resizeNearestNeighbor(sp,up,cp,rp)},{batchImages:sp},function(fp,pp){return{batchImages:function(){return Nt.runKernelFunc(function(hp){return hp.resizeNearestNeighborBackprop(fp,pp[0],rp)},{})}}});return lp?dp.as3D(dp.shape[1],dp.shape[2],dp.shape[3]):dp}}),fh=Cn({nonMaxSuppression_:function(_d,np,rp,ap,sp){ap===void 0&&(ap=.5),sp===void 0&&(sp=Number.NEGATIVE_INFINITY);var lp=ln(_d,"boxes","nonMaxSuppression"),up=ln(np,"scores","nonMaxSuppression"),cp=ch(lp,up,rp,ap,sp);return rp=cp.maxOutputSize,ap=cp.iouThreshold,sp=cp.scoreThreshold,Nt.runKernelFunc(function(dp){return dp.nonMaxSuppression(lp,up,rp,ap,sp)},{$boxes:lp})}}),ph=function(_d,np,rp,ap,sp){return ap===void 0&&(ap=.5),sp===void 0&&(sp=Number.NEGATIVE_INFINITY),n$1(this,void 0,void 0,function(){var lp,up,cp,dp,fp,pp,hp;return r(this,function(mp){switch(mp.label){case 0:return lp=ln(_d,"boxes","nonMaxSuppressionAsync"),up=ln(np,"scores","nonMaxSuppressionAsync"),cp=ch(lp,up,rp,ap,sp),rp=cp.maxOutputSize,ap=cp.iouThreshold,sp=cp.scoreThreshold,[4,Promise.all([lp.data(),up.data()])];case 1:return dp=mp.sent(),fp=dp[0],pp=dp[1],hp=Mo(fp,pp,rp,ap,sp),lp!==_d&&lp.dispose(),up!==np&&up.dispose(),[2,hp]}})})},dh=Cn({cropAndResize_:function(_d,np,rp,ap,sp,lp){var up=ln(_d,"image","cropAndResize","float32"),cp=ln(np,"boxes","cropAndResize","float32"),dp=ln(rp,"boxInd","cropAndResize","int32");sp=sp||"bilinear",lp=lp||0;var fp=cp.shape[0];return g(up.rank===4,function(){return"Error in cropAndResize: image must be rank 4,but got rank "+up.rank+"."}),g(cp.rank===2&&cp.shape[1]===4,function(){return"Error in cropAndResize: boxes must be have size ["+fp+",4] but had shape "+cp.shape+"."}),g(dp.rank===1&&dp.shape[0]===fp,function(){return"Error in cropAndResize: boxInd must be have size ["+fp+"] but had shape "+cp.shape+"."}),g(ap.length===2,function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+ap.length+"."}),g(ap[0]>=1&&ap[1]>=1,function(){return"cropSize must be atleast [1,1], but was "+ap}),g(sp==="bilinear"||sp==="nearest",function(){return"method must be bilinear or nearest, but was "+sp}),Nt.runKernelFunc(function(pp,hp){return pp.cropAndResize(up,cp,dp,ap,sp,lp)},{$image:up,$boxes:cp})}}),vh=Object.freeze({resizeBilinear:lh,resizeNearestNeighbor:hh,nonMaxSuppression:fh,nonMaxSuppressionAsync:ph,cropAndResize:dh}),mh=function(_d,np){return!(_d>0)&&(np==="linear"||np==="relu")},gh=function(_d,np,rp){if(rp==null||rp==="linear")return _d;if(rp==="relu")return _d.mul(np.step());throw new Error("Gradient for activation "+rp+" has not been implemented yet.")},yh=function(_d,np){var rp=np,ap=fo(_d.shape,np.shape);return ap.length>0&&(rp=rp.sum(ap)),rp.reshape(_d.shape)},xh=function(_d,np,rp){if(np==="linear")return _d;if(np==="relu")return bl(_d);if(np==="elu")return gl(_d);if(np==="relu6")return wl(_d);if(np==="prelu")return xl(_d,rp);throw new Error("Unknown fused activation "+np+".")},bh=Cn({matMul_:function(_d){var np,rp=_d.a,ap=_d.b,sp=_d.transposeA,lp=sp!==void 0&&sp,up=_d.transposeB,cp=up!==void 0&&up,dp=_d.bias,fp=_d.activation,pp=fp===void 0?"linear":fp,hp=_d.preluActivationWeights;if(mh(Nt.state.gradientDepth,pp)===!1){var mp=Wc(rp,ap,lp,cp);return dp!=null&&(mp=Vs(mp,dp)),xh(mp,pp,hp)}var gp=ln(rp,"a","fused matMul"),vp=ln(ap,"b","fused matMul");np=Rt(gp,vp),gp=np[0],vp=np[1];var xp=lp?gp.shape[gp.rank-2]:gp.shape[gp.rank-1],Sp=cp?vp.shape[vp.rank-1]:vp.shape[vp.rank-2],yp=lp?gp.shape[gp.rank-1]:gp.shape[gp.rank-2],bp=cp?vp.shape[vp.rank-2]:vp.shape[vp.rank-1],Ep=gp.shape.slice(0,-2),wp=vp.shape.slice(0,-2),_p=w$1(Ep),Cp=w$1(wp);g(gp.rank>=2&&vp.rank>=2&&gp.rank===vp.rank,function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+gp.rank+" and "+vp.rank+"."}),g(C(Ep,wp),function(){return"Error in fused matMul: outer dimensions ("+Ep+") and ("+wp+") of Tensors with shapes "+gp.shape+" and "+vp.shape+" must match."}),g(xp===Sp,function(){return"Error in fused matMul: inner shapes ("+xp+") and ("+Sp+") of Tensors with shapes "+gp.shape+" and "+vp.shape+" and transposeA="+lp+" and transposeB="+cp+" must match."});var $p,Rp,Pp=gp.shape.slice(0,-2).concat([yp,bp]),Op=lp?gp.as3D(_p,xp,yp):gp.as3D(_p,yp,xp),jp=cp?vp.as3D(Cp,bp,Sp):vp.as3D(Cp,Sp,bp);dp!=null&&po(Pp,($p=Rt($p=ln(dp,"bias","fused matMul"),gp)[0]).shape),hp!=null&&(Rp=ln(hp,"prelu weights","fused matMul"));var Mp={$a:Op,$b:jp};return dp!=null&&(Mp.$bias=$p),hp!=null&&(Mp.$preluActivationWeights=Rp),Nt.runKernelFunc(function(Ap,Dp){var Fp=Ap.fusedBatchMatMul({a:Op,b:jp,transposeA:lp,transposeB:cp,bias:$p,activation:pp,preluActivationWeights:Rp});return Dp([Op,jp,Fp]),Fp},Mp,function(Ap,Dp){var Fp=Dp[0],Ip=Dp[1],kp=Dp[2],Tp=gh(Ap,kp,pp),Np={};return dp!=null&&(Np={$bias:function(){return yh($p,Tp)}}),Object.assign(lp||cp?!lp&&cp?{$a:function(){return Tp.matMul(Ip,!1,!1)},$b:function(){return Tp.matMul(Fp,!0,!1)}}:lp&&!cp?{$a:function(){return Ip.matMul(Tp,!1,!0)},$b:function(){return Fp.matMul(Tp,!1,!1)}}:{$a:function(){return Ip.matMul(Tp,!0,!0)},$b:function(){return Tp.matMul(Fp,!0,!0)}}:{$a:function(){return Tp.matMul(Ip,!1,!0)},$b:function(){return Fp.matMul(Tp,!0,!1)}},Np)}).reshape(Pp)}}),wh=Cn({conv2d_:function(_d){var np=_d.x,rp=_d.filter,ap=_d.strides,sp=_d.pad,lp=_d.dataFormat,up=lp===void 0?"NHWC":lp,cp=_d.dilations,dp=cp===void 0?[1,1]:cp,fp=_d.dimRoundingMode,pp=_d.bias,hp=_d.activation,mp=hp===void 0?"linear":hp,gp=_d.preluActivationWeights;if(mp=mp||"linear",mh(Nt.state.gradientDepth,mp)===!1){var vp=Dc(np,rp,ap,sp,up,dp,fp);return pp!=null&&(vp=Vs(vp,pp)),xh(vp,mp,gp)}var xp=ln(np,"x","conv2d"),Sp=ln(rp,"filter","conv2d"),yp=xp,bp=!1;xp.rank===3&&(bp=!0,yp=xp.as4D(1,xp.shape[0],xp.shape[1],xp.shape[2])),g(yp.rank===4,function(){return"Error in fused conv2d: input must be rank 4, but got rank "+yp.rank+"."}),g(Sp.rank===4,function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+Sp.rank+"."}),fp!=null&&g(E(sp),function(){return"Error in fused conv2d: pad must be an integer when using, dimRoundingMode "+fp+" but got pad "+sp+"."}),g(yp.shape[3]===Sp.shape[2],function(){return"Error in conv2d: depth of input ("+yp.shape[3]+") must match input depth for filter "+Sp.shape[2]+"."}),g(Io(ap,dp),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+ap+" and dilations '"+dp+"'"}),g(up==="NHWC",function(){return"Error in conv2d: got dataFormat of "+up+" but only NHWC is currently supported."});var Ep,wp,_p=go(yp.shape,Sp.shape,ap,dp,sp,fp);pp!=null&&(Ep=Rt(Ep=ln(pp,"bias","fused conv2d"),xp)[0],po(_p.outShape,Ep.shape)),gp!=null&&(wp=ln(gp,"prelu weights","fused conv2d"));var Cp={x:yp,$filter:Sp};pp!=null&&(Cp.$bias=Ep),gp!=null&&(Cp.$preluActivationWeights=wp);var $p=Nt.runKernelFunc(function(Rp,Pp){var Op=Rp.fusedConv2d({input:yp,filter:Sp,convInfo:_p,bias:Ep,activation:mp,preluActivationWeights:wp});return Pp([Sp,yp,Op]),Op},Cp,function(Rp,Pp){var Op=Pp,jp=Op[0],Mp=Op[1],Ap=Op[2],Dp=gh(Rp,Ap,mp);g(Ro(dp),function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+dp+"'"});var Fp={};return pp!=null&&(Fp={$bias:function(){return yh(Ep,Dp)}}),Object.assign({x:function(){return Fc(Mp.shape,Dp,jp,ap,sp)},$filter:function(){return Nc(Mp,Dp,jp.shape,ap,sp)}},Fp)});return bp?$p.as3D($p.shape[1],$p.shape[2],$p.shape[3]):$p}}),Ch=Cn({depthwiseConv2d_:function(_d){var np=_d.x,rp=_d.filter,ap=_d.strides,sp=_d.pad,lp=_d.dataFormat,up=lp===void 0?"NHWC":lp,cp=_d.dilations,dp=cp===void 0?[1,1]:cp,fp=_d.dimRoundingMode,pp=_d.bias,hp=_d.activation,mp=hp===void 0?"linear":hp,gp=_d.preluActivationWeights;if(mh(Nt.state.gradientDepth,mp)===!1){var vp=Oc(np,rp,ap,sp,up,dp,fp);return pp!=null&&(vp=Vs(vp,pp)),xh(vp,mp,gp)}var xp=ln(np,"x","depthwiseConv2d"),Sp=ln(rp,"filter","depthwiseConv2d"),yp=xp,bp=!1;xp.rank===3&&(bp=!0,yp=xp.as4D(1,xp.shape[0],xp.shape[1],xp.shape[2])),g(yp.rank===4,function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got rank "+yp.rank+"."}),g(Sp.rank===4,function(){return"Error in fused depthwiseConv2d: filter must be rank 4, but got rank "+Sp.rank+"."}),g(yp.shape[3]===Sp.shape[2],function(){return"Error in fused depthwiseConv2d: number of input channels ("+yp.shape[3]+") must match the inChannels dimension in filter "+Sp.shape[2]+"."}),dp==null&&(dp=[1,1]),g(Io(ap,dp),function(){return"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides "+ap+" and dilations '"+dp+"'"}),fp!=null&&g(E(sp),function(){return"Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode "+fp+" but got pad "+sp+"."});var Ep,wp,_p=go(yp.shape,Sp.shape,ap,dp,sp,fp,!0);pp!=null&&(Ep=Rt(Ep=ln(pp,"bias","fused conv2d"),xp)[0],po(_p.outShape,Ep.shape)),gp!=null&&(wp=ln(gp,"prelu weights","fused depthwiseConv2d"));var Cp={x:yp,$filter:Sp};pp!=null&&(Cp.$bias=Ep),gp!=null&&(Cp.$preluActivationWeights=wp);var $p=Nt.runKernelFunc(function(Rp,Pp){var Op=Rp.fusedDepthwiseConv2D({input:yp,filter:Sp,convInfo:_p,bias:Ep,activation:mp,preluActivationWeights:wp});return Pp([yp,Sp,Op]),Op},Cp,function(Rp,Pp){g(Ro(dp),function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+dp+"'"});var Op=Pp[0],jp=Pp[1],Mp=Pp[2],Ap=gh(Rp,Mp,mp),Dp={};return pp!=null&&(Dp={$bias:function(){return yh(Ep,Ap)}}),Object.assign({x:function(){return _c(Op.shape,Ap,jp,_p)},$filter:function(){return Mc(Op,Ap,jp.shape,_p)}},Dp)});return bp?$p.as3D($p.shape[1],$p.shape[2],$p.shape[3]):$p}}),Eh=Object.freeze({matMul:bh,conv2d:wh,depthwiseConv2d:Ch}),Rh=Object.freeze({image:vh,linalg:sh,losses:oh,spectral:Bl,fused:Eh,signal:Kl,square:Uu,conv1d:Ac,conv2d:Dc,conv3d:Tc,depthwiseConv2d:Oc,separableConv2d:Bc,conv2dTranspose:Pc,conv3dTranspose:Lc,op:Cn,batchNormalization2d:Ss,batchNormalization3d:As,batchNormalization4d:Ds,batchNormalization:Ts,batchNorm:Ns,batchNorm2d:Fs,batchNorm3d:Os,batchNorm4d:_s,booleanMaskAsync:Rc,complex:En,real:Rn,imag:In,concat:Gn,concat1d:Hn,concat2d:qn,concat3d:Kn,concat4d:jn,split:Xn,matMul:Wc,dot:Uc,outerProduct:Vc,reverse:zc,reverse1d:Gc,reverse2d:Hc,reverse3d:qc,reverse4d:Kc,maxPool:$c,avgPool:Yc,pool:Qc,maxPool3d:Jc,avgPool3d:Zc,slice:tl,slice1d:el,slice2d:nl,slice3d:rl,slice4d:ol,abs:Vu,acos:zu,acosh:Gu,asin:Hu,asinh:qu,atan:Ku,atanh:ju,ceil:Xu,clipByValue:$u,cos:Yu,cosh:Qu,erf:Ju,exp:Zu,expm1:ts,floor:es,log:ns,log1p:rs,logSigmoid:os,neg:as,reciprocal:is,round:us,rsqrt:ss,sigmoid:cs,sign:ls,isNaN:hs,isInf:fs,isFinite:ps,sin:ds,sinh:vs,softplus:ms,sqrt:gs,step:ys,tan:xs,tanh:bs,all:il,any:ul,argMax:sl,argMin:cl,logSumExp:ll,max:hl,mean:fl,min:pl,moments:dl,sum:vl,prod:ml,equal:sc,equalStrict:cc,greater:lc,greaterEqual:hc,greaterEqualStrict:fc,greaterStrict:pc,less:dc,lessEqual:vc,lessEqualStrict:mc,lessStrict:gc,notEqual:yc,notEqualStrict:xc,add:Vs,addN:zs,addStrict:Gs,atan2:Hs,div:qs,divStrict:Ks,floorDiv:js,maximum:Xs,maximumStrict:$s,minimum:Ys,minimumStrict:Qs,mod:Js,modStrict:Zs,mul:tc,mulStrict:ec,pow:nc,powStrict:rc,squaredDifference:oc,squaredDifferenceStrict:ac,sub:ic,subStrict:uc,elu:gl,leakyRelu:yl,prelu:xl,relu:bl,relu6:wl,selu:Cl,logicalAnd:Ms,logicalNot:Bs,logicalOr:Ps,logicalXor:Ls,where:Ws,whereAsync:Us,buffer:ur,print:sr$1,batchToSpaceND:cr,cast:lr,clone:hr,cumsum:fr$1,depthToSpace:pr,expandDims:dr,eye:vr,multinomial:mr,oneHot:gr,pad:yr,pad1d:xr,pad2d:br,pad3d:wr,pad4d:Cr,rand:Er,randomNormal:Rr,randomGamma:Ir,randomUniform:kr,reshape:Sr,spaceToBatchND:Ar,squeeze:Dr,stack:Tr,tile:Nr,truncatedNormal:Fr,unstack:Or,setdiff1dAsync:_r,fill:Ln,linspace:Wn,ones:Bn,range:Un,scalar:An,tensor:kn,tensor1d:Dn,tensor2d:Tn,tensor3d:Nn,tensor4d:Fn,tensor5d:On,tensor6d:_n,variable:Mn,zeros:Pn,onesLike:Vn,zerosLike:zn,transpose:El,softmax:io,logSoftmax:uo,localResponseNormalization:Rl,norm:Il,gather:Cc,unsortedSegmentSum:Ec,basicLSTMCell:kl,multiRNNCell:Sl,movingAverage:Al,stridedSlice:Dl,topk:Tl,scatterND:Nl,fft:Fl,ifft:Ol,rfft:_l,irfft:Ml,sparseToDense:Pl,gatherND:Ll,diag:Wl,dropout:Ul,hannWindow:zl,hammingWindow:Gl,frame:Hl,stft:ql,inTopKAsync:Xl});function Ih(_d,np){Array.isArray(_d)||(_d=[_d]),_d.forEach(function(rp){rp!=null&&g(rp.dtype!=="complex64",function(){return np+" does not support complex64 tensors."})})}function kh(_d,np,rp,ap){if(rp==="linear")return _d.linear(np);if(rp==="relu")return _d.relu(np);if(rp==="elu")return _d.elu(np);if(rp==="relu6")return _d.relu6(np);if(rp==="prelu")return _d.prelu(np,ap);throw new Error("Activation "+rp+" has not been implemented for the CPU backend.")}var Sh=function(_d){function np(){var rp=_d.call(this)||this;if(rp.blockSize=48,rp.firstUse=!0,a$1().get("IS_BROWSER")){var ap=typeof OffscreenCanvas<"u"?new OffscreenCanvas(300,150):typeof document<"u"?document.createElement("canvas"):null;ap!==null&&(rp.fromPixels2DContext=ap.getContext("2d"))}return rp.data=new so(rp,Nt),rp}return e(np,_d),np.prototype.write=function(rp,ap,sp){this.firstUse&&(this.firstUse=!1,a$1().get("IS_NODE")&&un(`
============================
Hi there 👋. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.
============================
`));var lp={};return this.data.set(lp,{values:rp,dtype:sp}),lp},np.prototype.move=function(rp,ap,sp,lp){this.data.set(rp,{values:ap,dtype:lp})},np.prototype.numDataIds=function(){return this.data.numDataIds()},np.prototype.fromPixels=function(rp,ap){if(rp==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var sp,lp,up=rp.data instanceof Uint8Array,cp=typeof ImageData<"u"&&rp instanceof ImageData,dp=typeof HTMLVideoElement<"u"&&rp instanceof HTMLVideoElement,fp=typeof HTMLImageElement<"u"&&rp instanceof HTMLImageElement,pp=dp?[rp.videoWidth,rp.videoHeight]:[rp.width,rp.height],hp=pp[0],mp=pp[1];if(a$1().get("IS_NODE")&&rp.getContext==null)throw new Error("When running in node, pixels must be an HTMLCanvasElement like the one returned by the `canvas` npm package");if(rp.getContext!=null)sp=rp.getContext("2d").getImageData(0,0,hp,mp).data;else if(cp||up)sp=rp.data;else{if(!fp&&!dp)throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData or {data: Uint32Array, width: number, height: number}, but was "+rp.constructor.name);if(this.fromPixels2DContext==null)throw new Error("Can't read pixels from HTMLImageElement outside the browser.");this.fromPixels2DContext.canvas.width=hp,this.fromPixels2DContext.canvas.height=mp,this.fromPixels2DContext.drawImage(rp,0,0,hp,mp),sp=this.fromPixels2DContext.getImageData(0,0,hp,mp).data}if(ap===4)lp=new Int32Array(sp);else{var gp=hp*mp;lp=new Int32Array(gp*ap);for(var vp=0;vp<gp;vp++)for(var xp=0;xp<ap;++xp)lp[vp*ap+xp]=sp[4*vp+xp]}return Nn(lp,[mp,hp,ap],"int32")},np.prototype.read=function(rp){return n$1(this,void 0,void 0,function(){return r(this,function(ap){return[2,this.readSync(rp)]})})},np.prototype.readSync=function(rp){var ap=this.data.get(rp),sp=ap.dtype,lp=ap.complexTensors;return sp==="complex64"?No(this.readSync(lp.real.dataId),this.readSync(lp.imag.dataId)):this.data.get(rp).values},np.prototype.bufferSync=function(rp){var ap=this.readSync(rp.dataId),sp=ap;if(rp.dtype==="string")try{sp=ap.map(function(lp){return Z(lp)})}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return ur(rp.shape,rp.dtype,sp)},np.prototype.makeOutput=function(rp,ap,sp){var lp=this.write(rp,ap,sp);return Nt.makeTensorFromDataId(lp,ap,sp,this)},np.prototype.disposeData=function(rp){if(this.data.has(rp)){var ap=this.data.get(rp).complexTensors;ap!=null&&(ap.real.dispose(),ap.imag.dispose()),this.data.delete(rp)}},np.prototype.time=function(rp){return n$1(this,void 0,void 0,function(){var ap;return r(this,function(sp){return ap=Y(),rp(),[2,{kernelMs:Y()-ap}]})})},np.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},np.prototype.complex=function(rp,ap){var sp=this.makeOutput(null,rp.shape,"complex64");return this.data.get(sp.dataId).complexTensors={real:Nt.keep(rp.clone()),imag:Nt.keep(ap.clone())},sp},np.prototype.real=function(rp){return this.data.get(rp.dataId).complexTensors.real.clone()},np.prototype.imag=function(rp){return this.data.get(rp.dataId).complexTensors.imag.clone()},np.prototype.slice=function(rp,ap,sp){if(Ih(rp,"slice"),Yr(rp.shape,ap,sp)){var lp=Qr(ap,rp.strides),up=w$1(sp);return kn(this.readSync(rp.dataId).subarray(lp,lp+up),sp,rp.dtype)}for(var cp=ur(sp,rp.dtype),dp=this.bufferSync(rp),fp=0;fp<cp.size;++fp){var pp=cp.indexToLoc(fp).map(function(hp,mp){return hp+ap[mp]});cp.values[fp]=dp.get.apply(dp,pp)}return cp.toTensor()},np.prototype.stridedSlice=function(rp,ap,sp,lp){Ih(rp,"stridedSlice");var up=jr(ap,sp,lp);if(up.some(function(gp){return gp===0}))return kn([],up);for(var cp=ur(up,rp.dtype),dp=this.bufferSync(rp),fp=0;fp<cp.size;fp++){for(var pp=cp.indexToLoc(fp),hp=new Array(pp.length),mp=0;mp<hp.length;mp++)hp[mp]=pp[mp]*lp[mp]+ap[mp];cp.set.apply(cp,[dp.get.apply(dp,hp)].concat(pp))}return cp.toTensor()},np.prototype.diag=function(rp){for(var ap=this.readSync(rp.dataId),sp=ur([rp.size,rp.size],rp.dtype),lp=sp.values,up=0;up<ap.length;up++)lp[up*rp.size+up]=ap[up];return sp.toTensor()},np.prototype.unstack=function(rp,ap){for(var sp=rp.shape[ap],lp=new Array(rp.rank-1),up=0,cp=0;cp<rp.rank;cp++)cp!==ap&&(lp[up++]=rp.shape[cp]);var dp=new Array(rp.rank).fill(0),fp=rp.shape.slice();fp[ap]=1;var pp=new Array(sp);for(cp=0;cp<pp.length;cp++)dp[ap]=cp,pp[cp]=this.slice(rp,dp,fp).reshape(lp);return pp},np.prototype.reverse=function(rp,ap){Ih(rp,"reverse");for(var sp=ur(rp.shape,rp.dtype),lp=this.bufferSync(rp),up=function(dp){var fp=sp.indexToLoc(dp),pp=fp.slice();ap.forEach(function(hp){return pp[hp]=rp.shape[hp]-1-pp[hp]}),sp.set.apply(sp,[lp.get.apply(lp,pp)].concat(fp))},cp=0;cp<sp.size;cp++)up(cp);return sp.toTensor()},np.prototype.concat=function(rp,ap){var sp=this;if(rp[0].dtype==="complex64"){var lp=rp.map(function(gp){return Rn(gp)}),up=rp.map(function(gp){return In(gp)});return En(this.concat(lp,ap),this.concat(up,ap))}var cp=rp.map(function(gp){var vp=w$1(gp.shape.slice(ap));return gp.as2D(-1,vp)}),dp=wn(cp.map(function(gp){return gp.shape}),1),fp=ur(dp,rp[0].dtype).values;if(cp[0].shape[0]===1){var pp=0;cp.forEach(function(gp){fp.set(sp.readSync(gp.dataId),pp),pp+=gp.size})}else{var hp=0;cp.forEach(function(gp){for(var vp=sp.readSync(gp.dataId),xp=0,Sp=0;Sp<gp.shape[0];++Sp)for(var yp=Sp*dp[1]+hp,bp=0;bp<gp.shape[1];++bp)fp[yp+bp]=vp[xp++];hp+=gp.shape[1]})}var mp=wn(rp.map(function(gp){return gp.shape}),ap);return kn(fp,mp,rp[0].dtype)},np.prototype.neg=function(rp){return Ih(rp,"neg"),this.multiply(An(-1),rp)},np.prototype.add=function(rp,ap){return rp.dtype==="complex64"||ap.dtype==="complex64"?this.broadcastedBinaryComplexOp(rp.cast("complex64"),ap.cast("complex64"),function(sp,lp,up,cp){return{real:sp+up,imag:lp+cp}}):this.broadcastedBinaryOp(rp,ap,Ct(rp.dtype,ap.dtype),function(sp,lp){return sp+lp})},np.prototype.addN=function(rp){var ap=this;Ih(rp,"addN");for(var sp=rp.map(function(pp){return ap.readSync(pp.dataId)}),lp=ur(rp[0].shape,rp[0].dtype),up=lp.values,cp=0;cp<rp.length;cp++)for(var dp=sp[cp],fp=0;fp<up.length;fp++)up[fp]+=dp[fp];return lp.toTensor()},np.prototype.subtract=function(rp,ap){return rp.dtype==="complex64"||ap.dtype==="complex64"?this.broadcastedBinaryComplexOp(rp.cast("complex64"),ap.cast("complex64"),function(sp,lp,up,cp){return{real:sp-up,imag:lp-cp}}):this.broadcastedBinaryOp(rp,ap,Ct(rp.dtype,ap.dtype),function(sp,lp){return sp-lp})},np.prototype.pow=function(rp,ap){return Ih([rp,ap],"pow"),this.broadcastedBinaryOp(rp,ap,rp.dtype,function(sp,lp){return Math.pow(sp,lp)})},np.prototype.batchMatMul=function(rp,ap,sp,lp){Ih([rp,ap],"matMul");for(var up=sp?rp.shape[1]:rp.shape[2],cp=sp?rp.shape[2]:rp.shape[1],dp=lp?ap.shape[1]:ap.shape[2],fp=rp.shape[0],pp=this.readSync(rp.dataId),hp=this.readSync(ap.dataId),mp=sp?[rp.strides[0],1,rp.strides[1]]:[rp.strides[0],rp.strides[1],1],gp=mp[0],vp=mp[1],xp=mp[2],Sp=lp?[1,ap.strides[1],ap.strides[0]]:[ap.strides[1],1,ap.strides[0]],yp=Sp[0],bp=Sp[1],Ep=Sp[2],wp=cp*dp,_p=ur([fp,cp,dp],rp.dtype),Cp=_p.values,$p=this.blockSize,Rp=0;Rp<fp;Rp++)for(var Pp=0;Pp<cp;Pp+=$p)for(var Op=0;Op<dp;Op+=$p)for(var jp=0;jp<up;jp+=$p)for(var Mp=Math.min(Pp+$p,cp),Ap=Math.min(Op+$p,dp),Dp=Math.min(jp+$p,up),Fp=Pp;Fp<Mp;Fp++)for(var Ip=Op;Ip<Ap;Ip++){for(var kp=0,Tp=jp;Tp<Dp;Tp++)kp+=pp[Rp*gp+Fp*vp+Tp*xp]*hp[Tp*yp+Ip*bp+Rp*Ep];Cp[Rp*wp+(Fp*dp+Ip)]+=kp}return _p.toTensor()},np.prototype.fusedBatchMatMul=function(rp){var ap=rp.a,sp=rp.b,lp=rp.transposeA,up=rp.transposeB,cp=rp.bias,dp=rp.activation,fp=rp.preluActivationWeights,pp=this.batchMatMul(ap,sp,lp,up);return cp&&(pp=this.add(pp,cp)),dp&&(pp=kh(this,pp,dp,fp)),pp},np.prototype.multiply=function(rp,ap){return rp.dtype==="complex64"||ap.dtype==="complex64"?this.broadcastedBinaryComplexOp(rp.cast("complex64"),ap.cast("complex64"),function(sp,lp,up,cp){return{real:sp*up-lp*cp,imag:sp*cp+lp*up}}):this.broadcastedBinaryOp(rp,ap,Ct(rp.dtype,ap.dtype),function(sp,lp){return sp*lp})},np.prototype.realDivide=function(rp,ap){return Ih([rp,ap],"realDivide"),this.broadcastedBinaryOp(rp,ap,"float32",function(sp,lp){return sp/lp})},np.prototype.floorDiv=function(rp,ap){return Ih([rp,ap],"floorDiv"),this.broadcastedBinaryOp(rp,ap,"int32",function(sp,lp){return Math.floor(sp/lp)})},np.prototype.sum=function(rp,ap){Ih(rp,"sum"),mn("sum",ap,rp.rank);for(var sp=dn(rp.shape,ap),lp=sp[0],up=sp[1],cp=Pn(lp,Ct(rp.dtype,"int32")),dp=w$1(up),fp=this.readSync(cp.dataId),pp=this.readSync(rp.dataId),hp=0;hp<fp.length;++hp){for(var mp=hp*dp,gp=0,vp=0;vp<dp;++vp)gp+=pp[mp+vp];fp[hp]=gp}return cp},np.prototype.prod=function(rp,ap){Ih(rp,"sum");for(var sp=dn(rp.shape,ap),lp=sp[0],up=sp[1],cp=Pn(lp,Ct(rp.dtype,"int32")),dp=w$1(up),fp=this.readSync(cp.dataId),pp=this.readSync(rp.dataId),hp=0;hp<fp.length;++hp){for(var mp=hp*dp,gp=1,vp=0;vp<dp;++vp)gp*=pp[mp+vp];fp[hp]=gp}return cp},np.prototype.unsortedSegmentSum=function(rp,ap,sp){Ih(rp,"unsortedSegmentSum");for(var lp=[],up=rp.rank-ap.rank,cp=0;cp<up;++cp)ap=ap.expandDims(cp+1);for(cp=0;cp<sp;++cp){var dp=An(cp,"int32"),fp=sc(dp,ap).asType("float32").mul(rp).sum(0);lp.push(fp)}return Tr(lp)},np.prototype.argMin=function(rp,ap){Ih(rp,"argMin");var sp=[ap];mn("argMin",sp,rp.rank);for(var lp=dn(rp.shape,sp),up=lp[0],cp=lp[1],dp=Pn(up,"int32"),fp=w$1(cp),pp=this.readSync(dp.dataId),hp=this.readSync(rp.dataId),mp=0;mp<pp.length;++mp){for(var gp=mp*fp,vp=hp[gp],xp=0,Sp=0;Sp<fp;++Sp){var yp=hp[gp+Sp];yp<vp&&(vp=yp,xp=Sp)}pp[mp]=xp}return dp},np.prototype.argMax=function(rp,ap){Ih(rp,"argMax");var sp=[ap];mn("argMax",sp,rp.rank);for(var lp=dn(rp.shape,sp),up=lp[0],cp=lp[1],dp=Pn(up,"int32"),fp=w$1(cp),pp=this.readSync(dp.dataId),hp=this.readSync(rp.dataId),mp=0;mp<pp.length;++mp){for(var gp=mp*fp,vp=hp[gp],xp=0,Sp=0;Sp<fp;++Sp){var yp=hp[gp+Sp];yp>vp&&(vp=yp,xp=Sp)}pp[mp]=xp}return dp},np.prototype.cumsum=function(rp,ap,sp,lp){if(Ih(rp,"cumsum"),ap!==rp.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(rp.rank-1)+" but got axis="+ap);for(var up=Ct(rp.dtype,"int32"),cp=Pn(rp.shape,up),dp=this.readSync(cp.dataId),fp=this.readSync(rp.dataId),pp=rp.shape[rp.rank-1],hp=lp?function(Sp,yp){return Sp+pp-yp-1}:function(Sp,yp){return Sp+yp},mp=0;mp<fp.length;mp+=pp)for(var gp=0;gp<pp;gp++){var vp=hp(mp,gp);if(gp===0)dp[vp]=sp?0:fp[vp];else{var xp=hp(mp,gp-1);dp[vp]=sp?fp[xp]+dp[xp]:fp[vp]+dp[xp]}}return cp},np.prototype.equal=function(rp,ap){return Ih([rp,ap],"equal"),this.broadcastedBinaryOp(rp,ap,"bool",function(sp,lp){return sp===lp?1:0})},np.prototype.notEqual=function(rp,ap){return Ih([rp,ap],"notEqual"),this.broadcastedBinaryOp(rp,ap,"bool",function(sp,lp){return sp!==lp?1:0})},np.prototype.less=function(rp,ap){return Ih([rp,ap],"less"),this.broadcastedBinaryOp(rp,ap,"bool",function(sp,lp){return sp<lp?1:0})},np.prototype.lessEqual=function(rp,ap){return Ih([rp,ap],"lessEqual"),this.broadcastedBinaryOp(rp,ap,"bool",function(sp,lp){return sp<=lp?1:0})},np.prototype.greater=function(rp,ap){return Ih([rp,ap],"greater"),this.broadcastedBinaryOp(rp,ap,"bool",function(sp,lp){return sp>lp?1:0})},np.prototype.greaterEqual=function(rp,ap){return Ih([rp,ap],"greaterEqual"),this.broadcastedBinaryOp(rp,ap,"bool",function(sp,lp){return sp>=lp?1:0})},np.prototype.logicalNot=function(rp){Ih(rp,"logicalNot");for(var ap=this.readSync(rp.dataId),sp=new Uint8Array(ap.length),lp=0;lp<ap.length;++lp)sp[lp]=ap[lp]?0:1;return this.makeOutput(sp,rp.shape,"bool")},np.prototype.logicalAnd=function(rp,ap){return Ih([rp,ap],"logicalAnd"),this.broadcastedBinaryOp(rp,ap,"bool",function(sp,lp){return sp&&lp})},np.prototype.logicalOr=function(rp,ap){return Ih([rp,ap],"logicalOr"),this.broadcastedBinaryOp(rp,ap,"bool",function(sp,lp){return sp||lp})},np.prototype.select=function(rp,ap,sp){Ih([rp,ap,sp],"select");for(var lp=this.readSync(rp.dataId),up=this.readSync(ap.dataId),cp=this.readSync(sp.dataId),dp=Pn(ap.shape,Ct(ap.dtype,sp.dtype)),fp=this.readSync(dp.dataId),pp=0,hp=rp.rank===0||rp.rank>1||ap.rank===1?1:w$1(ap.shape.slice(1)),mp=0;mp<lp.length;mp++)for(var gp=0;gp<hp;gp++)lp[mp]===1?fp[pp++]=up[mp]:fp[pp++]=cp[mp];return dp},np.prototype.where=function(rp){Ih([rp],"where");var ap=this.readSync(rp.dataId);return Uo(rp.shape,ap)},np.prototype.topk=function(rp,ap,sp){return Ih(rp,"topk"),Wo(this.readSync(rp.dataId),rp.shape,rp.dtype,ap)},np.prototype.min=function(rp,ap){Ih(rp,"min"),mn("min",ap,rp.rank);for(var sp=dn(rp.shape,ap),lp=sp[0],up=sp[1],cp=Pn(lp,rp.dtype),dp=w$1(up),fp=this.readSync(cp.dataId),pp=this.readSync(rp.dataId),hp=0;hp<fp.length;++hp){for(var mp=hp*dp,gp=pp[mp],vp=0;vp<dp;++vp){var xp=pp[mp+vp];xp<gp&&(gp=xp)}fp[hp]=gp}return cp},np.prototype.minimum=function(rp,ap){return Ih([rp,ap],"minimum"),this.broadcastedBinaryOp(rp,ap,rp.dtype,function(sp,lp){return Math.min(sp,lp)})},np.prototype.mod=function(rp,ap){return Ih([rp,ap],"mod"),this.broadcastedBinaryOp(rp,ap,rp.dtype,function(sp,lp){var up=sp%lp;return sp<0&&lp<0||sp>=0&&lp>=0?up:(up+lp)%lp})},np.prototype.max=function(rp,ap){Ih(rp,"max"),mn("max",ap,rp.rank);for(var sp=dn(rp.shape,ap),lp=sp[0],up=sp[1],cp=Pn(lp,rp.dtype),dp=w$1(up),fp=this.readSync(cp.dataId),pp=this.readSync(rp.dataId),hp=0;hp<fp.length;++hp){for(var mp=hp*dp,gp=pp[mp],vp=0;vp<dp;++vp){var xp=pp[mp+vp];xp>gp&&(gp=xp)}fp[hp]=gp}return cp},np.prototype.maximum=function(rp,ap){return Ih([rp,ap],"maximum"),this.broadcastedBinaryOp(rp,ap,rp.dtype,function(sp,lp){return Math.max(sp,lp)})},np.prototype.all=function(rp,ap){Ih(rp,"all"),mn("all",ap,rp.rank);for(var sp=dn(rp.shape,ap),lp=sp[0],up=sp[1],cp=Pn(lp,rp.dtype),dp=w$1(up),fp=this.readSync(cp.dataId),pp=this.readSync(rp.dataId),hp=0;hp<fp.length;++hp){for(var mp=hp*dp,gp=pp[mp],vp=0;vp<dp;++vp){var xp=pp[mp+vp];gp=gp&&xp}fp[hp]=gp}return cp},np.prototype.any=function(rp,ap){Ih(rp,"any"),mn("any",ap,rp.rank);for(var sp=dn(rp.shape,ap),lp=sp[0],up=sp[1],cp=Pn(lp,rp.dtype),dp=w$1(up),fp=this.readSync(cp.dataId),pp=this.readSync(rp.dataId),hp=0;hp<fp.length;++hp){for(var mp=hp*dp,gp=pp[mp],vp=0;vp<dp;++vp){var xp=pp[mp+vp];gp=gp||xp}fp[hp]=gp}return cp},np.prototype.squaredDifference=function(rp,ap){return Ih([rp,ap],"squaredDifference"),this.broadcastedBinaryOp(rp,ap,rp.dtype,function(sp,lp){var up=sp-lp;return up*up})},np.prototype.ceil=function(rp){Ih(rp,"ceil");for(var ap=this.readSync(rp.dataId),sp=new Float32Array(ap.length),lp=0;lp<ap.length;++lp)sp[lp]=Math.ceil(ap[lp]);return this.makeOutput(sp,rp.shape,"float32")},np.prototype.floor=function(rp){Ih(rp,"floor");for(var ap=this.readSync(rp.dataId),sp=new Float32Array(ap.length),lp=0;lp<ap.length;++lp)sp[lp]=Math.floor(ap[lp]);return this.makeOutput(sp,rp.shape,"float32")},np.prototype.sign=function(rp){Ih(rp,"x");for(var ap=this.readSync(rp.dataId),sp=new Float32Array(ap.length),lp=0;lp<ap.length;++lp)ap[lp]<0?sp[lp]=-1:ap[lp]>0?sp[lp]=1:sp[lp]=0;return this.makeOutput(sp,rp.shape,"float32")},np.prototype.isNaN=function(rp){Ih(rp,"x");for(var ap=this.readSync(rp.dataId),sp=new Uint8Array(ap.length),lp=0;lp<ap.length;++lp)Number.isNaN(ap[lp])&&(sp[lp]=1);return this.makeOutput(sp,rp.shape,"bool")},np.prototype.isInf=function(rp){Ih(rp,"x");for(var ap=this.readSync(rp.dataId),sp=new Uint8Array(ap.length),lp=0;lp<ap.length;++lp)Math.abs(ap[lp])===1/0&&(sp[lp]=1);return this.makeOutput(sp,rp.shape,"bool")},np.prototype.isFinite=function(rp){Ih(rp,"x");for(var ap=this.readSync(rp.dataId),sp=new Uint8Array(ap.length),lp=0;lp<ap.length;++lp)Number.isFinite(ap[lp])&&(sp[lp]=1);return this.makeOutput(sp,rp.shape,"bool")},np.prototype.round=function(rp){Ih(rp,"round");for(var ap=this.readSync(rp.dataId),sp=new Float32Array(ap.length),lp=0;lp<ap.length;++lp){var up=Math.floor(ap[lp]);ap[lp]-up<.5?sp[lp]=Math.floor(ap[lp]):ap[lp]-up>.5?sp[lp]=Math.ceil(ap[lp]):sp[lp]=up%2==0?up:up+1}return this.makeOutput(sp,rp.shape,"float32")},np.prototype.exp=function(rp){Ih(rp,"exp");for(var ap=this.readSync(rp.dataId),sp=new Float32Array(ap.length),lp=0;lp<ap.length;++lp)sp[lp]=Math.exp(ap[lp]);return this.makeOutput(sp,rp.shape,"float32")},np.prototype.expm1=function(rp){Ih(rp,"expm1");for(var ap=this.readSync(rp.dataId),sp=new Float32Array(ap.length),lp=0;lp<ap.length;++lp)sp[lp]=Math.expm1(ap[lp]);return this.makeOutput(sp,rp.shape,"float32")},np.prototype.log=function(rp){Ih(rp,"log");for(var ap=this.readSync(rp.dataId),sp=new Float32Array(ap.length),lp=0;lp<ap.length;++lp){var up=ap[lp];sp[lp]=Math.log(up)}return this.makeOutput(sp,rp.shape,"float32")},np.prototype.log1p=function(rp){Ih(rp,"log1p");for(var ap=this.readSync(rp.dataId),sp=new Float32Array(ap.length),lp=0;lp<ap.length;++lp){var up=ap[lp];sp[lp]=Math.log1p(up)}return this.makeOutput(sp,rp.shape,"float32")},np.prototype.sqrt=function(rp){Ih(rp,"sqrt");for(var ap=this.readSync(rp.dataId),sp=new Float32Array(ap.length),lp=0;lp<ap.length;++lp){var up=ap[lp];sp[lp]=Math.sqrt(up)}return this.makeOutput(sp,rp.shape,"float32")},np.prototype.rsqrt=function(rp){Ih(rp,"rsqrt");for(var ap=this.readSync(rp.dataId),sp=new Float32Array(ap.length),lp=0;lp<ap.length;++lp){var up=ap[lp];sp[lp]=1/Math.sqrt(up)}return this.makeOutput(sp,rp.shape,"float32")},np.prototype.reciprocal=function(rp){Ih(rp,"reciprocal");for(var ap=this.readSync(rp.dataId),sp=new Float32Array(ap.length),lp=0;lp<ap.length;++lp)sp[lp]=1/ap[lp];return this.makeOutput(sp,rp.shape,"float32")},np.prototype.linear=function(rp){return rp},np.prototype.relu=function(rp){Ih(rp,"relu");for(var ap=Pn(rp.shape,rp.dtype),sp=this.readSync(ap.dataId),lp=this.readSync(rp.dataId),up=0;up<lp.length;++up)sp[up]=Math.max(0,lp[up]);return ap},np.prototype.relu6=function(rp){Ih(rp,"relu");for(var ap=Pn(rp.shape,rp.dtype),sp=this.readSync(ap.dataId),lp=this.readSync(rp.dataId),up=0;up<lp.length;++up)sp[up]=Math.min(Math.max(0,lp[up]),6);return ap},np.prototype.prelu=function(rp,ap){return Ih([rp,ap],"prelu"),this.broadcastedBinaryOp(rp,ap,rp.dtype,function(sp,lp){return sp<0?lp*sp:sp})},np.prototype.elu=function(rp){Ih(rp,"elu");for(var ap=new Float32Array(rp.size),sp=this.readSync(rp.dataId),lp=0;lp<sp.length;++lp){var up=sp[lp];ap[lp]=up>=0?up:Math.exp(up)-1}return this.makeOutput(ap,rp.shape,"float32")},np.prototype.eluDer=function(rp,ap){Ih([rp,ap],"eluDer");for(var sp=new Float32Array(ap.size),lp=this.readSync(ap.dataId),up=this.readSync(rp.dataId),cp=0;cp<lp.length;++cp){var dp=lp[cp];sp[cp]=dp>=1?up[cp]:up[cp]*(dp+1)}return this.makeOutput(sp,ap.shape,"float32")},np.prototype.selu=function(rp){Ih(rp,"selu");for(var ap=iu,sp=uu,lp=new Float32Array(rp.size),up=this.readSync(rp.dataId),cp=0;cp<up.length;++cp){var dp=up[cp];lp[cp]=dp>=0?sp*dp:ap*(Math.exp(dp)-1)}return this.makeOutput(lp,rp.shape,"float32")},np.prototype.clip=function(rp,ap,sp){Ih(rp,"clip");for(var lp=new Float32Array(rp.size),up=this.readSync(rp.dataId),cp=0;cp<up.length;++cp){var dp=up[cp];lp[cp]=dp>sp?sp:dp<ap?ap:dp}return this.makeOutput(lp,rp.shape,"float32")},np.prototype.abs=function(rp){for(var ap=new Float32Array(rp.size),sp=this.readSync(rp.dataId),lp=0;lp<sp.length;++lp)ap[lp]=Math.abs(sp[lp]);return this.makeOutput(ap,rp.shape,"float32")},np.prototype.complexAbs=function(rp){for(var ap=new Float32Array(rp.size),sp=this.readSync(rp.dataId),lp=0;lp<rp.size;++lp){var up=sp[2*lp],cp=sp[2*lp+1];ap[lp]=Math.hypot(up,cp)}return this.makeOutput(ap,rp.shape,"float32")},np.prototype.int=function(rp){Ih(rp,"int");for(var ap=new Int32Array(rp.size),sp=this.readSync(rp.dataId),lp=0;lp<sp.length;++lp)ap[lp]=sp[lp];return this.makeOutput(ap,rp.shape,"int32")},np.prototype.sigmoid=function(rp){Ih(rp,"sigmoid");for(var ap=new Float32Array(rp.size),sp=this.readSync(rp.dataId),lp=0;lp<sp.length;++lp)ap[lp]=1/(1+Math.exp(-sp[lp]));return this.makeOutput(ap,rp.shape,"float32")},np.prototype.softplus=function(rp){Ih(rp,"softplus");for(var ap=Math.log(11920928955078125e-23)+2,sp=new Float32Array(rp.size),lp=this.readSync(rp.dataId),up=0;up<lp.length;++up){var cp=lp[up]>-ap,dp=lp[up]<ap,fp=Math.exp(lp[up]),pp=void 0;pp=dp?fp:cp?lp[up]:Math.log(1+fp),sp[up]=pp}return this.makeOutput(sp,rp.shape,"float32")},np.prototype.sin=function(rp){Ih(rp,"sin");for(var ap=new Float32Array(rp.size),sp=this.readSync(rp.dataId),lp=0;lp<sp.length;++lp)ap[lp]=Math.sin(sp[lp]);return this.makeOutput(ap,rp.shape,"float32")},np.prototype.cos=function(rp){Ih(rp,"cos");for(var ap=new Float32Array(rp.size),sp=this.readSync(rp.dataId),lp=0;lp<sp.length;++lp)ap[lp]=Math.cos(sp[lp]);return this.makeOutput(ap,rp.shape,"float32")},np.prototype.tan=function(rp){Ih(rp,"tan");for(var ap=new Float32Array(rp.size),sp=this.readSync(rp.dataId),lp=0;lp<sp.length;++lp)ap[lp]=Math.tan(sp[lp]);return this.makeOutput(ap,rp.shape,"float32")},np.prototype.asin=function(rp){Ih(rp,"asin");for(var ap=new Float32Array(rp.size),sp=this.readSync(rp.dataId),lp=0;lp<sp.length;++lp)ap[lp]=Math.asin(sp[lp]);return this.makeOutput(ap,rp.shape,"float32")},np.prototype.acos=function(rp){Ih(rp,"acos");for(var ap=new Float32Array(rp.size),sp=this.readSync(rp.dataId),lp=0;lp<sp.length;++lp)ap[lp]=Math.acos(sp[lp]);return this.makeOutput(ap,rp.shape,"float32")},np.prototype.atan=function(rp){Ih(rp,"atan");for(var ap=new Float32Array(rp.size),sp=this.readSync(rp.dataId),lp=0;lp<sp.length;++lp)ap[lp]=Math.atan(sp[lp]);return this.makeOutput(ap,rp.shape,"float32")},np.prototype.atan2=function(rp,ap){return Ih([rp,ap],"atan2"),this.broadcastedBinaryOp(rp,ap,rp.dtype,function(sp,lp){return Math.atan2(sp,lp)})},np.prototype.sinh=function(rp){Ih(rp,"sinh");for(var ap=new Float32Array(rp.size),sp=this.readSync(rp.dataId),lp=0;lp<sp.length;++lp)ap[lp]=Math.sinh(sp[lp]);return this.makeOutput(ap,rp.shape,"float32")},np.prototype.cosh=function(rp){Ih(rp,"cosh");for(var ap=new Float32Array(rp.size),sp=this.readSync(rp.dataId),lp=0;lp<sp.length;++lp)ap[lp]=Math.cosh(sp[lp]);return this.makeOutput(ap,rp.shape,"float32")},np.prototype.tanh=function(rp){Ih(rp,"tanh");for(var ap=new Float32Array(rp.size),sp=this.readSync(rp.dataId),lp=0;lp<sp.length;++lp)ap[lp]=R$1(sp[lp]);return this.makeOutput(ap,rp.shape,"float32")},np.prototype.asinh=function(rp){Ih(rp,"asinh");for(var ap=new Float32Array(rp.size),sp=this.readSync(rp.dataId),lp=0;lp<sp.length;++lp)ap[lp]=Math.asinh(sp[lp]);return this.makeOutput(ap,rp.shape,"float32")},np.prototype.acosh=function(rp){Ih(rp,"acosh");for(var ap=new Float32Array(rp.size),sp=this.readSync(rp.dataId),lp=0;lp<sp.length;++lp)ap[lp]=Math.acosh(sp[lp]);return this.makeOutput(ap,rp.shape,"float32")},np.prototype.atanh=function(rp){Ih(rp,"atanh");for(var ap=new Float32Array(rp.size),sp=this.readSync(rp.dataId),lp=0;lp<sp.length;++lp)ap[lp]=Math.atanh(sp[lp]);return this.makeOutput(ap,rp.shape,"float32")},np.prototype.erf=function(rp){Ih(rp,"erf");for(var ap=new Float32Array(rp.size),sp=this.readSync(rp.dataId),lp=0;lp<sp.length;++lp){var up=Math.sign(sp[lp]),cp=Math.abs(sp[lp]),dp=1/(1+.3275911*cp);ap[lp]=up*(1-((((1.061405429*dp-1.453152027)*dp+1.421413741)*dp-.284496736)*dp+.254829592)*dp*Math.exp(-cp*cp))}return this.makeOutput(ap,rp.shape,"float32")},np.prototype.step=function(rp,ap){ap===void 0&&(ap=0),Ih(rp,"step");for(var sp=new Float32Array(rp.size),lp=this.readSync(rp.dataId),up=0;up<lp.length;++up){var cp=lp[up];isNaN(cp)?sp[up]=NaN:sp[up]=cp>0?1:ap}return this.makeOutput(sp,rp.shape,"float32")},np.prototype.fusedConv2d=function(rp){var ap=rp.input,sp=rp.filter,lp=rp.convInfo,up=rp.bias,cp=rp.activation,dp=rp.preluActivationWeights,fp=this.conv2d(ap,sp,lp);return up&&(fp=this.add(fp,up)),cp&&(fp=kh(this,fp,cp,dp)),fp},np.prototype.conv2d=function(rp,ap,sp){Ih([rp,ap],"conv2d");for(var lp=sp.filterHeight,up=sp.filterWidth,cp=sp.dilationHeight,dp=sp.dilationWidth,fp=sp.padInfo.left,pp=sp.padInfo.top,hp=sp.dataFormat==="channelsLast",mp=ur(sp.outShape,rp.dtype),gp=rp.strides[0],vp=hp?rp.strides[1]:rp.strides[2],xp=hp?rp.strides[2]:1,Sp=hp?1:rp.strides[1],yp=mp.strides[0],bp=hp?mp.strides[1]:mp.strides[2],Ep=hp?mp.strides[2]:1,wp=hp?1:mp.strides[1],_p=this.readSync(rp.dataId),Cp=this.readSync(ap.dataId),$p=mp.values,Rp=0;Rp<sp.batchSize;++Rp)for(var Pp=Rp*gp,Op=Rp*yp,jp=0;jp<sp.outHeight;++jp)for(var Mp=Op+jp*bp,Ap=jp*sp.strideHeight-pp,Dp=0;Dp<lp;Dp++){var Fp=Ap+Dp*cp;if(!(Fp<0||Fp>=sp.inHeight))for(var Ip=Dp*ap.strides[0],kp=Pp+Fp*vp,Tp=0;Tp<sp.outWidth;++Tp)for(var Np=Mp+Tp*Ep,Lp=Tp*sp.strideWidth-fp,Vp=0;Vp<up;Vp++){var zp=Lp+Vp*dp;if(!(zp<0||zp>=sp.inWidth))for(var Wp=kp+zp*xp,Up=Ip+Vp*ap.strides[1],qp=0;qp<sp.inChannels;++qp){for(var Bp=_p[Wp+qp*Sp],Yp=0;Yp<sp.outChannels;++Yp)$p[Np+Yp*wp]+=Bp*Cp[Up+Yp];Up+=sp.outChannels}}}return mp.toTensor()},np.prototype.conv3d=function(rp,ap,sp){for(var lp=sp.filterDepth,up=sp.filterHeight,cp=sp.filterWidth,dp=sp.dilationDepth,fp=sp.dilationHeight,pp=sp.dilationWidth,hp=sp.padInfo.front,mp=sp.padInfo.left,gp=sp.padInfo.top,vp=ur(sp.outShape,rp.dtype),xp=this.readSync(rp.dataId),Sp=this.readSync(ap.dataId),yp=vp.values,bp=0;bp<sp.batchSize;++bp)for(var Ep=bp*rp.strides[0],wp=bp*vp.strides[0],_p=0;_p<sp.outDepth;++_p)for(var Cp=wp+_p*vp.strides[1],$p=_p*sp.strideDepth-hp,Rp=0;Rp<lp;Rp++){var Pp=$p+Rp*dp;if(!(Pp<0||Pp>=sp.inDepth))for(var Op=Rp*ap.strides[0],jp=Ep+Pp*rp.strides[1],Mp=0;Mp<sp.outHeight;++Mp)for(var Ap=Cp+Mp*vp.strides[2],Dp=Mp*sp.strideHeight-gp,Fp=0;Fp<up;Fp++){var Ip=Dp+Fp*fp;if(!(Ip<0||Ip>=sp.inHeight))for(var kp=Op+Fp*ap.strides[1],Tp=jp+Ip*rp.strides[2],Np=0;Np<sp.outWidth;++Np)for(var Lp=Ap+Np*sp.outChannels,Vp=Np*sp.strideWidth-mp,zp=0;zp<cp;zp++){var Wp=Vp+zp*pp;if(!(Wp<0||Wp>=sp.inWidth))for(var Up=kp+zp*ap.strides[2],qp=Tp+Wp*sp.inChannels,Bp=Up,Yp=0;Yp<sp.inChannels;++Yp){for(var Xp=xp[qp+Yp],Qp=0;Qp<sp.outChannels;++Qp)yp[Lp+Qp]+=Xp*Sp[Bp+Qp];Bp+=sp.outChannels}}}}return vp.toTensor()},np.prototype.conv2dDerInput=function(rp,ap,sp){Ih([rp,ap],"conv2dDerInput");for(var lp=ur(sp.inShape,"float32"),up=lp.values,cp=this.readSync(rp.dataId),dp=this.readSync(ap.dataId),fp=ap.strides,pp=fp[0],hp=fp[1],mp=fp[2],gp=sp.batchSize,vp=sp.filterHeight,xp=sp.filterWidth,Sp=sp.inChannels,yp=sp.inHeight,bp=sp.inWidth,Ep=sp.outChannels,wp=sp.outHeight,_p=sp.outWidth,Cp=sp.strideHeight,$p=sp.strideWidth,Rp=sp.dataFormat,Pp=vp-1-sp.padInfo.top,Op=xp-1-sp.padInfo.left,jp=Rp==="channelsLast",Mp=lp.strides[0],Ap=jp?lp.strides[1]:lp.strides[2],Dp=jp?lp.strides[2]:1,Fp=jp?1:lp.strides[1],Ip=rp.strides[0],kp=jp?rp.strides[1]:rp.strides[2],Tp=jp?rp.strides[2]:1,Np=jp?1:rp.strides[1],Lp=0;Lp<gp;++Lp)for(var Vp=0;Vp<Sp;++Vp)for(var zp=0;zp<yp;++zp)for(var Wp=zp-Pp,Up=Math.max(0,Math.ceil(Wp/Cp)),qp=Math.min(wp,(vp+Wp)/Cp),Bp=0;Bp<bp;++Bp){for(var Yp=Bp-Op,Xp=Math.max(0,Math.ceil(Yp/$p)),Qp=Math.min(_p,(xp+Yp)/$p),am=0,Jp=Up;Jp<qp;++Jp)for(var im=Jp*Cp-Wp,Zp=Xp;Zp<Qp;++Zp)for(var Gp=Ip*Lp+kp*Jp+Tp*Zp,tm=pp*(vp-1-im)+hp*(xp-1-(Zp*$p-Yp))+mp*Vp,om=0;om<Ep;++om)am+=cp[Gp+Np*om]*dp[tm+om];up[Mp*Lp+Ap*zp+Dp*Bp+Fp*Vp]=am}return lp.toTensor()},np.prototype.conv3dDerInput=function(rp,ap,sp){for(var lp=ur(sp.inShape,"float32"),up=lp.values,cp=lp.strides,dp=cp[0],fp=cp[1],pp=cp[2],hp=cp[3],mp=this.readSync(rp.dataId),gp=rp.strides,vp=gp[0],xp=gp[1],Sp=gp[2],yp=gp[3],bp=this.readSync(ap.dataId),Ep=ap.strides,wp=Ep[0],_p=Ep[1],Cp=Ep[2],$p=Ep[3],Rp=sp.batchSize,Pp=sp.filterDepth,Op=sp.filterHeight,jp=sp.filterWidth,Mp=sp.inChannels,Ap=sp.inDepth,Dp=sp.inHeight,Fp=sp.inWidth,Ip=sp.outChannels,kp=sp.outDepth,Tp=sp.outHeight,Np=sp.outWidth,Lp=sp.strideDepth,Vp=sp.strideHeight,zp=sp.strideWidth,Wp=Pp-1-sp.padInfo.front,Up=Op-1-sp.padInfo.top,qp=jp-1-sp.padInfo.left,Bp=0;Bp<Rp;++Bp)for(var Yp=0;Yp<Mp;++Yp)for(var Xp=0;Xp<Ap;++Xp)for(var Qp=Xp-Wp,am=Math.max(0,Math.ceil(Qp/Lp)),Jp=Math.min(kp,(Pp+Qp)/Lp),im=0;im<Dp;++im)for(var Zp=im-Up,Gp=Math.max(0,Math.ceil(Zp/Vp)),tm=Math.min(Tp,(Op+Zp)/Vp),om=0;om<Fp;++om){for(var em=om-qp,_m=Math.max(0,Math.ceil(em/zp)),Cm=Math.min(Np,(jp+em)/zp),Rm=0,Em=am;Em<Jp;++Em)for(var $m=Em*Lp-Qp,fm=Gp;fm<tm;++fm)for(var wm=fm*Vp-Zp,pm=_m;pm<Cm;++pm)for(var hm=vp*Bp+xp*Em+Sp*fm+yp*pm,sm=wp*(Pp-1-$m)+_p*(Op-1-wm)+Cp*(jp-1-(pm*zp-em))+$p*Yp,cm=0;cm<Ip;++cm)Rm+=mp[hm+cm]*bp[sm+cm];up[dp*Bp+fp*Xp+pp*im+hp*om+Yp]=Rm}return lp.toTensor()},np.prototype.conv2dDerFilter=function(rp,ap,sp){Ih([rp,ap],"conv2dDerFilter");for(var lp=sp.strideHeight,up=sp.strideWidth,cp=sp.filterHeight,dp=sp.filterWidth,fp=sp.dataFormat==="channelsLast",pp=ur(sp.filterShape,"float32"),hp=sp.padInfo.left,mp=sp.padInfo.top,gp=this.bufferSync(rp),vp=this.bufferSync(ap),xp=0;xp<cp;++xp)for(var Sp=Math.max(0,Math.ceil((mp-xp)/lp)),yp=Math.min(sp.outHeight,(sp.inHeight+mp-xp)/lp),bp=0;bp<dp;++bp)for(var Ep=Math.max(0,Math.ceil((hp-bp)/up)),wp=Math.min(sp.outWidth,(sp.inWidth+hp-bp)/up),_p=0;_p<sp.inChannels;++_p)for(var Cp=0;Cp<sp.outChannels;++Cp){for(var $p=0,Rp=0;Rp<sp.batchSize;++Rp)for(var Pp=Sp;Pp<yp;++Pp)for(var Op=xp+Pp*lp-mp,jp=Ep;jp<wp;++jp){var Mp=bp+jp*up-hp;$p+=fp?gp.get(Rp,Op,Mp,_p)*vp.get(Rp,Pp,jp,Cp):gp.get(Rp,_p,Op,Mp)*vp.get(Rp,Cp,Pp,jp)}pp.set($p,xp,bp,_p,Cp)}return pp.toTensor()},np.prototype.conv3dDerFilter=function(rp,ap,sp){for(var lp=sp.strideDepth,up=sp.strideHeight,cp=sp.strideWidth,dp=sp.filterDepth,fp=sp.filterHeight,pp=sp.filterWidth,hp=ur(sp.filterShape,"float32"),mp=hp.values,gp=hp.strides,vp=gp[0],xp=gp[1],Sp=gp[2],yp=gp[3],bp=this.readSync(ap.dataId),Ep=ap.strides,wp=Ep[0],_p=Ep[1],Cp=Ep[2],$p=Ep[3],Rp=this.readSync(rp.dataId),Pp=rp.strides,Op=Pp[0],jp=Pp[1],Mp=Pp[2],Ap=Pp[3],Dp=sp.padInfo.front,Fp=sp.padInfo.left,Ip=sp.padInfo.top,kp=0;kp<dp;++kp)for(var Tp=Math.max(0,Math.ceil((Dp-kp)/lp)),Np=Math.min(sp.outDepth,(sp.inDepth+Dp-kp)/lp),Lp=kp*vp,Vp=0;Vp<fp;++Vp)for(var zp=Math.max(0,Math.ceil((Ip-Vp)/up)),Wp=Math.min(sp.outHeight,(sp.inHeight+Ip-Vp)/up),Up=Vp*xp+Lp,qp=0;qp<pp;++qp)for(var Bp=Math.max(0,Math.ceil((Fp-qp)/cp)),Yp=Math.min(sp.outWidth,(sp.inWidth+Fp-qp)/cp),Xp=qp*Sp+Up,Qp=0;Qp<sp.inChannels;++Qp)for(var am=Qp*yp+Xp,Jp=0;Jp<sp.outChannels;++Jp){for(var im=0,Zp=0;Zp<sp.batchSize;++Zp)for(var Gp=Zp*Op,tm=Zp*wp,om=Tp;om<Np;++om)for(var em=(kp+om*lp-Dp)*jp+Gp,_m=om*_p+tm,Cm=zp;Cm<Wp;++Cm)for(var Rm=(Vp+Cm*up-Ip)*Mp+em,Em=Cm*Cp+_m,$m=Bp;$m<Yp;++$m){var fm=$m*$p+Em;im+=Rp[(qp+$m*cp-Fp)*Ap+Rm+Qp]*bp[fm+Jp]}mp[am+Jp]=im}return hp.toTensor()},np.prototype.fusedDepthwiseConv2D=function(rp){var ap=rp.input,sp=rp.filter,lp=rp.convInfo,up=rp.bias,cp=rp.activation,dp=rp.preluActivationWeights,fp=this.depthwiseConv2D(ap,sp,lp);return up&&(fp=this.add(fp,up)),cp&&(fp=kh(this,fp,cp,dp)),fp},np.prototype.depthwiseConv2D=function(rp,ap,sp){Ih([rp,ap],"depthwiseConv2D");for(var lp=sp.filterHeight,up=sp.filterWidth,cp=sp.dilationHeight,dp=sp.dilationWidth,fp=sp.padInfo.left,pp=sp.padInfo.top,hp=sp.outChannels/sp.inChannels,mp=ur(sp.outShape,rp.dtype),gp=this.readSync(rp.dataId),vp=this.readSync(ap.dataId),xp=mp.values,Sp=0;Sp<sp.batchSize;++Sp)for(var yp=Sp*rp.strides[0],bp=Sp*mp.strides[0],Ep=0;Ep<sp.outHeight;++Ep)for(var wp=bp+Ep*mp.strides[1],_p=Ep*sp.strideHeight-fp,Cp=0;Cp<lp;++Cp){var $p=_p+Cp*cp;if(!($p<0||$p>=sp.inHeight))for(var Rp=Cp*ap.strides[0],Pp=yp+$p*rp.strides[1],Op=0;Op<sp.outWidth;++Op)for(var jp=wp+Op*mp.strides[2],Mp=Op*sp.strideWidth-pp,Ap=0;Ap<up;++Ap){var Dp=Mp+Ap*dp;if(!(Dp<0||Dp>=sp.inWidth))for(var Fp=Rp+Ap*ap.strides[1],Ip=Pp+Dp*sp.inChannels,kp=jp,Tp=Fp,Np=0;Np<sp.inChannels;++Np){for(var Lp=gp[Ip+Np],Vp=0;Vp<hp;++Vp)xp[kp+Vp]+=Lp*vp[Tp+Vp];kp+=hp,Tp+=hp}}}return mp.toTensor()},np.prototype.depthwiseConv2DDerInput=function(rp,ap,sp){Ih([rp,ap],"depthwiseConv2DDerInput");for(var lp=ur(sp.inShape,"float32"),up=lp.values,cp=lp.strides,dp=cp[0],fp=cp[1],pp=cp[2],hp=this.readSync(rp.dataId),mp=rp.strides,gp=mp[0],vp=mp[1],xp=mp[2],Sp=this.readSync(ap.dataId),yp=ap.strides,bp=yp[0],Ep=yp[1],wp=yp[2],_p=sp.batchSize,Cp=sp.filterHeight,$p=sp.filterWidth,Rp=sp.inChannels,Pp=sp.inHeight,Op=sp.inWidth,jp=sp.outChannels,Mp=sp.outHeight,Ap=sp.outWidth,Dp=sp.strideHeight,Fp=sp.strideWidth,Ip=Cp-1-sp.padInfo.top,kp=$p-1-sp.padInfo.left,Tp=jp/Rp,Np=0;Np<_p;++Np)for(var Lp=0;Lp<Rp;++Lp)for(var Vp=0;Vp<Pp;++Vp)for(var zp=Vp-Ip,Wp=Math.max(0,Math.ceil(zp/Dp)),Up=Math.min(Mp,(Cp+zp)/Dp),qp=0;qp<Op;++qp){for(var Bp=qp-kp,Yp=Math.max(0,Math.ceil(Bp/Fp)),Xp=Math.min(Ap,($p+Bp)/Fp),Qp=0,am=Wp;am<Up;++am)for(var Jp=am*Dp-zp,im=Yp;im<Xp;++im)for(var Zp=gp*Np+vp*am+xp*im,Gp=bp*(Cp-1-Jp)+Ep*($p-1-(im*Fp-Bp))+wp*Lp,tm=0;tm<Tp;++tm)Qp+=hp[Zp+(Lp*Tp+tm)]*Sp[Gp+tm];up[dp*Np+fp*Vp+pp*qp+Lp]=Qp}return lp.toTensor()},np.prototype.depthwiseConv2DDerFilter=function(rp,ap,sp){Ih([rp,ap],"depthwiseConv2DDerFilter");for(var lp=sp.strideHeight,up=sp.strideWidth,cp=sp.filterHeight,dp=sp.filterWidth,fp=ur(sp.filterShape,"float32"),pp=sp.padInfo.left,hp=sp.padInfo.top,mp=sp.outChannels/sp.inChannels,gp=this.bufferSync(rp),vp=this.bufferSync(ap),xp=0;xp<cp;++xp)for(var Sp=Math.max(0,Math.ceil((hp-xp)/lp)),yp=Math.min(sp.outHeight,(sp.inHeight+hp-xp)/lp),bp=0;bp<dp;++bp)for(var Ep=Math.max(0,Math.ceil((pp-bp)/up)),wp=Math.min(sp.outWidth,(sp.inWidth+pp-bp)/up),_p=0;_p<sp.outChannels;++_p){for(var Cp=Math.trunc(_p/mp),$p=_p%mp,Rp=0,Pp=0;Pp<sp.batchSize;++Pp)for(var Op=Sp;Op<yp;++Op)for(var jp=xp+Op*lp-hp,Mp=Ep;Mp<wp;++Mp){var Ap=bp+Mp*up-pp;Rp+=gp.get(Pp,jp,Ap,Cp)*vp.get(Pp,Op,Mp,_p)}fp.set(Rp,xp,bp,Cp,$p)}return fp.toTensor()},np.prototype.tile=function(rp,ap){return Ih(rp,"tile"),Lo(this.bufferSync(rp),ap)},np.prototype.pad=function(rp,ap,sp){Ih(rp,"pad");var lp=ap.map(function(mp,gp){return mp[0]+rp.shape[gp]+mp[1]}),up=ap.map(function(mp){return mp[0]}),cp=this.bufferSync(rp),dp=ur(lp,rp.dtype);sp!==0&&dp.values.fill(sp);for(var fp=0;fp<rp.size;fp++){var pp=cp.indexToLoc(fp),hp=pp.map(function(mp,gp){return mp+up[gp]});dp.set.apply(dp,[cp.get.apply(cp,pp)].concat(hp))}return dp.toTensor()},np.prototype.transpose=function(rp,ap){Ih(rp,"transpose");for(var sp=new Array(rp.rank),lp=0;lp<sp.length;lp++)sp[lp]=rp.shape[ap[lp]];var up=this.readSync(rp.dataId),cp=ur(sp,rp.dtype),dp=this.bufferSync(rp);for(lp=0;lp<rp.size;++lp){for(var fp=dp.indexToLoc(lp),pp=new Array(fp.length),hp=0;hp<pp.length;hp++)pp[hp]=fp[ap[hp]];var mp=cp.locToIndex(pp);cp.values[mp]=up[lp]}return cp.toTensor()},np.prototype.gather=function(rp,ap,sp){Ih([rp,ap],"gather");var lp=rp.shape.slice(),up=this.readSync(ap.dataId);lp[sp]=up.length;for(var cp=ur(lp,rp.dtype),dp=this.bufferSync(rp),fp=0;fp<cp.size;++fp){var pp=cp.indexToLoc(fp),hp=pp.slice();hp[sp]=up[pp[sp]];var mp=dp.locToIndex(hp);cp.values[fp]=dp.values[mp]}return cp.toTensor()},np.prototype.batchToSpaceND=function(rp,ap,sp){Ih([rp],"batchToSpaceND");var lp=ap.reduce(function(hp,mp){return hp*mp}),up=Mr(rp.shape,ap,lp),cp=Br(up.length,ap.length),dp=Pr(rp.shape,ap,lp),fp=Lr(sp,ap.length),pp=Wr(dp,sp,ap.length);return rp.reshape(up).transpose(cp).reshape(dp).slice(fp,pp)},np.prototype.spaceToBatchND=function(rp,ap,sp){Ih([rp],"spaceToBatchND");var lp=ap.reduce(function(mp,gp){return mp*gp}),up=[[0,0]];up.push.apply(up,sp);for(var cp=1+ap.length;cp<rp.shape.length;++cp)up.push([0,0]);var dp=rp.pad(up),fp=Mr(dp.shape,ap,lp,!1),pp=Br(fp.length,ap.length,!1),hp=Pr(dp.shape,ap,lp,!1);return dp.reshape(fp).transpose(pp).reshape(hp)},np.prototype.pool=function(rp,ap,sp){Ih(rp,"pool");for(var lp=ap.strideHeight,up=ap.strideWidth,cp=ap.dilationHeight,dp=ap.dilationWidth,fp=ap.effectiveFilterHeight,pp=ap.effectiveFilterWidth,hp=ap.padInfo.top,mp=ap.padInfo.left,gp=sp==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,vp=this.readSync(rp.dataId),xp=ur(ap.outShape,rp.dtype),Sp=xp.values,yp=ap.outShape[1]*ap.outShape[2]*ap.outShape[3],bp=ap.outShape[2]*ap.outShape[3],Ep=ap.outShape[3],wp=0;wp<ap.batchSize;++wp)for(var _p=wp*yp,Cp=wp*rp.strides[0],$p=0;$p<ap.inChannels;++$p)for(var Rp=0;Rp<ap.outHeight;++Rp)for(var Pp=Rp*lp-hp,Op=Math.max(0,Pp),jp=Math.min(ap.inHeight,fp+Pp),Mp=_p+Rp*bp,Ap=0;Ap<ap.outWidth;++Ap){for(var Dp=Ap*up-mp,Fp=Math.max(0,Dp),Ip=Math.min(ap.inWidth,pp+Dp),kp=gp,Tp=0,Np=0,Lp=Op;Lp<jp;Lp+=cp){for(var Vp=Cp+Lp*rp.strides[1],zp=Fp;zp<Ip;zp+=dp){var Wp=vp[Vp+zp*rp.strides[2]+$p];sp==="max"&&Wp>kp?kp=Wp:sp==="avg"&&(Tp+=Wp,Np++)}if(isNaN(kp))break}Sp[Mp+Ap*Ep+$p]=sp==="avg"?Tp/Np:kp}return xp.toTensor()},np.prototype.maxPool=function(rp,ap){return this.pool(rp,ap,"max")},np.prototype.maxPoolPositions=function(rp,ap){for(var sp=ur(ap.outShape,"int32"),lp=ap.strideHeight,up=ap.strideWidth,cp=ap.dilationHeight,dp=ap.dilationWidth,fp=ap.effectiveFilterHeight,pp=ap.effectiveFilterWidth,hp=ap.padInfo.top,mp=ap.padInfo.left,gp=this.bufferSync(rp),vp=0;vp<ap.batchSize;++vp)for(var xp=0;xp<ap.inChannels;++xp)for(var Sp=0;Sp<ap.outHeight;++Sp){for(var yp=Sp*lp-hp,bp=yp;bp<0;)bp+=cp;for(var Ep=Math.min(ap.inHeight,fp+yp),wp=0;wp<ap.outWidth;++wp){for(var _p=wp*up-mp,Cp=_p;Cp<0;)Cp+=dp;for(var $p=Math.min(ap.inWidth,pp+_p),Rp=Number.NEGATIVE_INFINITY,Pp=-1,Op=bp;Op<Ep;Op+=cp)for(var jp=Op-yp,Mp=Cp;Mp<$p;Mp+=dp){var Ap=Mp-_p,Dp=gp.get(vp,Op,Mp,xp);Dp>Rp&&(Rp=Dp,Pp=jp*pp+Ap)}sp.set(Pp,vp,Sp,wp,xp)}}return sp.toTensor()},np.prototype.maxPoolBackprop=function(rp,ap,sp,lp){Ih([ap,sp],"maxPoolBackprop");for(var up=this.maxPoolPositions(ap,lp),cp=lp.strideHeight,dp=lp.strideWidth,fp=lp.dilationHeight,pp=lp.dilationWidth,hp=lp.effectiveFilterHeight,mp=lp.effectiveFilterWidth,gp=mp-1-lp.padInfo.left,vp=hp-1-lp.padInfo.top,xp=ur(ap.shape,"float32"),Sp=this.bufferSync(up),yp=this.bufferSync(rp),bp=0;bp<lp.batchSize;++bp)for(var Ep=0;Ep<lp.inChannels;++Ep)for(var wp=0;wp<lp.inHeight;++wp)for(var _p=0;_p<lp.inWidth;++_p){for(var Cp=wp-vp,$p=_p-gp,Rp=0,Pp=0;Pp<hp;Pp+=fp){var Op=(Cp+Pp)/cp;if(!(Op<0||Op>=lp.outHeight||Math.floor(Op)!==Op))for(var jp=0;jp<mp;jp+=pp){var Mp=($p+jp)/dp;if(!(Mp<0||Mp>=lp.outWidth||Math.floor(Mp)!==Mp)){var Ap=hp*mp-1-Sp.get(bp,Op,Mp,Ep)===Pp*mp+jp?1:0;Ap!==0&&(Rp+=yp.get(bp,Op,Mp,Ep)*Ap)}}}xp.set(Rp,bp,wp,_p,Ep)}return xp.toTensor()},np.prototype.avgPoolBackprop=function(rp,ap,sp){Ih([rp,ap],"avgPoolBackprop");for(var lp=sp.strideHeight,up=sp.strideWidth,cp=sp.filterHeight,dp=sp.filterWidth,fp=sp.dilationHeight,pp=sp.dilationWidth,hp=sp.effectiveFilterHeight,mp=sp.effectiveFilterWidth,gp=mp-1-sp.padInfo.left,vp=hp-1-sp.padInfo.top,xp=ur(ap.shape,"float32"),Sp=1/(cp*dp),yp=this.bufferSync(rp),bp=0;bp<sp.batchSize;++bp)for(var Ep=0;Ep<sp.inChannels;++Ep)for(var wp=0;wp<sp.inHeight;++wp)for(var _p=0;_p<sp.inWidth;++_p){for(var Cp=wp-vp,$p=_p-gp,Rp=0,Pp=0;Pp<hp;Pp+=fp){var Op=(Cp+Pp)/lp;if(!(Op<0||Op>=sp.outHeight||Math.floor(Op)!==Op))for(var jp=0;jp<mp;jp+=pp){var Mp=($p+jp)/up;Mp<0||Mp>=sp.outWidth||Math.floor(Mp)!==Mp||(Rp+=yp.get(bp,Op,Mp,Ep))}}xp.set(Rp*Sp,bp,wp,_p,Ep)}return xp.toTensor()},np.prototype.pool3d=function(rp,ap,sp){Ih(rp,"pool3d");for(var lp=ap.strideDepth,up=ap.strideHeight,cp=ap.strideWidth,dp=ap.dilationDepth,fp=ap.dilationHeight,pp=ap.dilationWidth,hp=ap.effectiveFilterDepth,mp=ap.effectiveFilterHeight,gp=ap.effectiveFilterWidth,vp=ap.padInfo.front,xp=ap.padInfo.top,Sp=ap.padInfo.left,yp=sp==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,bp=this.readSync(rp.dataId),Ep=ur(ap.outShape,rp.dtype),wp=Ep.values,_p=ap.outShape[1]*ap.outShape[2]*ap.outShape[3]*ap.outShape[4],Cp=ap.outShape[2]*ap.outShape[3]*ap.outShape[4],$p=ap.outShape[3]*ap.outShape[4],Rp=ap.outShape[4],Pp=0;Pp<ap.batchSize;++Pp)for(var Op=Pp*_p,jp=Pp*rp.strides[0],Mp=0;Mp<ap.inChannels;++Mp)for(var Ap=0;Ap<ap.outDepth;++Ap){for(var Dp=Ap*lp-vp,Fp=Dp;Fp<0;)Fp+=dp;for(var Ip=Math.min(ap.inDepth,hp+Dp),kp=Op+Ap*Cp,Tp=0;Tp<ap.outHeight;++Tp){for(var Np=Tp*up-xp,Lp=Np;Lp<0;)Lp+=fp;for(var Vp=Math.min(ap.inHeight,mp+Np),zp=kp+Tp*$p,Wp=0;Wp<ap.outWidth;++Wp){for(var Up=Wp*cp-Sp,qp=Up;qp<0;)qp+=pp;for(var Bp=Math.min(ap.inWidth,gp+Up),Yp=zp+Wp*Rp,Xp=yp,Qp=0,am=0,Jp=Fp;Jp<Ip;Jp+=dp){for(var im=jp+Jp*rp.strides[1],Zp=Lp;Zp<Vp;Zp+=fp){for(var Gp=im+Zp*rp.strides[2],tm=qp;tm<Bp;tm+=pp){var om=bp[Gp+tm*rp.strides[3]+Mp];if(sp==="max"&&om>Xp?Xp=om:sp==="avg"&&(Qp+=om,am++),isNaN(Xp))break}if(isNaN(Xp))break}if(isNaN(Xp))break}wp[Yp+Mp]=sp==="avg"?Qp/am:Xp}}}return Ep.toTensor()},np.prototype.avgPool3d=function(rp,ap){return Ih(rp,"avgPool3d"),this.pool3d(rp,ap,"avg").toFloat()},np.prototype.avgPool3dBackprop=function(rp,ap,sp){Ih([rp,ap],"avgPool3dBackprop");for(var lp=sp.strideDepth,up=sp.strideHeight,cp=sp.strideWidth,dp=sp.filterDepth,fp=sp.filterHeight,pp=sp.filterWidth,hp=sp.dilationDepth,mp=sp.dilationHeight,gp=sp.dilationWidth,vp=sp.effectiveFilterDepth,xp=sp.effectiveFilterHeight,Sp=sp.effectiveFilterWidth,yp=vp-1-sp.padInfo.front,bp=Sp-1-sp.padInfo.left,Ep=xp-1-sp.padInfo.top,wp=ur(ap.shape,"float32"),_p=1/(dp*fp*pp),Cp=this.bufferSync(rp),$p=0;$p<sp.batchSize;++$p)for(var Rp=0;Rp<sp.inChannels;++Rp)for(var Pp=0;Pp<sp.inDepth;++Pp)for(var Op=0;Op<sp.inHeight;++Op)for(var jp=0;jp<sp.inWidth;++jp){for(var Mp=Pp-yp,Ap=Op-Ep,Dp=jp-bp,Fp=0,Ip=0;Ip<vp;Ip+=hp){var kp=(Mp+Ip)/lp;if(!(kp<0||kp>=sp.outDepth||Math.floor(kp)!==kp))for(var Tp=0;Tp<xp;Tp+=mp){var Np=(Ap+Tp)/up;if(!(Np<0||Np>=sp.outHeight||Math.floor(Np)!==Np))for(var Lp=0;Lp<Sp;Lp+=gp){var Vp=(Dp+Lp)/cp;Vp<0||Vp>=sp.outWidth||Math.floor(Vp)!==Vp||(Fp+=Cp.get($p,kp,Np,Vp,Rp))}}}wp.set(Fp*_p,$p,Pp,Op,jp,Rp)}return wp.toTensor()},np.prototype.maxPool3d=function(rp,ap){return Ih(rp,"maxPool3d"),this.pool3d(rp,ap,"max").toFloat()},np.prototype.maxPool3dPositions=function(rp,ap){for(var sp=ur(ap.outShape,"int32"),lp=ap.strideDepth,up=ap.strideHeight,cp=ap.strideWidth,dp=ap.dilationDepth,fp=ap.dilationHeight,pp=ap.dilationWidth,hp=ap.effectiveFilterDepth,mp=ap.effectiveFilterHeight,gp=ap.effectiveFilterWidth,vp=ap.padInfo.front,xp=ap.padInfo.top,Sp=ap.padInfo.left,yp=this.bufferSync(rp),bp=0;bp<ap.batchSize;++bp)for(var Ep=0;Ep<ap.inChannels;++Ep)for(var wp=0;wp<ap.outDepth;++wp){for(var _p=wp*lp-vp,Cp=_p;Cp<0;)Cp+=dp;for(var $p=Math.min(ap.inDepth,hp+_p),Rp=0;Rp<ap.outHeight;++Rp){for(var Pp=Rp*up-xp,Op=Pp;Op<0;)Op+=fp;for(var jp=Math.min(ap.inHeight,mp+Pp),Mp=0;Mp<ap.outWidth;++Mp){for(var Ap=Mp*cp-Sp,Dp=Ap;Dp<0;)Dp+=pp;for(var Fp=Math.min(ap.inWidth,gp+Ap),Ip=Number.NEGATIVE_INFINITY,kp=-1,Tp=Cp;Tp<$p;Tp+=dp)for(var Np=Tp-_p,Lp=Op;Lp<jp;Lp+=fp)for(var Vp=Lp-Pp,zp=Dp;zp<Fp;zp+=pp){var Wp=zp-Ap,Up=yp.get(bp,Tp,Lp,zp,Ep);Up>=Ip&&(Ip=Up,kp=Np*mp*gp+Vp*mp+Wp)}sp.set(kp,bp,wp,Rp,Mp,Ep)}}}return sp.toTensor()},np.prototype.maxPool3dBackprop=function(rp,ap,sp,lp){Ih([ap,sp],"maxPool3dBackprop");for(var up=this.maxPool3dPositions(ap,lp),cp=lp.strideDepth,dp=lp.strideHeight,fp=lp.strideWidth,pp=lp.dilationDepth,hp=lp.dilationHeight,mp=lp.dilationWidth,gp=lp.effectiveFilterDepth,vp=lp.effectiveFilterHeight,xp=lp.effectiveFilterWidth,Sp=gp-1-lp.padInfo.front,yp=xp-1-lp.padInfo.left,bp=vp-1-lp.padInfo.top,Ep=ur(ap.shape,"float32"),wp=this.bufferSync(up),_p=this.bufferSync(rp),Cp=0;Cp<lp.batchSize;++Cp)for(var $p=0;$p<lp.inChannels;++$p)for(var Rp=0;Rp<lp.inDepth;++Rp)for(var Pp=0;Pp<lp.inHeight;++Pp)for(var Op=0;Op<lp.inWidth;++Op){for(var jp=Rp-Sp,Mp=Pp-bp,Ap=Op-yp,Dp=0,Fp=0;Fp<gp;Fp+=pp){var Ip=(jp+Fp)/cp;if(!(Ip<0||Ip>=lp.outDepth||Math.floor(Ip)!==Ip))for(var kp=0;kp<vp;kp+=hp){var Tp=(Mp+kp)/dp;if(!(Tp<0||Tp>=lp.outHeight||Math.floor(Tp)!==Tp))for(var Np=0;Np<xp;Np+=mp){var Lp=(Ap+Np)/fp;if(!(Lp<0||Lp>=lp.outWidth||Math.floor(Lp)!==Lp)){var Vp=gp*vp*xp-1-wp.get(Cp,Ip,Tp,Lp,$p)===Fp*vp*xp+kp*xp+Np?1:0;Vp!==0&&(Dp+=_p.get(Cp,Ip,Tp,Lp,$p)*Vp)}}}}Ep.set(Dp,Cp,Rp,Pp,Op,$p)}return Ep.toTensor()},np.prototype.cast=function(rp,ap){return So(rp,ap,this)},np.prototype.reshape=function(rp,ap){return Ao(rp,ap)},np.prototype.avgPool=function(rp,ap){return Ih(rp,"avgPool"),this.pool(rp,ap,"avg").toFloat()},np.prototype.resizeBilinear=function(rp,ap,sp,lp){Ih(rp,"resizeBilinear");for(var up=rp.shape,cp=up[0],dp=up[1],fp=up[2],pp=up[3],hp=this.readSync(rp.dataId),mp=new Float32Array(w$1([cp,ap,sp,pp])),gp=[lp&&ap>1?dp-1:dp,lp&&sp>1?fp-1:fp],vp=[lp&&ap>1?ap-1:ap,lp&&sp>1?sp-1:sp],xp=0,Sp=gp[0]/vp[0],yp=gp[1]/vp[1],bp=0;bp<cp;bp++)for(var Ep=0;Ep<ap;Ep++)for(var wp=Sp*Ep,_p=Math.floor(wp),Cp=wp-_p,$p=Math.min(dp-1,Math.ceil(wp)),Rp=bp*rp.strides[0]+_p*rp.strides[1],Pp=bp*rp.strides[0]+$p*rp.strides[1],Op=0;Op<sp;Op++)for(var jp=yp*Op,Mp=Math.floor(jp),Ap=jp-Mp,Dp=Math.min(fp-1,Math.ceil(jp)),Fp=Rp+Mp*rp.strides[2],Ip=Pp+Mp*rp.strides[2],kp=Rp+ +Dp*rp.strides[2],Tp=Pp+Dp*rp.strides[2],Np=0;Np<pp;Np++){var Lp=hp[Fp+Np],Vp=hp[Ip+Np],zp=Lp+(hp[kp+Np]-Lp)*Ap,Wp=zp+(Vp+(hp[Tp+Np]-Vp)*Ap-zp)*Cp;mp[xp++]=Wp}return kn(mp,[cp,ap,sp,pp])},np.prototype.resizeBilinearBackprop=function(rp,ap,sp){Ih([rp,ap],"resizeBilinearBackprop");for(var lp=ap.shape,up=lp[0],cp=lp[1],dp=lp[2],fp=lp[3],pp=rp.shape,hp=pp[1],mp=pp[2],gp=new Float32Array(up*cp*dp*fp),vp=[sp&&hp>1?cp-1:cp,sp&&mp>1?dp-1:dp],xp=[sp&&hp>1?hp-1:hp,sp&&mp>1?mp-1:mp],Sp=vp[0]/xp[0],yp=vp[1]/xp[1],bp=this.readSync(rp.dataId),Ep=0,wp=0;wp<up;wp++)for(var _p=wp*ap.strides[0],Cp=0;Cp<hp;Cp++)for(var $p=Cp*Sp,Rp=Math.floor($p),Pp=Math.min(Math.ceil($p),cp-1),Op=_p+Rp*ap.strides[1],jp=_p+Pp*ap.strides[1],Mp=$p-Rp,Ap=1-Mp,Dp=0;Dp<mp;Dp++)for(var Fp=Dp*yp,Ip=Math.floor(Fp),kp=Math.min(Math.ceil(Fp),dp-1),Tp=Fp-Ip,Np=1-Tp,Lp=Op+Ip*ap.strides[2],Vp=Op+kp*ap.strides[2],zp=jp+Ip*ap.strides[2],Wp=jp+kp*ap.strides[2],Up=Ap*Np,qp=Ap*Tp,Bp=Mp*Np,Yp=Mp*Tp,Xp=0;Xp<fp;Xp++){var Qp=bp[Ep++];gp[Lp+Xp]+=Qp*Up,gp[Vp+Xp]+=Qp*qp,gp[zp+Xp]+=Qp*Bp,gp[Wp+Xp]+=Qp*Yp}return Fn(gp,[up,dp,cp,fp],ap.dtype)},np.prototype.resizeNearestNeighbor=function(rp,ap,sp,lp){Ih(rp,"resizeNearestNeighbor");for(var up=rp.shape,cp=up[0],dp=up[1],fp=up[2],pp=up[3],hp=this.readSync(rp.dataId),mp=new Float32Array(cp*ap*sp*pp),gp=[lp&&ap>1?dp-1:dp,lp&&sp>1?fp-1:fp],vp=[lp&&ap>1?ap-1:ap,lp&&sp>1?sp-1:sp],xp=gp[0]/vp[0],Sp=gp[1]/vp[1],yp=0,bp=0;bp<cp;bp++)for(var Ep=bp*rp.strides[0],wp=0;wp<ap;wp++)for(var _p=xp*wp,Cp=Ep+Math.min(dp-1,lp?Math.round(_p):Math.floor(_p))*rp.strides[1],$p=0;$p<sp;$p++)for(var Rp=Sp*$p,Pp=Cp+Math.min(fp-1,lp?Math.round(Rp):Math.floor(Rp))*rp.strides[2],Op=0;Op<pp;Op++){var jp=hp[Pp+Op];mp[yp++]=jp}return kn(mp,[cp,ap,sp,pp],rp.dtype)},np.prototype.resizeNearestNeighborBackprop=function(rp,ap,sp){Ih([rp,ap],"resizeNearestNeighborBackprop");for(var lp=ap.shape,up=lp[0],cp=lp[1],dp=lp[2],fp=lp[3],pp=rp.shape,hp=pp[1],mp=pp[2],gp=new Float32Array(up*cp*dp*fp),vp=this.readSync(rp.dataId),xp=[sp&&hp>1?cp-1:cp,sp&&mp>1?dp-1:dp],Sp=[sp&&hp>1?hp-1:hp,sp&&mp>1?mp-1:mp],yp=xp[0]/Sp[0],bp=xp[1]/Sp[1],Ep=1/yp,wp=1/bp,_p=2*Math.ceil(Ep)+2,Cp=2*Math.ceil(wp)+2,$p=0;$p<up;$p++)for(var Rp=$p*ap.strides[0],Pp=0;Pp<cp;Pp++)for(var Op=Rp+Pp*ap.strides[1],jp=Math.floor(Pp*Ep),Mp=Math.floor(jp-_p/2),Ap=0;Ap<dp;Ap++)for(var Dp=Op+Ap*ap.strides[2],Fp=Math.floor(Ap*wp),Ip=Math.floor(Fp-Cp/2),kp=0;kp<fp;kp++){for(var Tp=0,Np=0;Np<_p;Np++){var Lp=Np+Mp;if(!(Lp<0||Lp>=hp)){var Vp=Rp+Lp*rp.strides[1],zp=Lp*yp;if(Pp===Math.min(cp-1,sp?Math.round(zp):Math.floor(zp)))for(var Wp=0;Wp<Cp;Wp++){var Up=Wp+Ip;if(!(Up<0||Up>=mp)){var qp=Vp+Up*rp.strides[2],Bp=Up*bp;Ap===Math.min(dp-1,sp?Math.round(Bp):Math.floor(Bp))&&(Tp+=vp[qp+kp])}}}}gp[Dp+kp]=Tp}return Fn(gp,ap.shape,ap.dtype)},np.prototype.batchNormalization=function(rp,ap,sp,lp,up,cp){Ih([rp,ap,sp,up,cp],"batchNorm");for(var dp=this.readSync(rp.dataId),fp=this.readSync(ap.dataId),pp=this.readSync(sp.dataId),hp=up?this.readSync(up.dataId):new Float32Array([1]),mp=cp?this.readSync(cp.dataId):new Float32Array([0]),gp=new Float32Array(dp.length),vp=mp.length,xp=hp.length,Sp=pp.length,yp=fp.length,bp=0,Ep=0,wp=0,_p=0,Cp=0;Cp<dp.length;++Cp)gp[Cp]=mp[bp++]+(dp[Cp]-fp[Ep++])*hp[wp++]/Math.sqrt(pp[_p++]+lp),bp>=vp&&(bp=0),Ep>=yp&&(Ep=0),wp>=xp&&(wp=0),_p>=Sp&&(_p=0);return Fn(gp,rp.shape)},np.prototype.localResponseNormalization4D=function(rp,ap,sp,lp,up){Ih(rp,"localResponseNormalization4D");var cp=rp.shape[3],dp=cp-1,fp=this.readSync(rp.dataId),pp=rp.size,hp=new Float32Array(pp);function mp(Sp){for(var yp=Sp%cp,bp=Sp-yp+Math.max(0,yp-ap),Ep=Sp-yp+Math.min(yp+ap,dp),wp=0;bp<=Ep;bp++){var _p=fp[bp];wp+=_p*_p}return wp}for(var gp=0;gp<pp;gp++){var vp=mp(gp),xp=fp[gp]*Math.pow(sp+lp*vp,-up);hp[gp]=xp}return Fn(hp,rp.shape)},np.prototype.LRNGrad=function(rp,ap,sp,lp,up,cp,dp){Ih(rp,"LRNGrad");for(var fp=rp.shape[3],pp=this.readSync(rp.dataId),hp=this.readSync(ap.dataId),mp=this.readSync(sp.dataId),gp=new Float32Array(rp.size),vp=rp.size,xp=0;xp<vp;xp++){for(var Sp=xp%fp,yp=xp-Sp+Math.max(0,Sp-lp),bp=xp-Sp+Math.min(fp,Sp+lp+1),Ep=0,wp=yp;wp<bp;wp++)Ep+=Math.pow(hp[wp],2);for(Ep=cp*Ep+up,wp=yp;wp<bp;wp++){var _p=-2*cp*dp*hp[wp]*mp[xp]/Ep;xp===wp&&(_p+=Math.pow(Ep,-dp)),_p*=pp[xp],gp[wp]+=_p}}return Fn(gp,rp.shape)},np.prototype.multinomial=function(rp,ap,sp,lp){Ih(rp,"multinomial");for(var up=ap?rp:io(rp),cp=up.shape[0],dp=up.shape[1],fp=Pn([cp,sp],"int32"),pp=this.readSync(fp.dataId),hp=this.readSync(up.dataId),mp=0;mp<cp;++mp){var gp=mp*dp,vp=new Float32Array(dp-1);vp[0]=hp[gp];for(var xp=1;xp<vp.length;++xp)vp[xp]=vp[xp-1]+hp[gp+xp];for(var Sp=rr(lp.toString()),yp=mp*sp,bp=0;bp<sp;++bp){var Ep=Sp();pp[yp+bp]=vp.length;for(var wp=0;wp<vp.length;wp++)if(Ep<vp[wp]){pp[yp+bp]=wp;break}}}return fp},np.prototype.oneHot=function(rp,ap,sp,lp){Ih(rp,"oneHot");var up=new Float32Array(rp.size*ap);up.fill(lp);for(var cp=this.readSync(rp.dataId),dp=0;dp<rp.size;++dp)cp[dp]>=0&&cp[dp]<ap&&(up[dp*ap+cp[dp]]=sp);return Tn(up,[rp.size,ap],"int32")},np.prototype.nonMaxSuppression=function(rp,ap,sp,lp,up){return Ih(rp,"nonMaxSuppression"),Mo(this.readSync(rp.dataId),this.readSync(ap.dataId),sp,lp,up)},np.prototype.fft=function(rp){return this.fftBatch(rp,!1)},np.prototype.ifft=function(rp){return this.fftBatch(rp,!0)},np.prototype.fftBatch=function(rp,ap){for(var sp=rp.shape[0],lp=rp.shape[1],up=ur(rp.shape,"float32"),cp=ur(rp.shape,"float32"),dp=Rn(rp).as2D(sp,lp),fp=In(rp).as2D(sp,lp),pp=0;pp<sp;pp++)for(var hp=dp.slice([pp,0],[1,lp]),mp=fp.slice([pp,0],[1,lp]),gp=En(hp,mp),vp=this.readSync(this.fftImpl(gp,ap).dataId),xp=0;xp<lp;xp++){var Sp=Fo(vp,xp);up.values[pp*lp+xp]=Sp.real,cp.values[pp*lp+xp]=Sp.imag}return En(up.toTensor(),cp.toTensor()).as2D(sp,lp)},np.prototype.fftImpl=function(rp,ap){var sp=rp.as1D(),lp=sp.size;if(this.isExponentOf2(lp)){var up=this.fftRadix2(sp,lp,ap).as2D(rp.shape[0],rp.shape[1]);return ap&&(up=En(Rn(up).div(An(lp)),In(up).div(An(lp)))),up}var cp=this.readSync(rp.dataId),dp=function(fp){for(var pp=new Float32Array(fp.length/2),hp=new Float32Array(fp.length/2),mp=0;mp<fp.length;mp+=2)pp[mp/2]=fp[mp],hp[mp/2]=fp[mp+1];return{real:pp,imag:hp}}(this.fourierTransformByMatmul(cp,lp,ap));return En(dp.real,dp.imag).as2D(rp.shape[0],rp.shape[1])},np.prototype.isExponentOf2=function(rp){return(rp&rp-1)==0},np.prototype.fftRadix2=function(rp,ap,sp){if(ap===1)return rp;var lp=this.readSync(rp.dataId),up=ap/2,cp=function(yp){for(var bp=Math.ceil(yp.length/4),Ep=new Float32Array(bp),wp=new Float32Array(bp),_p=0;_p<yp.length;_p+=4)Ep[Math.floor(_p/4)]=yp[_p],wp[Math.floor(_p/4)]=yp[_p+1];return{real:Ep,imag:wp}}(lp),dp=En(cp.real,cp.imag).as1D(),fp=function(yp){for(var bp=Math.floor(yp.length/4),Ep=new Float32Array(bp),wp=new Float32Array(bp),_p=2;_p<yp.length;_p+=4)Ep[Math.floor(_p/4)]=yp[_p],wp[Math.floor(_p/4)]=yp[_p+1];return{real:Ep,imag:wp}}(lp),pp=En(fp.real,fp.imag).as1D();dp=this.fftRadix2(dp,up,sp),pp=this.fftRadix2(pp,up,sp);var hp=function(yp,bp){for(var Ep=new Float32Array(yp/2),wp=new Float32Array(yp/2),_p=0;_p<Math.ceil(yp/2);_p++){var Cp=(bp?2:-2)*Math.PI*(_p/yp);Ep[_p]=Math.cos(Cp),wp[_p]=Math.sin(Cp)}return{real:Ep,imag:wp}}(ap,sp),mp=En(hp.real,hp.imag).mul(pp),gp=dp.add(mp),vp=dp.sub(mp),xp=Rn(gp).concat(Rn(vp)),Sp=In(gp).concat(In(vp));return En(xp,Sp).as1D()},np.prototype.fourierTransformByMatmul=function(rp,ap,sp){for(var lp=new Float32Array(2*ap),up=0;up<ap;up++){for(var cp=0,dp=0,fp=0;fp<ap;fp++){var pp=_o(up*fp,ap,sp),hp=Fo(rp,fp);cp+=hp.real*pp.real-hp.imag*pp.imag,dp+=hp.real*pp.imag+hp.imag*pp.real}sp&&(cp/=ap,dp/=ap),Oo(lp,cp,dp,up)}return lp},np.prototype.depthToSpace=function(rp,ap,sp){g(sp==="NHWC",function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+sp}),g(ap>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+ap});for(var lp=rp.shape[0],up=rp.shape[1],cp=rp.shape[2],dp=rp.shape[3],fp=up*ap,pp=cp*ap,hp=dp/(ap*ap),mp=this.readSync(rp.dataId),gp=new Float32Array(lp*fp*pp*hp),vp=0,xp=0;xp<lp;++xp)for(var Sp=0;Sp<fp;++Sp)for(var yp=Math.floor(Sp/ap),bp=Sp%ap,Ep=0;Ep<pp;++Ep)for(var wp=Math.floor(Ep/ap),_p=(bp*ap+Ep%ap)*hp,Cp=0;Cp<hp;++Cp){var $p=Cp+_p+dp*(wp+cp*(yp+up*xp));gp[vp++]=mp[$p]}return Fn(gp,[lp,fp,pp,hp])},np.prototype.broadcastedBinaryOp=function(rp,ap,sp,lp){var up=po(rp.shape,ap.shape),cp=ur(up,sp),dp=this.readSync(rp.dataId),fp=this.readSync(ap.dataId),pp=ho(rp.shape,up),hp=ho(ap.shape,up),mp=cp.values;if(pp.length+hp.length===0)for(var gp=0;gp<mp.length;++gp)mp[gp]=lp(dp[gp%dp.length],fp[gp%fp.length]);else{var vp=this.bufferSync(rp),xp=this.bufferSync(ap),Sp=function(yp){var bp=cp.indexToLoc(yp),Ep=bp.slice(-rp.rank);pp.forEach(function($p){return Ep[$p]=0});var wp=vp.locToIndex(Ep),_p=bp.slice(-ap.rank);hp.forEach(function($p){return _p[$p]=0});var Cp=xp.locToIndex(_p);mp[yp]=lp(dp[wp],fp[Cp])};for(gp=0;gp<mp.length;++gp)Sp(gp)}return cp.toTensor()},np.prototype.broadcastedBinaryComplexOp=function(rp,ap,sp){var lp=po(rp.shape,ap.shape),up=ur(lp,"float32"),cp=ur(lp,"float32"),dp=this.readSync(rp.dataId),fp=this.readSync(ap.dataId),pp=ho(rp.shape,lp),hp=ho(ap.shape,lp),mp=up.values,gp=cp.values;if(pp.length+hp.length===0)for(var vp=0;vp<mp.length;vp++){var xp=vp%dp.length,Sp=vp%fp.length,yp=sp(dp[2*xp],dp[2*xp+1],fp[2*Sp],fp[2*Sp+1]);mp[vp]=yp.real,gp[vp]=yp.imag}else{var bp=this.bufferSync(this.data.get(rp.dataId).complexTensors.real),Ep=this.bufferSync(this.data.get(ap.dataId).complexTensors.real),wp=function(_p){var Cp=up.indexToLoc(_p),$p=Cp.slice(-rp.rank);pp.forEach(function(Mp){return $p[Mp]=0});var Rp=bp.locToIndex($p),Pp=Cp.slice(-ap.rank);hp.forEach(function(Mp){return Pp[Mp]=0});var Op=Ep.locToIndex(Pp),jp=sp(dp[2*Rp],dp[2*Rp+1],fp[2*Op],fp[2*Op+1]);mp[_p]=jp.real,gp[_p]=jp.imag};for(vp=0;vp<mp.length;vp++)wp(vp)}return this.complex(up.toTensor(),cp.toTensor())},np.prototype.split=function(rp,ap,sp){return Po(rp,ap,sp)},np.prototype.dispose=function(){},np.prototype.floatPrecision=function(){return 32},np.prototype.epsilon=function(){return 1e-7},np.prototype.cropAndResize=function(rp,ap,sp,lp,up,cp){for(var dp=rp.shape,fp=dp[0],pp=dp[1],hp=dp[2],mp=dp[3],gp=ap.shape[0],vp=lp[0],xp=lp[1],Sp=ur([gp,vp,xp,mp],rp.dtype),yp=this.readSync(ap.dataId),bp=this.readSync(sp.dataId),Ep=this.readSync(rp.dataId),wp=rp.strides,_p=Sp.strides,Cp=0;Cp<gp;Cp++){var $p=4*Cp,Rp=yp[$p],Pp=yp[$p+1],Op=yp[$p+2],jp=yp[$p+3],Mp=bp[Cp];if(!(Mp>=fp))for(var Ap=vp>1?(Op-Rp)*(pp-1)/(vp-1):0,Dp=xp>1?(jp-Pp)*(hp-1)/(xp-1):0,Fp=0;Fp<vp;Fp++){var Ip=vp>1?Rp*(pp-1)+Fp*Ap:.5*(Rp+Op)*(pp-1);if(Ip<0||Ip>pp-1)for(var kp=0;kp<xp;kp++)for(var Tp=0;Tp<mp;Tp++){var Np=Tp+kp*_p[2]+Fp*_p[1]+Cp*_p[0];Sp.values[Np]=cp}else if(up==="bilinear"){var Lp=Math.floor(Ip),Vp=Math.ceil(Ip),zp=Ip-Lp;for(kp=0;kp<xp;kp++)if((Jp=xp>1?Pp*(hp-1)+kp*Dp:.5*(Pp+jp)*(hp-1))<0||Jp>hp-1)for(Tp=0;Tp<mp;Tp++)Np=Tp+kp*_p[2]+Fp*_p[1]+Cp*_p[0],Sp.values[Np]=cp;else{var Wp=Math.floor(Jp),Up=Math.ceil(Jp),qp=Jp-Wp;for(Tp=0;Tp<mp;Tp++){var Bp=Ep[Np=Tp+Wp*wp[2]+Lp*wp[1]+Mp*wp[0]],Yp=Ep[Np=Tp+Up*wp[2]+Lp*wp[1]+Mp*wp[0]],Xp=Ep[Np=Tp+Wp*wp[2]+Vp*wp[1]+Mp*wp[0]],Qp=Bp+(Yp-Bp)*qp,am=Xp+(Ep[Np=Tp+Up*wp[2]+Vp*wp[1]+Mp*wp[0]]-Xp)*qp;Np=Tp+kp*_p[2]+Fp*_p[1]+Cp*_p[0],Sp.values[Np]=Qp+(am-Qp)*zp}}}else for(kp=0;kp<xp;++kp){var Jp;if((Jp=xp>1?Pp*(hp-1)+kp*Dp:.5*(Pp+jp)*(hp-1))<0||Jp>hp-1)for(Tp=0;Tp<mp;Tp++)Np=Tp+kp*_p[2]+Fp*_p[1]+Cp*_p[0],Sp.values[Np]=cp;else{var im=Math.round(Jp),Zp=Math.round(Ip);for(Tp=0;Tp<mp;Tp++){var Gp=Tp+im*wp[2]+Zp*wp[1]+Mp*wp[0],tm=Tp+kp*_p[2]+Fp*_p[1]+Cp*_p[0];Sp.values[tm]=Ep[Gp]}}}}}return Sp.toTensor()},np.prototype.sparseToDense=function(rp,ap,sp,lp){var up=Hr(0,rp,sp),cp=up.sliceRank,dp=up.numUpdates,fp=up.sliceSize,pp=up.strides,hp=up.outputSize;return this.scatter(rp,ap,sp,hp,fp,dp,cp,pp,lp,!1)},np.prototype.gatherND=function(rp,ap){var sp=ap.shape,lp=sp[sp.length-1],up=Ur(rp,ap),cp=up[0],dp=up[1],fp=up[2],pp=up[3];if(dp===0)return kn([],cp,rp.dtype);for(var hp=new lt([dp,fp],rp.dtype),mp=this.readSync(ap.dataId),gp=this.readSync(rp.dataId),vp=0;vp<dp;vp++){for(var xp=[],Sp=0,yp=0;yp<lp;yp++){var bp=mp[vp*lp+yp];Sp+=bp*pp[yp],xp.push(bp)}if(Sp<0||Sp>=rp.size/fp)throw new Error("Invalid indices: "+xp+" does not index into "+rp.shape);for(var Ep=0;Ep<fp;Ep++)hp.values[vp*fp+Ep]=gp[Sp*fp+Ep]}return hp.toTensor().reshape(cp)},np.prototype.scatterND=function(rp,ap,sp){var lp=Hr(0,rp,sp),up=lp.sliceRank,cp=lp.numUpdates,dp=lp.sliceSize,fp=lp.strides,pp=lp.outputSize,hp=An(0);return this.scatter(rp,ap,sp,pp,dp,cp,up,fp,hp,!0)},np.prototype.fill=function(rp,ap,sp){var lp=F(sp=sp||z(ap),w$1(rp));return lp.fill(ap),Nt.makeTensor(lp,rp,sp,this)},np.prototype.onesLike=function(rp){if(rp.dtype==="string")throw new Error("onesLike is not supported for string tensors");return this.fill(rp.shape,1,rp.dtype)},np.prototype.zerosLike=function(rp){var ap=F(rp.dtype,w$1(rp.shape));return this.makeOutput(ap,rp.shape,rp.dtype)},np.prototype.linspace=function(rp,ap,sp){return Do(rp,ap,sp)},np.prototype.scatter=function(rp,ap,sp,lp,up,cp,dp,fp,pp,hp){var mp=[lp/up,up],gp=this.readSync(rp.dataId),vp=this.readSync(ap.dataId);if(lp===0)return kn([],sp,ap.dtype);var xp=new lt(mp,ap.dtype);xp.values.fill(this.readSync(pp.dataId)[0]);for(var Sp=0;Sp<cp;Sp++){for(var yp=[],bp=0,Ep=0;Ep<dp;Ep++){var wp=gp[Sp*dp+Ep];yp.push(wp),bp+=wp*fp[Ep]}if(bp<0||bp>=lp/up)throw new Error("Invalid indices: "+yp+" does not index into "+sp);for(var _p=0;_p<up;_p++)hp?xp.values[bp*up+_p]+=vp[Sp*up+_p]:xp.values[bp*up+_p]=ap.rank===0?vp[0]:vp[Sp*up+_p]}return xp.toTensor().reshape(sp)},np}(co);Nt.registerBackend("cpu",function(){return new Sh},1),l$1({kernelName:"Square",backendName:"cpu",kernelFunc:function(_d){var np=_d.inputs,rp=_d.backend,ap=np.x,sp=rp;Ih(ap,"square");for(var lp=sp.data.get(ap.dataId).values,up=new Float32Array(lp.length),cp=0;cp<lp.length;++cp){var dp=lp[cp];up[cp]=dp*dp}return{dataId:sp.write(up,ap.shape,ap.dtype),shape:ap.shape,dtype:ap.dtype}}}),l$1({kernelName:"Square",backendName:"webgl",kernelFunc:function(_d){var np=_d.inputs,rp=_d.backend,ap=np.x,sp=rp,lp=new su(ap.shape,"return x * x;");return sp.runWebGLProgram(lp,[ap],ap.dtype)}});var Ah=function(){function _d(){}return _d.prototype.fetch=function(np,rp){return fetch(np,rp)},_d.prototype.now=function(){return performance.now()},_d.prototype.encode=function(np,rp){if(rp!=="utf-8"&&rp!=="utf8")throw new Error("Browser's encoder only supports utf-8, but got "+rp);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(np)},_d.prototype.decode=function(np,rp){return new TextDecoder(rp).decode(np)},_d}();a$1().get("IS_BROWSER")&&a$1().setPlatform("browser",new Ah);var Dh,Th=function(){return require("node-fetch")},Nh=function(){function _d(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}return _d.prototype.fetch=function(np,rp){return a$1().global.fetch!=null?a$1().global.fetch(np,rp):(Dh==null&&(Dh=Th()),Dh(np,rp))},_d.prototype.now=function(){var np=process.hrtime();return 1e3*np[0]+np[1]/1e6},_d.prototype.encode=function(np,rp){if(rp!=="utf-8"&&rp!=="utf8")throw new Error("Node built-in encoder only supports utf-8, but got "+rp);return this.textEncoder.encode(np)},_d.prototype.decode=function(np,rp){return np.length===0?"":new this.util.TextDecoder(rp).decode(np)},_d}();a$1().get("IS_NODE")&&a$1().setPlatform("node",new Nh);var Fh={float32:4,int32:4,uint16:2,uint8:1,bool:1},Oh=4;function _h(_d,np){for(var rp={},ap=0,sp=function(cp){var dp=cp.name,fp=cp.dtype,pp=cp.shape,hp=w$1(pp),mp=void 0;if("quantization"in cp){var gp=cp.quantization;if(gp.dtype!=="uint8"&&gp.dtype!=="uint16")throw new Error("Weight "+cp.name+" has unknown quantization dtype "+gp.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.");var vp=Fh[gp.dtype],xp=_d.slice(ap,ap+hp*vp),Sp=gp.dtype==="uint8"?new Uint8Array(xp):new Uint16Array(xp);if(fp==="float32")mp=Float32Array.from(Sp,function(Cp){return Cp*gp.scale+gp.min});else{if(fp!=="int32")throw new Error("Unsupported dtype in weight '"+dp+"': "+fp);mp=Int32Array.from(Sp,function(Cp){return Math.round(Cp*gp.scale+gp.min)})}ap+=hp*vp}else if(fp==="string"){var yp=w$1(cp.shape);mp=[];for(var bp=0;bp<yp;bp++){var Ep=new Uint32Array(_d.slice(ap,ap+Oh))[0];ap+=Oh;var wp=new Uint8Array(_d.slice(ap,ap+Ep));mp.push(wp),ap+=Ep}}else{var _p=Fh[fp];if(xp=_d.slice(ap,ap+hp*_p),fp==="float32")mp=new Float32Array(xp);else if(fp==="int32")mp=new Int32Array(xp);else{if(fp!=="bool")throw new Error("Unsupported dtype in weight '"+dp+"': "+fp);mp=new Uint8Array(xp)}ap+=hp*_p}rp[dp]=kn(mp,pp,fp)},lp=0,up=np;lp<up.length;lp++)sp(up[lp]);return rp}function Mh(_d){if(_d===null)throw new Error("Invalid input value: "+JSON.stringify(_d));var np=0,rp=[];_d.forEach(function(lp){if(np+=lp.byteLength,rp.push(lp.byteLength===lp.buffer.byteLength?lp:new lp.constructor(lp)),!(lp instanceof Float32Array||lp instanceof Int32Array||lp instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+lp.constructor.name)});var ap=new Uint8Array(np),sp=0;return rp.forEach(function(lp){ap.set(new Uint8Array(lp.buffer),sp),sp+=lp.byteLength}),ap.buffer}var Bh=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function Ph(_d){return Bh?Buffer.byteLength(_d):new Blob([_d]).size}function Lh(_d){var np=0;_d.forEach(function(sp){np+=sp.byteLength});var rp=new Uint8Array(np),ap=0;return _d.forEach(function(sp){rp.set(new Uint8Array(sp),ap),ap+=sp.byteLength}),rp.buffer}function Wh(_d){for(_d=_d.trim();_d.endsWith("/");)_d=_d.slice(0,_d.length-1);var np=_d.split("/");return np[np.length-1]}function Uh(_d){if(_d.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:_d.modelTopology==null?0:Ph(JSON.stringify(_d.modelTopology)),weightSpecsBytes:_d.weightSpecs==null?0:Ph(JSON.stringify(_d.weightSpecs)),weightDataBytes:_d.weightData==null?0:_d.weightData.byteLength}}var Vh=function(){function _d(){this.saveRouters=[],this.loadRouters=[]}return _d.getInstance=function(){return _d.instance==null&&(_d.instance=new _d),_d.instance},_d.registerSaveRouter=function(np){_d.getInstance().saveRouters.push(np)},_d.registerLoadRouter=function(np){_d.getInstance().loadRouters.push(np)},_d.getSaveHandlers=function(np){return _d.getHandlers(np,"save")},_d.getLoadHandlers=function(np,rp){return _d.getHandlers(np,"load",rp)},_d.getHandlers=function(np,rp,ap){var sp=[];return(rp==="load"?_d.getInstance().loadRouters:_d.getInstance().saveRouters).forEach(function(lp){var up=lp(np,ap);up!==null&&sp.push(up)}),sp},_d}(),zh="://",Gh=function(){function _d(){this.managers={}}return _d.getInstance=function(){return _d.instance==null&&(_d.instance=new _d),_d.instance},_d.registerManager=function(np,rp){g(np!=null,function(){return"scheme must not be undefined or null."}),np.endsWith(zh)&&(np=np.slice(0,np.indexOf(zh))),g(np.length>0,function(){return"scheme must not be an empty string."});var ap=_d.getInstance();g(ap.managers[np]==null,function(){return"A model store manager is already registered for scheme '"+np+"'."}),ap.managers[np]=rp},_d.getManager=function(np){var rp=this.getInstance().managers[np];if(rp==null)throw new Error("Cannot find model manager for scheme '"+np+"'");return rp},_d.getSchemes=function(){return Object.keys(this.getInstance().managers)},_d}();function Hh(_d){if(_d.indexOf(zh)===-1)throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+Gh.getSchemes().join(","));return{scheme:_d.split(zh)[0],path:_d.split(zh)[1]}}function qh(_d,np,rp){return rp===void 0&&(rp=!1),n$1(this,void 0,void 0,function(){var ap,sp,lp,up,cp,dp,fp,pp,hp;return r(this,function(mp){switch(mp.label){case 0:return g(_d!==np,function(){return"Old path and new path are the same: '"+_d+"'"}),g((ap=Vh.getLoadHandlers(_d)).length>0,function(){return"Copying failed because no load handler is found for source URL "+_d+"."}),g(ap.length<2,function(){return"Copying failed because more than one ("+ap.length+") load handlers for source URL "+_d+"."}),sp=ap[0],g((lp=Vh.getSaveHandlers(np)).length>0,function(){return"Copying failed because no save handler is found for destination URL "+np+"."}),g(lp.length<2,function(){return"Copying failed because more than one ("+ap.length+") save handlers for destination URL "+np+"."}),up=lp[0],cp=Hh(_d).scheme,dp=Hh(_d).path,fp=cp===Hh(_d).scheme,[4,sp.load()];case 1:return pp=mp.sent(),rp&&fp?[4,Gh.getManager(cp).removeModel(dp)]:[3,3];case 2:mp.sent(),mp.label=3;case 3:return[4,up.save(pp)];case 4:return hp=mp.sent(),!rp||fp?[3,6]:[4,Gh.getManager(cp).removeModel(dp)];case 5:mp.sent(),mp.label=6;case 6:return[2,hp.modelArtifactsInfo]}})})}var Kh="models_store",jh="model_info_store";function Xh(){if(!a$1().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var _d=window,np=_d.indexedDB||_d.mozIndexedDB||_d.webkitIndexedDB||_d.msIndexedDB||_d.shimIndexedDB;if(np==null)throw new Error("The current browser does not appear to support IndexedDB.");return np}function $h(_d){var np=_d.result;np.createObjectStore(Kh,{keyPath:"modelPath"}),np.createObjectStore(jh,{keyPath:"modelPath"})}var Yh=function(){function _d(np){if(this.indexedDB=Xh(),np==null||!np)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=np}return _d.prototype.save=function(np){return n$1(this,void 0,void 0,function(){return r(this,function(rp){if(np.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,np)]})})},_d.prototype.load=function(){return n$1(this,void 0,void 0,function(){return r(this,function(np){return[2,this.databaseAction(this.modelPath)]})})},_d.prototype.databaseAction=function(np,rp){var ap=this;return new Promise(function(sp,lp){var up=ap.indexedDB.open("tensorflowjs",1);up.onupgradeneeded=function(){return $h(up)},up.onsuccess=function(){var cp=up.result;if(rp==null){var dp=cp.transaction(Kh,"readonly"),fp=dp.objectStore(Kh).get(ap.modelPath);fp.onsuccess=function(){if(fp.result==null)return cp.close(),lp(new Error("Cannot find model with path '"+ap.modelPath+"' in IndexedDB."));sp(fp.result.modelArtifacts)},fp.onerror=function(xp){return cp.close(),lp(fp.error)},dp.oncomplete=function(){return cp.close()}}else{var pp,hp=Uh(rp),mp=cp.transaction(jh,"readwrite"),gp=mp.objectStore(jh),vp=gp.put({modelPath:ap.modelPath,modelArtifactsInfo:hp});vp.onsuccess=function(){var xp=(pp=cp.transaction(Kh,"readwrite")).objectStore(Kh).put({modelPath:ap.modelPath,modelArtifacts:rp,modelArtifactsInfo:hp});xp.onsuccess=function(){return sp({modelArtifactsInfo:hp})},xp.onerror=function(Sp){var yp=(gp=mp.objectStore(jh)).delete(ap.modelPath);yp.onsuccess=function(){return cp.close(),lp(xp.error)},yp.onerror=function(bp){return cp.close(),lp(xp.error)}}},vp.onerror=function(xp){return cp.close(),lp(vp.error)},mp.oncomplete=function(){pp==null?cp.close():pp.oncomplete=function(){return cp.close()}}}},up.onerror=function(cp){return lp(up.error)}})},_d.URL_SCHEME="indexeddb://",_d}(),Qh=function(_d){return a$1().getBool("IS_BROWSER")&&!Array.isArray(_d)&&_d.startsWith(Yh.URL_SCHEME)?(np=_d.slice(Yh.URL_SCHEME.length),new Yh(np)):null;var np};Vh.registerSaveRouter(Qh),Vh.registerLoadRouter(Qh);var Jh=function(){function _d(){this.indexedDB=Xh()}return _d.prototype.listModels=function(){return n$1(this,void 0,void 0,function(){var np=this;return r(this,function(rp){return[2,new Promise(function(ap,sp){var lp=np.indexedDB.open("tensorflowjs",1);lp.onupgradeneeded=function(){return $h(lp)},lp.onsuccess=function(){var up=lp.result,cp=up.transaction(jh,"readonly"),dp=cp.objectStore(jh).getAll();dp.onsuccess=function(){for(var fp={},pp=0,hp=dp.result;pp<hp.length;pp++){var mp=hp[pp];fp[mp.modelPath]=mp.modelArtifactsInfo}ap(fp)},dp.onerror=function(fp){return up.close(),sp(dp.error)},cp.oncomplete=function(){return up.close()}},lp.onerror=function(up){return sp(lp.error)}})]})})},_d.prototype.removeModel=function(np){return n$1(this,void 0,void 0,function(){var rp=this;return r(this,function(ap){var sp;return np=(sp=np).startsWith(Yh.URL_SCHEME)?sp.slice(Yh.URL_SCHEME.length):sp,[2,new Promise(function(lp,up){var cp=rp.indexedDB.open("tensorflowjs",1);cp.onupgradeneeded=function(){return $h(cp)},cp.onsuccess=function(){var dp,fp=cp.result,pp=fp.transaction(jh,"readwrite"),hp=pp.objectStore(jh),mp=hp.get(np);mp.onsuccess=function(){if(mp.result==null)return fp.close(),up(new Error("Cannot find model with path '"+np+"' in IndexedDB."));var gp=hp.delete(np),vp=function(){var xp=(dp=fp.transaction(Kh,"readwrite")).objectStore(Kh).delete(np);xp.onsuccess=function(){return lp(mp.result.modelArtifactsInfo)},xp.onerror=function(Sp){return up(mp.error)}};gp.onsuccess=vp,gp.onerror=function(xp){return vp(),fp.close(),up(mp.error)}},mp.onerror=function(gp){return fp.close(),up(mp.error)},pp.oncomplete=function(){dp==null?fp.close():dp.oncomplete=function(){return fp.close()}}},cp.onerror=function(dp){return up(cp.error)}})]})})},_d}();if(a$1().getBool("IS_BROWSER"))try{Gh.registerManager(Yh.URL_SCHEME,new Jh)}catch{}var Zh="/",tf$3="tensorflowjs_models",ef="info",nf="model_topology",rf="weight_specs",of="weight_data",af="model_metadata";function uf(_d){return{info:[tf$3,_d,ef].join(Zh),topology:[tf$3,_d,nf].join(Zh),weightSpecs:[tf$3,_d,rf].join(Zh),weightData:[tf$3,_d,of].join(Zh),modelMetadata:[tf$3,_d,af].join(Zh)}}function sf(_d){var np=_d.split(Zh);if(np.length<3)throw new Error("Invalid key format: "+_d);return np.slice(1,np.length-1).join(Zh)}var cf=function(){function _d(np){if(!a$1().getBool("IS_BROWSER")||window.localStorage===void 0)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,np==null||!np)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=np,this.keys=uf(this.modelPath)}return _d.prototype.save=function(np){return n$1(this,void 0,void 0,function(){var rp,ap,sp;return r(this,function(lp){if(np.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");rp=JSON.stringify(np.modelTopology),ap=JSON.stringify(np.weightSpecs),sp=Uh(np);try{return this.LS.setItem(this.keys.info,JSON.stringify(sp)),this.LS.setItem(this.keys.topology,rp),this.LS.setItem(this.keys.weightSpecs,ap),this.LS.setItem(this.keys.weightData,(up=np.weightData,Bh?Buffer.from(up).toString("base64"):btoa(String.fromCharCode.apply(null,new Uint8Array(up))))),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:np.format,generatedBy:np.generatedBy,convertedBy:np.convertedBy})),[2,{modelArtifactsInfo:sp}]}catch{throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+sp.modelTopologyBytes+", weightSpecsBytes="+sp.weightSpecsBytes+", weightDataBytes="+sp.weightDataBytes+".")}var up;return[2]})})},_d.prototype.load=function(){return n$1(this,void 0,void 0,function(){var np,rp,ap,sp,lp,up,cp;return r(this,function(dp){if((np=JSON.parse(this.LS.getItem(this.keys.info)))==null)throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if(np.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(rp={},(ap=JSON.parse(this.LS.getItem(this.keys.topology)))==null)throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(rp.modelTopology=ap,(sp=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))==null)throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(rp.weightSpecs=sp,(lp=this.LS.getItem(this.keys.modelMetadata))!=null&&(up=JSON.parse(lp),rp.format=up.format,rp.generatedBy=up.generatedBy,rp.convertedBy=up.convertedBy),(cp=this.LS.getItem(this.keys.weightData))==null)throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return rp.weightData=function(fp){if(Bh){var pp=Buffer.from(fp,"base64");return pp.buffer.slice(pp.byteOffset,pp.byteOffset+pp.byteLength)}for(var hp=atob(fp),mp=new Uint8Array(hp.length),gp=0;gp<hp.length;++gp)mp.set([hp.charCodeAt(gp)],gp);return mp.buffer}(cp),[2,rp]})})},_d.URL_SCHEME="localstorage://",_d}(),lf=function(_d){return a$1().getBool("IS_BROWSER")&&!Array.isArray(_d)&&_d.startsWith(cf.URL_SCHEME)?(np=_d.slice(cf.URL_SCHEME.length),new cf(np)):null;var np};Vh.registerSaveRouter(lf),Vh.registerLoadRouter(lf);var hf=function(){function _d(){g(a$1().getBool("IS_BROWSER"),function(){return"Current environment is not a web browser"}),g(window.localStorage!==void 0,function(){return"Current browser does not appear to support localStorage"}),this.LS=window.localStorage}return _d.prototype.listModels=function(){return n$1(this,void 0,void 0,function(){var np,rp,ap,sp,lp,up;return r(this,function(cp){for(np={},rp=tf$3+Zh,ap=Zh+ef,sp=0;sp<this.LS.length;++sp)(lp=this.LS.key(sp)).startsWith(rp)&&lp.endsWith(ap)&&(up=sf(lp),np[up]=JSON.parse(this.LS.getItem(lp)));return[2,np]})})},_d.prototype.removeModel=function(np){return n$1(this,void 0,void 0,function(){var rp,ap;return r(this,function(sp){var lp;if(np=(lp=np).startsWith(cf.URL_SCHEME)?lp.slice(cf.URL_SCHEME.length):lp,rp=uf(np),this.LS.getItem(rp.info)==null)throw new Error("Cannot find model at path '"+np+"'");return ap=JSON.parse(this.LS.getItem(rp.info)),this.LS.removeItem(rp.info),this.LS.removeItem(rp.topology),this.LS.removeItem(rp.weightSpecs),this.LS.removeItem(rp.weightData),[2,ap]})})},_d}();if(a$1().getBool("IS_BROWSER"))try{Gh.registerManager(cf.URL_SCHEME,new hf)}catch{}var ff="model",pf=".json",df=".weights.bin";function vf(_d){return new Promise(function(np){return setTimeout(np)}).then(_d)}var mf=function(){function _d(np){if(!a$1().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");np.startsWith(_d.URL_SCHEME)&&(np=np.slice(_d.URL_SCHEME.length)),np!=null&&np.length!==0||(np=ff),this.modelTopologyFileName=np+pf,this.weightDataFileName=np+df}return _d.prototype.save=function(np){return n$1(this,void 0,void 0,function(){var rp,ap,sp,lp,up,cp;return r(this,function(dp){switch(dp.label){case 0:if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");if(rp=window.URL.createObjectURL(new Blob([np.weightData],{type:"application/octet-stream"})),!(np.modelTopology instanceof ArrayBuffer))return[3,1];throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 1:return ap=[{paths:["./"+this.weightDataFileName],weights:np.weightSpecs}],sp={modelTopology:np.modelTopology,format:np.format,generatedBy:np.generatedBy,convertedBy:np.convertedBy,weightsManifest:ap},lp=window.URL.createObjectURL(new Blob([JSON.stringify(sp)],{type:"application/json"})),(up=this.jsonAnchor==null?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,up.href=lp,[4,vf(function(){return up.dispatchEvent(new MouseEvent("click"))})];case 2:return dp.sent(),np.weightData==null?[3,4]:((cp=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,cp.href=rp,[4,vf(function(){return cp.dispatchEvent(new MouseEvent("click"))})]);case 3:dp.sent(),dp.label=4;case 4:return[2,{modelArtifactsInfo:Uh(np)}]}})})},_d.URL_SCHEME="downloads://",_d}(),gf=function(){function _d(np){if(np==null||np.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+np);this.files=np}return _d.prototype.load=function(){return n$1(this,void 0,void 0,function(){var np,rp,ap=this;return r(this,function(sp){return np=this.files[0],rp=this.files.slice(1),[2,new Promise(function(lp,up){var cp=new FileReader;cp.onload=function(dp){var fp=JSON.parse(dp.target.result),pp=fp.modelTopology;if(pp!=null){rp.length===0&&lp({modelTopology:pp});var hp=fp.weightsManifest;if(hp!=null){var mp;try{mp=ap.checkManifestAndWeightFiles(hp,rp)}catch(Sp){return void up(Sp)}var gp=[],vp=[],xp=[];hp.forEach(function(Sp){Sp.paths.forEach(function(yp){vp.push(yp),xp.push(null)}),gp.push.apply(gp,Sp.weights)}),hp.forEach(function(Sp){Sp.paths.forEach(function(yp){var bp=new FileReader;bp.onload=function(Ep){var wp=Ep.target.result,_p=vp.indexOf(yp);xp[_p]=wp,xp.indexOf(null)===-1&&lp({modelTopology:pp,weightSpecs:gp,weightData:Lh(xp)})},bp.onerror=function(Ep){return up("Failed to weights data from file of path '"+yp+"'.")},bp.readAsArrayBuffer(mp[yp])})})}else up(new Error("weightManifest field is missing from file "+np.name))}else up(new Error("modelTopology field is missing from file "+np.name))},cp.onerror=function(dp){return up("Failed to read model topology and weights manifest JSON from file '"+np.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},cp.readAsText(np)})]})})},_d.prototype.checkManifestAndWeightFiles=function(np,rp){for(var ap=[],sp=rp.map(function(dp){return Wh(dp.name)}),lp={},up=0,cp=np;up<cp.length;up++)cp[up].paths.forEach(function(dp){var fp=Wh(dp);if(ap.indexOf(fp)!==-1)throw new Error("Duplicate file basename found in weights manifest: '"+fp+"'");if(ap.push(fp),sp.indexOf(fp)===-1)throw new Error("Weight file with basename '"+fp+"' is not provided.");lp[dp]=rp[sp.indexOf(fp)]});if(ap.length!==rp.length)throw new Error("Mismatch in the number of files in weights manifest ("+ap.length+") and the number of weight files provided ("+rp.length+").");return lp},_d}();function yf(_d,np,rp,ap){(function(lp){g(lp!=null&&Array.isArray(lp)&&lp.length>0,function(){return"promises must be a none empty array"})})(_d),function(lp,up){g(lp>=0&&lp<=1,function(){return"Progress fraction must be in range [0, 1], but got startFraction "+lp}),g(up>=0&&up<=1,function(){return"Progress fraction must be in range [0, 1], but got endFraction "+up}),g(up>=lp,function(){return"startFraction must be no more than endFraction, but got startFraction "+lp+" and endFraction "+up})}(rp=rp??0,ap=ap??1);var sp=0;return Promise.all(_d.map(function(lp){return lp.then(function(up){var cp=rp+ ++sp/_d.length*(ap-rp);return np(cp),up}),lp}))}function xf(_d,np){return n$1(this,void 0,void 0,function(){var rp,ap,sp,lp,up,cp,dp,fp,pp;return r(this,function(hp){switch(hp.label){case 0:return np==null&&(np={}),rp=np.fetchFunc==null?a$1().platform.fetch:np.fetchFunc,ap=_d.map(function(mp){return rp(mp,np.requestInit,{isBinary:!0})}),sp=0,lp=.5,np.onProgress!=null?[3,2]:[4,Promise.all(ap)];case 1:return up=hp.sent(),[3,4];case 2:return[4,yf(ap,np.onProgress,sp,lp)];case 3:up=hp.sent(),hp.label=4;case 4:return cp=up.map(function(mp){return mp.arrayBuffer()}),dp=.5,fp=1,np.onProgress!=null?[3,6]:[4,Promise.all(cp)];case 5:return pp=hp.sent(),[3,8];case 6:return[4,yf(cp,np.onProgress,dp,fp)];case 7:pp=hp.sent(),hp.label=8;case 8:return[2,pp]}})})}function bf(_d){var np=this;return function(rp,ap,sp){return ap===void 0&&(ap=""),n$1(np,void 0,void 0,function(){var lp,up,cp,dp,fp,pp,hp,mp,gp,vp;return r(this,function(xp){switch(xp.label){case 0:if(lp=rp.map(function(){return!1}),up={},cp=sp!=null?sp.map(function(){return!1}):[],dp=[],rp.forEach(function(Sp,yp){var bp=0;Sp.weights.forEach(function(Ep){var wp="quantization"in Ep?Ep.quantization.dtype:Ep.dtype,_p=Fh[wp]*w$1(Ep.shape),Cp=function(){lp[yp]=!0,up[yp]==null&&(up[yp]=[]),up[yp].push({manifestEntry:Ep,groupOffset:bp,sizeBytes:_p})};sp!=null?sp.forEach(function($p,Rp){$p===Ep.name&&(Cp(),cp[Rp]=!0)}):Cp(),dp.push(Ep.name),bp+=_p})}),!cp.every(function(Sp){return Sp}))throw fp=sp.filter(function(Sp,yp){return!cp[yp]}),new Error("Could not find weights in manifest with names: "+fp.join(", ")+`. 
Manifest JSON has weights with names: `+dp.join(", ")+".");return pp=lp.reduce(function(Sp,yp,bp){return yp&&Sp.push(bp),Sp},[]),hp=[],pp.forEach(function(Sp){rp[Sp].paths.forEach(function(yp){var bp=ap+(ap.endsWith("/")?"":"/")+yp;hp.push(bp)})}),[4,_d(hp)];case 1:return mp=xp.sent(),gp={},vp=0,pp.forEach(function(Sp){for(var yp=rp[Sp].paths.length,bp=0,Ep=0;Ep<yp;Ep++)bp+=mp[vp+Ep].byteLength;for(var wp=new ArrayBuffer(bp),_p=new Uint8Array(wp),Cp=0,$p=0;$p<yp;$p++){var Rp=new Uint8Array(mp[vp+$p]);_p.set(Rp,Cp),Cp+=Rp.byteLength}up[Sp].forEach(function(Pp){var Op=_h(wp.slice(Pp.groupOffset,Pp.groupOffset+Pp.sizeBytes),[Pp.manifestEntry]);for(var jp in Op)gp[jp]=Op[jp]}),vp+=yp}),[2,gp]}})})}}Vh.registerSaveRouter(function(_d){return a$1().getBool("IS_BROWSER")&&!Array.isArray(_d)&&_d.startsWith(mf.URL_SCHEME)?(np=_d.slice(mf.URL_SCHEME.length),np===void 0&&(np="model"),new mf(np)):null;var np});var wf=function(){function _d(np,rp){if(this.DEFAULT_METHOD="POST",rp==null&&(rp={}),this.weightPathPrefix=rp.weightPathPrefix,this.onProgress=rp.onProgress,rp.fetchFunc!=null?(g(typeof rp.fetchFunc=="function",function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"}),this.fetch=rp.fetchFunc):this.fetch=a$1().platform.fetch,g(np!=null&&np.length>0,function(){return"URL path for http must not be null, undefined or empty."}),Array.isArray(np)&&g(np.length===2,function(){return"URL paths for http must have a length of 2, (actual length is "+np.length+")."}),this.path=np,rp.requestInit!=null&&rp.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=rp.requestInit||{}}return _d.prototype.save=function(np){return n$1(this,void 0,void 0,function(){var rp,ap,sp,lp;return r(this,function(up){switch(up.label){case 0:if(np.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(rp=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,ap=[{paths:["./model.weights.bin"],weights:np.weightSpecs}],sp={modelTopology:np.modelTopology,format:np.format,generatedBy:np.generatedBy,convertedBy:np.convertedBy,userDefinedMetadata:np.userDefinedMetadata,weightsManifest:ap},rp.body.append("model.json",new Blob([JSON.stringify(sp)],{type:"application/json"}),"model.json"),np.weightData!=null&&rp.body.append("model.weights.bin",new Blob([np.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,this.fetch(this.path,rp)];case 1:if((lp=up.sent()).ok)return[2,{modelArtifactsInfo:Uh(np),responses:[lp]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+lp.status+".")}})})},_d.prototype.load=function(){return n$1(this,void 0,void 0,function(){var np,rp,ap,sp,lp,up,cp,dp;return r(this,function(fp){switch(fp.label){case 0:return[4,this.fetch(this.path,this.requestInit)];case 1:if(!(np=fp.sent()).ok)throw new Error("Request to "+this.path+" failed with status code "+np.status+". Please verify this URL points to the model JSON of the model to load.");fp.label=2;case 2:return fp.trys.push([2,4,,5]),[4,np.json()];case 3:return rp=fp.sent(),[3,5];case 4:throw fp.sent(),ap="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?ap+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":ap+=" Please make sure the server is serving valid JSON for this request.",new Error(ap);case 5:if(sp=rp.modelTopology,lp=rp.weightsManifest,sp==null&&lp==null)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return lp==null?[3,7]:[4,this.loadWeights(lp)];case 6:dp=fp.sent(),up=dp[0],cp=dp[1],fp.label=7;case 7:return[2,{modelTopology:sp,weightSpecs:up,weightData:cp}]}})})},_d.prototype.loadWeights=function(np){return n$1(this,void 0,void 0,function(){var rp,ap,sp,lp,up,cp,dp,fp,pp,hp,mp;return r(this,function(gp){switch(gp.label){case 0:for(rp=Array.isArray(this.path)?this.path[1]:this.path,ap=function(vp){var xp=vp.lastIndexOf("/"),Sp=vp.lastIndexOf("?"),yp=vp.substring(0,xp),bp=Sp>xp?vp.substring(Sp):"";return[yp+"/",bp]}(rp),sp=ap[0],lp=ap[1],up=this.weightPathPrefix||sp,cp=[],dp=0,fp=np;dp<fp.length;dp++)pp=fp[dp],cp.push.apply(cp,pp.weights);return hp=[],np.forEach(function(vp){vp.paths.forEach(function(xp){hp.push(up+xp+lp)})}),[4,xf(hp,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})];case 1:return mp=gp.sent(),[2,[cp,Lh(mp)]]}})})},_d.URL_SCHEME_REGEX=/^https?:\/\//,_d}();function Cf(_d){return _d.match(wf.URL_SCHEME_REGEX)!=null}var Ef=function(_d,np){return typeof fetch>"u"?null:(Array.isArray(_d)?_d.every(function(rp){return Cf(rp)}):Cf(_d))?Rf(_d,{onProgress:np}):null};function Rf(_d,np){return new wf(_d,np)}Vh.registerSaveRouter(Ef),Vh.registerLoadRouter(Ef);var If=function(){function _d(np){this.modelArtifacts=np}return _d.prototype.load=function(){return n$1(this,void 0,void 0,function(){return r(this,function(np){return[2,this.modelArtifacts]})})},_d}(),kf=function(){function _d(np){this.saveHandler=np}return _d.prototype.save=function(np){return n$1(this,void 0,void 0,function(){return r(this,function(rp){return[2,this.saveHandler(np)]})})},_d}(),Sf=Object.freeze({browserFiles:function(_d){return new gf(_d)},browserHTTPRequest:function(_d,np){return Rf(_d,np)},concatenateArrayBuffers:Lh,decodeWeights:_h,encodeWeights:function(_d,np){return n$1(this,void 0,void 0,function(){var rp,ap,sp,lp,up,cp=this;return r(this,function(dp){switch(dp.label){case 0:for(rp=[],ap=[],sp=Array.isArray(_d)?_d.map(function(fp){return fp.name}):Object.keys(_d),lp=function(fp){var pp=sp[fp],hp=Array.isArray(_d)?_d[fp].tensor:_d[pp];if(hp.dtype!=="float32"&&hp.dtype!=="int32"&&hp.dtype!=="bool"&&hp.dtype!=="string")throw new Error("Unsupported dtype in weight '"+pp+"': "+hp.dtype);var mp={name:pp,shape:hp.shape,dtype:hp.dtype};if(hp.dtype==="string"){var gp=new Promise(function(vp){return n$1(cp,void 0,void 0,function(){var xp,Sp,yp,bp,Ep,wp,_p;return r(this,function(Cp){switch(Cp.label){case 0:return[4,hp.bytes()];case 1:for(xp=Cp.sent(),Sp=xp.reduce(function($p,Rp){return $p+Rp.length},0)+Oh*xp.length,yp=new Uint8Array(Sp),bp=0,Ep=0;Ep<xp.length;Ep++)wp=xp[Ep],_p=new Uint8Array(new Uint32Array([wp.length]).buffer),yp.set(_p,bp),bp+=Oh,yp.set(wp,bp),bp+=wp.length;return vp(yp),[2]}})})});ap.push(gp)}else ap.push(hp.data());np!=null&&(mp.group=np),rp.push(mp)},up=0;up<sp.length;++up)lp(up);return[4,Promise.all(ap)];case 1:return[2,{data:Mh(dp.sent()),specs:rp}]}})})},fromMemory:function(_d,np,rp,ap){return arguments.length===1?_d.modelTopology!=null||_d.weightSpecs!=null?new If(_d):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new If({modelTopology:_d})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new If({modelTopology:_d,weightSpecs:np,weightData:rp,trainingConfig:ap}))},getLoadHandlers:function(_d,np){return Vh.getLoadHandlers(_d,np)},getModelArtifactsInfoForJSON:Uh,getSaveHandlers:function(_d){return Vh.getSaveHandlers(_d)},http:Rf,isHTTPScheme:Cf,loadWeights:function(_d,np,rp,ap){return np===void 0&&(np=""),n$1(this,void 0,void 0,function(){return r(this,function(sp){return[2,bf(function(lp){return xf(lp,{requestInit:ap})})(_d,np,rp)]})})},registerLoadRouter:function(_d){return Vh.registerLoadRouter(_d)},registerSaveRouter:function(_d){return Vh.registerSaveRouter(_d)},weightsLoaderFactory:bf,withSaveHandler:function(_d){return new kf(_d)},copyModel:function(_d,np){return n$1(this,void 0,void 0,function(){return r(this,function(rp){return[2,qh(_d,np,!1)]})})},listModels:function(){return n$1(this,void 0,void 0,function(){var _d,np,rp,ap,sp,lp,up;return r(this,function(cp){switch(cp.label){case 0:_d=Gh.getSchemes(),np={},rp=0,ap=_d,cp.label=1;case 1:return rp<ap.length?(sp=ap[rp],[4,Gh.getManager(sp).listModels()]):[3,4];case 2:for(up in lp=cp.sent())np[sp+zh+up]=lp[up];cp.label=3;case 3:return rp++,[3,1];case 4:return[2,np]}})})},moveModel:function(_d,np){return n$1(this,void 0,void 0,function(){return r(this,function(rp){return[2,qh(_d,np,!0)]})})},removeModel:function(_d){return n$1(this,void 0,void 0,function(){var np;return r(this,function(rp){return np=Hh(_d),[2,Gh.getManager(np.scheme).removeModel(np.path)]})})}}),Af=Cn({confusionMatrix_:function(_d,np,rp){var ap=ln(_d,"labels","confusionMatrix"),sp=ln(np,"predictions","confusionMatrix");g(rp==null||rp>0&&Number.isInteger(rp),function(){return"If provided, numClasses must be a positive integer, but got "+rp}),g(ap.rank===1,function(){return"Expected the rank of labels to be 1, but got "+ap.rank}),g(sp.rank===1,function(){return"Expected the rank of predictions to be 1, but got "+sp.rank}),g(ap.shape[0]===sp.shape[0],function(){return"Mismatch in the number of examples: "+ap.shape[0]+" vs. "+sp.shape[0]+". Labels and predictions should have the same number of elements."}),g(rp>0&&Number.isInteger(rp),function(){return"numClasses is required to be a positive integer, but got "+rp});var lp=gr(ap.asType("int32"),rp),up=gr(sp.asType("int32"),rp);return lp.transpose().matMul(up).asType("int32")}}),Df=Object.freeze({confusionMatrix:Af}),Tf=Cn({fromPixels_:function(_d,np){if(np===void 0&&(np=3),np>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");var rp=typeof HTMLVideoElement<"u"&&_d instanceof HTMLVideoElement;if(rp&&rp&&_d.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.");return Nt.fromPixels(_d,np)}}),Nf=Object.freeze({toPixels:function(_d,np){return n$1(this,void 0,void 0,function(){var rp,ap,sp,lp,up,cp,dp,fp,pp,hp,mp,gp,vp,xp,Sp,yp,bp,Ep,wp,_p,Cp,$p,Rp;return r(this,function(Pp){switch(Pp.label){case 0:if(rp=ln(_d,"img","toPixels"),_d instanceof dt||(rp=rp.toInt()),rp.rank!==2&&rp.rank!==3)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+rp.rank+".");if(ap=rp.shape.slice(0,2),sp=ap[0],lp=ap[1],(up=rp.rank===2?1:rp.shape[2])>4||up===2)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+up);return[4,rp.data()];case 1:return cp=Pp.sent(),dp=rp.min(),fp=rp.max(),[4,Promise.all([dp.data(),fp.data()])];case 2:if(pp=Pp.sent(),hp=pp[0],mp=pp[1],gp=hp[0],vp=mp[0],dp.dispose(),fp.dispose(),rp.dtype==="float32"){if(gp<0||vp>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+gp+" - "+vp+"].")}else{if(rp.dtype!=="int32")throw new Error("Unsupported type for toPixels: "+rp.dtype+". Please use float32 or int32 tensors.");if(gp<0||vp>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+gp+" - "+vp+"].")}for(xp=rp.dtype==="float32"?255:1,Sp=new Uint8ClampedArray(lp*sp*4),yp=0;yp<sp*lp;++yp)bp=void 0,Ep=void 0,wp=void 0,_p=void 0,up===1?(bp=cp[yp]*xp,Ep=cp[yp]*xp,wp=cp[yp]*xp,_p=255):up===3?(bp=cp[3*yp]*xp,Ep=cp[3*yp+1]*xp,wp=cp[3*yp+2]*xp,_p=255):up===4&&(bp=cp[4*yp]*xp,Ep=cp[4*yp+1]*xp,wp=cp[4*yp+2]*xp,_p=cp[4*yp+3]*xp),Sp[0+(Cp=4*yp)]=Math.round(bp),Sp[Cp+1]=Math.round(Ep),Sp[Cp+2]=Math.round(wp),Sp[Cp+3]=Math.round(_p);return np!=null&&(np.width=lp,np.height=sp,$p=np.getContext("2d"),Rp=new ImageData(Sp,lp,sp),$p.putImageData(Rp,0,0)),rp!==_d&&rp.dispose(),[2,Sp]}})})},fromPixels:Tf}),Ff=function(){function _d(){}return _d.prototype.getClassName=function(){return this.constructor.className},_d.fromConfig=function(np,rp){return new np(rp)},_d}(),Of=function(){function _d(){this.classNameMap={}}return _d.getMap=function(){return _d.instance==null&&(_d.instance=new _d),_d.instance},_d.register=function(np){_d.getMap().classNameMap[np.className]=[np,np.fromConfig]},_d}();function _f(_d){g(_d.className!=null,function(){return"Class being registered does not have the static className property defined."}),g(typeof _d.className=="string",function(){return"className is required to be a string, but got type "+typeof _d.className}),g(_d.className.length>0,function(){return"Class being registered has an empty-string as its className, which is disallowed."}),Of.register(_d)}var Mf=Object.freeze({Serializable:Ff,SerializationMap:Of,registerClass:_f}),Bf=.001,Pf=.1;function Lf(){return Nt.backend.floatPrecision()===32?Bf:Pf}function Wf(_d,np,rp){var ap=!0;if((B(_d)||B(np))&&(ap=!1),B(_d)&&B(np)&&(ap=!0),ap){var sp=_d.constructor.name,lp=np.constructor.name;if(sp!==lp)throw new Error("Arrays are of different type. Actual: "+sp+". Expected: "+lp)}if(Array.isArray(_d)&&Array.isArray(np)){var up=sn(_d),cp=sn(np);if(!C(up,cp))throw new Error("Arrays have different shapes. Actual: ["+up+"]. Expected: ["+cp+"]")}var dp=B(_d)?_d:b(_d),fp=B(np)?np:b(np);if(dp.length!==fp.length)throw new Error("Arrays have different lengths actual: "+dp.length+" vs expected: "+fp.length+`.
Actual:   `+dp+`.
Expected: `+fp+".");for(var pp=0;pp<fp.length;++pp){var hp=dp[pp],mp=fp[pp];if(!rp(hp,mp))throw new Error("Arrays differ: actual["+pp+"] = "+hp+", expected["+pp+"] = "+mp+`.
Actual:   `+dp+`.
Expected: `+fp+".")}}function Uf(_d,np,rp){return!isFinite(_d)&&!isFinite(np)||!(isNaN(_d)||isNaN(np)||Math.abs(_d-np)>rp)}var Vf=Object.freeze({TEST_EPSILON_FLOAT16:Pf,expectArraysClose:function(_d,np,rp){return rp==null&&(rp=Lf()),Wf(_d,np,function(ap,sp){return Uf(ap,sp,rp)})},testEpsilon:Lf,expectPromiseToFail:function(_d,np){_d().then(function(){return np.fail()},function(){return np()})},expectArraysEqual:function(_d,np){var rp=typeof np=="string"||typeof np=="number"||typeof np=="boolean"?[np]:np;return W(_d)||W(_d[0])||W(np)||W(np[0])?Wf(_d,rp,function(ap,sp){return ap==sp}):Wf(_d,np,function(ap,sp){return Uf(ap,sp,0)})},expectNumbersClose:function(_d,np,rp){if(rp==null&&(rp=Lf()),!Uf(_d,np,rp))throw new Error("Numbers differ: actual === "+_d+", expected === "+np)},expectValuesInRange:function(_d,np,rp){for(var ap=0;ap<_d.length;ap++)if(_d[ap]<np||_d[ap]>rp)throw new Error("Value out of range:"+_d[ap]+" low: "+np+", high: "+rp)},expectArrayBuffersEqual:function(_d,np){expect(new Float32Array(_d)).toEqual(new Float32Array(np))}}),zf="1.3.1",Gf=Object.freeze({gpgpu_util:wi,webgl_util:Pe,forceHalfFloat:function(){a$1().set("WEBGL_FORCE_F16_TEXTURES",!0)},MathBackendWebGL:Wu,setWebGLContext:Wt,GPGPUContext:Ci}),Hf=function(_d){function np(){return _d!==null&&_d.apply(this,arguments)||this}return e(np,_d),np.prototype.minimize=function(rp,ap,sp){ap===void 0&&(ap=!1);var lp=this.computeGradients(rp,sp),up=lp.value,cp=lp.grads;if(sp!=null){var dp=sp.map(function(fp){return{name:fp.name,tensor:cp[fp.name]}});this.applyGradients(dp)}else this.applyGradients(cp);return Xe(cp),ap?up:(up.dispose(),null)},Object.defineProperty(np.prototype,"iterations",{get:function(){return this.iterations_==null&&(this.iterations_=0),this.iterations_},enumerable:!0,configurable:!0}),np.prototype.incrementIterations=function(){this.iterations_=this.iterations+1},np.prototype.computeGradients=function(rp,ap){return ro(rp,ap)},np.prototype.dispose=function(){this.iterations_!=null&&Xe(this.iterations_)},np.prototype.saveIterations=function(){return n$1(this,void 0,void 0,function(){return r(this,function(rp){return this.iterations_==null&&(this.iterations_=0),[2,{name:"iter",tensor:An(this.iterations_,"int32")}]})})},np.prototype.getWeights=function(){return n$1(this,void 0,void 0,function(){return r(this,function(rp){throw new Error("getWeights() is not implemented for this optimizer yet.")})})},np.prototype.setWeights=function(rp){return n$1(this,void 0,void 0,function(){return r(this,function(ap){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())})})},np.prototype.extractIterations=function(rp){return n$1(this,void 0,void 0,function(){var ap;return r(this,function(sp){switch(sp.label){case 0:return ap=this,[4,rp[0].tensor.data()];case 1:return ap.iterations_=sp.sent()[0],[2,rp.slice(1)]}})})},np}(Ff);Object.defineProperty(Hf,Symbol.hasInstance,{value:function(_d){return _d.minimize!=null&&_d.computeGradients!=null&&_d.applyGradients!=null}});var qf=function(_d){function np(rp,ap,sp){sp===void 0&&(sp=null);var lp=_d.call(this)||this;return lp.learningRate=rp,lp.rho=ap,lp.epsilon=sp,lp.accumulatedGrads=[],lp.accumulatedUpdates=[],sp==null&&(lp.epsilon=Nt.backend.epsilon()),lp}return e(np,_d),np.prototype.applyGradients=function(rp){var ap=this;(Array.isArray(rp)?rp.map(function(sp){return sp.name}):Object.keys(rp)).forEach(function(sp,lp){var up=Nt.registeredVariables[sp];ap.accumulatedGrads[lp]==null&&(ap.accumulatedGrads[lp]={originalName:sp+"/accum_grad",variable:je(function(){return zn(up).variable(!1)})}),ap.accumulatedUpdates[lp]==null&&(ap.accumulatedUpdates[lp]={originalName:sp+"/accum_var",variable:je(function(){return zn(up).variable(!1)})});var cp=Array.isArray(rp)?rp[lp].tensor:rp[sp];if(cp!=null){var dp=ap.accumulatedGrads[lp].variable,fp=ap.accumulatedUpdates[lp].variable;je(function(){var pp=dp.mul(ap.rho).add(cp.square().mul(1-ap.rho)),hp=fp.add(ap.epsilon).sqrt().div(dp.add(ap.epsilon).sqrt()).mul(cp),mp=fp.mul(ap.rho).add(hp.square().mul(1-ap.rho));dp.assign(pp),fp.assign(mp);var gp=hp.mul(-ap.learningRate).add(up);up.assign(gp)})}}),this.incrementIterations()},np.prototype.dispose=function(){this.accumulatedUpdates!=null&&(Xe(this.accumulatedGrads.map(function(rp){return rp.variable})),Xe(this.accumulatedUpdates.map(function(rp){return rp.variable})))},np.prototype.getWeights=function(){return n$1(this,void 0,void 0,function(){var rp;return r(this,function(ap){switch(ap.label){case 0:return rp=this.accumulatedGrads.concat(this.accumulatedUpdates),[4,this.saveIterations()];case 1:return[2,[ap.sent()].concat(rp.map(function(sp){return{name:sp.originalName,tensor:sp.variable}}))]}})})},np.prototype.setWeights=function(rp){return n$1(this,void 0,void 0,function(){var ap;return r(this,function(sp){switch(sp.label){case 0:return[4,this.extractIterations(rp)];case 1:return rp=sp.sent(),ap=rp.length/2,this.accumulatedGrads=rp.slice(0,ap).map(function(lp){return{originalName:lp.name,variable:lp.tensor.variable(!1)}}),this.accumulatedUpdates=rp.slice(ap,2*ap).map(function(lp){return{originalName:lp.name,variable:lp.tensor.variable(!1)}}),[2]}})})},np.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},np.fromConfig=function(rp,ap){return new rp(ap.learningRate,ap.rho,ap.epsilon)},np.className="Adadelta",np}(Hf);_f(qf);var Kf=function(_d){function np(rp,ap){ap===void 0&&(ap=.1);var sp=_d.call(this)||this;return sp.learningRate=rp,sp.initialAccumulatorValue=ap,sp.accumulatedGrads=[],sp}return e(np,_d),np.prototype.applyGradients=function(rp){var ap=this;(Array.isArray(rp)?rp.map(function(sp){return sp.name}):Object.keys(rp)).forEach(function(sp,lp){var up=Nt.registeredVariables[sp];ap.accumulatedGrads[lp]==null&&(ap.accumulatedGrads[lp]={originalName:sp+"/accumulator",variable:je(function(){return Ln(up.shape,ap.initialAccumulatorValue).variable(!1)})});var cp=Array.isArray(rp)?rp[lp].tensor:rp[sp];if(cp!=null){var dp=ap.accumulatedGrads[lp].variable;je(function(){var fp=dp.add(cp.square());dp.assign(fp);var pp=cp.div(fp.add(Nt.backend.epsilon()).sqrt()).mul(-ap.learningRate).add(up);up.assign(pp)})}}),this.incrementIterations()},np.prototype.dispose=function(){this.accumulatedGrads!=null&&Xe(this.accumulatedGrads.map(function(rp){return rp.variable}))},np.prototype.getWeights=function(){return n$1(this,void 0,void 0,function(){return r(this,function(rp){switch(rp.label){case 0:return[4,this.saveIterations()];case 1:return[2,[rp.sent()].concat(this.accumulatedGrads.map(function(ap){return{name:ap.originalName,tensor:ap.variable}}))]}})})},np.prototype.setWeights=function(rp){return n$1(this,void 0,void 0,function(){return r(this,function(ap){switch(ap.label){case 0:return[4,this.extractIterations(rp)];case 1:return rp=ap.sent(),this.accumulatedGrads=rp.map(function(sp){return{originalName:sp.name,variable:sp.tensor.variable(!1)}}),[2]}})})},np.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},np.fromConfig=function(rp,ap){return new rp(ap.learningRate,ap.initialAccumulatorValue)},np.className="Adagrad",np}(Hf);_f(Kf);var jf=function(_d){function np(rp,ap,sp,lp){lp===void 0&&(lp=null);var up=_d.call(this)||this;return up.learningRate=rp,up.beta1=ap,up.beta2=sp,up.epsilon=lp,up.accumulatedFirstMoment=[],up.accumulatedSecondMoment=[],je(function(){up.accBeta1=An(ap).variable(),up.accBeta2=An(sp).variable()}),lp==null&&(up.epsilon=Nt.backend.epsilon()),up}return e(np,_d),np.prototype.applyGradients=function(rp){var ap=this,sp=Array.isArray(rp)?rp.map(function(lp){return lp.name}):Object.keys(rp);je(function(){var lp=ic(1,ap.accBeta1),up=ic(1,ap.accBeta2);sp.forEach(function(cp,dp){var fp=Nt.registeredVariables[cp];ap.accumulatedFirstMoment[dp]==null&&(ap.accumulatedFirstMoment[dp]={originalName:cp+"/m",variable:je(function(){return zn(fp).variable(!1)})}),ap.accumulatedSecondMoment[dp]==null&&(ap.accumulatedSecondMoment[dp]={originalName:cp+"/v",variable:je(function(){return zn(fp).variable(!1)})});var pp=Array.isArray(rp)?rp[dp].tensor:rp[cp];if(pp!=null){var hp=ap.accumulatedFirstMoment[dp].variable,mp=ap.accumulatedSecondMoment[dp].variable,gp=hp.mul(ap.beta1).add(pp.mul(1-ap.beta1)),vp=mp.mul(ap.beta2).add(pp.square().mul(1-ap.beta2)),xp=gp.div(lp),Sp=vp.div(up);hp.assign(gp),mp.assign(vp);var yp=xp.div(Sp.sqrt().add(ap.epsilon)).mul(-ap.learningRate).add(fp);fp.assign(yp)}}),ap.accBeta1.assign(ap.accBeta1.mul(ap.beta1)),ap.accBeta2.assign(ap.accBeta2.mul(ap.beta2))}),this.incrementIterations()},np.prototype.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&Xe(this.accumulatedFirstMoment.map(function(rp){return rp.variable})),this.accumulatedSecondMoment!=null&&Xe(this.accumulatedSecondMoment.map(function(rp){return rp.variable}))},np.prototype.getWeights=function(){return n$1(this,void 0,void 0,function(){var rp;return r(this,function(ap){switch(ap.label){case 0:return rp=this.accumulatedFirstMoment.concat(this.accumulatedSecondMoment),[4,this.saveIterations()];case 1:return[2,[ap.sent()].concat(rp.map(function(sp){return{name:sp.originalName,tensor:sp.variable}}))]}})})},np.prototype.setWeights=function(rp){return n$1(this,void 0,void 0,function(){var ap,sp=this;return r(this,function(lp){switch(lp.label){case 0:return[4,this.extractIterations(rp)];case 1:return rp=lp.sent(),je(function(){sp.accBeta1.assign(nc(sp.beta1,sp.iterations_+1)),sp.accBeta2.assign(nc(sp.beta2,sp.iterations_+1))}),ap=rp.length/2,this.accumulatedFirstMoment=rp.slice(0,ap).map(function(up){return{originalName:up.name,variable:up.tensor.variable(!1)}}),this.accumulatedSecondMoment=rp.slice(ap,2*ap).map(function(up){return{originalName:up.name,variable:up.tensor.variable(!1)}}),[2]}})})},np.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},np.fromConfig=function(rp,ap){return new rp(ap.learningRate,ap.beta1,ap.beta2,ap.epsilon)},np.className="Adam",np}(Hf);_f(jf);var Xf=function(_d){function np(rp,ap,sp,lp,up){lp===void 0&&(lp=null),up===void 0&&(up=0);var cp=_d.call(this)||this;return cp.learningRate=rp,cp.beta1=ap,cp.beta2=sp,cp.epsilon=lp,cp.decay=up,cp.accumulatedFirstMoment=[],cp.accumulatedWeightedInfNorm=[],je(function(){cp.iteration=An(0).variable(),cp.accBeta1=An(ap).variable()}),lp==null&&(cp.epsilon=Nt.backend.epsilon()),cp}return e(np,_d),np.prototype.applyGradients=function(rp){var ap=this,sp=Array.isArray(rp)?rp.map(function(lp){return lp.name}):Object.keys(rp);je(function(){var lp=ic(1,ap.accBeta1),up=qs(-ap.learningRate,ap.iteration.mul(ap.decay).add(1));sp.forEach(function(cp,dp){var fp=Nt.registeredVariables[cp];ap.accumulatedFirstMoment[dp]==null&&(ap.accumulatedFirstMoment[dp]={originalName:cp+"/m",variable:zn(fp).variable(!1)}),ap.accumulatedWeightedInfNorm[dp]==null&&(ap.accumulatedWeightedInfNorm[dp]={originalName:cp+"/v",variable:zn(fp).variable(!1)});var pp=Array.isArray(rp)?rp[dp].tensor:rp[cp];if(pp!=null){var hp=ap.accumulatedFirstMoment[dp].variable,mp=ap.accumulatedWeightedInfNorm[dp].variable,gp=hp.mul(ap.beta1).add(pp.mul(1-ap.beta1)),vp=mp.mul(ap.beta2),xp=pp.abs(),Sp=vp.maximum(xp);hp.assign(gp),mp.assign(Sp);var yp=up.div(lp).mul(gp.div(Sp.add(ap.epsilon))).add(fp);fp.assign(yp)}}),ap.iteration.assign(ap.iteration.add(1)),ap.accBeta1.assign(ap.accBeta1.mul(ap.beta1))}),this.incrementIterations()},np.prototype.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&Xe(this.accumulatedFirstMoment.map(function(rp){return rp.variable})),this.accumulatedWeightedInfNorm!=null&&Xe(this.accumulatedWeightedInfNorm.map(function(rp){return rp.variable}))},np.prototype.getWeights=function(){return n$1(this,void 0,void 0,function(){return r(this,function(rp){throw new Error("getWeights() is not implemented for Adamax yet.")})})},np.prototype.setWeights=function(rp){return n$1(this,void 0,void 0,function(){return r(this,function(ap){throw new Error("setWeights() is not implemented for Adamax yet.")})})},np.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},np.fromConfig=function(rp,ap){return new rp(ap.learningRate,ap.beta1,ap.beta2,ap.epsilon,ap.decay)},np.className="Adamax",np}(Hf);_f(Xf);var $f=function(_d){function np(rp){var ap=_d.call(this)||this;return ap.learningRate=rp,ap.setLearningRate(rp),ap}return e(np,_d),np.prototype.applyGradients=function(rp){var ap=this;(Array.isArray(rp)?rp.map(function(sp){return sp.name}):Object.keys(rp)).forEach(function(sp,lp){var up=Array.isArray(rp)?rp[lp].tensor:rp[sp];if(up!=null){var cp=Nt.registeredVariables[sp];je(function(){var dp=ap.c.mul(up).add(cp);cp.assign(dp)})}}),this.incrementIterations()},np.prototype.setLearningRate=function(rp){this.learningRate=rp,this.c!=null&&this.c.dispose(),this.c=$e(An(-rp))},np.prototype.dispose=function(){this.c.dispose()},np.prototype.getWeights=function(){return n$1(this,void 0,void 0,function(){return r(this,function(rp){switch(rp.label){case 0:return[4,this.saveIterations()];case 1:return[2,[rp.sent()]]}})})},np.prototype.setWeights=function(rp){return n$1(this,void 0,void 0,function(){return r(this,function(ap){switch(ap.label){case 0:return[4,this.extractIterations(rp)];case 1:if((rp=ap.sent()).length!==0)throw new Error("SGD optimizer does not have settable weights.");return[2]}})})},np.prototype.getConfig=function(){return{learningRate:this.learningRate}},np.fromConfig=function(rp,ap){return new rp(ap.learningRate)},np.className="SGD",np}(Hf);_f($f);var Yf=function(_d){function np(rp,ap,sp){sp===void 0&&(sp=!1);var lp=_d.call(this,rp)||this;return lp.learningRate=rp,lp.momentum=ap,lp.useNesterov=sp,lp.accumulations=[],lp.m=An(lp.momentum),lp}return e(np,_d),np.prototype.applyGradients=function(rp){var ap=this;(Array.isArray(rp)?rp.map(function(sp){return sp.name}):Object.keys(rp)).forEach(function(sp,lp){var up=Nt.registeredVariables[sp];ap.accumulations[lp]==null&&(ap.accumulations[lp]={originalName:sp+"/momentum",variable:je(function(){return zn(up).variable(!1)})});var cp=ap.accumulations[lp].variable,dp=Array.isArray(rp)?rp[lp].tensor:rp[sp];dp!=null&&je(function(){var fp,pp=ap.m.mul(cp).add(dp);fp=ap.useNesterov?ap.c.mul(dp.add(pp.mul(ap.m))).add(up):ap.c.mul(pp).add(up),cp.assign(pp),up.assign(fp)})}),this.incrementIterations()},np.prototype.dispose=function(){this.m.dispose(),this.accumulations!=null&&Xe(this.accumulations.map(function(rp){return rp.variable}))},np.prototype.setMomentum=function(rp){this.momentum=rp},np.prototype.getWeights=function(){return n$1(this,void 0,void 0,function(){return r(this,function(rp){switch(rp.label){case 0:return[4,this.saveIterations()];case 1:return[2,[rp.sent()].concat(this.accumulations.map(function(ap){return{name:ap.originalName,tensor:ap.variable}}))]}})})},np.prototype.setWeights=function(rp){return n$1(this,void 0,void 0,function(){return r(this,function(ap){switch(ap.label){case 0:return[4,this.extractIterations(rp)];case 1:return rp=ap.sent(),this.accumulations=rp.map(function(sp){return{originalName:sp.name,variable:sp.tensor.variable(!1)}}),[2]}})})},np.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},np.fromConfig=function(rp,ap){return new rp(ap.learningRate,ap.momentum,ap.useNesterov)},np.className="Momentum",np}($f);_f(Yf);var Qf=function(_d){function np(rp,ap,sp,lp,up){ap===void 0&&(ap=.9),sp===void 0&&(sp=0),lp===void 0&&(lp=null),up===void 0&&(up=!1);var cp=_d.call(this)||this;return cp.learningRate=rp,cp.decay=ap,cp.momentum=sp,cp.epsilon=lp,cp.accumulatedMeanSquares=[],cp.accumulatedMoments=[],cp.accumulatedMeanGrads=[],cp.centered=up,lp==null&&(cp.epsilon=Nt.backend.epsilon()),cp}return e(np,_d),np.prototype.applyGradients=function(rp){var ap=this;(Array.isArray(rp)?rp.map(function(sp){return sp.name}):Object.keys(rp)).forEach(function(sp,lp){var up=Nt.registeredVariables[sp];ap.accumulatedMeanSquares[lp]==null&&(ap.accumulatedMeanSquares[lp]={originalName:sp+"/rms",variable:je(function(){return zn(up).variable(!1)})}),ap.accumulatedMoments[lp]==null&&(ap.accumulatedMoments[lp]={originalName:sp+"/momentum",variable:je(function(){return zn(up).variable(!1)})}),ap.accumulatedMeanGrads[lp]==null&&ap.centered&&(ap.accumulatedMeanGrads[lp]={originalName:sp+"/mg",variable:je(function(){return zn(up).variable(!1)})});var cp=Array.isArray(rp)?rp[lp].tensor:rp[sp];if(cp!=null){var dp=ap.accumulatedMeanSquares[lp].variable,fp=ap.accumulatedMoments[lp].variable;je(function(){var pp=dp.mul(ap.decay).add(cp.square().mul(1-ap.decay));if(ap.centered){var hp=ap.accumulatedMeanGrads[lp].variable,mp=hp.mul(ap.decay).add(cp.mul(1-ap.decay)),gp=fp.mul(ap.momentum).add(cp.mul(ap.learningRate).div(pp.sub(mp.square().add(ap.epsilon)).sqrt()));dp.assign(pp),hp.assign(mp),fp.assign(gp);var vp=up.sub(gp);up.assign(vp)}else{var xp=dp.mul(ap.decay).add(cp.square().mul(1-ap.decay));gp=fp.mul(ap.momentum).add(cp.mul(ap.learningRate).div(xp.add(ap.epsilon).sqrt())),dp.assign(xp),fp.assign(gp),vp=up.sub(gp),up.assign(vp)}})}}),this.incrementIterations()},np.prototype.dispose=function(){this.accumulatedMeanSquares!=null&&Xe(this.accumulatedMeanSquares.map(function(rp){return rp.variable})),this.accumulatedMeanGrads!=null&&this.centered&&Xe(this.accumulatedMeanGrads.map(function(rp){return rp.variable})),this.accumulatedMoments!=null&&Xe(this.accumulatedMoments.map(function(rp){return rp.variable}))},np.prototype.getWeights=function(){return n$1(this,void 0,void 0,function(){var rp;return r(this,function(ap){switch(ap.label){case 0:return rp=this.accumulatedMeanSquares.concat(this.accumulatedMoments),this.centered&&rp.push.apply(rp,this.accumulatedMeanGrads),[4,this.saveIterations()];case 1:return[2,[ap.sent()].concat(rp.map(function(sp){return{name:sp.originalName,tensor:sp.variable}}))]}})})},np.prototype.setWeights=function(rp){return n$1(this,void 0,void 0,function(){var ap;return r(this,function(sp){switch(sp.label){case 0:return[4,this.extractIterations(rp)];case 1:return rp=sp.sent(),ap=this.centered?rp.length/3:rp.length/2,this.accumulatedMeanSquares=rp.slice(0,ap).map(function(lp){return{originalName:lp.name,variable:lp.tensor.variable(!1)}}),this.accumulatedMoments=rp.slice(ap,2*ap).map(function(lp){return{originalName:lp.name,variable:lp.tensor.variable(!1)}}),this.centered&&(this.accumulatedMeanGrads=rp.slice(2*ap,3*ap).map(function(lp){return{originalName:lp.name,variable:lp.tensor.variable(!1)}})),[2]}})})},np.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},np.fromConfig=function(rp,ap){return new rp(ap.learningRate,ap.decay,ap.momentum,ap.epsilon,ap.centered)},np.className="RMSProp",np}(Hf);_f(Qf);var Jf=function(){function _d(){}return _d.sgd=function(np){return new $f(np)},_d.momentum=function(np,rp,ap){return ap===void 0&&(ap=!1),new Yf(np,rp,ap)},_d.rmsprop=function(np,rp,ap,sp,lp){return rp===void 0&&(rp=.9),ap===void 0&&(ap=0),sp===void 0&&(sp=null),lp===void 0&&(lp=!1),new Qf(np,rp,ap,sp,lp)},_d.adam=function(np,rp,ap,sp){return np===void 0&&(np=.001),rp===void 0&&(rp=.9),ap===void 0&&(ap=.999),sp===void 0&&(sp=null),new jf(np,rp,ap,sp)},_d.adadelta=function(np,rp,ap){return np===void 0&&(np=.001),rp===void 0&&(rp=.95),ap===void 0&&(ap=null),new qf(np,rp,ap)},_d.adamax=function(np,rp,ap,sp,lp){return np===void 0&&(np=.002),rp===void 0&&(rp=.9),ap===void 0&&(ap=.999),sp===void 0&&(sp=null),lp===void 0&&(lp=0),new Xf(np,rp,ap,sp,lp)},_d.adagrad=function(np,rp){return rp===void 0&&(rp=.1),new Kf(np,rp)},_d}(),Zf={sgd:Jf.sgd,momentum:Jf.momentum,adadelta:Jf.adadelta,adagrad:Jf.adagrad,rmsprop:Jf.rmsprop,adamax:Jf.adamax,adam:Jf.adam},tp=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:function(_d){return _d()};function ep(){return new Promise(function(_d){return tp(function(){return _d()})})}ft=Rh;/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var extendStatics$1=function(_d,np){return(extendStatics$1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(rp,ap){rp.__proto__=ap}||function(rp,ap){for(var sp in ap)ap.hasOwnProperty(sp)&&(rp[sp]=ap[sp])})(_d,np)};function __extends$h(_d,np){function rp(){this.constructor=_d}extendStatics$1(_d,np),_d.prototype=np===null?Object.create(np):(rp.prototype=np.prototype,new rp)}var _epsilon,__assign$2=function(){return(__assign$2=Object.assign||function(_d){for(var np,rp=1,ap=arguments.length;rp<ap;rp++)for(var sp in np=arguments[rp])Object.prototype.hasOwnProperty.call(np,sp)&&(_d[sp]=np[sp]);return _d}).apply(this,arguments)};function __awaiter$8(_d,np,rp,ap){return new(rp||(rp=Promise))(function(sp,lp){function up(fp){try{dp(ap.next(fp))}catch(pp){lp(pp)}}function cp(fp){try{dp(ap.throw(fp))}catch(pp){lp(pp)}}function dp(fp){fp.done?sp(fp.value):new rp(function(pp){pp(fp.value)}).then(up,cp)}dp((ap=ap.apply(_d,np||[])).next())})}function __generator$8(_d,np){var rp,ap,sp,lp,up={label:0,sent:function(){if(1&sp[0])throw sp[1];return sp[1]},trys:[],ops:[]};return lp={next:cp(0),throw:cp(1),return:cp(2)},typeof Symbol=="function"&&(lp[Symbol.iterator]=function(){return this}),lp;function cp(dp){return function(fp){return function(pp){if(rp)throw new TypeError("Generator is already executing.");for(;up;)try{if(rp=1,ap&&(sp=2&pp[0]?ap.return:pp[0]?ap.throw||((sp=ap.return)&&sp.call(ap),0):ap.next)&&!(sp=sp.call(ap,pp[1])).done)return sp;switch(ap=0,sp&&(pp=[2&pp[0],sp.value]),pp[0]){case 0:case 1:sp=pp;break;case 4:return up.label++,{value:pp[1],done:!1};case 5:up.label++,ap=pp[1],pp=[0];continue;case 7:pp=up.ops.pop(),up.trys.pop();continue;default:if(!(sp=(sp=up.trys).length>0&&sp[sp.length-1])&&(pp[0]===6||pp[0]===2)){up=0;continue}if(pp[0]===3&&(!sp||pp[1]>sp[0]&&pp[1]<sp[3])){up.label=pp[1];break}if(pp[0]===6&&up.label<sp[1]){up.label=sp[1],sp=pp;break}if(sp&&up.label<sp[2]){up.label=sp[2],up.ops.push(pp);break}sp[2]&&up.ops.pop(),up.trys.pop();continue}pp=np.call(_d,up)}catch(hp){pp=[6,hp],ap=0}finally{rp=sp=0}if(5&pp[0])throw pp[1];return{value:pp[0]?pp[1]:void 0,done:!0}}([dp,fp])}}}function epsilon(){return _epsilon==null&&(_epsilon=on().epsilon()),_epsilon}function imageDataFormat(){return"channelsLast"}var AttributeError=function(_d){function np(rp){var ap=_d.call(this,rp)||this;return Object.setPrototypeOf(ap,np.prototype),ap}return __extends$h(np,_d),np}(Error),RuntimeError=function(_d){function np(rp){var ap=_d.call(this,rp)||this;return Object.setPrototypeOf(ap,np.prototype),ap}return __extends$h(np,_d),np}(Error),ValueError=function(_d){function np(rp){var ap=_d.call(this,rp)||this;return Object.setPrototypeOf(ap,np.prototype),ap}return __extends$h(np,_d),np}(Error),NotImplementedError=function(_d){function np(rp){var ap=_d.call(this,rp)||this;return Object.setPrototypeOf(ap,np.prototype),ap}return __extends$h(np,_d),np}(Error),AssertionError=function(_d){function np(rp){var ap=_d.call(this,rp)||this;return Object.setPrototypeOf(ap,np.prototype),ap}return __extends$h(np,_d),np}(Error);(function(_d){function np(rp){var ap=_d.call(this,rp)||this;return Object.setPrototypeOf(ap,np.prototype),ap}return __extends$h(np,_d),np})(Error);function pyListRepeat(_d,np){if(Array.isArray(_d)){for(var rp=[],ap=0;ap<np;ap++)rp=rp.concat(_d);return rp}return(rp=new Array(np)).fill(_d),rp}function assert(_d,np){if(!_d)throw new AssertionError(np)}function count(_d,np){for(var rp=0,ap=0,sp=_d;ap<sp.length;ap++)sp[ap]===np&&rp++;return rp}function singletonOrArray(_d){return _d.length===1?_d[0]:_d}function toList(_d){return Array.isArray(_d)?_d:[_d]}function toSnakeCase(_d){var np=_d.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return np[0]!=="_"?np:"private"+np}function toCamelCase$1(_d){return _d.length<=1||_d.indexOf("_")===-1?_d:_d.replace(/[_]+(\w|$)/g,function(np,rp){return rp.toUpperCase()})}var _GLOBAL_CUSTOM_OBJECTS={};function serializeKerasObject(_d){if(_d==null)return null;var np={};return np.className=_d.getClassName(),np.config=_d.getConfig(),np}function convertNDArrayScalarsInConfig(_d){if(_d!=null&&typeof _d=="object")if(Array.isArray(_d))_d.forEach(function(lp){return convertNDArrayScalarsInConfig(lp)});else for(var np=0,rp=Object.keys(_d);np<rp.length;np++){var ap=rp[np],sp=_d[ap];sp!=null&&typeof sp=="object"&&(Array.isArray(sp)||sp.type!=="ndarray"||typeof sp.value!="number"?convertNDArrayScalarsInConfig(sp):_d[ap]=sp.value)}}function deserializeKerasObject(_d,np,rp,ap,sp){var lp,up,cp;if(np===void 0&&(np={}),rp===void 0&&(rp={}),ap===void 0&&(ap="object"),sp===void 0&&(sp=!1),typeof _d=="string"){var dp=_d,fp=void 0;if(dp in rp)fp=rp[dp];else if(dp in _GLOBAL_CUSTOM_OBJECTS)fp=_GLOBAL_CUSTOM_OBJECTS[dp];else if((fp=np[dp])==null)throw new ValueError("Unknown "+ap+": "+_d+`. This may be due to one of the following reasons:
1. The `+ap+` is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom `+ap+" is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().");return fp}var pp=_d;if(pp.className==null||pp.config==null)throw new ValueError(ap+": Improper config format: "+JSON.stringify(pp)+`.
'className' and 'config' must set.`);var hp=pp.className,mp=void 0,gp=void 0;if(hp in rp?(mp=(lp=rp[hp])[0],gp=lp[1]):hp in _GLOBAL_CUSTOM_OBJECTS?(mp=(up=_GLOBAL_CUSTOM_OBJECTS.className)[0],gp=up[1]):hp in np&&(mp=(cp=np[hp])[0],gp=cp[1]),mp==null)throw new ValueError("Unknown "+ap+": "+hp+`. This may be due to one of the following reasons:
1. The `+ap+` is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom `+ap+" is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().");if(gp!=null){for(var vp={},xp=0,Sp=Object.keys(_GLOBAL_CUSTOM_OBJECTS);xp<Sp.length;xp++)vp[Cp=Sp[xp]]=_GLOBAL_CUSTOM_OBJECTS[Cp];for(var yp=0,bp=Object.keys(rp);yp<bp.length;yp++)vp[Cp=bp[yp]]=rp[Cp];pp.config.customObjects=vp;for(var Ep=__assign$2({},_GLOBAL_CUSTOM_OBJECTS),wp=0,_p=Object.keys(rp);wp<_p.length;wp++){var Cp=_p[wp];_GLOBAL_CUSTOM_OBJECTS[Cp]=rp[Cp]}convertNDArrayScalarsInConfig(pp.config);var $p=gp(mp,pp.config,rp,sp);return _GLOBAL_CUSTOM_OBJECTS=__assign$2({},Ep),$p}Ep=__assign$2({},_GLOBAL_CUSTOM_OBJECTS);for(var Rp=0,Pp=Object.keys(rp);Rp<Pp.length;Rp++)Cp=Pp[Rp],_GLOBAL_CUSTOM_OBJECTS[Cp]=rp[Cp];return $p=new mp(pp.config),_GLOBAL_CUSTOM_OBJECTS=__assign$2({},Ep),$p}function numberCompare(_d,np){return _d<np?-1:_d>np?1:0}function reverseNumberCompare(_d,np){return-1*numberCompare(_d,np)}function unique(_d){if(_d==null)return _d;for(var np=[],rp=0,ap=_d;rp<ap.length;rp++){var sp=ap[rp];np.indexOf(sp)===-1&&np.push(sp)}return np}function isObjectEmpty(_d){if(_d==null)throw new ValueError("Invalid value in obj: "+JSON.stringify(_d));for(var np in _d)if(_d.hasOwnProperty(np))return!1;return!0}function checkStringTypeUnionValue(_d,np,rp){if(rp!=null&&_d.indexOf(rp)<0)throw new ValueError(rp+" is not a valid "+np+".  Valid values are "+_d+" or null/undefined.")}function checkArrayTypeAndLength(_d,np,rp,ap){return rp===void 0&&(rp=0),ap===void 0&&(ap=1/0),assert(rp>=0),assert(ap>=rp),Array.isArray(_d)&&_d.length>=rp&&_d.length<=ap&&_d.every(function(sp){return typeof sp===np})}function assertPositiveInteger(_d,np){Array.isArray(_d)?(tt.assert(_d.length>0,function(){return np+" is unexpectedly an empty array."}),_d.forEach(function(rp,ap){return assertPositiveInteger(rp,"element "+(ap+1)+" of "+np)})):tt.assert(Number.isInteger(_d)&&_d>0,function(){return"Expected "+np+" to be a positive integer, but got "+formatAsFriendlyString(_d)+"."})}function formatAsFriendlyString(_d){return _d===null?"null":Array.isArray(_d)?"["+_d.map(function(np){return formatAsFriendlyString(np)}).join(",")+"]":typeof _d=="string"?'"'+_d+'"':""+_d}function debounce(_d,np){var rp,ap=tt.now();return function(){for(var sp=[],lp=0;lp<arguments.length;lp++)sp[lp]=arguments[lp];var up=tt.now();return up-ap<np?rp:(ap=up,rp=_d.apply(void 0,sp))}}function mapActivationToFusedKernel(_d){return _d==="relu"?"relu":_d==="linear"?"linear":_d==="elu"?"elu":null}function calcL2Norms(_d,np){return je(function(){return gs(vl(ec(_d,_d),np,!0))})}var Constraint=function(_d){function np(){return _d!==null&&_d.apply(this,arguments)||this}return __extends$h(np,_d),np.prototype.getConfig=function(){return{}},np}(Mf.Serializable),MaxNorm=function(_d){function np(rp){var ap=_d.call(this)||this;return ap.defaultMaxValue=2,ap.defaultAxis=0,ap.maxValue=rp.maxValue!=null?rp.maxValue:ap.defaultMaxValue,ap.axis=rp.axis!=null?rp.axis:ap.defaultAxis,ap}return __extends$h(np,_d),np.prototype.apply=function(rp){var ap=this;return je(function(){var sp=calcL2Norms(rp,ap.axis),lp=$u(sp,0,ap.maxValue);return tc(rp,qs(lp,Vs(epsilon(),sp)))})},np.prototype.getConfig=function(){return{maxValue:this.maxValue,axis:this.axis}},np.className="MaxNorm",np}(Constraint);Mf.registerClass(MaxNorm);var UnitNorm=function(_d){function np(rp){var ap=_d.call(this)||this;return ap.defaultAxis=0,ap.axis=rp.axis!=null?rp.axis:ap.defaultAxis,ap}return __extends$h(np,_d),np.prototype.apply=function(rp){var ap=this;return je(function(){return qs(rp,Vs(epsilon(),calcL2Norms(rp,ap.axis)))})},np.prototype.getConfig=function(){return{axis:this.axis}},np.className="UnitNorm",np}(Constraint);Mf.registerClass(UnitNorm);var NonNeg=function(_d){function np(){return _d!==null&&_d.apply(this,arguments)||this}return __extends$h(np,_d),np.prototype.apply=function(rp){return bl(rp)},np.className="NonNeg",np}(Constraint);Mf.registerClass(NonNeg);var MinMaxNorm=function(_d){function np(rp){var ap=_d.call(this)||this;return ap.defaultMinValue=0,ap.defaultMaxValue=1,ap.defaultRate=1,ap.defaultAxis=0,ap.minValue=rp.minValue!=null?rp.minValue:ap.defaultMinValue,ap.maxValue=rp.maxValue!=null?rp.maxValue:ap.defaultMaxValue,ap.rate=rp.rate!=null?rp.rate:ap.defaultRate,ap.axis=rp.axis!=null?rp.axis:ap.defaultAxis,ap}return __extends$h(np,_d),np.prototype.apply=function(rp){var ap=this;return je(function(){var sp=calcL2Norms(rp,ap.axis),lp=Vs(tc(ap.rate,$u(sp,ap.minValue,ap.maxValue)),tc(1-ap.rate,sp));return tc(rp,qs(lp,Vs(epsilon(),sp)))})},np.prototype.getConfig=function(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}},np.className="MinMaxNorm",np}(Constraint);Mf.registerClass(MinMaxNorm);var CONSTRAINT_IDENTIFIER_REGISTRY_SYMBOL_MAP={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function serializeConstraint(_d){return serializeKerasObject(_d)}function deserializeConstraint(_d,np){return np===void 0&&(np={}),deserializeKerasObject(_d,Mf.SerializationMap.getMap().classNameMap,np,"constraint")}function getConstraint(_d){return _d==null?null:typeof _d=="string"?deserializeConstraint({className:_d in CONSTRAINT_IDENTIFIER_REGISTRY_SYMBOL_MAP?CONSTRAINT_IDENTIFIER_REGISTRY_SYMBOL_MAP[_d]:_d,config:{}}):_d instanceof Constraint?_d:deserializeConstraint(_d)}function maxNorm(_d){return new MaxNorm(_d)}function unitNorm(_d){return new UnitNorm(_d)}function nonNeg(){return new NonNeg}function minMaxNorm(_d){return new MinMaxNorm(_d)}var exports_constraints=Object.freeze({maxNorm,unitNorm,nonNeg,minMaxNorm}),VALID_DATA_FORMAT_VALUES=["channelsFirst","channelsLast"],VALID_PADDING_MODE_VALUES=["valid","same","causal"],VALID_POOL_MODE_VALUES=["max","avg"],VALID_BIDIRECTIONAL_MERGE_MODES=["sum","mul","concat","ave"],nameMap=new Map;function checkDataFormat(_d){checkStringTypeUnionValue(VALID_DATA_FORMAT_VALUES,"DataFormat",_d)}function checkPaddingMode(_d){checkStringTypeUnionValue(VALID_PADDING_MODE_VALUES,"PaddingMode",_d)}function checkPoolMode(_d){checkStringTypeUnionValue(VALID_POOL_MODE_VALUES,"PoolMode",_d)}var _nameScopeStack=[],_nameScopeDivider="/";function nameScope(_d,np){_nameScopeStack.push(_d);try{var rp=np();return _nameScopeStack.pop(),rp}catch(ap){throw _nameScopeStack.pop(),ap}}function currentNameScopePrefix(){return _nameScopeStack.length===0?"":_nameScopeStack.join(_nameScopeDivider)+_nameScopeDivider}function getScopedTensorName(_d){if(!isValidTensorName(_d))throw new Error("Not a valid tensor name: '"+_d+"'");return currentNameScopePrefix()+_d}function getUniqueTensorName(_d){if(!isValidTensorName(_d))throw new Error("Not a valid tensor name: '"+_d+"'");nameMap.has(_d)||nameMap.set(_d,0);var np=nameMap.get(_d);if(nameMap.set(_d,nameMap.get(_d)+1),np>0){var rp=_d+"_"+np;return nameMap.set(rp,1),rp}return _d}var tensorNameRegex=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function isValidTensorName(_d){return!!_d.match(tensorNameRegex)}function isInteger(_d){return _d===parseInt(_d.toString(),10)}function arrayProd(_d,np,rp){np==null&&(np=0),rp==null&&(rp=_d.length);for(var ap=1,sp=np;sp<rp;++sp)ap*=_d[sp];return ap}function toArray1D(_d){return _d=Array.isArray(_d)?new Float32Array(_d):_d,Dn(_d)}function min$1$1(_d){return pl(toArray1D(_d)).dataSync()[0]}function max$1(_d){return hl(toArray1D(_d)).dataSync()[0]}function range(_d,np){if(np<_d)throw new ValueError("end ("+np+") < begin ("+_d+") is forbidden.");for(var rp=[],ap=_d;ap<np;++ap)rp.push(ap);return rp}function cast$1(_d,np){return _d.asType(np)}function expandDims$1(_d,np){np===void 0&&(np=-1);var rp=_d.shape.slice();return np<0&&(np=rp.length+np+1),rp.splice(np,0,1),_d.reshape(rp)}function repeat(_d,np){return je(function(){if(_d.shape.length!==2)throw new ValueError("repeat() expects a rank-2 tensor, but received a rank-"+_d.shape.length+" tensor.");return tile$1(expandDims$1(_d,1),[1,np,1])})}function flatten(_d){var np=[arrayProd(_d.shape)];return _d.reshape(np)}function batchFlatten(_d){if(_d.rank<=1)throw new ValueError("batchFlatten requires a minimum rank of 2. Got rank: "+_d.rank+".");var np=[_d.shape[0],arrayProd(_d.shape,1)];return _d.reshape(np)}function sliceAlongFirstAxis(_d,np,rp){return je(function(){switch(_d.rank){case 1:return el(_d,np,rp);case 2:return nl(_d,[np,0],[rp,_d.shape[1]]);case 3:return rl(_d,[np,0,0],[rp,_d.shape[1],_d.shape[2]]);case 4:return ol(_d,[np,0,0,0],[rp,_d.shape[1],_d.shape[2],_d.shape[3]]);case 5:return tl(_d,[np,0,0,0,0],[rp,_d.shape[1],_d.shape[2],_d.shape[3],_d.shape[4]]);case 6:return tl(_d,[np,0,0,0,0,0],[rp,_d.shape[1],_d.shape[2],_d.shape[3],_d.shape[4],_d.shape[5]]);default:throw new ValueError("sliceAlongFirstAxis() received an unsupported tensor rank: "+_d.rank)}})}function sliceAlongLastAxis(_d,np,rp){return je(function(){switch(_d.rank){case 1:return el(_d,np,rp);case 2:return nl(_d,[0,np],[_d.shape[0],rp]);case 3:return rl(_d,[0,0,np],[_d.shape[0],_d.shape[1],rp]);case 4:return ol(_d,[0,0,0,np],[_d.shape[0],_d.shape[1],_d.shape[2],rp]);default:throw new ValueError("sliceAlongLastAxis() received an unsupported tensor rank: "+_d.rank)}})}function sliceAlongAxis(_d,np,rp,ap){return je(function(){switch(_d.rank){case 1:return el(_d,np,rp);case 2:switch(ap){case 1:return sliceAlongFirstAxis(_d,np,rp);case 2:return sliceAlongLastAxis(_d,np,rp);default:throw new ValueError("The axis is not within the rank of the tensor "+ap)}case 3:switch(ap){case 1:return sliceAlongFirstAxis(_d,np,rp);case 2:return rl(_d,[0,np,0],[_d.shape[0],rp,_d.shape[2]]);case 3:return sliceAlongLastAxis(_d,np,rp);default:throw new ValueError("The axis is not within the rank of the tensor "+ap)}case 4:switch(ap){case 1:return sliceAlongFirstAxis(_d,np,rp);case 2:return ol(_d,[0,np,0,0],[_d.shape[0],rp,_d.shape[2],_d.shape[3]]);case 3:return ol(_d,[0,0,np,0],[_d.shape[0],_d.shape[1],rp,_d.shape[3]]);case 4:return sliceAlongLastAxis(_d,np,rp);default:throw new ValueError("The axis is not within the rank of the tensor "+ap)}default:throw new ValueError("sliceAlongLastAxis() received an unsupported tensor rank: "+_d.rank)}})}function concatenate(_d,np){var rp;return np===void 0&&(np=-1),np<0&&(np=(rp=_d[0].rank)!==0?rp:0),np===_d[0].rank&&(np=-1),Gn(_d,np)}function concatAlongFirstAxis(_d,np){switch(_d.rank){case 1:return Hn([_d,np]);case 2:return qn([_d,np],0);case 3:return Kn([_d,np],0);case 4:return jn([_d,np],0);default:throw new ValueError("concatAlongFirstAxis() received an unsupported tensor rank: "+_d.rank)}}function tile$1(_d,np){if(Array.isArray(np)||(np=[np]),_d.rank!==np.length)throw new ValueError("The length of input n ("+np.length+") does not match the number of dimensions in input x ("+_d.rank+")");return Nr(_d,np)}function randomNormal$1(_d,np,rp,ap,sp){return np===void 0&&(np=0),rp===void 0&&(rp=1),Rr(_d,np,rp,ap,sp)}function dot(_d,np,rp,ap){if(_d.rank<2||np.rank<2)throw new NotImplementedError("dot requires both inputs to be rank >= 2 but got x shape = "+_d.shape+" and y shape = "+np.shape);if(np.rank>=3&&_d.shape.slice(-1)[0]!==(pp=np.shape.slice(-2)[0]))throw new NotImplementedError("If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = "+_d.shape+" and  y shape = "+np.shape);if(_d.rank===2&&np.rank===2){var sp=!1,lp=!1;return Eh.matMul({a:_d,b:np,transposeA:sp,transposeB:lp,bias:ap?reshapeBias(_d.rank,ap,imageDataFormat()):null,activation:rp})}var up=_d.shape.slice(),cp=up.pop();_d=_d.reshape([-1,cp]);var dp=np.shape.slice(),fp=dp.pop(),pp=dp.pop(),hp=dp.concat([fp]),mp=Array.from({length:np.rank},function(vp,xp){return xp===0?np.rank-2:xp<=np.rank-2?xp-1:xp});np=np.transpose(mp).reshape([pp,-1]);var gp=up.concat(hp);return sp=!1,lp=!1,Eh.matMul({a:_d,b:np,transposeA:sp,transposeB:lp,bias:ap?reshapeBias(_d.rank,ap,imageDataFormat()):null,activation:rp}).reshape(gp)}function gather$1(_d,np,rp){return je(function(){return np=Array.isArray(np)?Dn(np,"int32"):np.toInt(),Cc(_d,np,rp)})}function square(_d){return ec(_d,_d)}function reshapeBias(_d,np,rp){var ap=np.shape;if(np.rank!==1&&np.rank!==_d)throw new ValueError("Unexpected bias dimensions: "+np.rank+"; expected it to be 1 or "+_d);if(_d===5){if(rp==="channelsFirst")return ap.length===1?np.reshape([1,ap[0],1,1,1]):np.reshape([1,ap[3],ap[0],ap[1],ap[2]]);if(rp==="channelsLast")return ap.length===1?np.reshape([1,1,1,1,ap[0]]):np.reshape([1].concat(ap))}else if(_d===4){if(rp==="channelsFirst")return ap.length===1?np.reshape([1,ap[0],1,1]):np.reshape([1,ap[2],ap[0],ap[1]]);if(rp==="channelsLast")return ap.length===1?np.reshape([1,1,1,ap[0]]):np.reshape([1].concat(ap))}else if(_d===3){if(rp==="channelsFirst")return ap.length===1?np.reshape([1,ap[0],1]):np.reshape([1,ap[1],ap[0]]);if(rp==="channelsLast")return ap.length===1?np.reshape([1,1,ap[0]]):np.reshape([1].concat(ap))}else if(_d<3)return np;throw new ValueError("Unsupported input rank by biasAdd: "+np.rank)}function biasAdd(_d,np,rp){return je(function(){return rp==null&&(rp=imageDataFormat()),checkDataFormat(rp),_d.add(reshapeBias(_d.rank,np,rp))})}function elu$1(_d,np){if(np===void 0&&(np=1),np!==1)throw new NotImplementedError("Support for alpha values other than 1 ("+np+") is not implemented yet.");return gl(_d)}function softsign(_d){return je(function(){return qs(_d,Vu(_d).add(1))})}function dropout$1(_d,np,rp,ap){return je(function(){return Ul(_d,np,rp,ap)})}function hardSigmoid(_d){return je(function(){var np=Vs(.5,tc(.2,_d));return $u(np,0,1)})}function inTrainPhase(_d,np,rp){return rp===void 0&&(rp=!1),rp?_d():np()}var VALID_FAN_MODE_VALUES=["fanIn","fanOut","fanAvg"],VALID_DISTRIBUTION_VALUES=["normal","uniform","truncatedNormal"];function checkFanMode(_d){checkStringTypeUnionValue(VALID_FAN_MODE_VALUES,"FanMode",_d)}function checkDistribution(_d){checkStringTypeUnionValue(VALID_DISTRIBUTION_VALUES,"Distribution",_d)}var Initializer=function(_d){function np(){return _d!==null&&_d.apply(this,arguments)||this}return __extends$h(np,_d),np.prototype.fromConfigUsesCustomObjects=function(){return!1},np.prototype.getConfig=function(){return{}},np}(Mf.Serializable),Zeros=function(_d){function np(){return _d!==null&&_d.apply(this,arguments)||this}return __extends$h(np,_d),np.prototype.apply=function(rp,ap){return Pn(rp,ap)},np.className="Zeros",np}(Initializer);Mf.registerClass(Zeros);var Ones=function(_d){function np(){return _d!==null&&_d.apply(this,arguments)||this}return __extends$h(np,_d),np.prototype.apply=function(rp,ap){return Bn(rp,ap)},np.className="Ones",np}(Initializer);Mf.registerClass(Ones);var Constant=function(_d){function np(rp){var ap=_d.call(this)||this;if(typeof rp!="object")throw new ValueError("Expected argument of type ConstantConfig but got "+rp);if(rp.value===void 0)throw new ValueError("config must have value set but got "+rp);return ap.value=rp.value,ap}return __extends$h(np,_d),np.prototype.apply=function(rp,ap){var sp=this;return je(function(){return tc(An(sp.value),Bn(rp,ap))})},np.prototype.getConfig=function(){return{value:this.value}},np.className="Constant",np}(Initializer);Mf.registerClass(Constant);var RandomUniform=function(_d){function np(rp){var ap=_d.call(this)||this;return ap.DEFAULT_MINVAL=-.05,ap.DEFAULT_MAXVAL=.05,ap.minval=rp.minval||ap.DEFAULT_MINVAL,ap.maxval=rp.maxval||ap.DEFAULT_MAXVAL,ap.seed=rp.seed,ap}return __extends$h(np,_d),np.prototype.apply=function(rp,ap){return kr(rp,this.minval,this.maxval,ap)},np.prototype.getConfig=function(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}},np.className="RandomUniform",np}(Initializer);Mf.registerClass(RandomUniform);var RandomNormal=function(_d){function np(rp){var ap=_d.call(this)||this;return ap.DEFAULT_MEAN=0,ap.DEFAULT_STDDEV=.05,ap.mean=rp.mean||ap.DEFAULT_MEAN,ap.stddev=rp.stddev||ap.DEFAULT_STDDEV,ap.seed=rp.seed,ap}return __extends$h(np,_d),np.prototype.apply=function(rp,ap){if((ap=ap||"float32")!=="float32"&&ap!=="int32")throw new NotImplementedError("randomNormal does not support dType "+ap+".");return randomNormal$1(rp,this.mean,this.stddev,ap,this.seed)},np.prototype.getConfig=function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}},np.className="RandomNormal",np}(Initializer);Mf.registerClass(RandomNormal);var TruncatedNormal=function(_d){function np(rp){var ap=_d.call(this)||this;return ap.DEFAULT_MEAN=0,ap.DEFAULT_STDDEV=.05,ap.mean=rp.mean||ap.DEFAULT_MEAN,ap.stddev=rp.stddev||ap.DEFAULT_STDDEV,ap.seed=rp.seed,ap}return __extends$h(np,_d),np.prototype.apply=function(rp,ap){if((ap=ap||"float32")!=="float32"&&ap!=="int32")throw new NotImplementedError("truncatedNormal does not support dType "+ap+".");return Fr(rp,this.mean,this.stddev,ap,this.seed)},np.prototype.getConfig=function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}},np.className="TruncatedNormal",np}(Initializer);Mf.registerClass(TruncatedNormal);var Identity=function(_d){function np(rp){var ap=_d.call(this)||this;return ap.gain=rp.gain!=null?rp.gain:1,ap}return __extends$h(np,_d),np.prototype.apply=function(rp,ap){var sp=this;return je(function(){if(rp.length!==2||rp[0]!==rp[1])throw new ValueError("Identity matrix initializer can only be used for 2D square matrices.");return tc(sp.gain,vr(rp[0]))})},np.prototype.getConfig=function(){return{gain:this.gain}},np.className="Identity",np}(Initializer);function computeFans(_d,np){var rp,ap;if(np===void 0&&(np="channelsLast"),checkDataFormat(np),_d.length===2)rp=_d[0],ap=_d[1];else if([3,4,5].indexOf(_d.length)!==-1)if(np==="channelsFirst"){var sp=arrayProd(_d,2);rp=_d[1]*sp,ap=_d[0]*sp}else np==="channelsLast"&&(sp=arrayProd(_d,0,_d.length-2),rp=_d[_d.length-2]*sp,ap=_d[_d.length-1]*sp);else{var lp=arrayProd(_d);rp=Math.sqrt(lp),ap=Math.sqrt(lp)}return[rp,ap]}Mf.registerClass(Identity);var VarianceScaling=function(_d){function np(rp){var ap=_d.call(this)||this;if(rp.scale<0)throw new ValueError("scale must be a positive float. Got: "+rp.scale);return ap.scale=rp.scale==null?1:rp.scale,ap.mode=rp.mode==null?"fanIn":rp.mode,checkFanMode(ap.mode),ap.distribution=rp.distribution==null?"normal":rp.distribution,checkDistribution(ap.distribution),ap.seed=rp.seed,ap}return __extends$h(np,_d),np.prototype.apply=function(rp,ap){var sp=computeFans(rp),lp=sp[0],up=sp[1],cp=this.scale;if(this.mode==="fanIn"?cp/=Math.max(1,lp):this.mode==="fanOut"?cp/=Math.max(1,up):cp/=Math.max(1,(lp+up)/2),this.distribution==="normal"){var dp=Math.sqrt(cp);if((ap=ap||"float32")!=="float32"&&ap!=="int32")throw new NotImplementedError(this.getClassName()+" does not support dType "+ap+".");return Fr(rp,0,dp,ap,this.seed)}var fp=Math.sqrt(3*cp);return kr(rp,-fp,fp,ap)},np.prototype.getConfig=function(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}},np.className="VarianceScaling",np}(Initializer);Mf.registerClass(VarianceScaling);var GlorotUniform=function(_d){function np(rp){return _d.call(this,{scale:1,mode:"fanAvg",distribution:"uniform",seed:rp==null?null:rp.seed})||this}return __extends$h(np,_d),np.prototype.getClassName=function(){return VarianceScaling.className},np.className="GlorotUniform",np}(VarianceScaling);Mf.registerClass(GlorotUniform);var GlorotNormal=function(_d){function np(rp){return _d.call(this,{scale:1,mode:"fanAvg",distribution:"normal",seed:rp==null?null:rp.seed})||this}return __extends$h(np,_d),np.prototype.getClassName=function(){return VarianceScaling.className},np.className="GlorotNormal",np}(VarianceScaling);Mf.registerClass(GlorotNormal);var HeNormal=function(_d){function np(rp){return _d.call(this,{scale:2,mode:"fanIn",distribution:"normal",seed:rp==null?null:rp.seed})||this}return __extends$h(np,_d),np.prototype.getClassName=function(){return VarianceScaling.className},np.className="HeNormal",np}(VarianceScaling);Mf.registerClass(HeNormal);var HeUniform=function(_d){function np(rp){return _d.call(this,{scale:2,mode:"fanIn",distribution:"uniform",seed:rp==null?null:rp.seed})||this}return __extends$h(np,_d),np.prototype.getClassName=function(){return VarianceScaling.className},np.className="HeUniform",np}(VarianceScaling);Mf.registerClass(HeUniform);var LeCunNormal=function(_d){function np(rp){return _d.call(this,{scale:1,mode:"fanIn",distribution:"normal",seed:rp==null?null:rp.seed})||this}return __extends$h(np,_d),np.prototype.getClassName=function(){return VarianceScaling.className},np.className="LeCunNormal",np}(VarianceScaling);Mf.registerClass(LeCunNormal);var LeCunUniform=function(_d){function np(rp){return _d.call(this,{scale:1,mode:"fanIn",distribution:"uniform",seed:rp==null?null:rp.seed})||this}return __extends$h(np,_d),np.prototype.getClassName=function(){return VarianceScaling.className},np.className="LeCunNormal",np}(VarianceScaling);Mf.registerClass(LeCunUniform);var Orthogonal=function(_d){function np(rp){var ap=_d.call(this)||this;if(ap.DEFAULT_GAIN=1,ap.gain=rp.gain==null?ap.DEFAULT_GAIN:rp.gain,ap.seed=rp.seed,ap.seed!=null)throw new NotImplementedError("Random seed is not implemented for Orthogonal Initializer yet.");return ap}return __extends$h(np,_d),np.prototype.apply=function(rp,ap){var sp=this;return je(function(){if(rp.length!==2)throw new NotImplementedError("The Orthogonal Initializer does not support non-2D shapes yet.");rp[0]*rp[1]>2e3&&console.warn("Orthogonal initializer is being called on a matrix with more than 2000 ("+rp[0]*rp[1]+") elements: Slowness may result.");var lp=randomNormal$1(rp[0]>rp[1]?[rp[1],rp[0]]:rp,0,1,"float32"),up=sh.gramSchmidt(lp);return rp[0]>rp[1]&&(up=up.transpose()),tc(sp.gain,up)})},np.prototype.getConfig=function(){return{gain:this.gain,seed:this.seed}},np.className="Orthogonal",np}(Initializer);Mf.registerClass(Orthogonal);var INITIALIZER_IDENTIFIER_REGISTRY_SYMBOL_MAP={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function deserializeInitializer(_d,np){return np===void 0&&(np={}),deserializeKerasObject(_d,Mf.SerializationMap.getMap().classNameMap,np,"initializer")}function serializeInitializer(_d){return serializeKerasObject(_d)}function getInitializer(_d){if(typeof _d=="string"){var np=_d in INITIALIZER_IDENTIFIER_REGISTRY_SYMBOL_MAP?INITIALIZER_IDENTIFIER_REGISTRY_SYMBOL_MAP[_d]:_d;if(np==="GlorotNormal")return new GlorotNormal;if(np==="GlorotUniform")return new GlorotUniform;if(np==="HeNormal")return new HeNormal;if(np==="HeUniform")return new HeUniform;if(np==="LeCunNormal")return new LeCunNormal;if(np==="LeCunUniform")return new LeCunUniform;var rp={};return rp.className=np,rp.config={},deserializeInitializer(rp)}return _d instanceof Initializer?_d:deserializeInitializer(_d)}function zeros$1(){return new Zeros}function ones$1(){return new Ones}function constant(_d){return new Constant(_d)}function randomUniform$1(_d){return new RandomUniform(_d)}function randomNormal$2(_d){return new RandomNormal(_d)}function truncatedNormal$1(_d){return new TruncatedNormal(_d)}function identity(_d){return new Identity(_d)}function varianceScaling(_d){return new VarianceScaling(_d)}function glorotUniform(_d){return new GlorotUniform(_d)}function glorotNormal(_d){return new GlorotNormal(_d)}function heNormal(_d){return new HeNormal(_d)}function heUniform(_d){return new HeUniform(_d)}function leCunNormal(_d){return new LeCunNormal(_d)}function leCunUniform(_d){return new LeCunUniform(_d)}function orthogonal(_d){return new Orthogonal(_d)}var exports_initializers=Object.freeze({zeros:zeros$1,ones:ones$1,constant,randomUniform:randomUniform$1,randomNormal:randomNormal$2,truncatedNormal:truncatedNormal$1,identity,varianceScaling,glorotUniform,glorotNormal,heNormal,heUniform,leCunNormal,leCunUniform,orthogonal}),_nextUniqueTensorId=0;function getNextUniqueTensorId(){return _nextUniqueTensorId++}var _uidPrefixes={};function getUid(_d){return _d===void 0&&(_d=""),_d in _uidPrefixes||(_uidPrefixes[_d]=0),_uidPrefixes[_d]+=1,_d+_uidPrefixes[_d].toString()}function isArrayOfShapes(_d){return Array.isArray(_d)&&Array.isArray(_d[0])}function normalizeShapeList(_d){return _d.length===0?[]:Array.isArray(_d[0])?_d:[_d]}function getExactlyOneTensor(_d){var np;if(Array.isArray(_d)){if(_d.length!==1)throw new ValueError("Expected Tensor length to be 1; got "+_d.length);np=_d[0]}else np=_d;return np}function getExactlyOneShape(_d){if(Array.isArray(_d)&&Array.isArray(_d[0])){if(_d.length===1)return(_d=_d)[0];throw new ValueError("Expected exactly 1 Shape; got "+_d.length)}return _d}function countParamsInWeights(_d){for(var np=0,rp=0,ap=_d;rp<ap.length;rp++){var sp=ap[rp];sp.shape.length===0?np+=1:np+=sp.shape.reduce(function(lp,up){return lp*up})}return np}var DEFAULT_VARIABLE_NAME_PREFIX="Variable",LayerVariable=function(){function _d(np,rp,ap,sp,lp){rp===void 0&&(rp="float32"),ap===void 0&&(ap=DEFAULT_VARIABLE_NAME_PREFIX),sp===void 0&&(sp=!0),lp===void 0&&(lp=null),this.dtype=rp??"float32",this.shape=np.shape,this.id=getNextUniqueTensorId(),ap=ap??DEFAULT_VARIABLE_NAME_PREFIX,this.originalName=getScopedTensorName(ap),this.name=getUniqueTensorName(this.originalName),this.trainable_=sp,this.constraint=lp,this.val=Mn(np,this.trainable_,this.name,this.dtype)}return _d.prototype.read=function(){return this.assertNotDisposed(),this.val},_d.prototype.write=function(np){return this.assertNotDisposed(),checkShapesMatch(this.val,np),this.val.id!==np.id&&(this.val.assign(np),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this},_d.prototype.dispose=function(){this.assertNotDisposed(),this.val.dispose()},_d.prototype.assertNotDisposed=function(){if(this.val.isDisposed)throw new Error("LayersVariable "+this.name+" is already disposed.")},Object.defineProperty(_d.prototype,"trainable",{get:function(){return this.trainable_},set:function(np){this.trainable_=np,this.val.trainable=np},enumerable:!0,configurable:!0}),_d}();function checkShapesMatch(_d,np){if(_d.shape.toString()!==np.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(_d.shape)+" vs. "+JSON.stringify(np.shape))}function batchGetValue(_d){return _d.map(function(np){return np.read()})}function batchSetValue(_d){_d.forEach(function(np){np[0].write(np[1])})}var InputSpec=function(){return function(_d){this.dtype=_d.dtype,this.shape=_d.shape,_d.shape!=null?this.ndim=_d.shape.length:this.ndim=_d.ndim,this.maxNDim=_d.maxNDim,this.minNDim=_d.minNDim,this.axes=_d.axes||{}}}(),SymbolicTensor=function(){return function(_d,np,rp,ap,sp,lp,up){this.dtype=_d,this.shape=np,this.sourceLayer=rp,this.inputs=ap,this.callArgs=sp,this.outputTensorIndex=up,this.id=getNextUniqueTensorId(),lp!=null&&(this.originalName=getScopedTensorName(lp),this.name=getUniqueTensorName(this.originalName)),this.rank=np.length}}(),_nextNodeID=0,Node=function(){function _d(np,rp){this.callArgs=rp,this.id=_nextNodeID++,this.outboundLayer=np.outboundLayer,this.inboundLayers=np.inboundLayers,this.nodeIndices=np.nodeIndices,this.tensorIndices=np.tensorIndices,this.inputTensors=np.inputTensors,this.outputTensors=np.outputTensors,this.inputMasks=np.inputMasks,this.outputMasks=np.outputMasks,this.inputShapes=np.inputShapes,this.outputShapes=np.outputShapes;for(var ap=0,sp=np.inboundLayers;ap<sp.length;ap++){var lp=sp[ap];lp!=null&&lp.outboundNodes.push(this)}np.outboundLayer.inboundNodes.push(this)}return _d.prototype.getConfig=function(){for(var np=[],rp=0,ap=this.inboundLayers;rp<ap.length;rp++){var sp=ap[rp];sp!=null?np.push(sp.name):np.push(null)}return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:np,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}},_d}(),_nextLayerID=0,Layer=function(_d){function np(rp){var ap=_d.call(this)||this;ap._callHook=null,ap._addedWeightNames=[],ap._stateful=!1,ap.id=_nextLayerID++,ap.activityRegularizer=null,ap.inputSpec=null,ap.supportsMasking=!1,ap._trainableWeights=[],ap._nonTrainableWeights=[],ap._losses=[],ap._updates=[],ap._built=!1,ap.inboundNodes=[],ap.outboundNodes=[];var sp=rp.name;if(!sp){var lp=ap.getClassName();sp=toSnakeCase(lp)+"_"+getUid(lp)}if(ap.name=sp,ap.trainable_=rp.trainable==null||rp.trainable,rp.inputShape!=null||rp.batchInputShape!=null){var up=void 0;if(rp.batchInputShape!=null)up=rp.batchInputShape;else if(rp.inputShape!=null){var cp=null;rp.batchSize!=null&&(cp=rp.batchSize),up=[cp].concat(rp.inputShape)}ap.batchInputShape=up;var dp=rp.dtype;dp==null&&(dp=rp.inputDType),dp==null&&(dp="float32"),ap.dtype=dp}return rp.weights!=null?ap.initialWeights=rp.weights:ap.initialWeights=null,ap._refCount=null,ap.fastWeightInitDuringBuild=!1,ap}return __extends$h(np,_d),np.nodeKey=function(rp,ap){return rp.name+"_ib-"+ap.toString()},np.prototype.getNodeAtIndex=function(rp,ap){if(this.inboundNodes.length===0)throw new RuntimeError("The layer has never been called and thus has no defined "+ap+".");if(this.inboundNodes.length<=rp)throw new ValueError("Asked to get "+ap+" at node "+rp+", but the layer has only "+this.inboundNodes.length+" inbound nodes.");return this.inboundNodes[rp]},np.prototype.getInputAt=function(rp){return singletonOrArray(this.getNodeAtIndex(rp,"input").inputTensors)},np.prototype.getOutputAt=function(rp){return singletonOrArray(this.getNodeAtIndex(rp,"output").outputTensors)},Object.defineProperty(np.prototype,"input",{get:function(){if(this.inboundNodes.length>1)throw new AttributeError("Layer "+this.name+' has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use `getInputAt(nodeIndex)` instead.');if(this.inboundNodes.length===0)throw new AttributeError("Layer "+this.name+" is not connected, no input to return.");return singletonOrArray(this.getNodeAtIndex(0,"input").inputTensors)},enumerable:!0,configurable:!0}),Object.defineProperty(np.prototype,"output",{get:function(){if(this.inboundNodes.length===0)throw new AttributeError("Layer "+this.name+" has no inbound nodes.");if(this.inboundNodes.length>1)throw new AttributeError("Layer "+this.name+' has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use `getOutputAt(nodeIndex)` instead.');return singletonOrArray(this.getNodeAtIndex(0,"output").outputTensors)},enumerable:!0,configurable:!0}),Object.defineProperty(np.prototype,"losses",{get:function(){return this._losses},enumerable:!0,configurable:!0}),np.prototype.calculateLosses=function(){return this.losses.map(function(rp){return rp()})},Object.defineProperty(np.prototype,"updates",{get:function(){return this._updates},enumerable:!0,configurable:!0}),Object.defineProperty(np.prototype,"built",{get:function(){return this._built},set:function(rp){this._built=rp},enumerable:!0,configurable:!0}),Object.defineProperty(np.prototype,"trainable",{get:function(){return this.trainable_},set:function(rp){this._trainableWeights.forEach(function(ap){return ap.trainable=rp}),this.trainable_=rp},enumerable:!0,configurable:!0}),Object.defineProperty(np.prototype,"trainableWeights",{get:function(){return this.trainable_?this._trainableWeights.filter(function(rp){return rp.trainable}):[]},set:function(rp){this._trainableWeights=rp},enumerable:!0,configurable:!0}),Object.defineProperty(np.prototype,"nonTrainableWeights",{get:function(){return this.trainable?this._trainableWeights.filter(function(rp){return!rp.trainable}).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)},set:function(rp){this._nonTrainableWeights=rp},enumerable:!0,configurable:!0}),Object.defineProperty(np.prototype,"weights",{get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)},enumerable:!0,configurable:!0}),Object.defineProperty(np.prototype,"stateful",{get:function(){return this._stateful},enumerable:!0,configurable:!0}),np.prototype.resetStates=function(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")},np.prototype.assertInputCompatibility=function(rp){if(rp=toList(rp),this.inputSpec!=null&&this.inputSpec.length!==0){var ap=toList(this.inputSpec);if(rp.length!==ap.length)throw new ValueError("Layer "+this.name+" expects "+ap.length+" inputs, but it received "+rp.length+" input tensors. Input received: "+rp);for(var sp=0;sp<rp.length;sp++){var lp=rp[sp],up=ap[sp];if(up!=null){var cp=lp.rank;if(up.ndim!=null&&cp!==up.ndim)throw new ValueError("Input "+sp+" is incompatible with layer "+this.name+": expected ndim="+up.ndim+", found ndim="+cp);if(up.maxNDim!=null&&cp>up.maxNDim)throw new ValueError("Input "+sp+" is incompatible with layer "+this.name+": expected max_ndim="+up.maxNDim+", found ndim="+cp);if(up.minNDim!=null&&cp<up.minNDim)throw new ValueError("Input "+sp+" is incompatible with layer "+this.name+": expected min_ndim="+up.minNDim+", found ndim="+cp+".");if(up.dtype!=null&&lp.dtype!==up.dtype)throw new ValueError("Input "+sp+" is incompatible with layer "+this.name+" : expected dtype="+up.dtype+", found dtype="+lp.dtype+".");if(up.axes){var dp=lp.shape;for(var fp in up.axes){var pp=Number(fp),hp=up.axes[fp],mp=pp>=0?dp[pp]:dp[dp.length+pp];if(hp!=null&&[hp,null].indexOf(mp)===-1)throw new ValueError("Input "+sp+" is incompatible with layer "+this.name+": expected axis "+pp+" of input shape to have value "+hp+" but got shape "+dp+".")}}if(up.shape!=null)for(var gp=0;gp<up.shape.length;++gp){var vp=up.shape[gp],xp=lp.shape[gp];if(vp!=null&&xp!=null&&vp!==xp)throw new ValueError("Input "+sp+" is incompatible with layer "+this.name+": expected shape="+up.shape+", found shape="+lp.shape+".")}}}}},np.prototype.call=function(rp,ap){return rp},np.prototype.invokeCallHook=function(rp,ap){this._callHook!=null&&this._callHook(rp,ap)},np.prototype.setCallHook=function(rp){this._callHook=rp},np.prototype.clearCallHook=function(){this._callHook=null},np.prototype.apply=function(rp,ap){var sp=this;ap=ap||{},this.assertNotDisposed();for(var lp=toList(rp),up=!0,cp=0,dp=lp;cp<dp.length;cp++)if(!(dp[cp]instanceof SymbolicTensor)){up=!1;break}for(var fp=!0,pp=0,hp=lp;pp<hp.length;pp++)if(hp[pp]instanceof SymbolicTensor){fp=!1;break}if(up===fp)throw new ValueError("Arguments to apply() must be all SymbolicTensors or all Tensors");return nameScope(this.name,function(){if(!sp.built){sp.assertInputCompatibility(rp);for(var mp=[],gp=0,vp=toList(rp);gp<vp.length;gp++){var xp=vp[gp];mp.push(xp.shape)}sp.build(singletonOrArray(mp)),sp.built=!0,sp.initialWeights&&sp.setWeights(sp.initialWeights),sp._refCount===null&&fp&&(sp._refCount=1)}if(sp.assertInputCompatibility(rp),fp){for(var Sp=[],yp=0,bp=toList(Cp=sp.call(rp,ap));yp<bp.length;yp++){var Ep=bp[yp];lp.indexOf(Ep)!==-1&&(Ep=Ep.clone()),Sp.push(Ep)}if(Cp=singletonOrArray(Sp),sp.activityRegularizer!=null)throw new NotImplementedError("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return Cp}var wp=collectInputShape(rp),_p=sp.computeOutputShape(wp),Cp=void 0,$p=guessOutputDType(rp);if(sp.warnOnIncompatibleInputShape(Array.isArray(rp)?wp[0]:wp),Cp=_p!=null&&_p.length>0&&Array.isArray(_p[0])?_p.map(function(Rp,Pp){return new SymbolicTensor($p,Rp,sp,toList(rp),ap,sp.name,Pp)}):new SymbolicTensor($p,_p,sp,toList(rp),ap,sp.name),sp.addInboundNode(rp,Cp,null,null,wp,_p,ap),sp._refCount++,sp.activityRegularizer!=null)throw new NotImplementedError("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return Cp})},np.prototype.warnOnIncompatibleInputShape=function(rp){if(this.batchInputShape!=null)if(rp.length!==this.batchInputShape.length)console.warn("The rank of the input tensor provided (shape: "+JSON.stringify(rp)+") does not match that of the batchInputShape ("+JSON.stringify(this.batchInputShape)+") of the layer "+this.name);else{var ap=!1;this.batchInputShape.forEach(function(sp,lp){sp!=null&&rp[lp]!=null&&rp[lp]!==sp&&(ap=!0)}),ap&&console.warn("The shape of the input tensor ("+JSON.stringify(rp)+") does not match the expectation of layer "+this.name+": "+JSON.stringify(this.batchInputShape))}},Object.defineProperty(np.prototype,"outputShape",{get:function(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new AttributeError("The layer "+this.name+" has never been called and thus has no defined output shape.");for(var rp=[],ap=0,sp=this.inboundNodes;ap<sp.length;ap++){var lp=sp[ap],up=JSON.stringify(lp.outputShapes);rp.indexOf(up)===-1&&rp.push(up)}if(rp.length===1){var cp=this.inboundNodes[0].outputShapes;return Array.isArray(cp)&&Array.isArray(cp[0])&&cp.length===1?cp[0]:cp}throw new AttributeError("The layer "+this.name+' has multiple inbound nodes with different output shapes. Hence the notion of "outut shape" is ill-defined for the layer.')},enumerable:!0,configurable:!0}),np.prototype.countParams=function(){if(!this.built)throw new RuntimeError("You tried to call countParams() on "+this.name+", but the layer is not built yet. Build it first by calling build(batchInputShape).");return countParamsInWeights(this.weights)},np.prototype.build=function(rp){this.built=!0},np.prototype.getWeights=function(rp){return rp===void 0&&(rp=!1),batchGetValue(rp?this.trainableWeights:this.weights)},np.prototype.setWeights=function(rp){var ap=this;je(function(){var sp=ap.weights;if(sp.length!==rp.length)throw new ValueError('You called setWeights(weights) on layer "'+ap.name+'" with a weight list of length '+rp.length+", but the layer was expecting "+sp.length+" weights. Provided weights: "+rp+"...");if(sp.length!==0){for(var lp=[],up=batchGetValue(sp),cp=0;cp<up.length;++cp){var dp=up[cp],fp=sp[cp],pp=rp[cp];if(!tt.arraysEqual(dp.shape,pp.shape))throw new ValueError("Layer weight shape "+dp.shape+" not compatible with provided weight shape "+pp.shape);lp.push([fp,pp])}batchSetValue(lp)}})},np.prototype.addWeight=function(rp,ap,sp,lp,up,cp,dp){if(this._addedWeightNames.indexOf(rp)!==-1)throw new ValueError("Duplicate weight name "+rp+" for layer "+this.name);this._addedWeightNames.push(rp),sp==null&&(sp="float32"),this.fastWeightInitDuringBuild&&(lp=getInitializer("zeros"));var fp=lp.apply(ap,sp),pp=new LayerVariable(fp,sp,rp,cp,dp);return fp.dispose(),up!=null&&this.addLoss(function(){return up.apply(pp.read())}),cp==null&&(cp=!0),cp?this._trainableWeights.push(pp):this._nonTrainableWeights.push(pp),pp},np.prototype.setFastWeightInitDuringBuild=function(rp){this.fastWeightInitDuringBuild=rp},np.prototype.addLoss=function(rp){var ap;rp==null||Array.isArray(rp)&&rp.length===0||(rp=toList(rp),this._losses!==void 0&&this._losses!==null&&(ap=this.losses).push.apply(ap,rp))},np.prototype.computeOutputShape=function(rp){return rp},np.prototype.computeMask=function(rp,ap){var sp=this;if(!this.supportsMasking){if(ap!=null){if(!Array.isArray(ap))throw new TypeError("Layer "+this.name+" does not support masking, but was passed an inputMask.");ap.forEach(function(lp){if(lp!=null)throw new TypeError("Layer "+sp.name+" does not support masking, but was passed an inputMask.")})}return null}return ap},np.prototype.addInboundNode=function(rp,ap,sp,lp,up,cp,dp){dp===void 0&&(dp=null);var fp=toList(rp);ap=toList(ap),sp=toList(sp),lp=toList(lp),up=normalizeShapeList(up),cp=normalizeShapeList(cp);for(var pp=[],hp=[],mp=[],gp=0,vp=fp;gp<vp.length;gp++){var xp=vp[gp];pp.push(xp.sourceLayer),hp.push(xp.nodeIndex),mp.push(xp.tensorIndex)}new Node({outboundLayer:this,inboundLayers:pp,nodeIndices:hp,tensorIndices:mp,inputTensors:fp,outputTensors:ap,inputMasks:sp,outputMasks:lp,inputShapes:up,outputShapes:cp},dp);for(var Sp=0;Sp<ap.length;Sp++)ap[Sp].sourceLayer=this,ap[Sp].nodeIndex=this.inboundNodes.length-1,ap[Sp].tensorIndex=Sp},np.prototype.getConfig=function(){var rp={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(rp.batchInputShape=this.batchInputShape),this.dtype!=null&&(rp.dtype=this.dtype),rp},np.prototype.disposeWeights=function(){return this.weights.forEach(function(rp){return rp.dispose()}),this.weights.length},np.prototype.assertNotDisposed=function(){if(this._refCount===0)throw new Error("Layer '"+this.name+"' is already disposed.")},np.prototype.dispose=function(){if(!this.built)throw new Error("Cannot dispose Layer "+this.name+" because it has not been built yet.");if(this._refCount===null)throw new Error("Cannot dispose Layer "+this.name+" because it has not been used yet.");this.assertNotDisposed();var rp=0;return--this._refCount==0&&(rp=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:rp}},np}(Mf.Serializable);function collectInputShape(_d){for(var np=[],rp=0,ap=_d=toList(_d);rp<ap.length;rp++){var sp=ap[rp];np.push(sp.shape)}return singletonOrArray(np)}function guessOutputDType(_d){return"float32"}function getSourceInputs(_d,np,rp){if((np==null||rp!=null&&rp>0)&&(np=_d.sourceLayer,rp=_d.nodeIndex),np.inboundNodes.length===0)return[_d];var ap=np.inboundNodes[rp];if(ap.inboundLayers.length===0)return ap.inputTensors;for(var sp=[],lp=0;lp<ap.inboundLayers.length;lp++)for(var up=0,cp=getSourceInputs(ap.inputTensors[lp],ap.inboundLayers[lp],ap.nodeIndices[lp]);up<cp.length;up++){var dp=cp[up];sp.indexOf(dp)===-1&&sp.push(dp)}return sp}var ModelLoggingVerbosity,InputLayer=function(_d){function np(rp){var ap=_d.call(this,{dtype:rp.dtype,name:rp.name!=null?rp.name:getUid("input").toString()})||this;if(rp.batchSize==null&&(rp.batchSize=null),rp.sparse==null&&(rp.sparse=!1),ap.trainable=!1,ap.built=!0,ap.sparse=rp.sparse,rp.inputShape!=null&&rp.batchInputShape!=null)throw new ValueError("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");var sp=rp.batchInputShape;if(sp==null){if(rp.inputShape==null)throw new ValueError("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");sp=[rp.batchSize].concat(rp.inputShape)}else if(rp.batchSize!=null)throw new ValueError("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");var lp=rp.dtype||"float32";ap.batchInputShape=sp,ap.dtype=lp,ap.inputSpec=[{shape:sp}];var up=new SymbolicTensor(ap.dtype,ap.batchInputShape,ap,[],{},ap.name);return up.nodeIndex=0,up.tensorIndex=0,new Node({outboundLayer:ap,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[up],outputTensors:[up],inputMasks:[null],outputMasks:[null],inputShapes:[sp],outputShapes:[sp]}),ap}return __extends$h(np,_d),np.prototype.apply=function(rp,ap){throw new ValueError("Cannot pass any input to an InputLayer's apply() method. InputLayer name: "+this.name)},np.prototype.dispose=function(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}},np.prototype.getConfig=function(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}},np.className="InputLayer",np}(Layer);function Input(_d){if(_d.batchShape==null&&_d.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(_d.batchShape!=null&&_d.shape!=null)throw new ValueError("Please provide either a `shape` or `batchShape` argument to Input, but not both.");var np=_d.batchShape;_d.shape!=null&&np==null&&(np=[null].concat(_d.shape));var rp=_d.dtype;return rp==null&&(rp="float32"),new InputLayer({batchInputShape:np,name:_d.name,dtype:rp,sparse:_d.sparse}).inboundNodes[0].outputTensors[0]}function resolveScalarsInLogs(_d){return __awaiter$8(this,void 0,void 0,function(){var np,rp,ap,sp,lp,up,cp,dp;return __generator$8(this,function(fp){switch(fp.label){case 0:if(_d==null)return[2];for(sp in np=[],rp=[],ap=[],_d)typeof(lp=_d[sp])!="number"&&(up=lp,np.push(up.data()),rp.push(sp),ap.push(up));return np.length>0?[4,Promise.all(np)]:[3,2];case 1:for(cp=fp.sent(),dp=0;dp<cp.length;++dp)_d[rp[dp]]=cp[dp][0];Xe(ap),fp.label=2;case 2:return[2]}})})}function disposeTensorsInLogs(_d){if(_d!=null)for(var np in _d){var rp=_d[np];typeof rp!="number"&&rp.dispose()}}Mf.registerClass(InputLayer),function(_d){_d[_d.SILENT=0]="SILENT",_d[_d.VERBOSE=1]="VERBOSE"}(ModelLoggingVerbosity||(ModelLoggingVerbosity={}));var DEFAULT_YIELD_EVERY_MS=125,BaseCallback=function(){function _d(){this.validationData=null}return _d.prototype.setParams=function(np){this.params=np},_d.prototype.onEpochBegin=function(np,rp){return __awaiter$8(this,void 0,void 0,function(){return __generator$8(this,function(ap){return[2]})})},_d.prototype.onEpochEnd=function(np,rp){return __awaiter$8(this,void 0,void 0,function(){return __generator$8(this,function(ap){return[2]})})},_d.prototype.onBatchBegin=function(np,rp){return __awaiter$8(this,void 0,void 0,function(){return __generator$8(this,function(ap){return[2]})})},_d.prototype.onBatchEnd=function(np,rp){return __awaiter$8(this,void 0,void 0,function(){return __generator$8(this,function(ap){return[2]})})},_d.prototype.onTrainBegin=function(np){return __awaiter$8(this,void 0,void 0,function(){return __generator$8(this,function(rp){return[2]})})},_d.prototype.onTrainEnd=function(np){return __awaiter$8(this,void 0,void 0,function(){return __generator$8(this,function(rp){return[2]})})},_d.prototype.setModel=function(np){},_d}(),CallbackList=function(){function _d(np,rp){rp===void 0&&(rp=10),np==null&&(np=[]),this.callbacks=np,this.queueLength=rp}return _d.prototype.append=function(np){this.callbacks.push(np)},_d.prototype.setParams=function(np){for(var rp=0,ap=this.callbacks;rp<ap.length;rp++)ap[rp].setParams(np)},_d.prototype.setModel=function(np){for(var rp=0,ap=this.callbacks;rp<ap.length;rp++)ap[rp].setModel(np)},_d.prototype.onEpochBegin=function(np,rp){return __awaiter$8(this,void 0,void 0,function(){var ap,sp;return __generator$8(this,function(lp){switch(lp.label){case 0:rp==null&&(rp={}),ap=0,sp=this.callbacks,lp.label=1;case 1:return ap<sp.length?[4,sp[ap].onEpochBegin(np,rp)]:[3,4];case 2:lp.sent(),lp.label=3;case 3:return ap++,[3,1];case 4:return[2]}})})},_d.prototype.onEpochEnd=function(np,rp){return __awaiter$8(this,void 0,void 0,function(){var ap,sp;return __generator$8(this,function(lp){switch(lp.label){case 0:rp==null&&(rp={}),ap=0,sp=this.callbacks,lp.label=1;case 1:return ap<sp.length?[4,sp[ap].onEpochEnd(np,rp)]:[3,4];case 2:lp.sent(),lp.label=3;case 3:return ap++,[3,1];case 4:return[2]}})})},_d.prototype.onBatchBegin=function(np,rp){return __awaiter$8(this,void 0,void 0,function(){var ap,sp;return __generator$8(this,function(lp){switch(lp.label){case 0:rp==null&&(rp={}),ap=0,sp=this.callbacks,lp.label=1;case 1:return ap<sp.length?[4,sp[ap].onBatchBegin(np,rp)]:[3,4];case 2:lp.sent(),lp.label=3;case 3:return ap++,[3,1];case 4:return[2]}})})},_d.prototype.onBatchEnd=function(np,rp){return __awaiter$8(this,void 0,void 0,function(){var ap,sp;return __generator$8(this,function(lp){switch(lp.label){case 0:rp==null&&(rp={}),ap=0,sp=this.callbacks,lp.label=1;case 1:return ap<sp.length?[4,sp[ap].onBatchEnd(np,rp)]:[3,4];case 2:lp.sent(),lp.label=3;case 3:return ap++,[3,1];case 4:return[2]}})})},_d.prototype.onTrainBegin=function(np){return __awaiter$8(this,void 0,void 0,function(){var rp,ap;return __generator$8(this,function(sp){switch(sp.label){case 0:np==null&&(np={}),rp=0,ap=this.callbacks,sp.label=1;case 1:return rp<ap.length?[4,ap[rp].onTrainBegin(np)]:[3,4];case 2:sp.sent(),sp.label=3;case 3:return rp++,[3,1];case 4:return[2]}})})},_d.prototype.onTrainEnd=function(np){return __awaiter$8(this,void 0,void 0,function(){var rp,ap;return __generator$8(this,function(sp){switch(sp.label){case 0:np==null&&(np={}),rp=0,ap=this.callbacks,sp.label=1;case 1:return rp<ap.length?[4,ap[rp].onTrainEnd(np)]:[3,4];case 2:sp.sent(),sp.label=3;case 3:return rp++,[3,1];case 4:return[2]}})})},_d}(),BaseLogger=function(_d){function np(){return _d.call(this)||this}return __extends$h(np,_d),np.prototype.onEpochBegin=function(rp){return __awaiter$8(this,void 0,void 0,function(){return __generator$8(this,function(ap){return this.seen=0,this.totals={},[2]})})},np.prototype.onBatchEnd=function(rp,ap){return __awaiter$8(this,void 0,void 0,function(){var sp,lp,up,cp,dp=this;return __generator$8(this,function(fp){for(cp in ap==null&&(ap={}),sp=ap.size==null?0:ap.size,this.seen+=sp,lp=function(pp){var hp=ap[pp];if(typeof hp=="number")up.totals.hasOwnProperty(pp)||(up.totals[pp]=0),up.totals[pp]=up.totals[pp]+hp*sp;else{var mp=void 0;pp in up.totals?mp=up.totals[pp]:up.totals[pp]=0;var gp=je(function(){return Vs(dp.totals[pp],tc(hp,sp))});up.totals[pp]=gp,mp!=null&&mp.dispose()}},up=this,ap)lp(cp);return[2]})})},np.prototype.onEpochEnd=function(rp,ap){return __awaiter$8(this,void 0,void 0,function(){var sp,lp,up,cp,dp,fp=this;return __generator$8(this,function(pp){if(ap!=null)for(sp=function(hp){if(lp.totals[hp]==null)return"continue";typeof lp.totals[hp]=="number"?ap[hp]=lp.totals[hp]/lp.seen:je(function(){var mp=tc(qs(1,fp.seen),fp.totals[hp]);ap[hp]=mp,fp.totals[hp].dispose(),$e(ap[hp])})},lp=this,up=0,cp=this.params.metrics;up<cp.length;up++)dp=cp[up],sp(dp);return[2]})})},np}(BaseCallback),History=function(_d){function np(){return _d!==null&&_d.apply(this,arguments)||this}return __extends$h(np,_d),np.prototype.onTrainBegin=function(rp){return __awaiter$8(this,void 0,void 0,function(){return __generator$8(this,function(ap){return this.epoch=[],this.history={},[2]})})},np.prototype.onEpochEnd=function(rp,ap){return __awaiter$8(this,void 0,void 0,function(){var sp;return __generator$8(this,function(lp){for(sp in ap==null&&(ap={}),this.epoch.push(rp),ap)this.history[sp]==null&&(this.history[sp]=[]),this.history[sp].push(ap[sp]);return[2]})})},np.prototype.syncData=function(){return __awaiter$8(this,void 0,void 0,function(){var rp,ap,sp,lp,up,cp,dp,fp,pp;return __generator$8(this,function(hp){switch(hp.label){case 0:for(lp in rp=[],ap=[],sp=[],this.history)for(up=this.history[lp],cp=0;cp<up.length;++cp)typeof up[cp]!="number"&&(dp=up[cp],rp.push(dp.data()),ap.push(lp),sp.push(cp));return[4,Promise.all(rp)];case 1:for(fp=hp.sent(),pp=0;pp<fp.length;++pp)this.history[ap[pp]][sp[pp]].dispose(),this.history[ap[pp]][sp[pp]]=fp[pp][0];return[2]}})})},np}(BaseCallback),CustomCallback=function(_d){function np(rp,ap){var sp=_d.call(this)||this;if(sp.currentEpoch=0,sp.yieldEvery=ap||"auto",sp.yieldEvery==="auto"&&(sp.yieldEvery=DEFAULT_YIELD_EVERY_MS),sp.yieldEvery==="never"&&rp.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");return tt.isNumber(sp.yieldEvery)&&(sp.maybeWait=debounce(sp.maybeWait.bind(sp),sp.yieldEvery)),sp.trainBegin=rp.onTrainBegin,sp.trainEnd=rp.onTrainEnd,sp.epochBegin=rp.onEpochBegin,sp.epochEnd=rp.onEpochEnd,sp.batchBegin=rp.onBatchBegin,sp.batchEnd=rp.onBatchEnd,sp.yield=rp.onYield,sp}return __extends$h(np,_d),np.prototype.maybeWait=function(rp,ap,sp){return __awaiter$8(this,void 0,void 0,function(){var lp;return __generator$8(this,function(up){switch(up.label){case 0:return lp=[],this.yield==null?[3,2]:[4,resolveScalarsInLogs(sp)];case 1:up.sent(),lp.push(this.yield(rp,ap,sp)),up.label=2;case 2:return lp.push(ep()),[4,Promise.all(lp)];case 3:return up.sent(),[2]}})})},np.prototype.onEpochBegin=function(rp,ap){return __awaiter$8(this,void 0,void 0,function(){return __generator$8(this,function(sp){switch(sp.label){case 0:return this.currentEpoch=rp,this.epochBegin==null?[3,3]:[4,resolveScalarsInLogs(ap)];case 1:return sp.sent(),[4,this.epochBegin(rp,ap)];case 2:sp.sent(),sp.label=3;case 3:return[2]}})})},np.prototype.onEpochEnd=function(rp,ap){return __awaiter$8(this,void 0,void 0,function(){var sp;return __generator$8(this,function(lp){switch(lp.label){case 0:return sp=[],this.epochEnd==null?[3,2]:[4,resolveScalarsInLogs(ap)];case 1:lp.sent(),sp.push(this.epochEnd(rp,ap)),lp.label=2;case 2:return this.yieldEvery==="epoch"&&sp.push(ep()),[4,Promise.all(sp)];case 3:return lp.sent(),[2]}})})},np.prototype.onBatchBegin=function(rp,ap){return __awaiter$8(this,void 0,void 0,function(){return __generator$8(this,function(sp){switch(sp.label){case 0:return this.batchBegin==null?[3,3]:[4,resolveScalarsInLogs(ap)];case 1:return sp.sent(),[4,this.batchBegin(rp,ap)];case 2:sp.sent(),sp.label=3;case 3:return[2]}})})},np.prototype.onBatchEnd=function(rp,ap){return __awaiter$8(this,void 0,void 0,function(){var sp;return __generator$8(this,function(lp){switch(lp.label){case 0:return sp=[],this.batchEnd==null?[3,2]:[4,resolveScalarsInLogs(ap)];case 1:lp.sent(),sp.push(this.batchEnd(rp,ap)),lp.label=2;case 2:return this.yieldEvery==="batch"?sp.push(ep()):tt.isNumber(this.yieldEvery)&&sp.push(this.maybeWait(this.currentEpoch,rp,ap)),[4,Promise.all(sp)];case 3:return lp.sent(),[2]}})})},np.prototype.onTrainBegin=function(rp){return __awaiter$8(this,void 0,void 0,function(){return __generator$8(this,function(ap){switch(ap.label){case 0:return this.trainBegin==null?[3,3]:[4,resolveScalarsInLogs(rp)];case 1:return ap.sent(),[4,this.trainBegin(rp)];case 2:ap.sent(),ap.label=3;case 3:return[2]}})})},np.prototype.onTrainEnd=function(rp){return __awaiter$8(this,void 0,void 0,function(){return __generator$8(this,function(ap){switch(ap.label){case 0:return this.trainEnd==null?[3,3]:[4,resolveScalarsInLogs(rp)];case 1:return ap.sent(),[4,this.trainEnd(rp)];case 2:ap.sent(),ap.label=3;case 3:return[2]}})})},np}(BaseCallback);function standardizeCallbacks(_d,np){return _d==null&&(_d={}),_d instanceof BaseCallback?[_d]:Array.isArray(_d)&&_d[0]instanceof BaseCallback?_d:toList(_d).map(function(rp){return new CustomCallback(rp,np)})}var CallbackConstructorRegistry=function(){function _d(){}return _d.registerCallbackConstructor=function(np,rp){tt.assert(np>=0&&Number.isInteger(np),function(){return"Verbosity level is expected to be an integer >= 0, but got "+np}),_d.checkForDuplicate(rp),_d.constructors[np]==null&&(_d.constructors[np]=[]),_d.constructors[np].push(rp)},_d.checkForDuplicate=function(np){for(var rp in _d.constructors)_d.constructors[+rp].forEach(function(ap){if(ap===np)throw new ValueError("Duplicate callback constructor.")})},_d.clear=function(){_d.constructors={}},_d.createCallbacks=function(np){var rp=[];for(var ap in _d.constructors){var sp=+ap;np>=sp&&rp.push.apply(rp,_d.constructors[sp])}return rp.map(function(lp){return new lp})},_d.constructors={},_d}();function configureCallbacks(_d,np,rp,ap,sp,lp,up,cp,dp){var fp=new History,pp=[new BaseLogger].concat(CallbackConstructorRegistry.createCallbacks(np));_d!=null&&pp.push.apply(pp,_d),pp.push(fp);var hp=new CallbackList(pp);return hp.setParams({epochs:rp,initialEpoch:ap,samples:sp,steps:lp,batchSize:up,verbose:np,doValidation:cp,metrics:dp}),{callbackList:hp,history:fp}}function deserialize(_d,np,rp){return np===void 0&&(np={}),rp===void 0&&(rp=!1),deserializeKerasObject(_d,Mf.SerializationMap.getMap().classNameMap,np,"layer",rp)}function l2Normalize(_d,np){return je(function(){_d.dtype!=="float32"&&(_d=_d.asType("float32"));var rp=vl(square(_d),np,!0),ap=Ln(rp.shape,epsilon()),sp=gs(Xs(rp,ap));return qs(_d,sp)})}function meanSquaredError(_d,np){return je(function(){return fl(square(ic(np,_d)),-1)})}function meanAbsoluteError(_d,np){return je(function(){return fl(Vu(ic(np,_d)),-1)})}function meanAbsolutePercentageError(_d,np){return je(function(){var rp=ic(_d,np),ap=$u(Vu(_d),epsilon(),Number.MAX_VALUE),sp=Vu(qs(rp,ap));return tc(100,fl(sp,-1))})}function meanSquaredLogarithmicError(_d,np){return je(function(){var rp=$u(np,epsilon(),Number.MAX_VALUE),ap=ns(Vs(1,rp)),sp=$u(_d,epsilon(),Number.MAX_VALUE),lp=ns(Vs(1,sp));return fl(square(ic(ap,lp)),-1)})}function squaredHinge(_d,np){return je(function(){var rp=Xs(0,ic(1,tc(_d,np)));return fl(square(rp),-1)})}function hinge(_d,np){return je(function(){var rp=Xs(0,ic(1,tc(_d,np)));return fl(rp,-1)})}function categoricalHinge(_d,np){return je(function(){var rp=vl(tc(_d,np),-1),ap=hl(tc(ic(1,_d),np),-1);return Xs(0,Vs(1,ic(ap,rp)))})}function logcosh(_d,np){return je(function(){var rp=Math.log(2),ap=ic(np,_d),sp=ic(Vs(ap,ms(tc(-2,ap))),rp);return fl(sp,-1)})}function categoricalCrossentropy(_d,np,rp){return rp===void 0&&(rp=!1),je(function(){if(rp)np=io(np);else{var ap=vl(np,np.shape.length-1,!0);np=qs(np,ap)}return np=$u(np,epsilon(),1-epsilon()),as(vl(tc(_d.toFloat(),ns(np)),np.shape.length-1))})}function sparseCategoricalCrossentropy(_d,np){return je(function(){var rp=es(flatten(_d)).toInt(),ap=(np=$u(np,epsilon(),1-epsilon())).shape;return categoricalCrossentropy(gr(rp,ap[ap.length-1]).reshape(ap),np,!1)})}function sigmoidCrossEntropyWithLogits(_d,np){if(!tt.arraysEqual(_d.shape,np.shape))throw new ValueError("logits and labels must have the same shape, but got shapes "+JSON.stringify(_d.shape)+" and "+JSON.stringify(np.shape));return je(function(){var rp=np.relu(),ap=np.abs().neg();return rp.sub(np.mul(_d)).add(ap.exp().log1p())})}function binaryCrossentropy(_d,np){return je(function(){var rp;return rp=$u(np,epsilon(),1-epsilon()),rp=ns(qs(rp,ic(1,rp))),fl(sigmoidCrossEntropyWithLogits(_d,rp),-1)})}function kullbackLeiblerDivergence(_d,np){return je(function(){var rp=$u(_d,epsilon(),1),ap=$u(np,epsilon(),1);return vl(tc(_d,ns(qs(rp,ap))),-1)})}function poisson(_d,np){return je(function(){var rp=ns(Vs(epsilon(),np));return fl(ic(np,tc(_d,rp)),-1)})}function cosineProximity(_d,np){return je(function(){var rp=l2Normalize(_d,-1),ap=l2Normalize(np,-1),sp=tc(rp,ap);return as(vl(sp,-1))})}var lossesMap={meanSquaredError,meanAbsoluteError,meanAbsolutePercentageError,meanSquaredLogarithmicError,squaredHinge,hinge,categoricalHinge,logcosh,categoricalCrossentropy,sparseCategoricalCrossentropy,binaryCrossentropy,kullbackLeiblerDivergence,poisson,cosineProximity};function get(_d){if(typeof _d=="string"){if(_d in lossesMap)return lossesMap[_d];var np="Unknown loss "+_d;throw _d.toLowerCase().includes("softmaxcrossentropy")&&(np="Unknown loss "+_d+'. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy'),new ValueError(np)}return _d}function binaryAccuracy(_d,np){return je(function(){var rp=tc(.5,Vn(np)),ap=cast$1(lc(np,rp),_d.dtype);return fl(sc(_d,ap),-1)})}function categoricalAccuracy(_d,np){return je(function(){return cast$1(sc(sl(_d,-1),sl(np,-1)),"float32")})}function truePositives(_d,np){return je(function(){return Ms(_d.equal(1),np.equal(1)).sum().cast("float32")})}function falseNegatives(_d,np){return je(function(){return Ms(_d.equal(1),np.equal(0)).sum().cast("float32")})}function falsePositives(_d,np){return je(function(){return Ms(_d.equal(0),np.equal(1)).sum().cast("float32")})}function precision(_d,np){return je(function(){var rp=truePositives(_d,np),ap=falsePositives(_d,np),sp=rp.add(ap);return Ws(lc(sp,0),rp.div(sp),0).cast("float32")})}function recall(_d,np){return je(function(){var rp=truePositives(_d,np),ap=falseNegatives(_d,np),sp=rp.add(ap);return Ws(lc(sp,0),rp.div(sp),0).cast("float32")})}function binaryCrossentropy$1(_d,np){return binaryCrossentropy(_d,np)}function sparseCategoricalAccuracy(_d,np){return _d.rank===np.rank&&(_d=_d.squeeze([_d.rank-1])),(np=np.argMax(-1)).dtype!==_d.dtype&&(np=np.asType(_d.dtype)),sc(_d,np).asType("float32")}var mse$1=meanSquaredError,MSE$1=meanSquaredError,mae$1=meanAbsoluteError,MAE$1=meanAbsoluteError,mape$1=meanAbsolutePercentageError,MAPE$1=meanAbsolutePercentageError,categoricalCrossentropy$1=categoricalCrossentropy,cosine$1=cosineProximity,sparseCategoricalCrossentropy$1=sparseCategoricalCrossentropy,metricsMap={binaryAccuracy,categoricalAccuracy,precision,categoricalCrossentropy:categoricalCrossentropy$1,sparseCategoricalCrossentropy:sparseCategoricalCrossentropy$1,mse:mse$1,MSE:MSE$1,mae:mae$1,MAE:MAE$1,mape:mape$1,MAPE:MAPE$1,cosine:cosine$1};function get$1(_d){if(typeof _d=="string"&&_d in metricsMap)return metricsMap[_d];if(typeof _d!="string"&&_d!=null)return _d;throw new ValueError("Unknown metric "+_d)}function getLossOrMetricName(_d){if(assert(_d!==null,"Unknown LossOrMetricFn "+_d),typeof _d=="string")return _d;for(var np=void 0,rp=0,ap=Object.keys(lossesMap);rp<ap.length;rp++){var sp=ap[rp];if(lossesMap[sp]===_d){np=sp;break}}if(np!==void 0)return np;for(var lp=0,up=Object.keys(metricsMap);lp<up.length;lp++)if(sp=up[lp],metricsMap[sp]===_d){np=sp;break}return np!==void 0?np:_d.name}function getOptimizer(_d){var np={Adagrad:function(){return Zf.adagrad(.01)},Adadelta:function(){return Zf.adadelta(1,.95,epsilon())},Adam:function(){return Zf.adam(.001,.9,.999,epsilon())},Adamax:function(){return Zf.adamax(.002,.9,.999,epsilon(),0)},RMSProp:function(){return Zf.rmsprop(.001,.9,0,epsilon())},SGD:function(){return Zf.sgd(.01)}};if(np.adagrad=np.Adagrad,np.adadelta=np.Adadelta,np.adam=np.Adam,np.adamax=np.Adamax,np.rmsprop=np.RMSProp,np.sgd=np.SGD,_d in np)return np[_d]();throw new ValueError("Unknown Optimizer "+_d)}var MAX_USER_DEFINED_METADATA_SERIALIZED_LENGTH=1048576;function checkUserDefinedMetadata(_d,np,rp){if(rp===void 0&&(rp=!1),_d==null||typeof _d!="object"||Object.getPrototypeOf(_d)!==Object.prototype||!plainObjectCheck(_d))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(rp){var ap=JSON.stringify(_d);ap.length>MAX_USER_DEFINED_METADATA_SERIALIZED_LENGTH&&console.warn('User-defined metadata of model "'+np+'" is too large in size (length='+ap.length+" when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= "+MAX_USER_DEFINED_METADATA_SERIALIZED_LENGTH+".")}}function plainObjectCheck(_d){if(_d===null)return!0;if(typeof _d=="object"){if(Object.getPrototypeOf(_d)===Object.prototype){for(var np=0,rp=Object.keys(_d);np<rp.length;np++){var ap=rp[np];if(typeof ap!="string"||!plainObjectCheck(_d[ap]))return!1}return!0}if(Array.isArray(_d)){for(var sp=0,lp=_d;sp<lp.length;sp++)if(!plainObjectCheck(lp[sp]))return!1;return!0}return!1}var up=typeof _d;return up==="string"||up==="number"||up==="boolean"}function printSummary(_d,np,rp,ap){ap===void 0&&(ap=console.log);var sp,lp=isModelSequentialLike(_d),up=["Layer (type)","Output shape","Param #"];if(lp?(np=np||65,rp=rp||[.45,.85,1]):(np=np||98,rp=rp||[.33,.55,.67,1]),rp[rp.length-1]<=1&&(rp=rp.map(function(mp){return Math.floor(np*mp)})),!lp)for(var cp in up.push("Receives inputs"),sp=[],_d.nodesByDepth)sp.push.apply(sp,_d.nodesByDepth[cp]);ap("_".repeat(np)),printRow(up,rp,ap),ap("=".repeat(np));for(var dp=_d.layers,fp=0;fp<dp.length;++fp)lp?printLayerSummary(dp[fp],rp,ap):printLayerSummaryWithConnections(dp[fp],rp,sp,ap),ap((fp===dp.length-1?"=":"_").repeat(np));_d.checkTrainableWeightsConsistency();var pp=countTrainableParams(_d),hp=countParamsInWeights(_d.nonTrainableWeights);ap("Total params: "+(pp+hp)),ap("Trainable params: "+pp),ap("Non-trainable params: "+hp),ap("_".repeat(np))}function countTrainableParams(_d){return _d.collectedTrainableWeights!=null?countParamsInWeights(_d.collectedTrainableWeights):countParamsInWeights(_d.trainableWeights)}function isModelSequentialLike(_d){var np=!0,rp=[],ap=[];for(var sp in _d.nodesByDepth)rp.push(_d.nodesByDepth[sp]);for(var lp=0,up=rp;lp<up.length;lp++){var cp=up[lp];if(cp.length>1||cp.length===1&&cp[0].inboundLayers.length>1){np=!1;break}ap.push.apply(ap,cp)}if(np)for(var dp=0,fp=_d.layers;dp<fp.length;dp++){for(var pp=!1,hp=0,mp=fp[dp].inboundNodes;hp<mp.length;hp++){var gp=mp[hp];if(ap.indexOf(gp)!==-1){if(pp){np=!1;break}pp=!0}}if(!np)break}return np}function printRow(_d,np,rp){rp===void 0&&(rp=console.log);for(var ap="",sp=0;sp<_d.length;++sp)sp>0&&(ap=ap.slice(0,ap.length-1)+" "),ap=(ap+=_d[sp]).slice(0,np[sp]),ap+=" ".repeat(np[sp]-ap.length);rp(ap)}function printLayerSummary(_d,np,rp){var ap;try{ap=JSON.stringify(_d.outputShape)}catch{ap="multiple"}printRow([_d.name+" ("+_d.getClassName()+")",ap,_d.countParams().toString()],np,rp)}function printLayerSummaryWithConnections(_d,np,rp,ap){var sp;try{sp=JSON.stringify(_d.outputShape)}catch{sp="multiple"}for(var lp=[],up=0,cp=_d.inboundNodes;up<cp.length;up++){var dp=cp[up];if(!(rp!=null&&rp.length>0&&rp.indexOf(dp)===-1))for(var fp=0;fp<dp.inboundLayers.length;++fp){var pp=dp.inboundLayers[fp].name,hp=dp.nodeIndices[fp],mp=dp.tensorIndices[fp];lp.push(pp+"["+hp+"]["+mp+"]")}}var gp=_d.name,vp=_d.getClassName(),xp=lp.length===0?"":lp[0];for(printRow([gp+" ("+vp+")",sp,_d.countParams().toString(),xp],np,ap),fp=1;fp<lp.length;++fp)printRow(["","","",lp[fp]],np,ap)}function isArrayItemInputOrOutputName(_d,np,rp){return(_d==="inboundNodes"||_d==="outputLayers"||_d==="inputLayers")&&np===0&&typeof rp=="string"}function convertPythonicToTs(_d,np){if(_d===null)return null;if(typeof _d=="string")return toCamelCase$1(_d);if(typeof _d=="number"||typeof _d=="boolean")return _d;if(_d instanceof Array){for(var rp=[],ap=_d.length,sp=0;sp<ap;++sp){var lp=_d[sp];isArrayItemInputOrOutputName(np,sp,lp)?rp.push(lp):rp.push(convertPythonicToTs(lp,np))}return rp}for(var up={},cp=0,dp=Object.keys(_d);cp<dp.length;cp++){var fp=dp[cp],pp=_d[fp];if(fp==="name"&&typeof pp=="string")up[fp]=pp;else{var hp=toCamelCase$1(fp);up[hp]=convertPythonicToTs(pp,hp)}}return up}function convertTsToPythonic(_d,np){if(_d==null)return null;if(typeof _d=="string")return toSnakeCase(_d);if(typeof _d=="number"||typeof _d=="boolean")return _d;if(_d instanceof Array){for(var rp=[],ap=_d.length,sp=0;sp<ap;++sp){var lp=_d[sp];isArrayItemInputOrOutputName(np,sp,lp)?rp.push(lp):rp.push(convertTsToPythonic(lp,np))}return rp}for(var up={},cp=0,dp=Object.keys(_d);cp<dp.length;cp++){var fp=dp[cp],pp=_d[fp],hp=toSnakeCase(fp);up[hp]=fp!=="name"&&fp!=="className"||typeof pp!="string"?convertTsToPythonic(pp,fp):pp}return up}var version$8="1.3.1";function assertFeedCompatibility(_d,np){if(_d.dtype==null||_d.dtype===np.dtype)return np;try{return lr(np,_d.dtype)}catch{throw new ValueError("The dtype of the feed ("+np.dtype+") can not be cast to the dtype of the key '"+_d.name+"' ("+_d.dtype+").")}}var FeedDict=function(){function _d(np){if(this.id2Value={},this.id2Mask={},this.name2Id={},np instanceof _d)for(var rp in np.id2Value)this.id2Value[rp]=np.id2Value[rp],rp in np.id2Mask&&(this.id2Mask[rp]=np.id2Mask[rp]);else{if(np==null)return;for(var ap=0,sp=np;ap<sp.length;ap++){var lp=sp[ap];this.add(lp.key,lp.value)}}}return _d.prototype.add=function(np,rp,ap){if(this.id2Value[np.id]!=null)throw new ValueError("Duplicate key: name="+np.name+", id="+np.id);return this.id2Value[np.id]=assertFeedCompatibility(np,rp),this.name2Id[np.name]=np.id,ap!=null&&(this.id2Mask[np.id]=ap),this},_d.prototype.addFeed=function(np){this.add(np.key,np.value)},_d.prototype.hasKey=function(np){return this.id2Value[np.id]!=null},_d.prototype.names=function(){return Object.keys(this.name2Id)},_d.prototype.getValue=function(np){if(np instanceof SymbolicTensor){if(this.id2Value[np.id]==null)throw new ValueError("Nonexistent key: "+np.name);return this.id2Value[np.id]}var rp=this.name2Id[np];if(rp==null)throw new ValueError("Feed dict has no SymbolicTensor name: "+np);return this.id2Value[rp]},_d.prototype.getMask=function(np){if(np instanceof SymbolicTensor){if(this.id2Value[np.id]==null)throw new ValueError("Nonexistent key: "+np.name);return this.id2Mask[np.id]}var rp=this.name2Id[np];if(rp==null)throw new ValueError("Feed dict has no SymbolicTensor name: "+np);return this.id2Mask[rp]},_d.prototype.disposeMasks=function(){this.id2Mask!=null&&Xe(this.id2Mask)},_d}(),cachedSorted={},cachedRecipientCounts={};function execute(_d,np,rp,ap){for(var sp=rp!=null&&rp.training,lp=Array.isArray(_d),up=lp?_d:[_d],cp=up.map(function(Vp){return Vp.name}),dp=[],fp=np.names(),pp=0,hp=cp;pp<hp.length;pp++){var mp=hp[pp];fp.indexOf(mp)!==-1?dp.push(np.getValue(mp)):dp.push(null)}ap!=null&&(ap.maxNumTensors=-1/0,ap.minNumTensors=1/0);var gp,vp,xp=cp.join(",")+"|"+np.names().join(",");if(cachedSorted[xp]==null){var Sp=getTopologicalSortAndRecipientCounts(up,np);gp=Sp.sorted,vp=Sp.recipientCounts,cachedSorted[xp]=gp,cachedRecipientCounts[xp]=vp}gp=cachedSorted[xp],vp={},sp||Object.assign(vp,cachedRecipientCounts[xp]);for(var yp=new FeedDict(np),bp=0;bp<gp.length;++bp){if(ap!=null){var Ep=qe().numTensors;Ep>ap.maxNumTensors&&(ap.maxNumTensors=Ep),Ep<ap.minNumTensors&&(ap.minNumTensors=Ep)}var wp=gp[bp],_p=wp.sourceLayer;if(!(_p instanceof InputLayer)){for(var Cp=[],$p=[],Rp=[],Pp=!1,Op=0,jp=wp.inputs;Op<jp.length;Op++){var Mp=jp[Op],Ap=yp.getValue(Mp),Dp=yp.getMask(Mp);Cp.push(Ap),$p.push(Dp),Dp!=null&&(Pp=!0),sp||(vp[Mp.name]--,vp[Mp.name]!==0||np.hasKey(Mp)||cp.indexOf(Mp.name)!==-1||Ap.isDisposed||Mp.sourceLayer.stateful===!0||Rp.push(Ap))}Pp&&((rp=rp||{}).mask=$p[0]);var Fp=toList(_p.apply(Cp,rp)),Ip=null;_p.supportsMasking&&(Ip=_p.computeMask(Cp,$p));for(var kp=getNodeOutputs(wp),Tp=Array.isArray(kp)?kp:[kp],Np=0;Np<Tp.length;++Np){yp.hasKey(Tp[Np])||yp.add(Tp[Np],Fp[Np],Array.isArray(Ip)?Ip[0]:Ip);var Lp=cp.indexOf(Tp[Np].name);Lp!==-1&&(dp[Lp]=Fp[Np])}sp||Xe(Rp)}}return yp.disposeMasks(),lp?dp:dp[0]}function getTopologicalSortAndRecipientCounts(_d,np){tt.assert(_d!=null&&_d.length>0,function(){return"Expected at least one fetch, got none"});var rp=[],ap={};if(_d.length===1){var sp=getTopologicalSortAndRecipientCountsForOneFetch(_d[0],np);rp=sp.sorted,ap=sp.recipientMap}else for(var lp=new Set,up=0,cp=_d;up<cp.length;up++){for(var dp=getTopologicalSortAndRecipientCountsForOneFetch(cp[up],np),fp=dp.sorted,pp=dp.recipientMap,hp=0,mp=fp;hp<mp.length;hp++){var gp=mp[hp];lp.has(gp.name)||(rp.push(gp),lp.add(gp.name))}var vp=function(Sp){ap[Sp]==null&&(ap[Sp]=new Set),pp[Sp].forEach(function(yp){return ap[Sp].add(yp)})};for(var xp in pp)vp(xp)}return{sorted:rp,recipientCounts:recipientMap2Counts(ap)}}function recipientMap2Counts(_d){var np={};for(var rp in _d)np[rp]=_d[rp].size;return np}function getTopologicalSortAndRecipientCountsForOneFetch(_d,np){for(var rp=new Set,ap=[],sp={},lp=0,up=np.names();lp<up.length;lp++){var cp=up[lp];rp.add(cp)}var dp=[],fp=[];for(dp.push(_d);dp.length>0;){var pp=dp[dp.length-1];if(rp.has(pp.name))dp.pop();else{var hp=fp[fp.length-1]===dp.length-1;if(pp.inputs.length===0||hp)dp.pop(),ap.push(pp),rp.add(pp.name),hp&&fp.pop();else{fp.push(dp.length-1);for(var mp=0,gp=pp.inputs;mp<gp.length;mp++){var vp=gp[mp];sp[vp.name]==null&&(sp[vp.name]=new Set),sp[vp.name].add(pp.name),rp.has(vp.name)||dp.push(vp)}}}}return{sorted:ap,recipientMap:sp}}function getNodeOutputs(_d){var np;if(_d.sourceLayer.inboundNodes.length===1)np=_d.sourceLayer.output;else{for(var rp=null,ap=0;ap<_d.sourceLayer.inboundNodes.length;++ap)for(var sp=0,lp=_d.sourceLayer.inboundNodes[ap].outputTensors;sp<lp.length;sp++)if(lp[sp].id===_d.id){rp=ap;break}np=_d.sourceLayer.getOutputAt(rp)}return np}var Container=function(_d){function np(rp){var ap=_d.call(this,{})||this;if(ap.containerNodes=new Set,ap.name=rp.name,ap.name==null){var sp=ap.getClassName().toLowerCase();ap.name=getUid(sp)}if(ap.supportsMasking=!1,ap.trainable_=!0,Array.isArray(rp.inputs)?ap.inputs=rp.inputs.slice():ap.inputs=[rp.inputs],Array.isArray(rp.outputs)?ap.outputs=rp.outputs.slice():ap.outputs=[rp.outputs],unique(ap.inputs).length!==ap.inputs.length)throw new ValueError("The list of inputs passed to the model is redundant. All inputs should only appear once. Found: "+ap.inputs.map(function(fm){return fm.name}));unique(ap.outputs).length!==ap.outputs.length&&console.warn("The list of outputs passed to the model is redundant. All outputs should only appear once. Found: "+ap.outputs.map(function(fm){return fm.name})),ap.inputLayers=[],ap.inputLayersNodeIndices=[],ap.inputLayersTensorIndices=[],ap.outputLayers=[],ap.outputLayersNodeIndices=[],ap.outputLayersTensorIndices=[],ap.layers=[],ap.internalContainerRefs=[];for(var lp=0,up=ap.outputs;lp<up.length;lp++){var cp=(Op=up[lp]).sourceLayer,dp=Op.nodeIndex,fp=Op.tensorIndex;ap.outputLayers.push(cp),ap.outputLayersNodeIndices.push(dp),ap.outputLayersTensorIndices.push(fp)}for(var pp=0,hp=ap.inputs;pp<hp.length;pp++)cp=(Op=hp[pp]).sourceLayer,dp=Op.nodeIndex,fp=Op.tensorIndex,assert(dp===0,"input layer has >1 nodes"),assert(fp===0,"input layer has >1 tensors"),ap.inputLayers.push(cp),ap.inputLayersNodeIndices.push(dp),ap.inputLayersTensorIndices.push(fp);ap.inputNames=[],ap.outputNames=[],ap.feedInputShapes=[],ap.feedInputNames=[],ap.feedOutputNames=[];for(var mp=0;mp<ap.inputLayers.length;mp++){if(!((cp=ap.inputLayers[mp])instanceof InputLayer))throw new TypeError("Input layers to a LayersModel must be InputLayer objects. Received inputs: "+rp.inputs+". Input "+mp+" (0-based) originates from layer type "+cp.getClassName()+".");ap.inputNames.push(cp.name),ap.feedInputShapes.push(cp.batchInputShape),ap.feedInputNames.push(cp.name)}for(var gp=0,vp=ap.outputLayers;gp<vp.length;gp++)cp=vp[gp],ap.outputNames.push(cp.name);ap.internalInputShapes=ap.inputs.map(function(fm){return fm.shape}),ap.internalOutputShapes=ap.outputs.map(function(fm){return fm.shape});for(var xp={},Sp={},yp={},bp={},Ep={},wp=[],_p=function(fm,wm,pm,hm,sm,cm){hm!=null&&sm!=null&&cm!=null||(hm=fm.sourceLayer,sm=fm.nodeIndex,cm=fm.tensorIndex);var ym=hm.inboundNodes[sm];if(pm.indexOf(ym)!==-1)throw new RuntimeError("The tensor "+fm.name+' at layer "'+hm.name+'" is part of a cycle.');if(wm.indexOf(ym)===-1){ap.containerNodes.add(np.nodeKey(hm,sm)),hm.id in Ep||(Ep[hm.id]=Object.keys(Ep).length),pm.indexOf(ym)===-1&&pm.push(ym);for(var Tm=ym.inboundLayers.length,xm=0;xm<Tm;xm++){var bm=ym.inputTensors[xm],Dm=ym.inboundLayers[xm],Vm=ym.nodeIndices[xm],Kp=ym.tensorIndices[xm];_p(bm,wm,pm,Dm,Vm,Kp)}for(wm.push(ym);pm.indexOf(ym)>=0;)pm.splice(pm.indexOf(ym),1);wp.push(ym)}},Cp=[],$p=[],Rp=0,Pp=ap.outputs;Rp<Pp.length;Rp++){var Op=Pp[Rp];_p(Op,Cp,$p)}for(var jp=0,Mp=wp.slice().reverse();jp<Mp.length;jp++){Sp[(Gp=Mp[jp]).id]=Gp,Gp.id in xp||(xp[Gp.id]=0);var Ap=xp[Gp.id],Dp=yp[Gp.outboundLayer.id]==null?0:yp[Gp.outboundLayer.id];for(Ap=Math.max(Ap,Dp),yp[Gp.outboundLayer.id]=Ap,bp[Gp.outboundLayer.id]=Gp.outboundLayer,xp[Gp.id]=Ap,mp=0;mp<Gp.inboundLayers.length;mp++){var Fp=Gp.inboundLayers[mp],Ip=(dp=Gp.nodeIndices[mp],Fp.inboundNodes[dp]),kp=xp[Ip.id]==null?0:xp[Ip.id];xp[Ip.id]=Math.max(Ap+1,kp),Sp[Ip.id]=Ip}}var Tp={};for(var Np in xp)(Ap=xp[Np])in Tp||(Tp[Ap]=[]),Tp[Ap].push(Sp[Np]);var Lp={};for(var Vp in yp)(Ap=yp[Vp])in Lp||(Lp[Ap]=[]),Lp[Ap].push(bp[Vp]);var zp=Object.keys(Lp).map(function(fm){return parseInt(fm,10)}).sort(reverseNumberCompare);ap.layers=[];for(var Wp=0,Up=zp;Wp<Up.length;Wp++){var qp=Lp[Ap=Up[Wp]];qp.sort(function(fm,wm){var pm=Ep[fm.id],hm=Ep[wm.id];return pm<hm?-1:pm>hm?1:0});for(var Bp=0,Yp=qp;Bp<Yp.length;Bp++)(cp=Yp[Bp])instanceof np&&ap.internalContainerRefs.push(cp),ap.layers.push(cp)}ap.layersByDepth=Lp,zp=Object.keys(Tp).map(function(fm){return parseInt(fm,10)}).sort(reverseNumberCompare);for(var Xp=ap.inputs.slice(),Qp=[],am=0,Jp=zp;am<Jp.length;am++)for(var im=0,Zp=Tp[Ap=Jp[am]];im<Zp.length;im++){var Gp;if((cp=(Gp=Zp[im]).outboundLayer)!=null){for(var tm=0,om=Gp.inputTensors;tm<om.length;tm++)if(Op=om[tm],Xp.indexOf(Op)===-1)throw new RuntimeError("Graph disconnected: cannot obtain value for tensor "+Op+' at layer "'+cp.name+'". The following previous layers were accessed without issue: '+Qp);for(var em=0,_m=Gp.outputTensors;em<_m.length;em++)Op=_m[em],Xp.push(Op);Qp.push(cp.name)}}ap.nodesByDepth=Tp;for(var Cm=ap.layers.map(function(fm){return fm.name}),Rm=function(fm){var wm=Cm.filter(function(pm){return pm===fm}).length;if(wm!==1)throw new RuntimeError('The name "'+fm+'" is used '+wm+" times in the model. All layer names should be unique. Layer names: "+JSON.stringify(Cm))},Em=0,$m=Cm;Em<$m.length;Em++)Rm($m[Em]);return ap.outboundNodes=[],ap.inboundNodes=[],new Node({outboundLayer:ap,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:ap.inputs,outputTensors:ap.outputs,inputMasks:ap.inputs.map(function(fm){return null}),outputMasks:ap.outputs.map(function(fm){return null}),inputShapes:ap.inputs.map(function(fm){return fm.shape}),outputShapes:ap.outputs.map(function(fm){return fm.shape})}),ap.built=!0,ap._refCount=1,ap}return __extends$h(np,_d),np.prototype.assertNotDisposed=function(){if(this._refCount===0)throw new Error("Container '"+this.name+"' is already disposed.")},np.prototype.dispose=function(){this.assertNotDisposed();var rp={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount==0){for(var ap=0,sp=this.layers;ap<sp.length;ap++){var lp=sp[ap];rp.numDisposedVariables+=lp.dispose().numDisposedVariables}for(var up=0,cp=this.internalContainerRefs;up<cp.length;up++){var dp=cp[up];rp.numDisposedVariables+=dp.dispose().numDisposedVariables}}return rp.refCountAfterDispose=this._refCount,rp},Object.defineProperty(np.prototype,"trainable",{get:function(){return this.trainable_},set:function(rp){this.layers.forEach(function(ap){ap._trainableWeights.forEach(function(sp){return sp.trainable=rp})}),this.trainable_=rp},enumerable:!0,configurable:!0}),Object.defineProperty(np.prototype,"trainableWeights",{get:function(){if(this._trainableWeights.length>0)throw new ValueError("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];for(var rp=[],ap=0,sp=this.layers;ap<sp.length;ap++){var lp=sp[ap];rp=rp.concat(lp.trainableWeights)}return rp},enumerable:!0,configurable:!0}),Object.defineProperty(np.prototype,"nonTrainableWeights",{get:function(){for(var rp=[],ap=0,sp=this.layers;ap<sp.length;ap++){var lp=sp[ap];rp.push.apply(rp,lp.nonTrainableWeights)}if(!this.trainable){for(var up=[],cp=0,dp=this.layers;cp<dp.length;cp++)lp=dp[cp],up.push.apply(up,lp.trainableWeights);return up.concat(rp)}return rp},enumerable:!0,configurable:!0}),Object.defineProperty(np.prototype,"weights",{get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)},enumerable:!0,configurable:!0}),np.prototype.loadWeights=function(rp,ap){ap===void 0&&(ap=!0);for(var sp={},lp=0,up=0,cp=this.layers;up<cp.length;up++)for(var dp=0,fp=cp[up].weights;dp<fp.length;dp++){var pp=fp[dp];if(sp[pp.originalName]!=null)throw new ValueError("Duplicate weight name: "+pp.originalName);sp[pp.originalName]=pp,lp++}var hp=[];for(var mp in rp){if(sp[mp]!=null)hp.push([sp[mp],rp[mp]]);else if(ap)throw new ValueError("Provided weight data has no target variable: "+mp);delete sp[mp]}if(ap){var gp=[];for(var vp in sp)gp.push(vp);if(gp.length>0)throw new ValueError(gp.length+" of "+lp+" weights are not set: "+gp)}batchSetValue(hp)},np.prototype.updatedConfig=function(){var rp=this.getConfig(),ap={};return ap.className=this.getClassName(),ap.config=rp,ap.kerasVersion="tfjs-layers "+version$8,ap.backend="TensorFlow.js",ap},np.prototype.toJSON=function(rp,ap){ap===void 0&&(ap=!0);var sp=convertTsToPythonic(this.updatedConfig());return ap?JSON.stringify(sp):sp},np.prototype.call=function(rp,ap){var sp=this;return je(function(){rp=toList(rp);for(var lp=new FeedDict,up=0;up<sp.inputs.length;++up)lp.add(sp.inputs[up],rp[up]);return execute(sp.outputs,lp,ap)})},np.prototype.computeMask=function(rp,ap){var sp=this;return je(function(){var lp;return rp=toList(rp),lp=ap==null?pyListRepeat(null,rp.length):toList(ap),sp.runInternalGraph(rp,lp)[1]})},np.prototype.computeOutputShape=function(rp){var ap=normalizeShapeList(rp);if(ap.length!==this.inputLayers.length)throw new ValueError("Invalid inputShape argument "+rp+": model has "+this.inputLayers.length+" tensor inputs.");for(var sp={},lp=0;lp<ap.length;lp++){var up=this.inputLayers[lp],cp=ap[lp];sp[Pp=up.name+"_0_0"]=cp}var dp=Object.keys(this.nodesByDepth).map(function(jp){return parseInt(jp,10)}).sort(reverseNumberCompare);if(dp.length>1)for(var fp=0,pp=dp;fp<pp.length;fp++)for(var hp=pp[fp],mp=0,gp=this.nodesByDepth[hp];mp<gp.length;mp++){var vp=gp[mp];if(up=vp.outboundLayer,this.inputLayers.map(function(jp){return jp.id}).indexOf(up.id)===-1){for(var xp=[],Sp=0;Sp<vp.inboundLayers.length;Sp++){var yp=vp.inboundLayers[Sp],bp=vp.nodeIndices[Sp],Ep=vp.tensorIndices[Sp],wp=sp[Pp=yp.name+"_"+bp+"_"+Ep];xp.push(wp)}var _p=normalizeShapeList(up.computeOutputShape(singletonOrArray(xp))),Cp=up.inboundNodes.indexOf(vp);for(Sp=0;Sp<_p.length;Sp++)sp[Pp=up.name+"_"+Cp+"_"+Sp]=_p[Sp]}}var $p=[],Rp=[];for(lp=0;lp<this.outputLayers.length;lp++){up=this.outputLayers[lp],Cp=this.outputLayersNodeIndices[lp],Ep=this.outputLayersTensorIndices[lp];var Pp=up.name+"_"+Cp+"_"+Ep;Rp.push(Pp)}for(lp=0;lp<Rp.length;lp++){var Op=Rp[lp];assert(Op in sp),$p.push(sp[Op])}return singletonOrArray($p)},np.prototype.runInternalGraph=function(rp,ap){ap==null&&(ap=pyListRepeat(null,rp.length));for(var sp={},lp=0;lp<this.inputs.length;++lp){var up=this.inputs[lp],cp=rp[lp],dp=ap[lp];sp[up.id]=[cp,dp]}for(var fp=0,pp=Object.keys(this.nodesByDepth).map(function(Lp){return parseInt(Lp,10)}).sort(reverseNumberCompare);fp<pp.length;fp++)for(var hp=pp[fp],mp=0,gp=this.nodesByDepth[hp];mp<gp.length;mp++){for(var vp=gp[mp],xp=vp.outboundLayer,Sp=vp.inputTensors,yp=vp.outputTensors,bp=new Array,Ep=0,wp=Sp;Ep<wp.length;Ep++)(up=wp[Ep]).id in sp&&bp.push(sp[up.id]);if(bp.length===Sp.length){var _p={},Cp=void 0,$p=void 0,Rp=void 0,Pp=void 0;if(vp.callArgs!=null&&(_p=vp.callArgs),bp.length===1){var Op=bp[0],jp=Op[0],Mp=Op[1];_p.mask==null&&(_p.mask=Mp),Rp=toList(xp.call(jp,_p)),Pp=toList(xp.computeMask(jp,Mp)),Cp=[jp],$p=[Mp]}else Cp=bp.map(function(Lp){return Lp[0]}),$p=bp.map(function(Lp){return Lp[1]}),_p.mask==null&&(_p.mask=$p),Rp=toList(xp.call(Cp,_p)),Pp=toList(xp.computeMask(Cp,$p));if(xp.activityRegularizer)throw new NotImplementedError("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(lp=0;lp<yp.length;++lp)up=yp[lp],cp=Rp[lp],dp=Pp[lp],sp[up.id]=[cp,dp]}}for(var Ap=[],Dp=[],Fp=[],Ip=0,kp=this.outputs;Ip<kp.length;Ip++){assert((up=kp[Ip]).id in sp,"Could not compute output "+up.name+" : "+up.id);var Tp=sp[up.id],Np=Tp[0];dp=Tp[1],Fp.push(Np.shape),Ap.push(Np),Dp.push(dp)}return[Ap,Dp,Fp]},np.prototype.buildNodeConversionMap=function(rp){for(var ap,sp={},lp=0,up=this.layers;lp<up.length;lp++){var cp=up[lp];ap=cp instanceof np?1:0;for(var dp=0;dp<cp.inboundNodes.length;dp++){var fp=np.nodeKey(cp,dp);this.containerNodes.has(fp)&&(sp[fp]=ap,ap+=1)}}return sp},np.prototype.getLayer=function(rp,ap){if(ap!=null){if(this.layers.length<=ap)throw new ValueError("Was asked to retrieve layer at index "+ap+", but model only has "+this.layers.length+" layer(s).");return this.layers[ap]}if(rp==null)throw new ValueError("Provide either a layer name or layer index");for(var sp=0,lp=this.layers;sp<lp.length;sp++){var up=lp[sp];if(up.name===rp)return up}throw new ValueError("No such layer: "+rp)},np.prototype.calculateLosses=function(){var rp=this;return je(function(){for(var ap=[],sp=0,lp=rp.layers;sp<lp.length;sp++)for(var up=lp[sp],cp=0;cp<up.inboundNodes.length;++cp){var dp=np.nodeKey(up,cp);rp.containerNodes.has(dp)&&ap.push.apply(ap,up.calculateLosses())}return ap})},np.prototype.getConfig=function(){for(var rp={name:this.name},ap=this.buildNodeConversionMap(this.layers),sp=[],lp=0,up=this.layers;lp<up.length;lp++){for(var cp=(_p=up[lp]).getClassName(),dp=_p.getConfig(),fp=[],pp=0;pp<_p.inboundNodes.length;pp++){var hp=_p.inboundNodes[pp],mp=np.nodeKey(_p,pp),gp={};if(this.containerNodes.has(mp)){if(hp.callArgs)try{JSON.stringify(hp.callArgs),gp=hp.callArgs}catch{console.warn("Layer "+_p.name+" was passed non-serializable keyword arguments: "+hp.callArgs+". They will not be included in the serialized model (and thus will be missing at deserialization time)."),gp={}}if(hp.inboundLayers.length>0){for(var vp=[],xp=0;xp<hp.inboundLayers.length;xp++){var Sp=hp.inboundLayers[xp],yp=hp.nodeIndices[xp],bp=hp.tensorIndices[xp];($p=ap[np.nodeKey(Sp,yp)])==null&&($p=0),vp.push([Sp.name,$p,bp,gp])}fp.push(vp)}}}var Ep={};Ep.name=_p.name,Ep.className=cp,Ep.config=dp,Ep.inboundNodes=fp,sp.push(Ep)}rp.layers=sp;var wp=[];for(xp=0;xp<this.inputLayers.length;xp++){var _p=this.inputLayers[xp];yp=this.inputLayersNodeIndices[xp],mp=np.nodeKey(_p,yp),this.containerNodes.has(mp)&&(($p=ap[mp])!==null&&$p!==void 0||($p=0),bp=this.inputLayersTensorIndices[xp],wp.push([_p.name,$p,bp]))}rp.inputLayers=wp;var Cp=[];for(xp=0;xp<this.outputLayers.length;xp++)if(_p=this.outputLayers[xp],yp=this.outputLayersNodeIndices[xp],mp=np.nodeKey(_p,yp),this.containerNodes.has(mp)){var $p;($p=ap[mp])!==null&&$p!==void 0||($p=0),bp=this.outputLayersTensorIndices[xp],Cp.push([_p.name,$p,bp])}return rp.outputLayers=Cp,rp},np.fromConfig=function(rp,ap,sp,lp){lp===void 0&&(lp=!1);var up={},cp={};function dp(Ip,kp){Ip.name in cp?cp[Ip.name].push(kp):cp[Ip.name]=[kp]}function fp(Ip,kp){for(var Tp,Np=[],Lp=0,Vp=kp;Lp<Vp.length;Lp++){var zp=Vp[Lp],Wp=zp[0],Up=zp[1],qp=zp[2];if(Tp=zp[3]==null?{}:zp[3],!(Wp in up))return void dp(Ip,kp);var Bp=up[Wp];if(Bp.inboundNodes.length<=Up)return void dp(Ip,kp);var Yp=Bp.inboundNodes[Up];Np.push(Yp.outputTensors[qp])}Np.length>0&&Ip.apply(singletonOrArray(Np),Tp)}function pp(Ip){var kp=Ip.name,Tp=deserialize(Ip,ap.customObjects!=null?ap.customObjects:{});Tp.setFastWeightInitDuringBuild(lp),up[kp]=Tp,Ip.inboundNodes.forEach(function(Np){if(!(Np instanceof Array))throw new ValueError("Corrupted configuration, expected array for nodeData: "+Np);dp(Tp,Np)})}for(var hp=ap.name,mp=ap.layers,gp=0,vp=mp;gp<vp.length;gp++)pp(yp=vp[gp]);for(;!isObjectEmpty(cp);)for(var xp=0,Sp=mp;xp<Sp.length;xp++){var yp=Sp[xp];if((Fp=up[yp.name]).name in cp){var bp=cp[Fp.name];delete cp[Fp.name];for(var Ep=0,wp=bp;Ep<wp.length;Ep++)fp(Fp,wp[Ep])}}for(var _p=[],Cp=[],$p=0,Rp=ap.inputLayers;$p<Rp.length;$p++){var Pp=(yp=Rp[$p])[0],Op=yp[1],jp=yp[2];assert(Pp in up);var Mp=(Fp=up[Pp]).inboundNodes[Op].outputTensors;_p.push(Mp[jp])}for(var Ap=0,Dp=ap.outputLayers;Ap<Dp.length;Ap++){Pp=(yp=Dp[Ap])[0],Op=yp[1],jp=yp[2],assert(Pp in up);var Fp;Mp=(Fp=up[Pp]).inboundNodes[Op].outputTensors,Cp.push(Mp[jp])}return new rp({inputs:_p,outputs:Cp,name:hp})},Object.defineProperty(np.prototype,"stateful",{get:function(){if(this._stateful)throw new ValueError("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(var rp=0,ap=this.layers;rp<ap.length;rp++)if(ap[rp].stateful)return!0;return!1},enumerable:!0,configurable:!0}),np.prototype.resetStates=function(){var rp=this;je(function(){rp.layers.forEach(function(ap){ap.stateful&&ap.resetStates()})})},np}(Layer);function standardizeSampleOrClassWeights(_d,np,rp){var ap=np.length;if(_d==null||Array.isArray(_d)&&_d.length===0)return np.map(function(lp){return null});if(ap===1)return Array.isArray(_d)&&_d.length===1?_d:typeof _d=="object"&&np[0]in _d?[_d[np[0]]]:[_d];if(Array.isArray(_d)){if(_d.length!==ap)throw new Error("Provided "+rp+" is an array of "+_d.length+" element(s), but the model has "+ap+" outputs. Make sure a set of weights is provided for each model output.");return _d}if(typeof _d=="object"&&Object.keys(_d).length>0&&typeof _d[Object.keys(_d)[0]]=="object"){var sp=[];return np.forEach(function(lp){lp in _d?sp.push(_d[lp]):sp.push(null)}),sp}throw new Error("The model has multiple ("+ap+") outputs, so "+rp+" must be either an array with "+ap+" elements or an object with "+np+" keys. Provided "+rp+" not understood: "+JSON.stringify(_d))}function standardizeClassWeights(_d,np){return standardizeSampleOrClassWeights(_d,np,"classWeight")}function standardizeWeights(_d,np,rp,ap){return __awaiter$8(this,void 0,void 0,function(){var sp,lp,up,cp,dp;return __generator$8(this,function(fp){switch(fp.label){case 0:if(np!=null||ap!=null)throw new Error("Support sampleWeight is not implemented yet");return rp==null?[3,2]:(sp=je(function(){if(_d.shape.length===1)return _d.clone();if(_d.shape.length===2){if(_d.shape[1]>1)return _d.argMax(1);if(_d.shape[1]===1)return _d.reshape([_d.shape[0]]);throw new Error("Encountered unexpected last-dimension size ("+_d.shape[1]+") during handling of class weights. The size is expected to be >= 1.")}throw new Error("Unexpected rank of target (y) tensor ("+_d.rank+") during handling of class weights. The rank is expected to be 1 or 2.")}),cp=(up=Array).from,[4,sp.data()]);case 1:return lp=cp.apply(up,[fp.sent()]),Xe(sp),dp=[],lp.forEach(function(pp){if(rp[pp]==null)throw new Error("classWeight must contain all classes in the training data. The class "+pp+" exists in the data but not in classWeight");dp.push(rp[pp])}),[2,Dn(dp,"float32")];case 2:return[2,null]}})})}function computeWeightedLoss(_d,np){return tc(_d,np)}var DEFAULT_VALIDATION_BATCH_SIZE=32;function standardizeDataIteratorOutput(_d,np){var rp,ap,sp=np;rp=sp.xs,ap=sp.ys,tt.assert(rp!=null&&ap!=null,function(){return"A Dataset iterator for fitDataset() is expected to generate objects of the form `{xs: xVal, ys: yVal}`, where the two values may be `tf.Tensor`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates "+np});var lp=flattenTensorOrArrayOrMap("input",_d.inputNames,rp),up=flattenTensorOrArrayOrMap("output",_d.outputNames,ap),cp=lp[0].shape[0];tt.assert(lp.length===_d.inputs.length,function(){return"LayersModel has "+_d.inputs.length+" inputs, but the dataset provides "+lp.length+" inputs.  (Expected input keys: "+JSON.stringify(_d.inputNames)+")"}),tt.assert(up.length===_d.outputs.length,function(){return"LayersModel has "+_d.outputs.length+" outputs, but the dataset provides "+up.length+" outputs.  (Expected output keys: "+JSON.stringify(_d.outputNames)+")"});var dp=function(mp){tt.assert(lp[mp].shape[0]===cp,function(){return"Batch size mismatch: input "+_d.inputNames[mp]+" has "+lp[mp].shape[0]+"; expected  "+cp+" based on input "+_d.inputNames[0]+"."})};for(var fp in lp)dp(fp);var pp=function(mp){tt.assert(up[mp].shape[0]===cp,function(){return"Batch size mismatch: output "+_d.outputNames[mp]+" has "+up[mp].shape[0]+"; expected  "+cp+" based on input "+_d.inputNames[0]+"."})};for(var hp in up)pp(hp);return{xs:lp,ys:up}}function flattenTensorOrArrayOrMap(_d,np,rp){if(rp instanceof dt)return[rp];if(Array.isArray(rp))return tt.assert(rp.length===np.length,function(){return"Received an array of "+rp.length+" Tensors, but expected "+np.length+" to match the "+_d+" keys "+np+"."}),rp;for(var ap=[],sp=0,lp=np;sp<lp.length;sp++){var up=lp[sp];if(rp[up]==null)throw new ValueError("The feature data generated by the dataset lacks the required "+_d+" key '"+up+"'.");ap.push(rp[up])}return ap}function standardizeTensorValidationData(_d){if(_d.length===3)throw new NotImplementedError("Validation with sample weights is not implemented yet.");return{xs:_d[0],ys:_d[1]}}function fitDataset(_d,np,rp){return __awaiter$8(this,void 0,void 0,function(){var ap,sp,lp,up,cp,dp,fp,pp,hp,mp,gp,vp,xp,Sp,yp,bp,Ep,wp,_p,Cp,$p,Rp,Pp,Op,jp,Mp,Ap,Dp,Fp,Ip,kp,Tp,Np,Lp;return __generator$8(this,function(Vp){switch(Vp.label){case 0:if(ap=rp.batchesPerEpoch!=null,tt.assert(_d.optimizer!=null,function(){return"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."}),tt.assert(rp!=null,function(){return"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."}),tt.assert(rp.epochs!=null&&rp.epochs>0&&Number.isInteger(rp.epochs),function(){return"For fitDataset(), config.epochs is expected to be a positive integer, but got "+rp.epochs}),tt.assert(!ap||rp.batchesPerEpoch>0&&Number.isInteger(rp.batchesPerEpoch),function(){return"For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got "+rp.batchesPerEpoch}),tt.assert(rp.validationSplit==null,function(){return"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."}),_d.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");_d.isTraining=!0,Vp.label=1;case 1:return Vp.trys.push([1,,26,27]),sp=rp.validationData!=null,lp=void 0,up=void 0,sp&&(isDatasetObject(rp.validationData)?tt.assert(rp.validationBatches==null||rp.validationBatches>0&&Number.isInteger(rp.validationBatches),function(){return"For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got "+rp.validationBatches}):(cp=standardizeTensorValidationData(rp.validationData),lp=cp.xs,up=cp.ys)),dp=_d.makeTrainFunction(),fp=_d.getDedupedMetricsNames(),pp=void 0,pp=sp?fp.slice().concat(fp.map(function(zp){return"val_"+zp})):fp.slice(),hp=standardizeCallbacks(rp.callbacks,rp.yieldEvery),mp=rp.verbose==null?1:rp.verbose,gp=configureCallbacks(hp,mp,rp.epochs,null,null,getStepsPerEpoch(np,rp),null,sp,pp),vp=gp.callbackList,xp=gp.history,vp.setModel(_d),_d.history=xp,[4,vp.onTrainBegin()];case 2:return Vp.sent(),_d.stopTraining_=!1,Sp=rp.initialEpoch==null?0:rp.initialEpoch,[4,np.iterator()];case 3:yp=Vp.sent(),Vp.label=4;case 4:return Sp<rp.epochs?(bp={},[4,vp.onEpochBegin(Sp)]):[3,23];case 5:return Vp.sent(),Ep=0,wp=0,ap?[3,7]:[4,np.iterator()];case 6:yp=Vp.sent(),Vp.label=7;case 7:return!ap||Ep<rp.batchesPerEpoch?[4,yp.next()]:[3,21];case 8:return _p=Vp.sent(),ap&&_p.done?(console.warn("You provided `batchesPerEpoch` as "+rp.batchesPerEpoch+", but your dataset iterator ran out of data after "+Ep+" batches; interrupting training. Make sure that your dataset can generate at least `batchesPerEpoch * epochs` batches (in this case, "+rp.batchesPerEpoch*rp.epochs+" batches). You may need to use the repeat() function when building your dataset."),[3,21]):_p.value==null?[3,15]:(Cp=standardizeDataIteratorOutput(_d,_p.value),$p=Cp.xs,Rp=Cp.ys,(Pp={}).batch=wp,Pp.size=$p[0].shape[0],[4,vp.onBatchBegin(wp,Pp)]);case 9:if(Vp.sent(),Op=[],rp.classWeight==null)return[3,13];jp=standardizeClassWeights(rp.classWeight,_d.outputNames),Lp=0,Vp.label=10;case 10:return Lp<jp.length?(Ap=(Mp=Op).push,[4,standardizeWeights(Rp[Lp],null,jp[Lp])]):[3,13];case 11:Ap.apply(Mp,[Vp.sent()]),Vp.label=12;case 12:return++Lp,[3,10];case 13:for(Dp=$p.concat(Rp).concat(Op),Fp=dp(Dp),Xe(Dp),Lp=0;Lp<fp.length;++Lp)Ip=fp[Lp],kp=Fp[Lp],Pp[Ip]=kp,$e(kp);return[4,vp.onBatchEnd(wp,Pp)];case 14:Vp.sent(),disposeTensorsInLogs(Pp),wp++,Ep++,Vp.label=15;case 15:return(ap?Ep>=rp.batchesPerEpoch:_p.done)?sp?(Tp=void 0,isDatasetObject(rp.validationData)?(Np=toList,[4,_d.evaluateDataset(rp.validationData,{batches:rp.validationBatches})]):[3,17]):[3,19]:[3,20];case 16:return Tp=Np.apply(void 0,[Vp.sent()]),[3,18];case 17:Tp=toList(_d.evaluate(lp,up,{batchSize:rp.validationBatchSize==null?DEFAULT_VALIDATION_BATCH_SIZE:rp.validationBatchSize,verbose:0})),Vp.label=18;case 18:for(Lp=0;Lp<_d.metricsNames.length;++Lp)bp["val_"+_d.metricsNames[Lp]]=Tp[Lp];Vp.label=19;case 19:return[3,21];case 20:return _d.stopTraining_?[3,21]:[3,7];case 21:return[4,vp.onEpochEnd(Sp,bp)];case 22:return Vp.sent(),Sp++,_d.stopTraining_?[3,23]:[3,4];case 23:return[4,vp.onTrainEnd()];case 24:return Vp.sent(),[4,_d.history.syncData()];case 25:return Vp.sent(),[2,_d.history];case 26:return _d.isTraining=!1,[7];case 27:return[2]}})})}function getStepsPerEpoch(_d,np){var rp=null;return np.batchesPerEpoch!=null?rp=np.batchesPerEpoch:Number.isFinite(_d.size)&&(rp=_d.size),rp}function isDatasetObject(_d){return typeof _d.iterator=="function"}function isLazyIteratorObject(_d){return typeof _d.next=="function"}function evaluateDataset(_d,np,rp){return __awaiter$8(this,void 0,void 0,function(){var ap,sp,lp,up,cp,dp,fp,pp,hp,mp;return __generator$8(this,function(gp){switch(gp.label){case 0:if(ap=(rp=rp||{}).batches!=null,sp=_d.testFunction,lp=[],rp.verbose>0)throw new NotImplementedError("Verbose mode is not implemented yet.");return tt.assert(!ap||rp.batches>0&&Number.isInteger(rp.batches),function(){return"Test loop expects `batches` to be a positive integer, but received "+JSON.stringify(rp.batches)}),isLazyIteratorObject(np)?(cp=np,[3,3]):[3,1];case 1:return[4,np.iterator()];case 2:cp=gp.sent(),gp.label=3;case 3:up=cp,dp=0,fp=0,pp=function(){var vp;return __generator$8(this,function(xp){switch(xp.label){case 0:return[4,up.next()];case 1:return vp=xp.sent(),lp=je(function(){if(vp.value){var Sp=standardizeDataIteratorOutput(_d,vp.value),yp=Sp.xs,bp=Sp.ys,Ep=yp.concat(bp),wp=je(function(){return sp(Ep)});if(Xe(Ep),fp===0)for(var _p=0;_p<wp.length;++_p)lp.push(An(0));var Cp=Ep[0].shape[0],$p=function(Rp){var Pp=wp[Rp],Op=lp[Rp];lp[Rp]=je(function(){return Vs(lp[Rp],tc(Cp,Pp))}),fp>0&&Xe(Op)};for(_p=0;_p<wp.length;++_p)$p(_p);Xe(wp),dp+=Cp,++fp}return lp}),vp.done?(ap&&console.warn("Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least `batches` batches (in this case, "+rp.batches+" batches). You may need to use the repeat() function when building your dataset."),[2,"break"]):[2]}})},gp.label=4;case 4:return!ap||fp<rp.batches?[5,pp()]:[3,6];case 5:return gp.sent()==="break"?[3,6]:[3,4];case 6:for(hp=0;hp<lp.length;++hp)mp=lp[hp],lp[hp]=qs(lp[hp],dp),Xe(mp);return[2,singletonOrArray(lp)]}})})}function checkBatchSize(_d){tt.assert(_d>0&&Number.isInteger(_d),function(){return"batchSize is required to be a positive integer, but got "+_d})}function sliceArrays(_d,np,rp){return _d==null?[null]:Array.isArray(_d)?_d.map(function(ap){return sliceAlongFirstAxis(ap,np,rp-np)}):sliceAlongFirstAxis(_d,np,rp-np)}function sliceArraysByIndices(_d,np){return je(function(){return _d==null?null:Array.isArray(_d)?_d.map(function(rp){return sliceArraysByIndices(rp,np)}):gather$1(_d,np.dtype==="int32"?np:np.toInt())})}function makeBatches(_d,np){for(var rp=[],ap=0,sp=null;ap<_d;)(sp=ap+np)>=_d&&(sp=_d),rp.push([ap,sp]),ap=sp;return rp}function fitLoop(_d,np,rp,ap,sp,lp,up,cp,dp,fp,pp,hp,mp,gp,vp){return __awaiter$8(this,void 0,void 0,function(){var xp,Sp,yp,bp,Ep,wp,_p,Cp;return __generator$8(this,function($p){switch($p.label){case 0:if(sp==null&&(sp=32),lp==null&&(lp=1),pp==null&&(pp=!0),mp==null&&(mp=0),xp=!1,dp!=null&&fp!=null&&(xp=!0),vp!=null&&(xp=!0,gp==null))throw new ValueError("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");return(Sp=_d.checkNumSamples(rp,sp,gp,"steps_per_epoch"))!=null&&(yp=range(0,Sp)),up==null&&(up=1),bp=configureCallbacks(cp,up,lp,mp,Sp,gp,sp,xp,hp),Ep=bp.callbackList,wp=bp.history,Ep.setModel(_d),_d.history=wp,[4,Ep.onTrainBegin()];case 1:$p.sent(),_d.stopTraining_=!1,_p=function(Rp){var Pp,Op,jp,Mp,Ap;return __generator$8(this,function(Dp){switch(Dp.label){case 0:return[4,Ep.onEpochBegin(Rp)];case 1:if(Dp.sent(),Pp={},gp==null)return[3,2];throw new NotImplementedError("stepsPerEpoch mode is not implemented yet.");case 2:if(pp==="batch")throw new NotImplementedError("batch shuffling is not implemneted yet");pp&&tt.shuffle(yp),Op=Dn(yp),jp=makeBatches(Sp,sp),Mp=function(Fp){var Ip;return __generator$8(this,function(kp){switch(kp.label){case 0:return Ip={},[4,Ep.onBatchBegin(Fp,Ip)];case 1:return kp.sent(),je(function(){var Tp=jp[Fp][0],Np=jp[Fp][1],Lp=sliceAlongFirstAxis(Op,Tp,Np-Tp);Ip.batch=Fp,Ip.size=Np-Tp;for(var Vp=sliceArraysByIndices(rp,Lp),zp=np(Vp),Wp=0;Wp<ap.length;++Wp){var Up=ap[Wp],qp=zp[Wp];Ip[Up]=qp,$e(qp)}if(Fp===jp.length-1&&xp){var Bp=_d.testLoop(dp,fp,sp);for(Wp=0;Wp<ap.length;++Wp)Up=ap[Wp],qp=Bp[Wp],$e(qp),Pp["val_"+Up]=qp}}),[4,Ep.onBatchEnd(Fp,Ip)];case 2:return kp.sent(),disposeTensorsInLogs(Ip),_d.stopTraining_?[2,"break"]:[2]}})},Ap=0,Dp.label=3;case 3:return Ap<jp.length?[5,Mp(Ap)]:[3,6];case 4:if(Dp.sent()==="break")return[3,6];Dp.label=5;case 5:return++Ap,[3,3];case 6:Op.dispose(),Dp.label=7;case 7:return[4,Ep.onEpochEnd(Rp,Pp)];case 8:return Dp.sent(),_d.stopTraining_?[2,"break"]:[2]}})},Cp=mp,$p.label=2;case 2:return Cp<lp?[5,_p(Cp)]:[3,5];case 3:if($p.sent()==="break")return[3,5];$p.label=4;case 4:return++Cp,[3,2];case 5:return[4,Ep.onTrainEnd()];case 6:return $p.sent(),[4,_d.history.syncData()];case 7:return $p.sent(),[2,_d.history]}})})}function fitTensors(_d,np,rp,ap){return ap===void 0&&(ap={}),__awaiter$8(this,void 0,void 0,function(){var sp,lp,up,cp,dp,fp,pp,hp,mp,gp,vp,xp,Sp,yp,bp,Ep,wp,_p,Cp,$p,Rp,Pp;return __generator$8(this,function(Op){switch(Op.label){case 0:if(_d.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");_d.isTraining=!0,Op.label=1;case 1:return Op.trys.push([1,,7,8]),checkBatchSize(hp=ap.batchSize==null?32:ap.batchSize),mp=!1,[4,_d.standardizeUserData(np,rp,ap.sampleWeight,ap.classWeight,mp,hp)];case 2:if(gp=Op.sent(),sp=gp[0],lp=gp[1],pp=gp[2],vp=!1,xp=void 0,!(ap.validationData!=null&&ap.validationData.length>0))return[3,4];if(vp=!0,ap.validationData.length!==2)throw ap.validationData.length===3?new NotImplementedError("validationData including sample weights is not supported yet."):new ValueError("When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; "+ap.validationData+" is invalid.");return up=ap.validationData[0],cp=ap.validationData[1],Sp=!0,[4,_d.standardizeUserData(up,cp,null,null,Sp,hp)];case 3:return yp=Op.sent(),dp=yp[0],fp=yp[1],xp=dp.concat(fp),[3,5];case 4:ap.validationSplit!=null&&ap.validationSplit>0&&ap.validationSplit<1?(vp=!0,bp=Math.floor(sp[0].shape[0]*(1-ap.validationSplit)),Ep=sp[0].shape[0],dp=sliceArrays(sp,bp,Ep),sp=sliceArrays(sp,0,bp),fp=sliceArrays(lp,bp,Ep),lp=sliceArrays(lp,0,bp),xp=dp.concat(fp)):ap.validationSteps!=null&&(vp=!0),Op.label=5;case 5:return wp=sp.concat(lp).concat(pp),_d.checkTrainableWeightsConsistency(),_p=_d.makeTrainFunction(),Cp=_d.getDedupedMetricsNames(),$p=void 0,Rp=void 0,vp?(_d.makeTestFunction(),$p=_d.testFunction,Rp=Cp.slice().concat(Cp.map(function(jp){return"val_"+jp}))):($p=null,xp=[],Rp=Cp.slice()),Pp=standardizeCallbacks(ap.callbacks,ap.yieldEvery),[4,fitLoop(_d,_p,wp,Cp,hp,ap.epochs,ap.verbose,Pp,$p,xp,ap.shuffle,Rp,ap.initialEpoch,null,null)];case 6:return[2,Op.sent()];case 7:return _d.isTraining=!1,disposeNewTensors(sp,np),disposeNewTensors(lp,rp),disposeNewTensors(dp,up),disposeNewTensors(fp,cp),pp!=null&&Xe(pp),[7];case 8:return[2]}})})}function ensureTensorsRank2OrHigher(_d){var np=[];_d instanceof dt&&(_d=[_d]);for(var rp=0;rp<_d.length;++rp){var ap=_d[rp];if(ap.rank===1)np.push(expandDims$1(ap,1));else{if(ap.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");np.push(ap)}}return np}function disposeNewTensors(_d,np){if(_d!=null){var rp=[];if(np instanceof dt)rp.push(np.id);else if(Array.isArray(np))np.forEach(function(dp){return rp.push(dp.id)});else if(np!=null)for(var ap in np){var sp=np[ap];rp.push(sp.id)}var lp=[];if(_d instanceof dt)rp.indexOf(_d.id)===-1&&lp.push(_d);else if(Array.isArray(_d))_d.forEach(function(dp){rp.indexOf(dp.id)===-1&&lp.push(dp)});else if(_d!=null)for(var up in _d){var cp=_d[up];rp.indexOf(cp.id)===-1&&lp.push(cp)}lp.forEach(function(dp){dp.isDisposed||dp.dispose()})}}function isDataTensor(_d){return _d instanceof dt}function isDataArray(_d){return Array.isArray(_d)}function isDataDict(_d){return!isDataTensor(_d)&&!isDataArray(_d)}function standardizeInputData(_d,np,rp,ap,sp){if(ap===void 0&&(ap=!0),sp===void 0&&(sp=""),np==null||np.length===0){if(_d!=null){var lp=!1;if(isDataArray(_d)&&_d.length>0)lp=!0;else if(isDataDict(_d)){for(var up in _d)if(_d.hasOwnProperty(up)){lp=!0;break}}else lp=!0;if(lp)throw new ValueError("Error when checking model "+sp+" expected no data, but got "+_d)}return[]}if(_d==null)return np.map(function(Sp){return null});var cp;if(isDataDict(_d)){_d=_d,cp=[];for(var dp=0,fp=np;dp<fp.length;dp++){var pp=fp[dp];if(_d[pp]==null)throw new ValueError('No data provided for "'+pp+'". Need data for each key in: '+np);cp.push(_d[pp])}}else if(isDataArray(_d)){if((_d=_d).length!==np.length)throw new ValueError("Error when checking model "+sp+": the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see "+np.length+" Tensor(s), but instead got the following list of Tensor(s): "+_d);cp=_d}else{if(_d=_d,np.length>1)throw new ValueError("The model "+sp+" expects "+np.length+" Tensor(s), but only received one Tensor. Found: Tensor with shape "+_d.shape);cp=[_d]}if(cp=ensureTensorsRank2OrHigher(cp),rp!=null){for(var hp=0;hp<np.length;++hp)if(rp[hp]!=null){var mp=cp[hp];if(mp.shape.length!==rp[hp].length)throw new ValueError("Error when checking "+sp+": expected "+np[hp]+" to have "+rp[hp].length+" dimension(s). but got array with shape "+mp.shape);for(var gp=0;gp<rp[hp].length;++gp)if(gp!==0||ap){var vp=mp.shape[gp],xp=rp[hp][gp];if(xp!=null&&xp>=0&&vp!==xp)throw new ValueError("Error when checking "+sp+": expected "+np[hp]+" to have shape ["+rp[hp]+"], but got array with shape ["+mp.shape+"].")}}}return cp}function checkArrayLengths(_d,np,rp){var ap=unique(_d.map(function(lp){return lp.shape[0]}));ap.sort();var sp=unique(np.map(function(lp){return lp.shape[0]}));if(sp.sort(),ap.length>1)throw new ValueError("All input Tensors (x) should have the same number of samples. Got array shapes: "+JSON.stringify(_d.map(function(lp){return lp.shape})));if(sp.length>1)throw new ValueError("All target Tensors (y) should have the same number of samples. Got array shapes: "+JSON.stringify(np.map(function(lp){return lp.shape})));if(ap.length>0&&sp.length>0&&!tt.arraysEqual(ap,sp))throw new ValueError("Input Tensors should have the same number of samples as target Tensors. Found "+ap[0]+" input sample(s) and "+sp[0]+" target sample(s).")}function checkLossAndTargetCompatibility(_d,np,rp){for(var ap=[meanSquaredError,binaryCrossentropy,categoricalCrossentropy],sp=0;sp<_d.length;++sp){var lp=_d[sp],up=np[sp],cp=rp[sp];if(up!=null){if(up===categoricalCrossentropy&&lp.shape[lp.shape.length-1]===1)throw new ValueError("You are passing a target array of shape "+lp.shape+" while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].");if(ap.indexOf(up)!==-1)for(var dp=lp.shape.slice(1),fp=cp.slice(1),pp=0;pp<dp.length;++pp){var hp=dp[pp],mp=fp[pp];if(mp!=null&&hp!==mp)throw new ValueError("A target Tensor with shape "+lp.shape+" was passed for an output of shape "+cp+", while using a loss function that expects targets to have the same shape as the output.")}}}}function checkInputData(_d,np,rp,ap,sp){var lp;if(ap===void 0&&(ap=!0),sp===void 0&&(sp=""),Array.isArray(_d)){if(_d.length!==np.length)throw new ValueError("Error when checking model "+sp+": the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see "+np.length+" Tensor(s), but instead got "+_d.length+" Tensors(s).");lp=_d}else{if(np.length>1)throw new ValueError("The model expects "+np.length+" "+sp+" Tensors, but only received one Tensor. Found: array with shape "+JSON.stringify(_d.shape)+".");lp=[_d]}if(rp!=null){for(var up=0;up<np.length;++up)if(rp[up]!=null){var cp=lp[up];if(cp.shape.length!==rp[up].length)throw new ValueError("Error when checking "+sp+": expected "+np[up]+" to have "+rp[up].length+" dimension(s), but got array with shape "+JSON.stringify(cp.shape));for(var dp=0;dp<rp[up].length;++dp)if(dp!==0||ap){var fp=cp.shape[dp],pp=rp[up][dp];if(pp!=null&&pp!==fp)throw new ValueError("Error when checking "+sp+": expected "+np[up]+" to have shape "+JSON.stringify(rp[up])+" but got array with shape "+JSON.stringify(cp.shape)+".")}}}}function collectMetrics(_d,np){if(_d==null||Array.isArray(_d)&&_d.length===0)return np.map(function(dp){return[]});var rp;if(typeof _d=="string"||typeof _d=="function")rp=[_d];else{if(!Array.isArray(_d)&&typeof _d!="object")throw new TypeError("Type of metrics argument not understood. Expected an string,function, Array, or Object, found: "+_d);rp=_d}if(Array.isArray(rp))return np.map(function(dp){return rp});for(var ap=[],sp=0,lp=np;sp<lp.length;sp++){var up=lp[sp],cp=rp.hasOwnProperty(up)?rp[up]:[];Array.isArray(cp)||(cp=[cp]),ap.push(cp)}return ap}var LAYERS_MODEL_FORMAT_NAME="layers-model",LayersModel=function(_d){function np(rp){var ap=_d.call(this,rp)||this;return ap.isTraining=!1,ap}return __extends$h(np,_d),np.prototype.summary=function(rp,ap,sp){if(sp===void 0&&(sp=console.log),!this.built)throw new ValueError("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");printSummary(this,rp,ap,sp)},np.prototype.compile=function(rp){var ap=this;if(rp.loss==null&&(rp.loss=[]),this.loss=rp.loss,typeof rp.optimizer=="string")this.optimizer_=getOptimizer(rp.optimizer),this.isOptimizerOwned=!0;else{if(!(rp.optimizer instanceof Hf))throw new ValueError("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=rp.optimizer,this.isOptimizerOwned=!1}var sp=[];if(Array.isArray(rp.loss)||typeof rp.loss=="string"||typeof rp.loss=="function")if(Array.isArray(rp.loss)){if(rp.loss.length!==this.outputs.length)throw new ValueError("When passing an Array as loss, it should have one entry per model output. The model has "+this.outputs.length+" output(s), but you passed loss="+rp.loss+".");var lp=rp.loss;sp=lp.map(function(Sp){return get(Sp)})}else{var up=get(rp.loss);this.outputs.forEach(function(Sp){sp.push(up)})}else{for(var cp in rp.loss=rp.loss,rp.loss)if(this.outputNames.indexOf(cp)===-1)throw new ValueError('Unknown entry in loss dictionary: "'+cp+'". Only expected the following keys: '+this.outputNames);for(var dp=0,fp=this.outputNames;dp<fp.length;dp++){var pp=fp[dp];rp.loss[pp]==null&&console.warn('Output "'+pp+'" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to '+pp+" during training"),sp.push(get(rp.loss[pp]))}}this.lossFunctions=sp,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(var hp=0;hp<this.outputs.length;++hp){var mp=this.internalOutputShapes[hp],gp=this.outputNames[hp];this.feedOutputNames.push(gp),this.feedOutputShapes.push(mp),this.feedLossFns.push(this.lossFunctions[hp])}var vp=[];this.metrics=rp.metrics,this.metricsNames=["loss"],this.metricsTensors=[],nameScope("loss",function(){for(var Sp=0;Sp<ap.outputs.length;++Sp)if(vp.indexOf(Sp)===-1){var yp=ap.lossFunctions[Sp];ap.outputs.length>1&&(ap.metricsTensors.push([yp,Sp]),ap.metricsNames.push(ap.outputNames[Sp]+"_loss"))}});var xp=collectMetrics(rp.metrics,this.outputNames);nameScope("metric",function(){for(var Sp=function(bp){if(vp.indexOf(bp)!==-1)return"continue";(function(Ep){for(var wp,_p,Cp,$p=function(Op){if(typeof Op=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(Op)!==-1){var jp=ap.internalOutputShapes[bp];jp[jp.length-1]===1||ap.lossFunctions[bp]===binaryCrossentropy?["accuracy","acc"].indexOf(Op)!==-1?_p=binaryAccuracy:["crossentropy","ce"].indexOf(Op)!==-1&&(_p=binaryCrossentropy$1):ap.lossFunctions[bp]===sparseCategoricalCrossentropy?["accuracy","acc"].indexOf(Op)!==-1?_p=sparseCategoricalAccuracy:["crossentropy","ce"].indexOf(Op)!==-1&&(_p=sparseCategoricalCrossentropy$1):["accuracy","acc"].indexOf(Op)!==-1?_p=categoricalAccuracy:["crossentropy","ce"].indexOf(Op)!==-1&&(_p=categoricalCrossentropy$1);var Mp=void 0;["accuracy","acc"].indexOf(Op)!==-1?Mp="acc":["crossentropy","ce"].indexOf(Op)!==-1&&(Mp="ce"),Cp=_p,wp=""+Mp}else{var Ap=get$1(Op);Cp=Ap,wp=""+getLossOrMetricName(Op)}var Dp;nameScope(wp,function(){Dp=Cp}),function(Fp,Ip,kp){ap.outputNames.length>1&&(Ip=ap.outputNames[Fp]+"_"+Ip),ap.metricsNames.push(Ip),ap.metricsTensors.push([kp,Fp])}(bp,wp,Dp)},Rp=0,Pp=Ep;Rp<Pp.length;Rp++)$p(Pp[Rp])})(xp[bp])},yp=0;yp<ap.outputs.length;++yp)Sp(yp)}),this.collectedTrainableWeights=this.trainableWeights},np.prototype.checkTrainableWeightsConsistency=function(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")},np.prototype.evaluate=function(rp,ap,sp){sp===void 0&&(sp={});var lp=sp.batchSize==null?32:sp.batchSize;checkBatchSize(lp);var up=this.standardizeUserDataXY(rp,ap,!0,lp);try{var cp=up[0].concat(up[1]);this.makeTestFunction();var dp=this.testFunction;return singletonOrArray(this.testLoop(dp,cp,lp,sp.verbose,sp.steps))}finally{disposeNewTensors(up[0],rp),disposeNewTensors(up[1],ap)}},np.prototype.evaluateDataset=function(rp,ap){return __awaiter$8(this,void 0,void 0,function(){return __generator$8(this,function(sp){return this.makeTestFunction(),[2,evaluateDataset(this,rp,ap)]})})},np.prototype.checkNumSamples=function(rp,ap,sp,lp){var up;if(lp===void 0&&(lp="steps"),sp!=null){if(up=null,ap!=null)throw new ValueError("If "+lp+" is set, batchSize must be null or undefined.Got batchSize = "+ap)}else{if(rp==null)throw new ValueError("Either the input data should have a defined shape, or "+lp+" shoud be specified.");up=Array.isArray(rp)?rp[0].shape[0]:rp.shape[0]}return up},np.prototype.execute=function(rp,ap){if(Array.isArray(ap)&&ap.length===0)throw new ValueError("`outputs` is an empty Array, which is not allowed.");var sp=Array.isArray(ap),lp=sp?ap:[ap],up=this.retrieveSymbolicTensors(lp),cp=new FeedDict;if(rp instanceof dt&&(rp=[rp]),Array.isArray(rp)){if(rp.length!==this.inputs.length)throw new ValueError("The number of inputs provided ("+rp.length+") does not match the number of inputs of this model ("+this.inputs.length+").");for(var dp=0;dp<this.inputs.length;++dp)cp.add(this.inputs[dp],rp[dp])}else for(var fp=0,pp=this.inputs;fp<pp.length;fp++){var hp=pp[fp],mp=rp[hp.name];if(mp==null)throw new ValueError("No value is provided for the model's input "+hp.name);cp.add(hp,mp)}var gp=execute(up,cp);return sp?gp:gp[0]},np.prototype.retrieveSymbolicTensors=function(rp){for(var ap=pyListRepeat(null,rp.length),sp=rp.length,lp=0,up=this.layers;lp<up.length;lp++){for(var cp=up[lp],dp=Array.isArray(cp.output)?cp.output:[cp.output],fp=dp.map(function(gp){return gp.name}),pp=0;pp<rp.length;++pp){var hp=fp.indexOf(rp[pp]);if(hp!==-1&&(ap[pp]=dp[hp],sp--),sp===0)break}if(sp===0)break}if(sp>0){var mp=[];throw ap.forEach(function(gp,vp){gp==null&&mp.push(rp[vp])}),new ValueError("Cannot find SymbolicTensors for output name(s): "+JSON.stringify(mp))}return ap},np.prototype.predictLoop=function(rp,ap,sp){var lp=this;return ap===void 0&&(ap=32),sp===void 0&&(sp=!1),je(function(){var up=lp.checkNumSamples(rp);if(sp)throw new NotImplementedError("Verbose predictLoop() is not implemented yet.");for(var cp=makeBatches(up,ap),dp=lp.outputs.map(function(hp){return[]}),fp=function(hp){je(function(){var mp=cp[hp][0],gp=cp[hp][1],vp=sliceArrays(rp,mp,gp),xp=[];if(Array.isArray(vp))for(var Sp=0;Sp<vp.length;++Sp)xp.push({key:lp.inputs[Sp],value:vp[Sp]});else xp.push({key:lp.inputs[0],value:vp});var yp=new FeedDict(xp);return execute(lp.outputs,yp)}).forEach(function(mp,gp){return dp[gp].push(mp)})},pp=0;pp<cp.length;++pp)fp(pp);return singletonOrArray(dp.map(function(hp){return Gn(hp,0)}))})},np.prototype.predict=function(rp,ap){ap===void 0&&(ap={});var sp=ensureTensorsRank2OrHigher(rp);checkInputData(sp,this.inputNames,this.feedInputShapes,!1);try{var lp=ap.batchSize==null?32:ap.batchSize;return checkBatchSize(lp),this.predictLoop(sp,lp)}finally{disposeNewTensors(sp,rp)}},np.prototype.predictOnBatch=function(rp){checkInputData(rp,this.inputNames,this.feedInputShapes,!0);var ap=(Array.isArray(rp)?rp[0]:rp).shape[0];return this.predictLoop(rp,ap)},np.prototype.standardizeUserDataXY=function(rp,ap,sp,lp){if(this.optimizer_==null)throw new RuntimeError("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");for(var up=[],cp=0;cp<this.feedOutputShapes.length;++cp){var dp=this.feedOutputShapes[cp];this.feedLossFns[cp]===sparseCategoricalCrossentropy?up.push(dp.slice(0,dp.length-1).concat([1])):up.push(dp)}if(checkArrayLengths(rp=standardizeInputData(rp,this.feedInputNames,this.feedInputShapes,!1,"input"),ap=standardizeInputData(ap,this.feedOutputNames,up,!1,"target")),checkLossAndTargetCompatibility(ap,this.feedLossFns,this.feedOutputShapes),this.stateful&&lp!=null&&lp>0&&rp[0].shape[0]%lp!=0)throw new ValueError("In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size "+lp+". Found: "+rp[0].shape[0]+" sample(s).");return[rp,ap]},np.prototype.standardizeUserData=function(rp,ap,sp,lp,up,cp){return up===void 0&&(up=!0),__awaiter$8(this,void 0,void 0,function(){var dp,fp,pp,hp,mp,gp,vp,xp;return __generator$8(this,function(Sp){switch(Sp.label){case 0:if(dp=this.standardizeUserDataXY(rp,ap,up,cp),fp=dp[0],pp=dp[1],sp!=null)throw new Error("sample weight is not supported yet.");if(hp=null,lp==null)return[3,4];mp=standardizeClassWeights(lp,this.outputNames),hp=[],gp=0,Sp.label=1;case 1:return gp<mp.length?(xp=(vp=hp).push,[4,standardizeWeights(pp[gp],null,mp[gp])]):[3,4];case 2:xp.apply(vp,[Sp.sent()]),Sp.label=3;case 3:return++gp,[3,1];case 4:return[2,[fp,pp,hp]]}})})},np.prototype.testLoop=function(rp,ap,sp,lp,up){var cp=this;return lp===void 0&&(lp=0),je(function(){var dp=cp.checkNumSamples(ap,sp,up,"steps"),fp=[];if(lp>0)throw new NotImplementedError("Verbose mode is not implemented yet.");if(up!=null)throw new NotImplementedError("steps mode in testLoop() is not implemented yet");for(var pp=makeBatches(dp,sp),hp=Dn(range(0,dp)),mp=0;mp<pp.length;++mp){var gp=pp[mp][0],vp=pp[mp][1],xp=sliceAlongFirstAxis(hp,gp,vp-gp),Sp=sliceArraysByIndices(ap,xp),yp=rp(Sp);if(mp===0)for(var bp=0;bp<yp.length;++bp)fp.push(An(0));for(bp=0;bp<yp.length;++bp){var Ep=yp[bp];fp[bp]=Vs(fp[bp],tc(vp-gp,Ep))}}for(bp=0;bp<fp.length;++bp)fp[bp]=qs(fp[bp],dp);return fp})},np.prototype.getDedupedMetricsNames=function(){for(var rp=this.metricsNames,ap=[],sp=0;sp<rp.length;++sp){var lp=rp[sp],up=lp;count(rp,lp)>1&&(up+="_"+count(rp.slice(0,sp),lp)),ap.push(up)}return ap},np.prototype.makeTrainFunction=function(){var rp=this;return function(ap){var sp=[],lp=ap.slice(0,rp.inputs.length),up=ap.slice(rp.inputs.length,rp.inputs.length+rp.outputs.length),cp=ap.slice(rp.inputs.length+rp.outputs.length,rp.inputs.length+2*rp.outputs.length),dp=[],fp=rp.collectedTrainableWeights.map(function(pp){return pp.read()});return[rp.optimizer_.minimize(function(){for(var pp=[],hp=0;hp<rp.inputs.length;++hp)pp.push({key:rp.inputs[hp],value:lp[hp]});var mp,gp=new FeedDict(pp),vp=execute(rp.outputs,gp,{training:!0});for(hp=0;hp<rp.lossFunctions.length;++hp){var xp=(0,rp.lossFunctions[hp])(up[hp],vp[hp]);cp[hp]!=null&&(xp=computeWeightedLoss(xp,cp[hp]));var Sp=fl(xp);sp.push(Sp),mp=hp===0?xp:Vs(mp,xp)}for(hp=0;hp<rp.metricsTensors.length;++hp){var yp=void 0;if(rp.outputs.length>1&&hp<rp.outputs.length)yp=sp[hp];else{var bp=rp.metricsTensors[hp][0],Ep=rp.metricsTensors[hp][1];yp=fl(bp(up[Ep],vp[Ep]))}$e(yp),dp.push(yp)}return mp=fl(mp),rp.calculateLosses().forEach(function(wp){mp=Vs(mp,wp)}),mp},!0,fp)].concat(dp)}},np.prototype.makeTestFunction=function(){var rp=this;this.testFunction=function(ap){return je(function(){for(var sp,lp=[],up=ap.slice(0,rp.inputs.length),cp=ap.slice(rp.inputs.length,rp.inputs.length+rp.outputs.length),dp=[],fp=0;fp<rp.inputs.length;++fp)dp.push({key:rp.inputs[fp],value:up[fp]});var pp=new FeedDict(dp),hp=execute(rp.outputs,pp);for(fp=0;fp<rp.lossFunctions.length;++fp){var mp=rp.lossFunctions[fp],gp=fl(mp(cp[fp],hp[fp]));sp=fp===0?gp:Vs(sp,gp),lp.push(sp)}for(fp=0;fp<rp.metricsTensors.length;++fp){var vp=rp.metricsTensors[fp][0],xp=rp.metricsTensors[fp][1],Sp=fl(vp(cp[xp],hp[xp]));lp.push(Sp)}return lp})}},np.prototype.fit=function(rp,ap,sp){return sp===void 0&&(sp={}),__awaiter$8(this,void 0,void 0,function(){return __generator$8(this,function(lp){return[2,fitTensors(this,rp,ap,sp)]})})},np.prototype.fitDataset=function(rp,ap){return __awaiter$8(this,void 0,void 0,function(){return __generator$8(this,function(sp){return[2,fitDataset(this,rp,ap)]})})},np.prototype.trainOnBatch=function(rp,ap){return __awaiter$8(this,void 0,void 0,function(){var sp,lp,up,cp,dp,fp,pp,hp,mp;return __generator$8(this,function(gp){switch(gp.label){case 0:return[4,this.standardizeUserData(rp,ap)];case 1:sp=gp.sent(),lp=sp[0],up=sp[1],cp=this.makeTrainFunction(),dp=cp(lp.concat(up)),fp=[],pp=0,hp=dp,gp.label=2;case 2:return pp<hp.length?[4,hp[pp].data()]:[3,5];case 3:mp=gp.sent(),fp.push(mp[0]),gp.label=4;case 4:return pp++,[3,2];case 5:return Xe(dp),[2,singletonOrArray(fp)]}})})},np.prototype.getNamedWeights=function(rp){for(var ap=[],sp=rp!=null&&rp.trainableOnly,lp=sp?this.trainableWeights:this.weights,up=this.getWeights(sp),cp=0;cp<lp.length;++cp)sp&&!lp[cp].trainable||ap.push({name:lp[cp].originalName,tensor:up[cp]});return ap},Object.defineProperty(np.prototype,"stopTraining",{get:function(){return this.stopTraining_},set:function(rp){this.stopTraining_=rp},enumerable:!0,configurable:!0}),Object.defineProperty(np.prototype,"optimizer",{get:function(){return this.optimizer_},set:function(rp){this.optimizer_!==rp&&(this.optimizer_=rp,this.isOptimizerOwned=!1)},enumerable:!0,configurable:!0}),np.prototype.dispose=function(){var rp=_d.prototype.dispose.call(this);if(rp.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){var ap=qe().numTensors;this.optimizer_.dispose(),rp.numDisposedVariables+=ap-qe().numTensors}return rp},np.prototype.getLossIdentifiers=function(){var rp;if(typeof this.loss=="string")rp=toSnakeCase(this.loss);else if(Array.isArray(this.loss)){for(var ap=0,sp=this.loss;ap<sp.length;ap++)if(typeof sp[ap]!="string")throw new Error("Serialization of non-string loss is not supported.");rp=this.loss.map(function(pp){return toSnakeCase(pp)})}else{var lp=Object.keys(this.loss);rp={};for(var up=this.loss,cp=0,dp=lp;cp<dp.length;cp++){var fp=dp[cp];if(typeof up[fp]!="string")throw new Error("Serialization of non-string loss is not supported.");rp[fp]=toSnakeCase(up[fp])}}return rp},np.prototype.getMetricIdentifiers=function(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[toSnakeCase(getLossOrMetricName(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(function(sp){return toSnakeCase(getLossOrMetricName(sp))});var rp={};for(var ap in this.metrics)rp[ap]=toSnakeCase(getLossOrMetricName(this.metrics[ap]));return rp},np.prototype.getTrainingConfig=function(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}},np.prototype.loadTrainingConfig=function(rp){if(rp.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(rp.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(rp.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");var ap,sp,lp=deserialize(convertPythonicToTs(rp.optimizer_config));if(typeof rp.loss=="string")ap=toCamelCase$1(rp.loss);else if(Array.isArray(rp.loss))ap=rp.loss.map(function(cp){return toCamelCase$1(cp)});else if(rp.loss!=null)for(var up in ap={},rp.loss)ap[up]=toCamelCase$1(rp.loss[up]);if(Array.isArray(rp.metrics))sp=rp.metrics.map(function(cp){return toCamelCase$1(cp)});else if(rp.metrics!=null)for(var up in sp={},rp.metrics)sp[up]=toCamelCase$1(rp.metrics[up]);this.compile({loss:ap,metrics:sp,optimizer:lp})},np.prototype.save=function(rp,ap){return __awaiter$8(this,void 0,void 0,function(){var sp,lp,up,cp,dp,fp,pp,hp,mp,gp,vp,xp,Sp,yp;return __generator$8(this,function(bp){switch(bp.label){case 0:if(typeof rp=="string"){if((sp=Sf.getSaveHandlers(rp)).length===0)throw new ValueError("Cannot find any save handlers for URL '"+rp+"'");if(sp.length>1)throw new ValueError("Found more than one ("+sp.length+") save handlers for URL '"+rp+"'");rp=sp[0]}if(rp.save==null)throw new ValueError("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return[4,Sf.encodeWeights(this.getNamedWeights(ap))];case 1:return lp=bp.sent(),up=!1,cp=null,dp=this.toJSON(cp,up),fp={modelTopology:dp,format:LAYERS_MODEL_FORMAT_NAME,generatedBy:"TensorFlow.js tfjs-layers v"+version$8,convertedBy:null},ap!=null&&ap.includeOptimizer&&this.optimizer!=null?(fp.trainingConfig=this.getTrainingConfig(),pp="optimizer",xp=(vp=Sf).encodeWeights,[4,this.optimizer.getWeights()]):[3,4];case 2:return[4,xp.apply(vp,[bp.sent(),pp])];case 3:hp=bp.sent(),mp=hp.data,gp=hp.specs,(yp=lp.specs).push.apply(yp,gp),lp.data=Sf.concatenateArrayBuffers([lp.data,mp]),bp.label=4;case 4:return this.userDefinedMetadata!=null&&(Sp=!0,checkUserDefinedMetadata(this.userDefinedMetadata,this.name,Sp),fp.userDefinedMetadata=this.userDefinedMetadata),fp.weightData=lp.data,fp.weightSpecs=lp.specs,[2,rp.save(fp)]}})})},np.prototype.setUserDefinedMetadata=function(rp){checkUserDefinedMetadata(rp,this.name),this.userDefinedMetadata=rp},np.prototype.getUserDefinedMetadata=function(){return this.userDefinedMetadata},np.className="Model",np}(Container);function modelFromJSON(_d,np){return __awaiter$8(this,void 0,void 0,function(){var rp,ap,sp,lp,up,cp,dp,fp;return __generator$8(this,function(pp){switch(pp.label){case 0:return"modelTopology"in _d||(_d={modelTopology:_d}),(rp=(_d=_d).modelTopology).model_config!=null&&(rp=rp.model_config),ap=convertPythonicToTs(rp),sp=deserialize(ap,np),_d.weightsManifest==null?[3,2]:[4,Sf.loadWeights(_d.weightsManifest,_d.pathPrefix,sp.weights.map(function(hp){return hp.originalName}))];case 1:for(lp=pp.sent(),up={},cp=0,dp=sp.weights;cp<dp.length;cp++)fp=dp[cp],up[fp.originalName]=lp[fp.originalName];sp.loadWeights(up),Xe(lp),pp.label=2;case 2:return[2,sp]}})})}function loadLayersModelInternal(_d,np){return __awaiter$8(this,void 0,void 0,function(){var rp;return __generator$8(this,function(ap){if(np==null&&(np={}),typeof _d=="string"){if((rp=Sf.getLoadHandlers(_d,np.onProgress)).length===0)rp.push(Sf.browserHTTPRequest(_d,np));else if(rp.length>1)throw new ValueError("Found more than one ("+rp.length+") load handlers for URL '"+_d+"'");_d=rp[0]}return[2,loadLayersModelFromIOHandler(_d,void 0,np)]})})}function loadLayersModelFromIOHandler(_d,np,rp){return __awaiter$8(this,void 0,void 0,function(){var ap,sp,lp,up,cp,dp,fp,pp,hp;return __generator$8(this,function(mp){switch(mp.label){case 0:if(rp==null&&(rp={}),_d.load==null)throw new ValueError("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");return[4,_d.load()];case 1:if(ap=mp.sent(),(sp=ap.modelTopology).model_config!=null&&(sp=sp.model_config),lp=rp.strict==null||rp.strict,up=ap.weightData!=null&&ap.weightSpecs!=null&&lp,cp=deserialize(convertPythonicToTs(sp),np,up),(dp=ap.trainingConfig)!=null&&cp.loadTrainingConfig(dp),ap.userDefinedMetadata!=null&&cp.setUserDefinedMetadata(ap.userDefinedMetadata),ap.weightData==null)return[3,4];if(ap.weightSpecs==null)throw new ValueError("LayersModel artifacts contains weight data, but not weight specs. Therefore loading of weights cannot proceed.");return fp=decodeModelAndOptimizerWeights(ap.weightData,ap.weightSpecs),pp=fp.modelWeights,hp=fp.optimizerWeights,cp.loadWeights(pp,lp),cp.optimizer!=null&&hp.length>0?[4,cp.optimizer.setWeights(hp)]:[3,3];case 2:mp.sent(),mp.label=3;case 3:Xe(pp),Xe(hp.map(function(gp){return gp.tensor})),mp.label=4;case 4:return[2,cp]}})})}function decodeModelAndOptimizerWeights(_d,np){var rp=Sf.decodeWeights(_d,np),ap={},sp=[];return np.forEach(function(lp){lp.group==="optimizer"?sp.push({name:lp.name,tensor:rp[lp.name]}):ap[lp.name]=rp[lp.name]}),{modelWeights:ap,optimizerWeights:sp}}Mf.registerClass(LayersModel);var Sequential=function(_d){function np(rp){var ap=_d.call(this,{inputs:[],outputs:[]})||this;if(rp=rp||{},ap.trainable=!0,ap.built=!1,ap.name=rp.name!=null?rp.name:getUid("sequential_"),rp.layers!=null)for(var sp=0,lp=rp.layers;sp<lp.length;sp++){var up=lp[sp];ap.add(up)}return ap}return __extends$h(np,_d),np.prototype.checkShape=function(rp){if(rp.inboundNodes[0].outputTensors[0].shape.some(function(ap){return ap<0}))throw new ValueError("Negative dimension size caused by adding layer "+rp.name+" with input shape ["+rp.inboundNodes[0].inputTensors[0].shape+"]")},np.prototype.add=function(rp){var ap,sp=rp instanceof np||rp instanceof LayersModel;if(sp){if((ap=rp).outputs.length!==1)throw new ValueError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(ap.inputs.length!==1)throw new ValueError("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(rp.inboundNodes.length===0){if(rp.batchInputShape==null)throw new ValueError("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");var lp=Input({batchShape:rp.batchInputShape,dtype:rp.dtype,name:rp.name+"_input"});rp.apply(lp)}if(sp)this.outputs=ap.outputs,this.inputs=ap.inputs;else{if(rp.inboundNodes.length!==1)throw new ValueError("A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer "+rp.name+" which has "+rp.inboundNodes.length+" pre-existing inbound connections.");if(rp.inboundNodes[0].outputTensors.length!==1)throw new ValueError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(rp),this.outputs=[rp.inboundNodes[0].outputTensors[0]],this.inputs=getSourceInputs(this.outputs[0])}this.inboundNodes=[],new Node({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:pyListRepeat(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(function(cp){return cp.shape}),outputShapes:this.outputs[0].shape})}else{var up=rp.apply(this.outputs[0]);if(Array.isArray(up))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(rp),this.outputs=[up],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(rp),this.built=!1},np.prototype.pop=function(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{var rp=this.layers.length-1;this.layers[rp].outboundNodes=[],this.outputs=[this.layers[rp].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}},np.prototype.call=function(rp,ap){return this.model==null&&this.build(),this.model.call(rp,ap)},np.prototype.build=function(rp){if(getExactlyOneShape(rp),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new LayersModel({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0},np.prototype.countParams=function(){return this.built||this.build(),_d.prototype.countParams.call(this)},np.prototype.summary=function(rp,ap,sp){sp===void 0&&(sp=console.log),this.built||this.build(),_d.prototype.summary.call(this,rp,ap,sp)},np.prototype.setWeights=function(rp){this.model==null&&this.build(),this.model.setWeights(rp)},np.prototype.evaluate=function(rp,ap,sp){if(sp===void 0&&(sp={}),!this.built)throw new RuntimeError("The model needs to be compiled before being used.");return this.model.evaluate(rp,ap,sp)},np.prototype.evaluateDataset=function(rp,ap){return __awaiter$8(this,void 0,void 0,function(){return __generator$8(this,function(sp){if(!this.built)throw new RuntimeError("The model needs to be compiled before being used.");return[2,this.model.evaluateDataset(rp,ap)]})})},np.prototype.predict=function(rp,ap){return ap===void 0&&(ap={}),this.model==null&&this.build(),this.model.predict(rp,ap)},np.prototype.predictOnBatch=function(rp){return this.model==null&&this.build(),this.model.predictOnBatch(rp)},np.prototype.compile=function(rp){this.build(),this.model.compile(rp),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames},Object.defineProperty(np.prototype,"optimizer",{get:function(){return this.model==null?void 0:this.model.optimizer},set:function(rp){this.model.optimizer=rp},enumerable:!0,configurable:!0}),np.prototype.fit=function(rp,ap,sp){return sp===void 0&&(sp={}),__awaiter$8(this,void 0,void 0,function(){return __generator$8(this,function(lp){if(!this.built)throw new RuntimeError("The model needs to be compiled before being used.");return[2,this.model.fit(rp,ap,sp)]})})},np.prototype.fitDataset=function(rp,ap){return __awaiter$8(this,void 0,void 0,function(){return __generator$8(this,function(sp){if(!this.built)throw new RuntimeError("The model needs to be compiled before being used.");return[2,this.model.fitDataset(rp,ap)]})})},np.prototype.trainOnBatch=function(rp,ap){return __awaiter$8(this,void 0,void 0,function(){return __generator$8(this,function(sp){return[2,this.model.trainOnBatch(rp,ap)]})})},np.fromConfig=function(rp,ap,sp,lp){var up;lp===void 0&&(lp=!1);var cp={};if(ap instanceof Array){if(ap[0].className==null||ap[0].className==="Merge")throw new ValueError("Legacy serialization format not supported yet.");up=ap}else tt.assert(ap.layers!=null,function(){return"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."}),up=ap.layers,delete ap.layers,cp=ap;var dp=new rp(cp);if(!(dp instanceof np))throw new NotImplementedError("Sequential.fromConfig called on non-Sequential input: "+dp);for(var fp=0,pp=up;fp<pp.length;fp++){var hp=deserialize(pp[fp],void 0,lp);lp&&hp.setFastWeightInitDuringBuild(!0),dp.add(hp)}return dp},Object.defineProperty(np.prototype,"stopTraining",{get:function(){if(this.model==null)throw new ValueError("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining},set:function(rp){if(this.model==null)throw new ValueError("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=rp},enumerable:!0,configurable:!0}),np.prototype.getConfig=function(){for(var rp=[],ap=0,sp=this.layers;ap<sp.length;ap++){var lp=sp[ap],up={};up.className=lp.getClassName(),up.config=lp.getConfig(),rp.push(up)}return{name:this.name,layers:rp}},np.className="Sequential",np}(LayersModel);function model(_d){return new LayersModel(_d)}function sequential(_d){return new Sequential(_d)}function loadLayersModel(_d,np){return np==null&&(np={}),loadLayersModelInternal(_d,np)}function input(_d){return Input(_d)}function registerCallbackConstructor(_d,np){CallbackConstructorRegistry.registerCallbackConstructor(_d,np)}Mf.registerClass(Sequential);var Activation=function(_d){function np(){return _d!==null&&_d.apply(this,arguments)||this}return __extends$h(np,_d),np.prototype.getConfig=function(){return{}},np}(Mf.Serializable),Elu=function(_d){function np(){return _d!==null&&_d.apply(this,arguments)||this}return __extends$h(np,_d),np.prototype.apply=function(rp,ap){return ap===void 0&&(ap=1),elu$1(rp,ap)},np.className="elu",np}(Activation);Mf.registerClass(Elu);var Selu=function(_d){function np(){return _d!==null&&_d.apply(this,arguments)||this}return __extends$h(np,_d),np.prototype.apply=function(rp){return Cl(rp)},np.className="selu",np}(Activation);Mf.registerClass(Selu);var Relu=function(_d){function np(){return _d!==null&&_d.apply(this,arguments)||this}return __extends$h(np,_d),np.prototype.apply=function(rp){return bl(rp)},np.className="relu",np}(Activation);Mf.registerClass(Relu);var Relu6=function(_d){function np(){return _d!==null&&_d.apply(this,arguments)||this}return __extends$h(np,_d),np.prototype.apply=function(rp){return je(function(){return Ys(6,bl(rp))})},np.className="relu6",np}(Activation);Mf.registerClass(Relu6);var Linear=function(_d){function np(){return _d!==null&&_d.apply(this,arguments)||this}return __extends$h(np,_d),np.prototype.apply=function(rp){return rp},np.className="linear",np}(Activation);Mf.registerClass(Linear);var Sigmoid=function(_d){function np(){return _d!==null&&_d.apply(this,arguments)||this}return __extends$h(np,_d),np.prototype.apply=function(rp){return cs(rp)},np.className="sigmoid",np}(Activation);Mf.registerClass(Sigmoid);var HardSigmoid=function(_d){function np(){return _d!==null&&_d.apply(this,arguments)||this}return __extends$h(np,_d),np.prototype.apply=function(rp){return hardSigmoid(rp)},np.className="hardSigmoid",np}(Activation);Mf.registerClass(HardSigmoid);var Softplus=function(_d){function np(){return _d!==null&&_d.apply(this,arguments)||this}return __extends$h(np,_d),np.prototype.apply=function(rp){return ms(rp)},np.className="softplus",np}(Activation);Mf.registerClass(Softplus);var Softsign=function(_d){function np(){return _d!==null&&_d.apply(this,arguments)||this}return __extends$h(np,_d),np.prototype.apply=function(rp){return softsign(rp)},np.className="softsign",np}(Activation);Mf.registerClass(Softsign);var Tanh=function(_d){function np(){return _d!==null&&_d.apply(this,arguments)||this}return __extends$h(np,_d),np.prototype.apply=function(rp){return bs(rp)},np.className="tanh",np}(Activation);Mf.registerClass(Tanh);var Softmax=function(_d){function np(){return _d!==null&&_d.apply(this,arguments)||this}return __extends$h(np,_d),np.prototype.apply=function(rp,ap){return ap===void 0&&(ap=-1),io(rp,ap)},np.className="softmax",np}(Activation);Mf.registerClass(Softmax);var LogSoftmax=function(_d){function np(){return _d!==null&&_d.apply(this,arguments)||this}return __extends$h(np,_d),np.prototype.apply=function(rp,ap){return ap===void 0&&(ap=-1),uo(rp,ap)},np.className="logSoftmax",np}(Activation);function serializeActivation(_d){return _d.getClassName()}function deserializeActivation(_d,np){return np===void 0&&(np={}),deserializeKerasObject(_d,Mf.SerializationMap.getMap().classNameMap,np,"activation")}function getActivation(_d){var np;return _d==null?deserializeActivation(np={className:"linear",config:{}}):typeof _d=="string"?((np={}).className=_d,np.config={},deserializeActivation(np)):_d instanceof Activation?_d:deserializeActivation(_d)}function assertObjectArgs(_d){if(_d!=null&&typeof _d!="object")throw new Error("Argument to L1L2 regularizer's constructor is expected to be an object, but received: "+_d)}Mf.registerClass(LogSoftmax);var Regularizer=function(_d){function np(){return _d!==null&&_d.apply(this,arguments)||this}return __extends$h(np,_d),np}(Mf.Serializable),L1L2=function(_d){function np(rp){var ap=_d.call(this)||this;return assertObjectArgs(rp),ap.l1=rp==null||rp.l1==null?.01:rp.l1,ap.l2=rp==null||rp.l2==null?.01:rp.l2,ap.hasL1=ap.l1!==0,ap.hasL2=ap.l2!==0,ap}return __extends$h(np,_d),np.prototype.apply=function(rp){var ap=this;return je(function(){var sp=Pn([1]);return ap.hasL1&&(sp=Vs(sp,vl(tc(ap.l1,Vu(rp))))),ap.hasL2&&(sp=Vs(sp,vl(tc(ap.l2,square(rp))))),sp.asScalar()})},np.prototype.getConfig=function(){return{l1:this.l1,l2:this.l2}},np.fromConfig=function(rp,ap){return new rp({l1:ap.l1,l2:ap.l2})},np.className="L1L2",np}(Regularizer);function l1(_d){return assertObjectArgs(_d),new L1L2({l1:_d!=null?_d.l1:null,l2:0})}function l2(_d){return assertObjectArgs(_d),new L1L2({l2:_d!=null?_d.l2:null,l1:0})}Mf.registerClass(L1L2);var REGULARIZER_IDENTIFIER_REGISTRY_SYMBOL_MAP={l1l2:"L1L2"};function serializeRegularizer(_d){return serializeKerasObject(_d)}function deserializeRegularizer(_d,np){return np===void 0&&(np={}),deserializeKerasObject(_d,Mf.SerializationMap.getMap().classNameMap,np,"regularizer")}function getRegularizer(_d){return _d==null?null:typeof _d=="string"?deserializeRegularizer({className:_d in REGULARIZER_IDENTIFIER_REGISTRY_SYMBOL_MAP?REGULARIZER_IDENTIFIER_REGISTRY_SYMBOL_MAP[_d]:_d,config:{}}):_d instanceof Regularizer?_d:deserializeRegularizer(_d)}var ReLU=function(_d){function np(rp){var ap=_d.call(this,rp??{})||this;return ap.supportsMasking=!0,rp!=null&&(ap.maxValue=rp.maxValue),ap}return __extends$h(np,_d),np.prototype.call=function(rp,ap){rp=getExactlyOneTensor(rp);var sp=bl(rp);return this.maxValue!=null&&(sp=$u(sp,0,this.maxValue)),sp},np.prototype.computeOutputShape=function(rp){return rp},np.prototype.getConfig=function(){var rp={maxValue:this.maxValue},ap=_d.prototype.getConfig.call(this);return Object.assign(rp,ap),rp},np.className="ReLU",np}(Layer);Mf.registerClass(ReLU);var LeakyReLU=function(_d){function np(rp){var ap=_d.call(this,rp??{})||this;return ap.DEFAULT_ALPHA=.3,rp==null&&(rp={}),ap.alpha=rp.alpha==null?ap.DEFAULT_ALPHA:rp.alpha,ap}return __extends$h(np,_d),np.prototype.call=function(rp,ap){var sp=getExactlyOneTensor(rp);return yl(sp,this.alpha)},np.prototype.computeOutputShape=function(rp){return rp},np.prototype.getConfig=function(){var rp={alpha:this.alpha},ap=_d.prototype.getConfig.call(this);return Object.assign(rp,ap),rp},np.className="LeakyReLU",np}(Layer);Mf.registerClass(LeakyReLU);var PReLU=function(_d){function np(rp){var ap=_d.call(this,rp??{})||this;if(ap.DEFAULT_ALPHA_INITIALIZER="zeros",rp==null&&(rp={}),ap.supportsMasking=!0,ap.alphaInitializer=getInitializer(rp.alphaInitializer||ap.DEFAULT_ALPHA_INITIALIZER),ap.alphaRegularizer=getRegularizer(rp.alphaRegularizer),ap.alphaConstraint=getConstraint(rp.alphaConstraint),rp.sharedAxes==null)ap.sharedAxes=null;else if(Array.isArray(rp.sharedAxes))ap.sharedAxes=rp.sharedAxes;else{if(typeof rp.sharedAxes!="number")throw new ValueError("Expected sharedAxes to be a number or an array of numbers, but got "+rp.sharedAxes);ap.sharedAxes=[rp.sharedAxes]}return ap}return __extends$h(np,_d),np.prototype.build=function(rp){var ap=(rp=getExactlyOneShape(rp)).slice(1);if(this.sharedAxes!=null)for(var sp=0,lp=this.sharedAxes;sp<lp.length;sp++)ap[(cp=lp[sp])-1]=1;this.alpha=this.addWeight("alpha",ap,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);var up={};if(this.sharedAxes!=null)for(var cp=1;cp<rp.length;++cp)up[cp]=rp[cp];this.inputSpec=[new InputSpec({ndim:rp.length,axes:up})],this.built=!0},np.prototype.call=function(rp,ap){return rp=getExactlyOneTensor(rp),xl(rp,this.alpha.read())},np.prototype.getConfig=function(){var rp={alphaInitializer:serializeInitializer(this.alphaInitializer),alphaRegularizer:serializeRegularizer(this.alphaRegularizer),alphaConstraint:serializeConstraint(this.alphaConstraint),sharedAxes:this.sharedAxes},ap=_d.prototype.getConfig.call(this);return Object.assign(rp,ap),rp},np.className="PReLU",np}(Layer);Mf.registerClass(PReLU);var ELU=function(_d){function np(rp){var ap=_d.call(this,rp??{})||this;if(ap.DEFAULT_ALPHA=1,rp==null&&(rp={}),rp.alpha!=null&&rp.alpha!==ap.DEFAULT_ALPHA)throw new NotImplementedError("Non-default alpha value ("+rp.alpha+") is not supported by the ELU layer yet.");return ap.alpha=rp.alpha==null?ap.DEFAULT_ALPHA:rp.alpha,ap}return __extends$h(np,_d),np.prototype.call=function(rp,ap){var sp=getExactlyOneTensor(rp);return gl(sp)},np.prototype.computeOutputShape=function(rp){return rp},np.prototype.getConfig=function(){var rp={alpha:this.alpha},ap=_d.prototype.getConfig.call(this);return Object.assign(rp,ap),rp},np.className="ELU",np}(Layer);Mf.registerClass(ELU);var ThresholdedReLU=function(_d){function np(rp){var ap=_d.call(this,rp??{})||this;return ap.DEFAULT_THETA=1,rp==null&&(rp={}),ap.theta=rp.theta==null?ap.DEFAULT_THETA:rp.theta,ap}return __extends$h(np,_d),np.prototype.call=function(rp,ap){var sp=getExactlyOneTensor(rp);return sp.mul(cast$1(sp.greater(this.theta),"float32"))},np.prototype.computeOutputShape=function(rp){return rp},np.prototype.getConfig=function(){var rp={theta:this.theta},ap=_d.prototype.getConfig.call(this);return Object.assign(rp,ap),rp},np.className="ThresholdedReLU",np}(Layer);Mf.registerClass(ThresholdedReLU);var Softmax$1=function(_d){function np(rp){var ap=_d.call(this,rp??{})||this;return ap.DEFAULT_AXIS=1,rp==null&&(rp={}),ap.softmax=new Softmax().apply,ap.axis=rp.axis==null?ap.DEFAULT_AXIS:rp.axis,ap}return __extends$h(np,_d),np.prototype.call=function(rp,ap){var sp=getExactlyOneTensor(rp);return this.softmax(sp,this.axis)},np.prototype.computeOutputShape=function(rp){return rp},np.prototype.getConfig=function(){var rp={axis:this.axis},ap=_d.prototype.getConfig.call(this);return Object.assign(rp,ap),rp},np.className="Softmax",np}(Layer);function normalizeArray(_d,np,rp){if(typeof _d=="number")return pyListRepeat(_d,np);if(_d.length!==np)throw new ValueError("The "+rp+" argument must be an integer or tuple of "+np+" integers. Received: "+_d.length+" elements.");for(var ap=0;ap<np;++ap){var sp=_d[ap];if(!isInteger(sp))throw new ValueError("The "+rp+" argument must be an integer or tuple of "+np+" integers. Received: "+JSON.stringify(_d)+" including a non-integer number "+sp)}return _d}function convOutputLength(_d,np,rp,ap,sp){return sp===void 0&&(sp=1),_d==null?_d:(lp=rp==="same"?_d:_d-(np+(np-1)*(sp-1))+1,Math.floor((lp+ap-1)/ap));var lp}function deconvLength(_d,np,rp,ap){if(_d==null)return null;if(ap==="valid")_d=_d*np+max$1([rp-np,0]);else{if(ap!=="same")throw new ValueError("Unsupport padding mode: "+ap+".");_d*=np}return _d}function preprocessConv2DInput(_d,np){return je(function(){return checkDataFormat(np),np==="channelsFirst"?El(_d,[0,2,3,1]):_d})}function preprocessConv3DInput(_d,np){return je(function(){return checkDataFormat(np),np==="channelsFirst"?El(_d,[0,2,3,4,1]):_d})}function conv1dWithBias(_d,np,rp,ap,sp,lp,up){return ap===void 0&&(ap=1),sp===void 0&&(sp="valid"),up===void 0&&(up=1),je(function(){if(lp==null&&(lp=imageDataFormat()),checkDataFormat(lp),_d.shape.length!==3)throw new ValueError("The input of a conv1dWithBias operation should be 3, but is "+_d.shape.length+" instead.");if(np.shape.length!==3)throw new ValueError("The kernel for a conv1dWithBias operation should be 3, but is "+np.shape.length+" instead");if(rp!=null&&rp.shape.length!==1)throw new ValueError("The bias for a conv1dWithBias operation should be 1, but is "+np.shape.length+" instead");if(lp==="channelsFirst"&&(_d=El(_d,[0,2,1])),sp==="causal")throw new NotImplementedError("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");var cp=Ac(_d,np,ap,sp==="same"?"same":"valid","NWC",up);return rp!=null&&(cp=biasAdd(cp,rp)),cp})}function conv2dWithBiasActivation(_d,np,rp,ap,sp,lp,up,cp){return ap===void 0&&(ap=[1,1]),sp===void 0&&(sp="valid"),cp===void 0&&(cp=null),je(function(){if(lp==null&&(lp=imageDataFormat()),checkDataFormat(lp),_d.rank!==3&&_d.rank!==4)throw new ValueError("conv2dWithBiasActivation expects input to be of rank 3 or 4, but received "+_d.rank+".");if(np.rank!==3&&np.rank!==4)throw new ValueError("conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received "+_d.rank+".");var dp=preprocessConv2DInput(_d,lp);if(sp==="causal")throw new NotImplementedError("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return dp=Eh.conv2d({x:dp,filter:np,strides:ap,pad:sp==="same"?"same":"valid",dilations:up,dataFormat:"NHWC",bias:rp,activation:cp}),lp==="channelsFirst"&&(dp=El(dp,[0,3,1,2])),dp})}function conv3dWithBias(_d,np,rp,ap,sp,lp,up){return ap===void 0&&(ap=[1,1,1]),sp===void 0&&(sp="valid"),je(function(){if(lp==null&&(lp=imageDataFormat()),checkDataFormat(lp),_d.rank!==4&&_d.rank!==5)throw new ValueError("conv3dWithBias expects input to be of rank 4 or 5, but received "+_d.rank+".");if(np.rank!==4&&np.rank!==5)throw new ValueError("conv3dWithBias expects kernel to be of rank 4 or 5, but received "+_d.rank+".");var cp=preprocessConv3DInput(_d,lp);if(sp==="causal")throw new NotImplementedError("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return cp=Tc(cp,np,ap,sp==="same"?"same":"valid","NDHWC",up),rp!=null&&(cp=biasAdd(cp,rp)),lp==="channelsFirst"&&(cp=El(cp,[0,4,1,2,3])),cp})}Mf.registerClass(Softmax$1);var BaseConv=function(_d){function np(rp,ap){var sp=_d.call(this,ap)||this;if(sp.bias=null,sp.DEFAULT_KERNEL_INITIALIZER="glorotNormal",sp.DEFAULT_BIAS_INITIALIZER="zeros",np.verifyArgs(ap),sp.rank=rp,assertPositiveInteger(sp.rank,"rank"),sp.rank!==1&&sp.rank!==2&&sp.rank!==3)throw new NotImplementedError("Convolution layer for rank other than 1, 2, or 3 ("+sp.rank+") is not implemented yet.");if(sp.kernelSize=normalizeArray(ap.kernelSize,rp,"kernelSize"),sp.strides=normalizeArray(ap.strides==null?1:ap.strides,rp,"strides"),sp.padding=ap.padding==null?"valid":ap.padding,checkPaddingMode(sp.padding),sp.dataFormat=ap.dataFormat==null?"channelsLast":ap.dataFormat,checkDataFormat(sp.dataFormat),sp.activation=getActivation(ap.activation),sp.useBias=ap.useBias==null||ap.useBias,sp.biasInitializer=getInitializer(ap.biasInitializer||sp.DEFAULT_BIAS_INITIALIZER),sp.biasConstraint=getConstraint(ap.biasConstraint),sp.biasRegularizer=getRegularizer(ap.biasRegularizer),sp.activityRegularizer=getRegularizer(ap.activityRegularizer),sp.dilationRate=normalizeArray(ap.dilationRate==null?1:ap.dilationRate,rp,"dilationRate"),sp.rank===1&&Array.isArray(sp.dilationRate)&&sp.dilationRate.length!==1)throw new ValueError("dilationRate must be a number or an array of a single number for 1D convolution, but received "+JSON.stringify(sp.dilationRate));if(sp.rank===2){if(typeof sp.dilationRate=="number")sp.dilationRate=[sp.dilationRate,sp.dilationRate];else if(sp.dilationRate.length!==2)throw new ValueError("dilationRate must be a number or array of two numbers for 2D convolution, but received "+JSON.stringify(sp.dilationRate))}else if(sp.rank===3){if(typeof sp.dilationRate=="number")sp.dilationRate=[sp.dilationRate,sp.dilationRate,sp.dilationRate];else if(sp.dilationRate.length!==3)throw new ValueError("dilationRate must be a number or array of three numbers for 3D convolution, but received "+JSON.stringify(sp.dilationRate))}return sp}return __extends$h(np,_d),np.verifyArgs=function(rp){if(assert("kernelSize"in rp,"required key 'kernelSize' not in config"),typeof rp.kernelSize!="number"&&!checkArrayTypeAndLength(rp.kernelSize,"number",1,3))throw new ValueError("BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received "+JSON.stringify(rp.kernelSize)+".")},np.prototype.getConfig=function(){var rp={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:serializeActivation(this.activation),useBias:this.useBias,biasInitializer:serializeInitializer(this.biasInitializer),biasRegularizer:serializeRegularizer(this.biasRegularizer),activityRegularizer:serializeRegularizer(this.activityRegularizer),biasConstraint:serializeConstraint(this.biasConstraint)},ap=_d.prototype.getConfig.call(this);return Object.assign(rp,ap),rp},np}(Layer),Conv=function(_d){function np(rp,ap){var sp=_d.call(this,rp,ap)||this;return sp.kernel=null,np.verifyArgs(ap),sp.filters=ap.filters,assertPositiveInteger(sp.filters,"filters"),sp.kernelInitializer=getInitializer(ap.kernelInitializer||sp.DEFAULT_KERNEL_INITIALIZER),sp.kernelConstraint=getConstraint(ap.kernelConstraint),sp.kernelRegularizer=getRegularizer(ap.kernelRegularizer),sp}return __extends$h(np,_d),np.prototype.build=function(rp){var ap;rp=getExactlyOneShape(rp);var sp=this.dataFormat==="channelsFirst"?1:rp.length-1;if(rp[sp]==null)throw new ValueError("The channel dimension of the input should be defined. Found "+rp[sp]);var lp=rp[sp],up=this.kernelSize.concat([lp,this.filters]);this.kernel=this.addWeight("kernel",up,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:(ap={},ap[sp]=lp,ap)}],this.built=!0},np.prototype.call=function(rp,ap){var sp=this;return je(function(){var lp;rp=getExactlyOneTensor(rp);var up=sp.bias==null?null:sp.bias.read(),cp=mapActivationToFusedKernel(sp.activation.getClassName());if(cp!=null&&sp.rank===2)lp=conv2dWithBiasActivation(rp,sp.kernel.read(),up,sp.strides,sp.padding,sp.dataFormat,sp.dilationRate,cp);else{if(sp.rank===1)lp=conv1dWithBias(rp,sp.kernel.read(),up,sp.strides[0],sp.padding,sp.dataFormat,sp.dilationRate[0]);else if(sp.rank===2)lp=conv2dWithBiasActivation(rp,sp.kernel.read(),up,sp.strides,sp.padding,sp.dataFormat,sp.dilationRate);else{if(sp.rank!==3)throw new NotImplementedError("convolutions greater than 3D are not implemented yet.");lp=conv3dWithBias(rp,sp.kernel.read(),up,sp.strides,sp.padding,sp.dataFormat,sp.dilationRate)}sp.activation!=null&&(lp=sp.activation.apply(lp))}return lp})},np.prototype.computeOutputShape=function(rp){rp=getExactlyOneShape(rp);for(var ap=[],sp=this.dataFormat==="channelsLast"?rp.slice(1,rp.length-1):rp.slice(2),lp=0;lp<sp.length;++lp){var up=convOutputLength(sp[lp],this.kernelSize[lp],this.padding,this.strides[lp],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[lp]);ap.push(up)}var cp=[rp[0]];return this.dataFormat==="channelsLast"?(cp=cp.concat(ap)).push(this.filters):(cp.push(this.filters),cp=cp.concat(ap)),cp},np.prototype.getConfig=function(){var rp={filters:this.filters,kernelInitializer:serializeInitializer(this.kernelInitializer),kernelRegularizer:serializeRegularizer(this.kernelRegularizer),kernelConstraint:serializeConstraint(this.kernelConstraint)},ap=_d.prototype.getConfig.call(this);return Object.assign(rp,ap),rp},np.verifyArgs=function(rp){if(!("filters"in rp)||typeof rp.filters!="number"||rp.filters<1)throw new ValueError("Convolution layer expected config.filters to be a 'number' > 0 but got "+JSON.stringify(rp.filters))},np}(BaseConv),Conv2D=function(_d){function np(rp){var ap=_d.call(this,2,rp)||this;return np.verifyArgs(rp),ap}return __extends$h(np,_d),np.prototype.getConfig=function(){var rp=_d.prototype.getConfig.call(this);return delete rp.rank,rp},np.verifyArgs=function(rp){if(typeof rp.kernelSize!="number"&&!checkArrayTypeAndLength(rp.kernelSize,"number",1,2))throw new ValueError("Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received "+JSON.stringify(rp.kernelSize)+".")},np.className="Conv2D",np}(Conv);Mf.registerClass(Conv2D);var Conv3D=function(_d){function np(rp){var ap=_d.call(this,3,rp)||this;return np.verifyArgs(rp),ap}return __extends$h(np,_d),np.prototype.getConfig=function(){var rp=_d.prototype.getConfig.call(this);return delete rp.rank,rp},np.verifyArgs=function(rp){if(typeof rp.kernelSize!="number"&&(!Array.isArray(rp.kernelSize)||rp.kernelSize.length!==1&&rp.kernelSize.length!==3))throw new ValueError("Conv3D expects config.kernelSize to be number or [number, number, number], but received "+JSON.stringify(rp.kernelSize)+".")},np.className="Conv3D",np}(Conv);Mf.registerClass(Conv3D);var Conv2DTranspose=function(_d){function np(rp){var ap=_d.call(this,rp)||this;if(ap.inputSpec=[new InputSpec({ndim:4})],ap.padding!=="same"&&ap.padding!=="valid")throw new ValueError("Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode "+ap.padding);return ap}return __extends$h(np,_d),np.prototype.build=function(rp){var ap;if((rp=getExactlyOneShape(rp)).length!==4)throw new ValueError("Input should have rank 4; Received input shape: "+JSON.stringify(rp));var sp=this.dataFormat==="channelsFirst"?1:rp.length-1;if(rp[sp]==null)throw new ValueError("The channel dimension of the inputs should be defined. Found `None`.");var lp=rp[sp],up=this.kernelSize.concat([this.filters,lp]);this.kernel=this.addWeight("kernel",up,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new InputSpec({ndim:4,axes:(ap={},ap[sp]=lp,ap)})],this.built=!0},np.prototype.call=function(rp,ap){var sp=this;return je(function(){var lp=getExactlyOneTensor(rp);if(lp.shape.length!==4)throw new ValueError("Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-"+lp.shape.length);var up,cp,dp=lp.shape,fp=dp[0];sp.dataFormat==="channelsFirst"?(up=2,cp=3):(up=1,cp=2);var pp=dp[up],hp=dp[cp],mp=sp.kernelSize[0],gp=sp.kernelSize[1],vp=sp.strides[0],xp=sp.strides[1],Sp=[fp,deconvLength(pp,vp,mp,sp.padding),deconvLength(hp,xp,gp,sp.padding),sp.filters];sp.dataFormat!=="channelsLast"&&(lp=El(lp,[0,2,3,1]));var yp=Pc(lp,sp.kernel.read(),Sp,sp.strides,sp.padding);return sp.dataFormat!=="channelsLast"&&(yp=El(yp,[0,3,1,2])),sp.bias!=null&&(yp=biasAdd(yp,sp.bias.read(),sp.dataFormat)),sp.activation!=null&&(yp=sp.activation.apply(yp)),yp})},np.prototype.computeOutputShape=function(rp){var ap,sp,lp,up=(rp=getExactlyOneShape(rp)).slice();this.dataFormat==="channelsFirst"?(ap=1,sp=2,lp=3):(ap=3,sp=1,lp=2);var cp=this.kernelSize[0],dp=this.kernelSize[1],fp=this.strides[0],pp=this.strides[1];return up[ap]=this.filters,up[sp]=deconvLength(up[sp],fp,cp,this.padding),up[lp]=deconvLength(up[lp],pp,dp,this.padding),up},np.prototype.getConfig=function(){var rp=_d.prototype.getConfig.call(this);return delete rp.dilationRate,rp},np.className="Conv2DTranspose",np}(Conv2D);Mf.registerClass(Conv2DTranspose);var SeparableConv=function(_d){function np(rp,ap){var sp=_d.call(this,rp,ap)||this;if(sp.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",sp.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",sp.depthwiseKernel=null,sp.pointwiseKernel=null,ap.filters==null)throw new ValueError("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(ap.kernelInitializer!=null||ap.kernelRegularizer!=null||ap.kernelConstraint!=null)throw new ValueError("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(ap.padding!=null&&ap.padding!=="same"&&ap.padding!=="valid")throw new ValueError("SeparableConv"+sp.rank+"D supports only padding modes: 'same' and 'valid', but received "+JSON.stringify(ap.padding));return sp.depthMultiplier=ap.depthMultiplier==null?1:ap.depthMultiplier,sp.depthwiseInitializer=getInitializer(ap.depthwiseInitializer||sp.DEFAULT_DEPTHWISE_INITIALIZER),sp.depthwiseRegularizer=getRegularizer(ap.depthwiseRegularizer),sp.depthwiseConstraint=getConstraint(ap.depthwiseConstraint),sp.pointwiseInitializer=getInitializer(ap.depthwiseInitializer||sp.DEFAULT_POINTWISE_INITIALIZER),sp.pointwiseRegularizer=getRegularizer(ap.pointwiseRegularizer),sp.pointwiseConstraint=getConstraint(ap.pointwiseConstraint),sp}return __extends$h(np,_d),np.prototype.build=function(rp){var ap;if((rp=getExactlyOneShape(rp)).length<this.rank+2)throw new ValueError("Inputs to SeparableConv"+this.rank+"D should have rank "+(this.rank+2)+", but received input shape: "+JSON.stringify(rp));var sp=this.dataFormat==="channelsFirst"?1:rp.length-1;if(rp[sp]==null||rp[sp]<0)throw new ValueError("The channel dimension of the inputs should be defined, but found "+JSON.stringify(rp[sp]));for(var lp=rp[sp],up=this.kernelSize.concat([lp,this.depthMultiplier]),cp=[],dp=0;dp<this.rank;++dp)cp.push(1);cp.push(lp*this.depthMultiplier,this.filters),this.depthwiseKernel=this.addWeight("depthwise_kernel",up,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",cp,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,!0,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.inputSpec=[new InputSpec({ndim:this.rank+2,axes:(ap={},ap[sp]=lp,ap)})],this.built=!0},np.prototype.call=function(rp,ap){var sp=this;return je(function(){var lp;if(rp=getExactlyOneTensor(rp),sp.rank===1)throw new NotImplementedError("1D separable convolution is not implemented yet.");return sp.rank===2&&(sp.dataFormat==="channelsFirst"&&(rp=El(rp,[0,2,3,1])),lp=Bc(rp,sp.depthwiseKernel.read(),sp.pointwiseKernel.read(),sp.strides,sp.padding,sp.dilationRate,"NHWC")),sp.useBias&&(lp=biasAdd(lp,sp.bias.read(),sp.dataFormat)),sp.activation!=null&&(lp=sp.activation.apply(lp)),sp.dataFormat==="channelsFirst"&&(lp=El(lp,[0,3,1,2])),lp})},np.prototype.getConfig=function(){var rp=_d.prototype.getConfig.call(this);return delete rp.rank,delete rp.kernelInitializer,delete rp.kernelRegularizer,delete rp.kernelConstraint,rp.depthwiseInitializer=serializeInitializer(this.depthwiseInitializer),rp.pointwiseInitializer=serializeInitializer(this.pointwiseInitializer),rp.depthwiseRegularizer=serializeRegularizer(this.depthwiseRegularizer),rp.pointwiseRegularizer=serializeRegularizer(this.pointwiseRegularizer),rp.depthwiseConstraint=serializeConstraint(this.depthwiseConstraint),rp.pointwiseConstraint=serializeConstraint(this.pointwiseConstraint),rp},np.className="SeparableConv",np}(Conv),SeparableConv2D=function(_d){function np(rp){return _d.call(this,2,rp)||this}return __extends$h(np,_d),np.className="SeparableConv2D",np}(SeparableConv);Mf.registerClass(SeparableConv2D);var Conv1D=function(_d){function np(rp){var ap=_d.call(this,1,rp)||this;return np.verifyArgs(rp),ap.inputSpec=[{ndim:3}],ap}return __extends$h(np,_d),np.prototype.getConfig=function(){var rp=_d.prototype.getConfig.call(this);return delete rp.rank,delete rp.dataFormat,rp},np.verifyArgs=function(rp){if(typeof rp.kernelSize!="number"&&!checkArrayTypeAndLength(rp.kernelSize,"number",1,1))throw new ValueError("Conv1D expects config.kernelSize to be number or number[] with length 1, but received "+JSON.stringify(rp.kernelSize)+".")},np.className="Conv1D",np}(Conv);Mf.registerClass(Conv1D);var Cropping2D=function(_d){function np(rp){var ap=_d.call(this,rp)||this;return typeof rp.cropping=="number"?ap.cropping=[[rp.cropping,rp.cropping],[rp.cropping,rp.cropping]]:typeof rp.cropping[0]=="number"?ap.cropping=[[rp.cropping[0],rp.cropping[0]],[rp.cropping[1],rp.cropping[1]]]:ap.cropping=rp.cropping,ap.dataFormat=rp.dataFormat===void 0?"channelsLast":rp.dataFormat,ap.inputSpec=[{ndim:4}],ap}return __extends$h(np,_d),np.prototype.computeOutputShape=function(rp){return this.dataFormat==="channelsFirst"?[rp[0],rp[1],rp[2]-this.cropping[0][0]-this.cropping[0][1],rp[3]-this.cropping[1][0]-this.cropping[1][1]]:[rp[0],rp[1]-this.cropping[0][0]-this.cropping[0][1],rp[2]-this.cropping[1][0]-this.cropping[1][1],rp[3]]},np.prototype.call=function(rp,ap){var sp=this;return je(function(){return rp=getExactlyOneTensor(rp),sp.dataFormat==="channelsLast"?sliceAlongAxis(sliceAlongAxis(rp,sp.cropping[0][0],rp.shape[1]-sp.cropping[0][0]-sp.cropping[0][1],2),sp.cropping[1][0],rp.shape[2]-sp.cropping[1][1]-sp.cropping[1][0],3):sliceAlongAxis(sliceAlongAxis(rp,sp.cropping[0][0],rp.shape[2]-sp.cropping[0][0]-sp.cropping[0][1],3),sp.cropping[1][0],rp.shape[3]-sp.cropping[1][1]-sp.cropping[1][0],4)})},np.prototype.getConfig=function(){var rp={cropping:this.cropping,dataFormat:this.dataFormat},ap=_d.prototype.getConfig.call(this);return Object.assign(rp,ap),rp},np.className="Cropping2D",np}(Layer);Mf.registerClass(Cropping2D);var UpSampling2D=function(_d){function np(rp){var ap=_d.call(this,rp)||this;return ap.DEFAULT_SIZE=[2,2],ap.inputSpec=[{ndim:4}],ap.size=rp.size==null?ap.DEFAULT_SIZE:rp.size,ap.dataFormat=rp.dataFormat==null?"channelsLast":rp.dataFormat,ap}return __extends$h(np,_d),np.prototype.computeOutputShape=function(rp){if(this.dataFormat==="channelsFirst"){var ap=rp[2]==null?null:this.size[0]*rp[2],sp=rp[3]==null?null:this.size[1]*rp[3];return[rp[0],rp[1],ap,sp]}return ap=rp[1]==null?null:this.size[0]*rp[1],sp=rp[2]==null?null:this.size[1]*rp[2],[rp[0],ap,sp,rp[3]]},np.prototype.call=function(rp,ap){var sp=this;return je(function(){var lp=getExactlyOneTensor(rp),up=lp.shape;if(sp.dataFormat==="channelsFirst"){lp=El(lp,[0,2,3,1]);var cp=sp.size[0]*up[2],dp=sp.size[1]*up[3],fp=lp.resizeNearestNeighbor([cp,dp]);return El(fp,[0,3,1,2])}return cp=sp.size[0]*up[1],dp=sp.size[1]*up[2],lp.resizeNearestNeighbor([cp,dp])})},np.prototype.getConfig=function(){var rp={size:this.size,dataFormat:this.dataFormat},ap=_d.prototype.getConfig.call(this);return Object.assign(rp,ap),rp},np.className="UpSampling2D",np}(Layer);function depthwiseConv2d$1(_d,np,rp,ap,sp,lp){return rp===void 0&&(rp=[1,1]),ap===void 0&&(ap="valid"),je(function(){sp==null&&(sp=imageDataFormat()),checkDataFormat(sp);var up=preprocessConv2DInput(_d,sp);if(_d.rank!==4)throw new ValueError("Input for depthwiseConv2d is required to be 4-D, but is instead "+_d.rank+"-D");if(np.rank!==4)throw new ValueError("depthwiseKernel is required to be 4-D, but is instead "+np.rank+"-D");return up=Oc(up,np,rp,ap==="same"?"same":"valid","NHWC",lp),sp==="channelsFirst"&&(up=El(up,[0,3,1,2])),up})}Mf.registerClass(UpSampling2D);var DepthwiseConv2D=function(_d){function np(rp){var ap=_d.call(this,2,rp)||this;return ap.depthwiseKernel=null,ap.depthMultiplier=rp.depthMultiplier==null?1:rp.depthMultiplier,ap.depthwiseInitializer=getInitializer(rp.depthwiseInitializer||ap.DEFAULT_KERNEL_INITIALIZER),ap.depthwiseConstraint=getConstraint(rp.depthwiseConstraint),ap.depthwiseRegularizer=getRegularizer(rp.depthwiseRegularizer),ap}return __extends$h(np,_d),np.prototype.build=function(rp){if((rp=getExactlyOneShape(rp)).length<4)throw new ValueError("Inputs to DepthwiseConv2D should have rank 4. Received input shape: "+JSON.stringify(rp)+".");var ap=this.dataFormat==="channelsFirst"?1:3;if(rp[ap]==null||rp[ap]<0)throw new ValueError("The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not ("+rp[ap]+").");var sp=rp[ap],lp=[this.kernelSize[0],this.kernelSize[1],sp,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",lp,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[sp*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0},np.prototype.call=function(rp,ap){var sp=this;return je(function(){var lp=depthwiseConv2d$1(rp=getExactlyOneTensor(rp),sp.depthwiseKernel.read(),sp.strides,sp.padding,sp.dataFormat,null);return sp.useBias&&(lp=biasAdd(lp,sp.bias.read(),sp.dataFormat)),sp.activation!=null&&(lp=sp.activation.apply(lp)),lp})},np.prototype.computeOutputShape=function(rp){rp=getExactlyOneShape(rp);var ap=this.dataFormat==="channelsFirst"?rp[2]:rp[1],sp=this.dataFormat==="channelsFirst"?rp[3]:rp[2],lp=this.dataFormat==="channelsFirst"?rp[1]*this.depthMultiplier:rp[3]*this.depthMultiplier,up=convOutputLength(ap,this.kernelSize[0],this.padding,this.strides[0]),cp=convOutputLength(sp,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[rp[0],lp,up,cp]:[rp[0],up,cp,lp]},np.prototype.getConfig=function(){var rp=_d.prototype.getConfig.call(this);return rp.depthMultiplier=this.depthMultiplier,rp.depthwiseInitializer=serializeInitializer(this.depthwiseInitializer),rp.depthwiseRegularizer=serializeRegularizer(this.depthwiseRegularizer),rp.depthwiseConstraint=serializeConstraint(this.depthwiseRegularizer),rp},np.className="DepthwiseConv2D",np}(BaseConv);Mf.registerClass(DepthwiseConv2D);var Dropout=function(_d){function np(rp){var ap=_d.call(this,rp)||this;return ap.rate=Math.max(Math.min(rp.rate,1),0),ap.noiseShape=rp.noiseShape,ap.seed=rp.seed,ap.supportsMasking=!0,ap}return __extends$h(np,_d),np.prototype.getNoiseShape=function(rp){if(this.noiseShape==null)return this.noiseShape;for(var ap=rp.shape,sp=[],lp=0;lp<this.noiseShape.length;++lp)sp.push(this.noiseShape[lp]==null?ap[lp]:this.noiseShape[lp]);return sp},np.prototype.call=function(rp,ap){var sp=this;return je(function(){sp.invokeCallHook(rp,ap);var lp=getExactlyOneTensor(rp);if(0<sp.rate&&sp.rate<1){var up=ap.training!=null&&ap.training,cp=sp.getNoiseShape(lp);return inTrainPhase(function(){return dropout$1(lp,sp.rate,cp,sp.seed)},function(){return lp},up)}return rp})},np.prototype.getConfig=function(){var rp={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},ap=_d.prototype.getConfig.call(this);return Object.assign(rp,ap),rp},np.prototype.dispose=function(){return _d.prototype.dispose.call(this)},np.className="Dropout",np}(Layer);Mf.registerClass(Dropout);var Dense=function(_d){function np(rp){var ap=_d.call(this,rp)||this;if(ap.activation=null,ap.useBias=!0,ap.kernel=null,ap.bias=null,ap.DEFAULT_KERNEL_INITIALIZER="glorotNormal",ap.DEFAULT_BIAS_INITIALIZER="zeros",rp.batchInputShape==null&&rp.inputShape==null&&rp.inputDim!=null){var sp=null;rp.batchSize!=null&&(sp=rp.batchSize),ap.batchInputShape=[sp,rp.inputDim]}return ap.units=rp.units,assertPositiveInteger(ap.units,"units"),ap.activation=getActivation(rp.activation),rp.useBias!=null&&(ap.useBias=rp.useBias),ap.kernelInitializer=getInitializer(rp.kernelInitializer||ap.DEFAULT_KERNEL_INITIALIZER),ap.biasInitializer=getInitializer(rp.biasInitializer||ap.DEFAULT_BIAS_INITIALIZER),ap.kernelConstraint=getConstraint(rp.kernelConstraint),ap.biasConstraint=getConstraint(rp.biasConstraint),ap.kernelRegularizer=getRegularizer(rp.kernelRegularizer),ap.biasRegularizer=getRegularizer(rp.biasRegularizer),ap.activityRegularizer=getRegularizer(rp.activityRegularizer),ap.supportsMasking=!0,ap.inputSpec=[{minNDim:2}],ap}return __extends$h(np,_d),np.prototype.build=function(rp){var ap,sp=(rp=getExactlyOneShape(rp))[rp.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[sp,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:(ap={},ap[-1]=sp,ap)}],this.built=!0},np.prototype.computeOutputShape=function(rp){var ap=(rp=getExactlyOneShape(rp)).slice();return ap[ap.length-1]=this.units,ap},np.prototype.call=function(rp,ap){var sp=this;return je(function(){sp.invokeCallHook(rp,ap);var lp,up=getExactlyOneTensor(rp),cp=mapActivationToFusedKernel(sp.activation.getClassName());return cp!=null?lp=dot(up,sp.kernel.read(),cp,sp.bias?sp.bias.read():null):(lp=dot(up,sp.kernel.read()),sp.bias!=null&&(lp=biasAdd(lp,sp.bias.read())),sp.activation!=null&&(lp=sp.activation.apply(lp))),lp})},np.prototype.getConfig=function(){var rp={units:this.units,activation:serializeActivation(this.activation),useBias:this.useBias,kernelInitializer:serializeInitializer(this.kernelInitializer),biasInitializer:serializeInitializer(this.biasInitializer),kernelRegularizer:serializeRegularizer(this.kernelRegularizer),biasRegularizer:serializeRegularizer(this.biasRegularizer),activityRegularizer:serializeRegularizer(this.activityRegularizer),kernelConstraint:serializeConstraint(this.kernelConstraint),biasConstraint:serializeConstraint(this.biasConstraint)},ap=_d.prototype.getConfig.call(this);return Object.assign(rp,ap),rp},np.className="Dense",np}(Layer);Mf.registerClass(Dense);var Flatten=function(_d){function np(rp){var ap=_d.call(this,rp||{})||this;return ap.inputSpec=[{minNDim:3}],ap}return __extends$h(np,_d),np.prototype.computeOutputShape=function(rp){for(var ap=0,sp=(rp=getExactlyOneShape(rp)).slice(1);ap<sp.length;ap++)if(sp[ap]==null)throw new ValueError('The shape of the input to "Flatten" is not fully defined (got '+rp.slice(1)+'). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.');return[rp[0],arrayProd(rp,1)]},np.prototype.call=function(rp,ap){var sp=this;return je(function(){return sp.invokeCallHook(rp,ap),batchFlatten(getExactlyOneTensor(rp))})},np.className="Flatten",np}(Layer);Mf.registerClass(Flatten);var Activation$1=function(_d){function np(rp){var ap=_d.call(this,rp)||this;return ap.supportsMasking=!0,ap.activation=getActivation(rp.activation),ap}return __extends$h(np,_d),np.prototype.call=function(rp,ap){var sp=this;return je(function(){sp.invokeCallHook(rp,ap);var lp=getExactlyOneTensor(rp);return sp.activation.apply(lp)})},np.prototype.getConfig=function(){var rp={activation:serializeActivation(this.activation)},ap=_d.prototype.getConfig.call(this);return Object.assign(rp,ap),rp},np.className="Activation",np}(Layer);Mf.registerClass(Activation$1);var RepeatVector=function(_d){function np(rp){var ap=_d.call(this,rp)||this;return ap.n=rp.n,ap.inputSpec=[{ndim:2}],ap}return __extends$h(np,_d),np.prototype.computeOutputShape=function(rp){return[rp[0],this.n,rp[1]]},np.prototype.call=function(rp,ap){var sp=this;return je(function(){return repeat(rp=getExactlyOneTensor(rp),sp.n)})},np.prototype.getConfig=function(){var rp={n:this.n},ap=_d.prototype.getConfig.call(this);return Object.assign(rp,ap),rp},np.className="RepeatVector",np}(Layer);Mf.registerClass(RepeatVector);var Reshape=function(_d){function np(rp){var ap=_d.call(this,rp)||this;ap.targetShape=rp.targetShape;for(var sp=0;sp<ap.targetShape.length;++sp)ap.isUnknown(ap.targetShape[sp])&&(ap.targetShape[sp]=null);return ap}return __extends$h(np,_d),np.prototype.isUnknown=function(rp){return rp<0||rp==null},np.prototype.fixUnknownDimension=function(rp,ap){for(var sp="Total size of new array must be unchanged.",lp=ap.slice(),up=1,cp=null,dp=0;dp<lp.length;++dp){var fp=lp[dp];if(this.isUnknown(fp)){if(cp!==null)throw new ValueError("Can only specifiy one unknown dimension.");cp=dp}else up*=fp}var pp=arrayProd(rp);if(cp!==null){if(up===0||pp%up!=0)throw new ValueError(sp);lp[cp]=pp/up}else if(pp!==up)throw new ValueError(sp);return lp},np.prototype.computeOutputShape=function(rp){for(var ap=!1,sp=0;sp<rp.length;++sp)if(this.isUnknown(rp[sp])){ap=!0;break}return ap?rp.slice(0,1).concat(this.targetShape):rp.slice(0,1).concat(this.fixUnknownDimension(rp.slice(1),this.targetShape))},np.prototype.call=function(rp,ap){var sp=this;return je(function(){sp.invokeCallHook(rp,ap);var lp=getExactlyOneTensor(rp),up=lp.shape,cp=up.slice(0,1).concat(sp.fixUnknownDimension(up.slice(1),sp.targetShape));return lp.reshape(cp)})},np.prototype.getConfig=function(){var rp={targetShape:this.targetShape},ap=_d.prototype.getConfig.call(this);return Object.assign(rp,ap),rp},np.className="Reshape",np}(Layer);Mf.registerClass(Reshape);var Permute=function(_d){function np(rp){var ap=_d.call(this,rp)||this;if(rp.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(rp.dims))throw new Error("Permute constructor requires `dims` to be an Array, but received "+rp.dims+" instead.");var sp=range(1,rp.dims.length+1);if(!tt.arraysEqual(rp.dims.slice().sort(),sp))throw new Error("Invalid permutation `dims`: "+JSON.stringify(rp.dims)+" `dims` must contain consecutive integers starting from 1.");return ap.dims=rp.dims,ap.dimsIncludingBatch=[0].concat(ap.dims),ap.inputSpec=[new InputSpec({ndim:ap.dims.length+1})],ap}return __extends$h(np,_d),np.prototype.computeOutputShape=function(rp){var ap=(rp=getExactlyOneShape(rp)).slice();return this.dims.forEach(function(sp,lp){ap[lp+1]=rp[sp]}),ap},np.prototype.call=function(rp,ap){return El(getExactlyOneTensor(rp),this.dimsIncludingBatch)},np.prototype.getConfig=function(){var rp={dims:this.dims},ap=_d.prototype.getConfig.call(this);return Object.assign(rp,ap),rp},np.className="Permute",np}(Layer);Mf.registerClass(Permute);var Masking=function(_d){function np(rp){var ap=_d.call(this,rp??{})||this;return ap.supportsMasking=!0,ap.maskValue=rp!=null?rp.maskValue==null?0:rp.maskValue:0,ap}return __extends$h(np,_d),np.prototype.computeOutputShape=function(rp){return rp},np.prototype.getConfig=function(){var rp=_d.prototype.getConfig.call(this),ap={maskValue:this.maskValue};return Object.assign(ap,rp),ap},np.prototype.computeMask=function(rp,ap){var sp=getExactlyOneTensor(rp);return ul(yc(sp,this.maskValue),-1)},np.prototype.call=function(rp,ap){var sp=this;return je(function(){sp.invokeCallHook(rp,ap);var lp=getExactlyOneTensor(rp),up=ul(yc(lp,sp.maskValue),-1,!0);return lp.mul(up.asType(lp.dtype))})},np.className="Masking",np}(Layer);Mf.registerClass(Masking);var Embedding=function(_d){function np(rp){var ap=_d.call(this,rp)||this;if(ap.embeddings=null,ap.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",rp.batchInputShape==null&&rp.inputShape==null){var sp=null;rp.batchSize!=null&&(sp=rp.batchSize),rp.inputLength==null?ap.batchInputShape=[sp,null]:ap.batchInputShape=[sp].concat(toList(rp.inputLength))}return ap.inputDim=rp.inputDim,assertPositiveInteger(ap.inputDim,"inputDim"),ap.outputDim=rp.outputDim,assertPositiveInteger(ap.outputDim,"outputDim"),ap.embeddingsInitializer=getInitializer(rp.embeddingsInitializer||ap.DEFAULT_EMBEDDINGS_INITIALIZER),ap.embeddingsRegularizer=getRegularizer(rp.embeddingsRegularizer),ap.activityRegularizer=getRegularizer(rp.activityRegularizer),ap.embeddingsConstraint=getConstraint(rp.embeddingsConstraint),ap.maskZero=rp.maskZero,ap.supportsMasking=rp.maskZero,ap.inputLength=rp.inputLength,ap}return __extends$h(np,_d),np.prototype.build=function(rp){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0},np.prototype.warnOnIncompatibleInputShape=function(rp){},np.prototype.computeMask=function(rp,ap){var sp=this;return je(function(){return sp.maskZero?(rp=getExactlyOneTensor(rp),yc(rp,zn(rp))):null})},np.prototype.computeOutputShape=function(rp){if(rp=getExactlyOneShape(rp),this.inputLength==null)return rp.concat([this.outputDim]);var ap=toList(this.inputLength);if(ap.length!==rp.length-1)throw new ValueError('"inputLength" is '+this.inputLength+", but received input shape has shape "+rp);for(var sp=0,lp=0;lp<ap.length;++lp){var up=ap[lp],cp=rp[lp+1];if(up!=null&&cp!=null&&up!==cp)throw new ValueError('"inputLength" is '+this.inputLength+", but received input shape has shape "+rp);up==null&&(ap[sp]=cp),sp++}return[rp[0]].concat(ap,[this.outputDim])},np.prototype.call=function(rp,ap){var sp=this;return je(function(){sp.invokeCallHook(rp,ap);var lp=getExactlyOneTensor(rp);return lp.dtype!=="int32"&&(lp=cast$1(lp,"int32")),gather$1(sp.embeddings.read(),lp.as1D()).reshape(getExactlyOneShape(sp.computeOutputShape(lp.shape)))})},np.prototype.getConfig=function(){var rp={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:serializeInitializer(this.embeddingsInitializer),embeddingsRegularizer:serializeRegularizer(this.embeddingsRegularizer),activityRegularizer:serializeRegularizer(this.activityRegularizer),embeddingsConstraint:serializeConstraint(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},ap=_d.prototype.getConfig.call(this);return Object.assign(rp,ap),rp},np.className="Embedding",np}(Layer);Mf.registerClass(Embedding);var Merge=function(_d){function np(rp){var ap=_d.call(this,rp||{})||this;return ap.supportsMasking=!0,ap}return __extends$h(np,_d),np.prototype.mergeFunction=function(rp){throw new NotImplementedError},np.prototype.computeElementwiseOpOutputShape=function(rp,ap){if(rp==null||ap==null)return null;if(rp.length<ap.length)return this.computeElementwiseOpOutputShape(ap,rp);if(ap.length===0)return rp;for(var sp=rp.slice(0,rp.length-ap.length),lp=0;lp<ap.length;++lp){var up=rp[rp.length-ap.length+lp],cp=ap[lp];if(up==null||cp==null||up<0||cp<0)sp.push(null);else if(up===1)sp.push(cp);else if(cp===1)sp.push(up);else{if(up!==cp)throw new ValueError("Operands could not be broadcast together with shapes "+JSON.stringify(rp)+" "+JSON.stringify(ap));sp.push(up)}}return sp},np.prototype.build=function(rp){if(Array.isArray(rp)&&!Array.isArray(rp[0])&&(rp=[getExactlyOneShape(rp)]),(rp=rp).length<2)throw new ValueError("A merge layer should be called on an Array of at least 2 inputs. Got "+rp.length+" input(s).");for(var ap=[],sp=0,lp=rp;sp<lp.length;sp++)(dp=lp[sp])!=null&&dp[0]!==null&&ap.push(dp[0]);if((ap=unique(ap)).length>1)throw new ValueError("Can not merge tensors with different batch sizes. Got tensors with shapes: "+JSON.stringify(rp)+".");for(var up=rp[0]==null?null:rp[0].slice(1),cp=1;cp<rp.length;++cp){var dp=rp[cp]==null?null:rp[cp].slice(1);up=this.computeElementwiseOpOutputShape(up,dp)}var fp=rp.map(function(pp){return pp.length});rp.indexOf(null)===-1&&unique(fp).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0},np.prototype.call=function(rp,ap){var sp=this;return je(function(){if(rp=rp,sp.reshapeRequired){var lp=[],up=rp.map(function(Rp){return Rp.rank});if(up.indexOf(null)===-1){for(var cp=max$1(up),dp=0,fp=rp;dp<fp.length;dp++){for(var pp=(xp=fp[dp]).rank,hp=0;hp<cp-pp;++hp)xp=expandDims$1(xp,1);lp.push(xp)}return sp.mergeFunction(lp)}for(var mp=!1,gp=0,vp=rp;gp<vp.length;gp++){var xp;if((pp=(xp=vp[gp]).rank)==null){var Sp=xp.shape,yp=Sp[0],bp=Sp.slice(1).concat([yp]),Ep=xp.reshape([yp].concat(arrayProd(Sp.slice(1))));Ep=(Ep=El(Ep,[1,0])).reshape(bp),lp.push(Ep),mp=!0}else if(pp>1){var wp=range(1,pp).concat([0]);lp.push(El(xp,wp)),mp=!0}else lp.push(xp)}var _p=sp.mergeFunction(lp),Cp=_p.rank;if(mp)if(Cp==null){var $p=_p.shape;bp=[yp=$p[$p.length-1]].concat($p.slice(0,$p.length-1)),_p=El(_p.reshape([-1,yp]),[1,0]).reshape(bp)}else Cp>1&&(wp=[Cp-1].concat(range(0,Cp-1)),_p=El(_p,wp));return _p}return sp.mergeFunction(rp)})},np.prototype.computeOutputShape=function(rp){var ap;ap=(rp=rp)[0]==null?null:rp[0].slice(1);for(var sp=1;sp<rp.length;++sp){var lp=rp[sp]==null?null:rp[sp].slice(1);ap=this.computeElementwiseOpOutputShape(ap,lp)}for(var up=[],cp=0,dp=rp;cp<dp.length;cp++)(lp=dp[cp])!=null&&lp[0]!==null&&up.push(lp[0]);return ap=(up=unique(up)).length===1?up.concat(ap):[null].concat(ap)},np.prototype.computeMask=function(rp,ap){return je(function(){if(ap==null)return null;if(!Array.isArray(ap))throw new ValueError("`mask` should be an Array");if(!Array.isArray(rp))throw new ValueError("`inputs` should be an Array");if(ap.length!==rp.length)throw new ValueError("The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths ("+rp.length+" vs "+ap.length+")");if(ap.every(function(up){return up==null}))return null;for(var sp=(ap=ap.map(function(up){return up==null?up:dr(up,0)}))[0],lp=1;lp<ap.length-1;++lp)sp=Ms(sp,ap[lp]);return sp})},np}(Layer),Add=function(_d){function np(rp){return _d.call(this,rp)||this}return __extends$h(np,_d),np.prototype.mergeFunction=function(rp){return je(function(){for(var ap=rp[0].clone(),sp=1;sp<rp.length;++sp)ap=Vs(ap,rp[sp]);return ap})},np.className="Add",np}(Merge);Mf.registerClass(Add);var Multiply=function(_d){function np(rp){return _d.call(this,rp)||this}return __extends$h(np,_d),np.prototype.mergeFunction=function(rp){return je(function(){for(var ap=rp[0].clone(),sp=1;sp<rp.length;++sp)ap=tc(ap,rp[sp]);return ap})},np.className="Multiply",np}(Merge);Mf.registerClass(Multiply);var Average=function(_d){function np(rp){return _d.call(this,rp)||this}return __extends$h(np,_d),np.prototype.mergeFunction=function(rp){return je(function(){for(var ap=rp[0].clone(),sp=1;sp<rp.length;++sp)ap=Vs(ap,rp[sp]);return tc(1/rp.length,ap)})},np.className="Average",np}(Merge);Mf.registerClass(Average);var Maximum=function(_d){function np(rp){return _d.call(this,rp)||this}return __extends$h(np,_d),np.prototype.mergeFunction=function(rp){return je(function(){for(var ap=rp[0],sp=1;sp<rp.length;++sp)ap=Xs(ap,rp[sp]);return ap})},np.className="Maximum",np}(Merge);Mf.registerClass(Maximum);var Minimum=function(_d){function np(rp){return _d.call(this,rp)||this}return __extends$h(np,_d),np.prototype.mergeFunction=function(rp){return je(function(){for(var ap=rp[0],sp=1;sp<rp.length;++sp)ap=Ys(ap,rp[sp]);return ap})},np.className="Minimum",np}(Merge);Mf.registerClass(Minimum);var Concatenate=function(_d){function np(rp){var ap=_d.call(this,rp)||this;return ap.DEFAULT_AXIS=-1,rp==null&&(rp={}),ap.axis=rp.axis==null?ap.DEFAULT_AXIS:rp.axis,ap.supportsMasking=!0,ap.reshapeRequired=!1,ap}return __extends$h(np,_d),np.prototype.build=function(rp){if(!Array.isArray(rp)||!Array.isArray(rp[0])||rp.length===1)throw new ValueError("A `Concatenate` layer should be called on a list of at least 2 inputs");for(var ap=!0,sp=0,lp=rp=rp;sp<lp.length;sp++)if((mp=lp[sp])!=null){ap=!1;break}if(!ap){for(var up=[],cp=0;cp<rp.length;++cp){var dp=rp[cp].slice();dp.splice(this.axis,1);for(var fp=!1,pp=0,hp=up;pp<hp.length;pp++){var mp=hp[pp];if(tt.arraysEqual(mp,dp)){fp=!0;break}}fp||up.push(dp)}if(up.length>1)throw new ValueError("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(rp))}},np.prototype.mergeFunction=function(rp){var ap=this;return je(function(){return concatenate(rp,ap.axis)})},np.prototype.computeOutputShape=function(rp){if(!Array.isArray(rp)||!Array.isArray(rp[0]))throw new ValueError("A `Concatenate` layer should be called on a list of inputs.");for(var ap=rp,sp=ap[0].slice(),lp=this.axis<0?sp.length+this.axis:this.axis,up=0,cp=ap.slice(1);up<cp.length;up++){var dp=cp[up];if(sp[lp]==null||dp[lp]==null){sp[lp]=null;break}sp[lp]+=dp[lp]}return sp},np.prototype.computeMask=function(rp,ap){var sp=this;if(ap==null)return null;if(!Array.isArray(ap))throw new ValueError("`mask` should be an array for Concatenate");if(!Array.isArray(rp))throw new ValueError("`inputs` should be an array for Concatenate");if(ap.length!==rp.length)throw new ValueError("Mismatch in the length of mask ("+ap.length+") and the legnth of inputs ("+rp.length+")");return je(function(){var lp=!0;if(ap.forEach(function(fp){fp==null||(lp=!1)}),lp)return null;for(var up=[],cp=0;cp<rp.length;++cp)ap[cp]==null?up.push(Vn(rp[cp]).asType("bool")):ap[cp].rank<rp[cp].rank?up.push(dr(ap[cp],-1)):up.push(ap[cp]);var dp=Gn(up,sp.axis);return il(dp,-1,!1)})},np.prototype.getConfig=function(){var rp={axis:this.axis},ap=_d.prototype.getConfig.call(this);return Object.assign(rp,ap),rp},np.className="Concatenate",np}(Merge);function interpretAxis(_d,np){for(;_d<0;)_d+=np;return _d}function batchDot(_d,np,rp){if(_d.shape.length>3||np.shape.length>3)throw new NotImplementedError("batchDot is not implemented for tensors of 4D or higher rank yet");if(tt.assert(_d.shape.length>=2,function(){return"batchDot requires the rank of x to be >= 2, but got "+_d.shape.length}),tt.assert(_d.shape.length>=2,function(){return"batchDot requires the rank of y to be >= 2, but got "+np.shape.length}),typeof rp=="number"&&(rp=[rp,rp]),_d.dtype==="complex64"||np.dtype==="complex64")throw new NotImplementedError("batchDot is not implemented for complex64-type Tensors yet.");var ap=_d.shape.length,sp=np.shape.length;rp==null&&(rp=[ap-1,sp-2]);var lp=rp;return je(function(){var up,cp;if(ap>sp){up=ap-sp;for(var dp=[],fp=0;fp<up;++fp)dp.push(1);np=np.reshape(np.shape.concat(dp))}else if(sp>ap){for(up=sp-ap,dp=[],fp=0;fp<up;++fp)dp.push(1);_d=_d.reshape(_d.shape.concat(dp))}else up=0;if(_d.shape.length===2&&np.shape.length===2)cp=lp[0]===lp[1]?_d.mulStrict(np).sum(lp[0]):_d.transpose([1,0]).mulStrict(np).sum(lp[1]);else{var pp=lp[0]!==_d.shape.length-1,hp=lp[1]===np.shape.length-1;cp=_d.matMul(np,pp,hp)}if(up>0){var mp=void 0,gp=[];for(fp=mp=ap>sp?ap+sp-3:ap-1;fp<mp+up;++fp)gp.push(fp);cp=cp.squeeze(gp)}return cp.shape.length===1&&(cp=cp.expandDims(1)),cp})}Mf.registerClass(Concatenate);var Dot=function(_d){function np(rp){var ap=_d.call(this,rp)||this;return ap.axes=rp.axes,ap.normalize=rp.normalize!=null&&rp.normalize,ap.supportsMasking=!0,ap.reshapeRequired=!1,ap}return __extends$h(np,_d),np.prototype.build=function(rp){tt.assert(Array.isArray(rp)&&rp.length===2&&Array.isArray(rp[0])&&Array.isArray(rp[1]),function(){return"A `Dot` layer should be called on a list of exactly 2 inputs."});var ap=rp[0],sp=rp[1];if(ap.length>3||sp.length>3)throw new NotImplementedError("Dot layer does not support tensors of 4D or higher rank yet.");var lp=this.interpretAxes(ap,sp);if(ap[lp[0]]!==sp[lp[1]])throw new ValueError("Dimension incompatibility: "+ap[lp[0]]+" !== "+sp[lp[1]])},np.prototype.mergeFunction=function(rp){if(rp.length!==2)throw new ValueError("A `Dot` layer must be called on exactly 2 inputs, but received "+rp.length+" input(s).");var ap,sp=rp[0],lp=rp[1];return ap=Array.isArray(this.axes)?this.axes.map(function(up,cp){return interpretAxis(up,rp[cp].shape.length)}):[interpretAxis(this.axes,sp.shape.length),interpretAxis(this.axes,lp.shape.length)],this.normalize&&(sp=l2Normalize(sp,ap[0]),lp=l2Normalize(lp,ap[1])),batchDot(sp,lp,ap)},np.prototype.interpretAxes=function(rp,ap){return Array.isArray(this.axes)?this.axes:[interpretAxis(this.axes,rp.length),interpretAxis(this.axes,ap.length)]},np.prototype.computeOutputShape=function(rp){tt.assert(Array.isArray(rp)&&rp.length===2&&Array.isArray(rp[0])&&Array.isArray(rp[1]),function(){return"A `Dot` layer should be called on a list of exactly 2 inputs."});var ap=rp[0].slice(),sp=rp[1].slice();if(ap.length>3||sp.length>3)throw new NotImplementedError("Dot layer does not support tensors of 4D or higher rank yet.");var lp=this.interpretAxes(ap,sp);ap.splice(lp[0],1),sp.splice(lp[1],1),sp.splice(0,1);var up=ap.concat(sp);return up.length===1&&up.push(1),up},np.prototype.computeMask=function(rp,ap){return null},np.prototype.getConfig=function(){var rp={axes:this.axes,normalize:this.normalize},ap=_d.prototype.getConfig.call(this);return Object.assign(rp,ap),rp},np.className="Dot",np}(Merge);Mf.registerClass(Dot);var GaussianNoise=function(_d){function np(rp){var ap=_d.call(this,rp)||this;return ap.supportsMasking=!0,ap.stddev=rp.stddev,ap}return __extends$h(np,_d),np.prototype.computeOutputShape=function(rp){return rp},np.prototype.getConfig=function(){var rp=_d.prototype.getConfig.call(this),ap={stddev:this.stddev};return Object.assign(ap,rp),ap},np.prototype.call=function(rp,ap){var sp=this;return je(function(){sp.invokeCallHook(rp,ap);var lp=getExactlyOneTensor(rp);return inTrainPhase(function(){return randomNormal$1(lp.shape,0,sp.stddev).add(lp)},function(){return lp},ap.training||!1)})},np.className="GaussianNoise",np}(Layer);Mf.registerClass(GaussianNoise);var GaussianDropout=function(_d){function np(rp){var ap=_d.call(this,rp)||this;return ap.supportsMasking=!0,ap.rate=rp.rate,ap}return __extends$h(np,_d),np.prototype.computeOutputShape=function(rp){return rp},np.prototype.getConfig=function(){var rp=_d.prototype.getConfig.call(this),ap={rate:this.rate};return Object.assign(ap,rp),ap},np.prototype.call=function(rp,ap){var sp=this;return je(function(){sp.invokeCallHook(rp,ap);var lp=getExactlyOneTensor(rp);return sp.rate>0&&sp.rate<1?inTrainPhase(function(){var up=Math.sqrt(sp.rate/(1-sp.rate));return lp.mul(randomNormal$1(lp.shape,1,up))},function(){return lp},ap.training||!1):lp})},np.className="GaussianDropout",np}(Layer);Mf.registerClass(GaussianDropout);var AlphaDropout=function(_d){function np(rp){var ap=_d.call(this,rp)||this;return ap.supportsMasking=!0,ap.rate=rp.rate,ap.noiseShape=rp.noiseShape,ap}return __extends$h(np,_d),np.prototype._getNoiseShape=function(rp){return this.noiseShape||getExactlyOneTensor(rp).shape},np.prototype.computeOutputShape=function(rp){return rp},np.prototype.getConfig=function(){var rp=_d.prototype.getConfig.call(this),ap={rate:this.rate};return Object.assign(ap,rp),ap},np.prototype.call=function(rp,ap){var sp=this;return je(function(){if(sp.rate<1&&sp.rate>0){var lp=sp._getNoiseShape(rp);return inTrainPhase(function(){var up=getExactlyOneTensor(rp),cp=-1.7580993408473766,dp=hc(kr(lp),sp.rate);dp=cast$1(dp,"float32");var fp=Math.pow((1-sp.rate)*(1+sp.rate*Math.pow(cp,2)),-.5),pp=-fp*cp*sp.rate;return up.mul(dp).add(dp.add(-1).mul(cp)).mul(fp).add(pp)},function(){return getExactlyOneTensor(rp)},ap.training||!1)}return rp})},np.className="AlphaDropout",np}(Layer);function batchNormalization(_d,np,rp,ap,sp,lp){var up;if(lp===void 0&&(lp=.001),_d.rank===2)up=Fs(_d,np,rp,ap,sp,lp);else if(_d.rank===3)up=Os(_d,np,rp,ap,sp,lp);else{if(_d.rank!==4)throw new NotImplementedError("batchNormalization is not implemented for array of rank "+_d.rank+" yet");up=_s(_d,np,rp,ap,sp,lp)}return up}function regularNormalizeBatchInTraining(_d,np,rp,ap,sp){return sp===void 0&&(sp=.001),je(function(){var lp=dl(_d,ap),up=lp.mean,cp=lp.variance;return[batchNormalization(_d,up,cp,rp,np,sp),up,cp]})}function broadcastNormalizeBatchInTraining(_d,np,rp,ap,sp){return sp===void 0&&(sp=.001),je(function(){for(var lp=dl(_d,ap),up=lp.mean,cp=lp.variance,dp=[],fp=0,pp=range(0,_d.rank);fp<pp.length;fp++){var hp=pp[fp];ap.indexOf(hp)!==-1?dp.push(1):dp.push(_d.shape[hp])}var mp=up.reshape(dp),gp=cp.reshape(dp),vp=np==null?null:np.reshape(dp),xp=rp==null?null:rp.reshape(dp);return[batchNormalization(_d,mp,gp,xp,vp,sp),up,cp]})}function normalizeBatchInTraining(_d,np,rp,ap,sp){return sp===void 0&&(sp=.001),tt.arraysEqual(ap.slice().sort(),range(0,_d.rank-1))?regularNormalizeBatchInTraining(_d,np,rp,ap,sp):broadcastNormalizeBatchInTraining(_d,np,rp,ap,sp)}Mf.registerClass(AlphaDropout);var BatchNormalization=function(_d){function np(rp){var ap=this;return rp==null&&(rp={}),(ap=_d.call(this,rp)||this).supportsMasking=!0,ap.axis=rp.axis==null?-1:rp.axis,ap.momentum=rp.momentum==null?.99:rp.momentum,ap.epsilon=rp.epsilon==null?.001:rp.epsilon,ap.center=rp.center==null||rp.center,ap.scale=rp.scale==null||rp.scale,ap.betaInitializer=getInitializer(rp.betaInitializer||"zeros"),ap.gammaInitializer=getInitializer(rp.gammaInitializer||"ones"),ap.movingMeanInitializer=getInitializer(rp.movingMeanInitializer||"zeros"),ap.movingVarianceInitializer=getInitializer(rp.movingVarianceInitializer||"ones"),ap.betaConstraint=getConstraint(rp.betaConstraint),ap.gammaConstraint=getConstraint(rp.gammaConstraint),ap.betaRegularizer=getRegularizer(rp.betaRegularizer),ap.gammaRegularizer=getRegularizer(rp.gammaRegularizer),ap}return __extends$h(np,_d),np.prototype.build=function(rp){var ap;rp=getExactlyOneShape(rp);var sp=this.axis>=0?this.axis:this.axis+rp.length,lp=rp[sp];if(lp==null)throw new ValueError("Axis "+sp+" of input tensor should have a defined dimension but the layer received an input with shape "+JSON.stringify(rp)+".");this.inputSpec=[new InputSpec({ndim:rp.length,axes:(ap={},ap[sp]=lp,ap)})];var up=[lp];this.scale&&(this.gamma=this.addWeight("gamma",up,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",up,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",up,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",up,null,this.movingVarianceInitializer,null,!1),this.built=!0},np.prototype.call=function(rp,ap){var sp=this;return je(function(){var lp=ap.training!=null&&ap.training,up=getExactlyOneTensor(rp),cp=up.shape,dp=cp.length,fp=range(0,dp),pp=sp.axis>=0?sp.axis:sp.axis+dp;fp.splice(pp,1);var hp=pyListRepeat(1,dp);hp[pp]=cp[pp];var mp=fp.slice();mp.sort();var gp=!tt.arraysEqual(mp,range(0,dp).slice(0,dp-1));if(!lp)return function(){if(gp){var Ep=sp.movingMean.read().reshape(hp),wp=sp.movingVariance.read().reshape(hp),_p=sp.center?sp.beta.read().reshape(hp):null,Cp=sp.scale?sp.gamma.read().reshape(hp):null;return batchNormalization(up,Ep,wp,_p,Cp,sp.epsilon)}return batchNormalization(up,sp.movingMean.read(),sp.movingVariance.read(),sp.beta==null?null:sp.beta.read(),sp.gamma==null?null:sp.gamma.read(),sp.epsilon)}();var vp=normalizeBatchInTraining(up,sp.gamma.read(),sp.beta.read(),fp,sp.epsilon),xp=vp[0],Sp=vp[1],yp=vp[2],bp=function(Ep,wp,_p){je(function(){var Cp=1-_p,$p=Ep.read(),Rp=$p.sub(wp).mul(Cp);Ep.write($p.sub(Rp))})};return bp(sp.movingMean,Sp,sp.momentum),bp(sp.movingVariance,yp,sp.momentum),xp})},np.prototype.getConfig=function(){var rp={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:serializeInitializer(this.betaInitializer),gammaInitializer:serializeInitializer(this.gammaInitializer),movingMeanInitializer:serializeInitializer(this.movingMeanInitializer),movingVarianceInitializer:serializeInitializer(this.movingVarianceInitializer),betaRegularizer:serializeRegularizer(this.betaRegularizer),gammaRegularizer:serializeRegularizer(this.gammaRegularizer),betaConstraint:serializeConstraint(this.betaConstraint),gammaConstraint:serializeConstraint(this.gammaConstraint)},ap=_d.prototype.getConfig.call(this);return Object.assign(rp,ap),rp},np.className="BatchNormalization",np}(Layer);Mf.registerClass(BatchNormalization);var LayerNormalization=function(_d){function np(rp){var ap=this;if(rp==null&&(rp={}),(ap=_d.call(this,rp)||this).axis=rp.axis==null?-1:rp.axis,typeof ap.axis=="number"){if(!Number.isInteger(ap.axis))throw new Error("Expected axis to be an integer, but received "+ap.axis)}else{if(!Array.isArray(ap.axis))throw new Error("Expected axis to be an integer or an array of integers, but received "+JSON.stringify(ap.axis));for(var sp=0,lp=ap.axis;sp<lp.length;sp++){var up=lp[sp];if(!Number.isInteger(up))throw new Error("Expected axis to be an array of integers, but received "+JSON.stringify(ap.axis))}}return ap.epsilon=rp.epsilon==null?.001:rp.epsilon,ap.center=rp.center==null||rp.center,ap.scale=rp.scale==null||rp.scale,ap.betaInitializer=getInitializer(rp.betaInitializer||"zeros"),ap.gammaInitializer=getInitializer(rp.gammaInitializer||"ones"),ap.betaRegularizer=getRegularizer(rp.betaRegularizer),ap.gammaRegularizer=getRegularizer(rp.gammaRegularizer),ap.supportsMasking=!0,ap}return __extends$h(np,_d),np.prototype.build=function(rp){var ap=(rp=getExactlyOneShape(rp)).length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(var sp=0;sp<this.axis.length;++sp)this.axis[sp]<0&&(this.axis[sp]+=ap);for(var lp=0,up=this.axis;lp<up.length;lp++){var cp=up[lp];if(cp<0||cp>=ap)throw new Error("Invalid axis: "+cp)}if(this.axis.length!==unique(this.axis).length)throw new Error("Found duplicate axes in: "+this.axis);var dp=this.axis.map(function(fp){return rp[fp]});this.scale?this.gamma=this.addWeight("gamma",dp,"float32",this.gammaInitializer,this.gammaRegularizer,!0):this.gamma=null,this.center?this.beta=this.addWeight("beta",dp,"float32",this.betaInitializer,this.betaRegularizer,!0):this.beta=null,this.built=!0},np.prototype.call=function(rp,ap){var sp=this,lp=getExactlyOneTensor(rp),up=lp.shape,cp=up.length;return je(function(){for(var dp=dl(lp,sp.axis,!0),fp=dp.mean,pp=dp.variance,hp=pyListRepeat(1,cp),mp=0,gp=sp.axis;mp<gp.length;mp++){var vp=gp[mp];hp[vp]=up[vp]}for(var xp=function(_p){return _p!=null&&_p.shape.length!==cp&&sp.axis!==[cp-1]?_p.reshape(hp):_p},Sp=xp(sp.gamma.read()),yp=xp(sp.beta.read()),bp=[],Ep=[],wp=0;wp<cp;++wp)sp.axis.indexOf(wp)!==-1?(bp.push(up[wp]),Ep.push(1)):(bp.push(1),Ep.push(up[wp]));return fp=fp.tile(bp),pp=pp.tile(bp),Sp=Sp.tile(Ep),yp=yp.tile(Ep),batchNormalization(lp,fp,pp,yp,Sp,sp.epsilon)})},np.prototype.getConfig=function(){var rp={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:serializeInitializer(this.betaInitializer),gammaInitializer:serializeInitializer(this.gammaInitializer),betaRegularizer:serializeRegularizer(this.betaRegularizer),gammaRegularizer:serializeRegularizer(this.gammaRegularizer)},ap=_d.prototype.getConfig.call(this);return Object.assign(rp,ap),rp},np.className="LayerNormalization",np}(Layer);function spatial2dPadding(_d,np,rp){return je(function(){if(_d.rank!==4)throw new ValueError("temporalPadding expects input tensor to be 4-D, but received a "+_d.rank+"-D tensor.");if(np==null&&(np=[[1,1],[1,1]]),np.length!==2||np[0].length!==2||np[1].length!==2)throw new ValueError("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(rp==null&&(rp=imageDataFormat()),rp!=="channelsLast"&&rp!=="channelsFirst")throw new ValueError("Unknown data format: "+rp+". Supported data formats are 'channelsLast' and 'channelsFirst.");var ap;return ap=rp==="channelsFirst"?[[0,0],[0,0],np[0],np[1]]:[[0,0],np[0],np[1],[0,0]],yr(_d,ap)})}Mf.registerClass(LayerNormalization);var ZeroPadding2D=function(_d){function np(rp){var ap=this;if(rp==null&&(rp={}),(ap=_d.call(this,rp)||this).dataFormat=rp.dataFormat==null?imageDataFormat():rp.dataFormat,rp.padding==null)ap.padding=[[1,1],[1,1]];else if(typeof rp.padding=="number")ap.padding=[[rp.padding,rp.padding],[rp.padding,rp.padding]];else{if(rp.padding=rp.padding,rp.padding.length!==2)throw new ValueError("ZeroPadding2D expects padding to be a length-2 array, but received a length-"+rp.padding.length+" array.");var sp=void 0,lp=void 0;if(typeof rp.padding[0]=="number")sp=[rp.padding[0],rp.padding[0]],lp=[rp.padding[1],rp.padding[1]];else{if(rp.padding=rp.padding,rp.padding[0].length!==2)throw new ValueError("ZeroPadding2D expects height padding to be a length-2 array, but received a length-"+rp.padding[0].length+" array.");if(sp=rp.padding[0],rp.padding[1].length!==2)throw new ValueError("ZeroPadding2D expects width padding to be a length-2 array, but received a length-"+rp.padding[1].length+" array.");lp=rp.padding[1]}ap.padding=[sp,lp]}return ap.inputSpec=[new InputSpec({ndim:4})],ap}return __extends$h(np,_d),np.prototype.computeOutputShape=function(rp){var ap,sp;return rp=getExactlyOneShape(rp),this.dataFormat==="channelsFirst"?(ap=rp[2]!=null&&rp[2]>=0?rp[2]+this.padding[0][0]+this.padding[0][1]:null,sp=rp[3]!=null&&rp[3]>=0?rp[3]+this.padding[1][0]+this.padding[1][1]:null,[rp[0],rp[1],ap,sp]):(ap=rp[1]!=null&&rp[1]>=0?rp[1]+this.padding[0][0]+this.padding[0][1]:null,sp=rp[2]!=null&&rp[2]>=0?rp[2]+this.padding[1][0]+this.padding[1][1]:null,[rp[0],ap,sp,rp[3]])},np.prototype.call=function(rp,ap){var sp=this;return je(function(){return spatial2dPadding(getExactlyOneTensor(rp),sp.padding,sp.dataFormat)})},np.prototype.getConfig=function(){var rp={padding:this.padding,dataFormat:this.dataFormat},ap=_d.prototype.getConfig.call(this);return Object.assign(rp,ap),rp},np.className="ZeroPadding2D",np}(Layer);function pool2d(_d,np,rp,ap,sp,lp){return je(function(){var up;checkDataFormat(sp),checkPoolMode(lp),checkPaddingMode(ap),rp==null&&(rp=[1,1]),ap==null&&(ap="valid"),sp==null&&(sp=imageDataFormat()),lp==null&&(lp="max"),_d=preprocessConv2DInput(_d,sp);var cp=ap==="same"?"same":"valid";return up=lp==="max"?$c(_d,np,rp,cp):Yc(_d,np,rp,cp),sp==="channelsFirst"&&(up=El(up,[0,3,1,2])),up})}function pool3d(_d,np,rp,ap,sp,lp){return je(function(){var up;checkDataFormat(sp),checkPoolMode(lp),checkPaddingMode(ap),rp==null&&(rp=[1,1,1]),ap==null&&(ap="valid"),sp==null&&(sp=imageDataFormat()),lp==null&&(lp="max"),_d=preprocessConv3DInput(_d,sp);var cp=ap==="same"?"same":"valid";return up=lp==="max"?Jc(_d,np,rp,cp):Zc(_d,np,rp,cp),sp==="channelsFirst"&&(up=El(up,[0,4,1,2,3])),up})}Mf.registerClass(ZeroPadding2D);var Pooling1D=function(_d){function np(rp){var ap=this;if(rp.poolSize==null&&(rp.poolSize=2),ap=_d.call(this,rp)||this,typeof rp.poolSize=="number")ap.poolSize=[rp.poolSize];else{if(!Array.isArray(rp.poolSize)||rp.poolSize.length!==1||typeof rp.poolSize[0]!="number")throw new ValueError("poolSize for 1D convolutional layer must be a number or an Array of a single number, but received "+JSON.stringify(rp.poolSize));ap.poolSize=rp.poolSize}if(assertPositiveInteger(ap.poolSize,"poolSize"),rp.strides==null)ap.strides=ap.poolSize;else if(typeof rp.strides=="number")ap.strides=[rp.strides];else{if(!Array.isArray(rp.strides)||rp.strides.length!==1||typeof rp.strides[0]!="number")throw new ValueError("strides for 1D convolutional layer must be a number or an Array of a single number, but received "+JSON.stringify(rp.strides));ap.strides=rp.strides}return assertPositiveInteger(ap.strides,"strides"),ap.padding=rp.padding==null?"valid":rp.padding,checkPaddingMode(ap.padding),ap.inputSpec=[new InputSpec({ndim:3})],ap}return __extends$h(np,_d),np.prototype.computeOutputShape=function(rp){var ap=convOutputLength((rp=getExactlyOneShape(rp))[1],this.poolSize[0],this.padding,this.strides[0]);return[rp[0],ap,rp[2]]},np.prototype.call=function(rp,ap){var sp=this;return je(function(){sp.invokeCallHook(rp,ap),rp=expandDims$1(getExactlyOneTensor(rp),2);var lp=sp.poolingFunction(getExactlyOneTensor(rp),[sp.poolSize[0],1],[sp.strides[0],1],sp.padding,"channelsLast");return Dr(lp,[2])})},np.prototype.getConfig=function(){var rp={poolSize:this.poolSize,padding:this.padding,strides:this.strides},ap=_d.prototype.getConfig.call(this);return Object.assign(rp,ap),rp},np}(Layer),MaxPooling1D=function(_d){function np(rp){return _d.call(this,rp)||this}return __extends$h(np,_d),np.prototype.poolingFunction=function(rp,ap,sp,lp,up){return checkDataFormat(up),checkPaddingMode(lp),pool2d(rp,ap,sp,lp,up,"max")},np.className="MaxPooling1D",np}(Pooling1D);Mf.registerClass(MaxPooling1D);var AveragePooling1D=function(_d){function np(rp){return _d.call(this,rp)||this}return __extends$h(np,_d),np.prototype.poolingFunction=function(rp,ap,sp,lp,up){return checkDataFormat(up),checkPaddingMode(lp),pool2d(rp,ap,sp,lp,up,"avg")},np.className="AveragePooling1D",np}(Pooling1D);Mf.registerClass(AveragePooling1D);var Pooling2D=function(_d){function np(rp){var ap=this;if(rp.poolSize==null&&(rp.poolSize=[2,2]),(ap=_d.call(this,rp)||this).poolSize=Array.isArray(rp.poolSize)?rp.poolSize:[rp.poolSize,rp.poolSize],rp.strides==null)ap.strides=ap.poolSize;else if(Array.isArray(rp.strides)){if(rp.strides.length!==2)throw new ValueError("If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length "+rp.strides.length+".");ap.strides=rp.strides}else ap.strides=[rp.strides,rp.strides];return assertPositiveInteger(ap.poolSize,"poolSize"),assertPositiveInteger(ap.strides,"strides"),ap.padding=rp.padding==null?"valid":rp.padding,ap.dataFormat=rp.dataFormat==null?"channelsLast":rp.dataFormat,checkDataFormat(ap.dataFormat),checkPaddingMode(ap.padding),ap.inputSpec=[new InputSpec({ndim:4})],ap}return __extends$h(np,_d),np.prototype.computeOutputShape=function(rp){rp=getExactlyOneShape(rp);var ap=this.dataFormat==="channelsFirst"?rp[2]:rp[1],sp=this.dataFormat==="channelsFirst"?rp[3]:rp[2];return ap=convOutputLength(ap,this.poolSize[0],this.padding,this.strides[0]),sp=convOutputLength(sp,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[rp[0],rp[1],ap,sp]:[rp[0],ap,sp,rp[3]]},np.prototype.call=function(rp,ap){var sp=this;return je(function(){return sp.invokeCallHook(rp,ap),sp.poolingFunction(getExactlyOneTensor(rp),sp.poolSize,sp.strides,sp.padding,sp.dataFormat)})},np.prototype.getConfig=function(){var rp={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},ap=_d.prototype.getConfig.call(this);return Object.assign(rp,ap),rp},np}(Layer),MaxPooling2D=function(_d){function np(rp){return _d.call(this,rp)||this}return __extends$h(np,_d),np.prototype.poolingFunction=function(rp,ap,sp,lp,up){return checkDataFormat(up),checkPaddingMode(lp),pool2d(rp,ap,sp,lp,up,"max")},np.className="MaxPooling2D",np}(Pooling2D);Mf.registerClass(MaxPooling2D);var AveragePooling2D=function(_d){function np(rp){return _d.call(this,rp)||this}return __extends$h(np,_d),np.prototype.poolingFunction=function(rp,ap,sp,lp,up){return checkDataFormat(up),checkPaddingMode(lp),pool2d(rp,ap,sp,lp,up,"avg")},np.className="AveragePooling2D",np}(Pooling2D);Mf.registerClass(AveragePooling2D);var Pooling3D=function(_d){function np(rp){var ap=this;if(rp.poolSize==null&&(rp.poolSize=[2,2,2]),(ap=_d.call(this,rp)||this).poolSize=Array.isArray(rp.poolSize)?rp.poolSize:[rp.poolSize,rp.poolSize,rp.poolSize],rp.strides==null)ap.strides=ap.poolSize;else if(Array.isArray(rp.strides)){if(rp.strides.length!==3)throw new ValueError("If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length "+rp.strides.length+".");ap.strides=rp.strides}else ap.strides=[rp.strides,rp.strides,rp.strides];return assertPositiveInteger(ap.poolSize,"poolSize"),assertPositiveInteger(ap.strides,"strides"),ap.padding=rp.padding==null?"valid":rp.padding,ap.dataFormat=rp.dataFormat==null?"channelsLast":rp.dataFormat,checkDataFormat(ap.dataFormat),checkPaddingMode(ap.padding),ap.inputSpec=[new InputSpec({ndim:5})],ap}return __extends$h(np,_d),np.prototype.computeOutputShape=function(rp){rp=getExactlyOneShape(rp);var ap=this.dataFormat==="channelsFirst"?rp[2]:rp[1],sp=this.dataFormat==="channelsFirst"?rp[3]:rp[2],lp=this.dataFormat==="channelsFirst"?rp[4]:rp[3];return ap=convOutputLength(ap,this.poolSize[0],this.padding,this.strides[0]),sp=convOutputLength(sp,this.poolSize[1],this.padding,this.strides[1]),lp=convOutputLength(lp,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[rp[0],rp[1],ap,sp,lp]:[rp[0],ap,sp,lp,rp[4]]},np.prototype.call=function(rp,ap){var sp=this;return je(function(){return sp.invokeCallHook(rp,ap),sp.poolingFunction(getExactlyOneTensor(rp),sp.poolSize,sp.strides,sp.padding,sp.dataFormat)})},np.prototype.getConfig=function(){var rp={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},ap=_d.prototype.getConfig.call(this);return Object.assign(rp,ap),rp},np}(Layer),MaxPooling3D=function(_d){function np(rp){return _d.call(this,rp)||this}return __extends$h(np,_d),np.prototype.poolingFunction=function(rp,ap,sp,lp,up){return checkDataFormat(up),checkPaddingMode(lp),pool3d(rp,ap,sp,lp,up,"max")},np.className="MaxPooling3D",np}(Pooling3D);Mf.registerClass(MaxPooling3D);var AveragePooling3D=function(_d){function np(rp){return _d.call(this,rp)||this}return __extends$h(np,_d),np.prototype.poolingFunction=function(rp,ap,sp,lp,up){return checkDataFormat(up),checkPaddingMode(lp),pool3d(rp,ap,sp,lp,up,"avg")},np.className="AveragePooling3D",np}(Pooling3D);Mf.registerClass(AveragePooling3D);var GlobalPooling1D=function(_d){function np(rp){var ap=_d.call(this,rp)||this;return ap.inputSpec=[new InputSpec({ndim:3})],ap}return __extends$h(np,_d),np.prototype.computeOutputShape=function(rp){return[rp[0],rp[2]]},np.prototype.call=function(rp,ap){throw new NotImplementedError},np}(Layer),GlobalAveragePooling1D=function(_d){function np(rp){return _d.call(this,rp||{})||this}return __extends$h(np,_d),np.prototype.call=function(rp,ap){return je(function(){var sp=getExactlyOneTensor(rp);return fl(sp,1)})},np.className="GlobalAveragePooling1D",np}(GlobalPooling1D);Mf.registerClass(GlobalAveragePooling1D);var GlobalMaxPooling1D=function(_d){function np(rp){return _d.call(this,rp||{})||this}return __extends$h(np,_d),np.prototype.call=function(rp,ap){return je(function(){var sp=getExactlyOneTensor(rp);return hl(sp,1)})},np.className="GlobalMaxPooling1D",np}(GlobalPooling1D);Mf.registerClass(GlobalMaxPooling1D);var GlobalPooling2D=function(_d){function np(rp){var ap=_d.call(this,rp)||this;return ap.dataFormat=rp.dataFormat==null?"channelsLast":rp.dataFormat,checkDataFormat(ap.dataFormat),ap.inputSpec=[new InputSpec({ndim:4})],ap}return __extends$h(np,_d),np.prototype.computeOutputShape=function(rp){return rp=rp,this.dataFormat==="channelsLast"?[rp[0],rp[3]]:[rp[0],rp[1]]},np.prototype.call=function(rp,ap){throw new NotImplementedError},np.prototype.getConfig=function(){var rp={dataFormat:this.dataFormat},ap=_d.prototype.getConfig.call(this);return Object.assign(rp,ap),rp},np}(Layer),GlobalAveragePooling2D=function(_d){function np(){return _d!==null&&_d.apply(this,arguments)||this}return __extends$h(np,_d),np.prototype.call=function(rp,ap){var sp=this;return je(function(){var lp=getExactlyOneTensor(rp);return sp.dataFormat==="channelsLast"?fl(lp,[1,2]):fl(lp,[2,3])})},np.className="GlobalAveragePooling2D",np}(GlobalPooling2D);Mf.registerClass(GlobalAveragePooling2D);var GlobalMaxPooling2D=function(_d){function np(){return _d!==null&&_d.apply(this,arguments)||this}return __extends$h(np,_d),np.prototype.call=function(rp,ap){var sp=this;return je(function(){var lp=getExactlyOneTensor(rp);return sp.dataFormat==="channelsLast"?hl(lp,[1,2]):hl(lp,[2,3])})},np.className="GlobalMaxPooling2D",np}(GlobalPooling2D);function standardizeArgs(_d,np,rp,ap){if(Array.isArray(_d)){if(np!=null||rp!=null)throw new ValueError("When inputs is an array, neither initialState or constants should be provided");ap!=null&&(rp=_d.slice(_d.length-ap,_d.length),_d=_d.slice(0,_d.length-ap)),_d.length>1&&(np=_d.slice(1,_d.length)),_d=_d[0]}function sp(lp){return lp==null||Array.isArray(lp)?lp:[lp]}return{inputs:_d,initialState:np=sp(np),constants:rp=sp(rp)}}function rnn(_d,np,rp,ap,sp,lp,up,cp){return ap===void 0&&(ap=!1),up===void 0&&(up=!1),cp===void 0&&(cp=!1),je(function(){var dp=np.shape.length;if(dp<3)throw new ValueError("Input should be at least 3D, but is "+dp+"D.");var fp=[1,0].concat(range(2,dp));if(np=El(np,fp),lp!=null)throw new NotImplementedError("The rnn() functoin of the deeplearn.js backend does not support constants yet.");up&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),sp!=null&&((sp=sp.asType("bool").asType("float32")).rank===dp-1&&(sp=dr(sp,-1)),sp=El(sp,fp)),ap&&(np=zc(np,0),sp!=null&&(sp=zc(sp,0)));var pp,hp,mp=[],gp=rp,vp=np.shape[0],xp=Or(np);sp!=null&&(hp=Or(sp));for(var Sp,yp=function(Ep){var wp=xp[Ep],_p=je(function(){return _d(wp,gp)});if(sp==null)pp=_p[0],gp=_p[1];else{var Cp=je(function(){var $p=hp[Ep],Rp=Vn($p).sub($p);return{output:_p[0].mul($p).addStrict(gp[0].mul(Rp)),newStates:gp.map(function(Pp,Op){return _p[1][Op].mul($p).addStrict(Pp.mul(Rp))})}});pp=Cp.output,gp=Cp.newStates}cp&&mp.push(pp)},bp=0;bp<vp;++bp)yp(bp);return cp&&(Sp=Tr(mp,1)),[pp,Sp,gp]})}Mf.registerClass(GlobalMaxPooling2D);var RNN=function(_d){function np(rp){var ap,sp=_d.call(this,rp)||this;if(rp.cell==null)throw new ValueError("cell property is missing for the constructor of RNN.");if((ap=Array.isArray(rp.cell)?new StackedRNNCells({cells:rp.cell}):rp.cell).stateSize==null)throw new ValueError("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");return sp.cell=ap,sp.returnSequences=rp.returnSequences!=null&&rp.returnSequences,sp.returnState=rp.returnState!=null&&rp.returnState,sp.goBackwards=rp.goBackwards!=null&&rp.goBackwards,sp._stateful=rp.stateful!=null&&rp.stateful,sp.unroll=rp.unroll!=null&&rp.unroll,sp.supportsMasking=!0,sp.inputSpec=[new InputSpec({ndim:3})],sp.stateSpec=null,sp.states_=null,sp.numConstants=null,sp.keptStates=[],sp}return __extends$h(np,_d),np.prototype.getStates=function(){return this.states_==null?range(0,Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1).map(function(rp){return null}):this.states_},np.prototype.setStates=function(rp){this.states_=rp},np.prototype.computeOutputShape=function(rp){isArrayOfShapes(rp)&&(rp=rp[0]),rp=rp;var ap=this.cell.stateSize;Array.isArray(ap)||(ap=[ap]);var sp,lp=ap[0];if(sp=this.returnSequences?[rp[0],rp[1],lp]:[rp[0],lp],this.returnState){for(var up=[],cp=0,dp=ap;cp<dp.length;cp++){var fp=dp[cp];up.push([rp[0],fp])}return[sp].concat(up)}return sp},np.prototype.computeMask=function(rp,ap){var sp=this;return je(function(){Array.isArray(ap)&&(ap=ap[0]);var lp=sp.returnSequences?ap:null;if(sp.returnState){var up=sp.states.map(function(cp){return null});return[lp].concat(up)}return lp})},Object.defineProperty(np.prototype,"states",{get:function(){if(this.states_==null){for(var rp=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,ap=[],sp=0;sp<rp;++sp)ap.push(null);return ap}return this.states_},set:function(rp){this.states_=rp},enumerable:!0,configurable:!0}),np.prototype.build=function(rp){if(this.numConstants!=null)throw new NotImplementedError("Constants support is not implemented in RNN yet.");isArrayOfShapes(rp)&&(rp=rp[0]),rp=rp;var ap=this.stateful?rp[0]:null,sp=rp[rp.length-1];this.inputSpec[0]=new InputSpec({shape:[ap,null,sp]});var lp,up=[rp[0]].concat(rp.slice(2));if(this.cell.build(up),lp=Array.isArray(this.cell.stateSize)?this.cell.stateSize:[this.cell.stateSize],this.stateSpec!=null){if(!tt.arraysEqual(this.stateSpec.map(function(cp){return cp.shape[cp.shape.length-1]}),lp))throw new ValueError("An initialState was passed that is not compatible with cell.stateSize. Received stateSpec="+this.stateSpec+"; However cell.stateSize is "+this.cell.stateSize)}else this.stateSpec=lp.map(function(cp){return new InputSpec({shape:[null,cp]})});this.stateful&&this.resetStates()},np.prototype.resetStates=function(rp,ap){var sp=this;ap===void 0&&(ap=!1),je(function(){if(!sp.stateful)throw new AttributeError("Cannot call resetStates() on an RNN Layer that is not stateful.");var lp=sp.inputSpec[0].shape[0];if(lp==null)throw new ValueError("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(sp.states_==null)Array.isArray(sp.cell.stateSize)?sp.states_=sp.cell.stateSize.map(function(pp){return Pn([lp,pp])}):sp.states_=[Pn([lp,sp.cell.stateSize])];else if(rp==null)Xe(sp.states_),sp.keptStates!=null&&(Xe(sp.keptStates),sp.keptStates=[]),Array.isArray(sp.cell.stateSize)?sp.states_=sp.cell.stateSize.map(function(pp){return Pn([lp,pp])}):sp.states_[0]=Pn([lp,sp.cell.stateSize]);else{if(Array.isArray(rp)||(rp=[rp]),rp.length!==sp.states_.length)throw new ValueError("Layer "+sp.name+" expects "+sp.states_.length+" state(s), but it received "+rp.length+" state value(s). Input received: "+rp);ap===!0?sp.keptStates.push(sp.states_.slice()):Xe(sp.states_);for(var up=0;up<sp.states_.length;++up){var cp=rp[up],dp=Array.isArray(sp.cell.stateSize)?sp.cell.stateSize[up]:sp.cell.stateSize,fp=[lp,dp];if(!tt.arraysEqual(cp.shape,fp))throw new ValueError("State "+up+" is incompatible with layer "+sp.name+": expected shape="+fp+", received shape="+cp.shape);sp.states_[up]=cp}}sp.states_=sp.states_.map(function(pp){return $e(pp.clone())})})},np.prototype.apply=function(rp,ap){var sp=ap==null?null:ap.initialState,lp=ap==null?null:ap.constants;ap==null&&(ap={});var up=standardizeArgs(rp,sp,lp,this.numConstants);rp=up.inputs,sp=up.initialState,lp=up.constants;var cp=[],dp=[];if(sp!=null){ap.initialState=sp,cp=cp.concat(sp),this.stateSpec=[];for(var fp=0,pp=sp;fp<pp.length;fp++){var hp=pp[fp];this.stateSpec.push(new InputSpec({shape:hp.shape}))}dp=dp.concat(this.stateSpec)}if(lp!=null&&(ap.constants=lp,cp=cp.concat(lp),this.numConstants=lp.length),cp[0]instanceof SymbolicTensor){var mp=[rp].concat(cp),gp=this.inputSpec.concat(dp),vp=this.inputSpec;this.inputSpec=gp;var xp=_d.prototype.apply.call(this,mp,ap);return this.inputSpec=vp,xp}return _d.prototype.apply.call(this,rp,ap)},np.prototype.call=function(rp,ap){var sp=this;return je(function(){var lp=ap==null?null:ap.mask,up=ap==null?null:ap.training,cp=ap==null?null:ap.initialState;rp=getExactlyOneTensor(rp),cp==null&&(cp=sp.stateful?sp.states_:sp.getInitialState(rp));var dp=Array.isArray(sp.cell.stateSize)?sp.cell.stateSize.length:1;if(cp.length!==dp)throw new ValueError("RNN Layer has "+dp+" state(s) but was passed "+cp.length+" initial state(s).");sp.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");var fp={training:up},pp=rnn(function(xp,Sp){var yp=sp.cell.call([xp].concat(Sp),fp);return[yp[0],yp.slice(1)]},rp,cp,sp.goBackwards,lp,null,sp.unroll,sp.returnSequences),hp=pp[0],mp=pp[1],gp=pp[2];sp.stateful&&sp.resetStates(gp,up);var vp=sp.returnSequences?mp:hp;return sp.returnState?[vp].concat(gp):vp})},np.prototype.getInitialState=function(rp){var ap=this;return je(function(){var sp=Pn(rp.shape);return sp=expandDims$1(sp=vl(sp,[1,2])),Array.isArray(ap.cell.stateSize)?ap.cell.stateSize.map(function(lp){return lp>1?tile$1(sp,[1,lp]):sp}):ap.cell.stateSize>1?[tile$1(sp,[1,ap.cell.stateSize])]:[sp]})},Object.defineProperty(np.prototype,"trainableWeights",{get:function(){return this.trainable?this.cell.trainableWeights:[]},enumerable:!0,configurable:!0}),Object.defineProperty(np.prototype,"nonTrainableWeights",{get:function(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights},enumerable:!0,configurable:!0}),np.prototype.setFastWeightInitDuringBuild=function(rp){_d.prototype.setFastWeightInitDuringBuild.call(this,rp),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(rp)},np.prototype.getConfig=function(){var rp={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(rp.numConstants=this.numConstants);var ap=this.cell.getConfig();rp.cell={className:this.cell.getClassName(),config:ap};var sp=_d.prototype.getConfig.call(this);return Object.assign(rp,sp),rp},np.fromConfig=function(rp,ap,sp){sp===void 0&&(sp={});var lp=deserialize(ap.cell,sp);return new rp(Object.assign(ap,{cell:lp}))},np.className="RNN",np}(Layer);Mf.registerClass(RNN);var RNNCell=function(_d){function np(){return _d!==null&&_d.apply(this,arguments)||this}return __extends$h(np,_d),np}(Layer),SimpleRNNCell=function(_d){function np(rp){var ap=_d.call(this,rp)||this;return ap.DEFAULT_ACTIVATION="tanh",ap.DEFAULT_KERNEL_INITIALIZER="glorotNormal",ap.DEFAULT_RECURRENT_INITIALIZER="orthogonal",ap.DEFAULT_BIAS_INITIALIZER="zeros",ap.units=rp.units,assertPositiveInteger(ap.units,"units"),ap.activation=getActivation(rp.activation==null?ap.DEFAULT_ACTIVATION:rp.activation),ap.useBias=rp.useBias==null||rp.useBias,ap.kernelInitializer=getInitializer(rp.kernelInitializer||ap.DEFAULT_KERNEL_INITIALIZER),ap.recurrentInitializer=getInitializer(rp.recurrentInitializer||ap.DEFAULT_RECURRENT_INITIALIZER),ap.biasInitializer=getInitializer(rp.biasInitializer||ap.DEFAULT_BIAS_INITIALIZER),ap.kernelRegularizer=getRegularizer(rp.kernelRegularizer),ap.recurrentRegularizer=getRegularizer(rp.recurrentRegularizer),ap.biasRegularizer=getRegularizer(rp.biasRegularizer),ap.kernelConstraint=getConstraint(rp.kernelConstraint),ap.recurrentConstraint=getConstraint(rp.recurrentConstraint),ap.biasConstraint=getConstraint(rp.biasConstraint),ap.dropout=min$1$1([1,max$1([0,rp.dropout==null?0:rp.dropout])]),ap.recurrentDropout=min$1$1([1,max$1([0,rp.recurrentDropout==null?0:rp.recurrentDropout])]),ap.stateSize=ap.units,ap.dropoutMask=null,ap.recurrentDropoutMask=null,ap}return __extends$h(np,_d),np.prototype.build=function(rp){rp=getExactlyOneShape(rp),this.kernel=this.addWeight("kernel",[rp[rp.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0},np.prototype.call=function(rp,ap){var sp=this;return je(function(){if((rp=rp).length!==2)throw new ValueError("SimpleRNNCell expects 2 input Tensors, got "+rp.length+".");var lp=rp[1];rp=rp[0];var up,cp=ap.training!=null&&ap.training;0<sp.dropout&&sp.dropout<1&&sp.dropoutMask==null&&(sp.dropoutMask=generateDropoutMask(function(){return Vn(rp)},sp.dropout,cp)),0<sp.recurrentDropout&&sp.recurrentDropout<1&&sp.recurrentDropoutMask==null&&(sp.recurrentDropoutMask=generateDropoutMask(function(){return Vn(lp)},sp.recurrentDropout,cp));var dp=sp.dropoutMask,fp=sp.recurrentDropoutMask;up=dot(dp!=null?tc(rp,dp):rp,sp.kernel.read()),sp.bias!=null&&(up=biasAdd(up,sp.bias.read())),fp!=null&&(lp=tc(lp,fp));var pp=Vs(up,dot(lp,sp.recurrentKernel.read()));return sp.activation!=null&&(pp=sp.activation.apply(pp)),[pp,pp]})},np.prototype.getConfig=function(){var rp={units:this.units,activation:serializeActivation(this.activation),useBias:this.useBias,kernelInitializer:serializeInitializer(this.kernelInitializer),recurrentInitializer:serializeInitializer(this.recurrentInitializer),biasInitializer:serializeInitializer(this.biasInitializer),kernelRegularizer:serializeRegularizer(this.kernelRegularizer),recurrentRegularizer:serializeRegularizer(this.recurrentRegularizer),biasRegularizer:serializeRegularizer(this.biasRegularizer),activityRegularizer:serializeRegularizer(this.activityRegularizer),kernelConstraint:serializeConstraint(this.kernelConstraint),recurrentConstraint:serializeConstraint(this.recurrentConstraint),biasConstraint:serializeConstraint(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout},ap=_d.prototype.getConfig.call(this);return Object.assign(rp,ap),rp},np.className="SimpleRNNCell",np}(RNNCell);Mf.registerClass(SimpleRNNCell);var SimpleRNN=function(_d){function np(rp){return rp.cell=new SimpleRNNCell(rp),_d.call(this,rp)||this}return __extends$h(np,_d),np.prototype.call=function(rp,ap){var sp=this;return je(function(){sp.cell.dropoutMask!=null&&(Xe(sp.cell.dropoutMask),sp.cell.dropoutMask=null),sp.cell.recurrentDropoutMask!=null&&(Xe(sp.cell.recurrentDropoutMask),sp.cell.recurrentDropoutMask=null);var lp=ap==null?null:ap.mask,up=ap==null?null:ap.training,cp=ap==null?null:ap.initialState;return _d.prototype.call.call(sp,rp,{mask:lp,training:up,initialState:cp})})},Object.defineProperty(np.prototype,"units",{get:function(){return this.cell.units},enumerable:!0,configurable:!0}),Object.defineProperty(np.prototype,"activation",{get:function(){return this.cell.activation},enumerable:!0,configurable:!0}),Object.defineProperty(np.prototype,"useBias",{get:function(){return this.cell.useBias},enumerable:!0,configurable:!0}),Object.defineProperty(np.prototype,"kernelInitializer",{get:function(){return this.cell.kernelInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(np.prototype,"recurrentInitializer",{get:function(){return this.cell.recurrentInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(np.prototype,"biasInitializer",{get:function(){return this.cell.biasInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(np.prototype,"kernelRegularizer",{get:function(){return this.cell.kernelRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(np.prototype,"recurrentRegularizer",{get:function(){return this.cell.recurrentRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(np.prototype,"biasRegularizer",{get:function(){return this.cell.biasRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(np.prototype,"kernelConstraint",{get:function(){return this.cell.kernelConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(np.prototype,"recurrentConstraint",{get:function(){return this.cell.recurrentConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(np.prototype,"biasConstraint",{get:function(){return this.cell.biasConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(np.prototype,"dropout",{get:function(){return this.cell.dropout},enumerable:!0,configurable:!0}),Object.defineProperty(np.prototype,"recurrentDropout",{get:function(){return this.cell.recurrentDropout},enumerable:!0,configurable:!0}),np.prototype.getConfig=function(){var rp={units:this.units,activation:serializeActivation(this.activation),useBias:this.useBias,kernelInitializer:serializeInitializer(this.kernelInitializer),recurrentInitializer:serializeInitializer(this.recurrentInitializer),biasInitializer:serializeInitializer(this.biasInitializer),kernelRegularizer:serializeRegularizer(this.kernelRegularizer),recurrentRegularizer:serializeRegularizer(this.recurrentRegularizer),biasRegularizer:serializeRegularizer(this.biasRegularizer),activityRegularizer:serializeRegularizer(this.activityRegularizer),kernelConstraint:serializeConstraint(this.kernelConstraint),recurrentConstraint:serializeConstraint(this.recurrentConstraint),biasConstraint:serializeConstraint(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout},ap=_d.prototype.getConfig.call(this);return delete ap.cell,Object.assign(rp,ap),rp},np.fromConfig=function(rp,ap){return new rp(ap)},np.className="SimpleRNN",np}(RNN);Mf.registerClass(SimpleRNN);var GRUCell=function(_d){function np(rp){var ap=_d.call(this,rp)||this;return ap.DEFAULT_ACTIVATION="tanh",ap.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",ap.DEFAULT_KERNEL_INITIALIZER="glorotNormal",ap.DEFAULT_RECURRENT_INITIALIZER="orthogonal",ap.DEFAULT_BIAS_INITIALIZER="zeros",ap.units=rp.units,assertPositiveInteger(ap.units,"units"),ap.activation=getActivation(rp.activation===void 0?ap.DEFAULT_ACTIVATION:rp.activation),ap.recurrentActivation=getActivation(rp.recurrentActivation===void 0?ap.DEFAULT_RECURRENT_ACTIVATION:rp.recurrentActivation),ap.useBias=rp.useBias==null||rp.useBias,ap.kernelInitializer=getInitializer(rp.kernelInitializer||ap.DEFAULT_KERNEL_INITIALIZER),ap.recurrentInitializer=getInitializer(rp.recurrentInitializer||ap.DEFAULT_RECURRENT_INITIALIZER),ap.biasInitializer=getInitializer(rp.biasInitializer||ap.DEFAULT_BIAS_INITIALIZER),ap.kernelRegularizer=getRegularizer(rp.kernelRegularizer),ap.recurrentRegularizer=getRegularizer(rp.recurrentRegularizer),ap.biasRegularizer=getRegularizer(rp.biasRegularizer),ap.kernelConstraint=getConstraint(rp.kernelConstraint),ap.recurrentConstraint=getConstraint(rp.recurrentConstraint),ap.biasConstraint=getConstraint(rp.biasConstraint),ap.dropout=min$1$1([1,max$1([0,rp.dropout==null?0:rp.dropout])]),ap.recurrentDropout=min$1$1([1,max$1([0,rp.recurrentDropout==null?0:rp.recurrentDropout])]),ap.implementation=rp.implementation,ap.stateSize=ap.units,ap.dropoutMask=null,ap.recurrentDropoutMask=null,ap}return __extends$h(np,_d),np.prototype.build=function(rp){var ap=(rp=getExactlyOneShape(rp))[rp.length-1];this.kernel=this.addWeight("kernel",[ap,3*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,3*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[3*this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0},np.prototype.call=function(rp,ap){var sp=this;return je(function(){if((rp=rp).length!==2)throw new ValueError("GRUCell expects 2 input Tensors (inputs, h, c), got "+rp.length+".");var lp=ap.training!=null&&ap.training,up=rp[1];rp=rp[0],0<sp.dropout&&sp.dropout<1&&sp.dropoutMask==null&&(sp.dropoutMask=generateDropoutMask(function(){return Vn(rp)},sp.dropout,lp,3)),0<sp.recurrentDropout&&sp.recurrentDropout<1&&sp.recurrentDropoutMask==null&&(sp.recurrentDropoutMask=generateDropoutMask(function(){return Vn(up)},sp.recurrentDropout,lp,3));var cp,dp,fp,pp=sp.dropoutMask,hp=sp.recurrentDropoutMask;0<sp.dropout&&sp.dropout<1&&(rp=tc(rp,pp[0]));var mp=dot(rp,sp.kernel.read());sp.useBias&&(mp=biasAdd(mp,sp.bias.read())),0<sp.recurrentDropout&&sp.recurrentDropout<1&&(up=tc(up,hp[0]));var gp=sp.recurrentKernel.read(),vp=Xn(gp,[2*sp.units,sp.units],gp.rank-1),xp=vp[0],Sp=vp[1],yp=dot(up,xp),bp=Xn(mp,3,mp.rank-1),Ep=bp[0],wp=bp[1],_p=bp[2],Cp=Xn(yp,2,yp.rank-1),$p=Cp[0],Rp=Cp[1];cp=sp.recurrentActivation.apply(Vs(Ep,$p)),dp=sp.recurrentActivation.apply(Vs(wp,Rp));var Pp=dot(tc(dp,up),Sp);fp=sp.activation.apply(Vs(_p,Pp));var Op=Vs(tc(cp,up),tc(Vs(1,as(cp)),fp));return[Op,Op]})},np.prototype.getConfig=function(){var rp={units:this.units,activation:serializeActivation(this.activation),recurrentActivation:serializeActivation(this.recurrentActivation),useBias:this.useBias,kernelInitializer:serializeInitializer(this.kernelInitializer),recurrentInitializer:serializeInitializer(this.recurrentInitializer),biasInitializer:serializeInitializer(this.biasInitializer),kernelRegularizer:serializeRegularizer(this.kernelRegularizer),recurrentRegularizer:serializeRegularizer(this.recurrentRegularizer),biasRegularizer:serializeRegularizer(this.biasRegularizer),activityRegularizer:serializeRegularizer(this.activityRegularizer),kernelConstraint:serializeConstraint(this.kernelConstraint),recurrentConstraint:serializeConstraint(this.recurrentConstraint),biasConstraint:serializeConstraint(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation},ap=_d.prototype.getConfig.call(this);return Object.assign(rp,ap),rp},np.className="GRUCell",np}(RNNCell);Mf.registerClass(GRUCell);var GRU=function(_d){function np(rp){return rp.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),rp.cell=new GRUCell(rp),_d.call(this,rp)||this}return __extends$h(np,_d),np.prototype.call=function(rp,ap){var sp=this;return je(function(){sp.cell.dropoutMask!=null&&(Xe(sp.cell.dropoutMask),sp.cell.dropoutMask=null),sp.cell.recurrentDropoutMask!=null&&(Xe(sp.cell.recurrentDropoutMask),sp.cell.recurrentDropoutMask=null);var lp=ap==null?null:ap.mask,up=ap==null?null:ap.training,cp=ap==null?null:ap.initialState;return _d.prototype.call.call(sp,rp,{mask:lp,training:up,initialState:cp})})},Object.defineProperty(np.prototype,"units",{get:function(){return this.cell.units},enumerable:!0,configurable:!0}),Object.defineProperty(np.prototype,"activation",{get:function(){return this.cell.activation},enumerable:!0,configurable:!0}),Object.defineProperty(np.prototype,"recurrentActivation",{get:function(){return this.cell.recurrentActivation},enumerable:!0,configurable:!0}),Object.defineProperty(np.prototype,"useBias",{get:function(){return this.cell.useBias},enumerable:!0,configurable:!0}),Object.defineProperty(np.prototype,"kernelInitializer",{get:function(){return this.cell.kernelInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(np.prototype,"recurrentInitializer",{get:function(){return this.cell.recurrentInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(np.prototype,"biasInitializer",{get:function(){return this.cell.biasInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(np.prototype,"kernelRegularizer",{get:function(){return this.cell.kernelRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(np.prototype,"recurrentRegularizer",{get:function(){return this.cell.recurrentRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(np.prototype,"biasRegularizer",{get:function(){return this.cell.biasRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(np.prototype,"kernelConstraint",{get:function(){return this.cell.kernelConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(np.prototype,"recurrentConstraint",{get:function(){return this.cell.recurrentConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(np.prototype,"biasConstraint",{get:function(){return this.cell.biasConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(np.prototype,"dropout",{get:function(){return this.cell.dropout},enumerable:!0,configurable:!0}),Object.defineProperty(np.prototype,"recurrentDropout",{get:function(){return this.cell.recurrentDropout},enumerable:!0,configurable:!0}),Object.defineProperty(np.prototype,"implementation",{get:function(){return this.cell.implementation},enumerable:!0,configurable:!0}),np.prototype.getConfig=function(){var rp={units:this.units,activation:serializeActivation(this.activation),recurrentActivation:serializeActivation(this.recurrentActivation),useBias:this.useBias,kernelInitializer:serializeInitializer(this.kernelInitializer),recurrentInitializer:serializeInitializer(this.recurrentInitializer),biasInitializer:serializeInitializer(this.biasInitializer),kernelRegularizer:serializeRegularizer(this.kernelRegularizer),recurrentRegularizer:serializeRegularizer(this.recurrentRegularizer),biasRegularizer:serializeRegularizer(this.biasRegularizer),activityRegularizer:serializeRegularizer(this.activityRegularizer),kernelConstraint:serializeConstraint(this.kernelConstraint),recurrentConstraint:serializeConstraint(this.recurrentConstraint),biasConstraint:serializeConstraint(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation},ap=_d.prototype.getConfig.call(this);return delete ap.cell,Object.assign(rp,ap),rp},np.fromConfig=function(rp,ap){return ap.implmentation===0&&(ap.implementation=1),new rp(ap)},np.className="GRU",np}(RNN);Mf.registerClass(GRU);var LSTMCell=function(_d){function np(rp){var ap=_d.call(this,rp)||this;return ap.DEFAULT_ACTIVATION="tanh",ap.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",ap.DEFAULT_KERNEL_INITIALIZER="glorotNormal",ap.DEFAULT_RECURRENT_INITIALIZER="orthogonal",ap.DEFAULT_BIAS_INITIALIZER="zeros",ap.units=rp.units,assertPositiveInteger(ap.units,"units"),ap.activation=getActivation(rp.activation===void 0?ap.DEFAULT_ACTIVATION:rp.activation),ap.recurrentActivation=getActivation(rp.recurrentActivation===void 0?ap.DEFAULT_RECURRENT_ACTIVATION:rp.recurrentActivation),ap.useBias=rp.useBias==null||rp.useBias,ap.kernelInitializer=getInitializer(rp.kernelInitializer||ap.DEFAULT_KERNEL_INITIALIZER),ap.recurrentInitializer=getInitializer(rp.recurrentInitializer||ap.DEFAULT_RECURRENT_INITIALIZER),ap.biasInitializer=getInitializer(rp.biasInitializer||ap.DEFAULT_BIAS_INITIALIZER),ap.unitForgetBias=rp.unitForgetBias,ap.kernelRegularizer=getRegularizer(rp.kernelRegularizer),ap.recurrentRegularizer=getRegularizer(rp.recurrentRegularizer),ap.biasRegularizer=getRegularizer(rp.biasRegularizer),ap.kernelConstraint=getConstraint(rp.kernelConstraint),ap.recurrentConstraint=getConstraint(rp.recurrentConstraint),ap.biasConstraint=getConstraint(rp.biasConstraint),ap.dropout=min$1$1([1,max$1([0,rp.dropout==null?0:rp.dropout])]),ap.recurrentDropout=min$1$1([1,max$1([0,rp.recurrentDropout==null?0:rp.recurrentDropout])]),ap.implementation=rp.implementation,ap.stateSize=[ap.units,ap.units],ap.dropoutMask=null,ap.recurrentDropoutMask=null,ap}return __extends$h(np,_d),np.prototype.build=function(rp){var ap,sp,lp=(rp=getExactlyOneShape(rp))[rp.length-1];if(this.kernel=this.addWeight("kernel",[lp,4*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,4*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){if(this.unitForgetBias){var up=this.biasInitializer,cp=this.units;sp=new((ap=function(dp){function fp(){return dp!==null&&dp.apply(this,arguments)||this}return __extends$h(fp,dp),fp.prototype.apply=function(pp,hp){var mp=up.apply([cp]),gp=new Ones().apply([cp]),vp=up.apply([2*cp]);return concatAlongFirstAxis(concatAlongFirstAxis(mp,gp),vp)},fp}(Initializer)).className="CustomInit",ap)}else sp=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.units],null,sp,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0},np.prototype.call=function(rp,ap){var sp=this;return je(function(){var lp=ap.training!=null&&ap.training;if((rp=rp).length!==3)throw new ValueError("LSTMCell expects 3 input Tensors (inputs, h, c), got "+rp.length+".");var up=rp[1],cp=rp[2];rp=rp[0],0<sp.dropout&&sp.dropout<1&&sp.dropoutMask==null&&(sp.dropoutMask=generateDropoutMask(function(){return Vn(rp)},sp.dropout,lp,4)),0<sp.recurrentDropout&&sp.recurrentDropout<1&&sp.recurrentDropoutMask==null&&(sp.recurrentDropoutMask=generateDropoutMask(function(){return Vn(up)},sp.recurrentDropout,lp,4));var dp,fp,pp,hp,mp=sp.dropoutMask,gp=sp.recurrentDropoutMask;0<sp.dropout&&sp.dropout<1&&(rp=tc(rp,mp[0]));var vp=dot(rp,sp.kernel.read());0<sp.recurrentDropout&&sp.recurrentDropout<1&&(up=tc(up,gp[0])),vp=Vs(vp,dot(up,sp.recurrentKernel.read())),sp.useBias&&(vp=biasAdd(vp,sp.bias.read()));var xp=Xn(vp,4,vp.rank-1),Sp=xp[0],yp=xp[1],bp=xp[2],Ep=xp[3];dp=sp.recurrentActivation.apply(Sp),fp=sp.recurrentActivation.apply(yp),pp=Vs(tc(fp,cp),tc(dp,sp.activation.apply(bp))),hp=sp.recurrentActivation.apply(Ep);var wp=tc(hp,sp.activation.apply(pp));return[wp,wp,pp]})},np.prototype.getConfig=function(){var rp={units:this.units,activation:serializeActivation(this.activation),recurrentActivation:serializeActivation(this.recurrentActivation),useBias:this.useBias,kernelInitializer:serializeInitializer(this.kernelInitializer),recurrentInitializer:serializeInitializer(this.recurrentInitializer),biasInitializer:serializeInitializer(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:serializeRegularizer(this.kernelRegularizer),recurrentRegularizer:serializeRegularizer(this.recurrentRegularizer),biasRegularizer:serializeRegularizer(this.biasRegularizer),activityRegularizer:serializeRegularizer(this.activityRegularizer),kernelConstraint:serializeConstraint(this.kernelConstraint),recurrentConstraint:serializeConstraint(this.recurrentConstraint),biasConstraint:serializeConstraint(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation},ap=_d.prototype.getConfig.call(this);return Object.assign(rp,ap),rp},np.className="LSTMCell",np}(RNNCell);Mf.registerClass(LSTMCell);var LSTM=function(_d){function np(rp){return rp.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),rp.cell=new LSTMCell(rp),_d.call(this,rp)||this}return __extends$h(np,_d),np.prototype.call=function(rp,ap){var sp=this;return je(function(){sp.cell.dropoutMask!=null&&(Xe(sp.cell.dropoutMask),sp.cell.dropoutMask=null),sp.cell.recurrentDropoutMask!=null&&(Xe(sp.cell.recurrentDropoutMask),sp.cell.recurrentDropoutMask=null);var lp=ap==null?null:ap.mask,up=ap==null?null:ap.training,cp=ap==null?null:ap.initialState;return _d.prototype.call.call(sp,rp,{mask:lp,training:up,initialState:cp})})},Object.defineProperty(np.prototype,"units",{get:function(){return this.cell.units},enumerable:!0,configurable:!0}),Object.defineProperty(np.prototype,"activation",{get:function(){return this.cell.activation},enumerable:!0,configurable:!0}),Object.defineProperty(np.prototype,"recurrentActivation",{get:function(){return this.cell.recurrentActivation},enumerable:!0,configurable:!0}),Object.defineProperty(np.prototype,"useBias",{get:function(){return this.cell.useBias},enumerable:!0,configurable:!0}),Object.defineProperty(np.prototype,"kernelInitializer",{get:function(){return this.cell.kernelInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(np.prototype,"recurrentInitializer",{get:function(){return this.cell.recurrentInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(np.prototype,"biasInitializer",{get:function(){return this.cell.biasInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(np.prototype,"unitForgetBias",{get:function(){return this.cell.unitForgetBias},enumerable:!0,configurable:!0}),Object.defineProperty(np.prototype,"kernelRegularizer",{get:function(){return this.cell.kernelRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(np.prototype,"recurrentRegularizer",{get:function(){return this.cell.recurrentRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(np.prototype,"biasRegularizer",{get:function(){return this.cell.biasRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(np.prototype,"kernelConstraint",{get:function(){return this.cell.kernelConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(np.prototype,"recurrentConstraint",{get:function(){return this.cell.recurrentConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(np.prototype,"biasConstraint",{get:function(){return this.cell.biasConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(np.prototype,"dropout",{get:function(){return this.cell.dropout},enumerable:!0,configurable:!0}),Object.defineProperty(np.prototype,"recurrentDropout",{get:function(){return this.cell.recurrentDropout},enumerable:!0,configurable:!0}),Object.defineProperty(np.prototype,"implementation",{get:function(){return this.cell.implementation},enumerable:!0,configurable:!0}),np.prototype.getConfig=function(){var rp={units:this.units,activation:serializeActivation(this.activation),recurrentActivation:serializeActivation(this.recurrentActivation),useBias:this.useBias,kernelInitializer:serializeInitializer(this.kernelInitializer),recurrentInitializer:serializeInitializer(this.recurrentInitializer),biasInitializer:serializeInitializer(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:serializeRegularizer(this.kernelRegularizer),recurrentRegularizer:serializeRegularizer(this.recurrentRegularizer),biasRegularizer:serializeRegularizer(this.biasRegularizer),activityRegularizer:serializeRegularizer(this.activityRegularizer),kernelConstraint:serializeConstraint(this.kernelConstraint),recurrentConstraint:serializeConstraint(this.recurrentConstraint),biasConstraint:serializeConstraint(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation},ap=_d.prototype.getConfig.call(this);return delete ap.cell,Object.assign(rp,ap),rp},np.fromConfig=function(rp,ap){return ap.implmentation===0&&(ap.implementation=1),new rp(ap)},np.className="LSTM",np}(RNN);Mf.registerClass(LSTM);var StackedRNNCells=function(_d){function np(rp){var ap=_d.call(this,rp)||this;return ap.cells=rp.cells,ap}return __extends$h(np,_d),Object.defineProperty(np.prototype,"stateSize",{get:function(){for(var rp=[],ap=0,sp=this.cells.slice().reverse();ap<sp.length;ap++){var lp=sp[ap];Array.isArray(lp.stateSize)?rp.push.apply(rp,lp.stateSize):rp.push(lp.stateSize)}return rp},enumerable:!0,configurable:!0}),np.prototype.call=function(rp,ap){var sp=this;return je(function(){for(var lp=(rp=rp).slice(1),up=[],cp=0,dp=sp.cells.slice().reverse();cp<dp.length;cp++){var fp=dp[cp];Array.isArray(fp.stateSize)?up.push(lp.splice(0,fp.stateSize.length)):up.push(lp.splice(0,1))}up.reverse();for(var pp,hp=[],mp=0;mp<sp.cells.length;++mp)fp=sp.cells[mp],lp=up[mp],pp=mp===0?[rp[0]].concat(lp):[pp[0]].concat(lp),pp=fp.call(pp,ap),hp.push(pp.slice(1));lp=[];for(var gp=0,vp=hp.slice().reverse();gp<vp.length;gp++){var xp=vp[gp];lp.push.apply(lp,xp)}return[pp[0]].concat(lp)})},np.prototype.build=function(rp){var ap;isArrayOfShapes(rp)&&(rp=rp[0]),rp=rp,this.cells.forEach(function(sp,lp){nameScope("RNNCell_"+lp,function(){sp.build(rp),ap=Array.isArray(sp.stateSize)?sp.stateSize[0]:sp.stateSize,rp=[rp[0],ap]})}),this.built=!0},np.prototype.getConfig=function(){for(var rp=[],ap=0,sp=this.cells;ap<sp.length;ap++){var lp=sp[ap];rp.push({className:lp.getClassName(),config:lp.getConfig()})}var up={cells:rp},cp=_d.prototype.getConfig.call(this);return Object.assign(up,cp),up},np.fromConfig=function(rp,ap,sp){sp===void 0&&(sp={});for(var lp=[],up=0,cp=ap.cells;up<cp.length;up++){var dp=cp[up];lp.push(deserialize(dp,sp))}return new rp({cells:lp})},Object.defineProperty(np.prototype,"trainableWeights",{get:function(){if(!this.trainable)return[];for(var rp=[],ap=0,sp=this.cells;ap<sp.length;ap++){var lp=sp[ap];rp.push.apply(rp,lp.trainableWeights)}return rp},enumerable:!0,configurable:!0}),Object.defineProperty(np.prototype,"nonTrainableWeights",{get:function(){for(var rp=[],ap=0,sp=this.cells;ap<sp.length;ap++){var lp=sp[ap];rp.push.apply(rp,lp.nonTrainableWeights)}if(!this.trainable){for(var up=[],cp=0,dp=this.cells;cp<dp.length;cp++)lp=dp[cp],up.push.apply(up,lp.trainableWeights);return up.concat(rp)}return rp},enumerable:!0,configurable:!0}),np.prototype.getWeights=function(){for(var rp=[],ap=0,sp=this.cells;ap<sp.length;ap++){var lp=sp[ap];rp.push.apply(rp,lp.weights)}return batchGetValue(rp)},np.prototype.setWeights=function(rp){for(var ap=[],sp=0,lp=this.cells;sp<lp.length;sp++)for(var up=lp[sp],cp=up.weights.length,dp=rp.splice(cp),fp=0;fp<up.weights.length;++fp)ap.push([up.weights[fp],dp[fp]]);batchSetValue(ap)},np.className="StackedRNNCells",np}(RNNCell);function generateDropoutMask(_d,np,rp,ap){function sp(){return dropout$1(_d(),np)}if(rp===void 0&&(rp=null),ap===void 0&&(ap=1),ap>1){for(var lp=[],up=0;up<ap;up++)lp.push(inTrainPhase(sp,_d,rp));return lp.map(function(cp){return $e(cp.clone())})}return $e(inTrainPhase(sp,_d,rp).clone())}Mf.registerClass(StackedRNNCells);var Wrapper=function(_d){function np(rp){var ap=_d.call(this,rp)||this;return ap.layer=rp.layer,ap}return __extends$h(np,_d),np.prototype.build=function(rp){this.built=!0},Object.defineProperty(np.prototype,"trainable",{get:function(){return this.layer!=null&&this.layer.trainable},set:function(rp){this.layer!=null&&(this.layer.trainable=rp)},enumerable:!0,configurable:!0}),Object.defineProperty(np.prototype,"trainableWeights",{get:function(){return this.layer.trainableWeights},enumerable:!0,configurable:!0}),Object.defineProperty(np.prototype,"nonTrainableWeights",{get:function(){return this.layer.nonTrainableWeights},enumerable:!0,configurable:!0}),Object.defineProperty(np.prototype,"updates",{get:function(){return this.layer._updates},enumerable:!0,configurable:!0}),Object.defineProperty(np.prototype,"losses",{get:function(){return this.layer.losses},enumerable:!0,configurable:!0}),np.prototype.getWeights=function(){return this.layer.getWeights()},np.prototype.setWeights=function(rp){this.layer.setWeights(rp)},np.prototype.getConfig=function(){var rp={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},ap=_d.prototype.getConfig.call(this);return Object.assign(rp,ap),rp},np.prototype.setFastWeightInitDuringBuild=function(rp){_d.prototype.setFastWeightInitDuringBuild.call(this,rp),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(rp)},np.fromConfig=function(rp,ap,sp){sp===void 0&&(sp={});var lp=deserialize(ap.layer,sp);delete ap.layer;var up={layer:lp};return Object.assign(up,ap),new rp(up)},np}(Layer),TimeDistributed=function(_d){function np(rp){var ap=_d.call(this,rp)||this;return ap.supportsMasking=!0,ap}return __extends$h(np,_d),np.prototype.build=function(rp){if((rp=getExactlyOneShape(rp)).length<3)throw new ValueError("TimeDistributed layer expects an input shape >= 3D, but received input shape "+JSON.stringify(rp));this.inputSpec=[{shape:rp}];var ap=[rp[0]].concat(rp.slice(2));this.layer.built||(this.layer.build(ap),this.layer.built=!0),_d.prototype.build.call(this,rp)},np.prototype.computeOutputShape=function(rp){var ap=[(rp=getExactlyOneShape(rp))[0]].concat(rp.slice(2)),sp=this.layer.computeOutputShape(ap),lp=rp[1];return[sp[0],lp].concat(sp.slice(1))},np.prototype.call=function(rp,ap){var sp=this;return je(function(){return rnn(function(lp,up){return[getExactlyOneTensor(sp.layer.call(lp,ap)),[]]},rp=getExactlyOneTensor(rp),[],!1,null,null,!1,!0)[1]})},np.className="TimeDistributed",np}(Wrapper);function checkBidirectionalMergeMode(_d){checkStringTypeUnionValue(VALID_BIDIRECTIONAL_MERGE_MODES,"BidirectionalMergeMode",_d)}Mf.registerClass(TimeDistributed);var DEFAULT_BIDIRECTIONAL_MERGE_MODE="concat",Bidirectional=function(_d){function np(rp){var ap=_d.call(this,rp)||this,sp=rp.layer.getConfig(),lp={};lp.className=rp.layer.getClassName(),lp.config=sp,ap.forwardLayer=deserialize(lp),sp.goBackwards=sp.goBackwards!==!0;var up={};if(up.className=rp.layer.getClassName(),up.config=sp,ap.backwardLayer=deserialize(up),ap.forwardLayer.name="forward_"+ap.forwardLayer.name,ap.backwardLayer.name="backward_"+ap.backwardLayer.name,ap.mergeMode=rp.mergeMode===void 0?DEFAULT_BIDIRECTIONAL_MERGE_MODE:rp.mergeMode,checkBidirectionalMergeMode(ap.mergeMode),rp.weights)throw new NotImplementedError("weights support is not implemented for Bidirectional layer yet.");return ap._stateful=rp.layer.stateful,ap.returnSequences=rp.layer.returnSequences,ap.returnState=rp.layer.returnState,ap.supportsMasking=!0,ap._trainable=!0,ap.inputSpec=rp.layer.inputSpec,ap.numConstants=null,ap}return __extends$h(np,_d),Object.defineProperty(np.prototype,"trainable",{get:function(){return this._trainable},set:function(rp){this._trainable=rp,this.forwardLayer!=null&&(this.forwardLayer.trainable=rp),this.backwardLayer!=null&&(this.backwardLayer.trainable=rp)},enumerable:!0,configurable:!0}),np.prototype.getWeights=function(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())},np.prototype.setWeights=function(rp){var ap=rp.length,sp=Math.floor(ap/2);this.forwardLayer.setWeights(rp.slice(0,sp)),this.backwardLayer.setWeights(rp.slice(sp))},np.prototype.computeOutputShape=function(rp){var ap,sp,lp,up=this.forwardLayer.computeOutputShape(rp);return Array.isArray(up)&&Array.isArray(up[0])||(up=[up]),up=up,this.returnState&&(lp=up.slice(1)),ap=up[0],ap=ap,this.mergeMode==="concat"?(ap[ap.length-1]*=2,sp=[ap]):sp=this.mergeMode==null?[ap,ap.slice()]:[ap],this.returnState?this.mergeMode==null?sp.concat(lp).concat(lp.slice()):[ap].concat(lp).concat(lp.slice()):singletonOrArray(sp)},np.prototype.apply=function(rp,ap){var sp=ap==null?null:ap.initialState,lp=ap==null?null:ap.constants;ap==null&&(ap={});var up=standardizeArgs(rp,sp,lp,this.numConstants);if(rp=up.inputs,sp=up.initialState,lp=up.constants,Array.isArray(rp)&&(sp=rp.slice(1),rp=rp[0]),(sp==null||sp.length===0)&&lp==null)return _d.prototype.apply.call(this,rp,ap);var cp=[],dp=[];if(sp!=null){var fp=sp.length;if(fp%2>0)throw new ValueError("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");ap.initialState=sp,cp.push.apply(cp,sp);var pp=sp.map(function(bp){return new InputSpec({shape:bp.shape})});this.forwardLayer.stateSpec=pp.slice(0,fp/2),this.backwardLayer.stateSpec=pp.slice(fp/2),dp.push.apply(dp,pp)}if(lp!=null)throw new NotImplementedError("Support for constants in Bidirectional layers is not implemented yet.");for(var hp=cp[0]instanceof SymbolicTensor,mp=0,gp=cp;mp<gp.length;mp++)if(gp[mp]instanceof SymbolicTensor!==hp)throw new ValueError("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(hp){var vp=[rp].concat(cp),xp=this.inputSpec.concat(dp),Sp=this.inputSpec;this.inputSpec=xp;var yp=_d.prototype.apply.call(this,vp,ap);return this.inputSpec=Sp,yp}return _d.prototype.apply.call(this,rp,ap)},np.prototype.call=function(rp,ap){var sp=this;return je(function(){if(ap.mask!=null)throw new NotImplementedError("The support for masking is not implemented for Bidirectional layers yet.");var lp,up,cp,dp,fp=ap.initialState;if(fp==null)lp=sp.forwardLayer.call(rp,ap),up=sp.backwardLayer.call(rp,ap);else{var pp=fp.slice(0,fp.length/2),hp=fp.slice(fp.length/2);lp=sp.forwardLayer.call(rp,Object.assign(ap,{initialState:pp})),up=sp.backwardLayer.call(rp,Object.assign(ap,{initialState:hp}))}return sp.returnState&&(Array.isArray(lp)&&(cp=lp.slice(1).concat(up.slice(1))),lp=lp[0],up=up[0]),sp.returnSequences&&(up=zc(up,1)),sp.mergeMode==="concat"?dp=concatenate([lp,up]):sp.mergeMode==="sum"?dp=Vs(lp,up):sp.mergeMode==="ave"?dp=tc(.5,Vs(lp,up)):sp.mergeMode==="mul"?dp=tc(lp,up):sp.mergeMode==null&&(dp=[lp,up]),sp.returnState?sp.mergeMode==null?dp.concat(cp):[dp].concat(cp):dp})},np.prototype.resetStates=function(rp){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()},np.prototype.build=function(rp){var ap=this;nameScope(this.forwardLayer.name,function(){ap.forwardLayer.build(rp)}),nameScope(this.backwardLayer.name,function(){ap.backwardLayer.build(rp)}),this.built=!0},Object.defineProperty(np.prototype,"trainableWeights",{get:function(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)},enumerable:!0,configurable:!0}),Object.defineProperty(np.prototype,"nonTrainableWeights",{get:function(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)},enumerable:!0,configurable:!0}),np.prototype.setFastWeightInitDuringBuild=function(rp){_d.prototype.setFastWeightInitDuringBuild.call(this,rp),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(rp),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(rp)},np.prototype.getConfig=function(){var rp={mergeMode:this.mergeMode},ap=_d.prototype.getConfig.call(this);return Object.assign(rp,ap),rp},np.fromConfig=function(rp,ap){var sp=deserialize(ap.layer);if(delete ap.layer,ap.numConstants!=null)throw new NotImplementedError("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");var lp=ap;return lp.layer=sp,new rp(lp)},np.className="Bidirectional",np}(Wrapper);function inputLayer(_d){return new InputLayer(_d)}function elu$2(_d){return new ELU(_d)}function reLU(_d){return new ReLU(_d)}function leakyReLU(_d){return new LeakyReLU(_d)}function prelu$1(_d){return new PReLU(_d)}function softmax$1(_d){return new Softmax$1(_d)}function thresholdedReLU(_d){return new ThresholdedReLU(_d)}function conv1d$2(_d){return new Conv1D(_d)}function conv2d$1(_d){return new Conv2D(_d)}function conv2dTranspose$1(_d){return new Conv2DTranspose(_d)}function conv3d$2(_d){return new Conv3D(_d)}function separableConv2d$1(_d){return new SeparableConv2D(_d)}function cropping2D(_d){return new Cropping2D(_d)}function upSampling2d(_d){return new UpSampling2D(_d)}function depthwiseConv2d$2(_d){return new DepthwiseConv2D(_d)}function activation(_d){return new Activation$1(_d)}function dense(_d){return new Dense(_d)}function dropout$2(_d){return new Dropout(_d)}function flatten$1(_d){return new Flatten(_d)}function repeatVector(_d){return new RepeatVector(_d)}function reshape(_d){return new Reshape(_d)}function permute(_d){return new Permute(_d)}function embedding(_d){return new Embedding(_d)}function add$2(_d){return new Add(_d)}function average$1(_d){return new Average(_d)}function concatenate$2(_d){return new Concatenate(_d)}function maximum$2(_d){return new Maximum(_d)}function minimum$2(_d){return new Minimum(_d)}function multiply$1(_d){return new Multiply(_d)}function dot$1(_d){return new Dot(_d)}function batchNormalization$1(_d){return new BatchNormalization(_d)}function layerNormalization(_d){return new LayerNormalization(_d)}function zeroPadding2d(_d){return new ZeroPadding2D(_d)}function averagePooling1d(_d){return new AveragePooling1D(_d)}function avgPool1d(_d){return averagePooling1d(_d)}function avgPooling1d(_d){return averagePooling1d(_d)}function averagePooling2d(_d){return new AveragePooling2D(_d)}function avgPool2d(_d){return averagePooling2d(_d)}function avgPooling2d(_d){return averagePooling2d(_d)}function averagePooling3d(_d){return new AveragePooling3D(_d)}function avgPool3d$1(_d){return averagePooling3d(_d)}function avgPooling3d(_d){return averagePooling3d(_d)}function globalAveragePooling1d(_d){return new GlobalAveragePooling1D(_d)}function globalAveragePooling2d(_d){return new GlobalAveragePooling2D(_d)}function globalMaxPooling1d(_d){return new GlobalMaxPooling1D(_d)}function globalMaxPooling2d(_d){return new GlobalMaxPooling2D(_d)}function maxPooling1d(_d){return new MaxPooling1D(_d)}function maxPooling2d(_d){return new MaxPooling2D(_d)}function maxPooling3d(_d){return new MaxPooling3D(_d)}function gru(_d){return new GRU(_d)}function gruCell(_d){return new GRUCell(_d)}function lstm(_d){return new LSTM(_d)}function lstmCell(_d){return new LSTMCell(_d)}function simpleRNN(_d){return new SimpleRNN(_d)}function simpleRNNCell(_d){return new SimpleRNNCell(_d)}function rnn$1(_d){return new RNN(_d)}function stackedRNNCells(_d){return new StackedRNNCells(_d)}function bidirectional(_d){return new Bidirectional(_d)}function timeDistributed(_d){return new TimeDistributed(_d)}Mf.registerClass(Bidirectional);var globalMaxPool1d=globalMaxPooling1d,globalMaxPool2d=globalMaxPooling2d,maxPool1d=maxPooling1d,maxPool2d=maxPooling2d;function gaussianNoise(_d){return new GaussianNoise(_d)}function gaussianDropout(_d){return new GaussianDropout(_d)}function alphaDropout(_d){return new AlphaDropout(_d)}function masking(_d){return new Masking(_d)}var exports_layers=Object.freeze({inputLayer,elu:elu$2,reLU,leakyReLU,prelu:prelu$1,softmax:softmax$1,thresholdedReLU,conv1d:conv1d$2,conv2d:conv2d$1,conv2dTranspose:conv2dTranspose$1,conv3d:conv3d$2,separableConv2d:separableConv2d$1,cropping2D,upSampling2d,depthwiseConv2d:depthwiseConv2d$2,activation,dense,dropout:dropout$2,flatten:flatten$1,repeatVector,reshape,permute,embedding,add:add$2,average:average$1,concatenate:concatenate$2,maximum:maximum$2,minimum:minimum$2,multiply:multiply$1,dot:dot$1,batchNormalization:batchNormalization$1,layerNormalization,zeroPadding2d,averagePooling1d,avgPool1d,avgPooling1d,averagePooling2d,avgPool2d,avgPooling2d,averagePooling3d,avgPool3d:avgPool3d$1,avgPooling3d,globalAveragePooling1d,globalAveragePooling2d,globalMaxPooling1d,globalMaxPooling2d,maxPooling1d,maxPooling2d,maxPooling3d,gru,gruCell,lstm,lstmCell,simpleRNN,simpleRNNCell,rnn:rnn$1,stackedRNNCells,bidirectional,timeDistributed,globalMaxPool1d,globalMaxPool2d,maxPool1d,maxPool2d,Layer,RNN,RNNCell,input,gaussianNoise,gaussianDropout,alphaDropout,masking});function binaryAccuracy$1(_d,np){return binaryAccuracy(_d,np)}function binaryCrossentropy$2(_d,np){return binaryCrossentropy$1(_d,np)}function sparseCategoricalAccuracy$1(_d,np){return sparseCategoricalAccuracy(_d,np)}function categoricalAccuracy$1(_d,np){return categoricalAccuracy(_d,np)}function categoricalCrossentropy$2(_d,np){return categoricalCrossentropy$1(_d,np)}function precision$1(_d,np){return precision(_d,np)}function recall$1(_d,np){return recall(_d,np)}function cosineProximity$1(_d,np){return cosineProximity(_d,np)}function meanAbsoluteError$1(_d,np){return meanAbsoluteError(_d,np)}function meanAbsolutePercentageError$1(_d,np){return meanAbsolutePercentageError(_d,np)}function MAPE$2(_d,np){return meanAbsolutePercentageError(_d,np)}function mape$2(_d,np){return meanAbsolutePercentageError(_d,np)}function meanSquaredError$1(_d,np){return meanSquaredError(_d,np)}function MSE$2(_d,np){return meanSquaredError(_d,np)}function mse$2(_d,np){return meanSquaredError(_d,np)}var exports_metrics=Object.freeze({binaryAccuracy:binaryAccuracy$1,binaryCrossentropy:binaryCrossentropy$2,sparseCategoricalAccuracy:sparseCategoricalAccuracy$1,categoricalAccuracy:categoricalAccuracy$1,categoricalCrossentropy:categoricalCrossentropy$2,precision:precision$1,recall:recall$1,cosineProximity:cosineProximity$1,meanAbsoluteError:meanAbsoluteError$1,meanAbsolutePercentageError:meanAbsolutePercentageError$1,MAPE:MAPE$2,mape:mape$2,meanSquaredError:meanSquaredError$1,MSE:MSE$2,mse:mse$2}),exports_models=Object.freeze({modelFromJSON});function l1l2(_d){return new L1L2(_d)}function l1$1(_d){return l1(_d)}function l2$1(_d){return l2(_d)}var exports_regularizers=Object.freeze({l1l2,l1:l1$1,l2:l2$1}),Callback=function(_d){function np(){var rp=_d!==null&&_d.apply(this,arguments)||this;return rp.model=null,rp}return __extends$h(np,_d),np.prototype.setModel=function(rp){if(!(rp instanceof LayersModel))throw new Error("model must be a LayersModel, not some other Container");this.model=rp},np}(BaseCallback);function less(_d,np){return _d<np}function greater$1(_d,np){return _d>np}var EarlyStopping=function(_d){function np(rp){var ap=_d.call(this)||this;if(rp==null&&(rp={}),rp.restoreBestWeights)throw new NotImplementedError("restoreBestWeights = True is not implemented in EarlyStopping yet.");return ap.monitor=rp.monitor||"val_loss",ap.minDelta=Math.abs(rp.minDelta||0),ap.patience=rp.patience||0,ap.verbose=rp.verbose||0,ap.mode=rp.mode||"auto",ap.baseline=rp.baseline,["auto","min","max"].indexOf(ap.mode)===-1&&(console.warn("EarlyStopping mode '"+ap.mode+"' is invalid. Falling back to mode 'auto'."),ap.mode="auto"),ap.mode==="min"?ap.monitorFunc=less:ap.mode==="max"||ap.monitor.indexOf("acc")!==-1?ap.monitorFunc=greater$1:ap.monitorFunc=less,ap.monitorFunc===less&&(ap.minDelta*=-1),ap}return __extends$h(np,_d),np.prototype.onTrainBegin=function(rp){return __awaiter$8(this,void 0,void 0,function(){return __generator$8(this,function(ap){return this.wait=0,this.stoppedEpoch=0,this.baseline!=null?this.best=this.baseline:this.best=this.monitorFunc===less?1/0:-1/0,[2]})})},np.prototype.onEpochEnd=function(rp,ap){return __awaiter$8(this,void 0,void 0,function(){var sp;return __generator$8(this,function(lp){switch(lp.label){case 0:return[4,resolveScalarsInLogs(ap)];case 1:return lp.sent(),(sp=this.getMonitorValue(ap))==null?[2]:(this.monitorFunc(sp-this.minDelta,this.best)?(this.best=sp,this.wait=0):(this.wait++,this.wait>=this.patience&&(this.stoppedEpoch=rp,this.model.stopTraining=!0)),[2])}})})},np.prototype.onTrainEnd=function(rp){return __awaiter$8(this,void 0,void 0,function(){return __generator$8(this,function(ap){return this.stoppedEpoch>0&&this.verbose&&console.log("Epoch "+this.stoppedEpoch+": early stopping."),[2]})})},np.prototype.getMonitorValue=function(rp){rp==null&&(rp={});var ap=rp[this.monitor];return ap==null&&console.warn("Metric for EarlyStopping "+this.monitor+" is not available. Available metrics are: "+Object.keys(rp)),ap},np}(Callback);function earlyStopping(_d){return new EarlyStopping(_d)}var callbacks={earlyStopping};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var DataType,SaverDef,__assign$1=function(){return(__assign$1=Object.assign||function(_d){for(var np,rp=1,ap=arguments.length;rp<ap;rp++)for(var sp in np=arguments[rp])Object.prototype.hasOwnProperty.call(np,sp)&&(_d[sp]=np[sp]);return _d}).apply(this,arguments)};function __awaiter$7(_d,np,rp,ap){return new(rp||(rp=Promise))(function(sp,lp){function up(fp){try{dp(ap.next(fp))}catch(pp){lp(pp)}}function cp(fp){try{dp(ap.throw(fp))}catch(pp){lp(pp)}}function dp(fp){fp.done?sp(fp.value):new rp(function(pp){pp(fp.value)}).then(up,cp)}dp((ap=ap.apply(_d,np||[])).next())})}function __generator$7(_d,np){var rp,ap,sp,lp,up={label:0,sent:function(){if(1&sp[0])throw sp[1];return sp[1]},trys:[],ops:[]};return lp={next:cp(0),throw:cp(1),return:cp(2)},typeof Symbol=="function"&&(lp[Symbol.iterator]=function(){return this}),lp;function cp(dp){return function(fp){return function(pp){if(rp)throw new TypeError("Generator is already executing.");for(;up;)try{if(rp=1,ap&&(sp=2&pp[0]?ap.return:pp[0]?ap.throw||((sp=ap.return)&&sp.call(ap),0):ap.next)&&!(sp=sp.call(ap,pp[1])).done)return sp;switch(ap=0,sp&&(pp=[2&pp[0],sp.value]),pp[0]){case 0:case 1:sp=pp;break;case 4:return up.label++,{value:pp[1],done:!1};case 5:up.label++,ap=pp[1],pp=[0];continue;case 7:pp=up.ops.pop(),up.trys.pop();continue;default:if(!(sp=(sp=up.trys).length>0&&sp[sp.length-1])&&(pp[0]===6||pp[0]===2)){up=0;continue}if(pp[0]===3&&(!sp||pp[1]>sp[0]&&pp[1]<sp[3])){up.label=pp[1];break}if(pp[0]===6&&up.label<sp[1]){up.label=sp[1],sp=pp;break}if(sp&&up.label<sp[2]){up.label=sp[2],up.ops.push(pp);break}sp[2]&&up.ops.pop(),up.trys.pop();continue}pp=np.call(_d,up)}catch(hp){pp=[6,hp],ap=0}finally{rp=sp=0}if(5&pp[0])throw pp[1];return{value:pp[0]?pp[1]:void 0,done:!0}}([dp,fp])}}}(function(_d){_d[_d.DT_INVALID=0]="DT_INVALID",_d[_d.DT_FLOAT=1]="DT_FLOAT",_d[_d.DT_DOUBLE=2]="DT_DOUBLE",_d[_d.DT_INT32=3]="DT_INT32",_d[_d.DT_UINT8=4]="DT_UINT8",_d[_d.DT_INT16=5]="DT_INT16",_d[_d.DT_INT8=6]="DT_INT8",_d[_d.DT_STRING=7]="DT_STRING",_d[_d.DT_COMPLEX64=8]="DT_COMPLEX64",_d[_d.DT_INT64=9]="DT_INT64",_d[_d.DT_BOOL=10]="DT_BOOL",_d[_d.DT_QINT8=11]="DT_QINT8",_d[_d.DT_QUINT8=12]="DT_QUINT8",_d[_d.DT_QINT32=13]="DT_QINT32",_d[_d.DT_BFLOAT16=14]="DT_BFLOAT16",_d[_d.DT_FLOAT_REF=101]="DT_FLOAT_REF",_d[_d.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",_d[_d.DT_INT32_REF=103]="DT_INT32_REF",_d[_d.DT_UINT8_REF=104]="DT_UINT8_REF",_d[_d.DT_INT16_REF=105]="DT_INT16_REF",_d[_d.DT_INT8_REF=106]="DT_INT8_REF",_d[_d.DT_STRING_REF=107]="DT_STRING_REF",_d[_d.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",_d[_d.DT_INT64_REF=109]="DT_INT64_REF",_d[_d.DT_BOOL_REF=110]="DT_BOOL_REF",_d[_d.DT_QINT8_REF=111]="DT_QINT8_REF",_d[_d.DT_QUINT8_REF=112]="DT_QUINT8_REF",_d[_d.DT_QINT32_REF=113]="DT_QINT32_REF",_d[_d.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF"})(DataType||(DataType={})),function(_d){(function(np){np[np.LEGACY=0]="LEGACY",np[np.V1=1]="V1",np[np.V2=2]="V2"})(_d.CheckpointFormatVersion||(_d.CheckpointFormatVersion={}))}(SaverDef||(SaverDef={}));var CUSTOM_OPS={};function registerOp(_d,np){var rp={tfOpName:_d,category:"custom",inputs:[],attrs:[],customExecutor:np};CUSTOM_OPS[_d]=rp}function getRegisteredOp(_d){return CUSTOM_OPS[_d]}function deregisterOp(_d){delete CUSTOM_OPS[_d]}function getParamValue(_d,np,rp,ap){var sp=np.inputParams[_d];if(sp&&sp.inputIndexStart!==void 0){var lp=sp.inputIndexStart,up=sp.inputIndexEnd===0?void 0:sp.inputIndexEnd===void 0?lp+1:sp.inputIndexEnd;if(sp.type==="tensor")return getTensor(np.inputNames[sp.inputIndexStart],rp,ap);if(sp.type==="tensors")return np.inputNames.slice(lp,up).map(function(fp){return getTensor(fp,rp,ap)});var cp=Array.prototype.slice.call(getTensor(np.inputNames.slice(lp)[0],rp,ap).dataSync());return sp.type==="number"?cp[0]:cp}var dp=np.attrParams[_d];return dp&&dp.value}function getTensor(_d,np,rp){var ap=parseNodeName(_d),sp=ap[0],lp=ap[1],up=rp.currentContextIds.find(function(cp){return!!np[getNodeNameWithContextId(sp,cp)]});return up!==void 0?np[getNodeNameWithContextId(sp,up)][lp]:void 0}function getTensorsForCurrentContenxt(_d,np,rp){return np[getNodeNameWithContextId(_d,rp.currentContextId)]}function getNodeNameAndIndex(_d,np){var rp=parseNodeName(_d),ap=rp[0],sp=rp[1];return[getNodeNameWithContextId(ap,np&&np.currentContextId),sp]}function getNodeNameWithContextId(_d,np){return np?_d+"-"+np:_d}function parseNodeName(_d){var np=_d.lastIndexOf(":");return np===-1?[_d,0]:[_d.substring(0,np),Number(_d.substring(np+1))]}function split$1(_d,np){for(var rp=[],ap=0;ap<_d.length;ap+=np)rp.push(_d.slice(ap,ap+np));return rp}var json=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],arithmetic=Object.freeze({json}),json$1=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"clip_value_min",name:"clipValueMin",type:"number"},{tfName:"clip_value_max",name:"clipValueMax",type:"number"}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"clipValueMin",name:"clipValueMin",type:"number",defaultValue:0},{tfName:"clipValueMax",name:"clipValueMax",type:"number",defaultValue:6}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Prod",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axes",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],basicMath=Object.freeze({json:json$1}),json$2=[{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"}]}],control=Object.freeze({json:json$2}),json$3=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]}],convolution=Object.freeze({json:json$3}),json$4=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],creation=Object.freeze({json:json$4}),json$5=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],dynamic=Object.freeze({json:json$5}),json$6=[{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]}],evaluation=Object.freeze({json:json$6}),json$7=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],graph$3=Object.freeze({json:json$7}),json$8=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]}],image$1=Object.freeze({json:json$8}),json$9=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],logical=Object.freeze({json:json$9}),json$10=[{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],matrices=Object.freeze({json:json$10}),json$11=[{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"SparseToDense",category:"normalization",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!0,notSupported:!0}]}],normalization=Object.freeze({json:json$11}),json$12=[{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]}],reduction=Object.freeze({json:json$12}),json$13=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool",notSupported:!0}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]}],sliceJoin=Object.freeze({json:json$13}),json$14=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],spectral=Object.freeze({json:json$14}),json$15=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]}],transformation=Object.freeze({json:json$15}),OperationMapper=function(){function _d(){var np=[arithmetic,basicMath,control,convolution,creation,dynamic,evaluation,logical,image$1,graph$3,matrices,normalization,reduction,sliceJoin,spectral,transformation],rp=[].concat.apply([],np.map(function(ap){return ap.json}));this.opMappers=rp.reduce(function(ap,sp){return ap[sp.tfOpName]=sp,ap},{})}return Object.defineProperty(_d,"Instance",{get:function(){return this._instance||(this._instance=new this)},enumerable:!0,configurable:!0}),_d.prototype.transformGraph=function(np){var rp=this,ap=[],sp=[],lp=np.node.reduce(function(fp,pp){return fp[pp.name]=rp.mapNode(pp),pp.op==="Placeholder"&&ap.push(fp[pp.name]),pp.op==="Const"&&sp.push(fp[pp.name]),fp},{}),up=[],cp=[],dp=Object.keys(lp);return dp.forEach(function(fp){var pp=lp[fp];pp.inputNames.forEach(function(hp){var mp=getNodeNameAndIndex(hp)[0];pp.inputs.push(lp[mp]),lp[mp].children.push(pp)}),pp.inputs.length===0&&up.push(pp)}),dp.forEach(function(fp){var pp=lp[fp];pp.children.length===0&&cp.push(pp)}),{nodes:lp,inputs:up,outputs:cp,weights:sp,placeholders:ap}},_d.prototype.mapNode=function(np){var rp=getRegisteredOp(np.op)||this.opMappers[np.op]||{};np.attr==null&&(np.attr={});var ap={name:np.name,op:np.op,category:rp.category,inputNames:(np.input||[]).map(function(sp){return sp.startsWith("^")?sp.substr(1):sp}),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:np.attr};return rp.inputs!=null&&(ap.inputParams=rp.inputs.reduce(function(sp,lp){return sp[lp.name]={type:lp.type,inputIndexStart:lp.start,inputIndexEnd:lp.end},sp},{})),rp.attrs!=null&&(ap.attrParams=rp.attrs.reduce(function(sp,lp){var up=lp.type,cp=void 0;switch(lp.type){case"string":(cp=getStringParam(np.attr,lp.tfName,lp.defaultValue))===void 0&&lp.tfDeprecatedName&&(cp=getStringParam(np.attr,lp.tfDeprecatedName,lp.defaultValue));break;case"string[]":(cp=getStringArrayParam(np.attr,lp.tfName,lp.defaultValue))===void 0&&lp.tfDeprecatedName&&(cp=getStringArrayParam(np.attr,lp.tfDeprecatedName,lp.defaultValue));break;case"number":(cp=getNumberParam(np.attr,lp.tfName,lp.defaultValue||0))===void 0&&lp.tfDeprecatedName&&(cp=getNumberParam(np.attr,lp.tfDeprecatedName,lp.defaultValue));break;case"number[]":(cp=getNumericArrayParam(np.attr,lp.tfName,lp.defaultValue))===void 0&&lp.tfDeprecatedName&&(cp=getNumericArrayParam(np.attr,lp.tfDeprecatedName,lp.defaultValue));break;case"bool":(cp=getBoolParam(np.attr,lp.tfName,lp.defaultValue))===void 0&&lp.tfDeprecatedName&&(cp=getBoolParam(np.attr,lp.tfDeprecatedName,lp.defaultValue));break;case"bool[]":(cp=getBoolArrayParam(np.attr,lp.tfName,lp.defaultValue))===void 0&&lp.tfDeprecatedName&&(cp=getBoolArrayParam(np.attr,lp.tfDeprecatedName,lp.defaultValue));break;case"shape":(cp=getTensorShapeParam(np.attr,lp.tfName,lp.defaultValue))===void 0&&lp.tfDeprecatedName&&(cp=getTensorShapeParam(np.attr,lp.tfDeprecatedName,lp.defaultValue));break;case"shape[]":(cp=getTensorShapeArrayParam(np.attr,lp.tfName,lp.defaultValue))===void 0&&lp.tfDeprecatedName&&(cp=getTensorShapeArrayParam(np.attr,lp.tfDeprecatedName,lp.defaultValue));break;case"dtype":(cp=getDtypeParam(np.attr,lp.tfName,lp.defaultValue))===void 0&&lp.tfDeprecatedName&&(cp=getDtypeParam(np.attr,lp.tfDeprecatedName,lp.defaultValue));break;case"dtype[]":(cp=getDtypeArrayParam(np.attr,lp.tfName,lp.defaultValue))===void 0&&lp.tfDeprecatedName&&(cp=getDtypeArrayParam(np.attr,lp.tfDeprecatedName,lp.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error("Unsupported param type: "+lp.type+" for op: "+np.op)}return sp[lp.name]={value:cp,type:up},sp},{})),ap},_d}();function decodeBase64(_d){var np=a$1().global;if(np.atob!==void 0)return np.atob(_d);if(typeof Buffer<"u")return new Buffer(_d,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function parseStringParam(_d,np){var rp=Array.isArray(_d)?String.fromCharCode.apply(null,_d):decodeBase64(_d);return np?rp:rp.toLowerCase()}function getStringParam(_d,np,rp,ap){ap===void 0&&(ap=!1);var sp=_d[np];return sp!=null?parseStringParam(sp.s,ap):rp}function getBoolParam(_d,np,rp){var ap=_d[np];return ap?ap.b:rp}function getNumberParam(_d,np,rp){var ap=_d[np]||{},sp=ap.i!=null?ap.i:ap.f!=null?ap.f:rp;return typeof sp=="number"?sp:parseInt(sp,10)}function parseDtypeParam(_d){switch(typeof _d=="string"&&(_d=DataType[_d]),_d){case DataType.DT_FLOAT:return"float32";case DataType.DT_INT32:case DataType.DT_INT64:return"int32";case DataType.DT_BOOL:return"bool";case DataType.DT_DOUBLE:return"float32";case DataType.DT_STRING:return"string";default:return null}}function getDtypeParam(_d,np,rp){var ap=_d[np];return ap&&ap.type?parseDtypeParam(ap.type):rp}function getDtypeArrayParam(_d,np,rp){var ap=_d[np];return ap&&ap.list&&ap.list.type?ap.list.type.map(function(sp){return parseDtypeParam(sp)}):rp}function parseTensorShapeParam(_d){if(!_d.unknownRank)return _d.dim!=null?_d.dim.map(function(np){return typeof np.size=="number"?np.size:parseInt(np.size,10)}):[]}function getTensorShapeParam(_d,np,rp){var ap=_d[np];return ap&&ap.shape?parseTensorShapeParam(ap.shape):rp}function getNumericArrayParam(_d,np,rp){var ap=_d[np];return ap?((ap.list.f&&ap.list.f.length?ap.list.f:ap.list.i)||[]).map(function(sp){return typeof sp=="number"?sp:parseInt(sp,10)}):rp}function getStringArrayParam(_d,np,rp,ap){ap===void 0&&(ap=!1);var sp=_d[np];return sp&&sp.list&&sp.list.s?sp.list.s.map(function(lp){return parseStringParam(lp,ap)}):rp}function getTensorShapeArrayParam(_d,np,rp){var ap=_d[np];return ap&&ap.list&&ap.list.shape?ap.list.shape.map(function(sp){return parseTensorShapeParam(sp)}):rp}function getBoolArrayParam(_d,np,rp){var ap=_d[np];return ap&&ap.list&&ap.list.b?ap.list.b:rp}var NodeValueImpl=function(){function _d(np,rp,ap){var sp=this;this.node=np,this.tensorMap=rp,this.context=ap,this.inputs=[],this.attrs={},this.inputs=np.inputNames.map(function(lp){return sp.getInput(lp)}),np.rawAttrs!=null&&(this.attrs=Object.keys(np.rawAttrs).reduce(function(lp,up){return lp[up]=sp.getAttr(up),lp},{}))}return _d.prototype.getInput=function(np){return getTensor(np,this.tensorMap,this.context)},_d.prototype.getAttr=function(np,rp){var ap=this.node.rawAttrs[np];if(ap.tensor!=null)return getTensor(np,this.tensorMap,this.context);if(ap.i!=null||ap.f!=null)return getNumberParam(this.node.rawAttrs,np,rp);if(ap.s!=null)return getStringParam(this.node.rawAttrs,np,rp);if(ap.b!=null)return getBoolParam(this.node.rawAttrs,np,rp);if(ap.shape!=null)return getTensorShapeParam(this.node.rawAttrs,np,rp);if(ap.type!=null)return getDtypeParam(this.node.rawAttrs,np,rp);if(ap.list!=null){if(ap.list.i!=null||ap.list.f!=null)return getNumericArrayParam(this.node.rawAttrs,np,rp);if(ap.list.s!=null)return getStringArrayParam(this.node.rawAttrs,np,rp);if(ap.list.shape!=null)return getTensorShapeArrayParam(this.node.rawAttrs,np,rp);if(ap.list.b!=null)return getBoolArrayParam(this.node.rawAttrs,np,rp);if(ap.list.type!=null)return getDtypeArrayParam(this.node.rawAttrs,np,rp)}return rp},_d}(),executeOp=function(_d,np,rp){switch(_d.op){case"BiasAdd":case"AddV2":case"Add":return[Vs(getParamValue("a",_d,np,rp),getParamValue("b",_d,np,rp))];case"AddN":return[zs(getParamValue("tensors",_d,np,rp))];case"FloorMod":case"Mod":return[Js(getParamValue("a",_d,np,rp),getParamValue("b",_d,np,rp))];case"Mul":return[tc(getParamValue("a",_d,np,rp),getParamValue("b",_d,np,rp))];case"RealDiv":case"Div":return[qs(getParamValue("a",_d,np,rp),getParamValue("b",_d,np,rp))];case"FloorDiv":return[js(getParamValue("a",_d,np,rp),getParamValue("b",_d,np,rp))];case"Sub":return[ic(getParamValue("a",_d,np,rp),getParamValue("b",_d,np,rp))];case"Minimum":return[Ys(getParamValue("a",_d,np,rp),getParamValue("b",_d,np,rp))];case"Maximum":return[Xs(getParamValue("a",_d,np,rp),getParamValue("b",_d,np,rp))];case"Pow":return[nc(getParamValue("a",_d,np,rp),getParamValue("b",_d,np,rp))];case"SquaredDifference":return[oc(getParamValue("a",_d,np,rp),getParamValue("b",_d,np,rp))];default:throw TypeError("Node type "+_d.op+" is not implemented")}},executeOp$1=function(_d,np,rp){switch(_d.op){case"Abs":case"ComplexAbs":return[Vu(getParamValue("x",_d,np,rp))];case"Acos":return[zu(getParamValue("x",_d,np,rp))];case"Acosh":return[Gu(getParamValue("x",_d,np,rp))];case"Asin":return[Hu(getParamValue("x",_d,np,rp))];case"Asinh":return[qu(getParamValue("x",_d,np,rp))];case"Atan":return[Ku(getParamValue("x",_d,np,rp))];case"Atan2":return[Hs(getParamValue("x",_d,np,rp),getParamValue("y",_d,np,rp))];case"Atanh":return[ju(getParamValue("x",_d,np,rp))];case"Ceil":return[Xu(getParamValue("x",_d,np,rp))];case"Complex":return[En(getParamValue("real",_d,np,rp),getParamValue("imag",_d,np,rp))];case"Cos":return[Yu(getParamValue("x",_d,np,rp))];case"Cosh":return[Qu(getParamValue("x",_d,np,rp))];case"Elu":return[gl(getParamValue("x",_d,np,rp))];case"Erf":return[Ju(getParamValue("x",_d,np,rp))];case"Exp":return[Zu(getParamValue("x",_d,np,rp))];case"Expm1":return[ts(getParamValue("x",_d,np,rp))];case"Floor":return[es(getParamValue("x",_d,np,rp))];case"Log":return[ns(getParamValue("x",_d,np,rp))];case"Log1p":return[rs(getParamValue("x",_d,np,rp))];case"Imag":return[In(getParamValue("x",_d,np,rp))];case"Neg":return[as(getParamValue("x",_d,np,rp))];case"Reciprocal":return[is(getParamValue("x",_d,np,rp))];case"Real":return[Rn(getParamValue("x",_d,np,rp))];case"Relu":return[bl(getParamValue("x",_d,np,rp))];case"Round":return[us(getParamValue("x",_d,np,rp))];case"Selu":return[Cl(getParamValue("x",_d,np,rp))];case"Sigmoid":return[cs(getParamValue("x",_d,np,rp))];case"Sin":return[ds(getParamValue("x",_d,np,rp))];case"Sign":return[ls(getParamValue("x",_d,np,rp))];case"Sinh":return[vs(getParamValue("x",_d,np,rp))];case"Softplus":return[ms(getParamValue("x",_d,np,rp))];case"Sqrt":return[gs(getParamValue("x",_d,np,rp))];case"Square":return[Uu(getParamValue("x",_d,np,rp))];case"Tanh":return[bs(getParamValue("x",_d,np,rp))];case"Tan":return[xs(getParamValue("x",_d,np,rp))];case"Relu6":case"ClipByValue":return[$u(getParamValue("x",_d,np,rp),getParamValue("clipValueMin",_d,np,rp),getParamValue("clipValueMax",_d,np,rp))];case"Rsqrt":return[ss(getTensor(_d.inputNames[0],np,rp))];case"Prod":return[ml(getParamValue("x",_d,np,rp),getParamValue("axes",_d,np,rp))];case"LeakyRelu":return[yl(getParamValue("x",_d,np,rp),getParamValue("alpha",_d,np,rp))];default:throw TypeError("Node type "+_d.op+" is not implemented")}},TensorArray=function(){function _d(np,rp,ap,sp,lp,up,cp){this.name=np,this.dtype=rp,this.maxSize=ap,this.elementShape=sp,this.identicalElementShapes=lp,this.dynamicSize=up,this.clearAfterRead=cp,this.tensors=[],this.closed_=!1,this.id=_d.nextId++}return Object.defineProperty(_d.prototype,"closed",{get:function(){return this.closed_},enumerable:!0,configurable:!0}),_d.prototype.clearAndClose=function(){this.tensors.forEach(function(np){return np.tensor.dispose()}),this.tensors=[],this.closed_=!0},_d.prototype.size=function(){return this.tensors.length},_d.prototype.read=function(np){if(this.closed_)throw new Error("TensorArray "+this.name+" has already been closed.");if(np<0||np>=this.tensors.length)throw new Error("Tried to read from index "+np+", but array size is: "+this.tensors.length);var rp=this.tensors[np];if(rp.cleared)throw new Error("TensorArray "+this.name+": Could not read index "+np+" twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).");return this.clearAfterRead&&(rp.cleared=!0),rp.read=!0,rp.tensor},_d.prototype.readMany=function(np){var rp=this;return np.map(function(ap){return rp.read(ap)})},_d.prototype.write=function(np,rp){if(this.closed_)throw new Error("TensorArray "+this.name+" has already been closed.");if(np<0||!this.dynamicSize&&np>=this.maxSize)throw new Error("Tried to write to index "+np+", but array is not resizeable and size is: "+this.maxSize);var ap=this.tensors[np]||{};if(rp.dtype!==this.dtype)throw new Error("TensorArray "+this.name+": Could not write to TensorArray index "+np+`,
          because the value dtype is `+rp.dtype+", but TensorArray dtype is "+this.dtype+".");if(this.size()!==0||this.elementShape!=null&&this.elementShape.length!==0||(this.elementShape=rp.shape),this.assertShapesMatchAllowUndefinedSize(this.elementShape,rp.shape,"TensorArray "+this.name+": Could not write to TensorArray index "+np+"."),ap&&ap.read)throw new Error("TensorArray "+this.name+": Could not write to TensorArray index "+np+", because it has already been read.");if(ap&&ap.written)throw new Error("TensorArray "+this.name+": Could not write to TensorArray index "+np+", because it has already been written.");ap.tensor=rp,ap.written=!0,this.tensors[np]=ap},_d.prototype.writeMany=function(np,rp){var ap=this;if(np.length!==rp.length)throw new Error("TensorArray "+this.name+": could not write multiple tensors,because the index size: "+np.length+" is not the same as tensors size: "+rp.length+".");np.forEach(function(sp,lp){return ap.write(sp,rp[lp])})},_d.prototype.gather=function(np,rp){if(rp&&rp!==this.dtype)throw new Error("TensorArray dtype is "+this.dtype+" but gather requested dtype "+rp);if(!np){np=[];for(var ap=0;ap<this.size();ap++)np.push(ap)}if(np.length===0)return kn([],[0].concat(this.elementShape));var sp=this.readMany(np);return this.assertShapesMatchAllowUndefinedSize(this.elementShape,sp[0].shape,"TensorArray shape mismatch: "),Tr(sp,0)},_d.prototype.concat=function(np){if(np&&np!==this.dtype)throw new Error("TensorArray dtype is "+this.dtype+" but concat requested dtype "+np);if(this.size()===0)return kn([],[0].concat(this.elementShape));for(var rp=[],ap=0;ap<this.size();ap++)rp.push(ap);var sp=this.readMany(rp);return this.assertShapesMatchAllowUndefinedSize(this.elementShape,sp[0].shape,"TensorArray shape mismatch: tensor array shape ("+this.elementShape+") vs first tensor shape ("+sp[0].shape+")"),Gn(sp,0)},_d.prototype.scatter=function(np,rp){if(rp.dtype!==this.dtype)throw new Error("TensorArray dtype is "+this.dtype+" but tensor has dtype "+rp.dtype);if(np.length!==rp.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: "+np.length+" vs. "+rp.shape[0]);var ap=Math.max.apply(Math,np);if(!this.dynamicSize&&ap>=this.maxSize)throw new Error("Max index must be < array size ("+ap+"  vs. "+this.maxSize+")");this.writeMany(np,Or(rp,0))},_d.prototype.split=function(np,rp){var ap=this;if(rp.dtype!==this.dtype)throw new Error("TensorArray dtype is "+this.dtype+" but tensor has dtype "+rp.dtype);var sp=0,lp=np.map(function(pp){return sp+=pp});if(sp!==rp.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        `+sp+", and tensor's shape is: "+rp.shape);if(!this.dynamicSize&&np.length!==this.maxSize)throw new Error("TensorArray's size is not equal to the size of lengths ("+this.maxSize+" vs. "+np.length+"), and the TensorArray is not marked as dynamically resizeable");var up=sp===0?0:rp.size/sp,cp=[];je(function(){rp=rp.reshape([1,sp,up]);for(var pp=0;pp<np.length;++pp){var hp=[0,pp===0?0:lp[pp-1],0],mp=[1,np[pp],up];cp[pp]=tl(rp,hp,mp).reshape(ap.elementShape)}return cp});for(var dp=[],fp=0;fp<np.length;fp++)dp[fp]=fp;this.writeMany(dp,cp)},_d.prototype.assertShapesMatchAllowUndefinedSize=function(np,rp,ap){ap===void 0&&(ap=""),tt.assert(this.shapesEqualAllowUndefinedSize(np,rp),function(){return ap+" Shapes "+np+" and "+rp+" must match"})},_d.prototype.shapesEqualAllowUndefinedSize=function(np,rp){if(np.length!==rp.length)return!1;for(var ap=0;ap<np.length;ap++)if(np[ap]!==-1&&rp[ap]!==-1&&np[ap]!==rp[ap])return!1;return!0},_d.nextId=0,_d}();function executeOp$2(_d,np,rp){return __awaiter$7(this,void 0,void 0,function(){var ap,sp,lp,up,cp,dp,fp,pp,hp,mp,gp,vp,xp,Sp,yp,bp,Ep,wp,_p,Cp,$p,Rp,Pp,Op,jp,Mp,Ap,Dp,Fp,Ip,kp,Tp,Np,Lp,Vp;return __generator$7(this,function(zp){switch(zp.label){case 0:switch(_d.op){case"LoopCond":return[3,1];case"Switch":return[3,2];case"Merge":return[3,4];case"Enter":return[3,5];case"Exit":return[3,6];case"NextIteration":return[3,7];case"TensorArrayV3":return[3,8];case"TensorArrayWriteV3":return[3,9];case"TensorArrayReadV3":return[3,10];case"TensorArrayGatherV3":return[3,11];case"TensorArrayScatterV3":return[3,12];case"TensorArrayConcatV3":return[3,13];case"TensorArraySplitV3":return[3,14];case"TensorArraySizeV3":return[3,15];case"TensorArrayCloseV3":return[3,16]}return[3,17];case 1:return[2,[getParamValue("pred",_d,np,rp).clone()]];case 2:return ap=getParamValue("pred",_d,np,rp),sp=getParamValue("data",_d,np,rp),[4,ap.data()];case 3:return[2,zp.sent()[0]?[void 0,sp.clone()]:[sp.clone(),void 0]];case 4:return[2,(lp=_d.inputNames.find(function(Wp){return getTensor(Wp,np,rp)!==void 0}))?[getTensor(lp,np,rp).clone()]:void 0];case 5:return up=getParamValue("frameName",_d,np,rp),cp=getParamValue("tensor",_d,np,rp),rp.enterFrame(up),[2,[cp.clone()]];case 6:return dp=getParamValue("tensor",_d,np,rp),rp.exitFrame(),[2,[dp.clone()]];case 7:return fp=getParamValue("tensor",_d,np,rp),rp.nextIteration(),[2,[fp.clone()]];case 8:return pp=getParamValue("size",_d,np,rp),hp=getParamValue("dtype",_d,np,rp),mp=getParamValue("elementShape",_d,np,rp),gp=getParamValue("dynamicSize",_d,np,rp),vp=getParamValue("clearAfterRead",_d,np,rp),xp=getParamValue("identicalElementShapes",_d,np,rp),Sp=getParamValue("name",_d,np,rp),yp=new TensorArray(Sp,hp,pp,mp,xp,gp,vp),rp.addTensorArray(yp),[2,[An(yp.id),An(1)]];case 9:return bp=getParamValue("tensorArrayId",_d,np,rp),Ep=getParamValue("index",_d,np,rp),wp=getParamValue("tensor",_d,np,rp),rp.getTensorArray(bp).write(Ep,wp),[2,[An(1)]];case 10:return _p=getParamValue("tensorArrayId",_d,np,rp),Cp=getParamValue("index",_d,np,rp),[2,[rp.getTensorArray(_p).read(Cp)]];case 11:return $p=getParamValue("tensorArrayId",_d,np,rp),Rp=getParamValue("indices",_d,np,rp),Pp=getParamValue("dtype",_d,np,rp),[2,[rp.getTensorArray($p).gather(Rp,Pp)]];case 12:return Op=getParamValue("tensorArrayId",_d,np,rp),jp=getParamValue("indices",_d,np,rp),Mp=getParamValue("tensor",_d,np,rp),rp.getTensorArray(Op).scatter(jp,Mp),[2,[An(1)]];case 13:return Ap=getParamValue("tensorArrayId",_d,np,rp),Dp=rp.getTensorArray(Ap),Fp=getParamValue("dtype",_d,np,rp),[2,[Dp.concat(Fp)]];case 14:return Ip=getParamValue("tensorArrayId",_d,np,rp),kp=getParamValue("tensor",_d,np,rp),Tp=getParamValue("lengths",_d,np,rp),rp.getTensorArray(Ip).split(Tp,kp),[2,[An(1)]];case 15:return Np=getParamValue("tensorArrayId",_d,np,rp),Lp=rp.getTensorArray(Np),[2,[An(Lp.size(),"int32")]];case 16:return Vp=getParamValue("tensorArrayId",_d,np,rp),rp.getTensorArray(Vp).clearAndClose(),[2,[]];case 17:throw TypeError("Node type "+_d.op+" is not implemented")}})})}var executeOp$3=function(_d,np,rp){var ap,sp;switch(_d.op){case"Conv1D":var lp=getParamValue("stride",_d,np,rp),up=getParamValue("pad",_d,np,rp),cp=getParamValue("dataFormat",_d,np,rp).toUpperCase(),dp=getParamValue("dilation",_d,np,rp);return[Ac(getParamValue("x",_d,np,rp),getParamValue("filter",_d,np,rp),lp,up,cp,dp)];case"Conv2D":lp=getParamValue("strides",_d,np,rp),up=getParamValue("pad",_d,np,rp),cp=getParamValue("dataFormat",_d,np,rp).toUpperCase();var fp=getParamValue("dilations",_d,np,rp);return[Dc(getParamValue("x",_d,np,rp),getParamValue("filter",_d,np,rp),[lp[1],lp[2]],up,cp,[fp[1],fp[2]])];case"_FusedConv2D":var pp=(ap=getParamValue("fusedOps",_d,np,rp))[0],hp=ap[1],mp=pp==="biasadd",gp=hp==="prelu",vp=pp==="fusedbatchnorm",xp=getParamValue("numArgs",_d,np,rp);if(mp){if(gp&&xp!==2)throw new Error("Fused Conv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!gp&&xp!==1)throw new Error("Fused Conv2d with BiasAdd must have one extra argument: bias.")}if(vp)throw new Error("Fused Conv2d with FusedBatchNorm is not supported.");lp=getParamValue("strides",_d,np,rp),up=getParamValue("pad",_d,np,rp),cp=getParamValue("dataFormat",_d,np,rp).toUpperCase(),fp=getParamValue("dilations",_d,np,rp);var Sp=(sp=getParamValue("args",_d,np,rp))[0],yp=sp[1];return[Eh.conv2d({x:getParamValue("x",_d,np,rp),filter:getParamValue("filter",_d,np,rp),strides:[lp[1],lp[2]],pad:up,dataFormat:cp,dilations:[fp[1],fp[2]],bias:Sp,activation:hp,preluActivationWeights:yp})];case"Conv2DBackpropInput":case"Conv2dTranspose":var bp=getParamValue("outputShape",_d,np,rp);return lp=getParamValue("strides",_d,np,rp),up=getParamValue("pad",_d,np,rp),[Pc(getParamValue("x",_d,np,rp),getParamValue("filter",_d,np,rp),bp,[lp[1],lp[2]],up)];case"DepthwiseConv2dNative":case"DepthwiseConv2d":return lp=getParamValue("strides",_d,np,rp),up=getParamValue("pad",_d,np,rp),fp=getParamValue("dilations",_d,np,rp),cp=getParamValue("dataFormat",_d,np,rp).toUpperCase(),[Oc(getParamValue("input",_d,np,rp),getParamValue("filter",_d,np,rp),[lp[1],lp[2]],up,cp,[fp[1],fp[2]])];case"Conv3D":return lp=getParamValue("strides",_d,np,rp),up=getParamValue("pad",_d,np,rp),cp=getParamValue("dataFormat",_d,np,rp).toUpperCase(),fp=getParamValue("dilations",_d,np,rp),[Tc(getParamValue("x",_d,np,rp),getParamValue("filter",_d,np,rp),[lp[1],lp[2],lp[3]],up,cp,[fp[1],fp[2],fp[3]])];case"AvgPool":lp=getParamValue("strides",_d,np,rp),up=getParamValue("pad",_d,np,rp);var Ep=getParamValue("kernelSize",_d,np,rp);return[Yc(getParamValue("x",_d,np,rp),[Ep[1],Ep[2]],[lp[1],lp[2]],up)];case"MaxPool":return lp=getParamValue("strides",_d,np,rp),up=getParamValue("pad",_d,np,rp),Ep=getParamValue("kernelSize",_d,np,rp),[$c(getParamValue("x",_d,np,rp),[Ep[1],Ep[2]],[lp[1],lp[2]],up)];case"AvgPool3D":return lp=getParamValue("strides",_d,np,rp),up=getParamValue("pad",_d,np,rp),Ep=getParamValue("kernelSize",_d,np,rp),[Zc(getParamValue("x",_d,np,rp),[Ep[1],Ep[2],Ep[3]],[lp[1],lp[2],lp[3]],up)];case"MaxPool3D":return lp=getParamValue("strides",_d,np,rp),up=getParamValue("pad",_d,np,rp),Ep=getParamValue("kernelSize",_d,np,rp),[Jc(getParamValue("x",_d,np,rp),[Ep[1],Ep[2],Ep[3]],[lp[1],lp[2],lp[3]],up)];default:throw TypeError("Node type "+_d.op+" is not implemented")}},executeOp$4=function(_d,np,rp){switch(_d.op){case"Fill":var ap=getParamValue("shape",_d,np,rp),sp=getParamValue("dtype",_d,np,rp),lp=getParamValue("value",_d,np,rp);return[Ln(ap,lp,sp)];case"LinSpace":var up=getParamValue("start",_d,np,rp),cp=getParamValue("stop",_d,np,rp),dp=getParamValue("num",_d,np,rp);return[Wn(up,cp,dp)];case"Multinomial":var fp=getParamValue("logits",_d,np,rp),pp=getParamValue("numSamples",_d,np,rp),hp=getParamValue("seed",_d,np,rp);return[mr(fp,pp,hp)];case"OneHot":var mp=getParamValue("indices",_d,np,rp),gp=getParamValue("depth",_d,np,rp),vp=getParamValue("onValue",_d,np,rp),xp=getParamValue("offValue",_d,np,rp);return[gr(mp,gp,vp,xp)];case"Ones":return[Bn(getParamValue("shape",_d,np,rp),getParamValue("dtype",_d,np,rp))];case"OnesLike":return[Vn(getParamValue("x",_d,np,rp))];case"RandomUniform":return[kr(getParamValue("shape",_d,np,rp),getParamValue("minval",_d,np,rp),getParamValue("maxval",_d,np,rp),getParamValue("dtype",_d,np,rp))];case"Range":up=getParamValue("start",_d,np,rp);var Sp=getParamValue("stop",_d,np,rp),yp=getParamValue("step",_d,np,rp);return[Un(up,Sp,yp,getParamValue("dtype",_d,np,rp))];case"TruncatedNormal":ap=getParamValue("shape",_d,np,rp);var bp=getParamValue("mean",_d,np,rp),Ep=getParamValue("stdDev",_d,np,rp);return hp=getParamValue("seed",_d,np,rp),[Fr(ap,bp,Ep,getParamValue("dtype",_d,np,rp),hp)];case"Zeros":return[Pn(getParamValue("shape",_d,np,rp),getParamValue("dtype",_d,np,rp))];case"ZerosLike":return[zn(getParamValue("x",_d,np,rp))];default:throw TypeError("Node type "+_d.op+" is not implemented")}};function executeOp$5(_d,np,rp){return __awaiter$7(this,void 0,void 0,function(){var ap,sp,lp,up,cp;return __generator$7(this,function(dp){switch(dp.label){case 0:switch(_d.op){case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":return[3,1];case"Where":return[3,3];case"ListDiff":return[3,5]}return[3,6];case 1:return ap=getParamValue("boxes",_d,np,rp),sp=getParamValue("scores",_d,np,rp),lp=getParamValue("maxOutputSize",_d,np,rp),up=getParamValue("iouThreshold",_d,np,rp),cp=getParamValue("scoreThreshold",_d,np,rp),[4,vh.nonMaxSuppressionAsync(ap,sp,lp,up,cp)];case 2:return[2,[dp.sent()]];case 3:return[4,Us(getParamValue("condition",_d,np,rp).asType("bool"))];case 4:return[2,[dp.sent()]];case 5:return[2,_r(getParamValue("x",_d,np,rp),getParamValue("y",_d,np,rp))];case 6:throw TypeError("Node type "+_d.op+" is not implemented")}})})}var executeOp$6=function(_d,np,rp){switch(_d.op){case"TopKV2":var ap=getParamValue("x",_d,np,rp),sp=getParamValue("k",_d,np,rp),lp=getParamValue("sorted",_d,np,rp),up=Tl(ap,sp,lp);return[up.values,up.indices];default:throw TypeError("Node type "+_d.op+" is not implemented")}},executeOp$7=function(_d,np,rp){switch(_d.op){case"Const":return np[_d.name];case"PlaceholderWithDefault":var ap=getParamValue("default",_d,np,rp);return[getTensor(_d.name,np,rp)||ap];case"Placeholder":return[getTensor(_d.name,np,rp)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":return[getParamValue("x",_d,np,rp).clone()];case"IdentityN":return getParamValue("x",_d,np,rp).map(function(fp){return fp.clone()});case"Snapshot":return[getParamValue("x",_d,np,rp).clone()];case"Shape":return[Dn(getParamValue("x",_d,np,rp).shape,"int32")];case"ShapeN":return getParamValue("x",_d,np,rp).map(function(fp){return Dn(fp.shape)});case"Size":return[An(getParamValue("x",_d,np,rp).size,"int32")];case"Rank":return[An(getParamValue("x",_d,np,rp).rank,"int32")];case"NoOp":return[];case"Print":var sp=getParamValue("x",_d,np,rp),lp=getParamValue("data",_d,np,rp),up=getParamValue("message",_d,np,rp),cp=getParamValue("summarize",_d,np,rp);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(up);for(var dp=0;dp<lp.length;dp++)console.log(Array.prototype.slice.call(lp[dp].dataSync()).slice(0,cp));return[sp];default:throw TypeError("Node type "+_d.op+" is not implemented")}},executeOp$8=function(_d,np,rp){switch(_d.op){case"ResizeBilinear":var ap=getParamValue("images",_d,np,rp),sp=getParamValue("size",_d,np,rp),lp=getParamValue("alignCorners",_d,np,rp);return[vh.resizeBilinear(ap,[sp[0],sp[1]],lp)];case"ResizeNearestNeighbor":return ap=getParamValue("images",_d,np,rp),sp=getParamValue("size",_d,np,rp),lp=getParamValue("alignCorners",_d,np,rp),[vh.resizeNearestNeighbor(ap,[sp[0],sp[1]],lp)];case"CropAndResize":var up=getParamValue("image",_d,np,rp),cp=getParamValue("boxes",_d,np,rp),dp=getParamValue("boxInd",_d,np,rp),fp=getParamValue("cropSize",_d,np,rp),pp=getParamValue("method",_d,np,rp),hp=getParamValue("extrapolationValue",_d,np,rp);return[vh.cropAndResize(up,cp,dp,fp,pp,hp)];default:throw TypeError("Node type "+_d.op+" is not implemented")}},executeOp$9=function(_d,np,rp){switch(_d.op){case"Equal":return[sc(getParamValue("a",_d,np,rp),getParamValue("b",_d,np,rp))];case"NotEqual":return[yc(getParamValue("a",_d,np,rp),getParamValue("b",_d,np,rp))];case"Greater":return[lc(getParamValue("a",_d,np,rp),getParamValue("b",_d,np,rp))];case"GreaterEqual":return[hc(getParamValue("a",_d,np,rp),getParamValue("b",_d,np,rp))];case"Less":return[dc(getParamValue("a",_d,np,rp),getParamValue("b",_d,np,rp))];case"LessEqual":return[vc(getParamValue("a",_d,np,rp),getParamValue("b",_d,np,rp))];case"LogicalAnd":return[Ms(getParamValue("a",_d,np,rp),getParamValue("b",_d,np,rp))];case"LogicalNot":return[Bs(getParamValue("a",_d,np,rp))];case"LogicalOr":return[Ps(getParamValue("a",_d,np,rp),getParamValue("b",_d,np,rp))];case"Select":return[Ws(getParamValue("condition",_d,np,rp),getParamValue("a",_d,np,rp),getParamValue("b",_d,np,rp))];default:throw TypeError("Node type "+_d.op+" is not implemented")}},executeOp$10=function(_d,np,rp){switch(_d.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[Wc(getParamValue("a",_d,np,rp),getParamValue("b",_d,np,rp),getParamValue("transposeA",_d,np,rp),getParamValue("transposeB",_d,np,rp))];case"Transpose":return[El(getParamValue("x",_d,np,rp),getParamValue("perm",_d,np,rp))];default:throw TypeError("Node type "+_d.op+" is not implemented")}},executeOp$11=function(_d,np,rp){switch(_d.op){case"FusedBatchNorm":case"FusedBatchNormV2":case"FusedBatchNormV3":return[Ns(getParamValue("x",_d,np,rp),getParamValue("mean",_d,np,rp),getParamValue("variance",_d,np,rp),getParamValue("offset",_d,np,rp),getParamValue("scale",_d,np,rp),getParamValue("epsilon",_d,np,rp))];case"LRN":return[Rl(getParamValue("x",_d,np,rp),getParamValue("radius",_d,np,rp),getParamValue("bias",_d,np,rp),getParamValue("alpha",_d,np,rp),getParamValue("beta",_d,np,rp))];case"Softmax":return[io(getParamValue("x",_d,np,rp))];case"LogSoftmax":return[uo(getParamValue("x",_d,np,rp))];case"SparseToDense":return[Pl(getParamValue("sparseIndices",_d,np,rp),getParamValue("outputShape",_d,np,rp),getParamValue("sparseValues",_d,np,rp),getParamValue("defaultValue",_d,np,rp))];default:throw TypeError("Node type "+_d.op+" is not implemented")}},executeOp$12=function(_d,np,rp){switch(_d.op){case"Max":var ap=getParamValue("axis",_d,np,rp),sp=getParamValue("keepDims",_d,np,rp);return[hl(getParamValue("x",_d,np,rp),ap,sp)];case"Mean":return ap=getParamValue("axis",_d,np,rp),sp=getParamValue("keepDims",_d,np,rp),[fl(getParamValue("x",_d,np,rp),ap,sp)];case"Min":return ap=getParamValue("axis",_d,np,rp),sp=getParamValue("keepDims",_d,np,rp),[pl(getParamValue("x",_d,np,rp),ap,sp)];case"Sum":return ap=getParamValue("axis",_d,np,rp),sp=getParamValue("keepDims",_d,np,rp),[vl(getParamValue("x",_d,np,rp),ap,sp)];case"All":return ap=getParamValue("axis",_d,np,rp),sp=getParamValue("keepDims",_d,np,rp),[il(getParamValue("x",_d,np,rp),ap,sp)];case"Any":return ap=getParamValue("axis",_d,np,rp),sp=getParamValue("keepDims",_d,np,rp),[ul(getParamValue("x",_d,np,rp),ap,sp)];case"ArgMax":return ap=getParamValue("axis",_d,np,rp),[sl(getParamValue("x",_d,np,rp),ap)];case"ArgMin":return ap=getParamValue("axis",_d,np,rp),[cl(getParamValue("x",_d,np,rp),ap)];case"Prod":return ap=getParamValue("axis",_d,np,rp),sp=getParamValue("keepDims",_d,np,rp),[ml(getParamValue("x",_d,np,rp),ap,sp)];default:throw TypeError("Node type "+_d.op+" is not implemented")}},executeOp$13=function(_d,np,rp){switch(_d.op){case"ConcatV2":case"Concat":var ap=getParamValue("axis",_d,np,rp),sp=getParamValue("tensors",_d,np,rp);return[Gn(sp,ap)];case"GatherV2":case"Gather":ap=getParamValue("axis",_d,np,rp);var lp=getParamValue("x",_d,np,rp),up=getParamValue("indices",_d,np,rp);return[Cc(lp,up.asType("int32"),ap)];case"ReverseV2":case"Reverse":return ap=getParamValue("axis",_d,np,rp),lp=getParamValue("x",_d,np,rp),[zc(lp,ap)];case"Slice":var cp=getParamValue("begin",_d,np,rp),dp=getParamValue("size",_d,np,rp);return[tl(getParamValue("x",_d,np,rp),cp,dp)];case"StridedSlice":cp=getParamValue("begin",_d,np,rp);var fp=getParamValue("end",_d,np,rp),pp=getParamValue("strides",_d,np,rp),hp=getParamValue("beginMask",_d,np,rp),mp=getParamValue("endMask",_d,np,rp),gp=getParamValue("ellipsisMask",_d,np,rp),vp=getParamValue("newAxisMask",_d,np,rp),xp=getParamValue("shrinkAxisMask",_d,np,rp),Sp=getParamValue("x",_d,np,rp);if(cp.length===1&&Sp.shape.length>1)for(var yp=1;yp<Sp.shape.length;yp++)cp.push(0),fp.push(Sp.shape[yp]),pp.push(pp[0]);return[Dl(Sp,cp,fp,pp,hp,mp,gp,vp,xp)];case"Pack":return je(function(){var Pp=getParamValue("axis",_d,np,rp),Op=getParamValue("tensors",_d,np,rp),jp=Op[0].shape,Mp=Op[0].squeeze().shape,Ap=Op.map(function(Dp){var Fp=tt.arraysEqual(Dp.shape,jp);if(!Fp&&!tt.arraysEqual(Dp.squeeze().shape,Mp))throw new Error("the input tensors shape does not match");return Fp?Dp:Dp.reshape(jp)});return[Tr(Ap,Pp)]});case"Unpack":return je(function(){var Pp=getParamValue("axis",_d,np,rp),Op=getParamValue("tensor",_d,np,rp);return Or(Op,Pp)});case"Tile":var bp=getParamValue("reps",_d,np,rp);return[Nr(getParamValue("x",_d,np,rp),bp)];case"Split":case"SplitV":ap=getParamValue("axis",_d,np,rp);var Ep=getParamValue("numOrSizeSplits",_d,np,rp);return Xn(getParamValue("x",_d,np,rp),Ep,ap);case"ScatterNd":up=getParamValue("indices",_d,np,rp);var wp=getParamValue("values",_d,np,rp),_p=getParamValue("shape",_d,np,rp);return[Nl(up,wp,_p)];case"GatherNd":var Cp=getParamValue("x",_d,np,rp);return up=getParamValue("indices",_d,np,rp),[Ll(Cp,up)];case"SparseToDense":up=getParamValue("sparseIndices",_d,np,rp),_p=getParamValue("outputShape",_d,np,rp);var $p=getParamValue("sparseValues",_d,np,rp),Rp=getParamValue("defaultValue",_d,np,rp);return[Pl(up,$p,_p,$p.dtype===Rp.dtype?Rp:Rp.asType($p.dtype))];default:throw TypeError("Node type "+_d.op+" is not implemented")}},executeOp$14=function(_d,np,rp){switch(_d.op){case"FFT":return[Fl(getParamValue("x",_d,np,rp))];case"IFFT":return[Ol(getParamValue("x",_d,np,rp))];case"RFFT":return[_l(getParamValue("x",_d,np,rp))];case"IRFFT":return[Ml(getParamValue("x",_d,np,rp))];default:throw TypeError("Node type "+_d.op+" is not implemented")}},executeOp$15=function(_d,np,rp){switch(_d.op){case"Cast":return[lr(getParamValue("x",_d,np,rp),getParamValue("dtype",_d,np,rp))];case"ExpandDims":var ap=getParamValue("axis",_d,np,rp);return[dr(getParamValue("x",_d,np,rp),ap)];case"Squeeze":return ap=getParamValue("axis",_d,np,rp),[Dr(getParamValue("x",_d,np,rp),ap)];case"Reshape":return[Sr(getParamValue("x",_d,np,rp),getParamValue("shape",_d,np,rp))];case"PadV2":case"Pad":return[yr(getParamValue("x",_d,np,rp),split$1(getParamValue("padding",_d,np,rp),2),getParamValue("constantValue",_d,np,rp))];case"SpaceToBatchND":var sp=getParamValue("blockShape",_d,np,rp),lp=split$1(getParamValue("paddings",_d,np,rp),2);return[Ar(getParamValue("x",_d,np,rp),sp,lp)];case"BatchToSpaceND":sp=getParamValue("blockShape",_d,np,rp);var up=split$1(getParamValue("crops",_d,np,rp),2);return[cr(getParamValue("x",_d,np,rp),sp,up)];case"DepthToSpace":var cp=getParamValue("blockSize",_d,np,rp),dp=getParamValue("dataFormat",_d,np,rp).toUpperCase();return[pr(getParamValue("x",_d,np,rp),cp,dp)];default:throw TypeError("Node type "+_d.op+" is not implemented")}};function executeOp$16(_d,np,rp){var ap=function(sp,lp,up){switch(sp.category){case"arithmetic":return executeOp(sp,lp,up);case"basic_math":return executeOp$1(sp,lp,up);case"control":return executeOp$2(sp,lp,up);case"convolution":return executeOp$3(sp,lp,up);case"creation":return executeOp$4(sp,lp,up);case"dynamic":return executeOp$5(sp,lp,up);case"evaluation":return executeOp$6(sp,lp,up);case"image":return executeOp$8(sp,lp,up);case"graph":return executeOp$7(sp,lp,up);case"logical":return executeOp$9(sp,lp,up);case"matrices":return executeOp$10(sp,lp,up);case"normalization":return executeOp$11(sp,lp,up);case"reduction":return executeOp$12(sp,lp,up);case"slice_join":return executeOp$13(sp,lp,up);case"spectral":return executeOp$14(sp,lp,up);case"transformation":return executeOp$15(sp,lp,up);case"custom":var cp=getRegisteredOp(sp.op);if(cp&&cp.customExecutor)return cp.customExecutor(new NodeValueImpl(sp,lp,up));throw TypeError("Custom op "+sp.op+" is not registered.");default:throw TypeError("Unknown op '"+sp.op+"'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()")}}(_d,np,rp);return ap instanceof Promise?ap.then(function(sp){return[].concat(sp)}):[].concat(ap)}var ExecutionContext=function(){function _d(np,rp){this.weightMap=np,this.tensorArrayMap=rp,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}return _d.prototype.newFrame=function(np,rp){return{id:np,frameName:rp,iterationId:0}},Object.defineProperty(_d.prototype,"currentContext",{get:function(){return this.contexts},set:function(np){this.contexts!==np&&(this.contexts=np,this.generateCurrentContextIds())},enumerable:!0,configurable:!0}),Object.defineProperty(_d.prototype,"currentContextId",{get:function(){return this._currentContextIds[0]},enumerable:!0,configurable:!0}),Object.defineProperty(_d.prototype,"currentContextIds",{get:function(){return this._currentContextIds},enumerable:!0,configurable:!0}),_d.prototype.generateCurrentContextIds=function(){for(var np=[],rp=0;rp<this.contexts.length-1;rp++){var ap=this.contexts.slice(0,this.contexts.length-rp);np.push(this.contextIdforContexts(ap))}np.push(""),this._currentContextIds=np},_d.prototype.contextIdforContexts=function(np){return np?np.map(function(rp){return rp.id===0&&rp.iterationId===0?"":rp.frameName+"-"+rp.iterationId}).join("/"):""},_d.prototype.enterFrame=function(np){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,np)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))},_d.prototype.exitFrame=function(){if(!(this.contexts&&this.contexts.length>1))throw new Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()},_d.prototype.nextIteration=function(){if(!(this.contexts&&this.contexts.length>0))throw new Error("Cannot increase frame iteration, the context is empty");this.contexts=this.contexts.slice(),this.lastId++;var np=Object.assign({},this.contexts[this.contexts.length-1]);np.iterationId+=1,np.id=this.lastId,this.contexts.splice(-1,1,np),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))},_d.prototype.getWeight=function(np){return this.weightMap[np]},_d.prototype.addTensorArray=function(np){this.tensorArrayMap[np.id]=np},_d.prototype.getTensorArray=function(np){return this.tensorArrayMap[np]},_d}();function getExecutionSubgraph(_d,np,rp){for(var ap=new Set,sp=[],lp=null,up=null,cp=new Set,dp=np.slice();dp.length>0;){var fp=dp.pop();(isControlFlow(fp)||isDynamicShape(fp))&&lp==null&&(up=(lp=fp).children.map(function(pp){return pp.name}).filter(function(pp){return ap.has(pp)})),ap.add(fp.name),rp[fp.name]==null&&_d[fp.name]==null&&(fp.inputs.length!==0?fp.inputs.forEach(function(pp){cp.has(pp.name)||(cp.add(pp.name),dp.push(pp))}):sp.push(fp.name))}return{inputs:_d,outputs:np,usedNodes:ap,missingInputs:sp,dynamicNode:lp,syncInputs:up}}function getNodesInTopologicalOrder(_d,np,rp){var ap=rp.usedNodes,sp=rp.inputs,lp=[];Object.keys(sp).map(function(fp){return _d.nodes[fp]}).forEach(function(fp){ap.has(fp.name)&&lp.push(fp)}),_d.weights.forEach(function(fp){ap.has(fp.name)&&lp.push(fp)});for(var up=new Set,cp=[];lp.length>0;){var dp=lp.pop();up.add(dp.name),np[dp.name]||cp.push(dp),dp.children.forEach(function(fp){!up.has(fp.name)&&ap.has(fp.name)&&fp.inputs.every(function(pp){return up.has(pp.name)})&&lp.push(fp)})}return cp}var CONTROL_FLOW_OPS=["Switch","Merge","Enter","Exit","NextIteration"],DYNAMIC_SHAPE_OPS=["NonMaxSuppressionV2","NonMaxSuppressionV3","Where"];function isControlFlow(_d){return CONTROL_FLOW_OPS.indexOf(_d.op)>=0}function isDynamicShape(_d){return DYNAMIC_SHAPE_OPS.indexOf(_d.op)>=0}var GraphExecutor=function(){function _d(np){this.graph=np,this.compiledMap=new Map,this._weightMap={},this.SEPERATOR=",",this.placeholders=np.placeholders,this._outputs=np.outputs}return Object.defineProperty(_d.prototype,"weightMap",{get:function(){return this._weightMap},set:function(np){var rp=Object.keys(np).map(function(ap){return np[ap].map(function(sp){return sp.id})});this.weightIds=[].concat.apply([],rp),this._weightMap=np},enumerable:!0,configurable:!0}),Object.defineProperty(_d.prototype,"inputs",{get:function(){return this.placeholders.map(function(np){return{name:np.name,shape:np.attrParams.shape?np.attrParams.shape.value:void 0,dtype:np.attrParams.dtype?np.attrParams.dtype.value:void 0}})},enumerable:!0,configurable:!0}),Object.defineProperty(_d.prototype,"outputs",{get:function(){return this._outputs.map(function(np){return{name:np.name,shape:np.attrParams.shape?np.attrParams.shape.value:void 0,dtype:np.attrParams.dtype?np.attrParams.dtype.value:void 0}})},enumerable:!0,configurable:!0}),Object.defineProperty(_d.prototype,"inputNodes",{get:function(){return this.placeholders.map(function(np){return np.name})},enumerable:!0,configurable:!0}),Object.defineProperty(_d.prototype,"outputNodes",{get:function(){return this.outputs.map(function(np){return np.name})},enumerable:!0,configurable:!0}),_d.prototype.getCompilationKey=function(np,rp){var ap=np.map(function(lp){return lp.name}).sort(),sp=rp.map(function(lp){return lp.name}).sort();return ap.join(this.SEPERATOR)+"--"+sp.join(this.SEPERATOR)},_d.prototype.compile=function(np,rp){var ap=getExecutionSubgraph(np,rp,this.weightMap),sp=ap.missingInputs,lp=ap.dynamicNode,up=ap.syncInputs;if(lp!=null)throw new Error("This execution contains the node '"+lp.name+"', which has the dynamic op '"+lp.op+"'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs ["+up+"]");if(sp.length>0){var cp=rp.map(function(fp){return fp.name}),dp=Object.keys(np);throw new Error("Cannot compute the outputs ["+cp+"] from the provided inputs ["+dp+"]. Missing the following inputs: ["+sp+"]")}return getNodesInTopologicalOrder(this.graph,this.weightMap,ap)},_d.prototype.execute=function(np,rp){var ap=this,sp=Object.keys(np).sort();this.checkInputs(np),this.checkInputShapeAndType(np),this.checkOutputs(rp);var lp=sp.map(function(pp){return ap.graph.nodes[pp]}),up=rp.map(function(pp){return ap.graph.nodes[parseNodeName(pp)[0]]}),cp=this.getCompilationKey(lp,up),dp=this.compiledMap.get(cp);dp==null&&(dp=this.compile(np,up),this.compiledMap.set(cp,dp));var fp={};return je(function(){var pp=new ExecutionContext(ap._weightMap,fp),hp=__assign$1({},ap.weightMap);Object.keys(np).forEach(function(yp){hp[yp]=[np[yp]]});for(var mp=ap.getFrozenTensorIds(hp),gp={},vp=0;vp<dp.length;vp++){var xp=dp[vp];if(!hp[xp.name]){var Sp=executeOp$16(xp,hp,pp);if(Sp instanceof Promise)throw new Error("The execution of the op '"+xp.op+"' returned a promise. Please use model.executeAsync() instead.");hp[xp.name]=Sp,ap.checkTensorForDisposal(xp.name,xp,hp,pp,mp,rp,gp)}}return rp.map(function(yp){return getTensor(yp,hp,pp)})})},_d.prototype.getFrozenTensorIds=function(np){var rp=[].concat.apply([],Object.keys(np).map(function(ap){return np[ap]}).map(function(ap){return ap.map(function(sp){return sp.id})}));return new Set(rp)},_d.prototype.checkTensorForDisposal=function(np,rp,ap,sp,lp,up,cp){rp.category!=="control"&&up.indexOf(np)===-1&&(ap[np].forEach(function(dp){dp!=null&&(cp[dp.id]=(cp[dp.id]||0)+rp.children.length)}),rp.inputs.forEach(function(dp){if(dp.category!=="control"){var fp=getTensorsForCurrentContenxt(dp.name,ap,sp);fp!=null&&fp.forEach(function(pp){if(pp&&!lp.has(pp.id)){var hp=cp[pp.id];hp===1?(pp.dispose(),delete cp[pp.id]):hp!=null&&cp[pp.id]--}})}}))},_d.prototype.executeAsync=function(np,rp){return __awaiter$7(this,void 0,void 0,function(){var ap,sp,lp,up,cp,dp,fp=this;return __generator$7(this,function(pp){switch(pp.label){case 0:return this.checkInputs(np),this.checkInputShapeAndType(np),this.checkOutputs(rp),ap={},sp=new ExecutionContext(this._weightMap,ap),[4,this.executeWithControlFlow(np,sp,rp)];case 1:return lp=pp.sent(),up=rp.map(function(hp){return getTensor(hp,lp,sp)}),cp=new Set(up.map(function(hp){return hp.id})),dp=new Set(Object.keys(np).map(function(hp){return np[hp].id})),Object.keys(lp).forEach(function(hp){lp[hp].forEach(function(mp){!mp||mp.isDisposed||cp.has(mp.id)||dp.has(mp.id)||fp.weightIds.indexOf(mp.id)!==-1||mp.dispose()})}),[2,up]}})})},_d.prototype.executeWithControlFlow=function(np,rp,ap){return __awaiter$7(this,void 0,void 0,function(){var sp,lp,up,cp,dp,fp,pp,hp,mp,gp,vp,xp,Sp,yp,bp,Ep,wp=this;return __generator$7(this,function(_p){switch(_p.label){case 0:sp=Object.keys(np),lp=sp.map(function(Cp){return wp.graph.nodes[Cp]}),up=ap.map(function(Cp){return wp.graph.nodes[parseNodeName(Cp)[0]]}),cp=getExecutionSubgraph(np,up,this.weightMap),dp=cp.usedNodes,fp=cp.missingInputs,pp=cp.dynamicNode,hp=cp.syncInputs,mp=lp.concat(this.graph.weights).map(function(Cp){return{node:Cp,contexts:rp.currentContext}}),gp=__assign$1({},this.weightMap),Object.keys(np).forEach(function(Cp){gp[Cp]=[np[Cp]]}),vp={},xp=this.getFrozenTensorIds(gp),Sp={},_p.label=1;case 1:return mp.length>0?(yp=this.processStack(lp,mp,rp,gp,Sp,xp,ap,vp,dp),[4,Promise.all(yp)]):[3,3];case 2:return _p.sent(),[3,1];case 3:if(pp==null&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead."),(bp=up.filter(function(Cp){return!isControlFlow(Cp)&&!getTensor(Cp.name,gp,rp)}).map(function(Cp){return Cp.name})).length>0)throw Ep="",pp!=null&&(Ep="Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs ["+hp+"]"),new Error("Cannot compute the outputs ["+bp+"] from the provided inputs ["+sp+"]. Consider providing the following inputs: ["+fp+"]. "+Ep);return[2,gp]}})})},_d.prototype.processStack=function(np,rp,ap,sp,lp,up,cp,dp,fp){for(var pp=this,hp=[],mp=function(){var vp=rp.pop();ap.currentContext=vp.contexts;var xp="";if(vp.node.op==="Enter"&&getParamValue("isConstant",vp.node,sp,ap)&&(xp=getNodeNameAndIndex(vp.node.name,ap)[0]),np.indexOf(vp.node)===-1){var Sp=executeOp$16(vp.node,sp,ap);xp||(xp=getNodeNameAndIndex(vp.node.name,ap)[0]);var yp=ap.currentContext;Sp instanceof Promise?hp.push(Sp.then(function(bp){return sp[xp]=bp,ap.currentContext=yp,pp.checkTensorForDisposal(xp,vp.node,sp,ap,up,cp,dp),pp.processChildNodes(vp.node,rp,ap,sp,lp,fp),bp})):(sp[xp]=Sp,gp.checkTensorForDisposal(xp,vp.node,sp,ap,up,cp,dp),gp.processChildNodes(vp.node,rp,ap,sp,lp,fp))}else gp.processChildNodes(vp.node,rp,ap,sp,lp,fp)},gp=this;rp.length>0;)mp();return hp},_d.prototype.processChildNodes=function(np,rp,ap,sp,lp,up){np.children.forEach(function(cp){var dp=getNodeNameAndIndex(cp.name,ap)[0];!lp[dp]&&up.has(cp.name)&&(cp.op==="Merge"?cp.inputNames.some(function(fp){return!!getTensor(fp,sp,ap)})&&(lp[dp]=!0,rp.push({contexts:ap.currentContext,node:cp})):cp.inputNames.every(function(fp){return!!getTensor(fp,sp,ap)})&&(lp[dp]=!0,rp.push({contexts:ap.currentContext,node:cp})))})},_d.prototype.dispose=function(){var np=this;Object.keys(this.weightMap).forEach(function(rp){return np.weightMap[rp].forEach(function(ap){return ap.dispose()})})},_d.prototype.checkInputShapeAndType=function(np){var rp=this;Object.keys(np).forEach(function(ap){var sp=np[ap],lp=rp.graph.nodes[ap];if(lp.attrParams.shape&&lp.attrParams.shape.value){var up=lp.attrParams.shape.value,cp=up.length===sp.shape.length&&sp.shape.every(function(dp,fp){return up[fp]===-1||up[fp]===dp});tt.assert(cp,function(){return"The shape of dict['"+lp.name+"'] provided in model.execute(dict) must be ["+up+"], but was ["+sp.shape+"]"})}lp.attrParams.dtype&&lp.attrParams.dtype.value&&tt.assert(sp.dtype===lp.attrParams.dtype.value,function(){return"The dtype of dict['"+lp.name+"'] provided in model.execute(dict) must be "+lp.attrParams.dtype.value+", but was "+sp.dtype})})},_d.prototype.checkInputs=function(np){var rp=this,ap=Object.keys(np).filter(function(sp){return!rp.graph.nodes[sp]});if(ap.length>0)throw new Error("The dict provided in model.execute(dict) has keys: ["+ap+"] that are not part of graph")},_d.prototype.checkOutputs=function(np){var rp=this;np.forEach(function(ap){var sp=parseNodeName(ap)[0];if(!rp.graph.nodes[sp])throw new Error("The output '"+ap+"' is not found in the graph")})},_d}(),TFHUB_SEARCH_PARAM="?tfjs-format=file",DEFAULT_MODEL_NAME="model.json",GraphModel=function(){function _d(np,rp){rp===void 0&&(rp={}),this.modelUrl=np,this.loadOptions=rp,this.version="n/a",rp==null&&(this.loadOptions={})}return Object.defineProperty(_d.prototype,"modelVersion",{get:function(){return this.version},enumerable:!0,configurable:!0}),Object.defineProperty(_d.prototype,"inputNodes",{get:function(){return this.executor.inputNodes},enumerable:!0,configurable:!0}),Object.defineProperty(_d.prototype,"outputNodes",{get:function(){return this.executor.outputNodes},enumerable:!0,configurable:!0}),Object.defineProperty(_d.prototype,"inputs",{get:function(){return this.executor.inputs},enumerable:!0,configurable:!0}),Object.defineProperty(_d.prototype,"outputs",{get:function(){return this.executor.outputs},enumerable:!0,configurable:!0}),Object.defineProperty(_d.prototype,"weights",{get:function(){return this.executor.weightMap},enumerable:!0,configurable:!0}),_d.prototype.findIOHandler=function(){var np=this.modelUrl;if(np.load!=null)this.handler=np;else if(this.loadOptions.requestInit!=null)this.handler=Sf.browserHTTPRequest(np,this.loadOptions);else{var rp=Sf.getLoadHandlers(np,this.loadOptions.onProgress);if(rp.length===0)rp.push(Sf.browserHTTPRequest(np,this.loadOptions));else if(rp.length>1)throw new Error("Found more than one ("+rp.length+") load handlers for URL '"+[np]+"'");this.handler=rp[0]}},_d.prototype.load=function(){return __awaiter$7(this,void 0,void 0,function(){var np,rp,ap;return __generator$7(this,function(sp){switch(sp.label){case 0:if(this.findIOHandler(),this.handler.load==null)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");return[4,this.handler.load()];case 1:return np=sp.sent(),rp=np.modelTopology,this.version=rp.versions.producer+"."+rp.versions.minConsumer,ap=Sf.decodeWeights(np.weightData,np.weightSpecs),this.executor=new GraphExecutor(OperationMapper.Instance.transformGraph(rp)),this.executor.weightMap=this.convertTensorMapToTensorsMap(ap),[2,!0]}})})},_d.prototype.predict=function(np,rp){return this.execute(np,this.outputNodes)},_d.prototype.normalizeInputs=function(np){if(!(np instanceof dt||Array.isArray(np)))return np;if((np=Array.isArray(np)?np:[np]).length!==this.inputNodes.length)throw new Error("Input tensor count mismatch,the graph model has "+this.inputNodes.length+" placeholders, while there are "+np.length+" input tensors.");return this.inputNodes.reduce(function(rp,ap,sp){return rp[ap]=np[sp],rp},{})},_d.prototype.normalizeOutputs=function(np){return np=np||this.outputNodes,Array.isArray(np)?np:[np]},_d.prototype.execute=function(np,rp){np=this.normalizeInputs(np),rp=this.normalizeOutputs(rp);var ap=this.executor.execute(np,rp);return ap.length>1?ap:ap[0]},_d.prototype.executeAsync=function(np,rp){return __awaiter$7(this,void 0,void 0,function(){var ap;return __generator$7(this,function(sp){switch(sp.label){case 0:return np=this.normalizeInputs(np),rp=this.normalizeOutputs(rp),[4,this.executor.executeAsync(np,rp)];case 1:return[2,(ap=sp.sent()).length>1?ap:ap[0]]}})})},_d.prototype.convertTensorMapToTensorsMap=function(np){return Object.keys(np).reduce(function(rp,ap){return rp[ap]=[np[ap]],rp},{})},_d.prototype.dispose=function(){this.executor.dispose()},_d}();function loadGraphModel(_d,np){return np===void 0&&(np={}),__awaiter$7(this,void 0,void 0,function(){var rp;return __generator$7(this,function(ap){switch(ap.label){case 0:if(_d==null)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");return np==null&&(np={}),np.fromTFHub&&_d.load==null&&(_d.endsWith("/")||(_d+="/"),_d=""+_d+DEFAULT_MODEL_NAME+TFHUB_SEARCH_PARAM),[4,(rp=new GraphModel(_d,np)).load()];case 1:return ap.sent(),[2,rp]}})})}var version$7="1.3.1";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var extendStatics=function(_d,np){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(rp,ap){rp.__proto__=ap}||function(rp,ap){for(var sp in ap)ap.hasOwnProperty(sp)&&(rp[sp]=ap[sp])})(_d,np)};function __extends$g(_d,np){function rp(){this.constructor=_d}extendStatics(_d,np),_d.prototype=np===null?Object.create(np):(rp.prototype=np.prototype,new rp)}function __awaiter$6(_d,np,rp,ap){return new(rp||(rp=Promise))(function(sp,lp){function up(fp){try{dp(ap.next(fp))}catch(pp){lp(pp)}}function cp(fp){try{dp(ap.throw(fp))}catch(pp){lp(pp)}}function dp(fp){fp.done?sp(fp.value):new rp(function(pp){pp(fp.value)}).then(up,cp)}dp((ap=ap.apply(_d,np||[])).next())})}function __generator$6(_d,np){var rp,ap,sp,lp,up={label:0,sent:function(){if(1&sp[0])throw sp[1];return sp[1]},trys:[],ops:[]};return lp={next:cp(0),throw:cp(1),return:cp(2)},typeof Symbol=="function"&&(lp[Symbol.iterator]=function(){return this}),lp;function cp(dp){return function(fp){return function(pp){if(rp)throw new TypeError("Generator is already executing.");for(;up;)try{if(rp=1,ap&&(sp=2&pp[0]?ap.return:pp[0]?ap.throw||((sp=ap.return)&&sp.call(ap),0):ap.next)&&!(sp=sp.call(ap,pp[1])).done)return sp;switch(ap=0,sp&&(pp=[2&pp[0],sp.value]),pp[0]){case 0:case 1:sp=pp;break;case 4:return up.label++,{value:pp[1],done:!1};case 5:up.label++,ap=pp[1],pp=[0];continue;case 7:pp=up.ops.pop(),up.trys.pop();continue;default:if(!(sp=(sp=up.trys).length>0&&sp[sp.length-1])&&(pp[0]===6||pp[0]===2)){up=0;continue}if(pp[0]===3&&(!sp||pp[1]>sp[0]&&pp[1]<sp[3])){up.label=pp[1];break}if(pp[0]===6&&up.label<sp[1]){up.label=sp[1],sp=pp;break}if(sp&&up.label<sp[2]){up.label=sp[2],up.ops.push(pp);break}sp[2]&&up.ops.pop(),up.trys.pop();continue}pp=np.call(_d,up)}catch(hp){pp=[6,hp],ap=0}finally{rp=sp=0}if(5&pp[0])throw pp[1];return{value:pp[0]?pp[1]:void 0,done:!0}}([dp,fp])}}}function createCommonjsModule$1(_d,np){return _d(np={exports:{}},np.exports),np.exports}var alea$2=createCommonjsModule$1(function(_d){(function(np,rp,ap){function sp(up,cp){return cp.c=up.c,cp.s0=up.s0,cp.s1=up.s1,cp.s2=up.s2,cp}function lp(up,cp){var dp=new function(hp){var mp,gp=this,vp=(mp=4022871197,function(xp){xp=xp.toString();for(var Sp=0;Sp<xp.length;Sp++){var yp=.02519603282416938*(mp+=xp.charCodeAt(Sp));yp-=mp=yp>>>0,mp=(yp*=mp)>>>0,mp+=4294967296*(yp-=mp)}return 23283064365386963e-26*(mp>>>0)});gp.next=function(){var xp=2091639*gp.s0+23283064365386963e-26*gp.c;return gp.s0=gp.s1,gp.s1=gp.s2,gp.s2=xp-(gp.c=0|xp)},gp.c=1,gp.s0=vp(" "),gp.s1=vp(" "),gp.s2=vp(" "),gp.s0-=vp(hp),gp.s0<0&&(gp.s0+=1),gp.s1-=vp(hp),gp.s1<0&&(gp.s1+=1),gp.s2-=vp(hp),gp.s2<0&&(gp.s2+=1),vp=null}(up),fp=cp&&cp.state,pp=dp.next;return pp.int32=function(){return 4294967296*dp.next()|0},pp.double=function(){return pp()+11102230246251565e-32*(2097152*pp()|0)},pp.quick=pp,fp&&(typeof fp=="object"&&sp(fp,dp),pp.state=function(){return sp(dp,{})}),pp}rp&&rp.exports?rp.exports=lp:ap&&ap.amd?ap(function(){return lp}):this.alea=lp})(0,_d,!1)}),xor128$2=createCommonjsModule$1(function(_d){(function(np,rp,ap){function sp(up,cp){return cp.x=up.x,cp.y=up.y,cp.z=up.z,cp.w=up.w,cp}function lp(up,cp){var dp=new function(hp){var mp=this,gp="";mp.x=0,mp.y=0,mp.z=0,mp.w=0,mp.next=function(){var xp=mp.x^mp.x<<11;return mp.x=mp.y,mp.y=mp.z,mp.z=mp.w,mp.w^=mp.w>>>19^xp^xp>>>8},hp===(0|hp)?mp.x=hp:gp+=hp;for(var vp=0;vp<gp.length+64;vp++)mp.x^=0|gp.charCodeAt(vp),mp.next()}(up),fp=cp&&cp.state,pp=function(){return(dp.next()>>>0)/4294967296};return pp.double=function(){do var hp=((dp.next()>>>11)+(dp.next()>>>0)/4294967296)/2097152;while(hp===0);return hp},pp.int32=dp.next,pp.quick=pp,fp&&(typeof fp=="object"&&sp(fp,dp),pp.state=function(){return sp(dp,{})}),pp}rp&&rp.exports?rp.exports=lp:ap&&ap.amd?ap(function(){return lp}):this.xor128=lp})(0,_d,!1)}),xorwow$2=createCommonjsModule$1(function(_d){(function(np,rp,ap){function sp(up,cp){return cp.x=up.x,cp.y=up.y,cp.z=up.z,cp.w=up.w,cp.v=up.v,cp.d=up.d,cp}function lp(up,cp){var dp=new function(hp){var mp=this,gp="";mp.next=function(){var xp=mp.x^mp.x>>>2;return mp.x=mp.y,mp.y=mp.z,mp.z=mp.w,mp.w=mp.v,(mp.d=mp.d+362437|0)+(mp.v=mp.v^mp.v<<4^xp^xp<<1)|0},mp.x=0,mp.y=0,mp.z=0,mp.w=0,mp.v=0,hp===(0|hp)?mp.x=hp:gp+=hp;for(var vp=0;vp<gp.length+64;vp++)mp.x^=0|gp.charCodeAt(vp),vp==gp.length&&(mp.d=mp.x<<10^mp.x>>>4),mp.next()}(up),fp=cp&&cp.state,pp=function(){return(dp.next()>>>0)/4294967296};return pp.double=function(){do var hp=((dp.next()>>>11)+(dp.next()>>>0)/4294967296)/2097152;while(hp===0);return hp},pp.int32=dp.next,pp.quick=pp,fp&&(typeof fp=="object"&&sp(fp,dp),pp.state=function(){return sp(dp,{})}),pp}rp&&rp.exports?rp.exports=lp:ap&&ap.amd?ap(function(){return lp}):this.xorwow=lp})(0,_d,!1)}),xorshift7$2=createCommonjsModule$1(function(_d){(function(np,rp,ap){function sp(up,cp){return cp.x=up.x.slice(),cp.i=up.i,cp}function lp(up,cp){up==null&&(up=+new Date);var dp=new function(hp){var mp=this;mp.next=function(){var gp,vp,xp=mp.x,Sp=mp.i;return gp=xp[Sp],vp=(gp^=gp>>>7)^gp<<24,vp^=(gp=xp[Sp+1&7])^gp>>>10,vp^=(gp=xp[Sp+3&7])^gp>>>3,vp^=(gp=xp[Sp+4&7])^gp<<7,gp=xp[Sp+7&7],vp^=(gp^=gp<<13)^gp<<9,xp[Sp]=vp,mp.i=Sp+1&7,vp},function(gp,vp){var xp,Sp=[];if(vp===(0|vp))Sp[0]=vp;else for(vp=""+vp,xp=0;xp<vp.length;++xp)Sp[7&xp]=Sp[7&xp]<<15^vp.charCodeAt(xp)+Sp[xp+1&7]<<13;for(;Sp.length<8;)Sp.push(0);for(xp=0;xp<8&&Sp[xp]===0;++xp);for(xp==8?Sp[7]=-1:Sp[xp],gp.x=Sp,gp.i=0,xp=256;xp>0;--xp)gp.next()}(mp,hp)}(up),fp=cp&&cp.state,pp=function(){return(dp.next()>>>0)/4294967296};return pp.double=function(){do var hp=((dp.next()>>>11)+(dp.next()>>>0)/4294967296)/2097152;while(hp===0);return hp},pp.int32=dp.next,pp.quick=pp,fp&&(fp.x&&sp(fp,dp),pp.state=function(){return sp(dp,{})}),pp}rp&&rp.exports?rp.exports=lp:ap&&ap.amd?ap(function(){return lp}):this.xorshift7=lp})(0,_d,!1)}),xor4096$2=createCommonjsModule$1(function(_d){(function(np,rp,ap){function sp(up,cp){return cp.i=up.i,cp.w=up.w,cp.X=up.X.slice(),cp}function lp(up,cp){up==null&&(up=+new Date);var dp=new function(hp){var mp=this;mp.next=function(){var gp,vp,xp=mp.w,Sp=mp.X,yp=mp.i;return mp.w=xp=xp+1640531527|0,vp=Sp[yp+34&127],gp=Sp[yp=yp+1&127],vp^=vp<<13,gp^=gp<<17,vp^=vp>>>15,gp^=gp>>>12,vp=Sp[yp]=vp^gp,mp.i=yp,vp+(xp^xp>>>16)|0},function(gp,vp){var xp,Sp,yp,bp,Ep,wp=[],_p=128;for(vp===(0|vp)?(Sp=vp,vp=null):(vp+="\0",Sp=0,_p=Math.max(_p,vp.length)),yp=0,bp=-32;bp<_p;++bp)vp&&(Sp^=vp.charCodeAt((bp+32)%vp.length)),bp===0&&(Ep=Sp),Sp^=Sp<<10,Sp^=Sp>>>15,Sp^=Sp<<4,Sp^=Sp>>>13,bp>=0&&(Ep=Ep+1640531527|0,yp=(xp=wp[127&bp]^=Sp+Ep)==0?yp+1:0);for(yp>=128&&(wp[127&(vp&&vp.length||0)]=-1),yp=127,bp=512;bp>0;--bp)Sp=wp[yp+34&127],xp=wp[yp=yp+1&127],Sp^=Sp<<13,xp^=xp<<17,Sp^=Sp>>>15,xp^=xp>>>12,wp[yp]=Sp^xp;gp.w=Ep,gp.X=wp,gp.i=yp}(mp,hp)}(up),fp=cp&&cp.state,pp=function(){return(dp.next()>>>0)/4294967296};return pp.double=function(){do var hp=((dp.next()>>>11)+(dp.next()>>>0)/4294967296)/2097152;while(hp===0);return hp},pp.int32=dp.next,pp.quick=pp,fp&&(fp.X&&sp(fp,dp),pp.state=function(){return sp(dp,{})}),pp}rp&&rp.exports?rp.exports=lp:ap&&ap.amd?ap(function(){return lp}):this.xor4096=lp})(0,_d,!1)}),tychei$2=createCommonjsModule$1(function(_d){(function(np,rp,ap){function sp(up,cp){return cp.a=up.a,cp.b=up.b,cp.c=up.c,cp.d=up.d,cp}function lp(up,cp){var dp=new function(hp){var mp=this,gp="";mp.next=function(){var xp=mp.b,Sp=mp.c,yp=mp.d,bp=mp.a;return xp=xp<<25^xp>>>7^Sp,Sp=Sp-yp|0,yp=yp<<24^yp>>>8^bp,bp=bp-xp|0,mp.b=xp=xp<<20^xp>>>12^Sp,mp.c=Sp=Sp-yp|0,mp.d=yp<<16^Sp>>>16^bp,mp.a=bp-xp|0},mp.a=0,mp.b=0,mp.c=-1640531527,mp.d=1367130551,hp===Math.floor(hp)?(mp.a=hp/4294967296|0,mp.b=0|hp):gp+=hp;for(var vp=0;vp<gp.length+20;vp++)mp.b^=0|gp.charCodeAt(vp),mp.next()}(up),fp=cp&&cp.state,pp=function(){return(dp.next()>>>0)/4294967296};return pp.double=function(){do var hp=((dp.next()>>>11)+(dp.next()>>>0)/4294967296)/2097152;while(hp===0);return hp},pp.int32=dp.next,pp.quick=pp,fp&&(typeof fp=="object"&&sp(fp,dp),pp.state=function(){return sp(dp,{})}),pp}rp&&rp.exports?rp.exports=lp:ap&&ap.amd?ap(function(){return lp}):this.tychei=lp})(0,_d,!1)}),seedrandom$3=createCommonjsModule$1(function(_d){(function(np,rp){var ap,sp=this,lp=256,up=6,cp="random",dp=rp.pow(lp,up),fp=rp.pow(2,52),pp=2*fp,hp=lp-1;function mp(Sp,yp,bp){var Ep=[],wp=vp(function $p(Rp,Pp){var Op,jp=[],Mp=typeof Rp;if(Pp&&Mp=="object")for(Op in Rp)try{jp.push($p(Rp[Op],Pp-1))}catch{}return jp.length?jp:Mp=="string"?Rp:Rp+"\0"}((yp=yp==1?{entropy:!0}:yp||{}).entropy?[Sp,xp(np)]:Sp??function(){try{var $p;return ap&&($p=ap.randomBytes)?$p=$p(lp):($p=new Uint8Array(lp),(sp.crypto||sp.msCrypto).getRandomValues($p)),xp($p)}catch{var Rp=sp.navigator,Pp=Rp&&Rp.plugins;return[+new Date,sp,Pp,sp.screen,xp(np)]}}(),3),Ep),_p=new function($p){var Rp,Pp=$p.length,Op=this,jp=0,Mp=Op.i=Op.j=0,Ap=Op.S=[];for(Pp||($p=[Pp++]);jp<lp;)Ap[jp]=jp++;for(jp=0;jp<lp;jp++)Ap[jp]=Ap[Mp=hp&Mp+$p[jp%Pp]+(Rp=Ap[jp])],Ap[Mp]=Rp;(Op.g=function(Dp){for(var Fp,Ip=0,kp=Op.i,Tp=Op.j,Np=Op.S;Dp--;)Fp=Np[kp=hp&kp+1],Ip=Ip*lp+Np[hp&(Np[kp]=Np[Tp=hp&Tp+Fp])+(Np[Tp]=Fp)];return Op.i=kp,Op.j=Tp,Ip})(lp)}(Ep),Cp=function(){for(var $p=_p.g(up),Rp=dp,Pp=0;$p<fp;)$p=($p+Pp)*lp,Rp*=lp,Pp=_p.g(1);for(;$p>=pp;)$p/=2,Rp/=2,Pp>>>=1;return($p+Pp)/Rp};return Cp.int32=function(){return 0|_p.g(4)},Cp.quick=function(){return _p.g(4)/4294967296},Cp.double=Cp,vp(xp(_p.S),np),(yp.pass||bp||function($p,Rp,Pp,Op){return Op&&(Op.S&&gp(Op,_p),$p.state=function(){return gp(_p,{})}),Pp?(rp[cp]=$p,Rp):$p})(Cp,wp,"global"in yp?yp.global:this==rp,yp.state)}function gp(Sp,yp){return yp.i=Sp.i,yp.j=Sp.j,yp.S=Sp.S.slice(),yp}function vp(Sp,yp){for(var bp,Ep=Sp+"",wp=0;wp<Ep.length;)yp[hp&wp]=hp&(bp^=19*yp[hp&wp])+Ep.charCodeAt(wp++);return xp(yp)}function xp(Sp){return String.fromCharCode.apply(0,Sp)}if(rp["seed"+cp]=mp,vp(rp.random(),np),_d.exports){_d.exports=mp;try{ap=require("crypto")}catch{}}})([],Math)});seedrandom$3.alea=alea$2,seedrandom$3.xor128=xor128$2,seedrandom$3.xorwow=xorwow$2,seedrandom$3.xorshift7=xorshift7$2,seedrandom$3.xor4096=xor4096$2,seedrandom$3.tychei=tychei$2;var seedrandom$1$1=seedrandom$3,seedrandom_1=seedrandom$1$1.alea;function deepMap(_d,np){return deepMapInternal(_d,np)}function deepMapInternal(_d,np,rp,ap){if(rp===void 0&&(rp=new Map),ap===void 0&&(ap=new Set),_d==null)return null;if(ap.has(_d))throw new Error("Circular references are not supported.");if(rp.has(_d))return rp.get(_d);var sp=np(_d);if(sp.recurse&&sp.value!==null)throw new Error("A deep map function may not return both a value and recurse=true.");if(sp.recurse){if(isIterable(_d)){var lp=Array.isArray(_d)?[]:{};for(var up in ap.add(_d),_d){var cp=deepMapInternal(_d[up],np,rp,ap);lp[up]=cp}return ap.delete(_d),lp}throw new Error("Can't recurse into non-iterable type: "+_d)}return rp.set(_d,sp.value),sp.value}function deepZip(_d,np){return np===void 0&&(np=zipToList),deepZipInternal(_d,np)}function deepZipInternal(_d,np,rp){rp===void 0&&(rp=new Set);var ap=_d[0];if(rp.has(ap))throw new Error("Circular references are not supported.");var sp=np(_d);if(sp.recurse&&sp.value!==null)throw new Error("A deep zip function may not return both a value and recurse=true.");if(sp.recurse){if(isIterable(ap)){var lp=Array.isArray(ap)?[]:{};rp.add(ap);var up=function(dp){var fp=deepZipInternal(_d.map(function(pp){return pp[dp]}),np,rp);lp[dp]=fp};for(var cp in ap)up(cp);return rp.delete(ap),lp}throw new Error("Can't recurse into non-iterable type: "+ap)}return sp.value}function zipToList(_d){return _d===null?null:isIterable(_d[0])?{value:null,recurse:!0}:{value:_d,recurse:!1}}function deepMapAndAwaitAll(_d,np){return __awaiter$6(this,void 0,void 0,function(){var rp,ap,sp,lp,up,cp;return __generator$6(this,function(dp){switch(dp.label){case 0:rp=new Map,deepMapInternal(_d,np,rp),ap=0,sp=Array.from(rp.keys()),dp.label=1;case 1:return ap<sp.length?(lp=sp[ap],(up=rp.get(lp))instanceof Promise?[4,up]:[3,3]):[3,4];case 2:cp=dp.sent(),rp.set(lp,cp),dp.label=3;case 3:return ap++,[3,1];case 4:return[2,deepMapInternal(_d,np,rp)]}})})}function isIterable(_d){return _d!=null&&!ArrayBuffer.isView(_d)&&(Array.isArray(_d)||typeof _d=="object"&&!(_d instanceof dt))}function canTensorify(_d){return _d==null||isPrimitive(_d)||Array.isArray(_d)||typeof _d=="object"&&_d instanceof dt||tt.isTypedArray(_d)}function isPrimitive(_d){return _d===null||typeof _d!="object"&&typeof _d!="function"}function deepClone(_d){return deepMap(_d,cloneIfTensor)}function cloneIfTensor(_d){return _d instanceof dt?{value:_d.clone(),recurse:!1}:isIterable(_d)?{value:null,recurse:!0}:{value:_d,recurse:!1}}var RingBuffer=function(){function _d(np){if(this.capacity=np,this.begin=0,this.end=0,np==null)throw new RangeError("Can't create a ring buffer of unknown capacity.");if(np<1)throw new RangeError("Can't create ring buffer of capacity < 1.");this.data=new Array(np),this.doubledCapacity=2*np}return _d.prototype.wrap=function(np){for(;np<0;)np+=this.doubledCapacity;return np%this.doubledCapacity},_d.prototype.get=function(np){if(np<0)throw new RangeError("Can't get item at a negative index.");return this.data[np%this.capacity]},_d.prototype.set=function(np,rp){if(np<0)throw new RangeError("Can't set item at a negative index.");this.data[np%this.capacity]=rp},_d.prototype.length=function(){var np=this.end-this.begin;return np<0&&(np=this.doubledCapacity+np),np},_d.prototype.isFull=function(){return this.length()===this.capacity},_d.prototype.isEmpty=function(){return this.length()===0},_d.prototype.push=function(np){if(this.isFull())throw new RangeError("Ring buffer is full.");this.set(this.end,np),this.end=this.wrap(this.end+1)},_d.prototype.pushAll=function(np){for(var rp=0,ap=np;rp<ap.length;rp++){var sp=ap[rp];this.push(sp)}},_d.prototype.pop=function(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);var np=this.get(this.end);return this.set(this.end,void 0),np},_d.prototype.unshift=function(np){if(this.isFull())throw new RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,np)},_d.prototype.shift=function(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");var np=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),np},_d.prototype.shuffleExcise=function(np){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");var rp=this.wrap(this.begin+np),ap=this.get(rp);return this.set(rp,this.pop()),ap},_d}(),GrowingRingBuffer=function(_d){function np(){return _d.call(this,np.INITIAL_CAPACITY)||this}return __extends$g(np,_d),np.prototype.isFull=function(){return!1},np.prototype.push=function(rp){_d.prototype.isFull.call(this)&&this.expand(),_d.prototype.push.call(this,rp)},np.prototype.unshift=function(rp){_d.prototype.isFull.call(this)&&this.expand(),_d.prototype.unshift.call(this,rp)},np.prototype.expand=function(){for(var rp=2*this.capacity,ap=new Array(rp),sp=this.length(),lp=0;lp<sp;lp++)ap[lp]=this.get(this.wrap(this.begin+lp));this.data=ap,this.capacity=rp,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=sp},np.INITIAL_CAPACITY=32,np}(RingBuffer);function iteratorFromItems(_d){return new ArrayIterator(_d)}function iteratorFromFunction(_d){return new FunctionCallIterator(_d)}function iteratorFromConcatenated(_d,np){return new ChainedIterator(_d,np)}function iteratorFromZipped(_d,np){return np===void 0&&(np=ZipMismatchMode.FAIL),new ZipIterator(_d,np)}var ZipMismatchMode,LazyIterator=function(){function _d(){}return _d.prototype.toArray=function(){return __awaiter$6(this,void 0,void 0,function(){var np,rp;return __generator$6(this,function(ap){switch(ap.label){case 0:return np=[],[4,this.next()];case 1:rp=ap.sent(),ap.label=2;case 2:return rp.done?[3,4]:(np.push(rp.value),[4,this.next()]);case 3:return rp=ap.sent(),[3,2];case 4:return[2,np]}})})},_d.prototype.toArrayForTest=function(){return __awaiter$6(this,void 0,void 0,function(){var np,rp,ap;return __generator$6(this,function(sp){switch(sp.label){case 0:return np=this.prefetch(100),rp=[],[4,np.next()];case 1:ap=sp.sent(),sp.label=2;case 2:return ap.done?[3,4]:(rp.push(ap.value),[4,np.next()]);case 3:return ap=sp.sent(),[3,2];case 4:return[2,rp]}})})},_d.prototype.resolveFully=function(){return __awaiter$6(this,void 0,void 0,function(){var np;return __generator$6(this,function(rp){switch(rp.label){case 0:return[4,this.next()];case 1:np=rp.sent(),rp.label=2;case 2:return np.done?[3,4]:[4,this.next()];case 3:return np=rp.sent(),[3,2];case 4:return[2]}})})},_d.prototype.resolveWhile=function(np){return __awaiter$6(this,void 0,void 0,function(){var rp,ap;return __generator$6(this,function(sp){switch(sp.label){case 0:return[4,this.next()];case 1:rp=sp.sent(),ap=np(rp.value),sp.label=2;case 2:return rp.done||!ap?[3,4]:[4,this.next()];case 3:return rp=sp.sent(),ap=np(rp.value),[3,2];case 4:return[2]}})})},_d.prototype.handleErrors=function(np){return new ErrorHandlingLazyIterator(this,np)},_d.prototype.filter=function(np){return new FilterIterator(this,np)},_d.prototype.map=function(np){return new MapIterator(this,np)},_d.prototype.mapAsync=function(np){return new AsyncMapIterator(this,np)},_d.prototype.serialMapAsync=function(np){return new AsyncMapIterator(this,np).serial()},_d.prototype.flatmap=function(np){return new FlatmapIterator(this,np)},_d.prototype.forEachAsync=function(np){return __awaiter$6(this,void 0,void 0,function(){return __generator$6(this,function(rp){return[2,this.map(np).resolveFully()]})})},_d.prototype.serialForEach=function(np){return __awaiter$6(this,void 0,void 0,function(){return __generator$6(this,function(rp){return[2,this.serialMapAsync(np).resolveWhile(function(ap){return ap===!0})]})})},_d.prototype.rowMajorBatch=function(np,rp){return rp===void 0&&(rp=!0),new RowMajorBatchIterator(this,np,rp)},_d.prototype.columnMajorBatch=function(np,rp,ap){return rp===void 0&&(rp=!0),ap===void 0&&(ap=zipToList),this.rowMajorBatch(np,rp).map(function(sp){return deepZip(sp,ap)})},_d.prototype.concatenate=function(np,rp){return new ChainedIterator(iteratorFromItems([this,np]),rp)},_d.prototype.take=function(np){return np<0||np==null?this:new TakeIterator(this,np)},_d.prototype.skip=function(np){return np<0||np==null?this:new SkipIterator(this,np)},_d.prototype.prefetch=function(np){return new PrefetchIterator(this,np)},_d.prototype.shuffle=function(np,rp){return new ShuffleIterator(this,np,rp)},_d.prototype.serial=function(){return new SerialIterator(this)},_d}(),ArrayIterator=function(_d){function np(rp){var ap=_d.call(this)||this;return ap.items=rp,ap.trav=0,ap}return __extends$g(np,_d),np.prototype.summary=function(){return"Array of "+this.items.length+" items"},np.prototype.next=function(){return __awaiter$6(this,void 0,void 0,function(){var rp;return __generator$6(this,function(ap){return this.trav>=this.items.length?[2,{value:null,done:!0}]:(rp=this.items[this.trav],this.trav++,[2,{value:deepClone(rp),done:!1}])})})},np}(LazyIterator),FunctionCallIterator=function(_d){function np(rp){var ap=_d.call(this)||this;return ap.nextFn=rp,ap}return __extends$g(np,_d),np.prototype.summary=function(){return"Function call"},np.prototype.next=function(){return __awaiter$6(this,void 0,void 0,function(){return __generator$6(this,function(rp){try{return[2,this.nextFn()]}catch(ap){throw ap.message="Error thrown while iterating through a dataset: "+ap.message,ap}return[2]})})},np}(LazyIterator),SerialIterator=function(_d){function np(rp){var ap=_d.call(this)||this;return ap.upstream=rp,ap.lastRead=Promise.resolve({value:null,done:!1}),ap}return __extends$g(np,_d),np.prototype.summary=function(){return this.upstream.summary()+" -> Serial"},np.prototype.next=function(){return __awaiter$6(this,void 0,void 0,function(){var rp=this;return __generator$6(this,function(ap){return this.lastRead=this.lastRead.then(function(){return rp.serialNext()}),[2,this.lastRead]})})},np.prototype.serialNext=function(){return __awaiter$6(this,void 0,void 0,function(){return __generator$6(this,function(rp){return[2,this.upstream.next()]})})},np}(LazyIterator),SkipIterator=function(_d){function np(rp,ap){var sp=_d.call(this)||this;return sp.upstream=rp,sp.maxCount=ap,sp.count=0,sp.lastRead=Promise.resolve({value:null,done:!1}),sp}return __extends$g(np,_d),np.prototype.summary=function(){return this.upstream.summary()+" -> Skip"},np.prototype.next=function(){return __awaiter$6(this,void 0,void 0,function(){var rp=this;return __generator$6(this,function(ap){return this.lastRead=this.lastRead.then(function(){return rp.serialNext()}),[2,this.lastRead]})})},np.prototype.serialNext=function(){return __awaiter$6(this,void 0,void 0,function(){var rp;return __generator$6(this,function(ap){switch(ap.label){case 0:return this.count++<this.maxCount?[4,this.upstream.next()]:[3,2];case 1:return(rp=ap.sent()).done?[2,rp]:(Xe(rp.value),[3,0]);case 2:return[2,this.upstream.next()]}})})},np}(LazyIterator),TakeIterator=function(_d){function np(rp,ap){var sp=_d.call(this)||this;return sp.upstream=rp,sp.maxCount=ap,sp.count=0,sp}return __extends$g(np,_d),np.prototype.summary=function(){return this.upstream.summary()+" -> Take"},np.prototype.next=function(){return __awaiter$6(this,void 0,void 0,function(){return __generator$6(this,function(rp){return this.count++>=this.maxCount?[2,{value:null,done:!0}]:[2,this.upstream.next()]})})},np}(LazyIterator),RowMajorBatchIterator=function(_d){function np(rp,ap,sp){sp===void 0&&(sp=!0);var lp=_d.call(this)||this;return lp.upstream=rp,lp.batchSize=ap,lp.enableSmallLastBatch=sp,lp.lastRead=Promise.resolve({value:null,done:!1}),lp}return __extends$g(np,_d),np.prototype.summary=function(){return this.upstream.summary()+" -> RowMajorBatch"},np.prototype.next=function(){return __awaiter$6(this,void 0,void 0,function(){var rp=this;return __generator$6(this,function(ap){return this.lastRead=this.lastRead.then(function(){return rp.serialNext()}),[2,this.lastRead]})})},np.prototype.serialNext=function(){return __awaiter$6(this,void 0,void 0,function(){var rp,ap;return __generator$6(this,function(sp){switch(sp.label){case 0:rp=[],sp.label=1;case 1:return rp.length<this.batchSize?[4,this.upstream.next()]:[3,3];case 2:return(ap=sp.sent()).done?this.enableSmallLastBatch&&rp.length>0?[2,{value:rp,done:!1}]:[2,{value:null,done:!0}]:(rp.push(ap.value),[3,1]);case 3:return[2,{value:rp,done:!1}]}})})},np}(LazyIterator),FilterIterator=function(_d){function np(rp,ap){var sp=_d.call(this)||this;return sp.upstream=rp,sp.predicate=ap,sp.lastRead=Promise.resolve({value:null,done:!1}),sp}return __extends$g(np,_d),np.prototype.summary=function(){return this.upstream.summary()+" -> Filter"},np.prototype.next=function(){return __awaiter$6(this,void 0,void 0,function(){var rp=this;return __generator$6(this,function(ap){return this.lastRead=this.lastRead.then(function(){return rp.serialNext()}),[2,this.lastRead]})})},np.prototype.serialNext=function(){return __awaiter$6(this,void 0,void 0,function(){var rp;return __generator$6(this,function(ap){switch(ap.label){case 0:return[4,this.upstream.next()];case 1:return(rp=ap.sent()).done||this.predicate(rp.value)?[2,rp]:(Xe(rp.value),[3,0]);case 2:return[2]}})})},np}(LazyIterator),MapIterator=function(_d){function np(rp,ap){var sp=_d.call(this)||this;return sp.upstream=rp,sp.transform=ap,sp}return __extends$g(np,_d),np.prototype.summary=function(){return this.upstream.summary()+" -> Map"},np.prototype.next=function(){return __awaiter$6(this,void 0,void 0,function(){var rp,ap,sp,lp,up,cp,dp;return __generator$6(this,function(fp){switch(fp.label){case 0:return[4,this.upstream.next()];case 1:if((rp=fp.sent()).done)return[2,{value:null,done:!0}];for(ap=At.getTensorsInContainer(rp.value),sp=this.transform(rp.value),lp=At.getTensorsInContainer(sp),up=0,cp=ap;up<cp.length;up++)dp=cp[up],At.isTensorInList(dp,lp)||dp.dispose();return[2,{value:sp,done:!1}]}})})},np}(LazyIterator),ErrorHandlingLazyIterator=function(_d){function np(rp,ap){var sp=_d.call(this)||this;return sp.upstream=rp,sp.handler=ap,sp.count=0,sp.lastRead=Promise.resolve({value:null,done:!1}),sp}return __extends$g(np,_d),np.prototype.summary=function(){return this.upstream.summary()+" -> handleErrors"},np.prototype.next=function(){return __awaiter$6(this,void 0,void 0,function(){var rp=this;return __generator$6(this,function(ap){return this.lastRead=this.lastRead.then(function(){return rp.serialNext()}),[2,this.lastRead]})})},np.prototype.serialNext=function(){return __awaiter$6(this,void 0,void 0,function(){var rp;return __generator$6(this,function(ap){switch(ap.label){case 0:ap.label=1;case 1:return ap.trys.push([1,3,,4]),[4,this.upstream.next()];case 2:return[2,ap.sent()];case 3:return rp=ap.sent(),this.handler(rp)?[3,4]:[2,{value:null,done:!0}];case 4:return[3,0];case 5:return[2]}})})},np}(LazyIterator),AsyncMapIterator=function(_d){function np(rp,ap){var sp=_d.call(this)||this;return sp.upstream=rp,sp.transform=ap,sp}return __extends$g(np,_d),np.prototype.summary=function(){return this.upstream.summary()+" -> AsyncMap"},np.prototype.next=function(){return __awaiter$6(this,void 0,void 0,function(){var rp,ap,sp,lp,up,cp,dp;return __generator$6(this,function(fp){switch(fp.label){case 0:return[4,this.upstream.next()];case 1:return(rp=fp.sent()).done?[2,{value:null,done:!0}]:(ap=At.getTensorsInContainer(rp.value),[4,this.transform(rp.value)]);case 2:for(sp=fp.sent(),lp=At.getTensorsInContainer(sp),up=0,cp=ap;up<cp.length;up++)dp=cp[up],At.isTensorInList(dp,lp)||dp.dispose();return[2,{value:sp,done:!1}]}})})},np}(LazyIterator),OneToManyIterator=function(_d){function np(){var rp=_d.call(this)||this;return rp.outputQueue=new GrowingRingBuffer,rp.lastRead=Promise.resolve({value:null,done:!1}),rp}return __extends$g(np,_d),np.prototype.next=function(){return __awaiter$6(this,void 0,void 0,function(){var rp=this;return __generator$6(this,function(ap){return this.lastRead=this.lastRead.then(function(){return rp.serialNext()}),[2,this.lastRead]})})},np.prototype.serialNext=function(){return __awaiter$6(this,void 0,void 0,function(){return __generator$6(this,function(rp){switch(rp.label){case 0:return this.outputQueue.length()!==0?[3,2]:[4,this.pump()];case 1:return rp.sent()?[3,0]:[2,{value:null,done:!0}];case 2:return[2,{value:this.outputQueue.shift(),done:!1}]}})})},np}(LazyIterator),FlatmapIterator=function(_d){function np(rp,ap){var sp=_d.call(this)||this;return sp.upstream=rp,sp.transform=ap,sp}return __extends$g(np,_d),np.prototype.summary=function(){return this.upstream.summary()+" -> Flatmap"},np.prototype.pump=function(){return __awaiter$6(this,void 0,void 0,function(){var rp,ap,sp,lp,up,cp,dp;return __generator$6(this,function(fp){switch(fp.label){case 0:return[4,this.upstream.next()];case 1:if((rp=fp.sent()).done)return[2,!1];for(ap=At.getTensorsInContainer(rp.value),sp=this.transform(rp.value),lp=At.getTensorsInContainer(sp),this.outputQueue.pushAll(sp),up=0,cp=ap;up<cp.length;up++)dp=cp[up],At.isTensorInList(dp,lp)||dp.dispose();return[2,!0]}})})},np}(OneToManyIterator),ChainedIterator=function(_d){function np(rp,ap){var sp=_d.call(this)||this;return sp.baseErrorHandler=ap,sp.lastRead=null,sp.iterator=null,sp.moreIterators=rp,sp}return __extends$g(np,_d),np.prototype.summary=function(){return"TODO: fill in upstream of chained summaries -> Chained"},np.prototype.next=function(){return __awaiter$6(this,void 0,void 0,function(){return __generator$6(this,function(rp){return this.lastRead=this.readFromChain(this.lastRead),[2,this.lastRead]})})},np.prototype.readFromChain=function(rp){return __awaiter$6(this,void 0,void 0,function(){var ap,sp;return __generator$6(this,function(lp){switch(lp.label){case 0:return[4,rp];case 1:return lp.sent(),this.iterator!=null?[3,3]:[4,this.moreIterators.next()];case 2:if((ap=lp.sent()).done)return[2,{value:null,done:!0}];this.iterator=ap.value,this.baseErrorHandler!=null&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler)),lp.label=3;case 3:return[4,this.iterator.next()];case 4:return(sp=lp.sent()).done?(this.iterator=null,[2,this.readFromChain(rp)]):[2,sp]}})})},np}(LazyIterator);(function(_d){_d[_d.FAIL=0]="FAIL",_d[_d.SHORTEST=1]="SHORTEST",_d[_d.LONGEST=2]="LONGEST"})(ZipMismatchMode||(ZipMismatchMode={}));var ZipIterator=function(_d){function np(rp,ap){ap===void 0&&(ap=ZipMismatchMode.FAIL);var sp=_d.call(this)||this;return sp.iterators=rp,sp.mismatchMode=ap,sp.count=0,sp.currentPromise=null,sp}return __extends$g(np,_d),np.prototype.summary=function(){return"{TODO: fill in upstream of zip summaries} -> Zip"},np.prototype.nextState=function(rp){return __awaiter$6(this,void 0,void 0,function(){function ap(cp){return cp instanceof LazyIterator?{value:cp.next().then(function(dp){return sp++,dp.done&&lp++,dp.value}),recurse:!1}:{value:null,recurse:!0}}var sp,lp,up;return __generator$6(this,function(cp){switch(cp.label){case 0:return[4,rp];case 1:return cp.sent(),sp=0,lp=0,[4,deepMapAndAwaitAll(this.iterators,ap)];case 2:if(up=cp.sent(),sp===lp)return[2,{value:null,done:!0}];if(lp>0)switch(this.mismatchMode){case ZipMismatchMode.FAIL:throw new Error("Zipped streams should have the same length. Mismatched at element "+this.count+".");case ZipMismatchMode.SHORTEST:return[2,{value:null,done:!0}];case ZipMismatchMode.LONGEST:}return this.count++,[2,{value:up,done:!1}]}})})},np.prototype.next=function(){return __awaiter$6(this,void 0,void 0,function(){return __generator$6(this,function(rp){return this.currentPromise=this.nextState(this.currentPromise),[2,this.currentPromise]})})},np}(LazyIterator),PrefetchIterator=function(_d){function np(rp,ap){var sp=_d.call(this)||this;return sp.upstream=rp,sp.bufferSize=ap,sp.buffer=new RingBuffer(ap),sp}return __extends$g(np,_d),np.prototype.summary=function(){return this.upstream.summary()+" -> Prefetch"},np.prototype.refill=function(){for(;!this.buffer.isFull();){var rp=this.upstream.next();this.buffer.push(rp)}},np.prototype.next=function(){return this.refill(),this.buffer.shift()},np}(LazyIterator),ShuffleIterator=function(_d){function np(rp,ap,sp){var lp=_d.call(this,rp,ap)||this;return lp.upstream=rp,lp.windowSize=ap,lp.upstreamExhausted=!1,lp.random=seedrandom_1(sp||tt.now().toString()),lp.lastRead=Promise.resolve({value:null,done:!1}),lp}return __extends$g(np,_d),np.prototype.next=function(){return __awaiter$6(this,void 0,void 0,function(){var rp=this;return __generator$6(this,function(ap){return this.lastRead=this.lastRead.then(function(){return rp.serialNext()}),[2,this.lastRead]})})},np.prototype.randomInt=function(rp){return Math.floor(this.random()*rp)},np.prototype.chooseIndex=function(){return this.randomInt(this.buffer.length())},np.prototype.serialNext=function(){return __awaiter$6(this,void 0,void 0,function(){var rp,ap;return __generator$6(this,function(sp){switch(sp.label){case 0:this.upstreamExhausted||this.refill(),sp.label=1;case 1:return this.buffer.isEmpty()?[3,3]:(rp=this.chooseIndex(),[4,this.buffer.shuffleExcise(rp)]);case 2:return(ap=sp.sent()).done?(this.upstreamExhausted=!0,[3,1]):(this.refill(),[2,ap]);case 3:return[2,{value:null,done:!0}]}})})},np}(PrefetchIterator),Dataset=function(){function _d(){this.size=null}return _d.prototype.batch=function(np,rp){var ap=this;rp===void 0&&(rp=!0);var sp=this;return tt.assert(np>0,function(){return`batchSize needs to be positive, but it is
      `+np}),datasetFromIteratorFn(function(){return __awaiter$6(ap,void 0,void 0,function(){return __generator$6(this,function(lp){switch(lp.label){case 0:return[4,sp.iterator()];case 1:return[2,lp.sent().columnMajorBatch(np,rp,deepBatchConcat)]}})})},this.size===1/0||this.size==null?this.size:rp?Math.ceil(this.size/np):Math.floor(this.size/np))},_d.prototype.concatenate=function(np){var rp=this,ap=this;return datasetFromIteratorFn(function(){return __awaiter$6(rp,void 0,void 0,function(){var sp,lp;return __generator$6(this,function(up){switch(up.label){case 0:return[4,ap.iterator()];case 1:return lp=(sp=up.sent()).concatenate,[4,np.iterator()];case 2:return[2,lp.apply(sp,[up.sent()])]}})})},this.size===1/0||np.size===1/0?1/0:this.size!=null&&np.size!=null?this.size+np.size:null)},_d.prototype.filter=function(np){var rp=this,ap=this;return datasetFromIteratorFn(function(){return __awaiter$6(rp,void 0,void 0,function(){return __generator$6(this,function(sp){switch(sp.label){case 0:return[4,ap.iterator()];case 1:return[2,sp.sent().filter(function(lp){return je(function(){return np(lp)})})]}})})},this.size===1/0?1/0:null)},_d.prototype.forEachAsync=function(np){return __awaiter$6(this,void 0,void 0,function(){return __generator$6(this,function(rp){switch(rp.label){case 0:return[4,this.iterator()];case 1:return[2,rp.sent().forEachAsync(np)]}})})},_d.prototype.forEach=function(np){return __awaiter$6(this,void 0,void 0,function(){return __generator$6(this,function(rp){return ze("dataset.forEach() is deprecated and will be removed. Please use dataset.forEachAsync() instead"),[2,this.forEachAsync(np)]})})},_d.prototype.map=function(np){var rp=this,ap=this;return datasetFromIteratorFn(function(){return __awaiter$6(rp,void 0,void 0,function(){return __generator$6(this,function(sp){switch(sp.label){case 0:return[4,ap.iterator()];case 1:return[2,sp.sent().map(function(lp){return je(function(){return np(lp)})})]}})})},this.size)},_d.prototype.mapAsync=function(np){var rp=this,ap=this;return datasetFromIteratorFn(function(){return __awaiter$6(rp,void 0,void 0,function(){return __generator$6(this,function(sp){switch(sp.label){case 0:return[4,ap.iterator()];case 1:return[2,sp.sent().mapAsync(np)]}})})},this.size)},_d.prototype.prefetch=function(np){var rp=this;if(np==null)throw new RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");var ap=this;return datasetFromIteratorFn(function(){return __awaiter$6(rp,void 0,void 0,function(){return __generator$6(this,function(sp){switch(sp.label){case 0:return[4,ap.iterator()];case 1:return[2,sp.sent().prefetch(np)]}})})},this.size)},_d.prototype.repeat=function(np){var rp=this,ap=this;return datasetFromIteratorFn(function(){return __awaiter$6(rp,void 0,void 0,function(){var sp=this;return __generator$6(this,function(lp){return[2,iteratorFromConcatenated(iteratorFromFunction(function(){return __awaiter$6(sp,void 0,void 0,function(){var up;return __generator$6(this,function(cp){switch(cp.label){case 0:return up={},[4,ap.iterator()];case 1:return[2,(up.value=cp.sent(),up.done=!1,up)]}})})}).take(np))]})})},this.size!=null&&np>0?this.size*np:np===0?0:this.size!=null&&(np===void 0||np<0)?1/0:null)},_d.prototype.skip=function(np){var rp=this,ap=this;return datasetFromIteratorFn(function(){return __awaiter$6(rp,void 0,void 0,function(){return __generator$6(this,function(sp){switch(sp.label){case 0:return[4,ap.iterator()];case 1:return[2,sp.sent().skip(np)]}})})},this.size!=null&&np>=0&&this.size>=np?this.size-np:this.size!=null&&(this.size<np||np===void 0||np<0)?0:null)},_d.prototype.shuffle=function(np,rp,ap){var sp=this;if(ap===void 0&&(ap=!0),np==null||np<0)throw this.size==null?new RangeError("`Dataset.shuffle()` requires bufferSize to be specified."):new RangeError("`Dataset.shuffle()` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for `tf.Tensor`s), consider setting bufferSize to the dataset size ("+this.size+" elements)");var lp=this,up=seedrandom_1(rp||tt.now().toString());return datasetFromIteratorFn(function(){return __awaiter$6(sp,void 0,void 0,function(){var cp;return __generator$6(this,function(dp){switch(dp.label){case 0:return cp=up.int32(),ap&&(cp+=up.int32()),[4,lp.iterator()];case 1:return[2,dp.sent().shuffle(np,cp.toString())]}})})},this.size)},_d.prototype.take=function(np){var rp=this,ap=this;return datasetFromIteratorFn(function(){return __awaiter$6(rp,void 0,void 0,function(){return __generator$6(this,function(sp){switch(sp.label){case 0:return[4,ap.iterator()];case 1:return[2,sp.sent().take(np)]}})})},this.size!=null&&this.size>np?np:this.size!=null&&this.size<=np?this.size:null)},_d.prototype.toArray=function(){return __awaiter$6(this,void 0,void 0,function(){return __generator$6(this,function(np){switch(np.label){case 0:if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return[4,this.iterator()];case 1:return[2,np.sent().toArray()]}})})},_d.prototype.toArrayForTest=function(){return __awaiter$6(this,void 0,void 0,function(){return __generator$6(this,function(np){switch(np.label){case 0:if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return[4,this.iterator()];case 1:return[2,np.sent().toArrayForTest()]}})})},_d.MAX_BUFFER_SIZE=1e4,_d}();function datasetFromIteratorFn(_d,np){return np===void 0&&(np=null),new(function(rp){function ap(){var sp=rp!==null&&rp.apply(this,arguments)||this;return sp.size=np,sp}return __extends$g(ap,rp),ap.prototype.iterator=function(){return __awaiter$6(this,void 0,void 0,function(){return __generator$6(this,function(sp){return[2,_d()]})})},ap}(Dataset))}function array(_d){var np=this;return datasetFromIteratorFn(function(){return __awaiter$6(np,void 0,void 0,function(){return __generator$6(this,function(rp){return[2,iteratorFromItems(_d)]})})},_d.length)}function zip(_d){var np,rp=this;if(!isIterable(_d))throw new Error("The argument to zip() must be an object or array.");if(Array.isArray(_d))for(var ap=0;ap<_d.length;ap++)np=np==null?_d[ap].size:Math.min(np,_d[ap].size);else if(_d instanceof Object)for(var sp in _d)np=np==null?_d[sp].size:Math.min(np,_d[sp].size);return datasetFromIteratorFn(function(){return __awaiter$6(rp,void 0,void 0,function(){return __generator$6(this,function(lp){switch(lp.label){case 0:return[4,deepMapAndAwaitAll(_d,function(up){if(up instanceof Dataset)return{value:up.iterator(),recurse:!1};if(isIterable(up))return{value:null,recurse:!0};throw new Error("Leaves of the structure passed to zip() must be Datasets, not primitives.")})];case 1:return[2,iteratorFromZipped(lp.sent(),ZipMismatchMode.SHORTEST)]}})})},np)}function deepBatchConcat(_d){return _d===null?null:canTensorify(_d[0])?{value:batchConcat(_d),recurse:!1}:{value:null,recurse:!0}}function batchConcat(_d){if(_d.length===0)throw new Error("Can't make a batch of zero elements.");return _d[0]instanceof dt?Tr(_d):kn(_d)}var TextLineDataset=function(_d){function np(rp){var ap=_d.call(this)||this;return ap.input=rp,ap}return __extends$g(np,_d),np.prototype.iterator=function(){return __awaiter$6(this,void 0,void 0,function(){var rp,ap;return __generator$6(this,function(sp){switch(sp.label){case 0:return[4,this.input.iterator()];case 1:return rp=sp.sent(),ap=rp.decodeUTF8(),[2,ap.split(`
`).map(function(lp){return lp.endsWith("\r")&&(lp=lp.slice(0,-1)),lp})]}})})},np}(Dataset),CODE_QUOTE='"',STATE_OUT=Symbol("out"),STATE_FIELD=Symbol("field"),STATE_QUOTE=Symbol("quote"),STATE_QUOTE_AFTER_QUOTE=Symbol("quoteafterquote"),STATE_WITHIN_QUOTE_IN_QUOTE=Symbol("quoteinquote"),CSVDataset=function(_d){function np(rp,ap){var sp=_d.call(this)||this;return sp.input=rp,sp.hasHeader=!0,sp.fullColumnNames=null,sp.columnNamesValidated=!1,sp.columnConfigs=null,sp.configuredColumnsOnly=!1,sp.delimiter=",",sp.delimWhitespace=!1,sp.base=new TextLineDataset(rp),ap||(ap={}),sp.hasHeader=ap.hasHeader!==!1,sp.fullColumnNames=ap.columnNames,sp.columnConfigs=ap.columnConfigs,sp.configuredColumnsOnly=ap.configuredColumnsOnly,ap.delimWhitespace?(tt.assert(ap.delimiter==null,function(){return"Delimiter should not be provided when delimWhitespace is true."}),sp.delimWhitespace=!0,sp.delimiter=" "):sp.delimiter=ap.delimiter?ap.delimiter:",",sp}return __extends$g(np,_d),np.prototype.columnNames=function(){return __awaiter$6(this,void 0,void 0,function(){return __generator$6(this,function(rp){switch(rp.label){case 0:return this.columnNamesValidated?[3,2]:[4,this.setColumnNames()];case 1:rp.sent(),rp.label=2;case 2:return[2,this.configuredColumnsOnly?Object.keys(this.columnConfigs):this.fullColumnNames]}})})},np.prototype.setColumnNames=function(){return __awaiter$6(this,void 0,void 0,function(){var rp,ap,sp,lp,up,cp,dp=this;return __generator$6(this,function(fp){switch(fp.label){case 0:return[4,this.maybeReadHeaderLine()];case 1:if(rp=fp.sent(),!this.fullColumnNames&&!rp)throw new Error("Column names must be provided if there is no header line.");if(this.fullColumnNames&&rp&&tt.assert(rp.length===this.fullColumnNames.length,function(){return"The length of provided columnNames ("+dp.fullColumnNames.length.toString()+") does not match the length of the header line read from file ("+rp.length.toString()+")."}),this.fullColumnNames||(this.fullColumnNames=rp),ap=this.fullColumnNames.reduce(function(pp,hp){return pp[hp]=pp[hp]+1||1,pp},{}),sp=Object.keys(ap).filter(function(pp){return ap[pp]>1}),tt.assert(sp.length===0,function(){return"Duplicate column names found: "+sp.toString()}),this.columnConfigs){for(lp=0,up=Object.keys(this.columnConfigs);lp<up.length;lp++)if(cp=up[lp],this.fullColumnNames.indexOf(cp)===-1)throw new Error('The key "'+cp+'" provided in columnConfigs does not match any of the column names ('+this.fullColumnNames.toString()+").")}return this.columnNamesValidated=!0,[2]}})})},np.prototype.maybeReadHeaderLine=function(){return __awaiter$6(this,void 0,void 0,function(){var rp,ap;return __generator$6(this,function(sp){switch(sp.label){case 0:return this.hasHeader?[4,this.base.iterator()]:[3,3];case 1:return[4,sp.sent().next()];case 2:if((rp=sp.sent()).done)throw new Error("No data was found for CSV parsing.");return ap=rp.value,[2,this.parseRow(ap,!1)];case 3:return[2,null]}})})},np.prototype.iterator=function(){return __awaiter$6(this,void 0,void 0,function(){var rp,ap=this;return __generator$6(this,function(sp){switch(sp.label){case 0:return this.columnNamesValidated?[3,2]:[4,this.setColumnNames()];case 1:sp.sent(),sp.label=2;case 2:return[4,this.base.iterator()];case 3:return rp=sp.sent(),this.hasHeader&&(rp=rp.skip(1)),[2,rp.map(function(lp){return ap.makeDataElement(lp)})]}})})},np.prototype.makeDataElement=function(rp){for(var ap=this.parseRow(rp),sp={},lp={},up=0;up<this.fullColumnNames.length;up++){var cp=this.fullColumnNames[up],dp=this.columnConfigs?this.columnConfigs[cp]:null;if(!this.configuredColumnsOnly||dp){var fp=ap[up],pp=null;if(fp==="")if(dp&&dp.default!==void 0)pp=dp.default;else{if(dp&&(dp.required||dp.isLabel))throw new Error("Required column "+cp+" is empty in this line: "+rp);pp=void 0}else{var hp=Number(fp);if(isNaN(hp))pp=dp&&dp.dtype==="bool"?this.getBoolean(fp):fp;else if(dp&&dp.dtype)switch(dp.dtype){case"float32":pp=hp;break;case"int32":pp=Math.floor(hp);break;case"bool":pp=this.getBoolean(fp);break;default:pp=hp}else pp=hp}dp&&dp.isLabel?lp[cp]=pp:sp[cp]=pp}}return Object.keys(lp).length===0?sp:{xs:sp,ys:lp}},np.prototype.getBoolean=function(rp){return rp==="1"||rp.toLowerCase()==="true"?1:0},np.prototype.parseRow=function(rp,ap){ap===void 0&&(ap=!0);for(var sp=[],lp=0,up=rp.length,cp=STATE_OUT,dp=0;dp<up;dp++)switch(cp){case STATE_OUT:switch(rp.charAt(dp)){case CODE_QUOTE:lp=dp+1,cp=STATE_QUOTE;break;case this.delimiter:if(lp=dp+1,this.delimiter===" "&&this.delimWhitespace)break;sp.push(""),cp=STATE_OUT;break;default:cp=STATE_FIELD,lp=dp}break;case STATE_FIELD:switch(rp.charAt(dp)){case this.delimiter:sp.push(rp.substring(lp,dp)),cp=STATE_OUT,lp=dp+1}break;case STATE_QUOTE:switch(rp.charAt(dp)){case CODE_QUOTE:cp=STATE_QUOTE_AFTER_QUOTE}break;case STATE_QUOTE_AFTER_QUOTE:switch(rp.charAt(dp)){case this.delimiter:sp.push(rp.substring(lp,dp-1)),cp=STATE_OUT,lp=dp+1;break;case CODE_QUOTE:cp=STATE_QUOTE;break;default:cp=STATE_WITHIN_QUOTE_IN_QUOTE}break;case STATE_WITHIN_QUOTE_IN_QUOTE:switch(rp.charAt(dp)){case CODE_QUOTE:cp=STATE_QUOTE}}if(cp===STATE_QUOTE_AFTER_QUOTE?sp.push(rp.substring(lp,up-1)):sp.push(rp.substring(lp)),ap&&sp.length!==this.fullColumnNames.length)throw new Error("Invalid row in csv file. Should have "+this.fullColumnNames.length+" elements in a row, but got "+sp);return sp},np}(Dataset),MicrophoneIterator=function(_d){function np(rp){var ap=_d.call(this)||this;ap.microphoneConfig=rp,ap.isClosed=!1,ap.fftSize=rp.fftSize||1024;var sp=Math.log2(ap.fftSize);if(ap.fftSize<0||sp<4||sp>14||!Number.isInteger(sp))throw new Error("Invalid fftSize: it must be a power of 2 between 2 to 4 and 2 to 14, but got "+ap.fftSize);if(ap.numFrames=rp.numFramesPerSpectrogram||43,ap.sampleRateHz=rp.sampleRateHz,ap.columnTruncateLength=rp.columnTruncateLength||ap.fftSize,ap.audioTrackConstraints=rp.audioTrackConstraints,ap.smoothingTimeConstant=rp.smoothingTimeConstant||0,ap.includeSpectrogram=rp.includeSpectrogram!==!1,ap.includeWaveform=rp.includeWaveform===!0,!ap.includeSpectrogram&&!ap.includeWaveform)throw new Error("Both includeSpectrogram and includeWaveform are false. At least one type of data should be returned.");return ap}return __extends$g(np,_d),np.prototype.summary=function(){return"microphone"},np.create=function(rp){return rp===void 0&&(rp={}),__awaiter$6(this,void 0,void 0,function(){var ap;return __generator$6(this,function(sp){switch(sp.label){case 0:if(a$1().get("IS_NODE"))throw new Error("microphone API is only supported in browser environment.");return[4,(ap=new np(rp)).start()];case 1:return sp.sent(),[2,ap]}})})},np.prototype.start=function(){return __awaiter$6(this,void 0,void 0,function(){var rp,ap,sp,lp;return __generator$6(this,function(up){switch(up.label){case 0:return up.trys.push([0,2,,3]),rp=this,[4,navigator.mediaDevices.getUserMedia({audio:this.audioTrackConstraints==null||this.audioTrackConstraints,video:!1})];case 1:return rp.stream=up.sent(),[3,3];case 2:throw ap=up.sent(),new Error("Error thrown while initializing video stream: "+ap.message);case 3:if(!this.stream)throw new Error("Could not obtain audio from microphone.");if(sp=window.AudioContext||window.webkitAudioContext,this.audioContext=new sp,this.sampleRateHz){if(this.audioContext.sampleRate!==this.sampleRateHz)throw new Error("Mismatch in sampling rate: Expected: "+this.sampleRateHz+"; Actual: "+this.audioContext.sampleRate)}else this.sampleRateHz=this.audioContext.sampleRate;return lp=this.audioContext.createMediaStreamSource(this.stream),this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=2*this.fftSize,this.analyser.smoothingTimeConstant=this.smoothingTimeConstant,lp.connect(this.analyser),this.freqData=new Float32Array(this.fftSize),this.timeData=new Float32Array(this.fftSize),[2]}})})},np.prototype.next=function(){return __awaiter$6(this,void 0,void 0,function(){var rp,ap,sp,lp,up;return __generator$6(this,function(cp){switch(cp.label){case 0:return this.isClosed?[2,{value:null,done:!0}]:[4,this.getAudioData()];case 1:return sp=cp.sent(),this.includeSpectrogram&&(lp=this.flattenQueue(sp.freqDataQueue),rp=this.getTensorFromAudioDataArray(lp,[this.numFrames,this.columnTruncateLength,1])),this.includeWaveform&&(up=this.flattenQueue(sp.timeDataQueue),ap=this.getTensorFromAudioDataArray(up,[this.numFrames*this.fftSize,1])),[2,{value:{spectrogram:rp,waveform:ap},done:!1}]}})})},np.prototype.capture=function(){return __awaiter$6(this,void 0,void 0,function(){return __generator$6(this,function(rp){switch(rp.label){case 0:return[4,this.next()];case 1:return[2,rp.sent().value]}})})},np.prototype.getAudioData=function(){return __awaiter$6(this,void 0,void 0,function(){var rp,ap,sp,lp=this;return __generator$6(this,function(up){return rp=[],ap=[],sp=0,[2,new Promise(function(cp){var dp=setInterval(function(){lp.includeSpectrogram&&(lp.analyser.getFloatFrequencyData(lp.freqData),lp.freqData[0]===-1/0&&cp({freqDataQueue:rp,timeDataQueue:ap}),rp.push(lp.freqData.slice(0,lp.columnTruncateLength))),lp.includeWaveform&&(lp.analyser.getFloatTimeDomainData(lp.timeData),ap.push(lp.timeData.slice())),++sp===lp.numFrames&&(clearInterval(dp),cp({freqDataQueue:rp,timeDataQueue:ap}))},lp.fftSize/lp.sampleRateHz*1e3)})]})})},np.prototype.stop=function(){this.isClosed||(this.isClosed=!0,this.analyser.disconnect(),this.audioContext.close(),this.stream!=null&&this.stream.getTracks().length>0&&this.stream.getTracks()[0].stop())},np.prototype.toArray=function(){throw new Error("Can not convert infinite audio stream to array.")},np.prototype.getSampleRate=function(){return this.sampleRateHz},np.prototype.flattenQueue=function(rp){var ap=rp[0].length,sp=new Float32Array(rp.length*ap);return rp.forEach(function(lp,up){return sp.set(lp,up*ap)}),sp},np.prototype.getTensorFromAudioDataArray=function(rp,ap){var sp=new Float32Array(tt.sizeFromShape(ap));return sp.set(rp,sp.length-rp.length),kn(sp,ap)},np}(LazyIterator),WebcamIterator=function(_d){function np(rp,ap){var sp=_d.call(this)||this;if(sp.webcamVideoElement=rp,sp.webcamConfig=ap,sp.isClosed=!0,sp.resize=!1,sp.needToResize())if(sp.resize=!0,sp.cropSize=[sp.webcamConfig.resizeHeight,sp.webcamConfig.resizeWidth],sp.cropBoxInd=Dn([0],"int32"),sp.webcamConfig.centerCrop){var lp=1*sp.webcamConfig.resizeWidth/sp.webcamVideoElement.width,up=1*sp.webcamConfig.resizeHeight/sp.webcamVideoElement.height,cp=(1-lp)/2,dp=(1-up)/2,fp=cp+lp,pp=up+dp;sp.cropBox=Tn([dp,cp,pp,fp],[1,4])}else sp.cropBox=Tn([0,0,1,1],[1,4]);return sp}return __extends$g(np,_d),np.prototype.summary=function(){return"webcam"},np.create=function(rp,ap){return ap===void 0&&(ap={}),__awaiter$6(this,void 0,void 0,function(){var sp;return __generator$6(this,function(lp){switch(lp.label){case 0:if(a$1().get("IS_NODE"))throw new Error("tf.data.webcam is only supported in browser environment.");if(!rp){if(rp=document.createElement("video"),!ap.resizeWidth||!ap.resizeHeight)throw new Error("Please provide webcam video element, or resizeWidth and resizeHeight to create a hidden video element.");rp.width=ap.resizeWidth,rp.height=ap.resizeHeight}return[4,(sp=new np(rp,ap)).start()];case 1:return lp.sent(),[2,sp]}})})},np.prototype.start=function(){return __awaiter$6(this,void 0,void 0,function(){var rp,ap,sp=this;return __generator$6(this,function(lp){switch(lp.label){case 0:this.webcamConfig.facingMode&&tt.assert(this.webcamConfig.facingMode==="user"||this.webcamConfig.facingMode==="environment",function(){return"Invalid webcam facing mode: "+sp.webcamConfig.facingMode+". Please provide 'user' or 'environment'"}),lp.label=1;case 1:return lp.trys.push([1,3,,4]),rp=this,[4,navigator.mediaDevices.getUserMedia({video:{deviceId:this.webcamConfig.deviceId,facingMode:this.webcamConfig.facingMode?this.webcamConfig.facingMode:"user",width:this.webcamVideoElement.width,height:this.webcamVideoElement.height}})];case 2:return rp.stream=lp.sent(),[3,4];case 3:throw(ap=lp.sent()).message="Error thrown while initializing video stream: "+ap.message,ap;case 4:if(!this.stream)throw new Error("Could not obtain video from webcam.");try{this.webcamVideoElement.srcObject=this.stream}catch(up){console.log(up),this.webcamVideoElement.src=window.URL.createObjectURL(this.stream)}return this.webcamVideoElement.play(),this.isClosed=!1,[2,new Promise(function(up){sp.webcamVideoElement.onloadedmetadata=function(){up()}})]}})})},np.prototype.next=function(){return __awaiter$6(this,void 0,void 0,function(){var rp;return __generator$6(this,function(ap){if(this.isClosed)return[2,{value:null,done:!0}];try{rp=Nf.fromPixels(this.webcamVideoElement)}catch(sp){throw new Error("Error thrown converting video to pixels: "+JSON.stringify(sp))}if(!this.resize)return[2,{value:rp,done:!1}];try{return[2,{value:this.cropAndResizeFrame(rp),done:!1}]}catch(sp){throw new Error("Error thrown cropping the video: "+sp.message)}finally{rp.dispose()}return[2]})})},np.prototype.needToResize=function(){return!(!this.webcamConfig.resizeWidth||!this.webcamConfig.resizeHeight||this.webcamVideoElement.width===this.webcamConfig.resizeWidth&&this.webcamVideoElement.height===this.webcamConfig.resizeHeight)},np.prototype.cropAndResizeFrame=function(rp){var ap=this;return je(function(){var sp,lp=rp.toFloat().expandDims(0),up=(sp=vh.cropAndResize(lp,ap.cropBox,ap.cropBoxInd,ap.cropSize,"bilinear")).shape;return sp.reshape(up.slice(1))})},np.prototype.capture=function(){return __awaiter$6(this,void 0,void 0,function(){return __generator$6(this,function(rp){switch(rp.label){case 0:return[4,this.next()];case 1:return[2,rp.sent().value]}})})},np.prototype.stop=function(){this.stream.getTracks().forEach(function(rp){return rp.stop()});try{this.webcamVideoElement.srcObject=null}catch(rp){console.log(rp),this.webcamVideoElement.src=null}this.isClosed=!0},np.prototype.toArray=function(){throw new Error("Can not convert infinite video stream to array.")},np}(LazyIterator),DataSource=function(){return function(){}}(),StringIterator=function(_d){function np(){return _d!==null&&_d.apply(this,arguments)||this}return __extends$g(np,_d),np.prototype.split=function(rp){return new SplitIterator(this,rp)},np}(LazyIterator),SplitIterator=function(_d){function np(rp,ap){var sp=_d.call(this)||this;return sp.upstream=rp,sp.impl=new SplitIteratorImpl(rp,ap),sp}return __extends$g(np,_d),np.prototype.summary=function(){return this.impl.summary()},np.prototype.next=function(){return __awaiter$6(this,void 0,void 0,function(){return __generator$6(this,function(rp){return[2,this.impl.next()]})})},np}(StringIterator),SplitIteratorImpl=function(_d){function np(rp,ap){var sp=_d.call(this)||this;return sp.upstream=rp,sp.separator=ap,sp.carryover="",sp}return __extends$g(np,_d),np.prototype.summary=function(){return this.upstream.summary()+" -> Split('"+this.separator+"')"},np.prototype.pump=function(){return __awaiter$6(this,void 0,void 0,function(){var rp,ap,sp,lp,up;return __generator$6(this,function(cp){switch(cp.label){case 0:return[4,this.upstream.next()];case 1:if((rp=cp.sent()).done)return this.carryover===""?[2,!1]:(this.outputQueue.push(this.carryover),this.carryover="",[2,!0]);for((ap=rp.value.split(this.separator))[0]=this.carryover+ap[0],sp=0,lp=ap.slice(0,-1);sp<lp.length;sp++)up=lp[sp],this.outputQueue.push(up);return this.carryover=ap[ap.length-1],[2,!0]}})})},np}(OneToManyIterator),ByteChunkIterator=function(_d){function np(){return _d!==null&&_d.apply(this,arguments)||this}return __extends$g(np,_d),np.prototype.decodeUTF8=function(){return new Utf8Iterator(this)},np}(LazyIterator),Utf8Iterator=function(_d){function np(rp){var ap=_d.call(this)||this;return ap.upstream=rp,ap.impl=new Utf8IteratorImpl(rp),ap}return __extends$g(np,_d),np.prototype.summary=function(){return this.impl.summary()},np.prototype.next=function(){return __awaiter$6(this,void 0,void 0,function(){return __generator$6(this,function(rp){return[2,this.impl.next()]})})},np}(StringIterator),Utf8IteratorImpl=function(_d){function np(rp){var ap=_d.call(this)||this;if(ap.upstream=rp,a$1().get("IS_BROWSER"))ap.decoder=new TextDecoder("utf-8");else{var sp=require("string_decoder").StringDecoder;ap.decoder=new sp("utf8")}return ap}return __extends$g(np,_d),np.prototype.summary=function(){return this.upstream.summary()+" -> Utf8"},np.prototype.pump=function(){return __awaiter$6(this,void 0,void 0,function(){var rp,ap,sp;return __generator$6(this,function(lp){switch(lp.label){case 0:return[4,this.upstream.next()];case 1:return(rp=lp.sent()).done?[2,!1]:(ap=rp.value,sp=a$1().get("IS_BROWSER")?this.decoder.decode(ap,{stream:!0}):this.decoder.write(Buffer.from(ap.buffer)),this.outputQueue.push(sp),[2,!0])}})})},np}(OneToManyIterator),FileChunkIterator=function(_d){function np(rp,ap){ap===void 0&&(ap={});var sp=_d.call(this)||this;return sp.file=rp,sp.options=ap,tt.assert(rp instanceof Uint8Array||!!a$1().get("IS_BROWSER")&&(rp instanceof File||rp instanceof Blob),function(){return"FileChunkIterator only supports File, Blob and Uint8Array right now."}),sp.offset=ap.offset||0,sp.chunkSize=ap.chunkSize||1048576,sp}return __extends$g(np,_d),np.prototype.summary=function(){return"FileChunks "+this.file},np.prototype.next=function(){return __awaiter$6(this,void 0,void 0,function(){var rp,ap,sp=this;return __generator$6(this,function(lp){switch(lp.label){case 0:return this.offset>=(this.file instanceof Uint8Array?this.file.byteLength:this.file.size)?[2,{value:null,done:!0}]:(rp=new Promise(function(up,cp){var dp=sp.offset+sp.chunkSize;if(sp.file instanceof Uint8Array)up(new Uint8Array(sp.file.slice(sp.offset,dp)));else{var fp=new FileReader;fp.onload=function(hp){var mp=fp.result;if(mp instanceof ArrayBuffer&&(mp=new Uint8Array(mp)),!(mp instanceof Uint8Array))return cp(new TypeError("FileReader returned unknown type."));up(mp)},fp.onabort=function(hp){return cp(new Error("Aborted"))},fp.onerror=function(hp){return cp(new Error(hp.type))};var pp=sp.file.slice(sp.offset,dp);fp.readAsArrayBuffer(pp)}sp.offset=dp}),ap={},[4,rp]);case 1:return[2,(ap.value=lp.sent(),ap.done=!1,ap)]}})})},np}(ByteChunkIterator);function urlChunkIterator(_d,np){return np===void 0&&(np={}),__awaiter$6(this,void 0,void 0,function(){var rp,ap,sp,lp,up;return __generator$6(this,function(cp){switch(cp.label){case 0:return typeof _d=="string"?rp=_d:(rp=_d.url,ap=getRequestInitFromRequest(_d)),[4,tt.fetch(rp,ap)];case 1:return(sp=cp.sent()).ok?(up=Uint8Array.bind,[4,sp.arrayBuffer()]):[3,3];case 2:return lp=new(up.apply(Uint8Array,[void 0,cp.sent()])),[2,new FileChunkIterator(lp,np)];case 3:throw new Error(sp.statusText)}})})}var getRequestInitFromRequest=function(_d){return{method:_d.method,headers:_d.headers,body:_d.body,mode:_d.mode,credentials:_d.credentials,cache:_d.cache,redirect:_d.redirect,referrer:_d.referrer,integrity:_d.integrity}};function isLocalPath(_d){return typeof _d=="string"&&_d.substr(0,7)==="file://"}var FileDataSource=function(_d){function np(rp,ap){ap===void 0&&(ap={});var sp=_d.call(this)||this;return sp.input=rp,sp.options=ap,sp}return __extends$g(np,_d),np.prototype.iterator=function(){return __awaiter$6(this,void 0,void 0,function(){var rp;return __generator$6(this,function(ap){return isLocalPath(this.input)&&a$1().get("IS_NODE")&&(rp=require("fs"),this.input=rp.readFileSync(this.input.substr(7))),[2,new FileChunkIterator(this.input,this.options)]})})},np}(DataSource),URLDataSource=function(_d){function np(rp,ap){ap===void 0&&(ap={});var sp=_d.call(this)||this;return sp.url=rp,sp.fileOptions=ap,sp}return __extends$g(np,_d),np.prototype.iterator=function(){return __awaiter$6(this,void 0,void 0,function(){return __generator$6(this,function(rp){return isLocalPath(this.url)?[2,new FileDataSource(this.url,this.fileOptions).iterator()]:[2,urlChunkIterator(this.url,this.fileOptions)]})})},np}(DataSource);function csv(_d,np){return np===void 0&&(np={}),new CSVDataset(new URLDataSource(_d),np)}function func(_d){var np=this,rp=iteratorFromFunction(_d);return datasetFromIteratorFn(function(){return __awaiter$6(np,void 0,void 0,function(){return __generator$6(this,function(ap){return[2,rp]})})})}function generator(_d){var np=this;return datasetFromIteratorFn(function(){return __awaiter$6(np,void 0,void 0,function(){var rp;return __generator$6(this,function(ap){switch(ap.label){case 0:return[4,_d()];case 1:return rp=ap.sent(),[2,iteratorFromFunction(function(){return rp.next()})]}})})})}function webcam$1(_d,np){return __awaiter$6(this,void 0,void 0,function(){return __generator$6(this,function(rp){return[2,WebcamIterator.create(_d,np)]})})}function microphone(_d){return __awaiter$6(this,void 0,void 0,function(){return __generator$6(this,function(np){return[2,MicrophoneIterator.create(_d)]})})}var version$6="1.3.1";const tfData_esm=Object.freeze(Object.defineProperty({__proto__:null,CSVDataset,Dataset,FileDataSource,TextLineDataset,URLDataSource,array,csv,func,generator,microphone,version_data:version$6,webcam:webcam$1,zip},Symbol.toStringTag,{value:"Module"}));var version$5="1.3.1",version$1$1={"tfjs-core":zf,"tfjs-data":version$6,"tfjs-layers":version$8,"tfjs-converter":version$7,tfjs:version$5};const tf_esm=Object.freeze(Object.defineProperty({__proto__:null,AdadeltaOptimizer:qf,AdagradOptimizer:Kf,AdamOptimizer:jf,AdamaxOptimizer:Xf,Callback,CallbackList,CustomCallback,DataStorage:so,get ENV(){return i$2},EarlyStopping,Environment:o,GraphModel,History,InputSpec,KernelBackend:co,LayerVariable,LayersModel,MomentumOptimizer:Yf,Optimizer:Hf,RMSPropOptimizer:Qf,RNN,get Rank(){return vt},get Reduction(){return jl},SGDOptimizer:$f,Sequential,SymbolicTensor,Tensor:dt,TensorBuffer:lt,Variable:bt,abs:Vu,acos:zu,acosh:Gu,add:Vs,addN:zs,addStrict:Gs,all:il,any:ul,argMax:sl,argMin:cl,asin:Hu,asinh:qu,atan:Ku,atan2:Hs,atanh:ju,avgPool:Yc,avgPool3d:Zc,backend:on,backend_util:To,basicLSTMCell:kl,batchNorm:Ns,batchNorm2d:Fs,batchNorm3d:Os,batchNorm4d:_s,batchNormalization:Ts,batchNormalization2d:Ss,batchNormalization3d:As,batchNormalization4d:Ds,batchToSpaceND:cr,booleanMaskAsync:Rc,browser:Nf,buffer:ur,callbacks,cast:lr,ceil:Xu,clipByValue:$u,clone:hr,complex:En,concat:Gn,concat1d:Hn,concat2d:qn,concat3d:Kn,concat4d:jn,constraints:exports_constraints,conv1d:Ac,conv2d:Dc,conv2dTranspose:Pc,conv3d:Tc,conv3dTranspose:Lc,cos:Yu,cosh:Qu,cumsum:fr$1,customGrad:oo,data:tfData_esm,deprecationWarn:ze,depthToSpace:pr,depthwiseConv2d:Oc,deregisterOp,diag:Wl,disableDeprecationWarnings:Ve,dispose:Xe,disposeVariables:Ge,div:qs,divStrict:Ks,dot:Uc,dropout:Ul,elu:gl,enableDebugMode:Ue,enableProdMode:We,engine:He,env:a$1,equal:sc,equalStrict:cc,erf:Ju,exp:Zu,expandDims:dr,expm1:ts,eye:vr,fft:Fl,fill:Ln,findBackend:en,findBackendFactory:nn,floor:es,floorDiv:js,frame:Hl,fused:Eh,gather:Cc,gatherND:Ll,getBackend:Ze,getKernel:s,getKernelsForBackend:c$1,grad:Zr,grads:to,greater:lc,greaterEqual:hc,greaterEqualStrict:fc,greaterStrict:pc,hammingWindow:Gl,hannWindow:zl,ifft:Ol,imag:In,image:vh,inTopKAsync:Xl,initializers:exports_initializers,input,io:Sf,irfft:Ml,isFinite:ps,isInf:fs,isNaN:hs,keep:$e,layers:exports_layers,leakyRelu:yl,less:dc,lessEqual:vc,lessEqualStrict:mc,lessStrict:gc,linalg:sh,linspace:Wn,loadGraphModel,loadLayersModel,localResponseNormalization:Rl,log:ns,log1p:rs,logSigmoid:os,logSoftmax:uo,logSumExp:ll,logicalAnd:Ms,logicalNot:Bs,logicalOr:Ps,logicalXor:Ls,losses:oh,matMul:Wc,math:Df,max:hl,maxPool:$c,maxPool3d:Jc,maximum:Xs,maximumStrict:$s,mean:fl,memory:qe,metrics:exports_metrics,min:pl,minimum:Ys,minimumStrict:Qs,mod:Js,modStrict:Zs,model,models:exports_models,moments:dl,movingAverage:Al,mul:tc,mulStrict:ec,multiRNNCell:Sl,multinomial:mr,neg:as,nextFrame:ep,norm:Il,notEqual:yc,notEqualStrict:xc,oneHot:gr,ones:Bn,onesLike:Vn,op:Cn,outerProduct:Vc,pad:yr,pad1d:xr,pad2d:br,pad3d:wr,pad4d:Cr,pool:Qc,pow:nc,powStrict:rc,prelu:xl,print:sr$1,prod:ml,profile:Ke,rand:Er,randomGamma:Ir,randomNormal:Rr,randomUniform:kr,range:Un,ready:Je,real:Rn,reciprocal:is,registerBackend:rn,registerCallbackConstructor,registerKernel:l$1,registerOp,regularizers:exports_regularizers,relu:bl,relu6:wl,removeBackend:tn,reshape:Sr,reverse:zc,reverse1d:Gc,reverse2d:Hc,reverse3d:qc,reverse4d:Kc,rfft:_l,round:us,rsqrt:ss,scalar:An,scatterND:Nl,selu:Cl,separableConv2d:Bc,sequential,serialization:Mf,setBackend:Qe,setPlatform:an,setdiff1dAsync:_r,sigmoid:cs,sign:ls,signal:Kl,sin:ds,sinh:vs,slice:tl,slice1d:el,slice2d:nl,slice3d:rl,slice4d:ol,slice_util:Jr,softmax:io,softplus:ms,spaceToBatchND:Ar,sparseToDense:Pl,spectral:Bl,split:Xn,sqrt:gs,square:Uu,squaredDifference:oc,squaredDifferenceStrict:ac,squeeze:Dr,stack:Tr,step:ys,stft:ql,stridedSlice:Dl,sub:ic,subStrict:uc,sum:vl,tan:xs,tanh:bs,tensor:kn,tensor1d:Dn,tensor2d:Tn,tensor3d:Nn,tensor4d:Fn,tensor5d:On,tensor6d:_n,tensor_util:At,test_util:Vf,tidy:je,tile:Nr,time:Ye,topk:Tl,train:Zf,transpose:El,truncatedNormal:Fr,unregisterKernel:h$1,unsortedSegmentSum:Ec,unstack:Or,util:tt,valueAndGrad:eo,valueAndGrads:no,variable:Mn,variableGrads:ro,version:version$1$1,version_converter:version$7,version_core:zf,version_layers:version$8,webgl:Gf,where:Ws,whereAsync:Us,zeros:Pn,zerosLike:zn},Symbol.toStringTag,{value:"Module"})),require$$0$2=getAugmentedNamespace(tf_esm);var tf$2={};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object.defineProperty(tf$2,"__esModule",{value:!0});tf$2.cropTensor=tf$2.capture=void 0;var tf$1=require$$0$2;function capture(_d,np){return tf$1.tidy(function(){var rp=tf$1.browser.fromPixels(_d),ap=cropTensor(rp,np),sp=ap.expandDims(0);return sp.toFloat().div(tf$1.scalar(127)).sub(tf$1.scalar(1))})}tf$2.capture=capture;function cropTensor(_d,np,rp){var ap=Math.min(_d.shape[0],_d.shape[1]),sp=_d.shape[0]/2,lp=sp-ap/2,up=_d.shape[1]/2,cp=up-ap/2;if(np&&!rp){var dp=_d.slice([lp,cp,0],[ap,ap,3]);dp=dp.reshape([ap*ap,1,3]);var fp=[.2989,.587,.114];return dp=tf$1.mul(dp,fp),dp=dp.reshape([ap,ap,3]),dp=tf$1.sum(dp,-1),dp=tf$1.expandDims(dp,-1),dp}return _d.slice([lp,cp,0],[ap,ap,3])}tf$2.cropTensor=cropTensor;var canvas={};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object.defineProperty(canvas,"__esModule",{value:!0});canvas.cropTo=canvas.resizeMinTo=canvas.resizeMaxTo=canvas.resize=void 0;var newCanvas=function(){return document.createElement("canvas")};function resize(_d,np,rp){rp===void 0&&(rp=newCanvas()),rp.width=_d.width*np,rp.height=_d.height*np;var ap=rp.getContext("2d");return ap.drawImage(_d,0,0,rp.width,rp.height),rp}canvas.resize=resize;function resizeMaxTo(_d,np,rp){rp===void 0&&(rp=newCanvas());var ap=Math.max(_d.width,_d.height);return resize(_d,np/ap,rp)}canvas.resizeMaxTo=resizeMaxTo;function resizeMinTo(_d,np,rp){rp===void 0&&(rp=newCanvas());var ap=Math.min(_d.width,_d.height);return resize(_d,np/ap,rp)}canvas.resizeMinTo=resizeMinTo;function cropTo(_d,np,rp,ap){rp===void 0&&(rp=!1),ap===void 0&&(ap=newCanvas());var sp=_d.width,lp=_d.height;_d instanceof HTMLVideoElement&&(sp=_d.videoWidth,lp=_d.videoHeight);var up=Math.min(sp,lp),cp=np/up,dp=Math.ceil(sp*cp),fp=Math.ceil(lp*cp),pp=dp-np,hp=fp-np;ap.width=ap.height=np;var mp=ap.getContext("2d");return mp.drawImage(_d,~~(pp/2)*-1,~~(hp/2)*-1,dp,fp),rp&&(mp.scale(-1,1),mp.drawImage(ap,np*-1,0)),ap}canvas.cropTo=cropTo;var version$4={};/** @license See the LICENSE file. */Object.defineProperty(version$4,"__esModule",{value:!0});version$4.version=void 0;var version$3="0.8.4-alpha2";version$4.version=version$3;(function(_d){/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var np=commonjsGlobal&&commonjsGlobal.__awaiter||function($p,Rp,Pp,Op){function jp(Mp){return Mp instanceof Pp?Mp:new Pp(function(Ap){Ap(Mp)})}return new(Pp||(Pp=Promise))(function(Mp,Ap){function Dp(kp){try{Ip(Op.next(kp))}catch(Tp){Ap(Tp)}}function Fp(kp){try{Ip(Op.throw(kp))}catch(Tp){Ap(Tp)}}function Ip(kp){kp.done?Mp(kp.value):jp(kp.value).then(Dp,Fp)}Ip((Op=Op.apply($p,Rp||[])).next())})},rp=commonjsGlobal&&commonjsGlobal.__generator||function($p,Rp){var Pp={label:0,sent:function(){if(Mp[0]&1)throw Mp[1];return Mp[1]},trys:[],ops:[]},Op,jp,Mp,Ap;return Ap={next:Dp(0),throw:Dp(1),return:Dp(2)},typeof Symbol=="function"&&(Ap[Symbol.iterator]=function(){return this}),Ap;function Dp(Ip){return function(kp){return Fp([Ip,kp])}}function Fp(Ip){if(Op)throw new TypeError("Generator is already executing.");for(;Pp;)try{if(Op=1,jp&&(Mp=Ip[0]&2?jp.return:Ip[0]?jp.throw||((Mp=jp.return)&&Mp.call(jp),0):jp.next)&&!(Mp=Mp.call(jp,Ip[1])).done)return Mp;switch(jp=0,Mp&&(Ip=[Ip[0]&2,Mp.value]),Ip[0]){case 0:case 1:Mp=Ip;break;case 4:return Pp.label++,{value:Ip[1],done:!1};case 5:Pp.label++,jp=Ip[1],Ip=[0];continue;case 7:Ip=Pp.ops.pop(),Pp.trys.pop();continue;default:if(Mp=Pp.trys,!(Mp=Mp.length>0&&Mp[Mp.length-1])&&(Ip[0]===6||Ip[0]===2)){Pp=0;continue}if(Ip[0]===3&&(!Mp||Ip[1]>Mp[0]&&Ip[1]<Mp[3])){Pp.label=Ip[1];break}if(Ip[0]===6&&Pp.label<Mp[1]){Pp.label=Mp[1],Mp=Ip;break}if(Mp&&Pp.label<Mp[2]){Pp.label=Mp[2],Pp.ops.push(Ip);break}Mp[2]&&Pp.ops.pop(),Pp.trys.pop();continue}Ip=Rp.call($p,Pp)}catch(kp){Ip=[6,kp],jp=0}finally{Op=Mp=0}if(Ip[0]&5)throw Ip[1];return{value:Ip[0]?Ip[1]:void 0,done:!0}}};Object.defineProperty(_d,"__esModule",{value:!0}),_d.loadFromFiles=_d.load=_d.loadTruncatedMobileNet=_d.CustomMobileNet=_d.getTopKClasses=_d.IMAGE_SIZE=void 0;var ap=require$$0$2,sp=require$$0$2,lp=tf$2,up=canvas,cp=version$4,dp=1,fp="conv_pw_13_relu",pp="out_relu",hp=.25,mp=.35;_d.IMAGE_SIZE=224;var gp=function($p){return $p.packageVersion=$p.packageVersion||cp.version,$p.packageName=$p.packageName||"@teachablemachine/image",$p.timeStamp=$p.timeStamp||new Date().toISOString(),$p.userMetadata=$p.userMetadata||{},$p.modelName=$p.modelName||"untitled",$p.labels=$p.labels||[],$p.imageSize=$p.imageSize||_d.IMAGE_SIZE,$p},vp=function($p){return!!$p&&Array.isArray($p.labels)},xp=function($p,Rp){if($p===1){if(Rp!==.25&&Rp!==.5&&Rp!==.75&&Rp!==1)return console.warn("Invalid alpha. Options are: 0.25, 0.50, 0.75 or 1.00."),console.log("Loading model with alpha: ",hp.toFixed(2)),hp}else if(Rp!==.35&&Rp!==.5&&Rp!==.75&&Rp!==1)return console.warn("Invalid alpha. Options are: 0.35, 0.50, 0.75 or 1.00."),console.log("Loading model with alpha: ",mp.toFixed(2)),mp;return Rp},Sp=function($p){if($p=$p||{},$p.checkpointUrl&&$p.trainingLayer)return($p.alpha||$p.version)&&console.warn("Checkpoint URL passed to modelOptions, alpha options are ignored"),[$p.checkpointUrl,$p.trainingLayer];if($p.version=$p.version||dp,$p.version===1){$p.alpha=$p.alpha||hp,$p.alpha=xp($p.version,$p.alpha),console.log("Loading mobilenet "+$p.version+" and alpha "+$p.alpha);var Rp=$p.alpha.toFixed(2);return Rp==="1.00"&&(Rp="1.0"),["https://storage.googleapis.com/tfjs-models/tfjs/mobilenet_v1_"+Rp+"_"+_d.IMAGE_SIZE+"/model.json",fp]}else{if($p.version===2)return $p.alpha=$p.alpha||mp,$p.alpha=xp($p.version,$p.alpha),console.log("Loading mobilenet "+$p.version+" and alpha "+$p.alpha),["https://storage.googleapis.com/teachable-machine-models/mobilenet_v2_weights_tf_dim_ordering_tf_kernels_"+$p.alpha.toFixed(2)+"_"+_d.IMAGE_SIZE+"_no_top/model.json",pp];throw new Error("MobileNet V"+$p.version+" doesn't exist")}},yp=function($p){return np(void 0,void 0,void 0,function(){var Rp,Pp;return rp(this,function(Op){switch(Op.label){case 0:return typeof $p!="string"?[3,3]:[4,fetch($p)];case 1:return Pp=Op.sent(),[4,Pp.json()];case 2:return Rp=Op.sent(),[3,4];case 3:if(vp($p))Rp=$p;else throw new Error("Invalid Metadata provided");Op.label=4;case 4:return[2,gp(Rp)]}})})};function bp($p,Rp,Pp){return Pp===void 0&&(Pp=3),np(this,void 0,void 0,function(){var Op;return rp(this,function(jp){switch(jp.label){case 0:return[4,Rp.data()];case 1:return Op=jp.sent(),[2,ap.tidy(function(){Pp=Math.min(Pp,Op.length);for(var Mp=[],Ap=0;Ap<Op.length;Ap++)Mp.push({value:Op[Ap],index:Ap});Mp.sort(function(kp,Tp){return Tp.value-kp.value});for(var Dp=new Float32Array(Pp),Fp=new Int32Array(Pp),Ap=0;Ap<Pp;Ap++)Dp[Ap]=Mp[Ap].value,Fp[Ap]=Mp[Ap].index;for(var Ip=[],Ap=0;Ap<Fp.length;Ap++)Ip.push({className:$p[Fp[Ap]],probability:Dp[Ap]});return Ip})]}})})}_d.getTopKClasses=bp;var Ep=function(){function $p(Rp,Pp){this.model=Rp,this._metadata=gp(Pp)}return Object.defineProperty($p,"EXPECTED_IMAGE_SIZE",{get:function(){return _d.IMAGE_SIZE},enumerable:!1,configurable:!0}),$p.prototype.getMetadata=function(){return this._metadata},$p.prototype.getTotalClasses=function(){var Rp=this.model.output,Pp=Rp.shape[1];return Pp},$p.prototype.getClassLabels=function(){return this._metadata.labels},$p.prototype.predictTopK=function(Rp,Pp,Op){return Pp===void 0&&(Pp=10),Op===void 0&&(Op=!1),np(this,void 0,void 0,function(){var jp,Mp,Ap,Dp=this;return rp(this,function(Fp){switch(Fp.label){case 0:return jp=up.cropTo(Rp,this._metadata.imageSize,Op),Mp=ap.tidy(function(){var Ip=lp.capture(jp,Dp._metadata.grayscale);return Dp.model.predict(Ip)}),[4,bp(this._metadata.labels,Mp,Pp)];case 1:return Ap=Fp.sent(),sp.dispose(Mp),[2,Ap]}})})},$p.prototype.predict=function(Rp,Pp){return Pp===void 0&&(Pp=!1),np(this,void 0,void 0,function(){var Op,jp,Mp,Ap,Dp,Fp=this;return rp(this,function(Ip){switch(Ip.label){case 0:return Op=up.cropTo(Rp,this._metadata.imageSize,Pp),jp=ap.tidy(function(){var kp=lp.capture(Op,Fp._metadata.grayscale);return Fp.model.predict(kp)}),[4,jp.data()];case 1:for(Mp=Ip.sent(),Ap=[],Dp=0;Dp<Mp.length;Dp++)Ap.push({className:this._metadata.labels[Dp],probability:Mp[Dp]});return sp.dispose(jp),[2,Ap]}})})},$p.prototype.dispose=function(){this.truncatedModel.dispose()},$p}();_d.CustomMobileNet=Ep;function wp($p){return np(this,void 0,void 0,function(){var Rp,Pp,Op,jp,Mp,Ap,Dp,Mp,Ap,Dp;return rp(this,function(Fp){switch(Fp.label){case 0:return Rp=Sp($p),Pp=Rp[0],Op=Rp[1],[4,ap.loadLayersModel(Pp)];case 1:return jp=Fp.sent(),$p&&$p.version===1?(Mp=jp.getLayer(Op),Ap=ap.model({inputs:jp.inputs,outputs:Mp.output}),Dp=ap.sequential(),Dp.add(Ap),Dp.add(ap.layers.flatten()),[2,Dp]):(Mp=jp.getLayer(Op),Ap=ap.model({inputs:jp.inputs,outputs:Mp.output}),Dp=ap.sequential(),Dp.add(Ap),Dp.add(ap.layers.globalAveragePooling2d({})),[2,Dp])}})})}_d.loadTruncatedMobileNet=wp;function _p($p,Rp){return np(this,void 0,void 0,function(){var Pp,Op,jp;return rp(this,function(Mp){switch(Mp.label){case 0:return[4,ap.loadLayersModel($p)];case 1:return Pp=Mp.sent(),Rp?[4,yp(Rp)]:[3,3];case 2:return jp=Mp.sent(),[3,4];case 3:jp=null,Mp.label=4;case 4:return Op=jp,[2,new Ep(Pp,Op)]}})})}_d.load=_p;function Cp($p,Rp,Pp){return np(this,void 0,void 0,function(){var Op,jp,Mp,Ap;return rp(this,function(Dp){switch(Dp.label){case 0:return[4,ap.loadLayersModel(ap.io.browserFiles([$p,Rp]))];case 1:return Op=Dp.sent(),[4,new Response(Pp).json()];case 2:return jp=Dp.sent(),Pp?[4,yp(jp)]:[3,4];case 3:return Ap=Dp.sent(),[3,5];case 4:Ap=null,Dp.label=5;case 5:return Mp=Ap,[2,new Ep(Op,Mp)]}})})}_d.loadFromFiles=Cp})(customMobilenet);var teachableMobilenet={},alea$1={exports:{}};alea$1.exports;(function(_d){(function(np,rp,ap){function sp(dp){var fp=this,pp=cp();fp.next=function(){var hp=2091639*fp.s0+fp.c*23283064365386963e-26;return fp.s0=fp.s1,fp.s1=fp.s2,fp.s2=hp-(fp.c=hp|0)},fp.c=1,fp.s0=pp(" "),fp.s1=pp(" "),fp.s2=pp(" "),fp.s0-=pp(dp),fp.s0<0&&(fp.s0+=1),fp.s1-=pp(dp),fp.s1<0&&(fp.s1+=1),fp.s2-=pp(dp),fp.s2<0&&(fp.s2+=1),pp=null}function lp(dp,fp){return fp.c=dp.c,fp.s0=dp.s0,fp.s1=dp.s1,fp.s2=dp.s2,fp}function up(dp,fp){var pp=new sp(dp),hp=fp&&fp.state,mp=pp.next;return mp.int32=function(){return pp.next()*4294967296|0},mp.double=function(){return mp()+(mp()*2097152|0)*11102230246251565e-32},mp.quick=mp,hp&&(typeof hp=="object"&&lp(hp,pp),mp.state=function(){return lp(pp,{})}),mp}function cp(){var dp=4022871197,fp=function(pp){pp=pp.toString();for(var hp=0;hp<pp.length;hp++){dp+=pp.charCodeAt(hp);var mp=.02519603282416938*dp;dp=mp>>>0,mp-=dp,mp*=dp,dp=mp>>>0,mp-=dp,dp+=mp*4294967296}return(dp>>>0)*23283064365386963e-26};return fp}rp&&rp.exports?rp.exports=up:ap&&ap.amd?ap(function(){return up}):this.alea=up})(commonjsGlobal,_d,!1)})(alea$1);var aleaExports=alea$1.exports,xor128$1={exports:{}};xor128$1.exports;(function(_d){(function(np,rp,ap){function sp(cp){var dp=this,fp="";dp.x=0,dp.y=0,dp.z=0,dp.w=0,dp.next=function(){var hp=dp.x^dp.x<<11;return dp.x=dp.y,dp.y=dp.z,dp.z=dp.w,dp.w^=dp.w>>>19^hp^hp>>>8},cp===(cp|0)?dp.x=cp:fp+=cp;for(var pp=0;pp<fp.length+64;pp++)dp.x^=fp.charCodeAt(pp)|0,dp.next()}function lp(cp,dp){return dp.x=cp.x,dp.y=cp.y,dp.z=cp.z,dp.w=cp.w,dp}function up(cp,dp){var fp=new sp(cp),pp=dp&&dp.state,hp=function(){return(fp.next()>>>0)/4294967296};return hp.double=function(){do var mp=fp.next()>>>11,gp=(fp.next()>>>0)/4294967296,vp=(mp+gp)/(1<<21);while(vp===0);return vp},hp.int32=fp.next,hp.quick=hp,pp&&(typeof pp=="object"&&lp(pp,fp),hp.state=function(){return lp(fp,{})}),hp}rp&&rp.exports?rp.exports=up:ap&&ap.amd?ap(function(){return up}):this.xor128=up})(commonjsGlobal,_d,!1)})(xor128$1);var xor128Exports=xor128$1.exports,xorwow$1={exports:{}};xorwow$1.exports;(function(_d){(function(np,rp,ap){function sp(cp){var dp=this,fp="";dp.next=function(){var hp=dp.x^dp.x>>>2;return dp.x=dp.y,dp.y=dp.z,dp.z=dp.w,dp.w=dp.v,(dp.d=dp.d+362437|0)+(dp.v=dp.v^dp.v<<4^(hp^hp<<1))|0},dp.x=0,dp.y=0,dp.z=0,dp.w=0,dp.v=0,cp===(cp|0)?dp.x=cp:fp+=cp;for(var pp=0;pp<fp.length+64;pp++)dp.x^=fp.charCodeAt(pp)|0,pp==fp.length&&(dp.d=dp.x<<10^dp.x>>>4),dp.next()}function lp(cp,dp){return dp.x=cp.x,dp.y=cp.y,dp.z=cp.z,dp.w=cp.w,dp.v=cp.v,dp.d=cp.d,dp}function up(cp,dp){var fp=new sp(cp),pp=dp&&dp.state,hp=function(){return(fp.next()>>>0)/4294967296};return hp.double=function(){do var mp=fp.next()>>>11,gp=(fp.next()>>>0)/4294967296,vp=(mp+gp)/(1<<21);while(vp===0);return vp},hp.int32=fp.next,hp.quick=hp,pp&&(typeof pp=="object"&&lp(pp,fp),hp.state=function(){return lp(fp,{})}),hp}rp&&rp.exports?rp.exports=up:ap&&ap.amd?ap(function(){return up}):this.xorwow=up})(commonjsGlobal,_d,!1)})(xorwow$1);var xorwowExports=xorwow$1.exports,xorshift7$1={exports:{}};xorshift7$1.exports;(function(_d){(function(np,rp,ap){function sp(cp){var dp=this;dp.next=function(){var pp=dp.x,hp=dp.i,mp,gp;return mp=pp[hp],mp^=mp>>>7,gp=mp^mp<<24,mp=pp[hp+1&7],gp^=mp^mp>>>10,mp=pp[hp+3&7],gp^=mp^mp>>>3,mp=pp[hp+4&7],gp^=mp^mp<<7,mp=pp[hp+7&7],mp=mp^mp<<13,gp^=mp^mp<<9,pp[hp]=gp,dp.i=hp+1&7,gp};function fp(pp,hp){var mp,gp=[];if(hp===(hp|0))gp[0]=hp;else for(hp=""+hp,mp=0;mp<hp.length;++mp)gp[mp&7]=gp[mp&7]<<15^hp.charCodeAt(mp)+gp[mp+1&7]<<13;for(;gp.length<8;)gp.push(0);for(mp=0;mp<8&&gp[mp]===0;++mp);for(mp==8?gp[7]=-1:gp[mp],pp.x=gp,pp.i=0,mp=256;mp>0;--mp)pp.next()}fp(dp,cp)}function lp(cp,dp){return dp.x=cp.x.slice(),dp.i=cp.i,dp}function up(cp,dp){cp==null&&(cp=+new Date);var fp=new sp(cp),pp=dp&&dp.state,hp=function(){return(fp.next()>>>0)/4294967296};return hp.double=function(){do var mp=fp.next()>>>11,gp=(fp.next()>>>0)/4294967296,vp=(mp+gp)/(1<<21);while(vp===0);return vp},hp.int32=fp.next,hp.quick=hp,pp&&(pp.x&&lp(pp,fp),hp.state=function(){return lp(fp,{})}),hp}rp&&rp.exports?rp.exports=up:ap&&ap.amd?ap(function(){return up}):this.xorshift7=up})(commonjsGlobal,_d,!1)})(xorshift7$1);var xorshift7Exports=xorshift7$1.exports,xor4096$1={exports:{}};xor4096$1.exports;(function(_d){(function(np,rp,ap){function sp(cp){var dp=this;dp.next=function(){var pp=dp.w,hp=dp.X,mp=dp.i,gp,vp;return dp.w=pp=pp+1640531527|0,vp=hp[mp+34&127],gp=hp[mp=mp+1&127],vp^=vp<<13,gp^=gp<<17,vp^=vp>>>15,gp^=gp>>>12,vp=hp[mp]=vp^gp,dp.i=mp,vp+(pp^pp>>>16)|0};function fp(pp,hp){var mp,gp,vp,xp,Sp,yp=[],bp=128;for(hp===(hp|0)?(gp=hp,hp=null):(hp=hp+"\0",gp=0,bp=Math.max(bp,hp.length)),vp=0,xp=-32;xp<bp;++xp)hp&&(gp^=hp.charCodeAt((xp+32)%hp.length)),xp===0&&(Sp=gp),gp^=gp<<10,gp^=gp>>>15,gp^=gp<<4,gp^=gp>>>13,xp>=0&&(Sp=Sp+1640531527|0,mp=yp[xp&127]^=gp+Sp,vp=mp==0?vp+1:0);for(vp>=128&&(yp[(hp&&hp.length||0)&127]=-1),vp=127,xp=4*128;xp>0;--xp)gp=yp[vp+34&127],mp=yp[vp=vp+1&127],gp^=gp<<13,mp^=mp<<17,gp^=gp>>>15,mp^=mp>>>12,yp[vp]=gp^mp;pp.w=Sp,pp.X=yp,pp.i=vp}fp(dp,cp)}function lp(cp,dp){return dp.i=cp.i,dp.w=cp.w,dp.X=cp.X.slice(),dp}function up(cp,dp){cp==null&&(cp=+new Date);var fp=new sp(cp),pp=dp&&dp.state,hp=function(){return(fp.next()>>>0)/4294967296};return hp.double=function(){do var mp=fp.next()>>>11,gp=(fp.next()>>>0)/4294967296,vp=(mp+gp)/(1<<21);while(vp===0);return vp},hp.int32=fp.next,hp.quick=hp,pp&&(pp.X&&lp(pp,fp),hp.state=function(){return lp(fp,{})}),hp}rp&&rp.exports?rp.exports=up:ap&&ap.amd?ap(function(){return up}):this.xor4096=up})(commonjsGlobal,_d,!1)})(xor4096$1);var xor4096Exports=xor4096$1.exports,tychei$1={exports:{}};tychei$1.exports;(function(_d){(function(np,rp,ap){function sp(cp){var dp=this,fp="";dp.next=function(){var hp=dp.b,mp=dp.c,gp=dp.d,vp=dp.a;return hp=hp<<25^hp>>>7^mp,mp=mp-gp|0,gp=gp<<24^gp>>>8^vp,vp=vp-hp|0,dp.b=hp=hp<<20^hp>>>12^mp,dp.c=mp=mp-gp|0,dp.d=gp<<16^mp>>>16^vp,dp.a=vp-hp|0},dp.a=0,dp.b=0,dp.c=-1640531527,dp.d=1367130551,cp===Math.floor(cp)?(dp.a=cp/4294967296|0,dp.b=cp|0):fp+=cp;for(var pp=0;pp<fp.length+20;pp++)dp.b^=fp.charCodeAt(pp)|0,dp.next()}function lp(cp,dp){return dp.a=cp.a,dp.b=cp.b,dp.c=cp.c,dp.d=cp.d,dp}function up(cp,dp){var fp=new sp(cp),pp=dp&&dp.state,hp=function(){return(fp.next()>>>0)/4294967296};return hp.double=function(){do var mp=fp.next()>>>11,gp=(fp.next()>>>0)/4294967296,vp=(mp+gp)/(1<<21);while(vp===0);return vp},hp.int32=fp.next,hp.quick=hp,pp&&(typeof pp=="object"&&lp(pp,fp),hp.state=function(){return lp(fp,{})}),hp}rp&&rp.exports?rp.exports=up:ap&&ap.amd?ap(function(){return up}):this.tychei=up})(commonjsGlobal,_d,!1)})(tychei$1);var tycheiExports=tychei$1.exports,seedrandom$2={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$0$1=getAugmentedNamespace(__viteBrowserExternal$1);(function(_d){(function(np,rp){var ap=(0,eval)("this"),sp=256,lp=6,up=52,cp="random",dp=rp.pow(sp,lp),fp=rp.pow(2,up),pp=fp*2,hp=sp-1,mp;function gp(wp,_p,Cp){var $p=[];_p=_p==!0?{entropy:!0}:_p||{};var Rp=yp(Sp(_p.entropy?[wp,Ep(np)]:wp??bp(),3),$p),Pp=new vp($p),Op=function(){for(var jp=Pp.g(lp),Mp=dp,Ap=0;jp<fp;)jp=(jp+Ap)*sp,Mp*=sp,Ap=Pp.g(1);for(;jp>=pp;)jp/=2,Mp/=2,Ap>>>=1;return(jp+Ap)/Mp};return Op.int32=function(){return Pp.g(4)|0},Op.quick=function(){return Pp.g(4)/4294967296},Op.double=Op,yp(Ep(Pp.S),np),(_p.pass||Cp||function(jp,Mp,Ap,Dp){return Dp&&(Dp.S&&xp(Dp,Pp),jp.state=function(){return xp(Pp,{})}),Ap?(rp[cp]=jp,Mp):jp})(Op,Rp,"global"in _p?_p.global:this==rp,_p.state)}rp["seed"+cp]=gp;function vp(wp){var _p,Cp=wp.length,$p=this,Rp=0,Pp=$p.i=$p.j=0,Op=$p.S=[];for(Cp||(wp=[Cp++]);Rp<sp;)Op[Rp]=Rp++;for(Rp=0;Rp<sp;Rp++)Op[Rp]=Op[Pp=hp&Pp+wp[Rp%Cp]+(_p=Op[Rp])],Op[Pp]=_p;($p.g=function(jp){for(var Mp,Ap=0,Dp=$p.i,Fp=$p.j,Ip=$p.S;jp--;)Mp=Ip[Dp=hp&Dp+1],Ap=Ap*sp+Ip[hp&(Ip[Dp]=Ip[Fp=hp&Fp+Mp])+(Ip[Fp]=Mp)];return $p.i=Dp,$p.j=Fp,Ap})(sp)}function xp(wp,_p){return _p.i=wp.i,_p.j=wp.j,_p.S=wp.S.slice(),_p}function Sp(wp,_p){var Cp=[],$p=typeof wp,Rp;if(_p&&$p=="object")for(Rp in wp)try{Cp.push(Sp(wp[Rp],_p-1))}catch{}return Cp.length?Cp:$p=="string"?wp:wp+"\0"}function yp(wp,_p){for(var Cp=wp+"",$p,Rp=0;Rp<Cp.length;)_p[hp&Rp]=hp&($p^=_p[hp&Rp]*19)+Cp.charCodeAt(Rp++);return Ep(_p)}function bp(){try{var wp;return mp&&(wp=mp.randomBytes)?wp=wp(sp):(wp=new Uint8Array(sp),(ap.crypto||ap.msCrypto).getRandomValues(wp)),Ep(wp)}catch{var _p=ap.navigator,Cp=_p&&_p.plugins;return[+new Date,ap,Cp,ap.screen,Ep(np)]}}function Ep(wp){return String.fromCharCode.apply(0,wp)}if(yp(rp.random(),np),_d.exports){_d.exports=gp;try{mp=require$$0$1}catch{}}})([],Math)})(seedrandom$2);var seedrandomExports=seedrandom$2.exports,alea=aleaExports,xor128=xor128Exports,xorwow=xorwowExports,xorshift7=xorshift7Exports,xor4096=xor4096Exports,tychei=tycheiExports,sr=seedrandomExports;sr.alea=alea;sr.xor128=xor128;sr.xorwow=xorwow;sr.xorshift7=xorshift7;sr.xor4096=xor4096;sr.tychei=tychei;var seedrandom$1=sr;/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var __extends$f=commonjsGlobal&&commonjsGlobal.__extends||function(){var _d=function(np,rp){return _d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ap,sp){ap.__proto__=sp}||function(ap,sp){for(var lp in sp)sp.hasOwnProperty(lp)&&(ap[lp]=sp[lp])},_d(np,rp)};return function(np,rp){_d(np,rp);function ap(){this.constructor=np}np.prototype=rp===null?Object.create(rp):(ap.prototype=rp.prototype,new ap)}}(),__awaiter$5=commonjsGlobal&&commonjsGlobal.__awaiter||function(_d,np,rp,ap){function sp(lp){return lp instanceof rp?lp:new rp(function(up){up(lp)})}return new(rp||(rp=Promise))(function(lp,up){function cp(pp){try{fp(ap.next(pp))}catch(hp){up(hp)}}function dp(pp){try{fp(ap.throw(pp))}catch(hp){up(hp)}}function fp(pp){pp.done?lp(pp.value):sp(pp.value).then(cp,dp)}fp((ap=ap.apply(_d,np||[])).next())})},__generator$5=commonjsGlobal&&commonjsGlobal.__generator||function(_d,np){var rp={label:0,sent:function(){if(lp[0]&1)throw lp[1];return lp[1]},trys:[],ops:[]},ap,sp,lp,up;return up={next:cp(0),throw:cp(1),return:cp(2)},typeof Symbol=="function"&&(up[Symbol.iterator]=function(){return this}),up;function cp(fp){return function(pp){return dp([fp,pp])}}function dp(fp){if(ap)throw new TypeError("Generator is already executing.");for(;rp;)try{if(ap=1,sp&&(lp=fp[0]&2?sp.return:fp[0]?sp.throw||((lp=sp.return)&&lp.call(sp),0):sp.next)&&!(lp=lp.call(sp,fp[1])).done)return lp;switch(sp=0,lp&&(fp=[fp[0]&2,lp.value]),fp[0]){case 0:case 1:lp=fp;break;case 4:return rp.label++,{value:fp[1],done:!1};case 5:rp.label++,sp=fp[1],fp=[0];continue;case 7:fp=rp.ops.pop(),rp.trys.pop();continue;default:if(lp=rp.trys,!(lp=lp.length>0&&lp[lp.length-1])&&(fp[0]===6||fp[0]===2)){rp=0;continue}if(fp[0]===3&&(!lp||fp[1]>lp[0]&&fp[1]<lp[3])){rp.label=fp[1];break}if(fp[0]===6&&rp.label<lp[1]){rp.label=lp[1],lp=fp;break}if(lp&&rp.label<lp[2]){rp.label=lp[2],rp.ops.push(fp);break}lp[2]&&rp.ops.pop(),rp.trys.pop();continue}fp=np.call(_d,rp)}catch(pp){fp=[6,pp],sp=0}finally{ap=lp=0}if(fp[0]&5)throw fp[1];return{value:fp[0]?fp[1]:void 0,done:!0}}};Object.defineProperty(teachableMobilenet,"__esModule",{value:!0});teachableMobilenet.createTeachable=teachableMobilenet.TeachableMobileNet=void 0;var tf=require$$0$2,tfjs_1=require$$0$2,tf_1=tf$2,custom_mobilenet_1=customMobilenet,seedrandom=seedrandom$1,VALIDATION_FRACTION=.15,isTensor=function(_d){return typeof _d.dataId=="object"&&typeof _d.shape=="object"};function flatOneHot(_d,np){var rp=new Array(np).fill(0);return rp[_d]=1,rp}function fisherYates(_d,np){for(var rp,ap=_d.length,sp=_d.slice(),lp=ap-1;lp>0;lp-=1){var up=void 0;np?up=Math.floor(np()*(lp+1)):up=Math.floor(Math.random()*(lp+1)),rp=[sp[up],sp[lp]],sp[lp]=rp[0],sp[up]=rp[1]}return sp}var TeachableMobileNet=function(_d){__extends$f(np,_d);function np(rp,ap){var sp=_d.call(this,tf.sequential(),ap)||this;return sp.totalSamples=0,sp.examples=[],sp.truncatedModel=rp,sp}return Object.defineProperty(np.prototype,"asSequentialModel",{get:function(){return this.model},enumerable:!1,configurable:!0}),Object.defineProperty(np.prototype,"isTrained",{get:function(){return!!this.model&&this.model.layers&&this.model.layers.length>2},enumerable:!1,configurable:!0}),Object.defineProperty(np.prototype,"isPrepared",{get:function(){return!!this.trainDataset},enumerable:!1,configurable:!0}),Object.defineProperty(np.prototype,"numClasses",{get:function(){return this._metadata.labels.length},enumerable:!1,configurable:!0}),np.prototype.addExample=function(rp,ap){return __awaiter$5(this,void 0,void 0,function(){var sp,lp,up;return __generator$5(this,function(cp){return sp=isTensor(ap)?ap:tf_1.capture(ap,this._metadata.grayscale),lp=this.truncatedModel.predict(sp),up=lp.dataSync(),sp.dispose(),lp.dispose(),this.examples[rp].push(up),this.totalSamples++,[2]})})},np.prototype.predict=function(rp,ap){return ap===void 0&&(ap=!1),__awaiter$5(this,void 0,void 0,function(){return __generator$5(this,function(sp){if(!this.model)throw new Error("Model has not been trained yet, called train() first");return[2,_d.prototype.predict.call(this,rp,ap)]})})},np.prototype.predictTopK=function(rp,ap,sp){return ap===void 0&&(ap=10),sp===void 0&&(sp=!1),__awaiter$5(this,void 0,void 0,function(){return __generator$5(this,function(lp){if(!this.model)throw new Error("Model has not been trained yet, called train() first");return[2,_d.prototype.predictTopK.call(this,rp,ap,sp)]})})},np.prototype.prepare=function(){for(var rp in this.examples)if(rp.length===0)throw new Error("Add some examples before training");var ap=this.convertToTfDataset();this.trainDataset=ap.trainDataset,this.validationDataset=ap.validationDataset},np.prototype.convertToTfDataset=function(){for(var rp=0;rp<this.examples.length;rp++)this.examples[rp]=fisherYates(this.examples[rp],this.seed);for(var ap=[],sp=[],lp=function(hp){var mp=flatOneHot(hp,up.numClasses),gp=up.examples[hp].length,vp=Math.ceil(VALIDATION_FRACTION*gp),xp=gp-vp,Sp=up.examples[hp].slice(0,xp).map(function(bp){return{data:bp,label:mp}}),yp=up.examples[hp].slice(xp).map(function(bp){return{data:bp,label:mp}});ap=ap.concat(Sp),sp=sp.concat(yp)},up=this,rp=0;rp<this.examples.length;rp++)lp(rp);ap=fisherYates(ap,this.seed),sp=fisherYates(sp,this.seed);var cp=tf.data.array(ap.map(function(hp){return hp.data})),dp=tf.data.array(sp.map(function(hp){return hp.data})),fp=tf.data.array(ap.map(function(hp){return hp.label})),pp=tf.data.array(sp.map(function(hp){return hp.label}));return{trainDataset:tf.data.zip({xs:cp,ys:fp}),validationDataset:tf.data.zip({xs:dp,ys:pp})}},np.prototype.save=function(rp,ap){return __awaiter$5(this,void 0,void 0,function(){return __generator$5(this,function(sp){return[2,this.model.save(rp,ap)]})})},np.prototype.train=function(rp,ap){return ap===void 0&&(ap={}),__awaiter$5(this,void 0,void 0,function(){var sp,lp,up,cp,dp,fp,pp,hp,mp,gp=this;return __generator$5(this,function(vp){switch(vp.label){case 0:if(sp=ap.onTrainEnd||function(){},ap.onTrainEnd=function(xp){gp.__stopTrainingResolve&&(gp.__stopTrainingResolve(),gp.__stopTrainingResolve=null),sp(xp)},this.isPrepared||this.prepare(),lp=this.getLabels().length,tfjs_1.util.assert(lp===this.numClasses,function(){return"Can not train, has "+lp+" labels and "+gp.numClasses+" classes"}),up=this.truncatedModel.outputs[0].shape.slice(1),cp=tf.util.sizeFromShape(up),this.seed?dp=tf.initializers.varianceScaling({seed:3.14}):dp=tf.initializers.varianceScaling({}),this.trainingModel=tf.sequential({layers:[tf.layers.dense({inputShape:[cp],units:rp.denseUnits,activation:"relu",kernelInitializer:dp,useBias:!0}),tf.layers.dense({kernelInitializer:dp,useBias:!1,activation:"softmax",units:this.numClasses})]}),fp=tf.train.adam(rp.learningRate),this.trainingModel.compile({optimizer:fp,loss:"categoricalCrossentropy",metrics:["accuracy"]}),!(rp.batchSize>0))throw new Error("Batch size is 0 or NaN. Please choose a non-zero fraction");return pp=this.trainDataset.batch(rp.batchSize),hp=this.validationDataset.batch(rp.batchSize),[4,this.trainingModel.fitDataset(pp,{epochs:rp.epochs,validationData:hp,callbacks:ap})];case 1:return vp.sent(),mp=tf.sequential(),mp.add(this.truncatedModel),mp.add(this.trainingModel),this.model=mp,fp.dispose(),[2,this.model]}})})},np.prototype.prepareDataset=function(){for(var rp=0;rp<this.numClasses;rp++)this.examples[rp]=[]},np.prototype.setLabel=function(rp,ap){this._metadata.labels[rp]=ap},np.prototype.setLabels=function(rp){this._metadata.labels=rp,this.prepareDataset()},np.prototype.getLabel=function(rp){return this._metadata.labels[rp]},np.prototype.getLabels=function(){return this._metadata.labels},np.prototype.setName=function(rp){this._metadata.modelName=rp},np.prototype.getName=function(){return this._metadata.modelName},np.prototype.stopTraining=function(){var rp=this,ap=new Promise(function(sp,lp){rp.trainingModel.stopTraining=!0,rp.__stopTrainingResolve=sp});return ap},np.prototype.dispose=function(){this.trainingModel.dispose(),_d.prototype.dispose.call(this)},np.prototype.calculateAccuracyPerClass=function(){return __awaiter$5(this,void 0,void 0,function(){var rp,ap,sp,lp,up,cp,dp,fp,pp,hp,Ep,mp,gp,vp,xp,Sp,yp,bp,Ep,wp=this;return __generator$5(this,function(_p){switch(_p.label){case 0:return rp=this.validationDataset.mapAsync(function(Cp){return __awaiter$5(wp,void 0,void 0,function(){return __generator$5(this,function($p){return[2,Cp.xs]})})}),ap=this.validationDataset.mapAsync(function(Cp){return __awaiter$5(wp,void 0,void 0,function(){return __generator$5(this,function($p){return[2,Cp.ys]})})}),sp=Math.min(ap.size,32),lp=Math.ceil(ap.size/sp),up=rp.batch(sp),cp=ap.batch(sp),[4,up.iterator()];case 1:return dp=_p.sent(),[4,cp.iterator()];case 2:fp=_p.sent(),pp=[],hp=[],Ep=0,_p.label=3;case 3:return Ep<lp?[4,dp.next()]:[3,7];case 4:return mp=_p.sent(),gp=this.trainingModel.predict(mp.value),vp=gp.argMax(1),pp.push(vp),[4,fp.next()];case 5:xp=_p.sent(),Sp=xp.value.argMax(1),hp.push(Sp),mp.value.dispose(),gp.dispose(),xp.value.dispose(),_p.label=6;case 6:return Ep++,[3,3];case 7:if(yp=tf.concat(hp),bp=tf.concat(pp),lp!==1)for(Ep=0;Ep<pp.length;Ep++)pp[Ep].dispose(),hp[Ep].dispose();return[2,{reference:yp,predictions:bp}]}})})},np.prototype.setSeed=function(rp){this.seed=seedrandom(rp)},np}(custom_mobilenet_1.CustomMobileNet);teachableMobilenet.TeachableMobileNet=TeachableMobileNet;function createTeachable(_d,np){return __awaiter$5(this,void 0,void 0,function(){var rp;return __generator$5(this,function(ap){switch(ap.label){case 0:return[4,custom_mobilenet_1.loadTruncatedMobileNet(np)];case 1:return rp=ap.sent(),[2,new TeachableMobileNet(rp,_d)]}})})}teachableMobilenet.createTeachable=createTeachable;var webcam={};function _typeof$3(_d){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$3=function(rp){return typeof rp}:_typeof$3=function(rp){return rp&&typeof Symbol=="function"&&rp.constructor===Symbol&&rp!==Symbol.prototype?"symbol":typeof rp},_typeof$3(_d)}function boundMethod(_d,np,rp){var ap=rp.value;if(typeof ap!="function")throw new TypeError("@boundMethod decorator can only be applied to methods not: ".concat(_typeof$3(ap)));var sp=!1;return{configurable:!0,get:function(){if(sp||this===_d.prototype||this.hasOwnProperty(np)||typeof ap!="function")return ap;var up=ap.bind(this);return sp=!0,Object.defineProperty(this,np,{configurable:!0,get:function(){return up},set:function(dp){ap=dp,delete this[np]}}),sp=!1,up},set:function(up){ap=up}}}function boundClass(_d){var np;return typeof Reflect<"u"&&typeof Reflect.ownKeys=="function"?np=Reflect.ownKeys(_d.prototype):(np=Object.getOwnPropertyNames(_d.prototype),typeof Object.getOwnPropertySymbols=="function"&&(np=np.concat(Object.getOwnPropertySymbols(_d.prototype)))),np.forEach(function(rp){if(rp!=="constructor"){var ap=Object.getOwnPropertyDescriptor(_d.prototype,rp);typeof ap.value=="function"&&Object.defineProperty(_d.prototype,rp,boundMethod(_d,rp,ap))}}),_d}function autobind(){return arguments.length===1?boundClass.apply(void 0,arguments):boundMethod.apply(void 0,arguments)}const esm=Object.freeze(Object.defineProperty({__proto__:null,boundClass,boundMethod,default:autobind},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(esm);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var __decorate=commonjsGlobal&&commonjsGlobal.__decorate||function(_d,np,rp,ap){var sp=arguments.length,lp=sp<3?np:ap===null?ap=Object.getOwnPropertyDescriptor(np,rp):ap,up;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")lp=Reflect.decorate(_d,np,rp,ap);else for(var cp=_d.length-1;cp>=0;cp--)(up=_d[cp])&&(lp=(sp<3?up(lp):sp>3?up(np,rp,lp):up(np,rp))||lp);return sp>3&&lp&&Object.defineProperty(np,rp,lp),lp},__awaiter$4=commonjsGlobal&&commonjsGlobal.__awaiter||function(_d,np,rp,ap){function sp(lp){return lp instanceof rp?lp:new rp(function(up){up(lp)})}return new(rp||(rp=Promise))(function(lp,up){function cp(pp){try{fp(ap.next(pp))}catch(hp){up(hp)}}function dp(pp){try{fp(ap.throw(pp))}catch(hp){up(hp)}}function fp(pp){pp.done?lp(pp.value):sp(pp.value).then(cp,dp)}fp((ap=ap.apply(_d,np||[])).next())})},__generator$4=commonjsGlobal&&commonjsGlobal.__generator||function(_d,np){var rp={label:0,sent:function(){if(lp[0]&1)throw lp[1];return lp[1]},trys:[],ops:[]},ap,sp,lp,up;return up={next:cp(0),throw:cp(1),return:cp(2)},typeof Symbol=="function"&&(up[Symbol.iterator]=function(){return this}),up;function cp(fp){return function(pp){return dp([fp,pp])}}function dp(fp){if(ap)throw new TypeError("Generator is already executing.");for(;rp;)try{if(ap=1,sp&&(lp=fp[0]&2?sp.return:fp[0]?sp.throw||((lp=sp.return)&&lp.call(sp),0):sp.next)&&!(lp=lp.call(sp,fp[1])).done)return lp;switch(sp=0,lp&&(fp=[fp[0]&2,lp.value]),fp[0]){case 0:case 1:lp=fp;break;case 4:return rp.label++,{value:fp[1],done:!1};case 5:rp.label++,sp=fp[1],fp=[0];continue;case 7:fp=rp.ops.pop(),rp.trys.pop();continue;default:if(lp=rp.trys,!(lp=lp.length>0&&lp[lp.length-1])&&(fp[0]===6||fp[0]===2)){rp=0;continue}if(fp[0]===3&&(!lp||fp[1]>lp[0]&&fp[1]<lp[3])){rp.label=fp[1];break}if(fp[0]===6&&rp.label<lp[1]){rp.label=lp[1],lp=fp;break}if(lp&&rp.label<lp[2]){rp.label=lp[2],rp.ops.push(fp);break}lp[2]&&rp.ops.pop(),rp.trys.pop();continue}fp=np.call(_d,rp)}catch(pp){fp=[6,pp],sp=0}finally{ap=lp=0}if(fp[0]&5)throw fp[1];return{value:fp[0]?fp[1]:void 0,done:!0}}};Object.defineProperty(webcam,"__esModule",{value:!0});webcam.Webcam=void 0;var autobind_decorator_1=require$$0,canvas_1=canvas,defaultVideoOptions={facingMode:"user",frameRate:24},fillConstraints=function(_d){return _d.facingMode=_d.facingMode||defaultVideoOptions.facingMode,_d.frameRate=_d.frameRate||defaultVideoOptions.frameRate,_d.aspectRatio=_d.aspectRatio||defaultVideoOptions.aspectRatio,_d},Webcam=function(){function _d(np,rp,ap){np===void 0&&(np=400),rp===void 0&&(rp=400),ap===void 0&&(ap=!1),this.width=np,this.height=rp,this.flip=ap}return _d.prototype.getWebcam=function(np){if(np===void 0&&(np={}),!window.navigator.mediaDevices||!window.navigator.mediaDevices.getUserMedia)return Promise.reject("Your browser does not support WebRTC. Please try another one.");np.width=640;var rp=fillConstraints(np),ap=document.createElement("video");return window.navigator.mediaDevices.getUserMedia({video:rp}).then(function(sp){return ap.srcObject=sp,ap.addEventListener("loadedmetadata",function(lp){var up=ap.videoWidth,cp=ap.videoHeight;ap.width=up,ap.height=cp}),ap},function(){return Promise.reject("Could not open your camera. You may have denied access.")})},_d.prototype.setup=function(np){return np===void 0&&(np={}),__awaiter$4(this,void 0,void 0,function(){var rp;return __generator$4(this,function(ap){switch(ap.label){case 0:return this.webcam?[3,2]:(rp=this,[4,this.getWebcam(np)]);case 1:rp.webcam=ap.sent(),this.canvas||(this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height),ap.label=2;case 2:return[2]}})})},_d.prototype.play=function(){var np=this.webcam.play();return np},_d.prototype.pause=function(){this.webcam.pause()},_d.prototype.stop=function(){this.stopStreamedVideo(this.webcam)},_d.prototype.update=function(){this.renderCameraToCanvas()},_d.prototype.stopStreamedVideo=function(np){var rp=np.srcObject,ap=rp.getTracks();ap.forEach(function(sp){sp.stop()}),np.srcObject=null},_d.prototype.renderCameraToCanvas=function(){if(this.canvas&&this.webcam){var np=this.canvas.getContext("2d");if(this.webcam.videoWidth!==0){var rp=canvas_1.cropTo(this.webcam,this.width,this.flip);np.drawImage(rp,0,0)}}},__decorate([autobind_decorator_1.default],_d.prototype,"getWebcam",null),__decorate([autobind_decorator_1.default],_d.prototype,"setup",null),__decorate([autobind_decorator_1.default],_d.prototype,"play",null),__decorate([autobind_decorator_1.default],_d.prototype,"pause",null),__decorate([autobind_decorator_1.default],_d.prototype,"stop",null),__decorate([autobind_decorator_1.default],_d.prototype,"update",null),__decorate([autobind_decorator_1.default],_d.prototype,"stopStreamedVideo",null),__decorate([autobind_decorator_1.default],_d.prototype,"renderCameraToCanvas",null),_d}();webcam.Webcam=Webcam;(function(_d){/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object.defineProperty(_d,"__esModule",{value:!0});var np=customMobilenet;Object.defineProperty(_d,"IMAGE_SIZE",{enumerable:!0,get:function(){return np.IMAGE_SIZE}}),Object.defineProperty(_d,"CustomMobileNet",{enumerable:!0,get:function(){return np.CustomMobileNet}}),Object.defineProperty(_d,"load",{enumerable:!0,get:function(){return np.load}}),Object.defineProperty(_d,"loadFromFiles",{enumerable:!0,get:function(){return np.loadFromFiles}}),Object.defineProperty(_d,"loadTruncatedMobileNet",{enumerable:!0,get:function(){return np.loadTruncatedMobileNet}});var rp=teachableMobilenet;Object.defineProperty(_d,"TeachableMobileNet",{enumerable:!0,get:function(){return rp.TeachableMobileNet}}),Object.defineProperty(_d,"createTeachable",{enumerable:!0,get:function(){return rp.createTeachable}});var ap=webcam;Object.defineProperty(_d,"Webcam",{enumerable:!0,get:function(){return ap.Webcam}});var sp=version$4;Object.defineProperty(_d,"version",{enumerable:!0,get:function(){return sp.version}})})(dist$1);const back="/assets/backSymbol-A5W0hIK8.svg",Header=reactExports.memo(({centerText:_d,align:np="start",filter:rp="none",prevPath:ap=-1})=>{const sp=useNavigate(),lp=()=>sp(ap,{state:ap!==-1&&{data:ap}});return jsxRuntimeExports.jsxs("header",{className:"header",children:[jsxRuntimeExports.jsx("img",{src:back,alt:"Back Icon",style:{filter:rp},onClick:lp}),jsxRuntimeExports.jsx("div",{className:"center-text",style:{justifyContent:np},children:_d}),jsxRuntimeExports.jsx("div",{className:"none"})]})});var dist={},_extends={},_global$1={exports:{}},global$5=_global$1.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=global$5);var _globalExports=_global$1.exports,_core={exports:{}},core$4=_core.exports={version:"2.6.12"};typeof __e=="number"&&(__e=core$4);var _coreExports=_core.exports,_aFunction=function(_d){if(typeof _d!="function")throw TypeError(_d+" is not a function!");return _d},aFunction=_aFunction,_ctx=function(_d,np,rp){if(aFunction(_d),np===void 0)return _d;switch(rp){case 1:return function(ap){return _d.call(np,ap)};case 2:return function(ap,sp){return _d.call(np,ap,sp)};case 3:return function(ap,sp,lp){return _d.call(np,ap,sp,lp)}}return function(){return _d.apply(np,arguments)}},_objectDp={},_isObject=function(_d){return typeof _d=="object"?_d!==null:typeof _d=="function"},isObject$5=_isObject,_anObject=function(_d){if(!isObject$5(_d))throw TypeError(_d+" is not an object!");return _d},_fails=function(_d){try{return!!_d()}catch{return!0}},_descriptors=!_fails(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7}),_domCreate,hasRequired_domCreate;function require_domCreate(){if(hasRequired_domCreate)return _domCreate;hasRequired_domCreate=1;var _d=_isObject,np=_globalExports.document,rp=_d(np)&&_d(np.createElement);return _domCreate=function(ap){return rp?np.createElement(ap):{}},_domCreate}var _ie8DomDefine=!_descriptors&&!_fails(function(){return Object.defineProperty(require_domCreate()("div"),"a",{get:function(){return 7}}).a!=7}),isObject$4=_isObject,_toPrimitive$1=function(_d,np){if(!isObject$4(_d))return _d;var rp,ap;if(np&&typeof(rp=_d.toString)=="function"&&!isObject$4(ap=rp.call(_d))||typeof(rp=_d.valueOf)=="function"&&!isObject$4(ap=rp.call(_d))||!np&&typeof(rp=_d.toString)=="function"&&!isObject$4(ap=rp.call(_d)))return ap;throw TypeError("Can't convert object to primitive value")},anObject$3=_anObject,IE8_DOM_DEFINE$1=_ie8DomDefine,toPrimitive$2=_toPrimitive$1,dP$3=Object.defineProperty;_objectDp.f=_descriptors?Object.defineProperty:function(np,rp,ap){if(anObject$3(np),rp=toPrimitive$2(rp,!0),anObject$3(ap),IE8_DOM_DEFINE$1)try{return dP$3(np,rp,ap)}catch{}if("get"in ap||"set"in ap)throw TypeError("Accessors not supported!");return"value"in ap&&(np[rp]=ap.value),np};var _propertyDesc=function(_d,np){return{enumerable:!(_d&1),configurable:!(_d&2),writable:!(_d&4),value:np}},dP$2=_objectDp,createDesc$2=_propertyDesc,_hide=_descriptors?function(_d,np,rp){return dP$2.f(_d,np,createDesc$2(1,rp))}:function(_d,np,rp){return _d[np]=rp,_d},hasOwnProperty$2={}.hasOwnProperty,_has=function(_d,np){return hasOwnProperty$2.call(_d,np)},global$4=_globalExports,core$3=_coreExports,ctx=_ctx,hide$2=_hide,has$6=_has,PROTOTYPE$2="prototype",$export$7=function(_d,np,rp){var ap=_d&$export$7.F,sp=_d&$export$7.G,lp=_d&$export$7.S,up=_d&$export$7.P,cp=_d&$export$7.B,dp=_d&$export$7.W,fp=sp?core$3:core$3[np]||(core$3[np]={}),pp=fp[PROTOTYPE$2],hp=sp?global$4:lp?global$4[np]:(global$4[np]||{})[PROTOTYPE$2],mp,gp,vp;sp&&(rp=np);for(mp in rp)gp=!ap&&hp&&hp[mp]!==void 0,!(gp&&has$6(fp,mp))&&(vp=gp?hp[mp]:rp[mp],fp[mp]=sp&&typeof hp[mp]!="function"?rp[mp]:cp&&gp?ctx(vp,global$4):dp&&hp[mp]==vp?function(xp){var Sp=function(yp,bp,Ep){if(this instanceof xp){switch(arguments.length){case 0:return new xp;case 1:return new xp(yp);case 2:return new xp(yp,bp)}return new xp(yp,bp,Ep)}return xp.apply(this,arguments)};return Sp[PROTOTYPE$2]=xp[PROTOTYPE$2],Sp}(vp):up&&typeof vp=="function"?ctx(Function.call,vp):vp,up&&((fp.virtual||(fp.virtual={}))[mp]=vp,_d&$export$7.R&&pp&&!pp[mp]&&hide$2(pp,mp,vp)))};$export$7.F=1;$export$7.G=2;$export$7.S=4;$export$7.P=8;$export$7.B=16;$export$7.W=32;$export$7.U=64;$export$7.R=128;var _export=$export$7,toString$2={}.toString,_cof=function(_d){return toString$2.call(_d).slice(8,-1)},_iobject,hasRequired_iobject;function require_iobject(){if(hasRequired_iobject)return _iobject;hasRequired_iobject=1;var _d=_cof;return _iobject=Object("z").propertyIsEnumerable(0)?Object:function(np){return _d(np)=="String"?np.split(""):Object(np)},_iobject}var _defined=function(_d){if(_d==null)throw TypeError("Can't call method on  "+_d);return _d},IObject=require_iobject(),defined$2=_defined,_toIobject=function(_d){return IObject(defined$2(_d))},ceil=Math.ceil,floor=Math.floor,_toInteger=function(_d){return isNaN(_d=+_d)?0:(_d>0?floor:ceil)(_d)},toInteger$2=_toInteger,min$1=Math.min,_toLength=function(_d){return _d>0?min$1(toInteger$2(_d),9007199254740991):0},toInteger$1=_toInteger,max=Math.max,min=Math.min,_toAbsoluteIndex=function(_d,np){return _d=toInteger$1(_d),_d<0?max(_d+np,0):min(_d,np)},toIObject$5=_toIobject,toLength=_toLength,toAbsoluteIndex=_toAbsoluteIndex,_arrayIncludes=function(_d){return function(np,rp,ap){var sp=toIObject$5(np),lp=toLength(sp.length),up=toAbsoluteIndex(ap,lp),cp;if(_d&&rp!=rp){for(;lp>up;)if(cp=sp[up++],cp!=cp)return!0}else for(;lp>up;up++)if((_d||up in sp)&&sp[up]===rp)return _d||up||0;return!_d&&-1}},_shared={exports:{}},_library=!0,core$2=_coreExports,global$3=_globalExports,SHARED="__core-js_shared__",store$1=global$3[SHARED]||(global$3[SHARED]={});(_shared.exports=function(_d,np){return store$1[_d]||(store$1[_d]=np!==void 0?np:{})})("versions",[]).push({version:core$2.version,mode:"pure",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"});var _sharedExports=_shared.exports,id$1=0,px=Math.random(),_uid=function(_d){return"Symbol(".concat(_d===void 0?"":_d,")_",(++id$1+px).toString(36))},shared$1=_sharedExports("keys"),uid$2=_uid,_sharedKey=function(_d){return shared$1[_d]||(shared$1[_d]=uid$2(_d))},has$5=_has,toIObject$4=_toIobject,arrayIndexOf=_arrayIncludes(!1),IE_PROTO$2=_sharedKey("IE_PROTO"),_objectKeysInternal=function(_d,np){var rp=toIObject$4(_d),ap=0,sp=[],lp;for(lp in rp)lp!=IE_PROTO$2&&has$5(rp,lp)&&sp.push(lp);for(;np.length>ap;)has$5(rp,lp=np[ap++])&&(~arrayIndexOf(sp,lp)||sp.push(lp));return sp},_enumBugKeys="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),$keys$2=_objectKeysInternal,enumBugKeys$1=_enumBugKeys,_objectKeys=Object.keys||function(np){return $keys$2(np,enumBugKeys$1)},_objectGops={};_objectGops.f=Object.getOwnPropertySymbols;var _objectPie={},hasRequired_objectPie;function require_objectPie(){return hasRequired_objectPie||(hasRequired_objectPie=1,_objectPie.f={}.propertyIsEnumerable),_objectPie}var defined$1=_defined,_toObject=function(_d){return Object(defined$1(_d))},_objectAssign,hasRequired_objectAssign;function require_objectAssign(){if(hasRequired_objectAssign)return _objectAssign;hasRequired_objectAssign=1;var _d=_descriptors,np=_objectKeys,rp=_objectGops,ap=require_objectPie(),sp=_toObject,lp=require_iobject(),up=Object.assign;return _objectAssign=!up||_fails(function(){var cp={},dp={},fp=Symbol(),pp="abcdefghijklmnopqrst";return cp[fp]=7,pp.split("").forEach(function(hp){dp[hp]=hp}),up({},cp)[fp]!=7||Object.keys(up({},dp)).join("")!=pp})?function(dp,fp){for(var pp=sp(dp),hp=arguments.length,mp=1,gp=rp.f,vp=ap.f;hp>mp;)for(var xp=lp(arguments[mp++]),Sp=gp?np(xp).concat(gp(xp)):np(xp),yp=Sp.length,bp=0,Ep;yp>bp;)Ep=Sp[bp++],(!_d||vp.call(xp,Ep))&&(pp[Ep]=xp[Ep]);return pp}:up,_objectAssign}var $export$6=_export;$export$6($export$6.S+$export$6.F,"Object",{assign:require_objectAssign()});var assign$2=_coreExports.Object.assign,assign$1={default:assign$2,__esModule:!0};_extends.__esModule=!0;var _assign=assign$1,_assign2=_interopRequireDefault$G(_assign);function _interopRequireDefault$G(_d){return _d&&_d.__esModule?_d:{default:_d}}_extends.default=_assign2.default||function(_d){for(var np=1;np<arguments.length;np++){var rp=arguments[np];for(var ap in rp)Object.prototype.hasOwnProperty.call(rp,ap)&&(_d[ap]=rp[ap])}return _d};var has$4=_has,toObject$2=_toObject,IE_PROTO$1=_sharedKey("IE_PROTO"),ObjectProto$1=Object.prototype,_objectGpo=Object.getPrototypeOf||function(_d){return _d=toObject$2(_d),has$4(_d,IE_PROTO$1)?_d[IE_PROTO$1]:typeof _d.constructor=="function"&&_d instanceof _d.constructor?_d.constructor.prototype:_d instanceof Object?ObjectProto$1:null},$export$5=_export,core$1=_coreExports,fails=_fails,_objectSap=function(_d,np){var rp=(core$1.Object||{})[_d]||Object[_d],ap={};ap[_d]=np(rp),$export$5($export$5.S+$export$5.F*fails(function(){rp(1)}),"Object",ap)},toObject$1=_toObject,$getPrototypeOf=_objectGpo;_objectSap("getPrototypeOf",function(){return function(np){return $getPrototypeOf(toObject$1(np))}});var getPrototypeOf$3=_coreExports.Object.getPrototypeOf,getPrototypeOf$2={default:getPrototypeOf$3,__esModule:!0},classCallCheck={};classCallCheck.__esModule=!0;classCallCheck.default=function(_d,np){if(!(_d instanceof np))throw new TypeError("Cannot call a class as a function")};var createClass={},$export$4=_export;$export$4($export$4.S+$export$4.F*!_descriptors,"Object",{defineProperty:_objectDp.f});var $Object$1=_coreExports.Object,defineProperty$2=function(np,rp,ap){return $Object$1.defineProperty(np,rp,ap)},defineProperty$1={default:defineProperty$2,__esModule:!0};createClass.__esModule=!0;var _defineProperty$2=defineProperty$1,_defineProperty2=_interopRequireDefault$F(_defineProperty$2);function _interopRequireDefault$F(_d){return _d&&_d.__esModule?_d:{default:_d}}createClass.default=function(){function _d(np,rp){for(var ap=0;ap<rp.length;ap++){var sp=rp[ap];sp.enumerable=sp.enumerable||!1,sp.configurable=!0,"value"in sp&&(sp.writable=!0),(0,_defineProperty2.default)(np,sp.key,sp)}}return function(np,rp,ap){return rp&&_d(np.prototype,rp),ap&&_d(np,ap),np}}();var possibleConstructorReturn={},_typeof$2={},toInteger=_toInteger,defined=_defined,_stringAt=function(_d){return function(np,rp){var ap=String(defined(np)),sp=toInteger(rp),lp=ap.length,up,cp;return sp<0||sp>=lp?_d?"":void 0:(up=ap.charCodeAt(sp),up<55296||up>56319||sp+1===lp||(cp=ap.charCodeAt(sp+1))<56320||cp>57343?_d?ap.charAt(sp):up:_d?ap.slice(sp,sp+2):(up-55296<<10)+(cp-56320)+65536)}},_redefine=_hide,_iterators={},dP$1=_objectDp,anObject$2=_anObject,getKeys$1=_objectKeys,_objectDps=_descriptors?Object.defineProperties:function(np,rp){anObject$2(np);for(var ap=getKeys$1(rp),sp=ap.length,lp=0,up;sp>lp;)dP$1.f(np,up=ap[lp++],rp[up]);return np},_html,hasRequired_html;function require_html(){if(hasRequired_html)return _html;hasRequired_html=1;var _d=_globalExports.document;return _html=_d&&_d.documentElement,_html}var anObject$1=_anObject,dPs=_objectDps,enumBugKeys=_enumBugKeys,IE_PROTO=_sharedKey("IE_PROTO"),Empty=function(){},PROTOTYPE$1="prototype",createDict=function(){var _d=require_domCreate()("iframe"),np=enumBugKeys.length,rp="<",ap=">",sp;for(_d.style.display="none",require_html().appendChild(_d),_d.src="javascript:",sp=_d.contentWindow.document,sp.open(),sp.write(rp+"script"+ap+"document.F=Object"+rp+"/script"+ap),sp.close(),createDict=sp.F;np--;)delete createDict[PROTOTYPE$1][enumBugKeys[np]];return createDict()},_objectCreate=Object.create||function(np,rp){var ap;return np!==null?(Empty[PROTOTYPE$1]=anObject$1(np),ap=new Empty,Empty[PROTOTYPE$1]=null,ap[IE_PROTO]=np):ap=createDict(),rp===void 0?ap:dPs(ap,rp)},_wks={exports:{}},store=_sharedExports("wks"),uid$1=_uid,Symbol$1=_globalExports.Symbol,USE_SYMBOL=typeof Symbol$1=="function",$exports=_wks.exports=function(_d){return store[_d]||(store[_d]=USE_SYMBOL&&Symbol$1[_d]||(USE_SYMBOL?Symbol$1:uid$1)("Symbol."+_d))};$exports.store=store;var _wksExports=_wks.exports,def=_objectDp.f,has$3=_has,TAG=_wksExports("toStringTag"),_setToStringTag=function(_d,np,rp){_d&&!has$3(_d=rp?_d:_d.prototype,TAG)&&def(_d,TAG,{configurable:!0,value:np})},create$2=_objectCreate,descriptor=_propertyDesc,setToStringTag$2=_setToStringTag,IteratorPrototype={};_hide(IteratorPrototype,_wksExports("iterator"),function(){return this});var _iterCreate=function(_d,np,rp){_d.prototype=create$2(IteratorPrototype,{next:descriptor(1,rp)}),setToStringTag$2(_d,np+" Iterator")},$export$3=_export,redefine$1=_redefine,hide$1=_hide,Iterators$2=_iterators,$iterCreate=_iterCreate,setToStringTag$1=_setToStringTag,getPrototypeOf$1=_objectGpo,ITERATOR=_wksExports("iterator"),BUGGY=!([].keys&&"next"in[].keys()),FF_ITERATOR="@@iterator",KEYS="keys",VALUES="values",returnThis=function(){return this},_iterDefine=function(_d,np,rp,ap,sp,lp,up){$iterCreate(rp,np,ap);var cp=function(Ep){if(!BUGGY&&Ep in hp)return hp[Ep];switch(Ep){case KEYS:return function(){return new rp(this,Ep)};case VALUES:return function(){return new rp(this,Ep)}}return function(){return new rp(this,Ep)}},dp=np+" Iterator",fp=sp==VALUES,pp=!1,hp=_d.prototype,mp=hp[ITERATOR]||hp[FF_ITERATOR]||sp&&hp[sp],gp=mp||cp(sp),vp=sp?fp?cp("entries"):gp:void 0,xp=np=="Array"&&hp.entries||mp,Sp,yp,bp;if(xp&&(bp=getPrototypeOf$1(xp.call(new _d)),bp!==Object.prototype&&bp.next&&setToStringTag$1(bp,dp,!0)),fp&&mp&&mp.name!==VALUES&&(pp=!0,gp=function(){return mp.call(this)}),up&&(BUGGY||pp||!hp[ITERATOR])&&hide$1(hp,ITERATOR,gp),Iterators$2[np]=gp,Iterators$2[dp]=returnThis,sp)if(Sp={values:fp?gp:cp(VALUES),keys:lp?gp:cp(KEYS),entries:vp},up)for(yp in Sp)yp in hp||redefine$1(hp,yp,Sp[yp]);else $export$3($export$3.P+$export$3.F*(BUGGY||pp),np,Sp);return Sp},$at=_stringAt(!0);_iterDefine(String,"String",function(_d){this._t=String(_d),this._i=0},function(){var _d=this._t,np=this._i,rp;return np>=_d.length?{value:void 0,done:!0}:(rp=$at(_d,np),this._i+=rp.length,{value:rp,done:!1})});var _iterStep=function(_d,np){return{value:np,done:!!_d}},step=_iterStep,Iterators$1=_iterators,toIObject$3=_toIobject;_iterDefine(Array,"Array",function(_d,np){this._t=toIObject$3(_d),this._i=0,this._k=np},function(){var _d=this._t,np=this._k,rp=this._i++;return!_d||rp>=_d.length?(this._t=void 0,step(1)):np=="keys"?step(0,rp):np=="values"?step(0,_d[rp]):step(0,[rp,_d[rp]])},"values");Iterators$1.Arguments=Iterators$1.Array;var global$2=_globalExports,hide=_hide,Iterators=_iterators,TO_STRING_TAG=_wksExports("toStringTag"),DOMIterables="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(",");for(var i$1=0;i$1<DOMIterables.length;i$1++){var NAME=DOMIterables[i$1],Collection=global$2[NAME],proto=Collection&&Collection.prototype;proto&&!proto[TO_STRING_TAG]&&hide(proto,TO_STRING_TAG,NAME),Iterators[NAME]=Iterators.Array}var _wksExt={};_wksExt.f=_wksExports;var iterator$1=_wksExt.f("iterator"),iterator={default:iterator$1,__esModule:!0},_meta={exports:{}},META$1=_uid("meta"),isObject$3=_isObject,has$2=_has,setDesc=_objectDp.f,id=0,isExtensible=Object.isExtensible||function(){return!0},FREEZE=!_fails(function(){return isExtensible(Object.preventExtensions({}))}),setMeta=function(_d){setDesc(_d,META$1,{value:{i:"O"+ ++id,w:{}}})},fastKey=function(_d,np){if(!isObject$3(_d))return typeof _d=="symbol"?_d:(typeof _d=="string"?"S":"P")+_d;if(!has$2(_d,META$1)){if(!isExtensible(_d))return"F";if(!np)return"E";setMeta(_d)}return _d[META$1].i},getWeak=function(_d,np){if(!has$2(_d,META$1)){if(!isExtensible(_d))return!0;if(!np)return!1;setMeta(_d)}return _d[META$1].w},onFreeze=function(_d){return FREEZE&&meta.NEED&&isExtensible(_d)&&!has$2(_d,META$1)&&setMeta(_d),_d},meta=_meta.exports={KEY:META$1,NEED:!1,fastKey,getWeak,onFreeze},_metaExports=_meta.exports,core=_coreExports,wksExt$1=_wksExt,defineProperty=_objectDp.f,_wksDefine=function(_d){var np=core.Symbol||(core.Symbol={});_d.charAt(0)!="_"&&!(_d in np)&&defineProperty(np,_d,{value:wksExt$1.f(_d)})},getKeys=_objectKeys,gOPS=_objectGops,pIE$1=require_objectPie(),_enumKeys=function(_d){var np=getKeys(_d),rp=gOPS.f;if(rp)for(var ap=rp(_d),sp=pIE$1.f,lp=0,up;ap.length>lp;)sp.call(_d,up=ap[lp++])&&np.push(up);return np},cof=_cof,_isArray=Array.isArray||function(np){return cof(np)=="Array"},_objectGopnExt={},_objectGopn={},$keys$1=_objectKeysInternal,hiddenKeys=_enumBugKeys.concat("length","prototype");_objectGopn.f=Object.getOwnPropertyNames||function(np){return $keys$1(np,hiddenKeys)};var toIObject$2=_toIobject,gOPN$1=_objectGopn.f,toString$1={}.toString,windowNames=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],getWindowNames=function(_d){try{return gOPN$1(_d)}catch{return windowNames.slice()}};_objectGopnExt.f=function(np){return windowNames&&toString$1.call(np)=="[object Window]"?getWindowNames(np):gOPN$1(toIObject$2(np))};var _objectGopd={},pIE=require_objectPie(),createDesc$1=_propertyDesc,toIObject$1=_toIobject,toPrimitive$1=_toPrimitive$1,has$1=_has,IE8_DOM_DEFINE=_ie8DomDefine,gOPD$1=Object.getOwnPropertyDescriptor;_objectGopd.f=_descriptors?gOPD$1:function(np,rp){if(np=toIObject$1(np),rp=toPrimitive$1(rp,!0),IE8_DOM_DEFINE)try{return gOPD$1(np,rp)}catch{}if(has$1(np,rp))return createDesc$1(!pIE.f.call(np,rp),np[rp])};var global$1=_globalExports,has=_has,DESCRIPTORS=_descriptors,$export$2=_export,redefine=_redefine,META=_metaExports.KEY,$fails=_fails,shared=_sharedExports,setToStringTag=_setToStringTag,uid=_uid,wks=_wksExports,wksExt=_wksExt,wksDefine=_wksDefine,enumKeys=_enumKeys,isArray$1=_isArray,anObject=_anObject,isObject$2=_isObject,toObject=_toObject,toIObject=_toIobject,toPrimitive=_toPrimitive$1,createDesc=_propertyDesc,_create$1=_objectCreate,gOPNExt=_objectGopnExt,$GOPD=_objectGopd,$GOPS=_objectGops,$DP=_objectDp,$keys=_objectKeys,gOPD=$GOPD.f,dP=$DP.f,gOPN=gOPNExt.f,$Symbol=global$1.Symbol,$JSON=global$1.JSON,_stringify$3=$JSON&&$JSON.stringify,PROTOTYPE="prototype",HIDDEN=wks("_hidden"),TO_PRIMITIVE=wks("toPrimitive"),isEnum={}.propertyIsEnumerable,SymbolRegistry=shared("symbol-registry"),AllSymbols=shared("symbols"),OPSymbols=shared("op-symbols"),ObjectProto=Object[PROTOTYPE],USE_NATIVE=typeof $Symbol=="function"&&!!$GOPS.f,QObject=global$1.QObject,setter=!QObject||!QObject[PROTOTYPE]||!QObject[PROTOTYPE].findChild,setSymbolDesc=DESCRIPTORS&&$fails(function(){return _create$1(dP({},"a",{get:function(){return dP(this,"a",{value:7}).a}})).a!=7})?function(_d,np,rp){var ap=gOPD(ObjectProto,np);ap&&delete ObjectProto[np],dP(_d,np,rp),ap&&_d!==ObjectProto&&dP(ObjectProto,np,ap)}:dP,wrap=function(_d){var np=AllSymbols[_d]=_create$1($Symbol[PROTOTYPE]);return np._k=_d,np},isSymbol=USE_NATIVE&&typeof $Symbol.iterator=="symbol"?function(_d){return typeof _d=="symbol"}:function(_d){return _d instanceof $Symbol},$defineProperty=function(np,rp,ap){return np===ObjectProto&&$defineProperty(OPSymbols,rp,ap),anObject(np),rp=toPrimitive(rp,!0),anObject(ap),has(AllSymbols,rp)?(ap.enumerable?(has(np,HIDDEN)&&np[HIDDEN][rp]&&(np[HIDDEN][rp]=!1),ap=_create$1(ap,{enumerable:createDesc(0,!1)})):(has(np,HIDDEN)||dP(np,HIDDEN,createDesc(1,{})),np[HIDDEN][rp]=!0),setSymbolDesc(np,rp,ap)):dP(np,rp,ap)},$defineProperties=function(np,rp){anObject(np);for(var ap=enumKeys(rp=toIObject(rp)),sp=0,lp=ap.length,up;lp>sp;)$defineProperty(np,up=ap[sp++],rp[up]);return np},$create=function(np,rp){return rp===void 0?_create$1(np):$defineProperties(_create$1(np),rp)},$propertyIsEnumerable=function(np){var rp=isEnum.call(this,np=toPrimitive(np,!0));return this===ObjectProto&&has(AllSymbols,np)&&!has(OPSymbols,np)?!1:rp||!has(this,np)||!has(AllSymbols,np)||has(this,HIDDEN)&&this[HIDDEN][np]?rp:!0},$getOwnPropertyDescriptor=function(np,rp){if(np=toIObject(np),rp=toPrimitive(rp,!0),!(np===ObjectProto&&has(AllSymbols,rp)&&!has(OPSymbols,rp))){var ap=gOPD(np,rp);return ap&&has(AllSymbols,rp)&&!(has(np,HIDDEN)&&np[HIDDEN][rp])&&(ap.enumerable=!0),ap}},$getOwnPropertyNames=function(np){for(var rp=gOPN(toIObject(np)),ap=[],sp=0,lp;rp.length>sp;)!has(AllSymbols,lp=rp[sp++])&&lp!=HIDDEN&&lp!=META&&ap.push(lp);return ap},$getOwnPropertySymbols=function(np){for(var rp=np===ObjectProto,ap=gOPN(rp?OPSymbols:toIObject(np)),sp=[],lp=0,up;ap.length>lp;)has(AllSymbols,up=ap[lp++])&&(!rp||has(ObjectProto,up))&&sp.push(AllSymbols[up]);return sp};USE_NATIVE||($Symbol=function(){if(this instanceof $Symbol)throw TypeError("Symbol is not a constructor!");var np=uid(arguments.length>0?arguments[0]:void 0),rp=function(ap){this===ObjectProto&&rp.call(OPSymbols,ap),has(this,HIDDEN)&&has(this[HIDDEN],np)&&(this[HIDDEN][np]=!1),setSymbolDesc(this,np,createDesc(1,ap))};return DESCRIPTORS&&setter&&setSymbolDesc(ObjectProto,np,{configurable:!0,set:rp}),wrap(np)},redefine($Symbol[PROTOTYPE],"toString",function(){return this._k}),$GOPD.f=$getOwnPropertyDescriptor,$DP.f=$defineProperty,_objectGopn.f=gOPNExt.f=$getOwnPropertyNames,require_objectPie().f=$propertyIsEnumerable,$GOPS.f=$getOwnPropertySymbols,DESCRIPTORS&&!_library&&redefine(ObjectProto,"propertyIsEnumerable",$propertyIsEnumerable),wksExt.f=function(_d){return wrap(wks(_d))});$export$2($export$2.G+$export$2.W+$export$2.F*!USE_NATIVE,{Symbol:$Symbol});for(var es6Symbols="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),j=0;es6Symbols.length>j;)wks(es6Symbols[j++]);for(var wellKnownSymbols=$keys(wks.store),k=0;wellKnownSymbols.length>k;)wksDefine(wellKnownSymbols[k++]);$export$2($export$2.S+$export$2.F*!USE_NATIVE,"Symbol",{for:function(_d){return has(SymbolRegistry,_d+="")?SymbolRegistry[_d]:SymbolRegistry[_d]=$Symbol(_d)},keyFor:function(np){if(!isSymbol(np))throw TypeError(np+" is not a symbol!");for(var rp in SymbolRegistry)if(SymbolRegistry[rp]===np)return rp},useSetter:function(){setter=!0},useSimple:function(){setter=!1}});$export$2($export$2.S+$export$2.F*!USE_NATIVE,"Object",{create:$create,defineProperty:$defineProperty,defineProperties:$defineProperties,getOwnPropertyDescriptor:$getOwnPropertyDescriptor,getOwnPropertyNames:$getOwnPropertyNames,getOwnPropertySymbols:$getOwnPropertySymbols});var FAILS_ON_PRIMITIVES=$fails(function(){$GOPS.f(1)});$export$2($export$2.S+$export$2.F*FAILS_ON_PRIMITIVES,"Object",{getOwnPropertySymbols:function(np){return $GOPS.f(toObject(np))}});$JSON&&$export$2($export$2.S+$export$2.F*(!USE_NATIVE||$fails(function(){var _d=$Symbol();return _stringify$3([_d])!="[null]"||_stringify$3({a:_d})!="{}"||_stringify$3(Object(_d))!="{}"})),"JSON",{stringify:function(np){for(var rp=[np],ap=1,sp,lp;arguments.length>ap;)rp.push(arguments[ap++]);if(lp=sp=rp[1],!(!isObject$2(sp)&&np===void 0||isSymbol(np)))return isArray$1(sp)||(sp=function(up,cp){if(typeof lp=="function"&&(cp=lp.call(this,up,cp)),!isSymbol(cp))return cp}),rp[1]=sp,_stringify$3.apply($JSON,rp)}});$Symbol[PROTOTYPE][TO_PRIMITIVE]||_hide($Symbol[PROTOTYPE],TO_PRIMITIVE,$Symbol[PROTOTYPE].valueOf);setToStringTag($Symbol,"Symbol");setToStringTag(Math,"Math",!0);setToStringTag(global$1.JSON,"JSON",!0);_wksDefine("asyncIterator");_wksDefine("observable");var symbol$1=_coreExports.Symbol,symbol={default:symbol$1,__esModule:!0};_typeof$2.__esModule=!0;var _iterator=iterator,_iterator2=_interopRequireDefault$E(_iterator),_symbol=symbol,_symbol2=_interopRequireDefault$E(_symbol),_typeof$1=typeof _symbol2.default=="function"&&typeof _iterator2.default=="symbol"?function(_d){return typeof _d}:function(_d){return _d&&typeof _symbol2.default=="function"&&_d.constructor===_symbol2.default&&_d!==_symbol2.default.prototype?"symbol":typeof _d};function _interopRequireDefault$E(_d){return _d&&_d.__esModule?_d:{default:_d}}_typeof$2.default=typeof _symbol2.default=="function"&&_typeof$1(_iterator2.default)==="symbol"?function(_d){return typeof _d>"u"?"undefined":_typeof$1(_d)}:function(_d){return _d&&typeof _symbol2.default=="function"&&_d.constructor===_symbol2.default&&_d!==_symbol2.default.prototype?"symbol":typeof _d>"u"?"undefined":_typeof$1(_d)};possibleConstructorReturn.__esModule=!0;var _typeof2$1=_typeof$2,_typeof3$1=_interopRequireDefault$D(_typeof2$1);function _interopRequireDefault$D(_d){return _d&&_d.__esModule?_d:{default:_d}}possibleConstructorReturn.default=function(_d,np){if(!_d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return np&&((typeof np>"u"?"undefined":(0,_typeof3$1.default)(np))==="object"||typeof np=="function")?np:_d};var inherits$1={},_setProto,hasRequired_setProto;function require_setProto(){if(hasRequired_setProto)return _setProto;hasRequired_setProto=1;var _d=_isObject,np=_anObject,rp=function(ap,sp){if(np(ap),!_d(sp)&&sp!==null)throw TypeError(sp+": can't set as prototype!")};return _setProto={set:Object.setPrototypeOf||("__proto__"in{}?function(ap,sp,lp){try{lp=_ctx(Function.call,_objectGopd.f(Object.prototype,"__proto__").set,2),lp(ap,[]),sp=!(ap instanceof Array)}catch{sp=!0}return function(cp,dp){return rp(cp,dp),sp?cp.__proto__=dp:lp(cp,dp),cp}}({},!1):void 0),check:rp},_setProto}var $export$1=_export;$export$1($export$1.S,"Object",{setPrototypeOf:require_setProto().set});var setPrototypeOf$1=_coreExports.Object.setPrototypeOf,setPrototypeOf={default:setPrototypeOf$1,__esModule:!0},$export=_export;$export($export.S,"Object",{create:_objectCreate});var $Object=_coreExports.Object,create$1=function(np,rp){return $Object.create(np,rp)},create={default:create$1,__esModule:!0};inherits$1.__esModule=!0;var _setPrototypeOf=setPrototypeOf,_setPrototypeOf2=_interopRequireDefault$C(_setPrototypeOf),_create=create,_create2=_interopRequireDefault$C(_create),_typeof2=_typeof$2,_typeof3=_interopRequireDefault$C(_typeof2);function _interopRequireDefault$C(_d){return _d&&_d.__esModule?_d:{default:_d}}inherits$1.default=function(_d,np){if(typeof np!="function"&&np!==null)throw new TypeError("Super expression must either be null or a function, not "+(typeof np>"u"?"undefined":(0,_typeof3.default)(np)));_d.prototype=(0,_create2.default)(np&&np.prototype,{constructor:{value:_d,enumerable:!1,writable:!0,configurable:!0}}),np&&(_setPrototypeOf2.default?(0,_setPrototypeOf2.default)(_d,np):_d.__proto__=np)};var lottie={exports:{}};(function(module,exports){typeof navigator<"u"&&function(_d,np){module.exports=np()}(commonjsGlobal,function(){var svgNS="http://www.w3.org/2000/svg",locationHref="",_useWebWorker=!1,initialDefaultFrame=-999999,setWebWorker=function(np){_useWebWorker=!!np},getWebWorker=function(){return _useWebWorker},setLocationHref=function(np){locationHref=np},getLocationHref=function(){return locationHref};function createTag(_d){return document.createElement(_d)}function extendPrototype(_d,np){var rp,ap=_d.length,sp;for(rp=0;rp<ap;rp+=1){sp=_d[rp].prototype;for(var lp in sp)Object.prototype.hasOwnProperty.call(sp,lp)&&(np.prototype[lp]=sp[lp])}}function getDescriptor(_d,np){return Object.getOwnPropertyDescriptor(_d,np)}function createProxyFunction(_d){function np(){}return np.prototype=_d,np}var audioControllerFactory=function(){function _d(np){this.audios=[],this.audioFactory=np,this._volume=1,this._isMuted=!1}return _d.prototype={addAudio:function(rp){this.audios.push(rp)},pause:function(){var rp,ap=this.audios.length;for(rp=0;rp<ap;rp+=1)this.audios[rp].pause()},resume:function(){var rp,ap=this.audios.length;for(rp=0;rp<ap;rp+=1)this.audios[rp].resume()},setRate:function(rp){var ap,sp=this.audios.length;for(ap=0;ap<sp;ap+=1)this.audios[ap].setRate(rp)},createAudio:function(rp){return this.audioFactory?this.audioFactory(rp):window.Howl?new window.Howl({src:[rp]}):{isPlaying:!1,play:function(){this.isPlaying=!0},seek:function(){this.isPlaying=!1},playing:function(){},rate:function(){},setVolume:function(){}}},setAudioFactory:function(rp){this.audioFactory=rp},setVolume:function(rp){this._volume=rp,this._updateVolume()},mute:function(){this._isMuted=!0,this._updateVolume()},unmute:function(){this._isMuted=!1,this._updateVolume()},getVolume:function(){return this._volume},_updateVolume:function(){var rp,ap=this.audios.length;for(rp=0;rp<ap;rp+=1)this.audios[rp].volume(this._volume*(this._isMuted?0:1))}},function(){return new _d}}(),createTypedArray=function(){function _d(rp,ap){var sp=0,lp=[],up;switch(rp){case"int16":case"uint8c":up=1;break;default:up=1.1;break}for(sp=0;sp<ap;sp+=1)lp.push(up);return lp}function np(rp,ap){return rp==="float32"?new Float32Array(ap):rp==="int16"?new Int16Array(ap):rp==="uint8c"?new Uint8ClampedArray(ap):_d(rp,ap)}return typeof Uint8ClampedArray=="function"&&typeof Float32Array=="function"?np:_d}();function createSizedArray(_d){return Array.apply(null,{length:_d})}function _typeof$6(_d){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$6=function(rp){return typeof rp}:_typeof$6=function(rp){return rp&&typeof Symbol=="function"&&rp.constructor===Symbol&&rp!==Symbol.prototype?"symbol":typeof rp},_typeof$6(_d)}var subframeEnabled=!0,expressionsPlugin=null,expressionsInterfaces=null,idPrefix$1="",isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),bmPow=Math.pow,bmSqrt=Math.sqrt,bmFloor=Math.floor,bmMax=Math.max,bmMin=Math.min,BMMath={};(function(){var _d=["abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","cbrt","expm1","clz32","cos","cosh","exp","floor","fround","hypot","imul","log","log1p","log2","log10","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc","E","LN10","LN2","LOG10E","LOG2E","PI","SQRT1_2","SQRT2"],np,rp=_d.length;for(np=0;np<rp;np+=1)BMMath[_d[np]]=Math[_d[np]]})(),BMMath.random=Math.random,BMMath.abs=function(_d){var np=_typeof$6(_d);if(np==="object"&&_d.length){var rp=createSizedArray(_d.length),ap,sp=_d.length;for(ap=0;ap<sp;ap+=1)rp[ap]=Math.abs(_d[ap]);return rp}return Math.abs(_d)};var defaultCurveSegments=150,degToRads=Math.PI/180,roundCorner=.5519;function styleDiv(_d){_d.style.position="absolute",_d.style.top=0,_d.style.left=0,_d.style.display="block",_d.style.transformOrigin="0 0",_d.style.webkitTransformOrigin="0 0",_d.style.backfaceVisibility="visible",_d.style.webkitBackfaceVisibility="visible",_d.style.transformStyle="preserve-3d",_d.style.webkitTransformStyle="preserve-3d",_d.style.mozTransformStyle="preserve-3d"}function BMEnterFrameEvent(_d,np,rp,ap){this.type=_d,this.currentTime=np,this.totalTime=rp,this.direction=ap<0?-1:1}function BMCompleteEvent(_d,np){this.type=_d,this.direction=np<0?-1:1}function BMCompleteLoopEvent(_d,np,rp,ap){this.type=_d,this.currentLoop=rp,this.totalLoops=np,this.direction=ap<0?-1:1}function BMSegmentStartEvent(_d,np,rp){this.type=_d,this.firstFrame=np,this.totalFrames=rp}function BMDestroyEvent(_d,np){this.type=_d,this.target=np}function BMRenderFrameErrorEvent(_d,np){this.type="renderFrameError",this.nativeError=_d,this.currentTime=np}function BMConfigErrorEvent(_d){this.type="configError",this.nativeError=_d}var createElementID=function(){var _d=0;return function(){return _d+=1,idPrefix$1+"__lottie_element_"+_d}}();function HSVtoRGB(_d,np,rp){var ap,sp,lp,up,cp,dp,fp,pp;switch(up=Math.floor(_d*6),cp=_d*6-up,dp=rp*(1-np),fp=rp*(1-cp*np),pp=rp*(1-(1-cp)*np),up%6){case 0:ap=rp,sp=pp,lp=dp;break;case 1:ap=fp,sp=rp,lp=dp;break;case 2:ap=dp,sp=rp,lp=pp;break;case 3:ap=dp,sp=fp,lp=rp;break;case 4:ap=pp,sp=dp,lp=rp;break;case 5:ap=rp,sp=dp,lp=fp;break}return[ap,sp,lp]}function RGBtoHSV(_d,np,rp){var ap=Math.max(_d,np,rp),sp=Math.min(_d,np,rp),lp=ap-sp,up,cp=ap===0?0:lp/ap,dp=ap/255;switch(ap){case sp:up=0;break;case _d:up=np-rp+lp*(np<rp?6:0),up/=6*lp;break;case np:up=rp-_d+lp*2,up/=6*lp;break;case rp:up=_d-np+lp*4,up/=6*lp;break}return[up,cp,dp]}function addSaturationToRGB(_d,np){var rp=RGBtoHSV(_d[0]*255,_d[1]*255,_d[2]*255);return rp[1]+=np,rp[1]>1?rp[1]=1:rp[1]<=0&&(rp[1]=0),HSVtoRGB(rp[0],rp[1],rp[2])}function addBrightnessToRGB(_d,np){var rp=RGBtoHSV(_d[0]*255,_d[1]*255,_d[2]*255);return rp[2]+=np,rp[2]>1?rp[2]=1:rp[2]<0&&(rp[2]=0),HSVtoRGB(rp[0],rp[1],rp[2])}function addHueToRGB(_d,np){var rp=RGBtoHSV(_d[0]*255,_d[1]*255,_d[2]*255);return rp[0]+=np/360,rp[0]>1?rp[0]-=1:rp[0]<0&&(rp[0]+=1),HSVtoRGB(rp[0],rp[1],rp[2])}var rgbToHex=function(){var _d=[],np,rp;for(np=0;np<256;np+=1)rp=np.toString(16),_d[np]=rp.length===1?"0"+rp:rp;return function(ap,sp,lp){return ap<0&&(ap=0),sp<0&&(sp=0),lp<0&&(lp=0),"#"+_d[ap]+_d[sp]+_d[lp]}}(),setSubframeEnabled=function(np){subframeEnabled=!!np},getSubframeEnabled=function(){return subframeEnabled},setExpressionsPlugin=function(np){expressionsPlugin=np},getExpressionsPlugin=function(){return expressionsPlugin},setExpressionInterfaces=function(np){expressionsInterfaces=np},getExpressionInterfaces=function(){return expressionsInterfaces},setDefaultCurveSegments=function(np){defaultCurveSegments=np},getDefaultCurveSegments=function(){return defaultCurveSegments},setIdPrefix=function(np){idPrefix$1=np};function createNS(_d){return document.createElementNS(svgNS,_d)}function _typeof$5(_d){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$5=function(rp){return typeof rp}:_typeof$5=function(rp){return rp&&typeof Symbol=="function"&&rp.constructor===Symbol&&rp!==Symbol.prototype?"symbol":typeof rp},_typeof$5(_d)}var dataManager=function(){var _d=1,np=[],rp,ap,sp={onmessage:function(){},postMessage:function(gp){rp({data:gp})}},lp={postMessage:function(gp){sp.onmessage({data:gp})}};function up(mp){if(window.Worker&&window.Blob&&getWebWorker()){var gp=new Blob(["var _workerSelf = self; self.onmessage = ",mp.toString()],{type:"text/javascript"}),vp=URL.createObjectURL(gp);return new Worker(vp)}return rp=mp,sp}function cp(){ap||(ap=up(function(gp){function vp(){function Sp(Fp,Ip){var kp,Tp,Np=Fp.length,Lp,Vp,zp,Wp;for(Tp=0;Tp<Np;Tp+=1)if(kp=Fp[Tp],"ks"in kp&&!kp.completed){if(kp.completed=!0,kp.hasMask){var Up=kp.masksProperties;for(Vp=Up.length,Lp=0;Lp<Vp;Lp+=1)if(Up[Lp].pt.k.i)_p(Up[Lp].pt.k);else for(Wp=Up[Lp].pt.k.length,zp=0;zp<Wp;zp+=1)Up[Lp].pt.k[zp].s&&_p(Up[Lp].pt.k[zp].s[0]),Up[Lp].pt.k[zp].e&&_p(Up[Lp].pt.k[zp].e[0])}kp.ty===0?(kp.layers=Ep(kp.refId,Ip),Sp(kp.layers,Ip)):kp.ty===4?wp(kp.shapes):kp.ty===5&&Ap(kp)}}function yp(Fp,Ip){if(Fp){var kp=0,Tp=Fp.length;for(kp=0;kp<Tp;kp+=1)Fp[kp].t===1&&(Fp[kp].data.layers=Ep(Fp[kp].data.refId,Ip),Sp(Fp[kp].data.layers,Ip))}}function bp(Fp,Ip){for(var kp=0,Tp=Ip.length;kp<Tp;){if(Ip[kp].id===Fp)return Ip[kp];kp+=1}return null}function Ep(Fp,Ip){var kp=bp(Fp,Ip);return kp?kp.layers.__used?JSON.parse(JSON.stringify(kp.layers)):(kp.layers.__used=!0,kp.layers):null}function wp(Fp){var Ip,kp=Fp.length,Tp,Np;for(Ip=kp-1;Ip>=0;Ip-=1)if(Fp[Ip].ty==="sh")if(Fp[Ip].ks.k.i)_p(Fp[Ip].ks.k);else for(Np=Fp[Ip].ks.k.length,Tp=0;Tp<Np;Tp+=1)Fp[Ip].ks.k[Tp].s&&_p(Fp[Ip].ks.k[Tp].s[0]),Fp[Ip].ks.k[Tp].e&&_p(Fp[Ip].ks.k[Tp].e[0]);else Fp[Ip].ty==="gr"&&wp(Fp[Ip].it)}function _p(Fp){var Ip,kp=Fp.i.length;for(Ip=0;Ip<kp;Ip+=1)Fp.i[Ip][0]+=Fp.v[Ip][0],Fp.i[Ip][1]+=Fp.v[Ip][1],Fp.o[Ip][0]+=Fp.v[Ip][0],Fp.o[Ip][1]+=Fp.v[Ip][1]}function Cp(Fp,Ip){var kp=Ip?Ip.split("."):[100,100,100];return Fp[0]>kp[0]?!0:kp[0]>Fp[0]?!1:Fp[1]>kp[1]?!0:kp[1]>Fp[1]?!1:Fp[2]>kp[2]?!0:kp[2]>Fp[2]?!1:null}var $p=function(){var Fp=[4,4,14];function Ip(Tp){var Np=Tp.t.d;Tp.t.d={k:[{s:Np,t:0}]}}function kp(Tp){var Np,Lp=Tp.length;for(Np=0;Np<Lp;Np+=1)Tp[Np].ty===5&&Ip(Tp[Np])}return function(Tp){if(Cp(Fp,Tp.v)&&(kp(Tp.layers),Tp.assets)){var Np,Lp=Tp.assets.length;for(Np=0;Np<Lp;Np+=1)Tp.assets[Np].layers&&kp(Tp.assets[Np].layers)}}}(),Rp=function(){var Fp=[4,7,99];return function(Ip){if(Ip.chars&&!Cp(Fp,Ip.v)){var kp,Tp=Ip.chars.length;for(kp=0;kp<Tp;kp+=1){var Np=Ip.chars[kp];Np.data&&Np.data.shapes&&(wp(Np.data.shapes),Np.data.ip=0,Np.data.op=99999,Np.data.st=0,Np.data.sr=1,Np.data.ks={p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0}},Ip.chars[kp].t||(Np.data.shapes.push({ty:"no"}),Np.data.shapes[0].it.push({p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0},sk:{k:0,a:0},sa:{k:0,a:0},ty:"tr"})))}}}}(),Pp=function(){var Fp=[5,7,15];function Ip(Tp){var Np=Tp.t.p;typeof Np.a=="number"&&(Np.a={a:0,k:Np.a}),typeof Np.p=="number"&&(Np.p={a:0,k:Np.p}),typeof Np.r=="number"&&(Np.r={a:0,k:Np.r})}function kp(Tp){var Np,Lp=Tp.length;for(Np=0;Np<Lp;Np+=1)Tp[Np].ty===5&&Ip(Tp[Np])}return function(Tp){if(Cp(Fp,Tp.v)&&(kp(Tp.layers),Tp.assets)){var Np,Lp=Tp.assets.length;for(Np=0;Np<Lp;Np+=1)Tp.assets[Np].layers&&kp(Tp.assets[Np].layers)}}}(),Op=function(){var Fp=[4,1,9];function Ip(Tp){var Np,Lp=Tp.length,Vp,zp;for(Np=0;Np<Lp;Np+=1)if(Tp[Np].ty==="gr")Ip(Tp[Np].it);else if(Tp[Np].ty==="fl"||Tp[Np].ty==="st")if(Tp[Np].c.k&&Tp[Np].c.k[0].i)for(zp=Tp[Np].c.k.length,Vp=0;Vp<zp;Vp+=1)Tp[Np].c.k[Vp].s&&(Tp[Np].c.k[Vp].s[0]/=255,Tp[Np].c.k[Vp].s[1]/=255,Tp[Np].c.k[Vp].s[2]/=255,Tp[Np].c.k[Vp].s[3]/=255),Tp[Np].c.k[Vp].e&&(Tp[Np].c.k[Vp].e[0]/=255,Tp[Np].c.k[Vp].e[1]/=255,Tp[Np].c.k[Vp].e[2]/=255,Tp[Np].c.k[Vp].e[3]/=255);else Tp[Np].c.k[0]/=255,Tp[Np].c.k[1]/=255,Tp[Np].c.k[2]/=255,Tp[Np].c.k[3]/=255}function kp(Tp){var Np,Lp=Tp.length;for(Np=0;Np<Lp;Np+=1)Tp[Np].ty===4&&Ip(Tp[Np].shapes)}return function(Tp){if(Cp(Fp,Tp.v)&&(kp(Tp.layers),Tp.assets)){var Np,Lp=Tp.assets.length;for(Np=0;Np<Lp;Np+=1)Tp.assets[Np].layers&&kp(Tp.assets[Np].layers)}}}(),jp=function(){var Fp=[4,4,18];function Ip(Tp){var Np,Lp=Tp.length,Vp,zp;for(Np=Lp-1;Np>=0;Np-=1)if(Tp[Np].ty==="sh")if(Tp[Np].ks.k.i)Tp[Np].ks.k.c=Tp[Np].closed;else for(zp=Tp[Np].ks.k.length,Vp=0;Vp<zp;Vp+=1)Tp[Np].ks.k[Vp].s&&(Tp[Np].ks.k[Vp].s[0].c=Tp[Np].closed),Tp[Np].ks.k[Vp].e&&(Tp[Np].ks.k[Vp].e[0].c=Tp[Np].closed);else Tp[Np].ty==="gr"&&Ip(Tp[Np].it)}function kp(Tp){var Np,Lp,Vp=Tp.length,zp,Wp,Up,qp;for(Lp=0;Lp<Vp;Lp+=1){if(Np=Tp[Lp],Np.hasMask){var Bp=Np.masksProperties;for(Wp=Bp.length,zp=0;zp<Wp;zp+=1)if(Bp[zp].pt.k.i)Bp[zp].pt.k.c=Bp[zp].cl;else for(qp=Bp[zp].pt.k.length,Up=0;Up<qp;Up+=1)Bp[zp].pt.k[Up].s&&(Bp[zp].pt.k[Up].s[0].c=Bp[zp].cl),Bp[zp].pt.k[Up].e&&(Bp[zp].pt.k[Up].e[0].c=Bp[zp].cl)}Np.ty===4&&Ip(Np.shapes)}}return function(Tp){if(Cp(Fp,Tp.v)&&(kp(Tp.layers),Tp.assets)){var Np,Lp=Tp.assets.length;for(Np=0;Np<Lp;Np+=1)Tp.assets[Np].layers&&kp(Tp.assets[Np].layers)}}}();function Mp(Fp){Fp.__complete||(Op(Fp),$p(Fp),Rp(Fp),Pp(Fp),jp(Fp),Sp(Fp.layers,Fp.assets),yp(Fp.chars,Fp.assets),Fp.__complete=!0)}function Ap(Fp){Fp.t.a.length===0&&"m"in Fp.t.p}var Dp={};return Dp.completeData=Mp,Dp.checkColors=Op,Dp.checkChars=Rp,Dp.checkPathProperties=Pp,Dp.checkShapes=jp,Dp.completeLayers=Sp,Dp}if(lp.dataManager||(lp.dataManager=vp()),lp.assetLoader||(lp.assetLoader=function(){function Sp(bp){var Ep=bp.getResponseHeader("content-type");return Ep&&bp.responseType==="json"&&Ep.indexOf("json")!==-1||bp.response&&_typeof$5(bp.response)==="object"?bp.response:bp.response&&typeof bp.response=="string"?JSON.parse(bp.response):bp.responseText?JSON.parse(bp.responseText):null}function yp(bp,Ep,wp,_p){var Cp,$p=new XMLHttpRequest;try{$p.responseType="json"}catch{}$p.onreadystatechange=function(){if($p.readyState===4)if($p.status===200)Cp=Sp($p),wp(Cp);else try{Cp=Sp($p),wp(Cp)}catch(Rp){_p&&_p(Rp)}};try{$p.open(["G","E","T"].join(""),bp,!0)}catch{$p.open(["G","E","T"].join(""),Ep+"/"+bp,!0)}$p.send()}return{load:yp}}()),gp.data.type==="loadAnimation")lp.assetLoader.load(gp.data.path,gp.data.fullPath,function(Sp){lp.dataManager.completeData(Sp),lp.postMessage({id:gp.data.id,payload:Sp,status:"success"})},function(){lp.postMessage({id:gp.data.id,status:"error"})});else if(gp.data.type==="complete"){var xp=gp.data.animation;lp.dataManager.completeData(xp),lp.postMessage({id:gp.data.id,payload:xp,status:"success"})}else gp.data.type==="loadData"&&lp.assetLoader.load(gp.data.path,gp.data.fullPath,function(Sp){lp.postMessage({id:gp.data.id,payload:Sp,status:"success"})},function(){lp.postMessage({id:gp.data.id,status:"error"})})}),ap.onmessage=function(mp){var gp=mp.data,vp=gp.id,xp=np[vp];np[vp]=null,gp.status==="success"?xp.onComplete(gp.payload):xp.onError&&xp.onError()})}function dp(mp,gp){_d+=1;var vp="processId_"+_d;return np[vp]={onComplete:mp,onError:gp},vp}function fp(mp,gp,vp){cp();var xp=dp(gp,vp);ap.postMessage({type:"loadAnimation",path:mp,fullPath:window.location.origin+window.location.pathname,id:xp})}function pp(mp,gp,vp){cp();var xp=dp(gp,vp);ap.postMessage({type:"loadData",path:mp,fullPath:window.location.origin+window.location.pathname,id:xp})}function hp(mp,gp,vp){cp();var xp=dp(gp,vp);ap.postMessage({type:"complete",animation:mp,id:xp})}return{loadAnimation:fp,loadData:pp,completeAnimation:hp}}(),ImagePreloader=function(){var _d=function(){var yp=createTag("canvas");yp.width=1,yp.height=1;var bp=yp.getContext("2d");return bp.fillStyle="rgba(0,0,0,0)",bp.fillRect(0,0,1,1),yp}();function np(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function rp(){this.loadedFootagesCount+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function ap(yp,bp,Ep){var wp="";if(yp.e)wp=yp.p;else if(bp){var _p=yp.p;_p.indexOf("images/")!==-1&&(_p=_p.split("/")[1]),wp=bp+_p}else wp=Ep,wp+=yp.u?yp.u:"",wp+=yp.p;return wp}function sp(yp){var bp=0,Ep=setInterval((function(){var wp=yp.getBBox();(wp.width||bp>500)&&(this._imageLoaded(),clearInterval(Ep)),bp+=1}).bind(this),50)}function lp(yp){var bp=ap(yp,this.assetsPath,this.path),Ep=createNS("image");isSafari?this.testImageLoaded(Ep):Ep.addEventListener("load",this._imageLoaded,!1),Ep.addEventListener("error",(function(){wp.img=_d,this._imageLoaded()}).bind(this),!1),Ep.setAttributeNS("http://www.w3.org/1999/xlink","href",bp),this._elementHelper.append?this._elementHelper.append(Ep):this._elementHelper.appendChild(Ep);var wp={img:Ep,assetData:yp};return wp}function up(yp){var bp=ap(yp,this.assetsPath,this.path),Ep=createTag("img");Ep.crossOrigin="anonymous",Ep.addEventListener("load",this._imageLoaded,!1),Ep.addEventListener("error",(function(){wp.img=_d,this._imageLoaded()}).bind(this),!1),Ep.src=bp;var wp={img:Ep,assetData:yp};return wp}function cp(yp){var bp={assetData:yp},Ep=ap(yp,this.assetsPath,this.path);return dataManager.loadData(Ep,(function(wp){bp.img=wp,this._footageLoaded()}).bind(this),(function(){bp.img={},this._footageLoaded()}).bind(this)),bp}function dp(yp,bp){this.imagesLoadedCb=bp;var Ep,wp=yp.length;for(Ep=0;Ep<wp;Ep+=1)yp[Ep].layers||(!yp[Ep].t||yp[Ep].t==="seq"?(this.totalImages+=1,this.images.push(this._createImageData(yp[Ep]))):yp[Ep].t===3&&(this.totalFootages+=1,this.images.push(this.createFootageData(yp[Ep]))))}function fp(yp){this.path=yp||""}function pp(yp){this.assetsPath=yp||""}function hp(yp){for(var bp=0,Ep=this.images.length;bp<Ep;){if(this.images[bp].assetData===yp)return this.images[bp].img;bp+=1}return null}function mp(){this.imagesLoadedCb=null,this.images.length=0}function gp(){return this.totalImages===this.loadedAssets}function vp(){return this.totalFootages===this.loadedFootagesCount}function xp(yp,bp){yp==="svg"?(this._elementHelper=bp,this._createImageData=this.createImageData.bind(this)):this._createImageData=this.createImgData.bind(this)}function Sp(){this._imageLoaded=np.bind(this),this._footageLoaded=rp.bind(this),this.testImageLoaded=sp.bind(this),this.createFootageData=cp.bind(this),this.assetsPath="",this.path="",this.totalImages=0,this.totalFootages=0,this.loadedAssets=0,this.loadedFootagesCount=0,this.imagesLoadedCb=null,this.images=[]}return Sp.prototype={loadAssets:dp,setAssetsPath:pp,setPath:fp,loadedImages:gp,loadedFootages:vp,destroy:mp,getAsset:hp,createImgData:up,createImageData:lp,imageLoaded:np,footageLoaded:rp,setCacheType:xp},Sp}();function BaseEvent(){}BaseEvent.prototype={triggerEvent:function(np,rp){if(this._cbs[np])for(var ap=this._cbs[np],sp=0;sp<ap.length;sp+=1)ap[sp](rp)},addEventListener:function(np,rp){return this._cbs[np]||(this._cbs[np]=[]),this._cbs[np].push(rp),(function(){this.removeEventListener(np,rp)}).bind(this)},removeEventListener:function(np,rp){if(!rp)this._cbs[np]=null;else if(this._cbs[np]){for(var ap=0,sp=this._cbs[np].length;ap<sp;)this._cbs[np][ap]===rp&&(this._cbs[np].splice(ap,1),ap-=1,sp-=1),ap+=1;this._cbs[np].length||(this._cbs[np]=null)}}};var markerParser=function(){function _d(np){for(var rp=np.split(`\r
`),ap={},sp,lp=0,up=0;up<rp.length;up+=1)sp=rp[up].split(":"),sp.length===2&&(ap[sp[0]]=sp[1].trim(),lp+=1);if(lp===0)throw new Error;return ap}return function(np){for(var rp=[],ap=0;ap<np.length;ap+=1){var sp=np[ap],lp={time:sp.tm,duration:sp.dr};try{lp.payload=JSON.parse(np[ap].cm)}catch{try{lp.payload=_d(np[ap].cm)}catch{lp.payload={name:np[ap].cm}}}rp.push(lp)}return rp}}(),ProjectInterface=function(){function _d(np){this.compositions.push(np)}return function(){function np(rp){for(var ap=0,sp=this.compositions.length;ap<sp;){if(this.compositions[ap].data&&this.compositions[ap].data.nm===rp)return this.compositions[ap].prepareFrame&&this.compositions[ap].data.xt&&this.compositions[ap].prepareFrame(this.currentFrame),this.compositions[ap].compInterface;ap+=1}return null}return np.compositions=[],np.currentFrame=0,np.registerComposition=_d,np}}(),renderers={},registerRenderer=function(np,rp){renderers[np]=rp};function getRenderer(_d){return renderers[_d]}function getRegisteredRenderer(){if(renderers.canvas)return"canvas";for(var _d in renderers)if(renderers[_d])return _d;return""}function _typeof$4(_d){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$4=function(rp){return typeof rp}:_typeof$4=function(rp){return rp&&typeof Symbol=="function"&&rp.constructor===Symbol&&rp!==Symbol.prototype?"symbol":typeof rp},_typeof$4(_d)}var AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.firstFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.playCount=0,this.animationData={},this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=createElementID(),this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.isSubframeEnabled=getSubframeEnabled(),this.segments=[],this._idle=!0,this._completedLoop=!1,this.projectInterface=ProjectInterface(),this.imagePreloader=new ImagePreloader,this.audioController=audioControllerFactory(),this.markers=[],this.configAnimation=this.configAnimation.bind(this),this.onSetupError=this.onSetupError.bind(this),this.onSegmentComplete=this.onSegmentComplete.bind(this),this.drawnFrameEvent=new BMEnterFrameEvent("drawnFrame",0,0,0),this.expressionsPlugin=getExpressionsPlugin()};extendPrototype([BaseEvent],AnimationItem),AnimationItem.prototype.setParams=function(_d){(_d.wrapper||_d.container)&&(this.wrapper=_d.wrapper||_d.container);var np="svg";_d.animType?np=_d.animType:_d.renderer&&(np=_d.renderer);var rp=getRenderer(np);this.renderer=new rp(this,_d.rendererSettings),this.imagePreloader.setCacheType(np,this.renderer.globalData.defs),this.renderer.setProjectInterface(this.projectInterface),this.animType=np,_d.loop===""||_d.loop===null||_d.loop===void 0||_d.loop===!0?this.loop=!0:_d.loop===!1?this.loop=!1:this.loop=parseInt(_d.loop,10),this.autoplay="autoplay"in _d?_d.autoplay:!0,this.name=_d.name?_d.name:"",this.autoloadSegments=Object.prototype.hasOwnProperty.call(_d,"autoloadSegments")?_d.autoloadSegments:!0,this.assetsPath=_d.assetsPath,this.initialSegment=_d.initialSegment,_d.audioFactory&&this.audioController.setAudioFactory(_d.audioFactory),_d.animationData?this.setupAnimation(_d.animationData):_d.path&&(_d.path.lastIndexOf("\\")!==-1?this.path=_d.path.substr(0,_d.path.lastIndexOf("\\")+1):this.path=_d.path.substr(0,_d.path.lastIndexOf("/")+1),this.fileName=_d.path.substr(_d.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),dataManager.loadAnimation(_d.path,this.configAnimation,this.onSetupError))},AnimationItem.prototype.onSetupError=function(){this.trigger("data_failed")},AnimationItem.prototype.setupAnimation=function(_d){dataManager.completeAnimation(_d,this.configAnimation)},AnimationItem.prototype.setData=function(_d,np){np&&_typeof$4(np)!=="object"&&(np=JSON.parse(np));var rp={wrapper:_d,animationData:np},ap=_d.attributes;rp.path=ap.getNamedItem("data-animation-path")?ap.getNamedItem("data-animation-path").value:ap.getNamedItem("data-bm-path")?ap.getNamedItem("data-bm-path").value:ap.getNamedItem("bm-path")?ap.getNamedItem("bm-path").value:"",rp.animType=ap.getNamedItem("data-anim-type")?ap.getNamedItem("data-anim-type").value:ap.getNamedItem("data-bm-type")?ap.getNamedItem("data-bm-type").value:ap.getNamedItem("bm-type")?ap.getNamedItem("bm-type").value:ap.getNamedItem("data-bm-renderer")?ap.getNamedItem("data-bm-renderer").value:ap.getNamedItem("bm-renderer")?ap.getNamedItem("bm-renderer").value:getRegisteredRenderer()||"canvas";var sp=ap.getNamedItem("data-anim-loop")?ap.getNamedItem("data-anim-loop").value:ap.getNamedItem("data-bm-loop")?ap.getNamedItem("data-bm-loop").value:ap.getNamedItem("bm-loop")?ap.getNamedItem("bm-loop").value:"";sp==="false"?rp.loop=!1:sp==="true"?rp.loop=!0:sp!==""&&(rp.loop=parseInt(sp,10));var lp=ap.getNamedItem("data-anim-autoplay")?ap.getNamedItem("data-anim-autoplay").value:ap.getNamedItem("data-bm-autoplay")?ap.getNamedItem("data-bm-autoplay").value:ap.getNamedItem("bm-autoplay")?ap.getNamedItem("bm-autoplay").value:!0;rp.autoplay=lp!=="false",rp.name=ap.getNamedItem("data-name")?ap.getNamedItem("data-name").value:ap.getNamedItem("data-bm-name")?ap.getNamedItem("data-bm-name").value:ap.getNamedItem("bm-name")?ap.getNamedItem("bm-name").value:"";var up=ap.getNamedItem("data-anim-prerender")?ap.getNamedItem("data-anim-prerender").value:ap.getNamedItem("data-bm-prerender")?ap.getNamedItem("data-bm-prerender").value:ap.getNamedItem("bm-prerender")?ap.getNamedItem("bm-prerender").value:"";up==="false"&&(rp.prerender=!1),rp.path?this.setParams(rp):this.trigger("destroy")},AnimationItem.prototype.includeLayers=function(_d){_d.op>this.animationData.op&&(this.animationData.op=_d.op,this.totalFrames=Math.floor(_d.op-this.animationData.ip));var np=this.animationData.layers,rp,ap=np.length,sp=_d.layers,lp,up=sp.length;for(lp=0;lp<up;lp+=1)for(rp=0;rp<ap;){if(np[rp].id===sp[lp].id){np[rp]=sp[lp];break}rp+=1}if((_d.chars||_d.fonts)&&(this.renderer.globalData.fontManager.addChars(_d.chars),this.renderer.globalData.fontManager.addFonts(_d.fonts,this.renderer.globalData.defs)),_d.assets)for(ap=_d.assets.length,rp=0;rp<ap;rp+=1)this.animationData.assets.push(_d.assets[rp]);this.animationData.__complete=!1,dataManager.completeAnimation(this.animationData,this.onSegmentComplete)},AnimationItem.prototype.onSegmentComplete=function(_d){this.animationData=_d;var np=getExpressionsPlugin();np&&np.initExpressions(this),this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var _d=this.animationData.segments;if(!_d||_d.length===0||!this.autoloadSegments){this.trigger("data_ready"),this.timeCompleted=this.totalFrames;return}var np=_d.shift();this.timeCompleted=np.time*this.frameRate;var rp=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,dataManager.loadData(rp,this.includeLayers.bind(this),(function(){this.trigger("data_failed")}).bind(this))},AnimationItem.prototype.loadSegments=function(){var _d=this.animationData.segments;_d||(this.timeCompleted=this.totalFrames),this.loadNextSegment()},AnimationItem.prototype.imagesLoaded=function(){this.trigger("loaded_images"),this.checkLoaded()},AnimationItem.prototype.preloadImages=function(){this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(this.animationData.assets,this.imagesLoaded.bind(this))},AnimationItem.prototype.configAnimation=function(_d){if(this.renderer)try{this.animationData=_d,this.initialSegment?(this.totalFrames=Math.floor(this.initialSegment[1]-this.initialSegment[0]),this.firstFrame=Math.round(this.initialSegment[0])):(this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.firstFrame=Math.round(this.animationData.ip)),this.renderer.configAnimation(_d),_d.assets||(_d.assets=[]),this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.frameMult=this.animationData.fr/1e3,this.renderer.searchExtraCompositions(_d.assets),this.markers=markerParser(_d.markers||[]),this.trigger("config_ready"),this.preloadImages(),this.loadSegments(),this.updaFrameModifier(),this.waitForFontsLoaded(),this.isPaused&&this.audioController.pause()}catch(np){this.triggerConfigError(np)}},AnimationItem.prototype.waitForFontsLoaded=function(){this.renderer&&(this.renderer.globalData.fontManager.isLoaded?this.checkLoaded():setTimeout(this.waitForFontsLoaded.bind(this),20))},AnimationItem.prototype.checkLoaded=function(){if(!this.isLoaded&&this.renderer.globalData.fontManager.isLoaded&&(this.imagePreloader.loadedImages()||this.renderer.rendererType!=="canvas")&&this.imagePreloader.loadedFootages()){this.isLoaded=!0;var _d=getExpressionsPlugin();_d&&_d.initExpressions(this),this.renderer.initItems(),setTimeout((function(){this.trigger("DOMLoaded")}).bind(this),0),this.gotoFrame(),this.autoplay&&this.play()}},AnimationItem.prototype.resize=function(_d,np){var rp=typeof _d=="number"?_d:void 0,ap=typeof np=="number"?np:void 0;this.renderer.updateContainerSize(rp,ap)},AnimationItem.prototype.setSubframe=function(_d){this.isSubframeEnabled=!!_d},AnimationItem.prototype.gotoFrame=function(){this.currentFrame=this.isSubframeEnabled?this.currentRawFrame:~~this.currentRawFrame,this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame(),this.trigger("drawnFrame")},AnimationItem.prototype.renderFrame=function(){if(!(this.isLoaded===!1||!this.renderer))try{this.expressionsPlugin&&this.expressionsPlugin.resetFrame(),this.renderer.renderFrame(this.currentFrame+this.firstFrame)}catch(_d){this.triggerRenderFrameError(_d)}},AnimationItem.prototype.play=function(_d){_d&&this.name!==_d||this.isPaused===!0&&(this.isPaused=!1,this.trigger("_play"),this.audioController.resume(),this._idle&&(this._idle=!1,this.trigger("_active")))},AnimationItem.prototype.pause=function(_d){_d&&this.name!==_d||this.isPaused===!1&&(this.isPaused=!0,this.trigger("_pause"),this._idle=!0,this.trigger("_idle"),this.audioController.pause())},AnimationItem.prototype.togglePause=function(_d){_d&&this.name!==_d||(this.isPaused===!0?this.play():this.pause())},AnimationItem.prototype.stop=function(_d){_d&&this.name!==_d||(this.pause(),this.playCount=0,this._completedLoop=!1,this.setCurrentRawFrameValue(0))},AnimationItem.prototype.getMarkerData=function(_d){for(var np,rp=0;rp<this.markers.length;rp+=1)if(np=this.markers[rp],np.payload&&np.payload.name===_d)return np;return null},AnimationItem.prototype.goToAndStop=function(_d,np,rp){if(!(rp&&this.name!==rp)){var ap=Number(_d);if(isNaN(ap)){var sp=this.getMarkerData(_d);sp&&this.goToAndStop(sp.time,!0)}else np?this.setCurrentRawFrameValue(_d):this.setCurrentRawFrameValue(_d*this.frameModifier);this.pause()}},AnimationItem.prototype.goToAndPlay=function(_d,np,rp){if(!(rp&&this.name!==rp)){var ap=Number(_d);if(isNaN(ap)){var sp=this.getMarkerData(_d);sp&&(sp.duration?this.playSegments([sp.time,sp.time+sp.duration],!0):this.goToAndStop(sp.time,!0))}else this.goToAndStop(ap,np,rp);this.play()}},AnimationItem.prototype.advanceTime=function(_d){if(!(this.isPaused===!0||this.isLoaded===!1)){var np=this.currentRawFrame+_d*this.frameModifier,rp=!1;np>=this.totalFrames-1&&this.frameModifier>0?!this.loop||this.playCount===this.loop?this.checkSegments(np>this.totalFrames?np%this.totalFrames:0)||(rp=!0,np=this.totalFrames-1):np>=this.totalFrames?(this.playCount+=1,this.checkSegments(np%this.totalFrames)||(this.setCurrentRawFrameValue(np%this.totalFrames),this._completedLoop=!0,this.trigger("loopComplete"))):this.setCurrentRawFrameValue(np):np<0?this.checkSegments(np%this.totalFrames)||(this.loop&&!(this.playCount--<=0&&this.loop!==!0)?(this.setCurrentRawFrameValue(this.totalFrames+np%this.totalFrames),this._completedLoop?this.trigger("loopComplete"):this._completedLoop=!0):(rp=!0,np=0)):this.setCurrentRawFrameValue(np),rp&&(this.setCurrentRawFrameValue(np),this.pause(),this.trigger("complete"))}},AnimationItem.prototype.adjustSegment=function(_d,np){this.playCount=0,_d[1]<_d[0]?(this.frameModifier>0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.totalFrames=_d[0]-_d[1],this.timeCompleted=this.totalFrames,this.firstFrame=_d[1],this.setCurrentRawFrameValue(this.totalFrames-.001-np)):_d[1]>_d[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.totalFrames=_d[1]-_d[0],this.timeCompleted=this.totalFrames,this.firstFrame=_d[0],this.setCurrentRawFrameValue(.001+np)),this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function(_d,np){var rp=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<_d?rp=_d:this.currentRawFrame+this.firstFrame>np&&(rp=np-_d)),this.firstFrame=_d,this.totalFrames=np-_d,this.timeCompleted=this.totalFrames,rp!==-1&&this.goToAndStop(rp,!0)},AnimationItem.prototype.playSegments=function(_d,np){if(np&&(this.segments.length=0),_typeof$4(_d[0])==="object"){var rp,ap=_d.length;for(rp=0;rp<ap;rp+=1)this.segments.push(_d[rp])}else this.segments.push(_d);this.segments.length&&np&&this.adjustSegment(this.segments.shift(),0),this.isPaused&&this.play()},AnimationItem.prototype.resetSegments=function(_d){this.segments.length=0,this.segments.push([this.animationData.ip,this.animationData.op]),_d&&this.checkSegments(0)},AnimationItem.prototype.checkSegments=function(_d){return this.segments.length?(this.adjustSegment(this.segments.shift(),_d),!0):!1},AnimationItem.prototype.destroy=function(_d){_d&&this.name!==_d||!this.renderer||(this.renderer.destroy(),this.imagePreloader.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=null,this.onLoopComplete=null,this.onComplete=null,this.onSegmentStart=null,this.onDestroy=null,this.renderer=null,this.expressionsPlugin=null,this.imagePreloader=null,this.projectInterface=null)},AnimationItem.prototype.setCurrentRawFrameValue=function(_d){this.currentRawFrame=_d,this.gotoFrame()},AnimationItem.prototype.setSpeed=function(_d){this.playSpeed=_d,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function(_d){this.playDirection=_d<0?-1:1,this.updaFrameModifier()},AnimationItem.prototype.setLoop=function(_d){this.loop=_d},AnimationItem.prototype.setVolume=function(_d,np){np&&this.name!==np||this.audioController.setVolume(_d)},AnimationItem.prototype.getVolume=function(){return this.audioController.getVolume()},AnimationItem.prototype.mute=function(_d){_d&&this.name!==_d||this.audioController.mute()},AnimationItem.prototype.unmute=function(_d){_d&&this.name!==_d||this.audioController.unmute()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection,this.audioController.setRate(this.playSpeed*this.playDirection)},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function(_d){var np="";if(_d.e)np=_d.p;else if(this.assetsPath){var rp=_d.p;rp.indexOf("images/")!==-1&&(rp=rp.split("/")[1]),np=this.assetsPath+rp}else np=this.path,np+=_d.u?_d.u:"",np+=_d.p;return np},AnimationItem.prototype.getAssetData=function(_d){for(var np=0,rp=this.assets.length;np<rp;){if(_d===this.assets[np].id)return this.assets[np];np+=1}return null},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getDuration=function(_d){return _d?this.totalFrames:this.totalFrames/this.frameRate},AnimationItem.prototype.updateDocumentData=function(_d,np,rp){try{var ap=this.renderer.getElementByPath(_d);ap.updateDocumentData(np,rp)}catch{}},AnimationItem.prototype.trigger=function(_d){if(this._cbs&&this._cbs[_d])switch(_d){case"enterFrame":this.triggerEvent(_d,new BMEnterFrameEvent(_d,this.currentFrame,this.totalFrames,this.frameModifier));break;case"drawnFrame":this.drawnFrameEvent.currentTime=this.currentFrame,this.drawnFrameEvent.totalTime=this.totalFrames,this.drawnFrameEvent.direction=this.frameModifier,this.triggerEvent(_d,this.drawnFrameEvent);break;case"loopComplete":this.triggerEvent(_d,new BMCompleteLoopEvent(_d,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(_d,new BMCompleteEvent(_d,this.frameMult));break;case"segmentStart":this.triggerEvent(_d,new BMSegmentStartEvent(_d,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(_d,new BMDestroyEvent(_d,this));break;default:this.triggerEvent(_d)}_d==="enterFrame"&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent(_d,this.currentFrame,this.totalFrames,this.frameMult)),_d==="loopComplete"&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent(_d,this.loop,this.playCount,this.frameMult)),_d==="complete"&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent(_d,this.frameMult)),_d==="segmentStart"&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent(_d,this.firstFrame,this.totalFrames)),_d==="destroy"&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent(_d,this))},AnimationItem.prototype.triggerRenderFrameError=function(_d){var np=new BMRenderFrameErrorEvent(_d,this.currentFrame);this.triggerEvent("error",np),this.onError&&this.onError.call(this,np)},AnimationItem.prototype.triggerConfigError=function(_d){var np=new BMConfigErrorEvent(_d,this.currentFrame);this.triggerEvent("error",np),this.onError&&this.onError.call(this,np)};var animationManager=function(){var _d={},np=[],rp=0,ap=0,sp=0,lp=!0,up=!1;function cp(Ip){for(var kp=0,Tp=Ip.target;kp<ap;)np[kp].animation===Tp&&(np.splice(kp,1),kp-=1,ap-=1,Tp.isPaused||hp()),kp+=1}function dp(Ip,kp){if(!Ip)return null;for(var Tp=0;Tp<ap;){if(np[Tp].elem===Ip&&np[Tp].elem!==null)return np[Tp].animation;Tp+=1}var Np=new AnimationItem;return mp(Np,Ip),Np.setData(Ip,kp),Np}function fp(){var Ip,kp=np.length,Tp=[];for(Ip=0;Ip<kp;Ip+=1)Tp.push(np[Ip].animation);return Tp}function pp(){sp+=1,Op()}function hp(){sp-=1}function mp(Ip,kp){Ip.addEventListener("destroy",cp),Ip.addEventListener("_active",pp),Ip.addEventListener("_idle",hp),np.push({elem:kp,animation:Ip}),ap+=1}function gp(Ip){var kp=new AnimationItem;return mp(kp,null),kp.setParams(Ip),kp}function vp(Ip,kp){var Tp;for(Tp=0;Tp<ap;Tp+=1)np[Tp].animation.setSpeed(Ip,kp)}function xp(Ip,kp){var Tp;for(Tp=0;Tp<ap;Tp+=1)np[Tp].animation.setDirection(Ip,kp)}function Sp(Ip){var kp;for(kp=0;kp<ap;kp+=1)np[kp].animation.play(Ip)}function yp(Ip){var kp=Ip-rp,Tp;for(Tp=0;Tp<ap;Tp+=1)np[Tp].animation.advanceTime(kp);rp=Ip,sp&&!up?window.requestAnimationFrame(yp):lp=!0}function bp(Ip){rp=Ip,window.requestAnimationFrame(yp)}function Ep(Ip){var kp;for(kp=0;kp<ap;kp+=1)np[kp].animation.pause(Ip)}function wp(Ip,kp,Tp){var Np;for(Np=0;Np<ap;Np+=1)np[Np].animation.goToAndStop(Ip,kp,Tp)}function _p(Ip){var kp;for(kp=0;kp<ap;kp+=1)np[kp].animation.stop(Ip)}function Cp(Ip){var kp;for(kp=0;kp<ap;kp+=1)np[kp].animation.togglePause(Ip)}function $p(Ip){var kp;for(kp=ap-1;kp>=0;kp-=1)np[kp].animation.destroy(Ip)}function Rp(Ip,kp,Tp){var Np=[].concat([].slice.call(document.getElementsByClassName("lottie")),[].slice.call(document.getElementsByClassName("bodymovin"))),Lp,Vp=Np.length;for(Lp=0;Lp<Vp;Lp+=1)Tp&&Np[Lp].setAttribute("data-bm-type",Tp),dp(Np[Lp],Ip);if(kp&&Vp===0){Tp||(Tp="svg");var zp=document.getElementsByTagName("body")[0];zp.innerText="";var Wp=createTag("div");Wp.style.width="100%",Wp.style.height="100%",Wp.setAttribute("data-bm-type",Tp),zp.appendChild(Wp),dp(Wp,Ip)}}function Pp(){var Ip;for(Ip=0;Ip<ap;Ip+=1)np[Ip].animation.resize()}function Op(){!up&&sp&&lp&&(window.requestAnimationFrame(bp),lp=!1)}function jp(){up=!0}function Mp(){up=!1,Op()}function Ap(Ip,kp){var Tp;for(Tp=0;Tp<ap;Tp+=1)np[Tp].animation.setVolume(Ip,kp)}function Dp(Ip){var kp;for(kp=0;kp<ap;kp+=1)np[kp].animation.mute(Ip)}function Fp(Ip){var kp;for(kp=0;kp<ap;kp+=1)np[kp].animation.unmute(Ip)}return _d.registerAnimation=dp,_d.loadAnimation=gp,_d.setSpeed=vp,_d.setDirection=xp,_d.play=Sp,_d.pause=Ep,_d.stop=_p,_d.togglePause=Cp,_d.searchAnimations=Rp,_d.resize=Pp,_d.goToAndStop=wp,_d.destroy=$p,_d.freeze=jp,_d.unfreeze=Mp,_d.setVolume=Ap,_d.mute=Dp,_d.unmute=Fp,_d.getRegisteredAnimations=fp,_d}(),BezierFactory=function(){var _d={};_d.getBezierEasing=rp;var np={};function rp(bp,Ep,wp,_p,Cp){var $p=Cp||("bez_"+bp+"_"+Ep+"_"+wp+"_"+_p).replace(/\./g,"p");if(np[$p])return np[$p];var Rp=new yp([bp,Ep,wp,_p]);return np[$p]=Rp,Rp}var ap=4,sp=.001,lp=1e-7,up=10,cp=11,dp=1/(cp-1),fp=typeof Float32Array=="function";function pp(bp,Ep){return 1-3*Ep+3*bp}function hp(bp,Ep){return 3*Ep-6*bp}function mp(bp){return 3*bp}function gp(bp,Ep,wp){return((pp(Ep,wp)*bp+hp(Ep,wp))*bp+mp(Ep))*bp}function vp(bp,Ep,wp){return 3*pp(Ep,wp)*bp*bp+2*hp(Ep,wp)*bp+mp(Ep)}function xp(bp,Ep,wp,_p,Cp){var $p,Rp,Pp=0;do Rp=Ep+(wp-Ep)/2,$p=gp(Rp,_p,Cp)-bp,$p>0?wp=Rp:Ep=Rp;while(Math.abs($p)>lp&&++Pp<up);return Rp}function Sp(bp,Ep,wp,_p){for(var Cp=0;Cp<ap;++Cp){var $p=vp(Ep,wp,_p);if($p===0)return Ep;var Rp=gp(Ep,wp,_p)-bp;Ep-=Rp/$p}return Ep}function yp(bp){this._p=bp,this._mSampleValues=fp?new Float32Array(cp):new Array(cp),this._precomputed=!1,this.get=this.get.bind(this)}return yp.prototype={get:function(Ep){var wp=this._p[0],_p=this._p[1],Cp=this._p[2],$p=this._p[3];return this._precomputed||this._precompute(),wp===_p&&Cp===$p?Ep:Ep===0?0:Ep===1?1:gp(this._getTForX(Ep),_p,$p)},_precompute:function(){var Ep=this._p[0],wp=this._p[1],_p=this._p[2],Cp=this._p[3];this._precomputed=!0,(Ep!==wp||_p!==Cp)&&this._calcSampleValues()},_calcSampleValues:function(){for(var Ep=this._p[0],wp=this._p[2],_p=0;_p<cp;++_p)this._mSampleValues[_p]=gp(_p*dp,Ep,wp)},_getTForX:function(Ep){for(var wp=this._p[0],_p=this._p[2],Cp=this._mSampleValues,$p=0,Rp=1,Pp=cp-1;Rp!==Pp&&Cp[Rp]<=Ep;++Rp)$p+=dp;--Rp;var Op=(Ep-Cp[Rp])/(Cp[Rp+1]-Cp[Rp]),jp=$p+Op*dp,Mp=vp(jp,wp,_p);return Mp>=sp?Sp(Ep,jp,wp,_p):Mp===0?jp:xp(Ep,$p,$p+dp,wp,_p)}},_d}(),pooling=function(){function _d(np){return np.concat(createSizedArray(np.length))}return{double:_d}}(),poolFactory=function(){return function(_d,np,rp){var ap=0,sp=_d,lp=createSizedArray(sp),up={newElement:cp,release:dp};function cp(){var fp;return ap?(ap-=1,fp=lp[ap]):fp=np(),fp}function dp(fp){ap===sp&&(lp=pooling.double(lp),sp*=2),rp&&rp(fp),lp[ap]=fp,ap+=1}return up}}(),bezierLengthPool=function(){function _d(){return{addedLength:0,percents:createTypedArray("float32",getDefaultCurveSegments()),lengths:createTypedArray("float32",getDefaultCurveSegments())}}return poolFactory(8,_d)}(),segmentsLengthPool=function(){function _d(){return{lengths:[],totalLength:0}}function np(rp){var ap,sp=rp.lengths.length;for(ap=0;ap<sp;ap+=1)bezierLengthPool.release(rp.lengths[ap]);rp.lengths.length=0}return poolFactory(8,_d,np)}();function bezFunction(){var _d=Math;function np(mp,gp,vp,xp,Sp,yp){var bp=mp*xp+gp*Sp+vp*yp-Sp*xp-yp*mp-vp*gp;return bp>-.001&&bp<.001}function rp(mp,gp,vp,xp,Sp,yp,bp,Ep,wp){if(vp===0&&yp===0&&wp===0)return np(mp,gp,xp,Sp,bp,Ep);var _p=_d.sqrt(_d.pow(xp-mp,2)+_d.pow(Sp-gp,2)+_d.pow(yp-vp,2)),Cp=_d.sqrt(_d.pow(bp-mp,2)+_d.pow(Ep-gp,2)+_d.pow(wp-vp,2)),$p=_d.sqrt(_d.pow(bp-xp,2)+_d.pow(Ep-Sp,2)+_d.pow(wp-yp,2)),Rp;return _p>Cp?_p>$p?Rp=_p-Cp-$p:Rp=$p-Cp-_p:$p>Cp?Rp=$p-Cp-_p:Rp=Cp-_p-$p,Rp>-1e-4&&Rp<1e-4}var ap=function(){return function(mp,gp,vp,xp){var Sp=getDefaultCurveSegments(),yp,bp,Ep,wp,_p,Cp=0,$p,Rp=[],Pp=[],Op=bezierLengthPool.newElement();for(Ep=vp.length,yp=0;yp<Sp;yp+=1){for(_p=yp/(Sp-1),$p=0,bp=0;bp<Ep;bp+=1)wp=bmPow(1-_p,3)*mp[bp]+3*bmPow(1-_p,2)*_p*vp[bp]+3*(1-_p)*bmPow(_p,2)*xp[bp]+bmPow(_p,3)*gp[bp],Rp[bp]=wp,Pp[bp]!==null&&($p+=bmPow(Rp[bp]-Pp[bp],2)),Pp[bp]=Rp[bp];$p&&($p=bmSqrt($p),Cp+=$p),Op.percents[yp]=_p,Op.lengths[yp]=Cp}return Op.addedLength=Cp,Op}}();function sp(mp){var gp=segmentsLengthPool.newElement(),vp=mp.c,xp=mp.v,Sp=mp.o,yp=mp.i,bp,Ep=mp._length,wp=gp.lengths,_p=0;for(bp=0;bp<Ep-1;bp+=1)wp[bp]=ap(xp[bp],xp[bp+1],Sp[bp],yp[bp+1]),_p+=wp[bp].addedLength;return vp&&Ep&&(wp[bp]=ap(xp[bp],xp[0],Sp[bp],yp[0]),_p+=wp[bp].addedLength),gp.totalLength=_p,gp}function lp(mp){this.segmentLength=0,this.points=new Array(mp)}function up(mp,gp){this.partialLength=mp,this.point=gp}var cp=function(){var mp={};return function(gp,vp,xp,Sp){var yp=(gp[0]+"_"+gp[1]+"_"+vp[0]+"_"+vp[1]+"_"+xp[0]+"_"+xp[1]+"_"+Sp[0]+"_"+Sp[1]).replace(/\./g,"p");if(!mp[yp]){var bp=getDefaultCurveSegments(),Ep,wp,_p,Cp,$p,Rp=0,Pp,Op,jp=null;gp.length===2&&(gp[0]!==vp[0]||gp[1]!==vp[1])&&np(gp[0],gp[1],vp[0],vp[1],gp[0]+xp[0],gp[1]+xp[1])&&np(gp[0],gp[1],vp[0],vp[1],vp[0]+Sp[0],vp[1]+Sp[1])&&(bp=2);var Mp=new lp(bp);for(_p=xp.length,Ep=0;Ep<bp;Ep+=1){for(Op=createSizedArray(_p),$p=Ep/(bp-1),Pp=0,wp=0;wp<_p;wp+=1)Cp=bmPow(1-$p,3)*gp[wp]+3*bmPow(1-$p,2)*$p*(gp[wp]+xp[wp])+3*(1-$p)*bmPow($p,2)*(vp[wp]+Sp[wp])+bmPow($p,3)*vp[wp],Op[wp]=Cp,jp!==null&&(Pp+=bmPow(Op[wp]-jp[wp],2));Pp=bmSqrt(Pp),Rp+=Pp,Mp.points[Ep]=new up(Pp,Op),jp=Op}Mp.segmentLength=Rp,mp[yp]=Mp}return mp[yp]}}();function dp(mp,gp){var vp=gp.percents,xp=gp.lengths,Sp=vp.length,yp=bmFloor((Sp-1)*mp),bp=mp*gp.addedLength,Ep=0;if(yp===Sp-1||yp===0||bp===xp[yp])return vp[yp];for(var wp=xp[yp]>bp?-1:1,_p=!0;_p;)if(xp[yp]<=bp&&xp[yp+1]>bp?(Ep=(bp-xp[yp])/(xp[yp+1]-xp[yp]),_p=!1):yp+=wp,yp<0||yp>=Sp-1){if(yp===Sp-1)return vp[yp];_p=!1}return vp[yp]+(vp[yp+1]-vp[yp])*Ep}function fp(mp,gp,vp,xp,Sp,yp){var bp=dp(Sp,yp),Ep=1-bp,wp=_d.round((Ep*Ep*Ep*mp[0]+(bp*Ep*Ep+Ep*bp*Ep+Ep*Ep*bp)*vp[0]+(bp*bp*Ep+Ep*bp*bp+bp*Ep*bp)*xp[0]+bp*bp*bp*gp[0])*1e3)/1e3,_p=_d.round((Ep*Ep*Ep*mp[1]+(bp*Ep*Ep+Ep*bp*Ep+Ep*Ep*bp)*vp[1]+(bp*bp*Ep+Ep*bp*bp+bp*Ep*bp)*xp[1]+bp*bp*bp*gp[1])*1e3)/1e3;return[wp,_p]}var pp=createTypedArray("float32",8);function hp(mp,gp,vp,xp,Sp,yp,bp){Sp<0?Sp=0:Sp>1&&(Sp=1);var Ep=dp(Sp,bp);yp=yp>1?1:yp;var wp=dp(yp,bp),_p,Cp=mp.length,$p=1-Ep,Rp=1-wp,Pp=$p*$p*$p,Op=Ep*$p*$p*3,jp=Ep*Ep*$p*3,Mp=Ep*Ep*Ep,Ap=$p*$p*Rp,Dp=Ep*$p*Rp+$p*Ep*Rp+$p*$p*wp,Fp=Ep*Ep*Rp+$p*Ep*wp+Ep*$p*wp,Ip=Ep*Ep*wp,kp=$p*Rp*Rp,Tp=Ep*Rp*Rp+$p*wp*Rp+$p*Rp*wp,Np=Ep*wp*Rp+$p*wp*wp+Ep*Rp*wp,Lp=Ep*wp*wp,Vp=Rp*Rp*Rp,zp=wp*Rp*Rp+Rp*wp*Rp+Rp*Rp*wp,Wp=wp*wp*Rp+Rp*wp*wp+wp*Rp*wp,Up=wp*wp*wp;for(_p=0;_p<Cp;_p+=1)pp[_p*4]=_d.round((Pp*mp[_p]+Op*vp[_p]+jp*xp[_p]+Mp*gp[_p])*1e3)/1e3,pp[_p*4+1]=_d.round((Ap*mp[_p]+Dp*vp[_p]+Fp*xp[_p]+Ip*gp[_p])*1e3)/1e3,pp[_p*4+2]=_d.round((kp*mp[_p]+Tp*vp[_p]+Np*xp[_p]+Lp*gp[_p])*1e3)/1e3,pp[_p*4+3]=_d.round((Vp*mp[_p]+zp*vp[_p]+Wp*xp[_p]+Up*gp[_p])*1e3)/1e3;return pp}return{getSegmentsLength:sp,getNewSegment:hp,getPointInSegment:fp,buildBezierData:cp,pointOnLine2D:np,pointOnLine3D:rp}}var bez=bezFunction(),initFrame=initialDefaultFrame,mathAbs=Math.abs;function interpolateValue(_d,np){var rp=this.offsetTime,ap;this.propType==="multidimensional"&&(ap=createTypedArray("float32",this.pv.length));for(var sp=np.lastIndex,lp=sp,up=this.keyframes.length-1,cp=!0,dp,fp,pp;cp;){if(dp=this.keyframes[lp],fp=this.keyframes[lp+1],lp===up-1&&_d>=fp.t-rp){dp.h&&(dp=fp),sp=0;break}if(fp.t-rp>_d){sp=lp;break}lp<up-1?lp+=1:(sp=0,cp=!1)}pp=this.keyframesMetadata[lp]||{};var hp,mp,gp,vp,xp,Sp,yp=fp.t-rp,bp=dp.t-rp,Ep;if(dp.to){pp.bezierData||(pp.bezierData=bez.buildBezierData(dp.s,fp.s||dp.e,dp.to,dp.ti));var wp=pp.bezierData;if(_d>=yp||_d<bp){var _p=_d>=yp?wp.points.length-1:0;for(mp=wp.points[_p].point.length,hp=0;hp<mp;hp+=1)ap[hp]=wp.points[_p].point[hp]}else{pp.__fnct?Sp=pp.__fnct:(Sp=BezierFactory.getBezierEasing(dp.o.x,dp.o.y,dp.i.x,dp.i.y,dp.n).get,pp.__fnct=Sp),gp=Sp((_d-bp)/(yp-bp));var Cp=wp.segmentLength*gp,$p,Rp=np.lastFrame<_d&&np._lastKeyframeIndex===lp?np._lastAddedLength:0;for(xp=np.lastFrame<_d&&np._lastKeyframeIndex===lp?np._lastPoint:0,cp=!0,vp=wp.points.length;cp;){if(Rp+=wp.points[xp].partialLength,Cp===0||gp===0||xp===wp.points.length-1){for(mp=wp.points[xp].point.length,hp=0;hp<mp;hp+=1)ap[hp]=wp.points[xp].point[hp];break}else if(Cp>=Rp&&Cp<Rp+wp.points[xp+1].partialLength){for($p=(Cp-Rp)/wp.points[xp+1].partialLength,mp=wp.points[xp].point.length,hp=0;hp<mp;hp+=1)ap[hp]=wp.points[xp].point[hp]+(wp.points[xp+1].point[hp]-wp.points[xp].point[hp])*$p;break}xp<vp-1?xp+=1:cp=!1}np._lastPoint=xp,np._lastAddedLength=Rp-wp.points[xp].partialLength,np._lastKeyframeIndex=lp}}else{var Pp,Op,jp,Mp,Ap;if(up=dp.s.length,Ep=fp.s||dp.e,this.sh&&dp.h!==1)if(_d>=yp)ap[0]=Ep[0],ap[1]=Ep[1],ap[2]=Ep[2];else if(_d<=bp)ap[0]=dp.s[0],ap[1]=dp.s[1],ap[2]=dp.s[2];else{var Dp=createQuaternion(dp.s),Fp=createQuaternion(Ep),Ip=(_d-bp)/(yp-bp);quaternionToEuler(ap,slerp(Dp,Fp,Ip))}else for(lp=0;lp<up;lp+=1)dp.h!==1&&(_d>=yp?gp=1:_d<bp?gp=0:(dp.o.x.constructor===Array?(pp.__fnct||(pp.__fnct=[]),pp.__fnct[lp]?Sp=pp.__fnct[lp]:(Pp=dp.o.x[lp]===void 0?dp.o.x[0]:dp.o.x[lp],Op=dp.o.y[lp]===void 0?dp.o.y[0]:dp.o.y[lp],jp=dp.i.x[lp]===void 0?dp.i.x[0]:dp.i.x[lp],Mp=dp.i.y[lp]===void 0?dp.i.y[0]:dp.i.y[lp],Sp=BezierFactory.getBezierEasing(Pp,Op,jp,Mp).get,pp.__fnct[lp]=Sp)):pp.__fnct?Sp=pp.__fnct:(Pp=dp.o.x,Op=dp.o.y,jp=dp.i.x,Mp=dp.i.y,Sp=BezierFactory.getBezierEasing(Pp,Op,jp,Mp).get,dp.keyframeMetadata=Sp),gp=Sp((_d-bp)/(yp-bp)))),Ep=fp.s||dp.e,Ap=dp.h===1?dp.s[lp]:dp.s[lp]+(Ep[lp]-dp.s[lp])*gp,this.propType==="multidimensional"?ap[lp]=Ap:ap=Ap}return np.lastIndex=sp,ap}function slerp(_d,np,rp){var ap=[],sp=_d[0],lp=_d[1],up=_d[2],cp=_d[3],dp=np[0],fp=np[1],pp=np[2],hp=np[3],mp,gp,vp,xp,Sp;return gp=sp*dp+lp*fp+up*pp+cp*hp,gp<0&&(gp=-gp,dp=-dp,fp=-fp,pp=-pp,hp=-hp),1-gp>1e-6?(mp=Math.acos(gp),vp=Math.sin(mp),xp=Math.sin((1-rp)*mp)/vp,Sp=Math.sin(rp*mp)/vp):(xp=1-rp,Sp=rp),ap[0]=xp*sp+Sp*dp,ap[1]=xp*lp+Sp*fp,ap[2]=xp*up+Sp*pp,ap[3]=xp*cp+Sp*hp,ap}function quaternionToEuler(_d,np){var rp=np[0],ap=np[1],sp=np[2],lp=np[3],up=Math.atan2(2*ap*lp-2*rp*sp,1-2*ap*ap-2*sp*sp),cp=Math.asin(2*rp*ap+2*sp*lp),dp=Math.atan2(2*rp*lp-2*ap*sp,1-2*rp*rp-2*sp*sp);_d[0]=up/degToRads,_d[1]=cp/degToRads,_d[2]=dp/degToRads}function createQuaternion(_d){var np=_d[0]*degToRads,rp=_d[1]*degToRads,ap=_d[2]*degToRads,sp=Math.cos(np/2),lp=Math.cos(rp/2),up=Math.cos(ap/2),cp=Math.sin(np/2),dp=Math.sin(rp/2),fp=Math.sin(ap/2),pp=sp*lp*up-cp*dp*fp,hp=cp*dp*up+sp*lp*fp,mp=cp*lp*up+sp*dp*fp,gp=sp*dp*up-cp*lp*fp;return[hp,mp,gp,pp]}function getValueAtCurrentTime(){var _d=this.comp.renderedFrame-this.offsetTime,np=this.keyframes[0].t-this.offsetTime,rp=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(_d===this._caching.lastFrame||this._caching.lastFrame!==initFrame&&(this._caching.lastFrame>=rp&&_d>=rp||this._caching.lastFrame<np&&_d<np))){this._caching.lastFrame>=_d&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0);var ap=this.interpolateValue(_d,this._caching);this.pv=ap}return this._caching.lastFrame=_d,this.pv}function setVValue(_d){var np;if(this.propType==="unidimensional")np=_d*this.mult,mathAbs(this.v-np)>1e-5&&(this.v=np,this._mdf=!0);else for(var rp=0,ap=this.v.length;rp<ap;)np=_d[rp]*this.mult,mathAbs(this.v[rp]-np)>1e-5&&(this.v[rp]=np,this._mdf=!0),rp+=1}function processEffectsSequence(){if(!(this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)){if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=this._isFirstFrame;var _d,np=this.effectsSequence.length,rp=this.kf?this.pv:this.data.k;for(_d=0;_d<np;_d+=1)rp=this.effectsSequence[_d](rp);this.setVValue(rp),this._isFirstFrame=!1,this.lock=!1,this.frameId=this.elem.globalData.frameId}}function addEffect(_d){this.effectsSequence.push(_d),this.container.addDynamicProperty(this)}function ValueProperty(_d,np,rp,ap){this.propType="unidimensional",this.mult=rp||1,this.data=np,this.v=rp?np.k*rp:np.k,this.pv=np.k,this._mdf=!1,this.elem=_d,this.container=ap,this.comp=_d.comp,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function MultiDimensionalProperty(_d,np,rp,ap){this.propType="multidimensional",this.mult=rp||1,this.data=np,this._mdf=!1,this.elem=_d,this.container=ap,this.comp=_d.comp,this.k=!1,this.kf=!1,this.frameId=-1;var sp,lp=np.k.length;for(this.v=createTypedArray("float32",lp),this.pv=createTypedArray("float32",lp),this.vel=createTypedArray("float32",lp),sp=0;sp<lp;sp+=1)this.v[sp]=np.k[sp]*this.mult,this.pv[sp]=np.k[sp];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function KeyframedValueProperty(_d,np,rp,ap){this.propType="unidimensional",this.keyframes=np.k,this.keyframesMetadata=[],this.offsetTime=_d.data.st,this.frameId=-1,this._caching={lastFrame:initFrame,lastIndex:0,value:0,_lastKeyframeIndex:-1},this.k=!0,this.kf=!0,this.data=np,this.mult=rp||1,this.elem=_d,this.container=ap,this.comp=_d.comp,this.v=initFrame,this.pv=initFrame,this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.addEffect=addEffect}function KeyframedMultidimensionalProperty(_d,np,rp,ap){this.propType="multidimensional";var sp,lp=np.k.length,up,cp,dp,fp;for(sp=0;sp<lp-1;sp+=1)np.k[sp].to&&np.k[sp].s&&np.k[sp+1]&&np.k[sp+1].s&&(up=np.k[sp].s,cp=np.k[sp+1].s,dp=np.k[sp].to,fp=np.k[sp].ti,(up.length===2&&!(up[0]===cp[0]&&up[1]===cp[1])&&bez.pointOnLine2D(up[0],up[1],cp[0],cp[1],up[0]+dp[0],up[1]+dp[1])&&bez.pointOnLine2D(up[0],up[1],cp[0],cp[1],cp[0]+fp[0],cp[1]+fp[1])||up.length===3&&!(up[0]===cp[0]&&up[1]===cp[1]&&up[2]===cp[2])&&bez.pointOnLine3D(up[0],up[1],up[2],cp[0],cp[1],cp[2],up[0]+dp[0],up[1]+dp[1],up[2]+dp[2])&&bez.pointOnLine3D(up[0],up[1],up[2],cp[0],cp[1],cp[2],cp[0]+fp[0],cp[1]+fp[1],cp[2]+fp[2]))&&(np.k[sp].to=null,np.k[sp].ti=null),up[0]===cp[0]&&up[1]===cp[1]&&dp[0]===0&&dp[1]===0&&fp[0]===0&&fp[1]===0&&(up.length===2||up[2]===cp[2]&&dp[2]===0&&fp[2]===0)&&(np.k[sp].to=null,np.k[sp].ti=null));this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.data=np,this.keyframes=np.k,this.keyframesMetadata=[],this.offsetTime=_d.data.st,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=rp||1,this.elem=_d,this.container=ap,this.comp=_d.comp,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.frameId=-1;var pp=np.k[0].s.length;for(this.v=createTypedArray("float32",pp),this.pv=createTypedArray("float32",pp),sp=0;sp<pp;sp+=1)this.v[sp]=initFrame,this.pv[sp]=initFrame;this._caching={lastFrame:initFrame,lastIndex:0,value:createTypedArray("float32",pp)},this.addEffect=addEffect}var PropertyFactory=function(){function _d(rp,ap,sp,lp,up){ap.sid&&(ap=rp.globalData.slotManager.getProp(ap));var cp;if(!ap.k.length)cp=new ValueProperty(rp,ap,lp,up);else if(typeof ap.k[0]=="number")cp=new MultiDimensionalProperty(rp,ap,lp,up);else switch(sp){case 0:cp=new KeyframedValueProperty(rp,ap,lp,up);break;case 1:cp=new KeyframedMultidimensionalProperty(rp,ap,lp,up);break}return cp.effectsSequence.length&&up.addDynamicProperty(cp),cp}var np={getProp:_d};return np}();function DynamicPropertyContainer(){}DynamicPropertyContainer.prototype={addDynamicProperty:function(np){this.dynamicProperties.indexOf(np)===-1&&(this.dynamicProperties.push(np),this.container.addDynamicProperty(this),this._isAnimated=!0)},iterateDynamicProperties:function(){this._mdf=!1;var np,rp=this.dynamicProperties.length;for(np=0;np<rp;np+=1)this.dynamicProperties[np].getValue(),this.dynamicProperties[np]._mdf&&(this._mdf=!0)},initDynamicPropertyContainer:function(np){this.container=np,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1}};var pointPool=function(){function _d(){return createTypedArray("float32",2)}return poolFactory(8,_d)}();function ShapePath(){this.c=!1,this._length=0,this._maxLength=8,this.v=createSizedArray(this._maxLength),this.o=createSizedArray(this._maxLength),this.i=createSizedArray(this._maxLength)}ShapePath.prototype.setPathData=function(_d,np){this.c=_d,this.setLength(np);for(var rp=0;rp<np;)this.v[rp]=pointPool.newElement(),this.o[rp]=pointPool.newElement(),this.i[rp]=pointPool.newElement(),rp+=1},ShapePath.prototype.setLength=function(_d){for(;this._maxLength<_d;)this.doubleArrayLength();this._length=_d},ShapePath.prototype.doubleArrayLength=function(){this.v=this.v.concat(createSizedArray(this._maxLength)),this.i=this.i.concat(createSizedArray(this._maxLength)),this.o=this.o.concat(createSizedArray(this._maxLength)),this._maxLength*=2},ShapePath.prototype.setXYAt=function(_d,np,rp,ap,sp){var lp;switch(this._length=Math.max(this._length,ap+1),this._length>=this._maxLength&&this.doubleArrayLength(),rp){case"v":lp=this.v;break;case"i":lp=this.i;break;case"o":lp=this.o;break;default:lp=[];break}(!lp[ap]||lp[ap]&&!sp)&&(lp[ap]=pointPool.newElement()),lp[ap][0]=_d,lp[ap][1]=np},ShapePath.prototype.setTripleAt=function(_d,np,rp,ap,sp,lp,up,cp){this.setXYAt(_d,np,"v",up,cp),this.setXYAt(rp,ap,"o",up,cp),this.setXYAt(sp,lp,"i",up,cp)},ShapePath.prototype.reverse=function(){var _d=new ShapePath;_d.setPathData(this.c,this._length);var np=this.v,rp=this.o,ap=this.i,sp=0;this.c&&(_d.setTripleAt(np[0][0],np[0][1],ap[0][0],ap[0][1],rp[0][0],rp[0][1],0,!1),sp=1);var lp=this._length-1,up=this._length,cp;for(cp=sp;cp<up;cp+=1)_d.setTripleAt(np[lp][0],np[lp][1],ap[lp][0],ap[lp][1],rp[lp][0],rp[lp][1],cp,!1),lp-=1;return _d},ShapePath.prototype.length=function(){return this._length};var shapePool=function(){function _d(){return new ShapePath}function np(sp){var lp=sp._length,up;for(up=0;up<lp;up+=1)pointPool.release(sp.v[up]),pointPool.release(sp.i[up]),pointPool.release(sp.o[up]),sp.v[up]=null,sp.i[up]=null,sp.o[up]=null;sp._length=0,sp.c=!1}function rp(sp){var lp=ap.newElement(),up,cp=sp._length===void 0?sp.v.length:sp._length;for(lp.setLength(cp),lp.c=sp.c,up=0;up<cp;up+=1)lp.setTripleAt(sp.v[up][0],sp.v[up][1],sp.o[up][0],sp.o[up][1],sp.i[up][0],sp.i[up][1],up);return lp}var ap=poolFactory(4,_d,np);return ap.clone=rp,ap}();function ShapeCollection(){this._length=0,this._maxLength=4,this.shapes=createSizedArray(this._maxLength)}ShapeCollection.prototype.addShape=function(_d){this._length===this._maxLength&&(this.shapes=this.shapes.concat(createSizedArray(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=_d,this._length+=1},ShapeCollection.prototype.releaseShapes=function(){var _d;for(_d=0;_d<this._length;_d+=1)shapePool.release(this.shapes[_d]);this._length=0};var shapeCollectionPool=function(){var _d={newShapeCollection:sp,release:lp},np=0,rp=4,ap=createSizedArray(rp);function sp(){var up;return np?(np-=1,up=ap[np]):up=new ShapeCollection,up}function lp(up){var cp,dp=up._length;for(cp=0;cp<dp;cp+=1)shapePool.release(up.shapes[cp]);up._length=0,np===rp&&(ap=pooling.double(ap),rp*=2),ap[np]=up,np+=1}return _d}(),ShapePropertyFactory=function(){var _d=-999999;function np(yp,bp,Ep){var wp=Ep.lastIndex,_p,Cp,$p,Rp,Pp,Op,jp,Mp,Ap,Dp=this.keyframes;if(yp<Dp[0].t-this.offsetTime)_p=Dp[0].s[0],$p=!0,wp=0;else if(yp>=Dp[Dp.length-1].t-this.offsetTime)_p=Dp[Dp.length-1].s?Dp[Dp.length-1].s[0]:Dp[Dp.length-2].e[0],$p=!0;else{for(var Fp=wp,Ip=Dp.length-1,kp=!0,Tp,Np,Lp;kp&&(Tp=Dp[Fp],Np=Dp[Fp+1],!(Np.t-this.offsetTime>yp));)Fp<Ip-1?Fp+=1:kp=!1;if(Lp=this.keyframesMetadata[Fp]||{},$p=Tp.h===1,wp=Fp,!$p){if(yp>=Np.t-this.offsetTime)Mp=1;else if(yp<Tp.t-this.offsetTime)Mp=0;else{var Vp;Lp.__fnct?Vp=Lp.__fnct:(Vp=BezierFactory.getBezierEasing(Tp.o.x,Tp.o.y,Tp.i.x,Tp.i.y).get,Lp.__fnct=Vp),Mp=Vp((yp-(Tp.t-this.offsetTime))/(Np.t-this.offsetTime-(Tp.t-this.offsetTime)))}Cp=Np.s?Np.s[0]:Tp.e[0]}_p=Tp.s[0]}for(Op=bp._length,jp=_p.i[0].length,Ep.lastIndex=wp,Rp=0;Rp<Op;Rp+=1)for(Pp=0;Pp<jp;Pp+=1)Ap=$p?_p.i[Rp][Pp]:_p.i[Rp][Pp]+(Cp.i[Rp][Pp]-_p.i[Rp][Pp])*Mp,bp.i[Rp][Pp]=Ap,Ap=$p?_p.o[Rp][Pp]:_p.o[Rp][Pp]+(Cp.o[Rp][Pp]-_p.o[Rp][Pp])*Mp,bp.o[Rp][Pp]=Ap,Ap=$p?_p.v[Rp][Pp]:_p.v[Rp][Pp]+(Cp.v[Rp][Pp]-_p.v[Rp][Pp])*Mp,bp.v[Rp][Pp]=Ap}function rp(){var yp=this.comp.renderedFrame-this.offsetTime,bp=this.keyframes[0].t-this.offsetTime,Ep=this.keyframes[this.keyframes.length-1].t-this.offsetTime,wp=this._caching.lastFrame;return wp!==_d&&(wp<bp&&yp<bp||wp>Ep&&yp>Ep)||(this._caching.lastIndex=wp<yp?this._caching.lastIndex:0,this.interpolateShape(yp,this.pv,this._caching)),this._caching.lastFrame=yp,this.pv}function ap(){this.paths=this.localShapeCollection}function sp(yp,bp){if(yp._length!==bp._length||yp.c!==bp.c)return!1;var Ep,wp=yp._length;for(Ep=0;Ep<wp;Ep+=1)if(yp.v[Ep][0]!==bp.v[Ep][0]||yp.v[Ep][1]!==bp.v[Ep][1]||yp.o[Ep][0]!==bp.o[Ep][0]||yp.o[Ep][1]!==bp.o[Ep][1]||yp.i[Ep][0]!==bp.i[Ep][0]||yp.i[Ep][1]!==bp.i[Ep][1])return!1;return!0}function lp(yp){sp(this.v,yp)||(this.v=shapePool.clone(yp),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}function up(){if(this.elem.globalData.frameId!==this.frameId){if(!this.effectsSequence.length){this._mdf=!1;return}if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=!1;var yp;this.kf?yp=this.pv:this.data.ks?yp=this.data.ks.k:yp=this.data.pt.k;var bp,Ep=this.effectsSequence.length;for(bp=0;bp<Ep;bp+=1)yp=this.effectsSequence[bp](yp);this.setVValue(yp),this.lock=!1,this.frameId=this.elem.globalData.frameId}}function cp(yp,bp,Ep){this.propType="shape",this.comp=yp.comp,this.container=yp,this.elem=yp,this.data=bp,this.k=!1,this.kf=!1,this._mdf=!1;var wp=Ep===3?bp.pt.k:bp.ks.k;this.v=shapePool.clone(wp),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=ap,this.effectsSequence=[]}function dp(yp){this.effectsSequence.push(yp),this.container.addDynamicProperty(this)}cp.prototype.interpolateShape=np,cp.prototype.getValue=up,cp.prototype.setVValue=lp,cp.prototype.addEffect=dp;function fp(yp,bp,Ep){this.propType="shape",this.comp=yp.comp,this.elem=yp,this.container=yp,this.offsetTime=yp.data.st,this.keyframes=Ep===3?bp.pt.k:bp.ks.k,this.keyframesMetadata=[],this.k=!0,this.kf=!0;var wp=this.keyframes[0].s[0].i.length;this.v=shapePool.newElement(),this.v.setPathData(this.keyframes[0].s[0].c,wp),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=_d,this.reset=ap,this._caching={lastFrame:_d,lastIndex:0},this.effectsSequence=[rp.bind(this)]}fp.prototype.getValue=up,fp.prototype.interpolateShape=np,fp.prototype.setVValue=lp,fp.prototype.addEffect=dp;var pp=function(){var yp=roundCorner;function bp(Ep,wp){this.v=shapePool.newElement(),this.v.setPathData(!0,4),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=wp.d,this.elem=Ep,this.comp=Ep.comp,this.frameId=-1,this.initDynamicPropertyContainer(Ep),this.p=PropertyFactory.getProp(Ep,wp.p,1,0,this),this.s=PropertyFactory.getProp(Ep,wp.s,1,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertEllToPath())}return bp.prototype={reset:ap,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertEllToPath())},convertEllToPath:function(){var wp=this.p.v[0],_p=this.p.v[1],Cp=this.s.v[0]/2,$p=this.s.v[1]/2,Rp=this.d!==3,Pp=this.v;Pp.v[0][0]=wp,Pp.v[0][1]=_p-$p,Pp.v[1][0]=Rp?wp+Cp:wp-Cp,Pp.v[1][1]=_p,Pp.v[2][0]=wp,Pp.v[2][1]=_p+$p,Pp.v[3][0]=Rp?wp-Cp:wp+Cp,Pp.v[3][1]=_p,Pp.i[0][0]=Rp?wp-Cp*yp:wp+Cp*yp,Pp.i[0][1]=_p-$p,Pp.i[1][0]=Rp?wp+Cp:wp-Cp,Pp.i[1][1]=_p-$p*yp,Pp.i[2][0]=Rp?wp+Cp*yp:wp-Cp*yp,Pp.i[2][1]=_p+$p,Pp.i[3][0]=Rp?wp-Cp:wp+Cp,Pp.i[3][1]=_p+$p*yp,Pp.o[0][0]=Rp?wp+Cp*yp:wp-Cp*yp,Pp.o[0][1]=_p-$p,Pp.o[1][0]=Rp?wp+Cp:wp-Cp,Pp.o[1][1]=_p+$p*yp,Pp.o[2][0]=Rp?wp-Cp*yp:wp+Cp*yp,Pp.o[2][1]=_p+$p,Pp.o[3][0]=Rp?wp-Cp:wp+Cp,Pp.o[3][1]=_p-$p*yp}},extendPrototype([DynamicPropertyContainer],bp),bp}(),hp=function(){function yp(bp,Ep){this.v=shapePool.newElement(),this.v.setPathData(!0,0),this.elem=bp,this.comp=bp.comp,this.data=Ep,this.frameId=-1,this.d=Ep.d,this.initDynamicPropertyContainer(bp),Ep.sy===1?(this.ir=PropertyFactory.getProp(bp,Ep.ir,0,0,this),this.is=PropertyFactory.getProp(bp,Ep.is,0,.01,this),this.convertToPath=this.convertStarToPath):this.convertToPath=this.convertPolygonToPath,this.pt=PropertyFactory.getProp(bp,Ep.pt,0,0,this),this.p=PropertyFactory.getProp(bp,Ep.p,1,0,this),this.r=PropertyFactory.getProp(bp,Ep.r,0,degToRads,this),this.or=PropertyFactory.getProp(bp,Ep.or,0,0,this),this.os=PropertyFactory.getProp(bp,Ep.os,0,.01,this),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertToPath())}return yp.prototype={reset:ap,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertToPath())},convertStarToPath:function(){var Ep=Math.floor(this.pt.v)*2,wp=Math.PI*2/Ep,_p=!0,Cp=this.or.v,$p=this.ir.v,Rp=this.os.v,Pp=this.is.v,Op=2*Math.PI*Cp/(Ep*2),jp=2*Math.PI*$p/(Ep*2),Mp,Ap,Dp,Fp,Ip=-Math.PI/2;Ip+=this.r.v;var kp=this.data.d===3?-1:1;for(this.v._length=0,Mp=0;Mp<Ep;Mp+=1){Ap=_p?Cp:$p,Dp=_p?Rp:Pp,Fp=_p?Op:jp;var Tp=Ap*Math.cos(Ip),Np=Ap*Math.sin(Ip),Lp=Tp===0&&Np===0?0:Np/Math.sqrt(Tp*Tp+Np*Np),Vp=Tp===0&&Np===0?0:-Tp/Math.sqrt(Tp*Tp+Np*Np);Tp+=+this.p.v[0],Np+=+this.p.v[1],this.v.setTripleAt(Tp,Np,Tp-Lp*Fp*Dp*kp,Np-Vp*Fp*Dp*kp,Tp+Lp*Fp*Dp*kp,Np+Vp*Fp*Dp*kp,Mp,!0),_p=!_p,Ip+=wp*kp}},convertPolygonToPath:function(){var Ep=Math.floor(this.pt.v),wp=Math.PI*2/Ep,_p=this.or.v,Cp=this.os.v,$p=2*Math.PI*_p/(Ep*4),Rp,Pp=-Math.PI*.5,Op=this.data.d===3?-1:1;for(Pp+=this.r.v,this.v._length=0,Rp=0;Rp<Ep;Rp+=1){var jp=_p*Math.cos(Pp),Mp=_p*Math.sin(Pp),Ap=jp===0&&Mp===0?0:Mp/Math.sqrt(jp*jp+Mp*Mp),Dp=jp===0&&Mp===0?0:-jp/Math.sqrt(jp*jp+Mp*Mp);jp+=+this.p.v[0],Mp+=+this.p.v[1],this.v.setTripleAt(jp,Mp,jp-Ap*$p*Cp*Op,Mp-Dp*$p*Cp*Op,jp+Ap*$p*Cp*Op,Mp+Dp*$p*Cp*Op,Rp,!0),Pp+=wp*Op}this.paths.length=0,this.paths[0]=this.v}},extendPrototype([DynamicPropertyContainer],yp),yp}(),mp=function(){function yp(bp,Ep){this.v=shapePool.newElement(),this.v.c=!0,this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=bp,this.comp=bp.comp,this.frameId=-1,this.d=Ep.d,this.initDynamicPropertyContainer(bp),this.p=PropertyFactory.getProp(bp,Ep.p,1,0,this),this.s=PropertyFactory.getProp(bp,Ep.s,1,0,this),this.r=PropertyFactory.getProp(bp,Ep.r,0,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertRectToPath())}return yp.prototype={convertRectToPath:function(){var Ep=this.p.v[0],wp=this.p.v[1],_p=this.s.v[0]/2,Cp=this.s.v[1]/2,$p=bmMin(_p,Cp,this.r.v),Rp=$p*(1-roundCorner);this.v._length=0,this.d===2||this.d===1?(this.v.setTripleAt(Ep+_p,wp-Cp+$p,Ep+_p,wp-Cp+$p,Ep+_p,wp-Cp+Rp,0,!0),this.v.setTripleAt(Ep+_p,wp+Cp-$p,Ep+_p,wp+Cp-Rp,Ep+_p,wp+Cp-$p,1,!0),$p!==0?(this.v.setTripleAt(Ep+_p-$p,wp+Cp,Ep+_p-$p,wp+Cp,Ep+_p-Rp,wp+Cp,2,!0),this.v.setTripleAt(Ep-_p+$p,wp+Cp,Ep-_p+Rp,wp+Cp,Ep-_p+$p,wp+Cp,3,!0),this.v.setTripleAt(Ep-_p,wp+Cp-$p,Ep-_p,wp+Cp-$p,Ep-_p,wp+Cp-Rp,4,!0),this.v.setTripleAt(Ep-_p,wp-Cp+$p,Ep-_p,wp-Cp+Rp,Ep-_p,wp-Cp+$p,5,!0),this.v.setTripleAt(Ep-_p+$p,wp-Cp,Ep-_p+$p,wp-Cp,Ep-_p+Rp,wp-Cp,6,!0),this.v.setTripleAt(Ep+_p-$p,wp-Cp,Ep+_p-Rp,wp-Cp,Ep+_p-$p,wp-Cp,7,!0)):(this.v.setTripleAt(Ep-_p,wp+Cp,Ep-_p+Rp,wp+Cp,Ep-_p,wp+Cp,2),this.v.setTripleAt(Ep-_p,wp-Cp,Ep-_p,wp-Cp+Rp,Ep-_p,wp-Cp,3))):(this.v.setTripleAt(Ep+_p,wp-Cp+$p,Ep+_p,wp-Cp+Rp,Ep+_p,wp-Cp+$p,0,!0),$p!==0?(this.v.setTripleAt(Ep+_p-$p,wp-Cp,Ep+_p-$p,wp-Cp,Ep+_p-Rp,wp-Cp,1,!0),this.v.setTripleAt(Ep-_p+$p,wp-Cp,Ep-_p+Rp,wp-Cp,Ep-_p+$p,wp-Cp,2,!0),this.v.setTripleAt(Ep-_p,wp-Cp+$p,Ep-_p,wp-Cp+$p,Ep-_p,wp-Cp+Rp,3,!0),this.v.setTripleAt(Ep-_p,wp+Cp-$p,Ep-_p,wp+Cp-Rp,Ep-_p,wp+Cp-$p,4,!0),this.v.setTripleAt(Ep-_p+$p,wp+Cp,Ep-_p+$p,wp+Cp,Ep-_p+Rp,wp+Cp,5,!0),this.v.setTripleAt(Ep+_p-$p,wp+Cp,Ep+_p-Rp,wp+Cp,Ep+_p-$p,wp+Cp,6,!0),this.v.setTripleAt(Ep+_p,wp+Cp-$p,Ep+_p,wp+Cp-$p,Ep+_p,wp+Cp-Rp,7,!0)):(this.v.setTripleAt(Ep-_p,wp-Cp,Ep-_p+Rp,wp-Cp,Ep-_p,wp-Cp,1,!0),this.v.setTripleAt(Ep-_p,wp+Cp,Ep-_p,wp+Cp-Rp,Ep-_p,wp+Cp,2,!0),this.v.setTripleAt(Ep+_p,wp+Cp,Ep+_p-Rp,wp+Cp,Ep+_p,wp+Cp,3,!0)))},getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertRectToPath())},reset:ap},extendPrototype([DynamicPropertyContainer],yp),yp}();function gp(yp,bp,Ep){var wp;if(Ep===3||Ep===4){var _p=Ep===3?bp.pt:bp.ks,Cp=_p.k;Cp.length?wp=new fp(yp,bp,Ep):wp=new cp(yp,bp,Ep)}else Ep===5?wp=new mp(yp,bp):Ep===6?wp=new pp(yp,bp):Ep===7&&(wp=new hp(yp,bp));return wp.k&&yp.addDynamicProperty(wp),wp}function vp(){return cp}function xp(){return fp}var Sp={};return Sp.getShapeProp=gp,Sp.getConstructorFunction=vp,Sp.getKeyframedConstructorFunction=xp,Sp}();/*!
 Transformation Matrix v2.0
 (c) Epistemex 2014-2015
 www.epistemex.com
 By Ken Fyrstenberg
 Contributions by leeoniya.
 License: MIT, header required.
 */var Matrix=function(){var _d=Math.cos,np=Math.sin,rp=Math.tan,ap=Math.round;function sp(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function lp(Tp){if(Tp===0)return this;var Np=_d(Tp),Lp=np(Tp);return this._t(Np,-Lp,0,0,Lp,Np,0,0,0,0,1,0,0,0,0,1)}function up(Tp){if(Tp===0)return this;var Np=_d(Tp),Lp=np(Tp);return this._t(1,0,0,0,0,Np,-Lp,0,0,Lp,Np,0,0,0,0,1)}function cp(Tp){if(Tp===0)return this;var Np=_d(Tp),Lp=np(Tp);return this._t(Np,0,Lp,0,0,1,0,0,-Lp,0,Np,0,0,0,0,1)}function dp(Tp){if(Tp===0)return this;var Np=_d(Tp),Lp=np(Tp);return this._t(Np,-Lp,0,0,Lp,Np,0,0,0,0,1,0,0,0,0,1)}function fp(Tp,Np){return this._t(1,Np,Tp,1,0,0)}function pp(Tp,Np){return this.shear(rp(Tp),rp(Np))}function hp(Tp,Np){var Lp=_d(Np),Vp=np(Np);return this._t(Lp,Vp,0,0,-Vp,Lp,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,rp(Tp),1,0,0,0,0,1,0,0,0,0,1)._t(Lp,-Vp,0,0,Vp,Lp,0,0,0,0,1,0,0,0,0,1)}function mp(Tp,Np,Lp){return!Lp&&Lp!==0&&(Lp=1),Tp===1&&Np===1&&Lp===1?this:this._t(Tp,0,0,0,0,Np,0,0,0,0,Lp,0,0,0,0,1)}function gp(Tp,Np,Lp,Vp,zp,Wp,Up,qp,Bp,Yp,Xp,Qp,am,Jp,im,Zp){return this.props[0]=Tp,this.props[1]=Np,this.props[2]=Lp,this.props[3]=Vp,this.props[4]=zp,this.props[5]=Wp,this.props[6]=Up,this.props[7]=qp,this.props[8]=Bp,this.props[9]=Yp,this.props[10]=Xp,this.props[11]=Qp,this.props[12]=am,this.props[13]=Jp,this.props[14]=im,this.props[15]=Zp,this}function vp(Tp,Np,Lp){return Lp=Lp||0,Tp!==0||Np!==0||Lp!==0?this._t(1,0,0,0,0,1,0,0,0,0,1,0,Tp,Np,Lp,1):this}function xp(Tp,Np,Lp,Vp,zp,Wp,Up,qp,Bp,Yp,Xp,Qp,am,Jp,im,Zp){var Gp=this.props;if(Tp===1&&Np===0&&Lp===0&&Vp===0&&zp===0&&Wp===1&&Up===0&&qp===0&&Bp===0&&Yp===0&&Xp===1&&Qp===0)return Gp[12]=Gp[12]*Tp+Gp[15]*am,Gp[13]=Gp[13]*Wp+Gp[15]*Jp,Gp[14]=Gp[14]*Xp+Gp[15]*im,Gp[15]*=Zp,this._identityCalculated=!1,this;var tm=Gp[0],om=Gp[1],em=Gp[2],_m=Gp[3],Cm=Gp[4],Rm=Gp[5],Em=Gp[6],$m=Gp[7],fm=Gp[8],wm=Gp[9],pm=Gp[10],hm=Gp[11],sm=Gp[12],cm=Gp[13],ym=Gp[14],Tm=Gp[15];return Gp[0]=tm*Tp+om*zp+em*Bp+_m*am,Gp[1]=tm*Np+om*Wp+em*Yp+_m*Jp,Gp[2]=tm*Lp+om*Up+em*Xp+_m*im,Gp[3]=tm*Vp+om*qp+em*Qp+_m*Zp,Gp[4]=Cm*Tp+Rm*zp+Em*Bp+$m*am,Gp[5]=Cm*Np+Rm*Wp+Em*Yp+$m*Jp,Gp[6]=Cm*Lp+Rm*Up+Em*Xp+$m*im,Gp[7]=Cm*Vp+Rm*qp+Em*Qp+$m*Zp,Gp[8]=fm*Tp+wm*zp+pm*Bp+hm*am,Gp[9]=fm*Np+wm*Wp+pm*Yp+hm*Jp,Gp[10]=fm*Lp+wm*Up+pm*Xp+hm*im,Gp[11]=fm*Vp+wm*qp+pm*Qp+hm*Zp,Gp[12]=sm*Tp+cm*zp+ym*Bp+Tm*am,Gp[13]=sm*Np+cm*Wp+ym*Yp+Tm*Jp,Gp[14]=sm*Lp+cm*Up+ym*Xp+Tm*im,Gp[15]=sm*Vp+cm*qp+ym*Qp+Tm*Zp,this._identityCalculated=!1,this}function Sp(Tp){var Np=Tp.props;return this.transform(Np[0],Np[1],Np[2],Np[3],Np[4],Np[5],Np[6],Np[7],Np[8],Np[9],Np[10],Np[11],Np[12],Np[13],Np[14],Np[15])}function yp(){return this._identityCalculated||(this._identity=!(this.props[0]!==1||this.props[1]!==0||this.props[2]!==0||this.props[3]!==0||this.props[4]!==0||this.props[5]!==1||this.props[6]!==0||this.props[7]!==0||this.props[8]!==0||this.props[9]!==0||this.props[10]!==1||this.props[11]!==0||this.props[12]!==0||this.props[13]!==0||this.props[14]!==0||this.props[15]!==1),this._identityCalculated=!0),this._identity}function bp(Tp){for(var Np=0;Np<16;){if(Tp.props[Np]!==this.props[Np])return!1;Np+=1}return!0}function Ep(Tp){var Np;for(Np=0;Np<16;Np+=1)Tp.props[Np]=this.props[Np];return Tp}function wp(Tp){var Np;for(Np=0;Np<16;Np+=1)this.props[Np]=Tp[Np]}function _p(Tp,Np,Lp){return{x:Tp*this.props[0]+Np*this.props[4]+Lp*this.props[8]+this.props[12],y:Tp*this.props[1]+Np*this.props[5]+Lp*this.props[9]+this.props[13],z:Tp*this.props[2]+Np*this.props[6]+Lp*this.props[10]+this.props[14]}}function Cp(Tp,Np,Lp){return Tp*this.props[0]+Np*this.props[4]+Lp*this.props[8]+this.props[12]}function $p(Tp,Np,Lp){return Tp*this.props[1]+Np*this.props[5]+Lp*this.props[9]+this.props[13]}function Rp(Tp,Np,Lp){return Tp*this.props[2]+Np*this.props[6]+Lp*this.props[10]+this.props[14]}function Pp(){var Tp=this.props[0]*this.props[5]-this.props[1]*this.props[4],Np=this.props[5]/Tp,Lp=-this.props[1]/Tp,Vp=-this.props[4]/Tp,zp=this.props[0]/Tp,Wp=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/Tp,Up=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/Tp,qp=new Matrix;return qp.props[0]=Np,qp.props[1]=Lp,qp.props[4]=Vp,qp.props[5]=zp,qp.props[12]=Wp,qp.props[13]=Up,qp}function Op(Tp){var Np=this.getInverseMatrix();return Np.applyToPointArray(Tp[0],Tp[1],Tp[2]||0)}function jp(Tp){var Np,Lp=Tp.length,Vp=[];for(Np=0;Np<Lp;Np+=1)Vp[Np]=Op(Tp[Np]);return Vp}function Mp(Tp,Np,Lp){var Vp=createTypedArray("float32",6);if(this.isIdentity())Vp[0]=Tp[0],Vp[1]=Tp[1],Vp[2]=Np[0],Vp[3]=Np[1],Vp[4]=Lp[0],Vp[5]=Lp[1];else{var zp=this.props[0],Wp=this.props[1],Up=this.props[4],qp=this.props[5],Bp=this.props[12],Yp=this.props[13];Vp[0]=Tp[0]*zp+Tp[1]*Up+Bp,Vp[1]=Tp[0]*Wp+Tp[1]*qp+Yp,Vp[2]=Np[0]*zp+Np[1]*Up+Bp,Vp[3]=Np[0]*Wp+Np[1]*qp+Yp,Vp[4]=Lp[0]*zp+Lp[1]*Up+Bp,Vp[5]=Lp[0]*Wp+Lp[1]*qp+Yp}return Vp}function Ap(Tp,Np,Lp){var Vp;return this.isIdentity()?Vp=[Tp,Np,Lp]:Vp=[Tp*this.props[0]+Np*this.props[4]+Lp*this.props[8]+this.props[12],Tp*this.props[1]+Np*this.props[5]+Lp*this.props[9]+this.props[13],Tp*this.props[2]+Np*this.props[6]+Lp*this.props[10]+this.props[14]],Vp}function Dp(Tp,Np){if(this.isIdentity())return Tp+","+Np;var Lp=this.props;return Math.round((Tp*Lp[0]+Np*Lp[4]+Lp[12])*100)/100+","+Math.round((Tp*Lp[1]+Np*Lp[5]+Lp[13])*100)/100}function Fp(){for(var Tp=0,Np=this.props,Lp="matrix3d(",Vp=1e4;Tp<16;)Lp+=ap(Np[Tp]*Vp)/Vp,Lp+=Tp===15?")":",",Tp+=1;return Lp}function Ip(Tp){var Np=1e4;return Tp<1e-6&&Tp>0||Tp>-1e-6&&Tp<0?ap(Tp*Np)/Np:Tp}function kp(){var Tp=this.props,Np=Ip(Tp[0]),Lp=Ip(Tp[1]),Vp=Ip(Tp[4]),zp=Ip(Tp[5]),Wp=Ip(Tp[12]),Up=Ip(Tp[13]);return"matrix("+Np+","+Lp+","+Vp+","+zp+","+Wp+","+Up+")"}return function(){this.reset=sp,this.rotate=lp,this.rotateX=up,this.rotateY=cp,this.rotateZ=dp,this.skew=pp,this.skewFromAxis=hp,this.shear=fp,this.scale=mp,this.setTransform=gp,this.translate=vp,this.transform=xp,this.multiply=Sp,this.applyToPoint=_p,this.applyToX=Cp,this.applyToY=$p,this.applyToZ=Rp,this.applyToPointArray=Ap,this.applyToTriplePoints=Mp,this.applyToPointStringified=Dp,this.toCSS=Fp,this.to2dCSS=kp,this.clone=Ep,this.cloneFromProps=wp,this.equals=bp,this.inversePoints=jp,this.inversePoint=Op,this.getInverseMatrix=Pp,this._t=this.transform,this.isIdentity=yp,this._identity=!0,this._identityCalculated=!1,this.props=createTypedArray("float32",16),this.reset()}}();function _typeof$3(_d){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$3=function(rp){return typeof rp}:_typeof$3=function(rp){return rp&&typeof Symbol=="function"&&rp.constructor===Symbol&&rp!==Symbol.prototype?"symbol":typeof rp},_typeof$3(_d)}var lottie={};function setLocation(_d){setLocationHref(_d)}function searchAnimations(){animationManager.searchAnimations()}function setSubframeRendering(_d){setSubframeEnabled(_d)}function setPrefix(_d){setIdPrefix(_d)}function loadAnimation(_d){return animationManager.loadAnimation(_d)}function setQuality(_d){if(typeof _d=="string")switch(_d){case"high":setDefaultCurveSegments(200);break;default:case"medium":setDefaultCurveSegments(50);break;case"low":setDefaultCurveSegments(10);break}else!isNaN(_d)&&_d>1&&setDefaultCurveSegments(_d)}function inBrowser(){return typeof navigator<"u"}function installPlugin(_d,np){_d==="expressions"&&setExpressionsPlugin(np)}function getFactory(_d){switch(_d){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix;default:return null}}lottie.play=animationManager.play,lottie.pause=animationManager.pause,lottie.setLocationHref=setLocation,lottie.togglePause=animationManager.togglePause,lottie.setSpeed=animationManager.setSpeed,lottie.setDirection=animationManager.setDirection,lottie.stop=animationManager.stop,lottie.searchAnimations=searchAnimations,lottie.registerAnimation=animationManager.registerAnimation,lottie.loadAnimation=loadAnimation,lottie.setSubframeRendering=setSubframeRendering,lottie.resize=animationManager.resize,lottie.goToAndStop=animationManager.goToAndStop,lottie.destroy=animationManager.destroy,lottie.setQuality=setQuality,lottie.inBrowser=inBrowser,lottie.installPlugin=installPlugin,lottie.freeze=animationManager.freeze,lottie.unfreeze=animationManager.unfreeze,lottie.setVolume=animationManager.setVolume,lottie.mute=animationManager.mute,lottie.unmute=animationManager.unmute,lottie.getRegisteredAnimations=animationManager.getRegisteredAnimations,lottie.useWebWorker=setWebWorker,lottie.setIDPrefix=setPrefix,lottie.__getFactory=getFactory,lottie.version="5.12.2";function checkReady(){document.readyState==="complete"&&(clearInterval(readyStateCheckInterval),searchAnimations())}function getQueryVariable(_d){for(var np=queryString.split("&"),rp=0;rp<np.length;rp+=1){var ap=np[rp].split("=");if(decodeURIComponent(ap[0])==_d)return decodeURIComponent(ap[1])}return null}var queryString="";{var scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index]||{src:""};queryString=myScript.src?myScript.src.replace(/^[^\?]+\??/,""):"",getQueryVariable("renderer")}var readyStateCheckInterval=setInterval(checkReady,100);try{_typeof$3(exports)!=="object"&&(window.bodymovin=lottie)}catch(_d){}var ShapeModifiers=function(){var _d={},np={};_d.registerModifier=rp,_d.getModifier=ap;function rp(sp,lp){np[sp]||(np[sp]=lp)}function ap(sp,lp,up){return new np[sp](lp,up)}return _d}();function ShapeModifier(){}ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function(_d){if(!this.closed){_d.sh.container.addDynamicProperty(_d.sh);var np={shape:_d.sh,data:_d,localShapeCollection:shapeCollectionPool.newShapeCollection()};this.shapes.push(np),this.addShapeToModifier(np),this._isAnimated&&_d.setAsAnimated()}},ShapeModifier.prototype.init=function(_d,np){this.shapes=[],this.elem=_d,this.initDynamicPropertyContainer(_d),this.initModifierProperties(_d,np),this.frameId=initialDefaultFrame,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)},ShapeModifier.prototype.processKeys=function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties())},extendPrototype([DynamicPropertyContainer],ShapeModifier);function TrimModifier(){}extendPrototype([ShapeModifier],TrimModifier),TrimModifier.prototype.initModifierProperties=function(_d,np){this.s=PropertyFactory.getProp(_d,np.s,0,.01,this),this.e=PropertyFactory.getProp(_d,np.e,0,.01,this),this.o=PropertyFactory.getProp(_d,np.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=np.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length},TrimModifier.prototype.addShapeToModifier=function(_d){_d.pathsData=[]},TrimModifier.prototype.calculateShapeEdges=function(_d,np,rp,ap,sp){var lp=[];np<=1?lp.push({s:_d,e:np}):_d>=1?lp.push({s:_d-1,e:np-1}):(lp.push({s:_d,e:1}),lp.push({s:0,e:np-1}));var up=[],cp,dp=lp.length,fp;for(cp=0;cp<dp;cp+=1)if(fp=lp[cp],!(fp.e*sp<ap||fp.s*sp>ap+rp)){var pp,hp;fp.s*sp<=ap?pp=0:pp=(fp.s*sp-ap)/rp,fp.e*sp>=ap+rp?hp=1:hp=(fp.e*sp-ap)/rp,up.push([pp,hp])}return up.length||up.push([0,0]),up},TrimModifier.prototype.releasePathsData=function(_d){var np,rp=_d.length;for(np=0;np<rp;np+=1)segmentsLengthPool.release(_d[np]);return _d.length=0,_d},TrimModifier.prototype.processShapes=function(_d){var np,rp;if(this._mdf||_d){var ap=this.o.v%360/360;if(ap<0&&(ap+=1),this.s.v>1?np=1+ap:this.s.v<0?np=0+ap:np=this.s.v+ap,this.e.v>1?rp=1+ap:this.e.v<0?rp=0+ap:rp=this.e.v+ap,np>rp){var sp=np;np=rp,rp=sp}np=Math.round(np*1e4)*1e-4,rp=Math.round(rp*1e4)*1e-4,this.sValue=np,this.eValue=rp}else np=this.sValue,rp=this.eValue;var lp,up,cp=this.shapes.length,dp,fp,pp,hp,mp,gp=0;if(rp===np)for(up=0;up<cp;up+=1)this.shapes[up].localShapeCollection.releaseShapes(),this.shapes[up].shape._mdf=!0,this.shapes[up].shape.paths=this.shapes[up].localShapeCollection,this._mdf&&(this.shapes[up].pathsData.length=0);else if(rp===1&&np===0||rp===0&&np===1){if(this._mdf)for(up=0;up<cp;up+=1)this.shapes[up].pathsData.length=0,this.shapes[up].shape._mdf=!0}else{var vp=[],xp,Sp;for(up=0;up<cp;up+=1)if(xp=this.shapes[up],!xp.shape._mdf&&!this._mdf&&!_d&&this.m!==2)xp.shape.paths=xp.localShapeCollection;else{if(lp=xp.shape.paths,fp=lp._length,mp=0,!xp.shape._mdf&&xp.pathsData.length)mp=xp.totalShapeLength;else{for(pp=this.releasePathsData(xp.pathsData),dp=0;dp<fp;dp+=1)hp=bez.getSegmentsLength(lp.shapes[dp]),pp.push(hp),mp+=hp.totalLength;xp.totalShapeLength=mp,xp.pathsData=pp}gp+=mp,xp.shape._mdf=!0}var yp=np,bp=rp,Ep=0,wp;for(up=cp-1;up>=0;up-=1)if(xp=this.shapes[up],xp.shape._mdf){for(Sp=xp.localShapeCollection,Sp.releaseShapes(),this.m===2&&cp>1?(wp=this.calculateShapeEdges(np,rp,xp.totalShapeLength,Ep,gp),Ep+=xp.totalShapeLength):wp=[[yp,bp]],fp=wp.length,dp=0;dp<fp;dp+=1){yp=wp[dp][0],bp=wp[dp][1],vp.length=0,bp<=1?vp.push({s:xp.totalShapeLength*yp,e:xp.totalShapeLength*bp}):yp>=1?vp.push({s:xp.totalShapeLength*(yp-1),e:xp.totalShapeLength*(bp-1)}):(vp.push({s:xp.totalShapeLength*yp,e:xp.totalShapeLength}),vp.push({s:0,e:xp.totalShapeLength*(bp-1)}));var _p=this.addShapes(xp,vp[0]);if(vp[0].s!==vp[0].e){if(vp.length>1){var Cp=xp.shape.paths.shapes[xp.shape.paths._length-1];if(Cp.c){var $p=_p.pop();this.addPaths(_p,Sp),_p=this.addShapes(xp,vp[1],$p)}else this.addPaths(_p,Sp),_p=this.addShapes(xp,vp[1])}this.addPaths(_p,Sp)}}xp.shape.paths=Sp}}},TrimModifier.prototype.addPaths=function(_d,np){var rp,ap=_d.length;for(rp=0;rp<ap;rp+=1)np.addShape(_d[rp])},TrimModifier.prototype.addSegment=function(_d,np,rp,ap,sp,lp,up){sp.setXYAt(np[0],np[1],"o",lp),sp.setXYAt(rp[0],rp[1],"i",lp+1),up&&sp.setXYAt(_d[0],_d[1],"v",lp),sp.setXYAt(ap[0],ap[1],"v",lp+1)},TrimModifier.prototype.addSegmentFromArray=function(_d,np,rp,ap){np.setXYAt(_d[1],_d[5],"o",rp),np.setXYAt(_d[2],_d[6],"i",rp+1),ap&&np.setXYAt(_d[0],_d[4],"v",rp),np.setXYAt(_d[3],_d[7],"v",rp+1)},TrimModifier.prototype.addShapes=function(_d,np,rp){var ap=_d.pathsData,sp=_d.shape.paths.shapes,lp,up=_d.shape.paths._length,cp,dp,fp=0,pp,hp,mp,gp,vp=[],xp,Sp=!0;for(rp?(hp=rp._length,xp=rp._length):(rp=shapePool.newElement(),hp=0,xp=0),vp.push(rp),lp=0;lp<up;lp+=1){for(mp=ap[lp].lengths,rp.c=sp[lp].c,dp=sp[lp].c?mp.length:mp.length+1,cp=1;cp<dp;cp+=1)if(pp=mp[cp-1],fp+pp.addedLength<np.s)fp+=pp.addedLength,rp.c=!1;else if(fp>np.e){rp.c=!1;break}else np.s<=fp&&np.e>=fp+pp.addedLength?(this.addSegment(sp[lp].v[cp-1],sp[lp].o[cp-1],sp[lp].i[cp],sp[lp].v[cp],rp,hp,Sp),Sp=!1):(gp=bez.getNewSegment(sp[lp].v[cp-1],sp[lp].v[cp],sp[lp].o[cp-1],sp[lp].i[cp],(np.s-fp)/pp.addedLength,(np.e-fp)/pp.addedLength,mp[cp-1]),this.addSegmentFromArray(gp,rp,hp,Sp),Sp=!1,rp.c=!1),fp+=pp.addedLength,hp+=1;if(sp[lp].c&&mp.length){if(pp=mp[cp-1],fp<=np.e){var yp=mp[cp-1].addedLength;np.s<=fp&&np.e>=fp+yp?(this.addSegment(sp[lp].v[cp-1],sp[lp].o[cp-1],sp[lp].i[0],sp[lp].v[0],rp,hp,Sp),Sp=!1):(gp=bez.getNewSegment(sp[lp].v[cp-1],sp[lp].v[0],sp[lp].o[cp-1],sp[lp].i[0],(np.s-fp)/yp,(np.e-fp)/yp,mp[cp-1]),this.addSegmentFromArray(gp,rp,hp,Sp),Sp=!1,rp.c=!1)}else rp.c=!1;fp+=pp.addedLength,hp+=1}if(rp._length&&(rp.setXYAt(rp.v[xp][0],rp.v[xp][1],"i",xp),rp.setXYAt(rp.v[rp._length-1][0],rp.v[rp._length-1][1],"o",rp._length-1)),fp>np.e)break;lp<up-1&&(rp=shapePool.newElement(),Sp=!0,vp.push(rp),hp=0)}return vp};function PuckerAndBloatModifier(){}extendPrototype([ShapeModifier],PuckerAndBloatModifier),PuckerAndBloatModifier.prototype.initModifierProperties=function(_d,np){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(_d,np.a,0,null,this),this._isAnimated=!!this.amount.effectsSequence.length},PuckerAndBloatModifier.prototype.processPath=function(_d,np){var rp=np/100,ap=[0,0],sp=_d._length,lp=0;for(lp=0;lp<sp;lp+=1)ap[0]+=_d.v[lp][0],ap[1]+=_d.v[lp][1];ap[0]/=sp,ap[1]/=sp;var up=shapePool.newElement();up.c=_d.c;var cp,dp,fp,pp,hp,mp;for(lp=0;lp<sp;lp+=1)cp=_d.v[lp][0]+(ap[0]-_d.v[lp][0])*rp,dp=_d.v[lp][1]+(ap[1]-_d.v[lp][1])*rp,fp=_d.o[lp][0]+(ap[0]-_d.o[lp][0])*-rp,pp=_d.o[lp][1]+(ap[1]-_d.o[lp][1])*-rp,hp=_d.i[lp][0]+(ap[0]-_d.i[lp][0])*-rp,mp=_d.i[lp][1]+(ap[1]-_d.i[lp][1])*-rp,up.setTripleAt(cp,dp,fp,pp,hp,mp,lp);return up},PuckerAndBloatModifier.prototype.processShapes=function(_d){var np,rp,ap=this.shapes.length,sp,lp,up=this.amount.v;if(up!==0){var cp,dp;for(rp=0;rp<ap;rp+=1){if(cp=this.shapes[rp],dp=cp.localShapeCollection,!(!cp.shape._mdf&&!this._mdf&&!_d))for(dp.releaseShapes(),cp.shape._mdf=!0,np=cp.shape.paths.shapes,lp=cp.shape.paths._length,sp=0;sp<lp;sp+=1)dp.addShape(this.processPath(np[sp],up));cp.shape.paths=cp.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};var TransformPropertyFactory=function(){var _d=[0,0];function np(dp){var fp=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||fp,this.a&&dp.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&dp.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&dp.skewFromAxis(-this.sk.v,this.sa.v),this.r?dp.rotate(-this.r.v):dp.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?this.data.p.z?dp.translate(this.px.v,this.py.v,-this.pz.v):dp.translate(this.px.v,this.py.v,0):dp.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}function rp(dp){if(this.elem.globalData.frameId!==this.frameId){if(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),this._mdf||dp){var fp;if(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&this.appliedTransformations<4?this.v.rotate(-this.r.v):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented){var pp,hp;if(fp=this.elem.globalData.frameRate,this.p&&this.p.keyframes&&this.p.getValueAtTime)this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(pp=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/fp,0),hp=this.p.getValueAtTime(this.p.keyframes[0].t/fp,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(pp=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/fp,0),hp=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.05)/fp,0)):(pp=this.p.pv,hp=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/fp,this.p.offsetTime));else if(this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime){pp=[],hp=[];var mp=this.px,gp=this.py;mp._caching.lastFrame+mp.offsetTime<=mp.keyframes[0].t?(pp[0]=mp.getValueAtTime((mp.keyframes[0].t+.01)/fp,0),pp[1]=gp.getValueAtTime((gp.keyframes[0].t+.01)/fp,0),hp[0]=mp.getValueAtTime(mp.keyframes[0].t/fp,0),hp[1]=gp.getValueAtTime(gp.keyframes[0].t/fp,0)):mp._caching.lastFrame+mp.offsetTime>=mp.keyframes[mp.keyframes.length-1].t?(pp[0]=mp.getValueAtTime(mp.keyframes[mp.keyframes.length-1].t/fp,0),pp[1]=gp.getValueAtTime(gp.keyframes[gp.keyframes.length-1].t/fp,0),hp[0]=mp.getValueAtTime((mp.keyframes[mp.keyframes.length-1].t-.01)/fp,0),hp[1]=gp.getValueAtTime((gp.keyframes[gp.keyframes.length-1].t-.01)/fp,0)):(pp=[mp.pv,gp.pv],hp[0]=mp.getValueAtTime((mp._caching.lastFrame+mp.offsetTime-.01)/fp,mp.offsetTime),hp[1]=gp.getValueAtTime((gp._caching.lastFrame+gp.offsetTime-.01)/fp,gp.offsetTime))}else hp=_d,pp=hp;this.v.rotate(-Math.atan2(pp[1]-hp[1],pp[0]-hp[0]))}this.data.p&&this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}}function ap(){if(this.appliedTransformations=0,this.pre.reset(),!this.a.effectsSequence.length)this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1;else return;if(!this.s.effectsSequence.length)this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2;else return;if(this.sk)if(!this.sk.effectsSequence.length&&!this.sa.effectsSequence.length)this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3;else return;this.r?this.r.effectsSequence.length||(this.pre.rotate(-this.r.v),this.appliedTransformations=4):!this.rz.effectsSequence.length&&!this.ry.effectsSequence.length&&!this.rx.effectsSequence.length&&!this.or.effectsSequence.length&&(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}function sp(){}function lp(dp){this._addDynamicProperty(dp),this.elem.addDynamicProperty(dp),this._isDirty=!0}function up(dp,fp,pp){if(this.elem=dp,this.frameId=-1,this.propType="transform",this.data=fp,this.v=new Matrix,this.pre=new Matrix,this.appliedTransformations=0,this.initDynamicPropertyContainer(pp||dp),fp.p&&fp.p.s?(this.px=PropertyFactory.getProp(dp,fp.p.x,0,0,this),this.py=PropertyFactory.getProp(dp,fp.p.y,0,0,this),fp.p.z&&(this.pz=PropertyFactory.getProp(dp,fp.p.z,0,0,this))):this.p=PropertyFactory.getProp(dp,fp.p||{k:[0,0,0]},1,0,this),fp.rx){if(this.rx=PropertyFactory.getProp(dp,fp.rx,0,degToRads,this),this.ry=PropertyFactory.getProp(dp,fp.ry,0,degToRads,this),this.rz=PropertyFactory.getProp(dp,fp.rz,0,degToRads,this),fp.or.k[0].ti){var hp,mp=fp.or.k.length;for(hp=0;hp<mp;hp+=1)fp.or.k[hp].to=null,fp.or.k[hp].ti=null}this.or=PropertyFactory.getProp(dp,fp.or,1,degToRads,this),this.or.sh=!0}else this.r=PropertyFactory.getProp(dp,fp.r||{k:0},0,degToRads,this);fp.sk&&(this.sk=PropertyFactory.getProp(dp,fp.sk,0,degToRads,this),this.sa=PropertyFactory.getProp(dp,fp.sa,0,degToRads,this)),this.a=PropertyFactory.getProp(dp,fp.a||{k:[0,0,0]},1,0,this),this.s=PropertyFactory.getProp(dp,fp.s||{k:[100,100,100]},1,.01,this),fp.o?this.o=PropertyFactory.getProp(dp,fp.o,0,.01,dp):this.o={_mdf:!1,v:1},this._isDirty=!0,this.dynamicProperties.length||this.getValue(!0)}up.prototype={applyToMatrix:np,getValue:rp,precalculateMatrix:ap,autoOrient:sp},extendPrototype([DynamicPropertyContainer],up),up.prototype.addDynamicProperty=lp,up.prototype._addDynamicProperty=DynamicPropertyContainer.prototype.addDynamicProperty;function cp(dp,fp,pp){return new up(dp,fp,pp)}return{getTransformProperty:cp}}();function RepeaterModifier(){}extendPrototype([ShapeModifier],RepeaterModifier),RepeaterModifier.prototype.initModifierProperties=function(_d,np){this.getValue=this.processKeys,this.c=PropertyFactory.getProp(_d,np.c,0,null,this),this.o=PropertyFactory.getProp(_d,np.o,0,null,this),this.tr=TransformPropertyFactory.getTransformProperty(_d,np.tr,this),this.so=PropertyFactory.getProp(_d,np.tr.so,0,.01,this),this.eo=PropertyFactory.getProp(_d,np.tr.eo,0,.01,this),this.data=np,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new Matrix,this.rMatrix=new Matrix,this.sMatrix=new Matrix,this.tMatrix=new Matrix,this.matrix=new Matrix},RepeaterModifier.prototype.applyTransforms=function(_d,np,rp,ap,sp,lp){var up=lp?-1:1,cp=ap.s.v[0]+(1-ap.s.v[0])*(1-sp),dp=ap.s.v[1]+(1-ap.s.v[1])*(1-sp);_d.translate(ap.p.v[0]*up*sp,ap.p.v[1]*up*sp,ap.p.v[2]),np.translate(-ap.a.v[0],-ap.a.v[1],ap.a.v[2]),np.rotate(-ap.r.v*up*sp),np.translate(ap.a.v[0],ap.a.v[1],ap.a.v[2]),rp.translate(-ap.a.v[0],-ap.a.v[1],ap.a.v[2]),rp.scale(lp?1/cp:cp,lp?1/dp:dp),rp.translate(ap.a.v[0],ap.a.v[1],ap.a.v[2])},RepeaterModifier.prototype.init=function(_d,np,rp,ap){for(this.elem=_d,this.arr=np,this.pos=rp,this.elemsData=ap,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(_d),this.initModifierProperties(_d,np[rp]);rp>0;)rp-=1,this._elements.unshift(np[rp]);this.dynamicProperties.length?this.k=!0:this.getValue(!0)},RepeaterModifier.prototype.resetElements=function(_d){var np,rp=_d.length;for(np=0;np<rp;np+=1)_d[np]._processed=!1,_d[np].ty==="gr"&&this.resetElements(_d[np].it)},RepeaterModifier.prototype.cloneElements=function(_d){var np=JSON.parse(JSON.stringify(_d));return this.resetElements(np),np},RepeaterModifier.prototype.changeGroupRender=function(_d,np){var rp,ap=_d.length;for(rp=0;rp<ap;rp+=1)_d[rp]._render=np,_d[rp].ty==="gr"&&this.changeGroupRender(_d[rp].it,np)},RepeaterModifier.prototype.processShapes=function(_d){var np,rp,ap,sp,lp,up=!1;if(this._mdf||_d){var cp=Math.ceil(this.c.v);if(this._groups.length<cp){for(;this._groups.length<cp;){var dp={it:this.cloneElements(this._elements),ty:"gr"};dp.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,dp),this._groups.splice(0,0,dp),this._currentCopies+=1}this.elem.reloadShapes(),up=!0}lp=0;var fp;for(ap=0;ap<=this._groups.length-1;ap+=1){if(fp=lp<cp,this._groups[ap]._render=fp,this.changeGroupRender(this._groups[ap].it,fp),!fp){var pp=this.elemsData[ap].it,hp=pp[pp.length-1];hp.transform.op.v!==0?(hp.transform.op._mdf=!0,hp.transform.op.v=0):hp.transform.op._mdf=!1}lp+=1}this._currentCopies=cp;var mp=this.o.v,gp=mp%1,vp=mp>0?Math.floor(mp):Math.ceil(mp),xp=this.pMatrix.props,Sp=this.rMatrix.props,yp=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var bp=0;if(mp>0){for(;bp<vp;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),bp+=1;gp&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,gp,!1),bp+=gp)}else if(mp<0){for(;bp>vp;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),bp-=1;gp&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-gp,!0),bp-=gp)}ap=this.data.m===1?0:this._currentCopies-1,sp=this.data.m===1?1:-1,lp=this._currentCopies;for(var Ep,wp;lp;){if(np=this.elemsData[ap].it,rp=np[np.length-1].transform.mProps.v.props,wp=rp.length,np[np.length-1].transform.mProps._mdf=!0,np[np.length-1].transform.op._mdf=!0,np[np.length-1].transform.op.v=this._currentCopies===1?this.so.v:this.so.v+(this.eo.v-this.so.v)*(ap/(this._currentCopies-1)),bp!==0){for((ap!==0&&sp===1||ap!==this._currentCopies-1&&sp===-1)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(Sp[0],Sp[1],Sp[2],Sp[3],Sp[4],Sp[5],Sp[6],Sp[7],Sp[8],Sp[9],Sp[10],Sp[11],Sp[12],Sp[13],Sp[14],Sp[15]),this.matrix.transform(yp[0],yp[1],yp[2],yp[3],yp[4],yp[5],yp[6],yp[7],yp[8],yp[9],yp[10],yp[11],yp[12],yp[13],yp[14],yp[15]),this.matrix.transform(xp[0],xp[1],xp[2],xp[3],xp[4],xp[5],xp[6],xp[7],xp[8],xp[9],xp[10],xp[11],xp[12],xp[13],xp[14],xp[15]),Ep=0;Ep<wp;Ep+=1)rp[Ep]=this.matrix.props[Ep];this.matrix.reset()}else for(this.matrix.reset(),Ep=0;Ep<wp;Ep+=1)rp[Ep]=this.matrix.props[Ep];bp+=1,lp-=1,ap+=sp}}else for(lp=this._currentCopies,ap=0,sp=1;lp;)np=this.elemsData[ap].it,rp=np[np.length-1].transform.mProps.v.props,np[np.length-1].transform.mProps._mdf=!1,np[np.length-1].transform.op._mdf=!1,lp-=1,ap+=sp;return up},RepeaterModifier.prototype.addShape=function(){};function RoundCornersModifier(){}extendPrototype([ShapeModifier],RoundCornersModifier),RoundCornersModifier.prototype.initModifierProperties=function(_d,np){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(_d,np.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length},RoundCornersModifier.prototype.processPath=function(_d,np){var rp=shapePool.newElement();rp.c=_d.c;var ap,sp=_d._length,lp,up,cp,dp,fp,pp,hp=0,mp,gp,vp,xp,Sp,yp;for(ap=0;ap<sp;ap+=1)lp=_d.v[ap],cp=_d.o[ap],up=_d.i[ap],lp[0]===cp[0]&&lp[1]===cp[1]&&lp[0]===up[0]&&lp[1]===up[1]?(ap===0||ap===sp-1)&&!_d.c?(rp.setTripleAt(lp[0],lp[1],cp[0],cp[1],up[0],up[1],hp),hp+=1):(ap===0?dp=_d.v[sp-1]:dp=_d.v[ap-1],fp=Math.sqrt(Math.pow(lp[0]-dp[0],2)+Math.pow(lp[1]-dp[1],2)),pp=fp?Math.min(fp/2,np)/fp:0,Sp=lp[0]+(dp[0]-lp[0])*pp,mp=Sp,yp=lp[1]-(lp[1]-dp[1])*pp,gp=yp,vp=mp-(mp-lp[0])*roundCorner,xp=gp-(gp-lp[1])*roundCorner,rp.setTripleAt(mp,gp,vp,xp,Sp,yp,hp),hp+=1,ap===sp-1?dp=_d.v[0]:dp=_d.v[ap+1],fp=Math.sqrt(Math.pow(lp[0]-dp[0],2)+Math.pow(lp[1]-dp[1],2)),pp=fp?Math.min(fp/2,np)/fp:0,vp=lp[0]+(dp[0]-lp[0])*pp,mp=vp,xp=lp[1]+(dp[1]-lp[1])*pp,gp=xp,Sp=mp-(mp-lp[0])*roundCorner,yp=gp-(gp-lp[1])*roundCorner,rp.setTripleAt(mp,gp,vp,xp,Sp,yp,hp),hp+=1):(rp.setTripleAt(_d.v[ap][0],_d.v[ap][1],_d.o[ap][0],_d.o[ap][1],_d.i[ap][0],_d.i[ap][1],hp),hp+=1);return rp},RoundCornersModifier.prototype.processShapes=function(_d){var np,rp,ap=this.shapes.length,sp,lp,up=this.rd.v;if(up!==0){var cp,dp;for(rp=0;rp<ap;rp+=1){if(cp=this.shapes[rp],dp=cp.localShapeCollection,!(!cp.shape._mdf&&!this._mdf&&!_d))for(dp.releaseShapes(),cp.shape._mdf=!0,np=cp.shape.paths.shapes,lp=cp.shape.paths._length,sp=0;sp<lp;sp+=1)dp.addShape(this.processPath(np[sp],up));cp.shape.paths=cp.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function floatEqual(_d,np){return Math.abs(_d-np)*1e5<=Math.min(Math.abs(_d),Math.abs(np))}function floatZero(_d){return Math.abs(_d)<=1e-5}function lerp(_d,np,rp){return _d*(1-rp)+np*rp}function lerpPoint(_d,np,rp){return[lerp(_d[0],np[0],rp),lerp(_d[1],np[1],rp)]}function quadRoots(_d,np,rp){if(_d===0)return[];var ap=np*np-4*_d*rp;if(ap<0)return[];var sp=-np/(2*_d);if(ap===0)return[sp];var lp=Math.sqrt(ap)/(2*_d);return[sp-lp,sp+lp]}function polynomialCoefficients(_d,np,rp,ap){return[-_d+3*np-3*rp+ap,3*_d-6*np+3*rp,-3*_d+3*np,_d]}function singlePoint(_d){return new PolynomialBezier(_d,_d,_d,_d,!1)}function PolynomialBezier(_d,np,rp,ap,sp){sp&&pointEqual(_d,np)&&(np=lerpPoint(_d,ap,1/3)),sp&&pointEqual(rp,ap)&&(rp=lerpPoint(_d,ap,2/3));var lp=polynomialCoefficients(_d[0],np[0],rp[0],ap[0]),up=polynomialCoefficients(_d[1],np[1],rp[1],ap[1]);this.a=[lp[0],up[0]],this.b=[lp[1],up[1]],this.c=[lp[2],up[2]],this.d=[lp[3],up[3]],this.points=[_d,np,rp,ap]}PolynomialBezier.prototype.point=function(_d){return[((this.a[0]*_d+this.b[0])*_d+this.c[0])*_d+this.d[0],((this.a[1]*_d+this.b[1])*_d+this.c[1])*_d+this.d[1]]},PolynomialBezier.prototype.derivative=function(_d){return[(3*_d*this.a[0]+2*this.b[0])*_d+this.c[0],(3*_d*this.a[1]+2*this.b[1])*_d+this.c[1]]},PolynomialBezier.prototype.tangentAngle=function(_d){var np=this.derivative(_d);return Math.atan2(np[1],np[0])},PolynomialBezier.prototype.normalAngle=function(_d){var np=this.derivative(_d);return Math.atan2(np[0],np[1])},PolynomialBezier.prototype.inflectionPoints=function(){var _d=this.a[1]*this.b[0]-this.a[0]*this.b[1];if(floatZero(_d))return[];var np=-.5*(this.a[1]*this.c[0]-this.a[0]*this.c[1])/_d,rp=np*np-1/3*(this.b[1]*this.c[0]-this.b[0]*this.c[1])/_d;if(rp<0)return[];var ap=Math.sqrt(rp);return floatZero(ap)?ap>0&&ap<1?[np]:[]:[np-ap,np+ap].filter(function(sp){return sp>0&&sp<1})},PolynomialBezier.prototype.split=function(_d){if(_d<=0)return[singlePoint(this.points[0]),this];if(_d>=1)return[this,singlePoint(this.points[this.points.length-1])];var np=lerpPoint(this.points[0],this.points[1],_d),rp=lerpPoint(this.points[1],this.points[2],_d),ap=lerpPoint(this.points[2],this.points[3],_d),sp=lerpPoint(np,rp,_d),lp=lerpPoint(rp,ap,_d),up=lerpPoint(sp,lp,_d);return[new PolynomialBezier(this.points[0],np,sp,up,!0),new PolynomialBezier(up,lp,ap,this.points[3],!0)]};function extrema(_d,np){var rp=_d.points[0][np],ap=_d.points[_d.points.length-1][np];if(rp>ap){var sp=ap;ap=rp,rp=sp}for(var lp=quadRoots(3*_d.a[np],2*_d.b[np],_d.c[np]),up=0;up<lp.length;up+=1)if(lp[up]>0&&lp[up]<1){var cp=_d.point(lp[up])[np];cp<rp?rp=cp:cp>ap&&(ap=cp)}return{min:rp,max:ap}}PolynomialBezier.prototype.bounds=function(){return{x:extrema(this,0),y:extrema(this,1)}},PolynomialBezier.prototype.boundingBox=function(){var _d=this.bounds();return{left:_d.x.min,right:_d.x.max,top:_d.y.min,bottom:_d.y.max,width:_d.x.max-_d.x.min,height:_d.y.max-_d.y.min,cx:(_d.x.max+_d.x.min)/2,cy:(_d.y.max+_d.y.min)/2}};function intersectData(_d,np,rp){var ap=_d.boundingBox();return{cx:ap.cx,cy:ap.cy,width:ap.width,height:ap.height,bez:_d,t:(np+rp)/2,t1:np,t2:rp}}function splitData(_d){var np=_d.bez.split(.5);return[intersectData(np[0],_d.t1,_d.t),intersectData(np[1],_d.t,_d.t2)]}function boxIntersect(_d,np){return Math.abs(_d.cx-np.cx)*2<_d.width+np.width&&Math.abs(_d.cy-np.cy)*2<_d.height+np.height}function intersectsImpl(_d,np,rp,ap,sp,lp){if(boxIntersect(_d,np)){if(rp>=lp||_d.width<=ap&&_d.height<=ap&&np.width<=ap&&np.height<=ap){sp.push([_d.t,np.t]);return}var up=splitData(_d),cp=splitData(np);intersectsImpl(up[0],cp[0],rp+1,ap,sp,lp),intersectsImpl(up[0],cp[1],rp+1,ap,sp,lp),intersectsImpl(up[1],cp[0],rp+1,ap,sp,lp),intersectsImpl(up[1],cp[1],rp+1,ap,sp,lp)}}PolynomialBezier.prototype.intersections=function(_d,np,rp){np===void 0&&(np=2),rp===void 0&&(rp=7);var ap=[];return intersectsImpl(intersectData(this,0,1),intersectData(_d,0,1),0,np,ap,rp),ap},PolynomialBezier.shapeSegment=function(_d,np){var rp=(np+1)%_d.length();return new PolynomialBezier(_d.v[np],_d.o[np],_d.i[rp],_d.v[rp],!0)},PolynomialBezier.shapeSegmentInverted=function(_d,np){var rp=(np+1)%_d.length();return new PolynomialBezier(_d.v[rp],_d.i[rp],_d.o[np],_d.v[np],!0)};function crossProduct(_d,np){return[_d[1]*np[2]-_d[2]*np[1],_d[2]*np[0]-_d[0]*np[2],_d[0]*np[1]-_d[1]*np[0]]}function lineIntersection(_d,np,rp,ap){var sp=[_d[0],_d[1],1],lp=[np[0],np[1],1],up=[rp[0],rp[1],1],cp=[ap[0],ap[1],1],dp=crossProduct(crossProduct(sp,lp),crossProduct(up,cp));return floatZero(dp[2])?null:[dp[0]/dp[2],dp[1]/dp[2]]}function polarOffset(_d,np,rp){return[_d[0]+Math.cos(np)*rp,_d[1]-Math.sin(np)*rp]}function pointDistance(_d,np){return Math.hypot(_d[0]-np[0],_d[1]-np[1])}function pointEqual(_d,np){return floatEqual(_d[0],np[0])&&floatEqual(_d[1],np[1])}function ZigZagModifier(){}extendPrototype([ShapeModifier],ZigZagModifier),ZigZagModifier.prototype.initModifierProperties=function(_d,np){this.getValue=this.processKeys,this.amplitude=PropertyFactory.getProp(_d,np.s,0,null,this),this.frequency=PropertyFactory.getProp(_d,np.r,0,null,this),this.pointsType=PropertyFactory.getProp(_d,np.pt,0,null,this),this._isAnimated=this.amplitude.effectsSequence.length!==0||this.frequency.effectsSequence.length!==0||this.pointsType.effectsSequence.length!==0};function setPoint(_d,np,rp,ap,sp,lp,up){var cp=rp-Math.PI/2,dp=rp+Math.PI/2,fp=np[0]+Math.cos(rp)*ap*sp,pp=np[1]-Math.sin(rp)*ap*sp;_d.setTripleAt(fp,pp,fp+Math.cos(cp)*lp,pp-Math.sin(cp)*lp,fp+Math.cos(dp)*up,pp-Math.sin(dp)*up,_d.length())}function getPerpendicularVector(_d,np){var rp=[np[0]-_d[0],np[1]-_d[1]],ap=-Math.PI*.5,sp=[Math.cos(ap)*rp[0]-Math.sin(ap)*rp[1],Math.sin(ap)*rp[0]+Math.cos(ap)*rp[1]];return sp}function getProjectingAngle(_d,np){var rp=np===0?_d.length()-1:np-1,ap=(np+1)%_d.length(),sp=_d.v[rp],lp=_d.v[ap],up=getPerpendicularVector(sp,lp);return Math.atan2(0,1)-Math.atan2(up[1],up[0])}function zigZagCorner(_d,np,rp,ap,sp,lp,up){var cp=getProjectingAngle(np,rp),dp=np.v[rp%np._length],fp=np.v[rp===0?np._length-1:rp-1],pp=np.v[(rp+1)%np._length],hp=lp===2?Math.sqrt(Math.pow(dp[0]-fp[0],2)+Math.pow(dp[1]-fp[1],2)):0,mp=lp===2?Math.sqrt(Math.pow(dp[0]-pp[0],2)+Math.pow(dp[1]-pp[1],2)):0;setPoint(_d,np.v[rp%np._length],cp,up,ap,mp/((sp+1)*2),hp/((sp+1)*2))}function zigZagSegment(_d,np,rp,ap,sp,lp){for(var up=0;up<ap;up+=1){var cp=(up+1)/(ap+1),dp=sp===2?Math.sqrt(Math.pow(np.points[3][0]-np.points[0][0],2)+Math.pow(np.points[3][1]-np.points[0][1],2)):0,fp=np.normalAngle(cp),pp=np.point(cp);setPoint(_d,pp,fp,lp,rp,dp/((ap+1)*2),dp/((ap+1)*2)),lp=-lp}return lp}ZigZagModifier.prototype.processPath=function(_d,np,rp,ap){var sp=_d._length,lp=shapePool.newElement();if(lp.c=_d.c,_d.c||(sp-=1),sp===0)return lp;var up=-1,cp=PolynomialBezier.shapeSegment(_d,0);zigZagCorner(lp,_d,0,np,rp,ap,up);for(var dp=0;dp<sp;dp+=1)up=zigZagSegment(lp,cp,np,rp,ap,-up),dp===sp-1&&!_d.c?cp=null:cp=PolynomialBezier.shapeSegment(_d,(dp+1)%sp),zigZagCorner(lp,_d,dp+1,np,rp,ap,up);return lp},ZigZagModifier.prototype.processShapes=function(_d){var np,rp,ap=this.shapes.length,sp,lp,up=this.amplitude.v,cp=Math.max(0,Math.round(this.frequency.v)),dp=this.pointsType.v;if(up!==0){var fp,pp;for(rp=0;rp<ap;rp+=1){if(fp=this.shapes[rp],pp=fp.localShapeCollection,!(!fp.shape._mdf&&!this._mdf&&!_d))for(pp.releaseShapes(),fp.shape._mdf=!0,np=fp.shape.paths.shapes,lp=fp.shape.paths._length,sp=0;sp<lp;sp+=1)pp.addShape(this.processPath(np[sp],up,cp,dp));fp.shape.paths=fp.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function linearOffset(_d,np,rp){var ap=Math.atan2(np[0]-_d[0],np[1]-_d[1]);return[polarOffset(_d,ap,rp),polarOffset(np,ap,rp)]}function offsetSegment(_d,np){var rp,ap,sp,lp,up,cp,dp;dp=linearOffset(_d.points[0],_d.points[1],np),rp=dp[0],ap=dp[1],dp=linearOffset(_d.points[1],_d.points[2],np),sp=dp[0],lp=dp[1],dp=linearOffset(_d.points[2],_d.points[3],np),up=dp[0],cp=dp[1];var fp=lineIntersection(rp,ap,sp,lp);fp===null&&(fp=ap);var pp=lineIntersection(up,cp,sp,lp);return pp===null&&(pp=up),new PolynomialBezier(rp,fp,pp,cp)}function joinLines(_d,np,rp,ap,sp){var lp=np.points[3],up=rp.points[0];if(ap===3||pointEqual(lp,up))return lp;if(ap===2){var cp=-np.tangentAngle(1),dp=-rp.tangentAngle(0)+Math.PI,fp=lineIntersection(lp,polarOffset(lp,cp+Math.PI/2,100),up,polarOffset(up,cp+Math.PI/2,100)),pp=fp?pointDistance(fp,lp):pointDistance(lp,up)/2,hp=polarOffset(lp,cp,2*pp*roundCorner);return _d.setXYAt(hp[0],hp[1],"o",_d.length()-1),hp=polarOffset(up,dp,2*pp*roundCorner),_d.setTripleAt(up[0],up[1],up[0],up[1],hp[0],hp[1],_d.length()),up}var mp=pointEqual(lp,np.points[2])?np.points[0]:np.points[2],gp=pointEqual(up,rp.points[1])?rp.points[3]:rp.points[1],vp=lineIntersection(mp,lp,up,gp);return vp&&pointDistance(vp,lp)<sp?(_d.setTripleAt(vp[0],vp[1],vp[0],vp[1],vp[0],vp[1],_d.length()),vp):lp}function getIntersection(_d,np){var rp=_d.intersections(np);return rp.length&&floatEqual(rp[0][0],1)&&rp.shift(),rp.length?rp[0]:null}function pruneSegmentIntersection(_d,np){var rp=_d.slice(),ap=np.slice(),sp=getIntersection(_d[_d.length-1],np[0]);return sp&&(rp[_d.length-1]=_d[_d.length-1].split(sp[0])[0],ap[0]=np[0].split(sp[1])[1]),_d.length>1&&np.length>1&&(sp=getIntersection(_d[0],np[np.length-1]),sp)?[[_d[0].split(sp[0])[0]],[np[np.length-1].split(sp[1])[1]]]:[rp,ap]}function pruneIntersections(_d){for(var np,rp=1;rp<_d.length;rp+=1)np=pruneSegmentIntersection(_d[rp-1],_d[rp]),_d[rp-1]=np[0],_d[rp]=np[1];return _d.length>1&&(np=pruneSegmentIntersection(_d[_d.length-1],_d[0]),_d[_d.length-1]=np[0],_d[0]=np[1]),_d}function offsetSegmentSplit(_d,np){var rp=_d.inflectionPoints(),ap,sp,lp,up;if(rp.length===0)return[offsetSegment(_d,np)];if(rp.length===1||floatEqual(rp[1],1))return lp=_d.split(rp[0]),ap=lp[0],sp=lp[1],[offsetSegment(ap,np),offsetSegment(sp,np)];lp=_d.split(rp[0]),ap=lp[0];var cp=(rp[1]-rp[0])/(1-rp[0]);return lp=lp[1].split(cp),up=lp[0],sp=lp[1],[offsetSegment(ap,np),offsetSegment(up,np),offsetSegment(sp,np)]}function OffsetPathModifier(){}extendPrototype([ShapeModifier],OffsetPathModifier),OffsetPathModifier.prototype.initModifierProperties=function(_d,np){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(_d,np.a,0,null,this),this.miterLimit=PropertyFactory.getProp(_d,np.ml,0,null,this),this.lineJoin=np.lj,this._isAnimated=this.amount.effectsSequence.length!==0},OffsetPathModifier.prototype.processPath=function(_d,np,rp,ap){var sp=shapePool.newElement();sp.c=_d.c;var lp=_d.length();_d.c||(lp-=1);var up,cp,dp,fp=[];for(up=0;up<lp;up+=1)dp=PolynomialBezier.shapeSegment(_d,up),fp.push(offsetSegmentSplit(dp,np));if(!_d.c)for(up=lp-1;up>=0;up-=1)dp=PolynomialBezier.shapeSegmentInverted(_d,up),fp.push(offsetSegmentSplit(dp,np));fp=pruneIntersections(fp);var pp=null,hp=null;for(up=0;up<fp.length;up+=1){var mp=fp[up];for(hp&&(pp=joinLines(sp,hp,mp[0],rp,ap)),hp=mp[mp.length-1],cp=0;cp<mp.length;cp+=1)dp=mp[cp],pp&&pointEqual(dp.points[0],pp)?sp.setXYAt(dp.points[1][0],dp.points[1][1],"o",sp.length()-1):sp.setTripleAt(dp.points[0][0],dp.points[0][1],dp.points[1][0],dp.points[1][1],dp.points[0][0],dp.points[0][1],sp.length()),sp.setTripleAt(dp.points[3][0],dp.points[3][1],dp.points[3][0],dp.points[3][1],dp.points[2][0],dp.points[2][1],sp.length()),pp=dp.points[3]}return fp.length&&joinLines(sp,hp,fp[0][0],rp,ap),sp},OffsetPathModifier.prototype.processShapes=function(_d){var np,rp,ap=this.shapes.length,sp,lp,up=this.amount.v,cp=this.miterLimit.v,dp=this.lineJoin;if(up!==0){var fp,pp;for(rp=0;rp<ap;rp+=1){if(fp=this.shapes[rp],pp=fp.localShapeCollection,!(!fp.shape._mdf&&!this._mdf&&!_d))for(pp.releaseShapes(),fp.shape._mdf=!0,np=fp.shape.paths.shapes,lp=fp.shape.paths._length,sp=0;sp<lp;sp+=1)pp.addShape(this.processPath(np[sp],up,dp,cp));fp.shape.paths=fp.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function getFontProperties(_d){for(var np=_d.fStyle?_d.fStyle.split(" "):[],rp="normal",ap="normal",sp=np.length,lp,up=0;up<sp;up+=1)switch(lp=np[up].toLowerCase(),lp){case"italic":ap="italic";break;case"bold":rp="700";break;case"black":rp="900";break;case"medium":rp="500";break;case"regular":case"normal":rp="400";break;case"light":case"thin":rp="200";break}return{style:ap,weight:_d.fWeight||rp}}var FontManager=function(){var _d=5e3,np={w:0,size:0,shapes:[],data:{shapes:[]}},rp=[];rp=rp.concat([2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403]);var ap=127988,sp=917631,lp=917601,up=917626,cp=65039,dp=8205,fp=127462,pp=127487,hp=["d83cdffb","d83cdffc","d83cdffd","d83cdffe","d83cdfff"];function mp(Ip){var kp=Ip.split(","),Tp,Np=kp.length,Lp=[];for(Tp=0;Tp<Np;Tp+=1)kp[Tp]!=="sans-serif"&&kp[Tp]!=="monospace"&&Lp.push(kp[Tp]);return Lp.join(",")}function gp(Ip,kp){var Tp=createTag("span");Tp.setAttribute("aria-hidden",!0),Tp.style.fontFamily=kp;var Np=createTag("span");Np.innerText="giItT1WQy@!-/#",Tp.style.position="absolute",Tp.style.left="-10000px",Tp.style.top="-10000px",Tp.style.fontSize="300px",Tp.style.fontVariant="normal",Tp.style.fontStyle="normal",Tp.style.fontWeight="normal",Tp.style.letterSpacing="0",Tp.appendChild(Np),document.body.appendChild(Tp);var Lp=Np.offsetWidth;return Np.style.fontFamily=mp(Ip)+", "+kp,{node:Np,w:Lp,parent:Tp}}function vp(){var Ip,kp=this.fonts.length,Tp,Np,Lp=kp;for(Ip=0;Ip<kp;Ip+=1)this.fonts[Ip].loaded?Lp-=1:this.fonts[Ip].fOrigin==="n"||this.fonts[Ip].origin===0?this.fonts[Ip].loaded=!0:(Tp=this.fonts[Ip].monoCase.node,Np=this.fonts[Ip].monoCase.w,Tp.offsetWidth!==Np?(Lp-=1,this.fonts[Ip].loaded=!0):(Tp=this.fonts[Ip].sansCase.node,Np=this.fonts[Ip].sansCase.w,Tp.offsetWidth!==Np&&(Lp-=1,this.fonts[Ip].loaded=!0)),this.fonts[Ip].loaded&&(this.fonts[Ip].sansCase.parent.parentNode.removeChild(this.fonts[Ip].sansCase.parent),this.fonts[Ip].monoCase.parent.parentNode.removeChild(this.fonts[Ip].monoCase.parent)));Lp!==0&&Date.now()-this.initTime<_d?setTimeout(this.checkLoadedFontsBinded,20):setTimeout(this.setIsLoadedBinded,10)}function xp(Ip,kp){var Tp=document.body&&kp?"svg":"canvas",Np,Lp=getFontProperties(Ip);if(Tp==="svg"){var Vp=createNS("text");Vp.style.fontSize="100px",Vp.setAttribute("font-family",Ip.fFamily),Vp.setAttribute("font-style",Lp.style),Vp.setAttribute("font-weight",Lp.weight),Vp.textContent="1",Ip.fClass?(Vp.style.fontFamily="inherit",Vp.setAttribute("class",Ip.fClass)):Vp.style.fontFamily=Ip.fFamily,kp.appendChild(Vp),Np=Vp}else{var zp=new OffscreenCanvas(500,500).getContext("2d");zp.font=Lp.style+" "+Lp.weight+" 100px "+Ip.fFamily,Np=zp}function Wp(Up){return Tp==="svg"?(Np.textContent=Up,Np.getComputedTextLength()):Np.measureText(Up).width}return{measureText:Wp}}function Sp(Ip,kp){if(!Ip){this.isLoaded=!0;return}if(this.chars){this.isLoaded=!0,this.fonts=Ip.list;return}if(!document.body){this.isLoaded=!0,Ip.list.forEach(function(Xp){Xp.helper=xp(Xp),Xp.cache={}}),this.fonts=Ip.list;return}var Tp=Ip.list,Np,Lp=Tp.length,Vp=Lp;for(Np=0;Np<Lp;Np+=1){var zp=!0,Wp,Up;if(Tp[Np].loaded=!1,Tp[Np].monoCase=gp(Tp[Np].fFamily,"monospace"),Tp[Np].sansCase=gp(Tp[Np].fFamily,"sans-serif"),!Tp[Np].fPath)Tp[Np].loaded=!0,Vp-=1;else if(Tp[Np].fOrigin==="p"||Tp[Np].origin===3){if(Wp=document.querySelectorAll('style[f-forigin="p"][f-family="'+Tp[Np].fFamily+'"], style[f-origin="3"][f-family="'+Tp[Np].fFamily+'"]'),Wp.length>0&&(zp=!1),zp){var qp=createTag("style");qp.setAttribute("f-forigin",Tp[Np].fOrigin),qp.setAttribute("f-origin",Tp[Np].origin),qp.setAttribute("f-family",Tp[Np].fFamily),qp.type="text/css",qp.innerText="@font-face {font-family: "+Tp[Np].fFamily+"; font-style: normal; src: url('"+Tp[Np].fPath+"');}",kp.appendChild(qp)}}else if(Tp[Np].fOrigin==="g"||Tp[Np].origin===1){for(Wp=document.querySelectorAll('link[f-forigin="g"], link[f-origin="1"]'),Up=0;Up<Wp.length;Up+=1)Wp[Up].href.indexOf(Tp[Np].fPath)!==-1&&(zp=!1);if(zp){var Bp=createTag("link");Bp.setAttribute("f-forigin",Tp[Np].fOrigin),Bp.setAttribute("f-origin",Tp[Np].origin),Bp.type="text/css",Bp.rel="stylesheet",Bp.href=Tp[Np].fPath,document.body.appendChild(Bp)}}else if(Tp[Np].fOrigin==="t"||Tp[Np].origin===2){for(Wp=document.querySelectorAll('script[f-forigin="t"], script[f-origin="2"]'),Up=0;Up<Wp.length;Up+=1)Tp[Np].fPath===Wp[Up].src&&(zp=!1);if(zp){var Yp=createTag("link");Yp.setAttribute("f-forigin",Tp[Np].fOrigin),Yp.setAttribute("f-origin",Tp[Np].origin),Yp.setAttribute("rel","stylesheet"),Yp.setAttribute("href",Tp[Np].fPath),kp.appendChild(Yp)}}Tp[Np].helper=xp(Tp[Np],kp),Tp[Np].cache={},this.fonts.push(Tp[Np])}Vp===0?this.isLoaded=!0:setTimeout(this.checkLoadedFonts.bind(this),100)}function yp(Ip){if(Ip){this.chars||(this.chars=[]);var kp,Tp=Ip.length,Np,Lp=this.chars.length,Vp;for(kp=0;kp<Tp;kp+=1){for(Np=0,Vp=!1;Np<Lp;)this.chars[Np].style===Ip[kp].style&&this.chars[Np].fFamily===Ip[kp].fFamily&&this.chars[Np].ch===Ip[kp].ch&&(Vp=!0),Np+=1;Vp||(this.chars.push(Ip[kp]),Lp+=1)}}}function bp(Ip,kp,Tp){for(var Np=0,Lp=this.chars.length;Np<Lp;){if(this.chars[Np].ch===Ip&&this.chars[Np].style===kp&&this.chars[Np].fFamily===Tp)return this.chars[Np];Np+=1}return(typeof Ip=="string"&&Ip.charCodeAt(0)!==13||!Ip)&&console&&console.warn&&!this._warned&&(this._warned=!0,console.warn("Missing character from exported characters list: ",Ip,kp,Tp)),np}function Ep(Ip,kp,Tp){var Np=this.getFontByName(kp),Lp=Ip;if(!Np.cache[Lp]){var Vp=Np.helper;if(Ip===" "){var zp=Vp.measureText("|"+Ip+"|"),Wp=Vp.measureText("||");Np.cache[Lp]=(zp-Wp)/100}else Np.cache[Lp]=Vp.measureText(Ip)/100}return Np.cache[Lp]*Tp}function wp(Ip){for(var kp=0,Tp=this.fonts.length;kp<Tp;){if(this.fonts[kp].fName===Ip)return this.fonts[kp];kp+=1}return this.fonts[0]}function _p(Ip){var kp=0,Tp=Ip.charCodeAt(0);if(Tp>=55296&&Tp<=56319){var Np=Ip.charCodeAt(1);Np>=56320&&Np<=57343&&(kp=(Tp-55296)*1024+Np-56320+65536)}return kp}function Cp(Ip,kp){var Tp=Ip.toString(16)+kp.toString(16);return hp.indexOf(Tp)!==-1}function $p(Ip){return Ip===dp}function Rp(Ip){return Ip===cp}function Pp(Ip){var kp=_p(Ip);return kp>=fp&&kp<=pp}function Op(Ip){return Pp(Ip.substr(0,2))&&Pp(Ip.substr(2,2))}function jp(Ip){return rp.indexOf(Ip)!==-1}function Mp(Ip,kp){var Tp=_p(Ip.substr(kp,2));if(Tp!==ap)return!1;var Np=0;for(kp+=2;Np<5;){if(Tp=_p(Ip.substr(kp,2)),Tp<lp||Tp>up)return!1;Np+=1,kp+=2}return _p(Ip.substr(kp,2))===sp}function Ap(){this.isLoaded=!0}var Dp=function(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.isLoaded=!1,this._warned=!1,this.initTime=Date.now(),this.setIsLoadedBinded=this.setIsLoaded.bind(this),this.checkLoadedFontsBinded=this.checkLoadedFonts.bind(this)};Dp.isModifier=Cp,Dp.isZeroWidthJoiner=$p,Dp.isFlagEmoji=Op,Dp.isRegionalCode=Pp,Dp.isCombinedCharacter=jp,Dp.isRegionalFlag=Mp,Dp.isVariationSelector=Rp,Dp.BLACK_FLAG_CODE_POINT=ap;var Fp={addChars:yp,addFonts:Sp,getCharData:bp,getFontByName:wp,measureText:Ep,checkLoadedFonts:vp,setIsLoaded:Ap};return Dp.prototype=Fp,Dp}();function SlotManager(_d){this.animationData=_d}SlotManager.prototype.getProp=function(_d){return this.animationData.slots&&this.animationData.slots[_d.sid]?Object.assign(_d,this.animationData.slots[_d.sid].p):_d};function slotFactory(_d){return new SlotManager(_d)}function RenderableElement(){}RenderableElement.prototype={initRenderable:function(){this.isInRange=!1,this.hidden=!1,this.isTransparent=!1,this.renderableComponents=[]},addRenderableComponent:function(np){this.renderableComponents.indexOf(np)===-1&&this.renderableComponents.push(np)},removeRenderableComponent:function(np){this.renderableComponents.indexOf(np)!==-1&&this.renderableComponents.splice(this.renderableComponents.indexOf(np),1)},prepareRenderableFrame:function(np){this.checkLayerLimits(np)},checkTransparency:function(){this.finalTransform.mProp.o.v<=0?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.isTransparent&&(this.isTransparent=!1,this.show())},checkLayerLimits:function(np){this.data.ip-this.data.st<=np&&this.data.op-this.data.st>np?this.isInRange!==!0&&(this.globalData._mdf=!0,this._mdf=!0,this.isInRange=!0,this.show()):this.isInRange!==!1&&(this.globalData._mdf=!0,this.isInRange=!1,this.hide())},renderRenderable:function(){var np,rp=this.renderableComponents.length;for(np=0;np<rp;np+=1)this.renderableComponents[np].renderFrame(this._isFirstFrame)},sourceRectAtTime:function(){return{top:0,left:0,width:100,height:100}},getLayerSize:function(){return this.data.ty===5?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}}};var getBlendMode=function(){var _d={0:"source-over",1:"multiply",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity"};return function(np){return _d[np]||""}}();function SliderEffect(_d,np,rp){this.p=PropertyFactory.getProp(np,_d.v,0,0,rp)}function AngleEffect(_d,np,rp){this.p=PropertyFactory.getProp(np,_d.v,0,0,rp)}function ColorEffect(_d,np,rp){this.p=PropertyFactory.getProp(np,_d.v,1,0,rp)}function PointEffect(_d,np,rp){this.p=PropertyFactory.getProp(np,_d.v,1,0,rp)}function LayerIndexEffect(_d,np,rp){this.p=PropertyFactory.getProp(np,_d.v,0,0,rp)}function MaskIndexEffect(_d,np,rp){this.p=PropertyFactory.getProp(np,_d.v,0,0,rp)}function CheckboxEffect(_d,np,rp){this.p=PropertyFactory.getProp(np,_d.v,0,0,rp)}function NoValueEffect(){this.p={}}function EffectsManager(_d,np){var rp=_d.ef||[];this.effectElements=[];var ap,sp=rp.length,lp;for(ap=0;ap<sp;ap+=1)lp=new GroupEffect(rp[ap],np),this.effectElements.push(lp)}function GroupEffect(_d,np){this.init(_d,np)}extendPrototype([DynamicPropertyContainer],GroupEffect),GroupEffect.prototype.getValue=GroupEffect.prototype.iterateDynamicProperties,GroupEffect.prototype.init=function(_d,np){this.data=_d,this.effectElements=[],this.initDynamicPropertyContainer(np);var rp,ap=this.data.ef.length,sp,lp=this.data.ef;for(rp=0;rp<ap;rp+=1){switch(sp=null,lp[rp].ty){case 0:sp=new SliderEffect(lp[rp],np,this);break;case 1:sp=new AngleEffect(lp[rp],np,this);break;case 2:sp=new ColorEffect(lp[rp],np,this);break;case 3:sp=new PointEffect(lp[rp],np,this);break;case 4:case 7:sp=new CheckboxEffect(lp[rp],np,this);break;case 10:sp=new LayerIndexEffect(lp[rp],np,this);break;case 11:sp=new MaskIndexEffect(lp[rp],np,this);break;case 5:sp=new EffectsManager(lp[rp],np);break;default:sp=new NoValueEffect(lp[rp]);break}sp&&this.effectElements.push(sp)}};function BaseElement(){}BaseElement.prototype={checkMasks:function(){if(!this.data.hasMask)return!1;for(var np=0,rp=this.data.masksProperties.length;np<rp;){if(this.data.masksProperties[np].mode!=="n"&&this.data.masksProperties[np].cl!==!1)return!0;np+=1}return!1},initExpressions:function(){var np=getExpressionInterfaces();if(np){var rp=np("layer"),ap=np("effects"),sp=np("shape"),lp=np("text"),up=np("comp");this.layerInterface=rp(this),this.data.hasMask&&this.maskManager&&this.layerInterface.registerMaskInterface(this.maskManager);var cp=ap.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(cp),this.data.ty===0||this.data.xt?this.compInterface=up(this):this.data.ty===4?(this.layerInterface.shapeInterface=sp(this.shapesData,this.itemsData,this.layerInterface),this.layerInterface.content=this.layerInterface.shapeInterface):this.data.ty===5&&(this.layerInterface.textInterface=lp(this),this.layerInterface.text=this.layerInterface.textInterface)}},setBlendMode:function(){var np=getBlendMode(this.data.bm),rp=this.baseElement||this.layerElement;rp.style["mix-blend-mode"]=np},initBaseData:function(np,rp,ap){this.globalData=rp,this.comp=ap,this.data=np,this.layerId=createElementID(),this.data.sr||(this.data.sr=1),this.effectsManager=new EffectsManager(this.data,this,this.dynamicProperties)},getType:function(){return this.type},sourceRectAtTime:function(){}};function FrameElement(){}FrameElement.prototype={initFrame:function(){this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1},prepareProperties:function(np,rp){var ap,sp=this.dynamicProperties.length;for(ap=0;ap<sp;ap+=1)(rp||this._isParent&&this.dynamicProperties[ap].propType==="transform")&&(this.dynamicProperties[ap].getValue(),this.dynamicProperties[ap]._mdf&&(this.globalData._mdf=!0,this._mdf=!0))},addDynamicProperty:function(np){this.dynamicProperties.indexOf(np)===-1&&this.dynamicProperties.push(np)}};function FootageElement(_d,np,rp){this.initFrame(),this.initRenderable(),this.assetData=np.getAssetData(_d.refId),this.footageData=np.imageLoader.getAsset(this.assetData),this.initBaseData(_d,np,rp)}FootageElement.prototype.prepareFrame=function(){},extendPrototype([RenderableElement,BaseElement,FrameElement],FootageElement),FootageElement.prototype.getBaseElement=function(){return null},FootageElement.prototype.renderFrame=function(){},FootageElement.prototype.destroy=function(){},FootageElement.prototype.initExpressions=function(){var _d=getExpressionInterfaces();if(_d){var np=_d("footage");this.layerInterface=np(this)}},FootageElement.prototype.getFootageData=function(){return this.footageData};function AudioElement(_d,np,rp){this.initFrame(),this.initRenderable(),this.assetData=np.getAssetData(_d.refId),this.initBaseData(_d,np,rp),this._isPlaying=!1,this._canPlay=!1;var ap=this.globalData.getAssetsPath(this.assetData);this.audio=this.globalData.audioController.createAudio(ap),this._currentTime=0,this.globalData.audioController.addAudio(this),this._volumeMultiplier=1,this._volume=1,this._previousVolume=null,this.tm=_d.tm?PropertyFactory.getProp(this,_d.tm,0,np.frameRate,this):{_placeholder:!0},this.lv=PropertyFactory.getProp(this,_d.au&&_d.au.lv?_d.au.lv:{k:[100]},1,.01,this)}AudioElement.prototype.prepareFrame=function(_d){if(this.prepareRenderableFrame(_d,!0),this.prepareProperties(_d,!0),this.tm._placeholder)this._currentTime=_d/this.data.sr;else{var np=this.tm.v;this._currentTime=np}this._volume=this.lv.v[0];var rp=this._volume*this._volumeMultiplier;this._previousVolume!==rp&&(this._previousVolume=rp,this.audio.volume(rp))},extendPrototype([RenderableElement,BaseElement,FrameElement],AudioElement),AudioElement.prototype.renderFrame=function(){this.isInRange&&this._canPlay&&(this._isPlaying?(!this.audio.playing()||Math.abs(this._currentTime/this.globalData.frameRate-this.audio.seek())>.1)&&this.audio.seek(this._currentTime/this.globalData.frameRate):(this.audio.play(),this.audio.seek(this._currentTime/this.globalData.frameRate),this._isPlaying=!0))},AudioElement.prototype.show=function(){},AudioElement.prototype.hide=function(){this.audio.pause(),this._isPlaying=!1},AudioElement.prototype.pause=function(){this.audio.pause(),this._isPlaying=!1,this._canPlay=!1},AudioElement.prototype.resume=function(){this._canPlay=!0},AudioElement.prototype.setRate=function(_d){this.audio.rate(_d)},AudioElement.prototype.volume=function(_d){this._volumeMultiplier=_d,this._previousVolume=_d*this._volume,this.audio.volume(this._previousVolume)},AudioElement.prototype.getBaseElement=function(){return null},AudioElement.prototype.destroy=function(){},AudioElement.prototype.sourceRectAtTime=function(){},AudioElement.prototype.initExpressions=function(){};function BaseRenderer(){}BaseRenderer.prototype.checkLayers=function(_d){var np,rp=this.layers.length,ap;for(this.completeLayers=!0,np=rp-1;np>=0;np-=1)this.elements[np]||(ap=this.layers[np],ap.ip-ap.st<=_d-this.layers[np].st&&ap.op-ap.st>_d-this.layers[np].st&&this.buildItem(np)),this.completeLayers=this.elements[np]?this.completeLayers:!1;this.checkPendingElements()},BaseRenderer.prototype.createItem=function(_d){switch(_d.ty){case 2:return this.createImage(_d);case 0:return this.createComp(_d);case 1:return this.createSolid(_d);case 3:return this.createNull(_d);case 4:return this.createShape(_d);case 5:return this.createText(_d);case 6:return this.createAudio(_d);case 13:return this.createCamera(_d);case 15:return this.createFootage(_d);default:return this.createNull(_d)}},BaseRenderer.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")},BaseRenderer.prototype.createAudio=function(_d){return new AudioElement(_d,this.globalData,this)},BaseRenderer.prototype.createFootage=function(_d){return new FootageElement(_d,this.globalData,this)},BaseRenderer.prototype.buildAllItems=function(){var _d,np=this.layers.length;for(_d=0;_d<np;_d+=1)this.buildItem(_d);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function(_d){this.completeLayers=!1;var np,rp=_d.length,ap,sp=this.layers.length;for(np=0;np<rp;np+=1)for(ap=0;ap<sp;){if(this.layers[ap].id===_d[np].id){this.layers[ap]=_d[np];break}ap+=1}},BaseRenderer.prototype.setProjectInterface=function(_d){this.globalData.projectInterface=_d},BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function(_d,np,rp){for(var ap=this.elements,sp=this.layers,lp=0,up=sp.length;lp<up;)sp[lp].ind==np&&(!ap[lp]||ap[lp]===!0?(this.buildItem(lp),this.addPendingElement(_d)):(rp.push(ap[lp]),ap[lp].setAsParent(),sp[lp].parent!==void 0?this.buildElementParenting(_d,sp[lp].parent,rp):_d.setHierarchy(rp))),lp+=1},BaseRenderer.prototype.addPendingElement=function(_d){this.pendingElements.push(_d)},BaseRenderer.prototype.searchExtraCompositions=function(_d){var np,rp=_d.length;for(np=0;np<rp;np+=1)if(_d[np].xt){var ap=this.createComp(_d[np]);ap.initExpressions(),this.globalData.projectInterface.registerComposition(ap)}},BaseRenderer.prototype.getElementById=function(_d){var np,rp=this.elements.length;for(np=0;np<rp;np+=1)if(this.elements[np].data.ind===_d)return this.elements[np];return null},BaseRenderer.prototype.getElementByPath=function(_d){var np=_d.shift(),rp;if(typeof np=="number")rp=this.elements[np];else{var ap,sp=this.elements.length;for(ap=0;ap<sp;ap+=1)if(this.elements[ap].data.nm===np){rp=this.elements[ap];break}}return _d.length===0?rp:rp.getElementByPath(_d)},BaseRenderer.prototype.setupGlobalData=function(_d,np){this.globalData.fontManager=new FontManager,this.globalData.slotManager=slotFactory(_d),this.globalData.fontManager.addChars(_d.chars),this.globalData.fontManager.addFonts(_d.fonts,np),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.imageLoader=this.animationItem.imagePreloader,this.globalData.audioController=this.animationItem.audioController,this.globalData.frameId=0,this.globalData.frameRate=_d.fr,this.globalData.nm=_d.nm,this.globalData.compSize={w:_d.w,h:_d.h}};var effectTypes={TRANSFORM_EFFECT:"transformEFfect"};function TransformElement(){}TransformElement.prototype={initTransform:function(){var np=new Matrix;this.finalTransform={mProp:this.data.ks?TransformPropertyFactory.getTransformProperty(this,this.data.ks,this):{o:0},_matMdf:!1,_localMatMdf:!1,_opMdf:!1,mat:np,localMat:np,localOpacity:1},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0),this.data.ty},renderTransform:function(){if(this.finalTransform._opMdf=this.finalTransform.mProp.o._mdf||this._isFirstFrame,this.finalTransform._matMdf=this.finalTransform.mProp._mdf||this._isFirstFrame,this.hierarchy){var np,rp=this.finalTransform.mat,ap=0,sp=this.hierarchy.length;if(!this.finalTransform._matMdf)for(;ap<sp;){if(this.hierarchy[ap].finalTransform.mProp._mdf){this.finalTransform._matMdf=!0;break}ap+=1}if(this.finalTransform._matMdf)for(np=this.finalTransform.mProp.v.props,rp.cloneFromProps(np),ap=0;ap<sp;ap+=1)rp.multiply(this.hierarchy[ap].finalTransform.mProp.v)}this.finalTransform._matMdf&&(this.finalTransform._localMatMdf=this.finalTransform._matMdf),this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v)},renderLocalTransform:function(){if(this.localTransforms){var np=0,rp=this.localTransforms.length;if(this.finalTransform._localMatMdf=this.finalTransform._matMdf,!this.finalTransform._localMatMdf||!this.finalTransform._opMdf)for(;np<rp;)this.localTransforms[np]._mdf&&(this.finalTransform._localMatMdf=!0),this.localTransforms[np]._opMdf&&!this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v,this.finalTransform._opMdf=!0),np+=1;if(this.finalTransform._localMatMdf){var ap=this.finalTransform.localMat;for(this.localTransforms[0].matrix.clone(ap),np=1;np<rp;np+=1){var sp=this.localTransforms[np].matrix;ap.multiply(sp)}ap.multiply(this.finalTransform.mat)}if(this.finalTransform._opMdf){var lp=this.finalTransform.localOpacity;for(np=0;np<rp;np+=1)lp*=this.localTransforms[np].opacity*.01;this.finalTransform.localOpacity=lp}}},searchEffectTransforms:function(){if(this.renderableEffectsManager){var np=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT);if(np.length){this.localTransforms=[],this.finalTransform.localMat=new Matrix;var rp=0,ap=np.length;for(rp=0;rp<ap;rp+=1)this.localTransforms.push(np[rp])}}},globalToLocal:function(np){var rp=[];rp.push(this.finalTransform);for(var ap=!0,sp=this.comp;ap;)sp.finalTransform?(sp.data.hasMask&&rp.splice(0,0,sp.finalTransform),sp=sp.comp):ap=!1;var lp,up=rp.length,cp;for(lp=0;lp<up;lp+=1)cp=rp[lp].mat.applyToPointArray(0,0,0),np=[np[0]-cp[0],np[1]-cp[1],0];return np},mHelper:new Matrix};function MaskElement(_d,np,rp){this.data=_d,this.element=np,this.globalData=rp,this.storedData=[],this.masksProperties=this.data.masksProperties||[],this.maskElement=null;var ap=this.globalData.defs,sp,lp=this.masksProperties?this.masksProperties.length:0;this.viewData=createSizedArray(lp),this.solidPath="";var up,cp=this.masksProperties,dp=0,fp=[],pp,hp,mp=createElementID(),gp,vp,xp,Sp,yp="clipPath",bp="clip-path";for(sp=0;sp<lp;sp+=1)if((cp[sp].mode!=="a"&&cp[sp].mode!=="n"||cp[sp].inv||cp[sp].o.k!==100||cp[sp].o.x)&&(yp="mask",bp="mask"),(cp[sp].mode==="s"||cp[sp].mode==="i")&&dp===0?(gp=createNS("rect"),gp.setAttribute("fill","#ffffff"),gp.setAttribute("width",this.element.comp.data.w||0),gp.setAttribute("height",this.element.comp.data.h||0),fp.push(gp)):gp=null,up=createNS("path"),cp[sp].mode==="n")this.viewData[sp]={op:PropertyFactory.getProp(this.element,cp[sp].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,cp[sp],3),elem:up,lastPath:""},ap.appendChild(up);else{dp+=1,up.setAttribute("fill",cp[sp].mode==="s"?"#000000":"#ffffff"),up.setAttribute("clip-rule","nonzero");var Ep;if(cp[sp].x.k!==0?(yp="mask",bp="mask",Sp=PropertyFactory.getProp(this.element,cp[sp].x,0,null,this.element),Ep=createElementID(),vp=createNS("filter"),vp.setAttribute("id",Ep),xp=createNS("feMorphology"),xp.setAttribute("operator","erode"),xp.setAttribute("in","SourceGraphic"),xp.setAttribute("radius","0"),vp.appendChild(xp),ap.appendChild(vp),up.setAttribute("stroke",cp[sp].mode==="s"?"#000000":"#ffffff")):(xp=null,Sp=null),this.storedData[sp]={elem:up,x:Sp,expan:xp,lastPath:"",lastOperator:"",filterId:Ep,lastRadius:0},cp[sp].mode==="i"){hp=fp.length;var wp=createNS("g");for(pp=0;pp<hp;pp+=1)wp.appendChild(fp[pp]);var _p=createNS("mask");_p.setAttribute("mask-type","alpha"),_p.setAttribute("id",mp+"_"+dp),_p.appendChild(up),ap.appendChild(_p),wp.setAttribute("mask","url("+getLocationHref()+"#"+mp+"_"+dp+")"),fp.length=0,fp.push(wp)}else fp.push(up);cp[sp].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[sp]={elem:up,lastPath:"",op:PropertyFactory.getProp(this.element,cp[sp].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,cp[sp],3),invRect:gp},this.viewData[sp].prop.k||this.drawPath(cp[sp],this.viewData[sp].prop.v,this.viewData[sp])}for(this.maskElement=createNS(yp),lp=fp.length,sp=0;sp<lp;sp+=1)this.maskElement.appendChild(fp[sp]);dp>0&&(this.maskElement.setAttribute("id",mp),this.element.maskedElement.setAttribute(bp,"url("+getLocationHref()+"#"+mp+")"),ap.appendChild(this.maskElement)),this.viewData.length&&this.element.addRenderableComponent(this)}MaskElement.prototype.getMaskProperty=function(_d){return this.viewData[_d].prop},MaskElement.prototype.renderFrame=function(_d){var np=this.element.finalTransform.mat,rp,ap=this.masksProperties.length;for(rp=0;rp<ap;rp+=1)if((this.viewData[rp].prop._mdf||_d)&&this.drawPath(this.masksProperties[rp],this.viewData[rp].prop.v,this.viewData[rp]),(this.viewData[rp].op._mdf||_d)&&this.viewData[rp].elem.setAttribute("fill-opacity",this.viewData[rp].op.v),this.masksProperties[rp].mode!=="n"&&(this.viewData[rp].invRect&&(this.element.finalTransform.mProp._mdf||_d)&&this.viewData[rp].invRect.setAttribute("transform",np.getInverseMatrix().to2dCSS()),this.storedData[rp].x&&(this.storedData[rp].x._mdf||_d))){var sp=this.storedData[rp].expan;this.storedData[rp].x.v<0?(this.storedData[rp].lastOperator!=="erode"&&(this.storedData[rp].lastOperator="erode",this.storedData[rp].elem.setAttribute("filter","url("+getLocationHref()+"#"+this.storedData[rp].filterId+")")),sp.setAttribute("radius",-this.storedData[rp].x.v)):(this.storedData[rp].lastOperator!=="dilate"&&(this.storedData[rp].lastOperator="dilate",this.storedData[rp].elem.setAttribute("filter",null)),this.storedData[rp].elem.setAttribute("stroke-width",this.storedData[rp].x.v*2))}},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){var _d="M0,0 ";return _d+=" h"+this.globalData.compSize.w,_d+=" v"+this.globalData.compSize.h,_d+=" h-"+this.globalData.compSize.w,_d+=" v-"+this.globalData.compSize.h+" ",_d},MaskElement.prototype.drawPath=function(_d,np,rp){var ap=" M"+np.v[0][0]+","+np.v[0][1],sp,lp;for(lp=np._length,sp=1;sp<lp;sp+=1)ap+=" C"+np.o[sp-1][0]+","+np.o[sp-1][1]+" "+np.i[sp][0]+","+np.i[sp][1]+" "+np.v[sp][0]+","+np.v[sp][1];if(np.c&&lp>1&&(ap+=" C"+np.o[sp-1][0]+","+np.o[sp-1][1]+" "+np.i[0][0]+","+np.i[0][1]+" "+np.v[0][0]+","+np.v[0][1]),rp.lastPath!==ap){var up="";rp.elem&&(np.c&&(up=_d.inv?this.solidPath+ap:ap),rp.elem.setAttribute("d",up)),rp.lastPath=ap}},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null};var filtersFactory=function(){var _d={};_d.createFilter=np,_d.createAlphaToLuminanceFilter=rp;function np(ap,sp){var lp=createNS("filter");return lp.setAttribute("id",ap),sp!==!0&&(lp.setAttribute("filterUnits","objectBoundingBox"),lp.setAttribute("x","0%"),lp.setAttribute("y","0%"),lp.setAttribute("width","100%"),lp.setAttribute("height","100%")),lp}function rp(){var ap=createNS("feColorMatrix");return ap.setAttribute("type","matrix"),ap.setAttribute("color-interpolation-filters","sRGB"),ap.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),ap}return _d}(),featureSupport=function(){var _d={maskType:!0,svgLumaHidden:!0,offscreenCanvas:typeof OffscreenCanvas<"u"};return(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(_d.maskType=!1),/firefox/i.test(navigator.userAgent)&&(_d.svgLumaHidden=!1),_d}(),registeredEffects$1={},idPrefix="filter_result_";function SVGEffects(_d){var np,rp="SourceGraphic",ap=_d.data.ef?_d.data.ef.length:0,sp=createElementID(),lp=filtersFactory.createFilter(sp,!0),up=0;this.filters=[];var cp;for(np=0;np<ap;np+=1){cp=null;var dp=_d.data.ef[np].ty;if(registeredEffects$1[dp]){var fp=registeredEffects$1[dp].effect;cp=new fp(lp,_d.effectsManager.effectElements[np],_d,idPrefix+up,rp),rp=idPrefix+up,registeredEffects$1[dp].countsAsEffect&&(up+=1)}cp&&this.filters.push(cp)}up&&(_d.globalData.defs.appendChild(lp),_d.layerElement.setAttribute("filter","url("+getLocationHref()+"#"+sp+")")),this.filters.length&&_d.addRenderableComponent(this)}SVGEffects.prototype.renderFrame=function(_d){var np,rp=this.filters.length;for(np=0;np<rp;np+=1)this.filters[np].renderFrame(_d)},SVGEffects.prototype.getEffects=function(_d){var np,rp=this.filters.length,ap=[];for(np=0;np<rp;np+=1)this.filters[np].type===_d&&ap.push(this.filters[np]);return ap};function registerEffect$1(_d,np,rp){registeredEffects$1[_d]={effect:np,countsAsEffect:rp}}function SVGBaseElement(){}SVGBaseElement.prototype={initRendererElement:function(){this.layerElement=createNS("g")},createContainerElements:function(){this.matteElement=createNS("g"),this.transformedElement=this.layerElement,this.maskedElement=this.layerElement,this._sizeChanged=!1;var np=null;if(this.data.td){this.matteMasks={};var rp=createNS("g");rp.setAttribute("id",this.layerId),rp.appendChild(this.layerElement),np=rp,this.globalData.defs.appendChild(rp)}else this.data.tt?(this.matteElement.appendChild(this.layerElement),np=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement;if(this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.ty===0&&!this.data.hd){var ap=createNS("clipPath"),sp=createNS("path");sp.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var lp=createElementID();if(ap.setAttribute("id",lp),ap.appendChild(sp),this.globalData.defs.appendChild(ap),this.checkMasks()){var up=createNS("g");up.setAttribute("clip-path","url("+getLocationHref()+"#"+lp+")"),up.appendChild(this.layerElement),this.transformedElement=up,np?np.appendChild(this.transformedElement):this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+lp+")")}this.data.bm!==0&&this.setBlendMode()},renderElement:function(){this.finalTransform._localMatMdf&&this.transformedElement.setAttribute("transform",this.finalTransform.localMat.to2dCSS()),this.finalTransform._opMdf&&this.transformedElement.setAttribute("opacity",this.finalTransform.localOpacity)},destroyBaseElement:function(){this.layerElement=null,this.matteElement=null,this.maskManager.destroy()},getBaseElement:function(){return this.data.hd?null:this.baseElement},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData),this.renderableEffectsManager=new SVGEffects(this),this.searchEffectTransforms()},getMatte:function(np){if(this.matteMasks||(this.matteMasks={}),!this.matteMasks[np]){var rp=this.layerId+"_"+np,ap,sp,lp,up;if(np===1||np===3){var cp=createNS("mask");cp.setAttribute("id",rp),cp.setAttribute("mask-type",np===3?"luminance":"alpha"),lp=createNS("use"),lp.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),cp.appendChild(lp),this.globalData.defs.appendChild(cp),!featureSupport.maskType&&np===1&&(cp.setAttribute("mask-type","luminance"),ap=createElementID(),sp=filtersFactory.createFilter(ap),this.globalData.defs.appendChild(sp),sp.appendChild(filtersFactory.createAlphaToLuminanceFilter()),up=createNS("g"),up.appendChild(lp),cp.appendChild(up),up.setAttribute("filter","url("+getLocationHref()+"#"+ap+")"))}else if(np===2){var dp=createNS("mask");dp.setAttribute("id",rp),dp.setAttribute("mask-type","alpha");var fp=createNS("g");dp.appendChild(fp),ap=createElementID(),sp=filtersFactory.createFilter(ap);var pp=createNS("feComponentTransfer");pp.setAttribute("in","SourceGraphic"),sp.appendChild(pp);var hp=createNS("feFuncA");hp.setAttribute("type","table"),hp.setAttribute("tableValues","1.0 0.0"),pp.appendChild(hp),this.globalData.defs.appendChild(sp);var mp=createNS("rect");mp.setAttribute("width",this.comp.data.w),mp.setAttribute("height",this.comp.data.h),mp.setAttribute("x","0"),mp.setAttribute("y","0"),mp.setAttribute("fill","#ffffff"),mp.setAttribute("opacity","0"),fp.setAttribute("filter","url("+getLocationHref()+"#"+ap+")"),fp.appendChild(mp),lp=createNS("use"),lp.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),fp.appendChild(lp),featureSupport.maskType||(dp.setAttribute("mask-type","luminance"),sp.appendChild(filtersFactory.createAlphaToLuminanceFilter()),up=createNS("g"),fp.appendChild(mp),up.appendChild(this.layerElement),fp.appendChild(up)),this.globalData.defs.appendChild(dp)}this.matteMasks[np]=rp}return this.matteMasks[np]},setMatte:function(np){this.matteElement&&this.matteElement.setAttribute("mask","url("+getLocationHref()+"#"+np+")")}};function HierarchyElement(){}HierarchyElement.prototype={initHierarchy:function(){this.hierarchy=[],this._isParent=!1,this.checkParenting()},setHierarchy:function(np){this.hierarchy=np},setAsParent:function(){this._isParent=!0},checkParenting:function(){this.data.parent!==void 0&&this.comp.buildElementParenting(this,this.data.parent,[])}};function RenderableDOMElement(){}(function(){var _d={initElement:function(rp,ap,sp){this.initFrame(),this.initBaseData(rp,ap,sp),this.initTransform(rp,ap,sp),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide()},hide:function(){if(!this.hidden&&(!this.isInRange||this.isTransparent)){var rp=this.baseElement||this.layerElement;rp.style.display="none",this.hidden=!0}},show:function(){if(this.isInRange&&!this.isTransparent){if(!this.data.hd){var rp=this.baseElement||this.layerElement;rp.style.display="block"}this.hidden=!1,this._isFirstFrame=!0}},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},renderInnerContent:function(){},prepareFrame:function(rp){this._mdf=!1,this.prepareRenderableFrame(rp),this.prepareProperties(rp,this.isInRange),this.checkTransparency()},destroy:function(){this.innerElem=null,this.destroyBaseElement()}};extendPrototype([RenderableElement,createProxyFunction(_d)],RenderableDOMElement)})();function IImageElement(_d,np,rp){this.assetData=np.getAssetData(_d.refId),this.assetData&&this.assetData.sid&&(this.assetData=np.slotManager.getProp(this.assetData)),this.initElement(_d,np,rp),this.sourceRect={top:0,left:0,width:this.assetData.w,height:this.assetData.h}}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],IImageElement),IImageElement.prototype.createContent=function(){var _d=this.globalData.getAssetsPath(this.assetData);this.innerElem=createNS("image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio",this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",_d),this.layerElement.appendChild(this.innerElem)},IImageElement.prototype.sourceRectAtTime=function(){return this.sourceRect};function ProcessedElement(_d,np){this.elem=_d,this.pos=np}function IShapeElement(){}IShapeElement.prototype={addShapeToModifiers:function(np){var rp,ap=this.shapeModifiers.length;for(rp=0;rp<ap;rp+=1)this.shapeModifiers[rp].addShape(np)},isShapeInAnimatedModifiers:function(np){for(var rp=0,ap=this.shapeModifiers.length;rp<ap;)if(this.shapeModifiers[rp].isAnimatedWithShape(np))return!0;return!1},renderModifiers:function(){if(this.shapeModifiers.length){var np,rp=this.shapes.length;for(np=0;np<rp;np+=1)this.shapes[np].sh.reset();rp=this.shapeModifiers.length;var ap;for(np=rp-1;np>=0&&(ap=this.shapeModifiers[np].processShapes(this._isFirstFrame),!ap);np-=1);}},searchProcessedElement:function(np){for(var rp=this.processedElements,ap=0,sp=rp.length;ap<sp;){if(rp[ap].elem===np)return rp[ap].pos;ap+=1}return 0},addProcessedElement:function(np,rp){for(var ap=this.processedElements,sp=ap.length;sp;)if(sp-=1,ap[sp].elem===np){ap[sp].pos=rp;return}ap.push(new ProcessedElement(np,rp))},prepareFrame:function(np){this.prepareRenderableFrame(np),this.prepareProperties(np,this.isInRange)}};var lineCapEnum={1:"butt",2:"round",3:"square"},lineJoinEnum={1:"miter",2:"round",3:"bevel"};function SVGShapeData(_d,np,rp){this.caches=[],this.styles=[],this.transformers=_d,this.lStr="",this.sh=rp,this.lvl=np,this._isAnimated=!!rp.k;for(var ap=0,sp=_d.length;ap<sp;){if(_d[ap].mProps.dynamicProperties.length){this._isAnimated=!0;break}ap+=1}}SVGShapeData.prototype.setAsAnimated=function(){this._isAnimated=!0};function SVGStyleData(_d,np){this.data=_d,this.type=_d.ty,this.d="",this.lvl=np,this._mdf=!1,this.closed=_d.hd===!0,this.pElem=createNS("path"),this.msElem=null}SVGStyleData.prototype.reset=function(){this.d="",this._mdf=!1};function DashProperty(_d,np,rp,ap){this.elem=_d,this.frameId=-1,this.dataProps=createSizedArray(np.length),this.renderer=rp,this.k=!1,this.dashStr="",this.dashArray=createTypedArray("float32",np.length?np.length-1:0),this.dashoffset=createTypedArray("float32",1),this.initDynamicPropertyContainer(ap);var sp,lp=np.length||0,up;for(sp=0;sp<lp;sp+=1)up=PropertyFactory.getProp(_d,np[sp].v,0,0,this),this.k=up.k||this.k,this.dataProps[sp]={n:np[sp].n,p:up};this.k||this.getValue(!0),this._isAnimated=this.k}DashProperty.prototype.getValue=function(_d){if(!(this.elem.globalData.frameId===this.frameId&&!_d)&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf=this._mdf||_d,this._mdf)){var np=0,rp=this.dataProps.length;for(this.renderer==="svg"&&(this.dashStr=""),np=0;np<rp;np+=1)this.dataProps[np].n!=="o"?this.renderer==="svg"?this.dashStr+=" "+this.dataProps[np].p.v:this.dashArray[np]=this.dataProps[np].p.v:this.dashoffset[0]=this.dataProps[np].p.v}},extendPrototype([DynamicPropertyContainer],DashProperty);function SVGStrokeStyleData(_d,np,rp){this.initDynamicPropertyContainer(_d),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(_d,np.o,0,.01,this),this.w=PropertyFactory.getProp(_d,np.w,0,null,this),this.d=new DashProperty(_d,np.d||{},"svg",this),this.c=PropertyFactory.getProp(_d,np.c,1,255,this),this.style=rp,this._isAnimated=!!this._isAnimated}extendPrototype([DynamicPropertyContainer],SVGStrokeStyleData);function SVGFillStyleData(_d,np,rp){this.initDynamicPropertyContainer(_d),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(_d,np.o,0,.01,this),this.c=PropertyFactory.getProp(_d,np.c,1,255,this),this.style=rp}extendPrototype([DynamicPropertyContainer],SVGFillStyleData);function SVGNoStyleData(_d,np,rp){this.initDynamicPropertyContainer(_d),this.getValue=this.iterateDynamicProperties,this.style=rp}extendPrototype([DynamicPropertyContainer],SVGNoStyleData);function GradientProperty(_d,np,rp){this.data=np,this.c=createTypedArray("uint8c",np.p*4);var ap=np.k.k[0].s?np.k.k[0].s.length-np.p*4:np.k.k.length-np.p*4;this.o=createTypedArray("float32",ap),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=ap,this.initDynamicPropertyContainer(rp),this.prop=PropertyFactory.getProp(_d,np.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}GradientProperty.prototype.comparePoints=function(_d,np){for(var rp=0,ap=this.o.length/2,sp;rp<ap;){if(sp=Math.abs(_d[rp*4]-_d[np*4+rp*2]),sp>.01)return!1;rp+=1}return!0},GradientProperty.prototype.checkCollapsable=function(){if(this.o.length/2!==this.c.length/4)return!1;if(this.data.k.k[0].s)for(var _d=0,np=this.data.k.k.length;_d<np;){if(!this.comparePoints(this.data.k.k[_d].s,this.data.p))return!1;_d+=1}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0},GradientProperty.prototype.getValue=function(_d){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||_d){var np,rp=this.data.p*4,ap,sp;for(np=0;np<rp;np+=1)ap=np%4===0?100:255,sp=Math.round(this.prop.v[np]*ap),this.c[np]!==sp&&(this.c[np]=sp,this._cmdf=!_d);if(this.o.length)for(rp=this.prop.v.length,np=this.data.p*4;np<rp;np+=1)ap=np%2===0?100:1,sp=np%2===0?Math.round(this.prop.v[np]*100):this.prop.v[np],this.o[np-this.data.p*4]!==sp&&(this.o[np-this.data.p*4]=sp,this._omdf=!_d);this._mdf=!_d}},extendPrototype([DynamicPropertyContainer],GradientProperty);function SVGGradientFillStyleData(_d,np,rp){this.initDynamicPropertyContainer(_d),this.getValue=this.iterateDynamicProperties,this.initGradientData(_d,np,rp)}SVGGradientFillStyleData.prototype.initGradientData=function(_d,np,rp){this.o=PropertyFactory.getProp(_d,np.o,0,.01,this),this.s=PropertyFactory.getProp(_d,np.s,1,null,this),this.e=PropertyFactory.getProp(_d,np.e,1,null,this),this.h=PropertyFactory.getProp(_d,np.h||{k:0},0,.01,this),this.a=PropertyFactory.getProp(_d,np.a||{k:0},0,degToRads,this),this.g=new GradientProperty(_d,np.g,this),this.style=rp,this.stops=[],this.setGradientData(rp.pElem,np),this.setGradientOpacity(np,rp),this._isAnimated=!!this._isAnimated},SVGGradientFillStyleData.prototype.setGradientData=function(_d,np){var rp=createElementID(),ap=createNS(np.t===1?"linearGradient":"radialGradient");ap.setAttribute("id",rp),ap.setAttribute("spreadMethod","pad"),ap.setAttribute("gradientUnits","userSpaceOnUse");var sp=[],lp,up,cp;for(cp=np.g.p*4,up=0;up<cp;up+=4)lp=createNS("stop"),ap.appendChild(lp),sp.push(lp);_d.setAttribute(np.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+rp+")"),this.gf=ap,this.cst=sp},SVGGradientFillStyleData.prototype.setGradientOpacity=function(_d,np){if(this.g._hasOpacity&&!this.g._collapsable){var rp,ap,sp,lp=createNS("mask"),up=createNS("path");lp.appendChild(up);var cp=createElementID(),dp=createElementID();lp.setAttribute("id",dp);var fp=createNS(_d.t===1?"linearGradient":"radialGradient");fp.setAttribute("id",cp),fp.setAttribute("spreadMethod","pad"),fp.setAttribute("gradientUnits","userSpaceOnUse"),sp=_d.g.k.k[0].s?_d.g.k.k[0].s.length:_d.g.k.k.length;var pp=this.stops;for(ap=_d.g.p*4;ap<sp;ap+=2)rp=createNS("stop"),rp.setAttribute("stop-color","rgb(255,255,255)"),fp.appendChild(rp),pp.push(rp);up.setAttribute(_d.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+cp+")"),_d.ty==="gs"&&(up.setAttribute("stroke-linecap",lineCapEnum[_d.lc||2]),up.setAttribute("stroke-linejoin",lineJoinEnum[_d.lj||2]),_d.lj===1&&up.setAttribute("stroke-miterlimit",_d.ml)),this.of=fp,this.ms=lp,this.ost=pp,this.maskId=dp,np.msElem=up}},extendPrototype([DynamicPropertyContainer],SVGGradientFillStyleData);function SVGGradientStrokeStyleData(_d,np,rp){this.initDynamicPropertyContainer(_d),this.getValue=this.iterateDynamicProperties,this.w=PropertyFactory.getProp(_d,np.w,0,null,this),this.d=new DashProperty(_d,np.d||{},"svg",this),this.initGradientData(_d,np,rp),this._isAnimated=!!this._isAnimated}extendPrototype([SVGGradientFillStyleData,DynamicPropertyContainer],SVGGradientStrokeStyleData);function ShapeGroupData(){this.it=[],this.prevViewData=[],this.gr=createNS("g")}function SVGTransformData(_d,np,rp){this.transform={mProps:_d,op:np,container:rp},this.elements=[],this._isAnimated=this.transform.mProps.dynamicProperties.length||this.transform.op.effectsSequence.length}var buildShapeString=function(np,rp,ap,sp){if(rp===0)return"";var lp=np.o,up=np.i,cp=np.v,dp,fp=" M"+sp.applyToPointStringified(cp[0][0],cp[0][1]);for(dp=1;dp<rp;dp+=1)fp+=" C"+sp.applyToPointStringified(lp[dp-1][0],lp[dp-1][1])+" "+sp.applyToPointStringified(up[dp][0],up[dp][1])+" "+sp.applyToPointStringified(cp[dp][0],cp[dp][1]);return ap&&rp&&(fp+=" C"+sp.applyToPointStringified(lp[dp-1][0],lp[dp-1][1])+" "+sp.applyToPointStringified(up[0][0],up[0][1])+" "+sp.applyToPointStringified(cp[0][0],cp[0][1]),fp+="z"),fp},SVGElementsRenderer=function(){var _d=new Matrix,np=new Matrix,rp={createRenderFunction:ap};function ap(hp){switch(hp.ty){case"fl":return cp;case"gf":return fp;case"gs":return dp;case"st":return pp;case"sh":case"el":case"rc":case"sr":return up;case"tr":return sp;case"no":return lp;default:return null}}function sp(hp,mp,gp){(gp||mp.transform.op._mdf)&&mp.transform.container.setAttribute("opacity",mp.transform.op.v),(gp||mp.transform.mProps._mdf)&&mp.transform.container.setAttribute("transform",mp.transform.mProps.v.to2dCSS())}function lp(){}function up(hp,mp,gp){var vp,xp,Sp,yp,bp,Ep,wp=mp.styles.length,_p=mp.lvl,Cp,$p,Rp,Pp;for(Ep=0;Ep<wp;Ep+=1){if(yp=mp.sh._mdf||gp,mp.styles[Ep].lvl<_p){for($p=np.reset(),Rp=_p-mp.styles[Ep].lvl,Pp=mp.transformers.length-1;!yp&&Rp>0;)yp=mp.transformers[Pp].mProps._mdf||yp,Rp-=1,Pp-=1;if(yp)for(Rp=_p-mp.styles[Ep].lvl,Pp=mp.transformers.length-1;Rp>0;)$p.multiply(mp.transformers[Pp].mProps.v),Rp-=1,Pp-=1}else $p=_d;if(Cp=mp.sh.paths,xp=Cp._length,yp){for(Sp="",vp=0;vp<xp;vp+=1)bp=Cp.shapes[vp],bp&&bp._length&&(Sp+=buildShapeString(bp,bp._length,bp.c,$p));mp.caches[Ep]=Sp}else Sp=mp.caches[Ep];mp.styles[Ep].d+=hp.hd===!0?"":Sp,mp.styles[Ep]._mdf=yp||mp.styles[Ep]._mdf}}function cp(hp,mp,gp){var vp=mp.style;(mp.c._mdf||gp)&&vp.pElem.setAttribute("fill","rgb("+bmFloor(mp.c.v[0])+","+bmFloor(mp.c.v[1])+","+bmFloor(mp.c.v[2])+")"),(mp.o._mdf||gp)&&vp.pElem.setAttribute("fill-opacity",mp.o.v)}function dp(hp,mp,gp){fp(hp,mp,gp),pp(hp,mp,gp)}function fp(hp,mp,gp){var vp=mp.gf,xp=mp.g._hasOpacity,Sp=mp.s.v,yp=mp.e.v;if(mp.o._mdf||gp){var bp=hp.ty==="gf"?"fill-opacity":"stroke-opacity";mp.style.pElem.setAttribute(bp,mp.o.v)}if(mp.s._mdf||gp){var Ep=hp.t===1?"x1":"cx",wp=Ep==="x1"?"y1":"cy";vp.setAttribute(Ep,Sp[0]),vp.setAttribute(wp,Sp[1]),xp&&!mp.g._collapsable&&(mp.of.setAttribute(Ep,Sp[0]),mp.of.setAttribute(wp,Sp[1]))}var _p,Cp,$p,Rp;if(mp.g._cmdf||gp){_p=mp.cst;var Pp=mp.g.c;for($p=_p.length,Cp=0;Cp<$p;Cp+=1)Rp=_p[Cp],Rp.setAttribute("offset",Pp[Cp*4]+"%"),Rp.setAttribute("stop-color","rgb("+Pp[Cp*4+1]+","+Pp[Cp*4+2]+","+Pp[Cp*4+3]+")")}if(xp&&(mp.g._omdf||gp)){var Op=mp.g.o;for(mp.g._collapsable?_p=mp.cst:_p=mp.ost,$p=_p.length,Cp=0;Cp<$p;Cp+=1)Rp=_p[Cp],mp.g._collapsable||Rp.setAttribute("offset",Op[Cp*2]+"%"),Rp.setAttribute("stop-opacity",Op[Cp*2+1])}if(hp.t===1)(mp.e._mdf||gp)&&(vp.setAttribute("x2",yp[0]),vp.setAttribute("y2",yp[1]),xp&&!mp.g._collapsable&&(mp.of.setAttribute("x2",yp[0]),mp.of.setAttribute("y2",yp[1])));else{var jp;if((mp.s._mdf||mp.e._mdf||gp)&&(jp=Math.sqrt(Math.pow(Sp[0]-yp[0],2)+Math.pow(Sp[1]-yp[1],2)),vp.setAttribute("r",jp),xp&&!mp.g._collapsable&&mp.of.setAttribute("r",jp)),mp.e._mdf||mp.h._mdf||mp.a._mdf||gp){jp||(jp=Math.sqrt(Math.pow(Sp[0]-yp[0],2)+Math.pow(Sp[1]-yp[1],2)));var Mp=Math.atan2(yp[1]-Sp[1],yp[0]-Sp[0]),Ap=mp.h.v;Ap>=1?Ap=.99:Ap<=-1&&(Ap=-.99);var Dp=jp*Ap,Fp=Math.cos(Mp+mp.a.v)*Dp+Sp[0],Ip=Math.sin(Mp+mp.a.v)*Dp+Sp[1];vp.setAttribute("fx",Fp),vp.setAttribute("fy",Ip),xp&&!mp.g._collapsable&&(mp.of.setAttribute("fx",Fp),mp.of.setAttribute("fy",Ip))}}}function pp(hp,mp,gp){var vp=mp.style,xp=mp.d;xp&&(xp._mdf||gp)&&xp.dashStr&&(vp.pElem.setAttribute("stroke-dasharray",xp.dashStr),vp.pElem.setAttribute("stroke-dashoffset",xp.dashoffset[0])),mp.c&&(mp.c._mdf||gp)&&vp.pElem.setAttribute("stroke","rgb("+bmFloor(mp.c.v[0])+","+bmFloor(mp.c.v[1])+","+bmFloor(mp.c.v[2])+")"),(mp.o._mdf||gp)&&vp.pElem.setAttribute("stroke-opacity",mp.o.v),(mp.w._mdf||gp)&&(vp.pElem.setAttribute("stroke-width",mp.w.v),vp.msElem&&vp.msElem.setAttribute("stroke-width",mp.w.v))}return rp}();function SVGShapeElement(_d,np,rp){this.shapes=[],this.shapesData=_d.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.initElement(_d,np,rp),this.prevViewData=[]}extendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement],SVGShapeElement),SVGShapeElement.prototype.initSecondaryElement=function(){},SVGShapeElement.prototype.identityMatrix=new Matrix,SVGShapeElement.prototype.buildExpressionInterface=function(){},SVGShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes()},SVGShapeElement.prototype.filterUniqueShapes=function(){var _d,np=this.shapes.length,rp,ap,sp=this.stylesList.length,lp,up=[],cp=!1;for(ap=0;ap<sp;ap+=1){for(lp=this.stylesList[ap],cp=!1,up.length=0,_d=0;_d<np;_d+=1)rp=this.shapes[_d],rp.styles.indexOf(lp)!==-1&&(up.push(rp),cp=rp._isAnimated||cp);up.length>1&&cp&&this.setShapesAsAnimated(up)}},SVGShapeElement.prototype.setShapesAsAnimated=function(_d){var np,rp=_d.length;for(np=0;np<rp;np+=1)_d[np].setAsAnimated()},SVGShapeElement.prototype.createStyleElement=function(_d,np){var rp,ap=new SVGStyleData(_d,np),sp=ap.pElem;if(_d.ty==="st")rp=new SVGStrokeStyleData(this,_d,ap);else if(_d.ty==="fl")rp=new SVGFillStyleData(this,_d,ap);else if(_d.ty==="gf"||_d.ty==="gs"){var lp=_d.ty==="gf"?SVGGradientFillStyleData:SVGGradientStrokeStyleData;rp=new lp(this,_d,ap),this.globalData.defs.appendChild(rp.gf),rp.maskId&&(this.globalData.defs.appendChild(rp.ms),this.globalData.defs.appendChild(rp.of),sp.setAttribute("mask","url("+getLocationHref()+"#"+rp.maskId+")"))}else _d.ty==="no"&&(rp=new SVGNoStyleData(this,_d,ap));return(_d.ty==="st"||_d.ty==="gs")&&(sp.setAttribute("stroke-linecap",lineCapEnum[_d.lc||2]),sp.setAttribute("stroke-linejoin",lineJoinEnum[_d.lj||2]),sp.setAttribute("fill-opacity","0"),_d.lj===1&&sp.setAttribute("stroke-miterlimit",_d.ml)),_d.r===2&&sp.setAttribute("fill-rule","evenodd"),_d.ln&&sp.setAttribute("id",_d.ln),_d.cl&&sp.setAttribute("class",_d.cl),_d.bm&&(sp.style["mix-blend-mode"]=getBlendMode(_d.bm)),this.stylesList.push(ap),this.addToAnimatedContents(_d,rp),rp},SVGShapeElement.prototype.createGroupElement=function(_d){var np=new ShapeGroupData;return _d.ln&&np.gr.setAttribute("id",_d.ln),_d.cl&&np.gr.setAttribute("class",_d.cl),_d.bm&&(np.gr.style["mix-blend-mode"]=getBlendMode(_d.bm)),np},SVGShapeElement.prototype.createTransformElement=function(_d,np){var rp=TransformPropertyFactory.getTransformProperty(this,_d,this),ap=new SVGTransformData(rp,rp.o,np);return this.addToAnimatedContents(_d,ap),ap},SVGShapeElement.prototype.createShapeElement=function(_d,np,rp){var ap=4;_d.ty==="rc"?ap=5:_d.ty==="el"?ap=6:_d.ty==="sr"&&(ap=7);var sp=ShapePropertyFactory.getShapeProp(this,_d,ap,this),lp=new SVGShapeData(np,rp,sp);return this.shapes.push(lp),this.addShapeToModifiers(lp),this.addToAnimatedContents(_d,lp),lp},SVGShapeElement.prototype.addToAnimatedContents=function(_d,np){for(var rp=0,ap=this.animatedContents.length;rp<ap;){if(this.animatedContents[rp].element===np)return;rp+=1}this.animatedContents.push({fn:SVGElementsRenderer.createRenderFunction(_d),element:np,data:_d})},SVGShapeElement.prototype.setElementStyles=function(_d){var np=_d.styles,rp,ap=this.stylesList.length;for(rp=0;rp<ap;rp+=1)this.stylesList[rp].closed||np.push(this.stylesList[rp])},SVGShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var _d,np=this.itemsData.length;for(_d=0;_d<np;_d+=1)this.prevViewData[_d]=this.itemsData[_d];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes(),np=this.dynamicProperties.length,_d=0;_d<np;_d+=1)this.dynamicProperties[_d].getValue();this.renderModifiers()},SVGShapeElement.prototype.searchShapes=function(_d,np,rp,ap,sp,lp,up){var cp=[].concat(lp),dp,fp=_d.length-1,pp,hp,mp=[],gp=[],vp,xp,Sp;for(dp=fp;dp>=0;dp-=1){if(Sp=this.searchProcessedElement(_d[dp]),Sp?np[dp]=rp[Sp-1]:_d[dp]._render=up,_d[dp].ty==="fl"||_d[dp].ty==="st"||_d[dp].ty==="gf"||_d[dp].ty==="gs"||_d[dp].ty==="no")Sp?np[dp].style.closed=!1:np[dp]=this.createStyleElement(_d[dp],sp),_d[dp]._render&&np[dp].style.pElem.parentNode!==ap&&ap.appendChild(np[dp].style.pElem),mp.push(np[dp].style);else if(_d[dp].ty==="gr"){if(!Sp)np[dp]=this.createGroupElement(_d[dp]);else for(hp=np[dp].it.length,pp=0;pp<hp;pp+=1)np[dp].prevViewData[pp]=np[dp].it[pp];this.searchShapes(_d[dp].it,np[dp].it,np[dp].prevViewData,np[dp].gr,sp+1,cp,up),_d[dp]._render&&np[dp].gr.parentNode!==ap&&ap.appendChild(np[dp].gr)}else _d[dp].ty==="tr"?(Sp||(np[dp]=this.createTransformElement(_d[dp],ap)),vp=np[dp].transform,cp.push(vp)):_d[dp].ty==="sh"||_d[dp].ty==="rc"||_d[dp].ty==="el"||_d[dp].ty==="sr"?(Sp||(np[dp]=this.createShapeElement(_d[dp],cp,sp)),this.setElementStyles(np[dp])):_d[dp].ty==="tm"||_d[dp].ty==="rd"||_d[dp].ty==="ms"||_d[dp].ty==="pb"||_d[dp].ty==="zz"||_d[dp].ty==="op"?(Sp?(xp=np[dp],xp.closed=!1):(xp=ShapeModifiers.getModifier(_d[dp].ty),xp.init(this,_d[dp]),np[dp]=xp,this.shapeModifiers.push(xp)),gp.push(xp)):_d[dp].ty==="rp"&&(Sp?(xp=np[dp],xp.closed=!0):(xp=ShapeModifiers.getModifier(_d[dp].ty),np[dp]=xp,xp.init(this,_d,dp,np),this.shapeModifiers.push(xp),up=!1),gp.push(xp));this.addProcessedElement(_d[dp],dp+1)}for(fp=mp.length,dp=0;dp<fp;dp+=1)mp[dp].closed=!0;for(fp=gp.length,dp=0;dp<fp;dp+=1)gp[dp].closed=!0},SVGShapeElement.prototype.renderInnerContent=function(){this.renderModifiers();var _d,np=this.stylesList.length;for(_d=0;_d<np;_d+=1)this.stylesList[_d].reset();for(this.renderShape(),_d=0;_d<np;_d+=1)(this.stylesList[_d]._mdf||this._isFirstFrame)&&(this.stylesList[_d].msElem&&(this.stylesList[_d].msElem.setAttribute("d",this.stylesList[_d].d),this.stylesList[_d].d="M0 0"+this.stylesList[_d].d),this.stylesList[_d].pElem.setAttribute("d",this.stylesList[_d].d||"M0 0"))},SVGShapeElement.prototype.renderShape=function(){var _d,np=this.animatedContents.length,rp;for(_d=0;_d<np;_d+=1)rp=this.animatedContents[_d],(this._isFirstFrame||rp.element._isAnimated)&&rp.data!==!0&&rp.fn(rp.data,rp.element,this._isFirstFrame)},SVGShapeElement.prototype.destroy=function(){this.destroyBaseElement(),this.shapesData=null,this.itemsData=null};function LetterProps(_d,np,rp,ap,sp,lp){this.o=_d,this.sw=np,this.sc=rp,this.fc=ap,this.m=sp,this.p=lp,this._mdf={o:!0,sw:!!np,sc:!!rp,fc:!!ap,m:!0,p:!0}}LetterProps.prototype.update=function(_d,np,rp,ap,sp,lp){this._mdf.o=!1,this._mdf.sw=!1,this._mdf.sc=!1,this._mdf.fc=!1,this._mdf.m=!1,this._mdf.p=!1;var up=!1;return this.o!==_d&&(this.o=_d,this._mdf.o=!0,up=!0),this.sw!==np&&(this.sw=np,this._mdf.sw=!0,up=!0),this.sc!==rp&&(this.sc=rp,this._mdf.sc=!0,up=!0),this.fc!==ap&&(this.fc=ap,this._mdf.fc=!0,up=!0),this.m!==sp&&(this.m=sp,this._mdf.m=!0,up=!0),lp.length&&(this.p[0]!==lp[0]||this.p[1]!==lp[1]||this.p[4]!==lp[4]||this.p[5]!==lp[5]||this.p[12]!==lp[12]||this.p[13]!==lp[13])&&(this.p=lp,this._mdf.p=!0,up=!0),up};function TextProperty(_d,np){this._frameId=initialDefaultFrame,this.pv="",this.v="",this.kf=!1,this._isFirstFrame=!0,this._mdf=!1,np.d&&np.d.sid&&(np.d=_d.globalData.slotManager.getProp(np.d)),this.data=np,this.elem=_d,this.comp=this.elem.comp,this.keysIndex=0,this.canResize=!1,this.minimumFontSize=1,this.effectsSequence=[],this.currentData={ascent:0,boxWidth:this.defaultBoxWidth,f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,sz:0,ps:null,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,finalSize:0,finalText:[],finalLineHeight:0,__complete:!1},this.copyData(this.currentData,this.data.d.k[0].s),this.searchProperty()||this.completeTextData(this.currentData)}TextProperty.prototype.defaultBoxWidth=[0,0],TextProperty.prototype.copyData=function(_d,np){for(var rp in np)Object.prototype.hasOwnProperty.call(np,rp)&&(_d[rp]=np[rp]);return _d},TextProperty.prototype.setCurrentData=function(_d){_d.__complete||this.completeTextData(_d),this.currentData=_d,this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth,this._mdf=!0},TextProperty.prototype.searchProperty=function(){return this.searchKeyframes()},TextProperty.prototype.searchKeyframes=function(){return this.kf=this.data.d.k.length>1,this.kf&&this.addEffect(this.getKeyframeValue.bind(this)),this.kf},TextProperty.prototype.addEffect=function(_d){this.effectsSequence.push(_d),this.elem.addDynamicProperty(this)},TextProperty.prototype.getValue=function(_d){if(!((this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)&&!_d)){this.currentData.t=this.data.d.k[this.keysIndex].s.t;var np=this.currentData,rp=this.keysIndex;if(this.lock){this.setCurrentData(this.currentData);return}this.lock=!0,this._mdf=!1;var ap,sp=this.effectsSequence.length,lp=_d||this.data.d.k[this.keysIndex].s;for(ap=0;ap<sp;ap+=1)rp!==this.keysIndex?lp=this.effectsSequence[ap](lp,lp.t):lp=this.effectsSequence[ap](this.currentData,lp.t);np!==lp&&this.setCurrentData(lp),this.v=this.currentData,this.pv=this.v,this.lock=!1,this.frameId=this.elem.globalData.frameId}},TextProperty.prototype.getKeyframeValue=function(){for(var _d=this.data.d.k,np=this.elem.comp.renderedFrame,rp=0,ap=_d.length;rp<=ap-1&&!(rp===ap-1||_d[rp+1].t>np);)rp+=1;return this.keysIndex!==rp&&(this.keysIndex=rp),this.data.d.k[this.keysIndex].s},TextProperty.prototype.buildFinalText=function(_d){for(var np=[],rp=0,ap=_d.length,sp,lp,up=!1,cp=!1,dp="";rp<ap;)up=cp,cp=!1,sp=_d.charCodeAt(rp),dp=_d.charAt(rp),FontManager.isCombinedCharacter(sp)?up=!0:sp>=55296&&sp<=56319?FontManager.isRegionalFlag(_d,rp)?dp=_d.substr(rp,14):(lp=_d.charCodeAt(rp+1),lp>=56320&&lp<=57343&&(FontManager.isModifier(sp,lp)?(dp=_d.substr(rp,2),up=!0):FontManager.isFlagEmoji(_d.substr(rp,4))?dp=_d.substr(rp,4):dp=_d.substr(rp,2))):sp>56319?(lp=_d.charCodeAt(rp+1),FontManager.isVariationSelector(sp)&&(up=!0)):FontManager.isZeroWidthJoiner(sp)&&(up=!0,cp=!0),up?(np[np.length-1]+=dp,up=!1):np.push(dp),rp+=dp.length;return np},TextProperty.prototype.completeTextData=function(_d){_d.__complete=!0;var np=this.elem.globalData.fontManager,rp=this.data,ap=[],sp,lp,up,cp=0,dp,fp=rp.m.g,pp=0,hp=0,mp=0,gp=[],vp=0,xp=0,Sp,yp,bp=np.getFontByName(_d.f),Ep,wp=0,_p=getFontProperties(bp);_d.fWeight=_p.weight,_d.fStyle=_p.style,_d.finalSize=_d.s,_d.finalText=this.buildFinalText(_d.t),lp=_d.finalText.length,_d.finalLineHeight=_d.lh;var Cp=_d.tr/1e3*_d.finalSize,$p;if(_d.sz)for(var Rp=!0,Pp=_d.sz[0],Op=_d.sz[1],jp,Mp;Rp;){Mp=this.buildFinalText(_d.t),jp=0,vp=0,lp=Mp.length,Cp=_d.tr/1e3*_d.finalSize;var Ap=-1;for(sp=0;sp<lp;sp+=1)$p=Mp[sp].charCodeAt(0),up=!1,Mp[sp]===" "?Ap=sp:($p===13||$p===3)&&(vp=0,up=!0,jp+=_d.finalLineHeight||_d.finalSize*1.2),np.chars?(Ep=np.getCharData(Mp[sp],bp.fStyle,bp.fFamily),wp=up?0:Ep.w*_d.finalSize/100):wp=np.measureText(Mp[sp],_d.f,_d.finalSize),vp+wp>Pp&&Mp[sp]!==" "?(Ap===-1?lp+=1:sp=Ap,jp+=_d.finalLineHeight||_d.finalSize*1.2,Mp.splice(sp,Ap===sp?1:0,"\r"),Ap=-1,vp=0):(vp+=wp,vp+=Cp);jp+=bp.ascent*_d.finalSize/100,this.canResize&&_d.finalSize>this.minimumFontSize&&Op<jp?(_d.finalSize-=1,_d.finalLineHeight=_d.finalSize*_d.lh/_d.s):(_d.finalText=Mp,lp=_d.finalText.length,Rp=!1)}vp=-Cp,wp=0;var Dp=0,Fp;for(sp=0;sp<lp;sp+=1)if(up=!1,Fp=_d.finalText[sp],$p=Fp.charCodeAt(0),$p===13||$p===3?(Dp=0,gp.push(vp),xp=vp>xp?vp:xp,vp=-2*Cp,dp="",up=!0,mp+=1):dp=Fp,np.chars?(Ep=np.getCharData(Fp,bp.fStyle,np.getFontByName(_d.f).fFamily),wp=up?0:Ep.w*_d.finalSize/100):wp=np.measureText(dp,_d.f,_d.finalSize),Fp===" "?Dp+=wp+Cp:(vp+=wp+Cp+Dp,Dp=0),ap.push({l:wp,an:wp,add:pp,n:up,anIndexes:[],val:dp,line:mp,animatorJustifyOffset:0}),fp==2){if(pp+=wp,dp===""||dp===" "||sp===lp-1){for((dp===""||dp===" ")&&(pp-=wp);hp<=sp;)ap[hp].an=pp,ap[hp].ind=cp,ap[hp].extra=wp,hp+=1;cp+=1,pp=0}}else if(fp==3){if(pp+=wp,dp===""||sp===lp-1){for(dp===""&&(pp-=wp);hp<=sp;)ap[hp].an=pp,ap[hp].ind=cp,ap[hp].extra=wp,hp+=1;pp=0,cp+=1}}else ap[cp].ind=cp,ap[cp].extra=0,cp+=1;if(_d.l=ap,xp=vp>xp?vp:xp,gp.push(vp),_d.sz)_d.boxWidth=_d.sz[0],_d.justifyOffset=0;else switch(_d.boxWidth=xp,_d.j){case 1:_d.justifyOffset=-_d.boxWidth;break;case 2:_d.justifyOffset=-_d.boxWidth/2;break;default:_d.justifyOffset=0}_d.lineWidths=gp;var Ip=rp.a,kp,Tp;yp=Ip.length;var Np,Lp,Vp=[];for(Sp=0;Sp<yp;Sp+=1){for(kp=Ip[Sp],kp.a.sc&&(_d.strokeColorAnim=!0),kp.a.sw&&(_d.strokeWidthAnim=!0),(kp.a.fc||kp.a.fh||kp.a.fs||kp.a.fb)&&(_d.fillColorAnim=!0),Lp=0,Np=kp.s.b,sp=0;sp<lp;sp+=1)Tp=ap[sp],Tp.anIndexes[Sp]=Lp,(Np==1&&Tp.val!==""||Np==2&&Tp.val!==""&&Tp.val!==" "||Np==3&&(Tp.n||Tp.val==" "||sp==lp-1)||Np==4&&(Tp.n||sp==lp-1))&&(kp.s.rn===1&&Vp.push(Lp),Lp+=1);rp.a[Sp].s.totalChars=Lp;var zp=-1,Wp;if(kp.s.rn===1)for(sp=0;sp<lp;sp+=1)Tp=ap[sp],zp!=Tp.anIndexes[Sp]&&(zp=Tp.anIndexes[Sp],Wp=Vp.splice(Math.floor(Math.random()*Vp.length),1)[0]),Tp.anIndexes[Sp]=Wp}_d.yOffset=_d.finalLineHeight||_d.finalSize*1.2,_d.ls=_d.ls||0,_d.ascent=bp.ascent*_d.finalSize/100},TextProperty.prototype.updateDocumentData=function(_d,np){np=np===void 0?this.keysIndex:np;var rp=this.copyData({},this.data.d.k[np].s);rp=this.copyData(rp,_d),this.data.d.k[np].s=rp,this.recalculate(np),this.setCurrentData(rp),this.elem.addDynamicProperty(this)},TextProperty.prototype.recalculate=function(_d){var np=this.data.d.k[_d].s;np.__complete=!1,this.keysIndex=0,this._isFirstFrame=!0,this.getValue(np)},TextProperty.prototype.canResizeFont=function(_d){this.canResize=_d,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)},TextProperty.prototype.setMinimumFontSize=function(_d){this.minimumFontSize=Math.floor(_d)||1,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)};var TextSelectorProp=function(){var _d=Math.max,np=Math.min,rp=Math.floor;function ap(lp,up){this._currentTextLength=-1,this.k=!1,this.data=up,this.elem=lp,this.comp=lp.comp,this.finalS=0,this.finalE=0,this.initDynamicPropertyContainer(lp),this.s=PropertyFactory.getProp(lp,up.s||{k:0},0,0,this),"e"in up?this.e=PropertyFactory.getProp(lp,up.e,0,0,this):this.e={v:100},this.o=PropertyFactory.getProp(lp,up.o||{k:0},0,0,this),this.xe=PropertyFactory.getProp(lp,up.xe||{k:0},0,0,this),this.ne=PropertyFactory.getProp(lp,up.ne||{k:0},0,0,this),this.sm=PropertyFactory.getProp(lp,up.sm||{k:100},0,0,this),this.a=PropertyFactory.getProp(lp,up.a,0,.01,this),this.dynamicProperties.length||this.getValue()}ap.prototype={getMult:function(up){this._currentTextLength!==this.elem.textProperty.currentData.l.length&&this.getValue();var cp=0,dp=0,fp=1,pp=1;this.ne.v>0?cp=this.ne.v/100:dp=-this.ne.v/100,this.xe.v>0?fp=1-this.xe.v/100:pp=1+this.xe.v/100;var hp=BezierFactory.getBezierEasing(cp,dp,fp,pp).get,mp=0,gp=this.finalS,vp=this.finalE,xp=this.data.sh;if(xp===2)vp===gp?mp=up>=vp?1:0:mp=_d(0,np(.5/(vp-gp)+(up-gp)/(vp-gp),1)),mp=hp(mp);else if(xp===3)vp===gp?mp=up>=vp?0:1:mp=1-_d(0,np(.5/(vp-gp)+(up-gp)/(vp-gp),1)),mp=hp(mp);else if(xp===4)vp===gp?mp=0:(mp=_d(0,np(.5/(vp-gp)+(up-gp)/(vp-gp),1)),mp<.5?mp*=2:mp=1-2*(mp-.5)),mp=hp(mp);else if(xp===5){if(vp===gp)mp=0;else{var Sp=vp-gp;up=np(_d(0,up+.5-gp),vp-gp);var yp=-Sp/2+up,bp=Sp/2;mp=Math.sqrt(1-yp*yp/(bp*bp))}mp=hp(mp)}else xp===6?(vp===gp?mp=0:(up=np(_d(0,up+.5-gp),vp-gp),mp=(1+Math.cos(Math.PI+Math.PI*2*up/(vp-gp)))/2),mp=hp(mp)):(up>=rp(gp)&&(up-gp<0?mp=_d(0,np(np(vp,1)-(gp-up),1)):mp=_d(0,np(vp-up,1))),mp=hp(mp));if(this.sm.v!==100){var Ep=this.sm.v*.01;Ep===0&&(Ep=1e-8);var wp=.5-Ep*.5;mp<wp?mp=0:(mp=(mp-wp)/Ep,mp>1&&(mp=1))}return mp*this.a.v},getValue:function(up){this.iterateDynamicProperties(),this._mdf=up||this._mdf,this._currentTextLength=this.elem.textProperty.currentData.l.length||0,up&&this.data.r===2&&(this.e.v=this._currentTextLength);var cp=this.data.r===2?1:100/this.data.totalChars,dp=this.o.v/cp,fp=this.s.v/cp+dp,pp=this.e.v/cp+dp;if(fp>pp){var hp=fp;fp=pp,pp=hp}this.finalS=fp,this.finalE=pp}},extendPrototype([DynamicPropertyContainer],ap);function sp(lp,up,cp){return new ap(lp,up)}return{getTextSelectorProp:sp}}();function TextAnimatorDataProperty(_d,np,rp){var ap={propType:!1},sp=PropertyFactory.getProp,lp=np.a;this.a={r:lp.r?sp(_d,lp.r,0,degToRads,rp):ap,rx:lp.rx?sp(_d,lp.rx,0,degToRads,rp):ap,ry:lp.ry?sp(_d,lp.ry,0,degToRads,rp):ap,sk:lp.sk?sp(_d,lp.sk,0,degToRads,rp):ap,sa:lp.sa?sp(_d,lp.sa,0,degToRads,rp):ap,s:lp.s?sp(_d,lp.s,1,.01,rp):ap,a:lp.a?sp(_d,lp.a,1,0,rp):ap,o:lp.o?sp(_d,lp.o,0,.01,rp):ap,p:lp.p?sp(_d,lp.p,1,0,rp):ap,sw:lp.sw?sp(_d,lp.sw,0,0,rp):ap,sc:lp.sc?sp(_d,lp.sc,1,0,rp):ap,fc:lp.fc?sp(_d,lp.fc,1,0,rp):ap,fh:lp.fh?sp(_d,lp.fh,0,0,rp):ap,fs:lp.fs?sp(_d,lp.fs,0,.01,rp):ap,fb:lp.fb?sp(_d,lp.fb,0,.01,rp):ap,t:lp.t?sp(_d,lp.t,0,0,rp):ap},this.s=TextSelectorProp.getTextSelectorProp(_d,np.s,rp),this.s.t=np.s.t}function TextAnimatorProperty(_d,np,rp){this._isFirstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._textData=_d,this._renderType=np,this._elem=rp,this._animatorsData=createSizedArray(this._textData.a.length),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1,this.initDynamicPropertyContainer(rp)}TextAnimatorProperty.prototype.searchProperties=function(){var _d,np=this._textData.a.length,rp,ap=PropertyFactory.getProp;for(_d=0;_d<np;_d+=1)rp=this._textData.a[_d],this._animatorsData[_d]=new TextAnimatorDataProperty(this._elem,rp,this);this._textData.p&&"m"in this._textData.p?(this._pathData={a:ap(this._elem,this._textData.p.a,0,0,this),f:ap(this._elem,this._textData.p.f,0,0,this),l:ap(this._elem,this._textData.p.l,0,0,this),r:ap(this._elem,this._textData.p.r,0,0,this),p:ap(this._elem,this._textData.p.p,0,0,this),m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=ap(this._elem,this._textData.m.a,1,0,this)},TextAnimatorProperty.prototype.getMeasures=function(_d,np){if(this.lettersChangedFlag=np,!(!this._mdf&&!this._isFirstFrame&&!np&&(!this._hasMaskedPath||!this._pathData.m._mdf))){this._isFirstFrame=!1;var rp=this._moreOptions.alignment.v,ap=this._animatorsData,sp=this._textData,lp=this.mHelper,up=this._renderType,cp=this.renderedLetters.length,dp,fp,pp,hp,mp=_d.l,gp,vp,xp,Sp,yp,bp,Ep,wp,_p,Cp,$p,Rp,Pp,Op,jp;if(this._hasMaskedPath){if(jp=this._pathData.m,!this._pathData.n||this._pathData._mdf){var Mp=jp.v;this._pathData.r.v&&(Mp=Mp.reverse()),gp={tLength:0,segments:[]},hp=Mp._length-1;var Ap;for(Rp=0,pp=0;pp<hp;pp+=1)Ap=bez.buildBezierData(Mp.v[pp],Mp.v[pp+1],[Mp.o[pp][0]-Mp.v[pp][0],Mp.o[pp][1]-Mp.v[pp][1]],[Mp.i[pp+1][0]-Mp.v[pp+1][0],Mp.i[pp+1][1]-Mp.v[pp+1][1]]),gp.tLength+=Ap.segmentLength,gp.segments.push(Ap),Rp+=Ap.segmentLength;pp=hp,jp.v.c&&(Ap=bez.buildBezierData(Mp.v[pp],Mp.v[0],[Mp.o[pp][0]-Mp.v[pp][0],Mp.o[pp][1]-Mp.v[pp][1]],[Mp.i[0][0]-Mp.v[0][0],Mp.i[0][1]-Mp.v[0][1]]),gp.tLength+=Ap.segmentLength,gp.segments.push(Ap),Rp+=Ap.segmentLength),this._pathData.pi=gp}if(gp=this._pathData.pi,vp=this._pathData.f.v,Ep=0,bp=1,Sp=0,yp=!0,Cp=gp.segments,vp<0&&jp.v.c)for(gp.tLength<Math.abs(vp)&&(vp=-Math.abs(vp)%gp.tLength),Ep=Cp.length-1,_p=Cp[Ep].points,bp=_p.length-1;vp<0;)vp+=_p[bp].partialLength,bp-=1,bp<0&&(Ep-=1,_p=Cp[Ep].points,bp=_p.length-1);_p=Cp[Ep].points,wp=_p[bp-1],xp=_p[bp],$p=xp.partialLength}hp=mp.length,dp=0,fp=0;var Dp=_d.finalSize*1.2*.714,Fp=!0,Ip,kp,Tp,Np,Lp;Np=ap.length;var Vp,zp=-1,Wp,Up,qp,Bp=vp,Yp=Ep,Xp=bp,Qp=-1,am,Jp,im,Zp,Gp,tm,om,em,_m="",Cm=this.defaultPropsArray,Rm;if(_d.j===2||_d.j===1){var Em=0,$m=0,fm=_d.j===2?-.5:-1,wm=0,pm=!0;for(pp=0;pp<hp;pp+=1)if(mp[pp].n){for(Em&&(Em+=$m);wm<pp;)mp[wm].animatorJustifyOffset=Em,wm+=1;Em=0,pm=!0}else{for(Tp=0;Tp<Np;Tp+=1)Ip=ap[Tp].a,Ip.t.propType&&(pm&&_d.j===2&&($m+=Ip.t.v*fm),kp=ap[Tp].s,Vp=kp.getMult(mp[pp].anIndexes[Tp],sp.a[Tp].s.totalChars),Vp.length?Em+=Ip.t.v*Vp[0]*fm:Em+=Ip.t.v*Vp*fm);pm=!1}for(Em&&(Em+=$m);wm<pp;)mp[wm].animatorJustifyOffset=Em,wm+=1}for(pp=0;pp<hp;pp+=1){if(lp.reset(),am=1,mp[pp].n)dp=0,fp+=_d.yOffset,fp+=Fp?1:0,vp=Bp,Fp=!1,this._hasMaskedPath&&(Ep=Yp,bp=Xp,_p=Cp[Ep].points,wp=_p[bp-1],xp=_p[bp],$p=xp.partialLength,Sp=0),_m="",em="",tm="",Rm="",Cm=this.defaultPropsArray;else{if(this._hasMaskedPath){if(Qp!==mp[pp].line){switch(_d.j){case 1:vp+=Rp-_d.lineWidths[mp[pp].line];break;case 2:vp+=(Rp-_d.lineWidths[mp[pp].line])/2;break}Qp=mp[pp].line}zp!==mp[pp].ind&&(mp[zp]&&(vp+=mp[zp].extra),vp+=mp[pp].an/2,zp=mp[pp].ind),vp+=rp[0]*mp[pp].an*.005;var hm=0;for(Tp=0;Tp<Np;Tp+=1)Ip=ap[Tp].a,Ip.p.propType&&(kp=ap[Tp].s,Vp=kp.getMult(mp[pp].anIndexes[Tp],sp.a[Tp].s.totalChars),Vp.length?hm+=Ip.p.v[0]*Vp[0]:hm+=Ip.p.v[0]*Vp),Ip.a.propType&&(kp=ap[Tp].s,Vp=kp.getMult(mp[pp].anIndexes[Tp],sp.a[Tp].s.totalChars),Vp.length?hm+=Ip.a.v[0]*Vp[0]:hm+=Ip.a.v[0]*Vp);for(yp=!0,this._pathData.a.v&&(vp=mp[0].an*.5+(Rp-this._pathData.f.v-mp[0].an*.5-mp[mp.length-1].an*.5)*zp/(hp-1),vp+=this._pathData.f.v);yp;)Sp+$p>=vp+hm||!_p?(Pp=(vp+hm-Sp)/xp.partialLength,Up=wp.point[0]+(xp.point[0]-wp.point[0])*Pp,qp=wp.point[1]+(xp.point[1]-wp.point[1])*Pp,lp.translate(-rp[0]*mp[pp].an*.005,-(rp[1]*Dp)*.01),yp=!1):_p&&(Sp+=xp.partialLength,bp+=1,bp>=_p.length&&(bp=0,Ep+=1,Cp[Ep]?_p=Cp[Ep].points:jp.v.c?(bp=0,Ep=0,_p=Cp[Ep].points):(Sp-=xp.partialLength,_p=null)),_p&&(wp=xp,xp=_p[bp],$p=xp.partialLength));Wp=mp[pp].an/2-mp[pp].add,lp.translate(-Wp,0,0)}else Wp=mp[pp].an/2-mp[pp].add,lp.translate(-Wp,0,0),lp.translate(-rp[0]*mp[pp].an*.005,-rp[1]*Dp*.01,0);for(Tp=0;Tp<Np;Tp+=1)Ip=ap[Tp].a,Ip.t.propType&&(kp=ap[Tp].s,Vp=kp.getMult(mp[pp].anIndexes[Tp],sp.a[Tp].s.totalChars),(dp!==0||_d.j!==0)&&(this._hasMaskedPath?Vp.length?vp+=Ip.t.v*Vp[0]:vp+=Ip.t.v*Vp:Vp.length?dp+=Ip.t.v*Vp[0]:dp+=Ip.t.v*Vp));for(_d.strokeWidthAnim&&(im=_d.sw||0),_d.strokeColorAnim&&(_d.sc?Jp=[_d.sc[0],_d.sc[1],_d.sc[2]]:Jp=[0,0,0]),_d.fillColorAnim&&_d.fc&&(Zp=[_d.fc[0],_d.fc[1],_d.fc[2]]),Tp=0;Tp<Np;Tp+=1)Ip=ap[Tp].a,Ip.a.propType&&(kp=ap[Tp].s,Vp=kp.getMult(mp[pp].anIndexes[Tp],sp.a[Tp].s.totalChars),Vp.length?lp.translate(-Ip.a.v[0]*Vp[0],-Ip.a.v[1]*Vp[1],Ip.a.v[2]*Vp[2]):lp.translate(-Ip.a.v[0]*Vp,-Ip.a.v[1]*Vp,Ip.a.v[2]*Vp));for(Tp=0;Tp<Np;Tp+=1)Ip=ap[Tp].a,Ip.s.propType&&(kp=ap[Tp].s,Vp=kp.getMult(mp[pp].anIndexes[Tp],sp.a[Tp].s.totalChars),Vp.length?lp.scale(1+(Ip.s.v[0]-1)*Vp[0],1+(Ip.s.v[1]-1)*Vp[1],1):lp.scale(1+(Ip.s.v[0]-1)*Vp,1+(Ip.s.v[1]-1)*Vp,1));for(Tp=0;Tp<Np;Tp+=1){if(Ip=ap[Tp].a,kp=ap[Tp].s,Vp=kp.getMult(mp[pp].anIndexes[Tp],sp.a[Tp].s.totalChars),Ip.sk.propType&&(Vp.length?lp.skewFromAxis(-Ip.sk.v*Vp[0],Ip.sa.v*Vp[1]):lp.skewFromAxis(-Ip.sk.v*Vp,Ip.sa.v*Vp)),Ip.r.propType&&(Vp.length?lp.rotateZ(-Ip.r.v*Vp[2]):lp.rotateZ(-Ip.r.v*Vp)),Ip.ry.propType&&(Vp.length?lp.rotateY(Ip.ry.v*Vp[1]):lp.rotateY(Ip.ry.v*Vp)),Ip.rx.propType&&(Vp.length?lp.rotateX(Ip.rx.v*Vp[0]):lp.rotateX(Ip.rx.v*Vp)),Ip.o.propType&&(Vp.length?am+=(Ip.o.v*Vp[0]-am)*Vp[0]:am+=(Ip.o.v*Vp-am)*Vp),_d.strokeWidthAnim&&Ip.sw.propType&&(Vp.length?im+=Ip.sw.v*Vp[0]:im+=Ip.sw.v*Vp),_d.strokeColorAnim&&Ip.sc.propType)for(Gp=0;Gp<3;Gp+=1)Vp.length?Jp[Gp]+=(Ip.sc.v[Gp]-Jp[Gp])*Vp[0]:Jp[Gp]+=(Ip.sc.v[Gp]-Jp[Gp])*Vp;if(_d.fillColorAnim&&_d.fc){if(Ip.fc.propType)for(Gp=0;Gp<3;Gp+=1)Vp.length?Zp[Gp]+=(Ip.fc.v[Gp]-Zp[Gp])*Vp[0]:Zp[Gp]+=(Ip.fc.v[Gp]-Zp[Gp])*Vp;Ip.fh.propType&&(Vp.length?Zp=addHueToRGB(Zp,Ip.fh.v*Vp[0]):Zp=addHueToRGB(Zp,Ip.fh.v*Vp)),Ip.fs.propType&&(Vp.length?Zp=addSaturationToRGB(Zp,Ip.fs.v*Vp[0]):Zp=addSaturationToRGB(Zp,Ip.fs.v*Vp)),Ip.fb.propType&&(Vp.length?Zp=addBrightnessToRGB(Zp,Ip.fb.v*Vp[0]):Zp=addBrightnessToRGB(Zp,Ip.fb.v*Vp))}}for(Tp=0;Tp<Np;Tp+=1)Ip=ap[Tp].a,Ip.p.propType&&(kp=ap[Tp].s,Vp=kp.getMult(mp[pp].anIndexes[Tp],sp.a[Tp].s.totalChars),this._hasMaskedPath?Vp.length?lp.translate(0,Ip.p.v[1]*Vp[0],-Ip.p.v[2]*Vp[1]):lp.translate(0,Ip.p.v[1]*Vp,-Ip.p.v[2]*Vp):Vp.length?lp.translate(Ip.p.v[0]*Vp[0],Ip.p.v[1]*Vp[1],-Ip.p.v[2]*Vp[2]):lp.translate(Ip.p.v[0]*Vp,Ip.p.v[1]*Vp,-Ip.p.v[2]*Vp));if(_d.strokeWidthAnim&&(tm=im<0?0:im),_d.strokeColorAnim&&(om="rgb("+Math.round(Jp[0]*255)+","+Math.round(Jp[1]*255)+","+Math.round(Jp[2]*255)+")"),_d.fillColorAnim&&_d.fc&&(em="rgb("+Math.round(Zp[0]*255)+","+Math.round(Zp[1]*255)+","+Math.round(Zp[2]*255)+")"),this._hasMaskedPath){if(lp.translate(0,-_d.ls),lp.translate(0,rp[1]*Dp*.01+fp,0),this._pathData.p.v){Op=(xp.point[1]-wp.point[1])/(xp.point[0]-wp.point[0]);var sm=Math.atan(Op)*180/Math.PI;xp.point[0]<wp.point[0]&&(sm+=180),lp.rotate(-sm*Math.PI/180)}lp.translate(Up,qp,0),vp-=rp[0]*mp[pp].an*.005,mp[pp+1]&&zp!==mp[pp+1].ind&&(vp+=mp[pp].an/2,vp+=_d.tr*.001*_d.finalSize)}else{switch(lp.translate(dp,fp,0),_d.ps&&lp.translate(_d.ps[0],_d.ps[1]+_d.ascent,0),_d.j){case 1:lp.translate(mp[pp].animatorJustifyOffset+_d.justifyOffset+(_d.boxWidth-_d.lineWidths[mp[pp].line]),0,0);break;case 2:lp.translate(mp[pp].animatorJustifyOffset+_d.justifyOffset+(_d.boxWidth-_d.lineWidths[mp[pp].line])/2,0,0);break}lp.translate(0,-_d.ls),lp.translate(Wp,0,0),lp.translate(rp[0]*mp[pp].an*.005,rp[1]*Dp*.01,0),dp+=mp[pp].l+_d.tr*.001*_d.finalSize}up==="html"?_m=lp.toCSS():up==="svg"?_m=lp.to2dCSS():Cm=[lp.props[0],lp.props[1],lp.props[2],lp.props[3],lp.props[4],lp.props[5],lp.props[6],lp.props[7],lp.props[8],lp.props[9],lp.props[10],lp.props[11],lp.props[12],lp.props[13],lp.props[14],lp.props[15]],Rm=am}cp<=pp?(Lp=new LetterProps(Rm,tm,om,em,_m,Cm),this.renderedLetters.push(Lp),cp+=1,this.lettersChangedFlag=!0):(Lp=this.renderedLetters[pp],this.lettersChangedFlag=Lp.update(Rm,tm,om,em,_m,Cm)||this.lettersChangedFlag)}}},TextAnimatorProperty.prototype.getValue=function(){this._elem.globalData.frameId!==this._frameId&&(this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties())},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[],extendPrototype([DynamicPropertyContainer],TextAnimatorProperty);function ITextElement(){}ITextElement.prototype.initElement=function(_d,np,rp){this.lettersChangedFlag=!0,this.initFrame(),this.initBaseData(_d,np,rp),this.textProperty=new TextProperty(this,_d.t,this.dynamicProperties),this.textAnimator=new TextAnimatorProperty(_d.t,this.renderType,this),this.initTransform(_d,np,rp),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide(),this.textAnimator.searchProperties(this.dynamicProperties)},ITextElement.prototype.prepareFrame=function(_d){this._mdf=!1,this.prepareRenderableFrame(_d),this.prepareProperties(_d,this.isInRange)},ITextElement.prototype.createPathShape=function(_d,np){var rp,ap=np.length,sp,lp="";for(rp=0;rp<ap;rp+=1)np[rp].ty==="sh"&&(sp=np[rp].ks.k,lp+=buildShapeString(sp,sp.i.length,!0,_d));return lp},ITextElement.prototype.updateDocumentData=function(_d,np){this.textProperty.updateDocumentData(_d,np)},ITextElement.prototype.canResizeFont=function(_d){this.textProperty.canResizeFont(_d)},ITextElement.prototype.setMinimumFontSize=function(_d){this.textProperty.setMinimumFontSize(_d)},ITextElement.prototype.applyTextPropertiesToMatrix=function(_d,np,rp,ap,sp){switch(_d.ps&&np.translate(_d.ps[0],_d.ps[1]+_d.ascent,0),np.translate(0,-_d.ls,0),_d.j){case 1:np.translate(_d.justifyOffset+(_d.boxWidth-_d.lineWidths[rp]),0,0);break;case 2:np.translate(_d.justifyOffset+(_d.boxWidth-_d.lineWidths[rp])/2,0,0);break}np.translate(ap,sp,0)},ITextElement.prototype.buildColor=function(_d){return"rgb("+Math.round(_d[0]*255)+","+Math.round(_d[1]*255)+","+Math.round(_d[2]*255)+")"},ITextElement.prototype.emptyProp=new LetterProps,ITextElement.prototype.destroy=function(){},ITextElement.prototype.validateText=function(){(this.textProperty._mdf||this.textProperty._isFirstFrame)&&(this.buildNewText(),this.textProperty._isFirstFrame=!1,this.textProperty._mdf=!1)};var emptyShapeData={shapes:[]};function SVGTextLottieElement(_d,np,rp){this.textSpans=[],this.renderType="svg",this.initElement(_d,np,rp)}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],SVGTextLottieElement),SVGTextLottieElement.prototype.createContent=function(){this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=createNS("text"))},SVGTextLottieElement.prototype.buildTextContents=function(_d){for(var np=0,rp=_d.length,ap=[],sp="";np<rp;)_d[np]==="\r"||_d[np]===""?(ap.push(sp),sp=""):sp+=_d[np],np+=1;return ap.push(sp),ap},SVGTextLottieElement.prototype.buildShapeData=function(_d,np){if(_d.shapes&&_d.shapes.length){var rp=_d.shapes[0];if(rp.it){var ap=rp.it[rp.it.length-1];ap.s&&(ap.s.k[0]=np,ap.s.k[1]=np)}}return _d},SVGTextLottieElement.prototype.buildNewText=function(){this.addDynamicProperty(this);var _d,np,rp=this.textProperty.currentData;this.renderedLetters=createSizedArray(rp?rp.l.length:0),rp.fc?this.layerElement.setAttribute("fill",this.buildColor(rp.fc)):this.layerElement.setAttribute("fill","rgba(0,0,0,0)"),rp.sc&&(this.layerElement.setAttribute("stroke",this.buildColor(rp.sc)),this.layerElement.setAttribute("stroke-width",rp.sw)),this.layerElement.setAttribute("font-size",rp.finalSize);var ap=this.globalData.fontManager.getFontByName(rp.f);if(ap.fClass)this.layerElement.setAttribute("class",ap.fClass);else{this.layerElement.setAttribute("font-family",ap.fFamily);var sp=rp.fWeight,lp=rp.fStyle;this.layerElement.setAttribute("font-style",lp),this.layerElement.setAttribute("font-weight",sp)}this.layerElement.setAttribute("aria-label",rp.t);var up=rp.l||[],cp=!!this.globalData.fontManager.chars;np=up.length;var dp,fp=this.mHelper,pp="",hp=this.data.singleShape,mp=0,gp=0,vp=!0,xp=rp.tr*.001*rp.finalSize;if(hp&&!cp&&!rp.sz){var Sp=this.textContainer,yp="start";switch(rp.j){case 1:yp="end";break;case 2:yp="middle";break;default:yp="start";break}Sp.setAttribute("text-anchor",yp),Sp.setAttribute("letter-spacing",xp);var bp=this.buildTextContents(rp.finalText);for(np=bp.length,gp=rp.ps?rp.ps[1]+rp.ascent:0,_d=0;_d<np;_d+=1)dp=this.textSpans[_d].span||createNS("tspan"),dp.textContent=bp[_d],dp.setAttribute("x",0),dp.setAttribute("y",gp),dp.style.display="inherit",Sp.appendChild(dp),this.textSpans[_d]||(this.textSpans[_d]={span:null,glyph:null}),this.textSpans[_d].span=dp,gp+=rp.finalLineHeight;this.layerElement.appendChild(Sp)}else{var Ep=this.textSpans.length,wp;for(_d=0;_d<np;_d+=1){if(this.textSpans[_d]||(this.textSpans[_d]={span:null,childSpan:null,glyph:null}),!cp||!hp||_d===0){if(dp=Ep>_d?this.textSpans[_d].span:createNS(cp?"g":"text"),Ep<=_d){if(dp.setAttribute("stroke-linecap","butt"),dp.setAttribute("stroke-linejoin","round"),dp.setAttribute("stroke-miterlimit","4"),this.textSpans[_d].span=dp,cp){var _p=createNS("g");dp.appendChild(_p),this.textSpans[_d].childSpan=_p}this.textSpans[_d].span=dp,this.layerElement.appendChild(dp)}dp.style.display="inherit"}if(fp.reset(),hp&&(up[_d].n&&(mp=-xp,gp+=rp.yOffset,gp+=vp?1:0,vp=!1),this.applyTextPropertiesToMatrix(rp,fp,up[_d].line,mp,gp),mp+=up[_d].l||0,mp+=xp),cp){wp=this.globalData.fontManager.getCharData(rp.finalText[_d],ap.fStyle,this.globalData.fontManager.getFontByName(rp.f).fFamily);var Cp;if(wp.t===1)Cp=new SVGCompElement(wp.data,this.globalData,this);else{var $p=emptyShapeData;wp.data&&wp.data.shapes&&($p=this.buildShapeData(wp.data,rp.finalSize)),Cp=new SVGShapeElement($p,this.globalData,this)}if(this.textSpans[_d].glyph){var Rp=this.textSpans[_d].glyph;this.textSpans[_d].childSpan.removeChild(Rp.layerElement),Rp.destroy()}this.textSpans[_d].glyph=Cp,Cp._debug=!0,Cp.prepareFrame(0),Cp.renderFrame(),this.textSpans[_d].childSpan.appendChild(Cp.layerElement),wp.t===1&&this.textSpans[_d].childSpan.setAttribute("transform","scale("+rp.finalSize/100+","+rp.finalSize/100+")")}else hp&&dp.setAttribute("transform","translate("+fp.props[12]+","+fp.props[13]+")"),dp.textContent=up[_d].val,dp.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve")}hp&&dp&&dp.setAttribute("d",pp)}for(;_d<this.textSpans.length;)this.textSpans[_d].span.style.display="none",_d+=1;this._sizeChanged=!0},SVGTextLottieElement.prototype.sourceRectAtTime=function(){if(this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderInnerContent(),this._sizeChanged){this._sizeChanged=!1;var _d=this.layerElement.getBBox();this.bbox={top:_d.y,left:_d.x,width:_d.width,height:_d.height}}return this.bbox},SVGTextLottieElement.prototype.getValue=function(){var _d,np=this.textSpans.length,rp;for(this.renderedFrame=this.comp.renderedFrame,_d=0;_d<np;_d+=1)rp=this.textSpans[_d].glyph,rp&&(rp.prepareFrame(this.comp.renderedFrame-this.data.st),rp._mdf&&(this._mdf=!0))},SVGTextLottieElement.prototype.renderInnerContent=function(){if(this.validateText(),(!this.data.singleShape||this._mdf)&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){this._sizeChanged=!0;var _d,np,rp=this.textAnimator.renderedLetters,ap=this.textProperty.currentData.l;np=ap.length;var sp,lp,up;for(_d=0;_d<np;_d+=1)ap[_d].n||(sp=rp[_d],lp=this.textSpans[_d].span,up=this.textSpans[_d].glyph,up&&up.renderFrame(),sp._mdf.m&&lp.setAttribute("transform",sp.m),sp._mdf.o&&lp.setAttribute("opacity",sp.o),sp._mdf.sw&&lp.setAttribute("stroke-width",sp.sw),sp._mdf.sc&&lp.setAttribute("stroke",sp.sc),sp._mdf.fc&&lp.setAttribute("fill",sp.fc))}};function ISolidElement(_d,np,rp){this.initElement(_d,np,rp)}extendPrototype([IImageElement],ISolidElement),ISolidElement.prototype.createContent=function(){var _d=createNS("rect");_d.setAttribute("width",this.data.sw),_d.setAttribute("height",this.data.sh),_d.setAttribute("fill",this.data.sc),this.layerElement.appendChild(_d)};function NullElement(_d,np,rp){this.initFrame(),this.initBaseData(_d,np,rp),this.initFrame(),this.initTransform(_d,np,rp),this.initHierarchy()}NullElement.prototype.prepareFrame=function(_d){this.prepareProperties(_d,!0)},NullElement.prototype.renderFrame=function(){},NullElement.prototype.getBaseElement=function(){return null},NullElement.prototype.destroy=function(){},NullElement.prototype.sourceRectAtTime=function(){},NullElement.prototype.hide=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement],NullElement);function SVGRendererBase(){}extendPrototype([BaseRenderer],SVGRendererBase),SVGRendererBase.prototype.createNull=function(_d){return new NullElement(_d,this.globalData,this)},SVGRendererBase.prototype.createShape=function(_d){return new SVGShapeElement(_d,this.globalData,this)},SVGRendererBase.prototype.createText=function(_d){return new SVGTextLottieElement(_d,this.globalData,this)},SVGRendererBase.prototype.createImage=function(_d){return new IImageElement(_d,this.globalData,this)},SVGRendererBase.prototype.createSolid=function(_d){return new ISolidElement(_d,this.globalData,this)},SVGRendererBase.prototype.configAnimation=function(_d){this.svgElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.svgElement.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),this.renderConfig.viewBoxSize?this.svgElement.setAttribute("viewBox",this.renderConfig.viewBoxSize):this.svgElement.setAttribute("viewBox","0 0 "+_d.w+" "+_d.h),this.renderConfig.viewBoxOnly||(this.svgElement.setAttribute("width",_d.w),this.svgElement.setAttribute("height",_d.h),this.svgElement.style.width="100%",this.svgElement.style.height="100%",this.svgElement.style.transform="translate3d(0,0,0)",this.svgElement.style.contentVisibility=this.renderConfig.contentVisibility),this.renderConfig.width&&this.svgElement.setAttribute("width",this.renderConfig.width),this.renderConfig.height&&this.svgElement.setAttribute("height",this.renderConfig.height),this.renderConfig.className&&this.svgElement.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.svgElement.setAttribute("id",this.renderConfig.id),this.renderConfig.focusable!==void 0&&this.svgElement.setAttribute("focusable",this.renderConfig.focusable),this.svgElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.svgElement);var np=this.globalData.defs;this.setupGlobalData(_d,np),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.data=_d;var rp=createNS("clipPath"),ap=createNS("rect");ap.setAttribute("width",_d.w),ap.setAttribute("height",_d.h),ap.setAttribute("x",0),ap.setAttribute("y",0);var sp=createElementID();rp.setAttribute("id",sp),rp.appendChild(ap),this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+sp+")"),np.appendChild(rp),this.layers=_d.layers,this.elements=createSizedArray(_d.layers.length)},SVGRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.layerElement=null,this.globalData.defs=null;var _d,np=this.layers?this.layers.length:0;for(_d=0;_d<np;_d+=1)this.elements[_d]&&this.elements[_d].destroy&&this.elements[_d].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRendererBase.prototype.updateContainerSize=function(){},SVGRendererBase.prototype.findIndexByInd=function(_d){var np=0,rp=this.layers.length;for(np=0;np<rp;np+=1)if(this.layers[np].ind===_d)return np;return-1},SVGRendererBase.prototype.buildItem=function(_d){var np=this.elements;if(!(np[_d]||this.layers[_d].ty===99)){np[_d]=!0;var rp=this.createItem(this.layers[_d]);if(np[_d]=rp,getExpressionsPlugin()&&(this.layers[_d].ty===0&&this.globalData.projectInterface.registerComposition(rp),rp.initExpressions()),this.appendElementInPos(rp,_d),this.layers[_d].tt){var ap="tp"in this.layers[_d]?this.findIndexByInd(this.layers[_d].tp):_d-1;if(ap===-1)return;if(!this.elements[ap]||this.elements[ap]===!0)this.buildItem(ap),this.addPendingElement(rp);else{var sp=np[ap],lp=sp.getMatte(this.layers[_d].tt);rp.setMatte(lp)}}}},SVGRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var _d=this.pendingElements.pop();if(_d.checkParenting(),_d.data.tt)for(var np=0,rp=this.elements.length;np<rp;){if(this.elements[np]===_d){var ap="tp"in _d.data?this.findIndexByInd(_d.data.tp):np-1,sp=this.elements[ap],lp=sp.getMatte(this.layers[np].tt);_d.setMatte(lp);break}np+=1}}},SVGRendererBase.prototype.renderFrame=function(_d){if(!(this.renderedFrame===_d||this.destroyed)){_d===null?_d=this.renderedFrame:this.renderedFrame=_d,this.globalData.frameNum=_d,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=_d,this.globalData._mdf=!1;var np,rp=this.layers.length;for(this.completeLayers||this.checkLayers(_d),np=rp-1;np>=0;np-=1)(this.completeLayers||this.elements[np])&&this.elements[np].prepareFrame(_d-this.layers[np].st);if(this.globalData._mdf)for(np=0;np<rp;np+=1)(this.completeLayers||this.elements[np])&&this.elements[np].renderFrame()}},SVGRendererBase.prototype.appendElementInPos=function(_d,np){var rp=_d.getBaseElement();if(rp){for(var ap=0,sp;ap<np;)this.elements[ap]&&this.elements[ap]!==!0&&this.elements[ap].getBaseElement()&&(sp=this.elements[ap].getBaseElement()),ap+=1;sp?this.layerElement.insertBefore(rp,sp):this.layerElement.appendChild(rp)}},SVGRendererBase.prototype.hide=function(){this.layerElement.style.display="none"},SVGRendererBase.prototype.show=function(){this.layerElement.style.display="block"};function ICompElement(){}extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement,RenderableDOMElement],ICompElement),ICompElement.prototype.initElement=function(_d,np,rp){this.initFrame(),this.initBaseData(_d,np,rp),this.initTransform(_d,np,rp),this.initRenderable(),this.initHierarchy(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),(this.data.xt||!np.progressiveLoad)&&this.buildAllItems(),this.hide()},ICompElement.prototype.prepareFrame=function(_d){if(this._mdf=!1,this.prepareRenderableFrame(_d),this.prepareProperties(_d,this.isInRange),!(!this.isInRange&&!this.data.xt)){if(this.tm._placeholder)this.renderedFrame=_d/this.data.sr;else{var np=this.tm.v;np===this.data.op&&(np=this.data.op-1),this.renderedFrame=np}var rp,ap=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),rp=ap-1;rp>=0;rp-=1)(this.completeLayers||this.elements[rp])&&(this.elements[rp].prepareFrame(this.renderedFrame-this.layers[rp].st),this.elements[rp]._mdf&&(this._mdf=!0))}},ICompElement.prototype.renderInnerContent=function(){var _d,np=this.layers.length;for(_d=0;_d<np;_d+=1)(this.completeLayers||this.elements[_d])&&this.elements[_d].renderFrame()},ICompElement.prototype.setElements=function(_d){this.elements=_d},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroyElements=function(){var _d,np=this.layers.length;for(_d=0;_d<np;_d+=1)this.elements[_d]&&this.elements[_d].destroy()},ICompElement.prototype.destroy=function(){this.destroyElements(),this.destroyBaseElement()};function SVGCompElement(_d,np,rp){this.layers=_d.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(_d,np,rp),this.tm=_d.tm?PropertyFactory.getProp(this,_d.tm,0,np.frameRate,this):{_placeholder:!0}}extendPrototype([SVGRendererBase,ICompElement,SVGBaseElement],SVGCompElement),SVGCompElement.prototype.createComp=function(_d){return new SVGCompElement(_d,this.globalData,this)};function SVGRenderer(_d,np){this.animationItem=_d,this.layers=null,this.renderedFrame=-1,this.svgElement=createNS("svg");var rp="";if(np&&np.title){var ap=createNS("title"),sp=createElementID();ap.setAttribute("id",sp),ap.textContent=np.title,this.svgElement.appendChild(ap),rp+=sp}if(np&&np.description){var lp=createNS("desc"),up=createElementID();lp.setAttribute("id",up),lp.textContent=np.description,this.svgElement.appendChild(lp),rp+=" "+up}rp&&this.svgElement.setAttribute("aria-labelledby",rp);var cp=createNS("defs");this.svgElement.appendChild(cp);var dp=createNS("g");this.svgElement.appendChild(dp),this.layerElement=dp,this.renderConfig={preserveAspectRatio:np&&np.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:np&&np.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:np&&np.contentVisibility||"visible",progressiveLoad:np&&np.progressiveLoad||!1,hideOnTransparent:!(np&&np.hideOnTransparent===!1),viewBoxOnly:np&&np.viewBoxOnly||!1,viewBoxSize:np&&np.viewBoxSize||!1,className:np&&np.className||"",id:np&&np.id||"",focusable:np&&np.focusable,filterSize:{width:np&&np.filterSize&&np.filterSize.width||"100%",height:np&&np.filterSize&&np.filterSize.height||"100%",x:np&&np.filterSize&&np.filterSize.x||"0%",y:np&&np.filterSize&&np.filterSize.y||"0%"},width:np&&np.width,height:np&&np.height,runExpressions:!np||np.runExpressions===void 0||np.runExpressions},this.globalData={_mdf:!1,frameNum:-1,defs:cp,renderConfig:this.renderConfig},this.elements=[],this.pendingElements=[],this.destroyed=!1,this.rendererType="svg"}extendPrototype([SVGRendererBase],SVGRenderer),SVGRenderer.prototype.createComp=function(_d){return new SVGCompElement(_d,this.globalData,this)};function ShapeTransformManager(){this.sequences={},this.sequenceList=[],this.transform_key_count=0}ShapeTransformManager.prototype={addTransformSequence:function(np){var rp,ap=np.length,sp="_";for(rp=0;rp<ap;rp+=1)sp+=np[rp].transform.key+"_";var lp=this.sequences[sp];return lp||(lp={transforms:[].concat(np),finalTransform:new Matrix,_mdf:!1},this.sequences[sp]=lp,this.sequenceList.push(lp)),lp},processSequence:function(np,rp){for(var ap=0,sp=np.transforms.length,lp=rp;ap<sp&&!rp;){if(np.transforms[ap].transform.mProps._mdf){lp=!0;break}ap+=1}if(lp)for(np.finalTransform.reset(),ap=sp-1;ap>=0;ap-=1)np.finalTransform.multiply(np.transforms[ap].transform.mProps.v);np._mdf=lp},processSequences:function(np){var rp,ap=this.sequenceList.length;for(rp=0;rp<ap;rp+=1)this.processSequence(this.sequenceList[rp],np)},getNewKey:function(){return this.transform_key_count+=1,"_"+this.transform_key_count}};var lumaLoader=function(){var np="__lottie_element_luma_buffer",rp=null,ap=null,sp=null;function lp(){var dp=createNS("svg"),fp=createNS("filter"),pp=createNS("feColorMatrix");return fp.setAttribute("id",np),pp.setAttribute("type","matrix"),pp.setAttribute("color-interpolation-filters","sRGB"),pp.setAttribute("values","0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0"),fp.appendChild(pp),dp.appendChild(fp),dp.setAttribute("id",np+"_svg"),featureSupport.svgLumaHidden&&(dp.style.display="none"),dp}function up(){rp||(sp=lp(),document.body.appendChild(sp),rp=createTag("canvas"),ap=rp.getContext("2d"),ap.filter="url(#"+np+")",ap.fillStyle="rgba(0,0,0,0)",ap.fillRect(0,0,1,1))}function cp(dp){return rp||up(),rp.width=dp.width,rp.height=dp.height,ap.filter="url(#"+np+")",rp}return{load:up,get:cp}};function createCanvas(_d,np){if(featureSupport.offscreenCanvas)return new OffscreenCanvas(_d,np);var rp=createTag("canvas");return rp.width=_d,rp.height=np,rp}var assetLoader=function(){return{loadLumaCanvas:lumaLoader.load,getLumaCanvas:lumaLoader.get,createCanvas}}(),registeredEffects={};function CVEffects(_d){var np,rp=_d.data.ef?_d.data.ef.length:0;this.filters=[];var ap;for(np=0;np<rp;np+=1){ap=null;var sp=_d.data.ef[np].ty;if(registeredEffects[sp]){var lp=registeredEffects[sp].effect;ap=new lp(_d.effectsManager.effectElements[np],_d)}ap&&this.filters.push(ap)}this.filters.length&&_d.addRenderableComponent(this)}CVEffects.prototype.renderFrame=function(_d){var np,rp=this.filters.length;for(np=0;np<rp;np+=1)this.filters[np].renderFrame(_d)},CVEffects.prototype.getEffects=function(_d){var np,rp=this.filters.length,ap=[];for(np=0;np<rp;np+=1)this.filters[np].type===_d&&ap.push(this.filters[np]);return ap};function registerEffect(_d,np){registeredEffects[_d]={effect:np}}function CVMaskElement(_d,np){this.data=_d,this.element=np,this.masksProperties=this.data.masksProperties||[],this.viewData=createSizedArray(this.masksProperties.length);var rp,ap=this.masksProperties.length,sp=!1;for(rp=0;rp<ap;rp+=1)this.masksProperties[rp].mode!=="n"&&(sp=!0),this.viewData[rp]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[rp],3);this.hasMasks=sp,sp&&this.element.addRenderableComponent(this)}CVMaskElement.prototype.renderFrame=function(){if(this.hasMasks){var _d=this.element.finalTransform.mat,np=this.element.canvasContext,rp,ap=this.masksProperties.length,sp,lp,up;for(np.beginPath(),rp=0;rp<ap;rp+=1)if(this.masksProperties[rp].mode!=="n"){this.masksProperties[rp].inv&&(np.moveTo(0,0),np.lineTo(this.element.globalData.compSize.w,0),np.lineTo(this.element.globalData.compSize.w,this.element.globalData.compSize.h),np.lineTo(0,this.element.globalData.compSize.h),np.lineTo(0,0)),up=this.viewData[rp].v,sp=_d.applyToPointArray(up.v[0][0],up.v[0][1],0),np.moveTo(sp[0],sp[1]);var cp,dp=up._length;for(cp=1;cp<dp;cp+=1)lp=_d.applyToTriplePoints(up.o[cp-1],up.i[cp],up.v[cp]),np.bezierCurveTo(lp[0],lp[1],lp[2],lp[3],lp[4],lp[5]);lp=_d.applyToTriplePoints(up.o[cp-1],up.i[0],up.v[0]),np.bezierCurveTo(lp[0],lp[1],lp[2],lp[3],lp[4],lp[5])}this.element.globalData.renderer.save(!0),np.clip()}},CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty,CVMaskElement.prototype.destroy=function(){this.element=null};function CVBaseElement(){}var operationsMap={1:"source-in",2:"source-out",3:"source-in",4:"source-out"};CVBaseElement.prototype={createElements:function(){},initRendererElement:function(){},createContainerElements:function(){if(this.data.tt>=1){this.buffers=[];var np=this.globalData.canvasContext,rp=assetLoader.createCanvas(np.canvas.width,np.canvas.height);this.buffers.push(rp);var ap=assetLoader.createCanvas(np.canvas.width,np.canvas.height);this.buffers.push(ap),this.data.tt>=3&&!document._isProxy&&assetLoader.loadLumaCanvas()}this.canvasContext=this.globalData.canvasContext,this.transformCanvas=this.globalData.transformCanvas,this.renderableEffectsManager=new CVEffects(this),this.searchEffectTransforms()},createContent:function(){},setBlendMode:function(){var np=this.globalData;if(np.blendMode!==this.data.bm){np.blendMode=this.data.bm;var rp=getBlendMode(this.data.bm);np.canvasContext.globalCompositeOperation=rp}},createRenderableComponents:function(){this.maskManager=new CVMaskElement(this.data,this),this.transformEffects=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT)},hideElement:function(){!this.hidden&&(!this.isInRange||this.isTransparent)&&(this.hidden=!0)},showElement:function(){this.isInRange&&!this.isTransparent&&(this.hidden=!1,this._isFirstFrame=!0,this.maskManager._isFirstFrame=!0)},clearCanvas:function(np){np.clearRect(this.transformCanvas.tx,this.transformCanvas.ty,this.transformCanvas.w*this.transformCanvas.sx,this.transformCanvas.h*this.transformCanvas.sy)},prepareLayer:function(){if(this.data.tt>=1){var np=this.buffers[0],rp=np.getContext("2d");this.clearCanvas(rp),rp.drawImage(this.canvasContext.canvas,0,0),this.currentTransform=this.canvasContext.getTransform(),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform)}},exitLayer:function(){if(this.data.tt>=1){var np=this.buffers[1],rp=np.getContext("2d");this.clearCanvas(rp),rp.drawImage(this.canvasContext.canvas,0,0),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform);var ap=this.comp.getElementById("tp"in this.data?this.data.tp:this.data.ind-1);if(ap.renderFrame(!0),this.canvasContext.setTransform(1,0,0,1,0,0),this.data.tt>=3&&!document._isProxy){var sp=assetLoader.getLumaCanvas(this.canvasContext.canvas),lp=sp.getContext("2d");lp.drawImage(this.canvasContext.canvas,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.drawImage(sp,0,0)}this.canvasContext.globalCompositeOperation=operationsMap[this.data.tt],this.canvasContext.drawImage(np,0,0),this.canvasContext.globalCompositeOperation="destination-over",this.canvasContext.drawImage(this.buffers[0],0,0),this.canvasContext.setTransform(this.currentTransform),this.canvasContext.globalCompositeOperation="source-over"}},renderFrame:function(np){if(!(this.hidden||this.data.hd)&&!(this.data.td===1&&!np)){this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.setBlendMode();var rp=this.data.ty===0;this.prepareLayer(),this.globalData.renderer.save(rp),this.globalData.renderer.ctxTransform(this.finalTransform.localMat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.localOpacity),this.renderInnerContent(),this.globalData.renderer.restore(rp),this.exitLayer(),this.maskManager.hasMasks&&this.globalData.renderer.restore(!0),this._isFirstFrame&&(this._isFirstFrame=!1)}},destroy:function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager.destroy()},mHelper:new Matrix},CVBaseElement.prototype.hide=CVBaseElement.prototype.hideElement,CVBaseElement.prototype.show=CVBaseElement.prototype.showElement;function CVShapeData(_d,np,rp,ap){this.styledShapes=[],this.tr=[0,0,0,0,0,0];var sp=4;np.ty==="rc"?sp=5:np.ty==="el"?sp=6:np.ty==="sr"&&(sp=7),this.sh=ShapePropertyFactory.getShapeProp(_d,np,sp,_d);var lp,up=rp.length,cp;for(lp=0;lp<up;lp+=1)rp[lp].closed||(cp={transforms:ap.addTransformSequence(rp[lp].transforms),trNodes:[]},this.styledShapes.push(cp),rp[lp].elements.push(cp))}CVShapeData.prototype.setAsAnimated=SVGShapeData.prototype.setAsAnimated;function CVShapeElement(_d,np,rp){this.shapes=[],this.shapesData=_d.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this.transformsManager=new ShapeTransformManager,this.initElement(_d,np,rp)}extendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement],CVShapeElement),CVShapeElement.prototype.initElement=RenderableDOMElement.prototype.initElement,CVShapeElement.prototype.transformHelper={opacity:1,_opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[])},CVShapeElement.prototype.createStyleElement=function(_d,np){var rp={data:_d,type:_d.ty,preTransforms:this.transformsManager.addTransformSequence(np),transforms:[],elements:[],closed:_d.hd===!0},ap={};if(_d.ty==="fl"||_d.ty==="st"?(ap.c=PropertyFactory.getProp(this,_d.c,1,255,this),ap.c.k||(rp.co="rgb("+bmFloor(ap.c.v[0])+","+bmFloor(ap.c.v[1])+","+bmFloor(ap.c.v[2])+")")):(_d.ty==="gf"||_d.ty==="gs")&&(ap.s=PropertyFactory.getProp(this,_d.s,1,null,this),ap.e=PropertyFactory.getProp(this,_d.e,1,null,this),ap.h=PropertyFactory.getProp(this,_d.h||{k:0},0,.01,this),ap.a=PropertyFactory.getProp(this,_d.a||{k:0},0,degToRads,this),ap.g=new GradientProperty(this,_d.g,this)),ap.o=PropertyFactory.getProp(this,_d.o,0,.01,this),_d.ty==="st"||_d.ty==="gs"){if(rp.lc=lineCapEnum[_d.lc||2],rp.lj=lineJoinEnum[_d.lj||2],_d.lj==1&&(rp.ml=_d.ml),ap.w=PropertyFactory.getProp(this,_d.w,0,null,this),ap.w.k||(rp.wi=ap.w.v),_d.d){var sp=new DashProperty(this,_d.d,"canvas",this);ap.d=sp,ap.d.k||(rp.da=ap.d.dashArray,rp.do=ap.d.dashoffset[0])}}else rp.r=_d.r===2?"evenodd":"nonzero";return this.stylesList.push(rp),ap.style=rp,ap},CVShapeElement.prototype.createGroupElement=function(){var _d={it:[],prevViewData:[]};return _d},CVShapeElement.prototype.createTransformElement=function(_d){var np={transform:{opacity:1,_opMdf:!1,key:this.transformsManager.getNewKey(),op:PropertyFactory.getProp(this,_d.o,0,.01,this),mProps:TransformPropertyFactory.getTransformProperty(this,_d,this)}};return np},CVShapeElement.prototype.createShapeElement=function(_d){var np=new CVShapeData(this,_d,this.stylesList,this.transformsManager);return this.shapes.push(np),this.addShapeToModifiers(np),np},CVShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var _d,np=this.itemsData.length;for(_d=0;_d<np;_d+=1)this.prevViewData[_d]=this.itemsData[_d];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),np=this.dynamicProperties.length,_d=0;_d<np;_d+=1)this.dynamicProperties[_d].getValue();this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame)},CVShapeElement.prototype.addTransformToStyleList=function(_d){var np,rp=this.stylesList.length;for(np=0;np<rp;np+=1)this.stylesList[np].closed||this.stylesList[np].transforms.push(_d)},CVShapeElement.prototype.removeTransformFromStyleList=function(){var _d,np=this.stylesList.length;for(_d=0;_d<np;_d+=1)this.stylesList[_d].closed||this.stylesList[_d].transforms.pop()},CVShapeElement.prototype.closeStyles=function(_d){var np,rp=_d.length;for(np=0;np<rp;np+=1)_d[np].closed=!0},CVShapeElement.prototype.searchShapes=function(_d,np,rp,ap,sp){var lp,up=_d.length-1,cp,dp,fp=[],pp=[],hp,mp,gp,vp=[].concat(sp);for(lp=up;lp>=0;lp-=1){if(hp=this.searchProcessedElement(_d[lp]),hp?np[lp]=rp[hp-1]:_d[lp]._shouldRender=ap,_d[lp].ty==="fl"||_d[lp].ty==="st"||_d[lp].ty==="gf"||_d[lp].ty==="gs")hp?np[lp].style.closed=!1:np[lp]=this.createStyleElement(_d[lp],vp),fp.push(np[lp].style);else if(_d[lp].ty==="gr"){if(!hp)np[lp]=this.createGroupElement(_d[lp]);else for(dp=np[lp].it.length,cp=0;cp<dp;cp+=1)np[lp].prevViewData[cp]=np[lp].it[cp];this.searchShapes(_d[lp].it,np[lp].it,np[lp].prevViewData,ap,vp)}else _d[lp].ty==="tr"?(hp||(gp=this.createTransformElement(_d[lp]),np[lp]=gp),vp.push(np[lp]),this.addTransformToStyleList(np[lp])):_d[lp].ty==="sh"||_d[lp].ty==="rc"||_d[lp].ty==="el"||_d[lp].ty==="sr"?hp||(np[lp]=this.createShapeElement(_d[lp])):_d[lp].ty==="tm"||_d[lp].ty==="rd"||_d[lp].ty==="pb"||_d[lp].ty==="zz"||_d[lp].ty==="op"?(hp?(mp=np[lp],mp.closed=!1):(mp=ShapeModifiers.getModifier(_d[lp].ty),mp.init(this,_d[lp]),np[lp]=mp,this.shapeModifiers.push(mp)),pp.push(mp)):_d[lp].ty==="rp"&&(hp?(mp=np[lp],mp.closed=!0):(mp=ShapeModifiers.getModifier(_d[lp].ty),np[lp]=mp,mp.init(this,_d,lp,np),this.shapeModifiers.push(mp),ap=!1),pp.push(mp));this.addProcessedElement(_d[lp],lp+1)}for(this.removeTransformFromStyleList(),this.closeStyles(fp),up=pp.length,lp=0;lp<up;lp+=1)pp[lp].closed=!0},CVShapeElement.prototype.renderInnerContent=function(){this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame),this.renderShape(this.transformHelper,this.shapesData,this.itemsData,!0)},CVShapeElement.prototype.renderShapeTransform=function(_d,np){(_d._opMdf||np.op._mdf||this._isFirstFrame)&&(np.opacity=_d.opacity,np.opacity*=np.op.v,np._opMdf=!0)},CVShapeElement.prototype.drawLayer=function(){var _d,np=this.stylesList.length,rp,ap,sp,lp,up,cp,dp=this.globalData.renderer,fp=this.globalData.canvasContext,pp,hp;for(_d=0;_d<np;_d+=1)if(hp=this.stylesList[_d],pp=hp.type,!((pp==="st"||pp==="gs")&&hp.wi===0||!hp.data._shouldRender||hp.coOp===0||this.globalData.currentGlobalAlpha===0)){for(dp.save(),up=hp.elements,pp==="st"||pp==="gs"?(dp.ctxStrokeStyle(pp==="st"?hp.co:hp.grd),dp.ctxLineWidth(hp.wi),dp.ctxLineCap(hp.lc),dp.ctxLineJoin(hp.lj),dp.ctxMiterLimit(hp.ml||0)):dp.ctxFillStyle(pp==="fl"?hp.co:hp.grd),dp.ctxOpacity(hp.coOp),pp!=="st"&&pp!=="gs"&&fp.beginPath(),dp.ctxTransform(hp.preTransforms.finalTransform.props),ap=up.length,rp=0;rp<ap;rp+=1){for((pp==="st"||pp==="gs")&&(fp.beginPath(),hp.da&&(fp.setLineDash(hp.da),fp.lineDashOffset=hp.do)),cp=up[rp].trNodes,lp=cp.length,sp=0;sp<lp;sp+=1)cp[sp].t==="m"?fp.moveTo(cp[sp].p[0],cp[sp].p[1]):cp[sp].t==="c"?fp.bezierCurveTo(cp[sp].pts[0],cp[sp].pts[1],cp[sp].pts[2],cp[sp].pts[3],cp[sp].pts[4],cp[sp].pts[5]):fp.closePath();(pp==="st"||pp==="gs")&&(dp.ctxStroke(),hp.da&&fp.setLineDash(this.dashResetter))}pp!=="st"&&pp!=="gs"&&this.globalData.renderer.ctxFill(hp.r),dp.restore()}},CVShapeElement.prototype.renderShape=function(_d,np,rp,ap){var sp,lp=np.length-1,up;for(up=_d,sp=lp;sp>=0;sp-=1)np[sp].ty==="tr"?(up=rp[sp].transform,this.renderShapeTransform(_d,up)):np[sp].ty==="sh"||np[sp].ty==="el"||np[sp].ty==="rc"||np[sp].ty==="sr"?this.renderPath(np[sp],rp[sp]):np[sp].ty==="fl"?this.renderFill(np[sp],rp[sp],up):np[sp].ty==="st"?this.renderStroke(np[sp],rp[sp],up):np[sp].ty==="gf"||np[sp].ty==="gs"?this.renderGradientFill(np[sp],rp[sp],up):np[sp].ty==="gr"?this.renderShape(up,np[sp].it,rp[sp].it):np[sp].ty;ap&&this.drawLayer()},CVShapeElement.prototype.renderStyledShape=function(_d,np){if(this._isFirstFrame||np._mdf||_d.transforms._mdf){var rp=_d.trNodes,ap=np.paths,sp,lp,up,cp=ap._length;rp.length=0;var dp=_d.transforms.finalTransform;for(up=0;up<cp;up+=1){var fp=ap.shapes[up];if(fp&&fp.v){for(lp=fp._length,sp=1;sp<lp;sp+=1)sp===1&&rp.push({t:"m",p:dp.applyToPointArray(fp.v[0][0],fp.v[0][1],0)}),rp.push({t:"c",pts:dp.applyToTriplePoints(fp.o[sp-1],fp.i[sp],fp.v[sp])});lp===1&&rp.push({t:"m",p:dp.applyToPointArray(fp.v[0][0],fp.v[0][1],0)}),fp.c&&lp&&(rp.push({t:"c",pts:dp.applyToTriplePoints(fp.o[sp-1],fp.i[0],fp.v[0])}),rp.push({t:"z"}))}}_d.trNodes=rp}},CVShapeElement.prototype.renderPath=function(_d,np){if(_d.hd!==!0&&_d._shouldRender){var rp,ap=np.styledShapes.length;for(rp=0;rp<ap;rp+=1)this.renderStyledShape(np.styledShapes[rp],np.sh)}},CVShapeElement.prototype.renderFill=function(_d,np,rp){var ap=np.style;(np.c._mdf||this._isFirstFrame)&&(ap.co="rgb("+bmFloor(np.c.v[0])+","+bmFloor(np.c.v[1])+","+bmFloor(np.c.v[2])+")"),(np.o._mdf||rp._opMdf||this._isFirstFrame)&&(ap.coOp=np.o.v*rp.opacity)},CVShapeElement.prototype.renderGradientFill=function(_d,np,rp){var ap=np.style,sp;if(!ap.grd||np.g._mdf||np.s._mdf||np.e._mdf||_d.t!==1&&(np.h._mdf||np.a._mdf)){var lp=this.globalData.canvasContext,up=np.s.v,cp=np.e.v;if(_d.t===1)sp=lp.createLinearGradient(up[0],up[1],cp[0],cp[1]);else{var dp=Math.sqrt(Math.pow(up[0]-cp[0],2)+Math.pow(up[1]-cp[1],2)),fp=Math.atan2(cp[1]-up[1],cp[0]-up[0]),pp=np.h.v;pp>=1?pp=.99:pp<=-1&&(pp=-.99);var hp=dp*pp,mp=Math.cos(fp+np.a.v)*hp+up[0],gp=Math.sin(fp+np.a.v)*hp+up[1];sp=lp.createRadialGradient(mp,gp,0,up[0],up[1],dp)}var vp,xp=_d.g.p,Sp=np.g.c,yp=1;for(vp=0;vp<xp;vp+=1)np.g._hasOpacity&&np.g._collapsable&&(yp=np.g.o[vp*2+1]),sp.addColorStop(Sp[vp*4]/100,"rgba("+Sp[vp*4+1]+","+Sp[vp*4+2]+","+Sp[vp*4+3]+","+yp+")");ap.grd=sp}ap.coOp=np.o.v*rp.opacity},CVShapeElement.prototype.renderStroke=function(_d,np,rp){var ap=np.style,sp=np.d;sp&&(sp._mdf||this._isFirstFrame)&&(ap.da=sp.dashArray,ap.do=sp.dashoffset[0]),(np.c._mdf||this._isFirstFrame)&&(ap.co="rgb("+bmFloor(np.c.v[0])+","+bmFloor(np.c.v[1])+","+bmFloor(np.c.v[2])+")"),(np.o._mdf||rp._opMdf||this._isFirstFrame)&&(ap.coOp=np.o.v*rp.opacity),(np.w._mdf||this._isFirstFrame)&&(ap.wi=np.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.itemsData.length=0};function CVTextElement(_d,np,rp){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this.initElement(_d,np,rp)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement],CVTextElement),CVTextElement.prototype.tHelper=createTag("canvas").getContext("2d"),CVTextElement.prototype.buildNewText=function(){var _d=this.textProperty.currentData;this.renderedLetters=createSizedArray(_d.l?_d.l.length:0);var np=!1;_d.fc?(np=!0,this.values.fill=this.buildColor(_d.fc)):this.values.fill="rgba(0,0,0,0)",this.fill=np;var rp=!1;_d.sc&&(rp=!0,this.values.stroke=this.buildColor(_d.sc),this.values.sWidth=_d.sw);var ap=this.globalData.fontManager.getFontByName(_d.f),sp,lp,up=_d.l,cp=this.mHelper;this.stroke=rp,this.values.fValue=_d.finalSize+"px "+this.globalData.fontManager.getFontByName(_d.f).fFamily,lp=_d.finalText.length;var dp,fp,pp,hp,mp,gp,vp,xp,Sp,yp,bp=this.data.singleShape,Ep=_d.tr*.001*_d.finalSize,wp=0,_p=0,Cp=!0,$p=0;for(sp=0;sp<lp;sp+=1){dp=this.globalData.fontManager.getCharData(_d.finalText[sp],ap.fStyle,this.globalData.fontManager.getFontByName(_d.f).fFamily),fp=dp&&dp.data||{},cp.reset(),bp&&up[sp].n&&(wp=-Ep,_p+=_d.yOffset,_p+=Cp?1:0,Cp=!1),mp=fp.shapes?fp.shapes[0].it:[],vp=mp.length,cp.scale(_d.finalSize/100,_d.finalSize/100),bp&&this.applyTextPropertiesToMatrix(_d,cp,up[sp].line,wp,_p),Sp=createSizedArray(vp-1);var Rp=0;for(gp=0;gp<vp;gp+=1)if(mp[gp].ty==="sh"){for(hp=mp[gp].ks.k.i.length,xp=mp[gp].ks.k,yp=[],pp=1;pp<hp;pp+=1)pp===1&&yp.push(cp.applyToX(xp.v[0][0],xp.v[0][1],0),cp.applyToY(xp.v[0][0],xp.v[0][1],0)),yp.push(cp.applyToX(xp.o[pp-1][0],xp.o[pp-1][1],0),cp.applyToY(xp.o[pp-1][0],xp.o[pp-1][1],0),cp.applyToX(xp.i[pp][0],xp.i[pp][1],0),cp.applyToY(xp.i[pp][0],xp.i[pp][1],0),cp.applyToX(xp.v[pp][0],xp.v[pp][1],0),cp.applyToY(xp.v[pp][0],xp.v[pp][1],0));yp.push(cp.applyToX(xp.o[pp-1][0],xp.o[pp-1][1],0),cp.applyToY(xp.o[pp-1][0],xp.o[pp-1][1],0),cp.applyToX(xp.i[0][0],xp.i[0][1],0),cp.applyToY(xp.i[0][0],xp.i[0][1],0),cp.applyToX(xp.v[0][0],xp.v[0][1],0),cp.applyToY(xp.v[0][0],xp.v[0][1],0)),Sp[Rp]=yp,Rp+=1}bp&&(wp+=up[sp].l,wp+=Ep),this.textSpans[$p]?this.textSpans[$p].elem=Sp:this.textSpans[$p]={elem:Sp},$p+=1}},CVTextElement.prototype.renderInnerContent=function(){this.validateText();var _d=this.canvasContext;_d.font=this.values.fValue,this.globalData.renderer.ctxLineCap("butt"),this.globalData.renderer.ctxLineJoin("miter"),this.globalData.renderer.ctxMiterLimit(4),this.data.singleShape||this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);var np,rp,ap,sp,lp,up,cp=this.textAnimator.renderedLetters,dp=this.textProperty.currentData.l;rp=dp.length;var fp,pp=null,hp=null,mp=null,gp,vp,xp=this.globalData.renderer;for(np=0;np<rp;np+=1)if(!dp[np].n){if(fp=cp[np],fp&&(xp.save(),xp.ctxTransform(fp.p),xp.ctxOpacity(fp.o)),this.fill){for(fp&&fp.fc?pp!==fp.fc&&(xp.ctxFillStyle(fp.fc),pp=fp.fc):pp!==this.values.fill&&(pp=this.values.fill,xp.ctxFillStyle(this.values.fill)),gp=this.textSpans[np].elem,sp=gp.length,this.globalData.canvasContext.beginPath(),ap=0;ap<sp;ap+=1)for(vp=gp[ap],up=vp.length,this.globalData.canvasContext.moveTo(vp[0],vp[1]),lp=2;lp<up;lp+=6)this.globalData.canvasContext.bezierCurveTo(vp[lp],vp[lp+1],vp[lp+2],vp[lp+3],vp[lp+4],vp[lp+5]);this.globalData.canvasContext.closePath(),xp.ctxFill()}if(this.stroke){for(fp&&fp.sw?mp!==fp.sw&&(mp=fp.sw,xp.ctxLineWidth(fp.sw)):mp!==this.values.sWidth&&(mp=this.values.sWidth,xp.ctxLineWidth(this.values.sWidth)),fp&&fp.sc?hp!==fp.sc&&(hp=fp.sc,xp.ctxStrokeStyle(fp.sc)):hp!==this.values.stroke&&(hp=this.values.stroke,xp.ctxStrokeStyle(this.values.stroke)),gp=this.textSpans[np].elem,sp=gp.length,this.globalData.canvasContext.beginPath(),ap=0;ap<sp;ap+=1)for(vp=gp[ap],up=vp.length,this.globalData.canvasContext.moveTo(vp[0],vp[1]),lp=2;lp<up;lp+=6)this.globalData.canvasContext.bezierCurveTo(vp[lp],vp[lp+1],vp[lp+2],vp[lp+3],vp[lp+4],vp[lp+5]);this.globalData.canvasContext.closePath(),xp.ctxStroke()}fp&&this.globalData.renderer.restore()}};function CVImageElement(_d,np,rp){this.assetData=np.getAssetData(_d.refId),this.img=np.imageLoader.getAsset(this.assetData),this.initElement(_d,np,rp)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVImageElement),CVImageElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVImageElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVImageElement.prototype.createContent=function(){if(this.img.width&&(this.assetData.w!==this.img.width||this.assetData.h!==this.img.height)){var _d=createTag("canvas");_d.width=this.assetData.w,_d.height=this.assetData.h;var np=_d.getContext("2d"),rp=this.img.width,ap=this.img.height,sp=rp/ap,lp=this.assetData.w/this.assetData.h,up,cp,dp=this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio;sp>lp&&dp==="xMidYMid slice"||sp<lp&&dp!=="xMidYMid slice"?(cp=ap,up=cp*lp):(up=rp,cp=up/lp),np.drawImage(this.img,(rp-up)/2,(ap-cp)/2,up,cp,0,0,this.assetData.w,this.assetData.h),this.img=_d}},CVImageElement.prototype.renderInnerContent=function(){this.canvasContext.drawImage(this.img,0,0)},CVImageElement.prototype.destroy=function(){this.img=null};function CVSolidElement(_d,np,rp){this.initElement(_d,np,rp)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVSolidElement),CVSolidElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVSolidElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVSolidElement.prototype.renderInnerContent=function(){this.globalData.renderer.ctxFillStyle(this.data.sc),this.globalData.renderer.ctxFillRect(0,0,this.data.sw,this.data.sh)};function CanvasRendererBase(){}extendPrototype([BaseRenderer],CanvasRendererBase),CanvasRendererBase.prototype.createShape=function(_d){return new CVShapeElement(_d,this.globalData,this)},CanvasRendererBase.prototype.createText=function(_d){return new CVTextElement(_d,this.globalData,this)},CanvasRendererBase.prototype.createImage=function(_d){return new CVImageElement(_d,this.globalData,this)},CanvasRendererBase.prototype.createSolid=function(_d){return new CVSolidElement(_d,this.globalData,this)},CanvasRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,CanvasRendererBase.prototype.ctxTransform=function(_d){_d[0]===1&&_d[1]===0&&_d[4]===0&&_d[5]===1&&_d[12]===0&&_d[13]===0||this.canvasContext.transform(_d[0],_d[1],_d[4],_d[5],_d[12],_d[13])},CanvasRendererBase.prototype.ctxOpacity=function(_d){this.canvasContext.globalAlpha*=_d<0?0:_d},CanvasRendererBase.prototype.ctxFillStyle=function(_d){this.canvasContext.fillStyle=_d},CanvasRendererBase.prototype.ctxStrokeStyle=function(_d){this.canvasContext.strokeStyle=_d},CanvasRendererBase.prototype.ctxLineWidth=function(_d){this.canvasContext.lineWidth=_d},CanvasRendererBase.prototype.ctxLineCap=function(_d){this.canvasContext.lineCap=_d},CanvasRendererBase.prototype.ctxLineJoin=function(_d){this.canvasContext.lineJoin=_d},CanvasRendererBase.prototype.ctxMiterLimit=function(_d){this.canvasContext.miterLimit=_d},CanvasRendererBase.prototype.ctxFill=function(_d){this.canvasContext.fill(_d)},CanvasRendererBase.prototype.ctxFillRect=function(_d,np,rp,ap){this.canvasContext.fillRect(_d,np,rp,ap)},CanvasRendererBase.prototype.ctxStroke=function(){this.canvasContext.stroke()},CanvasRendererBase.prototype.reset=function(){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}this.contextData.reset()},CanvasRendererBase.prototype.save=function(){this.canvasContext.save()},CanvasRendererBase.prototype.restore=function(_d){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}_d&&(this.globalData.blendMode="source-over"),this.contextData.restore(_d)},CanvasRendererBase.prototype.configAnimation=function(_d){if(this.animationItem.wrapper){this.animationItem.container=createTag("canvas");var np=this.animationItem.container.style;np.width="100%",np.height="100%";var rp="0px 0px 0px";np.transformOrigin=rp,np.mozTransformOrigin=rp,np.webkitTransformOrigin=rp,np["-webkit-transform"]=rp,np.contentVisibility=this.renderConfig.contentVisibility,this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d"),this.renderConfig.className&&this.animationItem.container.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.animationItem.container.setAttribute("id",this.renderConfig.id)}else this.canvasContext=this.renderConfig.context;this.contextData.setContext(this.canvasContext),this.data=_d,this.layers=_d.layers,this.transformCanvas={w:_d.w,h:_d.h,sx:0,sy:0,tx:0,ty:0},this.setupGlobalData(_d,document.body),this.globalData.canvasContext=this.canvasContext,this.globalData.renderer=this,this.globalData.isDashed=!1,this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.transformCanvas=this.transformCanvas,this.elements=createSizedArray(_d.layers.length),this.updateContainerSize()},CanvasRendererBase.prototype.updateContainerSize=function(_d,np){this.reset();var rp,ap;_d?(rp=_d,ap=np,this.canvasContext.canvas.width=rp,this.canvasContext.canvas.height=ap):(this.animationItem.wrapper&&this.animationItem.container?(rp=this.animationItem.wrapper.offsetWidth,ap=this.animationItem.wrapper.offsetHeight):(rp=this.canvasContext.canvas.width,ap=this.canvasContext.canvas.height),this.canvasContext.canvas.width=rp*this.renderConfig.dpr,this.canvasContext.canvas.height=ap*this.renderConfig.dpr);var sp,lp;if(this.renderConfig.preserveAspectRatio.indexOf("meet")!==-1||this.renderConfig.preserveAspectRatio.indexOf("slice")!==-1){var up=this.renderConfig.preserveAspectRatio.split(" "),cp=up[1]||"meet",dp=up[0]||"xMidYMid",fp=dp.substr(0,4),pp=dp.substr(4);sp=rp/ap,lp=this.transformCanvas.w/this.transformCanvas.h,lp>sp&&cp==="meet"||lp<sp&&cp==="slice"?(this.transformCanvas.sx=rp/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=rp/(this.transformCanvas.w/this.renderConfig.dpr)):(this.transformCanvas.sx=ap/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.sy=ap/(this.transformCanvas.h/this.renderConfig.dpr)),fp==="xMid"&&(lp<sp&&cp==="meet"||lp>sp&&cp==="slice")?this.transformCanvas.tx=(rp-this.transformCanvas.w*(ap/this.transformCanvas.h))/2*this.renderConfig.dpr:fp==="xMax"&&(lp<sp&&cp==="meet"||lp>sp&&cp==="slice")?this.transformCanvas.tx=(rp-this.transformCanvas.w*(ap/this.transformCanvas.h))*this.renderConfig.dpr:this.transformCanvas.tx=0,pp==="YMid"&&(lp>sp&&cp==="meet"||lp<sp&&cp==="slice")?this.transformCanvas.ty=(ap-this.transformCanvas.h*(rp/this.transformCanvas.w))/2*this.renderConfig.dpr:pp==="YMax"&&(lp>sp&&cp==="meet"||lp<sp&&cp==="slice")?this.transformCanvas.ty=(ap-this.transformCanvas.h*(rp/this.transformCanvas.w))*this.renderConfig.dpr:this.transformCanvas.ty=0}else this.renderConfig.preserveAspectRatio==="none"?(this.transformCanvas.sx=rp/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=ap/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0):(this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr,this.transformCanvas.tx=0,this.transformCanvas.ty=0);this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1],this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip(),this.renderFrame(this.renderedFrame,!0)},CanvasRendererBase.prototype.destroy=function(){this.renderConfig.clearCanvas&&this.animationItem.wrapper&&(this.animationItem.wrapper.innerText="");var _d,np=this.layers?this.layers.length:0;for(_d=np-1;_d>=0;_d-=1)this.elements[_d]&&this.elements[_d].destroy&&this.elements[_d].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRendererBase.prototype.renderFrame=function(_d,np){if(!(this.renderedFrame===_d&&this.renderConfig.clearCanvas===!0&&!np||this.destroyed||_d===-1)){this.renderedFrame=_d,this.globalData.frameNum=_d-this.animationItem._isFirstFrame,this.globalData.frameId+=1,this.globalData._mdf=!this.renderConfig.clearCanvas||np,this.globalData.projectInterface.currentFrame=_d;var rp,ap=this.layers.length;for(this.completeLayers||this.checkLayers(_d),rp=ap-1;rp>=0;rp-=1)(this.completeLayers||this.elements[rp])&&this.elements[rp].prepareFrame(_d-this.layers[rp].st);if(this.globalData._mdf){for(this.renderConfig.clearCanvas===!0?this.canvasContext.clearRect(0,0,this.transformCanvas.w,this.transformCanvas.h):this.save(),rp=ap-1;rp>=0;rp-=1)(this.completeLayers||this.elements[rp])&&this.elements[rp].renderFrame();this.renderConfig.clearCanvas!==!0&&this.restore()}}},CanvasRendererBase.prototype.buildItem=function(_d){var np=this.elements;if(!(np[_d]||this.layers[_d].ty===99)){var rp=this.createItem(this.layers[_d],this,this.globalData);np[_d]=rp,rp.initExpressions()}},CanvasRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var _d=this.pendingElements.pop();_d.checkParenting()}},CanvasRendererBase.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRendererBase.prototype.show=function(){this.animationItem.container.style.display="block"};function CanvasContext(){this.opacity=-1,this.transform=createTypedArray("float32",16),this.fillStyle="",this.strokeStyle="",this.lineWidth="",this.lineCap="",this.lineJoin="",this.miterLimit="",this.id=Math.random()}function CVContextData(){this.stack=[],this.cArrPos=0,this.cTr=new Matrix;var _d,np=15;for(_d=0;_d<np;_d+=1){var rp=new CanvasContext;this.stack[_d]=rp}this._length=np,this.nativeContext=null,this.transformMat=new Matrix,this.currentOpacity=1,this.currentFillStyle="",this.appliedFillStyle="",this.currentStrokeStyle="",this.appliedStrokeStyle="",this.currentLineWidth="",this.appliedLineWidth="",this.currentLineCap="",this.appliedLineCap="",this.currentLineJoin="",this.appliedLineJoin="",this.appliedMiterLimit="",this.currentMiterLimit=""}CVContextData.prototype.duplicate=function(){var _d=this._length*2,np=0;for(np=this._length;np<_d;np+=1)this.stack[np]=new CanvasContext;this._length=_d},CVContextData.prototype.reset=function(){this.cArrPos=0,this.cTr.reset(),this.stack[this.cArrPos].opacity=1},CVContextData.prototype.restore=function(_d){this.cArrPos-=1;var np=this.stack[this.cArrPos],rp=np.transform,ap,sp=this.cTr.props;for(ap=0;ap<16;ap+=1)sp[ap]=rp[ap];if(_d){this.nativeContext.restore();var lp=this.stack[this.cArrPos+1];this.appliedFillStyle=lp.fillStyle,this.appliedStrokeStyle=lp.strokeStyle,this.appliedLineWidth=lp.lineWidth,this.appliedLineCap=lp.lineCap,this.appliedLineJoin=lp.lineJoin,this.appliedMiterLimit=lp.miterLimit}this.nativeContext.setTransform(rp[0],rp[1],rp[4],rp[5],rp[12],rp[13]),(_d||np.opacity!==-1&&this.currentOpacity!==np.opacity)&&(this.nativeContext.globalAlpha=np.opacity,this.currentOpacity=np.opacity),this.currentFillStyle=np.fillStyle,this.currentStrokeStyle=np.strokeStyle,this.currentLineWidth=np.lineWidth,this.currentLineCap=np.lineCap,this.currentLineJoin=np.lineJoin,this.currentMiterLimit=np.miterLimit},CVContextData.prototype.save=function(_d){_d&&this.nativeContext.save();var np=this.cTr.props;this._length<=this.cArrPos&&this.duplicate();var rp=this.stack[this.cArrPos],ap;for(ap=0;ap<16;ap+=1)rp.transform[ap]=np[ap];this.cArrPos+=1;var sp=this.stack[this.cArrPos];sp.opacity=rp.opacity,sp.fillStyle=rp.fillStyle,sp.strokeStyle=rp.strokeStyle,sp.lineWidth=rp.lineWidth,sp.lineCap=rp.lineCap,sp.lineJoin=rp.lineJoin,sp.miterLimit=rp.miterLimit},CVContextData.prototype.setOpacity=function(_d){this.stack[this.cArrPos].opacity=_d},CVContextData.prototype.setContext=function(_d){this.nativeContext=_d},CVContextData.prototype.fillStyle=function(_d){this.stack[this.cArrPos].fillStyle!==_d&&(this.currentFillStyle=_d,this.stack[this.cArrPos].fillStyle=_d)},CVContextData.prototype.strokeStyle=function(_d){this.stack[this.cArrPos].strokeStyle!==_d&&(this.currentStrokeStyle=_d,this.stack[this.cArrPos].strokeStyle=_d)},CVContextData.prototype.lineWidth=function(_d){this.stack[this.cArrPos].lineWidth!==_d&&(this.currentLineWidth=_d,this.stack[this.cArrPos].lineWidth=_d)},CVContextData.prototype.lineCap=function(_d){this.stack[this.cArrPos].lineCap!==_d&&(this.currentLineCap=_d,this.stack[this.cArrPos].lineCap=_d)},CVContextData.prototype.lineJoin=function(_d){this.stack[this.cArrPos].lineJoin!==_d&&(this.currentLineJoin=_d,this.stack[this.cArrPos].lineJoin=_d)},CVContextData.prototype.miterLimit=function(_d){this.stack[this.cArrPos].miterLimit!==_d&&(this.currentMiterLimit=_d,this.stack[this.cArrPos].miterLimit=_d)},CVContextData.prototype.transform=function(_d){this.transformMat.cloneFromProps(_d);var np=this.cTr;this.transformMat.multiply(np),np.cloneFromProps(this.transformMat.props);var rp=np.props;this.nativeContext.setTransform(rp[0],rp[1],rp[4],rp[5],rp[12],rp[13])},CVContextData.prototype.opacity=function(_d){var np=this.stack[this.cArrPos].opacity;np*=_d<0?0:_d,this.stack[this.cArrPos].opacity!==np&&(this.currentOpacity!==_d&&(this.nativeContext.globalAlpha=_d,this.currentOpacity=_d),this.stack[this.cArrPos].opacity=np)},CVContextData.prototype.fill=function(_d){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fill(_d)},CVContextData.prototype.fillRect=function(_d,np,rp,ap){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fillRect(_d,np,rp,ap)},CVContextData.prototype.stroke=function(){this.appliedStrokeStyle!==this.currentStrokeStyle&&(this.appliedStrokeStyle=this.currentStrokeStyle,this.nativeContext.strokeStyle=this.appliedStrokeStyle),this.appliedLineWidth!==this.currentLineWidth&&(this.appliedLineWidth=this.currentLineWidth,this.nativeContext.lineWidth=this.appliedLineWidth),this.appliedLineCap!==this.currentLineCap&&(this.appliedLineCap=this.currentLineCap,this.nativeContext.lineCap=this.appliedLineCap),this.appliedLineJoin!==this.currentLineJoin&&(this.appliedLineJoin=this.currentLineJoin,this.nativeContext.lineJoin=this.appliedLineJoin),this.appliedMiterLimit!==this.currentMiterLimit&&(this.appliedMiterLimit=this.currentMiterLimit,this.nativeContext.miterLimit=this.appliedMiterLimit),this.nativeContext.stroke()};function CVCompElement(_d,np,rp){this.completeLayers=!1,this.layers=_d.layers,this.pendingElements=[],this.elements=createSizedArray(this.layers.length),this.initElement(_d,np,rp),this.tm=_d.tm?PropertyFactory.getProp(this,_d.tm,0,np.frameRate,this):{_placeholder:!0}}extendPrototype([CanvasRendererBase,ICompElement,CVBaseElement],CVCompElement),CVCompElement.prototype.renderInnerContent=function(){var _d=this.canvasContext;_d.beginPath(),_d.moveTo(0,0),_d.lineTo(this.data.w,0),_d.lineTo(this.data.w,this.data.h),_d.lineTo(0,this.data.h),_d.lineTo(0,0),_d.clip();var np,rp=this.layers.length;for(np=rp-1;np>=0;np-=1)(this.completeLayers||this.elements[np])&&this.elements[np].renderFrame()},CVCompElement.prototype.destroy=function(){var _d,np=this.layers.length;for(_d=np-1;_d>=0;_d-=1)this.elements[_d]&&this.elements[_d].destroy();this.layers=null,this.elements=null},CVCompElement.prototype.createComp=function(_d){return new CVCompElement(_d,this.globalData,this)};function CanvasRenderer(_d,np){this.animationItem=_d,this.renderConfig={clearCanvas:np&&np.clearCanvas!==void 0?np.clearCanvas:!0,context:np&&np.context||null,progressiveLoad:np&&np.progressiveLoad||!1,preserveAspectRatio:np&&np.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:np&&np.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:np&&np.contentVisibility||"visible",className:np&&np.className||"",id:np&&np.id||"",runExpressions:!np||np.runExpressions===void 0||np.runExpressions},this.renderConfig.dpr=np&&np.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=np&&np.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas",this.renderConfig.clearCanvas&&(this.ctxTransform=this.contextData.transform.bind(this.contextData),this.ctxOpacity=this.contextData.opacity.bind(this.contextData),this.ctxFillStyle=this.contextData.fillStyle.bind(this.contextData),this.ctxStrokeStyle=this.contextData.strokeStyle.bind(this.contextData),this.ctxLineWidth=this.contextData.lineWidth.bind(this.contextData),this.ctxLineCap=this.contextData.lineCap.bind(this.contextData),this.ctxLineJoin=this.contextData.lineJoin.bind(this.contextData),this.ctxMiterLimit=this.contextData.miterLimit.bind(this.contextData),this.ctxFill=this.contextData.fill.bind(this.contextData),this.ctxFillRect=this.contextData.fillRect.bind(this.contextData),this.ctxStroke=this.contextData.stroke.bind(this.contextData),this.save=this.contextData.save.bind(this.contextData))}extendPrototype([CanvasRendererBase],CanvasRenderer),CanvasRenderer.prototype.createComp=function(_d){return new CVCompElement(_d,this.globalData,this)};function HBaseElement(){}HBaseElement.prototype={checkBlendMode:function(){},initRendererElement:function(){this.baseElement=createTag(this.data.tg||"div"),this.data.hasMask?(this.svgElement=createNS("svg"),this.layerElement=createNS("g"),this.maskedElement=this.layerElement,this.svgElement.appendChild(this.layerElement),this.baseElement.appendChild(this.svgElement)):this.layerElement=this.baseElement,styleDiv(this.baseElement)},createContainerElements:function(){this.renderableEffectsManager=new CVEffects(this),this.transformedElement=this.baseElement,this.maskedElement=this.layerElement,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.bm!==0&&this.setBlendMode()},renderElement:function(){var np=this.transformedElement?this.transformedElement.style:{};if(this.finalTransform._matMdf){var rp=this.finalTransform.mat.toCSS();np.transform=rp,np.webkitTransform=rp}this.finalTransform._opMdf&&(np.opacity=this.finalTransform.mProp.o.v)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.layerElement=null,this.transformedElement=null,this.matteElement&&(this.matteElement=null),this.maskManager&&(this.maskManager.destroy(),this.maskManager=null)},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData)},addEffects:function(){},setMatte:function(){}},HBaseElement.prototype.getBaseElement=SVGBaseElement.prototype.getBaseElement,HBaseElement.prototype.destroyBaseElement=HBaseElement.prototype.destroy,HBaseElement.prototype.buildElementParenting=BaseRenderer.prototype.buildElementParenting;function HSolidElement(_d,np,rp){this.initElement(_d,np,rp)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],HSolidElement),HSolidElement.prototype.createContent=function(){var _d;this.data.hasMask?(_d=createNS("rect"),_d.setAttribute("width",this.data.sw),_d.setAttribute("height",this.data.sh),_d.setAttribute("fill",this.data.sc),this.svgElement.setAttribute("width",this.data.sw),this.svgElement.setAttribute("height",this.data.sh)):(_d=createTag("div"),_d.style.width=this.data.sw+"px",_d.style.height=this.data.sh+"px",_d.style.backgroundColor=this.data.sc),this.layerElement.appendChild(_d)};function HShapeElement(_d,np,rp){this.shapes=[],this.shapesData=_d.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.shapesContainer=createNS("g"),this.initElement(_d,np,rp),this.prevViewData=[],this.currentBBox={x:999999,y:-999999,h:0,w:0}}extendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement],HShapeElement),HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderInnerContent,HShapeElement.prototype.createContent=function(){var _d;if(this.baseElement.style.fontSize=0,this.data.hasMask)this.layerElement.appendChild(this.shapesContainer),_d=this.svgElement;else{_d=createNS("svg");var np=this.comp.data?this.comp.data:this.globalData.compSize;_d.setAttribute("width",np.w),_d.setAttribute("height",np.h),_d.appendChild(this.shapesContainer),this.layerElement.appendChild(_d)}this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0,[],!0),this.filterUniqueShapes(),this.shapeCont=_d},HShapeElement.prototype.getTransformedPoint=function(_d,np){var rp,ap=_d.length;for(rp=0;rp<ap;rp+=1)np=_d[rp].mProps.v.applyToPointArray(np[0],np[1],0);return np},HShapeElement.prototype.calculateShapeBoundingBox=function(_d,np){var rp=_d.sh.v,ap=_d.transformers,sp,lp=rp._length,up,cp,dp,fp;if(!(lp<=1)){for(sp=0;sp<lp-1;sp+=1)up=this.getTransformedPoint(ap,rp.v[sp]),cp=this.getTransformedPoint(ap,rp.o[sp]),dp=this.getTransformedPoint(ap,rp.i[sp+1]),fp=this.getTransformedPoint(ap,rp.v[sp+1]),this.checkBounds(up,cp,dp,fp,np);rp.c&&(up=this.getTransformedPoint(ap,rp.v[sp]),cp=this.getTransformedPoint(ap,rp.o[sp]),dp=this.getTransformedPoint(ap,rp.i[0]),fp=this.getTransformedPoint(ap,rp.v[0]),this.checkBounds(up,cp,dp,fp,np))}},HShapeElement.prototype.checkBounds=function(_d,np,rp,ap,sp){this.getBoundsOfCurve(_d,np,rp,ap);var lp=this.shapeBoundingBox;sp.x=bmMin(lp.left,sp.x),sp.xMax=bmMax(lp.right,sp.xMax),sp.y=bmMin(lp.top,sp.y),sp.yMax=bmMax(lp.bottom,sp.yMax)},HShapeElement.prototype.shapeBoundingBox={left:0,right:0,top:0,bottom:0},HShapeElement.prototype.tempBoundingBox={x:0,xMax:0,y:0,yMax:0,width:0,height:0},HShapeElement.prototype.getBoundsOfCurve=function(_d,np,rp,ap){for(var sp=[[_d[0],ap[0]],[_d[1],ap[1]]],lp,up,cp,dp,fp,pp,hp,mp=0;mp<2;++mp)up=6*_d[mp]-12*np[mp]+6*rp[mp],lp=-3*_d[mp]+9*np[mp]-9*rp[mp]+3*ap[mp],cp=3*np[mp]-3*_d[mp],up|=0,lp|=0,cp|=0,lp===0&&up===0||(lp===0?(dp=-cp/up,dp>0&&dp<1&&sp[mp].push(this.calculateF(dp,_d,np,rp,ap,mp))):(fp=up*up-4*cp*lp,fp>=0&&(pp=(-up+bmSqrt(fp))/(2*lp),pp>0&&pp<1&&sp[mp].push(this.calculateF(pp,_d,np,rp,ap,mp)),hp=(-up-bmSqrt(fp))/(2*lp),hp>0&&hp<1&&sp[mp].push(this.calculateF(hp,_d,np,rp,ap,mp)))));this.shapeBoundingBox.left=bmMin.apply(null,sp[0]),this.shapeBoundingBox.top=bmMin.apply(null,sp[1]),this.shapeBoundingBox.right=bmMax.apply(null,sp[0]),this.shapeBoundingBox.bottom=bmMax.apply(null,sp[1])},HShapeElement.prototype.calculateF=function(_d,np,rp,ap,sp,lp){return bmPow(1-_d,3)*np[lp]+3*bmPow(1-_d,2)*_d*rp[lp]+3*(1-_d)*bmPow(_d,2)*ap[lp]+bmPow(_d,3)*sp[lp]},HShapeElement.prototype.calculateBoundingBox=function(_d,np){var rp,ap=_d.length;for(rp=0;rp<ap;rp+=1)_d[rp]&&_d[rp].sh?this.calculateShapeBoundingBox(_d[rp],np):_d[rp]&&_d[rp].it?this.calculateBoundingBox(_d[rp].it,np):_d[rp]&&_d[rp].style&&_d[rp].w&&this.expandStrokeBoundingBox(_d[rp].w,np)},HShapeElement.prototype.expandStrokeBoundingBox=function(_d,np){var rp=0;if(_d.keyframes){for(var ap=0;ap<_d.keyframes.length;ap+=1){var sp=_d.keyframes[ap].s;sp>rp&&(rp=sp)}rp*=_d.mult}else rp=_d.v*_d.mult;np.x-=rp,np.xMax+=rp,np.y-=rp,np.yMax+=rp},HShapeElement.prototype.currentBoxContains=function(_d){return this.currentBBox.x<=_d.x&&this.currentBBox.y<=_d.y&&this.currentBBox.width+this.currentBBox.x>=_d.x+_d.width&&this.currentBBox.height+this.currentBBox.y>=_d.y+_d.height},HShapeElement.prototype.renderInnerContent=function(){if(this._renderShapeFrame(),!this.hidden&&(this._isFirstFrame||this._mdf)){var _d=this.tempBoundingBox,np=999999;if(_d.x=np,_d.xMax=-np,_d.y=np,_d.yMax=-np,this.calculateBoundingBox(this.itemsData,_d),_d.width=_d.xMax<_d.x?0:_d.xMax-_d.x,_d.height=_d.yMax<_d.y?0:_d.yMax-_d.y,this.currentBoxContains(_d))return;var rp=!1;if(this.currentBBox.w!==_d.width&&(this.currentBBox.w=_d.width,this.shapeCont.setAttribute("width",_d.width),rp=!0),this.currentBBox.h!==_d.height&&(this.currentBBox.h=_d.height,this.shapeCont.setAttribute("height",_d.height),rp=!0),rp||this.currentBBox.x!==_d.x||this.currentBBox.y!==_d.y){this.currentBBox.w=_d.width,this.currentBBox.h=_d.height,this.currentBBox.x=_d.x,this.currentBBox.y=_d.y,this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h);var ap=this.shapeCont.style,sp="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";ap.transform=sp,ap.webkitTransform=sp}}};function HTextElement(_d,np,rp){this.textSpans=[],this.textPaths=[],this.currentBBox={x:999999,y:-999999,h:0,w:0},this.renderType="svg",this.isMasked=!1,this.initElement(_d,np,rp)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],HTextElement),HTextElement.prototype.createContent=function(){if(this.isMasked=this.checkMasks(),this.isMasked){this.renderType="svg",this.compW=this.comp.data.w,this.compH=this.comp.data.h,this.svgElement.setAttribute("width",this.compW),this.svgElement.setAttribute("height",this.compH);var _d=createNS("g");this.maskedElement.appendChild(_d),this.innerElem=_d}else this.renderType="html",this.innerElem=this.layerElement;this.checkParenting()},HTextElement.prototype.buildNewText=function(){var _d=this.textProperty.currentData;this.renderedLetters=createSizedArray(_d.l?_d.l.length:0);var np=this.innerElem.style,rp=_d.fc?this.buildColor(_d.fc):"rgba(0,0,0,0)";np.fill=rp,np.color=rp,_d.sc&&(np.stroke=this.buildColor(_d.sc),np.strokeWidth=_d.sw+"px");var ap=this.globalData.fontManager.getFontByName(_d.f);if(!this.globalData.fontManager.chars)if(np.fontSize=_d.finalSize+"px",np.lineHeight=_d.finalSize+"px",ap.fClass)this.innerElem.className=ap.fClass;else{np.fontFamily=ap.fFamily;var sp=_d.fWeight,lp=_d.fStyle;np.fontStyle=lp,np.fontWeight=sp}var up,cp,dp=_d.l;cp=dp.length;var fp,pp,hp,mp=this.mHelper,gp,vp="",xp=0;for(up=0;up<cp;up+=1){if(this.globalData.fontManager.chars?(this.textPaths[xp]?fp=this.textPaths[xp]:(fp=createNS("path"),fp.setAttribute("stroke-linecap",lineCapEnum[1]),fp.setAttribute("stroke-linejoin",lineJoinEnum[2]),fp.setAttribute("stroke-miterlimit","4")),this.isMasked||(this.textSpans[xp]?(pp=this.textSpans[xp],hp=pp.children[0]):(pp=createTag("div"),pp.style.lineHeight=0,hp=createNS("svg"),hp.appendChild(fp),styleDiv(pp)))):this.isMasked?fp=this.textPaths[xp]?this.textPaths[xp]:createNS("text"):this.textSpans[xp]?(pp=this.textSpans[xp],fp=this.textPaths[xp]):(pp=createTag("span"),styleDiv(pp),fp=createTag("span"),styleDiv(fp),pp.appendChild(fp)),this.globalData.fontManager.chars){var Sp=this.globalData.fontManager.getCharData(_d.finalText[up],ap.fStyle,this.globalData.fontManager.getFontByName(_d.f).fFamily),yp;if(Sp?yp=Sp.data:yp=null,mp.reset(),yp&&yp.shapes&&yp.shapes.length&&(gp=yp.shapes[0].it,mp.scale(_d.finalSize/100,_d.finalSize/100),vp=this.createPathShape(mp,gp),fp.setAttribute("d",vp)),this.isMasked)this.innerElem.appendChild(fp);else{if(this.innerElem.appendChild(pp),yp&&yp.shapes){document.body.appendChild(hp);var bp=hp.getBBox();hp.setAttribute("width",bp.width+2),hp.setAttribute("height",bp.height+2),hp.setAttribute("viewBox",bp.x-1+" "+(bp.y-1)+" "+(bp.width+2)+" "+(bp.height+2));var Ep=hp.style,wp="translate("+(bp.x-1)+"px,"+(bp.y-1)+"px)";Ep.transform=wp,Ep.webkitTransform=wp,dp[up].yOffset=bp.y-1}else hp.setAttribute("width",1),hp.setAttribute("height",1);pp.appendChild(hp)}}else if(fp.textContent=dp[up].val,fp.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.isMasked)this.innerElem.appendChild(fp);else{this.innerElem.appendChild(pp);var _p=fp.style,Cp="translate3d(0,"+-_d.finalSize/1.2+"px,0)";_p.transform=Cp,_p.webkitTransform=Cp}this.isMasked?this.textSpans[xp]=fp:this.textSpans[xp]=pp,this.textSpans[xp].style.display="block",this.textPaths[xp]=fp,xp+=1}for(;xp<this.textSpans.length;)this.textSpans[xp].style.display="none",xp+=1},HTextElement.prototype.renderInnerContent=function(){this.validateText();var _d;if(this.data.singleShape){if(!this._isFirstFrame&&!this.lettersChangedFlag)return;if(this.isMasked&&this.finalTransform._matMdf){this.svgElement.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH),_d=this.svgElement.style;var np="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)";_d.transform=np,_d.webkitTransform=np}}if(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),!(!this.lettersChangedFlag&&!this.textAnimator.lettersChangedFlag)){var rp,ap,sp=0,lp=this.textAnimator.renderedLetters,up=this.textProperty.currentData.l;ap=up.length;var cp,dp,fp;for(rp=0;rp<ap;rp+=1)up[rp].n?sp+=1:(dp=this.textSpans[rp],fp=this.textPaths[rp],cp=lp[sp],sp+=1,cp._mdf.m&&(this.isMasked?dp.setAttribute("transform",cp.m):(dp.style.webkitTransform=cp.m,dp.style.transform=cp.m)),dp.style.opacity=cp.o,cp.sw&&cp._mdf.sw&&fp.setAttribute("stroke-width",cp.sw),cp.sc&&cp._mdf.sc&&fp.setAttribute("stroke",cp.sc),cp.fc&&cp._mdf.fc&&(fp.setAttribute("fill",cp.fc),fp.style.color=cp.fc));if(this.innerElem.getBBox&&!this.hidden&&(this._isFirstFrame||this._mdf)){var pp=this.innerElem.getBBox();this.currentBBox.w!==pp.width&&(this.currentBBox.w=pp.width,this.svgElement.setAttribute("width",pp.width)),this.currentBBox.h!==pp.height&&(this.currentBBox.h=pp.height,this.svgElement.setAttribute("height",pp.height));var hp=1;if(this.currentBBox.w!==pp.width+hp*2||this.currentBBox.h!==pp.height+hp*2||this.currentBBox.x!==pp.x-hp||this.currentBBox.y!==pp.y-hp){this.currentBBox.w=pp.width+hp*2,this.currentBBox.h=pp.height+hp*2,this.currentBBox.x=pp.x-hp,this.currentBBox.y=pp.y-hp,this.svgElement.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),_d=this.svgElement.style;var mp="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";_d.transform=mp,_d.webkitTransform=mp}}}};function HCameraElement(_d,np,rp){this.initFrame(),this.initBaseData(_d,np,rp),this.initHierarchy();var ap=PropertyFactory.getProp;if(this.pe=ap(this,_d.pe,0,0,this),_d.ks.p.s?(this.px=ap(this,_d.ks.p.x,1,0,this),this.py=ap(this,_d.ks.p.y,1,0,this),this.pz=ap(this,_d.ks.p.z,1,0,this)):this.p=ap(this,_d.ks.p,1,0,this),_d.ks.a&&(this.a=ap(this,_d.ks.a,1,0,this)),_d.ks.or.k.length&&_d.ks.or.k[0].to){var sp,lp=_d.ks.or.k.length;for(sp=0;sp<lp;sp+=1)_d.ks.or.k[sp].to=null,_d.ks.or.k[sp].ti=null}this.or=ap(this,_d.ks.or,1,degToRads,this),this.or.sh=!0,this.rx=ap(this,_d.ks.rx,0,degToRads,this),this.ry=ap(this,_d.ks.ry,0,degToRads,this),this.rz=ap(this,_d.ks.rz,0,degToRads,this),this.mat=new Matrix,this._prevMat=new Matrix,this._isFirstFrame=!0,this.finalTransform={mProp:this}}extendPrototype([BaseElement,FrameElement,HierarchyElement],HCameraElement),HCameraElement.prototype.setup=function(){var _d,np=this.comp.threeDElements.length,rp,ap,sp;for(_d=0;_d<np;_d+=1)if(rp=this.comp.threeDElements[_d],rp.type==="3d"){ap=rp.perspectiveElem.style,sp=rp.container.style;var lp=this.pe.v+"px",up="0px 0px 0px",cp="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";ap.perspective=lp,ap.webkitPerspective=lp,sp.transformOrigin=up,sp.mozTransformOrigin=up,sp.webkitTransformOrigin=up,ap.transform=cp,ap.webkitTransform=cp}},HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=function(){var _d=this._isFirstFrame,np,rp;if(this.hierarchy)for(rp=this.hierarchy.length,np=0;np<rp;np+=1)_d=this.hierarchy[np].finalTransform.mProp._mdf||_d;if(_d||this.pe._mdf||this.p&&this.p._mdf||this.px&&(this.px._mdf||this.py._mdf||this.pz._mdf)||this.rx._mdf||this.ry._mdf||this.rz._mdf||this.or._mdf||this.a&&this.a._mdf){if(this.mat.reset(),this.hierarchy)for(rp=this.hierarchy.length-1,np=rp;np>=0;np-=1){var ap=this.hierarchy[np].finalTransform.mProp;this.mat.translate(-ap.p.v[0],-ap.p.v[1],ap.p.v[2]),this.mat.rotateX(-ap.or.v[0]).rotateY(-ap.or.v[1]).rotateZ(ap.or.v[2]),this.mat.rotateX(-ap.rx.v).rotateY(-ap.ry.v).rotateZ(ap.rz.v),this.mat.scale(1/ap.s.v[0],1/ap.s.v[1],1/ap.s.v[2]),this.mat.translate(ap.a.v[0],ap.a.v[1],ap.a.v[2])}if(this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v),this.a){var sp;this.p?sp=[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]]:sp=[this.px.v-this.a.v[0],this.py.v-this.a.v[1],this.pz.v-this.a.v[2]];var lp=Math.sqrt(Math.pow(sp[0],2)+Math.pow(sp[1],2)+Math.pow(sp[2],2)),up=[sp[0]/lp,sp[1]/lp,sp[2]/lp],cp=Math.sqrt(up[2]*up[2]+up[0]*up[0]),dp=Math.atan2(up[1],cp),fp=Math.atan2(up[0],-up[2]);this.mat.rotateY(fp).rotateX(-dp)}this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0),this.mat.translate(0,0,this.pe.v);var pp=!this._prevMat.equals(this.mat);if((pp||this.pe._mdf)&&this.comp.threeDElements){rp=this.comp.threeDElements.length;var hp,mp,gp;for(np=0;np<rp;np+=1)if(hp=this.comp.threeDElements[np],hp.type==="3d"){if(pp){var vp=this.mat.toCSS();gp=hp.container.style,gp.transform=vp,gp.webkitTransform=vp}this.pe._mdf&&(mp=hp.perspectiveElem.style,mp.perspective=this.pe.v+"px",mp.webkitPerspective=this.pe.v+"px")}this.mat.clone(this._prevMat)}}this._isFirstFrame=!1},HCameraElement.prototype.prepareFrame=function(_d){this.prepareProperties(_d,!0)},HCameraElement.prototype.destroy=function(){},HCameraElement.prototype.getBaseElement=function(){return null};function HImageElement(_d,np,rp){this.assetData=np.getAssetData(_d.refId),this.initElement(_d,np,rp)}extendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement],HImageElement),HImageElement.prototype.createContent=function(){var _d=this.globalData.getAssetsPath(this.assetData),np=new Image;this.data.hasMask?(this.imageElem=createNS("image"),this.imageElem.setAttribute("width",this.assetData.w+"px"),this.imageElem.setAttribute("height",this.assetData.h+"px"),this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",_d),this.layerElement.appendChild(this.imageElem),this.baseElement.setAttribute("width",this.assetData.w),this.baseElement.setAttribute("height",this.assetData.h)):this.layerElement.appendChild(np),np.crossOrigin="anonymous",np.src=_d,this.data.ln&&this.baseElement.setAttribute("id",this.data.ln)};function HybridRendererBase(_d,np){this.animationItem=_d,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:np&&np.className||"",imagePreserveAspectRatio:np&&np.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(np&&np.hideOnTransparent===!1),filterSize:{width:np&&np.filterSize&&np.filterSize.width||"400%",height:np&&np.filterSize&&np.filterSize.height||"400%",x:np&&np.filterSize&&np.filterSize.x||"-100%",y:np&&np.filterSize&&np.filterSize.y||"-100%"}},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([BaseRenderer],HybridRendererBase),HybridRendererBase.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var _d=this.pendingElements.pop();_d.checkParenting()}},HybridRendererBase.prototype.appendElementInPos=function(_d,np){var rp=_d.getBaseElement();if(rp){var ap=this.layers[np];if(!ap.ddd||!this.supports3d)if(this.threeDElements)this.addTo3dContainer(rp,np);else{for(var sp=0,lp,up,cp;sp<np;)this.elements[sp]&&this.elements[sp]!==!0&&this.elements[sp].getBaseElement&&(up=this.elements[sp],cp=this.layers[sp].ddd?this.getThreeDContainerByPos(sp):up.getBaseElement(),lp=cp||lp),sp+=1;lp?(!ap.ddd||!this.supports3d)&&this.layerElement.insertBefore(rp,lp):(!ap.ddd||!this.supports3d)&&this.layerElement.appendChild(rp)}else this.addTo3dContainer(rp,np)}},HybridRendererBase.prototype.createShape=function(_d){return this.supports3d?new HShapeElement(_d,this.globalData,this):new SVGShapeElement(_d,this.globalData,this)},HybridRendererBase.prototype.createText=function(_d){return this.supports3d?new HTextElement(_d,this.globalData,this):new SVGTextLottieElement(_d,this.globalData,this)},HybridRendererBase.prototype.createCamera=function(_d){return this.camera=new HCameraElement(_d,this.globalData,this),this.camera},HybridRendererBase.prototype.createImage=function(_d){return this.supports3d?new HImageElement(_d,this.globalData,this):new IImageElement(_d,this.globalData,this)},HybridRendererBase.prototype.createSolid=function(_d){return this.supports3d?new HSolidElement(_d,this.globalData,this):new ISolidElement(_d,this.globalData,this)},HybridRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,HybridRendererBase.prototype.getThreeDContainerByPos=function(_d){for(var np=0,rp=this.threeDElements.length;np<rp;){if(this.threeDElements[np].startPos<=_d&&this.threeDElements[np].endPos>=_d)return this.threeDElements[np].perspectiveElem;np+=1}return null},HybridRendererBase.prototype.createThreeDContainer=function(_d,np){var rp=createTag("div"),ap,sp;styleDiv(rp);var lp=createTag("div");if(styleDiv(lp),np==="3d"){ap=rp.style,ap.width=this.globalData.compSize.w+"px",ap.height=this.globalData.compSize.h+"px";var up="50% 50%";ap.webkitTransformOrigin=up,ap.mozTransformOrigin=up,ap.transformOrigin=up,sp=lp.style;var cp="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";sp.transform=cp,sp.webkitTransform=cp}rp.appendChild(lp);var dp={container:lp,perspectiveElem:rp,startPos:_d,endPos:_d,type:np};return this.threeDElements.push(dp),dp},HybridRendererBase.prototype.build3dContainers=function(){var _d,np=this.layers.length,rp,ap="";for(_d=0;_d<np;_d+=1)this.layers[_d].ddd&&this.layers[_d].ty!==3?(ap!=="3d"&&(ap="3d",rp=this.createThreeDContainer(_d,"3d")),rp.endPos=Math.max(rp.endPos,_d)):(ap!=="2d"&&(ap="2d",rp=this.createThreeDContainer(_d,"2d")),rp.endPos=Math.max(rp.endPos,_d));for(np=this.threeDElements.length,_d=np-1;_d>=0;_d-=1)this.resizerElem.appendChild(this.threeDElements[_d].perspectiveElem)},HybridRendererBase.prototype.addTo3dContainer=function(_d,np){for(var rp=0,ap=this.threeDElements.length;rp<ap;){if(np<=this.threeDElements[rp].endPos){for(var sp=this.threeDElements[rp].startPos,lp;sp<np;)this.elements[sp]&&this.elements[sp].getBaseElement&&(lp=this.elements[sp].getBaseElement()),sp+=1;lp?this.threeDElements[rp].container.insertBefore(_d,lp):this.threeDElements[rp].container.appendChild(_d);break}rp+=1}},HybridRendererBase.prototype.configAnimation=function(_d){var np=createTag("div"),rp=this.animationItem.wrapper,ap=np.style;ap.width=_d.w+"px",ap.height=_d.h+"px",this.resizerElem=np,styleDiv(np),ap.transformStyle="flat",ap.mozTransformStyle="flat",ap.webkitTransformStyle="flat",this.renderConfig.className&&np.setAttribute("class",this.renderConfig.className),rp.appendChild(np),ap.overflow="hidden";var sp=createNS("svg");sp.setAttribute("width","1"),sp.setAttribute("height","1"),styleDiv(sp),this.resizerElem.appendChild(sp);var lp=createNS("defs");sp.appendChild(lp),this.data=_d,this.setupGlobalData(_d,sp),this.globalData.defs=lp,this.layers=_d.layers,this.layerElement=this.resizerElem,this.build3dContainers(),this.updateContainerSize()},HybridRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.animationItem.container=null,this.globalData.defs=null;var _d,np=this.layers?this.layers.length:0;for(_d=0;_d<np;_d+=1)this.elements[_d]&&this.elements[_d].destroy&&this.elements[_d].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},HybridRendererBase.prototype.updateContainerSize=function(){var _d=this.animationItem.wrapper.offsetWidth,np=this.animationItem.wrapper.offsetHeight,rp=_d/np,ap=this.globalData.compSize.w/this.globalData.compSize.h,sp,lp,up,cp;ap>rp?(sp=_d/this.globalData.compSize.w,lp=_d/this.globalData.compSize.w,up=0,cp=(np-this.globalData.compSize.h*(_d/this.globalData.compSize.w))/2):(sp=np/this.globalData.compSize.h,lp=np/this.globalData.compSize.h,up=(_d-this.globalData.compSize.w*(np/this.globalData.compSize.h))/2,cp=0);var dp=this.resizerElem.style;dp.webkitTransform="matrix3d("+sp+",0,0,0,0,"+lp+",0,0,0,0,1,0,"+up+","+cp+",0,1)",dp.transform=dp.webkitTransform},HybridRendererBase.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRendererBase.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRendererBase.prototype.show=function(){this.resizerElem.style.display="block"},HybridRendererBase.prototype.initItems=function(){if(this.buildAllItems(),this.camera)this.camera.setup();else{var _d=this.globalData.compSize.w,np=this.globalData.compSize.h,rp,ap=this.threeDElements.length;for(rp=0;rp<ap;rp+=1){var sp=this.threeDElements[rp].perspectiveElem.style;sp.webkitPerspective=Math.sqrt(Math.pow(_d,2)+Math.pow(np,2))+"px",sp.perspective=sp.webkitPerspective}}},HybridRendererBase.prototype.searchExtraCompositions=function(_d){var np,rp=_d.length,ap=createTag("div");for(np=0;np<rp;np+=1)if(_d[np].xt){var sp=this.createComp(_d[np],ap,this.globalData.comp,null);sp.initExpressions(),this.globalData.projectInterface.registerComposition(sp)}};function HCompElement(_d,np,rp){this.layers=_d.layers,this.supports3d=!_d.hasMask,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(_d,np,rp),this.tm=_d.tm?PropertyFactory.getProp(this,_d.tm,0,np.frameRate,this):{_placeholder:!0}}extendPrototype([HybridRendererBase,ICompElement,HBaseElement],HCompElement),HCompElement.prototype._createBaseContainerElements=HCompElement.prototype.createContainerElements,HCompElement.prototype.createContainerElements=function(){this._createBaseContainerElements(),this.data.hasMask?(this.svgElement.setAttribute("width",this.data.w),this.svgElement.setAttribute("height",this.data.h),this.transformedElement=this.baseElement):this.transformedElement=this.layerElement},HCompElement.prototype.addTo3dContainer=function(_d,np){for(var rp=0,ap;rp<np;)this.elements[rp]&&this.elements[rp].getBaseElement&&(ap=this.elements[rp].getBaseElement()),rp+=1;ap?this.layerElement.insertBefore(_d,ap):this.layerElement.appendChild(_d)},HCompElement.prototype.createComp=function(_d){return this.supports3d?new HCompElement(_d,this.globalData,this):new SVGCompElement(_d,this.globalData,this)};function HybridRenderer(_d,np){this.animationItem=_d,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:np&&np.className||"",imagePreserveAspectRatio:np&&np.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(np&&np.hideOnTransparent===!1),filterSize:{width:np&&np.filterSize&&np.filterSize.width||"400%",height:np&&np.filterSize&&np.filterSize.height||"400%",x:np&&np.filterSize&&np.filterSize.x||"-100%",y:np&&np.filterSize&&np.filterSize.y||"-100%"},runExpressions:!np||np.runExpressions===void 0||np.runExpressions},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([HybridRendererBase],HybridRenderer),HybridRenderer.prototype.createComp=function(_d){return this.supports3d?new HCompElement(_d,this.globalData,this):new SVGCompElement(_d,this.globalData,this)};var CompExpressionInterface=function(){return function(_d){function np(rp){for(var ap=0,sp=_d.layers.length;ap<sp;){if(_d.layers[ap].nm===rp||_d.layers[ap].ind===rp)return _d.elements[ap].layerInterface;ap+=1}return null}return Object.defineProperty(np,"_name",{value:_d.data.nm}),np.layer=np,np.pixelAspect=1,np.height=_d.data.h||_d.globalData.compSize.h,np.width=_d.data.w||_d.globalData.compSize.w,np.pixelAspect=1,np.frameDuration=1/_d.globalData.frameRate,np.displayStartTime=0,np.numLayers=_d.layers.length,np}}();function _typeof$2(_d){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$2=function(rp){return typeof rp}:_typeof$2=function(rp){return rp&&typeof Symbol=="function"&&rp.constructor===Symbol&&rp!==Symbol.prototype?"symbol":typeof rp},_typeof$2(_d)}function seedRandom(_d,np){var rp=this,ap=256,sp=6,lp=52,up="random",cp=np.pow(ap,sp),dp=np.pow(2,lp),fp=dp*2,pp=ap-1,hp;function mp(Ep,wp,_p){var Cp=[];wp=wp===!0?{entropy:!0}:wp||{};var $p=Sp(xp(wp.entropy?[Ep,bp(_d)]:Ep===null?yp():Ep,3),Cp),Rp=new gp(Cp),Pp=function(){for(var jp=Rp.g(sp),Mp=cp,Ap=0;jp<dp;)jp=(jp+Ap)*ap,Mp*=ap,Ap=Rp.g(1);for(;jp>=fp;)jp/=2,Mp/=2,Ap>>>=1;return(jp+Ap)/Mp};return Pp.int32=function(){return Rp.g(4)|0},Pp.quick=function(){return Rp.g(4)/4294967296},Pp.double=Pp,Sp(bp(Rp.S),_d),(wp.pass||_p||function(Op,jp,Mp,Ap){return Ap&&(Ap.S&&vp(Ap,Rp),Op.state=function(){return vp(Rp,{})}),Mp?(np[up]=Op,jp):Op})(Pp,$p,"global"in wp?wp.global:this==np,wp.state)}np["seed"+up]=mp;function gp(Ep){var wp,_p=Ep.length,Cp=this,$p=0,Rp=Cp.i=Cp.j=0,Pp=Cp.S=[];for(_p||(Ep=[_p++]);$p<ap;)Pp[$p]=$p++;for($p=0;$p<ap;$p++)Pp[$p]=Pp[Rp=pp&Rp+Ep[$p%_p]+(wp=Pp[$p])],Pp[Rp]=wp;Cp.g=function(Op){for(var jp,Mp=0,Ap=Cp.i,Dp=Cp.j,Fp=Cp.S;Op--;)jp=Fp[Ap=pp&Ap+1],Mp=Mp*ap+Fp[pp&(Fp[Ap]=Fp[Dp=pp&Dp+jp])+(Fp[Dp]=jp)];return Cp.i=Ap,Cp.j=Dp,Mp}}function vp(Ep,wp){return wp.i=Ep.i,wp.j=Ep.j,wp.S=Ep.S.slice(),wp}function xp(Ep,wp){var _p=[],Cp=_typeof$2(Ep),$p;if(wp&&Cp=="object")for($p in Ep)try{_p.push(xp(Ep[$p],wp-1))}catch{}return _p.length?_p:Cp=="string"?Ep:Ep+"\0"}function Sp(Ep,wp){for(var _p=Ep+"",Cp,$p=0;$p<_p.length;)wp[pp&$p]=pp&(Cp^=wp[pp&$p]*19)+_p.charCodeAt($p++);return bp(wp)}function yp(){try{var Ep=new Uint8Array(ap);return(rp.crypto||rp.msCrypto).getRandomValues(Ep),bp(Ep)}catch{var wp=rp.navigator,_p=wp&&wp.plugins;return[+new Date,rp,_p,rp.screen,bp(_d)]}}function bp(Ep){return String.fromCharCode.apply(0,Ep)}Sp(np.random(),_d)}function initialize$2(_d){seedRandom([],_d)}var propTypes={SHAPE:"shape"};function _typeof$1(_d){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$1=function(rp){return typeof rp}:_typeof$1=function(rp){return rp&&typeof Symbol=="function"&&rp.constructor===Symbol&&rp!==Symbol.prototype?"symbol":typeof rp},_typeof$1(_d)}var ExpressionManager=function(){var ob={},Math=BMMath,window=null,document=null,XMLHttpRequest=null,fetch=null,frames=null,_lottieGlobal={};initialize$2(BMMath);function resetFrame(){_lottieGlobal={}}function $bm_isInstanceOfArray(_d){return _d.constructor===Array||_d.constructor===Float32Array}function isNumerable(_d,np){return _d==="number"||np instanceof Number||_d==="boolean"||_d==="string"}function $bm_neg(_d){var np=_typeof$1(_d);if(np==="number"||_d instanceof Number||np==="boolean")return-_d;if($bm_isInstanceOfArray(_d)){var rp,ap=_d.length,sp=[];for(rp=0;rp<ap;rp+=1)sp[rp]=-_d[rp];return sp}return _d.propType?_d.v:-_d}var easeInBez=BezierFactory.getBezierEasing(.333,0,.833,.833,"easeIn").get,easeOutBez=BezierFactory.getBezierEasing(.167,.167,.667,1,"easeOut").get,easeInOutBez=BezierFactory.getBezierEasing(.33,0,.667,1,"easeInOut").get;function sum(_d,np){var rp=_typeof$1(_d),ap=_typeof$1(np);if(isNumerable(rp,_d)&&isNumerable(ap,np)||rp==="string"||ap==="string")return _d+np;if($bm_isInstanceOfArray(_d)&&isNumerable(ap,np))return _d=_d.slice(0),_d[0]+=np,_d;if(isNumerable(rp,_d)&&$bm_isInstanceOfArray(np))return np=np.slice(0),np[0]=_d+np[0],np;if($bm_isInstanceOfArray(_d)&&$bm_isInstanceOfArray(np)){for(var sp=0,lp=_d.length,up=np.length,cp=[];sp<lp||sp<up;)(typeof _d[sp]=="number"||_d[sp]instanceof Number)&&(typeof np[sp]=="number"||np[sp]instanceof Number)?cp[sp]=_d[sp]+np[sp]:cp[sp]=np[sp]===void 0?_d[sp]:_d[sp]||np[sp],sp+=1;return cp}return 0}var add=sum;function sub(_d,np){var rp=_typeof$1(_d),ap=_typeof$1(np);if(isNumerable(rp,_d)&&isNumerable(ap,np))return rp==="string"&&(_d=parseInt(_d,10)),ap==="string"&&(np=parseInt(np,10)),_d-np;if($bm_isInstanceOfArray(_d)&&isNumerable(ap,np))return _d=_d.slice(0),_d[0]-=np,_d;if(isNumerable(rp,_d)&&$bm_isInstanceOfArray(np))return np=np.slice(0),np[0]=_d-np[0],np;if($bm_isInstanceOfArray(_d)&&$bm_isInstanceOfArray(np)){for(var sp=0,lp=_d.length,up=np.length,cp=[];sp<lp||sp<up;)(typeof _d[sp]=="number"||_d[sp]instanceof Number)&&(typeof np[sp]=="number"||np[sp]instanceof Number)?cp[sp]=_d[sp]-np[sp]:cp[sp]=np[sp]===void 0?_d[sp]:_d[sp]||np[sp],sp+=1;return cp}return 0}function mul(_d,np){var rp=_typeof$1(_d),ap=_typeof$1(np),sp;if(isNumerable(rp,_d)&&isNumerable(ap,np))return _d*np;var lp,up;if($bm_isInstanceOfArray(_d)&&isNumerable(ap,np)){for(up=_d.length,sp=createTypedArray("float32",up),lp=0;lp<up;lp+=1)sp[lp]=_d[lp]*np;return sp}if(isNumerable(rp,_d)&&$bm_isInstanceOfArray(np)){for(up=np.length,sp=createTypedArray("float32",up),lp=0;lp<up;lp+=1)sp[lp]=_d*np[lp];return sp}return 0}function div(_d,np){var rp=_typeof$1(_d),ap=_typeof$1(np),sp;if(isNumerable(rp,_d)&&isNumerable(ap,np))return _d/np;var lp,up;if($bm_isInstanceOfArray(_d)&&isNumerable(ap,np)){for(up=_d.length,sp=createTypedArray("float32",up),lp=0;lp<up;lp+=1)sp[lp]=_d[lp]/np;return sp}if(isNumerable(rp,_d)&&$bm_isInstanceOfArray(np)){for(up=np.length,sp=createTypedArray("float32",up),lp=0;lp<up;lp+=1)sp[lp]=_d/np[lp];return sp}return 0}function mod(_d,np){return typeof _d=="string"&&(_d=parseInt(_d,10)),typeof np=="string"&&(np=parseInt(np,10)),_d%np}var $bm_sum=sum,$bm_sub=sub,$bm_mul=mul,$bm_div=div,$bm_mod=mod;function clamp(_d,np,rp){if(np>rp){var ap=rp;rp=np,np=ap}return Math.min(Math.max(_d,np),rp)}function radiansToDegrees(_d){return _d/degToRads}var radians_to_degrees=radiansToDegrees;function degreesToRadians(_d){return _d*degToRads}var degrees_to_radians=radiansToDegrees,helperLengthArray=[0,0,0,0,0,0];function length(_d,np){if(typeof _d=="number"||_d instanceof Number)return np=np||0,Math.abs(_d-np);np||(np=helperLengthArray);var rp,ap=Math.min(_d.length,np.length),sp=0;for(rp=0;rp<ap;rp+=1)sp+=Math.pow(np[rp]-_d[rp],2);return Math.sqrt(sp)}function normalize(_d){return div(_d,length(_d))}function rgbToHsl(_d){var np=_d[0],rp=_d[1],ap=_d[2],sp=Math.max(np,rp,ap),lp=Math.min(np,rp,ap),up,cp,dp=(sp+lp)/2;if(sp===lp)up=0,cp=0;else{var fp=sp-lp;switch(cp=dp>.5?fp/(2-sp-lp):fp/(sp+lp),sp){case np:up=(rp-ap)/fp+(rp<ap?6:0);break;case rp:up=(ap-np)/fp+2;break;case ap:up=(np-rp)/fp+4;break}up/=6}return[up,cp,dp,_d[3]]}function hue2rgb(_d,np,rp){return rp<0&&(rp+=1),rp>1&&(rp-=1),rp<1/6?_d+(np-_d)*6*rp:rp<1/2?np:rp<2/3?_d+(np-_d)*(2/3-rp)*6:_d}function hslToRgb(_d){var np=_d[0],rp=_d[1],ap=_d[2],sp,lp,up;if(rp===0)sp=ap,up=ap,lp=ap;else{var cp=ap<.5?ap*(1+rp):ap+rp-ap*rp,dp=2*ap-cp;sp=hue2rgb(dp,cp,np+1/3),lp=hue2rgb(dp,cp,np),up=hue2rgb(dp,cp,np-1/3)}return[sp,lp,up,_d[3]]}function linear(_d,np,rp,ap,sp){if((ap===void 0||sp===void 0)&&(ap=np,sp=rp,np=0,rp=1),rp<np){var lp=rp;rp=np,np=lp}if(_d<=np)return ap;if(_d>=rp)return sp;var up=rp===np?0:(_d-np)/(rp-np);if(!ap.length)return ap+(sp-ap)*up;var cp,dp=ap.length,fp=createTypedArray("float32",dp);for(cp=0;cp<dp;cp+=1)fp[cp]=ap[cp]+(sp[cp]-ap[cp])*up;return fp}function random(_d,np){if(np===void 0&&(_d===void 0?(_d=0,np=1):(np=_d,_d=void 0)),np.length){var rp,ap=np.length;_d||(_d=createTypedArray("float32",ap));var sp=createTypedArray("float32",ap),lp=BMMath.random();for(rp=0;rp<ap;rp+=1)sp[rp]=_d[rp]+lp*(np[rp]-_d[rp]);return sp}_d===void 0&&(_d=0);var up=BMMath.random();return _d+up*(np-_d)}function createPath(_d,np,rp,ap){var sp,lp=_d.length,up=shapePool.newElement();up.setPathData(!!ap,lp);var cp=[0,0],dp,fp;for(sp=0;sp<lp;sp+=1)dp=np&&np[sp]?np[sp]:cp,fp=rp&&rp[sp]?rp[sp]:cp,up.setTripleAt(_d[sp][0],_d[sp][1],fp[0]+_d[sp][0],fp[1]+_d[sp][1],dp[0]+_d[sp][0],dp[1]+_d[sp][1],sp,!0);return up}function initiateExpression(elem,data,property){function noOp(_d){return _d}if(!elem.globalData.renderConfig.runExpressions)return noOp;var val=data.x,needsVelocity=/velocity(?![\w\d])/.test(val),_needsRandom=val.indexOf("random")!==-1,elemType=elem.data.ty,transform,$bm_transform,content,effect,thisProperty=property;thisProperty.valueAtTime=thisProperty.getValueAtTime,Object.defineProperty(thisProperty,"value",{get:function(){return thisProperty.v}}),elem.comp.frameDuration=1/elem.comp.globalData.frameRate,elem.comp.displayStartTime=0;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,width=elem.data.sw?elem.data.sw:0,height=elem.data.sh?elem.data.sh:0,name=elem.data.nm,loopIn,loop_in,loopOut,loop_out,smooth,toWorld,fromWorld,fromComp,toComp,fromCompToSurface,position,rotation,anchorPoint,scale,thisLayer,thisComp,mask,valueAtTime,velocityAtTime,scoped_bm_rt,expression_function=eval("[function _expression_function(){"+val+";scoped_bm_rt=$bm_rt}]")[0],numKeys=property.kf?data.k.length:0,active=!this.data||this.data.hd!==!0,wiggle=(function _d(np,rp){var ap,sp,lp=this.pv.length?this.pv.length:1,up=createTypedArray("float32",lp);np=5;var cp=Math.floor(time*np);for(ap=0,sp=0;ap<cp;){for(sp=0;sp<lp;sp+=1)up[sp]+=-rp+rp*2*BMMath.random();ap+=1}var dp=time*np,fp=dp-Math.floor(dp),pp=createTypedArray("float32",lp);if(lp>1){for(sp=0;sp<lp;sp+=1)pp[sp]=this.pv[sp]+up[sp]+(-rp+rp*2*BMMath.random())*fp;return pp}return this.pv+up[0]+(-rp+rp*2*BMMath.random())*fp}).bind(this);thisProperty.loopIn&&(loopIn=thisProperty.loopIn.bind(thisProperty),loop_in=loopIn),thisProperty.loopOut&&(loopOut=thisProperty.loopOut.bind(thisProperty),loop_out=loopOut),thisProperty.smooth&&(smooth=thisProperty.smooth.bind(thisProperty));function loopInDuration(_d,np){return loopIn(_d,np,!0)}function loopOutDuration(_d,np){return loopOut(_d,np,!0)}this.getValueAtTime&&(valueAtTime=this.getValueAtTime.bind(this)),this.getVelocityAtTime&&(velocityAtTime=this.getVelocityAtTime.bind(this));var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface);function lookAt(_d,np){var rp=[np[0]-_d[0],np[1]-_d[1],np[2]-_d[2]],ap=Math.atan2(rp[0],Math.sqrt(rp[1]*rp[1]+rp[2]*rp[2]))/degToRads,sp=-Math.atan2(rp[1],rp[2])/degToRads;return[sp,ap,0]}function easeOut(_d,np,rp,ap,sp){return applyEase(easeOutBez,_d,np,rp,ap,sp)}function easeIn(_d,np,rp,ap,sp){return applyEase(easeInBez,_d,np,rp,ap,sp)}function ease(_d,np,rp,ap,sp){return applyEase(easeInOutBez,_d,np,rp,ap,sp)}function applyEase(_d,np,rp,ap,sp,lp){sp===void 0?(sp=rp,lp=ap):np=(np-rp)/(ap-rp),np>1?np=1:np<0&&(np=0);var up=_d(np);if($bm_isInstanceOfArray(sp)){var cp,dp=sp.length,fp=createTypedArray("float32",dp);for(cp=0;cp<dp;cp+=1)fp[cp]=(lp[cp]-sp[cp])*up+sp[cp];return fp}return(lp-sp)*up+sp}function nearestKey(_d){var np,rp=data.k.length,ap,sp;if(!data.k.length||typeof data.k[0]=="number")ap=0,sp=0;else if(ap=-1,_d*=elem.comp.globalData.frameRate,_d<data.k[0].t)ap=1,sp=data.k[0].t;else{for(np=0;np<rp-1;np+=1)if(_d===data.k[np].t){ap=np+1,sp=data.k[np].t;break}else if(_d>data.k[np].t&&_d<data.k[np+1].t){_d-data.k[np].t>data.k[np+1].t-_d?(ap=np+2,sp=data.k[np+1].t):(ap=np+1,sp=data.k[np].t);break}ap===-1&&(ap=np+1,sp=data.k[np].t)}var lp={};return lp.index=ap,lp.time=sp/elem.comp.globalData.frameRate,lp}function key(_d){var np,rp,ap;if(!data.k.length||typeof data.k[0]=="number")throw new Error("The property has no keyframe at index "+_d);_d-=1,np={time:data.k[_d].t/elem.comp.globalData.frameRate,value:[]};var sp=Object.prototype.hasOwnProperty.call(data.k[_d],"s")?data.k[_d].s:data.k[_d-1].e;for(ap=sp.length,rp=0;rp<ap;rp+=1)np[rp]=sp[rp],np.value[rp]=sp[rp];return np}function framesToTime(_d,np){return np||(np=elem.comp.globalData.frameRate),_d/np}function timeToFrames(_d,np){return!_d&&_d!==0&&(_d=time),np||(np=elem.comp.globalData.frameRate),_d*np}function seedRandom(_d){BMMath.seedrandom(randSeed+_d)}function sourceRectAtTime(){return elem.sourceRectAtTime()}function substring(_d,np){return typeof value=="string"?np===void 0?value.substring(_d):value.substring(_d,np):""}function substr(_d,np){return typeof value=="string"?np===void 0?value.substr(_d):value.substr(_d,np):""}function posterizeTime(_d){time=_d===0?0:Math.floor(time*_d)/_d,value=valueAtTime(time)}var time,velocity,value,text,textIndex,textTotal,selectorValue,index=elem.data.ind,hasParent=!!(elem.hierarchy&&elem.hierarchy.length),parent,randSeed=Math.floor(Math.random()*1e6),globalData=elem.globalData;function executeExpression(_d){return value=_d,this.frameExpressionId===elem.globalData.frameId&&this.propType!=="textSelector"?value:(this.propType==="textSelector"&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),thisLayer||(text=elem.layerInterface.text,thisLayer=elem.layerInterface,thisComp=elem.comp.compInterface,toWorld=thisLayer.toWorld.bind(thisLayer),fromWorld=thisLayer.fromWorld.bind(thisLayer),fromComp=thisLayer.fromComp.bind(thisLayer),toComp=thisLayer.toComp.bind(thisLayer),mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null,fromCompToSurface=fromComp),transform||(transform=elem.layerInterface("ADBE Transform Group"),$bm_transform=transform,transform&&(anchorPoint=transform.anchorPoint)),elemType===4&&!content&&(content=thisLayer("ADBE Root Vectors Group")),effect||(effect=thisLayer(4)),hasParent=!!(elem.hierarchy&&elem.hierarchy.length),hasParent&&!parent&&(parent=elem.hierarchy[0].layerInterface),time=this.comp.renderedFrame/this.comp.globalData.frameRate,_needsRandom&&seedRandom(randSeed+time),needsVelocity&&(velocity=velocityAtTime(time)),expression_function(),this.frameExpressionId=elem.globalData.frameId,scoped_bm_rt=scoped_bm_rt.propType===propTypes.SHAPE?scoped_bm_rt.v:scoped_bm_rt,scoped_bm_rt)}return executeExpression.__preventDeadCodeRemoval=[$bm_transform,anchorPoint,time,velocity,inPoint,outPoint,width,height,name,loop_in,loop_out,smooth,toComp,fromCompToSurface,toWorld,fromWorld,mask,position,rotation,scale,thisComp,numKeys,active,wiggle,loopInDuration,loopOutDuration,comp,lookAt,easeOut,easeIn,ease,nearestKey,key,text,textIndex,textTotal,selectorValue,framesToTime,timeToFrames,sourceRectAtTime,substring,substr,posterizeTime,index,globalData],executeExpression}return ob.initiateExpression=initiateExpression,ob.__preventDeadCodeRemoval=[window,document,XMLHttpRequest,fetch,frames,$bm_neg,add,$bm_sum,$bm_sub,$bm_mul,$bm_div,$bm_mod,clamp,radians_to_degrees,degreesToRadians,degrees_to_radians,normalize,rgbToHsl,hslToRgb,linear,random,createPath,_lottieGlobal],ob.resetFrame=resetFrame,ob}(),Expressions=function(){var _d={};_d.initExpressions=np,_d.resetFrame=ExpressionManager.resetFrame;function np(rp){var ap=0,sp=[];function lp(){ap+=1}function up(){ap-=1,ap===0&&dp()}function cp(fp){sp.indexOf(fp)===-1&&sp.push(fp)}function dp(){var fp,pp=sp.length;for(fp=0;fp<pp;fp+=1)sp[fp].release();sp.length=0}rp.renderer.compInterface=CompExpressionInterface(rp.renderer),rp.renderer.globalData.projectInterface.registerComposition(rp.renderer),rp.renderer.globalData.pushExpression=lp,rp.renderer.globalData.popExpression=up,rp.renderer.globalData.registerExpressionProperty=cp}return _d}(),MaskManagerInterface=function(){function _d(rp,ap){this._mask=rp,this._data=ap}Object.defineProperty(_d.prototype,"maskPath",{get:function(){return this._mask.prop.k&&this._mask.prop.getValue(),this._mask.prop}}),Object.defineProperty(_d.prototype,"maskOpacity",{get:function(){return this._mask.op.k&&this._mask.op.getValue(),this._mask.op.v*100}});var np=function(ap){var sp=createSizedArray(ap.viewData.length),lp,up=ap.viewData.length;for(lp=0;lp<up;lp+=1)sp[lp]=new _d(ap.viewData[lp],ap.masksProperties[lp]);var cp=function(fp){for(lp=0;lp<up;){if(ap.masksProperties[lp].nm===fp)return sp[lp];lp+=1}return null};return cp};return np}(),ExpressionPropertyInterface=function(){var _d={pv:0,v:0,mult:1},np={pv:[0,0,0],v:[0,0,0],mult:1};function rp(up,cp,dp){Object.defineProperty(up,"velocity",{get:function(){return cp.getVelocityAtTime(cp.comp.currentFrame)}}),up.numKeys=cp.keyframes?cp.keyframes.length:0,up.key=function(fp){if(!up.numKeys)return 0;var pp="";"s"in cp.keyframes[fp-1]?pp=cp.keyframes[fp-1].s:"e"in cp.keyframes[fp-2]?pp=cp.keyframes[fp-2].e:pp=cp.keyframes[fp-2].s;var hp=dp==="unidimensional"?new Number(pp):Object.assign({},pp);return hp.time=cp.keyframes[fp-1].t/cp.elem.comp.globalData.frameRate,hp.value=dp==="unidimensional"?pp[0]:pp,hp},up.valueAtTime=cp.getValueAtTime,up.speedAtTime=cp.getSpeedAtTime,up.velocityAtTime=cp.getVelocityAtTime,up.propertyGroup=cp.propertyGroup}function ap(up){(!up||!("pv"in up))&&(up=_d);var cp=1/up.mult,dp=up.pv*cp,fp=new Number(dp);return fp.value=dp,rp(fp,up,"unidimensional"),function(){return up.k&&up.getValue(),dp=up.v*cp,fp.value!==dp&&(fp=new Number(dp),fp.value=dp,rp(fp,up,"unidimensional")),fp}}function sp(up){(!up||!("pv"in up))&&(up=np);var cp=1/up.mult,dp=up.data&&up.data.l||up.pv.length,fp=createTypedArray("float32",dp),pp=createTypedArray("float32",dp);return fp.value=pp,rp(fp,up,"multidimensional"),function(){up.k&&up.getValue();for(var hp=0;hp<dp;hp+=1)pp[hp]=up.v[hp]*cp,fp[hp]=pp[hp];return fp}}function lp(){return _d}return function(up){return up?up.propType==="unidimensional"?ap(up):sp(up):lp}}(),TransformExpressionInterface=function(){return function(_d){function np(up){switch(up){case"scale":case"Scale":case"ADBE Scale":case 6:return np.scale;case"rotation":case"Rotation":case"ADBE Rotation":case"ADBE Rotate Z":case 10:return np.rotation;case"ADBE Rotate X":return np.xRotation;case"ADBE Rotate Y":return np.yRotation;case"position":case"Position":case"ADBE Position":case 2:return np.position;case"ADBE Position_0":return np.xPosition;case"ADBE Position_1":return np.yPosition;case"ADBE Position_2":return np.zPosition;case"anchorPoint":case"AnchorPoint":case"Anchor Point":case"ADBE AnchorPoint":case 1:return np.anchorPoint;case"opacity":case"Opacity":case 11:return np.opacity;default:return null}}Object.defineProperty(np,"rotation",{get:ExpressionPropertyInterface(_d.r||_d.rz)}),Object.defineProperty(np,"zRotation",{get:ExpressionPropertyInterface(_d.rz||_d.r)}),Object.defineProperty(np,"xRotation",{get:ExpressionPropertyInterface(_d.rx)}),Object.defineProperty(np,"yRotation",{get:ExpressionPropertyInterface(_d.ry)}),Object.defineProperty(np,"scale",{get:ExpressionPropertyInterface(_d.s)});var rp,ap,sp,lp;return _d.p?lp=ExpressionPropertyInterface(_d.p):(rp=ExpressionPropertyInterface(_d.px),ap=ExpressionPropertyInterface(_d.py),_d.pz&&(sp=ExpressionPropertyInterface(_d.pz))),Object.defineProperty(np,"position",{get:function(){return _d.p?lp():[rp(),ap(),sp?sp():0]}}),Object.defineProperty(np,"xPosition",{get:ExpressionPropertyInterface(_d.px)}),Object.defineProperty(np,"yPosition",{get:ExpressionPropertyInterface(_d.py)}),Object.defineProperty(np,"zPosition",{get:ExpressionPropertyInterface(_d.pz)}),Object.defineProperty(np,"anchorPoint",{get:ExpressionPropertyInterface(_d.a)}),Object.defineProperty(np,"opacity",{get:ExpressionPropertyInterface(_d.o)}),Object.defineProperty(np,"skew",{get:ExpressionPropertyInterface(_d.sk)}),Object.defineProperty(np,"skewAxis",{get:ExpressionPropertyInterface(_d.sa)}),Object.defineProperty(np,"orientation",{get:ExpressionPropertyInterface(_d.or)}),np}}(),LayerExpressionInterface=function(){function _d(fp){var pp=new Matrix;if(fp!==void 0){var hp=this._elem.finalTransform.mProp.getValueAtTime(fp);hp.clone(pp)}else{var mp=this._elem.finalTransform.mProp;mp.applyToMatrix(pp)}return pp}function np(fp,pp){var hp=this.getMatrix(pp);return hp.props[12]=0,hp.props[13]=0,hp.props[14]=0,this.applyPoint(hp,fp)}function rp(fp,pp){var hp=this.getMatrix(pp);return this.applyPoint(hp,fp)}function ap(fp,pp){var hp=this.getMatrix(pp);return hp.props[12]=0,hp.props[13]=0,hp.props[14]=0,this.invertPoint(hp,fp)}function sp(fp,pp){var hp=this.getMatrix(pp);return this.invertPoint(hp,fp)}function lp(fp,pp){if(this._elem.hierarchy&&this._elem.hierarchy.length){var hp,mp=this._elem.hierarchy.length;for(hp=0;hp<mp;hp+=1)this._elem.hierarchy[hp].finalTransform.mProp.applyToMatrix(fp)}return fp.applyToPointArray(pp[0],pp[1],pp[2]||0)}function up(fp,pp){if(this._elem.hierarchy&&this._elem.hierarchy.length){var hp,mp=this._elem.hierarchy.length;for(hp=0;hp<mp;hp+=1)this._elem.hierarchy[hp].finalTransform.mProp.applyToMatrix(fp)}return fp.inversePoint(pp)}function cp(fp){var pp=new Matrix;if(pp.reset(),this._elem.finalTransform.mProp.applyToMatrix(pp),this._elem.hierarchy&&this._elem.hierarchy.length){var hp,mp=this._elem.hierarchy.length;for(hp=0;hp<mp;hp+=1)this._elem.hierarchy[hp].finalTransform.mProp.applyToMatrix(pp);return pp.inversePoint(fp)}return pp.inversePoint(fp)}function dp(){return[1,1,1,1]}return function(fp){var pp;function hp(xp){gp.mask=new MaskManagerInterface(xp,fp)}function mp(xp){gp.effect=xp}function gp(xp){switch(xp){case"ADBE Root Vectors Group":case"Contents":case 2:return gp.shapeInterface;case 1:case 6:case"Transform":case"transform":case"ADBE Transform Group":return pp;case 4:case"ADBE Effect Parade":case"effects":case"Effects":return gp.effect;case"ADBE Text Properties":return gp.textInterface;default:return null}}gp.getMatrix=_d,gp.invertPoint=up,gp.applyPoint=lp,gp.toWorld=rp,gp.toWorldVec=np,gp.fromWorld=sp,gp.fromWorldVec=ap,gp.toComp=rp,gp.fromComp=cp,gp.sampleImage=dp,gp.sourceRectAtTime=fp.sourceRectAtTime.bind(fp),gp._elem=fp,pp=TransformExpressionInterface(fp.finalTransform.mProp);var vp=getDescriptor(pp,"anchorPoint");return Object.defineProperties(gp,{hasParent:{get:function(){return fp.hierarchy.length}},parent:{get:function(){return fp.hierarchy[0].layerInterface}},rotation:getDescriptor(pp,"rotation"),scale:getDescriptor(pp,"scale"),position:getDescriptor(pp,"position"),opacity:getDescriptor(pp,"opacity"),anchorPoint:vp,anchor_point:vp,transform:{get:function(){return pp}},active:{get:function(){return fp.isInRange}}}),gp.startTime=fp.data.st,gp.index=fp.data.ind,gp.source=fp.data.refId,gp.height=fp.data.ty===0?fp.data.h:100,gp.width=fp.data.ty===0?fp.data.w:100,gp.inPoint=fp.data.ip/fp.comp.globalData.frameRate,gp.outPoint=fp.data.op/fp.comp.globalData.frameRate,gp._name=fp.data.nm,gp.registerMaskInterface=hp,gp.registerEffectsInterface=mp,gp}}(),propertyGroupFactory=function(){return function(_d,np){return function(rp){return rp=rp===void 0?1:rp,rp<=0?_d:np(rp-1)}}}(),PropertyInterface=function(){return function(_d,np){var rp={_name:_d};function ap(sp){return sp=sp===void 0?1:sp,sp<=0?rp:np(sp-1)}return ap}}(),EffectsExpressionInterface=function(){var _d={createEffectsInterface:np};function np(sp,lp){if(sp.effectsManager){var up=[],cp=sp.data.ef,dp,fp=sp.effectsManager.effectElements.length;for(dp=0;dp<fp;dp+=1)up.push(rp(cp[dp],sp.effectsManager.effectElements[dp],lp,sp));var pp=sp.data.ef||[],hp=function(gp){for(dp=0,fp=pp.length;dp<fp;){if(gp===pp[dp].nm||gp===pp[dp].mn||gp===pp[dp].ix)return up[dp];dp+=1}return null};return Object.defineProperty(hp,"numProperties",{get:function(){return pp.length}}),hp}return null}function rp(sp,lp,up,cp){function dp(gp){for(var vp=sp.ef,xp=0,Sp=vp.length;xp<Sp;){if(gp===vp[xp].nm||gp===vp[xp].mn||gp===vp[xp].ix)return vp[xp].ty===5?pp[xp]:pp[xp]();xp+=1}throw new Error}var fp=propertyGroupFactory(dp,up),pp=[],hp,mp=sp.ef.length;for(hp=0;hp<mp;hp+=1)sp.ef[hp].ty===5?pp.push(rp(sp.ef[hp],lp.effectElements[hp],lp.effectElements[hp].propertyGroup,cp)):pp.push(ap(lp.effectElements[hp],sp.ef[hp].ty,cp,fp));return sp.mn==="ADBE Color Control"&&Object.defineProperty(dp,"color",{get:function(){return pp[0]()}}),Object.defineProperties(dp,{numProperties:{get:function(){return sp.np}},_name:{value:sp.nm},propertyGroup:{value:fp}}),dp.enabled=sp.en!==0,dp.active=dp.enabled,dp}function ap(sp,lp,up,cp){var dp=ExpressionPropertyInterface(sp.p);function fp(){return lp===10?up.comp.compInterface(sp.p.v):dp()}return sp.p.setGroupProperty&&sp.p.setGroupProperty(PropertyInterface("",cp)),fp}return _d}(),ShapePathInterface=function(){return function(np,rp,ap){var sp=rp.sh;function lp(cp){return cp==="Shape"||cp==="shape"||cp==="Path"||cp==="path"||cp==="ADBE Vector Shape"||cp===2?lp.path:null}var up=propertyGroupFactory(lp,ap);return sp.setGroupProperty(PropertyInterface("Path",up)),Object.defineProperties(lp,{path:{get:function(){return sp.k&&sp.getValue(),sp}},shape:{get:function(){return sp.k&&sp.getValue(),sp}},_name:{value:np.nm},ix:{value:np.ix},propertyIndex:{value:np.ix},mn:{value:np.mn},propertyGroup:{value:ap}}),lp}}(),ShapeExpressionInterface=function(){function _d(vp,xp,Sp){var yp=[],bp,Ep=vp?vp.length:0;for(bp=0;bp<Ep;bp+=1)vp[bp].ty==="gr"?yp.push(rp(vp[bp],xp[bp],Sp)):vp[bp].ty==="fl"?yp.push(ap(vp[bp],xp[bp],Sp)):vp[bp].ty==="st"?yp.push(up(vp[bp],xp[bp],Sp)):vp[bp].ty==="tm"?yp.push(cp(vp[bp],xp[bp],Sp)):vp[bp].ty==="tr"||(vp[bp].ty==="el"?yp.push(fp(vp[bp],xp[bp],Sp)):vp[bp].ty==="sr"?yp.push(pp(vp[bp],xp[bp],Sp)):vp[bp].ty==="sh"?yp.push(ShapePathInterface(vp[bp],xp[bp],Sp)):vp[bp].ty==="rc"?yp.push(hp(vp[bp],xp[bp],Sp)):vp[bp].ty==="rd"?yp.push(mp(vp[bp],xp[bp],Sp)):vp[bp].ty==="rp"?yp.push(gp(vp[bp],xp[bp],Sp)):vp[bp].ty==="gf"?yp.push(sp(vp[bp],xp[bp],Sp)):yp.push(lp(vp[bp],xp[bp])));return yp}function np(vp,xp,Sp){var yp,bp=function(_p){for(var Cp=0,$p=yp.length;Cp<$p;){if(yp[Cp]._name===_p||yp[Cp].mn===_p||yp[Cp].propertyIndex===_p||yp[Cp].ix===_p||yp[Cp].ind===_p)return yp[Cp];Cp+=1}return typeof _p=="number"?yp[_p-1]:null};bp.propertyGroup=propertyGroupFactory(bp,Sp),yp=_d(vp.it,xp.it,bp.propertyGroup),bp.numProperties=yp.length;var Ep=dp(vp.it[vp.it.length-1],xp.it[xp.it.length-1],bp.propertyGroup);return bp.transform=Ep,bp.propertyIndex=vp.cix,bp._name=vp.nm,bp}function rp(vp,xp,Sp){var yp=function(_p){switch(_p){case"ADBE Vectors Group":case"Contents":case 2:return yp.content;default:return yp.transform}};yp.propertyGroup=propertyGroupFactory(yp,Sp);var bp=np(vp,xp,yp.propertyGroup),Ep=dp(vp.it[vp.it.length-1],xp.it[xp.it.length-1],yp.propertyGroup);return yp.content=bp,yp.transform=Ep,Object.defineProperty(yp,"_name",{get:function(){return vp.nm}}),yp.numProperties=vp.np,yp.propertyIndex=vp.ix,yp.nm=vp.nm,yp.mn=vp.mn,yp}function ap(vp,xp,Sp){function yp(bp){return bp==="Color"||bp==="color"?yp.color:bp==="Opacity"||bp==="opacity"?yp.opacity:null}return Object.defineProperties(yp,{color:{get:ExpressionPropertyInterface(xp.c)},opacity:{get:ExpressionPropertyInterface(xp.o)},_name:{value:vp.nm},mn:{value:vp.mn}}),xp.c.setGroupProperty(PropertyInterface("Color",Sp)),xp.o.setGroupProperty(PropertyInterface("Opacity",Sp)),yp}function sp(vp,xp,Sp){function yp(bp){return bp==="Start Point"||bp==="start point"?yp.startPoint:bp==="End Point"||bp==="end point"?yp.endPoint:bp==="Opacity"||bp==="opacity"?yp.opacity:null}return Object.defineProperties(yp,{startPoint:{get:ExpressionPropertyInterface(xp.s)},endPoint:{get:ExpressionPropertyInterface(xp.e)},opacity:{get:ExpressionPropertyInterface(xp.o)},type:{get:function(){return"a"}},_name:{value:vp.nm},mn:{value:vp.mn}}),xp.s.setGroupProperty(PropertyInterface("Start Point",Sp)),xp.e.setGroupProperty(PropertyInterface("End Point",Sp)),xp.o.setGroupProperty(PropertyInterface("Opacity",Sp)),yp}function lp(){function vp(){return null}return vp}function up(vp,xp,Sp){var yp=propertyGroupFactory($p,Sp),bp=propertyGroupFactory(Cp,yp);function Ep(Rp){Object.defineProperty(Cp,vp.d[Rp].nm,{get:ExpressionPropertyInterface(xp.d.dataProps[Rp].p)})}var wp,_p=vp.d?vp.d.length:0,Cp={};for(wp=0;wp<_p;wp+=1)Ep(wp),xp.d.dataProps[wp].p.setGroupProperty(bp);function $p(Rp){return Rp==="Color"||Rp==="color"?$p.color:Rp==="Opacity"||Rp==="opacity"?$p.opacity:Rp==="Stroke Width"||Rp==="stroke width"?$p.strokeWidth:null}return Object.defineProperties($p,{color:{get:ExpressionPropertyInterface(xp.c)},opacity:{get:ExpressionPropertyInterface(xp.o)},strokeWidth:{get:ExpressionPropertyInterface(xp.w)},dash:{get:function(){return Cp}},_name:{value:vp.nm},mn:{value:vp.mn}}),xp.c.setGroupProperty(PropertyInterface("Color",yp)),xp.o.setGroupProperty(PropertyInterface("Opacity",yp)),xp.w.setGroupProperty(PropertyInterface("Stroke Width",yp)),$p}function cp(vp,xp,Sp){function yp(Ep){return Ep===vp.e.ix||Ep==="End"||Ep==="end"?yp.end:Ep===vp.s.ix?yp.start:Ep===vp.o.ix?yp.offset:null}var bp=propertyGroupFactory(yp,Sp);return yp.propertyIndex=vp.ix,xp.s.setGroupProperty(PropertyInterface("Start",bp)),xp.e.setGroupProperty(PropertyInterface("End",bp)),xp.o.setGroupProperty(PropertyInterface("Offset",bp)),yp.propertyIndex=vp.ix,yp.propertyGroup=Sp,Object.defineProperties(yp,{start:{get:ExpressionPropertyInterface(xp.s)},end:{get:ExpressionPropertyInterface(xp.e)},offset:{get:ExpressionPropertyInterface(xp.o)},_name:{value:vp.nm}}),yp.mn=vp.mn,yp}function dp(vp,xp,Sp){function yp(Ep){return vp.a.ix===Ep||Ep==="Anchor Point"?yp.anchorPoint:vp.o.ix===Ep||Ep==="Opacity"?yp.opacity:vp.p.ix===Ep||Ep==="Position"?yp.position:vp.r.ix===Ep||Ep==="Rotation"||Ep==="ADBE Vector Rotation"?yp.rotation:vp.s.ix===Ep||Ep==="Scale"?yp.scale:vp.sk&&vp.sk.ix===Ep||Ep==="Skew"?yp.skew:vp.sa&&vp.sa.ix===Ep||Ep==="Skew Axis"?yp.skewAxis:null}var bp=propertyGroupFactory(yp,Sp);return xp.transform.mProps.o.setGroupProperty(PropertyInterface("Opacity",bp)),xp.transform.mProps.p.setGroupProperty(PropertyInterface("Position",bp)),xp.transform.mProps.a.setGroupProperty(PropertyInterface("Anchor Point",bp)),xp.transform.mProps.s.setGroupProperty(PropertyInterface("Scale",bp)),xp.transform.mProps.r.setGroupProperty(PropertyInterface("Rotation",bp)),xp.transform.mProps.sk&&(xp.transform.mProps.sk.setGroupProperty(PropertyInterface("Skew",bp)),xp.transform.mProps.sa.setGroupProperty(PropertyInterface("Skew Angle",bp))),xp.transform.op.setGroupProperty(PropertyInterface("Opacity",bp)),Object.defineProperties(yp,{opacity:{get:ExpressionPropertyInterface(xp.transform.mProps.o)},position:{get:ExpressionPropertyInterface(xp.transform.mProps.p)},anchorPoint:{get:ExpressionPropertyInterface(xp.transform.mProps.a)},scale:{get:ExpressionPropertyInterface(xp.transform.mProps.s)},rotation:{get:ExpressionPropertyInterface(xp.transform.mProps.r)},skew:{get:ExpressionPropertyInterface(xp.transform.mProps.sk)},skewAxis:{get:ExpressionPropertyInterface(xp.transform.mProps.sa)},_name:{value:vp.nm}}),yp.ty="tr",yp.mn=vp.mn,yp.propertyGroup=Sp,yp}function fp(vp,xp,Sp){function yp(wp){return vp.p.ix===wp?yp.position:vp.s.ix===wp?yp.size:null}var bp=propertyGroupFactory(yp,Sp);yp.propertyIndex=vp.ix;var Ep=xp.sh.ty==="tm"?xp.sh.prop:xp.sh;return Ep.s.setGroupProperty(PropertyInterface("Size",bp)),Ep.p.setGroupProperty(PropertyInterface("Position",bp)),Object.defineProperties(yp,{size:{get:ExpressionPropertyInterface(Ep.s)},position:{get:ExpressionPropertyInterface(Ep.p)},_name:{value:vp.nm}}),yp.mn=vp.mn,yp}function pp(vp,xp,Sp){function yp(wp){return vp.p.ix===wp?yp.position:vp.r.ix===wp?yp.rotation:vp.pt.ix===wp?yp.points:vp.or.ix===wp||wp==="ADBE Vector Star Outer Radius"?yp.outerRadius:vp.os.ix===wp?yp.outerRoundness:vp.ir&&(vp.ir.ix===wp||wp==="ADBE Vector Star Inner Radius")?yp.innerRadius:vp.is&&vp.is.ix===wp?yp.innerRoundness:null}var bp=propertyGroupFactory(yp,Sp),Ep=xp.sh.ty==="tm"?xp.sh.prop:xp.sh;return yp.propertyIndex=vp.ix,Ep.or.setGroupProperty(PropertyInterface("Outer Radius",bp)),Ep.os.setGroupProperty(PropertyInterface("Outer Roundness",bp)),Ep.pt.setGroupProperty(PropertyInterface("Points",bp)),Ep.p.setGroupProperty(PropertyInterface("Position",bp)),Ep.r.setGroupProperty(PropertyInterface("Rotation",bp)),vp.ir&&(Ep.ir.setGroupProperty(PropertyInterface("Inner Radius",bp)),Ep.is.setGroupProperty(PropertyInterface("Inner Roundness",bp))),Object.defineProperties(yp,{position:{get:ExpressionPropertyInterface(Ep.p)},rotation:{get:ExpressionPropertyInterface(Ep.r)},points:{get:ExpressionPropertyInterface(Ep.pt)},outerRadius:{get:ExpressionPropertyInterface(Ep.or)},outerRoundness:{get:ExpressionPropertyInterface(Ep.os)},innerRadius:{get:ExpressionPropertyInterface(Ep.ir)},innerRoundness:{get:ExpressionPropertyInterface(Ep.is)},_name:{value:vp.nm}}),yp.mn=vp.mn,yp}function hp(vp,xp,Sp){function yp(wp){return vp.p.ix===wp?yp.position:vp.r.ix===wp?yp.roundness:vp.s.ix===wp||wp==="Size"||wp==="ADBE Vector Rect Size"?yp.size:null}var bp=propertyGroupFactory(yp,Sp),Ep=xp.sh.ty==="tm"?xp.sh.prop:xp.sh;return yp.propertyIndex=vp.ix,Ep.p.setGroupProperty(PropertyInterface("Position",bp)),Ep.s.setGroupProperty(PropertyInterface("Size",bp)),Ep.r.setGroupProperty(PropertyInterface("Rotation",bp)),Object.defineProperties(yp,{position:{get:ExpressionPropertyInterface(Ep.p)},roundness:{get:ExpressionPropertyInterface(Ep.r)},size:{get:ExpressionPropertyInterface(Ep.s)},_name:{value:vp.nm}}),yp.mn=vp.mn,yp}function mp(vp,xp,Sp){function yp(wp){return vp.r.ix===wp||wp==="Round Corners 1"?yp.radius:null}var bp=propertyGroupFactory(yp,Sp),Ep=xp;return yp.propertyIndex=vp.ix,Ep.rd.setGroupProperty(PropertyInterface("Radius",bp)),Object.defineProperties(yp,{radius:{get:ExpressionPropertyInterface(Ep.rd)},_name:{value:vp.nm}}),yp.mn=vp.mn,yp}function gp(vp,xp,Sp){function yp(wp){return vp.c.ix===wp||wp==="Copies"?yp.copies:vp.o.ix===wp||wp==="Offset"?yp.offset:null}var bp=propertyGroupFactory(yp,Sp),Ep=xp;return yp.propertyIndex=vp.ix,Ep.c.setGroupProperty(PropertyInterface("Copies",bp)),Ep.o.setGroupProperty(PropertyInterface("Offset",bp)),Object.defineProperties(yp,{copies:{get:ExpressionPropertyInterface(Ep.c)},offset:{get:ExpressionPropertyInterface(Ep.o)},_name:{value:vp.nm}}),yp.mn=vp.mn,yp}return function(vp,xp,Sp){var yp;function bp(wp){if(typeof wp=="number")return wp=wp===void 0?1:wp,wp===0?Sp:yp[wp-1];for(var _p=0,Cp=yp.length;_p<Cp;){if(yp[_p]._name===wp)return yp[_p];_p+=1}return null}function Ep(){return Sp}return bp.propertyGroup=propertyGroupFactory(bp,Ep),yp=_d(vp,xp,bp.propertyGroup),bp.numProperties=yp.length,bp._name="Contents",bp}}(),TextExpressionInterface=function(){return function(_d){var np;function rp(ap){switch(ap){case"ADBE Text Document":return rp.sourceText;default:return null}}return Object.defineProperty(rp,"sourceText",{get:function(){_d.textProperty.getValue();var sp=_d.textProperty.currentData.t;return(!np||sp!==np.value)&&(np=new String(sp),np.value=sp||new String(sp),Object.defineProperty(np,"style",{get:function(){return{fillColor:_d.textProperty.currentData.fc}}})),np}}),rp}}();function _typeof(_d){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof=function(rp){return typeof rp}:_typeof=function(rp){return rp&&typeof Symbol=="function"&&rp.constructor===Symbol&&rp!==Symbol.prototype?"symbol":typeof rp},_typeof(_d)}var FootageInterface=function(){var _d=function(ap){var sp="",lp=ap.getFootageData();function up(){return sp="",lp=ap.getFootageData(),cp}function cp(dp){if(lp[dp])return sp=dp,lp=lp[dp],_typeof(lp)==="object"?cp:lp;var fp=dp.indexOf(sp);if(fp!==-1){var pp=parseInt(dp.substr(fp+sp.length),10);return lp=lp[pp],_typeof(lp)==="object"?cp:lp}return""}return up},np=function(ap){function sp(lp){return lp==="Outline"?sp.outlineInterface():null}return sp._name="Outline",sp.outlineInterface=_d(ap),sp};return function(rp){function ap(sp){return sp==="Data"?ap.dataInterface:null}return ap._name="Data",ap.dataInterface=np(rp),ap}}(),interfaces={layer:LayerExpressionInterface,effects:EffectsExpressionInterface,comp:CompExpressionInterface,shape:ShapeExpressionInterface,text:TextExpressionInterface,footage:FootageInterface};function getInterface(_d){return interfaces[_d]||null}var expressionHelpers=function(){function _d(up,cp,dp){cp.x&&(dp.k=!0,dp.x=!0,dp.initiateExpression=ExpressionManager.initiateExpression,dp.effectsSequence.push(dp.initiateExpression(up,cp,dp).bind(dp)))}function np(up){return up*=this.elem.globalData.frameRate,up-=this.offsetTime,up!==this._cachingAtTime.lastFrame&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastFrame<up?this._cachingAtTime.lastIndex:0,this._cachingAtTime.value=this.interpolateValue(up,this._cachingAtTime),this._cachingAtTime.lastFrame=up),this._cachingAtTime.value}function rp(up){var cp=-.01,dp=this.getValueAtTime(up),fp=this.getValueAtTime(up+cp),pp=0;if(dp.length){var hp;for(hp=0;hp<dp.length;hp+=1)pp+=Math.pow(fp[hp]-dp[hp],2);pp=Math.sqrt(pp)*100}else pp=0;return pp}function ap(up){if(this.vel!==void 0)return this.vel;var cp=-.001,dp=this.getValueAtTime(up),fp=this.getValueAtTime(up+cp),pp;if(dp.length){pp=createTypedArray("float32",dp.length);var hp;for(hp=0;hp<dp.length;hp+=1)pp[hp]=(fp[hp]-dp[hp])/cp}else pp=(fp-dp)/cp;return pp}function sp(){return this.pv}function lp(up){this.propertyGroup=up}return{searchExpressions:_d,getSpeedAtTime:rp,getVelocityAtTime:ap,getValueAtTime:np,getStaticValueAtTime:sp,setGroupProperty:lp}}();function addPropertyDecorator(){function _d(mp,gp,vp){if(!this.k||!this.keyframes)return this.pv;mp=mp?mp.toLowerCase():"";var xp=this.comp.renderedFrame,Sp=this.keyframes,yp=Sp[Sp.length-1].t;if(xp<=yp)return this.pv;var bp,Ep;vp?(gp?bp=Math.abs(yp-this.elem.comp.globalData.frameRate*gp):bp=Math.max(0,yp-this.elem.data.ip),Ep=yp-bp):((!gp||gp>Sp.length-1)&&(gp=Sp.length-1),Ep=Sp[Sp.length-1-gp].t,bp=yp-Ep);var wp,_p,Cp;if(mp==="pingpong"){var $p=Math.floor((xp-Ep)/bp);if($p%2!==0)return this.getValueAtTime((bp-(xp-Ep)%bp+Ep)/this.comp.globalData.frameRate,0)}else if(mp==="offset"){var Rp=this.getValueAtTime(Ep/this.comp.globalData.frameRate,0),Pp=this.getValueAtTime(yp/this.comp.globalData.frameRate,0),Op=this.getValueAtTime(((xp-Ep)%bp+Ep)/this.comp.globalData.frameRate,0),jp=Math.floor((xp-Ep)/bp);if(this.pv.length){for(Cp=new Array(Rp.length),_p=Cp.length,wp=0;wp<_p;wp+=1)Cp[wp]=(Pp[wp]-Rp[wp])*jp+Op[wp];return Cp}return(Pp-Rp)*jp+Op}else if(mp==="continue"){var Mp=this.getValueAtTime(yp/this.comp.globalData.frameRate,0),Ap=this.getValueAtTime((yp-.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(Cp=new Array(Mp.length),_p=Cp.length,wp=0;wp<_p;wp+=1)Cp[wp]=Mp[wp]+(Mp[wp]-Ap[wp])*((xp-yp)/this.comp.globalData.frameRate)/5e-4;return Cp}return Mp+(Mp-Ap)*((xp-yp)/.001)}return this.getValueAtTime(((xp-Ep)%bp+Ep)/this.comp.globalData.frameRate,0)}function np(mp,gp,vp){if(!this.k)return this.pv;mp=mp?mp.toLowerCase():"";var xp=this.comp.renderedFrame,Sp=this.keyframes,yp=Sp[0].t;if(xp>=yp)return this.pv;var bp,Ep;vp?(gp?bp=Math.abs(this.elem.comp.globalData.frameRate*gp):bp=Math.max(0,this.elem.data.op-yp),Ep=yp+bp):((!gp||gp>Sp.length-1)&&(gp=Sp.length-1),Ep=Sp[gp].t,bp=Ep-yp);var wp,_p,Cp;if(mp==="pingpong"){var $p=Math.floor((yp-xp)/bp);if($p%2===0)return this.getValueAtTime(((yp-xp)%bp+yp)/this.comp.globalData.frameRate,0)}else if(mp==="offset"){var Rp=this.getValueAtTime(yp/this.comp.globalData.frameRate,0),Pp=this.getValueAtTime(Ep/this.comp.globalData.frameRate,0),Op=this.getValueAtTime((bp-(yp-xp)%bp+yp)/this.comp.globalData.frameRate,0),jp=Math.floor((yp-xp)/bp)+1;if(this.pv.length){for(Cp=new Array(Rp.length),_p=Cp.length,wp=0;wp<_p;wp+=1)Cp[wp]=Op[wp]-(Pp[wp]-Rp[wp])*jp;return Cp}return Op-(Pp-Rp)*jp}else if(mp==="continue"){var Mp=this.getValueAtTime(yp/this.comp.globalData.frameRate,0),Ap=this.getValueAtTime((yp+.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(Cp=new Array(Mp.length),_p=Cp.length,wp=0;wp<_p;wp+=1)Cp[wp]=Mp[wp]+(Mp[wp]-Ap[wp])*(yp-xp)/.001;return Cp}return Mp+(Mp-Ap)*(yp-xp)/.001}return this.getValueAtTime((bp-((yp-xp)%bp+yp))/this.comp.globalData.frameRate,0)}function rp(mp,gp){if(!this.k)return this.pv;if(mp=(mp||.4)*.5,gp=Math.floor(gp||5),gp<=1)return this.pv;var vp=this.comp.renderedFrame/this.comp.globalData.frameRate,xp=vp-mp,Sp=vp+mp,yp=gp>1?(Sp-xp)/(gp-1):1,bp=0,Ep=0,wp;this.pv.length?wp=createTypedArray("float32",this.pv.length):wp=0;for(var _p;bp<gp;){if(_p=this.getValueAtTime(xp+bp*yp),this.pv.length)for(Ep=0;Ep<this.pv.length;Ep+=1)wp[Ep]+=_p[Ep];else wp+=_p;bp+=1}if(this.pv.length)for(Ep=0;Ep<this.pv.length;Ep+=1)wp[Ep]/=gp;else wp/=gp;return wp}function ap(mp){this._transformCachingAtTime||(this._transformCachingAtTime={v:new Matrix});var gp=this._transformCachingAtTime.v;if(gp.cloneFromProps(this.pre.props),this.appliedTransformations<1){var vp=this.a.getValueAtTime(mp);gp.translate(-vp[0]*this.a.mult,-vp[1]*this.a.mult,vp[2]*this.a.mult)}if(this.appliedTransformations<2){var xp=this.s.getValueAtTime(mp);gp.scale(xp[0]*this.s.mult,xp[1]*this.s.mult,xp[2]*this.s.mult)}if(this.sk&&this.appliedTransformations<3){var Sp=this.sk.getValueAtTime(mp),yp=this.sa.getValueAtTime(mp);gp.skewFromAxis(-Sp*this.sk.mult,yp*this.sa.mult)}if(this.r&&this.appliedTransformations<4){var bp=this.r.getValueAtTime(mp);gp.rotate(-bp*this.r.mult)}else if(!this.r&&this.appliedTransformations<4){var Ep=this.rz.getValueAtTime(mp),wp=this.ry.getValueAtTime(mp),_p=this.rx.getValueAtTime(mp),Cp=this.or.getValueAtTime(mp);gp.rotateZ(-Ep*this.rz.mult).rotateY(wp*this.ry.mult).rotateX(_p*this.rx.mult).rotateZ(-Cp[2]*this.or.mult).rotateY(Cp[1]*this.or.mult).rotateX(Cp[0]*this.or.mult)}if(this.data.p&&this.data.p.s){var $p=this.px.getValueAtTime(mp),Rp=this.py.getValueAtTime(mp);if(this.data.p.z){var Pp=this.pz.getValueAtTime(mp);gp.translate($p*this.px.mult,Rp*this.py.mult,-Pp*this.pz.mult)}else gp.translate($p*this.px.mult,Rp*this.py.mult,0)}else{var Op=this.p.getValueAtTime(mp);gp.translate(Op[0]*this.p.mult,Op[1]*this.p.mult,-Op[2]*this.p.mult)}return gp}function sp(){return this.v.clone(new Matrix)}var lp=TransformPropertyFactory.getTransformProperty;TransformPropertyFactory.getTransformProperty=function(mp,gp,vp){var xp=lp(mp,gp,vp);return xp.dynamicProperties.length?xp.getValueAtTime=ap.bind(xp):xp.getValueAtTime=sp.bind(xp),xp.setGroupProperty=expressionHelpers.setGroupProperty,xp};var up=PropertyFactory.getProp;PropertyFactory.getProp=function(mp,gp,vp,xp,Sp){var yp=up(mp,gp,vp,xp,Sp);yp.kf?yp.getValueAtTime=expressionHelpers.getValueAtTime.bind(yp):yp.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(yp),yp.setGroupProperty=expressionHelpers.setGroupProperty,yp.loopOut=_d,yp.loopIn=np,yp.smooth=rp,yp.getVelocityAtTime=expressionHelpers.getVelocityAtTime.bind(yp),yp.getSpeedAtTime=expressionHelpers.getSpeedAtTime.bind(yp),yp.numKeys=gp.a===1?gp.k.length:0,yp.propertyIndex=gp.ix;var bp=0;return vp!==0&&(bp=createTypedArray("float32",gp.a===1?gp.k[0].s.length:gp.k.length)),yp._cachingAtTime={lastFrame:initialDefaultFrame,lastIndex:0,value:bp},expressionHelpers.searchExpressions(mp,gp,yp),yp.k&&Sp.addDynamicProperty(yp),yp};function cp(mp){return this._cachingAtTime||(this._cachingAtTime={shapeValue:shapePool.clone(this.pv),lastIndex:0,lastTime:initialDefaultFrame}),mp*=this.elem.globalData.frameRate,mp-=this.offsetTime,mp!==this._cachingAtTime.lastTime&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastTime<mp?this._caching.lastIndex:0,this._cachingAtTime.lastTime=mp,this.interpolateShape(mp,this._cachingAtTime.shapeValue,this._cachingAtTime)),this._cachingAtTime.shapeValue}var dp=ShapePropertyFactory.getConstructorFunction(),fp=ShapePropertyFactory.getKeyframedConstructorFunction();function pp(){}pp.prototype={vertices:function(gp,vp){this.k&&this.getValue();var xp=this.v;vp!==void 0&&(xp=this.getValueAtTime(vp,0));var Sp,yp=xp._length,bp=xp[gp],Ep=xp.v,wp=createSizedArray(yp);for(Sp=0;Sp<yp;Sp+=1)gp==="i"||gp==="o"?wp[Sp]=[bp[Sp][0]-Ep[Sp][0],bp[Sp][1]-Ep[Sp][1]]:wp[Sp]=[bp[Sp][0],bp[Sp][1]];return wp},points:function(gp){return this.vertices("v",gp)},inTangents:function(gp){return this.vertices("i",gp)},outTangents:function(gp){return this.vertices("o",gp)},isClosed:function(){return this.v.c},pointOnPath:function(gp,vp){var xp=this.v;vp!==void 0&&(xp=this.getValueAtTime(vp,0)),this._segmentsLength||(this._segmentsLength=bez.getSegmentsLength(xp));for(var Sp=this._segmentsLength,yp=Sp.lengths,bp=Sp.totalLength*gp,Ep=0,wp=yp.length,_p=0,Cp;Ep<wp;){if(_p+yp[Ep].addedLength>bp){var $p=Ep,Rp=xp.c&&Ep===wp-1?0:Ep+1,Pp=(bp-_p)/yp[Ep].addedLength;Cp=bez.getPointInSegment(xp.v[$p],xp.v[Rp],xp.o[$p],xp.i[Rp],Pp,yp[Ep]);break}else _p+=yp[Ep].addedLength;Ep+=1}return Cp||(Cp=xp.c?[xp.v[0][0],xp.v[0][1]]:[xp.v[xp._length-1][0],xp.v[xp._length-1][1]]),Cp},vectorOnPath:function(gp,vp,xp){gp==1?gp=this.v.c:gp==0&&(gp=.999);var Sp=this.pointOnPath(gp,vp),yp=this.pointOnPath(gp+.001,vp),bp=yp[0]-Sp[0],Ep=yp[1]-Sp[1],wp=Math.sqrt(Math.pow(bp,2)+Math.pow(Ep,2));if(wp===0)return[0,0];var _p=xp==="tangent"?[bp/wp,Ep/wp]:[-Ep/wp,bp/wp];return _p},tangentOnPath:function(gp,vp){return this.vectorOnPath(gp,vp,"tangent")},normalOnPath:function(gp,vp){return this.vectorOnPath(gp,vp,"normal")},setGroupProperty:expressionHelpers.setGroupProperty,getValueAtTime:expressionHelpers.getStaticValueAtTime},extendPrototype([pp],dp),extendPrototype([pp],fp),fp.prototype.getValueAtTime=cp,fp.prototype.initiateExpression=ExpressionManager.initiateExpression;var hp=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(mp,gp,vp,xp,Sp){var yp=hp(mp,gp,vp,xp,Sp);return yp.propertyIndex=gp.ix,yp.lock=!1,vp===3?expressionHelpers.searchExpressions(mp,gp.pt,yp):vp===4&&expressionHelpers.searchExpressions(mp,gp.ks,yp),yp.k&&mp.addDynamicProperty(yp),yp}}function initialize$1(){addPropertyDecorator()}function addDecorator(){function _d(){return this.data.d.x?(this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this),this.addEffect(this.getExpressionValue.bind(this)),!0):null}TextProperty.prototype.getExpressionValue=function(np,rp){var ap=this.calculateExpression(rp);if(np.t!==ap){var sp={};return this.copyData(sp,np),sp.t=ap.toString(),sp.__complete=!1,sp}return np},TextProperty.prototype.searchProperty=function(){var np=this.searchKeyframes(),rp=this.searchExpressions();return this.kf=np||rp,this.kf},TextProperty.prototype.searchExpressions=_d}function initialize(){addDecorator()}function SVGComposableEffect(){}SVGComposableEffect.prototype={createMergeNode:function _d(np,rp){var ap=createNS("feMerge");ap.setAttribute("result",np);var sp,lp;for(lp=0;lp<rp.length;lp+=1)sp=createNS("feMergeNode"),sp.setAttribute("in",rp[lp]),ap.appendChild(sp),ap.appendChild(sp);return ap}};var linearFilterValue="0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0";function SVGTintFilter(_d,np,rp,ap,sp){this.filterManager=np;var lp=createNS("feColorMatrix");lp.setAttribute("type","matrix"),lp.setAttribute("color-interpolation-filters","linearRGB"),lp.setAttribute("values",linearFilterValue+" 1 0"),this.linearFilter=lp,lp.setAttribute("result",ap+"_tint_1"),_d.appendChild(lp),lp=createNS("feColorMatrix"),lp.setAttribute("type","matrix"),lp.setAttribute("color-interpolation-filters","sRGB"),lp.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),lp.setAttribute("result",ap+"_tint_2"),_d.appendChild(lp),this.matrixFilter=lp;var up=this.createMergeNode(ap,[sp,ap+"_tint_1",ap+"_tint_2"]);_d.appendChild(up)}extendPrototype([SVGComposableEffect],SVGTintFilter),SVGTintFilter.prototype.renderFrame=function(_d){if(_d||this.filterManager._mdf){var np=this.filterManager.effectElements[0].p.v,rp=this.filterManager.effectElements[1].p.v,ap=this.filterManager.effectElements[2].p.v/100;this.linearFilter.setAttribute("values",linearFilterValue+" "+ap+" 0"),this.matrixFilter.setAttribute("values",rp[0]-np[0]+" 0 0 0 "+np[0]+" "+(rp[1]-np[1])+" 0 0 0 "+np[1]+" "+(rp[2]-np[2])+" 0 0 0 "+np[2]+" 0 0 0 1 0")}};function SVGFillFilter(_d,np,rp,ap){this.filterManager=np;var sp=createNS("feColorMatrix");sp.setAttribute("type","matrix"),sp.setAttribute("color-interpolation-filters","sRGB"),sp.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),sp.setAttribute("result",ap),_d.appendChild(sp),this.matrixFilter=sp}SVGFillFilter.prototype.renderFrame=function(_d){if(_d||this.filterManager._mdf){var np=this.filterManager.effectElements[2].p.v,rp=this.filterManager.effectElements[6].p.v;this.matrixFilter.setAttribute("values","0 0 0 0 "+np[0]+" 0 0 0 0 "+np[1]+" 0 0 0 0 "+np[2]+" 0 0 0 "+rp+" 0")}};function SVGStrokeEffect(_d,np,rp){this.initialized=!1,this.filterManager=np,this.elem=rp,this.paths=[]}SVGStrokeEffect.prototype.initialize=function(){var _d=this.elem.layerElement.children||this.elem.layerElement.childNodes,np,rp,ap,sp;for(this.filterManager.effectElements[1].p.v===1?(sp=this.elem.maskManager.masksProperties.length,ap=0):(ap=this.filterManager.effectElements[0].p.v-1,sp=ap+1),rp=createNS("g"),rp.setAttribute("fill","none"),rp.setAttribute("stroke-linecap","round"),rp.setAttribute("stroke-dashoffset",1),ap;ap<sp;ap+=1)np=createNS("path"),rp.appendChild(np),this.paths.push({p:np,m:ap});if(this.filterManager.effectElements[10].p.v===3){var lp=createNS("mask"),up=createElementID();lp.setAttribute("id",up),lp.setAttribute("mask-type","alpha"),lp.appendChild(rp),this.elem.globalData.defs.appendChild(lp);var cp=createNS("g");for(cp.setAttribute("mask","url("+getLocationHref()+"#"+up+")");_d[0];)cp.appendChild(_d[0]);this.elem.layerElement.appendChild(cp),this.masker=lp,rp.setAttribute("stroke","#fff")}else if(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2){if(this.filterManager.effectElements[10].p.v===2)for(_d=this.elem.layerElement.children||this.elem.layerElement.childNodes;_d.length;)this.elem.layerElement.removeChild(_d[0]);this.elem.layerElement.appendChild(rp),this.elem.layerElement.removeAttribute("mask"),rp.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=rp},SVGStrokeEffect.prototype.renderFrame=function(_d){this.initialized||this.initialize();var np,rp=this.paths.length,ap,sp;for(np=0;np<rp;np+=1)if(this.paths[np].m!==-1&&(ap=this.elem.maskManager.viewData[this.paths[np].m],sp=this.paths[np].p,(_d||this.filterManager._mdf||ap.prop._mdf)&&sp.setAttribute("d",ap.lastPath),_d||this.filterManager.effectElements[9].p._mdf||this.filterManager.effectElements[4].p._mdf||this.filterManager.effectElements[7].p._mdf||this.filterManager.effectElements[8].p._mdf||ap.prop._mdf)){var lp;if(this.filterManager.effectElements[7].p.v!==0||this.filterManager.effectElements[8].p.v!==100){var up=Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,cp=Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,dp=sp.getTotalLength();lp="0 0 0 "+dp*up+" ";var fp=dp*(cp-up),pp=1+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01,hp=Math.floor(fp/pp),mp;for(mp=0;mp<hp;mp+=1)lp+="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01+" ";lp+="0 "+dp*10+" 0 0"}else lp="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01;sp.setAttribute("stroke-dasharray",lp)}if((_d||this.filterManager.effectElements[4].p._mdf)&&this.pathMasker.setAttribute("stroke-width",this.filterManager.effectElements[4].p.v*2),(_d||this.filterManager.effectElements[6].p._mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2)&&(_d||this.filterManager.effectElements[3].p._mdf)){var gp=this.filterManager.effectElements[3].p.v;this.pathMasker.setAttribute("stroke","rgb("+bmFloor(gp[0]*255)+","+bmFloor(gp[1]*255)+","+bmFloor(gp[2]*255)+")")}};function SVGTritoneFilter(_d,np,rp,ap){this.filterManager=np;var sp=createNS("feColorMatrix");sp.setAttribute("type","matrix"),sp.setAttribute("color-interpolation-filters","linearRGB"),sp.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),_d.appendChild(sp);var lp=createNS("feComponentTransfer");lp.setAttribute("color-interpolation-filters","sRGB"),lp.setAttribute("result",ap),this.matrixFilter=lp;var up=createNS("feFuncR");up.setAttribute("type","table"),lp.appendChild(up),this.feFuncR=up;var cp=createNS("feFuncG");cp.setAttribute("type","table"),lp.appendChild(cp),this.feFuncG=cp;var dp=createNS("feFuncB");dp.setAttribute("type","table"),lp.appendChild(dp),this.feFuncB=dp,_d.appendChild(lp)}SVGTritoneFilter.prototype.renderFrame=function(_d){if(_d||this.filterManager._mdf){var np=this.filterManager.effectElements[0].p.v,rp=this.filterManager.effectElements[1].p.v,ap=this.filterManager.effectElements[2].p.v,sp=ap[0]+" "+rp[0]+" "+np[0],lp=ap[1]+" "+rp[1]+" "+np[1],up=ap[2]+" "+rp[2]+" "+np[2];this.feFuncR.setAttribute("tableValues",sp),this.feFuncG.setAttribute("tableValues",lp),this.feFuncB.setAttribute("tableValues",up)}};function SVGProLevelsFilter(_d,np,rp,ap){this.filterManager=np;var sp=this.filterManager.effectElements,lp=createNS("feComponentTransfer");(sp[10].p.k||sp[10].p.v!==0||sp[11].p.k||sp[11].p.v!==1||sp[12].p.k||sp[12].p.v!==1||sp[13].p.k||sp[13].p.v!==0||sp[14].p.k||sp[14].p.v!==1)&&(this.feFuncR=this.createFeFunc("feFuncR",lp)),(sp[17].p.k||sp[17].p.v!==0||sp[18].p.k||sp[18].p.v!==1||sp[19].p.k||sp[19].p.v!==1||sp[20].p.k||sp[20].p.v!==0||sp[21].p.k||sp[21].p.v!==1)&&(this.feFuncG=this.createFeFunc("feFuncG",lp)),(sp[24].p.k||sp[24].p.v!==0||sp[25].p.k||sp[25].p.v!==1||sp[26].p.k||sp[26].p.v!==1||sp[27].p.k||sp[27].p.v!==0||sp[28].p.k||sp[28].p.v!==1)&&(this.feFuncB=this.createFeFunc("feFuncB",lp)),(sp[31].p.k||sp[31].p.v!==0||sp[32].p.k||sp[32].p.v!==1||sp[33].p.k||sp[33].p.v!==1||sp[34].p.k||sp[34].p.v!==0||sp[35].p.k||sp[35].p.v!==1)&&(this.feFuncA=this.createFeFunc("feFuncA",lp)),(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA)&&(lp.setAttribute("color-interpolation-filters","sRGB"),_d.appendChild(lp)),(sp[3].p.k||sp[3].p.v!==0||sp[4].p.k||sp[4].p.v!==1||sp[5].p.k||sp[5].p.v!==1||sp[6].p.k||sp[6].p.v!==0||sp[7].p.k||sp[7].p.v!==1)&&(lp=createNS("feComponentTransfer"),lp.setAttribute("color-interpolation-filters","sRGB"),lp.setAttribute("result",ap),_d.appendChild(lp),this.feFuncRComposed=this.createFeFunc("feFuncR",lp),this.feFuncGComposed=this.createFeFunc("feFuncG",lp),this.feFuncBComposed=this.createFeFunc("feFuncB",lp))}SVGProLevelsFilter.prototype.createFeFunc=function(_d,np){var rp=createNS(_d);return rp.setAttribute("type","table"),np.appendChild(rp),rp},SVGProLevelsFilter.prototype.getTableValue=function(_d,np,rp,ap,sp){for(var lp=0,up=256,cp,dp=Math.min(_d,np),fp=Math.max(_d,np),pp=Array.call(null,{length:up}),hp,mp=0,gp=sp-ap,vp=np-_d;lp<=256;)cp=lp/256,cp<=dp?hp=vp<0?sp:ap:cp>=fp?hp=vp<0?ap:sp:hp=ap+gp*Math.pow((cp-_d)/vp,1/rp),pp[mp]=hp,mp+=1,lp+=256/(up-1);return pp.join(" ")},SVGProLevelsFilter.prototype.renderFrame=function(_d){if(_d||this.filterManager._mdf){var np,rp=this.filterManager.effectElements;this.feFuncRComposed&&(_d||rp[3].p._mdf||rp[4].p._mdf||rp[5].p._mdf||rp[6].p._mdf||rp[7].p._mdf)&&(np=this.getTableValue(rp[3].p.v,rp[4].p.v,rp[5].p.v,rp[6].p.v,rp[7].p.v),this.feFuncRComposed.setAttribute("tableValues",np),this.feFuncGComposed.setAttribute("tableValues",np),this.feFuncBComposed.setAttribute("tableValues",np)),this.feFuncR&&(_d||rp[10].p._mdf||rp[11].p._mdf||rp[12].p._mdf||rp[13].p._mdf||rp[14].p._mdf)&&(np=this.getTableValue(rp[10].p.v,rp[11].p.v,rp[12].p.v,rp[13].p.v,rp[14].p.v),this.feFuncR.setAttribute("tableValues",np)),this.feFuncG&&(_d||rp[17].p._mdf||rp[18].p._mdf||rp[19].p._mdf||rp[20].p._mdf||rp[21].p._mdf)&&(np=this.getTableValue(rp[17].p.v,rp[18].p.v,rp[19].p.v,rp[20].p.v,rp[21].p.v),this.feFuncG.setAttribute("tableValues",np)),this.feFuncB&&(_d||rp[24].p._mdf||rp[25].p._mdf||rp[26].p._mdf||rp[27].p._mdf||rp[28].p._mdf)&&(np=this.getTableValue(rp[24].p.v,rp[25].p.v,rp[26].p.v,rp[27].p.v,rp[28].p.v),this.feFuncB.setAttribute("tableValues",np)),this.feFuncA&&(_d||rp[31].p._mdf||rp[32].p._mdf||rp[33].p._mdf||rp[34].p._mdf||rp[35].p._mdf)&&(np=this.getTableValue(rp[31].p.v,rp[32].p.v,rp[33].p.v,rp[34].p.v,rp[35].p.v),this.feFuncA.setAttribute("tableValues",np))}};function SVGDropShadowEffect(_d,np,rp,ap,sp){var lp=np.container.globalData.renderConfig.filterSize,up=np.data.fs||lp;_d.setAttribute("x",up.x||lp.x),_d.setAttribute("y",up.y||lp.y),_d.setAttribute("width",up.width||lp.width),_d.setAttribute("height",up.height||lp.height),this.filterManager=np;var cp=createNS("feGaussianBlur");cp.setAttribute("in","SourceAlpha"),cp.setAttribute("result",ap+"_drop_shadow_1"),cp.setAttribute("stdDeviation","0"),this.feGaussianBlur=cp,_d.appendChild(cp);var dp=createNS("feOffset");dp.setAttribute("dx","25"),dp.setAttribute("dy","0"),dp.setAttribute("in",ap+"_drop_shadow_1"),dp.setAttribute("result",ap+"_drop_shadow_2"),this.feOffset=dp,_d.appendChild(dp);var fp=createNS("feFlood");fp.setAttribute("flood-color","#00ff00"),fp.setAttribute("flood-opacity","1"),fp.setAttribute("result",ap+"_drop_shadow_3"),this.feFlood=fp,_d.appendChild(fp);var pp=createNS("feComposite");pp.setAttribute("in",ap+"_drop_shadow_3"),pp.setAttribute("in2",ap+"_drop_shadow_2"),pp.setAttribute("operator","in"),pp.setAttribute("result",ap+"_drop_shadow_4"),_d.appendChild(pp);var hp=this.createMergeNode(ap,[ap+"_drop_shadow_4",sp]);_d.appendChild(hp)}extendPrototype([SVGComposableEffect],SVGDropShadowEffect),SVGDropShadowEffect.prototype.renderFrame=function(_d){if(_d||this.filterManager._mdf){if((_d||this.filterManager.effectElements[4].p._mdf)&&this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4),_d||this.filterManager.effectElements[0].p._mdf){var np=this.filterManager.effectElements[0].p.v;this.feFlood.setAttribute("flood-color",rgbToHex(Math.round(np[0]*255),Math.round(np[1]*255),Math.round(np[2]*255)))}if((_d||this.filterManager.effectElements[1].p._mdf)&&this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255),_d||this.filterManager.effectElements[2].p._mdf||this.filterManager.effectElements[3].p._mdf){var rp=this.filterManager.effectElements[3].p.v,ap=(this.filterManager.effectElements[2].p.v-90)*degToRads,sp=rp*Math.cos(ap),lp=rp*Math.sin(ap);this.feOffset.setAttribute("dx",sp),this.feOffset.setAttribute("dy",lp)}}};var _svgMatteSymbols=[];function SVGMatte3Effect(_d,np,rp){this.initialized=!1,this.filterManager=np,this.filterElem=_d,this.elem=rp,rp.matteElement=createNS("g"),rp.matteElement.appendChild(rp.layerElement),rp.matteElement.appendChild(rp.transformedElement),rp.baseElement=rp.matteElement}SVGMatte3Effect.prototype.findSymbol=function(_d){for(var np=0,rp=_svgMatteSymbols.length;np<rp;){if(_svgMatteSymbols[np]===_d)return _svgMatteSymbols[np];np+=1}return null},SVGMatte3Effect.prototype.replaceInParent=function(_d,np){var rp=_d.layerElement.parentNode;if(rp){for(var ap=rp.children,sp=0,lp=ap.length;sp<lp&&ap[sp]!==_d.layerElement;)sp+=1;var up;sp<=lp-2&&(up=ap[sp+1]);var cp=createNS("use");cp.setAttribute("href","#"+np),up?rp.insertBefore(cp,up):rp.appendChild(cp)}},SVGMatte3Effect.prototype.setElementAsMask=function(_d,np){if(!this.findSymbol(np)){var rp=createElementID(),ap=createNS("mask");ap.setAttribute("id",np.layerId),ap.setAttribute("mask-type","alpha"),_svgMatteSymbols.push(np);var sp=_d.globalData.defs;sp.appendChild(ap);var lp=createNS("symbol");lp.setAttribute("id",rp),this.replaceInParent(np,rp),lp.appendChild(np.layerElement),sp.appendChild(lp);var up=createNS("use");up.setAttribute("href","#"+rp),ap.appendChild(up),np.data.hd=!1,np.show()}_d.setMatte(np.layerId)},SVGMatte3Effect.prototype.initialize=function(){for(var _d=this.filterManager.effectElements[0].p.v,np=this.elem.comp.elements,rp=0,ap=np.length;rp<ap;)np[rp]&&np[rp].data.ind===_d&&this.setElementAsMask(this.elem,np[rp]),rp+=1;this.initialized=!0},SVGMatte3Effect.prototype.renderFrame=function(){this.initialized||this.initialize()};function SVGGaussianBlurEffect(_d,np,rp,ap){_d.setAttribute("x","-100%"),_d.setAttribute("y","-100%"),_d.setAttribute("width","300%"),_d.setAttribute("height","300%"),this.filterManager=np;var sp=createNS("feGaussianBlur");sp.setAttribute("result",ap),_d.appendChild(sp),this.feGaussianBlur=sp}SVGGaussianBlurEffect.prototype.renderFrame=function(_d){if(_d||this.filterManager._mdf){var np=.3,rp=this.filterManager.effectElements[0].p.v*np,ap=this.filterManager.effectElements[1].p.v,sp=ap==3?0:rp,lp=ap==2?0:rp;this.feGaussianBlur.setAttribute("stdDeviation",sp+" "+lp);var up=this.filterManager.effectElements[2].p.v==1?"wrap":"duplicate";this.feGaussianBlur.setAttribute("edgeMode",up)}};function TransformEffect(){}TransformEffect.prototype.init=function(_d){this.effectsManager=_d,this.type=effectTypes.TRANSFORM_EFFECT,this.matrix=new Matrix,this.opacity=-1,this._mdf=!1,this._opMdf=!1},TransformEffect.prototype.renderFrame=function(_d){if(this._opMdf=!1,this._mdf=!1,_d||this.effectsManager._mdf){var np=this.effectsManager.effectElements,rp=np[0].p.v,ap=np[1].p.v,sp=np[2].p.v===1,lp=np[3].p.v,up=sp?lp:np[4].p.v,cp=np[5].p.v,dp=np[6].p.v,fp=np[7].p.v;this.matrix.reset(),this.matrix.translate(-rp[0],-rp[1],rp[2]),this.matrix.scale(up*.01,lp*.01,1),this.matrix.rotate(-fp*degToRads),this.matrix.skewFromAxis(-cp*degToRads,(dp+90)*degToRads),this.matrix.translate(ap[0],ap[1],0),this._mdf=!0,this.opacity!==np[8].p.v&&(this.opacity=np[8].p.v,this._opMdf=!0)}};function SVGTransformEffect(_d,np){this.init(np)}extendPrototype([TransformEffect],SVGTransformEffect);function CVTransformEffect(_d){this.init(_d)}return extendPrototype([TransformEffect],CVTransformEffect),registerRenderer("canvas",CanvasRenderer),registerRenderer("html",HybridRenderer),registerRenderer("svg",SVGRenderer),ShapeModifiers.registerModifier("tm",TrimModifier),ShapeModifiers.registerModifier("pb",PuckerAndBloatModifier),ShapeModifiers.registerModifier("rp",RepeaterModifier),ShapeModifiers.registerModifier("rd",RoundCornersModifier),ShapeModifiers.registerModifier("zz",ZigZagModifier),ShapeModifiers.registerModifier("op",OffsetPathModifier),setExpressionsPlugin(Expressions),setExpressionInterfaces(getInterface),initialize$1(),initialize(),registerEffect$1(20,SVGTintFilter,!0),registerEffect$1(21,SVGFillFilter,!0),registerEffect$1(22,SVGStrokeEffect,!1),registerEffect$1(23,SVGTritoneFilter,!0),registerEffect$1(24,SVGProLevelsFilter,!0),registerEffect$1(25,SVGDropShadowEffect,!0),registerEffect$1(28,SVGMatte3Effect,!1),registerEffect$1(29,SVGGaussianBlurEffect,!0),registerEffect$1(35,SVGTransformEffect,!1),registerEffect(35,CVTransformEffect),lottie})})(lottie,lottie.exports);var lottieExports=lottie.exports;Object.defineProperty(dist,"__esModule",{value:!0});var _extends2=_extends,_extends3=_interopRequireDefault$B(_extends2),_getPrototypeOf=getPrototypeOf$2,_getPrototypeOf2=_interopRequireDefault$B(_getPrototypeOf),_classCallCheck2=classCallCheck,_classCallCheck3=_interopRequireDefault$B(_classCallCheck2),_createClass2=createClass,_createClass3=_interopRequireDefault$B(_createClass2),_possibleConstructorReturn2=possibleConstructorReturn,_possibleConstructorReturn3=_interopRequireDefault$B(_possibleConstructorReturn2),_inherits2=inherits$1,_inherits3=_interopRequireDefault$B(_inherits2),_react=reactExports,_react2=_interopRequireDefault$B(_react),_propTypes=propTypesExports,_propTypes2=_interopRequireDefault$B(_propTypes),_lottieWeb=lottieExports,_lottieWeb2=_interopRequireDefault$B(_lottieWeb);function _interopRequireDefault$B(_d){return _d&&_d.__esModule?_d:{default:_d}}var Lottie=function(_d){(0,_inherits3.default)(np,_d);function np(){var rp,ap,sp,lp;(0,_classCallCheck3.default)(this,np);for(var up=arguments.length,cp=Array(up),dp=0;dp<up;dp++)cp[dp]=arguments[dp];return lp=(ap=(sp=(0,_possibleConstructorReturn3.default)(this,(rp=np.__proto__||(0,_getPrototypeOf2.default)(np)).call.apply(rp,[this].concat(cp))),sp),sp.handleClickToPause=function(){sp.anim.isPaused?sp.anim.play():sp.anim.pause()},ap),(0,_possibleConstructorReturn3.default)(sp,lp)}return(0,_createClass3.default)(np,[{key:"componentDidMount",value:function(){var ap=this.props,sp=ap.options,lp=ap.eventListeners,up=sp.loop,cp=sp.autoplay,dp=sp.animationData,fp=sp.rendererSettings,pp=sp.segments;this.options={container:this.el,renderer:"svg",loop:up!==!1,autoplay:cp!==!1,segments:pp!==!1,animationData:dp,rendererSettings:fp},this.options=(0,_extends3.default)({},this.options,sp),this.anim=_lottieWeb2.default.loadAnimation(this.options),this.registerEvents(lp)}},{key:"componentWillUpdate",value:function(ap){this.options.animationData!==ap.options.animationData&&(this.deRegisterEvents(this.props.eventListeners),this.destroy(),this.options=(0,_extends3.default)({},this.options,ap.options),this.anim=_lottieWeb2.default.loadAnimation(this.options),this.registerEvents(ap.eventListeners))}},{key:"componentDidUpdate",value:function(){this.props.isStopped?this.stop():this.props.segments?this.playSegments():this.play(),this.pause(),this.setSpeed(),this.setDirection()}},{key:"componentWillUnmount",value:function(){this.deRegisterEvents(this.props.eventListeners),this.destroy(),this.options.animationData=null,this.anim=null}},{key:"setSpeed",value:function(){this.anim.setSpeed(this.props.speed)}},{key:"setDirection",value:function(){this.anim.setDirection(this.props.direction)}},{key:"play",value:function(){this.anim.play()}},{key:"playSegments",value:function(){this.anim.playSegments(this.props.segments)}},{key:"stop",value:function(){this.anim.stop()}},{key:"pause",value:function(){this.props.isPaused&&!this.anim.isPaused?this.anim.pause():!this.props.isPaused&&this.anim.isPaused&&this.anim.pause()}},{key:"destroy",value:function(){this.anim.destroy()}},{key:"registerEvents",value:function(ap){var sp=this;ap.forEach(function(lp){sp.anim.addEventListener(lp.eventName,lp.callback)})}},{key:"deRegisterEvents",value:function(ap){var sp=this;ap.forEach(function(lp){sp.anim.removeEventListener(lp.eventName,lp.callback)})}},{key:"render",value:function(){var ap=this,sp=this.props,lp=sp.width,up=sp.height,cp=sp.ariaRole,dp=sp.ariaLabel,fp=sp.isClickToPauseDisabled,pp=sp.title,hp=function(xp){var Sp=void 0;return typeof xp=="number"?Sp=xp+"px":Sp=xp||"100%",Sp},mp=(0,_extends3.default)({width:hp(lp),height:hp(up),overflow:"hidden",margin:"0 auto",outline:"none"},this.props.style),gp=fp?function(){return null}:this.handleClickToPause;return _react2.default.createElement("div",{ref:function(xp){ap.el=xp},style:mp,onClick:gp,title:pp,role:cp,"aria-label":dp,tabIndex:"0"})}}]),np}(_react2.default.Component),_default$d=dist.default=Lottie;Lottie.propTypes={eventListeners:_propTypes2.default.arrayOf(_propTypes2.default.object),options:_propTypes2.default.object.isRequired,height:_propTypes2.default.oneOfType([_propTypes2.default.string,_propTypes2.default.number]),width:_propTypes2.default.oneOfType([_propTypes2.default.string,_propTypes2.default.number]),isStopped:_propTypes2.default.bool,isPaused:_propTypes2.default.bool,speed:_propTypes2.default.number,segments:_propTypes2.default.arrayOf(_propTypes2.default.number),direction:_propTypes2.default.number,ariaRole:_propTypes2.default.string,ariaLabel:_propTypes2.default.string,isClickToPauseDisabled:_propTypes2.default.bool,title:_propTypes2.default.string,style:_propTypes2.default.string};Lottie.defaultProps={eventListeners:[],isStopped:!1,isPaused:!1,speed:1,ariaRole:"button",ariaLabel:"animation",isClickToPauseDisabled:!1,title:""};const v="5.3.0",fr=25,ip=0,op=36,w=420,h=420,nm="ÃÂÃÂ¥ÃÂÃÂ°ÃÂÃÂÃÂÃÂ©ÃÂÃÂ±ÃÂÃÂ¼bankÃÂÃÂ¥ÃÂÃÂÃÂÃÂ ÃÂÃÂ¨ÃÂÃÂ½ÃÂÃÂ½ÃÂÃÂ¥ÃÂÃÂÃÂÃÂ¨ÃÂÃÂ§ÃÂÃÂÃÂÃÂ» 3",ddd=0,assets=[],layers=[{ddd:0,ind:1,ty:4,nm:"ÃÂÃÂ¥ÃÂÃÂÃÂÃÂÃÂÃÂ¥ÃÂÃÂÃÂÃÂ-color",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},n:["0p833_0p833_0p167_0p167"],t:0,s:[0],e:[360]},{t:36}],ix:10},p:{a:0,k:[210,210,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[86,86],ix:2},p:{a:0,k:[0,0],ix:3},nm:"ÃÂÃÂ¦ÃÂÃÂ¤ÃÂÃÂ­ÃÂÃÂ¥ÃÂÃÂÃÂÃÂÃÂÃÂ¨ÃÂÃÂ·ÃÂÃÂ¯ÃÂÃÂ¥ÃÂÃÂ¾ÃÂÃÂ 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"st",c:{a:0,k:[.0588,.8,.8078,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:2,ix:5},lc:1,lj:1,ml:4,ml2:{a:0,k:4,ix:8},nm:"ÃÂÃÂ¦ÃÂÃÂÃÂÃÂÃÂÃÂ¨ÃÂÃÂ¾ÃÂÃÂ¹ 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[0,.9833,1,1],ix:4},o:{a:0,k:0,ix:5},r:1,nm:"ÃÂÃÂ¥ÃÂÃÂ¡ÃÂÃÂ«ÃÂÃÂ¥ÃÂÃÂÃÂÃÂ 1",mn:"ADBE Vector Graphic - Fill",hd:!0},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"ÃÂÃÂ¥ÃÂÃÂÃÂÃÂÃÂÃÂ¦ÃÂÃÂÃÂÃÂ¢"}],nm:"ÃÂÃÂ¦ÃÂÃÂ¤ÃÂÃÂ­ÃÂÃÂ¥ÃÂÃÂÃÂÃÂ 1",np:3,cix:2,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"tm",s:{a:0,k:0,ix:1},e:{a:0,k:55,ix:2},o:{a:0,k:0,ix:3},m:1,ix:2,nm:"ÃÂÃÂ¤ÃÂÃÂ¿ÃÂÃÂ®ÃÂÃÂ¥ÃÂÃÂÃÂÃÂªÃÂÃÂ¨ÃÂÃÂ·ÃÂÃÂ¯ÃÂÃÂ¥ÃÂÃÂ¾ÃÂÃÂ 1",mn:"ADBE Vector Filter - Trim",hd:!1}],ip:0,op:36,st:0,bm:0},{ddd:0,ind:2,ty:4,nm:"ÃÂÃÂ¥ÃÂÃÂ¤ÃÂÃÂÃÂÃÂ¥ÃÂÃÂÃÂÃÂ-color",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:1,k:[{i:{x:[.255],y:[1]},o:{x:[.692],y:[0]},n:["0p255_1_0p692_0"],t:0,s:[0],e:[360]},{t:36}],ix:10},p:{a:0,k:[210,210,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[100,100],ix:2},p:{a:0,k:[0,0],ix:3},nm:"ÃÂÃÂ¦ÃÂÃÂ¤ÃÂÃÂ­ÃÂÃÂ¥ÃÂÃÂÃÂÃÂÃÂÃÂ¨ÃÂÃÂ·ÃÂÃÂ¯ÃÂÃÂ¥ÃÂÃÂ¾ÃÂÃÂ 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"st",c:{a:0,k:[.02,.9837,1,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:2,ix:5},lc:1,lj:1,ml:4,ml2:{a:0,k:4,ix:8},nm:"ÃÂÃÂ¦ÃÂÃÂÃÂÃÂÃÂÃÂ¨ÃÂÃÂ¾ÃÂÃÂ¹ 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[0,.9833,1,1],ix:4},o:{a:0,k:0,ix:5},r:1,nm:"ÃÂÃÂ¥ÃÂÃÂ¡ÃÂÃÂ«ÃÂÃÂ¥ÃÂÃÂÃÂÃÂ 1",mn:"ADBE Vector Graphic - Fill",hd:!0},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"ÃÂÃÂ¥ÃÂÃÂÃÂÃÂÃÂÃÂ¦ÃÂÃÂÃÂÃÂ¢"}],nm:"ÃÂÃÂ¦ÃÂÃÂ¤ÃÂÃÂ­ÃÂÃÂ¥ÃÂÃÂÃÂÃÂ 1",np:3,cix:2,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"tm",s:{a:0,k:45,ix:1},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:3},m:1,ix:2,nm:"ÃÂÃÂ¤ÃÂÃÂ¿ÃÂÃÂ®ÃÂÃÂ¥ÃÂÃÂÃÂÃÂªÃÂÃÂ¨ÃÂÃÂ·ÃÂÃÂ¯ÃÂÃÂ¥ÃÂÃÂ¾ÃÂÃÂ 1",mn:"ADBE Vector Filter - Trim",hd:!1}],ip:0,op:36,st:0,bm:0},{ddd:0,ind:3,ty:4,nm:"ÃÂÃÂ¥ÃÂÃÂÃÂÃÂÃÂÃÂ¥ÃÂÃÂÃÂÃÂ2",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[210,210,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{d:2,ty:"el",s:{a:0,k:[86,86],ix:2},p:{a:0,k:[0,0],ix:3},nm:"ÃÂÃÂ¦ÃÂÃÂ¤ÃÂÃÂ­ÃÂÃÂ¥ÃÂÃÂÃÂÃÂÃÂÃÂ¨ÃÂÃÂ·ÃÂÃÂ¯ÃÂÃÂ¥ÃÂÃÂ¾ÃÂÃÂ 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"st",c:{a:0,k:[.3565,.973,.9835,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:.5,ix:5},lc:1,lj:1,ml:4,ml2:{a:0,k:4,ix:8},nm:"ÃÂÃÂ¦ÃÂÃÂÃÂÃÂÃÂÃÂ¨ÃÂÃÂ¾ÃÂÃÂ¹ 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[0,.9833,1,1],ix:4},o:{a:0,k:0,ix:5},r:1,nm:"ÃÂÃÂ¥ÃÂÃÂ¡ÃÂÃÂ«ÃÂÃÂ¥ÃÂÃÂÃÂÃÂ 1",mn:"ADBE Vector Graphic - Fill",hd:!0},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"ÃÂÃÂ¥ÃÂÃÂÃÂÃÂÃÂÃÂ¦ÃÂÃÂÃÂÃÂ¢"}],nm:"ÃÂÃÂ¦ÃÂÃÂ¤ÃÂÃÂ­ÃÂÃÂ¥ÃÂÃÂÃÂÃÂ 1",np:3,cix:2,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:36,st:0,bm:0},{ddd:0,ind:4,ty:4,nm:"ÃÂÃÂ¥ÃÂÃÂ¤ÃÂÃÂÃÂÃÂ¥ÃÂÃÂÃÂÃÂ 2",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[210,210,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{d:2,ty:"el",s:{a:0,k:[100,100],ix:2},p:{a:0,k:[0,0],ix:3},nm:"ÃÂÃÂ¦ÃÂÃÂ¤ÃÂÃÂ­ÃÂÃÂ¥ÃÂÃÂÃÂÃÂÃÂÃÂ¨ÃÂÃÂ·ÃÂÃÂ¯ÃÂÃÂ¥ÃÂÃÂ¾ÃÂÃÂ 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"st",c:{a:0,k:[.3565,.973,.9835,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:.5,ix:5},lc:1,lj:1,ml:4,ml2:{a:0,k:4,ix:8},nm:"ÃÂÃÂ¦ÃÂÃÂÃÂÃÂÃÂÃÂ¨ÃÂÃÂ¾ÃÂÃÂ¹ 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[0,.9833,1,1],ix:4},o:{a:0,k:0,ix:5},r:1,nm:"ÃÂÃÂ¥ÃÂÃÂ¡ÃÂÃÂ«ÃÂÃÂ¥ÃÂÃÂÃÂÃÂ 1",mn:"ADBE Vector Graphic - Fill",hd:!0},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"ÃÂÃÂ¥ÃÂÃÂÃÂÃÂÃÂÃÂ¦ÃÂÃÂÃÂÃÂ¢"}],nm:"ÃÂÃÂ¦ÃÂÃÂ¤ÃÂÃÂ­ÃÂÃÂ¥ÃÂÃÂÃÂÃÂ 1",np:3,cix:2,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:36,st:0,bm:0},{ddd:0,ind:5,ty:4,nm:"ÃÂÃÂ¢ÃÂÃÂÃÂÃÂlogoÃÂÃÂ¢ÃÂÃÂÃÂÃÂÃÂÃÂ¨ÃÂÃÂ½ÃÂÃÂ®ÃÂÃÂ¥ÃÂÃÂ»ÃÂÃÂ",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[208.622,209.988,0],ix:2},a:{a:0,k:[54.174,78.291,0],ix:1},s:{a:0,k:[26.271,26.271,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[-14.167,31.912],[-.335,-.028],[.002,-.191],[-22.44,-3.776],[.004,-.492],[.206,-.138],[1.045,-.419],[1.127,-3.361],[-1.678,-3.055],[-2.479,-2.394],[.212,-.301],[.277,.064]],o:[[.13,-.292],[.353,.029],[-.197,12.159],[0,0],[-.002,.197],[-.634,.39],[-2.681,1.083],[-.815,2.444],[1.727,2.632],[.18,.195],[-.193,.283],[-14.913,-3.405]],v:[[-8.511,-29.885],[-7.899,-30.323],[-7.546,-29.755],[21.818,3.699],[22.675,4.336],[22.23,4.832],[17.159,6.642],[9.628,13.113],[10.821,21.512],[17.125,29.236],[17.344,30.067],[16.57,30.286]],c:!0},ix:2},nm:"ÃÂÃÂ¨ÃÂÃÂ·ÃÂÃÂ¯ÃÂÃÂ¥ÃÂÃÂ¾ÃÂÃÂ 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.0588,.8,.8078,1],ix:4},o:{a:0,k:100,ix:5},r:1,nm:"ÃÂÃÂ¥ÃÂÃÂ¡ÃÂÃÂ«ÃÂÃÂ¥ÃÂÃÂÃÂÃÂ 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[24.88,125.982],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"ÃÂÃÂ¥ÃÂÃÂÃÂÃÂÃÂÃÂ¦ÃÂÃÂÃÂÃÂ¢"}],nm:"ÃÂÃÂ§ÃÂÃÂ»ÃÂÃÂ 1",np:2,cix:2,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[.589,.054],[.073,.232],[-31.885,17.507],[-2.506,7.457],[-.305,.078],[-.239,-.156],[-7.832,-2.191],[-3.3,-7.085],[15.975,-9.305],[-.435,-8.576],[.353,-.144],[.275,.094],[.385,8.119],[.396,-.149],[6.401,-32.182]],o:[[-.205,-.005],[-7.433,-37.263],[-3.05,-3.348],[.156,-.201],[.278,-.075],[2.335,2.38],[17.1,-4.919],[3.647,7.812],[-2.4,4.172],[-.049,.3],[-.258,.094],[-2.609,-1.606],[-.402,.157],[-20.463,7.248],[0,0]],v:[[-46.097,54.653],[-46.49,54.188],[-3.872,-37.941],[-7.305,-54.22],[-6.633,-54.632],[-5.849,-54.42],[10.528,-44.17],[50.276,-40.515],[25.174,-9.846],[20.995,9.197],[20.468,9.953],[19.657,9.929],[11.774,-3.43],[10.588,-2.955],[-45.407,53.818]],c:!0},ix:2},nm:"ÃÂÃÂ¨ÃÂÃÂ·ÃÂÃÂ¯ÃÂÃÂ¥ÃÂÃÂ¾ÃÂÃÂ 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.2036,.9045,.9164,1],ix:4},o:{a:0,k:100,ix:5},r:1,nm:"ÃÂÃÂ¥ÃÂÃÂ¡ÃÂÃÂ«ÃÂÃÂ¥ÃÂÃÂÃÂÃÂ 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[54.174,54.957],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"ÃÂÃÂ¥ÃÂÃÂÃÂÃÂÃÂÃÂ¦ÃÂÃÂÃÂÃÂ¢"}],nm:"ÃÂÃÂ§ÃÂÃÂ»ÃÂÃÂ 2",np:2,cix:2,ix:2,mn:"ADBE Vector Group",hd:!1}],ip:0,op:36,st:0,bm:0}],markers=[],animationData={v,fr,ip,op,w,h,nm,ddd,assets,layers,markers},Loading=({hidden:_d})=>{const np={loop:!0,autoplay:!0,animationData,rendererSettings:{preserveAspectRatio:"xMidYMid slice"}};return jsxRuntimeExports.jsx("div",{className:"dot-spinner",style:{display:_d&&"none"},children:jsxRuntimeExports.jsx(_default$d,{options:np,speed:1.5})})};var InfoOutlined={},_interopRequireDefault$A=interopRequireDefaultExports;Object.defineProperty(InfoOutlined,"__esModule",{value:!0});var default_1$r=InfoOutlined.default=void 0,_createSvgIcon$r=_interopRequireDefault$A(requireCreateSvgIcon()),_jsxRuntime$r=jsxRuntimeExports;default_1$r=InfoOutlined.default=(0,_createSvgIcon$r.default)((0,_jsxRuntime$r.jsx)("path",{d:"M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"}),"InfoOutlined");const URL$2="/my_model/",ImageResultPage=()=>{const np=useLocation().state.value,rp=reactExports.useRef(null),ap=reactExports.useRef(null),[sp,lp]=reactExports.useState(null),[up,cp]=reactExports.useState([]);reactExports.useState(!1);const dp=async()=>{if(console.log(ap.current),console.log(rp.current),ap.current&&rp.current)try{let pp=rp.current;const hp=await ap.current.predict(pp,!1);hp.sort((gp,vp)=>parseFloat(vp.probability)-parseFloat(gp.probability));const mp=hp[0].className;console.log(mp),lp(mp)}catch(pp){console.error("Prediction error:",pp)}},fp=async()=>{try{const pp=URL$2+"model.json",hp=URL$2+"metadata.json",mp=await dist$1.load(pp,hp);ap.current=mp,await dp()}catch(pp){console.error("Model loading error:",pp)}};return reactExports.useEffect(()=>(fp(),()=>{rp.current=null}),[]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"result",style:{display:!sp&&"none"},children:[jsxRuntimeExports.jsx(Header,{centerText:"분석완료",align:"center"}),jsxRuntimeExports.jsxs("div",{className:"result-body",children:[jsxRuntimeExports.jsx("div",{className:"result-img",children:jsxRuntimeExports.jsx("img",{className:"ml-result",src:np,ref:rp,alt:""})}),jsxRuntimeExports.jsxs("div",{className:"result-content",children:[jsxRuntimeExports.jsxs("div",{className:"result-fish",children:[jsxRuntimeExports.jsx("div",{className:"result-name",children:sp}),jsxRuntimeExports.jsx("div",{className:"result-detail",children:"자세히 보기"})]}),jsxRuntimeExports.jsxs("div",{className:"fish-reviews",children:[jsxRuntimeExports.jsxs("h3",{className:"reviews-title",children:[sp,"의 리뷰"]}),jsxRuntimeExports.jsx("div",{className:"wrapper",children:up.length?up.map(pp=>jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("img",{src:"https://cdn.iconsumer.or.kr/news/photo/201806/7349_8772_1719.jpg"},pp),jsxRuntimeExports.jsx("div",{children:pp})]})):jsxRuntimeExports.jsx("div",{className:"none-data",children:"정보를 준비 중입니다."})})]})]})]})]}),jsxRuntimeExports.jsx(Loading,{hidden:sp})]})};function bind(_d,np){return function(){return _d.apply(np,arguments)}}const{toString}=Object.prototype,{getPrototypeOf}=Object,kindOf=(_d=>np=>{const rp=toString.call(np);return _d[rp]||(_d[rp]=rp.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=_d=>(_d=_d.toLowerCase(),np=>kindOf(np)===_d),typeOfTest=_d=>np=>typeof np===_d,{isArray}=Array,isUndefined$1=typeOfTest("undefined");function isBuffer(_d){return _d!==null&&!isUndefined$1(_d)&&_d.constructor!==null&&!isUndefined$1(_d.constructor)&&isFunction$1(_d.constructor.isBuffer)&&_d.constructor.isBuffer(_d)}const isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView(_d){let np;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?np=ArrayBuffer.isView(_d):np=_d&&_d.buffer&&isArrayBuffer(_d.buffer),np}const isString=typeOfTest("string"),isFunction$1=typeOfTest("function"),isNumber$1=typeOfTest("number"),isObject$1=_d=>_d!==null&&typeof _d=="object",isBoolean=_d=>_d===!0||_d===!1,isPlainObject$1=_d=>{if(kindOf(_d)!=="object")return!1;const np=getPrototypeOf(_d);return(np===null||np===Object.prototype||Object.getPrototypeOf(np)===null)&&!(Symbol.toStringTag in _d)&&!(Symbol.iterator in _d)},isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=_d=>isObject$1(_d)&&isFunction$1(_d.pipe),isFormData=_d=>{let np;return _d&&(typeof FormData=="function"&&_d instanceof FormData||isFunction$1(_d.append)&&((np=kindOf(_d))==="formdata"||np==="object"&&isFunction$1(_d.toString)&&_d.toString()==="[object FormData]"))},isURLSearchParams=kindOfTest("URLSearchParams"),trim=_d=>_d.trim?_d.trim():_d.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach$1(_d,np,{allOwnKeys:rp=!1}={}){if(_d===null||typeof _d>"u")return;let ap,sp;if(typeof _d!="object"&&(_d=[_d]),isArray(_d))for(ap=0,sp=_d.length;ap<sp;ap++)np.call(null,_d[ap],ap,_d);else{const lp=rp?Object.getOwnPropertyNames(_d):Object.keys(_d),up=lp.length;let cp;for(ap=0;ap<up;ap++)cp=lp[ap],np.call(null,_d[cp],cp,_d)}}function findKey(_d,np){np=np.toLowerCase();const rp=Object.keys(_d);let ap=rp.length,sp;for(;ap-- >0;)if(sp=rp[ap],np===sp.toLowerCase())return sp;return null}const _global=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,isContextDefined=_d=>!isUndefined$1(_d)&&_d!==_global;function merge(){const{caseless:_d}=isContextDefined(this)&&this||{},np={},rp=(ap,sp)=>{const lp=_d&&findKey(np,sp)||sp;isPlainObject$1(np[lp])&&isPlainObject$1(ap)?np[lp]=merge(np[lp],ap):isPlainObject$1(ap)?np[lp]=merge({},ap):isArray(ap)?np[lp]=ap.slice():np[lp]=ap};for(let ap=0,sp=arguments.length;ap<sp;ap++)arguments[ap]&&forEach$1(arguments[ap],rp);return np}const extend=(_d,np,rp,{allOwnKeys:ap}={})=>(forEach$1(np,(sp,lp)=>{rp&&isFunction$1(sp)?_d[lp]=bind(sp,rp):_d[lp]=sp},{allOwnKeys:ap}),_d),stripBOM=_d=>(_d.charCodeAt(0)===65279&&(_d=_d.slice(1)),_d),inherits=(_d,np,rp,ap)=>{_d.prototype=Object.create(np.prototype,ap),_d.prototype.constructor=_d,Object.defineProperty(_d,"super",{value:np.prototype}),rp&&Object.assign(_d.prototype,rp)},toFlatObject=(_d,np,rp,ap)=>{let sp,lp,up;const cp={};if(np=np||{},_d==null)return np;do{for(sp=Object.getOwnPropertyNames(_d),lp=sp.length;lp-- >0;)up=sp[lp],(!ap||ap(up,_d,np))&&!cp[up]&&(np[up]=_d[up],cp[up]=!0);_d=rp!==!1&&getPrototypeOf(_d)}while(_d&&(!rp||rp(_d,np))&&_d!==Object.prototype);return np},endsWith=(_d,np,rp)=>{_d=String(_d),(rp===void 0||rp>_d.length)&&(rp=_d.length),rp-=np.length;const ap=_d.indexOf(np,rp);return ap!==-1&&ap===rp},toArray$1=_d=>{if(!_d)return null;if(isArray(_d))return _d;let np=_d.length;if(!isNumber$1(np))return null;const rp=new Array(np);for(;np-- >0;)rp[np]=_d[np];return rp},isTypedArray=(_d=>np=>_d&&np instanceof _d)(typeof Uint8Array<"u"&&getPrototypeOf(Uint8Array)),forEachEntry=(_d,np)=>{const ap=(_d&&_d[Symbol.iterator]).call(_d);let sp;for(;(sp=ap.next())&&!sp.done;){const lp=sp.value;np.call(_d,lp[0],lp[1])}},matchAll=(_d,np)=>{let rp;const ap=[];for(;(rp=_d.exec(np))!==null;)ap.push(rp);return ap},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase=_d=>_d.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(rp,ap,sp){return ap.toUpperCase()+sp}),hasOwnProperty$1=(({hasOwnProperty:_d})=>(np,rp)=>_d.call(np,rp))(Object.prototype),isRegExp=kindOfTest("RegExp"),reduceDescriptors=(_d,np)=>{const rp=Object.getOwnPropertyDescriptors(_d),ap={};forEach$1(rp,(sp,lp)=>{let up;(up=np(sp,lp,_d))!==!1&&(ap[lp]=up||sp)}),Object.defineProperties(_d,ap)},freezeMethods=_d=>{reduceDescriptors(_d,(np,rp)=>{if(isFunction$1(_d)&&["arguments","caller","callee"].indexOf(rp)!==-1)return!1;const ap=_d[rp];if(isFunction$1(ap)){if(np.enumerable=!1,"writable"in np){np.writable=!1;return}np.set||(np.set=()=>{throw Error("Can not rewrite read-only method '"+rp+"'")})}})},toObjectSet=(_d,np)=>{const rp={},ap=sp=>{sp.forEach(lp=>{rp[lp]=!0})};return isArray(_d)?ap(_d):ap(String(_d).split(np)),rp},noop=()=>{},toFiniteNumber=(_d,np)=>(_d=+_d,Number.isFinite(_d)?_d:np),ALPHA="abcdefghijklmnopqrstuvwxyz",DIGIT="0123456789",ALPHABET={DIGIT,ALPHA,ALPHA_DIGIT:ALPHA+ALPHA.toUpperCase()+DIGIT},generateString=(_d=16,np=ALPHABET.ALPHA_DIGIT)=>{let rp="";const{length:ap}=np;for(;_d--;)rp+=np[Math.random()*ap|0];return rp};function isSpecCompliantForm(_d){return!!(_d&&isFunction$1(_d.append)&&_d[Symbol.toStringTag]==="FormData"&&_d[Symbol.iterator])}const toJSONObject=_d=>{const np=new Array(10),rp=(ap,sp)=>{if(isObject$1(ap)){if(np.indexOf(ap)>=0)return;if(!("toJSON"in ap)){np[sp]=ap;const lp=isArray(ap)?[]:{};return forEach$1(ap,(up,cp)=>{const dp=rp(up,sp+1);!isUndefined$1(dp)&&(lp[cp]=dp)}),np[sp]=void 0,lp}}return ap};return rp(_d,0)},isAsyncFn=kindOfTest("AsyncFunction"),isThenable=_d=>_d&&(isObject$1(_d)||isFunction$1(_d))&&isFunction$1(_d.then)&&isFunction$1(_d.catch),utils$1={isArray,isArrayBuffer,isBuffer,isFormData,isArrayBufferView,isString,isNumber:isNumber$1,isBoolean,isObject:isObject$1,isPlainObject:isPlainObject$1,isUndefined:isUndefined$1,isDate,isFile,isBlob,isRegExp,isFunction:isFunction$1,isStream,isURLSearchParams,isTypedArray,isFileList,forEach:forEach$1,merge,extend,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray:toArray$1,forEachEntry,matchAll,isHTMLForm,hasOwnProperty:hasOwnProperty$1,hasOwnProp:hasOwnProperty$1,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase,noop,toFiniteNumber,findKey,global:_global,isContextDefined,ALPHABET,generateString,isSpecCompliantForm,toJSONObject,isAsyncFn,isThenable};function AxiosError(_d,np,rp,ap,sp){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=_d,this.name="AxiosError",np&&(this.code=np),rp&&(this.config=rp),ap&&(this.request=ap),sp&&(this.response=sp)}utils$1.inherits(AxiosError,Error,{toJSON:function _d(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils$1.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const prototype$1=AxiosError.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(_d=>{descriptors[_d]={value:_d}});Object.defineProperties(AxiosError,descriptors);Object.defineProperty(prototype$1,"isAxiosError",{value:!0});AxiosError.from=(_d,np,rp,ap,sp,lp)=>{const up=Object.create(prototype$1);return utils$1.toFlatObject(_d,up,function(dp){return dp!==Error.prototype},cp=>cp!=="isAxiosError"),AxiosError.call(up,_d.message,np,rp,ap,sp),up.cause=_d,up.name=_d.name,lp&&Object.assign(up,lp),up};const httpAdapter=null;function isVisitable(_d){return utils$1.isPlainObject(_d)||utils$1.isArray(_d)}function removeBrackets(_d){return utils$1.endsWith(_d,"[]")?_d.slice(0,-2):_d}function renderKey(_d,np,rp){return _d?_d.concat(np).map(function(sp,lp){return sp=removeBrackets(sp),!rp&&lp?"["+sp+"]":sp}).join(rp?".":""):np}function isFlatArray(_d){return utils$1.isArray(_d)&&!_d.some(isVisitable)}const predicates=utils$1.toFlatObject(utils$1,{},null,function _d(np){return/^is[A-Z]/.test(np)});function toFormData(_d,np,rp){if(!utils$1.isObject(_d))throw new TypeError("target must be an object");np=np||new FormData,rp=utils$1.toFlatObject(rp,{metaTokens:!0,dots:!1,indexes:!1},!1,function(xp,Sp){return!utils$1.isUndefined(Sp[xp])});const ap=rp.metaTokens,sp=rp.visitor||pp,lp=rp.dots,up=rp.indexes,dp=(rp.Blob||typeof Blob<"u"&&Blob)&&utils$1.isSpecCompliantForm(np);if(!utils$1.isFunction(sp))throw new TypeError("visitor must be a function");function fp(vp){if(vp===null)return"";if(utils$1.isDate(vp))return vp.toISOString();if(!dp&&utils$1.isBlob(vp))throw new AxiosError("Blob is not supported. Use a Buffer instead.");return utils$1.isArrayBuffer(vp)||utils$1.isTypedArray(vp)?dp&&typeof Blob=="function"?new Blob([vp]):Buffer.from(vp):vp}function pp(vp,xp,Sp){let yp=vp;if(vp&&!Sp&&typeof vp=="object"){if(utils$1.endsWith(xp,"{}"))xp=ap?xp:xp.slice(0,-2),vp=JSON.stringify(vp);else if(utils$1.isArray(vp)&&isFlatArray(vp)||(utils$1.isFileList(vp)||utils$1.endsWith(xp,"[]"))&&(yp=utils$1.toArray(vp)))return xp=removeBrackets(xp),yp.forEach(function(Ep,wp){!(utils$1.isUndefined(Ep)||Ep===null)&&np.append(up===!0?renderKey([xp],wp,lp):up===null?xp:xp+"[]",fp(Ep))}),!1}return isVisitable(vp)?!0:(np.append(renderKey(Sp,xp,lp),fp(vp)),!1)}const hp=[],mp=Object.assign(predicates,{defaultVisitor:pp,convertValue:fp,isVisitable});function gp(vp,xp){if(!utils$1.isUndefined(vp)){if(hp.indexOf(vp)!==-1)throw Error("Circular reference detected in "+xp.join("."));hp.push(vp),utils$1.forEach(vp,function(yp,bp){(!(utils$1.isUndefined(yp)||yp===null)&&sp.call(np,yp,utils$1.isString(bp)?bp.trim():bp,xp,mp))===!0&&gp(yp,xp?xp.concat(bp):[bp])}),hp.pop()}}if(!utils$1.isObject(_d))throw new TypeError("data must be an object");return gp(_d),np}function encode$1(_d){const np={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(_d).replace(/[!'()~]|%20|%00/g,function(ap){return np[ap]})}function AxiosURLSearchParams(_d,np){this._pairs=[],_d&&toFormData(_d,this,np)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function _d(np,rp){this._pairs.push([np,rp])};prototype.toString=function _d(np){const rp=np?function(ap){return np.call(this,ap,encode$1)}:encode$1;return this._pairs.map(function(sp){return rp(sp[0])+"="+rp(sp[1])},"").join("&")};function encode(_d){return encodeURIComponent(_d).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL(_d,np,rp){if(!np)return _d;const ap=rp&&rp.encode||encode,sp=rp&&rp.serialize;let lp;if(sp?lp=sp(np,rp):lp=utils$1.isURLSearchParams(np)?np.toString():new AxiosURLSearchParams(np,rp).toString(ap),lp){const up=_d.indexOf("#");up!==-1&&(_d=_d.slice(0,up)),_d+=(_d.indexOf("?")===-1?"?":"&")+lp}return _d}class InterceptorManager{constructor(){this.handlers=[]}use(np,rp,ap){return this.handlers.push({fulfilled:np,rejected:rp,synchronous:ap?ap.synchronous:!1,runWhen:ap?ap.runWhen:null}),this.handlers.length-1}eject(np){this.handlers[np]&&(this.handlers[np]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(np){utils$1.forEach(this.handlers,function(ap){ap!==null&&np(ap)})}}const transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$1=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams,FormData$1=typeof FormData<"u"?FormData:null,Blob$1=typeof Blob<"u"?Blob:null,platform$8={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$1,Blob:Blob$1},protocols:["http","https","file","blob","url","data"]},hasBrowserEnv=typeof window<"u"&&typeof document<"u",hasStandardBrowserEnv=(_d=>hasBrowserEnv&&["ReactNative","NativeScript","NS"].indexOf(_d)<0)(typeof navigator<"u"&&navigator.product),hasStandardBrowserWebWorkerEnv=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",utils=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv,hasStandardBrowserEnv,hasStandardBrowserWebWorkerEnv},Symbol.toStringTag,{value:"Module"})),platform$7={...utils,...platform$8};function toURLEncodedForm(_d,np){return toFormData(_d,new platform$7.classes.URLSearchParams,Object.assign({visitor:function(rp,ap,sp,lp){return platform$7.isNode&&utils$1.isBuffer(rp)?(this.append(ap,rp.toString("base64")),!1):lp.defaultVisitor.apply(this,arguments)}},np))}function parsePropPath(_d){return utils$1.matchAll(/\w+|\[(\w*)]/g,_d).map(np=>np[0]==="[]"?"":np[1]||np[0])}function arrayToObject(_d){const np={},rp=Object.keys(_d);let ap;const sp=rp.length;let lp;for(ap=0;ap<sp;ap++)lp=rp[ap],np[lp]=_d[lp];return np}function formDataToJSON(_d){function np(rp,ap,sp,lp){let up=rp[lp++];if(up==="__proto__")return!0;const cp=Number.isFinite(+up),dp=lp>=rp.length;return up=!up&&utils$1.isArray(sp)?sp.length:up,dp?(utils$1.hasOwnProp(sp,up)?sp[up]=[sp[up],ap]:sp[up]=ap,!cp):((!sp[up]||!utils$1.isObject(sp[up]))&&(sp[up]=[]),np(rp,ap,sp[up],lp)&&utils$1.isArray(sp[up])&&(sp[up]=arrayToObject(sp[up])),!cp)}if(utils$1.isFormData(_d)&&utils$1.isFunction(_d.entries)){const rp={};return utils$1.forEachEntry(_d,(ap,sp)=>{np(parsePropPath(ap),sp,rp,0)}),rp}return null}function stringifySafely(_d,np,rp){if(utils$1.isString(_d))try{return(np||JSON.parse)(_d),utils$1.trim(_d)}catch(ap){if(ap.name!=="SyntaxError")throw ap}return(rp||JSON.stringify)(_d)}const defaults={transitional:transitionalDefaults,adapter:["xhr","http"],transformRequest:[function _d(np,rp){const ap=rp.getContentType()||"",sp=ap.indexOf("application/json")>-1,lp=utils$1.isObject(np);if(lp&&utils$1.isHTMLForm(np)&&(np=new FormData(np)),utils$1.isFormData(np))return sp?JSON.stringify(formDataToJSON(np)):np;if(utils$1.isArrayBuffer(np)||utils$1.isBuffer(np)||utils$1.isStream(np)||utils$1.isFile(np)||utils$1.isBlob(np))return np;if(utils$1.isArrayBufferView(np))return np.buffer;if(utils$1.isURLSearchParams(np))return rp.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),np.toString();let cp;if(lp){if(ap.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(np,this.formSerializer).toString();if((cp=utils$1.isFileList(np))||ap.indexOf("multipart/form-data")>-1){const dp=this.env&&this.env.FormData;return toFormData(cp?{"files[]":np}:np,dp&&new dp,this.formSerializer)}}return lp||sp?(rp.setContentType("application/json",!1),stringifySafely(np)):np}],transformResponse:[function _d(np){const rp=this.transitional||defaults.transitional,ap=rp&&rp.forcedJSONParsing,sp=this.responseType==="json";if(np&&utils$1.isString(np)&&(ap&&!this.responseType||sp)){const up=!(rp&&rp.silentJSONParsing)&&sp;try{return JSON.parse(np)}catch(cp){if(up)throw cp.name==="SyntaxError"?AxiosError.from(cp,AxiosError.ERR_BAD_RESPONSE,this,null,this.response):cp}}return np}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform$7.classes.FormData,Blob:platform$7.classes.Blob},validateStatus:function _d(np){return np>=200&&np<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};utils$1.forEach(["delete","get","head","post","put","patch"],_d=>{defaults.headers[_d]={}});const defaults$1=defaults,ignoreDuplicateOf=utils$1.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders=_d=>{const np={};let rp,ap,sp;return _d&&_d.split(`
`).forEach(function(up){sp=up.indexOf(":"),rp=up.substring(0,sp).trim().toLowerCase(),ap=up.substring(sp+1).trim(),!(!rp||np[rp]&&ignoreDuplicateOf[rp])&&(rp==="set-cookie"?np[rp]?np[rp].push(ap):np[rp]=[ap]:np[rp]=np[rp]?np[rp]+", "+ap:ap)}),np},$internals=Symbol("internals");function normalizeHeader(_d){return _d&&String(_d).trim().toLowerCase()}function normalizeValue(_d){return _d===!1||_d==null?_d:utils$1.isArray(_d)?_d.map(normalizeValue):String(_d)}function parseTokens(_d){const np=Object.create(null),rp=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let ap;for(;ap=rp.exec(_d);)np[ap[1]]=ap[2];return np}const isValidHeaderName=_d=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(_d.trim());function matchHeaderValue(_d,np,rp,ap,sp){if(utils$1.isFunction(ap))return ap.call(this,np,rp);if(sp&&(np=rp),!!utils$1.isString(np)){if(utils$1.isString(ap))return np.indexOf(ap)!==-1;if(utils$1.isRegExp(ap))return ap.test(np)}}function formatHeader(_d){return _d.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(np,rp,ap)=>rp.toUpperCase()+ap)}function buildAccessors(_d,np){const rp=utils$1.toCamelCase(" "+np);["get","set","has"].forEach(ap=>{Object.defineProperty(_d,ap+rp,{value:function(sp,lp,up){return this[ap].call(this,np,sp,lp,up)},configurable:!0})})}class AxiosHeaders{constructor(np){np&&this.set(np)}set(np,rp,ap){const sp=this;function lp(cp,dp,fp){const pp=normalizeHeader(dp);if(!pp)throw new Error("header name must be a non-empty string");const hp=utils$1.findKey(sp,pp);(!hp||sp[hp]===void 0||fp===!0||fp===void 0&&sp[hp]!==!1)&&(sp[hp||dp]=normalizeValue(cp))}const up=(cp,dp)=>utils$1.forEach(cp,(fp,pp)=>lp(fp,pp,dp));return utils$1.isPlainObject(np)||np instanceof this.constructor?up(np,rp):utils$1.isString(np)&&(np=np.trim())&&!isValidHeaderName(np)?up(parseHeaders(np),rp):np!=null&&lp(rp,np,ap),this}get(np,rp){if(np=normalizeHeader(np),np){const ap=utils$1.findKey(this,np);if(ap){const sp=this[ap];if(!rp)return sp;if(rp===!0)return parseTokens(sp);if(utils$1.isFunction(rp))return rp.call(this,sp,ap);if(utils$1.isRegExp(rp))return rp.exec(sp);throw new TypeError("parser must be boolean|regexp|function")}}}has(np,rp){if(np=normalizeHeader(np),np){const ap=utils$1.findKey(this,np);return!!(ap&&this[ap]!==void 0&&(!rp||matchHeaderValue(this,this[ap],ap,rp)))}return!1}delete(np,rp){const ap=this;let sp=!1;function lp(up){if(up=normalizeHeader(up),up){const cp=utils$1.findKey(ap,up);cp&&(!rp||matchHeaderValue(ap,ap[cp],cp,rp))&&(delete ap[cp],sp=!0)}}return utils$1.isArray(np)?np.forEach(lp):lp(np),sp}clear(np){const rp=Object.keys(this);let ap=rp.length,sp=!1;for(;ap--;){const lp=rp[ap];(!np||matchHeaderValue(this,this[lp],lp,np,!0))&&(delete this[lp],sp=!0)}return sp}normalize(np){const rp=this,ap={};return utils$1.forEach(this,(sp,lp)=>{const up=utils$1.findKey(ap,lp);if(up){rp[up]=normalizeValue(sp),delete rp[lp];return}const cp=np?formatHeader(lp):String(lp).trim();cp!==lp&&delete rp[lp],rp[cp]=normalizeValue(sp),ap[cp]=!0}),this}concat(...np){return this.constructor.concat(this,...np)}toJSON(np){const rp=Object.create(null);return utils$1.forEach(this,(ap,sp)=>{ap!=null&&ap!==!1&&(rp[sp]=np&&utils$1.isArray(ap)?ap.join(", "):ap)}),rp}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([np,rp])=>np+": "+rp).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(np){return np instanceof this?np:new this(np)}static concat(np,...rp){const ap=new this(np);return rp.forEach(sp=>ap.set(sp)),ap}static accessor(np){const ap=(this[$internals]=this[$internals]={accessors:{}}).accessors,sp=this.prototype;function lp(up){const cp=normalizeHeader(up);ap[cp]||(buildAccessors(sp,up),ap[cp]=!0)}return utils$1.isArray(np)?np.forEach(lp):lp(np),this}}AxiosHeaders.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);utils$1.reduceDescriptors(AxiosHeaders.prototype,({value:_d},np)=>{let rp=np[0].toUpperCase()+np.slice(1);return{get:()=>_d,set(ap){this[rp]=ap}}});utils$1.freezeMethods(AxiosHeaders);const AxiosHeaders$1=AxiosHeaders;function transformData(_d,np){const rp=this||defaults$1,ap=np||rp,sp=AxiosHeaders$1.from(ap.headers);let lp=ap.data;return utils$1.forEach(_d,function(cp){lp=cp.call(rp,lp,sp.normalize(),np?np.status:void 0)}),sp.normalize(),lp}function isCancel(_d){return!!(_d&&_d.__CANCEL__)}function CanceledError(_d,np,rp){AxiosError.call(this,_d??"canceled",AxiosError.ERR_CANCELED,np,rp),this.name="CanceledError"}utils$1.inherits(CanceledError,AxiosError,{__CANCEL__:!0});function settle(_d,np,rp){const ap=rp.config.validateStatus;!rp.status||!ap||ap(rp.status)?_d(rp):np(new AxiosError("Request failed with status code "+rp.status,[AxiosError.ERR_BAD_REQUEST,AxiosError.ERR_BAD_RESPONSE][Math.floor(rp.status/100)-4],rp.config,rp.request,rp))}const cookies=platform$7.hasStandardBrowserEnv?{write(_d,np,rp,ap,sp,lp){const up=[_d+"="+encodeURIComponent(np)];utils$1.isNumber(rp)&&up.push("expires="+new Date(rp).toGMTString()),utils$1.isString(ap)&&up.push("path="+ap),utils$1.isString(sp)&&up.push("domain="+sp),lp===!0&&up.push("secure"),document.cookie=up.join("; ")},read(_d){const np=document.cookie.match(new RegExp("(^|;\\s*)("+_d+")=([^;]*)"));return np?decodeURIComponent(np[3]):null},remove(_d){this.write(_d,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function isAbsoluteURL(_d){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(_d)}function combineURLs(_d,np){return np?_d.replace(/\/?\/$/,"")+"/"+np.replace(/^\/+/,""):_d}function buildFullPath(_d,np){return _d&&!isAbsoluteURL(np)?combineURLs(_d,np):np}const isURLSameOrigin=platform$7.hasStandardBrowserEnv?function _d(){const np=/(msie|trident)/i.test(navigator.userAgent),rp=document.createElement("a");let ap;function sp(lp){let up=lp;return np&&(rp.setAttribute("href",up),up=rp.href),rp.setAttribute("href",up),{href:rp.href,protocol:rp.protocol?rp.protocol.replace(/:$/,""):"",host:rp.host,search:rp.search?rp.search.replace(/^\?/,""):"",hash:rp.hash?rp.hash.replace(/^#/,""):"",hostname:rp.hostname,port:rp.port,pathname:rp.pathname.charAt(0)==="/"?rp.pathname:"/"+rp.pathname}}return ap=sp(window.location.href),function(up){const cp=utils$1.isString(up)?sp(up):up;return cp.protocol===ap.protocol&&cp.host===ap.host}}():function _d(){return function(){return!0}}();function parseProtocol(_d){const np=/^([-+\w]{1,25})(:?\/\/|:)/.exec(_d);return np&&np[1]||""}function speedometer(_d,np){_d=_d||10;const rp=new Array(_d),ap=new Array(_d);let sp=0,lp=0,up;return np=np!==void 0?np:1e3,function(dp){const fp=Date.now(),pp=ap[lp];up||(up=fp),rp[sp]=dp,ap[sp]=fp;let hp=lp,mp=0;for(;hp!==sp;)mp+=rp[hp++],hp=hp%_d;if(sp=(sp+1)%_d,sp===lp&&(lp=(lp+1)%_d),fp-up<np)return;const gp=pp&&fp-pp;return gp?Math.round(mp*1e3/gp):void 0}}function progressEventReducer(_d,np){let rp=0;const ap=speedometer(50,250);return sp=>{const lp=sp.loaded,up=sp.lengthComputable?sp.total:void 0,cp=lp-rp,dp=ap(cp),fp=lp<=up;rp=lp;const pp={loaded:lp,total:up,progress:up?lp/up:void 0,bytes:cp,rate:dp||void 0,estimated:dp&&up&&fp?(up-lp)/dp:void 0,event:sp};pp[np?"download":"upload"]=!0,_d(pp)}}const isXHRAdapterSupported=typeof XMLHttpRequest<"u",xhrAdapter=isXHRAdapterSupported&&function(_d){return new Promise(function(rp,ap){let sp=_d.data;const lp=AxiosHeaders$1.from(_d.headers).normalize();let{responseType:up,withXSRFToken:cp}=_d,dp;function fp(){_d.cancelToken&&_d.cancelToken.unsubscribe(dp),_d.signal&&_d.signal.removeEventListener("abort",dp)}let pp;if(utils$1.isFormData(sp)){if(platform$7.hasStandardBrowserEnv||platform$7.hasStandardBrowserWebWorkerEnv)lp.setContentType(!1);else if((pp=lp.getContentType())!==!1){const[xp,...Sp]=pp?pp.split(";").map(yp=>yp.trim()).filter(Boolean):[];lp.setContentType([xp||"multipart/form-data",...Sp].join("; "))}}let hp=new XMLHttpRequest;if(_d.auth){const xp=_d.auth.username||"",Sp=_d.auth.password?unescape(encodeURIComponent(_d.auth.password)):"";lp.set("Authorization","Basic "+btoa(xp+":"+Sp))}const mp=buildFullPath(_d.baseURL,_d.url);hp.open(_d.method.toUpperCase(),buildURL(mp,_d.params,_d.paramsSerializer),!0),hp.timeout=_d.timeout;function gp(){if(!hp)return;const xp=AxiosHeaders$1.from("getAllResponseHeaders"in hp&&hp.getAllResponseHeaders()),yp={data:!up||up==="text"||up==="json"?hp.responseText:hp.response,status:hp.status,statusText:hp.statusText,headers:xp,config:_d,request:hp};settle(function(Ep){rp(Ep),fp()},function(Ep){ap(Ep),fp()},yp),hp=null}if("onloadend"in hp?hp.onloadend=gp:hp.onreadystatechange=function(){!hp||hp.readyState!==4||hp.status===0&&!(hp.responseURL&&hp.responseURL.indexOf("file:")===0)||setTimeout(gp)},hp.onabort=function(){hp&&(ap(new AxiosError("Request aborted",AxiosError.ECONNABORTED,_d,hp)),hp=null)},hp.onerror=function(){ap(new AxiosError("Network Error",AxiosError.ERR_NETWORK,_d,hp)),hp=null},hp.ontimeout=function(){let Sp=_d.timeout?"timeout of "+_d.timeout+"ms exceeded":"timeout exceeded";const yp=_d.transitional||transitionalDefaults;_d.timeoutErrorMessage&&(Sp=_d.timeoutErrorMessage),ap(new AxiosError(Sp,yp.clarifyTimeoutError?AxiosError.ETIMEDOUT:AxiosError.ECONNABORTED,_d,hp)),hp=null},platform$7.hasStandardBrowserEnv&&(cp&&utils$1.isFunction(cp)&&(cp=cp(_d)),cp||cp!==!1&&isURLSameOrigin(mp))){const xp=_d.xsrfHeaderName&&_d.xsrfCookieName&&cookies.read(_d.xsrfCookieName);xp&&lp.set(_d.xsrfHeaderName,xp)}sp===void 0&&lp.setContentType(null),"setRequestHeader"in hp&&utils$1.forEach(lp.toJSON(),function(Sp,yp){hp.setRequestHeader(yp,Sp)}),utils$1.isUndefined(_d.withCredentials)||(hp.withCredentials=!!_d.withCredentials),up&&up!=="json"&&(hp.responseType=_d.responseType),typeof _d.onDownloadProgress=="function"&&hp.addEventListener("progress",progressEventReducer(_d.onDownloadProgress,!0)),typeof _d.onUploadProgress=="function"&&hp.upload&&hp.upload.addEventListener("progress",progressEventReducer(_d.onUploadProgress)),(_d.cancelToken||_d.signal)&&(dp=xp=>{hp&&(ap(!xp||xp.type?new CanceledError(null,_d,hp):xp),hp.abort(),hp=null)},_d.cancelToken&&_d.cancelToken.subscribe(dp),_d.signal&&(_d.signal.aborted?dp():_d.signal.addEventListener("abort",dp)));const vp=parseProtocol(mp);if(vp&&platform$7.protocols.indexOf(vp)===-1){ap(new AxiosError("Unsupported protocol "+vp+":",AxiosError.ERR_BAD_REQUEST,_d));return}hp.send(sp||null)})},knownAdapters={http:httpAdapter,xhr:xhrAdapter};utils$1.forEach(knownAdapters,(_d,np)=>{if(_d){try{Object.defineProperty(_d,"name",{value:np})}catch{}Object.defineProperty(_d,"adapterName",{value:np})}});const renderReason=_d=>`- ${_d}`,isResolvedHandle=_d=>utils$1.isFunction(_d)||_d===null||_d===!1,adapters={getAdapter:_d=>{_d=utils$1.isArray(_d)?_d:[_d];const{length:np}=_d;let rp,ap;const sp={};for(let lp=0;lp<np;lp++){rp=_d[lp];let up;if(ap=rp,!isResolvedHandle(rp)&&(ap=knownAdapters[(up=String(rp)).toLowerCase()],ap===void 0))throw new AxiosError(`Unknown adapter '${up}'`);if(ap)break;sp[up||"#"+lp]=ap}if(!ap){const lp=Object.entries(sp).map(([cp,dp])=>`adapter ${cp} `+(dp===!1?"is not supported by the environment":"is not available in the build"));let up=np?lp.length>1?`since :
`+lp.map(renderReason).join(`
`):" "+renderReason(lp[0]):"as no adapter specified";throw new AxiosError("There is no suitable adapter to dispatch the request "+up,"ERR_NOT_SUPPORT")}return ap},adapters:knownAdapters};function throwIfCancellationRequested(_d){if(_d.cancelToken&&_d.cancelToken.throwIfRequested(),_d.signal&&_d.signal.aborted)throw new CanceledError(null,_d)}function dispatchRequest(_d){return throwIfCancellationRequested(_d),_d.headers=AxiosHeaders$1.from(_d.headers),_d.data=transformData.call(_d,_d.transformRequest),["post","put","patch"].indexOf(_d.method)!==-1&&_d.headers.setContentType("application/x-www-form-urlencoded",!1),adapters.getAdapter(_d.adapter||defaults$1.adapter)(_d).then(function(ap){return throwIfCancellationRequested(_d),ap.data=transformData.call(_d,_d.transformResponse,ap),ap.headers=AxiosHeaders$1.from(ap.headers),ap},function(ap){return isCancel(ap)||(throwIfCancellationRequested(_d),ap&&ap.response&&(ap.response.data=transformData.call(_d,_d.transformResponse,ap.response),ap.response.headers=AxiosHeaders$1.from(ap.response.headers))),Promise.reject(ap)})}const headersToObject=_d=>_d instanceof AxiosHeaders$1?_d.toJSON():_d;function mergeConfig(_d,np){np=np||{};const rp={};function ap(fp,pp,hp){return utils$1.isPlainObject(fp)&&utils$1.isPlainObject(pp)?utils$1.merge.call({caseless:hp},fp,pp):utils$1.isPlainObject(pp)?utils$1.merge({},pp):utils$1.isArray(pp)?pp.slice():pp}function sp(fp,pp,hp){if(utils$1.isUndefined(pp)){if(!utils$1.isUndefined(fp))return ap(void 0,fp,hp)}else return ap(fp,pp,hp)}function lp(fp,pp){if(!utils$1.isUndefined(pp))return ap(void 0,pp)}function up(fp,pp){if(utils$1.isUndefined(pp)){if(!utils$1.isUndefined(fp))return ap(void 0,fp)}else return ap(void 0,pp)}function cp(fp,pp,hp){if(hp in np)return ap(fp,pp);if(hp in _d)return ap(void 0,fp)}const dp={url:lp,method:lp,data:lp,baseURL:up,transformRequest:up,transformResponse:up,paramsSerializer:up,timeout:up,timeoutMessage:up,withCredentials:up,withXSRFToken:up,adapter:up,responseType:up,xsrfCookieName:up,xsrfHeaderName:up,onUploadProgress:up,onDownloadProgress:up,decompress:up,maxContentLength:up,maxBodyLength:up,beforeRedirect:up,transport:up,httpAgent:up,httpsAgent:up,cancelToken:up,socketPath:up,responseEncoding:up,validateStatus:cp,headers:(fp,pp)=>sp(headersToObject(fp),headersToObject(pp),!0)};return utils$1.forEach(Object.keys(Object.assign({},_d,np)),function(pp){const hp=dp[pp]||sp,mp=hp(_d[pp],np[pp],pp);utils$1.isUndefined(mp)&&hp!==cp||(rp[pp]=mp)}),rp}const VERSION="1.6.7",validators$1={};["object","boolean","number","function","string","symbol"].forEach((_d,np)=>{validators$1[_d]=function(ap){return typeof ap===_d||"a"+(np<1?"n ":" ")+_d}});const deprecatedWarnings={};validators$1.transitional=function _d(np,rp,ap){function sp(lp,up){return"[Axios v"+VERSION+"] Transitional option '"+lp+"'"+up+(ap?". "+ap:"")}return(lp,up,cp)=>{if(np===!1)throw new AxiosError(sp(up," has been removed"+(rp?" in "+rp:"")),AxiosError.ERR_DEPRECATED);return rp&&!deprecatedWarnings[up]&&(deprecatedWarnings[up]=!0,console.warn(sp(up," has been deprecated since v"+rp+" and will be removed in the near future"))),np?np(lp,up,cp):!0}};function assertOptions(_d,np,rp){if(typeof _d!="object")throw new AxiosError("options must be an object",AxiosError.ERR_BAD_OPTION_VALUE);const ap=Object.keys(_d);let sp=ap.length;for(;sp-- >0;){const lp=ap[sp],up=np[lp];if(up){const cp=_d[lp],dp=cp===void 0||up(cp,lp,_d);if(dp!==!0)throw new AxiosError("option "+lp+" must be "+dp,AxiosError.ERR_BAD_OPTION_VALUE);continue}if(rp!==!0)throw new AxiosError("Unknown option "+lp,AxiosError.ERR_BAD_OPTION)}}const validator={assertOptions,validators:validators$1},validators=validator.validators;class Axios{constructor(np){this.defaults=np,this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}async request(np,rp){try{return await this._request(np,rp)}catch(ap){if(ap instanceof Error){let sp;Error.captureStackTrace?Error.captureStackTrace(sp={}):sp=new Error;const lp=sp.stack?sp.stack.replace(/^.+\n/,""):"";ap.stack?lp&&!String(ap.stack).endsWith(lp.replace(/^.+\n.+\n/,""))&&(ap.stack+=`
`+lp):ap.stack=lp}throw ap}}_request(np,rp){typeof np=="string"?(rp=rp||{},rp.url=np):rp=np||{},rp=mergeConfig(this.defaults,rp);const{transitional:ap,paramsSerializer:sp,headers:lp}=rp;ap!==void 0&&validator.assertOptions(ap,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1),sp!=null&&(utils$1.isFunction(sp)?rp.paramsSerializer={serialize:sp}:validator.assertOptions(sp,{encode:validators.function,serialize:validators.function},!0)),rp.method=(rp.method||this.defaults.method||"get").toLowerCase();let up=lp&&utils$1.merge(lp.common,lp[rp.method]);lp&&utils$1.forEach(["delete","get","head","post","put","patch","common"],vp=>{delete lp[vp]}),rp.headers=AxiosHeaders$1.concat(up,lp);const cp=[];let dp=!0;this.interceptors.request.forEach(function(xp){typeof xp.runWhen=="function"&&xp.runWhen(rp)===!1||(dp=dp&&xp.synchronous,cp.unshift(xp.fulfilled,xp.rejected))});const fp=[];this.interceptors.response.forEach(function(xp){fp.push(xp.fulfilled,xp.rejected)});let pp,hp=0,mp;if(!dp){const vp=[dispatchRequest.bind(this),void 0];for(vp.unshift.apply(vp,cp),vp.push.apply(vp,fp),mp=vp.length,pp=Promise.resolve(rp);hp<mp;)pp=pp.then(vp[hp++],vp[hp++]);return pp}mp=cp.length;let gp=rp;for(hp=0;hp<mp;){const vp=cp[hp++],xp=cp[hp++];try{gp=vp(gp)}catch(Sp){xp.call(this,Sp);break}}try{pp=dispatchRequest.call(this,gp)}catch(vp){return Promise.reject(vp)}for(hp=0,mp=fp.length;hp<mp;)pp=pp.then(fp[hp++],fp[hp++]);return pp}getUri(np){np=mergeConfig(this.defaults,np);const rp=buildFullPath(np.baseURL,np.url);return buildURL(rp,np.params,np.paramsSerializer)}}utils$1.forEach(["delete","get","head","options"],function _d(np){Axios.prototype[np]=function(rp,ap){return this.request(mergeConfig(ap||{},{method:np,url:rp,data:(ap||{}).data}))}});utils$1.forEach(["post","put","patch"],function _d(np){function rp(ap){return function(lp,up,cp){return this.request(mergeConfig(cp||{},{method:np,headers:ap?{"Content-Type":"multipart/form-data"}:{},url:lp,data:up}))}}Axios.prototype[np]=rp(),Axios.prototype[np+"Form"]=rp(!0)});const Axios$1=Axios;class CancelToken{constructor(np){if(typeof np!="function")throw new TypeError("executor must be a function.");let rp;this.promise=new Promise(function(lp){rp=lp});const ap=this;this.promise.then(sp=>{if(!ap._listeners)return;let lp=ap._listeners.length;for(;lp-- >0;)ap._listeners[lp](sp);ap._listeners=null}),this.promise.then=sp=>{let lp;const up=new Promise(cp=>{ap.subscribe(cp),lp=cp}).then(sp);return up.cancel=function(){ap.unsubscribe(lp)},up},np(function(lp,up,cp){ap.reason||(ap.reason=new CanceledError(lp,up,cp),rp(ap.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(np){if(this.reason){np(this.reason);return}this._listeners?this._listeners.push(np):this._listeners=[np]}unsubscribe(np){if(!this._listeners)return;const rp=this._listeners.indexOf(np);rp!==-1&&this._listeners.splice(rp,1)}static source(){let np;return{token:new CancelToken(function(sp){np=sp}),cancel:np}}}const CancelToken$1=CancelToken;function spread(_d){return function(rp){return _d.apply(null,rp)}}function isAxiosError(_d){return utils$1.isObject(_d)&&_d.isAxiosError===!0}const HttpStatusCode={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(HttpStatusCode).forEach(([_d,np])=>{HttpStatusCode[np]=_d});const HttpStatusCode$1=HttpStatusCode;function createInstance(_d){const np=new Axios$1(_d),rp=bind(Axios$1.prototype.request,np);return utils$1.extend(rp,Axios$1.prototype,np,{allOwnKeys:!0}),utils$1.extend(rp,np,null,{allOwnKeys:!0}),rp.create=function(sp){return createInstance(mergeConfig(_d,sp))},rp}const axios=createInstance(defaults$1);axios.Axios=Axios$1;axios.CanceledError=CanceledError;axios.CancelToken=CancelToken$1;axios.isCancel=isCancel;axios.VERSION=VERSION;axios.toFormData=toFormData;axios.AxiosError=AxiosError;axios.Cancel=axios.CanceledError;axios.all=function _d(np){return Promise.all(np)};axios.spread=spread;axios.isAxiosError=isAxiosError;axios.mergeConfig=mergeConfig;axios.AxiosHeaders=AxiosHeaders$1;axios.formToJSON=_d=>formDataToJSON(utils$1.isHTMLForm(_d)?new FormData(_d):_d);axios.getAdapter=adapters.getAdapter;axios.HttpStatusCode=HttpStatusCode$1;axios.default=axios;var define_process_env_default$1={};function err(_d){const np=new Error(_d);if(np.stack===void 0)try{throw np}catch{}return np}var err_1=err,Recoil_err=err_1;function isPromise(_d){return!!_d&&typeof _d.then=="function"}var Recoil_isPromise=isPromise;function nullthrows(_d,np){if(_d!=null)return _d;throw Recoil_err(np??"Got unexpected null or undefined")}var Recoil_nullthrows=nullthrows;function _defineProperty$1(_d,np,rp){return np in _d?Object.defineProperty(_d,np,{value:rp,enumerable:!0,configurable:!0,writable:!0}):_d[np]=rp,_d}class BaseLoadable{getValue(){throw Recoil_err("BaseLoadable")}toPromise(){throw Recoil_err("BaseLoadable")}valueMaybe(){throw Recoil_err("BaseLoadable")}valueOrThrow(){throw Recoil_err(`Loadable expected value, but in "${this.state}" state`)}promiseMaybe(){throw Recoil_err("BaseLoadable")}promiseOrThrow(){throw Recoil_err(`Loadable expected promise, but in "${this.state}" state`)}errorMaybe(){throw Recoil_err("BaseLoadable")}errorOrThrow(){throw Recoil_err(`Loadable expected error, but in "${this.state}" state`)}is(np){return np.state===this.state&&np.contents===this.contents}map(np){throw Recoil_err("BaseLoadable")}}class ValueLoadable extends BaseLoadable{constructor(np){super(),_defineProperty$1(this,"state","hasValue"),_defineProperty$1(this,"contents",void 0),this.contents=np}getValue(){return this.contents}toPromise(){return Promise.resolve(this.contents)}valueMaybe(){return this.contents}valueOrThrow(){return this.contents}promiseMaybe(){}errorMaybe(){}map(np){try{const rp=np(this.contents);return Recoil_isPromise(rp)?loadableWithPromise(rp):isLoadable(rp)?rp:loadableWithValue(rp)}catch(rp){return Recoil_isPromise(rp)?loadableWithPromise(rp.next(()=>this.map(np))):loadableWithError(rp)}}}class ErrorLoadable extends BaseLoadable{constructor(np){super(),_defineProperty$1(this,"state","hasError"),_defineProperty$1(this,"contents",void 0),this.contents=np}getValue(){throw this.contents}toPromise(){return Promise.reject(this.contents)}valueMaybe(){}promiseMaybe(){}errorMaybe(){return this.contents}errorOrThrow(){return this.contents}map(np){return this}}class LoadingLoadable extends BaseLoadable{constructor(np){super(),_defineProperty$1(this,"state","loading"),_defineProperty$1(this,"contents",void 0),this.contents=np}getValue(){throw this.contents}toPromise(){return this.contents}valueMaybe(){}promiseMaybe(){return this.contents}promiseOrThrow(){return this.contents}errorMaybe(){}map(np){return loadableWithPromise(this.contents.then(rp=>{const ap=np(rp);if(isLoadable(ap)){const sp=ap;switch(sp.state){case"hasValue":return sp.contents;case"hasError":throw sp.contents;case"loading":return sp.contents}}return ap}).catch(rp=>{if(Recoil_isPromise(rp))return rp.then(()=>this.map(np).contents);throw rp}))}}function loadableWithValue(_d){return Object.freeze(new ValueLoadable(_d))}function loadableWithError(_d){return Object.freeze(new ErrorLoadable(_d))}function loadableWithPromise(_d){return Object.freeze(new LoadingLoadable(_d))}function loadableLoading(){return Object.freeze(new LoadingLoadable(new Promise(()=>{})))}function loadableAllArray(_d){return _d.every(np=>np.state==="hasValue")?loadableWithValue(_d.map(np=>np.contents)):_d.some(np=>np.state==="hasError")?loadableWithError(Recoil_nullthrows(_d.find(np=>np.state==="hasError"),"Invalid loadable passed to loadableAll").contents):loadableWithPromise(Promise.all(_d.map(np=>np.contents)))}function loadableAll(_d){const rp=(Array.isArray(_d)?_d:Object.getOwnPropertyNames(_d).map(sp=>_d[sp])).map(sp=>isLoadable(sp)?sp:Recoil_isPromise(sp)?loadableWithPromise(sp):loadableWithValue(sp)),ap=loadableAllArray(rp);return Array.isArray(_d)?ap:ap.map(sp=>Object.getOwnPropertyNames(_d).reduce((lp,up,cp)=>({...lp,[up]:sp[cp]}),{}))}function isLoadable(_d){return _d instanceof BaseLoadable}const LoadableStaticInterface={of:_d=>Recoil_isPromise(_d)?loadableWithPromise(_d):isLoadable(_d)?_d:loadableWithValue(_d),error:_d=>loadableWithError(_d),loading:()=>loadableLoading(),all:loadableAll,isLoadable};var Recoil_Loadable={loadableWithValue,loadableWithError,loadableWithPromise,loadableLoading,loadableAll,isLoadable,RecoilLoadable:LoadableStaticInterface},Recoil_Loadable_1=Recoil_Loadable.loadableWithValue,Recoil_Loadable_2=Recoil_Loadable.loadableWithError,Recoil_Loadable_3=Recoil_Loadable.loadableWithPromise,Recoil_Loadable_4=Recoil_Loadable.loadableLoading,Recoil_Loadable_5=Recoil_Loadable.loadableAll,Recoil_Loadable_6=Recoil_Loadable.isLoadable,Recoil_Loadable_7=Recoil_Loadable.RecoilLoadable,Recoil_Loadable$1=Object.freeze({__proto__:null,loadableWithValue:Recoil_Loadable_1,loadableWithError:Recoil_Loadable_2,loadableWithPromise:Recoil_Loadable_3,loadableLoading:Recoil_Loadable_4,loadableAll:Recoil_Loadable_5,isLoadable:Recoil_Loadable_6,RecoilLoadable:Recoil_Loadable_7});const env={RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED:!0,RECOIL_GKS_ENABLED:new Set(["recoil_hamt_2020","recoil_sync_external_store","recoil_suppress_rerender_in_callback","recoil_memory_managament_2020"])};function readProcessEnvBooleanFlag(_d,np){var rp,ap;const sp=(rp=define_process_env_default$1[_d])===null||rp===void 0||(ap=rp.toLowerCase())===null||ap===void 0?void 0:ap.trim();if(sp==null||sp==="")return;if(!["true","false"].includes(sp))throw Recoil_err(`process.env.${_d} value must be 'true', 'false', or empty: ${sp}`);np(sp==="true")}function readProcessEnvStringArrayFlag(_d,np){var rp;const ap=(rp=define_process_env_default$1[_d])===null||rp===void 0?void 0:rp.trim();ap==null||ap===""||np(ap.split(/\s*,\s*|\s+/))}function applyProcessEnvFlagOverrides(){var _d;typeof process>"u"||((_d=process)===null||_d===void 0?void 0:_d.env)!=null&&(readProcessEnvBooleanFlag("RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED",np=>{env.RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED=np}),readProcessEnvStringArrayFlag("RECOIL_GKS_ENABLED",np=>{np.forEach(rp=>{env.RECOIL_GKS_ENABLED.add(rp)})}))}applyProcessEnvFlagOverrides();var Recoil_RecoilEnv=env;function Recoil_gkx_OSS(_d){return Recoil_RecoilEnv.RECOIL_GKS_ENABLED.has(_d)}Recoil_gkx_OSS.setPass=_d=>{Recoil_RecoilEnv.RECOIL_GKS_ENABLED.add(_d)};Recoil_gkx_OSS.setFail=_d=>{Recoil_RecoilEnv.RECOIL_GKS_ENABLED.delete(_d)};Recoil_gkx_OSS.clear=()=>{Recoil_RecoilEnv.RECOIL_GKS_ENABLED.clear()};var Recoil_gkx=Recoil_gkx_OSS;function recoverableViolation(_d,np,{error:rp}={}){return null}var recoverableViolation_1=recoverableViolation,Recoil_recoverableViolation=recoverableViolation_1,_createMutableSource,_useMutableSource,_useSyncExternalStore;const createMutableSource=(_createMutableSource=React.createMutableSource)!==null&&_createMutableSource!==void 0?_createMutableSource:React.unstable_createMutableSource,useMutableSource=(_useMutableSource=React.useMutableSource)!==null&&_useMutableSource!==void 0?_useMutableSource:React.unstable_useMutableSource,useSyncExternalStore=(_useSyncExternalStore=React.useSyncExternalStore)!==null&&_useSyncExternalStore!==void 0?_useSyncExternalStore:React.unstable_useSyncExternalStore;function currentRendererSupportsUseSyncExternalStore(){var _d;const{ReactCurrentDispatcher:np,ReactCurrentOwner:rp}=React.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;return((_d=np==null?void 0:np.current)!==null&&_d!==void 0?_d:rp.currentDispatcher).useSyncExternalStore!=null}function reactMode(){return Recoil_gkx("recoil_transition_support")?{mode:"TRANSITION_SUPPORT",early:!0,concurrent:!0}:Recoil_gkx("recoil_sync_external_store")&&useSyncExternalStore!=null?{mode:"SYNC_EXTERNAL_STORE",early:!0,concurrent:!1}:Recoil_gkx("recoil_mutable_source")&&useMutableSource!=null&&typeof window<"u"&&!window.$disableRecoilValueMutableSource_TEMP_HACK_DO_NOT_USE?Recoil_gkx("recoil_suppress_rerender_in_callback")?{mode:"MUTABLE_SOURCE",early:!0,concurrent:!0}:{mode:"MUTABLE_SOURCE",early:!1,concurrent:!1}:Recoil_gkx("recoil_suppress_rerender_in_callback")?{mode:"LEGACY",early:!0,concurrent:!1}:{mode:"LEGACY",early:!1,concurrent:!1}}function isFastRefreshEnabled(){return!1}var Recoil_ReactMode={createMutableSource,useMutableSource,useSyncExternalStore,currentRendererSupportsUseSyncExternalStore,reactMode,isFastRefreshEnabled};class AbstractRecoilValue{constructor(np){_defineProperty$1(this,"key",void 0),this.key=np}toJSON(){return{key:this.key}}}class RecoilState extends AbstractRecoilValue{}class RecoilValueReadOnly extends AbstractRecoilValue{}function isRecoilValue(_d){return _d instanceof RecoilState||_d instanceof RecoilValueReadOnly}var Recoil_RecoilValue={AbstractRecoilValue,RecoilState,RecoilValueReadOnly,isRecoilValue},Recoil_RecoilValue_1=Recoil_RecoilValue.AbstractRecoilValue,Recoil_RecoilValue_2=Recoil_RecoilValue.RecoilState,Recoil_RecoilValue_3=Recoil_RecoilValue.RecoilValueReadOnly,Recoil_RecoilValue_4=Recoil_RecoilValue.isRecoilValue,Recoil_RecoilValue$1=Object.freeze({__proto__:null,AbstractRecoilValue:Recoil_RecoilValue_1,RecoilState:Recoil_RecoilValue_2,RecoilValueReadOnly:Recoil_RecoilValue_3,isRecoilValue:Recoil_RecoilValue_4});function mapIterable(_d,np){return function*(){let rp=0;for(const ap of _d)yield np(ap,rp++)}()}var Recoil_mapIterable=mapIterable;class DefaultValue{}const DEFAULT_VALUE=new DefaultValue,nodes=new Map,recoilValues=new Map;function recoilValuesForKeys(_d){return Recoil_mapIterable(_d,np=>Recoil_nullthrows(recoilValues.get(np)))}function checkForDuplicateAtomKey(_d){if(nodes.has(_d)){const np=`Duplicate atom key "${_d}". This is a FATAL ERROR in
      production. But it is safe to ignore this warning if it occurred because of
      hot module replacement.`;console.warn(np)}}function registerNode(_d){Recoil_RecoilEnv.RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED&&checkForDuplicateAtomKey(_d.key),nodes.set(_d.key,_d);const np=_d.set==null?new Recoil_RecoilValue$1.RecoilValueReadOnly(_d.key):new Recoil_RecoilValue$1.RecoilState(_d.key);return recoilValues.set(_d.key,np),np}class NodeMissingError extends Error{}function getNode(_d){const np=nodes.get(_d);if(np==null)throw new NodeMissingError(`Missing definition for RecoilValue: "${_d}""`);return np}function getNodeMaybe(_d){return nodes.get(_d)}const configDeletionHandlers=new Map;function deleteNodeConfigIfPossible(_d){var np;if(!Recoil_gkx("recoil_memory_managament_2020"))return;const rp=nodes.get(_d);if(rp!=null&&(np=rp.shouldDeleteConfigOnRelease)!==null&&np!==void 0&&np.call(rp)){var ap;nodes.delete(_d),(ap=getConfigDeletionHandler(_d))===null||ap===void 0||ap(),configDeletionHandlers.delete(_d)}}function setConfigDeletionHandler(_d,np){Recoil_gkx("recoil_memory_managament_2020")&&(np===void 0?configDeletionHandlers.delete(_d):configDeletionHandlers.set(_d,np))}function getConfigDeletionHandler(_d){return configDeletionHandlers.get(_d)}var Recoil_Node={nodes,recoilValues,registerNode,getNode,getNodeMaybe,deleteNodeConfigIfPossible,setConfigDeletionHandler,getConfigDeletionHandler,recoilValuesForKeys,NodeMissingError,DefaultValue,DEFAULT_VALUE};function enqueueExecution(_d,np){np()}var Recoil_Queue={enqueueExecution};function createCommonjsModule(_d,np){return np={exports:{}},_d(np,np.exports),np.exports}var hamt_1=createCommonjsModule(function(_d){var np=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Kp){return typeof Kp}:function(Kp){return Kp&&typeof Symbol=="function"&&Kp.constructor===Symbol&&Kp!==Symbol.prototype?"symbol":typeof Kp},rp={},ap=5,sp=Math.pow(2,ap),lp=sp-1,up=sp/2,cp=sp/4,dp={},fp=function(Hp){return function(){return Hp}},pp=rp.hash=function(Kp){var Hp=typeof Kp>"u"?"undefined":np(Kp);if(Hp==="number")return Kp;Hp!=="string"&&(Kp+="");for(var rm=0,lm=0,um=Kp.length;lm<um;++lm){var dm=Kp.charCodeAt(lm);rm=(rm<<5)-rm+dm|0}return rm},hp=function(Hp){return Hp-=Hp>>1&1431655765,Hp=(Hp&858993459)+(Hp>>2&858993459),Hp=Hp+(Hp>>4)&252645135,Hp+=Hp>>8,Hp+=Hp>>16,Hp&127},mp=function(Hp,rm){return rm>>>Hp&lp},gp=function(Hp){return 1<<Hp},vp=function(Hp,rm){return hp(Hp&rm-1)},xp=function(Hp,rm,lm,um){var dm=um;if(!Hp){var vm=um.length;dm=new Array(vm);for(var mm=0;mm<vm;++mm)dm[mm]=um[mm]}return dm[rm]=lm,dm},Sp=function(Hp,rm,lm){var um=lm.length-1,dm=0,vm=0,mm=lm;if(Hp)dm=vm=rm;else for(mm=new Array(um);dm<rm;)mm[vm++]=lm[dm++];for(++dm;dm<=um;)mm[vm++]=lm[dm++];return Hp&&(mm.length=um),mm},yp=function(Hp,rm,lm,um){var dm=um.length;if(Hp){for(var vm=dm;vm>=rm;)um[vm--]=um[vm];return um[rm]=lm,um}for(var mm=0,gm=0,Sm=new Array(dm+1);mm<rm;)Sm[gm++]=um[mm++];for(Sm[rm]=lm;mm<dm;)Sm[++gm]=um[mm++];return Sm},bp=1,Ep=2,wp=3,_p=4,Cp={__hamt_isEmpty:!0},$p=function(Hp){return Hp===Cp||Hp&&Hp.__hamt_isEmpty},Rp=function(Hp,rm,lm,um){return{type:bp,edit:Hp,hash:rm,key:lm,value:um,_modify:Tp}},Pp=function(Hp,rm,lm){return{type:Ep,edit:Hp,hash:rm,children:lm,_modify:Np}},Op=function(Hp,rm,lm){return{type:wp,edit:Hp,mask:rm,children:lm,_modify:Lp}},jp=function(Hp,rm,lm){return{type:_p,edit:Hp,size:rm,children:lm,_modify:Vp}},Mp=function(Hp){return Hp===Cp||Hp.type===bp||Hp.type===Ep},Ap=function(Hp,rm,lm,um,dm){for(var vm=[],mm=um,gm=0,Sm=0;mm;++Sm)mm&1&&(vm[Sm]=dm[gm++]),mm>>>=1;return vm[rm]=lm,jp(Hp,gm+1,vm)},Dp=function(Hp,rm,lm,um){for(var dm=new Array(rm-1),vm=0,mm=0,gm=0,Sm=um.length;gm<Sm;++gm)if(gm!==lm){var Am=um[gm];Am&&!$p(Am)&&(dm[vm++]=Am,mm|=1<<gm)}return Op(Hp,mm,dm)},Fp=function Kp(Hp,rm,lm,um,dm,vm){if(lm===dm)return Pp(Hp,lm,[vm,um]);var mm=mp(rm,lm),gm=mp(rm,dm);return Op(Hp,gp(mm)|gp(gm),mm===gm?[Kp(Hp,rm+ap,lm,um,dm,vm)]:mm<gm?[um,vm]:[vm,um])},Ip=function(Hp,rm,lm,um,dm,vm,mm,gm){for(var Sm=dm.length,Am=0;Am<Sm;++Am){var Nm=dm[Am];if(lm(mm,Nm.key)){var km=Nm.value,Om=vm(km);return Om===km?dm:Om===dp?(--gm.value,Sp(Hp,Am,dm)):xp(Hp,Am,Rp(rm,um,mm,Om),dm)}}var Mm=vm();return Mm===dp?dm:(++gm.value,xp(Hp,Sm,Rp(rm,um,mm,Mm),dm))},kp=function(Hp,rm){return Hp===rm.edit},Tp=function(Hp,rm,lm,um,dm,vm,mm){if(rm(vm,this.key)){var gm=um(this.value);return gm===this.value?this:gm===dp?(--mm.value,Cp):kp(Hp,this)?(this.value=gm,this):Rp(Hp,dm,vm,gm)}var Sm=um();return Sm===dp?this:(++mm.value,Fp(Hp,lm,this.hash,this,dm,Rp(Hp,dm,vm,Sm)))},Np=function(Hp,rm,lm,um,dm,vm,mm){if(dm===this.hash){var gm=kp(Hp,this),Sm=Ip(gm,Hp,rm,this.hash,this.children,um,vm,mm);return Sm===this.children?this:Sm.length>1?Pp(Hp,this.hash,Sm):Sm[0]}var Am=um();return Am===dp?this:(++mm.value,Fp(Hp,lm,this.hash,this,dm,Rp(Hp,dm,vm,Am)))},Lp=function(Hp,rm,lm,um,dm,vm,mm){var gm=this.mask,Sm=this.children,Am=mp(lm,dm),Nm=gp(Am),km=vp(gm,Nm),Om=gm&Nm,Mm=Om?Sm[km]:Cp,Fm=Mm._modify(Hp,rm,lm+ap,um,dm,vm,mm);if(Mm===Fm)return this;var Um=kp(Hp,this),zm=gm,Bm=void 0;if(Om&&$p(Fm)){if(zm&=~Nm,!zm)return Cp;if(Sm.length<=2&&Mp(Sm[km^1]))return Sm[km^1];Bm=Sp(Um,km,Sm)}else if(!Om&&!$p(Fm)){if(Sm.length>=up)return Ap(Hp,Am,Fm,gm,Sm);zm|=Nm,Bm=yp(Um,km,Fm,Sm)}else Bm=xp(Um,km,Fm,Sm);return Um?(this.mask=zm,this.children=Bm,this):Op(Hp,zm,Bm)},Vp=function(Hp,rm,lm,um,dm,vm,mm){var gm=this.size,Sm=this.children,Am=mp(lm,dm),Nm=Sm[Am],km=(Nm||Cp)._modify(Hp,rm,lm+ap,um,dm,vm,mm);if(Nm===km)return this;var Om=kp(Hp,this),Mm=void 0;if($p(Nm)&&!$p(km))++gm,Mm=xp(Om,Am,km,Sm);else if(!$p(Nm)&&$p(km)){if(--gm,gm<=cp)return Dp(Hp,gm,Am,Sm);Mm=xp(Om,Am,Cp,Sm)}else Mm=xp(Om,Am,km,Sm);return Om?(this.size=gm,this.children=Mm,this):jp(Hp,gm,Mm)};Cp._modify=function(Kp,Hp,rm,lm,um,dm,vm){var mm=lm();return mm===dp?Cp:(++vm.value,Rp(Kp,um,dm,mm))};function zp(Kp,Hp,rm,lm,um){this._editable=Kp,this._edit=Hp,this._config=rm,this._root=lm,this._size=um}zp.prototype.setTree=function(Kp,Hp){return this._editable?(this._root=Kp,this._size=Hp,this):Kp===this._root?this:new zp(this._editable,this._edit,this._config,Kp,Hp)};var Wp=rp.tryGetHash=function(Kp,Hp,rm,lm){for(var um=lm._root,dm=0,vm=lm._config.keyEq;;)switch(um.type){case bp:return vm(rm,um.key)?um.value:Kp;case Ep:{if(Hp===um.hash)for(var mm=um.children,gm=0,Sm=mm.length;gm<Sm;++gm){var Am=mm[gm];if(vm(rm,Am.key))return Am.value}return Kp}case wp:{var Nm=mp(dm,Hp),km=gp(Nm);if(um.mask&km){um=um.children[vp(um.mask,km)],dm+=ap;break}return Kp}case _p:{if(um=um.children[mp(dm,Hp)],um){dm+=ap;break}return Kp}default:return Kp}};zp.prototype.tryGetHash=function(Kp,Hp,rm){return Wp(Kp,Hp,rm,this)};var Up=rp.tryGet=function(Kp,Hp,rm){return Wp(Kp,rm._config.hash(Hp),Hp,rm)};zp.prototype.tryGet=function(Kp,Hp){return Up(Kp,Hp,this)};var qp=rp.getHash=function(Kp,Hp,rm){return Wp(void 0,Kp,Hp,rm)};zp.prototype.getHash=function(Kp,Hp){return qp(Kp,Hp,this)},rp.get=function(Kp,Hp){return Wp(void 0,Hp._config.hash(Kp),Kp,Hp)},zp.prototype.get=function(Kp,Hp){return Up(Hp,Kp,this)};var Bp=rp.has=function(Kp,Hp,rm){return Wp(dp,Kp,Hp,rm)!==dp};zp.prototype.hasHash=function(Kp,Hp){return Bp(Kp,Hp,this)};var Yp=rp.has=function(Kp,Hp){return Bp(Hp._config.hash(Kp),Kp,Hp)};zp.prototype.has=function(Kp){return Yp(Kp,this)};var Xp=function(Hp,rm){return Hp===rm};rp.make=function(Kp){return new zp(0,0,{keyEq:Kp&&Kp.keyEq||Xp,hash:Kp&&Kp.hash||pp},Cp,0)},rp.empty=rp.make();var Qp=rp.isEmpty=function(Kp){return Kp&&!!$p(Kp._root)};zp.prototype.isEmpty=function(){return Qp(this)};var am=rp.modifyHash=function(Kp,Hp,rm,lm){var um={value:lm._size},dm=lm._root._modify(lm._editable?lm._edit:NaN,lm._config.keyEq,0,Kp,Hp,rm,um);return lm.setTree(dm,um.value)};zp.prototype.modifyHash=function(Kp,Hp,rm){return am(rm,Kp,Hp,this)};var Jp=rp.modify=function(Kp,Hp,rm){return am(Kp,rm._config.hash(Hp),Hp,rm)};zp.prototype.modify=function(Kp,Hp){return Jp(Hp,Kp,this)};var im=rp.setHash=function(Kp,Hp,rm,lm){return am(fp(rm),Kp,Hp,lm)};zp.prototype.setHash=function(Kp,Hp,rm){return im(Kp,Hp,rm,this)};var Zp=rp.set=function(Kp,Hp,rm){return im(rm._config.hash(Kp),Kp,Hp,rm)};zp.prototype.set=function(Kp,Hp){return Zp(Kp,Hp,this)};var Gp=fp(dp),tm=rp.removeHash=function(Kp,Hp,rm){return am(Gp,Kp,Hp,rm)};zp.prototype.removeHash=zp.prototype.deleteHash=function(Kp,Hp){return tm(Kp,Hp,this)};var om=rp.remove=function(Kp,Hp){return tm(Hp._config.hash(Kp),Kp,Hp)};zp.prototype.remove=zp.prototype.delete=function(Kp){return om(Kp,this)};var em=rp.beginMutation=function(Kp){return new zp(Kp._editable+1,Kp._edit+1,Kp._config,Kp._root,Kp._size)};zp.prototype.beginMutation=function(){return em(this)};var _m=rp.endMutation=function(Kp){return Kp._editable=Kp._editable&&Kp._editable-1,Kp};zp.prototype.endMutation=function(){return _m(this)};var Cm=rp.mutate=function(Kp,Hp){var rm=em(Hp);return Kp(rm),_m(rm)};zp.prototype.mutate=function(Kp){return Cm(Kp,this)};var Rm=function(Hp){return Hp&&Em(Hp[0],Hp[1],Hp[2],Hp[3],Hp[4])},Em=function(Hp,rm,lm,um,dm){for(;lm<Hp;){var vm=rm[lm++];if(vm&&!$p(vm))return $m(vm,um,[Hp,rm,lm,um,dm])}return Rm(dm)},$m=function(Hp,rm,lm){switch(Hp.type){case bp:return{value:rm(Hp),rest:lm};case Ep:case _p:case wp:var um=Hp.children;return Em(um.length,um,0,rm,lm);default:return Rm(lm)}},fm={done:!0};function wm(Kp){this.v=Kp}wm.prototype.next=function(){if(!this.v)return fm;var Kp=this.v;return this.v=Rm(Kp.rest),Kp},wm.prototype[Symbol.iterator]=function(){return this};var pm=function(Hp,rm){return new wm($m(Hp._root,rm))},hm=function(Hp){return[Hp.key,Hp.value]},sm=rp.entries=function(Kp){return pm(Kp,hm)};zp.prototype.entries=zp.prototype[Symbol.iterator]=function(){return sm(this)};var cm=function(Hp){return Hp.key},ym=rp.keys=function(Kp){return pm(Kp,cm)};zp.prototype.keys=function(){return ym(this)};var Tm=function(Hp){return Hp.value},xm=rp.values=zp.prototype.values=function(Kp){return pm(Kp,Tm)};zp.prototype.values=function(){return xm(this)};var bm=rp.fold=function(Kp,Hp,rm){var lm=rm._root;if(lm.type===bp)return Kp(Hp,lm.value,lm.key);for(var um=[lm.children],dm=void 0;dm=um.pop();)for(var vm=0,mm=dm.length;vm<mm;){var gm=dm[vm++];gm&&gm.type&&(gm.type===bp?Hp=Kp(Hp,gm.value,gm.key):um.push(gm.children))}return Hp};zp.prototype.fold=function(Kp,Hp){return bm(Kp,Hp,this)};var Dm=rp.forEach=function(Kp,Hp){return bm(function(rm,lm,um){return Kp(lm,um,Hp)},null,Hp)};zp.prototype.forEach=function(Kp){return Dm(Kp,this)};var Vm=rp.count=function(Kp){return Kp._size};zp.prototype.count=function(){return Vm(this)},Object.defineProperty(zp.prototype,"size",{get:zp.prototype.count}),_d.exports?_d.exports=rp:(void 0).hamt=rp});class BuiltInMap{constructor(np){_defineProperty$1(this,"_map",void 0),this._map=new Map(np==null?void 0:np.entries())}keys(){return this._map.keys()}entries(){return this._map.entries()}get(np){return this._map.get(np)}has(np){return this._map.has(np)}set(np,rp){return this._map.set(np,rp),this}delete(np){return this._map.delete(np),this}clone(){return persistentMap(this)}toMap(){return new Map(this._map)}}class HashArrayMappedTrieMap{constructor(np){if(_defineProperty$1(this,"_hamt",hamt_1.empty.beginMutation()),np instanceof HashArrayMappedTrieMap){const rp=np._hamt.endMutation();np._hamt=rp.beginMutation(),this._hamt=rp.beginMutation()}else if(np)for(const[rp,ap]of np.entries())this._hamt.set(rp,ap)}keys(){return this._hamt.keys()}entries(){return this._hamt.entries()}get(np){return this._hamt.get(np)}has(np){return this._hamt.has(np)}set(np,rp){return this._hamt.set(np,rp),this}delete(np){return this._hamt.delete(np),this}clone(){return persistentMap(this)}toMap(){return new Map(this._hamt)}}function persistentMap(_d){return Recoil_gkx("recoil_hamt_2020")?new HashArrayMappedTrieMap(_d):new BuiltInMap(_d)}var Recoil_PersistentMap={persistentMap},Recoil_PersistentMap_1=Recoil_PersistentMap.persistentMap,Recoil_PersistentMap$1=Object.freeze({__proto__:null,persistentMap:Recoil_PersistentMap_1});function differenceSets(_d,...np){const rp=new Set;e:for(const ap of _d){for(const sp of np)if(sp.has(ap))continue e;rp.add(ap)}return rp}var Recoil_differenceSets=differenceSets;function mapMap(_d,np){const rp=new Map;return _d.forEach((ap,sp)=>{rp.set(sp,np(ap,sp))}),rp}var Recoil_mapMap=mapMap;function makeGraph(){return{nodeDeps:new Map,nodeToNodeSubscriptions:new Map}}function cloneGraph(_d){return{nodeDeps:Recoil_mapMap(_d.nodeDeps,np=>new Set(np)),nodeToNodeSubscriptions:Recoil_mapMap(_d.nodeToNodeSubscriptions,np=>new Set(np))}}function mergeDepsIntoGraph(_d,np,rp,ap){const{nodeDeps:sp,nodeToNodeSubscriptions:lp}=rp,up=sp.get(_d);if(up&&ap&&up!==ap.nodeDeps.get(_d))return;sp.set(_d,np);const cp=up==null?np:Recoil_differenceSets(np,up);for(const dp of cp)lp.has(dp)||lp.set(dp,new Set),Recoil_nullthrows(lp.get(dp)).add(_d);if(up){const dp=Recoil_differenceSets(up,np);for(const fp of dp){if(!lp.has(fp))return;const pp=Recoil_nullthrows(lp.get(fp));pp.delete(_d),pp.size===0&&lp.delete(fp)}}}function saveDepsToStore(_d,np,rp,ap){var sp,lp,up,cp;const dp=rp.getState();ap===dp.currentTree.version||ap===((sp=dp.nextTree)===null||sp===void 0?void 0:sp.version)||((lp=dp.previousTree)===null||lp===void 0||lp.version);const fp=rp.getGraph(ap);if(mergeDepsIntoGraph(_d,np,fp),ap===((up=dp.previousTree)===null||up===void 0?void 0:up.version)){const hp=rp.getGraph(dp.currentTree.version);mergeDepsIntoGraph(_d,np,hp,fp)}if(ap===((cp=dp.previousTree)===null||cp===void 0?void 0:cp.version)||ap===dp.currentTree.version){var pp;const hp=(pp=dp.nextTree)===null||pp===void 0?void 0:pp.version;if(hp!==void 0){const mp=rp.getGraph(hp);mergeDepsIntoGraph(_d,np,mp,fp)}}}var Recoil_Graph={cloneGraph,graph:makeGraph,saveDepsToStore};let nextTreeStateVersion=0;const getNextTreeStateVersion=()=>nextTreeStateVersion++;let nextStoreID=0;const getNextStoreID=()=>nextStoreID++;let nextComponentID=0;const getNextComponentID=()=>nextComponentID++;var Recoil_Keys={getNextTreeStateVersion,getNextStoreID,getNextComponentID};const{persistentMap:persistentMap$1}=Recoil_PersistentMap$1,{graph}=Recoil_Graph,{getNextTreeStateVersion:getNextTreeStateVersion$1}=Recoil_Keys;function makeEmptyTreeState(){const _d=getNextTreeStateVersion$1();return{version:_d,stateID:_d,transactionMetadata:{},dirtyAtoms:new Set,atomValues:persistentMap$1(),nonvalidatedAtoms:persistentMap$1()}}function makeEmptyStoreState(){const _d=makeEmptyTreeState();return{currentTree:_d,nextTree:null,previousTree:null,commitDepth:0,knownAtoms:new Set,knownSelectors:new Set,transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:new Map().set(_d.version,graph()),retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map}}var Recoil_State={makeEmptyTreeState,makeEmptyStoreState,getNextTreeStateVersion:getNextTreeStateVersion$1};class RetentionZone{}function retentionZone(){return new RetentionZone}var Recoil_RetentionZone={RetentionZone,retentionZone};function setByAddingToSet(_d,np){const rp=new Set(_d);return rp.add(np),rp}function setByDeletingFromSet(_d,np){const rp=new Set(_d);return rp.delete(np),rp}function mapBySettingInMap(_d,np,rp){const ap=new Map(_d);return ap.set(np,rp),ap}function mapByUpdatingInMap(_d,np,rp){const ap=new Map(_d);return ap.set(np,rp(ap.get(np))),ap}function mapByDeletingFromMap(_d,np){const rp=new Map(_d);return rp.delete(np),rp}function mapByDeletingMultipleFromMap(_d,np){const rp=new Map(_d);return np.forEach(ap=>rp.delete(ap)),rp}var Recoil_CopyOnWrite={setByAddingToSet,setByDeletingFromSet,mapBySettingInMap,mapByUpdatingInMap,mapByDeletingFromMap,mapByDeletingMultipleFromMap};function*filterIterable(_d,np){let rp=0;for(const ap of _d)np(ap,rp++)&&(yield ap)}var Recoil_filterIterable=filterIterable;function lazyProxy(_d,np){return new Proxy(_d,{get:(ap,sp)=>(!(sp in ap)&&sp in np&&(ap[sp]=np[sp]()),ap[sp]),ownKeys:ap=>Object.keys(ap)})}var Recoil_lazyProxy=lazyProxy;const{getNode:getNode$1,getNodeMaybe:getNodeMaybe$1,recoilValuesForKeys:recoilValuesForKeys$1}=Recoil_Node,{RetentionZone:RetentionZone$1}=Recoil_RetentionZone,{setByAddingToSet:setByAddingToSet$1}=Recoil_CopyOnWrite,emptySet=Object.freeze(new Set);class ReadOnlyRecoilValueError extends Error{}function initializeRetentionForNode(_d,np,rp){if(!Recoil_gkx("recoil_memory_managament_2020"))return()=>{};const{nodesRetainedByZone:ap}=_d.getState().retention;function sp(lp){let up=ap.get(lp);up||ap.set(lp,up=new Set),up.add(np)}if(rp instanceof RetentionZone$1)sp(rp);else if(Array.isArray(rp))for(const lp of rp)sp(lp);return()=>{if(!Recoil_gkx("recoil_memory_managament_2020"))return;const{retention:lp}=_d.getState();function up(cp){const dp=lp.nodesRetainedByZone.get(cp);dp==null||dp.delete(np),dp&&dp.size===0&&lp.nodesRetainedByZone.delete(cp)}if(rp instanceof RetentionZone$1)up(rp);else if(Array.isArray(rp))for(const cp of rp)up(cp)}}function initializeNodeIfNewToStore(_d,np,rp,ap){const sp=_d.getState();if(sp.nodeCleanupFunctions.has(rp))return;const lp=getNode$1(rp),up=initializeRetentionForNode(_d,rp,lp.retainedBy),cp=lp.init(_d,np,ap);sp.nodeCleanupFunctions.set(rp,()=>{cp(),up()})}function initializeNode(_d,np,rp){initializeNodeIfNewToStore(_d,_d.getState().currentTree,np,rp)}function cleanUpNode(_d,np){var rp;const ap=_d.getState();(rp=ap.nodeCleanupFunctions.get(np))===null||rp===void 0||rp(),ap.nodeCleanupFunctions.delete(np)}function getNodeLoadable(_d,np,rp){return initializeNodeIfNewToStore(_d,np,rp,"get"),getNode$1(rp).get(_d,np)}function peekNodeLoadable(_d,np,rp){return getNode$1(rp).peek(_d,np)}function setUnvalidatedAtomValue_DEPRECATED(_d,np,rp){var ap;const sp=getNodeMaybe$1(np);return sp==null||(ap=sp.invalidate)===null||ap===void 0||ap.call(sp,_d),{..._d,atomValues:_d.atomValues.clone().delete(np),nonvalidatedAtoms:_d.nonvalidatedAtoms.clone().set(np,rp),dirtyAtoms:setByAddingToSet$1(_d.dirtyAtoms,np)}}function setNodeValue(_d,np,rp,ap){const sp=getNode$1(rp);if(sp.set==null)throw new ReadOnlyRecoilValueError(`Attempt to set read-only RecoilValue: ${rp}`);const lp=sp.set;return initializeNodeIfNewToStore(_d,np,rp,"set"),lp(_d,np,ap)}function peekNodeInfo(_d,np,rp){const ap=_d.getState(),sp=_d.getGraph(np.version),lp=getNode$1(rp).nodeType;return Recoil_lazyProxy({type:lp},{loadable:()=>peekNodeLoadable(_d,np,rp),isActive:()=>ap.knownAtoms.has(rp)||ap.knownSelectors.has(rp),isSet:()=>lp==="selector"?!1:np.atomValues.has(rp),isModified:()=>np.dirtyAtoms.has(rp),deps:()=>{var up;return recoilValuesForKeys$1((up=sp.nodeDeps.get(rp))!==null&&up!==void 0?up:[])},subscribers:()=>{var up,cp;return{nodes:recoilValuesForKeys$1(Recoil_filterIterable(getDownstreamNodes(_d,np,new Set([rp])),dp=>dp!==rp)),components:Recoil_mapIterable((up=(cp=ap.nodeToComponentSubscriptions.get(rp))===null||cp===void 0?void 0:cp.values())!==null&&up!==void 0?up:[],([dp])=>({name:dp}))}}})}function getDownstreamNodes(_d,np,rp){const ap=new Set,sp=Array.from(rp),lp=_d.getGraph(np.version);for(let cp=sp.pop();cp;cp=sp.pop()){var up;ap.add(cp);const dp=(up=lp.nodeToNodeSubscriptions.get(cp))!==null&&up!==void 0?up:emptySet;for(const fp of dp)ap.has(fp)||sp.push(fp)}return ap}var Recoil_FunctionalCore={getNodeLoadable,peekNodeLoadable,setNodeValue,initializeNode,cleanUpNode,setUnvalidatedAtomValue_DEPRECATED,peekNodeInfo,getDownstreamNodes};let _invalidateMemoizedSnapshot=null;function setInvalidateMemoizedSnapshot(_d){_invalidateMemoizedSnapshot=_d}function invalidateMemoizedSnapshot(){var _d;(_d=_invalidateMemoizedSnapshot)===null||_d===void 0||_d()}var Recoil_SnapshotCache={setInvalidateMemoizedSnapshot,invalidateMemoizedSnapshot};const{getDownstreamNodes:getDownstreamNodes$1,getNodeLoadable:getNodeLoadable$1,setNodeValue:setNodeValue$1}=Recoil_FunctionalCore,{getNextComponentID:getNextComponentID$1}=Recoil_Keys,{getNode:getNode$2,getNodeMaybe:getNodeMaybe$2}=Recoil_Node,{DefaultValue:DefaultValue$1}=Recoil_Node,{reactMode:reactMode$1}=Recoil_ReactMode,{AbstractRecoilValue:AbstractRecoilValue$1,RecoilState:RecoilState$1,RecoilValueReadOnly:RecoilValueReadOnly$1,isRecoilValue:isRecoilValue$1}=Recoil_RecoilValue$1,{invalidateMemoizedSnapshot:invalidateMemoizedSnapshot$1}=Recoil_SnapshotCache;function getRecoilValueAsLoadable(_d,{key:np},rp=_d.getState().currentTree){var ap,sp;const lp=_d.getState();rp.version===lp.currentTree.version||rp.version===((ap=lp.nextTree)===null||ap===void 0?void 0:ap.version)||(rp.version,(sp=lp.previousTree)===null||sp===void 0||sp.version);const up=getNodeLoadable$1(_d,rp,np);return up.state==="loading"&&up.contents.catch(()=>{}),up}function applyAtomValueWrites(_d,np){const rp=_d.clone();return np.forEach((ap,sp)=>{ap.state==="hasValue"&&ap.contents instanceof DefaultValue$1?rp.delete(sp):rp.set(sp,ap)}),rp}function valueFromValueOrUpdater(_d,np,{key:rp},ap){if(typeof ap=="function"){const sp=getNodeLoadable$1(_d,np,rp);if(sp.state==="loading"){const lp=`Tried to set atom or selector "${rp}" using an updater function while the current state is pending, this is not currently supported.`;throw Recoil_err(lp)}else if(sp.state==="hasError")throw sp.contents;return ap(sp.contents)}else return ap}function applyAction(_d,np,rp){if(rp.type==="set"){const{recoilValue:sp,valueOrUpdater:lp}=rp,up=valueFromValueOrUpdater(_d,np,sp,lp),cp=setNodeValue$1(_d,np,sp.key,up);for(const[dp,fp]of cp.entries())writeLoadableToTreeState(np,dp,fp)}else if(rp.type==="setLoadable"){const{recoilValue:{key:sp},loadable:lp}=rp;writeLoadableToTreeState(np,sp,lp)}else if(rp.type==="markModified"){const{recoilValue:{key:sp}}=rp;np.dirtyAtoms.add(sp)}else if(rp.type==="setUnvalidated"){var ap;const{recoilValue:{key:sp},unvalidatedValue:lp}=rp,up=getNodeMaybe$2(sp);up==null||(ap=up.invalidate)===null||ap===void 0||ap.call(up,np),np.atomValues.delete(sp),np.nonvalidatedAtoms.set(sp,lp),np.dirtyAtoms.add(sp)}else Recoil_recoverableViolation(`Unknown action ${rp.type}`)}function writeLoadableToTreeState(_d,np,rp){rp.state==="hasValue"&&rp.contents instanceof DefaultValue$1?_d.atomValues.delete(np):_d.atomValues.set(np,rp),_d.dirtyAtoms.add(np),_d.nonvalidatedAtoms.delete(np)}function applyActionsToStore(_d,np){_d.replaceState(rp=>{const ap=copyTreeState(rp);for(const sp of np)applyAction(_d,ap,sp);return invalidateDownstreams(_d,ap),invalidateMemoizedSnapshot$1(),ap})}function queueOrPerformStateUpdate(_d,np){if(batchStack.length){const rp=batchStack[batchStack.length-1];let ap=rp.get(_d);ap||rp.set(_d,ap=[]),ap.push(np)}else applyActionsToStore(_d,[np])}const batchStack=[];function batchStart(){const _d=new Map;return batchStack.push(_d),()=>{for(const[np,rp]of _d)applyActionsToStore(np,rp);batchStack.pop()}}function copyTreeState(_d){return{..._d,atomValues:_d.atomValues.clone(),nonvalidatedAtoms:_d.nonvalidatedAtoms.clone(),dirtyAtoms:new Set(_d.dirtyAtoms)}}function invalidateDownstreams(_d,np){const rp=getDownstreamNodes$1(_d,np,np.dirtyAtoms);for(const lp of rp){var ap,sp;(ap=getNodeMaybe$2(lp))===null||ap===void 0||(sp=ap.invalidate)===null||sp===void 0||sp.call(ap,np)}}function setRecoilValue(_d,np,rp){queueOrPerformStateUpdate(_d,{type:"set",recoilValue:np,valueOrUpdater:rp})}function setRecoilValueLoadable(_d,np,rp){if(rp instanceof DefaultValue$1)return setRecoilValue(_d,np,rp);queueOrPerformStateUpdate(_d,{type:"setLoadable",recoilValue:np,loadable:rp})}function markRecoilValueModified(_d,np){queueOrPerformStateUpdate(_d,{type:"markModified",recoilValue:np})}function setUnvalidatedRecoilValue(_d,np,rp){queueOrPerformStateUpdate(_d,{type:"setUnvalidated",recoilValue:np,unvalidatedValue:rp})}function subscribeToRecoilValue(_d,{key:np},rp,ap=null){const sp=getNextComponentID$1(),lp=_d.getState();lp.nodeToComponentSubscriptions.has(np)||lp.nodeToComponentSubscriptions.set(np,new Map),Recoil_nullthrows(lp.nodeToComponentSubscriptions.get(np)).set(sp,[ap??"<not captured>",rp]);const up=reactMode$1();if(up.early&&(up.mode==="LEGACY"||up.mode==="MUTABLE_SOURCE")){const cp=_d.getState().nextTree;cp&&cp.dirtyAtoms.has(np)&&rp(cp)}return{release:()=>{const cp=_d.getState(),dp=cp.nodeToComponentSubscriptions.get(np);dp===void 0||!dp.has(sp)||(dp.delete(sp),dp.size===0&&cp.nodeToComponentSubscriptions.delete(np))}}}function refreshRecoilValue(_d,np){var rp;const{currentTree:ap}=_d.getState(),sp=getNode$2(np.key);(rp=sp.clearCache)===null||rp===void 0||rp.call(sp,_d,ap)}var Recoil_RecoilValueInterface={RecoilValueReadOnly:RecoilValueReadOnly$1,AbstractRecoilValue:AbstractRecoilValue$1,RecoilState:RecoilState$1,getRecoilValueAsLoadable,setRecoilValue,setRecoilValueLoadable,markRecoilValueModified,setUnvalidatedRecoilValue,subscribeToRecoilValue,isRecoilValue:isRecoilValue$1,applyAtomValueWrites,batchStart,writeLoadableToTreeState,invalidateDownstreams,copyTreeState,refreshRecoilValue};function someSet(_d,np,rp){const ap=_d.entries();let sp=ap.next();for(;!sp.done;){const lp=sp.value;if(np.call(rp,lp[1],lp[0],_d))return!0;sp=ap.next()}return!1}var Recoil_someSet=someSet;const{cleanUpNode:cleanUpNode$1}=Recoil_FunctionalCore,{deleteNodeConfigIfPossible:deleteNodeConfigIfPossible$1,getNode:getNode$3}=Recoil_Node,{RetentionZone:RetentionZone$2}=Recoil_RetentionZone,SUSPENSE_TIMEOUT_MS=12e4,emptySet$1=new Set;function releaseRetainablesNowOnCurrentTree(_d,np){const rp=_d.getState(),ap=rp.currentTree;if(rp.nextTree)return;const sp=new Set;for(const up of np)if(up instanceof RetentionZone$2)for(const cp of nodesRetainedByZone(rp,up))sp.add(cp);else sp.add(up);const lp=findReleasableNodes(_d,sp);for(const up of lp)releaseNode(_d,ap,up)}function findReleasableNodes(_d,np){const rp=_d.getState(),ap=rp.currentTree,sp=_d.getGraph(ap.version),lp=new Set,up=new Set;return cp(np),lp;function cp(dp){const fp=new Set,pp=getDownstreamNodesInTopologicalOrder(_d,ap,dp,lp,up);for(const vp of pp){var hp;if(getNode$3(vp).retainedBy==="recoilRoot"){up.add(vp);continue}if(((hp=rp.retention.referenceCounts.get(vp))!==null&&hp!==void 0?hp:0)>0){up.add(vp);continue}if(zonesThatCouldRetainNode(vp).some(Sp=>rp.retention.referenceCounts.get(Sp))){up.add(vp);continue}const xp=sp.nodeToNodeSubscriptions.get(vp);if(xp&&Recoil_someSet(xp,Sp=>up.has(Sp))){up.add(vp);continue}lp.add(vp),fp.add(vp)}const mp=new Set;for(const vp of fp)for(const xp of(gp=sp.nodeDeps.get(vp))!==null&&gp!==void 0?gp:emptySet$1){var gp;lp.has(xp)||mp.add(xp)}mp.size&&cp(mp)}}function getDownstreamNodesInTopologicalOrder(_d,np,rp,ap,sp){const lp=_d.getGraph(np.version),up=[],cp=new Set;for(;rp.size>0;)dp(Recoil_nullthrows(rp.values().next().value));return up;function dp(fp){if(ap.has(fp)||sp.has(fp)){rp.delete(fp);return}if(cp.has(fp))return;const pp=lp.nodeToNodeSubscriptions.get(fp);if(pp)for(const hp of pp)dp(hp);cp.add(fp),rp.delete(fp),up.push(fp)}}function releaseNode(_d,np,rp){if(!Recoil_gkx("recoil_memory_managament_2020"))return;cleanUpNode$1(_d,rp);const ap=_d.getState();ap.knownAtoms.delete(rp),ap.knownSelectors.delete(rp),ap.nodeTransactionSubscriptions.delete(rp),ap.retention.referenceCounts.delete(rp);const sp=zonesThatCouldRetainNode(rp);for(const dp of sp){var lp;(lp=ap.retention.nodesRetainedByZone.get(dp))===null||lp===void 0||lp.delete(rp)}np.atomValues.delete(rp),np.dirtyAtoms.delete(rp),np.nonvalidatedAtoms.delete(rp);const up=ap.graphsByVersion.get(np.version);if(up){const dp=up.nodeDeps.get(rp);if(dp!==void 0){up.nodeDeps.delete(rp);for(const fp of dp){var cp;(cp=up.nodeToNodeSubscriptions.get(fp))===null||cp===void 0||cp.delete(rp)}}up.nodeToNodeSubscriptions.delete(rp)}deleteNodeConfigIfPossible$1(rp)}function nodesRetainedByZone(_d,np){var rp;return(rp=_d.retention.nodesRetainedByZone.get(np))!==null&&rp!==void 0?rp:emptySet$1}function zonesThatCouldRetainNode(_d){const np=getNode$3(_d).retainedBy;return np===void 0||np==="components"||np==="recoilRoot"?[]:np instanceof RetentionZone$2?[np]:np}function scheduleOrPerformPossibleReleaseOfRetainable(_d,np){const rp=_d.getState();rp.nextTree?rp.retention.retainablesToCheckForRelease.add(np):releaseRetainablesNowOnCurrentTree(_d,new Set([np]))}function updateRetainCount(_d,np,rp){var ap;if(!Recoil_gkx("recoil_memory_managament_2020"))return;const sp=_d.getState().retention.referenceCounts,lp=((ap=sp.get(np))!==null&&ap!==void 0?ap:0)+rp;lp===0?updateRetainCountToZero(_d,np):sp.set(np,lp)}function updateRetainCountToZero(_d,np){if(!Recoil_gkx("recoil_memory_managament_2020"))return;_d.getState().retention.referenceCounts.delete(np),scheduleOrPerformPossibleReleaseOfRetainable(_d,np)}function releaseScheduledRetainablesNow(_d){if(!Recoil_gkx("recoil_memory_managament_2020"))return;const np=_d.getState();releaseRetainablesNowOnCurrentTree(_d,np.retention.retainablesToCheckForRelease),np.retention.retainablesToCheckForRelease.clear()}function retainedByOptionWithDefault(_d){return _d===void 0?"recoilRoot":_d}var Recoil_Retention={SUSPENSE_TIMEOUT_MS,updateRetainCount,updateRetainCountToZero,releaseScheduledRetainablesNow,retainedByOptionWithDefault};const{unstable_batchedUpdates}=ReactDOM;var ReactBatchedUpdates={unstable_batchedUpdates};const{unstable_batchedUpdates:unstable_batchedUpdates$1}=ReactBatchedUpdates;var Recoil_ReactBatchedUpdates={unstable_batchedUpdates:unstable_batchedUpdates$1};const{batchStart:batchStart$1}=Recoil_RecoilValueInterface,{unstable_batchedUpdates:unstable_batchedUpdates$2}=Recoil_ReactBatchedUpdates;let batcher=unstable_batchedUpdates$2||(_d=>_d());const setBatcher=_d=>{batcher=_d},getBatcher=()=>batcher,batchUpdates=_d=>{batcher(()=>{let np=()=>{};try{np=batchStart$1(),_d()}finally{np()}})};var Recoil_Batching={getBatcher,setBatcher,batchUpdates};function*concatIterables(_d){for(const np of _d)for(const rp of np)yield rp}var Recoil_concatIterables=concatIterables;const isSSR=typeof Window>"u"||typeof window>"u",isWindow=_d=>!isSSR&&(_d===window||_d instanceof Window),isReactNative=typeof navigator<"u"&&navigator.product==="ReactNative";var Recoil_Environment={isSSR,isReactNative,isWindow};function memoizeWithArgsHash(_d,np){let rp;return(...ap)=>{rp||(rp={});const sp=np(...ap);return Object.hasOwnProperty.call(rp,sp)||(rp[sp]=_d(...ap)),rp[sp]}}function memoizeOneWithArgsHash(_d,np){let rp,ap;return(...sp)=>{const lp=np(...sp);return rp===lp||(rp=lp,ap=_d(...sp)),ap}}function memoizeOneWithArgsHashAndInvalidation(_d,np){let rp,ap;return[(...up)=>{const cp=np(...up);return rp===cp||(rp=cp,ap=_d(...up)),ap},()=>{rp=null}]}var Recoil_Memoize={memoizeWithArgsHash,memoizeOneWithArgsHash,memoizeOneWithArgsHashAndInvalidation};const{batchUpdates:batchUpdates$1}=Recoil_Batching,{initializeNode:initializeNode$1,peekNodeInfo:peekNodeInfo$1}=Recoil_FunctionalCore,{graph:graph$1}=Recoil_Graph,{getNextStoreID:getNextStoreID$1}=Recoil_Keys,{DEFAULT_VALUE:DEFAULT_VALUE$1,recoilValues:recoilValues$1,recoilValuesForKeys:recoilValuesForKeys$2}=Recoil_Node,{AbstractRecoilValue:AbstractRecoilValue$2,getRecoilValueAsLoadable:getRecoilValueAsLoadable$1,setRecoilValue:setRecoilValue$1,setUnvalidatedRecoilValue:setUnvalidatedRecoilValue$1}=Recoil_RecoilValueInterface,{updateRetainCount:updateRetainCount$1}=Recoil_Retention,{setInvalidateMemoizedSnapshot:setInvalidateMemoizedSnapshot$1}=Recoil_SnapshotCache,{getNextTreeStateVersion:getNextTreeStateVersion$2,makeEmptyStoreState:makeEmptyStoreState$1}=Recoil_State,{isSSR:isSSR$1}=Recoil_Environment,{memoizeOneWithArgsHashAndInvalidation:memoizeOneWithArgsHashAndInvalidation$1}=Recoil_Memoize;class Snapshot{constructor(np,rp){_defineProperty$1(this,"_store",void 0),_defineProperty$1(this,"_refCount",1),_defineProperty$1(this,"getLoadable",ap=>(this.checkRefCount_INTERNAL(),getRecoilValueAsLoadable$1(this._store,ap))),_defineProperty$1(this,"getPromise",ap=>(this.checkRefCount_INTERNAL(),this.getLoadable(ap).toPromise())),_defineProperty$1(this,"getNodes_UNSTABLE",ap=>{if(this.checkRefCount_INTERNAL(),(ap==null?void 0:ap.isModified)===!0){if((ap==null?void 0:ap.isInitialized)===!1)return[];const up=this._store.getState().currentTree;return recoilValuesForKeys$2(up.dirtyAtoms)}const sp=this._store.getState().knownAtoms,lp=this._store.getState().knownSelectors;return(ap==null?void 0:ap.isInitialized)==null?recoilValues$1.values():ap.isInitialized===!0?recoilValuesForKeys$2(Recoil_concatIterables([sp,lp])):Recoil_filterIterable(recoilValues$1.values(),({key:up})=>!sp.has(up)&&!lp.has(up))}),_defineProperty$1(this,"getInfo_UNSTABLE",({key:ap})=>(this.checkRefCount_INTERNAL(),peekNodeInfo$1(this._store,this._store.getState().currentTree,ap))),_defineProperty$1(this,"map",ap=>{this.checkRefCount_INTERNAL();const sp=new MutableSnapshot(this,batchUpdates$1);return ap(sp),sp}),_defineProperty$1(this,"asyncMap",async ap=>{this.checkRefCount_INTERNAL();const sp=new MutableSnapshot(this,batchUpdates$1);return sp.retain(),await ap(sp),sp.autoRelease_INTERNAL(),sp}),this._store={storeID:getNextStoreID$1(),parentStoreID:rp,getState:()=>np,replaceState:ap=>{np.currentTree=ap(np.currentTree)},getGraph:ap=>{const sp=np.graphsByVersion;if(sp.has(ap))return Recoil_nullthrows(sp.get(ap));const lp=graph$1();return sp.set(ap,lp),lp},subscribeToTransactions:()=>({release:()=>{}}),addTransactionMetadata:()=>{throw Recoil_err("Cannot subscribe to Snapshots")}};for(const ap of this._store.getState().knownAtoms)initializeNode$1(this._store,ap,"get"),updateRetainCount$1(this._store,ap,1);this.autoRelease_INTERNAL()}retain(){this._refCount<=0,this._refCount++;let np=!1;return()=>{np||(np=!0,this._release())}}autoRelease_INTERNAL(){isSSR$1||window.setTimeout(()=>this._release(),10)}_release(){if(this._refCount--,this._refCount===0){if(this._store.getState().nodeCleanupFunctions.forEach(np=>np()),this._store.getState().nodeCleanupFunctions.clear(),!Recoil_gkx("recoil_memory_managament_2020"))return}else this._refCount<0}isRetained(){return this._refCount>0}checkRefCount_INTERNAL(){Recoil_gkx("recoil_memory_managament_2020")&&this._refCount<=0}getStore_INTERNAL(){return this.checkRefCount_INTERNAL(),this._store}getID(){return this.checkRefCount_INTERNAL(),this._store.getState().currentTree.stateID}getStoreID(){return this.checkRefCount_INTERNAL(),this._store.storeID}}function cloneStoreState(_d,np,rp=!1){const ap=_d.getState(),sp=rp?getNextTreeStateVersion$2():np.version;return{currentTree:{version:rp?sp:np.version,stateID:rp?sp:np.stateID,transactionMetadata:{...np.transactionMetadata},dirtyAtoms:new Set(np.dirtyAtoms),atomValues:np.atomValues.clone(),nonvalidatedAtoms:np.nonvalidatedAtoms.clone()},commitDepth:0,nextTree:null,previousTree:null,knownAtoms:new Set(ap.knownAtoms),knownSelectors:new Set(ap.knownSelectors),transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:new Map().set(sp,_d.getGraph(np.version)),retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map(Recoil_mapIterable(ap.nodeCleanupFunctions.entries(),([lp])=>[lp,()=>{}]))}}function freshSnapshot(_d){const np=new Snapshot(makeEmptyStoreState$1());return _d!=null?np.map(_d):np}const[memoizedCloneSnapshot,invalidateMemoizedSnapshot$2]=memoizeOneWithArgsHashAndInvalidation$1((_d,np)=>{var rp;const ap=_d.getState(),sp=np==="latest"?(rp=ap.nextTree)!==null&&rp!==void 0?rp:ap.currentTree:Recoil_nullthrows(ap.previousTree);return new Snapshot(cloneStoreState(_d,sp),_d.storeID)},(_d,np)=>{var rp,ap;return String(np)+String(_d.storeID)+String((rp=_d.getState().nextTree)===null||rp===void 0?void 0:rp.version)+String(_d.getState().currentTree.version)+String((ap=_d.getState().previousTree)===null||ap===void 0?void 0:ap.version)});setInvalidateMemoizedSnapshot$1(invalidateMemoizedSnapshot$2);function cloneSnapshot(_d,np="latest"){const rp=memoizedCloneSnapshot(_d,np);return rp.isRetained()?rp:(invalidateMemoizedSnapshot$2(),memoizedCloneSnapshot(_d,np))}class MutableSnapshot extends Snapshot{constructor(np,rp){super(cloneStoreState(np.getStore_INTERNAL(),np.getStore_INTERNAL().getState().currentTree,!0),np.getStoreID()),_defineProperty$1(this,"_batch",void 0),_defineProperty$1(this,"set",(ap,sp)=>{this.checkRefCount_INTERNAL();const lp=this.getStore_INTERNAL();this._batch(()=>{updateRetainCount$1(lp,ap.key,1),setRecoilValue$1(this.getStore_INTERNAL(),ap,sp)})}),_defineProperty$1(this,"reset",ap=>{this.checkRefCount_INTERNAL();const sp=this.getStore_INTERNAL();this._batch(()=>{updateRetainCount$1(sp,ap.key,1),setRecoilValue$1(this.getStore_INTERNAL(),ap,DEFAULT_VALUE$1)})}),_defineProperty$1(this,"setUnvalidatedAtomValues_DEPRECATED",ap=>{this.checkRefCount_INTERNAL();const sp=this.getStore_INTERNAL();batchUpdates$1(()=>{for(const[lp,up]of ap.entries())updateRetainCount$1(sp,lp,1),setUnvalidatedRecoilValue$1(sp,new AbstractRecoilValue$2(lp),up)})}),this._batch=rp}}var Recoil_Snapshot={Snapshot,MutableSnapshot,freshSnapshot,cloneSnapshot},Recoil_Snapshot_1=Recoil_Snapshot.Snapshot,Recoil_Snapshot_2=Recoil_Snapshot.MutableSnapshot,Recoil_Snapshot_3=Recoil_Snapshot.freshSnapshot,Recoil_Snapshot_4=Recoil_Snapshot.cloneSnapshot,Recoil_Snapshot$1=Object.freeze({__proto__:null,Snapshot:Recoil_Snapshot_1,MutableSnapshot:Recoil_Snapshot_2,freshSnapshot:Recoil_Snapshot_3,cloneSnapshot:Recoil_Snapshot_4});function unionSets(..._d){const np=new Set;for(const rp of _d)for(const ap of rp)np.add(ap);return np}var Recoil_unionSets=unionSets;const{useRef}=React;function useRefInitOnce(_d){const np=useRef(_d);return np.current===_d&&typeof _d=="function"&&(np.current=_d()),np}var Recoil_useRefInitOnce=useRefInitOnce;const{getNextTreeStateVersion:getNextTreeStateVersion$3,makeEmptyStoreState:makeEmptyStoreState$2}=Recoil_State,{cleanUpNode:cleanUpNode$2,getDownstreamNodes:getDownstreamNodes$2,initializeNode:initializeNode$2,setNodeValue:setNodeValue$2,setUnvalidatedAtomValue_DEPRECATED:setUnvalidatedAtomValue_DEPRECATED$1}=Recoil_FunctionalCore,{graph:graph$2}=Recoil_Graph,{cloneGraph:cloneGraph$1}=Recoil_Graph,{getNextStoreID:getNextStoreID$2}=Recoil_Keys,{createMutableSource:createMutableSource$1,reactMode:reactMode$2}=Recoil_ReactMode,{applyAtomValueWrites:applyAtomValueWrites$1}=Recoil_RecoilValueInterface,{releaseScheduledRetainablesNow:releaseScheduledRetainablesNow$1}=Recoil_Retention,{freshSnapshot:freshSnapshot$1}=Recoil_Snapshot$1,{useCallback,useContext,useEffect,useMemo,useRef:useRef$1,useState}=React;function notInAContext(){throw Recoil_err("This component must be used inside a <RecoilRoot> component.")}const defaultStore=Object.freeze({storeID:getNextStoreID$2(),getState:notInAContext,replaceState:notInAContext,getGraph:notInAContext,subscribeToTransactions:notInAContext,addTransactionMetadata:notInAContext});let stateReplacerIsBeingExecuted=!1;function startNextTreeIfNeeded(_d){if(stateReplacerIsBeingExecuted)throw Recoil_err("An atom update was triggered within the execution of a state updater function. State updater functions provided to Recoil must be pure functions.");const np=_d.getState();if(np.nextTree===null){Recoil_gkx("recoil_memory_managament_2020")&&Recoil_gkx("recoil_release_on_cascading_update_killswitch_2021")&&np.commitDepth>0&&releaseScheduledRetainablesNow$1(_d);const rp=np.currentTree.version,ap=getNextTreeStateVersion$3();np.nextTree={...np.currentTree,version:ap,stateID:ap,dirtyAtoms:new Set,transactionMetadata:{}},np.graphsByVersion.set(ap,cloneGraph$1(Recoil_nullthrows(np.graphsByVersion.get(rp))))}}const AppContext=React.createContext({current:defaultStore}),useStoreRef=()=>useContext(AppContext),MutableSourceContext=React.createContext(null);function useRecoilMutableSource(){return useContext(MutableSourceContext)}function notifyComponents(_d,np,rp){const ap=getDownstreamNodes$2(_d,rp,rp.dirtyAtoms);for(const sp of ap){const lp=np.nodeToComponentSubscriptions.get(sp);if(lp)for(const[up,[cp,dp]]of lp)dp(rp)}}function sendEndOfBatchNotifications(_d){const np=_d.getState(),rp=np.currentTree,ap=rp.dirtyAtoms;if(ap.size){for(const[sp,lp]of np.nodeTransactionSubscriptions)if(ap.has(sp))for(const[up,cp]of lp)cp(_d);for(const[sp,lp]of np.transactionSubscriptions)lp(_d);(!reactMode$2().early||np.suspendedComponentResolvers.size>0)&&(notifyComponents(_d,np,rp),np.suspendedComponentResolvers.forEach(sp=>sp()),np.suspendedComponentResolvers.clear())}np.queuedComponentCallbacks_DEPRECATED.forEach(sp=>sp(rp)),np.queuedComponentCallbacks_DEPRECATED.splice(0,np.queuedComponentCallbacks_DEPRECATED.length)}function endBatch(_d){const np=_d.getState();np.commitDepth++;try{const{nextTree:rp}=np;if(rp==null)return;np.previousTree=np.currentTree,np.currentTree=rp,np.nextTree=null,sendEndOfBatchNotifications(_d),np.previousTree!=null?np.graphsByVersion.delete(np.previousTree.version):Recoil_recoverableViolation("Ended batch with no previous state, which is unexpected","recoil"),np.previousTree=null,Recoil_gkx("recoil_memory_managament_2020")&&rp==null&&releaseScheduledRetainablesNow$1(_d)}finally{np.commitDepth--}}function Batcher({setNotifyBatcherOfChange:_d}){const np=useStoreRef(),[,rp]=useState([]);return _d(()=>rp({})),useEffect(()=>(_d(()=>rp({})),()=>{_d(()=>{})}),[_d]),useEffect(()=>{Recoil_Queue.enqueueExecution("Batcher",()=>{endBatch(np.current)})}),null}function initialStoreState_DEPRECATED(_d,np){const rp=makeEmptyStoreState$2();return np({set:(ap,sp)=>{const lp=rp.currentTree,up=setNodeValue$2(_d,lp,ap.key,sp),cp=new Set(up.keys()),dp=lp.nonvalidatedAtoms.clone();for(const fp of cp)dp.delete(fp);rp.currentTree={...lp,dirtyAtoms:Recoil_unionSets(lp.dirtyAtoms,cp),atomValues:applyAtomValueWrites$1(lp.atomValues,up),nonvalidatedAtoms:dp}},setUnvalidatedAtomValues:ap=>{ap.forEach((sp,lp)=>{rp.currentTree=setUnvalidatedAtomValue_DEPRECATED$1(rp.currentTree,lp,sp)})}}),rp}function initialStoreState(_d){const np=freshSnapshot$1(_d),rp=np.getStore_INTERNAL().getState();return np.retain(),rp.nodeCleanupFunctions.forEach(ap=>ap()),rp.nodeCleanupFunctions.clear(),rp}let nextID=0;function RecoilRoot_INTERNAL({initializeState_DEPRECATED:_d,initializeState:np,store_INTERNAL:rp,children:ap}){let sp;const lp=gp=>{const vp=sp.current.graphsByVersion;if(vp.has(gp))return Recoil_nullthrows(vp.get(gp));const xp=graph$2();return vp.set(gp,xp),xp},up=(gp,vp)=>{if(vp==null){const{transactionSubscriptions:xp}=hp.current.getState(),Sp=nextID++;return xp.set(Sp,gp),{release:()=>{xp.delete(Sp)}}}else{const{nodeTransactionSubscriptions:xp}=hp.current.getState();xp.has(vp)||xp.set(vp,new Map);const Sp=nextID++;return Recoil_nullthrows(xp.get(vp)).set(Sp,gp),{release:()=>{const yp=xp.get(vp);yp&&(yp.delete(Sp),yp.size===0&&xp.delete(vp))}}}},cp=gp=>{startNextTreeIfNeeded(hp.current);for(const vp of Object.keys(gp))Recoil_nullthrows(hp.current.getState().nextTree).transactionMetadata[vp]=gp[vp]},dp=gp=>{startNextTreeIfNeeded(hp.current);const vp=Recoil_nullthrows(sp.current.nextTree);let xp;try{stateReplacerIsBeingExecuted=!0,xp=gp(vp)}finally{stateReplacerIsBeingExecuted=!1}xp!==vp&&(sp.current.nextTree=xp,reactMode$2().early&&notifyComponents(hp.current,sp.current,xp),Recoil_nullthrows(fp.current)())},fp=useRef$1(null),pp=useCallback(gp=>{fp.current=gp},[fp]),hp=Recoil_useRefInitOnce(()=>rp??{storeID:getNextStoreID$2(),getState:()=>sp.current,replaceState:dp,getGraph:lp,subscribeToTransactions:up,addTransactionMetadata:cp});rp!=null&&(hp.current=rp),sp=Recoil_useRefInitOnce(()=>_d!=null?initialStoreState_DEPRECATED(hp.current,_d):np!=null?initialStoreState(np):makeEmptyStoreState$2());const mp=useMemo(()=>createMutableSource$1==null?void 0:createMutableSource$1(sp,()=>sp.current.currentTree.version),[sp]);return useEffect(()=>{const gp=hp.current;for(const vp of new Set(gp.getState().knownAtoms))initializeNode$2(gp,vp,"get");return()=>{for(const vp of gp.getState().knownAtoms)cleanUpNode$2(gp,vp)}},[hp]),React.createElement(AppContext.Provider,{value:hp},React.createElement(MutableSourceContext.Provider,{value:mp},React.createElement(Batcher,{setNotifyBatcherOfChange:pp}),ap))}function RecoilRoot(_d){const{override:np,...rp}=_d,ap=useStoreRef();return np===!1&&ap.current!==defaultStore?_d.children:React.createElement(RecoilRoot_INTERNAL,rp)}function useRecoilStoreID(){return useStoreRef().current.storeID}var Recoil_RecoilRoot={RecoilRoot,useStoreRef,useRecoilMutableSource,useRecoilStoreID,notifyComponents_FOR_TESTING:notifyComponents,sendEndOfBatchNotifications_FOR_TESTING:sendEndOfBatchNotifications};function shallowArrayEqual(_d,np){if(_d===np)return!0;if(_d.length!==np.length)return!1;for(let rp=0,ap=_d.length;rp<ap;rp++)if(_d[rp]!==np[rp])return!1;return!0}var Recoil_shallowArrayEqual=shallowArrayEqual;const{useEffect:useEffect$1,useRef:useRef$2}=React;function usePrevious(_d){const np=useRef$2();return useEffect$1(()=>{np.current=_d}),np.current}var Recoil_usePrevious=usePrevious;const{useStoreRef:useStoreRef$1}=Recoil_RecoilRoot,{SUSPENSE_TIMEOUT_MS:SUSPENSE_TIMEOUT_MS$1}=Recoil_Retention,{updateRetainCount:updateRetainCount$2}=Recoil_Retention,{RetentionZone:RetentionZone$3}=Recoil_RetentionZone,{useEffect:useEffect$2,useRef:useRef$3}=React,{isSSR:isSSR$2}=Recoil_Environment;function useRetain(_d){if(Recoil_gkx("recoil_memory_managament_2020"))return useRetain_ACTUAL(_d)}function useRetain_ACTUAL(_d){const rp=(Array.isArray(_d)?_d:[_d]).map(up=>up instanceof RetentionZone$3?up:up.key),ap=useStoreRef$1();useEffect$2(()=>{if(!Recoil_gkx("recoil_memory_managament_2020"))return;const up=ap.current;if(sp.current&&!isSSR$2)window.clearTimeout(sp.current),sp.current=null;else for(const cp of rp)updateRetainCount$2(up,cp,1);return()=>{for(const cp of rp)updateRetainCount$2(up,cp,-1)}},[ap,...rp]);const sp=useRef$3(),lp=Recoil_usePrevious(rp);if(!isSSR$2&&(lp===void 0||!Recoil_shallowArrayEqual(lp,rp))){const up=ap.current;for(const cp of rp)updateRetainCount$2(up,cp,1);if(lp)for(const cp of lp)updateRetainCount$2(up,cp,-1);sp.current&&window.clearTimeout(sp.current),sp.current=window.setTimeout(()=>{sp.current=null;for(const cp of rp)updateRetainCount$2(up,cp,-1)},SUSPENSE_TIMEOUT_MS$1)}}var Recoil_useRetain=useRetain;function useComponentName(){return"<component name not available>"}var Recoil_useComponentName=useComponentName;const{batchUpdates:batchUpdates$2}=Recoil_Batching,{DEFAULT_VALUE:DEFAULT_VALUE$2}=Recoil_Node,{currentRendererSupportsUseSyncExternalStore:currentRendererSupportsUseSyncExternalStore$1,reactMode:reactMode$3,useMutableSource:useMutableSource$1,useSyncExternalStore:useSyncExternalStore$1}=Recoil_ReactMode,{useRecoilMutableSource:useRecoilMutableSource$1,useStoreRef:useStoreRef$2}=Recoil_RecoilRoot,{AbstractRecoilValue:AbstractRecoilValue$3,getRecoilValueAsLoadable:getRecoilValueAsLoadable$2,setRecoilValue:setRecoilValue$2,setUnvalidatedRecoilValue:setUnvalidatedRecoilValue$2,subscribeToRecoilValue:subscribeToRecoilValue$1}=Recoil_RecoilValueInterface,{useCallback:useCallback$1,useEffect:useEffect$3,useMemo:useMemo$1,useRef:useRef$4,useState:useState$1}=React,{setByAddingToSet:setByAddingToSet$2}=Recoil_CopyOnWrite,{isSSR:isSSR$3}=Recoil_Environment;function handleLoadable(_d,np,rp){if(_d.state==="hasValue")return _d.contents;throw _d.state==="loading"?new Promise(sp=>{const lp=rp.current.getState().suspendedComponentResolvers;lp.add(sp),isSSR$3&&Recoil_isPromise(_d.contents)&&_d.contents.finally(()=>{lp.delete(sp)})}):_d.state==="hasError"?_d.contents:Recoil_err(`Invalid value of loadable atom "${np.key}"`)}function useRecoilInterface_DEPRECATED(){const _d=Recoil_useComponentName(),np=useStoreRef$2(),[,rp]=useState$1([]),ap=useRef$4(new Set);ap.current=new Set;const sp=useRef$4(new Set),lp=useRef$4(new Map),up=useCallback$1(dp=>{const fp=lp.current.get(dp);fp&&(fp.release(),lp.current.delete(dp))},[lp]),cp=useCallback$1((dp,fp)=>{lp.current.has(fp)&&rp([])},[]);return useEffect$3(()=>{const dp=np.current;Recoil_differenceSets(ap.current,sp.current).forEach(fp=>{if(lp.current.has(fp))return;const pp=subscribeToRecoilValue$1(dp,new AbstractRecoilValue$3(fp),mp=>cp(mp,fp),_d);lp.current.set(fp,pp),dp.getState().nextTree?dp.getState().queuedComponentCallbacks_DEPRECATED.push(()=>{cp(dp.getState(),fp)}):cp(dp.getState(),fp)}),Recoil_differenceSets(sp.current,ap.current).forEach(fp=>{up(fp)}),sp.current=ap.current}),useEffect$3(()=>{const dp=lp.current;return Recoil_differenceSets(ap.current,new Set(dp.keys())).forEach(fp=>{const pp=subscribeToRecoilValue$1(np.current,new AbstractRecoilValue$3(fp),hp=>cp(hp,fp),_d);dp.set(fp,pp)}),()=>dp.forEach((fp,pp)=>up(pp))},[_d,np,up,cp]),useMemo$1(()=>{function dp(vp){return xp=>{setRecoilValue$2(np.current,vp,xp)}}function fp(vp){return()=>setRecoilValue$2(np.current,vp,DEFAULT_VALUE$2)}function pp(vp){var xp;ap.current.has(vp.key)||(ap.current=setByAddingToSet$2(ap.current,vp.key));const Sp=np.current.getState();return getRecoilValueAsLoadable$2(np.current,vp,reactMode$3().early&&(xp=Sp.nextTree)!==null&&xp!==void 0?xp:Sp.currentTree)}function hp(vp){const xp=pp(vp);return handleLoadable(xp,vp,np)}function mp(vp){return[hp(vp),dp(vp)]}function gp(vp){return[pp(vp),dp(vp)]}return{getRecoilValue:hp,getRecoilValueLoadable:pp,getRecoilState:mp,getRecoilStateLoadable:gp,getSetRecoilState:dp,getResetRecoilState:fp}},[ap,np])}const recoilComponentGetRecoilValueCount_FOR_TESTING={current:0};function useRecoilValueLoadable_SYNC_EXTERNAL_STORE(_d){const np=useStoreRef$2(),rp=Recoil_useComponentName(),ap=useCallback$1(()=>{var cp;const dp=np.current,fp=dp.getState(),pp=reactMode$3().early&&(cp=fp.nextTree)!==null&&cp!==void 0?cp:fp.currentTree;return{loadable:getRecoilValueAsLoadable$2(dp,_d,pp),key:_d.key}},[np,_d]),sp=useCallback$1(cp=>{let dp;return()=>{var fp,pp;const hp=cp();return(fp=dp)!==null&&fp!==void 0&&fp.loadable.is(hp.loadable)&&((pp=dp)===null||pp===void 0?void 0:pp.key)===hp.key?dp:(dp=hp,hp)}},[]),lp=useMemo$1(()=>sp(ap),[ap,sp]),up=useCallback$1(cp=>{const dp=np.current;return subscribeToRecoilValue$1(dp,_d,cp,rp).release},[np,_d,rp]);return useSyncExternalStore$1(up,lp,lp).loadable}function useRecoilValueLoadable_MUTABLE_SOURCE(_d){const np=useStoreRef$2(),rp=useCallback$1(()=>{var fp;const pp=np.current,hp=pp.getState(),mp=reactMode$3().early&&(fp=hp.nextTree)!==null&&fp!==void 0?fp:hp.currentTree;return getRecoilValueAsLoadable$2(pp,_d,mp)},[np,_d]),ap=useCallback$1(()=>rp(),[rp]),sp=Recoil_useComponentName(),lp=useCallback$1((fp,pp)=>{const hp=np.current;return subscribeToRecoilValue$1(hp,_d,()=>{if(!Recoil_gkx("recoil_suppress_rerender_in_callback"))return pp();const gp=rp();dp.current.is(gp)||pp(),dp.current=gp},sp).release},[np,_d,sp,rp]),up=useRecoilMutableSource$1();if(up==null)throw Recoil_err("Recoil hooks must be used in components contained within a <RecoilRoot> component.");const cp=useMutableSource$1(up,ap,lp),dp=useRef$4(cp);return useEffect$3(()=>{dp.current=cp}),cp}function useRecoilValueLoadable_TRANSITION_SUPPORT(_d){const np=useStoreRef$2(),rp=Recoil_useComponentName(),ap=useCallback$1(()=>{var dp;const fp=np.current,pp=fp.getState(),hp=reactMode$3().early&&(dp=pp.nextTree)!==null&&dp!==void 0?dp:pp.currentTree;return getRecoilValueAsLoadable$2(fp,_d,hp)},[np,_d]),sp=useCallback$1(()=>({loadable:ap(),key:_d.key}),[ap,_d.key]),lp=useCallback$1(dp=>{const fp=sp();return dp.loadable.is(fp.loadable)&&dp.key===fp.key?dp:fp},[sp]);useEffect$3(()=>{const dp=subscribeToRecoilValue$1(np.current,_d,fp=>{cp(lp)},rp);return cp(lp),dp.release},[rp,_d,np,lp]);const[up,cp]=useState$1(sp);return up.key!==_d.key?sp().loadable:up.loadable}function useRecoilValueLoadable_LEGACY(_d){const np=useStoreRef$2(),[,rp]=useState$1([]),ap=Recoil_useComponentName(),sp=useCallback$1(()=>{var cp;const dp=np.current,fp=dp.getState(),pp=reactMode$3().early&&(cp=fp.nextTree)!==null&&cp!==void 0?cp:fp.currentTree;return getRecoilValueAsLoadable$2(dp,_d,pp)},[np,_d]),lp=sp(),up=useRef$4(lp);return useEffect$3(()=>{up.current=lp}),useEffect$3(()=>{const cp=np.current,dp=cp.getState(),fp=subscribeToRecoilValue$1(cp,_d,hp=>{var mp;if(!Recoil_gkx("recoil_suppress_rerender_in_callback"))return rp([]);const gp=sp();(mp=up.current)!==null&&mp!==void 0&&mp.is(gp)||rp(gp),up.current=gp},ap);if(dp.nextTree)cp.getState().queuedComponentCallbacks_DEPRECATED.push(()=>{up.current=null,rp([])});else{var pp;if(!Recoil_gkx("recoil_suppress_rerender_in_callback"))return rp([]);const hp=sp();(pp=up.current)!==null&&pp!==void 0&&pp.is(hp)||rp(hp),up.current=hp}return fp.release},[ap,sp,_d,np]),lp}function useRecoilValueLoadable(_d){return Recoil_gkx("recoil_memory_managament_2020")&&Recoil_useRetain(_d),{TRANSITION_SUPPORT:useRecoilValueLoadable_TRANSITION_SUPPORT,SYNC_EXTERNAL_STORE:currentRendererSupportsUseSyncExternalStore$1()?useRecoilValueLoadable_SYNC_EXTERNAL_STORE:useRecoilValueLoadable_TRANSITION_SUPPORT,MUTABLE_SOURCE:useRecoilValueLoadable_MUTABLE_SOURCE,LEGACY:useRecoilValueLoadable_LEGACY}[reactMode$3().mode](_d)}function useRecoilValue(_d){const np=useStoreRef$2(),rp=useRecoilValueLoadable(_d);return handleLoadable(rp,_d,np)}function useSetRecoilState(_d){const np=useStoreRef$2();return useCallback$1(rp=>{setRecoilValue$2(np.current,_d,rp)},[np,_d])}function useResetRecoilState(_d){const np=useStoreRef$2();return useCallback$1(()=>{setRecoilValue$2(np.current,_d,DEFAULT_VALUE$2)},[np,_d])}function useRecoilState(_d){return[useRecoilValue(_d),useSetRecoilState(_d)]}function useRecoilStateLoadable(_d){return[useRecoilValueLoadable(_d),useSetRecoilState(_d)]}function useSetUnvalidatedAtomValues(){const _d=useStoreRef$2();return(np,rp={})=>{batchUpdates$2(()=>{_d.current.addTransactionMetadata(rp),np.forEach((ap,sp)=>setUnvalidatedRecoilValue$2(_d.current,new AbstractRecoilValue$3(sp),ap))})}}function useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE(_d){return Recoil_gkx("recoil_memory_managament_2020")&&Recoil_useRetain(_d),useRecoilValueLoadable_TRANSITION_SUPPORT(_d)}function useRecoilValue_TRANSITION_SUPPORT_UNSTABLE(_d){const np=useStoreRef$2(),rp=useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE(_d);return handleLoadable(rp,_d,np)}function useRecoilState_TRANSITION_SUPPORT_UNSTABLE(_d){return[useRecoilValue_TRANSITION_SUPPORT_UNSTABLE(_d),useSetRecoilState(_d)]}var Recoil_Hooks={recoilComponentGetRecoilValueCount_FOR_TESTING,useRecoilInterface:useRecoilInterface_DEPRECATED,useRecoilState,useRecoilStateLoadable,useRecoilValue,useRecoilValueLoadable,useResetRecoilState,useSetRecoilState,useSetUnvalidatedAtomValues,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE,useRecoilState_TRANSITION_SUPPORT_UNSTABLE};function filterMap(_d,np){const rp=new Map;for(const[ap,sp]of _d)np(sp,ap)&&rp.set(ap,sp);return rp}var Recoil_filterMap=filterMap;function filterSet(_d,np){const rp=new Set;for(const ap of _d)np(ap)&&rp.add(ap);return rp}var Recoil_filterSet=filterSet;function mergeMaps(..._d){const np=new Map;for(let rp=0;rp<_d.length;rp++){const ap=_d[rp].keys();let sp;for(;!(sp=ap.next()).done;)np.set(sp.value,_d[rp].get(sp.value))}return np}var Recoil_mergeMaps=mergeMaps;const{batchUpdates:batchUpdates$3}=Recoil_Batching,{DEFAULT_VALUE:DEFAULT_VALUE$3,getNode:getNode$4,nodes:nodes$1}=Recoil_Node,{useStoreRef:useStoreRef$3}=Recoil_RecoilRoot,{AbstractRecoilValue:AbstractRecoilValue$4,setRecoilValueLoadable:setRecoilValueLoadable$1}=Recoil_RecoilValueInterface,{SUSPENSE_TIMEOUT_MS:SUSPENSE_TIMEOUT_MS$2}=Recoil_Retention,{cloneSnapshot:cloneSnapshot$1}=Recoil_Snapshot$1,{useCallback:useCallback$2,useEffect:useEffect$4,useRef:useRef$5,useState:useState$2}=React,{isSSR:isSSR$4}=Recoil_Environment;function useTransactionSubscription(_d){const np=useStoreRef$3();useEffect$4(()=>np.current.subscribeToTransactions(_d).release,[_d,np])}function externallyVisibleAtomValuesInState(_d){const np=_d.atomValues.toMap(),rp=Recoil_mapMap(Recoil_filterMap(np,(ap,sp)=>{const up=getNode$4(sp).persistence_UNSTABLE;return up!=null&&up.type!=="none"&&ap.state==="hasValue"}),ap=>ap.contents);return Recoil_mergeMaps(_d.nonvalidatedAtoms.toMap(),rp)}function useTransactionObservation_DEPRECATED(_d){useTransactionSubscription(useCallback$2(np=>{let rp=np.getState().previousTree;const ap=np.getState().currentTree;rp||(rp=np.getState().currentTree);const sp=externallyVisibleAtomValuesInState(ap),lp=externallyVisibleAtomValuesInState(rp),up=Recoil_mapMap(nodes$1,dp=>{var fp,pp,hp,mp;return{persistence_UNSTABLE:{type:(fp=(pp=dp.persistence_UNSTABLE)===null||pp===void 0?void 0:pp.type)!==null&&fp!==void 0?fp:"none",backButton:(hp=(mp=dp.persistence_UNSTABLE)===null||mp===void 0?void 0:mp.backButton)!==null&&hp!==void 0?hp:!1}}}),cp=Recoil_filterSet(ap.dirtyAtoms,dp=>sp.has(dp)||lp.has(dp));_d({atomValues:sp,previousAtomValues:lp,atomInfo:up,modifiedAtoms:cp,transactionMetadata:{...ap.transactionMetadata}})},[_d]))}function useRecoilTransactionObserver(_d){useTransactionSubscription(useCallback$2(np=>{const rp=cloneSnapshot$1(np,"latest"),ap=cloneSnapshot$1(np,"previous");_d({snapshot:rp,previousSnapshot:ap})},[_d]))}function useRecoilSnapshot(){const _d=useStoreRef$3(),[np,rp]=useState$2(()=>cloneSnapshot$1(_d.current)),ap=Recoil_usePrevious(np),sp=useRef$5(),lp=useRef$5();if(useTransactionSubscription(useCallback$2(cp=>rp(cloneSnapshot$1(cp)),[])),useEffect$4(()=>{const cp=np.retain();if(sp.current&&!isSSR$4){var dp;window.clearTimeout(sp.current),sp.current=null,(dp=lp.current)===null||dp===void 0||dp.call(lp),lp.current=null}return()=>{window.setTimeout(cp,10)}},[np]),ap!==np&&!isSSR$4){if(sp.current){var up;window.clearTimeout(sp.current),sp.current=null,(up=lp.current)===null||up===void 0||up.call(lp),lp.current=null}lp.current=np.retain(),sp.current=window.setTimeout(()=>{var cp;sp.current=null,(cp=lp.current)===null||cp===void 0||cp.call(lp),lp.current=null},SUSPENSE_TIMEOUT_MS$2)}return np}function gotoSnapshot(_d,np){var rp;const ap=_d.getState(),sp=(rp=ap.nextTree)!==null&&rp!==void 0?rp:ap.currentTree,lp=np.getStore_INTERNAL().getState().currentTree;batchUpdates$3(()=>{const up=new Set;for(const fp of[sp.atomValues.keys(),lp.atomValues.keys()])for(const pp of fp){var cp,dp;((cp=sp.atomValues.get(pp))===null||cp===void 0?void 0:cp.contents)!==((dp=lp.atomValues.get(pp))===null||dp===void 0?void 0:dp.contents)&&getNode$4(pp).shouldRestoreFromSnapshots&&up.add(pp)}up.forEach(fp=>{setRecoilValueLoadable$1(_d,new AbstractRecoilValue$4(fp),lp.atomValues.has(fp)?Recoil_nullthrows(lp.atomValues.get(fp)):DEFAULT_VALUE$3)}),_d.replaceState(fp=>({...fp,stateID:np.getID()}))})}function useGotoRecoilSnapshot(){const _d=useStoreRef$3();return useCallback$2(np=>gotoSnapshot(_d.current,np),[_d])}var Recoil_SnapshotHooks={useRecoilSnapshot,gotoSnapshot,useGotoRecoilSnapshot,useRecoilTransactionObserver,useTransactionObservation_DEPRECATED,useTransactionSubscription_DEPRECATED:useTransactionSubscription};const{peekNodeInfo:peekNodeInfo$2}=Recoil_FunctionalCore,{useStoreRef:useStoreRef$4}=Recoil_RecoilRoot;function useGetRecoilValueInfo(){const _d=useStoreRef$4();return({key:np})=>peekNodeInfo$2(_d.current,_d.current.getState().currentTree,np)}var Recoil_useGetRecoilValueInfo=useGetRecoilValueInfo;const{reactMode:reactMode$4}=Recoil_ReactMode,{RecoilRoot:RecoilRoot$1,useStoreRef:useStoreRef$5}=Recoil_RecoilRoot,{useMemo:useMemo$2}=React;function useRecoilBridgeAcrossReactRoots(){reactMode$4().mode==="MUTABLE_SOURCE"&&console.warn("Warning: There are known issues using useRecoilBridgeAcrossReactRoots() in recoil_mutable_source rendering mode.  Please consider upgrading to recoil_sync_external_store mode.");const _d=useStoreRef$5().current;return useMemo$2(()=>{function np({children:rp}){return React.createElement(RecoilRoot$1,{store_INTERNAL:_d},rp)}return np},[_d])}var Recoil_useRecoilBridgeAcrossReactRoots=useRecoilBridgeAcrossReactRoots;const{loadableWithValue:loadableWithValue$1}=Recoil_Loadable$1,{initializeNode:initializeNode$3}=Recoil_FunctionalCore,{DEFAULT_VALUE:DEFAULT_VALUE$4,getNode:getNode$5}=Recoil_Node,{copyTreeState:copyTreeState$1,getRecoilValueAsLoadable:getRecoilValueAsLoadable$3,invalidateDownstreams:invalidateDownstreams$1,writeLoadableToTreeState:writeLoadableToTreeState$1}=Recoil_RecoilValueInterface;function isAtom(_d){return getNode$5(_d.key).nodeType==="atom"}class TransactionInterfaceImpl{constructor(np,rp){_defineProperty$1(this,"_store",void 0),_defineProperty$1(this,"_treeState",void 0),_defineProperty$1(this,"_changes",void 0),_defineProperty$1(this,"get",ap=>{if(this._changes.has(ap.key))return this._changes.get(ap.key);if(!isAtom(ap))throw Recoil_err("Reading selectors within atomicUpdate is not supported");const sp=getRecoilValueAsLoadable$3(this._store,ap,this._treeState);if(sp.state==="hasValue")return sp.contents;throw sp.state==="hasError"?sp.contents:Recoil_err(`Expected Recoil atom ${ap.key} to have a value, but it is in a loading state.`)}),_defineProperty$1(this,"set",(ap,sp)=>{if(!isAtom(ap))throw Recoil_err("Setting selectors within atomicUpdate is not supported");if(typeof sp=="function"){const lp=this.get(ap);this._changes.set(ap.key,sp(lp))}else initializeNode$3(this._store,ap.key,"set"),this._changes.set(ap.key,sp)}),_defineProperty$1(this,"reset",ap=>{this.set(ap,DEFAULT_VALUE$4)}),this._store=np,this._treeState=rp,this._changes=new Map}newTreeState_INTERNAL(){if(this._changes.size===0)return this._treeState;const np=copyTreeState$1(this._treeState);for(const[rp,ap]of this._changes)writeLoadableToTreeState$1(np,rp,loadableWithValue$1(ap));return invalidateDownstreams$1(this._store,np),np}}function atomicUpdater(_d){return np=>{_d.replaceState(rp=>{const ap=new TransactionInterfaceImpl(_d,rp);return np(ap),ap.newTreeState_INTERNAL()})}}var Recoil_AtomicUpdates={atomicUpdater},Recoil_AtomicUpdates_1=Recoil_AtomicUpdates.atomicUpdater,Recoil_AtomicUpdates$1=Object.freeze({__proto__:null,atomicUpdater:Recoil_AtomicUpdates_1});function invariant(_d,np){if(!_d)throw new Error(np)}var invariant_1=invariant,Recoil_invariant=invariant_1;const{atomicUpdater:atomicUpdater$1}=Recoil_AtomicUpdates$1,{batchUpdates:batchUpdates$4}=Recoil_Batching,{DEFAULT_VALUE:DEFAULT_VALUE$5}=Recoil_Node,{useStoreRef:useStoreRef$6}=Recoil_RecoilRoot,{refreshRecoilValue:refreshRecoilValue$1,setRecoilValue:setRecoilValue$3}=Recoil_RecoilValueInterface,{cloneSnapshot:cloneSnapshot$2}=Recoil_Snapshot$1,{gotoSnapshot:gotoSnapshot$1}=Recoil_SnapshotHooks,{useCallback:useCallback$3}=React;class Sentinel{}const SENTINEL=new Sentinel;function recoilCallback(_d,np,rp,ap){let sp=SENTINEL,lp;if(batchUpdates$4(()=>{const cp="useRecoilCallback() expects a function that returns a function: it accepts a function of the type (RecoilInterface) => (Args) => ReturnType and returns a callback function (Args) => ReturnType, where RecoilInterface is an object {snapshot, set, ...} and Args and ReturnType are the argument and return types of the callback you want to create.  Please see the docs at recoiljs.org for details.";if(typeof np!="function")throw Recoil_err(cp);const dp=Recoil_lazyProxy({...ap??{},set:(pp,hp)=>setRecoilValue$3(_d,pp,hp),reset:pp=>setRecoilValue$3(_d,pp,DEFAULT_VALUE$5),refresh:pp=>refreshRecoilValue$1(_d,pp),gotoSnapshot:pp=>gotoSnapshot$1(_d,pp),transact_UNSTABLE:pp=>atomicUpdater$1(_d)(pp)},{snapshot:()=>{const pp=cloneSnapshot$2(_d);return lp=pp.retain(),pp}}),fp=np(dp);if(typeof fp!="function")throw Recoil_err(cp);sp=fp(...rp)}),sp instanceof Sentinel&&Recoil_invariant(!1),Recoil_isPromise(sp))sp=sp.finally(()=>{var cp;(cp=lp)===null||cp===void 0||cp()});else{var up;(up=lp)===null||up===void 0||up()}return sp}function useRecoilCallback(_d,np){const rp=useStoreRef$6();return useCallback$3((...ap)=>recoilCallback(rp.current,_d,ap),np!=null?[...np,rp]:void 0)}var Recoil_useRecoilCallback={recoilCallback,useRecoilCallback};const{useStoreRef:useStoreRef$7}=Recoil_RecoilRoot,{refreshRecoilValue:refreshRecoilValue$2}=Recoil_RecoilValueInterface,{useCallback:useCallback$4}=React;function useRecoilRefresher(_d){const np=useStoreRef$7();return useCallback$4(()=>{const rp=np.current;refreshRecoilValue$2(rp,_d)},[_d,np])}var Recoil_useRecoilRefresher=useRecoilRefresher;const{atomicUpdater:atomicUpdater$2}=Recoil_AtomicUpdates$1,{useStoreRef:useStoreRef$8}=Recoil_RecoilRoot,{useMemo:useMemo$3}=React;function useRecoilTransaction(_d,np){const rp=useStoreRef$8();return useMemo$3(()=>(...ap)=>{atomicUpdater$2(rp.current)(lp=>{_d(lp)(...ap)})},np!=null?[...np,rp]:void 0)}var Recoil_useRecoilTransaction=useRecoilTransaction;class WrappedValue{constructor(np){_defineProperty$1(this,"value",void 0),this.value=np}}var Recoil_Wrapper={WrappedValue},Recoil_Wrapper_1=Recoil_Wrapper.WrappedValue,Recoil_Wrapper$1=Object.freeze({__proto__:null,WrappedValue:Recoil_Wrapper_1});const{isFastRefreshEnabled:isFastRefreshEnabled$2}=Recoil_ReactMode;class ChangedPathError extends Error{}class TreeCache{constructor(np){var rp,ap,sp;_defineProperty$1(this,"_name",void 0),_defineProperty$1(this,"_numLeafs",void 0),_defineProperty$1(this,"_root",void 0),_defineProperty$1(this,"_onHit",void 0),_defineProperty$1(this,"_onSet",void 0),_defineProperty$1(this,"_mapNodeValue",void 0),this._name=np==null?void 0:np.name,this._numLeafs=0,this._root=null,this._onHit=(rp=np==null?void 0:np.onHit)!==null&&rp!==void 0?rp:()=>{},this._onSet=(ap=np==null?void 0:np.onSet)!==null&&ap!==void 0?ap:()=>{},this._mapNodeValue=(sp=np==null?void 0:np.mapNodeValue)!==null&&sp!==void 0?sp:lp=>lp}size(){return this._numLeafs}root(){return this._root}get(np,rp){var ap;return(ap=this.getLeafNode(np,rp))===null||ap===void 0?void 0:ap.value}getLeafNode(np,rp){if(this._root==null)return;let ap=this._root;for(;ap;){if(rp==null||rp.onNodeVisit(ap),ap.type==="leaf")return this._onHit(ap),ap;const sp=this._mapNodeValue(np(ap.nodeKey));ap=ap.branches.get(sp)}}set(np,rp,ap){const sp=()=>{var lp,up,cp,dp;let fp,pp;for(const[Sp,yp]of np){var hp,mp,gp;const bp=this._root;if((bp==null?void 0:bp.type)==="leaf")throw this.invalidCacheError();const Ep=fp;if(fp=Ep?Ep.branches.get(pp):bp,fp=(hp=fp)!==null&&hp!==void 0?hp:{type:"branch",nodeKey:Sp,parent:Ep,branches:new Map,branchKey:pp},fp.type!=="branch"||fp.nodeKey!==Sp)throw this.invalidCacheError();Ep==null||Ep.branches.set(pp,fp),ap==null||(mp=ap.onNodeVisit)===null||mp===void 0||mp.call(ap,fp),pp=this._mapNodeValue(yp),this._root=(gp=this._root)!==null&&gp!==void 0?gp:fp}const vp=fp?(lp=fp)===null||lp===void 0?void 0:lp.branches.get(pp):this._root;if(vp!=null&&(vp.type!=="leaf"||vp.branchKey!==pp))throw this.invalidCacheError();const xp={type:"leaf",value:rp,parent:fp,branchKey:pp};(up=fp)===null||up===void 0||up.branches.set(pp,xp),this._root=(cp=this._root)!==null&&cp!==void 0?cp:xp,this._numLeafs++,this._onSet(xp),ap==null||(dp=ap.onNodeVisit)===null||dp===void 0||dp.call(ap,xp)};try{sp()}catch(lp){if(lp instanceof ChangedPathError)this.clear(),sp();else throw lp}}delete(np){const rp=this.root();if(!rp)return!1;if(np===rp)return this._root=null,this._numLeafs=0,!0;let ap=np.parent,sp=np.branchKey;for(;ap;){var lp;if(ap.branches.delete(sp),ap===rp)return ap.branches.size===0?(this._root=null,this._numLeafs=0):this._numLeafs--,!0;if(ap.branches.size>0)break;sp=(lp=ap)===null||lp===void 0?void 0:lp.branchKey,ap=ap.parent}for(;ap!==rp;ap=ap.parent)if(ap==null)return!1;return this._numLeafs--,!0}clear(){this._numLeafs=0,this._root=null}invalidCacheError(){const np=isFastRefreshEnabled$2()?"Possible Fast Refresh module reload detected.  This may also be caused by an selector returning inconsistent values. Resetting cache.":"Invalid cache values.  This happens when selectors do not return consistent values for the same input dependency values.  That may also be caused when using Fast Refresh to change a selector implementation.  Resetting cache.";throw Recoil_recoverableViolation(np+(this._name!=null?` - ${this._name}`:"")),new ChangedPathError}}var Recoil_TreeCache={TreeCache},Recoil_TreeCache_1=Recoil_TreeCache.TreeCache,Recoil_TreeCache$1=Object.freeze({__proto__:null,TreeCache:Recoil_TreeCache_1});class LRUCache{constructor(np){var rp;_defineProperty$1(this,"_maxSize",void 0),_defineProperty$1(this,"_size",void 0),_defineProperty$1(this,"_head",void 0),_defineProperty$1(this,"_tail",void 0),_defineProperty$1(this,"_map",void 0),_defineProperty$1(this,"_keyMapper",void 0),this._maxSize=np.maxSize,this._size=0,this._head=null,this._tail=null,this._map=new Map,this._keyMapper=(rp=np.mapKey)!==null&&rp!==void 0?rp:ap=>ap}head(){return this._head}tail(){return this._tail}size(){return this._size}maxSize(){return this._maxSize}has(np){return this._map.has(this._keyMapper(np))}get(np){const rp=this._keyMapper(np),ap=this._map.get(rp);if(ap)return this.set(np,ap.value),ap.value}set(np,rp){const ap=this._keyMapper(np);this._map.get(ap)&&this.delete(np);const lp=this.head(),up={key:np,right:lp,left:null,value:rp};lp?lp.left=up:this._tail=up,this._map.set(ap,up),this._head=up,this._size++,this._maybeDeleteLRU()}_maybeDeleteLRU(){this.size()>this.maxSize()&&this.deleteLru()}deleteLru(){const np=this.tail();np&&this.delete(np.key)}delete(np){const rp=this._keyMapper(np);if(!this._size||!this._map.has(rp))return;const ap=Recoil_nullthrows(this._map.get(rp)),sp=ap.right,lp=ap.left;sp&&(sp.left=ap.left),lp&&(lp.right=ap.right),ap===this.head()&&(this._head=sp),ap===this.tail()&&(this._tail=lp),this._map.delete(rp),this._size--}clear(){this._size=0,this._head=null,this._tail=null,this._map=new Map}}var Recoil_LRUCache={LRUCache},Recoil_LRUCache_1=Recoil_LRUCache.LRUCache,Recoil_LRUCache$1=Object.freeze({__proto__:null,LRUCache:Recoil_LRUCache_1});const{LRUCache:LRUCache$1}=Recoil_LRUCache$1,{TreeCache:TreeCache$1}=Recoil_TreeCache$1;function treeCacheLRU({name:_d,maxSize:np,mapNodeValue:rp=ap=>ap}){const ap=new LRUCache$1({maxSize:np}),sp=new TreeCache$1({name:_d,mapNodeValue:rp,onHit:lp=>{ap.set(lp,!0)},onSet:lp=>{const up=ap.tail();ap.set(lp,!0),up&&sp.size()>np&&sp.delete(up.key)}});return sp}var Recoil_treeCacheLRU=treeCacheLRU;function stringify$2(_d,np,rp){if(typeof _d=="string"&&!_d.includes('"')&&!_d.includes("\\"))return`"${_d}"`;switch(typeof _d){case"undefined":return"";case"boolean":return _d?"true":"false";case"number":case"symbol":return String(_d);case"string":return JSON.stringify(_d);case"function":if((np==null?void 0:np.allowFunctions)!==!0)throw Recoil_err("Attempt to serialize function in a Recoil cache key");return`__FUNCTION(${_d.name})__`}if(_d===null)return"null";if(typeof _d!="object"){var ap;return(ap=JSON.stringify(_d))!==null&&ap!==void 0?ap:""}if(Recoil_isPromise(_d))return"__PROMISE__";if(Array.isArray(_d))return`[${_d.map((sp,lp)=>stringify$2(sp,np,lp.toString()))}]`;if(typeof _d.toJSON=="function")return stringify$2(_d.toJSON(rp),np,rp);if(_d instanceof Map){const sp={};for(const[lp,up]of _d)sp[typeof lp=="string"?lp:stringify$2(lp,np)]=up;return stringify$2(sp,np,rp)}return _d instanceof Set?stringify$2(Array.from(_d).sort((sp,lp)=>stringify$2(sp,np).localeCompare(stringify$2(lp,np))),np,rp):Symbol!==void 0&&_d[Symbol.iterator]!=null&&typeof _d[Symbol.iterator]=="function"?stringify$2(Array.from(_d),np,rp):`{${Object.keys(_d).filter(sp=>_d[sp]!==void 0).sort().map(sp=>`${stringify$2(sp,np)}:${stringify$2(_d[sp],np,sp)}`).join(",")}}`}function stableStringify(_d,np={allowFunctions:!1}){return stringify$2(_d,np)}var Recoil_stableStringify=stableStringify;const{TreeCache:TreeCache$2}=Recoil_TreeCache$1,defaultPolicy={equality:"reference",eviction:"keep-all",maxSize:1/0};function treeCacheFromPolicy({equality:_d=defaultPolicy.equality,eviction:np=defaultPolicy.eviction,maxSize:rp=defaultPolicy.maxSize}=defaultPolicy,ap){const sp=getValueMapper(_d);return getTreeCache(np,rp,sp,ap)}function getValueMapper(_d){switch(_d){case"reference":return np=>np;case"value":return np=>Recoil_stableStringify(np)}throw Recoil_err(`Unrecognized equality policy ${_d}`)}function getTreeCache(_d,np,rp,ap){switch(_d){case"keep-all":return new TreeCache$2({name:ap,mapNodeValue:rp});case"lru":return Recoil_treeCacheLRU({name:ap,maxSize:Recoil_nullthrows(np),mapNodeValue:rp});case"most-recent":return Recoil_treeCacheLRU({name:ap,maxSize:1,mapNodeValue:rp})}throw Recoil_err(`Unrecognized eviction policy ${_d}`)}var Recoil_treeCacheFromPolicy=treeCacheFromPolicy;function startPerfBlock(_d){return()=>null}var Recoil_PerformanceTimings={startPerfBlock};const{isLoadable:isLoadable$1,loadableWithError:loadableWithError$1,loadableWithPromise:loadableWithPromise$1,loadableWithValue:loadableWithValue$2}=Recoil_Loadable$1,{WrappedValue:WrappedValue$1}=Recoil_Wrapper$1,{getNodeLoadable:getNodeLoadable$2,peekNodeLoadable:peekNodeLoadable$1,setNodeValue:setNodeValue$3}=Recoil_FunctionalCore,{saveDepsToStore:saveDepsToStore$1}=Recoil_Graph,{DEFAULT_VALUE:DEFAULT_VALUE$6,getConfigDeletionHandler:getConfigDeletionHandler$1,getNode:getNode$6,registerNode:registerNode$1}=Recoil_Node,{isRecoilValue:isRecoilValue$3}=Recoil_RecoilValue$1,{markRecoilValueModified:markRecoilValueModified$1}=Recoil_RecoilValueInterface,{retainedByOptionWithDefault:retainedByOptionWithDefault$1}=Recoil_Retention,{recoilCallback:recoilCallback$1}=Recoil_useRecoilCallback,{startPerfBlock:startPerfBlock$1}=Recoil_PerformanceTimings;class Canceled{}const CANCELED=new Canceled,dependencyStack=[],waitingStores=new Map,getNewExecutionID=(()=>{let _d=0;return()=>_d++})();function selector(_d){let np=null;const{key:rp,get:ap,cachePolicy_UNSTABLE:sp}=_d,lp=_d.set!=null?_d.set:void 0,up=new Set,cp=Recoil_treeCacheFromPolicy(sp??{equality:"reference",eviction:"keep-all"},rp),dp=retainedByOptionWithDefault$1(_d.retainedBy_UNSTABLE),fp=new Map;let pp=0;function hp(){return!Recoil_gkx("recoil_memory_managament_2020")||pp>0}function mp(zp){return zp.getState().knownSelectors.add(rp),pp++,()=>{pp--}}function gp(){return getConfigDeletionHandler$1(rp)!==void 0&&!hp()}function vp(zp,Wp,Up,qp,Bp){Ip(Wp,qp,Bp),xp(zp,Up)}function xp(zp,Wp){Dp(zp,Wp)&&Ap(zp),yp(Wp,!0)}function Sp(zp,Wp){Dp(zp,Wp)&&(Recoil_nullthrows(Op(zp)).stateVersions.clear(),yp(Wp,!1))}function yp(zp,Wp){const Up=waitingStores.get(zp);if(Up!=null){for(const qp of Up)markRecoilValueModified$1(qp,Recoil_nullthrows(np));Wp&&waitingStores.delete(zp)}}function bp(zp,Wp){let Up=waitingStores.get(Wp);Up==null&&waitingStores.set(Wp,Up=new Set),Up.add(zp)}function Ep(zp,Wp,Up,qp,Bp,Yp){return Wp.then(Xp=>{if(!hp())throw Ap(zp),CANCELED;const Qp=loadableWithValue$2(Xp);return vp(zp,Up,Bp,Qp,qp),Xp}).catch(Xp=>{if(!hp())throw Ap(zp),CANCELED;if(Recoil_isPromise(Xp))return wp(zp,Xp,Up,qp,Bp,Yp);const Qp=loadableWithError$1(Xp);throw vp(zp,Up,Bp,Qp,qp),Xp})}function wp(zp,Wp,Up,qp,Bp,Yp){return Wp.then(Xp=>{if(!hp())throw Ap(zp),CANCELED;Yp.loadingDepKey!=null&&Yp.loadingDepPromise===Wp?Up.atomValues.set(Yp.loadingDepKey,loadableWithValue$2(Xp)):zp.getState().knownSelectors.forEach(im=>{Up.atomValues.delete(im)});const Qp=$p(zp,Up);if(Qp&&Qp.state!=="loading"){if((Dp(zp,Bp)||Op(zp)==null)&&xp(zp,Bp),Qp.state==="hasValue")return Qp.contents;throw Qp.contents}if(!Dp(zp,Bp)){const im=Pp(zp,Up);if(im!=null)return im.loadingLoadable.contents}const[am,Jp]=Cp(zp,Up,Bp);if(am.state!=="loading"&&vp(zp,Up,Bp,am,Jp),am.state==="hasError")throw am.contents;return am.contents}).catch(Xp=>{if(Xp instanceof Canceled)throw CANCELED;if(!hp())throw Ap(zp),CANCELED;const Qp=loadableWithError$1(Xp);throw vp(zp,Up,Bp,Qp,qp),Xp})}function _p(zp,Wp,Up,qp){var Bp,Yp,Xp,Qp;if(Dp(zp,qp)||Wp.version===((Bp=zp.getState())===null||Bp===void 0||(Yp=Bp.currentTree)===null||Yp===void 0?void 0:Yp.version)||Wp.version===((Xp=zp.getState())===null||Xp===void 0||(Qp=Xp.nextTree)===null||Qp===void 0?void 0:Qp.version)){var am,Jp,im;saveDepsToStore$1(rp,Up,zp,(am=(Jp=zp.getState())===null||Jp===void 0||(im=Jp.nextTree)===null||im===void 0?void 0:im.version)!==null&&am!==void 0?am:zp.getState().currentTree.version)}for(const Zp of Up)up.add(Zp)}function Cp(zp,Wp,Up){const qp=startPerfBlock$1(rp);let Bp=!0,Yp=!0;const Xp=()=>{qp(),Yp=!1};let Qp,am=!1,Jp;const im={loadingDepKey:null,loadingDepPromise:null},Zp=new Map;function Gp({key:om}){const em=getNodeLoadable$2(zp,Wp,om);switch(Zp.set(om,em),Bp||(_p(zp,Wp,new Set(Zp.keys()),Up),Sp(zp,Up)),em.state){case"hasValue":return em.contents;case"hasError":throw em.contents;case"loading":throw im.loadingDepKey=om,im.loadingDepPromise=em.contents,em.contents}throw Recoil_err("Invalid Loadable state")}const tm=om=>(...em)=>{if(Yp)throw Recoil_err("Callbacks from getCallback() should only be called asynchronously after the selector is evalutated.  It can be used for selectors to return objects with callbacks that can work with Recoil state without a subscription.");return np==null&&Recoil_invariant(!1),recoilCallback$1(zp,om,em,{node:np})};try{Qp=ap({get:Gp,getCallback:tm}),Qp=isRecoilValue$3(Qp)?Gp(Qp):Qp,isLoadable$1(Qp)&&(Qp.state==="hasError"&&(am=!0),Qp=Qp.contents),Recoil_isPromise(Qp)?Qp=Ep(zp,Qp,Wp,Zp,Up,im).finally(Xp):Xp(),Qp=Qp instanceof WrappedValue$1?Qp.value:Qp}catch(om){Qp=om,Recoil_isPromise(Qp)?Qp=wp(zp,Qp,Wp,Zp,Up,im).finally(Xp):(am=!0,Xp())}return am?Jp=loadableWithError$1(Qp):Recoil_isPromise(Qp)?Jp=loadableWithPromise$1(Qp):Jp=loadableWithValue$2(Qp),Bp=!1,Mp(zp,Up,Zp),_p(zp,Wp,new Set(Zp.keys()),Up),[Jp,Zp]}function $p(zp,Wp){let Up=Wp.atomValues.get(rp);if(Up!=null)return Up;const qp=new Set;try{Up=cp.get(Yp=>(typeof Yp!="string"&&Recoil_invariant(!1),getNodeLoadable$2(zp,Wp,Yp).contents),{onNodeVisit:Yp=>{Yp.type==="branch"&&Yp.nodeKey!==rp&&qp.add(Yp.nodeKey)}})}catch(Yp){throw Recoil_err(`Problem with cache lookup for selector "${rp}": ${Yp.message}`)}if(Up){var Bp;Wp.atomValues.set(rp,Up),_p(zp,Wp,qp,(Bp=Op(zp))===null||Bp===void 0?void 0:Bp.executionID)}return Up}function Rp(zp,Wp){const Up=$p(zp,Wp);if(Up!=null)return Ap(zp),Up;const qp=Pp(zp,Wp);if(qp!=null){var Bp;return((Bp=qp.loadingLoadable)===null||Bp===void 0?void 0:Bp.state)==="loading"&&bp(zp,qp.executionID),qp.loadingLoadable}const Yp=getNewExecutionID(),[Xp,Qp]=Cp(zp,Wp,Yp);return Xp.state==="loading"?(jp(zp,Yp,Xp,Qp,Wp),bp(zp,Yp)):(Ap(zp),Ip(Wp,Xp,Qp)),Xp}function Pp(zp,Wp){const Up=Recoil_concatIterables([fp.has(zp)?[Recoil_nullthrows(fp.get(zp))]:[],Recoil_mapIterable(Recoil_filterIterable(fp,([Bp])=>Bp!==zp),([,Bp])=>Bp)]);function qp(Bp){for(const[Yp,Xp]of Bp)if(!getNodeLoadable$2(zp,Wp,Yp).is(Xp))return!0;return!1}for(const Bp of Up){if(Bp.stateVersions.get(Wp.version)||!qp(Bp.depValuesDiscoveredSoFarDuringAsyncWork))return Bp.stateVersions.set(Wp.version,!0),Bp;Bp.stateVersions.set(Wp.version,!1)}}function Op(zp){return fp.get(zp)}function jp(zp,Wp,Up,qp,Bp){fp.set(zp,{depValuesDiscoveredSoFarDuringAsyncWork:qp,executionID:Wp,loadingLoadable:Up,stateVersions:new Map([[Bp.version,!0]])})}function Mp(zp,Wp,Up){if(Dp(zp,Wp)){const qp=Op(zp);qp!=null&&(qp.depValuesDiscoveredSoFarDuringAsyncWork=Up)}}function Ap(zp){fp.delete(zp)}function Dp(zp,Wp){var Up;return Wp===((Up=Op(zp))===null||Up===void 0?void 0:Up.executionID)}function Fp(zp){return Array.from(zp.entries()).map(([Wp,Up])=>[Wp,Up.contents])}function Ip(zp,Wp,Up){zp.atomValues.set(rp,Wp);try{cp.set(Fp(Up),Wp)}catch(qp){throw Recoil_err(`Problem with setting cache for selector "${rp}": ${qp.message}`)}}function kp(zp){if(dependencyStack.includes(rp)){const Wp=`Recoil selector has circular dependencies: ${dependencyStack.slice(dependencyStack.indexOf(rp)).join(" → ")}`;return loadableWithError$1(Recoil_err(Wp))}dependencyStack.push(rp);try{return zp()}finally{dependencyStack.pop()}}function Tp(zp,Wp){const Up=Wp.atomValues.get(rp);return Up??cp.get(qp=>{var Bp;return typeof qp!="string"&&Recoil_invariant(!1),(Bp=peekNodeLoadable$1(zp,Wp,qp))===null||Bp===void 0?void 0:Bp.contents})}function Np(zp,Wp){return kp(()=>Rp(zp,Wp))}function Lp(zp){zp.atomValues.delete(rp)}function Vp(zp,Wp){np==null&&Recoil_invariant(!1);for(const qp of up){var Up;const Bp=getNode$6(qp);(Up=Bp.clearCache)===null||Up===void 0||Up.call(Bp,zp,Wp)}up.clear(),Lp(Wp),cp.clear(),markRecoilValueModified$1(zp,np)}return lp!=null?np=registerNode$1({key:rp,nodeType:"selector",peek:Tp,get:Np,set:(Wp,Up,qp)=>{let Bp=!1;const Yp=new Map;function Xp({key:im}){if(Bp)throw Recoil_err("Recoil: Async selector sets are not currently supported.");const Zp=getNodeLoadable$2(Wp,Up,im);if(Zp.state==="hasValue")return Zp.contents;if(Zp.state==="loading"){const Gp=`Getting value of asynchronous atom or selector "${im}" in a pending state while setting selector "${rp}" is not yet supported.`;throw Recoil_err(Gp)}else throw Zp.contents}function Qp(im,Zp){if(Bp)throw Recoil_err("Recoil: Async selector sets are not currently supported.");const Gp=typeof Zp=="function"?Zp(Xp(im)):Zp;setNodeValue$3(Wp,Up,im.key,Gp).forEach((om,em)=>Yp.set(em,om))}function am(im){Qp(im,DEFAULT_VALUE$6)}const Jp=lp({set:Qp,get:Xp,reset:am},qp);if(Jp!==void 0)throw Recoil_isPromise(Jp)?Recoil_err("Recoil: Async selector sets are not currently supported."):Recoil_err("Recoil: selector set should be a void function.");return Bp=!0,Yp},init:mp,invalidate:Lp,clearCache:Vp,shouldDeleteConfigOnRelease:gp,dangerouslyAllowMutability:_d.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:dp}):np=registerNode$1({key:rp,nodeType:"selector",peek:Tp,get:Np,init:mp,invalidate:Lp,clearCache:Vp,shouldDeleteConfigOnRelease:gp,dangerouslyAllowMutability:_d.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:dp})}selector.value=_d=>new WrappedValue$1(_d);var Recoil_selector=selector;const{isLoadable:isLoadable$2,loadableWithError:loadableWithError$2,loadableWithPromise:loadableWithPromise$2,loadableWithValue:loadableWithValue$3}=Recoil_Loadable$1,{WrappedValue:WrappedValue$2}=Recoil_Wrapper$1,{peekNodeInfo:peekNodeInfo$3}=Recoil_FunctionalCore,{DEFAULT_VALUE:DEFAULT_VALUE$7,DefaultValue:DefaultValue$2,getConfigDeletionHandler:getConfigDeletionHandler$2,registerNode:registerNode$2,setConfigDeletionHandler:setConfigDeletionHandler$1}=Recoil_Node,{isRecoilValue:isRecoilValue$4}=Recoil_RecoilValue$1,{getRecoilValueAsLoadable:getRecoilValueAsLoadable$4,markRecoilValueModified:markRecoilValueModified$2,setRecoilValue:setRecoilValue$4,setRecoilValueLoadable:setRecoilValueLoadable$2}=Recoil_RecoilValueInterface,{retainedByOptionWithDefault:retainedByOptionWithDefault$2}=Recoil_Retention,unwrap=_d=>_d instanceof WrappedValue$2?_d.value:_d;function baseAtom(_d){const{key:np,persistence_UNSTABLE:rp}=_d,ap=retainedByOptionWithDefault$2(_d.retainedBy_UNSTABLE);let sp=0;function lp(bp){return loadableWithPromise$2(bp.then(Ep=>(up=loadableWithValue$3(Ep),Ep)).catch(Ep=>{throw up=loadableWithError$2(Ep),Ep}))}let up=Recoil_isPromise(_d.default)?lp(_d.default):isLoadable$2(_d.default)?_d.default.state==="loading"?lp(_d.default.contents):_d.default:loadableWithValue$3(unwrap(_d.default));up.contents;let cp;const dp=new Map;function fp(bp){return bp}function pp(bp,Ep){const wp=Ep.then(_p=>{var Cp,$p;return(($p=((Cp=bp.getState().nextTree)!==null&&Cp!==void 0?Cp:bp.getState().currentTree).atomValues.get(np))===null||$p===void 0?void 0:$p.contents)===wp&&setRecoilValue$4(bp,yp,_p),_p}).catch(_p=>{var Cp,$p;throw(($p=((Cp=bp.getState().nextTree)!==null&&Cp!==void 0?Cp:bp.getState().currentTree).atomValues.get(np))===null||$p===void 0?void 0:$p.contents)===wp&&setRecoilValueLoadable$2(bp,yp,loadableWithError$2(_p)),_p});return wp}function hp(bp,Ep,wp){var _p;sp++;const Cp=()=>{var Op;sp--,(Op=dp.get(bp))===null||Op===void 0||Op.forEach(jp=>jp()),dp.delete(bp)};if(bp.getState().knownAtoms.add(np),up.state==="loading"){const Op=()=>{var jp;((jp=bp.getState().nextTree)!==null&&jp!==void 0?jp:bp.getState().currentTree).atomValues.has(np)||markRecoilValueModified$2(bp,yp)};up.contents.finally(Op)}const $p=(_p=_d.effects)!==null&&_p!==void 0?_p:_d.effects_UNSTABLE;if($p!=null){let Op=function(Lp){if(Dp&&Lp.key===np){const Vp=Ap;return Vp instanceof DefaultValue$2?mp(bp,Ep):Recoil_isPromise(Vp)?loadableWithPromise$2(Vp.then(zp=>zp instanceof DefaultValue$2?up.toPromise():zp)):loadableWithValue$3(Vp)}return getRecoilValueAsLoadable$4(bp,Lp)},jp=function(Lp){return Op(Lp).toPromise()},Mp=function(Lp){var Vp;const zp=peekNodeInfo$3(bp,(Vp=bp.getState().nextTree)!==null&&Vp!==void 0?Vp:bp.getState().currentTree,Lp.key);return Dp&&Lp.key===np&&!(Ap instanceof DefaultValue$2)?{...zp,isSet:!0,loadable:Op(Lp)}:zp},Ap=DEFAULT_VALUE$7,Dp=!0,Fp=!1,Ip=null;const kp=Lp=>Vp=>{if(Dp){const zp=Op(yp),Wp=zp.state==="hasValue"?zp.contents:DEFAULT_VALUE$7;Ap=typeof Vp=="function"?Vp(Wp):Vp,Recoil_isPromise(Ap)&&(Ap=Ap.then(Up=>(Ip={effect:Lp,value:Up},Up)))}else{if(Recoil_isPromise(Vp))throw Recoil_err("Setting atoms to async values is not implemented.");typeof Vp!="function"&&(Ip={effect:Lp,value:unwrap(Vp)}),setRecoilValue$4(bp,yp,typeof Vp=="function"?zp=>{const Wp=unwrap(Vp(zp));return Ip={effect:Lp,value:Wp},Wp}:unwrap(Vp))}},Tp=Lp=>()=>kp(Lp)(DEFAULT_VALUE$7),Np=Lp=>Vp=>{var zp;const{release:Wp}=bp.subscribeToTransactions(Up=>{var qp;let{currentTree:Bp,previousTree:Yp}=Up.getState();Yp||(Yp=Bp);const Xp=(qp=Bp.atomValues.get(np))!==null&&qp!==void 0?qp:up;if(Xp.state==="hasValue"){var Qp,am,Jp,im;const Zp=Xp.contents,Gp=(Qp=Yp.atomValues.get(np))!==null&&Qp!==void 0?Qp:up,tm=Gp.state==="hasValue"?Gp.contents:DEFAULT_VALUE$7;((am=Ip)===null||am===void 0?void 0:am.effect)!==Lp||((Jp=Ip)===null||Jp===void 0?void 0:Jp.value)!==Zp?Vp(Zp,tm,!Bp.atomValues.has(np)):((im=Ip)===null||im===void 0?void 0:im.effect)===Lp&&(Ip=null)}},np);dp.set(bp,[...(zp=dp.get(bp))!==null&&zp!==void 0?zp:[],Wp])};for(const Lp of $p)try{const Vp=Lp({node:yp,storeID:bp.storeID,parentStoreID_UNSTABLE:bp.parentStoreID,trigger:wp,setSelf:kp(Lp),resetSelf:Tp(Lp),onSet:Np(Lp),getPromise:jp,getLoadable:Op,getInfo_UNSTABLE:Mp});if(Vp!=null){var Rp;dp.set(bp,[...(Rp=dp.get(bp))!==null&&Rp!==void 0?Rp:[],Vp])}}catch(Vp){Ap=Vp,Fp=!0}if(Dp=!1,!(Ap instanceof DefaultValue$2)){var Pp;const Lp=Fp?loadableWithError$2(Ap):Recoil_isPromise(Ap)?loadableWithPromise$2(pp(bp,Ap)):loadableWithValue$3(unwrap(Ap));Lp.contents,Ep.atomValues.set(np,Lp),(Pp=bp.getState().nextTree)===null||Pp===void 0||Pp.atomValues.set(np,Lp)}}return Cp}function mp(bp,Ep){var wp,_p;return(wp=(_p=Ep.atomValues.get(np))!==null&&_p!==void 0?_p:cp)!==null&&wp!==void 0?wp:up}function gp(bp,Ep){if(Ep.atomValues.has(np))return Recoil_nullthrows(Ep.atomValues.get(np));if(Ep.nonvalidatedAtoms.has(np)){if(cp!=null)return cp;if(rp==null)return up;const wp=Ep.nonvalidatedAtoms.get(np),_p=rp.validator(wp,DEFAULT_VALUE$7);return cp=_p instanceof DefaultValue$2?up:loadableWithValue$3(_p),cp}else return up}function vp(){cp=void 0}function xp(bp,Ep,wp){if(Ep.atomValues.has(np)){const _p=Recoil_nullthrows(Ep.atomValues.get(np));if(_p.state==="hasValue"&&wp===_p.contents)return new Map}else if(!Ep.nonvalidatedAtoms.has(np)&&wp instanceof DefaultValue$2)return new Map;return cp=void 0,new Map().set(np,loadableWithValue$3(wp))}function Sp(){return getConfigDeletionHandler$2(np)!==void 0&&sp<=0}const yp=registerNode$2({key:np,nodeType:"atom",peek:mp,get:gp,set:xp,init:hp,invalidate:vp,shouldDeleteConfigOnRelease:Sp,dangerouslyAllowMutability:_d.dangerouslyAllowMutability,persistence_UNSTABLE:_d.persistence_UNSTABLE?{type:_d.persistence_UNSTABLE.type,backButton:_d.persistence_UNSTABLE.backButton}:void 0,shouldRestoreFromSnapshots:!0,retainedBy:ap});return yp}function atom(_d){const{...np}=_d,rp="default"in _d?_d.default:new Promise(()=>{});return isRecoilValue$4(rp)?atomWithFallback({...np,default:rp}):baseAtom({...np,default:rp})}function atomWithFallback(_d){const np=atom({..._d,default:DEFAULT_VALUE$7,persistence_UNSTABLE:_d.persistence_UNSTABLE===void 0?void 0:{..._d.persistence_UNSTABLE,validator:ap=>ap instanceof DefaultValue$2?ap:Recoil_nullthrows(_d.persistence_UNSTABLE).validator(ap,DEFAULT_VALUE$7)},effects:_d.effects,effects_UNSTABLE:_d.effects_UNSTABLE}),rp=Recoil_selector({key:`${_d.key}__withFallback`,get:({get:ap})=>{const sp=ap(np);return sp instanceof DefaultValue$2?_d.default:sp},set:({set:ap},sp)=>ap(np,sp),cachePolicy_UNSTABLE:{eviction:"most-recent"},dangerouslyAllowMutability:_d.dangerouslyAllowMutability});return setConfigDeletionHandler$1(rp.key,getConfigDeletionHandler$2(_d.key)),rp}atom.value=_d=>new WrappedValue$2(_d);var Recoil_atom=atom;class MapCache{constructor(np){var rp;_defineProperty$1(this,"_map",void 0),_defineProperty$1(this,"_keyMapper",void 0),this._map=new Map,this._keyMapper=(rp=np==null?void 0:np.mapKey)!==null&&rp!==void 0?rp:ap=>ap}size(){return this._map.size}has(np){return this._map.has(this._keyMapper(np))}get(np){return this._map.get(this._keyMapper(np))}set(np,rp){this._map.set(this._keyMapper(np),rp)}delete(np){this._map.delete(this._keyMapper(np))}clear(){this._map.clear()}}var Recoil_MapCache={MapCache},Recoil_MapCache_1=Recoil_MapCache.MapCache,Recoil_MapCache$1=Object.freeze({__proto__:null,MapCache:Recoil_MapCache_1});const{LRUCache:LRUCache$2}=Recoil_LRUCache$1,{MapCache:MapCache$1}=Recoil_MapCache$1,defaultPolicy$1={equality:"reference",eviction:"none",maxSize:1/0};function cacheFromPolicy({equality:_d=defaultPolicy$1.equality,eviction:np=defaultPolicy$1.eviction,maxSize:rp=defaultPolicy$1.maxSize}=defaultPolicy$1){const ap=getValueMapper$1(_d);return getCache(np,rp,ap)}function getValueMapper$1(_d){switch(_d){case"reference":return np=>np;case"value":return np=>Recoil_stableStringify(np)}throw Recoil_err(`Unrecognized equality policy ${_d}`)}function getCache(_d,np,rp){switch(_d){case"keep-all":return new MapCache$1({mapKey:rp});case"lru":return new LRUCache$2({mapKey:rp,maxSize:Recoil_nullthrows(np)});case"most-recent":return new LRUCache$2({mapKey:rp,maxSize:1})}throw Recoil_err(`Unrecognized eviction policy ${_d}`)}var Recoil_cacheFromPolicy=cacheFromPolicy;const{setConfigDeletionHandler:setConfigDeletionHandler$2}=Recoil_Node;function atomFamily(_d){var np,rp;const ap=Recoil_cacheFromPolicy({equality:(np=(rp=_d.cachePolicyForParams_UNSTABLE)===null||rp===void 0?void 0:rp.equality)!==null&&np!==void 0?np:"value",eviction:"keep-all"});return sp=>{var lp,up;const cp=ap.get(sp);if(cp!=null)return cp;const{cachePolicyForParams_UNSTABLE:dp,...fp}=_d,pp="default"in _d?_d.default:new Promise(()=>{}),hp=Recoil_atom({...fp,key:`${_d.key}__${(lp=Recoil_stableStringify(sp))!==null&&lp!==void 0?lp:"void"}`,default:typeof pp=="function"?pp(sp):pp,retainedBy_UNSTABLE:typeof _d.retainedBy_UNSTABLE=="function"?_d.retainedBy_UNSTABLE(sp):_d.retainedBy_UNSTABLE,effects:typeof _d.effects=="function"?_d.effects(sp):typeof _d.effects_UNSTABLE=="function"?_d.effects_UNSTABLE(sp):(up=_d.effects)!==null&&up!==void 0?up:_d.effects_UNSTABLE});return ap.set(sp,hp),setConfigDeletionHandler$2(hp.key,()=>{ap.delete(sp)}),hp}}var Recoil_atomFamily=atomFamily;const{setConfigDeletionHandler:setConfigDeletionHandler$3}=Recoil_Node;let nextIndex=0;function selectorFamily(_d){var np,rp;const ap=Recoil_cacheFromPolicy({equality:(np=(rp=_d.cachePolicyForParams_UNSTABLE)===null||rp===void 0?void 0:rp.equality)!==null&&np!==void 0?np:"value",eviction:"keep-all"});return sp=>{var lp;let up;try{up=ap.get(sp)}catch(mp){throw Recoil_err(`Problem with cache lookup for selector ${_d.key}: ${mp.message}`)}if(up!=null)return up;const cp=`${_d.key}__selectorFamily/${(lp=Recoil_stableStringify(sp,{allowFunctions:!0}))!==null&&lp!==void 0?lp:"void"}/${nextIndex++}`,dp=mp=>_d.get(sp)(mp),fp=_d.cachePolicy_UNSTABLE,pp=typeof _d.retainedBy_UNSTABLE=="function"?_d.retainedBy_UNSTABLE(sp):_d.retainedBy_UNSTABLE;let hp;if(_d.set!=null){const mp=_d.set;hp=Recoil_selector({key:cp,get:dp,set:(vp,xp)=>mp(sp)(vp,xp),cachePolicy_UNSTABLE:fp,dangerouslyAllowMutability:_d.dangerouslyAllowMutability,retainedBy_UNSTABLE:pp})}else hp=Recoil_selector({key:cp,get:dp,cachePolicy_UNSTABLE:fp,dangerouslyAllowMutability:_d.dangerouslyAllowMutability,retainedBy_UNSTABLE:pp});return ap.set(sp,hp),setConfigDeletionHandler$3(hp.key,()=>{ap.delete(sp)}),hp}}var Recoil_selectorFamily=selectorFamily;const constantSelector=Recoil_selectorFamily({key:"__constant",get:_d=>()=>_d,cachePolicyForParams_UNSTABLE:{equality:"reference"}});function constSelector(_d){return constantSelector(_d)}var Recoil_constSelector=constSelector;const throwingSelector=Recoil_selectorFamily({key:"__error",get:_d=>()=>{throw Recoil_err(_d)},cachePolicyForParams_UNSTABLE:{equality:"reference"}});function errorSelector(_d){return throwingSelector(_d)}var Recoil_errorSelector=errorSelector;function readOnlySelector(_d){return _d}var Recoil_readOnlySelector=readOnlySelector;const{loadableWithError:loadableWithError$3,loadableWithPromise:loadableWithPromise$3,loadableWithValue:loadableWithValue$4}=Recoil_Loadable$1;function concurrentRequests(_d,np){const rp=Array(np.length).fill(void 0),ap=Array(np.length).fill(void 0);for(const[sp,lp]of np.entries())try{rp[sp]=_d(lp)}catch(up){ap[sp]=up}return[rp,ap]}function isError(_d){return _d!=null&&!Recoil_isPromise(_d)}function unwrapDependencies(_d){return Array.isArray(_d)?_d:Object.getOwnPropertyNames(_d).map(np=>_d[np])}function wrapResults(_d,np){return Array.isArray(_d)?np:Object.getOwnPropertyNames(_d).reduce((rp,ap,sp)=>({...rp,[ap]:np[sp]}),{})}function wrapLoadables(_d,np,rp){const ap=rp.map((sp,lp)=>sp==null?loadableWithValue$4(np[lp]):Recoil_isPromise(sp)?loadableWithPromise$3(sp):loadableWithError$3(sp));return wrapResults(_d,ap)}function combineAsyncResultsWithSyncResults(_d,np){return np.map((rp,ap)=>rp===void 0?_d[ap]:rp)}const waitForNone=Recoil_selectorFamily({key:"__waitForNone",get:_d=>({get:np})=>{const rp=unwrapDependencies(_d),[ap,sp]=concurrentRequests(np,rp);return wrapLoadables(_d,ap,sp)},dangerouslyAllowMutability:!0}),waitForAny=Recoil_selectorFamily({key:"__waitForAny",get:_d=>({get:np})=>{const rp=unwrapDependencies(_d),[ap,sp]=concurrentRequests(np,rp);return sp.some(lp=>!Recoil_isPromise(lp))?wrapLoadables(_d,ap,sp):new Promise(lp=>{for(const[up,cp]of sp.entries())Recoil_isPromise(cp)&&cp.then(dp=>{ap[up]=dp,sp[up]=void 0,lp(wrapLoadables(_d,ap,sp))}).catch(dp=>{sp[up]=dp,lp(wrapLoadables(_d,ap,sp))})})},dangerouslyAllowMutability:!0}),waitForAll=Recoil_selectorFamily({key:"__waitForAll",get:_d=>({get:np})=>{const rp=unwrapDependencies(_d),[ap,sp]=concurrentRequests(np,rp);if(sp.every(up=>up==null))return wrapResults(_d,ap);const lp=sp.find(isError);if(lp!=null)throw lp;return Promise.all(sp).then(up=>wrapResults(_d,combineAsyncResultsWithSyncResults(ap,up)))},dangerouslyAllowMutability:!0}),waitForAllSettled=Recoil_selectorFamily({key:"__waitForAllSettled",get:_d=>({get:np})=>{const rp=unwrapDependencies(_d),[ap,sp]=concurrentRequests(np,rp);return sp.every(lp=>!Recoil_isPromise(lp))?wrapLoadables(_d,ap,sp):Promise.all(sp.map((lp,up)=>Recoil_isPromise(lp)?lp.then(cp=>{ap[up]=cp,sp[up]=void 0}).catch(cp=>{ap[up]=void 0,sp[up]=cp}):null)).then(()=>wrapLoadables(_d,ap,sp))},dangerouslyAllowMutability:!0}),noWait=Recoil_selectorFamily({key:"__noWait",get:_d=>({get:np})=>{try{return Recoil_selector.value(loadableWithValue$4(np(_d)))}catch(rp){return Recoil_selector.value(Recoil_isPromise(rp)?loadableWithPromise$3(rp):loadableWithError$3(rp))}},dangerouslyAllowMutability:!0});var Recoil_WaitFor={waitForNone,waitForAny,waitForAll,waitForAllSettled,noWait};const{RecoilLoadable}=Recoil_Loadable$1,{DefaultValue:DefaultValue$3}=Recoil_Node,{RecoilRoot:RecoilRoot$2,useRecoilStoreID:useRecoilStoreID$1}=Recoil_RecoilRoot,{isRecoilValue:isRecoilValue$5}=Recoil_RecoilValue$1,{retentionZone:retentionZone$1}=Recoil_RetentionZone,{freshSnapshot:freshSnapshot$2}=Recoil_Snapshot$1,{useRecoilState:useRecoilState$1,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:useRecoilState_TRANSITION_SUPPORT_UNSTABLE$1,useRecoilStateLoadable:useRecoilStateLoadable$1,useRecoilValue:useRecoilValue$1,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:useRecoilValue_TRANSITION_SUPPORT_UNSTABLE$1,useRecoilValueLoadable:useRecoilValueLoadable$1,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE$1,useResetRecoilState:useResetRecoilState$1,useSetRecoilState:useSetRecoilState$1}=Recoil_Hooks,{useGotoRecoilSnapshot:useGotoRecoilSnapshot$1,useRecoilSnapshot:useRecoilSnapshot$1,useRecoilTransactionObserver:useRecoilTransactionObserver$1}=Recoil_SnapshotHooks,{useRecoilCallback:useRecoilCallback$1}=Recoil_useRecoilCallback,{noWait:noWait$1,waitForAll:waitForAll$1,waitForAllSettled:waitForAllSettled$1,waitForAny:waitForAny$1,waitForNone:waitForNone$1}=Recoil_WaitFor;var Recoil_index={DefaultValue:DefaultValue$3,isRecoilValue:isRecoilValue$5,RecoilLoadable,RecoilEnv:Recoil_RecoilEnv,RecoilRoot:RecoilRoot$2,useRecoilStoreID:useRecoilStoreID$1,useRecoilBridgeAcrossReactRoots_UNSTABLE:Recoil_useRecoilBridgeAcrossReactRoots,atom:Recoil_atom,selector:Recoil_selector,atomFamily:Recoil_atomFamily,selectorFamily:Recoil_selectorFamily,constSelector:Recoil_constSelector,errorSelector:Recoil_errorSelector,readOnlySelector:Recoil_readOnlySelector,noWait:noWait$1,waitForNone:waitForNone$1,waitForAny:waitForAny$1,waitForAll:waitForAll$1,waitForAllSettled:waitForAllSettled$1,useRecoilValue:useRecoilValue$1,useRecoilValueLoadable:useRecoilValueLoadable$1,useRecoilState:useRecoilState$1,useRecoilStateLoadable:useRecoilStateLoadable$1,useSetRecoilState:useSetRecoilState$1,useResetRecoilState:useResetRecoilState$1,useGetRecoilValueInfo_UNSTABLE:Recoil_useGetRecoilValueInfo,useRecoilRefresher_UNSTABLE:Recoil_useRecoilRefresher,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE$1,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:useRecoilValue_TRANSITION_SUPPORT_UNSTABLE$1,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:useRecoilState_TRANSITION_SUPPORT_UNSTABLE$1,useRecoilCallback:useRecoilCallback$1,useRecoilTransaction_UNSTABLE:Recoil_useRecoilTransaction,useGotoRecoilSnapshot:useGotoRecoilSnapshot$1,useRecoilSnapshot:useRecoilSnapshot$1,useRecoilTransactionObserver_UNSTABLE:useRecoilTransactionObserver$1,snapshot_UNSTABLE:freshSnapshot$2,useRetain:Recoil_useRetain,retentionZone:retentionZone$1},Recoil_index_5=Recoil_index.RecoilRoot,Recoil_index_8=Recoil_index.atom,Recoil_index_20=Recoil_index.useRecoilValue,Recoil_index_22=Recoil_index.useRecoilState,Recoil_index_24=Recoil_index.useSetRecoilState;const fishSpotListAtom=Recoil_index_8({key:"fishSpotListAtom",default:[]}),prevPathAtom=Recoil_index_8({key:"prevPathAtom",default:""}),activeMarkerAtom=Recoil_index_8({key:"activeMarkerAtom",default:null}),searchTermAtom=Recoil_index_8({key:"searchTermAtom",default:""}),centerChangeAtom=Recoil_index_8({key:"centerChangeAtom",default:!1}),searchModeAtom=Recoil_index_8({key:"searchModeAtom",default:"location"}),filterModeAtom=Recoil_index_8({key:"filterModeAtom",default:"dist"}),mapLevelAtom=Recoil_index_8({key:"mapLevelAtom",default:9}),mapCenterAtom=Recoil_index_8({key:"mapCenterAtom",default:{lat:0,lng:0}}),myCenterAtom=Recoil_index_8({key:"myCenterAtom",default:{center:{lat:0,lng:0},errMsg:null,isLoading:!1}});var CloseOutlined={},_interopRequireDefault$z=interopRequireDefaultExports;Object.defineProperty(CloseOutlined,"__esModule",{value:!0});var default_1$q=CloseOutlined.default=void 0,_createSvgIcon$q=_interopRequireDefault$z(requireCreateSvgIcon()),_jsxRuntime$q=jsxRuntimeExports;default_1$q=CloseOutlined.default=(0,_createSvgIcon$q.default)((0,_jsxRuntime$q.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"CloseOutlined");var FilterAltOutlined={},_interopRequireDefault$y=interopRequireDefaultExports;Object.defineProperty(FilterAltOutlined,"__esModule",{value:!0});var default_1$p=FilterAltOutlined.default=void 0,_createSvgIcon$p=_interopRequireDefault$y(requireCreateSvgIcon()),_jsxRuntime$p=jsxRuntimeExports;default_1$p=FilterAltOutlined.default=(0,_createSvgIcon$p.default)((0,_jsxRuntime$p.jsx)("path",{d:"M7 6h10l-5.01 6.3zm-2.75-.39C6.27 8.2 10 13 10 13v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-6s3.72-4.8 5.74-7.39c.51-.66.04-1.61-.79-1.61H5.04c-.83 0-1.3.95-.79 1.61"}),"FilterAltOutlined");const FishMapHeader=({hashTags:_d,mapRef:np,getDistance:rp})=>{const[ap,sp]=reactExports.useState([]),[lp,up]=reactExports.useState(!1),[cp,dp]=Recoil_index_22(searchModeAtom),[fp,pp]=Recoil_index_22(searchTermAtom),hp=Recoil_index_24(mapLevelAtom),mp=Recoil_index_24(centerChangeAtom),gp=Recoil_index_24(fishSpotListAtom),vp=Recoil_index_24(activeMarkerAtom),xp=Recoil_index_20(myCenterAtom),Sp=Cp=>{const $p=np.current;$p&&($p.setLevel(13),$p.setCenter(new kakao.maps.LatLng(36.172823447489336,127.8675122717897)),hp(13),mp(!1),vp(null))},yp=async Cp=>{console.log(Cp);try{const Rp=(await axios.get("https://i10c203.p.ssafy.io/api/spots",{params:Cp})).data.spots.map(Pp=>{const Op=rp(xp.center.lat,xp.center.lng,Pp==null?void 0:Pp.latitude,Pp==null?void 0:Pp.longitude);return{...Pp,dist:Op}});gp(Rp),Sp()}catch($p){console.log($p)}},bp=Cp=>{Cp.preventDefault();let $p={};cp==="location"||cp==="hash"?$p.keyword=Cp.type==="submit"?cp==="location"?fp:`#${fp}`:`#${Cp.target.value}`:$p.sido=Cp.target.value,yp($p)},Ep=Cp=>{dp(Cp.target.value),up(!1),pp("")},wp=async()=>{const $p=(await axios.get("https://grpc-proxy-server-mkvo6j4wsq-du.a.run.app/v1/regcodes?regcode_pattern=*00000000")).data.regcodes.filter(Rp=>Rp.name!=="제주특별자치도");sp($p)},_p=reactExports.useMemo(()=>_d.map((Cp,$p)=>jsxRuntimeExports.jsxs("div",{className:"input-container",children:[jsxRuntimeExports.jsx("input",{id:`${Cp}`,className:"radio-button",type:"radio",name:"radio",checked:fp===Cp.substring(1),value:Cp.substring(1),onChange:Rp=>{bp(Rp),pp(Rp.target.value)}}),jsxRuntimeExports.jsx("div",{className:"radio-tile",children:jsxRuntimeExports.jsx("label",{htmlFor:`${Cp}`,className:"radio-tile-label",children:Cp})})]},$p)),[_d,Sp,fp]);return reactExports.useEffect(()=>{wp()},[]),jsxRuntimeExports.jsxs("div",{className:`FishMapHeader ${cp==="hash"&&"expand"}`,children:[jsxRuntimeExports.jsxs("div",{className:`wrapper ${cp==="hash"&&"expand"}`,children:[jsxRuntimeExports.jsxs("div",{className:"wrapper1",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",id:"toogle",className:"hidden-trigger",checked:lp,onChange:()=>up(!lp)}),jsxRuntimeExports.jsx("label",{htmlFor:"toogle",className:"circle",children:jsxRuntimeExports.jsx(default_1$p,{})}),jsxRuntimeExports.jsxs("div",{className:"subs",children:[jsxRuntimeExports.jsxs("button",{className:"sub-circle",children:[jsxRuntimeExports.jsx("input",{value:"location",name:"sub-circle",type:"radio",id:"sub1",className:"hidden-sub-trigger",onClick:Ep}),jsxRuntimeExports.jsx("label",{htmlFor:"sub1",children:"장소"})]}),jsxRuntimeExports.jsxs("button",{className:"sub-circle",children:[jsxRuntimeExports.jsx("input",{value:"region",name:"sub-circle",type:"radio",id:"sub2",className:"hidden-sub-trigger",onClick:Ep}),jsxRuntimeExports.jsx("label",{htmlFor:"sub2",children:"지역"})]}),jsxRuntimeExports.jsxs("button",{className:"sub-circle",children:[jsxRuntimeExports.jsx("input",{value:"hash",name:"sub-circle",type:"radio",id:"sub3",className:"hidden-sub-trigger",onClick:Ep}),jsxRuntimeExports.jsx("label",{htmlFor:"sub3",children:"해쉬태그"})]})]})]}),cp==="region"?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("select",{value:fp,onChange:Cp=>{bp(Cp),pp(Cp.target.value)},children:[jsxRuntimeExports.jsx("option",{value:"",disabled:!0,children:"지역선택"}),ap.map(Cp=>jsxRuntimeExports.jsx("option",{value:Cp.name,children:Cp.name},Cp.code))]})}):jsxRuntimeExports.jsx("form",{onSubmit:bp,children:jsxRuntimeExports.jsx("input",{type:"text",placeholder:cp==="location"?"장소 검색":"해시태그 검색",value:fp,onChange:Cp=>pp(Cp.target.value)})}),jsxRuntimeExports.jsx("div",{className:"search",onClick:()=>pp(""),children:fp&&jsxRuntimeExports.jsx(default_1$q,{})})]}),cp&&jsxRuntimeExports.jsx("div",{className:"hashTags",children:_p})]})},useIsomorphicLayoutEffect=typeof window<"u"&&typeof document<"u"?reactExports.useLayoutEffect:reactExports.useEffect,useKakaoEvent=(_d,np,rp)=>{useIsomorphicLayoutEffect(()=>{if(!_d||!rp)return;const ap=function(){for(var sp=arguments.length,lp=new Array(sp),up=0;up<sp;up++)lp[up]=arguments[up];return lp===void 0?rp(_d):rp(_d,...lp)};return kakao.maps.event.addListener(_d,np,ap),()=>{kakao.maps.event.removeListener(_d,np,ap)}},[_d,np,rp])},SIGNATURE="__react-kakao-maps-sdk__";let LoaderStatus=function(_d){return _d[_d.INITIALIZED=0]="INITIALIZED",_d[_d.LOADING=1]="LOADING",_d[_d.SUCCESS=2]="SUCCESS",_d[_d.FAILURE=3]="FAILURE",_d}({});const DEFAULT_ID=`${SIGNATURE}_Loader`,Im=class Im{constructor(np){Pm(this,"callbacks",[]);Pm(this,"done",!1);Pm(this,"loading",!1);Pm(this,"errors",[]);let{appkey:rp,id:ap=DEFAULT_ID,libraries:sp=[],nonce:lp,retries:up=3,url:cp="//dapi.kakao.com/v2/maps/sdk.js"}=np;if(this.id=ap,this.appkey=rp,this.libraries=sp,this.nonce=lp,this.retries=up,this.url=cp,Im.instance&&!Im.equalOptions(this.options,Im.instance.options)&&!Im.equalOptions(this.options,Im.instance.options))switch(Im.instance.status){case LoaderStatus.FAILURE:throw new Error(`Loader must not be called again with different options. 
${JSON.stringify(this.options,null,2)}
!==
${JSON.stringify(Im.instance.options,null,2)}`);default:Im.instance.reset(),Im.instance=this;break}return Im.instance||(Im.instance=this),Im.instance}get options(){return{appkey:this.appkey,id:this.id,libraries:this.libraries,nonce:this.nonce,retries:this.retries,url:this.url}}static addLoadEventLisnter(np){return window.kakao&&window.kakao.maps&&window.kakao.maps.load(np),Im.loadEventCallback.add(np),np}static removeLoadEventLisnter(np){return Im.loadEventCallback.delete(np)}load(){return new Promise((np,rp)=>{this.loadCallback(ap=>{ap?rp(ap):np(window.kakao)})})}get status(){return this.onEvent?LoaderStatus.FAILURE:this.done?LoaderStatus.SUCCESS:this.loading?LoaderStatus.LOADING:LoaderStatus.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}loadCallback(np){this.callbacks.push(np),this.execute()}resetIfRetryingFailed(){this.failed&&this.reset()}reset(){this.deleteScript(),this.done=!0,this.loading=!1,this.errors=[],this.onEvent=void 0}execute(){if(this.resetIfRetryingFailed(),this.done)this.callback();else{if(window.kakao&&window.kakao.maps){console.warn("Kakao Maps이 이미 외부 요소에 의해 로딩되어 있습니다.설정한 옵션과 일치 하지 않을 수 있으며, 이에 따른 예상치 동작이 발생할 수 있습니다."),window.kakao.maps.load(this.callback);return}this.loading||(this.loading=!0,this.setScript())}}setScript(){document.getElementById(this.id)&&this.callback();const np=this.createUrl(),rp=document.createElement("script");rp.id=this.id,rp.type="text/javascript",rp.src=np,rp.onerror=this.loadErrorCallback.bind(this),rp.onload=this.callback.bind(this),rp.defer=!0,rp.async=!0,this.nonce&&(rp.nonce=this.nonce),document.head.appendChild(rp)}loadErrorCallback(np){if(this.errors.push(np),this.errors.length<=this.retries){const rp=this.errors.length*2**this.errors.length;console.log(`Failed to load Kakao Maps script, retrying in ${rp} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},rp)}else this.done=!0,this.loading=!1,this.onEvent=this.errors[this.errors.length-1],this.callbacks.forEach(rp=>{rp(this.onEvent)}),this.callbacks=[],Im.loadEventCallback.forEach(rp=>{rp(this.onEvent)})}createUrl(){let np=this.url;return np+=`?appkey=${this.appkey}`,this.libraries.length&&(np+=`&libraries=${this.libraries.join(",")}`),np+="&autoload=false",np}deleteScript(){const np=document.getElementById(this.id);np&&np.remove()}callback(){kakao.maps.load(()=>{Im.instance.done=!0,Im.instance.loading=!1,Im.instance.callbacks.forEach(np=>{np(Im.instance.onEvent)}),Im.instance.callbacks=[],Im.loadEventCallback.forEach(np=>{np(Im.instance.onEvent)})})}static equalOptions(np,rp){if(np.appkey!==rp.appkey||np.id!==rp.id||np.libraries.length!==rp.libraries.length)return!1;for(let ap=0;ap<np.libraries.length;++ap)if(np.libraries[ap]!==rp.libraries[ap])return!1;return!(np.nonce!==rp.nonce||np.retries!==rp.retries||np.url!==rp.url)}};Pm(Im,"loadEventCallback",new Set);let Loader=Im;const useKakaoMapsSetEffect=function(_d,np){for(var rp=arguments.length,ap=new Array(rp>2?rp-2:0),sp=2;sp<rp;sp++)ap[sp-2]=arguments[sp];useIsomorphicLayoutEffect(()=>{!_d||ap.every(lp=>typeof lp>"u")||_d[np].call(_d,...ap)},[_d,np,...ap])},KakaoMapContext=React.createContext(void 0),Map$1=React.forwardRef(function _d(np,rp){let{id:ap,as:sp,children:lp,center:up,isPanto:cp=!1,padding:dp=32,disableDoubleClick:fp,disableDoubleClickZoom:pp,draggable:hp,zoomable:mp,keyboardShortcuts:gp,level:vp,maxLevel:xp,minLevel:Sp,mapTypeId:yp,projectionId:bp,scrollwheel:Ep,tileAnimation:wp,onBoundsChanged:_p,onCenterChanged:Cp,onClick:$p,onDoubleClick:Rp,onDrag:Pp,onDragEnd:Op,onDragStart:jp,onIdle:Mp,onMaptypeidChanged:Ap,onMouseMove:Dp,onRightClick:Fp,onTileLoaded:Ip,onZoomChanged:kp,onZoomStart:Tp,onCreate:Np,...Lp}=np;const Vp=sp||"div",[zp,Wp]=reactExports.useState(!1),[Up,qp]=reactExports.useState(),Bp=reactExports.useRef(null);return useIsomorphicLayoutEffect(()=>{const Yp=Loader.addLoadEventLisnter(Xp=>Wp(!Xp));return()=>{Loader.removeLoadEventLisnter(Yp)}},[]),useIsomorphicLayoutEffect(()=>{if(!zp)return;const Yp=Bp.current;if(!Yp)return;const Xp="lat"in up?new kakao.maps.LatLng(up.lat,up.lng):new kakao.maps.Coords(up.x,up.y),Qp=new kakao.maps.Map(Yp,{center:Xp,disableDoubleClick:fp,disableDoubleClickZoom:pp,draggable:hp,keyboardShortcuts:gp,level:vp,mapTypeId:typeof yp=="string"?kakao.maps.MapTypeId[yp]:yp,projectionId:bp,scrollwheel:Ep,tileAnimation:wp});return qp(Qp),()=>{Yp.innerHTML=""}},[zp,fp,pp,wp]),reactExports.useImperativeHandle(rp,()=>Up,[Up]),useIsomorphicLayoutEffect(()=>{!Up||!Np||Np(Up)},[Up,Np]),useIsomorphicLayoutEffect(()=>{if(!Up)return;let Yp=Up.getCenter();Yp instanceof kakao.maps.Coords&&(Yp=Yp.toLatLng());const Xp="lat"in up?new kakao.maps.LatLng(up.lat,up.lng):new kakao.maps.Coords(up.x,up.y);Xp instanceof kakao.maps.LatLng&&Xp.equals(Yp)||Xp instanceof kakao.maps.Coords&&Xp.toLatLng().equals(Yp)||(cp?Up.panTo(Xp,dp):Up.setCenter(Xp))},[Up,up.lat,up.lng,up.x,up.y]),useKakaoMapsSetEffect(Up,"setDraggable",hp),useKakaoMapsSetEffect(Up,"setZoomable",mp),useKakaoMapsSetEffect(Up,"setKeyboardShortcuts",gp),useKakaoMapsSetEffect(Up,"setLevel",vp),useKakaoMapsSetEffect(Up,"setMapTypeId",zp?typeof yp=="string"?kakao.maps.MapTypeId[yp]:yp:void 0),useKakaoMapsSetEffect(Up,"setProjectionId",bp),useKakaoMapsSetEffect(Up,"setMinLevel",xp),useKakaoMapsSetEffect(Up,"setMaxLevel",Sp),useKakaoEvent(Up,"bounds_changed",_p),useKakaoEvent(Up,"center_changed",Cp),useKakaoEvent(Up,"click",$p),useKakaoEvent(Up,"dblclick",Rp),useKakaoEvent(Up,"drag",Pp),useKakaoEvent(Up,"dragstart",jp),useKakaoEvent(Up,"dragend",Op),useKakaoEvent(Up,"idle",Mp),useKakaoEvent(Up,"maptypeid_changed",Ap),useKakaoEvent(Up,"mousemove",Dp),useKakaoEvent(Up,"rightclick",Fp),useKakaoEvent(Up,"tilesloaded",Ip),useKakaoEvent(Up,"zoom_changed",kp),useKakaoEvent(Up,"zoom_start",Tp),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Vp,{id:ap||`${SIGNATURE}_Map`,...Lp,ref:Bp}),Up&&jsxRuntimeExports.jsx(KakaoMapContext.Provider,{value:Up,children:lp})]})}),useMap=_d=>{const np=reactExports.useContext(KakaoMapContext);if(!np)throw new Error(`${_d?_d+" Component":"useMap"} must exist inside Map Component!`);return np},InfoWindow=React.forwardRef(function _d(np,rp){let{map:ap,position:sp,marker:lp,children:up,altitude:cp,disableAutoPan:dp,range:fp,removable:pp,zIndex:hp,onCreate:mp}=np;const gp=reactExports.useRef(document.createElement("div")),vp=reactExports.useMemo(()=>{const xp=new kakao.maps.InfoWindow({altitude:cp,disableAutoPan:dp,range:fp,removable:pp,zIndex:hp,content:gp.current,position:sp});return gp.current.style.display="none",xp},[dp,pp]);return reactExports.useImperativeHandle(rp,()=>vp,[vp]),reactExports.useLayoutEffect(()=>(vp.open(ap,lp),()=>{vp.close()}),[ap,lp]),reactExports.useLayoutEffect(()=>{mp&&mp(vp)},[vp,mp]),useKakaoMapsSetEffect(vp,"setPosition",sp),useKakaoMapsSetEffect(vp,"setAltitude",cp),useKakaoMapsSetEffect(vp,"setRange",fp),useKakaoMapsSetEffect(vp,"setZIndex",hp),gp.current.parentElement&&ReactDOM.createPortal(up,gp.current.parentElement)}),KakaoMapMarkerClustererContext=React.createContext(void 0),MarkerClusterer=React.forwardRef(function _d(np,rp){let{onClusterclick:ap,onClusterdblclick:sp,onClustered:lp,onClusterout:up,onClusterover:cp,onClusterrightclick:dp,onCreate:fp,...pp}=np;const{children:hp,averageCenter:mp,calculator:gp,clickable:vp,disableClickZoom:xp,gridSize:Sp,hoverable:yp,minClusterSize:bp,minLevel:Ep,styles:wp,texts:_p}=pp,Cp=useMap("MarkerClusterer"),$p=reactExports.useMemo(()=>{if(!window.kakao.maps.MarkerClusterer){console.warn("clusterer 라이브러리를 별도 로드 해야 사용 가능합니다. `https://apis.map.kakao.com/web/guide/#loadlibrary`");return}return new kakao.maps.MarkerClusterer({averageCenter:mp,calculator:gp,clickable:vp,disableClickZoom:xp,gridSize:Sp,hoverable:yp,minClusterSize:bp,minLevel:Ep,styles:wp,texts:_p})},[]);return reactExports.useImperativeHandle(rp,()=>$p,[$p]),reactExports.useLayoutEffect(()=>{if($p)return $p.setMap(Cp),()=>{$p.setMap(null)}},[Cp,$p]),reactExports.useLayoutEffect(()=>{$p&&fp&&fp($p)},[$p,fp]),useKakaoMapsSetEffect($p,"setGridSize",Sp),useKakaoMapsSetEffect($p,"setMinClusterSize",bp),useKakaoMapsSetEffect($p,"setAverageCenter",mp),useKakaoMapsSetEffect($p,"setAverageCenter",mp),useKakaoMapsSetEffect($p,"setMinLevel",Ep),useKakaoMapsSetEffect($p,"setTexts",_p),useKakaoMapsSetEffect($p,"setCalculator",gp),useKakaoMapsSetEffect($p,"setStyles",wp),useKakaoEvent($p,"clustered",lp),useKakaoEvent($p,"clusterclick",ap),useKakaoEvent($p,"clusterover",cp),useKakaoEvent($p,"clusterout",up),useKakaoEvent($p,"clusterdblclick",sp),useKakaoEvent($p,"clusterrightclick",dp),$p?jsxRuntimeExports.jsxs(KakaoMapMarkerClustererContext.Provider,{value:$p,children:[hp,jsxRuntimeExports.jsx(MarkerClustererRedraw,{...pp})]}):null}),MarkerClustererRedraw=()=>{const _d=reactExports.useContext(KakaoMapMarkerClustererContext);return useIsomorphicLayoutEffect(()=>{_d.redraw()}),null},Marker=React.forwardRef(function _d(np,rp){let{map:ap,position:sp,children:lp,altitude:up,clickable:cp,draggable:dp,image:fp,infoWindowOptions:pp,onCreate:hp,onClick:mp,onDragEnd:gp,onDragStart:vp,onMouseOut:xp,onMouseOver:Sp,opacity:yp,range:bp,title:Ep,zIndex:wp}=np;const _p=reactExports.useContext(KakaoMapMarkerClustererContext),Cp=reactExports.useMemo(()=>{var Rp,Pp,Op,jp,Mp,Ap,Dp,Fp,Ip,kp,Tp,Np;return fp&&new kakao.maps.MarkerImage(fp.src,new kakao.maps.Size(fp.size.width,fp.size.height),{alt:(Rp=fp.options)==null?void 0:Rp.alt,coords:(Pp=fp.options)==null?void 0:Pp.coords,offset:((Op=fp.options)==null?void 0:Op.offset)&&new kakao.maps.Point((jp=fp.options)==null?void 0:jp.offset.x,(Mp=fp.options)==null?void 0:Mp.offset.y),shape:(Ap=fp.options)==null?void 0:Ap.shape,spriteOrigin:((Dp=fp.options)==null?void 0:Dp.spriteOrigin)&&new kakao.maps.Point((Fp=fp.options)==null?void 0:Fp.spriteOrigin.x,(Ip=fp.options)==null?void 0:Ip.spriteOrigin.y),spriteSize:((kp=fp.options)==null?void 0:kp.spriteSize)&&new kakao.maps.Size((Tp=fp.options)==null?void 0:Tp.spriteSize.width,(Np=fp.options)==null?void 0:Np.spriteSize.height)})},[JSON.stringify(fp)]),$p=reactExports.useMemo(()=>new kakao.maps.Marker({altitude:up,clickable:cp,draggable:dp,image:Cp,opacity:yp,range:bp,title:Ep,zIndex:wp,position:sp}),[]);return reactExports.useImperativeHandle(rp,()=>$p,[$p]),reactExports.useLayoutEffect(()=>_p?(_p.addMarker($p,!0),()=>_p.removeMarker($p,!0)):($p.setMap(ap),()=>$p.setMap(null)),[ap,_p,$p]),reactExports.useLayoutEffect(()=>{hp&&hp($p)},[$p,hp]),useKakaoMapsSetEffect($p,"setPosition",sp),useKakaoMapsSetEffect($p,"setImage",Cp),useKakaoMapsSetEffect($p,"setAltitude",up),useKakaoMapsSetEffect($p,"setClickable",cp),useKakaoMapsSetEffect($p,"setDraggable",dp),useKakaoMapsSetEffect($p,"setOpacity",yp),useKakaoMapsSetEffect($p,"setRange",bp),useKakaoMapsSetEffect($p,"setRange",bp),useKakaoMapsSetEffect($p,"setTitle",Ep),useKakaoMapsSetEffect($p,"setTitle",Ep),useKakaoMapsSetEffect($p,"setZIndex",wp),useKakaoEvent($p,"click",mp),useKakaoEvent($p,"dragstart",vp),useKakaoEvent($p,"dragend",gp),useKakaoEvent($p,"mouseout",xp),useKakaoEvent($p,"mouseover",Sp),lp?jsxRuntimeExports.jsx(InfoWindow,{position:sp,map:ap,marker:$p,altitude:pp==null?void 0:pp.altitude,disableAutoPan:pp==null?void 0:pp.disableAutoPan,range:pp==null?void 0:pp.range,removable:pp==null?void 0:pp.removable,zIndex:pp==null?void 0:pp.zIndex,children:lp}):null}),MapMarker=React.forwardRef(function _d(np,rp){let{position:ap,...sp}=np;const lp=useMap("MapMarker"),up=reactExports.useMemo(()=>"lat"in ap?new kakao.maps.LatLng(ap.lat,ap.lng):new kakao.maps.Coords(ap.x,ap.y).toLatLng(),[ap.lat,ap.lng,ap.x,ap.y]);return jsxRuntimeExports.jsx(Marker,{map:lp,position:up,...sp,ref:rp})}),MarkerOff="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAsCAYAAAAEuLqPAAAAAXNSR0IArs4c6QAABM1JREFUWAm9WEtsG1UUvW88duJgmhQFpXXSqiBQEbBl0x1rJJDYgZBYIqiEKoEq0fKJQCoLWreAVInuSysQlZAQO4TEbwFbhKjUT5oQx2md2IntePx9nPNmbE8Sf8ZO7CvZ8/zeveecd+e9+8ajJKh9pcPy78rzIvol0fppUSouWuKi8C2ygr4k+v4RUd/LU4d/ljdUJQi06ul0ZnVGitUPQfMayA/09KeDkg18XZWo/bGcm1ntFtNZwBd6TBaS70ld3gFxjCDRsYhMxcbl4eiYhMOWhEMhg12p1aRSqUuuWJJs3pFiqexxqrxYckGOxT+Vt1XJ69x2aS/AnfUNpPUEvadiUZmdPiDjEXtbcKcfTrkqy+lNiCm6Lkr9gWy83C4buwW8m3pWarUfQX4kYtvy2OGDEotGOnF17c8Xy3J3JSPlahV+alHs0Aty/tDf/qDtAtyZ/0XyGNL8ePwRpNny+/fdrtTqcie5LnncHizSJWTiOX8mWujzOoLFxrQb8ifnpvdMTrWcALE4IWIbDnJ51hKwmTwDhxNMO2dubc9Nw3+gK7GISWxyCLk8c2mY+q3qLa7240ceHfieN0A7Xbkmbi49wDB2x4T9BG+FmwGn+gHJudoHXXCdSP39xCYHucRwCnYpK5zWKDJitpo/YBhtbmdj5AS3ZcqrlkkWmaD7fC/CyEEuVNZJclui9IsEZIUblTW5wG1JXT9DYpbXUVmTC9zIAE41WNhu7chhC2lygdsyR6oR4B4swyYnftj2uHCcc9pm6pqn+ohMt8gskqfJ61R4YIzGnEqtQZTmLjCnUwlH6KisyQVuZMD6lcQbBe/sHoGKJpdSv0BA6BvUZp3JO7pcrQ+dnhzkIqdo+1tLLs7cwTPcTyjH6kG2MHQBhgNchhPcZgdgK86T+X42r51yc4Hsuxhik8MAe5yugEuzv6MgXa/X62ohlYGe/TdiLqTWhRzkEnLCXAFsTU68iYF7BackqbUce/bViFlw8LQMDsPlobcEzB/M4jEIx7KqJddyOr2xtW8CiEVMYhsOcu0SwI4L8d/E0qdxVqp797N6bXPvW5MYxCKmwSaHz1oZaHQm5hKirLPcFVgPOpNzGiN9XxlLDGIZTGLvsN0C6HAxfg736iOqJkCpVTp3hHf+yRhDzpkTi5htrPuz76nlryHilYfGx+T40Wls3WDGFX9zMY1Fx39j6hpW/KudIttnoOE9NfEW1C+ZnbEefGek4GvI+UeEGF2suwCuVmW9jlnoZDqnt5ze/7jpQ1/GmFjfim+no7sARiTwX1/051wPWM1YT+1g3D6O0Ye+JsbEdvbnSG8B9LLt9zGjxS0Ukm7nBcfoQ183hsHdLZiA84cK2MMnCbW8ttn21OQpxzFDR1/GBLBgAgiUmPsB3zdYy5fTeAGyw9hn6jx8PN8dHu1/BhfA+HAYVVIq67miLvqeoNhmH8c8H3oHsv4EfDZzG7X8CitbEm9AGmbarHYco08f1p8AAo/bn6A2FPj6pYAtx495FYM+M9YHOV37F+C+9brM4NVM3nzYhl32v/lwu3p/9y+AmEq+RBaqmXwRz5K492ibvt58uzwGE5CYXcJj03fmlOO9Z5t9A9hgAkhkhS41+fztZucoGqf++1P42YP9D7SQLhmdOHqxAAAAAElFTkSuQmCC",MarkerOn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAABUCAYAAADeW1RFAAAAAXNSR0IArs4c6QAAC/NJREFUeAHlXG2IXFcZfs+987Hf2XztzoSE1kYMoiCYUD/jB/ijsQWlhZTml9IfahURbfRHSb1NMGKigiLY/tFYJJIIFbXVgoFEqdWEtBJQamtC0mbJJrshO7OzMzuzM/cen+fMnO3sx0zm497Nrr4we+89533f8zz3fL3n3HtXSUSy09N9k8HER0T0Li16hxbZoURSWutBpWSQxWotOaVUDnnXkfe6EvW6iDq/2Rn56yueKkQBDeWEJ9u96yNlX/ZpFTwIrx8AoUQn3nFD5mB3Vmnnubgrxy95qYlO/CxnEwrhbd61j2lf7Rcl96HaYtWClI4n4iqeSEjMjYkbc8V1XXGUg0qsFYs7EuhAfN8Xv+JLxa9IeW4OvzIqXVeVlKqIlheVq49e9bb8ZTkS7aR1Rfhub/wTfqAPAfdHLclkT1L19vZKIpkEr87co9nLXKkks7OzUiqW5snD3Uuuow5c8dJn2iFZr9sRoru9iZTvV34AJPvoDMR0X3+/6u8fEOV05LIe04JzHWjJ52ekkM/jPlRrHSUcd93YN654I9cXKLdw0Ta6u54c3xOIPo5KGAZVjdpU/UOD4jpoqhGKHwSSn86x1k2No7Yzjqh9bx5M/7GdYtsivO3Ata9rpY6inzqJZI8MgmgsVuuy7ZTahW6lUpEciM+VimxagdJ6/9VDW37YqsuWCL/H04lp//ozmF4+x1odGBxQ/QMDrZYRiV5+ZkZmcjPV2hZ1bMhNfeFfnuLo3lRuS/hd3vSmQjDzW4yUH1bK0euGhxUGpqZOVyoTA5pkMxl07QBTuLzc5wx85g1v6Gaz8psSZs1mg/HTJItBQobXr5dYfGWbcDPwzKuUK5KZmsLUVkHjk5fXOelPNqvppiMNm7Elu2HTxlVHloRZAcTGCiFWg5kZDaQhYTNAoc+yGbNmnYhH4Qb4WkomNmIkVo4zxN7IcNkmvdW7dp/46nkYOXC0avpsIxI2nX0azRsDmQTi6gfGvC0v2jx7XELYBBVB5TXOswODg3KnR2MLtNVjdfTOobYl4zqxdy8OTpY0aRNBgWwS8+xaI8ubQszEzgojl8U3agHhrQfGP27CRYSKAwgq1qoY7OBALuRUz2MBYegcYmZvT69a6QiqHlS358RODvRjOVmf84TNEk/Lbi4E2HfXupADuaCad287MLHb8pknLIF6nIlc9Tju28lWca0dyaEXXAxu5e+3+A0z7lSgve9hnMwl3v+KDBgupi/vIUfyMnFiOZBHuFPB0S3s9ay9ebpclAA/7ZdRVGCSESiIcuPixFEufmELuSSTSVUqFWPlQD0C/z8yNYzohHtQ0tvXG3aZIFmSSm5SKoUpnM+KDhDzkjB+PGca86hD3bDFcrIcFXcXJ4LxKWwmxEdSo+jnS2KRjjH4xZwEpRlj/87NcXnwfX3yoXckJD3kmrTxaV/+dnlOnrtQkIuTZZPmJAfE7Qlv0OSoNXH9BpbxujzipNfHuJWKtAQ23DiqdUxusaElG0Oz+uanhmTv+/uwmFko92yMCX/7dvXJyVcLcuTUtFRqNygs0uTEzURsDibI1UGH2kkY8XhHO6oLGdSu2DRZsyT704c3yMPLkK035I2gDnVpQ9swm/c8N3B10LZ3sPAwA42gOG34sGbvvav1G0ld2lCsD3PR5R/LjVwd7AMawtw3DkM4GnMwYp9lM25XaENb+qCvMMRyI1c0IEnTKTfJwxBOPRQOUIv7bCv+aUNbivVlLrr4Y7mRK1bM2gyJ5olAF06tKedZCkfjTsXaWl+d+rF2lhu5OhjEqnNASCO0DSrs1GMLbedoba2vdmyX1a1xI1cMWoJI4P9DyJWRltnWDLCzH4YwXKQwqOhUrK311akfa1fH7aajtEwyI6zmw9iYwgiqU7G21lenfqyd5UauaNJqnBk+HmGEIVwIUBguogm1LbShLcX6Mhdd/JnnptQ1TEv6LH2Vy9XRtQu/xpSrHuXETGzMcLFdoQ3javoIawU1z03rc47rqpcIam4uHML05fRUoyXGxufebL1pU5c29T7MRZd/LDdydSpDqbN4MIObMIem3kkjXIrGiSeFq54K/H3pxC05gVpr5pl51KEubWhLH2EIOZEbOVa5wuvWJ8efx6h1/9DwsPDpfVhiV0z0d6eWh3yLYDqT4W7eC2MH0w+YHQ9MJL/ApHR/EZlhEuYST7kJsxBgvzxyKtvwXrLPsiuEVbO2IHKi4GnMMR4N4cSm1O9Kk+NTeK9iPZ/GhfmE0DTv+GazEFjpLR5y4bsiiKGnEhtSvydhEyVc/Koq4fWanzOhgAfNUQhHXLdvWGKDmyU+NGp+PGdaWKPxYtzzXJT6meEIhWpYhJNYwjmCOzE7Wypqvka01oUcyIWcYknnqOUzT/jyE6M3MPk9jcFL5bLVqcEqrcWj4cC3fsDJcKuRmCfM61hSfQ/DWQ7bmpiXW58/V9sNIXZyIJcqp7cRLiDMO4HdvW8zm3eIT6PWmhCzbaHkUl+75LKAMBM++N70j3G4UKmUJZ/LMWlNCTETO+RCjcsC/EsI/3qv8mOu80U0Bz9fyGu897jAYDVfECsxEzs5kMtivEsIU+GKl/o7dgcOcwDLZjM4rP62TYzESszETg6LyfJ6WcLM2O6kDiIcO8ulVXYKjla5EKNZBgKzwd4AL6apxrLt0I3tUvbP4+YNDw4OSd9Af2PlO5hTmMlLLjeN+pGMxN1dVw+MXmoEp2EN04CGSty97BO5XE7PlVbfVEVMxEaMxNqMLDk1JUyFtw6O/gmHr6FzqEx2SvPlztUixEJMxEaMNaxN4d2WMK3HDqV/gg21Z7QfqMzULR344Wz4NUV2m0xiIBZiIjZivI2JyW6JMDW3O6NfQSc5jVf1VSYzdUeDEk4a5v1KYCEmg60VttBpOmgt9rHVy25QfuEcHkpt7+ntk3XD6xarrMh1NpOV4mwB4NUl7fbdO+atu9VqwS3XMB0ax676LO5TngUW8u1v0rUKrJEey2TZxCDA0g5Z+myLMA2ueql/otM8yvPc9LS2G2S8jlpYFstkOcRALO2W2TZhFnD1YOoEXhjBa/eIxDJTGDeiH8RYBstimSybGNolS/2OCNNwu0p9C/f5TOD7KosXtKOMPuk7ewsvxaAsllktmyjal7YGrcXu+e5TKQhewR7sVrzQho8+qvvRi/W6vUYz5mc84CpjScfZ2c2Xah3XMEmYgh31EEK6OQwmkaysuAKib5aBfbeHuiFLzF0RpoMxL31OtPMU+9Z0tvE2LHU7kapPRFIow5TViZM6m64J09eQO/p9NLd/m00DBPJhSR6+zGIevk0ZITgOhTC/InFFPUY8+ZlcKLue3HWkL/qk72ZfqlCnVQmFMAvDJ3Gn0UN+iYU4dj27b9r0QV/0WfXdKqXmeqERZjHxHvU416Ql7PYXZzt/5Yi29EFf9NmcQnu5oRI2O4RaPUEIM7npjnaGOOfS1tCAr8W7ju3RW6odKmG6f9RNPY2w7zz6oJottB9r04a29EFfSyF3l9JV4NGoaH5y62v9Bzxtl02bR9g0WxLW7s3JCUZUWBeoT7f7qWwrhYRewyyUQEHyVQKvrmxagSJGlzaQf0RBlo4jIVxzfJhHzqVNH/9TiYLaNbo4dZV8x6RF8CcywleeSj+HBfpr/Opztlh9KN0MP3WoS5vPO+nfNNPtJi8ywhh0+Bb6dwkun7v9M2erQxvPU5GtNyMjTKL3OOlfocYus+aKxcbzMufdWu1epg1to5JICZ/x8D84RB8h+GbbQYX56UsfqdpERTfCQctCHnHTz2Ihm8M3B8vG2IyZmUedqq61jOYYaQ0TMv+nDvrlSdS0KhaWDl7VND4A0yej+v879bcucsIsDK8kHeNxlruN1aCRl+bcpOHU6pj0CP+sCOG3vBG+3vgfNt/6Vyl4zjTm1XQipFp1vSKEWZQS5xiPtkbrz20e06KWFSOcdOPPIqgOSsWiDvD+I388Z5rJi5ppzf+KEb7obRzDd56nuKifLeSFP54zjXkrxDe6WHo5AqjOw6zRGbx4wh/PTdpyyhGlrVgNEz8eaf4ZNfpldOg3+MN3gI8xLSJuy7r9LyKqpzm0iOL3AAAAAElFTkSuQmCC";function FaCheck(_d){return GenIcon({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"},child:[]}]})(_d)}function FaShareSquare(_d){return GenIcon({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M568.482 177.448L424.479 313.433C409.3 327.768 384 317.14 384 295.985v-71.963c-144.575.97-205.566 35.113-164.775 171.353 4.483 14.973-12.846 26.567-25.006 17.33C155.252 383.105 120 326.488 120 269.339c0-143.937 117.599-172.5 264-173.312V24.012c0-21.174 25.317-31.768 40.479-17.448l144.003 135.988c10.02 9.463 10.028 25.425 0 34.896zM384 379.128V448H64V128h50.916a11.99 11.99 0 0 0 8.648-3.693c14.953-15.568 32.237-27.89 51.014-37.676C185.708 80.83 181.584 64 169.033 64H48C21.49 64 0 85.49 0 112v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48v-88.806c0-8.288-8.197-14.066-16.011-11.302a71.83 71.83 0 0 1-34.189 3.377c-7.27-1.046-13.8 4.514-13.8 11.859z"},child:[]}]})(_d)}var Call={},_interopRequireDefault$x=interopRequireDefaultExports;Object.defineProperty(Call,"__esModule",{value:!0});var default_1$o=Call.default=void 0,_createSvgIcon$o=_interopRequireDefault$x(requireCreateSvgIcon()),_jsxRuntime$o=jsxRuntimeExports;default_1$o=Call.default=(0,_createSvgIcon$o.default)((0,_jsxRuntime$o.jsx)("path",{d:"M20.01 15.38c-1.23 0-2.42-.2-3.53-.56-.35-.12-.74-.03-1.01.24l-1.57 1.97c-2.83-1.35-5.48-3.9-6.89-6.83l1.95-1.66c.27-.28.35-.67.24-1.02-.37-1.11-.56-2.3-.56-3.53 0-.54-.45-.99-.99-.99H4.19C3.65 3 3 3.24 3 3.99 3 13.28 10.73 21 20.01 21c.71 0 .99-.63.99-1.18v-3.45c0-.54-.45-.99-.99-.99"}),"Call");const EventMarker=({value:_d,isActive:np,onClick:rp,getDistance:ap})=>{const sp=Recoil_index_20(myCenterAtom),lp=Recoil_index_24(mapCenterAtom),up=Recoil_index_24(mapLevelAtom),cp=useMap(),dp=useNavigate(),fp=mp=>{cp.panTo(mp.getPosition()),rp()},pp=reactExports.useMemo(()=>ap(sp.center.lat,sp.center.lng,_d.latitude,_d.longitude),[sp,_d]),hp=()=>{const mp=cp.getCenter();lp({lat:mp.getLat(),lng:mp.getLng()}),up(cp.getLevel()),dp(`/fish/map/${_d.spotId}`,{state:{data:{value:_d}}})};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(MapMarker,{position:{lat:_d.latitude,lng:_d.longitude},onClick:fp,image:np?{src:MarkerOn,size:{width:28,height:40}}:{src:MarkerOff,size:{width:18,height:25}}}),np&&jsxRuntimeExports.jsxs("div",{className:"info",children:[jsxRuntimeExports.jsxs("div",{className:"info_header",children:[jsxRuntimeExports.jsx("div",{className:"info_name",onClick:hp,children:_d.name}),jsxRuntimeExports.jsx("div",{className:"info_type",children:_d.spotType})]}),jsxRuntimeExports.jsxs("div",{className:"info_body",children:[jsxRuntimeExports.jsx("div",{className:"info_distance",children:pp>=1?`${pp.toFixed(1)}km`:`${(pp/1e3).toFixed()}`}),jsxRuntimeExports.jsx("div",{className:"info_addr",children:_d.streetAddress})]}),jsxRuntimeExports.jsxs("div",{className:"info_footer",children:[jsxRuntimeExports.jsx("hr",{}),jsxRuntimeExports.jsxs("div",{className:"info_icons",children:[_d.spotPhone&&jsxRuntimeExports.jsx("a",{href:`tel:${_d.spotPhone}`,children:jsxRuntimeExports.jsx(default_1$o,{})}),jsxRuntimeExports.jsx(FaShareSquare,{})]})]})]})]})};var GpsFixed={},_interopRequireDefault$w=interopRequireDefaultExports;Object.defineProperty(GpsFixed,"__esModule",{value:!0});var default_1$n=GpsFixed.default=void 0,_createSvgIcon$n=_interopRequireDefault$w(requireCreateSvgIcon()),_jsxRuntime$n=jsxRuntimeExports;default_1$n=GpsFixed.default=(0,_createSvgIcon$n.default)((0,_jsxRuntime$n.jsx)("path",{d:"M12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4m8.94 3c-.46-4.17-3.77-7.48-7.94-7.94V1h-2v2.06C6.83 3.52 3.52 6.83 3.06 11H1v2h2.06c.46 4.17 3.77 7.48 7.94 7.94V23h2v-2.06c4.17-.46 7.48-3.77 7.94-7.94H23v-2zM12 19c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7"}),"GpsFixed");var RefreshOutlined={},_interopRequireDefault$v=interopRequireDefaultExports;Object.defineProperty(RefreshOutlined,"__esModule",{value:!0});var default_1$m=RefreshOutlined.default=void 0,_createSvgIcon$m=_interopRequireDefault$v(requireCreateSvgIcon()),_jsxRuntime$m=jsxRuntimeExports;default_1$m=RefreshOutlined.default=(0,_createSvgIcon$m.default)((0,_jsxRuntime$m.jsx)("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4z"}),"RefreshOutlined");const FishMapBody=({mapRef:_d,getDistance:np,openList:rp})=>{const[ap,sp]=Recoil_index_22(centerChangeAtom),[lp,up]=Recoil_index_22(activeMarkerAtom),[cp,dp]=Recoil_index_22(myCenterAtom),[fp,pp]=Recoil_index_22(mapCenterAtom),[hp,mp]=Recoil_index_22(fishSpotListAtom),gp=Recoil_index_20(mapLevelAtom),vp=Recoil_index_24(filterModeAtom),xp=async()=>{const yp=_d.current;if(!yp)return;const bp=yp.getCenter();try{const wp=(await axios.get("https://i10c203.p.ssafy.io/api/spots",{params:{latitude:bp.getLat(),longitude:bp.getLng()}})).data.spots.map(_p=>{const Cp=np(bp.getLat(),bp.getLng(),_p==null?void 0:_p.latitude,_p==null?void 0:_p.longitude);return Cp<=20?{..._p,dist:Cp}:null}).filter(Boolean);mp(wp),yp.setCenter(bp),sp(!1),up(null),vp("dist"),pp({lat:bp.getLat(),lng:bp.getLng()})}catch(Ep){console.log(Ep)}},Sp=()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(yp=>{const bp=yp.coords.latitude,Ep=yp.coords.longitude,wp=new kakao.maps.LatLng(bp,Ep);_d.current.setCenter(wp),sp(!1),dp(_p=>({..._p,center:{lat:bp,lng:Ep},isLoading:!0}))}):window.alert("이 브라우저에서는 Geolocation을 지원하지 않습니다.")};return jsxRuntimeExports.jsxs("div",{className:"FishMapBody",children:[ap&&!rp&&jsxRuntimeExports.jsxs("div",{className:"reSearch",onClick:xp,children:[jsxRuntimeExports.jsx(default_1$m,{}),"이 지역 검색"]}),jsxRuntimeExports.jsxs(Map$1,{center:fp,ref:_d,level:gp,onClick:()=>up(null),onCenterChanged:()=>sp(!0),children:[jsxRuntimeExports.jsx(MarkerClusterer,{minLevel:11,averageCenter:!0,children:hp.map((yp,bp)=>jsxRuntimeExports.jsx(EventMarker,{value:yp,isActive:lp===bp,onClick:()=>up(bp),getDistance:np},yp.spotId))}),cp.isLoading&&jsxRuntimeExports.jsx(MapMarker,{position:cp.center,clickable:!0,image:{src:"https://cdn4.iconfinder.com/data/icons/small-n-flat/24/map-marker-512.png",size:{width:25,height:25}}}),!rp&&jsxRuntimeExports.jsx("button",{style:{bottom:lp!==null?"19vh":"3vh"},className:"FishMap_btn",onClick:Sp,children:jsxRuntimeExports.jsx(default_1$n,{})})]})]})};var FormatListBulleted={},_interopRequireDefault$u=interopRequireDefaultExports;Object.defineProperty(FormatListBulleted,"__esModule",{value:!0});var default_1$l=FormatListBulleted.default=void 0,_createSvgIcon$l=_interopRequireDefault$u(requireCreateSvgIcon()),_jsxRuntime$l=jsxRuntimeExports;default_1$l=FormatListBulleted.default=(0,_createSvgIcon$l.default)((0,_jsxRuntime$l.jsx)("path",{d:"M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5m0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5m0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5M7 19h14v-2H7zm0-6h14v-2H7zm0-8v2h14V5z"}),"FormatListBulleted");var MapOutlined={},_interopRequireDefault$t=interopRequireDefaultExports;Object.defineProperty(MapOutlined,"__esModule",{value:!0});var default_1$k=MapOutlined.default=void 0,_createSvgIcon$k=_interopRequireDefault$t(requireCreateSvgIcon()),_jsxRuntime$k=jsxRuntimeExports;default_1$k=MapOutlined.default=(0,_createSvgIcon$k.default)((0,_jsxRuntime$k.jsx)("path",{d:"m20.5 3-.16.03L15 5.1 9 3 3.36 4.9c-.21.07-.36.25-.36.48V20.5c0 .28.22.5.5.5l.16-.03L9 18.9l6 2.1 5.64-1.9c.21-.07.36-.25.36-.48V3.5c0-.28-.22-.5-.5-.5M10 5.47l4 1.4v11.66l-4-1.4zm-5 .99 3-1.01v11.7l-3 1.16zm14 11.08-3 1.01V6.86l3-1.16z"}),"MapOutlined");var ArrowDropDownOutlined={},_interopRequireDefault$s=interopRequireDefaultExports;Object.defineProperty(ArrowDropDownOutlined,"__esModule",{value:!0});var default_1$j=ArrowDropDownOutlined.default=void 0,_createSvgIcon$j=_interopRequireDefault$s(requireCreateSvgIcon()),_jsxRuntime$j=jsxRuntimeExports;default_1$j=ArrowDropDownOutlined.default=(0,_createSvgIcon$j.default)((0,_jsxRuntime$j.jsx)("path",{d:"m7 10 5 5 5-5z"}),"ArrowDropDownOutlined");var CheckOutlined={},_interopRequireDefault$r=interopRequireDefaultExports;Object.defineProperty(CheckOutlined,"__esModule",{value:!0});var default_1$i=CheckOutlined.default=void 0,_createSvgIcon$i=_interopRequireDefault$r(requireCreateSvgIcon()),_jsxRuntime$i=jsxRuntimeExports;default_1$i=CheckOutlined.default=(0,_createSvgIcon$i.default)((0,_jsxRuntime$i.jsx)("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"CheckOutlined");const FishMapItem=({item:_d,idx:np,mapRef:rp,getDistance:ap,setOpenList:sp})=>{const lp=Recoil_index_20(myCenterAtom),up=Recoil_index_24(activeMarkerAtom),cp=Recoil_index_24(centerChangeAtom),dp=reactExports.useMemo(()=>ap(lp.center.lat,lp.center.lng,_d.latitude,_d.longitude),[]),fp=()=>{sp(!1),console.log(np),up(np);const pp=new kakao.maps.LatLng(_d.latitude,_d.longitude);rp.current.setLevel(4),rp.current.setCenter(pp),cp(!1)};return jsxRuntimeExports.jsxs("div",{className:"item",children:[jsxRuntimeExports.jsxs("div",{className:"item-head",children:[jsxRuntimeExports.jsx("div",{className:"fishing-name",onClick:fp,children:_d.name}),jsxRuntimeExports.jsx("div",{className:"fishing-type",children:_d.spotType})]}),jsxRuntimeExports.jsxs("div",{className:"item-body",children:[jsxRuntimeExports.jsx("div",{className:"fishing-dist",children:dp>=1?`${dp.toFixed(1)}km`:`${(dp/1e3).toFixed()}m`}),jsxRuntimeExports.jsx("div",{className:"fishing-addr",children:_d.streetAddress})]}),jsxRuntimeExports.jsxs("div",{className:"fishing-exp",children:[_d.charge,"원"]})]})},FishMapFooter=({mapRef:_d,getDistance:np,openList:rp,setOpenList:ap})=>{const[sp,lp]=reactExports.useState(!1),[up,cp]=Recoil_index_22(filterModeAtom),dp=Recoil_index_20(fishSpotListAtom),fp=Recoil_index_20(searchModeAtom),pp=mp=>{lp(!1),cp(mp)},hp=reactExports.useMemo(()=>dp.toSorted((mp,gp)=>up==="dist"?mp.dist-gp.dist:mp.charge-gp.charge),[up,dp]);return jsxRuntimeExports.jsxs("div",{className:`FishMapFooter ${rp&&"expand"}`,children:[jsxRuntimeExports.jsxs("div",{className:`fishing-content ${rp&&"expand"}`,style:{height:rp&&fp==="hash"&&"74.5vh"},children:[jsxRuntimeExports.jsxs("button",{className:"filter",onClick:()=>lp(!0),children:[up==="dist"?"거리순":"비용순",jsxRuntimeExports.jsx(default_1$j,{})]}),sp&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"filter-open",onClick:()=>lp(!1)}),jsxRuntimeExports.jsxs("div",{className:"filter-content",children:[jsxRuntimeExports.jsx("h2",{children:"검색 설정"}),jsxRuntimeExports.jsx("div",{className:"filter-b",children:jsxRuntimeExports.jsxs("button",{className:`${up==="dist"?"pick":""}`,onClick:()=>pp("dist"),children:["거리순"," ",jsxRuntimeExports.jsx("div",{children:up==="dist"&&jsxRuntimeExports.jsx(default_1$i,{})})]})}),jsxRuntimeExports.jsx("div",{className:"filter-b",children:jsxRuntimeExports.jsxs("button",{className:`${up==="money"?"pick":""}`,onClick:()=>pp("money"),children:["비용순",jsxRuntimeExports.jsx("div",{children:up==="money"&&jsxRuntimeExports.jsx(default_1$i,{})})]})}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("button",{className:"cancel",onClick:()=>lp(!1),children:"취소"})})]})]}),jsxRuntimeExports.jsx("div",{className:"fishing-list",children:dp.length?hp.map((mp,gp)=>jsxRuntimeExports.jsx(FishMapItem,{item:mp,idx:gp,mapRef:_d,setOpenList:ap,getDistance:np},mp.spotId)):jsxRuntimeExports.jsxs("div",{className:"noneData",children:[jsxRuntimeExports.jsx(default_1$r,{}),jsxRuntimeExports.jsx("div",{children:"조건에 맞는 낚시터가 없습니다."})]})})]}),jsxRuntimeExports.jsx("div",{className:"mode",onClick:()=>ap(mp=>!mp),children:rp?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(default_1$k,{}),jsxRuntimeExports.jsx("div",{children:"지도보기"})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(default_1$l,{}),jsxRuntimeExports.jsx("div",{children:"목록보기"})]})})]})},hashTags=["#사진맛집","#노을맛집","#월척","#고기맛집","#산책하기좋은곳"],FishMapPage=()=>{const _d=Recoil_index_24(searchTermAtom),np=Recoil_index_24(filterModeAtom),rp=Recoil_index_24(centerChangeAtom),ap=Recoil_index_24(myCenterAtom),sp=Recoil_index_24(fishSpotListAtom),lp=Recoil_index_24(searchModeAtom),up=Recoil_index_24(mapLevelAtom),[cp,dp]=Recoil_index_22(mapCenterAtom),[fp,pp]=Recoil_index_22(activeMarkerAtom),[hp,mp]=reactExports.useState(!1),gp=useLocation(),vp=reactExports.useRef(null),xp=(Ep,wp)=>{dp({lat:Ep,lng:wp}),pp(null),_d(""),np("dist"),lp("location"),up(9)},Sp=(Ep,wp,_p,Cp)=>{const $p=Dp=>Dp*(Math.PI/180),Pp=$p(_p-Ep),Op=$p(Cp-wp),jp=Math.sin(Pp/2)*Math.sin(Pp/2)+Math.cos($p(Ep))*Math.cos($p(_p))*Math.sin(Op/2)*Math.sin(Op/2);return 6371*(2*Math.atan2(Math.sqrt(jp),Math.sqrt(1-jp)))},yp=async(Ep,wp)=>{const Cp=(await axios.get("https://i10c203.p.ssafy.io/api/spots",{params:{latitude:Ep,longitude:wp}})).data.spots.map($p=>{const Rp=Sp(Ep,wp,$p==null?void 0:$p.latitude,$p==null?void 0:$p.longitude);return Rp<=20?{...$p,dist:Rp}:null}).filter(Boolean);console.log(Cp),sp(Cp)},bp=()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(Ep=>{var Cp;const{latitude:wp,longitude:_p}=Ep.coords;ap($p=>({...$p,center:{lat:wp,lng:_p},isLoading:!0})),rp(!1),(!cp.lat&&!cp.lng||!((Cp=gp.state)!=null&&Cp.data))&&(yp(wp,_p),xp(wp,_p))},Ep=>{console.log(Ep),ap(wp=>({...wp,errMsg:Ep.message,isLoading:!1}))}):ap(Ep=>({...Ep,errMsg:"geolocation을 사용할수 없어요..",isLoading:!1}))};return reactExports.useEffect(()=>{bp()},[]),jsxRuntimeExports.jsxs("div",{className:"FishMap",children:[jsxRuntimeExports.jsx(FishMapHeader,{hashTags,mapRef:vp,getDistance:Sp}),jsxRuntimeExports.jsx(FishMapBody,{openList:hp,mapRef:vp,getDistance:Sp}),fp===null&&jsxRuntimeExports.jsx(FishMapFooter,{openList:hp,setOpenList:mp,mapRef:vp,getDistance:Sp})]})},WEEKDAY=["일","월","화","수","목","금","토"],FishSpot=({weatherData:_d,sunrise:np,sunset:rp})=>{const ap=new Date,sp=(ap.getMonth()+1).toString().padStart(2,"0"),lp=ap.getDate().toString().padStart(2,"0"),up=dp=>dp.toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit",hour12:!1}),cp=dp=>dp<12?`오전${dp||12}시`:`오후${dp===12?dp:dp-12}시`;return jsxRuntimeExports.jsxs("div",{className:"MapDetailWeather",children:[jsxRuntimeExports.jsx("div",{className:"todays-date",children:`${sp}.${lp} ${WEEKDAY[ap.getDay()]}`}),jsxRuntimeExports.jsxs("div",{className:"sun-rs",children:[`일출 ${up(np)}`,jsxRuntimeExports.jsx("span",{children:"•"}),`일몰 ${up(rp)}`]}),jsxRuntimeExports.jsx("div",{className:"weather-data",children:_d.map((dp,fp)=>jsxRuntimeExports.jsxs("div",{className:"weather-total",children:[jsxRuntimeExports.jsx("div",{className:"weather-time",children:cp(new Date(dp.dt_txt).getHours())}),jsxRuntimeExports.jsx("img",{className:"weather-icon",src:`http://openweathermap.org/img/wn/${dp.weather[0].icon}@2x.png`,alt:"날씨 아이콘"}),jsxRuntimeExports.jsxs("div",{children:[dp.main.temp.toFixed(0),"°"]}),jsxRuntimeExports.jsx("div",{children:`${(dp.pop*100).toFixed()}%`})]},fp))})]})},FishMapDetailPage=()=>{const _d=useLocation();useNavigate();const{value:np}=_d.state.data,rp="87246d75e1ce26e1392a087b3d1d88c5",ap=Recoil_index_24(prevPathAtom),[sp,lp]=reactExports.useState([]),[up,cp]=reactExports.useState([]),[dp,fp]=reactExports.useState(""),[pp,hp]=reactExports.useState(""),mp=async()=>{try{const gp=await axios.get(`https://api.openweathermap.org/data/2.5/forecast?lat=${np.latitude}&lon=${np.longitude}&appid=${rp}&units=metric&lang=kr`);fp(new Date(gp.data.city.sunrise*1e3)),hp(new Date(gp.data.city.sunset*1e3)),cp(gp.data.list)}catch(gp){console.log(gp)}finally{ap(_d.pathname)}};return reactExports.useEffect(()=>{mp()},[]),up.length?jsxRuntimeExports.jsxs("div",{className:"FishMapDetailPage",children:[jsxRuntimeExports.jsx(Header,{prevPath:"/fish/map"}),jsxRuntimeExports.jsxs("div",{className:"body",children:[jsxRuntimeExports.jsxs("div",{className:"fishing-info",children:[jsxRuntimeExports.jsxs("div",{className:"fishing-name",children:[jsxRuntimeExports.jsx("h2",{children:np.name}),jsxRuntimeExports.jsx("div",{children:np.spotType})]}),jsxRuntimeExports.jsx("div",{children:np.streetAddress})]}),jsxRuntimeExports.jsx(FishSpot,{weatherData:up,sunrise:dp,sunset:pp}),jsxRuntimeExports.jsxs("div",{className:"fish-species",children:[jsxRuntimeExports.jsxs("h3",{className:"name",children:[np.name,"의 주요어종"]}),jsxRuntimeExports.jsx("div",{className:"wrapper",children:np.fishNames.length?np.fishNames.map(gp=>jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("img",{src:"https://img.freepik.com/premium-photo/a-colorful-fish-with-a-white-and-blue-tail_899894-16102.jpg"},gp),jsxRuntimeExports.jsx("div",{children:gp})]},gp)):jsxRuntimeExports.jsx("div",{className:"none-data",children:"정보를 준비 중입니다."})})]}),jsxRuntimeExports.jsxs("div",{className:"fishing-reviews",children:[jsxRuntimeExports.jsxs("h3",{className:"name",children:[np.name,"의 리뷰"]}),jsxRuntimeExports.jsx("div",{className:"wrapper",children:sp.length?sp.map(gp=>jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("img",{src:"https://cdn.iconsumer.or.kr/news/photo/201806/7349_8772_1719.jpg"},gp),jsxRuntimeExports.jsx("div",{children:gp})]})):jsxRuntimeExports.jsx("div",{className:"none-data",children:"정보를 준비 중입니다."})})]})]})]}):jsxRuntimeExports.jsx(Loading,{})};/*!
 * Cropper.js v1.6.1
 * https://fengyuanchen.github.io/cropperjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2023-09-17T03:44:19.860Z
 */function ownKeys(_d,np){var rp=Object.keys(_d);if(Object.getOwnPropertySymbols){var ap=Object.getOwnPropertySymbols(_d);np&&(ap=ap.filter(function(sp){return Object.getOwnPropertyDescriptor(_d,sp).enumerable})),rp.push.apply(rp,ap)}return rp}function _objectSpread2(_d){for(var np=1;np<arguments.length;np++){var rp=arguments[np]!=null?arguments[np]:{};np%2?ownKeys(Object(rp),!0).forEach(function(ap){_defineProperty(_d,ap,rp[ap])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_d,Object.getOwnPropertyDescriptors(rp)):ownKeys(Object(rp)).forEach(function(ap){Object.defineProperty(_d,ap,Object.getOwnPropertyDescriptor(rp,ap))})}return _d}function _typeof(_d){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(np){return typeof np}:function(np){return np&&typeof Symbol=="function"&&np.constructor===Symbol&&np!==Symbol.prototype?"symbol":typeof np},_typeof(_d)}function _classCallCheck(_d,np){if(!(_d instanceof np))throw new TypeError("Cannot call a class as a function")}function _defineProperties(_d,np){for(var rp=0;rp<np.length;rp++){var ap=np[rp];ap.enumerable=ap.enumerable||!1,ap.configurable=!0,"value"in ap&&(ap.writable=!0),Object.defineProperty(_d,_toPropertyKey(ap.key),ap)}}function _createClass(_d,np,rp){return np&&_defineProperties(_d.prototype,np),rp&&_defineProperties(_d,rp),Object.defineProperty(_d,"prototype",{writable:!1}),_d}function _defineProperty(_d,np,rp){return np=_toPropertyKey(np),np in _d?Object.defineProperty(_d,np,{value:rp,enumerable:!0,configurable:!0,writable:!0}):_d[np]=rp,_d}function _toConsumableArray(_d){return _arrayWithoutHoles(_d)||_iterableToArray(_d)||_unsupportedIterableToArray(_d)||_nonIterableSpread()}function _arrayWithoutHoles(_d){if(Array.isArray(_d))return _arrayLikeToArray(_d)}function _iterableToArray(_d){if(typeof Symbol<"u"&&_d[Symbol.iterator]!=null||_d["@@iterator"]!=null)return Array.from(_d)}function _unsupportedIterableToArray(_d,np){if(_d){if(typeof _d=="string")return _arrayLikeToArray(_d,np);var rp=Object.prototype.toString.call(_d).slice(8,-1);if(rp==="Object"&&_d.constructor&&(rp=_d.constructor.name),rp==="Map"||rp==="Set")return Array.from(_d);if(rp==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(rp))return _arrayLikeToArray(_d,np)}}function _arrayLikeToArray(_d,np){(np==null||np>_d.length)&&(np=_d.length);for(var rp=0,ap=new Array(np);rp<np;rp++)ap[rp]=_d[rp];return ap}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _toPrimitive(_d,np){if(typeof _d!="object"||_d===null)return _d;var rp=_d[Symbol.toPrimitive];if(rp!==void 0){var ap=rp.call(_d,np||"default");if(typeof ap!="object")return ap;throw new TypeError("@@toPrimitive must return a primitive value.")}return(np==="string"?String:Number)(_d)}function _toPropertyKey(_d){var np=_toPrimitive(_d,"string");return typeof np=="symbol"?np:String(np)}var IS_BROWSER=typeof window<"u"&&typeof window.document<"u",WINDOW=IS_BROWSER?window:{},IS_TOUCH_DEVICE=IS_BROWSER&&WINDOW.document.documentElement?"ontouchstart"in WINDOW.document.documentElement:!1,HAS_POINTER_EVENT=IS_BROWSER?"PointerEvent"in WINDOW:!1,NAMESPACE="cropper",ACTION_ALL="all",ACTION_CROP="crop",ACTION_MOVE="move",ACTION_ZOOM="zoom",ACTION_EAST="e",ACTION_WEST="w",ACTION_SOUTH="s",ACTION_NORTH="n",ACTION_NORTH_EAST="ne",ACTION_NORTH_WEST="nw",ACTION_SOUTH_EAST="se",ACTION_SOUTH_WEST="sw",CLASS_CROP="".concat(NAMESPACE,"-crop"),CLASS_DISABLED="".concat(NAMESPACE,"-disabled"),CLASS_HIDDEN="".concat(NAMESPACE,"-hidden"),CLASS_HIDE="".concat(NAMESPACE,"-hide"),CLASS_INVISIBLE="".concat(NAMESPACE,"-invisible"),CLASS_MODAL="".concat(NAMESPACE,"-modal"),CLASS_MOVE="".concat(NAMESPACE,"-move"),DATA_ACTION="".concat(NAMESPACE,"Action"),DATA_PREVIEW="".concat(NAMESPACE,"Preview"),DRAG_MODE_CROP="crop",DRAG_MODE_MOVE="move",DRAG_MODE_NONE="none",EVENT_CROP="crop",EVENT_CROP_END="cropend",EVENT_CROP_MOVE="cropmove",EVENT_CROP_START="cropstart",EVENT_DBLCLICK="dblclick",EVENT_TOUCH_START=IS_TOUCH_DEVICE?"touchstart":"mousedown",EVENT_TOUCH_MOVE=IS_TOUCH_DEVICE?"touchmove":"mousemove",EVENT_TOUCH_END=IS_TOUCH_DEVICE?"touchend touchcancel":"mouseup",EVENT_POINTER_DOWN=HAS_POINTER_EVENT?"pointerdown":EVENT_TOUCH_START,EVENT_POINTER_MOVE=HAS_POINTER_EVENT?"pointermove":EVENT_TOUCH_MOVE,EVENT_POINTER_UP=HAS_POINTER_EVENT?"pointerup pointercancel":EVENT_TOUCH_END,EVENT_READY="ready",EVENT_RESIZE="resize",EVENT_WHEEL="wheel",EVENT_ZOOM="zoom",MIME_TYPE_JPEG="image/jpeg",REGEXP_ACTIONS=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,REGEXP_DATA_URL=/^data:/,REGEXP_DATA_URL_JPEG=/^data:image\/jpeg;base64,/,REGEXP_TAG_NAME=/^img|canvas$/i,MIN_CONTAINER_WIDTH=200,MIN_CONTAINER_HEIGHT=100,DEFAULTS={viewMode:0,dragMode:DRAG_MODE_CROP,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:MIN_CONTAINER_WIDTH,minContainerHeight:MIN_CONTAINER_HEIGHT,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},TEMPLATE='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',isNaN$1=Number.isNaN||WINDOW.isNaN;function isNumber(_d){return typeof _d=="number"&&!isNaN$1(_d)}var isPositiveNumber=function _d(np){return np>0&&np<1/0};function isUndefined(_d){return typeof _d>"u"}function isObject(_d){return _typeof(_d)==="object"&&_d!==null}var hasOwnProperty=Object.prototype.hasOwnProperty;function isPlainObject(_d){if(!isObject(_d))return!1;try{var np=_d.constructor,rp=np.prototype;return np&&rp&&hasOwnProperty.call(rp,"isPrototypeOf")}catch{return!1}}function isFunction(_d){return typeof _d=="function"}var slice=Array.prototype.slice;function toArray(_d){return Array.from?Array.from(_d):slice.call(_d)}function forEach(_d,np){return _d&&isFunction(np)&&(Array.isArray(_d)||isNumber(_d.length)?toArray(_d).forEach(function(rp,ap){np.call(_d,rp,ap,_d)}):isObject(_d)&&Object.keys(_d).forEach(function(rp){np.call(_d,_d[rp],rp,_d)})),_d}var assign=Object.assign||function _d(np){for(var rp=arguments.length,ap=new Array(rp>1?rp-1:0),sp=1;sp<rp;sp++)ap[sp-1]=arguments[sp];return isObject(np)&&ap.length>0&&ap.forEach(function(lp){isObject(lp)&&Object.keys(lp).forEach(function(up){np[up]=lp[up]})}),np},REGEXP_DECIMALS=/\.\d*(?:0|9){12}\d*$/;function normalizeDecimalNumber(_d){var np=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return REGEXP_DECIMALS.test(_d)?Math.round(_d*np)/np:_d}var REGEXP_SUFFIX=/^width|height|left|top|marginLeft|marginTop$/;function setStyle(_d,np){var rp=_d.style;forEach(np,function(ap,sp){REGEXP_SUFFIX.test(sp)&&isNumber(ap)&&(ap="".concat(ap,"px")),rp[sp]=ap})}function hasClass(_d,np){return _d.classList?_d.classList.contains(np):_d.className.indexOf(np)>-1}function addClass(_d,np){if(np){if(isNumber(_d.length)){forEach(_d,function(ap){addClass(ap,np)});return}if(_d.classList){_d.classList.add(np);return}var rp=_d.className.trim();rp?rp.indexOf(np)<0&&(_d.className="".concat(rp," ").concat(np)):_d.className=np}}function removeClass(_d,np){if(np){if(isNumber(_d.length)){forEach(_d,function(rp){removeClass(rp,np)});return}if(_d.classList){_d.classList.remove(np);return}_d.className.indexOf(np)>=0&&(_d.className=_d.className.replace(np,""))}}function toggleClass(_d,np,rp){if(np){if(isNumber(_d.length)){forEach(_d,function(ap){toggleClass(ap,np,rp)});return}rp?addClass(_d,np):removeClass(_d,np)}}var REGEXP_CAMEL_CASE=/([a-z\d])([A-Z])/g;function toParamCase(_d){return _d.replace(REGEXP_CAMEL_CASE,"$1-$2").toLowerCase()}function getData(_d,np){return isObject(_d[np])?_d[np]:_d.dataset?_d.dataset[np]:_d.getAttribute("data-".concat(toParamCase(np)))}function setData(_d,np,rp){isObject(rp)?_d[np]=rp:_d.dataset?_d.dataset[np]=rp:_d.setAttribute("data-".concat(toParamCase(np)),rp)}function removeData(_d,np){if(isObject(_d[np]))try{delete _d[np]}catch{_d[np]=void 0}else if(_d.dataset)try{delete _d.dataset[np]}catch{_d.dataset[np]=void 0}else _d.removeAttribute("data-".concat(toParamCase(np)))}var REGEXP_SPACES=/\s\s*/,onceSupported=function(){var _d=!1;if(IS_BROWSER){var np=!1,rp=function(){},ap=Object.defineProperty({},"once",{get:function(){return _d=!0,np},set:function(lp){np=lp}});WINDOW.addEventListener("test",rp,ap),WINDOW.removeEventListener("test",rp,ap)}return _d}();function removeListener(_d,np,rp){var ap=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},sp=rp;np.trim().split(REGEXP_SPACES).forEach(function(lp){if(!onceSupported){var up=_d.listeners;up&&up[lp]&&up[lp][rp]&&(sp=up[lp][rp],delete up[lp][rp],Object.keys(up[lp]).length===0&&delete up[lp],Object.keys(up).length===0&&delete _d.listeners)}_d.removeEventListener(lp,sp,ap)})}function addListener(_d,np,rp){var ap=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},sp=rp;np.trim().split(REGEXP_SPACES).forEach(function(lp){if(ap.once&&!onceSupported){var up=_d.listeners,cp=up===void 0?{}:up;sp=function(){delete cp[lp][rp],_d.removeEventListener(lp,sp,ap);for(var fp=arguments.length,pp=new Array(fp),hp=0;hp<fp;hp++)pp[hp]=arguments[hp];rp.apply(_d,pp)},cp[lp]||(cp[lp]={}),cp[lp][rp]&&_d.removeEventListener(lp,cp[lp][rp],ap),cp[lp][rp]=sp,_d.listeners=cp}_d.addEventListener(lp,sp,ap)})}function dispatchEvent(_d,np,rp){var ap;return isFunction(Event)&&isFunction(CustomEvent)?ap=new CustomEvent(np,{detail:rp,bubbles:!0,cancelable:!0}):(ap=document.createEvent("CustomEvent"),ap.initCustomEvent(np,!0,!0,rp)),_d.dispatchEvent(ap)}function getOffset(_d){var np=_d.getBoundingClientRect();return{left:np.left+(window.pageXOffset-document.documentElement.clientLeft),top:np.top+(window.pageYOffset-document.documentElement.clientTop)}}var location=WINDOW.location,REGEXP_ORIGINS=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function isCrossOriginURL(_d){var np=_d.match(REGEXP_ORIGINS);return np!==null&&(np[1]!==location.protocol||np[2]!==location.hostname||np[3]!==location.port)}function addTimestamp(_d){var np="timestamp=".concat(new Date().getTime());return _d+(_d.indexOf("?")===-1?"?":"&")+np}function getTransforms(_d){var np=_d.rotate,rp=_d.scaleX,ap=_d.scaleY,sp=_d.translateX,lp=_d.translateY,up=[];isNumber(sp)&&sp!==0&&up.push("translateX(".concat(sp,"px)")),isNumber(lp)&&lp!==0&&up.push("translateY(".concat(lp,"px)")),isNumber(np)&&np!==0&&up.push("rotate(".concat(np,"deg)")),isNumber(rp)&&rp!==1&&up.push("scaleX(".concat(rp,")")),isNumber(ap)&&ap!==1&&up.push("scaleY(".concat(ap,")"));var cp=up.length?up.join(" "):"none";return{WebkitTransform:cp,msTransform:cp,transform:cp}}function getMaxZoomRatio(_d){var np=_objectSpread2({},_d),rp=0;return forEach(_d,function(ap,sp){delete np[sp],forEach(np,function(lp){var up=Math.abs(ap.startX-lp.startX),cp=Math.abs(ap.startY-lp.startY),dp=Math.abs(ap.endX-lp.endX),fp=Math.abs(ap.endY-lp.endY),pp=Math.sqrt(up*up+cp*cp),hp=Math.sqrt(dp*dp+fp*fp),mp=(hp-pp)/pp;Math.abs(mp)>Math.abs(rp)&&(rp=mp)})}),rp}function getPointer(_d,np){var rp=_d.pageX,ap=_d.pageY,sp={endX:rp,endY:ap};return np?sp:_objectSpread2({startX:rp,startY:ap},sp)}function getPointersCenter(_d){var np=0,rp=0,ap=0;return forEach(_d,function(sp){var lp=sp.startX,up=sp.startY;np+=lp,rp+=up,ap+=1}),np/=ap,rp/=ap,{pageX:np,pageY:rp}}function getAdjustedSizes(_d){var np=_d.aspectRatio,rp=_d.height,ap=_d.width,sp=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"contain",lp=isPositiveNumber(ap),up=isPositiveNumber(rp);if(lp&&up){var cp=rp*np;sp==="contain"&&cp>ap||sp==="cover"&&cp<ap?rp=ap/np:ap=rp*np}else lp?rp=ap/np:up&&(ap=rp*np);return{width:ap,height:rp}}function getRotatedSizes(_d){var np=_d.width,rp=_d.height,ap=_d.degree;if(ap=Math.abs(ap)%180,ap===90)return{width:rp,height:np};var sp=ap%90*Math.PI/180,lp=Math.sin(sp),up=Math.cos(sp),cp=np*up+rp*lp,dp=np*lp+rp*up;return ap>90?{width:dp,height:cp}:{width:cp,height:dp}}function getSourceCanvas(_d,np,rp,ap){var sp=np.aspectRatio,lp=np.naturalWidth,up=np.naturalHeight,cp=np.rotate,dp=cp===void 0?0:cp,fp=np.scaleX,pp=fp===void 0?1:fp,hp=np.scaleY,mp=hp===void 0?1:hp,gp=rp.aspectRatio,vp=rp.naturalWidth,xp=rp.naturalHeight,Sp=ap.fillColor,yp=Sp===void 0?"transparent":Sp,bp=ap.imageSmoothingEnabled,Ep=bp===void 0?!0:bp,wp=ap.imageSmoothingQuality,_p=wp===void 0?"low":wp,Cp=ap.maxWidth,$p=Cp===void 0?1/0:Cp,Rp=ap.maxHeight,Pp=Rp===void 0?1/0:Rp,Op=ap.minWidth,jp=Op===void 0?0:Op,Mp=ap.minHeight,Ap=Mp===void 0?0:Mp,Dp=document.createElement("canvas"),Fp=Dp.getContext("2d"),Ip=getAdjustedSizes({aspectRatio:gp,width:$p,height:Pp}),kp=getAdjustedSizes({aspectRatio:gp,width:jp,height:Ap},"cover"),Tp=Math.min(Ip.width,Math.max(kp.width,vp)),Np=Math.min(Ip.height,Math.max(kp.height,xp)),Lp=getAdjustedSizes({aspectRatio:sp,width:$p,height:Pp}),Vp=getAdjustedSizes({aspectRatio:sp,width:jp,height:Ap},"cover"),zp=Math.min(Lp.width,Math.max(Vp.width,lp)),Wp=Math.min(Lp.height,Math.max(Vp.height,up)),Up=[-zp/2,-Wp/2,zp,Wp];return Dp.width=normalizeDecimalNumber(Tp),Dp.height=normalizeDecimalNumber(Np),Fp.fillStyle=yp,Fp.fillRect(0,0,Tp,Np),Fp.save(),Fp.translate(Tp/2,Np/2),Fp.rotate(dp*Math.PI/180),Fp.scale(pp,mp),Fp.imageSmoothingEnabled=Ep,Fp.imageSmoothingQuality=_p,Fp.drawImage.apply(Fp,[_d].concat(_toConsumableArray(Up.map(function(qp){return Math.floor(normalizeDecimalNumber(qp))})))),Fp.restore(),Dp}var fromCharCode=String.fromCharCode;function getStringFromCharCode(_d,np,rp){var ap="";rp+=np;for(var sp=np;sp<rp;sp+=1)ap+=fromCharCode(_d.getUint8(sp));return ap}var REGEXP_DATA_URL_HEAD=/^data:.*,/;function dataURLToArrayBuffer(_d){var np=_d.replace(REGEXP_DATA_URL_HEAD,""),rp=atob(np),ap=new ArrayBuffer(rp.length),sp=new Uint8Array(ap);return forEach(sp,function(lp,up){sp[up]=rp.charCodeAt(up)}),ap}function arrayBufferToDataURL(_d,np){for(var rp=[],ap=8192,sp=new Uint8Array(_d);sp.length>0;)rp.push(fromCharCode.apply(null,toArray(sp.subarray(0,ap)))),sp=sp.subarray(ap);return"data:".concat(np,";base64,").concat(btoa(rp.join("")))}function resetAndGetOrientation(_d){var np=new DataView(_d),rp;try{var ap,sp,lp;if(np.getUint8(0)===255&&np.getUint8(1)===216)for(var up=np.byteLength,cp=2;cp+1<up;){if(np.getUint8(cp)===255&&np.getUint8(cp+1)===225){sp=cp;break}cp+=1}if(sp){var dp=sp+4,fp=sp+10;if(getStringFromCharCode(np,dp,4)==="Exif"){var pp=np.getUint16(fp);if(ap=pp===18761,(ap||pp===19789)&&np.getUint16(fp+2,ap)===42){var hp=np.getUint32(fp+4,ap);hp>=8&&(lp=fp+hp)}}}if(lp){var mp=np.getUint16(lp,ap),gp,vp;for(vp=0;vp<mp;vp+=1)if(gp=lp+vp*12+2,np.getUint16(gp,ap)===274){gp+=8,rp=np.getUint16(gp,ap),np.setUint16(gp,1,ap);break}}}catch{rp=1}return rp}function parseOrientation(_d){var np=0,rp=1,ap=1;switch(_d){case 2:rp=-1;break;case 3:np=-180;break;case 4:ap=-1;break;case 5:np=90,ap=-1;break;case 6:np=90;break;case 7:np=90,rp=-1;break;case 8:np=-90;break}return{rotate:np,scaleX:rp,scaleY:ap}}var render={render:function _d(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function _d(){var np=this.element,rp=this.options,ap=this.container,sp=this.cropper,lp=Number(rp.minContainerWidth),up=Number(rp.minContainerHeight);addClass(sp,CLASS_HIDDEN),removeClass(np,CLASS_HIDDEN);var cp={width:Math.max(ap.offsetWidth,lp>=0?lp:MIN_CONTAINER_WIDTH),height:Math.max(ap.offsetHeight,up>=0?up:MIN_CONTAINER_HEIGHT)};this.containerData=cp,setStyle(sp,{width:cp.width,height:cp.height}),addClass(np,CLASS_HIDDEN),removeClass(sp,CLASS_HIDDEN)},initCanvas:function _d(){var np=this.containerData,rp=this.imageData,ap=this.options.viewMode,sp=Math.abs(rp.rotate)%180===90,lp=sp?rp.naturalHeight:rp.naturalWidth,up=sp?rp.naturalWidth:rp.naturalHeight,cp=lp/up,dp=np.width,fp=np.height;np.height*cp>np.width?ap===3?dp=np.height*cp:fp=np.width/cp:ap===3?fp=np.width/cp:dp=np.height*cp;var pp={aspectRatio:cp,naturalWidth:lp,naturalHeight:up,width:dp,height:fp};this.canvasData=pp,this.limited=ap===1||ap===2,this.limitCanvas(!0,!0),pp.width=Math.min(Math.max(pp.width,pp.minWidth),pp.maxWidth),pp.height=Math.min(Math.max(pp.height,pp.minHeight),pp.maxHeight),pp.left=(np.width-pp.width)/2,pp.top=(np.height-pp.height)/2,pp.oldLeft=pp.left,pp.oldTop=pp.top,this.initialCanvasData=assign({},pp)},limitCanvas:function _d(np,rp){var ap=this.options,sp=this.containerData,lp=this.canvasData,up=this.cropBoxData,cp=ap.viewMode,dp=lp.aspectRatio,fp=this.cropped&&up;if(np){var pp=Number(ap.minCanvasWidth)||0,hp=Number(ap.minCanvasHeight)||0;cp>1?(pp=Math.max(pp,sp.width),hp=Math.max(hp,sp.height),cp===3&&(hp*dp>pp?pp=hp*dp:hp=pp/dp)):cp>0&&(pp?pp=Math.max(pp,fp?up.width:0):hp?hp=Math.max(hp,fp?up.height:0):fp&&(pp=up.width,hp=up.height,hp*dp>pp?pp=hp*dp:hp=pp/dp));var mp=getAdjustedSizes({aspectRatio:dp,width:pp,height:hp});pp=mp.width,hp=mp.height,lp.minWidth=pp,lp.minHeight=hp,lp.maxWidth=1/0,lp.maxHeight=1/0}if(rp)if(cp>(fp?0:1)){var gp=sp.width-lp.width,vp=sp.height-lp.height;lp.minLeft=Math.min(0,gp),lp.minTop=Math.min(0,vp),lp.maxLeft=Math.max(0,gp),lp.maxTop=Math.max(0,vp),fp&&this.limited&&(lp.minLeft=Math.min(up.left,up.left+(up.width-lp.width)),lp.minTop=Math.min(up.top,up.top+(up.height-lp.height)),lp.maxLeft=up.left,lp.maxTop=up.top,cp===2&&(lp.width>=sp.width&&(lp.minLeft=Math.min(0,gp),lp.maxLeft=Math.max(0,gp)),lp.height>=sp.height&&(lp.minTop=Math.min(0,vp),lp.maxTop=Math.max(0,vp))))}else lp.minLeft=-lp.width,lp.minTop=-lp.height,lp.maxLeft=sp.width,lp.maxTop=sp.height},renderCanvas:function _d(np,rp){var ap=this.canvasData,sp=this.imageData;if(rp){var lp=getRotatedSizes({width:sp.naturalWidth*Math.abs(sp.scaleX||1),height:sp.naturalHeight*Math.abs(sp.scaleY||1),degree:sp.rotate||0}),up=lp.width,cp=lp.height,dp=ap.width*(up/ap.naturalWidth),fp=ap.height*(cp/ap.naturalHeight);ap.left-=(dp-ap.width)/2,ap.top-=(fp-ap.height)/2,ap.width=dp,ap.height=fp,ap.aspectRatio=up/cp,ap.naturalWidth=up,ap.naturalHeight=cp,this.limitCanvas(!0,!1)}(ap.width>ap.maxWidth||ap.width<ap.minWidth)&&(ap.left=ap.oldLeft),(ap.height>ap.maxHeight||ap.height<ap.minHeight)&&(ap.top=ap.oldTop),ap.width=Math.min(Math.max(ap.width,ap.minWidth),ap.maxWidth),ap.height=Math.min(Math.max(ap.height,ap.minHeight),ap.maxHeight),this.limitCanvas(!1,!0),ap.left=Math.min(Math.max(ap.left,ap.minLeft),ap.maxLeft),ap.top=Math.min(Math.max(ap.top,ap.minTop),ap.maxTop),ap.oldLeft=ap.left,ap.oldTop=ap.top,setStyle(this.canvas,assign({width:ap.width,height:ap.height},getTransforms({translateX:ap.left,translateY:ap.top}))),this.renderImage(np),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function _d(np){var rp=this.canvasData,ap=this.imageData,sp=ap.naturalWidth*(rp.width/rp.naturalWidth),lp=ap.naturalHeight*(rp.height/rp.naturalHeight);assign(ap,{width:sp,height:lp,left:(rp.width-sp)/2,top:(rp.height-lp)/2}),setStyle(this.image,assign({width:ap.width,height:ap.height},getTransforms(assign({translateX:ap.left,translateY:ap.top},ap)))),np&&this.output()},initCropBox:function _d(){var np=this.options,rp=this.canvasData,ap=np.aspectRatio||np.initialAspectRatio,sp=Number(np.autoCropArea)||.8,lp={width:rp.width,height:rp.height};ap&&(rp.height*ap>rp.width?lp.height=lp.width/ap:lp.width=lp.height*ap),this.cropBoxData=lp,this.limitCropBox(!0,!0),lp.width=Math.min(Math.max(lp.width,lp.minWidth),lp.maxWidth),lp.height=Math.min(Math.max(lp.height,lp.minHeight),lp.maxHeight),lp.width=Math.max(lp.minWidth,lp.width*sp),lp.height=Math.max(lp.minHeight,lp.height*sp),lp.left=rp.left+(rp.width-lp.width)/2,lp.top=rp.top+(rp.height-lp.height)/2,lp.oldLeft=lp.left,lp.oldTop=lp.top,this.initialCropBoxData=assign({},lp)},limitCropBox:function _d(np,rp){var ap=this.options,sp=this.containerData,lp=this.canvasData,up=this.cropBoxData,cp=this.limited,dp=ap.aspectRatio;if(np){var fp=Number(ap.minCropBoxWidth)||0,pp=Number(ap.minCropBoxHeight)||0,hp=cp?Math.min(sp.width,lp.width,lp.width+lp.left,sp.width-lp.left):sp.width,mp=cp?Math.min(sp.height,lp.height,lp.height+lp.top,sp.height-lp.top):sp.height;fp=Math.min(fp,sp.width),pp=Math.min(pp,sp.height),dp&&(fp&&pp?pp*dp>fp?pp=fp/dp:fp=pp*dp:fp?pp=fp/dp:pp&&(fp=pp*dp),mp*dp>hp?mp=hp/dp:hp=mp*dp),up.minWidth=Math.min(fp,hp),up.minHeight=Math.min(pp,mp),up.maxWidth=hp,up.maxHeight=mp}rp&&(cp?(up.minLeft=Math.max(0,lp.left),up.minTop=Math.max(0,lp.top),up.maxLeft=Math.min(sp.width,lp.left+lp.width)-up.width,up.maxTop=Math.min(sp.height,lp.top+lp.height)-up.height):(up.minLeft=0,up.minTop=0,up.maxLeft=sp.width-up.width,up.maxTop=sp.height-up.height))},renderCropBox:function _d(){var np=this.options,rp=this.containerData,ap=this.cropBoxData;(ap.width>ap.maxWidth||ap.width<ap.minWidth)&&(ap.left=ap.oldLeft),(ap.height>ap.maxHeight||ap.height<ap.minHeight)&&(ap.top=ap.oldTop),ap.width=Math.min(Math.max(ap.width,ap.minWidth),ap.maxWidth),ap.height=Math.min(Math.max(ap.height,ap.minHeight),ap.maxHeight),this.limitCropBox(!1,!0),ap.left=Math.min(Math.max(ap.left,ap.minLeft),ap.maxLeft),ap.top=Math.min(Math.max(ap.top,ap.minTop),ap.maxTop),ap.oldLeft=ap.left,ap.oldTop=ap.top,np.movable&&np.cropBoxMovable&&setData(this.face,DATA_ACTION,ap.width>=rp.width&&ap.height>=rp.height?ACTION_MOVE:ACTION_ALL),setStyle(this.cropBox,assign({width:ap.width,height:ap.height},getTransforms({translateX:ap.left,translateY:ap.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function _d(){this.preview(),dispatchEvent(this.element,EVENT_CROP,this.getData())}},preview={initPreview:function _d(){var np=this.element,rp=this.crossOrigin,ap=this.options.preview,sp=rp?this.crossOriginUrl:this.url,lp=np.alt||"The image to preview",up=document.createElement("img");if(rp&&(up.crossOrigin=rp),up.src=sp,up.alt=lp,this.viewBox.appendChild(up),this.viewBoxImage=up,!!ap){var cp=ap;typeof ap=="string"?cp=np.ownerDocument.querySelectorAll(ap):ap.querySelector&&(cp=[ap]),this.previews=cp,forEach(cp,function(dp){var fp=document.createElement("img");setData(dp,DATA_PREVIEW,{width:dp.offsetWidth,height:dp.offsetHeight,html:dp.innerHTML}),rp&&(fp.crossOrigin=rp),fp.src=sp,fp.alt=lp,fp.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',dp.innerHTML="",dp.appendChild(fp)})}},resetPreview:function _d(){forEach(this.previews,function(np){var rp=getData(np,DATA_PREVIEW);setStyle(np,{width:rp.width,height:rp.height}),np.innerHTML=rp.html,removeData(np,DATA_PREVIEW)})},preview:function _d(){var np=this.imageData,rp=this.canvasData,ap=this.cropBoxData,sp=ap.width,lp=ap.height,up=np.width,cp=np.height,dp=ap.left-rp.left-np.left,fp=ap.top-rp.top-np.top;!this.cropped||this.disabled||(setStyle(this.viewBoxImage,assign({width:up,height:cp},getTransforms(assign({translateX:-dp,translateY:-fp},np)))),forEach(this.previews,function(pp){var hp=getData(pp,DATA_PREVIEW),mp=hp.width,gp=hp.height,vp=mp,xp=gp,Sp=1;sp&&(Sp=mp/sp,xp=lp*Sp),lp&&xp>gp&&(Sp=gp/lp,vp=sp*Sp,xp=gp),setStyle(pp,{width:vp,height:xp}),setStyle(pp.getElementsByTagName("img")[0],assign({width:up*Sp,height:cp*Sp},getTransforms(assign({translateX:-dp*Sp,translateY:-fp*Sp},np))))}))}},events$1={bind:function _d(){var np=this.element,rp=this.options,ap=this.cropper;isFunction(rp.cropstart)&&addListener(np,EVENT_CROP_START,rp.cropstart),isFunction(rp.cropmove)&&addListener(np,EVENT_CROP_MOVE,rp.cropmove),isFunction(rp.cropend)&&addListener(np,EVENT_CROP_END,rp.cropend),isFunction(rp.crop)&&addListener(np,EVENT_CROP,rp.crop),isFunction(rp.zoom)&&addListener(np,EVENT_ZOOM,rp.zoom),addListener(ap,EVENT_POINTER_DOWN,this.onCropStart=this.cropStart.bind(this)),rp.zoomable&&rp.zoomOnWheel&&addListener(ap,EVENT_WHEEL,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),rp.toggleDragModeOnDblclick&&addListener(ap,EVENT_DBLCLICK,this.onDblclick=this.dblclick.bind(this)),addListener(np.ownerDocument,EVENT_POINTER_MOVE,this.onCropMove=this.cropMove.bind(this)),addListener(np.ownerDocument,EVENT_POINTER_UP,this.onCropEnd=this.cropEnd.bind(this)),rp.responsive&&addListener(window,EVENT_RESIZE,this.onResize=this.resize.bind(this))},unbind:function _d(){var np=this.element,rp=this.options,ap=this.cropper;isFunction(rp.cropstart)&&removeListener(np,EVENT_CROP_START,rp.cropstart),isFunction(rp.cropmove)&&removeListener(np,EVENT_CROP_MOVE,rp.cropmove),isFunction(rp.cropend)&&removeListener(np,EVENT_CROP_END,rp.cropend),isFunction(rp.crop)&&removeListener(np,EVENT_CROP,rp.crop),isFunction(rp.zoom)&&removeListener(np,EVENT_ZOOM,rp.zoom),removeListener(ap,EVENT_POINTER_DOWN,this.onCropStart),rp.zoomable&&rp.zoomOnWheel&&removeListener(ap,EVENT_WHEEL,this.onWheel,{passive:!1,capture:!0}),rp.toggleDragModeOnDblclick&&removeListener(ap,EVENT_DBLCLICK,this.onDblclick),removeListener(np.ownerDocument,EVENT_POINTER_MOVE,this.onCropMove),removeListener(np.ownerDocument,EVENT_POINTER_UP,this.onCropEnd),rp.responsive&&removeListener(window,EVENT_RESIZE,this.onResize)}},handlers={resize:function _d(){if(!this.disabled){var np=this.options,rp=this.container,ap=this.containerData,sp=rp.offsetWidth/ap.width,lp=rp.offsetHeight/ap.height,up=Math.abs(sp-1)>Math.abs(lp-1)?sp:lp;if(up!==1){var cp,dp;np.restore&&(cp=this.getCanvasData(),dp=this.getCropBoxData()),this.render(),np.restore&&(this.setCanvasData(forEach(cp,function(fp,pp){cp[pp]=fp*up})),this.setCropBoxData(forEach(dp,function(fp,pp){dp[pp]=fp*up})))}}},dblclick:function _d(){this.disabled||this.options.dragMode===DRAG_MODE_NONE||this.setDragMode(hasClass(this.dragBox,CLASS_CROP)?DRAG_MODE_MOVE:DRAG_MODE_CROP)},wheel:function _d(np){var rp=this,ap=Number(this.options.wheelZoomRatio)||.1,sp=1;this.disabled||(np.preventDefault(),!this.wheeling&&(this.wheeling=!0,setTimeout(function(){rp.wheeling=!1},50),np.deltaY?sp=np.deltaY>0?1:-1:np.wheelDelta?sp=-np.wheelDelta/120:np.detail&&(sp=np.detail>0?1:-1),this.zoom(-sp*ap,np)))},cropStart:function _d(np){var rp=np.buttons,ap=np.button;if(!(this.disabled||(np.type==="mousedown"||np.type==="pointerdown"&&np.pointerType==="mouse")&&(isNumber(rp)&&rp!==1||isNumber(ap)&&ap!==0||np.ctrlKey))){var sp=this.options,lp=this.pointers,up;np.changedTouches?forEach(np.changedTouches,function(cp){lp[cp.identifier]=getPointer(cp)}):lp[np.pointerId||0]=getPointer(np),Object.keys(lp).length>1&&sp.zoomable&&sp.zoomOnTouch?up=ACTION_ZOOM:up=getData(np.target,DATA_ACTION),REGEXP_ACTIONS.test(up)&&dispatchEvent(this.element,EVENT_CROP_START,{originalEvent:np,action:up})!==!1&&(np.preventDefault(),this.action=up,this.cropping=!1,up===ACTION_CROP&&(this.cropping=!0,addClass(this.dragBox,CLASS_MODAL)))}},cropMove:function _d(np){var rp=this.action;if(!(this.disabled||!rp)){var ap=this.pointers;np.preventDefault(),dispatchEvent(this.element,EVENT_CROP_MOVE,{originalEvent:np,action:rp})!==!1&&(np.changedTouches?forEach(np.changedTouches,function(sp){assign(ap[sp.identifier]||{},getPointer(sp,!0))}):assign(ap[np.pointerId||0]||{},getPointer(np,!0)),this.change(np))}},cropEnd:function _d(np){if(!this.disabled){var rp=this.action,ap=this.pointers;np.changedTouches?forEach(np.changedTouches,function(sp){delete ap[sp.identifier]}):delete ap[np.pointerId||0],rp&&(np.preventDefault(),Object.keys(ap).length||(this.action=""),this.cropping&&(this.cropping=!1,toggleClass(this.dragBox,CLASS_MODAL,this.cropped&&this.options.modal)),dispatchEvent(this.element,EVENT_CROP_END,{originalEvent:np,action:rp}))}}},change={change:function _d(np){var rp=this.options,ap=this.canvasData,sp=this.containerData,lp=this.cropBoxData,up=this.pointers,cp=this.action,dp=rp.aspectRatio,fp=lp.left,pp=lp.top,hp=lp.width,mp=lp.height,gp=fp+hp,vp=pp+mp,xp=0,Sp=0,yp=sp.width,bp=sp.height,Ep=!0,wp;!dp&&np.shiftKey&&(dp=hp&&mp?hp/mp:1),this.limited&&(xp=lp.minLeft,Sp=lp.minTop,yp=xp+Math.min(sp.width,ap.width,ap.left+ap.width),bp=Sp+Math.min(sp.height,ap.height,ap.top+ap.height));var _p=up[Object.keys(up)[0]],Cp={x:_p.endX-_p.startX,y:_p.endY-_p.startY},$p=function(Pp){switch(Pp){case ACTION_EAST:gp+Cp.x>yp&&(Cp.x=yp-gp);break;case ACTION_WEST:fp+Cp.x<xp&&(Cp.x=xp-fp);break;case ACTION_NORTH:pp+Cp.y<Sp&&(Cp.y=Sp-pp);break;case ACTION_SOUTH:vp+Cp.y>bp&&(Cp.y=bp-vp);break}};switch(cp){case ACTION_ALL:fp+=Cp.x,pp+=Cp.y;break;case ACTION_EAST:if(Cp.x>=0&&(gp>=yp||dp&&(pp<=Sp||vp>=bp))){Ep=!1;break}$p(ACTION_EAST),hp+=Cp.x,hp<0&&(cp=ACTION_WEST,hp=-hp,fp-=hp),dp&&(mp=hp/dp,pp+=(lp.height-mp)/2);break;case ACTION_NORTH:if(Cp.y<=0&&(pp<=Sp||dp&&(fp<=xp||gp>=yp))){Ep=!1;break}$p(ACTION_NORTH),mp-=Cp.y,pp+=Cp.y,mp<0&&(cp=ACTION_SOUTH,mp=-mp,pp-=mp),dp&&(hp=mp*dp,fp+=(lp.width-hp)/2);break;case ACTION_WEST:if(Cp.x<=0&&(fp<=xp||dp&&(pp<=Sp||vp>=bp))){Ep=!1;break}$p(ACTION_WEST),hp-=Cp.x,fp+=Cp.x,hp<0&&(cp=ACTION_EAST,hp=-hp,fp-=hp),dp&&(mp=hp/dp,pp+=(lp.height-mp)/2);break;case ACTION_SOUTH:if(Cp.y>=0&&(vp>=bp||dp&&(fp<=xp||gp>=yp))){Ep=!1;break}$p(ACTION_SOUTH),mp+=Cp.y,mp<0&&(cp=ACTION_NORTH,mp=-mp,pp-=mp),dp&&(hp=mp*dp,fp+=(lp.width-hp)/2);break;case ACTION_NORTH_EAST:if(dp){if(Cp.y<=0&&(pp<=Sp||gp>=yp)){Ep=!1;break}$p(ACTION_NORTH),mp-=Cp.y,pp+=Cp.y,hp=mp*dp}else $p(ACTION_NORTH),$p(ACTION_EAST),Cp.x>=0?gp<yp?hp+=Cp.x:Cp.y<=0&&pp<=Sp&&(Ep=!1):hp+=Cp.x,Cp.y<=0?pp>Sp&&(mp-=Cp.y,pp+=Cp.y):(mp-=Cp.y,pp+=Cp.y);hp<0&&mp<0?(cp=ACTION_SOUTH_WEST,mp=-mp,hp=-hp,pp-=mp,fp-=hp):hp<0?(cp=ACTION_NORTH_WEST,hp=-hp,fp-=hp):mp<0&&(cp=ACTION_SOUTH_EAST,mp=-mp,pp-=mp);break;case ACTION_NORTH_WEST:if(dp){if(Cp.y<=0&&(pp<=Sp||fp<=xp)){Ep=!1;break}$p(ACTION_NORTH),mp-=Cp.y,pp+=Cp.y,hp=mp*dp,fp+=lp.width-hp}else $p(ACTION_NORTH),$p(ACTION_WEST),Cp.x<=0?fp>xp?(hp-=Cp.x,fp+=Cp.x):Cp.y<=0&&pp<=Sp&&(Ep=!1):(hp-=Cp.x,fp+=Cp.x),Cp.y<=0?pp>Sp&&(mp-=Cp.y,pp+=Cp.y):(mp-=Cp.y,pp+=Cp.y);hp<0&&mp<0?(cp=ACTION_SOUTH_EAST,mp=-mp,hp=-hp,pp-=mp,fp-=hp):hp<0?(cp=ACTION_NORTH_EAST,hp=-hp,fp-=hp):mp<0&&(cp=ACTION_SOUTH_WEST,mp=-mp,pp-=mp);break;case ACTION_SOUTH_WEST:if(dp){if(Cp.x<=0&&(fp<=xp||vp>=bp)){Ep=!1;break}$p(ACTION_WEST),hp-=Cp.x,fp+=Cp.x,mp=hp/dp}else $p(ACTION_SOUTH),$p(ACTION_WEST),Cp.x<=0?fp>xp?(hp-=Cp.x,fp+=Cp.x):Cp.y>=0&&vp>=bp&&(Ep=!1):(hp-=Cp.x,fp+=Cp.x),Cp.y>=0?vp<bp&&(mp+=Cp.y):mp+=Cp.y;hp<0&&mp<0?(cp=ACTION_NORTH_EAST,mp=-mp,hp=-hp,pp-=mp,fp-=hp):hp<0?(cp=ACTION_SOUTH_EAST,hp=-hp,fp-=hp):mp<0&&(cp=ACTION_NORTH_WEST,mp=-mp,pp-=mp);break;case ACTION_SOUTH_EAST:if(dp){if(Cp.x>=0&&(gp>=yp||vp>=bp)){Ep=!1;break}$p(ACTION_EAST),hp+=Cp.x,mp=hp/dp}else $p(ACTION_SOUTH),$p(ACTION_EAST),Cp.x>=0?gp<yp?hp+=Cp.x:Cp.y>=0&&vp>=bp&&(Ep=!1):hp+=Cp.x,Cp.y>=0?vp<bp&&(mp+=Cp.y):mp+=Cp.y;hp<0&&mp<0?(cp=ACTION_NORTH_WEST,mp=-mp,hp=-hp,pp-=mp,fp-=hp):hp<0?(cp=ACTION_SOUTH_WEST,hp=-hp,fp-=hp):mp<0&&(cp=ACTION_NORTH_EAST,mp=-mp,pp-=mp);break;case ACTION_MOVE:this.move(Cp.x,Cp.y),Ep=!1;break;case ACTION_ZOOM:this.zoom(getMaxZoomRatio(up),np),Ep=!1;break;case ACTION_CROP:if(!Cp.x||!Cp.y){Ep=!1;break}wp=getOffset(this.cropper),fp=_p.startX-wp.left,pp=_p.startY-wp.top,hp=lp.minWidth,mp=lp.minHeight,Cp.x>0?cp=Cp.y>0?ACTION_SOUTH_EAST:ACTION_NORTH_EAST:Cp.x<0&&(fp-=hp,cp=Cp.y>0?ACTION_SOUTH_WEST:ACTION_NORTH_WEST),Cp.y<0&&(pp-=mp),this.cropped||(removeClass(this.cropBox,CLASS_HIDDEN),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0));break}Ep&&(lp.width=hp,lp.height=mp,lp.left=fp,lp.top=pp,this.action=cp,this.renderCropBox()),forEach(up,function(Rp){Rp.startX=Rp.endX,Rp.startY=Rp.endY})}},methods={crop:function _d(){return this.ready&&!this.cropped&&!this.disabled&&(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&addClass(this.dragBox,CLASS_MODAL),removeClass(this.cropBox,CLASS_HIDDEN),this.setCropBoxData(this.initialCropBoxData)),this},reset:function _d(){return this.ready&&!this.disabled&&(this.imageData=assign({},this.initialImageData),this.canvasData=assign({},this.initialCanvasData),this.cropBoxData=assign({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function _d(){return this.cropped&&!this.disabled&&(assign(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),removeClass(this.dragBox,CLASS_MODAL),addClass(this.cropBox,CLASS_HIDDEN)),this},replace:function _d(np){var rp=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return!this.disabled&&np&&(this.isImg&&(this.element.src=np),rp?(this.url=np,this.image.src=np,this.ready&&(this.viewBoxImage.src=np,forEach(this.previews,function(ap){ap.getElementsByTagName("img")[0].src=np}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(np))),this},enable:function _d(){return this.ready&&this.disabled&&(this.disabled=!1,removeClass(this.cropper,CLASS_DISABLED)),this},disable:function _d(){return this.ready&&!this.disabled&&(this.disabled=!0,addClass(this.cropper,CLASS_DISABLED)),this},destroy:function _d(){var np=this.element;return np[NAMESPACE]?(np[NAMESPACE]=void 0,this.isImg&&this.replaced&&(np.src=this.originalUrl),this.uncreate(),this):this},move:function _d(np){var rp=arguments.length>1&&arguments[1]!==void 0?arguments[1]:np,ap=this.canvasData,sp=ap.left,lp=ap.top;return this.moveTo(isUndefined(np)?np:sp+Number(np),isUndefined(rp)?rp:lp+Number(rp))},moveTo:function _d(np){var rp=arguments.length>1&&arguments[1]!==void 0?arguments[1]:np,ap=this.canvasData,sp=!1;return np=Number(np),rp=Number(rp),this.ready&&!this.disabled&&this.options.movable&&(isNumber(np)&&(ap.left=np,sp=!0),isNumber(rp)&&(ap.top=rp,sp=!0),sp&&this.renderCanvas(!0)),this},zoom:function _d(np,rp){var ap=this.canvasData;return np=Number(np),np<0?np=1/(1-np):np=1+np,this.zoomTo(ap.width*np/ap.naturalWidth,null,rp)},zoomTo:function _d(np,rp,ap){var sp=this.options,lp=this.canvasData,up=lp.width,cp=lp.height,dp=lp.naturalWidth,fp=lp.naturalHeight;if(np=Number(np),np>=0&&this.ready&&!this.disabled&&sp.zoomable){var pp=dp*np,hp=fp*np;if(dispatchEvent(this.element,EVENT_ZOOM,{ratio:np,oldRatio:up/dp,originalEvent:ap})===!1)return this;if(ap){var mp=this.pointers,gp=getOffset(this.cropper),vp=mp&&Object.keys(mp).length?getPointersCenter(mp):{pageX:ap.pageX,pageY:ap.pageY};lp.left-=(pp-up)*((vp.pageX-gp.left-lp.left)/up),lp.top-=(hp-cp)*((vp.pageY-gp.top-lp.top)/cp)}else isPlainObject(rp)&&isNumber(rp.x)&&isNumber(rp.y)?(lp.left-=(pp-up)*((rp.x-lp.left)/up),lp.top-=(hp-cp)*((rp.y-lp.top)/cp)):(lp.left-=(pp-up)/2,lp.top-=(hp-cp)/2);lp.width=pp,lp.height=hp,this.renderCanvas(!0)}return this},rotate:function _d(np){return this.rotateTo((this.imageData.rotate||0)+Number(np))},rotateTo:function _d(np){return np=Number(np),isNumber(np)&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=np%360,this.renderCanvas(!0,!0)),this},scaleX:function _d(np){var rp=this.imageData.scaleY;return this.scale(np,isNumber(rp)?rp:1)},scaleY:function _d(np){var rp=this.imageData.scaleX;return this.scale(isNumber(rp)?rp:1,np)},scale:function _d(np){var rp=arguments.length>1&&arguments[1]!==void 0?arguments[1]:np,ap=this.imageData,sp=!1;return np=Number(np),rp=Number(rp),this.ready&&!this.disabled&&this.options.scalable&&(isNumber(np)&&(ap.scaleX=np,sp=!0),isNumber(rp)&&(ap.scaleY=rp,sp=!0),sp&&this.renderCanvas(!0,!0)),this},getData:function _d(){var np=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,rp=this.options,ap=this.imageData,sp=this.canvasData,lp=this.cropBoxData,up;if(this.ready&&this.cropped){up={x:lp.left-sp.left,y:lp.top-sp.top,width:lp.width,height:lp.height};var cp=ap.width/ap.naturalWidth;if(forEach(up,function(pp,hp){up[hp]=pp/cp}),np){var dp=Math.round(up.y+up.height),fp=Math.round(up.x+up.width);up.x=Math.round(up.x),up.y=Math.round(up.y),up.width=fp-up.x,up.height=dp-up.y}}else up={x:0,y:0,width:0,height:0};return rp.rotatable&&(up.rotate=ap.rotate||0),rp.scalable&&(up.scaleX=ap.scaleX||1,up.scaleY=ap.scaleY||1),up},setData:function _d(np){var rp=this.options,ap=this.imageData,sp=this.canvasData,lp={};if(this.ready&&!this.disabled&&isPlainObject(np)){var up=!1;rp.rotatable&&isNumber(np.rotate)&&np.rotate!==ap.rotate&&(ap.rotate=np.rotate,up=!0),rp.scalable&&(isNumber(np.scaleX)&&np.scaleX!==ap.scaleX&&(ap.scaleX=np.scaleX,up=!0),isNumber(np.scaleY)&&np.scaleY!==ap.scaleY&&(ap.scaleY=np.scaleY,up=!0)),up&&this.renderCanvas(!0,!0);var cp=ap.width/ap.naturalWidth;isNumber(np.x)&&(lp.left=np.x*cp+sp.left),isNumber(np.y)&&(lp.top=np.y*cp+sp.top),isNumber(np.width)&&(lp.width=np.width*cp),isNumber(np.height)&&(lp.height=np.height*cp),this.setCropBoxData(lp)}return this},getContainerData:function _d(){return this.ready?assign({},this.containerData):{}},getImageData:function _d(){return this.sized?assign({},this.imageData):{}},getCanvasData:function _d(){var np=this.canvasData,rp={};return this.ready&&forEach(["left","top","width","height","naturalWidth","naturalHeight"],function(ap){rp[ap]=np[ap]}),rp},setCanvasData:function _d(np){var rp=this.canvasData,ap=rp.aspectRatio;return this.ready&&!this.disabled&&isPlainObject(np)&&(isNumber(np.left)&&(rp.left=np.left),isNumber(np.top)&&(rp.top=np.top),isNumber(np.width)?(rp.width=np.width,rp.height=np.width/ap):isNumber(np.height)&&(rp.height=np.height,rp.width=np.height*ap),this.renderCanvas(!0)),this},getCropBoxData:function _d(){var np=this.cropBoxData,rp;return this.ready&&this.cropped&&(rp={left:np.left,top:np.top,width:np.width,height:np.height}),rp||{}},setCropBoxData:function _d(np){var rp=this.cropBoxData,ap=this.options.aspectRatio,sp,lp;return this.ready&&this.cropped&&!this.disabled&&isPlainObject(np)&&(isNumber(np.left)&&(rp.left=np.left),isNumber(np.top)&&(rp.top=np.top),isNumber(np.width)&&np.width!==rp.width&&(sp=!0,rp.width=np.width),isNumber(np.height)&&np.height!==rp.height&&(lp=!0,rp.height=np.height),ap&&(sp?rp.height=rp.width/ap:lp&&(rp.width=rp.height*ap)),this.renderCropBox()),this},getCroppedCanvas:function _d(){var np=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var rp=this.canvasData,ap=getSourceCanvas(this.image,this.imageData,rp,np);if(!this.cropped)return ap;var sp=this.getData(np.rounded),lp=sp.x,up=sp.y,cp=sp.width,dp=sp.height,fp=ap.width/Math.floor(rp.naturalWidth);fp!==1&&(lp*=fp,up*=fp,cp*=fp,dp*=fp);var pp=cp/dp,hp=getAdjustedSizes({aspectRatio:pp,width:np.maxWidth||1/0,height:np.maxHeight||1/0}),mp=getAdjustedSizes({aspectRatio:pp,width:np.minWidth||0,height:np.minHeight||0},"cover"),gp=getAdjustedSizes({aspectRatio:pp,width:np.width||(fp!==1?ap.width:cp),height:np.height||(fp!==1?ap.height:dp)}),vp=gp.width,xp=gp.height;vp=Math.min(hp.width,Math.max(mp.width,vp)),xp=Math.min(hp.height,Math.max(mp.height,xp));var Sp=document.createElement("canvas"),yp=Sp.getContext("2d");Sp.width=normalizeDecimalNumber(vp),Sp.height=normalizeDecimalNumber(xp),yp.fillStyle=np.fillColor||"transparent",yp.fillRect(0,0,vp,xp);var bp=np.imageSmoothingEnabled,Ep=bp===void 0?!0:bp,wp=np.imageSmoothingQuality;yp.imageSmoothingEnabled=Ep,wp&&(yp.imageSmoothingQuality=wp);var _p=ap.width,Cp=ap.height,$p=lp,Rp=up,Pp,Op,jp,Mp,Ap,Dp;$p<=-cp||$p>_p?($p=0,Pp=0,jp=0,Ap=0):$p<=0?(jp=-$p,$p=0,Pp=Math.min(_p,cp+$p),Ap=Pp):$p<=_p&&(jp=0,Pp=Math.min(cp,_p-$p),Ap=Pp),Pp<=0||Rp<=-dp||Rp>Cp?(Rp=0,Op=0,Mp=0,Dp=0):Rp<=0?(Mp=-Rp,Rp=0,Op=Math.min(Cp,dp+Rp),Dp=Op):Rp<=Cp&&(Mp=0,Op=Math.min(dp,Cp-Rp),Dp=Op);var Fp=[$p,Rp,Pp,Op];if(Ap>0&&Dp>0){var Ip=vp/cp;Fp.push(jp*Ip,Mp*Ip,Ap*Ip,Dp*Ip)}return yp.drawImage.apply(yp,[ap].concat(_toConsumableArray(Fp.map(function(kp){return Math.floor(normalizeDecimalNumber(kp))})))),Sp},setAspectRatio:function _d(np){var rp=this.options;return!this.disabled&&!isUndefined(np)&&(rp.aspectRatio=Math.max(0,np)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function _d(np){var rp=this.options,ap=this.dragBox,sp=this.face;if(this.ready&&!this.disabled){var lp=np===DRAG_MODE_CROP,up=rp.movable&&np===DRAG_MODE_MOVE;np=lp||up?np:DRAG_MODE_NONE,rp.dragMode=np,setData(ap,DATA_ACTION,np),toggleClass(ap,CLASS_CROP,lp),toggleClass(ap,CLASS_MOVE,up),rp.cropBoxMovable||(setData(sp,DATA_ACTION,np),toggleClass(sp,CLASS_CROP,lp),toggleClass(sp,CLASS_MOVE,up))}return this}},AnotherCropper=WINDOW.Cropper,Cropper=function(){function _d(np){var rp=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(_classCallCheck(this,_d),!np||!REGEXP_TAG_NAME.test(np.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=np,this.options=assign({},DEFAULTS,isPlainObject(rp)&&rp),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return _createClass(_d,[{key:"init",value:function(){var rp=this.element,ap=rp.tagName.toLowerCase(),sp;if(!rp[NAMESPACE]){if(rp[NAMESPACE]=this,ap==="img"){if(this.isImg=!0,sp=rp.getAttribute("src")||"",this.originalUrl=sp,!sp)return;sp=rp.src}else ap==="canvas"&&window.HTMLCanvasElement&&(sp=rp.toDataURL());this.load(sp)}}},{key:"load",value:function(rp){var ap=this;if(rp){this.url=rp,this.imageData={};var sp=this.element,lp=this.options;if(!lp.rotatable&&!lp.scalable&&(lp.checkOrientation=!1),!lp.checkOrientation||!window.ArrayBuffer){this.clone();return}if(REGEXP_DATA_URL.test(rp)){REGEXP_DATA_URL_JPEG.test(rp)?this.read(dataURLToArrayBuffer(rp)):this.clone();return}var up=new XMLHttpRequest,cp=this.clone.bind(this);this.reloading=!0,this.xhr=up,up.onabort=cp,up.onerror=cp,up.ontimeout=cp,up.onprogress=function(){up.getResponseHeader("content-type")!==MIME_TYPE_JPEG&&up.abort()},up.onload=function(){ap.read(up.response)},up.onloadend=function(){ap.reloading=!1,ap.xhr=null},lp.checkCrossOrigin&&isCrossOriginURL(rp)&&sp.crossOrigin&&(rp=addTimestamp(rp)),up.open("GET",rp,!0),up.responseType="arraybuffer",up.withCredentials=sp.crossOrigin==="use-credentials",up.send()}}},{key:"read",value:function(rp){var ap=this.options,sp=this.imageData,lp=resetAndGetOrientation(rp),up=0,cp=1,dp=1;if(lp>1){this.url=arrayBufferToDataURL(rp,MIME_TYPE_JPEG);var fp=parseOrientation(lp);up=fp.rotate,cp=fp.scaleX,dp=fp.scaleY}ap.rotatable&&(sp.rotate=up),ap.scalable&&(sp.scaleX=cp,sp.scaleY=dp),this.clone()}},{key:"clone",value:function(){var rp=this.element,ap=this.url,sp=rp.crossOrigin,lp=ap;this.options.checkCrossOrigin&&isCrossOriginURL(ap)&&(sp||(sp="anonymous"),lp=addTimestamp(ap)),this.crossOrigin=sp,this.crossOriginUrl=lp;var up=document.createElement("img");sp&&(up.crossOrigin=sp),up.src=lp||ap,up.alt=rp.alt||"The image to crop",this.image=up,up.onload=this.start.bind(this),up.onerror=this.stop.bind(this),addClass(up,CLASS_HIDE),rp.parentNode.insertBefore(up,rp.nextSibling)}},{key:"start",value:function(){var rp=this,ap=this.image;ap.onload=null,ap.onerror=null,this.sizing=!0;var sp=WINDOW.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(WINDOW.navigator.userAgent),lp=function(fp,pp){assign(rp.imageData,{naturalWidth:fp,naturalHeight:pp,aspectRatio:fp/pp}),rp.initialImageData=assign({},rp.imageData),rp.sizing=!1,rp.sized=!0,rp.build()};if(ap.naturalWidth&&!sp){lp(ap.naturalWidth,ap.naturalHeight);return}var up=document.createElement("img"),cp=document.body||document.documentElement;this.sizingImage=up,up.onload=function(){lp(up.width,up.height),sp||cp.removeChild(up)},up.src=ap.src,sp||(up.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",cp.appendChild(up))}},{key:"stop",value:function(){var rp=this.image;rp.onload=null,rp.onerror=null,rp.parentNode.removeChild(rp),this.image=null}},{key:"build",value:function(){if(!(!this.sized||this.ready)){var rp=this.element,ap=this.options,sp=this.image,lp=rp.parentNode,up=document.createElement("div");up.innerHTML=TEMPLATE;var cp=up.querySelector(".".concat(NAMESPACE,"-container")),dp=cp.querySelector(".".concat(NAMESPACE,"-canvas")),fp=cp.querySelector(".".concat(NAMESPACE,"-drag-box")),pp=cp.querySelector(".".concat(NAMESPACE,"-crop-box")),hp=pp.querySelector(".".concat(NAMESPACE,"-face"));this.container=lp,this.cropper=cp,this.canvas=dp,this.dragBox=fp,this.cropBox=pp,this.viewBox=cp.querySelector(".".concat(NAMESPACE,"-view-box")),this.face=hp,dp.appendChild(sp),addClass(rp,CLASS_HIDDEN),lp.insertBefore(cp,rp.nextSibling),removeClass(sp,CLASS_HIDE),this.initPreview(),this.bind(),ap.initialAspectRatio=Math.max(0,ap.initialAspectRatio)||NaN,ap.aspectRatio=Math.max(0,ap.aspectRatio)||NaN,ap.viewMode=Math.max(0,Math.min(3,Math.round(ap.viewMode)))||0,addClass(pp,CLASS_HIDDEN),ap.guides||addClass(pp.getElementsByClassName("".concat(NAMESPACE,"-dashed")),CLASS_HIDDEN),ap.center||addClass(pp.getElementsByClassName("".concat(NAMESPACE,"-center")),CLASS_HIDDEN),ap.background&&addClass(cp,"".concat(NAMESPACE,"-bg")),ap.highlight||addClass(hp,CLASS_INVISIBLE),ap.cropBoxMovable&&(addClass(hp,CLASS_MOVE),setData(hp,DATA_ACTION,ACTION_ALL)),ap.cropBoxResizable||(addClass(pp.getElementsByClassName("".concat(NAMESPACE,"-line")),CLASS_HIDDEN),addClass(pp.getElementsByClassName("".concat(NAMESPACE,"-point")),CLASS_HIDDEN)),this.render(),this.ready=!0,this.setDragMode(ap.dragMode),ap.autoCrop&&this.crop(),this.setData(ap.data),isFunction(ap.ready)&&addListener(rp,EVENT_READY,ap.ready,{once:!0}),dispatchEvent(rp,EVENT_READY)}}},{key:"unbuild",value:function(){if(this.ready){this.ready=!1,this.unbind(),this.resetPreview();var rp=this.cropper.parentNode;rp&&rp.removeChild(this.cropper),removeClass(this.element,CLASS_HIDDEN)}}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=AnotherCropper,_d}},{key:"setDefaults",value:function(rp){assign(DEFAULTS,isPlainObject(rp)&&rp)}}]),_d}();assign(Cropper.prototype,render,preview,events$1,handlers,change,methods);var n=function(){return n=Object.assign||function(_d){for(var np,rp=1,ap=arguments.length;rp<ap;rp++)for(var sp in np=arguments[rp])Object.prototype.hasOwnProperty.call(np,sp)&&(_d[sp]=np[sp]);return _d},n.apply(this,arguments)};function a(_d,np){var rp={};for(var ap in _d)Object.prototype.hasOwnProperty.call(_d,ap)&&np.indexOf(ap)<0&&(rp[ap]=_d[ap]);if(_d!=null&&typeof Object.getOwnPropertySymbols=="function"){var sp=0;for(ap=Object.getOwnPropertySymbols(_d);sp<ap.length;sp++)np.indexOf(ap[sp])<0&&Object.prototype.propertyIsEnumerable.call(_d,ap[sp])&&(rp[ap[sp]]=_d[ap[sp]])}return rp}var c=["aspectRatio","autoCrop","autoCropArea","background","center","checkCrossOrigin","checkOrientation","cropBoxMovable","cropBoxResizable","data","dragMode","guides","highlight","initialAspectRatio","minCanvasHeight","minCanvasWidth","minContainerHeight","minContainerWidth","minCropBoxHeight","minCropBoxWidth","modal","movable","preview","responsive","restore","rotatable","scalable","toggleDragModeOnDblclick","viewMode","wheelZoomRatio","zoomOnTouch","zoomOnWheel","zoomable","cropstart","cropmove","cropend","crop","zoom","ready"],i={opacity:0,maxWidth:"100%"},l=React.forwardRef(function(_d,np){var rp=a(_d,[]),ap=rp.dragMode,sp=ap===void 0?"crop":ap,lp=rp.src,up=rp.style,cp=rp.className,dp=rp.crossOrigin,fp=rp.scaleX,pp=rp.scaleY,hp=rp.enable,mp=rp.zoomTo,gp=rp.rotateTo,vp=rp.alt,xp=vp===void 0?"picture":vp,Sp=rp.ready,yp=rp.onInitialized,bp=a(rp,["dragMode","src","style","className","crossOrigin","scaleX","scaleY","enable","zoomTo","rotateTo","alt","ready","onInitialized"]),Ep={scaleY:pp,scaleX:fp,enable:hp,zoomTo:mp,rotateTo:gp},wp=function(){for(var Cp=[],$p=0;$p<arguments.length;$p++)Cp[$p]=arguments[$p];var Rp=reactExports.useRef(null);return React.useEffect(function(){Cp.forEach(function(Pp){Pp&&(typeof Pp=="function"?Pp(Rp.current):Pp.current=Rp.current)})},[Cp]),Rp}(np,reactExports.useRef(null));reactExports.useEffect(function(){var Cp;!((Cp=wp.current)===null||Cp===void 0)&&Cp.cropper&&typeof mp=="number"&&wp.current.cropper.zoomTo(mp)},[rp.zoomTo]),reactExports.useEffect(function(){var Cp;!((Cp=wp.current)===null||Cp===void 0)&&Cp.cropper&&lp!==void 0&&wp.current.cropper.reset().clear().replace(lp)},[lp]),reactExports.useEffect(function(){if(wp.current!==null){var Cp=new Cropper(wp.current,n(n({dragMode:sp},bp),{ready:function($p){$p.currentTarget!==null&&function(Rp,Pp){Pp===void 0&&(Pp={});var Op=Pp.enable,jp=Op===void 0||Op,Mp=Pp.scaleX,Ap=Mp===void 0?1:Mp,Dp=Pp.scaleY,Fp=Dp===void 0?1:Dp,Ip=Pp.zoomTo,kp=Ip===void 0?0:Ip,Tp=Pp.rotateTo;jp?Rp.enable():Rp.disable(),Rp.scaleX(Ap),Rp.scaleY(Fp),Tp!==void 0&&Rp.rotateTo(Tp),kp>0&&Rp.zoomTo(kp)}($p.currentTarget.cropper,Ep),Sp&&Sp($p)}}));yp&&yp(Cp)}return function(){var $p,Rp;(Rp=($p=wp.current)===null||$p===void 0?void 0:$p.cropper)===null||Rp===void 0||Rp.destroy()}},[wp]);var _p=function(Cp){return c.reduce(function($p,Rp){var Pp=$p,Op=Rp;return Pp[Op],a(Pp,[typeof Op=="symbol"?Op:Op+""])},Cp)}(n(n({},bp),{crossOrigin:dp,src:lp,alt:xp}));return React.createElement("div",{style:up,className:cp},React.createElement("img",n({},_p,{style:i,ref:wp})))});const Aspect=({cropperRef:_d})=>{const[np,rp]=reactExports.useState(1);return jsxRuntimeExports.jsxs("div",{className:"Aspect",children:[jsxRuntimeExports.jsxs("div",{className:"Aspect_header",children:[jsxRuntimeExports.jsx("div",{className:`Aspect_length ${np&&"active"}`,onClick:()=>rp(1),children:jsxRuntimeExports.jsx(FaCheck,{style:{color:"#191919"}})}),jsxRuntimeExports.jsx("div",{className:`Aspect_width ${!np&&"active"}`,onClick:()=>rp(0),children:jsxRuntimeExports.jsx(FaCheck,{style:{color:"#191919"}})})]}),jsxRuntimeExports.jsxs("div",{className:"Aspect_body",children:[jsxRuntimeExports.jsx("button",{onClick:()=>_d.current.cropper.setAspectRatio(NaN),children:"원본"}),jsxRuntimeExports.jsx("button",{onClick:()=>_d.current.cropper.setAspectRatio(1),children:"1:1"}),np?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("button",{onClick:()=>_d.current.cropper.setAspectRatio(3/4),children:"3:4"}),jsxRuntimeExports.jsx("button",{onClick:()=>_d.current.cropper.setAspectRatio(9/16),children:"9:16"})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("button",{onClick:()=>_d.current.cropper.setAspectRatio(4/3),children:"4:3"}),jsxRuntimeExports.jsx("button",{onClick:()=>_d.current.cropper.setAspectRatio(16/9),children:"16:9"})]})]})]})};function ImageEditPage(){const _d=useLocation(),np=useNavigate(),rp=_d.state.value,ap=reactExports.useRef(null);console.log(rp);const sp=()=>{var lp;np("/fish/image/result",{replace:!0,state:{value:(lp=ap.current)==null?void 0:lp.cropper.getCroppedCanvas().toDataURL()}})};return jsxRuntimeExports.jsxs("div",{className:"Demo",children:[jsxRuntimeExports.jsx(Header,{filter:"invert(1)"}),jsxRuntimeExports.jsx("div",{className:"crop",onClick:sp,children:"자르기"}),jsxRuntimeExports.jsx("div",{className:"Demo_body",children:jsxRuntimeExports.jsx(l,{ref:ap,style:{height:"100%",width:"100%"},dragMode:"none",viewMode:1,highlight:!1,background:!1,autoCropArea:1,minCropBoxWidth:150,minCropBoxHeight:150,src:rp})}),jsxRuntimeExports.jsx("div",{className:"Demo_footer",children:jsxRuntimeExports.jsx(Aspect,{cropperRef:ap})})]})}const ban="/assets/ban-4CuT9-0x.png",FishBookList=({fishdata:_d,type:np})=>{console.log(_d);const[rp,ap]=reactExports.useState([np]),[sp,lp]=reactExports.useState(!1),up=cp=>{const dp=cp+"",fp=dp.substring(5,7),pp=dp.substring(8,11);return fp+"/"+pp};return reactExports.useEffect(()=>{if(np==0)ap(_d);else if(np==1){const cp=_d.filter(dp=>dp.fishType==="FRESH_WATER");ap(cp)}else if(np==2){const cp=_d.filter(dp=>dp.fishType==="SEA");ap(cp)}},[np]),jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("ul",{className:"fish-list",children:rp.map(cp=>jsxRuntimeExports.jsx(Link,{to:`/fishbook/${cp.id}`,children:jsxRuntimeExports.jsxs("li",{className:"fish-item view-two blue-bd",children:[jsxRuntimeExports.jsx("div",{className:"fish-profile"}),jsxRuntimeExports.jsx("div",{className:"fish-profile-type blue-fc",children:cp.fishType}),jsxRuntimeExports.jsx("div",{className:"fish-profile-name",children:cp.name}),jsxRuntimeExports.jsx("div",{className:"fish-profile-size",children:cp.minimumSize}),cp.tabooStartAt&&jsxRuntimeExports.jsxs("div",{className:"fish-date",children:[jsxRuntimeExports.jsx("img",{className:`${sp?"":"bandate"}`,src:ban,alt:"",onClick:()=>lp(!sp)}),jsxRuntimeExports.jsxs("div",{children:[up(cp.tabooStartAt)," ~ ",up(cp.tabooEndAt)]})]})]})},cp.id))})})},BASE_URL="https://i10c203.p.ssafy.io",axiosApi=()=>{const _d=axios.create({baseURL:BASE_URL});return _d.defaults.headers.common.Authorization="",_d.defaults.headers.post["Content-Type"]="application/json",_d.defaults.headers.put["Content-Type"]="application/json",_d.defaults.headers.delete["Content-Type"]="application/json",_d},api$2=axiosApi(),url$1="/fishbooks";async function getFishList(){try{const{data:_d}=await api$2.get(`${url$1}`);return console.log(_d),_d}catch(_d){console.log(_d)}}async function getFishDetail(_d){try{console.log("dddd");const{data:np}=await api$2.get(`${url$1}/${_d}`);return console.log(np),np}catch(np){console.log(np)}}const FishBook=()=>{const[_d,np]=reactExports.useState([]),[rp,ap]=reactExports.useState(0),sp=async()=>{await getFishList().then(lp=>np(lp)),console.log("ddddddddddd"),console.log(_d)};return reactExports.useEffect(()=>{sp()},[]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Header,{}),jsxRuntimeExports.jsx("div",{className:"fishbook-header bg-blue"}),jsxRuntimeExports.jsx("div",{className:"fishbook-title",children:"FishUniverse"}),jsxRuntimeExports.jsxs("div",{className:"fishbook-category shadow",children:[jsxRuntimeExports.jsxs("div",{className:`fishbook-category-header ${rp==0?"blue-fc":""}`,onClick:()=>ap(0),children:[jsxRuntimeExports.jsx("div",{children:"전체"}),jsxRuntimeExports.jsx("div",{children:"34종"})]}),jsxRuntimeExports.jsxs("div",{className:`fishbook-category-header ${rp==1?"blue-fc":""}`,onClick:()=>ap(1),children:[jsxRuntimeExports.jsx("div",{children:"민물"}),jsxRuntimeExports.jsx("div",{children:"14종"})]}),jsxRuntimeExports.jsxs("div",{className:`fishbook-category-header ${rp==2?"blue-fc":""}`,onClick:()=>ap(2),children:[jsxRuntimeExports.jsx("div",{children:"바다"}),jsxRuntimeExports.jsx("div",{children:"30종"})]})]}),_d.fishBooks&&jsxRuntimeExports.jsx(FishBookList,{fishdata:_d.fishBooks,type:rp})]})},FishBookDetail=({fish:_d})=>{const[np,rp]=reactExports.useState(!1),[ap,sp]=reactExports.useState([]),lp=()=>{rp(!np);const up=JSON.parse(_d.interview);sp(up),console.log(ap),console.log(_d.interview),console.log(typeof _d.interview),console.log(up),console.log(typeof up)};return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:np?"card-rotate":"back-rotate",onClick:lp,children:[jsxRuntimeExports.jsxs("div",{className:"front",children:[jsxRuntimeExports.jsx("div",{className:"detail-title",children:"Mulgogi"}),jsxRuntimeExports.jsxs("div",{className:"size",children:["size",jsxRuntimeExports.jsx("div",{children:_d.size})]}),jsxRuntimeExports.jsx("img",{className:"fish-img",src:_d.imageUrl}),jsxRuntimeExports.jsx("div",{className:"sub-one",children:"the fish"}),jsxRuntimeExports.jsx("div",{className:"sub-two",children:"we love"}),jsxRuntimeExports.jsx("div",{className:"fish-name",children:_d.name}),jsxRuntimeExports.jsxs("div",{className:"science-name",children:["학명",jsxRuntimeExports.jsx("div",{style:{whiteSpace:"pre-line"},children:_d.scientificName})]}),jsxRuntimeExports.jsxs("div",{className:"food",children:["Food",jsxRuntimeExports.jsx("div",{style:{whiteSpace:"pre-line"},children:_d.bait})]}),jsxRuntimeExports.jsxs("div",{className:"live",children:["Where",jsxRuntimeExports.jsx("br",{}),"you live"]}),jsxRuntimeExports.jsx("div",{className:"habitat",style:{whiteSpace:"pre-line"},children:_d.habitat})]}),jsxRuntimeExports.jsxs("div",{className:"back",children:[jsxRuntimeExports.jsxs("div",{className:"question",children:["Q. ",ap.first_question,jsxRuntimeExports.jsx("div",{style:{whiteSpace:"pre-line"},children:ap.first_answer})]}),jsxRuntimeExports.jsxs("div",{className:"question",children:["Q. ",ap.second_question,jsxRuntimeExports.jsx("div",{style:{whiteSpace:"pre-line"},children:ap.second_answer})]}),ap.third_question&&jsxRuntimeExports.jsxs("div",{className:"question",children:["Q. ",ap.third_question,jsxRuntimeExports.jsx("div",{style:{whiteSpace:"pre-line"},children:ap.third_answer})]})]})]})})},FishBookDetailPage=()=>{const{id:_d}=useParams(),[np,rp]=reactExports.useState([]);reactExports.useEffect(()=>{ap()},[]);const ap=async()=>{await getFishDetail(_d).then(sp=>rp(sp)),console.log(np)};return jsxRuntimeExports.jsx(FishBookDetail,{fish:np})},naver_logo="/assets/naver_logo-8-qEmV51.png",SocialNaver=()=>{const ap="https://nid.naver.com/oauth2.0/authorize?client_id=w88WA5fuXobhPaQEmw1p&response_type=code&redirect_uri=https://i10c203.p.ssafy.io/login/naver&state=niwXgvCl5E",sp=()=>{window.location.href=ap};return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("img",{src:naver_logo,alt:"네이버로그인",onClick:sp})})},kakao_logo="/assets/kakao_logo-F_W8h3hn.png",SocialKakao=()=>{const rp="https://kauth.kakao.com/oauth/authorize?client_id=db5b74e6c640443403b9705680d9dbac&redirect_uri=https://i10c203.p.ssafy.io/login/kakao&response_type=code",ap=()=>{window.location.href=rp};return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("img",{src:kakao_logo,alt:"카카오로그인",onClick:ap})})},google_logo="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAACXBIWXMAAAI2AAACNgElQaYmAAAHT0lEQVR4nO2dTWwTRxTHX+wEh5R0I6GqMkJNaKVWRaJEtjhUVV2skkNPgMyhFhIQ5daqarjQm4Hc6AVz6K1V3JNPFkEqpxwczKWqZCdUFUipEA6qcNWqxabgfJG4mu1zMZY3mZmdmR1v5idFSZzN7Hj/nvfevPkCg8FgMBgMBoPBYDDsbHq66d1X4tFRABgBgFF86aMtLq8CwB38eQ4AyuF8saygmq7QWhAU4AQ++KMCiqyiOLfI93C+uCCgTKFoJ0glHiUP/iwKMST5dqTFzADANV1ajxaCVOJR8uDPAcCXaJK8gLSc78P5YsbLZ+GpICjEJAohuzXQQlrKZa+E8UyQSjxKhLiokRDtzKEwcypvqlwQ9BFXWyIl3UmjMFUV9VQqSCUevYStotsgZmxcRWtRIkglHiWO+noXtQonzofzxbTMG0gXBE3UdY19BSuZcL44LqtwqYJU4lESyk7LvIdHkA5lXIZfCch6Pz4Wg7Agy8lLaSE+F6O7TJYRwx1CBUEHnpdZYQ+RLgaIFAQzs3kfRVOtKBEDRAmCOam8B/2MMn51YlTQh0OZGIReQeVcVCRGM11+gybSwQ4pqddxznS+UjFARAtR5DcyOGbhakCpEo+ewMwyzWCXcjHArSBoquYljmFkMLEndPCIIsHpiRggQBBZyUIlyTyH+nsmBrgRBO3zvISoKoNJPCXp7rbo0FMxwKUg0zjsKhLp2VSH92JPpgjni5dU37sdLkFWZ2GksRJ88DT3FqwvDYqqCzFRno5n6wBvcvFcT/8GDJ5ehP4jf4h4G0YMhLeFPG71HWuLQ/DshxForAR5ikuH88XzPP/oR5if4Oqs7Tc+bX0tuHcFQgf/hvWHg9B41sdSHJmsltyBz90RHpN1vNOLAWsNXj29CKH3/qIth0RRnkY0OsJkslZnbTP1eNvrft5rm7Bt8CSi0h3WFnKC5iLSSqyJe3arcaBsxOgMqyBbzTZ/ieDrdbAm7kLf8D+d/nyZv8r+htVkPeDJWy3f3gfLt8PNX0nrOLDTH7wT1C2EdAZ5k4i7P3wEe07dB9J3IROaXdbZ17CMh7jK6O56uwq9E3eh+s0hKR3A2FRtREIqRxSZQsqiylizCOJ6wUzAWpO5imlE42mqVZwjvC0sTn1YQMVmBJTRjVBnxFkEETEIdYfiGj9CHZ1Km7nogPaLLr2GRRDXPiQ0BkoXv2iEFJNl4Id6Ro4RRDOMIJphBNEMI4hmsAjiOkJanRWyPYavUd1CvNqlwWuop8CyCCKiU3dYQBndCPWkPxZBlgQ8CKoRx52MUh9CTBaOq+w0btG+X5b0uyuT9bTRB+lnh+HmyvA5gJyMKZtlSUPDIvbqojZZSoZwK5sD8NWT9+HX53ZKp1xK5rpmCDc2VbsuwNTGCymLysKwRlnMZquwtg/OPD7WFIMwEskmdB3Z64QIvyclygIWW0j4rn7QbhnEXLXRFRvQxKZqIj44C4WUJSXKAtoRPyLA57UYfFt/1+kS0komGe/tBWcF3JNpGR6TIKEx2zltKQoxTWeqx6C0/tp2xV2MZBPaRlyxqdpRQRtv3mC5mKen7niDm6vDcKb6MVQ2BmjKGdJ8xwdRZpXJ7wpZjtAS0vIUly4lc1otR4hN1SZxUahbZgop6yRLGby5rGvNH4iJ+qwW4xWDMKlT1BWbqo0KEgNYzRW4EMSe7EZCWiJGS0jLy7QOoqAYotbcb+tvO8ElSGgMyleeRjIOIS0vRBTPIq8WMUStKp5hCXebcK/CxQhJ2rLoUjKnZFk0vIioRG9DeIB2+mgr3OMhpWSu3OpLBEJM13wkm5A+mBXJJoaOTF+42gjURe9iRD2Xtx23A1RpSZPfSOvLR7KJaVl9FfRZ8xv99yeX938Nm6GHIovnTnK63nwGP8lKNp8pJXOuNp8hLcJpj/mezQEI/ZmE3icfuK1rupCyuMN4IftlRbKJq7iHu2xe2p6Jxs/gB2YU0+jbJgr7qmO2MJxU0Xdw+z9Rgui4gRn3AqPA6huw+7cLdqth5GQhZbma4S9si79INuGrLf6IGP2PvoDg8ju0/8LcK++EsFknaN9dV0gXGoE6LO+/AutDszQ1WhC15p5rLwwnKrl75fCpg0t+msyw8covdgQWrB+Cns6d4CqaKiHRplBB4D9RFvwmyuau321hgitvQs+G1f7nTwop60dR9xIuCPhUlEZvDZ4P/gSBDct2+si4WyfejhRBwKeiQM86PN8zD41gHXrrh4gYwlcUSz+uAvsBfjquwvYZpWROymowJQe6YPrDDwe6lFEMaecfKj3yKJJNdOuRR4AZgnHZWWjlh4KhCeumQ8GqKISSNfaeHZuHg1E6H5sHXozNeHqwJObAdDtYEpo7auOYj1K0OHp1q7S4Qppj4J4I0US7w4nRx6g6nBha0vkzKk2TE1of340ZZJHHdwMmAv8/wlsHEVrpqgPuUSDaA+6hZXL4Ai6D0O78dIPBYDAYDAaDwWAwGF4AAP8CR9JwtW2tQjkAAAAASUVORK5CYII=",SocialGoogle=()=>{const rp="https://accounts.google.com/o/oauth2/v2/auth?scope=email%20openid&response_type=code&redirect_uri=https://i10c203.p.ssafy.io/login/google&client_id=68067767440-hri2501h11p1d08asfsfaf6t2705u9cr.apps.googleusercontent.com",ap=()=>{window.location.href=rp};return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("img",{src:google_logo,alt:"구글로그인",onClick:ap})})},LoginPage=()=>{var sp;const _d=useNavigate(),rp=(sp=useLocation().state)==null?void 0:sp.path,ap=sessionStorage.getItem("jwt");return reactExports.useEffect(()=>{ap&&_d("/")},[]),jsxRuntimeExports.jsxs("div",{className:"LoginPage",children:[jsxRuntimeExports.jsx(Header,{prevPath:rp}),jsxRuntimeExports.jsx("div",{className:"LoginPage_body",children:jsxRuntimeExports.jsx("img",{src:defaultImg,alt:""})}),jsxRuntimeExports.jsxs("div",{className:"LoginPage_footer",children:[jsxRuntimeExports.jsx(SocialNaver,{}),jsxRuntimeExports.jsx(SocialKakao,{}),jsxRuntimeExports.jsx(SocialGoogle,{})]})]})},group="/assets/Group-cDp7Suxl.svg",sort="/assets/Sort-ccnrWBQT.svg";function RoomFilterModal({state:_d,sortBy:np}){const rp=reactExports.useRef();reactExports.useEffect(()=>{rp.current.showModal()});const ap=up=>{const dp=up.target.getBoundingClientRect();(dp.left>up.clientX||dp.right<up.clientX||dp.top>up.clientY||dp.bottom<up.clientY)&&(rp.current.close(),_d(!_d))},sp=()=>{rp.current.close(),np(1),_d(!_d)},lp=()=>{rp.current.close(),np(0),_d(!_d)};return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("dialog",{ref:rp,onClick:ap,className:"room-filter-modal",children:[jsxRuntimeExports.jsx("header",{className:"room-filter-header",children:jsxRuntimeExports.jsx("span",{children:"정렬"})}),jsxRuntimeExports.jsxs("div",{className:"room-filter-body",children:[jsxRuntimeExports.jsxs("div",{onClick:sp,children:[jsxRuntimeExports.jsx("img",{src:group,alt:""}),jsxRuntimeExports.jsx("span",{children:"인원순"})]}),jsxRuntimeExports.jsxs("div",{onClick:lp,children:[jsxRuntimeExports.jsx("img",{src:sort,alt:""}),jsxRuntimeExports.jsx("span",{children:"최신순"})]})]})]})})}var CellTowerOutlined={},_interopRequireDefault$q=interopRequireDefaultExports;Object.defineProperty(CellTowerOutlined,"__esModule",{value:!0});var default_1$h=CellTowerOutlined.default=void 0,_createSvgIcon$h=_interopRequireDefault$q(requireCreateSvgIcon()),_jsxRuntime$h=jsxRuntimeExports;default_1$h=CellTowerOutlined.default=(0,_createSvgIcon$h.default)([(0,_jsxRuntime$h.jsx)("path",{d:"m7.3 14.7 1.2-1.2c-1-1-1.5-2.3-1.5-3.5 0-1.3.5-2.6 1.5-3.5L7.3 5.3c-1.3 1.3-2 3-2 4.7s.7 3.4 2 4.7M19.1 2.9l-1.2 1.2c1.6 1.6 2.4 3.8 2.4 5.9 0 2.1-.8 4.3-2.4 5.9l1.2 1.2c2-2 2.9-4.5 2.9-7.1 0-2.6-1-5.1-2.9-7.1"},"0"),(0,_jsxRuntime$h.jsx)("path",{d:"M6.1 4.1 4.9 2.9C3 4.9 2 7.4 2 10c0 2.6 1 5.1 2.9 7.1l1.2-1.2c-1.6-1.6-2.4-3.8-2.4-5.9 0-2.1.8-4.3 2.4-5.9m10.6 10.6c1.3-1.3 2-3 2-4.7-.1-1.7-.7-3.4-2-4.7l-1.2 1.2c1 1 1.5 2.3 1.5 3.5 0 1.3-.5 2.6-1.5 3.5zM14.5 10c0-1.38-1.12-2.5-2.5-2.5S9.5 8.62 9.5 10c0 .76.34 1.42.87 1.88L7 22h2l.67-2h4.67l.66 2h2l-3.37-10.12c.53-.46.87-1.12.87-1.88m-4.17 8L12 13l1.67 5z"},"1")],"CellTowerOutlined");const filter="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADcAAAA3CAYAAACo29JGAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAOLSURBVHgB7ZpbiE1RGMf/jpmQwRAaGZkYklt5kCmXEimX8ICUB8QrXnjgAS/S4MmLJFJK8iAveBAPRG5D7iGZzCCkxv0wxvj+rXNqn7XWsfc5s885a53Or/6n9m3t7ztrr29969sbAJpED0R/Rd1lIPrxSbS+l/zcFU1D+dGRkJ9hKE9q6dw3lCfdVVDPZ5Bzov3wjwWiHYHtJJ17LZoZ2DlIdE30B36xSNt+xceyRds5HspBn2AnzdL2PeHPVFEnMkPpUvjFKNEXZE4JG3mgv6hVO3AGfsGxFrSfQbIhfbBZO8ienAA/6Cd6g0z7L4mq0ydMgtmt7L3ecJ9tMLOUNfpJJ2D23jy4zUSoqSxo933RYP3ERtEP7cQ20Ti4yUDRZZh5ZdZguB1mF98UjYBbcJydgmnrFVEi20U1okeWi25BhVsXoI0nYa5iGFQawy7mCW0wHXwhmoLSMhwq0Om2fRctj9rIXNF7SyPtKF2QaYAaIrpNSagJu1cujdHBr5bG3olW5NpYD+F6s8Viy0/R1nxtYaPPYf+3NqHw8yCNni/6YLGhQ7QWPfyTx0AFFL1xrhp2iQagMNDoZTCTC+otYhwe9aILsA/kw1D5aZzwidical+/5zPRHMQMHTgu6rLc8KJoKOKhj2hflvtcF41GgWAyylV60nJjJqs9TbY5hx2BvaLF9oegwHCMMVlNWgy4IRqL/KiDPetgDx4V1aKIMFJ1wJ6u5ToGmTIdQ+aimfot2oMiO5aGSepLmA4eQG4wKurpFJP4vOewOOA/PhtmusZ5aXLENviY34Hp2AY4AstqnPeCBjZHvHad5drdUFHTGc4i08DHCI9uCct1rVBLGqdYCDPvawq5ZqToqXbdTsREAvHBdeDnwHZfqNTtf9SlFOQqYiJO55gqtWv7wkI4p4wabV8bYiJO5xjKO7V91Qi/f1Vgu9vSRt7E6ZxzVJzzlYpzvlJxzlcqzvlKxbkCwZwycn0/H6pQfFg2mCE6KJquHetKKRaK7Rw/AWFNchXsK4bzoo9wEBp7D5kLzy2pY1wdsPz9EGYxKV3lOgT1ispJsjnHsbUX9jdGFL9gWokSVrmiYHPutOg2sn/Lyeq1s70VxOacTXSUJYnF8IgozrGEx3cBXvRWkDDn+EJ+NcJLD05C5/hJse7UL6hIWAePYSVL/9KAkXAJHI+EUeE7dH6exPol37jWo4T8A7CzoWgJ7WGLAAAAAElFTkSuQmCC";var Cached={},_interopRequireDefault$p=interopRequireDefaultExports;Object.defineProperty(Cached,"__esModule",{value:!0});var default_1$g=Cached.default=void 0,_createSvgIcon$g=_interopRequireDefault$p(requireCreateSvgIcon()),_jsxRuntime$g=jsxRuntimeExports;default_1$g=Cached.default=(0,_createSvgIcon$g.default)((0,_jsxRuntime$g.jsx)("path",{d:"m19 8-4 4h3c0 3.31-2.69 6-6 6-1.01 0-1.97-.25-2.8-.7l-1.46 1.46C8.97 19.54 10.43 20 12 20c4.42 0 8-3.58 8-8h3zM6 12c0-3.31 2.69-6 6-6 1.01 0 1.97.25 2.8.7l1.46-1.46C15.03 4.46 13.57 4 12 4c-4.42 0-8 3.58-8 8H1l4 4 4-4z"}),"Cached");function RoomList(){const _d=useNavigate(),[np,rp]=reactExports.useState([]),[ap,sp]=reactExports.useState([]),[lp,up]=reactExports.useState(!1),[cp,dp]=reactExports.useState(0),[fp,pp]=reactExports.useState(!0),hp=!1,mp="https://i10c203.p.ssafy.io",gp=JSON.parse(localStorage.getItem("user")),vp="wearegitaehasam";reactExports.useEffect(()=>{Sp()},[]);const xp=()=>{up(!lp)},Sp=()=>{pp(!0),axios.get(mp+"/api/lives").then(bp=>{axios.get(mp+"/openvidu/api/sessions",{headers:{Authorization:"Basic "+btoa("OPENVIDUAPP:"+vp),"Content-Type":"application/json"}}).then(Ep=>{rp(bp.data),sp(Ep.data),pp(!1)})}).catch(bp=>{console.log(bp)})},yp=bp=>{console.log("enterLive-liveRoomId: ",bp.liveRoomId),console.log("enterLive-sessionId: ",bp.sessionId);const Ep=bp.liveRoomId,wp=bp.sessionId;_d(`/live/${bp.sessionId}`,{state:{isHost:hp,roomId:Ep,subscriberSession:wp,nickname:gp.nickname,userImg:gp.imageUrl}})};return console.log(np),console.log(ap),jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:fp?jsxRuntimeExports.jsx(Loading,{}):jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Header,{centerText:"낚시 라이브"}),jsxRuntimeExports.jsx(default_1$g,{className:"room-list-reload-btn",onClick:Sp}),np.liveRooms&&np.liveRooms.length>0?jsxRuntimeExports.jsxs("div",{onClick:xp,className:"roomList-filter",children:[cp===1?jsxRuntimeExports.jsx("span",{children:"참여인원순"}):jsxRuntimeExports.jsx("span",{children:"최신순"}),jsxRuntimeExports.jsx("img",{src:filter,alt:""}),lp&&jsxRuntimeExports.jsx(RoomFilterModal,{state:up,sortBy:dp})]}):jsxRuntimeExports.jsxs("div",{className:"no-live",children:[jsxRuntimeExports.jsx(default_1$h,{}),jsxRuntimeExports.jsx("span",{children:"진행중인 라이브가 없습니다."})]}),np.liveRooms&&np.liveRooms.map((bp,Ep)=>jsxRuntimeExports.jsxs("div",{className:"roomList-info",onClick:()=>yp(bp),children:[jsxRuntimeExports.jsx("img",{src:bp.thumbnailURL?bp.thumbnailURL:defaultImg,alt:"room thumbnail",className:"thumbnail"}),jsxRuntimeExports.jsxs("div",{className:"roomList-info-header",children:[jsxRuntimeExports.jsx("p",{children:bp.name}),jsxRuntimeExports.jsxs("div",{className:"roomList-info-body",children:[jsxRuntimeExports.jsx("span",{children:bp.nickName}),jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("img",{className:"subscriber",src:group,alt:"group"})," "]})]})]})]},Ep)),jsxRuntimeExports.jsx(NavLink,{to:"/media/roomList/create",className:"nav-item createLive-btn",children:jsxRuntimeExports.jsx("span",{children:"라이브 켜기"})})]})})}var AddAPhotoOutlined={},_interopRequireDefault$o=interopRequireDefaultExports;Object.defineProperty(AddAPhotoOutlined,"__esModule",{value:!0});var default_1$f=AddAPhotoOutlined.default=void 0,_createSvgIcon$f=_interopRequireDefault$o(requireCreateSvgIcon()),_jsxRuntime$f=jsxRuntimeExports;default_1$f=AddAPhotoOutlined.default=(0,_createSvgIcon$f.default)((0,_jsxRuntime$f.jsx)("path",{d:"M21 6h-3.17L16 4h-6v2h5.12l1.83 2H21v12H5v-9H3v9c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2M8 14c0 2.76 2.24 5 5 5s5-2.24 5-5-2.24-5-5-5-5 2.24-5 5m5-3c1.65 0 3 1.35 3 3s-1.35 3-3 3-3-1.35-3-3 1.35-3 3-3M5 6h3V4H5V1H3v3H0v2h3v3h2z"}),"AddAPhotoOutlined");var ChangeCircleOutlined={},_interopRequireDefault$n=interopRequireDefaultExports;Object.defineProperty(ChangeCircleOutlined,"__esModule",{value:!0});var default_1$e=ChangeCircleOutlined.default=void 0,_createSvgIcon$e=_interopRequireDefault$n(requireCreateSvgIcon()),_jsxRuntime$e=jsxRuntimeExports;default_1$e=ChangeCircleOutlined.default=(0,_createSvgIcon$e.default)((0,_jsxRuntime$e.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8m4.17-5.24-1.1-1.1c.71-1.33.53-3.01-.59-4.13C13.79 8.84 12.9 8.5 12 8.5c-.03 0-.06.01-.09.01L13 9.6l-1.06 1.06-2.83-2.83L11.94 5 13 6.06l-.96.96c1.27.01 2.53.48 3.5 1.44 1.7 1.71 1.91 4.36.63 6.3m-1.28 1.41L12.06 19 11 17.94l.95-.95c-1.26-.01-2.52-.5-3.48-1.46-1.71-1.71-1.92-4.35-.64-6.29l1.1 1.1c-.71 1.33-.53 3.01.59 4.13.7.7 1.63 1.04 2.56 1.01L11 14.4l1.06-1.06z"}),"ChangeCircleOutlined");function CreateRoom(){const _d=useNavigate(),np=!0,rp="https://i10c203.p.ssafy.io",ap=JSON.parse(localStorage.getItem("user")),[sp,lp]=reactExports.useState(""),[up,cp]=reactExports.useState(""),[dp,fp]=reactExports.useState(null),[pp,hp]=reactExports.useState(null),mp=reactExports.useRef(),gp=Ep=>{lp(Ep.target.value)},vp=Ep=>{Ep.preventDefault(),mp.current.click()};reactExports.useEffect(()=>{up&&fp(jsxRuntimeExports.jsx("img",{className:"room-create-upload-img",src:up}))},[up]);const xp=Ep=>{Ep.preventDefault();const wp=Ep.target.files[0],_p=new FileReader;_p.onloadend=()=>{cp(_p.result)},wp&&(_p.readAsDataURL(wp),Sp(wp))},Sp=Ep=>{axios.post(rp+"/api/images/presigned",{filename:Ep.name}).then(wp=>{console.log(wp.data),hp(wp.data.imageUrl),yp(wp.data.preSignedUrl,Ep)}).catch(wp=>console.error(wp))},yp=(Ep,wp)=>{axios.put(Ep,wp,{headers:{"Content-Type":wp==null?void 0:wp.type}}).then(_p=>{console.log(_p)}).catch(_p=>{console.log(_p)})},bp=Ep=>{const wp=Math.floor(Math.random()*1e6);_d(`/live/Gitaehasam${wp}`,{state:{isHost:np,roomId:wp,imageUrl:pp||null,name:sp,nickname:ap.nickname,userImg:ap.imageUrl}})};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"roomList-header",onClick:()=>_d("/media/roomList"),children:[jsxRuntimeExports.jsx("img",{src:back,alt:""}),jsxRuntimeExports.jsx("span",{children:"라이브 생성"})]}),jsxRuntimeExports.jsxs("form",{className:"room-create-form",onSubmit:bp,children:[jsxRuntimeExports.jsxs("div",{className:"room-create-header",children:[jsxRuntimeExports.jsx("div",{className:"room-create-thumbnail-title",children:"특별한 사진으로 라이브를 표현해보세요"}),jsxRuntimeExports.jsxs("div",{className:"room-create-thumbnail",children:[dp,up?jsxRuntimeExports.jsx("div",{className:"room-create-thumbnail-btn-bottom",onClick:vp,children:jsxRuntimeExports.jsx(default_1$e,{})}):jsxRuntimeExports.jsx("div",{className:"room-create-thumbnail-btn",onClick:vp,children:jsxRuntimeExports.jsx(default_1$f,{})})]}),jsxRuntimeExports.jsx("input",{ref:mp,hidden:!0,type:"file",onChange:xp})]}),jsxRuntimeExports.jsxs("div",{className:"room-create-header",children:[jsxRuntimeExports.jsx("div",{className:"room-create-thumbnail-title",children:"제목"}),jsxRuntimeExports.jsx("input",{className:"room-create-title",type:"text",maxLength:15,value:sp,onChange:gp,placeholder:"라이브 제목을 적어주세요.",required:!0})]}),jsxRuntimeExports.jsx("div",{className:"room-create-btn",children:jsxRuntimeExports.jsx("button",{type:"submit",children:"라이브 켜기"})})]})]})}var lib={},jsnlog={};(function(_d){var np=commonjsGlobal&&commonjsGlobal.__extends||function(){var ap=function(sp,lp){return ap=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(up,cp){up.__proto__=cp}||function(up,cp){for(var dp in cp)Object.prototype.hasOwnProperty.call(cp,dp)&&(up[dp]=cp[dp])},ap(sp,lp)};return function(sp,lp){ap(sp,lp);function up(){this.constructor=sp}sp.prototype=lp===null?Object.create(lp):(up.prototype=lp.prototype,new up)}}();function rp(ap){if(!ap)return rp.__;Array.prototype.reduce||(Array.prototype.reduce=function(up,cp){for(var dp=cp,fp=0;fp<this.length;fp++)dp=up(dp,this[fp],fp,this);return dp});var sp="",lp=("."+ap).split(".").reduce(function(up,cp,dp,fp){sp?sp+="."+cp:sp=cp;var pp=up["__"+sp];return pp===void 0&&(rp.Logger.prototype=up,pp=new rp.Logger(sp),up["__"+sp]=pp),pp},rp.__);return lp}(function(ap){ap.requestId="",ap.entryId=0,ap._createXMLHttpRequest=function(){return new XMLHttpRequest},ap._getTime=function(){return new Date().getTime()},ap._console=console,ap._appenderNames=[];function sp(Ip,kp,Tp){if(kp[Ip]!==void 0){if(kp[Ip]===null){delete Tp[Ip];return}Tp[Ip]=kp[Ip]}}function lp(Ip){if(ap.enabled!=null&&!ap.enabled)return!1;try{if(Ip.userAgentRegex&&!new RegExp(Ip.userAgentRegex).test(navigator.userAgent))return!1}catch{}try{if(Ip.ipRegex&&ap.clientIP&&!new RegExp(Ip.ipRegex).test(ap.clientIP))return!1}catch{}return!0}function up(Ip,kp){try{if(Ip.disallow&&new RegExp(Ip.disallow).test(kp))return!1}catch{}return!0}function cp(Ip){return typeof Ip=="function"?Ip instanceof RegExp?Ip.toString():Ip():Ip}var dp=function(){function Ip(kp,Tp,Np){this.msg=kp,this.meta=Tp,this.finalString=Np}return Ip}();function fp(Ip){var kp=cp(Ip),Tp;switch(typeof kp){case"string":return new dp(kp,null,kp);case"number":return Tp=kp.toString(),new dp(Tp,null,Tp);case"boolean":return Tp=kp.toString(),new dp(Tp,null,Tp);case"undefined":return new dp("undefined",null,"undefined");case"object":return kp instanceof RegExp||kp instanceof String||kp instanceof Number||kp instanceof Boolean?(Tp=kp.toString(),new dp(Tp,null,Tp)):(typeof ap.serialize=="function"?Tp=ap.serialize.call(this,kp):Tp=JSON.stringify(kp),new dp("",kp,Tp));default:return new dp("unknown",null,"unknown")}}function pp(Ip){return sp("enabled",Ip,this),sp("maxMessages",Ip,this),sp("defaultAjaxUrl",Ip,this),sp("clientIP",Ip,this),sp("requestId",Ip,this),sp("defaultBeforeSend",Ip,this),sp("serialize",Ip,this),this}ap.setOptions=pp;function hp(){return-2147483648}ap.getAllLevel=hp;function mp(){return 1e3}ap.getTraceLevel=mp;function gp(){return 2e3}ap.getDebugLevel=gp;function vp(){return 3e3}ap.getInfoLevel=vp;function xp(){return 4e3}ap.getWarnLevel=xp;function Sp(){return 5e3}ap.getErrorLevel=Sp;function yp(){return 6e3}ap.getFatalLevel=yp;function bp(){return 2147483647}ap.getOffLevel=bp;function Ep(Ip){return Ip<=1e3?"trace":Ip<=2e3?"debug":Ip<=3e3?"info":Ip<=4e3?"warn":Ip<=5e3?"error":"fatal"}var wp=function(){function Ip(kp,Tp){this.inner=Tp,this.name="JL.Exception",this.message=fp(kp).finalString}return Ip}();ap.Exception=wp,wp.prototype=new Error;var _p=function(){function Ip(kp,Tp,Np,Lp,Vp){this.l=kp,this.m=Tp,this.n=Np,this.t=Lp,this.u=Vp}return Ip}();ap.LogItem=_p;function Cp(Ip,kp,Tp){return ap.entryId++,new _p(Ip,kp,Tp,ap._getTime(),ap.entryId)}function $p(Ip){Ip.id&&(clearTimeout(Ip.id),Ip.id=null)}function Rp(Ip,kp,Tp){var Np=this;Ip.id||(Ip.id=setTimeout(function(){Tp.call(Np)},kp))}var Pp=function(){function Ip(kp,Tp){this.appenderName=kp,this.sendLogItems=Tp,this.level=ap.getTraceLevel(),this.sendWithBufferLevel=2147483647,this.storeInBufferLevel=-2147483648,this.bufferSize=0,this.batchSize=1,this.maxBatchSize=20,this.batchTimeout=2147483647,this.sendTimeout=5e3,this.buffer=[],this.batchBuffer=[],this.batchTimeoutTimer={id:null},this.sendTimeoutTimer={id:null},this.nbrLogItemsSkipped=0,this.nbrLogItemsBeingSent=0;var Np="Trying to create an appender without a name or with an empty name";if(kp==null)throw Np;if(ap._appenderNames.indexOf(kp)!=-1)throw kp?"Multiple appenders use the same name "+kp:Np;ap._appenderNames.push(kp)}return Ip.prototype.addLogItemsToBuffer=function(kp){if(this.batchBuffer.length>=this.maxBatchSize){this.nbrLogItemsSkipped+=kp.length;return}if(ap.maxMessages!=null){if(ap.maxMessages<1)return;ap.maxMessages-=kp.length}this.batchBuffer=this.batchBuffer.concat(kp);var Tp=this;Rp(this.batchTimeoutTimer,this.batchTimeout,function(){Tp.sendBatch.call(Tp)})},Ip.prototype.batchBufferHasOverdueMessages=function(){for(var kp=0;kp<this.batchBuffer.length;kp++){var Tp=ap._getTime()-this.batchBuffer[kp].t;if(Tp>this.batchTimeout)return!0}return!1},Ip.prototype.batchBufferHasStrandedMessage=function(){return ap.maxMessages!=null&&ap.maxMessages<1&&this.batchBuffer.length>0},Ip.prototype.sendBatchIfComplete=function(){(this.batchBuffer.length>=this.batchSize||this.batchBufferHasOverdueMessages()||this.batchBufferHasStrandedMessage())&&this.sendBatch()},Ip.prototype.onSendingEnded=function(){$p(this.sendTimeoutTimer),this.nbrLogItemsBeingSent=0,this.sendBatchIfComplete()},Ip.prototype.setOptions=function(kp){if(sp("level",kp,this),sp("ipRegex",kp,this),sp("userAgentRegex",kp,this),sp("disallow",kp,this),sp("sendWithBufferLevel",kp,this),sp("storeInBufferLevel",kp,this),sp("bufferSize",kp,this),sp("batchSize",kp,this),sp("maxBatchSize",kp,this),sp("batchTimeout",kp,this),sp("sendTimeout",kp,this),this.bufferSize<this.buffer.length&&(this.buffer.length=this.bufferSize),this.maxBatchSize<this.batchSize)throw new ap.Exception({message:"maxBatchSize cannot be smaller than batchSize",maxBatchSize:this.maxBatchSize,batchSize:this.batchSize});return this},Ip.prototype.log=function(kp,Tp,Np,Lp,Vp,zp,Wp){var Up;if(lp(this)&&up(this,zp)&&!(Vp<this.storeInBufferLevel)){if(Up=Cp(Vp,zp,Wp),Vp<this.level){this.bufferSize>0&&(this.buffer.push(Up),this.buffer.length>this.bufferSize&&this.buffer.shift());return}this.addLogItemsToBuffer([Up]),Vp>=this.sendWithBufferLevel&&this.buffer.length&&(this.addLogItemsToBuffer(this.buffer),this.buffer.length=0),this.sendBatchIfComplete()}},Ip.prototype.sendBatch=function(){if(!(this.nbrLogItemsBeingSent>0)&&($p(this.batchTimeoutTimer),this.batchBuffer.length!=0)){this.nbrLogItemsBeingSent=this.batchBuffer.length;var kp=this;Rp(this.sendTimeoutTimer,this.sendTimeout,function(){kp.onSendingEnded.call(kp)}),this.sendLogItems(this.batchBuffer,function(){kp.batchBuffer.splice(0,kp.nbrLogItemsBeingSent),kp.nbrLogItemsSkipped>0&&(kp.batchBuffer.push(Cp(xp(),"Lost "+kp.nbrLogItemsSkipped+" messages. Either connection with the server was down or logging was disabled via the enabled option. Reduce lost messages by increasing the ajaxAppender option maxBatchSize.",kp.appenderName)),kp.nbrLogItemsSkipped=0),kp.onSendingEnded.call(kp)})}},Ip}();ap.Appender=Pp;var Op=function(Ip){np(kp,Ip);function kp(Tp){return Ip.call(this,Tp,kp.prototype.sendLogItemsAjax)||this}return kp.prototype.setOptions=function(Tp){return sp("url",Tp,this),sp("beforeSend",Tp,this),Ip.prototype.setOptions.call(this,Tp),this},kp.prototype.sendLogItemsAjax=function(Tp,Np){try{if(!lp(this))return;this.xhr&&this.xhr.readyState!=0&&this.xhr.readyState!=4&&this.xhr.abort(),this.xhr=ap._createXMLHttpRequest();var Lp="/jsnlog.logger";ap.defaultAjaxUrl!=null&&(Lp=ap.defaultAjaxUrl),this.url&&(Lp=this.url),this.xhr.open("POST",Lp),this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.setRequestHeader("JSNLog-RequestId",ap.requestId);var Vp=this;this.xhr.onreadystatechange=function(){Vp.xhr.readyState==4&&Vp.xhr.status>=200&&Vp.xhr.status<300&&Np()};var zp={r:ap.requestId,lg:Tp};typeof this.beforeSend=="function"?this.beforeSend.call(this,this.xhr,zp):typeof ap.defaultBeforeSend=="function"&&ap.defaultBeforeSend.call(this,this.xhr,zp);var Wp=JSON.stringify(zp);this.xhr.send(Wp)}catch{}},kp}(Pp);ap.AjaxAppender=Op;var jp=function(Ip){np(kp,Ip);function kp(Tp){return Ip.call(this,Tp,kp.prototype.sendLogItemsConsole)||this}return kp.prototype.clog=function(Tp){ap._console.log(Tp)},kp.prototype.cerror=function(Tp){ap._console.error?ap._console.error(Tp):this.clog(Tp)},kp.prototype.cwarn=function(Tp){ap._console.warn?ap._console.warn(Tp):this.clog(Tp)},kp.prototype.cinfo=function(Tp){ap._console.info?ap._console.info(Tp):this.clog(Tp)},kp.prototype.cdebug=function(Tp){ap._console.debug?ap._console.debug(Tp):this.cinfo(Tp)},kp.prototype.sendLogItemsConsole=function(Tp,Np){try{if(!lp(this)||!ap._console)return;var Lp;for(Lp=0;Lp<Tp.length;++Lp){var Vp=Tp[Lp],zp=Vp.n+": "+Vp.m;typeof window>"u"&&(zp=new Date(Vp.t)+" | "+zp),Vp.l<=ap.getDebugLevel()?this.cdebug(zp):Vp.l<=ap.getInfoLevel()?this.cinfo(zp):Vp.l<=ap.getWarnLevel()?this.cwarn(zp):this.cerror(zp)}}catch{}Np()},kp}(Pp);ap.ConsoleAppender=jp;var Mp=function(){function Ip(kp){this.loggerName=kp,this.seenRegexes=[]}return Ip.prototype.setOptions=function(kp){return sp("level",kp,this),sp("userAgentRegex",kp,this),sp("disallow",kp,this),sp("ipRegex",kp,this),sp("appenders",kp,this),sp("onceOnly",kp,this),this.seenRegexes=[],this},Ip.prototype.buildExceptionObject=function(kp){var Tp={};return kp.stack?Tp.stack=kp.stack:Tp.e=kp,kp.message&&(Tp.message=kp.message),kp.name&&(Tp.name=kp.name),kp.data&&(Tp.data=kp.data),kp.inner&&(Tp.inner=this.buildExceptionObject(kp.inner)),Tp},Ip.prototype.log=function(kp,Tp,Np){var Lp=0,Vp,zp;if(!this.appenders)return this;if(kp>=this.level&&lp(this)&&(Np?(zp=this.buildExceptionObject(Np),zp.logData=cp(Tp)):zp=Tp,Vp=fp(zp),up(this,Vp.finalString))){if(this.onceOnly)for(Lp=this.onceOnly.length-1;Lp>=0;){if(new RegExp(this.onceOnly[Lp]).test(Vp.finalString)){if(this.seenRegexes[Lp])return this;this.seenRegexes[Lp]=!0}Lp--}for(Vp.meta=Vp.meta||{},Lp=this.appenders.length-1;Lp>=0;)this.appenders[Lp].log(Ep(kp),Vp.msg,Vp.meta,function(){},kp,Vp.finalString,this.loggerName),Lp--}return this},Ip.prototype.trace=function(kp){return this.log(mp(),kp)},Ip.prototype.debug=function(kp){return this.log(gp(),kp)},Ip.prototype.info=function(kp){return this.log(vp(),kp)},Ip.prototype.warn=function(kp){return this.log(xp(),kp)},Ip.prototype.error=function(kp){return this.log(Sp(),kp)},Ip.prototype.fatal=function(kp){return this.log(yp(),kp)},Ip.prototype.fatalException=function(kp,Tp){return this.log(yp(),kp,Tp)},Ip}();ap.Logger=Mp;function Ap(Ip){return new Op(Ip)}ap.createAjaxAppender=Ap;function Dp(Ip){return new jp(Ip)}ap.createConsoleAppender=Dp;var Fp;typeof window<"u"?Fp=new Op(""):Fp=new jp(""),ap.__=new ap.Logger(""),ap.__.setOptions({level:ap.getDebugLevel(),appenders:[Fp]})})(rp||(rp={})),_d.__esModule=!0,_d.JL=rp,typeof __jsnlog_configure=="function"&&__jsnlog_configure(rp),typeof window<"u"&&!window.onerror&&(window.onerror=function(ap,sp,lp,up,cp){return rp("onerrorLogger").fatalException({msg:"Uncaught Exception",errorMsg:ap?ap.message||ap:"",url:sp,"line number":lp,column:up},cp),!1}),typeof window<"u"&&!window.onunhandledrejection&&(window.onunhandledrejection=function(ap){rp("onerrorLogger").fatalException({msg:"unhandledrejection",errorMsg:ap.reason?ap.reason.message:ap.message||null},ap.reason)})})(jsnlog);var OpenVidu$1={},LocalRecorder$1={},LocalRecorderState={};(function(_d){Object.defineProperty(_d,"__esModule",{value:!0}),_d.LocalRecorderState=void 0,function(np){np.READY="READY",np.RECORDING="RECORDING",np.PAUSED="PAUSED",np.FINISHED="FINISHED"}(_d.LocalRecorderState||(_d.LocalRecorderState={}))})(LocalRecorderState);var OpenViduLogger$1={},ConsoleLogger$1={};Object.defineProperty(ConsoleLogger$1,"__esModule",{value:!0});ConsoleLogger$1.ConsoleLogger=void 0;var ConsoleLogger=function(){function _d(np){this.logger=np,this.log=np.log,this.info=np.info,this.debug=np.debug,this.warn=np.warn,this.error=np.error}return _d}();ConsoleLogger$1.ConsoleLogger=ConsoleLogger;var OpenViduLoggerConfiguration={};(function(_d){Object.defineProperty(_d,"__esModule",{value:!0}),_d.OpenViduLoggerConfiguration=void 0,function(np){np.disabled="disabled",np.debug="debug",np.debug_app="debug_app"}(_d.OpenViduLoggerConfiguration||(_d.OpenViduLoggerConfiguration={}))})(OpenViduLoggerConfiguration);Object.defineProperty(OpenViduLogger$1,"__esModule",{value:!0});OpenViduLogger$1.OpenViduLogger=void 0;var jsnlog_1=jsnlog,ConsoleLogger_1=ConsoleLogger$1,OpenViduLoggerConfiguration_1$1=OpenViduLoggerConfiguration,OpenViduLogger=function(){function _d(){this.JSNLOG_URL="/openvidu/elk/openvidu-browser-logs",this.MAX_JSNLOG_BATCH_LOG_MESSAGES=100,this.MAX_MSECONDS_BATCH_MESSAGES=5e3,this.MAX_LENGTH_STRING_JSON=1e3,this.defaultConsoleLogger=new ConsoleLogger_1.ConsoleLogger(globalThis.console),this.isProdMode=!1,this.isJSNLogSetup=!1}return _d.configureJSNLog=function(np,rp){var ap=this;try{if(globalThis.LOG_JSNLOG_RESULTS||this.instance&&np.isAtLeastPro&&this.instance.isOpenViduBrowserLogsDebugActive(np)&&this.instance.canConfigureJSNLog(np,this.instance)){np.sendBrowserLogs===OpenViduLoggerConfiguration_1$1.OpenViduLoggerConfiguration.debug_app&&this.instance.replaceWindowConsole(),this.instance.isJSNLogSetup=!1,this.instance.info("Configuring JSNLogs.");var sp=np.finalUserId,lp=np.session.sessionId,up=function(dp){var fp=dp.onreadystatechange;dp.onreadystatechange=function(){ap.isInvalidResponse(dp)&&(Object.defineProperty(dp,"readyState",{value:4}),Object.defineProperty(dp,"status",{value:200}),ap.instance.disableLogger()),fp()},dp.setRequestHeader("Authorization","Basic "+btoa("".concat(sp,"%/%").concat(lp)+":"+rp)),dp.setRequestHeader("X-Requested-With","XMLHttpRequest"),dp.setRequestHeader("OV-Final-User-Id",sp),dp.setRequestHeader("OV-Session-Id",lp),dp.setRequestHeader("OV-Token",rp)};this.instance.currentAppender=jsnlog_1.JL.createAjaxAppender("appender-".concat(sp,"-").concat(lp)),this.instance.currentAppender.setOptions({beforeSend:up,maxBatchSize:1e3,batchSize:this.instance.MAX_JSNLOG_BATCH_LOG_MESSAGES,batchTimeout:this.instance.MAX_MSECONDS_BATCH_MESSAGES});var cp=function(dp){var fp=function(){var hp=new WeakSet;return function(mp,gp){if(typeof gp=="object"&&gp!=null){if(hp.has(gp)||globalThis.HTMLElement&&gp instanceof HTMLElement)return;hp.add(gp)}return gp}},pp=JSON.stringify(dp,fp());return pp.length>ap.instance.MAX_LENGTH_STRING_JSON&&(pp="".concat(pp.substring(0,ap.instance.MAX_LENGTH_STRING_JSON),"...")),globalThis.LOG_JSNLOG_RESULTS&&console.log(pp),pp};jsnlog_1.JL.setOptions({defaultAjaxUrl:np.httpUri+this.instance.JSNLOG_URL,serialize:cp,enabled:!0}),(0,jsnlog_1.JL)().setOptions({appenders:[this.instance.currentAppender]}),this.instance.isJSNLogSetup=!0,this.instance.loggingSessionId=lp,this.instance.info("JSNLog configured.")}}catch(dp){console.error("Error configuring JSNLog: "),console.error(dp),this.instance.disableLogger()}},_d.getInstance=function(){return _d.instance||(_d.instance=new _d),_d.instance},_d.isInvalidResponse=function(np){return np.status==401||np.status==403||np.status==404||np.status==0},_d.prototype.canConfigureJSNLog=function(np,rp){return np.session.sessionId!=rp.loggingSessionId},_d.prototype.isOpenViduBrowserLogsDebugActive=function(np){return np.sendBrowserLogs===OpenViduLoggerConfiguration_1$1.OpenViduLoggerConfiguration.debug||np.sendBrowserLogs===OpenViduLoggerConfiguration_1$1.OpenViduLoggerConfiguration.debug_app},_d.prototype.getConsoleWithJSNLog=function(){return function(np){return{log:function(){np.defaultConsoleLogger.log.apply(np.defaultConsoleLogger.logger,arguments),np.isJSNLogSetup&&(0,jsnlog_1.JL)().info(arguments)},info:function(){np.defaultConsoleLogger.info.apply(np.defaultConsoleLogger.logger,arguments),np.isJSNLogSetup&&(0,jsnlog_1.JL)().info(arguments)},debug:function(){np.defaultConsoleLogger.debug.apply(np.defaultConsoleLogger.logger,arguments)},warn:function(){np.defaultConsoleLogger.warn.apply(np.defaultConsoleLogger.logger,arguments),np.isJSNLogSetup&&(0,jsnlog_1.JL)().warn(arguments)},error:function(){np.defaultConsoleLogger.error.apply(np.defaultConsoleLogger.logger,arguments),np.isJSNLogSetup&&(0,jsnlog_1.JL)().error(arguments)}}}(this)},_d.prototype.replaceWindowConsole=function(){globalThis.console=this.defaultConsoleLogger.logger,globalThis.console.log=this.getConsoleWithJSNLog().log,globalThis.console.info=this.getConsoleWithJSNLog().info,globalThis.console.debug=this.getConsoleWithJSNLog().debug,globalThis.console.warn=this.getConsoleWithJSNLog().warn,globalThis.console.error=this.getConsoleWithJSNLog().error},_d.prototype.disableLogger=function(){jsnlog_1.JL.setOptions({enabled:!1}),this.isJSNLogSetup=!1,this.loggingSessionId=void 0,this.currentAppender=void 0,globalThis.console=this.defaultConsoleLogger.logger,globalThis.console.log=this.defaultConsoleLogger.log,globalThis.console.info=this.defaultConsoleLogger.info,globalThis.console.debug=this.defaultConsoleLogger.debug,globalThis.console.warn=this.defaultConsoleLogger.warn,globalThis.console.error=this.defaultConsoleLogger.error},_d.prototype.log=function(){this.isProdMode||this.defaultConsoleLogger.log.apply(this.defaultConsoleLogger.logger,arguments),this.isJSNLogSetup&&(0,jsnlog_1.JL)().info(arguments)},_d.prototype.debug=function(){this.isProdMode||this.defaultConsoleLogger.debug.apply(this.defaultConsoleLogger.logger,arguments)},_d.prototype.info=function(){this.isProdMode||this.defaultConsoleLogger.info.apply(this.defaultConsoleLogger.logger,arguments),this.isJSNLogSetup&&(0,jsnlog_1.JL)().info(arguments)},_d.prototype.warn=function(){this.defaultConsoleLogger.warn.apply(this.defaultConsoleLogger.logger,arguments),this.isJSNLogSetup&&(0,jsnlog_1.JL)().warn(arguments)},_d.prototype.error=function(){this.defaultConsoleLogger.error.apply(this.defaultConsoleLogger.logger,arguments),this.isJSNLogSetup&&(0,jsnlog_1.JL)().error(arguments)},_d.prototype.flush=function(){this.isJSNLogSetup&&this.currentAppender!=null&&this.currentAppender.sendBatch()},_d.prototype.enableProdMode=function(){this.isProdMode=!0},_d}();OpenViduLogger$1.OpenViduLogger=OpenViduLogger;var Platform={},platform$6={exports:{}};/*!
 * Platform.js v1.3.6
 * Copyright 2014-2020 Benjamin Tan
 * Copyright 2011-2013 John-David Dalton
 * Available under MIT license
 */platform$6.exports;(function(_d,np){(function(){var rp={function:!0,object:!0},ap=rp[typeof window]&&window||this,sp=np,lp=_d&&!_d.nodeType&&_d,up=sp&&lp&&typeof commonjsGlobal=="object"&&commonjsGlobal;up&&(up.global===up||up.window===up||up.self===up)&&(ap=up);var cp=Math.pow(2,53)-1,dp=/\bOpera/,fp=Object.prototype,pp=fp.hasOwnProperty,hp=fp.toString;function mp(Rp){return Rp=String(Rp),Rp.charAt(0).toUpperCase()+Rp.slice(1)}function gp(Rp,Pp,Op){var jp={"10.0":"10","6.4":"10 Technical Preview","6.3":"8.1","6.2":"8","6.1":"Server 2008 R2 / 7","6.0":"Server 2008 / Vista","5.2":"Server 2003 / XP 64-bit","5.1":"XP","5.01":"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return Pp&&Op&&/^Win/i.test(Rp)&&!/^Windows Phone /i.test(Rp)&&(jp=jp[/[\d.]+$/.exec(Rp)])&&(Rp="Windows "+jp),Rp=String(Rp),Pp&&Op&&(Rp=Rp.replace(RegExp(Pp,"i"),Op)),Rp=xp(Rp.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0]),Rp}function vp(Rp,Pp){var Op=-1,jp=Rp?Rp.length:0;if(typeof jp=="number"&&jp>-1&&jp<=cp)for(;++Op<jp;)Pp(Rp[Op],Op,Rp);else Sp(Rp,Pp)}function xp(Rp){return Rp=_p(Rp),/^(?:webOS|i(?:OS|P))/.test(Rp)?Rp:mp(Rp)}function Sp(Rp,Pp){for(var Op in Rp)pp.call(Rp,Op)&&Pp(Rp[Op],Op,Rp)}function yp(Rp){return Rp==null?mp(Rp):hp.call(Rp).slice(8,-1)}function bp(Rp,Pp){var Op=Rp!=null?typeof Rp[Pp]:"number";return!/^(?:boolean|number|string|undefined)$/.test(Op)&&(Op=="object"?!!Rp[Pp]:!0)}function Ep(Rp){return String(Rp).replace(/([ -])(?!$)/g,"$1?")}function wp(Rp,Pp){var Op=null;return vp(Rp,function(jp,Mp){Op=Pp(Op,jp,Mp,Rp)}),Op}function _p(Rp){return String(Rp).replace(/^ +| +$/g,"")}function Cp(Rp){var Pp=ap,Op=Rp&&typeof Rp=="object"&&yp(Rp)!="String";Op&&(Pp=Rp,Rp=null);var jp=Pp.navigator||{},Mp=jp.userAgent||"";Rp||(Rp=Mp);var Ap=Op?!!jp.likeChrome:/\bChrome\b/.test(Rp)&&!/internal|\n/i.test(hp.toString()),Dp="Object",Fp=Op?Dp:"ScriptBridgingProxyObject",Ip=Op?Dp:"Environment",kp=Op&&Pp.java?"JavaPackage":yp(Pp.java),Tp=Op?Dp:"RuntimeObject",Np=/\bJava/.test(kp)&&Pp.java,Lp=Np&&yp(Pp.environment)==Ip,Vp=Np?"a":"α",zp=Np?"b":"β",Wp=Pp.document||{},Up=Pp.operamini||Pp.opera,qp=dp.test(qp=Op&&Up?Up["[[Class]]"]:yp(Up))?qp:Up=null,Bp,Yp=Rp,Xp=[],Qp=null,am=Rp==Mp,Jp=am&&Up&&typeof Up.version=="function"&&Up.version(),im,Zp=_m([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"]),Gp=Rm(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"(?:Edge|Edg|EdgA|EdgiOS)"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Vivaldi","Waterfox","WebPositive",{label:"Yandex Browser",pattern:"YaBrowser"},{label:"UC Browser",pattern:"UCBrowser"},"Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chromium","Chrome",{label:"Chrome",pattern:"(?:HeadlessChrome)"},{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),tm=$m([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),om=Cm({Apple:{iPad:1,iPhone:1,iPod:1},Alcatel:{},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},Huawei:{},Lenovo:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Oppo:{},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1},Xiaomi:{Mi:1,Redmi:1}}),em=Em(["Windows Phone","KaiOS","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian",{label:"DragonFly BSD",pattern:"DragonFly"},"Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);function _m(hm){return wp(hm,function(sm,cm){return sm||RegExp("\\b"+(cm.pattern||Ep(cm))+"\\b","i").exec(Rp)&&(cm.label||cm)})}function Cm(hm){return wp(hm,function(sm,cm,ym){return sm||(cm[tm]||cm[/^[a-z]+(?: +[a-z]+\b)*/i.exec(tm)]||RegExp("\\b"+Ep(ym)+"(?:\\b|\\w*\\d)","i").exec(Rp))&&ym})}function Rm(hm){return wp(hm,function(sm,cm){return sm||RegExp("\\b"+(cm.pattern||Ep(cm))+"\\b","i").exec(Rp)&&(cm.label||cm)})}function Em(hm){return wp(hm,function(sm,cm){var ym=cm.pattern||Ep(cm);return!sm&&(sm=RegExp("\\b"+ym+"(?:/[\\d.]+|[ \\w.]*)","i").exec(Rp))&&(sm=gp(sm,ym,cm.label||cm)),sm})}function $m(hm){return wp(hm,function(sm,cm){var ym=cm.pattern||Ep(cm);return!sm&&(sm=RegExp("\\b"+ym+" *\\d+[.\\w_]*","i").exec(Rp)||RegExp("\\b"+ym+" *\\w+-[\\w]*","i").exec(Rp)||RegExp("\\b"+ym+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(Rp))&&((sm=String(cm.label&&!RegExp(ym,"i").test(cm.label)?cm.label:sm).split("/"))[1]&&!/[\d.]+/.test(sm[0])&&(sm[0]+=" "+sm[1]),cm=cm.label||cm,sm=xp(sm[0].replace(RegExp(ym,"i"),cm).replace(RegExp("; *(?:"+cm+"[_-])?","i")," ").replace(RegExp("("+cm+")[-_.]?(\\w)","i"),"$1 $2"))),sm})}function fm(hm){return wp(hm,function(sm,cm){return sm||(RegExp(cm+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(Rp)||0)[1]||null})}function wm(){return this.description||""}if(Zp&&(Zp=[Zp]),/\bAndroid\b/.test(em)&&!tm&&(Bp=/\bAndroid[^;]*;(.*?)(?:Build|\) AppleWebKit)\b/i.exec(Rp))&&(tm=_p(Bp[1]).replace(/^[a-z]{2}-[a-z]{2};\s*/i,"")||null),om&&!tm?tm=$m([om]):om&&tm&&(tm=tm.replace(RegExp("^("+Ep(om)+")[-_.\\s]","i"),om+" ").replace(RegExp("^("+Ep(om)+")[-_.]?(\\w)","i"),om+" $2")),(Bp=/\bGoogle TV\b/.exec(tm))&&(tm=Bp[0]),/\bSimulator\b/i.test(Rp)&&(tm=(tm?tm+" ":"")+"Simulator"),Gp=="Opera Mini"&&/\bOPiOS\b/.test(Rp)&&Xp.push("running in Turbo/Uncompressed mode"),Gp=="IE"&&/\blike iPhone OS\b/.test(Rp)?(Bp=Cp(Rp.replace(/like iPhone OS/,"")),om=Bp.manufacturer,tm=Bp.product):/^iP/.test(tm)?(Gp||(Gp="Safari"),em="iOS"+((Bp=/ OS ([\d_]+)/i.exec(Rp))?" "+Bp[1].replace(/_/g,"."):"")):Gp=="Konqueror"&&/^Linux\b/i.test(em)?em="Kubuntu":om&&om!="Google"&&(/Chrome/.test(Gp)&&!/\bMobile Safari\b/i.test(Rp)||/\bVita\b/.test(tm))||/\bAndroid\b/.test(em)&&/^Chrome/.test(Gp)&&/\bVersion\//i.test(Rp)?(Gp="Android Browser",em=/\bAndroid\b/.test(em)?em:"Android"):Gp=="Silk"?(/\bMobi/i.test(Rp)||(em="Android",Xp.unshift("desktop mode")),/Accelerated *= *true/i.test(Rp)&&Xp.unshift("accelerated")):Gp=="UC Browser"&&/\bUCWEB\b/.test(Rp)?Xp.push("speed mode"):Gp=="PaleMoon"&&(Bp=/\bFirefox\/([\d.]+)\b/.exec(Rp))?Xp.push("identifying as Firefox "+Bp[1]):Gp=="Firefox"&&(Bp=/\b(Mobile|Tablet|TV)\b/i.exec(Rp))?(em||(em="Firefox OS"),tm||(tm=Bp[1])):!Gp||(Bp=!/\bMinefield\b/i.test(Rp)&&/\b(?:Firefox|Safari)\b/.exec(Gp))?(Gp&&!tm&&/[\/,]|^[^(]+?\)/.test(Rp.slice(Rp.indexOf(Bp+"/")+8))&&(Gp=null),(Bp=tm||om||em)&&(tm||om||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(em))&&(Gp=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(em)?em:Bp)+" Browser")):Gp=="Electron"&&(Bp=(/\bChrome\/([\d.]+)\b/.exec(Rp)||0)[1])&&Xp.push("Chromium "+Bp),Jp||(Jp=fm(["(?:Cloud9|CriOS|CrMo|Edge|Edg|EdgA|EdgiOS|FxiOS|HeadlessChrome|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$)|UCBrowser|YaBrowser)","Version",Ep(Gp),"(?:Firefox|Minefield|NetFront)"])),(Bp=Zp=="iCab"&&parseFloat(Jp)>3&&"WebKit"||/\bOpera\b/.test(Gp)&&(/\bOPR\b/.test(Rp)?"Blink":"Presto")||/\b(?:Midori|Nook|Safari)\b/i.test(Rp)&&!/^(?:Trident|EdgeHTML)$/.test(Zp)&&"WebKit"||!Zp&&/\bMSIE\b/i.test(Rp)&&(em=="Mac OS"?"Tasman":"Trident")||Zp=="WebKit"&&/\bPlayStation\b(?! Vita\b)/i.test(Gp)&&"NetFront")&&(Zp=[Bp]),Gp=="IE"&&(Bp=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(Rp)||0)[1])?(Gp+=" Mobile",em="Windows Phone "+(/\+$/.test(Bp)?Bp:Bp+".x"),Xp.unshift("desktop mode")):/\bWPDesktop\b/i.test(Rp)?(Gp="IE Mobile",em="Windows Phone 8.x",Xp.unshift("desktop mode"),Jp||(Jp=(/\brv:([\d.]+)/.exec(Rp)||0)[1])):Gp!="IE"&&Zp=="Trident"&&(Bp=/\brv:([\d.]+)/.exec(Rp))&&(Gp&&Xp.push("identifying as "+Gp+(Jp?" "+Jp:"")),Gp="IE",Jp=Bp[1]),am){if(bp(Pp,"global"))if(Np&&(Bp=Np.lang.System,Yp=Bp.getProperty("os.arch"),em=em||Bp.getProperty("os.name")+" "+Bp.getProperty("os.version")),Lp){try{Jp=Pp.require("ringo/engine").version.join("."),Gp="RingoJS"}catch{(Bp=Pp.system)&&Bp.global.system==Pp.system&&(Gp="Narwhal",em||(em=Bp[0].os||null))}Gp||(Gp="Rhino")}else typeof Pp.process=="object"&&!Pp.process.browser&&(Bp=Pp.process)&&(typeof Bp.versions=="object"&&(typeof Bp.versions.electron=="string"?(Xp.push("Node "+Bp.versions.node),Gp="Electron",Jp=Bp.versions.electron):typeof Bp.versions.nw=="string"&&(Xp.push("Chromium "+Jp,"Node "+Bp.versions.node),Gp="NW.js",Jp=Bp.versions.nw)),Gp||(Gp="Node.js",Yp=Bp.arch,em=Bp.platform,Jp=/[\d.]+/.exec(Bp.version),Jp=Jp?Jp[0]:null));else yp(Bp=Pp.runtime)==Fp?(Gp="Adobe AIR",em=Bp.flash.system.Capabilities.os):yp(Bp=Pp.phantom)==Tp?(Gp="PhantomJS",Jp=(Bp=Bp.version||null)&&Bp.major+"."+Bp.minor+"."+Bp.patch):typeof Wp.documentMode=="number"&&(Bp=/\bTrident\/(\d+)/i.exec(Rp))?(Jp=[Jp,Wp.documentMode],(Bp=+Bp[1]+4)!=Jp[1]&&(Xp.push("IE "+Jp[1]+" mode"),Zp&&(Zp[1]=""),Jp[1]=Bp),Jp=Gp=="IE"?String(Jp[1].toFixed(1)):Jp[0]):typeof Wp.documentMode=="number"&&/^(?:Chrome|Firefox)\b/.test(Gp)&&(Xp.push("masking as "+Gp+" "+Jp),Gp="IE",Jp="11.0",Zp=["Trident"],em="Windows");em=em&&xp(em)}if(Jp&&(Bp=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(Jp)||/(?:alpha|beta)(?: ?\d)?/i.exec(Rp+";"+(am&&jp.appMinorVersion))||/\bMinefield\b/i.test(Rp)&&"a")&&(Qp=/b/i.test(Bp)?"beta":"alpha",Jp=Jp.replace(RegExp(Bp+"\\+?$"),"")+(Qp=="beta"?zp:Vp)+(/\d+\+?/.exec(Bp)||"")),Gp=="Fennec"||Gp=="Firefox"&&/\b(?:Android|Firefox OS|KaiOS)\b/.test(em))Gp="Firefox Mobile";else if(Gp=="Maxthon"&&Jp)Jp=Jp.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(tm))tm=="Xbox 360"&&(em=null),tm=="Xbox 360"&&/\bIEMobile\b/.test(Rp)&&Xp.unshift("mobile mode");else if((/^(?:Chrome|IE|Opera)$/.test(Gp)||Gp&&!tm&&!/Browser|Mobi/.test(Gp))&&(em=="Windows CE"||/Mobi/i.test(Rp)))Gp+=" Mobile";else if(Gp=="IE"&&am)try{Pp.external===null&&Xp.unshift("platform preview")}catch{Xp.unshift("embedded")}else(/\bBlackBerry\b/.test(tm)||/\bBB10\b/.test(Rp))&&(Bp=(RegExp(tm.replace(/ +/g," *")+"/([.\\d]+)","i").exec(Rp)||0)[1]||Jp)?(Bp=[Bp,/BB10/.test(Rp)],em=(Bp[1]?(tm=null,om="BlackBerry"):"Device Software")+" "+Bp[0],Jp=null):this!=Sp&&tm!="Wii"&&(am&&Up||/Opera/.test(Gp)&&/\b(?:MSIE|Firefox)\b/i.test(Rp)||Gp=="Firefox"&&/\bOS X (?:\d+\.){2,}/.test(em)||Gp=="IE"&&(em&&!/^Win/.test(em)&&Jp>5.5||/\bWindows XP\b/.test(em)&&Jp>8||Jp==8&&!/\bTrident\b/.test(Rp)))&&!dp.test(Bp=Cp.call(Sp,Rp.replace(dp,"")+";"))&&Bp.name&&(Bp="ing as "+Bp.name+((Bp=Bp.version)?" "+Bp:""),dp.test(Gp)?(/\bIE\b/.test(Bp)&&em=="Mac OS"&&(em=null),Bp="identify"+Bp):(Bp="mask"+Bp,qp?Gp=xp(qp.replace(/([a-z])([A-Z])/g,"$1 $2")):Gp="Opera",/\bIE\b/.test(Bp)&&(em=null),am||(Jp=null)),Zp=["Presto"],Xp.push(Bp));(Bp=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(Rp)||0)[1])&&(Bp=[parseFloat(Bp.replace(/\.(\d)$/,".0$1")),Bp],Gp=="Safari"&&Bp[1].slice(-1)=="+"?(Gp="WebKit Nightly",Qp="alpha",Jp=Bp[1].slice(0,-1)):(Jp==Bp[1]||Jp==(Bp[2]=(/\bSafari\/([\d.]+\+?)/i.exec(Rp)||0)[1]))&&(Jp=null),Bp[1]=(/\b(?:Headless)?Chrome\/([\d.]+)/i.exec(Rp)||0)[1],Bp[0]==537.36&&Bp[2]==537.36&&parseFloat(Bp[1])>=28&&Zp=="WebKit"&&(Zp=["Blink"]),!am||!Ap&&!Bp[1]?(Zp&&(Zp[1]="like Safari"),Bp=(Bp=Bp[0],Bp<400?1:Bp<500?2:Bp<526?3:Bp<533?4:Bp<534?"4+":Bp<535?5:Bp<537?6:Bp<538?7:Bp<601?8:Bp<602?9:Bp<604?10:Bp<606?11:Bp<608?12:"12")):(Zp&&(Zp[1]="like Chrome"),Bp=Bp[1]||(Bp=Bp[0],Bp<530?1:Bp<532?2:Bp<532.05?3:Bp<533?4:Bp<534.03?5:Bp<534.07?6:Bp<534.1?7:Bp<534.13?8:Bp<534.16?9:Bp<534.24?10:Bp<534.3?11:Bp<535.01?12:Bp<535.02?"13+":Bp<535.07?15:Bp<535.11?16:Bp<535.19?17:Bp<536.05?18:Bp<536.1?19:Bp<537.01?20:Bp<537.11?"21+":Bp<537.13?23:Bp<537.18?24:Bp<537.24?25:Bp<537.36?26:Zp!="Blink"?"27":"28")),Zp&&(Zp[1]+=" "+(Bp+=typeof Bp=="number"?".x":/[.+]/.test(Bp)?"":"+")),Gp=="Safari"&&(!Jp||parseInt(Jp)>45)?Jp=Bp:Gp=="Chrome"&&/\bHeadlessChrome/i.test(Rp)&&Xp.unshift("headless")),Gp=="Opera"&&(Bp=/\bzbov|zvav$/.exec(em))?(Gp+=" ",Xp.unshift("desktop mode"),Bp=="zvav"?(Gp+="Mini",Jp=null):Gp+="Mobile",em=em.replace(RegExp(" *"+Bp+"$"),"")):Gp=="Safari"&&/\bChrome\b/.exec(Zp&&Zp[1])?(Xp.unshift("desktop mode"),Gp="Chrome Mobile",Jp=null,/\bOS X\b/.test(em)?(om="Apple",em="iOS 4.3+"):em=null):/\bSRWare Iron\b/.test(Gp)&&!Jp&&(Jp=fm("Chrome")),Jp&&Jp.indexOf(Bp=/[\d.]+$/.exec(em))==0&&Rp.indexOf("/"+Bp+"-")>-1&&(em=_p(em.replace(Bp,""))),em&&em.indexOf(Gp)!=-1&&!RegExp(Gp+" OS").test(em)&&(em=em.replace(RegExp(" *"+Ep(Gp)+" *"),"")),Zp&&!/\b(?:Avant|Nook)\b/.test(Gp)&&(/Browser|Lunascape|Maxthon/.test(Gp)||Gp!="Safari"&&/^iOS/.test(em)&&/\bSafari\b/.test(Zp[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|SRWare Iron|Vivaldi|Web)/.test(Gp)&&Zp[1])&&(Bp=Zp[Zp.length-1])&&Xp.push(Bp),Xp.length&&(Xp=["("+Xp.join("; ")+")"]),om&&tm&&tm.indexOf(om)<0&&Xp.push("on "+om),tm&&Xp.push((/^on /.test(Xp[Xp.length-1])?"":"on ")+tm),em&&(Bp=/ ([\d.+]+)$/.exec(em),im=Bp&&em.charAt(em.length-Bp[0].length-1)=="/",em={architecture:32,family:Bp&&!im?em.replace(Bp[0],""):em,version:Bp?Bp[1]:null,toString:function(){var hm=this.version;return this.family+(hm&&!im?" "+hm:"")+(this.architecture==64?" 64-bit":"")}}),(Bp=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(Yp))&&!/\bi686\b/i.test(Yp)?(em&&(em.architecture=64,em.family=em.family.replace(RegExp(" *"+Bp),"")),Gp&&(/\bWOW64\b/i.test(Rp)||am&&/\w(?:86|32)$/.test(jp.cpuClass||jp.platform)&&!/\bWin64; x64\b/i.test(Rp))&&Xp.unshift("32-bit")):em&&/^OS X/.test(em.family)&&Gp=="Chrome"&&parseFloat(Jp)>=39&&(em.architecture=64),Rp||(Rp=null);var pm={};return pm.description=Rp,pm.layout=Zp&&Zp[0],pm.manufacturer=om,pm.name=Gp,pm.prerelease=Qp,pm.product=tm,pm.ua=Rp,pm.version=Gp&&Jp,pm.os=em||{architecture:null,family:null,version:null,toString:function(){return"null"}},pm.parse=Cp,pm.toString=wm,pm.version&&Xp.unshift(Jp),pm.name&&Xp.unshift(Gp),em&&Gp&&!(em==String(em).split(" ")[0]&&(em==Gp.split(" ")[0]||tm))&&Xp.push(tm?"("+em+")":"on "+em),Xp.length&&(pm.description=Xp.join(" ")),pm}var $p=Cp();sp&&lp?Sp($p,function(Rp,Pp){sp[Pp]=Rp}):ap.platform=$p}).call(commonjsGlobal)})(platform$6,platform$6.exports);var platformExports=platform$6.exports;Object.defineProperty(Platform,"__esModule",{value:!0});Platform.PlatformUtils=void 0;var platform$5=platformExports,PlatformUtils=function(){function _d(){}return _d.getInstance=function(){return this.instance||(this.instance=new _d),_d.instance},_d.prototype.isChromeBrowser=function(){return platform$5.name==="Chrome"},_d.prototype.isSafariBrowser=function(){return platform$5.name==="Safari"},_d.prototype.isChromeMobileBrowser=function(){return platform$5.name==="Chrome Mobile"},_d.prototype.isFirefoxBrowser=function(){return platform$5.name==="Firefox"},_d.prototype.isFirefoxMobileBrowser=function(){return platform$5.name==="Firefox Mobile"||platform$5.name==="Firefox for iOS"},_d.prototype.isOperaBrowser=function(){return platform$5.name==="Opera"},_d.prototype.isOperaMobileBrowser=function(){return platform$5.name==="Opera Mobile"},_d.prototype.isEdgeBrowser=function(){var np=platform$5!=null&&platform$5.version?parseFloat(platform$5.version):-1;return platform$5.name==="Microsoft Edge"&&np>=80},_d.prototype.isEdgeMobileBrowser=function(){var np,rp,ap=platform$5!=null&&platform$5.version?parseFloat(platform$5.version):-1;return platform$5.name==="Microsoft Edge"&&(((np=platform$5.os)===null||np===void 0?void 0:np.family)==="Android"||((rp=platform$5.os)===null||rp===void 0?void 0:rp.family)==="iOS")&&ap>45},_d.prototype.isAndroidBrowser=function(){return platform$5.name==="Android Browser"},_d.prototype.isElectron=function(){return platform$5.name==="Electron"},_d.prototype.isNodeJs=function(){return platform$5.name==="Node.js"},_d.prototype.isSamsungBrowser=function(){return platform$5.name==="Samsung Internet Mobile"||platform$5.name==="Samsung Internet"},_d.prototype.isMotorolaEdgeDevice=function(){var np;return((np=platform$5.product)===null||np===void 0?void 0:np.toLowerCase().includes("motorola edge"))||!1},_d.prototype.isIPhoneOrIPad=function(){var np=platform$5.ua?platform$5.ua:navigator.userAgent,rp="ontouchend"in document,ap=/\b(\w*Macintosh\w*)\b/.test(np)&&rp,sp=/\b(\w*iPhone\w*)\b/.test(np)&&/\b(\w*Mobile\w*)\b/.test(np)&&rp;return ap||sp},_d.prototype.isIOSWithSafari=function(){var np=platform$5.ua?platform$5.ua:navigator.userAgent;return this.isIPhoneOrIPad()&&/\b(\w*Apple\w*)\b/.test(navigator.vendor)&&/\b(\w*Safari\w*)\b/.test(np)&&!/\b(\w*CriOS\w*)\b/.test(np)&&!/\b(\w*FxiOS\w*)\b/.test(np)},_d.prototype.isIonicIos=function(){return this.isIPhoneOrIPad()&&platform$5.ua.indexOf("Safari")===-1},_d.prototype.isIonicAndroid=function(){return platform$5.os.family==="Android"&&platform$5.name=="Android Browser"},_d.prototype.isMobileDevice=function(){return platform$5.os.family==="iOS"||platform$5.os.family==="Android"},_d.prototype.isReactNative=function(){return!1},_d.prototype.isChromium=function(){return this.isChromeBrowser()||this.isChromeMobileBrowser()||this.isOperaBrowser()||this.isOperaMobileBrowser()||this.isEdgeBrowser()||this.isEdgeMobileBrowser()||this.isSamsungBrowser()||this.isIonicAndroid()||this.isIonicIos()||this.isElectron()||this.isMotorolaEdgeDevice()},_d.prototype.canScreenShare=function(){var np=platform$5!=null&&platform$5.version?parseFloat(platform$5.version):-1;return this.isMobileDevice()?!1:this.isChromeBrowser()||this.isFirefoxBrowser()||this.isOperaBrowser()||this.isElectron()||this.isEdgeBrowser()||this.isSafariBrowser()&&np>=13},_d.prototype.getName=function(){return platform$5.name||""},_d.prototype.getVersion=function(){return platform$5.version||""},_d.prototype.getFamily=function(){return platform$5.os.family||""},_d.prototype.getDescription=function(){return platform$5.description||""},_d}();Platform.PlatformUtils=PlatformUtils;function Mime$2(){this._types=Object.create(null),this._extensions=Object.create(null);for(let _d=0;_d<arguments.length;_d++)this.define(arguments[_d]);this.define=this.define.bind(this),this.getType=this.getType.bind(this),this.getExtension=this.getExtension.bind(this)}Mime$2.prototype.define=function(_d,np){for(let rp in _d){let ap=_d[rp].map(function(sp){return sp.toLowerCase()});rp=rp.toLowerCase();for(let sp=0;sp<ap.length;sp++){const lp=ap[sp];if(lp[0]!=="*"){if(!np&&lp in this._types)throw new Error('Attempt to change mapping for "'+lp+'" extension from "'+this._types[lp]+'" to "'+rp+'". Pass `force=true` to allow this, otherwise remove "'+lp+'" from the list of extensions for "'+rp+'".');this._types[lp]=rp}}if(np||!this._extensions[rp]){const sp=ap[0];this._extensions[rp]=sp[0]!=="*"?sp:sp.substr(1)}}};Mime$2.prototype.getType=function(_d){_d=String(_d);let np=_d.replace(/^.*[/\\]/,"").toLowerCase(),rp=np.replace(/^.*\./,"").toLowerCase(),ap=np.length<_d.length;return(rp.length<np.length-1||!ap)&&this._types[rp]||null};Mime$2.prototype.getExtension=function(_d){return _d=/^\s*([^;\s]*)/.test(_d)&&RegExp.$1,_d&&this._extensions[_d.toLowerCase()]||null};var Mime_1=Mime$2,standard={"application/andrew-inset":["ez"],"application/applixware":["aw"],"application/atom+xml":["atom"],"application/atomcat+xml":["atomcat"],"application/atomdeleted+xml":["atomdeleted"],"application/atomsvc+xml":["atomsvc"],"application/atsc-dwd+xml":["dwd"],"application/atsc-held+xml":["held"],"application/atsc-rsat+xml":["rsat"],"application/bdoc":["bdoc"],"application/calendar+xml":["xcs"],"application/ccxml+xml":["ccxml"],"application/cdfx+xml":["cdfx"],"application/cdmi-capability":["cdmia"],"application/cdmi-container":["cdmic"],"application/cdmi-domain":["cdmid"],"application/cdmi-object":["cdmio"],"application/cdmi-queue":["cdmiq"],"application/cu-seeme":["cu"],"application/dash+xml":["mpd"],"application/davmount+xml":["davmount"],"application/docbook+xml":["dbk"],"application/dssc+der":["dssc"],"application/dssc+xml":["xdssc"],"application/ecmascript":["es","ecma"],"application/emma+xml":["emma"],"application/emotionml+xml":["emotionml"],"application/epub+zip":["epub"],"application/exi":["exi"],"application/express":["exp"],"application/fdt+xml":["fdt"],"application/font-tdpfr":["pfr"],"application/geo+json":["geojson"],"application/gml+xml":["gml"],"application/gpx+xml":["gpx"],"application/gxf":["gxf"],"application/gzip":["gz"],"application/hjson":["hjson"],"application/hyperstudio":["stk"],"application/inkml+xml":["ink","inkml"],"application/ipfix":["ipfix"],"application/its+xml":["its"],"application/java-archive":["jar","war","ear"],"application/java-serialized-object":["ser"],"application/java-vm":["class"],"application/javascript":["js","mjs"],"application/json":["json","map"],"application/json5":["json5"],"application/jsonml+json":["jsonml"],"application/ld+json":["jsonld"],"application/lgr+xml":["lgr"],"application/lost+xml":["lostxml"],"application/mac-binhex40":["hqx"],"application/mac-compactpro":["cpt"],"application/mads+xml":["mads"],"application/manifest+json":["webmanifest"],"application/marc":["mrc"],"application/marcxml+xml":["mrcx"],"application/mathematica":["ma","nb","mb"],"application/mathml+xml":["mathml"],"application/mbox":["mbox"],"application/mediaservercontrol+xml":["mscml"],"application/metalink+xml":["metalink"],"application/metalink4+xml":["meta4"],"application/mets+xml":["mets"],"application/mmt-aei+xml":["maei"],"application/mmt-usd+xml":["musd"],"application/mods+xml":["mods"],"application/mp21":["m21","mp21"],"application/mp4":["mp4s","m4p"],"application/msword":["doc","dot"],"application/mxf":["mxf"],"application/n-quads":["nq"],"application/n-triples":["nt"],"application/node":["cjs"],"application/octet-stream":["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"],"application/oda":["oda"],"application/oebps-package+xml":["opf"],"application/ogg":["ogx"],"application/omdoc+xml":["omdoc"],"application/onenote":["onetoc","onetoc2","onetmp","onepkg"],"application/oxps":["oxps"],"application/p2p-overlay+xml":["relo"],"application/patch-ops-error+xml":["xer"],"application/pdf":["pdf"],"application/pgp-encrypted":["pgp"],"application/pgp-signature":["asc","sig"],"application/pics-rules":["prf"],"application/pkcs10":["p10"],"application/pkcs7-mime":["p7m","p7c"],"application/pkcs7-signature":["p7s"],"application/pkcs8":["p8"],"application/pkix-attr-cert":["ac"],"application/pkix-cert":["cer"],"application/pkix-crl":["crl"],"application/pkix-pkipath":["pkipath"],"application/pkixcmp":["pki"],"application/pls+xml":["pls"],"application/postscript":["ai","eps","ps"],"application/provenance+xml":["provx"],"application/pskc+xml":["pskcxml"],"application/raml+yaml":["raml"],"application/rdf+xml":["rdf","owl"],"application/reginfo+xml":["rif"],"application/relax-ng-compact-syntax":["rnc"],"application/resource-lists+xml":["rl"],"application/resource-lists-diff+xml":["rld"],"application/rls-services+xml":["rs"],"application/route-apd+xml":["rapd"],"application/route-s-tsid+xml":["sls"],"application/route-usd+xml":["rusd"],"application/rpki-ghostbusters":["gbr"],"application/rpki-manifest":["mft"],"application/rpki-roa":["roa"],"application/rsd+xml":["rsd"],"application/rss+xml":["rss"],"application/rtf":["rtf"],"application/sbml+xml":["sbml"],"application/scvp-cv-request":["scq"],"application/scvp-cv-response":["scs"],"application/scvp-vp-request":["spq"],"application/scvp-vp-response":["spp"],"application/sdp":["sdp"],"application/senml+xml":["senmlx"],"application/sensml+xml":["sensmlx"],"application/set-payment-initiation":["setpay"],"application/set-registration-initiation":["setreg"],"application/shf+xml":["shf"],"application/sieve":["siv","sieve"],"application/smil+xml":["smi","smil"],"application/sparql-query":["rq"],"application/sparql-results+xml":["srx"],"application/srgs":["gram"],"application/srgs+xml":["grxml"],"application/sru+xml":["sru"],"application/ssdl+xml":["ssdl"],"application/ssml+xml":["ssml"],"application/swid+xml":["swidtag"],"application/tei+xml":["tei","teicorpus"],"application/thraud+xml":["tfi"],"application/timestamped-data":["tsd"],"application/toml":["toml"],"application/trig":["trig"],"application/ttml+xml":["ttml"],"application/ubjson":["ubj"],"application/urc-ressheet+xml":["rsheet"],"application/urc-targetdesc+xml":["td"],"application/voicexml+xml":["vxml"],"application/wasm":["wasm"],"application/widget":["wgt"],"application/winhlp":["hlp"],"application/wsdl+xml":["wsdl"],"application/wspolicy+xml":["wspolicy"],"application/xaml+xml":["xaml"],"application/xcap-att+xml":["xav"],"application/xcap-caps+xml":["xca"],"application/xcap-diff+xml":["xdf"],"application/xcap-el+xml":["xel"],"application/xcap-ns+xml":["xns"],"application/xenc+xml":["xenc"],"application/xhtml+xml":["xhtml","xht"],"application/xliff+xml":["xlf"],"application/xml":["xml","xsl","xsd","rng"],"application/xml-dtd":["dtd"],"application/xop+xml":["xop"],"application/xproc+xml":["xpl"],"application/xslt+xml":["*xsl","xslt"],"application/xspf+xml":["xspf"],"application/xv+xml":["mxml","xhvml","xvml","xvm"],"application/yang":["yang"],"application/yin+xml":["yin"],"application/zip":["zip"],"audio/3gpp":["*3gpp"],"audio/adpcm":["adp"],"audio/amr":["amr"],"audio/basic":["au","snd"],"audio/midi":["mid","midi","kar","rmi"],"audio/mobile-xmf":["mxmf"],"audio/mp3":["*mp3"],"audio/mp4":["m4a","mp4a"],"audio/mpeg":["mpga","mp2","mp2a","mp3","m2a","m3a"],"audio/ogg":["oga","ogg","spx","opus"],"audio/s3m":["s3m"],"audio/silk":["sil"],"audio/wav":["wav"],"audio/wave":["*wav"],"audio/webm":["weba"],"audio/xm":["xm"],"font/collection":["ttc"],"font/otf":["otf"],"font/ttf":["ttf"],"font/woff":["woff"],"font/woff2":["woff2"],"image/aces":["exr"],"image/apng":["apng"],"image/avif":["avif"],"image/bmp":["bmp"],"image/cgm":["cgm"],"image/dicom-rle":["drle"],"image/emf":["emf"],"image/fits":["fits"],"image/g3fax":["g3"],"image/gif":["gif"],"image/heic":["heic"],"image/heic-sequence":["heics"],"image/heif":["heif"],"image/heif-sequence":["heifs"],"image/hej2k":["hej2"],"image/hsj2":["hsj2"],"image/ief":["ief"],"image/jls":["jls"],"image/jp2":["jp2","jpg2"],"image/jpeg":["jpeg","jpg","jpe"],"image/jph":["jph"],"image/jphc":["jhc"],"image/jpm":["jpm"],"image/jpx":["jpx","jpf"],"image/jxr":["jxr"],"image/jxra":["jxra"],"image/jxrs":["jxrs"],"image/jxs":["jxs"],"image/jxsc":["jxsc"],"image/jxsi":["jxsi"],"image/jxss":["jxss"],"image/ktx":["ktx"],"image/ktx2":["ktx2"],"image/png":["png"],"image/sgi":["sgi"],"image/svg+xml":["svg","svgz"],"image/t38":["t38"],"image/tiff":["tif","tiff"],"image/tiff-fx":["tfx"],"image/webp":["webp"],"image/wmf":["wmf"],"message/disposition-notification":["disposition-notification"],"message/global":["u8msg"],"message/global-delivery-status":["u8dsn"],"message/global-disposition-notification":["u8mdn"],"message/global-headers":["u8hdr"],"message/rfc822":["eml","mime"],"model/3mf":["3mf"],"model/gltf+json":["gltf"],"model/gltf-binary":["glb"],"model/iges":["igs","iges"],"model/mesh":["msh","mesh","silo"],"model/mtl":["mtl"],"model/obj":["obj"],"model/step+xml":["stpx"],"model/step+zip":["stpz"],"model/step-xml+zip":["stpxz"],"model/stl":["stl"],"model/vrml":["wrl","vrml"],"model/x3d+binary":["*x3db","x3dbz"],"model/x3d+fastinfoset":["x3db"],"model/x3d+vrml":["*x3dv","x3dvz"],"model/x3d+xml":["x3d","x3dz"],"model/x3d-vrml":["x3dv"],"text/cache-manifest":["appcache","manifest"],"text/calendar":["ics","ifb"],"text/coffeescript":["coffee","litcoffee"],"text/css":["css"],"text/csv":["csv"],"text/html":["html","htm","shtml"],"text/jade":["jade"],"text/jsx":["jsx"],"text/less":["less"],"text/markdown":["markdown","md"],"text/mathml":["mml"],"text/mdx":["mdx"],"text/n3":["n3"],"text/plain":["txt","text","conf","def","list","log","in","ini"],"text/richtext":["rtx"],"text/rtf":["*rtf"],"text/sgml":["sgml","sgm"],"text/shex":["shex"],"text/slim":["slim","slm"],"text/spdx":["spdx"],"text/stylus":["stylus","styl"],"text/tab-separated-values":["tsv"],"text/troff":["t","tr","roff","man","me","ms"],"text/turtle":["ttl"],"text/uri-list":["uri","uris","urls"],"text/vcard":["vcard"],"text/vtt":["vtt"],"text/xml":["*xml"],"text/yaml":["yaml","yml"],"video/3gpp":["3gp","3gpp"],"video/3gpp2":["3g2"],"video/h261":["h261"],"video/h263":["h263"],"video/h264":["h264"],"video/iso.segment":["m4s"],"video/jpeg":["jpgv"],"video/jpm":["*jpm","jpgm"],"video/mj2":["mj2","mjp2"],"video/mp2t":["ts"],"video/mp4":["mp4","mp4v","mpg4"],"video/mpeg":["mpeg","mpg","mpe","m1v","m2v"],"video/ogg":["ogv"],"video/quicktime":["qt","mov"],"video/webm":["webm"]};let Mime$1=Mime_1;var lite=new Mime$1(standard);Object.defineProperty(LocalRecorder$1,"__esModule",{value:!0});LocalRecorder$1.LocalRecorder=void 0;var LocalRecorderState_1=LocalRecorderState,OpenViduLogger_1$a=OpenViduLogger$1,Platform_1$5=Platform,Mime=lite,logger$a=OpenViduLogger_1$a.OpenViduLogger.getInstance(),platform$4,LocalRecorder=function(){function _d(np){this.stream=np,this.chunks=[],platform$4=Platform_1$5.PlatformUtils.getInstance(),this.connectionId=this.stream.connection?this.stream.connection.connectionId:"default-connection",this.id=this.stream.streamId+"_"+this.connectionId+"_localrecord",this.state=LocalRecorderState_1.LocalRecorderState.READY}return _d.prototype.record=function(np){var rp=this;return new Promise(function(ap,sp){try{if(typeof np=="string"||np instanceof String)return sp(`When calling LocalRecorder.record(options) parameter 'options' cannot be a string. Must be an object like { mimeType: "`.concat(np,'" }'));if(typeof MediaRecorder>"u")throw logger$a.error("MediaRecorder not supported on your device. See compatibility in https://caniuse.com/#search=MediaRecorder"),Error("MediaRecorder not supported on your device. See compatibility in https://caniuse.com/#search=MediaRecorder");if(rp.state!==LocalRecorderState_1.LocalRecorderState.READY)throw Error("'LocalRecord.record()' needs 'LocalRecord.state' to be 'READY' (current value: '"+rp.state+"'). Call 'LocalRecorder.clean()' or init a new LocalRecorder before");logger$a.log("Starting local recording of stream '"+rp.stream.streamId+"' of connection '"+rp.connectionId+"'"),np?np.mimeType||(np.mimeType="video/webm"):np={mimeType:"video/webm"},rp.mediaRecorder=new MediaRecorder(rp.stream.getMediaStream(),np),rp.mediaRecorder.start()}catch(lp){return sp(lp)}return rp.mediaRecorder.ondataavailable=function(lp){lp.data.size>0&&rp.chunks.push(lp.data)},rp.mediaRecorder.onerror=function(lp){logger$a.error("MediaRecorder error: ",lp)},rp.mediaRecorder.onstart=function(){logger$a.log("MediaRecorder started (state="+rp.mediaRecorder.state+")")},rp.mediaRecorder.onstop=function(){rp.onStopDefault()},rp.mediaRecorder.onpause=function(){logger$a.log("MediaRecorder paused (state="+rp.mediaRecorder.state+")")},rp.mediaRecorder.onresume=function(){logger$a.log("MediaRecorder resumed (state="+rp.mediaRecorder.state+")")},rp.state=LocalRecorderState_1.LocalRecorderState.RECORDING,ap()})},_d.prototype.stop=function(){var np=this;return new Promise(function(rp,ap){try{if(np.state===LocalRecorderState_1.LocalRecorderState.READY||np.state===LocalRecorderState_1.LocalRecorderState.FINISHED)throw Error("'LocalRecord.stop()' needs 'LocalRecord.state' to be 'RECORDING' or 'PAUSED' (current value: '"+np.state+"'). Call 'LocalRecorder.start()' before");np.mediaRecorder.onstop=function(){return np.onStopDefault(),rp()},np.mediaRecorder.stop()}catch(sp){return ap(sp)}})},_d.prototype.pause=function(){var np=this;return new Promise(function(rp,ap){try{return np.state!==LocalRecorderState_1.LocalRecorderState.RECORDING?ap(Error("'LocalRecord.pause()' needs 'LocalRecord.state' to be 'RECORDING' (current value: '"+np.state+"'). Call 'LocalRecorder.start()' or 'LocalRecorder.resume()' before")):(np.mediaRecorder.pause(),np.state=LocalRecorderState_1.LocalRecorderState.PAUSED,rp())}catch(sp){return ap(sp)}})},_d.prototype.resume=function(){var np=this;return new Promise(function(rp,ap){try{if(np.state!==LocalRecorderState_1.LocalRecorderState.PAUSED)throw Error("'LocalRecord.resume()' needs 'LocalRecord.state' to be 'PAUSED' (current value: '"+np.state+"'). Call 'LocalRecorder.pause()' before");return np.mediaRecorder.resume(),np.state=LocalRecorderState_1.LocalRecorderState.RECORDING,rp()}catch(sp){return ap(sp)}})},_d.prototype.preview=function(np){if(this.state!==LocalRecorderState_1.LocalRecorderState.FINISHED)throw Error("'LocalRecord.preview()' needs 'LocalRecord.state' to be 'FINISHED' (current value: '"+this.state+"'). Call 'LocalRecorder.stop()' before");if(this.videoPreview=document.createElement("video"),this.videoPreview.id=this.id,this.videoPreview.autoplay=!0,platform$4.isSafariBrowser()&&(this.videoPreview.playsInline=!0),typeof np=="string"){var rp=document.getElementById(np);rp&&(this.videoPreview=rp.appendChild(this.videoPreview))}else this.videoPreview=np.appendChild(this.videoPreview);return this.videoPreview.src=this.videoPreviewSrc,this.videoPreview},_d.prototype.clean=function(){var np=this,rp=function(){delete np.blob,np.chunks=[],np.state=LocalRecorderState_1.LocalRecorderState.READY};this.state===LocalRecorderState_1.LocalRecorderState.RECORDING||this.state===LocalRecorderState_1.LocalRecorderState.PAUSED?this.stop().then(function(){return rp()}).catch(function(){return rp()}):rp()},_d.prototype.download=function(){if(this.state!==LocalRecorderState_1.LocalRecorderState.FINISHED)throw Error("'LocalRecord.download()' needs 'LocalRecord.state' to be 'FINISHED' (current value: '"+this.state+"'). Call 'LocalRecorder.stop()' before");var np=document.createElement("a");np.style.display="none",document.body.appendChild(np);var rp=globalThis.URL.createObjectURL(this.blob);np.href=rp,np.download=this.id+"."+Mime.getExtension(this.blob.type),np.click(),globalThis.URL.revokeObjectURL(rp),document.body.removeChild(np)},_d.prototype.getBlob=function(){if(this.state!==LocalRecorderState_1.LocalRecorderState.FINISHED)throw Error("Call 'LocalRecord.stop()' before getting Blob file");return this.blob},_d.prototype.uploadAsBinary=function(np,rp){var ap=this;return new Promise(function(sp,lp){if(ap.state!==LocalRecorderState_1.LocalRecorderState.FINISHED)return lp(Error("'LocalRecord.uploadAsBinary()' needs 'LocalRecord.state' to be 'FINISHED' (current value: '"+ap.state+"'). Call 'LocalRecorder.stop()' before"));var up=new XMLHttpRequest;if(up.open("POST",np,!0),typeof rp=="object")for(var cp=0,dp=Object.keys(rp);cp<dp.length;cp++){var fp=dp[cp];up.setRequestHeader(fp,rp[fp])}up.onreadystatechange=function(){if(up.readyState===4)return up.status.toString().charAt(0)==="2"?sp(up.responseText):lp(up.status)},up.send(ap.blob)})},_d.prototype.uploadAsMultipartfile=function(np,rp){var ap=this;return new Promise(function(sp,lp){if(ap.state!==LocalRecorderState_1.LocalRecorderState.FINISHED)return lp(Error("'LocalRecord.uploadAsMultipartfile()' needs 'LocalRecord.state' to be 'FINISHED' (current value: '"+ap.state+"'). Call 'LocalRecorder.stop()' before"));var up=new XMLHttpRequest;if(up.open("POST",np,!0),typeof rp=="object")for(var cp=0,dp=Object.keys(rp);cp<dp.length;cp++){var fp=dp[cp];up.setRequestHeader(fp,rp[fp])}var pp=new FormData;pp.append("file",ap.blob,ap.id+"."+Mime.getExtension(ap.blob.type)),up.onreadystatechange=function(){if(up.readyState===4)return up.status.toString().charAt(0)==="2"?sp(up.responseText):lp(up.status)},up.send(pp)})},_d.prototype.onStopDefault=function(){logger$a.log("MediaRecorder stopped  (state="+this.mediaRecorder.state+")"),this.blob=new Blob(this.chunks,{type:this.mediaRecorder.mimeType}),this.chunks=[],this.videoPreviewSrc=globalThis.URL.createObjectURL(this.blob),this.state=LocalRecorderState_1.LocalRecorderState.FINISHED},_d}();LocalRecorder$1.LocalRecorder=LocalRecorder;var Publisher={},Session={},Connection$1={},Stream$1={},Filter$1={},StreamPropertyChangedEvent$1={},Event$2={};Object.defineProperty(Event$2,"__esModule",{value:!0});Event$2.Event=void 0;var Event$1=function(){function _d(np,rp,ap){this.hasBeenPrevented=!1,this.cancelable=np,this.target=rp,this.type=ap}return _d.prototype.isDefaultPrevented=function(){return this.hasBeenPrevented},_d.prototype.preventDefault=function(){this.callDefaultBehavior=function(){},this.hasBeenPrevented=!0},_d}();Event$2.Event=Event$1;var __extends$e=commonjsGlobal&&commonjsGlobal.__extends||function(){var _d=function(np,rp){return _d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ap,sp){ap.__proto__=sp}||function(ap,sp){for(var lp in sp)Object.prototype.hasOwnProperty.call(sp,lp)&&(ap[lp]=sp[lp])},_d(np,rp)};return function(np,rp){if(typeof rp!="function"&&rp!==null)throw new TypeError("Class extends value "+String(rp)+" is not a constructor or null");_d(np,rp);function ap(){this.constructor=np}np.prototype=rp===null?Object.create(rp):(ap.prototype=rp.prototype,new ap)}}();Object.defineProperty(StreamPropertyChangedEvent$1,"__esModule",{value:!0});StreamPropertyChangedEvent$1.StreamPropertyChangedEvent=void 0;var Event_1$b=Event$2,StreamPropertyChangedEvent=function(_d){__extends$e(np,_d);function np(rp,ap,sp,lp,up,cp){var dp=_d.call(this,!1,rp,"streamPropertyChanged")||this;return dp.stream=ap,dp.changedProperty=sp,dp.newValue=lp,dp.oldValue=up,dp.reason=cp,dp}return np.prototype.callDefaultBehavior=function(){},np}(Event_1$b.Event);StreamPropertyChangedEvent$1.StreamPropertyChangedEvent=StreamPropertyChangedEvent;var OpenViduError={};(function(_d){Object.defineProperty(_d,"__esModule",{value:!0}),_d.OpenViduError=_d.OpenViduErrorName=void 0,function(rp){rp.BROWSER_NOT_SUPPORTED="BROWSER_NOT_SUPPORTED",rp.DEVICE_ACCESS_DENIED="DEVICE_ACCESS_DENIED",rp.DEVICE_ALREADY_IN_USE="DEVICE_ALREADY_IN_USE",rp.SCREEN_CAPTURE_DENIED="SCREEN_CAPTURE_DENIED",rp.SCREEN_SHARING_NOT_SUPPORTED="SCREEN_SHARING_NOT_SUPPORTED",rp.SCREEN_EXTENSION_NOT_INSTALLED="SCREEN_EXTENSION_NOT_INSTALLED",rp.SCREEN_EXTENSION_DISABLED="SCREEN_EXTENSION_DISABLED",rp.INPUT_VIDEO_DEVICE_NOT_FOUND="INPUT_VIDEO_DEVICE_NOT_FOUND",rp.INPUT_AUDIO_DEVICE_NOT_FOUND="INPUT_AUDIO_DEVICE_NOT_FOUND",rp.INPUT_AUDIO_DEVICE_GENERIC_ERROR="INPUT_AUDIO_DEVICE_GENERIC_ERROR",rp.NO_INPUT_SOURCE_SET="NO_INPUT_SOURCE_SET",rp.PUBLISHER_PROPERTIES_ERROR="PUBLISHER_PROPERTIES_ERROR",rp.OPENVIDU_PERMISSION_DENIED="OPENVIDU_PERMISSION_DENIED",rp.OPENVIDU_NOT_CONNECTED="OPENVIDU_NOT_CONNECTED",rp.VIRTUAL_BACKGROUND_ERROR="VIRTUAL_BACKGROUND_ERROR",rp.GENERIC_ERROR="GENERIC_ERROR"}(_d.OpenViduErrorName||(_d.OpenViduErrorName={}));var np=function(){function rp(ap,sp){this.name=ap,this.message=sp}return rp}();_d.OpenViduError=np})(OpenViduError);Object.defineProperty(Filter$1,"__esModule",{value:!0});Filter$1.Filter=void 0;var StreamPropertyChangedEvent_1$2=StreamPropertyChangedEvent$1,OpenViduError_1$2=OpenViduError,OpenViduLogger_1$9=OpenViduLogger$1,logger$9=OpenViduLogger_1$9.OpenViduLogger.getInstance(),Filter=function(){function _d(np,rp){this.handlers=new Map,this.type=np,this.options=rp}return _d.prototype.execMethod=function(np,rp){var ap=this;return new Promise(function(sp,lp){var up;logger$9.info("Executing filter method to stream "+ap.stream.streamId);var cp,dp=function(hp){logger$9.info("Filter method successfully executed on Stream "+ap.stream.streamId);var mp=Object.assign({},ap.stream.filter);return ap.stream.filter.lastExecMethod={method:np,params:cp},hp&&(ap.stream.session.emitEvent("streamPropertyChanged",[new StreamPropertyChangedEvent_1$2.StreamPropertyChangedEvent(ap.stream.session,ap.stream,"filter",ap.stream.filter,mp,"execFilterMethod")]),ap.stream.streamManager.emitEvent("streamPropertyChanged",[new StreamPropertyChangedEvent_1$2.StreamPropertyChangedEvent(ap.stream.streamManager,ap.stream,"filter",ap.stream.filter,mp,"execFilterMethod")])),sp()};if(ap.type.startsWith("VB:")){if(typeof rp=="string")try{rp=JSON.parse(rp)}catch(hp){return lp(new OpenViduError_1$2.OpenViduError(OpenViduError_1$2.OpenViduErrorName.VIRTUAL_BACKGROUND_ERROR,"Wrong params syntax: "+hp))}if(cp=rp,np==="update")if(!((up=ap.stream.virtualBackgroundSinkElements)===null||up===void 0)&&up.VB)ap.stream.virtualBackgroundSinkElements.VB.updateValues(rp).then(function(){return dp(!1)}).catch(function(hp){return hp.name===OpenViduError_1$2.OpenViduErrorName.VIRTUAL_BACKGROUND_ERROR?lp(new OpenViduError_1$2.OpenViduError(hp.name,hp.message)):lp(new OpenViduError_1$2.OpenViduError(OpenViduError_1$2.OpenViduErrorName.VIRTUAL_BACKGROUND_ERROR,"Error updating values on Virtual Background filter: "+hp))});else return lp(new OpenViduError_1$2.OpenViduError(OpenViduError_1$2.OpenViduErrorName.VIRTUAL_BACKGROUND_ERROR,"There is no Virtual Background filter applied"));else return lp(new OpenViduError_1$2.OpenViduError(OpenViduError_1$2.OpenViduErrorName.VIRTUAL_BACKGROUND_ERROR,'Unknown Virtual Background method "'.concat(np,'"')))}else{var fp=void 0;if(typeof rp!="string")try{fp=JSON.stringify(rp)}catch{var pp="'params' property must be a JSON formatted object";return logger$9.error(pp),lp(pp)}else fp=rp;cp=fp,ap.stream.session.openvidu.sendRequest("execFilterMethod",{streamId:ap.stream.streamId,method:np,params:fp},function(hp,mp){return hp?(logger$9.error("Error executing filter method for Stream "+ap.stream.streamId,hp),hp.code===401?lp(new OpenViduError_1$2.OpenViduError(OpenViduError_1$2.OpenViduErrorName.OPENVIDU_PERMISSION_DENIED,"You don't have permissions to execute a filter method")):lp(hp)):dp(!0)})}})},_d.prototype.addEventListener=function(np,rp){var ap=this;return new Promise(function(sp,lp){logger$9.info("Adding filter event listener to event "+np+" to stream "+ap.stream.streamId),ap.stream.session.openvidu.sendRequest("addFilterEventListener",{streamId:ap.stream.streamId,eventType:np},function(up,cp){return up?(logger$9.error("Error adding filter event listener to event "+np+"for Stream "+ap.stream.streamId,up),up.code===401?lp(new OpenViduError_1$2.OpenViduError(OpenViduError_1$2.OpenViduErrorName.OPENVIDU_PERMISSION_DENIED,"You don't have permissions to add a filter event listener")):lp(up)):(ap.handlers.set(np,rp),logger$9.info("Filter event listener to event "+np+" successfully applied on Stream "+ap.stream.streamId),sp())})})},_d.prototype.removeEventListener=function(np){var rp=this;return new Promise(function(ap,sp){logger$9.info("Removing filter event listener to event "+np+" to stream "+rp.stream.streamId),rp.stream.session.openvidu.sendRequest("removeFilterEventListener",{streamId:rp.stream.streamId,eventType:np},function(lp,up){return lp?(logger$9.error("Error removing filter event listener to event "+np+"for Stream "+rp.stream.streamId,lp),lp.code===401?sp(new OpenViduError_1$2.OpenViduError(OpenViduError_1$2.OpenViduErrorName.OPENVIDU_PERMISSION_DENIED,"You don't have permissions to add a filter event listener")):sp(lp)):(rp.handlers.delete(np),logger$9.info("Filter event listener to event "+np+" successfully removed on Stream "+rp.stream.streamId),ap())})})},_d}();Filter$1.Filter=Filter;var Subscriber$1={},StreamManager$1={},EventDispatcher$1={},EventEmitter$4={exports:{}};/*!
 * EventEmitter v5.2.9 - git.io/ee
 * Unlicense - http://unlicense.org/
 * Oliver Caldwell - https://oli.me.uk/
 * @preserve
 */(function(_d){(function(np){function rp(){}var ap=rp.prototype,sp=np.EventEmitter;function lp(dp,fp){for(var pp=dp.length;pp--;)if(dp[pp].listener===fp)return pp;return-1}function up(dp){return function(){return this[dp].apply(this,arguments)}}ap.getListeners=function(fp){var pp=this._getEvents(),hp,mp;if(fp instanceof RegExp){hp={};for(mp in pp)pp.hasOwnProperty(mp)&&fp.test(mp)&&(hp[mp]=pp[mp])}else hp=pp[fp]||(pp[fp]=[]);return hp},ap.flattenListeners=function(fp){var pp=[],hp;for(hp=0;hp<fp.length;hp+=1)pp.push(fp[hp].listener);return pp},ap.getListenersAsObject=function(fp){var pp=this.getListeners(fp),hp;return pp instanceof Array&&(hp={},hp[fp]=pp),hp||pp};function cp(dp){return typeof dp=="function"||dp instanceof RegExp?!0:dp&&typeof dp=="object"?cp(dp.listener):!1}ap.addListener=function(fp,pp){if(!cp(pp))throw new TypeError("listener must be a function");var hp=this.getListenersAsObject(fp),mp=typeof pp=="object",gp;for(gp in hp)hp.hasOwnProperty(gp)&&lp(hp[gp],pp)===-1&&hp[gp].push(mp?pp:{listener:pp,once:!1});return this},ap.on=up("addListener"),ap.addOnceListener=function(fp,pp){return this.addListener(fp,{listener:pp,once:!0})},ap.once=up("addOnceListener"),ap.defineEvent=function(fp){return this.getListeners(fp),this},ap.defineEvents=function(fp){for(var pp=0;pp<fp.length;pp+=1)this.defineEvent(fp[pp]);return this},ap.removeListener=function(fp,pp){var hp=this.getListenersAsObject(fp),mp,gp;for(gp in hp)hp.hasOwnProperty(gp)&&(mp=lp(hp[gp],pp),mp!==-1&&hp[gp].splice(mp,1));return this},ap.off=up("removeListener"),ap.addListeners=function(fp,pp){return this.manipulateListeners(!1,fp,pp)},ap.removeListeners=function(fp,pp){return this.manipulateListeners(!0,fp,pp)},ap.manipulateListeners=function(fp,pp,hp){var mp,gp,vp=fp?this.removeListener:this.addListener,xp=fp?this.removeListeners:this.addListeners;if(typeof pp=="object"&&!(pp instanceof RegExp))for(mp in pp)pp.hasOwnProperty(mp)&&(gp=pp[mp])&&(typeof gp=="function"?vp.call(this,mp,gp):xp.call(this,mp,gp));else for(mp=hp.length;mp--;)vp.call(this,pp,hp[mp]);return this},ap.removeEvent=function(fp){var pp=typeof fp,hp=this._getEvents(),mp;if(pp==="string")delete hp[fp];else if(fp instanceof RegExp)for(mp in hp)hp.hasOwnProperty(mp)&&fp.test(mp)&&delete hp[mp];else delete this._events;return this},ap.removeAllListeners=up("removeEvent"),ap.emitEvent=function(fp,pp){var hp=this.getListenersAsObject(fp),mp,gp,vp,xp,Sp;for(xp in hp)if(hp.hasOwnProperty(xp))for(mp=hp[xp].slice(0),vp=0;vp<mp.length;vp++)gp=mp[vp],gp.once===!0&&this.removeListener(fp,gp.listener),Sp=gp.listener.apply(this,pp||[]),Sp===this._getOnceReturnValue()&&this.removeListener(fp,gp.listener);return this},ap.trigger=up("emitEvent"),ap.emit=function(fp){var pp=Array.prototype.slice.call(arguments,1);return this.emitEvent(fp,pp)},ap.setOnceReturnValue=function(fp){return this._onceReturnValue=fp,this},ap._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},ap._getEvents=function(){return this._events||(this._events={})},rp.noConflict=function(){return np.EventEmitter=sp,rp},_d.exports?_d.exports=rp:np.EventEmitter=rp})(typeof window<"u"?window:commonjsGlobal||{})})(EventEmitter$4);var EventEmitterExports=EventEmitter$4.exports;Object.defineProperty(EventDispatcher$1,"__esModule",{value:!0});EventDispatcher$1.EventDispatcher=void 0;var OpenViduLogger_1$8=OpenViduLogger$1,EventEmitter$3=EventEmitterExports,logger$8=OpenViduLogger_1$8.OpenViduLogger.getInstance(),EventDispatcher=function(){function _d(){this.userHandlerArrowHandler=new WeakMap,this.ee=new EventEmitter$3}return _d.prototype.onAux=function(np,rp,ap){var sp=function(lp){lp?logger$8.debug(rp,lp):logger$8.debug(rp),ap(lp)};return this.userHandlerArrowHandler.set(ap,sp),this.ee.on(np,sp),this},_d.prototype.onceAux=function(np,rp,ap){var sp=this,lp=function(up){up?logger$8.debug(rp,up):logger$8.debug(rp),ap(up),sp.userHandlerArrowHandler.delete(ap)};return this.userHandlerArrowHandler.set(ap,lp),this.ee.once(np,lp),this},_d.prototype.offAux=function(np,rp){if(!rp)this.ee.removeAllListeners(np);else{var ap=this.userHandlerArrowHandler.get(rp);ap&&this.ee.off(np,ap),this.userHandlerArrowHandler.delete(rp)}return this},_d}();EventDispatcher$1.EventDispatcher=EventDispatcher;var StreamManagerEvent$1={},__extends$d=commonjsGlobal&&commonjsGlobal.__extends||function(){var _d=function(np,rp){return _d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ap,sp){ap.__proto__=sp}||function(ap,sp){for(var lp in sp)Object.prototype.hasOwnProperty.call(sp,lp)&&(ap[lp]=sp[lp])},_d(np,rp)};return function(np,rp){if(typeof rp!="function"&&rp!==null)throw new TypeError("Class extends value "+String(rp)+" is not a constructor or null");_d(np,rp);function ap(){this.constructor=np}np.prototype=rp===null?Object.create(rp):(ap.prototype=rp.prototype,new ap)}}();Object.defineProperty(StreamManagerEvent$1,"__esModule",{value:!0});StreamManagerEvent$1.StreamManagerEvent=void 0;var Event_1$a=Event$2,StreamManagerEvent=function(_d){__extends$d(np,_d);function np(rp,ap,sp){var lp=_d.call(this,!1,rp,ap)||this;return lp.value=sp,lp}return np.prototype.callDefaultBehavior=function(){},np}(Event_1$a.Event);StreamManagerEvent$1.StreamManagerEvent=StreamManagerEvent;var VideoElementEvent$1={},__extends$c=commonjsGlobal&&commonjsGlobal.__extends||function(){var _d=function(np,rp){return _d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ap,sp){ap.__proto__=sp}||function(ap,sp){for(var lp in sp)Object.prototype.hasOwnProperty.call(sp,lp)&&(ap[lp]=sp[lp])},_d(np,rp)};return function(np,rp){if(typeof rp!="function"&&rp!==null)throw new TypeError("Class extends value "+String(rp)+" is not a constructor or null");_d(np,rp);function ap(){this.constructor=np}np.prototype=rp===null?Object.create(rp):(ap.prototype=rp.prototype,new ap)}}();Object.defineProperty(VideoElementEvent$1,"__esModule",{value:!0});VideoElementEvent$1.VideoElementEvent=void 0;var Event_1$9=Event$2,VideoElementEvent=function(_d){__extends$c(np,_d);function np(rp,ap,sp){var lp=_d.call(this,!1,ap,sp)||this;return lp.element=rp,lp}return np.prototype.callDefaultBehavior=function(){},np}(Event_1$9.Event);VideoElementEvent$1.VideoElementEvent=VideoElementEvent;var ExceptionEvent={};(function(_d){var np=commonjsGlobal&&commonjsGlobal.__extends||function(){var sp=function(lp,up){return sp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(cp,dp){cp.__proto__=dp}||function(cp,dp){for(var fp in dp)Object.prototype.hasOwnProperty.call(dp,fp)&&(cp[fp]=dp[fp])},sp(lp,up)};return function(lp,up){if(typeof up!="function"&&up!==null)throw new TypeError("Class extends value "+String(up)+" is not a constructor or null");sp(lp,up);function cp(){this.constructor=lp}lp.prototype=up===null?Object.create(up):(cp.prototype=up.prototype,new cp)}}();Object.defineProperty(_d,"__esModule",{value:!0}),_d.ExceptionEvent=_d.ExceptionEventName=void 0;var rp=Event$2;(function(sp){sp.ICE_CANDIDATE_ERROR="ICE_CANDIDATE_ERROR",sp.ICE_CONNECTION_FAILED="ICE_CONNECTION_FAILED",sp.ICE_CONNECTION_DISCONNECTED="ICE_CONNECTION_DISCONNECTED",sp.NO_STREAM_PLAYING_EVENT="NO_STREAM_PLAYING_EVENT",sp.SPEECH_TO_TEXT_DISCONNECTED="SPEECH_TO_TEXT_DISCONNECTED"})(_d.ExceptionEventName||(_d.ExceptionEventName={}));var ap=function(sp){np(lp,sp);function lp(up,cp,dp,fp,pp){var hp=sp.call(this,!1,up,"exception")||this;return hp.name=cp,hp.origin=dp,hp.message=fp,hp.data=pp,hp}return lp.prototype.callDefaultBehavior=function(){},lp}(rp.Event);_d.ExceptionEvent=ap})(ExceptionEvent);var VideoInsertMode={};(function(_d){Object.defineProperty(_d,"__esModule",{value:!0}),_d.VideoInsertMode=void 0,function(np){np.AFTER="AFTER",np.APPEND="APPEND",np.BEFORE="BEFORE",np.PREPEND="PREPEND",np.REPLACE="REPLACE"}(_d.VideoInsertMode||(_d.VideoInsertMode={}))})(VideoInsertMode);var __extends$b=commonjsGlobal&&commonjsGlobal.__extends||function(){var _d=function(np,rp){return _d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ap,sp){ap.__proto__=sp}||function(ap,sp){for(var lp in sp)Object.prototype.hasOwnProperty.call(sp,lp)&&(ap[lp]=sp[lp])},_d(np,rp)};return function(np,rp){if(typeof rp!="function"&&rp!==null)throw new TypeError("Class extends value "+String(rp)+" is not a constructor or null");_d(np,rp);function ap(){this.constructor=np}np.prototype=rp===null?Object.create(rp):(ap.prototype=rp.prototype,new ap)}}();Object.defineProperty(StreamManager$1,"__esModule",{value:!0});StreamManager$1.StreamManager=void 0;var EventDispatcher_1=EventDispatcher$1,StreamManagerEvent_1$1=StreamManagerEvent$1,VideoElementEvent_1=VideoElementEvent$1,ExceptionEvent_1$3=ExceptionEvent,VideoInsertMode_1$1=VideoInsertMode,OpenViduLogger_1$7=OpenViduLogger$1,Platform_1$4=Platform,logger$7=OpenViduLogger_1$7.OpenViduLogger.getInstance(),platform$3,StreamManager=function(_d){__extends$b(np,_d);function np(rp,ap){var sp=_d.call(this)||this;if(sp.videos=[],sp.lazyLaunchVideoElementCreatedEvent=!1,platform$3=Platform_1$4.PlatformUtils.getInstance(),sp.stream=rp,sp.stream.streamManager=sp,sp.remote=!sp.stream.isLocal(),ap){var lp=void 0;typeof ap=="string"?lp=document.getElementById(ap):ap instanceof HTMLElement&&(lp=ap),lp&&(sp.firstVideoElement={targetElement:lp,video:document.createElement("video"),id:"",canplayListenerAdded:!1},(platform$3.isSafariBrowser()||platform$3.isIPhoneOrIPad()&&(platform$3.isChromeMobileBrowser()||platform$3.isEdgeMobileBrowser()||platform$3.isOperaMobileBrowser()||platform$3.isFirefoxMobileBrowser()))&&(sp.firstVideoElement.video.playsInline=!0),sp.targetElement=lp,sp.element=lp)}return sp.canPlayListener=function(){sp.deactivateStreamPlayingEventExceptionTimeout(),sp.ee.emitEvent("streamPlaying",[new StreamManagerEvent_1$1.StreamManagerEvent(sp,"streamPlaying",void 0)])},sp}return np.prototype.on=function(rp,ap){return _d.prototype.onAux.call(this,rp,"Event '"+rp+"' triggered by '"+(this.remote?"Subscriber":"Publisher")+"'",ap),rp==="videoElementCreated"&&this.stream&&this.lazyLaunchVideoElementCreatedEvent&&(this.ee.emitEvent("videoElementCreated",[new VideoElementEvent_1.VideoElementEvent(this.videos[0].video,this,"videoElementCreated")]),this.lazyLaunchVideoElementCreatedEvent=!1),rp==="streamPlaying"&&this.videos[0]&&this.videos[0].video&&this.videos[0].video.currentTime>0&&this.videos[0].video.paused===!1&&this.videos[0].video.ended===!1&&this.videos[0].video.readyState===4&&this.ee.emitEvent("streamPlaying",[new StreamManagerEvent_1$1.StreamManagerEvent(this,"streamPlaying",void 0)]),this.stream.hasAudio&&(rp==="publisherStartSpeaking"&&this.stream.enableHarkSpeakingEvent(),rp==="publisherStopSpeaking"&&this.stream.enableHarkStoppedSpeakingEvent(),rp==="streamAudioVolumeChange"&&this.stream.enableHarkVolumeChangeEvent(!1)),this},np.prototype.once=function(rp,ap){return _d.prototype.onceAux.call(this,rp,"Event '"+rp+"' triggered once by '"+(this.remote?"Subscriber":"Publisher")+"'",ap),rp==="videoElementCreated"&&this.stream&&this.lazyLaunchVideoElementCreatedEvent&&this.ee.emitEvent("videoElementCreated",[new VideoElementEvent_1.VideoElementEvent(this.videos[0].video,this,"videoElementCreated")]),rp==="streamPlaying"&&this.videos[0]&&this.videos[0].video&&this.videos[0].video.currentTime>0&&this.videos[0].video.paused===!1&&this.videos[0].video.ended===!1&&this.videos[0].video.readyState===4&&this.ee.emitEvent("streamPlaying",[new StreamManagerEvent_1$1.StreamManagerEvent(this,"streamPlaying",void 0)]),this.stream.hasAudio&&(rp==="publisherStartSpeaking"&&this.stream.enableOnceHarkSpeakingEvent(),rp==="publisherStopSpeaking"&&this.stream.enableOnceHarkStoppedSpeakingEvent(),rp==="streamAudioVolumeChange"&&this.stream.enableOnceHarkVolumeChangeEvent(!1)),this},np.prototype.off=function(rp,ap){if(_d.prototype.offAux.call(this,rp,ap),rp==="publisherStartSpeaking"){var sp=this.ee.getListeners(rp).length+this.stream.session.ee.getListeners(rp).length;sp===0&&this.stream.disableHarkSpeakingEvent(!1)}if(rp==="publisherStopSpeaking"){var lp=this.ee.getListeners(rp).length+this.stream.session.ee.getListeners(rp).length;lp===0&&this.stream.disableHarkStoppedSpeakingEvent(!1)}if(rp==="streamAudioVolumeChange"){var up=this.ee.getListeners(rp).length;up===0&&this.stream.disableHarkVolumeChangeEvent(!1)}return this},np.prototype.addVideoElement=function(rp){this.initializeVideoProperties(rp),!this.remote&&this.stream.displayMyRemote()&&rp.srcObject!==this.stream.getMediaStream()&&(rp.srcObject=this.stream.getMediaStream());for(var ap=0,sp=this.videos;ap<sp.length;ap++){var lp=sp[ap];if(lp.video===rp)return 0}for(var up=1,cp=0,dp=this.stream.session.streamManagers;cp<dp.length;cp++){var fp=dp[cp];if(fp.disassociateVideo(rp)){up=-1;break}}return this.stream.session.streamManagers.forEach(function(pp){pp.disassociateVideo(rp)}),this.pushNewStreamManagerVideo({video:rp,id:rp.id,canplayListenerAdded:!1}),logger$7.info("New video element associated to ",this),up},np.prototype.createVideoElement=function(rp,ap){var sp;if(typeof rp=="string"){if(sp=document.getElementById(rp),!sp)throw new Error("The provided 'targetElement' couldn't be resolved to any HTML element: "+rp)}else if(rp instanceof HTMLElement)sp=rp;else throw new Error("The provided 'targetElement' couldn't be resolved to any HTML element: "+rp);var lp=this.createVideo();this.initializeVideoProperties(lp);var up=ap||VideoInsertMode_1$1.VideoInsertMode.APPEND;switch(up){case VideoInsertMode_1$1.VideoInsertMode.AFTER:sp.parentNode.insertBefore(lp,sp.nextSibling);break;case VideoInsertMode_1$1.VideoInsertMode.APPEND:sp.appendChild(lp);break;case VideoInsertMode_1$1.VideoInsertMode.BEFORE:sp.parentNode.insertBefore(lp,sp);break;case VideoInsertMode_1$1.VideoInsertMode.PREPEND:sp.insertBefore(lp,sp.childNodes[0]);break;case VideoInsertMode_1$1.VideoInsertMode.REPLACE:sp.parentNode.replaceChild(lp,sp);break;default:up=VideoInsertMode_1$1.VideoInsertMode.APPEND,sp.appendChild(lp);break}var cp={targetElement:sp,video:lp,insertMode:up,id:lp.id,canplayListenerAdded:!1};return this.pushNewStreamManagerVideo(cp),this.ee.emitEvent("videoElementCreated",[new VideoElementEvent_1.VideoElementEvent(cp.video,this,"videoElementCreated")]),this.lazyLaunchVideoElementCreatedEvent=!!this.firstVideoElement,lp},np.prototype.updatePublisherSpeakingEventsOptions=function(rp){var ap=this.stream.harkOptions?this.stream.harkOptions:this.stream.session.openvidu.advancedConfiguration.publisherSpeakingEventsOptions||{},sp=typeof rp.interval=="number"?rp.interval:typeof ap.interval=="number"?ap.interval:100,lp=typeof rp.threshold=="number"?rp.threshold:typeof ap.threshold=="number"?ap.threshold:-50;this.stream.harkOptions={interval:sp,threshold:lp},this.stream.speechEvent&&(this.stream.speechEvent.setInterval(sp),this.stream.speechEvent.setThreshold(lp))},np.prototype.initializeVideoProperties=function(rp){!this.remote&&this.stream.displayMyRemote()||rp.srcObject!==this.stream.getMediaStream()&&(rp.srcObject=this.stream.getMediaStream()),rp.autoplay=!0,rp.controls=!1,(platform$3.isSafariBrowser()||platform$3.isIPhoneOrIPad()&&(platform$3.isChromeMobileBrowser()||platform$3.isEdgeMobileBrowser()||platform$3.isOperaMobileBrowser()||platform$3.isFirefoxMobileBrowser()))&&(rp.playsInline=!0),rp.id||(rp.id=(this.remote?"remote-":"local-")+"video-"+this.stream.streamId,!this.id&&this.targetElement&&(this.id=rp.id)),this.remote&&this.isMirroredVideo(rp)?this.removeMirrorVideo(rp):!this.remote&&!this.stream.displayMyRemote()&&(rp.muted=!0,this.isMirroredVideo(rp)&&!this.stream.outboundStreamOpts.publisherProperties.mirror?this.removeMirrorVideo(rp):this.stream.outboundStreamOpts.publisherProperties.mirror&&!this.stream.isSendScreen()&&this.mirrorVideo(rp))},np.prototype.removeAllVideos=function(){for(var rp=this,ap=this.stream.session.streamManagers.length-1;ap>=0;--ap)this.stream.session.streamManagers[ap]===this&&this.stream.session.streamManagers.splice(ap,1);this.videos.forEach(function(sp){sp.video&&sp.video.removeEventListener&&sp.video.removeEventListener("canplay",rp.canPlayListener),sp.canplayListenerAdded=!1,sp.targetElement&&(sp.video.parentNode.removeChild(sp.video),rp.ee.emitEvent("videoElementDestroyed",[new VideoElementEvent_1.VideoElementEvent(sp.video,rp,"videoElementDestroyed")])),rp.removeSrcObject(sp),rp.videos.filter(function(lp){return!lp.targetElement})})},np.prototype.disassociateVideo=function(rp){for(var ap=!1,sp=0;sp<this.videos.length;sp++)if(this.videos[sp].video===rp){this.videos[sp].video.removeEventListener("canplay",this.canPlayListener),this.videos.splice(sp,1),ap=!0,logger$7.info("Video element disassociated from ",this);break}return ap},np.prototype.addPlayEventToFirstVideo=function(){this.videos[0]&&this.videos[0].video&&!this.videos[0].canplayListenerAdded&&(this.activateStreamPlayingEventExceptionTimeout(),this.videos[0].video.addEventListener("canplay",this.canPlayListener),this.videos[0].canplayListenerAdded=!0)},np.prototype.updateMediaStream=function(rp){this.videos.forEach(function(ap){if(ap.video.srcObject=rp,platform$3.isIonicIos()){var sp=ap.video.parentElement,lp=ap.video;sp.replaceChild(lp,ap.video),ap.video=lp}})},np.prototype.emitEvent=function(rp,ap){this.ee.emitEvent(rp,ap)},np.prototype.createVideo=function(){return document.createElement("video")},np.prototype.removeSrcObject=function(rp){rp.video.srcObject=null,this.deactivateStreamPlayingEventExceptionTimeout()},np.prototype.pushNewStreamManagerVideo=function(rp){this.videos.push(rp),this.addPlayEventToFirstVideo(),this.stream.session.streamManagers.indexOf(this)===-1&&this.stream.session.streamManagers.push(this)},np.prototype.mirrorVideo=function(rp){platform$3.isIonicIos()||(rp.style.transform="rotateY(180deg)",rp.style.webkitTransform="rotateY(180deg)")},np.prototype.removeMirrorVideo=function(rp){rp.style.transform="unset",rp.style.webkitTransform="unset"},np.prototype.isMirroredVideo=function(rp){return rp.style.transform==="rotateY(180deg)"||rp.style.webkitTransform==="rotateY(180deg)"},np.prototype.activateStreamPlayingEventExceptionTimeout=function(){var rp=this;if(this.remote&&this.streamPlayingEventExceptionTimeout==null){var ap=this.stream.session.openvidu.advancedConfiguration.noStreamPlayingEventExceptionTimeout||4e3;this.streamPlayingEventExceptionTimeout=setTimeout(function(){var sp="StreamManager of Stream "+rp.stream.streamId+" ("+(rp.remote?"Subscriber":"Publisher")+') did not trigger "streamPlaying" event in '+ap+" ms";logger$7.warn(sp),rp.stream.session.emitEvent("exception",[new ExceptionEvent_1$3.ExceptionEvent(rp.stream.session,ExceptionEvent_1$3.ExceptionEventName.NO_STREAM_PLAYING_EVENT,rp,sp)]),delete rp.streamPlayingEventExceptionTimeout},ap)}},np.prototype.deactivateStreamPlayingEventExceptionTimeout=function(){clearTimeout(this.streamPlayingEventExceptionTimeout),delete this.streamPlayingEventExceptionTimeout},np}(EventDispatcher_1.EventDispatcher);StreamManager$1.StreamManager=StreamManager;var __extends$a=commonjsGlobal&&commonjsGlobal.__extends||function(){var _d=function(np,rp){return _d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ap,sp){ap.__proto__=sp}||function(ap,sp){for(var lp in sp)Object.prototype.hasOwnProperty.call(sp,lp)&&(ap[lp]=sp[lp])},_d(np,rp)};return function(np,rp){if(typeof rp!="function"&&rp!==null)throw new TypeError("Class extends value "+String(rp)+" is not a constructor or null");_d(np,rp);function ap(){this.constructor=np}np.prototype=rp===null?Object.create(rp):(ap.prototype=rp.prototype,new ap)}}();Object.defineProperty(Subscriber$1,"__esModule",{value:!0});Subscriber$1.Subscriber=void 0;var StreamManager_1=StreamManager$1,OpenViduLogger_1$6=OpenViduLogger$1,logger$6=OpenViduLogger_1$6.OpenViduLogger.getInstance(),Subscriber=function(_d){__extends$a(np,_d);function np(rp,ap,sp){var lp=_d.call(this,rp,ap)||this;return lp.element=lp.targetElement,lp.stream=rp,lp.properties=sp,lp}return np.prototype.subscribeToAudio=function(rp){return this.stream.getMediaStream().getAudioTracks().forEach(function(ap){ap.enabled=rp}),this.stream.audioActive=rp,logger$6.info("'Subscriber' has "+(rp?"subscribed to":"unsubscribed from")+" its audio stream"),this},np.prototype.subscribeToVideo=function(rp){return this.stream.getMediaStream().getVideoTracks().forEach(function(ap){ap.enabled=rp}),this.stream.videoActive=rp,logger$6.info("'Subscriber' has "+(rp?"subscribed to":"unsubscribed from")+" its video stream"),this},np.prototype.replaceTrackInMediaStream=function(rp,ap){var sp=this.stream.getMediaStream(),lp;rp.kind==="video"?(lp=sp.getVideoTracks()[0],ap&&(this.stream.lastVideoTrackConstraints=rp.getConstraints())):lp=sp.getAudioTracks()[0],sp.removeTrack(lp),lp.stop(),sp.addTrack(rp)},np}(StreamManager_1.StreamManager);Subscriber$1.Subscriber=Subscriber;var WebRtcPeer$1={},protocols=["stun:","turn:"],normalice$1=function(_d){var np=(_d||{}).url||_d,rp,ap,sp={};return typeof np!="string"&&!(np instanceof String)||(np=np.trim(),rp=protocols[protocols.indexOf(np.slice(0,5))],!rp)?_d:(np=np.slice(5),ap=np.split("@"),sp.username=_d.username,sp.credential=_d.credential,ap.length>1&&(np=ap[1],ap=ap[0].split(":"),sp.username=ap[0],sp.credential=(_d||{}).credential||ap[1]||""),sp.url=rp+np,sp.urls=[sp.url],sp)};const require$$1=["stun.l.google.com:19302","stun1.l.google.com:19302","stun2.l.google.com:19302","stun3.l.google.com:19302","stun4.l.google.com:19302","stun.ekiga.net","stun.ideasip.com","stun.schlund.de","stun.stunprotocol.org:3478","stun.voiparound.com","stun.voipbuster.com","stun.voipstunt.com","stun.voxgratia.org"],require$$2=[];var normalice=normalice$1,freeice$1=function(_d){var np={stun:(_d||{}).stun||require$$1,turn:(_d||{}).turn||require$$2},rp=(_d||{}).stunCount||2,ap=(_d||{}).turnCount||0,sp;function lp(up,cp){for(var dp=[],fp=[].concat(np[up]),pp;fp.length&&dp.length<cp;)pp=Math.random()*fp.length|0,dp=dp.concat(fp.splice(pp,1));return dp.map(function(hp){return typeof hp!="string"&&!(hp instanceof String)?hp:normalice(up+":"+hp)})}return sp=[].concat(lp("stun",rp)),ap&&(sp=sp.concat(lp("turn",ap))),sp},freeice_1=freeice$1,commonjsBrowser={},v1$1={},rng$1={};Object.defineProperty(rng$1,"__esModule",{value:!0});rng$1.default=rng;let getRandomValues;const rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&(getRandomValues=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!getRandomValues))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}var stringify$1={},validate$1={},regex={};Object.defineProperty(regex,"__esModule",{value:!0});regex.default=void 0;var _default$c=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;regex.default=_default$c;Object.defineProperty(validate$1,"__esModule",{value:!0});validate$1.default=void 0;var _regex=_interopRequireDefault$m(regex);function _interopRequireDefault$m(_d){return _d&&_d.__esModule?_d:{default:_d}}function validate(_d){return typeof _d=="string"&&_regex.default.test(_d)}var _default$b=validate;validate$1.default=_default$b;Object.defineProperty(stringify$1,"__esModule",{value:!0});stringify$1.default=void 0;stringify$1.unsafeStringify=unsafeStringify;var _validate$2=_interopRequireDefault$l(validate$1);function _interopRequireDefault$l(_d){return _d&&_d.__esModule?_d:{default:_d}}const byteToHex=[];for(let _d=0;_d<256;++_d)byteToHex.push((_d+256).toString(16).slice(1));function unsafeStringify(_d,np=0){return(byteToHex[_d[np+0]]+byteToHex[_d[np+1]]+byteToHex[_d[np+2]]+byteToHex[_d[np+3]]+"-"+byteToHex[_d[np+4]]+byteToHex[_d[np+5]]+"-"+byteToHex[_d[np+6]]+byteToHex[_d[np+7]]+"-"+byteToHex[_d[np+8]]+byteToHex[_d[np+9]]+"-"+byteToHex[_d[np+10]]+byteToHex[_d[np+11]]+byteToHex[_d[np+12]]+byteToHex[_d[np+13]]+byteToHex[_d[np+14]]+byteToHex[_d[np+15]]).toLowerCase()}function stringify(_d,np=0){const rp=unsafeStringify(_d,np);if(!(0,_validate$2.default)(rp))throw TypeError("Stringified UUID is invalid");return rp}var _default$a=stringify;stringify$1.default=_default$a;Object.defineProperty(v1$1,"__esModule",{value:!0});v1$1.default=void 0;var _rng$1=_interopRequireDefault$k(rng$1),_stringify$2=stringify$1;function _interopRequireDefault$k(_d){return _d&&_d.__esModule?_d:{default:_d}}let _nodeId,_clockseq,_lastMSecs=0,_lastNSecs=0;function v1(_d,np,rp){let ap=np&&rp||0;const sp=np||new Array(16);_d=_d||{};let lp=_d.node||_nodeId,up=_d.clockseq!==void 0?_d.clockseq:_clockseq;if(lp==null||up==null){const mp=_d.random||(_d.rng||_rng$1.default)();lp==null&&(lp=_nodeId=[mp[0]|1,mp[1],mp[2],mp[3],mp[4],mp[5]]),up==null&&(up=_clockseq=(mp[6]<<8|mp[7])&16383)}let cp=_d.msecs!==void 0?_d.msecs:Date.now(),dp=_d.nsecs!==void 0?_d.nsecs:_lastNSecs+1;const fp=cp-_lastMSecs+(dp-_lastNSecs)/1e4;if(fp<0&&_d.clockseq===void 0&&(up=up+1&16383),(fp<0||cp>_lastMSecs)&&_d.nsecs===void 0&&(dp=0),dp>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");_lastMSecs=cp,_lastNSecs=dp,_clockseq=up,cp+=122192928e5;const pp=((cp&268435455)*1e4+dp)%4294967296;sp[ap++]=pp>>>24&255,sp[ap++]=pp>>>16&255,sp[ap++]=pp>>>8&255,sp[ap++]=pp&255;const hp=cp/4294967296*1e4&268435455;sp[ap++]=hp>>>8&255,sp[ap++]=hp&255,sp[ap++]=hp>>>24&15|16,sp[ap++]=hp>>>16&255,sp[ap++]=up>>>8|128,sp[ap++]=up&255;for(let mp=0;mp<6;++mp)sp[ap+mp]=lp[mp];return np||(0,_stringify$2.unsafeStringify)(sp)}var _default$9=v1;v1$1.default=_default$9;var v3$1={},v35$1={},parse$1={};Object.defineProperty(parse$1,"__esModule",{value:!0});parse$1.default=void 0;var _validate$1=_interopRequireDefault$j(validate$1);function _interopRequireDefault$j(_d){return _d&&_d.__esModule?_d:{default:_d}}function parse(_d){if(!(0,_validate$1.default)(_d))throw TypeError("Invalid UUID");let np;const rp=new Uint8Array(16);return rp[0]=(np=parseInt(_d.slice(0,8),16))>>>24,rp[1]=np>>>16&255,rp[2]=np>>>8&255,rp[3]=np&255,rp[4]=(np=parseInt(_d.slice(9,13),16))>>>8,rp[5]=np&255,rp[6]=(np=parseInt(_d.slice(14,18),16))>>>8,rp[7]=np&255,rp[8]=(np=parseInt(_d.slice(19,23),16))>>>8,rp[9]=np&255,rp[10]=(np=parseInt(_d.slice(24,36),16))/1099511627776&255,rp[11]=np/4294967296&255,rp[12]=np>>>24&255,rp[13]=np>>>16&255,rp[14]=np>>>8&255,rp[15]=np&255,rp}var _default$8=parse;parse$1.default=_default$8;Object.defineProperty(v35$1,"__esModule",{value:!0});v35$1.URL=v35$1.DNS=void 0;v35$1.default=v35;var _stringify$1=stringify$1,_parse=_interopRequireDefault$i(parse$1);function _interopRequireDefault$i(_d){return _d&&_d.__esModule?_d:{default:_d}}function stringToBytes(_d){_d=unescape(encodeURIComponent(_d));const np=[];for(let rp=0;rp<_d.length;++rp)np.push(_d.charCodeAt(rp));return np}const DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8";v35$1.DNS=DNS;const URL$1="6ba7b811-9dad-11d1-80b4-00c04fd430c8";v35$1.URL=URL$1;function v35(_d,np,rp){function ap(sp,lp,up,cp){var dp;if(typeof sp=="string"&&(sp=stringToBytes(sp)),typeof lp=="string"&&(lp=(0,_parse.default)(lp)),((dp=lp)===null||dp===void 0?void 0:dp.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let fp=new Uint8Array(16+sp.length);if(fp.set(lp),fp.set(sp,lp.length),fp=rp(fp),fp[6]=fp[6]&15|np,fp[8]=fp[8]&63|128,up){cp=cp||0;for(let pp=0;pp<16;++pp)up[cp+pp]=fp[pp];return up}return(0,_stringify$1.unsafeStringify)(fp)}try{ap.name=_d}catch{}return ap.DNS=DNS,ap.URL=URL$1,ap}var md5$1={};Object.defineProperty(md5$1,"__esModule",{value:!0});md5$1.default=void 0;function md5(_d){if(typeof _d=="string"){const np=unescape(encodeURIComponent(_d));_d=new Uint8Array(np.length);for(let rp=0;rp<np.length;++rp)_d[rp]=np.charCodeAt(rp)}return md5ToHexEncodedArray(wordsToMd5(bytesToWords(_d),_d.length*8))}function md5ToHexEncodedArray(_d){const np=[],rp=_d.length*32,ap="0123456789abcdef";for(let sp=0;sp<rp;sp+=8){const lp=_d[sp>>5]>>>sp%32&255,up=parseInt(ap.charAt(lp>>>4&15)+ap.charAt(lp&15),16);np.push(up)}return np}function getOutputLength(_d){return(_d+64>>>9<<4)+14+1}function wordsToMd5(_d,np){_d[np>>5]|=128<<np%32,_d[getOutputLength(np)-1]=np;let rp=1732584193,ap=-271733879,sp=-1732584194,lp=271733878;for(let up=0;up<_d.length;up+=16){const cp=rp,dp=ap,fp=sp,pp=lp;rp=md5ff(rp,ap,sp,lp,_d[up],7,-680876936),lp=md5ff(lp,rp,ap,sp,_d[up+1],12,-389564586),sp=md5ff(sp,lp,rp,ap,_d[up+2],17,606105819),ap=md5ff(ap,sp,lp,rp,_d[up+3],22,-1044525330),rp=md5ff(rp,ap,sp,lp,_d[up+4],7,-176418897),lp=md5ff(lp,rp,ap,sp,_d[up+5],12,1200080426),sp=md5ff(sp,lp,rp,ap,_d[up+6],17,-1473231341),ap=md5ff(ap,sp,lp,rp,_d[up+7],22,-45705983),rp=md5ff(rp,ap,sp,lp,_d[up+8],7,1770035416),lp=md5ff(lp,rp,ap,sp,_d[up+9],12,-1958414417),sp=md5ff(sp,lp,rp,ap,_d[up+10],17,-42063),ap=md5ff(ap,sp,lp,rp,_d[up+11],22,-1990404162),rp=md5ff(rp,ap,sp,lp,_d[up+12],7,1804603682),lp=md5ff(lp,rp,ap,sp,_d[up+13],12,-40341101),sp=md5ff(sp,lp,rp,ap,_d[up+14],17,-1502002290),ap=md5ff(ap,sp,lp,rp,_d[up+15],22,1236535329),rp=md5gg(rp,ap,sp,lp,_d[up+1],5,-165796510),lp=md5gg(lp,rp,ap,sp,_d[up+6],9,-1069501632),sp=md5gg(sp,lp,rp,ap,_d[up+11],14,643717713),ap=md5gg(ap,sp,lp,rp,_d[up],20,-373897302),rp=md5gg(rp,ap,sp,lp,_d[up+5],5,-701558691),lp=md5gg(lp,rp,ap,sp,_d[up+10],9,38016083),sp=md5gg(sp,lp,rp,ap,_d[up+15],14,-660478335),ap=md5gg(ap,sp,lp,rp,_d[up+4],20,-405537848),rp=md5gg(rp,ap,sp,lp,_d[up+9],5,568446438),lp=md5gg(lp,rp,ap,sp,_d[up+14],9,-1019803690),sp=md5gg(sp,lp,rp,ap,_d[up+3],14,-187363961),ap=md5gg(ap,sp,lp,rp,_d[up+8],20,1163531501),rp=md5gg(rp,ap,sp,lp,_d[up+13],5,-1444681467),lp=md5gg(lp,rp,ap,sp,_d[up+2],9,-51403784),sp=md5gg(sp,lp,rp,ap,_d[up+7],14,1735328473),ap=md5gg(ap,sp,lp,rp,_d[up+12],20,-1926607734),rp=md5hh(rp,ap,sp,lp,_d[up+5],4,-378558),lp=md5hh(lp,rp,ap,sp,_d[up+8],11,-2022574463),sp=md5hh(sp,lp,rp,ap,_d[up+11],16,1839030562),ap=md5hh(ap,sp,lp,rp,_d[up+14],23,-35309556),rp=md5hh(rp,ap,sp,lp,_d[up+1],4,-1530992060),lp=md5hh(lp,rp,ap,sp,_d[up+4],11,1272893353),sp=md5hh(sp,lp,rp,ap,_d[up+7],16,-155497632),ap=md5hh(ap,sp,lp,rp,_d[up+10],23,-1094730640),rp=md5hh(rp,ap,sp,lp,_d[up+13],4,681279174),lp=md5hh(lp,rp,ap,sp,_d[up],11,-358537222),sp=md5hh(sp,lp,rp,ap,_d[up+3],16,-722521979),ap=md5hh(ap,sp,lp,rp,_d[up+6],23,76029189),rp=md5hh(rp,ap,sp,lp,_d[up+9],4,-640364487),lp=md5hh(lp,rp,ap,sp,_d[up+12],11,-421815835),sp=md5hh(sp,lp,rp,ap,_d[up+15],16,530742520),ap=md5hh(ap,sp,lp,rp,_d[up+2],23,-995338651),rp=md5ii(rp,ap,sp,lp,_d[up],6,-198630844),lp=md5ii(lp,rp,ap,sp,_d[up+7],10,1126891415),sp=md5ii(sp,lp,rp,ap,_d[up+14],15,-1416354905),ap=md5ii(ap,sp,lp,rp,_d[up+5],21,-57434055),rp=md5ii(rp,ap,sp,lp,_d[up+12],6,1700485571),lp=md5ii(lp,rp,ap,sp,_d[up+3],10,-1894986606),sp=md5ii(sp,lp,rp,ap,_d[up+10],15,-1051523),ap=md5ii(ap,sp,lp,rp,_d[up+1],21,-2054922799),rp=md5ii(rp,ap,sp,lp,_d[up+8],6,1873313359),lp=md5ii(lp,rp,ap,sp,_d[up+15],10,-30611744),sp=md5ii(sp,lp,rp,ap,_d[up+6],15,-1560198380),ap=md5ii(ap,sp,lp,rp,_d[up+13],21,1309151649),rp=md5ii(rp,ap,sp,lp,_d[up+4],6,-145523070),lp=md5ii(lp,rp,ap,sp,_d[up+11],10,-1120210379),sp=md5ii(sp,lp,rp,ap,_d[up+2],15,718787259),ap=md5ii(ap,sp,lp,rp,_d[up+9],21,-343485551),rp=safeAdd(rp,cp),ap=safeAdd(ap,dp),sp=safeAdd(sp,fp),lp=safeAdd(lp,pp)}return[rp,ap,sp,lp]}function bytesToWords(_d){if(_d.length===0)return[];const np=_d.length*8,rp=new Uint32Array(getOutputLength(np));for(let ap=0;ap<np;ap+=8)rp[ap>>5]|=(_d[ap/8]&255)<<ap%32;return rp}function safeAdd(_d,np){const rp=(_d&65535)+(np&65535);return(_d>>16)+(np>>16)+(rp>>16)<<16|rp&65535}function bitRotateLeft(_d,np){return _d<<np|_d>>>32-np}function md5cmn(_d,np,rp,ap,sp,lp){return safeAdd(bitRotateLeft(safeAdd(safeAdd(np,_d),safeAdd(ap,lp)),sp),rp)}function md5ff(_d,np,rp,ap,sp,lp,up){return md5cmn(np&rp|~np&ap,_d,np,sp,lp,up)}function md5gg(_d,np,rp,ap,sp,lp,up){return md5cmn(np&ap|rp&~ap,_d,np,sp,lp,up)}function md5hh(_d,np,rp,ap,sp,lp,up){return md5cmn(np^rp^ap,_d,np,sp,lp,up)}function md5ii(_d,np,rp,ap,sp,lp,up){return md5cmn(rp^(np|~ap),_d,np,sp,lp,up)}var _default$7=md5;md5$1.default=_default$7;Object.defineProperty(v3$1,"__esModule",{value:!0});v3$1.default=void 0;var _v$1=_interopRequireDefault$h(v35$1),_md=_interopRequireDefault$h(md5$1);function _interopRequireDefault$h(_d){return _d&&_d.__esModule?_d:{default:_d}}const v3=(0,_v$1.default)("v3",48,_md.default);var _default$6=v3;v3$1.default=_default$6;var v4$1={},native={};Object.defineProperty(native,"__esModule",{value:!0});native.default=void 0;const randomUUID=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var _default$5={randomUUID};native.default=_default$5;Object.defineProperty(v4$1,"__esModule",{value:!0});v4$1.default=void 0;var _native=_interopRequireDefault$g(native),_rng=_interopRequireDefault$g(rng$1),_stringify=stringify$1;function _interopRequireDefault$g(_d){return _d&&_d.__esModule?_d:{default:_d}}function v4(_d,np,rp){if(_native.default.randomUUID&&!np&&!_d)return _native.default.randomUUID();_d=_d||{};const ap=_d.random||(_d.rng||_rng.default)();if(ap[6]=ap[6]&15|64,ap[8]=ap[8]&63|128,np){rp=rp||0;for(let sp=0;sp<16;++sp)np[rp+sp]=ap[sp];return np}return(0,_stringify.unsafeStringify)(ap)}var _default$4=v4;v4$1.default=_default$4;var v5$1={},sha1$1={};Object.defineProperty(sha1$1,"__esModule",{value:!0});sha1$1.default=void 0;function f(_d,np,rp,ap){switch(_d){case 0:return np&rp^~np&ap;case 1:return np^rp^ap;case 2:return np&rp^np&ap^rp&ap;case 3:return np^rp^ap}}function ROTL(_d,np){return _d<<np|_d>>>32-np}function sha1(_d){const np=[1518500249,1859775393,2400959708,3395469782],rp=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof _d=="string"){const up=unescape(encodeURIComponent(_d));_d=[];for(let cp=0;cp<up.length;++cp)_d.push(up.charCodeAt(cp))}else Array.isArray(_d)||(_d=Array.prototype.slice.call(_d));_d.push(128);const ap=_d.length/4+2,sp=Math.ceil(ap/16),lp=new Array(sp);for(let up=0;up<sp;++up){const cp=new Uint32Array(16);for(let dp=0;dp<16;++dp)cp[dp]=_d[up*64+dp*4]<<24|_d[up*64+dp*4+1]<<16|_d[up*64+dp*4+2]<<8|_d[up*64+dp*4+3];lp[up]=cp}lp[sp-1][14]=(_d.length-1)*8/Math.pow(2,32),lp[sp-1][14]=Math.floor(lp[sp-1][14]),lp[sp-1][15]=(_d.length-1)*8&4294967295;for(let up=0;up<sp;++up){const cp=new Uint32Array(80);for(let gp=0;gp<16;++gp)cp[gp]=lp[up][gp];for(let gp=16;gp<80;++gp)cp[gp]=ROTL(cp[gp-3]^cp[gp-8]^cp[gp-14]^cp[gp-16],1);let dp=rp[0],fp=rp[1],pp=rp[2],hp=rp[3],mp=rp[4];for(let gp=0;gp<80;++gp){const vp=Math.floor(gp/20),xp=ROTL(dp,5)+f(vp,fp,pp,hp)+mp+np[vp]+cp[gp]>>>0;mp=hp,hp=pp,pp=ROTL(fp,30)>>>0,fp=dp,dp=xp}rp[0]=rp[0]+dp>>>0,rp[1]=rp[1]+fp>>>0,rp[2]=rp[2]+pp>>>0,rp[3]=rp[3]+hp>>>0,rp[4]=rp[4]+mp>>>0}return[rp[0]>>24&255,rp[0]>>16&255,rp[0]>>8&255,rp[0]&255,rp[1]>>24&255,rp[1]>>16&255,rp[1]>>8&255,rp[1]&255,rp[2]>>24&255,rp[2]>>16&255,rp[2]>>8&255,rp[2]&255,rp[3]>>24&255,rp[3]>>16&255,rp[3]>>8&255,rp[3]&255,rp[4]>>24&255,rp[4]>>16&255,rp[4]>>8&255,rp[4]&255]}var _default$3=sha1;sha1$1.default=_default$3;Object.defineProperty(v5$1,"__esModule",{value:!0});v5$1.default=void 0;var _v=_interopRequireDefault$f(v35$1),_sha=_interopRequireDefault$f(sha1$1);function _interopRequireDefault$f(_d){return _d&&_d.__esModule?_d:{default:_d}}const v5=(0,_v.default)("v5",80,_sha.default);var _default$2=v5;v5$1.default=_default$2;var nil={};Object.defineProperty(nil,"__esModule",{value:!0});nil.default=void 0;var _default$1="00000000-0000-0000-0000-000000000000";nil.default=_default$1;var version$2={};Object.defineProperty(version$2,"__esModule",{value:!0});version$2.default=void 0;var _validate=_interopRequireDefault$e(validate$1);function _interopRequireDefault$e(_d){return _d&&_d.__esModule?_d:{default:_d}}function version$1(_d){if(!(0,_validate.default)(_d))throw TypeError("Invalid UUID");return parseInt(_d.slice(14,15),16)}var _default=version$1;version$2.default=_default;(function(_d){Object.defineProperty(_d,"__esModule",{value:!0}),Object.defineProperty(_d,"NIL",{enumerable:!0,get:function(){return lp.default}}),Object.defineProperty(_d,"parse",{enumerable:!0,get:function(){return fp.default}}),Object.defineProperty(_d,"stringify",{enumerable:!0,get:function(){return dp.default}}),Object.defineProperty(_d,"v1",{enumerable:!0,get:function(){return np.default}}),Object.defineProperty(_d,"v3",{enumerable:!0,get:function(){return rp.default}}),Object.defineProperty(_d,"v4",{enumerable:!0,get:function(){return ap.default}}),Object.defineProperty(_d,"v5",{enumerable:!0,get:function(){return sp.default}}),Object.defineProperty(_d,"validate",{enumerable:!0,get:function(){return cp.default}}),Object.defineProperty(_d,"version",{enumerable:!0,get:function(){return up.default}});var np=pp(v1$1),rp=pp(v3$1),ap=pp(v4$1),sp=pp(v5$1),lp=pp(nil),up=pp(version$2),cp=pp(validate$1),dp=pp(stringify$1),fp=pp(parse$1);function pp(hp){return hp&&hp.__esModule?hp:{default:hp}}})(commonjsBrowser);var __extends$9=commonjsGlobal&&commonjsGlobal.__extends||function(){var _d=function(np,rp){return _d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ap,sp){ap.__proto__=sp}||function(ap,sp){for(var lp in sp)Object.prototype.hasOwnProperty.call(sp,lp)&&(ap[lp]=sp[lp])},_d(np,rp)};return function(np,rp){if(typeof rp!="function"&&rp!==null)throw new TypeError("Class extends value "+String(rp)+" is not a constructor or null");_d(np,rp);function ap(){this.constructor=np}np.prototype=rp===null?Object.create(rp):(ap.prototype=rp.prototype,new ap)}}(),__assign=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign=Object.assign||function(_d){for(var np,rp=1,ap=arguments.length;rp<ap;rp++){np=arguments[rp];for(var sp in np)Object.prototype.hasOwnProperty.call(np,sp)&&(_d[sp]=np[sp])}return _d},__assign.apply(this,arguments)},__awaiter$3=commonjsGlobal&&commonjsGlobal.__awaiter||function(_d,np,rp,ap){function sp(lp){return lp instanceof rp?lp:new rp(function(up){up(lp)})}return new(rp||(rp=Promise))(function(lp,up){function cp(pp){try{fp(ap.next(pp))}catch(hp){up(hp)}}function dp(pp){try{fp(ap.throw(pp))}catch(hp){up(hp)}}function fp(pp){pp.done?lp(pp.value):sp(pp.value).then(cp,dp)}fp((ap=ap.apply(_d,np||[])).next())})},__generator$3=commonjsGlobal&&commonjsGlobal.__generator||function(_d,np){var rp={label:0,sent:function(){if(lp[0]&1)throw lp[1];return lp[1]},trys:[],ops:[]},ap,sp,lp,up;return up={next:cp(0),throw:cp(1),return:cp(2)},typeof Symbol=="function"&&(up[Symbol.iterator]=function(){return this}),up;function cp(fp){return function(pp){return dp([fp,pp])}}function dp(fp){if(ap)throw new TypeError("Generator is already executing.");for(;up&&(up=0,fp[0]&&(rp=0)),rp;)try{if(ap=1,sp&&(lp=fp[0]&2?sp.return:fp[0]?sp.throw||((lp=sp.return)&&lp.call(sp),0):sp.next)&&!(lp=lp.call(sp,fp[1])).done)return lp;switch(sp=0,lp&&(fp=[fp[0]&2,lp.value]),fp[0]){case 0:case 1:lp=fp;break;case 4:return rp.label++,{value:fp[1],done:!1};case 5:rp.label++,sp=fp[1],fp=[0];continue;case 7:fp=rp.ops.pop(),rp.trys.pop();continue;default:if(lp=rp.trys,!(lp=lp.length>0&&lp[lp.length-1])&&(fp[0]===6||fp[0]===2)){rp=0;continue}if(fp[0]===3&&(!lp||fp[1]>lp[0]&&fp[1]<lp[3])){rp.label=fp[1];break}if(fp[0]===6&&rp.label<lp[1]){rp.label=lp[1],lp=fp;break}if(lp&&rp.label<lp[2]){rp.label=lp[2],rp.ops.push(fp);break}lp[2]&&rp.ops.pop(),rp.trys.pop();continue}fp=np.call(_d,rp)}catch(pp){fp=[6,pp],sp=0}finally{ap=lp=0}if(fp[0]&5)throw fp[1];return{value:fp[0]?fp[1]:void 0,done:!0}}};Object.defineProperty(WebRtcPeer$1,"__esModule",{value:!0});WebRtcPeer$1.WebRtcPeerSendrecv=WebRtcPeer$1.WebRtcPeerSendonly=WebRtcPeer$1.WebRtcPeerRecvonly=WebRtcPeer$1.WebRtcPeer=void 0;var freeice=freeice_1,uuid_1$1=commonjsBrowser,ExceptionEvent_1$2=ExceptionEvent,OpenViduLogger_1$5=OpenViduLogger$1,Platform_1$3=Platform,logger$5=OpenViduLogger_1$5.OpenViduLogger.getInstance(),WebRtcPeer=function(){function _d(np){var rp=this;this.remoteCandidatesQueue=[],this.localCandidatesQueue=[],this.iceCandidateList=[],Platform_1$3.PlatformUtils.getInstance(),this.configuration=__assign(__assign({},np),{iceServers:np.iceServers&&np.iceServers.length>0?np.iceServers:freeice(),mediaStream:np.mediaStream!==void 0?np.mediaStream:null,mode:np.mode?np.mode:"sendrecv",id:np.id?np.id:this.generateUniqueId()}),logger$5.debug(`[WebRtcPeer] configuration:
`.concat(JSON.stringify(this.configuration,null,2))),this.pc=new RTCPeerConnection({iceServers:this.configuration.iceServers}),this.pc.addEventListener("icecandidate",function(ap){if(ap.candidate!==null){var sp=ap.candidate,lp=new RTCIceCandidate(sp);rp.configuration.onIceCandidate(lp),lp.candidate!==""&&rp.localCandidatesQueue.push(lp)}}),this.pc.addEventListener("signalingstatechange",function(){return __awaiter$3(rp,void 0,void 0,function(){var ap,sp;return __generator$3(this,function(lp){switch(lp.label){case 0:if(this.pc.signalingState!=="stable")return[3,6];lp.label=1;case 1:if(!(this.iceCandidateList.length>0))return[3,6];ap=this.iceCandidateList.shift(),lp.label=2;case 2:return lp.trys.push([2,4,,5]),[4,this.pc.addIceCandidate(ap)];case 3:return lp.sent(),[3,5];case 4:return sp=lp.sent(),logger$5.error("Error when calling RTCPeerConnection#addIceCandidate for RTCPeerConnection "+this.getId(),sp),[3,5];case 5:return[3,1];case 6:return[2]}})})})}return _d.prototype.getId=function(){return this.configuration.id},_d.prototype.dispose=function(){if(logger$5.debug("Disposing WebRtcPeer"),this.pc){if(this.pc.signalingState==="closed")return;this.pc.close(),this.remoteCandidatesQueue=[],this.localCandidatesQueue=[]}},_d.prototype.createOfferLegacy=function(){this.configuration.mediaStream&&this.deprecatedPeerConnectionTrackApi();var np=this.configuration.mediaConstraints.audio,rp=this.configuration.mediaConstraints.video,ap={offerToReceiveAudio:this.configuration.mode!=="sendonly"&&np,offerToReceiveVideo:this.configuration.mode!=="sendonly"&&rp};return logger$5.debug("[createOfferLegacy] RTCPeerConnection.createOffer() options:",JSON.stringify(ap)),this.pc.createOffer(ap)},_d.prototype.createOffer=function(){var np,rp,ap,sp,lp,up,cp,dp;return __awaiter$3(this,void 0,void 0,function(){var fp,pp,hp,mp,gp,vp,xp,Sp,yp,bp,Ep,wp,_p,Cp,$p,Rp,Pp,Fp,Op,jp,Mp,Ap,Dp,Fp;return __generator$3(this,function(Ip){switch(Ip.label){case 0:if("addTransceiver"in this.pc)logger$5.debug("[createOffer] Method RTCPeerConnection.addTransceiver() is available; using it");else return logger$5.warn("[createOffer] Method RTCPeerConnection.addTransceiver() is NOT available; using LEGACY offerToReceive{Audio,Video}"),[2,this.createOfferLegacy()];if(this.configuration.mode==="recvonly")return[3,7];if(!this.configuration.mediaStream)throw new Error("[WebRtcPeer.createOffer] Direction is '".concat(this.configuration.mode,"', but no stream was configured to be sent"));fp=0,pp=this.configuration.mediaStream.getTracks(),Ip.label=1;case 1:if(!(fp<pp.length))return[3,6];if(hp=pp[fp],mp={direction:this.configuration.mode,streams:[this.configuration.mediaStream]},hp.kind==="video"&&this.configuration.simulcast)for(gp=hp.getSettings(),vp=hp.getConstraints(),xp=(ap=(rp=(np=gp.width)!==null&&np!==void 0?np:vp.width.ideal)!==null&&rp!==void 0?rp:vp.width)!==null&&ap!==void 0?ap:0,Sp=(up=(lp=(sp=gp.height)!==null&&sp!==void 0?sp:vp.height.ideal)!==null&&lp!==void 0?lp:vp.height)!==null&&up!==void 0?up:0,logger$5.info("[createOffer] Video track dimensions: ".concat(xp,"x").concat(Sp)),yp=xp*Sp,bp=0,yp>=960*540?bp=3:yp>=480*270?bp=2:bp=1,mp.sendEncodings=[],Ep=0;Ep<bp;Ep++)wp=Math.pow(2,bp-Ep-1),_p={rid:"rdiv"+wp.toString(),scalabilityMode:"L1T1"},["detail","text"].includes(hp.contentHint)?(_p.scaleResolutionDownBy=1,_p.maxFramerate=Math.floor(30/wp)):_p.scaleResolutionDownBy=wp,mp.sendEncodings.push(_p);if(Cp=this.pc.addTransceiver(hp,mp),hp.kind!=="video")return[3,5];if($p=Cp.sender.getParameters(),Rp=!1,!((cp=$p.degradationPreference)===null||cp===void 0)&&cp.length||(["detail","text"].includes(hp.contentHint)?$p.degradationPreference="maintain-resolution":$p.degradationPreference="balanced",logger$5.info("[createOffer] Video sender Degradation Preference set: ".concat($p.degradationPreference)),Rp=!0),this.configuration.simulcast&&((dp=$p.encodings)===null||dp===void 0?void 0:dp.length)!==mp.sendEncodings.length&&($p.encodings=mp.sendEncodings,Rp=!0),!Rp)return[3,5];logger$5.debug("[createOffer] Setting new RTCRtpSendParameters to video sender"),Ip.label=2;case 2:return Ip.trys.push([2,4,,5]),[4,Cp.sender.setParameters($p)];case 3:return Ip.sent(),[3,5];case 4:throw Pp=Ip.sent(),Fp="[WebRtcPeer.createOffer] Cannot set RTCRtpSendParameters to video sender",Pp instanceof Error&&(Fp+=": ".concat(Pp.message)),new Error(Fp);case 5:return fp++,[3,1];case 6:return[3,8];case 7:for(Op=0,jp=["audio","video"];Op<jp.length;Op++)Mp=jp[Op],this.configuration.mediaConstraints[Mp]&&(this.configuration.mediaStream=new MediaStream,this.pc.addTransceiver(Mp,{direction:this.configuration.mode,streams:[this.configuration.mediaStream]}));Ip.label=8;case 8:return Ip.trys.push([8,10,,11]),[4,this.pc.createOffer()];case 9:return Ap=Ip.sent(),[3,11];case 10:throw Dp=Ip.sent(),Fp="[WebRtcPeer.createOffer] Browser failed creating an SDP Offer",Dp instanceof Error&&(Fp+=": ".concat(Dp.message)),new Error(Fp);case 11:return[2,Ap]}})})},_d.prototype.deprecatedPeerConnectionTrackApi=function(){for(var np=0,rp=this.configuration.mediaStream.getTracks();np<rp.length;np++){var ap=rp[np];this.pc.addTrack(ap,this.configuration.mediaStream)}},_d.prototype.createAnswer=function(){var np=this;return new Promise(function(rp,ap){if("getTransceivers"in np.pc){logger$5.debug("[createAnswer] Method RTCPeerConnection.getTransceivers() is available; using it");for(var sp=function(mp){if(!np.configuration.mediaConstraints[mp])return"continue";var gp=np.pc.getTransceivers().find(function(vp){return vp.receiver.track.kind===mp});if(gp)gp.direction=np.configuration.mode;else return{value:ap(new Error("".concat(mp," requested, but no transceiver was created from remote description")))}},lp=0,up=["audio","video"];lp<up.length;lp++){var cp=up[lp],dp=sp(cp);if(typeof dp=="object")return dp.value}np.pc.createAnswer().then(function(mp){return rp(mp)}).catch(function(mp){return ap(mp)})}else{var fp=void 0,pp=!0;if(np.configuration.mediaConstraints){fp=typeof np.configuration.mediaConstraints.audio=="boolean"?np.configuration.mediaConstraints.audio:!0,pp=typeof np.configuration.mediaConstraints.video=="boolean"?np.configuration.mediaConstraints.video:!0;var hp={offerToReceiveAudio:fp,offerToReceiveVideo:pp};np.pc.createAnswer(hp).then(function(mp){return rp(mp)}).catch(function(mp){return ap(mp)})}}})},_d.prototype.processLocalOffer=function(np){var rp=this;return new Promise(function(ap,sp){rp.pc.setLocalDescription(np).then(function(){var lp=rp.pc.localDescription;return lp?(logger$5.debug("Local description set",lp.sdp),ap()):sp("Local description is not defined")}).catch(function(lp){return sp(lp)})})},_d.prototype.processRemoteOffer=function(np){var rp=this;return new Promise(function(ap,sp){var lp={type:"offer",sdp:np};if(logger$5.debug("SDP offer received, setting remote description",lp),rp.pc.signalingState==="closed")return sp("RTCPeerConnection is closed when trying to set remote description");rp.setRemoteDescription(lp).then(function(){return ap()}).catch(function(up){return sp(up)})})},_d.prototype.processLocalAnswer=function(np){var rp=this;return new Promise(function(ap,sp){if(logger$5.debug("SDP answer created, setting local description"),rp.pc.signalingState==="closed")return sp("RTCPeerConnection is closed when trying to set local description");rp.pc.setLocalDescription(np).then(function(){return ap()}).catch(function(lp){return sp(lp)})})},_d.prototype.processRemoteAnswer=function(np){var rp=this;return new Promise(function(ap,sp){var lp={type:"answer",sdp:np};if(logger$5.debug("SDP answer received, setting remote description"),rp.pc.signalingState==="closed")return sp("RTCPeerConnection is closed when trying to set remote description");rp.setRemoteDescription(lp).then(function(){ap()}).catch(function(up){return sp(up)})})},_d.prototype.setRemoteDescription=function(np){return __awaiter$3(this,void 0,void 0,function(){return __generator$3(this,function(rp){return[2,this.pc.setRemoteDescription(np)]})})},_d.prototype.addIceCandidate=function(np){var rp=this;return new Promise(function(ap,sp){switch(logger$5.debug("Remote ICE candidate received",np),rp.remoteCandidatesQueue.push(np),rp.pc.signalingState){case"closed":sp(new Error("PeerConnection object is closed"));break;case"stable":rp.pc.remoteDescription?rp.pc.addIceCandidate(np).then(function(){return ap()}).catch(function(lp){return sp(lp)}):(rp.iceCandidateList.push(np),ap());break;default:rp.iceCandidateList.push(np),ap()}})},_d.prototype.addIceConnectionStateChangeListener=function(np){var rp=this;this.pc.addEventListener("iceconnectionstatechange",function(){var ap=rp.pc.iceConnectionState;switch(ap){case"disconnected":var sp="IceConnectionState of RTCPeerConnection "+rp.configuration.id+" ("+np+') change to "disconnected". Possible network disconnection';logger$5.warn(sp),rp.configuration.onIceConnectionStateException(ExceptionEvent_1$2.ExceptionEventName.ICE_CONNECTION_DISCONNECTED,sp);break;case"failed":var lp="IceConnectionState of RTCPeerConnection "+rp.configuration.id+" ("+np+') to "failed"';logger$5.error(lp),rp.configuration.onIceConnectionStateException(ExceptionEvent_1$2.ExceptionEventName.ICE_CONNECTION_FAILED,lp);break;case"closed":logger$5.log("IceConnectionState of RTCPeerConnection "+rp.configuration.id+" ("+np+') change to "closed"');break;case"new":logger$5.log("IceConnectionState of RTCPeerConnection "+rp.configuration.id+" ("+np+') change to "new"');break;case"checking":logger$5.log("IceConnectionState of RTCPeerConnection "+rp.configuration.id+" ("+np+') change to "checking"');break;case"connected":logger$5.log("IceConnectionState of RTCPeerConnection "+rp.configuration.id+" ("+np+') change to "connected"');break;case"completed":logger$5.log("IceConnectionState of RTCPeerConnection "+rp.configuration.id+" ("+np+') change to "completed"');break}})},_d.prototype.generateUniqueId=function(){return(0,uuid_1$1.v4)()},_d}();WebRtcPeer$1.WebRtcPeer=WebRtcPeer;var WebRtcPeerRecvonly=function(_d){__extends$9(np,_d);function np(rp){return rp.mode="recvonly",_d.call(this,rp)||this}return np}(WebRtcPeer);WebRtcPeer$1.WebRtcPeerRecvonly=WebRtcPeerRecvonly;var WebRtcPeerSendonly=function(_d){__extends$9(np,_d);function np(rp){return rp.mode="sendonly",_d.call(this,rp)||this}return np}(WebRtcPeer);WebRtcPeer$1.WebRtcPeerSendonly=WebRtcPeerSendonly;var WebRtcPeerSendrecv=function(_d){__extends$9(np,_d);function np(rp){return rp.mode="sendrecv",_d.call(this,rp)||this}return np}(WebRtcPeer);WebRtcPeer$1.WebRtcPeerSendrecv=WebRtcPeerSendrecv;var WebRtcStats$1={},__awaiter$2=commonjsGlobal&&commonjsGlobal.__awaiter||function(_d,np,rp,ap){function sp(lp){return lp instanceof rp?lp:new rp(function(up){up(lp)})}return new(rp||(rp=Promise))(function(lp,up){function cp(pp){try{fp(ap.next(pp))}catch(hp){up(hp)}}function dp(pp){try{fp(ap.throw(pp))}catch(hp){up(hp)}}function fp(pp){pp.done?lp(pp.value):sp(pp.value).then(cp,dp)}fp((ap=ap.apply(_d,np||[])).next())})},__generator$2=commonjsGlobal&&commonjsGlobal.__generator||function(_d,np){var rp={label:0,sent:function(){if(lp[0]&1)throw lp[1];return lp[1]},trys:[],ops:[]},ap,sp,lp,up;return up={next:cp(0),throw:cp(1),return:cp(2)},typeof Symbol=="function"&&(up[Symbol.iterator]=function(){return this}),up;function cp(fp){return function(pp){return dp([fp,pp])}}function dp(fp){if(ap)throw new TypeError("Generator is already executing.");for(;up&&(up=0,fp[0]&&(rp=0)),rp;)try{if(ap=1,sp&&(lp=fp[0]&2?sp.return:fp[0]?sp.throw||((lp=sp.return)&&lp.call(sp),0):sp.next)&&!(lp=lp.call(sp,fp[1])).done)return lp;switch(sp=0,lp&&(fp=[fp[0]&2,lp.value]),fp[0]){case 0:case 1:lp=fp;break;case 4:return rp.label++,{value:fp[1],done:!1};case 5:rp.label++,sp=fp[1],fp=[0];continue;case 7:fp=rp.ops.pop(),rp.trys.pop();continue;default:if(lp=rp.trys,!(lp=lp.length>0&&lp[lp.length-1])&&(fp[0]===6||fp[0]===2)){rp=0;continue}if(fp[0]===3&&(!lp||fp[1]>lp[0]&&fp[1]<lp[3])){rp.label=fp[1];break}if(fp[0]===6&&rp.label<lp[1]){rp.label=lp[1],lp=fp;break}if(lp&&rp.label<lp[2]){rp.label=lp[2],rp.ops.push(fp);break}lp[2]&&rp.ops.pop(),rp.trys.pop();continue}fp=np.call(_d,rp)}catch(pp){fp=[6,pp],sp=0}finally{ap=lp=0}if(fp[0]&5)throw fp[1];return{value:fp[0]?fp[1]:void 0,done:!0}}};Object.defineProperty(WebRtcStats$1,"__esModule",{value:!0});WebRtcStats$1.WebRtcStats=void 0;var OpenViduLogger_1$4=OpenViduLogger$1,Platform_1$2=Platform,logger$4=OpenViduLogger_1$4.OpenViduLogger.getInstance(),platform$2,WebRtcStats=function(){function _d(np){this.stream=np,this.STATS_ITEM_NAME="webrtc-stats-config",this.webRtcStatsEnabled=!1,this.statsInterval=1,platform$2=Platform_1$2.PlatformUtils.getInstance()}return _d.prototype.isEnabled=function(){return this.webRtcStatsEnabled},_d.prototype.initWebRtcStats=function(){var np=this,rp;try{rp=localStorage.getItem(this.STATS_ITEM_NAME)}catch{}if(rp){this.webRtcStatsEnabled=!0;var ap=JSON.parse(rp);logger$4.warn("WebRtc stats enabled for stream "+this.stream.streamId+" of connection "+this.stream.connection.connectionId),logger$4.warn("localStorage item: "+JSON.stringify(ap)),this.POST_URL=ap.httpEndpoint,this.statsInterval=ap.interval,this.webRtcStatsIntervalId=setInterval(function(){return __awaiter$2(np,void 0,void 0,function(){return __generator$2(this,function(sp){switch(sp.label){case 0:return[4,this.sendStatsToHttpEndpoint()];case 1:return sp.sent(),[2]}})})},this.statsInterval*1e3)}else logger$4.debug("WebRtc stats not enabled")},_d.prototype.getSelectedIceCandidateInfo=function(){var np=this;return new Promise(function(rp,ap){return __awaiter$2(np,void 0,void 0,function(){var sp,lp,up,cp,dp,fp,pp,hp,mp,gp,vp,xp,Sp,yp,_p,Cp,bp,Ep,Pp,wp,_p,Cp,$p,Rp,Pp;return __generator$2(this,function(Op){switch(Op.label){case 0:return[4,this.stream.getRTCPeerConnection().getStats()];case 1:if(sp=Op.sent(),up=new Map,cp=new Map,dp=new Map,sp.forEach(function(jp){switch(jp.type==="transport"&&(platform$2.isChromium()||platform$2.isSafariBrowser()||platform$2.isReactNative())&&(lp=jp),jp.type){case"candidate-pair":up.set(jp.id,jp);break;case"local-candidate":cp.set(jp.id,jp);break;case"remote-candidate":dp.set(jp.id,jp);break}}),lp!=null)pp=lp.selectedCandidatePairId,fp=up.get(pp);else for(hp=up.size,mp=up.values(),gp=0;gp<hp;gp++)if(vp=mp.next().value,vp.selected){fp=vp;break}if(xp=fp.localCandidateId,Sp=fp.remoteCandidateId,yp=cp.get(xp),yp)for(_p=this.stream.getLocalIceCandidateList(),Cp=_p.filter(function(jp){return!!jp.candidate&&(jp.candidate.indexOf(yp.ip)>=0||jp.candidate.indexOf(yp.address)>=0)&&jp.candidate.indexOf(yp.port)>=0}),yp.raw=[],bp=0,Ep=Cp;bp<Ep.length;bp++)Pp=Ep[bp],yp.raw.push(Pp.candidate);else yp="ERROR: No active local ICE candidate. Probably ICE-TCP is being used";if(wp=dp.get(Sp),wp)for(_p=this.stream.getRemoteIceCandidateList(),Cp=_p.filter(function(jp){return!!jp.candidate&&(jp.candidate.indexOf(wp.ip)>=0||jp.candidate.indexOf(wp.address)>=0)&&jp.candidate.indexOf(wp.port)>=0}),wp.raw=[],$p=0,Rp=Cp;$p<Rp.length;$p++)Pp=Rp[$p],wp.raw.push(Pp.candidate);else wp="ERROR: No active remote ICE candidate. Probably ICE-TCP is being used";return[2,rp({localCandidate:yp,remoteCandidate:wp})]}})})})},_d.prototype.stopWebRtcStats=function(){this.webRtcStatsEnabled&&(clearInterval(this.webRtcStatsIntervalId),logger$4.warn("WebRtc stats stopped for disposed stream "+this.stream.streamId+" of connection "+this.stream.connection.connectionId))},_d.prototype.sendStats=function(np,rp){return __awaiter$2(this,void 0,void 0,function(){var ap,sp;return __generator$2(this,function(lp){switch(lp.label){case 0:return lp.trys.push([0,2,,3]),ap={headers:{"Content-type":"application/json"},body:JSON.stringify(rp),method:"POST"},[4,fetch(np,ap)];case 1:return lp.sent(),[3,3];case 2:return sp=lp.sent(),logger$4.error("sendStats error: ".concat(JSON.stringify(sp))),[3,3];case 3:return[2]}})})},_d.prototype.sendStatsToHttpEndpoint=function(){return __awaiter$2(this,void 0,void 0,function(){var np,rp,ap;return __generator$2(this,function(sp){switch(sp.label){case 0:return sp.trys.push([0,3,,4]),[4,this.getCommonStats()];case 1:return np=sp.sent(),rp=this.generateJSONStatsResponse(np),[4,this.sendStats(this.POST_URL,rp)];case 2:return sp.sent(),[3,4];case 3:return ap=sp.sent(),logger$4.log(ap),[3,4];case 4:return[2]}})})},_d.prototype.getCommonStats=function(){return __awaiter$2(this,void 0,void 0,function(){var np=this;return __generator$2(this,function(rp){return[2,new Promise(function(ap,sp){return __awaiter$2(np,void 0,void 0,function(){var lp,up,cp,dp,fp,pp=this;return __generator$2(this,function(hp){switch(hp.label){case 0:return hp.trys.push([0,2,,3]),[4,this.stream.getRTCPeerConnection().getStats()];case 1:return lp=hp.sent(),up=this.getWebRtcStatsResponseOutline(),cp=["framesReceived","framesDropped","framesSent","frameHeight","frameWidth"],dp=["availableOutgoingBitrate","currentRoundTripTime"],lp.forEach(function(mp){var gp=mp.mediaType!=null?mp.mediaType:mp.kind,vp=function(xp,Sp){mp[Sp]!=null&&up[xp]!=null&&(!gp&&cp.indexOf(Sp)>-1&&(gp="video"),xp!=null&&gp!=null&&Sp!=null&&up[xp][gp]!=null?up[xp][gp][Sp]=Number(mp[Sp]):xp!=null&&Sp!=null&&dp.includes(Sp)&&(up[xp][Sp]=Number(mp[Sp])))};switch(mp.type){case"outbound-rtp":vp("outbound","bytesSent"),vp("outbound","packetsSent"),vp("outbound","framesEncoded"),vp("outbound","nackCount"),vp("outbound","firCount"),vp("outbound","pliCount"),vp("outbound","qpSum");break;case"inbound-rtp":vp("inbound","bytesReceived"),vp("inbound","packetsReceived"),vp("inbound","packetsLost"),vp("inbound","jitter"),vp("inbound","framesDecoded"),vp("inbound","nackCount"),vp("inbound","firCount"),vp("inbound","pliCount");break;case"track":vp("inbound","jitterBufferDelay"),vp("inbound","framesReceived"),vp("outbound","framesDropped"),vp("outbound","framesSent"),vp(pp.stream.isLocal()?"outbound":"inbound","frameHeight"),vp(pp.stream.isLocal()?"outbound":"inbound","frameWidth");break;case"candidate-pair":vp("candidatepair","currentRoundTripTime"),vp("candidatepair","availableOutgoingBitrate");break}}),(!(up!=null&&up.candidatepair)||Object.keys(up.candidatepair).length===0)&&delete up.candidatepair,[2,ap(up)];case 2:return fp=hp.sent(),logger$4.error("Error getting common stats: ",fp),[2,sp(fp)];case 3:return[2]}})})})]})})},_d.prototype.generateJSONStatsResponse=function(np){return{"@timestamp":new Date().toISOString(),participant_id:this.stream.connection.data,session_id:this.stream.session.sessionId,platform:platform$2.getName(),platform_description:platform$2.getDescription(),stream:"webRTC",webrtc_stats:np}},_d.prototype.getWebRtcStatsResponseOutline=function(){return this.stream.isLocal()?{outbound:{audio:{},video:{}},candidatepair:{}}:{inbound:{audio:{},video:{}}}},_d}();WebRtcStats$1.WebRtcStats=WebRtcStats;var PublisherSpeakingEvent$1={},__extends$8=commonjsGlobal&&commonjsGlobal.__extends||function(){var _d=function(np,rp){return _d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ap,sp){ap.__proto__=sp}||function(ap,sp){for(var lp in sp)Object.prototype.hasOwnProperty.call(sp,lp)&&(ap[lp]=sp[lp])},_d(np,rp)};return function(np,rp){if(typeof rp!="function"&&rp!==null)throw new TypeError("Class extends value "+String(rp)+" is not a constructor or null");_d(np,rp);function ap(){this.constructor=np}np.prototype=rp===null?Object.create(rp):(ap.prototype=rp.prototype,new ap)}}();Object.defineProperty(PublisherSpeakingEvent$1,"__esModule",{value:!0});PublisherSpeakingEvent$1.PublisherSpeakingEvent=void 0;var Event_1$8=Event$2,PublisherSpeakingEvent=function(_d){__extends$8(np,_d);function np(rp,ap,sp,lp){var up=_d.call(this,!1,rp,ap)||this;return up.type=ap,up.connection=sp,up.streamId=lp,up}return np.prototype.callDefaultBehavior=function(){},np}(Event_1$8.Event);PublisherSpeakingEvent$1.PublisherSpeakingEvent=PublisherSpeakingEvent;var TypeOfVideo={};(function(_d){Object.defineProperty(_d,"__esModule",{value:!0}),_d.TypeOfVideo=void 0,function(np){np.CAMERA="CAMERA",np.SCREEN="SCREEN",np.CUSTOM="CUSTOM",np.IPCAM="IPCAM"}(_d.TypeOfVideo||(_d.TypeOfVideo={}))})(TypeOfVideo);var wildemitter=WildEmitter$1;function WildEmitter$1(){}WildEmitter$1.mixin=function(_d){var np=_d.prototype||_d;np.isWildEmitter=!0,np.on=function(rp,ap,sp){this.callbacks=this.callbacks||{};var lp=arguments.length===3,up=lp?arguments[1]:void 0,cp=lp?arguments[2]:arguments[1];return cp._groupName=up,(this.callbacks[rp]=this.callbacks[rp]||[]).push(cp),this},np.once=function(rp,ap,sp){var lp=this,up=arguments.length===3,cp=up?arguments[1]:void 0,dp=up?arguments[2]:arguments[1];function fp(){lp.off(rp,fp),dp.apply(this,arguments)}return this.on(rp,cp,fp),this},np.releaseGroup=function(rp){this.callbacks=this.callbacks||{};var ap,sp,lp,up;for(ap in this.callbacks)for(up=this.callbacks[ap],sp=0,lp=up.length;sp<lp;sp++)up[sp]._groupName===rp&&(up.splice(sp,1),sp--,lp--);return this},np.off=function(rp,ap){this.callbacks=this.callbacks||{};var sp=this.callbacks[rp],lp;return sp?arguments.length===1?(delete this.callbacks[rp],this):(lp=sp.indexOf(ap),lp!==-1&&(sp.splice(lp,1),sp.length===0&&delete this.callbacks[rp]),this):this},np.emit=function(rp){this.callbacks=this.callbacks||{};var ap=[].slice.call(arguments,1),sp=this.callbacks[rp],lp=this.getWildcardCallbacks(rp),up,cp,dp;if(sp)for(dp=sp.slice(),up=0,cp=dp.length;up<cp&&dp[up];++up)dp[up].apply(this,ap);if(lp)for(cp=lp.length,dp=lp.slice(),up=0,cp=dp.length;up<cp&&dp[up];++up)dp[up].apply(this,[rp].concat(ap));return this},np.getWildcardCallbacks=function(rp){this.callbacks=this.callbacks||{};var ap,sp,lp=[];for(ap in this.callbacks)sp=ap.split("*"),(ap==="*"||sp.length===2&&rp.slice(0,sp[0].length)===sp[0])&&(lp=lp.concat(this.callbacks[ap]));return lp}};WildEmitter$1.mixin(WildEmitter$1);var WildEmitter=wildemitter;function getMaxVolume(_d,np){var rp=-1/0;_d.getFloatFrequencyData(np);for(var ap=4,sp=np.length;ap<sp;ap++)np[ap]>rp&&np[ap]<0&&(rp=np[ap]);return rp}var audioContextType;typeof window<"u"&&(audioContextType=window.AudioContext||window.webkitAudioContext);var audioContext=null,hark$1=function(_d,ap){var rp=new WildEmitter;if(!audioContextType)return rp;var ap=ap||{},sp=ap.smoothing||.1,lp=ap.interval||50,up=ap.threshold,cp=ap.play,dp=ap.history||10,fp=!0;audioContext=ap.audioContext||audioContext||new audioContextType;var pp,hp,mp;mp=audioContext.createAnalyser(),mp.fftSize=512,mp.smoothingTimeConstant=sp,hp=new Float32Array(mp.frequencyBinCount),_d.jquery&&(_d=_d[0]),_d instanceof HTMLAudioElement||_d instanceof HTMLVideoElement?(pp=audioContext.createMediaElementSource(_d),typeof cp>"u"&&(cp=!0),up=up||-50):(pp=audioContext.createMediaStreamSource(_d),up=up||-50),pp.connect(mp),cp&&mp.connect(audioContext.destination),rp.speaking=!1,rp.suspend=function(){return audioContext.suspend()},rp.resume=function(){return audioContext.resume()},Object.defineProperty(rp,"state",{get:function(){return audioContext.state}}),audioContext.onstatechange=function(){rp.emit("state_change",audioContext.state)},rp.setThreshold=function(xp){up=xp},rp.setInterval=function(xp){lp=xp},rp.stop=function(){fp=!1,rp.emit("volume_change",-100,up),rp.speaking&&(rp.speaking=!1,rp.emit("stopped_speaking")),mp.disconnect(),pp.disconnect()},rp.speakingHistory=[];for(var gp=0;gp<dp;gp++)rp.speakingHistory.push(0);var vp=function(){setTimeout(function(){if(fp){var xp=getMaxVolume(mp,hp);rp.emit("volume_change",xp,up);var Sp=0;if(xp>up&&!rp.speaking){for(var yp=rp.speakingHistory.length-3;yp<rp.speakingHistory.length;yp++)Sp+=rp.speakingHistory[yp];Sp>=2&&(rp.speaking=!0,rp.emit("speaking"))}else if(xp<up&&rp.speaking){for(var yp=0;yp<rp.speakingHistory.length;yp++)Sp+=rp.speakingHistory[yp];Sp==0&&(rp.speaking=!1,rp.emit("stopped_speaking"))}rp.speakingHistory.shift(),rp.speakingHistory.push(0+(xp>up)),vp()}},lp)};return vp(),rp},__awaiter$1=commonjsGlobal&&commonjsGlobal.__awaiter||function(_d,np,rp,ap){function sp(lp){return lp instanceof rp?lp:new rp(function(up){up(lp)})}return new(rp||(rp=Promise))(function(lp,up){function cp(pp){try{fp(ap.next(pp))}catch(hp){up(hp)}}function dp(pp){try{fp(ap.throw(pp))}catch(hp){up(hp)}}function fp(pp){pp.done?lp(pp.value):sp(pp.value).then(cp,dp)}fp((ap=ap.apply(_d,np||[])).next())})},__generator$1=commonjsGlobal&&commonjsGlobal.__generator||function(_d,np){var rp={label:0,sent:function(){if(lp[0]&1)throw lp[1];return lp[1]},trys:[],ops:[]},ap,sp,lp,up;return up={next:cp(0),throw:cp(1),return:cp(2)},typeof Symbol=="function"&&(up[Symbol.iterator]=function(){return this}),up;function cp(fp){return function(pp){return dp([fp,pp])}}function dp(fp){if(ap)throw new TypeError("Generator is already executing.");for(;up&&(up=0,fp[0]&&(rp=0)),rp;)try{if(ap=1,sp&&(lp=fp[0]&2?sp.return:fp[0]?sp.throw||((lp=sp.return)&&lp.call(sp),0):sp.next)&&!(lp=lp.call(sp,fp[1])).done)return lp;switch(sp=0,lp&&(fp=[fp[0]&2,lp.value]),fp[0]){case 0:case 1:lp=fp;break;case 4:return rp.label++,{value:fp[1],done:!1};case 5:rp.label++,sp=fp[1],fp=[0];continue;case 7:fp=rp.ops.pop(),rp.trys.pop();continue;default:if(lp=rp.trys,!(lp=lp.length>0&&lp[lp.length-1])&&(fp[0]===6||fp[0]===2)){rp=0;continue}if(fp[0]===3&&(!lp||fp[1]>lp[0]&&fp[1]<lp[3])){rp.label=fp[1];break}if(fp[0]===6&&rp.label<lp[1]){rp.label=lp[1],lp=fp;break}if(lp&&rp.label<lp[2]){rp.label=lp[2],rp.ops.push(fp);break}lp[2]&&rp.ops.pop(),rp.trys.pop();continue}fp=np.call(_d,rp)}catch(pp){fp=[6,pp],sp=0}finally{ap=lp=0}if(fp[0]&5)throw fp[1];return{value:fp[0]?fp[1]:void 0,done:!0}}};Object.defineProperty(Stream$1,"__esModule",{value:!0});Stream$1.Stream=void 0;var Filter_1=Filter$1,Subscriber_1=Subscriber$1,WebRtcPeer_1=WebRtcPeer$1,WebRtcStats_1=WebRtcStats$1,ExceptionEvent_1$1=ExceptionEvent,PublisherSpeakingEvent_1=PublisherSpeakingEvent$1,StreamManagerEvent_1=StreamManagerEvent$1,StreamPropertyChangedEvent_1$1=StreamPropertyChangedEvent$1,OpenViduError_1$1=OpenViduError,TypeOfVideo_1=TypeOfVideo,OpenViduLogger_1$3=OpenViduLogger$1,Platform_1$1=Platform,uuid_1=commonjsBrowser,hark=hark$1,EventEmitter$2=EventEmitterExports,logger$3=OpenViduLogger_1$3.OpenViduLogger.getInstance(),platform$1,Stream=function(){function _d(np,rp){var ap=this;this.isSubscribeToRemote=!1,this.isLocalStreamReadyToPublish=!1,this.isLocalStreamPublished=!1,this.publishedOnce=!1,this.harkSpeakingEnabled=!1,this.harkSpeakingEnabledOnce=!1,this.harkStoppedSpeakingEnabled=!1,this.harkStoppedSpeakingEnabledOnce=!1,this.harkVolumeChangeEnabled=!1,this.harkVolumeChangeEnabledOnce=!1,this.ee=new EventEmitter$2,platform$1=Platform_1$1.PlatformUtils.getInstance(),this.session=np,rp.hasOwnProperty("id")?(this.inboundStreamOpts=rp,this.streamId=this.inboundStreamOpts.id,this.creationTime=this.inboundStreamOpts.createdAt,this.hasAudio=this.inboundStreamOpts.hasAudio,this.hasVideo=this.inboundStreamOpts.hasVideo,this.hasAudio&&(this.audioActive=this.inboundStreamOpts.audioActive),this.hasVideo&&(this.videoActive=this.inboundStreamOpts.videoActive,this.typeOfVideo=this.inboundStreamOpts.typeOfVideo?this.inboundStreamOpts.typeOfVideo:void 0,this.frameRate=this.inboundStreamOpts.frameRate===-1?void 0:this.inboundStreamOpts.frameRate,this.videoDimensions=this.inboundStreamOpts.videoDimensions),this.inboundStreamOpts.filter&&Object.keys(this.inboundStreamOpts.filter).length>0&&(this.inboundStreamOpts.filter.lastExecMethod&&Object.keys(this.inboundStreamOpts.filter.lastExecMethod).length===0&&delete this.inboundStreamOpts.filter.lastExecMethod,this.filter=this.inboundStreamOpts.filter)):(this.outboundStreamOpts=rp,this.hasAudio=this.isSendAudio(),this.hasVideo=this.isSendVideo(),this.hasAudio&&(this.audioActive=!!this.outboundStreamOpts.publisherProperties.publishAudio),this.hasVideo&&(this.videoActive=!!this.outboundStreamOpts.publisherProperties.publishVideo,this.frameRate=this.outboundStreamOpts.publisherProperties.frameRate,typeof MediaStreamTrack<"u"&&this.outboundStreamOpts.publisherProperties.videoSource instanceof MediaStreamTrack?this.typeOfVideo=TypeOfVideo_1.TypeOfVideo.CUSTOM:this.typeOfVideo=this.isSendScreen()?TypeOfVideo_1.TypeOfVideo.SCREEN:TypeOfVideo_1.TypeOfVideo.CAMERA),this.outboundStreamOpts.publisherProperties.filter&&(this.filter=this.outboundStreamOpts.publisherProperties.filter)),this.ee.on("mediastream-updated",function(){var sp;ap.streamManager.updateMediaStream(ap.mediaStream),logger$3.debug("Video srcObject ["+((sp=ap.mediaStream)===null||sp===void 0?void 0:sp.id)+"] updated in stream ["+ap.streamId+"]")})}return _d.prototype.reconnect=function(){return this.reconnectStream("API")},_d.prototype.applyFilter=function(np,rp){var ap=this;return new Promise(function(sp,lp){return __awaiter$1(ap,void 0,void 0,function(){var up,cp,dp,fp,pp,hp,mp=this;return __generator$1(this,function(gp){if(this.filter)return[2,lp(new OpenViduError_1$1.OpenViduError(OpenViduError_1$1.OpenViduErrorName.GENERIC_ERROR,"There is already a filter applied to Stream "+this.streamId))];if(up=function(vp,xp){if(vp)return logger$3.error("Error applying filter for Stream "+mp.streamId,vp),vp.code===401?lp(new OpenViduError_1$1.OpenViduError(OpenViduError_1$1.OpenViduErrorName.OPENVIDU_PERMISSION_DENIED,"You don't have permissions to apply a filter")):lp(vp);logger$3.info("Filter successfully applied on Stream "+mp.streamId);var Sp=mp.filter;return mp.filter=new Filter_1.Filter(np,rp),mp.filter.stream=mp,xp&&(mp.session.emitEvent("streamPropertyChanged",[new StreamPropertyChangedEvent_1$1.StreamPropertyChangedEvent(mp.session,mp,"filter",mp.filter,Sp,"applyFilter")]),mp.streamManager.emitEvent("streamPropertyChanged",[new StreamPropertyChangedEvent_1$1.StreamPropertyChangedEvent(mp.streamManager,mp,"filter",mp.filter,Sp,"applyFilter")])),sp(mp.filter)},np.startsWith("VB:")){if(!this.hasVideo)return[2,lp(new OpenViduError_1$1.OpenViduError(OpenViduError_1$1.OpenViduErrorName.VIRTUAL_BACKGROUND_ERROR,"The Virtual Background filter requires a video track to be applied"))];if(!this.mediaStream||this.streamManager.videos.length===0)return[2,lp(new OpenViduError_1$1.OpenViduError(OpenViduError_1$1.OpenViduErrorName.VIRTUAL_BACKGROUND_ERROR,"The StreamManager requires some video element to be attached to it in order to apply a Virtual Background filter"))];if(this.session.token?cp=this.session.token:cp=rp.token,!cp)return[2,lp(new OpenViduError_1$1.OpenViduError(OpenViduError_1$1.OpenViduErrorName.VIRTUAL_BACKGROUND_ERROR,'Virtual Background requires the client to be connected to a Session or to have a "token" property available in "options" parameter with a valid OpenVidu token'))];if(dp=this.session.getTokenParams(cp),dp.edition!=="pro"&&dp.edition!=="enterprise")return[2,lp(new OpenViduError_1$1.OpenViduError(OpenViduError_1$1.OpenViduErrorName.VIRTUAL_BACKGROUND_ERROR,"OpenVidu Virtual Background API is available from OpenVidu Pro edition onwards"))];cp=encodeURIComponent(btoa(cp)),logger$3.info("Applying Virtual Background to stream "+this.streamId),fp=function(){return __awaiter$1(mp,void 0,void 0,function(){var vp,xp,Sp,yp,bp,Ep,wp;return __generator$1(this,function(_p){switch(_p.label){case 0:return _p.trys.push([0,8,,9]),vp=this.streamId+"_"+(0,uuid_1.v4)(),xp=this.mediaStream.clone(),Sp=this.streamManager.videos[0].video.cloneNode(!1),Sp.id=VirtualBackground.VirtualBackground.SOURCE_VIDEO_PREFIX+vp,Sp.srcObject=xp,Sp.muted=!0,this.virtualBackgroundSourceElements={videoClone:Sp,mediaStreamClone:xp},VirtualBackground.VirtualBackground.hideHtmlElement(Sp,!1),VirtualBackground.VirtualBackground.appendHtmlElementToHiddenContainer(Sp,vp),[4,Sp.play()];case 1:switch(_p.sent(),yp=new VirtualBackground.VirtualBackground({id:vp,openviduServerUrl:new URL(dp.httpUri),openviduToken:cp,inputVideo:Sp,inputResolution:"160x96",outputFramerate:24}),bp=void 0,Ep=np,Ep){case"VB:blur":return[3,2];case"VB:image":return[3,4]}return[3,6];case 2:return[4,yp.backgroundBlur(rp)];case 3:return bp=_p.sent(),[3,7];case 4:return[4,yp.backgroundImage(rp)];case 5:return bp=_p.sent(),[3,7];case 6:throw new Error("Unknown Virtual Background filter: "+np);case 7:return this.virtualBackgroundSinkElements={VB:yp,video:bp},Sp.style.display="none",this.streamManager.remote?this.streamManager.replaceTrackInMediaStream(this.virtualBackgroundSinkElements.video.srcObject.getVideoTracks()[0],!1):this.streamManager.replaceTrackAux(this.virtualBackgroundSinkElements.video.srcObject.getVideoTracks()[0],!1),up(void 0,!1),[3,9];case 8:return wp=_p.sent(),wp.name===OpenViduError_1$1.OpenViduErrorName.VIRTUAL_BACKGROUND_ERROR?up(new OpenViduError_1$1.OpenViduError(OpenViduError_1$1.OpenViduErrorName.VIRTUAL_BACKGROUND_ERROR,wp.message),!1):up(wp,!1),[3,9];case 9:return[2]}})})},typeof VirtualBackground>"u"?(pp=document.createElement("script"),pp.type="text/javascript",pp.src=dp.httpUri+"/openvidu/virtual-background/openvidu-virtual-background.js?token="+cp,pp.onload=function(){return __awaiter$1(mp,void 0,void 0,function(){var vp;return __generator$1(this,function(xp){switch(xp.label){case 0:return xp.trys.push([0,2,,3]),[4,fp()];case 1:return xp.sent(),sp(new Filter_1.Filter(np,rp)),[3,3];case 2:return vp=xp.sent(),lp(vp),[3,3];case 3:return[2]}})})},document.body.appendChild(pp)):fp().then(function(){return sp(new Filter_1.Filter(np,rp))}).catch(function(vp){return lp(vp)})}else{if(!this.session.sessionConnected())return[2,lp(this.session.notConnectedError())];logger$3.info("Applying server filter to stream "+this.streamId),rp=rp??{},hp=rp,typeof hp!="string"&&(hp=JSON.stringify(hp)),this.session.openvidu.sendRequest("applyFilter",{streamId:this.streamId,type:np,options:hp},function(vp,xp){up(vp,!0)})}return[2]})})})},_d.prototype.removeFilter=function(){return __awaiter$1(this,void 0,void 0,function(){return __generator$1(this,function(np){switch(np.label){case 0:return[4,this.removeFilterAux(!1)];case 1:return[2,np.sent()]}})})},_d.prototype.getRTCPeerConnection=function(){return this.webRtcPeer.pc},_d.prototype.getMediaStream=function(){return this.mediaStream},_d.prototype.removeFilterAux=function(np){var rp=this;return new Promise(function(ap,sp){return __awaiter$1(rp,void 0,void 0,function(){var lp,up,cp,dp=this,fp;return __generator$1(this,function(pp){switch(pp.label){case 0:if(lp=function(hp,mp){if(hp)return delete dp.filter,logger$3.error("Error removing filter for Stream "+dp.streamId,hp),hp.code===401?sp(new OpenViduError_1$1.OpenViduError(OpenViduError_1$1.OpenViduErrorName.OPENVIDU_PERMISSION_DENIED,"You don't have permissions to remove a filter")):sp(hp);logger$3.info("Filter successfully removed from Stream "+dp.streamId);var gp=dp.filter;return delete dp.filter,mp&&(dp.session.emitEvent("streamPropertyChanged",[new StreamPropertyChangedEvent_1$1.StreamPropertyChangedEvent(dp.session,dp,"filter",dp.filter,gp,"applyFilter")]),dp.streamManager.emitEvent("streamPropertyChanged",[new StreamPropertyChangedEvent_1$1.StreamPropertyChangedEvent(dp.streamManager,dp,"filter",dp.filter,gp,"applyFilter")])),ap()},!this.filter)return[3,11];if(!(!((fp=this.filter)===null||fp===void 0)&&fp.type.startsWith("VB:")))return[3,9];pp.label=1;case 1:return pp.trys.push([1,7,,8]),up=this.virtualBackgroundSourceElements.mediaStreamClone,np?[3,5]:this.streamManager.remote?(this.streamManager.replaceTrackInMediaStream(up.getVideoTracks()[0],!1),[3,4]):[3,2];case 2:return[4,this.streamManager.replaceTrackAux(up.getVideoTracks()[0],!1)];case 3:pp.sent(),pp.label=4;case 4:return[3,6];case 5:up.getTracks().forEach(function(hp){return hp.stop()}),pp.label=6;case 6:return this.virtualBackgroundSinkElements.VB.cleanUp(),delete this.virtualBackgroundSinkElements,delete this.virtualBackgroundSourceElements,[2,lp(void 0,!1)];case 7:return cp=pp.sent(),[2,lp(cp,!1)];case 8:return[3,10];case 9:if(!this.session.sessionConnected())return[2,sp(this.session.notConnectedError())];logger$3.info("Removing filter of stream "+this.streamId),this.session.openvidu.sendRequest("removeFilter",{streamId:this.streamId},function(hp,mp){return lp(hp,!0)}),pp.label=10;case 10:return[3,12];case 11:return[2,sp(new OpenViduError_1$1.OpenViduError(OpenViduError_1$1.OpenViduErrorName.GENERIC_ERROR,"Stream "+this.streamId+" has no filter applied"))];case 12:return[2]}})})})},_d.prototype.setMediaStream=function(np){this.mediaStream=np},_d.prototype.updateMediaStreamInVideos=function(){this.ee.emitEvent("mediastream-updated",[])},_d.prototype.getWebRtcPeer=function(){return this.webRtcPeer},_d.prototype.subscribeToMyRemote=function(np){this.isSubscribeToRemote=np},_d.prototype.setOutboundStreamOptions=function(np){this.outboundStreamOpts=np},_d.prototype.subscribe=function(){var np=this;return new Promise(function(rp,ap){np.initWebRtcPeerReceive(!1).then(function(){return rp()}).catch(function(sp){return ap(sp)})})},_d.prototype.publish=function(){var np=this;return new Promise(function(rp,ap){np.isLocalStreamReadyToPublish?np.initWebRtcPeerSend(!1).then(function(){return rp()}).catch(function(sp){return ap(sp)}):np.ee.once("stream-ready-to-publish",function(){np.publish().then(function(){return rp()}).catch(function(sp){return ap(sp)})})})},_d.prototype.disposeWebRtcPeer=function(){var np;this.webRtcPeer&&(this.webRtcPeer.dispose(),np=this.webRtcPeer.getId()),this.stopWebRtcStats(),logger$3.info((this.outboundStreamOpts?"Outbound ":"Inbound ")+"RTCPeerConnection with id ["+np+"] from 'Stream' with id ["+this.streamId+"] is now closed")},_d.prototype.disposeMediaStream=function(){return __awaiter$1(this,void 0,void 0,function(){var np;return __generator$1(this,function(rp){switch(rp.label){case 0:if(!(this.filter&&this.filter.type.startsWith("VB:")))return[3,4];rp.label=1;case 1:return rp.trys.push([1,3,,4]),[4,this.removeFilterAux(!0)];case 2:return rp.sent(),console.debug("Success removing Virtual Background filter for stream ".concat(this.streamId)),[3,4];case 3:return np=rp.sent(),console.error("Error removing Virtual Background filter for stream ".concat(this.streamId),np),[3,4];case 4:return this.mediaStream&&(this.mediaStream.getAudioTracks().forEach(function(ap){ap.stop()}),this.mediaStream.getVideoTracks().forEach(function(ap){ap.stop()}),delete this.mediaStream),this.localMediaStreamWhenSubscribedToRemote&&(this.localMediaStreamWhenSubscribedToRemote.getAudioTracks().forEach(function(ap){ap.stop()}),this.localMediaStreamWhenSubscribedToRemote.getVideoTracks().forEach(function(ap){ap.stop()}),delete this.localMediaStreamWhenSubscribedToRemote),this.speechEvent&&(this.speechEvent.stop&&this.speechEvent.stop(),delete this.speechEvent),logger$3.info((this.outboundStreamOpts?"Local ":"Remote ")+"MediaStream from 'Stream' with id ["+this.streamId+"] is now disposed"),[2]}})})},_d.prototype.displayMyRemote=function(){return this.isSubscribeToRemote},_d.prototype.isSendAudio=function(){return!!this.outboundStreamOpts&&this.outboundStreamOpts.publisherProperties.audioSource!==null&&this.outboundStreamOpts.publisherProperties.audioSource!==!1},_d.prototype.isSendVideo=function(){return!!this.outboundStreamOpts&&this.outboundStreamOpts.publisherProperties.videoSource!==null&&this.outboundStreamOpts.publisherProperties.videoSource!==!1},_d.prototype.isSendScreen=function(){var np=!1;if(typeof MediaStreamTrack<"u"&&this.outboundStreamOpts.publisherProperties.videoSource instanceof MediaStreamTrack){var rp=this.outboundStreamOpts.publisherProperties.videoSource.getSettings();rp.displaySurface&&(np=["monitor","window","browser"].includes(rp.displaySurface))}return!np&&platform$1.isElectron()&&(np=typeof this.outboundStreamOpts.publisherProperties.videoSource=="string"&&this.outboundStreamOpts.publisherProperties.videoSource.startsWith("screen:")),np||(np=this.outboundStreamOpts.publisherProperties.videoSource==="screen"),!!this.outboundStreamOpts&&np},_d.prototype.enableHarkSpeakingEvent=function(){var np=this;this.setHarkListenerIfNotExists(),!this.harkSpeakingEnabled&&this.speechEvent&&(this.harkSpeakingEnabled=!0,this.speechEvent.on("speaking",function(){np.session.emitEvent("publisherStartSpeaking",[new PublisherSpeakingEvent_1.PublisherSpeakingEvent(np.session,"publisherStartSpeaking",np.connection,np.streamId)]),np.streamManager.emitEvent("publisherStartSpeaking",[new PublisherSpeakingEvent_1.PublisherSpeakingEvent(np.streamManager,"publisherStartSpeaking",np.connection,np.streamId)]),np.harkSpeakingEnabledOnce=!1}))},_d.prototype.enableOnceHarkSpeakingEvent=function(){var np=this;this.setHarkListenerIfNotExists(),!this.harkSpeakingEnabledOnce&&this.speechEvent&&(this.harkSpeakingEnabledOnce=!0,this.speechEvent.once("speaking",function(){np.harkSpeakingEnabledOnce&&(np.session.emitEvent("publisherStartSpeaking",[new PublisherSpeakingEvent_1.PublisherSpeakingEvent(np.session,"publisherStartSpeaking",np.connection,np.streamId)]),np.streamManager.emitEvent("publisherStartSpeaking",[new PublisherSpeakingEvent_1.PublisherSpeakingEvent(np.streamManager,"publisherStartSpeaking",np.connection,np.streamId)])),np.disableHarkSpeakingEvent(!0)}))},_d.prototype.disableHarkSpeakingEvent=function(np){if(this.speechEvent){if(this.harkSpeakingEnabledOnce=!1,np){if(this.harkSpeakingEnabled)return}else this.harkSpeakingEnabled=!1;this.harkVolumeChangeEnabled||this.harkVolumeChangeEnabledOnce||this.harkStoppedSpeakingEnabled||this.harkStoppedSpeakingEnabledOnce?this.speechEvent.off("speaking"):(this.speechEvent.stop(),delete this.speechEvent)}},_d.prototype.enableHarkStoppedSpeakingEvent=function(){var np=this;this.setHarkListenerIfNotExists(),!this.harkStoppedSpeakingEnabled&&this.speechEvent&&(this.harkStoppedSpeakingEnabled=!0,this.speechEvent.on("stopped_speaking",function(){np.session.emitEvent("publisherStopSpeaking",[new PublisherSpeakingEvent_1.PublisherSpeakingEvent(np.session,"publisherStopSpeaking",np.connection,np.streamId)]),np.streamManager.emitEvent("publisherStopSpeaking",[new PublisherSpeakingEvent_1.PublisherSpeakingEvent(np.streamManager,"publisherStopSpeaking",np.connection,np.streamId)]),np.harkStoppedSpeakingEnabledOnce=!1}))},_d.prototype.enableOnceHarkStoppedSpeakingEvent=function(){var np=this;this.setHarkListenerIfNotExists(),!this.harkStoppedSpeakingEnabledOnce&&this.speechEvent&&(this.harkStoppedSpeakingEnabledOnce=!0,this.speechEvent.once("stopped_speaking",function(){np.harkStoppedSpeakingEnabledOnce&&(np.session.emitEvent("publisherStopSpeaking",[new PublisherSpeakingEvent_1.PublisherSpeakingEvent(np.session,"publisherStopSpeaking",np.connection,np.streamId)]),np.streamManager.emitEvent("publisherStopSpeaking",[new PublisherSpeakingEvent_1.PublisherSpeakingEvent(np.streamManager,"publisherStopSpeaking",np.connection,np.streamId)])),np.disableHarkStoppedSpeakingEvent(!0)}))},_d.prototype.disableHarkStoppedSpeakingEvent=function(np){if(this.speechEvent){if(this.harkStoppedSpeakingEnabledOnce=!1,np){if(this.harkStoppedSpeakingEnabled)return}else this.harkStoppedSpeakingEnabled=!1;this.harkVolumeChangeEnabled||this.harkVolumeChangeEnabledOnce||this.harkSpeakingEnabled||this.harkSpeakingEnabledOnce?this.speechEvent.off("stopped_speaking"):(this.speechEvent.stop(),delete this.speechEvent)}},_d.prototype.enableHarkVolumeChangeEvent=function(np){var rp=this;this.setHarkListenerIfNotExists()?(!this.harkVolumeChangeEnabled||np)&&(this.harkVolumeChangeEnabled=!0,this.speechEvent.on("volume_change",function(ap){var sp=rp.speechEvent.oldVolumeValue,lp={newValue:ap,oldValue:sp};rp.speechEvent.oldVolumeValue=ap,rp.streamManager.emitEvent("streamAudioVolumeChange",[new StreamManagerEvent_1.StreamManagerEvent(rp.streamManager,"streamAudioVolumeChange",lp)])})):this.harkVolumeChangeEnabled=!0},_d.prototype.enableOnceHarkVolumeChangeEvent=function(np){var rp=this;this.setHarkListenerIfNotExists()?(!this.harkVolumeChangeEnabledOnce||np)&&(this.harkVolumeChangeEnabledOnce=!0,this.speechEvent.once("volume_change",function(ap){var sp=rp.speechEvent.oldVolumeValue,lp={newValue:ap,oldValue:sp};rp.speechEvent.oldVolumeValue=ap,rp.disableHarkVolumeChangeEvent(!0),rp.streamManager.emitEvent("streamAudioVolumeChange",[new StreamManagerEvent_1.StreamManagerEvent(rp.streamManager,"streamAudioVolumeChange",lp)])})):this.harkVolumeChangeEnabledOnce=!0},_d.prototype.disableHarkVolumeChangeEvent=function(np){if(this.speechEvent){if(this.harkVolumeChangeEnabledOnce=!1,np){if(this.harkVolumeChangeEnabled)return}else this.harkVolumeChangeEnabled=!1;this.harkSpeakingEnabled||this.harkSpeakingEnabledOnce||this.harkStoppedSpeakingEnabled||this.harkStoppedSpeakingEnabledOnce?this.speechEvent.off("volume_change"):(this.speechEvent.stop(),delete this.speechEvent)}},_d.prototype.isLocal=function(){return!this.inboundStreamOpts&&!!this.outboundStreamOpts},_d.prototype.getSelectedIceCandidate=function(){var np=this;return new Promise(function(rp,ap){np.webRtcStats.getSelectedIceCandidateInfo().then(function(sp){return rp(sp)}).catch(function(sp){return ap(sp)})})},_d.prototype.getRemoteIceCandidateList=function(){return this.webRtcPeer.remoteCandidatesQueue},_d.prototype.getLocalIceCandidateList=function(){return this.webRtcPeer.localCandidatesQueue},_d.prototype.streamIceConnectionStateBroken=function(){if(!this.getWebRtcPeer()||!this.getRTCPeerConnection())return!1;if(this.session.openvidu.advancedConfiguration.forceMediaReconnectionAfterNetworkDrop)return logger$3.warn('OpenVidu Browser advanced configuration option "forceMediaReconnectionAfterNetworkDrop" is enabled. Stream '.concat(this.streamId," (").concat(this.isLocal()?"Publisher":"Subscriber",") will force a reconnection")),!0;var np=this.getRTCPeerConnection().iceConnectionState;return np!=="connected"&&np!=="completed"},_d.prototype.setHarkListenerIfNotExists=function(){if(this.mediaStream){if(!this.speechEvent){var np=this.harkOptions?this.harkOptions:this.session.openvidu.advancedConfiguration.publisherSpeakingEventsOptions||{};np.interval=typeof np.interval=="number"?np.interval:100,np.threshold=typeof np.threshold=="number"?np.threshold:-50,this.speechEvent=hark(this.mediaStream,np)}return!0}return!1},_d.prototype.setupReconnectionEventEmitter=function(np,rp){return this.reconnectionEventEmitter==null?(this.reconnectionEventEmitter=new EventEmitter$2,!1):(console.warn("Trying to reconnect stream ".concat(this.streamId," (").concat(this.isLocal()?"Publisher":"Subscriber",") but an ongoing reconnection process is active. Waiting for response...")),this.reconnectionEventEmitter.once("success",function(){return np()}),this.reconnectionEventEmitter.once("error",function(ap){return rp(ap)}),!0)},_d.prototype.initWebRtcPeerSend=function(np){var rp=this;return new Promise(function(ap,sp){var lp;if(np){if(rp.setupReconnectionEventEmitter(ap,sp))return}else rp.initHarkEvents();var up=function(){var pp;return np&&((pp=rp.reconnectionEventEmitter)===null||pp===void 0||pp.emitEvent("success"),delete rp.reconnectionEventEmitter),ap()},cp=function(pp){var hp;return np&&((hp=rp.reconnectionEventEmitter)===null||hp===void 0||hp.emitEvent("error",[pp]),delete rp.reconnectionEventEmitter),sp(pp)},dp=function(pp){logger$3.debug("Sending SDP offer to publish as "+rp.streamId,pp);var hp=np?"reconnectStream":"publishVideo",mp;if(np)mp={stream:rp.streamId,sdpString:pp};else{var gp=void 0;rp.isSendVideo()&&(gp=typeof MediaStreamTrack<"u"&&rp.outboundStreamOpts.publisherProperties.videoSource instanceof MediaStreamTrack?TypeOfVideo_1.TypeOfVideo.CUSTOM:rp.isSendScreen()?TypeOfVideo_1.TypeOfVideo.SCREEN:TypeOfVideo_1.TypeOfVideo.CAMERA),mp={doLoopback:rp.displayMyRemote()||!1,hasAudio:rp.isSendAudio(),hasVideo:rp.isSendVideo(),audioActive:rp.audioActive,videoActive:rp.videoActive,typeOfVideo:gp,frameRate:rp.frameRate?rp.frameRate:-1,videoDimensions:JSON.stringify(rp.videoDimensions),filter:rp.outboundStreamOpts.publisherProperties.filter,sdpOffer:pp}}rp.session.openvidu.sendRequest(hp,mp,function(vp,xp){vp?vp.code===401?cp(new OpenViduError_1$1.OpenViduError(OpenViduError_1$1.OpenViduErrorName.OPENVIDU_PERMISSION_DENIED,"You don't have permissions to publish")):cp("Error on publishVideo: "+JSON.stringify(vp)):rp.webRtcPeer.processRemoteAnswer(xp.sdpAnswer).then(function(){rp.streamId=xp.id,rp.creationTime=xp.createdAt,rp.isLocalStreamPublished=!0,rp.publishedOnce=!0,rp.displayMyRemote()&&(rp.localMediaStreamWhenSubscribedToRemote=rp.mediaStream,rp.remotePeerSuccessfullyEstablished(np)),np?rp.ee.emitEvent("stream-reconnected-by-publisher",[]):rp.ee.emitEvent("stream-created-by-publisher",[]),rp.initWebRtcStats(),logger$3.info("'Publisher' ("+rp.streamId+") successfully "+(np?"reconnected":"published")+" to session"),up()}).catch(function(Sp){cp(Sp)})})},fp={mediaConstraints:{audio:rp.hasAudio,video:rp.hasVideo},simulcast:(lp=rp.outboundStreamOpts.publisherProperties.videoSimulcast)!==null&&lp!==void 0?lp:rp.session.openvidu.videoSimulcast,onIceCandidate:rp.connection.sendIceCandidate.bind(rp.connection),onIceConnectionStateException:rp.onIceConnectionStateExceptionHandler.bind(rp),iceServers:rp.getIceServersConf(),mediaStream:rp.mediaStream,mediaServer:rp.session.openvidu.mediaServer,typeOfVideo:rp.typeOfVideo?TypeOfVideo_1.TypeOfVideo[rp.typeOfVideo]:void 0};rp.session.openvidu.mediaServer!=="mediasoup"&&(fp.simulcast=!1),np&&rp.disposeWebRtcPeer(),rp.displayMyRemote()?rp.webRtcPeer=new WebRtcPeer_1.WebRtcPeerSendrecv(fp):rp.webRtcPeer=new WebRtcPeer_1.WebRtcPeerSendonly(fp),rp.webRtcPeer.addIceConnectionStateChangeListener("publisher of "+rp.connection.connectionId),rp.webRtcPeer.createOffer().then(function(pp){rp.webRtcPeer.processLocalOffer(pp).then(function(){dp(pp.sdp)}).catch(function(hp){cp(new Error("(publish) SDP process local offer error: "+JSON.stringify(hp)))})}).catch(function(pp){cp(new Error("(publish) SDP create offer error: "+JSON.stringify(pp)))})})},_d.prototype.finalResolveForSubscription=function(np,rp){var ap;return logger$3.info("'Subscriber' ("+this.streamId+") successfully "+(np?"reconnected":"subscribed")),this.remotePeerSuccessfullyEstablished(np),this.initWebRtcStats(),np&&((ap=this.reconnectionEventEmitter)===null||ap===void 0||ap.emitEvent("success"),delete this.reconnectionEventEmitter),rp()},_d.prototype.finalRejectForSubscription=function(np,rp,ap){var sp;return logger$3.error("Error for 'Subscriber' ("+this.streamId+") while trying to "+(np?"reconnect":"subscribe")+": "+rp.toString()),np&&((sp=this.reconnectionEventEmitter)===null||sp===void 0||sp.emitEvent("error",[rp]),delete this.reconnectionEventEmitter),ap(rp)},_d.prototype.initWebRtcPeerReceive=function(np){var rp=this;return new Promise(function(ap,sp){np&&rp.setupReconnectionEventEmitter(ap,sp)||(rp.session.openvidu.mediaServer==="mediasoup"?rp.initWebRtcPeerReceiveFromServer(np).then(function(){return rp.finalResolveForSubscription(np,ap)}).catch(function(lp){return rp.finalRejectForSubscription(np,lp,sp)}):rp.initWebRtcPeerReceiveFromClient(np).then(function(){return rp.finalResolveForSubscription(np,ap)}).catch(function(lp){return rp.finalRejectForSubscription(np,lp,sp)}))})},_d.prototype.initWebRtcPeerReceiveFromClient=function(np){var rp=this;return new Promise(function(ap,sp){rp.completeWebRtcPeerReceive(np,!1).then(function(lp){rp.webRtcPeer.processRemoteAnswer(lp.sdpAnswer).then(function(){return ap()}).catch(function(up){return sp(up)})}).catch(function(lp){return sp(lp)})})},_d.prototype.initWebRtcPeerReceiveFromServer=function(np){var rp=this;return new Promise(function(ap,sp){rp.session.openvidu.sendRequest("prepareReceiveVideoFrom",{sender:rp.streamId,reconnect:np},function(lp,up){if(lp)return sp(new Error("Error on prepareReceiveVideoFrom: "+JSON.stringify(lp)));rp.completeWebRtcPeerReceive(np,!1,up.sdpOffer).then(function(){return ap()}).catch(function(cp){return sp(cp)})})})},_d.prototype.completeWebRtcPeerReceive=function(np,rp,ap){var sp=this;return new Promise(function(lp,up){logger$3.debug("'Session.subscribe(Stream)' called");var cp=function(fp){logger$3.debug("Sending local SDP ".concat(ap?"answer":"offer"," to subscribe to ").concat(sp.streamId),fp);var pp=np?"reconnectStream":"receiveVideoFrom",hp={};hp[np?"stream":"sender"]=sp.streamId,ap?hp[np?"sdpString":"sdpAnswer"]=fp:hp.sdpOffer=fp,np&&(hp.forciblyReconnect=rp),sp.session.openvidu.sendRequest(pp,hp,function(mp,gp){return mp?up(new Error("Error on "+pp+" : "+JSON.stringify(mp))):lp(gp)})},dp={mediaConstraints:{audio:sp.hasAudio,video:sp.hasVideo},simulcast:!1,onIceCandidate:sp.connection.sendIceCandidate.bind(sp.connection),onIceConnectionStateException:sp.onIceConnectionStateExceptionHandler.bind(sp),iceServers:sp.getIceServersConf(),mediaServer:sp.session.openvidu.mediaServer,typeOfVideo:sp.typeOfVideo?TypeOfVideo_1.TypeOfVideo[sp.typeOfVideo]:void 0};np&&sp.disposeWebRtcPeer(),sp.webRtcPeer=new WebRtcPeer_1.WebRtcPeerRecvonly(dp),sp.webRtcPeer.addIceConnectionStateChangeListener(sp.streamId),ap?sp.webRtcPeer.processRemoteOffer(ap).then(function(){sp.webRtcPeer.createAnswer().then(function(fp){sp.webRtcPeer.processLocalAnswer(fp).then(function(){cp(fp.sdp)}).catch(function(pp){return up(new Error("(subscribe) SDP process local answer error: "+JSON.stringify(pp)))})}).catch(function(fp){return up(new Error("(subscribe) SDP create answer error: "+JSON.stringify(fp)))})}).catch(function(fp){return up(new Error("(subscribe) SDP process remote offer error: "+JSON.stringify(fp)))}):sp.webRtcPeer.createOffer().then(function(fp){sp.webRtcPeer.processLocalOffer(fp).then(function(){cp(fp.sdp)}).catch(function(pp){return up(new Error("(subscribe) SDP process local offer error: "+JSON.stringify(pp)))})}).catch(function(fp){return up(new Error("(subscribe) SDP create offer error: "+JSON.stringify(fp)))})})},_d.prototype.remotePeerSuccessfullyEstablished=function(np){np&&this.mediaStream!=null&&this.disposeMediaStream(),this.mediaStream=new MediaStream;for(var rp,ap=0,sp=this.webRtcPeer.pc.getReceivers();ap<sp.length;ap++)rp=sp[ap],rp.track&&this.mediaStream.addTrack(rp.track);if(logger$3.debug("Peer remote stream",this.mediaStream),this.mediaStream){if(this.streamManager instanceof Subscriber_1.Subscriber){if(this.mediaStream.getAudioTracks()[0]){var lp=np?this.audioActive:!!this.streamManager.properties.subscribeToAudio;this.mediaStream.getAudioTracks()[0].enabled=lp}if(this.mediaStream.getVideoTracks()[0]){var lp=np?this.videoActive:!!this.videoActive&&!!this.streamManager.properties.subscribeToVideo;this.mediaStream.getVideoTracks()[0].enabled=lp}}this.updateMediaStreamInVideos(),this.initHarkEvents()}},_d.prototype.initHarkEvents=function(){this.mediaStream.getAudioTracks()[0]&&(this.session.anySpeechEventListenerEnabled("publisherStartSpeaking",!0,this.streamManager)&&this.enableOnceHarkSpeakingEvent(),this.session.anySpeechEventListenerEnabled("publisherStartSpeaking",!1,this.streamManager)&&this.enableHarkSpeakingEvent(),this.session.anySpeechEventListenerEnabled("publisherStopSpeaking",!0,this.streamManager)&&this.enableOnceHarkStoppedSpeakingEvent(),this.session.anySpeechEventListenerEnabled("publisherStopSpeaking",!1,this.streamManager)&&this.enableHarkStoppedSpeakingEvent(),this.harkVolumeChangeEnabledOnce&&this.enableOnceHarkVolumeChangeEvent(!0),this.harkVolumeChangeEnabled&&this.enableHarkVolumeChangeEvent(!0))},_d.prototype.onIceConnectionStateExceptionHandler=function(np,rp,ap){switch(np){case ExceptionEvent_1$1.ExceptionEventName.ICE_CONNECTION_FAILED:this.onIceConnectionFailed();break;case ExceptionEvent_1$1.ExceptionEventName.ICE_CONNECTION_DISCONNECTED:this.onIceConnectionDisconnected();break}this.session.emitEvent("exception",[new ExceptionEvent_1$1.ExceptionEvent(this.session,np,this,rp,ap)])},_d.prototype.onIceConnectionFailed=function(){logger$3.log("[ICE_CONNECTION_FAILED] Handling ICE_CONNECTION_FAILED event. Reconnecting stream ".concat(this.streamId," (").concat(this.isLocal()?"Publisher":"Subscriber",")")),this.reconnectStreamAndLogResultingIceConnectionState(ExceptionEvent_1$1.ExceptionEventName.ICE_CONNECTION_FAILED)},_d.prototype.onIceConnectionDisconnected=function(){var np=this;logger$3.log("[ICE_CONNECTION_DISCONNECTED] Handling ICE_CONNECTION_DISCONNECTED event. Waiting for ICE to be restored and reconnect stream ".concat(this.streamId," (").concat(this.isLocal()?"Publisher":"Subscriber",") if not possible"));var rp=this.session.openvidu.advancedConfiguration.iceConnectionDisconnectedExceptionTimeout||4e3;this.awaitWebRtcPeerConnectionState(rp).then(function(ap){switch(ap){case"failed":logger$3.warn("[ICE_CONNECTION_DISCONNECTED] ICE connection of stream ".concat(np.streamId," (").concat(np.isLocal()?"Publisher":"Subscriber",") is now failed after ICE_CONNECTION_DISCONNECTED"));break;case"connected":case"completed":logger$3.log("[ICE_CONNECTION_DISCONNECTED] ICE connection of stream ".concat(np.streamId," (").concat(np.isLocal()?"Publisher":"Subscriber",") automatically restored after ICE_CONNECTION_DISCONNECTED. Current ICE connection state: ").concat(ap));break;case"closed":case"checking":case"new":case"disconnected":logger$3.warn("[ICE_CONNECTION_DISCONNECTED] ICE connection of stream ".concat(np.streamId," (").concat(np.isLocal()?"Publisher":"Subscriber",") couldn't be restored after ICE_CONNECTION_DISCONNECTED event. Current ICE connection state after ").concat(rp," ms: ").concat(ap)),np.reconnectStreamAndLogResultingIceConnectionState(ExceptionEvent_1$1.ExceptionEventName.ICE_CONNECTION_DISCONNECTED);break}})},_d.prototype.reconnectStreamAndLogResultingIceConnectionState=function(np){return __awaiter$1(this,void 0,void 0,function(){var rp,ap;return __generator$1(this,function(sp){switch(sp.label){case 0:return sp.trys.push([0,2,,3]),[4,this.reconnectStreamAndReturnIceConnectionState(np)];case 1:switch(rp=sp.sent(),rp){case"connected":case"completed":logger$3.log("[".concat(np,"] Stream ").concat(this.streamId," (").concat(this.isLocal()?"Publisher":"Subscriber",") successfully reconnected after ").concat(np,". Current ICE connection state: ").concat(rp));break;default:logger$3.error("[".concat(np,"] Stream ").concat(this.streamId," (").concat(this.isLocal()?"Publisher":"Subscriber",") failed to reconnect after ").concat(np,". Current ICE connection state: ").concat(rp));break}return[3,3];case 2:return ap=sp.sent(),logger$3.error("[".concat(np,"] Error reconnecting stream ").concat(this.streamId," (").concat(this.isLocal()?"Publisher":"Subscriber",") after ").concat(np,": ").concat(ap)),[3,3];case 3:return[2]}})})},_d.prototype.reconnectStreamAndReturnIceConnectionState=function(np){return __awaiter$1(this,void 0,void 0,function(){var rp,ap;return __generator$1(this,function(sp){switch(sp.label){case 0:logger$3.log("[".concat(np,"] Reconnecting stream ").concat(this.streamId," (").concat(this.isLocal()?"Publisher":"Subscriber",") after event ").concat(np)),sp.label=1;case 1:return sp.trys.push([1,3,,4]),[4,this.reconnectStream(np)];case 2:return sp.sent(),rp=this.session.openvidu.advancedConfiguration.iceConnectionDisconnectedExceptionTimeout||4e3,[2,this.awaitWebRtcPeerConnectionState(rp)];case 3:return ap=sp.sent(),logger$3.warn("[".concat(np,"] Error reconnecting stream ").concat(this.streamId," (").concat(this.isLocal()?"Publisher":"Subscriber","). Reason: ").concat(ap)),[2,this.awaitWebRtcPeerConnectionState(1)];case 4:return[2]}})})},_d.prototype.awaitWebRtcPeerConnectionState=function(np){return __awaiter$1(this,void 0,void 0,function(){var rp,ap,sp,lp;return __generator$1(this,function(up){switch(up.label){case 0:rp=this.getRTCPeerConnection().iceConnectionState,ap=150,sp=Math.ceil(np/ap),lp=0,up.label=1;case 1:return lp<sp?(rp=this.getRTCPeerConnection().iceConnectionState,rp==="connected"||rp==="completed"?[3,4]:[4,new Promise(function(cp){return setTimeout(cp,ap)})]):[3,4];case 2:up.sent(),up.label=3;case 3:return lp++,[3,1];case 4:return[2,rp]}})})},_d.prototype.reconnectStream=function(np){return __awaiter$1(this,void 0,void 0,function(){var rp,ap;return __generator$1(this,function(sp){switch(sp.label){case 0:return[4,this.isWebsocketConnected(np,3e3)];case 1:if(rp=sp.sent(),rp)return logger$3.log("[".concat(np,"] Trying to reconnect stream ").concat(this.streamId," (").concat(this.isLocal()?"Publisher":"Subscriber",") and the websocket is opened")),this.isLocal()?[2,this.initWebRtcPeerSend(!0)]:[2,this.initWebRtcPeerReceive(!0)];throw ap="[".concat(np,"] Trying to reconnect stream ").concat(this.streamId," (").concat(this.isLocal()?"Publisher":"Subscriber",") but the websocket wasn't opened"),logger$3.error(ap),Error(ap)}})})},_d.prototype.isWebsocketConnected=function(np,rp){var ap=this;return new Promise(function(sp,lp){var up=ap.session.openvidu.getWsReadyState();if(up===1){var cp=setTimeout(function(){return console.warn("[".concat(np,"] Websocket timeout of ").concat(rp,"ms")),sp(!1)},rp);ap.session.openvidu.sendRequest("echo",{},function(dp,fp){return clearTimeout(cp),dp?(console.warn("[".concat(np,"] Websocket 'echo' returned error: ").concat(dp)),sp(!1)):sp(!0)})}else return console.warn("[".concat(np,"] Websocket readyState is ").concat(up)),sp(!1)})},_d.prototype.initWebRtcStats=function(){this.webRtcStats=new WebRtcStats_1.WebRtcStats(this),this.webRtcStats.initWebRtcStats()},_d.prototype.stopWebRtcStats=function(){this.webRtcStats&&this.webRtcStats.isEnabled()&&this.webRtcStats.stopWebRtcStats()},_d.prototype.getIceServersConf=function(){var np;return this.session.openvidu.advancedConfiguration.iceServers?np=this.session.openvidu.advancedConfiguration.iceServers==="freeice"?void 0:this.session.openvidu.advancedConfiguration.iceServers:this.session.openvidu.iceServers?np=this.session.openvidu.iceServers:np=void 0,np},_d.prototype.gatherStatsForPeer=function(){var np=this;return new Promise(function(rp,ap){np.isLocal()?np.getRTCPeerConnection().getSenders().forEach(function(sp){return sp.getStats().then(function(lp){lp.forEach(function(up){if(np.isReportWanted(up)){var cp={};cp.type=up.type,cp.timestamp=up.timestamp,cp.id=up.id,up.type==="outbound-rtp"&&(cp.ssrc=up.ssrc,cp.firCount=up.firCount,cp.pliCount=up.pliCount,cp.nackCount=up.nackCount,cp.qpSum=up.qpSum,up.kind?cp.mediaType=up.kind:up.mediaType?cp.mediaType=up.mediaType:cp.mediaType=up.id.indexOf("VideoStream")!==-1?"video":"audio",cp.mediaType==="video"&&(cp.framesEncoded=up.framesEncoded),cp.packetsSent=up.packetsSent,cp.bytesSent=up.bytesSent),up.type==="candidate-pair"&&up.totalRoundTripTime!==void 0&&(cp.availableOutgoingBitrate=up.availableOutgoingBitrate,cp.rtt=up.currentRoundTripTime,cp.averageRtt=up.totalRoundTripTime/up.responsesReceived),up.type==="remote-inbound-rtp"||up.type,logger$3.log(cp)}})})}):np.getRTCPeerConnection().getReceivers().forEach(function(sp){return sp.getStats().then(function(lp){lp.forEach(function(up){if(np.isReportWanted(up)){var cp={};cp.type=up.type,cp.timestamp=up.timestamp,cp.id=up.id,up.type==="inbound-rtp"&&(cp.ssrc=up.ssrc,cp.firCount=up.firCount,cp.pliCount=up.pliCount,cp.nackCount=up.nackCount,cp.qpSum=up.qpSum,up.kind?cp.mediaType=up.kind:up.mediaType?cp.mediaType=up.mediaType:cp.mediaType=up.id.indexOf("VideoStream")!==-1?"video":"audio",cp.mediaType==="video"&&(cp.framesDecoded=up.framesDecoded),cp.packetsReceived=up.packetsReceived,cp.packetsLost=up.packetsLost,cp.jitter=up.jitter,cp.bytesReceived=up.bytesReceived),up.type==="candidate-pair"&&up.totalRoundTripTime!==void 0&&(cp.availableIncomingBitrate=up.availableIncomingBitrate,cp.rtt=up.currentRoundTripTime,cp.averageRtt=up.totalRoundTripTime/up.responsesReceived),up.type==="remote-inbound-rtp"||up.type,logger$3.log(cp)}})})})})},_d.prototype.isReportWanted=function(np){return np.type==="inbound-rtp"&&!this.isLocal()||np.type==="outbound-rtp"&&this.isLocal()||np.type==="candidate-pair"&&np.nominated&&np.bytesSent>0},_d}();Stream$1.Stream=Stream;Object.defineProperty(Connection$1,"__esModule",{value:!0});Connection$1.Connection=void 0;var Stream_1=Stream$1,OpenViduLogger_1$2=OpenViduLogger$1,ExceptionEvent_1=ExceptionEvent,logger$2=OpenViduLogger_1$2.OpenViduLogger.getInstance(),Connection=function(){function _d(np,rp){this.session=np,this.disposed=!1;var ap="'Connection' created ";rp.role?(this.localOptions=rp,this.connectionId=this.localOptions.id,this.creationTime=this.localOptions.createdAt,this.data=this.localOptions.metadata,this.rpcSessionId=this.localOptions.sessionId,this.role=this.localOptions.role,this.record=this.localOptions.record,ap+="(local)"):(this.remoteOptions=rp,this.connectionId=this.remoteOptions.id,this.creationTime=this.remoteOptions.createdAt,this.remoteOptions.metadata&&(this.data=this.remoteOptions.metadata),this.remoteOptions.streams&&this.initRemoteStreams(this.remoteOptions.streams),ap+="(remote) with 'connectionId' ["+this.remoteOptions.id+"]"),logger$2.info(ap)}return _d.prototype.sendIceCandidate=function(np){var rp=this;this.disposed?logger$2.warn("Connection ".concat(this.connectionId," disposed when trying to send an ICE candidate. ICE candidate not sent")):(logger$2.debug((this.stream.outboundStreamOpts?"Local":"Remote")+"candidate for"+this.connectionId,np),this.session.openvidu.sendRequest("onIceCandidate",{endpointName:this.connectionId,candidate:np.candidate,sdpMid:np.sdpMid,sdpMLineIndex:np.sdpMLineIndex},function(ap,sp){ap&&(logger$2.error("Error sending ICE candidate: "+JSON.stringify(ap)),rp.session.emitEvent("exception",[new ExceptionEvent_1.ExceptionEvent(rp.session,ExceptionEvent_1.ExceptionEventName.ICE_CANDIDATE_ERROR,rp.session,"There was an unexpected error on the server-side processing an ICE candidate generated and sent by the client-side",ap)]))}))},_d.prototype.initRemoteStreams=function(np){var rp=this;np.forEach(function(ap){var sp={id:ap.id,createdAt:ap.createdAt,connection:rp,hasAudio:ap.hasAudio,hasVideo:ap.hasVideo,audioActive:ap.audioActive,videoActive:ap.videoActive,typeOfVideo:ap.typeOfVideo,frameRate:ap.frameRate,videoDimensions:ap.videoDimensions?JSON.parse(ap.videoDimensions):void 0,filter:ap.filter?ap.filter:void 0},lp=new Stream_1.Stream(rp.session,sp);rp.addStream(lp)}),logger$2.info("Remote 'Connection' with 'connectionId' ["+this.connectionId+"] is now configured for receiving Streams with options: ",this.stream.inboundStreamOpts)},_d.prototype.addStream=function(np){np.connection=this,this.stream=np},_d.prototype.removeStream=function(){delete this.stream},_d.prototype.dispose=function(){this.disposed=!0,this.removeStream()},_d}();Connection$1.Connection=Connection;var ConnectionEvent$1={},__extends$7=commonjsGlobal&&commonjsGlobal.__extends||function(){var _d=function(np,rp){return _d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ap,sp){ap.__proto__=sp}||function(ap,sp){for(var lp in sp)Object.prototype.hasOwnProperty.call(sp,lp)&&(ap[lp]=sp[lp])},_d(np,rp)};return function(np,rp){if(typeof rp!="function"&&rp!==null)throw new TypeError("Class extends value "+String(rp)+" is not a constructor or null");_d(np,rp);function ap(){this.constructor=np}np.prototype=rp===null?Object.create(rp):(ap.prototype=rp.prototype,new ap)}}();Object.defineProperty(ConnectionEvent$1,"__esModule",{value:!0});ConnectionEvent$1.ConnectionEvent=void 0;var Event_1$7=Event$2,ConnectionEvent=function(_d){__extends$7(np,_d);function np(rp,ap,sp,lp,up){var cp=_d.call(this,rp,ap,sp)||this;return cp.connection=lp,cp.reason=up,cp}return np.prototype.callDefaultBehavior=function(){},np}(Event_1$7.Event);ConnectionEvent$1.ConnectionEvent=ConnectionEvent;var FilterEvent$1={},__extends$6=commonjsGlobal&&commonjsGlobal.__extends||function(){var _d=function(np,rp){return _d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ap,sp){ap.__proto__=sp}||function(ap,sp){for(var lp in sp)Object.prototype.hasOwnProperty.call(sp,lp)&&(ap[lp]=sp[lp])},_d(np,rp)};return function(np,rp){if(typeof rp!="function"&&rp!==null)throw new TypeError("Class extends value "+String(rp)+" is not a constructor or null");_d(np,rp);function ap(){this.constructor=np}np.prototype=rp===null?Object.create(rp):(ap.prototype=rp.prototype,new ap)}}();Object.defineProperty(FilterEvent$1,"__esModule",{value:!0});FilterEvent$1.FilterEvent=void 0;var Event_1$6=Event$2,FilterEvent=function(_d){__extends$6(np,_d);function np(rp,ap,sp){var lp=_d.call(this,!1,rp,ap)||this;return lp.data=sp,lp}return np.prototype.callDefaultBehavior=function(){},np}(Event_1$6.Event);FilterEvent$1.FilterEvent=FilterEvent;var RecordingEvent$1={},__extends$5=commonjsGlobal&&commonjsGlobal.__extends||function(){var _d=function(np,rp){return _d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ap,sp){ap.__proto__=sp}||function(ap,sp){for(var lp in sp)Object.prototype.hasOwnProperty.call(sp,lp)&&(ap[lp]=sp[lp])},_d(np,rp)};return function(np,rp){if(typeof rp!="function"&&rp!==null)throw new TypeError("Class extends value "+String(rp)+" is not a constructor or null");_d(np,rp);function ap(){this.constructor=np}np.prototype=rp===null?Object.create(rp):(ap.prototype=rp.prototype,new ap)}}();Object.defineProperty(RecordingEvent$1,"__esModule",{value:!0});RecordingEvent$1.RecordingEvent=void 0;var Event_1$5=Event$2,RecordingEvent=function(_d){__extends$5(np,_d);function np(rp,ap,sp,lp,up){var cp=_d.call(this,!1,rp,ap)||this;return cp.id=sp,lp!==sp&&(cp.name=lp),cp.reason=up,cp}return np.prototype.callDefaultBehavior=function(){},np}(Event_1$5.Event);RecordingEvent$1.RecordingEvent=RecordingEvent;var SessionDisconnectedEvent$1={},__extends$4=commonjsGlobal&&commonjsGlobal.__extends||function(){var _d=function(np,rp){return _d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ap,sp){ap.__proto__=sp}||function(ap,sp){for(var lp in sp)Object.prototype.hasOwnProperty.call(sp,lp)&&(ap[lp]=sp[lp])},_d(np,rp)};return function(np,rp){if(typeof rp!="function"&&rp!==null)throw new TypeError("Class extends value "+String(rp)+" is not a constructor or null");_d(np,rp);function ap(){this.constructor=np}np.prototype=rp===null?Object.create(rp):(ap.prototype=rp.prototype,new ap)}}();Object.defineProperty(SessionDisconnectedEvent$1,"__esModule",{value:!0});SessionDisconnectedEvent$1.SessionDisconnectedEvent=void 0;var Event_1$4=Event$2,OpenViduLogger_1$1=OpenViduLogger$1,logger$1=OpenViduLogger_1$1.OpenViduLogger.getInstance(),SessionDisconnectedEvent=function(_d){__extends$4(np,_d);function np(rp,ap){var sp=_d.call(this,!0,rp,"sessionDisconnected")||this;return sp.reason=ap,sp}return np.prototype.callDefaultBehavior=function(){logger$1.info("Calling default behavior upon '"+this.type+"' event dispatched by 'Session'");var rp=this.target;rp.remoteConnections.forEach(function(ap){var sp,lp,up,cp,dp,fp,pp,hp,mp=ap.connectionId;if(!((sp=rp.remoteConnections.get(mp))===null||sp===void 0)&&sp.stream){(lp=rp.remoteConnections.get(mp))===null||lp===void 0||lp.stream.disposeWebRtcPeer(),(up=rp.remoteConnections.get(mp))===null||up===void 0||up.stream.disposeMediaStream(),!((cp=rp.remoteConnections.get(mp))===null||cp===void 0)&&cp.stream.streamManager&&((dp=rp.remoteConnections.get(mp))===null||dp===void 0||dp.stream.streamManager.removeAllVideos());var gp=(pp=(fp=rp.remoteConnections.get(mp))===null||fp===void 0?void 0:fp.stream)===null||pp===void 0?void 0:pp.streamId;gp&&rp.remoteStreamsCreated.delete(gp),(hp=rp.remoteConnections.get(mp))===null||hp===void 0||hp.dispose()}rp.remoteConnections.delete(mp)})},np}(Event_1$4.Event);SessionDisconnectedEvent$1.SessionDisconnectedEvent=SessionDisconnectedEvent;var SignalEvent$1={},__extends$3=commonjsGlobal&&commonjsGlobal.__extends||function(){var _d=function(np,rp){return _d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ap,sp){ap.__proto__=sp}||function(ap,sp){for(var lp in sp)Object.prototype.hasOwnProperty.call(sp,lp)&&(ap[lp]=sp[lp])},_d(np,rp)};return function(np,rp){if(typeof rp!="function"&&rp!==null)throw new TypeError("Class extends value "+String(rp)+" is not a constructor or null");_d(np,rp);function ap(){this.constructor=np}np.prototype=rp===null?Object.create(rp):(ap.prototype=rp.prototype,new ap)}}();Object.defineProperty(SignalEvent$1,"__esModule",{value:!0});SignalEvent$1.SignalEvent=void 0;var Event_1$3=Event$2,SignalEvent=function(_d){__extends$3(np,_d);function np(rp,ap,sp,lp){var up=_d.call(this,!1,rp,"signal")||this;return ap&&(up.type="signal:"+ap),up.data=sp,up.from=lp,up}return np.prototype.callDefaultBehavior=function(){},np}(Event_1$3.Event);SignalEvent$1.SignalEvent=SignalEvent;var SpeechToTextEvent$1={},__extends$2=commonjsGlobal&&commonjsGlobal.__extends||function(){var _d=function(np,rp){return _d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ap,sp){ap.__proto__=sp}||function(ap,sp){for(var lp in sp)Object.prototype.hasOwnProperty.call(sp,lp)&&(ap[lp]=sp[lp])},_d(np,rp)};return function(np,rp){if(typeof rp!="function"&&rp!==null)throw new TypeError("Class extends value "+String(rp)+" is not a constructor or null");_d(np,rp);function ap(){this.constructor=np}np.prototype=rp===null?Object.create(rp):(ap.prototype=rp.prototype,new ap)}}();Object.defineProperty(SpeechToTextEvent$1,"__esModule",{value:!0});SpeechToTextEvent$1.SpeechToTextEvent=void 0;var Event_1$2=Event$2,SpeechToTextEvent=function(_d){__extends$2(np,_d);function np(rp,ap,sp,lp,up,cp){var dp=_d.call(this,!1,rp,"speechToTextMessage")||this;return dp.connection=ap,dp.text=sp,dp.reason=lp,dp.raw=up,dp.lang=cp,dp}return np.prototype.callDefaultBehavior=function(){},np}(Event_1$2.Event);SpeechToTextEvent$1.SpeechToTextEvent=SpeechToTextEvent;var StreamEvent={},hasRequiredStreamEvent;function requireStreamEvent(){if(hasRequiredStreamEvent)return StreamEvent;hasRequiredStreamEvent=1;var _d=commonjsGlobal&&commonjsGlobal.__extends||function(){var cp=function(dp,fp){return cp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(pp,hp){pp.__proto__=hp}||function(pp,hp){for(var mp in hp)Object.prototype.hasOwnProperty.call(hp,mp)&&(pp[mp]=hp[mp])},cp(dp,fp)};return function(dp,fp){if(typeof fp!="function"&&fp!==null)throw new TypeError("Class extends value "+String(fp)+" is not a constructor or null");cp(dp,fp);function pp(){this.constructor=dp}dp.prototype=fp===null?Object.create(fp):(pp.prototype=fp.prototype,new pp)}}();Object.defineProperty(StreamEvent,"__esModule",{value:!0}),StreamEvent.StreamEvent=void 0;var np=Event$2,rp=requirePublisher(),ap=requireSession(),sp=OpenViduLogger$1,lp=sp.OpenViduLogger.getInstance(),up=function(cp){_d(dp,cp);function dp(fp,pp,hp,mp,gp){var vp=cp.call(this,fp,pp,hp)||this;return vp.stream=mp,vp.reason=gp,vp}return dp.prototype.callDefaultBehavior=function(){if(this.type==="streamDestroyed"){if(this.target instanceof ap.Session)lp.info("Calling default behavior upon '"+this.type+"' event dispatched by 'Session'"),this.stream.disposeWebRtcPeer();else if(this.target instanceof rp.Publisher){lp.info("Calling default behavior upon '"+this.type+"' event dispatched by 'Publisher'"),clearInterval(this.target.screenShareResizeInterval),this.stream.isLocalStreamReadyToPublish=!1;for(var fp=this.target.openvidu.publishers,pp=0;pp<fp.length;pp++)if(fp[pp]===this.target){fp.splice(pp,1);break}}this.stream.disposeMediaStream(),this.stream.streamManager&&this.stream.streamManager.removeAllVideos(),this.stream.session.remoteStreamsCreated.delete(this.stream.streamId);var hp=this.stream.session.remoteConnections.get(this.stream.connection.connectionId);if(hp&&hp.remoteOptions)for(var mp=hp.remoteOptions.streams,pp=mp.length-1;pp>=0;--pp)mp[pp].id===this.stream.streamId&&mp.splice(pp,1)}},dp}(np.Event);return StreamEvent.StreamEvent=up,StreamEvent}var ConnectionPropertyChangedEvent$1={},__extends$1=commonjsGlobal&&commonjsGlobal.__extends||function(){var _d=function(np,rp){return _d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ap,sp){ap.__proto__=sp}||function(ap,sp){for(var lp in sp)Object.prototype.hasOwnProperty.call(sp,lp)&&(ap[lp]=sp[lp])},_d(np,rp)};return function(np,rp){if(typeof rp!="function"&&rp!==null)throw new TypeError("Class extends value "+String(rp)+" is not a constructor or null");_d(np,rp);function ap(){this.constructor=np}np.prototype=rp===null?Object.create(rp):(ap.prototype=rp.prototype,new ap)}}();Object.defineProperty(ConnectionPropertyChangedEvent$1,"__esModule",{value:!0});ConnectionPropertyChangedEvent$1.ConnectionPropertyChangedEvent=void 0;var Event_1$1=Event$2,ConnectionPropertyChangedEvent=function(_d){__extends$1(np,_d);function np(rp,ap,sp,lp,up){var cp=_d.call(this,!1,rp,"connectionPropertyChanged")||this;return cp.connection=ap,cp.changedProperty=sp,cp.newValue=lp,cp.oldValue=up,cp}return np.prototype.callDefaultBehavior=function(){},np}(Event_1$1.Event);ConnectionPropertyChangedEvent$1.ConnectionPropertyChangedEvent=ConnectionPropertyChangedEvent;var NetworkQualityLevelChangedEvent$1={},__extends=commonjsGlobal&&commonjsGlobal.__extends||function(){var _d=function(np,rp){return _d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ap,sp){ap.__proto__=sp}||function(ap,sp){for(var lp in sp)Object.prototype.hasOwnProperty.call(sp,lp)&&(ap[lp]=sp[lp])},_d(np,rp)};return function(np,rp){if(typeof rp!="function"&&rp!==null)throw new TypeError("Class extends value "+String(rp)+" is not a constructor or null");_d(np,rp);function ap(){this.constructor=np}np.prototype=rp===null?Object.create(rp):(ap.prototype=rp.prototype,new ap)}}();Object.defineProperty(NetworkQualityLevelChangedEvent$1,"__esModule",{value:!0});NetworkQualityLevelChangedEvent$1.NetworkQualityLevelChangedEvent=void 0;var Event_1=Event$2,NetworkQualityLevelChangedEvent=function(_d){__extends(np,_d);function np(rp,ap,sp,lp){var up=_d.call(this,!1,rp,"networkQualityLevelChanged")||this;return up.newValue=ap,up.oldValue=sp,up.connection=lp,up}return np.prototype.callDefaultBehavior=function(){},np}(Event_1.Event);NetworkQualityLevelChangedEvent$1.NetworkQualityLevelChangedEvent=NetworkQualityLevelChangedEvent;var define_process_env_default={};const debug$1=typeof process=="object"&&define_process_env_default&&define_process_env_default.NODE_DEBUG&&/\bsemver\b/i.test(define_process_env_default.NODE_DEBUG)?(..._d)=>console.error("SEMVER",..._d):()=>{};var debug_1=debug$1;const SEMVER_SPEC_VERSION="2.0.0",MAX_LENGTH$1=256,MAX_SAFE_INTEGER$1=Number.MAX_SAFE_INTEGER||9007199254740991,MAX_SAFE_COMPONENT_LENGTH=16;var constants={SEMVER_SPEC_VERSION,MAX_LENGTH:MAX_LENGTH$1,MAX_SAFE_INTEGER:MAX_SAFE_INTEGER$1,MAX_SAFE_COMPONENT_LENGTH},re$1={exports:{}};(function(_d,np){const{MAX_SAFE_COMPONENT_LENGTH:rp}=constants,ap=debug_1;np=_d.exports={};const sp=np.re=[],lp=np.src=[],up=np.t={};let cp=0;const dp=(fp,pp,hp)=>{const mp=cp++;ap(fp,mp,pp),up[fp]=mp,lp[mp]=pp,sp[mp]=new RegExp(pp,hp?"g":void 0)};dp("NUMERICIDENTIFIER","0|[1-9]\\d*"),dp("NUMERICIDENTIFIERLOOSE","[0-9]+"),dp("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),dp("MAINVERSION",`(${lp[up.NUMERICIDENTIFIER]})\\.(${lp[up.NUMERICIDENTIFIER]})\\.(${lp[up.NUMERICIDENTIFIER]})`),dp("MAINVERSIONLOOSE",`(${lp[up.NUMERICIDENTIFIERLOOSE]})\\.(${lp[up.NUMERICIDENTIFIERLOOSE]})\\.(${lp[up.NUMERICIDENTIFIERLOOSE]})`),dp("PRERELEASEIDENTIFIER",`(?:${lp[up.NUMERICIDENTIFIER]}|${lp[up.NONNUMERICIDENTIFIER]})`),dp("PRERELEASEIDENTIFIERLOOSE",`(?:${lp[up.NUMERICIDENTIFIERLOOSE]}|${lp[up.NONNUMERICIDENTIFIER]})`),dp("PRERELEASE",`(?:-(${lp[up.PRERELEASEIDENTIFIER]}(?:\\.${lp[up.PRERELEASEIDENTIFIER]})*))`),dp("PRERELEASELOOSE",`(?:-?(${lp[up.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${lp[up.PRERELEASEIDENTIFIERLOOSE]})*))`),dp("BUILDIDENTIFIER","[0-9A-Za-z-]+"),dp("BUILD",`(?:\\+(${lp[up.BUILDIDENTIFIER]}(?:\\.${lp[up.BUILDIDENTIFIER]})*))`),dp("FULLPLAIN",`v?${lp[up.MAINVERSION]}${lp[up.PRERELEASE]}?${lp[up.BUILD]}?`),dp("FULL",`^${lp[up.FULLPLAIN]}$`),dp("LOOSEPLAIN",`[v=\\s]*${lp[up.MAINVERSIONLOOSE]}${lp[up.PRERELEASELOOSE]}?${lp[up.BUILD]}?`),dp("LOOSE",`^${lp[up.LOOSEPLAIN]}$`),dp("GTLT","((?:<|>)?=?)"),dp("XRANGEIDENTIFIERLOOSE",`${lp[up.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),dp("XRANGEIDENTIFIER",`${lp[up.NUMERICIDENTIFIER]}|x|X|\\*`),dp("XRANGEPLAIN",`[v=\\s]*(${lp[up.XRANGEIDENTIFIER]})(?:\\.(${lp[up.XRANGEIDENTIFIER]})(?:\\.(${lp[up.XRANGEIDENTIFIER]})(?:${lp[up.PRERELEASE]})?${lp[up.BUILD]}?)?)?`),dp("XRANGEPLAINLOOSE",`[v=\\s]*(${lp[up.XRANGEIDENTIFIERLOOSE]})(?:\\.(${lp[up.XRANGEIDENTIFIERLOOSE]})(?:\\.(${lp[up.XRANGEIDENTIFIERLOOSE]})(?:${lp[up.PRERELEASELOOSE]})?${lp[up.BUILD]}?)?)?`),dp("XRANGE",`^${lp[up.GTLT]}\\s*${lp[up.XRANGEPLAIN]}$`),dp("XRANGELOOSE",`^${lp[up.GTLT]}\\s*${lp[up.XRANGEPLAINLOOSE]}$`),dp("COERCE",`(^|[^\\d])(\\d{1,${rp}})(?:\\.(\\d{1,${rp}}))?(?:\\.(\\d{1,${rp}}))?(?:$|[^\\d])`),dp("COERCERTL",lp[up.COERCE],!0),dp("LONETILDE","(?:~>?)"),dp("TILDETRIM",`(\\s*)${lp[up.LONETILDE]}\\s+`,!0),np.tildeTrimReplace="$1~",dp("TILDE",`^${lp[up.LONETILDE]}${lp[up.XRANGEPLAIN]}$`),dp("TILDELOOSE",`^${lp[up.LONETILDE]}${lp[up.XRANGEPLAINLOOSE]}$`),dp("LONECARET","(?:\\^)"),dp("CARETTRIM",`(\\s*)${lp[up.LONECARET]}\\s+`,!0),np.caretTrimReplace="$1^",dp("CARET",`^${lp[up.LONECARET]}${lp[up.XRANGEPLAIN]}$`),dp("CARETLOOSE",`^${lp[up.LONECARET]}${lp[up.XRANGEPLAINLOOSE]}$`),dp("COMPARATORLOOSE",`^${lp[up.GTLT]}\\s*(${lp[up.LOOSEPLAIN]})$|^$`),dp("COMPARATOR",`^${lp[up.GTLT]}\\s*(${lp[up.FULLPLAIN]})$|^$`),dp("COMPARATORTRIM",`(\\s*)${lp[up.GTLT]}\\s*(${lp[up.LOOSEPLAIN]}|${lp[up.XRANGEPLAIN]})`,!0),np.comparatorTrimReplace="$1$2$3",dp("HYPHENRANGE",`^\\s*(${lp[up.XRANGEPLAIN]})\\s+-\\s+(${lp[up.XRANGEPLAIN]})\\s*$`),dp("HYPHENRANGELOOSE",`^\\s*(${lp[up.XRANGEPLAINLOOSE]})\\s+-\\s+(${lp[up.XRANGEPLAINLOOSE]})\\s*$`),dp("STAR","(<|>)?=?\\s*\\*"),dp("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),dp("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(re$1,re$1.exports);var reExports=re$1.exports;const opts=["includePrerelease","loose","rtl"],parseOptions$1=_d=>_d?typeof _d!="object"?{loose:!0}:opts.filter(np=>_d[np]).reduce((np,rp)=>(np[rp]=!0,np),{}):{};var parseOptions_1=parseOptions$1;const numeric=/^[0-9]+$/,compareIdentifiers$1=(_d,np)=>{const rp=numeric.test(_d),ap=numeric.test(np);return rp&&ap&&(_d=+_d,np=+np),_d===np?0:rp&&!ap?-1:ap&&!rp?1:_d<np?-1:1},rcompareIdentifiers=(_d,np)=>compareIdentifiers$1(np,_d);var identifiers={compareIdentifiers:compareIdentifiers$1,rcompareIdentifiers};const debug=debug_1,{MAX_LENGTH,MAX_SAFE_INTEGER}=constants,{re,t}=reExports,parseOptions=parseOptions_1,{compareIdentifiers}=identifiers;let SemVer$2=class Lm{constructor(np,rp){if(rp=parseOptions(rp),np instanceof Lm){if(np.loose===!!rp.loose&&np.includePrerelease===!!rp.includePrerelease)return np;np=np.version}else if(typeof np!="string")throw new TypeError(`Invalid Version: ${np}`);if(np.length>MAX_LENGTH)throw new TypeError(`version is longer than ${MAX_LENGTH} characters`);debug("SemVer",np,rp),this.options=rp,this.loose=!!rp.loose,this.includePrerelease=!!rp.includePrerelease;const ap=np.trim().match(rp.loose?re[t.LOOSE]:re[t.FULL]);if(!ap)throw new TypeError(`Invalid Version: ${np}`);if(this.raw=np,this.major=+ap[1],this.minor=+ap[2],this.patch=+ap[3],this.major>MAX_SAFE_INTEGER||this.major<0)throw new TypeError("Invalid major version");if(this.minor>MAX_SAFE_INTEGER||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>MAX_SAFE_INTEGER||this.patch<0)throw new TypeError("Invalid patch version");ap[4]?this.prerelease=ap[4].split(".").map(sp=>{if(/^[0-9]+$/.test(sp)){const lp=+sp;if(lp>=0&&lp<MAX_SAFE_INTEGER)return lp}return sp}):this.prerelease=[],this.build=ap[5]?ap[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(np){if(debug("SemVer.compare",this.version,this.options,np),!(np instanceof Lm)){if(typeof np=="string"&&np===this.version)return 0;np=new Lm(np,this.options)}return np.version===this.version?0:this.compareMain(np)||this.comparePre(np)}compareMain(np){return np instanceof Lm||(np=new Lm(np,this.options)),compareIdentifiers(this.major,np.major)||compareIdentifiers(this.minor,np.minor)||compareIdentifiers(this.patch,np.patch)}comparePre(np){if(np instanceof Lm||(np=new Lm(np,this.options)),this.prerelease.length&&!np.prerelease.length)return-1;if(!this.prerelease.length&&np.prerelease.length)return 1;if(!this.prerelease.length&&!np.prerelease.length)return 0;let rp=0;do{const ap=this.prerelease[rp],sp=np.prerelease[rp];if(debug("prerelease compare",rp,ap,sp),ap===void 0&&sp===void 0)return 0;if(sp===void 0)return 1;if(ap===void 0)return-1;if(ap===sp)continue;return compareIdentifiers(ap,sp)}while(++rp)}compareBuild(np){np instanceof Lm||(np=new Lm(np,this.options));let rp=0;do{const ap=this.build[rp],sp=np.build[rp];if(debug("prerelease compare",rp,ap,sp),ap===void 0&&sp===void 0)return 0;if(sp===void 0)return 1;if(ap===void 0)return-1;if(ap===sp)continue;return compareIdentifiers(ap,sp)}while(++rp)}inc(np,rp){switch(np){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",rp);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",rp);break;case"prepatch":this.prerelease.length=0,this.inc("patch",rp),this.inc("pre",rp);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",rp),this.inc("pre",rp);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{let ap=this.prerelease.length;for(;--ap>=0;)typeof this.prerelease[ap]=="number"&&(this.prerelease[ap]++,ap=-2);ap===-1&&this.prerelease.push(0)}rp&&(compareIdentifiers(this.prerelease[0],rp)===0?isNaN(this.prerelease[1])&&(this.prerelease=[rp,0]):this.prerelease=[rp,0]);break;default:throw new Error(`invalid increment argument: ${np}`)}return this.format(),this.raw=this.version,this}};var semver=SemVer$2;const SemVer$1=semver,major=(_d,np)=>new SemVer$1(_d,np).major;var major_1=major;const SemVer=semver,minor=(_d,np)=>new SemVer(_d,np).minor;var minor_1=minor,hasRequiredSession;function requireSession(){if(hasRequiredSession)return Session;hasRequiredSession=1;var _d=commonjsGlobal&&commonjsGlobal.__extends||function(){var jp=function(Mp,Ap){return jp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Dp,Fp){Dp.__proto__=Fp}||function(Dp,Fp){for(var Ip in Fp)Object.prototype.hasOwnProperty.call(Fp,Ip)&&(Dp[Ip]=Fp[Ip])},jp(Mp,Ap)};return function(Mp,Ap){if(typeof Ap!="function"&&Ap!==null)throw new TypeError("Class extends value "+String(Ap)+" is not a constructor or null");jp(Mp,Ap);function Dp(){this.constructor=Mp}Mp.prototype=Ap===null?Object.create(Ap):(Dp.prototype=Ap.prototype,new Dp)}}(),np=commonjsGlobal&&commonjsGlobal.__awaiter||function(jp,Mp,Ap,Dp){function Fp(Ip){return Ip instanceof Ap?Ip:new Ap(function(kp){kp(Ip)})}return new(Ap||(Ap=Promise))(function(Ip,kp){function Tp(Vp){try{Lp(Dp.next(Vp))}catch(zp){kp(zp)}}function Np(Vp){try{Lp(Dp.throw(Vp))}catch(zp){kp(zp)}}function Lp(Vp){Vp.done?Ip(Vp.value):Fp(Vp.value).then(Tp,Np)}Lp((Dp=Dp.apply(jp,Mp||[])).next())})},rp=commonjsGlobal&&commonjsGlobal.__generator||function(jp,Mp){var Ap={label:0,sent:function(){if(Ip[0]&1)throw Ip[1];return Ip[1]},trys:[],ops:[]},Dp,Fp,Ip,kp;return kp={next:Tp(0),throw:Tp(1),return:Tp(2)},typeof Symbol=="function"&&(kp[Symbol.iterator]=function(){return this}),kp;function Tp(Lp){return function(Vp){return Np([Lp,Vp])}}function Np(Lp){if(Dp)throw new TypeError("Generator is already executing.");for(;kp&&(kp=0,Lp[0]&&(Ap=0)),Ap;)try{if(Dp=1,Fp&&(Ip=Lp[0]&2?Fp.return:Lp[0]?Fp.throw||((Ip=Fp.return)&&Ip.call(Fp),0):Fp.next)&&!(Ip=Ip.call(Fp,Lp[1])).done)return Ip;switch(Fp=0,Ip&&(Lp=[Lp[0]&2,Ip.value]),Lp[0]){case 0:case 1:Ip=Lp;break;case 4:return Ap.label++,{value:Lp[1],done:!1};case 5:Ap.label++,Fp=Lp[1],Lp=[0];continue;case 7:Lp=Ap.ops.pop(),Ap.trys.pop();continue;default:if(Ip=Ap.trys,!(Ip=Ip.length>0&&Ip[Ip.length-1])&&(Lp[0]===6||Lp[0]===2)){Ap=0;continue}if(Lp[0]===3&&(!Ip||Lp[1]>Ip[0]&&Lp[1]<Ip[3])){Ap.label=Lp[1];break}if(Lp[0]===6&&Ap.label<Ip[1]){Ap.label=Ip[1],Ip=Lp;break}if(Ip&&Ap.label<Ip[2]){Ap.label=Ip[2],Ap.ops.push(Lp);break}Ip[2]&&Ap.ops.pop(),Ap.trys.pop();continue}Lp=Mp.call(jp,Ap)}catch(Vp){Lp=[6,Vp],Fp=0}finally{Dp=Ip=0}if(Lp[0]&5)throw Lp[1];return{value:Lp[0]?Lp[1]:void 0,done:!0}}};Object.defineProperty(Session,"__esModule",{value:!0}),Session.Session=void 0;var ap=Connection$1,sp=Filter$1,lp=Subscriber$1,up=EventDispatcher$1,cp=ConnectionEvent$1,dp=FilterEvent$1,fp=RecordingEvent$1,pp=SessionDisconnectedEvent$1,hp=SignalEvent$1,mp=SpeechToTextEvent$1,gp=requireStreamEvent(),vp=StreamPropertyChangedEvent$1,xp=ConnectionPropertyChangedEvent$1,Sp=NetworkQualityLevelChangedEvent$1,yp=OpenViduError,bp=VideoInsertMode,Ep=OpenViduLogger$1,wp=Platform,_p=major_1,Cp=minor_1,$p=ExceptionEvent,Rp=Ep.OpenViduLogger.getInstance(),Pp,Op=function(jp){_d(Mp,jp);function Mp(Ap){var Dp=jp.call(this)||this;return Dp.streamManagers=[],Dp.remoteStreamsCreated=new Map,Dp.remoteConnections=new Map,Pp=wp.PlatformUtils.getInstance(),Dp.openvidu=Ap,Dp}return Mp.prototype.connect=function(Ap,Dp){var Fp=this;return new Promise(function(Ip,kp){if(Fp.processToken(Ap),Fp.openvidu.checkSystemRequirements())Fp.options={sessionId:Fp.sessionId,participantId:Ap,metadata:Dp?Fp.stringClientMetadata(Dp):""},Fp.connectAux(Ap).then(function(){return Ip()}).catch(function(Tp){return kp(Tp)});else return kp(new yp.OpenViduError(yp.OpenViduErrorName.BROWSER_NOT_SUPPORTED,"Browser "+Pp.getName()+" (version "+Pp.getVersion()+") for "+Pp.getFamily()+" is not supported in OpenVidu"))})},Mp.prototype.disconnect=function(){this.leave(!1,"disconnect")},Mp.prototype.subscribe=function(Ap,Dp,Fp,Ip){var kp={};Fp&&typeof Fp!="function"?kp={insertMode:typeof Fp.insertMode<"u"?typeof Fp.insertMode=="string"?bp.VideoInsertMode[Fp.insertMode]:kp.insertMode:bp.VideoInsertMode.APPEND,subscribeToAudio:typeof Fp.subscribeToAudio<"u"?Fp.subscribeToAudio:!0,subscribeToVideo:typeof Fp.subscribeToVideo<"u"?Fp.subscribeToVideo:!0}:kp={insertMode:bp.VideoInsertMode.APPEND,subscribeToAudio:!0,subscribeToVideo:!0};var Tp=void 0;if(Fp&&typeof Fp=="function"?Tp=Fp:Ip&&(Tp=Ip),!this.sessionConnected())throw Tp!==void 0&&Tp(this.notConnectedError()),this.notConnectedError();Rp.info("Subscribing to "+Ap.connection.connectionId),Ap.subscribe().then(function(){Rp.info("Subscribed correctly to "+Ap.connection.connectionId),Tp!==void 0&&Tp(void 0)}).catch(function(Lp){Tp!==void 0&&Tp(Lp)});var Np=new lp.Subscriber(Ap,Dp,kp);return Np.targetElement&&Ap.streamManager.createVideoElement(Np.targetElement,kp.insertMode),Np},Mp.prototype.subscribeAsync=function(Ap,Dp,Fp){var Ip=this;return new Promise(function(kp,Tp){if(!Ip.sessionConnected())return Tp(Ip.notConnectedError());var Np,Lp=function(Vp){return Vp?Tp(Vp):kp(Np)};Fp?Np=Ip.subscribe(Ap,Dp,Fp,Lp):Np=Ip.subscribe(Ap,Dp,Lp)})},Mp.prototype.unsubscribe=function(Ap){var Dp=this;return new Promise(function(Fp,Ip){if(Dp.sessionConnected()){var kp=Ap.stream.connection.connectionId;Rp.info("Unsubscribing from "+kp),Dp.openvidu.sendRequest("unsubscribeFromVideo",{sender:Ap.stream.connection.connectionId},function(Tp,Np){return Tp?(Rp.error("Error unsubscribing from "+kp),Ip(Tp)):(Rp.info("Unsubscribed correctly from "+kp),Ap.stream.streamManager.removeAllVideos(),Ap.stream.disposeWebRtcPeer(),Ap.stream.disposeMediaStream(),Fp())})}else return Ip(Dp.notConnectedError())})},Mp.prototype.publish=function(Ap){var Dp=this;return new Promise(function(Fp,Ip){if(!Dp.sessionConnected())return Ip(Dp.notConnectedError());Ap.session=Dp,Ap.stream.session=Dp,Ap.stream.publishedOnce?Ap.initialize().then(function(){Dp.connection.addStream(Ap.stream),Ap.reestablishStreamPlayingEvent(),Ap.stream.publish().then(function(){return Dp.sendVideoData(Ap,8,!0,5),Fp()}).catch(function(kp){return Ip(kp)})}).catch(function(kp){return Ip(kp)}):(Dp.connection.addStream(Ap.stream),Ap.stream.publish().then(function(){return Dp.sendVideoData(Ap,8,!0,5),Fp()}).catch(function(kp){return Ip(kp)}))})},Mp.prototype.unpublish=function(Ap){var Dp=this;return new Promise(function(Fp,Ip){if(!Dp.sessionConnected())throw Dp.notConnectedError();var kp=Ap.stream;if(kp.connection){if(kp.connection!==Dp.connection)return Ip(new Error("The associated Connection object of this Publisher is not your local Connection.  Only moderators can force unpublish on remote Streams via 'forceUnpublish' method"));Rp.info("Unpublishing local media ("+kp.connection.connectionId+")"),Dp.openvidu.sendRequest("unpublishVideo",function(Tp,Np){if(Tp)return Ip(Tp);Rp.info("Media unpublished correctly"),kp.disposeWebRtcPeer(),kp.connection.stream==kp&&delete kp.connection.stream;var Lp=new gp.StreamEvent(!0,Ap,"streamDestroyed",Ap.stream,"unpublish");return Ap.emitEvent("streamDestroyed",[Lp]),Lp.callDefaultBehavior(),Fp()})}else return Ip(new Error("The associated Connection object of this Publisher is null"))})},Mp.prototype.forceDisconnect=function(Ap){var Dp=this;return new Promise(function(Fp,Ip){if(!Dp.sessionConnected())return Ip(Dp.notConnectedError());Rp.info("Forcing disconnect for connection "+Ap.connectionId),Dp.openvidu.sendRequest("forceDisconnect",{connectionId:Ap.connectionId},function(kp,Tp){return kp?(Rp.error("Error forcing disconnect for Connection "+Ap.connectionId,kp),kp.code===401?Ip(new yp.OpenViduError(yp.OpenViduErrorName.OPENVIDU_PERMISSION_DENIED,"You don't have permissions to force a disconnection")):Ip(kp)):(Rp.info("Forcing disconnect correctly for Connection "+Ap.connectionId),Fp())})})},Mp.prototype.forceUnpublish=function(Ap){var Dp=this;return new Promise(function(Fp,Ip){if(!Dp.sessionConnected())return Ip(Dp.notConnectedError());Rp.info("Forcing unpublish for stream "+Ap.streamId),Dp.openvidu.sendRequest("forceUnpublish",{streamId:Ap.streamId},function(kp,Tp){return kp?(Rp.error("Error forcing unpublish for Stream "+Ap.streamId,kp),kp.code===401?Ip(new yp.OpenViduError(yp.OpenViduErrorName.OPENVIDU_PERMISSION_DENIED,"You don't have permissions to force an unpublishing")):Ip(kp)):(Rp.info("Forcing unpublish correctly for Stream "+Ap.streamId),Fp())})})},Mp.prototype.signal=function(Ap){var Dp=this;return new Promise(function(Fp,Ip){if(!Dp.sessionConnected())return Ip(Dp.notConnectedError());var kp={};if(Ap.to&&Ap.to.length>0){var Tp=[];Ap.to.forEach(function(Lp){Lp.connectionId&&Tp.push(Lp.connectionId)}),kp.to=Tp}else kp.to=[];kp.data=Ap.data?Ap.data:"";var Np=Ap.type?Ap.type:"signal";Np&&Np.substring(0,7)!=="signal:"&&(Np="signal:"+Np),kp.type=Np,Dp.openvidu.sendRequest("sendMessage",{message:JSON.stringify(kp)},function(Lp,Vp){return Lp?Ip(Lp):Fp()})})},Mp.prototype.subscribeToSpeechToText=function(Ap,Dp){var Fp=this;return new Promise(function(Ip,kp){Fp.openvidu.sendRequest("subscribeToSpeechToText",{connectionId:Ap.connection.connectionId,lang:Dp},function(Tp,Np){return Tp?kp(Tp):Ip()})})},Mp.prototype.unsubscribeFromSpeechToText=function(Ap){var Dp=this;return new Promise(function(Fp,Ip){Dp.openvidu.sendRequest("unsubscribeFromSpeechToText",{connectionId:Ap.connection.connectionId},function(kp,Tp){return kp?Ip(kp):Fp()})})},Mp.prototype.on=function(Ap,Dp){var Fp,Ip,kp,Tp;return jp.prototype.onAux.call(this,Ap,"Event '"+Ap+"' triggered by 'Session'",Dp),Ap==="publisherStartSpeaking"&&(this.remoteConnections.forEach(function(Np){var Lp;!((Lp=Np.stream)===null||Lp===void 0)&&Lp.hasAudio&&Np.stream.enableHarkSpeakingEvent()}),!((Ip=(Fp=this.connection)===null||Fp===void 0?void 0:Fp.stream)===null||Ip===void 0)&&Ip.hasAudio&&this.connection.stream.enableHarkSpeakingEvent()),Ap==="publisherStopSpeaking"&&(this.remoteConnections.forEach(function(Np){var Lp;!((Lp=Np.stream)===null||Lp===void 0)&&Lp.hasAudio&&Np.stream.enableHarkStoppedSpeakingEvent()}),!((Tp=(kp=this.connection)===null||kp===void 0?void 0:kp.stream)===null||Tp===void 0)&&Tp.hasAudio&&this.connection.stream.enableHarkStoppedSpeakingEvent()),this},Mp.prototype.once=function(Ap,Dp){var Fp,Ip,kp,Tp;return jp.prototype.onceAux.call(this,Ap,"Event '"+Ap+"' triggered once by 'Session'",Dp),Ap==="publisherStartSpeaking"&&(this.remoteConnections.forEach(function(Np){var Lp;!((Lp=Np.stream)===null||Lp===void 0)&&Lp.hasAudio&&Np.stream.enableOnceHarkSpeakingEvent()}),!((Ip=(Fp=this.connection)===null||Fp===void 0?void 0:Fp.stream)===null||Ip===void 0)&&Ip.hasAudio&&this.connection.stream.enableOnceHarkSpeakingEvent()),Ap==="publisherStopSpeaking"&&(this.remoteConnections.forEach(function(Np){var Lp;!((Lp=Np.stream)===null||Lp===void 0)&&Lp.hasAudio&&Np.stream.enableOnceHarkStoppedSpeakingEvent()}),!((Tp=(kp=this.connection)===null||kp===void 0?void 0:kp.stream)===null||Tp===void 0)&&Tp.hasAudio&&this.connection.stream.enableOnceHarkStoppedSpeakingEvent()),this},Mp.prototype.off=function(Ap,Dp){var Fp=this,Ip,kp,Tp,Np;return jp.prototype.offAux.call(this,Ap,Dp),Ap==="publisherStartSpeaking"&&(this.anySpeechEventListenerEnabled("publisherStartSpeaking",!1)||(this.remoteConnections.forEach(function(Lp){var Vp;!((Vp=Lp.stream)===null||Vp===void 0)&&Vp.streamManager&&(Fp.anySpeechEventListenerEnabled("publisherStartSpeaking",!1,Lp.stream.streamManager)||Lp.stream.disableHarkSpeakingEvent(!1))}),!((kp=(Ip=this.connection)===null||Ip===void 0?void 0:Ip.stream)===null||kp===void 0)&&kp.streamManager&&(this.anySpeechEventListenerEnabled("publisherStartSpeaking",!1,this.connection.stream.streamManager)||this.connection.stream.disableHarkSpeakingEvent(!1)))),Ap==="publisherStopSpeaking"&&(this.anySpeechEventListenerEnabled("publisherStopSpeaking",!1)||(this.remoteConnections.forEach(function(Lp){var Vp;!((Vp=Lp.stream)===null||Vp===void 0)&&Vp.streamManager&&(Fp.anySpeechEventListenerEnabled("publisherStopSpeaking",!1,Lp.stream.streamManager)||Lp.stream.disableHarkStoppedSpeakingEvent(!1))}),!((Np=(Tp=this.connection)===null||Tp===void 0?void 0:Tp.stream)===null||Np===void 0)&&Np.streamManager&&(this.anySpeechEventListenerEnabled("publisherStopSpeaking",!1,this.connection.stream.streamManager)||this.connection.stream.disableHarkStoppedSpeakingEvent(!1)))),this},Mp.prototype.onParticipantJoined=function(Ap){var Dp=this;this.getConnection(Ap.id,"").then(function(Fp){Rp.warn("Connection "+Fp.connectionId+" already exists in connections list")}).catch(function(Fp){var Ip=new ap.Connection(Dp,Ap);Dp.remoteConnections.set(Ap.id,Ip),Dp.ee.emitEvent("connectionCreated",[new cp.ConnectionEvent(!1,Dp,"connectionCreated",Ip,"")])})},Mp.prototype.onParticipantLeft=function(Ap){var Dp=this;this.getRemoteConnection(Ap.connectionId,"onParticipantLeft").then(function(Fp){if(Fp.stream){var Ip=Fp.stream,kp=new gp.StreamEvent(!0,Dp,"streamDestroyed",Ip,Ap.reason);Dp.ee.emitEvent("streamDestroyed",[kp]),kp.callDefaultBehavior(),Dp.remoteStreamsCreated.delete(Ip.streamId)}Fp.dispose(),Dp.remoteConnections.delete(Fp.connectionId),Dp.ee.emitEvent("connectionDestroyed",[new cp.ConnectionEvent(!1,Dp,"connectionDestroyed",Fp,Ap.reason)])}).catch(function(Fp){Rp.error(Fp)})},Mp.prototype.onParticipantPublished=function(Ap){var Dp=this,Fp=function(kp){Dp.remoteConnections.set(kp.connectionId,kp),Dp.remoteStreamsCreated.get(kp.stream.streamId)||Dp.ee.emitEvent("streamCreated",[new gp.StreamEvent(!1,Dp,"streamCreated",kp.stream,"")]),Dp.remoteStreamsCreated.set(kp.stream.streamId,!0)},Ip;this.getRemoteConnection(Ap.id,"onParticipantPublished").then(function(kp){Ip=kp,Ap.metadata=kp.data,Ip.remoteOptions=Ap,Ip.initRemoteStreams(Ap.streams),Fp(Ip)}).catch(function(kp){Ip=new ap.Connection(Dp,Ap),Fp(Ip)})},Mp.prototype.onParticipantUnpublished=function(Ap){var Dp=this;Ap.connectionId===this.connection.connectionId?this.stopPublisherStream(Ap.reason):this.getRemoteConnection(Ap.connectionId,"onParticipantUnpublished").then(function(Fp){var Ip=new gp.StreamEvent(!0,Dp,"streamDestroyed",Fp.stream,Ap.reason);if(Dp.ee.emitEvent("streamDestroyed",[Ip]),Ip.callDefaultBehavior(),Fp.stream!=null){var kp=Fp.stream.streamId;Dp.remoteStreamsCreated.delete(kp),Fp.removeStream()}}).catch(function(Fp){Rp.error(Fp)})},Mp.prototype.onParticipantEvicted=function(Ap){Ap.connectionId===this.connection.connectionId&&this.sessionId&&!this.connection.disposed&&this.leave(!0,Ap.reason)},Mp.prototype.onNewMessage=function(Ap){var Dp=this;Rp.info("New signal: "+JSON.stringify(Ap));var Fp=Ap.type?Ap.type.replace(/^(signal:)/,""):void 0;Ap.from?this.getConnection(Ap.from,"Connection '"+Ap.from+"' unknown when 'onNewMessage'. Existing remote connections: "+JSON.stringify(this.remoteConnections.keys())+". Existing local connection: "+this.connection.connectionId).then(function(Ip){Dp.ee.emitEvent("signal",[new hp.SignalEvent(Dp,Fp,Ap.data,Ip)]),Ap.type&&Ap.type!=="signal"&&Dp.ee.emitEvent(Ap.type,[new hp.SignalEvent(Dp,Fp,Ap.data,Ip)])}).catch(function(Ip){Rp.error(Ip)}):(this.ee.emitEvent("signal",[new hp.SignalEvent(this,Fp,Ap.data,void 0)]),Ap.type&&Ap.type!=="signal"&&this.ee.emitEvent(Ap.type,[new hp.SignalEvent(this,Fp,Ap.data,void 0)]))},Mp.prototype.onStreamPropertyChanged=function(Ap){var Dp=this,Fp=function(Ip){var kp,Tp;if(Ip.stream&&Ip.stream.streamId===Ap.streamId){var Np=Ip.stream,Lp=void 0;switch(Ap.property){case"audioActive":Lp=Np.audioActive,Ap.newValue=Ap.newValue==="true",Np.audioActive=Ap.newValue;break;case"videoActive":Lp=Np.videoActive,Ap.newValue=Ap.newValue==="true",Np.videoActive=Ap.newValue;var Vp=(Tp=(kp=Np==null?void 0:Np.getMediaStream())===null||kp===void 0?void 0:kp.getVideoTracks())===null||Tp===void 0?void 0:Tp[0];Vp&&!Vp.enabled&&Np.videoActive&&(Vp.enabled=!0);break;case"videoTrack":Ap.newValue=JSON.parse(Ap.newValue);break;case"audioTrack":Ap.newValue=JSON.parse(Ap.newValue);break;case"videoDimensions":Lp=Np.videoDimensions,Ap.newValue=JSON.parse(JSON.parse(Ap.newValue)),Np.videoDimensions=Ap.newValue;break;case"filter":Lp=Np.filter,Ap.newValue=Object.keys(Ap.newValue).length>0?Ap.newValue:void 0,Ap.newValue!==void 0?(Np.filter=new sp.Filter(Ap.newValue.type,Ap.newValue.options),Np.filter.stream=Np,Ap.newValue.lastExecMethod&&(Np.filter.lastExecMethod=Ap.newValue.lastExecMethod)):delete Np.filter,Ap.newValue=Np.filter;break}Dp.ee.emitEvent("streamPropertyChanged",[new vp.StreamPropertyChangedEvent(Dp,Np,Ap.property,Ap.newValue,Lp,Ap.reason)]),Np.streamManager&&Np.streamManager.emitEvent("streamPropertyChanged",[new vp.StreamPropertyChangedEvent(Np.streamManager,Np,Ap.property,Ap.newValue,Lp,Ap.reason)])}else Rp.error("No stream with streamId '"+Ap.streamId+"' found for connection '"+Ap.connectionId+"' on 'streamPropertyChanged' event")};Ap.connectionId===this.connection.connectionId?Fp(this.connection):this.getRemoteConnection(Ap.connectionId,"onStreamPropertyChanged").then(function(Ip){Fp(Ip)}).catch(function(Ip){Rp.error(Ip)})},Mp.prototype.onConnectionPropertyChanged=function(Ap){var Dp;switch(Ap.property){case"role":Dp=this.connection.role.slice(),this.connection.role=Ap.newValue,this.connection.localOptions.role=Ap.newValue;break;case"record":Dp=this.connection.record,Ap.newValue=Ap.newValue==="true",this.connection.record=Ap.newValue,this.connection.localOptions.record=Ap.newValue;break}this.ee.emitEvent("connectionPropertyChanged",[new xp.ConnectionPropertyChangedEvent(this,this.connection,Ap.property,Ap.newValue,Dp)])},Mp.prototype.onNetworkQualityLevelChangedChanged=function(Ap){var Dp=this;Ap.connectionId===this.connection.connectionId?this.ee.emitEvent("networkQualityLevelChanged",[new Sp.NetworkQualityLevelChangedEvent(this,Ap.newValue,Ap.oldValue,this.connection)]):this.getConnection(Ap.connectionId,"Connection not found for connectionId "+Ap.connectionId).then(function(Fp){Dp.ee.emitEvent("networkQualityLevelChanged",[new Sp.NetworkQualityLevelChangedEvent(Dp,Ap.newValue,Ap.oldValue,Fp)])}).catch(function(Fp){Rp.error(Fp)})},Mp.prototype.recvIceCandidate=function(Ap){var Dp={candidate:Ap.candidate,sdpMLineIndex:Ap.sdpMLineIndex,sdpMid:Ap.sdpMid},Fp=new RTCIceCandidate(Dp);this.getConnection(Ap.senderConnectionId,"Connection not found for connectionId "+Ap.senderConnectionId+" owning endpoint "+Ap.endpointName+". Ice candidate will be ignored: "+Fp).then(function(Ip){var kp=Ip.stream;kp.getWebRtcPeer().addIceCandidate(Fp).catch(function(Tp){Rp.error("Error adding candidate for "+kp.streamId+" stream of endpoint "+Ap.endpointName+": "+Tp)})}).catch(function(Ip){Rp.error(Ip)})},Mp.prototype.onSessionClosed=function(Ap){Rp.info("Session closed: "+JSON.stringify(Ap));var Dp=Ap.sessionId;Dp!==void 0?this.ee.emitEvent("session-closed",[{session:Dp}]):Rp.warn("Session undefined on session closed",Ap)},Mp.prototype.onLostConnection=function(Ap){Rp.warn("Lost connection in Session "+this.sessionId),this.sessionId&&this.connection&&!this.connection.disposed&&this.leave(!0,Ap)},Mp.prototype.onRecoveredConnection=function(){Rp.info("Recovered connection in Session "+this.sessionId),this.reconnectBrokenStreams(),this.ee.emitEvent("reconnected",[])},Mp.prototype.onMediaError=function(Ap){Rp.error("Media error: "+JSON.stringify(Ap));var Dp=Ap.error;Dp?this.ee.emitEvent("error-media",[{error:Dp}]):Rp.warn("Received undefined media error:",Ap)},Mp.prototype.onRecordingStarted=function(Ap){this.ee.emitEvent("recordingStarted",[new fp.RecordingEvent(this,"recordingStarted",Ap.id,Ap.name)])},Mp.prototype.onRecordingStopped=function(Ap){this.ee.emitEvent("recordingStopped",[new fp.RecordingEvent(this,"recordingStopped",Ap.id,Ap.name,Ap.reason)])},Mp.prototype.onBroadcastStarted=function(){this.ee.emitEvent("broadcastStarted",[])},Mp.prototype.onBroadcastStopped=function(){this.ee.emitEvent("broadcastStopped",[])},Mp.prototype.onFilterEventDispatched=function(Ap){var Dp=this,Fp=Ap.connectionId;this.getConnection(Fp,"No connection found for connectionId "+Fp).then(function(Ip){Rp.info('Filter event of type "'.concat(Ap.eventType,'" dispatched'));var kp=Ip.stream;if(!kp||!kp.filter)return Rp.error('Filter event of type "'.concat(Ap.eventType,'" dispatched for stream ').concat(kp.streamId," but there is no ").concat(kp?"filter":"stream"," defined"));var Tp=kp.filter.handlers.get(Ap.eventType);if(!Tp||typeof Tp!="function"){var Np=Array.from(kp.filter.handlers.keys());return Rp.error('Filter event of type "'.concat(Ap.eventType,'" not handled or not a function! Active filter events: ').concat(Np.join(",")))}else Tp.call(Dp,new dp.FilterEvent(kp.filter,Ap.eventType,Ap.data))})},Mp.prototype.onForciblyReconnectSubscriber=function(Ap){var Dp=this;return new Promise(function(Fp,Ip){Dp.getRemoteConnection(Ap.connectionId,"onForciblyReconnectSubscriber").then(function(kp){if(kp.stream&&kp.stream.streamId===Ap.streamId){var Tp=kp.stream;if(Tp.setupReconnectionEventEmitter(Fp,Ip)){if(Tp.reconnectionEventEmitter.onForciblyReconnectSubscriberLastEvent!=null)return Tp.reconnectionEventEmitter.onForciblyReconnectSubscriberLastEvent=Ap,Ip("Ongoing forced subscriber reconnection");Tp.reconnectionEventEmitter.onForciblyReconnectSubscriberLastEvent=Ap;var Np=function(){var Vp=Tp.reconnectionEventEmitter.onForciblyReconnectSubscriberLastEvent;delete Tp.reconnectionEventEmitter.onForciblyReconnectSubscriberLastEvent,Dp.onForciblyReconnectSubscriber(Vp)};Tp.reconnectionEventEmitter.once("success",function(){Np()}),Tp.reconnectionEventEmitter.once("error",function(){Np()});return}Tp.completeWebRtcPeerReceive(!0,!0,Ap.sdpOffer).then(function(){return Tp.finalResolveForSubscription(!0,Fp)}).catch(function(Vp){return Tp.finalRejectForSubscription(!0,"Error while forcibly reconnecting remote stream ".concat(Ap.streamId,": ").concat(Vp.toString()),Ip)})}else{var Lp="No stream with streamId '"+Ap.streamId+"' found for connection '"+Ap.connectionId+"' on 'streamPropertyChanged' event";return Rp.error(Lp),Ip(Lp)}}).catch(function(kp){return Rp.error(kp),Ip(kp)})})},Mp.prototype.reconnectBrokenStreams=function(){Rp.info("Re-establishing media connections...");var Ap=!1;this.connection.stream&&this.connection.stream.streamIceConnectionStateBroken()&&(Rp.warn("Re-establishing Publisher "+this.connection.stream.streamId),this.connection.stream.initWebRtcPeerSend(!0),Ap=!0),this.remoteConnections.forEach(function(Dp){Dp.stream&&Dp.stream.streamIceConnectionStateBroken()&&(Rp.warn("Re-establishing Subscriber "+Dp.stream.streamId),Dp.stream.initWebRtcPeerReceive(!0),Ap=!0)}),Ap||Rp.info("There were no media streams in need of a reconnection")},Mp.prototype.onSpeechToTextMessage=function(Ap){return np(this,void 0,void 0,function(){var Dp,Fp;return rp(this,function(Ip){switch(Ip.label){case 0:return[4,this.getConnection(Ap.connectionId,"No connection found for connectionId "+Ap.connectionId)];case 1:return Dp=Ip.sent(),Fp=new mp.SpeechToTextEvent(this,Dp,Ap.text,Ap.reason.toLowerCase(),Ap.raw,Ap.lang),this.ee.emitEvent("speechToTextMessage",[Fp]),[2]}})})},Mp.prototype.onSpeechToTextDisconnected=function(Ap){return np(this,void 0,void 0,function(){return rp(this,function(Dp){return this.emitEvent("exception",[new $p.ExceptionEvent(this,$p.ExceptionEventName.SPEECH_TO_TEXT_DISCONNECTED,this,Ap.message)]),[2]})})},Mp.prototype.emitEvent=function(Ap,Dp){this.ee.emitEvent(Ap,Dp)},Mp.prototype.leave=function(Ap,Dp){var Fp=this;if(Ap=!!Ap,Rp.info("Leaving Session (forced="+Ap+")"),this.stopVideoDataIntervals(),this.connection){if(!this.connection.disposed&&!Ap?this.openvidu.sendRequest("leaveRoom",function(kp,Tp){kp&&Rp.error("leaveRoom error: ".concat(JSON.stringify(kp))),Fp.openvidu.closeWs()}):this.openvidu.closeWs(),this.stopPublisherStream(Dp),!this.connection.disposed){var Ip=new pp.SessionDisconnectedEvent(this,Dp);this.ee.emitEvent("sessionDisconnected",[Ip]),Ip.callDefaultBehavior()}}else Rp.warn("You were not connected to the session "+this.sessionId);Rp.flush()},Mp.prototype.initializeParams=function(Ap){var Dp={token:Ap||"",session:this.sessionId,platform:Pp.getDescription()?Pp.getDescription():"unknown",sdkVersion:this.openvidu.libraryVersion,metadata:this.options.metadata?this.options.metadata:"",secret:this.openvidu.getSecret(),recorder:this.openvidu.getRecorder(),stt:this.openvidu.getStt()};return Dp},Mp.prototype.sendVideoData=function(Ap,Dp,Fp,Ip){var kp=this,Tp,Np;if(Dp===void 0&&(Dp=1),Fp===void 0&&(Fp=!1),Ip===void 0&&(Ip=1),Pp.isChromeBrowser()||Pp.isChromeMobileBrowser()||Pp.isOperaBrowser()||Pp.isOperaMobileBrowser()||Pp.isEdgeBrowser()||Pp.isEdgeMobileBrowser()||Pp.isElectron()||Pp.isSafariBrowser()&&!Pp.isIonicIos()||Pp.isAndroidBrowser()||Pp.isSamsungBrowser()||Pp.isIonicAndroid()||Pp.isIOSWithSafari()){var Lp=function(){return np(kp,void 0,void 0,function(){var zp,Wp,Up;return rp(this,function(qp){switch(qp.label){case 0:return zp=Ap.stream.getRTCPeerConnection(),zp.connectionState!=="connected"?[3,2]:[4,zp.getStats()];case 1:Wp=qp.sent(),Up=[],Wp.forEach(function(Bp){"frameWidth"in Bp&&"frameHeight"in Bp&&Up.length===0&&Up.push(Bp)}),Up.length>0&&this.openvidu.sendRequest("videoData",{height:Up[0].frameHeight,width:Up[0].frameWidth,videoActive:Ap.stream.videoActive!=null?Ap.stream.videoActive:!1,audioActive:Ap.stream.audioActive!=null?Ap.stream.audioActive:!1},function(Bp,Yp){Bp&&Rp.error("Error sending 'videoData' event",Bp)}),qp.label=2;case 2:return[2]}})})};if(Fp){var Vp=1;this.videoDataInterval=setInterval(function(){Vp<Ip?(Vp++,Lp()):clearInterval(kp.videoDataInterval)},Dp*1e3)}else this.videoDataTimeout=setTimeout(Lp,Dp*1e3)}else Pp.isFirefoxBrowser()||Pp.isFirefoxMobileBrowser()||Pp.isIonicIos()||Pp.isReactNative()?this.openvidu.sendRequest("videoData",{height:((Tp=Ap.stream.videoDimensions)===null||Tp===void 0?void 0:Tp.height)||0,width:((Np=Ap.stream.videoDimensions)===null||Np===void 0?void 0:Np.width)||0,videoActive:Ap.stream.videoActive!=null?Ap.stream.videoActive:!1,audioActive:Ap.stream.audioActive!=null?Ap.stream.audioActive:!1},function(zp,Wp){zp&&Rp.error("Error sending 'videoData' event",zp)}):Rp.error("Browser "+Pp.getName()+" (version "+Pp.getVersion()+") for "+Pp.getFamily()+" is not supported in OpenVidu for Network Quality")},Mp.prototype.sessionConnected=function(){return this.connection!=null},Mp.prototype.notConnectedError=function(){return new yp.OpenViduError(yp.OpenViduErrorName.OPENVIDU_NOT_CONNECTED,"There is no connection to the session. Method 'Session.connect' must be successfully completed first")},Mp.prototype.anySpeechEventListenerEnabled=function(Ap,Dp,Fp){var Ip=this.ee.getListeners(Ap);Dp&&(Ip=Ip.filter(function(Lp){return Lp.once}));var kp=Ip.length;if(kp>0)return!0;var Tp=0;if(Fp){var Np=Fp.ee.getListeners(Ap);Dp&&(Np=Np.filter(function(Lp){return Lp.once})),Tp=Np.length}return Tp>0},Mp.prototype.getTokenParams=function(Ap){var Dp=Ap.match(/^(wss?)\:\/\/(([^:\/?#]*)(?:\:([0-9]+))?)([\/]{0,1}[^?#]*)(\?[^#]*|)(#.*|)$/);if(Dp){var Fp={protocol:Dp[1],host:Dp[2],hostname:Dp[3],port:Dp[4],pathname:Dp[5],search:Dp[6],hash:Dp[7]},Ip=Ap.split("?"),kp=decodeURI(Ip[1]).split("&").map(function(Tp){return Tp.split("=")}).reduce(function(Tp,Np){var Lp=Np[0],Vp=Np[1];return Tp[Lp]=Vp,Tp},{});return{sessionId:kp.sessionId,secret:kp.secret,recorder:kp.recorder,stt:kp.stt,webrtcStatsInterval:kp.webrtcStatsInterval,sendBrowserLogs:kp.sendBrowserLogs,edition:kp.edition,wsUri:Fp.protocol+"://"+Fp.host+"/openvidu",httpUri:"https://"+Fp.host}}else throw new Error('Token not valid: "'.concat(Ap,'"'))},Mp.prototype.connectAux=function(Ap){var Dp=this;return new Promise(function(Fp,Ip){Dp.openvidu.startWs(function(kp){if(kp)return Ip(kp);var Tp=Dp.initializeParams(Ap);Dp.openvidu.sendRequest("joinRoom",Tp,function(Np,Lp){if(Np)return Ip(Np);Dp.processJoinRoomResponse(Lp,Ap),Dp.connection=new ap.Connection(Dp,Lp);var Vp={connections:new Array,streams:new Array},zp=Lp.value;return zp.forEach(function(Wp){var Up=new ap.Connection(Dp,Wp);Dp.remoteConnections.set(Up.connectionId,Up),Vp.connections.push(Up),Up.stream&&(Dp.remoteStreamsCreated.set(Up.stream.streamId,!0),Vp.streams.push(Up.stream))}),Dp.ee.emitEvent("connectionCreated",[new cp.ConnectionEvent(!1,Dp,"connectionCreated",Dp.connection,"")]),Vp.connections.forEach(function(Wp){Dp.ee.emitEvent("connectionCreated",[new cp.ConnectionEvent(!1,Dp,"connectionCreated",Wp,"")])}),Vp.streams.forEach(function(Wp){Dp.ee.emitEvent("streamCreated",[new gp.StreamEvent(!1,Dp,"streamCreated",Wp,"")])}),Lp.recordingId&&Lp.recordingName&&Dp.ee.emitEvent("recordingStarted",[new fp.RecordingEvent(Dp,"recordingStarted",Lp.recordingId,Lp.recordingName)]),Fp()})})})},Mp.prototype.stopPublisherStream=function(Ap){this.connection.stream&&(this.connection.stream.disposeWebRtcPeer(),this.connection.stream.isLocalStreamPublished&&this.connection.stream.ee.emitEvent("local-stream-destroyed",[Ap]))},Mp.prototype.stopVideoDataIntervals=function(){clearInterval(this.videoDataInterval),clearTimeout(this.videoDataTimeout)},Mp.prototype.stringClientMetadata=function(Ap){return typeof Ap!="string"?JSON.stringify(Ap):Ap},Mp.prototype.getConnection=function(Ap,Dp){var Fp=this;return new Promise(function(Ip,kp){var Tp=Fp.remoteConnections.get(Ap);return Tp?Ip(Tp):Fp.connection.connectionId===Ap?Ip(Fp.connection):kp(new yp.OpenViduError(yp.OpenViduErrorName.GENERIC_ERROR,Dp))})},Mp.prototype.getRemoteConnection=function(Ap,Dp){var Fp=this;return new Promise(function(Ip,kp){var Tp=Fp.remoteConnections.get(Ap);if(Tp)return Ip(Tp);var Np="Remote connection "+Ap+" unknown when '"+Dp+"'. Existing remote connections: "+JSON.stringify(Fp.remoteConnections.keys());return kp(new yp.OpenViduError(yp.OpenViduErrorName.GENERIC_ERROR,Np))})},Mp.prototype.processToken=function(Ap){var Dp=this.getTokenParams(Ap);this.sessionId=Dp.sessionId,Dp.secret&&(this.openvidu.secret=Dp.secret),Dp.recorder&&(this.openvidu.recorder=!0),Dp.stt&&(this.openvidu.stt=!0),Dp.webrtcStatsInterval&&(this.openvidu.webrtcStatsInterval=Dp.webrtcStatsInterval),Dp.sendBrowserLogs&&(this.openvidu.sendBrowserLogs=Dp.sendBrowserLogs),this.openvidu.isAtLeastPro=Dp.edition==="pro"||Dp.edition==="enterprise",this.openvidu.isEnterprise=Dp.edition==="enterprise",this.openvidu.wsUri=Dp.wsUri,this.openvidu.httpUri=Dp.httpUri},Mp.prototype.processJoinRoomResponse=function(Ap,Dp){if(this.sessionId=Ap.session,Ap.customIceServers!=null&&Ap.customIceServers.length>0){this.openvidu.iceServers=[];for(var Fp=0,Ip=Ap.customIceServers;Fp<Ip.length;Fp++){var kp=Ip[Fp],Tp={urls:[kp.url]};Rp.log("STUN/TURN server IP: "+kp.url),kp.username!=null&&kp.credential!=null&&(Tp.username=kp.username,Tp.credential=kp.credential,Rp.log("TURN credentials ["+kp.username+":"+kp.credential+"]")),this.openvidu.iceServers.push(Tp)}}this.openvidu.role=Ap.role,this.openvidu.finalUserId=Ap.finalUserId,this.openvidu.mediaServer=Ap.mediaServer,this.openvidu.videoSimulcast=Ap.videoSimulcast,this.capabilities={subscribe:!0,publish:this.openvidu.role!=="SUBSCRIBER",forceUnpublish:this.openvidu.role==="MODERATOR",forceDisconnect:this.openvidu.role==="MODERATOR"},Rp.info("openvidu-server version: "+Ap.version),Ap.life!=null&&(this.openvidu.life=Ap.life);var Np=Cp(Ap.version)-Cp(this.openvidu.libraryVersion);_p(Ap.version)!==_p(this.openvidu.libraryVersion)||!(Np==0||Np==1)?Rp.error("openvidu-browser (".concat(this.openvidu.libraryVersion,") and openvidu-server (").concat(Ap.version,") versions are incompatible. ")+"Errors are likely to occur. openvidu-browser SDK is only compatible with the same version or the immediately following minor version of an OpenVidu deployment"):Np==1&&Rp.warn("openvidu-browser version ".concat(this.openvidu.libraryVersion," does not match openvidu-server version ").concat(Ap.version,". ")+"These versions are still compatible with each other, but openvidu-browser version must be updated as soon as possible to ".concat(_p(Ap.version),".").concat(Cp(Ap.version),".x. ")+"This client using openvidu-browser ".concat(this.openvidu.libraryVersion," will become incompatible with the next release of openvidu-server")),Ep.OpenViduLogger.configureJSNLog(this.openvidu,Dp),this.token=Dp},Mp}(up.EventDispatcher);return Session.Session=Op,Session}var hasRequiredPublisher;function requirePublisher(){if(hasRequiredPublisher)return Publisher;hasRequiredPublisher=1;var _d=commonjsGlobal&&commonjsGlobal.__extends||function(){var xp=function(Sp,yp){return xp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(bp,Ep){bp.__proto__=Ep}||function(bp,Ep){for(var wp in Ep)Object.prototype.hasOwnProperty.call(Ep,wp)&&(bp[wp]=Ep[wp])},xp(Sp,yp)};return function(Sp,yp){if(typeof yp!="function"&&yp!==null)throw new TypeError("Class extends value "+String(yp)+" is not a constructor or null");xp(Sp,yp);function bp(){this.constructor=Sp}Sp.prototype=yp===null?Object.create(yp):(bp.prototype=yp.prototype,new bp)}}(),np=commonjsGlobal&&commonjsGlobal.__awaiter||function(xp,Sp,yp,bp){function Ep(wp){return wp instanceof yp?wp:new yp(function(_p){_p(wp)})}return new(yp||(yp=Promise))(function(wp,_p){function Cp(Pp){try{Rp(bp.next(Pp))}catch(Op){_p(Op)}}function $p(Pp){try{Rp(bp.throw(Pp))}catch(Op){_p(Op)}}function Rp(Pp){Pp.done?wp(Pp.value):Ep(Pp.value).then(Cp,$p)}Rp((bp=bp.apply(xp,Sp||[])).next())})},rp=commonjsGlobal&&commonjsGlobal.__generator||function(xp,Sp){var yp={label:0,sent:function(){if(wp[0]&1)throw wp[1];return wp[1]},trys:[],ops:[]},bp,Ep,wp,_p;return _p={next:Cp(0),throw:Cp(1),return:Cp(2)},typeof Symbol=="function"&&(_p[Symbol.iterator]=function(){return this}),_p;function Cp(Rp){return function(Pp){return $p([Rp,Pp])}}function $p(Rp){if(bp)throw new TypeError("Generator is already executing.");for(;_p&&(_p=0,Rp[0]&&(yp=0)),yp;)try{if(bp=1,Ep&&(wp=Rp[0]&2?Ep.return:Rp[0]?Ep.throw||((wp=Ep.return)&&wp.call(Ep),0):Ep.next)&&!(wp=wp.call(Ep,Rp[1])).done)return wp;switch(Ep=0,wp&&(Rp=[Rp[0]&2,wp.value]),Rp[0]){case 0:case 1:wp=Rp;break;case 4:return yp.label++,{value:Rp[1],done:!1};case 5:yp.label++,Ep=Rp[1],Rp=[0];continue;case 7:Rp=yp.ops.pop(),yp.trys.pop();continue;default:if(wp=yp.trys,!(wp=wp.length>0&&wp[wp.length-1])&&(Rp[0]===6||Rp[0]===2)){yp=0;continue}if(Rp[0]===3&&(!wp||Rp[1]>wp[0]&&Rp[1]<wp[3])){yp.label=Rp[1];break}if(Rp[0]===6&&yp.label<wp[1]){yp.label=wp[1],wp=Rp;break}if(wp&&yp.label<wp[2]){yp.label=wp[2],yp.ops.push(Rp);break}wp[2]&&yp.ops.pop(),yp.trys.pop();continue}Rp=Sp.call(xp,yp)}catch(Pp){Rp=[6,Pp],Ep=0}finally{bp=wp=0}if(Rp[0]&5)throw Rp[1];return{value:Rp[0]?Rp[1]:void 0,done:!0}}};Object.defineProperty(Publisher,"__esModule",{value:!0}),Publisher.Publisher=void 0;var ap=requireSession(),sp=Stream$1,lp=StreamManager$1,up=requireStreamEvent(),cp=StreamPropertyChangedEvent$1,dp=OpenViduError,fp=OpenViduLogger$1,pp=Platform,hp=TypeOfVideo,mp=fp.OpenViduLogger.getInstance(),gp,vp=function(xp){_d(Sp,xp);function Sp(yp,bp,Ep){var wp=xp.call(this,new sp.Stream(Ep.session?Ep.session:new ap.Session(Ep),{publisherProperties:bp,mediaConstraints:{}}),yp)||this;return wp.accessAllowed=!1,wp.isSubscribedToRemote=!1,wp.accessDenied=!1,gp=pp.PlatformUtils.getInstance(),wp.properties=bp,wp.openvidu=Ep,wp.stream.ee.on("local-stream-destroyed",function(_p){wp.stream.isLocalStreamPublished=!1;var Cp=new up.StreamEvent(!0,wp,"streamDestroyed",wp.stream,_p);wp.emitEvent("streamDestroyed",[Cp]),Cp.callDefaultBehavior()}),wp}return Sp.prototype.publishAudio=function(yp){var bp=this;if(this.stream.audioActive!==yp){var Ep=this.stream.displayMyRemote()?this.stream.localMediaStreamWhenSubscribedToRemote:this.stream.getMediaStream();Ep.getAudioTracks().forEach(function(wp){wp.enabled=yp}),this.session&&this.stream.streamId&&this.session.openvidu.sendRequest("streamPropertyChanged",{streamId:this.stream.streamId,property:"audioActive",newValue:yp,reason:"publishAudio"},function(wp,_p){wp?mp.error("Error sending 'streamPropertyChanged' event",wp):(bp.session.emitEvent("streamPropertyChanged",[new cp.StreamPropertyChangedEvent(bp.session,bp.stream,"audioActive",yp,!yp,"publishAudio")]),bp.emitEvent("streamPropertyChanged",[new cp.StreamPropertyChangedEvent(bp,bp.stream,"audioActive",yp,!yp,"publishAudio")]),bp.session.sendVideoData(bp.stream.streamManager))}),this.stream.audioActive=yp,mp.info("'Publisher' has "+(yp?"published":"unpublished")+" its audio stream")}},Sp.prototype.publishVideo=function(yp,bp){var Ep=this;return new Promise(function(wp,_p){return np(Ep,void 0,void 0,function(){var Cp,$p,Rp,Pp,Op,jp,Mp=this;return rp(this,function(Ap){switch(Ap.label){case 0:return this.stream.videoActive===yp?[3,9]:(Cp=this.stream.displayMyRemote()?this.stream.localMediaStreamWhenSubscribedToRemote:this.stream.getMediaStream(),$p=!1,Cp.getVideoTracks().forEach(function(Dp){Dp.enabled=yp,!yp&&bp===!0?Dp.stop():yp&&Dp.readyState==="ended"&&($p=!0)}),!yp&&bp===!0&&this.stream.filter&&this.stream.filter.type.startsWith("VB:")?(this.stream.lastVBFilter=this.stream.filter,[4,this.stream.removeFilterAux(!0)]):[3,2]);case 1:Ap.sent(),Ap.label=2;case 2:return $p?(Rp=Cp.getVideoTracks()[0],Cp.removeTrack(Rp),Pp=function(Dp){return np(Mp,void 0,void 0,function(){var Fp=this;return rp(this,function(Ip){switch(Ip.label){case 0:return Cp.addTrack(Dp),this.stream.isLocalStreamPublished?[4,this.replaceTrackInRtcRtpSender(Dp)]:[3,2];case 1:Ip.sent(),Ip.label=2;case 2:return this.stream.lastVBFilter&&setTimeout(function(){return np(Fp,void 0,void 0,function(){var kp,Tp;return rp(this,function(Np){switch(Np.label){case 0:return kp=this.stream.lastVBFilter.options,Tp=this.stream.lastVBFilter.lastExecMethod,Tp&&Tp.method==="update"&&(kp=Object.assign({},kp,Tp.params)),[4,this.stream.applyFilter(this.stream.lastVBFilter.type,kp)];case 1:return Np.sent(),delete this.stream.lastVBFilter,[2]}})})},1),[2]}})})},bp&&bp instanceof MediaStreamTrack?[4,Pp(bp)]:[3,4]):[3,8];case 3:return Ap.sent(),[3,8];case 4:return Ap.trys.push([4,7,,8]),[4,navigator.mediaDevices.getUserMedia({audio:!1,video:this.stream.lastVideoTrackConstraints})];case 5:return Op=Ap.sent(),[4,Pp(Op.getVideoTracks()[0])];case 6:return Ap.sent(),[3,8];case 7:return jp=Ap.sent(),[2,_p(jp)];case 8:return this.session&&this.stream.streamId&&this.session.openvidu.sendRequest("streamPropertyChanged",{streamId:this.stream.streamId,property:"videoActive",newValue:yp,reason:"publishVideo"},function(Dp,Fp){Dp?mp.error("Error sending 'streamPropertyChanged' event",Dp):(Mp.session.emitEvent("streamPropertyChanged",[new cp.StreamPropertyChangedEvent(Mp.session,Mp.stream,"videoActive",yp,!yp,"publishVideo")]),Mp.emitEvent("streamPropertyChanged",[new cp.StreamPropertyChangedEvent(Mp,Mp.stream,"videoActive",yp,!yp,"publishVideo")]),Mp.session.sendVideoData(Mp.stream.streamManager))}),this.stream.videoActive=yp,mp.info("'Publisher' has "+(yp?"published":"unpublished")+" its video stream"),[2,wp()];case 9:return[2]}})})})},Sp.prototype.subscribeToRemote=function(yp){yp=yp!==void 0?yp:!0,this.isSubscribedToRemote=yp,this.stream.subscribeToMyRemote(yp)},Sp.prototype.on=function(yp,bp){var Ep=this;return xp.prototype.on.call(this,yp,bp),yp==="streamCreated"&&(this.stream&&this.stream.isLocalStreamPublished?this.emitEvent("streamCreated",[new up.StreamEvent(!1,this,"streamCreated",this.stream,"")]):this.stream.ee.on("stream-created-by-publisher",function(){Ep.emitEvent("streamCreated",[new up.StreamEvent(!1,Ep,"streamCreated",Ep.stream,"")])})),yp==="accessAllowed"&&this.accessAllowed&&this.emitEvent("accessAllowed",[]),yp==="accessDenied"&&this.accessDenied&&this.emitEvent("accessDenied",[]),this},Sp.prototype.once=function(yp,bp){var Ep=this;return xp.prototype.once.call(this,yp,bp),yp==="streamCreated"&&(this.stream&&this.stream.isLocalStreamPublished?this.emitEvent("streamCreated",[new up.StreamEvent(!1,this,"streamCreated",this.stream,"")]):this.stream.ee.once("stream-created-by-publisher",function(){Ep.emitEvent("streamCreated",[new up.StreamEvent(!1,Ep,"streamCreated",Ep.stream,"")])})),yp==="accessAllowed"&&this.accessAllowed&&this.emitEvent("accessAllowed",[]),yp==="accessDenied"&&this.accessDenied&&this.emitEvent("accessDenied",[]),this},Sp.prototype.off=function(yp,bp){return xp.prototype.off.call(this,yp,bp),this},Sp.prototype.replaceTrack=function(yp){return np(this,void 0,void 0,function(){return rp(this,function(bp){return[2,this.replaceTrackAux(yp,!0)]})})},Sp.prototype.initialize=function(){var yp=this;return new Promise(function(bp,Ep){return np(yp,void 0,void 0,function(){var wp,_p,Cp,$p,Rp,Pp,Op,jp,Mp,Ap,Dp,Fp,Fp,Ip,kp,Tp=this,Np,Lp;return rp(this,function(Vp){switch(Vp.label){case 0:wp={},_p={},Cp=2e3,Rp=function(zp){return Tp.accessDenied=!0,Tp.accessAllowed=!1,mp.error("Publisher initialization failed. ".concat(zp.name,": ").concat(zp.message)),Ep(zp)},Pp=function(zp){var Wp,Up;if(Tp.accessAllowed=!0,Tp.accessDenied=!1,typeof MediaStreamTrack<"u"&&Tp.properties.audioSource instanceof MediaStreamTrack&&(zp.removeTrack(zp.getAudioTracks()[0]),zp.addTrack(Tp.properties.audioSource)),typeof MediaStreamTrack<"u"&&Tp.properties.videoSource instanceof MediaStreamTrack&&(zp.removeTrack(zp.getVideoTracks()[0]),zp.addTrack(Tp.properties.videoSource)),zp.getAudioTracks()[0]){var qp=Tp.stream.audioActive!==void 0&&Tp.stream.audioActive!==null?Tp.stream.audioActive:!!Tp.stream.outboundStreamOpts.publisherProperties.publishAudio;zp.getAudioTracks()[0].enabled=qp}if(zp.getVideoTracks()[0]){var qp=Tp.stream.videoActive!==void 0&&Tp.stream.videoActive!==null?Tp.stream.videoActive:!!Tp.stream.outboundStreamOpts.publisherProperties.publishVideo;zp.getVideoTracks()[0].enabled=qp}for(var Bp=0,Yp=zp.getAudioTracks();Bp<Yp.length;Bp++){var Xp=Yp[Bp];!((Wp=Xp.contentHint)===null||Wp===void 0)&&Wp.length||(Xp.contentHint="",mp.info("Audio track Content Hint set: '".concat(Xp.contentHint,"'")))}for(var Qp=0,am=zp.getVideoTracks();Qp<am.length;Qp++){var Xp=am[Qp];if(!(!((Up=Xp.contentHint)===null||Up===void 0)&&Up.length)){switch(Tp.stream.typeOfVideo){case hp.TypeOfVideo.SCREEN:Xp.contentHint="detail";break;case hp.TypeOfVideo.CUSTOM:mp.warn("CUSTOM type video track was provided without Content Hint!"),Xp.contentHint="motion";break;case hp.TypeOfVideo.CAMERA:case hp.TypeOfVideo.IPCAM:default:Xp.contentHint="motion";break}mp.info("Video track Content Hint set: '".concat(Xp.contentHint,"'"))}}return Tp.initializeVideoReference(zp),Tp.stream.displayMyRemote()||Tp.stream.updateMediaStreamInVideos(),delete Tp.firstVideoElement,Tp.stream.isSendVideo()?Tp.getVideoDimensions().then(function(Jp){Tp.stream.videoDimensions={width:Jp.width,height:Jp.height},Tp.stream.isSendScreen()&&(Tp.stream.isSendAudio()&&zp.getAudioTracks().length===0&&(Tp.stream.audioActive=!1,Tp.stream.hasAudio=!1,Tp.stream.outboundStreamOpts.publisherProperties.publishAudio=!1,Tp.stream.outboundStreamOpts.publisherProperties.audioSource=!1),Tp.screenShareResizeInterval=setInterval(function(){var im=zp.getVideoTracks()[0].getSettings(),Zp=im.width,Gp=im.height,tm=Zp!=null&&Zp!==Tp.stream.videoDimensions.width,om=Gp!=null&&Gp!==Tp.stream.videoDimensions.height;Tp.stream.isLocalStreamPublished&&(tm||om)&&Tp.openvidu.sendVideoDimensionsChangedEvent(Tp,"screenResized",Tp.stream.videoDimensions.width,Tp.stream.videoDimensions.height,Zp||0,Gp||0)},650)),Tp.stream.isLocalStreamReadyToPublish=!0,Tp.stream.ee.emitEvent("stream-ready-to-publish",[])}):(Tp.stream.isLocalStreamReadyToPublish=!0,Tp.stream.ee.emitEvent("stream-ready-to-publish",[])),bp()},Op=function(zp,Wp){return np(Tp,void 0,void 0,function(){var Up,qp;return rp(this,function(Bp){switch(Bp.label){case 0:if(this.clearPermissionDialogTimer($p,Cp),!(this.stream.isSendScreen()&&this.properties.audioSource!=="screen"&&this.stream.isSendAudio()))return[3,5];_p.audio=Wp,_p.video=!1,$p=Date.now(),this.setPermissionDialogTimer(Cp),Bp.label=1;case 1:return Bp.trys.push([1,3,,4]),[4,navigator.mediaDevices.getUserMedia(_p)];case 2:return Up=Bp.sent(),this.clearPermissionDialogTimer($p,Cp),zp.addTrack(Up.getAudioTracks()[0]),Pp(zp),[3,4];case 3:return qp=Bp.sent(),this.clearPermissionDialogTimer($p,Cp),zp.getAudioTracks().forEach(function(Yp){Yp.stop()}),zp.getVideoTracks().forEach(function(Yp){Yp.stop()}),Rp(this.openvidu.generateAudioDeviceError(qp,wp)),[2];case 4:return[3,6];case 5:Pp(zp),Bp.label=6;case 6:return[2]}})})},jp=function(zp){return np(Tp,void 0,void 0,function(){var Wp,Up,qp,Yp,Bp,Yp,Xp;return rp(this,function(Qp){switch(Qp.label){case 0:switch(mp.error("getMediaError: ".concat(zp.toString())),this.clearPermissionDialogTimer($p,Cp),zp.name==="Error"&&(zp.name=zp.constructor.name),qp=zp.name.toLowerCase(),qp){case"notfounderror":return[3,1];case"notallowederror":return[3,5];case"overconstrainederror":return[3,6];case"aborterror":return[3,10];case"notreadableerror":return[3,10]}return[3,11];case 1:return Qp.trys.push([1,3,,4]),[4,navigator.mediaDevices.getUserMedia({audio:!1,video:wp.video})];case 2:return Yp=Qp.sent(),Yp.getVideoTracks().forEach(function(am){am.stop()}),Wp=dp.OpenViduErrorName.INPUT_AUDIO_DEVICE_NOT_FOUND,Up=zp.toString(),Rp(new dp.OpenViduError(Wp,Up)),[3,4];case 3:return Bp=Qp.sent(),Wp=dp.OpenViduErrorName.INPUT_VIDEO_DEVICE_NOT_FOUND,Up=Bp.toString(),Rp(new dp.OpenViduError(Wp,Up)),[3,4];case 4:return[3,12];case 5:return Wp=this.stream.isSendScreen()?dp.OpenViduErrorName.SCREEN_CAPTURE_DENIED:dp.OpenViduErrorName.DEVICE_ACCESS_DENIED,Up=zp.toString(),Rp(new dp.OpenViduError(Wp,Up)),[3,12];case 6:return Qp.trys.push([6,8,,9]),[4,navigator.mediaDevices.getUserMedia({audio:!1,video:wp.video})];case 7:return Yp=Qp.sent(),Yp.getVideoTracks().forEach(function(am){am.stop()}),zp.constraint.toLowerCase()==="deviceid"?(Wp=dp.OpenViduErrorName.INPUT_AUDIO_DEVICE_NOT_FOUND,Up="Audio input device with deviceId '"+wp.audio.deviceId.exact+"' not found"):(Wp=dp.OpenViduErrorName.PUBLISHER_PROPERTIES_ERROR,Up="Audio input device doesn't support the value passed for constraint '"+zp.constraint+"'"),Rp(new dp.OpenViduError(Wp,Up)),[3,9];case 8:return Xp=Qp.sent(),Xp.constraint.toLowerCase()==="deviceid"?(Wp=dp.OpenViduErrorName.INPUT_VIDEO_DEVICE_NOT_FOUND,Up="Video input device with deviceId '"+wp.video.deviceId.exact+"' not found"):(Wp=dp.OpenViduErrorName.PUBLISHER_PROPERTIES_ERROR,Up="Video input device doesn't support the value passed for constraint '"+Xp.constraint+"'"),Rp(new dp.OpenViduError(Wp,Up)),[3,9];case 9:return[3,12];case 10:return Wp=dp.OpenViduErrorName.DEVICE_ALREADY_IN_USE,Up=zp.toString(),Rp(new dp.OpenViduError(Wp,Up)),[3,12];case 11:return Wp=dp.OpenViduErrorName.GENERIC_ERROR,Up=zp.toString(),Rp(new dp.OpenViduError(Wp,Up)),[3,12];case 12:return[2]}})})},Vp.label=1;case 1:return Vp.trys.push([1,14,,15]),[4,this.openvidu.generateMediaConstraints(this.properties)];case 2:return Mp=Vp.sent(),Mp.videoTrack&&Mp.audioTrack||Mp.audioTrack&&((Np=Mp.constraints)===null||Np===void 0?void 0:Np.video)===!1||Mp.videoTrack&&((Lp=Mp.constraints)===null||Lp===void 0?void 0:Lp.audio)===!1?(Pp(this.openvidu.addAlreadyProvidedTracks(Mp,new MediaStream,this.stream)),[3,13]):[3,3];case 3:wp=Mp.constraints,Ap={mediaConstraints:wp,publisherProperties:this.properties},this.stream.setOutboundStreamOptions(Ap),Dp=wp.audio===void 0?!0:wp.audio,_p.audio=this.stream.isSendScreen()?!1:Dp,_p.video=wp.video,$p=Date.now(),this.setPermissionDialogTimer(Cp),Vp.label=4;case 4:return Vp.trys.push([4,11,,13]),this.stream.isSendScreen()&&navigator.mediaDevices.getDisplayMedia&&!gp.isElectron()?[4,navigator.mediaDevices.getDisplayMedia({video:!0,audio:this.properties.audioSource==="screen"})]:[3,7];case 5:return Fp=Vp.sent(),this.openvidu.addAlreadyProvidedTracks(Mp,Fp),[4,Op(Fp,Dp)];case 6:return Vp.sent(),[3,10];case 7:return this.stream.lastVideoTrackConstraints=_p.video,[4,navigator.mediaDevices.getUserMedia(_p)];case 8:return Fp=Vp.sent(),this.openvidu.addAlreadyProvidedTracks(Mp,Fp,this.stream),[4,Op(Fp,Dp)];case 9:Vp.sent(),Vp.label=10;case 10:return[3,13];case 11:return Ip=Vp.sent(),[4,jp(Ip)];case 12:return Vp.sent(),[3,13];case 13:return[3,15];case 14:return kp=Vp.sent(),Rp(kp),[3,15];case 15:return[2]}})})})},Sp.prototype.replaceTrackAux=function(yp,bp){return np(this,void 0,void 0,function(){var Ep,wp;return rp(this,function(_p){switch(_p.label){case 0:Ep=yp.enabled,yp.kind==="video"?yp.enabled=this.stream.videoActive:yp.kind==="audio"&&(yp.enabled=this.stream.audioActive),_p.label=1;case 1:return _p.trys.push([1,5,,6]),this.stream.isLocalStreamPublished?(this.replaceTrackInMediaStream(yp,bp),[4,this.replaceTrackInRtcRtpSender(yp)]):[3,3];case 2:return[2,_p.sent()];case 3:return[2,this.replaceTrackInMediaStream(yp,bp)];case 4:return[3,6];case 5:throw wp=_p.sent(),yp.enabled=Ep,wp;case 6:return[2]}})})},Sp.prototype.getVideoDimensions=function(){var yp=this;return new Promise(function(bp,Ep){var wp=(gp.isIonicIos()||gp.isIOSWithSafari())&&yp.videoReference.readyState<1,_p,Cp=function(){var $p,Rp;if(typeof yp.stream.getMediaStream().getVideoTracks()[0].getSettings=="function"){var Pp=yp.stream.getMediaStream().getVideoTracks()[0].getSettings();$p=Pp.width||yp.videoReference.videoWidth,Rp=Pp.height||yp.videoReference.videoHeight}else mp.warn("MediaStreamTrack does not have getSettings method on "+gp.getDescription()),$p=yp.videoReference.videoWidth,Rp=yp.videoReference.videoHeight;return _p!=null&&yp.videoReference.removeEventListener("loadedmetadata",_p),wp&&document.body.removeChild(yp.videoReference),bp({width:$p,height:Rp})};yp.videoReference.readyState>=1?Cp():(_p=function(){if(yp.videoReference.videoWidth)Cp();else var $p=setInterval(function(){yp.videoReference.videoWidth&&(clearInterval($p),Cp())},40)},yp.videoReference.addEventListener("loadedmetadata",_p),wp&&document.body.appendChild(yp.videoReference))})},Sp.prototype.reestablishStreamPlayingEvent=function(){this.ee.getListeners("streamPlaying").length>0&&this.addPlayEventToFirstVideo()},Sp.prototype.initializeVideoReference=function(yp){this.videoReference=document.createElement("video"),this.videoReference.style.display="none",this.videoReference.muted=!0,this.videoReference.autoplay=!0,this.videoReference.controls=!1,(gp.isSafariBrowser()||gp.isIPhoneOrIPad()&&(gp.isChromeMobileBrowser()||gp.isEdgeMobileBrowser()||gp.isOperaMobileBrowser()||gp.isFirefoxMobileBrowser()))&&(this.videoReference.playsInline=!0),this.stream.setMediaStream(yp),this.firstVideoElement&&this.createVideoElement(this.firstVideoElement.targetElement,this.properties.insertMode),this.videoReference.srcObject=this.stream.getMediaStream()},Sp.prototype.replaceTrackInMediaStream=function(yp,bp){var Ep=this.stream.displayMyRemote()?this.stream.localMediaStreamWhenSubscribedToRemote:this.stream.getMediaStream(),wp;yp.kind==="video"?(wp=Ep.getVideoTracks()[0],bp&&(this.stream.lastVideoTrackConstraints=yp.getConstraints())):wp=Ep.getAudioTracks()[0],wp.enabled=!1,wp.stop(),Ep.removeTrack(wp),Ep.addTrack(yp);var _p={oldLabel:(wp==null?void 0:wp.label)||"",newLabel:(yp==null?void 0:yp.label)||""};yp.kind==="video"&&bp?(this.openvidu.sendNewVideoDimensionsIfRequired(this,"trackReplaced",50,30),this.openvidu.sendTrackChangedEvent(this,_p.oldLabel,_p.newLabel,"videoTrack"),this.stream.isLocalStreamPublished&&this.session.sendVideoData(this.stream.streamManager,5,!0,5)):yp.kind==="audio"&&bp&&this.openvidu.sendTrackChangedEvent(this,_p.oldLabel,_p.newLabel,"audioTrack"),yp.kind==="audio"&&(this.stream.disableHarkSpeakingEvent(!1),this.stream.disableHarkStoppedSpeakingEvent(!1),this.stream.disableHarkVolumeChangeEvent(!1),this.stream.initHarkEvents())},Sp.prototype.setPermissionDialogTimer=function(yp){var bp=this;this.permissionDialogTimeout=setTimeout(function(){bp.emitEvent("accessDialogOpened",[])},yp)},Sp.prototype.clearPermissionDialogTimer=function(yp,bp){clearTimeout(this.permissionDialogTimeout),Date.now()-yp>bp&&this.emitEvent("accessDialogClosed",[])},Sp.prototype.replaceTrackInRtcRtpSender=function(yp){return np(this,void 0,void 0,function(){var bp,Ep;return rp(this,function(wp){switch(wp.label){case 0:if(bp=this.stream.getRTCPeerConnection().getSenders(),yp.kind==="video"){if(Ep=bp.find(function(_p){return!!_p.track&&_p.track.kind==="video"}),!Ep)throw new Error("There's no replaceable track for that kind of MediaStreamTrack in this Publisher object")}else if(yp.kind==="audio"){if(Ep=bp.find(function(_p){return!!_p.track&&_p.track.kind==="audio"}),!Ep)throw new Error("There's no replaceable track for that kind of MediaStreamTrack in this Publisher object")}else throw new Error("Unknown track kind "+yp.kind);return[4,Ep.replaceTrack(yp)];case 1:return wp.sent(),[2]}})})},Sp}(lp.StreamManager);return Publisher.Publisher=vp,Publisher}var ScreenCapturingAuto={};globalThis.getScreenId=function(_d,np,rp){if(navigator.userAgent.indexOf("Edge")!==-1&&(navigator.msSaveOrOpenBlob||navigator.msSaveBlob)){np({video:!0});return}if(navigator.mozGetUserMedia){np(null,"firefox",{video:{mozMediaSource:_d,mediaSource:_d}});return}globalThis.addEventListener("message",ap);function ap(sp){sp.data&&(sp.data.chromeMediaSourceId&&(sp.data.chromeMediaSourceId==="PermissionDeniedError"?np("permission-denied"):np(null,sp.data.chromeMediaSourceId,getScreenConstraints$1(null,sp.data.chromeMediaSourceId,sp.data.canRequestAudioTrack)),globalThis.removeEventListener("message",ap)),sp.data.chromeExtensionStatus&&(np(sp.data.chromeExtensionStatus,null,getScreenConstraints$1(sp.data.chromeExtensionStatus)),globalThis.removeEventListener("message",ap)))}setTimeout(rp?function(){postGetSourceIdMessage(rp)}:postGetSourceIdMessage,100)};function getScreenConstraints$1(_d,np,rp){var ap={audio:!1,video:{mandatory:{chromeMediaSource:_d?"screen":"desktop",maxWidth:globalThis.screen.width>1920?globalThis.screen.width:1920,maxHeight:globalThis.screen.height>1080?globalThis.screen.height:1080},optional:[]}};return rp&&(ap.audio={mandatory:{chromeMediaSource:_d?"screen":"desktop"},optional:[]}),np&&(ap.video.mandatory.chromeMediaSourceId=np,ap.audio&&ap.audio.mandatory&&(ap.audio.mandatory.chromeMediaSourceId=np)),ap}function postGetSourceIdMessage(_d){if(!iframe){loadIFrame(function(){postGetSourceIdMessage(_d)});return}if(!iframe.isLoaded){setTimeout(function(){postGetSourceIdMessage(_d)},100);return}_d?_d.forEach?iframe.contentWindow.postMessage({captureCustomSourceId:_d},"*"):iframe.contentWindow.postMessage({captureSourceIdWithAudio:!0},"*"):iframe.contentWindow.postMessage({captureSourceId:!0},"*")}var iframe;globalThis.getScreenConstraints=function(_d){loadIFrame(function(){getScreenId(function(np,rp,ap){ap||(ap={video:!0}),_d(np,ap.video)})})};function loadIFrame(_d){if(iframe){_d();return}iframe=document.createElement("iframe"),iframe.onload=function(){iframe.isLoaded=!0,_d()},iframe.src="https://openvidu.github.io/openvidu-screen-sharing-chrome-extension/",iframe.style.display="none",(document.body||document.documentElement).appendChild(iframe)}globalThis.getChromeExtensionStatus=function(_d){if(navigator.mozGetUserMedia){_d("installed-enabled");return}globalThis.addEventListener("message",np);function np(rp){rp.data&&rp.data.chromeExtensionStatus&&(_d(rp.data.chromeExtensionStatus),globalThis.removeEventListener("message",np))}setTimeout(postGetChromeExtensionStatusMessage,100)};function postGetChromeExtensionStatusMessage(){if(!iframe){loadIFrame(postGetChromeExtensionStatusMessage);return}if(!iframe.isLoaded){setTimeout(postGetChromeExtensionStatusMessage,100);return}iframe.contentWindow.postMessage({getChromeExtensionStatus:!0},"*")}ScreenCapturingAuto.getScreenId=globalThis.getScreenId;var ScreenCapturing={},chromeMediaSource="screen",sourceId,screenCallback;if(typeof window<"u"&&typeof navigator<"u"&&typeof navigator.userAgent<"u"){var isFirefox=typeof window.InstallTrigger<"u";window.opera||navigator.userAgent.indexOf(" OPR/")>=0,window.addEventListener("message",function(_d){_d.origin==window.location.origin&&onMessageCallback(_d.data)})}function onMessageCallback(_d){if(_d=="PermissionDeniedError"){if(screenCallback)return screenCallback("PermissionDeniedError");throw new Error("PermissionDeniedError")}_d=="rtcmulticonnection-extension-loaded"&&(chromeMediaSource="desktop"),_d.sourceId&&screenCallback&&screenCallback(sourceId=_d.sourceId,_d.canRequestAudioTrack===!0)}function isChromeExtensionAvailable(_d){if(_d){if(chromeMediaSource=="desktop")return _d(!0);window.postMessage("are-you-there","*"),setTimeout(function(){chromeMediaSource=="screen"?_d(!1):_d(!0)},2e3)}}function getSourceId(_d){if(!_d)throw'"callback" parameter is mandatory.';if(sourceId)return _d(sourceId);screenCallback=_d,window.postMessage("get-sourceId","*")}function getSourceIdWithAudio(_d){if(!_d)throw'"callback" parameter is mandatory.';if(sourceId)return _d(sourceId);screenCallback=_d,window.postMessage("audio-plus-tab","*")}function getChromeExtensionStatus(_d,np){if(isFirefox)return np("not-chrome");arguments.length!=2&&(np=_d,_d="lfcgfepafnobdloecchnfaclibenjold");var rp=document.createElement("img");rp.src="chrome-extension://"+_d+"/icon.png",rp.onload=function(){chromeMediaSource="screen",window.postMessage("are-you-there","*"),setTimeout(function(){chromeMediaSource=="screen"?np("installed-disabled"):np("installed-enabled")},2e3)},rp.onerror=function(){np("not-installed")}}function getScreenConstraintsWithAudio(_d){getScreenConstraints(_d,!0)}function getScreenConstraints(_d,np){sourceId="";var rp={mozMediaSource:"window",mediaSource:"window"};if(isFirefox)return _d(null,rp);var ap={mandatory:{chromeMediaSource,maxWidth:screen.width>1920?screen.width:1920,maxHeight:screen.height>1080?screen.height:1080},optional:[]};if(chromeMediaSource=="desktop"&&!sourceId){np?getSourceIdWithAudio(function(sp,lp){ap.mandatory.chromeMediaSourceId=sp,lp&&(ap.canRequestAudioTrack=!0),_d(sp=="PermissionDeniedError"?sp:null,ap)}):getSourceId(function(sp){ap.mandatory.chromeMediaSourceId=sp,_d(sp=="PermissionDeniedError"?sp:null,ap)});return}chromeMediaSource=="desktop"&&(ap.mandatory.chromeMediaSourceId=sourceId),_d(null,ap)}ScreenCapturing.getScreenConstraints=getScreenConstraints;ScreenCapturing.getScreenConstraintsWithAudio=getScreenConstraintsWithAudio;ScreenCapturing.isChromeExtensionAvailable=isChromeExtensionAvailable;ScreenCapturing.getChromeExtensionStatus=getChromeExtensionStatus;ScreenCapturing.getSourceId=getSourceId;var events={exports:{}},R=typeof Reflect=="object"?Reflect:null,ReflectApply=R&&typeof R.apply=="function"?R.apply:function _d(np,rp,ap){return Function.prototype.apply.call(np,rp,ap)},ReflectOwnKeys;R&&typeof R.ownKeys=="function"?ReflectOwnKeys=R.ownKeys:Object.getOwnPropertySymbols?ReflectOwnKeys=function(np){return Object.getOwnPropertyNames(np).concat(Object.getOwnPropertySymbols(np))}:ReflectOwnKeys=function(np){return Object.getOwnPropertyNames(np)};function ProcessEmitWarning(_d){console&&console.warn&&console.warn(_d)}var NumberIsNaN=Number.isNaN||function _d(np){return np!==np};function EventEmitter$1(){EventEmitter$1.init.call(this)}events.exports=EventEmitter$1;events.exports.once=once;EventEmitter$1.EventEmitter=EventEmitter$1;EventEmitter$1.prototype._events=void 0;EventEmitter$1.prototype._eventsCount=0;EventEmitter$1.prototype._maxListeners=void 0;var defaultMaxListeners=10;function checkListener(_d){if(typeof _d!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof _d)}Object.defineProperty(EventEmitter$1,"defaultMaxListeners",{enumerable:!0,get:function(){return defaultMaxListeners},set:function(_d){if(typeof _d!="number"||_d<0||NumberIsNaN(_d))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+_d+".");defaultMaxListeners=_d}});EventEmitter$1.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};EventEmitter$1.prototype.setMaxListeners=function _d(np){if(typeof np!="number"||np<0||NumberIsNaN(np))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+np+".");return this._maxListeners=np,this};function _getMaxListeners(_d){return _d._maxListeners===void 0?EventEmitter$1.defaultMaxListeners:_d._maxListeners}EventEmitter$1.prototype.getMaxListeners=function _d(){return _getMaxListeners(this)};EventEmitter$1.prototype.emit=function _d(np){for(var rp=[],ap=1;ap<arguments.length;ap++)rp.push(arguments[ap]);var sp=np==="error",lp=this._events;if(lp!==void 0)sp=sp&&lp.error===void 0;else if(!sp)return!1;if(sp){var up;if(rp.length>0&&(up=rp[0]),up instanceof Error)throw up;var cp=new Error("Unhandled error."+(up?" ("+up.message+")":""));throw cp.context=up,cp}var dp=lp[np];if(dp===void 0)return!1;if(typeof dp=="function")ReflectApply(dp,this,rp);else for(var fp=dp.length,pp=arrayClone(dp,fp),ap=0;ap<fp;++ap)ReflectApply(pp[ap],this,rp);return!0};function _addListener(_d,np,rp,ap){var sp,lp,up;if(checkListener(rp),lp=_d._events,lp===void 0?(lp=_d._events=Object.create(null),_d._eventsCount=0):(lp.newListener!==void 0&&(_d.emit("newListener",np,rp.listener?rp.listener:rp),lp=_d._events),up=lp[np]),up===void 0)up=lp[np]=rp,++_d._eventsCount;else if(typeof up=="function"?up=lp[np]=ap?[rp,up]:[up,rp]:ap?up.unshift(rp):up.push(rp),sp=_getMaxListeners(_d),sp>0&&up.length>sp&&!up.warned){up.warned=!0;var cp=new Error("Possible EventEmitter memory leak detected. "+up.length+" "+String(np)+" listeners added. Use emitter.setMaxListeners() to increase limit");cp.name="MaxListenersExceededWarning",cp.emitter=_d,cp.type=np,cp.count=up.length,ProcessEmitWarning(cp)}return _d}EventEmitter$1.prototype.addListener=function _d(np,rp){return _addListener(this,np,rp,!1)};EventEmitter$1.prototype.on=EventEmitter$1.prototype.addListener;EventEmitter$1.prototype.prependListener=function _d(np,rp){return _addListener(this,np,rp,!0)};function onceWrapper(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _onceWrap(_d,np,rp){var ap={fired:!1,wrapFn:void 0,target:_d,type:np,listener:rp},sp=onceWrapper.bind(ap);return sp.listener=rp,ap.wrapFn=sp,sp}EventEmitter$1.prototype.once=function _d(np,rp){return checkListener(rp),this.on(np,_onceWrap(this,np,rp)),this};EventEmitter$1.prototype.prependOnceListener=function _d(np,rp){return checkListener(rp),this.prependListener(np,_onceWrap(this,np,rp)),this};EventEmitter$1.prototype.removeListener=function _d(np,rp){var ap,sp,lp,up,cp;if(checkListener(rp),sp=this._events,sp===void 0)return this;if(ap=sp[np],ap===void 0)return this;if(ap===rp||ap.listener===rp)--this._eventsCount===0?this._events=Object.create(null):(delete sp[np],sp.removeListener&&this.emit("removeListener",np,ap.listener||rp));else if(typeof ap!="function"){for(lp=-1,up=ap.length-1;up>=0;up--)if(ap[up]===rp||ap[up].listener===rp){cp=ap[up].listener,lp=up;break}if(lp<0)return this;lp===0?ap.shift():spliceOne(ap,lp),ap.length===1&&(sp[np]=ap[0]),sp.removeListener!==void 0&&this.emit("removeListener",np,cp||rp)}return this};EventEmitter$1.prototype.off=EventEmitter$1.prototype.removeListener;EventEmitter$1.prototype.removeAllListeners=function _d(np){var rp,ap,sp;if(ap=this._events,ap===void 0)return this;if(ap.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):ap[np]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete ap[np]),this;if(arguments.length===0){var lp=Object.keys(ap),up;for(sp=0;sp<lp.length;++sp)up=lp[sp],up!=="removeListener"&&this.removeAllListeners(up);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(rp=ap[np],typeof rp=="function")this.removeListener(np,rp);else if(rp!==void 0)for(sp=rp.length-1;sp>=0;sp--)this.removeListener(np,rp[sp]);return this};function _listeners(_d,np,rp){var ap=_d._events;if(ap===void 0)return[];var sp=ap[np];return sp===void 0?[]:typeof sp=="function"?rp?[sp.listener||sp]:[sp]:rp?unwrapListeners(sp):arrayClone(sp,sp.length)}EventEmitter$1.prototype.listeners=function _d(np){return _listeners(this,np,!0)};EventEmitter$1.prototype.rawListeners=function _d(np){return _listeners(this,np,!1)};EventEmitter$1.listenerCount=function(_d,np){return typeof _d.listenerCount=="function"?_d.listenerCount(np):listenerCount.call(_d,np)};EventEmitter$1.prototype.listenerCount=listenerCount;function listenerCount(_d){var np=this._events;if(np!==void 0){var rp=np[_d];if(typeof rp=="function")return 1;if(rp!==void 0)return rp.length}return 0}EventEmitter$1.prototype.eventNames=function _d(){return this._eventsCount>0?ReflectOwnKeys(this._events):[]};function arrayClone(_d,np){for(var rp=new Array(np),ap=0;ap<np;++ap)rp[ap]=_d[ap];return rp}function spliceOne(_d,np){for(;np+1<_d.length;np++)_d[np]=_d[np+1];_d.pop()}function unwrapListeners(_d){for(var np=new Array(_d.length),rp=0;rp<np.length;++rp)np[rp]=_d[rp].listener||_d[rp];return np}function once(_d,np){return new Promise(function(rp,ap){function sp(up){_d.removeListener(np,lp),ap(up)}function lp(){typeof _d.removeListener=="function"&&_d.removeListener("error",sp),rp([].slice.call(arguments))}eventTargetAgnosticAddListener(_d,np,lp,{once:!0}),np!=="error"&&addErrorHandlerIfEventEmitter(_d,sp,{once:!0})})}function addErrorHandlerIfEventEmitter(_d,np,rp){typeof _d.on=="function"&&eventTargetAgnosticAddListener(_d,"error",np,rp)}function eventTargetAgnosticAddListener(_d,np,rp,ap){if(typeof _d.on=="function")ap.once?_d.once(np,rp):_d.on(np,rp);else if(typeof _d.addEventListener=="function")_d.addEventListener(np,function sp(lp){ap.once&&_d.removeEventListener(np,sp),rp(lp)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof _d)}var eventsExports=events.exports,inherits_browser={exports:{}};typeof Object.create=="function"?inherits_browser.exports=function(np,rp){rp&&(np.super_=rp,np.prototype=Object.create(rp.prototype,{constructor:{value:np,enumerable:!1,writable:!0,configurable:!0}}))}:inherits_browser.exports=function(np,rp){if(rp){np.super_=rp;var ap=function(){};ap.prototype=rp.prototype,np.prototype=new ap,np.prototype.constructor=np}};var inherits_browserExports=inherits_browser.exports,packers={},JsonRPC$1={};function pack$1(_d,np){var rp={jsonrpc:"2.0"};if(_d.method)rp.method=_d.method,_d.params&&(rp.params=_d.params),np!=null&&(rp.id=np);else if(np!=null){if(_d.error){if(_d.result!==void 0)throw new TypeError("Both result and error are defined");rp.error=_d.error}else if(_d.result!==void 0)rp.result=_d.result;else throw new TypeError("No result or error is defined");rp.id=np}return JSON.stringify(rp)}function unpack$1(_d){var np=_d;(typeof _d=="string"||_d instanceof String)&&(np=JSON.parse(_d));var rp=np.jsonrpc;if(rp!=="2.0")throw new TypeError("Invalid JsonRPC version '"+rp+"': "+_d);if(np.method==null){if(np.id==null)throw new TypeError("Invalid message: "+_d);var ap=np.result!==void 0,sp=np.error!==void 0;if(ap&&sp)throw new TypeError("Both result and error are defined: "+_d);if(!ap&&!sp)throw new TypeError("No result or error is defined: "+_d);np.ack=np.id,delete np.id}return np}JsonRPC$1.pack=pack$1;JsonRPC$1.unpack=unpack$1;var XmlRPC$1={};function pack(_d){throw new TypeError("Not yet implemented")}function unpack(_d){throw new TypeError("Not yet implemented")}XmlRPC$1.pack=pack;XmlRPC$1.unpack=unpack;var JsonRPC=JsonRPC$1,XmlRPC=XmlRPC$1;packers.JsonRPC=JsonRPC;packers.XmlRPC=XmlRPC;function Mapper(){var _d={};this.forEach=function(np){for(var rp in _d){var ap=_d[rp];for(var sp in ap)np(ap[sp])}},this.get=function(np,rp){var ap=_d[rp];if(ap!=null)return ap[np]},this.remove=function(np,rp){var ap=_d[rp];if(ap!=null){delete ap[np];for(var sp in ap)return!1;delete _d[rp]}},this.set=function(np,rp,ap){if(np==null)return this.remove(rp,ap);var sp=_d[ap];sp==null&&(_d[ap]=sp={}),sp[rp]=np}}Mapper.prototype.pop=function(_d,np){var rp=this.get(_d,np);if(rp!=null)return this.remove(_d,np),rp};var Mapper_1=Mapper,clients={},webSocketWithReconnection,hasRequiredWebSocketWithReconnection;function requireWebSocketWithReconnection(){if(hasRequiredWebSocketWithReconnection)return webSocketWithReconnection;hasRequiredWebSocketWithReconnection=1;var _d=OpenViduLogger$1.OpenViduLogger,np=_d.getInstance(),rp=2e3,ap=3e3,sp=3;function lp(up){var cp=!1,dp,fp=up.uri,pp=!1,hp=new WebSocket(fp);hp.onopen=function(){np.debug("WebSocket connected to "+fp),up.onconnected&&up.onconnected()},hp.onerror=function(Sp){np.error("Could not connect to "+fp+" (invoking onerror if defined)",Sp),up.onerror&&up.onerror(Sp)};var mp=function(){hp.readyState===sp?cp?np.debug("Connection closed by user"):up.ismasternodecrashed()?np.error("Master Node has crashed. Stopping reconnection process"):(np.debug("Connection closed unexpectedly. Reconnecting..."),gp(rp,1)):np.debug("Close callback from previous websocket. Ignoring it")};hp.onclose=mp;function gp(Sp,yp){if(np.debug("reconnect (attempt #"+yp+", max="+Sp+")"),yp===1){if(pp){np.warn("Trying to reconnect when already reconnecting... Ignoring this reconnection.");return}else pp=!0;up.onreconnecting&&up.onreconnecting()}xp(Sp,yp)}function vp(Sp){var yp=new URLSearchParams(new URL(Sp).search);return yp.has("reconnect")||(Sp=Array.from(yp).length>0?Sp+"&reconnect=true":Sp+"?reconnect=true"),Sp}function xp(Sp,yp){np.debug("Reconnection attempt #"+yp),hp.close(4104,"Connection closed for reconnection"),fp=vp(fp),hp=new WebSocket(fp),hp.onopen=function(){np.debug("Reconnected to "+fp+" after "+yp+" attempts..."),pp=!1,dp(),up.onreconnected&&up.onreconnected(),hp.onclose=mp},hp.onerror=function(bp){np.warn("Reconnection error: ",bp),yp===Sp?up.ondisconnect&&up.ondisconnect():setTimeout(function(){gp(Sp,yp+1)},ap)}}this.close=function(Sp,yp){cp=!0,hp.close(Sp,yp)},this.reconnectWs=function(){np.debug("reconnectWs"),gp(rp,1)},this.send=function(Sp){hp.send(Sp)},this.addEventListener=function(Sp,yp){dp=function(){hp.addEventListener(Sp,yp)},dp()},this.getReadyState=function(){return hp.readyState}}return webSocketWithReconnection=lp,webSocketWithReconnection}var jsonrpcclient,hasRequiredJsonrpcclient;function requireJsonrpcclient(){if(hasRequiredJsonrpcclient)return jsonrpcclient;hasRequiredJsonrpcclient=1;var _d=requireKurentoJsonrpc(),np=requireWebSocketWithReconnection(),rp=OpenViduLogger$1.OpenViduLogger;Date.now=Date.now||function(){return+new Date};var ap=5e3,sp="RECONNECTING",lp="CONNECTED",up="DISCONNECTED",cp=rp.getInstance();function dp(fp){var pp=this,hp=fp.ws,mp=-1,gp=0,vp=!0,xp=!1,Sp,yp=up,bp=hp.onreconnecting,Ep=hp.onreconnected,wp=hp.onconnected,_p=hp.onerror;fp.rpc.pull=function(Ap,Dp){Dp.reply(null,"push")},hp.onreconnecting=function(){if(cp.debug("--------- ONRECONNECTING -----------"),yp===sp){cp.error("Websocket already in RECONNECTING state when receiving a new ONRECONNECTING message. Ignoring it");return}Mp(),yp=sp,bp&&bp()},hp.onreconnected=function(){if(cp.debug("--------- ONRECONNECTED -----------"),yp===lp){cp.error("Websocket already in CONNECTED state when receiving a new ONRECONNECTED message. Ignoring it");return}yp=lp,Pp(),Ep&&Ep()},hp.onconnected=function(){if(cp.debug("--------- ONCONNECTED -----------"),yp===lp){cp.error("Websocket already in CONNECTED state when receiving a new ONCONNECTED message. Ignoring it");return}yp=lp,vp=!0,jp(),wp&&wp()},hp.onerror=function(Ap){cp.debug("--------- ONERROR -----------"),yp=up,Mp(),_p&&_p(Ap)};var Cp=new np(hp);cp.debug("Connecting websocket to URI: "+hp.uri);var $p={request_timeout:fp.rpc.requestTimeout,ping_request_timeout:fp.rpc.heartbeatRequestTimeout},Rp=new _d(_d.packers.JsonRPC,$p,Cp,function(Ap){cp.debug("Received request: "+JSON.stringify(Ap));try{var Dp=fp.rpc[Ap.method];Dp===void 0?cp.error("Method "+Ap.method+" not registered in client"):Dp(Ap.params,Ap)}catch(Fp){cp.error("Exception processing request: "+JSON.stringify(Ap)),cp.error(Fp)}});this.send=function(Ap,Dp,Fp){var Ip=Date.now();Rp.encode(Ap,Dp,function(kp,Tp){if(kp){try{cp.error("ERROR:"+kp.message+" in Request: method:"+Ap+" params:"+JSON.stringify(Dp)+" request:"+kp.request),kp.data&&cp.error("ERROR DATA:"+JSON.stringify(kp.data))}catch{}kp.requestTime=Ip}Fp&&(Tp!=null&&Tp.value!=="pong"&&cp.debug("Response: "+JSON.stringify(Tp)),Fp(kp,Tp))})};function Pp(){cp.debug("notReconnectIfNumLessThan = "+gp+" (old="+mp+")"),mp=gp}function Op(){if(vp){var Ap=null;(gp==0||gp==mp)&&(Ap={interval:fp.heartbeat||ap}),gp++,pp.send("ping",Ap,function(Dp){return function(Fp,Ip){Fp&&(cp.debug("Error in ping request #"+Dp+" ("+Fp.message+")"),Dp>mp&&(vp=!1,Pp(),cp.debug("Server did not respond to ping message #"+Dp+". Reconnecting... "),Cp.reconnectWs()))}}(gp))}else cp.debug("Trying to send ping, but ping is not enabled")}function jp(){xp||(cp.debug("Starting ping (if configured)"),xp=!0,fp.heartbeat!=null&&(Sp=setInterval(Op,fp.heartbeat),Op()))}function Mp(){clearInterval(Sp),xp=!1,vp=!1,gp=-1,Rp.cancel()}this.close=function(Ap,Dp){cp.debug("Closing  with code: "+Ap+" because: "+Dp),Sp!=null&&(cp.debug("Clearing ping interval"),clearInterval(Sp)),xp=!1,vp=!1,Cp.close(Ap,Dp)},this.reconnect=function(){Cp.reconnectWs()},this.resetPing=function(){vp=!0,gp=0,jp()},this.getReadyState=function(){return Cp.getReadyState()}}return jsonrpcclient=dp,jsonrpcclient}var hasRequiredClients;function requireClients(){if(hasRequiredClients)return clients;hasRequiredClients=1;var _d=requireJsonrpcclient();return clients.JsonRpcClient=_d,clients}var transports={},hasRequiredTransports;function requireTransports(){if(hasRequiredTransports)return transports;hasRequiredTransports=1;var _d=requireWebSocketWithReconnection();return transports.WebSocketWithReconnection=_d,transports}var kurentoJsonrpc,hasRequiredKurentoJsonrpc;function requireKurentoJsonrpc(){if(hasRequiredKurentoJsonrpc)return kurentoJsonrpc;hasRequiredKurentoJsonrpc=1;var _d=!1;if(Object.defineProperty)try{Object.defineProperty({},"x",{})}catch{_d=!0}Function.prototype.bind||(Function.prototype.bind=function(mp){if(typeof this!="function")throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var gp=Array.prototype.slice.call(arguments,1),vp=this,xp=function(){},Sp=function(){return vp.apply(this instanceof xp&&mp?this:mp,gp.concat(Array.prototype.slice.call(arguments)))};return xp.prototype=this.prototype,Sp.prototype=new xp,Sp});var np=eventsExports.EventEmitter,rp=inherits_browserExports,ap=packers,sp=Mapper_1,lp=5e3;function up(mp){if(!mp)return{};for(var gp in mp){var vp=mp[gp];typeof vp=="string"&&(mp[gp]={response:vp})}return mp}function cp(mp){if(mp){if(mp instanceof Function)return{send:mp};if(mp.send instanceof Function)return mp;if(mp.postMessage instanceof Function)return mp.send=mp.postMessage,mp;if(mp.write instanceof Function)return mp.send=mp.write,mp;if(mp.onmessage===void 0&&!(mp.pause instanceof Function))throw new SyntaxError("Transport is not a function nor a valid object")}}function dp(mp,gp){_d?(this.method=mp,this.params=gp):(Object.defineProperty(this,"method",{value:mp,enumerable:!0}),Object.defineProperty(this,"params",{value:gp,enumerable:!0}))}function fp(mp,gp,vp,xp){var Sp=this;if(!mp)throw new SyntaxError("Packer is not defined");if(!mp.pack||!mp.unpack)throw new SyntaxError("Packer is invalid");var yp=up(mp.responseMethods);if(gp instanceof Function){if(vp!=null)throw new SyntaxError("There can't be parameters after onRequest");xp=gp,vp=void 0,gp=void 0}if(gp&&gp.send instanceof Function){if(vp&&!(vp instanceof Function))throw new SyntaxError("Only a function can be after transport");xp=vp,vp=gp,gp=void 0}if(vp instanceof Function){if(xp!=null)throw new SyntaxError("There can't be parameters after onRequest");xp=vp,vp=void 0}if(vp&&vp.send instanceof Function&&xp&&!(xp instanceof Function))throw new SyntaxError("Only a function can be after transport");gp=gp||{},np.call(this),xp&&this.on("request",xp),_d?this.peerID=gp.peerID:Object.defineProperty(this,"peerID",{value:gp.peerID});var bp=gp.max_retries||0;function Ep(kp){Sp.decode(kp.data||kp)}this.getTransport=function(){return vp},this.setTransport=function(kp){vp&&(vp.removeEventListener?vp.removeEventListener("message",Ep):vp.removeListener&&vp.removeListener("data",Ep)),kp&&(kp.addEventListener?kp.addEventListener("message",Ep):kp.addListener&&kp.addListener("data",Ep)),vp=cp(kp)},_d||Object.defineProperty(this,"transport",{get:this.getTransport.bind(this),set:this.setTransport.bind(this)}),this.setTransport(vp);var wp=gp.request_timeout||lp,_p=gp.ping_request_timeout||wp,Cp=gp.response_timeout||lp,$p=gp.duplicates_timeout||lp,Rp=0,Pp=new sp,Op=new sp,jp=new sp,Mp={};function Ap(kp,Tp,Np){var Lp={message:kp,timeout:setTimeout(function(){Op.remove(Tp,Np)},Cp)};Op.set(Lp,Tp,Np)}function Dp(kp,Tp){var Np=setTimeout(function(){jp.remove(kp,Tp)},$p);jp.set(Np,kp,Tp)}function Fp(kp,Tp,Np,Lp,Vp){dp.call(this,kp,Tp),this.getTransport=function(){return Vp},this.setTransport=function(Up){Vp=cp(Up)},_d||Object.defineProperty(this,"transport",{get:this.getTransport.bind(this),set:this.setTransport.bind(this)});var zp=Op.get(Np,Lp);Vp||Sp.getTransport()||(_d?this.duplicated=!!zp:Object.defineProperty(this,"duplicated",{value:!!zp}));var Wp=yp[kp];this.pack=mp.pack.bind(mp,this,Np),this.reply=function(Up,qp,Bp){if(Up instanceof Function||Up&&Up.send instanceof Function){if(qp!=null)throw new SyntaxError("There can't be parameters after callback");Bp=Up,qp=null,Up=void 0}else if(qp instanceof Function||qp&&qp.send instanceof Function){if(Bp!=null)throw new SyntaxError("There can't be parameters after callback");Bp=qp,qp=null}Bp=cp(Bp),zp&&clearTimeout(zp.timeout),Lp!=null&&(Up&&(Up.dest=Lp),qp&&(qp.dest=Lp));var Yp;if(Up||qp!=null){if(Sp.peerID!=null&&(Up?Up.from=Sp.peerID:qp.from=Sp.peerID),Wp)if(Wp.error==null&&Up)Yp={error:Up};else{var Xp=Up?Wp.error:Wp.response;Yp={method:Xp,params:Up||qp}}else Yp={error:Up,result:qp};Yp=mp.pack(Yp,Np)}else zp?Yp=zp.message:Yp=mp.pack({result:null},Np);return Ap(Yp,Np,Lp),Bp=Bp||this.getTransport()||Sp.getTransport(),Bp?Bp.send(Yp):Yp}}rp(Fp,dp);function Ip(kp){var Tp=Mp[kp];if(Tp){delete Mp[kp];var Np=Pp.pop(Tp.id,Tp.dest);Np&&(clearTimeout(Np.timeout),Dp(Tp.id,Tp.dest))}}this.cancel=function(kp){if(kp)return Ip(kp);for(var kp in Mp)Ip(kp)},this.close=function(){var kp=this.getTransport();kp&&kp.close&&kp.close(4003,"Cancel request"),this.cancel(),jp.forEach(clearTimeout),Op.forEach(function(Tp){clearTimeout(Tp.timeout)})},this.encode=function(kp,Tp,Np,Lp,Vp){if(Tp instanceof Function){if(Np!=null)throw new SyntaxError("There can't be parameters after callback");Vp=Tp,Lp=void 0,Np=void 0,Tp=void 0}else if(Np instanceof Function){if(Lp!=null)throw new SyntaxError("There can't be parameters after callback");Vp=Np,Lp=void 0,Np=void 0}else if(Lp instanceof Function){if(Vp!=null)throw new SyntaxError("There can't be parameters after callback");Vp=Lp,Lp=void 0}Sp.peerID!=null&&(Tp=Tp||{},Tp.from=Sp.peerID),Np!=null&&(Tp=Tp||{},Tp.dest=Np);var zp={method:kp,params:Tp};if(Vp){let Jp=function(tm,om){Sp.cancel(zp),Vp(tm,om)},im=function(tm){var om=kp==="ping"?_p:wp;return qp.timeout=setTimeout(Gp,om*Math.pow(2,Up++)),Mp[zp]={id:Wp,dest:Np},Pp.set(qp,Wp,Np),tm=tm||Bp||Sp.getTransport(),tm?tm.send(zp):zp},Zp=function(tm){tm=cp(tm),console.warn(Up+" retry for request message:",zp);var om=jp.pop(Wp,Np);return clearTimeout(om),im(tm)},Gp=function(){if(Up<bp)return Zp(Lp);var tm=new Error("Request has timed out");tm.request=zp,tm.retry=Zp,Jp(tm)};var Yp=Jp,Xp=im,Qp=Zp,am=Gp,Wp=Rp++,Up=0;zp=mp.pack(zp,Wp);var qp={message:zp,callback:Jp,responseMethods:yp[kp]||{}},Bp=cp(Lp);return im(Lp)}return zp=mp.pack(zp),Lp=Lp||this.getTransport(),Lp?Lp.send(zp):zp},this.decode=function(kp,Tp){if(!kp)throw new TypeError("Message is not defined");try{kp=mp.unpack(kp)}catch(Gp){return console.debug(Gp,kp)}var Np=kp.id,Lp=kp.ack,Vp=kp.method,zp=kp.params||{},Wp=zp.from,Up=zp.dest;if(Sp.peerID!=null&&Wp==Sp.peerID)return;if(Np==null&&Lp==null){var qp=new dp(Vp,zp);return Sp.emit("request",qp)?void 0:qp}function Bp(){if(Tp=cp(Tp)||Sp.getTransport(),Tp){var Gp=Op.get(Np,Wp);if(Gp)return Tp.send(Gp.message)}var tm=Np??Lp,om=new Fp(Vp,zp,tm,Wp,Tp);if(!Sp.emit("request",om))return om}function Yp(Gp,tm,om){Gp.callback(tm,om)}function Xp(Gp){console.warn("Response already processed",kp),clearTimeout(Gp),Dp(Lp,Wp)}if(Vp){if(Up==null||Up==Sp.peerID){var Zp=Pp.get(Lp,Wp);if(Zp){var Qp=Zp.responseMethods;return Vp==Qp.error?Yp(Zp,zp):Vp==Qp.response?Yp(Zp,null,zp):Bp()}var am=jp.get(Lp,Wp);if(am)return Xp(am)}return Bp()}var Jp=kp.error,im=kp.result;if(!(Jp&&Jp.dest&&Jp.dest!=Sp.peerID)&&!(im&&im.dest&&im.dest!=Sp.peerID)){var Zp=Pp.get(Lp,Wp);if(!Zp){var am=jp.get(Lp,Wp);return am?Xp(am):console.warn("No callback was defined for this message",kp)}Yp(Zp,Jp,im)}}}rp(fp,np),fp.RpcNotification=dp,kurentoJsonrpc=fp;var pp=requireClients(),hp=requireTransports();return fp.clients=pp,fp.clients.transports=hp,fp.packers=ap,kurentoJsonrpc}const author="OpenVidu",dependencies={freeice:"2.2.2",hark:"1.2.3",jsnlog:"2.30.0",mime:"3.0.0",platform:"1.3.6",semver:"7.3.8",uuid:"9.0.0","wolfy87-eventemitter":"5.2.9",events:"3.3.0",inherits:"2.0.4"},description="OpenVidu Browser",devDependencies={"@types/node":"18.11.9","@types/platform":"1.3.4",browserify:"17.0.0",grunt:"1.5.3","grunt-cli":"1.4.3","grunt-contrib-copy":"1.0.0","grunt-contrib-sass":"2.0.0","grunt-contrib-uglify":"5.2.2","grunt-contrib-watch":"1.1.0","grunt-postcss":"0.9.0","grunt-string-replace":"1.3.3","grunt-ts":"6.0.0-beta.22",terser:"5.15.1",tsify:"5.0.4",tslint:"6.1.3",typedoc:"0.23.21",typescript:"4.9.3"},license="Apache-2.0",main="lib/index.js",name="openvidu-browser",repository={type:"git",url:"git://github.com/OpenVidu/openvidu"},scripts={browserify:"VERSION=${VERSION:-dev}; mkdir -p static/js/ && cd src && ../node_modules/browserify/bin/cmd.js Main.ts -p [ tsify ] --exclude kurento-browser-extensions --debug -o ../static/js/openvidu-browser-$VERSION.js -v","browserify-prod":"VERSION=${VERSION:-dev}; mkdir -p static/js/ && cd src && ../node_modules/browserify/bin/cmd.js --debug Main.ts -p [ tsify ] --exclude kurento-browser-extensions | ../node_modules/terser/bin/terser --source-map content=inline --output ../static/js/openvidu-browser-$VERSION.min.js",build:"cd src/OpenVidu && ./../../node_modules/typescript/bin/tsc && cd ../.. && ./node_modules/typescript/bin/tsc --declaration src/index.ts --outDir ./lib --sourceMap --target es5 --lib dom,es5,es2015.promise,scripthost && rm -rf ./ts4.4 && mkdir -p ./ts4.4/lib && cp -r ./lib ./ts4.4 && find ./ts4.4/lib -type f ! -iname '*.d.ts' -delete && ./config/replace_for_ts44.sh",docs:"./generate-docs.sh"},types="lib/index.d.ts",typesVersions={"<4.4":{"*":["ts4.4/*"]}},version="2.29.1",require$$14={author,dependencies,description,devDependencies,license,main,name,repository,scripts,types,typesVersions,version};var __awaiter=commonjsGlobal&&commonjsGlobal.__awaiter||function(_d,np,rp,ap){function sp(lp){return lp instanceof rp?lp:new rp(function(up){up(lp)})}return new(rp||(rp=Promise))(function(lp,up){function cp(pp){try{fp(ap.next(pp))}catch(hp){up(hp)}}function dp(pp){try{fp(ap.throw(pp))}catch(hp){up(hp)}}function fp(pp){pp.done?lp(pp.value):sp(pp.value).then(cp,dp)}fp((ap=ap.apply(_d,np||[])).next())})},__generator=commonjsGlobal&&commonjsGlobal.__generator||function(_d,np){var rp={label:0,sent:function(){if(lp[0]&1)throw lp[1];return lp[1]},trys:[],ops:[]},ap,sp,lp,up;return up={next:cp(0),throw:cp(1),return:cp(2)},typeof Symbol=="function"&&(up[Symbol.iterator]=function(){return this}),up;function cp(fp){return function(pp){return dp([fp,pp])}}function dp(fp){if(ap)throw new TypeError("Generator is already executing.");for(;up&&(up=0,fp[0]&&(rp=0)),rp;)try{if(ap=1,sp&&(lp=fp[0]&2?sp.return:fp[0]?sp.throw||((lp=sp.return)&&lp.call(sp),0):sp.next)&&!(lp=lp.call(sp,fp[1])).done)return lp;switch(sp=0,lp&&(fp=[fp[0]&2,lp.value]),fp[0]){case 0:case 1:lp=fp;break;case 4:return rp.label++,{value:fp[1],done:!1};case 5:rp.label++,sp=fp[1],fp=[0];continue;case 7:fp=rp.ops.pop(),rp.trys.pop();continue;default:if(lp=rp.trys,!(lp=lp.length>0&&lp[lp.length-1])&&(fp[0]===6||fp[0]===2)){rp=0;continue}if(fp[0]===3&&(!lp||fp[1]>lp[0]&&fp[1]<lp[3])){rp.label=fp[1];break}if(fp[0]===6&&rp.label<lp[1]){rp.label=lp[1],lp=fp;break}if(lp&&rp.label<lp[2]){rp.label=lp[2],rp.ops.push(fp);break}lp[2]&&rp.ops.pop(),rp.trys.pop();continue}fp=np.call(_d,rp)}catch(pp){fp=[6,pp],sp=0}finally{ap=lp=0}if(fp[0]&5)throw fp[1];return{value:fp[0]?fp[1]:void 0,done:!0}}};Object.defineProperty(OpenVidu$1,"__esModule",{value:!0});OpenVidu$1.OpenVidu=void 0;var LocalRecorder_1=LocalRecorder$1,Publisher_1=requirePublisher(),Session_1=requireSession(),SessionDisconnectedEvent_1=SessionDisconnectedEvent$1,StreamPropertyChangedEvent_1=StreamPropertyChangedEvent$1,OpenViduError_1=OpenViduError,VideoInsertMode_1=VideoInsertMode,OpenViduLogger_1=OpenViduLogger$1,Platform_1=Platform,screenSharingAuto=ScreenCapturingAuto,screenSharing=ScreenCapturing,OpenViduLoggerConfiguration_1=OpenViduLoggerConfiguration,EventEmitter=EventEmitterExports,RpcBuilder=requireKurentoJsonrpc(),packageJson=require$$14,logger=OpenViduLogger_1.OpenViduLogger.getInstance(),platform,OpenVidu=function(){function _d(){var np=this;this.masterNodeHasCrashed=!1,this.publishers=[],this.secret="",this.recorder=!1,this.stt=!1,this.life=-1,this.advancedConfiguration={},this.webrtcStatsInterval=-1,this.sendBrowserLogs=OpenViduLoggerConfiguration_1.OpenViduLoggerConfiguration.disabled,this.isAtLeastPro=!1,this.isEnterprise=!1,this.ee=new EventEmitter,platform=Platform_1.PlatformUtils.getInstance(),this.libraryVersion=packageJson.version,logger.info("OpenVidu initialized"),logger.info("Platform detected: "+platform.getDescription()),logger.info("openvidu-browser version: "+this.libraryVersion),(platform.isMobileDevice()||platform.isReactNative())&&this.onOrientationChanged(function(){np.publishers.forEach(function(rp){rp.stream.isLocalStreamPublished&&rp.stream&&rp.stream.hasVideo&&np.sendNewVideoDimensionsIfRequired(rp,"deviceRotated",75,10)})})}return _d.prototype.initSession=function(){return this.session=new Session_1.Session(this),this.session},_d.prototype.initPublisher=function(np,rp,ap){var sp;rp&&typeof rp!="function"?(sp=rp,sp={audioSource:typeof sp.audioSource<"u"?sp.audioSource:void 0,frameRate:typeof MediaStreamTrack<"u"&&sp.videoSource instanceof MediaStreamTrack?void 0:typeof sp.frameRate<"u"?sp.frameRate:void 0,insertMode:typeof sp.insertMode<"u"?typeof sp.insertMode=="string"?VideoInsertMode_1.VideoInsertMode[sp.insertMode]:sp.insertMode:VideoInsertMode_1.VideoInsertMode.APPEND,mirror:typeof sp.mirror<"u"?sp.mirror:!0,publishAudio:typeof sp.publishAudio<"u"?sp.publishAudio:!0,publishVideo:typeof sp.publishVideo<"u"?sp.publishVideo:!0,resolution:typeof MediaStreamTrack<"u"&&sp.videoSource instanceof MediaStreamTrack?void 0:typeof sp.resolution<"u"?sp.resolution:"640x480",videoSource:typeof sp.videoSource<"u"?sp.videoSource:void 0,videoSimulcast:sp.videoSimulcast,filter:sp.filter}):sp={insertMode:VideoInsertMode_1.VideoInsertMode.APPEND,mirror:!0,publishAudio:!0,publishVideo:!0,resolution:"640x480"};var lp=new Publisher_1.Publisher(np,sp,this),up;return rp&&typeof rp=="function"?up=rp:ap&&(up=ap),lp.initialize().then(function(){up!==void 0&&up(void 0),lp.emitEvent("accessAllowed",[])}).catch(function(cp){up!==void 0&&up(cp),lp.emitEvent("accessDenied",[cp])}),this.publishers.push(lp),lp},_d.prototype.initPublisherAsync=function(np,rp){var ap=this;return new Promise(function(sp,lp){var up,cp=function(dp){return dp?lp(dp):sp(up)};rp?up=ap.initPublisher(np,rp,cp):up=ap.initPublisher(np,cp)})},_d.prototype.initLocalRecorder=function(np){return new LocalRecorder_1.LocalRecorder(np)},_d.prototype.checkSystemRequirements=function(){return platform.isIPhoneOrIPad()?platform.isIOSWithSafari()||platform.isChromeMobileBrowser()||platform.isFirefoxMobileBrowser()||platform.isOperaMobileBrowser()||platform.isEdgeMobileBrowser()||platform.isIonicIos():platform.isChromeBrowser()||platform.isChromeMobileBrowser()||platform.isFirefoxBrowser()||platform.isFirefoxMobileBrowser()||platform.isOperaBrowser()||platform.isOperaMobileBrowser()||platform.isEdgeBrowser()||platform.isEdgeMobileBrowser()||platform.isSamsungBrowser()||platform.isSafariBrowser()||platform.isAndroidBrowser()||platform.isElectron()||platform.isNodeJs()||platform.isMotorolaEdgeDevice()},_d.prototype.checkScreenSharingCapabilities=function(){return platform.canScreenShare()},_d.prototype.getDevices=function(){return new Promise(function(np,rp){navigator.mediaDevices.enumerateDevices().then(function(ap){var sp,lp=[];if(platform.isIonicAndroid()&&typeof cordova<"u"&&(!((sp=cordova==null?void 0:cordova.plugins)===null||sp===void 0)&&sp.EnumerateDevicesPlugin))cordova.plugins.EnumerateDevicesPlugin.getEnumerateDevices().then(function(up){var cp=[],dp=[],fp=[];return cp=up.filter(function(pp){return pp.kind==="audioinput"}),dp=ap.filter(function(pp){return pp.kind==="videoinput"}),fp=ap.filter(function(pp){return pp.kind==="audioinput"}),dp.forEach(function(pp,hp){if(pp.label)lp.push({kind:pp.kind,deviceId:pp.deviceId,label:pp.label});else{var mp="";hp===0?mp="Front Camera":hp===1?mp="Back Camera":mp="Unknown Camera",lp.push({kind:pp.kind,deviceId:pp.deviceId,label:mp})}}),fp.forEach(function(pp,hp){if(pp.label)lp.push({kind:pp.kind,deviceId:pp.deviceId,label:pp.label});else{var mp="";switch(hp){case 0:mp="Default";break;case 1:var gp=cp.filter(function(Sp){return Sp.label.includes("Built")})[0];mp=gp?gp.label:"Built-in Microphone";break;case 2:var vp=cp.filter(function(Sp){return Sp.label.includes("Wired")})[0];vp?mp=vp.label:mp="Headset earpiece";break;case 3:var xp=cp.filter(function(Sp){return Sp.label.includes("Bluetooth")})[0];mp=xp?xp.label:"Wireless";break;default:mp="Unknown Microphone";break}lp.push({kind:pp.kind,deviceId:pp.deviceId,label:mp})}}),np(lp)});else return ap.forEach(function(up){(up.kind==="audioinput"||up.kind==="videoinput")&&lp.push({kind:up.kind,deviceId:up.deviceId,label:up.label})}),np(lp)}).catch(function(ap){return logger.error("Error getting devices",ap),rp(ap)})})},_d.prototype.getUserMedia=function(np){var rp,ap;return __awaiter(this,void 0,void 0,function(){var sp,lp,up,fp,cp,hp,mp,dp,fp,pp,hp,mp,gp,vp=this;return __generator(this,function(xp){switch(xp.label){case 0:sp=function(Sp,yp){return __awaiter(vp,void 0,void 0,function(){var bp,Ep,wp,_p;return __generator(this,function(Cp){switch(Cp.label){case 0:bp=yp.audio===void 0?!0:yp.audio,Ep={audio:bp,video:!1},Cp.label=1;case 1:return Cp.trys.push([1,3,,4]),[4,navigator.mediaDevices.getUserMedia(Ep)];case 2:return wp=Cp.sent(),Sp.addTrack(wp.getAudioTracks()[0]),[2,Sp];case 3:throw _p=Cp.sent(),Sp.getAudioTracks().forEach(function($p){$p.stop()}),Sp.getVideoTracks().forEach(function($p){$p.stop()}),this.generateAudioDeviceError(_p,Ep);case 4:return[2]}})})},xp.label=1;case 1:return xp.trys.push([1,20,,21]),[4,this.generateMediaConstraints(np)];case 2:return lp=xp.sent(),lp.videoTrack&&lp.audioTrack||lp.audioTrack&&((rp=lp.constraints)===null||rp===void 0?void 0:rp.video)===!1||lp.videoTrack&&((ap=lp.constraints)===null||ap===void 0?void 0:ap.audio)===!1?[2,this.addAlreadyProvidedTracks(lp,new MediaStream)]:[3,3];case 3:if(lp.videoTrack&&delete lp.constraints.video,lp.audioTrack&&delete lp.constraints.audio,up=!1,typeof np.videoSource!="string")return[3,12];if(!(np.videoSource==="screen"||np.videoSource==="window"||platform.isElectron()&&np.videoSource.startsWith("screen:")))return[3,12];if(up=!lp.audioTrack&&np.audioSource!==null&&np.audioSource!==!1,!(navigator.mediaDevices.getDisplayMedia&&!platform.isElectron()))return[3,11];xp.label=4;case 4:return xp.trys.push([4,9,,10]),[4,navigator.mediaDevices.getDisplayMedia({video:!0,audio:np.audioSource==="screen"})];case 5:return fp=xp.sent(),this.addAlreadyProvidedTracks(lp,fp),up?[4,sp(fp,lp.constraints)]:[3,7];case 6:return[2,xp.sent()];case 7:return[2,fp];case 8:return[3,10];case 9:throw cp=xp.sent(),hp=OpenViduError_1.OpenViduErrorName.SCREEN_CAPTURE_DENIED,mp=cp.toString(),new OpenViduError_1.OpenViduError(hp,mp);case 10:return[3,11];case 11:return[3,12];case 12:dp=up?{video:lp.constraints.video}:lp.constraints,xp.label=13;case 13:return xp.trys.push([13,18,,19]),[4,navigator.mediaDevices.getUserMedia(dp)];case 14:return fp=xp.sent(),this.addAlreadyProvidedTracks(lp,fp),up?[4,sp(fp,lp.constraints)]:[3,16];case 15:return[2,xp.sent()];case 16:return[2,fp];case 17:return[3,19];case 18:throw pp=xp.sent(),hp=void 0,mp=pp.toString(),np.videoSource!=="screen"?hp=OpenViduError_1.OpenViduErrorName.DEVICE_ACCESS_DENIED:hp=OpenViduError_1.OpenViduErrorName.SCREEN_CAPTURE_DENIED,new OpenViduError_1.OpenViduError(hp,mp);case 19:return[3,21];case 20:throw gp=xp.sent(),gp;case 21:return[2]}})})},_d.prototype.enableProdMode=function(){logger.enableProdMode()},_d.prototype.setAdvancedConfiguration=function(np){this.advancedConfiguration=np},_d.prototype.onOrientationChanged=function(np){globalThis.addEventListener("orientationchange",np)},_d.prototype.sendNewVideoDimensionsIfRequired=function(np,rp,ap,sp){var lp=this,up,cp,dp,fp,pp=0,hp=((cp=(up=np==null?void 0:np.stream)===null||up===void 0?void 0:up.videoDimensions)===null||cp===void 0?void 0:cp.width)||0,mp=((fp=(dp=np==null?void 0:np.stream)===null||dp===void 0?void 0:dp.videoDimensions)===null||fp===void 0?void 0:fp.height)||0,gp=setInterval(function(){pp++,pp>sp&&clearTimeout(gp),np.getVideoDimensions().then(function(vp){(vp.width!==hp||vp.height!==mp)&&(clearTimeout(gp),lp.sendVideoDimensionsChangedEvent(np,rp,hp,mp,vp.width,vp.height))})},ap)},_d.prototype.sendVideoDimensionsChangedEvent=function(np,rp,ap,sp,lp,up){var cp=this;np.stream.videoDimensions={width:lp||0,height:up||0},this.sendRequest("streamPropertyChanged",{streamId:np.stream.streamId,property:"videoDimensions",newValue:JSON.stringify(np.stream.videoDimensions),reason:rp},function(dp,fp){dp?logger.error("Error sending 'streamPropertyChanged' event",dp):(cp.session.emitEvent("streamPropertyChanged",[new StreamPropertyChangedEvent_1.StreamPropertyChangedEvent(cp.session,np.stream,"videoDimensions",np.stream.videoDimensions,{width:ap,height:sp},rp)]),np.emitEvent("streamPropertyChanged",[new StreamPropertyChangedEvent_1.StreamPropertyChangedEvent(np,np.stream,"videoDimensions",np.stream.videoDimensions,{width:ap,height:sp},rp)]),cp.session.sendVideoData(np))})},_d.prototype.sendTrackChangedEvent=function(np,rp,ap,sp){var lp=this,up={label:rp},cp={label:ap},dp="trackReplaced";np.stream.isLocalStreamPublished?this.sendRequest("streamPropertyChanged",{streamId:np.stream.streamId,property:sp,newValue:cp,reason:dp},function(fp,pp){fp?logger.error("Error sending 'streamPropertyChanged' event",fp):(lp.session.emitEvent("streamPropertyChanged",[new StreamPropertyChangedEvent_1.StreamPropertyChangedEvent(lp.session,np.stream,sp,cp,up,dp)]),np.emitEvent("streamPropertyChanged",[new StreamPropertyChangedEvent_1.StreamPropertyChangedEvent(np,np.stream,sp,cp,up,dp)]))}):(this.session.emitEvent("streamPropertyChanged",[new StreamPropertyChangedEvent_1.StreamPropertyChangedEvent(this.session,np.stream,sp,cp,up,dp)]),np.emitEvent("streamPropertyChanged",[new StreamPropertyChangedEvent_1.StreamPropertyChangedEvent(np,np.stream,sp,cp,up,dp)]))},_d.prototype.generateMediaConstraints=function(np){var rp=this;return new Promise(function(ap,sp){var lp={audioTrack:void 0,videoTrack:void 0,constraints:{audio:void 0,video:void 0}},up=np.audioSource,cp=np.videoSource;if((up===null||up===!1)&&(lp.constraints.audio=!1),(cp===null||cp===!1)&&(lp.constraints.video=!1),lp.constraints.audio===!1&&lp.constraints.video===!1)return sp(new OpenViduError_1.OpenViduError(OpenViduError_1.OpenViduErrorName.NO_INPUT_SOURCE_SET,"Properties 'audioSource' and 'videoSource' cannot be set to false or null at the same time"));if(typeof MediaStreamTrack<"u"&&up instanceof MediaStreamTrack&&(lp.audioTrack=up),typeof MediaStreamTrack<"u"&&cp instanceof MediaStreamTrack&&(lp.videoTrack=cp),up===void 0&&(lp.constraints.audio=!0),cp===void 0&&(lp.constraints.video={width:{ideal:640},height:{ideal:480}}),cp!==null&&cp!==!1){if(np.resolution){var dp=np.resolution.toLowerCase().split("x"),fp=Number(dp[0]),pp=Number(dp[1]);lp.constraints.video={width:{ideal:fp},height:{ideal:pp}}}np.frameRate&&(lp.constraints.video.frameRate={ideal:np.frameRate})}return rp.configureDeviceIdOrScreensharing(lp,np,ap,sp),ap(lp)})},_d.prototype.startWs=function(np){var rp={heartbeat:5e3,ws:{uri:this.wsUri+"?sessionId="+this.session.sessionId,onconnected:np,ondisconnect:this.disconnectCallback.bind(this),onreconnecting:this.reconnectingCallback.bind(this),onreconnected:this.reconnectedCallback.bind(this),ismasternodecrashed:this.isMasterNodeCrashed.bind(this)},rpc:{requestTimeout:1e4,heartbeatRequestTimeout:5e3,participantJoined:this.session.onParticipantJoined.bind(this.session),participantPublished:this.session.onParticipantPublished.bind(this.session),participantUnpublished:this.session.onParticipantUnpublished.bind(this.session),participantLeft:this.session.onParticipantLeft.bind(this.session),participantEvicted:this.session.onParticipantEvicted.bind(this.session),recordingStarted:this.session.onRecordingStarted.bind(this.session),recordingStopped:this.session.onRecordingStopped.bind(this.session),broadcastStarted:this.session.onBroadcastStarted.bind(this.session),broadcastStopped:this.session.onBroadcastStopped.bind(this.session),sendMessage:this.session.onNewMessage.bind(this.session),streamPropertyChanged:this.session.onStreamPropertyChanged.bind(this.session),connectionPropertyChanged:this.session.onConnectionPropertyChanged.bind(this.session),networkQualityLevelChanged:this.session.onNetworkQualityLevelChangedChanged.bind(this.session),filterEventDispatched:this.session.onFilterEventDispatched.bind(this.session),iceCandidate:this.session.recvIceCandidate.bind(this.session),mediaError:this.session.onMediaError.bind(this.session),masterNodeCrashedNotification:this.onMasterNodeCrashedNotification.bind(this),forciblyReconnectSubscriber:this.session.onForciblyReconnectSubscriber.bind(this.session),speechToTextMessage:this.session.onSpeechToTextMessage.bind(this.session),speechToTextDisconnected:this.session.onSpeechToTextDisconnected.bind(this.session)}};this.jsonRpcClient=new RpcBuilder.clients.JsonRpcClient(rp)},_d.prototype.onMasterNodeCrashedNotification=function(np){console.error("Master Node has crashed"),this.masterNodeHasCrashed=!0,this.session.onLostConnection("nodeCrashed"),this.jsonRpcClient.close(4103,"Master Node has crashed")},_d.prototype.getWsReadyState=function(){return this.jsonRpcClient.getReadyState()},_d.prototype.closeWs=function(){this.jsonRpcClient.close(4102,"Connection closed by client")},_d.prototype.sendRequest=function(np,rp,ap){var sp;rp&&rp instanceof Function&&(ap=rp,rp={}),logger.debug('Sending request: {method:"'+np+'", params: '+JSON.stringify(rp)+"}"),(sp=this.jsonRpcClient)===null||sp===void 0||sp.send(np,rp,ap)},_d.prototype.getWsUri=function(){return this.wsUri},_d.prototype.getSecret=function(){return this.secret},_d.prototype.getRecorder=function(){return this.recorder},_d.prototype.getStt=function(){return this.stt},_d.prototype.generateAudioDeviceError=function(np,rp){np.name==="Error"&&(np.name=np.constructor.name);var ap,sp;switch(np.name.toLowerCase()){case"notfounderror":return ap=OpenViduError_1.OpenViduErrorName.INPUT_AUDIO_DEVICE_NOT_FOUND,sp=np.toString(),new OpenViduError_1.OpenViduError(ap,sp);case"notallowederror":return ap=OpenViduError_1.OpenViduErrorName.DEVICE_ACCESS_DENIED,sp=np.toString(),new OpenViduError_1.OpenViduError(ap,sp);case"overconstrainederror":return np.constraint.toLowerCase()==="deviceid"?(ap=OpenViduError_1.OpenViduErrorName.INPUT_AUDIO_DEVICE_NOT_FOUND,sp="Audio input device with deviceId '"+rp.audio.deviceId.exact+"' not found"):(ap=OpenViduError_1.OpenViduErrorName.PUBLISHER_PROPERTIES_ERROR,sp="Audio input device doesn't support the value passed for constraint '"+np.constraint+"'"),new OpenViduError_1.OpenViduError(ap,sp);case"notreadableerror":return ap=OpenViduError_1.OpenViduErrorName.DEVICE_ALREADY_IN_USE,sp=np.toString(),new OpenViduError_1.OpenViduError(ap,sp);default:return new OpenViduError_1.OpenViduError(OpenViduError_1.OpenViduErrorName.INPUT_AUDIO_DEVICE_GENERIC_ERROR,np.toString())}},_d.prototype.addAlreadyProvidedTracks=function(np,rp,ap){return np.videoTrack&&(rp.addTrack(np.videoTrack),ap&&(np.constraints.video?ap.lastVideoTrackConstraints=np.constraints.video:ap.lastVideoTrackConstraints=np.videoTrack.getConstraints())),np.audioTrack&&rp.addTrack(np.audioTrack),rp},_d.prototype.configureDeviceIdOrScreensharing=function(np,rp,ap,sp){var lp=this,up=rp.audioSource,cp=rp.videoSource;if(typeof up=="string"&&up!=="screen"&&(np.constraints.audio={deviceId:{exact:up}}),typeof cp=="string")if(!this.isScreenShare(cp))this.setVideoSource(np,cp),up==="screen"&&(logger.warn('Parameter "audioSource" is set to "screen", which means rquesting audio from screen sharing source. But "videoSource" is not set to "screen". No audio source will be requested'),np.constraints.audio=!1);else if(this.checkScreenSharingCapabilities())if(platform.isElectron()){var fp="screen:",pp=cp,hp=pp.substr(pp.indexOf(fp)+fp.length);return np.constraints.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:hp}},ap(np)}else if(this.advancedConfiguration.screenShareChromeExtension&&!(platform.isFirefoxBrowser()||platform.isFirefoxMobileBrowser())&&!navigator.mediaDevices.getDisplayMedia){screenSharing.getScreenConstraints(function(gp,vp){if(gp||vp.mandatory&&vp.mandatory.chromeMediaSource==="screen")if(gp==="permission-denied"||gp==="PermissionDeniedError"){var xp=new OpenViduError_1.OpenViduError(OpenViduError_1.OpenViduErrorName.SCREEN_CAPTURE_DENIED,"You must allow access to one window of your desktop");return logger.error(xp),sp(xp)}else{var Sp=lp.advancedConfiguration.screenShareChromeExtension.split("/").pop().trim();screenSharing.getChromeExtensionStatus(Sp,function(yp){if(yp==="installed-disabled"){var bp=new OpenViduError_1.OpenViduError(OpenViduError_1.OpenViduErrorName.SCREEN_EXTENSION_DISABLED,"You must enable the screen extension");return logger.error(bp),sp(bp)}if(yp==="not-installed"){var Ep=new OpenViduError_1.OpenViduError(OpenViduError_1.OpenViduErrorName.SCREEN_EXTENSION_NOT_INSTALLED,lp.advancedConfiguration.screenShareChromeExtension);return logger.error(Ep),sp(Ep)}});return}else return np.constraints.video=vp,ap(np)});return}else{if(navigator.mediaDevices.getDisplayMedia)return ap(np);var mp=platform.isFirefoxBrowser()||platform.isFirefoxMobileBrowser()?rp.videoSource:void 0;screenSharingAuto.getScreenId(mp,function(gp,vp,xp){if(gp)if(gp==="not-installed"){var Sp=lp.advancedConfiguration.screenShareChromeExtension?lp.advancedConfiguration.screenShareChromeExtension:"https://chrome.google.com/webstore/detail/openvidu-screensharing/lfcgfepafnobdloecchnfaclibenjold",yp=new OpenViduError_1.OpenViduError(OpenViduError_1.OpenViduErrorName.SCREEN_EXTENSION_NOT_INSTALLED,Sp);return logger.error(yp),sp(yp)}else if(gp==="installed-disabled"){var yp=new OpenViduError_1.OpenViduError(OpenViduError_1.OpenViduErrorName.SCREEN_EXTENSION_DISABLED,"You must enable the screen extension");return logger.error(yp),sp(yp)}else if(gp==="permission-denied"){var yp=new OpenViduError_1.OpenViduError(OpenViduError_1.OpenViduErrorName.SCREEN_CAPTURE_DENIED,"You must allow access to one window of your desktop");return logger.error(yp),sp(yp)}else{var yp=new OpenViduError_1.OpenViduError(OpenViduError_1.OpenViduErrorName.GENERIC_ERROR,"Unknown error when accessing screen share");return logger.error(yp),logger.error(gp),sp(yp)}else return np.constraints.video=xp.video,ap(np)});return}else{var dp=new OpenViduError_1.OpenViduError(OpenViduError_1.OpenViduErrorName.SCREEN_SHARING_NOT_SUPPORTED,"You can only screen share in desktop Chrome, Firefox, Opera, Safari (>=13.0), Edge (>= 80) or Electron. Detected client: "+platform.getName()+" "+platform.getVersion());return logger.error(dp),sp(dp)}},_d.prototype.setVideoSource=function(np,rp){np.constraints.video||(np.constraints.video={}),np.constraints.video.deviceId={exact:rp}},_d.prototype.disconnectCallback=function(){logger.warn("Websocket connection lost"),this.isRoomAvailable()?this.session.onLostConnection("networkDisconnect"):alert("Connection error. Please reload page.")},_d.prototype.reconnectingCallback=function(){logger.warn("Websocket connection lost (reconnecting)"),this.isRoomAvailable()?this.session.emitEvent("reconnecting",[]):alert("Connection error. Please reload page.")},_d.prototype.reconnectWebsocketThroughRpcConnectMethod=function(np){var rp=this;this.sendRequest("connect",{sessionId:np,reconnect:!0},function(ap,sp){if(ap)if(rp.isMasterNodeCrashed())logger.warn("Master Node has crashed!");else{logger.error(ap);var lp=function(cp,dp){logger.warn(dp),rp.session.onLostConnection(cp),rp.jsonRpcClient.close(4101,"Reconnection fault: "+dp)},up=function(){rp.life===-1?lp("networkDisconnect","WS successfully reconnected but the user was already evicted due to timeout"):rp.sendRequest("sessionStatus",{sessionId:rp.session.sessionId},function(cp,dp){cp!=null?console.error("Error checking session status",cp):rp.life===dp.life?lp("networkDisconnect","WS successfully reconnected but the user was already evicted due to timeout"):lp("nodeCrashed","WS successfully reconnected to OpenVidu Server but your Master Node crashed")})};ap.code===40007&&ap.message==="reconnection error"&&console.error("Invalid RPC sessionId. Client network disconnection or Master Node crash"),up()}else rp.jsonRpcClient.resetPing(),rp.session.onRecoveredConnection()})},_d.prototype.reconnectedCallback=function(){if(logger.warn("Websocket reconnected"),this.isRoomAvailable())if(this.session.connection)this.reconnectWebsocketThroughRpcConnectMethod(this.session.connection.rpcSessionId);else{logger.warn("There was no previous connection when running reconnection callback");var np=new SessionDisconnectedEvent_1.SessionDisconnectedEvent(this.session,"networkDisconnect");this.session.ee.emitEvent("sessionDisconnected",[np]),np.callDefaultBehavior()}else alert("Connection error. Please reload page.")},_d.prototype.isMasterNodeCrashed=function(){return this.masterNodeHasCrashed},_d.prototype.isRoomAvailable=function(){return this.session!==void 0&&this.session instanceof Session_1.Session?!0:(logger.warn("Session instance not found"),!1)},_d.prototype.isScreenShare=function(np){return np==="screen"||np==="window"||platform.isElectron()&&np.startsWith("screen:")},_d}();OpenVidu$1.OpenVidu=OpenVidu;var Types={};Object.defineProperty(Types,"__esModule",{value:!0});(function(_d){var np=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(kp,Tp,Np,Lp){Lp===void 0&&(Lp=Np);var Vp=Object.getOwnPropertyDescriptor(Tp,Np);(!Vp||("get"in Vp?!Tp.__esModule:Vp.writable||Vp.configurable))&&(Vp={enumerable:!0,get:function(){return Tp[Np]}}),Object.defineProperty(kp,Lp,Vp)}:function(kp,Tp,Np,Lp){Lp===void 0&&(Lp=Np),kp[Lp]=Tp[Np]}),rp=commonjsGlobal&&commonjsGlobal.__exportStar||function(kp,Tp){for(var Np in kp)Np!=="default"&&!Object.prototype.hasOwnProperty.call(Tp,Np)&&np(Tp,kp,Np)};Object.defineProperty(_d,"__esModule",{value:!0}),_d.EventDispatcher=_d.ExceptionEventName=_d.ExceptionEvent=_d.SpeechToTextEvent=_d.NetworkQualityLevelChangedEvent=_d.FilterEvent=_d.ConnectionPropertyChangedEvent=_d.StreamPropertyChangedEvent=_d.VideoElementEvent=_d.StreamManagerEvent=_d.StreamEvent=_d.SignalEvent=_d.SessionDisconnectedEvent=_d.RecordingEvent=_d.PublisherSpeakingEvent=_d.ConnectionEvent=_d.Event=_d.VideoInsertMode=_d.TypeOfVideo=_d.OpenViduErrorName=_d.OpenViduError=_d.LocalRecorderState=_d.Filter=_d.LocalRecorder=_d.Connection=_d.Stream=_d.StreamManager=_d.Subscriber=_d.Publisher=_d.Session=_d.OpenVidu=void 0;var ap=jsnlog,sp=OpenVidu$1;Object.defineProperty(_d,"OpenVidu",{enumerable:!0,get:function(){return sp.OpenVidu}});var lp=requireSession();Object.defineProperty(_d,"Session",{enumerable:!0,get:function(){return lp.Session}});var up=requirePublisher();Object.defineProperty(_d,"Publisher",{enumerable:!0,get:function(){return up.Publisher}});var cp=Subscriber$1;Object.defineProperty(_d,"Subscriber",{enumerable:!0,get:function(){return cp.Subscriber}});var dp=StreamManager$1;Object.defineProperty(_d,"StreamManager",{enumerable:!0,get:function(){return dp.StreamManager}});var fp=Stream$1;Object.defineProperty(_d,"Stream",{enumerable:!0,get:function(){return fp.Stream}});var pp=Connection$1;Object.defineProperty(_d,"Connection",{enumerable:!0,get:function(){return pp.Connection}});var hp=LocalRecorder$1;Object.defineProperty(_d,"LocalRecorder",{enumerable:!0,get:function(){return hp.LocalRecorder}});var mp=Filter$1;Object.defineProperty(_d,"Filter",{enumerable:!0,get:function(){return mp.Filter}});var gp=LocalRecorderState;Object.defineProperty(_d,"LocalRecorderState",{enumerable:!0,get:function(){return gp.LocalRecorderState}});var vp=OpenViduError;Object.defineProperty(_d,"OpenViduError",{enumerable:!0,get:function(){return vp.OpenViduError}}),Object.defineProperty(_d,"OpenViduErrorName",{enumerable:!0,get:function(){return vp.OpenViduErrorName}});var xp=TypeOfVideo;Object.defineProperty(_d,"TypeOfVideo",{enumerable:!0,get:function(){return xp.TypeOfVideo}});var Sp=VideoInsertMode;Object.defineProperty(_d,"VideoInsertMode",{enumerable:!0,get:function(){return Sp.VideoInsertMode}});var yp=Event$2;Object.defineProperty(_d,"Event",{enumerable:!0,get:function(){return yp.Event}});var bp=ConnectionEvent$1;Object.defineProperty(_d,"ConnectionEvent",{enumerable:!0,get:function(){return bp.ConnectionEvent}});var Ep=PublisherSpeakingEvent$1;Object.defineProperty(_d,"PublisherSpeakingEvent",{enumerable:!0,get:function(){return Ep.PublisherSpeakingEvent}});var wp=RecordingEvent$1;Object.defineProperty(_d,"RecordingEvent",{enumerable:!0,get:function(){return wp.RecordingEvent}});var _p=SessionDisconnectedEvent$1;Object.defineProperty(_d,"SessionDisconnectedEvent",{enumerable:!0,get:function(){return _p.SessionDisconnectedEvent}});var Cp=SignalEvent$1;Object.defineProperty(_d,"SignalEvent",{enumerable:!0,get:function(){return Cp.SignalEvent}});var $p=requireStreamEvent();Object.defineProperty(_d,"StreamEvent",{enumerable:!0,get:function(){return $p.StreamEvent}});var Rp=StreamManagerEvent$1;Object.defineProperty(_d,"StreamManagerEvent",{enumerable:!0,get:function(){return Rp.StreamManagerEvent}});var Pp=VideoElementEvent$1;Object.defineProperty(_d,"VideoElementEvent",{enumerable:!0,get:function(){return Pp.VideoElementEvent}});var Op=StreamPropertyChangedEvent$1;Object.defineProperty(_d,"StreamPropertyChangedEvent",{enumerable:!0,get:function(){return Op.StreamPropertyChangedEvent}});var jp=ConnectionPropertyChangedEvent$1;Object.defineProperty(_d,"ConnectionPropertyChangedEvent",{enumerable:!0,get:function(){return jp.ConnectionPropertyChangedEvent}});var Mp=FilterEvent$1;Object.defineProperty(_d,"FilterEvent",{enumerable:!0,get:function(){return Mp.FilterEvent}});var Ap=NetworkQualityLevelChangedEvent$1;Object.defineProperty(_d,"NetworkQualityLevelChangedEvent",{enumerable:!0,get:function(){return Ap.NetworkQualityLevelChangedEvent}});var Dp=SpeechToTextEvent$1;Object.defineProperty(_d,"SpeechToTextEvent",{enumerable:!0,get:function(){return Dp.SpeechToTextEvent}});var Fp=ExceptionEvent;Object.defineProperty(_d,"ExceptionEvent",{enumerable:!0,get:function(){return Fp.ExceptionEvent}}),Object.defineProperty(_d,"ExceptionEventName",{enumerable:!0,get:function(){return Fp.ExceptionEventName}});var Ip=EventDispatcher$1;Object.defineProperty(_d,"EventDispatcher",{enumerable:!0,get:function(){return Ip.EventDispatcher}}),rp(Types,_d),ap.JL.setOptions({enabled:!1})})(lib);class UserModel{constructor(){Pm(this,"connectionId");Pm(this,"audioActive");Pm(this,"videoActive");Pm(this,"screenShareActive");Pm(this,"nickname");Pm(this,"streamManager");Pm(this,"type");this.connectionId="",this.audioActive=!0,this.videoActive=!0,this.screenShareActive=!1,this.nickname="",this.streamManager=null,this.type="local"}isAudioActive(){return this.audioActive}isVideoActive(){return this.videoActive}isScreenShareActive(){return this.screenShareActive}getConnectionId(){return this.connectionId}getNickname(){return this.nickname}getStreamManager(){return this.streamManager}isLocal(){return this.type==="local"}isRemote(){return!this.isLocal()}setAudioActive(np){this.audioActive=np}setVideoActive(np){this.videoActive=np}setScreenShareActive(np){this.screenShareActive=np}setStreamManager(np){this.streamManager=np}setConnectionId(np){this.connectionId=np}setNickname(np){this.nickname=np}setType(np){np==="local"|np==="remote"&&(this.type=np)}}class OpenViduLayout{constructor(){Pm(this,"layoutContainer");Pm(this,"opts")}fixAspectRatio(np,rp){const ap=np.querySelector(".OT_root");if(ap){const sp=ap.style.width;ap.style.width=rp+"px",ap.style.width=sp||""}}positionElement(np,rp,ap,sp,lp,up){const cp={left:rp+"px",top:ap+"px",width:sp+"px",height:lp+"px"};this.fixAspectRatio(np,sp),up&&$?($(np).stop(),$(np).animate(cp,up.duration||200,up.easing||"swing",()=>{this.fixAspectRatio(np,sp),up.complete&&up.complete.call(this)})):$(np).css(cp),this.fixAspectRatio(np,sp)}getVideoRatio(np){if(!np)return 3/4;const rp=np.querySelector("video");return rp&&rp.videoHeight&&rp.videoWidth?rp.videoHeight/rp.videoWidth:np.videoHeight&&np.videoWidth?np.videoHeight/np.videoWidth:3/4}getCSSNumber(np,rp){const ap=$(np).css(rp);return ap?parseInt(ap,10):0}cheapUUID(){return(Math.random()*1e8).toFixed(0)}getHeight(np){const rp=$(np).css("height");return rp?parseInt(rp,10):0}getWidth(np){const rp=$(np).css("width");return rp?parseInt(rp,10):0}getBestDimensions(np,rp,ap,sp,lp,up){let cp,dp,fp,pp,hp,mp,gp;for(let vp=1;vp<=ap;vp++){const xp=vp,Sp=Math.ceil(ap/xp);mp=Math.floor(lp/Sp),hp=Math.floor(sp/xp),gp=mp/hp,gp>rp?(gp=rp,mp=hp*gp):gp<np&&(gp=np,hp=mp/gp);const yp=hp*mp*ap;(cp===void 0||yp>cp)&&(cp=yp,up=mp,pp=hp,dp=xp,fp=Sp)}return{maxArea:cp,targetCols:dp,targetRows:fp,targetHeight:up,targetWidth:pp,ratio:up/pp}}arrange(np,rp,ap,sp,lp,up,cp,dp,fp){let pp;const hp=np.length;let mp;if(!up)mp=this.getBestDimensions(cp,dp,hp,rp,ap,pp);else{const Ep=this.getVideoRatio(np.length>0?np[0]:null);mp=this.getBestDimensions(Ep,Ep,hp,rp,ap,pp)}let gp=0,vp=0;const xp=[];let Sp;for(let Ep=0;Ep<np.length;Ep++){Ep%mp.targetCols===0&&(Sp={children:[],width:0,height:0},xp.push(Sp));const wp=np[Ep];Sp.children.push(wp);let _p=mp.targetWidth;pp=mp.targetHeight,up&&(_p=pp/this.getVideoRatio(wp)),Sp.width+=_p,Sp.height=pp}let yp=0,bp=0;for(let Ep=0;Ep<xp.length;Ep++)Sp=xp[Ep],Sp.width>rp?(Sp.height=Math.floor(Sp.height*(rp/Sp.width)),Sp.width=rp):Sp.width<rp&&(bp+=1),yp+=Sp.height;if(yp<ap&&bp>0){let Ep=ap-yp;yp=0;for(let wp=0;wp<xp.length;wp++){if(Sp=xp[wp],Sp.width<rp){let _p=Ep/bp;_p/Sp.height>(rp-Sp.width)/Sp.width&&(_p=Math.floor((rp-Sp.width)/Sp.width*Sp.height)),Sp.width+=Math.floor(_p/Sp.height*Sp.width),Sp.height+=_p,Ep-=_p,bp-=1}yp+=Sp.height}}vp=(ap-yp)/2;for(let Ep=0;Ep<xp.length;Ep++){Sp=xp[Ep],gp=(rp-Sp.width)/2;for(let _p=0;_p<Sp.children.length;_p++){const Cp=Sp.children[_p];let $p=mp.targetWidth;pp=Sp.height,up&&($p=Math.floor(pp/this.getVideoRatio(Cp))),Cp.style.position="absolute";const Rp=$p-this.getCSSNumber(Cp,"paddingLeft")-this.getCSSNumber(Cp,"paddingRight")-this.getCSSNumber(Cp,"marginLeft")-this.getCSSNumber(Cp,"marginRight")-this.getCSSNumber(Cp,"borderLeft")-this.getCSSNumber(Cp,"borderRight"),Pp=pp-this.getCSSNumber(Cp,"paddingTop")-this.getCSSNumber(Cp,"paddingBottom")-this.getCSSNumber(Cp,"marginTop")-this.getCSSNumber(Cp,"marginBottom")-this.getCSSNumber(Cp,"borderTop")-this.getCSSNumber(Cp,"borderBottom");this.positionElement(Cp,gp+sp,vp+lp,Rp,Pp,fp),gp+=$p}vp+=pp}}filterDisplayNone(np){return np.style.display!=="none"}updateLayout(){if(this.layoutContainer.style.display==="none")return;let np=this.layoutContainer.id;np||(np="OT_"+this.cheapUUID(),this.layoutContainer.id=np);const rp=this.getHeight(this.layoutContainer)-this.getCSSNumber(this.layoutContainer,"borderTop")-this.getCSSNumber(this.layoutContainer,"borderBottom"),ap=this.getWidth(this.layoutContainer)-this.getCSSNumber(this.layoutContainer,"borderLeft")-this.getCSSNumber(this.layoutContainer,"borderRight"),sp=rp/ap;let lp=0,up=0,cp=0,dp=0;const fp=Array.prototype.filter.call(this.layoutContainer.querySelectorAll("#"+np+">."+this.opts.bigClass),this.filterDisplayNone),pp=Array.prototype.filter.call(this.layoutContainer.querySelectorAll("#"+np+">*:not(."+this.opts.bigClass+")"),this.filterDisplayNone);if(fp.length>0&&pp.length>0){let hp,mp;sp>this.getVideoRatio(fp[0])?(hp=ap,mp=Math.floor(rp*this.opts.bigPercentage),up=mp,cp=rp-up):(mp=rp,hp=Math.floor(ap*this.opts.bigPercentage),lp=hp,dp=ap-lp),this.opts.bigFirst?(this.arrange(fp,hp,mp,0,0,this.opts.bigFixedRatio,this.opts.bigMinRatio,this.opts.bigMaxRatio,this.opts.animate),this.arrange(pp,ap-lp,rp-up,lp,up,this.opts.fixedRatio,this.opts.minRatio,this.opts.maxRatio,this.opts.animate)):(this.arrange(pp,ap-lp,rp-up,0,0,this.opts.fixedRatio,this.opts.minRatio,this.opts.maxRatio,this.opts.animate),this.arrange(fp,hp,mp,dp,cp,this.opts.bigFixedRatio,this.opts.bigMinRatio,this.opts.bigMaxRatio,this.opts.animate))}else fp.length>0&&pp.length===0?this.arrange(fp,ap,rp,0,0,this.opts.bigFixedRatio,this.opts.bigMinRatio,this.opts.bigMaxRatio,this.opts.animate):this.arrange(pp,ap-lp,rp-up,lp,up,this.opts.fixedRatio,this.opts.minRatio,this.opts.maxRatio,this.opts.animate)}initLayoutContainer(np,rp){this.opts={maxRatio:rp.maxRatio!=null?rp.maxRatio:3/2,minRatio:rp.minRatio!=null?rp.minRatio:9/16,fixedRatio:rp.fixedRatio!=null?rp.fixedRatio:!1,animate:rp.animate!=null?rp.animate:!1,bigClass:rp.bigClass!=null?rp.bigClass:"OT_big",bigPercentage:rp.bigPercentage!=null?rp.bigPercentage:.8,bigFixedRatio:rp.bigFixedRatio!=null?rp.bigFixedRatio:!1,bigMaxRatio:rp.bigMaxRatio!=null?rp.bigMaxRatio:3/2,bigMinRatio:rp.bigMinRatio!=null?rp.bigMinRatio:9/16,bigFirst:rp.bigFirst!=null?rp.bigFirst:!0},this.layoutContainer=typeof np=="string"?$(np):np}setLayoutOptions(np){this.opts=np}}class OvVideoComponent extends reactExports.Component{constructor(np){super(np),this.videoRef=React.createRef(),console.log(np)}componentDidUpdate(np){np&&this.videoRef&&this.props.streamManager.addVideoElement(this.videoRef.current)}componentDidMount(){this.props&&this.videoRef&&this.props.streamManager.addVideoElement(this.videoRef.current)}render(){return jsxRuntimeExports.jsx("video",{autoPlay:!0,ref:this.videoRef})}}class UserVideoComponent extends reactExports.Component{constructor(np){super(np),console.log(np)}render(){return jsxRuntimeExports.jsx("div",{children:this.props.streamManager!==void 0?jsxRuntimeExports.jsx("div",{className:"streamcomponent",children:jsxRuntimeExports.jsx(OvVideoComponent,{streamManager:this.props.streamManager})}):jsxRuntimeExports.jsx("span",{children:"호스트가 없습니다."})})}}var MicNoneOutlined={},_interopRequireDefault$d=interopRequireDefaultExports;Object.defineProperty(MicNoneOutlined,"__esModule",{value:!0});var default_1$d=MicNoneOutlined.default=void 0,_createSvgIcon$d=_interopRequireDefault$d(requireCreateSvgIcon()),_jsxRuntime$d=jsxRuntimeExports;default_1$d=MicNoneOutlined.default=(0,_createSvgIcon$d.default)((0,_jsxRuntime$d.jsx)("path",{d:"M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3m-1-9c0-.55.45-1 1-1s1 .45 1 1v6c0 .55-.45 1-1 1s-1-.45-1-1zm6 6c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92z"}),"MicNoneOutlined");var MicOffOutlined={},_interopRequireDefault$c=interopRequireDefaultExports;Object.defineProperty(MicOffOutlined,"__esModule",{value:!0});var default_1$c=MicOffOutlined.default=void 0,_createSvgIcon$c=_interopRequireDefault$c(requireCreateSvgIcon()),_jsxRuntime$c=jsxRuntimeExports;default_1$c=MicOffOutlined.default=(0,_createSvgIcon$c.default)((0,_jsxRuntime$c.jsx)("path",{d:"M10.8 4.9c0-.66.54-1.2 1.2-1.2s1.2.54 1.2 1.2l-.01 3.91L15 10.6V5c0-1.66-1.34-3-3-3-1.54 0-2.79 1.16-2.96 2.65l1.76 1.76zM19 11h-1.7c0 .58-.1 1.13-.27 1.64l1.27 1.27c.44-.88.7-1.87.7-2.91M4.41 2.86 3 4.27l6 6V11c0 1.66 1.34 3 3 3 .23 0 .44-.03.65-.08l1.66 1.66c-.71.33-1.5.52-2.31.52-2.76 0-5.3-2.1-5.3-5.1H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c.91-.13 1.77-.45 2.55-.9l4.2 4.2 1.41-1.41z"}),"MicOffOutlined");var VideocamOutlined={},_interopRequireDefault$b=interopRequireDefaultExports;Object.defineProperty(VideocamOutlined,"__esModule",{value:!0});var default_1$b=VideocamOutlined.default=void 0,_createSvgIcon$b=_interopRequireDefault$b(requireCreateSvgIcon()),_jsxRuntime$b=jsxRuntimeExports;default_1$b=VideocamOutlined.default=(0,_createSvgIcon$b.default)((0,_jsxRuntime$b.jsx)("path",{d:"M15 8v8H5V8zm1-2H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4V7c0-.55-.45-1-1-1"}),"VideocamOutlined");var VideocamOffOutlined={},_interopRequireDefault$a=interopRequireDefaultExports;Object.defineProperty(VideocamOffOutlined,"__esModule",{value:!0});var default_1$a=VideocamOffOutlined.default=void 0,_createSvgIcon$a=_interopRequireDefault$a(requireCreateSvgIcon()),_jsxRuntime$a=jsxRuntimeExports;default_1$a=VideocamOffOutlined.default=(0,_createSvgIcon$a.default)((0,_jsxRuntime$a.jsx)("path",{d:"m9.56 8-2-2-4.15-4.14L2 3.27 4.73 6H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.21 0 .39-.08.55-.18L19.73 21l1.41-1.41-8.86-8.86zM5 16V8h1.73l8 8zm10-8v2.61l6 6V6.5l-4 4V7c0-.55-.45-1-1-1h-5.61l2 2z"}),"VideocamOffOutlined");var LoopOutlined={},_interopRequireDefault$9=interopRequireDefaultExports;Object.defineProperty(LoopOutlined,"__esModule",{value:!0});var default_1$9=LoopOutlined.default=void 0,_createSvgIcon$9=_interopRequireDefault$9(requireCreateSvgIcon()),_jsxRuntime$9=jsxRuntimeExports;default_1$9=LoopOutlined.default=(0,_createSvgIcon$9.default)((0,_jsxRuntime$9.jsx)("path",{d:"M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8m0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4z"}),"LoopOutlined");const ToolbarComponent=({user:_d,isHost:np,micStatusChanged:rp,camStatusChanged:ap,setIsSwitchCameraModal:sp,hostNickname:lp,hostProfileImg:up,setLeaveModal:cp,totalUsers:dp})=>{const[fp,pp]=reactExports.useState(!0),[hp,mp]=reactExports.useState(!0);return reactExports.useEffect(()=>{pp(_d.stream.audioActive)},[_d.stream.audioActive]),reactExports.useEffect(()=>{mp(_d.stream.videoActive)},[_d.stream.videoActive]),jsxRuntimeExports.jsxs("div",{className:"toolbar-container",children:[jsxRuntimeExports.jsxs("div",{className:"toolbar-host-info",children:[jsxRuntimeExports.jsx("img",{src:up,alt:"toolbar-Host profile"}),jsxRuntimeExports.jsx("span",{children:lp})]}),jsxRuntimeExports.jsxs("div",{className:"toolbar-count-subscribers",children:[jsxRuntimeExports.jsx("img",{src:group,alt:""}),dp]}),jsxRuntimeExports.jsxs("div",{className:"toolbar-option-btn",children:[jsxRuntimeExports.jsx(default_1$q,{onClick:()=>cp(!0),className:"toolbar-option-icon"}),np&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[fp?jsxRuntimeExports.jsx(default_1$d,{onClick:rp,className:"toolbar-option-icon"}):jsxRuntimeExports.jsx(default_1$c,{onClick:rp,className:"toolbar-option-icon"}),hp?jsxRuntimeExports.jsx(default_1$b,{onClick:ap,className:"toolbar-option-icon"}):jsxRuntimeExports.jsx(default_1$a,{onClick:ap,className:"toolbar-option-icon"}),jsxRuntimeExports.jsx(default_1$9,{onClick:()=>sp(!0),className:"toolbar-option-icon"})]})]})]})},ChattingList=_d=>{const np=reactExports.useRef(),rp=reactExports.useRef(null),ap=reactExports.useRef(null),[sp,lp]=reactExports.useState(!0),up=()=>{ap.current&&clearTimeout(ap.current),ap.current=setTimeout(()=>{const dp=rp.current.scrollTop,fp=rp.current.clientHeight,pp=rp.current.scrollHeight;lp(dp+fp>=pp-100)},100)},cp=reactExports.useCallback(()=>{up()},[]);return reactExports.useEffect(()=>{sp&&np.current.scrollIntoView({behavior:"smooth"})},[_d.messageList]),reactExports.useEffect(()=>(rp.current.addEventListener("scroll",cp),()=>{ap.current&&clearTimeout(ap.current),rp.current&&rp.current.removeEventListener("scroll",cp)}),[cp]),_d.chatDisplay,jsxRuntimeExports.jsxs("div",{className:"chatContainer",ref:rp,children:[jsxRuntimeExports.jsx("div",{children:_d.messageList.map((dp,fp)=>jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs("div",{className:"chat-box",children:[jsxRuntimeExports.jsx("img",{src:dp.split("|")[1],alt:"",className:"user-img"}),jsxRuntimeExports.jsxs("div",{className:"msg-detail",children:[jsxRuntimeExports.jsx("div",{className:"msg-info",children:jsxRuntimeExports.jsx("p",{children:dp.split("|")[0]})}),jsxRuntimeExports.jsxs("div",{className:"msg-content",children:[jsxRuntimeExports.jsx("span",{className:"triangle"}),jsxRuntimeExports.jsx("p",{className:"text",children:dp.split("|")[2]})]})]})]})},fp))}),jsxRuntimeExports.jsx("div",{ref:np})]})},ChattingForm=_d=>{const[np,rp]=reactExports.useState(""),ap=up=>{up.preventDefault(),np.trim()!==""&&_d.onMessage(`${_d.myUserName}|${_d.myUserImg}|`+np.trim(),_d.currentSession),rp("")},sp=up=>{rp(up.target.value)},lp=up=>{up.key==="Enter"&&(up.preventDefault(),ap(up))};return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("div",{id:"messageInput",children:jsxRuntimeExports.jsx("input",{placeholder:"댓글 달기",id:"chatInput",value:np,onChange:sp,onKeyPress:lp,onpaste:"return false;"})})})},useWindowSize=()=>{const[_d,np]=reactExports.useState({width:window.innerWidth,height:window.innerHeight});return reactExports.useEffect(()=>{const rp=()=>{np({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",rp),()=>{window.removeEventListener("resize",rp)}},[]),_d};function LeaveModal({state:_d,leaveSession:np}){const rp=reactExports.useRef();reactExports.useEffect(()=>{rp.current.showModal()});const ap=up=>{const dp=up.target.getBoundingClientRect();(dp.left>up.clientX||dp.right<up.clientX||dp.top>up.clientY||dp.bottom<up.clientY)&&(rp.current.close(),_d(!_d))},sp=up=>{rp.current.close(),_d(!_d)},lp=up=>{_d(!_d),np()};return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("dialog",{ref:rp,onClick:ap,className:"leave-modal",children:[jsxRuntimeExports.jsx("header",{className:"leave-modal-header",children:jsxRuntimeExports.jsx("h3",{children:"라이브를 종료하시겠어요?"})}),jsxRuntimeExports.jsxs("div",{className:"leave-modal-body",children:[jsxRuntimeExports.jsx("div",{onClick:sp,children:"취소"}),jsxRuntimeExports.jsx("div",{onClick:lp,children:"나가기"})]})]})})}function LiveEndModal({open:_d,close:np}){return jsxRuntimeExports.jsxs("dialog",{open:_d,children:[jsxRuntimeExports.jsx("div",{children:"라이브가 종료되었습니다."}),jsxRuntimeExports.jsx("div",{onClick:np,children:"확인"})]})}function SwitchCameraModal({state:_d,onDevice:np}){const rp=reactExports.useRef(),[ap,sp]=reactExports.useState([]),[lp,up]=reactExports.useState(null);reactExports.useEffect(()=>{navigator.mediaDevices.enumerateDevices().then(fp=>{var hp;let pp=fp.filter(mp=>mp.kind==="videoinput");sp(pp),up((hp=pp[0])==null?void 0:hp.deviceId),rp.current.showModal()})},[]);const cp=fp=>{const hp=fp.target.getBoundingClientRect();(hp.left>fp.clientX||hp.right<fp.clientX||hp.top>fp.clientY||hp.bottom<fp.clientY)&&(rp.current.close(),_d(!_d))},dp=fp=>{const pp=fp.target.value;np(pp)};return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("dialog",{ref:rp,onClick:cp,className:"switch-camera-modal",children:[jsxRuntimeExports.jsx("header",{className:"switch-camera-modal-header",children:jsxRuntimeExports.jsx("h3",{children:"전환 할 카메라를 선택해주세요"})}),jsxRuntimeExports.jsx("div",{className:"switch-camera-modal-body",children:ap.map(fp=>jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("input",{type:"radio",id:fp.deviceId,name:"camera",value:fp.deviceId,checked:lp===fp.deviceId,onChange:dp}),jsxRuntimeExports.jsx("label",{htmlFor:fp.deviceId,children:fp.label})]},fp.deviceId))})]})})}function LuFish(_d){return GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M6.5 12c.94-3.46 4.94-6 8.5-6 3.56 0 6.06 2.54 7 6-.94 3.47-3.44 6-7 6s-7.56-2.53-8.5-6Z"},child:[]},{tag:"path",attr:{d:"M18 12v.5"},child:[]},{tag:"path",attr:{d:"M16 17.93a9.77 9.77 0 0 1 0-11.86"},child:[]},{tag:"path",attr:{d:"M7 10.67C7 8 5.58 5.97 2.73 5.5c-1 1.5-1 5 .23 6.5-1.24 1.5-1.24 5-.23 6.5C5.58 18.03 7 16 7 13.33"},child:[]},{tag:"path",attr:{d:"M10.46 7.26C10.2 5.88 9.17 4.24 8 3h5.8a2 2 0 0 1 1.98 1.67l.23 1.4"},child:[]},{tag:"path",attr:{d:"m16.01 17.93-.23 1.4A2 2 0 0 1 13.8 21H9.5a5.96 5.96 0 0 0 1.49-3.98"},child:[]}]})(_d)}let idCounter=0;const HeartButton=({session:_d,myUserName:np,myUserImg:rp,favIcons:ap,setFavIcons:sp})=>{const lp=["🦈","🐬","🐳","🐋","🐟","🐠","🐡","🦐","🦑","🐙","🦀","🦞","🐚","🎣","💖"],up=()=>{const cp=lp[Math.floor(Math.random()*lp.length)];sp(dp=>[...dp,{id:idCounter++,y:100,icon:cp}]),_d.signal({data:`${np}|${rp}|${cp}`,type:"heart"}).then(()=>console.log("Heart signal sent")).catch(dp=>console.error("Error sending heart signal:",dp))};return reactExports.useEffect(()=>{const cp=setInterval(()=>{sp(dp=>dp.filter(fp=>fp.y>50))},2e3);return()=>clearInterval(cp)},[]),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(LuFish,{onClick:up}),jsxRuntimeExports.jsx("div",{children:ap.map(cp=>jsxRuntimeExports.jsx("div",{className:"heart-icon",children:cp.icon},cp.id))})]})};var localUser=new UserModel;const baseURL="https://i10c203.p.ssafy.io",OPENVIDU_SERVER_SECRET="wearegitaehasam",VideoRoomComponent=_d=>{const np=useNavigate(),rp=useLocation();useWindowSize();const ap=rp.state.roomId,sp=rp.state.isHost,lp=rp.state.imageUrl?rp.state.imageUrl:null,up=rp.state.name?rp.state.name:null,cp=rp.state.nickname,dp=rp.state.userImg,fp=rp.state.subscriberSession?rp.state.subscriberSession:null,[pp,hp]=reactExports.useState(null),[mp,gp]=reactExports.useState("Gitaehasam"),[vp,xp]=reactExports.useState(""),[Sp,yp]=reactExports.useState(""),[bp,Ep]=reactExports.useState(void 0),[wp,_p]=reactExports.useState(void 0),[Cp,$p]=reactExports.useState([]),[Rp,Pp]=reactExports.useState(void 0),[Op,jp]=reactExports.useState([]),[Mp,Ap]=reactExports.useState(0),[Dp,Fp]=reactExports.useState(!0);reactExports.useState(null);const[Ip,kp]=reactExports.useState(!0),[Tp,Np]=reactExports.useState(!0),[Lp,Vp]=reactExports.useState(!1),[zp,Wp]=reactExports.useState(""),[Up,qp]=reactExports.useState(""),[Bp,Yp]=reactExports.useState(!1),[Xp,Qp]=reactExports.useState([]),[am,Jp]=reactExports.useState(!1);reactExports.useState(!1);const[im,Zp]=reactExports.useState(!0);let Gp;reactExports.useEffect(()=>{bp&&wp&&Zp(!1)},[bp,wp]);const tm=reactExports.useCallback(()=>sp?om(mp).then(sm=>em(sm)):em(fp),[mp,sp]),om=sm=>sp?new Promise((cm,ym)=>{console.log(ap);let Tm=JSON.stringify({customSessionId:sm});axios.post(baseURL+"/openvidu/api/sessions",Tm,{headers:{Authorization:"Basic "+btoa("OPENVIDUAPP:"+OPENVIDU_SERVER_SECRET),"Content-Type":"application/json"}}).then(xm=>{console.log("CREATE SESION",xm),axios.post(baseURL+"/api/lives",{imageUrl:lp,name:up,sessionId:xm.data.sessionId},{headers:{Authorization:localStorage.getItem("jwt"),"Content-Type":"application/json"}}).then(bm=>{console.log("apiRoomId: ",bm.data.id),console.log(bm.data),hp(bm.data.id),cm(xm.data.id)}).catch(bm=>{console.log("Error on /lives request:",bm)})}).catch(xm=>{var Dm;var bm=Object.assign({},xm);((Dm=bm==null?void 0:bm.response)==null?void 0:Dm.status)===409?cm(sm):console.log(bm)})}):Promise.resolve(fp),em=sm=>{let cm=sp?"PUBLISHER":"SUBSCRIBER";return new Promise((ym,Tm)=>{const xm={role:cm,sessionId:sm};axios.post(baseURL+"/openvidu/api/sessions/"+sm+"/connection",xm,{headers:{Authorization:"Basic "+btoa("OPENVIDUAPP:"+OPENVIDU_SERVER_SECRET),"Content-Type":"application/json"}}).then(bm=>{console.log("TOKEN",bm),ym(bm.data.token)}).catch(bm=>{console.error(bm),bm.response&&bm.response.status===404?(alert("종료된 라이브 입니다."),np("/media/roomList")):Tm(bm)})})};let _m;reactExports.useEffect(()=>{gp(`Gitaehasam${ap}`),Wp(cp),qp(dp)},[ap]),reactExports.useEffect(()=>{_m=new OpenViduLayout;const sm={maxRatio:1,minRatio:1,fixedRatio:!0,bigClass:"OV_big",bigPercentage:1,bigFixedRatio:!1,bigMaxRatio:1,bigMinRatio:1,bigFirst:!0,animate:!0};_m.initLayoutContainer(document.getElementById("layout"),sm),_m.setLayoutOptions(sm),window.addEventListener("beforeunload",onbeforeunload),mp!=="Gitaehasam"&&Cm()},[mp]);const Cm=async()=>{Gp=new lib.OpenVidu,(await Gp.getDevices()).filter(xm=>xm.kind==="videoinput");let cm=Gp.initSession();Ep(cm);let ym;try{ym=await tm()}catch(xm){console.log(xm);return}const Tm=Gp.initPublisher(void 0,{audioSource:void 0,videoSource:void 0,publishAudio:Tp,publishVideo:Ip,resolution:"640x480",frameRate:30,insertMode:"APPEND",mirror:!1});cm.connect(ym,{clientData:vp}).then(()=>{cm.publish(Tm).then(()=>{localUser.setNickname(vp),localUser.setConnectionId(cm.connection.connectionId),localUser.setStreamManager(Tm)}),Pp(Tm),_p(Tm)}),cm.on("streamCreated",xm=>{const bm=cm.subscribe(xm.stream,"publisher");jp(bm)}),cm.on("exception",xm=>{console.warn(xm)}),cm.on("connectionCreated",({stream:xm})=>{Ap(bm=>bm+1)}),cm.on("connectionDestroyed",({stream:xm})=>{Ap(bm=>bm-1)}),cm.on("signal:heart",xm=>{const[,,bm]=xm.data.split("|");Qp(Dm=>[...Dm,{id:Date.now(),y:100,icon:bm}])}),cm.on("signal:chat",xm=>{$p(bm=>[...bm,xm.data])})},Rm=()=>{Rp.publishVideo(!Rp.stream.videoActive),kp(!Ip),Pp(Rp)},Em=()=>{Rp.publishAudio(!Rp.stream.audioActive),Np(!Tp),Pp(Rp)},$m=async sm=>{const Tm=(await Gp.getDevices()).filter(bm=>bm.kind==="videoinput").find(bm=>bm.deviceId!==sm).deviceId,xm=Gp.initPublisher(void 0,{audioSource:void 0,videoSource:Tm,publishAudio:Rp.stream.hasAudio,publishVideo:Rp.stream.hasVideo,resolution:"640x480",frameRate:30,insertMode:"APPEND",mirror:!1});await bp.unpublish(Rp),await bp.publish(xm),Pp(xm),localUser.setStreamManager(xm),_p(xm)},fm=async()=>{const sm=bp;sm&&(sp?await wm():(sm.disconnect(),np("/media/roomList",{replace:!0})))},wm=async()=>{try{await axios.delete(baseURL+`/api/lives/${pp}`,{headers:{Authorization:localStorage.getItem("jwt"),"Content-Type":"application/json"}}),await axios.delete(baseURL+`/openvidu/api/sessions/${mp}`,{headers:{Authorization:localStorage.getItem("jwt"),"Content-Type":"application/json"}})}catch(sm){console.error(sm)}finally{np("/media/roomList",{replace:!0})}};reactExports.useEffect(()=>{xp(cp),yp(dp)},[]),reactExports.useEffect(()=>{const sm=cm=>{fm()};return window.addEventListener("beforeunload",sm),()=>{window.removeEventListener("beforeunload",sm)}},[fm]),reactExports.useEffect(()=>{if(bp){const sm=()=>{Yp(!0)};return bp.on("sessionDisconnected",sm),()=>{bp.off("sessionDisconnected",sm)}}},[bp]);const pm=()=>{Yp(!1),np("/media/roomList")},hm=(sm,cm)=>{cm.signal({data:sm,to:[],type:"chat"}).then(()=>{console.log("Message successfully sent")}).catch(ym=>{console.error(ym)})};return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:im?jsxRuntimeExports.jsx(Loading,{}):jsxRuntimeExports.jsxs("div",{className:"bounds",children:[bp!==void 0&&wp!==void 0?jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(ToolbarComponent,{user:Rp,isHost:sp,micStatusChanged:Em,camStatusChanged:Rm,setLeaveModal:Vp,hostNickname:zp,hostProfileImg:Up,totalUsers:Mp,setIsSwitchCameraModal:Jp}),sp&&jsxRuntimeExports.jsx(UserVideoComponent,{streamManager:Rp}),!sp&&jsxRuntimeExports.jsx(UserVideoComponent,{streamManager:Op}),Dp&&jsxRuntimeExports.jsxs("div",{className:"chatting",children:[jsxRuntimeExports.jsx(ChattingList,{messageList:Cp}),jsxRuntimeExports.jsxs("div",{className:"chat-input-area",children:[jsxRuntimeExports.jsx(ChattingForm,{myUserName:vp,myUserImg:Sp,onMessage:hm,currentSession:bp}),jsxRuntimeExports.jsx("div",{className:"heart-button-wrapper",children:jsxRuntimeExports.jsx(HeartButton,{session:bp,myUserName:vp,myUserImg:Sp,favIcons:Xp,setFavIcons:Qp})})]})]})]}):jsxRuntimeExports.jsxs("div",{className:"noneData",children:[jsxRuntimeExports.jsx(default_1$r,{}),jsxRuntimeExports.jsx("div",{children:"존재하지 않는 방송입니다."}),jsxRuntimeExports.jsx("button",{onClick:()=>np("/media/roomList"),children:"나가기"})]}),Lp?jsxRuntimeExports.jsx(LeaveModal,{state:Vp,leaveSession:fm}):null,am?jsxRuntimeExports.jsx(SwitchCameraModal,{state:Jp,onDevice:$m}):null,jsxRuntimeExports.jsx(LiveEndModal,{open:Bp,onClose:pm})]})})},MediaPage=()=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Header,{}),jsxRuntimeExports.jsxs("div",{className:"choose-list",children:[jsxRuntimeExports.jsx(Link,{to:"/media/roomlist",children:jsxRuntimeExports.jsx("div",{className:"choose-item",children:jsxRuntimeExports.jsx("div",{className:"bg-blue liveroom",children:"Live"})})}),jsxRuntimeExports.jsx(Link,{to:"/media/board",children:jsxRuntimeExports.jsx("div",{className:"choose-item",children:jsxRuntimeExports.jsx("div",{className:"bg-blue card photo",children:"Photo"})})})]})]});var Window$1={},_interopRequireDefault$8=interopRequireDefaultExports;Object.defineProperty(Window$1,"__esModule",{value:!0});var default_1$8=Window$1.default=void 0,_createSvgIcon$8=_interopRequireDefault$8(requireCreateSvgIcon()),_jsxRuntime$8=jsxRuntimeExports;default_1$8=Window$1.default=(0,_createSvgIcon$8.default)((0,_jsxRuntime$8.jsx)("path",{d:"M11 11V3H5c-1.1 0-2 .9-2 2v6zm2 0h8V5c0-1.1-.9-2-2-2h-6zm-2 2H3v6c0 1.1.9 2 2 2h6zm2 0v8h6c1.1 0 2-.9 2-2v-6z"}),"Window");var FavoriteBorder={},_interopRequireDefault$7=interopRequireDefaultExports;Object.defineProperty(FavoriteBorder,"__esModule",{value:!0});var default_1$7=FavoriteBorder.default=void 0,_createSvgIcon$7=_interopRequireDefault$7(requireCreateSvgIcon()),_jsxRuntime$7=jsxRuntimeExports;default_1$7=FavoriteBorder.default=(0,_createSvgIcon$7.default)((0,_jsxRuntime$7.jsx)("path",{d:"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3m-4.4 15.55-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05"}),"FavoriteBorder");var ChatBubbleOutline={},_interopRequireDefault$6=interopRequireDefaultExports;Object.defineProperty(ChatBubbleOutline,"__esModule",{value:!0});var default_1$6=ChatBubbleOutline.default=void 0,_createSvgIcon$6=_interopRequireDefault$6(requireCreateSvgIcon()),_jsxRuntime$6=jsxRuntimeExports;default_1$6=ChatBubbleOutline.default=(0,_createSvgIcon$6.default)((0,_jsxRuntime$6.jsx)("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m0 14H6l-2 2V4h16z"}),"ChatBubbleOutline");const BoardItem=({data:_d})=>{const np=rp=>{const ap=new Date(rp),lp=Math.floor((new Date().getTime()-ap.getTime())/1e3);if(lp<60)return"방금 전";const up=lp/60;if(up<60)return`${Math.floor(up)}분 전`;const cp=up/60;if(cp<24)return`${Math.floor(cp)}시간 전`;const dp=cp/24;return dp<7?`${Math.floor(dp)}일 전`:`${ap.toLocaleDateString()}`};return jsxRuntimeExports.jsxs("li",{className:"shadow board-contents",children:[jsxRuntimeExports.jsxs("div",{className:"board-title-area",children:[jsxRuntimeExports.jsx("img",{className:"board-profile",src:_d.profileImageUrl,alt:""}),jsxRuntimeExports.jsx("div",{className:"nick",children:_d.nickName})]}),jsxRuntimeExports.jsx("img",{className:"main-img",src:_d.boardImageUrl,alt:""}),jsxRuntimeExports.jsxs("div",{className:"content",children:[jsxRuntimeExports.jsx("div",{className:"post-text",children:_d.content}),jsxRuntimeExports.jsx("div",{className:"hashtag-list",children:_d.hashtags.map((rp,ap)=>jsxRuntimeExports.jsx("div",{className:"hashtag blue-fc",children:rp},ap))}),jsxRuntimeExports.jsxs("div",{className:"post-bottom",children:[jsxRuntimeExports.jsx("div",{className:"time",children:np(_d.createdAt)}),jsxRuntimeExports.jsxs("div",{className:"post-info",children:[jsxRuntimeExports.jsx("div",{className:"post-icon",children:jsxRuntimeExports.jsx(default_1$6,{})}),jsxRuntimeExports.jsx("div",{className:"comment",children:_d.commentCnt}),jsxRuntimeExports.jsx("div",{className:"post-icon",children:jsxRuntimeExports.jsx(default_1$7,{})}),jsxRuntimeExports.jsx("div",{className:"like",children:_d.likeCnt})]})]})]})]})},api$1=axiosApi(),url="boards";async function getBoardList(_d){try{console.log(_d);const{data:np}=await api$1.get(`${url}?categoryId=${_d}`);return console.log(np),np}catch(np){console.log(np)}}async function getBoardDetail(_d){try{console.log(_d);const{data:np}=await api$1.get(`${url}/${_d}`);return console.log(np),np}catch(np){console.log(np)}}async function deleteBoardPost(_d){try{api$1.defaults.headers.Authorization="eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ1c2VySWQiOiIyNDYyMTcxODExIiwic3ViIjoiIiwiaWF0IjoxNzA3MzU5NTQwLCJleHAiOjE3MDczNjMxNDB9.42KQ9rlOFsFgaUK2tCT6Zely-yBNkQBENzLQ8WarElU",await api$1.delete(`${url}/${_d}`)}catch(np){console.log(np)}}const BoardList=({category:_d,viewType:np})=>{const[rp,ap]=reactExports.useState([]),sp=async()=>{await getBoardList(_d).then(lp=>ap(lp)),console.log(rp)};return reactExports.useEffect(()=>{sp()},[_d]),jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("ul",{className:`${np==0?"full-size":"mini-size"}`,children:rp.boards&&jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:rp.boards.map(lp=>jsxRuntimeExports.jsx(Link,{to:`/media/board/${lp.boardId}`,children:jsxRuntimeExports.jsx(BoardItem,{data:lp})},lp.boardId))})})})},BoardFilter=({category:_d,closeCheck:np})=>{const[rp,ap]=reactExports.useState();return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:"board-filter-area",children:[jsxRuntimeExports.jsx("div",{className:"reset",children:"초기화"}),jsxRuntimeExports.jsx("div",{className:"filter-sub",children:"정렬"}),jsxRuntimeExports.jsxs("div",{className:"sort-area",children:[jsxRuntimeExports.jsxs("label",{className:`sort-label ${rp==="comments"?"blue-bd":""}`,children:["댓글순",jsxRuntimeExports.jsx("input",{type:"radio",className:"sort-type",value:"comment",checked:rp==="comments",onChange:()=>ap("comments")})]}),jsxRuntimeExports.jsxs("label",{className:`sort-label ${rp==="createdAt"?"blue-bd":""}`,children:["최신순",jsxRuntimeExports.jsx("input",{type:"radio",className:"sort-type",value:"createdAt",checked:rp==="createdAt",onChange:()=>ap("createdAt")})]}),jsxRuntimeExports.jsxs("label",{className:`sort-label ${rp==="likes"?"blue-bd":""}`,children:["좋아요순",jsxRuntimeExports.jsx("input",{type:"radio",className:"sort-type",value:"likes",checked:rp==="likes",onChange:()=>ap("likes")})]})]}),_d==1&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"filter-sub",children:"바다 어종"}),jsxRuntimeExports.jsx("div",{className:"filter-sub",children:"민물 어종"})]}),_d==2&&jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("div",{className:"filter-sub",children:"추천태그"})}),jsxRuntimeExports.jsx("div",{className:"filter-button bg-blue shadow",onClick:np,children:"총 개 적용하기"})]})})};var EditNote={},_interopRequireDefault$5=interopRequireDefaultExports;Object.defineProperty(EditNote,"__esModule",{value:!0});var default_1$5=EditNote.default=void 0,_createSvgIcon$5=_interopRequireDefault$5(requireCreateSvgIcon()),_jsxRuntime$5=jsxRuntimeExports;default_1$5=EditNote.default=(0,_createSvgIcon$5.default)((0,_jsxRuntime$5.jsx)("path",{d:"M3 10h11v2H3zm0-2h11V6H3zm0 8h7v-2H3zm15.01-3.13.71-.71c.39-.39 1.02-.39 1.41 0l.71.71c.39.39.39 1.02 0 1.41l-.71.71zm-.71.71-5.3 5.3V21h2.12l5.3-5.3z"}),"EditNote");const BoardPage=()=>{const[_d,np]=reactExports.useState(1),[rp,ap]=reactExports.useState(0),[sp,lp]=reactExports.useState(!1),up=()=>{lp(!1)},cp=hp=>{np(hp)},dp=hp=>{ap(hp)},fp=useNavigate(),pp=()=>{fp("/media/board/create",{state:{categoryId:_d}})};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Header,{}),jsxRuntimeExports.jsxs("div",{className:"category-header",children:[jsxRuntimeExports.jsx("div",{className:`category-title ${_d==1?"active":""}`,onClick:()=>cp(1),children:"물고기"}),jsxRuntimeExports.jsx("div",{className:`category-title ${_d==2?"active":""}`,onClick:()=>cp(2),children:"장소자랑"})]}),jsxRuntimeExports.jsxs("div",{className:"type-select",children:[jsxRuntimeExports.jsx("div",{className:`full ${rp==0&&"active"}`,onClick:()=>dp(0)}),jsxRuntimeExports.jsx("div",{className:`divide ${rp==1&&"active"}`,onClick:()=>dp(1),children:jsxRuntimeExports.jsx(default_1$8,{})}),jsxRuntimeExports.jsx("input",{type:"checkbox",id:"check",checked:sp,onChange:()=>lp(hp=>!hp)}),jsxRuntimeExports.jsx("label",{htmlFor:"check",className:"filter",children:jsxRuntimeExports.jsx("img",{src:filter,alt:""})}),jsxRuntimeExports.jsx("div",{className:"board-filter",children:jsxRuntimeExports.jsx(BoardFilter,{category:_d,closeCheck:up})})]}),_d==1&&jsxRuntimeExports.jsx(BoardList,{category:_d,viewType:rp}),_d==2&&jsxRuntimeExports.jsx(BoardList,{category:_d,viewType:rp}),jsxRuntimeExports.jsx("div",{className:"create-post-btn bg-blue",onClick:()=>pp(),children:jsxRuntimeExports.jsx(default_1$5,{})})]})};var AddOutlined={},_interopRequireDefault$4=interopRequireDefaultExports;Object.defineProperty(AddOutlined,"__esModule",{value:!0});var default_1$4=AddOutlined.default=void 0,_createSvgIcon$4=_interopRequireDefault$4(requireCreateSvgIcon()),_jsxRuntime$4=jsxRuntimeExports;default_1$4=AddOutlined.default=(0,_createSvgIcon$4.default)((0,_jsxRuntime$4.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"AddOutlined");var TagOutlined={},_interopRequireDefault$3=interopRequireDefaultExports;Object.defineProperty(TagOutlined,"__esModule",{value:!0});var default_1$3=TagOutlined.default=void 0,_createSvgIcon$3=_interopRequireDefault$3(requireCreateSvgIcon()),_jsxRuntime$3=jsxRuntimeExports;default_1$3=TagOutlined.default=(0,_createSvgIcon$3.default)((0,_jsxRuntime$3.jsx)("path",{d:"M20 10V8h-4V4h-2v4h-4V4H8v4H4v2h4v4H4v2h4v4h2v-4h4v4h2v-4h4v-2h-4v-4zm-6 4h-4v-4h4z"}),"TagOutlined");const BoardFormItem=({type:_d,categoryId:np})=>{const[rp,ap]=reactExports.useState(""),[sp,lp]=reactExports.useState(""),[up,cp]=reactExports.useState(null),dp=reactExports.useRef(),[fp,pp]=reactExports.useState(""),[hp,mp]=reactExports.useState([]);reactExports.useEffect(()=>(rp!==""&&cp(jsxRuntimeExports.jsx("img",{className:"img_preview",src:sp})),()=>{}),[sp]);const gp=bp=>{console.log("2w"),bp.preventDefault();let Ep=bp.target.files[0],wp=new FileReader;wp.onloadend=_p=>{ap(Ep),lp(wp.result)},Ep&&wp.readAsDataURL(Ep)},vp=bp=>{console.log("cleick"),console.log(up),bp.preventDefault(),dp.current.click()},xp=()=>{console.log("s")},Sp=(bp,Ep)=>{if(bp.key==="Enter"&&Ep==1)mp([fp]),console.log(hp);else if(bp.key==="Enter"&&Ep==2){if(hp.length==5){alert("5개까지 등록가능합니다."),pp("");return}const wp=[...hp,fp];mp(wp),pp("")}},yp=bp=>{console.log(bp);const Ep=hp.filter(wp=>wp!==bp);mp(Ep)};return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:"post-area",children:[jsxRuntimeExports.jsxs("div",{className:"post-item",children:[jsxRuntimeExports.jsxs("div",{className:"post-sub",children:[np==1&&jsxRuntimeExports.jsx("div",{children:"잡은 물고기를 등록해 주세요"}),np==2&&jsxRuntimeExports.jsx("div",{children:"리뷰를 작성해 주세요."})]}),jsxRuntimeExports.jsxs("div",{className:"post-image-upload",children:[up,jsxRuntimeExports.jsx("input",{ref:dp,hidden:!0,id:"file",type:"file",onChange:gp}),jsxRuntimeExports.jsxs("div",{className:`shadow ${rp?"reupload-btn blue-bd":"upload-btn bg-blue"}`,onClick:vp,children:[!rp&&jsxRuntimeExports.jsx(default_1$4,{}),rp&&"이미지 다시 선택하기"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"post-item",children:[jsxRuntimeExports.jsx("div",{className:"post-sub",children:"장소"}),jsxRuntimeExports.jsx("div",{className:"position",children:jsxRuntimeExports.jsx("div",{})})]}),jsxRuntimeExports.jsxs("div",{className:"post-item",children:[jsxRuntimeExports.jsxs("div",{className:"post-sub",children:[np==1&&jsxRuntimeExports.jsx("div",{children:"물고기종류"}),np==2&&jsxRuntimeExports.jsx("div",{children:"해시태그"})]}),jsxRuntimeExports.jsxs("div",{className:"hashtag-add",children:[jsxRuntimeExports.jsx("div",{className:"hashtag-icon shadow bg-blue",children:jsxRuntimeExports.jsx(default_1$3,{})}),np==1&&jsxRuntimeExports.jsx("input",{className:"hashtag-search",type:"text",value:fp,onKeyUp:()=>xp(),onChange:bp=>pp(bp.target.value),onKeyDown:bp=>Sp(bp,np),placeholder:"물고기이름"}),np==2&&jsxRuntimeExports.jsx("input",{className:"hashtag-search",type:"text",value:fp,onKeyUp:()=>xp(),onChange:bp=>pp(bp.target.value),onKeyDown:bp=>Sp(bp,np),placeholder:"최대 5개까지 입력할 수 있어요"})]}),jsxRuntimeExports.jsx("ul",{className:"hashtag-add-area",children:hp.map((bp,Ep)=>jsxRuntimeExports.jsx("li",{className:"blue-bd",onClick:wp=>yp(bp),children:bp},Ep))})]}),jsxRuntimeExports.jsxs("div",{className:"post-item",children:[jsxRuntimeExports.jsx("div",{className:"post-sub",children:"하고싶은 말"}),jsxRuntimeExports.jsx("textarea",{})]}),jsxRuntimeExports.jsxs("div",{className:"post-add-btn bg-blue",children:[_d==="create"&&jsxRuntimeExports.jsx("div",{children:"등록하기"}),_d==="modify"&&jsxRuntimeExports.jsx("div",{children:"수정하기"})]})]})})},you="/assets/공유-NUwAFK4H.jpg";var Send={},_interopRequireDefault$2=interopRequireDefaultExports;Object.defineProperty(Send,"__esModule",{value:!0});var default_1$2=Send.default=void 0,_createSvgIcon$2=_interopRequireDefault$2(requireCreateSvgIcon()),_jsxRuntime$2=jsxRuntimeExports;default_1$2=Send.default=(0,_createSvgIcon$2.default)((0,_jsxRuntime$2.jsx)("path",{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"}),"Send");const BoardDetail=()=>{const _d=useNavigate(),{id:np}=useParams(),[rp,ap]=reactExports.useState([]);reactExports.useEffect(()=>{sp()},[]);const sp=async()=>{await getBoardDetail(np).then(cp=>ap(cp))},lp=async()=>{window.confirm("게시글을 삭제하시겠습니까?")&&await deleteBoardPost(np).then(cp=>{alert("삭제되었습니다."),_d("/media/board")})},up=cp=>{const dp=cp+"",fp=dp.substring(0,10),pp=dp.substring(11,16);return console.log(fp),fp+" "+pp};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Header,{}),rp&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"board-detail-area",children:[jsxRuntimeExports.jsxs("div",{className:"board-detail-item",children:[jsxRuntimeExports.jsxs("div",{className:"board-title",children:[jsxRuntimeExports.jsx("img",{className:"board-detail-profile",src:rp.profileImageUrl,alt:"프로필"}),jsxRuntimeExports.jsx("div",{className:"board-nickname",children:rp.nickName}),jsxRuntimeExports.jsxs("div",{className:"like-area",children:[jsxRuntimeExports.jsx(default_1$7,{}),jsxRuntimeExports.jsx("div",{children:rp.likeCnt})]})]}),jsxRuntimeExports.jsx("img",{className:"board-content-img",src:rp.boardImageUrl,alt:""}),jsxRuntimeExports.jsx("div",{className:"board-text",children:rp.content}),jsxRuntimeExports.jsx("div",{className:"board-hashtag-area",children:rp.hashtags&&jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:rp.hashtags.map((cp,dp)=>jsxRuntimeExports.jsx("div",{className:"blue-fc",children:jsxRuntimeExports.jsx("div",{children:cp})},dp))})}),jsxRuntimeExports.jsxs("div",{className:"btn-area",children:[jsxRuntimeExports.jsx("div",{className:"btn-modify bg-blue",children:"수정"}),jsxRuntimeExports.jsx("div",{className:"btn-delete bg-blue",onClick:()=>lp(),children:"삭제"})]})]}),jsxRuntimeExports.jsx("div",{className:"line bg-blue"}),jsxRuntimeExports.jsxs("div",{className:"board-detail-item",children:[jsxRuntimeExports.jsx("div",{className:"board-place",children:"Place Info"}),jsxRuntimeExports.jsx("div",{className:"board-map"})]}),jsxRuntimeExports.jsx("div",{className:"line bg-blue"}),jsxRuntimeExports.jsxs("div",{className:"reply-area",children:[jsxRuntimeExports.jsxs("div",{className:"reply-title",children:[jsxRuntimeExports.jsx("div",{children:"댓글"}),jsxRuntimeExports.jsx("div",{className:"blue-fc",children:rp.commentCnt})]}),jsxRuntimeExports.jsx("div",{className:"reply-line bg-blue"}),jsxRuntimeExports.jsx("div",{className:"reply-list",children:rp.comments&&jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:rp.comments.map((cp,dp)=>jsxRuntimeExports.jsxs("div",{className:"reply",children:[jsxRuntimeExports.jsx("img",{src:cp.profileImageUrl,alt:""}),jsxRuntimeExports.jsx("div",{children:cp.nickName}),jsxRuntimeExports.jsx("div",{children:up(cp.createdAt)}),jsxRuntimeExports.jsx("div",{children:cp.content})]},dp))})})]})]}),jsxRuntimeExports.jsxs("div",{className:"reply-add",children:[jsxRuntimeExports.jsx("div",{className:"reply-line bg-blue"}),jsxRuntimeExports.jsx("img",{src:you,alt:""}),jsxRuntimeExports.jsxs("div",{className:"reply-add-area",children:[jsxRuntimeExports.jsx("input",{type:"text",placeholder:"댓글작성하기"}),jsxRuntimeExports.jsx("div",{className:"send-reply bg-blue",children:jsxRuntimeExports.jsx(default_1$2,{})})]})]})]})]})},BoardCreate=()=>{var ap;const _d=useLocation(),[np,rp]=reactExports.useState((ap=_d.state)==null?void 0:ap.categoryId);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Header,{}),jsxRuntimeExports.jsx("div",{className:"post-title",children:"글쓰기"}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(BoardFormItem,{type:"create",categoryId:np})})]})},AuthPage=()=>{const{social:_d}=useParams(),rp=new URL(document.URL).searchParams.get("code"),ap=useNavigate();rp||ap("/");const sp=async()=>{console.log(rp),console.log(_d),console.log("https://i10c203.p.ssafy.io");try{const up=(await axios.post(`https://i10c203.p.ssafy.io/api/login/${_d}`,{code:rp})).data.accessToken,cp=await axios.get("https://i10c203.p.ssafy.io/api/users",{headers:{Authorization:up}});localStorage.setItem("jwt",up),localStorage.setItem("user",JSON.stringify({imageUrl:cp.data.imageUrl,nickname:cp.data.nickname})),ap("/",{replace:!0}),console.log(up)}catch(lp){console.log(lp)}};return reactExports.useEffect(()=>{sp()},[]),jsxRuntimeExports.jsx(Loading,{})};var SettingsOutlined={},_interopRequireDefault$1=interopRequireDefaultExports;Object.defineProperty(SettingsOutlined,"__esModule",{value:!0});var default_1$1=SettingsOutlined.default=void 0,_createSvgIcon$1=_interopRequireDefault$1(requireCreateSvgIcon()),_jsxRuntime$1=jsxRuntimeExports;default_1$1=SettingsOutlined.default=(0,_createSvgIcon$1.default)((0,_jsxRuntime$1.jsx)("path",{d:"M19.43 12.98c.04-.32.07-.64.07-.98 0-.34-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.09-.16-.26-.25-.44-.25-.06 0-.12.01-.17.03l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65C14.46 2.18 14.25 2 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1c-.06-.02-.12-.03-.18-.03-.17 0-.34.09-.43.25l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98 0 .33.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46c.09.16.26.25.44.25.06 0 .12-.01.17-.03l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.06.02.12.03.18.03.17 0 .34-.09.43-.25l2-3.46c.12-.22.07-.49-.12-.64zm-1.98-1.71c.04.31.05.52.05.73 0 .21-.02.43-.05.73l-.14 1.13.89.7 1.08.84-.7 1.21-1.27-.51-1.04-.42-.9.68c-.43.32-.84.56-1.25.73l-1.06.43-.16 1.13-.2 1.35h-1.4l-.19-1.35-.16-1.13-1.06-.43c-.43-.18-.83-.41-1.23-.71l-.91-.7-1.06.43-1.27.51-.7-1.21 1.08-.84.89-.7-.14-1.13c-.03-.31-.05-.54-.05-.74s.02-.43.05-.73l.14-1.13-.89-.7-1.08-.84.7-1.21 1.27.51 1.04.42.9-.68c.43-.32.84-.56 1.25-.73l1.06-.43.16-1.13.2-1.35h1.39l.19 1.35.16 1.13 1.06.43c.43.18.83.41 1.23.71l.91.7 1.06-.43 1.27-.51.7 1.21-1.07.85-.89.7zM12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4m0 6c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2"}),"SettingsOutlined");const profile="/assets/default_profile-eZJaJ0xq.jpg";var ArrowForwardIosOutlined={},_interopRequireDefault=interopRequireDefaultExports;Object.defineProperty(ArrowForwardIosOutlined,"__esModule",{value:!0});var default_1=ArrowForwardIosOutlined.default=void 0,_createSvgIcon=_interopRequireDefault(requireCreateSvgIcon()),_jsxRuntime=jsxRuntimeExports;default_1=ArrowForwardIosOutlined.default=(0,_createSvgIcon.default)((0,_jsxRuntime.jsx)("path",{d:"M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"}),"ArrowForwardIosOutlined");const MyPage=()=>{const _d=useNavigate(),np=JSON.parse(localStorage.getItem("user")),rp=()=>{_d("edit")};return np||_d("/",{replace:!0}),jsxRuntimeExports.jsxs("div",{className:"mypage",children:[jsxRuntimeExports.jsx(Header,{centerText:"My 낚시",align:"center"}),jsxRuntimeExports.jsx(default_1$1,{onClick:rp,className:"edit"}),jsxRuntimeExports.jsxs("div",{className:"wrapper",children:[jsxRuntimeExports.jsx("img",{className:"profile",src:(np==null?void 0:np.imageUrl)||profile,alt:""}),jsxRuntimeExports.jsx("div",{className:"user-nick",children:np==null?void 0:np.nickname})]}),jsxRuntimeExports.jsxs("div",{className:"user-content",children:[jsxRuntimeExports.jsxs("button",{children:["나의 물고기",jsxRuntimeExports.jsx(default_1,{})]}),jsxRuntimeExports.jsxs("button",{children:["나의 장소",jsxRuntimeExports.jsx(default_1,{})]}),jsxRuntimeExports.jsxs("button",{className:"later",children:[jsxRuntimeExports.jsx("div",{className:"title",children:"나는야 청소 요정"}),jsxRuntimeExports.jsx("div",{className:"none",children:"오픈 예정"})]})]})]})},TutorialPage=()=>{const _d=reactExports.useRef([]),np=reactExports.useRef([]),[rp,ap]=reactExports.useState(50),[sp,lp]=reactExports.useState(0),[up,cp]=reactExports.useState(0),[dp,fp]=reactExports.useState(!1),[pp,hp]=reactExports.useState([{title:"제목",num:1,imageSrc:you},{title:"제목",num:2,imageSrc:you},{title:"제목",num:3,imageSrc:you},{title:"제목",num:4,imageSrc:you},{title:"제목",num:5,imageSrc:you}]),mp=.02,gp=-.1;reactExports.useEffect(()=>{const xp=_d.current,Sp=np.current,yp=($p,Rp,Pp)=>{const Op=vp([...xp],Pp)[Rp];$p.style.setProperty("--zIndex",Op),$p.style.setProperty("--active",(Rp-Pp)/xp.length)},bp=()=>{const $p=Math.max(0,Math.min(rp,100)),Rp=Math.floor($p/100*(xp.length-1));cp(Rp),xp.forEach((Pp,Op)=>yp(Pp,Op,Rp))};bp();const Ep=$p=>{const Rp=$p.deltaY*mp;ap(Pp=>Pp+Rp),bp()},wp=$p=>{if($p.type==="mousemove"&&Sp.forEach(Op=>{Op.style.transform=`translate(${$p.clientX}px, ${$p.clientY}px)`}),!dp)return;const Rp=$p.clientX||$p.touches&&$p.touches[0].clientX||0,Pp=(Rp-sp)*gp;ap(Op=>Op+Pp),lp(Rp),bp()},_p=$p=>{fp(!0);const Rp=$p.clientX||$p.touches&&$p.touches[0].clientX||0;lp(Rp)},Cp=()=>{fp(!1)};return document.addEventListener("mousewheel",Ep),document.addEventListener("mousedown",_p),document.addEventListener("mousemove",wp),document.addEventListener("mouseup",Cp),document.addEventListener("touchstart",_p),document.addEventListener("touchmove",wp),document.addEventListener("touchend",Cp),()=>{document.removeEventListener("mousewheel",Ep),document.removeEventListener("mousedown",_p),document.removeEventListener("mousemove",wp),document.removeEventListener("mouseup",Cp),document.removeEventListener("touchstart",_p),document.removeEventListener("touchmove",wp),document.removeEventListener("touchend",Cp)}},[rp,dp,sp]);const vp=(xp,Sp)=>xp.map((yp,bp)=>Sp===bp?xp.length:xp.length-Math.abs(Sp-bp));return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"carousel-body"}),jsxRuntimeExports.jsx("div",{className:"carousel",children:pp.map((xp,Sp)=>jsxRuntimeExports.jsx("div",{ref:yp=>_d.current[Sp]=yp,className:"carousel-item",children:jsxRuntimeExports.jsxs("div",{className:"carousel-box",children:[jsxRuntimeExports.jsx("div",{className:"title",children:xp.title}),jsxRuntimeExports.jsx("div",{className:"num",children:xp.num}),jsxRuntimeExports.jsx("img",{src:xp.imageSrc,alt:xp.title})]})},Sp))})]})},fishKing="/assets/fish_king-dNUI1omU.png";function ChatBotChattingForm({onChat:_d,loadingState:np,setLoadingState:rp}){const[ap,sp]=reactExports.useState(""),lp=dp=>{sp(dp.target.value)},up=dp=>{dp.key==="Enter"&&dp.target.value.trim()!==""&&(dp.preventDefault(),cp(dp))},cp=dp=>{dp.preventDefault(),_d(ap),sp(""),rp(!np)};return reactExports.useEffect(()=>{sp(np?"답변을 준비중이에요":"")},[np]),jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs("div",{className:"reply-add",children:[jsxRuntimeExports.jsx("div",{className:"reply-line bg-blue"}),jsxRuntimeExports.jsx("img",{src:you,alt:""}),jsxRuntimeExports.jsxs("div",{className:"reply-add-area",children:[jsxRuntimeExports.jsx("input",{className:"chatbot-input",value:ap,type:"text",placeholder:"메세지 보내기...",onChange:lp,onKeyPress:up,readOnly:np}),ap.trim()!==""&&jsxRuntimeExports.jsx("div",{className:"send-reply bg-blue",onClick:cp,children:jsxRuntimeExports.jsx(default_1$2,{})})]})]})})})}function ChatBotLoading(){return jsxRuntimeExports.jsxs("div",{className:"chatBotLoading",children:[jsxRuntimeExports.jsx("div",{className:"chatBotLoading-bounce1"}),jsxRuntimeExports.jsx("div",{className:"chatBotLoading-bounce2"}),jsxRuntimeExports.jsx("div",{className:"chatBotLoading-bounce3"})]})}function ChatBotChattingList(_d){const np=useNavigate(),rp=reactExports.useRef(),ap=reactExports.useRef(null),sp=reactExports.useRef(null),[lp,up]=reactExports.useState(!1),[cp,dp]=reactExports.useState(!0),fp=_d.chattingList,pp=[{tutorial:"튜토리얼"},{"fish/map":"지도"},{fishbook:"도감"},{"media/roomList":"라이브방송"},{"media/board":"게시판"}],hp=()=>{sp.current&&clearTimeout(sp.current),sp.current=setTimeout(()=>{const gp=ap.current.scrollTop,vp=ap.current.clientHeight,xp=ap.current.scrollHeight;dp(gp+vp>=xp-100)},100)},mp=reactExports.useCallback(()=>{hp()},[]);return reactExports.useEffect(()=>{up(!0),cp&&rp.current.scrollIntoView({behavior:"smooth"}),up(!1)},[fp,cp]),reactExports.useEffect(()=>(ap.current.addEventListener("scroll",mp),()=>{sp.current&&clearTimeout(sp.current),ap.current&&ap.current.removeEventListener("scroll",mp)}),[mp]),console.log(fp),jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{ref:ap,className:"message-box",children:[fp.map((gp,vp)=>jsxRuntimeExports.jsxs("div",{className:gp.user==="bot"?"message-bot":"message-user",children:[gp.user==="bot"&&gp.imgURL&&jsxRuntimeExports.jsx("div",{className:"message-bot-content",children:jsxRuntimeExports.jsx("img",{className:"message-bot-img",src:gp.imgURL,alt:""})}),gp.chat==="loading"?jsxRuntimeExports.jsx(ChatBotLoading,{}):jsxRuntimeExports.jsx("div",{className:"message-content",children:gp.chat}),gp.user==="bot"&&gp.move&&jsxRuntimeExports.jsxs("div",{onClick:()=>np(`/${gp.move}`),className:"message-bot-move",children:[jsxRuntimeExports.jsx("span",{children:pp.find(xp=>xp[gp.move])[gp.move]})," 이동하기"]})]},vp)),jsxRuntimeExports.jsx("div",{ref:rp}),lp&&jsxRuntimeExports.jsx(Loading,{})]})})}const api=axiosApi();async function postSendChat(_d){const np=localStorage.getItem("jwt");try{api.defaults.headers.Authorization=np;const{data:rp}=await api.post("/api/chatbot",{inputText:_d});return rp}catch(rp){console.log(rp)}}function ChatBot(){const _d=useNavigate(),[np,rp]=reactExports.useState([]),[ap,sp]=reactExports.useState(!1),lp=["봉돌 알아보기","캐스팅은 어떻게 해요?","금어기는 언제에요?"],up=async dp=>{rp(fp=>[...fp,{user:"user",chat:dp,imgURL:null,move:null}]),rp(fp=>[...fp,{user:"bot",chat:"loading",imgURL:null,move:null}]),sp(!0),await postSendChat(dp).then(fp=>{console.log(fp),sp(!1),rp(pp=>{let hp=[...pp];return hp[hp.length-1]={user:"bot",chat:fp.text,imgURL:fp.imageUrl,move:fp.move},hp})})},cp=dp=>{up(dp.target.textContent)};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"chatbot-sticky",children:[jsxRuntimeExports.jsx(Header,{onClick:()=>_d("/")}),jsxRuntimeExports.jsxs("div",{className:"chatbot-header",children:[jsxRuntimeExports.jsx("img",{src:fishKing,className:"chatbot-fishking"}),jsxRuntimeExports.jsx("span",{children:"낚시왕"})]})]}),jsxRuntimeExports.jsxs("div",{className:"chatbot-body",children:[jsxRuntimeExports.jsx("div",{className:"chatbot-chat-container",children:jsxRuntimeExports.jsx("div",{className:"chatbot-start-ment",children:jsxRuntimeExports.jsxs("div",{className:"chatbot-startChat",children:[jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("span",{children:"따뜻한 갈치"}),"님, 안녕하세요."]}),jsxRuntimeExports.jsx("p",{children:"낚시왕입니다."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{children:"어떤 사항이 궁금하신가요?"})]})})}),jsxRuntimeExports.jsx("div",{className:"chatbot-chat-container",children:jsxRuntimeExports.jsxs("div",{className:"chatbot-recommend-div",children:[jsxRuntimeExports.jsx("div",{className:"recomend-title",children:jsxRuntimeExports.jsx("span",{children:"자주 묻는 질문"})}),jsxRuntimeExports.jsx("div",{className:"recommend-ment",children:"낚시왕 추천, 똑똑하게 낚시하자!"}),lp.map((dp,fp)=>jsxRuntimeExports.jsx("div",{className:"chatbot-recommend",onClick:cp,children:dp},fp))]})})]}),jsxRuntimeExports.jsx(ChatBotChattingList,{chattingList:np}),jsxRuntimeExports.jsx(ChatBotChattingForm,{onChat:up,loadingState:ap,setLoadingState:sp})]})}const MyPageEdit=()=>{const _d="https://i10c203.p.ssafy.io",np=JSON.parse(localStorage.getItem("user")),[rp,ap]=reactExports.useState(np==null?void 0:np.nickname),sp=useNavigate(),[lp,up]=reactExports.useState(!1),cp=()=>{axios.delete(`${_d}/api/log-out`,{headers:{Authorization:localStorage.getItem("jwt"),"Content-Type":"application/json"}}).then(hp=>{console.log(hp),localStorage.removeItem("jwt"),localStorage.removeItem("user"),sp("/",{replace:!0})}).catch(hp=>{console.log(hp)})},dp=hp=>{ap(hp.target.value)},fp=()=>{up(!0)},pp=async()=>{try{await axios.delete("https://i10c203.p.ssafy.io/api/users",{headers:{Authorization:localStorage.getItem("jwt")}}),localStorage.removeItem("jwt"),localStorage.removeItem("user"),sp("/",{replace:!0})}catch(hp){console.log(hp)}};return jsxRuntimeExports.jsxs("div",{className:"mypage-edit",children:[jsxRuntimeExports.jsx(Header,{centerText:"My 정보수정",align:"center"}),jsxRuntimeExports.jsx("div",{className:"complete",children:"완료"}),jsxRuntimeExports.jsx("div",{className:"profile",children:jsxRuntimeExports.jsx("img",{src:(np==null?void 0:np.imageUrl)||profile,alt:"",className:"profile-img"})}),jsxRuntimeExports.jsxs("div",{className:"user-info",children:[jsxRuntimeExports.jsx("div",{className:"info-title",children:"닉네임"}),jsxRuntimeExports.jsx("input",{className:"info-nick",type:"text",value:rp,onChange:dp})]}),jsxRuntimeExports.jsxs("div",{className:"user-change",children:[jsxRuntimeExports.jsx("button",{className:"logout",onClick:cp,children:"로그아웃"}),jsxRuntimeExports.jsx("button",{className:"resign",onClick:fp,children:"회원탈퇴"})]}),lp&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"filter-open",onClick:()=>up(!1)}),jsxRuntimeExports.jsxs("div",{className:"filter-content",children:[jsxRuntimeExports.jsx("h2",{children:"회원 탈퇴"}),jsxRuntimeExports.jsxs("div",{className:"leave-content",children:[jsxRuntimeExports.jsx("div",{children:"회원 탈퇴 시 계정 정보가 삭제되어 복구가 불가해요"}),jsxRuntimeExports.jsx("div",{children:"정말로 탈퇴하시겠어요?"})]}),jsxRuntimeExports.jsxs("div",{className:"btn",children:[jsxRuntimeExports.jsx("button",{className:"cancel",onClick:()=>up(!1),children:"더 써볼래요"}),jsxRuntimeExports.jsx("button",{className:"leave",onClick:pp,children:"떠날래요"})]})]})]})]})};function App(){return jsxRuntimeExports.jsxs(Routes,{children:[jsxRuntimeExports.jsxs(Route,{path:"/",element:jsxRuntimeExports.jsx(Navbar,{}),children:[jsxRuntimeExports.jsx(Route,{index:!0,element:jsxRuntimeExports.jsx(HomePage,{})}),jsxRuntimeExports.jsxs(Route,{path:"fish",children:[jsxRuntimeExports.jsx(Route,{path:"image/result",element:jsxRuntimeExports.jsx(ImageResultPage,{})}),jsxRuntimeExports.jsx(Route,{path:"map",element:jsxRuntimeExports.jsx(FishMapPage,{})})]}),jsxRuntimeExports.jsxs(Route,{path:"media",children:[jsxRuntimeExports.jsx(Route,{index:!0,element:jsxRuntimeExports.jsx(MediaPage,{})}),jsxRuntimeExports.jsxs(Route,{path:"roomList",children:[jsxRuntimeExports.jsx(Route,{index:!0,element:jsxRuntimeExports.jsx(RoomList,{})}),jsxRuntimeExports.jsx(Route,{path:"create",children:jsxRuntimeExports.jsx(Route,{index:!0,element:jsxRuntimeExports.jsx(CreateRoom,{})})})]}),jsxRuntimeExports.jsx(Route,{path:"board",children:jsxRuntimeExports.jsx(Route,{index:!0,element:jsxRuntimeExports.jsx(BoardPage,{})})})]}),jsxRuntimeExports.jsxs(Route,{path:"user/mypage",children:[jsxRuntimeExports.jsx(Route,{index:!0,element:jsxRuntimeExports.jsx(MyPage,{})}),jsxRuntimeExports.jsx(Route,{path:"edit",element:jsxRuntimeExports.jsx(MyPageEdit,{})})]})]}),jsxRuntimeExports.jsxs(Route,{path:"media",children:[jsxRuntimeExports.jsx(Route,{index:!0,element:jsxRuntimeExports.jsx(MediaPage,{})}),jsxRuntimeExports.jsxs(Route,{path:"board",children:[jsxRuntimeExports.jsx(Route,{index:!0,element:jsxRuntimeExports.jsx(BoardPage,{})}),jsxRuntimeExports.jsx(Route,{path:"create",element:jsxRuntimeExports.jsx(BoardCreate,{})}),jsxRuntimeExports.jsx(Route,{path:":id",element:jsxRuntimeExports.jsx(BoardDetail,{})})]})]}),jsxRuntimeExports.jsx(Route,{path:"/tutorial",children:jsxRuntimeExports.jsx(Route,{index:!0,element:jsxRuntimeExports.jsx(TutorialPage,{})})}),jsxRuntimeExports.jsxs(Route,{path:"/fish",children:[jsxRuntimeExports.jsx(Route,{path:"map",children:jsxRuntimeExports.jsx(Route,{path:":idx",element:jsxRuntimeExports.jsx(FishMapDetailPage,{})})}),jsxRuntimeExports.jsx(Route,{path:"image/edit",element:jsxRuntimeExports.jsx(ImageEditPage,{})})]}),jsxRuntimeExports.jsxs(Route,{path:"/fishbook",children:[jsxRuntimeExports.jsx(Route,{index:!0,element:jsxRuntimeExports.jsx(FishBook,{})}),jsxRuntimeExports.jsx(Route,{path:":id",element:jsxRuntimeExports.jsx(FishBookDetailPage,{})})]}),jsxRuntimeExports.jsxs(Route,{path:"/login",children:[jsxRuntimeExports.jsx(Route,{index:!0,element:jsxRuntimeExports.jsx(LoginPage,{})}),jsxRuntimeExports.jsx(Route,{path:":social",element:jsxRuntimeExports.jsx(AuthPage,{})})]}),jsxRuntimeExports.jsx(Route,{path:"/live/:id",element:jsxRuntimeExports.jsx(VideoRoomComponent,{})}),jsxRuntimeExports.jsx(Route,{path:"/chatBot",children:jsxRuntimeExports.jsx(Route,{index:!0,element:jsxRuntimeExports.jsx(ChatBot,{})})})]})}client.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(Recoil_index_5,{children:jsxRuntimeExports.jsx(BrowserRouter,{children:jsxRuntimeExports.jsx(App,{})})}));
