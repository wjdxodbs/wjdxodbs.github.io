var Wm=Object.defineProperty;var Gm=(_d,rp,np)=>rp in _d?Wm(_d,rp,{enumerable:!0,configurable:!0,writable:!0,value:np}):_d[rp]=np;var Pm=(_d,rp,np)=>(Gm(_d,typeof rp!="symbol"?rp+"":rp,np),np);function _mergeNamespaces(_d,rp){for(var np=0;np<rp.length;np++){const ap=rp[np];if(typeof ap!="string"&&!Array.isArray(ap)){for(const sp in ap)if(sp!=="default"&&!(sp in _d)){const lp=Object.getOwnPropertyDescriptor(ap,sp);lp&&Object.defineProperty(_d,sp,lp.get?lp:{enumerable:!0,get:()=>ap[sp]})}}}return Object.freeze(Object.defineProperty(_d,Symbol.toStringTag,{value:"Module"}))}(function(){const rp=document.createElement("link").relList;if(rp&&rp.supports&&rp.supports("modulepreload"))return;for(const sp of document.querySelectorAll('link[rel="modulepreload"]'))ap(sp);new MutationObserver(sp=>{for(const lp of sp)if(lp.type==="childList")for(const up of lp.addedNodes)up.tagName==="LINK"&&up.rel==="modulepreload"&&ap(up)}).observe(document,{childList:!0,subtree:!0});function np(sp){const lp={};return sp.integrity&&(lp.integrity=sp.integrity),sp.referrerPolicy&&(lp.referrerPolicy=sp.referrerPolicy),sp.crossOrigin==="use-credentials"?lp.credentials="include":sp.crossOrigin==="anonymous"?lp.credentials="omit":lp.credentials="same-origin",lp}function ap(sp){if(sp.ep)return;sp.ep=!0;const lp=np(sp);fetch(sp.href,lp)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(_d){return _d&&_d.__esModule&&Object.prototype.hasOwnProperty.call(_d,"default")?_d.default:_d}function getAugmentedNamespace(_d){if(_d.__esModule)return _d;var rp=_d.default;if(typeof rp=="function"){var np=function ap(){return this instanceof ap?Reflect.construct(rp,arguments,this.constructor):rp.apply(this,arguments)};np.prototype=rp.prototype}else np={};return Object.defineProperty(np,"__esModule",{value:!0}),Object.keys(_d).forEach(function(ap){var sp=Object.getOwnPropertyDescriptor(_d,ap);Object.defineProperty(np,ap,sp.get?sp:{enumerable:!0,get:function(){return _d[ap]}})}),np}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$3=Symbol.for("react.element"),n$3=Symbol.for("react.portal"),p$3=Symbol.for("react.fragment"),q$2=Symbol.for("react.strict_mode"),r$2=Symbol.for("react.profiler"),t$2=Symbol.for("react.provider"),u$1=Symbol.for("react.context"),v$3=Symbol.for("react.forward_ref"),w$2=Symbol.for("react.suspense"),x$1=Symbol.for("react.memo"),y$1=Symbol.for("react.lazy"),z$2=Symbol.iterator;function A$2(_d){return _d===null||typeof _d!="object"?null:(_d=z$2&&_d[z$2]||_d["@@iterator"],typeof _d=="function"?_d:null)}var B$2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$2=Object.assign,D$2={};function E$2(_d,rp,np){this.props=_d,this.context=rp,this.refs=D$2,this.updater=np||B$2}E$2.prototype.isReactComponent={};E$2.prototype.setState=function(_d,rp){if(typeof _d!="object"&&typeof _d!="function"&&_d!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,_d,rp,"setState")};E$2.prototype.forceUpdate=function(_d){this.updater.enqueueForceUpdate(this,_d,"forceUpdate")};function F$1(){}F$1.prototype=E$2.prototype;function G$2(_d,rp,np){this.props=_d,this.context=rp,this.refs=D$2,this.updater=np||B$2}var H$2=G$2.prototype=new F$1;H$2.constructor=G$2;C$2(H$2,E$2.prototype);H$2.isPureReactComponent=!0;var I$2=Array.isArray,J$1=Object.prototype.hasOwnProperty,K$2={current:null},L$2={key:!0,ref:!0,__self:!0,__source:!0};function M$2(_d,rp,np){var ap,sp={},lp=null,up=null;if(rp!=null)for(ap in rp.ref!==void 0&&(up=rp.ref),rp.key!==void 0&&(lp=""+rp.key),rp)J$1.call(rp,ap)&&!L$2.hasOwnProperty(ap)&&(sp[ap]=rp[ap]);var cp=arguments.length-2;if(cp===1)sp.children=np;else if(1<cp){for(var dp=Array(cp),fp=0;fp<cp;fp++)dp[fp]=arguments[fp+2];sp.children=dp}if(_d&&_d.defaultProps)for(ap in cp=_d.defaultProps,cp)sp[ap]===void 0&&(sp[ap]=cp[ap]);return{$$typeof:l$3,type:_d,key:lp,ref:up,props:sp,_owner:K$2.current}}function N$2(_d,rp){return{$$typeof:l$3,type:_d.type,key:rp,ref:_d.ref,props:_d.props,_owner:_d._owner}}function O$2(_d){return typeof _d=="object"&&_d!==null&&_d.$$typeof===l$3}function escape(_d){var rp={"=":"=0",":":"=2"};return"$"+_d.replace(/[=:]/g,function(np){return rp[np]})}var P$2=/\/+/g;function Q$2(_d,rp){return typeof _d=="object"&&_d!==null&&_d.key!=null?escape(""+_d.key):rp.toString(36)}function R$3(_d,rp,np,ap,sp){var lp=typeof _d;(lp==="undefined"||lp==="boolean")&&(_d=null);var up=!1;if(_d===null)up=!0;else switch(lp){case"string":case"number":up=!0;break;case"object":switch(_d.$$typeof){case l$3:case n$3:up=!0}}if(up)return up=_d,sp=sp(up),_d=ap===""?"."+Q$2(up,0):ap,I$2(sp)?(np="",_d!=null&&(np=_d.replace(P$2,"$&/")+"/"),R$3(sp,rp,np,"",function(fp){return fp})):sp!=null&&(O$2(sp)&&(sp=N$2(sp,np+(!sp.key||up&&up.key===sp.key?"":(""+sp.key).replace(P$2,"$&/")+"/")+_d)),rp.push(sp)),1;if(up=0,ap=ap===""?".":ap+":",I$2(_d))for(var cp=0;cp<_d.length;cp++){lp=_d[cp];var dp=ap+Q$2(lp,cp);up+=R$3(lp,rp,np,dp,sp)}else if(dp=A$2(_d),typeof dp=="function")for(_d=dp.call(_d),cp=0;!(lp=_d.next()).done;)lp=lp.value,dp=ap+Q$2(lp,cp++),up+=R$3(lp,rp,np,dp,sp);else if(lp==="object")throw rp=String(_d),Error("Objects are not valid as a React child (found: "+(rp==="[object Object]"?"object with keys {"+Object.keys(_d).join(", ")+"}":rp)+"). If you meant to render a collection of children, use an array instead.");return up}function S$2(_d,rp,np){if(_d==null)return _d;var ap=[],sp=0;return R$3(_d,ap,"","",function(lp){return rp.call(np,lp,sp++)}),ap}function T$2(_d){if(_d._status===-1){var rp=_d._result;rp=rp(),rp.then(function(np){(_d._status===0||_d._status===-1)&&(_d._status=1,_d._result=np)},function(np){(_d._status===0||_d._status===-1)&&(_d._status=2,_d._result=np)}),_d._status===-1&&(_d._status=0,_d._result=rp)}if(_d._status===1)return _d._result.default;throw _d._result}var U$2={current:null},V$2={transition:null},W$2={ReactCurrentDispatcher:U$2,ReactCurrentBatchConfig:V$2,ReactCurrentOwner:K$2};react_production_min.Children={map:S$2,forEach:function(_d,rp,np){S$2(_d,function(){rp.apply(this,arguments)},np)},count:function(_d){var rp=0;return S$2(_d,function(){rp++}),rp},toArray:function(_d){return S$2(_d,function(rp){return rp})||[]},only:function(_d){if(!O$2(_d))throw Error("React.Children.only expected to receive a single React element child.");return _d}};react_production_min.Component=E$2;react_production_min.Fragment=p$3;react_production_min.Profiler=r$2;react_production_min.PureComponent=G$2;react_production_min.StrictMode=q$2;react_production_min.Suspense=w$2;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$2;react_production_min.cloneElement=function(_d,rp,np){if(_d==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+_d+".");var ap=C$2({},_d.props),sp=_d.key,lp=_d.ref,up=_d._owner;if(rp!=null){if(rp.ref!==void 0&&(lp=rp.ref,up=K$2.current),rp.key!==void 0&&(sp=""+rp.key),_d.type&&_d.type.defaultProps)var cp=_d.type.defaultProps;for(dp in rp)J$1.call(rp,dp)&&!L$2.hasOwnProperty(dp)&&(ap[dp]=rp[dp]===void 0&&cp!==void 0?cp[dp]:rp[dp])}var dp=arguments.length-2;if(dp===1)ap.children=np;else if(1<dp){cp=Array(dp);for(var fp=0;fp<dp;fp++)cp[fp]=arguments[fp+2];ap.children=cp}return{$$typeof:l$3,type:_d.type,key:sp,ref:lp,props:ap,_owner:up}};react_production_min.createContext=function(_d){return _d={$$typeof:u$1,_currentValue:_d,_currentValue2:_d,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},_d.Provider={$$typeof:t$2,_context:_d},_d.Consumer=_d};react_production_min.createElement=M$2;react_production_min.createFactory=function(_d){var rp=M$2.bind(null,_d);return rp.type=_d,rp};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(_d){return{$$typeof:v$3,render:_d}};react_production_min.isValidElement=O$2;react_production_min.lazy=function(_d){return{$$typeof:y$1,_payload:{_status:-1,_result:_d},_init:T$2}};react_production_min.memo=function(_d,rp){return{$$typeof:x$1,type:_d,compare:rp===void 0?null:rp}};react_production_min.startTransition=function(_d){var rp=V$2.transition;V$2.transition={};try{_d()}finally{V$2.transition=rp}};react_production_min.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};react_production_min.useCallback=function(_d,rp){return U$2.current.useCallback(_d,rp)};react_production_min.useContext=function(_d){return U$2.current.useContext(_d)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(_d){return U$2.current.useDeferredValue(_d)};react_production_min.useEffect=function(_d,rp){return U$2.current.useEffect(_d,rp)};react_production_min.useId=function(){return U$2.current.useId()};react_production_min.useImperativeHandle=function(_d,rp,np){return U$2.current.useImperativeHandle(_d,rp,np)};react_production_min.useInsertionEffect=function(_d,rp){return U$2.current.useInsertionEffect(_d,rp)};react_production_min.useLayoutEffect=function(_d,rp){return U$2.current.useLayoutEffect(_d,rp)};react_production_min.useMemo=function(_d,rp){return U$2.current.useMemo(_d,rp)};react_production_min.useReducer=function(_d,rp,np){return U$2.current.useReducer(_d,rp,np)};react_production_min.useRef=function(_d){return U$2.current.useRef(_d)};react_production_min.useState=function(_d){return U$2.current.useState(_d)};react_production_min.useSyncExternalStore=function(_d,rp,np){return U$2.current.useSyncExternalStore(_d,rp,np)};react_production_min.useTransition=function(){return U$2.current.useTransition()};react_production_min.version="18.2.0";react.exports=react_production_min;var reactExports=react.exports;const React=getDefaultExportFromCjs(reactExports),React$1=_mergeNamespaces({__proto__:null,default:React},[reactExports]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$2=reactExports,k$2=Symbol.for("react.element"),l$2=Symbol.for("react.fragment"),m$2=Object.prototype.hasOwnProperty,n$2=f$2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$2={key:!0,ref:!0,__self:!0,__source:!0};function q$1(_d,rp,np){var ap,sp={},lp=null,up=null;np!==void 0&&(lp=""+np),rp.key!==void 0&&(lp=""+rp.key),rp.ref!==void 0&&(up=rp.ref);for(ap in rp)m$2.call(rp,ap)&&!p$2.hasOwnProperty(ap)&&(sp[ap]=rp[ap]);if(_d&&_d.defaultProps)for(ap in rp=_d.defaultProps,rp)sp[ap]===void 0&&(sp[ap]=rp[ap]);return{$$typeof:k$2,type:_d,key:lp,ref:up,props:sp,_owner:n$2.current}}reactJsxRuntime_production_min.Fragment=l$2;reactJsxRuntime_production_min.jsx=q$1;reactJsxRuntime_production_min.jsxs=q$1;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(_d){function rp(Tp,Np){var jp=Tp.length;Tp.push(Np);e:for(;0<jp;){var Vp=jp-1>>>1,zp=Tp[Vp];if(0<sp(zp,Np))Tp[Vp]=Np,Tp[jp]=zp,jp=Vp;else break e}}function np(Tp){return Tp.length===0?null:Tp[0]}function ap(Tp){if(Tp.length===0)return null;var Np=Tp[0],jp=Tp.pop();if(jp!==Np){Tp[0]=jp;e:for(var Vp=0,zp=Tp.length,Wp=zp>>>1;Vp<Wp;){var Up=2*(Vp+1)-1,qp=Tp[Up],Bp=Up+1,Yp=Tp[Bp];if(0>sp(qp,jp))Bp<zp&&0>sp(Yp,qp)?(Tp[Vp]=Yp,Tp[Bp]=jp,Vp=Bp):(Tp[Vp]=qp,Tp[Up]=jp,Vp=Up);else if(Bp<zp&&0>sp(Yp,jp))Tp[Vp]=Yp,Tp[Bp]=jp,Vp=Bp;else break e}}return Np}function sp(Tp,Np){var jp=Tp.sortIndex-Np.sortIndex;return jp!==0?jp:Tp.id-Np.id}if(typeof performance=="object"&&typeof performance.now=="function"){var lp=performance;_d.unstable_now=function(){return lp.now()}}else{var up=Date,cp=up.now();_d.unstable_now=function(){return up.now()-cp}}var dp=[],fp=[],pp=1,hp=null,mp=3,gp=!1,vp=!1,xp=!1,Sp=typeof setTimeout=="function"?setTimeout:null,yp=typeof clearTimeout=="function"?clearTimeout:null,bp=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Ep(Tp){for(var Np=np(fp);Np!==null;){if(Np.callback===null)ap(fp);else if(Np.startTime<=Tp)ap(fp),Np.sortIndex=Np.expirationTime,rp(dp,Np);else break;Np=np(fp)}}function wp(Tp){if(xp=!1,Ep(Tp),!vp)if(np(dp)!==null)vp=!0,Ip(_p);else{var Np=np(fp);Np!==null&&Pp(wp,Np.startTime-Tp)}}function _p(Tp,Np){vp=!1,xp&&(xp=!1,yp(Cp),Cp=-1),gp=!0;var jp=mp;try{for(Ep(Np),hp=np(dp);hp!==null&&(!(hp.expirationTime>Np)||Tp&&!Lp());){var Vp=hp.callback;if(typeof Vp=="function"){hp.callback=null,mp=hp.priorityLevel;var zp=Vp(hp.expirationTime<=Np);Np=_d.unstable_now(),typeof zp=="function"?hp.callback=zp:hp===np(dp)&&ap(dp),Ep(Np)}else ap(dp);hp=np(dp)}if(hp!==null)var Wp=!0;else{var Up=np(fp);Up!==null&&Pp(wp,Up.startTime-Np),Wp=!1}return Wp}finally{hp=null,mp=jp,gp=!1}}var Rp=!1,$p=null,Cp=-1,Ap=5,Op=-1;function Lp(){return!(_d.unstable_now()-Op<Ap)}function Mp(){if($p!==null){var Tp=_d.unstable_now();Op=Tp;var Np=!0;try{Np=$p(!0,Tp)}finally{Np?kp():(Rp=!1,$p=null)}}else Rp=!1}var kp;if(typeof bp=="function")kp=function(){bp(Mp)};else if(typeof MessageChannel<"u"){var Dp=new MessageChannel,Fp=Dp.port2;Dp.port1.onmessage=Mp,kp=function(){Fp.postMessage(null)}}else kp=function(){Sp(Mp,0)};function Ip(Tp){$p=Tp,Rp||(Rp=!0,kp())}function Pp(Tp,Np){Cp=Sp(function(){Tp(_d.unstable_now())},Np)}_d.unstable_IdlePriority=5,_d.unstable_ImmediatePriority=1,_d.unstable_LowPriority=4,_d.unstable_NormalPriority=3,_d.unstable_Profiling=null,_d.unstable_UserBlockingPriority=2,_d.unstable_cancelCallback=function(Tp){Tp.callback=null},_d.unstable_continueExecution=function(){vp||gp||(vp=!0,Ip(_p))},_d.unstable_forceFrameRate=function(Tp){0>Tp||125<Tp?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ap=0<Tp?Math.floor(1e3/Tp):5},_d.unstable_getCurrentPriorityLevel=function(){return mp},_d.unstable_getFirstCallbackNode=function(){return np(dp)},_d.unstable_next=function(Tp){switch(mp){case 1:case 2:case 3:var Np=3;break;default:Np=mp}var jp=mp;mp=Np;try{return Tp()}finally{mp=jp}},_d.unstable_pauseExecution=function(){},_d.unstable_requestPaint=function(){},_d.unstable_runWithPriority=function(Tp,Np){switch(Tp){case 1:case 2:case 3:case 4:case 5:break;default:Tp=3}var jp=mp;mp=Tp;try{return Np()}finally{mp=jp}},_d.unstable_scheduleCallback=function(Tp,Np,jp){var Vp=_d.unstable_now();switch(typeof jp=="object"&&jp!==null?(jp=jp.delay,jp=typeof jp=="number"&&0<jp?Vp+jp:Vp):jp=Vp,Tp){case 1:var zp=-1;break;case 2:zp=250;break;case 5:zp=1073741823;break;case 4:zp=1e4;break;default:zp=5e3}return zp=jp+zp,Tp={id:pp++,callback:Np,priorityLevel:Tp,startTime:jp,expirationTime:zp,sortIndex:-1},jp>Vp?(Tp.sortIndex=jp,rp(fp,Tp),np(dp)===null&&Tp===np(fp)&&(xp?(yp(Cp),Cp=-1):xp=!0,Pp(wp,jp-Vp))):(Tp.sortIndex=zp,rp(dp,Tp),vp||gp||(vp=!0,Ip(_p))),Tp},_d.unstable_shouldYield=Lp,_d.unstable_wrapCallback=function(Tp){var Np=mp;return function(){var jp=mp;mp=Np;try{return Tp.apply(this,arguments)}finally{mp=jp}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa$1=reactExports,ca$1=schedulerExports;function p$1(_d){for(var rp="https://reactjs.org/docs/error-decoder.html?invariant="+_d,np=1;np<arguments.length;np++)rp+="&args[]="+encodeURIComponent(arguments[np]);return"Minified React error #"+_d+"; visit "+rp+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da$1=new Set,ea$1={};function fa$1(_d,rp){ha$1(_d,rp),ha$1(_d+"Capture",rp)}function ha$1(_d,rp){for(ea$1[_d]=rp,_d=0;_d<rp.length;_d++)da$1.add(rp[_d])}var ia$1=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja$1=Object.prototype.hasOwnProperty,ka$1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la$1={},ma$1={};function oa$1(_d){return ja$1.call(ma$1,_d)?!0:ja$1.call(la$1,_d)?!1:ka$1.test(_d)?ma$1[_d]=!0:(la$1[_d]=!0,!1)}function pa$1(_d,rp,np,ap){if(np!==null&&np.type===0)return!1;switch(typeof rp){case"function":case"symbol":return!0;case"boolean":return ap?!1:np!==null?!np.acceptsBooleans:(_d=_d.toLowerCase().slice(0,5),_d!=="data-"&&_d!=="aria-");default:return!1}}function qa$1(_d,rp,np,ap){if(rp===null||typeof rp>"u"||pa$1(_d,rp,np,ap))return!0;if(ap)return!1;if(np!==null)switch(np.type){case 3:return!rp;case 4:return rp===!1;case 5:return isNaN(rp);case 6:return isNaN(rp)||1>rp}return!1}function v$2(_d,rp,np,ap,sp,lp,up){this.acceptsBooleans=rp===2||rp===3||rp===4,this.attributeName=ap,this.attributeNamespace=sp,this.mustUseProperty=np,this.propertyName=_d,this.type=rp,this.sanitizeURL=lp,this.removeEmptyString=up}var z$1={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(_d){z$1[_d]=new v$2(_d,0,!1,_d,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(_d){var rp=_d[0];z$1[rp]=new v$2(rp,1,!1,_d[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(_d){z$1[_d]=new v$2(_d,2,!1,_d.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(_d){z$1[_d]=new v$2(_d,2,!1,_d,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(_d){z$1[_d]=new v$2(_d,3,!1,_d.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(_d){z$1[_d]=new v$2(_d,3,!0,_d,null,!1,!1)});["capture","download"].forEach(function(_d){z$1[_d]=new v$2(_d,4,!1,_d,null,!1,!1)});["cols","rows","size","span"].forEach(function(_d){z$1[_d]=new v$2(_d,6,!1,_d,null,!1,!1)});["rowSpan","start"].forEach(function(_d){z$1[_d]=new v$2(_d,5,!1,_d.toLowerCase(),null,!1,!1)});var ra$1=/[\-:]([a-z])/g;function sa$1(_d){return _d[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(_d){var rp=_d.replace(ra$1,sa$1);z$1[rp]=new v$2(rp,1,!1,_d,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(_d){var rp=_d.replace(ra$1,sa$1);z$1[rp]=new v$2(rp,1,!1,_d,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(_d){var rp=_d.replace(ra$1,sa$1);z$1[rp]=new v$2(rp,1,!1,_d,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(_d){z$1[_d]=new v$2(_d,1,!1,_d.toLowerCase(),null,!1,!1)});z$1.xlinkHref=new v$2("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(_d){z$1[_d]=new v$2(_d,1,!1,_d.toLowerCase(),null,!0,!0)});function ta$1(_d,rp,np,ap){var sp=z$1.hasOwnProperty(rp)?z$1[rp]:null;(sp!==null?sp.type!==0:ap||!(2<rp.length)||rp[0]!=="o"&&rp[0]!=="O"||rp[1]!=="n"&&rp[1]!=="N")&&(qa$1(rp,np,sp,ap)&&(np=null),ap||sp===null?oa$1(rp)&&(np===null?_d.removeAttribute(rp):_d.setAttribute(rp,""+np)):sp.mustUseProperty?_d[sp.propertyName]=np===null?sp.type===3?!1:"":np:(rp=sp.attributeName,ap=sp.attributeNamespace,np===null?_d.removeAttribute(rp):(sp=sp.type,np=sp===3||sp===4&&np===!0?"":""+np,ap?_d.setAttributeNS(ap,rp,np):_d.setAttribute(rp,np))))}var ua$1=aa$1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va$1=Symbol.for("react.element"),wa$1=Symbol.for("react.portal"),ya$1=Symbol.for("react.fragment"),za$1=Symbol.for("react.strict_mode"),Aa$1=Symbol.for("react.profiler"),Ba$1=Symbol.for("react.provider"),Ca$1=Symbol.for("react.context"),Da$1=Symbol.for("react.forward_ref"),Ea$1=Symbol.for("react.suspense"),Fa$1=Symbol.for("react.suspense_list"),Ga$1=Symbol.for("react.memo"),Ha$1=Symbol.for("react.lazy"),Ia$1=Symbol.for("react.offscreen"),Ja$1=Symbol.iterator;function Ka$1(_d){return _d===null||typeof _d!="object"?null:(_d=Ja$1&&_d[Ja$1]||_d["@@iterator"],typeof _d=="function"?_d:null)}var A$1=Object.assign,La$1;function Ma$1(_d){if(La$1===void 0)try{throw Error()}catch(np){var rp=np.stack.trim().match(/\n( *(at )?)/);La$1=rp&&rp[1]||""}return`
`+La$1+_d}var Na$1=!1;function Oa$1(_d,rp){if(!_d||Na$1)return"";Na$1=!0;var np=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(rp)if(rp=function(){throw Error()},Object.defineProperty(rp.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(rp,[])}catch(fp){var ap=fp}Reflect.construct(_d,[],rp)}else{try{rp.call()}catch(fp){ap=fp}_d.call(rp.prototype)}else{try{throw Error()}catch(fp){ap=fp}_d()}}catch(fp){if(fp&&ap&&typeof fp.stack=="string"){for(var sp=fp.stack.split(`
`),lp=ap.stack.split(`
`),up=sp.length-1,cp=lp.length-1;1<=up&&0<=cp&&sp[up]!==lp[cp];)cp--;for(;1<=up&&0<=cp;up--,cp--)if(sp[up]!==lp[cp]){if(up!==1||cp!==1)do if(up--,cp--,0>cp||sp[up]!==lp[cp]){var dp=`
`+sp[up].replace(" at new "," at ");return _d.displayName&&dp.includes("<anonymous>")&&(dp=dp.replace("<anonymous>",_d.displayName)),dp}while(1<=up&&0<=cp);break}}}finally{Na$1=!1,Error.prepareStackTrace=np}return(_d=_d?_d.displayName||_d.name:"")?Ma$1(_d):""}function Pa$1(_d){switch(_d.tag){case 5:return Ma$1(_d.type);case 16:return Ma$1("Lazy");case 13:return Ma$1("Suspense");case 19:return Ma$1("SuspenseList");case 0:case 2:case 15:return _d=Oa$1(_d.type,!1),_d;case 11:return _d=Oa$1(_d.type.render,!1),_d;case 1:return _d=Oa$1(_d.type,!0),_d;default:return""}}function Qa$1(_d){if(_d==null)return null;if(typeof _d=="function")return _d.displayName||_d.name||null;if(typeof _d=="string")return _d;switch(_d){case ya$1:return"Fragment";case wa$1:return"Portal";case Aa$1:return"Profiler";case za$1:return"StrictMode";case Ea$1:return"Suspense";case Fa$1:return"SuspenseList"}if(typeof _d=="object")switch(_d.$$typeof){case Ca$1:return(_d.displayName||"Context")+".Consumer";case Ba$1:return(_d._context.displayName||"Context")+".Provider";case Da$1:var rp=_d.render;return _d=_d.displayName,_d||(_d=rp.displayName||rp.name||"",_d=_d!==""?"ForwardRef("+_d+")":"ForwardRef"),_d;case Ga$1:return rp=_d.displayName||null,rp!==null?rp:Qa$1(_d.type)||"Memo";case Ha$1:rp=_d._payload,_d=_d._init;try{return Qa$1(_d(rp))}catch{}}return null}function Ra$1(_d){var rp=_d.type;switch(_d.tag){case 24:return"Cache";case 9:return(rp.displayName||"Context")+".Consumer";case 10:return(rp._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return _d=rp.render,_d=_d.displayName||_d.name||"",rp.displayName||(_d!==""?"ForwardRef("+_d+")":"ForwardRef");case 7:return"Fragment";case 5:return rp;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa$1(rp);case 8:return rp===za$1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof rp=="function")return rp.displayName||rp.name||null;if(typeof rp=="string")return rp}return null}function Sa$1(_d){switch(typeof _d){case"boolean":case"number":case"string":case"undefined":return _d;case"object":return _d;default:return""}}function Ta$1(_d){var rp=_d.type;return(_d=_d.nodeName)&&_d.toLowerCase()==="input"&&(rp==="checkbox"||rp==="radio")}function Ua$1(_d){var rp=Ta$1(_d)?"checked":"value",np=Object.getOwnPropertyDescriptor(_d.constructor.prototype,rp),ap=""+_d[rp];if(!_d.hasOwnProperty(rp)&&typeof np<"u"&&typeof np.get=="function"&&typeof np.set=="function"){var sp=np.get,lp=np.set;return Object.defineProperty(_d,rp,{configurable:!0,get:function(){return sp.call(this)},set:function(up){ap=""+up,lp.call(this,up)}}),Object.defineProperty(_d,rp,{enumerable:np.enumerable}),{getValue:function(){return ap},setValue:function(up){ap=""+up},stopTracking:function(){_d._valueTracker=null,delete _d[rp]}}}}function Va$1(_d){_d._valueTracker||(_d._valueTracker=Ua$1(_d))}function Wa$1(_d){if(!_d)return!1;var rp=_d._valueTracker;if(!rp)return!0;var np=rp.getValue(),ap="";return _d&&(ap=Ta$1(_d)?_d.checked?"true":"false":_d.value),_d=ap,_d!==np?(rp.setValue(_d),!0):!1}function Xa$1(_d){if(_d=_d||(typeof document<"u"?document:void 0),typeof _d>"u")return null;try{return _d.activeElement||_d.body}catch{return _d.body}}function Ya$1(_d,rp){var np=rp.checked;return A$1({},rp,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:np??_d._wrapperState.initialChecked})}function Za$1(_d,rp){var np=rp.defaultValue==null?"":rp.defaultValue,ap=rp.checked!=null?rp.checked:rp.defaultChecked;np=Sa$1(rp.value!=null?rp.value:np),_d._wrapperState={initialChecked:ap,initialValue:np,controlled:rp.type==="checkbox"||rp.type==="radio"?rp.checked!=null:rp.value!=null}}function ab(_d,rp){rp=rp.checked,rp!=null&&ta$1(_d,"checked",rp,!1)}function bb(_d,rp){ab(_d,rp);var np=Sa$1(rp.value),ap=rp.type;if(np!=null)ap==="number"?(np===0&&_d.value===""||_d.value!=np)&&(_d.value=""+np):_d.value!==""+np&&(_d.value=""+np);else if(ap==="submit"||ap==="reset"){_d.removeAttribute("value");return}rp.hasOwnProperty("value")?cb(_d,rp.type,np):rp.hasOwnProperty("defaultValue")&&cb(_d,rp.type,Sa$1(rp.defaultValue)),rp.checked==null&&rp.defaultChecked!=null&&(_d.defaultChecked=!!rp.defaultChecked)}function db(_d,rp,np){if(rp.hasOwnProperty("value")||rp.hasOwnProperty("defaultValue")){var ap=rp.type;if(!(ap!=="submit"&&ap!=="reset"||rp.value!==void 0&&rp.value!==null))return;rp=""+_d._wrapperState.initialValue,np||rp===_d.value||(_d.value=rp),_d.defaultValue=rp}np=_d.name,np!==""&&(_d.name=""),_d.defaultChecked=!!_d._wrapperState.initialChecked,np!==""&&(_d.name=np)}function cb(_d,rp,np){(rp!=="number"||Xa$1(_d.ownerDocument)!==_d)&&(np==null?_d.defaultValue=""+_d._wrapperState.initialValue:_d.defaultValue!==""+np&&(_d.defaultValue=""+np))}var eb=Array.isArray;function fb(_d,rp,np,ap){if(_d=_d.options,rp){rp={};for(var sp=0;sp<np.length;sp++)rp["$"+np[sp]]=!0;for(np=0;np<_d.length;np++)sp=rp.hasOwnProperty("$"+_d[np].value),_d[np].selected!==sp&&(_d[np].selected=sp),sp&&ap&&(_d[np].defaultSelected=!0)}else{for(np=""+Sa$1(np),rp=null,sp=0;sp<_d.length;sp++){if(_d[sp].value===np){_d[sp].selected=!0,ap&&(_d[sp].defaultSelected=!0);return}rp!==null||_d[sp].disabled||(rp=_d[sp])}rp!==null&&(rp.selected=!0)}}function gb(_d,rp){if(rp.dangerouslySetInnerHTML!=null)throw Error(p$1(91));return A$1({},rp,{value:void 0,defaultValue:void 0,children:""+_d._wrapperState.initialValue})}function hb(_d,rp){var np=rp.value;if(np==null){if(np=rp.children,rp=rp.defaultValue,np!=null){if(rp!=null)throw Error(p$1(92));if(eb(np)){if(1<np.length)throw Error(p$1(93));np=np[0]}rp=np}rp==null&&(rp=""),np=rp}_d._wrapperState={initialValue:Sa$1(np)}}function ib(_d,rp){var np=Sa$1(rp.value),ap=Sa$1(rp.defaultValue);np!=null&&(np=""+np,np!==_d.value&&(_d.value=np),rp.defaultValue==null&&_d.defaultValue!==np&&(_d.defaultValue=np)),ap!=null&&(_d.defaultValue=""+ap)}function jb(_d){var rp=_d.textContent;rp===_d._wrapperState.initialValue&&rp!==""&&rp!==null&&(_d.value=rp)}function kb(_d){switch(_d){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(_d,rp){return _d==null||_d==="http://www.w3.org/1999/xhtml"?kb(rp):_d==="http://www.w3.org/2000/svg"&&rp==="foreignObject"?"http://www.w3.org/1999/xhtml":_d}var mb,nb=function(_d){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(rp,np,ap,sp){MSApp.execUnsafeLocalFunction(function(){return _d(rp,np,ap,sp)})}:_d}(function(_d,rp){if(_d.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in _d)_d.innerHTML=rp;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+rp.valueOf().toString()+"</svg>",rp=mb.firstChild;_d.firstChild;)_d.removeChild(_d.firstChild);for(;rp.firstChild;)_d.appendChild(rp.firstChild)}});function ob(_d,rp){if(rp){var np=_d.firstChild;if(np&&np===_d.lastChild&&np.nodeType===3){np.nodeValue=rp;return}}_d.textContent=rp}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(_d){qb.forEach(function(rp){rp=rp+_d.charAt(0).toUpperCase()+_d.substring(1),pb[rp]=pb[_d]})});function rb(_d,rp,np){return rp==null||typeof rp=="boolean"||rp===""?"":np||typeof rp!="number"||rp===0||pb.hasOwnProperty(_d)&&pb[_d]?(""+rp).trim():rp+"px"}function sb(_d,rp){_d=_d.style;for(var np in rp)if(rp.hasOwnProperty(np)){var ap=np.indexOf("--")===0,sp=rb(np,rp[np],ap);np==="float"&&(np="cssFloat"),ap?_d.setProperty(np,sp):_d[np]=sp}}var tb=A$1({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(_d,rp){if(rp){if(tb[_d]&&(rp.children!=null||rp.dangerouslySetInnerHTML!=null))throw Error(p$1(137,_d));if(rp.dangerouslySetInnerHTML!=null){if(rp.children!=null)throw Error(p$1(60));if(typeof rp.dangerouslySetInnerHTML!="object"||!("__html"in rp.dangerouslySetInnerHTML))throw Error(p$1(61))}if(rp.style!=null&&typeof rp.style!="object")throw Error(p$1(62))}}function vb(_d,rp){if(_d.indexOf("-")===-1)return typeof rp.is=="string";switch(_d){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(_d){return _d=_d.target||_d.srcElement||window,_d.correspondingUseElement&&(_d=_d.correspondingUseElement),_d.nodeType===3?_d.parentNode:_d}var yb=null,zb=null,Ab=null;function Bb(_d){if(_d=Cb(_d)){if(typeof yb!="function")throw Error(p$1(280));var rp=_d.stateNode;rp&&(rp=Db(rp),yb(_d.stateNode,_d.type,rp))}}function Eb(_d){zb?Ab?Ab.push(_d):Ab=[_d]:zb=_d}function Fb(){if(zb){var _d=zb,rp=Ab;if(Ab=zb=null,Bb(_d),rp)for(_d=0;_d<rp.length;_d++)Bb(rp[_d])}}function Gb(_d,rp){return _d(rp)}function Hb(){}var Ib=!1;function Jb(_d,rp,np){if(Ib)return _d(rp,np);Ib=!0;try{return Gb(_d,rp,np)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(_d,rp){var np=_d.stateNode;if(np===null)return null;var ap=Db(np);if(ap===null)return null;np=ap[rp];e:switch(rp){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(ap=!ap.disabled)||(_d=_d.type,ap=!(_d==="button"||_d==="input"||_d==="select"||_d==="textarea")),_d=!ap;break e;default:_d=!1}if(_d)return null;if(np&&typeof np!="function")throw Error(p$1(231,rp,typeof np));return np}var Lb=!1;if(ia$1)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(_d,rp,np,ap,sp,lp,up,cp,dp){var fp=Array.prototype.slice.call(arguments,3);try{rp.apply(np,fp)}catch(pp){this.onError(pp)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(_d){Ob=!0,Pb=_d}};function Tb(_d,rp,np,ap,sp,lp,up,cp,dp){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(_d,rp,np,ap,sp,lp,up,cp,dp){if(Tb.apply(this,arguments),Ob){if(Ob){var fp=Pb;Ob=!1,Pb=null}else throw Error(p$1(198));Qb||(Qb=!0,Rb=fp)}}function Vb(_d){var rp=_d,np=_d;if(_d.alternate)for(;rp.return;)rp=rp.return;else{_d=rp;do rp=_d,rp.flags&4098&&(np=rp.return),_d=rp.return;while(_d)}return rp.tag===3?np:null}function Wb(_d){if(_d.tag===13){var rp=_d.memoizedState;if(rp===null&&(_d=_d.alternate,_d!==null&&(rp=_d.memoizedState)),rp!==null)return rp.dehydrated}return null}function Xb(_d){if(Vb(_d)!==_d)throw Error(p$1(188))}function Yb(_d){var rp=_d.alternate;if(!rp){if(rp=Vb(_d),rp===null)throw Error(p$1(188));return rp!==_d?null:_d}for(var np=_d,ap=rp;;){var sp=np.return;if(sp===null)break;var lp=sp.alternate;if(lp===null){if(ap=sp.return,ap!==null){np=ap;continue}break}if(sp.child===lp.child){for(lp=sp.child;lp;){if(lp===np)return Xb(sp),_d;if(lp===ap)return Xb(sp),rp;lp=lp.sibling}throw Error(p$1(188))}if(np.return!==ap.return)np=sp,ap=lp;else{for(var up=!1,cp=sp.child;cp;){if(cp===np){up=!0,np=sp,ap=lp;break}if(cp===ap){up=!0,ap=sp,np=lp;break}cp=cp.sibling}if(!up){for(cp=lp.child;cp;){if(cp===np){up=!0,np=lp,ap=sp;break}if(cp===ap){up=!0,ap=lp,np=sp;break}cp=cp.sibling}if(!up)throw Error(p$1(189))}}if(np.alternate!==ap)throw Error(p$1(190))}if(np.tag!==3)throw Error(p$1(188));return np.stateNode.current===np?_d:rp}function Zb(_d){return _d=Yb(_d),_d!==null?$b(_d):null}function $b(_d){if(_d.tag===5||_d.tag===6)return _d;for(_d=_d.child;_d!==null;){var rp=$b(_d);if(rp!==null)return rp;_d=_d.sibling}return null}var ac$1=ca$1.unstable_scheduleCallback,bc$1=ca$1.unstable_cancelCallback,cc$1=ca$1.unstable_shouldYield,dc$1=ca$1.unstable_requestPaint,B$1=ca$1.unstable_now,ec$1=ca$1.unstable_getCurrentPriorityLevel,fc$1=ca$1.unstable_ImmediatePriority,gc$1=ca$1.unstable_UserBlockingPriority,hc$1=ca$1.unstable_NormalPriority,ic$1=ca$1.unstable_LowPriority,jc$1=ca$1.unstable_IdlePriority,kc$1=null,lc$1=null;function mc$1(_d){if(lc$1&&typeof lc$1.onCommitFiberRoot=="function")try{lc$1.onCommitFiberRoot(kc$1,_d,void 0,(_d.current.flags&128)===128)}catch{}}var oc$1=Math.clz32?Math.clz32:nc$1,pc$1=Math.log,qc$1=Math.LN2;function nc$1(_d){return _d>>>=0,_d===0?32:31-(pc$1(_d)/qc$1|0)|0}var rc$1=64,sc$1=4194304;function tc$1(_d){switch(_d&-_d){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return _d&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return _d&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return _d}}function uc$1(_d,rp){var np=_d.pendingLanes;if(np===0)return 0;var ap=0,sp=_d.suspendedLanes,lp=_d.pingedLanes,up=np&268435455;if(up!==0){var cp=up&~sp;cp!==0?ap=tc$1(cp):(lp&=up,lp!==0&&(ap=tc$1(lp)))}else up=np&~sp,up!==0?ap=tc$1(up):lp!==0&&(ap=tc$1(lp));if(ap===0)return 0;if(rp!==0&&rp!==ap&&!(rp&sp)&&(sp=ap&-ap,lp=rp&-rp,sp>=lp||sp===16&&(lp&4194240)!==0))return rp;if(ap&4&&(ap|=np&16),rp=_d.entangledLanes,rp!==0)for(_d=_d.entanglements,rp&=ap;0<rp;)np=31-oc$1(rp),sp=1<<np,ap|=_d[np],rp&=~sp;return ap}function vc$1(_d,rp){switch(_d){case 1:case 2:case 4:return rp+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return rp+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc$1(_d,rp){for(var np=_d.suspendedLanes,ap=_d.pingedLanes,sp=_d.expirationTimes,lp=_d.pendingLanes;0<lp;){var up=31-oc$1(lp),cp=1<<up,dp=sp[up];dp===-1?(!(cp&np)||cp&ap)&&(sp[up]=vc$1(cp,rp)):dp<=rp&&(_d.expiredLanes|=cp),lp&=~cp}}function xc$1(_d){return _d=_d.pendingLanes&-1073741825,_d!==0?_d:_d&1073741824?1073741824:0}function yc$1(){var _d=rc$1;return rc$1<<=1,!(rc$1&4194240)&&(rc$1=64),_d}function zc$1(_d){for(var rp=[],np=0;31>np;np++)rp.push(_d);return rp}function Ac$1(_d,rp,np){_d.pendingLanes|=rp,rp!==536870912&&(_d.suspendedLanes=0,_d.pingedLanes=0),_d=_d.eventTimes,rp=31-oc$1(rp),_d[rp]=np}function Bc$1(_d,rp){var np=_d.pendingLanes&~rp;_d.pendingLanes=rp,_d.suspendedLanes=0,_d.pingedLanes=0,_d.expiredLanes&=rp,_d.mutableReadLanes&=rp,_d.entangledLanes&=rp,rp=_d.entanglements;var ap=_d.eventTimes;for(_d=_d.expirationTimes;0<np;){var sp=31-oc$1(np),lp=1<<sp;rp[sp]=0,ap[sp]=-1,_d[sp]=-1,np&=~lp}}function Cc$1(_d,rp){var np=_d.entangledLanes|=rp;for(_d=_d.entanglements;np;){var ap=31-oc$1(np),sp=1<<ap;sp&rp|_d[ap]&rp&&(_d[ap]|=rp),np&=~sp}}var C$1=0;function Dc$1(_d){return _d&=-_d,1<_d?4<_d?_d&268435455?16:536870912:4:1}var Ec$1,Fc$1,Gc$1,Hc$1,Ic$1,Jc$1=!1,Kc$1=[],Lc$1=null,Mc$1=null,Nc$1=null,Oc$1=new Map,Pc$1=new Map,Qc$1=[],Rc$1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc$1(_d,rp){switch(_d){case"focusin":case"focusout":Lc$1=null;break;case"dragenter":case"dragleave":Mc$1=null;break;case"mouseover":case"mouseout":Nc$1=null;break;case"pointerover":case"pointerout":Oc$1.delete(rp.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc$1.delete(rp.pointerId)}}function Tc$1(_d,rp,np,ap,sp,lp){return _d===null||_d.nativeEvent!==lp?(_d={blockedOn:rp,domEventName:np,eventSystemFlags:ap,nativeEvent:lp,targetContainers:[sp]},rp!==null&&(rp=Cb(rp),rp!==null&&Fc$1(rp)),_d):(_d.eventSystemFlags|=ap,rp=_d.targetContainers,sp!==null&&rp.indexOf(sp)===-1&&rp.push(sp),_d)}function Uc$1(_d,rp,np,ap,sp){switch(rp){case"focusin":return Lc$1=Tc$1(Lc$1,_d,rp,np,ap,sp),!0;case"dragenter":return Mc$1=Tc$1(Mc$1,_d,rp,np,ap,sp),!0;case"mouseover":return Nc$1=Tc$1(Nc$1,_d,rp,np,ap,sp),!0;case"pointerover":var lp=sp.pointerId;return Oc$1.set(lp,Tc$1(Oc$1.get(lp)||null,_d,rp,np,ap,sp)),!0;case"gotpointercapture":return lp=sp.pointerId,Pc$1.set(lp,Tc$1(Pc$1.get(lp)||null,_d,rp,np,ap,sp)),!0}return!1}function Vc$1(_d){var rp=Wc$1(_d.target);if(rp!==null){var np=Vb(rp);if(np!==null){if(rp=np.tag,rp===13){if(rp=Wb(np),rp!==null){_d.blockedOn=rp,Ic$1(_d.priority,function(){Gc$1(np)});return}}else if(rp===3&&np.stateNode.current.memoizedState.isDehydrated){_d.blockedOn=np.tag===3?np.stateNode.containerInfo:null;return}}}_d.blockedOn=null}function Xc$1(_d){if(_d.blockedOn!==null)return!1;for(var rp=_d.targetContainers;0<rp.length;){var np=Yc$1(_d.domEventName,_d.eventSystemFlags,rp[0],_d.nativeEvent);if(np===null){np=_d.nativeEvent;var ap=new np.constructor(np.type,np);wb=ap,np.target.dispatchEvent(ap),wb=null}else return rp=Cb(np),rp!==null&&Fc$1(rp),_d.blockedOn=np,!1;rp.shift()}return!0}function Zc$1(_d,rp,np){Xc$1(_d)&&np.delete(rp)}function $c$1(){Jc$1=!1,Lc$1!==null&&Xc$1(Lc$1)&&(Lc$1=null),Mc$1!==null&&Xc$1(Mc$1)&&(Mc$1=null),Nc$1!==null&&Xc$1(Nc$1)&&(Nc$1=null),Oc$1.forEach(Zc$1),Pc$1.forEach(Zc$1)}function ad(_d,rp){_d.blockedOn===rp&&(_d.blockedOn=null,Jc$1||(Jc$1=!0,ca$1.unstable_scheduleCallback(ca$1.unstable_NormalPriority,$c$1)))}function bd(_d){function rp(sp){return ad(sp,_d)}if(0<Kc$1.length){ad(Kc$1[0],_d);for(var np=1;np<Kc$1.length;np++){var ap=Kc$1[np];ap.blockedOn===_d&&(ap.blockedOn=null)}}for(Lc$1!==null&&ad(Lc$1,_d),Mc$1!==null&&ad(Mc$1,_d),Nc$1!==null&&ad(Nc$1,_d),Oc$1.forEach(rp),Pc$1.forEach(rp),np=0;np<Qc$1.length;np++)ap=Qc$1[np],ap.blockedOn===_d&&(ap.blockedOn=null);for(;0<Qc$1.length&&(np=Qc$1[0],np.blockedOn===null);)Vc$1(np),np.blockedOn===null&&Qc$1.shift()}var cd=ua$1.ReactCurrentBatchConfig,dd=!0;function ed(_d,rp,np,ap){var sp=C$1,lp=cd.transition;cd.transition=null;try{C$1=1,fd(_d,rp,np,ap)}finally{C$1=sp,cd.transition=lp}}function gd(_d,rp,np,ap){var sp=C$1,lp=cd.transition;cd.transition=null;try{C$1=4,fd(_d,rp,np,ap)}finally{C$1=sp,cd.transition=lp}}function fd(_d,rp,np,ap){if(dd){var sp=Yc$1(_d,rp,np,ap);if(sp===null)hd(_d,rp,ap,id$2,np),Sc$1(_d,ap);else if(Uc$1(sp,_d,rp,np,ap))ap.stopPropagation();else if(Sc$1(_d,ap),rp&4&&-1<Rc$1.indexOf(_d)){for(;sp!==null;){var lp=Cb(sp);if(lp!==null&&Ec$1(lp),lp=Yc$1(_d,rp,np,ap),lp===null&&hd(_d,rp,ap,id$2,np),lp===sp)break;sp=lp}sp!==null&&ap.stopPropagation()}else hd(_d,rp,ap,null,np)}}var id$2=null;function Yc$1(_d,rp,np,ap){if(id$2=null,_d=xb(ap),_d=Wc$1(_d),_d!==null)if(rp=Vb(_d),rp===null)_d=null;else if(np=rp.tag,np===13){if(_d=Wb(rp),_d!==null)return _d;_d=null}else if(np===3){if(rp.stateNode.current.memoizedState.isDehydrated)return rp.tag===3?rp.stateNode.containerInfo:null;_d=null}else rp!==_d&&(_d=null);return id$2=_d,null}function jd(_d){switch(_d){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec$1()){case fc$1:return 1;case gc$1:return 4;case hc$1:case ic$1:return 16;case jc$1:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var _d,rp=ld,np=rp.length,ap,sp="value"in kd?kd.value:kd.textContent,lp=sp.length;for(_d=0;_d<np&&rp[_d]===sp[_d];_d++);var up=np-_d;for(ap=1;ap<=up&&rp[np-ap]===sp[lp-ap];ap++);return md=sp.slice(_d,1<ap?1-ap:void 0)}function od(_d){var rp=_d.keyCode;return"charCode"in _d?(_d=_d.charCode,_d===0&&rp===13&&(_d=13)):_d=rp,_d===10&&(_d=13),32<=_d||_d===13?_d:0}function pd(){return!0}function qd(){return!1}function rd(_d){function rp(np,ap,sp,lp,up){this._reactName=np,this._targetInst=sp,this.type=ap,this.nativeEvent=lp,this.target=up,this.currentTarget=null;for(var cp in _d)_d.hasOwnProperty(cp)&&(np=_d[cp],this[cp]=np?np(lp):lp[cp]);return this.isDefaultPrevented=(lp.defaultPrevented!=null?lp.defaultPrevented:lp.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A$1(rp.prototype,{preventDefault:function(){this.defaultPrevented=!0;var np=this.nativeEvent;np&&(np.preventDefault?np.preventDefault():typeof np.returnValue!="unknown"&&(np.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var np=this.nativeEvent;np&&(np.stopPropagation?np.stopPropagation():typeof np.cancelBubble!="unknown"&&(np.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),rp}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(_d){return _d.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A$1({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A$1({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(_d){return _d.relatedTarget===void 0?_d.fromElement===_d.srcElement?_d.toElement:_d.fromElement:_d.relatedTarget},movementX:function(_d){return"movementX"in _d?_d.movementX:(_d!==yd&&(yd&&_d.type==="mousemove"?(wd=_d.screenX-yd.screenX,xd=_d.screenY-yd.screenY):xd=wd=0,yd=_d),wd)},movementY:function(_d){return"movementY"in _d?_d.movementY:xd}}),Bd=rd(Ad),Cd=A$1({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A$1({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A$1({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A$1({},sd,{clipboardData:function(_d){return"clipboardData"in _d?_d.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A$1({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(_d){var rp=this.nativeEvent;return rp.getModifierState?rp.getModifierState(_d):(_d=Od[_d])?!!rp[_d]:!1}function zd(){return Pd}var Qd=A$1({},ud,{key:function(_d){if(_d.key){var rp=Md[_d.key]||_d.key;if(rp!=="Unidentified")return rp}return _d.type==="keypress"?(_d=od(_d),_d===13?"Enter":String.fromCharCode(_d)):_d.type==="keydown"||_d.type==="keyup"?Nd[_d.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(_d){return _d.type==="keypress"?od(_d):0},keyCode:function(_d){return _d.type==="keydown"||_d.type==="keyup"?_d.keyCode:0},which:function(_d){return _d.type==="keypress"?od(_d):_d.type==="keydown"||_d.type==="keyup"?_d.keyCode:0}}),Rd=rd(Qd),Sd=A$1({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A$1({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A$1({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A$1({},Ad,{deltaX:function(_d){return"deltaX"in _d?_d.deltaX:"wheelDeltaX"in _d?-_d.wheelDeltaX:0},deltaY:function(_d){return"deltaY"in _d?_d.deltaY:"wheelDeltaY"in _d?-_d.wheelDeltaY:"wheelDelta"in _d?-_d.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae$1=ia$1&&"CompositionEvent"in window,be$1=null;ia$1&&"documentMode"in document&&(be$1=document.documentMode);var ce$1=ia$1&&"TextEvent"in window&&!be$1,de$1=ia$1&&(!ae$1||be$1&&8<be$1&&11>=be$1),ee$1=" ",fe$1=!1;function ge$1(_d,rp){switch(_d){case"keyup":return $d.indexOf(rp.keyCode)!==-1;case"keydown":return rp.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he$1(_d){return _d=_d.detail,typeof _d=="object"&&"data"in _d?_d.data:null}var ie$1=!1;function je$1(_d,rp){switch(_d){case"compositionend":return he$1(rp);case"keypress":return rp.which!==32?null:(fe$1=!0,ee$1);case"textInput":return _d=rp.data,_d===ee$1&&fe$1?null:_d;default:return null}}function ke$1(_d,rp){if(ie$1)return _d==="compositionend"||!ae$1&&ge$1(_d,rp)?(_d=nd(),md=ld=kd=null,ie$1=!1,_d):null;switch(_d){case"paste":return null;case"keypress":if(!(rp.ctrlKey||rp.altKey||rp.metaKey)||rp.ctrlKey&&rp.altKey){if(rp.char&&1<rp.char.length)return rp.char;if(rp.which)return String.fromCharCode(rp.which)}return null;case"compositionend":return de$1&&rp.locale!=="ko"?null:rp.data;default:return null}}var le$1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me$1(_d){var rp=_d&&_d.nodeName&&_d.nodeName.toLowerCase();return rp==="input"?!!le$1[_d.type]:rp==="textarea"}function ne$1(_d,rp,np,ap){Eb(ap),rp=oe$1(rp,"onChange"),0<rp.length&&(np=new td("onChange","change",null,np,ap),_d.push({event:np,listeners:rp}))}var pe$1=null,qe$1=null;function re$3(_d){se$1(_d,0)}function te$1(_d){var rp=ue$1(_d);if(Wa$1(rp))return _d}function ve$1(_d,rp){if(_d==="change")return rp}var we$1=!1;if(ia$1){var xe$1;if(ia$1){var ye$1="oninput"in document;if(!ye$1){var ze$1=document.createElement("div");ze$1.setAttribute("oninput","return;"),ye$1=typeof ze$1.oninput=="function"}xe$1=ye$1}else xe$1=!1;we$1=xe$1&&(!document.documentMode||9<document.documentMode)}function Ae$1(){pe$1&&(pe$1.detachEvent("onpropertychange",Be$1),qe$1=pe$1=null)}function Be$1(_d){if(_d.propertyName==="value"&&te$1(qe$1)){var rp=[];ne$1(rp,qe$1,_d,xb(_d)),Jb(re$3,rp)}}function Ce$1(_d,rp,np){_d==="focusin"?(Ae$1(),pe$1=rp,qe$1=np,pe$1.attachEvent("onpropertychange",Be$1)):_d==="focusout"&&Ae$1()}function De$1(_d){if(_d==="selectionchange"||_d==="keyup"||_d==="keydown")return te$1(qe$1)}function Ee$1(_d,rp){if(_d==="click")return te$1(rp)}function Fe$1(_d,rp){if(_d==="input"||_d==="change")return te$1(rp)}function Ge$1(_d,rp){return _d===rp&&(_d!==0||1/_d===1/rp)||_d!==_d&&rp!==rp}var He$1=typeof Object.is=="function"?Object.is:Ge$1;function Ie$1(_d,rp){if(He$1(_d,rp))return!0;if(typeof _d!="object"||_d===null||typeof rp!="object"||rp===null)return!1;var np=Object.keys(_d),ap=Object.keys(rp);if(np.length!==ap.length)return!1;for(ap=0;ap<np.length;ap++){var sp=np[ap];if(!ja$1.call(rp,sp)||!He$1(_d[sp],rp[sp]))return!1}return!0}function Je$1(_d){for(;_d&&_d.firstChild;)_d=_d.firstChild;return _d}function Ke$1(_d,rp){var np=Je$1(_d);_d=0;for(var ap;np;){if(np.nodeType===3){if(ap=_d+np.textContent.length,_d<=rp&&ap>=rp)return{node:np,offset:rp-_d};_d=ap}e:{for(;np;){if(np.nextSibling){np=np.nextSibling;break e}np=np.parentNode}np=void 0}np=Je$1(np)}}function Le$1(_d,rp){return _d&&rp?_d===rp?!0:_d&&_d.nodeType===3?!1:rp&&rp.nodeType===3?Le$1(_d,rp.parentNode):"contains"in _d?_d.contains(rp):_d.compareDocumentPosition?!!(_d.compareDocumentPosition(rp)&16):!1:!1}function Me$1(){for(var _d=window,rp=Xa$1();rp instanceof _d.HTMLIFrameElement;){try{var np=typeof rp.contentWindow.location.href=="string"}catch{np=!1}if(np)_d=rp.contentWindow;else break;rp=Xa$1(_d.document)}return rp}function Ne$1(_d){var rp=_d&&_d.nodeName&&_d.nodeName.toLowerCase();return rp&&(rp==="input"&&(_d.type==="text"||_d.type==="search"||_d.type==="tel"||_d.type==="url"||_d.type==="password")||rp==="textarea"||_d.contentEditable==="true")}function Oe$1(_d){var rp=Me$1(),np=_d.focusedElem,ap=_d.selectionRange;if(rp!==np&&np&&np.ownerDocument&&Le$1(np.ownerDocument.documentElement,np)){if(ap!==null&&Ne$1(np)){if(rp=ap.start,_d=ap.end,_d===void 0&&(_d=rp),"selectionStart"in np)np.selectionStart=rp,np.selectionEnd=Math.min(_d,np.value.length);else if(_d=(rp=np.ownerDocument||document)&&rp.defaultView||window,_d.getSelection){_d=_d.getSelection();var sp=np.textContent.length,lp=Math.min(ap.start,sp);ap=ap.end===void 0?lp:Math.min(ap.end,sp),!_d.extend&&lp>ap&&(sp=ap,ap=lp,lp=sp),sp=Ke$1(np,lp);var up=Ke$1(np,ap);sp&&up&&(_d.rangeCount!==1||_d.anchorNode!==sp.node||_d.anchorOffset!==sp.offset||_d.focusNode!==up.node||_d.focusOffset!==up.offset)&&(rp=rp.createRange(),rp.setStart(sp.node,sp.offset),_d.removeAllRanges(),lp>ap?(_d.addRange(rp),_d.extend(up.node,up.offset)):(rp.setEnd(up.node,up.offset),_d.addRange(rp)))}}for(rp=[],_d=np;_d=_d.parentNode;)_d.nodeType===1&&rp.push({element:_d,left:_d.scrollLeft,top:_d.scrollTop});for(typeof np.focus=="function"&&np.focus(),np=0;np<rp.length;np++)_d=rp[np],_d.element.scrollLeft=_d.left,_d.element.scrollTop=_d.top}}var Pe$1=ia$1&&"documentMode"in document&&11>=document.documentMode,Qe$1=null,Re$1=null,Se$1=null,Te$1=!1;function Ue$1(_d,rp,np){var ap=np.window===np?np.document:np.nodeType===9?np:np.ownerDocument;Te$1||Qe$1==null||Qe$1!==Xa$1(ap)||(ap=Qe$1,"selectionStart"in ap&&Ne$1(ap)?ap={start:ap.selectionStart,end:ap.selectionEnd}:(ap=(ap.ownerDocument&&ap.ownerDocument.defaultView||window).getSelection(),ap={anchorNode:ap.anchorNode,anchorOffset:ap.anchorOffset,focusNode:ap.focusNode,focusOffset:ap.focusOffset}),Se$1&&Ie$1(Se$1,ap)||(Se$1=ap,ap=oe$1(Re$1,"onSelect"),0<ap.length&&(rp=new td("onSelect","select",null,rp,np),_d.push({event:rp,listeners:ap}),rp.target=Qe$1)))}function Ve$1(_d,rp){var np={};return np[_d.toLowerCase()]=rp.toLowerCase(),np["Webkit"+_d]="webkit"+rp,np["Moz"+_d]="moz"+rp,np}var We$1={animationend:Ve$1("Animation","AnimationEnd"),animationiteration:Ve$1("Animation","AnimationIteration"),animationstart:Ve$1("Animation","AnimationStart"),transitionend:Ve$1("Transition","TransitionEnd")},Xe$1={},Ye$1={};ia$1&&(Ye$1=document.createElement("div").style,"AnimationEvent"in window||(delete We$1.animationend.animation,delete We$1.animationiteration.animation,delete We$1.animationstart.animation),"TransitionEvent"in window||delete We$1.transitionend.transition);function Ze$1(_d){if(Xe$1[_d])return Xe$1[_d];if(!We$1[_d])return _d;var rp=We$1[_d],np;for(np in rp)if(rp.hasOwnProperty(np)&&np in Ye$1)return Xe$1[_d]=rp[np];return _d}var $e$1=Ze$1("animationend"),af$1=Ze$1("animationiteration"),bf$1=Ze$1("animationstart"),cf$1=Ze$1("transitionend"),df$1=new Map,ef$1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff$1(_d,rp){df$1.set(_d,rp),fa$1(rp,[_d])}for(var gf$1=0;gf$1<ef$1.length;gf$1++){var hf$1=ef$1[gf$1],jf$1=hf$1.toLowerCase(),kf$1=hf$1[0].toUpperCase()+hf$1.slice(1);ff$1(jf$1,"on"+kf$1)}ff$1($e$1,"onAnimationEnd");ff$1(af$1,"onAnimationIteration");ff$1(bf$1,"onAnimationStart");ff$1("dblclick","onDoubleClick");ff$1("focusin","onFocus");ff$1("focusout","onBlur");ff$1(cf$1,"onTransitionEnd");ha$1("onMouseEnter",["mouseout","mouseover"]);ha$1("onMouseLeave",["mouseout","mouseover"]);ha$1("onPointerEnter",["pointerout","pointerover"]);ha$1("onPointerLeave",["pointerout","pointerover"]);fa$1("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa$1("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa$1("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa$1("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa$1("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa$1("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf$1="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf$1=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf$1));function nf$1(_d,rp,np){var ap=_d.type||"unknown-event";_d.currentTarget=np,Ub(ap,rp,void 0,_d),_d.currentTarget=null}function se$1(_d,rp){rp=(rp&4)!==0;for(var np=0;np<_d.length;np++){var ap=_d[np],sp=ap.event;ap=ap.listeners;e:{var lp=void 0;if(rp)for(var up=ap.length-1;0<=up;up--){var cp=ap[up],dp=cp.instance,fp=cp.currentTarget;if(cp=cp.listener,dp!==lp&&sp.isPropagationStopped())break e;nf$1(sp,cp,fp),lp=dp}else for(up=0;up<ap.length;up++){if(cp=ap[up],dp=cp.instance,fp=cp.currentTarget,cp=cp.listener,dp!==lp&&sp.isPropagationStopped())break e;nf$1(sp,cp,fp),lp=dp}}}if(Qb)throw _d=Rb,Qb=!1,Rb=null,_d}function D$1(_d,rp){var np=rp[of$1];np===void 0&&(np=rp[of$1]=new Set);var ap=_d+"__bubble";np.has(ap)||(pf$1(rp,_d,2,!1),np.add(ap))}function qf$1(_d,rp,np){var ap=0;rp&&(ap|=4),pf$1(np,_d,ap,rp)}var rf$1="_reactListening"+Math.random().toString(36).slice(2);function sf$1(_d){if(!_d[rf$1]){_d[rf$1]=!0,da$1.forEach(function(np){np!=="selectionchange"&&(mf$1.has(np)||qf$1(np,!1,_d),qf$1(np,!0,_d))});var rp=_d.nodeType===9?_d:_d.ownerDocument;rp===null||rp[rf$1]||(rp[rf$1]=!0,qf$1("selectionchange",!1,rp))}}function pf$1(_d,rp,np,ap){switch(jd(rp)){case 1:var sp=ed;break;case 4:sp=gd;break;default:sp=fd}np=sp.bind(null,rp,np,_d),sp=void 0,!Lb||rp!=="touchstart"&&rp!=="touchmove"&&rp!=="wheel"||(sp=!0),ap?sp!==void 0?_d.addEventListener(rp,np,{capture:!0,passive:sp}):_d.addEventListener(rp,np,!0):sp!==void 0?_d.addEventListener(rp,np,{passive:sp}):_d.addEventListener(rp,np,!1)}function hd(_d,rp,np,ap,sp){var lp=ap;if(!(rp&1)&&!(rp&2)&&ap!==null)e:for(;;){if(ap===null)return;var up=ap.tag;if(up===3||up===4){var cp=ap.stateNode.containerInfo;if(cp===sp||cp.nodeType===8&&cp.parentNode===sp)break;if(up===4)for(up=ap.return;up!==null;){var dp=up.tag;if((dp===3||dp===4)&&(dp=up.stateNode.containerInfo,dp===sp||dp.nodeType===8&&dp.parentNode===sp))return;up=up.return}for(;cp!==null;){if(up=Wc$1(cp),up===null)return;if(dp=up.tag,dp===5||dp===6){ap=lp=up;continue e}cp=cp.parentNode}}ap=ap.return}Jb(function(){var fp=lp,pp=xb(np),hp=[];e:{var mp=df$1.get(_d);if(mp!==void 0){var gp=td,vp=_d;switch(_d){case"keypress":if(od(np)===0)break e;case"keydown":case"keyup":gp=Rd;break;case"focusin":vp="focus",gp=Fd;break;case"focusout":vp="blur",gp=Fd;break;case"beforeblur":case"afterblur":gp=Fd;break;case"click":if(np.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":gp=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":gp=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":gp=Vd;break;case $e$1:case af$1:case bf$1:gp=Hd;break;case cf$1:gp=Xd;break;case"scroll":gp=vd;break;case"wheel":gp=Zd;break;case"copy":case"cut":case"paste":gp=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":gp=Td}var xp=(rp&4)!==0,Sp=!xp&&_d==="scroll",yp=xp?mp!==null?mp+"Capture":null:mp;xp=[];for(var bp=fp,Ep;bp!==null;){Ep=bp;var wp=Ep.stateNode;if(Ep.tag===5&&wp!==null&&(Ep=wp,yp!==null&&(wp=Kb(bp,yp),wp!=null&&xp.push(tf$4(bp,wp,Ep)))),Sp)break;bp=bp.return}0<xp.length&&(mp=new gp(mp,vp,null,np,pp),hp.push({event:mp,listeners:xp}))}}if(!(rp&7)){e:{if(mp=_d==="mouseover"||_d==="pointerover",gp=_d==="mouseout"||_d==="pointerout",mp&&np!==wb&&(vp=np.relatedTarget||np.fromElement)&&(Wc$1(vp)||vp[uf$1]))break e;if((gp||mp)&&(mp=pp.window===pp?pp:(mp=pp.ownerDocument)?mp.defaultView||mp.parentWindow:window,gp?(vp=np.relatedTarget||np.toElement,gp=fp,vp=vp?Wc$1(vp):null,vp!==null&&(Sp=Vb(vp),vp!==Sp||vp.tag!==5&&vp.tag!==6)&&(vp=null)):(gp=null,vp=fp),gp!==vp)){if(xp=Bd,wp="onMouseLeave",yp="onMouseEnter",bp="mouse",(_d==="pointerout"||_d==="pointerover")&&(xp=Td,wp="onPointerLeave",yp="onPointerEnter",bp="pointer"),Sp=gp==null?mp:ue$1(gp),Ep=vp==null?mp:ue$1(vp),mp=new xp(wp,bp+"leave",gp,np,pp),mp.target=Sp,mp.relatedTarget=Ep,wp=null,Wc$1(pp)===fp&&(xp=new xp(yp,bp+"enter",vp,np,pp),xp.target=Ep,xp.relatedTarget=Sp,wp=xp),Sp=wp,gp&&vp)t:{for(xp=gp,yp=vp,bp=0,Ep=xp;Ep;Ep=vf$1(Ep))bp++;for(Ep=0,wp=yp;wp;wp=vf$1(wp))Ep++;for(;0<bp-Ep;)xp=vf$1(xp),bp--;for(;0<Ep-bp;)yp=vf$1(yp),Ep--;for(;bp--;){if(xp===yp||yp!==null&&xp===yp.alternate)break t;xp=vf$1(xp),yp=vf$1(yp)}xp=null}else xp=null;gp!==null&&wf$1(hp,mp,gp,xp,!1),vp!==null&&Sp!==null&&wf$1(hp,Sp,vp,xp,!0)}}e:{if(mp=fp?ue$1(fp):window,gp=mp.nodeName&&mp.nodeName.toLowerCase(),gp==="select"||gp==="input"&&mp.type==="file")var _p=ve$1;else if(me$1(mp))if(we$1)_p=Fe$1;else{_p=De$1;var Rp=Ce$1}else(gp=mp.nodeName)&&gp.toLowerCase()==="input"&&(mp.type==="checkbox"||mp.type==="radio")&&(_p=Ee$1);if(_p&&(_p=_p(_d,fp))){ne$1(hp,_p,np,pp);break e}Rp&&Rp(_d,mp,fp),_d==="focusout"&&(Rp=mp._wrapperState)&&Rp.controlled&&mp.type==="number"&&cb(mp,"number",mp.value)}switch(Rp=fp?ue$1(fp):window,_d){case"focusin":(me$1(Rp)||Rp.contentEditable==="true")&&(Qe$1=Rp,Re$1=fp,Se$1=null);break;case"focusout":Se$1=Re$1=Qe$1=null;break;case"mousedown":Te$1=!0;break;case"contextmenu":case"mouseup":case"dragend":Te$1=!1,Ue$1(hp,np,pp);break;case"selectionchange":if(Pe$1)break;case"keydown":case"keyup":Ue$1(hp,np,pp)}var $p;if(ae$1)e:{switch(_d){case"compositionstart":var Cp="onCompositionStart";break e;case"compositionend":Cp="onCompositionEnd";break e;case"compositionupdate":Cp="onCompositionUpdate";break e}Cp=void 0}else ie$1?ge$1(_d,np)&&(Cp="onCompositionEnd"):_d==="keydown"&&np.keyCode===229&&(Cp="onCompositionStart");Cp&&(de$1&&np.locale!=="ko"&&(ie$1||Cp!=="onCompositionStart"?Cp==="onCompositionEnd"&&ie$1&&($p=nd()):(kd=pp,ld="value"in kd?kd.value:kd.textContent,ie$1=!0)),Rp=oe$1(fp,Cp),0<Rp.length&&(Cp=new Ld(Cp,_d,null,np,pp),hp.push({event:Cp,listeners:Rp}),$p?Cp.data=$p:($p=he$1(np),$p!==null&&(Cp.data=$p)))),($p=ce$1?je$1(_d,np):ke$1(_d,np))&&(fp=oe$1(fp,"onBeforeInput"),0<fp.length&&(pp=new Ld("onBeforeInput","beforeinput",null,np,pp),hp.push({event:pp,listeners:fp}),pp.data=$p))}se$1(hp,rp)})}function tf$4(_d,rp,np){return{instance:_d,listener:rp,currentTarget:np}}function oe$1(_d,rp){for(var np=rp+"Capture",ap=[];_d!==null;){var sp=_d,lp=sp.stateNode;sp.tag===5&&lp!==null&&(sp=lp,lp=Kb(_d,np),lp!=null&&ap.unshift(tf$4(_d,lp,sp)),lp=Kb(_d,rp),lp!=null&&ap.push(tf$4(_d,lp,sp))),_d=_d.return}return ap}function vf$1(_d){if(_d===null)return null;do _d=_d.return;while(_d&&_d.tag!==5);return _d||null}function wf$1(_d,rp,np,ap,sp){for(var lp=rp._reactName,up=[];np!==null&&np!==ap;){var cp=np,dp=cp.alternate,fp=cp.stateNode;if(dp!==null&&dp===ap)break;cp.tag===5&&fp!==null&&(cp=fp,sp?(dp=Kb(np,lp),dp!=null&&up.unshift(tf$4(np,dp,cp))):sp||(dp=Kb(np,lp),dp!=null&&up.push(tf$4(np,dp,cp)))),np=np.return}up.length!==0&&_d.push({event:rp,listeners:up})}var xf$1=/\r\n?/g,yf$1=/\u0000|\uFFFD/g;function zf$1(_d){return(typeof _d=="string"?_d:""+_d).replace(xf$1,`
`).replace(yf$1,"")}function Af$1(_d,rp,np){if(rp=zf$1(rp),zf$1(_d)!==rp&&np)throw Error(p$1(425))}function Bf$1(){}var Cf$1=null,Df$1=null;function Ef$1(_d,rp){return _d==="textarea"||_d==="noscript"||typeof rp.children=="string"||typeof rp.children=="number"||typeof rp.dangerouslySetInnerHTML=="object"&&rp.dangerouslySetInnerHTML!==null&&rp.dangerouslySetInnerHTML.__html!=null}var Ff$1=typeof setTimeout=="function"?setTimeout:void 0,Gf$1=typeof clearTimeout=="function"?clearTimeout:void 0,Hf$1=typeof Promise=="function"?Promise:void 0,Jf$1=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf$1<"u"?function(_d){return Hf$1.resolve(null).then(_d).catch(If$1)}:Ff$1;function If$1(_d){setTimeout(function(){throw _d})}function Kf$1(_d,rp){var np=rp,ap=0;do{var sp=np.nextSibling;if(_d.removeChild(np),sp&&sp.nodeType===8)if(np=sp.data,np==="/$"){if(ap===0){_d.removeChild(sp),bd(rp);return}ap--}else np!=="$"&&np!=="$?"&&np!=="$!"||ap++;np=sp}while(np);bd(rp)}function Lf$1(_d){for(;_d!=null;_d=_d.nextSibling){var rp=_d.nodeType;if(rp===1||rp===3)break;if(rp===8){if(rp=_d.data,rp==="$"||rp==="$!"||rp==="$?")break;if(rp==="/$")return null}}return _d}function Mf$1(_d){_d=_d.previousSibling;for(var rp=0;_d;){if(_d.nodeType===8){var np=_d.data;if(np==="$"||np==="$!"||np==="$?"){if(rp===0)return _d;rp--}else np==="/$"&&rp++}_d=_d.previousSibling}return null}var Nf$1=Math.random().toString(36).slice(2),Of$1="__reactFiber$"+Nf$1,Pf$1="__reactProps$"+Nf$1,uf$1="__reactContainer$"+Nf$1,of$1="__reactEvents$"+Nf$1,Qf$1="__reactListeners$"+Nf$1,Rf$1="__reactHandles$"+Nf$1;function Wc$1(_d){var rp=_d[Of$1];if(rp)return rp;for(var np=_d.parentNode;np;){if(rp=np[uf$1]||np[Of$1]){if(np=rp.alternate,rp.child!==null||np!==null&&np.child!==null)for(_d=Mf$1(_d);_d!==null;){if(np=_d[Of$1])return np;_d=Mf$1(_d)}return rp}_d=np,np=_d.parentNode}return null}function Cb(_d){return _d=_d[Of$1]||_d[uf$1],!_d||_d.tag!==5&&_d.tag!==6&&_d.tag!==13&&_d.tag!==3?null:_d}function ue$1(_d){if(_d.tag===5||_d.tag===6)return _d.stateNode;throw Error(p$1(33))}function Db(_d){return _d[Pf$1]||null}var Sf$1=[],Tf$1=-1;function Uf$1(_d){return{current:_d}}function E$1(_d){0>Tf$1||(_d.current=Sf$1[Tf$1],Sf$1[Tf$1]=null,Tf$1--)}function G$1(_d,rp){Tf$1++,Sf$1[Tf$1]=_d.current,_d.current=rp}var Vf$1={},H$1=Uf$1(Vf$1),Wf$1=Uf$1(!1),Xf$1=Vf$1;function Yf$1(_d,rp){var np=_d.type.contextTypes;if(!np)return Vf$1;var ap=_d.stateNode;if(ap&&ap.__reactInternalMemoizedUnmaskedChildContext===rp)return ap.__reactInternalMemoizedMaskedChildContext;var sp={},lp;for(lp in np)sp[lp]=rp[lp];return ap&&(_d=_d.stateNode,_d.__reactInternalMemoizedUnmaskedChildContext=rp,_d.__reactInternalMemoizedMaskedChildContext=sp),sp}function Zf$1(_d){return _d=_d.childContextTypes,_d!=null}function $f$1(){E$1(Wf$1),E$1(H$1)}function ag(_d,rp,np){if(H$1.current!==Vf$1)throw Error(p$1(168));G$1(H$1,rp),G$1(Wf$1,np)}function bg(_d,rp,np){var ap=_d.stateNode;if(rp=rp.childContextTypes,typeof ap.getChildContext!="function")return np;ap=ap.getChildContext();for(var sp in ap)if(!(sp in rp))throw Error(p$1(108,Ra$1(_d)||"Unknown",sp));return A$1({},np,ap)}function cg(_d){return _d=(_d=_d.stateNode)&&_d.__reactInternalMemoizedMergedChildContext||Vf$1,Xf$1=H$1.current,G$1(H$1,_d),G$1(Wf$1,Wf$1.current),!0}function dg(_d,rp,np){var ap=_d.stateNode;if(!ap)throw Error(p$1(169));np?(_d=bg(_d,rp,Xf$1),ap.__reactInternalMemoizedMergedChildContext=_d,E$1(Wf$1),E$1(H$1),G$1(H$1,_d)):E$1(Wf$1),G$1(Wf$1,np)}var eg=null,fg=!1,gg=!1;function hg(_d){eg===null?eg=[_d]:eg.push(_d)}function ig(_d){fg=!0,hg(_d)}function jg(){if(!gg&&eg!==null){gg=!0;var _d=0,rp=C$1;try{var np=eg;for(C$1=1;_d<np.length;_d++){var ap=np[_d];do ap=ap(!0);while(ap!==null)}eg=null,fg=!1}catch(sp){throw eg!==null&&(eg=eg.slice(_d+1)),ac$1(fc$1,jg),sp}finally{C$1=rp,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(_d,rp){kg[lg++]=ng,kg[lg++]=mg,mg=_d,ng=rp}function ug(_d,rp,np){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=_d;var ap=rg;_d=sg;var sp=32-oc$1(ap)-1;ap&=~(1<<sp),np+=1;var lp=32-oc$1(rp)+sp;if(30<lp){var up=sp-sp%5;lp=(ap&(1<<up)-1).toString(32),ap>>=up,sp-=up,rg=1<<32-oc$1(rp)+sp|np<<sp|ap,sg=lp+_d}else rg=1<<lp|np<<sp|ap,sg=_d}function vg(_d){_d.return!==null&&(tg(_d,1),ug(_d,1,0))}function wg(_d){for(;_d===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;_d===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I$1=!1,zg=null;function Ag(_d,rp){var np=Bg(5,null,null,0);np.elementType="DELETED",np.stateNode=rp,np.return=_d,rp=_d.deletions,rp===null?(_d.deletions=[np],_d.flags|=16):rp.push(np)}function Cg(_d,rp){switch(_d.tag){case 5:var np=_d.type;return rp=rp.nodeType!==1||np.toLowerCase()!==rp.nodeName.toLowerCase()?null:rp,rp!==null?(_d.stateNode=rp,xg=_d,yg=Lf$1(rp.firstChild),!0):!1;case 6:return rp=_d.pendingProps===""||rp.nodeType!==3?null:rp,rp!==null?(_d.stateNode=rp,xg=_d,yg=null,!0):!1;case 13:return rp=rp.nodeType!==8?null:rp,rp!==null?(np=qg!==null?{id:rg,overflow:sg}:null,_d.memoizedState={dehydrated:rp,treeContext:np,retryLane:1073741824},np=Bg(18,null,null,0),np.stateNode=rp,np.return=_d,_d.child=np,xg=_d,yg=null,!0):!1;default:return!1}}function Dg(_d){return(_d.mode&1)!==0&&(_d.flags&128)===0}function Eg(_d){if(I$1){var rp=yg;if(rp){var np=rp;if(!Cg(_d,rp)){if(Dg(_d))throw Error(p$1(418));rp=Lf$1(np.nextSibling);var ap=xg;rp&&Cg(_d,rp)?Ag(ap,np):(_d.flags=_d.flags&-4097|2,I$1=!1,xg=_d)}}else{if(Dg(_d))throw Error(p$1(418));_d.flags=_d.flags&-4097|2,I$1=!1,xg=_d}}}function Fg(_d){for(_d=_d.return;_d!==null&&_d.tag!==5&&_d.tag!==3&&_d.tag!==13;)_d=_d.return;xg=_d}function Gg(_d){if(_d!==xg)return!1;if(!I$1)return Fg(_d),I$1=!0,!1;var rp;if((rp=_d.tag!==3)&&!(rp=_d.tag!==5)&&(rp=_d.type,rp=rp!=="head"&&rp!=="body"&&!Ef$1(_d.type,_d.memoizedProps)),rp&&(rp=yg)){if(Dg(_d))throw Hg(),Error(p$1(418));for(;rp;)Ag(_d,rp),rp=Lf$1(rp.nextSibling)}if(Fg(_d),_d.tag===13){if(_d=_d.memoizedState,_d=_d!==null?_d.dehydrated:null,!_d)throw Error(p$1(317));e:{for(_d=_d.nextSibling,rp=0;_d;){if(_d.nodeType===8){var np=_d.data;if(np==="/$"){if(rp===0){yg=Lf$1(_d.nextSibling);break e}rp--}else np!=="$"&&np!=="$!"&&np!=="$?"||rp++}_d=_d.nextSibling}yg=null}}else yg=xg?Lf$1(_d.stateNode.nextSibling):null;return!0}function Hg(){for(var _d=yg;_d;)_d=Lf$1(_d.nextSibling)}function Ig(){yg=xg=null,I$1=!1}function Jg(_d){zg===null?zg=[_d]:zg.push(_d)}var Kg=ua$1.ReactCurrentBatchConfig;function Lg(_d,rp){if(_d&&_d.defaultProps){rp=A$1({},rp),_d=_d.defaultProps;for(var np in _d)rp[np]===void 0&&(rp[np]=_d[np]);return rp}return rp}var Mg=Uf$1(null),Ng=null,Og=null,Pg=null;function Qg(){Pg=Og=Ng=null}function Rg(_d){var rp=Mg.current;E$1(Mg),_d._currentValue=rp}function Sg(_d,rp,np){for(;_d!==null;){var ap=_d.alternate;if((_d.childLanes&rp)!==rp?(_d.childLanes|=rp,ap!==null&&(ap.childLanes|=rp)):ap!==null&&(ap.childLanes&rp)!==rp&&(ap.childLanes|=rp),_d===np)break;_d=_d.return}}function Tg(_d,rp){Ng=_d,Pg=Og=null,_d=_d.dependencies,_d!==null&&_d.firstContext!==null&&(_d.lanes&rp&&(Ug=!0),_d.firstContext=null)}function Vg(_d){var rp=_d._currentValue;if(Pg!==_d)if(_d={context:_d,memoizedValue:rp,next:null},Og===null){if(Ng===null)throw Error(p$1(308));Og=_d,Ng.dependencies={lanes:0,firstContext:_d}}else Og=Og.next=_d;return rp}var Wg=null;function Xg(_d){Wg===null?Wg=[_d]:Wg.push(_d)}function Yg(_d,rp,np,ap){var sp=rp.interleaved;return sp===null?(np.next=np,Xg(rp)):(np.next=sp.next,sp.next=np),rp.interleaved=np,Zg(_d,ap)}function Zg(_d,rp){_d.lanes|=rp;var np=_d.alternate;for(np!==null&&(np.lanes|=rp),np=_d,_d=_d.return;_d!==null;)_d.childLanes|=rp,np=_d.alternate,np!==null&&(np.childLanes|=rp),np=_d,_d=_d.return;return np.tag===3?np.stateNode:null}var $g=!1;function ah$1(_d){_d.updateQueue={baseState:_d.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bh$1(_d,rp){_d=_d.updateQueue,rp.updateQueue===_d&&(rp.updateQueue={baseState:_d.baseState,firstBaseUpdate:_d.firstBaseUpdate,lastBaseUpdate:_d.lastBaseUpdate,shared:_d.shared,effects:_d.effects})}function ch$1(_d,rp){return{eventTime:_d,lane:rp,tag:0,payload:null,callback:null,next:null}}function dh$1(_d,rp,np){var ap=_d.updateQueue;if(ap===null)return null;if(ap=ap.shared,K$1&2){var sp=ap.pending;return sp===null?rp.next=rp:(rp.next=sp.next,sp.next=rp),ap.pending=rp,Zg(_d,np)}return sp=ap.interleaved,sp===null?(rp.next=rp,Xg(ap)):(rp.next=sp.next,sp.next=rp),ap.interleaved=rp,Zg(_d,np)}function eh$1(_d,rp,np){if(rp=rp.updateQueue,rp!==null&&(rp=rp.shared,(np&4194240)!==0)){var ap=rp.lanes;ap&=_d.pendingLanes,np|=ap,rp.lanes=np,Cc$1(_d,np)}}function fh$1(_d,rp){var np=_d.updateQueue,ap=_d.alternate;if(ap!==null&&(ap=ap.updateQueue,np===ap)){var sp=null,lp=null;if(np=np.firstBaseUpdate,np!==null){do{var up={eventTime:np.eventTime,lane:np.lane,tag:np.tag,payload:np.payload,callback:np.callback,next:null};lp===null?sp=lp=up:lp=lp.next=up,np=np.next}while(np!==null);lp===null?sp=lp=rp:lp=lp.next=rp}else sp=lp=rp;np={baseState:ap.baseState,firstBaseUpdate:sp,lastBaseUpdate:lp,shared:ap.shared,effects:ap.effects},_d.updateQueue=np;return}_d=np.lastBaseUpdate,_d===null?np.firstBaseUpdate=rp:_d.next=rp,np.lastBaseUpdate=rp}function gh$1(_d,rp,np,ap){var sp=_d.updateQueue;$g=!1;var lp=sp.firstBaseUpdate,up=sp.lastBaseUpdate,cp=sp.shared.pending;if(cp!==null){sp.shared.pending=null;var dp=cp,fp=dp.next;dp.next=null,up===null?lp=fp:up.next=fp,up=dp;var pp=_d.alternate;pp!==null&&(pp=pp.updateQueue,cp=pp.lastBaseUpdate,cp!==up&&(cp===null?pp.firstBaseUpdate=fp:cp.next=fp,pp.lastBaseUpdate=dp))}if(lp!==null){var hp=sp.baseState;up=0,pp=fp=dp=null,cp=lp;do{var mp=cp.lane,gp=cp.eventTime;if((ap&mp)===mp){pp!==null&&(pp=pp.next={eventTime:gp,lane:0,tag:cp.tag,payload:cp.payload,callback:cp.callback,next:null});e:{var vp=_d,xp=cp;switch(mp=rp,gp=np,xp.tag){case 1:if(vp=xp.payload,typeof vp=="function"){hp=vp.call(gp,hp,mp);break e}hp=vp;break e;case 3:vp.flags=vp.flags&-65537|128;case 0:if(vp=xp.payload,mp=typeof vp=="function"?vp.call(gp,hp,mp):vp,mp==null)break e;hp=A$1({},hp,mp);break e;case 2:$g=!0}}cp.callback!==null&&cp.lane!==0&&(_d.flags|=64,mp=sp.effects,mp===null?sp.effects=[cp]:mp.push(cp))}else gp={eventTime:gp,lane:mp,tag:cp.tag,payload:cp.payload,callback:cp.callback,next:null},pp===null?(fp=pp=gp,dp=hp):pp=pp.next=gp,up|=mp;if(cp=cp.next,cp===null){if(cp=sp.shared.pending,cp===null)break;mp=cp,cp=mp.next,mp.next=null,sp.lastBaseUpdate=mp,sp.shared.pending=null}}while(!0);if(pp===null&&(dp=hp),sp.baseState=dp,sp.firstBaseUpdate=fp,sp.lastBaseUpdate=pp,rp=sp.shared.interleaved,rp!==null){sp=rp;do up|=sp.lane,sp=sp.next;while(sp!==rp)}else lp===null&&(sp.shared.lanes=0);hh$1|=up,_d.lanes=up,_d.memoizedState=hp}}function ih$1(_d,rp,np){if(_d=rp.effects,rp.effects=null,_d!==null)for(rp=0;rp<_d.length;rp++){var ap=_d[rp],sp=ap.callback;if(sp!==null){if(ap.callback=null,ap=np,typeof sp!="function")throw Error(p$1(191,sp));sp.call(ap)}}}var jh$1=new aa$1.Component().refs;function kh$1(_d,rp,np,ap){rp=_d.memoizedState,np=np(ap,rp),np=np==null?rp:A$1({},rp,np),_d.memoizedState=np,_d.lanes===0&&(_d.updateQueue.baseState=np)}var nh$1={isMounted:function(_d){return(_d=_d._reactInternals)?Vb(_d)===_d:!1},enqueueSetState:function(_d,rp,np){_d=_d._reactInternals;var ap=L$1(),sp=lh$1(_d),lp=ch$1(ap,sp);lp.payload=rp,np!=null&&(lp.callback=np),rp=dh$1(_d,lp,sp),rp!==null&&(mh$1(rp,_d,sp,ap),eh$1(rp,_d,sp))},enqueueReplaceState:function(_d,rp,np){_d=_d._reactInternals;var ap=L$1(),sp=lh$1(_d),lp=ch$1(ap,sp);lp.tag=1,lp.payload=rp,np!=null&&(lp.callback=np),rp=dh$1(_d,lp,sp),rp!==null&&(mh$1(rp,_d,sp,ap),eh$1(rp,_d,sp))},enqueueForceUpdate:function(_d,rp){_d=_d._reactInternals;var np=L$1(),ap=lh$1(_d),sp=ch$1(np,ap);sp.tag=2,rp!=null&&(sp.callback=rp),rp=dh$1(_d,sp,ap),rp!==null&&(mh$1(rp,_d,ap,np),eh$1(rp,_d,ap))}};function oh$1(_d,rp,np,ap,sp,lp,up){return _d=_d.stateNode,typeof _d.shouldComponentUpdate=="function"?_d.shouldComponentUpdate(ap,lp,up):rp.prototype&&rp.prototype.isPureReactComponent?!Ie$1(np,ap)||!Ie$1(sp,lp):!0}function ph$1(_d,rp,np){var ap=!1,sp=Vf$1,lp=rp.contextType;return typeof lp=="object"&&lp!==null?lp=Vg(lp):(sp=Zf$1(rp)?Xf$1:H$1.current,ap=rp.contextTypes,lp=(ap=ap!=null)?Yf$1(_d,sp):Vf$1),rp=new rp(np,lp),_d.memoizedState=rp.state!==null&&rp.state!==void 0?rp.state:null,rp.updater=nh$1,_d.stateNode=rp,rp._reactInternals=_d,ap&&(_d=_d.stateNode,_d.__reactInternalMemoizedUnmaskedChildContext=sp,_d.__reactInternalMemoizedMaskedChildContext=lp),rp}function qh$1(_d,rp,np,ap){_d=rp.state,typeof rp.componentWillReceiveProps=="function"&&rp.componentWillReceiveProps(np,ap),typeof rp.UNSAFE_componentWillReceiveProps=="function"&&rp.UNSAFE_componentWillReceiveProps(np,ap),rp.state!==_d&&nh$1.enqueueReplaceState(rp,rp.state,null)}function rh$1(_d,rp,np,ap){var sp=_d.stateNode;sp.props=np,sp.state=_d.memoizedState,sp.refs=jh$1,ah$1(_d);var lp=rp.contextType;typeof lp=="object"&&lp!==null?sp.context=Vg(lp):(lp=Zf$1(rp)?Xf$1:H$1.current,sp.context=Yf$1(_d,lp)),sp.state=_d.memoizedState,lp=rp.getDerivedStateFromProps,typeof lp=="function"&&(kh$1(_d,rp,lp,np),sp.state=_d.memoizedState),typeof rp.getDerivedStateFromProps=="function"||typeof sp.getSnapshotBeforeUpdate=="function"||typeof sp.UNSAFE_componentWillMount!="function"&&typeof sp.componentWillMount!="function"||(rp=sp.state,typeof sp.componentWillMount=="function"&&sp.componentWillMount(),typeof sp.UNSAFE_componentWillMount=="function"&&sp.UNSAFE_componentWillMount(),rp!==sp.state&&nh$1.enqueueReplaceState(sp,sp.state,null),gh$1(_d,np,sp,ap),sp.state=_d.memoizedState),typeof sp.componentDidMount=="function"&&(_d.flags|=4194308)}function sh$1(_d,rp,np){if(_d=np.ref,_d!==null&&typeof _d!="function"&&typeof _d!="object"){if(np._owner){if(np=np._owner,np){if(np.tag!==1)throw Error(p$1(309));var ap=np.stateNode}if(!ap)throw Error(p$1(147,_d));var sp=ap,lp=""+_d;return rp!==null&&rp.ref!==null&&typeof rp.ref=="function"&&rp.ref._stringRef===lp?rp.ref:(rp=function(up){var cp=sp.refs;cp===jh$1&&(cp=sp.refs={}),up===null?delete cp[lp]:cp[lp]=up},rp._stringRef=lp,rp)}if(typeof _d!="string")throw Error(p$1(284));if(!np._owner)throw Error(p$1(290,_d))}return _d}function th$1(_d,rp){throw _d=Object.prototype.toString.call(rp),Error(p$1(31,_d==="[object Object]"?"object with keys {"+Object.keys(rp).join(", ")+"}":_d))}function uh$1(_d){var rp=_d._init;return rp(_d._payload)}function vh$1(_d){function rp(yp,bp){if(_d){var Ep=yp.deletions;Ep===null?(yp.deletions=[bp],yp.flags|=16):Ep.push(bp)}}function np(yp,bp){if(!_d)return null;for(;bp!==null;)rp(yp,bp),bp=bp.sibling;return null}function ap(yp,bp){for(yp=new Map;bp!==null;)bp.key!==null?yp.set(bp.key,bp):yp.set(bp.index,bp),bp=bp.sibling;return yp}function sp(yp,bp){return yp=wh$1(yp,bp),yp.index=0,yp.sibling=null,yp}function lp(yp,bp,Ep){return yp.index=Ep,_d?(Ep=yp.alternate,Ep!==null?(Ep=Ep.index,Ep<bp?(yp.flags|=2,bp):Ep):(yp.flags|=2,bp)):(yp.flags|=1048576,bp)}function up(yp){return _d&&yp.alternate===null&&(yp.flags|=2),yp}function cp(yp,bp,Ep,wp){return bp===null||bp.tag!==6?(bp=xh$1(Ep,yp.mode,wp),bp.return=yp,bp):(bp=sp(bp,Ep),bp.return=yp,bp)}function dp(yp,bp,Ep,wp){var _p=Ep.type;return _p===ya$1?pp(yp,bp,Ep.props.children,wp,Ep.key):bp!==null&&(bp.elementType===_p||typeof _p=="object"&&_p!==null&&_p.$$typeof===Ha$1&&uh$1(_p)===bp.type)?(wp=sp(bp,Ep.props),wp.ref=sh$1(yp,bp,Ep),wp.return=yp,wp):(wp=yh$1(Ep.type,Ep.key,Ep.props,null,yp.mode,wp),wp.ref=sh$1(yp,bp,Ep),wp.return=yp,wp)}function fp(yp,bp,Ep,wp){return bp===null||bp.tag!==4||bp.stateNode.containerInfo!==Ep.containerInfo||bp.stateNode.implementation!==Ep.implementation?(bp=zh$1(Ep,yp.mode,wp),bp.return=yp,bp):(bp=sp(bp,Ep.children||[]),bp.return=yp,bp)}function pp(yp,bp,Ep,wp,_p){return bp===null||bp.tag!==7?(bp=Ah$1(Ep,yp.mode,wp,_p),bp.return=yp,bp):(bp=sp(bp,Ep),bp.return=yp,bp)}function hp(yp,bp,Ep){if(typeof bp=="string"&&bp!==""||typeof bp=="number")return bp=xh$1(""+bp,yp.mode,Ep),bp.return=yp,bp;if(typeof bp=="object"&&bp!==null){switch(bp.$$typeof){case va$1:return Ep=yh$1(bp.type,bp.key,bp.props,null,yp.mode,Ep),Ep.ref=sh$1(yp,null,bp),Ep.return=yp,Ep;case wa$1:return bp=zh$1(bp,yp.mode,Ep),bp.return=yp,bp;case Ha$1:var wp=bp._init;return hp(yp,wp(bp._payload),Ep)}if(eb(bp)||Ka$1(bp))return bp=Ah$1(bp,yp.mode,Ep,null),bp.return=yp,bp;th$1(yp,bp)}return null}function mp(yp,bp,Ep,wp){var _p=bp!==null?bp.key:null;if(typeof Ep=="string"&&Ep!==""||typeof Ep=="number")return _p!==null?null:cp(yp,bp,""+Ep,wp);if(typeof Ep=="object"&&Ep!==null){switch(Ep.$$typeof){case va$1:return Ep.key===_p?dp(yp,bp,Ep,wp):null;case wa$1:return Ep.key===_p?fp(yp,bp,Ep,wp):null;case Ha$1:return _p=Ep._init,mp(yp,bp,_p(Ep._payload),wp)}if(eb(Ep)||Ka$1(Ep))return _p!==null?null:pp(yp,bp,Ep,wp,null);th$1(yp,Ep)}return null}function gp(yp,bp,Ep,wp,_p){if(typeof wp=="string"&&wp!==""||typeof wp=="number")return yp=yp.get(Ep)||null,cp(bp,yp,""+wp,_p);if(typeof wp=="object"&&wp!==null){switch(wp.$$typeof){case va$1:return yp=yp.get(wp.key===null?Ep:wp.key)||null,dp(bp,yp,wp,_p);case wa$1:return yp=yp.get(wp.key===null?Ep:wp.key)||null,fp(bp,yp,wp,_p);case Ha$1:var Rp=wp._init;return gp(yp,bp,Ep,Rp(wp._payload),_p)}if(eb(wp)||Ka$1(wp))return yp=yp.get(Ep)||null,pp(bp,yp,wp,_p,null);th$1(bp,wp)}return null}function vp(yp,bp,Ep,wp){for(var _p=null,Rp=null,$p=bp,Cp=bp=0,Ap=null;$p!==null&&Cp<Ep.length;Cp++){$p.index>Cp?(Ap=$p,$p=null):Ap=$p.sibling;var Op=mp(yp,$p,Ep[Cp],wp);if(Op===null){$p===null&&($p=Ap);break}_d&&$p&&Op.alternate===null&&rp(yp,$p),bp=lp(Op,bp,Cp),Rp===null?_p=Op:Rp.sibling=Op,Rp=Op,$p=Ap}if(Cp===Ep.length)return np(yp,$p),I$1&&tg(yp,Cp),_p;if($p===null){for(;Cp<Ep.length;Cp++)$p=hp(yp,Ep[Cp],wp),$p!==null&&(bp=lp($p,bp,Cp),Rp===null?_p=$p:Rp.sibling=$p,Rp=$p);return I$1&&tg(yp,Cp),_p}for($p=ap(yp,$p);Cp<Ep.length;Cp++)Ap=gp($p,yp,Cp,Ep[Cp],wp),Ap!==null&&(_d&&Ap.alternate!==null&&$p.delete(Ap.key===null?Cp:Ap.key),bp=lp(Ap,bp,Cp),Rp===null?_p=Ap:Rp.sibling=Ap,Rp=Ap);return _d&&$p.forEach(function(Lp){return rp(yp,Lp)}),I$1&&tg(yp,Cp),_p}function xp(yp,bp,Ep,wp){var _p=Ka$1(Ep);if(typeof _p!="function")throw Error(p$1(150));if(Ep=_p.call(Ep),Ep==null)throw Error(p$1(151));for(var Rp=_p=null,$p=bp,Cp=bp=0,Ap=null,Op=Ep.next();$p!==null&&!Op.done;Cp++,Op=Ep.next()){$p.index>Cp?(Ap=$p,$p=null):Ap=$p.sibling;var Lp=mp(yp,$p,Op.value,wp);if(Lp===null){$p===null&&($p=Ap);break}_d&&$p&&Lp.alternate===null&&rp(yp,$p),bp=lp(Lp,bp,Cp),Rp===null?_p=Lp:Rp.sibling=Lp,Rp=Lp,$p=Ap}if(Op.done)return np(yp,$p),I$1&&tg(yp,Cp),_p;if($p===null){for(;!Op.done;Cp++,Op=Ep.next())Op=hp(yp,Op.value,wp),Op!==null&&(bp=lp(Op,bp,Cp),Rp===null?_p=Op:Rp.sibling=Op,Rp=Op);return I$1&&tg(yp,Cp),_p}for($p=ap(yp,$p);!Op.done;Cp++,Op=Ep.next())Op=gp($p,yp,Cp,Op.value,wp),Op!==null&&(_d&&Op.alternate!==null&&$p.delete(Op.key===null?Cp:Op.key),bp=lp(Op,bp,Cp),Rp===null?_p=Op:Rp.sibling=Op,Rp=Op);return _d&&$p.forEach(function(Mp){return rp(yp,Mp)}),I$1&&tg(yp,Cp),_p}function Sp(yp,bp,Ep,wp){if(typeof Ep=="object"&&Ep!==null&&Ep.type===ya$1&&Ep.key===null&&(Ep=Ep.props.children),typeof Ep=="object"&&Ep!==null){switch(Ep.$$typeof){case va$1:e:{for(var _p=Ep.key,Rp=bp;Rp!==null;){if(Rp.key===_p){if(_p=Ep.type,_p===ya$1){if(Rp.tag===7){np(yp,Rp.sibling),bp=sp(Rp,Ep.props.children),bp.return=yp,yp=bp;break e}}else if(Rp.elementType===_p||typeof _p=="object"&&_p!==null&&_p.$$typeof===Ha$1&&uh$1(_p)===Rp.type){np(yp,Rp.sibling),bp=sp(Rp,Ep.props),bp.ref=sh$1(yp,Rp,Ep),bp.return=yp,yp=bp;break e}np(yp,Rp);break}else rp(yp,Rp);Rp=Rp.sibling}Ep.type===ya$1?(bp=Ah$1(Ep.props.children,yp.mode,wp,Ep.key),bp.return=yp,yp=bp):(wp=yh$1(Ep.type,Ep.key,Ep.props,null,yp.mode,wp),wp.ref=sh$1(yp,bp,Ep),wp.return=yp,yp=wp)}return up(yp);case wa$1:e:{for(Rp=Ep.key;bp!==null;){if(bp.key===Rp)if(bp.tag===4&&bp.stateNode.containerInfo===Ep.containerInfo&&bp.stateNode.implementation===Ep.implementation){np(yp,bp.sibling),bp=sp(bp,Ep.children||[]),bp.return=yp,yp=bp;break e}else{np(yp,bp);break}else rp(yp,bp);bp=bp.sibling}bp=zh$1(Ep,yp.mode,wp),bp.return=yp,yp=bp}return up(yp);case Ha$1:return Rp=Ep._init,Sp(yp,bp,Rp(Ep._payload),wp)}if(eb(Ep))return vp(yp,bp,Ep,wp);if(Ka$1(Ep))return xp(yp,bp,Ep,wp);th$1(yp,Ep)}return typeof Ep=="string"&&Ep!==""||typeof Ep=="number"?(Ep=""+Ep,bp!==null&&bp.tag===6?(np(yp,bp.sibling),bp=sp(bp,Ep),bp.return=yp,yp=bp):(np(yp,bp),bp=xh$1(Ep,yp.mode,wp),bp.return=yp,yp=bp),up(yp)):np(yp,bp)}return Sp}var Bh$1=vh$1(!0),Ch$1=vh$1(!1),Dh$1={},Eh$1=Uf$1(Dh$1),Fh$1=Uf$1(Dh$1),Gh$1=Uf$1(Dh$1);function Hh$1(_d){if(_d===Dh$1)throw Error(p$1(174));return _d}function Ih$1(_d,rp){switch(G$1(Gh$1,rp),G$1(Fh$1,_d),G$1(Eh$1,Dh$1),_d=rp.nodeType,_d){case 9:case 11:rp=(rp=rp.documentElement)?rp.namespaceURI:lb(null,"");break;default:_d=_d===8?rp.parentNode:rp,rp=_d.namespaceURI||null,_d=_d.tagName,rp=lb(rp,_d)}E$1(Eh$1),G$1(Eh$1,rp)}function Jh$1(){E$1(Eh$1),E$1(Fh$1),E$1(Gh$1)}function Kh$1(_d){Hh$1(Gh$1.current);var rp=Hh$1(Eh$1.current),np=lb(rp,_d.type);rp!==np&&(G$1(Fh$1,_d),G$1(Eh$1,np))}function Lh$1(_d){Fh$1.current===_d&&(E$1(Eh$1),E$1(Fh$1))}var M$1=Uf$1(0);function Mh$1(_d){for(var rp=_d;rp!==null;){if(rp.tag===13){var np=rp.memoizedState;if(np!==null&&(np=np.dehydrated,np===null||np.data==="$?"||np.data==="$!"))return rp}else if(rp.tag===19&&rp.memoizedProps.revealOrder!==void 0){if(rp.flags&128)return rp}else if(rp.child!==null){rp.child.return=rp,rp=rp.child;continue}if(rp===_d)break;for(;rp.sibling===null;){if(rp.return===null||rp.return===_d)return null;rp=rp.return}rp.sibling.return=rp.return,rp=rp.sibling}return null}var Nh$1=[];function Oh$1(){for(var _d=0;_d<Nh$1.length;_d++)Nh$1[_d]._workInProgressVersionPrimary=null;Nh$1.length=0}var Ph$1=ua$1.ReactCurrentDispatcher,Qh$1=ua$1.ReactCurrentBatchConfig,Rh$1=0,N$1=null,O$1=null,P$1=null,Sh$1=!1,Th$1=!1,Uh$1=0,Vh$1=0;function Q$1(){throw Error(p$1(321))}function Wh$1(_d,rp){if(rp===null)return!1;for(var np=0;np<rp.length&&np<_d.length;np++)if(!He$1(_d[np],rp[np]))return!1;return!0}function Xh$1(_d,rp,np,ap,sp,lp){if(Rh$1=lp,N$1=rp,rp.memoizedState=null,rp.updateQueue=null,rp.lanes=0,Ph$1.current=_d===null||_d.memoizedState===null?Yh$1:Zh$1,_d=np(ap,sp),Th$1){lp=0;do{if(Th$1=!1,Uh$1=0,25<=lp)throw Error(p$1(301));lp+=1,P$1=O$1=null,rp.updateQueue=null,Ph$1.current=$h$1,_d=np(ap,sp)}while(Th$1)}if(Ph$1.current=ai$1,rp=O$1!==null&&O$1.next!==null,Rh$1=0,P$1=O$1=N$1=null,Sh$1=!1,rp)throw Error(p$1(300));return _d}function bi$1(){var _d=Uh$1!==0;return Uh$1=0,_d}function ci$1(){var _d={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return P$1===null?N$1.memoizedState=P$1=_d:P$1=P$1.next=_d,P$1}function di$1(){if(O$1===null){var _d=N$1.alternate;_d=_d!==null?_d.memoizedState:null}else _d=O$1.next;var rp=P$1===null?N$1.memoizedState:P$1.next;if(rp!==null)P$1=rp,O$1=_d;else{if(_d===null)throw Error(p$1(310));O$1=_d,_d={memoizedState:O$1.memoizedState,baseState:O$1.baseState,baseQueue:O$1.baseQueue,queue:O$1.queue,next:null},P$1===null?N$1.memoizedState=P$1=_d:P$1=P$1.next=_d}return P$1}function ei$1(_d,rp){return typeof rp=="function"?rp(_d):rp}function fi$1(_d){var rp=di$1(),np=rp.queue;if(np===null)throw Error(p$1(311));np.lastRenderedReducer=_d;var ap=O$1,sp=ap.baseQueue,lp=np.pending;if(lp!==null){if(sp!==null){var up=sp.next;sp.next=lp.next,lp.next=up}ap.baseQueue=sp=lp,np.pending=null}if(sp!==null){lp=sp.next,ap=ap.baseState;var cp=up=null,dp=null,fp=lp;do{var pp=fp.lane;if((Rh$1&pp)===pp)dp!==null&&(dp=dp.next={lane:0,action:fp.action,hasEagerState:fp.hasEagerState,eagerState:fp.eagerState,next:null}),ap=fp.hasEagerState?fp.eagerState:_d(ap,fp.action);else{var hp={lane:pp,action:fp.action,hasEagerState:fp.hasEagerState,eagerState:fp.eagerState,next:null};dp===null?(cp=dp=hp,up=ap):dp=dp.next=hp,N$1.lanes|=pp,hh$1|=pp}fp=fp.next}while(fp!==null&&fp!==lp);dp===null?up=ap:dp.next=cp,He$1(ap,rp.memoizedState)||(Ug=!0),rp.memoizedState=ap,rp.baseState=up,rp.baseQueue=dp,np.lastRenderedState=ap}if(_d=np.interleaved,_d!==null){sp=_d;do lp=sp.lane,N$1.lanes|=lp,hh$1|=lp,sp=sp.next;while(sp!==_d)}else sp===null&&(np.lanes=0);return[rp.memoizedState,np.dispatch]}function gi$1(_d){var rp=di$1(),np=rp.queue;if(np===null)throw Error(p$1(311));np.lastRenderedReducer=_d;var ap=np.dispatch,sp=np.pending,lp=rp.memoizedState;if(sp!==null){np.pending=null;var up=sp=sp.next;do lp=_d(lp,up.action),up=up.next;while(up!==sp);He$1(lp,rp.memoizedState)||(Ug=!0),rp.memoizedState=lp,rp.baseQueue===null&&(rp.baseState=lp),np.lastRenderedState=lp}return[lp,ap]}function hi$1(){}function ii$1(_d,rp){var np=N$1,ap=di$1(),sp=rp(),lp=!He$1(ap.memoizedState,sp);if(lp&&(ap.memoizedState=sp,Ug=!0),ap=ap.queue,ji$1(ki$1.bind(null,np,ap,_d),[_d]),ap.getSnapshot!==rp||lp||P$1!==null&&P$1.memoizedState.tag&1){if(np.flags|=2048,li$1(9,mi$1.bind(null,np,ap,sp,rp),void 0,null),R$2===null)throw Error(p$1(349));Rh$1&30||ni$1(np,rp,sp)}return sp}function ni$1(_d,rp,np){_d.flags|=16384,_d={getSnapshot:rp,value:np},rp=N$1.updateQueue,rp===null?(rp={lastEffect:null,stores:null},N$1.updateQueue=rp,rp.stores=[_d]):(np=rp.stores,np===null?rp.stores=[_d]:np.push(_d))}function mi$1(_d,rp,np,ap){rp.value=np,rp.getSnapshot=ap,oi$1(rp)&&pi$1(_d)}function ki$1(_d,rp,np){return np(function(){oi$1(rp)&&pi$1(_d)})}function oi$1(_d){var rp=_d.getSnapshot;_d=_d.value;try{var np=rp();return!He$1(_d,np)}catch{return!0}}function pi$1(_d){var rp=Zg(_d,1);rp!==null&&mh$1(rp,_d,1,-1)}function qi$1(_d){var rp=ci$1();return typeof _d=="function"&&(_d=_d()),rp.memoizedState=rp.baseState=_d,_d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ei$1,lastRenderedState:_d},rp.queue=_d,_d=_d.dispatch=ri$1.bind(null,N$1,_d),[rp.memoizedState,_d]}function li$1(_d,rp,np,ap){return _d={tag:_d,create:rp,destroy:np,deps:ap,next:null},rp=N$1.updateQueue,rp===null?(rp={lastEffect:null,stores:null},N$1.updateQueue=rp,rp.lastEffect=_d.next=_d):(np=rp.lastEffect,np===null?rp.lastEffect=_d.next=_d:(ap=np.next,np.next=_d,_d.next=ap,rp.lastEffect=_d)),_d}function si$1(){return di$1().memoizedState}function ti$1(_d,rp,np,ap){var sp=ci$1();N$1.flags|=_d,sp.memoizedState=li$1(1|rp,np,void 0,ap===void 0?null:ap)}function ui$1(_d,rp,np,ap){var sp=di$1();ap=ap===void 0?null:ap;var lp=void 0;if(O$1!==null){var up=O$1.memoizedState;if(lp=up.destroy,ap!==null&&Wh$1(ap,up.deps)){sp.memoizedState=li$1(rp,np,lp,ap);return}}N$1.flags|=_d,sp.memoizedState=li$1(1|rp,np,lp,ap)}function vi$1(_d,rp){return ti$1(8390656,8,_d,rp)}function ji$1(_d,rp){return ui$1(2048,8,_d,rp)}function wi$1(_d,rp){return ui$1(4,2,_d,rp)}function xi$1(_d,rp){return ui$1(4,4,_d,rp)}function yi$1(_d,rp){if(typeof rp=="function")return _d=_d(),rp(_d),function(){rp(null)};if(rp!=null)return _d=_d(),rp.current=_d,function(){rp.current=null}}function zi$1(_d,rp,np){return np=np!=null?np.concat([_d]):null,ui$1(4,4,yi$1.bind(null,rp,_d),np)}function Ai$1(){}function Bi$1(_d,rp){var np=di$1();rp=rp===void 0?null:rp;var ap=np.memoizedState;return ap!==null&&rp!==null&&Wh$1(rp,ap[1])?ap[0]:(np.memoizedState=[_d,rp],_d)}function Ci$1(_d,rp){var np=di$1();rp=rp===void 0?null:rp;var ap=np.memoizedState;return ap!==null&&rp!==null&&Wh$1(rp,ap[1])?ap[0]:(_d=_d(),np.memoizedState=[_d,rp],_d)}function Di$1(_d,rp,np){return Rh$1&21?(He$1(np,rp)||(np=yc$1(),N$1.lanes|=np,hh$1|=np,_d.baseState=!0),rp):(_d.baseState&&(_d.baseState=!1,Ug=!0),_d.memoizedState=np)}function Ei$1(_d,rp){var np=C$1;C$1=np!==0&&4>np?np:4,_d(!0);var ap=Qh$1.transition;Qh$1.transition={};try{_d(!1),rp()}finally{C$1=np,Qh$1.transition=ap}}function Fi$1(){return di$1().memoizedState}function Gi$1(_d,rp,np){var ap=lh$1(_d);if(np={lane:ap,action:np,hasEagerState:!1,eagerState:null,next:null},Hi$1(_d))Ii$1(rp,np);else if(np=Yg(_d,rp,np,ap),np!==null){var sp=L$1();mh$1(np,_d,ap,sp),Ji$1(np,rp,ap)}}function ri$1(_d,rp,np){var ap=lh$1(_d),sp={lane:ap,action:np,hasEagerState:!1,eagerState:null,next:null};if(Hi$1(_d))Ii$1(rp,sp);else{var lp=_d.alternate;if(_d.lanes===0&&(lp===null||lp.lanes===0)&&(lp=rp.lastRenderedReducer,lp!==null))try{var up=rp.lastRenderedState,cp=lp(up,np);if(sp.hasEagerState=!0,sp.eagerState=cp,He$1(cp,up)){var dp=rp.interleaved;dp===null?(sp.next=sp,Xg(rp)):(sp.next=dp.next,dp.next=sp),rp.interleaved=sp;return}}catch{}finally{}np=Yg(_d,rp,sp,ap),np!==null&&(sp=L$1(),mh$1(np,_d,ap,sp),Ji$1(np,rp,ap))}}function Hi$1(_d){var rp=_d.alternate;return _d===N$1||rp!==null&&rp===N$1}function Ii$1(_d,rp){Th$1=Sh$1=!0;var np=_d.pending;np===null?rp.next=rp:(rp.next=np.next,np.next=rp),_d.pending=rp}function Ji$1(_d,rp,np){if(np&4194240){var ap=rp.lanes;ap&=_d.pendingLanes,np|=ap,rp.lanes=np,Cc$1(_d,np)}}var ai$1={readContext:Vg,useCallback:Q$1,useContext:Q$1,useEffect:Q$1,useImperativeHandle:Q$1,useInsertionEffect:Q$1,useLayoutEffect:Q$1,useMemo:Q$1,useReducer:Q$1,useRef:Q$1,useState:Q$1,useDebugValue:Q$1,useDeferredValue:Q$1,useTransition:Q$1,useMutableSource:Q$1,useSyncExternalStore:Q$1,useId:Q$1,unstable_isNewReconciler:!1},Yh$1={readContext:Vg,useCallback:function(_d,rp){return ci$1().memoizedState=[_d,rp===void 0?null:rp],_d},useContext:Vg,useEffect:vi$1,useImperativeHandle:function(_d,rp,np){return np=np!=null?np.concat([_d]):null,ti$1(4194308,4,yi$1.bind(null,rp,_d),np)},useLayoutEffect:function(_d,rp){return ti$1(4194308,4,_d,rp)},useInsertionEffect:function(_d,rp){return ti$1(4,2,_d,rp)},useMemo:function(_d,rp){var np=ci$1();return rp=rp===void 0?null:rp,_d=_d(),np.memoizedState=[_d,rp],_d},useReducer:function(_d,rp,np){var ap=ci$1();return rp=np!==void 0?np(rp):rp,ap.memoizedState=ap.baseState=rp,_d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_d,lastRenderedState:rp},ap.queue=_d,_d=_d.dispatch=Gi$1.bind(null,N$1,_d),[ap.memoizedState,_d]},useRef:function(_d){var rp=ci$1();return _d={current:_d},rp.memoizedState=_d},useState:qi$1,useDebugValue:Ai$1,useDeferredValue:function(_d){return ci$1().memoizedState=_d},useTransition:function(){var _d=qi$1(!1),rp=_d[0];return _d=Ei$1.bind(null,_d[1]),ci$1().memoizedState=_d,[rp,_d]},useMutableSource:function(){},useSyncExternalStore:function(_d,rp,np){var ap=N$1,sp=ci$1();if(I$1){if(np===void 0)throw Error(p$1(407));np=np()}else{if(np=rp(),R$2===null)throw Error(p$1(349));Rh$1&30||ni$1(ap,rp,np)}sp.memoizedState=np;var lp={value:np,getSnapshot:rp};return sp.queue=lp,vi$1(ki$1.bind(null,ap,lp,_d),[_d]),ap.flags|=2048,li$1(9,mi$1.bind(null,ap,lp,np,rp),void 0,null),np},useId:function(){var _d=ci$1(),rp=R$2.identifierPrefix;if(I$1){var np=sg,ap=rg;np=(ap&~(1<<32-oc$1(ap)-1)).toString(32)+np,rp=":"+rp+"R"+np,np=Uh$1++,0<np&&(rp+="H"+np.toString(32)),rp+=":"}else np=Vh$1++,rp=":"+rp+"r"+np.toString(32)+":";return _d.memoizedState=rp},unstable_isNewReconciler:!1},Zh$1={readContext:Vg,useCallback:Bi$1,useContext:Vg,useEffect:ji$1,useImperativeHandle:zi$1,useInsertionEffect:wi$1,useLayoutEffect:xi$1,useMemo:Ci$1,useReducer:fi$1,useRef:si$1,useState:function(){return fi$1(ei$1)},useDebugValue:Ai$1,useDeferredValue:function(_d){var rp=di$1();return Di$1(rp,O$1.memoizedState,_d)},useTransition:function(){var _d=fi$1(ei$1)[0],rp=di$1().memoizedState;return[_d,rp]},useMutableSource:hi$1,useSyncExternalStore:ii$1,useId:Fi$1,unstable_isNewReconciler:!1},$h$1={readContext:Vg,useCallback:Bi$1,useContext:Vg,useEffect:ji$1,useImperativeHandle:zi$1,useInsertionEffect:wi$1,useLayoutEffect:xi$1,useMemo:Ci$1,useReducer:gi$1,useRef:si$1,useState:function(){return gi$1(ei$1)},useDebugValue:Ai$1,useDeferredValue:function(_d){var rp=di$1();return O$1===null?rp.memoizedState=_d:Di$1(rp,O$1.memoizedState,_d)},useTransition:function(){var _d=gi$1(ei$1)[0],rp=di$1().memoizedState;return[_d,rp]},useMutableSource:hi$1,useSyncExternalStore:ii$1,useId:Fi$1,unstable_isNewReconciler:!1};function Ki$1(_d,rp){try{var np="",ap=rp;do np+=Pa$1(ap),ap=ap.return;while(ap);var sp=np}catch(lp){sp=`
Error generating stack: `+lp.message+`
`+lp.stack}return{value:_d,source:rp,stack:sp,digest:null}}function Li$1(_d,rp,np){return{value:_d,source:null,stack:np??null,digest:rp??null}}function Mi$1(_d,rp){try{console.error(rp.value)}catch(np){setTimeout(function(){throw np})}}var Ni$1=typeof WeakMap=="function"?WeakMap:Map;function Oi$1(_d,rp,np){np=ch$1(-1,np),np.tag=3,np.payload={element:null};var ap=rp.value;return np.callback=function(){Pi$1||(Pi$1=!0,Qi$1=ap),Mi$1(_d,rp)},np}function Ri$1(_d,rp,np){np=ch$1(-1,np),np.tag=3;var ap=_d.type.getDerivedStateFromError;if(typeof ap=="function"){var sp=rp.value;np.payload=function(){return ap(sp)},np.callback=function(){Mi$1(_d,rp)}}var lp=_d.stateNode;return lp!==null&&typeof lp.componentDidCatch=="function"&&(np.callback=function(){Mi$1(_d,rp),typeof ap!="function"&&(Si$1===null?Si$1=new Set([this]):Si$1.add(this));var up=rp.stack;this.componentDidCatch(rp.value,{componentStack:up!==null?up:""})}),np}function Ti$1(_d,rp,np){var ap=_d.pingCache;if(ap===null){ap=_d.pingCache=new Ni$1;var sp=new Set;ap.set(rp,sp)}else sp=ap.get(rp),sp===void 0&&(sp=new Set,ap.set(rp,sp));sp.has(np)||(sp.add(np),_d=Ui$1.bind(null,_d,rp,np),rp.then(_d,_d))}function Vi$1(_d){do{var rp;if((rp=_d.tag===13)&&(rp=_d.memoizedState,rp=rp!==null?rp.dehydrated!==null:!0),rp)return _d;_d=_d.return}while(_d!==null);return null}function Wi$1(_d,rp,np,ap,sp){return _d.mode&1?(_d.flags|=65536,_d.lanes=sp,_d):(_d===rp?_d.flags|=65536:(_d.flags|=128,np.flags|=131072,np.flags&=-52805,np.tag===1&&(np.alternate===null?np.tag=17:(rp=ch$1(-1,1),rp.tag=2,dh$1(np,rp,1))),np.lanes|=1),_d)}var Xi$1=ua$1.ReactCurrentOwner,Ug=!1;function Yi$1(_d,rp,np,ap){rp.child=_d===null?Ch$1(rp,null,np,ap):Bh$1(rp,_d.child,np,ap)}function Zi$1(_d,rp,np,ap,sp){np=np.render;var lp=rp.ref;return Tg(rp,sp),ap=Xh$1(_d,rp,np,ap,lp,sp),np=bi$1(),_d!==null&&!Ug?(rp.updateQueue=_d.updateQueue,rp.flags&=-2053,_d.lanes&=~sp,$i$1(_d,rp,sp)):(I$1&&np&&vg(rp),rp.flags|=1,Yi$1(_d,rp,ap,sp),rp.child)}function aj(_d,rp,np,ap,sp){if(_d===null){var lp=np.type;return typeof lp=="function"&&!bj(lp)&&lp.defaultProps===void 0&&np.compare===null&&np.defaultProps===void 0?(rp.tag=15,rp.type=lp,cj(_d,rp,lp,ap,sp)):(_d=yh$1(np.type,null,ap,rp,rp.mode,sp),_d.ref=rp.ref,_d.return=rp,rp.child=_d)}if(lp=_d.child,!(_d.lanes&sp)){var up=lp.memoizedProps;if(np=np.compare,np=np!==null?np:Ie$1,np(up,ap)&&_d.ref===rp.ref)return $i$1(_d,rp,sp)}return rp.flags|=1,_d=wh$1(lp,ap),_d.ref=rp.ref,_d.return=rp,rp.child=_d}function cj(_d,rp,np,ap,sp){if(_d!==null){var lp=_d.memoizedProps;if(Ie$1(lp,ap)&&_d.ref===rp.ref)if(Ug=!1,rp.pendingProps=ap=lp,(_d.lanes&sp)!==0)_d.flags&131072&&(Ug=!0);else return rp.lanes=_d.lanes,$i$1(_d,rp,sp)}return dj(_d,rp,np,ap,sp)}function ej(_d,rp,np){var ap=rp.pendingProps,sp=ap.children,lp=_d!==null?_d.memoizedState:null;if(ap.mode==="hidden")if(!(rp.mode&1))rp.memoizedState={baseLanes:0,cachePool:null,transitions:null},G$1(fj,gj),gj|=np;else{if(!(np&1073741824))return _d=lp!==null?lp.baseLanes|np:np,rp.lanes=rp.childLanes=1073741824,rp.memoizedState={baseLanes:_d,cachePool:null,transitions:null},rp.updateQueue=null,G$1(fj,gj),gj|=_d,null;rp.memoizedState={baseLanes:0,cachePool:null,transitions:null},ap=lp!==null?lp.baseLanes:np,G$1(fj,gj),gj|=ap}else lp!==null?(ap=lp.baseLanes|np,rp.memoizedState=null):ap=np,G$1(fj,gj),gj|=ap;return Yi$1(_d,rp,sp,np),rp.child}function hj(_d,rp){var np=rp.ref;(_d===null&&np!==null||_d!==null&&_d.ref!==np)&&(rp.flags|=512,rp.flags|=2097152)}function dj(_d,rp,np,ap,sp){var lp=Zf$1(np)?Xf$1:H$1.current;return lp=Yf$1(rp,lp),Tg(rp,sp),np=Xh$1(_d,rp,np,ap,lp,sp),ap=bi$1(),_d!==null&&!Ug?(rp.updateQueue=_d.updateQueue,rp.flags&=-2053,_d.lanes&=~sp,$i$1(_d,rp,sp)):(I$1&&ap&&vg(rp),rp.flags|=1,Yi$1(_d,rp,np,sp),rp.child)}function ij(_d,rp,np,ap,sp){if(Zf$1(np)){var lp=!0;cg(rp)}else lp=!1;if(Tg(rp,sp),rp.stateNode===null)jj(_d,rp),ph$1(rp,np,ap),rh$1(rp,np,ap,sp),ap=!0;else if(_d===null){var up=rp.stateNode,cp=rp.memoizedProps;up.props=cp;var dp=up.context,fp=np.contextType;typeof fp=="object"&&fp!==null?fp=Vg(fp):(fp=Zf$1(np)?Xf$1:H$1.current,fp=Yf$1(rp,fp));var pp=np.getDerivedStateFromProps,hp=typeof pp=="function"||typeof up.getSnapshotBeforeUpdate=="function";hp||typeof up.UNSAFE_componentWillReceiveProps!="function"&&typeof up.componentWillReceiveProps!="function"||(cp!==ap||dp!==fp)&&qh$1(rp,up,ap,fp),$g=!1;var mp=rp.memoizedState;up.state=mp,gh$1(rp,ap,up,sp),dp=rp.memoizedState,cp!==ap||mp!==dp||Wf$1.current||$g?(typeof pp=="function"&&(kh$1(rp,np,pp,ap),dp=rp.memoizedState),(cp=$g||oh$1(rp,np,cp,ap,mp,dp,fp))?(hp||typeof up.UNSAFE_componentWillMount!="function"&&typeof up.componentWillMount!="function"||(typeof up.componentWillMount=="function"&&up.componentWillMount(),typeof up.UNSAFE_componentWillMount=="function"&&up.UNSAFE_componentWillMount()),typeof up.componentDidMount=="function"&&(rp.flags|=4194308)):(typeof up.componentDidMount=="function"&&(rp.flags|=4194308),rp.memoizedProps=ap,rp.memoizedState=dp),up.props=ap,up.state=dp,up.context=fp,ap=cp):(typeof up.componentDidMount=="function"&&(rp.flags|=4194308),ap=!1)}else{up=rp.stateNode,bh$1(_d,rp),cp=rp.memoizedProps,fp=rp.type===rp.elementType?cp:Lg(rp.type,cp),up.props=fp,hp=rp.pendingProps,mp=up.context,dp=np.contextType,typeof dp=="object"&&dp!==null?dp=Vg(dp):(dp=Zf$1(np)?Xf$1:H$1.current,dp=Yf$1(rp,dp));var gp=np.getDerivedStateFromProps;(pp=typeof gp=="function"||typeof up.getSnapshotBeforeUpdate=="function")||typeof up.UNSAFE_componentWillReceiveProps!="function"&&typeof up.componentWillReceiveProps!="function"||(cp!==hp||mp!==dp)&&qh$1(rp,up,ap,dp),$g=!1,mp=rp.memoizedState,up.state=mp,gh$1(rp,ap,up,sp);var vp=rp.memoizedState;cp!==hp||mp!==vp||Wf$1.current||$g?(typeof gp=="function"&&(kh$1(rp,np,gp,ap),vp=rp.memoizedState),(fp=$g||oh$1(rp,np,fp,ap,mp,vp,dp)||!1)?(pp||typeof up.UNSAFE_componentWillUpdate!="function"&&typeof up.componentWillUpdate!="function"||(typeof up.componentWillUpdate=="function"&&up.componentWillUpdate(ap,vp,dp),typeof up.UNSAFE_componentWillUpdate=="function"&&up.UNSAFE_componentWillUpdate(ap,vp,dp)),typeof up.componentDidUpdate=="function"&&(rp.flags|=4),typeof up.getSnapshotBeforeUpdate=="function"&&(rp.flags|=1024)):(typeof up.componentDidUpdate!="function"||cp===_d.memoizedProps&&mp===_d.memoizedState||(rp.flags|=4),typeof up.getSnapshotBeforeUpdate!="function"||cp===_d.memoizedProps&&mp===_d.memoizedState||(rp.flags|=1024),rp.memoizedProps=ap,rp.memoizedState=vp),up.props=ap,up.state=vp,up.context=dp,ap=fp):(typeof up.componentDidUpdate!="function"||cp===_d.memoizedProps&&mp===_d.memoizedState||(rp.flags|=4),typeof up.getSnapshotBeforeUpdate!="function"||cp===_d.memoizedProps&&mp===_d.memoizedState||(rp.flags|=1024),ap=!1)}return kj(_d,rp,np,ap,lp,sp)}function kj(_d,rp,np,ap,sp,lp){hj(_d,rp);var up=(rp.flags&128)!==0;if(!ap&&!up)return sp&&dg(rp,np,!1),$i$1(_d,rp,lp);ap=rp.stateNode,Xi$1.current=rp;var cp=up&&typeof np.getDerivedStateFromError!="function"?null:ap.render();return rp.flags|=1,_d!==null&&up?(rp.child=Bh$1(rp,_d.child,null,lp),rp.child=Bh$1(rp,null,cp,lp)):Yi$1(_d,rp,cp,lp),rp.memoizedState=ap.state,sp&&dg(rp,np,!0),rp.child}function lj(_d){var rp=_d.stateNode;rp.pendingContext?ag(_d,rp.pendingContext,rp.pendingContext!==rp.context):rp.context&&ag(_d,rp.context,!1),Ih$1(_d,rp.containerInfo)}function mj(_d,rp,np,ap,sp){return Ig(),Jg(sp),rp.flags|=256,Yi$1(_d,rp,np,ap),rp.child}var nj={dehydrated:null,treeContext:null,retryLane:0};function oj(_d){return{baseLanes:_d,cachePool:null,transitions:null}}function pj(_d,rp,np){var ap=rp.pendingProps,sp=M$1.current,lp=!1,up=(rp.flags&128)!==0,cp;if((cp=up)||(cp=_d!==null&&_d.memoizedState===null?!1:(sp&2)!==0),cp?(lp=!0,rp.flags&=-129):(_d===null||_d.memoizedState!==null)&&(sp|=1),G$1(M$1,sp&1),_d===null)return Eg(rp),_d=rp.memoizedState,_d!==null&&(_d=_d.dehydrated,_d!==null)?(rp.mode&1?_d.data==="$!"?rp.lanes=8:rp.lanes=1073741824:rp.lanes=1,null):(up=ap.children,_d=ap.fallback,lp?(ap=rp.mode,lp=rp.child,up={mode:"hidden",children:up},!(ap&1)&&lp!==null?(lp.childLanes=0,lp.pendingProps=up):lp=qj(up,ap,0,null),_d=Ah$1(_d,ap,np,null),lp.return=rp,_d.return=rp,lp.sibling=_d,rp.child=lp,rp.child.memoizedState=oj(np),rp.memoizedState=nj,_d):rj(rp,up));if(sp=_d.memoizedState,sp!==null&&(cp=sp.dehydrated,cp!==null))return sj(_d,rp,up,ap,cp,sp,np);if(lp){lp=ap.fallback,up=rp.mode,sp=_d.child,cp=sp.sibling;var dp={mode:"hidden",children:ap.children};return!(up&1)&&rp.child!==sp?(ap=rp.child,ap.childLanes=0,ap.pendingProps=dp,rp.deletions=null):(ap=wh$1(sp,dp),ap.subtreeFlags=sp.subtreeFlags&14680064),cp!==null?lp=wh$1(cp,lp):(lp=Ah$1(lp,up,np,null),lp.flags|=2),lp.return=rp,ap.return=rp,ap.sibling=lp,rp.child=ap,ap=lp,lp=rp.child,up=_d.child.memoizedState,up=up===null?oj(np):{baseLanes:up.baseLanes|np,cachePool:null,transitions:up.transitions},lp.memoizedState=up,lp.childLanes=_d.childLanes&~np,rp.memoizedState=nj,ap}return lp=_d.child,_d=lp.sibling,ap=wh$1(lp,{mode:"visible",children:ap.children}),!(rp.mode&1)&&(ap.lanes=np),ap.return=rp,ap.sibling=null,_d!==null&&(np=rp.deletions,np===null?(rp.deletions=[_d],rp.flags|=16):np.push(_d)),rp.child=ap,rp.memoizedState=null,ap}function rj(_d,rp){return rp=qj({mode:"visible",children:rp},_d.mode,0,null),rp.return=_d,_d.child=rp}function tj(_d,rp,np,ap){return ap!==null&&Jg(ap),Bh$1(rp,_d.child,null,np),_d=rj(rp,rp.pendingProps.children),_d.flags|=2,rp.memoizedState=null,_d}function sj(_d,rp,np,ap,sp,lp,up){if(np)return rp.flags&256?(rp.flags&=-257,ap=Li$1(Error(p$1(422))),tj(_d,rp,up,ap)):rp.memoizedState!==null?(rp.child=_d.child,rp.flags|=128,null):(lp=ap.fallback,sp=rp.mode,ap=qj({mode:"visible",children:ap.children},sp,0,null),lp=Ah$1(lp,sp,up,null),lp.flags|=2,ap.return=rp,lp.return=rp,ap.sibling=lp,rp.child=ap,rp.mode&1&&Bh$1(rp,_d.child,null,up),rp.child.memoizedState=oj(up),rp.memoizedState=nj,lp);if(!(rp.mode&1))return tj(_d,rp,up,null);if(sp.data==="$!"){if(ap=sp.nextSibling&&sp.nextSibling.dataset,ap)var cp=ap.dgst;return ap=cp,lp=Error(p$1(419)),ap=Li$1(lp,ap,void 0),tj(_d,rp,up,ap)}if(cp=(up&_d.childLanes)!==0,Ug||cp){if(ap=R$2,ap!==null){switch(up&-up){case 4:sp=2;break;case 16:sp=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:sp=32;break;case 536870912:sp=268435456;break;default:sp=0}sp=sp&(ap.suspendedLanes|up)?0:sp,sp!==0&&sp!==lp.retryLane&&(lp.retryLane=sp,Zg(_d,sp),mh$1(ap,_d,sp,-1))}return uj(),ap=Li$1(Error(p$1(421))),tj(_d,rp,up,ap)}return sp.data==="$?"?(rp.flags|=128,rp.child=_d.child,rp=vj.bind(null,_d),sp._reactRetry=rp,null):(_d=lp.treeContext,yg=Lf$1(sp.nextSibling),xg=rp,I$1=!0,zg=null,_d!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=_d.id,sg=_d.overflow,qg=rp),rp=rj(rp,ap.children),rp.flags|=4096,rp)}function wj(_d,rp,np){_d.lanes|=rp;var ap=_d.alternate;ap!==null&&(ap.lanes|=rp),Sg(_d.return,rp,np)}function xj(_d,rp,np,ap,sp){var lp=_d.memoizedState;lp===null?_d.memoizedState={isBackwards:rp,rendering:null,renderingStartTime:0,last:ap,tail:np,tailMode:sp}:(lp.isBackwards=rp,lp.rendering=null,lp.renderingStartTime=0,lp.last=ap,lp.tail=np,lp.tailMode=sp)}function yj(_d,rp,np){var ap=rp.pendingProps,sp=ap.revealOrder,lp=ap.tail;if(Yi$1(_d,rp,ap.children,np),ap=M$1.current,ap&2)ap=ap&1|2,rp.flags|=128;else{if(_d!==null&&_d.flags&128)e:for(_d=rp.child;_d!==null;){if(_d.tag===13)_d.memoizedState!==null&&wj(_d,np,rp);else if(_d.tag===19)wj(_d,np,rp);else if(_d.child!==null){_d.child.return=_d,_d=_d.child;continue}if(_d===rp)break e;for(;_d.sibling===null;){if(_d.return===null||_d.return===rp)break e;_d=_d.return}_d.sibling.return=_d.return,_d=_d.sibling}ap&=1}if(G$1(M$1,ap),!(rp.mode&1))rp.memoizedState=null;else switch(sp){case"forwards":for(np=rp.child,sp=null;np!==null;)_d=np.alternate,_d!==null&&Mh$1(_d)===null&&(sp=np),np=np.sibling;np=sp,np===null?(sp=rp.child,rp.child=null):(sp=np.sibling,np.sibling=null),xj(rp,!1,sp,np,lp);break;case"backwards":for(np=null,sp=rp.child,rp.child=null;sp!==null;){if(_d=sp.alternate,_d!==null&&Mh$1(_d)===null){rp.child=sp;break}_d=sp.sibling,sp.sibling=np,np=sp,sp=_d}xj(rp,!0,np,null,lp);break;case"together":xj(rp,!1,null,null,void 0);break;default:rp.memoizedState=null}return rp.child}function jj(_d,rp){!(rp.mode&1)&&_d!==null&&(_d.alternate=null,rp.alternate=null,rp.flags|=2)}function $i$1(_d,rp,np){if(_d!==null&&(rp.dependencies=_d.dependencies),hh$1|=rp.lanes,!(np&rp.childLanes))return null;if(_d!==null&&rp.child!==_d.child)throw Error(p$1(153));if(rp.child!==null){for(_d=rp.child,np=wh$1(_d,_d.pendingProps),rp.child=np,np.return=rp;_d.sibling!==null;)_d=_d.sibling,np=np.sibling=wh$1(_d,_d.pendingProps),np.return=rp;np.sibling=null}return rp.child}function zj(_d,rp,np){switch(rp.tag){case 3:lj(rp),Ig();break;case 5:Kh$1(rp);break;case 1:Zf$1(rp.type)&&cg(rp);break;case 4:Ih$1(rp,rp.stateNode.containerInfo);break;case 10:var ap=rp.type._context,sp=rp.memoizedProps.value;G$1(Mg,ap._currentValue),ap._currentValue=sp;break;case 13:if(ap=rp.memoizedState,ap!==null)return ap.dehydrated!==null?(G$1(M$1,M$1.current&1),rp.flags|=128,null):np&rp.child.childLanes?pj(_d,rp,np):(G$1(M$1,M$1.current&1),_d=$i$1(_d,rp,np),_d!==null?_d.sibling:null);G$1(M$1,M$1.current&1);break;case 19:if(ap=(np&rp.childLanes)!==0,_d.flags&128){if(ap)return yj(_d,rp,np);rp.flags|=128}if(sp=rp.memoizedState,sp!==null&&(sp.rendering=null,sp.tail=null,sp.lastEffect=null),G$1(M$1,M$1.current),ap)break;return null;case 22:case 23:return rp.lanes=0,ej(_d,rp,np)}return $i$1(_d,rp,np)}var Aj,Bj,Cj,Dj;Aj=function(_d,rp){for(var np=rp.child;np!==null;){if(np.tag===5||np.tag===6)_d.appendChild(np.stateNode);else if(np.tag!==4&&np.child!==null){np.child.return=np,np=np.child;continue}if(np===rp)break;for(;np.sibling===null;){if(np.return===null||np.return===rp)return;np=np.return}np.sibling.return=np.return,np=np.sibling}};Bj=function(){};Cj=function(_d,rp,np,ap){var sp=_d.memoizedProps;if(sp!==ap){_d=rp.stateNode,Hh$1(Eh$1.current);var lp=null;switch(np){case"input":sp=Ya$1(_d,sp),ap=Ya$1(_d,ap),lp=[];break;case"select":sp=A$1({},sp,{value:void 0}),ap=A$1({},ap,{value:void 0}),lp=[];break;case"textarea":sp=gb(_d,sp),ap=gb(_d,ap),lp=[];break;default:typeof sp.onClick!="function"&&typeof ap.onClick=="function"&&(_d.onclick=Bf$1)}ub(np,ap);var up;np=null;for(fp in sp)if(!ap.hasOwnProperty(fp)&&sp.hasOwnProperty(fp)&&sp[fp]!=null)if(fp==="style"){var cp=sp[fp];for(up in cp)cp.hasOwnProperty(up)&&(np||(np={}),np[up]="")}else fp!=="dangerouslySetInnerHTML"&&fp!=="children"&&fp!=="suppressContentEditableWarning"&&fp!=="suppressHydrationWarning"&&fp!=="autoFocus"&&(ea$1.hasOwnProperty(fp)?lp||(lp=[]):(lp=lp||[]).push(fp,null));for(fp in ap){var dp=ap[fp];if(cp=sp!=null?sp[fp]:void 0,ap.hasOwnProperty(fp)&&dp!==cp&&(dp!=null||cp!=null))if(fp==="style")if(cp){for(up in cp)!cp.hasOwnProperty(up)||dp&&dp.hasOwnProperty(up)||(np||(np={}),np[up]="");for(up in dp)dp.hasOwnProperty(up)&&cp[up]!==dp[up]&&(np||(np={}),np[up]=dp[up])}else np||(lp||(lp=[]),lp.push(fp,np)),np=dp;else fp==="dangerouslySetInnerHTML"?(dp=dp?dp.__html:void 0,cp=cp?cp.__html:void 0,dp!=null&&cp!==dp&&(lp=lp||[]).push(fp,dp)):fp==="children"?typeof dp!="string"&&typeof dp!="number"||(lp=lp||[]).push(fp,""+dp):fp!=="suppressContentEditableWarning"&&fp!=="suppressHydrationWarning"&&(ea$1.hasOwnProperty(fp)?(dp!=null&&fp==="onScroll"&&D$1("scroll",_d),lp||cp===dp||(lp=[])):(lp=lp||[]).push(fp,dp))}np&&(lp=lp||[]).push("style",np);var fp=lp;(rp.updateQueue=fp)&&(rp.flags|=4)}};Dj=function(_d,rp,np,ap){np!==ap&&(rp.flags|=4)};function Ej(_d,rp){if(!I$1)switch(_d.tailMode){case"hidden":rp=_d.tail;for(var np=null;rp!==null;)rp.alternate!==null&&(np=rp),rp=rp.sibling;np===null?_d.tail=null:np.sibling=null;break;case"collapsed":np=_d.tail;for(var ap=null;np!==null;)np.alternate!==null&&(ap=np),np=np.sibling;ap===null?rp||_d.tail===null?_d.tail=null:_d.tail.sibling=null:ap.sibling=null}}function S$1(_d){var rp=_d.alternate!==null&&_d.alternate.child===_d.child,np=0,ap=0;if(rp)for(var sp=_d.child;sp!==null;)np|=sp.lanes|sp.childLanes,ap|=sp.subtreeFlags&14680064,ap|=sp.flags&14680064,sp.return=_d,sp=sp.sibling;else for(sp=_d.child;sp!==null;)np|=sp.lanes|sp.childLanes,ap|=sp.subtreeFlags,ap|=sp.flags,sp.return=_d,sp=sp.sibling;return _d.subtreeFlags|=ap,_d.childLanes=np,rp}function Fj(_d,rp,np){var ap=rp.pendingProps;switch(wg(rp),rp.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S$1(rp),null;case 1:return Zf$1(rp.type)&&$f$1(),S$1(rp),null;case 3:return ap=rp.stateNode,Jh$1(),E$1(Wf$1),E$1(H$1),Oh$1(),ap.pendingContext&&(ap.context=ap.pendingContext,ap.pendingContext=null),(_d===null||_d.child===null)&&(Gg(rp)?rp.flags|=4:_d===null||_d.memoizedState.isDehydrated&&!(rp.flags&256)||(rp.flags|=1024,zg!==null&&(Gj(zg),zg=null))),Bj(_d,rp),S$1(rp),null;case 5:Lh$1(rp);var sp=Hh$1(Gh$1.current);if(np=rp.type,_d!==null&&rp.stateNode!=null)Cj(_d,rp,np,ap,sp),_d.ref!==rp.ref&&(rp.flags|=512,rp.flags|=2097152);else{if(!ap){if(rp.stateNode===null)throw Error(p$1(166));return S$1(rp),null}if(_d=Hh$1(Eh$1.current),Gg(rp)){ap=rp.stateNode,np=rp.type;var lp=rp.memoizedProps;switch(ap[Of$1]=rp,ap[Pf$1]=lp,_d=(rp.mode&1)!==0,np){case"dialog":D$1("cancel",ap),D$1("close",ap);break;case"iframe":case"object":case"embed":D$1("load",ap);break;case"video":case"audio":for(sp=0;sp<lf$1.length;sp++)D$1(lf$1[sp],ap);break;case"source":D$1("error",ap);break;case"img":case"image":case"link":D$1("error",ap),D$1("load",ap);break;case"details":D$1("toggle",ap);break;case"input":Za$1(ap,lp),D$1("invalid",ap);break;case"select":ap._wrapperState={wasMultiple:!!lp.multiple},D$1("invalid",ap);break;case"textarea":hb(ap,lp),D$1("invalid",ap)}ub(np,lp),sp=null;for(var up in lp)if(lp.hasOwnProperty(up)){var cp=lp[up];up==="children"?typeof cp=="string"?ap.textContent!==cp&&(lp.suppressHydrationWarning!==!0&&Af$1(ap.textContent,cp,_d),sp=["children",cp]):typeof cp=="number"&&ap.textContent!==""+cp&&(lp.suppressHydrationWarning!==!0&&Af$1(ap.textContent,cp,_d),sp=["children",""+cp]):ea$1.hasOwnProperty(up)&&cp!=null&&up==="onScroll"&&D$1("scroll",ap)}switch(np){case"input":Va$1(ap),db(ap,lp,!0);break;case"textarea":Va$1(ap),jb(ap);break;case"select":case"option":break;default:typeof lp.onClick=="function"&&(ap.onclick=Bf$1)}ap=sp,rp.updateQueue=ap,ap!==null&&(rp.flags|=4)}else{up=sp.nodeType===9?sp:sp.ownerDocument,_d==="http://www.w3.org/1999/xhtml"&&(_d=kb(np)),_d==="http://www.w3.org/1999/xhtml"?np==="script"?(_d=up.createElement("div"),_d.innerHTML="<script><\/script>",_d=_d.removeChild(_d.firstChild)):typeof ap.is=="string"?_d=up.createElement(np,{is:ap.is}):(_d=up.createElement(np),np==="select"&&(up=_d,ap.multiple?up.multiple=!0:ap.size&&(up.size=ap.size))):_d=up.createElementNS(_d,np),_d[Of$1]=rp,_d[Pf$1]=ap,Aj(_d,rp,!1,!1),rp.stateNode=_d;e:{switch(up=vb(np,ap),np){case"dialog":D$1("cancel",_d),D$1("close",_d),sp=ap;break;case"iframe":case"object":case"embed":D$1("load",_d),sp=ap;break;case"video":case"audio":for(sp=0;sp<lf$1.length;sp++)D$1(lf$1[sp],_d);sp=ap;break;case"source":D$1("error",_d),sp=ap;break;case"img":case"image":case"link":D$1("error",_d),D$1("load",_d),sp=ap;break;case"details":D$1("toggle",_d),sp=ap;break;case"input":Za$1(_d,ap),sp=Ya$1(_d,ap),D$1("invalid",_d);break;case"option":sp=ap;break;case"select":_d._wrapperState={wasMultiple:!!ap.multiple},sp=A$1({},ap,{value:void 0}),D$1("invalid",_d);break;case"textarea":hb(_d,ap),sp=gb(_d,ap),D$1("invalid",_d);break;default:sp=ap}ub(np,sp),cp=sp;for(lp in cp)if(cp.hasOwnProperty(lp)){var dp=cp[lp];lp==="style"?sb(_d,dp):lp==="dangerouslySetInnerHTML"?(dp=dp?dp.__html:void 0,dp!=null&&nb(_d,dp)):lp==="children"?typeof dp=="string"?(np!=="textarea"||dp!=="")&&ob(_d,dp):typeof dp=="number"&&ob(_d,""+dp):lp!=="suppressContentEditableWarning"&&lp!=="suppressHydrationWarning"&&lp!=="autoFocus"&&(ea$1.hasOwnProperty(lp)?dp!=null&&lp==="onScroll"&&D$1("scroll",_d):dp!=null&&ta$1(_d,lp,dp,up))}switch(np){case"input":Va$1(_d),db(_d,ap,!1);break;case"textarea":Va$1(_d),jb(_d);break;case"option":ap.value!=null&&_d.setAttribute("value",""+Sa$1(ap.value));break;case"select":_d.multiple=!!ap.multiple,lp=ap.value,lp!=null?fb(_d,!!ap.multiple,lp,!1):ap.defaultValue!=null&&fb(_d,!!ap.multiple,ap.defaultValue,!0);break;default:typeof sp.onClick=="function"&&(_d.onclick=Bf$1)}switch(np){case"button":case"input":case"select":case"textarea":ap=!!ap.autoFocus;break e;case"img":ap=!0;break e;default:ap=!1}}ap&&(rp.flags|=4)}rp.ref!==null&&(rp.flags|=512,rp.flags|=2097152)}return S$1(rp),null;case 6:if(_d&&rp.stateNode!=null)Dj(_d,rp,_d.memoizedProps,ap);else{if(typeof ap!="string"&&rp.stateNode===null)throw Error(p$1(166));if(np=Hh$1(Gh$1.current),Hh$1(Eh$1.current),Gg(rp)){if(ap=rp.stateNode,np=rp.memoizedProps,ap[Of$1]=rp,(lp=ap.nodeValue!==np)&&(_d=xg,_d!==null))switch(_d.tag){case 3:Af$1(ap.nodeValue,np,(_d.mode&1)!==0);break;case 5:_d.memoizedProps.suppressHydrationWarning!==!0&&Af$1(ap.nodeValue,np,(_d.mode&1)!==0)}lp&&(rp.flags|=4)}else ap=(np.nodeType===9?np:np.ownerDocument).createTextNode(ap),ap[Of$1]=rp,rp.stateNode=ap}return S$1(rp),null;case 13:if(E$1(M$1),ap=rp.memoizedState,_d===null||_d.memoizedState!==null&&_d.memoizedState.dehydrated!==null){if(I$1&&yg!==null&&rp.mode&1&&!(rp.flags&128))Hg(),Ig(),rp.flags|=98560,lp=!1;else if(lp=Gg(rp),ap!==null&&ap.dehydrated!==null){if(_d===null){if(!lp)throw Error(p$1(318));if(lp=rp.memoizedState,lp=lp!==null?lp.dehydrated:null,!lp)throw Error(p$1(317));lp[Of$1]=rp}else Ig(),!(rp.flags&128)&&(rp.memoizedState=null),rp.flags|=4;S$1(rp),lp=!1}else zg!==null&&(Gj(zg),zg=null),lp=!0;if(!lp)return rp.flags&65536?rp:null}return rp.flags&128?(rp.lanes=np,rp):(ap=ap!==null,ap!==(_d!==null&&_d.memoizedState!==null)&&ap&&(rp.child.flags|=8192,rp.mode&1&&(_d===null||M$1.current&1?T$1===0&&(T$1=3):uj())),rp.updateQueue!==null&&(rp.flags|=4),S$1(rp),null);case 4:return Jh$1(),Bj(_d,rp),_d===null&&sf$1(rp.stateNode.containerInfo),S$1(rp),null;case 10:return Rg(rp.type._context),S$1(rp),null;case 17:return Zf$1(rp.type)&&$f$1(),S$1(rp),null;case 19:if(E$1(M$1),lp=rp.memoizedState,lp===null)return S$1(rp),null;if(ap=(rp.flags&128)!==0,up=lp.rendering,up===null)if(ap)Ej(lp,!1);else{if(T$1!==0||_d!==null&&_d.flags&128)for(_d=rp.child;_d!==null;){if(up=Mh$1(_d),up!==null){for(rp.flags|=128,Ej(lp,!1),ap=up.updateQueue,ap!==null&&(rp.updateQueue=ap,rp.flags|=4),rp.subtreeFlags=0,ap=np,np=rp.child;np!==null;)lp=np,_d=ap,lp.flags&=14680066,up=lp.alternate,up===null?(lp.childLanes=0,lp.lanes=_d,lp.child=null,lp.subtreeFlags=0,lp.memoizedProps=null,lp.memoizedState=null,lp.updateQueue=null,lp.dependencies=null,lp.stateNode=null):(lp.childLanes=up.childLanes,lp.lanes=up.lanes,lp.child=up.child,lp.subtreeFlags=0,lp.deletions=null,lp.memoizedProps=up.memoizedProps,lp.memoizedState=up.memoizedState,lp.updateQueue=up.updateQueue,lp.type=up.type,_d=up.dependencies,lp.dependencies=_d===null?null:{lanes:_d.lanes,firstContext:_d.firstContext}),np=np.sibling;return G$1(M$1,M$1.current&1|2),rp.child}_d=_d.sibling}lp.tail!==null&&B$1()>Hj&&(rp.flags|=128,ap=!0,Ej(lp,!1),rp.lanes=4194304)}else{if(!ap)if(_d=Mh$1(up),_d!==null){if(rp.flags|=128,ap=!0,np=_d.updateQueue,np!==null&&(rp.updateQueue=np,rp.flags|=4),Ej(lp,!0),lp.tail===null&&lp.tailMode==="hidden"&&!up.alternate&&!I$1)return S$1(rp),null}else 2*B$1()-lp.renderingStartTime>Hj&&np!==1073741824&&(rp.flags|=128,ap=!0,Ej(lp,!1),rp.lanes=4194304);lp.isBackwards?(up.sibling=rp.child,rp.child=up):(np=lp.last,np!==null?np.sibling=up:rp.child=up,lp.last=up)}return lp.tail!==null?(rp=lp.tail,lp.rendering=rp,lp.tail=rp.sibling,lp.renderingStartTime=B$1(),rp.sibling=null,np=M$1.current,G$1(M$1,ap?np&1|2:np&1),rp):(S$1(rp),null);case 22:case 23:return Ij(),ap=rp.memoizedState!==null,_d!==null&&_d.memoizedState!==null!==ap&&(rp.flags|=8192),ap&&rp.mode&1?gj&1073741824&&(S$1(rp),rp.subtreeFlags&6&&(rp.flags|=8192)):S$1(rp),null;case 24:return null;case 25:return null}throw Error(p$1(156,rp.tag))}function Jj(_d,rp){switch(wg(rp),rp.tag){case 1:return Zf$1(rp.type)&&$f$1(),_d=rp.flags,_d&65536?(rp.flags=_d&-65537|128,rp):null;case 3:return Jh$1(),E$1(Wf$1),E$1(H$1),Oh$1(),_d=rp.flags,_d&65536&&!(_d&128)?(rp.flags=_d&-65537|128,rp):null;case 5:return Lh$1(rp),null;case 13:if(E$1(M$1),_d=rp.memoizedState,_d!==null&&_d.dehydrated!==null){if(rp.alternate===null)throw Error(p$1(340));Ig()}return _d=rp.flags,_d&65536?(rp.flags=_d&-65537|128,rp):null;case 19:return E$1(M$1),null;case 4:return Jh$1(),null;case 10:return Rg(rp.type._context),null;case 22:case 23:return Ij(),null;case 24:return null;default:return null}}var Kj=!1,U$1=!1,Lj=typeof WeakSet=="function"?WeakSet:Set,V$1=null;function Mj(_d,rp){var np=_d.ref;if(np!==null)if(typeof np=="function")try{np(null)}catch(ap){W$1(_d,rp,ap)}else np.current=null}function Nj(_d,rp,np){try{np()}catch(ap){W$1(_d,rp,ap)}}var Oj=!1;function Pj(_d,rp){if(Cf$1=dd,_d=Me$1(),Ne$1(_d)){if("selectionStart"in _d)var np={start:_d.selectionStart,end:_d.selectionEnd};else e:{np=(np=_d.ownerDocument)&&np.defaultView||window;var ap=np.getSelection&&np.getSelection();if(ap&&ap.rangeCount!==0){np=ap.anchorNode;var sp=ap.anchorOffset,lp=ap.focusNode;ap=ap.focusOffset;try{np.nodeType,lp.nodeType}catch{np=null;break e}var up=0,cp=-1,dp=-1,fp=0,pp=0,hp=_d,mp=null;t:for(;;){for(var gp;hp!==np||sp!==0&&hp.nodeType!==3||(cp=up+sp),hp!==lp||ap!==0&&hp.nodeType!==3||(dp=up+ap),hp.nodeType===3&&(up+=hp.nodeValue.length),(gp=hp.firstChild)!==null;)mp=hp,hp=gp;for(;;){if(hp===_d)break t;if(mp===np&&++fp===sp&&(cp=up),mp===lp&&++pp===ap&&(dp=up),(gp=hp.nextSibling)!==null)break;hp=mp,mp=hp.parentNode}hp=gp}np=cp===-1||dp===-1?null:{start:cp,end:dp}}else np=null}np=np||{start:0,end:0}}else np=null;for(Df$1={focusedElem:_d,selectionRange:np},dd=!1,V$1=rp;V$1!==null;)if(rp=V$1,_d=rp.child,(rp.subtreeFlags&1028)!==0&&_d!==null)_d.return=rp,V$1=_d;else for(;V$1!==null;){rp=V$1;try{var vp=rp.alternate;if(rp.flags&1024)switch(rp.tag){case 0:case 11:case 15:break;case 1:if(vp!==null){var xp=vp.memoizedProps,Sp=vp.memoizedState,yp=rp.stateNode,bp=yp.getSnapshotBeforeUpdate(rp.elementType===rp.type?xp:Lg(rp.type,xp),Sp);yp.__reactInternalSnapshotBeforeUpdate=bp}break;case 3:var Ep=rp.stateNode.containerInfo;Ep.nodeType===1?Ep.textContent="":Ep.nodeType===9&&Ep.documentElement&&Ep.removeChild(Ep.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$1(163))}}catch(wp){W$1(rp,rp.return,wp)}if(_d=rp.sibling,_d!==null){_d.return=rp.return,V$1=_d;break}V$1=rp.return}return vp=Oj,Oj=!1,vp}function Qj(_d,rp,np){var ap=rp.updateQueue;if(ap=ap!==null?ap.lastEffect:null,ap!==null){var sp=ap=ap.next;do{if((sp.tag&_d)===_d){var lp=sp.destroy;sp.destroy=void 0,lp!==void 0&&Nj(rp,np,lp)}sp=sp.next}while(sp!==ap)}}function Rj(_d,rp){if(rp=rp.updateQueue,rp=rp!==null?rp.lastEffect:null,rp!==null){var np=rp=rp.next;do{if((np.tag&_d)===_d){var ap=np.create;np.destroy=ap()}np=np.next}while(np!==rp)}}function Sj(_d){var rp=_d.ref;if(rp!==null){var np=_d.stateNode;switch(_d.tag){case 5:_d=np;break;default:_d=np}typeof rp=="function"?rp(_d):rp.current=_d}}function Tj(_d){var rp=_d.alternate;rp!==null&&(_d.alternate=null,Tj(rp)),_d.child=null,_d.deletions=null,_d.sibling=null,_d.tag===5&&(rp=_d.stateNode,rp!==null&&(delete rp[Of$1],delete rp[Pf$1],delete rp[of$1],delete rp[Qf$1],delete rp[Rf$1])),_d.stateNode=null,_d.return=null,_d.dependencies=null,_d.memoizedProps=null,_d.memoizedState=null,_d.pendingProps=null,_d.stateNode=null,_d.updateQueue=null}function Uj(_d){return _d.tag===5||_d.tag===3||_d.tag===4}function Vj(_d){e:for(;;){for(;_d.sibling===null;){if(_d.return===null||Uj(_d.return))return null;_d=_d.return}for(_d.sibling.return=_d.return,_d=_d.sibling;_d.tag!==5&&_d.tag!==6&&_d.tag!==18;){if(_d.flags&2||_d.child===null||_d.tag===4)continue e;_d.child.return=_d,_d=_d.child}if(!(_d.flags&2))return _d.stateNode}}function Wj(_d,rp,np){var ap=_d.tag;if(ap===5||ap===6)_d=_d.stateNode,rp?np.nodeType===8?np.parentNode.insertBefore(_d,rp):np.insertBefore(_d,rp):(np.nodeType===8?(rp=np.parentNode,rp.insertBefore(_d,np)):(rp=np,rp.appendChild(_d)),np=np._reactRootContainer,np!=null||rp.onclick!==null||(rp.onclick=Bf$1));else if(ap!==4&&(_d=_d.child,_d!==null))for(Wj(_d,rp,np),_d=_d.sibling;_d!==null;)Wj(_d,rp,np),_d=_d.sibling}function Xj(_d,rp,np){var ap=_d.tag;if(ap===5||ap===6)_d=_d.stateNode,rp?np.insertBefore(_d,rp):np.appendChild(_d);else if(ap!==4&&(_d=_d.child,_d!==null))for(Xj(_d,rp,np),_d=_d.sibling;_d!==null;)Xj(_d,rp,np),_d=_d.sibling}var X$1=null,Yj=!1;function Zj(_d,rp,np){for(np=np.child;np!==null;)ak(_d,rp,np),np=np.sibling}function ak(_d,rp,np){if(lc$1&&typeof lc$1.onCommitFiberUnmount=="function")try{lc$1.onCommitFiberUnmount(kc$1,np)}catch{}switch(np.tag){case 5:U$1||Mj(np,rp);case 6:var ap=X$1,sp=Yj;X$1=null,Zj(_d,rp,np),X$1=ap,Yj=sp,X$1!==null&&(Yj?(_d=X$1,np=np.stateNode,_d.nodeType===8?_d.parentNode.removeChild(np):_d.removeChild(np)):X$1.removeChild(np.stateNode));break;case 18:X$1!==null&&(Yj?(_d=X$1,np=np.stateNode,_d.nodeType===8?Kf$1(_d.parentNode,np):_d.nodeType===1&&Kf$1(_d,np),bd(_d)):Kf$1(X$1,np.stateNode));break;case 4:ap=X$1,sp=Yj,X$1=np.stateNode.containerInfo,Yj=!0,Zj(_d,rp,np),X$1=ap,Yj=sp;break;case 0:case 11:case 14:case 15:if(!U$1&&(ap=np.updateQueue,ap!==null&&(ap=ap.lastEffect,ap!==null))){sp=ap=ap.next;do{var lp=sp,up=lp.destroy;lp=lp.tag,up!==void 0&&(lp&2||lp&4)&&Nj(np,rp,up),sp=sp.next}while(sp!==ap)}Zj(_d,rp,np);break;case 1:if(!U$1&&(Mj(np,rp),ap=np.stateNode,typeof ap.componentWillUnmount=="function"))try{ap.props=np.memoizedProps,ap.state=np.memoizedState,ap.componentWillUnmount()}catch(cp){W$1(np,rp,cp)}Zj(_d,rp,np);break;case 21:Zj(_d,rp,np);break;case 22:np.mode&1?(U$1=(ap=U$1)||np.memoizedState!==null,Zj(_d,rp,np),U$1=ap):Zj(_d,rp,np);break;default:Zj(_d,rp,np)}}function bk(_d){var rp=_d.updateQueue;if(rp!==null){_d.updateQueue=null;var np=_d.stateNode;np===null&&(np=_d.stateNode=new Lj),rp.forEach(function(ap){var sp=ck.bind(null,_d,ap);np.has(ap)||(np.add(ap),ap.then(sp,sp))})}}function dk(_d,rp){var np=rp.deletions;if(np!==null)for(var ap=0;ap<np.length;ap++){var sp=np[ap];try{var lp=_d,up=rp,cp=up;e:for(;cp!==null;){switch(cp.tag){case 5:X$1=cp.stateNode,Yj=!1;break e;case 3:X$1=cp.stateNode.containerInfo,Yj=!0;break e;case 4:X$1=cp.stateNode.containerInfo,Yj=!0;break e}cp=cp.return}if(X$1===null)throw Error(p$1(160));ak(lp,up,sp),X$1=null,Yj=!1;var dp=sp.alternate;dp!==null&&(dp.return=null),sp.return=null}catch(fp){W$1(sp,rp,fp)}}if(rp.subtreeFlags&12854)for(rp=rp.child;rp!==null;)ek(rp,_d),rp=rp.sibling}function ek(_d,rp){var np=_d.alternate,ap=_d.flags;switch(_d.tag){case 0:case 11:case 14:case 15:if(dk(rp,_d),fk(_d),ap&4){try{Qj(3,_d,_d.return),Rj(3,_d)}catch(xp){W$1(_d,_d.return,xp)}try{Qj(5,_d,_d.return)}catch(xp){W$1(_d,_d.return,xp)}}break;case 1:dk(rp,_d),fk(_d),ap&512&&np!==null&&Mj(np,np.return);break;case 5:if(dk(rp,_d),fk(_d),ap&512&&np!==null&&Mj(np,np.return),_d.flags&32){var sp=_d.stateNode;try{ob(sp,"")}catch(xp){W$1(_d,_d.return,xp)}}if(ap&4&&(sp=_d.stateNode,sp!=null)){var lp=_d.memoizedProps,up=np!==null?np.memoizedProps:lp,cp=_d.type,dp=_d.updateQueue;if(_d.updateQueue=null,dp!==null)try{cp==="input"&&lp.type==="radio"&&lp.name!=null&&ab(sp,lp),vb(cp,up);var fp=vb(cp,lp);for(up=0;up<dp.length;up+=2){var pp=dp[up],hp=dp[up+1];pp==="style"?sb(sp,hp):pp==="dangerouslySetInnerHTML"?nb(sp,hp):pp==="children"?ob(sp,hp):ta$1(sp,pp,hp,fp)}switch(cp){case"input":bb(sp,lp);break;case"textarea":ib(sp,lp);break;case"select":var mp=sp._wrapperState.wasMultiple;sp._wrapperState.wasMultiple=!!lp.multiple;var gp=lp.value;gp!=null?fb(sp,!!lp.multiple,gp,!1):mp!==!!lp.multiple&&(lp.defaultValue!=null?fb(sp,!!lp.multiple,lp.defaultValue,!0):fb(sp,!!lp.multiple,lp.multiple?[]:"",!1))}sp[Pf$1]=lp}catch(xp){W$1(_d,_d.return,xp)}}break;case 6:if(dk(rp,_d),fk(_d),ap&4){if(_d.stateNode===null)throw Error(p$1(162));sp=_d.stateNode,lp=_d.memoizedProps;try{sp.nodeValue=lp}catch(xp){W$1(_d,_d.return,xp)}}break;case 3:if(dk(rp,_d),fk(_d),ap&4&&np!==null&&np.memoizedState.isDehydrated)try{bd(rp.containerInfo)}catch(xp){W$1(_d,_d.return,xp)}break;case 4:dk(rp,_d),fk(_d);break;case 13:dk(rp,_d),fk(_d),sp=_d.child,sp.flags&8192&&(lp=sp.memoizedState!==null,sp.stateNode.isHidden=lp,!lp||sp.alternate!==null&&sp.alternate.memoizedState!==null||(gk=B$1())),ap&4&&bk(_d);break;case 22:if(pp=np!==null&&np.memoizedState!==null,_d.mode&1?(U$1=(fp=U$1)||pp,dk(rp,_d),U$1=fp):dk(rp,_d),fk(_d),ap&8192){if(fp=_d.memoizedState!==null,(_d.stateNode.isHidden=fp)&&!pp&&_d.mode&1)for(V$1=_d,pp=_d.child;pp!==null;){for(hp=V$1=pp;V$1!==null;){switch(mp=V$1,gp=mp.child,mp.tag){case 0:case 11:case 14:case 15:Qj(4,mp,mp.return);break;case 1:Mj(mp,mp.return);var vp=mp.stateNode;if(typeof vp.componentWillUnmount=="function"){ap=mp,np=mp.return;try{rp=ap,vp.props=rp.memoizedProps,vp.state=rp.memoizedState,vp.componentWillUnmount()}catch(xp){W$1(ap,np,xp)}}break;case 5:Mj(mp,mp.return);break;case 22:if(mp.memoizedState!==null){hk(hp);continue}}gp!==null?(gp.return=mp,V$1=gp):hk(hp)}pp=pp.sibling}e:for(pp=null,hp=_d;;){if(hp.tag===5){if(pp===null){pp=hp;try{sp=hp.stateNode,fp?(lp=sp.style,typeof lp.setProperty=="function"?lp.setProperty("display","none","important"):lp.display="none"):(cp=hp.stateNode,dp=hp.memoizedProps.style,up=dp!=null&&dp.hasOwnProperty("display")?dp.display:null,cp.style.display=rb("display",up))}catch(xp){W$1(_d,_d.return,xp)}}}else if(hp.tag===6){if(pp===null)try{hp.stateNode.nodeValue=fp?"":hp.memoizedProps}catch(xp){W$1(_d,_d.return,xp)}}else if((hp.tag!==22&&hp.tag!==23||hp.memoizedState===null||hp===_d)&&hp.child!==null){hp.child.return=hp,hp=hp.child;continue}if(hp===_d)break e;for(;hp.sibling===null;){if(hp.return===null||hp.return===_d)break e;pp===hp&&(pp=null),hp=hp.return}pp===hp&&(pp=null),hp.sibling.return=hp.return,hp=hp.sibling}}break;case 19:dk(rp,_d),fk(_d),ap&4&&bk(_d);break;case 21:break;default:dk(rp,_d),fk(_d)}}function fk(_d){var rp=_d.flags;if(rp&2){try{e:{for(var np=_d.return;np!==null;){if(Uj(np)){var ap=np;break e}np=np.return}throw Error(p$1(160))}switch(ap.tag){case 5:var sp=ap.stateNode;ap.flags&32&&(ob(sp,""),ap.flags&=-33);var lp=Vj(_d);Xj(_d,lp,sp);break;case 3:case 4:var up=ap.stateNode.containerInfo,cp=Vj(_d);Wj(_d,cp,up);break;default:throw Error(p$1(161))}}catch(dp){W$1(_d,_d.return,dp)}_d.flags&=-3}rp&4096&&(_d.flags&=-4097)}function ik(_d,rp,np){V$1=_d,jk(_d)}function jk(_d,rp,np){for(var ap=(_d.mode&1)!==0;V$1!==null;){var sp=V$1,lp=sp.child;if(sp.tag===22&&ap){var up=sp.memoizedState!==null||Kj;if(!up){var cp=sp.alternate,dp=cp!==null&&cp.memoizedState!==null||U$1;cp=Kj;var fp=U$1;if(Kj=up,(U$1=dp)&&!fp)for(V$1=sp;V$1!==null;)up=V$1,dp=up.child,up.tag===22&&up.memoizedState!==null?kk(sp):dp!==null?(dp.return=up,V$1=dp):kk(sp);for(;lp!==null;)V$1=lp,jk(lp),lp=lp.sibling;V$1=sp,Kj=cp,U$1=fp}lk(_d)}else sp.subtreeFlags&8772&&lp!==null?(lp.return=sp,V$1=lp):lk(_d)}}function lk(_d){for(;V$1!==null;){var rp=V$1;if(rp.flags&8772){var np=rp.alternate;try{if(rp.flags&8772)switch(rp.tag){case 0:case 11:case 15:U$1||Rj(5,rp);break;case 1:var ap=rp.stateNode;if(rp.flags&4&&!U$1)if(np===null)ap.componentDidMount();else{var sp=rp.elementType===rp.type?np.memoizedProps:Lg(rp.type,np.memoizedProps);ap.componentDidUpdate(sp,np.memoizedState,ap.__reactInternalSnapshotBeforeUpdate)}var lp=rp.updateQueue;lp!==null&&ih$1(rp,lp,ap);break;case 3:var up=rp.updateQueue;if(up!==null){if(np=null,rp.child!==null)switch(rp.child.tag){case 5:np=rp.child.stateNode;break;case 1:np=rp.child.stateNode}ih$1(rp,up,np)}break;case 5:var cp=rp.stateNode;if(np===null&&rp.flags&4){np=cp;var dp=rp.memoizedProps;switch(rp.type){case"button":case"input":case"select":case"textarea":dp.autoFocus&&np.focus();break;case"img":dp.src&&(np.src=dp.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(rp.memoizedState===null){var fp=rp.alternate;if(fp!==null){var pp=fp.memoizedState;if(pp!==null){var hp=pp.dehydrated;hp!==null&&bd(hp)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$1(163))}U$1||rp.flags&512&&Sj(rp)}catch(mp){W$1(rp,rp.return,mp)}}if(rp===_d){V$1=null;break}if(np=rp.sibling,np!==null){np.return=rp.return,V$1=np;break}V$1=rp.return}}function hk(_d){for(;V$1!==null;){var rp=V$1;if(rp===_d){V$1=null;break}var np=rp.sibling;if(np!==null){np.return=rp.return,V$1=np;break}V$1=rp.return}}function kk(_d){for(;V$1!==null;){var rp=V$1;try{switch(rp.tag){case 0:case 11:case 15:var np=rp.return;try{Rj(4,rp)}catch(dp){W$1(rp,np,dp)}break;case 1:var ap=rp.stateNode;if(typeof ap.componentDidMount=="function"){var sp=rp.return;try{ap.componentDidMount()}catch(dp){W$1(rp,sp,dp)}}var lp=rp.return;try{Sj(rp)}catch(dp){W$1(rp,lp,dp)}break;case 5:var up=rp.return;try{Sj(rp)}catch(dp){W$1(rp,up,dp)}}}catch(dp){W$1(rp,rp.return,dp)}if(rp===_d){V$1=null;break}var cp=rp.sibling;if(cp!==null){cp.return=rp.return,V$1=cp;break}V$1=rp.return}}var mk=Math.ceil,nk=ua$1.ReactCurrentDispatcher,ok=ua$1.ReactCurrentOwner,pk=ua$1.ReactCurrentBatchConfig,K$1=0,R$2=null,Y$1=null,Z$1=0,gj=0,fj=Uf$1(0),T$1=0,qk=null,hh$1=0,rk=0,sk=0,tk=null,uk=null,gk=0,Hj=1/0,vk=null,Pi$1=!1,Qi$1=null,Si$1=null,wk=!1,xk=null,yk=0,zk=0,Ak=null,Bk=-1,Ck=0;function L$1(){return K$1&6?B$1():Bk!==-1?Bk:Bk=B$1()}function lh$1(_d){return _d.mode&1?K$1&2&&Z$1!==0?Z$1&-Z$1:Kg.transition!==null?(Ck===0&&(Ck=yc$1()),Ck):(_d=C$1,_d!==0||(_d=window.event,_d=_d===void 0?16:jd(_d.type)),_d):1}function mh$1(_d,rp,np,ap){if(50<zk)throw zk=0,Ak=null,Error(p$1(185));Ac$1(_d,np,ap),(!(K$1&2)||_d!==R$2)&&(_d===R$2&&(!(K$1&2)&&(rk|=np),T$1===4&&Dk(_d,Z$1)),Ek(_d,ap),np===1&&K$1===0&&!(rp.mode&1)&&(Hj=B$1()+500,fg&&jg()))}function Ek(_d,rp){var np=_d.callbackNode;wc$1(_d,rp);var ap=uc$1(_d,_d===R$2?Z$1:0);if(ap===0)np!==null&&bc$1(np),_d.callbackNode=null,_d.callbackPriority=0;else if(rp=ap&-ap,_d.callbackPriority!==rp){if(np!=null&&bc$1(np),rp===1)_d.tag===0?ig(Fk.bind(null,_d)):hg(Fk.bind(null,_d)),Jf$1(function(){!(K$1&6)&&jg()}),np=null;else{switch(Dc$1(ap)){case 1:np=fc$1;break;case 4:np=gc$1;break;case 16:np=hc$1;break;case 536870912:np=jc$1;break;default:np=hc$1}np=Gk(np,Hk.bind(null,_d))}_d.callbackPriority=rp,_d.callbackNode=np}}function Hk(_d,rp){if(Bk=-1,Ck=0,K$1&6)throw Error(p$1(327));var np=_d.callbackNode;if(Ik()&&_d.callbackNode!==np)return null;var ap=uc$1(_d,_d===R$2?Z$1:0);if(ap===0)return null;if(ap&30||ap&_d.expiredLanes||rp)rp=Jk(_d,ap);else{rp=ap;var sp=K$1;K$1|=2;var lp=Kk();(R$2!==_d||Z$1!==rp)&&(vk=null,Hj=B$1()+500,Lk(_d,rp));do try{Mk();break}catch(cp){Nk(_d,cp)}while(!0);Qg(),nk.current=lp,K$1=sp,Y$1!==null?rp=0:(R$2=null,Z$1=0,rp=T$1)}if(rp!==0){if(rp===2&&(sp=xc$1(_d),sp!==0&&(ap=sp,rp=Ok(_d,sp))),rp===1)throw np=qk,Lk(_d,0),Dk(_d,ap),Ek(_d,B$1()),np;if(rp===6)Dk(_d,ap);else{if(sp=_d.current.alternate,!(ap&30)&&!Pk(sp)&&(rp=Jk(_d,ap),rp===2&&(lp=xc$1(_d),lp!==0&&(ap=lp,rp=Ok(_d,lp))),rp===1))throw np=qk,Lk(_d,0),Dk(_d,ap),Ek(_d,B$1()),np;switch(_d.finishedWork=sp,_d.finishedLanes=ap,rp){case 0:case 1:throw Error(p$1(345));case 2:Qk(_d,uk,vk);break;case 3:if(Dk(_d,ap),(ap&130023424)===ap&&(rp=gk+500-B$1(),10<rp)){if(uc$1(_d,0)!==0)break;if(sp=_d.suspendedLanes,(sp&ap)!==ap){L$1(),_d.pingedLanes|=_d.suspendedLanes&sp;break}_d.timeoutHandle=Ff$1(Qk.bind(null,_d,uk,vk),rp);break}Qk(_d,uk,vk);break;case 4:if(Dk(_d,ap),(ap&4194240)===ap)break;for(rp=_d.eventTimes,sp=-1;0<ap;){var up=31-oc$1(ap);lp=1<<up,up=rp[up],up>sp&&(sp=up),ap&=~lp}if(ap=sp,ap=B$1()-ap,ap=(120>ap?120:480>ap?480:1080>ap?1080:1920>ap?1920:3e3>ap?3e3:4320>ap?4320:1960*mk(ap/1960))-ap,10<ap){_d.timeoutHandle=Ff$1(Qk.bind(null,_d,uk,vk),ap);break}Qk(_d,uk,vk);break;case 5:Qk(_d,uk,vk);break;default:throw Error(p$1(329))}}}return Ek(_d,B$1()),_d.callbackNode===np?Hk.bind(null,_d):null}function Ok(_d,rp){var np=tk;return _d.current.memoizedState.isDehydrated&&(Lk(_d,rp).flags|=256),_d=Jk(_d,rp),_d!==2&&(rp=uk,uk=np,rp!==null&&Gj(rp)),_d}function Gj(_d){uk===null?uk=_d:uk.push.apply(uk,_d)}function Pk(_d){for(var rp=_d;;){if(rp.flags&16384){var np=rp.updateQueue;if(np!==null&&(np=np.stores,np!==null))for(var ap=0;ap<np.length;ap++){var sp=np[ap],lp=sp.getSnapshot;sp=sp.value;try{if(!He$1(lp(),sp))return!1}catch{return!1}}}if(np=rp.child,rp.subtreeFlags&16384&&np!==null)np.return=rp,rp=np;else{if(rp===_d)break;for(;rp.sibling===null;){if(rp.return===null||rp.return===_d)return!0;rp=rp.return}rp.sibling.return=rp.return,rp=rp.sibling}}return!0}function Dk(_d,rp){for(rp&=~sk,rp&=~rk,_d.suspendedLanes|=rp,_d.pingedLanes&=~rp,_d=_d.expirationTimes;0<rp;){var np=31-oc$1(rp),ap=1<<np;_d[np]=-1,rp&=~ap}}function Fk(_d){if(K$1&6)throw Error(p$1(327));Ik();var rp=uc$1(_d,0);if(!(rp&1))return Ek(_d,B$1()),null;var np=Jk(_d,rp);if(_d.tag!==0&&np===2){var ap=xc$1(_d);ap!==0&&(rp=ap,np=Ok(_d,ap))}if(np===1)throw np=qk,Lk(_d,0),Dk(_d,rp),Ek(_d,B$1()),np;if(np===6)throw Error(p$1(345));return _d.finishedWork=_d.current.alternate,_d.finishedLanes=rp,Qk(_d,uk,vk),Ek(_d,B$1()),null}function Rk(_d,rp){var np=K$1;K$1|=1;try{return _d(rp)}finally{K$1=np,K$1===0&&(Hj=B$1()+500,fg&&jg())}}function Sk(_d){xk!==null&&xk.tag===0&&!(K$1&6)&&Ik();var rp=K$1;K$1|=1;var np=pk.transition,ap=C$1;try{if(pk.transition=null,C$1=1,_d)return _d()}finally{C$1=ap,pk.transition=np,K$1=rp,!(K$1&6)&&jg()}}function Ij(){gj=fj.current,E$1(fj)}function Lk(_d,rp){_d.finishedWork=null,_d.finishedLanes=0;var np=_d.timeoutHandle;if(np!==-1&&(_d.timeoutHandle=-1,Gf$1(np)),Y$1!==null)for(np=Y$1.return;np!==null;){var ap=np;switch(wg(ap),ap.tag){case 1:ap=ap.type.childContextTypes,ap!=null&&$f$1();break;case 3:Jh$1(),E$1(Wf$1),E$1(H$1),Oh$1();break;case 5:Lh$1(ap);break;case 4:Jh$1();break;case 13:E$1(M$1);break;case 19:E$1(M$1);break;case 10:Rg(ap.type._context);break;case 22:case 23:Ij()}np=np.return}if(R$2=_d,Y$1=_d=wh$1(_d.current,null),Z$1=gj=rp,T$1=0,qk=null,sk=rk=hh$1=0,uk=tk=null,Wg!==null){for(rp=0;rp<Wg.length;rp++)if(np=Wg[rp],ap=np.interleaved,ap!==null){np.interleaved=null;var sp=ap.next,lp=np.pending;if(lp!==null){var up=lp.next;lp.next=sp,ap.next=up}np.pending=ap}Wg=null}return _d}function Nk(_d,rp){do{var np=Y$1;try{if(Qg(),Ph$1.current=ai$1,Sh$1){for(var ap=N$1.memoizedState;ap!==null;){var sp=ap.queue;sp!==null&&(sp.pending=null),ap=ap.next}Sh$1=!1}if(Rh$1=0,P$1=O$1=N$1=null,Th$1=!1,Uh$1=0,ok.current=null,np===null||np.return===null){T$1=1,qk=rp,Y$1=null;break}e:{var lp=_d,up=np.return,cp=np,dp=rp;if(rp=Z$1,cp.flags|=32768,dp!==null&&typeof dp=="object"&&typeof dp.then=="function"){var fp=dp,pp=cp,hp=pp.tag;if(!(pp.mode&1)&&(hp===0||hp===11||hp===15)){var mp=pp.alternate;mp?(pp.updateQueue=mp.updateQueue,pp.memoizedState=mp.memoizedState,pp.lanes=mp.lanes):(pp.updateQueue=null,pp.memoizedState=null)}var gp=Vi$1(up);if(gp!==null){gp.flags&=-257,Wi$1(gp,up,cp,lp,rp),gp.mode&1&&Ti$1(lp,fp,rp),rp=gp,dp=fp;var vp=rp.updateQueue;if(vp===null){var xp=new Set;xp.add(dp),rp.updateQueue=xp}else vp.add(dp);break e}else{if(!(rp&1)){Ti$1(lp,fp,rp),uj();break e}dp=Error(p$1(426))}}else if(I$1&&cp.mode&1){var Sp=Vi$1(up);if(Sp!==null){!(Sp.flags&65536)&&(Sp.flags|=256),Wi$1(Sp,up,cp,lp,rp),Jg(Ki$1(dp,cp));break e}}lp=dp=Ki$1(dp,cp),T$1!==4&&(T$1=2),tk===null?tk=[lp]:tk.push(lp),lp=up;do{switch(lp.tag){case 3:lp.flags|=65536,rp&=-rp,lp.lanes|=rp;var yp=Oi$1(lp,dp,rp);fh$1(lp,yp);break e;case 1:cp=dp;var bp=lp.type,Ep=lp.stateNode;if(!(lp.flags&128)&&(typeof bp.getDerivedStateFromError=="function"||Ep!==null&&typeof Ep.componentDidCatch=="function"&&(Si$1===null||!Si$1.has(Ep)))){lp.flags|=65536,rp&=-rp,lp.lanes|=rp;var wp=Ri$1(lp,cp,rp);fh$1(lp,wp);break e}}lp=lp.return}while(lp!==null)}Tk(np)}catch(_p){rp=_p,Y$1===np&&np!==null&&(Y$1=np=np.return);continue}break}while(!0)}function Kk(){var _d=nk.current;return nk.current=ai$1,_d===null?ai$1:_d}function uj(){(T$1===0||T$1===3||T$1===2)&&(T$1=4),R$2===null||!(hh$1&268435455)&&!(rk&268435455)||Dk(R$2,Z$1)}function Jk(_d,rp){var np=K$1;K$1|=2;var ap=Kk();(R$2!==_d||Z$1!==rp)&&(vk=null,Lk(_d,rp));do try{Uk();break}catch(sp){Nk(_d,sp)}while(!0);if(Qg(),K$1=np,nk.current=ap,Y$1!==null)throw Error(p$1(261));return R$2=null,Z$1=0,T$1}function Uk(){for(;Y$1!==null;)Vk(Y$1)}function Mk(){for(;Y$1!==null&&!cc$1();)Vk(Y$1)}function Vk(_d){var rp=Wk(_d.alternate,_d,gj);_d.memoizedProps=_d.pendingProps,rp===null?Tk(_d):Y$1=rp,ok.current=null}function Tk(_d){var rp=_d;do{var np=rp.alternate;if(_d=rp.return,rp.flags&32768){if(np=Jj(np,rp),np!==null){np.flags&=32767,Y$1=np;return}if(_d!==null)_d.flags|=32768,_d.subtreeFlags=0,_d.deletions=null;else{T$1=6,Y$1=null;return}}else if(np=Fj(np,rp,gj),np!==null){Y$1=np;return}if(rp=rp.sibling,rp!==null){Y$1=rp;return}Y$1=rp=_d}while(rp!==null);T$1===0&&(T$1=5)}function Qk(_d,rp,np){var ap=C$1,sp=pk.transition;try{pk.transition=null,C$1=1,Xk(_d,rp,np,ap)}finally{pk.transition=sp,C$1=ap}return null}function Xk(_d,rp,np,ap){do Ik();while(xk!==null);if(K$1&6)throw Error(p$1(327));np=_d.finishedWork;var sp=_d.finishedLanes;if(np===null)return null;if(_d.finishedWork=null,_d.finishedLanes=0,np===_d.current)throw Error(p$1(177));_d.callbackNode=null,_d.callbackPriority=0;var lp=np.lanes|np.childLanes;if(Bc$1(_d,lp),_d===R$2&&(Y$1=R$2=null,Z$1=0),!(np.subtreeFlags&2064)&&!(np.flags&2064)||wk||(wk=!0,Gk(hc$1,function(){return Ik(),null})),lp=(np.flags&15990)!==0,np.subtreeFlags&15990||lp){lp=pk.transition,pk.transition=null;var up=C$1;C$1=1;var cp=K$1;K$1|=4,ok.current=null,Pj(_d,np),ek(np,_d),Oe$1(Df$1),dd=!!Cf$1,Df$1=Cf$1=null,_d.current=np,ik(np),dc$1(),K$1=cp,C$1=up,pk.transition=lp}else _d.current=np;if(wk&&(wk=!1,xk=_d,yk=sp),lp=_d.pendingLanes,lp===0&&(Si$1=null),mc$1(np.stateNode),Ek(_d,B$1()),rp!==null)for(ap=_d.onRecoverableError,np=0;np<rp.length;np++)sp=rp[np],ap(sp.value,{componentStack:sp.stack,digest:sp.digest});if(Pi$1)throw Pi$1=!1,_d=Qi$1,Qi$1=null,_d;return yk&1&&_d.tag!==0&&Ik(),lp=_d.pendingLanes,lp&1?_d===Ak?zk++:(zk=0,Ak=_d):zk=0,jg(),null}function Ik(){if(xk!==null){var _d=Dc$1(yk),rp=pk.transition,np=C$1;try{if(pk.transition=null,C$1=16>_d?16:_d,xk===null)var ap=!1;else{if(_d=xk,xk=null,yk=0,K$1&6)throw Error(p$1(331));var sp=K$1;for(K$1|=4,V$1=_d.current;V$1!==null;){var lp=V$1,up=lp.child;if(V$1.flags&16){var cp=lp.deletions;if(cp!==null){for(var dp=0;dp<cp.length;dp++){var fp=cp[dp];for(V$1=fp;V$1!==null;){var pp=V$1;switch(pp.tag){case 0:case 11:case 15:Qj(8,pp,lp)}var hp=pp.child;if(hp!==null)hp.return=pp,V$1=hp;else for(;V$1!==null;){pp=V$1;var mp=pp.sibling,gp=pp.return;if(Tj(pp),pp===fp){V$1=null;break}if(mp!==null){mp.return=gp,V$1=mp;break}V$1=gp}}}var vp=lp.alternate;if(vp!==null){var xp=vp.child;if(xp!==null){vp.child=null;do{var Sp=xp.sibling;xp.sibling=null,xp=Sp}while(xp!==null)}}V$1=lp}}if(lp.subtreeFlags&2064&&up!==null)up.return=lp,V$1=up;else e:for(;V$1!==null;){if(lp=V$1,lp.flags&2048)switch(lp.tag){case 0:case 11:case 15:Qj(9,lp,lp.return)}var yp=lp.sibling;if(yp!==null){yp.return=lp.return,V$1=yp;break e}V$1=lp.return}}var bp=_d.current;for(V$1=bp;V$1!==null;){up=V$1;var Ep=up.child;if(up.subtreeFlags&2064&&Ep!==null)Ep.return=up,V$1=Ep;else e:for(up=bp;V$1!==null;){if(cp=V$1,cp.flags&2048)try{switch(cp.tag){case 0:case 11:case 15:Rj(9,cp)}}catch(_p){W$1(cp,cp.return,_p)}if(cp===up){V$1=null;break e}var wp=cp.sibling;if(wp!==null){wp.return=cp.return,V$1=wp;break e}V$1=cp.return}}if(K$1=sp,jg(),lc$1&&typeof lc$1.onPostCommitFiberRoot=="function")try{lc$1.onPostCommitFiberRoot(kc$1,_d)}catch{}ap=!0}return ap}finally{C$1=np,pk.transition=rp}}return!1}function Yk(_d,rp,np){rp=Ki$1(np,rp),rp=Oi$1(_d,rp,1),_d=dh$1(_d,rp,1),rp=L$1(),_d!==null&&(Ac$1(_d,1,rp),Ek(_d,rp))}function W$1(_d,rp,np){if(_d.tag===3)Yk(_d,_d,np);else for(;rp!==null;){if(rp.tag===3){Yk(rp,_d,np);break}else if(rp.tag===1){var ap=rp.stateNode;if(typeof rp.type.getDerivedStateFromError=="function"||typeof ap.componentDidCatch=="function"&&(Si$1===null||!Si$1.has(ap))){_d=Ki$1(np,_d),_d=Ri$1(rp,_d,1),rp=dh$1(rp,_d,1),_d=L$1(),rp!==null&&(Ac$1(rp,1,_d),Ek(rp,_d));break}}rp=rp.return}}function Ui$1(_d,rp,np){var ap=_d.pingCache;ap!==null&&ap.delete(rp),rp=L$1(),_d.pingedLanes|=_d.suspendedLanes&np,R$2===_d&&(Z$1&np)===np&&(T$1===4||T$1===3&&(Z$1&130023424)===Z$1&&500>B$1()-gk?Lk(_d,0):sk|=np),Ek(_d,rp)}function Zk(_d,rp){rp===0&&(_d.mode&1?(rp=sc$1,sc$1<<=1,!(sc$1&130023424)&&(sc$1=4194304)):rp=1);var np=L$1();_d=Zg(_d,rp),_d!==null&&(Ac$1(_d,rp,np),Ek(_d,np))}function vj(_d){var rp=_d.memoizedState,np=0;rp!==null&&(np=rp.retryLane),Zk(_d,np)}function ck(_d,rp){var np=0;switch(_d.tag){case 13:var ap=_d.stateNode,sp=_d.memoizedState;sp!==null&&(np=sp.retryLane);break;case 19:ap=_d.stateNode;break;default:throw Error(p$1(314))}ap!==null&&ap.delete(rp),Zk(_d,np)}var Wk;Wk=function(_d,rp,np){if(_d!==null)if(_d.memoizedProps!==rp.pendingProps||Wf$1.current)Ug=!0;else{if(!(_d.lanes&np)&&!(rp.flags&128))return Ug=!1,zj(_d,rp,np);Ug=!!(_d.flags&131072)}else Ug=!1,I$1&&rp.flags&1048576&&ug(rp,ng,rp.index);switch(rp.lanes=0,rp.tag){case 2:var ap=rp.type;jj(_d,rp),_d=rp.pendingProps;var sp=Yf$1(rp,H$1.current);Tg(rp,np),sp=Xh$1(null,rp,ap,_d,sp,np);var lp=bi$1();return rp.flags|=1,typeof sp=="object"&&sp!==null&&typeof sp.render=="function"&&sp.$$typeof===void 0?(rp.tag=1,rp.memoizedState=null,rp.updateQueue=null,Zf$1(ap)?(lp=!0,cg(rp)):lp=!1,rp.memoizedState=sp.state!==null&&sp.state!==void 0?sp.state:null,ah$1(rp),sp.updater=nh$1,rp.stateNode=sp,sp._reactInternals=rp,rh$1(rp,ap,_d,np),rp=kj(null,rp,ap,!0,lp,np)):(rp.tag=0,I$1&&lp&&vg(rp),Yi$1(null,rp,sp,np),rp=rp.child),rp;case 16:ap=rp.elementType;e:{switch(jj(_d,rp),_d=rp.pendingProps,sp=ap._init,ap=sp(ap._payload),rp.type=ap,sp=rp.tag=$k(ap),_d=Lg(ap,_d),sp){case 0:rp=dj(null,rp,ap,_d,np);break e;case 1:rp=ij(null,rp,ap,_d,np);break e;case 11:rp=Zi$1(null,rp,ap,_d,np);break e;case 14:rp=aj(null,rp,ap,Lg(ap.type,_d),np);break e}throw Error(p$1(306,ap,""))}return rp;case 0:return ap=rp.type,sp=rp.pendingProps,sp=rp.elementType===ap?sp:Lg(ap,sp),dj(_d,rp,ap,sp,np);case 1:return ap=rp.type,sp=rp.pendingProps,sp=rp.elementType===ap?sp:Lg(ap,sp),ij(_d,rp,ap,sp,np);case 3:e:{if(lj(rp),_d===null)throw Error(p$1(387));ap=rp.pendingProps,lp=rp.memoizedState,sp=lp.element,bh$1(_d,rp),gh$1(rp,ap,null,np);var up=rp.memoizedState;if(ap=up.element,lp.isDehydrated)if(lp={element:ap,isDehydrated:!1,cache:up.cache,pendingSuspenseBoundaries:up.pendingSuspenseBoundaries,transitions:up.transitions},rp.updateQueue.baseState=lp,rp.memoizedState=lp,rp.flags&256){sp=Ki$1(Error(p$1(423)),rp),rp=mj(_d,rp,ap,np,sp);break e}else if(ap!==sp){sp=Ki$1(Error(p$1(424)),rp),rp=mj(_d,rp,ap,np,sp);break e}else for(yg=Lf$1(rp.stateNode.containerInfo.firstChild),xg=rp,I$1=!0,zg=null,np=Ch$1(rp,null,ap,np),rp.child=np;np;)np.flags=np.flags&-3|4096,np=np.sibling;else{if(Ig(),ap===sp){rp=$i$1(_d,rp,np);break e}Yi$1(_d,rp,ap,np)}rp=rp.child}return rp;case 5:return Kh$1(rp),_d===null&&Eg(rp),ap=rp.type,sp=rp.pendingProps,lp=_d!==null?_d.memoizedProps:null,up=sp.children,Ef$1(ap,sp)?up=null:lp!==null&&Ef$1(ap,lp)&&(rp.flags|=32),hj(_d,rp),Yi$1(_d,rp,up,np),rp.child;case 6:return _d===null&&Eg(rp),null;case 13:return pj(_d,rp,np);case 4:return Ih$1(rp,rp.stateNode.containerInfo),ap=rp.pendingProps,_d===null?rp.child=Bh$1(rp,null,ap,np):Yi$1(_d,rp,ap,np),rp.child;case 11:return ap=rp.type,sp=rp.pendingProps,sp=rp.elementType===ap?sp:Lg(ap,sp),Zi$1(_d,rp,ap,sp,np);case 7:return Yi$1(_d,rp,rp.pendingProps,np),rp.child;case 8:return Yi$1(_d,rp,rp.pendingProps.children,np),rp.child;case 12:return Yi$1(_d,rp,rp.pendingProps.children,np),rp.child;case 10:e:{if(ap=rp.type._context,sp=rp.pendingProps,lp=rp.memoizedProps,up=sp.value,G$1(Mg,ap._currentValue),ap._currentValue=up,lp!==null)if(He$1(lp.value,up)){if(lp.children===sp.children&&!Wf$1.current){rp=$i$1(_d,rp,np);break e}}else for(lp=rp.child,lp!==null&&(lp.return=rp);lp!==null;){var cp=lp.dependencies;if(cp!==null){up=lp.child;for(var dp=cp.firstContext;dp!==null;){if(dp.context===ap){if(lp.tag===1){dp=ch$1(-1,np&-np),dp.tag=2;var fp=lp.updateQueue;if(fp!==null){fp=fp.shared;var pp=fp.pending;pp===null?dp.next=dp:(dp.next=pp.next,pp.next=dp),fp.pending=dp}}lp.lanes|=np,dp=lp.alternate,dp!==null&&(dp.lanes|=np),Sg(lp.return,np,rp),cp.lanes|=np;break}dp=dp.next}}else if(lp.tag===10)up=lp.type===rp.type?null:lp.child;else if(lp.tag===18){if(up=lp.return,up===null)throw Error(p$1(341));up.lanes|=np,cp=up.alternate,cp!==null&&(cp.lanes|=np),Sg(up,np,rp),up=lp.sibling}else up=lp.child;if(up!==null)up.return=lp;else for(up=lp;up!==null;){if(up===rp){up=null;break}if(lp=up.sibling,lp!==null){lp.return=up.return,up=lp;break}up=up.return}lp=up}Yi$1(_d,rp,sp.children,np),rp=rp.child}return rp;case 9:return sp=rp.type,ap=rp.pendingProps.children,Tg(rp,np),sp=Vg(sp),ap=ap(sp),rp.flags|=1,Yi$1(_d,rp,ap,np),rp.child;case 14:return ap=rp.type,sp=Lg(ap,rp.pendingProps),sp=Lg(ap.type,sp),aj(_d,rp,ap,sp,np);case 15:return cj(_d,rp,rp.type,rp.pendingProps,np);case 17:return ap=rp.type,sp=rp.pendingProps,sp=rp.elementType===ap?sp:Lg(ap,sp),jj(_d,rp),rp.tag=1,Zf$1(ap)?(_d=!0,cg(rp)):_d=!1,Tg(rp,np),ph$1(rp,ap,sp),rh$1(rp,ap,sp,np),kj(null,rp,ap,!0,_d,np);case 19:return yj(_d,rp,np);case 22:return ej(_d,rp,np)}throw Error(p$1(156,rp.tag))};function Gk(_d,rp){return ac$1(_d,rp)}function al$1(_d,rp,np,ap){this.tag=_d,this.key=np,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=rp,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=ap,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(_d,rp,np,ap){return new al$1(_d,rp,np,ap)}function bj(_d){return _d=_d.prototype,!(!_d||!_d.isReactComponent)}function $k(_d){if(typeof _d=="function")return bj(_d)?1:0;if(_d!=null){if(_d=_d.$$typeof,_d===Da$1)return 11;if(_d===Ga$1)return 14}return 2}function wh$1(_d,rp){var np=_d.alternate;return np===null?(np=Bg(_d.tag,rp,_d.key,_d.mode),np.elementType=_d.elementType,np.type=_d.type,np.stateNode=_d.stateNode,np.alternate=_d,_d.alternate=np):(np.pendingProps=rp,np.type=_d.type,np.flags=0,np.subtreeFlags=0,np.deletions=null),np.flags=_d.flags&14680064,np.childLanes=_d.childLanes,np.lanes=_d.lanes,np.child=_d.child,np.memoizedProps=_d.memoizedProps,np.memoizedState=_d.memoizedState,np.updateQueue=_d.updateQueue,rp=_d.dependencies,np.dependencies=rp===null?null:{lanes:rp.lanes,firstContext:rp.firstContext},np.sibling=_d.sibling,np.index=_d.index,np.ref=_d.ref,np}function yh$1(_d,rp,np,ap,sp,lp){var up=2;if(ap=_d,typeof _d=="function")bj(_d)&&(up=1);else if(typeof _d=="string")up=5;else e:switch(_d){case ya$1:return Ah$1(np.children,sp,lp,rp);case za$1:up=8,sp|=8;break;case Aa$1:return _d=Bg(12,np,rp,sp|2),_d.elementType=Aa$1,_d.lanes=lp,_d;case Ea$1:return _d=Bg(13,np,rp,sp),_d.elementType=Ea$1,_d.lanes=lp,_d;case Fa$1:return _d=Bg(19,np,rp,sp),_d.elementType=Fa$1,_d.lanes=lp,_d;case Ia$1:return qj(np,sp,lp,rp);default:if(typeof _d=="object"&&_d!==null)switch(_d.$$typeof){case Ba$1:up=10;break e;case Ca$1:up=9;break e;case Da$1:up=11;break e;case Ga$1:up=14;break e;case Ha$1:up=16,ap=null;break e}throw Error(p$1(130,_d==null?_d:typeof _d,""))}return rp=Bg(up,np,rp,sp),rp.elementType=_d,rp.type=ap,rp.lanes=lp,rp}function Ah$1(_d,rp,np,ap){return _d=Bg(7,_d,ap,rp),_d.lanes=np,_d}function qj(_d,rp,np,ap){return _d=Bg(22,_d,ap,rp),_d.elementType=Ia$1,_d.lanes=np,_d.stateNode={isHidden:!1},_d}function xh$1(_d,rp,np){return _d=Bg(6,_d,null,rp),_d.lanes=np,_d}function zh$1(_d,rp,np){return rp=Bg(4,_d.children!==null?_d.children:[],_d.key,rp),rp.lanes=np,rp.stateNode={containerInfo:_d.containerInfo,pendingChildren:null,implementation:_d.implementation},rp}function bl$1(_d,rp,np,ap,sp){this.tag=rp,this.containerInfo=_d,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc$1(0),this.expirationTimes=zc$1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc$1(0),this.identifierPrefix=ap,this.onRecoverableError=sp,this.mutableSourceEagerHydrationData=null}function cl$1(_d,rp,np,ap,sp,lp,up,cp,dp){return _d=new bl$1(_d,rp,np,cp,dp),rp===1?(rp=1,lp===!0&&(rp|=8)):rp=0,lp=Bg(3,null,null,rp),_d.current=lp,lp.stateNode=_d,lp.memoizedState={element:ap,isDehydrated:np,cache:null,transitions:null,pendingSuspenseBoundaries:null},ah$1(lp),_d}function dl$1(_d,rp,np){var ap=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa$1,key:ap==null?null:""+ap,children:_d,containerInfo:rp,implementation:np}}function el$1(_d){if(!_d)return Vf$1;_d=_d._reactInternals;e:{if(Vb(_d)!==_d||_d.tag!==1)throw Error(p$1(170));var rp=_d;do{switch(rp.tag){case 3:rp=rp.stateNode.context;break e;case 1:if(Zf$1(rp.type)){rp=rp.stateNode.__reactInternalMemoizedMergedChildContext;break e}}rp=rp.return}while(rp!==null);throw Error(p$1(171))}if(_d.tag===1){var np=_d.type;if(Zf$1(np))return bg(_d,np,rp)}return rp}function fl$1(_d,rp,np,ap,sp,lp,up,cp,dp){return _d=cl$1(np,ap,!0,_d,sp,lp,up,cp,dp),_d.context=el$1(null),np=_d.current,ap=L$1(),sp=lh$1(np),lp=ch$1(ap,sp),lp.callback=rp??null,dh$1(np,lp,sp),_d.current.lanes=sp,Ac$1(_d,sp,ap),Ek(_d,ap),_d}function gl$1(_d,rp,np,ap){var sp=rp.current,lp=L$1(),up=lh$1(sp);return np=el$1(np),rp.context===null?rp.context=np:rp.pendingContext=np,rp=ch$1(lp,up),rp.payload={element:_d},ap=ap===void 0?null:ap,ap!==null&&(rp.callback=ap),_d=dh$1(sp,rp,up),_d!==null&&(mh$1(_d,sp,up,lp),eh$1(_d,sp,up)),up}function hl$1(_d){if(_d=_d.current,!_d.child)return null;switch(_d.child.tag){case 5:return _d.child.stateNode;default:return _d.child.stateNode}}function il$1(_d,rp){if(_d=_d.memoizedState,_d!==null&&_d.dehydrated!==null){var np=_d.retryLane;_d.retryLane=np!==0&&np<rp?np:rp}}function jl$1(_d,rp){il$1(_d,rp),(_d=_d.alternate)&&il$1(_d,rp)}function kl$1(){return null}var ll$1=typeof reportError=="function"?reportError:function(_d){console.error(_d)};function ml$1(_d){this._internalRoot=_d}nl$1.prototype.render=ml$1.prototype.render=function(_d){var rp=this._internalRoot;if(rp===null)throw Error(p$1(409));gl$1(_d,rp,null,null)};nl$1.prototype.unmount=ml$1.prototype.unmount=function(){var _d=this._internalRoot;if(_d!==null){this._internalRoot=null;var rp=_d.containerInfo;Sk(function(){gl$1(null,_d,null,null)}),rp[uf$1]=null}};function nl$1(_d){this._internalRoot=_d}nl$1.prototype.unstable_scheduleHydration=function(_d){if(_d){var rp=Hc$1();_d={blockedOn:null,target:_d,priority:rp};for(var np=0;np<Qc$1.length&&rp!==0&&rp<Qc$1[np].priority;np++);Qc$1.splice(np,0,_d),np===0&&Vc$1(_d)}};function ol$1(_d){return!(!_d||_d.nodeType!==1&&_d.nodeType!==9&&_d.nodeType!==11)}function pl$1(_d){return!(!_d||_d.nodeType!==1&&_d.nodeType!==9&&_d.nodeType!==11&&(_d.nodeType!==8||_d.nodeValue!==" react-mount-point-unstable "))}function ql$1(){}function rl$1(_d,rp,np,ap,sp){if(sp){if(typeof ap=="function"){var lp=ap;ap=function(){var fp=hl$1(up);lp.call(fp)}}var up=fl$1(rp,ap,_d,0,null,!1,!1,"",ql$1);return _d._reactRootContainer=up,_d[uf$1]=up.current,sf$1(_d.nodeType===8?_d.parentNode:_d),Sk(),up}for(;sp=_d.lastChild;)_d.removeChild(sp);if(typeof ap=="function"){var cp=ap;ap=function(){var fp=hl$1(dp);cp.call(fp)}}var dp=cl$1(_d,0,!1,null,null,!1,!1,"",ql$1);return _d._reactRootContainer=dp,_d[uf$1]=dp.current,sf$1(_d.nodeType===8?_d.parentNode:_d),Sk(function(){gl$1(rp,dp,np,ap)}),dp}function sl$1(_d,rp,np,ap,sp){var lp=np._reactRootContainer;if(lp){var up=lp;if(typeof sp=="function"){var cp=sp;sp=function(){var dp=hl$1(up);cp.call(dp)}}gl$1(rp,up,_d,sp)}else up=rl$1(np,rp,_d,sp,ap);return hl$1(up)}Ec$1=function(_d){switch(_d.tag){case 3:var rp=_d.stateNode;if(rp.current.memoizedState.isDehydrated){var np=tc$1(rp.pendingLanes);np!==0&&(Cc$1(rp,np|1),Ek(rp,B$1()),!(K$1&6)&&(Hj=B$1()+500,jg()))}break;case 13:Sk(function(){var ap=Zg(_d,1);if(ap!==null){var sp=L$1();mh$1(ap,_d,1,sp)}}),jl$1(_d,1)}};Fc$1=function(_d){if(_d.tag===13){var rp=Zg(_d,134217728);if(rp!==null){var np=L$1();mh$1(rp,_d,134217728,np)}jl$1(_d,134217728)}};Gc$1=function(_d){if(_d.tag===13){var rp=lh$1(_d),np=Zg(_d,rp);if(np!==null){var ap=L$1();mh$1(np,_d,rp,ap)}jl$1(_d,rp)}};Hc$1=function(){return C$1};Ic$1=function(_d,rp){var np=C$1;try{return C$1=_d,rp()}finally{C$1=np}};yb=function(_d,rp,np){switch(rp){case"input":if(bb(_d,np),rp=np.name,np.type==="radio"&&rp!=null){for(np=_d;np.parentNode;)np=np.parentNode;for(np=np.querySelectorAll("input[name="+JSON.stringify(""+rp)+'][type="radio"]'),rp=0;rp<np.length;rp++){var ap=np[rp];if(ap!==_d&&ap.form===_d.form){var sp=Db(ap);if(!sp)throw Error(p$1(90));Wa$1(ap),bb(ap,sp)}}}break;case"textarea":ib(_d,np);break;case"select":rp=np.value,rp!=null&&fb(_d,!!np.multiple,rp,!1)}};Gb=Rk;Hb=Sk;var tl$1={usingClientEntryPoint:!1,Events:[Cb,ue$1,Db,Eb,Fb,Rk]},ul$1={findFiberByHostInstance:Wc$1,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},vl$1={bundleType:ul$1.bundleType,version:ul$1.version,rendererPackageName:ul$1.rendererPackageName,rendererConfig:ul$1.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua$1.ReactCurrentDispatcher,findHostInstanceByFiber:function(_d){return _d=Zb(_d),_d===null?null:_d.stateNode},findFiberByHostInstance:ul$1.findFiberByHostInstance||kl$1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wl$1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wl$1.isDisabled&&wl$1.supportsFiber)try{kc$1=wl$1.inject(vl$1),lc$1=wl$1}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl$1;reactDom_production_min.createPortal=function(_d,rp){var np=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ol$1(rp))throw Error(p$1(200));return dl$1(_d,rp,null,np)};reactDom_production_min.createRoot=function(_d,rp){if(!ol$1(_d))throw Error(p$1(299));var np=!1,ap="",sp=ll$1;return rp!=null&&(rp.unstable_strictMode===!0&&(np=!0),rp.identifierPrefix!==void 0&&(ap=rp.identifierPrefix),rp.onRecoverableError!==void 0&&(sp=rp.onRecoverableError)),rp=cl$1(_d,1,!1,null,null,np,!1,ap,sp),_d[uf$1]=rp.current,sf$1(_d.nodeType===8?_d.parentNode:_d),new ml$1(rp)};reactDom_production_min.findDOMNode=function(_d){if(_d==null)return null;if(_d.nodeType===1)return _d;var rp=_d._reactInternals;if(rp===void 0)throw typeof _d.render=="function"?Error(p$1(188)):(_d=Object.keys(_d).join(","),Error(p$1(268,_d)));return _d=Zb(rp),_d=_d===null?null:_d.stateNode,_d};reactDom_production_min.flushSync=function(_d){return Sk(_d)};reactDom_production_min.hydrate=function(_d,rp,np){if(!pl$1(rp))throw Error(p$1(200));return sl$1(null,_d,rp,!0,np)};reactDom_production_min.hydrateRoot=function(_d,rp,np){if(!ol$1(_d))throw Error(p$1(405));var ap=np!=null&&np.hydratedSources||null,sp=!1,lp="",up=ll$1;if(np!=null&&(np.unstable_strictMode===!0&&(sp=!0),np.identifierPrefix!==void 0&&(lp=np.identifierPrefix),np.onRecoverableError!==void 0&&(up=np.onRecoverableError)),rp=fl$1(rp,null,_d,1,np??null,sp,!1,lp,up),_d[uf$1]=rp.current,sf$1(_d),ap)for(_d=0;_d<ap.length;_d++)np=ap[_d],sp=np._getVersion,sp=sp(np._source),rp.mutableSourceEagerHydrationData==null?rp.mutableSourceEagerHydrationData=[np,sp]:rp.mutableSourceEagerHydrationData.push(np,sp);return new nl$1(rp)};reactDom_production_min.render=function(_d,rp,np){if(!pl$1(rp))throw Error(p$1(200));return sl$1(null,_d,rp,!1,np)};reactDom_production_min.unmountComponentAtNode=function(_d){if(!pl$1(_d))throw Error(p$1(40));return _d._reactRootContainer?(Sk(function(){sl$1(null,null,_d,!1,function(){_d._reactRootContainer=null,_d[uf$1]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Rk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(_d,rp,np,ap){if(!pl$1(np))throw Error(p$1(200));if(_d==null||_d._reactInternals===void 0)throw Error(p$1(38));return sl$1(_d,rp,np,!1,ap)};reactDom_production_min.version="18.2.0-next-9e3b772b8-20220608";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(_d){console.error(_d)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports;const ReactDOM=getDefaultExportFromCjs(reactDomExports);/**
 * @remix-run/router v1.14.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$6(){return _extends$6=Object.assign?Object.assign.bind():function(_d){for(var rp=1;rp<arguments.length;rp++){var np=arguments[rp];for(var ap in np)Object.prototype.hasOwnProperty.call(np,ap)&&(_d[ap]=np[ap])}return _d},_extends$6.apply(this,arguments)}var Action;(function(_d){_d.Pop="POP",_d.Push="PUSH",_d.Replace="REPLACE"})(Action||(Action={}));const PopStateEventType="popstate";function createBrowserHistory(_d){_d===void 0&&(_d={});function rp(ap,sp){let{pathname:lp,search:up,hash:cp}=ap.location;return createLocation("",{pathname:lp,search:up,hash:cp},sp.state&&sp.state.usr||null,sp.state&&sp.state.key||"default")}function np(ap,sp){return typeof sp=="string"?sp:createPath(sp)}return getUrlBasedHistory(rp,np,null,_d)}function invariant$1(_d,rp){if(_d===!1||_d===null||typeof _d>"u")throw new Error(rp)}function warning(_d,rp){if(!_d){typeof console<"u"&&console.warn(rp);try{throw new Error(rp)}catch{}}}function createKey(){return Math.random().toString(36).substr(2,8)}function getHistoryState(_d,rp){return{usr:_d.state,key:_d.key,idx:rp}}function createLocation(_d,rp,np,ap){return np===void 0&&(np=null),_extends$6({pathname:typeof _d=="string"?_d:_d.pathname,search:"",hash:""},typeof rp=="string"?parsePath(rp):rp,{state:np,key:rp&&rp.key||ap||createKey()})}function createPath(_d){let{pathname:rp="/",search:np="",hash:ap=""}=_d;return np&&np!=="?"&&(rp+=np.charAt(0)==="?"?np:"?"+np),ap&&ap!=="#"&&(rp+=ap.charAt(0)==="#"?ap:"#"+ap),rp}function parsePath(_d){let rp={};if(_d){let np=_d.indexOf("#");np>=0&&(rp.hash=_d.substr(np),_d=_d.substr(0,np));let ap=_d.indexOf("?");ap>=0&&(rp.search=_d.substr(ap),_d=_d.substr(0,ap)),_d&&(rp.pathname=_d)}return rp}function getUrlBasedHistory(_d,rp,np,ap){ap===void 0&&(ap={});let{window:sp=document.defaultView,v5Compat:lp=!1}=ap,up=sp.history,cp=Action.Pop,dp=null,fp=pp();fp==null&&(fp=0,up.replaceState(_extends$6({},up.state,{idx:fp}),""));function pp(){return(up.state||{idx:null}).idx}function hp(){cp=Action.Pop;let Sp=pp(),yp=Sp==null?null:Sp-fp;fp=Sp,dp&&dp({action:cp,location:xp.location,delta:yp})}function mp(Sp,yp){cp=Action.Push;let bp=createLocation(xp.location,Sp,yp);np&&np(bp,Sp),fp=pp()+1;let Ep=getHistoryState(bp,fp),wp=xp.createHref(bp);try{up.pushState(Ep,"",wp)}catch(_p){if(_p instanceof DOMException&&_p.name==="DataCloneError")throw _p;sp.location.assign(wp)}lp&&dp&&dp({action:cp,location:xp.location,delta:1})}function gp(Sp,yp){cp=Action.Replace;let bp=createLocation(xp.location,Sp,yp);np&&np(bp,Sp),fp=pp();let Ep=getHistoryState(bp,fp),wp=xp.createHref(bp);up.replaceState(Ep,"",wp),lp&&dp&&dp({action:cp,location:xp.location,delta:0})}function vp(Sp){let yp=sp.location.origin!=="null"?sp.location.origin:sp.location.href,bp=typeof Sp=="string"?Sp:createPath(Sp);return invariant$1(yp,"No window.location.(origin|href) available to create URL for href: "+bp),new URL(bp,yp)}let xp={get action(){return cp},get location(){return _d(sp,up)},listen(Sp){if(dp)throw new Error("A history only accepts one active listener");return sp.addEventListener(PopStateEventType,hp),dp=Sp,()=>{sp.removeEventListener(PopStateEventType,hp),dp=null}},createHref(Sp){return rp(sp,Sp)},createURL:vp,encodeLocation(Sp){let yp=vp(Sp);return{pathname:yp.pathname,search:yp.search,hash:yp.hash}},push:mp,replace:gp,go(Sp){return up.go(Sp)}};return xp}var ResultType;(function(_d){_d.data="data",_d.deferred="deferred",_d.redirect="redirect",_d.error="error"})(ResultType||(ResultType={}));function matchRoutes(_d,rp,np){np===void 0&&(np="/");let ap=typeof rp=="string"?parsePath(rp):rp,sp=stripBasename(ap.pathname||"/",np);if(sp==null)return null;let lp=flattenRoutes(_d);rankRouteBranches(lp);let up=null;for(let cp=0;up==null&&cp<lp.length;++cp)up=matchRouteBranch(lp[cp],safelyDecodeURI(sp));return up}function flattenRoutes(_d,rp,np,ap){rp===void 0&&(rp=[]),np===void 0&&(np=[]),ap===void 0&&(ap="");let sp=(lp,up,cp)=>{let dp={relativePath:cp===void 0?lp.path||"":cp,caseSensitive:lp.caseSensitive===!0,childrenIndex:up,route:lp};dp.relativePath.startsWith("/")&&(invariant$1(dp.relativePath.startsWith(ap),'Absolute route path "'+dp.relativePath+'" nested under path '+('"'+ap+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),dp.relativePath=dp.relativePath.slice(ap.length));let fp=joinPaths([ap,dp.relativePath]),pp=np.concat(dp);lp.children&&lp.children.length>0&&(invariant$1(lp.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+fp+'".')),flattenRoutes(lp.children,rp,pp,fp)),!(lp.path==null&&!lp.index)&&rp.push({path:fp,score:computeScore(fp,lp.index),routesMeta:pp})};return _d.forEach((lp,up)=>{var cp;if(lp.path===""||!((cp=lp.path)!=null&&cp.includes("?")))sp(lp,up);else for(let dp of explodeOptionalSegments(lp.path))sp(lp,up,dp)}),rp}function explodeOptionalSegments(_d){let rp=_d.split("/");if(rp.length===0)return[];let[np,...ap]=rp,sp=np.endsWith("?"),lp=np.replace(/\?$/,"");if(ap.length===0)return sp?[lp,""]:[lp];let up=explodeOptionalSegments(ap.join("/")),cp=[];return cp.push(...up.map(dp=>dp===""?lp:[lp,dp].join("/"))),sp&&cp.push(...up),cp.map(dp=>_d.startsWith("/")&&dp===""?"/":dp)}function rankRouteBranches(_d){_d.sort((rp,np)=>rp.score!==np.score?np.score-rp.score:compareIndexes(rp.routesMeta.map(ap=>ap.childrenIndex),np.routesMeta.map(ap=>ap.childrenIndex)))}const paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=_d=>_d==="*";function computeScore(_d,rp){let np=_d.split("/"),ap=np.length;return np.some(isSplat)&&(ap+=splatPenalty),rp&&(ap+=indexRouteValue),np.filter(sp=>!isSplat(sp)).reduce((sp,lp)=>sp+(paramRe.test(lp)?dynamicSegmentValue:lp===""?emptySegmentValue:staticSegmentValue),ap)}function compareIndexes(_d,rp){return _d.length===rp.length&&_d.slice(0,-1).every((ap,sp)=>ap===rp[sp])?_d[_d.length-1]-rp[rp.length-1]:0}function matchRouteBranch(_d,rp){let{routesMeta:np}=_d,ap={},sp="/",lp=[];for(let up=0;up<np.length;++up){let cp=np[up],dp=up===np.length-1,fp=sp==="/"?rp:rp.slice(sp.length)||"/",pp=matchPath({path:cp.relativePath,caseSensitive:cp.caseSensitive,end:dp},fp);if(!pp)return null;Object.assign(ap,pp.params);let hp=cp.route;lp.push({params:ap,pathname:joinPaths([sp,pp.pathname]),pathnameBase:normalizePathname(joinPaths([sp,pp.pathnameBase])),route:hp}),pp.pathnameBase!=="/"&&(sp=joinPaths([sp,pp.pathnameBase]))}return lp}function matchPath(_d,rp){typeof _d=="string"&&(_d={path:_d,caseSensitive:!1,end:!0});let[np,ap]=compilePath(_d.path,_d.caseSensitive,_d.end),sp=rp.match(np);if(!sp)return null;let lp=sp[0],up=lp.replace(/(.)\/+$/,"$1"),cp=sp.slice(1);return{params:ap.reduce((fp,pp,hp)=>{let{paramName:mp,isOptional:gp}=pp;if(mp==="*"){let xp=cp[hp]||"";up=lp.slice(0,lp.length-xp.length).replace(/(.)\/+$/,"$1")}const vp=cp[hp];return gp&&!vp?fp[mp]=void 0:fp[mp]=safelyDecodeURIComponent(vp||"",mp),fp},{}),pathname:lp,pathnameBase:up,pattern:_d}}function compilePath(_d,rp,np){rp===void 0&&(rp=!1),np===void 0&&(np=!0),warning(_d==="*"||!_d.endsWith("*")||_d.endsWith("/*"),'Route path "'+_d+'" will be treated as if it were '+('"'+_d.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+_d.replace(/\*$/,"/*")+'".'));let ap=[],sp="^"+_d.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(up,cp,dp)=>(ap.push({paramName:cp,isOptional:dp!=null}),dp?"/?([^\\/]+)?":"/([^\\/]+)"));return _d.endsWith("*")?(ap.push({paramName:"*"}),sp+=_d==="*"||_d==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):np?sp+="\\/*$":_d!==""&&_d!=="/"&&(sp+="(?:(?=\\/|$))"),[new RegExp(sp,rp?void 0:"i"),ap]}function safelyDecodeURI(_d){try{return decodeURI(_d)}catch(rp){return warning(!1,'The URL path "'+_d+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+rp+").")),_d}}function safelyDecodeURIComponent(_d,rp){try{return decodeURIComponent(_d)}catch(np){return warning(!1,'The value for the URL param "'+rp+'" will not be decoded because'+(' the string "'+_d+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+np+").")),_d}}function stripBasename(_d,rp){if(rp==="/")return _d;if(!_d.toLowerCase().startsWith(rp.toLowerCase()))return null;let np=rp.endsWith("/")?rp.length-1:rp.length,ap=_d.charAt(np);return ap&&ap!=="/"?null:_d.slice(np)||"/"}function resolvePath(_d,rp){rp===void 0&&(rp="/");let{pathname:np,search:ap="",hash:sp=""}=typeof _d=="string"?parsePath(_d):_d;return{pathname:np?np.startsWith("/")?np:resolvePathname(np,rp):rp,search:normalizeSearch(ap),hash:normalizeHash(sp)}}function resolvePathname(_d,rp){let np=rp.replace(/\/+$/,"").split("/");return _d.split("/").forEach(sp=>{sp===".."?np.length>1&&np.pop():sp!=="."&&np.push(sp)}),np.length>1?np.join("/"):"/"}function getInvalidPathError(_d,rp,np,ap){return"Cannot include a '"+_d+"' character in a manually specified "+("`to."+rp+"` field ["+JSON.stringify(ap)+"].  Please separate it out to the ")+("`to."+np+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function getPathContributingMatches(_d){return _d.filter((rp,np)=>np===0||rp.route.path&&rp.route.path.length>0)}function getResolveToMatches(_d,rp){let np=getPathContributingMatches(_d);return rp?np.map((ap,sp)=>sp===_d.length-1?ap.pathname:ap.pathnameBase):np.map(ap=>ap.pathnameBase)}function resolveTo(_d,rp,np,ap){ap===void 0&&(ap=!1);let sp;typeof _d=="string"?sp=parsePath(_d):(sp=_extends$6({},_d),invariant$1(!sp.pathname||!sp.pathname.includes("?"),getInvalidPathError("?","pathname","search",sp)),invariant$1(!sp.pathname||!sp.pathname.includes("#"),getInvalidPathError("#","pathname","hash",sp)),invariant$1(!sp.search||!sp.search.includes("#"),getInvalidPathError("#","search","hash",sp)));let lp=_d===""||sp.pathname==="",up=lp?"/":sp.pathname,cp;if(up==null)cp=np;else{let hp=rp.length-1;if(!ap&&up.startsWith("..")){let mp=up.split("/");for(;mp[0]==="..";)mp.shift(),hp-=1;sp.pathname=mp.join("/")}cp=hp>=0?rp[hp]:"/"}let dp=resolvePath(sp,cp),fp=up&&up!=="/"&&up.endsWith("/"),pp=(lp||up===".")&&np.endsWith("/");return!dp.pathname.endsWith("/")&&(fp||pp)&&(dp.pathname+="/"),dp}const joinPaths=_d=>_d.join("/").replace(/\/\/+/g,"/"),normalizePathname=_d=>_d.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=_d=>!_d||_d==="?"?"":_d.startsWith("?")?_d:"?"+_d,normalizeHash=_d=>!_d||_d==="#"?"":_d.startsWith("#")?_d:"#"+_d;function isRouteErrorResponse(_d){return _d!=null&&typeof _d.status=="number"&&typeof _d.statusText=="string"&&typeof _d.internal=="boolean"&&"data"in _d}const validMutationMethodsArr=["post","put","patch","delete"];new Set(validMutationMethodsArr);const validRequestMethodsArr=["get",...validMutationMethodsArr];new Set(validRequestMethodsArr);/**
 * React Router v6.21.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$5(){return _extends$5=Object.assign?Object.assign.bind():function(_d){for(var rp=1;rp<arguments.length;rp++){var np=arguments[rp];for(var ap in np)Object.prototype.hasOwnProperty.call(np,ap)&&(_d[ap]=np[ap])}return _d},_extends$5.apply(this,arguments)}const DataRouterContext=reactExports.createContext(null),DataRouterStateContext=reactExports.createContext(null),NavigationContext=reactExports.createContext(null),LocationContext=reactExports.createContext(null),RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1}),RouteErrorContext=reactExports.createContext(null);function useHref(_d,rp){let{relative:np}=rp===void 0?{}:rp;useInRouterContext()||invariant$1(!1);let{basename:ap,navigator:sp}=reactExports.useContext(NavigationContext),{hash:lp,pathname:up,search:cp}=useResolvedPath(_d,{relative:np}),dp=up;return ap!=="/"&&(dp=up==="/"?ap:joinPaths([ap,up])),sp.createHref({pathname:dp,search:cp,hash:lp})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return useInRouterContext()||invariant$1(!1),reactExports.useContext(LocationContext).location}function useIsomorphicLayoutEffect$2(_d){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(_d)}function useNavigate(){let{isDataRoute:_d}=reactExports.useContext(RouteContext);return _d?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){useInRouterContext()||invariant$1(!1);let _d=reactExports.useContext(DataRouterContext),{basename:rp,future:np,navigator:ap}=reactExports.useContext(NavigationContext),{matches:sp}=reactExports.useContext(RouteContext),{pathname:lp}=useLocation(),up=JSON.stringify(getResolveToMatches(sp,np.v7_relativeSplatPath)),cp=reactExports.useRef(!1);return useIsomorphicLayoutEffect$2(()=>{cp.current=!0}),reactExports.useCallback(function(fp,pp){if(pp===void 0&&(pp={}),!cp.current)return;if(typeof fp=="number"){ap.go(fp);return}let hp=resolveTo(fp,JSON.parse(up),lp,pp.relative==="path");_d==null&&rp!=="/"&&(hp.pathname=hp.pathname==="/"?rp:joinPaths([rp,hp.pathname])),(pp.replace?ap.replace:ap.push)(hp,pp.state,pp)},[rp,ap,up,lp,_d])}const OutletContext=reactExports.createContext(null);function useOutlet(_d){let rp=reactExports.useContext(RouteContext).outlet;return rp&&reactExports.createElement(OutletContext.Provider,{value:_d},rp)}function useParams(){let{matches:_d}=reactExports.useContext(RouteContext),rp=_d[_d.length-1];return rp?rp.params:{}}function useResolvedPath(_d,rp){let{relative:np}=rp===void 0?{}:rp,{future:ap}=reactExports.useContext(NavigationContext),{matches:sp}=reactExports.useContext(RouteContext),{pathname:lp}=useLocation(),up=JSON.stringify(getResolveToMatches(sp,ap.v7_relativeSplatPath));return reactExports.useMemo(()=>resolveTo(_d,JSON.parse(up),lp,np==="path"),[_d,up,lp,np])}function useRoutes(_d,rp){return useRoutesImpl(_d,rp)}function useRoutesImpl(_d,rp,np,ap){useInRouterContext()||invariant$1(!1);let{navigator:sp}=reactExports.useContext(NavigationContext),{matches:lp}=reactExports.useContext(RouteContext),up=lp[lp.length-1],cp=up?up.params:{};up&&up.pathname;let dp=up?up.pathnameBase:"/";up&&up.route;let fp=useLocation(),pp;if(rp){var hp;let Sp=typeof rp=="string"?parsePath(rp):rp;dp==="/"||(hp=Sp.pathname)!=null&&hp.startsWith(dp)||invariant$1(!1),pp=Sp}else pp=fp;let mp=pp.pathname||"/",gp=dp==="/"?mp:mp.slice(dp.length)||"/",vp=matchRoutes(_d,{pathname:gp}),xp=_renderMatches(vp&&vp.map(Sp=>Object.assign({},Sp,{params:Object.assign({},cp,Sp.params),pathname:joinPaths([dp,sp.encodeLocation?sp.encodeLocation(Sp.pathname).pathname:Sp.pathname]),pathnameBase:Sp.pathnameBase==="/"?dp:joinPaths([dp,sp.encodeLocation?sp.encodeLocation(Sp.pathnameBase).pathname:Sp.pathnameBase])})),lp,np,ap);return rp&&xp?reactExports.createElement(LocationContext.Provider,{value:{location:_extends$5({pathname:"/",search:"",hash:"",state:null,key:"default"},pp),navigationType:Action.Pop}},xp):xp}function DefaultErrorComponent(){let _d=useRouteError(),rp=isRouteErrorResponse(_d)?_d.status+" "+_d.statusText:_d instanceof Error?_d.message:JSON.stringify(_d),np=_d instanceof Error?_d.stack:null,sp={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},rp),np?reactExports.createElement("pre",{style:sp},np):null,null)}const defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null);class RenderErrorBoundary extends reactExports.Component{constructor(rp){super(rp),this.state={location:rp.location,revalidation:rp.revalidation,error:rp.error}}static getDerivedStateFromError(rp){return{error:rp}}static getDerivedStateFromProps(rp,np){return np.location!==rp.location||np.revalidation!=="idle"&&rp.revalidation==="idle"?{error:rp.error,location:rp.location,revalidation:rp.revalidation}:{error:rp.error!==void 0?rp.error:np.error,location:np.location,revalidation:rp.revalidation||np.revalidation}}componentDidCatch(rp,np){console.error("React Router caught the following error during render",rp,np)}render(){return this.state.error!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RenderedRoute(_d){let{routeContext:rp,match:np,children:ap}=_d,sp=reactExports.useContext(DataRouterContext);return sp&&sp.static&&sp.staticContext&&(np.route.errorElement||np.route.ErrorBoundary)&&(sp.staticContext._deepestRenderedBoundaryId=np.route.id),reactExports.createElement(RouteContext.Provider,{value:rp},ap)}function _renderMatches(_d,rp,np,ap){var sp;if(rp===void 0&&(rp=[]),np===void 0&&(np=null),ap===void 0&&(ap=null),_d==null){var lp;if((lp=np)!=null&&lp.errors)_d=np.matches;else return null}let up=_d,cp=(sp=np)==null?void 0:sp.errors;if(cp!=null){let pp=up.findIndex(hp=>hp.route.id&&(cp==null?void 0:cp[hp.route.id]));pp>=0||invariant$1(!1),up=up.slice(0,Math.min(up.length,pp+1))}let dp=!1,fp=-1;if(np&&ap&&ap.v7_partialHydration)for(let pp=0;pp<up.length;pp++){let hp=up[pp];if((hp.route.HydrateFallback||hp.route.hydrateFallbackElement)&&(fp=pp),hp.route.id){let{loaderData:mp,errors:gp}=np,vp=hp.route.loader&&mp[hp.route.id]===void 0&&(!gp||gp[hp.route.id]===void 0);if(hp.route.lazy||vp){dp=!0,fp>=0?up=up.slice(0,fp+1):up=[up[0]];break}}}return up.reduceRight((pp,hp,mp)=>{let gp,vp=!1,xp=null,Sp=null;np&&(gp=cp&&hp.route.id?cp[hp.route.id]:void 0,xp=hp.route.errorElement||defaultErrorElement,dp&&(fp<0&&mp===0?(warningOnce("route-fallback",!1),vp=!0,Sp=null):fp===mp&&(vp=!0,Sp=hp.route.hydrateFallbackElement||null)));let yp=rp.concat(up.slice(0,mp+1)),bp=()=>{let Ep;return gp?Ep=xp:vp?Ep=Sp:hp.route.Component?Ep=reactExports.createElement(hp.route.Component,null):hp.route.element?Ep=hp.route.element:Ep=pp,reactExports.createElement(RenderedRoute,{match:hp,routeContext:{outlet:pp,matches:yp,isDataRoute:np!=null},children:Ep})};return np&&(hp.route.ErrorBoundary||hp.route.errorElement||mp===0)?reactExports.createElement(RenderErrorBoundary,{location:np.location,revalidation:np.revalidation,component:xp,error:gp,children:bp(),routeContext:{outlet:null,matches:yp,isDataRoute:!0}}):bp()},null)}var DataRouterHook$1=function(_d){return _d.UseBlocker="useBlocker",_d.UseRevalidator="useRevalidator",_d.UseNavigateStable="useNavigate",_d}(DataRouterHook$1||{}),DataRouterStateHook$1=function(_d){return _d.UseBlocker="useBlocker",_d.UseLoaderData="useLoaderData",_d.UseActionData="useActionData",_d.UseRouteError="useRouteError",_d.UseNavigation="useNavigation",_d.UseRouteLoaderData="useRouteLoaderData",_d.UseMatches="useMatches",_d.UseRevalidator="useRevalidator",_d.UseNavigateStable="useNavigate",_d.UseRouteId="useRouteId",_d}(DataRouterStateHook$1||{});function useDataRouterContext$1(_d){let rp=reactExports.useContext(DataRouterContext);return rp||invariant$1(!1),rp}function useDataRouterState(_d){let rp=reactExports.useContext(DataRouterStateContext);return rp||invariant$1(!1),rp}function useRouteContext(_d){let rp=reactExports.useContext(RouteContext);return rp||invariant$1(!1),rp}function useCurrentRouteId(_d){let rp=useRouteContext(),np=rp.matches[rp.matches.length-1];return np.route.id||invariant$1(!1),np.route.id}function useRouteError(){var _d;let rp=reactExports.useContext(RouteErrorContext),np=useDataRouterState(DataRouterStateHook$1.UseRouteError),ap=useCurrentRouteId(DataRouterStateHook$1.UseRouteError);return rp!==void 0?rp:(_d=np.errors)==null?void 0:_d[ap]}function useNavigateStable(){let{router:_d}=useDataRouterContext$1(DataRouterHook$1.UseNavigateStable),rp=useCurrentRouteId(DataRouterStateHook$1.UseNavigateStable),np=reactExports.useRef(!1);return useIsomorphicLayoutEffect$2(()=>{np.current=!0}),reactExports.useCallback(function(sp,lp){lp===void 0&&(lp={}),np.current&&(typeof sp=="number"?_d.navigate(sp):_d.navigate(sp,_extends$5({fromRouteId:rp},lp)))},[_d,rp])}const alreadyWarned={};function warningOnce(_d,rp,np){!rp&&!alreadyWarned[_d]&&(alreadyWarned[_d]=!0)}function Outlet(_d){return useOutlet(_d.context)}function Route(_d){invariant$1(!1)}function Router(_d){let{basename:rp="/",children:np=null,location:ap,navigationType:sp=Action.Pop,navigator:lp,static:up=!1,future:cp}=_d;useInRouterContext()&&invariant$1(!1);let dp=rp.replace(/^\/*/,"/"),fp=reactExports.useMemo(()=>({basename:dp,navigator:lp,static:up,future:_extends$5({v7_relativeSplatPath:!1},cp)}),[dp,cp,lp,up]);typeof ap=="string"&&(ap=parsePath(ap));let{pathname:pp="/",search:hp="",hash:mp="",state:gp=null,key:vp="default"}=ap,xp=reactExports.useMemo(()=>{let Sp=stripBasename(pp,dp);return Sp==null?null:{location:{pathname:Sp,search:hp,hash:mp,state:gp,key:vp},navigationType:sp}},[dp,pp,hp,mp,gp,vp,sp]);return xp==null?null:reactExports.createElement(NavigationContext.Provider,{value:fp},reactExports.createElement(LocationContext.Provider,{children:np,value:xp}))}function Routes(_d){let{children:rp,location:np}=_d;return useRoutes(createRoutesFromChildren(rp),np)}new Promise(()=>{});function createRoutesFromChildren(_d,rp){rp===void 0&&(rp=[]);let np=[];return reactExports.Children.forEach(_d,(ap,sp)=>{if(!reactExports.isValidElement(ap))return;let lp=[...rp,sp];if(ap.type===reactExports.Fragment){np.push.apply(np,createRoutesFromChildren(ap.props.children,lp));return}ap.type!==Route&&invariant$1(!1),!ap.props.index||!ap.props.children||invariant$1(!1);let up={id:ap.props.id||lp.join("-"),caseSensitive:ap.props.caseSensitive,element:ap.props.element,Component:ap.props.Component,index:ap.props.index,path:ap.props.path,loader:ap.props.loader,action:ap.props.action,errorElement:ap.props.errorElement,ErrorBoundary:ap.props.ErrorBoundary,hasErrorBoundary:ap.props.ErrorBoundary!=null||ap.props.errorElement!=null,shouldRevalidate:ap.props.shouldRevalidate,handle:ap.props.handle,lazy:ap.props.lazy};ap.props.children&&(up.children=createRoutesFromChildren(ap.props.children,lp)),np.push(up)}),np}/**
 * React Router DOM v6.21.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$4(){return _extends$4=Object.assign?Object.assign.bind():function(_d){for(var rp=1;rp<arguments.length;rp++){var np=arguments[rp];for(var ap in np)Object.prototype.hasOwnProperty.call(np,ap)&&(_d[ap]=np[ap])}return _d},_extends$4.apply(this,arguments)}function _objectWithoutPropertiesLoose$2(_d,rp){if(_d==null)return{};var np={},ap=Object.keys(_d),sp,lp;for(lp=0;lp<ap.length;lp++)sp=ap[lp],!(rp.indexOf(sp)>=0)&&(np[sp]=_d[sp]);return np}function isModifiedEvent(_d){return!!(_d.metaKey||_d.altKey||_d.ctrlKey||_d.shiftKey)}function shouldProcessLinkClick(_d,rp){return _d.button===0&&(!rp||rp==="_self")&&!isModifiedEvent(_d)}const _excluded$a=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],_excluded2=["aria-current","caseSensitive","className","end","style","to","unstable_viewTransition","children"],ViewTransitionContext=reactExports.createContext({isTransitioning:!1}),START_TRANSITION="startTransition",startTransitionImpl=React$1[START_TRANSITION];function BrowserRouter(_d){let{basename:rp,children:np,future:ap,window:sp}=_d,lp=reactExports.useRef();lp.current==null&&(lp.current=createBrowserHistory({window:sp,v5Compat:!0}));let up=lp.current,[cp,dp]=reactExports.useState({action:up.action,location:up.location}),{v7_startTransition:fp}=ap||{},pp=reactExports.useCallback(hp=>{fp&&startTransitionImpl?startTransitionImpl(()=>dp(hp)):dp(hp)},[dp,fp]);return reactExports.useLayoutEffect(()=>up.listen(pp),[up,pp]),reactExports.createElement(Router,{basename:rp,children:np,location:cp.location,navigationType:cp.action,navigator:up,future:ap})}const isBrowser$1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ABSOLUTE_URL_REGEX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link=reactExports.forwardRef(function(rp,np){let{onClick:ap,relative:sp,reloadDocument:lp,replace:up,state:cp,target:dp,to:fp,preventScrollReset:pp,unstable_viewTransition:hp}=rp,mp=_objectWithoutPropertiesLoose$2(rp,_excluded$a),{basename:gp}=reactExports.useContext(NavigationContext),vp,xp=!1;if(typeof fp=="string"&&ABSOLUTE_URL_REGEX.test(fp)&&(vp=fp,isBrowser$1))try{let Ep=new URL(window.location.href),wp=fp.startsWith("//")?new URL(Ep.protocol+fp):new URL(fp),_p=stripBasename(wp.pathname,gp);wp.origin===Ep.origin&&_p!=null?fp=_p+wp.search+wp.hash:xp=!0}catch{}let Sp=useHref(fp,{relative:sp}),yp=useLinkClickHandler(fp,{replace:up,state:cp,target:dp,preventScrollReset:pp,relative:sp,unstable_viewTransition:hp});function bp(Ep){ap&&ap(Ep),Ep.defaultPrevented||yp(Ep)}return reactExports.createElement("a",_extends$4({},mp,{href:vp||Sp,onClick:xp||lp?ap:bp,ref:np,target:dp}))}),NavLink=reactExports.forwardRef(function(rp,np){let{"aria-current":ap="page",caseSensitive:sp=!1,className:lp="",end:up=!1,style:cp,to:dp,unstable_viewTransition:fp,children:pp}=rp,hp=_objectWithoutPropertiesLoose$2(rp,_excluded2),mp=useResolvedPath(dp,{relative:hp.relative}),gp=useLocation(),vp=reactExports.useContext(DataRouterStateContext),{navigator:xp,basename:Sp}=reactExports.useContext(NavigationContext),yp=vp!=null&&useViewTransitionState(mp)&&fp===!0,bp=xp.encodeLocation?xp.encodeLocation(mp).pathname:mp.pathname,Ep=gp.pathname,wp=vp&&vp.navigation&&vp.navigation.location?vp.navigation.location.pathname:null;sp||(Ep=Ep.toLowerCase(),wp=wp?wp.toLowerCase():null,bp=bp.toLowerCase()),wp&&Sp&&(wp=stripBasename(wp,Sp)||wp);const _p=bp!=="/"&&bp.endsWith("/")?bp.length-1:bp.length;let Rp=Ep===bp||!up&&Ep.startsWith(bp)&&Ep.charAt(_p)==="/",$p=wp!=null&&(wp===bp||!up&&wp.startsWith(bp)&&wp.charAt(bp.length)==="/"),Cp={isActive:Rp,isPending:$p,isTransitioning:yp},Ap=Rp?ap:void 0,Op;typeof lp=="function"?Op=lp(Cp):Op=[lp,Rp?"active":null,$p?"pending":null,yp?"transitioning":null].filter(Boolean).join(" ");let Lp=typeof cp=="function"?cp(Cp):cp;return reactExports.createElement(Link,_extends$4({},hp,{"aria-current":Ap,className:Op,ref:np,style:Lp,to:dp,unstable_viewTransition:fp}),typeof pp=="function"?pp(Cp):pp)});var DataRouterHook;(function(_d){_d.UseScrollRestoration="useScrollRestoration",_d.UseSubmit="useSubmit",_d.UseSubmitFetcher="useSubmitFetcher",_d.UseFetcher="useFetcher",_d.useViewTransitionState="useViewTransitionState"})(DataRouterHook||(DataRouterHook={}));var DataRouterStateHook;(function(_d){_d.UseFetcher="useFetcher",_d.UseFetchers="useFetchers",_d.UseScrollRestoration="useScrollRestoration"})(DataRouterStateHook||(DataRouterStateHook={}));function useDataRouterContext(_d){let rp=reactExports.useContext(DataRouterContext);return rp||invariant$1(!1),rp}function useLinkClickHandler(_d,rp){let{target:np,replace:ap,state:sp,preventScrollReset:lp,relative:up,unstable_viewTransition:cp}=rp===void 0?{}:rp,dp=useNavigate(),fp=useLocation(),pp=useResolvedPath(_d,{relative:up});return reactExports.useCallback(hp=>{if(shouldProcessLinkClick(hp,np)){hp.preventDefault();let mp=ap!==void 0?ap:createPath(fp)===createPath(pp);dp(_d,{replace:mp,state:sp,preventScrollReset:lp,relative:up,unstable_viewTransition:cp})}},[fp,dp,pp,ap,sp,np,_d,lp,up,cp])}function useViewTransitionState(_d,rp){rp===void 0&&(rp={});let np=reactExports.useContext(ViewTransitionContext);np==null&&invariant$1(!1);let{basename:ap}=useDataRouterContext(DataRouterHook.useViewTransitionState),sp=useResolvedPath(_d,{relative:rp.relative});if(!np.isTransitioning)return!1;let lp=stripBasename(np.currentLocation.pathname,ap)||np.currentLocation.pathname,up=stripBasename(np.nextLocation.pathname,ap)||np.nextLocation.pathname;return matchPath(sp.pathname,up)!=null||matchPath(sp.pathname,lp)!=null}var client={},m$1=reactDomExports;client.createRoot=m$1.createRoot,client.hydrateRoot=m$1.hydrateRoot;var DefaultContext={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},IconContext=React.createContext&&React.createContext(DefaultContext),_excluded$9=["attr","size","title"];function _objectWithoutProperties(_d,rp){if(_d==null)return{};var np=_objectWithoutPropertiesLoose$1(_d,rp),ap,sp;if(Object.getOwnPropertySymbols){var lp=Object.getOwnPropertySymbols(_d);for(sp=0;sp<lp.length;sp++)ap=lp[sp],!(rp.indexOf(ap)>=0)&&Object.prototype.propertyIsEnumerable.call(_d,ap)&&(np[ap]=_d[ap])}return np}function _objectWithoutPropertiesLoose$1(_d,rp){if(_d==null)return{};var np={},ap=Object.keys(_d),sp,lp;for(lp=0;lp<ap.length;lp++)sp=ap[lp],!(rp.indexOf(sp)>=0)&&(np[sp]=_d[sp]);return np}function _extends$3(){return _extends$3=Object.assign?Object.assign.bind():function(_d){for(var rp=1;rp<arguments.length;rp++){var np=arguments[rp];for(var ap in np)Object.prototype.hasOwnProperty.call(np,ap)&&(_d[ap]=np[ap])}return _d},_extends$3.apply(this,arguments)}function ownKeys$1(_d,rp){var np=Object.keys(_d);if(Object.getOwnPropertySymbols){var ap=Object.getOwnPropertySymbols(_d);rp&&(ap=ap.filter(function(sp){return Object.getOwnPropertyDescriptor(_d,sp).enumerable})),np.push.apply(np,ap)}return np}function _objectSpread(_d){for(var rp=1;rp<arguments.length;rp++){var np=arguments[rp]!=null?arguments[rp]:{};rp%2?ownKeys$1(Object(np),!0).forEach(function(ap){_defineProperty$3(_d,ap,np[ap])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_d,Object.getOwnPropertyDescriptors(np)):ownKeys$1(Object(np)).forEach(function(ap){Object.defineProperty(_d,ap,Object.getOwnPropertyDescriptor(np,ap))})}return _d}function _defineProperty$3(_d,rp,np){return rp=_toPropertyKey$1(rp),rp in _d?Object.defineProperty(_d,rp,{value:np,enumerable:!0,configurable:!0,writable:!0}):_d[rp]=np,_d}function _toPropertyKey$1(_d){var rp=_toPrimitive$2(_d,"string");return typeof rp=="symbol"?rp:String(rp)}function _toPrimitive$2(_d,rp){if(typeof _d!="object"||_d===null)return _d;var np=_d[Symbol.toPrimitive];if(np!==void 0){var ap=np.call(_d,rp||"default");if(typeof ap!="object")return ap;throw new TypeError("@@toPrimitive must return a primitive value.")}return(rp==="string"?String:Number)(_d)}function Tree2Element(_d){return _d&&_d.map((rp,np)=>React.createElement(rp.tag,_objectSpread({key:np},rp.attr),Tree2Element(rp.child)))}function GenIcon(_d){return rp=>React.createElement(IconBase,_extends$3({attr:_objectSpread({},_d.attr)},rp),Tree2Element(_d.child))}function IconBase(_d){var rp=np=>{var{attr:ap,size:sp,title:lp}=_d,up=_objectWithoutProperties(_d,_excluded$9),cp=sp||np.size||"1em",dp;return np.className&&(dp=np.className),_d.className&&(dp=(dp?dp+" ":"")+_d.className),React.createElement("svg",_extends$3({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},np.attr,ap,up,{className:dp,style:_objectSpread(_objectSpread({color:_d.color||np.color},np.style),_d.style),height:cp,width:cp,xmlns:"http://www.w3.org/2000/svg"}),lp&&React.createElement("title",null,lp),_d.children)};return IconContext!==void 0?React.createElement(IconContext.Consumer,null,np=>rp(np)):rp(DefaultContext)}const defaultImg="/assets/login_img-6Ph5owg1.png";function isObject$8(_d){return _d!==null&&typeof _d=="object"&&"constructor"in _d&&_d.constructor===Object}function extend$3(_d,rp){_d===void 0&&(_d={}),rp===void 0&&(rp={}),Object.keys(rp).forEach(np=>{typeof _d[np]>"u"?_d[np]=rp[np]:isObject$8(rp[np])&&isObject$8(_d[np])&&Object.keys(rp[np]).length>0&&extend$3(_d[np],rp[np])})}const ssrDocument={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function getDocument(){const _d=typeof document<"u"?document:{};return extend$3(_d,ssrDocument),_d}const ssrWindow={document:ssrDocument,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(_d){return typeof setTimeout>"u"?(_d(),null):setTimeout(_d,0)},cancelAnimationFrame(_d){typeof setTimeout>"u"||clearTimeout(_d)}};function getWindow(){const _d=typeof window<"u"?window:{};return extend$3(_d,ssrWindow),_d}function classesToTokens(_d){return _d===void 0&&(_d=""),_d.trim().split(" ").filter(rp=>!!rp.trim())}function deleteProps(_d){const rp=_d;Object.keys(rp).forEach(np=>{try{rp[np]=null}catch{}try{delete rp[np]}catch{}})}function nextTick(_d,rp){return rp===void 0&&(rp=0),setTimeout(_d,rp)}function now(){return Date.now()}function getComputedStyle$1(_d){const rp=getWindow();let np;return rp.getComputedStyle&&(np=rp.getComputedStyle(_d,null)),!np&&_d.currentStyle&&(np=_d.currentStyle),np||(np=_d.style),np}function getTranslate(_d,rp){rp===void 0&&(rp="x");const np=getWindow();let ap,sp,lp;const up=getComputedStyle$1(_d);return np.WebKitCSSMatrix?(sp=up.transform||up.webkitTransform,sp.split(",").length>6&&(sp=sp.split(", ").map(cp=>cp.replace(",",".")).join(", ")),lp=new np.WebKitCSSMatrix(sp==="none"?"":sp)):(lp=up.MozTransform||up.OTransform||up.MsTransform||up.msTransform||up.transform||up.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),ap=lp.toString().split(",")),rp==="x"&&(np.WebKitCSSMatrix?sp=lp.m41:ap.length===16?sp=parseFloat(ap[12]):sp=parseFloat(ap[4])),rp==="y"&&(np.WebKitCSSMatrix?sp=lp.m42:ap.length===16?sp=parseFloat(ap[13]):sp=parseFloat(ap[5])),sp||0}function isObject$7(_d){return typeof _d=="object"&&_d!==null&&_d.constructor&&Object.prototype.toString.call(_d).slice(8,-1)==="Object"}function isNode(_d){return typeof window<"u"&&typeof window.HTMLElement<"u"?_d instanceof HTMLElement:_d&&(_d.nodeType===1||_d.nodeType===11)}function extend$2(){const _d=Object(arguments.length<=0?void 0:arguments[0]),rp=["__proto__","constructor","prototype"];for(let np=1;np<arguments.length;np+=1){const ap=np<0||arguments.length<=np?void 0:arguments[np];if(ap!=null&&!isNode(ap)){const sp=Object.keys(Object(ap)).filter(lp=>rp.indexOf(lp)<0);for(let lp=0,up=sp.length;lp<up;lp+=1){const cp=sp[lp],dp=Object.getOwnPropertyDescriptor(ap,cp);dp!==void 0&&dp.enumerable&&(isObject$7(_d[cp])&&isObject$7(ap[cp])?ap[cp].__swiper__?_d[cp]=ap[cp]:extend$2(_d[cp],ap[cp]):!isObject$7(_d[cp])&&isObject$7(ap[cp])?(_d[cp]={},ap[cp].__swiper__?_d[cp]=ap[cp]:extend$2(_d[cp],ap[cp])):_d[cp]=ap[cp])}}}return _d}function setCSSProperty(_d,rp,np){_d.style.setProperty(rp,np)}function animateCSSModeScroll(_d){let{swiper:rp,targetPosition:np,side:ap}=_d;const sp=getWindow(),lp=-rp.translate;let up=null,cp;const dp=rp.params.speed;rp.wrapperEl.style.scrollSnapType="none",sp.cancelAnimationFrame(rp.cssModeFrameID);const fp=np>lp?"next":"prev",pp=(mp,gp)=>fp==="next"&&mp>=gp||fp==="prev"&&mp<=gp,hp=()=>{cp=new Date().getTime(),up===null&&(up=cp);const mp=Math.max(Math.min((cp-up)/dp,1),0),gp=.5-Math.cos(mp*Math.PI)/2;let vp=lp+gp*(np-lp);if(pp(vp,np)&&(vp=np),rp.wrapperEl.scrollTo({[ap]:vp}),pp(vp,np)){rp.wrapperEl.style.overflow="hidden",rp.wrapperEl.style.scrollSnapType="",setTimeout(()=>{rp.wrapperEl.style.overflow="",rp.wrapperEl.scrollTo({[ap]:vp})}),sp.cancelAnimationFrame(rp.cssModeFrameID);return}rp.cssModeFrameID=sp.requestAnimationFrame(hp)};hp()}function getSlideTransformEl(_d){return _d.querySelector(".swiper-slide-transform")||_d.shadowRoot&&_d.shadowRoot.querySelector(".swiper-slide-transform")||_d}function elementChildren(_d,rp){return rp===void 0&&(rp=""),[..._d.children].filter(np=>np.matches(rp))}function showWarning(_d){try{console.warn(_d);return}catch{}}function createElement(_d,rp){rp===void 0&&(rp=[]);const np=document.createElement(_d);return np.classList.add(...Array.isArray(rp)?rp:classesToTokens(rp)),np}function elementPrevAll(_d,rp){const np=[];for(;_d.previousElementSibling;){const ap=_d.previousElementSibling;rp?ap.matches(rp)&&np.push(ap):np.push(ap),_d=ap}return np}function elementNextAll(_d,rp){const np=[];for(;_d.nextElementSibling;){const ap=_d.nextElementSibling;rp?ap.matches(rp)&&np.push(ap):np.push(ap),_d=ap}return np}function elementStyle(_d,rp){return getWindow().getComputedStyle(_d,null).getPropertyValue(rp)}function elementIndex(_d){let rp=_d,np;if(rp){for(np=0;(rp=rp.previousSibling)!==null;)rp.nodeType===1&&(np+=1);return np}}function elementParents(_d,rp){const np=[];let ap=_d.parentElement;for(;ap;)rp?ap.matches(rp)&&np.push(ap):np.push(ap),ap=ap.parentElement;return np}function elementTransitionEnd(_d,rp){function np(ap){ap.target===_d&&(rp.call(_d,ap),_d.removeEventListener("transitionend",np))}rp&&_d.addEventListener("transitionend",np)}function elementOuterSize(_d,rp,np){const ap=getWindow();return np?_d[rp==="width"?"offsetWidth":"offsetHeight"]+parseFloat(ap.getComputedStyle(_d,null).getPropertyValue(rp==="width"?"margin-right":"margin-top"))+parseFloat(ap.getComputedStyle(_d,null).getPropertyValue(rp==="width"?"margin-left":"margin-bottom")):_d.offsetWidth}let support;function calcSupport(){const _d=getWindow(),rp=getDocument();return{smoothScroll:rp.documentElement&&rp.documentElement.style&&"scrollBehavior"in rp.documentElement.style,touch:!!("ontouchstart"in _d||_d.DocumentTouch&&rp instanceof _d.DocumentTouch)}}function getSupport(){return support||(support=calcSupport()),support}let deviceCached;function calcDevice(_d){let{userAgent:rp}=_d===void 0?{}:_d;const np=getSupport(),ap=getWindow(),sp=ap.navigator.platform,lp=rp||ap.navigator.userAgent,up={ios:!1,android:!1},cp=ap.screen.width,dp=ap.screen.height,fp=lp.match(/(Android);?[\s\/]+([\d.]+)?/);let pp=lp.match(/(iPad).*OS\s([\d_]+)/);const hp=lp.match(/(iPod)(.*OS\s([\d_]+))?/),mp=!pp&&lp.match(/(iPhone\sOS|iOS)\s([\d_]+)/),gp=sp==="Win32";let vp=sp==="MacIntel";const xp=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!pp&&vp&&np.touch&&xp.indexOf(`${cp}x${dp}`)>=0&&(pp=lp.match(/(Version)\/([\d.]+)/),pp||(pp=[0,1,"13_0_0"]),vp=!1),fp&&!gp&&(up.os="android",up.android=!0),(pp||mp||hp)&&(up.os="ios",up.ios=!0),up}function getDevice(_d){return _d===void 0&&(_d={}),deviceCached||(deviceCached=calcDevice(_d)),deviceCached}let browser;function calcBrowser(){const _d=getWindow();let rp=!1;function np(){const ap=_d.navigator.userAgent.toLowerCase();return ap.indexOf("safari")>=0&&ap.indexOf("chrome")<0&&ap.indexOf("android")<0}if(np()){const ap=String(_d.navigator.userAgent);if(ap.includes("Version/")){const[sp,lp]=ap.split("Version/")[1].split(" ")[0].split(".").map(up=>Number(up));rp=sp<16||sp===16&&lp<2}}return{isSafari:rp||np(),needPerspectiveFix:rp,isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(_d.navigator.userAgent)}}function getBrowser(){return browser||(browser=calcBrowser()),browser}function Resize(_d){let{swiper:rp,on:np,emit:ap}=_d;const sp=getWindow();let lp=null,up=null;const cp=()=>{!rp||rp.destroyed||!rp.initialized||(ap("beforeResize"),ap("resize"))},dp=()=>{!rp||rp.destroyed||!rp.initialized||(lp=new ResizeObserver(hp=>{up=sp.requestAnimationFrame(()=>{const{width:mp,height:gp}=rp;let vp=mp,xp=gp;hp.forEach(Sp=>{let{contentBoxSize:yp,contentRect:bp,target:Ep}=Sp;Ep&&Ep!==rp.el||(vp=bp?bp.width:(yp[0]||yp).inlineSize,xp=bp?bp.height:(yp[0]||yp).blockSize)}),(vp!==mp||xp!==gp)&&cp()})}),lp.observe(rp.el))},fp=()=>{up&&sp.cancelAnimationFrame(up),lp&&lp.unobserve&&rp.el&&(lp.unobserve(rp.el),lp=null)},pp=()=>{!rp||rp.destroyed||!rp.initialized||ap("orientationchange")};np("init",()=>{if(rp.params.resizeObserver&&typeof sp.ResizeObserver<"u"){dp();return}sp.addEventListener("resize",cp),sp.addEventListener("orientationchange",pp)}),np("destroy",()=>{fp(),sp.removeEventListener("resize",cp),sp.removeEventListener("orientationchange",pp)})}function Observer(_d){let{swiper:rp,extendParams:np,on:ap,emit:sp}=_d;const lp=[],up=getWindow(),cp=function(pp,hp){hp===void 0&&(hp={});const mp=up.MutationObserver||up.WebkitMutationObserver,gp=new mp(vp=>{if(rp.__preventObserver__)return;if(vp.length===1){sp("observerUpdate",vp[0]);return}const xp=function(){sp("observerUpdate",vp[0])};up.requestAnimationFrame?up.requestAnimationFrame(xp):up.setTimeout(xp,0)});gp.observe(pp,{attributes:typeof hp.attributes>"u"?!0:hp.attributes,childList:typeof hp.childList>"u"?!0:hp.childList,characterData:typeof hp.characterData>"u"?!0:hp.characterData}),lp.push(gp)},dp=()=>{if(rp.params.observer){if(rp.params.observeParents){const pp=elementParents(rp.hostEl);for(let hp=0;hp<pp.length;hp+=1)cp(pp[hp])}cp(rp.hostEl,{childList:rp.params.observeSlideChildren}),cp(rp.wrapperEl,{attributes:!1})}},fp=()=>{lp.forEach(pp=>{pp.disconnect()}),lp.splice(0,lp.length)};np({observer:!1,observeParents:!1,observeSlideChildren:!1}),ap("init",dp),ap("destroy",fp)}var eventsEmitter={on(_d,rp,np){const ap=this;if(!ap.eventsListeners||ap.destroyed||typeof rp!="function")return ap;const sp=np?"unshift":"push";return _d.split(" ").forEach(lp=>{ap.eventsListeners[lp]||(ap.eventsListeners[lp]=[]),ap.eventsListeners[lp][sp](rp)}),ap},once(_d,rp,np){const ap=this;if(!ap.eventsListeners||ap.destroyed||typeof rp!="function")return ap;function sp(){ap.off(_d,sp),sp.__emitterProxy&&delete sp.__emitterProxy;for(var lp=arguments.length,up=new Array(lp),cp=0;cp<lp;cp++)up[cp]=arguments[cp];rp.apply(ap,up)}return sp.__emitterProxy=rp,ap.on(_d,sp,np)},onAny(_d,rp){const np=this;if(!np.eventsListeners||np.destroyed||typeof _d!="function")return np;const ap=rp?"unshift":"push";return np.eventsAnyListeners.indexOf(_d)<0&&np.eventsAnyListeners[ap](_d),np},offAny(_d){const rp=this;if(!rp.eventsListeners||rp.destroyed||!rp.eventsAnyListeners)return rp;const np=rp.eventsAnyListeners.indexOf(_d);return np>=0&&rp.eventsAnyListeners.splice(np,1),rp},off(_d,rp){const np=this;return!np.eventsListeners||np.destroyed||!np.eventsListeners||_d.split(" ").forEach(ap=>{typeof rp>"u"?np.eventsListeners[ap]=[]:np.eventsListeners[ap]&&np.eventsListeners[ap].forEach((sp,lp)=>{(sp===rp||sp.__emitterProxy&&sp.__emitterProxy===rp)&&np.eventsListeners[ap].splice(lp,1)})}),np},emit(){const _d=this;if(!_d.eventsListeners||_d.destroyed||!_d.eventsListeners)return _d;let rp,np,ap;for(var sp=arguments.length,lp=new Array(sp),up=0;up<sp;up++)lp[up]=arguments[up];return typeof lp[0]=="string"||Array.isArray(lp[0])?(rp=lp[0],np=lp.slice(1,lp.length),ap=_d):(rp=lp[0].events,np=lp[0].data,ap=lp[0].context||_d),np.unshift(ap),(Array.isArray(rp)?rp:rp.split(" ")).forEach(dp=>{_d.eventsAnyListeners&&_d.eventsAnyListeners.length&&_d.eventsAnyListeners.forEach(fp=>{fp.apply(ap,[dp,...np])}),_d.eventsListeners&&_d.eventsListeners[dp]&&_d.eventsListeners[dp].forEach(fp=>{fp.apply(ap,np)})}),_d}};function updateSize(){const _d=this;let rp,np;const ap=_d.el;typeof _d.params.width<"u"&&_d.params.width!==null?rp=_d.params.width:rp=ap.clientWidth,typeof _d.params.height<"u"&&_d.params.height!==null?np=_d.params.height:np=ap.clientHeight,!(rp===0&&_d.isHorizontal()||np===0&&_d.isVertical())&&(rp=rp-parseInt(elementStyle(ap,"padding-left")||0,10)-parseInt(elementStyle(ap,"padding-right")||0,10),np=np-parseInt(elementStyle(ap,"padding-top")||0,10)-parseInt(elementStyle(ap,"padding-bottom")||0,10),Number.isNaN(rp)&&(rp=0),Number.isNaN(np)&&(np=0),Object.assign(_d,{width:rp,height:np,size:_d.isHorizontal()?rp:np}))}function updateSlides(){const _d=this;function rp(Op,Lp){return parseFloat(Op.getPropertyValue(_d.getDirectionLabel(Lp))||0)}const np=_d.params,{wrapperEl:ap,slidesEl:sp,size:lp,rtlTranslate:up,wrongRTL:cp}=_d,dp=_d.virtual&&np.virtual.enabled,fp=dp?_d.virtual.slides.length:_d.slides.length,pp=elementChildren(sp,`.${_d.params.slideClass}, swiper-slide`),hp=dp?_d.virtual.slides.length:pp.length;let mp=[];const gp=[],vp=[];let xp=np.slidesOffsetBefore;typeof xp=="function"&&(xp=np.slidesOffsetBefore.call(_d));let Sp=np.slidesOffsetAfter;typeof Sp=="function"&&(Sp=np.slidesOffsetAfter.call(_d));const yp=_d.snapGrid.length,bp=_d.slidesGrid.length;let Ep=np.spaceBetween,wp=-xp,_p=0,Rp=0;if(typeof lp>"u")return;typeof Ep=="string"&&Ep.indexOf("%")>=0?Ep=parseFloat(Ep.replace("%",""))/100*lp:typeof Ep=="string"&&(Ep=parseFloat(Ep)),_d.virtualSize=-Ep,pp.forEach(Op=>{up?Op.style.marginLeft="":Op.style.marginRight="",Op.style.marginBottom="",Op.style.marginTop=""}),np.centeredSlides&&np.cssMode&&(setCSSProperty(ap,"--swiper-centered-offset-before",""),setCSSProperty(ap,"--swiper-centered-offset-after",""));const $p=np.grid&&np.grid.rows>1&&_d.grid;$p?_d.grid.initSlides(pp):_d.grid&&_d.grid.unsetSlides();let Cp;const Ap=np.slidesPerView==="auto"&&np.breakpoints&&Object.keys(np.breakpoints).filter(Op=>typeof np.breakpoints[Op].slidesPerView<"u").length>0;for(let Op=0;Op<hp;Op+=1){Cp=0;let Lp;if(pp[Op]&&(Lp=pp[Op]),$p&&_d.grid.updateSlide(Op,Lp,pp),!(pp[Op]&&elementStyle(Lp,"display")==="none")){if(np.slidesPerView==="auto"){Ap&&(pp[Op].style[_d.getDirectionLabel("width")]="");const Mp=getComputedStyle(Lp),kp=Lp.style.transform,Dp=Lp.style.webkitTransform;if(kp&&(Lp.style.transform="none"),Dp&&(Lp.style.webkitTransform="none"),np.roundLengths)Cp=_d.isHorizontal()?elementOuterSize(Lp,"width",!0):elementOuterSize(Lp,"height",!0);else{const Fp=rp(Mp,"width"),Ip=rp(Mp,"padding-left"),Pp=rp(Mp,"padding-right"),Tp=rp(Mp,"margin-left"),Np=rp(Mp,"margin-right"),jp=Mp.getPropertyValue("box-sizing");if(jp&&jp==="border-box")Cp=Fp+Tp+Np;else{const{clientWidth:Vp,offsetWidth:zp}=Lp;Cp=Fp+Ip+Pp+Tp+Np+(zp-Vp)}}kp&&(Lp.style.transform=kp),Dp&&(Lp.style.webkitTransform=Dp),np.roundLengths&&(Cp=Math.floor(Cp))}else Cp=(lp-(np.slidesPerView-1)*Ep)/np.slidesPerView,np.roundLengths&&(Cp=Math.floor(Cp)),pp[Op]&&(pp[Op].style[_d.getDirectionLabel("width")]=`${Cp}px`);pp[Op]&&(pp[Op].swiperSlideSize=Cp),vp.push(Cp),np.centeredSlides?(wp=wp+Cp/2+_p/2+Ep,_p===0&&Op!==0&&(wp=wp-lp/2-Ep),Op===0&&(wp=wp-lp/2-Ep),Math.abs(wp)<1/1e3&&(wp=0),np.roundLengths&&(wp=Math.floor(wp)),Rp%np.slidesPerGroup===0&&mp.push(wp),gp.push(wp)):(np.roundLengths&&(wp=Math.floor(wp)),(Rp-Math.min(_d.params.slidesPerGroupSkip,Rp))%_d.params.slidesPerGroup===0&&mp.push(wp),gp.push(wp),wp=wp+Cp+Ep),_d.virtualSize+=Cp+Ep,_p=Cp,Rp+=1}}if(_d.virtualSize=Math.max(_d.virtualSize,lp)+Sp,up&&cp&&(np.effect==="slide"||np.effect==="coverflow")&&(ap.style.width=`${_d.virtualSize+Ep}px`),np.setWrapperSize&&(ap.style[_d.getDirectionLabel("width")]=`${_d.virtualSize+Ep}px`),$p&&_d.grid.updateWrapperSize(Cp,mp),!np.centeredSlides){const Op=[];for(let Lp=0;Lp<mp.length;Lp+=1){let Mp=mp[Lp];np.roundLengths&&(Mp=Math.floor(Mp)),mp[Lp]<=_d.virtualSize-lp&&Op.push(Mp)}mp=Op,Math.floor(_d.virtualSize-lp)-Math.floor(mp[mp.length-1])>1&&mp.push(_d.virtualSize-lp)}if(dp&&np.loop){const Op=vp[0]+Ep;if(np.slidesPerGroup>1){const Lp=Math.ceil((_d.virtual.slidesBefore+_d.virtual.slidesAfter)/np.slidesPerGroup),Mp=Op*np.slidesPerGroup;for(let kp=0;kp<Lp;kp+=1)mp.push(mp[mp.length-1]+Mp)}for(let Lp=0;Lp<_d.virtual.slidesBefore+_d.virtual.slidesAfter;Lp+=1)np.slidesPerGroup===1&&mp.push(mp[mp.length-1]+Op),gp.push(gp[gp.length-1]+Op),_d.virtualSize+=Op}if(mp.length===0&&(mp=[0]),Ep!==0){const Op=_d.isHorizontal()&&up?"marginLeft":_d.getDirectionLabel("marginRight");pp.filter((Lp,Mp)=>!np.cssMode||np.loop?!0:Mp!==pp.length-1).forEach(Lp=>{Lp.style[Op]=`${Ep}px`})}if(np.centeredSlides&&np.centeredSlidesBounds){let Op=0;vp.forEach(Mp=>{Op+=Mp+(Ep||0)}),Op-=Ep;const Lp=Op-lp;mp=mp.map(Mp=>Mp<=0?-xp:Mp>Lp?Lp+Sp:Mp)}if(np.centerInsufficientSlides){let Op=0;if(vp.forEach(Lp=>{Op+=Lp+(Ep||0)}),Op-=Ep,Op<lp){const Lp=(lp-Op)/2;mp.forEach((Mp,kp)=>{mp[kp]=Mp-Lp}),gp.forEach((Mp,kp)=>{gp[kp]=Mp+Lp})}}if(Object.assign(_d,{slides:pp,snapGrid:mp,slidesGrid:gp,slidesSizesGrid:vp}),np.centeredSlides&&np.cssMode&&!np.centeredSlidesBounds){setCSSProperty(ap,"--swiper-centered-offset-before",`${-mp[0]}px`),setCSSProperty(ap,"--swiper-centered-offset-after",`${_d.size/2-vp[vp.length-1]/2}px`);const Op=-_d.snapGrid[0],Lp=-_d.slidesGrid[0];_d.snapGrid=_d.snapGrid.map(Mp=>Mp+Op),_d.slidesGrid=_d.slidesGrid.map(Mp=>Mp+Lp)}if(hp!==fp&&_d.emit("slidesLengthChange"),mp.length!==yp&&(_d.params.watchOverflow&&_d.checkOverflow(),_d.emit("snapGridLengthChange")),gp.length!==bp&&_d.emit("slidesGridLengthChange"),np.watchSlidesProgress&&_d.updateSlidesOffset(),_d.emit("slidesUpdated"),!dp&&!np.cssMode&&(np.effect==="slide"||np.effect==="fade")){const Op=`${np.containerModifierClass}backface-hidden`,Lp=_d.el.classList.contains(Op);hp<=np.maxBackfaceHiddenSlides?Lp||_d.el.classList.add(Op):Lp&&_d.el.classList.remove(Op)}}function updateAutoHeight(_d){const rp=this,np=[],ap=rp.virtual&&rp.params.virtual.enabled;let sp=0,lp;typeof _d=="number"?rp.setTransition(_d):_d===!0&&rp.setTransition(rp.params.speed);const up=cp=>ap?rp.slides[rp.getSlideIndexByData(cp)]:rp.slides[cp];if(rp.params.slidesPerView!=="auto"&&rp.params.slidesPerView>1)if(rp.params.centeredSlides)(rp.visibleSlides||[]).forEach(cp=>{np.push(cp)});else for(lp=0;lp<Math.ceil(rp.params.slidesPerView);lp+=1){const cp=rp.activeIndex+lp;if(cp>rp.slides.length&&!ap)break;np.push(up(cp))}else np.push(up(rp.activeIndex));for(lp=0;lp<np.length;lp+=1)if(typeof np[lp]<"u"){const cp=np[lp].offsetHeight;sp=cp>sp?cp:sp}(sp||sp===0)&&(rp.wrapperEl.style.height=`${sp}px`)}function updateSlidesOffset(){const _d=this,rp=_d.slides,np=_d.isElement?_d.isHorizontal()?_d.wrapperEl.offsetLeft:_d.wrapperEl.offsetTop:0;for(let ap=0;ap<rp.length;ap+=1)rp[ap].swiperSlideOffset=(_d.isHorizontal()?rp[ap].offsetLeft:rp[ap].offsetTop)-np-_d.cssOverflowAdjustment()}function updateSlidesProgress(_d){_d===void 0&&(_d=this&&this.translate||0);const rp=this,np=rp.params,{slides:ap,rtlTranslate:sp,snapGrid:lp}=rp;if(ap.length===0)return;typeof ap[0].swiperSlideOffset>"u"&&rp.updateSlidesOffset();let up=-_d;sp&&(up=_d),ap.forEach(dp=>{dp.classList.remove(np.slideVisibleClass,np.slideFullyVisibleClass)}),rp.visibleSlidesIndexes=[],rp.visibleSlides=[];let cp=np.spaceBetween;typeof cp=="string"&&cp.indexOf("%")>=0?cp=parseFloat(cp.replace("%",""))/100*rp.size:typeof cp=="string"&&(cp=parseFloat(cp));for(let dp=0;dp<ap.length;dp+=1){const fp=ap[dp];let pp=fp.swiperSlideOffset;np.cssMode&&np.centeredSlides&&(pp-=ap[0].swiperSlideOffset);const hp=(up+(np.centeredSlides?rp.minTranslate():0)-pp)/(fp.swiperSlideSize+cp),mp=(up-lp[0]+(np.centeredSlides?rp.minTranslate():0)-pp)/(fp.swiperSlideSize+cp),gp=-(up-pp),vp=gp+rp.slidesSizesGrid[dp],xp=gp>=0&&gp<=rp.size-rp.slidesSizesGrid[dp];(gp>=0&&gp<rp.size-1||vp>1&&vp<=rp.size||gp<=0&&vp>=rp.size)&&(rp.visibleSlides.push(fp),rp.visibleSlidesIndexes.push(dp),ap[dp].classList.add(np.slideVisibleClass)),xp&&ap[dp].classList.add(np.slideFullyVisibleClass),fp.progress=sp?-hp:hp,fp.originalProgress=sp?-mp:mp}}function updateProgress(_d){const rp=this;if(typeof _d>"u"){const pp=rp.rtlTranslate?-1:1;_d=rp&&rp.translate&&rp.translate*pp||0}const np=rp.params,ap=rp.maxTranslate()-rp.minTranslate();let{progress:sp,isBeginning:lp,isEnd:up,progressLoop:cp}=rp;const dp=lp,fp=up;if(ap===0)sp=0,lp=!0,up=!0;else{sp=(_d-rp.minTranslate())/ap;const pp=Math.abs(_d-rp.minTranslate())<1,hp=Math.abs(_d-rp.maxTranslate())<1;lp=pp||sp<=0,up=hp||sp>=1,pp&&(sp=0),hp&&(sp=1)}if(np.loop){const pp=rp.getSlideIndexByData(0),hp=rp.getSlideIndexByData(rp.slides.length-1),mp=rp.slidesGrid[pp],gp=rp.slidesGrid[hp],vp=rp.slidesGrid[rp.slidesGrid.length-1],xp=Math.abs(_d);xp>=mp?cp=(xp-mp)/vp:cp=(xp+vp-gp)/vp,cp>1&&(cp-=1)}Object.assign(rp,{progress:sp,progressLoop:cp,isBeginning:lp,isEnd:up}),(np.watchSlidesProgress||np.centeredSlides&&np.autoHeight)&&rp.updateSlidesProgress(_d),lp&&!dp&&rp.emit("reachBeginning toEdge"),up&&!fp&&rp.emit("reachEnd toEdge"),(dp&&!lp||fp&&!up)&&rp.emit("fromEdge"),rp.emit("progress",sp)}function updateSlidesClasses(){const _d=this,{slides:rp,params:np,slidesEl:ap,activeIndex:sp}=_d,lp=_d.virtual&&np.virtual.enabled,up=_d.grid&&np.grid&&np.grid.rows>1,cp=hp=>elementChildren(ap,`.${np.slideClass}${hp}, swiper-slide${hp}`)[0];rp.forEach(hp=>{hp.classList.remove(np.slideActiveClass,np.slideNextClass,np.slidePrevClass)});let dp,fp,pp;if(lp)if(np.loop){let hp=sp-_d.virtual.slidesBefore;hp<0&&(hp=_d.virtual.slides.length+hp),hp>=_d.virtual.slides.length&&(hp-=_d.virtual.slides.length),dp=cp(`[data-swiper-slide-index="${hp}"]`)}else dp=cp(`[data-swiper-slide-index="${sp}"]`);else up?(dp=rp.filter(hp=>hp.column===sp)[0],pp=rp.filter(hp=>hp.column===sp+1)[0],fp=rp.filter(hp=>hp.column===sp-1)[0]):dp=rp[sp];dp&&(dp.classList.add(np.slideActiveClass),up?(pp&&pp.classList.add(np.slideNextClass),fp&&fp.classList.add(np.slidePrevClass)):(pp=elementNextAll(dp,`.${np.slideClass}, swiper-slide`)[0],np.loop&&!pp&&(pp=rp[0]),pp&&pp.classList.add(np.slideNextClass),fp=elementPrevAll(dp,`.${np.slideClass}, swiper-slide`)[0],np.loop&&!fp===0&&(fp=rp[rp.length-1]),fp&&fp.classList.add(np.slidePrevClass))),_d.emitSlidesClasses()}const processLazyPreloader=(_d,rp)=>{if(!_d||_d.destroyed||!_d.params)return;const np=()=>_d.isElement?"swiper-slide":`.${_d.params.slideClass}`,ap=rp.closest(np());if(ap){let sp=ap.querySelector(`.${_d.params.lazyPreloaderClass}`);!sp&&_d.isElement&&(ap.shadowRoot?sp=ap.shadowRoot.querySelector(`.${_d.params.lazyPreloaderClass}`):requestAnimationFrame(()=>{ap.shadowRoot&&(sp=ap.shadowRoot.querySelector(`.${_d.params.lazyPreloaderClass}`),sp&&sp.remove())})),sp&&sp.remove()}},unlazy=(_d,rp)=>{if(!_d.slides[rp])return;const np=_d.slides[rp].querySelector('[loading="lazy"]');np&&np.removeAttribute("loading")},preload=_d=>{if(!_d||_d.destroyed||!_d.params)return;let rp=_d.params.lazyPreloadPrevNext;const np=_d.slides.length;if(!np||!rp||rp<0)return;rp=Math.min(rp,np);const ap=_d.params.slidesPerView==="auto"?_d.slidesPerViewDynamic():Math.ceil(_d.params.slidesPerView),sp=_d.activeIndex;if(_d.params.grid&&_d.params.grid.rows>1){const up=sp,cp=[up-rp];cp.push(...Array.from({length:rp}).map((dp,fp)=>up+ap+fp)),_d.slides.forEach((dp,fp)=>{cp.includes(dp.column)&&unlazy(_d,fp)});return}const lp=sp+ap-1;if(_d.params.rewind||_d.params.loop)for(let up=sp-rp;up<=lp+rp;up+=1){const cp=(up%np+np)%np;(cp<sp||cp>lp)&&unlazy(_d,cp)}else for(let up=Math.max(sp-rp,0);up<=Math.min(lp+rp,np-1);up+=1)up!==sp&&(up>lp||up<sp)&&unlazy(_d,up)};function getActiveIndexByTranslate(_d){const{slidesGrid:rp,params:np}=_d,ap=_d.rtlTranslate?_d.translate:-_d.translate;let sp;for(let lp=0;lp<rp.length;lp+=1)typeof rp[lp+1]<"u"?ap>=rp[lp]&&ap<rp[lp+1]-(rp[lp+1]-rp[lp])/2?sp=lp:ap>=rp[lp]&&ap<rp[lp+1]&&(sp=lp+1):ap>=rp[lp]&&(sp=lp);return np.normalizeSlideIndex&&(sp<0||typeof sp>"u")&&(sp=0),sp}function updateActiveIndex(_d){const rp=this,np=rp.rtlTranslate?rp.translate:-rp.translate,{snapGrid:ap,params:sp,activeIndex:lp,realIndex:up,snapIndex:cp}=rp;let dp=_d,fp;const pp=gp=>{let vp=gp-rp.virtual.slidesBefore;return vp<0&&(vp=rp.virtual.slides.length+vp),vp>=rp.virtual.slides.length&&(vp-=rp.virtual.slides.length),vp};if(typeof dp>"u"&&(dp=getActiveIndexByTranslate(rp)),ap.indexOf(np)>=0)fp=ap.indexOf(np);else{const gp=Math.min(sp.slidesPerGroupSkip,dp);fp=gp+Math.floor((dp-gp)/sp.slidesPerGroup)}if(fp>=ap.length&&(fp=ap.length-1),dp===lp&&!rp.params.loop){fp!==cp&&(rp.snapIndex=fp,rp.emit("snapIndexChange"));return}if(dp===lp&&rp.params.loop&&rp.virtual&&rp.params.virtual.enabled){rp.realIndex=pp(dp);return}const hp=rp.grid&&sp.grid&&sp.grid.rows>1;let mp;if(rp.virtual&&sp.virtual.enabled&&sp.loop)mp=pp(dp);else if(hp){const gp=rp.slides.filter(xp=>xp.column===dp)[0];let vp=parseInt(gp.getAttribute("data-swiper-slide-index"),10);Number.isNaN(vp)&&(vp=Math.max(rp.slides.indexOf(gp),0)),mp=Math.floor(vp/sp.grid.rows)}else if(rp.slides[dp]){const gp=rp.slides[dp].getAttribute("data-swiper-slide-index");gp?mp=parseInt(gp,10):mp=dp}else mp=dp;Object.assign(rp,{previousSnapIndex:cp,snapIndex:fp,previousRealIndex:up,realIndex:mp,previousIndex:lp,activeIndex:dp}),rp.initialized&&preload(rp),rp.emit("activeIndexChange"),rp.emit("snapIndexChange"),(rp.initialized||rp.params.runCallbacksOnInit)&&(up!==mp&&rp.emit("realIndexChange"),rp.emit("slideChange"))}function updateClickedSlide(_d,rp){const np=this,ap=np.params;let sp=_d.closest(`.${ap.slideClass}, swiper-slide`);!sp&&np.isElement&&rp&&rp.length>1&&rp.includes(_d)&&[...rp.slice(rp.indexOf(_d)+1,rp.length)].forEach(cp=>{!sp&&cp.matches&&cp.matches(`.${ap.slideClass}, swiper-slide`)&&(sp=cp)});let lp=!1,up;if(sp){for(let cp=0;cp<np.slides.length;cp+=1)if(np.slides[cp]===sp){lp=!0,up=cp;break}}if(sp&&lp)np.clickedSlide=sp,np.virtual&&np.params.virtual.enabled?np.clickedIndex=parseInt(sp.getAttribute("data-swiper-slide-index"),10):np.clickedIndex=up;else{np.clickedSlide=void 0,np.clickedIndex=void 0;return}ap.slideToClickedSlide&&np.clickedIndex!==void 0&&np.clickedIndex!==np.activeIndex&&np.slideToClickedSlide()}var update={updateSize,updateSlides,updateAutoHeight,updateSlidesOffset,updateSlidesProgress,updateProgress,updateSlidesClasses,updateActiveIndex,updateClickedSlide};function getSwiperTranslate(_d){_d===void 0&&(_d=this.isHorizontal()?"x":"y");const rp=this,{params:np,rtlTranslate:ap,translate:sp,wrapperEl:lp}=rp;if(np.virtualTranslate)return ap?-sp:sp;if(np.cssMode)return sp;let up=getTranslate(lp,_d);return up+=rp.cssOverflowAdjustment(),ap&&(up=-up),up||0}function setTranslate(_d,rp){const np=this,{rtlTranslate:ap,params:sp,wrapperEl:lp,progress:up}=np;let cp=0,dp=0;const fp=0;np.isHorizontal()?cp=ap?-_d:_d:dp=_d,sp.roundLengths&&(cp=Math.floor(cp),dp=Math.floor(dp)),np.previousTranslate=np.translate,np.translate=np.isHorizontal()?cp:dp,sp.cssMode?lp[np.isHorizontal()?"scrollLeft":"scrollTop"]=np.isHorizontal()?-cp:-dp:sp.virtualTranslate||(np.isHorizontal()?cp-=np.cssOverflowAdjustment():dp-=np.cssOverflowAdjustment(),lp.style.transform=`translate3d(${cp}px, ${dp}px, ${fp}px)`);let pp;const hp=np.maxTranslate()-np.minTranslate();hp===0?pp=0:pp=(_d-np.minTranslate())/hp,pp!==up&&np.updateProgress(_d),np.emit("setTranslate",np.translate,rp)}function minTranslate(){return-this.snapGrid[0]}function maxTranslate(){return-this.snapGrid[this.snapGrid.length-1]}function translateTo(_d,rp,np,ap,sp){_d===void 0&&(_d=0),rp===void 0&&(rp=this.params.speed),np===void 0&&(np=!0),ap===void 0&&(ap=!0);const lp=this,{params:up,wrapperEl:cp}=lp;if(lp.animating&&up.preventInteractionOnTransition)return!1;const dp=lp.minTranslate(),fp=lp.maxTranslate();let pp;if(ap&&_d>dp?pp=dp:ap&&_d<fp?pp=fp:pp=_d,lp.updateProgress(pp),up.cssMode){const hp=lp.isHorizontal();if(rp===0)cp[hp?"scrollLeft":"scrollTop"]=-pp;else{if(!lp.support.smoothScroll)return animateCSSModeScroll({swiper:lp,targetPosition:-pp,side:hp?"left":"top"}),!0;cp.scrollTo({[hp?"left":"top"]:-pp,behavior:"smooth"})}return!0}return rp===0?(lp.setTransition(0),lp.setTranslate(pp),np&&(lp.emit("beforeTransitionStart",rp,sp),lp.emit("transitionEnd"))):(lp.setTransition(rp),lp.setTranslate(pp),np&&(lp.emit("beforeTransitionStart",rp,sp),lp.emit("transitionStart")),lp.animating||(lp.animating=!0,lp.onTranslateToWrapperTransitionEnd||(lp.onTranslateToWrapperTransitionEnd=function(mp){!lp||lp.destroyed||mp.target===this&&(lp.wrapperEl.removeEventListener("transitionend",lp.onTranslateToWrapperTransitionEnd),lp.onTranslateToWrapperTransitionEnd=null,delete lp.onTranslateToWrapperTransitionEnd,np&&lp.emit("transitionEnd"))}),lp.wrapperEl.addEventListener("transitionend",lp.onTranslateToWrapperTransitionEnd))),!0}var translate={getTranslate:getSwiperTranslate,setTranslate,minTranslate,maxTranslate,translateTo};function setTransition(_d,rp){const np=this;np.params.cssMode||(np.wrapperEl.style.transitionDuration=`${_d}ms`,np.wrapperEl.style.transitionDelay=_d===0?"0ms":""),np.emit("setTransition",_d,rp)}function transitionEmit(_d){let{swiper:rp,runCallbacks:np,direction:ap,step:sp}=_d;const{activeIndex:lp,previousIndex:up}=rp;let cp=ap;if(cp||(lp>up?cp="next":lp<up?cp="prev":cp="reset"),rp.emit(`transition${sp}`),np&&lp!==up){if(cp==="reset"){rp.emit(`slideResetTransition${sp}`);return}rp.emit(`slideChangeTransition${sp}`),cp==="next"?rp.emit(`slideNextTransition${sp}`):rp.emit(`slidePrevTransition${sp}`)}}function transitionStart(_d,rp){_d===void 0&&(_d=!0);const np=this,{params:ap}=np;ap.cssMode||(ap.autoHeight&&np.updateAutoHeight(),transitionEmit({swiper:np,runCallbacks:_d,direction:rp,step:"Start"}))}function transitionEnd(_d,rp){_d===void 0&&(_d=!0);const np=this,{params:ap}=np;np.animating=!1,!ap.cssMode&&(np.setTransition(0),transitionEmit({swiper:np,runCallbacks:_d,direction:rp,step:"End"}))}var transition={setTransition,transitionStart,transitionEnd};function slideTo(_d,rp,np,ap,sp){_d===void 0&&(_d=0),rp===void 0&&(rp=this.params.speed),np===void 0&&(np=!0),typeof _d=="string"&&(_d=parseInt(_d,10));const lp=this;let up=_d;up<0&&(up=0);const{params:cp,snapGrid:dp,slidesGrid:fp,previousIndex:pp,activeIndex:hp,rtlTranslate:mp,wrapperEl:gp,enabled:vp}=lp;if(lp.animating&&cp.preventInteractionOnTransition||!vp&&!ap&&!sp)return!1;const xp=Math.min(lp.params.slidesPerGroupSkip,up);let Sp=xp+Math.floor((up-xp)/lp.params.slidesPerGroup);Sp>=dp.length&&(Sp=dp.length-1);const yp=-dp[Sp];if(cp.normalizeSlideIndex)for(let Ep=0;Ep<fp.length;Ep+=1){const wp=-Math.floor(yp*100),_p=Math.floor(fp[Ep]*100),Rp=Math.floor(fp[Ep+1]*100);typeof fp[Ep+1]<"u"?wp>=_p&&wp<Rp-(Rp-_p)/2?up=Ep:wp>=_p&&wp<Rp&&(up=Ep+1):wp>=_p&&(up=Ep)}if(lp.initialized&&up!==hp&&(!lp.allowSlideNext&&(mp?yp>lp.translate&&yp>lp.minTranslate():yp<lp.translate&&yp<lp.minTranslate())||!lp.allowSlidePrev&&yp>lp.translate&&yp>lp.maxTranslate()&&(hp||0)!==up))return!1;up!==(pp||0)&&np&&lp.emit("beforeSlideChangeStart"),lp.updateProgress(yp);let bp;if(up>hp?bp="next":up<hp?bp="prev":bp="reset",mp&&-yp===lp.translate||!mp&&yp===lp.translate)return lp.updateActiveIndex(up),cp.autoHeight&&lp.updateAutoHeight(),lp.updateSlidesClasses(),cp.effect!=="slide"&&lp.setTranslate(yp),bp!=="reset"&&(lp.transitionStart(np,bp),lp.transitionEnd(np,bp)),!1;if(cp.cssMode){const Ep=lp.isHorizontal(),wp=mp?yp:-yp;if(rp===0){const _p=lp.virtual&&lp.params.virtual.enabled;_p&&(lp.wrapperEl.style.scrollSnapType="none",lp._immediateVirtual=!0),_p&&!lp._cssModeVirtualInitialSet&&lp.params.initialSlide>0?(lp._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{gp[Ep?"scrollLeft":"scrollTop"]=wp})):gp[Ep?"scrollLeft":"scrollTop"]=wp,_p&&requestAnimationFrame(()=>{lp.wrapperEl.style.scrollSnapType="",lp._immediateVirtual=!1})}else{if(!lp.support.smoothScroll)return animateCSSModeScroll({swiper:lp,targetPosition:wp,side:Ep?"left":"top"}),!0;gp.scrollTo({[Ep?"left":"top"]:wp,behavior:"smooth"})}return!0}return lp.setTransition(rp),lp.setTranslate(yp),lp.updateActiveIndex(up),lp.updateSlidesClasses(),lp.emit("beforeTransitionStart",rp,ap),lp.transitionStart(np,bp),rp===0?lp.transitionEnd(np,bp):lp.animating||(lp.animating=!0,lp.onSlideToWrapperTransitionEnd||(lp.onSlideToWrapperTransitionEnd=function(wp){!lp||lp.destroyed||wp.target===this&&(lp.wrapperEl.removeEventListener("transitionend",lp.onSlideToWrapperTransitionEnd),lp.onSlideToWrapperTransitionEnd=null,delete lp.onSlideToWrapperTransitionEnd,lp.transitionEnd(np,bp))}),lp.wrapperEl.addEventListener("transitionend",lp.onSlideToWrapperTransitionEnd)),!0}function slideToLoop(_d,rp,np,ap){_d===void 0&&(_d=0),rp===void 0&&(rp=this.params.speed),np===void 0&&(np=!0),typeof _d=="string"&&(_d=parseInt(_d,10));const sp=this,lp=sp.grid&&sp.params.grid&&sp.params.grid.rows>1;let up=_d;if(sp.params.loop)if(sp.virtual&&sp.params.virtual.enabled)up=up+sp.virtual.slidesBefore;else{let cp;if(lp){const mp=up*sp.params.grid.rows;cp=sp.slides.filter(gp=>gp.getAttribute("data-swiper-slide-index")*1===mp)[0].column}else cp=sp.getSlideIndexByData(up);const dp=lp?Math.ceil(sp.slides.length/sp.params.grid.rows):sp.slides.length,{centeredSlides:fp}=sp.params;let pp=sp.params.slidesPerView;pp==="auto"?pp=sp.slidesPerViewDynamic():(pp=Math.ceil(parseFloat(sp.params.slidesPerView,10)),fp&&pp%2===0&&(pp=pp+1));let hp=dp-cp<pp;if(fp&&(hp=hp||cp<Math.ceil(pp/2)),hp){const mp=fp?cp<sp.activeIndex?"prev":"next":cp-sp.activeIndex-1<sp.params.slidesPerView?"next":"prev";sp.loopFix({direction:mp,slideTo:!0,activeSlideIndex:mp==="next"?cp+1:cp-dp+1,slideRealIndex:mp==="next"?sp.realIndex:void 0})}if(lp){const mp=up*sp.params.grid.rows;up=sp.slides.filter(gp=>gp.getAttribute("data-swiper-slide-index")*1===mp)[0].column}else up=sp.getSlideIndexByData(up)}return requestAnimationFrame(()=>{sp.slideTo(up,rp,np,ap)}),sp}function slideNext(_d,rp,np){_d===void 0&&(_d=this.params.speed),rp===void 0&&(rp=!0);const ap=this,{enabled:sp,params:lp,animating:up}=ap;if(!sp)return ap;let cp=lp.slidesPerGroup;lp.slidesPerView==="auto"&&lp.slidesPerGroup===1&&lp.slidesPerGroupAuto&&(cp=Math.max(ap.slidesPerViewDynamic("current",!0),1));const dp=ap.activeIndex<lp.slidesPerGroupSkip?1:cp,fp=ap.virtual&&lp.virtual.enabled;if(lp.loop){if(up&&!fp&&lp.loopPreventsSliding)return!1;if(ap.loopFix({direction:"next"}),ap._clientLeft=ap.wrapperEl.clientLeft,ap.activeIndex===ap.slides.length-1&&lp.cssMode)return requestAnimationFrame(()=>{ap.slideTo(ap.activeIndex+dp,_d,rp,np)}),!0}return lp.rewind&&ap.isEnd?ap.slideTo(0,_d,rp,np):ap.slideTo(ap.activeIndex+dp,_d,rp,np)}function slidePrev(_d,rp,np){_d===void 0&&(_d=this.params.speed),rp===void 0&&(rp=!0);const ap=this,{params:sp,snapGrid:lp,slidesGrid:up,rtlTranslate:cp,enabled:dp,animating:fp}=ap;if(!dp)return ap;const pp=ap.virtual&&sp.virtual.enabled;if(sp.loop){if(fp&&!pp&&sp.loopPreventsSliding)return!1;ap.loopFix({direction:"prev"}),ap._clientLeft=ap.wrapperEl.clientLeft}const hp=cp?ap.translate:-ap.translate;function mp(yp){return yp<0?-Math.floor(Math.abs(yp)):Math.floor(yp)}const gp=mp(hp),vp=lp.map(yp=>mp(yp));let xp=lp[vp.indexOf(gp)-1];if(typeof xp>"u"&&sp.cssMode){let yp;lp.forEach((bp,Ep)=>{gp>=bp&&(yp=Ep)}),typeof yp<"u"&&(xp=lp[yp>0?yp-1:yp])}let Sp=0;if(typeof xp<"u"&&(Sp=up.indexOf(xp),Sp<0&&(Sp=ap.activeIndex-1),sp.slidesPerView==="auto"&&sp.slidesPerGroup===1&&sp.slidesPerGroupAuto&&(Sp=Sp-ap.slidesPerViewDynamic("previous",!0)+1,Sp=Math.max(Sp,0))),sp.rewind&&ap.isBeginning){const yp=ap.params.virtual&&ap.params.virtual.enabled&&ap.virtual?ap.virtual.slides.length-1:ap.slides.length-1;return ap.slideTo(yp,_d,rp,np)}else if(sp.loop&&ap.activeIndex===0&&sp.cssMode)return requestAnimationFrame(()=>{ap.slideTo(Sp,_d,rp,np)}),!0;return ap.slideTo(Sp,_d,rp,np)}function slideReset(_d,rp,np){_d===void 0&&(_d=this.params.speed),rp===void 0&&(rp=!0);const ap=this;return ap.slideTo(ap.activeIndex,_d,rp,np)}function slideToClosest(_d,rp,np,ap){_d===void 0&&(_d=this.params.speed),rp===void 0&&(rp=!0),ap===void 0&&(ap=.5);const sp=this;let lp=sp.activeIndex;const up=Math.min(sp.params.slidesPerGroupSkip,lp),cp=up+Math.floor((lp-up)/sp.params.slidesPerGroup),dp=sp.rtlTranslate?sp.translate:-sp.translate;if(dp>=sp.snapGrid[cp]){const fp=sp.snapGrid[cp],pp=sp.snapGrid[cp+1];dp-fp>(pp-fp)*ap&&(lp+=sp.params.slidesPerGroup)}else{const fp=sp.snapGrid[cp-1],pp=sp.snapGrid[cp];dp-fp<=(pp-fp)*ap&&(lp-=sp.params.slidesPerGroup)}return lp=Math.max(lp,0),lp=Math.min(lp,sp.slidesGrid.length-1),sp.slideTo(lp,_d,rp,np)}function slideToClickedSlide(){const _d=this,{params:rp,slidesEl:np}=_d,ap=rp.slidesPerView==="auto"?_d.slidesPerViewDynamic():rp.slidesPerView;let sp=_d.clickedIndex,lp;const up=_d.isElement?"swiper-slide":`.${rp.slideClass}`;if(rp.loop){if(_d.animating)return;lp=parseInt(_d.clickedSlide.getAttribute("data-swiper-slide-index"),10),rp.centeredSlides?sp<_d.loopedSlides-ap/2||sp>_d.slides.length-_d.loopedSlides+ap/2?(_d.loopFix(),sp=_d.getSlideIndex(elementChildren(np,`${up}[data-swiper-slide-index="${lp}"]`)[0]),nextTick(()=>{_d.slideTo(sp)})):_d.slideTo(sp):sp>_d.slides.length-ap?(_d.loopFix(),sp=_d.getSlideIndex(elementChildren(np,`${up}[data-swiper-slide-index="${lp}"]`)[0]),nextTick(()=>{_d.slideTo(sp)})):_d.slideTo(sp)}else _d.slideTo(sp)}var slide={slideTo,slideToLoop,slideNext,slidePrev,slideReset,slideToClosest,slideToClickedSlide};function loopCreate(_d){const rp=this,{params:np,slidesEl:ap}=rp;if(!np.loop||rp.virtual&&rp.params.virtual.enabled)return;const sp=()=>{elementChildren(ap,`.${np.slideClass}, swiper-slide`).forEach((hp,mp)=>{hp.setAttribute("data-swiper-slide-index",mp)})},lp=rp.grid&&np.grid&&np.grid.rows>1,up=np.slidesPerGroup*(lp?np.grid.rows:1),cp=rp.slides.length%up!==0,dp=lp&&rp.slides.length%np.grid.rows!==0,fp=pp=>{for(let hp=0;hp<pp;hp+=1){const mp=rp.isElement?createElement("swiper-slide",[np.slideBlankClass]):createElement("div",[np.slideClass,np.slideBlankClass]);rp.slidesEl.append(mp)}};if(cp){if(np.loopAddBlankSlides){const pp=up-rp.slides.length%up;fp(pp),rp.recalcSlides(),rp.updateSlides()}else showWarning("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");sp()}else if(dp){if(np.loopAddBlankSlides){const pp=np.grid.rows-rp.slides.length%np.grid.rows;fp(pp),rp.recalcSlides(),rp.updateSlides()}else showWarning("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");sp()}else sp();rp.loopFix({slideRealIndex:_d,direction:np.centeredSlides?void 0:"next"})}function loopFix(_d){let{slideRealIndex:rp,slideTo:np=!0,direction:ap,setTranslate:sp,activeSlideIndex:lp,byController:up,byMousewheel:cp}=_d===void 0?{}:_d;const dp=this;if(!dp.params.loop)return;dp.emit("beforeLoopFix");const{slides:fp,allowSlidePrev:pp,allowSlideNext:hp,slidesEl:mp,params:gp}=dp,{centeredSlides:vp}=gp;if(dp.allowSlidePrev=!0,dp.allowSlideNext=!0,dp.virtual&&gp.virtual.enabled){np&&(!gp.centeredSlides&&dp.snapIndex===0?dp.slideTo(dp.virtual.slides.length,0,!1,!0):gp.centeredSlides&&dp.snapIndex<gp.slidesPerView?dp.slideTo(dp.virtual.slides.length+dp.snapIndex,0,!1,!0):dp.snapIndex===dp.snapGrid.length-1&&dp.slideTo(dp.virtual.slidesBefore,0,!1,!0)),dp.allowSlidePrev=pp,dp.allowSlideNext=hp,dp.emit("loopFix");return}let xp=gp.slidesPerView;xp==="auto"?xp=dp.slidesPerViewDynamic():(xp=Math.ceil(parseFloat(gp.slidesPerView,10)),vp&&xp%2===0&&(xp=xp+1));const Sp=gp.slidesPerGroupAuto?xp:gp.slidesPerGroup;let yp=Sp;yp%Sp!==0&&(yp+=Sp-yp%Sp),yp+=gp.loopAdditionalSlides,dp.loopedSlides=yp;const bp=dp.grid&&gp.grid&&gp.grid.rows>1;fp.length<xp+yp?showWarning("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled and not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):bp&&gp.grid.fill==="row"&&showWarning("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`");const Ep=[],wp=[];let _p=dp.activeIndex;typeof lp>"u"?lp=dp.getSlideIndex(fp.filter(kp=>kp.classList.contains(gp.slideActiveClass))[0]):_p=lp;const Rp=ap==="next"||!ap,$p=ap==="prev"||!ap;let Cp=0,Ap=0;const Op=bp?Math.ceil(fp.length/gp.grid.rows):fp.length,Mp=(bp?fp[lp].column:lp)+(vp&&typeof sp>"u"?-xp/2+.5:0);if(Mp<yp){Cp=Math.max(yp-Mp,Sp);for(let kp=0;kp<yp-Mp;kp+=1){const Dp=kp-Math.floor(kp/Op)*Op;if(bp){const Fp=Op-Dp-1;for(let Ip=fp.length-1;Ip>=0;Ip-=1)fp[Ip].column===Fp&&Ep.push(Ip)}else Ep.push(Op-Dp-1)}}else if(Mp+xp>Op-yp){Ap=Math.max(Mp-(Op-yp*2),Sp);for(let kp=0;kp<Ap;kp+=1){const Dp=kp-Math.floor(kp/Op)*Op;bp?fp.forEach((Fp,Ip)=>{Fp.column===Dp&&wp.push(Ip)}):wp.push(Dp)}}if(dp.__preventObserver__=!0,requestAnimationFrame(()=>{dp.__preventObserver__=!1}),$p&&Ep.forEach(kp=>{fp[kp].swiperLoopMoveDOM=!0,mp.prepend(fp[kp]),fp[kp].swiperLoopMoveDOM=!1}),Rp&&wp.forEach(kp=>{fp[kp].swiperLoopMoveDOM=!0,mp.append(fp[kp]),fp[kp].swiperLoopMoveDOM=!1}),dp.recalcSlides(),gp.slidesPerView==="auto"?dp.updateSlides():bp&&(Ep.length>0&&$p||wp.length>0&&Rp)&&dp.slides.forEach((kp,Dp)=>{dp.grid.updateSlide(Dp,kp,dp.slides)}),gp.watchSlidesProgress&&dp.updateSlidesOffset(),np){if(Ep.length>0&&$p){if(typeof rp>"u"){const kp=dp.slidesGrid[_p],Fp=dp.slidesGrid[_p+Cp]-kp;cp?dp.setTranslate(dp.translate-Fp):(dp.slideTo(_p+Cp,0,!1,!0),sp&&(dp.touchEventsData.startTranslate=dp.touchEventsData.startTranslate-Fp,dp.touchEventsData.currentTranslate=dp.touchEventsData.currentTranslate-Fp))}else if(sp){const kp=bp?Ep.length/gp.grid.rows:Ep.length;dp.slideTo(dp.activeIndex+kp,0,!1,!0),dp.touchEventsData.currentTranslate=dp.translate}}else if(wp.length>0&&Rp)if(typeof rp>"u"){const kp=dp.slidesGrid[_p],Fp=dp.slidesGrid[_p-Ap]-kp;cp?dp.setTranslate(dp.translate-Fp):(dp.slideTo(_p-Ap,0,!1,!0),sp&&(dp.touchEventsData.startTranslate=dp.touchEventsData.startTranslate-Fp,dp.touchEventsData.currentTranslate=dp.touchEventsData.currentTranslate-Fp))}else{const kp=bp?wp.length/gp.grid.rows:wp.length;dp.slideTo(dp.activeIndex-kp,0,!1,!0)}}if(dp.allowSlidePrev=pp,dp.allowSlideNext=hp,dp.controller&&dp.controller.control&&!up){const kp={slideRealIndex:rp,direction:ap,setTranslate:sp,activeSlideIndex:lp,byController:!0};Array.isArray(dp.controller.control)?dp.controller.control.forEach(Dp=>{!Dp.destroyed&&Dp.params.loop&&Dp.loopFix({...kp,slideTo:Dp.params.slidesPerView===gp.slidesPerView?np:!1})}):dp.controller.control instanceof dp.constructor&&dp.controller.control.params.loop&&dp.controller.control.loopFix({...kp,slideTo:dp.controller.control.params.slidesPerView===gp.slidesPerView?np:!1})}dp.emit("loopFix")}function loopDestroy(){const _d=this,{params:rp,slidesEl:np}=_d;if(!rp.loop||_d.virtual&&_d.params.virtual.enabled)return;_d.recalcSlides();const ap=[];_d.slides.forEach(sp=>{const lp=typeof sp.swiperSlideIndex>"u"?sp.getAttribute("data-swiper-slide-index")*1:sp.swiperSlideIndex;ap[lp]=sp}),_d.slides.forEach(sp=>{sp.removeAttribute("data-swiper-slide-index")}),ap.forEach(sp=>{np.append(sp)}),_d.recalcSlides(),_d.slideTo(_d.realIndex,0)}var loop={loopCreate,loopFix,loopDestroy};function setGrabCursor(_d){const rp=this;if(!rp.params.simulateTouch||rp.params.watchOverflow&&rp.isLocked||rp.params.cssMode)return;const np=rp.params.touchEventsTarget==="container"?rp.el:rp.wrapperEl;rp.isElement&&(rp.__preventObserver__=!0),np.style.cursor="move",np.style.cursor=_d?"grabbing":"grab",rp.isElement&&requestAnimationFrame(()=>{rp.__preventObserver__=!1})}function unsetGrabCursor(){const _d=this;_d.params.watchOverflow&&_d.isLocked||_d.params.cssMode||(_d.isElement&&(_d.__preventObserver__=!0),_d[_d.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",_d.isElement&&requestAnimationFrame(()=>{_d.__preventObserver__=!1}))}var grabCursor={setGrabCursor,unsetGrabCursor};function closestElement(_d,rp){rp===void 0&&(rp=this);function np(ap){if(!ap||ap===getDocument()||ap===getWindow())return null;ap.assignedSlot&&(ap=ap.assignedSlot);const sp=ap.closest(_d);return!sp&&!ap.getRootNode?null:sp||np(ap.getRootNode().host)}return np(rp)}function preventEdgeSwipe(_d,rp,np){const ap=getWindow(),{params:sp}=_d,lp=sp.edgeSwipeDetection,up=sp.edgeSwipeThreshold;return lp&&(np<=up||np>=ap.innerWidth-up)?lp==="prevent"?(rp.preventDefault(),!0):!1:!0}function onTouchStart(_d){const rp=this,np=getDocument();let ap=_d;ap.originalEvent&&(ap=ap.originalEvent);const sp=rp.touchEventsData;if(ap.type==="pointerdown"){if(sp.pointerId!==null&&sp.pointerId!==ap.pointerId)return;sp.pointerId=ap.pointerId}else ap.type==="touchstart"&&ap.targetTouches.length===1&&(sp.touchId=ap.targetTouches[0].identifier);if(ap.type==="touchstart"){preventEdgeSwipe(rp,ap,ap.targetTouches[0].pageX);return}const{params:lp,touches:up,enabled:cp}=rp;if(!cp||!lp.simulateTouch&&ap.pointerType==="mouse"||rp.animating&&lp.preventInteractionOnTransition)return;!rp.animating&&lp.cssMode&&lp.loop&&rp.loopFix();let dp=ap.target;if(lp.touchEventsTarget==="wrapper"&&!rp.wrapperEl.contains(dp)||"which"in ap&&ap.which===3||"button"in ap&&ap.button>0||sp.isTouched&&sp.isMoved)return;const fp=!!lp.noSwipingClass&&lp.noSwipingClass!=="",pp=ap.composedPath?ap.composedPath():ap.path;fp&&ap.target&&ap.target.shadowRoot&&pp&&(dp=pp[0]);const hp=lp.noSwipingSelector?lp.noSwipingSelector:`.${lp.noSwipingClass}`,mp=!!(ap.target&&ap.target.shadowRoot);if(lp.noSwiping&&(mp?closestElement(hp,dp):dp.closest(hp))){rp.allowClick=!0;return}if(lp.swipeHandler&&!dp.closest(lp.swipeHandler))return;up.currentX=ap.pageX,up.currentY=ap.pageY;const gp=up.currentX,vp=up.currentY;if(!preventEdgeSwipe(rp,ap,gp))return;Object.assign(sp,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),up.startX=gp,up.startY=vp,sp.touchStartTime=now(),rp.allowClick=!0,rp.updateSize(),rp.swipeDirection=void 0,lp.threshold>0&&(sp.allowThresholdMove=!1);let xp=!0;dp.matches(sp.focusableElements)&&(xp=!1,dp.nodeName==="SELECT"&&(sp.isTouched=!1)),np.activeElement&&np.activeElement.matches(sp.focusableElements)&&np.activeElement!==dp&&np.activeElement.blur();const Sp=xp&&rp.allowTouchMove&&lp.touchStartPreventDefault;(lp.touchStartForcePreventDefault||Sp)&&!dp.isContentEditable&&ap.preventDefault(),lp.freeMode&&lp.freeMode.enabled&&rp.freeMode&&rp.animating&&!lp.cssMode&&rp.freeMode.onTouchStart(),rp.emit("touchStart",ap)}function onTouchMove(_d){const rp=getDocument(),np=this,ap=np.touchEventsData,{params:sp,touches:lp,rtlTranslate:up,enabled:cp}=np;if(!cp||!sp.simulateTouch&&_d.pointerType==="mouse")return;let dp=_d;if(dp.originalEvent&&(dp=dp.originalEvent),dp.type==="pointermove"&&(ap.touchId!==null||dp.pointerId!==ap.pointerId))return;let fp;if(dp.type==="touchmove"){if(fp=[...dp.changedTouches].filter(Rp=>Rp.identifier===ap.touchId)[0],!fp||fp.identifier!==ap.touchId)return}else fp=dp;if(!ap.isTouched){ap.startMoving&&ap.isScrolling&&np.emit("touchMoveOpposite",dp);return}const pp=fp.pageX,hp=fp.pageY;if(dp.preventedByNestedSwiper){lp.startX=pp,lp.startY=hp;return}if(!np.allowTouchMove){dp.target.matches(ap.focusableElements)||(np.allowClick=!1),ap.isTouched&&(Object.assign(lp,{startX:pp,startY:hp,currentX:pp,currentY:hp}),ap.touchStartTime=now());return}if(sp.touchReleaseOnEdges&&!sp.loop){if(np.isVertical()){if(hp<lp.startY&&np.translate<=np.maxTranslate()||hp>lp.startY&&np.translate>=np.minTranslate()){ap.isTouched=!1,ap.isMoved=!1;return}}else if(pp<lp.startX&&np.translate<=np.maxTranslate()||pp>lp.startX&&np.translate>=np.minTranslate())return}if(rp.activeElement&&dp.target===rp.activeElement&&dp.target.matches(ap.focusableElements)){ap.isMoved=!0,np.allowClick=!1;return}ap.allowTouchCallbacks&&np.emit("touchMove",dp),lp.previousX=lp.currentX,lp.previousY=lp.currentY,lp.currentX=pp,lp.currentY=hp;const mp=lp.currentX-lp.startX,gp=lp.currentY-lp.startY;if(np.params.threshold&&Math.sqrt(mp**2+gp**2)<np.params.threshold)return;if(typeof ap.isScrolling>"u"){let Rp;np.isHorizontal()&&lp.currentY===lp.startY||np.isVertical()&&lp.currentX===lp.startX?ap.isScrolling=!1:mp*mp+gp*gp>=25&&(Rp=Math.atan2(Math.abs(gp),Math.abs(mp))*180/Math.PI,ap.isScrolling=np.isHorizontal()?Rp>sp.touchAngle:90-Rp>sp.touchAngle)}if(ap.isScrolling&&np.emit("touchMoveOpposite",dp),typeof ap.startMoving>"u"&&(lp.currentX!==lp.startX||lp.currentY!==lp.startY)&&(ap.startMoving=!0),ap.isScrolling){ap.isTouched=!1;return}if(!ap.startMoving)return;np.allowClick=!1,!sp.cssMode&&dp.cancelable&&dp.preventDefault(),sp.touchMoveStopPropagation&&!sp.nested&&dp.stopPropagation();let vp=np.isHorizontal()?mp:gp,xp=np.isHorizontal()?lp.currentX-lp.previousX:lp.currentY-lp.previousY;sp.oneWayMovement&&(vp=Math.abs(vp)*(up?1:-1),xp=Math.abs(xp)*(up?1:-1)),lp.diff=vp,vp*=sp.touchRatio,up&&(vp=-vp,xp=-xp);const Sp=np.touchesDirection;np.swipeDirection=vp>0?"prev":"next",np.touchesDirection=xp>0?"prev":"next";const yp=np.params.loop&&!sp.cssMode,bp=np.touchesDirection==="next"&&np.allowSlideNext||np.touchesDirection==="prev"&&np.allowSlidePrev;if(!ap.isMoved){if(yp&&bp&&np.loopFix({direction:np.swipeDirection}),ap.startTranslate=np.getTranslate(),np.setTransition(0),np.animating){const Rp=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});np.wrapperEl.dispatchEvent(Rp)}ap.allowMomentumBounce=!1,sp.grabCursor&&(np.allowSlideNext===!0||np.allowSlidePrev===!0)&&np.setGrabCursor(!0),np.emit("sliderFirstMove",dp)}let Ep;if(new Date().getTime(),ap.isMoved&&ap.allowThresholdMove&&Sp!==np.touchesDirection&&yp&&bp&&Math.abs(vp)>=1){Object.assign(lp,{startX:pp,startY:hp,currentX:pp,currentY:hp,startTranslate:ap.currentTranslate}),ap.loopSwapReset=!0,ap.startTranslate=ap.currentTranslate;return}np.emit("sliderMove",dp),ap.isMoved=!0,ap.currentTranslate=vp+ap.startTranslate;let wp=!0,_p=sp.resistanceRatio;if(sp.touchReleaseOnEdges&&(_p=0),vp>0?(yp&&bp&&!Ep&&ap.allowThresholdMove&&ap.currentTranslate>(sp.centeredSlides?np.minTranslate()-np.slidesSizesGrid[np.activeIndex+1]:np.minTranslate())&&np.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),ap.currentTranslate>np.minTranslate()&&(wp=!1,sp.resistance&&(ap.currentTranslate=np.minTranslate()-1+(-np.minTranslate()+ap.startTranslate+vp)**_p))):vp<0&&(yp&&bp&&!Ep&&ap.allowThresholdMove&&ap.currentTranslate<(sp.centeredSlides?np.maxTranslate()+np.slidesSizesGrid[np.slidesSizesGrid.length-1]:np.maxTranslate())&&np.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:np.slides.length-(sp.slidesPerView==="auto"?np.slidesPerViewDynamic():Math.ceil(parseFloat(sp.slidesPerView,10)))}),ap.currentTranslate<np.maxTranslate()&&(wp=!1,sp.resistance&&(ap.currentTranslate=np.maxTranslate()+1-(np.maxTranslate()-ap.startTranslate-vp)**_p))),wp&&(dp.preventedByNestedSwiper=!0),!np.allowSlideNext&&np.swipeDirection==="next"&&ap.currentTranslate<ap.startTranslate&&(ap.currentTranslate=ap.startTranslate),!np.allowSlidePrev&&np.swipeDirection==="prev"&&ap.currentTranslate>ap.startTranslate&&(ap.currentTranslate=ap.startTranslate),!np.allowSlidePrev&&!np.allowSlideNext&&(ap.currentTranslate=ap.startTranslate),sp.threshold>0)if(Math.abs(vp)>sp.threshold||ap.allowThresholdMove){if(!ap.allowThresholdMove){ap.allowThresholdMove=!0,lp.startX=lp.currentX,lp.startY=lp.currentY,ap.currentTranslate=ap.startTranslate,lp.diff=np.isHorizontal()?lp.currentX-lp.startX:lp.currentY-lp.startY;return}}else{ap.currentTranslate=ap.startTranslate;return}!sp.followFinger||sp.cssMode||((sp.freeMode&&sp.freeMode.enabled&&np.freeMode||sp.watchSlidesProgress)&&(np.updateActiveIndex(),np.updateSlidesClasses()),sp.freeMode&&sp.freeMode.enabled&&np.freeMode&&np.freeMode.onTouchMove(),np.updateProgress(ap.currentTranslate),np.setTranslate(ap.currentTranslate))}function onTouchEnd(_d){const rp=this,np=rp.touchEventsData;let ap=_d;ap.originalEvent&&(ap=ap.originalEvent);let sp;if(ap.type==="touchend"||ap.type==="touchcancel"){if(sp=[...ap.changedTouches].filter(_p=>_p.identifier===np.touchId)[0],!sp||sp.identifier!==np.touchId)return}else{if(np.touchId!==null||ap.pointerId!==np.pointerId)return;sp=ap}if(["pointercancel","pointerout","pointerleave","contextmenu"].includes(ap.type)&&!(["pointercancel","contextmenu"].includes(ap.type)&&(rp.browser.isSafari||rp.browser.isWebView)))return;np.pointerId=null,np.touchId=null;const{params:up,touches:cp,rtlTranslate:dp,slidesGrid:fp,enabled:pp}=rp;if(!pp||!up.simulateTouch&&ap.pointerType==="mouse")return;if(np.allowTouchCallbacks&&rp.emit("touchEnd",ap),np.allowTouchCallbacks=!1,!np.isTouched){np.isMoved&&up.grabCursor&&rp.setGrabCursor(!1),np.isMoved=!1,np.startMoving=!1;return}up.grabCursor&&np.isMoved&&np.isTouched&&(rp.allowSlideNext===!0||rp.allowSlidePrev===!0)&&rp.setGrabCursor(!1);const hp=now(),mp=hp-np.touchStartTime;if(rp.allowClick){const _p=ap.path||ap.composedPath&&ap.composedPath();rp.updateClickedSlide(_p&&_p[0]||ap.target,_p),rp.emit("tap click",ap),mp<300&&hp-np.lastClickTime<300&&rp.emit("doubleTap doubleClick",ap)}if(np.lastClickTime=now(),nextTick(()=>{rp.destroyed||(rp.allowClick=!0)}),!np.isTouched||!np.isMoved||!rp.swipeDirection||cp.diff===0&&!np.loopSwapReset||np.currentTranslate===np.startTranslate&&!np.loopSwapReset){np.isTouched=!1,np.isMoved=!1,np.startMoving=!1;return}np.isTouched=!1,np.isMoved=!1,np.startMoving=!1;let gp;if(up.followFinger?gp=dp?rp.translate:-rp.translate:gp=-np.currentTranslate,up.cssMode)return;if(up.freeMode&&up.freeMode.enabled){rp.freeMode.onTouchEnd({currentPos:gp});return}const vp=gp>=-rp.maxTranslate()&&!rp.params.loop;let xp=0,Sp=rp.slidesSizesGrid[0];for(let _p=0;_p<fp.length;_p+=_p<up.slidesPerGroupSkip?1:up.slidesPerGroup){const Rp=_p<up.slidesPerGroupSkip-1?1:up.slidesPerGroup;typeof fp[_p+Rp]<"u"?(vp||gp>=fp[_p]&&gp<fp[_p+Rp])&&(xp=_p,Sp=fp[_p+Rp]-fp[_p]):(vp||gp>=fp[_p])&&(xp=_p,Sp=fp[fp.length-1]-fp[fp.length-2])}let yp=null,bp=null;up.rewind&&(rp.isBeginning?bp=up.virtual&&up.virtual.enabled&&rp.virtual?rp.virtual.slides.length-1:rp.slides.length-1:rp.isEnd&&(yp=0));const Ep=(gp-fp[xp])/Sp,wp=xp<up.slidesPerGroupSkip-1?1:up.slidesPerGroup;if(mp>up.longSwipesMs){if(!up.longSwipes){rp.slideTo(rp.activeIndex);return}rp.swipeDirection==="next"&&(Ep>=up.longSwipesRatio?rp.slideTo(up.rewind&&rp.isEnd?yp:xp+wp):rp.slideTo(xp)),rp.swipeDirection==="prev"&&(Ep>1-up.longSwipesRatio?rp.slideTo(xp+wp):bp!==null&&Ep<0&&Math.abs(Ep)>up.longSwipesRatio?rp.slideTo(bp):rp.slideTo(xp))}else{if(!up.shortSwipes){rp.slideTo(rp.activeIndex);return}rp.navigation&&(ap.target===rp.navigation.nextEl||ap.target===rp.navigation.prevEl)?ap.target===rp.navigation.nextEl?rp.slideTo(xp+wp):rp.slideTo(xp):(rp.swipeDirection==="next"&&rp.slideTo(yp!==null?yp:xp+wp),rp.swipeDirection==="prev"&&rp.slideTo(bp!==null?bp:xp))}}function onResize(){const _d=this,{params:rp,el:np}=_d;if(np&&np.offsetWidth===0)return;rp.breakpoints&&_d.setBreakpoint();const{allowSlideNext:ap,allowSlidePrev:sp,snapGrid:lp}=_d,up=_d.virtual&&_d.params.virtual.enabled;_d.allowSlideNext=!0,_d.allowSlidePrev=!0,_d.updateSize(),_d.updateSlides(),_d.updateSlidesClasses();const cp=up&&rp.loop;(rp.slidesPerView==="auto"||rp.slidesPerView>1)&&_d.isEnd&&!_d.isBeginning&&!_d.params.centeredSlides&&!cp?_d.slideTo(_d.slides.length-1,0,!1,!0):_d.params.loop&&!up?_d.slideToLoop(_d.realIndex,0,!1,!0):_d.slideTo(_d.activeIndex,0,!1,!0),_d.autoplay&&_d.autoplay.running&&_d.autoplay.paused&&(clearTimeout(_d.autoplay.resizeTimeout),_d.autoplay.resizeTimeout=setTimeout(()=>{_d.autoplay&&_d.autoplay.running&&_d.autoplay.paused&&_d.autoplay.resume()},500)),_d.allowSlidePrev=sp,_d.allowSlideNext=ap,_d.params.watchOverflow&&lp!==_d.snapGrid&&_d.checkOverflow()}function onClick(_d){const rp=this;rp.enabled&&(rp.allowClick||(rp.params.preventClicks&&_d.preventDefault(),rp.params.preventClicksPropagation&&rp.animating&&(_d.stopPropagation(),_d.stopImmediatePropagation())))}function onScroll(){const _d=this,{wrapperEl:rp,rtlTranslate:np,enabled:ap}=_d;if(!ap)return;_d.previousTranslate=_d.translate,_d.isHorizontal()?_d.translate=-rp.scrollLeft:_d.translate=-rp.scrollTop,_d.translate===0&&(_d.translate=0),_d.updateActiveIndex(),_d.updateSlidesClasses();let sp;const lp=_d.maxTranslate()-_d.minTranslate();lp===0?sp=0:sp=(_d.translate-_d.minTranslate())/lp,sp!==_d.progress&&_d.updateProgress(np?-_d.translate:_d.translate),_d.emit("setTranslate",_d.translate,!1)}function onLoad(_d){const rp=this;processLazyPreloader(rp,_d.target),!(rp.params.cssMode||rp.params.slidesPerView!=="auto"&&!rp.params.autoHeight)&&rp.update()}function onDocumentTouchStart(){const _d=this;_d.documentTouchHandlerProceeded||(_d.documentTouchHandlerProceeded=!0,_d.params.touchReleaseOnEdges&&(_d.el.style.touchAction="auto"))}const events$2=(_d,rp)=>{const np=getDocument(),{params:ap,el:sp,wrapperEl:lp,device:up}=_d,cp=!!ap.nested,dp=rp==="on"?"addEventListener":"removeEventListener",fp=rp;np[dp]("touchstart",_d.onDocumentTouchStart,{passive:!1,capture:cp}),sp[dp]("touchstart",_d.onTouchStart,{passive:!1}),sp[dp]("pointerdown",_d.onTouchStart,{passive:!1}),np[dp]("touchmove",_d.onTouchMove,{passive:!1,capture:cp}),np[dp]("pointermove",_d.onTouchMove,{passive:!1,capture:cp}),np[dp]("touchend",_d.onTouchEnd,{passive:!0}),np[dp]("pointerup",_d.onTouchEnd,{passive:!0}),np[dp]("pointercancel",_d.onTouchEnd,{passive:!0}),np[dp]("touchcancel",_d.onTouchEnd,{passive:!0}),np[dp]("pointerout",_d.onTouchEnd,{passive:!0}),np[dp]("pointerleave",_d.onTouchEnd,{passive:!0}),np[dp]("contextmenu",_d.onTouchEnd,{passive:!0}),(ap.preventClicks||ap.preventClicksPropagation)&&sp[dp]("click",_d.onClick,!0),ap.cssMode&&lp[dp]("scroll",_d.onScroll),ap.updateOnWindowResize?_d[fp](up.ios||up.android?"resize orientationchange observerUpdate":"resize observerUpdate",onResize,!0):_d[fp]("observerUpdate",onResize,!0),sp[dp]("load",_d.onLoad,{capture:!0})};function attachEvents(){const _d=this,{params:rp}=_d;_d.onTouchStart=onTouchStart.bind(_d),_d.onTouchMove=onTouchMove.bind(_d),_d.onTouchEnd=onTouchEnd.bind(_d),_d.onDocumentTouchStart=onDocumentTouchStart.bind(_d),rp.cssMode&&(_d.onScroll=onScroll.bind(_d)),_d.onClick=onClick.bind(_d),_d.onLoad=onLoad.bind(_d),events$2(_d,"on")}function detachEvents(){events$2(this,"off")}var events$1$1={attachEvents,detachEvents};const isGridEnabled=(_d,rp)=>_d.grid&&rp.grid&&rp.grid.rows>1;function setBreakpoint(){const _d=this,{realIndex:rp,initialized:np,params:ap,el:sp}=_d,lp=ap.breakpoints;if(!lp||lp&&Object.keys(lp).length===0)return;const up=_d.getBreakpoint(lp,_d.params.breakpointsBase,_d.el);if(!up||_d.currentBreakpoint===up)return;const dp=(up in lp?lp[up]:void 0)||_d.originalParams,fp=isGridEnabled(_d,ap),pp=isGridEnabled(_d,dp),hp=ap.enabled;fp&&!pp?(sp.classList.remove(`${ap.containerModifierClass}grid`,`${ap.containerModifierClass}grid-column`),_d.emitContainerClasses()):!fp&&pp&&(sp.classList.add(`${ap.containerModifierClass}grid`),(dp.grid.fill&&dp.grid.fill==="column"||!dp.grid.fill&&ap.grid.fill==="column")&&sp.classList.add(`${ap.containerModifierClass}grid-column`),_d.emitContainerClasses()),["navigation","pagination","scrollbar"].forEach(yp=>{if(typeof dp[yp]>"u")return;const bp=ap[yp]&&ap[yp].enabled,Ep=dp[yp]&&dp[yp].enabled;bp&&!Ep&&_d[yp].disable(),!bp&&Ep&&_d[yp].enable()});const mp=dp.direction&&dp.direction!==ap.direction,gp=ap.loop&&(dp.slidesPerView!==ap.slidesPerView||mp),vp=ap.loop;mp&&np&&_d.changeDirection(),extend$2(_d.params,dp);const xp=_d.params.enabled,Sp=_d.params.loop;Object.assign(_d,{allowTouchMove:_d.params.allowTouchMove,allowSlideNext:_d.params.allowSlideNext,allowSlidePrev:_d.params.allowSlidePrev}),hp&&!xp?_d.disable():!hp&&xp&&_d.enable(),_d.currentBreakpoint=up,_d.emit("_beforeBreakpoint",dp),np&&(gp?(_d.loopDestroy(),_d.loopCreate(rp),_d.updateSlides()):!vp&&Sp?(_d.loopCreate(rp),_d.updateSlides()):vp&&!Sp&&_d.loopDestroy()),_d.emit("breakpoint",dp)}function getBreakpoint(_d,rp,np){if(rp===void 0&&(rp="window"),!_d||rp==="container"&&!np)return;let ap=!1;const sp=getWindow(),lp=rp==="window"?sp.innerHeight:np.clientHeight,up=Object.keys(_d).map(cp=>{if(typeof cp=="string"&&cp.indexOf("@")===0){const dp=parseFloat(cp.substr(1));return{value:lp*dp,point:cp}}return{value:cp,point:cp}});up.sort((cp,dp)=>parseInt(cp.value,10)-parseInt(dp.value,10));for(let cp=0;cp<up.length;cp+=1){const{point:dp,value:fp}=up[cp];rp==="window"?sp.matchMedia(`(min-width: ${fp}px)`).matches&&(ap=dp):fp<=np.clientWidth&&(ap=dp)}return ap||"max"}var breakpoints={setBreakpoint,getBreakpoint};function prepareClasses(_d,rp){const np=[];return _d.forEach(ap=>{typeof ap=="object"?Object.keys(ap).forEach(sp=>{ap[sp]&&np.push(rp+sp)}):typeof ap=="string"&&np.push(rp+ap)}),np}function addClasses(){const _d=this,{classNames:rp,params:np,rtl:ap,el:sp,device:lp}=_d,up=prepareClasses(["initialized",np.direction,{"free-mode":_d.params.freeMode&&np.freeMode.enabled},{autoheight:np.autoHeight},{rtl:ap},{grid:np.grid&&np.grid.rows>1},{"grid-column":np.grid&&np.grid.rows>1&&np.grid.fill==="column"},{android:lp.android},{ios:lp.ios},{"css-mode":np.cssMode},{centered:np.cssMode&&np.centeredSlides},{"watch-progress":np.watchSlidesProgress}],np.containerModifierClass);rp.push(...up),sp.classList.add(...rp),_d.emitContainerClasses()}function removeClasses(){const _d=this,{el:rp,classNames:np}=_d;rp.classList.remove(...np),_d.emitContainerClasses()}var classes={addClasses,removeClasses};function checkOverflow(){const _d=this,{isLocked:rp,params:np}=_d,{slidesOffsetBefore:ap}=np;if(ap){const sp=_d.slides.length-1,lp=_d.slidesGrid[sp]+_d.slidesSizesGrid[sp]+ap*2;_d.isLocked=_d.size>lp}else _d.isLocked=_d.snapGrid.length===1;np.allowSlideNext===!0&&(_d.allowSlideNext=!_d.isLocked),np.allowSlidePrev===!0&&(_d.allowSlidePrev=!_d.isLocked),rp&&rp!==_d.isLocked&&(_d.isEnd=!1),rp!==_d.isLocked&&_d.emit(_d.isLocked?"lock":"unlock")}var checkOverflow$1={checkOverflow},defaults$2={init:!0,direction:"horizontal",oneWayMovement:!1,touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function moduleExtendParams(_d,rp){return function(ap){ap===void 0&&(ap={});const sp=Object.keys(ap)[0],lp=ap[sp];if(typeof lp!="object"||lp===null){extend$2(rp,ap);return}if(_d[sp]===!0&&(_d[sp]={enabled:!0}),sp==="navigation"&&_d[sp]&&_d[sp].enabled&&!_d[sp].prevEl&&!_d[sp].nextEl&&(_d[sp].auto=!0),["pagination","scrollbar"].indexOf(sp)>=0&&_d[sp]&&_d[sp].enabled&&!_d[sp].el&&(_d[sp].auto=!0),!(sp in _d&&"enabled"in lp)){extend$2(rp,ap);return}typeof _d[sp]=="object"&&!("enabled"in _d[sp])&&(_d[sp].enabled=!0),_d[sp]||(_d[sp]={enabled:!1}),extend$2(rp,ap)}}const prototypes={eventsEmitter,update,translate,transition,slide,loop,grabCursor,events:events$1$1,breakpoints,checkOverflow:checkOverflow$1,classes},extendedDefaults={};let Swiper$1=class jm{constructor(){let rp,np;for(var ap=arguments.length,sp=new Array(ap),lp=0;lp<ap;lp++)sp[lp]=arguments[lp];sp.length===1&&sp[0].constructor&&Object.prototype.toString.call(sp[0]).slice(8,-1)==="Object"?np=sp[0]:[rp,np]=sp,np||(np={}),np=extend$2({},np),rp&&!np.el&&(np.el=rp);const up=getDocument();if(np.el&&typeof np.el=="string"&&up.querySelectorAll(np.el).length>1){const pp=[];return up.querySelectorAll(np.el).forEach(hp=>{const mp=extend$2({},np,{el:hp});pp.push(new jm(mp))}),pp}const cp=this;cp.__swiper__=!0,cp.support=getSupport(),cp.device=getDevice({userAgent:np.userAgent}),cp.browser=getBrowser(),cp.eventsListeners={},cp.eventsAnyListeners=[],cp.modules=[...cp.__modules__],np.modules&&Array.isArray(np.modules)&&cp.modules.push(...np.modules);const dp={};cp.modules.forEach(pp=>{pp({params:np,swiper:cp,extendParams:moduleExtendParams(np,dp),on:cp.on.bind(cp),once:cp.once.bind(cp),off:cp.off.bind(cp),emit:cp.emit.bind(cp)})});const fp=extend$2({},defaults$2,dp);return cp.params=extend$2({},fp,extendedDefaults,np),cp.originalParams=extend$2({},cp.params),cp.passedParams=extend$2({},np),cp.params&&cp.params.on&&Object.keys(cp.params.on).forEach(pp=>{cp.on(pp,cp.params.on[pp])}),cp.params&&cp.params.onAny&&cp.onAny(cp.params.onAny),Object.assign(cp,{enabled:cp.params.enabled,el:rp,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return cp.params.direction==="horizontal"},isVertical(){return cp.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:cp.params.allowSlideNext,allowSlidePrev:cp.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:cp.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:cp.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),cp.emit("_swiper"),cp.params.init&&cp.init(),cp}getDirectionLabel(rp){return this.isHorizontal()?rp:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[rp]}getSlideIndex(rp){const{slidesEl:np,params:ap}=this,sp=elementChildren(np,`.${ap.slideClass}, swiper-slide`),lp=elementIndex(sp[0]);return elementIndex(rp)-lp}getSlideIndexByData(rp){return this.getSlideIndex(this.slides.filter(np=>np.getAttribute("data-swiper-slide-index")*1===rp)[0])}recalcSlides(){const rp=this,{slidesEl:np,params:ap}=rp;rp.slides=elementChildren(np,`.${ap.slideClass}, swiper-slide`)}enable(){const rp=this;rp.enabled||(rp.enabled=!0,rp.params.grabCursor&&rp.setGrabCursor(),rp.emit("enable"))}disable(){const rp=this;rp.enabled&&(rp.enabled=!1,rp.params.grabCursor&&rp.unsetGrabCursor(),rp.emit("disable"))}setProgress(rp,np){const ap=this;rp=Math.min(Math.max(rp,0),1);const sp=ap.minTranslate(),up=(ap.maxTranslate()-sp)*rp+sp;ap.translateTo(up,typeof np>"u"?0:np),ap.updateActiveIndex(),ap.updateSlidesClasses()}emitContainerClasses(){const rp=this;if(!rp.params._emitClasses||!rp.el)return;const np=rp.el.className.split(" ").filter(ap=>ap.indexOf("swiper")===0||ap.indexOf(rp.params.containerModifierClass)===0);rp.emit("_containerClasses",np.join(" "))}getSlideClasses(rp){const np=this;return np.destroyed?"":rp.className.split(" ").filter(ap=>ap.indexOf("swiper-slide")===0||ap.indexOf(np.params.slideClass)===0).join(" ")}emitSlidesClasses(){const rp=this;if(!rp.params._emitClasses||!rp.el)return;const np=[];rp.slides.forEach(ap=>{const sp=rp.getSlideClasses(ap);np.push({slideEl:ap,classNames:sp}),rp.emit("_slideClass",ap,sp)}),rp.emit("_slideClasses",np)}slidesPerViewDynamic(rp,np){rp===void 0&&(rp="current"),np===void 0&&(np=!1);const ap=this,{params:sp,slides:lp,slidesGrid:up,slidesSizesGrid:cp,size:dp,activeIndex:fp}=ap;let pp=1;if(typeof sp.slidesPerView=="number")return sp.slidesPerView;if(sp.centeredSlides){let hp=lp[fp]?lp[fp].swiperSlideSize:0,mp;for(let gp=fp+1;gp<lp.length;gp+=1)lp[gp]&&!mp&&(hp+=lp[gp].swiperSlideSize,pp+=1,hp>dp&&(mp=!0));for(let gp=fp-1;gp>=0;gp-=1)lp[gp]&&!mp&&(hp+=lp[gp].swiperSlideSize,pp+=1,hp>dp&&(mp=!0))}else if(rp==="current")for(let hp=fp+1;hp<lp.length;hp+=1)(np?up[hp]+cp[hp]-up[fp]<dp:up[hp]-up[fp]<dp)&&(pp+=1);else for(let hp=fp-1;hp>=0;hp-=1)up[fp]-up[hp]<dp&&(pp+=1);return pp}update(){const rp=this;if(!rp||rp.destroyed)return;const{snapGrid:np,params:ap}=rp;ap.breakpoints&&rp.setBreakpoint(),[...rp.el.querySelectorAll('[loading="lazy"]')].forEach(up=>{up.complete&&processLazyPreloader(rp,up)}),rp.updateSize(),rp.updateSlides(),rp.updateProgress(),rp.updateSlidesClasses();function sp(){const up=rp.rtlTranslate?rp.translate*-1:rp.translate,cp=Math.min(Math.max(up,rp.maxTranslate()),rp.minTranslate());rp.setTranslate(cp),rp.updateActiveIndex(),rp.updateSlidesClasses()}let lp;if(ap.freeMode&&ap.freeMode.enabled&&!ap.cssMode)sp(),ap.autoHeight&&rp.updateAutoHeight();else{if((ap.slidesPerView==="auto"||ap.slidesPerView>1)&&rp.isEnd&&!ap.centeredSlides){const up=rp.virtual&&ap.virtual.enabled?rp.virtual.slides:rp.slides;lp=rp.slideTo(up.length-1,0,!1,!0)}else lp=rp.slideTo(rp.activeIndex,0,!1,!0);lp||sp()}ap.watchOverflow&&np!==rp.snapGrid&&rp.checkOverflow(),rp.emit("update")}changeDirection(rp,np){np===void 0&&(np=!0);const ap=this,sp=ap.params.direction;return rp||(rp=sp==="horizontal"?"vertical":"horizontal"),rp===sp||rp!=="horizontal"&&rp!=="vertical"||(ap.el.classList.remove(`${ap.params.containerModifierClass}${sp}`),ap.el.classList.add(`${ap.params.containerModifierClass}${rp}`),ap.emitContainerClasses(),ap.params.direction=rp,ap.slides.forEach(lp=>{rp==="vertical"?lp.style.width="":lp.style.height=""}),ap.emit("changeDirection"),np&&ap.update()),ap}changeLanguageDirection(rp){const np=this;np.rtl&&rp==="rtl"||!np.rtl&&rp==="ltr"||(np.rtl=rp==="rtl",np.rtlTranslate=np.params.direction==="horizontal"&&np.rtl,np.rtl?(np.el.classList.add(`${np.params.containerModifierClass}rtl`),np.el.dir="rtl"):(np.el.classList.remove(`${np.params.containerModifierClass}rtl`),np.el.dir="ltr"),np.update())}mount(rp){const np=this;if(np.mounted)return!0;let ap=rp||np.params.el;if(typeof ap=="string"&&(ap=document.querySelector(ap)),!ap)return!1;ap.swiper=np,ap.parentNode&&ap.parentNode.host&&ap.parentNode.host.nodeName==="SWIPER-CONTAINER"&&(np.isElement=!0);const sp=()=>`.${(np.params.wrapperClass||"").trim().split(" ").join(".")}`;let up=ap&&ap.shadowRoot&&ap.shadowRoot.querySelector?ap.shadowRoot.querySelector(sp()):elementChildren(ap,sp())[0];return!up&&np.params.createElements&&(up=createElement("div",np.params.wrapperClass),ap.append(up),elementChildren(ap,`.${np.params.slideClass}`).forEach(cp=>{up.append(cp)})),Object.assign(np,{el:ap,wrapperEl:up,slidesEl:np.isElement&&!ap.parentNode.host.slideSlots?ap.parentNode.host:up,hostEl:np.isElement?ap.parentNode.host:ap,mounted:!0,rtl:ap.dir.toLowerCase()==="rtl"||elementStyle(ap,"direction")==="rtl",rtlTranslate:np.params.direction==="horizontal"&&(ap.dir.toLowerCase()==="rtl"||elementStyle(ap,"direction")==="rtl"),wrongRTL:elementStyle(up,"display")==="-webkit-box"}),!0}init(rp){const np=this;if(np.initialized||np.mount(rp)===!1)return np;np.emit("beforeInit"),np.params.breakpoints&&np.setBreakpoint(),np.addClasses(),np.updateSize(),np.updateSlides(),np.params.watchOverflow&&np.checkOverflow(),np.params.grabCursor&&np.enabled&&np.setGrabCursor(),np.params.loop&&np.virtual&&np.params.virtual.enabled?np.slideTo(np.params.initialSlide+np.virtual.slidesBefore,0,np.params.runCallbacksOnInit,!1,!0):np.slideTo(np.params.initialSlide,0,np.params.runCallbacksOnInit,!1,!0),np.params.loop&&np.loopCreate(),np.attachEvents();const sp=[...np.el.querySelectorAll('[loading="lazy"]')];return np.isElement&&sp.push(...np.hostEl.querySelectorAll('[loading="lazy"]')),sp.forEach(lp=>{lp.complete?processLazyPreloader(np,lp):lp.addEventListener("load",up=>{processLazyPreloader(np,up.target)})}),preload(np),np.initialized=!0,preload(np),np.emit("init"),np.emit("afterInit"),np}destroy(rp,np){rp===void 0&&(rp=!0),np===void 0&&(np=!0);const ap=this,{params:sp,el:lp,wrapperEl:up,slides:cp}=ap;return typeof ap.params>"u"||ap.destroyed||(ap.emit("beforeDestroy"),ap.initialized=!1,ap.detachEvents(),sp.loop&&ap.loopDestroy(),np&&(ap.removeClasses(),lp.removeAttribute("style"),up.removeAttribute("style"),cp&&cp.length&&cp.forEach(dp=>{dp.classList.remove(sp.slideVisibleClass,sp.slideFullyVisibleClass,sp.slideActiveClass,sp.slideNextClass,sp.slidePrevClass),dp.removeAttribute("style"),dp.removeAttribute("data-swiper-slide-index")})),ap.emit("destroy"),Object.keys(ap.eventsListeners).forEach(dp=>{ap.off(dp)}),rp!==!1&&(ap.el.swiper=null,deleteProps(ap)),ap.destroyed=!0),null}static extendDefaults(rp){extend$2(extendedDefaults,rp)}static get extendedDefaults(){return extendedDefaults}static get defaults(){return defaults$2}static installModule(rp){jm.prototype.__modules__||(jm.prototype.__modules__=[]);const np=jm.prototype.__modules__;typeof rp=="function"&&np.indexOf(rp)<0&&np.push(rp)}static use(rp){return Array.isArray(rp)?(rp.forEach(np=>jm.installModule(np)),jm):(jm.installModule(rp),jm)}};Object.keys(prototypes).forEach(_d=>{Object.keys(prototypes[_d]).forEach(rp=>{Swiper$1.prototype[rp]=prototypes[_d][rp]})});Swiper$1.use([Resize,Observer]);const paramsList=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","breakpointsBase","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopAdditionalSlides","loopAddBlankSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideFullyVisibleClass","slideNextClass","slidePrevClass","slideBlankClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function isObject$6(_d){return typeof _d=="object"&&_d!==null&&_d.constructor&&Object.prototype.toString.call(_d).slice(8,-1)==="Object"&&!_d.__swiper__}function extend$1(_d,rp){const np=["__proto__","constructor","prototype"];Object.keys(rp).filter(ap=>np.indexOf(ap)<0).forEach(ap=>{typeof _d[ap]>"u"?_d[ap]=rp[ap]:isObject$6(rp[ap])&&isObject$6(_d[ap])&&Object.keys(rp[ap]).length>0?rp[ap].__swiper__?_d[ap]=rp[ap]:extend$1(_d[ap],rp[ap]):_d[ap]=rp[ap]})}function needsNavigation(_d){return _d===void 0&&(_d={}),_d.navigation&&typeof _d.navigation.nextEl>"u"&&typeof _d.navigation.prevEl>"u"}function needsPagination(_d){return _d===void 0&&(_d={}),_d.pagination&&typeof _d.pagination.el>"u"}function needsScrollbar(_d){return _d===void 0&&(_d={}),_d.scrollbar&&typeof _d.scrollbar.el>"u"}function uniqueClasses(_d){_d===void 0&&(_d="");const rp=_d.split(" ").map(ap=>ap.trim()).filter(ap=>!!ap),np=[];return rp.forEach(ap=>{np.indexOf(ap)<0&&np.push(ap)}),np.join(" ")}function wrapperClass(_d){return _d===void 0&&(_d=""),_d?_d.includes("swiper-wrapper")?_d:`swiper-wrapper ${_d}`:"swiper-wrapper"}function updateSwiper(_d){let{swiper:rp,slides:np,passedParams:ap,changedParams:sp,nextEl:lp,prevEl:up,scrollbarEl:cp,paginationEl:dp}=_d;const fp=sp.filter(Ap=>Ap!=="children"&&Ap!=="direction"&&Ap!=="wrapperClass"),{params:pp,pagination:hp,navigation:mp,scrollbar:gp,virtual:vp,thumbs:xp}=rp;let Sp,yp,bp,Ep,wp,_p,Rp,$p;sp.includes("thumbs")&&ap.thumbs&&ap.thumbs.swiper&&pp.thumbs&&!pp.thumbs.swiper&&(Sp=!0),sp.includes("controller")&&ap.controller&&ap.controller.control&&pp.controller&&!pp.controller.control&&(yp=!0),sp.includes("pagination")&&ap.pagination&&(ap.pagination.el||dp)&&(pp.pagination||pp.pagination===!1)&&hp&&!hp.el&&(bp=!0),sp.includes("scrollbar")&&ap.scrollbar&&(ap.scrollbar.el||cp)&&(pp.scrollbar||pp.scrollbar===!1)&&gp&&!gp.el&&(Ep=!0),sp.includes("navigation")&&ap.navigation&&(ap.navigation.prevEl||up)&&(ap.navigation.nextEl||lp)&&(pp.navigation||pp.navigation===!1)&&mp&&!mp.prevEl&&!mp.nextEl&&(wp=!0);const Cp=Ap=>{rp[Ap]&&(rp[Ap].destroy(),Ap==="navigation"?(rp.isElement&&(rp[Ap].prevEl.remove(),rp[Ap].nextEl.remove()),pp[Ap].prevEl=void 0,pp[Ap].nextEl=void 0,rp[Ap].prevEl=void 0,rp[Ap].nextEl=void 0):(rp.isElement&&rp[Ap].el.remove(),pp[Ap].el=void 0,rp[Ap].el=void 0))};sp.includes("loop")&&rp.isElement&&(pp.loop&&!ap.loop?_p=!0:!pp.loop&&ap.loop?Rp=!0:$p=!0),fp.forEach(Ap=>{if(isObject$6(pp[Ap])&&isObject$6(ap[Ap]))Object.assign(pp[Ap],ap[Ap]),(Ap==="navigation"||Ap==="pagination"||Ap==="scrollbar")&&"enabled"in ap[Ap]&&!ap[Ap].enabled&&Cp(Ap);else{const Op=ap[Ap];(Op===!0||Op===!1)&&(Ap==="navigation"||Ap==="pagination"||Ap==="scrollbar")?Op===!1&&Cp(Ap):pp[Ap]=ap[Ap]}}),fp.includes("controller")&&!yp&&rp.controller&&rp.controller.control&&pp.controller&&pp.controller.control&&(rp.controller.control=pp.controller.control),sp.includes("children")&&np&&vp&&pp.virtual.enabled?(vp.slides=np,vp.update(!0)):sp.includes("virtual")&&vp&&pp.virtual.enabled&&(np&&(vp.slides=np),vp.update(!0)),sp.includes("children")&&np&&pp.loop&&($p=!0),Sp&&xp.init()&&xp.update(!0),yp&&(rp.controller.control=pp.controller.control),bp&&(rp.isElement&&(!dp||typeof dp=="string")&&(dp=document.createElement("div"),dp.classList.add("swiper-pagination"),dp.part.add("pagination"),rp.el.appendChild(dp)),dp&&(pp.pagination.el=dp),hp.init(),hp.render(),hp.update()),Ep&&(rp.isElement&&(!cp||typeof cp=="string")&&(cp=document.createElement("div"),cp.classList.add("swiper-scrollbar"),cp.part.add("scrollbar"),rp.el.appendChild(cp)),cp&&(pp.scrollbar.el=cp),gp.init(),gp.updateSize(),gp.setTranslate()),wp&&(rp.isElement&&((!lp||typeof lp=="string")&&(lp=document.createElement("div"),lp.classList.add("swiper-button-next"),lp.innerHTML=rp.hostEl.constructor.nextButtonSvg,lp.part.add("button-next"),rp.el.appendChild(lp)),(!up||typeof up=="string")&&(up=document.createElement("div"),up.classList.add("swiper-button-prev"),up.innerHTML=rp.hostEl.constructor.prevButtonSvg,up.part.add("button-prev"),rp.el.appendChild(up))),lp&&(pp.navigation.nextEl=lp),up&&(pp.navigation.prevEl=up),mp.init(),mp.update()),sp.includes("allowSlideNext")&&(rp.allowSlideNext=ap.allowSlideNext),sp.includes("allowSlidePrev")&&(rp.allowSlidePrev=ap.allowSlidePrev),sp.includes("direction")&&rp.changeDirection(ap.direction,!1),(_p||$p)&&rp.loopDestroy(),(Rp||$p)&&rp.loopCreate(),rp.update()}function getParams(_d,rp){_d===void 0&&(_d={}),rp===void 0&&(rp=!0);const np={on:{}},ap={},sp={};extend$1(np,defaults$2),np._emitClasses=!0,np.init=!1;const lp={},up=paramsList.map(dp=>dp.replace(/_/,"")),cp=Object.assign({},_d);return Object.keys(cp).forEach(dp=>{typeof _d[dp]>"u"||(up.indexOf(dp)>=0?isObject$6(_d[dp])?(np[dp]={},sp[dp]={},extend$1(np[dp],_d[dp]),extend$1(sp[dp],_d[dp])):(np[dp]=_d[dp],sp[dp]=_d[dp]):dp.search(/on[A-Z]/)===0&&typeof _d[dp]=="function"?rp?ap[`${dp[2].toLowerCase()}${dp.substr(3)}`]=_d[dp]:np.on[`${dp[2].toLowerCase()}${dp.substr(3)}`]=_d[dp]:lp[dp]=_d[dp])}),["navigation","pagination","scrollbar"].forEach(dp=>{np[dp]===!0&&(np[dp]={}),np[dp]===!1&&delete np[dp]}),{params:np,passedParams:sp,rest:lp,events:ap}}function mountSwiper(_d,rp){let{el:np,nextEl:ap,prevEl:sp,paginationEl:lp,scrollbarEl:up,swiper:cp}=_d;needsNavigation(rp)&&ap&&sp&&(cp.params.navigation.nextEl=ap,cp.originalParams.navigation.nextEl=ap,cp.params.navigation.prevEl=sp,cp.originalParams.navigation.prevEl=sp),needsPagination(rp)&&lp&&(cp.params.pagination.el=lp,cp.originalParams.pagination.el=lp),needsScrollbar(rp)&&up&&(cp.params.scrollbar.el=up,cp.originalParams.scrollbar.el=up),cp.init(np)}function getChangedParams(_d,rp,np,ap,sp){const lp=[];if(!rp)return lp;const up=dp=>{lp.indexOf(dp)<0&&lp.push(dp)};if(np&&ap){const dp=ap.map(sp),fp=np.map(sp);dp.join("")!==fp.join("")&&up("children"),ap.length!==np.length&&up("children")}return paramsList.filter(dp=>dp[0]==="_").map(dp=>dp.replace(/_/,"")).forEach(dp=>{if(dp in _d&&dp in rp)if(isObject$6(_d[dp])&&isObject$6(rp[dp])){const fp=Object.keys(_d[dp]),pp=Object.keys(rp[dp]);fp.length!==pp.length?up(dp):(fp.forEach(hp=>{_d[dp][hp]!==rp[dp][hp]&&up(dp)}),pp.forEach(hp=>{_d[dp][hp]!==rp[dp][hp]&&up(dp)}))}else _d[dp]!==rp[dp]&&up(dp)}),lp}const updateOnVirtualData=_d=>{!_d||_d.destroyed||!_d.params.virtual||_d.params.virtual&&!_d.params.virtual.enabled||(_d.updateSlides(),_d.updateProgress(),_d.updateSlidesClasses(),_d.parallax&&_d.params.parallax&&_d.params.parallax.enabled&&_d.parallax.setTranslate())};function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(_d){for(var rp=1;rp<arguments.length;rp++){var np=arguments[rp];for(var ap in np)Object.prototype.hasOwnProperty.call(np,ap)&&(_d[ap]=np[ap])}return _d},_extends$2.apply(this,arguments)}function isChildSwiperSlide(_d){return _d.type&&_d.type.displayName&&_d.type.displayName.includes("SwiperSlide")}function processChildren(_d){const rp=[];return React.Children.toArray(_d).forEach(np=>{isChildSwiperSlide(np)?rp.push(np):np.props&&np.props.children&&processChildren(np.props.children).forEach(ap=>rp.push(ap))}),rp}function getChildren(_d){const rp=[],np={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return React.Children.toArray(_d).forEach(ap=>{if(isChildSwiperSlide(ap))rp.push(ap);else if(ap.props&&ap.props.slot&&np[ap.props.slot])np[ap.props.slot].push(ap);else if(ap.props&&ap.props.children){const sp=processChildren(ap.props.children);sp.length>0?sp.forEach(lp=>rp.push(lp)):np["container-end"].push(ap)}else np["container-end"].push(ap)}),{slides:rp,slots:np}}function renderVirtual(_d,rp,np){if(!np)return null;const ap=pp=>{let hp=pp;return pp<0?hp=rp.length+pp:hp>=rp.length&&(hp=hp-rp.length),hp},sp=_d.isHorizontal()?{[_d.rtlTranslate?"right":"left"]:`${np.offset}px`}:{top:`${np.offset}px`},{from:lp,to:up}=np,cp=_d.params.loop?-rp.length:0,dp=_d.params.loop?rp.length*2:rp.length,fp=[];for(let pp=cp;pp<dp;pp+=1)pp>=lp&&pp<=up&&fp.push(rp[ap(pp)]);return fp.map((pp,hp)=>React.cloneElement(pp,{swiper:_d,style:sp,key:`slide-${hp}`}))}function useIsomorphicLayoutEffect$1(_d,rp){return typeof window>"u"?reactExports.useEffect(_d,rp):reactExports.useLayoutEffect(_d,rp)}const SwiperSlideContext=reactExports.createContext(null),SwiperContext=reactExports.createContext(null),Swiper=reactExports.forwardRef(function(_d,rp){let{className:np,tag:ap="div",wrapperTag:sp="div",children:lp,onSwiper:up,...cp}=_d===void 0?{}:_d,dp=!1;const[fp,pp]=reactExports.useState("swiper"),[hp,mp]=reactExports.useState(null),[gp,vp]=reactExports.useState(!1),xp=reactExports.useRef(!1),Sp=reactExports.useRef(null),yp=reactExports.useRef(null),bp=reactExports.useRef(null),Ep=reactExports.useRef(null),wp=reactExports.useRef(null),_p=reactExports.useRef(null),Rp=reactExports.useRef(null),$p=reactExports.useRef(null),{params:Cp,passedParams:Ap,rest:Op,events:Lp}=getParams(cp),{slides:Mp,slots:kp}=getChildren(lp),Dp=()=>{vp(!gp)};Object.assign(Cp.on,{_containerClasses(Np,jp){pp(jp)}});const Fp=()=>{Object.assign(Cp.on,Lp),dp=!0;const Np={...Cp};if(delete Np.wrapperClass,yp.current=new Swiper$1(Np),yp.current.virtual&&yp.current.params.virtual.enabled){yp.current.virtual.slides=Mp;const jp={cache:!1,slides:Mp,renderExternal:mp,renderExternalUpdate:!1};extend$1(yp.current.params.virtual,jp),extend$1(yp.current.originalParams.virtual,jp)}};Sp.current||Fp(),yp.current&&yp.current.on("_beforeBreakpoint",Dp);const Ip=()=>{dp||!Lp||!yp.current||Object.keys(Lp).forEach(Np=>{yp.current.on(Np,Lp[Np])})},Pp=()=>{!Lp||!yp.current||Object.keys(Lp).forEach(Np=>{yp.current.off(Np,Lp[Np])})};reactExports.useEffect(()=>()=>{yp.current&&yp.current.off("_beforeBreakpoint",Dp)}),reactExports.useEffect(()=>{!xp.current&&yp.current&&(yp.current.emitSlidesClasses(),xp.current=!0)}),useIsomorphicLayoutEffect$1(()=>{if(rp&&(rp.current=Sp.current),!!Sp.current)return yp.current.destroyed&&Fp(),mountSwiper({el:Sp.current,nextEl:wp.current,prevEl:_p.current,paginationEl:Rp.current,scrollbarEl:$p.current,swiper:yp.current},Cp),up&&up(yp.current),()=>{yp.current&&!yp.current.destroyed&&yp.current.destroy(!0,!1)}},[]),useIsomorphicLayoutEffect$1(()=>{Ip();const Np=getChangedParams(Ap,bp.current,Mp,Ep.current,jp=>jp.key);return bp.current=Ap,Ep.current=Mp,Np.length&&yp.current&&!yp.current.destroyed&&updateSwiper({swiper:yp.current,slides:Mp,passedParams:Ap,changedParams:Np,nextEl:wp.current,prevEl:_p.current,scrollbarEl:$p.current,paginationEl:Rp.current}),()=>{Pp()}}),useIsomorphicLayoutEffect$1(()=>{updateOnVirtualData(yp.current)},[hp]);function Tp(){return Cp.virtual?renderVirtual(yp.current,Mp,hp):Mp.map((Np,jp)=>React.cloneElement(Np,{swiper:yp.current,swiperSlideIndex:jp}))}return React.createElement(ap,_extends$2({ref:Sp,className:uniqueClasses(`${fp}${np?` ${np}`:""}`)},Op),React.createElement(SwiperContext.Provider,{value:yp.current},kp["container-start"],React.createElement(sp,{className:wrapperClass(Cp.wrapperClass)},kp["wrapper-start"],Tp(),kp["wrapper-end"]),needsNavigation(Cp)&&React.createElement(React.Fragment,null,React.createElement("div",{ref:_p,className:"swiper-button-prev"}),React.createElement("div",{ref:wp,className:"swiper-button-next"})),needsScrollbar(Cp)&&React.createElement("div",{ref:$p,className:"swiper-scrollbar"}),needsPagination(Cp)&&React.createElement("div",{ref:Rp,className:"swiper-pagination"}),kp["container-end"]))});Swiper.displayName="Swiper";const SwiperSlide=reactExports.forwardRef(function(_d,rp){let{tag:np="div",children:ap,className:sp="",swiper:lp,zoom:up,lazy:cp,virtualIndex:dp,swiperSlideIndex:fp,...pp}=_d===void 0?{}:_d;const hp=reactExports.useRef(null),[mp,gp]=reactExports.useState("swiper-slide"),[vp,xp]=reactExports.useState(!1);function Sp(wp,_p,Rp){_p===hp.current&&gp(Rp)}useIsomorphicLayoutEffect$1(()=>{if(typeof fp<"u"&&(hp.current.swiperSlideIndex=fp),rp&&(rp.current=hp.current),!(!hp.current||!lp)){if(lp.destroyed){mp!=="swiper-slide"&&gp("swiper-slide");return}return lp.on("_slideClass",Sp),()=>{lp&&lp.off("_slideClass",Sp)}}}),useIsomorphicLayoutEffect$1(()=>{lp&&hp.current&&!lp.destroyed&&gp(lp.getSlideClasses(hp.current))},[lp]);const yp={isActive:mp.indexOf("swiper-slide-active")>=0,isVisible:mp.indexOf("swiper-slide-visible")>=0,isPrev:mp.indexOf("swiper-slide-prev")>=0,isNext:mp.indexOf("swiper-slide-next")>=0},bp=()=>typeof ap=="function"?ap(yp):ap,Ep=()=>{xp(!0)};return React.createElement(np,_extends$2({ref:hp,className:uniqueClasses(`${mp}${sp?` ${sp}`:""}`),"data-swiper-slide-index":dp,onLoad:Ep},pp),up&&React.createElement(SwiperSlideContext.Provider,{value:yp},React.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":typeof up=="number"?up:void 0},bp(),cp&&!vp&&React.createElement("div",{className:"swiper-lazy-preloader"}))),!up&&React.createElement(SwiperSlideContext.Provider,{value:yp},bp(),cp&&!vp&&React.createElement("div",{className:"swiper-lazy-preloader"})))});SwiperSlide.displayName="SwiperSlide";function createElementIfNotDefined(_d,rp,np,ap){return _d.params.createElements&&Object.keys(ap).forEach(sp=>{if(!np[sp]&&np.auto===!0){let lp=elementChildren(_d.el,`.${ap[sp]}`)[0];lp||(lp=createElement("div",ap[sp]),lp.className=ap[sp],_d.el.append(lp)),np[sp]=lp,rp[sp]=lp}}),np}function classesToSelector(_d){return _d===void 0&&(_d=""),`.${_d.trim().replace(/([\.:!+\/])/g,"\\$1").replace(/ /g,".")}`}function Pagination(_d){let{swiper:rp,extendParams:np,on:ap,emit:sp}=_d;const lp="swiper-pagination";np({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:bp=>bp,formatFractionTotal:bp=>bp,bulletClass:`${lp}-bullet`,bulletActiveClass:`${lp}-bullet-active`,modifierClass:`${lp}-`,currentClass:`${lp}-current`,totalClass:`${lp}-total`,hiddenClass:`${lp}-hidden`,progressbarFillClass:`${lp}-progressbar-fill`,progressbarOppositeClass:`${lp}-progressbar-opposite`,clickableClass:`${lp}-clickable`,lockClass:`${lp}-lock`,horizontalClass:`${lp}-horizontal`,verticalClass:`${lp}-vertical`,paginationDisabledClass:`${lp}-disabled`}}),rp.pagination={el:null,bullets:[]};let up,cp=0;const dp=bp=>(Array.isArray(bp)?bp:[bp]).filter(Ep=>!!Ep);function fp(){return!rp.params.pagination.el||!rp.pagination.el||Array.isArray(rp.pagination.el)&&rp.pagination.el.length===0}function pp(bp,Ep){const{bulletActiveClass:wp}=rp.params.pagination;bp&&(bp=bp[`${Ep==="prev"?"previous":"next"}ElementSibling`],bp&&(bp.classList.add(`${wp}-${Ep}`),bp=bp[`${Ep==="prev"?"previous":"next"}ElementSibling`],bp&&bp.classList.add(`${wp}-${Ep}-${Ep}`)))}function hp(bp){const Ep=bp.target.closest(classesToSelector(rp.params.pagination.bulletClass));if(!Ep)return;bp.preventDefault();const wp=elementIndex(Ep)*rp.params.slidesPerGroup;if(rp.params.loop){if(rp.realIndex===wp)return;rp.slideToLoop(wp)}else rp.slideTo(wp)}function mp(){const bp=rp.rtl,Ep=rp.params.pagination;if(fp())return;let wp=rp.pagination.el;wp=dp(wp);let _p,Rp;const $p=rp.virtual&&rp.params.virtual.enabled?rp.virtual.slides.length:rp.slides.length,Cp=rp.params.loop?Math.ceil($p/rp.params.slidesPerGroup):rp.snapGrid.length;if(rp.params.loop?(Rp=rp.previousRealIndex||0,_p=rp.params.slidesPerGroup>1?Math.floor(rp.realIndex/rp.params.slidesPerGroup):rp.realIndex):typeof rp.snapIndex<"u"?(_p=rp.snapIndex,Rp=rp.previousSnapIndex):(Rp=rp.previousIndex||0,_p=rp.activeIndex||0),Ep.type==="bullets"&&rp.pagination.bullets&&rp.pagination.bullets.length>0){const Ap=rp.pagination.bullets;let Op,Lp,Mp;if(Ep.dynamicBullets&&(up=elementOuterSize(Ap[0],rp.isHorizontal()?"width":"height",!0),wp.forEach(kp=>{kp.style[rp.isHorizontal()?"width":"height"]=`${up*(Ep.dynamicMainBullets+4)}px`}),Ep.dynamicMainBullets>1&&Rp!==void 0&&(cp+=_p-(Rp||0),cp>Ep.dynamicMainBullets-1?cp=Ep.dynamicMainBullets-1:cp<0&&(cp=0)),Op=Math.max(_p-cp,0),Lp=Op+(Math.min(Ap.length,Ep.dynamicMainBullets)-1),Mp=(Lp+Op)/2),Ap.forEach(kp=>{const Dp=[...["","-next","-next-next","-prev","-prev-prev","-main"].map(Fp=>`${Ep.bulletActiveClass}${Fp}`)].map(Fp=>typeof Fp=="string"&&Fp.includes(" ")?Fp.split(" "):Fp).flat();kp.classList.remove(...Dp)}),wp.length>1)Ap.forEach(kp=>{const Dp=elementIndex(kp);Dp===_p?kp.classList.add(...Ep.bulletActiveClass.split(" ")):rp.isElement&&kp.setAttribute("part","bullet"),Ep.dynamicBullets&&(Dp>=Op&&Dp<=Lp&&kp.classList.add(...`${Ep.bulletActiveClass}-main`.split(" ")),Dp===Op&&pp(kp,"prev"),Dp===Lp&&pp(kp,"next"))});else{const kp=Ap[_p];if(kp&&kp.classList.add(...Ep.bulletActiveClass.split(" ")),rp.isElement&&Ap.forEach((Dp,Fp)=>{Dp.setAttribute("part",Fp===_p?"bullet-active":"bullet")}),Ep.dynamicBullets){const Dp=Ap[Op],Fp=Ap[Lp];for(let Ip=Op;Ip<=Lp;Ip+=1)Ap[Ip]&&Ap[Ip].classList.add(...`${Ep.bulletActiveClass}-main`.split(" "));pp(Dp,"prev"),pp(Fp,"next")}}if(Ep.dynamicBullets){const kp=Math.min(Ap.length,Ep.dynamicMainBullets+4),Dp=(up*kp-up)/2-Mp*up,Fp=bp?"right":"left";Ap.forEach(Ip=>{Ip.style[rp.isHorizontal()?Fp:"top"]=`${Dp}px`})}}wp.forEach((Ap,Op)=>{if(Ep.type==="fraction"&&(Ap.querySelectorAll(classesToSelector(Ep.currentClass)).forEach(Lp=>{Lp.textContent=Ep.formatFractionCurrent(_p+1)}),Ap.querySelectorAll(classesToSelector(Ep.totalClass)).forEach(Lp=>{Lp.textContent=Ep.formatFractionTotal(Cp)})),Ep.type==="progressbar"){let Lp;Ep.progressbarOpposite?Lp=rp.isHorizontal()?"vertical":"horizontal":Lp=rp.isHorizontal()?"horizontal":"vertical";const Mp=(_p+1)/Cp;let kp=1,Dp=1;Lp==="horizontal"?kp=Mp:Dp=Mp,Ap.querySelectorAll(classesToSelector(Ep.progressbarFillClass)).forEach(Fp=>{Fp.style.transform=`translate3d(0,0,0) scaleX(${kp}) scaleY(${Dp})`,Fp.style.transitionDuration=`${rp.params.speed}ms`})}Ep.type==="custom"&&Ep.renderCustom?(Ap.innerHTML=Ep.renderCustom(rp,_p+1,Cp),Op===0&&sp("paginationRender",Ap)):(Op===0&&sp("paginationRender",Ap),sp("paginationUpdate",Ap)),rp.params.watchOverflow&&rp.enabled&&Ap.classList[rp.isLocked?"add":"remove"](Ep.lockClass)})}function gp(){const bp=rp.params.pagination;if(fp())return;const Ep=rp.virtual&&rp.params.virtual.enabled?rp.virtual.slides.length:rp.grid&&rp.params.grid.rows>1?rp.slides.length/Math.ceil(rp.params.grid.rows):rp.slides.length;let wp=rp.pagination.el;wp=dp(wp);let _p="";if(bp.type==="bullets"){let Rp=rp.params.loop?Math.ceil(Ep/rp.params.slidesPerGroup):rp.snapGrid.length;rp.params.freeMode&&rp.params.freeMode.enabled&&Rp>Ep&&(Rp=Ep);for(let $p=0;$p<Rp;$p+=1)bp.renderBullet?_p+=bp.renderBullet.call(rp,$p,bp.bulletClass):_p+=`<${bp.bulletElement} ${rp.isElement?'part="bullet"':""} class="${bp.bulletClass}"></${bp.bulletElement}>`}bp.type==="fraction"&&(bp.renderFraction?_p=bp.renderFraction.call(rp,bp.currentClass,bp.totalClass):_p=`<span class="${bp.currentClass}"></span> / <span class="${bp.totalClass}"></span>`),bp.type==="progressbar"&&(bp.renderProgressbar?_p=bp.renderProgressbar.call(rp,bp.progressbarFillClass):_p=`<span class="${bp.progressbarFillClass}"></span>`),rp.pagination.bullets=[],wp.forEach(Rp=>{bp.type!=="custom"&&(Rp.innerHTML=_p||""),bp.type==="bullets"&&rp.pagination.bullets.push(...Rp.querySelectorAll(classesToSelector(bp.bulletClass)))}),bp.type!=="custom"&&sp("paginationRender",wp[0])}function vp(){rp.params.pagination=createElementIfNotDefined(rp,rp.originalParams.pagination,rp.params.pagination,{el:"swiper-pagination"});const bp=rp.params.pagination;if(!bp.el)return;let Ep;typeof bp.el=="string"&&rp.isElement&&(Ep=rp.el.querySelector(bp.el)),!Ep&&typeof bp.el=="string"&&(Ep=[...document.querySelectorAll(bp.el)]),Ep||(Ep=bp.el),!(!Ep||Ep.length===0)&&(rp.params.uniqueNavElements&&typeof bp.el=="string"&&Array.isArray(Ep)&&Ep.length>1&&(Ep=[...rp.el.querySelectorAll(bp.el)],Ep.length>1&&(Ep=Ep.filter(wp=>elementParents(wp,".swiper")[0]===rp.el)[0])),Array.isArray(Ep)&&Ep.length===1&&(Ep=Ep[0]),Object.assign(rp.pagination,{el:Ep}),Ep=dp(Ep),Ep.forEach(wp=>{bp.type==="bullets"&&bp.clickable&&wp.classList.add(...(bp.clickableClass||"").split(" ")),wp.classList.add(bp.modifierClass+bp.type),wp.classList.add(rp.isHorizontal()?bp.horizontalClass:bp.verticalClass),bp.type==="bullets"&&bp.dynamicBullets&&(wp.classList.add(`${bp.modifierClass}${bp.type}-dynamic`),cp=0,bp.dynamicMainBullets<1&&(bp.dynamicMainBullets=1)),bp.type==="progressbar"&&bp.progressbarOpposite&&wp.classList.add(bp.progressbarOppositeClass),bp.clickable&&wp.addEventListener("click",hp),rp.enabled||wp.classList.add(bp.lockClass)}))}function xp(){const bp=rp.params.pagination;if(fp())return;let Ep=rp.pagination.el;Ep&&(Ep=dp(Ep),Ep.forEach(wp=>{wp.classList.remove(bp.hiddenClass),wp.classList.remove(bp.modifierClass+bp.type),wp.classList.remove(rp.isHorizontal()?bp.horizontalClass:bp.verticalClass),bp.clickable&&(wp.classList.remove(...(bp.clickableClass||"").split(" ")),wp.removeEventListener("click",hp))})),rp.pagination.bullets&&rp.pagination.bullets.forEach(wp=>wp.classList.remove(...bp.bulletActiveClass.split(" ")))}ap("changeDirection",()=>{if(!rp.pagination||!rp.pagination.el)return;const bp=rp.params.pagination;let{el:Ep}=rp.pagination;Ep=dp(Ep),Ep.forEach(wp=>{wp.classList.remove(bp.horizontalClass,bp.verticalClass),wp.classList.add(rp.isHorizontal()?bp.horizontalClass:bp.verticalClass)})}),ap("init",()=>{rp.params.pagination.enabled===!1?yp():(vp(),gp(),mp())}),ap("activeIndexChange",()=>{typeof rp.snapIndex>"u"&&mp()}),ap("snapIndexChange",()=>{mp()}),ap("snapGridLengthChange",()=>{gp(),mp()}),ap("destroy",()=>{xp()}),ap("enable disable",()=>{let{el:bp}=rp.pagination;bp&&(bp=dp(bp),bp.forEach(Ep=>Ep.classList[rp.enabled?"remove":"add"](rp.params.pagination.lockClass)))}),ap("lock unlock",()=>{mp()}),ap("click",(bp,Ep)=>{const wp=Ep.target,_p=dp(rp.pagination.el);if(rp.params.pagination.el&&rp.params.pagination.hideOnClick&&_p&&_p.length>0&&!wp.classList.contains(rp.params.pagination.bulletClass)){if(rp.navigation&&(rp.navigation.nextEl&&wp===rp.navigation.nextEl||rp.navigation.prevEl&&wp===rp.navigation.prevEl))return;const Rp=_p[0].classList.contains(rp.params.pagination.hiddenClass);sp(Rp===!0?"paginationShow":"paginationHide"),_p.forEach($p=>$p.classList.toggle(rp.params.pagination.hiddenClass))}});const Sp=()=>{rp.el.classList.remove(rp.params.pagination.paginationDisabledClass);let{el:bp}=rp.pagination;bp&&(bp=dp(bp),bp.forEach(Ep=>Ep.classList.remove(rp.params.pagination.paginationDisabledClass))),vp(),gp(),mp()},yp=()=>{rp.el.classList.add(rp.params.pagination.paginationDisabledClass);let{el:bp}=rp.pagination;bp&&(bp=dp(bp),bp.forEach(Ep=>Ep.classList.add(rp.params.pagination.paginationDisabledClass))),xp()};Object.assign(rp.pagination,{enable:Sp,disable:yp,render:gp,update:mp,init:vp,destroy:xp})}function effectInit(_d){const{effect:rp,swiper:np,on:ap,setTranslate:sp,setTransition:lp,overwriteParams:up,perspective:cp,recreateShadows:dp,getEffectParams:fp}=_d;ap("beforeInit",()=>{if(np.params.effect!==rp)return;np.classNames.push(`${np.params.containerModifierClass}${rp}`),cp&&cp()&&np.classNames.push(`${np.params.containerModifierClass}3d`);const hp=up?up():{};Object.assign(np.params,hp),Object.assign(np.originalParams,hp)}),ap("setTranslate",()=>{np.params.effect===rp&&sp()}),ap("setTransition",(hp,mp)=>{np.params.effect===rp&&lp(mp)}),ap("transitionEnd",()=>{if(np.params.effect===rp&&dp){if(!fp||!fp().slideShadows)return;np.slides.forEach(hp=>{hp.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(mp=>mp.remove())}),dp()}});let pp;ap("virtualUpdate",()=>{np.params.effect===rp&&(np.slides.length||(pp=!0),requestAnimationFrame(()=>{pp&&np.slides&&np.slides.length&&(sp(),pp=!1)}))})}function effectTarget(_d,rp){const np=getSlideTransformEl(rp);return np!==rp&&(np.style.backfaceVisibility="hidden",np.style["-webkit-backface-visibility"]="hidden"),np}function effectVirtualTransitionEnd(_d){let{swiper:rp,duration:np,transformElements:ap,allSlides:sp}=_d;const{activeIndex:lp}=rp,up=cp=>cp.parentElement?cp.parentElement:rp.slides.filter(fp=>fp.shadowRoot&&fp.shadowRoot===cp.parentNode)[0];if(rp.params.virtualTranslate&&np!==0){let cp=!1,dp;sp?dp=ap:dp=ap.filter(fp=>{const pp=fp.classList.contains("swiper-slide-transform")?up(fp):fp;return rp.getSlideIndex(pp)===lp}),dp.forEach(fp=>{elementTransitionEnd(fp,()=>{if(cp||!rp||rp.destroyed)return;cp=!0,rp.animating=!1;const pp=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});rp.wrapperEl.dispatchEvent(pp)})})}}function createShadow$1(_d,rp,np){const ap=`swiper-slide-shadow${np?`-${np}`:""}${_d?` swiper-slide-shadow-${_d}`:""}`,sp=getSlideTransformEl(rp);let lp=sp.querySelector(`.${ap.split(" ").join(".")}`);return lp||(lp=createElement("div",ap.split(" ")),sp.append(lp)),lp}function EffectCoverflow(_d){let{swiper:rp,extendParams:np,on:ap}=_d;np({coverflowEffect:{rotate:50,stretch:0,depth:100,scale:1,modifier:1,slideShadows:!0}}),effectInit({effect:"coverflow",swiper:rp,on:ap,setTranslate:()=>{const{width:up,height:cp,slides:dp,slidesSizesGrid:fp}=rp,pp=rp.params.coverflowEffect,hp=rp.isHorizontal(),mp=rp.translate,gp=hp?-mp+up/2:-mp+cp/2,vp=hp?pp.rotate:-pp.rotate,xp=pp.depth;for(let Sp=0,yp=dp.length;Sp<yp;Sp+=1){const bp=dp[Sp],Ep=fp[Sp],wp=bp.swiperSlideOffset,_p=(gp-wp-Ep/2)/Ep,Rp=typeof pp.modifier=="function"?pp.modifier(_p):_p*pp.modifier;let $p=hp?vp*Rp:0,Cp=hp?0:vp*Rp,Ap=-xp*Math.abs(Rp),Op=pp.stretch;typeof Op=="string"&&Op.indexOf("%")!==-1&&(Op=parseFloat(pp.stretch)/100*Ep);let Lp=hp?0:Op*Rp,Mp=hp?Op*Rp:0,kp=1-(1-pp.scale)*Math.abs(Rp);Math.abs(Mp)<.001&&(Mp=0),Math.abs(Lp)<.001&&(Lp=0),Math.abs(Ap)<.001&&(Ap=0),Math.abs($p)<.001&&($p=0),Math.abs(Cp)<.001&&(Cp=0),Math.abs(kp)<.001&&(kp=0),rp.browser&&rp.browser.isSafari&&(Math.abs($p)/90%2===1&&($p+=.001),Math.abs(Cp)/90%2===1&&(Cp+=.001));const Dp=`translate3d(${Mp}px,${Lp}px,${Ap}px)  rotateX(${Cp}deg) rotateY(${$p}deg) scale(${kp})`,Fp=effectTarget(pp,bp);if(Fp.style.transform=Dp,bp.style.zIndex=-Math.abs(Math.round(Rp))+1,pp.slideShadows){let Ip=hp?bp.querySelector(".swiper-slide-shadow-left"):bp.querySelector(".swiper-slide-shadow-top"),Pp=hp?bp.querySelector(".swiper-slide-shadow-right"):bp.querySelector(".swiper-slide-shadow-bottom");Ip||(Ip=createShadow$1("coverflow",bp,hp?"left":"top")),Pp||(Pp=createShadow$1("coverflow",bp,hp?"right":"bottom")),Ip&&(Ip.style.opacity=Rp>0?Rp:0),Pp&&(Pp.style.opacity=-Rp>0?-Rp:0)}}},setTransition:up=>{rp.slides.map(dp=>getSlideTransformEl(dp)).forEach(dp=>{dp.style.transitionDuration=`${up}ms`,dp.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(fp=>{fp.style.transitionDuration=`${up}ms`})})},perspective:()=>!0,overwriteParams:()=>({watchSlidesProgress:!0})})}function EffectCards(_d){let{swiper:rp,extendParams:np,on:ap}=_d;np({cardsEffect:{slideShadows:!0,rotate:!0,perSlideRotate:2,perSlideOffset:8}}),effectInit({effect:"cards",swiper:rp,on:ap,setTranslate:()=>{const{slides:up,activeIndex:cp,rtlTranslate:dp}=rp,fp=rp.params.cardsEffect,{startTranslate:pp,isTouched:hp}=rp.touchEventsData,mp=dp?-rp.translate:rp.translate;for(let gp=0;gp<up.length;gp+=1){const vp=up[gp],xp=vp.progress,Sp=Math.min(Math.max(xp,-4),4);let yp=vp.swiperSlideOffset;rp.params.centeredSlides&&!rp.params.cssMode&&(rp.wrapperEl.style.transform=`translateX(${rp.minTranslate()}px)`),rp.params.centeredSlides&&rp.params.cssMode&&(yp-=up[0].swiperSlideOffset);let bp=rp.params.cssMode?-yp-rp.translate:-yp,Ep=0;const wp=-100*Math.abs(Sp);let _p=1,Rp=-fp.perSlideRotate*Sp,$p=fp.perSlideOffset-Math.abs(Sp)*.75;const Cp=rp.virtual&&rp.params.virtual.enabled?rp.virtual.from+gp:gp,Ap=(Cp===cp||Cp===cp-1)&&Sp>0&&Sp<1&&(hp||rp.params.cssMode)&&mp<pp,Op=(Cp===cp||Cp===cp+1)&&Sp<0&&Sp>-1&&(hp||rp.params.cssMode)&&mp>pp;if(Ap||Op){const Dp=(1-Math.abs((Math.abs(Sp)-.5)/.5))**.5;Rp+=-28*Sp*Dp,_p+=-.5*Dp,$p+=96*Dp,Ep=`${-25*Dp*Math.abs(Sp)}%`}if(Sp<0?bp=`calc(${bp}px ${dp?"-":"+"} (${$p*Math.abs(Sp)}%))`:Sp>0?bp=`calc(${bp}px ${dp?"-":"+"} (-${$p*Math.abs(Sp)}%))`:bp=`${bp}px`,!rp.isHorizontal()){const Dp=Ep;Ep=bp,bp=Dp}const Lp=Sp<0?`${1+(1-_p)*Sp}`:`${1-(1-_p)*Sp}`,Mp=`
        translate3d(${bp}, ${Ep}, ${wp}px)
        rotateZ(${fp.rotate?dp?-Rp:Rp:0}deg)
        scale(${Lp})
      `;if(fp.slideShadows){let Dp=vp.querySelector(".swiper-slide-shadow");Dp||(Dp=createShadow$1("cards",vp)),Dp&&(Dp.style.opacity=Math.min(Math.max((Math.abs(Sp)-.5)/.5,0),1))}vp.style.zIndex=-Math.abs(Math.round(xp))+up.length;const kp=effectTarget(fp,vp);kp.style.transform=Mp}},setTransition:up=>{const cp=rp.slides.map(dp=>getSlideTransformEl(dp));cp.forEach(dp=>{dp.style.transitionDuration=`${up}ms`,dp.querySelectorAll(".swiper-slide-shadow").forEach(fp=>{fp.style.transitionDuration=`${up}ms`})}),effectVirtualTransitionEnd({swiper:rp,duration:up,transformElements:cp})},perspective:()=>!0,overwriteParams:()=>({watchSlidesProgress:!0,virtualTranslate:!rp.params.cssMode})})}var PersonOutlineOutlined={},interopRequireDefault={exports:{}};(function(_d){function rp(np){return np&&np.__esModule?np:{default:np}}_d.exports=rp,_d.exports.__esModule=!0,_d.exports.default=_d.exports})(interopRequireDefault);var interopRequireDefaultExports=interopRequireDefault.exports,createSvgIcon$1={};function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(_d){for(var rp=1;rp<arguments.length;rp++){var np=arguments[rp];for(var ap in np)Object.prototype.hasOwnProperty.call(np,ap)&&(_d[ap]=np[ap])}return _d},_extends$1.apply(this,arguments)}function isPlainObject$2(_d){if(typeof _d!="object"||_d===null)return!1;const rp=Object.getPrototypeOf(_d);return(rp===null||rp===Object.prototype||Object.getPrototypeOf(rp)===null)&&!(Symbol.toStringTag in _d)&&!(Symbol.iterator in _d)}function deepClone$1(_d){if(!isPlainObject$2(_d))return _d;const rp={};return Object.keys(_d).forEach(np=>{rp[np]=deepClone$1(_d[np])}),rp}function deepmerge(_d,rp,np={clone:!0}){const ap=np.clone?_extends$1({},_d):_d;return isPlainObject$2(_d)&&isPlainObject$2(rp)&&Object.keys(rp).forEach(sp=>{sp!=="__proto__"&&(isPlainObject$2(rp[sp])&&sp in _d&&isPlainObject$2(_d[sp])?ap[sp]=deepmerge(_d[sp],rp[sp],np):np.clone?ap[sp]=isPlainObject$2(rp[sp])?deepClone$1(rp[sp]):rp[sp]:ap[sp]=rp[sp])}),ap}var propTypes={exports:{}},ReactPropTypesSecret$1="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1=ReactPropTypesSecret$1,ReactPropTypesSecret=ReactPropTypesSecret_1;function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;var factoryWithThrowingShims=function(){function _d(ap,sp,lp,up,cp,dp){if(dp!==ReactPropTypesSecret){var fp=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw fp.name="Invariant Violation",fp}}_d.isRequired=_d;function rp(){return _d}var np={array:_d,bigint:_d,bool:_d,func:_d,number:_d,object:_d,string:_d,symbol:_d,any:_d,arrayOf:rp,element:_d,elementType:_d,instanceOf:rp,node:_d,objectOf:rp,oneOf:rp,oneOfType:rp,shape:rp,exact:rp,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return np.PropTypes=np,np};propTypes.exports=factoryWithThrowingShims();var propTypesExports=propTypes.exports;function formatMuiErrorMessage(_d){let rp="https://mui.com/production-error/?code="+_d;for(let np=1;np<arguments.length;np+=1)rp+="&args[]="+encodeURIComponent(arguments[np]);return"Minified MUI error #"+_d+"; visit "+rp+" for the full message."}function capitalize(_d){if(typeof _d!="string")throw new Error(formatMuiErrorMessage(7));return _d.charAt(0).toUpperCase()+_d.slice(1)}function createChainedFunction(..._d){return _d.reduce((rp,np)=>np==null?rp:function(...sp){rp.apply(this,sp),np.apply(this,sp)},()=>{})}function debounce$1(_d,rp=166){let np;function ap(...sp){const lp=()=>{_d.apply(this,sp)};clearTimeout(np),np=setTimeout(lp,rp)}return ap.clear=()=>{clearTimeout(np)},ap}function deprecatedPropType(_d,rp){return()=>null}function isMuiElement(_d,rp){var np,ap;return reactExports.isValidElement(_d)&&rp.indexOf((np=_d.type.muiName)!=null?np:(ap=_d.type)==null||(ap=ap._payload)==null||(ap=ap.value)==null?void 0:ap.muiName)!==-1}function ownerDocument(_d){return _d&&_d.ownerDocument||document}function ownerWindow(_d){return ownerDocument(_d).defaultView||window}function requirePropFactory(_d,rp){return()=>null}function setRef(_d,rp){typeof _d=="function"?_d(rp):_d&&(_d.current=rp)}const useEnhancedEffect=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect,useEnhancedEffect$1=useEnhancedEffect;let globalId=0;function useGlobalId(_d){const[rp,np]=reactExports.useState(_d),ap=_d||rp;return reactExports.useEffect(()=>{rp==null&&(globalId+=1,np(`mui-${globalId}`))},[rp]),ap}const maybeReactUseId=React$1.useId;function useId(_d){if(maybeReactUseId!==void 0){const rp=maybeReactUseId();return _d??rp}return useGlobalId(_d)}function unsupportedProp(_d,rp,np,ap,sp){return null}function useControlled({controlled:_d,default:rp,name:np,state:ap="value"}){const{current:sp}=reactExports.useRef(_d!==void 0),[lp,up]=reactExports.useState(rp),cp=sp?_d:lp,dp=reactExports.useCallback(fp=>{sp||up(fp)},[]);return[cp,dp]}function useEventCallback(_d){const rp=reactExports.useRef(_d);return useEnhancedEffect$1(()=>{rp.current=_d}),reactExports.useRef((...np)=>(0,rp.current)(...np)).current}function useForkRef(..._d){return reactExports.useMemo(()=>_d.every(rp=>rp==null)?null:rp=>{_d.forEach(np=>{setRef(np,rp)})},_d)}let hadKeyboardEvent=!0,hadFocusVisibleRecently=!1,hadFocusVisibleRecentlyTimeout;const inputTypesWhitelist={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function focusTriggersKeyboardModality(_d){const{type:rp,tagName:np}=_d;return!!(np==="INPUT"&&inputTypesWhitelist[rp]&&!_d.readOnly||np==="TEXTAREA"&&!_d.readOnly||_d.isContentEditable)}function handleKeyDown(_d){_d.metaKey||_d.altKey||_d.ctrlKey||(hadKeyboardEvent=!0)}function handlePointerDown(){hadKeyboardEvent=!1}function handleVisibilityChange(){this.visibilityState==="hidden"&&hadFocusVisibleRecently&&(hadKeyboardEvent=!0)}function prepare(_d){_d.addEventListener("keydown",handleKeyDown,!0),_d.addEventListener("mousedown",handlePointerDown,!0),_d.addEventListener("pointerdown",handlePointerDown,!0),_d.addEventListener("touchstart",handlePointerDown,!0),_d.addEventListener("visibilitychange",handleVisibilityChange,!0)}function isFocusVisible(_d){const{target:rp}=_d;try{return rp.matches(":focus-visible")}catch{}return hadKeyboardEvent||focusTriggersKeyboardModality(rp)}function useIsFocusVisible(){const _d=reactExports.useCallback(sp=>{sp!=null&&prepare(sp.ownerDocument)},[]),rp=reactExports.useRef(!1);function np(){return rp.current?(hadFocusVisibleRecently=!0,window.clearTimeout(hadFocusVisibleRecentlyTimeout),hadFocusVisibleRecentlyTimeout=window.setTimeout(()=>{hadFocusVisibleRecently=!1},100),rp.current=!1,!0):!1}function ap(sp){return isFocusVisible(sp)?(rp.current=!0,!0):!1}return{isFocusVisibleRef:rp,onFocus:ap,onBlur:np,ref:_d}}function resolveProps(_d,rp){const np=_extends$1({},rp);return Object.keys(_d).forEach(ap=>{if(ap.toString().match(/^(components|slots)$/))np[ap]=_extends$1({},_d[ap],np[ap]);else if(ap.toString().match(/^(componentsProps|slotProps)$/)){const sp=_d[ap]||{},lp=rp[ap];np[ap]={},!lp||!Object.keys(lp)?np[ap]=sp:!sp||!Object.keys(sp)?np[ap]=lp:(np[ap]=_extends$1({},lp),Object.keys(sp).forEach(up=>{np[ap][up]=resolveProps(sp[up],lp[up])}))}else np[ap]===void 0&&(np[ap]=_d[ap])}),np}function composeClasses(_d,rp,np=void 0){const ap={};return Object.keys(_d).forEach(sp=>{ap[sp]=_d[sp].reduce((lp,up)=>{if(up){const cp=rp(up);cp!==""&&lp.push(cp),np&&np[up]&&lp.push(np[up])}return lp},[]).join(" ")}),ap}const defaultGenerator=_d=>_d,createClassNameGenerator=()=>{let _d=defaultGenerator;return{configure(rp){_d=rp},generate(rp){return _d(rp)},reset(){_d=defaultGenerator}}},ClassNameGenerator=createClassNameGenerator(),globalStateClasses={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function generateUtilityClass(_d,rp,np="Mui"){const ap=globalStateClasses[rp];return ap?`${np}-${ap}`:`${ClassNameGenerator.generate(_d)}-${rp}`}function generateUtilityClasses(_d,rp,np="Mui"){const ap={};return rp.forEach(sp=>{ap[sp]=generateUtilityClass(_d,sp,np)}),ap}function clamp(_d,rp=Number.MIN_SAFE_INTEGER,np=Number.MAX_SAFE_INTEGER){return Math.max(rp,Math.min(_d,np))}function _objectWithoutPropertiesLoose(_d,rp){if(_d==null)return{};var np={},ap=Object.keys(_d),sp,lp;for(lp=0;lp<ap.length;lp++)sp=ap[lp],!(rp.indexOf(sp)>=0)&&(np[sp]=_d[sp]);return np}function r$1(_d){var rp,np,ap="";if(typeof _d=="string"||typeof _d=="number")ap+=_d;else if(typeof _d=="object")if(Array.isArray(_d)){var sp=_d.length;for(rp=0;rp<sp;rp++)_d[rp]&&(np=r$1(_d[rp]))&&(ap&&(ap+=" "),ap+=np)}else for(np in _d)_d[np]&&(ap&&(ap+=" "),ap+=np);return ap}function clsx(){for(var _d,rp,np=0,ap="",sp=arguments.length;np<sp;np++)(_d=arguments[np])&&(rp=r$1(_d))&&(ap&&(ap+=" "),ap+=rp);return ap}function memoize$1(_d){var rp=Object.create(null);return function(np){return rp[np]===void 0&&(rp[np]=_d(np)),rp[np]}}var reactPropsRegex=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,isPropValid=memoize$1(function(_d){return reactPropsRegex.test(_d)||_d.charCodeAt(0)===111&&_d.charCodeAt(1)===110&&_d.charCodeAt(2)<91});function sheetForTag(_d){if(_d.sheet)return _d.sheet;for(var rp=0;rp<document.styleSheets.length;rp++)if(document.styleSheets[rp].ownerNode===_d)return document.styleSheets[rp]}function createStyleElement(_d){var rp=document.createElement("style");return rp.setAttribute("data-emotion",_d.key),_d.nonce!==void 0&&rp.setAttribute("nonce",_d.nonce),rp.appendChild(document.createTextNode("")),rp.setAttribute("data-s",""),rp}var StyleSheet=function(){function _d(np){var ap=this;this._insertTag=function(sp){var lp;ap.tags.length===0?ap.insertionPoint?lp=ap.insertionPoint.nextSibling:ap.prepend?lp=ap.container.firstChild:lp=ap.before:lp=ap.tags[ap.tags.length-1].nextSibling,ap.container.insertBefore(sp,lp),ap.tags.push(sp)},this.isSpeedy=np.speedy===void 0?!0:np.speedy,this.tags=[],this.ctr=0,this.nonce=np.nonce,this.key=np.key,this.container=np.container,this.prepend=np.prepend,this.insertionPoint=np.insertionPoint,this.before=null}var rp=_d.prototype;return rp.hydrate=function(ap){ap.forEach(this._insertTag)},rp.insert=function(ap){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(createStyleElement(this));var sp=this.tags[this.tags.length-1];if(this.isSpeedy){var lp=sheetForTag(sp);try{lp.insertRule(ap,lp.cssRules.length)}catch{}}else sp.appendChild(document.createTextNode(ap));this.ctr++},rp.flush=function(){this.tags.forEach(function(ap){return ap.parentNode&&ap.parentNode.removeChild(ap)}),this.tags=[],this.ctr=0},_d}(),MS="-ms-",MOZ="-moz-",WEBKIT="-webkit-",COMMENT="comm",RULESET="rule",DECLARATION="decl",IMPORT="@import",KEYFRAMES="@keyframes",LAYER="@layer",abs=Math.abs,from=String.fromCharCode,assign$3=Object.assign;function hash(_d,rp){return charat(_d,0)^45?(((rp<<2^charat(_d,0))<<2^charat(_d,1))<<2^charat(_d,2))<<2^charat(_d,3):0}function trim$1(_d){return _d.trim()}function match(_d,rp){return(_d=rp.exec(_d))?_d[0]:_d}function replace(_d,rp,np){return _d.replace(rp,np)}function indexof(_d,rp){return _d.indexOf(rp)}function charat(_d,rp){return _d.charCodeAt(rp)|0}function substr(_d,rp,np){return _d.slice(rp,np)}function strlen(_d){return _d.length}function sizeof(_d){return _d.length}function append(_d,rp){return rp.push(_d),_d}function combine(_d,rp){return _d.map(rp).join("")}var line=1,column=1,length=0,position=0,character=0,characters="";function node(_d,rp,np,ap,sp,lp,up){return{value:_d,root:rp,parent:np,type:ap,props:sp,children:lp,line,column,length:up,return:""}}function copy(_d,rp){return assign$3(node("",null,null,"",null,null,0),_d,{length:-_d.length},rp)}function char(){return character}function prev(){return character=position>0?charat(characters,--position):0,column--,character===10&&(column=1,line--),character}function next(){return character=position<length?charat(characters,position++):0,column++,character===10&&(column=1,line++),character}function peek(){return charat(characters,position)}function caret(){return position}function slice$1(_d,rp){return substr(characters,_d,rp)}function token(_d){switch(_d){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function alloc(_d){return line=column=1,length=strlen(characters=_d),position=0,[]}function dealloc(_d){return characters="",_d}function delimit(_d){return trim$1(slice$1(position-1,delimiter(_d===91?_d+2:_d===40?_d+1:_d)))}function whitespace(_d){for(;(character=peek())&&character<33;)next();return token(_d)>2||token(character)>3?"":" "}function escaping(_d,rp){for(;--rp&&next()&&!(character<48||character>102||character>57&&character<65||character>70&&character<97););return slice$1(_d,caret()+(rp<6&&peek()==32&&next()==32))}function delimiter(_d){for(;next();)switch(character){case _d:return position;case 34:case 39:_d!==34&&_d!==39&&delimiter(character);break;case 40:_d===41&&delimiter(_d);break;case 92:next();break}return position}function commenter(_d,rp){for(;next()&&_d+character!==57;)if(_d+character===84&&peek()===47)break;return"/*"+slice$1(rp,position-1)+"*"+from(_d===47?_d:next())}function identifier(_d){for(;!token(peek());)next();return slice$1(_d,position)}function compile(_d){return dealloc(parse$2("",null,null,null,[""],_d=alloc(_d),0,[0],_d))}function parse$2(_d,rp,np,ap,sp,lp,up,cp,dp){for(var fp=0,pp=0,hp=up,mp=0,gp=0,vp=0,xp=1,Sp=1,yp=1,bp=0,Ep="",wp=sp,_p=lp,Rp=ap,$p=Ep;Sp;)switch(vp=bp,bp=next()){case 40:if(vp!=108&&charat($p,hp-1)==58){indexof($p+=replace(delimit(bp),"&","&\f"),"&\f")!=-1&&(yp=-1);break}case 34:case 39:case 91:$p+=delimit(bp);break;case 9:case 10:case 13:case 32:$p+=whitespace(vp);break;case 92:$p+=escaping(caret()-1,7);continue;case 47:switch(peek()){case 42:case 47:append(comment(commenter(next(),caret()),rp,np),dp);break;default:$p+="/"}break;case 123*xp:cp[fp++]=strlen($p)*yp;case 125*xp:case 59:case 0:switch(bp){case 0:case 125:Sp=0;case 59+pp:yp==-1&&($p=replace($p,/\f/g,"")),gp>0&&strlen($p)-hp&&append(gp>32?declaration($p+";",ap,np,hp-1):declaration(replace($p," ","")+";",ap,np,hp-2),dp);break;case 59:$p+=";";default:if(append(Rp=ruleset($p,rp,np,fp,pp,sp,cp,Ep,wp=[],_p=[],hp),lp),bp===123)if(pp===0)parse$2($p,rp,Rp,Rp,wp,lp,hp,cp,_p);else switch(mp===99&&charat($p,3)===110?100:mp){case 100:case 108:case 109:case 115:parse$2(_d,Rp,Rp,ap&&append(ruleset(_d,Rp,Rp,0,0,sp,cp,Ep,sp,wp=[],hp),_p),sp,_p,hp,cp,ap?wp:_p);break;default:parse$2($p,Rp,Rp,Rp,[""],_p,0,cp,_p)}}fp=pp=gp=0,xp=yp=1,Ep=$p="",hp=up;break;case 58:hp=1+strlen($p),gp=vp;default:if(xp<1){if(bp==123)--xp;else if(bp==125&&xp++==0&&prev()==125)continue}switch($p+=from(bp),bp*xp){case 38:yp=pp>0?1:($p+="\f",-1);break;case 44:cp[fp++]=(strlen($p)-1)*yp,yp=1;break;case 64:peek()===45&&($p+=delimit(next())),mp=peek(),pp=hp=strlen(Ep=$p+=identifier(caret())),bp++;break;case 45:vp===45&&strlen($p)==2&&(xp=0)}}return lp}function ruleset(_d,rp,np,ap,sp,lp,up,cp,dp,fp,pp){for(var hp=sp-1,mp=sp===0?lp:[""],gp=sizeof(mp),vp=0,xp=0,Sp=0;vp<ap;++vp)for(var yp=0,bp=substr(_d,hp+1,hp=abs(xp=up[vp])),Ep=_d;yp<gp;++yp)(Ep=trim$1(xp>0?mp[yp]+" "+bp:replace(bp,/&\f/g,mp[yp])))&&(dp[Sp++]=Ep);return node(_d,rp,np,sp===0?RULESET:cp,dp,fp,pp)}function comment(_d,rp,np){return node(_d,rp,np,COMMENT,from(char()),substr(_d,2,-2),0)}function declaration(_d,rp,np,ap){return node(_d,rp,np,DECLARATION,substr(_d,0,ap),substr(_d,ap+1,-1),ap)}function serialize(_d,rp){for(var np="",ap=sizeof(_d),sp=0;sp<ap;sp++)np+=rp(_d[sp],sp,_d,rp)||"";return np}function stringify$3(_d,rp,np,ap){switch(_d.type){case LAYER:if(_d.children.length)break;case IMPORT:case DECLARATION:return _d.return=_d.return||_d.value;case COMMENT:return"";case KEYFRAMES:return _d.return=_d.value+"{"+serialize(_d.children,ap)+"}";case RULESET:_d.value=_d.props.join(",")}return strlen(np=serialize(_d.children,ap))?_d.return=_d.value+"{"+np+"}":""}function middleware(_d){var rp=sizeof(_d);return function(np,ap,sp,lp){for(var up="",cp=0;cp<rp;cp++)up+=_d[cp](np,ap,sp,lp)||"";return up}}function rulesheet(_d){return function(rp){rp.root||(rp=rp.return)&&_d(rp)}}var identifierWithPointTracking=function(rp,np,ap){for(var sp=0,lp=0;sp=lp,lp=peek(),sp===38&&lp===12&&(np[ap]=1),!token(lp);)next();return slice$1(rp,position)},toRules=function(rp,np){var ap=-1,sp=44;do switch(token(sp)){case 0:sp===38&&peek()===12&&(np[ap]=1),rp[ap]+=identifierWithPointTracking(position-1,np,ap);break;case 2:rp[ap]+=delimit(sp);break;case 4:if(sp===44){rp[++ap]=peek()===58?"&\f":"",np[ap]=rp[ap].length;break}default:rp[ap]+=from(sp)}while(sp=next());return rp},getRules=function(rp,np){return dealloc(toRules(alloc(rp),np))},fixedElements=new WeakMap,compat=function(rp){if(!(rp.type!=="rule"||!rp.parent||rp.length<1)){for(var np=rp.value,ap=rp.parent,sp=rp.column===ap.column&&rp.line===ap.line;ap.type!=="rule";)if(ap=ap.parent,!ap)return;if(!(rp.props.length===1&&np.charCodeAt(0)!==58&&!fixedElements.get(ap))&&!sp){fixedElements.set(rp,!0);for(var lp=[],up=getRules(np,lp),cp=ap.props,dp=0,fp=0;dp<up.length;dp++)for(var pp=0;pp<cp.length;pp++,fp++)rp.props[fp]=lp[dp]?up[dp].replace(/&\f/g,cp[pp]):cp[pp]+" "+up[dp]}}},removeLabel=function(rp){if(rp.type==="decl"){var np=rp.value;np.charCodeAt(0)===108&&np.charCodeAt(2)===98&&(rp.return="",rp.value="")}};function prefix(_d,rp){switch(hash(_d,rp)){case 5103:return WEBKIT+"print-"+_d+_d;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return WEBKIT+_d+_d;case 5349:case 4246:case 4810:case 6968:case 2756:return WEBKIT+_d+MOZ+_d+MS+_d+_d;case 6828:case 4268:return WEBKIT+_d+MS+_d+_d;case 6165:return WEBKIT+_d+MS+"flex-"+_d+_d;case 5187:return WEBKIT+_d+replace(_d,/(\w+).+(:[^]+)/,WEBKIT+"box-$1$2"+MS+"flex-$1$2")+_d;case 5443:return WEBKIT+_d+MS+"flex-item-"+replace(_d,/flex-|-self/,"")+_d;case 4675:return WEBKIT+_d+MS+"flex-line-pack"+replace(_d,/align-content|flex-|-self/,"")+_d;case 5548:return WEBKIT+_d+MS+replace(_d,"shrink","negative")+_d;case 5292:return WEBKIT+_d+MS+replace(_d,"basis","preferred-size")+_d;case 6060:return WEBKIT+"box-"+replace(_d,"-grow","")+WEBKIT+_d+MS+replace(_d,"grow","positive")+_d;case 4554:return WEBKIT+replace(_d,/([^-])(transform)/g,"$1"+WEBKIT+"$2")+_d;case 6187:return replace(replace(replace(_d,/(zoom-|grab)/,WEBKIT+"$1"),/(image-set)/,WEBKIT+"$1"),_d,"")+_d;case 5495:case 3959:return replace(_d,/(image-set\([^]*)/,WEBKIT+"$1$`$1");case 4968:return replace(replace(_d,/(.+:)(flex-)?(.*)/,WEBKIT+"box-pack:$3"+MS+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+WEBKIT+_d+_d;case 4095:case 3583:case 4068:case 2532:return replace(_d,/(.+)-inline(.+)/,WEBKIT+"$1$2")+_d;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(strlen(_d)-1-rp>6)switch(charat(_d,rp+1)){case 109:if(charat(_d,rp+4)!==45)break;case 102:return replace(_d,/(.+:)(.+)-([^]+)/,"$1"+WEBKIT+"$2-$3$1"+MOZ+(charat(_d,rp+3)==108?"$3":"$2-$3"))+_d;case 115:return~indexof(_d,"stretch")?prefix(replace(_d,"stretch","fill-available"),rp)+_d:_d}break;case 4949:if(charat(_d,rp+1)!==115)break;case 6444:switch(charat(_d,strlen(_d)-3-(~indexof(_d,"!important")&&10))){case 107:return replace(_d,":",":"+WEBKIT)+_d;case 101:return replace(_d,/(.+:)([^;!]+)(;|!.+)?/,"$1"+WEBKIT+(charat(_d,14)===45?"inline-":"")+"box$3$1"+WEBKIT+"$2$3$1"+MS+"$2box$3")+_d}break;case 5936:switch(charat(_d,rp+11)){case 114:return WEBKIT+_d+MS+replace(_d,/[svh]\w+-[tblr]{2}/,"tb")+_d;case 108:return WEBKIT+_d+MS+replace(_d,/[svh]\w+-[tblr]{2}/,"tb-rl")+_d;case 45:return WEBKIT+_d+MS+replace(_d,/[svh]\w+-[tblr]{2}/,"lr")+_d}return WEBKIT+_d+MS+_d+_d}return _d}var prefixer=function(rp,np,ap,sp){if(rp.length>-1&&!rp.return)switch(rp.type){case DECLARATION:rp.return=prefix(rp.value,rp.length);break;case KEYFRAMES:return serialize([copy(rp,{value:replace(rp.value,"@","@"+WEBKIT)})],sp);case RULESET:if(rp.length)return combine(rp.props,function(lp){switch(match(lp,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return serialize([copy(rp,{props:[replace(lp,/:(read-\w+)/,":"+MOZ+"$1")]})],sp);case"::placeholder":return serialize([copy(rp,{props:[replace(lp,/:(plac\w+)/,":"+WEBKIT+"input-$1")]}),copy(rp,{props:[replace(lp,/:(plac\w+)/,":"+MOZ+"$1")]}),copy(rp,{props:[replace(lp,/:(plac\w+)/,MS+"input-$1")]})],sp)}return""})}},defaultStylisPlugins=[prefixer],createCache=function(rp){var np=rp.key;if(np==="css"){var ap=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(ap,function(xp){var Sp=xp.getAttribute("data-emotion");Sp.indexOf(" ")!==-1&&(document.head.appendChild(xp),xp.setAttribute("data-s",""))})}var sp=rp.stylisPlugins||defaultStylisPlugins,lp={},up,cp=[];up=rp.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+np+' "]'),function(xp){for(var Sp=xp.getAttribute("data-emotion").split(" "),yp=1;yp<Sp.length;yp++)lp[Sp[yp]]=!0;cp.push(xp)});var dp,fp=[compat,removeLabel];{var pp,hp=[stringify$3,rulesheet(function(xp){pp.insert(xp)})],mp=middleware(fp.concat(sp,hp)),gp=function(Sp){return serialize(compile(Sp),mp)};dp=function(Sp,yp,bp,Ep){pp=bp,gp(Sp?Sp+"{"+yp.styles+"}":yp.styles),Ep&&(vp.inserted[yp.name]=!0)}}var vp={key:np,sheet:new StyleSheet({key:np,container:up,nonce:rp.nonce,speedy:rp.speedy,prepend:rp.prepend,insertionPoint:rp.insertionPoint}),nonce:rp.nonce,inserted:lp,registered:{},insert:dp};return vp.sheet.hydrate(cp),vp},isBrowser=!0;function getRegisteredStyles(_d,rp,np){var ap="";return np.split(" ").forEach(function(sp){_d[sp]!==void 0?rp.push(_d[sp]+";"):ap+=sp+" "}),ap}var registerStyles=function(rp,np,ap){var sp=rp.key+"-"+np.name;(ap===!1||isBrowser===!1)&&rp.registered[sp]===void 0&&(rp.registered[sp]=np.styles)},insertStyles=function(rp,np,ap){registerStyles(rp,np,ap);var sp=rp.key+"-"+np.name;if(rp.inserted[np.name]===void 0){var lp=np;do rp.insert(np===lp?"."+sp:"",lp,rp.sheet,!0),lp=lp.next;while(lp!==void 0)}};function murmur2(_d){for(var rp=0,np,ap=0,sp=_d.length;sp>=4;++ap,sp-=4)np=_d.charCodeAt(ap)&255|(_d.charCodeAt(++ap)&255)<<8|(_d.charCodeAt(++ap)&255)<<16|(_d.charCodeAt(++ap)&255)<<24,np=(np&65535)*1540483477+((np>>>16)*59797<<16),np^=np>>>24,rp=(np&65535)*1540483477+((np>>>16)*59797<<16)^(rp&65535)*1540483477+((rp>>>16)*59797<<16);switch(sp){case 3:rp^=(_d.charCodeAt(ap+2)&255)<<16;case 2:rp^=(_d.charCodeAt(ap+1)&255)<<8;case 1:rp^=_d.charCodeAt(ap)&255,rp=(rp&65535)*1540483477+((rp>>>16)*59797<<16)}return rp^=rp>>>13,rp=(rp&65535)*1540483477+((rp>>>16)*59797<<16),((rp^rp>>>15)>>>0).toString(36)}var unitlessKeys={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},hyphenateRegex=/[A-Z]|^ms/g,animationRegex=/_EMO_([^_]+?)_([^]*?)_EMO_/g,isCustomProperty=function(rp){return rp.charCodeAt(1)===45},isProcessableValue=function(rp){return rp!=null&&typeof rp!="boolean"},processStyleName=memoize$1(function(_d){return isCustomProperty(_d)?_d:_d.replace(hyphenateRegex,"-$&").toLowerCase()}),processStyleValue=function(rp,np){switch(rp){case"animation":case"animationName":if(typeof np=="string")return np.replace(animationRegex,function(ap,sp,lp){return cursor={name:sp,styles:lp,next:cursor},sp})}return unitlessKeys[rp]!==1&&!isCustomProperty(rp)&&typeof np=="number"&&np!==0?np+"px":np},noComponentSelectorMessage="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function handleInterpolation(_d,rp,np){if(np==null)return"";if(np.__emotion_styles!==void 0)return np;switch(typeof np){case"boolean":return"";case"object":{if(np.anim===1)return cursor={name:np.name,styles:np.styles,next:cursor},np.name;if(np.styles!==void 0){var ap=np.next;if(ap!==void 0)for(;ap!==void 0;)cursor={name:ap.name,styles:ap.styles,next:cursor},ap=ap.next;var sp=np.styles+";";return sp}return createStringFromObject(_d,rp,np)}case"function":{if(_d!==void 0){var lp=cursor,up=np(_d);return cursor=lp,handleInterpolation(_d,rp,up)}break}}if(rp==null)return np;var cp=rp[np];return cp!==void 0?cp:np}function createStringFromObject(_d,rp,np){var ap="";if(Array.isArray(np))for(var sp=0;sp<np.length;sp++)ap+=handleInterpolation(_d,rp,np[sp])+";";else for(var lp in np){var up=np[lp];if(typeof up!="object")rp!=null&&rp[up]!==void 0?ap+=lp+"{"+rp[up]+"}":isProcessableValue(up)&&(ap+=processStyleName(lp)+":"+processStyleValue(lp,up)+";");else if(Array.isArray(up)&&typeof up[0]=="string"&&(rp==null||rp[up[0]]===void 0))for(var cp=0;cp<up.length;cp++)isProcessableValue(up[cp])&&(ap+=processStyleName(lp)+":"+processStyleValue(lp,up[cp])+";");else{var dp=handleInterpolation(_d,rp,up);switch(lp){case"animation":case"animationName":{ap+=processStyleName(lp)+":"+dp+";";break}default:ap+=lp+"{"+dp+"}"}}}return ap}var labelPattern=/label:\s*([^\s;\n{]+)\s*(;|$)/g,cursor,serializeStyles=function(rp,np,ap){if(rp.length===1&&typeof rp[0]=="object"&&rp[0]!==null&&rp[0].styles!==void 0)return rp[0];var sp=!0,lp="";cursor=void 0;var up=rp[0];up==null||up.raw===void 0?(sp=!1,lp+=handleInterpolation(ap,np,up)):lp+=up[0];for(var cp=1;cp<rp.length;cp++)lp+=handleInterpolation(ap,np,rp[cp]),sp&&(lp+=up[cp]);labelPattern.lastIndex=0;for(var dp="",fp;(fp=labelPattern.exec(lp))!==null;)dp+="-"+fp[1];var pp=murmur2(lp)+dp;return{name:pp,styles:lp,next:cursor}},syncFallback=function(rp){return rp()},useInsertionEffect=React$1.useInsertionEffect?React$1.useInsertionEffect:!1,useInsertionEffectAlwaysWithSyncFallback=useInsertionEffect||syncFallback,EmotionCacheContext=reactExports.createContext(typeof HTMLElement<"u"?createCache({key:"css"}):null);EmotionCacheContext.Provider;var withEmotionCache=function(rp){return reactExports.forwardRef(function(np,ap){var sp=reactExports.useContext(EmotionCacheContext);return rp(np,sp,ap)})},ThemeContext=reactExports.createContext({}),testOmitPropsOnStringTag=isPropValid,testOmitPropsOnComponent=function(rp){return rp!=="theme"},getDefaultShouldForwardProp=function(rp){return typeof rp=="string"&&rp.charCodeAt(0)>96?testOmitPropsOnStringTag:testOmitPropsOnComponent},composeShouldForwardProps=function(rp,np,ap){var sp;if(np){var lp=np.shouldForwardProp;sp=rp.__emotion_forwardProp&&lp?function(up){return rp.__emotion_forwardProp(up)&&lp(up)}:lp}return typeof sp!="function"&&ap&&(sp=rp.__emotion_forwardProp),sp},Insertion=function(rp){var np=rp.cache,ap=rp.serialized,sp=rp.isStringTag;return registerStyles(np,ap,sp),useInsertionEffectAlwaysWithSyncFallback(function(){return insertStyles(np,ap,sp)}),null},createStyled$1=function _d(rp,np){var ap=rp.__emotion_real===rp,sp=ap&&rp.__emotion_base||rp,lp,up;np!==void 0&&(lp=np.label,up=np.target);var cp=composeShouldForwardProps(rp,np,ap),dp=cp||getDefaultShouldForwardProp(sp),fp=!dp("as");return function(){var pp=arguments,hp=ap&&rp.__emotion_styles!==void 0?rp.__emotion_styles.slice(0):[];if(lp!==void 0&&hp.push("label:"+lp+";"),pp[0]==null||pp[0].raw===void 0)hp.push.apply(hp,pp);else{hp.push(pp[0][0]);for(var mp=pp.length,gp=1;gp<mp;gp++)hp.push(pp[gp],pp[0][gp])}var vp=withEmotionCache(function(xp,Sp,yp){var bp=fp&&xp.as||sp,Ep="",wp=[],_p=xp;if(xp.theme==null){_p={};for(var Rp in xp)_p[Rp]=xp[Rp];_p.theme=reactExports.useContext(ThemeContext)}typeof xp.className=="string"?Ep=getRegisteredStyles(Sp.registered,wp,xp.className):xp.className!=null&&(Ep=xp.className+" ");var $p=serializeStyles(hp.concat(wp),Sp.registered,_p);Ep+=Sp.key+"-"+$p.name,up!==void 0&&(Ep+=" "+up);var Cp=fp&&cp===void 0?getDefaultShouldForwardProp(bp):dp,Ap={};for(var Op in xp)fp&&Op==="as"||Cp(Op)&&(Ap[Op]=xp[Op]);return Ap.className=Ep,Ap.ref=yp,reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(Insertion,{cache:Sp,serialized:$p,isStringTag:typeof bp=="string"}),reactExports.createElement(bp,Ap))});return vp.displayName=lp!==void 0?lp:"Styled("+(typeof sp=="string"?sp:sp.displayName||sp.name||"Component")+")",vp.defaultProps=rp.defaultProps,vp.__emotion_real=vp,vp.__emotion_base=sp,vp.__emotion_styles=hp,vp.__emotion_forwardProp=cp,Object.defineProperty(vp,"toString",{value:function(){return"."+up}}),vp.withComponent=function(xp,Sp){return _d(xp,_extends$1({},np,Sp,{shouldForwardProp:composeShouldForwardProps(vp,Sp,!0)})).apply(void 0,hp)},vp}},tags=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],newStyled=createStyled$1.bind();tags.forEach(function(_d){newStyled[_d]=newStyled(_d)});function styled$1(_d,rp){return newStyled(_d,rp)}const internal_processStyles=(_d,rp)=>{Array.isArray(_d.__emotion_styles)&&(_d.__emotion_styles=rp(_d.__emotion_styles))},_excluded$8=["values","unit","step"],sortBreakpointsValues=_d=>{const rp=Object.keys(_d).map(np=>({key:np,val:_d[np]}))||[];return rp.sort((np,ap)=>np.val-ap.val),rp.reduce((np,ap)=>_extends$1({},np,{[ap.key]:ap.val}),{})};function createBreakpoints(_d){const{values:rp={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:np="px",step:ap=5}=_d,sp=_objectWithoutPropertiesLoose(_d,_excluded$8),lp=sortBreakpointsValues(rp),up=Object.keys(lp);function cp(mp){return`@media (min-width:${typeof rp[mp]=="number"?rp[mp]:mp}${np})`}function dp(mp){return`@media (max-width:${(typeof rp[mp]=="number"?rp[mp]:mp)-ap/100}${np})`}function fp(mp,gp){const vp=up.indexOf(gp);return`@media (min-width:${typeof rp[mp]=="number"?rp[mp]:mp}${np}) and (max-width:${(vp!==-1&&typeof rp[up[vp]]=="number"?rp[up[vp]]:gp)-ap/100}${np})`}function pp(mp){return up.indexOf(mp)+1<up.length?fp(mp,up[up.indexOf(mp)+1]):cp(mp)}function hp(mp){const gp=up.indexOf(mp);return gp===0?cp(up[1]):gp===up.length-1?dp(up[gp]):fp(mp,up[up.indexOf(mp)+1]).replace("@media","@media not all and")}return _extends$1({keys:up,values:lp,up:cp,down:dp,between:fp,only:pp,not:hp,unit:np},sp)}const shape={borderRadius:4},shape$1=shape;function merge$1(_d,rp){return rp?deepmerge(_d,rp,{clone:!1}):_d}const values={xs:0,sm:600,md:900,lg:1200,xl:1536},defaultBreakpoints={keys:["xs","sm","md","lg","xl"],up:_d=>`@media (min-width:${values[_d]}px)`};function handleBreakpoints(_d,rp,np){const ap=_d.theme||{};if(Array.isArray(rp)){const lp=ap.breakpoints||defaultBreakpoints;return rp.reduce((up,cp,dp)=>(up[lp.up(lp.keys[dp])]=np(rp[dp]),up),{})}if(typeof rp=="object"){const lp=ap.breakpoints||defaultBreakpoints;return Object.keys(rp).reduce((up,cp)=>{if(Object.keys(lp.values||values).indexOf(cp)!==-1){const dp=lp.up(cp);up[dp]=np(rp[cp],cp)}else{const dp=cp;up[dp]=rp[dp]}return up},{})}return np(rp)}function createEmptyBreakpointObject(_d={}){var rp;return((rp=_d.keys)==null?void 0:rp.reduce((ap,sp)=>{const lp=_d.up(sp);return ap[lp]={},ap},{}))||{}}function removeUnusedBreakpoints(_d,rp){return _d.reduce((np,ap)=>{const sp=np[ap];return(!sp||Object.keys(sp).length===0)&&delete np[ap],np},rp)}function getPath(_d,rp,np=!0){if(!rp||typeof rp!="string")return null;if(_d&&_d.vars&&np){const ap=`vars.${rp}`.split(".").reduce((sp,lp)=>sp&&sp[lp]?sp[lp]:null,_d);if(ap!=null)return ap}return rp.split(".").reduce((ap,sp)=>ap&&ap[sp]!=null?ap[sp]:null,_d)}function getStyleValue(_d,rp,np,ap=np){let sp;return typeof _d=="function"?sp=_d(np):Array.isArray(_d)?sp=_d[np]||ap:sp=getPath(_d,np)||ap,rp&&(sp=rp(sp,ap,_d)),sp}function style$1(_d){const{prop:rp,cssProperty:np=_d.prop,themeKey:ap,transform:sp}=_d,lp=up=>{if(up[rp]==null)return null;const cp=up[rp],dp=up.theme,fp=getPath(dp,ap)||{};return handleBreakpoints(up,cp,hp=>{let mp=getStyleValue(fp,sp,hp);return hp===mp&&typeof hp=="string"&&(mp=getStyleValue(fp,sp,`${rp}${hp==="default"?"":capitalize(hp)}`,hp)),np===!1?mp:{[np]:mp}})};return lp.propTypes={},lp.filterProps=[rp],lp}function memoize(_d){const rp={};return np=>(rp[np]===void 0&&(rp[np]=_d(np)),rp[np])}const properties={m:"margin",p:"padding"},directions={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},aliases={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},getCssProperties=memoize(_d=>{if(_d.length>2)if(aliases[_d])_d=aliases[_d];else return[_d];const[rp,np]=_d.split(""),ap=properties[rp],sp=directions[np]||"";return Array.isArray(sp)?sp.map(lp=>ap+lp):[ap+sp]}),marginKeys=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],paddingKeys=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...marginKeys,...paddingKeys];function createUnaryUnit(_d,rp,np,ap){var sp;const lp=(sp=getPath(_d,rp,!1))!=null?sp:np;return typeof lp=="number"?up=>typeof up=="string"?up:lp*up:Array.isArray(lp)?up=>typeof up=="string"?up:lp[up]:typeof lp=="function"?lp:()=>{}}function createUnarySpacing(_d){return createUnaryUnit(_d,"spacing",8)}function getValue(_d,rp){if(typeof rp=="string"||rp==null)return rp;const np=Math.abs(rp),ap=_d(np);return rp>=0?ap:typeof ap=="number"?-ap:`-${ap}`}function getStyleFromPropValue(_d,rp){return np=>_d.reduce((ap,sp)=>(ap[sp]=getValue(rp,np),ap),{})}function resolveCssProperty(_d,rp,np,ap){if(rp.indexOf(np)===-1)return null;const sp=getCssProperties(np),lp=getStyleFromPropValue(sp,ap),up=_d[np];return handleBreakpoints(_d,up,lp)}function style(_d,rp){const np=createUnarySpacing(_d.theme);return Object.keys(_d).map(ap=>resolveCssProperty(_d,rp,ap,np)).reduce(merge$1,{})}function margin(_d){return style(_d,marginKeys)}margin.propTypes={};margin.filterProps=marginKeys;function padding(_d){return style(_d,paddingKeys)}padding.propTypes={};padding.filterProps=paddingKeys;function createSpacing(_d=8){if(_d.mui)return _d;const rp=createUnarySpacing({spacing:_d}),np=(...ap)=>(ap.length===0?[1]:ap).map(lp=>{const up=rp(lp);return typeof up=="number"?`${up}px`:up}).join(" ");return np.mui=!0,np}function compose(..._d){const rp=_d.reduce((ap,sp)=>(sp.filterProps.forEach(lp=>{ap[lp]=sp}),ap),{}),np=ap=>Object.keys(ap).reduce((sp,lp)=>rp[lp]?merge$1(sp,rp[lp](ap)):sp,{});return np.propTypes={},np.filterProps=_d.reduce((ap,sp)=>ap.concat(sp.filterProps),[]),np}function borderTransform(_d){return typeof _d!="number"?_d:`${_d}px solid`}function createBorderStyle(_d,rp){return style$1({prop:_d,themeKey:"borders",transform:rp})}const border=createBorderStyle("border",borderTransform),borderTop=createBorderStyle("borderTop",borderTransform),borderRight=createBorderStyle("borderRight",borderTransform),borderBottom=createBorderStyle("borderBottom",borderTransform),borderLeft=createBorderStyle("borderLeft",borderTransform),borderColor=createBorderStyle("borderColor"),borderTopColor=createBorderStyle("borderTopColor"),borderRightColor=createBorderStyle("borderRightColor"),borderBottomColor=createBorderStyle("borderBottomColor"),borderLeftColor=createBorderStyle("borderLeftColor"),outline=createBorderStyle("outline",borderTransform),outlineColor=createBorderStyle("outlineColor"),borderRadius=_d=>{if(_d.borderRadius!==void 0&&_d.borderRadius!==null){const rp=createUnaryUnit(_d.theme,"shape.borderRadius",4),np=ap=>({borderRadius:getValue(rp,ap)});return handleBreakpoints(_d,_d.borderRadius,np)}return null};borderRadius.propTypes={};borderRadius.filterProps=["borderRadius"];compose(border,borderTop,borderRight,borderBottom,borderLeft,borderColor,borderTopColor,borderRightColor,borderBottomColor,borderLeftColor,borderRadius,outline,outlineColor);const gap=_d=>{if(_d.gap!==void 0&&_d.gap!==null){const rp=createUnaryUnit(_d.theme,"spacing",8),np=ap=>({gap:getValue(rp,ap)});return handleBreakpoints(_d,_d.gap,np)}return null};gap.propTypes={};gap.filterProps=["gap"];const columnGap=_d=>{if(_d.columnGap!==void 0&&_d.columnGap!==null){const rp=createUnaryUnit(_d.theme,"spacing",8),np=ap=>({columnGap:getValue(rp,ap)});return handleBreakpoints(_d,_d.columnGap,np)}return null};columnGap.propTypes={};columnGap.filterProps=["columnGap"];const rowGap=_d=>{if(_d.rowGap!==void 0&&_d.rowGap!==null){const rp=createUnaryUnit(_d.theme,"spacing",8),np=ap=>({rowGap:getValue(rp,ap)});return handleBreakpoints(_d,_d.rowGap,np)}return null};rowGap.propTypes={};rowGap.filterProps=["rowGap"];const gridColumn=style$1({prop:"gridColumn"}),gridRow=style$1({prop:"gridRow"}),gridAutoFlow=style$1({prop:"gridAutoFlow"}),gridAutoColumns=style$1({prop:"gridAutoColumns"}),gridAutoRows=style$1({prop:"gridAutoRows"}),gridTemplateColumns=style$1({prop:"gridTemplateColumns"}),gridTemplateRows=style$1({prop:"gridTemplateRows"}),gridTemplateAreas=style$1({prop:"gridTemplateAreas"}),gridArea=style$1({prop:"gridArea"});compose(gap,columnGap,rowGap,gridColumn,gridRow,gridAutoFlow,gridAutoColumns,gridAutoRows,gridTemplateColumns,gridTemplateRows,gridTemplateAreas,gridArea);function paletteTransform(_d,rp){return rp==="grey"?rp:_d}const color=style$1({prop:"color",themeKey:"palette",transform:paletteTransform}),bgcolor=style$1({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:paletteTransform}),backgroundColor=style$1({prop:"backgroundColor",themeKey:"palette",transform:paletteTransform});compose(color,bgcolor,backgroundColor);function sizingTransform(_d){return _d<=1&&_d!==0?`${_d*100}%`:_d}const width=style$1({prop:"width",transform:sizingTransform}),maxWidth=_d=>{if(_d.maxWidth!==void 0&&_d.maxWidth!==null){const rp=np=>{var ap,sp;const lp=((ap=_d.theme)==null||(ap=ap.breakpoints)==null||(ap=ap.values)==null?void 0:ap[np])||values[np];return lp?((sp=_d.theme)==null||(sp=sp.breakpoints)==null?void 0:sp.unit)!=="px"?{maxWidth:`${lp}${_d.theme.breakpoints.unit}`}:{maxWidth:lp}:{maxWidth:sizingTransform(np)}};return handleBreakpoints(_d,_d.maxWidth,rp)}return null};maxWidth.filterProps=["maxWidth"];const minWidth=style$1({prop:"minWidth",transform:sizingTransform}),height=style$1({prop:"height",transform:sizingTransform}),maxHeight=style$1({prop:"maxHeight",transform:sizingTransform}),minHeight=style$1({prop:"minHeight",transform:sizingTransform});style$1({prop:"size",cssProperty:"width",transform:sizingTransform});style$1({prop:"size",cssProperty:"height",transform:sizingTransform});const boxSizing=style$1({prop:"boxSizing"});compose(width,maxWidth,minWidth,height,maxHeight,minHeight,boxSizing);const defaultSxConfig={border:{themeKey:"borders",transform:borderTransform},borderTop:{themeKey:"borders",transform:borderTransform},borderRight:{themeKey:"borders",transform:borderTransform},borderBottom:{themeKey:"borders",transform:borderTransform},borderLeft:{themeKey:"borders",transform:borderTransform},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:borderTransform},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:borderRadius},color:{themeKey:"palette",transform:paletteTransform},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:paletteTransform},backgroundColor:{themeKey:"palette",transform:paletteTransform},p:{style:padding},pt:{style:padding},pr:{style:padding},pb:{style:padding},pl:{style:padding},px:{style:padding},py:{style:padding},padding:{style:padding},paddingTop:{style:padding},paddingRight:{style:padding},paddingBottom:{style:padding},paddingLeft:{style:padding},paddingX:{style:padding},paddingY:{style:padding},paddingInline:{style:padding},paddingInlineStart:{style:padding},paddingInlineEnd:{style:padding},paddingBlock:{style:padding},paddingBlockStart:{style:padding},paddingBlockEnd:{style:padding},m:{style:margin},mt:{style:margin},mr:{style:margin},mb:{style:margin},ml:{style:margin},mx:{style:margin},my:{style:margin},margin:{style:margin},marginTop:{style:margin},marginRight:{style:margin},marginBottom:{style:margin},marginLeft:{style:margin},marginX:{style:margin},marginY:{style:margin},marginInline:{style:margin},marginInlineStart:{style:margin},marginInlineEnd:{style:margin},marginBlock:{style:margin},marginBlockStart:{style:margin},marginBlockEnd:{style:margin},displayPrint:{cssProperty:!1,transform:_d=>({"@media print":{display:_d}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:gap},rowGap:{style:rowGap},columnGap:{style:columnGap},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:sizingTransform},maxWidth:{style:maxWidth},minWidth:{transform:sizingTransform},height:{transform:sizingTransform},maxHeight:{transform:sizingTransform},minHeight:{transform:sizingTransform},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}},defaultSxConfig$1=defaultSxConfig;function objectsHaveSameKeys(..._d){const rp=_d.reduce((ap,sp)=>ap.concat(Object.keys(sp)),[]),np=new Set(rp);return _d.every(ap=>np.size===Object.keys(ap).length)}function callIfFn(_d,rp){return typeof _d=="function"?_d(rp):_d}function unstable_createStyleFunctionSx(){function _d(np,ap,sp,lp){const up={[np]:ap,theme:sp},cp=lp[np];if(!cp)return{[np]:ap};const{cssProperty:dp=np,themeKey:fp,transform:pp,style:hp}=cp;if(ap==null)return null;if(fp==="typography"&&ap==="inherit")return{[np]:ap};const mp=getPath(sp,fp)||{};return hp?hp(up):handleBreakpoints(up,ap,vp=>{let xp=getStyleValue(mp,pp,vp);return vp===xp&&typeof vp=="string"&&(xp=getStyleValue(mp,pp,`${np}${vp==="default"?"":capitalize(vp)}`,vp)),dp===!1?xp:{[dp]:xp}})}function rp(np){var ap;const{sx:sp,theme:lp={}}=np||{};if(!sp)return null;const up=(ap=lp.unstable_sxConfig)!=null?ap:defaultSxConfig$1;function cp(dp){let fp=dp;if(typeof dp=="function")fp=dp(lp);else if(typeof dp!="object")return dp;if(!fp)return null;const pp=createEmptyBreakpointObject(lp.breakpoints),hp=Object.keys(pp);let mp=pp;return Object.keys(fp).forEach(gp=>{const vp=callIfFn(fp[gp],lp);if(vp!=null)if(typeof vp=="object")if(up[gp])mp=merge$1(mp,_d(gp,vp,lp,up));else{const xp=handleBreakpoints({theme:lp},vp,Sp=>({[gp]:Sp}));objectsHaveSameKeys(xp,vp)?mp[gp]=rp({sx:vp,theme:lp}):mp=merge$1(mp,xp)}else mp=merge$1(mp,_d(gp,vp,lp,up))}),removeUnusedBreakpoints(hp,mp)}return Array.isArray(sp)?sp.map(cp):cp(sp)}return rp}const styleFunctionSx=unstable_createStyleFunctionSx();styleFunctionSx.filterProps=["sx"];const _excluded$7=["breakpoints","palette","spacing","shape"];function createTheme$1(_d={},...rp){const{breakpoints:np={},palette:ap={},spacing:sp,shape:lp={}}=_d,up=_objectWithoutPropertiesLoose(_d,_excluded$7),cp=createBreakpoints(np),dp=createSpacing(sp);let fp=deepmerge({breakpoints:cp,direction:"ltr",components:{},palette:_extends$1({mode:"light"},ap),spacing:dp,shape:_extends$1({},shape$1,lp)},up);return fp=rp.reduce((pp,hp)=>deepmerge(pp,hp),fp),fp.unstable_sxConfig=_extends$1({},defaultSxConfig$1,up==null?void 0:up.unstable_sxConfig),fp.unstable_sx=function(hp){return styleFunctionSx({sx:hp,theme:this})},fp}function isObjectEmpty$1(_d){return Object.keys(_d).length===0}function useTheme$1(_d=null){const rp=reactExports.useContext(ThemeContext);return!rp||isObjectEmpty$1(rp)?_d:rp}const systemDefaultTheme$1=createTheme$1();function useTheme(_d=systemDefaultTheme$1){return useTheme$1(_d)}const _excluded$6=["variant"];function isEmpty$1(_d){return _d.length===0}function propsToClassKey(_d){const{variant:rp}=_d,np=_objectWithoutPropertiesLoose(_d,_excluded$6);let ap=rp||"";return Object.keys(np).sort().forEach(sp=>{sp==="color"?ap+=isEmpty$1(ap)?_d[sp]:capitalize(_d[sp]):ap+=`${isEmpty$1(ap)?sp:capitalize(sp)}${capitalize(_d[sp].toString())}`}),ap}const _excluded$5=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function isEmpty(_d){return Object.keys(_d).length===0}function isStringTag(_d){return typeof _d=="string"&&_d.charCodeAt(0)>96}const getStyleOverrides=(_d,rp)=>rp.components&&rp.components[_d]&&rp.components[_d].styleOverrides?rp.components[_d].styleOverrides:null,transformVariants=_d=>{let rp=0;const np={};return _d&&_d.forEach(ap=>{let sp="";typeof ap.props=="function"?(sp=`callback${rp}`,rp+=1):sp=propsToClassKey(ap.props),np[sp]=ap.style}),np},getVariantStyles=(_d,rp)=>{let np=[];return rp&&rp.components&&rp.components[_d]&&rp.components[_d].variants&&(np=rp.components[_d].variants),transformVariants(np)},variantsResolver=(_d,rp,np)=>{const{ownerState:ap={}}=_d,sp=[];let lp=0;return np&&np.forEach(up=>{let cp=!0;if(typeof up.props=="function"){const dp=_extends$1({},_d,ap);cp=up.props(dp)}else Object.keys(up.props).forEach(dp=>{ap[dp]!==up.props[dp]&&_d[dp]!==up.props[dp]&&(cp=!1)});cp&&(typeof up.props=="function"?sp.push(rp[`callback${lp}`]):sp.push(rp[propsToClassKey(up.props)])),typeof up.props=="function"&&(lp+=1)}),sp},themeVariantsResolver=(_d,rp,np,ap)=>{var sp;const lp=np==null||(sp=np.components)==null||(sp=sp[ap])==null?void 0:sp.variants;return variantsResolver(_d,rp,lp)};function shouldForwardProp(_d){return _d!=="ownerState"&&_d!=="theme"&&_d!=="sx"&&_d!=="as"}const systemDefaultTheme=createTheme$1(),lowercaseFirstLetter=_d=>_d&&_d.charAt(0).toLowerCase()+_d.slice(1);function resolveTheme({defaultTheme:_d,theme:rp,themeId:np}){return isEmpty(rp)?_d:rp[np]||rp}function defaultOverridesResolver(_d){return _d?(rp,np)=>np[_d]:null}const muiStyledFunctionResolver=({styledArg:_d,props:rp,defaultTheme:np,themeId:ap})=>{const sp=_d(_extends$1({},rp,{theme:resolveTheme(_extends$1({},rp,{defaultTheme:np,themeId:ap}))}));let lp;if(sp&&sp.variants&&(lp=sp.variants,delete sp.variants),lp){const up=variantsResolver(rp,transformVariants(lp),lp);return[sp,...up]}return sp};function createStyled(_d={}){const{themeId:rp,defaultTheme:np=systemDefaultTheme,rootShouldForwardProp:ap=shouldForwardProp,slotShouldForwardProp:sp=shouldForwardProp}=_d,lp=up=>styleFunctionSx(_extends$1({},up,{theme:resolveTheme(_extends$1({},up,{defaultTheme:np,themeId:rp}))}));return lp.__mui_systemSx=!0,(up,cp={})=>{internal_processStyles(up,wp=>wp.filter(_p=>!(_p!=null&&_p.__mui_systemSx)));const{name:dp,slot:fp,skipVariantsResolver:pp,skipSx:hp,overridesResolver:mp=defaultOverridesResolver(lowercaseFirstLetter(fp))}=cp,gp=_objectWithoutPropertiesLoose(cp,_excluded$5),vp=pp!==void 0?pp:fp&&fp!=="Root"&&fp!=="root"||!1,xp=hp||!1;let Sp,yp=shouldForwardProp;fp==="Root"||fp==="root"?yp=ap:fp?yp=sp:isStringTag(up)&&(yp=void 0);const bp=styled$1(up,_extends$1({shouldForwardProp:yp,label:Sp},gp)),Ep=(wp,..._p)=>{const Rp=_p?_p.map(Op=>{if(typeof Op=="function"&&Op.__emotion_real!==Op)return Lp=>muiStyledFunctionResolver({styledArg:Op,props:Lp,defaultTheme:np,themeId:rp});if(isPlainObject$2(Op)){let Lp=Op,Mp;return Op&&Op.variants&&(Mp=Op.variants,delete Lp.variants,Lp=kp=>{let Dp=Op;return variantsResolver(kp,transformVariants(Mp),Mp).forEach(Ip=>{Dp=deepmerge(Dp,Ip)}),Dp}),Lp}return Op}):[];let $p=wp;if(isPlainObject$2(wp)){let Op;wp&&wp.variants&&(Op=wp.variants,delete $p.variants,$p=Lp=>{let Mp=wp;return variantsResolver(Lp,transformVariants(Op),Op).forEach(Dp=>{Mp=deepmerge(Mp,Dp)}),Mp})}else typeof wp=="function"&&wp.__emotion_real!==wp&&($p=Op=>muiStyledFunctionResolver({styledArg:wp,props:Op,defaultTheme:np,themeId:rp}));dp&&mp&&Rp.push(Op=>{const Lp=resolveTheme(_extends$1({},Op,{defaultTheme:np,themeId:rp})),Mp=getStyleOverrides(dp,Lp);if(Mp){const kp={};return Object.entries(Mp).forEach(([Dp,Fp])=>{kp[Dp]=typeof Fp=="function"?Fp(_extends$1({},Op,{theme:Lp})):Fp}),mp(Op,kp)}return null}),dp&&!vp&&Rp.push(Op=>{const Lp=resolveTheme(_extends$1({},Op,{defaultTheme:np,themeId:rp}));return themeVariantsResolver(Op,getVariantStyles(dp,Lp),Lp,dp)}),xp||Rp.push(lp);const Cp=Rp.length-_p.length;if(Array.isArray(wp)&&Cp>0){const Op=new Array(Cp).fill("");$p=[...wp,...Op],$p.raw=[...wp.raw,...Op]}const Ap=bp($p,...Rp);return up.muiName&&(Ap.muiName=up.muiName),Ap};return bp.withConfig&&(Ep.withConfig=bp.withConfig),Ep}}function getThemeProps(_d){const{theme:rp,name:np,props:ap}=_d;return!rp||!rp.components||!rp.components[np]||!rp.components[np].defaultProps?ap:resolveProps(rp.components[np].defaultProps,ap)}function useThemeProps$1({props:_d,name:rp,defaultTheme:np,themeId:ap}){let sp=useTheme(np);return ap&&(sp=sp[ap]||sp),getThemeProps({theme:sp,name:rp,props:_d})}function clampWrapper(_d,rp=0,np=1){return clamp(_d,rp,np)}function hexToRgb(_d){_d=_d.slice(1);const rp=new RegExp(`.{1,${_d.length>=6?2:1}}`,"g");let np=_d.match(rp);return np&&np[0].length===1&&(np=np.map(ap=>ap+ap)),np?`rgb${np.length===4?"a":""}(${np.map((ap,sp)=>sp<3?parseInt(ap,16):Math.round(parseInt(ap,16)/255*1e3)/1e3).join(", ")})`:""}function decomposeColor(_d){if(_d.type)return _d;if(_d.charAt(0)==="#")return decomposeColor(hexToRgb(_d));const rp=_d.indexOf("("),np=_d.substring(0,rp);if(["rgb","rgba","hsl","hsla","color"].indexOf(np)===-1)throw new Error(formatMuiErrorMessage(9,_d));let ap=_d.substring(rp+1,_d.length-1),sp;if(np==="color"){if(ap=ap.split(" "),sp=ap.shift(),ap.length===4&&ap[3].charAt(0)==="/"&&(ap[3]=ap[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(sp)===-1)throw new Error(formatMuiErrorMessage(10,sp))}else ap=ap.split(",");return ap=ap.map(lp=>parseFloat(lp)),{type:np,values:ap,colorSpace:sp}}function recomposeColor(_d){const{type:rp,colorSpace:np}=_d;let{values:ap}=_d;return rp.indexOf("rgb")!==-1?ap=ap.map((sp,lp)=>lp<3?parseInt(sp,10):sp):rp.indexOf("hsl")!==-1&&(ap[1]=`${ap[1]}%`,ap[2]=`${ap[2]}%`),rp.indexOf("color")!==-1?ap=`${np} ${ap.join(" ")}`:ap=`${ap.join(", ")}`,`${rp}(${ap})`}function hslToRgb(_d){_d=decomposeColor(_d);const{values:rp}=_d,np=rp[0],ap=rp[1]/100,sp=rp[2]/100,lp=ap*Math.min(sp,1-sp),up=(fp,pp=(fp+np/30)%12)=>sp-lp*Math.max(Math.min(pp-3,9-pp,1),-1);let cp="rgb";const dp=[Math.round(up(0)*255),Math.round(up(8)*255),Math.round(up(4)*255)];return _d.type==="hsla"&&(cp+="a",dp.push(rp[3])),recomposeColor({type:cp,values:dp})}function getLuminance(_d){_d=decomposeColor(_d);let rp=_d.type==="hsl"||_d.type==="hsla"?decomposeColor(hslToRgb(_d)).values:_d.values;return rp=rp.map(np=>(_d.type!=="color"&&(np/=255),np<=.03928?np/12.92:((np+.055)/1.055)**2.4)),Number((.2126*rp[0]+.7152*rp[1]+.0722*rp[2]).toFixed(3))}function getContrastRatio(_d,rp){const np=getLuminance(_d),ap=getLuminance(rp);return(Math.max(np,ap)+.05)/(Math.min(np,ap)+.05)}function darken(_d,rp){if(_d=decomposeColor(_d),rp=clampWrapper(rp),_d.type.indexOf("hsl")!==-1)_d.values[2]*=1-rp;else if(_d.type.indexOf("rgb")!==-1||_d.type.indexOf("color")!==-1)for(let np=0;np<3;np+=1)_d.values[np]*=1-rp;return recomposeColor(_d)}function lighten(_d,rp){if(_d=decomposeColor(_d),rp=clampWrapper(rp),_d.type.indexOf("hsl")!==-1)_d.values[2]+=(100-_d.values[2])*rp;else if(_d.type.indexOf("rgb")!==-1)for(let np=0;np<3;np+=1)_d.values[np]+=(255-_d.values[np])*rp;else if(_d.type.indexOf("color")!==-1)for(let np=0;np<3;np+=1)_d.values[np]+=(1-_d.values[np])*rp;return recomposeColor(_d)}function createMixins(_d,rp){return _extends$1({toolbar:{minHeight:56,[_d.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[_d.up("sm")]:{minHeight:64}}},rp)}const common={black:"#000",white:"#fff"},common$1=common,grey={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},grey$1=grey,purple={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},purple$1=purple,red={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},red$1=red,orange={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},orange$1=orange,blue={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},blue$1=blue,lightBlue={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},lightBlue$1=lightBlue,green={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},green$1=green,_excluded$4=["mode","contrastThreshold","tonalOffset"],light={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:common$1.white,default:common$1.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},dark={text:{primary:common$1.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:common$1.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function addLightOrDark(_d,rp,np,ap){const sp=ap.light||ap,lp=ap.dark||ap*1.5;_d[rp]||(_d.hasOwnProperty(np)?_d[rp]=_d[np]:rp==="light"?_d.light=lighten(_d.main,sp):rp==="dark"&&(_d.dark=darken(_d.main,lp)))}function getDefaultPrimary(_d="light"){return _d==="dark"?{main:blue$1[200],light:blue$1[50],dark:blue$1[400]}:{main:blue$1[700],light:blue$1[400],dark:blue$1[800]}}function getDefaultSecondary(_d="light"){return _d==="dark"?{main:purple$1[200],light:purple$1[50],dark:purple$1[400]}:{main:purple$1[500],light:purple$1[300],dark:purple$1[700]}}function getDefaultError(_d="light"){return _d==="dark"?{main:red$1[500],light:red$1[300],dark:red$1[700]}:{main:red$1[700],light:red$1[400],dark:red$1[800]}}function getDefaultInfo(_d="light"){return _d==="dark"?{main:lightBlue$1[400],light:lightBlue$1[300],dark:lightBlue$1[700]}:{main:lightBlue$1[700],light:lightBlue$1[500],dark:lightBlue$1[900]}}function getDefaultSuccess(_d="light"){return _d==="dark"?{main:green$1[400],light:green$1[300],dark:green$1[700]}:{main:green$1[800],light:green$1[500],dark:green$1[900]}}function getDefaultWarning(_d="light"){return _d==="dark"?{main:orange$1[400],light:orange$1[300],dark:orange$1[700]}:{main:"#ed6c02",light:orange$1[500],dark:orange$1[900]}}function createPalette(_d){const{mode:rp="light",contrastThreshold:np=3,tonalOffset:ap=.2}=_d,sp=_objectWithoutPropertiesLoose(_d,_excluded$4),lp=_d.primary||getDefaultPrimary(rp),up=_d.secondary||getDefaultSecondary(rp),cp=_d.error||getDefaultError(rp),dp=_d.info||getDefaultInfo(rp),fp=_d.success||getDefaultSuccess(rp),pp=_d.warning||getDefaultWarning(rp);function hp(xp){return getContrastRatio(xp,dark.text.primary)>=np?dark.text.primary:light.text.primary}const mp=({color:xp,name:Sp,mainShade:yp=500,lightShade:bp=300,darkShade:Ep=700})=>{if(xp=_extends$1({},xp),!xp.main&&xp[yp]&&(xp.main=xp[yp]),!xp.hasOwnProperty("main"))throw new Error(formatMuiErrorMessage(11,Sp?` (${Sp})`:"",yp));if(typeof xp.main!="string")throw new Error(formatMuiErrorMessage(12,Sp?` (${Sp})`:"",JSON.stringify(xp.main)));return addLightOrDark(xp,"light",bp,ap),addLightOrDark(xp,"dark",Ep,ap),xp.contrastText||(xp.contrastText=hp(xp.main)),xp},gp={dark,light};return deepmerge(_extends$1({common:_extends$1({},common$1),mode:rp,primary:mp({color:lp,name:"primary"}),secondary:mp({color:up,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:mp({color:cp,name:"error"}),warning:mp({color:pp,name:"warning"}),info:mp({color:dp,name:"info"}),success:mp({color:fp,name:"success"}),grey:grey$1,contrastThreshold:np,getContrastText:hp,augmentColor:mp,tonalOffset:ap},gp[rp]),sp)}const _excluded$3=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function round(_d){return Math.round(_d*1e5)/1e5}const caseAllCaps={textTransform:"uppercase"},defaultFontFamily='"Roboto", "Helvetica", "Arial", sans-serif';function createTypography(_d,rp){const np=typeof rp=="function"?rp(_d):rp,{fontFamily:ap=defaultFontFamily,fontSize:sp=14,fontWeightLight:lp=300,fontWeightRegular:up=400,fontWeightMedium:cp=500,fontWeightBold:dp=700,htmlFontSize:fp=16,allVariants:pp,pxToRem:hp}=np,mp=_objectWithoutPropertiesLoose(np,_excluded$3),gp=sp/14,vp=hp||(yp=>`${yp/fp*gp}rem`),xp=(yp,bp,Ep,wp,_p)=>_extends$1({fontFamily:ap,fontWeight:yp,fontSize:vp(bp),lineHeight:Ep},ap===defaultFontFamily?{letterSpacing:`${round(wp/bp)}em`}:{},_p,pp),Sp={h1:xp(lp,96,1.167,-1.5),h2:xp(lp,60,1.2,-.5),h3:xp(up,48,1.167,0),h4:xp(up,34,1.235,.25),h5:xp(up,24,1.334,0),h6:xp(cp,20,1.6,.15),subtitle1:xp(up,16,1.75,.15),subtitle2:xp(cp,14,1.57,.1),body1:xp(up,16,1.5,.15),body2:xp(up,14,1.43,.15),button:xp(cp,14,1.75,.4,caseAllCaps),caption:xp(up,12,1.66,.4),overline:xp(up,12,2.66,1,caseAllCaps),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return deepmerge(_extends$1({htmlFontSize:fp,pxToRem:vp,fontFamily:ap,fontSize:sp,fontWeightLight:lp,fontWeightRegular:up,fontWeightMedium:cp,fontWeightBold:dp},Sp),mp,{clone:!1})}const shadowKeyUmbraOpacity=.2,shadowKeyPenumbraOpacity=.14,shadowAmbientShadowOpacity=.12;function createShadow(..._d){return[`${_d[0]}px ${_d[1]}px ${_d[2]}px ${_d[3]}px rgba(0,0,0,${shadowKeyUmbraOpacity})`,`${_d[4]}px ${_d[5]}px ${_d[6]}px ${_d[7]}px rgba(0,0,0,${shadowKeyPenumbraOpacity})`,`${_d[8]}px ${_d[9]}px ${_d[10]}px ${_d[11]}px rgba(0,0,0,${shadowAmbientShadowOpacity})`].join(",")}const shadows=["none",createShadow(0,2,1,-1,0,1,1,0,0,1,3,0),createShadow(0,3,1,-2,0,2,2,0,0,1,5,0),createShadow(0,3,3,-2,0,3,4,0,0,1,8,0),createShadow(0,2,4,-1,0,4,5,0,0,1,10,0),createShadow(0,3,5,-1,0,5,8,0,0,1,14,0),createShadow(0,3,5,-1,0,6,10,0,0,1,18,0),createShadow(0,4,5,-2,0,7,10,1,0,2,16,1),createShadow(0,5,5,-3,0,8,10,1,0,3,14,2),createShadow(0,5,6,-3,0,9,12,1,0,3,16,2),createShadow(0,6,6,-3,0,10,14,1,0,4,18,3),createShadow(0,6,7,-4,0,11,15,1,0,4,20,3),createShadow(0,7,8,-4,0,12,17,2,0,5,22,4),createShadow(0,7,8,-4,0,13,19,2,0,5,24,4),createShadow(0,7,9,-4,0,14,21,2,0,5,26,4),createShadow(0,8,9,-5,0,15,22,2,0,6,28,5),createShadow(0,8,10,-5,0,16,24,2,0,6,30,5),createShadow(0,8,11,-5,0,17,26,2,0,6,32,5),createShadow(0,9,11,-5,0,18,28,2,0,7,34,6),createShadow(0,9,12,-6,0,19,29,2,0,7,36,6),createShadow(0,10,13,-6,0,20,31,3,0,8,38,7),createShadow(0,10,13,-6,0,21,33,3,0,8,40,7),createShadow(0,10,14,-6,0,22,35,3,0,8,42,7),createShadow(0,11,14,-7,0,23,36,3,0,9,44,8),createShadow(0,11,15,-7,0,24,38,3,0,9,46,8)],_excluded$2=["duration","easing","delay"],easing={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},duration={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function formatMs(_d){return`${Math.round(_d)}ms`}function getAutoHeightDuration(_d){if(!_d)return 0;const rp=_d/36;return Math.round((4+15*rp**.25+rp/5)*10)}function createTransitions(_d){const rp=_extends$1({},easing,_d.easing),np=_extends$1({},duration,_d.duration);return _extends$1({getAutoHeightDuration,create:(sp=["all"],lp={})=>{const{duration:up=np.standard,easing:cp=rp.easeInOut,delay:dp=0}=lp;return _objectWithoutPropertiesLoose(lp,_excluded$2),(Array.isArray(sp)?sp:[sp]).map(fp=>`${fp} ${typeof up=="string"?up:formatMs(up)} ${cp} ${typeof dp=="string"?dp:formatMs(dp)}`).join(",")}},_d,{easing:rp,duration:np})}const zIndex={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},zIndex$1=zIndex,_excluded$1=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function createTheme(_d={},...rp){const{mixins:np={},palette:ap={},transitions:sp={},typography:lp={}}=_d,up=_objectWithoutPropertiesLoose(_d,_excluded$1);if(_d.vars)throw new Error(formatMuiErrorMessage(18));const cp=createPalette(ap),dp=createTheme$1(_d);let fp=deepmerge(dp,{mixins:createMixins(dp.breakpoints,np),palette:cp,shadows:shadows.slice(),typography:createTypography(cp,lp),transitions:createTransitions(sp),zIndex:_extends$1({},zIndex$1),applyDarkStyles(pp){return this.vars?{[this.getColorSchemeSelector("dark").replace(/(\[[^\]]+\])/,":where($1)")]:pp}:this.palette.mode==="dark"?pp:{}}});return fp=deepmerge(fp,up),fp=rp.reduce((pp,hp)=>deepmerge(pp,hp),fp),fp.unstable_sxConfig=_extends$1({},defaultSxConfig$1,up==null?void 0:up.unstable_sxConfig),fp.unstable_sx=function(hp){return styleFunctionSx({sx:hp,theme:this})},fp}const defaultTheme=createTheme(),defaultTheme$1=defaultTheme,THEME_ID="$$material";function useThemeProps({props:_d,name:rp}){return useThemeProps$1({props:_d,name:rp,defaultTheme:defaultTheme$1,themeId:THEME_ID})}const rootShouldForwardProp=_d=>shouldForwardProp(_d)&&_d!=="classes",styled=createStyled({themeId:THEME_ID,defaultTheme:defaultTheme$1,rootShouldForwardProp});function getSvgIconUtilityClass(_d){return generateUtilityClass("MuiSvgIcon",_d)}generateUtilityClasses("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const _excluded=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],useUtilityClasses=_d=>{const{color:rp,fontSize:np,classes:ap}=_d,sp={root:["root",rp!=="inherit"&&`color${capitalize(rp)}`,`fontSize${capitalize(np)}`]};return composeClasses(sp,getSvgIconUtilityClass,ap)},SvgIconRoot=styled("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(_d,rp)=>{const{ownerState:np}=_d;return[rp.root,np.color!=="inherit"&&rp[`color${capitalize(np.color)}`],rp[`fontSize${capitalize(np.fontSize)}`]]}})(({theme:_d,ownerState:rp})=>{var np,ap,sp,lp,up,cp,dp,fp,pp,hp,mp,gp,vp;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:rp.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:(np=_d.transitions)==null||(ap=np.create)==null?void 0:ap.call(np,"fill",{duration:(sp=_d.transitions)==null||(sp=sp.duration)==null?void 0:sp.shorter}),fontSize:{inherit:"inherit",small:((lp=_d.typography)==null||(up=lp.pxToRem)==null?void 0:up.call(lp,20))||"1.25rem",medium:((cp=_d.typography)==null||(dp=cp.pxToRem)==null?void 0:dp.call(cp,24))||"1.5rem",large:((fp=_d.typography)==null||(pp=fp.pxToRem)==null?void 0:pp.call(fp,35))||"2.1875rem"}[rp.fontSize],color:(hp=(mp=(_d.vars||_d).palette)==null||(mp=mp[rp.color])==null?void 0:mp.main)!=null?hp:{action:(gp=(_d.vars||_d).palette)==null||(gp=gp.action)==null?void 0:gp.active,disabled:(vp=(_d.vars||_d).palette)==null||(vp=vp.action)==null?void 0:vp.disabled,inherit:void 0}[rp.color]}}),SvgIcon=reactExports.forwardRef(function(rp,np){const ap=useThemeProps({props:rp,name:"MuiSvgIcon"}),{children:sp,className:lp,color:up="inherit",component:cp="svg",fontSize:dp="medium",htmlColor:fp,inheritViewBox:pp=!1,titleAccess:hp,viewBox:mp="0 0 24 24"}=ap,gp=_objectWithoutPropertiesLoose(ap,_excluded),vp=reactExports.isValidElement(sp)&&sp.type==="svg",xp=_extends$1({},ap,{color:up,component:cp,fontSize:dp,instanceFontSize:rp.fontSize,inheritViewBox:pp,viewBox:mp,hasSvgAsChild:vp}),Sp={};pp||(Sp.viewBox=mp);const yp=useUtilityClasses(xp);return jsxRuntimeExports.jsxs(SvgIconRoot,_extends$1({as:cp,className:clsx(yp.root,lp),focusable:"false",color:fp,"aria-hidden":hp?void 0:!0,role:hp?"img":void 0,ref:np},Sp,gp,vp&&sp.props,{ownerState:xp,children:[vp?sp.props.children:sp,hp?jsxRuntimeExports.jsx("title",{children:hp}):null]}))});SvgIcon.muiName="SvgIcon";function createSvgIcon(_d,rp){function np(ap,sp){return jsxRuntimeExports.jsx(SvgIcon,_extends$1({"data-testid":`${rp}Icon`,ref:sp},ap,{children:_d}))}return np.muiName=SvgIcon.muiName,reactExports.memo(reactExports.forwardRef(np))}const unstable_ClassNameGenerator={configure:_d=>{ClassNameGenerator.configure(_d)}},utils$2=Object.freeze(Object.defineProperty({__proto__:null,capitalize,createChainedFunction,createSvgIcon,debounce:debounce$1,deprecatedPropType,isMuiElement,ownerDocument,ownerWindow,requirePropFactory,setRef,unstable_ClassNameGenerator,unstable_useEnhancedEffect:useEnhancedEffect$1,unstable_useId:useId,unsupportedProp,useControlled,useEventCallback,useForkRef,useIsFocusVisible},Symbol.toStringTag,{value:"Module"})),require$$0$3=getAugmentedNamespace(utils$2);var hasRequiredCreateSvgIcon;function requireCreateSvgIcon(){return hasRequiredCreateSvgIcon||(hasRequiredCreateSvgIcon=1,function(_d){"use client";Object.defineProperty(_d,"__esModule",{value:!0}),Object.defineProperty(_d,"default",{enumerable:!0,get:function(){return rp.createSvgIcon}});var rp=require$$0$3}(createSvgIcon$1)),createSvgIcon$1}var _interopRequireDefault$P=interopRequireDefaultExports;Object.defineProperty(PersonOutlineOutlined,"__esModule",{value:!0});var default_1$A=PersonOutlineOutlined.default=void 0,_createSvgIcon$A=_interopRequireDefault$P(requireCreateSvgIcon()),_jsxRuntime$A=jsxRuntimeExports;default_1$A=PersonOutlineOutlined.default=(0,_createSvgIcon$A.default)((0,_jsxRuntime$A.jsx)("path",{d:"M12 5.9c1.16 0 2.1.94 2.1 2.1s-.94 2.1-2.1 2.1S9.9 9.16 9.9 8s.94-2.1 2.1-2.1m0 9c2.97 0 6.1 1.46 6.1 2.1v1.1H5.9V17c0-.64 3.13-2.1 6.1-2.1M12 4C9.79 4 8 5.79 8 8s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4m0 9c-2.67 0-8 1.34-8 4v3h16v-3c0-2.66-5.33-4-8-4"}),"PersonOutlineOutlined");var Camera={},_interopRequireDefault$O=interopRequireDefaultExports;Object.defineProperty(Camera,"__esModule",{value:!0});var default_1$z=Camera.default=void 0,_createSvgIcon$z=_interopRequireDefault$O(requireCreateSvgIcon()),_jsxRuntime$z=jsxRuntimeExports;default_1$z=Camera.default=(0,_createSvgIcon$z.default)((0,_jsxRuntime$z.jsx)("path",{d:"m9.4 10.5 4.77-8.26C13.47 2.09 12.75 2 12 2c-2.4 0-4.6.85-6.32 2.25l3.66 6.35zM21.54 9c-.92-2.92-3.15-5.26-6-6.34L11.88 9zm.26 1h-7.49l.29.5 4.76 8.25C21 16.97 22 14.61 22 12c0-.69-.07-1.35-.2-2M8.54 12l-3.9-6.75C3.01 7.03 2 9.39 2 12c0 .69.07 1.35.2 2h7.49zm-6.08 3c.92 2.92 3.15 5.26 6 6.34L12.12 15zm11.27 0-3.9 6.76c.7.15 1.42.24 2.17.24 2.4 0 4.6-.85 6.32-2.25l-3.66-6.35z"}),"Camera");var DashboardOutlined={},_interopRequireDefault$N=interopRequireDefaultExports;Object.defineProperty(DashboardOutlined,"__esModule",{value:!0});var default_1$y=DashboardOutlined.default=void 0,_createSvgIcon$y=_interopRequireDefault$N(requireCreateSvgIcon()),_jsxRuntime$y=jsxRuntimeExports;default_1$y=DashboardOutlined.default=(0,_createSvgIcon$y.default)((0,_jsxRuntime$y.jsx)("path",{d:"M19 5v2h-4V5zM9 5v6H5V5zm10 8v6h-4v-6zM9 17v2H5v-2zM21 3h-8v6h8zM11 3H3v10h8zm10 8h-8v10h8zm-10 4H3v6h8z"}),"DashboardOutlined");var HomeOutlined={},_interopRequireDefault$M=interopRequireDefaultExports;Object.defineProperty(HomeOutlined,"__esModule",{value:!0});var default_1$x=HomeOutlined.default=void 0,_createSvgIcon$x=_interopRequireDefault$M(requireCreateSvgIcon()),_jsxRuntime$x=jsxRuntimeExports;default_1$x=HomeOutlined.default=(0,_createSvgIcon$x.default)((0,_jsxRuntime$x.jsx)("path",{d:"m12 5.69 5 4.5V18h-2v-6H9v6H7v-7.81zM12 3 2 12h3v8h6v-6h2v6h6v-8h3z"}),"HomeOutlined");var LocationOnOutlined={},_interopRequireDefault$L=interopRequireDefaultExports;Object.defineProperty(LocationOnOutlined,"__esModule",{value:!0});var default_1$w=LocationOnOutlined.default=void 0,_createSvgIcon$w=_interopRequireDefault$L(requireCreateSvgIcon()),_jsxRuntime$w=jsxRuntimeExports;default_1$w=LocationOnOutlined.default=(0,_createSvgIcon$w.default)([(0,_jsxRuntime$w.jsx)("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7M7 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 2.88-2.88 7.19-5 9.88C9.92 16.21 7 11.85 7 9"},"0"),(0,_jsxRuntime$w.jsx)("circle",{cx:"12",cy:"9",r:"2.5"},"1")],"LocationOnOutlined");var CameraAltOutlined={},_interopRequireDefault$K=interopRequireDefaultExports;Object.defineProperty(CameraAltOutlined,"__esModule",{value:!0});var default_1$v=CameraAltOutlined.default=void 0,_createSvgIcon$v=_interopRequireDefault$K(requireCreateSvgIcon()),_jsxRuntime$v=jsxRuntimeExports;default_1$v=CameraAltOutlined.default=(0,_createSvgIcon$v.default)((0,_jsxRuntime$v.jsx)("path",{d:"M20 4h-3.17L15 2H9L7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 14H4V6h4.05l1.83-2h4.24l1.83 2H20zM12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5m0 8c-1.65 0-3-1.35-3-3s1.35-3 3-3 3 1.35 3 3-1.35 3-3 3"}),"CameraAltOutlined");var PhotoLibraryOutlined={},_interopRequireDefault$J=interopRequireDefaultExports;Object.defineProperty(PhotoLibraryOutlined,"__esModule",{value:!0});var default_1$u=PhotoLibraryOutlined.default=void 0,_createSvgIcon$u=_interopRequireDefault$J(requireCreateSvgIcon()),_jsxRuntime$u=jsxRuntimeExports;default_1$u=PhotoLibraryOutlined.default=(0,_createSvgIcon$u.default)((0,_jsxRuntime$u.jsx)("path",{d:"M20 4v12H8V4zm0-2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m-8.5 9.67 1.69 2.26 2.48-3.1L19 15H9zM2 6v14c0 1.1.9 2 2 2h14v-2H4V6z"}),"PhotoLibraryOutlined");const Navbar=()=>{const _d=useNavigate();localStorage.getItem("jwt");const[rp,np]=reactExports.useState(!1),ap=sp=>{const lp=sp.target.files[0],up=new FileReader;up.readAsDataURL(lp),up.onloadend=()=>[_d("/fish/image/edit",{state:{value:up.result}})]};return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:"container",children:[jsxRuntimeExports.jsx("div",{className:"Navbar_body",children:jsxRuntimeExports.jsx(Outlet,{})}),jsxRuntimeExports.jsxs("nav",{className:"nav",children:[jsxRuntimeExports.jsxs(NavLink,{to:"/",className:"nav-item",children:[jsxRuntimeExports.jsx(default_1$x,{}),jsxRuntimeExports.jsx("span",{children:"홈"})]}),jsxRuntimeExports.jsxs(NavLink,{to:"/fish/map",className:"nav-item",children:[jsxRuntimeExports.jsx(default_1$w,{}),jsxRuntimeExports.jsx("span",{children:"피싱맵"})]}),jsxRuntimeExports.jsxs("div",{className:"nav-item hidden",children:[jsxRuntimeExports.jsxs("svg",{className:"icon",stroke:"currentColor",fill:"none",strokeWidth:"2",viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsx("circle",{cx:"9",cy:"21",r:"1"}),jsxRuntimeExports.jsx("circle",{cx:"20",cy:"21",r:"1"}),jsxRuntimeExports.jsx("path",{d:"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"})]}),jsxRuntimeExports.jsx("span",{children:"Home"})]}),jsxRuntimeExports.jsx("div",{className:"nav-item btn ",children:jsxRuntimeExports.jsx("div",{className:"custum-file-upload bg-blue",onClick:()=>np(!0),children:jsxRuntimeExports.jsx(default_1$z,{})})}),jsxRuntimeExports.jsxs(NavLink,{to:"/media",className:"nav-item ",children:[jsxRuntimeExports.jsx(default_1$y,{}),jsxRuntimeExports.jsx("span",{children:"RoomList"})]}),jsxRuntimeExports.jsxs(NavLink,{to:"/user/mypage",className:"nav-item",children:[jsxRuntimeExports.jsx(default_1$A,{}),jsxRuntimeExports.jsx("span",{children:"마이"})]})]}),rp&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"choice",onClick:()=>np(!1)}),jsxRuntimeExports.jsxs("div",{className:"camera-content",children:[jsxRuntimeExports.jsxs("label",{htmlFor:"file1",children:[jsxRuntimeExports.jsx(default_1$v,{}),"카메라로 촬영",jsxRuntimeExports.jsx("input",{type:"file",id:"file1",accept:"image/*",capture:"camera",onChange:ap})]}),jsxRuntimeExports.jsxs("label",{htmlFor:"file2",children:[jsxRuntimeExports.jsx(default_1$u,{}),"앨범에서 선택",jsxRuntimeExports.jsx("input",{type:"file",id:"file2",accept:"image/*",onChange:ap})]})]})]})]})})},SHOWS=[{page:0,title:"Tutorial",url:"/tutorial"},{page:1,title:"너의이름은",url:"/fishbook"},{page:2,title:"수족관",url:"/chatbot"}],Slider=({setBack:_d})=>{const rp=useNavigate(),np=ap=>{rp(ap)};return jsxRuntimeExports.jsx("div",{className:"slider",children:jsxRuntimeExports.jsx(Swiper,{modules:[EffectCoverflow],effect:"coverflow",slidesPerView:1.4,centeredSlides:!0,mousewheel:{invert:!1},onSlideChange:ap=>{_d(ap.activeIndex)},spaceBetween:-100,slideToClickedSlide:!0,coverflowEffect:{rotate:50,stretch:0,depth:100,modifier:1,slideShadows:!0},children:SHOWS.map((ap,sp)=>jsxRuntimeExports.jsx(SwiperSlide,{className:`slider${ap.page}`,onClick:()=>np(ap.url),children:ap.title},sp))})})},logo="/assets/Logo-WtStl40p.svg";function IoBookOutline(_d){return GenIcon({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M256 160c16-63.16 76.43-95.41 208-96a15.94 15.94 0 0 1 16 16v288a16 16 0 0 1-16 16c-128 0-177.45 25.81-208 64-30.37-38-80-64-208-64-9.88 0-16-8.05-16-17.93V80a15.94 15.94 0 0 1 16-16c131.57.59 192 32.84 208 96zm0 0v288"},child:[]}]})(_d)}var Phishing={},_interopRequireDefault$I=interopRequireDefaultExports;Object.defineProperty(Phishing,"__esModule",{value:!0});var default_1$t=Phishing.default=void 0,_createSvgIcon$t=_interopRequireDefault$I(requireCreateSvgIcon()),_jsxRuntime$t=jsxRuntimeExports;default_1$t=Phishing.default=(0,_createSvgIcon$t.default)((0,_jsxRuntime$t.jsx)("path",{d:"M19 9c0-1.3-.84-2.4-2-2.82V2h-2v4.18C13.84 6.6 13 7.7 13 9s.84 2.4 2 2.82V15c0 2.21-1.79 4-4 4s-4-1.79-4-4v-1h3L5 9v6c0 3.31 2.69 6 6 6s6-2.69 6-6v-3.18c1.16-.42 2-1.52 2-2.82m-3 1c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1"}),"Phishing");function HomePage(){const[_d,rp]=reactExports.useState(0),np=useNavigate(),ap=sp=>rp(sp);return reactExports.useEffect(()=>{localStorage.getItem("jwt")||np("/login")},[]),jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:`home slider${_d}`,children:[jsxRuntimeExports.jsxs("div",{className:"Home_header",children:[jsxRuntimeExports.jsx("img",{src:logo,alt:"logo"}),jsxRuntimeExports.jsx(Link,{to:"/fishbook","aria-label":"어종도감 이동",children:jsxRuntimeExports.jsx(IoBookOutline,{})}),jsxRuntimeExports.jsx(Link,{to:"/tutorial","aria-label":"튜토리얼 도감",children:jsxRuntimeExports.jsx(IoBookOutline,{})}),jsxRuntimeExports.jsx(Link,{to:"/chatbot","aria-label":"챗봇 이동",children:jsxRuntimeExports.jsx(default_1$t,{})})]}),jsxRuntimeExports.jsx(Slider,{setBack:ap})]})})}var dist$1={},customMobilenet={};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var t$1=function(_d,rp){return(t$1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(np,ap){np.__proto__=ap}||function(np,ap){for(var sp in ap)ap.hasOwnProperty(sp)&&(np[sp]=ap[sp])})(_d,rp)};function e(_d,rp){function np(){this.constructor=_d}t$1(_d,rp),_d.prototype=rp===null?Object.create(rp):(np.prototype=rp.prototype,new np)}function n$1(_d,rp,np,ap){return new(np||(np=Promise))(function(sp,lp){function up(fp){try{dp(ap.next(fp))}catch(pp){lp(pp)}}function cp(fp){try{dp(ap.throw(fp))}catch(pp){lp(pp)}}function dp(fp){fp.done?sp(fp.value):new np(function(pp){pp(fp.value)}).then(up,cp)}dp((ap=ap.apply(_d,rp||[])).next())})}function r(_d,rp){var np,ap,sp,lp,up={label:0,sent:function(){if(1&sp[0])throw sp[1];return sp[1]},trys:[],ops:[]};return lp={next:cp(0),throw:cp(1),return:cp(2)},typeof Symbol=="function"&&(lp[Symbol.iterator]=function(){return this}),lp;function cp(dp){return function(fp){return function(pp){if(np)throw new TypeError("Generator is already executing.");for(;up;)try{if(np=1,ap&&(sp=2&pp[0]?ap.return:pp[0]?ap.throw||((sp=ap.return)&&sp.call(ap),0):ap.next)&&!(sp=sp.call(ap,pp[1])).done)return sp;switch(ap=0,sp&&(pp=[2&pp[0],sp.value]),pp[0]){case 0:case 1:sp=pp;break;case 4:return up.label++,{value:pp[1],done:!1};case 5:up.label++,ap=pp[1],pp=[0];continue;case 7:pp=up.ops.pop(),up.trys.pop();continue;default:if(!(sp=(sp=up.trys).length>0&&sp[sp.length-1])&&(pp[0]===6||pp[0]===2)){up=0;continue}if(pp[0]===3&&(!sp||pp[1]>sp[0]&&pp[1]<sp[3])){up.label=pp[1];break}if(pp[0]===6&&up.label<sp[1]){up.label=sp[1],sp=pp;break}if(sp&&up.label<sp[2]){up.label=sp[2],up.ops.push(pp);break}sp[2]&&up.ops.pop(),up.trys.pop();continue}pp=rp.call(_d,up)}catch(hp){pp=[6,hp],ap=0}finally{np=sp=0}if(5&pp[0])throw pp[1];return{value:pp[0]?pp[1]:void 0,done:!0}}([dp,fp])}}}var o=function(){function _d(rp){this.global=rp,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return _d.prototype.setPlatform=function(rp,np){this.platform!=null&&console.warn("Platform "+this.platformName+" has already been set. Overwriting the platform with "+np+"."),this.platformName=rp,this.platform=np},_d.prototype.registerFlag=function(rp,np,ap){if(this.flagRegistry[rp]={evaluationFn:np,setHook:ap},this.urlFlags[rp]!=null){var sp=this.urlFlags[rp];console.warn("Setting feature override from URL "+rp+": "+sp+"."),this.set(rp,sp)}},_d.prototype.get=function(rp){return rp in this.flags?this.flags[rp]:(this.flags[rp]=this.evaluateFlag(rp),this.flags[rp])},_d.prototype.getNumber=function(rp){return this.get(rp)},_d.prototype.getBool=function(rp){return this.get(rp)},_d.prototype.getFlags=function(){return this.flags},Object.defineProperty(_d.prototype,"features",{get:function(){return this.flags},enumerable:!0,configurable:!0}),_d.prototype.set=function(rp,np){if(this.flagRegistry[rp]==null)throw new Error("Cannot set flag "+rp+" as it has not been registered.");this.flags[rp]=np,this.flagRegistry[rp].setHook!=null&&this.flagRegistry[rp].setHook(np)},_d.prototype.evaluateFlag=function(rp){if(this.flagRegistry[rp]==null)throw new Error("Cannot evaluate flag '"+rp+"': no evaluation function found.");return this.flagRegistry[rp].evaluationFn()},_d.prototype.setFlags=function(rp){this.flags=Object.assign({},rp)},_d.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},_d.prototype.populateURLFlags=function(){var rp=this;if(this.global!==void 0&&this.global.location!==void 0&&this.global.location.search!==void 0){var np,ap,sp=(np=this.global.location.search,ap={},np.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,function(lp){for(var up=[],cp=1;cp<arguments.length;cp++)up[cp-1]=arguments[cp];return function(dp,fp,pp){dp[decodeURIComponent(fp)]=decodeURIComponent(pp||"")}(ap,up[0],up[1]),up.join("=")}),ap);"tfjsflags"in sp&&sp.tfjsflags.split(",").forEach(function(lp){var up=lp.split(":"),cp=up[0],dp=up[1];rp.urlFlags[cp]=function(fp,pp){if((pp=pp.toLowerCase())==="true"||pp==="false")return pp==="true";if(""+ +pp===pp)return+pp;throw new Error("Could not parse value flag value "+pp+" for flag "+fp+".")}(cp,dp)})}},_d}();function a$1(){return i$2}var i$2=null,u=new Map;function s(_d,rp){var np=f$1(_d,rp);return u.get(np)}function c$1(_d){for(var rp=u.entries(),np=[];;){var ap=rp.next(),sp=ap.done,lp=ap.value;if(sp)break;var up=lp[0],cp=lp[1];up.split("_")[0]===_d&&np.push(cp)}return np}function l$1(_d){var rp=_d.kernelName,np=_d.backendName,ap=f$1(rp,np);if(u.has(ap))throw new Error("The kernel '"+rp+"' for backend '"+np+"' is already registered");u.set(ap,_d)}function h$1(_d,rp){var np=f$1(_d,rp);if(!u.has(np))throw new Error("The kernel '"+_d+"' for backend '"+rp+"' is not registered");u.delete(np)}function f$1(_d,rp){return rp+"_"+_d}function p(_d){for(var rp=_d.length,np=0,ap=0;rp>0;)ap=Math.random()*rp|0,np=_d[--rp],_d[rp]=_d[ap],_d[ap]=np}function d(_d,rp,np){return Math.max(_d,Math.min(rp,np))}function v$1(_d){return _d%2==0?_d:_d+1}function m(_d){for(var rp=0,np=0;np<_d.length;np++)rp+=_d[np];return rp}function g(_d,rp){if(!_d)throw new Error(typeof rp=="string"?rp:rp())}function y(_d,rp,np){np===void 0&&(np=""),g(C(_d,rp),function(){return np+" Shapes "+_d+" and "+rp+" must match"})}function x(_d){g(_d!=null,function(){return"The input to the tensor constructor must be a non-null value."})}function b(_d,rp,np){if(rp===void 0&&(rp=[]),np===void 0&&(np=!1),rp==null&&(rp=[]),Array.isArray(_d)||B(_d)&&!np)for(var ap=0;ap<_d.length;++ap)b(_d[ap],rp,np);else rp.push(_d);return rp}function w$1(_d){if(_d.length===0)return 1;for(var rp=_d[0],np=1;np<_d.length;np++)rp*=_d[np];return rp}function C(_d,rp){if(_d===rp)return!0;if(_d==null||rp==null||_d.length!==rp.length)return!1;for(var np=0;np<_d.length;np++)if(_d[np]!==rp[np])return!1;return!0}function E(_d){return _d%1==0}function R$1(_d){if(Math.tanh!=null)return Math.tanh(_d);if(_d===1/0)return 1;if(_d===-1/0)return-1;var rp=Math.exp(2*_d);return(rp-1)/(rp+1)}function I(_d){var rp=Math.ceil(Math.sqrt(_d));return[rp,Math.ceil(_d/rp)]}function k$1(_d,rp){return rp<=_d.length?_d:_d+" ".repeat(rp-_d.length)}function S(_d,rp,np){return rp===void 0&&(rp=function(ap){return 0}),new Promise(function(ap,sp){var lp=0,up=function(){if(_d())ap();else{var cp=rp(++lp);np!=null&&lp>=np?sp():setTimeout(up,cp)}};up()})}function A(_d,rp){for(var np=1,ap=-1,sp=0;sp<_d.length;++sp)if(_d[sp]>=0)np*=_d[sp];else if(_d[sp]===-1){if(ap!==-1)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+ap+" and dim "+sp);ap=sp}else if(_d[sp]<0)throw Error("Shapes can not be < 0. Found "+_d[sp]+" at dim "+sp);if(ap===-1){if(rp>0&&rp!==np)throw Error("Size("+rp+") must match the product of shape "+_d);return _d}if(np===0)throw Error("Cannot infer the missing size in ["+_d+"] when there are 0 elements");if(rp%np!=0)throw Error("The implicit shape can't be a fractional number. Got "+rp+" / "+np);var lp=_d.slice();return lp[ap]=rp/np,lp}function D(_d,rp){var np=rp.length;return g((_d=_d==null?rp.map(function(ap,sp){return sp}):[].concat(_d)).every(function(ap){return ap>=-np&&ap<np}),function(){return"All values in axis param must be in range [-"+np+", "+np+") but got axis "+_d}),g(_d.every(function(ap){return E(ap)}),function(){return"All values in axis param must be integers but got axis "+_d}),_d.map(function(ap){return ap<0?np+ap:ap})}function T(_d,rp){for(var np=[],ap=[],sp=rp!=null&&Array.isArray(rp)&&rp.length===0,lp=rp==null||sp?null:D(rp,_d).sort(),up=0,cp=0;cp<_d.length;++cp){if(lp!=null){if(lp[up]===cp&&_d[cp]!==1)throw new Error("Can't squeeze axis "+cp+" since its dim '"+_d[cp]+"' is not 1");(lp[up]==null||lp[up]>cp)&&_d[cp]===1&&(np.push(_d[cp]),ap.push(cp)),lp[up]<=cp&&up++}_d[cp]!==1&&(np.push(_d[cp]),ap.push(cp))}return{newShape:np,keptDims:ap}}function N(_d,rp){var np=null;if(_d==null||_d==="float32")np=new Float32Array(rp);else if(_d==="int32")np=new Int32Array(rp);else{if(_d!=="bool")throw new Error("Unknown data type "+_d);np=new Uint8Array(rp)}return np}function F(_d,rp){var np=null;if(_d==null||_d==="float32")np=new Float32Array(rp);else if(_d==="int32")np=new Int32Array(rp);else if(_d==="bool")np=new Uint8Array(rp);else{if(_d!=="string")throw new Error("Unknown data type "+_d);np=new Array(rp)}return np}function O(_d,rp){for(var np=0;np<_d.length;np++){var ap=_d[np];if(isNaN(ap)||!isFinite(ap))throw Error("A tensor of type "+rp+" being uploaded contains "+ap+".")}}function _(_d){return _d==="bool"||_d==="complex64"||_d==="float32"||_d==="int32"||_d==="string"}function M(_d,rp){return rp!=="complex64"&&(rp!=="float32"||_d==="complex64")&&(rp!=="int32"||_d==="float32"||_d==="complex64")&&(rp!=="bool"||_d!=="bool")}function B(_d){return _d instanceof Float32Array||_d instanceof Int32Array||_d instanceof Uint8Array}function P(_d){if(_d==="float32"||_d==="int32")return 4;if(_d==="complex64")return 8;if(_d==="bool")return 1;throw new Error("Unknown dtype "+_d)}function L(_d){if(_d==null)return 0;var rp=0;return _d.forEach(function(np){return rp+=np.length}),rp}function W(_d){return typeof _d=="string"||_d instanceof String}function U(_d){return typeof _d=="boolean"}function V(_d){return typeof _d=="number"}function z(_d){return Array.isArray(_d)?z(_d[0]):_d instanceof Float32Array?"float32":_d instanceof Int32Array||_d instanceof Uint8Array?"int32":V(_d)?"float32":W(_d)?"string":U(_d)?"bool":"float32"}function G(_d){return!!(_d&&_d.constructor&&_d.call&&_d.apply)}function H(_d,rp){for(var np=rp;np<_d;++np)if(_d%np==0)return np;return _d}function q(_d){var rp=_d.length;if(rp<2)return[];var np=new Array(rp-1);np[rp-2]=_d[rp-1];for(var ap=rp-3;ap>=0;--ap)np[ap]=np[ap+1]*_d[ap+1];return np}function K(_d,rp,np){if(rp==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(_d)&&(_d=b(_d)),np&&O(_d,rp),function(lp,up){return lp instanceof Float32Array&&up==="float32"||lp instanceof Int32Array&&up==="int32"||lp instanceof Uint8Array&&up==="bool"}(_d,rp))return _d;if(rp==null||rp==="float32"||rp==="complex64")return new Float32Array(_d);if(rp==="int32")return new Int32Array(_d);if(rp==="bool"){for(var ap=new Uint8Array(_d.length),sp=0;sp<ap.length;++sp)Math.round(_d[sp])!==0&&(ap[sp]=1);return ap}throw new Error("Unknown data type "+rp)}function j$1(_d,rp){if(_d.length===0)return rp[0];var np=_d.reduce(function(ap,sp){return ap*sp});if(np===0)return[];if(np!==rp.length)throw new Error("["+_d+"] does not match the input size.");return function ap(sp,lp,up){var cp=new Array;if(lp.length===1)for(var dp=lp[0],fp=0;fp<dp;fp++)cp[fp]=up[sp+fp];else{dp=lp[0];var pp=lp.slice(1),hp=pp.reduce(function(mp,gp){return mp*gp});for(fp=0;fp<dp;fp++)cp[fp]=ap(sp+fp*hp,pp,up)}return cp}(0,_d,rp)}function X(_d,rp){for(var np=$$1(_d,rp),ap=0;ap<np.length;ap++)np[ap]=1;return np}function $$1(_d,rp){if(rp==null||rp==="float32"||rp==="complex64")return new Float32Array(_d);if(rp==="int32")return new Int32Array(_d);if(rp==="bool")return new Uint8Array(_d);throw new Error("Unknown data type "+rp)}function Y(){return a$1().platform.now()}function Q(_d){_d.forEach(function(rp){g(Number.isInteger(rp)&&rp>=0,function(){return"Tensor must have a shape comprised of positive integers but got shape ["+_d+"]."})})}function J(_d,rp){return rp===void 0&&(rp="utf-8"),rp=rp||"utf-8",a$1().platform.encode(_d,rp)}function Z(_d,rp){return rp===void 0&&(rp="utf-8"),rp=rp||"utf-8",a$1().platform.decode(_d,rp)}var tt=Object.freeze({shuffle:p,clamp:d,nearestLargerEven:v$1,sum:m,randUniform:function(_d,rp){var np=Math.random();return rp*np+(1-np)*_d},distSquared:function(_d,rp){for(var np=0,ap=0;ap<_d.length;ap++){var sp=Number(_d[ap])-Number(rp[ap]);np+=sp*sp}return np},assert:g,assertShapesMatch:y,assertNonNull:x,flatten:b,sizeFromShape:w$1,isScalarShape:function(_d){return _d.length===0},arraysEqual:C,isInt:E,tanh:R$1,sizeToSquarishShape:I,createShuffledIndices:function(_d){for(var rp=new Uint32Array(_d),np=0;np<_d;++np)rp[np]=np;return p(rp),rp},rightPad:k$1,repeatedTry:S,inferFromImplicitShape:A,parseAxisParam:D,squeezeShape:T,getTypedArrayFromDType:N,getArrayFromDType:F,checkConversionForErrors:O,isValidDtype:_,hasEncodingLoss:M,isTypedArray:B,bytesPerElement:P,bytesFromStringArray:L,isString:W,isBoolean:U,isNumber:V,inferDtype:z,isFunction:G,nearestDivisor:H,computeStrides:q,toTypedArray:K,toNestedArray:j$1,makeOnesTypedArray:X,makeZerosTypedArray:$$1,now:Y,assertNonNegativeIntegerDimensions:Q,fetch:function(_d,rp){return a$1().platform.fetch(_d,rp)},encodeString:J,decodeString:Z}),et=function(){function _d(rp,np){this.backendTimer=rp,this.logger=np,np==null&&(this.logger=new nt)}return _d.prototype.profileKernel=function(rp,np,ap){var sp,lp=this,up=this.backendTimer.time(function(){sp=ap()});return sp.forEach(function(cp){cp.data().then(function(dp){(function(fp,pp,hp){if(pp!=="float32")return!1;for(var mp=0;mp<fp.length;mp++){var gp=fp[mp];if(isNaN(gp)||!isFinite(gp))return console.warn("Found "+gp+" in the result of '"+hp+"'"),!0}})(dp,cp.dtype,rp),up.then(function(fp){var pp="";fp.getExtraProfileInfo!=null&&(pp=fp.getExtraProfileInfo()),lp.logger.logKernelProfile(rp,cp,dp,fp.kernelMs,np,pp)})})}),sp},_d}(),nt=function(){function _d(){}return _d.prototype.logKernelProfile=function(rp,np,ap,sp,lp,up){var cp=k$1(sp+"ms",9),dp=k$1(rp,25),fp=np.rank,pp=np.size,hp=k$1(np.shape.toString(),14),mp="";for(var gp in lp){var vp=lp[gp].shape,xp=vp.length;mp+=gp+": "+xp+"D "+(xp>0?vp:"")+" "}console.log("%c"+dp+"	%c"+cp+"	%c"+fp+"D "+hp+"	%c"+pp+"	%c"+mp+"	%c"+up,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")},_d}(),rt=20,ot=3,at=7;function it(_d,rp,np,ap){var sp=q(rp),lp=function(fp,pp,hp,mp){var gp=w$1(pp),vp=mp[mp.length-1],xp=new Array(vp).fill(0),Sp=pp.length,yp=hp==="complex64"?ct(fp):fp;if(Sp>1)for(var bp=0;bp<gp/vp;bp++)for(var Ep=bp*vp,wp=0;wp<vp;wp++)xp[wp]=Math.max(xp[wp],ut(yp[Ep+wp],0,hp).length);return xp}(_d,rp,np,sp),up=rp.length,cp=function fp(pp,hp,mp,gp,vp,xp){xp===void 0&&(xp=!0);var Sp=mp==="complex64"?2:1,yp=hp[0],bp=hp.length;if(bp===0){if(mp==="complex64"){var Ep=ct(pp);return[ut(Ep[0],0,mp)]}return mp==="bool"?[st(pp[0])]:[pp[0].toString()]}if(bp===1){if(yp>rt){var wp=ot*Sp,_p=Array.from(pp.slice(0,wp)),Rp=Array.from(pp.slice(yp-ot*Sp,yp));return mp==="complex64"&&(_p=ct(_p),Rp=ct(Rp)),["["+_p.map(function(Pp,Tp){return ut(Pp,vp[Tp],mp)}).join(", ")+", ..., "+Rp.map(function(Pp,Tp){return ut(Pp,vp[yp-ot+Tp],mp)}).join(", ")+"]"]}var $p=mp==="complex64"?ct(pp):Array.from(pp);return["["+$p.map(function(Pp,Tp){return ut(Pp,vp[Tp],mp)}).join(", ")+"]"]}var Cp=hp.slice(1),Ap=gp.slice(1),Op=gp[0]*Sp,Lp=[];if(yp>rt){for(var Mp=0;Mp<ot;Mp++){var kp=Mp*Op,Dp=kp+Op;Lp.push.apply(Lp,fp(pp.slice(kp,Dp),Cp,mp,Ap,vp,!1))}Lp.push("...");for(var Mp=yp-ot;Mp<yp;Mp++){var kp=Mp*Op,Dp=kp+Op;Lp.push.apply(Lp,fp(pp.slice(kp,Dp),Cp,mp,Ap,vp,Mp===yp-1))}}else for(var Mp=0;Mp<yp;Mp++){var kp=Mp*Op,Dp=kp+Op;Lp.push.apply(Lp,fp(pp.slice(kp,Dp),Cp,mp,Ap,vp,Mp===yp-1))}var Fp=bp===2?",":"";Lp[0]="["+Lp[0]+Fp;for(var Mp=1;Mp<Lp.length-1;Mp++)Lp[Mp]=" "+Lp[Mp]+Fp;for(var Ip=`,
`,Mp=2;Mp<bp;Mp++)Ip+=`
`;return Lp[Lp.length-1]=" "+Lp[Lp.length-1]+"]"+(xp?"":Ip),Lp}(_d,rp,np,sp,lp),dp=["Tensor"];return ap&&(dp.push("  dtype: "+np),dp.push("  rank: "+up),dp.push("  shape: ["+rp+"]"),dp.push("  values:")),dp.push(cp.map(function(fp){return"    "+fp}).join(`
`)),dp.join(`
`)}function ut(_d,rp,np){return k$1(Array.isArray(_d)?parseFloat(_d[0].toFixed(at))+" + "+parseFloat(_d[1].toFixed(at))+"j":W(_d)?"'"+_d+"'":np==="bool"?st(_d):parseFloat(_d.toFixed(at)).toString(),rp)}function st(_d){return _d===0?"false":"true"}function ct(_d){for(var rp=[],np=0;np<_d.length;np+=2)rp.push([_d[np],_d[np+1]]);return rp}var lt=function(){function _d(rp,np,ap){var sp=this;if(this.dtype=np,this.shape=rp.slice(),this.size=w$1(rp),ap!=null){var lp=ap.length;g(lp===this.size,function(){return"Length of values '"+lp+"' does not match the size inferred by the shape '"+sp.size+"'."})}if(np==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=ap||F(np,this.size),this.strides=q(rp)}return _d.prototype.set=function(rp){for(var np=this,ap=[],sp=1;sp<arguments.length;sp++)ap[sp-1]=arguments[sp];ap.length===0&&(ap=[0]),g(ap.length===this.rank,function(){return"The number of provided coordinates ("+ap.length+") must match the rank ("+np.rank+")"});var lp=this.locToIndex(ap);this.values[lp]=rp},_d.prototype.get=function(){for(var rp=[],np=0;np<arguments.length;np++)rp[np]=arguments[np];rp.length===0&&(rp=[0]);for(var ap=0,sp=0,lp=rp;sp<lp.length;sp++){var up=lp[sp];if(up<0||up>=this.shape[ap]){var cp="Requested out of range element at "+rp+".   Buffer shape="+this.shape;throw new Error(cp)}ap++}for(var dp=rp[rp.length-1],fp=0;fp<rp.length-1;++fp)dp+=this.strides[fp]*rp[fp];return this.values[dp]},_d.prototype.locToIndex=function(rp){if(this.rank===0)return 0;if(this.rank===1)return rp[0];for(var np=rp[rp.length-1],ap=0;ap<rp.length-1;++ap)np+=this.strides[ap]*rp[ap];return np},_d.prototype.indexToLoc=function(rp){if(this.rank===0)return[];if(this.rank===1)return[rp];for(var np=new Array(this.shape.length),ap=0;ap<np.length-1;++ap)np[ap]=Math.floor(rp/this.strides[ap]),rp-=np[ap]*this.strides[ap];return np[np.length-1]=rp,np},Object.defineProperty(_d.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),_d.prototype.toTensor=function(){return ht().makeTensor(this.values,this.shape,this.dtype)},_d}(),ht=null,ft=null,pt=null,dt=function(){function _d(rp,np,ap,sp){this.kept=!1,this.isDisposedInternal=!1,this.shape=rp.slice(),this.dtype=np||"float32",this.size=w$1(rp),this.strides=q(rp),this.dataId=ap,this.id=sp,this.rankType=this.rank<5?this.rank.toString():"higher"}return _d.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},_d.prototype.asScalar=function(){return this.throwIfDisposed(),g(this.size===1,function(){return"The array must have only 1 element."}),this.reshape([])},_d.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},_d.prototype.as2D=function(rp,np){return this.throwIfDisposed(),this.reshape([rp,np])},_d.prototype.as3D=function(rp,np,ap){return this.throwIfDisposed(),this.reshape([rp,np,ap])},_d.prototype.as4D=function(rp,np,ap,sp){return this.throwIfDisposed(),this.reshape([rp,np,ap,sp])},_d.prototype.as5D=function(rp,np,ap,sp,lp){return this.throwIfDisposed(),this.reshape([rp,np,ap,sp,lp])},_d.prototype.asType=function(rp){return this.throwIfDisposed(),ft.cast(this,rp)},Object.defineProperty(_d.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),_d.prototype.buffer=function(){return n$1(this,void 0,void 0,function(){var rp;return r(this,function(np){switch(np.label){case 0:return[4,this.data()];case 1:return rp=np.sent(),[2,ft.buffer(this.shape,this.dtype,rp)]}})})},_d.prototype.bufferSync=function(){return ft.buffer(this.shape,this.dtype,this.dataSync())},_d.prototype.array=function(){return n$1(this,void 0,void 0,function(){var rp;return r(this,function(np){switch(np.label){case 0:return[4,this.data()];case 1:return rp=np.sent(),[2,j$1(this.shape,rp)]}})})},_d.prototype.arraySync=function(){return j$1(this.shape,this.dataSync())},_d.prototype.data=function(){return n$1(this,void 0,void 0,function(){var rp,np;return r(this,function(ap){switch(ap.label){case 0:return this.throwIfDisposed(),rp=ht().read(this.dataId),this.dtype!=="string"?[3,2]:[4,rp];case 1:np=ap.sent();try{return[2,np.map(function(sp){return Z(sp)})]}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}ap.label=2;case 2:return[2,rp]}})})},_d.prototype.dataSync=function(){this.throwIfDisposed();var rp=ht().readSync(this.dataId);if(this.dtype==="string")try{return rp.map(function(np){return Z(np)})}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return rp},_d.prototype.bytes=function(){return n$1(this,void 0,void 0,function(){var rp;return r(this,function(np){switch(np.label){case 0:return this.throwIfDisposed(),[4,ht().read(this.dataId)];case 1:return rp=np.sent(),this.dtype==="string"?[2,rp]:[2,new Uint8Array(rp.buffer)]}})})},_d.prototype.dispose=function(){this.isDisposed||(ht().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(_d.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),_d.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},_d.prototype.toFloat=function(){return this.asType("float32")},_d.prototype.toInt=function(){return this.asType("int32")},_d.prototype.toBool=function(){return this.asType("bool")},_d.prototype.print=function(rp){return rp===void 0&&(rp=!1),ft.print(this,rp)},_d.prototype.reshape=function(rp){return this.throwIfDisposed(),ft.reshape(this,rp)},_d.prototype.reshapeAs=function(rp){return this.throwIfDisposed(),this.reshape(rp.shape)},_d.prototype.expandDims=function(rp){return rp===void 0&&(rp=0),ft.expandDims(this,rp)},_d.prototype.cumsum=function(rp,np,ap){return rp===void 0&&(rp=0),np===void 0&&(np=!1),ap===void 0&&(ap=!1),ft.cumsum(this,rp,np,ap)},_d.prototype.squeeze=function(rp){return this.throwIfDisposed(),ft.squeeze(this,rp)},_d.prototype.clone=function(){return this.throwIfDisposed(),ft.clone(this)},_d.prototype.oneHot=function(rp,np,ap){return this.throwIfDisposed(),ft.oneHot(this,rp,np,ap)},_d.prototype.toString=function(rp){return rp===void 0&&(rp=!1),it(this.dataSync(),this.shape,this.dtype,rp)},_d.prototype.tile=function(rp){return this.throwIfDisposed(),ft.tile(this,rp)},_d.prototype.gather=function(rp,np){return np===void 0&&(np=0),this.throwIfDisposed(),ft.gather(this,rp,np)},_d.prototype.matMul=function(rp,np,ap){return np===void 0&&(np=!1),ap===void 0&&(ap=!1),this.throwIfDisposed(),ft.matMul(this,rp,np,ap)},_d.prototype.dot=function(rp){return this.throwIfDisposed(),ft.dot(this,rp)},_d.prototype.norm=function(rp,np,ap){return rp===void 0&&(rp="euclidean"),np===void 0&&(np=null),ap===void 0&&(ap=!1),this.throwIfDisposed(),ft.norm(this,rp,np,ap)},_d.prototype.slice=function(rp,np){return this.throwIfDisposed(),ft.slice(this,rp,np)},_d.prototype.reverse=function(rp){return this.throwIfDisposed(),ft.reverse(this,rp)},_d.prototype.concat=function(rp,np){return np===void 0&&(np=0),this.throwIfDisposed(),rp instanceof _d&&(rp=[rp]),ft.concat([this].concat(rp),np)},_d.prototype.split=function(rp,np){return np===void 0&&(np=0),this.throwIfDisposed(),ft.split(this,rp,np)},_d.prototype.stack=function(rp,np){return np===void 0&&(np=0),ft.stack([this,rp],np)},_d.prototype.unstack=function(rp){return rp===void 0&&(rp=0),ft.unstack(this,rp)},_d.prototype.pad=function(rp,np){return np===void 0&&(np=0),ft.pad(this,rp,np)},_d.prototype.batchNormalization=function(rp,np,ap,sp,lp){return ap===void 0&&(ap=.001),pt("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon"),this.batchNorm(rp,np,lp,sp,ap)},_d.prototype.batchNorm=function(rp,np,ap,sp,lp){return lp===void 0&&(lp=.001),this.throwIfDisposed(),ft.batchNorm(this,rp,np,ap,sp,lp)},_d.prototype.all=function(rp,np){return rp===void 0&&(rp=null),np===void 0&&(np=!1),this.throwIfDisposed(),ft.all(this,rp,np)},_d.prototype.any=function(rp,np){return rp===void 0&&(rp=null),np===void 0&&(np=!1),this.throwIfDisposed(),ft.any(this,rp,np)},_d.prototype.logSumExp=function(rp,np){return rp===void 0&&(rp=null),np===void 0&&(np=!1),this.throwIfDisposed(),ft.logSumExp(this,rp,np)},_d.prototype.sum=function(rp,np){return rp===void 0&&(rp=null),np===void 0&&(np=!1),this.throwIfDisposed(),ft.sum(this,rp,np)},_d.prototype.prod=function(rp,np){return rp===void 0&&(rp=null),np===void 0&&(np=!1),this.throwIfDisposed(),ft.prod(this,rp,np)},_d.prototype.mean=function(rp,np){return rp===void 0&&(rp=null),np===void 0&&(np=!1),this.throwIfDisposed(),ft.mean(this,rp,np)},_d.prototype.min=function(rp,np){return rp===void 0&&(rp=null),np===void 0&&(np=!1),this.throwIfDisposed(),ft.min(this,rp,np)},_d.prototype.max=function(rp,np){return rp===void 0&&(rp=null),np===void 0&&(np=!1),this.throwIfDisposed(),ft.max(this,rp,np)},_d.prototype.argMin=function(rp){return rp===void 0&&(rp=null),this.throwIfDisposed(),ft.argMin(this,rp)},_d.prototype.argMax=function(rp){return rp===void 0&&(rp=null),this.throwIfDisposed(),ft.argMax(this,rp)},_d.prototype.cast=function(rp){return this.throwIfDisposed(),ft.cast(this,rp)},_d.prototype.add=function(rp){return this.throwIfDisposed(),ft.add(this,rp)},_d.prototype.addStrict=function(rp){return this.throwIfDisposed(),ft.addStrict(this,rp)},_d.prototype.atan2=function(rp){return this.throwIfDisposed(),ft.atan2(this,rp)},_d.prototype.sub=function(rp){return this.throwIfDisposed(),ft.sub(this,rp)},_d.prototype.subStrict=function(rp){return this.throwIfDisposed(),ft.subStrict(this,rp)},_d.prototype.pow=function(rp){return this.throwIfDisposed(),ft.pow(this,rp)},_d.prototype.powStrict=function(rp){return this.throwIfDisposed(),ft.powStrict(this,rp)},_d.prototype.mul=function(rp){return this.throwIfDisposed(),ft.mul(this,rp)},_d.prototype.mulStrict=function(rp){return this.throwIfDisposed(),ft.mulStrict(this,rp)},_d.prototype.div=function(rp){return this.throwIfDisposed(),ft.div(this,rp)},_d.prototype.floorDiv=function(rp){return this.throwIfDisposed(),ft.floorDiv(this,rp)},_d.prototype.divStrict=function(rp){return this.throwIfDisposed(),ft.divStrict(this,rp)},_d.prototype.minimum=function(rp){return this.throwIfDisposed(),ft.minimum(this,rp)},_d.prototype.minimumStrict=function(rp){return this.throwIfDisposed(),ft.minimumStrict(this,rp)},_d.prototype.maximum=function(rp){return this.throwIfDisposed(),ft.maximum(this,rp)},_d.prototype.maximumStrict=function(rp){return this.throwIfDisposed(),ft.maximumStrict(this,rp)},_d.prototype.mod=function(rp){return this.throwIfDisposed(),ft.mod(this,rp)},_d.prototype.modStrict=function(rp){return this.throwIfDisposed(),ft.modStrict(this,rp)},_d.prototype.squaredDifference=function(rp){return this.throwIfDisposed(),ft.squaredDifference(this,rp)},_d.prototype.squaredDifferenceStrict=function(rp){return this.throwIfDisposed(),ft.squaredDifferenceStrict(this,rp)},_d.prototype.transpose=function(rp){return this.throwIfDisposed(),ft.transpose(this,rp)},_d.prototype.notEqual=function(rp){return this.throwIfDisposed(),ft.notEqual(this,rp)},_d.prototype.notEqualStrict=function(rp){return this.throwIfDisposed(),ft.notEqualStrict(this,rp)},_d.prototype.less=function(rp){return this.throwIfDisposed(),ft.less(this,rp)},_d.prototype.lessStrict=function(rp){return this.throwIfDisposed(),ft.lessStrict(this,rp)},_d.prototype.equal=function(rp){return this.throwIfDisposed(),ft.equal(this,rp)},_d.prototype.equalStrict=function(rp){return this.throwIfDisposed(),ft.equalStrict(this,rp)},_d.prototype.lessEqual=function(rp){return this.throwIfDisposed(),ft.lessEqual(this,rp)},_d.prototype.lessEqualStrict=function(rp){return this.throwIfDisposed(),ft.lessEqualStrict(this,rp)},_d.prototype.greater=function(rp){return this.throwIfDisposed(),ft.greater(this,rp)},_d.prototype.greaterStrict=function(rp){return this.throwIfDisposed(),ft.greaterStrict(this,rp)},_d.prototype.greaterEqual=function(rp){return this.throwIfDisposed(),ft.greaterEqual(this,rp)},_d.prototype.greaterEqualStrict=function(rp){return this.throwIfDisposed(),ft.greaterEqualStrict(this,rp)},_d.prototype.logicalAnd=function(rp){return this.throwIfDisposed(),ft.logicalAnd(this,rp)},_d.prototype.logicalOr=function(rp){return this.throwIfDisposed(),ft.logicalOr(this,rp)},_d.prototype.logicalNot=function(){return this.throwIfDisposed(),ft.logicalNot(this)},_d.prototype.logicalXor=function(rp){return this.throwIfDisposed(),ft.logicalXor(this,rp)},_d.prototype.where=function(rp,np){return this.throwIfDisposed(),ft.where(rp,this,np)},_d.prototype.neg=function(){return this.throwIfDisposed(),ft.neg(this)},_d.prototype.ceil=function(){return this.throwIfDisposed(),ft.ceil(this)},_d.prototype.floor=function(){return this.throwIfDisposed(),ft.floor(this)},_d.prototype.sign=function(){return this.throwIfDisposed(),ft.sign(this)},_d.prototype.isNaN=function(){return this.throwIfDisposed(),ft.isNaN(this)},_d.prototype.isInf=function(){return this.throwIfDisposed(),ft.isInf(this)},_d.prototype.isFinite=function(){return this.throwIfDisposed(),ft.isFinite(this)},_d.prototype.exp=function(){return this.throwIfDisposed(),ft.exp(this)},_d.prototype.expm1=function(){return this.throwIfDisposed(),ft.expm1(this)},_d.prototype.log=function(){return this.throwIfDisposed(),ft.log(this)},_d.prototype.log1p=function(){return this.throwIfDisposed(),ft.log1p(this)},_d.prototype.sqrt=function(){return this.throwIfDisposed(),ft.sqrt(this)},_d.prototype.rsqrt=function(){return this.throwIfDisposed(),ft.rsqrt(this)},_d.prototype.square=function(){return this.throwIfDisposed(),ft.square(this)},_d.prototype.reciprocal=function(){return this.throwIfDisposed(),ft.reciprocal(this)},_d.prototype.abs=function(){return this.throwIfDisposed(),ft.abs(this)},_d.prototype.clipByValue=function(rp,np){return this.throwIfDisposed(),ft.clipByValue(this,rp,np)},_d.prototype.relu=function(){return this.throwIfDisposed(),ft.relu(this)},_d.prototype.relu6=function(){return this.throwIfDisposed(),ft.relu6(this)},_d.prototype.elu=function(){return this.throwIfDisposed(),ft.elu(this)},_d.prototype.selu=function(){return this.throwIfDisposed(),ft.selu(this)},_d.prototype.leakyRelu=function(rp){return rp===void 0&&(rp=.2),this.throwIfDisposed(),ft.leakyRelu(this,rp)},_d.prototype.prelu=function(rp){return this.throwIfDisposed(),ft.prelu(this,rp)},_d.prototype.sigmoid=function(){return this.throwIfDisposed(),ft.sigmoid(this)},_d.prototype.logSigmoid=function(){return this.throwIfDisposed(),ft.logSigmoid(this)},_d.prototype.softplus=function(){return this.throwIfDisposed(),ft.softplus(this)},_d.prototype.zerosLike=function(){return this.throwIfDisposed(),ft.zerosLike(this)},_d.prototype.onesLike=function(){return this.throwIfDisposed(),ft.onesLike(this)},_d.prototype.sin=function(){return this.throwIfDisposed(),ft.sin(this)},_d.prototype.cos=function(){return this.throwIfDisposed(),ft.cos(this)},_d.prototype.tan=function(){return this.throwIfDisposed(),ft.tan(this)},_d.prototype.asin=function(){return this.throwIfDisposed(),ft.asin(this)},_d.prototype.acos=function(){return this.throwIfDisposed(),ft.acos(this)},_d.prototype.atan=function(){return this.throwIfDisposed(),ft.atan(this)},_d.prototype.sinh=function(){return this.throwIfDisposed(),ft.sinh(this)},_d.prototype.cosh=function(){return this.throwIfDisposed(),ft.cosh(this)},_d.prototype.tanh=function(){return this.throwIfDisposed(),ft.tanh(this)},_d.prototype.asinh=function(){return this.throwIfDisposed(),ft.asinh(this)},_d.prototype.acosh=function(){return this.throwIfDisposed(),ft.acosh(this)},_d.prototype.atanh=function(){return this.throwIfDisposed(),ft.atanh(this)},_d.prototype.erf=function(){return this.throwIfDisposed(),ft.erf(this)},_d.prototype.round=function(){return this.throwIfDisposed(),ft.round(this)},_d.prototype.step=function(rp){return rp===void 0&&(rp=0),this.throwIfDisposed(),ft.step(this,rp)},_d.prototype.softmax=function(rp){return rp===void 0&&(rp=-1),this.throwIfDisposed(),ft.softmax(this,rp)},_d.prototype.logSoftmax=function(rp){return rp===void 0&&(rp=-1),this.throwIfDisposed(),ft.logSoftmax(this,rp)},_d.prototype.resizeBilinear=function(rp,np){return np===void 0&&(np=!1),this.throwIfDisposed(),ft.image.resizeBilinear(this,rp,np)},_d.prototype.resizeNearestNeighbor=function(rp,np){return np===void 0&&(np=!1),this.throwIfDisposed(),ft.image.resizeNearestNeighbor(this,rp,np)},_d.prototype.conv1d=function(rp,np,ap,sp,lp,up){return sp===void 0&&(sp="NWC"),lp===void 0&&(lp=1),this.throwIfDisposed(),ft.conv1d(this,rp,np,ap,sp,lp,up)},_d.prototype.conv2d=function(rp,np,ap,sp,lp,up){return sp===void 0&&(sp="NHWC"),lp===void 0&&(lp=[1,1]),this.throwIfDisposed(),ft.conv2d(this,rp,np,ap,sp,lp,up)},_d.prototype.conv2dTranspose=function(rp,np,ap,sp,lp){return this.throwIfDisposed(),ft.conv2dTranspose(this,rp,np,ap,sp,lp)},_d.prototype.depthwiseConv2D=function(rp,np,ap,sp,lp,up){return sp===void 0&&(sp="NHWC"),lp===void 0&&(lp=[1,1]),this.throwIfDisposed(),ft.depthwiseConv2d(this,rp,np,ap,sp,lp,up)},_d.prototype.separableConv2d=function(rp,np,ap,sp,lp,up){return lp===void 0&&(lp=[1,1]),up===void 0&&(up="NHWC"),this.throwIfDisposed(),ft.separableConv2d(this,rp,np,ap,sp,lp,up)},_d.prototype.avgPool=function(rp,np,ap,sp){return this.throwIfDisposed(),ft.avgPool(this,rp,np,ap,sp)},_d.prototype.maxPool=function(rp,np,ap,sp){return this.throwIfDisposed(),ft.maxPool(this,rp,np,ap,sp)},_d.prototype.localResponseNormalization=function(rp,np,ap,sp){return rp===void 0&&(rp=5),np===void 0&&(np=1),ap===void 0&&(ap=1),sp===void 0&&(sp=.5),ft.localResponseNormalization(this,rp,np,ap,sp)},_d.prototype.pool=function(rp,np,ap,sp,lp){return this.throwIfDisposed(),ft.pool(this,rp,np,ap,sp,lp)},_d.prototype.variable=function(rp,np,ap){return rp===void 0&&(rp=!0),this.throwIfDisposed(),ht().makeVariable(this,rp,np,ap)},_d.prototype.unsortedSegmentSum=function(rp,np){return this.throwIfDisposed(),ft.unsortedSegmentSum(this,rp,np)},_d.prototype.batchToSpaceND=function(rp,np){return this.throwIfDisposed(),ft.batchToSpaceND(this,rp,np)},_d.prototype.spaceToBatchND=function(rp,np){return this.throwIfDisposed(),ft.spaceToBatchND(this,rp,np)},_d.prototype.topk=function(rp,np){return rp===void 0&&(rp=1),np===void 0&&(np=!0),this.throwIfDisposed(),ft.topk(this,rp,np)},_d.prototype.stridedSlice=function(rp,np,ap,sp,lp,up,cp,dp){return sp===void 0&&(sp=0),lp===void 0&&(lp=0),up===void 0&&(up=0),cp===void 0&&(cp=0),dp===void 0&&(dp=0),this.throwIfDisposed(),ft.stridedSlice(this,rp,np,ap,sp,lp,up,cp,dp)},_d.prototype.depthToSpace=function(rp,np){return this.throwIfDisposed(),ft.depthToSpace(this,rp,np)},_d.prototype.fft=function(){return this.throwIfDisposed(),ft.spectral.fft(this)},_d.prototype.ifft=function(){return this.throwIfDisposed(),ft.spectral.ifft(this)},_d.prototype.rfft=function(){return this.throwIfDisposed(),ft.spectral.rfft(this)},_d.prototype.irfft=function(){return this.throwIfDisposed(),ft.spectral.irfft(this)},_d}();Object.defineProperty(dt,Symbol.hasInstance,{value:function(_d){return!!_d&&_d.dataId!=null&&_d.shape!=null&&_d.dtype!=null}});var vt,mt,gt,yt,xt,bt=function(_d){function rp(np,ap,sp,lp){var up=_d.call(this,np.shape,np.dtype,np.dataId,lp)||this;return up.trainable=ap,up.name=sp,up}return e(rp,_d),rp.prototype.assign=function(np){if(np.dtype!==this.dtype)throw new Error("dtype of the new value ("+np.dtype+") and previous value ("+this.dtype+") must match");if(!C(np.shape,this.shape))throw new Error("shape of the new value ("+np.shape+") and previous value ("+this.shape+") must match");ht().disposeTensor(this),this.dataId=np.dataId,ht().incRef(this,null)},rp.prototype.dispose=function(){ht().disposeVariable(this),this.isDisposedInternal=!0},rp}(dt);Object.defineProperty(bt,Symbol.hasInstance,{value:function(_d){return _d instanceof dt&&_d.assign!=null&&_d.assign instanceof Function}}),function(_d){_d.R0="R0",_d.R1="R1",_d.R2="R2",_d.R3="R3",_d.R4="R4",_d.R5="R5",_d.R6="R6"}(vt||(vt={})),function(_d){_d.float32="float32",_d.int32="int32",_d.bool="int32",_d.complex64="complex64"}(mt||(mt={})),function(_d){_d.float32="float32",_d.int32="int32",_d.bool="bool",_d.complex64="complex64"}(gt||(gt={})),function(_d){_d.float32="float32",_d.int32="float32",_d.bool="float32",_d.complex64="complex64"}(yt||(yt={})),function(_d){_d.float32="complex64",_d.int32="complex64",_d.bool="complex64",_d.complex64="complex64"}(xt||(xt={}));var wt={float32:yt,int32:mt,bool:gt,complex64:xt};function Ct(_d,rp){if(_d==="string"||rp==="string"){if(_d==="string"&&rp==="string")return"string";throw new Error("Can not upcast "+_d+" with "+rp)}return wt[_d][rp]}function Et(_d){return Ct(_d,"int32")}function Rt(_d,rp){if(_d.dtype===rp.dtype)return[_d,rp];var np=Ct(_d.dtype,rp.dtype);return[_d.cast(np),rp.cast(np)]}function It(_d,rp){g(_d.dtype===rp.dtype,function(){return"The dtypes of the first("+_d.dtype+") and second("+rp.dtype+") input must match"})}function kt(_d){var rp=[];return function np(ap,sp,lp){if(ap!=null){if(ap instanceof dt)return void sp.push(ap);if(up=ap,!(!Array.isArray(up)&&typeof up!="object")){var up,cp=ap;for(var dp in cp){var fp=cp[dp];lp.has(fp)||(lp.add(fp),np(fp,sp,lp))}}}}(_d,rp,new Set),rp}var St,At=Object.freeze({makeTypesMatch:Rt,assertTypesMatch:It,isTensorInList:function(_d,rp){for(var np=0;np<rp.length;np++)if(rp[np].id===_d.id)return!0;return!1},getTensorsInContainer:kt}),Dt=function(){function _d(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return _d.prototype.dispose=function(){for(var rp in this.registeredVariables)this.registeredVariables[rp].dispose()},_d}(),Tt=function(){function _d(rp){this.ENV=rp,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new Dt}return _d.prototype.ready=function(){return n$1(this,void 0,void 0,function(){var rp,np,ap;return r(this,function(sp){switch(sp.label){case 0:if(this.pendingBackendInit!=null)return[2,this.pendingBackendInit.then(function(){})];if(this.backendInstance!=null)return[2];rp=this.getSortedBackends(),np=0,sp.label=1;case 1:return np<rp.length?(ap=rp[np],[4,this.initializeBackend(ap).success]):[3,5];case 2:return sp.sent()?[4,this.setBackend(ap)]:[3,4];case 3:return sp.sent(),[2];case 4:return np++,[3,1];case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}})})},Object.defineProperty(_d.prototype,"backend",{get:function(){if(this.pendingBackendInit!=null)throw new Error("Backend '"+this.backendName+"' has not yet been initialized. Make sure to await tf.ready() before calling other methods");if(this.backendInstance==null){var rp=this.initializeBackendsAndReturnBest(),np=rp.name;if(rp.asyncInit)throw new Error("The highest priority backend '"+np+"' has not yet been initialized. Make sure to await tf.ready() before calling other methods");this.setBackend(np)}return this.backendInstance},enumerable:!0,configurable:!0}),_d.prototype.backendNames=function(){return Object.keys(this.registryFactory)},_d.prototype.findBackend=function(rp){return!(rp in this.registry)&&(!(rp in this.registryFactory)||this.initializeBackend(rp).asyncInit)?null:this.registry[rp]},_d.prototype.findBackendFactory=function(rp){return rp in this.registryFactory?this.registryFactory[rp].factory:null},_d.prototype.registerBackend=function(rp,np,ap){return ap===void 0&&(ap=1),rp in this.registryFactory?(console.warn(rp+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[rp]={factory:np,priority:ap},!0)},_d.prototype.setBackend=function(rp){return n$1(this,void 0,void 0,function(){var np,ap,sp;return r(this,function(lp){switch(lp.label){case 0:if(this.registryFactory[rp]==null)throw new Error("Backend name '"+rp+"' not found in registry");return this.backendName=rp,this.registry[rp]!=null?[3,4]:(this.backendInstance=null,np=this.initializeBackend(rp),ap=np.success,np.asyncInit?[4,ap]:[3,2]);case 1:return sp=lp.sent(),[3,3];case 2:sp=ap,lp.label=3;case 3:if(!sp)return[2,!1];lp.label=4;case 4:return this.backendInstance=this.registry[rp],this.setupRegisteredKernels(),this.profiler=new et(this.backendInstance),[2,!0]}})})},_d.prototype.setupRegisteredKernels=function(){var rp=this;c$1(this.backendName).forEach(function(np){np.setupFunc!=null&&np.setupFunc(rp.backendInstance)})},_d.prototype.disposeRegisteredKernels=function(rp){var np=this;c$1(rp).forEach(function(ap){ap.disposeFunc!=null&&ap.disposeFunc(np.registry[rp])})},_d.prototype.initializeBackend=function(rp){var np=this,ap=this.registryFactory[rp];if(ap==null)throw new Error("Cannot initialize backend "+rp+", no registration found.");try{var sp=ap.factory();if(Promise.resolve(sp)===sp){var lp=++this.pendingBackendInitId,up=sp.then(function(cp){return!(lp<np.pendingBackendInitId)&&(np.registry[rp]=cp,np.pendingBackendInit=null,!0)}).catch(function(cp){return!(lp<np.pendingBackendInitId)&&(np.pendingBackendInit=null,console.warn("Initialization of backend "+rp+" failed"),console.warn(cp.stack||cp.message),!1)});return this.pendingBackendInit=up,{success:up,asyncInit:!0}}return this.registry[rp]=sp,{success:!0,asyncInit:!1}}catch(cp){return console.warn("Initialization of backend "+rp+" failed"),console.warn(cp.stack||cp.message),{success:!1,asyncInit:!1}}},_d.prototype.removeBackend=function(rp){if(!(rp in this.registryFactory))throw new Error(rp+" backend not found in registry");this.backendName===rp&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,rp in this.registry&&(this.disposeRegisteredKernels(rp),this.registry[rp].dispose(),delete this.registry[rp]),delete this.registryFactory[rp],this.backendName===rp&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},_d.prototype.getSortedBackends=function(){var rp=this;if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(function(np,ap){return rp.registryFactory[ap].priority-rp.registryFactory[np].priority})},_d.prototype.initializeBackendsAndReturnBest=function(){for(var rp=this.getSortedBackends(),np=0;np<rp.length;np++){var ap=rp[np],sp=this.initializeBackend(ap),lp=sp.success,up=sp.asyncInit;if(up||lp)return{name:ap,asyncInit:up}}throw new Error("Could not initialize any backends, all backend initializations failed.")},_d.prototype.moveData=function(rp,np){var ap=this.state.tensorInfo.get(np),sp=ap.backend,lp=this.readSync(np);sp.disposeData(np),ap.backend=rp,rp.move(np,lp,ap.shape,ap.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++},_d.prototype.tidy=function(rp,np){var ap,sp=this,lp=null;if(np==null){if(typeof rp!="function")throw new Error("Please provide a function to tidy()");np=rp}else{if(typeof rp!="string"&&!(rp instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof np!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");lp=rp}return this.scopedRun(function(){return sp.startScope(lp)},function(){return sp.endScope(ap)},function(){return(ap=np())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),ap})},_d.prototype.scopedRun=function(rp,np,ap){rp();try{var sp=ap();return np(),sp}catch(lp){throw np(),lp}},_d.prototype.nextTensorId=function(){return _d.nextTensorId++},_d.prototype.nextVariableId=function(){return _d.nextVariableId++},_d.prototype.clone=function(rp){var np=this.makeTensorFromDataId(rp.dataId,rp.shape,rp.dtype),ap={x:rp};return this.addTapeNode(this.state.activeScope.name,ap,[np],function(sp){return{x:function(){return sp.toFloat()}}},[]),np},_d.prototype.runKernel=function(rp,np,ap,sp,lp){return this.runKernelFunc(null,np,null,rp,ap,sp,lp)},_d.prototype.shouldCheckForMemLeaks=function(){return this.ENV.getBool("IS_TEST")},_d.prototype.checkKernelForMemLeak=function(rp,np,ap){var sp=this.backend.numDataIds(),lp=0;ap.forEach(function(dp){lp+=dp.dtype==="complex64"?3:1});var up=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],cp=sp-np-lp-up;if(cp>0)throw new Error("Backend '"+this.backendName+"' has an internal memory leak ("+cp+" data ids) after running '"+rp+"'")},_d.prototype.runKernelFunc=function(rp,np,ap,sp,lp,up,cp){var dp,fp=this;up===void 0&&(up=[]),cp===void 0&&(cp=[]);var pp,hp=[],mp=this.isTapeOn(),gp=this.state.activeScope!=null?this.state.activeScope.name:"",vp=function(Ep){mp&&(hp=Ep.map(function(wp){return fp.keep(fp.clone(wp))}))},xp=this.state.numBytes,Sp=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);var yp,bp=s(sp,this.backendName);return pp=bp!=null?function(){var Ep=fp.backend.numDataIds();yp=bp.kernelFunc({inputs:np,attrs:lp,backend:fp.backend});var wp=Array.isArray(yp)?yp:[yp];fp.shouldCheckForMemLeaks()&&fp.checkKernelForMemLeak(gp,Ep,wp);var _p=wp.map(function($p){var Cp=$p.dataId,Ap=$p.shape,Op=$p.dtype;return fp.makeTensorFromDataId(Cp,Ap,Op)}),Rp=_p.filter(function($p,Cp){return cp[Cp]});return vp(up.slice().concat(Rp)),_p}:function(){var Ep=fp.backend.numDataIds();yp=fp.tidy(function(){return rp(fp.backend,vp)});var wp=Array.isArray(yp)?yp:[yp];return fp.shouldCheckForMemLeaks()&&fp.checkKernelForMemLeak(gp,Ep,wp),wp},this.scopedRun(function(){return fp.state.kernelDepth++},function(){return fp.state.kernelDepth--},function(){dp=fp.ENV.getBool("DEBUG")?fp.profiler.profileKernel(gp,np,function(){return pp()}):pp()}),mp&&this.addTapeNode(gp,np,dp,ap,hp),this.state.profiling&&this.state.activeProfile.kernels.push({name:gp,bytesAdded:this.state.numBytes-xp,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-Sp,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(np).map(function(Ep){return np[Ep].shape}),outputShapes:dp.map(function(Ep){return Ep.shape})}),Array.isArray(yp)?dp:dp[0]},_d.prototype.makeTensor=function(rp,np,ap,sp){if(rp==null)throw new Error("Values passed to engine.makeTensor() are null");ap=ap||"float32",sp=sp||this.backend;var lp=rp;ap==="string"&&W(rp[0])&&(lp=rp.map(function(pp){return J(pp)}));var up=sp.write(lp,np,ap),cp=new dt(np,ap,up,this.nextTensorId());if(this.incRef(cp,sp),ap==="string"){var dp=this.state.tensorInfo.get(up),fp=L(lp);this.state.numBytes+=fp-dp.bytes,dp.bytes=fp}return cp},_d.prototype.makeTensorFromDataId=function(rp,np,ap,sp){var lp=new dt(np,ap=ap||"float32",rp,this.nextTensorId());return this.incRef(lp,sp),lp},_d.prototype.makeVariable=function(rp,np,ap,sp){np===void 0&&(np=!0),ap=ap||this.nextVariableId().toString(),sp!=null&&sp!==rp.dtype&&(rp=rp.asType(sp));var lp=new bt(rp,np,ap,this.nextTensorId());if(this.state.registeredVariables[lp.name]!=null)throw new Error("Variable with name "+lp.name+" was already registered");return this.state.registeredVariables[lp.name]=lp,this.incRef(lp,this.backend),lp},_d.prototype.incRef=function(rp,np){var ap=this.state.tensorInfo.has(rp.dataId)?this.state.tensorInfo.get(rp.dataId).refCount:0;if(this.state.numTensors++,rp.dtype==="string"&&this.state.numStringTensors++,ap===0){this.state.numDataBuffers++;var sp=0;rp.dtype!=="complex64"&&rp.dtype!=="string"&&(sp=rp.size*P(rp.dtype)),this.state.tensorInfo.set(rp.dataId,{backend:np||this.backend,dtype:rp.dtype,shape:rp.shape,bytes:sp,refCount:0}),this.state.numBytes+=sp}this.state.tensorInfo.get(rp.dataId).refCount++,rp instanceof bt||this.track(rp)},_d.prototype.disposeTensor=function(rp){if(this.state.tensorInfo.has(rp.dataId)){this.state.numTensors--,rp.dtype==="string"&&this.state.numStringTensors--;var np=this.state.tensorInfo.get(rp.dataId);np.refCount<=1?(rp.dtype!=="complex64"&&(this.state.numBytes-=np.bytes),this.state.numDataBuffers--,np.backend.disposeData(rp.dataId),this.state.tensorInfo.delete(rp.dataId)):this.state.tensorInfo.get(rp.dataId).refCount--}},_d.prototype.disposeVariables=function(){for(var rp in this.state.registeredVariables){var np=this.state.registeredVariables[rp];this.disposeVariable(np)}},_d.prototype.disposeVariable=function(rp){this.disposeTensor(rp),this.state.registeredVariables[rp.name]!=null&&delete this.state.registeredVariables[rp.name]},_d.prototype.memory=function(){var rp=this.backend.memory();return rp.numTensors=this.state.numTensors,rp.numDataBuffers=this.state.numDataBuffers,rp.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(rp.unreliable=!0,rp.reasons==null&&(rp.reasons=[]),rp.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),rp},_d.prototype.profile=function(rp){return n$1(this,void 0,void 0,function(){var np,ap;return r(this,function(sp){return this.state.profiling=!0,np=this.state.numBytes,ap=this.state.numTensors,this.state.activeProfile.kernels=[],this.state.activeProfile.result=rp(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,this.state.activeProfile.kernels.map(function(lp){return lp.totalBytesSnapshot})),this.state.activeProfile.newBytes=this.state.numBytes-np,this.state.activeProfile.newTensors=this.state.numTensors-ap,[2,this.state.activeProfile]})})},_d.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&this.state.kernelDepth===0},_d.prototype.addTapeNode=function(rp,np,ap,sp,lp){var up=this,cp={id:this.state.nextTapeNodeId++,name:rp,inputs:np,outputs:ap,saved:lp};sp!=null&&(cp.gradient=function(dp){return dp=dp.map(function(fp,pp){if(fp==null){var hp=ap[pp],mp=$$1(hp.size,hp.dtype);return up.makeTensor(mp,hp.shape,hp.dtype)}return fp}),sp(dp.length>1?dp:dp[0],lp)}),this.state.activeTape.push(cp)},_d.prototype.keep=function(rp){return rp.kept=!0,rp},_d.prototype.startTape=function(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++},_d.prototype.endTape=function(){this.state.gradientDepth--},_d.prototype.startScope=function(rp){var np={track:[],name:"unnamed scope",id:this.state.nextScopeId++};rp&&(np.name=rp),this.state.scopeStack.push(np),this.state.activeScope=np},_d.prototype.endScope=function(rp){for(var np=this,ap=kt(rp),sp=new Set(ap.map(function(dp){return dp.id})),lp=0;lp<this.state.activeScope.track.length;lp++){var up=this.state.activeScope.track[lp];up.kept||sp.has(up.id)||up.dispose()}var cp=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],ap.forEach(function(dp){dp.kept||dp.scopeId!==cp.id||np.track(dp)})},_d.prototype.gradients=function(rp,np,ap,sp){var lp=this;if(sp===void 0&&(sp=!1),g(np.length>0,function(){return"gradients() received an empty list of xs."}),ap!=null&&ap.dtype!=="float32")throw new Error("dy must have 'float32' dtype, but has '"+ap.dtype+"'");var up=this.scopedRun(function(){return lp.startTape()},function(){return lp.endTape()},function(){return lp.tidy("forward",rp)});g(up instanceof dt,function(){return"The result y returned by f() must be a tensor."});var cp=function(dp,fp,pp){for(var hp={},mp={},gp=0;gp<fp.length;gp++)hp[fp[gp].id]=!0;for(gp=0;gp<dp.length;gp++){var vp=(Rp=dp[gp]).inputs;for(var xp in vp){for(var Sp=vp[xp],yp=!1,bp=0;bp<fp.length;bp++)if(hp[Sp.id]){Rp.outputs.forEach(function(Op){return hp[Op.id]=!0}),yp=!0,mp[Rp.id]=!0;break}if(yp)break}}var Ep={};Ep[pp.id]=!0;var wp={};for(gp=dp.length-1;gp>=0;gp--)for(vp=(Rp=dp[gp]).inputs,bp=0;bp<Rp.outputs.length;bp++)if(Ep[Rp.outputs[bp].id]){for(var xp in vp)Ep[vp[xp].id]=!0,wp[Rp.id]=!0;break}var _p=[];for(gp=0;gp<dp.length;gp++){var Rp;if(mp[(Rp=dp[gp]).id]&&wp[Rp.id]){var $p={};for(var xp in Rp.inputs){var Cp=Rp.inputs[xp];hp[Cp.id]&&($p[xp]=Cp)}var Ap=Object.assign({},Rp);Ap.inputs=$p,Ap.outputs=Rp.outputs,_p.push(Ap)}}return _p}(this.state.activeTape,np,up);if(!sp&&cp.length===0&&np.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",function(){var dp,fp,pp={};pp[up.id]=ap??(dp=up.shape,fp=X(w$1(dp),"float32"),Nt.makeTensor(fp,dp,"float32")),function(mp,gp,vp){for(var xp=function(yp){var bp=gp[yp],Ep=[];if(bp.outputs.forEach(function($p){var Cp=mp[$p.id];Cp!=null?Ep.push(Cp):Ep.push(null)}),bp.gradient==null)throw new Error("Cannot compute gradient: gradient function not found for "+bp.name+".");var wp=bp.gradient(Ep),_p=function($p){if(!($p in wp))throw new Error("Cannot backprop through input "+$p+". Available gradients found: "+Object.keys(wp)+".");var Cp=vp(function(){return wp[$p]()});if(Cp.dtype!=="float32")throw new Error("Error in gradient for op "+bp.name+". The gradient of input "+$p+" must have 'float32' dtype, but has '"+Cp.dtype+"'");var Ap=bp.inputs[$p];if(!C(Cp.shape,Ap.shape))throw new Error("Error in gradient for op "+bp.name+". The gradient of input '"+$p+"' has shape '"+Cp.shape+"', which does not match the shape of the input '"+Ap.shape+"'");if(mp[Ap.id]==null)mp[Ap.id]=Cp;else{var Op=mp[Ap.id];mp[Ap.id]=Op.add(Cp),Op.dispose()}};for(var Rp in bp.inputs)_p(Rp)},Sp=gp.length-1;Sp>=0;Sp--)xp(Sp)}(pp,cp,function(mp){return lp.tidy(mp)});var hp=np.map(function(mp){return pp[mp.id]});return lp.state.gradientDepth===0&&(lp.state.activeTape.forEach(function(mp){for(var gp in mp.saved)mp.saved[gp].dispose()}),lp.state.activeTape=null),{value:up,grads:hp}})},_d.prototype.customGrad=function(rp){var np=this;return g(G(rp),function(){return"The f passed in customGrad(f) must be a function."}),function(){for(var ap,sp=[],lp=0;lp<arguments.length;lp++)sp[lp]=arguments[lp];g(sp.every(function(cp){return cp instanceof dt}),function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"});var up={};return sp.forEach(function(cp,dp){up[dp]=cp}),np.runKernelFunc(function(cp,dp){return g((ap=rp.apply(void 0,sp.concat([dp]))).value instanceof dt,function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"}),g(G(ap.gradFunc),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."}),ap.value},up,function(cp,dp){var fp=ap.gradFunc(cp,dp),pp=Array.isArray(fp)?fp:[fp];g(pp.length===sp.length,function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."}),g(pp.every(function(mp){return mp instanceof dt}),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."});var hp={};return pp.forEach(function(mp,gp){hp[gp]=function(){return mp}}),hp})}},_d.prototype.readSync=function(rp){return this.state.tensorInfo.get(rp).backend.readSync(rp)},_d.prototype.read=function(rp){return this.state.tensorInfo.get(rp).backend.read(rp)},_d.prototype.fromPixels=function(rp,np){return this.backend.fromPixels(rp,np)},_d.prototype.time=function(rp){return n$1(this,void 0,void 0,function(){var np,ap;return r(this,function(sp){switch(sp.label){case 0:return np=Y(),[4,this.backend.time(rp)];case 1:return(ap=sp.sent()).wallMs=Y()-np,[2,ap]}})})},_d.prototype.track=function(rp){return this.state.activeScope!=null&&(rp.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(rp)),rp},Object.defineProperty(_d.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!0,configurable:!0}),_d.prototype.reset=function(){for(var rp in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new Dt,this.registry)this.disposeRegisteredKernels(rp),this.registry[rp].dispose(),delete this.registry[rp];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},_d.nextTensorId=0,_d.nextVariableId=0,_d}(),Nt=function(){var _d=function(){if(St==null){var np=void 0;if(typeof window<"u")np=window;else if(typeof global<"u")np=global;else if(typeof process<"u")np=process;else{if(typeof self>"u")throw new Error("Could not find a global object");np=self}St=np}return St}();if(_d._tfengine==null){var rp=new o(_d);_d._tfengine=new Tt(rp)}return function(np){i$2=np}(_d._tfengine.ENV),ht=function(){return _d._tfengine},_d._tfengine}();function Ft(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}var Ot=a$1();Ot.registerFlag("DEBUG",function(){return!1},function(_d){_d&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),Ot.registerFlag("IS_BROWSER",function(){return Ft()}),Ot.registerFlag("IS_NODE",function(){return typeof process<"u"&&process.versions!==void 0&&process.versions.node!==void 0}),Ot.registerFlag("IS_CHROME",function(){return typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}),Ot.registerFlag("PROD",function(){return!1}),Ot.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",function(){return Ot.getBool("DEBUG")}),Ot.registerFlag("DEPRECATION_WARNINGS_ENABLED",function(){return!0}),Ot.registerFlag("IS_TEST",function(){return!1});var _t,Mt,Bt,Pt={},Lt={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function Wt(_d,rp){Pt[_d]=rp}function Ut(_d){_d in Pt||(Pt[_d]=function(np){if(np!==1&&np!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var ap=Vt(np);return ap.addEventListener("webglcontextlost",function(sp){sp.preventDefault(),delete Pt[np]},!1),np===1?ap.getContext("webgl",Lt)||ap.getContext("experimental-webgl",Lt):ap.getContext("webgl2",Lt)}(_d));var rp=Pt[_d];return rp.isContextLost()?(delete Pt[_d],Ut(_d)):(rp.disable(rp.DEPTH_TEST),rp.disable(rp.STENCIL_TEST),rp.disable(rp.BLEND),rp.disable(rp.DITHER),rp.disable(rp.POLYGON_OFFSET_FILL),rp.disable(rp.SAMPLE_COVERAGE),rp.enable(rp.SCISSOR_TEST),rp.enable(rp.CULL_FACE),rp.cullFace(rp.BACK),Pt[_d])}function Vt(_d){if(typeof OffscreenCanvas<"u"&&_d===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function zt(_d,rp){return[rp,_d]}function Gt(_d){var rp=w$1(_d);return I(Math.ceil(rp/4))}function Ht(_d,rp){return[Math.max(1,Math.ceil(rp/2)),Math.max(1,Math.ceil(_d/2))]}function qt(_d,rp){var np,ap,sp,lp,up,cp,dp,fp,pp,hp=_d;return a$1().getNumber("WEBGL_VERSION")===2?(np=hp.R32F,ap=hp.R16F,sp=hp.RGBA16F,lp=hp.RGBA32F,up=hp.RED,cp=4,dp=1,fp=hp.HALF_FLOAT,pp=hp.FLOAT):(np=_d.RGBA,ap=_d.RGBA,sp=_d.RGBA,lp=hp.RGBA,up=_d.RGBA,cp=4,dp=4,fp=rp!=null?rp.HALF_FLOAT_OES:null,pp=_d.FLOAT),{internalFormatFloat:np,internalFormatHalfFloat:ap,internalFormatPackedHalfFloat:sp,internalFormatPackedFloat:lp,textureFormatFloat:up,downloadTextureFormat:_d.RGBA,downloadUnpackNumChannels:cp,defaultNumChannels:dp,textureTypeHalfFloat:fp,textureTypeFloat:pp}}function Kt(_d,rp,np){var ap=np();return rp&&function(sp){var lp=sp.getError();if(lp!==sp.NO_ERROR)throw new Error("WebGL Error: "+Yt(sp,lp))}(_d),ap}(function(_d){_d[_d.DENSE=0]="DENSE",_d[_d.SHARED_BATCH=1]="SHARED_BATCH"})(_t||(_t={})),function(_d){_d[_d.RENDER=0]="RENDER",_d[_d.UPLOAD=1]="UPLOAD",_d[_d.PIXELS=2]="PIXELS",_d[_d.DOWNLOAD=3]="DOWNLOAD"}(Mt||(Mt={})),function(_d){_d[_d.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",_d[_d.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",_d[_d.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",_d[_d.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",_d[_d.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(Bt||(Bt={}));var jt=596e-10,Xt=65504;function $t(_d){return!!(a$1().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||_d===0||jt<Math.abs(_d)&&Math.abs(_d)<Xt)}function Yt(_d,rp){switch(rp){case _d.NO_ERROR:return"NO_ERROR";case _d.INVALID_ENUM:return"INVALID_ENUM";case _d.INVALID_VALUE:return"INVALID_VALUE";case _d.INVALID_OPERATION:return"INVALID_OPERATION";case _d.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case _d.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case _d.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+rp}}function Qt(_d,rp,np){return be(_d,rp,function(){return _d.getExtension(np)},'Extension "'+np+'" not supported on this browser.')}function Jt(_d,rp,np){var ap=be(_d,rp,function(){return _d.createShader(_d.VERTEX_SHADER)},"Unable to create vertex WebGLShader.");if(Kt(_d,rp,function(){return _d.shaderSource(ap,np)}),Kt(_d,rp,function(){return _d.compileShader(ap)}),_d.getShaderParameter(ap,_d.COMPILE_STATUS)===!1)throw console.log(_d.getShaderInfoLog(ap)),new Error("Failed to compile vertex shader.");return ap}function Zt(_d,rp,np){var ap=be(_d,rp,function(){return _d.createShader(_d.FRAGMENT_SHADER)},"Unable to create fragment WebGLShader.");if(Kt(_d,rp,function(){return _d.shaderSource(ap,np)}),Kt(_d,rp,function(){return _d.compileShader(ap)}),_d.getShaderParameter(ap,_d.COMPILE_STATUS)===!1)throw function(sp,lp){var up=ne.exec(lp);if(up==null)return console.log("Couldn't parse line number in error: "+lp),void console.log(sp);for(var cp=+up[1],dp=sp.split(`
`),fp=dp.length.toString().length+2,pp=dp.map(function(Sp,yp){return k$1((yp+1).toString(),fp)+Sp}),hp=0,mp=0;mp<pp.length;mp++)hp=Math.max(pp[mp].length,hp);var gp=pp.slice(0,cp-1),vp=pp.slice(cp-1,cp),xp=pp.slice(cp);console.log(gp.join(`
`)),console.log(lp.split(`
`)[0]),console.log("%c "+k$1(vp[0],hp),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(xp.join(`
`))}(np,_d.getShaderInfoLog(ap)),new Error("Failed to compile fragment shader.");return ap}var te,ee,ne=/ERROR: [0-9]+:([0-9]+):/g;function re$2(_d,rp){return be(_d,rp,function(){return _d.createProgram()},"Unable to create WebGLProgram.")}function oe(_d,rp,np){if(Kt(_d,rp,function(){return _d.linkProgram(np)}),_d.getProgramParameter(np,_d.LINK_STATUS)===!1)throw console.log(_d.getProgramInfoLog(np)),new Error("Failed to link vertex and fragment shaders.")}function ae(_d,rp,np){if(Kt(_d,rp,function(){return _d.validateProgram(np)}),_d.getProgramParameter(np,_d.VALIDATE_STATUS)===!1)throw console.log(_d.getProgramInfoLog(np)),new Error("Shader program validation failed.")}function ie(_d,rp,np){var ap=be(_d,rp,function(){return _d.createBuffer()},"Unable to create WebGLBuffer");return Kt(_d,rp,function(){return _d.bindBuffer(_d.ARRAY_BUFFER,ap)}),Kt(_d,rp,function(){return _d.bufferData(_d.ARRAY_BUFFER,np,_d.STATIC_DRAW)}),ap}function ue(_d,rp,np){var ap=be(_d,rp,function(){return _d.createBuffer()},"Unable to create WebGLBuffer");return Kt(_d,rp,function(){return _d.bindBuffer(_d.ELEMENT_ARRAY_BUFFER,ap)}),Kt(_d,rp,function(){return _d.bufferData(_d.ELEMENT_ARRAY_BUFFER,np,_d.STATIC_DRAW)}),ap}function se(_d,rp){return be(_d,rp,function(){return _d.createTexture()},"Unable to create WebGLTexture.")}function ce(_d,rp){var np=a$1().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(_d<=0||rp<=0){var ap="["+_d+"x"+rp+"]";throw new Error("Requested texture size "+ap+" is invalid.")}if(_d>np||rp>np)throw ap="["+_d+"x"+rp+"]",new Error("Requested texture size "+ap+" greater than WebGL maximum on this browser / GPU "+("["+np+"x"+np+"]")+".")}function le(_d,rp){return be(_d,rp,function(){return _d.createFramebuffer()},"Unable to create WebGLFramebuffer.")}function he(_d,rp,np,ap,sp,lp,up,cp){var dp=_d.getAttribLocation(np,ap);return dp!==-1&&(Kt(_d,rp,function(){return _d.bindBuffer(_d.ARRAY_BUFFER,sp)}),Kt(_d,rp,function(){return _d.vertexAttribPointer(dp,lp,_d.FLOAT,!1,up,cp)}),Kt(_d,rp,function(){return _d.enableVertexAttribArray(dp)}),!0)}function fe(_d,rp,np,ap){we(_d,ap),Kt(_d,rp,function(){return _d.activeTexture(_d.TEXTURE0+ap)}),Kt(_d,rp,function(){return _d.bindTexture(_d.TEXTURE_2D,np)})}function pe(_d,rp,np,ap){return be(_d,rp,function(){return _d.getUniformLocation(np,ap)},'uniform "'+ap+'" not present in program.')}function de(_d,rp,np){return _d.getUniformLocation(rp,np)}function ve(_d,rp,np,ap,sp,lp){Kt(_d,rp,function(){return fe(_d,rp,ap,lp)}),Kt(_d,rp,function(){return _d.uniform1i(sp,lp)})}function me(_d,rp,np,ap){Kt(_d,rp,function(){return _d.bindFramebuffer(_d.FRAMEBUFFER,ap)}),Kt(_d,rp,function(){return _d.framebufferTexture2D(_d.FRAMEBUFFER,_d.COLOR_ATTACHMENT0,_d.TEXTURE_2D,np,0)})}function ge(_d,rp,np){Kt(_d,rp,function(){return _d.bindFramebuffer(_d.FRAMEBUFFER,np)}),Kt(_d,rp,function(){return _d.framebufferTexture2D(_d.FRAMEBUFFER,_d.COLOR_ATTACHMENT0,_d.TEXTURE_2D,null,0)})}function ye(_d){var rp=_d.checkFramebufferStatus(_d.FRAMEBUFFER);if(rp!==_d.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+xe(_d,rp))}function xe(_d,rp){switch(rp){case _d.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case _d.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case _d.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case _d.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+rp}}function be(_d,rp,np,ap){var sp=Kt(_d,rp,function(){return np()});if(sp==null)throw new Error(ap);return sp}function we(_d,rp){var np=_d.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,ap=rp+_d.TEXTURE0;if(ap<_d.TEXTURE0||ap>np)throw new Error("textureUnit must be in "+("[gl.TEXTURE0, gl.TEXTURE"+np+"]")+".")}function Ce(_d,rp){return rp===void 0&&(rp=2),w$1(_d.slice(0,_d.length-rp))}function Ee(_d){if(_d.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[_d.length>1?_d[_d.length-2]:1,_d[_d.length-1]]}function Re(_d){var rp=[1,1,1];return _d.length===0||_d.length===1&&_d[0]===1||(rp=[Ce(_d)].concat(Ee(_d))),rp}function Ie(_d,rp){var np;rp===void 0&&(rp=!1);var ap=a$1().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(rp&&(ap*=2,(_d=_d.map(function(fp,pp){return pp>=_d.length-2?v$1(_d[pp]):_d[pp]})).length===1&&(_d=[2,_d[0]])),_d.length!==2){var sp=T(_d);_d=sp.newShape}var lp=w$1(_d);if(_d.length<=1&&lp<=ap)return[1,lp];if(_d.length===2&&_d[0]<=ap&&_d[1]<=ap)return _d;if(_d.length===3&&_d[0]*_d[1]<=ap&&_d[2]<=ap)return[_d[0]*_d[1],_d[2]];if(_d.length===3&&_d[0]<=ap&&_d[1]*_d[2]<=ap)return[_d[0],_d[1]*_d[2]];if(_d.length===4&&_d[0]*_d[1]*_d[2]<=ap&&_d[3]<=ap)return[_d[0]*_d[1]*_d[2],_d[3]];if(_d.length===4&&_d[0]<=ap&&_d[1]*_d[2]*_d[3]<=ap)return[_d[0],_d[1]*_d[2]*_d[3]];if(rp){var up=Ce(_d),cp=2,dp=2;return _d.length&&(cp=(np=Ee(_d))[0],dp=np[1]),I(lp=up*(cp/2)*(dp/2)).map(function(fp){return 2*fp})}return I(lp)}function ke(_d){return _d%2==0}function Se(_d,rp){if(C(_d=_d.slice(-2),rp=rp.slice(-2))||!_d.length||!rp.length||_d[0]===0||_d[1]===0||rp[0]===0||rp[1]===0)return!0;if(_d.length!==rp.length){var np=_d.slice(-1)[0],ap=rp.slice(-1)[0];if(np===ap||ke(np)&&ke(ap)&&(_d[0]===1||rp[0]===1))return!0}return _d[1]===rp[1]&&ke(_d[0])&&ke(rp[0])}function Ae(_d){if(te==null){var rp=Ut(_d);te=rp.getParameter(rp.MAX_TEXTURE_SIZE)}return te}function De(_d){if(ee==null){var rp=Ut(_d);ee=rp.getParameter(rp.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,ee)}function Te(_d){if(_d===0)return 0;var rp=Ut(_d);return Ne(rp,"EXT_disjoint_timer_query_webgl2")&&_d===2?2:Ne(rp,"EXT_disjoint_timer_query")?1:0}function Ne(_d,rp){return _d.getExtension(rp)!=null}function Fe(_d){try{if(Ut(_d)!=null)return!0}catch{return!1}return!1}function Oe(_d){if(_d===0)return!1;var rp=Ut(_d);if(_d===1){if(!Ne(rp,"OES_texture_float"))return!1}else if(!Ne(rp,"EXT_color_buffer_float"))return!1;return Me(rp)}function _e(_d){if(_d===0)return!1;var rp=Ut(_d);if(_d!==1){if(Ne(rp,"EXT_color_buffer_float"))return Me(rp);if(Ne(rp,"EXT_color_buffer_half_float")){var np=rp.getExtension("EXT_color_buffer_half_float");return function(ap,sp){var lp=qt(ap,sp),up=ap.createTexture();ap.bindTexture(ap.TEXTURE_2D,up),ap.texImage2D(ap.TEXTURE_2D,0,lp.internalFormatHalfFloat,1,1,0,lp.textureFormatFloat,lp.textureTypeHalfFloat,null);var cp=ap.createFramebuffer();ap.bindFramebuffer(ap.FRAMEBUFFER,cp),ap.framebufferTexture2D(ap.FRAMEBUFFER,ap.COLOR_ATTACHMENT0,ap.TEXTURE_2D,up,0);var dp=ap.checkFramebufferStatus(ap.FRAMEBUFFER)===ap.FRAMEBUFFER_COMPLETE;return ap.bindTexture(ap.TEXTURE_2D,null),ap.bindFramebuffer(ap.FRAMEBUFFER,null),ap.deleteTexture(up),ap.deleteFramebuffer(cp),dp}(rp,np)}return!1}return!!Ne(rp,"OES_texture_float")&&!!Ne(rp,"WEBGL_color_buffer_float")&&Me(rp)}function Me(_d){var rp=qt(_d),np=_d.createTexture();_d.bindTexture(_d.TEXTURE_2D,np),_d.texImage2D(_d.TEXTURE_2D,0,rp.internalFormatFloat,1,1,0,rp.textureFormatFloat,rp.textureTypeFloat,null);var ap=_d.createFramebuffer();_d.bindFramebuffer(_d.FRAMEBUFFER,ap),_d.framebufferTexture2D(_d.FRAMEBUFFER,_d.COLOR_ATTACHMENT0,_d.TEXTURE_2D,np,0);var sp=_d.checkFramebufferStatus(_d.FRAMEBUFFER)===_d.FRAMEBUFFER_COMPLETE;return _d.bindTexture(_d.TEXTURE_2D,null),_d.bindFramebuffer(_d.FRAMEBUFFER,null),_d.deleteTexture(np),_d.deleteFramebuffer(ap),sp}function Be(_d){return _d===2&&Ut(_d).fenceSync!=null}var Pe=Object.freeze({callAndCheck:Kt,canBeRepresented:$t,getWebGLErrorMessage:Yt,getExtensionOrThrow:Qt,createVertexShader:Jt,createFragmentShader:Zt,createProgram:re$2,linkProgram:oe,validateProgram:ae,createStaticVertexBuffer:ie,createStaticIndexBuffer:ue,getNumChannels:function(){return a$1().getNumber("WEBGL_VERSION")===2?1:4},createTexture:se,validateTextureSize:ce,createFramebuffer:le,bindVertexBufferToProgramAttribute:he,bindTextureUnit:fe,unbindTextureUnit:function(_d,rp,np){we(_d,np),Kt(_d,rp,function(){return _d.activeTexture(_d.TEXTURE0+np)}),Kt(_d,rp,function(){return _d.bindTexture(_d.TEXTURE_2D,null)})},getProgramUniformLocationOrThrow:pe,getProgramUniformLocation:de,bindTextureToProgramUniformSampler:ve,bindCanvasToFramebuffer:function(_d,rp){Kt(_d,rp,function(){return _d.bindFramebuffer(_d.FRAMEBUFFER,null)}),Kt(_d,rp,function(){return _d.viewport(0,0,_d.canvas.width,_d.canvas.height)}),Kt(_d,rp,function(){return _d.scissor(0,0,_d.canvas.width,_d.canvas.height)})},bindColorTextureToFramebuffer:me,unbindColorTextureFromFramebuffer:ge,validateFramebuffer:ye,getFramebufferErrorMessage:xe,getBatchDim:Ce,getRowsCols:Ee,getShapeAs3D:Re,getTextureShapeFromLogicalShape:Ie,isReshapeFree:Se,getWebGLMaxTextureSize:Ae,resetMaxTextureSize:function(){te=null},resetMaxTexturesInShader:function(){ee=null},getMaxTexturesInShader:De,getWebGLDisjointQueryTimerVersion:Te,hasExtension:Ne,isWebGLVersionEnabled:Fe,isCapableOfRenderingToFloatTexture:Oe,isDownloadFloatTextureEnabled:_e,isWebGLFenceEnabled:Be}),Le=a$1();function We(){a$1().set("PROD",!0)}function Ue(){a$1().set("DEBUG",!0)}function Ve(){a$1().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function ze(_d){a$1().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(_d+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function Ge(){Nt.disposeVariables()}function He(){return Nt}function qe(){return Nt.memory()}function Ke(_d){return Nt.profile(_d)}function je(_d,rp){return Nt.tidy(_d,rp)}function Xe(_d){kt(_d).forEach(function(rp){return rp.dispose()})}function $e(_d){return Nt.keep(_d)}function Ye(_d){return Nt.time(_d)}function Qe(_d){return Nt.setBackend(_d)}function Je(){return Nt.ready()}function Ze(){return Nt.backendName}function tn(_d){Nt.removeBackend(_d)}function en(_d){return Nt.findBackend(_d)}function nn(_d){return Nt.findBackendFactory(_d)}function rn(_d,rp,np){return np===void 0&&(np=1),Nt.registerBackend(_d,rp,np)}function on(){return Nt.backend}function an(_d,rp){a$1().setPlatform(_d,rp)}function un(){for(var _d=[],rp=0;rp<arguments.length;rp++)_d[rp]=arguments[rp];a$1().getBool("IS_TEST")||console.warn.apply(console,_d)}function sn(_d,rp){var np=_d;if(B(_d))return rp==="string"?[]:[_d.length];if(!Array.isArray(_d))return[];for(var ap=[];Array.isArray(np)||B(np)&&rp!=="string";)ap.push(np.length),np=np[0];return Array.isArray(_d)&&a$1().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function sp(lp,up,cp){if(cp=cp||[],!Array.isArray(lp)&&!B(lp))return void g(up.length===0,function(){return"Element arr["+cp.join("][")+"] is a primitive, but should be an array/TypedArray of "+up[0]+" elements"});g(up.length>0,function(){return"Element arr["+cp.join("][")+"] should be a primitive, but is an array of "+lp.length+" elements"}),g(lp.length===up[0],function(){return"Element arr["+cp.join("][")+"] should have "+up[0]+" elements, but has "+lp.length+" elements"});for(var dp=up.slice(1),fp=0;fp<lp.length;++fp)sp(lp[fp],dp,cp.concat(fp))}(_d,ap,[]),ap}function cn(_d,rp,np,ap){if(_d!=null&&(_d!=="numeric"&&_d!==rp||_d==="numeric"&&rp==="string"))throw new Error("Argument '"+np+"' passed to '"+ap+"' must be "+_d+" tensor, but got "+rp+" tensor")}function ln(_d,rp,np,ap){if(ap===void 0&&(ap="numeric"),_d instanceof dt)return cn(ap,_d.dtype,rp,np),_d;var sp=z(_d);if(sp!=="string"&&["bool","int32","float32"].indexOf(ap)>=0&&(sp=ap),cn(ap,sp,rp,np),_d==null||!B(_d)&&!Array.isArray(_d)&&typeof _d!="number"&&typeof _d!="boolean"&&typeof _d!="string"){var lp=_d==null?"null":_d.constructor.name;throw new Error("Argument '"+rp+"' passed to '"+np+"' must be a Tensor or TensorLike, but got '"+lp+"'")}var up=sn(_d,sp);B(_d)||Array.isArray(_d)||(_d=[_d]);var cp=sp!=="string"?K(_d,sp,a$1().getBool("DEBUG")):b(_d,[],!0);return Nt.makeTensor(cp,up,sp)}function hn(_d,rp,np,ap){if(ap===void 0&&(ap="numeric"),!Array.isArray(_d))throw new Error("Argument "+rp+" passed to "+np+" must be a `Tensor[]` or `TensorLike[]`");return _d.map(function(sp,lp){return ln(sp,rp+"["+lp+"]",np)},ap)}function fn(_d,rp){for(var np=0;np<_d.length;++np)if(_d[_d.length-np-1]!==rp-1-np)return!1;return!0}function pn(_d,rp,np){for(var ap=_d.length+rp.length,sp=[],lp=0,up=0,cp=0;cp<ap;cp++)np.indexOf(cp)===-1?sp.push(_d[lp++]):sp.push(rp[up++]);return sp}function dn(_d,rp){for(var np=[],ap=_d.length,sp=0;sp<ap;sp++)rp.indexOf(sp)===-1&&np.push(_d[sp]);return[np,rp.map(function(lp){return _d[lp]})]}function vn(_d,rp){return pn(_d,rp.map(function(np){return 1}),rp)}function mn(_d,rp,np){g(fn(rp,np),function(){return _d+" supports only inner-most axes for now. Got axes "+rp+" and rank-"+np+" input."})}function gn(_d,rp){if(fn(_d,rp))return null;for(var np=[],ap=0;ap<rp;++ap)_d.indexOf(ap)===-1&&np.push(ap);return _d.forEach(function(sp){return np.push(sp)}),np}function yn(_d){return _d.map(function(rp,np){return[np,rp]}).sort(function(rp,np){return rp[1]-np[1]}).map(function(rp){return rp[0]})}function xn(_d,rp){for(var np=[],ap=rp-_d;ap<rp;++ap)np.push(ap);return np}function bn(_d,rp){var np=_d[0].length;_d.forEach(function(sp,lp){g(sp.length===np,function(){return"Error in concat"+np+"D: rank of tensors["+lp+"] must be the same as the rank of the rest ("+np+")"})}),g(rp>=0&&rp<np,function(){return"Error in concat"+np+"D: axis must be between 0 and "+(np-1)+"."});var ap=_d[0];_d.forEach(function(sp,lp){for(var up=0;up<np;up++)g(up===rp||sp[up]===ap[up],function(){return"Error in concat"+np+"D: Shape of tensors["+lp+"] ("+sp+") does not match the shape of the rest ("+ap+") along the non-concatenated axis "+lp+"."})})}function wn(_d,rp){for(var np=_d[0].slice(),ap=1;ap<_d.length;ap++)np[rp]+=_d[ap][rp];return np}function Cn(_d){var rp=Object.keys(_d);if(rp.length!==1)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+rp.length+" keys.");var np=rp[0],ap=_d[np];np.endsWith("_")&&(np=np.substring(0,np.length-1));var sp=function(){for(var lp=[],up=0;up<arguments.length;up++)lp[up]=arguments[up];Nt.startScope(np);try{var cp=ap.apply(void 0,lp);return cp instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),Nt.endScope(cp),cp}catch(dp){throw Nt.endScope(null),dp}};return Object.defineProperty(sp,"name",{value:np,configurable:!0}),sp}Le.registerFlag("HAS_WEBGL",function(){return Le.getNumber("WEBGL_VERSION")>0}),Le.registerFlag("WEBGL_VERSION",function(){return Fe(2)?2:Fe(1)?1:0}),Le.registerFlag("WEBGL_BUFFER_SUPPORTED",function(){return Le.get("WEBGL_VERSION")===2}),Le.registerFlag("WEBGL_CPU_FORWARD",function(){return!0}),Le.registerFlag("WEBGL_FORCE_F16_TEXTURES",function(){return!1}),Le.registerFlag("WEBGL_PACK",function(){return Le.getBool("HAS_WEBGL")}),Le.registerFlag("WEBGL_PACK_NORMALIZATION",function(){return Le.getBool("WEBGL_PACK")}),Le.registerFlag("WEBGL_PACK_CLIP",function(){return Le.getBool("WEBGL_PACK")}),Le.registerFlag("WEBGL_PACK_DEPTHWISECONV",function(){return!1}),Le.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",function(){return Le.getBool("WEBGL_PACK")}),Le.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",function(){return Le.getBool("WEBGL_PACK")}),Le.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",function(){return Le.getBool("WEBGL_PACK")}),Le.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",function(){return Le.getBool("WEBGL_PACK")}),Le.registerFlag("WEBGL_PACK_REDUCE",function(){return Le.getBool("WEBGL_PACK")}),Le.registerFlag("WEBGL_LAZILY_UNPACK",function(){return Le.getBool("WEBGL_PACK")}),Le.registerFlag("WEBGL_CONV_IM2COL",function(){return Le.getBool("WEBGL_PACK")}),Le.registerFlag("WEBGL_MAX_TEXTURE_SIZE",function(){return Ae(Le.getNumber("WEBGL_VERSION"))}),Le.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",function(){return De(Le.getNumber("WEBGL_VERSION"))}),Le.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",function(){var _d=Le.getNumber("WEBGL_VERSION");return _d===0?0:Te(_d)}),Le.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",function(){return Le.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&(_d=navigator.userAgent||navigator.vendor||window.opera,!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(_d)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(_d.substr(0,4))));var _d}),Le.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",function(){return Oe(Le.getNumber("WEBGL_VERSION"))}),Le.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",function(){return!Le.getBool("WEBGL_FORCE_F16_TEXTURES")&&Le.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")}),Le.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",function(){return _e(Le.getNumber("WEBGL_VERSION"))}),Le.registerFlag("WEBGL_FENCE_API_ENABLED",function(){return Be(Le.getNumber("WEBGL_VERSION"))}),Le.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",function(){return Le.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0}),pt=ze;var En=Cn({complex_:function(_d,rp){var np=ln(_d,"real","complex"),ap=ln(rp,"imag","complex");return y(np.shape,ap.shape,"real and imag shapes, "+np.shape+" and "+ap.shape+", must match in call to tf.complex()."),Nt.runKernelFunc(function(sp){return sp.complex(np,ap)},{$real:np,$imag:ap})}}),Rn=Cn({real_:function(_d){var rp=ln(_d,"input","real");return Nt.runKernelFunc(function(np){return np.real(rp)},{$input:rp})}}),In=Cn({imag_:function(_d){var rp=ln(_d,"input","imag");return Nt.runKernelFunc(function(np){return np.imag(rp)},{$input:rp})}});function kn(_d,rp,np){return Sn(_d,rp,sn(_d,np),np)}function Sn(_d,rp,np,ap){if(ap==null&&(ap=z(_d)),ap==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!B(_d)&&!Array.isArray(_d)&&typeof _d!="number"&&typeof _d!="boolean"&&typeof _d!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(rp!=null){Q(rp);var sp=w$1(rp),lp=w$1(np);g(sp===lp,function(){return"Based on the provided shape, ["+rp+"], the tensor should have "+sp+" values but has "+lp});for(var up=0;up<np.length;++up){var cp=np[up],dp=up!==np.length-1||cp!==w$1(rp.slice(up));g(np[up]===rp[up]||!dp,function(){return"Error creating a new Tensor. Inferred shape ("+np+") does not match the provided shape ("+rp+"). "})}}return B(_d)||Array.isArray(_d)||(_d=[_d]),rp=rp||np,_d=ap!=="string"?K(_d,ap,a$1().getBool("DEBUG")):b(_d,[],!0),Nt.makeTensor(_d,rp,ap)}function An(_d,rp){if((B(_d)&&rp!=="string"||Array.isArray(_d))&&rp!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(rp==="string"&&B(_d)&&!(_d instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Sn(_d,[],[],rp)}function Dn(_d,rp){x(_d);var np=sn(_d,rp);if(np.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Sn(_d,null,np,rp)}function Tn(_d,rp,np){if(x(_d),rp!=null&&rp.length!==2)throw new Error("tensor2d() requires shape to have two numbers");var ap=sn(_d,np);if(ap.length!==2&&ap.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(ap.length===1&&rp==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Sn(_d,rp,ap,np)}function Nn(_d,rp,np){if(x(_d),rp!=null&&rp.length!==3)throw new Error("tensor3d() requires shape to have three numbers");var ap=sn(_d,np);if(ap.length!==3&&ap.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(ap.length===1&&rp==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Sn(_d,rp,ap,np)}function Fn(_d,rp,np){if(x(_d),rp!=null&&rp.length!==4)throw new Error("tensor4d() requires shape to have four numbers");var ap=sn(_d,np);if(ap.length!==4&&ap.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(ap.length===1&&rp==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Sn(_d,rp,ap,np)}function On(_d,rp,np){if(x(_d),rp!=null&&rp.length!==5)throw new Error("tensor5d() requires shape to have five numbers");var ap=sn(_d,np);if(ap.length!==5&&ap.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(ap.length===1&&rp==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Sn(_d,rp,ap,np)}function _n(_d,rp,np){if(x(_d),rp!=null&&rp.length!==6)throw new Error("tensor6d() requires shape to have six numbers");var ap=sn(_d,np);if(ap.length!==6&&ap.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(ap.length===1&&rp==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return Sn(_d,rp=rp||ap,ap,np)}function Mn(_d,rp,np,ap){return rp===void 0&&(rp=!0),Nt.makeVariable(_d,rp,np,ap)}function Bn(_d,rp){if(rp===void 0&&(rp="float32"),rp==="complex64"){var np=Bn(_d,"float32"),ap=Pn(_d,"float32");return En(np,ap)}var sp=X(w$1(_d),rp);return Nt.makeTensor(sp,_d,rp)}function Pn(_d,rp){if(rp===void 0&&(rp="float32"),rp==="complex64"){var np=Pn(_d,"float32"),ap=Pn(_d,"float32");return En(np,ap)}var sp=$$1(w$1(_d),rp);return Nt.makeTensor(sp,_d,rp)}function Ln(_d,rp,np){return Nt.runKernelFunc(function(ap){return ap.fill(_d,rp,np)},{})}function Wn(_d,rp,np){if(np<=0)throw new Error("The number of values should be positive.");return Nt.runKernelFunc(function(ap){return ap.linspace(_d,rp,np)},{})}function Un(_d,rp,np,ap){if(np===void 0&&(np=1),ap===void 0&&(ap="float32"),np===0)throw new Error("Cannot have a step of zero");if(_d===rp||_d<rp&&np<0||rp<_d&&np>1)return Pn([0],ap);var sp=$$1(Math.abs(Math.ceil((rp-_d)/np)),ap);rp<_d&&np===1&&(np=-1),sp[0]=_d;for(var lp=1;lp<sp.length;lp++)sp[lp]=sp[lp-1]+np;return Dn(sp,ap)}var Vn=Cn({onesLike_:function(_d){var rp=ln(_d,"x","onesLike");if(rp.dtype==="complex64"){var np=Vn(Rn(rp)),ap=zn(In(rp));return En(np,ap)}return Nt.runKernelFunc(function(sp){return sp.onesLike(rp)},{$x:rp},function(sp,lp){return{$x:function(){return zn(sp)}}})}}),zn=Cn({zerosLike_:function(_d){var rp=ln(_d,"x","zerosLike");return Nt.runKernelFunc(function(np){return np.zerosLike(rp)},{$x:rp},function(np,ap){return{$x:function(){return zn(np)}}})}}),Gn=Cn({concat_:function(_d,rp){rp===void 0&&(rp=0),g(_d.length>=1,function(){return"Pass at least one tensor to concat"});var np=hn(_d,"tensors","concat");np[0].dtype==="complex64"&&np.forEach(function(up){if(up.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype `+up.dtype+". ")}),rp=D(rp,np[0].shape)[0];var ap=wn(np.map(function(up){return up.shape}),rp);if(w$1(ap)===0)return kn([],ap);if((np=np.filter(function(up){return up.size>0})).length===1)return np[0];var sp=np.map(function(up){return up.shape});bn(sp,rp);var lp=np;return Nt.runKernelFunc(function(up){return up.concat(np,rp)},lp,function(up){var cp=sp.map(function(dp){return dp[rp]});return Xn(up,cp,rp).map(function(dp){return function(){return dp}})})}}),Hn=Cn({concat1d_:function(_d){return Gn(_d,0)}}),qn=Cn({concat2d_:function(_d,rp){return Gn(_d,rp)}}),Kn=Cn({concat3d_:function(_d,rp){return Gn(_d,rp)}}),jn=Cn({concat4d_:function(_d,rp){return Gn(_d,rp)}}),Xn=Cn({split_:function(_d,rp,np){np===void 0&&(np=0);var ap,sp=ln(_d,"x","split");return np=D(np,sp.shape)[0],typeof rp=="number"?(g(sp.shape[np]%rp==0,function(){return"Number of splits must evenly divide the axis."}),ap=new Array(rp).fill(sp.shape[np]/rp)):(g(sp.shape[np]===rp.reduce(function(lp,up){return lp+up}),function(){return"The sum of sizes must match the size of the axis dimension."}),ap=rp),Nt.runKernelFunc(function(lp){return lp.split(sp,ap,np)},{$x:sp},function(lp){return{$x:function(){return Gn(lp,np)}}})}});function $n(_d,rp){return _d(rp={exports:{}},rp.exports),rp.exports}var Yn=$n(function(_d){(function(rp,np,ap){function sp(cp){var dp,fp=this,pp=(dp=4022871197,function(hp){hp=hp.toString();for(var mp=0;mp<hp.length;mp++){var gp=.02519603282416938*(dp+=hp.charCodeAt(mp));gp-=dp=gp>>>0,dp=(gp*=dp)>>>0,dp+=4294967296*(gp-=dp)}return 23283064365386963e-26*(dp>>>0)});fp.next=function(){var hp=2091639*fp.s0+23283064365386963e-26*fp.c;return fp.s0=fp.s1,fp.s1=fp.s2,fp.s2=hp-(fp.c=0|hp)},fp.c=1,fp.s0=pp(" "),fp.s1=pp(" "),fp.s2=pp(" "),fp.s0-=pp(cp),fp.s0<0&&(fp.s0+=1),fp.s1-=pp(cp),fp.s1<0&&(fp.s1+=1),fp.s2-=pp(cp),fp.s2<0&&(fp.s2+=1),pp=null}function lp(cp,dp){return dp.c=cp.c,dp.s0=cp.s0,dp.s1=cp.s1,dp.s2=cp.s2,dp}function up(cp,dp){var fp=new sp(cp),pp=dp&&dp.state,hp=fp.next;return hp.int32=function(){return 4294967296*fp.next()|0},hp.double=function(){return hp()+11102230246251565e-32*(2097152*hp()|0)},hp.quick=hp,pp&&(typeof pp=="object"&&lp(pp,fp),hp.state=function(){return lp(fp,{})}),hp}np&&np.exports?np.exports=up:ap&&ap.amd?ap(function(){return up}):this.alea=up})(0,_d,!1)}),Qn=$n(function(_d){(function(rp,np,ap){function sp(cp){var dp=this,fp="";dp.x=0,dp.y=0,dp.z=0,dp.w=0,dp.next=function(){var hp=dp.x^dp.x<<11;return dp.x=dp.y,dp.y=dp.z,dp.z=dp.w,dp.w^=dp.w>>>19^hp^hp>>>8},cp===(0|cp)?dp.x=cp:fp+=cp;for(var pp=0;pp<fp.length+64;pp++)dp.x^=0|fp.charCodeAt(pp),dp.next()}function lp(cp,dp){return dp.x=cp.x,dp.y=cp.y,dp.z=cp.z,dp.w=cp.w,dp}function up(cp,dp){var fp=new sp(cp),pp=dp&&dp.state,hp=function(){return(fp.next()>>>0)/4294967296};return hp.double=function(){do var mp=((fp.next()>>>11)+(fp.next()>>>0)/4294967296)/2097152;while(mp===0);return mp},hp.int32=fp.next,hp.quick=hp,pp&&(typeof pp=="object"&&lp(pp,fp),hp.state=function(){return lp(fp,{})}),hp}np&&np.exports?np.exports=up:ap&&ap.amd?ap(function(){return up}):this.xor128=up})(0,_d,!1)}),Jn=$n(function(_d){(function(rp,np,ap){function sp(cp){var dp=this,fp="";dp.next=function(){var hp=dp.x^dp.x>>>2;return dp.x=dp.y,dp.y=dp.z,dp.z=dp.w,dp.w=dp.v,(dp.d=dp.d+362437|0)+(dp.v=dp.v^dp.v<<4^hp^hp<<1)|0},dp.x=0,dp.y=0,dp.z=0,dp.w=0,dp.v=0,cp===(0|cp)?dp.x=cp:fp+=cp;for(var pp=0;pp<fp.length+64;pp++)dp.x^=0|fp.charCodeAt(pp),pp==fp.length&&(dp.d=dp.x<<10^dp.x>>>4),dp.next()}function lp(cp,dp){return dp.x=cp.x,dp.y=cp.y,dp.z=cp.z,dp.w=cp.w,dp.v=cp.v,dp.d=cp.d,dp}function up(cp,dp){var fp=new sp(cp),pp=dp&&dp.state,hp=function(){return(fp.next()>>>0)/4294967296};return hp.double=function(){do var mp=((fp.next()>>>11)+(fp.next()>>>0)/4294967296)/2097152;while(mp===0);return mp},hp.int32=fp.next,hp.quick=hp,pp&&(typeof pp=="object"&&lp(pp,fp),hp.state=function(){return lp(fp,{})}),hp}np&&np.exports?np.exports=up:ap&&ap.amd?ap(function(){return up}):this.xorwow=up})(0,_d,!1)}),Zn=$n(function(_d){(function(rp,np,ap){function sp(cp){var dp=this;dp.next=function(){var fp,pp,hp=dp.x,mp=dp.i;return fp=hp[mp],pp=(fp^=fp>>>7)^fp<<24,pp^=(fp=hp[mp+1&7])^fp>>>10,pp^=(fp=hp[mp+3&7])^fp>>>3,pp^=(fp=hp[mp+4&7])^fp<<7,fp=hp[mp+7&7],pp^=(fp^=fp<<13)^fp<<9,hp[mp]=pp,dp.i=mp+1&7,pp},function(fp,pp){var hp,mp=[];if(pp===(0|pp))mp[0]=pp;else for(pp=""+pp,hp=0;hp<pp.length;++hp)mp[7&hp]=mp[7&hp]<<15^pp.charCodeAt(hp)+mp[hp+1&7]<<13;for(;mp.length<8;)mp.push(0);for(hp=0;hp<8&&mp[hp]===0;++hp);for(hp==8?mp[7]=-1:mp[hp],fp.x=mp,fp.i=0,hp=256;hp>0;--hp)fp.next()}(dp,cp)}function lp(cp,dp){return dp.x=cp.x.slice(),dp.i=cp.i,dp}function up(cp,dp){cp==null&&(cp=+new Date);var fp=new sp(cp),pp=dp&&dp.state,hp=function(){return(fp.next()>>>0)/4294967296};return hp.double=function(){do var mp=((fp.next()>>>11)+(fp.next()>>>0)/4294967296)/2097152;while(mp===0);return mp},hp.int32=fp.next,hp.quick=hp,pp&&(pp.x&&lp(pp,fp),hp.state=function(){return lp(fp,{})}),hp}np&&np.exports?np.exports=up:ap&&ap.amd?ap(function(){return up}):this.xorshift7=up})(0,_d,!1)}),tr=$n(function(_d){(function(rp,np,ap){function sp(cp){var dp=this;dp.next=function(){var fp,pp,hp=dp.w,mp=dp.X,gp=dp.i;return dp.w=hp=hp+1640531527|0,pp=mp[gp+34&127],fp=mp[gp=gp+1&127],pp^=pp<<13,fp^=fp<<17,pp^=pp>>>15,fp^=fp>>>12,pp=mp[gp]=pp^fp,dp.i=gp,pp+(hp^hp>>>16)|0},function(fp,pp){var hp,mp,gp,vp,xp,Sp=[],yp=128;for(pp===(0|pp)?(mp=pp,pp=null):(pp+="\0",mp=0,yp=Math.max(yp,pp.length)),gp=0,vp=-32;vp<yp;++vp)pp&&(mp^=pp.charCodeAt((vp+32)%pp.length)),vp===0&&(xp=mp),mp^=mp<<10,mp^=mp>>>15,mp^=mp<<4,mp^=mp>>>13,vp>=0&&(xp=xp+1640531527|0,gp=(hp=Sp[127&vp]^=mp+xp)==0?gp+1:0);for(gp>=128&&(Sp[127&(pp&&pp.length||0)]=-1),gp=127,vp=512;vp>0;--vp)mp=Sp[gp+34&127],hp=Sp[gp=gp+1&127],mp^=mp<<13,hp^=hp<<17,mp^=mp>>>15,hp^=hp>>>12,Sp[gp]=mp^hp;fp.w=xp,fp.X=Sp,fp.i=gp}(dp,cp)}function lp(cp,dp){return dp.i=cp.i,dp.w=cp.w,dp.X=cp.X.slice(),dp}function up(cp,dp){cp==null&&(cp=+new Date);var fp=new sp(cp),pp=dp&&dp.state,hp=function(){return(fp.next()>>>0)/4294967296};return hp.double=function(){do var mp=((fp.next()>>>11)+(fp.next()>>>0)/4294967296)/2097152;while(mp===0);return mp},hp.int32=fp.next,hp.quick=hp,pp&&(pp.X&&lp(pp,fp),hp.state=function(){return lp(fp,{})}),hp}np&&np.exports?np.exports=up:ap&&ap.amd?ap(function(){return up}):this.xor4096=up})(0,_d,!1)}),er=$n(function(_d){(function(rp,np,ap){function sp(cp){var dp=this,fp="";dp.next=function(){var hp=dp.b,mp=dp.c,gp=dp.d,vp=dp.a;return hp=hp<<25^hp>>>7^mp,mp=mp-gp|0,gp=gp<<24^gp>>>8^vp,vp=vp-hp|0,dp.b=hp=hp<<20^hp>>>12^mp,dp.c=mp=mp-gp|0,dp.d=gp<<16^mp>>>16^vp,dp.a=vp-hp|0},dp.a=0,dp.b=0,dp.c=-1640531527,dp.d=1367130551,cp===Math.floor(cp)?(dp.a=cp/4294967296|0,dp.b=0|cp):fp+=cp;for(var pp=0;pp<fp.length+20;pp++)dp.b^=0|fp.charCodeAt(pp),dp.next()}function lp(cp,dp){return dp.a=cp.a,dp.b=cp.b,dp.c=cp.c,dp.d=cp.d,dp}function up(cp,dp){var fp=new sp(cp),pp=dp&&dp.state,hp=function(){return(fp.next()>>>0)/4294967296};return hp.double=function(){do var mp=((fp.next()>>>11)+(fp.next()>>>0)/4294967296)/2097152;while(mp===0);return mp},hp.int32=fp.next,hp.quick=hp,pp&&(typeof pp=="object"&&lp(pp,fp),hp.state=function(){return lp(fp,{})}),hp}np&&np.exports?np.exports=up:ap&&ap.amd?ap(function(){return up}):this.tychei=up})(0,_d,!1)}),nr=$n(function(_d){(function(rp,np){var ap,sp=this,lp=256,up=6,cp="random",dp=np.pow(lp,up),fp=np.pow(2,52),pp=2*fp,hp=lp-1;function mp(yp,bp,Ep){var wp=[],_p=xp(function Cp(Ap,Op){var Lp,Mp=[],kp=typeof Ap;if(Op&&kp=="object")for(Lp in Ap)try{Mp.push(Cp(Ap[Lp],Op-1))}catch{}return Mp.length?Mp:kp=="string"?Ap:Ap+"\0"}((bp=bp==1?{entropy:!0}:bp||{}).entropy?[yp,Sp(rp)]:yp??function(){try{var Cp;return ap&&(Cp=ap.randomBytes)?Cp=Cp(lp):(Cp=new Uint8Array(lp),(sp.crypto||sp.msCrypto).getRandomValues(Cp)),Sp(Cp)}catch{var Ap=sp.navigator,Op=Ap&&Ap.plugins;return[+new Date,sp,Op,sp.screen,Sp(rp)]}}(),3),wp),Rp=new gp(wp),$p=function(){for(var Cp=Rp.g(up),Ap=dp,Op=0;Cp<fp;)Cp=(Cp+Op)*lp,Ap*=lp,Op=Rp.g(1);for(;Cp>=pp;)Cp/=2,Ap/=2,Op>>>=1;return(Cp+Op)/Ap};return $p.int32=function(){return 0|Rp.g(4)},$p.quick=function(){return Rp.g(4)/4294967296},$p.double=$p,xp(Sp(Rp.S),rp),(bp.pass||Ep||function(Cp,Ap,Op,Lp){return Lp&&(Lp.S&&vp(Lp,Rp),Cp.state=function(){return vp(Rp,{})}),Op?(np[cp]=Cp,Ap):Cp})($p,_p,"global"in bp?bp.global:this==np,bp.state)}function gp(yp){var bp,Ep=yp.length,wp=this,_p=0,Rp=wp.i=wp.j=0,$p=wp.S=[];for(Ep||(yp=[Ep++]);_p<lp;)$p[_p]=_p++;for(_p=0;_p<lp;_p++)$p[_p]=$p[Rp=hp&Rp+yp[_p%Ep]+(bp=$p[_p])],$p[Rp]=bp;(wp.g=function(Cp){for(var Ap,Op=0,Lp=wp.i,Mp=wp.j,kp=wp.S;Cp--;)Ap=kp[Lp=hp&Lp+1],Op=Op*lp+kp[hp&(kp[Lp]=kp[Mp=hp&Mp+Ap])+(kp[Mp]=Ap)];return wp.i=Lp,wp.j=Mp,Op})(lp)}function vp(yp,bp){return bp.i=yp.i,bp.j=yp.j,bp.S=yp.S.slice(),bp}function xp(yp,bp){for(var Ep,wp=yp+"",_p=0;_p<wp.length;)bp[hp&_p]=hp&(Ep^=19*bp[hp&_p])+wp.charCodeAt(_p++);return Sp(bp)}function Sp(yp){return String.fromCharCode.apply(0,yp)}if(np["seed"+cp]=mp,xp(np.random(),rp),_d.exports){_d.exports=mp;try{ap=require("crypto")}catch{}}})([],Math)});nr.alea=Yn,nr.xor128=Qn,nr.xorwow=Jn,nr.xorshift7=Zn,nr.xor4096=tr,nr.tychei=er;var rr=nr.alea,or=function(){function _d(rp,np,ap,sp,lp){this.mean=rp,this.stdDev=np,this.dtype=ap,this.nextVal=NaN,this.truncated=sp,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var up=lp||Math.random();this.random=rr(up.toString())}return _d.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var rp=this.nextVal;return this.nextVal=NaN,rp}for(var np,ap,sp=!1;!sp;){var lp=void 0,up=void 0,cp=void 0;do cp=(lp=2*this.random()-1)*lp+(up=2*this.random()-1)*up;while(cp>=1||cp===0);var dp=Math.sqrt(-2*Math.log(cp)/cp);np=this.mean+this.stdDev*lp*dp,ap=this.mean+this.stdDev*up*dp,this.truncated&&!this.isValidTruncated(np)||(sp=!0)}return this.truncated&&!this.isValidTruncated(ap)||(this.nextVal=this.convertValue(ap)),this.convertValue(np)},_d.prototype.convertValue=function(rp){return this.dtype==null||this.dtype==="float32"?rp:Math.round(rp)},_d.prototype.isValidTruncated=function(rp){return rp<=this.upper&&rp>=this.lower},_d}(),ar=function(){function _d(rp,np,ap,sp){this.alpha=rp,this.beta=1/np,this.dtype=ap;var lp=sp||Math.random();this.randu=rr(lp.toString()),this.randn=new or(0,1,ap,!1,this.randu()),this.d=rp<1?rp+2/3:rp-1/3,this.c=1/Math.sqrt(9*this.d)}return _d.prototype.nextValue=function(){for(var rp,np,ap,sp,lp,up;;){do sp=this.randn.nextValue(),up=1+this.c*sp;while(up<=0);if(up*=up*up,np=1-.331*(rp=sp*sp)*rp,ap=.5*rp+this.d*(1-up+Math.log(up)),(lp=this.randu())<np||Math.log(lp)<ap)break}return up=1/this.beta*this.d*up,this.alpha<1&&(up*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(up)},_d.prototype.convertValue=function(rp){return this.dtype==="float32"?rp:Math.round(rp)},_d}(),ir=function(){function _d(rp,np,ap,sp){var lp=this;if(rp===void 0&&(rp=0),np===void 0&&(np=1),this.canReturnFloat=function(){return lp.dtype==null||lp.dtype==="float32"},this.min=rp,this.range=np-rp,this.dtype=ap,sp==null&&(sp=Math.random()),typeof sp=="number"&&(sp=sp.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between "+rp+" - "+np+" <= 1 and dtype is not float");this.random=rr(sp)}return _d.prototype.convertValue=function(rp){return this.canReturnFloat()?rp:Math.round(rp)},_d.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},_d}();function ur(_d,rp,np){return rp===void 0&&(rp="float32"),rp=rp||"float32",Q(_d),new lt(_d,rp,np)}function sr$1(_d,rp){rp===void 0&&(rp=!1),console.log(_d.toString(rp))}var cr=Cn({batchToSpaceND_:function(_d,rp,np){var ap=ln(_d,"x","batchToSpaceND"),sp=rp.reduce(function(lp,up){return lp*up});return g(ap.rank>=1+rp.length,function(){return"input rank is "+ap.rank+" but should be > than blockShape.length "+rp.length}),g(np.length===rp.length,function(){return"crops.length is "+np.length+" but should be equal to blockShape.length  "+rp.length}),g(ap.shape[0]%sp==0,function(){return"input tensor batch is "+ap.shape[0]+" but is not divisible by the product of the elements of blockShape "+rp.join(" * ")+" === "+sp}),Nt.runKernelFunc(function(lp){return lp.batchToSpaceND(ap,rp,np)},{$x:ap},function(lp){return{$x:function(){return lp.spaceToBatchND(rp,np)}}})}}),lr=Cn({cast_:function(_d,rp){var np=ln(_d,"x","cast");if(!_(rp))throw new Error("Failed to cast to unknown dtype "+rp);if(rp==="string"&&np.dtype!=="string"||rp!=="string"&&np.dtype==="string")throw new Error("Only strings can be casted to strings");var ap={dtype:rp};return Nt.runKernelFunc(function(sp){return sp.cast(np,rp)},{x:np},function(sp){return{x:function(){return sp.clone()}}},"Cast",ap)}}),hr=Cn({clone_:function(_d){var rp=ln(_d,"x","clone",null);return Nt.runKernelFunc(function(){return Nt.makeTensorFromDataId(rp.dataId,rp.shape,rp.dtype)},{$x:rp},function(np){return{$x:function(){return np.toFloat()}}})}}),fr$1=Cn({cumsum_:function(_d,rp,np,ap){rp===void 0&&(rp=0),np===void 0&&(np=!1),ap===void 0&&(ap=!1);var sp=ln(_d,"x","cumsum"),lp=gn([rp|=0],sp.rank),up=sp;lp!=null&&(up=sp.transpose(lp));var cp=xn(1,sp.rank)[0],dp=Nt.runKernelFunc(function(fp){return fp.cumsum(up,cp,np,ap)},{permutedX:up},function(fp){return{permutedX:function(){return fp.cumsum(rp,np,!ap)}}});return lp!=null&&(dp=dp.transpose(lp)),dp}}),pr=Cn({depthToSpace_:function(_d,rp,np){np===void 0&&(np="NHWC");var ap=ln(_d,"x","depthToSpace"),sp=np==="NHWC"?ap.shape[1]:ap.shape[2],lp=np==="NHWC"?ap.shape[2]:ap.shape[3],up=np==="NHWC"?ap.shape[3]:ap.shape[1];return g(sp*rp>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+sp+" and "+rp+`  for depthToSpace with input shape
      `+ap.shape}),g(lp*rp>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+lp+" and "+rp+` for depthToSpace with input shape
          `+ap.shape}),g(up%(rp*rp)==0,function(){return"Dimension size must be evenly divisible by "+rp*rp+" but is "+up+" for depthToSpace with input shape "+ap.shape}),Nt.runKernelFunc(function(cp){return cp.depthToSpace(ap,rp,np)},{$x:ap})}}),dr=Cn({expandDims_:function(_d,rp){rp===void 0&&(rp=0);var np=ln(_d,"x","expandDims",null);g(rp<=np.rank,function(){return"Axis must be <= rank of the tensor"});var ap=np.shape.slice();return rp<0&&(g(-(np.rank+1)<=rp,function(){return"Axis must be in the interval ["+-(np.rank+1)+", "+np.rank+"]"}),rp=np.rank+rp+1),ap.splice(rp,0,1),Sr(np,ap)}}),vr=Cn({eye_:function(_d,rp,np,ap){ap===void 0&&(ap="float32"),rp==null&&(rp=_d);for(var sp=ur([_d,rp],ap),lp=_d<=rp?_d:rp,up=0;up<lp;++up)sp.set(1,up,up);var cp=sp.toTensor().as2D(_d,rp);if(np==null)return cp;if(np.length===1)return Nr(dr(cp,0),[np[0],1,1]);if(np.length===2)return Nr(dr(dr(cp,0),0),[np[0],np[1],1,1]);if(np.length===3)return Nr(dr(dr(dr(cp,0),0),0),[np[0],np[1],np[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+np.length+"D.")}}),mr=Cn({multinomial_:function(_d,rp,np,ap){ap===void 0&&(ap=!1);var sp=ln(_d,"logits","multinomial"),lp=sp.size,up=sp.rank;if(lp<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+lp+".");if(up>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+up);np=np||Math.random();var cp=up===1?sp.as2D(1,-1):sp,dp=Nt.runKernelFunc(function(fp){return fp.multinomial(cp,ap,rp,np)},{logits2D:cp});return up===1?dp.as1D():dp}}),gr=Cn({oneHot_:function(_d,rp,np,ap){if(np===void 0&&(np=1),ap===void 0&&(ap=0),rp<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+rp);var sp=ln(_d,"indices","oneHot","int32"),lp=sp.shape.concat([rp]);return sp=sp.flatten(),Nt.runKernelFunc(function(up){return up.oneHot(sp,rp,np,ap)},{$indices:sp},function(up){return{$indices:function(){return Pn(sp.shape,"float32")}}}).reshape(lp)}}),yr=Cn({pad_:function(_d,rp,np){np===void 0&&(np=0);var ap=ln(_d,"x","pad");if(ap.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var sp=rp.map(function(lp){return lp[0]});return Nt.runKernelFunc(function(lp){return lp.pad(ap,rp,np)},{$x:ap},function(lp){return{$x:function(){return lp.slice(sp,ap.shape)}}})}}),xr=Cn({pad1d_:function(_d,rp,np){return np===void 0&&(np=0),g(rp.length===2,function(){return"Invalid number of paddings. Must be length of 2."}),yr(_d,[rp],np)}}),br=Cn({pad2d_:function(_d,rp,np){return np===void 0&&(np=0),g(rp.length===2&&rp[0].length===2&&rp[1].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),yr(_d,rp,np)}}),wr=Cn({pad3d_:function(_d,rp,np){return np===void 0&&(np=0),g(rp.length===3&&rp[0].length===2&&rp[1].length===2&&rp[2].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),yr(_d,rp,np)}}),Cr=Cn({pad4d_:function(_d,rp,np){return np===void 0&&(np=0),g(rp.length===4&&rp[0].length===2&&rp[1].length===2&&rp[2].length===2&&rp[3].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),yr(_d,rp,np)}}),Er=Cn({rand_:function(_d,rp,np){var ap=w$1(_d),sp=null;if(np==null||np==="float32")sp=new Float32Array(ap);else if(np==="int32")sp=new Int32Array(ap);else{if(np!=="bool")throw new Error("Unknown data type "+np);sp=new Uint8Array(ap)}for(var lp=0;lp<ap;lp++)sp[lp]=rp();return Nt.makeTensor(sp,_d,np)}}),Rr=Cn({randomNormal_:function(_d,rp,np,ap,sp){if(rp===void 0&&(rp=0),np===void 0&&(np=1),ap!=null&&ap==="bool")throw new Error("Unsupported data type "+ap);for(var lp=new or(rp,np,ap,!1,sp),up=ur(_d,ap),cp=0;cp<up.values.length;cp++)up.values[cp]=lp.nextValue();return up.toTensor()}}),Ir=Cn({randomGamma_:function(_d,rp,np,ap,sp){if(np===void 0&&(np=1),ap===void 0&&(ap="float32"),np==null&&(np=1),ap==null&&(ap="float32"),ap!=="float32"&&ap!=="int32")throw new Error("Unsupported data type "+ap);for(var lp=new ar(rp,np,ap,sp),up=ur(_d,ap),cp=0;cp<up.values.length;cp++)up.values[cp]=lp.nextValue();return up.toTensor()}}),kr=Cn({randomUniform_:function(_d,rp,np,ap,sp){rp===void 0&&(rp=0),np===void 0&&(np=1),ap===void 0&&(ap="float32");for(var lp=ur(_d,ap),up=new ir(rp,np,null,sp),cp=0;cp<lp.values.length;cp++)lp.values[cp]=up.nextValue();return lp.toTensor()}}),Sr=Cn({reshape_:function(_d,rp){var np=ln(_d,"x","reshape",null);rp=A(rp,np.size),g(np.size===w$1(rp),function(){return"new shape and old shape must have the same number of elements."});var ap={shape:rp};return Nt.runKernelFunc(function(sp){return sp.reshape(np,rp)},{x:np},function(sp){return{x:function(){return sp.reshape(np.shape)}}},"Reshape",ap)}}),Ar=Cn({spaceToBatchND_:function(_d,rp,np){var ap=ln(_d,"x","spaceToBatchND");return g(ap.rank>=1+rp.length,function(){return"input rank "+ap.rank+" should be > than [blockShape] "+rp.length}),g(np.length===rp.length,function(){return"paddings.shape[0] "+np.length+" must be equal to [blockShape] "+rp.length}),g(ap.shape.reduce(function(sp,lp,up){return up>0&&up<=rp.length?sp&&(lp+np[up-1][0]+np[up-1][1])%rp[up-1]==0:sp},!0),function(){return"input spatial dimensions "+ap.shape.slice(1)+" with paddings "+np.toString()+" must be divisible by blockShapes "+rp.toString()}),Nt.runKernelFunc(function(sp){return sp.spaceToBatchND(ap,rp,np)},{$x:ap},function(sp){return{$x:function(){return sp.batchToSpaceND(rp,np)}}})}}),Dr=Cn({squeeze_:function(_d,rp){var np=ln(_d,"x","squeeze");return Sr(np,T(np.shape,rp).newShape)}}),Tr=Cn({stack_:function(_d,rp){rp===void 0&&(rp=0);var np=hn(_d,"tensors","stack");if(g(np.length>=1,function(){return"Pass at least one tensor to tf.stack"}),np.length===1)return np[0].expandDims(rp);var ap=np[0].rank,sp=np[0].shape,lp=np[0].dtype;g(rp<=ap,function(){return"Axis must be <= rank of the tensor"}),np.forEach(function(cp){y(sp,cp.shape,"All tensors passed to stack must have matching shapes")}),np.forEach(function(cp){g(lp===cp.dtype,function(){return"All tensors passed to stack must have matching dtypes"})});var up=np.map(function(cp){return cp.expandDims(rp)});return Gn(up,rp)}}),Nr=Cn({tile_:function(_d,rp){var np=ln(_d,"x","tile",null);return g(np.rank===rp.length,function(){return"Error in transpose: rank of input "+np.rank+" must match length of reps "+rp+"."}),Nt.runKernelFunc(function(ap,sp){var lp=ap.tile(np,rp);return sp([np]),lp},{$x:np},function(ap,sp){var lp=sp[0];return{$x:function(){var up=zn(lp);if(lp.rank===1)for(var cp=0;cp<rp[0];++cp)up=up.add(ap.slice([cp*lp.shape[0]],[lp.shape[0]]));else if(lp.rank===2)for(cp=0;cp<rp[0];++cp)for(var dp=0;dp<rp[1];++dp)up=up.add(ap.slice([cp*lp.shape[0],dp*lp.shape[1]],[lp.shape[0],lp.shape[1]]));else if(lp.rank===3)for(cp=0;cp<rp[0];++cp)for(dp=0;dp<rp[1];++dp)for(var fp=0;fp<rp[2];++fp)up=up.add(ap.slice([cp*lp.shape[0],dp*lp.shape[1],fp*lp.shape[2]],[lp.shape[0],lp.shape[1],lp.shape[2]]));else{if(lp.rank!==4)throw new Error("Gradient for tile operation is not implemented for rank-"+lp.rank+" tensors yet.");for(cp=0;cp<rp[0];++cp)for(dp=0;dp<rp[1];++dp)for(fp=0;fp<rp[2];++fp)for(var pp=0;pp<rp[3];++pp)up=up.add(ap.slice([cp*lp.shape[0],dp*lp.shape[1],fp*lp.shape[2],pp*lp.shape[3]],[lp.shape[0],lp.shape[1],lp.shape[2],lp.shape[3]]))}return up}}})}}),Fr=Cn({truncatedNormal_:function(_d,rp,np,ap,sp){if(rp===void 0&&(rp=0),np===void 0&&(np=1),ap!=null&&ap==="bool")throw new Error("Unsupported data type "+ap);for(var lp=new or(rp,np,ap,!0,sp),up=ur(_d,ap),cp=0;cp<up.values.length;cp++)up.values[cp]=lp.nextValue();return up.toTensor()}}),Or=Cn({unstack_:function(_d,rp){rp===void 0&&(rp=0),rp=rp||0;var np=ln(_d,"x","unstack");return g(rp>=-np.shape.length&&rp<np.shape.length,function(){return"Axis = "+rp+" is not in [-"+np.shape.length+", "+np.shape.length+")"}),rp<0&&(rp+=np.shape.length),Nt.runKernelFunc(function(ap){return ap.unstack(np,rp)},{$x:np},function(ap){return{$x:function(){return Tr(ap,rp)}}})}}),_r=function(_d,rp){return n$1(this,void 0,void 0,function(){var np,ap,sp,lp,up,cp,dp,fp,pp,hp;return r(this,function(mp){switch(mp.label){case 0:return np=ln(_d,"x","setdiff1d"),ap=ln(rp,"y","setdiff1d"),g(np.dtype===ap.dtype,function(){return"x and y should have the same dtype, but got x ("+np.dtype+") and y ("+ap.dtype+")."}),g(np.rank===1,function(){return"x should be 1D tensor, but got x ("+np.shape+")."}),g(ap.rank===1,function(){return"y should be 1D tensor, but got y ("+ap.shape+")."}),[4,np.data()];case 1:return sp=mp.sent(),[4,ap.data()];case 2:for(lp=mp.sent(),up=new Set(lp),cp=0,pp=0;pp<sp.length;pp++)up.has(sp[pp])||cp++;for(dp=new lt([cp],np.dtype),fp=new lt([cp],"int32"),pp=0,hp=0;pp<sp.length;pp++)up.has(sp[pp])||(dp.values[hp]=sp[pp],fp.values[hp]=pp,hp++);return[2,[dp.toTensor(),fp.toTensor()]]}})})};function Mr(_d,rp,np,ap){ap===void 0&&(ap=!0);var sp=[];if(ap)(sp=sp.concat(rp.slice(0))).push(_d[0]/np),sp=sp.concat(_d.slice(1));else{sp=sp.concat(_d[0]);for(var lp=rp.length,up=0;up<lp;++up)sp=sp.concat([_d[up+1]/rp[up],rp[up]]);sp=sp.concat(_d.slice(lp+1))}return sp}function Br(_d,rp,np){np===void 0&&(np=!0);var ap=[];if(np){ap.push(rp);for(var sp=rp+1;sp<_d;++sp)sp<=2*rp?(ap.push(sp),ap.push(sp-(rp+1))):ap.push(sp)}else{var lp=[],up=[];for(sp=1;sp<_d;++sp)sp>=2*rp+1||sp%2==1?up.push(sp):lp.push(sp);ap.push.apply(ap,lp),ap.push(0),ap.push.apply(ap,up)}return ap}function Pr(_d,rp,np,ap){ap===void 0&&(ap=!0);var sp=[];ap?sp.push(_d[0]/np):sp.push(_d[0]*np);for(var lp=1;lp<_d.length;++lp)lp<=rp.length?ap?sp.push(rp[lp-1]*_d[lp]):sp.push(_d[lp]/rp[lp-1]):sp.push(_d[lp]);return sp}function Lr(_d,rp){for(var np=[0],ap=0;ap<rp;++ap)np.push(_d[ap][0]);return np}function Wr(_d,rp,np){for(var ap=_d.slice(0,1),sp=0;sp<np;++sp)ap.push(_d[sp+1]-rp[sp][0]-rp[sp][1]);return ap}function Ur(_d,rp){if(_d.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+_d.rank+".");if(rp.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+rp.rank+".");if(rp.dtype!=="int32")throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+rp.dtype+".");if(rp.shape[rp.rank-1]>_d.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+rp.shape[rp.rank-1]+" vs. "+_d.rank);if(_d.size===0)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+_d.shape+".");for(var np=rp.shape,ap=np[np.length-1],sp=1,lp=0;lp<np.length-1;++lp)sp*=np[lp];var up=_d.shape,cp=np.slice();cp.pop();var dp=1;for(lp=ap;lp<_d.rank;++lp)dp*=up[lp],cp.push(up[lp]);var fp=q(_d.shape).map(function(pp){return pp/dp}).concat([1]).slice(0,ap);return[cp,sp,dp,fp]}var Vr=30;function zr(_d){return _d<=Vr?_d:H(_d,Math.floor(Math.sqrt(_d)))}function Gr(_d,rp,np){if(rp.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+rp.rank+".");if(_d.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+_d.rank+".");if(rp.dtype!=="int32")throw new Error("The dtype of 'indices' should be int32, but got dtype: "+rp.dtype);if(np.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+np);if(np.length===0){if(rp.size===0)throw new Error("Indices specified for empty output. indices shape: "+rp.shape);if(_d.size===0)throw new Error("Updates specified for empty output. updates shape: "+_d.shape)}(function(ap,sp,lp){var up=sp.rank>1?sp.shape[sp.rank-1]:1,cp=sp.rank>1?sp.rank-1:1,dp="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+lp.shape+", indices.shape: "+sp.shape+", shape: "+ap+", sliceDim: "+up+", and batchDim: "+cp+".";if(lp.rank<cp)throw new Error(dp+" update.rank < "+cp+". ");if(ap.length<up+(lp.rank-cp))throw new Error(dp+" Output shape length < "+(up+(lp.rank-cp)));if(lp.rank!==cp+ap.length-up)throw new Error(dp+" update.rank != "+(cp+ap.length-up));for(var fp=0;fp<cp;++fp)if(lp.shape[fp]!==sp.shape[fp])throw new Error(dp+" updates.shape["+fp+"] ("+lp.shape[fp]+") != indices.shape["+fp+"] ("+sp.shape[fp]+").");for(fp=0;fp<lp.rank-cp;++fp)if(lp.shape[fp+cp]!==ap[fp+up])throw new Error(dp+" updates.shape["+(fp+cp)+"] ("+lp.shape[fp+cp]+") != shape["+(fp+cp)+"] ("+ap[fp+cp]+")")})(np,rp,_d)}function Hr(_d,rp,np){for(var ap=rp.rank>1?rp.shape[rp.rank-1]:1,sp=np.length,lp=1,up=ap;up<sp;++up)lp*=np[up];var cp=ap<1?1:ap;return{sliceRank:ap,numUpdates:rp.size/cp,sliceSize:lp,strides:q(np.slice(0,ap)).concat([1]),outputSize:w$1(np)}}function qr(_d,rp,np){g(_d.rank===rp.length,function(){return"Error in slice"+_d.rank+"D: Length of begin "+rp+" must match the rank of the array ("+_d.rank+")."}),g(_d.rank===np.length,function(){return"Error in slice"+_d.rank+"D: Length of size "+np+" must match the rank of the array ("+_d.rank+")."});for(var ap=function(lp){g(rp[lp]+np[lp]<=_d.shape[lp],function(){return"Error in slice"+_d.rank+"D: begin["+lp+"] + size["+lp+"] ("+(rp[lp]+np[lp])+") would overflow input.shape["+lp+"] ("+_d.shape[lp]+")"})},sp=0;sp<_d.rank;++sp)ap(sp)}function Kr(_d){for(var rp=[],np=0;_d>0;)1&_d&&rp.push(np),_d/=2,np++;return rp}function jr(_d,rp,np){for(var ap=[],sp=0;sp<_d.length;sp++)ap[sp]=Math.ceil((rp[sp]-_d[sp])/np[sp]);return ap}function Xr(_d,rp,np,ap,sp){var lp=rp[sp],up=np[sp]||1;(_d&1<<sp||lp==null)&&(lp=up>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var cp=ap[sp];return lp<0&&(lp+=cp),lp=d(0,lp,cp-1)}function $r(_d,rp,np,ap,sp){var lp=rp[sp],up=np[sp]||1;(_d&1<<sp||lp==null)&&(lp=up>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var cp=ap[sp];return lp<0&&(lp+=cp),lp=up>0?d(0,lp,cp):d(-1,lp,cp-1)}function Yr(_d,rp,np){for(var ap=np.length,sp=0;sp<np.length;sp++)if(np[sp]>1){ap=sp;break}for(sp=ap+1;sp<np.length;sp++)if(rp[sp]>0||np[sp]!==_d[sp])return!1;return!0}function Qr(_d,rp){for(var np=_d.length>0?_d[_d.length-1]:1,ap=0;ap<_d.length-1;ap++)np+=_d[ap]*rp[ap];return np}var Jr=Object.freeze({assertParamsValid:qr,maskToAxes:Kr,computeOutShape:jr,startForAxis:Xr,stopForAxis:$r,isSliceContinous:Yr,computeFlatOffset:Qr});function Zr(_d){return g(G(_d),function(){return"The f passed in grad(f) must be a function"}),function(rp,np){var ap=ln(rp,"x","tf.grad",null),sp=np!=null?ln(np,"dy","tf.grad"):null;return Nt.tidy(function(){var lp=Nt.gradients(function(){return _d(ap)},[ap],sp),up=lp.value,cp=lp.grads;return sp!=null&&y(up.shape,sp.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),ao(cp),cp[0]})}}function to(_d){return g(G(_d),function(){return"The f passed in grads(f) must be a function"}),function(rp,np){g(Array.isArray(rp),function(){return"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s"});var ap=hn(rp,"args","tf.grads",null),sp=np!=null?ln(np,"dy","tf.grads"):null;return Nt.tidy(function(){var lp=Nt.gradients(function(){return _d.apply(void 0,ap)},ap,sp),up=lp.value,cp=lp.grads;return sp!=null&&y(up.shape,sp.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),ao(cp),cp})}}function eo(_d){return g(G(_d),function(){return"The f passed in valueAndGrad(f) must be a function"}),function(rp,np){g(rp instanceof dt,function(){return"The x passed in valueAndGrad(f)(x) must be a tensor"}),g(np==null||np instanceof dt,function(){return"The dy passed in valueAndGrad(f)(x, dy) must be a tensor"});var ap=Nt.gradients(function(){return _d(rp)},[rp],np),sp=ap.grads,lp=ap.value;return ao(sp),{grad:sp[0],value:lp}}}function no(_d){return g(G(_d),function(){return"The f passed in valueAndGrads(f) must be a function"}),function(rp,np){g(Array.isArray(rp)&&rp.every(function(sp){return sp instanceof dt}),function(){return"The args passed in valueAndGrads(f)(args) must be array of tensors"}),g(np==null||np instanceof dt,function(){return"The dy passed in valueAndGrads(f)(args, dy) must be a tensor"});var ap=Nt.gradients(function(){return _d.apply(void 0,rp)},rp,np);return np!=null&&y(ap.value.shape,np.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),ao(ap.grads),ap}}function ro(_d,rp){g(G(_d),function(){return"The f passed in variableGrads(f) must be a function"}),g(rp==null||Array.isArray(rp)&&rp.every(function(pp){return pp instanceof bt}),function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"});var np=rp!=null;if(!np)for(var ap in rp=[],Nt.registeredVariables)rp.push(Nt.registeredVariables[ap]);var sp=np?rp.filter(function(pp){return!pp.trainable}):null,lp=rp.length;g((rp=rp.filter(function(pp){return pp.trainable})).length>0,function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+lp+" variables is trainable."});var up=Nt.gradients(_d,rp,null,!0),cp=up.value,dp=up.grads;g(dp.some(function(pp){return pp!=null}),function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."}),g(cp.rank===0,function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+cp.rank+" tensor"});var fp={};return rp.forEach(function(pp,hp){dp[hp]!=null&&(fp[pp.name]=dp[hp])}),sp!=null&&sp.forEach(function(pp){return fp[pp.name]=null}),{value:cp,grads:fp}}function oo(_d){return Nt.customGrad(_d)}function ao(_d){if(_d.filter(function(rp){return rp==null}).length>0)throw new Error(`Cannot compute gradient of y=f(x) with respect to x. Make sure that
    the f you passed encloses all operations that lead from x to y.`)}var io=Cn({softmax_:function(_d,rp){rp===void 0&&(rp=-1);var np=ln(_d,"logits","softmax");if(rp===-1&&(rp=np.rank-1),rp!==np.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+np.rank+" and dim was "+rp);return oo(function(ap,sp){var lp=ap.logSumExp([rp],!0),up=ap.toFloat().sub(lp).exp();return sp([up]),{value:up,gradFunc:function(cp,dp){var fp=dp[0],pp=cp.mul(fp);return pp.sub(pp.sum([rp],!0).mul(fp))}}})(np)}}),uo=Cn({logSoftmax_:function(_d,rp){rp===void 0&&(rp=-1);var np=ln(_d,"logits","logSoftmax");if(rp===-1&&(rp=np.rank-1),rp!==np.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+np.rank+" and axis was "+rp);return oo(function(ap,sp){var lp=ap.max(rp,!0),up=ap.sub(lp),cp=up.toFloat().sub(up.exp().sum(rp,!0).log());return sp([cp]),{value:cp,gradFunc:function(dp,fp){var pp=fp[0].exp();return dp.sub(dp.sum(rp,!0).mul(pp))}}})(np)}}),so=function(){function _d(rp,np){this.backend=rp,this.dataMover=np,this.data=new WeakMap,this.dataIdsCount=0}return _d.prototype.get=function(rp){return this.data.has(rp)||this.dataMover.moveData(this.backend,rp),this.data.get(rp)},_d.prototype.set=function(rp,np){this.dataIdsCount++,this.data.set(rp,np)},_d.prototype.has=function(rp){return this.data.has(rp)},_d.prototype.delete=function(rp){return this.dataIdsCount--,this.data.delete(rp)},_d.prototype.numDataIds=function(){return this.dataIdsCount},_d}(),co=function(){function _d(){}return _d.prototype.time=function(rp){return lo()},_d.prototype.read=function(rp){return lo()},_d.prototype.readSync=function(rp){return lo()},_d.prototype.numDataIds=function(){return lo()},_d.prototype.disposeData=function(rp){return lo()},_d.prototype.fromPixels=function(rp,np){return lo()},_d.prototype.write=function(rp,np,ap){return lo()},_d.prototype.move=function(rp,np,ap,sp){return lo()},_d.prototype.memory=function(){return lo()},_d.prototype.floatPrecision=function(){return lo()},_d.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},_d.prototype.batchMatMul=function(rp,np,ap,sp){return lo()},_d.prototype.fusedBatchMatMul=function(rp){return rp.a,rp.b,rp.transposeA,rp.transposeB,rp.bias,rp.activation,rp.preluActivationWeights,lo()},_d.prototype.slice=function(rp,np,ap){return lo()},_d.prototype.stridedSlice=function(rp,np,ap,sp){return lo()},_d.prototype.unstack=function(rp,np){return lo()},_d.prototype.reverse=function(rp,np){return lo()},_d.prototype.concat=function(rp,np){return lo()},_d.prototype.neg=function(rp){return lo()},_d.prototype.add=function(rp,np){return lo()},_d.prototype.addN=function(rp){return lo()},_d.prototype.subtract=function(rp,np){return lo()},_d.prototype.multiply=function(rp,np){return lo()},_d.prototype.realDivide=function(rp,np){return lo()},_d.prototype.floorDiv=function(rp,np){return lo()},_d.prototype.sum=function(rp,np){return lo()},_d.prototype.prod=function(rp,np){return lo()},_d.prototype.unsortedSegmentSum=function(rp,np,ap){return lo()},_d.prototype.argMin=function(rp,np){return lo()},_d.prototype.argMax=function(rp,np){return lo()},_d.prototype.equal=function(rp,np){return lo()},_d.prototype.notEqual=function(rp,np){return lo()},_d.prototype.less=function(rp,np){return lo()},_d.prototype.lessEqual=function(rp,np){return lo()},_d.prototype.greater=function(rp,np){return lo()},_d.prototype.greaterEqual=function(rp,np){return lo()},_d.prototype.logicalNot=function(rp){return lo()},_d.prototype.logicalAnd=function(rp,np){return lo()},_d.prototype.logicalOr=function(rp,np){return lo()},_d.prototype.where=function(rp){return lo()},_d.prototype.select=function(rp,np,ap){return lo()},_d.prototype.topk=function(rp,np,ap){return lo()},_d.prototype.min=function(rp,np){return lo()},_d.prototype.minimum=function(rp,np){return lo()},_d.prototype.mod=function(rp,np){return lo()},_d.prototype.max=function(rp,np){return lo()},_d.prototype.maximum=function(rp,np){return lo()},_d.prototype.all=function(rp,np){return lo()},_d.prototype.any=function(rp,np){return lo()},_d.prototype.squaredDifference=function(rp,np){return lo()},_d.prototype.ceil=function(rp){return lo()},_d.prototype.floor=function(rp){return lo()},_d.prototype.round=function(rp){return lo()},_d.prototype.sign=function(rp){return lo()},_d.prototype.isNaN=function(rp){return lo()},_d.prototype.isInf=function(rp){return lo()},_d.prototype.isFinite=function(rp){return lo()},_d.prototype.pow=function(rp,np){return lo()},_d.prototype.exp=function(rp){return lo()},_d.prototype.expm1=function(rp){return lo()},_d.prototype.log=function(rp){return lo()},_d.prototype.log1p=function(rp){return lo()},_d.prototype.sqrt=function(rp){return lo()},_d.prototype.rsqrt=function(rp){return lo()},_d.prototype.square=function(rp){return lo()},_d.prototype.reciprocal=function(rp){return lo()},_d.prototype.relu=function(rp){return lo()},_d.prototype.relu6=function(rp){return lo()},_d.prototype.prelu=function(rp,np){return lo()},_d.prototype.elu=function(rp){return lo()},_d.prototype.eluDer=function(rp,np){return lo()},_d.prototype.selu=function(rp){return lo()},_d.prototype.int=function(rp){return lo()},_d.prototype.clip=function(rp,np,ap){return lo()},_d.prototype.abs=function(rp){return lo()},_d.prototype.complexAbs=function(rp){return lo()},_d.prototype.sigmoid=function(rp){return lo()},_d.prototype.softplus=function(rp){return lo()},_d.prototype.sin=function(rp){return lo()},_d.prototype.cos=function(rp){return lo()},_d.prototype.tan=function(rp){return lo()},_d.prototype.asin=function(rp){return lo()},_d.prototype.acos=function(rp){return lo()},_d.prototype.atan=function(rp){return lo()},_d.prototype.atan2=function(rp,np){return lo()},_d.prototype.sinh=function(rp){return lo()},_d.prototype.cosh=function(rp){return lo()},_d.prototype.tanh=function(rp){return lo()},_d.prototype.asinh=function(rp){return lo()},_d.prototype.acosh=function(rp){return lo()},_d.prototype.atanh=function(rp){return lo()},_d.prototype.erf=function(rp){return lo()},_d.prototype.step=function(rp,np){return lo()},_d.prototype.fusedConv2d=function(rp){return rp.input,rp.filter,rp.convInfo,rp.bias,rp.activation,rp.preluActivationWeights,lo()},_d.prototype.conv2d=function(rp,np,ap){return lo()},_d.prototype.conv2dDerInput=function(rp,np,ap){return lo()},_d.prototype.conv2dDerFilter=function(rp,np,ap){return lo()},_d.prototype.fusedDepthwiseConv2D=function(rp){return rp.input,rp.filter,rp.convInfo,rp.bias,rp.activation,rp.preluActivationWeights,lo()},_d.prototype.depthwiseConv2D=function(rp,np,ap){return lo()},_d.prototype.depthwiseConv2DDerInput=function(rp,np,ap){return lo()},_d.prototype.depthwiseConv2DDerFilter=function(rp,np,ap){return lo()},_d.prototype.conv3d=function(rp,np,ap){return lo()},_d.prototype.conv3dDerInput=function(rp,np,ap){return lo()},_d.prototype.conv3dDerFilter=function(rp,np,ap){return lo()},_d.prototype.maxPool=function(rp,np){return lo()},_d.prototype.maxPoolBackprop=function(rp,np,ap,sp){return lo()},_d.prototype.avgPool=function(rp,np){return lo()},_d.prototype.avgPoolBackprop=function(rp,np,ap){return lo()},_d.prototype.avgPool3d=function(rp,np){return lo()},_d.prototype.avgPool3dBackprop=function(rp,np,ap){return lo()},_d.prototype.maxPool3d=function(rp,np){return lo()},_d.prototype.maxPool3dBackprop=function(rp,np,ap,sp){return lo()},_d.prototype.reshape=function(rp,np){return lo()},_d.prototype.cast=function(rp,np){return lo()},_d.prototype.tile=function(rp,np){return lo()},_d.prototype.pad=function(rp,np,ap){return lo()},_d.prototype.transpose=function(rp,np){return lo()},_d.prototype.gather=function(rp,np,ap){return lo()},_d.prototype.gatherND=function(rp,np){return lo()},_d.prototype.scatterND=function(rp,np,ap){return lo()},_d.prototype.batchToSpaceND=function(rp,np,ap){return lo()},_d.prototype.spaceToBatchND=function(rp,np,ap){return lo()},_d.prototype.resizeBilinear=function(rp,np,ap,sp){return lo()},_d.prototype.resizeBilinearBackprop=function(rp,np,ap){return lo()},_d.prototype.resizeNearestNeighbor=function(rp,np,ap,sp){return lo()},_d.prototype.resizeNearestNeighborBackprop=function(rp,np,ap){return lo()},_d.prototype.batchNormalization=function(rp,np,ap,sp,lp,up){return lo()},_d.prototype.localResponseNormalization4D=function(rp,np,ap,sp,lp){return lo()},_d.prototype.LRNGrad=function(rp,np,ap,sp,lp,up,cp){return lo()},_d.prototype.multinomial=function(rp,np,ap,sp){return lo()},_d.prototype.oneHot=function(rp,np,ap,sp){return lo()},_d.prototype.cumsum=function(rp,np,ap,sp){return lo()},_d.prototype.nonMaxSuppression=function(rp,np,ap,sp,lp){return lo()},_d.prototype.fft=function(rp){return lo()},_d.prototype.ifft=function(rp){return lo()},_d.prototype.complex=function(rp,np){return lo()},_d.prototype.real=function(rp){return lo()},_d.prototype.imag=function(rp){return lo()},_d.prototype.cropAndResize=function(rp,np,ap,sp,lp,up){return lo()},_d.prototype.depthToSpace=function(rp,np,ap){return lo()},_d.prototype.split=function(rp,np,ap){return lo()},_d.prototype.sparseToDense=function(rp,np,ap,sp){return lo()},_d.prototype.diag=function(rp){return lo()},_d.prototype.fill=function(rp,np,ap){throw new Error("Not yet implemented.")},_d.prototype.onesLike=function(rp){return lo()},_d.prototype.zerosLike=function(rp){return lo()},_d.prototype.linspace=function(rp,np,ap){return lo()},_d.prototype.dispose=function(){return lo()},_d}();function lo(){throw new Error("Not yet implemented or not found in the registry. Did you forget to import the kernel?")}function ho(_d,rp){for(var np=_d.length,ap=[],sp=0;sp<np;sp++){var lp=np-1-sp,up=_d[lp]||1;(rp[rp.length-1-sp]||1)>1&&up===1&&ap.unshift(lp)}return ap}function fo(_d,rp){for(var np=[],ap=0;ap<rp.length;ap++){var sp=_d[_d.length-ap-1],lp=rp.length-ap-1,up=rp[lp];(sp==null||sp===1&&up>1)&&np.unshift(lp)}return np}function po(_d,rp){for(var np=[],ap=Math.max(_d.length,rp.length),sp=0;sp<ap;sp++){var lp=_d[_d.length-sp-1];lp==null&&(lp=1);var up=rp[rp.length-sp-1];if(up==null&&(up=1),lp===1)np.unshift(up);else if(up===1)np.unshift(lp);else{if(lp!==up)throw Error("Operands could not be broadcast together with shapes "+_d+" and "+rp+".");np.unshift(lp)}}return np}function vo(_d,rp,np,ap,sp,lp,up){up===void 0&&(up="channelsLast");var cp,dp=bo(rp),fp=dp[0],pp=dp[1];if(up==="channelsLast")cp=[fp,pp,_d[3],_d[3]];else{if(up!=="channelsFirst")throw new Error("Unknown dataFormat "+up);cp=[fp,pp,_d[1],_d[1]]}return go(_d,cp,np,ap,sp,lp,!1,up)}function mo(_d,rp,np,ap,sp,lp,up){up===void 0&&(up="NDHWC");var cp,dp,fp=wo(rp),pp=fp[0],hp=fp[1],mp=fp[2];if(up==="NDHWC")dp="channelsLast",cp=[pp,hp,mp,_d[4],_d[4]];else{if(up!=="NCDHW")throw new Error("Unknown dataFormat "+up);dp="channelsFirst",cp=[pp,hp,mp,_d[1],_d[1]]}return yo(_d,cp,np,ap,sp,!1,dp,lp)}function go(_d,rp,np,ap,sp,lp,up,cp){up===void 0&&(up=!1),cp===void 0&&(cp="channelsLast");var dp=[-1,-1,-1,-1],fp=dp[0],pp=dp[1],hp=dp[2],mp=dp[3];if(cp==="channelsLast")fp=_d[0],pp=_d[1],hp=_d[2],mp=_d[3];else{if(cp!=="channelsFirst")throw new Error("Unknown dataFormat "+cp);fp=_d[0],mp=_d[1],pp=_d[2],hp=_d[3]}var gp,vp=rp[0],xp=rp[1],Sp=rp[3],yp=bo(np),bp=yp[0],Ep=yp[1],wp=bo(ap),_p=wp[0],Rp=wp[1],$p=Co(vp,_p),Cp=Co(xp,Rp),Ap=function(Dp,Fp,Ip,Pp,Tp,Np,jp,Vp){var zp,Wp,Up;if(typeof Dp=="number"){var qp=Dp===0?"VALID":"NUMBER";zp={top:Dp,bottom:Dp,left:Dp,right:Dp,type:qp};var Bp=function(Zp,Gp,tm,om,em){om==null&&(om=xo(Zp,Gp,tm));var _m=Zp[0],Cm=Zp[1],Rm=Eo((_m-Gp+2*om)/tm+1,em);g(E(Rm),function(){return"The output # of rows ("+Rm+") must be an integer. Change the stride and/or zero pad parameters"});var xm=Eo((Cm-Gp+2*om)/tm+1,em);return g(E(xm),function(){return"The output # of columns ("+xm+") must be an integer. Change the stride and/or zero pad parameters"}),[Rm,xm]}([Fp,Ip],Np,Pp,Dp,Vp);Wp=Bp[0],Up=Bp[1]}else if(Dp==="same"){Wp=Math.ceil(Fp/Pp),Up=Math.ceil(Ip/Tp);var Yp=Math.max(0,(Wp-1)*Pp+Np-Fp),Xp=Math.max(0,(Up-1)*Tp+jp-Ip),Qp=Math.floor(Yp/2),am=Yp-Qp,Jp=Math.floor(Xp/2),im=Xp-Jp;zp={top:Qp,bottom:am,left:Jp,right:im,type:"SAME"}}else{if(Dp!=="valid")throw Error("Unknown padding parameter: "+Dp);zp={top:0,bottom:0,left:0,right:0,type:"VALID"},Wp=Math.ceil((Fp-Np+1)/Pp),Up=Math.ceil((Ip-jp+1)/Tp)}return{padInfo:zp,outHeight:Wp,outWidth:Up}}(sp,pp,hp,bp,Ep,$p,Cp,lp),Op=Ap.padInfo,Lp=Ap.outHeight,Mp=Ap.outWidth,kp=up?Sp*mp:Sp;return cp==="channelsFirst"?gp=[fp,kp,Lp,Mp]:cp==="channelsLast"&&(gp=[fp,Lp,Mp,kp]),{batchSize:fp,dataFormat:cp,inHeight:pp,inWidth:hp,inChannels:mp,outHeight:Lp,outWidth:Mp,outChannels:kp,padInfo:Op,strideHeight:bp,strideWidth:Ep,filterHeight:vp,filterWidth:xp,effectiveFilterHeight:$p,effectiveFilterWidth:Cp,dilationHeight:_p,dilationWidth:Rp,inShape:_d,outShape:gp,filterShape:rp}}function yo(_d,rp,np,ap,sp,lp,up,cp){lp===void 0&&(lp=!1),up===void 0&&(up="channelsLast");var dp=[-1,-1,-1,-1,-1],fp=dp[0],pp=dp[1],hp=dp[2],mp=dp[3],gp=dp[4];if(up==="channelsLast")fp=_d[0],pp=_d[1],hp=_d[2],mp=_d[3],gp=_d[4];else{if(up!=="channelsFirst")throw new Error("Unknown dataFormat "+up);fp=_d[0],gp=_d[1],pp=_d[2],hp=_d[3],mp=_d[4]}var vp,xp=rp[0],Sp=rp[1],yp=rp[2],bp=rp[4],Ep=wo(np),wp=Ep[0],_p=Ep[1],Rp=Ep[2],$p=wo(ap),Cp=$p[0],Ap=$p[1],Op=$p[2],Lp=Co(xp,Cp),Mp=Co(Sp,Ap),kp=Co(yp,Op),Dp=function(jp,Vp,zp,Wp,Up,qp,Bp,Yp,Xp,Qp,am){var Jp,im,Zp,Gp;if(typeof jp=="number"){var tm=jp===0?"VALID":"NUMBER";Jp={top:jp,bottom:jp,left:jp,right:jp,front:jp,back:jp,type:tm};var om=function(hm,lm,sm,ym,Am,Em){Am==null&&(Am=xo(hm,lm,ym));var wm=hm[0],Dm=hm[1],Vm=hm[2],Kp=Eo((wm-lm+2*Am)/ym+1,Em);g(E(Kp),function(){return"The output # of depths ("+Kp+") must be an integer. Change the stride and/or zero pad parameters"});var Hp=Eo((Dm-lm+2*Am)/ym+1,Em);g(E(Hp),function(){return"The output # of rows ("+Hp+") must be an integer. Change the stride and/or zero pad parameters"});var rm=Eo((Vm-lm+2*Am)/ym+1,Em);return g(E(rm),function(){return"The output # of columns ("+rm+") must be an integer. Change the stride and/or zero pad parameters"}),[Kp,Hp,rm,sm]}([Vp,zp,Wp,1],Yp,1,Up,jp,am);im=om[0],Zp=om[1],Gp=om[2]}else if(jp==="same"){im=Math.ceil(Vp/Up),Zp=Math.ceil(zp/qp),Gp=Math.ceil(Wp/Bp);var em=(im-1)*Up+Yp-Vp,_m=(Zp-1)*qp+Xp-zp,Cm=(Gp-1)*Bp+Qp-Wp,Rm=Math.floor(em/2),xm=em-Rm,$m=Math.floor(_m/2),fm=_m-$m,Sm=Math.floor(Cm/2),pm=Cm-Sm;Jp={top:$m,bottom:fm,left:Sm,right:pm,front:Rm,back:xm,type:"SAME"}}else{if(jp!=="valid")throw Error("Unknown padding parameter: "+jp);Jp={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},im=Math.ceil((Vp-Yp+1)/Up),Zp=Math.ceil((zp-Xp+1)/qp),Gp=Math.ceil((Wp-Qp+1)/Bp)}return{padInfo:Jp,outDepth:im,outHeight:Zp,outWidth:Gp}}(sp,pp,hp,mp,wp,_p,Rp,Lp,Mp,kp,cp),Fp=Dp.padInfo,Ip=Dp.outDepth,Pp=Dp.outHeight,Tp=Dp.outWidth,Np=lp?bp*gp:bp;return up==="channelsFirst"?vp=[fp,Np,Ip,Pp,Tp]:up==="channelsLast"&&(vp=[fp,Ip,Pp,Tp,Np]),{batchSize:fp,dataFormat:up,inDepth:pp,inHeight:hp,inWidth:mp,inChannels:gp,outDepth:Ip,outHeight:Pp,outWidth:Tp,outChannels:Np,padInfo:Fp,strideDepth:wp,strideHeight:_p,strideWidth:Rp,filterDepth:xp,filterHeight:Sp,filterWidth:yp,effectiveFilterDepth:Lp,effectiveFilterHeight:Mp,effectiveFilterWidth:kp,dilationDepth:Cp,dilationHeight:Ap,dilationWidth:Op,inShape:_d,outShape:vp,filterShape:rp}}function xo(_d,rp,np,ap){ap===void 0&&(ap=1);var sp=Co(rp,ap);return Math.floor((_d[0]*(np-1)-np+sp)/2)}function bo(_d){return typeof _d=="number"?[_d,_d,_d]:_d.length===2?[_d[0],_d[1],1]:_d}function wo(_d){return typeof _d=="number"?[_d,_d,_d]:_d}function Co(_d,rp){return rp<=1?_d:_d+(_d-1)*(rp-1)}function Eo(_d,rp){if(!rp)return _d;switch(rp){case"round":return Math.round(_d);case"ceil":return Math.ceil(_d);case"floor":return Math.floor(_d);default:throw new Error("Unknown roundingMode "+rp)}}function Ro(_d){var rp=bo(_d),np=rp[0],ap=rp[1],sp=rp[2];return np===1&&ap===1&&sp===1}function Io(_d,rp){return Ro(_d)||Ro(rp)}function ko(_d){if(_d==="NHWC")return"channelsLast";if(_d==="NCHW")return"channelsFirst";throw new Error("Unknown dataFormat "+_d)}function So(_d,rp,np){if(rp==="complex64"){if(_d.dtype==="complex64")return _d.clone();var ap=Pn(_d.shape),sp=_d.toFloat(),lp=np.complex(sp,ap);return ap.dispose(),sp.dispose(),lp}if(!M(_d.dtype,rp))return Nt.makeTensorFromDataId(_d.dataId,_d.shape,rp);if(_d.dtype==="complex64"){var up=np.real(_d);return lp=up.cast(rp),up.dispose(),lp}if(rp==="int32")return np.int(_d);if(rp==="bool"){var cp=An(0,_d.dtype);return lp=np.notEqual(_d,cp),cp.dispose(),lp}throw new Error("Error in Cast: failed to cast "+_d.dtype+" to "+rp)}function Ao(_d,rp){return Nt.makeTensorFromDataId(_d.dataId,rp,_d.dtype)}function Do(_d,rp,np){var ap=(rp-_d)/(np-1),sp=$$1(np,"float32");sp[0]=_d;for(var lp=1;lp<sp.length;lp++)sp[lp]=sp[lp-1]+ap;return Dn(sp,"float32")}var To=Object.freeze({castTensor:So,reshapeTensor:Ao,linspaceImpl:Do,upcastType:Ct,axesAreInnerMostDims:fn,combineLocations:pn,computeOutAndReduceShapes:dn,expandShapeToKeepDim:vn,assertAxesAreInnerMostDims:mn,getAxesPermutation:gn,getUndoAxesPermutation:yn,getInnerMostAxes:xn,getBroadcastDims:ho,getReductionAxes:fo,assertAndGetBroadcastShape:po,assertParamsConsistent:bn,computeOutShape:wn,computePool2DInfo:vo,computePool3DInfo:mo,computeConv2DInfo:go,computeConv3DInfo:yo,computeDefaultPad:xo,tupleValuesAreOne:Ro,eitherStridesOrDilationsAreOne:Io,convertConv2DDataFormat:ko});function No(_d,rp){if(_d.length!==rp.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+_d.length+", imag: "+rp.length+".");for(var np=new Float32Array(2*_d.length),ap=0;ap<np.length;ap+=2)np[ap]=_d[ap/2],np[ap+1]=rp[ap/2];return np}function Fo(_d,rp){return{real:_d[2*rp],imag:_d[2*rp+1]}}function Oo(_d,rp,np,ap){_d[2*ap]=rp,_d[2*ap+1]=np}function _o(_d,rp,np){var ap=(np?2:-2)*Math.PI*(_d/rp);return{real:Math.cos(ap),imag:Math.sin(ap)}}function Mo(_d,rp,np,ap,sp){for(var lp=Array.from(rp).map(function(gp,vp){return{score:gp,boxIndex:vp}}).filter(function(gp){return gp.score>sp}).sort(function(gp,vp){return vp.score-gp.score}),up=[],cp=0;cp<lp.length;cp++){var dp=lp[cp],fp=dp.score,pp=dp.boxIndex;if(fp<sp)break;for(var hp=!1,mp=up.length-1;mp>=0;--mp)if(Bo(_d,pp,up[mp])>=ap){hp=!0;break}if(!hp&&(up.push(pp),up.length>=np))break}return Dn(up,"int32")}function Bo(_d,rp,np){var ap=_d.subarray(4*rp,4*rp+4),sp=_d.subarray(4*np,4*np+4),lp=Math.min(ap[0],ap[2]),up=Math.min(ap[1],ap[3]),cp=Math.max(ap[0],ap[2]),dp=Math.max(ap[1],ap[3]),fp=Math.min(sp[0],sp[2]),pp=Math.min(sp[1],sp[3]),hp=Math.max(sp[0],sp[2]),mp=Math.max(sp[1],sp[3]),gp=(cp-lp)*(dp-up),vp=(hp-fp)*(mp-pp);if(gp<=0||vp<=0)return 0;var xp=Math.max(lp,fp),Sp=Math.max(up,pp),yp=Math.min(cp,hp),bp=Math.min(dp,mp),Ep=Math.max(yp-xp,0)*Math.max(bp-Sp,0);return Ep/(gp+vp-Ep)}function Po(_d,rp,np){var ap=new Array(_d.rank).fill(0),sp=_d.shape.slice();return rp.map(function(lp){sp[np]=lp;var up=_d.slice(ap,sp);return ap[np]+=lp,up})}function Lo(_d,rp){for(var np=new Array(_d.rank),ap=0;ap<np.length;ap++)np[ap]=_d.shape[ap]*rp[ap];var sp=ur(np,_d.dtype);for(ap=0;ap<sp.values.length;++ap){for(var lp=sp.indexToLoc(ap),up=new Array(_d.rank),cp=0;cp<up.length;cp++)up[cp]=lp[cp]%_d.shape[cp];var dp=_d.locToIndex(up);sp.values[ap]=_d.values[dp]}return sp.toTensor()}function Wo(_d,rp,np,ap,sp){for(var lp=rp[rp.length-1],up=[_d.length/lp,lp],cp=up[0],dp=up[1],fp=N(np,cp*ap),pp=N("int32",cp*ap),hp=0;hp<cp;hp++){for(var mp=hp*dp,gp=_d.subarray(mp,mp+dp),vp=[],xp=0;xp<gp.length;xp++)vp.push({value:gp[xp],index:xp});vp.sort(function(wp,_p){return _p.value-wp.value});var Sp=hp*ap,yp=fp.subarray(Sp,Sp+ap),bp=pp.subarray(Sp,Sp+ap);for(xp=0;xp<ap;xp++)yp[xp]=vp[xp].value,bp[xp]=vp[xp].index}var Ep=rp.slice();return Ep[Ep.length-1]=ap,[kn(fp,Ep,np),kn(pp,Ep,"int32")]}function Uo(_d,rp){for(var np=[],ap=0;ap<rp.length;ap++)rp[ap]&&np.push(ap);var sp=ur(_d,"int32"),lp=ur([np.length,_d.length],"int32");for(ap=0;ap<np.length;ap++){var up=sp.indexToLoc(np[ap]),cp=ap*_d.length;lp.values.set(up,cp)}return lp.toTensor()}var Vo=function(){return function(_d,rp){this.outputShape=[],this.outputShape=_d,this.variableNames=rp.map(function(sp,lp){return"T"+lp});var np=[];this.variableNames.forEach(function(sp){np.push("float v"+sp+" = get"+sp+"AtOutCoords();")});var ap=this.variableNames.map(function(sp){return"v"+sp}).join(" + ");this.userCode=`
      void main() {
        `+np.join(`
        `)+`

        float result = `+ap+`;
        setOutput(result);
      }
    `}}(),zo=function(){return function(_d,rp){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=_d,this.variableNames=rp.map(function(sp,lp){return"T"+lp});var np=[];this.variableNames.forEach(function(sp){np.push("vec4 v"+sp+" = get"+sp+"AtOutCoords();")});var ap=this.variableNames.map(function(sp){return"v"+sp}).join(" + ");this.userCode=`
      void main() {
        `+np.join(`
        `)+`

        vec4 result = `+ap+`;
        setOutput(result);
      }
    `}}(),Go=function(){return function(_d,rp,np){this.variableNames=["A"];var ap=_d.windowSize,sp=_d.batchSize,lp=_d.inSize,up=Math.ceil(lp/ap);np||this.variableNames.push("bestIndicesA"),this.outputShape=[sp,up];var cp=rp==="max"?">":"<",dp=np?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+ap+`;

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < `+ap+`; i++) {
          int inIdx = `+dp+`;
          float candidate = getA(batch, inIdx);
          if (candidate `+cp+` bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}();function Ho(_d,rp){return["x","y","z","w","u","v"].slice(0,rp).map(function(np){return _d+"."+np})}function qo(_d,rp){return rp===1?[_d]:Ho(_d,rp)}function Ko(){var _d,rp,np,ap,sp,lp,up,cp,dp,fp;return a$1().getNumber("WEBGL_VERSION")===2?(_d="#version 300 es",rp="in",np="out",ap="in",sp="texture",lp="outputColor",up="out vec4 outputColor;",cp=`
      bool isnan_custom(float val) {
        return (val > 0.0 || val < 0.0) ? false : val != 0.0;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `,dp="",fp=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(_d="",rp="attribute",np="varying",ap="varying",sp="texture2D",lp="gl_FragColor",up="",cp=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,dp=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,fp=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:_d,attribute:rp,varyingVs:np,varyingFs:ap,texture2D:sp,output:lp,defineOutput:up,defineSpecialNaN:cp,defineSpecialInf:dp,defineRound:fp}}function jo(_d,rp,np){np===void 0&&(np="index");var ap=q(rp);return ap.map(function(sp,lp){return"int "+_d[lp]+" = "+np+" / "+sp+"; "+(lp===ap.length-1?"int "+_d[lp+1]+" = "+np+" - "+_d[lp]+" * "+sp:"index -= "+_d[lp]+" * "+sp)+";"}).join("")}function Xo(_d){var rp=q(_d).map(function(np){return np.toString()});return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * `+rp[0]+" + coords.y * "+rp[1]+` + coords.z;
  }
`}var $o=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;function Yo(_d,rp,np,ap){var sp=[];_d.forEach(function(gp){var vp=w$1(gp.shapeInfo.logicalShape);gp.shapeInfo.isUniform?sp.push("uniform float "+gp.name+(vp>1?"["+vp+"]":"")+";"):(sp.push("uniform sampler2D "+gp.name+";"),sp.push("uniform int offset"+gp.name+";"))});var lp,up,cp=sp.join(`
`),dp=_d.map(function(gp){return function(vp,xp,Sp){Sp===void 0&&(Sp=!1);var yp="";yp+=Sp?Jo(vp):Qo(vp);var bp=vp.shapeInfo.logicalShape,Ep=xp.logicalShape;return bp.length<=Ep.length&&(yp+=Sp?function(wp,_p){var Rp,$p=wp.name,Cp=$p.charAt(0).toUpperCase()+$p.slice(1),Ap="get"+Cp+"AtOutCoords",Op=wp.shapeInfo.logicalShape.length,Lp=_p.logicalShape.length,Mp=ho(wp.shapeInfo.logicalShape,_p.logicalShape),kp=aa(Lp),Dp=Lp-Op,Fp=["x","y","z","w","u","v"];Rp=Op===0?"":Lp<2&&Mp.length>=1?"coords = 0;":Mp.map(function(zp){return"coords."+Fp[zp+Dp]+" = 0;"}).join(`
`);var Ip="";Ip=Lp<2&&Op>0?"coords":wp.shapeInfo.logicalShape.map(function(zp,Wp){return"coords."+Fp[Wp+Dp]}).join(", ");var Pp="return outputValue;",Tp=w$1(wp.shapeInfo.logicalShape)===1,Np=w$1(_p.logicalShape)===1;if(Op!==1||Tp||Np){if(Tp&&!Np)Pp=Lp===1?`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:`
        return vec4(outputValue.x);
      `;else if(Mp.length){var jp=Op-2,Vp=Op-1;Mp.indexOf(jp)>-1&&Mp.indexOf(Vp)>-1?Pp="return vec4(outputValue.x);":Mp.indexOf(jp)>-1?Pp="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":Mp.indexOf(Vp)>-1&&(Pp="return vec4(outputValue.xx, outputValue.zz);")}}else Pp=`
      return vec4(outputValue.xy, outputValue.xy);
    `;return`
    vec4 `+Ap+`() {
      `+kp+` coords = getOutputCoords();
      `+Rp+`
      vec4 outputValue = get`+Cp+"("+Ip+`);
      `+Pp+`
    }
  `}(vp,xp):function(wp,_p){var Rp=wp.name,$p=Rp.charAt(0).toUpperCase()+Rp.slice(1),Cp="get"+$p+"AtOutCoords",Ap=_p.texShape,Op=wp.shapeInfo.texShape,Lp=wp.shapeInfo.logicalShape.length,Mp=_p.logicalShape.length;if(!wp.shapeInfo.isUniform&&Lp===Mp&&wp.shapeInfo.flatOffset==null&&C(Op,Ap))return`
      float `+Cp+`() {
        return sampleTexture(`+Rp+`, resultUV);
      }
    `;var kp,Dp=aa(Mp),Fp=ho(wp.shapeInfo.logicalShape,_p.logicalShape),Ip=Mp-Lp,Pp=["x","y","z","w","u","v"];kp=Lp===0?"":Mp<2&&Fp.length>=1?"coords = 0;":Fp.map(function(Np){return"coords."+Pp[Np+Ip]+" = 0;"}).join(`
`);var Tp="";return Tp=Mp<2&&Lp>0?"coords":wp.shapeInfo.logicalShape.map(function(Np,jp){return"coords."+Pp[jp+Ip]}).join(", "),`
    float `+Cp+`() {
      `+Dp+` coords = getOutputCoords();
      `+kp+`
      return get`+$p+"("+Tp+`);
    }
  `}(vp,xp)),yp}(gp,rp,ap)}).join(`
`),fp=rp.texShape,pp=Ko(),hp=function(gp){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return `+gp.texture2D+`(textureSampler, uv).r;
    }
  `}(pp),mp=function(gp){return gp.version+`
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    `+gp.varyingFs+` vec2 resultUV;
    `+gp.defineOutput+`
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    `+gp.defineSpecialNaN+`
    `+gp.defineSpecialInf+`
    `+gp.defineRound+`

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    `+Zo+`
    `+ta+`
    `+ea+`
  `}(pp);return rp.isPacked?(lp=function(gp,vp){switch(gp.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(wp,_p){var Rp=[Math.ceil(_p[0]/2),Math.ceil(_p[1]/2)];return Rp[0]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * `+Rp[1]+`.0);
      }
    `:Rp[1]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * `+Rp[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+Rp[0]+", "+Rp[1]+`));
      return 2 * (resTexRC.x * `+Rp[1]+` + resTexRC.y);
    }
  `}(0,vp);case 2:return function(wp,_p){var Rp=[Math.ceil(_p[0]/2),Math.ceil(_p[1]/2)];if(C(wp,_p))return`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(`+Rp[0]+", "+Rp[1]+`));
      }
    `;var $p=Math.ceil(wp[1]/2);return`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+Rp[0]+", "+Rp[1]+`));

      int index = resTexRC.x * `+Rp[1]+` + resTexRC.y;
      int r = 2 * (index / `+$p+`);
      int c = imod(index, `+$p+`) * 2;

      return ivec2(r, c);
    }
  `}(gp,vp);case 3:return xp=gp,Sp=vp,yp=[Math.ceil(Sp[0]/2),Math.ceil(Sp[1]/2)],bp=Math.ceil(xp[2]/2),Ep=bp*Math.ceil(xp[1]/2),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+yp[0]+", "+yp[1]+`));
      int index = resTexRC.x * `+yp[1]+` + resTexRC.y;

      int b = index / `+Ep+`;
      index -= b * `+Ep+`;

      int r = 2 * (index / `+bp+`);
      int c = imod(index, `+bp+`) * 2;

      return ivec3(b, r, c);
    }
  `;default:return function(wp,_p){for(var Rp=[Math.ceil(_p[0]/2),Math.ceil(_p[1]/2)],$p=Math.ceil(wp[wp.length-1]/2),Cp=$p*Math.ceil(wp[wp.length-2]/2),Ap=Cp,Op="",Lp="b, r, c",Mp=2;Mp<wp.length-1;Mp++)Ap*=wp[wp.length-Mp-1],Op=`
      int b`+Mp+" = index / "+Ap+`;
      index -= b`+Mp+" * "+Ap+`;
    `+Op,Lp="b"+Mp+", "+Lp;return`
    ivec`+wp.length+` getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+Rp[0]+", "+Rp[1]+`));
      int index = resTexRC.x * `+Rp[1]+` + resTexRC.y;

      `+Op+`

      int b = index / `+Cp+`;
      index -= b * `+Cp+`;

      int r = 2 * (index / `+$p+`);
      int c = imod(index, `+$p+`) * 2;

      return ivec`+wp.length+"("+Lp+`);
    }
  `}(gp,vp)}var xp,Sp,yp,bp,Ep}(rp.logicalShape,fp),up=function(gp){return`
    void setOutput(vec4 val) {
      `+gp.output+` = val;
    }
  `}(pp)):(lp=function(gp,vp){switch(gp.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(yp,bp){return bp[0]===1?`
      int getOutputCoords() {
        return int(resultUV.x * `+bp[1]+`.0);
      }
    `:bp[1]===1?`
      int getOutputCoords() {
        return int(resultUV.y * `+bp[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+bp[0]+", "+bp[1]+`));
      return resTexRC.x * `+bp[1]+` + resTexRC.y;
    }
  `}(0,vp);case 2:return function(yp,bp){return C(yp,bp)?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(`+bp[0]+", "+bp[1]+`));
      }
    `:yp[1]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+bp[0]+", "+bp[1]+`));
        int index = resTexRC.x * `+bp[1]+` + resTexRC.y;
        return ivec2(index, 0);
      }
    `:yp[0]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+bp[0]+", "+bp[1]+`));
        int index = resTexRC.x * `+bp[1]+` + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+bp[0]+", "+bp[1]+`));
      int index = resTexRC.x * `+bp[1]+` + resTexRC.y;
      int r = index / `+yp[1]+`;
      int c = index - r * `+yp[1]+`;
      return ivec2(r, c);
    }
  `}(gp,vp);case 3:return xp=vp,Sp=jo(["r","c","d"],gp),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+xp[0]+", "+xp[1]+`));
      int index = resTexRC.x * `+xp[1]+` + resTexRC.y;
      `+Sp+`
      return ivec3(r, c, d);
    }
  `;case 4:return function(yp,bp){var Ep=jo(["r","c","d","d2"],yp);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+bp[0]+", "+bp[1]+`));
      int index = resTexRC.x * `+bp[1]+` + resTexRC.y;
      `+Ep+`
      return ivec4(r, c, d, d2);
    }
  `}(gp,vp);case 5:return function(yp,bp){var Ep=jo(["r","c","d","d2","d3"],yp);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(`+bp[0]+`,
                             `+bp[1]+`));

      int index = resTexRC.x * `+bp[1]+` + resTexRC.y;

      `+Ep+`

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}(gp,vp);case 6:return function(yp,bp){var Ep=jo(["r","c","d","d2","d3","d4"],yp);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+bp[0]+", "+bp[1]+`));
      int index = resTexRC.x * `+bp[1]+` + resTexRC.y;

      `+Ep+`

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}(gp,vp);default:throw new Error(gp.length+"-D output sampling is not yet supported")}var xp,Sp}(rp.logicalShape,fp),up=function(gp){return`
    void setOutput(float val) {
      `+gp.output+` = vec4(val, 0, 0, 0);
    }
  `}(pp)),ap&&(mp+=na),[mp,hp,up,cp,lp,dp,np].join(`
`)}function Qo(_d){var rp=_d.shapeInfo.logicalShape;switch(rp.length){case 0:return function(np){var ap=np.name,sp="get"+ap.charAt(0).toUpperCase()+ap.slice(1);if(np.shapeInfo.isUniform)return"float "+sp+"() {return "+ap+";}";var lp=np.shapeInfo.texShape,up=lp[0],cp=lp[1];if(up===1&&cp===1)return`
      float `+sp+`() {
        return sampleTexture(`+ap+`, halfCR);
      }
    `;var dp=np.shapeInfo.texShape,fp=dp[0],pp=dp[1],hp=ra(ap);return`
    float `+sp+`() {
      vec2 uv = uvFromFlat(`+fp+", "+pp+", "+hp+`);
      return sampleTexture(`+ap+`, uv);
    }
  `}(_d);case 1:return function(np){var ap=np.name,sp="get"+ap.charAt(0).toUpperCase()+ap.slice(1);if(np.shapeInfo.isUniform)return`
      float `+sp+`(int index) {
        `+oa(np)+`
      }
    `;var lp=np.shapeInfo.texShape,up=lp[0],cp=lp[1];if(cp===1&&up===1)return`
      float `+sp+`(int index) {
        return sampleTexture(`+ap+`, halfCR);
      }
    `;var dp=ra(ap);return cp===1?`
      float `+sp+`(int index) {
        vec2 uv = vec2(0.5, (float(index + `+dp+") + 0.5) / "+up+`.0);
        return sampleTexture(`+ap+`, uv);
      }
    `:up===1?`
      float `+sp+`(int index) {
        vec2 uv = vec2((float(index + `+dp+") + 0.5) / "+cp+`.0, 0.5);
        return sampleTexture(`+ap+`, uv);
      }
    `:`
    float `+sp+`(int index) {
      vec2 uv = uvFromFlat(`+up+", "+cp+", index + "+dp+`);
      return sampleTexture(`+ap+`, uv);
    }
  `}(_d);case 2:return function(np){var ap=np.shapeInfo.logicalShape,sp=np.name,lp="get"+sp.charAt(0).toUpperCase()+sp.slice(1),up=np.shapeInfo.texShape;if(up!=null&&C(ap,up)){var cp=up[0],dp=up[1];return`
    float `+lp+`(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(`+dp+".0, "+cp+`.0);
      return sampleTexture(`+sp+`, uv);
    }
  `}var fp=T(ap),pp=fp.newShape,hp=fp.keptDims,mp=pp;if(mp.length<ap.length){var gp=ia(np,mp);return`
      `+Qo(gp)+`
      float `+lp+`(int row, int col) {
        return `+lp+"("+ua(["row","col"],hp)+`);
      }
    `}if(np.shapeInfo.isUniform)return`
      float `+lp+`(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(`+ap[1]+`, 1)));
        `+oa(np)+`
      }
    `;var vp=up[0],xp=up[1],Sp=ra(sp);return xp===1?`
    float `+lp+`(int row, int col) {
      float index = dot(vec3(row, col, `+Sp+"), vec3("+ap[1]+`, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / `+vp+`.0);
      return sampleTexture(`+sp+`, uv);
    }
  `:vp===1?`
    float `+lp+`(int row, int col) {
      float index = dot(vec3(row, col, `+Sp+"), vec3("+ap[1]+`, 1, 1));
      vec2 uv = vec2((index + 0.5) / `+xp+`.0, 0.5);
      return sampleTexture(`+sp+`, uv);
    }
  `:`
  float `+lp+`(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * `+ap[1]+" + col + "+Sp+`;
    vec2 uv = uvFromFlat(`+vp+", "+xp+`, index);
    return sampleTexture(`+sp+`, uv);
  }
`}(_d);case 3:return function(np){var ap=np.shapeInfo.logicalShape,sp=np.name,lp="get"+sp.charAt(0).toUpperCase()+sp.slice(1),up=ap[1]*ap[2],cp=ap[2],dp=T(ap),fp=dp.newShape,pp=dp.keptDims,hp=fp;if(hp.length<ap.length){var mp=ia(np,hp);return`
        `+Qo(mp)+`
        float `+lp+`(int row, int col, int depth) {
          return `+lp+"("+ua(["row","col","depth"],pp)+`);
        }
      `}if(np.shapeInfo.isUniform)return`
      float `+lp+`(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(`+up+", "+cp+`, 1)));
        `+oa(np)+`
      }
    `;var gp=np.shapeInfo.texShape,vp=gp[0],xp=gp[1],Sp=np.shapeInfo.flatOffset;if(xp===up&&Sp==null)return`
        float `+lp+`(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(`+cp+`, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(`+xp+".0, "+vp+`.0);
          return sampleTexture(`+sp+`, uv);
        }
      `;if(xp===cp&&Sp==null)return`
    float `+lp+`(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(`+ap[1]+`, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+xp+".0, "+vp+`.0);
      return sampleTexture(`+sp+`, uv);
    }
  `;var yp=ra(sp);return`
      float `+lp+`(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * `+up+" + col * "+cp+" + depth + "+yp+`;
        vec2 uv = uvFromFlat(`+vp+", "+xp+`, index);
        return sampleTexture(`+sp+`, uv);
      }
  `}(_d);case 4:return function(np){var ap=np.shapeInfo.logicalShape,sp=np.name,lp="get"+sp.charAt(0).toUpperCase()+sp.slice(1),up=ap[3],cp=ap[2]*up,dp=ap[1]*cp,fp=T(ap),pp=fp.newShape,hp=fp.keptDims;if(pp.length<ap.length){var mp=ia(np,pp);return`
      `+Qo(mp)+`
      float `+lp+`(int row, int col, int depth, int depth2) {
        return `+lp+"("+ua(["row","col","depth","depth2"],hp)+`);
      }
    `}if(np.shapeInfo.isUniform)return`
      float `+lp+`(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(`+dp+", "+cp+", "+up+`, 1)));
        `+oa(np)+`
      }
    `;var gp=np.shapeInfo.flatOffset,vp=np.shapeInfo.texShape,xp=vp[0],Sp=vp[1];if(Sp===dp&&gp==null)return`
      float `+lp+`(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(`+cp+", "+up+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+Sp+".0, "+xp+`.0);
        return sampleTexture(`+sp+`, uv);
      }
    `;if(Sp===up&&gp==null)return`
      float `+lp+`(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(`+ap[1]*ap[2]+", "+ap[2]+`, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+Sp+".0, "+xp+`.0);
        return sampleTexture(`+sp+`, uv);
      }
    `;var yp=ra(sp);return`
    float `+lp+`(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+dp+" + col * "+cp+` +
          depth * `+up+` + depth2;
      vec2 uv = uvFromFlat(`+xp+", "+Sp+", index + "+yp+`);
      return sampleTexture(`+sp+`, uv);
    }
  `}(_d);case 5:return function(np){var ap=np.shapeInfo.logicalShape,sp=np.name,lp="get"+sp.charAt(0).toUpperCase()+sp.slice(1),up=ap[4],cp=ap[3]*up,dp=ap[2]*cp,fp=ap[1]*dp,pp=T(ap),hp=pp.newShape,mp=pp.keptDims;if(hp.length<ap.length){var gp=ia(np,hp);return`
      `+Qo(gp)+`
      float `+lp+`(int row, int col, int depth, int depth2, int depth3) {
        return `+lp+"("+ua(["row","col","depth","depth2","depth3"],mp)+`);
      }
    `}if(np.shapeInfo.isUniform)return`
      float `+lp+`(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(`+fp+", "+dp+", "+cp+", "+up+`)) +
          depth3;
        `+oa(np)+`
      }
    `;var vp=np.shapeInfo.flatOffset,xp=np.shapeInfo.texShape,Sp=xp[0],yp=xp[1];if(yp===fp&&vp==null)return`
      float `+lp+`(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(`+dp+", "+cp+", "+up+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+yp+".0, "+Sp+`.0);
        return sampleTexture(`+sp+`, uv);
      }
    `;if(yp===up&&vp==null)return`
      float `+lp+`(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(`+ap[1]*ap[2]*ap[3]+`,
               `+ap[2]*ap[3]+", "+ap[3]+`, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+yp+".0, "+Sp+`.0);
        return sampleTexture(`+sp+`, uv);
      }
    `;var bp=ra(sp);return`
    float `+lp+`(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+fp+" + col * "+dp+" + depth * "+cp+` +
          depth2 * `+up+" + depth3 + "+bp+`;
      vec2 uv = uvFromFlat(`+Sp+", "+yp+`, index);
      return sampleTexture(`+sp+`, uv);
    }
  `}(_d);case 6:return function(np){var ap=np.shapeInfo.logicalShape,sp=np.name,lp="get"+sp.charAt(0).toUpperCase()+sp.slice(1),up=T(ap),cp=up.newShape,dp=up.keptDims;if(cp.length<ap.length){var fp=ia(np,cp);return`
      `+Qo(fp)+`
      float `+lp+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return `+lp+"("+ua(["row","col","depth","depth2","depth3","depth4"],dp)+`);
      }
    `}var pp=ap[5],hp=ap[4]*pp,mp=ap[3]*hp,gp=ap[2]*mp,vp=ap[1]*gp;if(np.shapeInfo.isUniform)return`
      float `+lp+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(`+vp+", "+gp+", "+mp+", "+hp+`)) +
          dot(
            vec2(depth3, depth4),
            vec2(`+pp+`, 1)));
        `+oa(np)+`
      }
    `;var xp=np.shapeInfo.flatOffset,Sp=np.shapeInfo.texShape,yp=Sp[0],bp=Sp[1];if(bp===vp&&xp==null)return`
      float `+lp+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(`+gp+", "+mp+", "+hp+", "+pp+`)) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+bp+".0, "+yp+`.0);
        return sampleTexture(`+sp+`, uv);
      }
    `;if(bp===pp&&xp==null)return`
      float `+lp+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(`+ap[1]*ap[2]*ap[3]*ap[4]+`,
               `+ap[2]*ap[3]*ap[4]+`,
               `+ap[3]*ap[4]+`,
               `+ap[4]+`)) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+bp+".0, "+yp+`.0);
        return sampleTexture(`+sp+`, uv);
      }
    `;var Ep=ra(sp);return`
    float `+lp+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+vp+" + col * "+gp+" + depth * "+mp+` +
          depth2 * `+hp+" + depth3 * "+pp+" + depth4 + "+Ep+`;
      vec2 uv = uvFromFlat(`+yp+", "+bp+`, index);
      return sampleTexture(`+sp+`, uv);
    }
  `}(_d);default:throw new Error(rp.length+"-D input sampling is not yet supported")}}function Jo(_d){var rp,np,ap;switch(_d.shapeInfo.logicalShape.length){case 0:return rp=_d.name,np="get"+rp.charAt(0).toUpperCase()+rp.slice(1),ap=Ko(),`
    vec4 `+np+`() {
      return `+ap.texture2D+"("+rp+`, halfCR);
    }
  `;case 1:return function(sp){var lp=sp.name,up="get"+lp.charAt(0).toUpperCase()+lp.slice(1),cp=sp.shapeInfo.texShape,dp=[Math.ceil(cp[0]/2),Math.ceil(cp[1]/2)],fp=Ko();return`
    vec4 `+up+`(int index) {
      vec2 uv = packedUVfrom1D(
        `+dp[0]+", "+dp[1]+`, index);
      return `+fp.texture2D+"("+lp+`, uv);
    }
  `}(_d);case 2:return function(sp){var lp=sp.shapeInfo.logicalShape,up=sp.name,cp="get"+up.charAt(0).toUpperCase()+up.slice(1),dp=sp.shapeInfo.texShape,fp=dp[0],pp=dp[1],hp=Ko();if(dp!=null&&C(lp,dp))return`
      vec4 `+cp+`(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(`+pp+".0, "+fp+`.0);

        return `+hp.texture2D+"("+up+`, uv);
      }
    `;var mp=[Math.ceil(dp[0]/2),Math.ceil(dp[1]/2)],gp=Math.ceil(lp[1]/2);return`
    vec4 `+cp+`(int row, int col) {
      vec2 uv = packedUVfrom2D(`+gp+", "+mp[0]+", "+mp[1]+`, row, col);
      return `+hp.texture2D+"("+up+`, uv);
    }
  `}(_d);case 3:return function(sp){var lp=sp.shapeInfo.logicalShape,up=sp.name,cp="get"+up.charAt(0).toUpperCase()+up.slice(1),dp=sp.shapeInfo.texShape,fp=[Math.ceil(dp[0]/2),Math.ceil(dp[1]/2)];if(lp[0]===1){var pp=lp.slice(1),hp=ia(sp,pp);return`
        `+Jo(hp)+`
        vec4 `+cp+`(int b, int row, int col) {
          return `+cp+"("+ua(["b","row","col"],[1,2])+`);
        }
      `}var mp=fp[0],gp=fp[1],vp=Math.ceil(lp[2]/2),xp=vp*Math.ceil(lp[1]/2),Sp=Ko();return`
    vec4 `+cp+`(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        `+mp+", "+gp+", "+xp+", "+vp+`, b, row, col);
      return `+Sp.texture2D+"("+up+`, uv);
    }
  `}(_d);default:return function(sp){for(var lp=sp.shapeInfo.logicalShape,up=lp.length,cp=sp.name,dp="get"+cp.charAt(0).toUpperCase()+cp.slice(1),fp=sp.shapeInfo.texShape,pp=[Math.ceil(fp[0]/2),Math.ceil(fp[1]/2)],hp=pp[0],mp=pp[1],gp=Math.ceil(lp[up-1]/2),vp=gp*Math.ceil(lp[up-2]/2),xp="int b, int row, int col",Sp="b * "+vp+" + (row / 2) * "+gp+" + (col / 2)",yp=2;yp<up-1;yp++)xp="int b"+yp+", "+xp,vp*=lp[up-yp-1],Sp="b"+yp+" * "+vp+" + "+Sp;var bp=Ko();return`
    vec4 `+dp+"("+xp+`) {
      int index = `+Sp+`;
      int texR = index / `+mp+`;
      int texC = index - texR * `+mp+`;
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+mp+", "+hp+`);
      return `+bp.texture2D+"("+cp+`, uv);
    }
  `}(_d)}}var Zo=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,ta=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,ea=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,na=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function ra(_d){return"offset"+_d}function oa(_d){var rp=_d.name,np=w$1(_d.shapeInfo.logicalShape);return np<2?"return "+rp+";":`
    for (int i = 0; i < `+np+`; i++) {
      if (i == index) {
        return `+rp+`[i];
      }
    }
  `}function aa(_d){if(_d<=1)return"int";if(_d===2)return"ivec2";if(_d===3)return"ivec3";if(_d===4)return"ivec4";if(_d===5)return"ivec5";if(_d===6)return"ivec6";throw Error("GPU for rank "+_d+" is not yet supported")}function ia(_d,rp){var np=JSON.parse(JSON.stringify(_d));return np.shapeInfo.logicalShape=rp,np}function ua(_d,rp){return rp.map(function(np){return _d[np]}).join(", ")}var sa=function(){return function(_d,rp,np,ap){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,g(_d.length>2,function(){return"Packed arg"+(np.charAt(0).toUpperCase()+np.slice(1))+" supports only inputs with rank above 2."});var sp=_d[_d.length-1],lp=Math.ceil(sp/rp);this.outputShape=_d.slice(0,-1),lp>1&&this.outputShape.push(lp),ap||this.variableNames.push("bestIndicesA");var up,cp,dp=this.outputShape,fp=dp.length,pp=aa(fp),hp=qo("coords",fp);if(lp===1){var mp=aa(cp=fp+1);up=`
        `+mp+" sourceLocR = "+mp+"("+hp.join()+`, 0);
        ++`+hp[fp-1]+`;
        `+mp+" sourceLocG = "+mp+"("+hp.join()+`, 0);
        ++`+hp[fp-2]+`;
        `+mp+" sourceLocA = "+mp+"("+hp.join()+`, 0);
        --`+hp[fp-1]+`;
        `+mp+" sourceLocB = "+mp+"("+hp.join()+`, 0);
        --`+hp[fp-2]+";"}else cp=fp,up=`
        `+pp+` sourceLocR = coords;
        ++`+hp[fp-1]+`;
        `+pp+` sourceLocG = coords;
        ++`+hp[fp-2]+`;
        `+pp+` sourceLocA = coords;
        --`+hp[fp-1]+`;
        `+pp+` sourceLocB = coords;
        --`+hp[fp-2]+";";var gp=["x","y","z","w","u","v"].slice(0,cp),vp="."+gp[cp-1],xp=gp.map(function(Cp){return"int "+Cp}),Sp=qo("sourceLocR",cp-1).concat("inIdx.r"),yp=qo("sourceLocG",cp-1).concat("inIdx.g"),bp=qo("sourceLocB",cp-1).concat("inIdx.b"),Ep=qo("sourceLocA",cp-1).concat("inIdx.a"),wp=np==="max"?"greaterThan":"lessThan",_p=ap?"":`
          inIdx = round(vec4(getBestIndicesAChannel(`+Sp.join()+`),
                             getBestIndicesAChannel(`+yp.join()+`),
                             getBestIndicesAChannel(`+bp.join()+`),
                             getBestIndicesAChannel(`+Ep.join()+")));",Rp=`vec4(
            getAChannel(`+Sp.join()+`),
            hasNextCol ? getAChannel(`+yp.join()+`) : 0.,
            hasNextRow ? getAChannel(`+bp.join()+`) : 0.,
            hasNextRow && hasNextCol ? getAChannel(`+Ep.join()+") : 0.)",$p=ap?"":`
      float getBestIndicesAChannel(`+xp.join()+`) {
        return getChannel(getBestIndicesA(`+gp.join()+`),
                                          vec2(`+gp.slice(-2).join()+`));
      }`;this.userCode=`
      float getAChannel(`+xp.join()+`) {
        return getChannel(getA(`+gp.join()+`),
                               vec2(`+gp.slice(-2).join()+`));
      }
      `+$p+`
      void main() {
        `+pp+` coords = getOutputCoords();
        bool hasNextCol = `+hp[fp-1]+" < "+(dp[fp-1]-1)+`;
        bool hasNextRow = `+hp[fp-2]+" < "+(dp[fp-2]-1)+`;
        `+up+`
        ivec4 srcIdx = ivec4(sourceLocR`+vp+", sourceLocG"+vp+`,
          sourceLocB`+vp+", sourceLocA"+vp+") * "+rp+`;
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = `+Rp+`;

        for (int i = 0; i < `+rp+`; i++) {
          inIdx = srcIdx;
          `+_p+`
          vec4 candidate = `+Rp+`;
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(`+wp+`(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}(),ca=function(){return function(_d){this.variableNames=["dy"],this.outputShape=_d.inShape;var rp=_d.filterHeight,np=_d.filterWidth,ap=_d.strideHeight,sp=_d.strideWidth,lp=_d.dilationHeight,up=_d.dilationWidth,cp=_d.effectiveFilterHeight,dp=_d.effectiveFilterWidth,fp=cp-1-_d.padInfo.top,pp=dp-1-_d.padInfo.left,hp=1/(rp*np);this.userCode=`
      const ivec2 pads = ivec2(`+fp+", "+pp+`);
      const float avgMultiplier = float(`+hp+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+cp+`;
            wR += `+lp+`) {
          float dyR = float(dyRCorner + wR) / `+ap+`.0;

          if (dyR < 0.0 || dyR >= `+_d.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+dp+`;
            wC+= `+up+`) {
            float dyC = float(dyCCorner + wC) / `+sp+`.0;

            if (dyC < 0.0 || dyC >= `+_d.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}(),la=function(){return function(_d){this.variableNames=["dy"],this.outputShape=_d.inShape;var rp=_d.filterDepth,np=_d.filterHeight,ap=_d.filterWidth,sp=_d.strideDepth,lp=_d.strideHeight,up=_d.strideWidth,cp=_d.dilationDepth,dp=_d.dilationHeight,fp=_d.dilationWidth,pp=_d.effectiveFilterDepth,hp=_d.effectiveFilterHeight,mp=_d.effectiveFilterWidth,gp=pp-1-_d.padInfo.front,vp=hp-1-_d.padInfo.top,xp=mp-1-_d.padInfo.left,Sp=1/(rp*np*ap);this.userCode=`
      const ivec3 pads = ivec3(`+gp+", "+vp+", "+xp+`);
      const float avgMultiplier = float(`+Sp+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+pp+`;
            wD += `+cp+`) {
          float dyD = float(dyDCorner + wD) / `+sp+`.0;

          if (dyD < 0.0 || dyD >= `+_d.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+hp+`;
              wR += `+dp+`) {
            float dyR = float(dyRCorner + wR) / `+lp+`.0;

            if (dyR < 0.0 || dyR >= `+_d.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+mp+`;
                wC += `+fp+`) {
              float dyC = float(dyCCorner + wC) / `+up+`.0;

              if (dyC < 0.0 || dyC >= `+_d.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}(),ha=function(){return function(_d,rp,np,ap,sp,lp){this.outputShape=[],this.variableNames=["x","mean","variance"],po(_d,rp),po(_d,np);var up="0.0";ap!=null&&(po(_d,ap),this.variableNames.push("offset"),up="getOffsetAtOutCoords()");var cp="1.0";sp!=null&&(po(_d,sp),this.variableNames.push("scale"),cp="getScaleAtOutCoords()"),this.outputShape=_d,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = `+up+`;
        float scale = `+cp+`;
        float inv = scale * inversesqrt(variance + float(`+lp+`));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}(),fa=function(){return function(_d,rp,np,ap,sp,lp){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],po(_d,rp),po(_d,np);var up="vec4(0.0)";ap!=null&&(po(_d,ap),this.variableNames.push("offset"),up="getOffsetAtOutCoords()");var cp="vec4(1.0)";sp!=null&&(po(_d,sp),this.variableNames.push("scale"),cp="getScaleAtOutCoords()"),this.outputShape=_d,this.userCode=`
      void main() {
        vec4 offset = `+up+`;
        vec4 scale = `+cp+`;

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(`+lp+`));

        setOutput((x - mean) * inv + offset);
      }
    `}}(),pa="return areal * breal - aimag * bimag;",da="return areal * bimag + aimag * breal;",va=function(){return function(_d,rp,np){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=po(rp,np),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        `+_d+`
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}(),ma="return a + b;",ga="return a - b;",ya="return a * b;",xa="return (a < 0.) ? b * a : a;",ba=function(){return function(_d,rp,np){this.variableNames=["A","B"],this.outputShape=po(rp,np),this.userCode=`
      float binaryOperation(float a, float b) {
        `+_d+`
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}(),wa=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`,Ca=function(){return function(_d,rp,np,ap){ap===void 0&&(ap=!1),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=po(rp,np);var sp=this.outputShape.length,lp="";if(ap)if(sp===0||w$1(this.outputShape)===1)lp=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(lp=`
          `+aa(sp)+` coords = getOutputCoords();
        `,sp===1)lp+=`
            result.y = (coords + 1) >= `+this.outputShape[0]+` ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{var up=qo("coords",sp);lp+=`
            bool nextRowOutOfBounds =
              (`+up[sp-2]+" + 1) >= "+this.outputShape[sp-2]+`;
            bool nextColOutOfBounds =
              (`+up[sp-1]+" + 1) >= "+this.outputShape[sp-1]+`;
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        `+_d+`
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        `+lp+`

        setOutput(result);
      }
    `}}(),Ea=function(){function _d(rp){this.variableNames=["A"],this.outputShape=rp,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}return _d.prototype.getCustomSetupFunc=function(rp,np){var ap=this;return function(sp,lp){ap.minLoc==null&&(ap.minLoc=sp.getUniformLocationNoThrow(lp,"minVal"),ap.maxLoc=sp.getUniformLocationNoThrow(lp,"maxVal")),sp.gl.uniform1f(ap.minLoc,rp),sp.gl.uniform1f(ap.maxLoc,np)}},_d}(),Ra=function(){function _d(rp){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=rp,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}return _d.prototype.getCustomSetupFunc=function(rp,np){var ap=this;return function(sp,lp){ap.minLoc==null&&(ap.minLoc=sp.getUniformLocationNoThrow(lp,"minVal"),ap.maxLoc=sp.getUniformLocationNoThrow(lp,"maxVal")),sp.gl.uniform1f(ap.minLoc,rp),sp.gl.uniform1f(ap.maxLoc,np)}},_d}(),Ia=function(){return function(_d){this.variableNames=["real","imag"],this.outputShape=_d,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}(),ka=function(){return function(_d){this.outputShape=[],this.outputShape=wn(_d,1),this.variableNames=_d.map(function(cp,dp){return"T"+dp});var rp=new Array(_d.length-1);rp[0]=_d[0][1];for(var np=1;np<rp.length;np++)rp[np]=rp[np-1]+_d[np][1];var ap=["if (yC < "+rp[0]+") setOutput(getT0(yR, yC));"];for(np=1;np<rp.length;np++){var sp=rp[np-1];ap.push("else if (yC < "+rp[np]+") setOutput(getT"+np+"(yR, yC-"+sp+"));")}var lp=rp.length,up=rp[rp.length-1];ap.push("else setOutput(getT"+lp+"(yR, yC-"+up+"));"),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        `+ap.join(`
        `)+`
      }
    `}}(),Sa=function(){return function(_d,rp){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=wn(_d,rp);var np=this.outputShape,ap=np.length,sp=aa(ap),lp=qo("coords",ap),up=["x","y","z","w","u","v"].slice(0,ap);this.variableNames=_d.map(function(Sp,yp){return"T"+yp});var cp=new Array(_d.length-1);cp[0]=_d[0][rp];for(var dp=1;dp<cp.length;dp++)cp[dp]=cp[dp-1]+_d[dp][rp];var fp=up[rp],pp=up.slice(-2),hp=up.join(),mp="if ("+fp+" < "+cp[0]+`) {
        return getChannel(
            getT0(`+hp+"), vec2("+pp.join()+`));
        }`;for(dp=1;dp<cp.length;dp++){var gp=cp[dp-1];mp+=`
        if (`+fp+" < "+cp[dp]+"  && "+fp+" >= "+cp[dp-1]+`) {
          return getChannel(
            getT`+dp+"("+Aa(up,fp,gp)+`),
            vec2(`+Aa(pp,fp,gp)+`));
        }`}var vp=cp.length,xp=cp[cp.length-1];mp+=`
        return getChannel(
          getT`+vp+"("+Aa(up,fp,xp)+`),
          vec2(`+Aa(pp,fp,xp)+"));",this.userCode=`
      float getValue(`+up.map(function(Sp){return"int "+Sp})+`) {
        `+mp+`
      }

      void main() {
        `+sp+` coords = getOutputCoords();
        vec4 result = vec4(getValue(`+lp+`), 0., 0., 0.);

        `+lp[ap-1]+" = "+lp[ap-1]+` + 1;
        if (`+lp[ap-1]+" < "+np[ap-1]+`) {
          result.g = getValue(`+lp+`);
        }

        `+lp[ap-2]+" = "+lp[ap-2]+` + 1;
        if (`+lp[ap-2]+" < "+np[ap-2]+`) {
          result.a = getValue(`+lp+`);
        }

        `+lp[ap-1]+" = "+lp[ap-1]+` - 1;
        if (`+lp[ap-2]+" < "+np[ap-2]+` &&
            `+lp[ap-1]+" < "+np[ap-1]+`) {
          result.b = getValue(`+lp+`);
        }
        setOutput(result);
      }
    `}}();function Aa(_d,rp,np){var ap=_d.indexOf(rp);return _d.map(function(sp,lp){return lp===ap?sp+" - "+np:sp}).join()}var Da=function(){return function(_d){this.variableNames=["x","dy"],this.outputShape=_d.filterShape;var rp=_d.strideHeight,np=_d.strideWidth,ap=_d.padInfo.top,sp=_d.padInfo.left,lp=_d.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < `+_d.batchSize+`; b++) {
          for (int yR = 0; yR < `+_d.outHeight+`; yR++) {
            int xR = wR + yR * `+rp+" - "+ap+`;

            if (xR < 0 || xR >= `+_d.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+_d.outWidth+`; yC++) {
              int xC = wC + yC * `+np+" - "+sp+`;

              if (xC < 0 || xC >= `+_d.inWidth+`) {
                continue;
              }

              if (`+lp+`) {
                float dyValue = getDy(b, yR, yC, d2);
                float xValue = getX(b, xR, xC, d1);
                dotProd += (xValue * dyValue);
              } else {
                float dyValue = getDy(b, d2, yR, yC);
                float xValue = getX(b, d1, xR, xC);
                dotProd += (xValue * dyValue);
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}(),Ta=function(){return function(_d){this.variableNames=["dy","W"],this.outputShape=_d.inShape;var rp=_d.filterHeight,np=_d.filterWidth,ap=_d.strideHeight,sp=_d.strideWidth,lp=_d.dataFormat==="channelsLast",up=rp-1-_d.padInfo.top,cp=np-1-_d.padInfo.left,dp=lp?1:2,fp=lp?2:3,pp=lp?3:1;this.userCode=`
      const ivec2 pads = ivec2(`+up+", "+cp+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[`+pp+`];

        ivec2 dyCorner = ivec2(coords[`+dp+"], coords["+fp+`]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+rp+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+ap+`.0;

          if (dyR < 0.0 || dyR >= `+_d.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+rp+` - 1 - wR;

          for (int wC = 0; wC < `+np+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+sp+`.0;

            if (dyC < 0.0 || dyC >= `+_d.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+np+` - 1 - wC;

            for (int d2 = 0; d2 < `+_d.outChannels+`; d2++) {

              if (`+lp+`) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}(),Na=function(){return function(_d){this.variableNames=["x","dy"],this.outputShape=_d.filterShape;var rp=_d.strideDepth,np=_d.strideHeight,ap=_d.strideWidth,sp=_d.padInfo.front,lp=_d.padInfo.top,up=_d.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < `+_d.batchSize+`; b++) {
          for (int yF = 0; yF < `+_d.outDepth+`; yF++) {
            int xF = wF + yF * `+rp+" - "+sp+`;

            if (xF < 0 || xF >= `+_d.inDepth+`) {
              continue;
            }

            for (int yR = 0; yR < `+_d.outHeight+`; yR++) {
              int xR = wR + yR * `+np+" - "+lp+`;

              if (xR < 0 || xR >= `+_d.inHeight+`) {
                continue;
              }

              for (int yC = 0; yC < `+_d.outWidth+`; yC++) {
                int xC = wC + yC * `+ap+" - "+up+`;

                if (xC < 0 || xC >= `+_d.inWidth+`) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}(),Fa=function(){return function(_d){this.variableNames=["dy","W"],this.outputShape=_d.inShape;var rp=_d.filterDepth,np=_d.filterHeight,ap=_d.filterWidth,sp=_d.strideDepth,lp=_d.strideHeight,up=_d.strideWidth,cp=rp-1-_d.padInfo.front,dp=np-1-_d.padInfo.top,fp=ap-1-_d.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(`+cp+", "+dp+", "+fp+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < `+rp+`; wF++) {
          float dyF = float(dyFCorner + wF) / `+sp+`.0;

          if (dyF < 0.0 || dyF >= `+_d.outDepth+`.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = `+rp+` - 1 - wF;

          for (int wR = 0; wR < `+np+`; wR++) {
            float dyR = float(dyRCorner + wR) / `+lp+`.0;

            if (dyR < 0.0 || dyR >= `+_d.outHeight+`.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = `+np+` - 1 - wR;

            for (int wC = 0; wC < `+ap+`; wC++) {
              float dyC = float(dyCCorner + wC) / `+up+`.0;

              if (dyC < 0.0 || dyC >= `+_d.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = `+ap+` - 1 - wC;

              for (int d2 = 0; d2 < `+_d.outChannels+`; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}(),Oa=function(){return function(_d){this.variableNames=["x","dy"],this.outputShape=_d.filterShape;var rp=_d.strideHeight,np=_d.strideWidth,ap=_d.padInfo.top,sp=_d.padInfo.left,lp=_d.outChannels/_d.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * `+lp+` + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < `+_d.batchSize+`; b++) {
          for (int yR = 0; yR < `+_d.outHeight+`; yR++) {
            int xR = wR + yR * `+rp+" - "+ap+`;

            if (xR < 0 || xR >= `+_d.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+_d.outWidth+`; yC++) {
              int xC = wC + yC * `+np+" - "+sp+`;

              if (xC < 0 || xC >= `+_d.inWidth+`) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}(),_a=function(){return function(_d){this.variableNames=["dy","W"],this.outputShape=_d.inShape;var rp=_d.filterHeight,np=_d.filterWidth,ap=_d.strideHeight,sp=_d.strideWidth,lp=rp-1-_d.padInfo.top,up=np-1-_d.padInfo.left,cp=_d.outChannels/_d.inChannels;this.userCode=`
      const ivec2 pads = ivec2(`+lp+", "+up+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < `+rp+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+ap+`.0;

          if (dyR < 0.0 || dyR >= `+_d.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+rp+` - 1 - wR;

          for (int wC = 0; wC < `+np+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+sp+`.0;

            if (dyC < 0.0 || dyC >= `+_d.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+np+` - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < `+cp+`; dm++) {
              int d2 = d1 * `+cp+` + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}(),Ma=function(){return function(_d,rp,np,ap){rp===void 0&&(rp=!1),np===void 0&&(np=null),ap===void 0&&(ap=!1),this.variableNames=["x","W"],this.outputShape=_d.outShape;var sp=_d.padInfo.top,lp=_d.padInfo.left,up=_d.strideHeight,cp=_d.strideWidth,dp=_d.dilationHeight,fp=_d.dilationWidth,pp=_d.filterHeight,hp=_d.filterWidth,mp=4*Math.floor(_d.inChannels/4),gp=_d.inChannels%4,vp=_d.dataFormat==="channelsLast",xp=vp?1:2,Sp=vp?2:3,yp=vp?3:1,bp="",Ep="";np&&(bp=ap?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+np+`
        }`:`
          float activation(float x) {
            `+np+`
          }
        `,Ep="result = activation(result);");var wp=rp?"result += getBiasAtOutCoords();":"";rp&&this.variableNames.push("bias"),ap&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+bp+`

      const ivec2 strides = ivec2(`+up+", "+cp+`);
      const ivec2 pads = ivec2(`+sp+", "+lp+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[`+yp+`];

        ivec2 xRCCorner =
            ivec2(coords[`+xp+"], coords["+Sp+`]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+pp+`; wR++) {
          int xR = xRCorner + wR * `+dp+`;

          if (xR < 0 || xR >= `+_d.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+hp+`; wC++) {
            int xC = xCCorner + wC * `+fp+`;

            if (xC < 0 || xC >= `+_d.inWidth+`) {
              continue;
            }

            for (int d1 = 0; d1 < `+mp+`; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (`+vp+`) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (`+(gp===1)+`) {

              if (`+vp+`) {
                dotProd +=
                    getX(batch, xR, xC, `+mp+`) *
                    getW(wR, wC, `+mp+`, d2);
              } else {
                dotProd +=
                    getX(batch, `+mp+`, xR, xC) *
                    getW(wR, wC, `+mp+`, d2);
              }

            } else if (`+(gp===2)+`) {
              vec2 wValues = vec2(
                getW(wR, wC, `+mp+`, d2),
                getW(wR, wC, `+mp+` + 1, d2)
              );

              if (`+vp+`) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, `+mp+`),
                  getX(batch, xR, xC, `+mp+` + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, `+mp+`, xR, xC),
                  getX(batch, `+mp+` + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (`+(gp===3)+`) {
              vec3 wValues = vec3(
                getW(wR, wC, `+mp+`, d2),
                getW(wR, wC, `+mp+` + 1, d2),
                getW(wR, wC, `+mp+` + 2, d2)
              );

              if (`+vp+`) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, `+mp+`),
                  getX(batch, xR, xC, `+mp+` + 1),
                  getX(batch, xR, xC, `+mp+` + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, `+mp+`, xR, xC),
                  getX(batch, `+mp+` + 1, xR, xC),
                  getX(batch, `+mp+` + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        `+wp+`
        `+Ep+`
        setOutput(result);
      }
    `}}(),Ba=function(){return function(_d){this.variableNames=["x","W"],this.outputShape=_d.outShape;var rp=_d.padInfo.front,np=_d.padInfo.top,ap=_d.padInfo.left,sp=_d.strideDepth,lp=_d.strideHeight,up=_d.strideWidth,cp=_d.dilationDepth,dp=_d.dilationHeight,fp=_d.dilationWidth,pp=_d.filterDepth,hp=_d.filterHeight,mp=_d.filterWidth,gp=4*Math.floor(_d.inChannels/4),vp=_d.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(`+sp+", "+lp+", "+up+`);
      const ivec3 pads = ivec3(`+rp+", "+np+", "+ap+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < `+pp+`; wF++) {
          int xF = xFCorner + wF * `+cp+`;

          if (xF < 0 || xF >= `+_d.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+hp+`; wR++) {
            int xR = xRCorner + wR * `+dp+`;

            if (xR < 0 || xR >= `+_d.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+mp+`; wC++) {
              int xC = xCCorner + wC * `+fp+`;

              if (xC < 0 || xC >= `+_d.inWidth+`) {
                continue;
              }

              for (int d1 = 0; d1 < `+gp+`; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (`+(vp===1)+`) {
                dotProd +=
                  getX(batch, xF, xR, xC, `+gp+`) *
                  getW(wF, wR, wC, `+gp+`, d2);
              } else if (`+(vp===2)+`) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, `+gp+`),
                  getX(batch, xF, xR, xC, `+gp+` + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, `+gp+`, d2),
                  getW(wF, wR, wC, `+gp+` + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (`+(vp===3)+`) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, `+gp+`),
                  getX(batch, xF, xR, xC, `+gp+` + 1),
                  getX(batch, xF, xR, xC, `+gp+` + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, `+gp+`, d2),
                  getW(wF, wR, wC, `+gp+` + 1, d2),
                  getW(wF, wR, wC, `+gp+` + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}(),Pa=function(){return function(_d,rp,np,ap){rp===void 0&&(rp=!1),np===void 0&&(np=null),ap===void 0&&(ap=!1),this.variableNames=["x","W"],this.outputShape=_d.outShape;var sp=_d.inHeight,lp=_d.inWidth,up=_d.padInfo.top,cp=_d.padInfo.left,dp=_d.strideHeight,fp=_d.strideWidth,pp=_d.dilationHeight,hp=_d.dilationWidth,mp=_d.filterHeight,gp=_d.filterWidth,vp=_d.outChannels/_d.inChannels,xp="",Sp="";np&&(xp=ap?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+np+`
        }`:`
          float activation(float x) {
            `+np+`
          }
        `,Sp="result = activation(result);");var yp=rp?"result += getBiasAtOutCoords();":"";rp&&this.variableNames.push("bias"),ap&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+xp+`

      const ivec2 strides = ivec2(`+dp+", "+fp+`);
      const ivec2 pads = ivec2(`+up+", "+cp+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / `+vp+`;
        int q = d2 - d1 * `+vp+`;

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < `+mp+`; wR++) {
          int xR = xRCorner + wR * `+pp+`;

          if (xR < 0 || xR >= `+sp+`) {
            continue;
          }

          for (int wC = 0; wC < `+gp+`; wC++) {
            int xC = xCCorner + wC * `+hp+`;

            if (xC < 0 || xC >= `+lp+`) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        `+yp+`
        `+Sp+`
        setOutput(result);
      }
    `}}(),La=function(){return function(_d,rp,np,ap){rp===void 0&&(rp=!1),np===void 0&&(np=null),ap===void 0&&(ap=!1),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=_d.outShape;for(var sp=_d.inHeight,lp=_d.inWidth,up=_d.padInfo.top,cp=_d.padInfo.left,dp=_d.strideHeight,fp=_d.strideWidth,pp=_d.dilationHeight,hp=_d.dilationWidth,mp=_d.filterHeight,gp=_d.filterWidth,vp=gp,xp="int xR; int xC; int xCOffset;",Sp=0;Sp<mp;Sp++)for(var yp=0;yp<gp;yp++)xp+=`
          vec4 xTexelR`+Sp+"C"+2*yp+` = vec4(0.);
          vec4 wR`+Sp+"C"+yp+` = vec4(0.);
          vec4 xR`+Sp+"C"+yp+" = vec4(0.);";for(Sp=0;Sp<mp;Sp++)for(var bp=0;bp<vp;bp++){if(xp+=`
          xR = xRCorner + `+Sp*pp+`;
          xC = xCCorner + `+(yp=2*bp)*hp+`;
        `,fp===1){if(yp<gp&&(xp+=cp%2==1?`
                xCOffset = xC + 1;
                if(xR >= 0 && xR < `+sp+" && xCOffset >= 0 && xCOffset < "+lp+`) {
                  xTexelR`+Sp+"C"+yp+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+Sp+"C"+yp+` = vec4(0.);
                }

                xCOffset = xC + 1 - 2;
                if(xR >= 0 && xR < `+sp+" && xCOffset >= 0 && xCOffset < "+lp+`) {
                  vec4 previous = getX(batch, xR, xCOffset, d1);
                  xR`+Sp+"C"+yp+" = vec4(previous.zw, xTexelR"+Sp+"C"+yp+`.xy);
                } else {
                  xR`+Sp+"C"+yp+" = vec4(0, 0, xTexelR"+Sp+"C"+yp+`.xy);
                }
              `:`
                if(xR >= 0 && xR < `+sp+" && xC >= 0 && xC < "+lp+`) {
                  xTexelR`+Sp+"C"+yp+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+Sp+"C"+yp+` = vec4(0.);
                }

                xR`+Sp+"C"+yp+" = xTexelR"+Sp+"C"+yp+`;
              `,yp+1<gp)){var Ep=cp%2==0?v$1(hp):hp;hp%2==0&&cp%2==1||hp%2!=0&&cp%2!=1?(xp+=`
                  xCOffset = xC + `+cp%2+" + "+Ep+`;

                  if(xR >= 0 && xR < `+sp+` &&
                    xCOffset >= 0 && xCOffset < `+lp+`) {
                    xTexelR`+Sp+"C"+(yp+2)+` = getX(batch, xR, xCOffset, d1);
                  }
                `,hp>1&&(xp+=`
                    xCOffset -= 2;
                    if(xR >= 0 && xR < `+sp+` &&
                      xCOffset >= 0 && xCOffset < `+lp+`) {
                      xTexelR`+Sp+"C"+yp+` = getX(batch, xR, xCOffset, d1);
                    } else {
                      xTexelR`+Sp+"C"+yp+` = vec4(0.);
                    }
                  `),xp+=`
                  xR`+Sp+"C"+(yp+1)+` = vec4(
                    xTexelR`+Sp+"C"+yp+".zw, xTexelR"+Sp+"C"+(yp+2)+`.xy);
                `):xp+=`
                  xCOffset = xC + `+Ep+`;

                  if(xR >= 0 && xR < `+sp+` &&
                    xCOffset >= 0 && xCOffset < `+lp+`) {
                    xTexelR`+Sp+"C"+(yp+2)+` = getX(batch, xR, xCOffset, d1);
                  }

                  xR`+Sp+"C"+(yp+1)+" = xTexelR"+Sp+"C"+(yp+2)+`;
                `}}else yp<gp&&(xp+=`
              if(xR >= 0 && xR < `+sp+`) {
            `,cp%2==1?(xp+=`
                xCOffset = xC + 1 - `+fp+`;
                if(xCOffset >= 0 && xCOffset < `+lp+`) {
                  xTexelR`+Sp+"C"+yp+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+Sp+"C"+yp+` = vec4(0.);
                }

                if(xC + 1 >= 0 && xC + 1 < `+lp+`) {
                  xTexelR`+Sp+"C"+(yp+2)+` = getX(batch, xR, xC + 1, d1);
                } else {
                  xTexelR`+Sp+"C"+(yp+2)+` = vec4(0.);
                }

                xR`+Sp+"C"+yp+` = vec4(
                  xTexelR`+Sp+"C"+yp+".zw, xTexelR"+Sp+"C"+(yp+2)+`.zw);
              `,yp+1<gp&&(xp+=`
                  vec4 final = vec4(0.);
                  xCOffset = xC + 1 + `+fp+`;
                  if(xCOffset >= 0 && xCOffset < `+lp+`) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xR`+Sp+"C"+(yp+1)+" = vec4(xTexelR"+Sp+"C"+(yp+2)+`.xy, final.xy);
                `)):(xp+=`
                if(xC >= 0 && xC < `+lp+`) {
                  xTexelR`+Sp+"C"+yp+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+Sp+"C"+yp+` = vec4(0.);
                }

                xCOffset = xC + `+fp+`;
                if(xCOffset >= 0 && xCOffset < `+lp+`) {
                  xTexelR`+Sp+"C"+(yp+2)+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+Sp+"C"+(yp+2)+` = vec4(0.);
                }

                xR`+Sp+"C"+yp+` = vec4(
                  xTexelR`+Sp+"C"+yp+".xy, xTexelR"+Sp+"C"+(yp+2)+`.xy);
              `,yp+1<gp&&(xp+=`
                  xR`+Sp+"C"+(yp+1)+` = vec4(
                    xTexelR`+Sp+"C"+yp+".zw, xTexelR"+Sp+"C"+(yp+2)+`.zw);
                `)),xp+="}");yp<gp&&(xp+=`
            vec4 wTexelR`+Sp+"C"+yp+" = getW("+Sp+", "+yp+`, d1, q);
            wR`+Sp+"C"+yp+" = vec4(wTexelR"+Sp+"C"+yp+".xz, wTexelR"+Sp+"C"+yp+`.xz);
          `,yp+1<gp&&(xp+=`
              vec4 wTexelR`+Sp+"C"+(yp+1)+" = getW("+Sp+", "+(yp+1)+`, d1, q);
              wR`+Sp+"C"+(yp+1)+` =
                vec4(wTexelR`+Sp+"C"+(yp+1)+".xz, wTexelR"+Sp+"C"+(yp+1)+".xz);"))}for(Sp=0;Sp<mp;Sp++)for(yp=0;yp<gp;yp++)xp+="dotProd += xR"+Sp+"C"+yp+" * wR"+Sp+"C"+yp+";";var wp="",_p="";np&&(wp=ap?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+np+`
        }`:`vec4 activation(vec4 x) {
          `+np+`
        }`,_p="result = activation(result);");var Rp=rp?"result += getBiasAtOutCoords();":"";rp&&this.variableNames.push("bias"),ap&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+wp+`

      const ivec2 strides = ivec2(`+dp+", "+fp+`);
      const ivec2 pads = ivec2(`+up+", "+cp+`);

      void main() {

        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2;
        int q = 0;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        vec4 dotProd = vec4(0.);

        `+xp+`

        vec4 result = dotProd;
        `+Rp+`
        `+_p+`
        setOutput(result);
      }
    `}}(),Wa=function(){return function(_d,rp,np,ap,sp){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var lp=_d[0],up=_d[1],cp=_d[2],dp=_d[3],fp=rp[0],pp=np[0],hp=np[1];this.outputShape=[fp,pp,hp,dp];var mp=ap==="bilinear"?1:0,gp=[up-1+".0",cp-1+".0"],vp=gp[0],xp=gp[1],Sp=pp>1?[""+(up-1)/(pp-1),"(y2-y1) * height_ratio","y1*"+vp+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+vp],yp=Sp[0],bp=Sp[1],Ep=Sp[2],wp=hp>1?[""+(cp-1)/(hp-1),"(x2-x1) * width_ratio","x1*"+xp+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+xp],_p=wp[0],Rp=wp[1],$p=wp[2];this.userCode=`
      const float height_ratio = float(`+yp+`);
      const float width_ratio = float(`+_p+`);
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= `+lp+`) {
          return;
        }

        float height_scale = `+bp+`;
        float width_scale = `+Rp+`;

        float in_y = `+Ep+`;
        if( in_y < 0.0 || in_y > `+vp+` ) {
          setOutput(float(`+sp+`));
          return;
        }
        float in_x = `+$p+`;
        if( in_x < 0.0 || in_x > `+xp+` ) {
          setOutput(float(`+sp+`));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(`+mp+` == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}(),Ua=function(){return function(_d,rp,np){this.variableNames=["x"],this.outputShape=_d;var ap=_d.length,sp=_d[_d.length-1],lp=np?"<":">";this.userCode=`
      int getIndex(int i) {
        `+(np?"return "+sp+" -i - 1;":"return i;")+`
      }

      void main() {
        `+aa(ap)+` coords = getOutputCoords();
        int end = `+Va(ap,"coords")+`;
        float val = 0.0;
        for (int i = `+sp+` - 1; i >= 0; i -= 1) {
          int idx = getIndex(i);
          if (idx `+lp+` end) {
            continue;
          }
          if (idx == end && `+rp+`) {
            continue;
          }
          `+Va(ap,"coords")+` = idx;
          val += getX(`+function(up,cp){if(up===1)return""+cp;if(up===2)return cp+".x, "+cp+".y";if(up===3)return cp+".x, "+cp+".y, "+cp+".z";if(up===4)return cp+".x, "+cp+".y, "+cp+".z, "+cp+".w";throw Error("Cumulative sum for rank "+up+" is not yet supported")}(ap,"coords")+`);
        }
        setOutput(val);
      }
    `}}();function Va(_d,rp){if(_d===1)return""+rp;if(_d===2)return rp+".y";if(_d===3)return rp+".z";if(_d===4)return rp+".w";throw Error("Cumulative sum for rank "+_d+" is not yet supported")}var za=function(){return function(_d){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=_t.DENSE;var rp=Gt(_d),np=Ko();this.outputShape=_d,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+jo(["r","c","d"],_d)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+rp[0]+", "+rp[1]+`));
        int index = 4 * (resTexRC.x * `+rp[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        `+np.output+` = result;
      }
    `}}(),Ga=function(){return function(_d){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=_t.DENSE;var rp=Gt(_d),np=Ko();this.outputShape=_d,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+jo(["r","c","d"],_d)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+rp[0]+", "+rp[1]+`));
        int index = 4 * (resTexRC.x * `+rp[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        `+np.output+` = result;
      }
    `}}(),Ha=function(){function _d(rp,np,ap){this.variableNames=["x"],this.outputShape=[],this.outputShape=rp,this.blockSize=np,this.dataFormat=ap,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = `+this.getHeightCoordString()+`;
      int w = `+this.getWidthCoordString()+`;
      int d = `+this.getDepthCoordString()+`;

      int in_h = h / `+np+`;
      int offset_h = imod(h, `+np+`);
      int in_w = w / `+np+`;
      int offset_w = imod(w, `+np+`);
      int offset_d = (offset_h * `+np+` + offset_w) *
        `+this.getOutputDepthSize()+`;
      int in_d = d + offset_d;

      float result = `+this.getInputSamplingString()+`;
      setOutput(result);
    }
  `}return _d.prototype.getHeightCoordString=function(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"},_d.prototype.getWidthCoordString=function(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"},_d.prototype.getDepthCoordString=function(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"},_d.prototype.getOutputDepthSize=function(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]},_d.prototype.getInputSamplingString=function(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},_d}(),qa=function(){return function(_d){this.variableNames=["X"],this.outputShape=[_d,_d],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}(),Ka=function(){return function(_d){this.variableNames=["A"],this.outTexUsage=Mt.DOWNLOAD;var rp=Ko();this.outputShape=_d,this.userCode=`
      `+$o+`

      void main() {
        float x = getAAtOutCoords();
        `+rp.output+` = encode_float(x);
      }
    `}}(),ja=function(){return function(_d){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=Mt.DOWNLOAD;var rp=Ko();this.outputShape=_d,this.userCode=`
      `+$o+`

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        `+rp.output+` = encode_float(x);
      }
    `}}(),Xa=function(){return function(_d,rp,np){np===void 0&&(np=!1),this.variableNames=["A"];var ap=Ko(),sp=rp[0],lp=rp[1];this.outputShape=_d;var up="result";np&&(up="floor(result * 255. + 0.5)"),this.userCode=`
      `+Xo(_d)+`

      void main() {
        ivec3 coords = getOutputCoords();

        int flatIndex = getFlatIndex(coords);
        int offset = imod(flatIndex, 4);

        flatIndex = idiv(flatIndex, 4, 1.);
        
        int r = flatIndex / `+lp+`;
        int c = imod(flatIndex, `+lp+`);
        vec2 uv = (vec2(c, r) + halfCR) / vec2(`+lp+".0, "+sp+`.0);
        vec4 values = `+ap.texture2D+`(A, uv);

        float result;

        if(offset == 0) {
          result = values[0];
        } else if(offset == 1) {
          result = values[1];
        } else if(offset == 2) {
          result = values[2];
        } else {
          result = values[3];
        }

        `+ap.output+" = vec4("+up+`, 0., 0., 0.);
      }
    `}}(),$a=function(){return function(_d,rp,np){np===void 0&&(np=!1),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var ap=Ko(),sp=rp[0],lp=rp[1];this.outputShape=_d;var up="",cp="result";np&&(cp="floor(result * 255. + 0.5)");for(var dp=0;dp<=1;dp++)for(var fp=0;fp<=1;fp++){var pp=2*dp+fp;up+=`
          localCoords = coords;
          if(localCoords[2] + `+fp+" < "+_d[2]+`) {
            localCoords[2] += `+fp+`;
            if(localCoords[1] + `+dp+" < "+_d[1]+`) {
              localCoords[1] += `+dp+`;

              flatIndex = getFlatIndex(localCoords);
              offset = imod(flatIndex, 4);

              flatIndex = idiv(flatIndex, 4, 1.);

              r = flatIndex / `+lp+`;
              c = imod(flatIndex, `+lp+`);
              uv = (vec2(c, r) + halfCR) / vec2(`+lp+".0, "+sp+`.0);
              values = `+ap.texture2D+`(A, uv);

              if(offset == 0) {
                result[`+pp+`] = values[0];
              } else if(offset == 1) {
                result[`+pp+`] = values[1];
              } else if(offset == 2) {
                result[`+pp+`] = values[2];
              } else {
                result[`+pp+`] = values[3];
              }
            }
          }
        `}this.userCode=`
      `+Xo(_d)+`

      void main() {
        ivec3 coords = getOutputCoords();

        vec4 result = vec4(0.);
        int flatIndex, r, c, offset;
        ivec3 localCoords;
        vec2 uv;
        vec4 values;

        `+up+`

        `+ap.output+" = "+cp+`;
      }
    `}}(),Ya="return real * expR - imag * expI;",Qa="return real * expI + imag * expR;",Ja=function(){return function(_d,rp,np){this.variableNames=["real","imag"];var ap=rp[1];this.outputShape=rp;var sp=np?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,lp=np?ap+".0":"1.0";this.userCode=`
      const float exponentMultiplier = `+sp+`;

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        `+_d+`
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(`+ap+`);
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < `+ap+`; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / `+lp+`;
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}(),Za=function(){function _d(rp,np){this.outputShape=[],this.variableNames=["x"],this.outputShape=rp,this.userCode=`
      uniform float value;
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}return _d.prototype.getCustomSetupFunc=function(rp){var np=this;return function(ap,sp){np.valueLoc==null&&(np.valueLoc=ap.getUniformLocationNoThrow(sp,"value")),ap.gl.uniform1f(np.valueLoc,rp)}},_d}(),ti=function(){return function(_d){this.variableNames=["A"];var rp=Ko(),np=_d[0],ap=_d[1];this.outputShape=_d,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+ap+".0, "+np+`.0);

        vec4 values = `+rp.texture2D+`(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}(),ei=function(){return function(_d){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var rp=Ko(),np=_d[0],ap=_d[1];this.outputShape=_d,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(`+ap+".0, "+np+`.0);
            vec4 values = `+rp.texture2D+`(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        `+rp.output+` = result;
      }
    `}}(),ni=function(){return function(_d,rp,np){this.variableNames=["A","indices"];var ap=_d.slice();ap[np]=rp,this.outputShape=ap,this.rank=ap.length;var sp=aa(this.rank),lp=function(up,cp){var dp=up.length;if(dp>4)throw Error("Gather for rank "+dp+" is not yet supported");if(dp===1)return"int(getIndices(resRC))";for(var fp=["resRC.x","resRC.y","resRC.z","resRC.w"],pp=[],hp=0;hp<up.length;hp++)hp===cp?pp.push("int(getIndices("+fp[hp]+"))"):pp.push(""+fp[hp]);return pp.join()}(_d,np);this.userCode=`
      void main() {
        `+sp+` resRC = getOutputCoords();
        setOutput(getA(`+lp+`));
      }
    `}}(),ri=function(){return function(_d,rp,np){this.sliceDim=_d,this.strides=rp,this.variableNames=["x","indices"],this.outputShape=np;var ap=aa(rp.length),sp=aa(np.length),lp=this.sliceDim>1?"strides[j]":"strides";this.userCode=`
        `+ap+" strides = "+ap+"("+this.strides+`);
         void main() {
          `+sp+` coords = getOutputCoords();
          int flattenIndex = 0;
          for (int j = 0; j < `+this.sliceDim+`; j++) {
            int index = round(getIndices(coords[0], j));
            flattenIndex += index * `+lp+`;
          }
          setOutput(getX(flattenIndex, coords[1]));
        }
      `}}();function oi(_d,rp){var np=Ko();return Jt(_d,rp,np.version+`
    precision highp float;
    `+np.attribute+` vec3 clipSpacePos;
    `+np.attribute+` vec2 uv;
    `+np.varyingVs+` vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`)}function ai(_d,rp){return ie(_d,rp,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function ii(_d,rp){return ue(_d,rp,new Uint16Array([0,1,2,2,1,3]))}function ui(_d,rp,np,ap,sp,lp,up){ce(np,ap);var cp=se(_d,rp),dp=_d.TEXTURE_2D;return Kt(_d,rp,function(){return _d.bindTexture(dp,cp)}),Kt(_d,rp,function(){return _d.texParameteri(dp,_d.TEXTURE_WRAP_S,_d.CLAMP_TO_EDGE)}),Kt(_d,rp,function(){return _d.texParameteri(dp,_d.TEXTURE_WRAP_T,_d.CLAMP_TO_EDGE)}),Kt(_d,rp,function(){return _d.texParameteri(dp,_d.TEXTURE_MIN_FILTER,_d.NEAREST)}),Kt(_d,rp,function(){return _d.texParameteri(dp,_d.TEXTURE_MAG_FILTER,_d.NEAREST)}),Kt(_d,rp,function(){return _d.texImage2D(dp,0,sp,np,ap,0,lp,up,null)}),Kt(_d,rp,function(){return _d.bindTexture(_d.TEXTURE_2D,null)}),cp}function si(_d,rp,np,ap,sp){var lp=zt(np,ap);return ui(_d,rp,lp[0],lp[1],sp.internalFormatFloat,sp.textureFormatFloat,_d.FLOAT)}function ci(_d,rp,np,ap,sp){var lp=zt(np,ap);return ui(_d,rp,lp[0],lp[1],sp.internalFormatHalfFloat,sp.textureFormatFloat,sp.textureTypeHalfFloat)}function li(_d,rp,np,ap,sp){var lp=zt(np,ap);return ui(_d,rp,lp[0],lp[1],_d.RGBA,_d.RGBA,_d.UNSIGNED_BYTE)}function hi(_d,rp,np,ap,sp){var lp=Ht(np,ap);return ui(_d,rp,lp[0],lp[1],sp.internalFormatPackedFloat,_d.RGBA,_d.FLOAT)}function fi(_d,rp,np,ap,sp){var lp=Ht(np,ap);return ui(_d,rp,lp[0],lp[1],sp.internalFormatPackedHalfFloat,_d.RGBA,sp.textureTypeHalfFloat)}function pi(_d,rp,np,ap){return Kt(_d,rp,function(){return _d.bindBuffer(_d.ARRAY_BUFFER,ap)}),he(_d,rp,np,"clipSpacePos",ap,3,20,0)&&he(_d,rp,np,"uv",ap,2,20,12)}function di(_d,rp,np,ap,sp,lp,up){var cp,dp,fp;Kt(_d,rp,function(){return _d.bindTexture(_d.TEXTURE_2D,np)}),lp instanceof Uint8Array?(cp=new Uint8Array(ap*sp*4),dp=_d.UNSIGNED_BYTE,fp=_d.RGBA):(cp=new Float32Array(ap*sp*4),dp=_d.FLOAT,fp=up.internalFormatPackedFloat),cp.set(lp),Kt(_d,rp,function(){return _d.texImage2D(_d.TEXTURE_2D,0,fp,ap,sp,0,_d.RGBA,dp,cp)}),Kt(_d,rp,function(){return _d.bindTexture(_d.TEXTURE_2D,null)})}function vi(_d,rp,np,ap){Kt(_d,rp,function(){return _d.bindTexture(_d.TEXTURE_2D,np)}),ap.data instanceof Uint8Array?Kt(_d,rp,function(){return _d.texImage2D(_d.TEXTURE_2D,0,_d.RGBA,ap.width,ap.height,0,_d.RGBA,_d.UNSIGNED_BYTE,ap.data)}):Kt(_d,rp,function(){return _d.texImage2D(_d.TEXTURE_2D,0,_d.RGBA,_d.RGBA,_d.UNSIGNED_BYTE,ap)}),Kt(_d,rp,function(){return _d.bindTexture(_d.TEXTURE_2D,null)})}function mi(_d,rp,np,ap,sp){var lp=_d.createBuffer();Kt(_d,rp,function(){return _d.bindBuffer(_d.PIXEL_PACK_BUFFER,lp)});var up=16*np*ap;return Kt(_d,rp,function(){return _d.bufferData(_d.PIXEL_PACK_BUFFER,up,_d.STREAM_READ)}),Kt(_d,rp,function(){return _d.readPixels(0,0,ap,np,_d.RGBA,_d.FLOAT,0)}),Kt(_d,rp,function(){return _d.bindBuffer(_d.PIXEL_PACK_BUFFER,null)}),lp}function gi(_d,rp,np){var ap=_d,sp=new Float32Array(np);return ap.bindBuffer(ap.PIXEL_PACK_BUFFER,rp),ap.getBufferSubData(ap.PIXEL_PACK_BUFFER,0,sp),ap.bindBuffer(ap.PIXEL_PACK_BUFFER,null),sp}function yi(_d,rp,np,ap,sp){var lp=zt(np,ap),up=lp[0],cp=lp[1],dp=new Uint8Array(np*ap*4);return Kt(_d,rp,function(){return _d.readPixels(0,0,up,cp,sp.downloadTextureFormat,_d.UNSIGNED_BYTE,dp)}),new Float32Array(dp.buffer)}function xi(_d,rp,np,ap,sp,lp,up,cp){var dp=_d,fp=new Float32Array(function(pp,hp){var mp=Ht(pp,hp);return mp[0]*mp[1]*4}(lp,up));return dp.bindBuffer(dp.PIXEL_PACK_BUFFER,rp),dp.getBufferSubData(dp.PIXEL_PACK_BUFFER,0,fp),dp.bindBuffer(dp.PIXEL_PACK_BUFFER,null),fp}function bi(_d,rp,np,ap){var sp=new Float32Array(np*ap*4);return Kt(_d,rp,function(){return _d.readPixels(0,0,ap,np,_d.RGBA,_d.FLOAT,sp)}),sp}var wi=Object.freeze({createVertexShader:oi,createVertexBuffer:ai,createIndexBuffer:ii,createFloat32MatrixTexture:si,createFloat16MatrixTexture:ci,createUnsignedBytesMatrixTexture:li,createPackedMatrixTexture:hi,createFloat16PackedMatrixTexture:fi,bindVertexProgramAttributeStreams:pi,uploadDenseMatrixToTexture:di,uploadPixelDataToTexture:vi,createBufferFromOutputTexture:mi,downloadFloat32MatrixFromBuffer:gi,downloadByteEncodedFloatMatrixFromOutputTexture:yi,downloadPackedMatrixFromBuffer:xi,downloadMatrixFromPackedOutputTexture:bi}),Ci=function(){function _d(rp){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var np=a$1().getNumber("WEBGL_VERSION");if(rp!=null?(this.gl=rp,Wt(np,rp)):this.gl=Ut(np),a$1().getNumber("WEBGL_VERSION")===1)this.textureFloatExtension=Qt(this.gl,this.debug,"OES_texture_float"),this.colorBufferFloatExtension=this.gl.getExtension("WEBGL_color_buffer_float"),this.textureHalfFloatExtension=Qt(this.gl,this.debug,"OES_texture_half_float"),this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float");else if(Ne(this.gl,"EXT_color_buffer_float"))this.colorBufferFloatExtension=this.gl.getExtension("EXT_color_buffer_float");else{if(!Ne(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=ai(this.gl,this.debug),this.indexBuffer=ii(this.gl,this.debug),this.framebuffer=le(this.gl,this.debug),this.textureConfig=qt(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(_d.prototype,"debug",{get:function(){return a$1().getBool("DEBUG")},enumerable:!0,configurable:!0}),_d.prototype.dispose=function(){var rp=this;if(!this.disposed){this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var np=this.gl;Kt(np,this.debug,function(){return np.finish()}),Kt(np,this.debug,function(){return np.bindFramebuffer(np.FRAMEBUFFER,null)}),Kt(np,this.debug,function(){return np.deleteFramebuffer(rp.framebuffer)}),Kt(np,this.debug,function(){return np.bindBuffer(np.ARRAY_BUFFER,null)}),Kt(np,this.debug,function(){return np.bindBuffer(np.ELEMENT_ARRAY_BUFFER,null)}),Kt(np,this.debug,function(){return np.deleteBuffer(rp.indexBuffer)}),this.disposed=!0}},_d.prototype.createFloat32MatrixTexture=function(rp,np){return this.throwIfDisposed(),si(this.gl,this.debug,rp,np,this.textureConfig)},_d.prototype.createFloat16MatrixTexture=function(rp,np){return this.throwIfDisposed(),ci(this.gl,this.debug,rp,np,this.textureConfig)},_d.prototype.createUnsignedBytesMatrixTexture=function(rp,np){return this.throwIfDisposed(),li(this.gl,this.debug,rp,np,this.textureConfig)},_d.prototype.uploadPixelDataToTexture=function(rp,np){this.throwIfDisposed(),vi(this.gl,this.debug,rp,np)},_d.prototype.uploadDenseMatrixToTexture=function(rp,np,ap,sp){this.throwIfDisposed(),di(this.gl,this.debug,rp,np,ap,sp,this.textureConfig)},_d.prototype.createFloat16PackedMatrixTexture=function(rp,np){return this.throwIfDisposed(),fi(this.gl,this.debug,rp,np,this.textureConfig)},_d.prototype.createPackedMatrixTexture=function(rp,np){return this.throwIfDisposed(),hi(this.gl,this.debug,rp,np,this.textureConfig)},_d.prototype.deleteMatrixTexture=function(rp){var np=this;this.throwIfDisposed(),this.outputTexture===rp&&(ge(this.gl,this.debug,this.framebuffer),this.outputTexture=null),Kt(this.gl,this.debug,function(){return np.gl.deleteTexture(rp)})},_d.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(rp,np,ap){var sp=this;return this.downloadMatrixDriver(rp,function(){return yi(sp.gl,sp.debug,np,ap,sp.textureConfig)})},_d.prototype.downloadPackedMatrixFromBuffer=function(rp,np,ap,sp,lp,up){return xi(this.gl,rp,0,0,0,lp,up,this.textureConfig)},_d.prototype.downloadFloat32MatrixFromBuffer=function(rp,np){return gi(this.gl,rp,np)},_d.prototype.createBufferFromTexture=function(rp,np,ap){this.bindTextureToFrameBuffer(rp);var sp=mi(this.gl,this.debug,np,ap,this.textureConfig);return this.unbindTextureToFrameBuffer(),sp},_d.prototype.createAndWaitForFence=function(){var rp=this.createFence(this.gl);return this.pollFence(rp)},_d.prototype.createFence=function(rp){var np,ap,sp=this;if(a$1().getBool("WEBGL_FENCE_API_ENABLED")){var lp=rp,up=lp.fenceSync(lp.SYNC_GPU_COMMANDS_COMPLETE,0);rp.flush(),ap=function(){var cp=lp.clientWaitSync(up,0,0);return cp===lp.ALREADY_SIGNALED||cp===lp.CONDITION_SATISFIED},np=up}else a$1().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(np=this.beginQuery(),this.endQuery(),ap=function(){return sp.isQueryAvailable(np,a$1().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):ap=function(){return!0};return{query:np,isFencePassed:ap}},_d.prototype.downloadMatrixFromPackedTexture=function(rp,np,ap){var sp=this;return this.downloadMatrixDriver(rp,function(){return bi(sp.gl,sp.debug,np,ap)})},_d.prototype.createProgram=function(rp){this.throwIfDisposed();var np=this.gl,ap=Zt(np,this.debug,rp),sp=oi(np,this.debug),lp=re$2(np,this.debug);return Kt(np,this.debug,function(){return np.attachShader(lp,sp)}),Kt(np,this.debug,function(){return np.attachShader(lp,ap)}),oe(np,this.debug,lp),this.debug&&ae(np,this.debug,lp),this.vertexAttrsAreBound||(this.setProgram(lp),this.vertexAttrsAreBound=pi(np,this.debug,this.program,this.vertexBuffer)),lp},_d.prototype.deleteProgram=function(rp){var np=this;this.throwIfDisposed(),rp===this.program&&(this.program=null),rp!=null&&Kt(this.gl,this.debug,function(){return np.gl.deleteProgram(rp)})},_d.prototype.setProgram=function(rp){var np=this;this.throwIfDisposed(),this.program=rp,this.program!=null&&this.debug&&ae(this.gl,this.debug,this.program),Kt(this.gl,this.debug,function(){return np.gl.useProgram(rp)})},_d.prototype.getUniformLocation=function(rp,np,ap){return ap===void 0&&(ap=!0),this.throwIfDisposed(),ap?pe(this.gl,this.debug,rp,np):de(this.gl,rp,np)},_d.prototype.getAttributeLocation=function(rp,np){var ap=this;return this.throwIfDisposed(),Kt(this.gl,this.debug,function(){return ap.gl.getAttribLocation(rp,np)})},_d.prototype.getUniformLocationNoThrow=function(rp,np){return this.throwIfDisposed(),this.gl.getUniformLocation(rp,np)},_d.prototype.setInputMatrixTexture=function(rp,np,ap){this.throwIfDisposed(),this.throwIfNoProgram(),ve(this.gl,this.debug,this.program,rp,np,ap)},_d.prototype.setOutputMatrixTexture=function(rp,np,ap){this.setOutputMatrixTextureDriver(rp,ap,np)},_d.prototype.setOutputPackedMatrixTexture=function(rp,np,ap){this.throwIfDisposed();var sp=Ht(np,ap),lp=sp[0],up=sp[1];this.setOutputMatrixTextureDriver(rp,lp,up)},_d.prototype.setOutputMatrixWriteRegion=function(rp,np,ap,sp){this.setOutputMatrixWriteRegionDriver(ap,rp,sp,np)},_d.prototype.setOutputPackedMatrixWriteRegion=function(rp,np,ap,sp){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},_d.prototype.debugValidate=function(){this.program!=null&&ae(this.gl,this.debug,this.program),ye(this.gl)},_d.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var rp=this.gl;this.debug&&this.debugValidate(),Kt(rp,this.debug,function(){return rp.drawElements(rp.TRIANGLES,6,rp.UNSIGNED_SHORT,0)})},_d.prototype.blockUntilAllProgramsCompleted=function(){var rp=this;this.throwIfDisposed(),Kt(this.gl,this.debug,function(){return rp.gl.finish()})},_d.prototype.getQueryTimerExtension=function(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=Qt(this.gl,this.debug,a$1().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},_d.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},_d.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},_d.prototype.beginQuery=function(){if(a$1().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){var rp=this.gl,np=this.getQueryTimerExtensionWebGL2(),ap=rp.createQuery();return rp.beginQuery(np.TIME_ELAPSED_EXT,ap),ap}var sp=this.getQueryTimerExtensionWebGL1(),lp=sp.createQueryEXT();return sp.beginQueryEXT(sp.TIME_ELAPSED_EXT,lp),lp},_d.prototype.endQuery=function(){if(a$1().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")!==2){var rp=this.getQueryTimerExtensionWebGL1();rp.endQueryEXT(rp.TIME_ELAPSED_EXT)}else{var np=this.gl,ap=this.getQueryTimerExtensionWebGL2();np.endQuery(ap.TIME_ELAPSED_EXT)}},_d.prototype.waitForQueryAndGetTime=function(rp){return n$1(this,void 0,void 0,function(){var np=this;return r(this,function(ap){switch(ap.label){case 0:return[4,S(function(){return np.disposed||np.isQueryAvailable(rp,a$1().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))})];case 1:return ap.sent(),[2,this.getQueryTime(rp,a$1().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}})})},_d.prototype.getQueryTime=function(rp,np){if(np===0)return null;if(np===2){var ap=this.gl;return ap.getQueryParameter(rp,ap.QUERY_RESULT)/1e6}var sp=this.getQueryTimerExtensionWebGL1();return sp.getQueryObjectEXT(rp,sp.QUERY_RESULT_EXT)/1e6},_d.prototype.isQueryAvailable=function(rp,np){if(np===0)return!0;if(np===2){var ap=this.gl,sp=this.getQueryTimerExtensionWebGL2(),lp=ap.getQueryParameter(rp,ap.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(sp.GPU_DISJOINT_EXT)),lp&&!this.disjoint}return lp=(sp=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(rp,sp.QUERY_RESULT_AVAILABLE_EXT),this.disjoint==null&&(this.disjoint=this.gl.getParameter(sp.GPU_DISJOINT_EXT)),lp&&!this.disjoint},_d.prototype.pollFence=function(rp){var np=this;return new Promise(function(ap){np.addItemToPoll(function(){return rp.isFencePassed()},function(){return ap()})})},_d.prototype.pollItems=function(){for(var rp=function(ap){for(var sp=0;sp<ap.length;++sp){var lp=ap[sp]();if(!lp)break}return sp-1}(this.itemsToPoll.map(function(ap){return ap.isDoneFn})),np=0;np<=rp;++np)(0,this.itemsToPoll[np].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(rp+1)},_d.prototype.addItemToPoll=function(rp,np){var ap=this;this.itemsToPoll.push({isDoneFn:rp,resolveFn:np}),this.itemsToPoll.length>1||S(function(){return ap.pollItems(),ap.itemsToPoll.length===0})},_d.prototype.bindTextureToFrameBuffer=function(rp){this.throwIfDisposed(),me(this.gl,this.debug,rp,this.framebuffer),this.debug&&ye(this.gl)},_d.prototype.unbindTextureToFrameBuffer=function(){this.outputTexture!=null?(me(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&ye(this.gl)):ge(this.gl,this.debug,this.framebuffer)},_d.prototype.downloadMatrixDriver=function(rp,np){this.bindTextureToFrameBuffer(rp);var ap=np();return this.unbindTextureToFrameBuffer(),ap},_d.prototype.setOutputMatrixTextureDriver=function(rp,np,ap){this.throwIfDisposed();var sp=this.gl;me(sp,this.debug,rp,this.framebuffer),this.debug&&ye(sp),this.outputTexture=rp,Kt(sp,this.debug,function(){return sp.viewport(0,0,np,ap)}),Kt(sp,this.debug,function(){return sp.scissor(0,0,np,ap)})},_d.prototype.setOutputMatrixWriteRegionDriver=function(rp,np,ap,sp){var lp=this;this.throwIfDisposed(),Kt(this.gl,this.debug,function(){return lp.gl.scissor(rp,np,ap,sp)})},_d.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},_d.prototype.throwIfNoProgram=function(){if(this.program==null)throw new Error("No GPU program is currently set.")},_d}();function Ei(_d,rp){if(_d.length!==rp.length)throw Error("Binary was compiled with "+_d.length+" inputs, but was executed with "+rp.length+" inputs");_d.forEach(function(np,ap){var sp=np.logicalShape,lp=rp[ap],up=lp.shape;if(!C(sp,up))throw Error("Binary was compiled with different shapes than the current args. Shapes "+sp+" and "+up+" must match");if(!np.isUniform||!lp.isUniform){var cp=np.texShape,dp=lp.isUniform?null:lp.texData.texShape;if(!C(cp,dp))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+cp+" and "+dp+" must match")}})}var Ri=function(){return function(_d,rp,np){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=_d;for(var ap=np.filterWidth,sp=np.inChannels,lp=np.strideWidth,up=np.strideHeight,cp=np.padInfo,dp=np.outWidth,fp=np.dilationWidth,pp=np.dilationHeight,hp=np.dataFormat,mp=cp.left,gp=cp.top,vp=sp*ap,xp=Ko(),Sp=hp==="channelsLast",yp=Sp?0:1,bp=Sp?1:2,Ep="",wp=0;wp<=1;wp++)for(var _p=0;_p<=1;_p++)Ep+=`
          blockIndex = rc.y + `+_p+`;
          pos = rc.x + `+wp+`;

          if(blockIndex < `+_d[1]+" && pos < "+_d[0]+`) {
            offsetY = int(blockIndex / (`+dp+")) * "+up+" - "+gp+`;
            d0 = offsetY + `+pp+" * (pos / "+vp+`);

            if(d0 < `+rp[yp]+` && d0 >= 0) {

              offsetX = int(mod(float(blockIndex), `+dp+".) * "+lp+". - "+mp+`.);
              d1 = offsetX + `+fp+" * (int(mod(float(pos), "+vp+".) / "+sp+`.));

              if(d1 < `+rp[bp]+` && d1 >= 0) {

                ch = int(mod(float(pos), `+sp+`.));

                if (`+Sp+`) {
                  innerDims = vec2(d1, ch);
                  result[`+(2*wp+_p)+`] = getChannel(
                    getA(d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[`+(2*wp+_p)+`] = getChannel(
                    getA(ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec2 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        `+Ep+`

        `+xp.output+` = result;
      }
    `}}(),Ii=function(){return function(_d,rp,np,ap,sp){this.variableNames=["x"],this.outputShape=[];var lp,up=rp,cp=_d[3]-1;this.outputShape=_d;var dp="float("+np+") + float("+ap+") * sum";lp=sp===.5?"inversesqrt("+dp+")":sp===1?"1.0/("+dp+")":"exp(log("+dp+") * float(-"+sp+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -`+up+"; j <= "+up+`; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  `+cp+`) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * `+lp+`;
        setOutput(val);
      }
    `}}(),ki=function(){return function(_d,rp,np,ap,sp){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=_d,this.depth=_d[3],this.depthRadius=rp,this.bias=np,this.alpha=ap,this.beta=sp,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < `+this.depth+`; ++d) {
          int depthBegin = int(max(0.0, float(d - `+rp+`)));
          int depthEnd = int(min(float(`+this.depth+`),
              float(d + `+rp+` + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = `+this.depth+`;

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(`+ap+") * norm + float("+np+`);

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(`+ap+`)
                * float(`+sp+`)
                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * `+sp+`);
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}(),Si=function(){return function(_d,rp,np,ap,sp){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var lp,up=rp,cp=_d[3]-1;this.outputShape=_d;var dp="float("+np+") + float("+ap+") * sum";lp=sp===.5?"inversesqrt("+dp+")":sp===1?"1.0/("+dp+")":"exp(log("+dp+") * float(-"+sp+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < `+this.outputShape[3]+`;
        bool hasNextRow = c < `+this.outputShape[2]+`;

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - `+up+`;
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - `+up+"; j <= "+up+`; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(`+cp+`));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * `+lp+`;
        setOutput(result);
      }
    `}}(),Ai=function(){return function(_d){this.variableNames=["dy","maxPos"],this.outputShape=_d.inShape;var rp=_d.strideHeight,np=_d.strideWidth,ap=_d.dilationHeight,sp=_d.effectiveFilterHeight,lp=_d.effectiveFilterWidth,up=sp-1-_d.padInfo.top,cp=lp-1-_d.padInfo.left,dp=sp*lp-1;this.userCode=`
      const ivec2 pads = ivec2(`+up+", "+cp+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+sp+`;
          wR += `+ap+`) {
          float dyR = float(dyRCorner + wR) / `+rp+`.0;

          if (dyR < 0.0 || dyR >= `+_d.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+lp+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+np+`.0;

            if (dyC < 0.0 || dyC >= `+_d.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = `+dp+` - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * `+lp+` + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}(),Di=function(){return function(_d){this.variableNames=["dy","maxPos"],this.outputShape=_d.inShape;var rp=_d.strideDepth,np=_d.strideHeight,ap=_d.strideWidth,sp=_d.dilationDepth,lp=_d.dilationHeight,up=_d.dilationWidth,cp=_d.effectiveFilterDepth,dp=_d.effectiveFilterHeight,fp=_d.effectiveFilterWidth,pp=cp-1-_d.padInfo.front,hp=dp-1-_d.padInfo.top,mp=fp-1-_d.padInfo.left,gp=cp*dp*fp-1;this.userCode=`
      const ivec3 pads = ivec3(`+pp+", "+hp+", "+mp+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+cp+`;
           wD += `+sp+`) {
          float dyD = float(dyDCorner + wD) / `+rp+`.0;

          if (dyD < 0.0 || dyD >= `+_d.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+dp+`;
              wR += `+lp+`) {
            float dyR = float(dyRCorner + wR) / `+np+`.0;

            if (dyR < 0.0 || dyR >= `+_d.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+fp+`;
                wC += `+up+`) {
              float dyC = float(dyCCorner + wC) / `+ap+`.0;

              if (dyC < 0.0 || dyC >= `+_d.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = `+gp+` -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * `+dp+" * "+fp+` +
                  wR * `+fp+` + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}(),Ti=function(){return function(_d,rp,np,ap,sp,lp,up){np===void 0&&(np=!1),ap===void 0&&(ap=!1),sp===void 0&&(sp=!1),lp===void 0&&(lp=null),up===void 0&&(up=!1),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=rp;var cp=np?_d[1]:_d[2],dp=Math.ceil(cp/2),fp=np?"i * 2, rc.y":"rc.y, i * 2",pp=ap?"rc.z, i * 2":"i * 2, rc.z",hp=np?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],mp=ap?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],gp="",vp="";lp&&(gp=up?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+lp+`
        }`:`vec4 activation(vec4 x) {
          `+lp+`
        }`,vp="result = activation(result);");var xp=sp?"result += getBiasAtOutCoords();":"";sp&&this.variableNames.push("bias"),up&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+gp+`

      const float sharedDimension = `+dp+`.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        for (int i = 0; i < `+dp+`; i++) {
          vec4 a = getMatrixA(rc.x, `+fp+`);
          vec4 b = getMatrixB(rc.x, `+pp+`);

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (`+hp[0]+" * "+mp[0]+`);
          result += (`+hp[1]+" * "+mp[1]+`);
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        `+xp+`

        `+vp+`

        setOutput(result);
      }
    `}}(),Ni=function(){function _d(rp,np,ap){this.variableNames=["probs"],this.outputShape=[rp,ap],this.userCode=`
      uniform float seed;

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < `+(np-1)+`; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(`+(np-1)+`));
      }
    `}return _d.prototype.getCustomSetupFunc=function(rp){var np=this;return function(ap,sp){np.seedLoc==null&&(np.seedLoc=ap.getUniformLocation(sp,"seed")),ap.gl.uniform1f(np.seedLoc,rp)}},_d}(),Fi=function(){return function(_d,rp,np,ap){this.variableNames=["indices"],this.outputShape=[_d,rp],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(`+ap+"), float("+np+`),
                      float(index == coords.y)));
      }
    `}}(),Oi=function(){return function(_d){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=_d;var rp=_d.length;if(rp===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{var np=qo("rc",rp),ap=aa(rp),sp=function(cp,dp,fp){if(cp===1)return"rc > "+dp[0];for(var pp="",hp=cp-2;hp<cp;hp++)pp+=fp[hp]+" >= "+dp[hp],hp<cp-1&&(pp+="||");return pp}(rp,_d,np),lp=function(cp,dp,fp,pp){if(cp===1)return"";var hp=pp.slice(-2);return`
    int r = `+hp[0]+`;
    int c = `+hp[1]+`;
    int rp1 = r + 1;
    int cp1 = c + 1;

    bool cEdge = cp1 >= `+dp+`;
    bool rEdge = rp1 >= `+fp+`;
  `}(rp,_d[_d.length-1],_d[_d.length-2],np),up=function(cp,dp){var fp=cp.length,pp=function(hp,mp){for(var gp=[],vp=0;vp<=1;vp++)for(var xp=0;xp<=1;xp++){for(var Sp=(vp===0?"r":"rp1")+", "+(xp===0?"c":"cp1"),yp=2;yp<hp;yp++)Sp=mp[mp.length-1-yp]+","+Sp;gp.push(Sp)}return gp}(fp,dp);return fp===1?`getA(rc),
            rc + 1 >= `+cp[0]+` ? 0. : getA(rc + 1),
            0, 0`:"getA("+pp[0]+`),
          cEdge ? 0. : getA(`+pp[1]+`),
          rEdge ? 0. : getA(`+pp[2]+`),
          rEdge || cEdge ? 0. : getA(`+pp[3]+")"}(_d,np);this.userCode=`
        void main() {
          `+ap+` rc = getOutputCoords();

          if(`+sp+`) {
            setOutput(vec4(0));
          } else {
            `+lp+`

            setOutput(vec4(`+up+`));
          }
        }
      `}}}(),_i=function(){return function(_d,rp,np){this.variableNames=["x"],this.outputShape=rp.map(function(dp,fp){return dp[0]+_d[fp]+dp[1]});var ap=_d.length,sp=aa(ap),lp=rp.map(function(dp){return dp[0]}).join(","),up=rp.map(function(dp,fp){return dp[0]+_d[fp]}).join(","),cp=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,ap);this.userCode=ap!==1?`
      `+sp+" start = "+sp+"("+lp+`);
      `+sp+" end = "+sp+"("+up+`);

      void main() {
        `+sp+` outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(float(`+np+`));
        } else {
          `+sp+` coords = outC - start;
          setOutput(getX(`+cp+`));
        }
      }
    `:`
        int start = `+lp+`;
        int end = `+up+`;

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(float(`+np+`));
          } else {
            setOutput(getX(outC - start));
          }
        }
      `}}(),Mi=function(){return function(_d,rp,np){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=rp.map(function(Sp,yp){return Sp[0]+_d[yp]+Sp[1]});for(var ap=_d.length,sp=aa(ap),lp=rp.map(function(Sp){return Sp[0]}).join(","),up=rp.map(function(Sp,yp){return Sp[0]+_d[yp]}).join(","),cp=qo("rc",ap),dp=qo("source",ap),fp=cp[ap-1]+" < "+this.outputShape[ap-1],pp=ap===1?"source":"vec2("+dp.slice(-2).join()+")",hp=[sp+" rc = outputLoc;",cp[ap-1]+` += 1;
       if(`+fp+`) {
      `,ap===1?"":`}
       rc = outputLoc;
       `+cp[ap-2]+` += 1;
       if(`+cp[ap-2]+" < "+this.outputShape[ap-2]+") {",ap===1?"":"  "+cp[ap-1]+` += 1;
         if(`+fp+") {"],mp=ap===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",gp="",vp=0,xp=ap===1?2:4;vp<xp;vp++)gp+=`
        `+hp[vp]+`
        if (`+mp+`) {
          result[`+vp+"] = float("+np+`);
        } else {
          `+sp+` source = rc - start;
          result[`+vp+"] = getChannel(getX("+dp.join()+"), "+pp+`);
        }
      `;gp+=ap===1?"} ":"}}",this.userCode=`
      const `+sp+" start = "+sp+"("+lp+`);
      const `+sp+" end = "+sp+"("+up+`);

      void main() {
        `+sp+` outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        `+gp+`
        setOutput(result);
      }
    `}}(),Bi=function(){return function(_d,rp,np){if(this.variableNames=["x"],rp==="avg"&&np)throw new Error("Cannot compute positions for average pool.");var ap=_d.filterWidth,sp=_d.strideHeight,lp=_d.strideWidth,up=_d.dilationHeight,cp=_d.dilationWidth,dp=_d.effectiveFilterHeight,fp=_d.effectiveFilterWidth,pp=_d.padInfo.top,hp=_d.padInfo.left;this.outputShape=_d.outShape;var mp=rp==="avg",gp="0.0";if(mp||(gp="-1.0 / 1e-20"),np)this.userCode=`
        const ivec2 strides = ivec2(`+sp+", "+lp+`);
        const ivec2 pads = ivec2(`+pp+", "+hp+`);

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < `+dp+`;
              wR += `+up+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+_d.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+fp+`;
                wC += `+cp+`) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= `+_d.inWidth+`) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value >= currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = wR * `+fp+` + wC;
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var vp=rp+"("+rp+"("+rp+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";rp==="avg"&&(vp="avgValue / count");var xp=4*Math.floor(ap/4),Sp=ap%4,yp=`
      if (`+mp+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(`+sp+", "+lp+`);
      const ivec2 pads = ivec2(`+pp+", "+hp+`);
      const float initializationValue = `+gp+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= `+_d.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+gp+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < `+dp+`;
            wR += `+up+`) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= `+_d.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+xp+`; wC += 4) {
            int xC = xCCorner + wC * `+cp+`;

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+cp+`, d),
              getValue(batch, xR, xC + 2 * `+cp+`, d),
              getValue(batch, xR, xC + 3 * `+cp+`, d)
            );

            `+yp+`
          }

          int xC = xCCorner + `+xp+`;
          if (`+(Sp===1)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            `+yp+`
          } else if (`+(Sp===2)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+cp+`, d),
              initializationValue,
              initializationValue
            );

            `+yp+`
          } else if (`+(Sp===3)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+cp+`, d),
              getValue(batch, xR, xC + 2 * `+cp+`, d),
              initializationValue
            );

            `+yp+`
          }
        }
        setOutput(`+vp+`);
      }
    `}}}(),Pi=function(){return function(_d,rp,np){if(this.variableNames=["x"],rp==="avg"&&np)throw new Error("Cannot compute positions for average pool.");var ap=_d.filterWidth,sp=_d.strideDepth,lp=_d.strideHeight,up=_d.strideWidth,cp=_d.dilationDepth,dp=_d.dilationHeight,fp=_d.dilationWidth,pp=_d.effectiveFilterDepth,hp=_d.effectiveFilterHeight,mp=_d.effectiveFilterWidth,gp=_d.padInfo.front,vp=_d.padInfo.top,xp=_d.padInfo.left;this.outputShape=_d.outShape;var Sp=rp==="avg",yp="0.0";if(Sp||(yp="-1.0 / 1e-20"),np)this.userCode=`
        const ivec3 strides =
            ivec3(`+sp+", "+lp+", "+up+`);
        const ivec3 pads = ivec3(`+gp+", "+vp+", "+xp+`);

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < `+pp+`;
              wD += `+cp+`) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= `+_d.inDepth+`) {
              continue;
            }

            for (int wR = 0; wR < `+hp+`;
                wR += `+dp+`) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= `+_d.inHeight+`) {
                continue;
              }

              for (int wC = 0; wC < `+mp+`;
                  wC += `+fp+`) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= `+_d.inWidth+`) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value >= currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition =
                      wD * `+hp+" * "+mp+` +
                      wR * `+mp+` + wC;;
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var bp=rp+"("+rp+"("+rp+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";rp==="avg"&&(bp="avgValue / count");var Ep=4*Math.floor(ap/4),wp=ap%4,_p=`
      if (`+Sp+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(`+sp+", "+lp+", "+up+`);
      const ivec3 pads = ivec3(`+gp+", "+vp+", "+xp+`);
      const float initializationValue = `+yp+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= `+_d.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+yp+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < `+pp+`;
            wD += `+cp+`) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= `+_d.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+hp+`;
            wR += `+dp+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+_d.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+Ep+`; wC += 4) {
              int xC = xCCorner + wC * `+fp+`;

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+fp+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+fp+`, ch),
                getValue(batch, xD, xR, xC + 3 * `+fp+`, ch)
              );

              `+_p+`
            }

            int xC = xCCorner + `+Ep+`;
            if (`+(wp===1)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              `+_p+`
            } else if (`+(wp===2)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+fp+`, ch),
                initializationValue,
                initializationValue
              );

              `+_p+`
            } else if (`+(wp===3)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+fp+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+fp+`, ch),
                initializationValue
              );

              `+_p+`
            }
          }
          setOutput(`+bp+`);
        }
      }
    `}}}(),Li=function(){return function(_d,rp){this.variableNames=["x"];var np=_d.windowSize,ap=_d.batchSize,sp=_d.inSize,lp=Math.ceil(sp/np);this.outputShape=[ap,lp];var up="0.0",cp="";rp==="prod"?up="1.0":rp==="min"?(up="1.0 / 1e-20",cp="min"):rp==="max"&&(up="-1.0 / 1e-20",cp="max");var dp=rp+"("+rp+"("+rp+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";rp==="sum"?dp="sumValue":rp==="prod"?dp="prodValue":rp==="all"?dp="allValue":rp==="any"&&(dp="anyValue");var fp=4*Math.floor(np/4),pp=np%4,hp=`
      if (`+(rp==="sum")+`) {
        sumValue += dot(values, ones);
      } else if (`+(rp==="prod")+`) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = `+cp+`(values, minMaxValue);
      }
    `,mp="vec4";rp==="all"?(up="1.0",hp=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,mp="bvec4"):rp==="any"&&(up="0.0",hp=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,mp="bvec4");var gp="";sp%np>0&&(gp=`
        if (inIdx < 0 || inIdx >= `+sp+`) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = `+up+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        `+gp+`
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+np+`;

        vec4 minMaxValue = vec4(`+up+`);
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < `+fp+`; i += 4) {
          int inIdx = inOffset + i;
          `+mp+" values = "+mp+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          `+hp+`
        }

        int inIdx = inOffset + `+fp+`;
        if (`+(pp===1)+`) {
          `+mp+" values = "+mp+`(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          `+hp+`
        } else if (`+(pp===2)+`) {
          `+mp+" values = "+mp+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          `+hp+`
        } else if (`+(pp===3)+`) {
          `+mp+" values = "+mp+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          `+hp+`
        }
        setOutput(`+dp+`);
      }
    `}}(),Wi=function(){return function(_d,rp){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=_d;for(var np="",ap=0;ap<4;ap++){var sp="thisRC = rc;";ap%2==1&&(sp+="thisRC.z += 1;"),ap>1&&(sp+="thisRC.y += 1;"),np+=`
        `+sp+`
        `+(ap>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+`
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[`+ap+`] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        `+(ap>0?"}":"")+`
      `}this.userCode=`
      
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      `+jo(["r","c","d"],rp)+`
      return ivec3(r, c, d);
    }
  
      `+Xo(_d)+`

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = `+_d[1]+`;
        int cols = `+_d[2]+`;

        `+np+`

        setOutput(result);
      }
    `}}(),Ui=function(){return function(_d,rp,np){this.variableNames=["dy"],this.outputShape=[],this.outputShape=rp.shape;var ap=rp.shape,sp=ap[1],lp=ap[2],up=_d.shape,cp=up[1],dp=up[2],fp=[np&&cp>1?sp-1:sp,np&&dp>1?lp-1:lp],pp=[np&&cp>1?cp-1:cp,np&&dp>1?dp-1:dp],hp=fp[0]/pp[0],mp=fp[1]/pp[1],gp=1/hp,vp=1/mp,xp=2*Math.ceil(gp)+2,Sp=2*Math.ceil(vp)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+hp+`);
        const float widthScale = float(`+mp+`);

        const float invHeightScale = float(`+gp+`);
        const float invWidthScale = float(`+vp+`);

        const int winHeight = int(`+xp+`);
        const int winWidth = int(`+Sp+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+cp+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+dp+`) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), `+(sp-1)+`.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), `+(lp-1)+`.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}(),Vi=function(){return function(_d,rp,np,ap){this.variableNames=["A"],this.outputShape=[];var sp=_d[0],lp=_d[1],up=_d[2],cp=_d[3];this.outputShape=[sp,rp,np,cp];var dp=[ap&&rp>1?lp-1:lp,ap&&np>1?up-1:up],fp=[ap&&rp>1?rp-1:rp,ap&&np>1?np-1:np];this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+dp[0]/fp[0]+`,
          `+dp[1]/fp[1]+`);
      const vec2 inputShapeRC = vec2(`+lp+".0, "+up+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}(),zi=function(){return function(_d,rp,np,ap){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var sp=_d[0],lp=_d[1],up=_d[2],cp=_d[3];this.outputShape=[sp,rp,np,cp];var dp=[ap&&rp>1?lp-1:lp,ap&&np>1?up-1:up],fp=[ap&&rp>1?rp-1:rp,ap&&np>1?np-1:np];this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          `+dp[0]/fp[0]+`,
          `+dp[1]/fp[1]+`,
          `+dp[1]/fp[1]+`);
      const vec3 inputShapeRC = vec3(`+lp+".0, "+up+`.0,
                                     `+up+`.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < `+(cp-1)+`;
        bool hasNextRow = coords.z < `+(np-1)+`;

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}(),Gi=function(){return function(_d,rp,np){this.variableNames=["dy"],this.outputShape=[],this.outputShape=rp.shape;var ap=rp.shape,sp=ap[1],lp=ap[2],up=_d.shape,cp=up[1],dp=up[2],fp=[np&&cp>1?sp-1:sp,np&&dp>1?lp-1:lp],pp=[np&&cp>1?cp-1:cp,np&&dp>1?dp-1:dp],hp=fp[0]/pp[0],mp=fp[1]/pp[1],gp=1/hp,vp=1/mp,xp=2*Math.ceil(gp)+2,Sp=2*Math.ceil(vp)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+hp+`);
        const float widthScale = float(`+mp+`);

        const float invHeightScale = float(`+gp+`);
        const float invWidthScale = float(`+vp+`);

        const int winHeight = int(`+xp+`);
        const int winWidth = int(`+Sp+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+cp+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+dp+`) {
              continue;
            }

            float sourceFracRow =
              float(`+fp[0]+`) *
                (float(dyR) / float(`+pp[0]+`));

            float sourceFracCol =
                float(`+fp[1]+`) *
                  (float(dyC) / float(`+pp[1]+`));

            int sourceNearestRow = int(min(
                float(int(`+sp+`) - 1),
                `+np+` ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(`+lp+`) - 1),
                `+np+` ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}(),Hi=function(){return function(_d,rp,np,ap){this.variableNames=["A"],this.outputShape=[];var sp=_d[0],lp=_d[1],up=_d[2],cp=_d[3];this.outputShape=[sp,rp,np,cp];var dp=[ap&&rp>1?lp-1:lp,ap&&np>1?up-1:up],fp=[ap&&rp>1?rp-1:rp,ap&&np>1?np-1:np],pp=ap?"0.5":"0.0";this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+dp[0]/fp[0]+`,
          `+dp[1]/fp[1]+`);
      const vec2 inputShapeRC = vec2(`+lp+".0, "+up+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + `+pp+`)));

        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}(),qi=function(){return function(_d,rp){this.variableNames=["x"];var np=_d.length;if(np>4)throw new Error("WebGL backend: Reverse of rank-"+np+" tensor is not yet supported");if(this.outputShape=_d,np!==1){var ap=_d.map(function(lp,up){return function(cp){return rp.indexOf(cp)!==-1&&_d[cp]!==1?_d[cp]+" - coords["+cp+"] - 1":"coords["+cp+"]"}(up)}).join(","),sp=aa(np);this.userCode=`
      void main() {
        `+sp+` coords = getOutputCoords();
        setOutput(getX(`+ap+`));
      }
    `}else this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(`+_d[0]+` - coord - 1));
        }
      `}}(),Ki=function(){return function(_d,rp){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var np=_d.length;if(np>4)throw new Error("WebGL backend: Reverse of rank-"+np+" tensor is not yet supported");this.outputShape=_d;var ap=qo("rc",np),sp=ap[np-1]+" + 1 < "+this.outputShape[np-1],lp=ap[np-2]+" + 1 < "+this.outputShape[np-2],up=aa(np);function cp(dp){var fp=_d.map(function(pp,hp){return function(mp,gp){return rp.indexOf(mp)!==-1&&_d[mp]!==1?_d[mp]+" - "+gp[mp]+" - 1":""+gp[mp]}(hp,dp)});return"getChannel(getX("+fp.join(",")+"), vec2("+fp.slice(-2).join(",")+"))"}this.userCode=np===1?`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(`+_d[0]+` - rc - 1),
            `+_d[0]+` - rc - 1);
          if(`+sp+`){
              result.g = getChannel(getX(`+_d[0]+` - (rc  + 1) - 1),
                `+_d[0]+` - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:`
        void main() {
          `+up+` rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = `+function(dp){return cp(dp)}(ap.slice())+`;
          if(`+sp+`){
            result.g = `+function(dp){return dp[np-1]="("+dp[np-1]+" + 1)",cp(dp)}(ap.slice())+`;
          }
          if(`+lp+`) {
            result.b = `+function(dp){return dp[np-2]="("+dp[np-2]+" + 1)",cp(dp)}(ap.slice())+`;
            if(`+sp+`) {
              result.a = `+function(dp){return dp[np-1]="("+dp[np-1]+" + 1)",dp[np-2]="("+dp[np-2]+" + 1)",cp(dp)}(ap.slice())+`;
            }
          }
          setOutput(result);
        }
    `}}(),ji=function(){return function(_d,rp,np,ap,sp,lp,up){this.variableNames=["updates","indices","defaultValue"],this.outputShape=lp;var cp=aa(sp.length),dp=aa(lp.length),fp="";np===1?fp="i":np===2&&(fp="i, j");var pp="getIndices("+fp+")",hp="";ap===1?hp="i":ap===2&&(hp="i, coords[1]");var mp="getUpdates("+hp+")",gp=rp>1?"strides[j]":"strides";this.userCode=`
        `+cp+" strides = "+cp+"("+sp+`);

        void main() {
          `+dp+` coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < `+_d+`; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < `+rp+`; j++) {
              int index = round(`+pp+`);
              flattenedIndex += index * `+gp+`;
            }
            if (flattenedIndex == coords[0]) {
              sum += `+mp+`;
              found = true;
            }
          }
          setOutput(mix(getDefaultValue(), sum, float(found)));
        }
      `}}(),Xi=function(){return function(_d,rp){this.variableNames=["x","segmentIds"];var np=_d.windowSize,ap=_d.batchSize,sp=_d.inSize,lp=_d.numSegments,up=lp*Math.ceil(sp/np);this.outputShape=[ap,up];var cp=4*Math.floor(np/4),dp=np%4,fp=`
        sumValue += dot(values, segFilter);
    `,pp="";sp%np>0&&(pp=`
        if (inIdx < 0 || inIdx >= `+sp+`) {
          return initializationValue;
        }
      `);var hp="";sp%np>0&&(hp=`
        if (inIdx < 0 || inIdx >= `+sp+`) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = 0.0;

      float getValue(int batch, int inIdx) {
        `+pp+`
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        `+hp+`
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          `+lp+")) * float("+np+`));
        int currentSeg = int(mod(float(outIdx), float(`+lp+`)));

        float sumValue = 0.0;

        for (int i = 0; i < `+cp+`; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          `+fp+`
        }

        int inIdx = inOffset + `+cp+`;
        if (`+(dp===1)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          `+fp+`
        } else if (`+(dp===2)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          `+fp+`
        } else if (`+(dp===3)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          `+fp+`
        }
        setOutput(sumValue);
      }
    `}}(),$i=function(){return function(_d,rp,np){var ap,sp;if(this.variableNames=["c","a","b"],this.outputShape=rp,np>4)throw Error("Where for rank "+np+" is not yet supported");if(np===1)sp="resRC",ap="resRC";else{for(var lp=["resRC.x","resRC.y","resRC.z","resRC.w"],up=[],cp=[],dp=0;dp<rp.length;dp++)cp.push(""+lp[dp]),dp<_d&&up.push(""+lp[dp]);ap=up.join(),sp=cp.join()}var fp=aa(np);this.userCode=`
      void main() {
        `+fp+` resRC = getOutputCoords();
        float cVal = getC(`+ap+`);
        if (cVal >= 1.0) {
          setOutput(getA(`+sp+`));
        } else {
          setOutput(getB(`+sp+`));
        }
      }
    `}}(),Yi=function(){function _d(rp){this.variableNames=["source"],this.outputShape=rp,this.rank=rp.length;var np,ap=aa(this.rank),sp="uniform int start["+this.rank+"];",lp=function(up){if(up===1)return"sourceLoc";if(up<=6)return Qi.slice(0,up).map(function(cp){return"sourceLoc."+cp}).join(",");throw Error("Slicing for rank "+up+" is not yet supported")}(this.rank);np=`
        `+ap+` sourceLoc;
        `+ap+` coords = getOutputCoords();
        `+rp.map(function(up,cp){return"sourceLoc."+Qi[cp]+" = start["+cp+"] + coords."+Qi[cp]+";"}).join(`
`)+`
      `,this.userCode=`
      `+sp+`
      void main() {
        `+np+`
        setOutput(getSource(`+lp+`));
      }
    `}return _d.prototype.getCustomSetupFunc=function(rp){var np=this;if(rp.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+rp.length+")");return function(ap,sp){np.startLoc==null&&(np.startLoc=ap.getUniformLocationNoThrow(sp,"start"),np.startLoc==null)||ap.gl.uniform1iv(np.startLoc,rp)}},_d}(),Qi=["x","y","z","w","u","v"],Ji=function(){function _d(rp){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=rp,this.rank=rp.length;var np=aa(this.rank),ap=qo("coords",this.rank),sp=qo("sourceLoc",this.rank),lp=this.rank===1?"sourceLoc":"vec2("+sp.slice(-2).join()+")",up="getChannel(getSource("+sp.join()+"), "+lp+")",cp=`
      result.x = `+up+`;
      if (++`+ap[this.rank-1]+" < "+rp[this.rank-1]+`) {
        ++`+sp[this.rank-1]+`;
        result.y = `+up+`;
        --`+sp[this.rank-1]+`;
      }
    `,dp=this.rank===1?"":`
      --`+ap[this.rank-1]+`;
      if (++`+ap[this.rank-2]+" < "+rp[this.rank-2]+`) {
        ++`+sp[this.rank-2]+`;
        result.z = `+up+`;
        if (++`+ap[this.rank-1]+" < "+rp[this.rank-1]+`) {
          ++`+sp[this.rank-1]+`;
          result.w = `+up+`;
        }
      }
    `,fp=this.rank<=4?`sourceLoc = coords +
            `+np+"("+rp.map(function(pp,hp){return"start["+hp+"]"}).join()+");":rp.map(function(pp,hp){return sp[hp]+" = "+ap[hp]+" + start["+hp+"];"}).join(`
`);this.userCode=`
      uniform int start[`+this.rank+`];
      void main() {
        `+np+` coords = getOutputCoords();
        `+np+` sourceLoc;
        `+fp+`
        vec4 result = vec4(0.);
        `+cp+`
        `+dp+`
        setOutput(result);
      }
    `}return _d.prototype.getCustomSetupFunc=function(rp){var np=this;if(rp.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+rp.length+")");return function(ap,sp){np.startLoc==null&&(np.startLoc=ap.getUniformLocationNoThrow(sp,"start"),np.startLoc==null)||ap.gl.uniform1iv(np.startLoc,rp)}},_d}(),Zi=function(){return function(_d,rp,np){this.variableNames=["x"],this.outputShape=np;var ap=np.length,sp=aa(np.length),lp=aa(np.length),up="";if(ap===1)up="coords * strides + begin";else{var cp=0;up=np.map(function(dp,fp){return cp++,np.length===1?"coords * strides["+fp+"] + begin["+fp+"]":"coords["+(cp-1)+"] * strides["+fp+"] + begin["+fp+"]"}).join(",")}this.userCode=`
      `+sp+" begin = "+sp+"("+_d+`);
      `+sp+" strides = "+sp+"("+rp+`);

      void main() {
        `+lp+` coords = getOutputCoords();
        setOutput(getX(`+up+`));
      }
    `}}(),tu=function(){function _d(rp){this.gpgpu=rp,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return _d.prototype.acquireTexture=function(rp,np,ap){var sp,lp=eu(np,ap),up=nu(rp,lp,ap);if(up in this.freeTextures||(this.freeTextures[up]=[]),up in this.usedTextures||(this.usedTextures[up]=[]),this.freeTextures[up].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var cp=this.freeTextures[up].shift();return this.usedTextures[up].push(cp),cp}return this.numUsedTextures++,this.log(),lp===Bt.PACKED_2X2_FLOAT32?sp=this.gpgpu.createPackedMatrixTexture(rp[0],rp[1]):lp===Bt.PACKED_2X2_FLOAT16?sp=this.gpgpu.createFloat16PackedMatrixTexture(rp[0],rp[1]):lp===Bt.UNPACKED_FLOAT32?sp=this.gpgpu.createFloat32MatrixTexture(rp[0],rp[1]):lp===Bt.UNPACKED_FLOAT16?sp=this.gpgpu.createFloat16MatrixTexture(rp[0],rp[1]):lp===Bt.PACKED_4X1_UNSIGNED_BYTE&&(sp=this.gpgpu.createUnsignedBytesMatrixTexture(rp[0],rp[1])),this.usedTextures[up].push(sp),sp},_d.prototype.releaseTexture=function(rp,np,ap,sp){if(this.freeTextures!=null){var lp=nu(np,eu(ap,sp),sp);lp in this.freeTextures||(this.freeTextures[lp]=[]),this.freeTextures[lp].push(rp),this.numFreeTextures++,this.numUsedTextures--;var up=this.usedTextures[lp],cp=up.indexOf(rp);if(cp<0)throw new Error("Cannot release a texture that was never provided by this texture manager");up.splice(cp,1),this.log()}},_d.prototype.log=function(){if(this.logEnabled){var rp=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+rp+")")}},_d.prototype.getNumUsedTextures=function(){return this.numUsedTextures},_d.prototype.getNumFreeTextures=function(){return this.numFreeTextures},_d.prototype.dispose=function(){var rp=this;if(this.freeTextures!=null){for(var np in this.freeTextures)this.freeTextures[np].forEach(function(ap){rp.gpgpu.deleteMatrixTexture(ap)});for(var np in this.usedTextures)this.usedTextures[np].forEach(function(sp){rp.gpgpu.deleteMatrixTexture(sp)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},_d}();function eu(_d,rp){if(_d===Mt.UPLOAD)return Bt.PACKED_2X2_FLOAT32;if(_d===Mt.RENDER||_d==null)return function(np){return a$1().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?np?Bt.PACKED_2X2_FLOAT32:Bt.UNPACKED_FLOAT32:np?Bt.PACKED_2X2_FLOAT16:Bt.UNPACKED_FLOAT16}(rp);if(_d===Mt.DOWNLOAD||_d===Mt.PIXELS)return Bt.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+_d)}function nu(_d,rp,np){return _d[0]+"_"+_d[1]+"_"+rp+"_"+np}var ru=function(){return function(_d,rp){this.variableNames=["A"];for(var np=new Array(_d.length),ap=0;ap<np.length;ap++)np[ap]=_d[ap]*rp[ap];this.outputShape=np,this.rank=np.length;var sp=aa(this.rank),lp=function(up){var cp=up.length;if(cp>5)throw Error("Tile for rank "+cp+" is not yet supported");if(cp===1)return"imod(resRC, "+up[0]+")";for(var dp=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],fp=[],pp=0;pp<up.length;pp++)fp.push("imod("+dp[pp]+", "+up[pp]+")");return fp.join()}(_d);this.userCode=`
      void main() {
        `+sp+` resRC = getOutputCoords();
        setOutput(getA(`+lp+`));
      }
    `}}(),ou=function(){return function(_d,rp){this.variableNames=["A"];for(var np=new Array(_d.length),ap=0;ap<np.length;ap++)np[ap]=_d[rp[ap]];this.outputShape=np,this.rank=np.length;var sp=aa(this.rank),lp=function(up){var cp=up.length;if(cp>6)throw Error("Transpose for rank "+cp+" is not yet supported");for(var dp=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],fp=new Array(cp),pp=0;pp<up.length;pp++)fp[up[pp]]=dp[pp];return fp.join()}(rp);this.userCode=`
    void main() {
      `+sp+` resRC = getOutputCoords();
      setOutput(getA(`+lp+`));
    }
    `}}(),au=function(){return function(_d,rp){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var np=new Array(_d.length),ap=0;ap<np.length;ap++)np[ap]=_d[rp[ap]];if(this.outputShape=np,this.rank=np.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.");var sp=aa(this.rank),lp=Ho("rc",this.rank),up=new Array(this.rank);for(ap=0;ap<rp.length;ap++)up[rp[ap]]=lp[ap];var cp="vec2("+up.slice(-2).join()+")",dp="++"+lp[this.rank-1]+" < "+np[this.rank-1],fp="getChannel(getA("+up.join()+"), "+cp+")";this.userCode=`
    void main() {
      `+sp+` rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = `+fp+`;
      if(`+dp+`) {
        result[1] = `+fp+`;
      }
      --`+lp[this.rank-1]+`;
      if(++`+lp[this.rank-2]+" < "+np[this.rank-2]+`) {
        result[2] = `+fp+`;
        if(`+dp+`) {
          result[3] = `+fp+`;
        }
      }
      setOutput(result);
    }
    `}}(),iu=1.7580993408473768,uu=1.0507009873554805,su=function(){return function(_d,rp){this.variableNames=["A"],this.outputShape=_d,this.userCode=`
      float unaryOperation(float x) {
        `+rp+`
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}(),cu="if (isnan(x)) return x;",lu="return x;",hu="return abs(x);",fu=cu+`
  return (x < 0.0) ? 0.0 : x;
`,pu=cu+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,du="return (x >= 0.0) ? x : (exp(x) - 1.0);",vu=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = `+iu+`;
  float scale = `+uu+`;
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,mu="return -x;",gu="return ceil(x);",yu="return floor(x);",xu="return exp(x);",bu="return exp(x) - 1.0;",wu=cu+`
  return sin(x);
`,Cu=cu+`
  return cos(x);
`,Eu=cu+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,Ru=cu+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,Iu=cu+`
  return atan(x);
`,ku=cu+"return log(x + sqrt(x * x + 1.0));",Su=cu+`
  if (x < 1.0) return NAN;
  return log(x + sqrt(x * x - 1.0));`,Au=cu+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
  return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,Du="return x;",Tu="return x;",Nu=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Fu=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Ou=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,_u=function(){return function(_d,rp){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=_d,this.userCode=`
      vec4 unaryOperation(vec4 x) {
        `+rp+`
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}(),Mu=function(){return function(_d){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=_d;var rp=_d.length,np=qo("rc",rp),ap=aa(rp),sp=function(cp,dp){if(cp===1)return"rc";for(var fp="",pp=0;pp<cp;pp++)fp+=dp[pp],pp<cp-1&&(fp+=",");return fp}(rp,np),lp=np.slice(-2),up=rp<=1?"rc":"vec2("+lp.join(",")+")";this.userCode=`
      void main() {
        `+ap+` rc = getOutputCoords();
        vec4 packedInput = getA(`+sp+`);

        setOutput(getChannel(packedInput, `+up+`));
      }
    `}}(),Bu={};function Pu(_d,rp){if(rp===void 0&&(rp=!1),_d==="linear")return rp?Tu:lu;if(_d==="relu")return rp?Nu:fu;if(_d==="elu")return rp?Ou:du;if(_d==="relu6")return rp?Fu:pu;if(_d==="prelu")return rp?wa:xa;throw new Error("Activation "+_d+" has not been implemented for the WebGL backend.")}var Lu=600,Wu=function(_d){function rp(np){var ap,sp=_d.call(this)||this;if(sp.gpgpu=np,sp.pendingRead=new WeakMap,sp.pendingDisposal=new WeakSet,sp.dataRefCount=new WeakMap,sp.numBytesInGPU=0,sp.uploadWaitMs=0,sp.downloadWaitMs=0,sp.warnedAboutMemory=!1,sp.pendingDeletes=0,sp.disposed=!1,!a$1().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(np==null){var lp=Ut(a$1().getNumber("WEBGL_VERSION"));sp.binaryCache=((ap=a$1().getNumber("WEBGL_VERSION"))in Bu||(Bu[ap]={}),Bu[ap]),sp.gpgpu=new Ci(lp),sp.canvas=lp.canvas,sp.gpgpuCreatedLocally=!0}else sp.binaryCache={},sp.gpgpuCreatedLocally=!1,sp.canvas=np.gl.canvas;return sp.textureManager=new tu(sp.gpgpu),sp.numMBBeforeWarning=a$1().global.screen==null?1024:a$1().global.screen.height*a$1().global.screen.width*window.devicePixelRatio*Lu/1024/1024,sp.texData=new so(sp,Nt),sp}return e(rp,_d),rp.prototype.numDataIds=function(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes},rp.prototype.fromPixels=function(np,ap){if(np==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var sp=typeof OffscreenCanvas<"u"&&np instanceof OffscreenCanvas||typeof HTMLCanvasElement<"u"&&np instanceof HTMLCanvasElement,lp=np.data instanceof Uint8Array,up=typeof ImageData<"u"&&np instanceof ImageData,cp=typeof HTMLVideoElement<"u"&&np instanceof HTMLVideoElement,dp=typeof HTMLImageElement<"u"&&np instanceof HTMLImageElement,fp=cp?[np.videoWidth,np.videoHeight]:[np.width,np.height],pp=fp[0],hp=fp[1],mp=[hp,pp],gp=[hp,pp,ap];if(!(sp||lp||up||cp||dp))throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+np.constructor.name);(dp||cp)&&(this.fromPixels2DContext==null&&(this.fromPixels2DContext=Vt(a$1().getNumber("WEBGL_VERSION")).getContext("2d")),this.fromPixels2DContext.canvas.width=pp,this.fromPixels2DContext.canvas.height=hp,this.fromPixels2DContext.drawImage(np,0,0,pp,hp),np=this.fromPixels2DContext.canvas);var vp,xp,Sp=this.makeTensorInfo(mp,"int32");return this.texData.get(Sp.dataId).usage=Mt.PIXELS,this.gpgpu.uploadPixelDataToTexture(this.getTexture(Sp.dataId),np),a$1().getBool("WEBGL_PACK")?(vp=new ei(gp),xp=this.compileAndRun(vp,[Sp])):(vp=new ti(gp),xp=this.compileAndRun(vp,[Sp])),this.disposeData(Sp.dataId),xp},rp.prototype.write=function(np,ap,sp){if(a$1().getBool("DEBUG")&&this.checkNumericalProblems(np),sp==="complex64"&&np!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var lp={};return this.texData.set(lp,{shape:ap,dtype:sp,values:np,usage:Mt.UPLOAD}),lp},rp.prototype.move=function(np,ap,sp,lp){if(a$1().getBool("DEBUG")&&this.checkNumericalProblems(ap),lp==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(np,{shape:sp,dtype:lp,values:ap,usage:Mt.UPLOAD})},rp.prototype.readSync=function(np){var ap=this.texData.get(np),sp=ap.values,lp=ap.dtype,up=ap.complexTensors,cp=ap.slice,dp=ap.shape,fp=ap.isPacked;if(cp!=null){var pp=void 0;pp=fp?new _u(dp,Du):new su(dp,Du);var hp=this.runWebGLProgram(pp,[{dataId:np,shape:dp,dtype:lp}],lp),mp=this.readSync(hp.dataId);return this.disposeData(hp.dataId),mp}if(sp!=null)return this.convertAndCacheOnCPU(np);if(lp==="string")return sp;var gp,vp,xp=this.activeTimers!=null;return xp&&(gp=Y()),lp==="complex64"?vp=No(up.real.dataSync(),up.imag.dataSync()):vp=this.getValuesFromTexture(np),xp&&(this.downloadWaitMs+=Y()-gp),this.convertAndCacheOnCPU(np,vp)},rp.prototype.read=function(np){return n$1(this,void 0,void 0,function(){var ap,sp,lp,up,cp,dp,fp,pp,hp,mp,gp,vp,xp,Sp,yp,bp,Ep,wp,_p,Rp,$p,Cp;return r(this,function(Ap){switch(Ap.label){case 0:if(this.pendingRead.has(np))return ap=this.pendingRead.get(np),[2,new Promise(function(Op){return ap.push(Op)})];if(sp=this.texData.get(np),lp=sp.values,up=sp.shape,cp=sp.slice,dp=sp.dtype,fp=sp.complexTensors,pp=sp.isPacked,cp!=null)return hp=void 0,hp=pp?new _u(up,Du):new su(up,Du),mp=this.runWebGLProgram(hp,[{dataId:np,shape:up,dtype:dp}],dp),gp=this.read(mp.dataId),this.disposeData(mp.dataId),[2,gp];if(lp!=null)return[2,this.convertAndCacheOnCPU(np)];if(!a$1().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&a$1().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return vp=null,dp!=="complex64"&&a$1().get("WEBGL_BUFFER_SUPPORTED")&&(xp=this.decode(np),Sp=this.texData.get(xp.dataId),vp=(Cp=this.gpgpu).createBufferFromTexture.apply(Cp,[Sp.texture].concat(Gt(up)))),this.pendingRead.set(np,[]),dp==="complex64"?[3,2]:[4,this.gpgpu.createAndWaitForFence()];case 1:Ap.sent(),Ap.label=2;case 2:return dp!=="complex64"?[3,4]:[4,Promise.all([fp.real.data(),fp.imag.data()])];case 3:return bp=Ap.sent(),Ep=bp[0],wp=bp[1],yp=No(Ep,wp),[3,5];case 4:vp==null?yp=this.getValuesFromTexture(np):(_p=w$1(up),yp=this.gpgpu.downloadFloat32MatrixFromBuffer(vp,_p)),Ap.label=5;case 5:return xp!=null&&this.disposeData(xp.dataId),Rp=this.convertAndCacheOnCPU(np,yp),$p=this.pendingRead.get(np),this.pendingRead.delete(np),$p.forEach(function(Op){return Op(Rp)}),this.pendingDisposal.has(np)&&(this.pendingDisposal.delete(np),this.disposeData(np),this.pendingDeletes--),[2,Rp]}})})},rp.prototype.checkNumericalProblems=function(np){if(np!=null)for(var ap=0;ap<np.length;ap++){var sp=np[ap];if(!$t(sp))throw a$1().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error("The value "+sp+" cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'"):Error("The value "+sp+" cannot be represented on this device.")}},rp.prototype.getValuesFromTexture=function(np){var ap,sp=this.texData.get(np),lp=sp.shape,up=sp.dtype,cp=sp.isPacked,dp=w$1(lp);if(a$1().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var fp=this.decode(np),pp=this.texData.get(fp.dataId),hp=(ap=this.gpgpu).downloadMatrixFromPackedTexture.apply(ap,[pp.texture].concat(Gt(lp))).subarray(0,dp);return this.disposeData(fp.dataId),hp}var mp=a$1().getBool("WEBGL_PACK")&&cp===!0,gp=mp?Re(lp):lp,vp=mp?new ja(gp):new Ka(gp),xp=this.runWebGLProgram(vp,[{shape:gp,dtype:up,dataId:np}],"float32"),Sp=this.texData.get(xp.dataId),yp=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(Sp.texture,Sp.texShape[0],Sp.texShape[1]).subarray(0,dp);return this.disposeData(xp.dataId),yp},rp.prototype.time=function(np){return n$1(this,void 0,void 0,function(){var ap,sp,lp,up,cp,dp,fp;return r(this,function(pp){switch(pp.label){case 0:return ap=this.activeTimers,sp=[],lp=!1,this.programTimersStack==null?(this.programTimersStack=sp,lp=!0):this.activeTimers.push(sp),this.activeTimers=sp,np(),up=b(this.activeTimers.map(function(hp){return hp.query})).filter(function(hp){return hp!=null}),cp=b(this.activeTimers.map(function(hp){return hp.name})).filter(function(hp){return hp!=null}),this.activeTimers=ap,lp&&(this.programTimersStack=null),[4,Promise.all(up)];case 1:return dp=pp.sent(),fp={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:m(dp),getExtraProfileInfo:function(){return dp.map(function(hp,mp){return{name:cp[mp],ms:hp}}).map(function(hp){return hp.name+": "+hp.ms}).join(", ")},wallMs:null},this.uploadWaitMs=0,this.downloadWaitMs=0,[2,fp]}})})},rp.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},rp.prototype.startTimer=function(){return a$1().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?this.gpgpu.beginQuery():{startMs:Y(),endMs:null}},rp.prototype.endTimer=function(np){return a$1().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(this.gpgpu.endQuery(),np):(np.endMs=Y(),np)},rp.prototype.getQueryTime=function(np){return n$1(this,void 0,void 0,function(){var ap;return r(this,function(sp){return a$1().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?[2,this.gpgpu.waitForQueryAndGetTime(np)]:[2,(ap=np).endMs-ap.startMs]})})},rp.prototype.disposeData=function(np){if(!this.pendingDisposal.has(np)){if(this.pendingRead.has(np))return this.pendingDisposal.add(np),void this.pendingDeletes++;if(this.texData.has(np)){this.releaseGPUData(np);var ap=this.texData.get(np).complexTensors;ap!=null&&(ap.real.dispose(),ap.imag.dispose()),this.texData.delete(np)}}},rp.prototype.releaseGPUData=function(np){var ap=this.texData.get(np),sp=ap.texture,lp=ap.dtype,up=ap.texShape,cp=ap.usage,dp=ap.isPacked,fp=ap.slice,pp=fp&&fp.origDataId||np,hp=this.dataRefCount.get(pp);hp>1?this.dataRefCount.set(pp,hp-1):(this.dataRefCount.delete(pp),sp!=null&&(this.numBytesInGPU-=this.computeBytes(up,lp),this.textureManager.releaseTexture(sp,up,cp,dp)));var mp=this.texData.get(np);mp.texture=null,mp.texShape=null,mp.isPacked=!1,mp.slice=null},rp.prototype.getTexture=function(np){return this.uploadToGPU(np),this.texData.get(np).texture},rp.prototype.getDataInfo=function(np){return this.texData.get(np)},rp.prototype.getCPUBackend=function(){return a$1().getBool("WEBGL_CPU_FORWARD")?(this.cpuBackend==null&&(this.cpuBackend=Nt.findBackend("cpu")),this.cpuBackend):null},rp.prototype.shouldExecuteOnCPU=function(np,ap){var sp=this;return ap===void 0&&(ap=128),this.getCPUBackend()!=null&&np.every(function(lp){return sp.texData.get(lp.dataId).texture==null&&lp.size<ap})},rp.prototype.getGPGPUContext=function(){return this.gpgpu},rp.prototype.complex=function(np,ap){var sp=this.makeOutput(np.shape,"complex64");return this.texData.get(sp.dataId).complexTensors={real:Nt.keep(np.clone()),imag:Nt.keep(ap.clone())},sp},rp.prototype.real=function(np){return this.texData.get(np.dataId).complexTensors.real.clone()},rp.prototype.imag=function(np){return this.texData.get(np.dataId).complexTensors.imag.clone()},rp.prototype.slice=function(np,ap,sp){if(this.shouldExecuteOnCPU([np]))return this.cpuBackend.slice(np,ap,sp);if(w$1(sp)===0)return kn([],sp,np.dtype);var lp=this.texData.get(np.dataId).isPacked,up=Yr(np.shape,ap,sp);if(lp||!up){var cp=a$1().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Ji(sp):new Yi(sp),dp=cp.getCustomSetupFunc(ap);return this.compileAndRun(cp,[np],null,dp)}return this.uploadToGPU(np.dataId),this.shallowSlice(np,ap,sp)},rp.prototype.shallowSlice=function(np,ap,sp){var lp=this.texData.get(np.dataId),up=this.makeOutput(sp,np.dtype),cp=this.texData.get(up.dataId);Object.assign(cp,lp),cp.shape=sp,cp.dtype=np.dtype;var dp=Qr(ap,np.strides);lp.slice&&(dp+=lp.slice.flatOffset),cp.slice={flatOffset:dp,origDataId:lp.slice&&lp.slice.origDataId||np.dataId};var fp=this.dataRefCount.get(cp.slice.origDataId)||1;return this.dataRefCount.set(cp.slice.origDataId,fp+1),up},rp.prototype.stridedSlice=function(np,ap,sp,lp){if(this.shouldExecuteOnCPU([np]))return this.cpuBackend.stridedSlice(np,ap,sp,lp);var up=jr(ap,sp,lp);if(up.some(function(dp){return dp===0}))return kn([],up);var cp=new Zi(ap,lp,up);return this.compileAndRun(cp,[np])},rp.prototype.reverse=function(np,ap){var sp=a$1().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Ki(np.shape,ap):new qi(np.shape,ap);return this.compileAndRun(sp,[np])},rp.prototype.concat=function(np,ap){if(np[0].dtype==="complex64"){var sp=np.map(function(gp){return Rn(gp)}),lp=np.map(function(gp){return In(gp)});return En(this.concat(sp,ap),this.concat(lp,ap))}if(this.shouldExecuteOnCPU(np))return this.cpuBackend.concat(np,ap);if(np.length===1)return np[0];if(np.length>a$1().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var up=Math.floor(np.length/2),cp=this.concat(np.slice(0,up),ap),dp=this.concat(np.slice(up),ap);return this.concat([cp,dp],ap)}if(a$1().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&np[0].rank>1){var fp=new Sa(np.map(function(gp){return gp.shape}),ap);return this.compileAndRun(fp,np)}var pp=wn(np.map(function(gp){return gp.shape}),ap),hp=np.map(function(gp){return gp.as2D(-1,w$1(gp.shape.slice(ap)))}),mp=new ka(hp.map(function(gp){return gp.shape}));return this.compileAndRun(mp,hp).reshape(pp)},rp.prototype.neg=function(np){if(this.shouldExecuteOnCPU([np]))return this.cpuBackend.neg(np);if(a$1().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(np,mu,np.dtype);var ap=new su(np.shape,mu);return this.compileAndRun(ap,[np])},rp.prototype.batchMatMul=function(np,ap,sp,lp){var up=sp?np.shape[2]:np.shape[1],cp=lp?ap.shape[1]:ap.shape[2],dp=sp?np.shape[1]:np.shape[2],fp=np.shape[0];if((up===1||cp===1)&&dp>1e3){sp&&(np=np.transpose([0,2,1])),lp&&(ap=ap.transpose([0,2,1]));var pp=cp===1?np:np.as3D(fp,dp,1),hp=cp===1?2:1,mp=cp===1?ap.as3D(fp,1,dp):ap;return this.multiply(pp,mp).sum(hp,!0)}var gp=Ct(np.dtype,ap.dtype),vp=new Ti(np.shape,[fp,up,cp],sp,lp);return this.compileAndRun(vp,[np,ap],gp)},rp.prototype.fusedBatchMatMul=function(np){var ap=np.a,sp=np.b,lp=np.transposeA,up=np.transposeB,cp=np.bias,dp=np.activation,fp=np.preluActivationWeights,pp=lp?ap.shape[2]:ap.shape[1],hp=up?sp.shape[1]:sp.shape[2],mp=ap.shape[0],gp=Ct(ap.dtype,sp.dtype),vp=cp!=null,xp=fp!=null,Sp=dp?Pu(dp,!0):null,yp=new Ti(ap.shape,[mp,pp,hp],lp,up,vp,Sp,xp),bp=[ap,sp];return cp&&bp.push(cp),fp&&bp.push(fp),this.compileAndRun(yp,bp,gp)},rp.prototype.multiply=function(np,ap){if(np.dtype==="complex64"){var sp=this.texData.get(np.dataId),lp=this.texData.get(ap.dataId),up=new va(pa,np.shape,ap.shape),cp=new va(da,np.shape,ap.shape),dp=[this.makeComplexComponentTensorInfo(np,sp.complexTensors.real),this.makeComplexComponentTensorInfo(np,sp.complexTensors.imag),this.makeComplexComponentTensorInfo(ap,lp.complexTensors.real),this.makeComplexComponentTensorInfo(ap,lp.complexTensors.imag)],fp=this.compileAndRun(up,dp),pp=this.compileAndRun(cp,dp),hp=this.complex(fp,pp);return fp.dispose(),pp.dispose(),hp}if(this.shouldExecuteOnCPU([np,ap]))return this.cpuBackend.multiply(np,ap);if(a$1().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(np,ap,ya,np.dtype);var mp=new ba(ya,np.shape,ap.shape);return this.compileAndRun(mp,[np,ap],np.dtype)},rp.prototype.batchNormalization=function(np,ap,sp,lp,up,cp){var dp=[np,ap,sp],fp=null;cp!=null&&(fp=cp.shape,dp.push(cp));var pp=null;if(up!=null&&(pp=up.shape,dp.push(up)),a$1().getBool("WEBGL_PACK_NORMALIZATION")){var hp=new fa(np.shape,ap.shape,sp.shape,fp,pp,lp);return this.compileAndRun(hp,dp)}var mp=new ha(np.shape,ap.shape,sp.shape,fp,pp,lp);return this.compileAndRun(mp,dp)},rp.prototype.localResponseNormalization4D=function(np,ap,sp,lp,up){var cp=a$1().getBool("WEBGL_PACK_NORMALIZATION")?new Si(np.shape,ap,sp,lp,up):new Ii(np.shape,ap,sp,lp,up);return this.compileAndRun(cp,[np])},rp.prototype.LRNGrad=function(np,ap,sp,lp,up,cp,dp){var fp=new ki(ap.shape,lp,up,cp,dp);return this.compileAndRun(fp,[ap,sp,np])},rp.prototype.tile=function(np,ap){if(np.dtype==="string"){var sp=this.readSync(np.dataId).map(function(up){return Z(up)});return Lo(ur(np.shape,np.dtype,sp),ap)}var lp=new ru(np.shape,ap);return this.compileAndRun(lp,[np])},rp.prototype.pad=function(np,ap,sp){var lp=a$1().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Mi(np.shape,ap,sp):new _i(np.shape,ap,sp);return this.compileAndRun(lp,[np])},rp.prototype.transpose=function(np,ap){if(this.shouldExecuteOnCPU([np]))return this.cpuBackend.transpose(np,ap);var sp=a$1().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new au(np.shape,ap):new ou(np.shape,ap);return this.compileAndRun(sp,[np])},rp.prototype.gather=function(np,ap,sp){if(this.shouldExecuteOnCPU([np,ap]))return this.cpuBackend.gather(np,ap,sp);var lp=new ni(np.shape,ap.size,sp);return this.compileAndRun(lp,[np,ap])},rp.prototype.batchToSpaceND=function(np,ap,sp){g(np.rank<=4,function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"});var lp=ap.reduce(function(hp,mp){return hp*mp}),up=Mr(np.shape,ap,lp),cp=Br(up.length,ap.length),dp=Pr(np.shape,ap,lp),fp=Lr(sp,ap.length),pp=Wr(dp,sp,ap.length);return np.reshape(up).transpose(cp).reshape(dp).slice(fp,pp)},rp.prototype.spaceToBatchND=function(np,ap,sp){g(np.rank<=4,function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"});var lp=ap.reduce(function(mp,gp){return mp*gp}),up=[[0,0]];up.push.apply(up,sp);for(var cp=1+ap.length;cp<np.shape.length;++cp)up.push([0,0]);var dp=np.pad(up),fp=Mr(dp.shape,ap,lp,!1),pp=Br(fp.length,ap.length,!1),hp=Pr(dp.shape,ap,lp,!1);return dp.reshape(fp).transpose(pp).reshape(hp)},rp.prototype.reduce=function(np,ap,sp){var lp=np.shape[0],up=np.shape[1],cp=zr(up),dp=new Li({windowSize:cp,inSize:up,batchSize:lp},ap),fp=this.compileAndRun(dp,[np],sp);return fp.shape[1]===1?fp:this.reduce(fp,ap,sp)},rp.prototype.argReduce=function(np,ap,sp){sp===void 0&&(sp=null);var lp=np.shape[0],up=np.shape[1];sp!=null&&(lp=sp.shape[0],up=sp.shape[1]);var cp=zr(up),dp=new Go({windowSize:cp,inSize:up,batchSize:lp},ap,sp==null),fp=[np];sp!=null&&fp.push(sp);var pp=this.compileAndRun(dp,fp,"int32");return pp.shape[1]===1?pp:this.argReduce(np,ap,pp)},rp.prototype.argReducePacked=function(np,ap,sp){sp===void 0&&(sp=null);var lp=sp!=null?sp.shape:np.shape,up=zr(lp[lp.length-1]),cp=new sa(lp,up,ap,sp==null),dp=sp==null?[np]:[np,sp],fp=this.compileAndRun(cp,dp,"int32");return fp.rank===np.rank?this.argReducePacked(np,ap,fp):fp},rp.prototype.sum=function(np,ap){mn("sum",ap,np.rank);var sp=dn(np.shape,ap),lp=sp[0],up=w$1(sp[1]),cp=np.as2D(-1,up),dp=Et(np.dtype);return this.reduce(cp,"sum",dp).reshape(lp)},rp.prototype.prod=function(np,ap){if(this.shouldExecuteOnCPU([np]))return this.cpuBackend.prod(np,ap);var sp=dn(np.shape,ap),lp=sp[0],up=w$1(sp[1]),cp=np.as2D(-1,up),dp=Et(np.dtype);return this.reduce(cp,"prod",dp).reshape(lp)},rp.prototype.unsortedSegmentSum=function(np,ap,sp){var lp=0,up=gn([lp],np.rank),cp=np;up!=null&&(cp=np.transpose(up),lp=xn(1,np.rank)[0]);var dp=function(gp,vp,xp){for(var Sp=[],yp=gp.length,bp=0;bp<yp;bp++)bp!==vp?Sp.push(gp[bp]):Sp.push(xp);return Sp}(cp.shape,lp,sp),fp=w$1([cp.shape[lp]]),pp=cp.as2D(-1,fp),hp=Et(np.dtype),mp=this.segOpCompute(pp,"unsortedSegmentSum",ap,hp,sp).reshape(dp);return up!=null&&(mp=mp.transpose(yn(up))),mp},rp.prototype.segOpCompute=function(np,ap,sp,lp,up){var cp=np.shape[0],dp=np.shape[1],fp=function(mp,gp){var vp,xp=!1;for(mp<=Vr?(vp=mp,xp=!0):vp=H(mp,Math.floor(Math.sqrt(mp)));!xp;)vp>gp||vp===mp?xp=!0:vp=H(mp,vp+1);return vp}(dp,up),pp=new Xi({windowSize:fp,inSize:dp,batchSize:cp,numSegments:up},ap),hp=this.compileAndRun(pp,[np,sp],lp);return hp.shape[1]===up?hp:(sp=Un(0,up).tile([dp/fp]),this.segOpCompute(hp,ap,sp,lp,up))},rp.prototype.argMinMaxReduce=function(np,ap,sp){var lp=[ap];if(mn("arg"+sp.charAt(0).toUpperCase()+sp.slice(1),lp,np.rank),!a$1().getBool("WEBGL_PACK_REDUCE")||np.rank<=2){var up=dn(np.shape,lp),cp=up[0],dp=w$1(up[1]),fp=np.as2D(-1,dp);return this.argReduce(fp,sp).reshape(cp)}return this.argReducePacked(np,sp)},rp.prototype.argMin=function(np,ap){return this.argMinMaxReduce(np,ap,"min")},rp.prototype.argMax=function(np,ap){return this.argMinMaxReduce(np,ap,"max")},rp.prototype.cumsum=function(np,ap,sp,lp){if(ap!==np.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(np.rank-1)+" but got axis="+ap);var up=new Ua(np.shape,sp,lp);return this.compileAndRun(up,[np])},rp.prototype.equal=function(np,ap){if(a$1().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(np,ap,`
  return vec4(equal(a, b));
`,"bool");var sp=new ba("return float(a == b);",np.shape,ap.shape);return this.compileAndRun(sp,[np,ap],"bool")},rp.prototype.notEqual=function(np,ap){if(a$1().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(np,ap,`
  return vec4(notEqual(a, b));
`,"bool");var sp=new ba("return float(a != b);",np.shape,ap.shape);return this.compileAndRun(sp,[np,ap],"bool")},rp.prototype.less=function(np,ap){if(this.shouldExecuteOnCPU([np,ap]))return this.cpuBackend.less(np,ap);if(a$1().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(np,ap,`
  return vec4(lessThan(a, b));
`,"bool");var sp=new ba("return float(a < b);",np.shape,ap.shape);return this.compileAndRun(sp,[np,ap],"bool")},rp.prototype.lessEqual=function(np,ap){if(a$1().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(np,ap,`
  return vec4(lessThanEqual(a, b));
`,"bool");var sp=new ba("return float(a <= b);",np.shape,ap.shape);return this.compileAndRun(sp,[np,ap],"bool")},rp.prototype.greater=function(np,ap){if(this.shouldExecuteOnCPU([np,ap]))return this.cpuBackend.greater(np,ap);if(a$1().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(np,ap,`
  return vec4(greaterThan(a, b));
`,"bool");var sp=new ba("return float(a > b);",np.shape,ap.shape);return this.compileAndRun(sp,[np,ap],"bool")},rp.prototype.greaterEqual=function(np,ap){if(a$1().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(np,ap,`
  return vec4(greaterThanEqual(a, b));
`,"bool");var sp=new ba("return float(a >= b);",np.shape,ap.shape);return this.compileAndRun(sp,[np,ap],"bool")},rp.prototype.logicalNot=function(np){var ap=new su(np.shape,"return float(!(x >= 1.0));");return this.compileAndRun(ap,[np])},rp.prototype.logicalAnd=function(np,ap){if(a$1().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(np,ap,`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,"bool");var sp=new ba("return float(a >= 1.0 && b >= 1.0);",np.shape,ap.shape);return this.compileAndRun(sp,[np,ap],"bool")},rp.prototype.logicalOr=function(np,ap){if(a$1().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(np,ap,`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,"bool");var sp=new ba("return float(a >= 1.0 || b >= 1.0);",np.shape,ap.shape);return this.compileAndRun(sp,[np,ap],"bool")},rp.prototype.select=function(np,ap,sp){var lp=new $i(np.rank,ap.shape,ap.rank);return this.compileAndRun(lp,[np,ap,sp],Ct(ap.dtype,sp.dtype))},rp.prototype.where=function(np){un("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var ap=np.dataSync();return Uo(np.shape,ap)},rp.prototype.topk=function(np,ap,sp){return Wo(np.dataSync(),np.shape,np.dtype,ap)},rp.prototype.min=function(np,ap){mn("min",ap,np.rank);var sp=dn(np.shape,ap),lp=sp[0],up=w$1(sp[1]),cp=np.as2D(-1,up);return this.reduce(cp,"min",cp.dtype).reshape(lp)},rp.prototype.minimum=function(np,ap){if(this.shouldExecuteOnCPU([np,ap]))return this.cpuBackend.minimum(np,ap);var sp=a$1().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ca(`
  vec4 result = vec4(min(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,np.shape,ap.shape):new ba(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return min(a, b);
`,np.shape,ap.shape);return this.compileAndRun(sp,[np,ap])},rp.prototype.mod=function(np,ap){var sp=a$1().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ca(`
  vec4 result = mod(a, b);
  vec4 isNaN = vec4(equal(b, vec4(0.0)));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,np.shape,ap.shape):new ba(`if (b == 0.0) return NAN;
  return mod(a, b);`,np.shape,ap.shape);return this.compileAndRun(sp,[np,ap])},rp.prototype.max=function(np,ap){if(this.shouldExecuteOnCPU([np]))return this.cpuBackend.max(np,ap);mn("max",ap,np.rank);var sp=dn(np.shape,ap),lp=sp[0],up=w$1(sp[1]),cp=np.as2D(-1,up);return this.reduce(cp,"max",cp.dtype).reshape(lp)},rp.prototype.maximum=function(np,ap){if(this.shouldExecuteOnCPU([np,ap]))return this.cpuBackend.maximum(np,ap);var sp=a$1().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ca(`
  vec4 result = vec4(max(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,np.shape,ap.shape):new ba(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return max(a, b);
`,np.shape,ap.shape);return this.compileAndRun(sp,[np,ap])},rp.prototype.all=function(np,ap){mn("all",ap,np.rank);var sp=dn(np.shape,ap),lp=sp[0],up=w$1(sp[1]),cp=np.as2D(-1,up);return this.reduce(cp,"all",cp.dtype).reshape(lp)},rp.prototype.any=function(np,ap){mn("any",ap,np.rank);var sp=dn(np.shape,ap),lp=sp[0],up=w$1(sp[1]),cp=np.as2D(-1,up);return this.reduce(cp,"any",cp.dtype).reshape(lp)},rp.prototype.squaredDifference=function(np,ap){var sp=a$1().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ca("return (a - b) * (a - b);",np.shape,ap.shape):new ba("return (a - b) * (a - b);",np.shape,ap.shape);return this.compileAndRun(sp,[np,ap])},rp.prototype.realDivide=function(np,ap){if(a$1().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(np,ap,`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,"float32",!0);var sp=new ba(`
if (a == b) {
  return 1.0;
};
return a / b;`,np.shape,ap.shape);return this.compileAndRun(sp,[np,ap],"float32")},rp.prototype.floorDiv=function(np,ap){if(a$1().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(np,ap,`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,"int32");var sp=new ba(`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,np.shape,ap.shape);return this.compileAndRun(sp,[np,ap],"int32")},rp.prototype.add=function(np,ap){if(np.dtype==="complex64"&&ap.dtype==="complex64")return this.complexSeparableBinaryOp(np,ap,ma);if(this.shouldExecuteOnCPU([np,ap]))return this.cpuBackend.add(np,ap);var sp=Ct(np.dtype,ap.dtype);if(a$1().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(np,ap,ma,sp);var lp=new ba(ma,np.shape,ap.shape);return this.compileAndRun(lp,[np,ap],sp)},rp.prototype.packedUnaryOp=function(np,ap,sp){var lp=new _u(np.shape,ap);return this.compileAndRun(lp,[np],sp)},rp.prototype.packedBinaryOp=function(np,ap,sp,lp,up){up===void 0&&(up=!1);var cp=new Ca(sp,np.shape,ap.shape,up);return this.compileAndRun(cp,[np,ap],lp)},rp.prototype.complexSeparableBinaryOp=function(np,ap,sp){var lp=this,up=this.texData.get(np.dataId),cp=this.texData.get(ap.dataId),dp=[[up.complexTensors.real,cp.complexTensors.real],[up.complexTensors.imag,cp.complexTensors.imag]].map(function(mp){var gp=mp[0],vp=mp[1],xp=lp.makeComplexComponentTensorInfo(np,gp),Sp=lp.makeComplexComponentTensorInfo(ap,vp),yp=new ba(sp,np.shape,ap.shape);return lp.compileAndRun(yp,[xp,Sp],Ct(gp.dtype,vp.dtype))}),fp=dp[0],pp=dp[1],hp=this.complex(fp,pp);return fp.dispose(),pp.dispose(),hp},rp.prototype.makeComplexComponentTensorInfo=function(np,ap){return{dataId:ap.dataId,dtype:ap.dtype,shape:np.shape}},rp.prototype.addN=function(np){if(np.length===1)return np[0];if(np.length>a$1().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var ap=Math.floor(np.length/2),sp=this.addN(np.slice(0,ap)),lp=this.addN(np.slice(ap));return this.addN([sp,lp])}var up=np.map(function(fp){return fp.dtype}).reduce(function(fp,pp){return Ct(fp,pp)}),cp=np.map(function(fp){return fp.shape}),dp=a$1().getBool("WEBGL_PACK")?new zo(np[0].shape,cp):new Vo(np[0].shape,cp);return this.compileAndRun(dp,np,up)},rp.prototype.subtract=function(np,ap){if(np.dtype==="complex64"&&ap.dtype==="complex64")return this.complexSeparableBinaryOp(np,ap,ga);if(this.shouldExecuteOnCPU([np,ap]))return this.cpuBackend.subtract(np,ap);var sp=Ct(np.dtype,ap.dtype);if(a$1().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(np,ap,ga,np.dtype);var lp=new ba(ga,np.shape,ap.shape);return this.compileAndRun(lp,[np,ap],sp)},rp.prototype.pow=function(np,ap){var sp=a$1().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ca(`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,np.shape,ap.shape):new ba(`
if(a < 0.0 && floor(b) < b){
  return NAN;
}
if (b == 0.0) {
  return 1.0;
}
return (round(mod(b, 2.0)) != 1) ?
    pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,np.shape,ap.shape),lp=Ct(np.dtype,ap.dtype);return this.compileAndRun(sp,[np,ap],lp)},rp.prototype.ceil=function(np){if(this.shouldExecuteOnCPU([np]))return this.cpuBackend.ceil(np);if(a$1().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(np,gu,np.dtype);var ap=new su(np.shape,gu);return this.compileAndRun(ap,[np])},rp.prototype.floor=function(np){if(this.shouldExecuteOnCPU([np]))return this.cpuBackend.floor(np);if(a$1().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(np,yu,np.dtype);var ap=new su(np.shape,yu);return this.compileAndRun(ap,[np])},rp.prototype.sign=function(np){var ap=new su(np.shape,`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`);return this.compileAndRun(ap,[np])},rp.prototype.isNaN=function(np){var ap=new su(np.shape,"return float(isnan(x));");return this.compileAndRun(ap,[np],"bool")},rp.prototype.isInf=function(np){var ap=new su(np.shape,"return float(isinf(x));");return this.compileAndRun(ap,[np],"bool")},rp.prototype.isFinite=function(np){var ap=new su(np.shape,"return float(!isnan(x) && !isinf(x));");return this.compileAndRun(ap,[np],"bool")},rp.prototype.round=function(np){var ap=new su(np.shape,`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`);return this.compileAndRun(ap,[np])},rp.prototype.exp=function(np){if(this.shouldExecuteOnCPU([np]))return this.cpuBackend.exp(np);if(a$1().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(np,xu,np.dtype);var ap=new su(np.shape,xu);return this.compileAndRun(ap,[np])},rp.prototype.expm1=function(np){if(this.shouldExecuteOnCPU([np]))return this.cpuBackend.expm1(np);if(a$1().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(np,bu,np.dtype);var ap=new su(np.shape,bu);return this.compileAndRun(ap,[np])},rp.prototype.log=function(np){if(this.shouldExecuteOnCPU([np]))return this.cpuBackend.log(np);if(a$1().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(np,`
  vec4 result = log(x);
  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));
  result.r = isNaN.r == 1.0 ? NAN : result.r;
  result.g = isNaN.g == 1.0 ? NAN : result.g;
  result.b = isNaN.b == 1.0 ? NAN : result.b;
  result.a = isNaN.a == 1.0 ? NAN : result.a;

  return result;
`,np.dtype);var ap=new su(np.shape,`if (x < 0.0) return NAN;
  return log(x);`);return this.compileAndRun(ap,[np])},rp.prototype.log1p=function(np){var ap=new su(np.shape,"return log(1.0 + x);");return this.compileAndRun(ap,[np])},rp.prototype.sqrt=function(np){var ap=new su(np.shape,"return sqrt(x);");return this.compileAndRun(ap,[np])},rp.prototype.rsqrt=function(np){if(this.shouldExecuteOnCPU([np]))return this.cpuBackend.rsqrt(np);var ap=new su(np.shape,"return inversesqrt(x);");return this.compileAndRun(ap,[np])},rp.prototype.reciprocal=function(np){var ap=new su(np.shape,"return 1.0 / x;");return this.compileAndRun(ap,[np])},rp.prototype.relu=function(np){var ap;return ap=a$1().getBool("WEBGL_PACK")?new _u(np.shape,Nu):new su(np.shape,fu),this.compileAndRun(ap,[np])},rp.prototype.relu6=function(np){var ap;return ap=a$1().getBool("WEBGL_PACK")?new _u(np.shape,Fu):new su(np.shape,pu),this.compileAndRun(ap,[np])},rp.prototype.prelu=function(np,ap){var sp=a$1().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ca(wa,np.shape,ap.shape):new ba(xa,np.shape,ap.shape);return this.compileAndRun(sp,[np,ap])},rp.prototype.elu=function(np){if(a$1().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(np,Ou,np.dtype);var ap=new su(np.shape,du);return this.compileAndRun(ap,[np])},rp.prototype.eluDer=function(np,ap){var sp=a$1().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ca(`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,np.shape,ap.shape):new ba("return (b >= 1.0) ? a : a * (b + 1.0);",np.shape,ap.shape);return this.compileAndRun(sp,[np,ap])},rp.prototype.selu=function(np){var ap=new su(np.shape,vu);return this.compileAndRun(ap,[np])},rp.prototype.int=function(np){var ap=new su(np.shape,"return float(int(x));");return this.compileAndRun(ap,[np],"int32")},rp.prototype.clip=function(np,ap,sp){var lp,up=(lp=a$1().getBool("WEBGL_PACK_CLIP")?new Ra(np.shape):new Ea(np.shape)).getCustomSetupFunc(ap,sp);return this.compileAndRun(lp,[np],null,up)},rp.prototype.abs=function(np){if(this.shouldExecuteOnCPU([np]))return this.cpuBackend.abs(np);if(a$1().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(np,hu,np.dtype);var ap=new su(np.shape,hu);return this.compileAndRun(ap,[np])},rp.prototype.complexAbs=function(np){var ap=this.texData.get(np.dataId),sp=new Ia(np.shape),lp=[this.makeComplexComponentTensorInfo(np,ap.complexTensors.real),this.makeComplexComponentTensorInfo(np,ap.complexTensors.imag)];return this.compileAndRun(sp,lp)},rp.prototype.sigmoid=function(np){var ap=new su(np.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(ap,[np])},rp.prototype.softplus=function(np){var ap=new su(np.shape,`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`);return this.compileAndRun(ap,[np])},rp.prototype.sin=function(np){var ap=new su(np.shape,wu);return this.compileAndRun(ap,[np])},rp.prototype.cos=function(np){var ap=new su(np.shape,Cu);return this.compileAndRun(ap,[np])},rp.prototype.tan=function(np){var ap=new su(np.shape,"return tan(x);");return this.compileAndRun(ap,[np])},rp.prototype.asin=function(np){var ap=new su(np.shape,Eu);return this.compileAndRun(ap,[np])},rp.prototype.acos=function(np){var ap=new su(np.shape,Ru);return this.compileAndRun(ap,[np])},rp.prototype.atan=function(np){var ap=new su(np.shape,Iu);return this.compileAndRun(ap,[np])},rp.prototype.atan2=function(np,ap){var sp=a$1().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ca(`
  vec4 result = atan(a, b);
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,np.shape,ap.shape):new ba(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return atan(a, b);
`,np.shape,ap.shape);return this.compileAndRun(sp,[np,ap])},rp.prototype.sinh=function(np){var ap=new su(np.shape,`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`);return this.compileAndRun(ap,[np])},rp.prototype.cosh=function(np){var ap=new su(np.shape,`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`);return this.compileAndRun(ap,[np])},rp.prototype.tanh=function(np){var ap=new su(np.shape,`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`);return this.compileAndRun(ap,[np])},rp.prototype.asinh=function(np){var ap=new su(np.shape,ku);return this.compileAndRun(ap,[np])},rp.prototype.acosh=function(np){var ap=new su(np.shape,Su);return this.compileAndRun(ap,[np])},rp.prototype.atanh=function(np){var ap=new su(np.shape,Au);return this.compileAndRun(ap,[np])},rp.prototype.erf=function(np){var ap=new su(np.shape,`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = 0.3275911;
  float a1 = 0.254829592;
  float a2 = -0.284496736;
  float a3 = 1.421413741;
  float a4 = -1.453152027;
  float a5 = 1.061405429;

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`);return this.compileAndRun(ap,[np])},rp.prototype.step=function(np,ap){var sp=new su(np.shape,function(lp){return lp===void 0&&(lp=0),cu+`
    return x > 0.0 ? 1.0 : float(`+lp+`);
  `}(ap));return this.compileAndRun(sp,[np])},rp.prototype.conv2dByMatMul=function(np,ap,sp,lp,up,cp){var dp=np.shape,fp=this.texData.get(np.dataId),pp=sp.inChannels,hp=dp[0]*dp[1]*dp[2],mp=sp.outChannels,gp=sp.dataFormat==="channelsLast",vp=(hp===1||mp===1)&&pp>1e3,xp=dp[2]%2!=0&&!!fp.isPacked;if(vp||!a$1().getBool("WEBGL_LAZILY_UNPACK")||!a$1().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!xp){var Sp=gp?dp[0]*dp[1]*dp[2]:dp[0]*dp[2]*dp[3],yp=this.reshape(np,[1,Sp,sp.inChannels]),bp=this.reshape(ap,[1,sp.inChannels,sp.outChannels]);return this.reshape(this.fusedBatchMatMul({a:yp,b:bp,transposeA:!1,transposeB:!1,bias:lp,activation:up,preluActivationWeights:cp}),sp.outShape)}var Ep=gp?dp[0]*dp[1]*(dp[2]+1):dp[0]*dp[2]*(dp[3]+1),wp={dataId:np.dataId,shape:[1,Ep,sp.inChannels],dtype:np.dtype},_p=fp.shape;fp.shape=fp.shape.slice(),fp.shape[fp.shape.length-2]++,g(Se(fp.shape,wp.shape),function(){return"packed reshape "+fp.shape+" to "+wp.shape+" isn't free"});var Rp=this.reshape(ap,[1,sp.inChannels,sp.outChannels]),$p=this.fusedBatchMatMul({a:wp,b:Rp,transposeA:!1,transposeB:!1,bias:lp,activation:up,preluActivationWeights:cp}),Cp=this.texData.get($p.dataId);return g(Cp.isPacked,function(){return"batchMatMul result is expected to be packed"}),fp.shape=_p,Cp.shape=sp.outShape,Nt.makeTensorFromDataId($p.dataId,sp.outShape,$p.dtype)},rp.prototype.conv2dWithIm2Row=function(np,ap,sp,lp,up,cp){var dp=sp.filterWidth,fp=sp.filterHeight,pp=sp.inChannels,hp=sp.outWidth,mp=sp.outHeight,gp=sp.dataFormat==="channelsLast",vp=dp*fp*pp,xp=mp*hp,Sp=[vp,xp],yp=np.squeeze([0]),bp=ap.reshape([1,vp,-1]),Ep=new Ri(Sp,yp.shape,sp),wp=this.compileAndRun(Ep,[yp]).reshape([1,Sp[0],Sp[1]]),_p=lp!=null,Rp=cp!=null,$p=up?Pu(up,!0):null,Cp=new Ti(wp.shape,[1,xp,sp.outChannels],!0,!1,_p,$p,Rp),Ap=[wp,bp];lp&&Ap.push(lp),Rp&&Ap.push(cp);var Op=this.compileAndRun(Cp,Ap);return gp?Op.reshape([1,mp,hp,sp.outChannels]):Op.reshape([1,sp.outChannels,mp,hp])},rp.prototype.fusedConv2d=function(np){var ap=np.input,sp=np.filter,lp=np.convInfo,up=np.bias,cp=np.activation,dp=np.preluActivationWeights;if(lp.filterHeight===1&&lp.filterWidth===1&&lp.dilationHeight===1&&lp.dilationWidth===1&&lp.strideHeight===1&&lp.strideWidth===1&&(lp.padInfo.type==="SAME"||lp.padInfo.type==="VALID"))return this.conv2dByMatMul(ap,sp,lp,up,cp,dp);if(a$1().getBool("WEBGL_CONV_IM2COL")&&ap.shape[0]===1)return this.conv2dWithIm2Row(ap,sp,lp,up,cp,dp);var fp=up!=null,pp=dp!=null,hp=cp?Pu(cp,!1):null,mp=new Ma(lp,fp,hp,pp),gp=[ap,sp];return up&&gp.push(up),dp&&gp.push(dp),this.compileAndRun(mp,gp)},rp.prototype.conv2d=function(np,ap,sp){if(sp.filterHeight===1&&sp.filterWidth===1&&sp.dilationHeight===1&&sp.dilationWidth===1&&sp.strideHeight===1&&sp.strideWidth===1&&(sp.padInfo.type==="SAME"||sp.padInfo.type==="VALID"))return this.conv2dByMatMul(np,ap,sp);if(a$1().getBool("WEBGL_CONV_IM2COL")&&np.shape[0]===1)return this.conv2dWithIm2Row(np,ap,sp);var lp=new Ma(sp);return this.compileAndRun(lp,[np,ap])},rp.prototype.conv2dDerInput=function(np,ap,sp){var lp=new Ta(sp);return this.compileAndRun(lp,[np,ap])},rp.prototype.conv2dDerFilter=function(np,ap,sp){var lp=new Da(sp);return this.compileAndRun(lp,[np,ap])},rp.prototype.fusedDepthwiseConv2D=function(np){var ap,sp=np.input,lp=np.filter,up=np.convInfo,cp=np.bias,dp=np.activation,fp=np.preluActivationWeights,pp=a$1().getBool("WEBGL_PACK_DEPTHWISECONV")&&up.strideWidth<=2&&up.outChannels/up.inChannels==1,hp=dp?Pu(dp,pp):null,mp=[sp,lp],gp=cp!=null,vp=fp!=null;return gp&&mp.push(cp),vp&&mp.push(fp),pp?(ap=new La(up,gp,hp,vp),this.compileAndRun(ap,mp)):(ap=new Pa(up,gp,hp,vp),this.compileAndRun(ap,mp))},rp.prototype.depthwiseConv2D=function(np,ap,sp){var lp;return a$1().getBool("WEBGL_PACK_DEPTHWISECONV")&&sp.strideWidth<=2&&sp.outChannels/sp.inChannels==1?(lp=new La(sp),this.compileAndRun(lp,[np,ap])):(lp=new Pa(sp),this.compileAndRun(lp,[np,ap]))},rp.prototype.depthwiseConv2DDerInput=function(np,ap,sp){var lp=new _a(sp);return this.compileAndRun(lp,[np,ap])},rp.prototype.depthwiseConv2DDerFilter=function(np,ap,sp){var lp=new Oa(sp);return this.compileAndRun(lp,[np,ap])},rp.prototype.conv3d=function(np,ap,sp){var lp=new Ba(sp);return this.compileAndRun(lp,[np,ap])},rp.prototype.conv3dDerInput=function(np,ap,sp){var lp=new Fa(sp);return this.compileAndRun(lp,[np,ap])},rp.prototype.conv3dDerFilter=function(np,ap,sp){var lp=new Na(sp);return this.compileAndRun(lp,[np,ap])},rp.prototype.maxPool=function(np,ap){var sp=new Bi(ap,"max",!1);return this.compileAndRun(sp,[np])},rp.prototype.avgPool=function(np,ap){var sp=new Bi(ap,"avg",!1);return this.compileAndRun(sp,[np],"float32")},rp.prototype.maxPoolBackprop=function(np,ap,sp,lp){var up=new Bi(lp,"max",!0),cp=this.compileAndRun(up,[ap]),dp=new Ai(lp),fp=this.compileAndRun(dp,[np,cp],ap.dtype);return cp.dispose(),fp},rp.prototype.avgPoolBackprop=function(np,ap,sp){var lp=new ca(sp);return this.compileAndRun(lp,[np],ap.dtype)},rp.prototype.cast=function(np,ap){return So(np,ap,this)},rp.prototype.unstack=function(np,ap){for(var sp=np.shape[ap],lp=new Array(np.rank-1),up=0,cp=0;cp<np.rank;cp++)cp!==ap&&(lp[up++]=np.shape[cp]);var dp=new Array(np.rank).fill(0),fp=np.shape.slice();fp[ap]=1;var pp=new Array(sp);for(cp=0;cp<pp.length;cp++)dp[ap]=cp,pp[cp]=this.slice(np,dp,fp).reshape(lp);return pp},rp.prototype.avgPool3d=function(np,ap){var sp=new Pi(ap,"avg",!1);return this.compileAndRun(sp,[np],"float32")},rp.prototype.avgPool3dBackprop=function(np,ap,sp){var lp=new la(sp);return this.compileAndRun(lp,[np],ap.dtype)},rp.prototype.maxPool3d=function(np,ap){var sp=new Pi(ap,"max",!1);return this.compileAndRun(sp,[np],"float32")},rp.prototype.maxPool3dBackprop=function(np,ap,sp,lp){var up=new Pi(lp,"max",!0),cp=this.compileAndRun(up,[ap]),dp=new Di(lp),fp=this.compileAndRun(dp,[np,cp],ap.dtype);return cp.dispose(),fp},rp.prototype.reshape=function(np,ap){var sp=this.texData.get(np.dataId);if(sp.isPacked&&!Se(np.shape,ap)&&(sp.texture===null||!Se(sp.shape,ap))){var lp=this.packedReshape(np,ap);return Nt.makeTensorFromDataId(lp.dataId,lp.shape,lp.dtype)}return Ao(np,ap)},rp.prototype.resizeBilinear=function(np,ap,sp,lp){var up=a$1().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new zi(np.shape,ap,sp,lp):new Vi(np.shape,ap,sp,lp);return this.compileAndRun(up,[np])},rp.prototype.resizeBilinearBackprop=function(np,ap,sp){var lp=new Ui(np,ap,sp);return this.compileAndRun(lp,[np])},rp.prototype.resizeNearestNeighbor=function(np,ap,sp,lp){var up=new Hi(np.shape,ap,sp,lp);return this.compileAndRun(up,[np])},rp.prototype.resizeNearestNeighborBackprop=function(np,ap,sp){var lp=new Gi(np,ap,sp);return this.compileAndRun(lp,[np])},rp.prototype.multinomial=function(np,ap,sp,lp){var up=ap?np:io(np),cp=up.shape[0],dp=up.shape[1],fp=new Ni(cp,dp,sp),pp=fp.getCustomSetupFunc(lp);return this.compileAndRun(fp,[up],"int32",pp)},rp.prototype.oneHot=function(np,ap,sp,lp){var up=new Fi(np.size,ap,sp,lp);return this.compileAndRun(up,[np])},rp.prototype.diag=function(np){var ap=new qa(np.size);return this.compileAndRun(ap,[np])},rp.prototype.nonMaxSuppression=function(np,ap,sp,lp,up){return un("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),Mo(np.dataSync(),ap.dataSync(),sp,lp,up)},rp.prototype.cropAndResize=function(np,ap,sp,lp,up,cp){var dp=new Wa(np.shape,ap.shape,lp,up,cp);return this.compileAndRun(dp,[np,ap,sp])},rp.prototype.depthToSpace=function(np,ap,sp){g(ap>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+ap});var lp=np.shape[0],up=sp==="NHWC"?np.shape[1]:np.shape[2],cp=sp==="NHWC"?np.shape[2]:np.shape[3],dp=sp==="NHWC"?np.shape[3]:np.shape[1],fp=up*ap,pp=cp*ap,hp=dp/(ap*ap),mp=new Ha(sp==="NHWC"?[lp,fp,pp,hp]:[lp,hp,fp,pp],ap,sp);return this.compileAndRun(mp,[np])},rp.prototype.split=function(np,ap,sp){return Po(np,ap,sp)},rp.prototype.scatterND=function(np,ap,sp){var lp=Hr(0,np,sp),up=lp.sliceRank,cp=lp.numUpdates,dp=lp.sliceSize,fp=lp.strides,pp=lp.outputSize,hp=[pp/dp,dp],mp=np.reshape([cp,up]),gp=ap.reshape([cp,dp]);if(pp===0)return Ao(kn([]),sp);var vp=An(0),xp=new ji(cp,up,mp.rank,gp.rank,fp,hp);return this.compileAndRun(xp,[gp,mp,vp]).reshape(sp)},rp.prototype.sparseToDense=function(np,ap,sp,lp){var up=Hr(0,np,sp),cp=up.sliceRank,dp=up.numUpdates,fp=up.strides,pp=up.outputSize,hp=new ji(dp,cp,np.rank,ap.rank,fp,[pp,1],!1);return this.compileAndRun(hp,[ap,np,lp]).reshape(sp)},rp.prototype.fft=function(np){return this.fftImpl(np,!1)},rp.prototype.ifft=function(np){return this.fftImpl(np,!0)},rp.prototype.fftImpl=function(np,ap){var sp=this.texData.get(np.dataId),lp=new Ja(Ya,np.shape,ap),up=new Ja(Qa,np.shape,ap),cp=[this.makeComplexComponentTensorInfo(np,sp.complexTensors.real),this.makeComplexComponentTensorInfo(np,sp.complexTensors.imag)],dp=this.compileAndRun(lp,cp),fp=this.compileAndRun(up,cp),pp=this.complex(dp,fp).as2D(np.shape[0],np.shape[1]);return dp.dispose(),fp.dispose(),pp},rp.prototype.gatherND=function(np,ap){var sp=ap.shape,lp=sp[sp.length-1],up=Ur(np,ap),cp=up[0],dp=up[1],fp=up[2],pp=up[3],hp=ap.reshape([dp,lp]),mp=np.reshape([np.size/fp,fp]),gp=new ri(lp,pp,[dp,fp]);return this.compileAndRun(gp,[mp,hp]).reshape(cp)},rp.prototype.fill=function(np,ap,sp){if((sp=sp||z(ap))==="string"){var lp=F(sp,w$1(np));return lp.fill(ap),Nt.makeTensor(lp,np,sp,this)}var up=new Za(np,ap),cp=up.getCustomSetupFunc(ap);return this.compileAndRun(up,[],sp,cp)},rp.prototype.onesLike=function(np){if(np.dtype==="string")throw new Error("onesLike is not supported under string dtype");return this.fill(np.shape,1,np.dtype)},rp.prototype.zerosLike=function(np){return this.fill(np.shape,np.dtype==="string"?"":0,np.dtype)},rp.prototype.linspace=function(np,ap,sp){return Do(np,ap,sp)},rp.prototype.makeTensorInfo=function(np,ap){var sp=this.write(null,np,ap);return this.texData.get(sp).usage=null,{dataId:sp,shape:np,dtype:ap}},rp.prototype.makeOutput=function(np,ap){var sp=this.makeTensorInfo(np,ap).dataId;return Nt.makeTensorFromDataId(sp,np,ap,this)},rp.prototype.unpackTensor=function(np){var ap=new Mu(np.shape);return this.runWebGLProgram(ap,[np],np.dtype)},rp.prototype.packTensor=function(np){var ap=new Oi(np.shape);return this.runWebGLProgram(ap,[np],np.dtype,null,!0)},rp.prototype.packedReshape=function(np,ap){var sp=[Ce(np.shape)].concat(Ee(np.shape)),lp={dtype:np.dtype,shape:sp,dataId:np.dataId},up=[Ce(ap)].concat(Ee(ap)),cp=new Wi(up,sp),dp=this.runWebGLProgram(cp,[lp],np.dtype,null,!0);return{dataId:dp.dataId,shape:ap,dtype:dp.dtype}},rp.prototype.decode=function(np){var ap,sp=this.texData.get(np),lp=sp.isPacked,up=sp.shape,cp=sp.dtype,dp=Re(up);return ap=lp?new Ga(dp):new za(dp),{dtype:cp,shape:up,dataId:this.runWebGLProgram(ap,[{shape:dp,dtype:cp,dataId:np}],cp,null,!0).dataId}},rp.prototype.runWebGLProgram=function(np,ap,sp,lp,up){var cp=this;up===void 0&&(up=!1);var dp=this.makeTensorInfo(np.outputShape,sp),fp=this.texData.get(dp.dataId);if(np.packedOutput&&(fp.isPacked=!0),np.outPackingScheme===_t.DENSE){var pp=Gt(np.outputShape);fp.texShape=pp.map(function(Ep){return 2*Ep})}if(np.outTexUsage!=null&&(fp.usage=np.outTexUsage),w$1(dp.shape)===0)return fp.values=N(dp.dtype,0),dp;var hp=[],mp=ap.map(function(Ep){if(Ep.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var wp=cp.texData.get(Ep.dataId);if(wp.texture==null){if(!np.packedInputs&&w$1(Ep.shape)<=a$1().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:Ep.shape,texData:null,isUniform:!0,uniformValues:wp.values};np.packedInputs&&(wp.isPacked=!0,wp.shape=Ep.shape)}else if(!!wp.isPacked!=!!np.packedInputs)Ep=wp.isPacked?cp.unpackTensor(Ep):cp.packTensor(Ep),hp.push(Ep),wp=cp.texData.get(Ep.dataId);else if(wp.isPacked&&!Se(wp.shape,Ep.shape)){var _p=Ep,Rp=Ep.shape;Ep.shape=wp.shape,Ep=cp.packedReshape(Ep,Rp),hp.push(Ep),wp=cp.texData.get(Ep.dataId),_p.shape=Rp}return cp.uploadToGPU(Ep.dataId),{shape:Ep.shape,texData:wp,isUniform:!1}});this.uploadToGPU(dp.dataId);var gp,vp={shape:dp.shape,texData:fp,isUniform:!1},xp=function(Ep,wp,_p){var Rp="";wp.concat(_p).forEach(function(Ap){var Op=Ap.texData!=null&&Ap.texData.slice!=null&&Ap.texData.slice.flatOffset>0,Lp=Ap.isUniform?"uniform":Ap.texData.texShape;Rp+=Ap.shape+"_"+Lp+"_"+Op});var $p=Ep.userCode,Cp=Ep.constructor.name;return Cp+="_"+Rp+"_"+$p}(np,mp,vp),Sp=this.getAndSaveBinary(xp,function(){return function(Ep,wp,_p,Rp){var $p=wp.userCode,Cp=_p.map(function(Tp,Np){var jp={logicalShape:Tp.shape,texShape:Tp.isUniform?null:Tp.texData.texShape,isUniform:Tp.isUniform,isPacked:!Tp.isUniform&&Tp.texData.isPacked,flatOffset:null};return Tp.texData!=null&&Tp.texData.slice!=null&&Tp.texData.slice.flatOffset>0&&(jp.flatOffset=Tp.texData.slice.flatOffset),{name:wp.variableNames[Np],shapeInfo:jp}}),Ap=Cp.map(function(Tp){return Tp.shapeInfo}),Op={logicalShape:Rp.shape,texShape:Rp.texData.texShape,isUniform:!1,isPacked:Rp.texData.isPacked,flatOffset:null},Lp=Yo(Cp,Op,$p,wp.packedInputs),Mp=Ep.createProgram(Lp),kp=null,Dp=Ep.getUniformLocation(Mp,"NAN",!1);a$1().getNumber("WEBGL_VERSION")===1&&(kp=Ep.getUniformLocation(Mp,"INFINITY",!1));for(var Fp={},Ip=0;Ip<wp.variableNames.length;Ip++){var Pp=wp.variableNames[Ip];Fp[Pp]=Ep.getUniformLocation(Mp,Pp,!1),Fp["offset"+Pp]=Ep.getUniformLocation(Mp,"offset"+Pp,!1)}return{program:wp,source:Lp,webGLProgram:Mp,uniformLocations:Fp,inShapeInfos:Ap,outShapeInfo:Op,infLoc:kp,nanLoc:Dp}}(cp.gpgpu,np,mp,vp)}),yp=this.activeTimers!=null;if(yp&&(gp=this.startTimer()),function(Ep,wp,_p,Rp,$p){Ei(wp.inShapeInfos,_p),Ei([wp.outShapeInfo],[Rp]);var Cp=Rp.texData.texture,Ap=Rp.texData.texShape;Rp.texData.isPacked?Ep.setOutputPackedMatrixTexture(Cp,Ap[0],Ap[1]):Ep.setOutputMatrixTexture(Cp,Ap[0],Ap[1]),Ep.setProgram(wp.webGLProgram),a$1().getNumber("WEBGL_VERSION")===1&&wp.infLoc!==null&&Ep.gl.uniform1f(wp.infLoc,1/0),wp.nanLoc!==null&&Ep.gl.uniform1f(wp.nanLoc,NaN),_p.forEach(function(Op,Lp){var Mp=wp.program.variableNames[Lp],kp=wp.uniformLocations[Mp],Dp=wp.uniformLocations["offset"+Mp];if(kp!=null)if(Op.isUniform)if(w$1(Op.shape)<2)Ep.gl.uniform1f(kp,Op.uniformValues[0]);else{var Fp=Op.uniformValues;Fp instanceof Float32Array||(Fp=new Float32Array(Fp)),Ep.gl.uniform1fv(kp,Fp)}else Op.texData.slice!=null&&Dp!=null&&Ep.gl.uniform1i(Dp,Op.texData.slice.flatOffset),Ep.setInputMatrixTexture(Op.texData.texture,kp,Lp)}),$p!=null&&$p(Ep,wp.webGLProgram),Ep.executeProgram()}(this.gpgpu,Sp,mp,vp,lp),hp.forEach(function(Ep){return cp.disposeData(Ep.dataId)}),yp&&(gp=this.endTimer(gp),this.activeTimers.push({name:np.constructor.name,query:this.getQueryTime(gp)})),!a$1().getBool("WEBGL_LAZILY_UNPACK")&&fp.isPacked&&up===!1){var bp=this.unpackTensor(dp);return this.disposeData(dp.dataId),bp}return dp},rp.prototype.compileAndRun=function(np,ap,sp,lp,up){up===void 0&&(up=!1),sp=sp||ap[0].dtype;var cp=this.runWebGLProgram(np,ap,sp,lp,up);return Nt.makeTensorFromDataId(cp.dataId,cp.shape,cp.dtype)},rp.prototype.getAndSaveBinary=function(np,ap){return np in this.binaryCache||(this.binaryCache[np]=ap()),this.binaryCache[np]},rp.prototype.getTextureManager=function(){return this.textureManager},rp.prototype.dispose=function(){this.disposed||(this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.fromPixels2DContext!=null&&this.fromPixels2DContext.canvas.remove&&this.fromPixels2DContext.canvas.remove(),this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},rp.prototype.floatPrecision=function(){var np=this;return this.floatPrecisionValue==null&&(this.floatPrecisionValue=je(function(){if(!a$1().get("WEBGL_RENDER_FLOAT32_ENABLED")){var ap=a$1().getBool("DEBUG");a$1().set("DEBUG",!1);var sp=np.abs(An(1e-8)).dataSync()[0];if(a$1().set("DEBUG",ap),sp>0)return 32}return 16})),this.floatPrecisionValue},rp.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},rp.prototype.uploadToGPU=function(np){var ap,sp=this.texData.get(np),lp=sp.shape,up=sp.dtype,cp=sp.values,dp=sp.texture,fp=sp.usage,pp=sp.isPacked;if(dp==null){var hp,mp=this.activeTimers!=null;mp&&(hp=Y());var gp=sp.texShape;if(gp==null&&(gp=Ie(lp,pp),sp.texShape=gp),cp!=null){var vp=Re(lp),xp=void 0,Sp=gp[1],yp=gp[0],bp=cp instanceof Uint8Array;pp?(Sp=(ap=Ht(gp[0],gp[1]))[0],yp=ap[1],xp=new $a(vp,[yp,Sp],bp)):xp=new Xa(vp,[yp,Sp],bp);var Ep=this.makeTensorInfo([yp,Sp],up);this.texData.get(Ep.dataId).usage=bp?Mt.PIXELS:Mt.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(Ep.dataId),Sp,yp,cp);var wp=this.runWebGLProgram(xp,[Ep],up,null,!0),_p=this.texData.get(wp.dataId);sp.texture=_p.texture,sp.texShape=_p.texShape,sp.isPacked=_p.isPacked,sp.usage=_p.usage,this.disposeData(Ep.dataId),this.texData.delete(wp.dataId),sp.values=null,mp&&(this.uploadWaitMs+=Y()-hp)}else{var Rp=this.acquireTexture(gp,fp,up,pp);sp.texture=Rp}}},rp.prototype.convertAndCacheOnCPU=function(np,ap){var sp=this.texData.get(np),lp=sp.dtype;return this.releaseGPUData(np),ap!=null&&(sp.values=function(up,cp){if(cp==="float32"||cp==="complex64")return up;if(cp==="int32"||cp==="bool"){for(var dp=cp==="int32"?new Int32Array(up.length):new Uint8Array(up.length),fp=0;fp<dp.length;++fp)dp[fp]=Math.round(up[fp]);return dp}throw new Error("Unknown dtype "+cp)}(ap,lp)),sp.values},rp.prototype.acquireTexture=function(np,ap,sp,lp){if(this.numBytesInGPU+=this.computeBytes(np,sp),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var up=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: "+up+" MB, most likely due to a memory leak")}return this.textureManager.acquireTexture(np,ap,lp)},rp.prototype.computeBytes=function(np,ap){return np[0]*np[1]*P(ap)},rp}(co);Ft()&&Nt.registerBackend("webgl",function(){return new Wu},2);var Uu=Cn({square_:function(_d){var rp=ln(_d,"x","square"),np=[rp];return Nt.runKernelFunc(function(ap,sp){return sp([rp]),ap.square(rp)},{x:rp},function(ap,sp){var lp=sp[0];return{x:function(){return ap.mul(lp.toFloat().mul(2))}}},"Square",{},np,[])}}),Vu=Cn({abs_:function(_d){var rp=ln(_d,"x","abs");return rp.dtype==="complex64"?Nt.runKernelFunc(function(np){return np.complexAbs(rp)},{$x:rp}):Nt.runKernelFunc(function(np,ap){var sp=np.abs(rp);return ap([rp]),sp},{x:rp},function(np,ap){var sp=ap[0];return{x:function(){return np.mul(sp.toFloat().step(-1))}}},"Abs")}}),zu=Cn({acos_:function(_d){var rp=ln(_d,"x","acos");return Nt.runKernelFunc(function(np,ap){var sp=np.acos(rp);return ap([rp]),sp},{$x:rp},function(np,ap){var sp=ap[0];return{$x:function(){return np.divStrict(An(1).sub(sp.toFloat().square()).sqrt()).neg()}}})}}),Gu=Cn({acosh_:function(_d){var rp=ln(_d,"x","acosh");return Nt.runKernelFunc(function(np,ap){var sp=np.acosh(rp);return ap([rp]),sp},{$x:rp},function(np,ap){var sp=ap[0];return{$x:function(){return np.divStrict(sp.toFloat().square().sub(1).sqrt())}}})}}),Hu=Cn({asin_:function(_d){var rp=ln(_d,"x","asin");return Nt.runKernelFunc(function(np,ap){var sp=np.asin(rp);return ap([rp]),sp},{$x:rp},function(np,ap){var sp=ap[0];return{$x:function(){return np.divStrict(An(1).sub(sp.toFloat().square()).sqrt())}}})}}),qu=Cn({asinh_:function(_d){var rp=ln(_d,"x","asinh");return Nt.runKernelFunc(function(np,ap){var sp=np.asinh(rp);return ap([rp]),sp},{$x:rp},function(np,ap){var sp=ap[0];return{$x:function(){return np.divStrict(An(1).add(sp.toFloat().square()).sqrt())}}})}}),Ku=Cn({atan_:function(_d){var rp=ln(_d,"x","atan");return Nt.runKernelFunc(function(np,ap){var sp=np.atan(rp);return ap([rp]),sp},{$x:rp},function(np,ap){var sp=ap[0];return{$x:function(){return np.div(sp.toFloat().square().add(1))}}})}}),ju=Cn({atanh_:function(_d){var rp=ln(_d,"x","atanh");return Nt.runKernelFunc(function(np,ap){var sp=np.atanh(rp);return ap([rp]),sp},{$x:rp},function(np,ap){var sp=ap[0];return{$x:function(){return np.div(An(1).sub(sp.toFloat().square()))}}})}}),Xu=Cn({ceil_:function(_d){var rp=ln(_d,"x","ceil");return Nt.runKernelFunc(function(np){return np.ceil(rp)},{$x:rp},function(np){return{$x:function(){return zn(np)}}})}}),$u=Cn({clipByValue_:function(_d,rp,np){var ap=ln(_d,"x","clipByValue");return g(rp<=np,function(){return"Error in clip: min ("+rp+") must be less than or equal to max ("+np+")."}),Nt.runKernelFunc(function(sp,lp){var up=sp.clip(ap,rp,np);return lp([ap]),up},{$x:ap},function(sp,lp){var up=lp[0];return{$x:function(){return sp.where(up.greaterEqual(rp).logicalAnd(up.lessEqual(np)),zn(sp))}}})}}),Yu=Cn({cos_:function(_d){var rp=ln(_d,"x","cos");return Nt.runKernelFunc(function(np,ap){var sp=np.cos(rp);return ap([rp]),sp},{$x:rp},function(np,ap){var sp=ap[0];return{$x:function(){return sp.toFloat().sin().neg().mul(np)}}})}}),Qu=Cn({cosh_:function(_d){var rp=ln(_d,"x","cosh");return Nt.runKernelFunc(function(np,ap){var sp=np.cosh(rp);return ap([rp]),sp},{$x:rp},function(np,ap){var sp=ap[0];return{$x:function(){return sp.toFloat().sinh().mulStrict(np)}}})}}),Ju=Cn({erf_:function(_d){var rp=ln(_d,"x","erf");return g(rp.dtype==="int32"||rp.dtype==="float32",function(){return"Input dtype must be `int32` or `float32`."}),rp.dtype==="int32"&&(rp=rp.toFloat()),Nt.runKernelFunc(function(np,ap){var sp=np.erf(rp);return ap([rp]),sp},{$x:rp},function(np,ap){var sp=ap[0];return{$x:function(){return np.mul(sp.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}})}}),Zu=Cn({exp_:function(_d){var rp=ln(_d,"x","exp");return Nt.runKernelFunc(function(np,ap){var sp=np.exp(rp);return ap([sp]),sp},{$x:rp},function(np,ap){return{$x:function(){return np.mulStrict(ap[0])}}})}}),ts=Cn({expm1_:function(_d){var rp=ln(_d,"x","expm1");return Nt.runKernelFunc(function(np,ap){var sp=np.expm1(rp);return ap([rp]),sp},{$x:rp},function(np,ap){var sp=ap[0];return{$x:function(){return np.mul(sp.exp())}}})}}),es=Cn({floor_:function(_d){var rp=ln(_d,"x","floor");return Nt.runKernelFunc(function(np){return np.floor(rp)},{$x:rp},function(np){return{$x:function(){return zn(np)}}})}}),ns=Cn({log_:function(_d){var rp=ln(_d,"x","log");return Nt.runKernelFunc(function(np,ap){var sp=np.log(rp);return ap([rp]),sp},{$x:rp},function(np,ap){var sp=ap[0];return{$x:function(){return np.div(sp.toFloat())}}})}}),rs=Cn({log1p_:function(_d){var rp=ln(_d,"x","log1p");return Nt.runKernelFunc(function(np,ap){var sp=np.log1p(rp);return ap([rp]),sp},{$x:rp},function(np,ap){var sp=ap[0];return{$x:function(){return np.div(sp.add(1))}}})}}),os=Cn({logSigmoid_:function(_d){var rp=ln(_d,"x","logSigmoid");return Nt.runKernelFunc(function(np,ap){var sp=np.softplus(rp.neg()).neg();return ap([rp]),sp},{$x:rp},function(np,ap){var sp=ap[0];return{$x:function(){return np.mul(sp.neg().sigmoid())}}})}}),as=Cn({neg_:function(_d){var rp=ln(_d,"x","neg");return Nt.runKernelFunc(function(np){return np.neg(rp)},{$x:rp},function(np){return{$x:function(){return np.neg()}}})}}),is=Cn({reciprocal_:function(_d){var rp=ln(_d,"x","reciprocal");return Nt.runKernelFunc(function(np,ap){var sp=np.reciprocal(rp);return ap([rp]),sp},{$x:rp},function(np,ap){var sp=ap[0];return{$x:function(){return np.div(sp.square().neg())}}})}}),us=Cn({round_:function(_d){var rp=ln(_d,"x","round");return Nt.runKernelFunc(function(np){return np.round(rp)},{$x:rp},function(np){return{$x:function(){return zn(np)}}})}}),ss=Cn({rsqrt_:function(_d){var rp=ln(_d,"x","rsqrt");return Nt.runKernelFunc(function(np,ap){var sp=np.rsqrt(rp);return ap([rp]),sp},{$x:rp},function(np,ap){var sp=ap[0];return{$x:function(){return np.div(sp.pow(1.5).mul(2)).neg()}}})}}),cs=Cn({sigmoid_:function(_d){var rp=ln(_d,"x","sigmoid");return Nt.runKernelFunc(function(np,ap){var sp=np.sigmoid(rp);return ap([sp]),sp},{x:rp},function(np,ap){var sp=ap[0];return{x:function(){return np.mul(sp.mul(An(1).sub(sp)))}}},"Sigmoid")}}),ls=Cn({sign_:function(_d){var rp=ln(_d,"x","sign");return Nt.runKernelFunc(function(np){return np.sign(rp)},{$x:rp},function(np){return{$x:function(){return zn(np)}}})}}),hs=Cn({isNaN_:function(_d){var rp=ln(_d,"x","isNaN");return Nt.runKernelFunc(function(np){return np.isNaN(rp)},{$x:rp},function(np){return{$x:function(){return zn(np)}}})}}),fs=Cn({isInf_:function(_d){var rp=ln(_d,"x","isInf");return Nt.runKernelFunc(function(np){return np.isInf(rp)},{$x:rp},function(np){return{$x:function(){return zn(np)}}})}}),ps=Cn({isFinite_:function(_d){var rp=ln(_d,"x","isFinite");return Nt.runKernelFunc(function(np){return np.isFinite(rp)},{$x:rp},function(np){return{$x:function(){return zn(np)}}})}}),ds=Cn({sin_:function(_d){var rp=ln(_d,"x","sin");return Nt.runKernelFunc(function(np,ap){var sp=np.sin(rp);return ap([rp]),sp},{$x:rp},function(np,ap){var sp=ap[0];return{$x:function(){return sp.toFloat().cos().mul(np)}}})}}),vs=Cn({sinh_:function(_d){var rp=ln(_d,"x","sinh");return Nt.runKernelFunc(function(np,ap){var sp=np.sinh(rp);return ap([rp]),sp},{$x:rp},function(np,ap){var sp=ap[0];return{$x:function(){return sp.toFloat().cosh().mulStrict(np)}}})}}),ms=Cn({softplus_:function(_d){var rp=ln(_d,"x","softplus");return Nt.runKernelFunc(function(np,ap){var sp=np.softplus(rp);return ap([rp]),sp},{$x:rp},function(np,ap){var sp=ap[0];return{$x:function(){return np.mul(sp.sigmoid())}}})}}),gs=Cn({sqrt_:function(_d){var rp=ln(_d,"x","sqrt");return Nt.runKernelFunc(function(np,ap){var sp=np.sqrt(rp);return ap([rp]),sp},{$x:rp},function(np,ap){var sp=ap[0];return{$x:function(){return np.div(sp.toFloat().sqrt().mul(2))}}})}}),ys=Cn({step_:function(_d,rp){rp===void 0&&(rp=0);var np=ln(_d,"x","step");return Nt.runKernelFunc(function(ap){return ap.step(np,rp)},{$x:np},function(ap){return{$x:function(){return zn(ap)}}})}}),xs=Cn({tan_:function(_d){var rp=ln(_d,"x","tan");return Nt.runKernelFunc(function(np,ap){var sp=np.tan(rp);return ap([rp]),sp},{$x:rp},function(np,ap){var sp=ap[0];return{$x:function(){return np.div(sp.cos().square())}}})}}),bs=Cn({tanh_:function(_d){var rp=ln(_d,"x","tanh");return Nt.runKernelFunc(function(np,ap){var sp=np.tanh(rp);return ap([sp]),sp},{$x:rp},function(np,ap){var sp=ap[0];return{$x:function(){return An(1).sub(sp.square()).mulStrict(np)}}})}});function ws(_d,rp,np,ap,sp,lp){var up,cp,dp=ln(_d,"x","batchNorm"),fp=ln(rp,"mean","batchNorm"),pp=ln(np,"variance","batchNorm");return sp!=null&&(up=ln(sp,"scale","batchNorm")),ap!=null&&(cp=ln(ap,"offset","batchNorm")),g(dp.rank===2,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+dp.rank+"."}),g(fp.rank===2||fp.rank===1,function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+fp.rank+"."}),g(pp.rank===2||pp.rank===1,function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+pp.rank+"."}),up!=null&&g(up.rank===2||up.rank===1,function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+up.rank+"."}),cp!=null&&g(cp.rank===2||cp.rank===1,function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+cp.rank+"."}),Rs(dp,fp,pp,cp,up,lp)}function Cs(_d,rp,np,ap,sp,lp){var up,cp,dp=ln(_d,"x","batchNorm"),fp=ln(rp,"mean","batchNorm"),pp=ln(np,"variance","batchNorm");return sp!=null&&(up=ln(sp,"scale","batchNorm")),ap!=null&&(cp=ln(ap,"offset","batchNorm")),g(dp.rank===3,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+dp.rank+"."}),g(fp.rank===3||fp.rank===1,function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+fp.rank+"."}),g(pp.rank===3||pp.rank===1,function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+pp.rank+"."}),up!=null&&g(up.rank===3||up.rank===1,function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+up.rank+"."}),cp!=null&&g(cp.rank===3||cp.rank===1,function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+cp.rank+"."}),Rs(dp,fp,pp,cp,up,lp)}function Es(_d,rp,np,ap,sp,lp){var up,cp,dp=ln(_d,"x","batchNorm"),fp=ln(rp,"mean","batchNorm"),pp=ln(np,"variance","batchNorm");return sp!=null&&(up=ln(sp,"scale","batchNorm")),ap!=null&&(cp=ln(ap,"offset","batchNorm")),g(dp.rank===4,function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+dp.rank+"."}),g(fp.rank===4||fp.rank===1,function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+fp.rank+"."}),g(pp.rank===4||pp.rank===1,function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+pp.rank+"."}),up!=null&&g(up.rank===4||up.rank===1,function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+up.rank+"."}),cp!=null&&g(cp.rank===4||cp.rank===1,function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+cp.rank+"."}),Rs(dp,fp,pp,cp,up,lp)}function Rs(_d,rp,np,ap,sp,lp){lp==null&&(lp=.001);var up,cp,dp,fp=ln(_d,"x","batchNorm"),pp=ln(rp,"mean","batchNorm"),hp=ln(np,"variance","batchNorm");sp!=null&&(up=ln(sp,"scale","batchNorm")),ap!=null&&(cp=ln(ap,"offset","batchNorm")),g(pp.rank===hp.rank,function(){return"Batch normalization gradient requires mean and variance to have equal ranks."}),g(cp==null||pp.rank===cp.rank,function(){return"Batch normalization gradient requires mean and offset to have equal ranks."}),g(up==null||pp.rank===up.rank,function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}),dp=fp.rank===0||fp.rank===1?fp.as4D(1,1,1,fp.size):fp.rank===2?fp.as4D(1,1,fp.shape[0],fp.shape[1]):fp.rank===3?fp.as4D(1,fp.shape[0],fp.shape[1],fp.shape[2]):fp;var mp=[fp,pp,hp,up];return Nt.runKernelFunc(function(gp,vp){var xp=gp.batchNormalization(dp,Is(pp),Is(hp),lp,Is(up),Is(cp));return vp([fp,pp,hp,up]),xp},{x:fp,mean:pp,variance:hp,scale:up,offset:cp},function(gp,vp){var xp=vp,Sp=xp[0],yp=xp[1],bp=xp[2],Ep=xp[3],wp=Ep??An(1),_p=fo(yp.shape,dp.shape),Rp=[];if(yp.rank===1){for(var $p=0;$p<dp.shape.length-1;++$p)Rp.push(dp.shape[$p]);Rp.push(1)}var Cp=Sp.sub(yp),Ap=gp.mul(wp),Op=ss(bp.add(An(lp))),Lp=Op.mul(Op).mul(Op).mul(An(-.5));return{x:function(){return yp.rank===1?gp.mul(Nr(Op.as4D(1,1,1,yp.shape[0]),Rp)).mul(wp).reshape(Sp.shape):gp.mul(Op).mul(wp).reshape(Sp.shape)},mean:function(){var Mp=Op.mul(An(-1)).mul(Ap);return yp.rank===1&&(Mp=Mp.sum(_p)),Mp.reshape(yp.shape)},variance:function(){var Mp=Lp.mul(Cp).mul(Ap);return yp.rank===1&&(Mp=Mp.sum(_p)),Mp.reshape(yp.shape)},scale:function(){var Mp=Cp.mul(Op),kp=gp.mul(Mp);return yp.rank===1&&(kp=kp.sum(_p)),kp.reshape(yp.shape)},offset:function(){var Mp=gp;return yp.rank===1&&(Mp=Mp.sum(_p)),Mp.reshape(yp.shape)}}},"BatchNormalization",{varianceEpsilon:lp},mp).reshape(fp.shape)}function Is(_d){return _d==null?null:_d.rank===0?_d.as1D():_d.rank===1?_d:_d.rank===2?_d.as4D(1,1,_d.shape[0],_d.shape[1]):_d.rank===3?_d.as4D(1,_d.shape[0],_d.shape[1],_d.shape[2]):_d}function ks(){ze("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon")}var Ss=Cn({batchNormalization2d_:function(_d,rp,np,ap,sp,lp){return ap===void 0&&(ap=.001),ks(),ws(_d,rp,np,lp,sp,ap)}}),As=Cn({batchNormalization3d_:function(_d,rp,np,ap,sp,lp){return ap===void 0&&(ap=.001),ks(),Cs(_d,rp,np,lp,sp,ap)}}),Ds=Cn({batchNormalization4d_:function(_d,rp,np,ap,sp,lp){return ap===void 0&&(ap=.001),ks(),Es(_d,rp,np,lp,sp,ap)}}),Ts=Cn({batchNormalization_:function(_d,rp,np,ap,sp,lp){return ap===void 0&&(ap=.001),ks(),Rs(_d,rp,np,lp,sp,ap)}}),Ns=Cn({batchNorm_:Rs}),Fs=Cn({batchNorm2d_:ws}),Os=Cn({batchNorm3d_:Cs}),_s=Cn({batchNorm4d_:Es}),Ms=Cn({logicalAnd_:function(_d,rp){var np=ln(_d,"a","logicalAnd","bool"),ap=ln(rp,"b","logicalAnd","bool");return po(np.shape,ap.shape),Nt.runKernelFunc(function(sp){return sp.logicalAnd(np,ap)},{$a:np,$b:ap})}}),Bs=Cn({logicalNot_:function(_d){var rp=ln(_d,"x","logicalNot","bool");return Nt.runKernelFunc(function(np){return np.logicalNot(rp)},{$x:rp})}}),Ps=Cn({logicalOr_:function(_d,rp){var np=ln(_d,"a","logicalOr","bool"),ap=ln(rp,"b","logicalOr","bool");return po(np.shape,ap.shape),Nt.runKernelFunc(function(sp){return sp.logicalOr(np,ap)},{$a:np,$b:ap})}}),Ls=Cn({logicalXor_:function(_d,rp){var np=ln(_d,"a","logicalXor","bool"),ap=ln(rp,"b","logicalXor","bool");return po(np.shape,ap.shape),Ps(_d,rp).logicalAnd(Ms(_d,rp).logicalNot())}}),Ws=Cn({where_:function(_d,rp,np){var ap=ln(rp,"a","where"),sp=ln(np,"b","where"),lp=ln(_d,"condition","where","bool");return y(ap.shape,sp.shape,"Error in where: "),lp.rank===1?g(lp.shape[0]===ap.shape[0],function(){return"The first dimension of `a` must match the size of `condition`."}):y(lp.shape,sp.shape,"Error in where: "),Nt.runKernelFunc(function(up,cp){var dp=up.select(lp,ap,sp);return cp([lp]),dp},{$condition:lp,$a:ap,$b:sp},function(up,cp){var dp=cp[0];return{$condition:function(){return zn(dp).toFloat()},$a:function(){return up.mul(dp.cast(up.dtype))},$b:function(){return up.mul(dp.logicalNot().cast(up.dtype))}}})}}),Us=function(_d){return n$1(this,void 0,void 0,function(){var rp,np,ap;return r(this,function(sp){switch(sp.label){case 0:return[4,(rp=ln(_d,"condition","whereAsync","bool")).data()];case 1:return np=sp.sent(),ap=Uo(rp.shape,np),_d!==rp&&rp.dispose(),[2,ap]}})})},Vs=Cn({add_:function(_d,rp){var np,ap=ln(_d,"a","add"),sp=ln(rp,"b","add");np=Rt(ap,sp),ap=np[0],sp=np[1];var lp=po(ap.shape,sp.shape);return Nt.runKernelFunc(function(up){return up.add(ap,sp)},{a:ap,b:sp},function(up){return{a:function(){var cp=up,dp=fo(ap.shape,lp);return dp.length>0&&(cp=cp.sum(dp)),cp.reshape(ap.shape)},b:function(){var cp=up,dp=fo(sp.shape,lp);return dp.length>0&&(cp=cp.sum(dp)),cp.reshape(sp.shape)}}},"Add")}}),zs=Cn({addN_:function(_d){g(Array.isArray(_d),function(){return"The argument passed to tf.addN() must be a list of tensors"}),g(_d.length>=1,function(){return"Must pass at least one tensor to tf.addN(), but got "+_d.length});var rp=_d.map(function(sp,lp){return ln(sp,"tensors"+lp,"addN")}),np=rp[0];rp.forEach(function(sp){if(sp.dtype!==np.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),rp.forEach(function(sp){if(!C(sp.shape,np.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});var ap=rp;return Nt.runKernelFunc(function(sp){return sp.addN(rp)},ap,function(sp){var lp={};return rp.forEach(function(up,cp){lp[cp]=function(){return sp.clone()}}),lp})}}),Gs=Cn({addStrict_:function(_d,rp){var np=ln(_d,"a","addStrict"),ap=ln(rp,"b","addStrict");return y(np.shape,ap.shape,"Error in addStrict: "),np.add(ap)}}),Hs=Cn({atan2_:function(_d,rp){var np,ap=ln(_d,"a","atan2"),sp=ln(rp,"b","atan2");np=Rt(ap,sp),ap=np[0],sp=np[1];var lp=po(ap.shape,sp.shape);return Nt.runKernelFunc(function(up,cp){var dp=up.atan2(ap,sp);return cp([ap,sp]),dp},{$a:ap,$b:sp},function(up,cp){var dp=cp[0],fp=cp[1];return{$a:function(){var pp=Vs(dp.square(),fp.square()),hp=up.mul(fp.div(pp)),mp=fo(dp.shape,lp);return mp.length>0&&(hp=hp.sum(mp)),hp.reshape(dp.shape)},$b:function(){var pp=Vs(dp.square(),fp.square()),hp=as(up.mul(dp.div(pp))),mp=fo(fp.shape,lp);return mp.length>0&&(hp=hp.sum(mp)),hp.reshape(fp.shape)}}})}}),qs=Cn({div_:function(_d,rp){var np,ap=ln(_d,"a","div"),sp=ln(rp,"b","div");if(np=Rt(ap,sp),ap=np[0],sp=np[1],ap.dtype==="int32"&&sp.dtype==="int32")return js(ap,sp);var lp=po(ap.shape,sp.shape);return Nt.runKernelFunc(function(up,cp){var dp=up.realDivide(ap,sp);return cp([ap,sp]),dp},{a:ap,b:sp},function(up,cp){var dp=cp[0],fp=cp[1];return{a:function(){var pp=up.div(fp.toFloat()),hp=fo(dp.shape,lp);return hp.length>0?pp.sum(hp).reshape(dp.shape):pp},b:function(){var pp=up.mul(dp.toFloat()),hp=fo(fp.shape,lp);hp.length>0&&(pp=pp.sum(hp).reshape(fp.shape));var mp=fp.square();return pp.div(mp.toFloat()).neg()}}},"Div")}}),Ks=Cn({divStrict_:function(_d,rp){var np=ln(_d,"a","div"),ap=ln(rp,"b","div");return y(np.shape,ap.shape,"Error in divideStrict: "),np.div(ap)}}),js=Cn({floorDiv_:function(_d,rp){var np,ap=ln(_d,"a","floorDiv"),sp=ln(rp,"b","floorDiv");np=Rt(ap,sp),ap=np[0],sp=np[1];var lp=po(ap.shape,sp.shape);return Nt.runKernelFunc(function(up,cp){var dp=up.floorDiv(ap,sp);return cp([ap,sp]),dp},{$a:ap,$b:sp},function(up,cp){var dp=cp[0],fp=cp[1];return{$a:function(){var pp=up.div(fp.toFloat()),hp=fo(dp.shape,lp);return hp.length>0?pp.sum(hp).reshape(dp.shape):pp},$b:function(){var pp=up.mul(dp.toFloat()),hp=fo(fp.shape,lp);hp.length>0&&(pp=pp.sum(hp).reshape(fp.shape));var mp=fp.square();return pp.div(mp.toFloat()).neg()}}})}}),Xs=Cn({maximum_:function(_d,rp){var np,ap=ln(_d,"a","maximum"),sp=ln(rp,"b","maximum");return np=Rt(ap,sp),ap=np[0],sp=np[1],ap.dtype==="bool"&&(ap=ap.toInt(),sp=sp.toInt()),po(ap.shape,sp.shape),Nt.runKernelFunc(function(lp,up){var cp=lp.maximum(ap,sp);return up([ap,sp]),cp},{$a:ap,$b:sp},function(lp,up){var cp=up[0],dp=up[1];return{$a:function(){return lp.mul(cp.greaterEqual(dp).toFloat())},$b:function(){return lp.mul(cp.less(dp).toFloat())}}})}}),$s=Cn({maximumStrict_:function(_d,rp){var np=ln(_d,"a","maximumStrict"),ap=ln(rp,"b","maximumStrict");return y(np.shape,ap.shape,"Error in maximumStrict: "),np.maximum(ap)}}),Ys=Cn({minimum_:function(_d,rp){var np,ap=ln(_d,"a","minimum"),sp=ln(rp,"b","minimum");return np=Rt(ap,sp),ap=np[0],sp=np[1],ap.dtype==="bool"&&(ap=ap.toInt(),sp=sp.toInt()),po(ap.shape,sp.shape),Nt.runKernelFunc(function(lp,up){var cp=lp.minimum(ap,sp);return up([ap,sp]),cp},{$a:ap,$b:sp},function(lp,up){var cp=up[0],dp=up[1];return{$a:function(){return lp.mul(cp.lessEqual(dp).toFloat())},$b:function(){return lp.mul(cp.greater(dp).toFloat())}}})}}),Qs=Cn({minimumStrict_:function(_d,rp){var np=ln(_d,"a","minimumStrict"),ap=ln(rp,"b","minimumStrict");return y(np.shape,ap.shape,"Error in minimumStrict: "),np.minimum(ap)}}),Js=Cn({mod_:function(_d,rp){var np,ap=ln(_d,"a","mod"),sp=ln(rp,"b","mod");np=Rt(ap,sp),ap=np[0],sp=np[1];var lp=po(ap.shape,sp.shape);return Nt.runKernelFunc(function(up,cp){var dp=up.mod(ap,sp);return cp([ap,sp]),dp},{$a:ap,$b:sp},function(up,cp){var dp=cp[0],fp=cp[1];return{$a:function(){var pp=fo(dp.shape,lp);return pp.length>0?up.sum(pp).reshape(dp.shape):up},$b:function(){var pp=up.mul(dp.div(fp).floor().neg()),hp=fo(fp.shape,lp);return hp.length>0?pp.sum(hp).reshape(fp.shape):pp}}})}}),Zs=Cn({modStrict_:function(_d,rp){var np=ln(_d,"a","modStrict"),ap=ln(rp,"b","modStrict");return y(np.shape,ap.shape,"Error in modStrict: "),np.mod(ap)}}),tc=Cn({mul_:function(_d,rp){var np,ap=ln(_d,"a","mul"),sp=ln(rp,"b","mul");np=Rt(ap,sp),ap=np[0],sp=np[1];var lp=po(ap.shape,sp.shape);return Nt.runKernelFunc(function(up,cp){var dp=up.multiply(ap,sp);return cp([ap,sp]),dp},{a:ap,b:sp},function(up,cp){var dp=cp[0],fp=cp[1];return{a:function(){var pp=up.mul(fp.toFloat()),hp=fo(dp.shape,lp);return hp.length>0?pp.sum(hp).reshape(dp.shape):pp},b:function(){var pp=up.mul(dp.toFloat()),hp=fo(fp.shape,lp);return hp.length>0?pp.sum(hp).reshape(fp.shape):pp}}},"Mul")}}),ec=Cn({mulStrict_:function(_d,rp){var np=ln(_d,"a","mul"),ap=ln(rp,"b","mul");return y(np.shape,ap.shape,"Error in multiplyStrict: "),np.mul(ap)}}),nc=Cn({pow_:function(_d,rp){var np=ln(_d,"base","pow"),ap=ln(rp,"exp","pow"),sp=po(np.shape,ap.shape);return _d=np.cast(Ct(np.dtype,ap.dtype)),rp=ap.cast(Ct(np.dtype,ap.dtype)),Nt.runKernelFunc(function(lp,up){var cp=lp.pow(np,ap);return up([np,ap,cp]),cp},{$base:np,$exp:ap},function(lp,up){var cp=up[0],dp=up[1],fp=up[2];return{$base:function(){var pp=dp.toFloat(),hp=lp.mul(pp.mul(cp.pow(pp.sub(An(1))))),mp=fo(cp.shape,sp);return mp.length>0&&(hp=hp.sum(mp)),hp.reshape(cp.shape)},$exp:function(){var pp=cp.greater(0),hp=cp.log().where(pp,zn(cp)),mp=lp.mul(fp.mul(hp)),gp=fo(dp.shape,sp);return gp.length>0&&(mp=mp.sum(gp)),mp.reshape(dp.shape)}}})}}),rc=Cn({powStrict_:function(_d,rp){return y(_d.shape,rp.shape,"Error in powStrict: "),_d.pow(rp)}}),oc=Cn({squaredDifference_:function(_d,rp){var np,ap=ln(_d,"a","squaredDifference"),sp=ln(rp,"b","squaredDifference");return np=Rt(ap,sp),ap=np[0],sp=np[1],po(ap.shape,sp.shape),Nt.runKernelFunc(function(lp,up){var cp=lp.squaredDifference(ap,sp);return up([ap,sp]),cp},{$a:ap,$b:sp},function(lp,up){var cp=up[0],dp=up[1],fp=An(2);return{$a:function(){return lp.mul(cp.sub(dp).mul(fp))},$b:function(){return lp.mul(dp.sub(cp).mul(fp))}}})}}),ac=Cn({squaredDifferenceStrict_:function(_d,rp){var np=ln(_d,"a","squaredDifferenceStrict"),ap=ln(rp,"b","squaredDifferenceStrict");return y(np.shape,ap.shape,"Error in squaredDifferenceStrict: "),np.squaredDifference(ap)}}),ic=Cn({sub_:function(_d,rp){var np,ap=ln(_d,"a","sub"),sp=ln(rp,"b","sub");np=Rt(ap,sp),ap=np[0],sp=np[1];var lp=po(ap.shape,sp.shape);return Nt.runKernelFunc(function(up){return up.subtract(ap,sp)},{a:ap,b:sp},function(up){return{a:function(){var cp=up,dp=fo(ap.shape,lp);return dp.length>0&&(cp=cp.sum(dp)),cp.reshape(ap.shape)},b:function(){var cp=up,dp=fo(sp.shape,lp);return dp.length>0&&(cp=cp.sum(dp)),cp.neg().reshape(sp.shape)}}},"Sub")}}),uc=Cn({subStrict_:function(_d,rp){var np=ln(_d,"a","subStrict"),ap=ln(rp,"b","subStrict");return y(np.shape,ap.shape,"Error in subStrict: "),np.sub(ap)}}),sc=Cn({equal_:function(_d,rp){var np,ap=ln(_d,"a","equal"),sp=ln(rp,"b","equal");return np=Rt(ap,sp),ap=np[0],sp=np[1],po(ap.shape,sp.shape),Nt.runKernelFunc(function(lp){return lp.equal(ap,sp)},{$a:ap,$b:sp})}}),cc=Cn({equalStrict_:function(_d,rp){var np=ln(_d,"a","equalStrict"),ap=ln(rp,"b","equalStrict");return y(np.shape,ap.shape,"Error in equalStrict: "),np.equal(ap)}}),lc=Cn({greater_:function(_d,rp){var np,ap=ln(_d,"a","greater"),sp=ln(rp,"b","greater");return np=Rt(ap,sp),ap=np[0],sp=np[1],po(ap.shape,sp.shape),Nt.runKernelFunc(function(lp){return lp.greater(ap,sp)},{$a:ap,$b:sp})}}),hc=Cn({greaterEqual_:function(_d,rp){var np,ap=ln(_d,"a","greaterEqual"),sp=ln(rp,"b","greaterEqual");return np=Rt(ap,sp),ap=np[0],sp=np[1],po(ap.shape,sp.shape),Nt.runKernelFunc(function(lp,up){var cp=lp.greaterEqual(ap,sp);return up([ap,sp]),cp},{$a:ap,$b:sp},function(lp,up){var cp=up[0],dp=up[1];return{$a:function(){return zn(cp)},$b:function(){return zn(dp)}}})}}),fc=Cn({greaterEqualStrict_:function(_d,rp){var np=ln(_d,"a","greaterEqualStrict"),ap=ln(rp,"b","greaterEqualStrict");return y(np.shape,ap.shape,"Error in greaterEqualStrict: "),np.greaterEqual(ap)}}),pc=Cn({greaterStrict_:function(_d,rp){var np=ln(_d,"a","greaterStrict"),ap=ln(rp,"b","greaterStrict");return y(np.shape,ap.shape,"Error in greaterStrict: "),np.greater(ap)}}),dc=Cn({less_:function(_d,rp){var np,ap=ln(_d,"a","less"),sp=ln(rp,"b","less");return np=Rt(ap,sp),ap=np[0],sp=np[1],po(ap.shape,sp.shape),Nt.runKernelFunc(function(lp){return lp.less(ap,sp)},{$a:ap,$b:sp})}}),vc=Cn({lessEqual_:function(_d,rp){var np,ap=ln(_d,"a","lessEqual"),sp=ln(rp,"b","lessEqual");return np=Rt(ap,sp),ap=np[0],sp=np[1],po(ap.shape,sp.shape),Nt.runKernelFunc(function(lp){return lp.lessEqual(ap,sp)},{$a:ap,$b:sp})}}),mc=Cn({lessEqualStrict_:function(_d,rp){var np=ln(_d,"a","lessEqualStrict"),ap=ln(rp,"b","lessEqualStrict");return y(np.shape,ap.shape,"Error in lessEqualStrict: "),np.lessEqual(ap)}}),gc=Cn({lessStrict_:function(_d,rp){var np=ln(_d,"a","lessStrict"),ap=ln(rp,"b","lessStrict");return y(np.shape,ap.shape,"Error in lessStrict: "),np.less(ap)}}),yc=Cn({notEqual_:function(_d,rp){var np,ap=ln(_d,"a","notEqual"),sp=ln(rp,"b","notEqual");return np=Rt(ap,sp),ap=np[0],sp=np[1],po(ap.shape,sp.shape),Nt.runKernelFunc(function(lp){return lp.notEqual(ap,sp)},{$a:ap,$b:sp})}}),xc=Cn({notEqualStrict_:function(_d,rp){var np=ln(_d,"a","notEqualStrict"),ap=ln(rp,"b","notEqualStrict");return y(np.shape,ap.shape,"Error in notEqualStrict: "),np.notEqual(ap)}});function bc(_d,rp){for(var np=[],ap=_d;ap<rp;++ap)np.push(ap);return np}function wc(_d){for(var rp=[],np=0;np<_d.length;++np)for(var ap=0;ap<_d[np].length;++ap)rp.push(_d[np][ap]);return rp}var Cc=Cn({gather_:function(_d,rp,np){np===void 0&&(np=0);var ap=ln(_d,"x","gather"),sp=ln(rp,"indices","gather","int32");np=D(np,ap.shape)[0];var lp=function(up,cp,dp){for(var fp=up.shape[dp],pp=[],hp=1,mp=1,gp=0;gp<dp;gp++)pp.push(up.shape[gp]),hp*=up.shape[gp];for(gp=0;gp<cp.rank;gp++)pp.push(cp.shape[gp]);for(gp=dp+1;gp<up.rank;gp++)pp.push(up.shape[gp]),mp*=up.shape[gp];return{batchSize:hp,sliceSize:mp,dimSize:fp,outputShape:pp}}(ap,sp,np);return Nt.runKernelFunc(function(up,cp){var dp=up.gather(ap,sp.flatten(),np);return cp([sp]),dp},{$x:ap},function(up,cp){var dp=cp[0];return{$x:function(){var fp=ap.shape,pp=dp.size,hp=fp.slice(0,np),mp=hp.length,gp=fp.slice(np,fp.length).slice(1),vp=gp.length,xp=bc(0,mp),Sp=bc(mp+1,mp+1+vp),yp=wc([hp,[pp],gp]),bp=up.reshape(yp),Ep=dp.reshape([pp]),wp=wc([[mp],xp,Sp]),_p=bp.transpose(wp),Rp=Ec(_p,Ep,ap.shape[np]),$p=yn(wp);return Rp=Rp.transpose($p)}}}).reshape(lp.outputShape)}}),Ec=Cn({unsortedSegmentSum_:function(_d,rp,np){var ap=ln(_d,"x","unsortedSegmentSum"),sp=ln(rp,"segmentIds","unsortedSegmentSum","int32");return g(E(np),function(){return"numSegments must be of dtype int"}),Nt.runKernelFunc(function(lp,up){var cp=lp.unsortedSegmentSum(ap,sp,np);return up([sp]),cp},{$x:ap},function(lp,up){var cp=up[0];return{$x:function(){return function(dp,fp){for(var pp=Xs(fp,zn(fp)),hp=Cc(dp,pp),mp=hc(fp,An(0,"int32")),gp=hp.rank-mp.rank,vp=0;vp<gp;++vp)mp=dr(mp,vp+1);mp=Ms(mp,Bn(hp.shape,"bool"));var xp=zn(hp);return Ws(mp,hp,xp)}(lp,cp)}}})}}),Rc=function(_d,rp,np){return n$1(this,void 0,void 0,function(){var ap,sp,lp,up,cp,dp,fp,pp,hp,mp,gp,vp,xp;return r(this,function(Sp){switch(Sp.label){case 0:for(ap=ln(_d,"tensor","boolMask"),sp=ln(rp,"mask","boolMask","bool"),lp=np??0,up=sp.rank,cp=ap.shape,g(up>0,function(){return"mask cannot be scalar"}),y(cp.slice(lp,lp+up),sp.shape,"mask's shape must match the first K dimensions of tensor's shape,"),dp=1,fp=lp;fp<lp+up;fp++)dp*=cp[fp];return pp=cp.slice(0,lp).concat([dp],cp.slice(lp+up)),hp=ap.reshape(pp),mp=sp.reshape([-1]),[4,Us(mp)];case 1:return gp=Sp.sent(),vp=gp.squeeze([1]),xp=Cc(hp,vp,lp),_d!==ap&&ap.dispose(),rp!==sp&&sp.dispose(),vp.dispose(),hp.dispose(),mp.dispose(),gp.dispose(),[2,xp]}})})};function Ic(_d,rp,np,ap,sp,lp,up){lp===void 0&&(lp="NHWC"),g(_d.length===rp.rank,function(){return"Length of inShape ("+_d.length+") and rank of dy ("+rp.rank+") must match"});var cp=_d,dp=rp,fp=!1;rp.rank===3&&(fp=!0,dp=rp.as4D(1,rp.shape[0],rp.shape[1],rp.shape[2]),cp=[1,_d[0],_d[1],_d[2]]),g(cp.length===4,function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+cp.length+"."}),g(dp.rank===4,function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+dp.rank}),g(np.rank===4,function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+np.rank});var pp=lp==="NHWC"?cp[3]:cp[1],hp=lp==="NHWC"?dp.shape[3]:dp.shape[1];g(pp===np.shape[2],function(){return"Error in conv2dDerInput: depth of input ("+pp+") must match input depth for filter "+np.shape[2]+"."}),g(hp===np.shape[3],function(){return"Error in conv2dDerInput: depth of output ("+hp+") must match output depth for filter "+np.shape[3]+"."}),up!=null&&g(E(sp),function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+up+" but got pad "+sp+"."});var mp=ko(lp),gp=go(cp,np.shape,ap,1,sp,up,!1,mp),vp=Nt.runKernelFunc(function(xp,Sp){var yp=xp.conv2dDerInput(dp,np,gp);return Sp([np,dp]),yp},{dy4D:dp,filter:np},function(xp,Sp){var yp=Sp[0],bp=Sp[1];return{dy4D:function(){return Dc(xp,yp,ap,sp,lp,1,up)},filter:function(){return Nc(xp,bp,yp.shape,ap,sp,lp,up)}}});return fp?vp.as3D(vp.shape[1],vp.shape[2],vp.shape[3]):vp}function kc(_d){var rp=function(lp){return typeof lp=="number"?[lp,lp,lp]:lp.length===2?[lp[0],lp[1],1]:lp}(_d),np=rp[0],ap=rp[1],sp=rp[2];return np===1&&ap===1&&sp===1}function Sc(_d,rp,np,ap,sp){g(_d.length===rp.rank,function(){return"Length of inShape ("+_d.length+") and rank of dy ("+rp.rank+") must match"});var lp=_d,up=rp,cp=!1;rp.rank===4&&(cp=!0,up=rp.as5D(1,rp.shape[0],rp.shape[1],rp.shape[2],rp.shape[3]),lp=[1,_d[0],_d[1],_d[2],_d[3]]);var dp=lp[4],fp=up.shape[4];g(lp.length===5,function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+lp.length+"."}),g(up.rank===5,function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+up.rank}),g(np.rank===5,function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+np.rank}),g(dp===np.shape[3],function(){return"Error in conv3dDerInput: depth of input ("+dp+") must match input depth for filter "+np.shape[3]+"."}),g(fp===np.shape[4],function(){return"Error in conv3dDerInput: depth of output ("+fp+") must match output depth for filter "+np.shape[4]+"."});var pp=yo(lp,np.shape,ap,1,sp),hp=Nt.runKernelFunc(function(mp){return mp.conv3dDerInput(up,np,pp)},{dy5D:up});return cp?hp.as4D(hp.shape[1],hp.shape[2],hp.shape[3],hp.shape[4]):hp}var Ac=Cn({conv1d_:function(_d,rp,np,ap,sp,lp,up){sp===void 0&&(sp="NWC"),lp===void 0&&(lp=1);var cp=ln(_d,"x","conv1d"),dp=ln(rp,"filter","conv1d"),fp=cp,pp=!1;cp.rank===2&&(pp=!0,fp=cp.as3D(1,cp.shape[0],cp.shape[1])),g(fp.rank===3,function(){return"Error in conv1d: input must be rank 3, but got rank "+fp.rank+"."}),g(dp.rank===3,function(){return"Error in conv1d: filter must be rank 3, but got rank "+dp.rank+"."}),up!=null&&g(E(ap),function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+up+" but got pad "+ap+"."}),g(fp.shape[2]===dp.shape[1],function(){return"Error in conv1d: depth of input ("+fp.shape[2]+") must match input depth for filter "+dp.shape[1]+"."}),g(Io(np,lp),function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+np+" and dilation '"+lp+"'"}),g(sp==="NWC",function(){return"Error in conv1d: got dataFormat of "+sp+" but only NWC is currently supported."});var hp=dp.as4D(1,dp.shape[0],dp.shape[1],dp.shape[2]),mp=fp.as4D(fp.shape[0],1,fp.shape[1],fp.shape[2]),gp=Dc(mp,hp,[1,np],ap,"NHWC",[1,lp],up);return pp?gp.as2D(gp.shape[2],gp.shape[3]):gp.as3D(gp.shape[0],gp.shape[2],gp.shape[3])}}),Dc=Cn({conv2d_:function(_d,rp,np,ap,sp,lp,up){sp===void 0&&(sp="NHWC"),lp===void 0&&(lp=[1,1]);var cp=ln(_d,"x","conv2d"),dp=ln(rp,"filter","conv2d"),fp=cp,pp=!1;cp.rank===3&&(pp=!0,fp=cp.as4D(1,cp.shape[0],cp.shape[1],cp.shape[2])),g(fp.rank===4,function(){return"Error in conv2d: input must be rank 4, but got rank "+fp.rank+"."}),g(dp.rank===4,function(){return"Error in conv2d: filter must be rank 4, but got rank "+dp.rank+"."}),up!=null&&g(E(ap),function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+up+" but got pad "+ap+"."});var hp=sp==="NHWC"?fp.shape[3]:fp.shape[1];g(hp===dp.shape[2],function(){return"Error in conv2d: depth of input ("+hp+") must match input depth for filter "+dp.shape[2]+"."}),g(Io(np,lp),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+np+" and dilations '"+lp+"'"});var mp=ko(sp),gp=go(fp.shape,dp.shape,np,lp,ap,up,!1,mp),vp=Nt.runKernelFunc(function(xp,Sp){var yp=xp.conv2d(fp,dp,gp);return Sp([dp,fp]),yp},{x:fp,$filter:dp},function(xp,Sp){var yp=Sp,bp=yp[0],Ep=yp[1];return g(Ro(lp),function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+lp+"'"}),{x:function(){return Fc(Ep.shape,xp,bp,np,ap,sp)},$filter:function(){return Nc(Ep,xp,bp.shape,np,ap,sp)}}});return pp?vp.as3D(vp.shape[1],vp.shape[2],vp.shape[3]):vp}}),Tc=Cn({conv3d_:function(_d,rp,np,ap,sp,lp){sp===void 0&&(sp="NDHWC"),lp===void 0&&(lp=[1,1,1]);var up=ln(_d,"x","conv3d"),cp=ln(rp,"filter","conv3d"),dp=up,fp=!1;up.rank===4&&(fp=!0,dp=up.as5D(1,up.shape[0],up.shape[1],up.shape[2],up.shape[3])),g(dp.rank===5,function(){return"Error in conv3d: input must be rank 5, but got rank "+dp.rank+"."}),g(cp.rank===5,function(){return"Error in conv3d: filter must be rank 5, but got rank "+cp.rank+"."}),g(dp.shape[4]===cp.shape[3],function(){return"Error in conv3d: depth of input ("+dp.shape[4]+") must match input depth for filter "+cp.shape[3]+"."}),g(function(mp,gp){return kc(mp)||kc(gp)}(np,lp),function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+np+" and dilations '"+lp+"'"}),g(sp==="NDHWC",function(){return"Error in conv3d: got dataFormat of "+sp+" but only NDHWC is currently supported."});var pp=yo(dp.shape,cp.shape,np,lp,ap),hp=Nt.runKernelFunc(function(mp,gp){var vp=mp.conv3d(dp,cp,pp);return gp([dp,cp]),vp},{x:dp,$filter:cp},function(mp,gp){g(kc(lp),function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+lp+"'"});var vp=gp[0],xp=gp[1];return{x:function(){return Sc(vp.shape,mp,xp,np,ap)},$filter:function(){return function(Sp,yp,bp,Ep,wp){var _p=Sp;Sp.rank===4&&(_p=Sp.as5D(1,Sp.shape[0],Sp.shape[1],Sp.shape[2],Sp.shape[3]));var Rp=yp;Rp.rank===4&&(Rp=yp.as5D(1,yp.shape[0],yp.shape[1],yp.shape[2],yp.shape[3])),g(_p.rank===5,function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+_p.shape+"."}),g(Rp.rank===5,function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+Rp.shape+"."}),g(bp.length===5,function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+bp+"."}),g(_p.shape[4]===bp[3],function(){return"Error in conv3dDerFilter: depth of input "+_p.shape[4]+") must match input depth in filter ("+bp[3]+"."}),g(Rp.shape[4]===bp[4],function(){return"Error in conv3dDerFilter: depth of dy ("+Rp.shape[4]+") must match output depth for filter ("+bp[4]+")."});var $p=yo(_p.shape,bp,Ep,1,wp);return Nt.runKernelFunc(function(Cp){return Cp.conv3dDerFilter(_p,Rp,$p)},{x5D:_p,dy5D:Rp})}(vp,mp,xp.shape,np,ap)}}});return fp?hp.as4D(hp.shape[1],hp.shape[2],hp.shape[3],hp.shape[4]):hp}}),Nc=Cn({conv2dDerFilter_:function(_d,rp,np,ap,sp,lp,up){lp===void 0&&(lp="NHWC");var cp=_d;_d.rank===3&&(cp=_d.as4D(1,_d.shape[0],_d.shape[1],_d.shape[2]));var dp=rp;dp.rank===3&&(dp=rp.as4D(1,rp.shape[0],rp.shape[1],rp.shape[2])),g(cp.rank===4,function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+cp.shape+"."}),g(dp.rank===4,function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+dp.shape+"."}),g(np.length===4,function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+np+"."});var fp=lp==="NHWC"?cp.shape[3]:cp.shape[1],pp=lp==="NHWC"?dp.shape[3]:dp.shape[1];g(fp===np[2],function(){return"Error in conv2dDerFilter: depth of input "+fp+") must match input depth in filter ("+np[2]+"."}),g(pp===np[3],function(){return"Error in conv2dDerFilter: depth of dy ("+pp+") must match output depth for filter ("+np[3]+")."}),up!=null&&g(E(sp),function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+up+" but got pad "+sp+"."});var hp=ko(lp),mp=go(cp.shape,np,ap,1,sp,up,!1,hp);return Nt.runKernelFunc(function(gp){return gp.conv2dDerFilter(cp,dp,mp)},{x4D:cp,dy4D:dp})}}),Fc=Cn({conv2dDerInput_:Ic}),Oc=Cn({depthwiseConv2d_:function(_d,rp,np,ap,sp,lp,up){lp===void 0&&(lp=[1,1]);var cp=ln(_d,"x","depthwiseConv2d"),dp=ln(rp,"filter","depthwiseConv2d"),fp=cp,pp=!1;cp.rank===3&&(pp=!0,fp=cp.as4D(1,cp.shape[0],cp.shape[1],cp.shape[2])),g(fp.rank===4,function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+fp.rank+"."}),g(dp.rank===4,function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+dp.rank+"."}),g(fp.shape[3]===dp.shape[2],function(){return"Error in depthwiseConv2d: number of input channels ("+fp.shape[3]+") must match the inChannels dimension in filter "+dp.shape[2]+"."}),lp==null&&(lp=[1,1]),g(Io(np,lp),function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+np+" and dilations '"+lp+"'"}),up!=null&&g(E(ap),function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+up+" but got pad "+ap+"."});var hp=go(fp.shape,dp.shape,np,lp,ap,up,!0),mp=Nt.runKernelFunc(function(gp,vp){var xp=gp.depthwiseConv2D(fp,dp,hp);return vp([fp,dp]),xp},{x:fp,$filter:dp},function(gp,vp){g(Ro(lp),function(){return"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+lp+"'"});var xp=vp[0],Sp=vp[1];return{x:function(){return _c(xp.shape,gp,Sp,hp)},$filter:function(){return Mc(xp,gp,Sp.shape,hp)}}});return pp?mp.as3D(mp.shape[1],mp.shape[2],mp.shape[3]):mp}}),_c=Cn({depthwiseConv2dDerInput_:function(_d,rp,np,ap){var sp=rp,lp=!1;rp.rank===3&&(lp=!0,sp=rp.as4D(1,rp.shape[0],rp.shape[1],rp.shape[2]));var up=Nt.runKernelFunc(function(cp){return cp.depthwiseConv2DDerInput(sp,np,ap)},{dy4D:sp});return lp?up.as3D(up.shape[1],up.shape[2],up.shape[3]):up}}),Mc=Cn({depthwiseConv2dDerFilter_:function(_d,rp,np,ap){var sp=_d;_d.rank===3&&(sp=_d.as4D(1,_d.shape[0],_d.shape[1],_d.shape[2]));var lp=rp;return lp.rank===3&&(lp=rp.as4D(1,rp.shape[0],rp.shape[1],rp.shape[2])),Nt.runKernelFunc(function(up){return up.depthwiseConv2DDerFilter(sp,lp,ap)},{x4D:sp,dy4D:lp})}}),Bc=Cn({separableConv2d_:function(_d,rp,np,ap,sp,lp,up){lp===void 0&&(lp=[1,1]),up===void 0&&(up="NHWC");var cp=ln(_d,"x","separableConv2d"),dp=ln(rp,"depthwiseFilter","separableConv2d"),fp=ln(np,"pointwiseFilter","separableConv2d"),pp=cp,hp=!1;if(cp.rank===3&&(hp=!0,pp=cp.as4D(1,cp.shape[0],cp.shape[1],cp.shape[2])),up==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");g(pp.rank===4,function(){return"Error in separableConv2d: input must be rank 4, but got rank "+pp.rank+"."}),g(dp.rank===4,function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+dp.rank+"."}),g(fp.rank===4,function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+dp.rank+"."}),g(fp.shape[0]===1,function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+fp.shape[0]+"."}),g(fp.shape[1]===1,function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+fp.shape[1]+"."});var mp=dp.shape[2],gp=dp.shape[3];g(fp.shape[2]===mp*gp,function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+mp*gp+", but got "+fp.shape[2]+"."});var vp=Oc(pp,dp,ap,sp,up,lp),xp=Dc(vp,fp,1,"valid",up);return hp?xp.as3D(xp.shape[1],xp.shape[2],xp.shape[3]):xp}}),Pc=Cn({conv2dTranspose_:function(_d,rp,np,ap,sp,lp){return Ic(np,ln(_d,"x","conv2dTranspose"),ln(rp,"filter","conv2dTranspose"),ap,sp,"NHWC",lp)}}),Lc=Cn({conv3dTranspose_:function(_d,rp,np,ap,sp){return Sc(np,ln(_d,"x","conv3dTranspose"),ln(rp,"filter","conv3dTranspose"),ap,sp)}}),Wc=Cn({matMul_:function(_d,rp,np,ap){var sp;np===void 0&&(np=!1),ap===void 0&&(ap=!1);var lp=ln(_d,"a","matMul"),up=ln(rp,"b","matMul");sp=Rt(lp,up),lp=sp[0],up=sp[1];var cp=np?lp.shape[lp.rank-2]:lp.shape[lp.rank-1],dp=ap?up.shape[up.rank-1]:up.shape[up.rank-2],fp=np?lp.shape[lp.rank-1]:lp.shape[lp.rank-2],pp=ap?up.shape[up.rank-2]:up.shape[up.rank-1],hp=lp.shape.slice(0,-2),mp=up.shape.slice(0,-2),gp=w$1(hp),vp=w$1(mp);g(lp.rank>=2&&up.rank>=2&&lp.rank===up.rank,function(){return"Error in matMul: inputs must have the same rank of at least 2, got ranks "+lp.rank+" and "+up.rank+"."}),g(C(hp,mp),function(){return"Error in matMul: outer dimensions ("+hp+") and ("+mp+") of Tensors with shapes "+lp.shape+" and "+up.shape+" must match."}),g(cp===dp,function(){return"Error in matMul: inner shapes ("+cp+") and ("+dp+") of Tensors with shapes "+lp.shape+" and "+up.shape+" and transposeA="+np+" and transposeB="+ap+" must match."});var xp=lp.shape.slice(0,-2).concat([fp,pp]),Sp=np?lp.as3D(gp,cp,fp):lp.as3D(gp,fp,cp),yp=ap?up.as3D(vp,pp,dp):up.as3D(vp,dp,pp),bp={transposeA:np,transposeB:ap};return Nt.runKernelFunc(function(Ep,wp){var _p=Ep.batchMatMul(Sp,yp,np,ap);return wp([Sp,yp]),_p},{a:Sp,b:yp},function(Ep,wp){var _p=wp,Rp=_p[0],$p=_p[1];return np||ap?!np&&ap?{a:function(){return Ep.matMul($p,!1,!1)},b:function(){return Ep.matMul(Rp,!0,!1)}}:np&&!ap?{a:function(){return $p.matMul(Ep,!1,!0)},b:function(){return Rp.matMul(Ep,!1,!1)}}:{a:function(){return $p.matMul(Ep,!0,!0)},b:function(){return Ep.matMul(Rp,!0,!0)}}:{a:function(){return Ep.matMul($p,!1,!0)},b:function(){return Rp.matMul(Ep,!0,!1)}}},"BatchMatMul",bp).reshape(xp)}}),Uc=Cn({dot_:function(_d,rp){var np=ln(_d,"t1","dot"),ap=ln(rp,"t2","dot");g(!(np.rank!==1&&np.rank!==2||ap.rank!==1&&ap.rank!==2),function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+np.rank+" and "+ap.rank+"."});var sp=np.rank===1?np.size:np.shape[1],lp=ap.rank===1?ap.size:ap.shape[0];return g(sp===lp,function(){return"Error in dot: inner dimensions of inputs must match, but got "+sp+" and "+lp+"."}),np.rank===1&&ap.rank===1?np.as2D(1,-1).matMul(ap.as2D(-1,1)).asScalar():np.rank===1&&ap.rank===2?np.as2D(1,-1).matMul(ap.as2D(ap.shape[0],ap.shape[1])).as1D():np.rank===2&&ap.rank===1?np.matMul(ap.as2D(-1,1)).as1D():np.matMul(ap.as2D(ap.shape[0],ap.shape[1]))}}),Vc=Cn({outerProduct_:function(_d,rp){var np=ln(_d,"v1","outerProduct"),ap=ln(rp,"v2","outerProduct");return g(np.rank===1&&ap.rank===1,function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+np.rank+" and "+ap.rank+"."}),np.as2D(-1,1).matMul(ap.as2D(1,-1))}}),zc=Cn({reverse_:function(_d,rp){var np=ln(_d,"x","reverse");if(np.rank===0)return np.clone();var ap=D(rp,np.shape);return Nt.runKernelFunc(function(sp){return sp.reverse(np,ap)},{$x:np},function(sp){return{$x:function(){return sp.reverse(ap)}}}).reshapeAs(np)}}),Gc=Cn({reverse1d_:function(_d){var rp=ln(_d,"x","reverse");return g(rp.rank===1,function(){return"Error in reverse1D: x must be rank 1 but got rank "+rp.rank+"."}),zc(rp,0)}}),Hc=Cn({reverse2d_:function(_d,rp){var np=ln(_d,"x","reverse");return g(np.rank===2,function(){return"Error in reverse2D: x must be rank 2 but got rank "+np.rank+"."}),zc(np,rp)}}),qc=Cn({reverse3d_:function(_d,rp){var np=ln(_d,"x","reverse");return g(np.rank===3,function(){return"Error in reverse3D: x must be rank 3 but got rank "+np.rank+"."}),zc(np,rp)}}),Kc=Cn({reverse4d_:function(_d,rp){var np=ln(_d,"x","reverse");return g(np.rank===4,function(){return"Error in reverse4D: x must be rank 4 but got rank "+np.rank+"."}),zc(np,rp)}});function jc(_d,rp,np,ap,sp,lp){var up=ln(_d,"x","maxPool"),cp=up,dp=!1;up.rank===3&&(dp=!0,cp=up.as4D(1,up.shape[0],up.shape[1],up.shape[2])),ap==null&&(ap=[1,1]),g(cp.rank===4,function(){return"Error in maxPool: input must be rank 4 but got rank "+cp.rank+"."}),g(Io(np,ap),function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+np+" and dilations '"+ap+"'"}),lp!=null&&g(E(sp),function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+lp+" but got pad "+sp+"."});var fp=vo(cp.shape,rp,np,ap,sp,lp),pp=Nt.runKernelFunc(function(hp,mp){var gp=hp.maxPool(cp,fp);return mp([cp,gp]),gp},{x:cp},function(hp,mp){var gp=mp[0],vp=mp[1];return{x:function(){return function(xp,Sp,yp,bp,Ep,wp,_p,Rp){var $p=ln(xp,"dy","maxPoolBackprop"),Cp=ln(Sp,"input","maxPoolBackprop"),Ap=ln(yp,"output","maxPoolBackprop");g(Cp.rank===$p.rank,function(){return"Rank of input ("+Cp.rank+") does not match rank of dy ("+$p.rank+")"}),wp==null&&(wp=[1,1]),g(Io(Ep,wp),function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+Ep+" and dilations '"+wp+"'"}),g($p.rank===4,function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+$p.rank+"."}),g(Cp.rank===4,function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+Cp.rank+"."}),Rp!=null&&g(E(_p),function(){return"Error in maxPoolBackprop: pad must be an integer when using, dimRoundingMode "+Rp+" but got pad "+_p+"."});var Op=vo(Cp.shape,bp,Ep,wp,_p,Rp);return Nt.runKernelFunc(function(Lp){return Lp.maxPoolBackprop($p,Cp,Ap,Op)},{$dy:$p,$input:Cp})}(hp,gp,vp,rp,np,ap,sp)}}});return dp?pp.as3D(pp.shape[1],pp.shape[2],pp.shape[3]):pp}function Xc(_d,rp,np,ap,sp,lp){var up=ln(_d,"x","avgPool","float32");ap==null&&(ap=[1,1]),g(Io(np,ap),function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+np+" and dilations '"+ap+"'"});var cp=up,dp=!1;up.rank===3&&(dp=!0,cp=up.as4D(1,up.shape[0],up.shape[1],up.shape[2])),g(cp.rank===4,function(){return"Error in avgPool: x must be rank 4 but got rank "+cp.rank+"."}),lp!=null&&g(E(sp),function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+lp+" but got pad "+sp+"."});var fp=vo(cp.shape,rp,np,ap,sp,lp),pp=Nt.runKernelFunc(function(hp){return hp.avgPool(cp,fp)},{x:cp},function(hp){return{x:function(){return function(mp,gp,vp,xp,Sp,yp){var bp=ln(mp,"dy","avgPoolBackprop"),Ep=ln(gp,"input","avgPoolBackprop");g(Ep.rank===bp.rank,function(){return"Rank of input ("+Ep.rank+") does not match rank of dy ("+bp.rank+")"}),Sp==null&&(Sp=[1,1]),g(Io(xp,Sp),function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+xp+" and dilations '"+Sp+"'"});var wp=Ep,_p=bp,Rp=!1;Ep.rank===3&&(Rp=!0,wp=Ep.as4D(1,Ep.shape[0],Ep.shape[1],Ep.shape[2]),_p=bp.as4D(1,bp.shape[0],bp.shape[1],bp.shape[2])),g(_p.rank===4,function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+_p.rank+"."}),g(wp.rank===4,function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+wp.rank+"."});var $p=vo(wp.shape,vp,xp,Sp,yp),Cp=Nt.runKernelFunc(function(Ap){return Ap.avgPoolBackprop(_p,wp,$p)},{dy4D:_p,input4D:wp});return Rp?Cp.as3D(Cp.shape[1],Cp.shape[2],Cp.shape[3]):Cp}(hp,cp,rp,np,ap,sp)}}});return pp=pp.cast(up.dtype),dp?pp.as3D(pp.shape[1],pp.shape[2],pp.shape[3]):pp}var $c=Cn({maxPool_:function(_d,rp,np,ap,sp){return jc(_d,rp,np,1,ap,sp)}}),Yc=Cn({avgPool_:function(_d,rp,np,ap,sp){return Xc(_d,rp,np,1,ap,sp)}}),Qc=Cn({pool_:function(_d,rp,np,ap,sp,lp){sp==null&&(sp=[1,1]),lp==null&&(lp=1),ap===0&&(ap="valid");var up=ln(_d,"x","maxPool"),cp=up,dp=!1;up.rank===3&&(dp=!0,cp=up.as4D(1,up.shape[0],up.shape[1],up.shape[2])),g(Io(lp,sp),function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+lp+" and dilations '"+sp+"'"});var fp,pp=vo(cp.shape,rp,lp,sp,ap),hp=[pp.dilationHeight,pp.dilationWidth];fp=ap==="same"?function(wp,_p){var Rp=wp.map(function(Ap,Op){return Ap+(Ap-1)*(_p[Op]-1)}).map(function(Ap){return Ap-1}),$p=Rp.map(function(Ap){return Math.floor(Ap/2)}),Cp=Rp.map(function(Ap,Op){return Ap-$p[Op]});return Rp.map(function(Ap,Op){return[$p[Op],Cp[Op]]})}([pp.filterHeight,pp.filterWidth],hp):[[0,0],[0,0]];var mp=hp[0]===1&&hp[1]===1,gp=function(wp,_p,Rp){var $p=Rp.map(function(Dp){return Dp[0]}),Cp=Rp.map(function(Dp){return Dp[1]}),Ap=wp.concat($p,Cp),Op=_p.map(function(Dp,Fp){return(Dp-Ap[Fp]%Dp)%Dp}),Lp=Cp.map(function(Dp,Fp){return Dp+Op[Fp]}),Mp=_p.map(function(Dp,Fp){return[$p[Fp],Lp[Fp]]}),kp=_p.map(function(Dp,Fp){return[0,Op[Fp]]});return[Mp,kp]}([pp.inHeight,pp.inWidth],hp,fp),vp=gp[0],xp=gp[1],Sp=mp?ap:"valid",yp=mp?cp:Ar(cp,hp,vp),bp=(np==="avg"?function(){return Xc(yp,rp,lp,1,Sp)}:function(){return jc(yp,rp,lp,1,Sp)})(),Ep=mp?bp:cr(bp,hp,xp);return dp?Ep.as3D(Ep.shape[1],Ep.shape[2],Ep.shape[3]):Ep}}),Jc=Cn({maxPool3d_:function(_d,rp,np,ap,sp,lp,up){lp===void 0&&(lp="NDHWC");var cp=ln(_d,"x","maxPool3d"),dp=cp,fp=!1;cp.rank===4&&(fp=!0,dp=cp.as5D(1,cp.shape[0],cp.shape[1],cp.shape[2],cp.shape[3])),up==null&&(up=[1,1,1]),g(dp.rank===5,function(){return"Error in maxPool3d: x must be rank 5 but got rank "+dp.rank+"."}),g(lp==="NDHWC",function(){return"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+lp}),g(Io(np,up),function(){return"Error in maxPool3d: Either strides or dilations must be 1. Got strides "+np+" and dilations '"+up+"'"}),sp!=null&&g(E(ap),function(){return"Error in maxPool3d: pad must be an integer when using, dimRoundingMode "+sp+" but got pad "+ap+"."});var pp=mo(dp.shape,rp,np,up,ap,sp,lp),hp=Nt.runKernelFunc(function(mp,gp){var vp=mp.maxPool3d(dp,pp);return gp([dp,vp]),vp},{x:dp},function(mp,gp){var vp=gp[0],xp=gp[1];return{x:function(){return function(Sp,yp,bp,Ep,wp,_p,Rp,$p){var Cp=ln(Sp,"dy","maxPool3dBackprop"),Ap=ln(yp,"input","maxPool3dBackprop"),Op=ln(bp,"output","maxPool3dBackprop"),Lp=Cp,Mp=Ap,kp=Op,Dp=!1;Ap.rank===4&&(Dp=!0,Lp=Cp.as5D(1,Cp.shape[0],Cp.shape[1],Cp.shape[2],Cp.shape[3]),Mp=Ap.as5D(1,Ap.shape[0],Ap.shape[1],Ap.shape[2],Ap.shape[3]),kp=Op.as5D(1,Op.shape[0],Op.shape[1],Op.shape[2],Op.shape[3])),g(Lp.rank===5,function(){return"Error in maxPool3dBackprop: dy must be rank 5 but got rank "+Lp.rank+"."}),g(Mp.rank===5,function(){return"Error in maxPool3dBackprop: input must be rank 5 but got rank "+Mp.rank+"."}),g(kp.rank===5,function(){return"Error in maxPool3dBackprop: output must be rank 5 but got rank "+kp.rank+"."}),_p==null&&(_p=[1,1,1]),g(Io(wp,_p),function(){return"Error in maxPool3dBackprop: Either strides or dilations must be 1. Got strides "+wp+" and dilations '"+_p+"'"}),$p!=null&&g(E(Rp),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+$p+" but got pad "+Rp+"."});var Fp=mo(Mp.shape,Ep,wp,_p,Rp,$p),Ip=Nt.runKernelFunc(function(Pp){return Pp.maxPool3dBackprop(Lp,Mp,kp,Fp)},{dy5D:Lp,input5D:Mp});return Dp?Ip.as4D(Ip.shape[1],Ip.shape[2],Ip.shape[3],Ip.shape[4]):Ip}(mp,vp,xp,rp,np,up,ap,sp)}}});return fp?hp.as4D(hp.shape[1],hp.shape[2],hp.shape[3],hp.shape[4]):hp}}),Zc=Cn({avgPool3d_:function(_d,rp,np,ap,sp,lp,up){lp===void 0&&(lp="NDHWC");var cp=ln(_d,"x","avgPool3d","float32"),dp=cp,fp=!1;cp.rank===4&&(fp=!0,dp=cp.as5D(1,cp.shape[0],cp.shape[1],cp.shape[2],cp.shape[3])),up==null&&(up=[1,1,1]),g(dp.rank===5,function(){return"Error in avgPool3d: x must be rank 5 but got rank "+dp.rank+"."}),g(lp==="NDHWC",function(){return"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+lp}),g(Io(np,up),function(){return"Error in avgPool3d: Either strides or dilations must be 1. Got strides "+np+" and dilations '"+up+"'"}),sp!=null&&g(E(ap),function(){return"Error in avgPool3d: pad must be an integer when using, dimRoundingMode "+sp+" but got pad "+ap+"."});var pp=mo(dp.shape,rp,np,up,ap,sp,lp),hp=Nt.runKernelFunc(function(mp){return mp.avgPool3d(dp,pp)},{x:dp},function(mp){return{x:function(){return function(gp,vp,xp,Sp,yp,bp,Ep){var wp=ln(gp,"dy","avgPool3dBackprop"),_p=ln(vp,"input","avgPool3dBackprop"),Rp=wp,$p=_p,Cp=!1;_p.rank===4&&(Cp=!0,Rp=wp.as5D(1,wp.shape[0],wp.shape[1],wp.shape[2],wp.shape[3]),$p=_p.as5D(1,_p.shape[0],_p.shape[1],_p.shape[2],_p.shape[3])),g(Rp.rank===5,function(){return"Error in avgPool3dBackprop: dy must be rank 5 but got rank "+Rp.rank+"."}),g($p.rank===5,function(){return"Error in avgPool3dBackprop: input must be rank 5 but got rank "+$p.rank+"."}),yp==null&&(yp=[1,1,1]),g(Io(Sp,yp),function(){return"Error in avgPool3dBackprop: Either strides or dilations must be 1. Got strides "+Sp+" and dilations '"+yp+"'"}),Ep!=null&&g(E(bp),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+Ep+" but got pad "+bp+"."});var Ap=mo($p.shape,xp,Sp,yp,bp,Ep),Op=Nt.runKernelFunc(function(Lp){return Lp.avgPool3dBackprop(Rp,$p,Ap)},{dy5D:Rp,input5D:$p});return Cp?Op.as4D(Op.shape[1],Op.shape[2],Op.shape[3],Op.shape[4]):Op}(mp,dp,rp,np,up,ap,sp)}}});return hp=hp.cast(dp.dtype),fp?hp.as4D(hp.shape[1],hp.shape[2],hp.shape[3],hp.shape[4]):hp}}),tl=Cn({slice_:function(_d,rp,np){var ap,sp,lp=ln(_d,"x","slice");if(lp.rank===0)throw new Error("Slicing scalar is not possible");(ap=typeof rp=="number"?[rp].concat(new Array(lp.rank-1).fill(0)):rp.length<lp.rank?rp.concat(new Array(lp.rank-rp.length).fill(0)):rp.slice()).forEach(function(dp){g(dp!==-1,function(){return"slice() does not support negative begin indexing."})}),sp=(sp=np==null?new Array(lp.rank).fill(-1):typeof np=="number"?[np].concat(new Array(lp.rank-1).fill(-1)):np.length<lp.rank?np.concat(new Array(lp.rank-np.length).fill(-1)):np).map(function(dp,fp){return dp>=0?dp:(g(dp===-1,function(){return"Negative size values should be exactly -1 but got "+dp+" for the slice() size at index "+fp+"."}),lp.shape[fp]-ap[fp])}),qr(lp,ap,sp);var up=lp.shape,cp={begin:ap,size:sp};return Nt.runKernelFunc(function(dp){return dp.slice(lp,ap,sp)},{x:lp},function(dp){for(var fp=[],pp=0;pp<dp.rank;pp++)fp.push([ap[pp],up[pp]-ap[pp]-sp[pp]]);return{x:function(){return dp.pad(fp)}}},"Slice",cp)}}),el=Cn({slice1d_:function(_d,rp,np){var ap=ln(_d,"x","slice1d");return g(ap.rank===1,function(){return"slice1d expects a rank-1 tensor, but got a rank-"+ap.rank+" tensor"}),tl(ap,[rp],[np])}}),nl=Cn({slice2d_:function(_d,rp,np){var ap=ln(_d,"x","slice2d");return g(ap.rank===2,function(){return"slice2d expects a rank-2 tensor, but got a rank-"+ap.rank+" tensor"}),tl(ap,rp,np)}}),rl=Cn({slice3d_:function(_d,rp,np){var ap=ln(_d,"x","slice3d");return g(ap.rank===3,function(){return"slice3d expects a rank-3 tensor, but got a rank-"+ap.rank+" tensor"}),tl(ap,rp,np)}}),ol=Cn({slice4d_:function(_d,rp,np){var ap=ln(_d,"x","slice4d");return g(ap.rank===4,function(){return"slice4d expects a rank-4 tensor, but got a rank-"+ap.rank+" tensor"}),tl(ap,rp,np)}});function al(_d,rp,np,ap,sp){return rp.rank<np.rank&&(rp=rp.reshape(vn(rp.shape,ap))),_d.rank<np.rank&&(_d=_d.reshape(vn(_d.shape,ap))),{$x:function(){var lp=_d.mul(np.equal(rp).cast(_d.dtype));return sp==null?lp:lp.transpose(sp)}}}var il=Cn({all_:function(_d,rp,np){rp===void 0&&(rp=null),np===void 0&&(np=!1);var ap=ln(_d,"x","all","bool"),sp=D(rp,ap.shape),lp=sp,up=gn(lp,ap.rank);up!=null&&(ap=ap.transpose(up),lp=xn(lp.length,ap.rank));var cp=Nt.runKernelFunc(function(fp){return fp.all(ap,lp)},{$x:ap});if(np){var dp=vn(cp.shape,sp);return cp.reshape(dp)}return cp}}),ul=Cn({any_:function(_d,rp,np){rp===void 0&&(rp=null),np===void 0&&(np=!1);var ap=ln(_d,"x","any","bool"),sp=D(rp,ap.shape),lp=sp,up=gn(lp,ap.rank);up!=null&&(ap=ap.transpose(up),lp=xn(lp.length,ap.rank));var cp=Nt.runKernelFunc(function(fp){return fp.any(ap,lp)},{$x:ap});if(np){var dp=vn(cp.shape,sp);return cp.reshape(dp)}return cp}}),sl=Cn({argMax_:function(_d,rp){rp===void 0&&(rp=0);var np=ln(_d,"x","argMax");rp==null&&(rp=0);var ap=D(rp,np.shape),sp=gn(ap,np.rank);return sp!=null&&(np=np.transpose(sp),ap=xn(ap.length,np.rank)),Nt.runKernelFunc(function(lp,up){var cp=lp.argMax(np,ap[0]);return up([np]),cp},{$x:np},function(lp,up){var cp=up[0];return{$x:function(){return zn(cp)}}})}}),cl=Cn({argMin_:function(_d,rp){rp===void 0&&(rp=0);var np=ln(_d,"x","argMin");rp==null&&(rp=0);var ap=D(rp,np.shape),sp=gn(ap,np.rank);return sp!=null&&(np=np.transpose(sp),ap=xn(ap.length,np.rank)),Nt.runKernelFunc(function(lp,up){var cp=lp.argMin(np,ap[0]);return up([np]),cp},{$x:np},function(lp,up){var cp=up[0];return{$x:function(){return zn(cp)}}})}}),ll=Cn({logSumExp_:function(_d,rp,np){rp===void 0&&(rp=null),np===void 0&&(np=!1);var ap=ln(_d,"x","logSumExp"),sp=D(rp,ap.shape),lp=ap.max(sp,!0),up=ap.sub(lp).exp().sum(sp).log(),cp=lp.reshape(up.shape).add(up);if(np){var dp=vn(cp.shape,sp);return cp.reshape(dp)}return cp}}),hl=Cn({max_:function(_d,rp,np){rp===void 0&&(rp=null),np===void 0&&(np=!1);var ap=ln(_d,"x","max"),sp=ap,lp=D(rp,ap.shape),up=lp,cp=gn(up,ap.rank);cp!=null&&(ap=ap.transpose(cp),up=xn(up.length,ap.rank));var dp=Nt.runKernelFunc(function(pp,hp){var mp=pp.max(ap,up);return hp([sp,mp]),mp},{$x:ap},function(pp,hp){return al(pp,hp[1],hp[0],lp,cp)});if(np){var fp=vn(dp.shape,lp);dp=dp.reshape(fp)}return dp}}),fl=Cn({mean_:function(_d,rp,np){rp===void 0&&(rp=null),np===void 0&&(np=!1);var ap=ln(_d,"x","mean"),sp=D(rp,ap.shape),lp=w$1(dn(ap.shape,sp)[1]);return oo(function(up){var cp=An(lp);return{value:(cp.dtype===up.dtype?up:up.cast(cp.dtype)).div(cp).sum(rp,np),gradFunc:function(dp){var fp=up.shape.slice();return sp.forEach(function(pp){fp[pp]=1}),dp.reshape(fp).mul(Bn(up.shape,"float32")).div(lp)}}})(ap)}}),pl=Cn({min_:function(_d,rp,np){rp===void 0&&(rp=null),np===void 0&&(np=!1);var ap=ln(_d,"x","min"),sp=ap,lp=D(rp,ap.shape),up=lp,cp=gn(up,ap.rank);cp!=null&&(ap=ap.transpose(cp),up=xn(up.length,ap.rank));var dp=Nt.runKernelFunc(function(pp,hp){var mp=pp.min(ap,up);return hp([sp,mp]),mp},{$x:ap},function(pp,hp){return al(pp,hp[1],hp[0],lp,cp)});if(np){var fp=vn(dp.shape,lp);dp=dp.reshape(fp)}return dp}}),dl=Cn({moments_:function(_d,rp,np){rp===void 0&&(rp=null),np===void 0&&(np=!1);var ap=D(rp,(_d=ln(_d,"x","moments")).shape),sp=_d.mean(ap,np),lp=sp.shape;np||(lp=vn(sp.shape,ap));var up=_d.toFloat().sub(sp.reshape(lp)).square();return{mean:sp,variance:up.mean(ap,np)}}}),vl=Cn({sum_:function(_d,rp,np){rp===void 0&&(rp=null),np===void 0&&(np=!1);var ap=ln(_d,"x","sum");ap.dtype==="bool"&&(ap=ap.toInt());var sp=D(rp,ap.shape);return oo(function(lp){var up=gn(sp,lp.rank),cp=sp,dp=lp;up!=null&&(dp=lp.transpose(up),cp=xn(cp.length,lp.rank));var fp=Nt.runKernelFunc(function(hp){return hp.sum(dp,cp)},{permutedX:dp});if(np){var pp=vn(fp.shape,sp);fp=fp.reshape(pp)}return{value:fp,gradFunc:function(hp){var mp=lp.shape.slice();return sp.forEach(function(gp){mp[gp]=1}),hp.reshape(mp).mul(Bn(lp.shape,"float32"))}}})(ap)}}),ml=Cn({prod_:function(_d,rp,np){rp===void 0&&(rp=null),np===void 0&&(np=!1);var ap=ln(_d,"x","prod");ap.dtype==="bool"&&(ap=ap.toInt());var sp=D(rp,ap.shape),lp=gn(sp,ap.rank),up=sp,cp=ap;lp!=null&&(cp=ap.transpose(lp),up=xn(up.length,ap.rank));var dp=Nt.runKernelFunc(function(pp){return pp.prod(cp,up)},{permutedX:cp});if(np){var fp=vn(dp.shape,sp);dp=dp.reshape(fp)}return dp}}),gl=Cn({elu_:function(_d){var rp=ln(_d,"x","elu");return Nt.runKernelFunc(function(np,ap){var sp=np.elu(rp);return ap([sp]),sp},{$x:rp},function(np,ap){var sp=ap[0];return{$x:function(){return Nt.runKernelFunc(function(lp){return lp.eluDer(np,sp)},{dy:np,y:sp})}}})}}),yl=Cn({leakyRelu_:function(_d,rp){rp===void 0&&(rp=.2);var np=ln(_d,"x","leakyRelu");return Xs(An(rp).mul(np),np)}}),xl=Cn({prelu_:function(_d,rp){var np=ln(_d,"x","prelu"),ap=ln(rp,"alpha","prelu");return Nt.runKernelFunc(function(sp,lp){var up=sp.prelu(np,ap);return lp([np,ap]),up},{x:np,alpha:ap},function(sp,lp){var up=lp[0],cp=lp[1],dp=up.greater(0);return{x:function(){return Ws(dp,sp,sp.mul(cp))},alpha:function(){var fp=Ws(dp,zn(sp),sp.mul(up)),pp=fo(cp.shape,sp.shape);return pp.length>0&&(fp=fp.sum(pp)),fp.reshape(cp.shape)}}},"Prelu")}}),bl=Cn({relu_:function(_d){var rp=ln(_d,"x","relu");return rp.dtype==="bool"?rp.toInt():Nt.runKernelFunc(function(np,ap){var sp=np.relu(rp);return ap([rp]),sp},{$x:rp},function(np,ap){var sp=ap[0];return{$x:function(){return np.mulStrict(sp.step().toFloat())}}})}}),wl=Cn({relu6_:function(_d){var rp=ln(_d,"x","relu6");return rp.dtype==="bool"?rp.toInt():Nt.runKernelFunc(function(np,ap){var sp=np.relu6(rp);return ap([rp]),sp},{$x:rp},function(np,ap){var sp=ap[0],lp=sp.lessEqual(6).mul(sp.step());return{$x:function(){return np.mulStrict(lp.toFloat())}}})}}),Cl=Cn({selu_:function(_d){var rp=ln(_d,"x","selu");return Nt.runKernelFunc(function(np,ap){var sp=np.selu(rp);return ap([rp]),sp},{$x:rp},function(np,ap){var sp=ap[0];return{$x:function(){var lp=sp.greater(An(0)),up=An(iu),cp=An(uu),dp=np.mul(cp),fp=np.mul(up).mul(sp.toFloat().exp());return Ws(lp,dp,fp)}}})}}),El=Cn({transpose_:function(_d,rp){var np=ln(_d,"x","transpose");return rp==null&&(rp=np.shape.map(function(ap,sp){return sp}).reverse()),g(np.rank===rp.length,function(){return"Error in transpose: rank of input "+np.rank+" must match length of perm "+rp+"."}),rp.forEach(function(ap){g(ap>=0&&ap<np.rank,function(){return"All entries in 'perm' must be between 0 and "+(np.rank-1)+" but got "+rp})}),np.rank<=1?np.clone():Nt.runKernelFunc(function(ap){return ap.transpose(np,rp)},{$x:np},function(ap){var sp=yn(rp);return{$x:function(){return ap.transpose(sp)}}})}}),Rl=Cn({localResponseNormalization_:function(_d,rp,np,ap,sp){rp===void 0&&(rp=5),np===void 0&&(np=1),ap===void 0&&(ap=1),sp===void 0&&(sp=.5);var lp=ln(_d,"x","localResponseNormalization");g(lp.rank===4||lp.rank===3,function(){return`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank `+lp.rank+"."}),g(E(rp),function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+rp+"."});var up=lp,cp=!1;lp.rank===3&&(cp=!0,up=lp.as4D(1,lp.shape[0],lp.shape[1],lp.shape[2]));var dp=Nt.runKernelFunc(function(fp,pp){var hp=fp.localResponseNormalization4D(up,rp,np,ap,sp);return pp([up,hp]),hp},{x4D:up},function(fp,pp){var hp=pp[0],mp=pp[1];return{x4D:function(){return Nt.runKernelFunc(function(gp){return gp.LRNGrad(fp,hp,mp,rp,np,ap,sp)},{})}}});return cp?dp.as3D(dp.shape[1],dp.shape[2],dp.shape[3]):dp}}),Il=Cn({norm_:function(_d,rp,np,ap){rp===void 0&&(rp="euclidean"),np===void 0&&(np=null),ap===void 0&&(ap=!1);var sp=function cp(dp,fp,pp){if(pp===void 0&&(pp=null),dp.rank===0)return dp.abs();if(dp.rank!==1&&pp===null)return cp(dp.reshape([-1]),fp,pp);if(dp.rank===1||typeof pp=="number"||Array.isArray(pp)&&pp.length===1){if(fp===1)return dp.abs().sum(pp);if(fp===1/0)return dp.abs().max(pp);if(fp===-1/0)return dp.abs().min(pp);if(fp==="euclidean"||fp===2)return dp.abs().pow(An(2,"int32")).sum(pp).sqrt();throw new Error("Error in norm: invalid ord value: "+fp)}if(Array.isArray(pp)&&pp.length===2){if(fp===1)return dp.abs().sum(pp[0]).max(pp[1]-1);if(fp===1/0)return dp.abs().sum(pp[1]).max(pp[0]);if(fp===-1/0)return dp.abs().sum(pp[1]).min(pp[0]);if(fp==="fro"||fp==="euclidean")return dp.square().sum(pp).sqrt();throw new Error("Error in norm: invalid ord value: "+fp)}throw new Error("Error in norm: invalid axis: "+pp)}(_d=ln(_d,"x","norm"),rp,np),lp=sp.shape;if(ap){var up=D(np,_d.shape);lp=vn(sp.shape,up)}return sp.reshape(lp)}}),kl=Cn({basicLSTMCell_:function(_d,rp,np,ap,sp,lp){var up=ln(_d,"forgetBias","basicLSTMCell"),cp=ln(rp,"lstmKernel","basicLSTMCell"),dp=ln(np,"lstmBias","basicLSTMCell"),fp=ln(ap,"data","basicLSTMCell"),pp=ln(sp,"c","basicLSTMCell"),hp=ln(lp,"h","basicLSTMCell"),mp=fp.concat(hp,1).matMul(cp).add(dp),gp=mp.shape[0],vp=mp.shape[1]/4,xp=[gp,vp],Sp=mp.slice([0,0],xp),yp=mp.slice([0,vp],xp),bp=mp.slice([0,2*vp],xp),Ep=mp.slice([0,3*vp],xp),wp=Sp.sigmoid().mulStrict(yp.tanh()).addStrict(pp.mulStrict(up.add(bp).sigmoid())),_p=wp.tanh().mulStrict(Ep.sigmoid());return[wp,_p]}}),Sl=Cn({multiRNNCell_:function(_d,rp,np,ap){for(var sp=ln(rp,"data","multiRNNCell"),lp=hn(np,"c","multiRNNCell"),up=hn(ap,"h","multiRNNCell"),cp=sp,dp=[],fp=0;fp<_d.length;fp++){var pp=_d[fp](cp,lp[fp],up[fp]);dp.push(pp[0]),dp.push(pp[1]),cp=pp[1]}var hp=[],mp=[];for(fp=0;fp<dp.length;fp+=2)hp.push(dp[fp]),mp.push(dp[fp+1]);return[hp,mp]}}),Al=Cn({movingAverage_:function(_d,rp,np,ap,sp){sp===void 0&&(sp=!0);var lp=ln(_d,"v","movingAverage"),up=ln(rp,"x","movingAverage"),cp=ln(np,"decay","movingAverage");It(lp,up),g(C(lp.shape,up.shape),function(){return"Shape mismatch in v and x"});var dp=An(1),fp=dp.sub(cp),pp=up.sub(lp).mul(fp);if(sp){g(ap!=null,function(){return"When using zeroDebias: true, step is required."});var hp=ln(ap,"step","movingAverage");pp=pp.div(dp.sub(nc(cp,hp)))}return lp.add(pp)}}),Dl=Cn({stridedSlice_:function(_d,rp,np,ap,sp,lp,up,cp,dp){if(sp===void 0&&(sp=0),lp===void 0&&(lp=0),up===void 0&&(up=0),cp===void 0&&(cp=0),dp===void 0&&(dp=0),ap==null&&(ap=new Array(rp.length)),up!==0)throw new Error("ellipsis mask is not yet supported");var fp=ln(_d,"x","stridedSlice"),pp=Kr(cp),hp=fp.shape.slice();pp.forEach(function(Sp){rp[Sp]=0,np[Sp]=1,hp.splice(Sp,0,1)}),fp=fp.reshape(hp);for(var mp=0;mp<fp.rank;mp++)rp[mp]=Xr(sp,rp,ap,fp.shape,mp),np[mp]=$r(lp,np,ap,fp.shape,mp),ap[mp]=ap[mp]||1;var gp=Kr(dp);gp.forEach(function(Sp){np[Sp]=rp[Sp]+1,ap[Sp]=1});var vp=jr(rp,np,ap),xp=vp.filter(function(Sp,yp){return gp.indexOf(yp)===-1});return ap.every(function(Sp){return Sp===1})?tl(fp,rp,vp).reshape(xp):Nt.runKernelFunc(function(Sp){return Sp.stridedSlice(fp,rp,np,ap)},{$x:fp}).reshape(xp)}}),Tl=Cn({topk_:function(_d,rp,np){rp===void 0&&(rp=1),np===void 0&&(np=!0);var ap=ln(_d,"x","topk");if(ap.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");var sp=ap.shape[ap.shape.length-1];if(rp>sp)throw new Error("'k' passed to topk() must be <= the last dimension ("+sp+") but got "+rp);var lp=Nt.runKernelFunc(function(up){return up.topk(ap,rp,np)},{$x:ap});return{values:lp[0],indices:lp[1]}}}),Nl=Cn({scatterND_:function(_d,rp,np){var ap=ln(_d,"indices","scatterND","int32"),sp=ln(rp,"updates","scatterND");return Gr(sp,ap,np),Nt.runKernelFunc(function(lp){return lp.scatterND(ap,sp,np)},{$indices:ap,$updates:sp})}}),Fl=Cn({fft_:function(_d){g(_d.dtype==="complex64",function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+_d.dtype+"."});var rp=_d.shape[_d.shape.length-1],np=_d.size/rp,ap=_d.as2D(np,rp);return Nt.runKernelFunc(function(sp){return sp.fft(ap)},{input:_d}).reshape(_d.shape)}}),Ol=Cn({ifft_:function(_d){g(_d.dtype==="complex64",function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+_d.dtype+"."});var rp=_d.shape[_d.shape.length-1],np=_d.size/rp,ap=_d.as2D(np,rp);return Nt.runKernelFunc(function(sp){return sp.ifft(ap)},{input:_d}).reshape(_d.shape)}}),_l=Cn({rfft_:function(_d,rp){g(_d.dtype==="float32",function(){return"The dtype for rfft() must be real value but got "+_d.dtype});var np,ap=_d.shape[_d.shape.length-1],sp=_d.size/ap;if(rp!=null&&rp<ap){var lp=_d.shape.map(function(yp){return 0}),up=_d.shape.map(function(yp){return yp});up[_d.shape.length-1]=rp,np=_d.slice(lp,up),ap=rp}else if(rp!=null&&rp>ap){var cp=_d.shape.map(function(yp){return yp});cp[_d.shape.length-1]=rp-ap,np=_d.concat(Pn(cp),_d.shape.length-1),ap=rp}else np=_d;var dp=np.zerosLike(),fp=En(np,dp).as2D(sp,ap),pp=Fl(fp),hp=Math.floor(ap/2)+1,mp=Rn(pp),gp=In(pp),vp=mp.split([hp,ap-hp],mp.shape.length-1),xp=gp.split([hp,ap-hp],gp.shape.length-1),Sp=np.shape.slice();return Sp[np.shape.length-1]=hp,En(vp[0],xp[0]).reshape(Sp)}}),Ml=Cn({irfft_:function(_d){var rp=_d.shape[_d.shape.length-1],np=_d.size/rp;if(rp<=2){var ap=_d.as2D(np,rp),sp=Ol(ap);return Rn(sp)}var lp=[np,2*(rp-1)],up=Rn(_d).as2D(np,rp),cp=In(_d).as2D(np,rp),dp=up.slice([0,1],[np,rp-2]).reverse(1),fp=cp.slice([0,1],[np,rp-2]).reverse(1).mul(An(-1)),pp=up.concat(dp,1),hp=cp.concat(fp,1);return ap=En(pp,hp).as2D(lp[0],lp[1]),sp=Ol(ap),Rn(sp)}}),Bl=Object.freeze({fft:Fl,ifft:Ol,rfft:_l,irfft:Ml}),Pl=Cn({sparseToDense_:function(_d,rp,np,ap){ap===void 0&&(ap=0);var sp=ln(_d,"sparseIndices","sparseToDense","int32"),lp=ln(rp,"sparseValues","sparseToDense"),up=ln(ap,"defaultValue","sparseToDense",lp.dtype);return function(cp,dp,fp,pp){if(cp.dtype!=="int32")throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+cp.dtype+".");if(cp.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+cp.shape+".");var hp=cp.rank>0?cp.shape[0]:1,mp=cp.rank>1?cp.shape[1]:1;if(fp.length!==mp)throw new Error("outputShape has incorrect number of elements:, "+fp.length+", should be: "+mp+".");var gp=dp.size;if(dp.rank!==0&&(dp.rank!==1||gp!==hp))throw new Error("sparseValues has incorrect shape "+dp.shape+", should be [] or ["+hp+"]");if(dp.dtype!==pp.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(sp,lp,np,up),Nt.runKernelFunc(function(cp){return cp.sparseToDense(sp,lp,np,up)},{$sparseIndices:sp,$sparseValues:lp,$defaultValue:up})}}),Ll=Cn({gatherND_:function(_d,rp){var np=ln(rp,"indices","gatherND","int32"),ap=ln(_d,"x","gatherND");return Nt.runKernelFunc(function(sp){return sp.gatherND(ap,np)},{$x:ap,$indices:np})}}),Wl=Cn({diag_:function(_d){var rp=ln(_d,"x","diag").flatten(),np=_d.shape.concat(_d.shape);return Nt.runKernelFunc(function(ap){return ap.diag(rp)},{$x:rp}).reshape(np)}}),Ul=Cn({dropout_:function(_d,rp,np,ap){var sp=ln(_d,"x","dropout");if(g(sp.dtype==="float32",function(){return"x has to be a floating point tensor since it's going to be scaled, but got a "+sp.dtype+" tensor instead."}),g(rp>=0&&rp<1,function(){return"rate must be a float in the range [0, 1), but got "+rp+"."}),rp===0)return _d instanceof dt?sp.clone():sp;var lp=function(dp,fp){if(fp==null)return dp.shape.slice();if(C(dp.shape,fp))return fp;if(dp.shape.length===fp.length){for(var pp=[],hp=0;hp<dp.shape.length;hp++)fp[hp]==null&&dp.shape[hp]!=null?pp.push(dp.shape[hp]):pp.push(fp[hp]);return pp}return fp}(sp,np),up=1-rp,cp=kr(lp,0,1,"float32",ap).add(up).floor().div(up);return sp.mul(cp)}});function Vl(_d,rp,np){for(var ap=1-_d%2,sp=new Float32Array(_d),lp=0;lp<_d;++lp){var up=2*Math.PI*lp/(_d+ap-1);sp[lp]=rp-np*Math.cos(up)}return Dn(sp,"float32")}var zl=Cn({hannWindow_:function(_d){return Vl(_d,.5,.5)}}),Gl=Cn({hammingWindow_:function(_d){return Vl(_d,.54,.46)}}),Hl=Cn({frame_:function(_d,rp,np,ap,sp){ap===void 0&&(ap=!1),sp===void 0&&(sp=0);for(var lp=0,up=[];lp+rp<=_d.size;)up.push(tl(_d,lp,rp)),lp+=np;if(ap)for(;lp<_d.size;){var cp=lp+rp-_d.size,dp=Gn([tl(_d,lp,rp-cp),Ln([cp],sp)]);up.push(dp),lp+=np}return up.length===0?Tn([],[0,rp]):Gn(up).as2D(up.length,rp)}}),ql=Cn({stft_:function(_d,rp,np,ap,sp){var lp;sp===void 0&&(sp=zl),ap==null&&(lp=rp,ap=Math.floor(Math.pow(2,Math.ceil(Math.log(lp)/Math.log(2)))));for(var up=Hl(_d,rp,np),cp=tc(up,sp(rp)),dp=[],fp=0;fp<up.shape[0];fp++)dp.push(_l(cp.slice([fp,0],[1,rp]),ap));return Gn(dp)}}),Kl=Object.freeze({hannWindow:zl,hammingWindow:Gl,frame:Hl,stft:ql}),jl,Xl=function(_d,rp,np){return np===void 0&&(np=1),n$1(this,void 0,void 0,function(){var ap,sp,lp,up,cp,dp,fp,pp,hp,mp,gp,vp,xp,Sp;return r(this,function(yp){switch(yp.label){case 0:return ap=ln(_d,"predictions","inTopK"),sp=ln(rp,"targets","inTopK"),g(ap.rank>1,function(){return"inTopK() expects the predictions to be of rank 2 or higher, but got "+ap.rank}),g(ap.rank-1===sp.rank,function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+ap.rank+" and targets rank "+sp.rank}),y(ap.shape.slice(0,ap.shape.length-1),sp.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),lp=ap.shape[ap.shape.length-1],g(np>0&&np<=lp,function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last dimension ("+lp+"), but got "+np}),[4,ap.data()];case 1:return up=yp.sent(),[4,sp.data()];case 2:for(cp=yp.sent(),dp=[up.length/lp,lp],pp=dp[1],hp=N("bool",fp=dp[0]),mp=0;mp<fp;mp++){for(gp=mp*pp,vp=up.subarray(gp,gp+pp),xp=[],Sp=0;Sp<vp.length;Sp++)xp.push({value:vp[Sp],index:Sp});for(xp.sort(function(bp,Ep){return Ep.value-bp.value}),hp[mp]=0,Sp=0;Sp<np;Sp++)if(xp[Sp].index===cp[mp]){hp[mp]=1;break}}return _d!==ap&&ap.dispose(),rp!==sp&&sp.dispose(),[2,kn(hp,sp.shape,"bool")]}})})};(function(_d){_d[_d.NONE=0]="NONE",_d[_d.MEAN=1]="MEAN",_d[_d.SUM=2]="SUM",_d[_d.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(jl||(jl={}));var $l=Cn({absoluteDifference_:function(_d,rp,np,ap){ap===void 0&&(ap=jl.SUM_BY_NONZERO_WEIGHTS);var sp=ln(_d,"labels","absoluteDifference"),lp=ln(rp,"predictions","absoluteDifference"),up=null;np!=null&&(up=ln(np,"weights","absoluteDifference")),y(sp.shape,lp.shape,"Error in absoluteDifference: ");var cp=sp.sub(lp).abs();return Yl(cp,up,ap)}}),Yl=Cn({computeWeightedLoss_:function(_d,rp,np){np===void 0&&(np=jl.SUM_BY_NONZERO_WEIGHTS);var ap=ln(_d,"losses","computeWeightedLoss"),sp=null;rp!=null&&(sp=ln(rp,"weights","computeWeightedLoss"));var lp=sp==null?ap:ap.mul(sp);if(np===jl.NONE)return lp;if(np===jl.SUM)return lp.sum();if(np===jl.MEAN){if(sp==null)return lp.mean();var up=ap.size/sp.size,cp=lp.sum().div(sp.sum());return up>1?cp.div(An(up)):cp}if(np===jl.SUM_BY_NONZERO_WEIGHTS){if(sp==null)return lp.sum().div(An(ap.size));var dp=sp.mul(Bn(ap.shape)).notEqual(An(0)).sum().toFloat();return lp.sum().div(dp)}throw Error("Unknown reduction: "+np)}}),Ql=Cn({cosineDistance_:function(_d,rp,np,ap,sp){sp===void 0&&(sp=jl.SUM_BY_NONZERO_WEIGHTS);var lp=ln(_d,"labels","cosineDistance"),up=ln(rp,"predictions","cosineDistance"),cp=null;ap!=null&&(cp=ln(ap,"weights","cosineDistance")),y(lp.shape,up.shape,"Error in cosineDistance: ");var dp=An(1).sub(lp.mul(up).sum(np,!0));return Yl(dp,cp,sp)}}),Jl=Cn({hingeLoss_:function(_d,rp,np,ap){ap===void 0&&(ap=jl.SUM_BY_NONZERO_WEIGHTS);var sp=ln(_d,"labels","hingeLoss"),lp=ln(rp,"predictions","hingeLoss"),up=null;np!=null&&(up=ln(np,"weights","hingeLoss")),y(sp.shape,lp.shape,"Error in hingeLoss: ");var cp=An(1);sp=An(2).mul(sp).sub(cp);var dp=cp.sub(sp.mul(lp)).relu();return Yl(dp,up,ap)}}),Zl=Cn({huberLoss_:function(_d,rp,np,ap,sp){ap===void 0&&(ap=1),sp===void 0&&(sp=jl.SUM_BY_NONZERO_WEIGHTS);var lp=ln(_d,"labels","huberLoss"),up=ln(rp,"predictions","huberLoss"),cp=null;np!=null&&(cp=ln(np,"weights","huberLoss")),y(lp.shape,up.shape,"Error in huberLoss: ");var dp=An(ap),fp=up.sub(lp).abs(),pp=Ys(fp,dp),hp=fp.sub(pp),mp=An(.5).mul(pp.square()).add(dp.mul(hp));return Yl(mp,cp,sp)}}),th=Cn({logLoss_:function(_d,rp,np,ap,sp){ap===void 0&&(ap=1e-7),sp===void 0&&(sp=jl.SUM_BY_NONZERO_WEIGHTS);var lp=ln(_d,"labels","logLoss"),up=ln(rp,"predictions","logLoss"),cp=null;np!=null&&(cp=ln(np,"weights","logLoss")),y(lp.shape,up.shape,"Error in logLoss: ");var dp=An(1),fp=An(ap),pp=lp.mul(up.add(fp).log()).neg().sub(dp.sub(lp).mul(dp.sub(up).add(fp).log()));return Yl(pp,cp,sp)}}),eh=Cn({meanSquaredError_:function(_d,rp,np,ap){ap===void 0&&(ap=jl.SUM_BY_NONZERO_WEIGHTS);var sp=ln(_d,"labels","meanSquaredError"),lp=ln(rp,"predictions","meanSquaredError"),up=null;np!=null&&(up=ln(np,"weights","meanSquaredError")),y(sp.shape,lp.shape,"Error in meanSquaredError: ");var cp=sp.squaredDifference(lp);return Yl(cp,up,ap)}}),nh=Cn({sigmoidCrossEntropy_:function(_d,rp,np,ap,sp){ap===void 0&&(ap=0),sp===void 0&&(sp=jl.SUM_BY_NONZERO_WEIGHTS);var lp=ln(_d,"multiClassLabels","sigmoidCrossEntropy"),up=ln(rp,"logits","sigmoidCrossEntropy"),cp=null;if(np!=null&&(cp=ln(np,"weights","sigmoidCrossEntropy")),y(lp.shape,up.shape,"Error in sigmoidCrossEntropy: "),ap>0){var dp=An(ap),fp=An(1),pp=An(.5);lp=lp.mul(fp.sub(dp)).add(pp.mul(dp))}var hp=function(mp,gp){var vp=ln(mp,"labels","sigmoidCrossEntropyWithLogits"),xp=ln(gp,"logits","sigmoidCrossEntropyWithLogits");y(vp.shape,xp.shape,"Error in sigmoidCrossEntropyWithLogits: ");var Sp=xp.relu(),yp=xp.mul(vp),bp=xp.abs().neg().exp().log1p();return Sp.sub(yp).add(bp)}(lp,up);return Yl(hp,cp,sp)}}),rh=Cn({softmaxCrossEntropy_:function(_d,rp,np,ap,sp){ap===void 0&&(ap=0),sp===void 0&&(sp=jl.SUM_BY_NONZERO_WEIGHTS);var lp=ln(_d,"onehotLabels","softmaxCrossEntropy"),up=ln(rp,"logits","softmaxCrossEntropy"),cp=null;if(np!=null&&(cp=ln(np,"weights","softmaxCrossEntropy")),y(lp.shape,up.shape,"Error in softmaxCrossEntropy: "),ap>0){var dp=An(ap),fp=An(1),pp=An(lp.shape[1]);lp=lp.mul(fp.sub(dp)).add(dp.div(pp))}var hp=function(mp,gp,vp){if(vp===void 0&&(vp=-1),vp===-1&&(vp=gp.rank-1),vp!==gp.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+gp.rank+" and dim was "+vp);return oo(function(xp,Sp,yp){var bp=Sp.logSumExp([vp],!0),Ep=Sp.toFloat().sub(bp);return yp([xp,Ep]),{value:Ep.mul(xp).neg().sum([vp]),gradFunc:function(wp,_p){var Rp=_p[0],$p=_p[1],Cp=vn(wp.shape,[vp]);return[wp.reshape(Cp).mul(Rp.toFloat().sub($p.exp())),wp.reshape(Cp).mul($p.exp().sub(Rp.toFloat()))]}}})(mp,gp)}(lp,up);return Yl(hp,cp,sp)}}),oh=Object.freeze({get Reduction(){return jl},absoluteDifference:$l,computeWeightedLoss:Yl,cosineDistance:Ql,hingeLoss:Jl,huberLoss:Zl,logLoss:th,meanSquaredError:eh,sigmoidCrossEntropy:nh,softmaxCrossEntropy:rh});function ah(_d,rp){return rp===void 0&&(rp=!1),Nt.tidy(function(){if(_d.shape.length!==2)throw new Error("qr2d() requires a 2D Tensor, but got a "+_d.shape.length+"D Tensor.");for(var np=_d.shape[0],ap=_d.shape[1],sp=vr(np),lp=_d.clone(),up=Tn([[1]],[1,1]),cp=up.clone(),dp=np>=ap?ap:np,fp=function(hp){var mp,gp=lp,vp=cp,xp=sp;mp=Nt.tidy(function(){var Sp=lp.slice([hp,hp],[np-hp,1]),yp=Sp.norm(),bp=lp.slice([hp,hp],[1,1]),Ep=Tn([[-1]]).where(bp.greater(0),Tn([[1]])),wp=bp.sub(Ep.mul(yp)),_p=Sp.div(wp);cp=_p.shape[0]===1?up.clone():up.concat(_p.slice([1,0],[_p.shape[0]-1,_p.shape[1]]),0);var Rp=Ep.matMul(wp).div(yp).neg(),$p=lp.slice([hp,0],[np-hp,ap]),Cp=Rp.mul(cp);if(hp===0)lp=$p.sub(Cp.matMul(cp.transpose().matMul($p)));else{var Ap=$p.sub(Cp.matMul(cp.transpose().matMul($p)));lp=lp.slice([0,0],[hp,ap]).concat(Ap,0)}var Op=sp.slice([0,hp],[np,sp.shape[1]-hp]);if(hp===0)sp=Op.sub(Op.matMul(cp).matMul(Cp.transpose()));else{var Lp=Op.sub(Op.matMul(cp).matMul(Cp.transpose()));sp=sp.slice([0,0],[np,hp]).concat(Lp,1)}return[cp,lp,sp]}),cp=mp[0],lp=mp[1],sp=mp[2],Xe([gp,vp,xp])},pp=0;pp<dp;++pp)fp(pp);return!rp&&np>ap&&(sp=sp.slice([0,0],[np,ap]),lp=lp.slice([0,0],[ap,ap])),[sp,lp]})}var ih=Cn({gramSchmidt_:function(_d){var rp;if(Array.isArray(_d)){rp=!1,g(_d!=null&&_d.length>0,function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"});for(var np=_d[0].shape[0],ap=function(dp){g(_d[dp].shape[0]===np,function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+_d[dp].shape[0]+" vs. "+np+")"})},sp=1;sp<_d.length;++sp)ap(sp)}else rp=!0,_d=Xn(_d,_d.shape[0],0).map(function(dp){return Dr(dp,[0])});g(_d.length<=_d[0].shape[0],function(){return"Gram-Schmidt: Number of vectors ("+_d.length+") exceeds number of dimensions ("+_d[0].shape[0]+")."});var lp=[],up=_d,cp=function(dp){lp.push(Nt.tidy(function(){var fp=up[dp];if(dp>0)for(var pp=0;pp<dp;++pp){var hp=vl(lp[pp].mulStrict(fp)).mul(lp[pp]);fp=fp.sub(hp)}return fp.div(Il(fp,"euclidean"))}))};for(sp=0;sp<_d.length;++sp)cp(sp);return rp?Tr(lp,0):lp}}),uh=Cn({qr_:function(_d,rp){if(rp===void 0&&(rp=!1),_d.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+_d.rank);if(_d.rank===2)return ah(_d,rp);var np=_d.shape.slice(0,_d.shape.length-2).reduce(function(up,cp){return up*cp}),ap=Or(_d.reshape([np,_d.shape[_d.shape.length-2],_d.shape[_d.shape.length-1]]),0),sp=[],lp=[];return ap.forEach(function(up){var cp=ah(up,rp),dp=cp[0],fp=cp[1];sp.push(dp),lp.push(fp)}),[Tr(sp,0).reshape(_d.shape),Tr(lp,0).reshape(_d.shape)]}}),sh=Object.freeze({gramSchmidt:ih,qr:uh});function ch(_d,rp,np,ap,sp){ap==null&&(ap=.5),sp==null&&(sp=Number.NEGATIVE_INFINITY);var lp=_d.shape[0];return np=Math.min(np,lp),g(0<=ap&&ap<=1,function(){return"iouThreshold must be in [0, 1], but was '"+ap+"'"}),g(_d.rank===2,function(){return"boxes must be a 2D tensor, but was of rank '"+_d.rank+"'"}),g(_d.shape[1]===4,function(){return"boxes must have 4 columns, but 2nd dimension was "+_d.shape[1]}),g(rp.rank===1,function(){return"scores must be a 1D tensor"}),g(rp.shape[0]===lp,function(){return"scores has incompatible shape with boxes. Expected "+lp+", but was "+rp.shape[0]}),{maxOutputSize:np,iouThreshold:ap,scoreThreshold:sp}}var lh=Cn({resizeBilinear_:function(_d,rp,np){np===void 0&&(np=!1);var ap=ln(_d,"images","resizeBilinear");g(ap.rank===3||ap.rank===4,function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+ap.rank+"."}),g(rp.length===2,function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+rp+"."});var sp=ap,lp=!1;ap.rank===3&&(lp=!0,sp=ap.as4D(1,ap.shape[0],ap.shape[1],ap.shape[2]));var up=rp[0],cp=rp[1],dp=Nt.runKernelFunc(function(fp,pp){return pp([sp]),fp.resizeBilinear(sp,up,cp,np)},{batchImages:sp},function(fp,pp){return{batchImages:function(){return Nt.runKernelFunc(function(hp){return hp.resizeBilinearBackprop(fp,pp[0],np)},{})}}});return lp?dp.as3D(dp.shape[1],dp.shape[2],dp.shape[3]):dp}}),hh=Cn({resizeNearestNeighbor_:function(_d,rp,np){np===void 0&&(np=!1);var ap=ln(_d,"images","resizeNearestNeighbor");g(ap.rank===3||ap.rank===4,function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+ap.rank+"."}),g(rp.length===2,function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+rp+"."}),g(ap.dtype==="float32"||ap.dtype==="int32",function(){return"`images` must have `int32` or `float32` as dtype"});var sp=ap,lp=!1;ap.rank===3&&(lp=!0,sp=ap.as4D(1,ap.shape[0],ap.shape[1],ap.shape[2]));var up=rp[0],cp=rp[1],dp=Nt.runKernelFunc(function(fp,pp){return pp([sp]),fp.resizeNearestNeighbor(sp,up,cp,np)},{batchImages:sp},function(fp,pp){return{batchImages:function(){return Nt.runKernelFunc(function(hp){return hp.resizeNearestNeighborBackprop(fp,pp[0],np)},{})}}});return lp?dp.as3D(dp.shape[1],dp.shape[2],dp.shape[3]):dp}}),fh=Cn({nonMaxSuppression_:function(_d,rp,np,ap,sp){ap===void 0&&(ap=.5),sp===void 0&&(sp=Number.NEGATIVE_INFINITY);var lp=ln(_d,"boxes","nonMaxSuppression"),up=ln(rp,"scores","nonMaxSuppression"),cp=ch(lp,up,np,ap,sp);return np=cp.maxOutputSize,ap=cp.iouThreshold,sp=cp.scoreThreshold,Nt.runKernelFunc(function(dp){return dp.nonMaxSuppression(lp,up,np,ap,sp)},{$boxes:lp})}}),ph=function(_d,rp,np,ap,sp){return ap===void 0&&(ap=.5),sp===void 0&&(sp=Number.NEGATIVE_INFINITY),n$1(this,void 0,void 0,function(){var lp,up,cp,dp,fp,pp,hp;return r(this,function(mp){switch(mp.label){case 0:return lp=ln(_d,"boxes","nonMaxSuppressionAsync"),up=ln(rp,"scores","nonMaxSuppressionAsync"),cp=ch(lp,up,np,ap,sp),np=cp.maxOutputSize,ap=cp.iouThreshold,sp=cp.scoreThreshold,[4,Promise.all([lp.data(),up.data()])];case 1:return dp=mp.sent(),fp=dp[0],pp=dp[1],hp=Mo(fp,pp,np,ap,sp),lp!==_d&&lp.dispose(),up!==rp&&up.dispose(),[2,hp]}})})},dh=Cn({cropAndResize_:function(_d,rp,np,ap,sp,lp){var up=ln(_d,"image","cropAndResize","float32"),cp=ln(rp,"boxes","cropAndResize","float32"),dp=ln(np,"boxInd","cropAndResize","int32");sp=sp||"bilinear",lp=lp||0;var fp=cp.shape[0];return g(up.rank===4,function(){return"Error in cropAndResize: image must be rank 4,but got rank "+up.rank+"."}),g(cp.rank===2&&cp.shape[1]===4,function(){return"Error in cropAndResize: boxes must be have size ["+fp+",4] but had shape "+cp.shape+"."}),g(dp.rank===1&&dp.shape[0]===fp,function(){return"Error in cropAndResize: boxInd must be have size ["+fp+"] but had shape "+cp.shape+"."}),g(ap.length===2,function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+ap.length+"."}),g(ap[0]>=1&&ap[1]>=1,function(){return"cropSize must be atleast [1,1], but was "+ap}),g(sp==="bilinear"||sp==="nearest",function(){return"method must be bilinear or nearest, but was "+sp}),Nt.runKernelFunc(function(pp,hp){return pp.cropAndResize(up,cp,dp,ap,sp,lp)},{$image:up,$boxes:cp})}}),vh=Object.freeze({resizeBilinear:lh,resizeNearestNeighbor:hh,nonMaxSuppression:fh,nonMaxSuppressionAsync:ph,cropAndResize:dh}),mh=function(_d,rp){return!(_d>0)&&(rp==="linear"||rp==="relu")},gh=function(_d,rp,np){if(np==null||np==="linear")return _d;if(np==="relu")return _d.mul(rp.step());throw new Error("Gradient for activation "+np+" has not been implemented yet.")},yh=function(_d,rp){var np=rp,ap=fo(_d.shape,rp.shape);return ap.length>0&&(np=np.sum(ap)),np.reshape(_d.shape)},xh=function(_d,rp,np){if(rp==="linear")return _d;if(rp==="relu")return bl(_d);if(rp==="elu")return gl(_d);if(rp==="relu6")return wl(_d);if(rp==="prelu")return xl(_d,np);throw new Error("Unknown fused activation "+rp+".")},bh=Cn({matMul_:function(_d){var rp,np=_d.a,ap=_d.b,sp=_d.transposeA,lp=sp!==void 0&&sp,up=_d.transposeB,cp=up!==void 0&&up,dp=_d.bias,fp=_d.activation,pp=fp===void 0?"linear":fp,hp=_d.preluActivationWeights;if(mh(Nt.state.gradientDepth,pp)===!1){var mp=Wc(np,ap,lp,cp);return dp!=null&&(mp=Vs(mp,dp)),xh(mp,pp,hp)}var gp=ln(np,"a","fused matMul"),vp=ln(ap,"b","fused matMul");rp=Rt(gp,vp),gp=rp[0],vp=rp[1];var xp=lp?gp.shape[gp.rank-2]:gp.shape[gp.rank-1],Sp=cp?vp.shape[vp.rank-1]:vp.shape[vp.rank-2],yp=lp?gp.shape[gp.rank-1]:gp.shape[gp.rank-2],bp=cp?vp.shape[vp.rank-2]:vp.shape[vp.rank-1],Ep=gp.shape.slice(0,-2),wp=vp.shape.slice(0,-2),_p=w$1(Ep),Rp=w$1(wp);g(gp.rank>=2&&vp.rank>=2&&gp.rank===vp.rank,function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+gp.rank+" and "+vp.rank+"."}),g(C(Ep,wp),function(){return"Error in fused matMul: outer dimensions ("+Ep+") and ("+wp+") of Tensors with shapes "+gp.shape+" and "+vp.shape+" must match."}),g(xp===Sp,function(){return"Error in fused matMul: inner shapes ("+xp+") and ("+Sp+") of Tensors with shapes "+gp.shape+" and "+vp.shape+" and transposeA="+lp+" and transposeB="+cp+" must match."});var $p,Cp,Ap=gp.shape.slice(0,-2).concat([yp,bp]),Op=lp?gp.as3D(_p,xp,yp):gp.as3D(_p,yp,xp),Lp=cp?vp.as3D(Rp,bp,Sp):vp.as3D(Rp,Sp,bp);dp!=null&&po(Ap,($p=Rt($p=ln(dp,"bias","fused matMul"),gp)[0]).shape),hp!=null&&(Cp=ln(hp,"prelu weights","fused matMul"));var Mp={$a:Op,$b:Lp};return dp!=null&&(Mp.$bias=$p),hp!=null&&(Mp.$preluActivationWeights=Cp),Nt.runKernelFunc(function(kp,Dp){var Fp=kp.fusedBatchMatMul({a:Op,b:Lp,transposeA:lp,transposeB:cp,bias:$p,activation:pp,preluActivationWeights:Cp});return Dp([Op,Lp,Fp]),Fp},Mp,function(kp,Dp){var Fp=Dp[0],Ip=Dp[1],Pp=Dp[2],Tp=gh(kp,Pp,pp),Np={};return dp!=null&&(Np={$bias:function(){return yh($p,Tp)}}),Object.assign(lp||cp?!lp&&cp?{$a:function(){return Tp.matMul(Ip,!1,!1)},$b:function(){return Tp.matMul(Fp,!0,!1)}}:lp&&!cp?{$a:function(){return Ip.matMul(Tp,!1,!0)},$b:function(){return Fp.matMul(Tp,!1,!1)}}:{$a:function(){return Ip.matMul(Tp,!0,!0)},$b:function(){return Tp.matMul(Fp,!0,!0)}}:{$a:function(){return Tp.matMul(Ip,!1,!0)},$b:function(){return Fp.matMul(Tp,!0,!1)}},Np)}).reshape(Ap)}}),wh=Cn({conv2d_:function(_d){var rp=_d.x,np=_d.filter,ap=_d.strides,sp=_d.pad,lp=_d.dataFormat,up=lp===void 0?"NHWC":lp,cp=_d.dilations,dp=cp===void 0?[1,1]:cp,fp=_d.dimRoundingMode,pp=_d.bias,hp=_d.activation,mp=hp===void 0?"linear":hp,gp=_d.preluActivationWeights;if(mp=mp||"linear",mh(Nt.state.gradientDepth,mp)===!1){var vp=Dc(rp,np,ap,sp,up,dp,fp);return pp!=null&&(vp=Vs(vp,pp)),xh(vp,mp,gp)}var xp=ln(rp,"x","conv2d"),Sp=ln(np,"filter","conv2d"),yp=xp,bp=!1;xp.rank===3&&(bp=!0,yp=xp.as4D(1,xp.shape[0],xp.shape[1],xp.shape[2])),g(yp.rank===4,function(){return"Error in fused conv2d: input must be rank 4, but got rank "+yp.rank+"."}),g(Sp.rank===4,function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+Sp.rank+"."}),fp!=null&&g(E(sp),function(){return"Error in fused conv2d: pad must be an integer when using, dimRoundingMode "+fp+" but got pad "+sp+"."}),g(yp.shape[3]===Sp.shape[2],function(){return"Error in conv2d: depth of input ("+yp.shape[3]+") must match input depth for filter "+Sp.shape[2]+"."}),g(Io(ap,dp),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+ap+" and dilations '"+dp+"'"}),g(up==="NHWC",function(){return"Error in conv2d: got dataFormat of "+up+" but only NHWC is currently supported."});var Ep,wp,_p=go(yp.shape,Sp.shape,ap,dp,sp,fp);pp!=null&&(Ep=Rt(Ep=ln(pp,"bias","fused conv2d"),xp)[0],po(_p.outShape,Ep.shape)),gp!=null&&(wp=ln(gp,"prelu weights","fused conv2d"));var Rp={x:yp,$filter:Sp};pp!=null&&(Rp.$bias=Ep),gp!=null&&(Rp.$preluActivationWeights=wp);var $p=Nt.runKernelFunc(function(Cp,Ap){var Op=Cp.fusedConv2d({input:yp,filter:Sp,convInfo:_p,bias:Ep,activation:mp,preluActivationWeights:wp});return Ap([Sp,yp,Op]),Op},Rp,function(Cp,Ap){var Op=Ap,Lp=Op[0],Mp=Op[1],kp=Op[2],Dp=gh(Cp,kp,mp);g(Ro(dp),function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+dp+"'"});var Fp={};return pp!=null&&(Fp={$bias:function(){return yh(Ep,Dp)}}),Object.assign({x:function(){return Fc(Mp.shape,Dp,Lp,ap,sp)},$filter:function(){return Nc(Mp,Dp,Lp.shape,ap,sp)}},Fp)});return bp?$p.as3D($p.shape[1],$p.shape[2],$p.shape[3]):$p}}),Ch=Cn({depthwiseConv2d_:function(_d){var rp=_d.x,np=_d.filter,ap=_d.strides,sp=_d.pad,lp=_d.dataFormat,up=lp===void 0?"NHWC":lp,cp=_d.dilations,dp=cp===void 0?[1,1]:cp,fp=_d.dimRoundingMode,pp=_d.bias,hp=_d.activation,mp=hp===void 0?"linear":hp,gp=_d.preluActivationWeights;if(mh(Nt.state.gradientDepth,mp)===!1){var vp=Oc(rp,np,ap,sp,up,dp,fp);return pp!=null&&(vp=Vs(vp,pp)),xh(vp,mp,gp)}var xp=ln(rp,"x","depthwiseConv2d"),Sp=ln(np,"filter","depthwiseConv2d"),yp=xp,bp=!1;xp.rank===3&&(bp=!0,yp=xp.as4D(1,xp.shape[0],xp.shape[1],xp.shape[2])),g(yp.rank===4,function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got rank "+yp.rank+"."}),g(Sp.rank===4,function(){return"Error in fused depthwiseConv2d: filter must be rank 4, but got rank "+Sp.rank+"."}),g(yp.shape[3]===Sp.shape[2],function(){return"Error in fused depthwiseConv2d: number of input channels ("+yp.shape[3]+") must match the inChannels dimension in filter "+Sp.shape[2]+"."}),dp==null&&(dp=[1,1]),g(Io(ap,dp),function(){return"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides "+ap+" and dilations '"+dp+"'"}),fp!=null&&g(E(sp),function(){return"Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode "+fp+" but got pad "+sp+"."});var Ep,wp,_p=go(yp.shape,Sp.shape,ap,dp,sp,fp,!0);pp!=null&&(Ep=Rt(Ep=ln(pp,"bias","fused conv2d"),xp)[0],po(_p.outShape,Ep.shape)),gp!=null&&(wp=ln(gp,"prelu weights","fused depthwiseConv2d"));var Rp={x:yp,$filter:Sp};pp!=null&&(Rp.$bias=Ep),gp!=null&&(Rp.$preluActivationWeights=wp);var $p=Nt.runKernelFunc(function(Cp,Ap){var Op=Cp.fusedDepthwiseConv2D({input:yp,filter:Sp,convInfo:_p,bias:Ep,activation:mp,preluActivationWeights:wp});return Ap([yp,Sp,Op]),Op},Rp,function(Cp,Ap){g(Ro(dp),function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+dp+"'"});var Op=Ap[0],Lp=Ap[1],Mp=Ap[2],kp=gh(Cp,Mp,mp),Dp={};return pp!=null&&(Dp={$bias:function(){return yh(Ep,kp)}}),Object.assign({x:function(){return _c(Op.shape,kp,Lp,_p)},$filter:function(){return Mc(Op,kp,Lp.shape,_p)}},Dp)});return bp?$p.as3D($p.shape[1],$p.shape[2],$p.shape[3]):$p}}),Eh=Object.freeze({matMul:bh,conv2d:wh,depthwiseConv2d:Ch}),Rh=Object.freeze({image:vh,linalg:sh,losses:oh,spectral:Bl,fused:Eh,signal:Kl,square:Uu,conv1d:Ac,conv2d:Dc,conv3d:Tc,depthwiseConv2d:Oc,separableConv2d:Bc,conv2dTranspose:Pc,conv3dTranspose:Lc,op:Cn,batchNormalization2d:Ss,batchNormalization3d:As,batchNormalization4d:Ds,batchNormalization:Ts,batchNorm:Ns,batchNorm2d:Fs,batchNorm3d:Os,batchNorm4d:_s,booleanMaskAsync:Rc,complex:En,real:Rn,imag:In,concat:Gn,concat1d:Hn,concat2d:qn,concat3d:Kn,concat4d:jn,split:Xn,matMul:Wc,dot:Uc,outerProduct:Vc,reverse:zc,reverse1d:Gc,reverse2d:Hc,reverse3d:qc,reverse4d:Kc,maxPool:$c,avgPool:Yc,pool:Qc,maxPool3d:Jc,avgPool3d:Zc,slice:tl,slice1d:el,slice2d:nl,slice3d:rl,slice4d:ol,abs:Vu,acos:zu,acosh:Gu,asin:Hu,asinh:qu,atan:Ku,atanh:ju,ceil:Xu,clipByValue:$u,cos:Yu,cosh:Qu,erf:Ju,exp:Zu,expm1:ts,floor:es,log:ns,log1p:rs,logSigmoid:os,neg:as,reciprocal:is,round:us,rsqrt:ss,sigmoid:cs,sign:ls,isNaN:hs,isInf:fs,isFinite:ps,sin:ds,sinh:vs,softplus:ms,sqrt:gs,step:ys,tan:xs,tanh:bs,all:il,any:ul,argMax:sl,argMin:cl,logSumExp:ll,max:hl,mean:fl,min:pl,moments:dl,sum:vl,prod:ml,equal:sc,equalStrict:cc,greater:lc,greaterEqual:hc,greaterEqualStrict:fc,greaterStrict:pc,less:dc,lessEqual:vc,lessEqualStrict:mc,lessStrict:gc,notEqual:yc,notEqualStrict:xc,add:Vs,addN:zs,addStrict:Gs,atan2:Hs,div:qs,divStrict:Ks,floorDiv:js,maximum:Xs,maximumStrict:$s,minimum:Ys,minimumStrict:Qs,mod:Js,modStrict:Zs,mul:tc,mulStrict:ec,pow:nc,powStrict:rc,squaredDifference:oc,squaredDifferenceStrict:ac,sub:ic,subStrict:uc,elu:gl,leakyRelu:yl,prelu:xl,relu:bl,relu6:wl,selu:Cl,logicalAnd:Ms,logicalNot:Bs,logicalOr:Ps,logicalXor:Ls,where:Ws,whereAsync:Us,buffer:ur,print:sr$1,batchToSpaceND:cr,cast:lr,clone:hr,cumsum:fr$1,depthToSpace:pr,expandDims:dr,eye:vr,multinomial:mr,oneHot:gr,pad:yr,pad1d:xr,pad2d:br,pad3d:wr,pad4d:Cr,rand:Er,randomNormal:Rr,randomGamma:Ir,randomUniform:kr,reshape:Sr,spaceToBatchND:Ar,squeeze:Dr,stack:Tr,tile:Nr,truncatedNormal:Fr,unstack:Or,setdiff1dAsync:_r,fill:Ln,linspace:Wn,ones:Bn,range:Un,scalar:An,tensor:kn,tensor1d:Dn,tensor2d:Tn,tensor3d:Nn,tensor4d:Fn,tensor5d:On,tensor6d:_n,variable:Mn,zeros:Pn,onesLike:Vn,zerosLike:zn,transpose:El,softmax:io,logSoftmax:uo,localResponseNormalization:Rl,norm:Il,gather:Cc,unsortedSegmentSum:Ec,basicLSTMCell:kl,multiRNNCell:Sl,movingAverage:Al,stridedSlice:Dl,topk:Tl,scatterND:Nl,fft:Fl,ifft:Ol,rfft:_l,irfft:Ml,sparseToDense:Pl,gatherND:Ll,diag:Wl,dropout:Ul,hannWindow:zl,hammingWindow:Gl,frame:Hl,stft:ql,inTopKAsync:Xl});function Ih(_d,rp){Array.isArray(_d)||(_d=[_d]),_d.forEach(function(np){np!=null&&g(np.dtype!=="complex64",function(){return rp+" does not support complex64 tensors."})})}function kh(_d,rp,np,ap){if(np==="linear")return _d.linear(rp);if(np==="relu")return _d.relu(rp);if(np==="elu")return _d.elu(rp);if(np==="relu6")return _d.relu6(rp);if(np==="prelu")return _d.prelu(rp,ap);throw new Error("Activation "+np+" has not been implemented for the CPU backend.")}var Sh=function(_d){function rp(){var np=_d.call(this)||this;if(np.blockSize=48,np.firstUse=!0,a$1().get("IS_BROWSER")){var ap=typeof OffscreenCanvas<"u"?new OffscreenCanvas(300,150):typeof document<"u"?document.createElement("canvas"):null;ap!==null&&(np.fromPixels2DContext=ap.getContext("2d"))}return np.data=new so(np,Nt),np}return e(rp,_d),rp.prototype.write=function(np,ap,sp){this.firstUse&&(this.firstUse=!1,a$1().get("IS_NODE")&&un(`
============================
Hi there 👋. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.
============================
`));var lp={};return this.data.set(lp,{values:np,dtype:sp}),lp},rp.prototype.move=function(np,ap,sp,lp){this.data.set(np,{values:ap,dtype:lp})},rp.prototype.numDataIds=function(){return this.data.numDataIds()},rp.prototype.fromPixels=function(np,ap){if(np==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var sp,lp,up=np.data instanceof Uint8Array,cp=typeof ImageData<"u"&&np instanceof ImageData,dp=typeof HTMLVideoElement<"u"&&np instanceof HTMLVideoElement,fp=typeof HTMLImageElement<"u"&&np instanceof HTMLImageElement,pp=dp?[np.videoWidth,np.videoHeight]:[np.width,np.height],hp=pp[0],mp=pp[1];if(a$1().get("IS_NODE")&&np.getContext==null)throw new Error("When running in node, pixels must be an HTMLCanvasElement like the one returned by the `canvas` npm package");if(np.getContext!=null)sp=np.getContext("2d").getImageData(0,0,hp,mp).data;else if(cp||up)sp=np.data;else{if(!fp&&!dp)throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData or {data: Uint32Array, width: number, height: number}, but was "+np.constructor.name);if(this.fromPixels2DContext==null)throw new Error("Can't read pixels from HTMLImageElement outside the browser.");this.fromPixels2DContext.canvas.width=hp,this.fromPixels2DContext.canvas.height=mp,this.fromPixels2DContext.drawImage(np,0,0,hp,mp),sp=this.fromPixels2DContext.getImageData(0,0,hp,mp).data}if(ap===4)lp=new Int32Array(sp);else{var gp=hp*mp;lp=new Int32Array(gp*ap);for(var vp=0;vp<gp;vp++)for(var xp=0;xp<ap;++xp)lp[vp*ap+xp]=sp[4*vp+xp]}return Nn(lp,[mp,hp,ap],"int32")},rp.prototype.read=function(np){return n$1(this,void 0,void 0,function(){return r(this,function(ap){return[2,this.readSync(np)]})})},rp.prototype.readSync=function(np){var ap=this.data.get(np),sp=ap.dtype,lp=ap.complexTensors;return sp==="complex64"?No(this.readSync(lp.real.dataId),this.readSync(lp.imag.dataId)):this.data.get(np).values},rp.prototype.bufferSync=function(np){var ap=this.readSync(np.dataId),sp=ap;if(np.dtype==="string")try{sp=ap.map(function(lp){return Z(lp)})}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return ur(np.shape,np.dtype,sp)},rp.prototype.makeOutput=function(np,ap,sp){var lp=this.write(np,ap,sp);return Nt.makeTensorFromDataId(lp,ap,sp,this)},rp.prototype.disposeData=function(np){if(this.data.has(np)){var ap=this.data.get(np).complexTensors;ap!=null&&(ap.real.dispose(),ap.imag.dispose()),this.data.delete(np)}},rp.prototype.time=function(np){return n$1(this,void 0,void 0,function(){var ap;return r(this,function(sp){return ap=Y(),np(),[2,{kernelMs:Y()-ap}]})})},rp.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},rp.prototype.complex=function(np,ap){var sp=this.makeOutput(null,np.shape,"complex64");return this.data.get(sp.dataId).complexTensors={real:Nt.keep(np.clone()),imag:Nt.keep(ap.clone())},sp},rp.prototype.real=function(np){return this.data.get(np.dataId).complexTensors.real.clone()},rp.prototype.imag=function(np){return this.data.get(np.dataId).complexTensors.imag.clone()},rp.prototype.slice=function(np,ap,sp){if(Ih(np,"slice"),Yr(np.shape,ap,sp)){var lp=Qr(ap,np.strides),up=w$1(sp);return kn(this.readSync(np.dataId).subarray(lp,lp+up),sp,np.dtype)}for(var cp=ur(sp,np.dtype),dp=this.bufferSync(np),fp=0;fp<cp.size;++fp){var pp=cp.indexToLoc(fp).map(function(hp,mp){return hp+ap[mp]});cp.values[fp]=dp.get.apply(dp,pp)}return cp.toTensor()},rp.prototype.stridedSlice=function(np,ap,sp,lp){Ih(np,"stridedSlice");var up=jr(ap,sp,lp);if(up.some(function(gp){return gp===0}))return kn([],up);for(var cp=ur(up,np.dtype),dp=this.bufferSync(np),fp=0;fp<cp.size;fp++){for(var pp=cp.indexToLoc(fp),hp=new Array(pp.length),mp=0;mp<hp.length;mp++)hp[mp]=pp[mp]*lp[mp]+ap[mp];cp.set.apply(cp,[dp.get.apply(dp,hp)].concat(pp))}return cp.toTensor()},rp.prototype.diag=function(np){for(var ap=this.readSync(np.dataId),sp=ur([np.size,np.size],np.dtype),lp=sp.values,up=0;up<ap.length;up++)lp[up*np.size+up]=ap[up];return sp.toTensor()},rp.prototype.unstack=function(np,ap){for(var sp=np.shape[ap],lp=new Array(np.rank-1),up=0,cp=0;cp<np.rank;cp++)cp!==ap&&(lp[up++]=np.shape[cp]);var dp=new Array(np.rank).fill(0),fp=np.shape.slice();fp[ap]=1;var pp=new Array(sp);for(cp=0;cp<pp.length;cp++)dp[ap]=cp,pp[cp]=this.slice(np,dp,fp).reshape(lp);return pp},rp.prototype.reverse=function(np,ap){Ih(np,"reverse");for(var sp=ur(np.shape,np.dtype),lp=this.bufferSync(np),up=function(dp){var fp=sp.indexToLoc(dp),pp=fp.slice();ap.forEach(function(hp){return pp[hp]=np.shape[hp]-1-pp[hp]}),sp.set.apply(sp,[lp.get.apply(lp,pp)].concat(fp))},cp=0;cp<sp.size;cp++)up(cp);return sp.toTensor()},rp.prototype.concat=function(np,ap){var sp=this;if(np[0].dtype==="complex64"){var lp=np.map(function(gp){return Rn(gp)}),up=np.map(function(gp){return In(gp)});return En(this.concat(lp,ap),this.concat(up,ap))}var cp=np.map(function(gp){var vp=w$1(gp.shape.slice(ap));return gp.as2D(-1,vp)}),dp=wn(cp.map(function(gp){return gp.shape}),1),fp=ur(dp,np[0].dtype).values;if(cp[0].shape[0]===1){var pp=0;cp.forEach(function(gp){fp.set(sp.readSync(gp.dataId),pp),pp+=gp.size})}else{var hp=0;cp.forEach(function(gp){for(var vp=sp.readSync(gp.dataId),xp=0,Sp=0;Sp<gp.shape[0];++Sp)for(var yp=Sp*dp[1]+hp,bp=0;bp<gp.shape[1];++bp)fp[yp+bp]=vp[xp++];hp+=gp.shape[1]})}var mp=wn(np.map(function(gp){return gp.shape}),ap);return kn(fp,mp,np[0].dtype)},rp.prototype.neg=function(np){return Ih(np,"neg"),this.multiply(An(-1),np)},rp.prototype.add=function(np,ap){return np.dtype==="complex64"||ap.dtype==="complex64"?this.broadcastedBinaryComplexOp(np.cast("complex64"),ap.cast("complex64"),function(sp,lp,up,cp){return{real:sp+up,imag:lp+cp}}):this.broadcastedBinaryOp(np,ap,Ct(np.dtype,ap.dtype),function(sp,lp){return sp+lp})},rp.prototype.addN=function(np){var ap=this;Ih(np,"addN");for(var sp=np.map(function(pp){return ap.readSync(pp.dataId)}),lp=ur(np[0].shape,np[0].dtype),up=lp.values,cp=0;cp<np.length;cp++)for(var dp=sp[cp],fp=0;fp<up.length;fp++)up[fp]+=dp[fp];return lp.toTensor()},rp.prototype.subtract=function(np,ap){return np.dtype==="complex64"||ap.dtype==="complex64"?this.broadcastedBinaryComplexOp(np.cast("complex64"),ap.cast("complex64"),function(sp,lp,up,cp){return{real:sp-up,imag:lp-cp}}):this.broadcastedBinaryOp(np,ap,Ct(np.dtype,ap.dtype),function(sp,lp){return sp-lp})},rp.prototype.pow=function(np,ap){return Ih([np,ap],"pow"),this.broadcastedBinaryOp(np,ap,np.dtype,function(sp,lp){return Math.pow(sp,lp)})},rp.prototype.batchMatMul=function(np,ap,sp,lp){Ih([np,ap],"matMul");for(var up=sp?np.shape[1]:np.shape[2],cp=sp?np.shape[2]:np.shape[1],dp=lp?ap.shape[1]:ap.shape[2],fp=np.shape[0],pp=this.readSync(np.dataId),hp=this.readSync(ap.dataId),mp=sp?[np.strides[0],1,np.strides[1]]:[np.strides[0],np.strides[1],1],gp=mp[0],vp=mp[1],xp=mp[2],Sp=lp?[1,ap.strides[1],ap.strides[0]]:[ap.strides[1],1,ap.strides[0]],yp=Sp[0],bp=Sp[1],Ep=Sp[2],wp=cp*dp,_p=ur([fp,cp,dp],np.dtype),Rp=_p.values,$p=this.blockSize,Cp=0;Cp<fp;Cp++)for(var Ap=0;Ap<cp;Ap+=$p)for(var Op=0;Op<dp;Op+=$p)for(var Lp=0;Lp<up;Lp+=$p)for(var Mp=Math.min(Ap+$p,cp),kp=Math.min(Op+$p,dp),Dp=Math.min(Lp+$p,up),Fp=Ap;Fp<Mp;Fp++)for(var Ip=Op;Ip<kp;Ip++){for(var Pp=0,Tp=Lp;Tp<Dp;Tp++)Pp+=pp[Cp*gp+Fp*vp+Tp*xp]*hp[Tp*yp+Ip*bp+Cp*Ep];Rp[Cp*wp+(Fp*dp+Ip)]+=Pp}return _p.toTensor()},rp.prototype.fusedBatchMatMul=function(np){var ap=np.a,sp=np.b,lp=np.transposeA,up=np.transposeB,cp=np.bias,dp=np.activation,fp=np.preluActivationWeights,pp=this.batchMatMul(ap,sp,lp,up);return cp&&(pp=this.add(pp,cp)),dp&&(pp=kh(this,pp,dp,fp)),pp},rp.prototype.multiply=function(np,ap){return np.dtype==="complex64"||ap.dtype==="complex64"?this.broadcastedBinaryComplexOp(np.cast("complex64"),ap.cast("complex64"),function(sp,lp,up,cp){return{real:sp*up-lp*cp,imag:sp*cp+lp*up}}):this.broadcastedBinaryOp(np,ap,Ct(np.dtype,ap.dtype),function(sp,lp){return sp*lp})},rp.prototype.realDivide=function(np,ap){return Ih([np,ap],"realDivide"),this.broadcastedBinaryOp(np,ap,"float32",function(sp,lp){return sp/lp})},rp.prototype.floorDiv=function(np,ap){return Ih([np,ap],"floorDiv"),this.broadcastedBinaryOp(np,ap,"int32",function(sp,lp){return Math.floor(sp/lp)})},rp.prototype.sum=function(np,ap){Ih(np,"sum"),mn("sum",ap,np.rank);for(var sp=dn(np.shape,ap),lp=sp[0],up=sp[1],cp=Pn(lp,Ct(np.dtype,"int32")),dp=w$1(up),fp=this.readSync(cp.dataId),pp=this.readSync(np.dataId),hp=0;hp<fp.length;++hp){for(var mp=hp*dp,gp=0,vp=0;vp<dp;++vp)gp+=pp[mp+vp];fp[hp]=gp}return cp},rp.prototype.prod=function(np,ap){Ih(np,"sum");for(var sp=dn(np.shape,ap),lp=sp[0],up=sp[1],cp=Pn(lp,Ct(np.dtype,"int32")),dp=w$1(up),fp=this.readSync(cp.dataId),pp=this.readSync(np.dataId),hp=0;hp<fp.length;++hp){for(var mp=hp*dp,gp=1,vp=0;vp<dp;++vp)gp*=pp[mp+vp];fp[hp]=gp}return cp},rp.prototype.unsortedSegmentSum=function(np,ap,sp){Ih(np,"unsortedSegmentSum");for(var lp=[],up=np.rank-ap.rank,cp=0;cp<up;++cp)ap=ap.expandDims(cp+1);for(cp=0;cp<sp;++cp){var dp=An(cp,"int32"),fp=sc(dp,ap).asType("float32").mul(np).sum(0);lp.push(fp)}return Tr(lp)},rp.prototype.argMin=function(np,ap){Ih(np,"argMin");var sp=[ap];mn("argMin",sp,np.rank);for(var lp=dn(np.shape,sp),up=lp[0],cp=lp[1],dp=Pn(up,"int32"),fp=w$1(cp),pp=this.readSync(dp.dataId),hp=this.readSync(np.dataId),mp=0;mp<pp.length;++mp){for(var gp=mp*fp,vp=hp[gp],xp=0,Sp=0;Sp<fp;++Sp){var yp=hp[gp+Sp];yp<vp&&(vp=yp,xp=Sp)}pp[mp]=xp}return dp},rp.prototype.argMax=function(np,ap){Ih(np,"argMax");var sp=[ap];mn("argMax",sp,np.rank);for(var lp=dn(np.shape,sp),up=lp[0],cp=lp[1],dp=Pn(up,"int32"),fp=w$1(cp),pp=this.readSync(dp.dataId),hp=this.readSync(np.dataId),mp=0;mp<pp.length;++mp){for(var gp=mp*fp,vp=hp[gp],xp=0,Sp=0;Sp<fp;++Sp){var yp=hp[gp+Sp];yp>vp&&(vp=yp,xp=Sp)}pp[mp]=xp}return dp},rp.prototype.cumsum=function(np,ap,sp,lp){if(Ih(np,"cumsum"),ap!==np.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(np.rank-1)+" but got axis="+ap);for(var up=Ct(np.dtype,"int32"),cp=Pn(np.shape,up),dp=this.readSync(cp.dataId),fp=this.readSync(np.dataId),pp=np.shape[np.rank-1],hp=lp?function(Sp,yp){return Sp+pp-yp-1}:function(Sp,yp){return Sp+yp},mp=0;mp<fp.length;mp+=pp)for(var gp=0;gp<pp;gp++){var vp=hp(mp,gp);if(gp===0)dp[vp]=sp?0:fp[vp];else{var xp=hp(mp,gp-1);dp[vp]=sp?fp[xp]+dp[xp]:fp[vp]+dp[xp]}}return cp},rp.prototype.equal=function(np,ap){return Ih([np,ap],"equal"),this.broadcastedBinaryOp(np,ap,"bool",function(sp,lp){return sp===lp?1:0})},rp.prototype.notEqual=function(np,ap){return Ih([np,ap],"notEqual"),this.broadcastedBinaryOp(np,ap,"bool",function(sp,lp){return sp!==lp?1:0})},rp.prototype.less=function(np,ap){return Ih([np,ap],"less"),this.broadcastedBinaryOp(np,ap,"bool",function(sp,lp){return sp<lp?1:0})},rp.prototype.lessEqual=function(np,ap){return Ih([np,ap],"lessEqual"),this.broadcastedBinaryOp(np,ap,"bool",function(sp,lp){return sp<=lp?1:0})},rp.prototype.greater=function(np,ap){return Ih([np,ap],"greater"),this.broadcastedBinaryOp(np,ap,"bool",function(sp,lp){return sp>lp?1:0})},rp.prototype.greaterEqual=function(np,ap){return Ih([np,ap],"greaterEqual"),this.broadcastedBinaryOp(np,ap,"bool",function(sp,lp){return sp>=lp?1:0})},rp.prototype.logicalNot=function(np){Ih(np,"logicalNot");for(var ap=this.readSync(np.dataId),sp=new Uint8Array(ap.length),lp=0;lp<ap.length;++lp)sp[lp]=ap[lp]?0:1;return this.makeOutput(sp,np.shape,"bool")},rp.prototype.logicalAnd=function(np,ap){return Ih([np,ap],"logicalAnd"),this.broadcastedBinaryOp(np,ap,"bool",function(sp,lp){return sp&&lp})},rp.prototype.logicalOr=function(np,ap){return Ih([np,ap],"logicalOr"),this.broadcastedBinaryOp(np,ap,"bool",function(sp,lp){return sp||lp})},rp.prototype.select=function(np,ap,sp){Ih([np,ap,sp],"select");for(var lp=this.readSync(np.dataId),up=this.readSync(ap.dataId),cp=this.readSync(sp.dataId),dp=Pn(ap.shape,Ct(ap.dtype,sp.dtype)),fp=this.readSync(dp.dataId),pp=0,hp=np.rank===0||np.rank>1||ap.rank===1?1:w$1(ap.shape.slice(1)),mp=0;mp<lp.length;mp++)for(var gp=0;gp<hp;gp++)lp[mp]===1?fp[pp++]=up[mp]:fp[pp++]=cp[mp];return dp},rp.prototype.where=function(np){Ih([np],"where");var ap=this.readSync(np.dataId);return Uo(np.shape,ap)},rp.prototype.topk=function(np,ap,sp){return Ih(np,"topk"),Wo(this.readSync(np.dataId),np.shape,np.dtype,ap)},rp.prototype.min=function(np,ap){Ih(np,"min"),mn("min",ap,np.rank);for(var sp=dn(np.shape,ap),lp=sp[0],up=sp[1],cp=Pn(lp,np.dtype),dp=w$1(up),fp=this.readSync(cp.dataId),pp=this.readSync(np.dataId),hp=0;hp<fp.length;++hp){for(var mp=hp*dp,gp=pp[mp],vp=0;vp<dp;++vp){var xp=pp[mp+vp];xp<gp&&(gp=xp)}fp[hp]=gp}return cp},rp.prototype.minimum=function(np,ap){return Ih([np,ap],"minimum"),this.broadcastedBinaryOp(np,ap,np.dtype,function(sp,lp){return Math.min(sp,lp)})},rp.prototype.mod=function(np,ap){return Ih([np,ap],"mod"),this.broadcastedBinaryOp(np,ap,np.dtype,function(sp,lp){var up=sp%lp;return sp<0&&lp<0||sp>=0&&lp>=0?up:(up+lp)%lp})},rp.prototype.max=function(np,ap){Ih(np,"max"),mn("max",ap,np.rank);for(var sp=dn(np.shape,ap),lp=sp[0],up=sp[1],cp=Pn(lp,np.dtype),dp=w$1(up),fp=this.readSync(cp.dataId),pp=this.readSync(np.dataId),hp=0;hp<fp.length;++hp){for(var mp=hp*dp,gp=pp[mp],vp=0;vp<dp;++vp){var xp=pp[mp+vp];xp>gp&&(gp=xp)}fp[hp]=gp}return cp},rp.prototype.maximum=function(np,ap){return Ih([np,ap],"maximum"),this.broadcastedBinaryOp(np,ap,np.dtype,function(sp,lp){return Math.max(sp,lp)})},rp.prototype.all=function(np,ap){Ih(np,"all"),mn("all",ap,np.rank);for(var sp=dn(np.shape,ap),lp=sp[0],up=sp[1],cp=Pn(lp,np.dtype),dp=w$1(up),fp=this.readSync(cp.dataId),pp=this.readSync(np.dataId),hp=0;hp<fp.length;++hp){for(var mp=hp*dp,gp=pp[mp],vp=0;vp<dp;++vp){var xp=pp[mp+vp];gp=gp&&xp}fp[hp]=gp}return cp},rp.prototype.any=function(np,ap){Ih(np,"any"),mn("any",ap,np.rank);for(var sp=dn(np.shape,ap),lp=sp[0],up=sp[1],cp=Pn(lp,np.dtype),dp=w$1(up),fp=this.readSync(cp.dataId),pp=this.readSync(np.dataId),hp=0;hp<fp.length;++hp){for(var mp=hp*dp,gp=pp[mp],vp=0;vp<dp;++vp){var xp=pp[mp+vp];gp=gp||xp}fp[hp]=gp}return cp},rp.prototype.squaredDifference=function(np,ap){return Ih([np,ap],"squaredDifference"),this.broadcastedBinaryOp(np,ap,np.dtype,function(sp,lp){var up=sp-lp;return up*up})},rp.prototype.ceil=function(np){Ih(np,"ceil");for(var ap=this.readSync(np.dataId),sp=new Float32Array(ap.length),lp=0;lp<ap.length;++lp)sp[lp]=Math.ceil(ap[lp]);return this.makeOutput(sp,np.shape,"float32")},rp.prototype.floor=function(np){Ih(np,"floor");for(var ap=this.readSync(np.dataId),sp=new Float32Array(ap.length),lp=0;lp<ap.length;++lp)sp[lp]=Math.floor(ap[lp]);return this.makeOutput(sp,np.shape,"float32")},rp.prototype.sign=function(np){Ih(np,"x");for(var ap=this.readSync(np.dataId),sp=new Float32Array(ap.length),lp=0;lp<ap.length;++lp)ap[lp]<0?sp[lp]=-1:ap[lp]>0?sp[lp]=1:sp[lp]=0;return this.makeOutput(sp,np.shape,"float32")},rp.prototype.isNaN=function(np){Ih(np,"x");for(var ap=this.readSync(np.dataId),sp=new Uint8Array(ap.length),lp=0;lp<ap.length;++lp)Number.isNaN(ap[lp])&&(sp[lp]=1);return this.makeOutput(sp,np.shape,"bool")},rp.prototype.isInf=function(np){Ih(np,"x");for(var ap=this.readSync(np.dataId),sp=new Uint8Array(ap.length),lp=0;lp<ap.length;++lp)Math.abs(ap[lp])===1/0&&(sp[lp]=1);return this.makeOutput(sp,np.shape,"bool")},rp.prototype.isFinite=function(np){Ih(np,"x");for(var ap=this.readSync(np.dataId),sp=new Uint8Array(ap.length),lp=0;lp<ap.length;++lp)Number.isFinite(ap[lp])&&(sp[lp]=1);return this.makeOutput(sp,np.shape,"bool")},rp.prototype.round=function(np){Ih(np,"round");for(var ap=this.readSync(np.dataId),sp=new Float32Array(ap.length),lp=0;lp<ap.length;++lp){var up=Math.floor(ap[lp]);ap[lp]-up<.5?sp[lp]=Math.floor(ap[lp]):ap[lp]-up>.5?sp[lp]=Math.ceil(ap[lp]):sp[lp]=up%2==0?up:up+1}return this.makeOutput(sp,np.shape,"float32")},rp.prototype.exp=function(np){Ih(np,"exp");for(var ap=this.readSync(np.dataId),sp=new Float32Array(ap.length),lp=0;lp<ap.length;++lp)sp[lp]=Math.exp(ap[lp]);return this.makeOutput(sp,np.shape,"float32")},rp.prototype.expm1=function(np){Ih(np,"expm1");for(var ap=this.readSync(np.dataId),sp=new Float32Array(ap.length),lp=0;lp<ap.length;++lp)sp[lp]=Math.expm1(ap[lp]);return this.makeOutput(sp,np.shape,"float32")},rp.prototype.log=function(np){Ih(np,"log");for(var ap=this.readSync(np.dataId),sp=new Float32Array(ap.length),lp=0;lp<ap.length;++lp){var up=ap[lp];sp[lp]=Math.log(up)}return this.makeOutput(sp,np.shape,"float32")},rp.prototype.log1p=function(np){Ih(np,"log1p");for(var ap=this.readSync(np.dataId),sp=new Float32Array(ap.length),lp=0;lp<ap.length;++lp){var up=ap[lp];sp[lp]=Math.log1p(up)}return this.makeOutput(sp,np.shape,"float32")},rp.prototype.sqrt=function(np){Ih(np,"sqrt");for(var ap=this.readSync(np.dataId),sp=new Float32Array(ap.length),lp=0;lp<ap.length;++lp){var up=ap[lp];sp[lp]=Math.sqrt(up)}return this.makeOutput(sp,np.shape,"float32")},rp.prototype.rsqrt=function(np){Ih(np,"rsqrt");for(var ap=this.readSync(np.dataId),sp=new Float32Array(ap.length),lp=0;lp<ap.length;++lp){var up=ap[lp];sp[lp]=1/Math.sqrt(up)}return this.makeOutput(sp,np.shape,"float32")},rp.prototype.reciprocal=function(np){Ih(np,"reciprocal");for(var ap=this.readSync(np.dataId),sp=new Float32Array(ap.length),lp=0;lp<ap.length;++lp)sp[lp]=1/ap[lp];return this.makeOutput(sp,np.shape,"float32")},rp.prototype.linear=function(np){return np},rp.prototype.relu=function(np){Ih(np,"relu");for(var ap=Pn(np.shape,np.dtype),sp=this.readSync(ap.dataId),lp=this.readSync(np.dataId),up=0;up<lp.length;++up)sp[up]=Math.max(0,lp[up]);return ap},rp.prototype.relu6=function(np){Ih(np,"relu");for(var ap=Pn(np.shape,np.dtype),sp=this.readSync(ap.dataId),lp=this.readSync(np.dataId),up=0;up<lp.length;++up)sp[up]=Math.min(Math.max(0,lp[up]),6);return ap},rp.prototype.prelu=function(np,ap){return Ih([np,ap],"prelu"),this.broadcastedBinaryOp(np,ap,np.dtype,function(sp,lp){return sp<0?lp*sp:sp})},rp.prototype.elu=function(np){Ih(np,"elu");for(var ap=new Float32Array(np.size),sp=this.readSync(np.dataId),lp=0;lp<sp.length;++lp){var up=sp[lp];ap[lp]=up>=0?up:Math.exp(up)-1}return this.makeOutput(ap,np.shape,"float32")},rp.prototype.eluDer=function(np,ap){Ih([np,ap],"eluDer");for(var sp=new Float32Array(ap.size),lp=this.readSync(ap.dataId),up=this.readSync(np.dataId),cp=0;cp<lp.length;++cp){var dp=lp[cp];sp[cp]=dp>=1?up[cp]:up[cp]*(dp+1)}return this.makeOutput(sp,ap.shape,"float32")},rp.prototype.selu=function(np){Ih(np,"selu");for(var ap=iu,sp=uu,lp=new Float32Array(np.size),up=this.readSync(np.dataId),cp=0;cp<up.length;++cp){var dp=up[cp];lp[cp]=dp>=0?sp*dp:ap*(Math.exp(dp)-1)}return this.makeOutput(lp,np.shape,"float32")},rp.prototype.clip=function(np,ap,sp){Ih(np,"clip");for(var lp=new Float32Array(np.size),up=this.readSync(np.dataId),cp=0;cp<up.length;++cp){var dp=up[cp];lp[cp]=dp>sp?sp:dp<ap?ap:dp}return this.makeOutput(lp,np.shape,"float32")},rp.prototype.abs=function(np){for(var ap=new Float32Array(np.size),sp=this.readSync(np.dataId),lp=0;lp<sp.length;++lp)ap[lp]=Math.abs(sp[lp]);return this.makeOutput(ap,np.shape,"float32")},rp.prototype.complexAbs=function(np){for(var ap=new Float32Array(np.size),sp=this.readSync(np.dataId),lp=0;lp<np.size;++lp){var up=sp[2*lp],cp=sp[2*lp+1];ap[lp]=Math.hypot(up,cp)}return this.makeOutput(ap,np.shape,"float32")},rp.prototype.int=function(np){Ih(np,"int");for(var ap=new Int32Array(np.size),sp=this.readSync(np.dataId),lp=0;lp<sp.length;++lp)ap[lp]=sp[lp];return this.makeOutput(ap,np.shape,"int32")},rp.prototype.sigmoid=function(np){Ih(np,"sigmoid");for(var ap=new Float32Array(np.size),sp=this.readSync(np.dataId),lp=0;lp<sp.length;++lp)ap[lp]=1/(1+Math.exp(-sp[lp]));return this.makeOutput(ap,np.shape,"float32")},rp.prototype.softplus=function(np){Ih(np,"softplus");for(var ap=Math.log(11920928955078125e-23)+2,sp=new Float32Array(np.size),lp=this.readSync(np.dataId),up=0;up<lp.length;++up){var cp=lp[up]>-ap,dp=lp[up]<ap,fp=Math.exp(lp[up]),pp=void 0;pp=dp?fp:cp?lp[up]:Math.log(1+fp),sp[up]=pp}return this.makeOutput(sp,np.shape,"float32")},rp.prototype.sin=function(np){Ih(np,"sin");for(var ap=new Float32Array(np.size),sp=this.readSync(np.dataId),lp=0;lp<sp.length;++lp)ap[lp]=Math.sin(sp[lp]);return this.makeOutput(ap,np.shape,"float32")},rp.prototype.cos=function(np){Ih(np,"cos");for(var ap=new Float32Array(np.size),sp=this.readSync(np.dataId),lp=0;lp<sp.length;++lp)ap[lp]=Math.cos(sp[lp]);return this.makeOutput(ap,np.shape,"float32")},rp.prototype.tan=function(np){Ih(np,"tan");for(var ap=new Float32Array(np.size),sp=this.readSync(np.dataId),lp=0;lp<sp.length;++lp)ap[lp]=Math.tan(sp[lp]);return this.makeOutput(ap,np.shape,"float32")},rp.prototype.asin=function(np){Ih(np,"asin");for(var ap=new Float32Array(np.size),sp=this.readSync(np.dataId),lp=0;lp<sp.length;++lp)ap[lp]=Math.asin(sp[lp]);return this.makeOutput(ap,np.shape,"float32")},rp.prototype.acos=function(np){Ih(np,"acos");for(var ap=new Float32Array(np.size),sp=this.readSync(np.dataId),lp=0;lp<sp.length;++lp)ap[lp]=Math.acos(sp[lp]);return this.makeOutput(ap,np.shape,"float32")},rp.prototype.atan=function(np){Ih(np,"atan");for(var ap=new Float32Array(np.size),sp=this.readSync(np.dataId),lp=0;lp<sp.length;++lp)ap[lp]=Math.atan(sp[lp]);return this.makeOutput(ap,np.shape,"float32")},rp.prototype.atan2=function(np,ap){return Ih([np,ap],"atan2"),this.broadcastedBinaryOp(np,ap,np.dtype,function(sp,lp){return Math.atan2(sp,lp)})},rp.prototype.sinh=function(np){Ih(np,"sinh");for(var ap=new Float32Array(np.size),sp=this.readSync(np.dataId),lp=0;lp<sp.length;++lp)ap[lp]=Math.sinh(sp[lp]);return this.makeOutput(ap,np.shape,"float32")},rp.prototype.cosh=function(np){Ih(np,"cosh");for(var ap=new Float32Array(np.size),sp=this.readSync(np.dataId),lp=0;lp<sp.length;++lp)ap[lp]=Math.cosh(sp[lp]);return this.makeOutput(ap,np.shape,"float32")},rp.prototype.tanh=function(np){Ih(np,"tanh");for(var ap=new Float32Array(np.size),sp=this.readSync(np.dataId),lp=0;lp<sp.length;++lp)ap[lp]=R$1(sp[lp]);return this.makeOutput(ap,np.shape,"float32")},rp.prototype.asinh=function(np){Ih(np,"asinh");for(var ap=new Float32Array(np.size),sp=this.readSync(np.dataId),lp=0;lp<sp.length;++lp)ap[lp]=Math.asinh(sp[lp]);return this.makeOutput(ap,np.shape,"float32")},rp.prototype.acosh=function(np){Ih(np,"acosh");for(var ap=new Float32Array(np.size),sp=this.readSync(np.dataId),lp=0;lp<sp.length;++lp)ap[lp]=Math.acosh(sp[lp]);return this.makeOutput(ap,np.shape,"float32")},rp.prototype.atanh=function(np){Ih(np,"atanh");for(var ap=new Float32Array(np.size),sp=this.readSync(np.dataId),lp=0;lp<sp.length;++lp)ap[lp]=Math.atanh(sp[lp]);return this.makeOutput(ap,np.shape,"float32")},rp.prototype.erf=function(np){Ih(np,"erf");for(var ap=new Float32Array(np.size),sp=this.readSync(np.dataId),lp=0;lp<sp.length;++lp){var up=Math.sign(sp[lp]),cp=Math.abs(sp[lp]),dp=1/(1+.3275911*cp);ap[lp]=up*(1-((((1.061405429*dp-1.453152027)*dp+1.421413741)*dp-.284496736)*dp+.254829592)*dp*Math.exp(-cp*cp))}return this.makeOutput(ap,np.shape,"float32")},rp.prototype.step=function(np,ap){ap===void 0&&(ap=0),Ih(np,"step");for(var sp=new Float32Array(np.size),lp=this.readSync(np.dataId),up=0;up<lp.length;++up){var cp=lp[up];isNaN(cp)?sp[up]=NaN:sp[up]=cp>0?1:ap}return this.makeOutput(sp,np.shape,"float32")},rp.prototype.fusedConv2d=function(np){var ap=np.input,sp=np.filter,lp=np.convInfo,up=np.bias,cp=np.activation,dp=np.preluActivationWeights,fp=this.conv2d(ap,sp,lp);return up&&(fp=this.add(fp,up)),cp&&(fp=kh(this,fp,cp,dp)),fp},rp.prototype.conv2d=function(np,ap,sp){Ih([np,ap],"conv2d");for(var lp=sp.filterHeight,up=sp.filterWidth,cp=sp.dilationHeight,dp=sp.dilationWidth,fp=sp.padInfo.left,pp=sp.padInfo.top,hp=sp.dataFormat==="channelsLast",mp=ur(sp.outShape,np.dtype),gp=np.strides[0],vp=hp?np.strides[1]:np.strides[2],xp=hp?np.strides[2]:1,Sp=hp?1:np.strides[1],yp=mp.strides[0],bp=hp?mp.strides[1]:mp.strides[2],Ep=hp?mp.strides[2]:1,wp=hp?1:mp.strides[1],_p=this.readSync(np.dataId),Rp=this.readSync(ap.dataId),$p=mp.values,Cp=0;Cp<sp.batchSize;++Cp)for(var Ap=Cp*gp,Op=Cp*yp,Lp=0;Lp<sp.outHeight;++Lp)for(var Mp=Op+Lp*bp,kp=Lp*sp.strideHeight-pp,Dp=0;Dp<lp;Dp++){var Fp=kp+Dp*cp;if(!(Fp<0||Fp>=sp.inHeight))for(var Ip=Dp*ap.strides[0],Pp=Ap+Fp*vp,Tp=0;Tp<sp.outWidth;++Tp)for(var Np=Mp+Tp*Ep,jp=Tp*sp.strideWidth-fp,Vp=0;Vp<up;Vp++){var zp=jp+Vp*dp;if(!(zp<0||zp>=sp.inWidth))for(var Wp=Pp+zp*xp,Up=Ip+Vp*ap.strides[1],qp=0;qp<sp.inChannels;++qp){for(var Bp=_p[Wp+qp*Sp],Yp=0;Yp<sp.outChannels;++Yp)$p[Np+Yp*wp]+=Bp*Rp[Up+Yp];Up+=sp.outChannels}}}return mp.toTensor()},rp.prototype.conv3d=function(np,ap,sp){for(var lp=sp.filterDepth,up=sp.filterHeight,cp=sp.filterWidth,dp=sp.dilationDepth,fp=sp.dilationHeight,pp=sp.dilationWidth,hp=sp.padInfo.front,mp=sp.padInfo.left,gp=sp.padInfo.top,vp=ur(sp.outShape,np.dtype),xp=this.readSync(np.dataId),Sp=this.readSync(ap.dataId),yp=vp.values,bp=0;bp<sp.batchSize;++bp)for(var Ep=bp*np.strides[0],wp=bp*vp.strides[0],_p=0;_p<sp.outDepth;++_p)for(var Rp=wp+_p*vp.strides[1],$p=_p*sp.strideDepth-hp,Cp=0;Cp<lp;Cp++){var Ap=$p+Cp*dp;if(!(Ap<0||Ap>=sp.inDepth))for(var Op=Cp*ap.strides[0],Lp=Ep+Ap*np.strides[1],Mp=0;Mp<sp.outHeight;++Mp)for(var kp=Rp+Mp*vp.strides[2],Dp=Mp*sp.strideHeight-gp,Fp=0;Fp<up;Fp++){var Ip=Dp+Fp*fp;if(!(Ip<0||Ip>=sp.inHeight))for(var Pp=Op+Fp*ap.strides[1],Tp=Lp+Ip*np.strides[2],Np=0;Np<sp.outWidth;++Np)for(var jp=kp+Np*sp.outChannels,Vp=Np*sp.strideWidth-mp,zp=0;zp<cp;zp++){var Wp=Vp+zp*pp;if(!(Wp<0||Wp>=sp.inWidth))for(var Up=Pp+zp*ap.strides[2],qp=Tp+Wp*sp.inChannels,Bp=Up,Yp=0;Yp<sp.inChannels;++Yp){for(var Xp=xp[qp+Yp],Qp=0;Qp<sp.outChannels;++Qp)yp[jp+Qp]+=Xp*Sp[Bp+Qp];Bp+=sp.outChannels}}}}return vp.toTensor()},rp.prototype.conv2dDerInput=function(np,ap,sp){Ih([np,ap],"conv2dDerInput");for(var lp=ur(sp.inShape,"float32"),up=lp.values,cp=this.readSync(np.dataId),dp=this.readSync(ap.dataId),fp=ap.strides,pp=fp[0],hp=fp[1],mp=fp[2],gp=sp.batchSize,vp=sp.filterHeight,xp=sp.filterWidth,Sp=sp.inChannels,yp=sp.inHeight,bp=sp.inWidth,Ep=sp.outChannels,wp=sp.outHeight,_p=sp.outWidth,Rp=sp.strideHeight,$p=sp.strideWidth,Cp=sp.dataFormat,Ap=vp-1-sp.padInfo.top,Op=xp-1-sp.padInfo.left,Lp=Cp==="channelsLast",Mp=lp.strides[0],kp=Lp?lp.strides[1]:lp.strides[2],Dp=Lp?lp.strides[2]:1,Fp=Lp?1:lp.strides[1],Ip=np.strides[0],Pp=Lp?np.strides[1]:np.strides[2],Tp=Lp?np.strides[2]:1,Np=Lp?1:np.strides[1],jp=0;jp<gp;++jp)for(var Vp=0;Vp<Sp;++Vp)for(var zp=0;zp<yp;++zp)for(var Wp=zp-Ap,Up=Math.max(0,Math.ceil(Wp/Rp)),qp=Math.min(wp,(vp+Wp)/Rp),Bp=0;Bp<bp;++Bp){for(var Yp=Bp-Op,Xp=Math.max(0,Math.ceil(Yp/$p)),Qp=Math.min(_p,(xp+Yp)/$p),am=0,Jp=Up;Jp<qp;++Jp)for(var im=Jp*Rp-Wp,Zp=Xp;Zp<Qp;++Zp)for(var Gp=Ip*jp+Pp*Jp+Tp*Zp,tm=pp*(vp-1-im)+hp*(xp-1-(Zp*$p-Yp))+mp*Vp,om=0;om<Ep;++om)am+=cp[Gp+Np*om]*dp[tm+om];up[Mp*jp+kp*zp+Dp*Bp+Fp*Vp]=am}return lp.toTensor()},rp.prototype.conv3dDerInput=function(np,ap,sp){for(var lp=ur(sp.inShape,"float32"),up=lp.values,cp=lp.strides,dp=cp[0],fp=cp[1],pp=cp[2],hp=cp[3],mp=this.readSync(np.dataId),gp=np.strides,vp=gp[0],xp=gp[1],Sp=gp[2],yp=gp[3],bp=this.readSync(ap.dataId),Ep=ap.strides,wp=Ep[0],_p=Ep[1],Rp=Ep[2],$p=Ep[3],Cp=sp.batchSize,Ap=sp.filterDepth,Op=sp.filterHeight,Lp=sp.filterWidth,Mp=sp.inChannels,kp=sp.inDepth,Dp=sp.inHeight,Fp=sp.inWidth,Ip=sp.outChannels,Pp=sp.outDepth,Tp=sp.outHeight,Np=sp.outWidth,jp=sp.strideDepth,Vp=sp.strideHeight,zp=sp.strideWidth,Wp=Ap-1-sp.padInfo.front,Up=Op-1-sp.padInfo.top,qp=Lp-1-sp.padInfo.left,Bp=0;Bp<Cp;++Bp)for(var Yp=0;Yp<Mp;++Yp)for(var Xp=0;Xp<kp;++Xp)for(var Qp=Xp-Wp,am=Math.max(0,Math.ceil(Qp/jp)),Jp=Math.min(Pp,(Ap+Qp)/jp),im=0;im<Dp;++im)for(var Zp=im-Up,Gp=Math.max(0,Math.ceil(Zp/Vp)),tm=Math.min(Tp,(Op+Zp)/Vp),om=0;om<Fp;++om){for(var em=om-qp,_m=Math.max(0,Math.ceil(em/zp)),Cm=Math.min(Np,(Lp+em)/zp),Rm=0,xm=am;xm<Jp;++xm)for(var $m=xm*jp-Qp,fm=Gp;fm<tm;++fm)for(var Sm=fm*Vp-Zp,pm=_m;pm<Cm;++pm)for(var hm=vp*Bp+xp*xm+Sp*fm+yp*pm,lm=wp*(Ap-1-$m)+_p*(Op-1-Sm)+Rp*(Lp-1-(pm*zp-em))+$p*Yp,sm=0;sm<Ip;++sm)Rm+=mp[hm+sm]*bp[lm+sm];up[dp*Bp+fp*Xp+pp*im+hp*om+Yp]=Rm}return lp.toTensor()},rp.prototype.conv2dDerFilter=function(np,ap,sp){Ih([np,ap],"conv2dDerFilter");for(var lp=sp.strideHeight,up=sp.strideWidth,cp=sp.filterHeight,dp=sp.filterWidth,fp=sp.dataFormat==="channelsLast",pp=ur(sp.filterShape,"float32"),hp=sp.padInfo.left,mp=sp.padInfo.top,gp=this.bufferSync(np),vp=this.bufferSync(ap),xp=0;xp<cp;++xp)for(var Sp=Math.max(0,Math.ceil((mp-xp)/lp)),yp=Math.min(sp.outHeight,(sp.inHeight+mp-xp)/lp),bp=0;bp<dp;++bp)for(var Ep=Math.max(0,Math.ceil((hp-bp)/up)),wp=Math.min(sp.outWidth,(sp.inWidth+hp-bp)/up),_p=0;_p<sp.inChannels;++_p)for(var Rp=0;Rp<sp.outChannels;++Rp){for(var $p=0,Cp=0;Cp<sp.batchSize;++Cp)for(var Ap=Sp;Ap<yp;++Ap)for(var Op=xp+Ap*lp-mp,Lp=Ep;Lp<wp;++Lp){var Mp=bp+Lp*up-hp;$p+=fp?gp.get(Cp,Op,Mp,_p)*vp.get(Cp,Ap,Lp,Rp):gp.get(Cp,_p,Op,Mp)*vp.get(Cp,Rp,Ap,Lp)}pp.set($p,xp,bp,_p,Rp)}return pp.toTensor()},rp.prototype.conv3dDerFilter=function(np,ap,sp){for(var lp=sp.strideDepth,up=sp.strideHeight,cp=sp.strideWidth,dp=sp.filterDepth,fp=sp.filterHeight,pp=sp.filterWidth,hp=ur(sp.filterShape,"float32"),mp=hp.values,gp=hp.strides,vp=gp[0],xp=gp[1],Sp=gp[2],yp=gp[3],bp=this.readSync(ap.dataId),Ep=ap.strides,wp=Ep[0],_p=Ep[1],Rp=Ep[2],$p=Ep[3],Cp=this.readSync(np.dataId),Ap=np.strides,Op=Ap[0],Lp=Ap[1],Mp=Ap[2],kp=Ap[3],Dp=sp.padInfo.front,Fp=sp.padInfo.left,Ip=sp.padInfo.top,Pp=0;Pp<dp;++Pp)for(var Tp=Math.max(0,Math.ceil((Dp-Pp)/lp)),Np=Math.min(sp.outDepth,(sp.inDepth+Dp-Pp)/lp),jp=Pp*vp,Vp=0;Vp<fp;++Vp)for(var zp=Math.max(0,Math.ceil((Ip-Vp)/up)),Wp=Math.min(sp.outHeight,(sp.inHeight+Ip-Vp)/up),Up=Vp*xp+jp,qp=0;qp<pp;++qp)for(var Bp=Math.max(0,Math.ceil((Fp-qp)/cp)),Yp=Math.min(sp.outWidth,(sp.inWidth+Fp-qp)/cp),Xp=qp*Sp+Up,Qp=0;Qp<sp.inChannels;++Qp)for(var am=Qp*yp+Xp,Jp=0;Jp<sp.outChannels;++Jp){for(var im=0,Zp=0;Zp<sp.batchSize;++Zp)for(var Gp=Zp*Op,tm=Zp*wp,om=Tp;om<Np;++om)for(var em=(Pp+om*lp-Dp)*Lp+Gp,_m=om*_p+tm,Cm=zp;Cm<Wp;++Cm)for(var Rm=(Vp+Cm*up-Ip)*Mp+em,xm=Cm*Rp+_m,$m=Bp;$m<Yp;++$m){var fm=$m*$p+xm;im+=Cp[(qp+$m*cp-Fp)*kp+Rm+Qp]*bp[fm+Jp]}mp[am+Jp]=im}return hp.toTensor()},rp.prototype.fusedDepthwiseConv2D=function(np){var ap=np.input,sp=np.filter,lp=np.convInfo,up=np.bias,cp=np.activation,dp=np.preluActivationWeights,fp=this.depthwiseConv2D(ap,sp,lp);return up&&(fp=this.add(fp,up)),cp&&(fp=kh(this,fp,cp,dp)),fp},rp.prototype.depthwiseConv2D=function(np,ap,sp){Ih([np,ap],"depthwiseConv2D");for(var lp=sp.filterHeight,up=sp.filterWidth,cp=sp.dilationHeight,dp=sp.dilationWidth,fp=sp.padInfo.left,pp=sp.padInfo.top,hp=sp.outChannels/sp.inChannels,mp=ur(sp.outShape,np.dtype),gp=this.readSync(np.dataId),vp=this.readSync(ap.dataId),xp=mp.values,Sp=0;Sp<sp.batchSize;++Sp)for(var yp=Sp*np.strides[0],bp=Sp*mp.strides[0],Ep=0;Ep<sp.outHeight;++Ep)for(var wp=bp+Ep*mp.strides[1],_p=Ep*sp.strideHeight-fp,Rp=0;Rp<lp;++Rp){var $p=_p+Rp*cp;if(!($p<0||$p>=sp.inHeight))for(var Cp=Rp*ap.strides[0],Ap=yp+$p*np.strides[1],Op=0;Op<sp.outWidth;++Op)for(var Lp=wp+Op*mp.strides[2],Mp=Op*sp.strideWidth-pp,kp=0;kp<up;++kp){var Dp=Mp+kp*dp;if(!(Dp<0||Dp>=sp.inWidth))for(var Fp=Cp+kp*ap.strides[1],Ip=Ap+Dp*sp.inChannels,Pp=Lp,Tp=Fp,Np=0;Np<sp.inChannels;++Np){for(var jp=gp[Ip+Np],Vp=0;Vp<hp;++Vp)xp[Pp+Vp]+=jp*vp[Tp+Vp];Pp+=hp,Tp+=hp}}}return mp.toTensor()},rp.prototype.depthwiseConv2DDerInput=function(np,ap,sp){Ih([np,ap],"depthwiseConv2DDerInput");for(var lp=ur(sp.inShape,"float32"),up=lp.values,cp=lp.strides,dp=cp[0],fp=cp[1],pp=cp[2],hp=this.readSync(np.dataId),mp=np.strides,gp=mp[0],vp=mp[1],xp=mp[2],Sp=this.readSync(ap.dataId),yp=ap.strides,bp=yp[0],Ep=yp[1],wp=yp[2],_p=sp.batchSize,Rp=sp.filterHeight,$p=sp.filterWidth,Cp=sp.inChannels,Ap=sp.inHeight,Op=sp.inWidth,Lp=sp.outChannels,Mp=sp.outHeight,kp=sp.outWidth,Dp=sp.strideHeight,Fp=sp.strideWidth,Ip=Rp-1-sp.padInfo.top,Pp=$p-1-sp.padInfo.left,Tp=Lp/Cp,Np=0;Np<_p;++Np)for(var jp=0;jp<Cp;++jp)for(var Vp=0;Vp<Ap;++Vp)for(var zp=Vp-Ip,Wp=Math.max(0,Math.ceil(zp/Dp)),Up=Math.min(Mp,(Rp+zp)/Dp),qp=0;qp<Op;++qp){for(var Bp=qp-Pp,Yp=Math.max(0,Math.ceil(Bp/Fp)),Xp=Math.min(kp,($p+Bp)/Fp),Qp=0,am=Wp;am<Up;++am)for(var Jp=am*Dp-zp,im=Yp;im<Xp;++im)for(var Zp=gp*Np+vp*am+xp*im,Gp=bp*(Rp-1-Jp)+Ep*($p-1-(im*Fp-Bp))+wp*jp,tm=0;tm<Tp;++tm)Qp+=hp[Zp+(jp*Tp+tm)]*Sp[Gp+tm];up[dp*Np+fp*Vp+pp*qp+jp]=Qp}return lp.toTensor()},rp.prototype.depthwiseConv2DDerFilter=function(np,ap,sp){Ih([np,ap],"depthwiseConv2DDerFilter");for(var lp=sp.strideHeight,up=sp.strideWidth,cp=sp.filterHeight,dp=sp.filterWidth,fp=ur(sp.filterShape,"float32"),pp=sp.padInfo.left,hp=sp.padInfo.top,mp=sp.outChannels/sp.inChannels,gp=this.bufferSync(np),vp=this.bufferSync(ap),xp=0;xp<cp;++xp)for(var Sp=Math.max(0,Math.ceil((hp-xp)/lp)),yp=Math.min(sp.outHeight,(sp.inHeight+hp-xp)/lp),bp=0;bp<dp;++bp)for(var Ep=Math.max(0,Math.ceil((pp-bp)/up)),wp=Math.min(sp.outWidth,(sp.inWidth+pp-bp)/up),_p=0;_p<sp.outChannels;++_p){for(var Rp=Math.trunc(_p/mp),$p=_p%mp,Cp=0,Ap=0;Ap<sp.batchSize;++Ap)for(var Op=Sp;Op<yp;++Op)for(var Lp=xp+Op*lp-hp,Mp=Ep;Mp<wp;++Mp){var kp=bp+Mp*up-pp;Cp+=gp.get(Ap,Lp,kp,Rp)*vp.get(Ap,Op,Mp,_p)}fp.set(Cp,xp,bp,Rp,$p)}return fp.toTensor()},rp.prototype.tile=function(np,ap){return Ih(np,"tile"),Lo(this.bufferSync(np),ap)},rp.prototype.pad=function(np,ap,sp){Ih(np,"pad");var lp=ap.map(function(mp,gp){return mp[0]+np.shape[gp]+mp[1]}),up=ap.map(function(mp){return mp[0]}),cp=this.bufferSync(np),dp=ur(lp,np.dtype);sp!==0&&dp.values.fill(sp);for(var fp=0;fp<np.size;fp++){var pp=cp.indexToLoc(fp),hp=pp.map(function(mp,gp){return mp+up[gp]});dp.set.apply(dp,[cp.get.apply(cp,pp)].concat(hp))}return dp.toTensor()},rp.prototype.transpose=function(np,ap){Ih(np,"transpose");for(var sp=new Array(np.rank),lp=0;lp<sp.length;lp++)sp[lp]=np.shape[ap[lp]];var up=this.readSync(np.dataId),cp=ur(sp,np.dtype),dp=this.bufferSync(np);for(lp=0;lp<np.size;++lp){for(var fp=dp.indexToLoc(lp),pp=new Array(fp.length),hp=0;hp<pp.length;hp++)pp[hp]=fp[ap[hp]];var mp=cp.locToIndex(pp);cp.values[mp]=up[lp]}return cp.toTensor()},rp.prototype.gather=function(np,ap,sp){Ih([np,ap],"gather");var lp=np.shape.slice(),up=this.readSync(ap.dataId);lp[sp]=up.length;for(var cp=ur(lp,np.dtype),dp=this.bufferSync(np),fp=0;fp<cp.size;++fp){var pp=cp.indexToLoc(fp),hp=pp.slice();hp[sp]=up[pp[sp]];var mp=dp.locToIndex(hp);cp.values[fp]=dp.values[mp]}return cp.toTensor()},rp.prototype.batchToSpaceND=function(np,ap,sp){Ih([np],"batchToSpaceND");var lp=ap.reduce(function(hp,mp){return hp*mp}),up=Mr(np.shape,ap,lp),cp=Br(up.length,ap.length),dp=Pr(np.shape,ap,lp),fp=Lr(sp,ap.length),pp=Wr(dp,sp,ap.length);return np.reshape(up).transpose(cp).reshape(dp).slice(fp,pp)},rp.prototype.spaceToBatchND=function(np,ap,sp){Ih([np],"spaceToBatchND");var lp=ap.reduce(function(mp,gp){return mp*gp}),up=[[0,0]];up.push.apply(up,sp);for(var cp=1+ap.length;cp<np.shape.length;++cp)up.push([0,0]);var dp=np.pad(up),fp=Mr(dp.shape,ap,lp,!1),pp=Br(fp.length,ap.length,!1),hp=Pr(dp.shape,ap,lp,!1);return dp.reshape(fp).transpose(pp).reshape(hp)},rp.prototype.pool=function(np,ap,sp){Ih(np,"pool");for(var lp=ap.strideHeight,up=ap.strideWidth,cp=ap.dilationHeight,dp=ap.dilationWidth,fp=ap.effectiveFilterHeight,pp=ap.effectiveFilterWidth,hp=ap.padInfo.top,mp=ap.padInfo.left,gp=sp==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,vp=this.readSync(np.dataId),xp=ur(ap.outShape,np.dtype),Sp=xp.values,yp=ap.outShape[1]*ap.outShape[2]*ap.outShape[3],bp=ap.outShape[2]*ap.outShape[3],Ep=ap.outShape[3],wp=0;wp<ap.batchSize;++wp)for(var _p=wp*yp,Rp=wp*np.strides[0],$p=0;$p<ap.inChannels;++$p)for(var Cp=0;Cp<ap.outHeight;++Cp)for(var Ap=Cp*lp-hp,Op=Math.max(0,Ap),Lp=Math.min(ap.inHeight,fp+Ap),Mp=_p+Cp*bp,kp=0;kp<ap.outWidth;++kp){for(var Dp=kp*up-mp,Fp=Math.max(0,Dp),Ip=Math.min(ap.inWidth,pp+Dp),Pp=gp,Tp=0,Np=0,jp=Op;jp<Lp;jp+=cp){for(var Vp=Rp+jp*np.strides[1],zp=Fp;zp<Ip;zp+=dp){var Wp=vp[Vp+zp*np.strides[2]+$p];sp==="max"&&Wp>Pp?Pp=Wp:sp==="avg"&&(Tp+=Wp,Np++)}if(isNaN(Pp))break}Sp[Mp+kp*Ep+$p]=sp==="avg"?Tp/Np:Pp}return xp.toTensor()},rp.prototype.maxPool=function(np,ap){return this.pool(np,ap,"max")},rp.prototype.maxPoolPositions=function(np,ap){for(var sp=ur(ap.outShape,"int32"),lp=ap.strideHeight,up=ap.strideWidth,cp=ap.dilationHeight,dp=ap.dilationWidth,fp=ap.effectiveFilterHeight,pp=ap.effectiveFilterWidth,hp=ap.padInfo.top,mp=ap.padInfo.left,gp=this.bufferSync(np),vp=0;vp<ap.batchSize;++vp)for(var xp=0;xp<ap.inChannels;++xp)for(var Sp=0;Sp<ap.outHeight;++Sp){for(var yp=Sp*lp-hp,bp=yp;bp<0;)bp+=cp;for(var Ep=Math.min(ap.inHeight,fp+yp),wp=0;wp<ap.outWidth;++wp){for(var _p=wp*up-mp,Rp=_p;Rp<0;)Rp+=dp;for(var $p=Math.min(ap.inWidth,pp+_p),Cp=Number.NEGATIVE_INFINITY,Ap=-1,Op=bp;Op<Ep;Op+=cp)for(var Lp=Op-yp,Mp=Rp;Mp<$p;Mp+=dp){var kp=Mp-_p,Dp=gp.get(vp,Op,Mp,xp);Dp>Cp&&(Cp=Dp,Ap=Lp*pp+kp)}sp.set(Ap,vp,Sp,wp,xp)}}return sp.toTensor()},rp.prototype.maxPoolBackprop=function(np,ap,sp,lp){Ih([ap,sp],"maxPoolBackprop");for(var up=this.maxPoolPositions(ap,lp),cp=lp.strideHeight,dp=lp.strideWidth,fp=lp.dilationHeight,pp=lp.dilationWidth,hp=lp.effectiveFilterHeight,mp=lp.effectiveFilterWidth,gp=mp-1-lp.padInfo.left,vp=hp-1-lp.padInfo.top,xp=ur(ap.shape,"float32"),Sp=this.bufferSync(up),yp=this.bufferSync(np),bp=0;bp<lp.batchSize;++bp)for(var Ep=0;Ep<lp.inChannels;++Ep)for(var wp=0;wp<lp.inHeight;++wp)for(var _p=0;_p<lp.inWidth;++_p){for(var Rp=wp-vp,$p=_p-gp,Cp=0,Ap=0;Ap<hp;Ap+=fp){var Op=(Rp+Ap)/cp;if(!(Op<0||Op>=lp.outHeight||Math.floor(Op)!==Op))for(var Lp=0;Lp<mp;Lp+=pp){var Mp=($p+Lp)/dp;if(!(Mp<0||Mp>=lp.outWidth||Math.floor(Mp)!==Mp)){var kp=hp*mp-1-Sp.get(bp,Op,Mp,Ep)===Ap*mp+Lp?1:0;kp!==0&&(Cp+=yp.get(bp,Op,Mp,Ep)*kp)}}}xp.set(Cp,bp,wp,_p,Ep)}return xp.toTensor()},rp.prototype.avgPoolBackprop=function(np,ap,sp){Ih([np,ap],"avgPoolBackprop");for(var lp=sp.strideHeight,up=sp.strideWidth,cp=sp.filterHeight,dp=sp.filterWidth,fp=sp.dilationHeight,pp=sp.dilationWidth,hp=sp.effectiveFilterHeight,mp=sp.effectiveFilterWidth,gp=mp-1-sp.padInfo.left,vp=hp-1-sp.padInfo.top,xp=ur(ap.shape,"float32"),Sp=1/(cp*dp),yp=this.bufferSync(np),bp=0;bp<sp.batchSize;++bp)for(var Ep=0;Ep<sp.inChannels;++Ep)for(var wp=0;wp<sp.inHeight;++wp)for(var _p=0;_p<sp.inWidth;++_p){for(var Rp=wp-vp,$p=_p-gp,Cp=0,Ap=0;Ap<hp;Ap+=fp){var Op=(Rp+Ap)/lp;if(!(Op<0||Op>=sp.outHeight||Math.floor(Op)!==Op))for(var Lp=0;Lp<mp;Lp+=pp){var Mp=($p+Lp)/up;Mp<0||Mp>=sp.outWidth||Math.floor(Mp)!==Mp||(Cp+=yp.get(bp,Op,Mp,Ep))}}xp.set(Cp*Sp,bp,wp,_p,Ep)}return xp.toTensor()},rp.prototype.pool3d=function(np,ap,sp){Ih(np,"pool3d");for(var lp=ap.strideDepth,up=ap.strideHeight,cp=ap.strideWidth,dp=ap.dilationDepth,fp=ap.dilationHeight,pp=ap.dilationWidth,hp=ap.effectiveFilterDepth,mp=ap.effectiveFilterHeight,gp=ap.effectiveFilterWidth,vp=ap.padInfo.front,xp=ap.padInfo.top,Sp=ap.padInfo.left,yp=sp==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,bp=this.readSync(np.dataId),Ep=ur(ap.outShape,np.dtype),wp=Ep.values,_p=ap.outShape[1]*ap.outShape[2]*ap.outShape[3]*ap.outShape[4],Rp=ap.outShape[2]*ap.outShape[3]*ap.outShape[4],$p=ap.outShape[3]*ap.outShape[4],Cp=ap.outShape[4],Ap=0;Ap<ap.batchSize;++Ap)for(var Op=Ap*_p,Lp=Ap*np.strides[0],Mp=0;Mp<ap.inChannels;++Mp)for(var kp=0;kp<ap.outDepth;++kp){for(var Dp=kp*lp-vp,Fp=Dp;Fp<0;)Fp+=dp;for(var Ip=Math.min(ap.inDepth,hp+Dp),Pp=Op+kp*Rp,Tp=0;Tp<ap.outHeight;++Tp){for(var Np=Tp*up-xp,jp=Np;jp<0;)jp+=fp;for(var Vp=Math.min(ap.inHeight,mp+Np),zp=Pp+Tp*$p,Wp=0;Wp<ap.outWidth;++Wp){for(var Up=Wp*cp-Sp,qp=Up;qp<0;)qp+=pp;for(var Bp=Math.min(ap.inWidth,gp+Up),Yp=zp+Wp*Cp,Xp=yp,Qp=0,am=0,Jp=Fp;Jp<Ip;Jp+=dp){for(var im=Lp+Jp*np.strides[1],Zp=jp;Zp<Vp;Zp+=fp){for(var Gp=im+Zp*np.strides[2],tm=qp;tm<Bp;tm+=pp){var om=bp[Gp+tm*np.strides[3]+Mp];if(sp==="max"&&om>Xp?Xp=om:sp==="avg"&&(Qp+=om,am++),isNaN(Xp))break}if(isNaN(Xp))break}if(isNaN(Xp))break}wp[Yp+Mp]=sp==="avg"?Qp/am:Xp}}}return Ep.toTensor()},rp.prototype.avgPool3d=function(np,ap){return Ih(np,"avgPool3d"),this.pool3d(np,ap,"avg").toFloat()},rp.prototype.avgPool3dBackprop=function(np,ap,sp){Ih([np,ap],"avgPool3dBackprop");for(var lp=sp.strideDepth,up=sp.strideHeight,cp=sp.strideWidth,dp=sp.filterDepth,fp=sp.filterHeight,pp=sp.filterWidth,hp=sp.dilationDepth,mp=sp.dilationHeight,gp=sp.dilationWidth,vp=sp.effectiveFilterDepth,xp=sp.effectiveFilterHeight,Sp=sp.effectiveFilterWidth,yp=vp-1-sp.padInfo.front,bp=Sp-1-sp.padInfo.left,Ep=xp-1-sp.padInfo.top,wp=ur(ap.shape,"float32"),_p=1/(dp*fp*pp),Rp=this.bufferSync(np),$p=0;$p<sp.batchSize;++$p)for(var Cp=0;Cp<sp.inChannels;++Cp)for(var Ap=0;Ap<sp.inDepth;++Ap)for(var Op=0;Op<sp.inHeight;++Op)for(var Lp=0;Lp<sp.inWidth;++Lp){for(var Mp=Ap-yp,kp=Op-Ep,Dp=Lp-bp,Fp=0,Ip=0;Ip<vp;Ip+=hp){var Pp=(Mp+Ip)/lp;if(!(Pp<0||Pp>=sp.outDepth||Math.floor(Pp)!==Pp))for(var Tp=0;Tp<xp;Tp+=mp){var Np=(kp+Tp)/up;if(!(Np<0||Np>=sp.outHeight||Math.floor(Np)!==Np))for(var jp=0;jp<Sp;jp+=gp){var Vp=(Dp+jp)/cp;Vp<0||Vp>=sp.outWidth||Math.floor(Vp)!==Vp||(Fp+=Rp.get($p,Pp,Np,Vp,Cp))}}}wp.set(Fp*_p,$p,Ap,Op,Lp,Cp)}return wp.toTensor()},rp.prototype.maxPool3d=function(np,ap){return Ih(np,"maxPool3d"),this.pool3d(np,ap,"max").toFloat()},rp.prototype.maxPool3dPositions=function(np,ap){for(var sp=ur(ap.outShape,"int32"),lp=ap.strideDepth,up=ap.strideHeight,cp=ap.strideWidth,dp=ap.dilationDepth,fp=ap.dilationHeight,pp=ap.dilationWidth,hp=ap.effectiveFilterDepth,mp=ap.effectiveFilterHeight,gp=ap.effectiveFilterWidth,vp=ap.padInfo.front,xp=ap.padInfo.top,Sp=ap.padInfo.left,yp=this.bufferSync(np),bp=0;bp<ap.batchSize;++bp)for(var Ep=0;Ep<ap.inChannels;++Ep)for(var wp=0;wp<ap.outDepth;++wp){for(var _p=wp*lp-vp,Rp=_p;Rp<0;)Rp+=dp;for(var $p=Math.min(ap.inDepth,hp+_p),Cp=0;Cp<ap.outHeight;++Cp){for(var Ap=Cp*up-xp,Op=Ap;Op<0;)Op+=fp;for(var Lp=Math.min(ap.inHeight,mp+Ap),Mp=0;Mp<ap.outWidth;++Mp){for(var kp=Mp*cp-Sp,Dp=kp;Dp<0;)Dp+=pp;for(var Fp=Math.min(ap.inWidth,gp+kp),Ip=Number.NEGATIVE_INFINITY,Pp=-1,Tp=Rp;Tp<$p;Tp+=dp)for(var Np=Tp-_p,jp=Op;jp<Lp;jp+=fp)for(var Vp=jp-Ap,zp=Dp;zp<Fp;zp+=pp){var Wp=zp-kp,Up=yp.get(bp,Tp,jp,zp,Ep);Up>=Ip&&(Ip=Up,Pp=Np*mp*gp+Vp*mp+Wp)}sp.set(Pp,bp,wp,Cp,Mp,Ep)}}}return sp.toTensor()},rp.prototype.maxPool3dBackprop=function(np,ap,sp,lp){Ih([ap,sp],"maxPool3dBackprop");for(var up=this.maxPool3dPositions(ap,lp),cp=lp.strideDepth,dp=lp.strideHeight,fp=lp.strideWidth,pp=lp.dilationDepth,hp=lp.dilationHeight,mp=lp.dilationWidth,gp=lp.effectiveFilterDepth,vp=lp.effectiveFilterHeight,xp=lp.effectiveFilterWidth,Sp=gp-1-lp.padInfo.front,yp=xp-1-lp.padInfo.left,bp=vp-1-lp.padInfo.top,Ep=ur(ap.shape,"float32"),wp=this.bufferSync(up),_p=this.bufferSync(np),Rp=0;Rp<lp.batchSize;++Rp)for(var $p=0;$p<lp.inChannels;++$p)for(var Cp=0;Cp<lp.inDepth;++Cp)for(var Ap=0;Ap<lp.inHeight;++Ap)for(var Op=0;Op<lp.inWidth;++Op){for(var Lp=Cp-Sp,Mp=Ap-bp,kp=Op-yp,Dp=0,Fp=0;Fp<gp;Fp+=pp){var Ip=(Lp+Fp)/cp;if(!(Ip<0||Ip>=lp.outDepth||Math.floor(Ip)!==Ip))for(var Pp=0;Pp<vp;Pp+=hp){var Tp=(Mp+Pp)/dp;if(!(Tp<0||Tp>=lp.outHeight||Math.floor(Tp)!==Tp))for(var Np=0;Np<xp;Np+=mp){var jp=(kp+Np)/fp;if(!(jp<0||jp>=lp.outWidth||Math.floor(jp)!==jp)){var Vp=gp*vp*xp-1-wp.get(Rp,Ip,Tp,jp,$p)===Fp*vp*xp+Pp*xp+Np?1:0;Vp!==0&&(Dp+=_p.get(Rp,Ip,Tp,jp,$p)*Vp)}}}}Ep.set(Dp,Rp,Cp,Ap,Op,$p)}return Ep.toTensor()},rp.prototype.cast=function(np,ap){return So(np,ap,this)},rp.prototype.reshape=function(np,ap){return Ao(np,ap)},rp.prototype.avgPool=function(np,ap){return Ih(np,"avgPool"),this.pool(np,ap,"avg").toFloat()},rp.prototype.resizeBilinear=function(np,ap,sp,lp){Ih(np,"resizeBilinear");for(var up=np.shape,cp=up[0],dp=up[1],fp=up[2],pp=up[3],hp=this.readSync(np.dataId),mp=new Float32Array(w$1([cp,ap,sp,pp])),gp=[lp&&ap>1?dp-1:dp,lp&&sp>1?fp-1:fp],vp=[lp&&ap>1?ap-1:ap,lp&&sp>1?sp-1:sp],xp=0,Sp=gp[0]/vp[0],yp=gp[1]/vp[1],bp=0;bp<cp;bp++)for(var Ep=0;Ep<ap;Ep++)for(var wp=Sp*Ep,_p=Math.floor(wp),Rp=wp-_p,$p=Math.min(dp-1,Math.ceil(wp)),Cp=bp*np.strides[0]+_p*np.strides[1],Ap=bp*np.strides[0]+$p*np.strides[1],Op=0;Op<sp;Op++)for(var Lp=yp*Op,Mp=Math.floor(Lp),kp=Lp-Mp,Dp=Math.min(fp-1,Math.ceil(Lp)),Fp=Cp+Mp*np.strides[2],Ip=Ap+Mp*np.strides[2],Pp=Cp+ +Dp*np.strides[2],Tp=Ap+Dp*np.strides[2],Np=0;Np<pp;Np++){var jp=hp[Fp+Np],Vp=hp[Ip+Np],zp=jp+(hp[Pp+Np]-jp)*kp,Wp=zp+(Vp+(hp[Tp+Np]-Vp)*kp-zp)*Rp;mp[xp++]=Wp}return kn(mp,[cp,ap,sp,pp])},rp.prototype.resizeBilinearBackprop=function(np,ap,sp){Ih([np,ap],"resizeBilinearBackprop");for(var lp=ap.shape,up=lp[0],cp=lp[1],dp=lp[2],fp=lp[3],pp=np.shape,hp=pp[1],mp=pp[2],gp=new Float32Array(up*cp*dp*fp),vp=[sp&&hp>1?cp-1:cp,sp&&mp>1?dp-1:dp],xp=[sp&&hp>1?hp-1:hp,sp&&mp>1?mp-1:mp],Sp=vp[0]/xp[0],yp=vp[1]/xp[1],bp=this.readSync(np.dataId),Ep=0,wp=0;wp<up;wp++)for(var _p=wp*ap.strides[0],Rp=0;Rp<hp;Rp++)for(var $p=Rp*Sp,Cp=Math.floor($p),Ap=Math.min(Math.ceil($p),cp-1),Op=_p+Cp*ap.strides[1],Lp=_p+Ap*ap.strides[1],Mp=$p-Cp,kp=1-Mp,Dp=0;Dp<mp;Dp++)for(var Fp=Dp*yp,Ip=Math.floor(Fp),Pp=Math.min(Math.ceil(Fp),dp-1),Tp=Fp-Ip,Np=1-Tp,jp=Op+Ip*ap.strides[2],Vp=Op+Pp*ap.strides[2],zp=Lp+Ip*ap.strides[2],Wp=Lp+Pp*ap.strides[2],Up=kp*Np,qp=kp*Tp,Bp=Mp*Np,Yp=Mp*Tp,Xp=0;Xp<fp;Xp++){var Qp=bp[Ep++];gp[jp+Xp]+=Qp*Up,gp[Vp+Xp]+=Qp*qp,gp[zp+Xp]+=Qp*Bp,gp[Wp+Xp]+=Qp*Yp}return Fn(gp,[up,dp,cp,fp],ap.dtype)},rp.prototype.resizeNearestNeighbor=function(np,ap,sp,lp){Ih(np,"resizeNearestNeighbor");for(var up=np.shape,cp=up[0],dp=up[1],fp=up[2],pp=up[3],hp=this.readSync(np.dataId),mp=new Float32Array(cp*ap*sp*pp),gp=[lp&&ap>1?dp-1:dp,lp&&sp>1?fp-1:fp],vp=[lp&&ap>1?ap-1:ap,lp&&sp>1?sp-1:sp],xp=gp[0]/vp[0],Sp=gp[1]/vp[1],yp=0,bp=0;bp<cp;bp++)for(var Ep=bp*np.strides[0],wp=0;wp<ap;wp++)for(var _p=xp*wp,Rp=Ep+Math.min(dp-1,lp?Math.round(_p):Math.floor(_p))*np.strides[1],$p=0;$p<sp;$p++)for(var Cp=Sp*$p,Ap=Rp+Math.min(fp-1,lp?Math.round(Cp):Math.floor(Cp))*np.strides[2],Op=0;Op<pp;Op++){var Lp=hp[Ap+Op];mp[yp++]=Lp}return kn(mp,[cp,ap,sp,pp],np.dtype)},rp.prototype.resizeNearestNeighborBackprop=function(np,ap,sp){Ih([np,ap],"resizeNearestNeighborBackprop");for(var lp=ap.shape,up=lp[0],cp=lp[1],dp=lp[2],fp=lp[3],pp=np.shape,hp=pp[1],mp=pp[2],gp=new Float32Array(up*cp*dp*fp),vp=this.readSync(np.dataId),xp=[sp&&hp>1?cp-1:cp,sp&&mp>1?dp-1:dp],Sp=[sp&&hp>1?hp-1:hp,sp&&mp>1?mp-1:mp],yp=xp[0]/Sp[0],bp=xp[1]/Sp[1],Ep=1/yp,wp=1/bp,_p=2*Math.ceil(Ep)+2,Rp=2*Math.ceil(wp)+2,$p=0;$p<up;$p++)for(var Cp=$p*ap.strides[0],Ap=0;Ap<cp;Ap++)for(var Op=Cp+Ap*ap.strides[1],Lp=Math.floor(Ap*Ep),Mp=Math.floor(Lp-_p/2),kp=0;kp<dp;kp++)for(var Dp=Op+kp*ap.strides[2],Fp=Math.floor(kp*wp),Ip=Math.floor(Fp-Rp/2),Pp=0;Pp<fp;Pp++){for(var Tp=0,Np=0;Np<_p;Np++){var jp=Np+Mp;if(!(jp<0||jp>=hp)){var Vp=Cp+jp*np.strides[1],zp=jp*yp;if(Ap===Math.min(cp-1,sp?Math.round(zp):Math.floor(zp)))for(var Wp=0;Wp<Rp;Wp++){var Up=Wp+Ip;if(!(Up<0||Up>=mp)){var qp=Vp+Up*np.strides[2],Bp=Up*bp;kp===Math.min(dp-1,sp?Math.round(Bp):Math.floor(Bp))&&(Tp+=vp[qp+Pp])}}}}gp[Dp+Pp]=Tp}return Fn(gp,ap.shape,ap.dtype)},rp.prototype.batchNormalization=function(np,ap,sp,lp,up,cp){Ih([np,ap,sp,up,cp],"batchNorm");for(var dp=this.readSync(np.dataId),fp=this.readSync(ap.dataId),pp=this.readSync(sp.dataId),hp=up?this.readSync(up.dataId):new Float32Array([1]),mp=cp?this.readSync(cp.dataId):new Float32Array([0]),gp=new Float32Array(dp.length),vp=mp.length,xp=hp.length,Sp=pp.length,yp=fp.length,bp=0,Ep=0,wp=0,_p=0,Rp=0;Rp<dp.length;++Rp)gp[Rp]=mp[bp++]+(dp[Rp]-fp[Ep++])*hp[wp++]/Math.sqrt(pp[_p++]+lp),bp>=vp&&(bp=0),Ep>=yp&&(Ep=0),wp>=xp&&(wp=0),_p>=Sp&&(_p=0);return Fn(gp,np.shape)},rp.prototype.localResponseNormalization4D=function(np,ap,sp,lp,up){Ih(np,"localResponseNormalization4D");var cp=np.shape[3],dp=cp-1,fp=this.readSync(np.dataId),pp=np.size,hp=new Float32Array(pp);function mp(Sp){for(var yp=Sp%cp,bp=Sp-yp+Math.max(0,yp-ap),Ep=Sp-yp+Math.min(yp+ap,dp),wp=0;bp<=Ep;bp++){var _p=fp[bp];wp+=_p*_p}return wp}for(var gp=0;gp<pp;gp++){var vp=mp(gp),xp=fp[gp]*Math.pow(sp+lp*vp,-up);hp[gp]=xp}return Fn(hp,np.shape)},rp.prototype.LRNGrad=function(np,ap,sp,lp,up,cp,dp){Ih(np,"LRNGrad");for(var fp=np.shape[3],pp=this.readSync(np.dataId),hp=this.readSync(ap.dataId),mp=this.readSync(sp.dataId),gp=new Float32Array(np.size),vp=np.size,xp=0;xp<vp;xp++){for(var Sp=xp%fp,yp=xp-Sp+Math.max(0,Sp-lp),bp=xp-Sp+Math.min(fp,Sp+lp+1),Ep=0,wp=yp;wp<bp;wp++)Ep+=Math.pow(hp[wp],2);for(Ep=cp*Ep+up,wp=yp;wp<bp;wp++){var _p=-2*cp*dp*hp[wp]*mp[xp]/Ep;xp===wp&&(_p+=Math.pow(Ep,-dp)),_p*=pp[xp],gp[wp]+=_p}}return Fn(gp,np.shape)},rp.prototype.multinomial=function(np,ap,sp,lp){Ih(np,"multinomial");for(var up=ap?np:io(np),cp=up.shape[0],dp=up.shape[1],fp=Pn([cp,sp],"int32"),pp=this.readSync(fp.dataId),hp=this.readSync(up.dataId),mp=0;mp<cp;++mp){var gp=mp*dp,vp=new Float32Array(dp-1);vp[0]=hp[gp];for(var xp=1;xp<vp.length;++xp)vp[xp]=vp[xp-1]+hp[gp+xp];for(var Sp=rr(lp.toString()),yp=mp*sp,bp=0;bp<sp;++bp){var Ep=Sp();pp[yp+bp]=vp.length;for(var wp=0;wp<vp.length;wp++)if(Ep<vp[wp]){pp[yp+bp]=wp;break}}}return fp},rp.prototype.oneHot=function(np,ap,sp,lp){Ih(np,"oneHot");var up=new Float32Array(np.size*ap);up.fill(lp);for(var cp=this.readSync(np.dataId),dp=0;dp<np.size;++dp)cp[dp]>=0&&cp[dp]<ap&&(up[dp*ap+cp[dp]]=sp);return Tn(up,[np.size,ap],"int32")},rp.prototype.nonMaxSuppression=function(np,ap,sp,lp,up){return Ih(np,"nonMaxSuppression"),Mo(this.readSync(np.dataId),this.readSync(ap.dataId),sp,lp,up)},rp.prototype.fft=function(np){return this.fftBatch(np,!1)},rp.prototype.ifft=function(np){return this.fftBatch(np,!0)},rp.prototype.fftBatch=function(np,ap){for(var sp=np.shape[0],lp=np.shape[1],up=ur(np.shape,"float32"),cp=ur(np.shape,"float32"),dp=Rn(np).as2D(sp,lp),fp=In(np).as2D(sp,lp),pp=0;pp<sp;pp++)for(var hp=dp.slice([pp,0],[1,lp]),mp=fp.slice([pp,0],[1,lp]),gp=En(hp,mp),vp=this.readSync(this.fftImpl(gp,ap).dataId),xp=0;xp<lp;xp++){var Sp=Fo(vp,xp);up.values[pp*lp+xp]=Sp.real,cp.values[pp*lp+xp]=Sp.imag}return En(up.toTensor(),cp.toTensor()).as2D(sp,lp)},rp.prototype.fftImpl=function(np,ap){var sp=np.as1D(),lp=sp.size;if(this.isExponentOf2(lp)){var up=this.fftRadix2(sp,lp,ap).as2D(np.shape[0],np.shape[1]);return ap&&(up=En(Rn(up).div(An(lp)),In(up).div(An(lp)))),up}var cp=this.readSync(np.dataId),dp=function(fp){for(var pp=new Float32Array(fp.length/2),hp=new Float32Array(fp.length/2),mp=0;mp<fp.length;mp+=2)pp[mp/2]=fp[mp],hp[mp/2]=fp[mp+1];return{real:pp,imag:hp}}(this.fourierTransformByMatmul(cp,lp,ap));return En(dp.real,dp.imag).as2D(np.shape[0],np.shape[1])},rp.prototype.isExponentOf2=function(np){return(np&np-1)==0},rp.prototype.fftRadix2=function(np,ap,sp){if(ap===1)return np;var lp=this.readSync(np.dataId),up=ap/2,cp=function(yp){for(var bp=Math.ceil(yp.length/4),Ep=new Float32Array(bp),wp=new Float32Array(bp),_p=0;_p<yp.length;_p+=4)Ep[Math.floor(_p/4)]=yp[_p],wp[Math.floor(_p/4)]=yp[_p+1];return{real:Ep,imag:wp}}(lp),dp=En(cp.real,cp.imag).as1D(),fp=function(yp){for(var bp=Math.floor(yp.length/4),Ep=new Float32Array(bp),wp=new Float32Array(bp),_p=2;_p<yp.length;_p+=4)Ep[Math.floor(_p/4)]=yp[_p],wp[Math.floor(_p/4)]=yp[_p+1];return{real:Ep,imag:wp}}(lp),pp=En(fp.real,fp.imag).as1D();dp=this.fftRadix2(dp,up,sp),pp=this.fftRadix2(pp,up,sp);var hp=function(yp,bp){for(var Ep=new Float32Array(yp/2),wp=new Float32Array(yp/2),_p=0;_p<Math.ceil(yp/2);_p++){var Rp=(bp?2:-2)*Math.PI*(_p/yp);Ep[_p]=Math.cos(Rp),wp[_p]=Math.sin(Rp)}return{real:Ep,imag:wp}}(ap,sp),mp=En(hp.real,hp.imag).mul(pp),gp=dp.add(mp),vp=dp.sub(mp),xp=Rn(gp).concat(Rn(vp)),Sp=In(gp).concat(In(vp));return En(xp,Sp).as1D()},rp.prototype.fourierTransformByMatmul=function(np,ap,sp){for(var lp=new Float32Array(2*ap),up=0;up<ap;up++){for(var cp=0,dp=0,fp=0;fp<ap;fp++){var pp=_o(up*fp,ap,sp),hp=Fo(np,fp);cp+=hp.real*pp.real-hp.imag*pp.imag,dp+=hp.real*pp.imag+hp.imag*pp.real}sp&&(cp/=ap,dp/=ap),Oo(lp,cp,dp,up)}return lp},rp.prototype.depthToSpace=function(np,ap,sp){g(sp==="NHWC",function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+sp}),g(ap>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+ap});for(var lp=np.shape[0],up=np.shape[1],cp=np.shape[2],dp=np.shape[3],fp=up*ap,pp=cp*ap,hp=dp/(ap*ap),mp=this.readSync(np.dataId),gp=new Float32Array(lp*fp*pp*hp),vp=0,xp=0;xp<lp;++xp)for(var Sp=0;Sp<fp;++Sp)for(var yp=Math.floor(Sp/ap),bp=Sp%ap,Ep=0;Ep<pp;++Ep)for(var wp=Math.floor(Ep/ap),_p=(bp*ap+Ep%ap)*hp,Rp=0;Rp<hp;++Rp){var $p=Rp+_p+dp*(wp+cp*(yp+up*xp));gp[vp++]=mp[$p]}return Fn(gp,[lp,fp,pp,hp])},rp.prototype.broadcastedBinaryOp=function(np,ap,sp,lp){var up=po(np.shape,ap.shape),cp=ur(up,sp),dp=this.readSync(np.dataId),fp=this.readSync(ap.dataId),pp=ho(np.shape,up),hp=ho(ap.shape,up),mp=cp.values;if(pp.length+hp.length===0)for(var gp=0;gp<mp.length;++gp)mp[gp]=lp(dp[gp%dp.length],fp[gp%fp.length]);else{var vp=this.bufferSync(np),xp=this.bufferSync(ap),Sp=function(yp){var bp=cp.indexToLoc(yp),Ep=bp.slice(-np.rank);pp.forEach(function($p){return Ep[$p]=0});var wp=vp.locToIndex(Ep),_p=bp.slice(-ap.rank);hp.forEach(function($p){return _p[$p]=0});var Rp=xp.locToIndex(_p);mp[yp]=lp(dp[wp],fp[Rp])};for(gp=0;gp<mp.length;++gp)Sp(gp)}return cp.toTensor()},rp.prototype.broadcastedBinaryComplexOp=function(np,ap,sp){var lp=po(np.shape,ap.shape),up=ur(lp,"float32"),cp=ur(lp,"float32"),dp=this.readSync(np.dataId),fp=this.readSync(ap.dataId),pp=ho(np.shape,lp),hp=ho(ap.shape,lp),mp=up.values,gp=cp.values;if(pp.length+hp.length===0)for(var vp=0;vp<mp.length;vp++){var xp=vp%dp.length,Sp=vp%fp.length,yp=sp(dp[2*xp],dp[2*xp+1],fp[2*Sp],fp[2*Sp+1]);mp[vp]=yp.real,gp[vp]=yp.imag}else{var bp=this.bufferSync(this.data.get(np.dataId).complexTensors.real),Ep=this.bufferSync(this.data.get(ap.dataId).complexTensors.real),wp=function(_p){var Rp=up.indexToLoc(_p),$p=Rp.slice(-np.rank);pp.forEach(function(Mp){return $p[Mp]=0});var Cp=bp.locToIndex($p),Ap=Rp.slice(-ap.rank);hp.forEach(function(Mp){return Ap[Mp]=0});var Op=Ep.locToIndex(Ap),Lp=sp(dp[2*Cp],dp[2*Cp+1],fp[2*Op],fp[2*Op+1]);mp[_p]=Lp.real,gp[_p]=Lp.imag};for(vp=0;vp<mp.length;vp++)wp(vp)}return this.complex(up.toTensor(),cp.toTensor())},rp.prototype.split=function(np,ap,sp){return Po(np,ap,sp)},rp.prototype.dispose=function(){},rp.prototype.floatPrecision=function(){return 32},rp.prototype.epsilon=function(){return 1e-7},rp.prototype.cropAndResize=function(np,ap,sp,lp,up,cp){for(var dp=np.shape,fp=dp[0],pp=dp[1],hp=dp[2],mp=dp[3],gp=ap.shape[0],vp=lp[0],xp=lp[1],Sp=ur([gp,vp,xp,mp],np.dtype),yp=this.readSync(ap.dataId),bp=this.readSync(sp.dataId),Ep=this.readSync(np.dataId),wp=np.strides,_p=Sp.strides,Rp=0;Rp<gp;Rp++){var $p=4*Rp,Cp=yp[$p],Ap=yp[$p+1],Op=yp[$p+2],Lp=yp[$p+3],Mp=bp[Rp];if(!(Mp>=fp))for(var kp=vp>1?(Op-Cp)*(pp-1)/(vp-1):0,Dp=xp>1?(Lp-Ap)*(hp-1)/(xp-1):0,Fp=0;Fp<vp;Fp++){var Ip=vp>1?Cp*(pp-1)+Fp*kp:.5*(Cp+Op)*(pp-1);if(Ip<0||Ip>pp-1)for(var Pp=0;Pp<xp;Pp++)for(var Tp=0;Tp<mp;Tp++){var Np=Tp+Pp*_p[2]+Fp*_p[1]+Rp*_p[0];Sp.values[Np]=cp}else if(up==="bilinear"){var jp=Math.floor(Ip),Vp=Math.ceil(Ip),zp=Ip-jp;for(Pp=0;Pp<xp;Pp++)if((Jp=xp>1?Ap*(hp-1)+Pp*Dp:.5*(Ap+Lp)*(hp-1))<0||Jp>hp-1)for(Tp=0;Tp<mp;Tp++)Np=Tp+Pp*_p[2]+Fp*_p[1]+Rp*_p[0],Sp.values[Np]=cp;else{var Wp=Math.floor(Jp),Up=Math.ceil(Jp),qp=Jp-Wp;for(Tp=0;Tp<mp;Tp++){var Bp=Ep[Np=Tp+Wp*wp[2]+jp*wp[1]+Mp*wp[0]],Yp=Ep[Np=Tp+Up*wp[2]+jp*wp[1]+Mp*wp[0]],Xp=Ep[Np=Tp+Wp*wp[2]+Vp*wp[1]+Mp*wp[0]],Qp=Bp+(Yp-Bp)*qp,am=Xp+(Ep[Np=Tp+Up*wp[2]+Vp*wp[1]+Mp*wp[0]]-Xp)*qp;Np=Tp+Pp*_p[2]+Fp*_p[1]+Rp*_p[0],Sp.values[Np]=Qp+(am-Qp)*zp}}}else for(Pp=0;Pp<xp;++Pp){var Jp;if((Jp=xp>1?Ap*(hp-1)+Pp*Dp:.5*(Ap+Lp)*(hp-1))<0||Jp>hp-1)for(Tp=0;Tp<mp;Tp++)Np=Tp+Pp*_p[2]+Fp*_p[1]+Rp*_p[0],Sp.values[Np]=cp;else{var im=Math.round(Jp),Zp=Math.round(Ip);for(Tp=0;Tp<mp;Tp++){var Gp=Tp+im*wp[2]+Zp*wp[1]+Mp*wp[0],tm=Tp+Pp*_p[2]+Fp*_p[1]+Rp*_p[0];Sp.values[tm]=Ep[Gp]}}}}}return Sp.toTensor()},rp.prototype.sparseToDense=function(np,ap,sp,lp){var up=Hr(0,np,sp),cp=up.sliceRank,dp=up.numUpdates,fp=up.sliceSize,pp=up.strides,hp=up.outputSize;return this.scatter(np,ap,sp,hp,fp,dp,cp,pp,lp,!1)},rp.prototype.gatherND=function(np,ap){var sp=ap.shape,lp=sp[sp.length-1],up=Ur(np,ap),cp=up[0],dp=up[1],fp=up[2],pp=up[3];if(dp===0)return kn([],cp,np.dtype);for(var hp=new lt([dp,fp],np.dtype),mp=this.readSync(ap.dataId),gp=this.readSync(np.dataId),vp=0;vp<dp;vp++){for(var xp=[],Sp=0,yp=0;yp<lp;yp++){var bp=mp[vp*lp+yp];Sp+=bp*pp[yp],xp.push(bp)}if(Sp<0||Sp>=np.size/fp)throw new Error("Invalid indices: "+xp+" does not index into "+np.shape);for(var Ep=0;Ep<fp;Ep++)hp.values[vp*fp+Ep]=gp[Sp*fp+Ep]}return hp.toTensor().reshape(cp)},rp.prototype.scatterND=function(np,ap,sp){var lp=Hr(0,np,sp),up=lp.sliceRank,cp=lp.numUpdates,dp=lp.sliceSize,fp=lp.strides,pp=lp.outputSize,hp=An(0);return this.scatter(np,ap,sp,pp,dp,cp,up,fp,hp,!0)},rp.prototype.fill=function(np,ap,sp){var lp=F(sp=sp||z(ap),w$1(np));return lp.fill(ap),Nt.makeTensor(lp,np,sp,this)},rp.prototype.onesLike=function(np){if(np.dtype==="string")throw new Error("onesLike is not supported for string tensors");return this.fill(np.shape,1,np.dtype)},rp.prototype.zerosLike=function(np){var ap=F(np.dtype,w$1(np.shape));return this.makeOutput(ap,np.shape,np.dtype)},rp.prototype.linspace=function(np,ap,sp){return Do(np,ap,sp)},rp.prototype.scatter=function(np,ap,sp,lp,up,cp,dp,fp,pp,hp){var mp=[lp/up,up],gp=this.readSync(np.dataId),vp=this.readSync(ap.dataId);if(lp===0)return kn([],sp,ap.dtype);var xp=new lt(mp,ap.dtype);xp.values.fill(this.readSync(pp.dataId)[0]);for(var Sp=0;Sp<cp;Sp++){for(var yp=[],bp=0,Ep=0;Ep<dp;Ep++){var wp=gp[Sp*dp+Ep];yp.push(wp),bp+=wp*fp[Ep]}if(bp<0||bp>=lp/up)throw new Error("Invalid indices: "+yp+" does not index into "+sp);for(var _p=0;_p<up;_p++)hp?xp.values[bp*up+_p]+=vp[Sp*up+_p]:xp.values[bp*up+_p]=ap.rank===0?vp[0]:vp[Sp*up+_p]}return xp.toTensor().reshape(sp)},rp}(co);Nt.registerBackend("cpu",function(){return new Sh},1),l$1({kernelName:"Square",backendName:"cpu",kernelFunc:function(_d){var rp=_d.inputs,np=_d.backend,ap=rp.x,sp=np;Ih(ap,"square");for(var lp=sp.data.get(ap.dataId).values,up=new Float32Array(lp.length),cp=0;cp<lp.length;++cp){var dp=lp[cp];up[cp]=dp*dp}return{dataId:sp.write(up,ap.shape,ap.dtype),shape:ap.shape,dtype:ap.dtype}}}),l$1({kernelName:"Square",backendName:"webgl",kernelFunc:function(_d){var rp=_d.inputs,np=_d.backend,ap=rp.x,sp=np,lp=new su(ap.shape,"return x * x;");return sp.runWebGLProgram(lp,[ap],ap.dtype)}});var Ah=function(){function _d(){}return _d.prototype.fetch=function(rp,np){return fetch(rp,np)},_d.prototype.now=function(){return performance.now()},_d.prototype.encode=function(rp,np){if(np!=="utf-8"&&np!=="utf8")throw new Error("Browser's encoder only supports utf-8, but got "+np);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(rp)},_d.prototype.decode=function(rp,np){return new TextDecoder(np).decode(rp)},_d}();a$1().get("IS_BROWSER")&&a$1().setPlatform("browser",new Ah);var Dh,Th=function(){return require("node-fetch")},Nh=function(){function _d(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}return _d.prototype.fetch=function(rp,np){return a$1().global.fetch!=null?a$1().global.fetch(rp,np):(Dh==null&&(Dh=Th()),Dh(rp,np))},_d.prototype.now=function(){var rp=process.hrtime();return 1e3*rp[0]+rp[1]/1e6},_d.prototype.encode=function(rp,np){if(np!=="utf-8"&&np!=="utf8")throw new Error("Node built-in encoder only supports utf-8, but got "+np);return this.textEncoder.encode(rp)},_d.prototype.decode=function(rp,np){return rp.length===0?"":new this.util.TextDecoder(np).decode(rp)},_d}();a$1().get("IS_NODE")&&a$1().setPlatform("node",new Nh);var Fh={float32:4,int32:4,uint16:2,uint8:1,bool:1},Oh=4;function _h(_d,rp){for(var np={},ap=0,sp=function(cp){var dp=cp.name,fp=cp.dtype,pp=cp.shape,hp=w$1(pp),mp=void 0;if("quantization"in cp){var gp=cp.quantization;if(gp.dtype!=="uint8"&&gp.dtype!=="uint16")throw new Error("Weight "+cp.name+" has unknown quantization dtype "+gp.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.");var vp=Fh[gp.dtype],xp=_d.slice(ap,ap+hp*vp),Sp=gp.dtype==="uint8"?new Uint8Array(xp):new Uint16Array(xp);if(fp==="float32")mp=Float32Array.from(Sp,function(Rp){return Rp*gp.scale+gp.min});else{if(fp!=="int32")throw new Error("Unsupported dtype in weight '"+dp+"': "+fp);mp=Int32Array.from(Sp,function(Rp){return Math.round(Rp*gp.scale+gp.min)})}ap+=hp*vp}else if(fp==="string"){var yp=w$1(cp.shape);mp=[];for(var bp=0;bp<yp;bp++){var Ep=new Uint32Array(_d.slice(ap,ap+Oh))[0];ap+=Oh;var wp=new Uint8Array(_d.slice(ap,ap+Ep));mp.push(wp),ap+=Ep}}else{var _p=Fh[fp];if(xp=_d.slice(ap,ap+hp*_p),fp==="float32")mp=new Float32Array(xp);else if(fp==="int32")mp=new Int32Array(xp);else{if(fp!=="bool")throw new Error("Unsupported dtype in weight '"+dp+"': "+fp);mp=new Uint8Array(xp)}ap+=hp*_p}np[dp]=kn(mp,pp,fp)},lp=0,up=rp;lp<up.length;lp++)sp(up[lp]);return np}function Mh(_d){if(_d===null)throw new Error("Invalid input value: "+JSON.stringify(_d));var rp=0,np=[];_d.forEach(function(lp){if(rp+=lp.byteLength,np.push(lp.byteLength===lp.buffer.byteLength?lp:new lp.constructor(lp)),!(lp instanceof Float32Array||lp instanceof Int32Array||lp instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+lp.constructor.name)});var ap=new Uint8Array(rp),sp=0;return np.forEach(function(lp){ap.set(new Uint8Array(lp.buffer),sp),sp+=lp.byteLength}),ap.buffer}var Bh=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function Ph(_d){return Bh?Buffer.byteLength(_d):new Blob([_d]).size}function Lh(_d){var rp=0;_d.forEach(function(sp){rp+=sp.byteLength});var np=new Uint8Array(rp),ap=0;return _d.forEach(function(sp){np.set(new Uint8Array(sp),ap),ap+=sp.byteLength}),np.buffer}function Wh(_d){for(_d=_d.trim();_d.endsWith("/");)_d=_d.slice(0,_d.length-1);var rp=_d.split("/");return rp[rp.length-1]}function Uh(_d){if(_d.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:_d.modelTopology==null?0:Ph(JSON.stringify(_d.modelTopology)),weightSpecsBytes:_d.weightSpecs==null?0:Ph(JSON.stringify(_d.weightSpecs)),weightDataBytes:_d.weightData==null?0:_d.weightData.byteLength}}var Vh=function(){function _d(){this.saveRouters=[],this.loadRouters=[]}return _d.getInstance=function(){return _d.instance==null&&(_d.instance=new _d),_d.instance},_d.registerSaveRouter=function(rp){_d.getInstance().saveRouters.push(rp)},_d.registerLoadRouter=function(rp){_d.getInstance().loadRouters.push(rp)},_d.getSaveHandlers=function(rp){return _d.getHandlers(rp,"save")},_d.getLoadHandlers=function(rp,np){return _d.getHandlers(rp,"load",np)},_d.getHandlers=function(rp,np,ap){var sp=[];return(np==="load"?_d.getInstance().loadRouters:_d.getInstance().saveRouters).forEach(function(lp){var up=lp(rp,ap);up!==null&&sp.push(up)}),sp},_d}(),zh="://",Gh=function(){function _d(){this.managers={}}return _d.getInstance=function(){return _d.instance==null&&(_d.instance=new _d),_d.instance},_d.registerManager=function(rp,np){g(rp!=null,function(){return"scheme must not be undefined or null."}),rp.endsWith(zh)&&(rp=rp.slice(0,rp.indexOf(zh))),g(rp.length>0,function(){return"scheme must not be an empty string."});var ap=_d.getInstance();g(ap.managers[rp]==null,function(){return"A model store manager is already registered for scheme '"+rp+"'."}),ap.managers[rp]=np},_d.getManager=function(rp){var np=this.getInstance().managers[rp];if(np==null)throw new Error("Cannot find model manager for scheme '"+rp+"'");return np},_d.getSchemes=function(){return Object.keys(this.getInstance().managers)},_d}();function Hh(_d){if(_d.indexOf(zh)===-1)throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+Gh.getSchemes().join(","));return{scheme:_d.split(zh)[0],path:_d.split(zh)[1]}}function qh(_d,rp,np){return np===void 0&&(np=!1),n$1(this,void 0,void 0,function(){var ap,sp,lp,up,cp,dp,fp,pp,hp;return r(this,function(mp){switch(mp.label){case 0:return g(_d!==rp,function(){return"Old path and new path are the same: '"+_d+"'"}),g((ap=Vh.getLoadHandlers(_d)).length>0,function(){return"Copying failed because no load handler is found for source URL "+_d+"."}),g(ap.length<2,function(){return"Copying failed because more than one ("+ap.length+") load handlers for source URL "+_d+"."}),sp=ap[0],g((lp=Vh.getSaveHandlers(rp)).length>0,function(){return"Copying failed because no save handler is found for destination URL "+rp+"."}),g(lp.length<2,function(){return"Copying failed because more than one ("+ap.length+") save handlers for destination URL "+rp+"."}),up=lp[0],cp=Hh(_d).scheme,dp=Hh(_d).path,fp=cp===Hh(_d).scheme,[4,sp.load()];case 1:return pp=mp.sent(),np&&fp?[4,Gh.getManager(cp).removeModel(dp)]:[3,3];case 2:mp.sent(),mp.label=3;case 3:return[4,up.save(pp)];case 4:return hp=mp.sent(),!np||fp?[3,6]:[4,Gh.getManager(cp).removeModel(dp)];case 5:mp.sent(),mp.label=6;case 6:return[2,hp.modelArtifactsInfo]}})})}var Kh="models_store",jh="model_info_store";function Xh(){if(!a$1().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var _d=window,rp=_d.indexedDB||_d.mozIndexedDB||_d.webkitIndexedDB||_d.msIndexedDB||_d.shimIndexedDB;if(rp==null)throw new Error("The current browser does not appear to support IndexedDB.");return rp}function $h(_d){var rp=_d.result;rp.createObjectStore(Kh,{keyPath:"modelPath"}),rp.createObjectStore(jh,{keyPath:"modelPath"})}var Yh=function(){function _d(rp){if(this.indexedDB=Xh(),rp==null||!rp)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=rp}return _d.prototype.save=function(rp){return n$1(this,void 0,void 0,function(){return r(this,function(np){if(rp.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,rp)]})})},_d.prototype.load=function(){return n$1(this,void 0,void 0,function(){return r(this,function(rp){return[2,this.databaseAction(this.modelPath)]})})},_d.prototype.databaseAction=function(rp,np){var ap=this;return new Promise(function(sp,lp){var up=ap.indexedDB.open("tensorflowjs",1);up.onupgradeneeded=function(){return $h(up)},up.onsuccess=function(){var cp=up.result;if(np==null){var dp=cp.transaction(Kh,"readonly"),fp=dp.objectStore(Kh).get(ap.modelPath);fp.onsuccess=function(){if(fp.result==null)return cp.close(),lp(new Error("Cannot find model with path '"+ap.modelPath+"' in IndexedDB."));sp(fp.result.modelArtifacts)},fp.onerror=function(xp){return cp.close(),lp(fp.error)},dp.oncomplete=function(){return cp.close()}}else{var pp,hp=Uh(np),mp=cp.transaction(jh,"readwrite"),gp=mp.objectStore(jh),vp=gp.put({modelPath:ap.modelPath,modelArtifactsInfo:hp});vp.onsuccess=function(){var xp=(pp=cp.transaction(Kh,"readwrite")).objectStore(Kh).put({modelPath:ap.modelPath,modelArtifacts:np,modelArtifactsInfo:hp});xp.onsuccess=function(){return sp({modelArtifactsInfo:hp})},xp.onerror=function(Sp){var yp=(gp=mp.objectStore(jh)).delete(ap.modelPath);yp.onsuccess=function(){return cp.close(),lp(xp.error)},yp.onerror=function(bp){return cp.close(),lp(xp.error)}}},vp.onerror=function(xp){return cp.close(),lp(vp.error)},mp.oncomplete=function(){pp==null?cp.close():pp.oncomplete=function(){return cp.close()}}}},up.onerror=function(cp){return lp(up.error)}})},_d.URL_SCHEME="indexeddb://",_d}(),Qh=function(_d){return a$1().getBool("IS_BROWSER")&&!Array.isArray(_d)&&_d.startsWith(Yh.URL_SCHEME)?(rp=_d.slice(Yh.URL_SCHEME.length),new Yh(rp)):null;var rp};Vh.registerSaveRouter(Qh),Vh.registerLoadRouter(Qh);var Jh=function(){function _d(){this.indexedDB=Xh()}return _d.prototype.listModels=function(){return n$1(this,void 0,void 0,function(){var rp=this;return r(this,function(np){return[2,new Promise(function(ap,sp){var lp=rp.indexedDB.open("tensorflowjs",1);lp.onupgradeneeded=function(){return $h(lp)},lp.onsuccess=function(){var up=lp.result,cp=up.transaction(jh,"readonly"),dp=cp.objectStore(jh).getAll();dp.onsuccess=function(){for(var fp={},pp=0,hp=dp.result;pp<hp.length;pp++){var mp=hp[pp];fp[mp.modelPath]=mp.modelArtifactsInfo}ap(fp)},dp.onerror=function(fp){return up.close(),sp(dp.error)},cp.oncomplete=function(){return up.close()}},lp.onerror=function(up){return sp(lp.error)}})]})})},_d.prototype.removeModel=function(rp){return n$1(this,void 0,void 0,function(){var np=this;return r(this,function(ap){var sp;return rp=(sp=rp).startsWith(Yh.URL_SCHEME)?sp.slice(Yh.URL_SCHEME.length):sp,[2,new Promise(function(lp,up){var cp=np.indexedDB.open("tensorflowjs",1);cp.onupgradeneeded=function(){return $h(cp)},cp.onsuccess=function(){var dp,fp=cp.result,pp=fp.transaction(jh,"readwrite"),hp=pp.objectStore(jh),mp=hp.get(rp);mp.onsuccess=function(){if(mp.result==null)return fp.close(),up(new Error("Cannot find model with path '"+rp+"' in IndexedDB."));var gp=hp.delete(rp),vp=function(){var xp=(dp=fp.transaction(Kh,"readwrite")).objectStore(Kh).delete(rp);xp.onsuccess=function(){return lp(mp.result.modelArtifactsInfo)},xp.onerror=function(Sp){return up(mp.error)}};gp.onsuccess=vp,gp.onerror=function(xp){return vp(),fp.close(),up(mp.error)}},mp.onerror=function(gp){return fp.close(),up(mp.error)},pp.oncomplete=function(){dp==null?fp.close():dp.oncomplete=function(){return fp.close()}}},cp.onerror=function(dp){return up(cp.error)}})]})})},_d}();if(a$1().getBool("IS_BROWSER"))try{Gh.registerManager(Yh.URL_SCHEME,new Jh)}catch{}var Zh="/",tf$3="tensorflowjs_models",ef="info",nf="model_topology",rf="weight_specs",of="weight_data",af="model_metadata";function uf(_d){return{info:[tf$3,_d,ef].join(Zh),topology:[tf$3,_d,nf].join(Zh),weightSpecs:[tf$3,_d,rf].join(Zh),weightData:[tf$3,_d,of].join(Zh),modelMetadata:[tf$3,_d,af].join(Zh)}}function sf(_d){var rp=_d.split(Zh);if(rp.length<3)throw new Error("Invalid key format: "+_d);return rp.slice(1,rp.length-1).join(Zh)}var cf=function(){function _d(rp){if(!a$1().getBool("IS_BROWSER")||window.localStorage===void 0)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,rp==null||!rp)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=rp,this.keys=uf(this.modelPath)}return _d.prototype.save=function(rp){return n$1(this,void 0,void 0,function(){var np,ap,sp;return r(this,function(lp){if(rp.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");np=JSON.stringify(rp.modelTopology),ap=JSON.stringify(rp.weightSpecs),sp=Uh(rp);try{return this.LS.setItem(this.keys.info,JSON.stringify(sp)),this.LS.setItem(this.keys.topology,np),this.LS.setItem(this.keys.weightSpecs,ap),this.LS.setItem(this.keys.weightData,(up=rp.weightData,Bh?Buffer.from(up).toString("base64"):btoa(String.fromCharCode.apply(null,new Uint8Array(up))))),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:rp.format,generatedBy:rp.generatedBy,convertedBy:rp.convertedBy})),[2,{modelArtifactsInfo:sp}]}catch{throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+sp.modelTopologyBytes+", weightSpecsBytes="+sp.weightSpecsBytes+", weightDataBytes="+sp.weightDataBytes+".")}var up;return[2]})})},_d.prototype.load=function(){return n$1(this,void 0,void 0,function(){var rp,np,ap,sp,lp,up,cp;return r(this,function(dp){if((rp=JSON.parse(this.LS.getItem(this.keys.info)))==null)throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if(rp.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(np={},(ap=JSON.parse(this.LS.getItem(this.keys.topology)))==null)throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(np.modelTopology=ap,(sp=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))==null)throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(np.weightSpecs=sp,(lp=this.LS.getItem(this.keys.modelMetadata))!=null&&(up=JSON.parse(lp),np.format=up.format,np.generatedBy=up.generatedBy,np.convertedBy=up.convertedBy),(cp=this.LS.getItem(this.keys.weightData))==null)throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return np.weightData=function(fp){if(Bh){var pp=Buffer.from(fp,"base64");return pp.buffer.slice(pp.byteOffset,pp.byteOffset+pp.byteLength)}for(var hp=atob(fp),mp=new Uint8Array(hp.length),gp=0;gp<hp.length;++gp)mp.set([hp.charCodeAt(gp)],gp);return mp.buffer}(cp),[2,np]})})},_d.URL_SCHEME="localstorage://",_d}(),lf=function(_d){return a$1().getBool("IS_BROWSER")&&!Array.isArray(_d)&&_d.startsWith(cf.URL_SCHEME)?(rp=_d.slice(cf.URL_SCHEME.length),new cf(rp)):null;var rp};Vh.registerSaveRouter(lf),Vh.registerLoadRouter(lf);var hf=function(){function _d(){g(a$1().getBool("IS_BROWSER"),function(){return"Current environment is not a web browser"}),g(window.localStorage!==void 0,function(){return"Current browser does not appear to support localStorage"}),this.LS=window.localStorage}return _d.prototype.listModels=function(){return n$1(this,void 0,void 0,function(){var rp,np,ap,sp,lp,up;return r(this,function(cp){for(rp={},np=tf$3+Zh,ap=Zh+ef,sp=0;sp<this.LS.length;++sp)(lp=this.LS.key(sp)).startsWith(np)&&lp.endsWith(ap)&&(up=sf(lp),rp[up]=JSON.parse(this.LS.getItem(lp)));return[2,rp]})})},_d.prototype.removeModel=function(rp){return n$1(this,void 0,void 0,function(){var np,ap;return r(this,function(sp){var lp;if(rp=(lp=rp).startsWith(cf.URL_SCHEME)?lp.slice(cf.URL_SCHEME.length):lp,np=uf(rp),this.LS.getItem(np.info)==null)throw new Error("Cannot find model at path '"+rp+"'");return ap=JSON.parse(this.LS.getItem(np.info)),this.LS.removeItem(np.info),this.LS.removeItem(np.topology),this.LS.removeItem(np.weightSpecs),this.LS.removeItem(np.weightData),[2,ap]})})},_d}();if(a$1().getBool("IS_BROWSER"))try{Gh.registerManager(cf.URL_SCHEME,new hf)}catch{}var ff="model",pf=".json",df=".weights.bin";function vf(_d){return new Promise(function(rp){return setTimeout(rp)}).then(_d)}var mf=function(){function _d(rp){if(!a$1().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");rp.startsWith(_d.URL_SCHEME)&&(rp=rp.slice(_d.URL_SCHEME.length)),rp!=null&&rp.length!==0||(rp=ff),this.modelTopologyFileName=rp+pf,this.weightDataFileName=rp+df}return _d.prototype.save=function(rp){return n$1(this,void 0,void 0,function(){var np,ap,sp,lp,up,cp;return r(this,function(dp){switch(dp.label){case 0:if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");if(np=window.URL.createObjectURL(new Blob([rp.weightData],{type:"application/octet-stream"})),!(rp.modelTopology instanceof ArrayBuffer))return[3,1];throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 1:return ap=[{paths:["./"+this.weightDataFileName],weights:rp.weightSpecs}],sp={modelTopology:rp.modelTopology,format:rp.format,generatedBy:rp.generatedBy,convertedBy:rp.convertedBy,weightsManifest:ap},lp=window.URL.createObjectURL(new Blob([JSON.stringify(sp)],{type:"application/json"})),(up=this.jsonAnchor==null?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,up.href=lp,[4,vf(function(){return up.dispatchEvent(new MouseEvent("click"))})];case 2:return dp.sent(),rp.weightData==null?[3,4]:((cp=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,cp.href=np,[4,vf(function(){return cp.dispatchEvent(new MouseEvent("click"))})]);case 3:dp.sent(),dp.label=4;case 4:return[2,{modelArtifactsInfo:Uh(rp)}]}})})},_d.URL_SCHEME="downloads://",_d}(),gf=function(){function _d(rp){if(rp==null||rp.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+rp);this.files=rp}return _d.prototype.load=function(){return n$1(this,void 0,void 0,function(){var rp,np,ap=this;return r(this,function(sp){return rp=this.files[0],np=this.files.slice(1),[2,new Promise(function(lp,up){var cp=new FileReader;cp.onload=function(dp){var fp=JSON.parse(dp.target.result),pp=fp.modelTopology;if(pp!=null){np.length===0&&lp({modelTopology:pp});var hp=fp.weightsManifest;if(hp!=null){var mp;try{mp=ap.checkManifestAndWeightFiles(hp,np)}catch(Sp){return void up(Sp)}var gp=[],vp=[],xp=[];hp.forEach(function(Sp){Sp.paths.forEach(function(yp){vp.push(yp),xp.push(null)}),gp.push.apply(gp,Sp.weights)}),hp.forEach(function(Sp){Sp.paths.forEach(function(yp){var bp=new FileReader;bp.onload=function(Ep){var wp=Ep.target.result,_p=vp.indexOf(yp);xp[_p]=wp,xp.indexOf(null)===-1&&lp({modelTopology:pp,weightSpecs:gp,weightData:Lh(xp)})},bp.onerror=function(Ep){return up("Failed to weights data from file of path '"+yp+"'.")},bp.readAsArrayBuffer(mp[yp])})})}else up(new Error("weightManifest field is missing from file "+rp.name))}else up(new Error("modelTopology field is missing from file "+rp.name))},cp.onerror=function(dp){return up("Failed to read model topology and weights manifest JSON from file '"+rp.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},cp.readAsText(rp)})]})})},_d.prototype.checkManifestAndWeightFiles=function(rp,np){for(var ap=[],sp=np.map(function(dp){return Wh(dp.name)}),lp={},up=0,cp=rp;up<cp.length;up++)cp[up].paths.forEach(function(dp){var fp=Wh(dp);if(ap.indexOf(fp)!==-1)throw new Error("Duplicate file basename found in weights manifest: '"+fp+"'");if(ap.push(fp),sp.indexOf(fp)===-1)throw new Error("Weight file with basename '"+fp+"' is not provided.");lp[dp]=np[sp.indexOf(fp)]});if(ap.length!==np.length)throw new Error("Mismatch in the number of files in weights manifest ("+ap.length+") and the number of weight files provided ("+np.length+").");return lp},_d}();function yf(_d,rp,np,ap){(function(lp){g(lp!=null&&Array.isArray(lp)&&lp.length>0,function(){return"promises must be a none empty array"})})(_d),function(lp,up){g(lp>=0&&lp<=1,function(){return"Progress fraction must be in range [0, 1], but got startFraction "+lp}),g(up>=0&&up<=1,function(){return"Progress fraction must be in range [0, 1], but got endFraction "+up}),g(up>=lp,function(){return"startFraction must be no more than endFraction, but got startFraction "+lp+" and endFraction "+up})}(np=np??0,ap=ap??1);var sp=0;return Promise.all(_d.map(function(lp){return lp.then(function(up){var cp=np+ ++sp/_d.length*(ap-np);return rp(cp),up}),lp}))}function xf(_d,rp){return n$1(this,void 0,void 0,function(){var np,ap,sp,lp,up,cp,dp,fp,pp;return r(this,function(hp){switch(hp.label){case 0:return rp==null&&(rp={}),np=rp.fetchFunc==null?a$1().platform.fetch:rp.fetchFunc,ap=_d.map(function(mp){return np(mp,rp.requestInit,{isBinary:!0})}),sp=0,lp=.5,rp.onProgress!=null?[3,2]:[4,Promise.all(ap)];case 1:return up=hp.sent(),[3,4];case 2:return[4,yf(ap,rp.onProgress,sp,lp)];case 3:up=hp.sent(),hp.label=4;case 4:return cp=up.map(function(mp){return mp.arrayBuffer()}),dp=.5,fp=1,rp.onProgress!=null?[3,6]:[4,Promise.all(cp)];case 5:return pp=hp.sent(),[3,8];case 6:return[4,yf(cp,rp.onProgress,dp,fp)];case 7:pp=hp.sent(),hp.label=8;case 8:return[2,pp]}})})}function bf(_d){var rp=this;return function(np,ap,sp){return ap===void 0&&(ap=""),n$1(rp,void 0,void 0,function(){var lp,up,cp,dp,fp,pp,hp,mp,gp,vp;return r(this,function(xp){switch(xp.label){case 0:if(lp=np.map(function(){return!1}),up={},cp=sp!=null?sp.map(function(){return!1}):[],dp=[],np.forEach(function(Sp,yp){var bp=0;Sp.weights.forEach(function(Ep){var wp="quantization"in Ep?Ep.quantization.dtype:Ep.dtype,_p=Fh[wp]*w$1(Ep.shape),Rp=function(){lp[yp]=!0,up[yp]==null&&(up[yp]=[]),up[yp].push({manifestEntry:Ep,groupOffset:bp,sizeBytes:_p})};sp!=null?sp.forEach(function($p,Cp){$p===Ep.name&&(Rp(),cp[Cp]=!0)}):Rp(),dp.push(Ep.name),bp+=_p})}),!cp.every(function(Sp){return Sp}))throw fp=sp.filter(function(Sp,yp){return!cp[yp]}),new Error("Could not find weights in manifest with names: "+fp.join(", ")+`. 
Manifest JSON has weights with names: `+dp.join(", ")+".");return pp=lp.reduce(function(Sp,yp,bp){return yp&&Sp.push(bp),Sp},[]),hp=[],pp.forEach(function(Sp){np[Sp].paths.forEach(function(yp){var bp=ap+(ap.endsWith("/")?"":"/")+yp;hp.push(bp)})}),[4,_d(hp)];case 1:return mp=xp.sent(),gp={},vp=0,pp.forEach(function(Sp){for(var yp=np[Sp].paths.length,bp=0,Ep=0;Ep<yp;Ep++)bp+=mp[vp+Ep].byteLength;for(var wp=new ArrayBuffer(bp),_p=new Uint8Array(wp),Rp=0,$p=0;$p<yp;$p++){var Cp=new Uint8Array(mp[vp+$p]);_p.set(Cp,Rp),Rp+=Cp.byteLength}up[Sp].forEach(function(Ap){var Op=_h(wp.slice(Ap.groupOffset,Ap.groupOffset+Ap.sizeBytes),[Ap.manifestEntry]);for(var Lp in Op)gp[Lp]=Op[Lp]}),vp+=yp}),[2,gp]}})})}}Vh.registerSaveRouter(function(_d){return a$1().getBool("IS_BROWSER")&&!Array.isArray(_d)&&_d.startsWith(mf.URL_SCHEME)?(rp=_d.slice(mf.URL_SCHEME.length),rp===void 0&&(rp="model"),new mf(rp)):null;var rp});var wf=function(){function _d(rp,np){if(this.DEFAULT_METHOD="POST",np==null&&(np={}),this.weightPathPrefix=np.weightPathPrefix,this.onProgress=np.onProgress,np.fetchFunc!=null?(g(typeof np.fetchFunc=="function",function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"}),this.fetch=np.fetchFunc):this.fetch=a$1().platform.fetch,g(rp!=null&&rp.length>0,function(){return"URL path for http must not be null, undefined or empty."}),Array.isArray(rp)&&g(rp.length===2,function(){return"URL paths for http must have a length of 2, (actual length is "+rp.length+")."}),this.path=rp,np.requestInit!=null&&np.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=np.requestInit||{}}return _d.prototype.save=function(rp){return n$1(this,void 0,void 0,function(){var np,ap,sp,lp;return r(this,function(up){switch(up.label){case 0:if(rp.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(np=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,ap=[{paths:["./model.weights.bin"],weights:rp.weightSpecs}],sp={modelTopology:rp.modelTopology,format:rp.format,generatedBy:rp.generatedBy,convertedBy:rp.convertedBy,userDefinedMetadata:rp.userDefinedMetadata,weightsManifest:ap},np.body.append("model.json",new Blob([JSON.stringify(sp)],{type:"application/json"}),"model.json"),rp.weightData!=null&&np.body.append("model.weights.bin",new Blob([rp.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,this.fetch(this.path,np)];case 1:if((lp=up.sent()).ok)return[2,{modelArtifactsInfo:Uh(rp),responses:[lp]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+lp.status+".")}})})},_d.prototype.load=function(){return n$1(this,void 0,void 0,function(){var rp,np,ap,sp,lp,up,cp,dp;return r(this,function(fp){switch(fp.label){case 0:return[4,this.fetch(this.path,this.requestInit)];case 1:if(!(rp=fp.sent()).ok)throw new Error("Request to "+this.path+" failed with status code "+rp.status+". Please verify this URL points to the model JSON of the model to load.");fp.label=2;case 2:return fp.trys.push([2,4,,5]),[4,rp.json()];case 3:return np=fp.sent(),[3,5];case 4:throw fp.sent(),ap="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?ap+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":ap+=" Please make sure the server is serving valid JSON for this request.",new Error(ap);case 5:if(sp=np.modelTopology,lp=np.weightsManifest,sp==null&&lp==null)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return lp==null?[3,7]:[4,this.loadWeights(lp)];case 6:dp=fp.sent(),up=dp[0],cp=dp[1],fp.label=7;case 7:return[2,{modelTopology:sp,weightSpecs:up,weightData:cp}]}})})},_d.prototype.loadWeights=function(rp){return n$1(this,void 0,void 0,function(){var np,ap,sp,lp,up,cp,dp,fp,pp,hp,mp;return r(this,function(gp){switch(gp.label){case 0:for(np=Array.isArray(this.path)?this.path[1]:this.path,ap=function(vp){var xp=vp.lastIndexOf("/"),Sp=vp.lastIndexOf("?"),yp=vp.substring(0,xp),bp=Sp>xp?vp.substring(Sp):"";return[yp+"/",bp]}(np),sp=ap[0],lp=ap[1],up=this.weightPathPrefix||sp,cp=[],dp=0,fp=rp;dp<fp.length;dp++)pp=fp[dp],cp.push.apply(cp,pp.weights);return hp=[],rp.forEach(function(vp){vp.paths.forEach(function(xp){hp.push(up+xp+lp)})}),[4,xf(hp,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})];case 1:return mp=gp.sent(),[2,[cp,Lh(mp)]]}})})},_d.URL_SCHEME_REGEX=/^https?:\/\//,_d}();function Cf(_d){return _d.match(wf.URL_SCHEME_REGEX)!=null}var Ef=function(_d,rp){return typeof fetch>"u"?null:(Array.isArray(_d)?_d.every(function(np){return Cf(np)}):Cf(_d))?Rf(_d,{onProgress:rp}):null};function Rf(_d,rp){return new wf(_d,rp)}Vh.registerSaveRouter(Ef),Vh.registerLoadRouter(Ef);var If=function(){function _d(rp){this.modelArtifacts=rp}return _d.prototype.load=function(){return n$1(this,void 0,void 0,function(){return r(this,function(rp){return[2,this.modelArtifacts]})})},_d}(),kf=function(){function _d(rp){this.saveHandler=rp}return _d.prototype.save=function(rp){return n$1(this,void 0,void 0,function(){return r(this,function(np){return[2,this.saveHandler(rp)]})})},_d}(),Sf=Object.freeze({browserFiles:function(_d){return new gf(_d)},browserHTTPRequest:function(_d,rp){return Rf(_d,rp)},concatenateArrayBuffers:Lh,decodeWeights:_h,encodeWeights:function(_d,rp){return n$1(this,void 0,void 0,function(){var np,ap,sp,lp,up,cp=this;return r(this,function(dp){switch(dp.label){case 0:for(np=[],ap=[],sp=Array.isArray(_d)?_d.map(function(fp){return fp.name}):Object.keys(_d),lp=function(fp){var pp=sp[fp],hp=Array.isArray(_d)?_d[fp].tensor:_d[pp];if(hp.dtype!=="float32"&&hp.dtype!=="int32"&&hp.dtype!=="bool"&&hp.dtype!=="string")throw new Error("Unsupported dtype in weight '"+pp+"': "+hp.dtype);var mp={name:pp,shape:hp.shape,dtype:hp.dtype};if(hp.dtype==="string"){var gp=new Promise(function(vp){return n$1(cp,void 0,void 0,function(){var xp,Sp,yp,bp,Ep,wp,_p;return r(this,function(Rp){switch(Rp.label){case 0:return[4,hp.bytes()];case 1:for(xp=Rp.sent(),Sp=xp.reduce(function($p,Cp){return $p+Cp.length},0)+Oh*xp.length,yp=new Uint8Array(Sp),bp=0,Ep=0;Ep<xp.length;Ep++)wp=xp[Ep],_p=new Uint8Array(new Uint32Array([wp.length]).buffer),yp.set(_p,bp),bp+=Oh,yp.set(wp,bp),bp+=wp.length;return vp(yp),[2]}})})});ap.push(gp)}else ap.push(hp.data());rp!=null&&(mp.group=rp),np.push(mp)},up=0;up<sp.length;++up)lp(up);return[4,Promise.all(ap)];case 1:return[2,{data:Mh(dp.sent()),specs:np}]}})})},fromMemory:function(_d,rp,np,ap){return arguments.length===1?_d.modelTopology!=null||_d.weightSpecs!=null?new If(_d):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new If({modelTopology:_d})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new If({modelTopology:_d,weightSpecs:rp,weightData:np,trainingConfig:ap}))},getLoadHandlers:function(_d,rp){return Vh.getLoadHandlers(_d,rp)},getModelArtifactsInfoForJSON:Uh,getSaveHandlers:function(_d){return Vh.getSaveHandlers(_d)},http:Rf,isHTTPScheme:Cf,loadWeights:function(_d,rp,np,ap){return rp===void 0&&(rp=""),n$1(this,void 0,void 0,function(){return r(this,function(sp){return[2,bf(function(lp){return xf(lp,{requestInit:ap})})(_d,rp,np)]})})},registerLoadRouter:function(_d){return Vh.registerLoadRouter(_d)},registerSaveRouter:function(_d){return Vh.registerSaveRouter(_d)},weightsLoaderFactory:bf,withSaveHandler:function(_d){return new kf(_d)},copyModel:function(_d,rp){return n$1(this,void 0,void 0,function(){return r(this,function(np){return[2,qh(_d,rp,!1)]})})},listModels:function(){return n$1(this,void 0,void 0,function(){var _d,rp,np,ap,sp,lp,up;return r(this,function(cp){switch(cp.label){case 0:_d=Gh.getSchemes(),rp={},np=0,ap=_d,cp.label=1;case 1:return np<ap.length?(sp=ap[np],[4,Gh.getManager(sp).listModels()]):[3,4];case 2:for(up in lp=cp.sent())rp[sp+zh+up]=lp[up];cp.label=3;case 3:return np++,[3,1];case 4:return[2,rp]}})})},moveModel:function(_d,rp){return n$1(this,void 0,void 0,function(){return r(this,function(np){return[2,qh(_d,rp,!0)]})})},removeModel:function(_d){return n$1(this,void 0,void 0,function(){var rp;return r(this,function(np){return rp=Hh(_d),[2,Gh.getManager(rp.scheme).removeModel(rp.path)]})})}}),Af=Cn({confusionMatrix_:function(_d,rp,np){var ap=ln(_d,"labels","confusionMatrix"),sp=ln(rp,"predictions","confusionMatrix");g(np==null||np>0&&Number.isInteger(np),function(){return"If provided, numClasses must be a positive integer, but got "+np}),g(ap.rank===1,function(){return"Expected the rank of labels to be 1, but got "+ap.rank}),g(sp.rank===1,function(){return"Expected the rank of predictions to be 1, but got "+sp.rank}),g(ap.shape[0]===sp.shape[0],function(){return"Mismatch in the number of examples: "+ap.shape[0]+" vs. "+sp.shape[0]+". Labels and predictions should have the same number of elements."}),g(np>0&&Number.isInteger(np),function(){return"numClasses is required to be a positive integer, but got "+np});var lp=gr(ap.asType("int32"),np),up=gr(sp.asType("int32"),np);return lp.transpose().matMul(up).asType("int32")}}),Df=Object.freeze({confusionMatrix:Af}),Tf=Cn({fromPixels_:function(_d,rp){if(rp===void 0&&(rp=3),rp>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");var np=typeof HTMLVideoElement<"u"&&_d instanceof HTMLVideoElement;if(np&&np&&_d.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.");return Nt.fromPixels(_d,rp)}}),Nf=Object.freeze({toPixels:function(_d,rp){return n$1(this,void 0,void 0,function(){var np,ap,sp,lp,up,cp,dp,fp,pp,hp,mp,gp,vp,xp,Sp,yp,bp,Ep,wp,_p,Rp,$p,Cp;return r(this,function(Ap){switch(Ap.label){case 0:if(np=ln(_d,"img","toPixels"),_d instanceof dt||(np=np.toInt()),np.rank!==2&&np.rank!==3)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+np.rank+".");if(ap=np.shape.slice(0,2),sp=ap[0],lp=ap[1],(up=np.rank===2?1:np.shape[2])>4||up===2)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+up);return[4,np.data()];case 1:return cp=Ap.sent(),dp=np.min(),fp=np.max(),[4,Promise.all([dp.data(),fp.data()])];case 2:if(pp=Ap.sent(),hp=pp[0],mp=pp[1],gp=hp[0],vp=mp[0],dp.dispose(),fp.dispose(),np.dtype==="float32"){if(gp<0||vp>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+gp+" - "+vp+"].")}else{if(np.dtype!=="int32")throw new Error("Unsupported type for toPixels: "+np.dtype+". Please use float32 or int32 tensors.");if(gp<0||vp>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+gp+" - "+vp+"].")}for(xp=np.dtype==="float32"?255:1,Sp=new Uint8ClampedArray(lp*sp*4),yp=0;yp<sp*lp;++yp)bp=void 0,Ep=void 0,wp=void 0,_p=void 0,up===1?(bp=cp[yp]*xp,Ep=cp[yp]*xp,wp=cp[yp]*xp,_p=255):up===3?(bp=cp[3*yp]*xp,Ep=cp[3*yp+1]*xp,wp=cp[3*yp+2]*xp,_p=255):up===4&&(bp=cp[4*yp]*xp,Ep=cp[4*yp+1]*xp,wp=cp[4*yp+2]*xp,_p=cp[4*yp+3]*xp),Sp[0+(Rp=4*yp)]=Math.round(bp),Sp[Rp+1]=Math.round(Ep),Sp[Rp+2]=Math.round(wp),Sp[Rp+3]=Math.round(_p);return rp!=null&&(rp.width=lp,rp.height=sp,$p=rp.getContext("2d"),Cp=new ImageData(Sp,lp,sp),$p.putImageData(Cp,0,0)),np!==_d&&np.dispose(),[2,Sp]}})})},fromPixels:Tf}),Ff=function(){function _d(){}return _d.prototype.getClassName=function(){return this.constructor.className},_d.fromConfig=function(rp,np){return new rp(np)},_d}(),Of=function(){function _d(){this.classNameMap={}}return _d.getMap=function(){return _d.instance==null&&(_d.instance=new _d),_d.instance},_d.register=function(rp){_d.getMap().classNameMap[rp.className]=[rp,rp.fromConfig]},_d}();function _f(_d){g(_d.className!=null,function(){return"Class being registered does not have the static className property defined."}),g(typeof _d.className=="string",function(){return"className is required to be a string, but got type "+typeof _d.className}),g(_d.className.length>0,function(){return"Class being registered has an empty-string as its className, which is disallowed."}),Of.register(_d)}var Mf=Object.freeze({Serializable:Ff,SerializationMap:Of,registerClass:_f}),Bf=.001,Pf=.1;function Lf(){return Nt.backend.floatPrecision()===32?Bf:Pf}function Wf(_d,rp,np){var ap=!0;if((B(_d)||B(rp))&&(ap=!1),B(_d)&&B(rp)&&(ap=!0),ap){var sp=_d.constructor.name,lp=rp.constructor.name;if(sp!==lp)throw new Error("Arrays are of different type. Actual: "+sp+". Expected: "+lp)}if(Array.isArray(_d)&&Array.isArray(rp)){var up=sn(_d),cp=sn(rp);if(!C(up,cp))throw new Error("Arrays have different shapes. Actual: ["+up+"]. Expected: ["+cp+"]")}var dp=B(_d)?_d:b(_d),fp=B(rp)?rp:b(rp);if(dp.length!==fp.length)throw new Error("Arrays have different lengths actual: "+dp.length+" vs expected: "+fp.length+`.
Actual:   `+dp+`.
Expected: `+fp+".");for(var pp=0;pp<fp.length;++pp){var hp=dp[pp],mp=fp[pp];if(!np(hp,mp))throw new Error("Arrays differ: actual["+pp+"] = "+hp+", expected["+pp+"] = "+mp+`.
Actual:   `+dp+`.
Expected: `+fp+".")}}function Uf(_d,rp,np){return!isFinite(_d)&&!isFinite(rp)||!(isNaN(_d)||isNaN(rp)||Math.abs(_d-rp)>np)}var Vf=Object.freeze({TEST_EPSILON_FLOAT16:Pf,expectArraysClose:function(_d,rp,np){return np==null&&(np=Lf()),Wf(_d,rp,function(ap,sp){return Uf(ap,sp,np)})},testEpsilon:Lf,expectPromiseToFail:function(_d,rp){_d().then(function(){return rp.fail()},function(){return rp()})},expectArraysEqual:function(_d,rp){var np=typeof rp=="string"||typeof rp=="number"||typeof rp=="boolean"?[rp]:rp;return W(_d)||W(_d[0])||W(rp)||W(rp[0])?Wf(_d,np,function(ap,sp){return ap==sp}):Wf(_d,rp,function(ap,sp){return Uf(ap,sp,0)})},expectNumbersClose:function(_d,rp,np){if(np==null&&(np=Lf()),!Uf(_d,rp,np))throw new Error("Numbers differ: actual === "+_d+", expected === "+rp)},expectValuesInRange:function(_d,rp,np){for(var ap=0;ap<_d.length;ap++)if(_d[ap]<rp||_d[ap]>np)throw new Error("Value out of range:"+_d[ap]+" low: "+rp+", high: "+np)},expectArrayBuffersEqual:function(_d,rp){expect(new Float32Array(_d)).toEqual(new Float32Array(rp))}}),zf="1.3.1",Gf=Object.freeze({gpgpu_util:wi,webgl_util:Pe,forceHalfFloat:function(){a$1().set("WEBGL_FORCE_F16_TEXTURES",!0)},MathBackendWebGL:Wu,setWebGLContext:Wt,GPGPUContext:Ci}),Hf=function(_d){function rp(){return _d!==null&&_d.apply(this,arguments)||this}return e(rp,_d),rp.prototype.minimize=function(np,ap,sp){ap===void 0&&(ap=!1);var lp=this.computeGradients(np,sp),up=lp.value,cp=lp.grads;if(sp!=null){var dp=sp.map(function(fp){return{name:fp.name,tensor:cp[fp.name]}});this.applyGradients(dp)}else this.applyGradients(cp);return Xe(cp),ap?up:(up.dispose(),null)},Object.defineProperty(rp.prototype,"iterations",{get:function(){return this.iterations_==null&&(this.iterations_=0),this.iterations_},enumerable:!0,configurable:!0}),rp.prototype.incrementIterations=function(){this.iterations_=this.iterations+1},rp.prototype.computeGradients=function(np,ap){return ro(np,ap)},rp.prototype.dispose=function(){this.iterations_!=null&&Xe(this.iterations_)},rp.prototype.saveIterations=function(){return n$1(this,void 0,void 0,function(){return r(this,function(np){return this.iterations_==null&&(this.iterations_=0),[2,{name:"iter",tensor:An(this.iterations_,"int32")}]})})},rp.prototype.getWeights=function(){return n$1(this,void 0,void 0,function(){return r(this,function(np){throw new Error("getWeights() is not implemented for this optimizer yet.")})})},rp.prototype.setWeights=function(np){return n$1(this,void 0,void 0,function(){return r(this,function(ap){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())})})},rp.prototype.extractIterations=function(np){return n$1(this,void 0,void 0,function(){var ap;return r(this,function(sp){switch(sp.label){case 0:return ap=this,[4,np[0].tensor.data()];case 1:return ap.iterations_=sp.sent()[0],[2,np.slice(1)]}})})},rp}(Ff);Object.defineProperty(Hf,Symbol.hasInstance,{value:function(_d){return _d.minimize!=null&&_d.computeGradients!=null&&_d.applyGradients!=null}});var qf=function(_d){function rp(np,ap,sp){sp===void 0&&(sp=null);var lp=_d.call(this)||this;return lp.learningRate=np,lp.rho=ap,lp.epsilon=sp,lp.accumulatedGrads=[],lp.accumulatedUpdates=[],sp==null&&(lp.epsilon=Nt.backend.epsilon()),lp}return e(rp,_d),rp.prototype.applyGradients=function(np){var ap=this;(Array.isArray(np)?np.map(function(sp){return sp.name}):Object.keys(np)).forEach(function(sp,lp){var up=Nt.registeredVariables[sp];ap.accumulatedGrads[lp]==null&&(ap.accumulatedGrads[lp]={originalName:sp+"/accum_grad",variable:je(function(){return zn(up).variable(!1)})}),ap.accumulatedUpdates[lp]==null&&(ap.accumulatedUpdates[lp]={originalName:sp+"/accum_var",variable:je(function(){return zn(up).variable(!1)})});var cp=Array.isArray(np)?np[lp].tensor:np[sp];if(cp!=null){var dp=ap.accumulatedGrads[lp].variable,fp=ap.accumulatedUpdates[lp].variable;je(function(){var pp=dp.mul(ap.rho).add(cp.square().mul(1-ap.rho)),hp=fp.add(ap.epsilon).sqrt().div(dp.add(ap.epsilon).sqrt()).mul(cp),mp=fp.mul(ap.rho).add(hp.square().mul(1-ap.rho));dp.assign(pp),fp.assign(mp);var gp=hp.mul(-ap.learningRate).add(up);up.assign(gp)})}}),this.incrementIterations()},rp.prototype.dispose=function(){this.accumulatedUpdates!=null&&(Xe(this.accumulatedGrads.map(function(np){return np.variable})),Xe(this.accumulatedUpdates.map(function(np){return np.variable})))},rp.prototype.getWeights=function(){return n$1(this,void 0,void 0,function(){var np;return r(this,function(ap){switch(ap.label){case 0:return np=this.accumulatedGrads.concat(this.accumulatedUpdates),[4,this.saveIterations()];case 1:return[2,[ap.sent()].concat(np.map(function(sp){return{name:sp.originalName,tensor:sp.variable}}))]}})})},rp.prototype.setWeights=function(np){return n$1(this,void 0,void 0,function(){var ap;return r(this,function(sp){switch(sp.label){case 0:return[4,this.extractIterations(np)];case 1:return np=sp.sent(),ap=np.length/2,this.accumulatedGrads=np.slice(0,ap).map(function(lp){return{originalName:lp.name,variable:lp.tensor.variable(!1)}}),this.accumulatedUpdates=np.slice(ap,2*ap).map(function(lp){return{originalName:lp.name,variable:lp.tensor.variable(!1)}}),[2]}})})},rp.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},rp.fromConfig=function(np,ap){return new np(ap.learningRate,ap.rho,ap.epsilon)},rp.className="Adadelta",rp}(Hf);_f(qf);var Kf=function(_d){function rp(np,ap){ap===void 0&&(ap=.1);var sp=_d.call(this)||this;return sp.learningRate=np,sp.initialAccumulatorValue=ap,sp.accumulatedGrads=[],sp}return e(rp,_d),rp.prototype.applyGradients=function(np){var ap=this;(Array.isArray(np)?np.map(function(sp){return sp.name}):Object.keys(np)).forEach(function(sp,lp){var up=Nt.registeredVariables[sp];ap.accumulatedGrads[lp]==null&&(ap.accumulatedGrads[lp]={originalName:sp+"/accumulator",variable:je(function(){return Ln(up.shape,ap.initialAccumulatorValue).variable(!1)})});var cp=Array.isArray(np)?np[lp].tensor:np[sp];if(cp!=null){var dp=ap.accumulatedGrads[lp].variable;je(function(){var fp=dp.add(cp.square());dp.assign(fp);var pp=cp.div(fp.add(Nt.backend.epsilon()).sqrt()).mul(-ap.learningRate).add(up);up.assign(pp)})}}),this.incrementIterations()},rp.prototype.dispose=function(){this.accumulatedGrads!=null&&Xe(this.accumulatedGrads.map(function(np){return np.variable}))},rp.prototype.getWeights=function(){return n$1(this,void 0,void 0,function(){return r(this,function(np){switch(np.label){case 0:return[4,this.saveIterations()];case 1:return[2,[np.sent()].concat(this.accumulatedGrads.map(function(ap){return{name:ap.originalName,tensor:ap.variable}}))]}})})},rp.prototype.setWeights=function(np){return n$1(this,void 0,void 0,function(){return r(this,function(ap){switch(ap.label){case 0:return[4,this.extractIterations(np)];case 1:return np=ap.sent(),this.accumulatedGrads=np.map(function(sp){return{originalName:sp.name,variable:sp.tensor.variable(!1)}}),[2]}})})},rp.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},rp.fromConfig=function(np,ap){return new np(ap.learningRate,ap.initialAccumulatorValue)},rp.className="Adagrad",rp}(Hf);_f(Kf);var jf=function(_d){function rp(np,ap,sp,lp){lp===void 0&&(lp=null);var up=_d.call(this)||this;return up.learningRate=np,up.beta1=ap,up.beta2=sp,up.epsilon=lp,up.accumulatedFirstMoment=[],up.accumulatedSecondMoment=[],je(function(){up.accBeta1=An(ap).variable(),up.accBeta2=An(sp).variable()}),lp==null&&(up.epsilon=Nt.backend.epsilon()),up}return e(rp,_d),rp.prototype.applyGradients=function(np){var ap=this,sp=Array.isArray(np)?np.map(function(lp){return lp.name}):Object.keys(np);je(function(){var lp=ic(1,ap.accBeta1),up=ic(1,ap.accBeta2);sp.forEach(function(cp,dp){var fp=Nt.registeredVariables[cp];ap.accumulatedFirstMoment[dp]==null&&(ap.accumulatedFirstMoment[dp]={originalName:cp+"/m",variable:je(function(){return zn(fp).variable(!1)})}),ap.accumulatedSecondMoment[dp]==null&&(ap.accumulatedSecondMoment[dp]={originalName:cp+"/v",variable:je(function(){return zn(fp).variable(!1)})});var pp=Array.isArray(np)?np[dp].tensor:np[cp];if(pp!=null){var hp=ap.accumulatedFirstMoment[dp].variable,mp=ap.accumulatedSecondMoment[dp].variable,gp=hp.mul(ap.beta1).add(pp.mul(1-ap.beta1)),vp=mp.mul(ap.beta2).add(pp.square().mul(1-ap.beta2)),xp=gp.div(lp),Sp=vp.div(up);hp.assign(gp),mp.assign(vp);var yp=xp.div(Sp.sqrt().add(ap.epsilon)).mul(-ap.learningRate).add(fp);fp.assign(yp)}}),ap.accBeta1.assign(ap.accBeta1.mul(ap.beta1)),ap.accBeta2.assign(ap.accBeta2.mul(ap.beta2))}),this.incrementIterations()},rp.prototype.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&Xe(this.accumulatedFirstMoment.map(function(np){return np.variable})),this.accumulatedSecondMoment!=null&&Xe(this.accumulatedSecondMoment.map(function(np){return np.variable}))},rp.prototype.getWeights=function(){return n$1(this,void 0,void 0,function(){var np;return r(this,function(ap){switch(ap.label){case 0:return np=this.accumulatedFirstMoment.concat(this.accumulatedSecondMoment),[4,this.saveIterations()];case 1:return[2,[ap.sent()].concat(np.map(function(sp){return{name:sp.originalName,tensor:sp.variable}}))]}})})},rp.prototype.setWeights=function(np){return n$1(this,void 0,void 0,function(){var ap,sp=this;return r(this,function(lp){switch(lp.label){case 0:return[4,this.extractIterations(np)];case 1:return np=lp.sent(),je(function(){sp.accBeta1.assign(nc(sp.beta1,sp.iterations_+1)),sp.accBeta2.assign(nc(sp.beta2,sp.iterations_+1))}),ap=np.length/2,this.accumulatedFirstMoment=np.slice(0,ap).map(function(up){return{originalName:up.name,variable:up.tensor.variable(!1)}}),this.accumulatedSecondMoment=np.slice(ap,2*ap).map(function(up){return{originalName:up.name,variable:up.tensor.variable(!1)}}),[2]}})})},rp.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},rp.fromConfig=function(np,ap){return new np(ap.learningRate,ap.beta1,ap.beta2,ap.epsilon)},rp.className="Adam",rp}(Hf);_f(jf);var Xf=function(_d){function rp(np,ap,sp,lp,up){lp===void 0&&(lp=null),up===void 0&&(up=0);var cp=_d.call(this)||this;return cp.learningRate=np,cp.beta1=ap,cp.beta2=sp,cp.epsilon=lp,cp.decay=up,cp.accumulatedFirstMoment=[],cp.accumulatedWeightedInfNorm=[],je(function(){cp.iteration=An(0).variable(),cp.accBeta1=An(ap).variable()}),lp==null&&(cp.epsilon=Nt.backend.epsilon()),cp}return e(rp,_d),rp.prototype.applyGradients=function(np){var ap=this,sp=Array.isArray(np)?np.map(function(lp){return lp.name}):Object.keys(np);je(function(){var lp=ic(1,ap.accBeta1),up=qs(-ap.learningRate,ap.iteration.mul(ap.decay).add(1));sp.forEach(function(cp,dp){var fp=Nt.registeredVariables[cp];ap.accumulatedFirstMoment[dp]==null&&(ap.accumulatedFirstMoment[dp]={originalName:cp+"/m",variable:zn(fp).variable(!1)}),ap.accumulatedWeightedInfNorm[dp]==null&&(ap.accumulatedWeightedInfNorm[dp]={originalName:cp+"/v",variable:zn(fp).variable(!1)});var pp=Array.isArray(np)?np[dp].tensor:np[cp];if(pp!=null){var hp=ap.accumulatedFirstMoment[dp].variable,mp=ap.accumulatedWeightedInfNorm[dp].variable,gp=hp.mul(ap.beta1).add(pp.mul(1-ap.beta1)),vp=mp.mul(ap.beta2),xp=pp.abs(),Sp=vp.maximum(xp);hp.assign(gp),mp.assign(Sp);var yp=up.div(lp).mul(gp.div(Sp.add(ap.epsilon))).add(fp);fp.assign(yp)}}),ap.iteration.assign(ap.iteration.add(1)),ap.accBeta1.assign(ap.accBeta1.mul(ap.beta1))}),this.incrementIterations()},rp.prototype.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&Xe(this.accumulatedFirstMoment.map(function(np){return np.variable})),this.accumulatedWeightedInfNorm!=null&&Xe(this.accumulatedWeightedInfNorm.map(function(np){return np.variable}))},rp.prototype.getWeights=function(){return n$1(this,void 0,void 0,function(){return r(this,function(np){throw new Error("getWeights() is not implemented for Adamax yet.")})})},rp.prototype.setWeights=function(np){return n$1(this,void 0,void 0,function(){return r(this,function(ap){throw new Error("setWeights() is not implemented for Adamax yet.")})})},rp.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},rp.fromConfig=function(np,ap){return new np(ap.learningRate,ap.beta1,ap.beta2,ap.epsilon,ap.decay)},rp.className="Adamax",rp}(Hf);_f(Xf);var $f=function(_d){function rp(np){var ap=_d.call(this)||this;return ap.learningRate=np,ap.setLearningRate(np),ap}return e(rp,_d),rp.prototype.applyGradients=function(np){var ap=this;(Array.isArray(np)?np.map(function(sp){return sp.name}):Object.keys(np)).forEach(function(sp,lp){var up=Array.isArray(np)?np[lp].tensor:np[sp];if(up!=null){var cp=Nt.registeredVariables[sp];je(function(){var dp=ap.c.mul(up).add(cp);cp.assign(dp)})}}),this.incrementIterations()},rp.prototype.setLearningRate=function(np){this.learningRate=np,this.c!=null&&this.c.dispose(),this.c=$e(An(-np))},rp.prototype.dispose=function(){this.c.dispose()},rp.prototype.getWeights=function(){return n$1(this,void 0,void 0,function(){return r(this,function(np){switch(np.label){case 0:return[4,this.saveIterations()];case 1:return[2,[np.sent()]]}})})},rp.prototype.setWeights=function(np){return n$1(this,void 0,void 0,function(){return r(this,function(ap){switch(ap.label){case 0:return[4,this.extractIterations(np)];case 1:if((np=ap.sent()).length!==0)throw new Error("SGD optimizer does not have settable weights.");return[2]}})})},rp.prototype.getConfig=function(){return{learningRate:this.learningRate}},rp.fromConfig=function(np,ap){return new np(ap.learningRate)},rp.className="SGD",rp}(Hf);_f($f);var Yf=function(_d){function rp(np,ap,sp){sp===void 0&&(sp=!1);var lp=_d.call(this,np)||this;return lp.learningRate=np,lp.momentum=ap,lp.useNesterov=sp,lp.accumulations=[],lp.m=An(lp.momentum),lp}return e(rp,_d),rp.prototype.applyGradients=function(np){var ap=this;(Array.isArray(np)?np.map(function(sp){return sp.name}):Object.keys(np)).forEach(function(sp,lp){var up=Nt.registeredVariables[sp];ap.accumulations[lp]==null&&(ap.accumulations[lp]={originalName:sp+"/momentum",variable:je(function(){return zn(up).variable(!1)})});var cp=ap.accumulations[lp].variable,dp=Array.isArray(np)?np[lp].tensor:np[sp];dp!=null&&je(function(){var fp,pp=ap.m.mul(cp).add(dp);fp=ap.useNesterov?ap.c.mul(dp.add(pp.mul(ap.m))).add(up):ap.c.mul(pp).add(up),cp.assign(pp),up.assign(fp)})}),this.incrementIterations()},rp.prototype.dispose=function(){this.m.dispose(),this.accumulations!=null&&Xe(this.accumulations.map(function(np){return np.variable}))},rp.prototype.setMomentum=function(np){this.momentum=np},rp.prototype.getWeights=function(){return n$1(this,void 0,void 0,function(){return r(this,function(np){switch(np.label){case 0:return[4,this.saveIterations()];case 1:return[2,[np.sent()].concat(this.accumulations.map(function(ap){return{name:ap.originalName,tensor:ap.variable}}))]}})})},rp.prototype.setWeights=function(np){return n$1(this,void 0,void 0,function(){return r(this,function(ap){switch(ap.label){case 0:return[4,this.extractIterations(np)];case 1:return np=ap.sent(),this.accumulations=np.map(function(sp){return{originalName:sp.name,variable:sp.tensor.variable(!1)}}),[2]}})})},rp.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},rp.fromConfig=function(np,ap){return new np(ap.learningRate,ap.momentum,ap.useNesterov)},rp.className="Momentum",rp}($f);_f(Yf);var Qf=function(_d){function rp(np,ap,sp,lp,up){ap===void 0&&(ap=.9),sp===void 0&&(sp=0),lp===void 0&&(lp=null),up===void 0&&(up=!1);var cp=_d.call(this)||this;return cp.learningRate=np,cp.decay=ap,cp.momentum=sp,cp.epsilon=lp,cp.accumulatedMeanSquares=[],cp.accumulatedMoments=[],cp.accumulatedMeanGrads=[],cp.centered=up,lp==null&&(cp.epsilon=Nt.backend.epsilon()),cp}return e(rp,_d),rp.prototype.applyGradients=function(np){var ap=this;(Array.isArray(np)?np.map(function(sp){return sp.name}):Object.keys(np)).forEach(function(sp,lp){var up=Nt.registeredVariables[sp];ap.accumulatedMeanSquares[lp]==null&&(ap.accumulatedMeanSquares[lp]={originalName:sp+"/rms",variable:je(function(){return zn(up).variable(!1)})}),ap.accumulatedMoments[lp]==null&&(ap.accumulatedMoments[lp]={originalName:sp+"/momentum",variable:je(function(){return zn(up).variable(!1)})}),ap.accumulatedMeanGrads[lp]==null&&ap.centered&&(ap.accumulatedMeanGrads[lp]={originalName:sp+"/mg",variable:je(function(){return zn(up).variable(!1)})});var cp=Array.isArray(np)?np[lp].tensor:np[sp];if(cp!=null){var dp=ap.accumulatedMeanSquares[lp].variable,fp=ap.accumulatedMoments[lp].variable;je(function(){var pp=dp.mul(ap.decay).add(cp.square().mul(1-ap.decay));if(ap.centered){var hp=ap.accumulatedMeanGrads[lp].variable,mp=hp.mul(ap.decay).add(cp.mul(1-ap.decay)),gp=fp.mul(ap.momentum).add(cp.mul(ap.learningRate).div(pp.sub(mp.square().add(ap.epsilon)).sqrt()));dp.assign(pp),hp.assign(mp),fp.assign(gp);var vp=up.sub(gp);up.assign(vp)}else{var xp=dp.mul(ap.decay).add(cp.square().mul(1-ap.decay));gp=fp.mul(ap.momentum).add(cp.mul(ap.learningRate).div(xp.add(ap.epsilon).sqrt())),dp.assign(xp),fp.assign(gp),vp=up.sub(gp),up.assign(vp)}})}}),this.incrementIterations()},rp.prototype.dispose=function(){this.accumulatedMeanSquares!=null&&Xe(this.accumulatedMeanSquares.map(function(np){return np.variable})),this.accumulatedMeanGrads!=null&&this.centered&&Xe(this.accumulatedMeanGrads.map(function(np){return np.variable})),this.accumulatedMoments!=null&&Xe(this.accumulatedMoments.map(function(np){return np.variable}))},rp.prototype.getWeights=function(){return n$1(this,void 0,void 0,function(){var np;return r(this,function(ap){switch(ap.label){case 0:return np=this.accumulatedMeanSquares.concat(this.accumulatedMoments),this.centered&&np.push.apply(np,this.accumulatedMeanGrads),[4,this.saveIterations()];case 1:return[2,[ap.sent()].concat(np.map(function(sp){return{name:sp.originalName,tensor:sp.variable}}))]}})})},rp.prototype.setWeights=function(np){return n$1(this,void 0,void 0,function(){var ap;return r(this,function(sp){switch(sp.label){case 0:return[4,this.extractIterations(np)];case 1:return np=sp.sent(),ap=this.centered?np.length/3:np.length/2,this.accumulatedMeanSquares=np.slice(0,ap).map(function(lp){return{originalName:lp.name,variable:lp.tensor.variable(!1)}}),this.accumulatedMoments=np.slice(ap,2*ap).map(function(lp){return{originalName:lp.name,variable:lp.tensor.variable(!1)}}),this.centered&&(this.accumulatedMeanGrads=np.slice(2*ap,3*ap).map(function(lp){return{originalName:lp.name,variable:lp.tensor.variable(!1)}})),[2]}})})},rp.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},rp.fromConfig=function(np,ap){return new np(ap.learningRate,ap.decay,ap.momentum,ap.epsilon,ap.centered)},rp.className="RMSProp",rp}(Hf);_f(Qf);var Jf=function(){function _d(){}return _d.sgd=function(rp){return new $f(rp)},_d.momentum=function(rp,np,ap){return ap===void 0&&(ap=!1),new Yf(rp,np,ap)},_d.rmsprop=function(rp,np,ap,sp,lp){return np===void 0&&(np=.9),ap===void 0&&(ap=0),sp===void 0&&(sp=null),lp===void 0&&(lp=!1),new Qf(rp,np,ap,sp,lp)},_d.adam=function(rp,np,ap,sp){return rp===void 0&&(rp=.001),np===void 0&&(np=.9),ap===void 0&&(ap=.999),sp===void 0&&(sp=null),new jf(rp,np,ap,sp)},_d.adadelta=function(rp,np,ap){return rp===void 0&&(rp=.001),np===void 0&&(np=.95),ap===void 0&&(ap=null),new qf(rp,np,ap)},_d.adamax=function(rp,np,ap,sp,lp){return rp===void 0&&(rp=.002),np===void 0&&(np=.9),ap===void 0&&(ap=.999),sp===void 0&&(sp=null),lp===void 0&&(lp=0),new Xf(rp,np,ap,sp,lp)},_d.adagrad=function(rp,np){return np===void 0&&(np=.1),new Kf(rp,np)},_d}(),Zf={sgd:Jf.sgd,momentum:Jf.momentum,adadelta:Jf.adadelta,adagrad:Jf.adagrad,rmsprop:Jf.rmsprop,adamax:Jf.adamax,adam:Jf.adam},tp=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:function(_d){return _d()};function ep(){return new Promise(function(_d){return tp(function(){return _d()})})}ft=Rh;/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var extendStatics$1=function(_d,rp){return(extendStatics$1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(np,ap){np.__proto__=ap}||function(np,ap){for(var sp in ap)ap.hasOwnProperty(sp)&&(np[sp]=ap[sp])})(_d,rp)};function __extends$h(_d,rp){function np(){this.constructor=_d}extendStatics$1(_d,rp),_d.prototype=rp===null?Object.create(rp):(np.prototype=rp.prototype,new np)}var _epsilon,__assign$2=function(){return(__assign$2=Object.assign||function(_d){for(var rp,np=1,ap=arguments.length;np<ap;np++)for(var sp in rp=arguments[np])Object.prototype.hasOwnProperty.call(rp,sp)&&(_d[sp]=rp[sp]);return _d}).apply(this,arguments)};function __awaiter$8(_d,rp,np,ap){return new(np||(np=Promise))(function(sp,lp){function up(fp){try{dp(ap.next(fp))}catch(pp){lp(pp)}}function cp(fp){try{dp(ap.throw(fp))}catch(pp){lp(pp)}}function dp(fp){fp.done?sp(fp.value):new np(function(pp){pp(fp.value)}).then(up,cp)}dp((ap=ap.apply(_d,rp||[])).next())})}function __generator$8(_d,rp){var np,ap,sp,lp,up={label:0,sent:function(){if(1&sp[0])throw sp[1];return sp[1]},trys:[],ops:[]};return lp={next:cp(0),throw:cp(1),return:cp(2)},typeof Symbol=="function"&&(lp[Symbol.iterator]=function(){return this}),lp;function cp(dp){return function(fp){return function(pp){if(np)throw new TypeError("Generator is already executing.");for(;up;)try{if(np=1,ap&&(sp=2&pp[0]?ap.return:pp[0]?ap.throw||((sp=ap.return)&&sp.call(ap),0):ap.next)&&!(sp=sp.call(ap,pp[1])).done)return sp;switch(ap=0,sp&&(pp=[2&pp[0],sp.value]),pp[0]){case 0:case 1:sp=pp;break;case 4:return up.label++,{value:pp[1],done:!1};case 5:up.label++,ap=pp[1],pp=[0];continue;case 7:pp=up.ops.pop(),up.trys.pop();continue;default:if(!(sp=(sp=up.trys).length>0&&sp[sp.length-1])&&(pp[0]===6||pp[0]===2)){up=0;continue}if(pp[0]===3&&(!sp||pp[1]>sp[0]&&pp[1]<sp[3])){up.label=pp[1];break}if(pp[0]===6&&up.label<sp[1]){up.label=sp[1],sp=pp;break}if(sp&&up.label<sp[2]){up.label=sp[2],up.ops.push(pp);break}sp[2]&&up.ops.pop(),up.trys.pop();continue}pp=rp.call(_d,up)}catch(hp){pp=[6,hp],ap=0}finally{np=sp=0}if(5&pp[0])throw pp[1];return{value:pp[0]?pp[1]:void 0,done:!0}}([dp,fp])}}}function epsilon(){return _epsilon==null&&(_epsilon=on().epsilon()),_epsilon}function imageDataFormat(){return"channelsLast"}var AttributeError=function(_d){function rp(np){var ap=_d.call(this,np)||this;return Object.setPrototypeOf(ap,rp.prototype),ap}return __extends$h(rp,_d),rp}(Error),RuntimeError=function(_d){function rp(np){var ap=_d.call(this,np)||this;return Object.setPrototypeOf(ap,rp.prototype),ap}return __extends$h(rp,_d),rp}(Error),ValueError=function(_d){function rp(np){var ap=_d.call(this,np)||this;return Object.setPrototypeOf(ap,rp.prototype),ap}return __extends$h(rp,_d),rp}(Error),NotImplementedError=function(_d){function rp(np){var ap=_d.call(this,np)||this;return Object.setPrototypeOf(ap,rp.prototype),ap}return __extends$h(rp,_d),rp}(Error),AssertionError=function(_d){function rp(np){var ap=_d.call(this,np)||this;return Object.setPrototypeOf(ap,rp.prototype),ap}return __extends$h(rp,_d),rp}(Error);(function(_d){function rp(np){var ap=_d.call(this,np)||this;return Object.setPrototypeOf(ap,rp.prototype),ap}return __extends$h(rp,_d),rp})(Error);function pyListRepeat(_d,rp){if(Array.isArray(_d)){for(var np=[],ap=0;ap<rp;ap++)np=np.concat(_d);return np}return(np=new Array(rp)).fill(_d),np}function assert(_d,rp){if(!_d)throw new AssertionError(rp)}function count(_d,rp){for(var np=0,ap=0,sp=_d;ap<sp.length;ap++)sp[ap]===rp&&np++;return np}function singletonOrArray(_d){return _d.length===1?_d[0]:_d}function toList(_d){return Array.isArray(_d)?_d:[_d]}function toSnakeCase(_d){var rp=_d.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return rp[0]!=="_"?rp:"private"+rp}function toCamelCase$1(_d){return _d.length<=1||_d.indexOf("_")===-1?_d:_d.replace(/[_]+(\w|$)/g,function(rp,np){return np.toUpperCase()})}var _GLOBAL_CUSTOM_OBJECTS={};function serializeKerasObject(_d){if(_d==null)return null;var rp={};return rp.className=_d.getClassName(),rp.config=_d.getConfig(),rp}function convertNDArrayScalarsInConfig(_d){if(_d!=null&&typeof _d=="object")if(Array.isArray(_d))_d.forEach(function(lp){return convertNDArrayScalarsInConfig(lp)});else for(var rp=0,np=Object.keys(_d);rp<np.length;rp++){var ap=np[rp],sp=_d[ap];sp!=null&&typeof sp=="object"&&(Array.isArray(sp)||sp.type!=="ndarray"||typeof sp.value!="number"?convertNDArrayScalarsInConfig(sp):_d[ap]=sp.value)}}function deserializeKerasObject(_d,rp,np,ap,sp){var lp,up,cp;if(rp===void 0&&(rp={}),np===void 0&&(np={}),ap===void 0&&(ap="object"),sp===void 0&&(sp=!1),typeof _d=="string"){var dp=_d,fp=void 0;if(dp in np)fp=np[dp];else if(dp in _GLOBAL_CUSTOM_OBJECTS)fp=_GLOBAL_CUSTOM_OBJECTS[dp];else if((fp=rp[dp])==null)throw new ValueError("Unknown "+ap+": "+_d+`. This may be due to one of the following reasons:
1. The `+ap+` is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom `+ap+" is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().");return fp}var pp=_d;if(pp.className==null||pp.config==null)throw new ValueError(ap+": Improper config format: "+JSON.stringify(pp)+`.
'className' and 'config' must set.`);var hp=pp.className,mp=void 0,gp=void 0;if(hp in np?(mp=(lp=np[hp])[0],gp=lp[1]):hp in _GLOBAL_CUSTOM_OBJECTS?(mp=(up=_GLOBAL_CUSTOM_OBJECTS.className)[0],gp=up[1]):hp in rp&&(mp=(cp=rp[hp])[0],gp=cp[1]),mp==null)throw new ValueError("Unknown "+ap+": "+hp+`. This may be due to one of the following reasons:
1. The `+ap+` is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom `+ap+" is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().");if(gp!=null){for(var vp={},xp=0,Sp=Object.keys(_GLOBAL_CUSTOM_OBJECTS);xp<Sp.length;xp++)vp[Rp=Sp[xp]]=_GLOBAL_CUSTOM_OBJECTS[Rp];for(var yp=0,bp=Object.keys(np);yp<bp.length;yp++)vp[Rp=bp[yp]]=np[Rp];pp.config.customObjects=vp;for(var Ep=__assign$2({},_GLOBAL_CUSTOM_OBJECTS),wp=0,_p=Object.keys(np);wp<_p.length;wp++){var Rp=_p[wp];_GLOBAL_CUSTOM_OBJECTS[Rp]=np[Rp]}convertNDArrayScalarsInConfig(pp.config);var $p=gp(mp,pp.config,np,sp);return _GLOBAL_CUSTOM_OBJECTS=__assign$2({},Ep),$p}Ep=__assign$2({},_GLOBAL_CUSTOM_OBJECTS);for(var Cp=0,Ap=Object.keys(np);Cp<Ap.length;Cp++)Rp=Ap[Cp],_GLOBAL_CUSTOM_OBJECTS[Rp]=np[Rp];return $p=new mp(pp.config),_GLOBAL_CUSTOM_OBJECTS=__assign$2({},Ep),$p}function numberCompare(_d,rp){return _d<rp?-1:_d>rp?1:0}function reverseNumberCompare(_d,rp){return-1*numberCompare(_d,rp)}function unique(_d){if(_d==null)return _d;for(var rp=[],np=0,ap=_d;np<ap.length;np++){var sp=ap[np];rp.indexOf(sp)===-1&&rp.push(sp)}return rp}function isObjectEmpty(_d){if(_d==null)throw new ValueError("Invalid value in obj: "+JSON.stringify(_d));for(var rp in _d)if(_d.hasOwnProperty(rp))return!1;return!0}function checkStringTypeUnionValue(_d,rp,np){if(np!=null&&_d.indexOf(np)<0)throw new ValueError(np+" is not a valid "+rp+".  Valid values are "+_d+" or null/undefined.")}function checkArrayTypeAndLength(_d,rp,np,ap){return np===void 0&&(np=0),ap===void 0&&(ap=1/0),assert(np>=0),assert(ap>=np),Array.isArray(_d)&&_d.length>=np&&_d.length<=ap&&_d.every(function(sp){return typeof sp===rp})}function assertPositiveInteger(_d,rp){Array.isArray(_d)?(tt.assert(_d.length>0,function(){return rp+" is unexpectedly an empty array."}),_d.forEach(function(np,ap){return assertPositiveInteger(np,"element "+(ap+1)+" of "+rp)})):tt.assert(Number.isInteger(_d)&&_d>0,function(){return"Expected "+rp+" to be a positive integer, but got "+formatAsFriendlyString(_d)+"."})}function formatAsFriendlyString(_d){return _d===null?"null":Array.isArray(_d)?"["+_d.map(function(rp){return formatAsFriendlyString(rp)}).join(",")+"]":typeof _d=="string"?'"'+_d+'"':""+_d}function debounce(_d,rp){var np,ap=tt.now();return function(){for(var sp=[],lp=0;lp<arguments.length;lp++)sp[lp]=arguments[lp];var up=tt.now();return up-ap<rp?np:(ap=up,np=_d.apply(void 0,sp))}}function mapActivationToFusedKernel(_d){return _d==="relu"?"relu":_d==="linear"?"linear":_d==="elu"?"elu":null}function calcL2Norms(_d,rp){return je(function(){return gs(vl(ec(_d,_d),rp,!0))})}var Constraint=function(_d){function rp(){return _d!==null&&_d.apply(this,arguments)||this}return __extends$h(rp,_d),rp.prototype.getConfig=function(){return{}},rp}(Mf.Serializable),MaxNorm=function(_d){function rp(np){var ap=_d.call(this)||this;return ap.defaultMaxValue=2,ap.defaultAxis=0,ap.maxValue=np.maxValue!=null?np.maxValue:ap.defaultMaxValue,ap.axis=np.axis!=null?np.axis:ap.defaultAxis,ap}return __extends$h(rp,_d),rp.prototype.apply=function(np){var ap=this;return je(function(){var sp=calcL2Norms(np,ap.axis),lp=$u(sp,0,ap.maxValue);return tc(np,qs(lp,Vs(epsilon(),sp)))})},rp.prototype.getConfig=function(){return{maxValue:this.maxValue,axis:this.axis}},rp.className="MaxNorm",rp}(Constraint);Mf.registerClass(MaxNorm);var UnitNorm=function(_d){function rp(np){var ap=_d.call(this)||this;return ap.defaultAxis=0,ap.axis=np.axis!=null?np.axis:ap.defaultAxis,ap}return __extends$h(rp,_d),rp.prototype.apply=function(np){var ap=this;return je(function(){return qs(np,Vs(epsilon(),calcL2Norms(np,ap.axis)))})},rp.prototype.getConfig=function(){return{axis:this.axis}},rp.className="UnitNorm",rp}(Constraint);Mf.registerClass(UnitNorm);var NonNeg=function(_d){function rp(){return _d!==null&&_d.apply(this,arguments)||this}return __extends$h(rp,_d),rp.prototype.apply=function(np){return bl(np)},rp.className="NonNeg",rp}(Constraint);Mf.registerClass(NonNeg);var MinMaxNorm=function(_d){function rp(np){var ap=_d.call(this)||this;return ap.defaultMinValue=0,ap.defaultMaxValue=1,ap.defaultRate=1,ap.defaultAxis=0,ap.minValue=np.minValue!=null?np.minValue:ap.defaultMinValue,ap.maxValue=np.maxValue!=null?np.maxValue:ap.defaultMaxValue,ap.rate=np.rate!=null?np.rate:ap.defaultRate,ap.axis=np.axis!=null?np.axis:ap.defaultAxis,ap}return __extends$h(rp,_d),rp.prototype.apply=function(np){var ap=this;return je(function(){var sp=calcL2Norms(np,ap.axis),lp=Vs(tc(ap.rate,$u(sp,ap.minValue,ap.maxValue)),tc(1-ap.rate,sp));return tc(np,qs(lp,Vs(epsilon(),sp)))})},rp.prototype.getConfig=function(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}},rp.className="MinMaxNorm",rp}(Constraint);Mf.registerClass(MinMaxNorm);var CONSTRAINT_IDENTIFIER_REGISTRY_SYMBOL_MAP={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function serializeConstraint(_d){return serializeKerasObject(_d)}function deserializeConstraint(_d,rp){return rp===void 0&&(rp={}),deserializeKerasObject(_d,Mf.SerializationMap.getMap().classNameMap,rp,"constraint")}function getConstraint(_d){return _d==null?null:typeof _d=="string"?deserializeConstraint({className:_d in CONSTRAINT_IDENTIFIER_REGISTRY_SYMBOL_MAP?CONSTRAINT_IDENTIFIER_REGISTRY_SYMBOL_MAP[_d]:_d,config:{}}):_d instanceof Constraint?_d:deserializeConstraint(_d)}function maxNorm(_d){return new MaxNorm(_d)}function unitNorm(_d){return new UnitNorm(_d)}function nonNeg(){return new NonNeg}function minMaxNorm(_d){return new MinMaxNorm(_d)}var exports_constraints=Object.freeze({maxNorm,unitNorm,nonNeg,minMaxNorm}),VALID_DATA_FORMAT_VALUES=["channelsFirst","channelsLast"],VALID_PADDING_MODE_VALUES=["valid","same","causal"],VALID_POOL_MODE_VALUES=["max","avg"],VALID_BIDIRECTIONAL_MERGE_MODES=["sum","mul","concat","ave"],nameMap=new Map;function checkDataFormat(_d){checkStringTypeUnionValue(VALID_DATA_FORMAT_VALUES,"DataFormat",_d)}function checkPaddingMode(_d){checkStringTypeUnionValue(VALID_PADDING_MODE_VALUES,"PaddingMode",_d)}function checkPoolMode(_d){checkStringTypeUnionValue(VALID_POOL_MODE_VALUES,"PoolMode",_d)}var _nameScopeStack=[],_nameScopeDivider="/";function nameScope(_d,rp){_nameScopeStack.push(_d);try{var np=rp();return _nameScopeStack.pop(),np}catch(ap){throw _nameScopeStack.pop(),ap}}function currentNameScopePrefix(){return _nameScopeStack.length===0?"":_nameScopeStack.join(_nameScopeDivider)+_nameScopeDivider}function getScopedTensorName(_d){if(!isValidTensorName(_d))throw new Error("Not a valid tensor name: '"+_d+"'");return currentNameScopePrefix()+_d}function getUniqueTensorName(_d){if(!isValidTensorName(_d))throw new Error("Not a valid tensor name: '"+_d+"'");nameMap.has(_d)||nameMap.set(_d,0);var rp=nameMap.get(_d);if(nameMap.set(_d,nameMap.get(_d)+1),rp>0){var np=_d+"_"+rp;return nameMap.set(np,1),np}return _d}var tensorNameRegex=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function isValidTensorName(_d){return!!_d.match(tensorNameRegex)}function isInteger(_d){return _d===parseInt(_d.toString(),10)}function arrayProd(_d,rp,np){rp==null&&(rp=0),np==null&&(np=_d.length);for(var ap=1,sp=rp;sp<np;++sp)ap*=_d[sp];return ap}function toArray1D(_d){return _d=Array.isArray(_d)?new Float32Array(_d):_d,Dn(_d)}function min$1$1(_d){return pl(toArray1D(_d)).dataSync()[0]}function max$1(_d){return hl(toArray1D(_d)).dataSync()[0]}function range(_d,rp){if(rp<_d)throw new ValueError("end ("+rp+") < begin ("+_d+") is forbidden.");for(var np=[],ap=_d;ap<rp;++ap)np.push(ap);return np}function cast$1(_d,rp){return _d.asType(rp)}function expandDims$1(_d,rp){rp===void 0&&(rp=-1);var np=_d.shape.slice();return rp<0&&(rp=np.length+rp+1),np.splice(rp,0,1),_d.reshape(np)}function repeat(_d,rp){return je(function(){if(_d.shape.length!==2)throw new ValueError("repeat() expects a rank-2 tensor, but received a rank-"+_d.shape.length+" tensor.");return tile$1(expandDims$1(_d,1),[1,rp,1])})}function flatten(_d){var rp=[arrayProd(_d.shape)];return _d.reshape(rp)}function batchFlatten(_d){if(_d.rank<=1)throw new ValueError("batchFlatten requires a minimum rank of 2. Got rank: "+_d.rank+".");var rp=[_d.shape[0],arrayProd(_d.shape,1)];return _d.reshape(rp)}function sliceAlongFirstAxis(_d,rp,np){return je(function(){switch(_d.rank){case 1:return el(_d,rp,np);case 2:return nl(_d,[rp,0],[np,_d.shape[1]]);case 3:return rl(_d,[rp,0,0],[np,_d.shape[1],_d.shape[2]]);case 4:return ol(_d,[rp,0,0,0],[np,_d.shape[1],_d.shape[2],_d.shape[3]]);case 5:return tl(_d,[rp,0,0,0,0],[np,_d.shape[1],_d.shape[2],_d.shape[3],_d.shape[4]]);case 6:return tl(_d,[rp,0,0,0,0,0],[np,_d.shape[1],_d.shape[2],_d.shape[3],_d.shape[4],_d.shape[5]]);default:throw new ValueError("sliceAlongFirstAxis() received an unsupported tensor rank: "+_d.rank)}})}function sliceAlongLastAxis(_d,rp,np){return je(function(){switch(_d.rank){case 1:return el(_d,rp,np);case 2:return nl(_d,[0,rp],[_d.shape[0],np]);case 3:return rl(_d,[0,0,rp],[_d.shape[0],_d.shape[1],np]);case 4:return ol(_d,[0,0,0,rp],[_d.shape[0],_d.shape[1],_d.shape[2],np]);default:throw new ValueError("sliceAlongLastAxis() received an unsupported tensor rank: "+_d.rank)}})}function sliceAlongAxis(_d,rp,np,ap){return je(function(){switch(_d.rank){case 1:return el(_d,rp,np);case 2:switch(ap){case 1:return sliceAlongFirstAxis(_d,rp,np);case 2:return sliceAlongLastAxis(_d,rp,np);default:throw new ValueError("The axis is not within the rank of the tensor "+ap)}case 3:switch(ap){case 1:return sliceAlongFirstAxis(_d,rp,np);case 2:return rl(_d,[0,rp,0],[_d.shape[0],np,_d.shape[2]]);case 3:return sliceAlongLastAxis(_d,rp,np);default:throw new ValueError("The axis is not within the rank of the tensor "+ap)}case 4:switch(ap){case 1:return sliceAlongFirstAxis(_d,rp,np);case 2:return ol(_d,[0,rp,0,0],[_d.shape[0],np,_d.shape[2],_d.shape[3]]);case 3:return ol(_d,[0,0,rp,0],[_d.shape[0],_d.shape[1],np,_d.shape[3]]);case 4:return sliceAlongLastAxis(_d,rp,np);default:throw new ValueError("The axis is not within the rank of the tensor "+ap)}default:throw new ValueError("sliceAlongLastAxis() received an unsupported tensor rank: "+_d.rank)}})}function concatenate(_d,rp){var np;return rp===void 0&&(rp=-1),rp<0&&(rp=(np=_d[0].rank)!==0?np:0),rp===_d[0].rank&&(rp=-1),Gn(_d,rp)}function concatAlongFirstAxis(_d,rp){switch(_d.rank){case 1:return Hn([_d,rp]);case 2:return qn([_d,rp],0);case 3:return Kn([_d,rp],0);case 4:return jn([_d,rp],0);default:throw new ValueError("concatAlongFirstAxis() received an unsupported tensor rank: "+_d.rank)}}function tile$1(_d,rp){if(Array.isArray(rp)||(rp=[rp]),_d.rank!==rp.length)throw new ValueError("The length of input n ("+rp.length+") does not match the number of dimensions in input x ("+_d.rank+")");return Nr(_d,rp)}function randomNormal$1(_d,rp,np,ap,sp){return rp===void 0&&(rp=0),np===void 0&&(np=1),Rr(_d,rp,np,ap,sp)}function dot(_d,rp,np,ap){if(_d.rank<2||rp.rank<2)throw new NotImplementedError("dot requires both inputs to be rank >= 2 but got x shape = "+_d.shape+" and y shape = "+rp.shape);if(rp.rank>=3&&_d.shape.slice(-1)[0]!==(pp=rp.shape.slice(-2)[0]))throw new NotImplementedError("If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = "+_d.shape+" and  y shape = "+rp.shape);if(_d.rank===2&&rp.rank===2){var sp=!1,lp=!1;return Eh.matMul({a:_d,b:rp,transposeA:sp,transposeB:lp,bias:ap?reshapeBias(_d.rank,ap,imageDataFormat()):null,activation:np})}var up=_d.shape.slice(),cp=up.pop();_d=_d.reshape([-1,cp]);var dp=rp.shape.slice(),fp=dp.pop(),pp=dp.pop(),hp=dp.concat([fp]),mp=Array.from({length:rp.rank},function(vp,xp){return xp===0?rp.rank-2:xp<=rp.rank-2?xp-1:xp});rp=rp.transpose(mp).reshape([pp,-1]);var gp=up.concat(hp);return sp=!1,lp=!1,Eh.matMul({a:_d,b:rp,transposeA:sp,transposeB:lp,bias:ap?reshapeBias(_d.rank,ap,imageDataFormat()):null,activation:np}).reshape(gp)}function gather$1(_d,rp,np){return je(function(){return rp=Array.isArray(rp)?Dn(rp,"int32"):rp.toInt(),Cc(_d,rp,np)})}function square(_d){return ec(_d,_d)}function reshapeBias(_d,rp,np){var ap=rp.shape;if(rp.rank!==1&&rp.rank!==_d)throw new ValueError("Unexpected bias dimensions: "+rp.rank+"; expected it to be 1 or "+_d);if(_d===5){if(np==="channelsFirst")return ap.length===1?rp.reshape([1,ap[0],1,1,1]):rp.reshape([1,ap[3],ap[0],ap[1],ap[2]]);if(np==="channelsLast")return ap.length===1?rp.reshape([1,1,1,1,ap[0]]):rp.reshape([1].concat(ap))}else if(_d===4){if(np==="channelsFirst")return ap.length===1?rp.reshape([1,ap[0],1,1]):rp.reshape([1,ap[2],ap[0],ap[1]]);if(np==="channelsLast")return ap.length===1?rp.reshape([1,1,1,ap[0]]):rp.reshape([1].concat(ap))}else if(_d===3){if(np==="channelsFirst")return ap.length===1?rp.reshape([1,ap[0],1]):rp.reshape([1,ap[1],ap[0]]);if(np==="channelsLast")return ap.length===1?rp.reshape([1,1,ap[0]]):rp.reshape([1].concat(ap))}else if(_d<3)return rp;throw new ValueError("Unsupported input rank by biasAdd: "+rp.rank)}function biasAdd(_d,rp,np){return je(function(){return np==null&&(np=imageDataFormat()),checkDataFormat(np),_d.add(reshapeBias(_d.rank,rp,np))})}function elu$1(_d,rp){if(rp===void 0&&(rp=1),rp!==1)throw new NotImplementedError("Support for alpha values other than 1 ("+rp+") is not implemented yet.");return gl(_d)}function softsign(_d){return je(function(){return qs(_d,Vu(_d).add(1))})}function dropout$1(_d,rp,np,ap){return je(function(){return Ul(_d,rp,np,ap)})}function hardSigmoid(_d){return je(function(){var rp=Vs(.5,tc(.2,_d));return $u(rp,0,1)})}function inTrainPhase(_d,rp,np){return np===void 0&&(np=!1),np?_d():rp()}var VALID_FAN_MODE_VALUES=["fanIn","fanOut","fanAvg"],VALID_DISTRIBUTION_VALUES=["normal","uniform","truncatedNormal"];function checkFanMode(_d){checkStringTypeUnionValue(VALID_FAN_MODE_VALUES,"FanMode",_d)}function checkDistribution(_d){checkStringTypeUnionValue(VALID_DISTRIBUTION_VALUES,"Distribution",_d)}var Initializer=function(_d){function rp(){return _d!==null&&_d.apply(this,arguments)||this}return __extends$h(rp,_d),rp.prototype.fromConfigUsesCustomObjects=function(){return!1},rp.prototype.getConfig=function(){return{}},rp}(Mf.Serializable),Zeros=function(_d){function rp(){return _d!==null&&_d.apply(this,arguments)||this}return __extends$h(rp,_d),rp.prototype.apply=function(np,ap){return Pn(np,ap)},rp.className="Zeros",rp}(Initializer);Mf.registerClass(Zeros);var Ones=function(_d){function rp(){return _d!==null&&_d.apply(this,arguments)||this}return __extends$h(rp,_d),rp.prototype.apply=function(np,ap){return Bn(np,ap)},rp.className="Ones",rp}(Initializer);Mf.registerClass(Ones);var Constant=function(_d){function rp(np){var ap=_d.call(this)||this;if(typeof np!="object")throw new ValueError("Expected argument of type ConstantConfig but got "+np);if(np.value===void 0)throw new ValueError("config must have value set but got "+np);return ap.value=np.value,ap}return __extends$h(rp,_d),rp.prototype.apply=function(np,ap){var sp=this;return je(function(){return tc(An(sp.value),Bn(np,ap))})},rp.prototype.getConfig=function(){return{value:this.value}},rp.className="Constant",rp}(Initializer);Mf.registerClass(Constant);var RandomUniform=function(_d){function rp(np){var ap=_d.call(this)||this;return ap.DEFAULT_MINVAL=-.05,ap.DEFAULT_MAXVAL=.05,ap.minval=np.minval||ap.DEFAULT_MINVAL,ap.maxval=np.maxval||ap.DEFAULT_MAXVAL,ap.seed=np.seed,ap}return __extends$h(rp,_d),rp.prototype.apply=function(np,ap){return kr(np,this.minval,this.maxval,ap)},rp.prototype.getConfig=function(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}},rp.className="RandomUniform",rp}(Initializer);Mf.registerClass(RandomUniform);var RandomNormal=function(_d){function rp(np){var ap=_d.call(this)||this;return ap.DEFAULT_MEAN=0,ap.DEFAULT_STDDEV=.05,ap.mean=np.mean||ap.DEFAULT_MEAN,ap.stddev=np.stddev||ap.DEFAULT_STDDEV,ap.seed=np.seed,ap}return __extends$h(rp,_d),rp.prototype.apply=function(np,ap){if((ap=ap||"float32")!=="float32"&&ap!=="int32")throw new NotImplementedError("randomNormal does not support dType "+ap+".");return randomNormal$1(np,this.mean,this.stddev,ap,this.seed)},rp.prototype.getConfig=function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}},rp.className="RandomNormal",rp}(Initializer);Mf.registerClass(RandomNormal);var TruncatedNormal=function(_d){function rp(np){var ap=_d.call(this)||this;return ap.DEFAULT_MEAN=0,ap.DEFAULT_STDDEV=.05,ap.mean=np.mean||ap.DEFAULT_MEAN,ap.stddev=np.stddev||ap.DEFAULT_STDDEV,ap.seed=np.seed,ap}return __extends$h(rp,_d),rp.prototype.apply=function(np,ap){if((ap=ap||"float32")!=="float32"&&ap!=="int32")throw new NotImplementedError("truncatedNormal does not support dType "+ap+".");return Fr(np,this.mean,this.stddev,ap,this.seed)},rp.prototype.getConfig=function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}},rp.className="TruncatedNormal",rp}(Initializer);Mf.registerClass(TruncatedNormal);var Identity=function(_d){function rp(np){var ap=_d.call(this)||this;return ap.gain=np.gain!=null?np.gain:1,ap}return __extends$h(rp,_d),rp.prototype.apply=function(np,ap){var sp=this;return je(function(){if(np.length!==2||np[0]!==np[1])throw new ValueError("Identity matrix initializer can only be used for 2D square matrices.");return tc(sp.gain,vr(np[0]))})},rp.prototype.getConfig=function(){return{gain:this.gain}},rp.className="Identity",rp}(Initializer);function computeFans(_d,rp){var np,ap;if(rp===void 0&&(rp="channelsLast"),checkDataFormat(rp),_d.length===2)np=_d[0],ap=_d[1];else if([3,4,5].indexOf(_d.length)!==-1)if(rp==="channelsFirst"){var sp=arrayProd(_d,2);np=_d[1]*sp,ap=_d[0]*sp}else rp==="channelsLast"&&(sp=arrayProd(_d,0,_d.length-2),np=_d[_d.length-2]*sp,ap=_d[_d.length-1]*sp);else{var lp=arrayProd(_d);np=Math.sqrt(lp),ap=Math.sqrt(lp)}return[np,ap]}Mf.registerClass(Identity);var VarianceScaling=function(_d){function rp(np){var ap=_d.call(this)||this;if(np.scale<0)throw new ValueError("scale must be a positive float. Got: "+np.scale);return ap.scale=np.scale==null?1:np.scale,ap.mode=np.mode==null?"fanIn":np.mode,checkFanMode(ap.mode),ap.distribution=np.distribution==null?"normal":np.distribution,checkDistribution(ap.distribution),ap.seed=np.seed,ap}return __extends$h(rp,_d),rp.prototype.apply=function(np,ap){var sp=computeFans(np),lp=sp[0],up=sp[1],cp=this.scale;if(this.mode==="fanIn"?cp/=Math.max(1,lp):this.mode==="fanOut"?cp/=Math.max(1,up):cp/=Math.max(1,(lp+up)/2),this.distribution==="normal"){var dp=Math.sqrt(cp);if((ap=ap||"float32")!=="float32"&&ap!=="int32")throw new NotImplementedError(this.getClassName()+" does not support dType "+ap+".");return Fr(np,0,dp,ap,this.seed)}var fp=Math.sqrt(3*cp);return kr(np,-fp,fp,ap)},rp.prototype.getConfig=function(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}},rp.className="VarianceScaling",rp}(Initializer);Mf.registerClass(VarianceScaling);var GlorotUniform=function(_d){function rp(np){return _d.call(this,{scale:1,mode:"fanAvg",distribution:"uniform",seed:np==null?null:np.seed})||this}return __extends$h(rp,_d),rp.prototype.getClassName=function(){return VarianceScaling.className},rp.className="GlorotUniform",rp}(VarianceScaling);Mf.registerClass(GlorotUniform);var GlorotNormal=function(_d){function rp(np){return _d.call(this,{scale:1,mode:"fanAvg",distribution:"normal",seed:np==null?null:np.seed})||this}return __extends$h(rp,_d),rp.prototype.getClassName=function(){return VarianceScaling.className},rp.className="GlorotNormal",rp}(VarianceScaling);Mf.registerClass(GlorotNormal);var HeNormal=function(_d){function rp(np){return _d.call(this,{scale:2,mode:"fanIn",distribution:"normal",seed:np==null?null:np.seed})||this}return __extends$h(rp,_d),rp.prototype.getClassName=function(){return VarianceScaling.className},rp.className="HeNormal",rp}(VarianceScaling);Mf.registerClass(HeNormal);var HeUniform=function(_d){function rp(np){return _d.call(this,{scale:2,mode:"fanIn",distribution:"uniform",seed:np==null?null:np.seed})||this}return __extends$h(rp,_d),rp.prototype.getClassName=function(){return VarianceScaling.className},rp.className="HeUniform",rp}(VarianceScaling);Mf.registerClass(HeUniform);var LeCunNormal=function(_d){function rp(np){return _d.call(this,{scale:1,mode:"fanIn",distribution:"normal",seed:np==null?null:np.seed})||this}return __extends$h(rp,_d),rp.prototype.getClassName=function(){return VarianceScaling.className},rp.className="LeCunNormal",rp}(VarianceScaling);Mf.registerClass(LeCunNormal);var LeCunUniform=function(_d){function rp(np){return _d.call(this,{scale:1,mode:"fanIn",distribution:"uniform",seed:np==null?null:np.seed})||this}return __extends$h(rp,_d),rp.prototype.getClassName=function(){return VarianceScaling.className},rp.className="LeCunNormal",rp}(VarianceScaling);Mf.registerClass(LeCunUniform);var Orthogonal=function(_d){function rp(np){var ap=_d.call(this)||this;if(ap.DEFAULT_GAIN=1,ap.gain=np.gain==null?ap.DEFAULT_GAIN:np.gain,ap.seed=np.seed,ap.seed!=null)throw new NotImplementedError("Random seed is not implemented for Orthogonal Initializer yet.");return ap}return __extends$h(rp,_d),rp.prototype.apply=function(np,ap){var sp=this;return je(function(){if(np.length!==2)throw new NotImplementedError("The Orthogonal Initializer does not support non-2D shapes yet.");np[0]*np[1]>2e3&&console.warn("Orthogonal initializer is being called on a matrix with more than 2000 ("+np[0]*np[1]+") elements: Slowness may result.");var lp=randomNormal$1(np[0]>np[1]?[np[1],np[0]]:np,0,1,"float32"),up=sh.gramSchmidt(lp);return np[0]>np[1]&&(up=up.transpose()),tc(sp.gain,up)})},rp.prototype.getConfig=function(){return{gain:this.gain,seed:this.seed}},rp.className="Orthogonal",rp}(Initializer);Mf.registerClass(Orthogonal);var INITIALIZER_IDENTIFIER_REGISTRY_SYMBOL_MAP={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function deserializeInitializer(_d,rp){return rp===void 0&&(rp={}),deserializeKerasObject(_d,Mf.SerializationMap.getMap().classNameMap,rp,"initializer")}function serializeInitializer(_d){return serializeKerasObject(_d)}function getInitializer(_d){if(typeof _d=="string"){var rp=_d in INITIALIZER_IDENTIFIER_REGISTRY_SYMBOL_MAP?INITIALIZER_IDENTIFIER_REGISTRY_SYMBOL_MAP[_d]:_d;if(rp==="GlorotNormal")return new GlorotNormal;if(rp==="GlorotUniform")return new GlorotUniform;if(rp==="HeNormal")return new HeNormal;if(rp==="HeUniform")return new HeUniform;if(rp==="LeCunNormal")return new LeCunNormal;if(rp==="LeCunUniform")return new LeCunUniform;var np={};return np.className=rp,np.config={},deserializeInitializer(np)}return _d instanceof Initializer?_d:deserializeInitializer(_d)}function zeros$1(){return new Zeros}function ones$1(){return new Ones}function constant(_d){return new Constant(_d)}function randomUniform$1(_d){return new RandomUniform(_d)}function randomNormal$2(_d){return new RandomNormal(_d)}function truncatedNormal$1(_d){return new TruncatedNormal(_d)}function identity(_d){return new Identity(_d)}function varianceScaling(_d){return new VarianceScaling(_d)}function glorotUniform(_d){return new GlorotUniform(_d)}function glorotNormal(_d){return new GlorotNormal(_d)}function heNormal(_d){return new HeNormal(_d)}function heUniform(_d){return new HeUniform(_d)}function leCunNormal(_d){return new LeCunNormal(_d)}function leCunUniform(_d){return new LeCunUniform(_d)}function orthogonal(_d){return new Orthogonal(_d)}var exports_initializers=Object.freeze({zeros:zeros$1,ones:ones$1,constant,randomUniform:randomUniform$1,randomNormal:randomNormal$2,truncatedNormal:truncatedNormal$1,identity,varianceScaling,glorotUniform,glorotNormal,heNormal,heUniform,leCunNormal,leCunUniform,orthogonal}),_nextUniqueTensorId=0;function getNextUniqueTensorId(){return _nextUniqueTensorId++}var _uidPrefixes={};function getUid(_d){return _d===void 0&&(_d=""),_d in _uidPrefixes||(_uidPrefixes[_d]=0),_uidPrefixes[_d]+=1,_d+_uidPrefixes[_d].toString()}function isArrayOfShapes(_d){return Array.isArray(_d)&&Array.isArray(_d[0])}function normalizeShapeList(_d){return _d.length===0?[]:Array.isArray(_d[0])?_d:[_d]}function getExactlyOneTensor(_d){var rp;if(Array.isArray(_d)){if(_d.length!==1)throw new ValueError("Expected Tensor length to be 1; got "+_d.length);rp=_d[0]}else rp=_d;return rp}function getExactlyOneShape(_d){if(Array.isArray(_d)&&Array.isArray(_d[0])){if(_d.length===1)return(_d=_d)[0];throw new ValueError("Expected exactly 1 Shape; got "+_d.length)}return _d}function countParamsInWeights(_d){for(var rp=0,np=0,ap=_d;np<ap.length;np++){var sp=ap[np];sp.shape.length===0?rp+=1:rp+=sp.shape.reduce(function(lp,up){return lp*up})}return rp}var DEFAULT_VARIABLE_NAME_PREFIX="Variable",LayerVariable=function(){function _d(rp,np,ap,sp,lp){np===void 0&&(np="float32"),ap===void 0&&(ap=DEFAULT_VARIABLE_NAME_PREFIX),sp===void 0&&(sp=!0),lp===void 0&&(lp=null),this.dtype=np??"float32",this.shape=rp.shape,this.id=getNextUniqueTensorId(),ap=ap??DEFAULT_VARIABLE_NAME_PREFIX,this.originalName=getScopedTensorName(ap),this.name=getUniqueTensorName(this.originalName),this.trainable_=sp,this.constraint=lp,this.val=Mn(rp,this.trainable_,this.name,this.dtype)}return _d.prototype.read=function(){return this.assertNotDisposed(),this.val},_d.prototype.write=function(rp){return this.assertNotDisposed(),checkShapesMatch(this.val,rp),this.val.id!==rp.id&&(this.val.assign(rp),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this},_d.prototype.dispose=function(){this.assertNotDisposed(),this.val.dispose()},_d.prototype.assertNotDisposed=function(){if(this.val.isDisposed)throw new Error("LayersVariable "+this.name+" is already disposed.")},Object.defineProperty(_d.prototype,"trainable",{get:function(){return this.trainable_},set:function(rp){this.trainable_=rp,this.val.trainable=rp},enumerable:!0,configurable:!0}),_d}();function checkShapesMatch(_d,rp){if(_d.shape.toString()!==rp.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(_d.shape)+" vs. "+JSON.stringify(rp.shape))}function batchGetValue(_d){return _d.map(function(rp){return rp.read()})}function batchSetValue(_d){_d.forEach(function(rp){rp[0].write(rp[1])})}var InputSpec=function(){return function(_d){this.dtype=_d.dtype,this.shape=_d.shape,_d.shape!=null?this.ndim=_d.shape.length:this.ndim=_d.ndim,this.maxNDim=_d.maxNDim,this.minNDim=_d.minNDim,this.axes=_d.axes||{}}}(),SymbolicTensor=function(){return function(_d,rp,np,ap,sp,lp,up){this.dtype=_d,this.shape=rp,this.sourceLayer=np,this.inputs=ap,this.callArgs=sp,this.outputTensorIndex=up,this.id=getNextUniqueTensorId(),lp!=null&&(this.originalName=getScopedTensorName(lp),this.name=getUniqueTensorName(this.originalName)),this.rank=rp.length}}(),_nextNodeID=0,Node=function(){function _d(rp,np){this.callArgs=np,this.id=_nextNodeID++,this.outboundLayer=rp.outboundLayer,this.inboundLayers=rp.inboundLayers,this.nodeIndices=rp.nodeIndices,this.tensorIndices=rp.tensorIndices,this.inputTensors=rp.inputTensors,this.outputTensors=rp.outputTensors,this.inputMasks=rp.inputMasks,this.outputMasks=rp.outputMasks,this.inputShapes=rp.inputShapes,this.outputShapes=rp.outputShapes;for(var ap=0,sp=rp.inboundLayers;ap<sp.length;ap++){var lp=sp[ap];lp!=null&&lp.outboundNodes.push(this)}rp.outboundLayer.inboundNodes.push(this)}return _d.prototype.getConfig=function(){for(var rp=[],np=0,ap=this.inboundLayers;np<ap.length;np++){var sp=ap[np];sp!=null?rp.push(sp.name):rp.push(null)}return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:rp,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}},_d}(),_nextLayerID=0,Layer=function(_d){function rp(np){var ap=_d.call(this)||this;ap._callHook=null,ap._addedWeightNames=[],ap._stateful=!1,ap.id=_nextLayerID++,ap.activityRegularizer=null,ap.inputSpec=null,ap.supportsMasking=!1,ap._trainableWeights=[],ap._nonTrainableWeights=[],ap._losses=[],ap._updates=[],ap._built=!1,ap.inboundNodes=[],ap.outboundNodes=[];var sp=np.name;if(!sp){var lp=ap.getClassName();sp=toSnakeCase(lp)+"_"+getUid(lp)}if(ap.name=sp,ap.trainable_=np.trainable==null||np.trainable,np.inputShape!=null||np.batchInputShape!=null){var up=void 0;if(np.batchInputShape!=null)up=np.batchInputShape;else if(np.inputShape!=null){var cp=null;np.batchSize!=null&&(cp=np.batchSize),up=[cp].concat(np.inputShape)}ap.batchInputShape=up;var dp=np.dtype;dp==null&&(dp=np.inputDType),dp==null&&(dp="float32"),ap.dtype=dp}return np.weights!=null?ap.initialWeights=np.weights:ap.initialWeights=null,ap._refCount=null,ap.fastWeightInitDuringBuild=!1,ap}return __extends$h(rp,_d),rp.nodeKey=function(np,ap){return np.name+"_ib-"+ap.toString()},rp.prototype.getNodeAtIndex=function(np,ap){if(this.inboundNodes.length===0)throw new RuntimeError("The layer has never been called and thus has no defined "+ap+".");if(this.inboundNodes.length<=np)throw new ValueError("Asked to get "+ap+" at node "+np+", but the layer has only "+this.inboundNodes.length+" inbound nodes.");return this.inboundNodes[np]},rp.prototype.getInputAt=function(np){return singletonOrArray(this.getNodeAtIndex(np,"input").inputTensors)},rp.prototype.getOutputAt=function(np){return singletonOrArray(this.getNodeAtIndex(np,"output").outputTensors)},Object.defineProperty(rp.prototype,"input",{get:function(){if(this.inboundNodes.length>1)throw new AttributeError("Layer "+this.name+' has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use `getInputAt(nodeIndex)` instead.');if(this.inboundNodes.length===0)throw new AttributeError("Layer "+this.name+" is not connected, no input to return.");return singletonOrArray(this.getNodeAtIndex(0,"input").inputTensors)},enumerable:!0,configurable:!0}),Object.defineProperty(rp.prototype,"output",{get:function(){if(this.inboundNodes.length===0)throw new AttributeError("Layer "+this.name+" has no inbound nodes.");if(this.inboundNodes.length>1)throw new AttributeError("Layer "+this.name+' has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use `getOutputAt(nodeIndex)` instead.');return singletonOrArray(this.getNodeAtIndex(0,"output").outputTensors)},enumerable:!0,configurable:!0}),Object.defineProperty(rp.prototype,"losses",{get:function(){return this._losses},enumerable:!0,configurable:!0}),rp.prototype.calculateLosses=function(){return this.losses.map(function(np){return np()})},Object.defineProperty(rp.prototype,"updates",{get:function(){return this._updates},enumerable:!0,configurable:!0}),Object.defineProperty(rp.prototype,"built",{get:function(){return this._built},set:function(np){this._built=np},enumerable:!0,configurable:!0}),Object.defineProperty(rp.prototype,"trainable",{get:function(){return this.trainable_},set:function(np){this._trainableWeights.forEach(function(ap){return ap.trainable=np}),this.trainable_=np},enumerable:!0,configurable:!0}),Object.defineProperty(rp.prototype,"trainableWeights",{get:function(){return this.trainable_?this._trainableWeights.filter(function(np){return np.trainable}):[]},set:function(np){this._trainableWeights=np},enumerable:!0,configurable:!0}),Object.defineProperty(rp.prototype,"nonTrainableWeights",{get:function(){return this.trainable?this._trainableWeights.filter(function(np){return!np.trainable}).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)},set:function(np){this._nonTrainableWeights=np},enumerable:!0,configurable:!0}),Object.defineProperty(rp.prototype,"weights",{get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)},enumerable:!0,configurable:!0}),Object.defineProperty(rp.prototype,"stateful",{get:function(){return this._stateful},enumerable:!0,configurable:!0}),rp.prototype.resetStates=function(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")},rp.prototype.assertInputCompatibility=function(np){if(np=toList(np),this.inputSpec!=null&&this.inputSpec.length!==0){var ap=toList(this.inputSpec);if(np.length!==ap.length)throw new ValueError("Layer "+this.name+" expects "+ap.length+" inputs, but it received "+np.length+" input tensors. Input received: "+np);for(var sp=0;sp<np.length;sp++){var lp=np[sp],up=ap[sp];if(up!=null){var cp=lp.rank;if(up.ndim!=null&&cp!==up.ndim)throw new ValueError("Input "+sp+" is incompatible with layer "+this.name+": expected ndim="+up.ndim+", found ndim="+cp);if(up.maxNDim!=null&&cp>up.maxNDim)throw new ValueError("Input "+sp+" is incompatible with layer "+this.name+": expected max_ndim="+up.maxNDim+", found ndim="+cp);if(up.minNDim!=null&&cp<up.minNDim)throw new ValueError("Input "+sp+" is incompatible with layer "+this.name+": expected min_ndim="+up.minNDim+", found ndim="+cp+".");if(up.dtype!=null&&lp.dtype!==up.dtype)throw new ValueError("Input "+sp+" is incompatible with layer "+this.name+" : expected dtype="+up.dtype+", found dtype="+lp.dtype+".");if(up.axes){var dp=lp.shape;for(var fp in up.axes){var pp=Number(fp),hp=up.axes[fp],mp=pp>=0?dp[pp]:dp[dp.length+pp];if(hp!=null&&[hp,null].indexOf(mp)===-1)throw new ValueError("Input "+sp+" is incompatible with layer "+this.name+": expected axis "+pp+" of input shape to have value "+hp+" but got shape "+dp+".")}}if(up.shape!=null)for(var gp=0;gp<up.shape.length;++gp){var vp=up.shape[gp],xp=lp.shape[gp];if(vp!=null&&xp!=null&&vp!==xp)throw new ValueError("Input "+sp+" is incompatible with layer "+this.name+": expected shape="+up.shape+", found shape="+lp.shape+".")}}}}},rp.prototype.call=function(np,ap){return np},rp.prototype.invokeCallHook=function(np,ap){this._callHook!=null&&this._callHook(np,ap)},rp.prototype.setCallHook=function(np){this._callHook=np},rp.prototype.clearCallHook=function(){this._callHook=null},rp.prototype.apply=function(np,ap){var sp=this;ap=ap||{},this.assertNotDisposed();for(var lp=toList(np),up=!0,cp=0,dp=lp;cp<dp.length;cp++)if(!(dp[cp]instanceof SymbolicTensor)){up=!1;break}for(var fp=!0,pp=0,hp=lp;pp<hp.length;pp++)if(hp[pp]instanceof SymbolicTensor){fp=!1;break}if(up===fp)throw new ValueError("Arguments to apply() must be all SymbolicTensors or all Tensors");return nameScope(this.name,function(){if(!sp.built){sp.assertInputCompatibility(np);for(var mp=[],gp=0,vp=toList(np);gp<vp.length;gp++){var xp=vp[gp];mp.push(xp.shape)}sp.build(singletonOrArray(mp)),sp.built=!0,sp.initialWeights&&sp.setWeights(sp.initialWeights),sp._refCount===null&&fp&&(sp._refCount=1)}if(sp.assertInputCompatibility(np),fp){for(var Sp=[],yp=0,bp=toList(Rp=sp.call(np,ap));yp<bp.length;yp++){var Ep=bp[yp];lp.indexOf(Ep)!==-1&&(Ep=Ep.clone()),Sp.push(Ep)}if(Rp=singletonOrArray(Sp),sp.activityRegularizer!=null)throw new NotImplementedError("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return Rp}var wp=collectInputShape(np),_p=sp.computeOutputShape(wp),Rp=void 0,$p=guessOutputDType(np);if(sp.warnOnIncompatibleInputShape(Array.isArray(np)?wp[0]:wp),Rp=_p!=null&&_p.length>0&&Array.isArray(_p[0])?_p.map(function(Cp,Ap){return new SymbolicTensor($p,Cp,sp,toList(np),ap,sp.name,Ap)}):new SymbolicTensor($p,_p,sp,toList(np),ap,sp.name),sp.addInboundNode(np,Rp,null,null,wp,_p,ap),sp._refCount++,sp.activityRegularizer!=null)throw new NotImplementedError("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return Rp})},rp.prototype.warnOnIncompatibleInputShape=function(np){if(this.batchInputShape!=null)if(np.length!==this.batchInputShape.length)console.warn("The rank of the input tensor provided (shape: "+JSON.stringify(np)+") does not match that of the batchInputShape ("+JSON.stringify(this.batchInputShape)+") of the layer "+this.name);else{var ap=!1;this.batchInputShape.forEach(function(sp,lp){sp!=null&&np[lp]!=null&&np[lp]!==sp&&(ap=!0)}),ap&&console.warn("The shape of the input tensor ("+JSON.stringify(np)+") does not match the expectation of layer "+this.name+": "+JSON.stringify(this.batchInputShape))}},Object.defineProperty(rp.prototype,"outputShape",{get:function(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new AttributeError("The layer "+this.name+" has never been called and thus has no defined output shape.");for(var np=[],ap=0,sp=this.inboundNodes;ap<sp.length;ap++){var lp=sp[ap],up=JSON.stringify(lp.outputShapes);np.indexOf(up)===-1&&np.push(up)}if(np.length===1){var cp=this.inboundNodes[0].outputShapes;return Array.isArray(cp)&&Array.isArray(cp[0])&&cp.length===1?cp[0]:cp}throw new AttributeError("The layer "+this.name+' has multiple inbound nodes with different output shapes. Hence the notion of "outut shape" is ill-defined for the layer.')},enumerable:!0,configurable:!0}),rp.prototype.countParams=function(){if(!this.built)throw new RuntimeError("You tried to call countParams() on "+this.name+", but the layer is not built yet. Build it first by calling build(batchInputShape).");return countParamsInWeights(this.weights)},rp.prototype.build=function(np){this.built=!0},rp.prototype.getWeights=function(np){return np===void 0&&(np=!1),batchGetValue(np?this.trainableWeights:this.weights)},rp.prototype.setWeights=function(np){var ap=this;je(function(){var sp=ap.weights;if(sp.length!==np.length)throw new ValueError('You called setWeights(weights) on layer "'+ap.name+'" with a weight list of length '+np.length+", but the layer was expecting "+sp.length+" weights. Provided weights: "+np+"...");if(sp.length!==0){for(var lp=[],up=batchGetValue(sp),cp=0;cp<up.length;++cp){var dp=up[cp],fp=sp[cp],pp=np[cp];if(!tt.arraysEqual(dp.shape,pp.shape))throw new ValueError("Layer weight shape "+dp.shape+" not compatible with provided weight shape "+pp.shape);lp.push([fp,pp])}batchSetValue(lp)}})},rp.prototype.addWeight=function(np,ap,sp,lp,up,cp,dp){if(this._addedWeightNames.indexOf(np)!==-1)throw new ValueError("Duplicate weight name "+np+" for layer "+this.name);this._addedWeightNames.push(np),sp==null&&(sp="float32"),this.fastWeightInitDuringBuild&&(lp=getInitializer("zeros"));var fp=lp.apply(ap,sp),pp=new LayerVariable(fp,sp,np,cp,dp);return fp.dispose(),up!=null&&this.addLoss(function(){return up.apply(pp.read())}),cp==null&&(cp=!0),cp?this._trainableWeights.push(pp):this._nonTrainableWeights.push(pp),pp},rp.prototype.setFastWeightInitDuringBuild=function(np){this.fastWeightInitDuringBuild=np},rp.prototype.addLoss=function(np){var ap;np==null||Array.isArray(np)&&np.length===0||(np=toList(np),this._losses!==void 0&&this._losses!==null&&(ap=this.losses).push.apply(ap,np))},rp.prototype.computeOutputShape=function(np){return np},rp.prototype.computeMask=function(np,ap){var sp=this;if(!this.supportsMasking){if(ap!=null){if(!Array.isArray(ap))throw new TypeError("Layer "+this.name+" does not support masking, but was passed an inputMask.");ap.forEach(function(lp){if(lp!=null)throw new TypeError("Layer "+sp.name+" does not support masking, but was passed an inputMask.")})}return null}return ap},rp.prototype.addInboundNode=function(np,ap,sp,lp,up,cp,dp){dp===void 0&&(dp=null);var fp=toList(np);ap=toList(ap),sp=toList(sp),lp=toList(lp),up=normalizeShapeList(up),cp=normalizeShapeList(cp);for(var pp=[],hp=[],mp=[],gp=0,vp=fp;gp<vp.length;gp++){var xp=vp[gp];pp.push(xp.sourceLayer),hp.push(xp.nodeIndex),mp.push(xp.tensorIndex)}new Node({outboundLayer:this,inboundLayers:pp,nodeIndices:hp,tensorIndices:mp,inputTensors:fp,outputTensors:ap,inputMasks:sp,outputMasks:lp,inputShapes:up,outputShapes:cp},dp);for(var Sp=0;Sp<ap.length;Sp++)ap[Sp].sourceLayer=this,ap[Sp].nodeIndex=this.inboundNodes.length-1,ap[Sp].tensorIndex=Sp},rp.prototype.getConfig=function(){var np={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(np.batchInputShape=this.batchInputShape),this.dtype!=null&&(np.dtype=this.dtype),np},rp.prototype.disposeWeights=function(){return this.weights.forEach(function(np){return np.dispose()}),this.weights.length},rp.prototype.assertNotDisposed=function(){if(this._refCount===0)throw new Error("Layer '"+this.name+"' is already disposed.")},rp.prototype.dispose=function(){if(!this.built)throw new Error("Cannot dispose Layer "+this.name+" because it has not been built yet.");if(this._refCount===null)throw new Error("Cannot dispose Layer "+this.name+" because it has not been used yet.");this.assertNotDisposed();var np=0;return--this._refCount==0&&(np=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:np}},rp}(Mf.Serializable);function collectInputShape(_d){for(var rp=[],np=0,ap=_d=toList(_d);np<ap.length;np++){var sp=ap[np];rp.push(sp.shape)}return singletonOrArray(rp)}function guessOutputDType(_d){return"float32"}function getSourceInputs(_d,rp,np){if((rp==null||np!=null&&np>0)&&(rp=_d.sourceLayer,np=_d.nodeIndex),rp.inboundNodes.length===0)return[_d];var ap=rp.inboundNodes[np];if(ap.inboundLayers.length===0)return ap.inputTensors;for(var sp=[],lp=0;lp<ap.inboundLayers.length;lp++)for(var up=0,cp=getSourceInputs(ap.inputTensors[lp],ap.inboundLayers[lp],ap.nodeIndices[lp]);up<cp.length;up++){var dp=cp[up];sp.indexOf(dp)===-1&&sp.push(dp)}return sp}var ModelLoggingVerbosity,InputLayer=function(_d){function rp(np){var ap=_d.call(this,{dtype:np.dtype,name:np.name!=null?np.name:getUid("input").toString()})||this;if(np.batchSize==null&&(np.batchSize=null),np.sparse==null&&(np.sparse=!1),ap.trainable=!1,ap.built=!0,ap.sparse=np.sparse,np.inputShape!=null&&np.batchInputShape!=null)throw new ValueError("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");var sp=np.batchInputShape;if(sp==null){if(np.inputShape==null)throw new ValueError("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");sp=[np.batchSize].concat(np.inputShape)}else if(np.batchSize!=null)throw new ValueError("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");var lp=np.dtype||"float32";ap.batchInputShape=sp,ap.dtype=lp,ap.inputSpec=[{shape:sp}];var up=new SymbolicTensor(ap.dtype,ap.batchInputShape,ap,[],{},ap.name);return up.nodeIndex=0,up.tensorIndex=0,new Node({outboundLayer:ap,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[up],outputTensors:[up],inputMasks:[null],outputMasks:[null],inputShapes:[sp],outputShapes:[sp]}),ap}return __extends$h(rp,_d),rp.prototype.apply=function(np,ap){throw new ValueError("Cannot pass any input to an InputLayer's apply() method. InputLayer name: "+this.name)},rp.prototype.dispose=function(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}},rp.prototype.getConfig=function(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}},rp.className="InputLayer",rp}(Layer);function Input(_d){if(_d.batchShape==null&&_d.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(_d.batchShape!=null&&_d.shape!=null)throw new ValueError("Please provide either a `shape` or `batchShape` argument to Input, but not both.");var rp=_d.batchShape;_d.shape!=null&&rp==null&&(rp=[null].concat(_d.shape));var np=_d.dtype;return np==null&&(np="float32"),new InputLayer({batchInputShape:rp,name:_d.name,dtype:np,sparse:_d.sparse}).inboundNodes[0].outputTensors[0]}function resolveScalarsInLogs(_d){return __awaiter$8(this,void 0,void 0,function(){var rp,np,ap,sp,lp,up,cp,dp;return __generator$8(this,function(fp){switch(fp.label){case 0:if(_d==null)return[2];for(sp in rp=[],np=[],ap=[],_d)typeof(lp=_d[sp])!="number"&&(up=lp,rp.push(up.data()),np.push(sp),ap.push(up));return rp.length>0?[4,Promise.all(rp)]:[3,2];case 1:for(cp=fp.sent(),dp=0;dp<cp.length;++dp)_d[np[dp]]=cp[dp][0];Xe(ap),fp.label=2;case 2:return[2]}})})}function disposeTensorsInLogs(_d){if(_d!=null)for(var rp in _d){var np=_d[rp];typeof np!="number"&&np.dispose()}}Mf.registerClass(InputLayer),function(_d){_d[_d.SILENT=0]="SILENT",_d[_d.VERBOSE=1]="VERBOSE"}(ModelLoggingVerbosity||(ModelLoggingVerbosity={}));var DEFAULT_YIELD_EVERY_MS=125,BaseCallback=function(){function _d(){this.validationData=null}return _d.prototype.setParams=function(rp){this.params=rp},_d.prototype.onEpochBegin=function(rp,np){return __awaiter$8(this,void 0,void 0,function(){return __generator$8(this,function(ap){return[2]})})},_d.prototype.onEpochEnd=function(rp,np){return __awaiter$8(this,void 0,void 0,function(){return __generator$8(this,function(ap){return[2]})})},_d.prototype.onBatchBegin=function(rp,np){return __awaiter$8(this,void 0,void 0,function(){return __generator$8(this,function(ap){return[2]})})},_d.prototype.onBatchEnd=function(rp,np){return __awaiter$8(this,void 0,void 0,function(){return __generator$8(this,function(ap){return[2]})})},_d.prototype.onTrainBegin=function(rp){return __awaiter$8(this,void 0,void 0,function(){return __generator$8(this,function(np){return[2]})})},_d.prototype.onTrainEnd=function(rp){return __awaiter$8(this,void 0,void 0,function(){return __generator$8(this,function(np){return[2]})})},_d.prototype.setModel=function(rp){},_d}(),CallbackList=function(){function _d(rp,np){np===void 0&&(np=10),rp==null&&(rp=[]),this.callbacks=rp,this.queueLength=np}return _d.prototype.append=function(rp){this.callbacks.push(rp)},_d.prototype.setParams=function(rp){for(var np=0,ap=this.callbacks;np<ap.length;np++)ap[np].setParams(rp)},_d.prototype.setModel=function(rp){for(var np=0,ap=this.callbacks;np<ap.length;np++)ap[np].setModel(rp)},_d.prototype.onEpochBegin=function(rp,np){return __awaiter$8(this,void 0,void 0,function(){var ap,sp;return __generator$8(this,function(lp){switch(lp.label){case 0:np==null&&(np={}),ap=0,sp=this.callbacks,lp.label=1;case 1:return ap<sp.length?[4,sp[ap].onEpochBegin(rp,np)]:[3,4];case 2:lp.sent(),lp.label=3;case 3:return ap++,[3,1];case 4:return[2]}})})},_d.prototype.onEpochEnd=function(rp,np){return __awaiter$8(this,void 0,void 0,function(){var ap,sp;return __generator$8(this,function(lp){switch(lp.label){case 0:np==null&&(np={}),ap=0,sp=this.callbacks,lp.label=1;case 1:return ap<sp.length?[4,sp[ap].onEpochEnd(rp,np)]:[3,4];case 2:lp.sent(),lp.label=3;case 3:return ap++,[3,1];case 4:return[2]}})})},_d.prototype.onBatchBegin=function(rp,np){return __awaiter$8(this,void 0,void 0,function(){var ap,sp;return __generator$8(this,function(lp){switch(lp.label){case 0:np==null&&(np={}),ap=0,sp=this.callbacks,lp.label=1;case 1:return ap<sp.length?[4,sp[ap].onBatchBegin(rp,np)]:[3,4];case 2:lp.sent(),lp.label=3;case 3:return ap++,[3,1];case 4:return[2]}})})},_d.prototype.onBatchEnd=function(rp,np){return __awaiter$8(this,void 0,void 0,function(){var ap,sp;return __generator$8(this,function(lp){switch(lp.label){case 0:np==null&&(np={}),ap=0,sp=this.callbacks,lp.label=1;case 1:return ap<sp.length?[4,sp[ap].onBatchEnd(rp,np)]:[3,4];case 2:lp.sent(),lp.label=3;case 3:return ap++,[3,1];case 4:return[2]}})})},_d.prototype.onTrainBegin=function(rp){return __awaiter$8(this,void 0,void 0,function(){var np,ap;return __generator$8(this,function(sp){switch(sp.label){case 0:rp==null&&(rp={}),np=0,ap=this.callbacks,sp.label=1;case 1:return np<ap.length?[4,ap[np].onTrainBegin(rp)]:[3,4];case 2:sp.sent(),sp.label=3;case 3:return np++,[3,1];case 4:return[2]}})})},_d.prototype.onTrainEnd=function(rp){return __awaiter$8(this,void 0,void 0,function(){var np,ap;return __generator$8(this,function(sp){switch(sp.label){case 0:rp==null&&(rp={}),np=0,ap=this.callbacks,sp.label=1;case 1:return np<ap.length?[4,ap[np].onTrainEnd(rp)]:[3,4];case 2:sp.sent(),sp.label=3;case 3:return np++,[3,1];case 4:return[2]}})})},_d}(),BaseLogger=function(_d){function rp(){return _d.call(this)||this}return __extends$h(rp,_d),rp.prototype.onEpochBegin=function(np){return __awaiter$8(this,void 0,void 0,function(){return __generator$8(this,function(ap){return this.seen=0,this.totals={},[2]})})},rp.prototype.onBatchEnd=function(np,ap){return __awaiter$8(this,void 0,void 0,function(){var sp,lp,up,cp,dp=this;return __generator$8(this,function(fp){for(cp in ap==null&&(ap={}),sp=ap.size==null?0:ap.size,this.seen+=sp,lp=function(pp){var hp=ap[pp];if(typeof hp=="number")up.totals.hasOwnProperty(pp)||(up.totals[pp]=0),up.totals[pp]=up.totals[pp]+hp*sp;else{var mp=void 0;pp in up.totals?mp=up.totals[pp]:up.totals[pp]=0;var gp=je(function(){return Vs(dp.totals[pp],tc(hp,sp))});up.totals[pp]=gp,mp!=null&&mp.dispose()}},up=this,ap)lp(cp);return[2]})})},rp.prototype.onEpochEnd=function(np,ap){return __awaiter$8(this,void 0,void 0,function(){var sp,lp,up,cp,dp,fp=this;return __generator$8(this,function(pp){if(ap!=null)for(sp=function(hp){if(lp.totals[hp]==null)return"continue";typeof lp.totals[hp]=="number"?ap[hp]=lp.totals[hp]/lp.seen:je(function(){var mp=tc(qs(1,fp.seen),fp.totals[hp]);ap[hp]=mp,fp.totals[hp].dispose(),$e(ap[hp])})},lp=this,up=0,cp=this.params.metrics;up<cp.length;up++)dp=cp[up],sp(dp);return[2]})})},rp}(BaseCallback),History=function(_d){function rp(){return _d!==null&&_d.apply(this,arguments)||this}return __extends$h(rp,_d),rp.prototype.onTrainBegin=function(np){return __awaiter$8(this,void 0,void 0,function(){return __generator$8(this,function(ap){return this.epoch=[],this.history={},[2]})})},rp.prototype.onEpochEnd=function(np,ap){return __awaiter$8(this,void 0,void 0,function(){var sp;return __generator$8(this,function(lp){for(sp in ap==null&&(ap={}),this.epoch.push(np),ap)this.history[sp]==null&&(this.history[sp]=[]),this.history[sp].push(ap[sp]);return[2]})})},rp.prototype.syncData=function(){return __awaiter$8(this,void 0,void 0,function(){var np,ap,sp,lp,up,cp,dp,fp,pp;return __generator$8(this,function(hp){switch(hp.label){case 0:for(lp in np=[],ap=[],sp=[],this.history)for(up=this.history[lp],cp=0;cp<up.length;++cp)typeof up[cp]!="number"&&(dp=up[cp],np.push(dp.data()),ap.push(lp),sp.push(cp));return[4,Promise.all(np)];case 1:for(fp=hp.sent(),pp=0;pp<fp.length;++pp)this.history[ap[pp]][sp[pp]].dispose(),this.history[ap[pp]][sp[pp]]=fp[pp][0];return[2]}})})},rp}(BaseCallback),CustomCallback=function(_d){function rp(np,ap){var sp=_d.call(this)||this;if(sp.currentEpoch=0,sp.yieldEvery=ap||"auto",sp.yieldEvery==="auto"&&(sp.yieldEvery=DEFAULT_YIELD_EVERY_MS),sp.yieldEvery==="never"&&np.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");return tt.isNumber(sp.yieldEvery)&&(sp.maybeWait=debounce(sp.maybeWait.bind(sp),sp.yieldEvery)),sp.trainBegin=np.onTrainBegin,sp.trainEnd=np.onTrainEnd,sp.epochBegin=np.onEpochBegin,sp.epochEnd=np.onEpochEnd,sp.batchBegin=np.onBatchBegin,sp.batchEnd=np.onBatchEnd,sp.yield=np.onYield,sp}return __extends$h(rp,_d),rp.prototype.maybeWait=function(np,ap,sp){return __awaiter$8(this,void 0,void 0,function(){var lp;return __generator$8(this,function(up){switch(up.label){case 0:return lp=[],this.yield==null?[3,2]:[4,resolveScalarsInLogs(sp)];case 1:up.sent(),lp.push(this.yield(np,ap,sp)),up.label=2;case 2:return lp.push(ep()),[4,Promise.all(lp)];case 3:return up.sent(),[2]}})})},rp.prototype.onEpochBegin=function(np,ap){return __awaiter$8(this,void 0,void 0,function(){return __generator$8(this,function(sp){switch(sp.label){case 0:return this.currentEpoch=np,this.epochBegin==null?[3,3]:[4,resolveScalarsInLogs(ap)];case 1:return sp.sent(),[4,this.epochBegin(np,ap)];case 2:sp.sent(),sp.label=3;case 3:return[2]}})})},rp.prototype.onEpochEnd=function(np,ap){return __awaiter$8(this,void 0,void 0,function(){var sp;return __generator$8(this,function(lp){switch(lp.label){case 0:return sp=[],this.epochEnd==null?[3,2]:[4,resolveScalarsInLogs(ap)];case 1:lp.sent(),sp.push(this.epochEnd(np,ap)),lp.label=2;case 2:return this.yieldEvery==="epoch"&&sp.push(ep()),[4,Promise.all(sp)];case 3:return lp.sent(),[2]}})})},rp.prototype.onBatchBegin=function(np,ap){return __awaiter$8(this,void 0,void 0,function(){return __generator$8(this,function(sp){switch(sp.label){case 0:return this.batchBegin==null?[3,3]:[4,resolveScalarsInLogs(ap)];case 1:return sp.sent(),[4,this.batchBegin(np,ap)];case 2:sp.sent(),sp.label=3;case 3:return[2]}})})},rp.prototype.onBatchEnd=function(np,ap){return __awaiter$8(this,void 0,void 0,function(){var sp;return __generator$8(this,function(lp){switch(lp.label){case 0:return sp=[],this.batchEnd==null?[3,2]:[4,resolveScalarsInLogs(ap)];case 1:lp.sent(),sp.push(this.batchEnd(np,ap)),lp.label=2;case 2:return this.yieldEvery==="batch"?sp.push(ep()):tt.isNumber(this.yieldEvery)&&sp.push(this.maybeWait(this.currentEpoch,np,ap)),[4,Promise.all(sp)];case 3:return lp.sent(),[2]}})})},rp.prototype.onTrainBegin=function(np){return __awaiter$8(this,void 0,void 0,function(){return __generator$8(this,function(ap){switch(ap.label){case 0:return this.trainBegin==null?[3,3]:[4,resolveScalarsInLogs(np)];case 1:return ap.sent(),[4,this.trainBegin(np)];case 2:ap.sent(),ap.label=3;case 3:return[2]}})})},rp.prototype.onTrainEnd=function(np){return __awaiter$8(this,void 0,void 0,function(){return __generator$8(this,function(ap){switch(ap.label){case 0:return this.trainEnd==null?[3,3]:[4,resolveScalarsInLogs(np)];case 1:return ap.sent(),[4,this.trainEnd(np)];case 2:ap.sent(),ap.label=3;case 3:return[2]}})})},rp}(BaseCallback);function standardizeCallbacks(_d,rp){return _d==null&&(_d={}),_d instanceof BaseCallback?[_d]:Array.isArray(_d)&&_d[0]instanceof BaseCallback?_d:toList(_d).map(function(np){return new CustomCallback(np,rp)})}var CallbackConstructorRegistry=function(){function _d(){}return _d.registerCallbackConstructor=function(rp,np){tt.assert(rp>=0&&Number.isInteger(rp),function(){return"Verbosity level is expected to be an integer >= 0, but got "+rp}),_d.checkForDuplicate(np),_d.constructors[rp]==null&&(_d.constructors[rp]=[]),_d.constructors[rp].push(np)},_d.checkForDuplicate=function(rp){for(var np in _d.constructors)_d.constructors[+np].forEach(function(ap){if(ap===rp)throw new ValueError("Duplicate callback constructor.")})},_d.clear=function(){_d.constructors={}},_d.createCallbacks=function(rp){var np=[];for(var ap in _d.constructors){var sp=+ap;rp>=sp&&np.push.apply(np,_d.constructors[sp])}return np.map(function(lp){return new lp})},_d.constructors={},_d}();function configureCallbacks(_d,rp,np,ap,sp,lp,up,cp,dp){var fp=new History,pp=[new BaseLogger].concat(CallbackConstructorRegistry.createCallbacks(rp));_d!=null&&pp.push.apply(pp,_d),pp.push(fp);var hp=new CallbackList(pp);return hp.setParams({epochs:np,initialEpoch:ap,samples:sp,steps:lp,batchSize:up,verbose:rp,doValidation:cp,metrics:dp}),{callbackList:hp,history:fp}}function deserialize(_d,rp,np){return rp===void 0&&(rp={}),np===void 0&&(np=!1),deserializeKerasObject(_d,Mf.SerializationMap.getMap().classNameMap,rp,"layer",np)}function l2Normalize(_d,rp){return je(function(){_d.dtype!=="float32"&&(_d=_d.asType("float32"));var np=vl(square(_d),rp,!0),ap=Ln(np.shape,epsilon()),sp=gs(Xs(np,ap));return qs(_d,sp)})}function meanSquaredError(_d,rp){return je(function(){return fl(square(ic(rp,_d)),-1)})}function meanAbsoluteError(_d,rp){return je(function(){return fl(Vu(ic(rp,_d)),-1)})}function meanAbsolutePercentageError(_d,rp){return je(function(){var np=ic(_d,rp),ap=$u(Vu(_d),epsilon(),Number.MAX_VALUE),sp=Vu(qs(np,ap));return tc(100,fl(sp,-1))})}function meanSquaredLogarithmicError(_d,rp){return je(function(){var np=$u(rp,epsilon(),Number.MAX_VALUE),ap=ns(Vs(1,np)),sp=$u(_d,epsilon(),Number.MAX_VALUE),lp=ns(Vs(1,sp));return fl(square(ic(ap,lp)),-1)})}function squaredHinge(_d,rp){return je(function(){var np=Xs(0,ic(1,tc(_d,rp)));return fl(square(np),-1)})}function hinge(_d,rp){return je(function(){var np=Xs(0,ic(1,tc(_d,rp)));return fl(np,-1)})}function categoricalHinge(_d,rp){return je(function(){var np=vl(tc(_d,rp),-1),ap=hl(tc(ic(1,_d),rp),-1);return Xs(0,Vs(1,ic(ap,np)))})}function logcosh(_d,rp){return je(function(){var np=Math.log(2),ap=ic(rp,_d),sp=ic(Vs(ap,ms(tc(-2,ap))),np);return fl(sp,-1)})}function categoricalCrossentropy(_d,rp,np){return np===void 0&&(np=!1),je(function(){if(np)rp=io(rp);else{var ap=vl(rp,rp.shape.length-1,!0);rp=qs(rp,ap)}return rp=$u(rp,epsilon(),1-epsilon()),as(vl(tc(_d.toFloat(),ns(rp)),rp.shape.length-1))})}function sparseCategoricalCrossentropy(_d,rp){return je(function(){var np=es(flatten(_d)).toInt(),ap=(rp=$u(rp,epsilon(),1-epsilon())).shape;return categoricalCrossentropy(gr(np,ap[ap.length-1]).reshape(ap),rp,!1)})}function sigmoidCrossEntropyWithLogits(_d,rp){if(!tt.arraysEqual(_d.shape,rp.shape))throw new ValueError("logits and labels must have the same shape, but got shapes "+JSON.stringify(_d.shape)+" and "+JSON.stringify(rp.shape));return je(function(){var np=rp.relu(),ap=rp.abs().neg();return np.sub(rp.mul(_d)).add(ap.exp().log1p())})}function binaryCrossentropy(_d,rp){return je(function(){var np;return np=$u(rp,epsilon(),1-epsilon()),np=ns(qs(np,ic(1,np))),fl(sigmoidCrossEntropyWithLogits(_d,np),-1)})}function kullbackLeiblerDivergence(_d,rp){return je(function(){var np=$u(_d,epsilon(),1),ap=$u(rp,epsilon(),1);return vl(tc(_d,ns(qs(np,ap))),-1)})}function poisson(_d,rp){return je(function(){var np=ns(Vs(epsilon(),rp));return fl(ic(rp,tc(_d,np)),-1)})}function cosineProximity(_d,rp){return je(function(){var np=l2Normalize(_d,-1),ap=l2Normalize(rp,-1),sp=tc(np,ap);return as(vl(sp,-1))})}var lossesMap={meanSquaredError,meanAbsoluteError,meanAbsolutePercentageError,meanSquaredLogarithmicError,squaredHinge,hinge,categoricalHinge,logcosh,categoricalCrossentropy,sparseCategoricalCrossentropy,binaryCrossentropy,kullbackLeiblerDivergence,poisson,cosineProximity};function get(_d){if(typeof _d=="string"){if(_d in lossesMap)return lossesMap[_d];var rp="Unknown loss "+_d;throw _d.toLowerCase().includes("softmaxcrossentropy")&&(rp="Unknown loss "+_d+'. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy'),new ValueError(rp)}return _d}function binaryAccuracy(_d,rp){return je(function(){var np=tc(.5,Vn(rp)),ap=cast$1(lc(rp,np),_d.dtype);return fl(sc(_d,ap),-1)})}function categoricalAccuracy(_d,rp){return je(function(){return cast$1(sc(sl(_d,-1),sl(rp,-1)),"float32")})}function truePositives(_d,rp){return je(function(){return Ms(_d.equal(1),rp.equal(1)).sum().cast("float32")})}function falseNegatives(_d,rp){return je(function(){return Ms(_d.equal(1),rp.equal(0)).sum().cast("float32")})}function falsePositives(_d,rp){return je(function(){return Ms(_d.equal(0),rp.equal(1)).sum().cast("float32")})}function precision(_d,rp){return je(function(){var np=truePositives(_d,rp),ap=falsePositives(_d,rp),sp=np.add(ap);return Ws(lc(sp,0),np.div(sp),0).cast("float32")})}function recall(_d,rp){return je(function(){var np=truePositives(_d,rp),ap=falseNegatives(_d,rp),sp=np.add(ap);return Ws(lc(sp,0),np.div(sp),0).cast("float32")})}function binaryCrossentropy$1(_d,rp){return binaryCrossentropy(_d,rp)}function sparseCategoricalAccuracy(_d,rp){return _d.rank===rp.rank&&(_d=_d.squeeze([_d.rank-1])),(rp=rp.argMax(-1)).dtype!==_d.dtype&&(rp=rp.asType(_d.dtype)),sc(_d,rp).asType("float32")}var mse$1=meanSquaredError,MSE$1=meanSquaredError,mae$1=meanAbsoluteError,MAE$1=meanAbsoluteError,mape$1=meanAbsolutePercentageError,MAPE$1=meanAbsolutePercentageError,categoricalCrossentropy$1=categoricalCrossentropy,cosine$1=cosineProximity,sparseCategoricalCrossentropy$1=sparseCategoricalCrossentropy,metricsMap={binaryAccuracy,categoricalAccuracy,precision,categoricalCrossentropy:categoricalCrossentropy$1,sparseCategoricalCrossentropy:sparseCategoricalCrossentropy$1,mse:mse$1,MSE:MSE$1,mae:mae$1,MAE:MAE$1,mape:mape$1,MAPE:MAPE$1,cosine:cosine$1};function get$1(_d){if(typeof _d=="string"&&_d in metricsMap)return metricsMap[_d];if(typeof _d!="string"&&_d!=null)return _d;throw new ValueError("Unknown metric "+_d)}function getLossOrMetricName(_d){if(assert(_d!==null,"Unknown LossOrMetricFn "+_d),typeof _d=="string")return _d;for(var rp=void 0,np=0,ap=Object.keys(lossesMap);np<ap.length;np++){var sp=ap[np];if(lossesMap[sp]===_d){rp=sp;break}}if(rp!==void 0)return rp;for(var lp=0,up=Object.keys(metricsMap);lp<up.length;lp++)if(sp=up[lp],metricsMap[sp]===_d){rp=sp;break}return rp!==void 0?rp:_d.name}function getOptimizer(_d){var rp={Adagrad:function(){return Zf.adagrad(.01)},Adadelta:function(){return Zf.adadelta(1,.95,epsilon())},Adam:function(){return Zf.adam(.001,.9,.999,epsilon())},Adamax:function(){return Zf.adamax(.002,.9,.999,epsilon(),0)},RMSProp:function(){return Zf.rmsprop(.001,.9,0,epsilon())},SGD:function(){return Zf.sgd(.01)}};if(rp.adagrad=rp.Adagrad,rp.adadelta=rp.Adadelta,rp.adam=rp.Adam,rp.adamax=rp.Adamax,rp.rmsprop=rp.RMSProp,rp.sgd=rp.SGD,_d in rp)return rp[_d]();throw new ValueError("Unknown Optimizer "+_d)}var MAX_USER_DEFINED_METADATA_SERIALIZED_LENGTH=1048576;function checkUserDefinedMetadata(_d,rp,np){if(np===void 0&&(np=!1),_d==null||typeof _d!="object"||Object.getPrototypeOf(_d)!==Object.prototype||!plainObjectCheck(_d))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(np){var ap=JSON.stringify(_d);ap.length>MAX_USER_DEFINED_METADATA_SERIALIZED_LENGTH&&console.warn('User-defined metadata of model "'+rp+'" is too large in size (length='+ap.length+" when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= "+MAX_USER_DEFINED_METADATA_SERIALIZED_LENGTH+".")}}function plainObjectCheck(_d){if(_d===null)return!0;if(typeof _d=="object"){if(Object.getPrototypeOf(_d)===Object.prototype){for(var rp=0,np=Object.keys(_d);rp<np.length;rp++){var ap=np[rp];if(typeof ap!="string"||!plainObjectCheck(_d[ap]))return!1}return!0}if(Array.isArray(_d)){for(var sp=0,lp=_d;sp<lp.length;sp++)if(!plainObjectCheck(lp[sp]))return!1;return!0}return!1}var up=typeof _d;return up==="string"||up==="number"||up==="boolean"}function printSummary(_d,rp,np,ap){ap===void 0&&(ap=console.log);var sp,lp=isModelSequentialLike(_d),up=["Layer (type)","Output shape","Param #"];if(lp?(rp=rp||65,np=np||[.45,.85,1]):(rp=rp||98,np=np||[.33,.55,.67,1]),np[np.length-1]<=1&&(np=np.map(function(mp){return Math.floor(rp*mp)})),!lp)for(var cp in up.push("Receives inputs"),sp=[],_d.nodesByDepth)sp.push.apply(sp,_d.nodesByDepth[cp]);ap("_".repeat(rp)),printRow(up,np,ap),ap("=".repeat(rp));for(var dp=_d.layers,fp=0;fp<dp.length;++fp)lp?printLayerSummary(dp[fp],np,ap):printLayerSummaryWithConnections(dp[fp],np,sp,ap),ap((fp===dp.length-1?"=":"_").repeat(rp));_d.checkTrainableWeightsConsistency();var pp=countTrainableParams(_d),hp=countParamsInWeights(_d.nonTrainableWeights);ap("Total params: "+(pp+hp)),ap("Trainable params: "+pp),ap("Non-trainable params: "+hp),ap("_".repeat(rp))}function countTrainableParams(_d){return _d.collectedTrainableWeights!=null?countParamsInWeights(_d.collectedTrainableWeights):countParamsInWeights(_d.trainableWeights)}function isModelSequentialLike(_d){var rp=!0,np=[],ap=[];for(var sp in _d.nodesByDepth)np.push(_d.nodesByDepth[sp]);for(var lp=0,up=np;lp<up.length;lp++){var cp=up[lp];if(cp.length>1||cp.length===1&&cp[0].inboundLayers.length>1){rp=!1;break}ap.push.apply(ap,cp)}if(rp)for(var dp=0,fp=_d.layers;dp<fp.length;dp++){for(var pp=!1,hp=0,mp=fp[dp].inboundNodes;hp<mp.length;hp++){var gp=mp[hp];if(ap.indexOf(gp)!==-1){if(pp){rp=!1;break}pp=!0}}if(!rp)break}return rp}function printRow(_d,rp,np){np===void 0&&(np=console.log);for(var ap="",sp=0;sp<_d.length;++sp)sp>0&&(ap=ap.slice(0,ap.length-1)+" "),ap=(ap+=_d[sp]).slice(0,rp[sp]),ap+=" ".repeat(rp[sp]-ap.length);np(ap)}function printLayerSummary(_d,rp,np){var ap;try{ap=JSON.stringify(_d.outputShape)}catch{ap="multiple"}printRow([_d.name+" ("+_d.getClassName()+")",ap,_d.countParams().toString()],rp,np)}function printLayerSummaryWithConnections(_d,rp,np,ap){var sp;try{sp=JSON.stringify(_d.outputShape)}catch{sp="multiple"}for(var lp=[],up=0,cp=_d.inboundNodes;up<cp.length;up++){var dp=cp[up];if(!(np!=null&&np.length>0&&np.indexOf(dp)===-1))for(var fp=0;fp<dp.inboundLayers.length;++fp){var pp=dp.inboundLayers[fp].name,hp=dp.nodeIndices[fp],mp=dp.tensorIndices[fp];lp.push(pp+"["+hp+"]["+mp+"]")}}var gp=_d.name,vp=_d.getClassName(),xp=lp.length===0?"":lp[0];for(printRow([gp+" ("+vp+")",sp,_d.countParams().toString(),xp],rp,ap),fp=1;fp<lp.length;++fp)printRow(["","","",lp[fp]],rp,ap)}function isArrayItemInputOrOutputName(_d,rp,np){return(_d==="inboundNodes"||_d==="outputLayers"||_d==="inputLayers")&&rp===0&&typeof np=="string"}function convertPythonicToTs(_d,rp){if(_d===null)return null;if(typeof _d=="string")return toCamelCase$1(_d);if(typeof _d=="number"||typeof _d=="boolean")return _d;if(_d instanceof Array){for(var np=[],ap=_d.length,sp=0;sp<ap;++sp){var lp=_d[sp];isArrayItemInputOrOutputName(rp,sp,lp)?np.push(lp):np.push(convertPythonicToTs(lp,rp))}return np}for(var up={},cp=0,dp=Object.keys(_d);cp<dp.length;cp++){var fp=dp[cp],pp=_d[fp];if(fp==="name"&&typeof pp=="string")up[fp]=pp;else{var hp=toCamelCase$1(fp);up[hp]=convertPythonicToTs(pp,hp)}}return up}function convertTsToPythonic(_d,rp){if(_d==null)return null;if(typeof _d=="string")return toSnakeCase(_d);if(typeof _d=="number"||typeof _d=="boolean")return _d;if(_d instanceof Array){for(var np=[],ap=_d.length,sp=0;sp<ap;++sp){var lp=_d[sp];isArrayItemInputOrOutputName(rp,sp,lp)?np.push(lp):np.push(convertTsToPythonic(lp,rp))}return np}for(var up={},cp=0,dp=Object.keys(_d);cp<dp.length;cp++){var fp=dp[cp],pp=_d[fp],hp=toSnakeCase(fp);up[hp]=fp!=="name"&&fp!=="className"||typeof pp!="string"?convertTsToPythonic(pp,fp):pp}return up}var version$8="1.3.1";function assertFeedCompatibility(_d,rp){if(_d.dtype==null||_d.dtype===rp.dtype)return rp;try{return lr(rp,_d.dtype)}catch{throw new ValueError("The dtype of the feed ("+rp.dtype+") can not be cast to the dtype of the key '"+_d.name+"' ("+_d.dtype+").")}}var FeedDict=function(){function _d(rp){if(this.id2Value={},this.id2Mask={},this.name2Id={},rp instanceof _d)for(var np in rp.id2Value)this.id2Value[np]=rp.id2Value[np],np in rp.id2Mask&&(this.id2Mask[np]=rp.id2Mask[np]);else{if(rp==null)return;for(var ap=0,sp=rp;ap<sp.length;ap++){var lp=sp[ap];this.add(lp.key,lp.value)}}}return _d.prototype.add=function(rp,np,ap){if(this.id2Value[rp.id]!=null)throw new ValueError("Duplicate key: name="+rp.name+", id="+rp.id);return this.id2Value[rp.id]=assertFeedCompatibility(rp,np),this.name2Id[rp.name]=rp.id,ap!=null&&(this.id2Mask[rp.id]=ap),this},_d.prototype.addFeed=function(rp){this.add(rp.key,rp.value)},_d.prototype.hasKey=function(rp){return this.id2Value[rp.id]!=null},_d.prototype.names=function(){return Object.keys(this.name2Id)},_d.prototype.getValue=function(rp){if(rp instanceof SymbolicTensor){if(this.id2Value[rp.id]==null)throw new ValueError("Nonexistent key: "+rp.name);return this.id2Value[rp.id]}var np=this.name2Id[rp];if(np==null)throw new ValueError("Feed dict has no SymbolicTensor name: "+rp);return this.id2Value[np]},_d.prototype.getMask=function(rp){if(rp instanceof SymbolicTensor){if(this.id2Value[rp.id]==null)throw new ValueError("Nonexistent key: "+rp.name);return this.id2Mask[rp.id]}var np=this.name2Id[rp];if(np==null)throw new ValueError("Feed dict has no SymbolicTensor name: "+rp);return this.id2Mask[np]},_d.prototype.disposeMasks=function(){this.id2Mask!=null&&Xe(this.id2Mask)},_d}(),cachedSorted={},cachedRecipientCounts={};function execute(_d,rp,np,ap){for(var sp=np!=null&&np.training,lp=Array.isArray(_d),up=lp?_d:[_d],cp=up.map(function(Vp){return Vp.name}),dp=[],fp=rp.names(),pp=0,hp=cp;pp<hp.length;pp++){var mp=hp[pp];fp.indexOf(mp)!==-1?dp.push(rp.getValue(mp)):dp.push(null)}ap!=null&&(ap.maxNumTensors=-1/0,ap.minNumTensors=1/0);var gp,vp,xp=cp.join(",")+"|"+rp.names().join(",");if(cachedSorted[xp]==null){var Sp=getTopologicalSortAndRecipientCounts(up,rp);gp=Sp.sorted,vp=Sp.recipientCounts,cachedSorted[xp]=gp,cachedRecipientCounts[xp]=vp}gp=cachedSorted[xp],vp={},sp||Object.assign(vp,cachedRecipientCounts[xp]);for(var yp=new FeedDict(rp),bp=0;bp<gp.length;++bp){if(ap!=null){var Ep=qe().numTensors;Ep>ap.maxNumTensors&&(ap.maxNumTensors=Ep),Ep<ap.minNumTensors&&(ap.minNumTensors=Ep)}var wp=gp[bp],_p=wp.sourceLayer;if(!(_p instanceof InputLayer)){for(var Rp=[],$p=[],Cp=[],Ap=!1,Op=0,Lp=wp.inputs;Op<Lp.length;Op++){var Mp=Lp[Op],kp=yp.getValue(Mp),Dp=yp.getMask(Mp);Rp.push(kp),$p.push(Dp),Dp!=null&&(Ap=!0),sp||(vp[Mp.name]--,vp[Mp.name]!==0||rp.hasKey(Mp)||cp.indexOf(Mp.name)!==-1||kp.isDisposed||Mp.sourceLayer.stateful===!0||Cp.push(kp))}Ap&&((np=np||{}).mask=$p[0]);var Fp=toList(_p.apply(Rp,np)),Ip=null;_p.supportsMasking&&(Ip=_p.computeMask(Rp,$p));for(var Pp=getNodeOutputs(wp),Tp=Array.isArray(Pp)?Pp:[Pp],Np=0;Np<Tp.length;++Np){yp.hasKey(Tp[Np])||yp.add(Tp[Np],Fp[Np],Array.isArray(Ip)?Ip[0]:Ip);var jp=cp.indexOf(Tp[Np].name);jp!==-1&&(dp[jp]=Fp[Np])}sp||Xe(Cp)}}return yp.disposeMasks(),lp?dp:dp[0]}function getTopologicalSortAndRecipientCounts(_d,rp){tt.assert(_d!=null&&_d.length>0,function(){return"Expected at least one fetch, got none"});var np=[],ap={};if(_d.length===1){var sp=getTopologicalSortAndRecipientCountsForOneFetch(_d[0],rp);np=sp.sorted,ap=sp.recipientMap}else for(var lp=new Set,up=0,cp=_d;up<cp.length;up++){for(var dp=getTopologicalSortAndRecipientCountsForOneFetch(cp[up],rp),fp=dp.sorted,pp=dp.recipientMap,hp=0,mp=fp;hp<mp.length;hp++){var gp=mp[hp];lp.has(gp.name)||(np.push(gp),lp.add(gp.name))}var vp=function(Sp){ap[Sp]==null&&(ap[Sp]=new Set),pp[Sp].forEach(function(yp){return ap[Sp].add(yp)})};for(var xp in pp)vp(xp)}return{sorted:np,recipientCounts:recipientMap2Counts(ap)}}function recipientMap2Counts(_d){var rp={};for(var np in _d)rp[np]=_d[np].size;return rp}function getTopologicalSortAndRecipientCountsForOneFetch(_d,rp){for(var np=new Set,ap=[],sp={},lp=0,up=rp.names();lp<up.length;lp++){var cp=up[lp];np.add(cp)}var dp=[],fp=[];for(dp.push(_d);dp.length>0;){var pp=dp[dp.length-1];if(np.has(pp.name))dp.pop();else{var hp=fp[fp.length-1]===dp.length-1;if(pp.inputs.length===0||hp)dp.pop(),ap.push(pp),np.add(pp.name),hp&&fp.pop();else{fp.push(dp.length-1);for(var mp=0,gp=pp.inputs;mp<gp.length;mp++){var vp=gp[mp];sp[vp.name]==null&&(sp[vp.name]=new Set),sp[vp.name].add(pp.name),np.has(vp.name)||dp.push(vp)}}}}return{sorted:ap,recipientMap:sp}}function getNodeOutputs(_d){var rp;if(_d.sourceLayer.inboundNodes.length===1)rp=_d.sourceLayer.output;else{for(var np=null,ap=0;ap<_d.sourceLayer.inboundNodes.length;++ap)for(var sp=0,lp=_d.sourceLayer.inboundNodes[ap].outputTensors;sp<lp.length;sp++)if(lp[sp].id===_d.id){np=ap;break}rp=_d.sourceLayer.getOutputAt(np)}return rp}var Container=function(_d){function rp(np){var ap=_d.call(this,{})||this;if(ap.containerNodes=new Set,ap.name=np.name,ap.name==null){var sp=ap.getClassName().toLowerCase();ap.name=getUid(sp)}if(ap.supportsMasking=!1,ap.trainable_=!0,Array.isArray(np.inputs)?ap.inputs=np.inputs.slice():ap.inputs=[np.inputs],Array.isArray(np.outputs)?ap.outputs=np.outputs.slice():ap.outputs=[np.outputs],unique(ap.inputs).length!==ap.inputs.length)throw new ValueError("The list of inputs passed to the model is redundant. All inputs should only appear once. Found: "+ap.inputs.map(function(fm){return fm.name}));unique(ap.outputs).length!==ap.outputs.length&&console.warn("The list of outputs passed to the model is redundant. All outputs should only appear once. Found: "+ap.outputs.map(function(fm){return fm.name})),ap.inputLayers=[],ap.inputLayersNodeIndices=[],ap.inputLayersTensorIndices=[],ap.outputLayers=[],ap.outputLayersNodeIndices=[],ap.outputLayersTensorIndices=[],ap.layers=[],ap.internalContainerRefs=[];for(var lp=0,up=ap.outputs;lp<up.length;lp++){var cp=(Op=up[lp]).sourceLayer,dp=Op.nodeIndex,fp=Op.tensorIndex;ap.outputLayers.push(cp),ap.outputLayersNodeIndices.push(dp),ap.outputLayersTensorIndices.push(fp)}for(var pp=0,hp=ap.inputs;pp<hp.length;pp++)cp=(Op=hp[pp]).sourceLayer,dp=Op.nodeIndex,fp=Op.tensorIndex,assert(dp===0,"input layer has >1 nodes"),assert(fp===0,"input layer has >1 tensors"),ap.inputLayers.push(cp),ap.inputLayersNodeIndices.push(dp),ap.inputLayersTensorIndices.push(fp);ap.inputNames=[],ap.outputNames=[],ap.feedInputShapes=[],ap.feedInputNames=[],ap.feedOutputNames=[];for(var mp=0;mp<ap.inputLayers.length;mp++){if(!((cp=ap.inputLayers[mp])instanceof InputLayer))throw new TypeError("Input layers to a LayersModel must be InputLayer objects. Received inputs: "+np.inputs+". Input "+mp+" (0-based) originates from layer type "+cp.getClassName()+".");ap.inputNames.push(cp.name),ap.feedInputShapes.push(cp.batchInputShape),ap.feedInputNames.push(cp.name)}for(var gp=0,vp=ap.outputLayers;gp<vp.length;gp++)cp=vp[gp],ap.outputNames.push(cp.name);ap.internalInputShapes=ap.inputs.map(function(fm){return fm.shape}),ap.internalOutputShapes=ap.outputs.map(function(fm){return fm.shape});for(var xp={},Sp={},yp={},bp={},Ep={},wp=[],_p=function(fm,Sm,pm,hm,lm,sm){hm!=null&&lm!=null&&sm!=null||(hm=fm.sourceLayer,lm=fm.nodeIndex,sm=fm.tensorIndex);var ym=hm.inboundNodes[lm];if(pm.indexOf(ym)!==-1)throw new RuntimeError("The tensor "+fm.name+' at layer "'+hm.name+'" is part of a cycle.');if(Sm.indexOf(ym)===-1){ap.containerNodes.add(rp.nodeKey(hm,lm)),hm.id in Ep||(Ep[hm.id]=Object.keys(Ep).length),pm.indexOf(ym)===-1&&pm.push(ym);for(var Am=ym.inboundLayers.length,Em=0;Em<Am;Em++){var wm=ym.inputTensors[Em],Dm=ym.inboundLayers[Em],Vm=ym.nodeIndices[Em],Kp=ym.tensorIndices[Em];_p(wm,Sm,pm,Dm,Vm,Kp)}for(Sm.push(ym);pm.indexOf(ym)>=0;)pm.splice(pm.indexOf(ym),1);wp.push(ym)}},Rp=[],$p=[],Cp=0,Ap=ap.outputs;Cp<Ap.length;Cp++){var Op=Ap[Cp];_p(Op,Rp,$p)}for(var Lp=0,Mp=wp.slice().reverse();Lp<Mp.length;Lp++){Sp[(Gp=Mp[Lp]).id]=Gp,Gp.id in xp||(xp[Gp.id]=0);var kp=xp[Gp.id],Dp=yp[Gp.outboundLayer.id]==null?0:yp[Gp.outboundLayer.id];for(kp=Math.max(kp,Dp),yp[Gp.outboundLayer.id]=kp,bp[Gp.outboundLayer.id]=Gp.outboundLayer,xp[Gp.id]=kp,mp=0;mp<Gp.inboundLayers.length;mp++){var Fp=Gp.inboundLayers[mp],Ip=(dp=Gp.nodeIndices[mp],Fp.inboundNodes[dp]),Pp=xp[Ip.id]==null?0:xp[Ip.id];xp[Ip.id]=Math.max(kp+1,Pp),Sp[Ip.id]=Ip}}var Tp={};for(var Np in xp)(kp=xp[Np])in Tp||(Tp[kp]=[]),Tp[kp].push(Sp[Np]);var jp={};for(var Vp in yp)(kp=yp[Vp])in jp||(jp[kp]=[]),jp[kp].push(bp[Vp]);var zp=Object.keys(jp).map(function(fm){return parseInt(fm,10)}).sort(reverseNumberCompare);ap.layers=[];for(var Wp=0,Up=zp;Wp<Up.length;Wp++){var qp=jp[kp=Up[Wp]];qp.sort(function(fm,Sm){var pm=Ep[fm.id],hm=Ep[Sm.id];return pm<hm?-1:pm>hm?1:0});for(var Bp=0,Yp=qp;Bp<Yp.length;Bp++)(cp=Yp[Bp])instanceof rp&&ap.internalContainerRefs.push(cp),ap.layers.push(cp)}ap.layersByDepth=jp,zp=Object.keys(Tp).map(function(fm){return parseInt(fm,10)}).sort(reverseNumberCompare);for(var Xp=ap.inputs.slice(),Qp=[],am=0,Jp=zp;am<Jp.length;am++)for(var im=0,Zp=Tp[kp=Jp[am]];im<Zp.length;im++){var Gp;if((cp=(Gp=Zp[im]).outboundLayer)!=null){for(var tm=0,om=Gp.inputTensors;tm<om.length;tm++)if(Op=om[tm],Xp.indexOf(Op)===-1)throw new RuntimeError("Graph disconnected: cannot obtain value for tensor "+Op+' at layer "'+cp.name+'". The following previous layers were accessed without issue: '+Qp);for(var em=0,_m=Gp.outputTensors;em<_m.length;em++)Op=_m[em],Xp.push(Op);Qp.push(cp.name)}}ap.nodesByDepth=Tp;for(var Cm=ap.layers.map(function(fm){return fm.name}),Rm=function(fm){var Sm=Cm.filter(function(pm){return pm===fm}).length;if(Sm!==1)throw new RuntimeError('The name "'+fm+'" is used '+Sm+" times in the model. All layer names should be unique. Layer names: "+JSON.stringify(Cm))},xm=0,$m=Cm;xm<$m.length;xm++)Rm($m[xm]);return ap.outboundNodes=[],ap.inboundNodes=[],new Node({outboundLayer:ap,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:ap.inputs,outputTensors:ap.outputs,inputMasks:ap.inputs.map(function(fm){return null}),outputMasks:ap.outputs.map(function(fm){return null}),inputShapes:ap.inputs.map(function(fm){return fm.shape}),outputShapes:ap.outputs.map(function(fm){return fm.shape})}),ap.built=!0,ap._refCount=1,ap}return __extends$h(rp,_d),rp.prototype.assertNotDisposed=function(){if(this._refCount===0)throw new Error("Container '"+this.name+"' is already disposed.")},rp.prototype.dispose=function(){this.assertNotDisposed();var np={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount==0){for(var ap=0,sp=this.layers;ap<sp.length;ap++){var lp=sp[ap];np.numDisposedVariables+=lp.dispose().numDisposedVariables}for(var up=0,cp=this.internalContainerRefs;up<cp.length;up++){var dp=cp[up];np.numDisposedVariables+=dp.dispose().numDisposedVariables}}return np.refCountAfterDispose=this._refCount,np},Object.defineProperty(rp.prototype,"trainable",{get:function(){return this.trainable_},set:function(np){this.layers.forEach(function(ap){ap._trainableWeights.forEach(function(sp){return sp.trainable=np})}),this.trainable_=np},enumerable:!0,configurable:!0}),Object.defineProperty(rp.prototype,"trainableWeights",{get:function(){if(this._trainableWeights.length>0)throw new ValueError("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];for(var np=[],ap=0,sp=this.layers;ap<sp.length;ap++){var lp=sp[ap];np=np.concat(lp.trainableWeights)}return np},enumerable:!0,configurable:!0}),Object.defineProperty(rp.prototype,"nonTrainableWeights",{get:function(){for(var np=[],ap=0,sp=this.layers;ap<sp.length;ap++){var lp=sp[ap];np.push.apply(np,lp.nonTrainableWeights)}if(!this.trainable){for(var up=[],cp=0,dp=this.layers;cp<dp.length;cp++)lp=dp[cp],up.push.apply(up,lp.trainableWeights);return up.concat(np)}return np},enumerable:!0,configurable:!0}),Object.defineProperty(rp.prototype,"weights",{get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)},enumerable:!0,configurable:!0}),rp.prototype.loadWeights=function(np,ap){ap===void 0&&(ap=!0);for(var sp={},lp=0,up=0,cp=this.layers;up<cp.length;up++)for(var dp=0,fp=cp[up].weights;dp<fp.length;dp++){var pp=fp[dp];if(sp[pp.originalName]!=null)throw new ValueError("Duplicate weight name: "+pp.originalName);sp[pp.originalName]=pp,lp++}var hp=[];for(var mp in np){if(sp[mp]!=null)hp.push([sp[mp],np[mp]]);else if(ap)throw new ValueError("Provided weight data has no target variable: "+mp);delete sp[mp]}if(ap){var gp=[];for(var vp in sp)gp.push(vp);if(gp.length>0)throw new ValueError(gp.length+" of "+lp+" weights are not set: "+gp)}batchSetValue(hp)},rp.prototype.updatedConfig=function(){var np=this.getConfig(),ap={};return ap.className=this.getClassName(),ap.config=np,ap.kerasVersion="tfjs-layers "+version$8,ap.backend="TensorFlow.js",ap},rp.prototype.toJSON=function(np,ap){ap===void 0&&(ap=!0);var sp=convertTsToPythonic(this.updatedConfig());return ap?JSON.stringify(sp):sp},rp.prototype.call=function(np,ap){var sp=this;return je(function(){np=toList(np);for(var lp=new FeedDict,up=0;up<sp.inputs.length;++up)lp.add(sp.inputs[up],np[up]);return execute(sp.outputs,lp,ap)})},rp.prototype.computeMask=function(np,ap){var sp=this;return je(function(){var lp;return np=toList(np),lp=ap==null?pyListRepeat(null,np.length):toList(ap),sp.runInternalGraph(np,lp)[1]})},rp.prototype.computeOutputShape=function(np){var ap=normalizeShapeList(np);if(ap.length!==this.inputLayers.length)throw new ValueError("Invalid inputShape argument "+np+": model has "+this.inputLayers.length+" tensor inputs.");for(var sp={},lp=0;lp<ap.length;lp++){var up=this.inputLayers[lp],cp=ap[lp];sp[Ap=up.name+"_0_0"]=cp}var dp=Object.keys(this.nodesByDepth).map(function(Lp){return parseInt(Lp,10)}).sort(reverseNumberCompare);if(dp.length>1)for(var fp=0,pp=dp;fp<pp.length;fp++)for(var hp=pp[fp],mp=0,gp=this.nodesByDepth[hp];mp<gp.length;mp++){var vp=gp[mp];if(up=vp.outboundLayer,this.inputLayers.map(function(Lp){return Lp.id}).indexOf(up.id)===-1){for(var xp=[],Sp=0;Sp<vp.inboundLayers.length;Sp++){var yp=vp.inboundLayers[Sp],bp=vp.nodeIndices[Sp],Ep=vp.tensorIndices[Sp],wp=sp[Ap=yp.name+"_"+bp+"_"+Ep];xp.push(wp)}var _p=normalizeShapeList(up.computeOutputShape(singletonOrArray(xp))),Rp=up.inboundNodes.indexOf(vp);for(Sp=0;Sp<_p.length;Sp++)sp[Ap=up.name+"_"+Rp+"_"+Sp]=_p[Sp]}}var $p=[],Cp=[];for(lp=0;lp<this.outputLayers.length;lp++){up=this.outputLayers[lp],Rp=this.outputLayersNodeIndices[lp],Ep=this.outputLayersTensorIndices[lp];var Ap=up.name+"_"+Rp+"_"+Ep;Cp.push(Ap)}for(lp=0;lp<Cp.length;lp++){var Op=Cp[lp];assert(Op in sp),$p.push(sp[Op])}return singletonOrArray($p)},rp.prototype.runInternalGraph=function(np,ap){ap==null&&(ap=pyListRepeat(null,np.length));for(var sp={},lp=0;lp<this.inputs.length;++lp){var up=this.inputs[lp],cp=np[lp],dp=ap[lp];sp[up.id]=[cp,dp]}for(var fp=0,pp=Object.keys(this.nodesByDepth).map(function(jp){return parseInt(jp,10)}).sort(reverseNumberCompare);fp<pp.length;fp++)for(var hp=pp[fp],mp=0,gp=this.nodesByDepth[hp];mp<gp.length;mp++){for(var vp=gp[mp],xp=vp.outboundLayer,Sp=vp.inputTensors,yp=vp.outputTensors,bp=new Array,Ep=0,wp=Sp;Ep<wp.length;Ep++)(up=wp[Ep]).id in sp&&bp.push(sp[up.id]);if(bp.length===Sp.length){var _p={},Rp=void 0,$p=void 0,Cp=void 0,Ap=void 0;if(vp.callArgs!=null&&(_p=vp.callArgs),bp.length===1){var Op=bp[0],Lp=Op[0],Mp=Op[1];_p.mask==null&&(_p.mask=Mp),Cp=toList(xp.call(Lp,_p)),Ap=toList(xp.computeMask(Lp,Mp)),Rp=[Lp],$p=[Mp]}else Rp=bp.map(function(jp){return jp[0]}),$p=bp.map(function(jp){return jp[1]}),_p.mask==null&&(_p.mask=$p),Cp=toList(xp.call(Rp,_p)),Ap=toList(xp.computeMask(Rp,$p));if(xp.activityRegularizer)throw new NotImplementedError("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(lp=0;lp<yp.length;++lp)up=yp[lp],cp=Cp[lp],dp=Ap[lp],sp[up.id]=[cp,dp]}}for(var kp=[],Dp=[],Fp=[],Ip=0,Pp=this.outputs;Ip<Pp.length;Ip++){assert((up=Pp[Ip]).id in sp,"Could not compute output "+up.name+" : "+up.id);var Tp=sp[up.id],Np=Tp[0];dp=Tp[1],Fp.push(Np.shape),kp.push(Np),Dp.push(dp)}return[kp,Dp,Fp]},rp.prototype.buildNodeConversionMap=function(np){for(var ap,sp={},lp=0,up=this.layers;lp<up.length;lp++){var cp=up[lp];ap=cp instanceof rp?1:0;for(var dp=0;dp<cp.inboundNodes.length;dp++){var fp=rp.nodeKey(cp,dp);this.containerNodes.has(fp)&&(sp[fp]=ap,ap+=1)}}return sp},rp.prototype.getLayer=function(np,ap){if(ap!=null){if(this.layers.length<=ap)throw new ValueError("Was asked to retrieve layer at index "+ap+", but model only has "+this.layers.length+" layer(s).");return this.layers[ap]}if(np==null)throw new ValueError("Provide either a layer name or layer index");for(var sp=0,lp=this.layers;sp<lp.length;sp++){var up=lp[sp];if(up.name===np)return up}throw new ValueError("No such layer: "+np)},rp.prototype.calculateLosses=function(){var np=this;return je(function(){for(var ap=[],sp=0,lp=np.layers;sp<lp.length;sp++)for(var up=lp[sp],cp=0;cp<up.inboundNodes.length;++cp){var dp=rp.nodeKey(up,cp);np.containerNodes.has(dp)&&ap.push.apply(ap,up.calculateLosses())}return ap})},rp.prototype.getConfig=function(){for(var np={name:this.name},ap=this.buildNodeConversionMap(this.layers),sp=[],lp=0,up=this.layers;lp<up.length;lp++){for(var cp=(_p=up[lp]).getClassName(),dp=_p.getConfig(),fp=[],pp=0;pp<_p.inboundNodes.length;pp++){var hp=_p.inboundNodes[pp],mp=rp.nodeKey(_p,pp),gp={};if(this.containerNodes.has(mp)){if(hp.callArgs)try{JSON.stringify(hp.callArgs),gp=hp.callArgs}catch{console.warn("Layer "+_p.name+" was passed non-serializable keyword arguments: "+hp.callArgs+". They will not be included in the serialized model (and thus will be missing at deserialization time)."),gp={}}if(hp.inboundLayers.length>0){for(var vp=[],xp=0;xp<hp.inboundLayers.length;xp++){var Sp=hp.inboundLayers[xp],yp=hp.nodeIndices[xp],bp=hp.tensorIndices[xp];($p=ap[rp.nodeKey(Sp,yp)])==null&&($p=0),vp.push([Sp.name,$p,bp,gp])}fp.push(vp)}}}var Ep={};Ep.name=_p.name,Ep.className=cp,Ep.config=dp,Ep.inboundNodes=fp,sp.push(Ep)}np.layers=sp;var wp=[];for(xp=0;xp<this.inputLayers.length;xp++){var _p=this.inputLayers[xp];yp=this.inputLayersNodeIndices[xp],mp=rp.nodeKey(_p,yp),this.containerNodes.has(mp)&&(($p=ap[mp])!==null&&$p!==void 0||($p=0),bp=this.inputLayersTensorIndices[xp],wp.push([_p.name,$p,bp]))}np.inputLayers=wp;var Rp=[];for(xp=0;xp<this.outputLayers.length;xp++)if(_p=this.outputLayers[xp],yp=this.outputLayersNodeIndices[xp],mp=rp.nodeKey(_p,yp),this.containerNodes.has(mp)){var $p;($p=ap[mp])!==null&&$p!==void 0||($p=0),bp=this.outputLayersTensorIndices[xp],Rp.push([_p.name,$p,bp])}return np.outputLayers=Rp,np},rp.fromConfig=function(np,ap,sp,lp){lp===void 0&&(lp=!1);var up={},cp={};function dp(Ip,Pp){Ip.name in cp?cp[Ip.name].push(Pp):cp[Ip.name]=[Pp]}function fp(Ip,Pp){for(var Tp,Np=[],jp=0,Vp=Pp;jp<Vp.length;jp++){var zp=Vp[jp],Wp=zp[0],Up=zp[1],qp=zp[2];if(Tp=zp[3]==null?{}:zp[3],!(Wp in up))return void dp(Ip,Pp);var Bp=up[Wp];if(Bp.inboundNodes.length<=Up)return void dp(Ip,Pp);var Yp=Bp.inboundNodes[Up];Np.push(Yp.outputTensors[qp])}Np.length>0&&Ip.apply(singletonOrArray(Np),Tp)}function pp(Ip){var Pp=Ip.name,Tp=deserialize(Ip,ap.customObjects!=null?ap.customObjects:{});Tp.setFastWeightInitDuringBuild(lp),up[Pp]=Tp,Ip.inboundNodes.forEach(function(Np){if(!(Np instanceof Array))throw new ValueError("Corrupted configuration, expected array for nodeData: "+Np);dp(Tp,Np)})}for(var hp=ap.name,mp=ap.layers,gp=0,vp=mp;gp<vp.length;gp++)pp(yp=vp[gp]);for(;!isObjectEmpty(cp);)for(var xp=0,Sp=mp;xp<Sp.length;xp++){var yp=Sp[xp];if((Fp=up[yp.name]).name in cp){var bp=cp[Fp.name];delete cp[Fp.name];for(var Ep=0,wp=bp;Ep<wp.length;Ep++)fp(Fp,wp[Ep])}}for(var _p=[],Rp=[],$p=0,Cp=ap.inputLayers;$p<Cp.length;$p++){var Ap=(yp=Cp[$p])[0],Op=yp[1],Lp=yp[2];assert(Ap in up);var Mp=(Fp=up[Ap]).inboundNodes[Op].outputTensors;_p.push(Mp[Lp])}for(var kp=0,Dp=ap.outputLayers;kp<Dp.length;kp++){Ap=(yp=Dp[kp])[0],Op=yp[1],Lp=yp[2],assert(Ap in up);var Fp;Mp=(Fp=up[Ap]).inboundNodes[Op].outputTensors,Rp.push(Mp[Lp])}return new np({inputs:_p,outputs:Rp,name:hp})},Object.defineProperty(rp.prototype,"stateful",{get:function(){if(this._stateful)throw new ValueError("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(var np=0,ap=this.layers;np<ap.length;np++)if(ap[np].stateful)return!0;return!1},enumerable:!0,configurable:!0}),rp.prototype.resetStates=function(){var np=this;je(function(){np.layers.forEach(function(ap){ap.stateful&&ap.resetStates()})})},rp}(Layer);function standardizeSampleOrClassWeights(_d,rp,np){var ap=rp.length;if(_d==null||Array.isArray(_d)&&_d.length===0)return rp.map(function(lp){return null});if(ap===1)return Array.isArray(_d)&&_d.length===1?_d:typeof _d=="object"&&rp[0]in _d?[_d[rp[0]]]:[_d];if(Array.isArray(_d)){if(_d.length!==ap)throw new Error("Provided "+np+" is an array of "+_d.length+" element(s), but the model has "+ap+" outputs. Make sure a set of weights is provided for each model output.");return _d}if(typeof _d=="object"&&Object.keys(_d).length>0&&typeof _d[Object.keys(_d)[0]]=="object"){var sp=[];return rp.forEach(function(lp){lp in _d?sp.push(_d[lp]):sp.push(null)}),sp}throw new Error("The model has multiple ("+ap+") outputs, so "+np+" must be either an array with "+ap+" elements or an object with "+rp+" keys. Provided "+np+" not understood: "+JSON.stringify(_d))}function standardizeClassWeights(_d,rp){return standardizeSampleOrClassWeights(_d,rp,"classWeight")}function standardizeWeights(_d,rp,np,ap){return __awaiter$8(this,void 0,void 0,function(){var sp,lp,up,cp,dp;return __generator$8(this,function(fp){switch(fp.label){case 0:if(rp!=null||ap!=null)throw new Error("Support sampleWeight is not implemented yet");return np==null?[3,2]:(sp=je(function(){if(_d.shape.length===1)return _d.clone();if(_d.shape.length===2){if(_d.shape[1]>1)return _d.argMax(1);if(_d.shape[1]===1)return _d.reshape([_d.shape[0]]);throw new Error("Encountered unexpected last-dimension size ("+_d.shape[1]+") during handling of class weights. The size is expected to be >= 1.")}throw new Error("Unexpected rank of target (y) tensor ("+_d.rank+") during handling of class weights. The rank is expected to be 1 or 2.")}),cp=(up=Array).from,[4,sp.data()]);case 1:return lp=cp.apply(up,[fp.sent()]),Xe(sp),dp=[],lp.forEach(function(pp){if(np[pp]==null)throw new Error("classWeight must contain all classes in the training data. The class "+pp+" exists in the data but not in classWeight");dp.push(np[pp])}),[2,Dn(dp,"float32")];case 2:return[2,null]}})})}function computeWeightedLoss(_d,rp){return tc(_d,rp)}var DEFAULT_VALIDATION_BATCH_SIZE=32;function standardizeDataIteratorOutput(_d,rp){var np,ap,sp=rp;np=sp.xs,ap=sp.ys,tt.assert(np!=null&&ap!=null,function(){return"A Dataset iterator for fitDataset() is expected to generate objects of the form `{xs: xVal, ys: yVal}`, where the two values may be `tf.Tensor`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates "+rp});var lp=flattenTensorOrArrayOrMap("input",_d.inputNames,np),up=flattenTensorOrArrayOrMap("output",_d.outputNames,ap),cp=lp[0].shape[0];tt.assert(lp.length===_d.inputs.length,function(){return"LayersModel has "+_d.inputs.length+" inputs, but the dataset provides "+lp.length+" inputs.  (Expected input keys: "+JSON.stringify(_d.inputNames)+")"}),tt.assert(up.length===_d.outputs.length,function(){return"LayersModel has "+_d.outputs.length+" outputs, but the dataset provides "+up.length+" outputs.  (Expected output keys: "+JSON.stringify(_d.outputNames)+")"});var dp=function(mp){tt.assert(lp[mp].shape[0]===cp,function(){return"Batch size mismatch: input "+_d.inputNames[mp]+" has "+lp[mp].shape[0]+"; expected  "+cp+" based on input "+_d.inputNames[0]+"."})};for(var fp in lp)dp(fp);var pp=function(mp){tt.assert(up[mp].shape[0]===cp,function(){return"Batch size mismatch: output "+_d.outputNames[mp]+" has "+up[mp].shape[0]+"; expected  "+cp+" based on input "+_d.inputNames[0]+"."})};for(var hp in up)pp(hp);return{xs:lp,ys:up}}function flattenTensorOrArrayOrMap(_d,rp,np){if(np instanceof dt)return[np];if(Array.isArray(np))return tt.assert(np.length===rp.length,function(){return"Received an array of "+np.length+" Tensors, but expected "+rp.length+" to match the "+_d+" keys "+rp+"."}),np;for(var ap=[],sp=0,lp=rp;sp<lp.length;sp++){var up=lp[sp];if(np[up]==null)throw new ValueError("The feature data generated by the dataset lacks the required "+_d+" key '"+up+"'.");ap.push(np[up])}return ap}function standardizeTensorValidationData(_d){if(_d.length===3)throw new NotImplementedError("Validation with sample weights is not implemented yet.");return{xs:_d[0],ys:_d[1]}}function fitDataset(_d,rp,np){return __awaiter$8(this,void 0,void 0,function(){var ap,sp,lp,up,cp,dp,fp,pp,hp,mp,gp,vp,xp,Sp,yp,bp,Ep,wp,_p,Rp,$p,Cp,Ap,Op,Lp,Mp,kp,Dp,Fp,Ip,Pp,Tp,Np,jp;return __generator$8(this,function(Vp){switch(Vp.label){case 0:if(ap=np.batchesPerEpoch!=null,tt.assert(_d.optimizer!=null,function(){return"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."}),tt.assert(np!=null,function(){return"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."}),tt.assert(np.epochs!=null&&np.epochs>0&&Number.isInteger(np.epochs),function(){return"For fitDataset(), config.epochs is expected to be a positive integer, but got "+np.epochs}),tt.assert(!ap||np.batchesPerEpoch>0&&Number.isInteger(np.batchesPerEpoch),function(){return"For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got "+np.batchesPerEpoch}),tt.assert(np.validationSplit==null,function(){return"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."}),_d.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");_d.isTraining=!0,Vp.label=1;case 1:return Vp.trys.push([1,,26,27]),sp=np.validationData!=null,lp=void 0,up=void 0,sp&&(isDatasetObject(np.validationData)?tt.assert(np.validationBatches==null||np.validationBatches>0&&Number.isInteger(np.validationBatches),function(){return"For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got "+np.validationBatches}):(cp=standardizeTensorValidationData(np.validationData),lp=cp.xs,up=cp.ys)),dp=_d.makeTrainFunction(),fp=_d.getDedupedMetricsNames(),pp=void 0,pp=sp?fp.slice().concat(fp.map(function(zp){return"val_"+zp})):fp.slice(),hp=standardizeCallbacks(np.callbacks,np.yieldEvery),mp=np.verbose==null?1:np.verbose,gp=configureCallbacks(hp,mp,np.epochs,null,null,getStepsPerEpoch(rp,np),null,sp,pp),vp=gp.callbackList,xp=gp.history,vp.setModel(_d),_d.history=xp,[4,vp.onTrainBegin()];case 2:return Vp.sent(),_d.stopTraining_=!1,Sp=np.initialEpoch==null?0:np.initialEpoch,[4,rp.iterator()];case 3:yp=Vp.sent(),Vp.label=4;case 4:return Sp<np.epochs?(bp={},[4,vp.onEpochBegin(Sp)]):[3,23];case 5:return Vp.sent(),Ep=0,wp=0,ap?[3,7]:[4,rp.iterator()];case 6:yp=Vp.sent(),Vp.label=7;case 7:return!ap||Ep<np.batchesPerEpoch?[4,yp.next()]:[3,21];case 8:return _p=Vp.sent(),ap&&_p.done?(console.warn("You provided `batchesPerEpoch` as "+np.batchesPerEpoch+", but your dataset iterator ran out of data after "+Ep+" batches; interrupting training. Make sure that your dataset can generate at least `batchesPerEpoch * epochs` batches (in this case, "+np.batchesPerEpoch*np.epochs+" batches). You may need to use the repeat() function when building your dataset."),[3,21]):_p.value==null?[3,15]:(Rp=standardizeDataIteratorOutput(_d,_p.value),$p=Rp.xs,Cp=Rp.ys,(Ap={}).batch=wp,Ap.size=$p[0].shape[0],[4,vp.onBatchBegin(wp,Ap)]);case 9:if(Vp.sent(),Op=[],np.classWeight==null)return[3,13];Lp=standardizeClassWeights(np.classWeight,_d.outputNames),jp=0,Vp.label=10;case 10:return jp<Lp.length?(kp=(Mp=Op).push,[4,standardizeWeights(Cp[jp],null,Lp[jp])]):[3,13];case 11:kp.apply(Mp,[Vp.sent()]),Vp.label=12;case 12:return++jp,[3,10];case 13:for(Dp=$p.concat(Cp).concat(Op),Fp=dp(Dp),Xe(Dp),jp=0;jp<fp.length;++jp)Ip=fp[jp],Pp=Fp[jp],Ap[Ip]=Pp,$e(Pp);return[4,vp.onBatchEnd(wp,Ap)];case 14:Vp.sent(),disposeTensorsInLogs(Ap),wp++,Ep++,Vp.label=15;case 15:return(ap?Ep>=np.batchesPerEpoch:_p.done)?sp?(Tp=void 0,isDatasetObject(np.validationData)?(Np=toList,[4,_d.evaluateDataset(np.validationData,{batches:np.validationBatches})]):[3,17]):[3,19]:[3,20];case 16:return Tp=Np.apply(void 0,[Vp.sent()]),[3,18];case 17:Tp=toList(_d.evaluate(lp,up,{batchSize:np.validationBatchSize==null?DEFAULT_VALIDATION_BATCH_SIZE:np.validationBatchSize,verbose:0})),Vp.label=18;case 18:for(jp=0;jp<_d.metricsNames.length;++jp)bp["val_"+_d.metricsNames[jp]]=Tp[jp];Vp.label=19;case 19:return[3,21];case 20:return _d.stopTraining_?[3,21]:[3,7];case 21:return[4,vp.onEpochEnd(Sp,bp)];case 22:return Vp.sent(),Sp++,_d.stopTraining_?[3,23]:[3,4];case 23:return[4,vp.onTrainEnd()];case 24:return Vp.sent(),[4,_d.history.syncData()];case 25:return Vp.sent(),[2,_d.history];case 26:return _d.isTraining=!1,[7];case 27:return[2]}})})}function getStepsPerEpoch(_d,rp){var np=null;return rp.batchesPerEpoch!=null?np=rp.batchesPerEpoch:Number.isFinite(_d.size)&&(np=_d.size),np}function isDatasetObject(_d){return typeof _d.iterator=="function"}function isLazyIteratorObject(_d){return typeof _d.next=="function"}function evaluateDataset(_d,rp,np){return __awaiter$8(this,void 0,void 0,function(){var ap,sp,lp,up,cp,dp,fp,pp,hp,mp;return __generator$8(this,function(gp){switch(gp.label){case 0:if(ap=(np=np||{}).batches!=null,sp=_d.testFunction,lp=[],np.verbose>0)throw new NotImplementedError("Verbose mode is not implemented yet.");return tt.assert(!ap||np.batches>0&&Number.isInteger(np.batches),function(){return"Test loop expects `batches` to be a positive integer, but received "+JSON.stringify(np.batches)}),isLazyIteratorObject(rp)?(cp=rp,[3,3]):[3,1];case 1:return[4,rp.iterator()];case 2:cp=gp.sent(),gp.label=3;case 3:up=cp,dp=0,fp=0,pp=function(){var vp;return __generator$8(this,function(xp){switch(xp.label){case 0:return[4,up.next()];case 1:return vp=xp.sent(),lp=je(function(){if(vp.value){var Sp=standardizeDataIteratorOutput(_d,vp.value),yp=Sp.xs,bp=Sp.ys,Ep=yp.concat(bp),wp=je(function(){return sp(Ep)});if(Xe(Ep),fp===0)for(var _p=0;_p<wp.length;++_p)lp.push(An(0));var Rp=Ep[0].shape[0],$p=function(Cp){var Ap=wp[Cp],Op=lp[Cp];lp[Cp]=je(function(){return Vs(lp[Cp],tc(Rp,Ap))}),fp>0&&Xe(Op)};for(_p=0;_p<wp.length;++_p)$p(_p);Xe(wp),dp+=Rp,++fp}return lp}),vp.done?(ap&&console.warn("Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least `batches` batches (in this case, "+np.batches+" batches). You may need to use the repeat() function when building your dataset."),[2,"break"]):[2]}})},gp.label=4;case 4:return!ap||fp<np.batches?[5,pp()]:[3,6];case 5:return gp.sent()==="break"?[3,6]:[3,4];case 6:for(hp=0;hp<lp.length;++hp)mp=lp[hp],lp[hp]=qs(lp[hp],dp),Xe(mp);return[2,singletonOrArray(lp)]}})})}function checkBatchSize(_d){tt.assert(_d>0&&Number.isInteger(_d),function(){return"batchSize is required to be a positive integer, but got "+_d})}function sliceArrays(_d,rp,np){return _d==null?[null]:Array.isArray(_d)?_d.map(function(ap){return sliceAlongFirstAxis(ap,rp,np-rp)}):sliceAlongFirstAxis(_d,rp,np-rp)}function sliceArraysByIndices(_d,rp){return je(function(){return _d==null?null:Array.isArray(_d)?_d.map(function(np){return sliceArraysByIndices(np,rp)}):gather$1(_d,rp.dtype==="int32"?rp:rp.toInt())})}function makeBatches(_d,rp){for(var np=[],ap=0,sp=null;ap<_d;)(sp=ap+rp)>=_d&&(sp=_d),np.push([ap,sp]),ap=sp;return np}function fitLoop(_d,rp,np,ap,sp,lp,up,cp,dp,fp,pp,hp,mp,gp,vp){return __awaiter$8(this,void 0,void 0,function(){var xp,Sp,yp,bp,Ep,wp,_p,Rp;return __generator$8(this,function($p){switch($p.label){case 0:if(sp==null&&(sp=32),lp==null&&(lp=1),pp==null&&(pp=!0),mp==null&&(mp=0),xp=!1,dp!=null&&fp!=null&&(xp=!0),vp!=null&&(xp=!0,gp==null))throw new ValueError("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");return(Sp=_d.checkNumSamples(np,sp,gp,"steps_per_epoch"))!=null&&(yp=range(0,Sp)),up==null&&(up=1),bp=configureCallbacks(cp,up,lp,mp,Sp,gp,sp,xp,hp),Ep=bp.callbackList,wp=bp.history,Ep.setModel(_d),_d.history=wp,[4,Ep.onTrainBegin()];case 1:$p.sent(),_d.stopTraining_=!1,_p=function(Cp){var Ap,Op,Lp,Mp,kp;return __generator$8(this,function(Dp){switch(Dp.label){case 0:return[4,Ep.onEpochBegin(Cp)];case 1:if(Dp.sent(),Ap={},gp==null)return[3,2];throw new NotImplementedError("stepsPerEpoch mode is not implemented yet.");case 2:if(pp==="batch")throw new NotImplementedError("batch shuffling is not implemneted yet");pp&&tt.shuffle(yp),Op=Dn(yp),Lp=makeBatches(Sp,sp),Mp=function(Fp){var Ip;return __generator$8(this,function(Pp){switch(Pp.label){case 0:return Ip={},[4,Ep.onBatchBegin(Fp,Ip)];case 1:return Pp.sent(),je(function(){var Tp=Lp[Fp][0],Np=Lp[Fp][1],jp=sliceAlongFirstAxis(Op,Tp,Np-Tp);Ip.batch=Fp,Ip.size=Np-Tp;for(var Vp=sliceArraysByIndices(np,jp),zp=rp(Vp),Wp=0;Wp<ap.length;++Wp){var Up=ap[Wp],qp=zp[Wp];Ip[Up]=qp,$e(qp)}if(Fp===Lp.length-1&&xp){var Bp=_d.testLoop(dp,fp,sp);for(Wp=0;Wp<ap.length;++Wp)Up=ap[Wp],qp=Bp[Wp],$e(qp),Ap["val_"+Up]=qp}}),[4,Ep.onBatchEnd(Fp,Ip)];case 2:return Pp.sent(),disposeTensorsInLogs(Ip),_d.stopTraining_?[2,"break"]:[2]}})},kp=0,Dp.label=3;case 3:return kp<Lp.length?[5,Mp(kp)]:[3,6];case 4:if(Dp.sent()==="break")return[3,6];Dp.label=5;case 5:return++kp,[3,3];case 6:Op.dispose(),Dp.label=7;case 7:return[4,Ep.onEpochEnd(Cp,Ap)];case 8:return Dp.sent(),_d.stopTraining_?[2,"break"]:[2]}})},Rp=mp,$p.label=2;case 2:return Rp<lp?[5,_p(Rp)]:[3,5];case 3:if($p.sent()==="break")return[3,5];$p.label=4;case 4:return++Rp,[3,2];case 5:return[4,Ep.onTrainEnd()];case 6:return $p.sent(),[4,_d.history.syncData()];case 7:return $p.sent(),[2,_d.history]}})})}function fitTensors(_d,rp,np,ap){return ap===void 0&&(ap={}),__awaiter$8(this,void 0,void 0,function(){var sp,lp,up,cp,dp,fp,pp,hp,mp,gp,vp,xp,Sp,yp,bp,Ep,wp,_p,Rp,$p,Cp,Ap;return __generator$8(this,function(Op){switch(Op.label){case 0:if(_d.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");_d.isTraining=!0,Op.label=1;case 1:return Op.trys.push([1,,7,8]),checkBatchSize(hp=ap.batchSize==null?32:ap.batchSize),mp=!1,[4,_d.standardizeUserData(rp,np,ap.sampleWeight,ap.classWeight,mp,hp)];case 2:if(gp=Op.sent(),sp=gp[0],lp=gp[1],pp=gp[2],vp=!1,xp=void 0,!(ap.validationData!=null&&ap.validationData.length>0))return[3,4];if(vp=!0,ap.validationData.length!==2)throw ap.validationData.length===3?new NotImplementedError("validationData including sample weights is not supported yet."):new ValueError("When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; "+ap.validationData+" is invalid.");return up=ap.validationData[0],cp=ap.validationData[1],Sp=!0,[4,_d.standardizeUserData(up,cp,null,null,Sp,hp)];case 3:return yp=Op.sent(),dp=yp[0],fp=yp[1],xp=dp.concat(fp),[3,5];case 4:ap.validationSplit!=null&&ap.validationSplit>0&&ap.validationSplit<1?(vp=!0,bp=Math.floor(sp[0].shape[0]*(1-ap.validationSplit)),Ep=sp[0].shape[0],dp=sliceArrays(sp,bp,Ep),sp=sliceArrays(sp,0,bp),fp=sliceArrays(lp,bp,Ep),lp=sliceArrays(lp,0,bp),xp=dp.concat(fp)):ap.validationSteps!=null&&(vp=!0),Op.label=5;case 5:return wp=sp.concat(lp).concat(pp),_d.checkTrainableWeightsConsistency(),_p=_d.makeTrainFunction(),Rp=_d.getDedupedMetricsNames(),$p=void 0,Cp=void 0,vp?(_d.makeTestFunction(),$p=_d.testFunction,Cp=Rp.slice().concat(Rp.map(function(Lp){return"val_"+Lp}))):($p=null,xp=[],Cp=Rp.slice()),Ap=standardizeCallbacks(ap.callbacks,ap.yieldEvery),[4,fitLoop(_d,_p,wp,Rp,hp,ap.epochs,ap.verbose,Ap,$p,xp,ap.shuffle,Cp,ap.initialEpoch,null,null)];case 6:return[2,Op.sent()];case 7:return _d.isTraining=!1,disposeNewTensors(sp,rp),disposeNewTensors(lp,np),disposeNewTensors(dp,up),disposeNewTensors(fp,cp),pp!=null&&Xe(pp),[7];case 8:return[2]}})})}function ensureTensorsRank2OrHigher(_d){var rp=[];_d instanceof dt&&(_d=[_d]);for(var np=0;np<_d.length;++np){var ap=_d[np];if(ap.rank===1)rp.push(expandDims$1(ap,1));else{if(ap.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");rp.push(ap)}}return rp}function disposeNewTensors(_d,rp){if(_d!=null){var np=[];if(rp instanceof dt)np.push(rp.id);else if(Array.isArray(rp))rp.forEach(function(dp){return np.push(dp.id)});else if(rp!=null)for(var ap in rp){var sp=rp[ap];np.push(sp.id)}var lp=[];if(_d instanceof dt)np.indexOf(_d.id)===-1&&lp.push(_d);else if(Array.isArray(_d))_d.forEach(function(dp){np.indexOf(dp.id)===-1&&lp.push(dp)});else if(_d!=null)for(var up in _d){var cp=_d[up];np.indexOf(cp.id)===-1&&lp.push(cp)}lp.forEach(function(dp){dp.isDisposed||dp.dispose()})}}function isDataTensor(_d){return _d instanceof dt}function isDataArray(_d){return Array.isArray(_d)}function isDataDict(_d){return!isDataTensor(_d)&&!isDataArray(_d)}function standardizeInputData(_d,rp,np,ap,sp){if(ap===void 0&&(ap=!0),sp===void 0&&(sp=""),rp==null||rp.length===0){if(_d!=null){var lp=!1;if(isDataArray(_d)&&_d.length>0)lp=!0;else if(isDataDict(_d)){for(var up in _d)if(_d.hasOwnProperty(up)){lp=!0;break}}else lp=!0;if(lp)throw new ValueError("Error when checking model "+sp+" expected no data, but got "+_d)}return[]}if(_d==null)return rp.map(function(Sp){return null});var cp;if(isDataDict(_d)){_d=_d,cp=[];for(var dp=0,fp=rp;dp<fp.length;dp++){var pp=fp[dp];if(_d[pp]==null)throw new ValueError('No data provided for "'+pp+'". Need data for each key in: '+rp);cp.push(_d[pp])}}else if(isDataArray(_d)){if((_d=_d).length!==rp.length)throw new ValueError("Error when checking model "+sp+": the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see "+rp.length+" Tensor(s), but instead got the following list of Tensor(s): "+_d);cp=_d}else{if(_d=_d,rp.length>1)throw new ValueError("The model "+sp+" expects "+rp.length+" Tensor(s), but only received one Tensor. Found: Tensor with shape "+_d.shape);cp=[_d]}if(cp=ensureTensorsRank2OrHigher(cp),np!=null){for(var hp=0;hp<rp.length;++hp)if(np[hp]!=null){var mp=cp[hp];if(mp.shape.length!==np[hp].length)throw new ValueError("Error when checking "+sp+": expected "+rp[hp]+" to have "+np[hp].length+" dimension(s). but got array with shape "+mp.shape);for(var gp=0;gp<np[hp].length;++gp)if(gp!==0||ap){var vp=mp.shape[gp],xp=np[hp][gp];if(xp!=null&&xp>=0&&vp!==xp)throw new ValueError("Error when checking "+sp+": expected "+rp[hp]+" to have shape ["+np[hp]+"], but got array with shape ["+mp.shape+"].")}}}return cp}function checkArrayLengths(_d,rp,np){var ap=unique(_d.map(function(lp){return lp.shape[0]}));ap.sort();var sp=unique(rp.map(function(lp){return lp.shape[0]}));if(sp.sort(),ap.length>1)throw new ValueError("All input Tensors (x) should have the same number of samples. Got array shapes: "+JSON.stringify(_d.map(function(lp){return lp.shape})));if(sp.length>1)throw new ValueError("All target Tensors (y) should have the same number of samples. Got array shapes: "+JSON.stringify(rp.map(function(lp){return lp.shape})));if(ap.length>0&&sp.length>0&&!tt.arraysEqual(ap,sp))throw new ValueError("Input Tensors should have the same number of samples as target Tensors. Found "+ap[0]+" input sample(s) and "+sp[0]+" target sample(s).")}function checkLossAndTargetCompatibility(_d,rp,np){for(var ap=[meanSquaredError,binaryCrossentropy,categoricalCrossentropy],sp=0;sp<_d.length;++sp){var lp=_d[sp],up=rp[sp],cp=np[sp];if(up!=null){if(up===categoricalCrossentropy&&lp.shape[lp.shape.length-1]===1)throw new ValueError("You are passing a target array of shape "+lp.shape+" while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].");if(ap.indexOf(up)!==-1)for(var dp=lp.shape.slice(1),fp=cp.slice(1),pp=0;pp<dp.length;++pp){var hp=dp[pp],mp=fp[pp];if(mp!=null&&hp!==mp)throw new ValueError("A target Tensor with shape "+lp.shape+" was passed for an output of shape "+cp+", while using a loss function that expects targets to have the same shape as the output.")}}}}function checkInputData(_d,rp,np,ap,sp){var lp;if(ap===void 0&&(ap=!0),sp===void 0&&(sp=""),Array.isArray(_d)){if(_d.length!==rp.length)throw new ValueError("Error when checking model "+sp+": the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see "+rp.length+" Tensor(s), but instead got "+_d.length+" Tensors(s).");lp=_d}else{if(rp.length>1)throw new ValueError("The model expects "+rp.length+" "+sp+" Tensors, but only received one Tensor. Found: array with shape "+JSON.stringify(_d.shape)+".");lp=[_d]}if(np!=null){for(var up=0;up<rp.length;++up)if(np[up]!=null){var cp=lp[up];if(cp.shape.length!==np[up].length)throw new ValueError("Error when checking "+sp+": expected "+rp[up]+" to have "+np[up].length+" dimension(s), but got array with shape "+JSON.stringify(cp.shape));for(var dp=0;dp<np[up].length;++dp)if(dp!==0||ap){var fp=cp.shape[dp],pp=np[up][dp];if(pp!=null&&pp!==fp)throw new ValueError("Error when checking "+sp+": expected "+rp[up]+" to have shape "+JSON.stringify(np[up])+" but got array with shape "+JSON.stringify(cp.shape)+".")}}}}function collectMetrics(_d,rp){if(_d==null||Array.isArray(_d)&&_d.length===0)return rp.map(function(dp){return[]});var np;if(typeof _d=="string"||typeof _d=="function")np=[_d];else{if(!Array.isArray(_d)&&typeof _d!="object")throw new TypeError("Type of metrics argument not understood. Expected an string,function, Array, or Object, found: "+_d);np=_d}if(Array.isArray(np))return rp.map(function(dp){return np});for(var ap=[],sp=0,lp=rp;sp<lp.length;sp++){var up=lp[sp],cp=np.hasOwnProperty(up)?np[up]:[];Array.isArray(cp)||(cp=[cp]),ap.push(cp)}return ap}var LAYERS_MODEL_FORMAT_NAME="layers-model",LayersModel=function(_d){function rp(np){var ap=_d.call(this,np)||this;return ap.isTraining=!1,ap}return __extends$h(rp,_d),rp.prototype.summary=function(np,ap,sp){if(sp===void 0&&(sp=console.log),!this.built)throw new ValueError("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");printSummary(this,np,ap,sp)},rp.prototype.compile=function(np){var ap=this;if(np.loss==null&&(np.loss=[]),this.loss=np.loss,typeof np.optimizer=="string")this.optimizer_=getOptimizer(np.optimizer),this.isOptimizerOwned=!0;else{if(!(np.optimizer instanceof Hf))throw new ValueError("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=np.optimizer,this.isOptimizerOwned=!1}var sp=[];if(Array.isArray(np.loss)||typeof np.loss=="string"||typeof np.loss=="function")if(Array.isArray(np.loss)){if(np.loss.length!==this.outputs.length)throw new ValueError("When passing an Array as loss, it should have one entry per model output. The model has "+this.outputs.length+" output(s), but you passed loss="+np.loss+".");var lp=np.loss;sp=lp.map(function(Sp){return get(Sp)})}else{var up=get(np.loss);this.outputs.forEach(function(Sp){sp.push(up)})}else{for(var cp in np.loss=np.loss,np.loss)if(this.outputNames.indexOf(cp)===-1)throw new ValueError('Unknown entry in loss dictionary: "'+cp+'". Only expected the following keys: '+this.outputNames);for(var dp=0,fp=this.outputNames;dp<fp.length;dp++){var pp=fp[dp];np.loss[pp]==null&&console.warn('Output "'+pp+'" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to '+pp+" during training"),sp.push(get(np.loss[pp]))}}this.lossFunctions=sp,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(var hp=0;hp<this.outputs.length;++hp){var mp=this.internalOutputShapes[hp],gp=this.outputNames[hp];this.feedOutputNames.push(gp),this.feedOutputShapes.push(mp),this.feedLossFns.push(this.lossFunctions[hp])}var vp=[];this.metrics=np.metrics,this.metricsNames=["loss"],this.metricsTensors=[],nameScope("loss",function(){for(var Sp=0;Sp<ap.outputs.length;++Sp)if(vp.indexOf(Sp)===-1){var yp=ap.lossFunctions[Sp];ap.outputs.length>1&&(ap.metricsTensors.push([yp,Sp]),ap.metricsNames.push(ap.outputNames[Sp]+"_loss"))}});var xp=collectMetrics(np.metrics,this.outputNames);nameScope("metric",function(){for(var Sp=function(bp){if(vp.indexOf(bp)!==-1)return"continue";(function(Ep){for(var wp,_p,Rp,$p=function(Op){if(typeof Op=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(Op)!==-1){var Lp=ap.internalOutputShapes[bp];Lp[Lp.length-1]===1||ap.lossFunctions[bp]===binaryCrossentropy?["accuracy","acc"].indexOf(Op)!==-1?_p=binaryAccuracy:["crossentropy","ce"].indexOf(Op)!==-1&&(_p=binaryCrossentropy$1):ap.lossFunctions[bp]===sparseCategoricalCrossentropy?["accuracy","acc"].indexOf(Op)!==-1?_p=sparseCategoricalAccuracy:["crossentropy","ce"].indexOf(Op)!==-1&&(_p=sparseCategoricalCrossentropy$1):["accuracy","acc"].indexOf(Op)!==-1?_p=categoricalAccuracy:["crossentropy","ce"].indexOf(Op)!==-1&&(_p=categoricalCrossentropy$1);var Mp=void 0;["accuracy","acc"].indexOf(Op)!==-1?Mp="acc":["crossentropy","ce"].indexOf(Op)!==-1&&(Mp="ce"),Rp=_p,wp=""+Mp}else{var kp=get$1(Op);Rp=kp,wp=""+getLossOrMetricName(Op)}var Dp;nameScope(wp,function(){Dp=Rp}),function(Fp,Ip,Pp){ap.outputNames.length>1&&(Ip=ap.outputNames[Fp]+"_"+Ip),ap.metricsNames.push(Ip),ap.metricsTensors.push([Pp,Fp])}(bp,wp,Dp)},Cp=0,Ap=Ep;Cp<Ap.length;Cp++)$p(Ap[Cp])})(xp[bp])},yp=0;yp<ap.outputs.length;++yp)Sp(yp)}),this.collectedTrainableWeights=this.trainableWeights},rp.prototype.checkTrainableWeightsConsistency=function(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")},rp.prototype.evaluate=function(np,ap,sp){sp===void 0&&(sp={});var lp=sp.batchSize==null?32:sp.batchSize;checkBatchSize(lp);var up=this.standardizeUserDataXY(np,ap,!0,lp);try{var cp=up[0].concat(up[1]);this.makeTestFunction();var dp=this.testFunction;return singletonOrArray(this.testLoop(dp,cp,lp,sp.verbose,sp.steps))}finally{disposeNewTensors(up[0],np),disposeNewTensors(up[1],ap)}},rp.prototype.evaluateDataset=function(np,ap){return __awaiter$8(this,void 0,void 0,function(){return __generator$8(this,function(sp){return this.makeTestFunction(),[2,evaluateDataset(this,np,ap)]})})},rp.prototype.checkNumSamples=function(np,ap,sp,lp){var up;if(lp===void 0&&(lp="steps"),sp!=null){if(up=null,ap!=null)throw new ValueError("If "+lp+" is set, batchSize must be null or undefined.Got batchSize = "+ap)}else{if(np==null)throw new ValueError("Either the input data should have a defined shape, or "+lp+" shoud be specified.");up=Array.isArray(np)?np[0].shape[0]:np.shape[0]}return up},rp.prototype.execute=function(np,ap){if(Array.isArray(ap)&&ap.length===0)throw new ValueError("`outputs` is an empty Array, which is not allowed.");var sp=Array.isArray(ap),lp=sp?ap:[ap],up=this.retrieveSymbolicTensors(lp),cp=new FeedDict;if(np instanceof dt&&(np=[np]),Array.isArray(np)){if(np.length!==this.inputs.length)throw new ValueError("The number of inputs provided ("+np.length+") does not match the number of inputs of this model ("+this.inputs.length+").");for(var dp=0;dp<this.inputs.length;++dp)cp.add(this.inputs[dp],np[dp])}else for(var fp=0,pp=this.inputs;fp<pp.length;fp++){var hp=pp[fp],mp=np[hp.name];if(mp==null)throw new ValueError("No value is provided for the model's input "+hp.name);cp.add(hp,mp)}var gp=execute(up,cp);return sp?gp:gp[0]},rp.prototype.retrieveSymbolicTensors=function(np){for(var ap=pyListRepeat(null,np.length),sp=np.length,lp=0,up=this.layers;lp<up.length;lp++){for(var cp=up[lp],dp=Array.isArray(cp.output)?cp.output:[cp.output],fp=dp.map(function(gp){return gp.name}),pp=0;pp<np.length;++pp){var hp=fp.indexOf(np[pp]);if(hp!==-1&&(ap[pp]=dp[hp],sp--),sp===0)break}if(sp===0)break}if(sp>0){var mp=[];throw ap.forEach(function(gp,vp){gp==null&&mp.push(np[vp])}),new ValueError("Cannot find SymbolicTensors for output name(s): "+JSON.stringify(mp))}return ap},rp.prototype.predictLoop=function(np,ap,sp){var lp=this;return ap===void 0&&(ap=32),sp===void 0&&(sp=!1),je(function(){var up=lp.checkNumSamples(np);if(sp)throw new NotImplementedError("Verbose predictLoop() is not implemented yet.");for(var cp=makeBatches(up,ap),dp=lp.outputs.map(function(hp){return[]}),fp=function(hp){je(function(){var mp=cp[hp][0],gp=cp[hp][1],vp=sliceArrays(np,mp,gp),xp=[];if(Array.isArray(vp))for(var Sp=0;Sp<vp.length;++Sp)xp.push({key:lp.inputs[Sp],value:vp[Sp]});else xp.push({key:lp.inputs[0],value:vp});var yp=new FeedDict(xp);return execute(lp.outputs,yp)}).forEach(function(mp,gp){return dp[gp].push(mp)})},pp=0;pp<cp.length;++pp)fp(pp);return singletonOrArray(dp.map(function(hp){return Gn(hp,0)}))})},rp.prototype.predict=function(np,ap){ap===void 0&&(ap={});var sp=ensureTensorsRank2OrHigher(np);checkInputData(sp,this.inputNames,this.feedInputShapes,!1);try{var lp=ap.batchSize==null?32:ap.batchSize;return checkBatchSize(lp),this.predictLoop(sp,lp)}finally{disposeNewTensors(sp,np)}},rp.prototype.predictOnBatch=function(np){checkInputData(np,this.inputNames,this.feedInputShapes,!0);var ap=(Array.isArray(np)?np[0]:np).shape[0];return this.predictLoop(np,ap)},rp.prototype.standardizeUserDataXY=function(np,ap,sp,lp){if(this.optimizer_==null)throw new RuntimeError("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");for(var up=[],cp=0;cp<this.feedOutputShapes.length;++cp){var dp=this.feedOutputShapes[cp];this.feedLossFns[cp]===sparseCategoricalCrossentropy?up.push(dp.slice(0,dp.length-1).concat([1])):up.push(dp)}if(checkArrayLengths(np=standardizeInputData(np,this.feedInputNames,this.feedInputShapes,!1,"input"),ap=standardizeInputData(ap,this.feedOutputNames,up,!1,"target")),checkLossAndTargetCompatibility(ap,this.feedLossFns,this.feedOutputShapes),this.stateful&&lp!=null&&lp>0&&np[0].shape[0]%lp!=0)throw new ValueError("In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size "+lp+". Found: "+np[0].shape[0]+" sample(s).");return[np,ap]},rp.prototype.standardizeUserData=function(np,ap,sp,lp,up,cp){return up===void 0&&(up=!0),__awaiter$8(this,void 0,void 0,function(){var dp,fp,pp,hp,mp,gp,vp,xp;return __generator$8(this,function(Sp){switch(Sp.label){case 0:if(dp=this.standardizeUserDataXY(np,ap,up,cp),fp=dp[0],pp=dp[1],sp!=null)throw new Error("sample weight is not supported yet.");if(hp=null,lp==null)return[3,4];mp=standardizeClassWeights(lp,this.outputNames),hp=[],gp=0,Sp.label=1;case 1:return gp<mp.length?(xp=(vp=hp).push,[4,standardizeWeights(pp[gp],null,mp[gp])]):[3,4];case 2:xp.apply(vp,[Sp.sent()]),Sp.label=3;case 3:return++gp,[3,1];case 4:return[2,[fp,pp,hp]]}})})},rp.prototype.testLoop=function(np,ap,sp,lp,up){var cp=this;return lp===void 0&&(lp=0),je(function(){var dp=cp.checkNumSamples(ap,sp,up,"steps"),fp=[];if(lp>0)throw new NotImplementedError("Verbose mode is not implemented yet.");if(up!=null)throw new NotImplementedError("steps mode in testLoop() is not implemented yet");for(var pp=makeBatches(dp,sp),hp=Dn(range(0,dp)),mp=0;mp<pp.length;++mp){var gp=pp[mp][0],vp=pp[mp][1],xp=sliceAlongFirstAxis(hp,gp,vp-gp),Sp=sliceArraysByIndices(ap,xp),yp=np(Sp);if(mp===0)for(var bp=0;bp<yp.length;++bp)fp.push(An(0));for(bp=0;bp<yp.length;++bp){var Ep=yp[bp];fp[bp]=Vs(fp[bp],tc(vp-gp,Ep))}}for(bp=0;bp<fp.length;++bp)fp[bp]=qs(fp[bp],dp);return fp})},rp.prototype.getDedupedMetricsNames=function(){for(var np=this.metricsNames,ap=[],sp=0;sp<np.length;++sp){var lp=np[sp],up=lp;count(np,lp)>1&&(up+="_"+count(np.slice(0,sp),lp)),ap.push(up)}return ap},rp.prototype.makeTrainFunction=function(){var np=this;return function(ap){var sp=[],lp=ap.slice(0,np.inputs.length),up=ap.slice(np.inputs.length,np.inputs.length+np.outputs.length),cp=ap.slice(np.inputs.length+np.outputs.length,np.inputs.length+2*np.outputs.length),dp=[],fp=np.collectedTrainableWeights.map(function(pp){return pp.read()});return[np.optimizer_.minimize(function(){for(var pp=[],hp=0;hp<np.inputs.length;++hp)pp.push({key:np.inputs[hp],value:lp[hp]});var mp,gp=new FeedDict(pp),vp=execute(np.outputs,gp,{training:!0});for(hp=0;hp<np.lossFunctions.length;++hp){var xp=(0,np.lossFunctions[hp])(up[hp],vp[hp]);cp[hp]!=null&&(xp=computeWeightedLoss(xp,cp[hp]));var Sp=fl(xp);sp.push(Sp),mp=hp===0?xp:Vs(mp,xp)}for(hp=0;hp<np.metricsTensors.length;++hp){var yp=void 0;if(np.outputs.length>1&&hp<np.outputs.length)yp=sp[hp];else{var bp=np.metricsTensors[hp][0],Ep=np.metricsTensors[hp][1];yp=fl(bp(up[Ep],vp[Ep]))}$e(yp),dp.push(yp)}return mp=fl(mp),np.calculateLosses().forEach(function(wp){mp=Vs(mp,wp)}),mp},!0,fp)].concat(dp)}},rp.prototype.makeTestFunction=function(){var np=this;this.testFunction=function(ap){return je(function(){for(var sp,lp=[],up=ap.slice(0,np.inputs.length),cp=ap.slice(np.inputs.length,np.inputs.length+np.outputs.length),dp=[],fp=0;fp<np.inputs.length;++fp)dp.push({key:np.inputs[fp],value:up[fp]});var pp=new FeedDict(dp),hp=execute(np.outputs,pp);for(fp=0;fp<np.lossFunctions.length;++fp){var mp=np.lossFunctions[fp],gp=fl(mp(cp[fp],hp[fp]));sp=fp===0?gp:Vs(sp,gp),lp.push(sp)}for(fp=0;fp<np.metricsTensors.length;++fp){var vp=np.metricsTensors[fp][0],xp=np.metricsTensors[fp][1],Sp=fl(vp(cp[xp],hp[xp]));lp.push(Sp)}return lp})}},rp.prototype.fit=function(np,ap,sp){return sp===void 0&&(sp={}),__awaiter$8(this,void 0,void 0,function(){return __generator$8(this,function(lp){return[2,fitTensors(this,np,ap,sp)]})})},rp.prototype.fitDataset=function(np,ap){return __awaiter$8(this,void 0,void 0,function(){return __generator$8(this,function(sp){return[2,fitDataset(this,np,ap)]})})},rp.prototype.trainOnBatch=function(np,ap){return __awaiter$8(this,void 0,void 0,function(){var sp,lp,up,cp,dp,fp,pp,hp,mp;return __generator$8(this,function(gp){switch(gp.label){case 0:return[4,this.standardizeUserData(np,ap)];case 1:sp=gp.sent(),lp=sp[0],up=sp[1],cp=this.makeTrainFunction(),dp=cp(lp.concat(up)),fp=[],pp=0,hp=dp,gp.label=2;case 2:return pp<hp.length?[4,hp[pp].data()]:[3,5];case 3:mp=gp.sent(),fp.push(mp[0]),gp.label=4;case 4:return pp++,[3,2];case 5:return Xe(dp),[2,singletonOrArray(fp)]}})})},rp.prototype.getNamedWeights=function(np){for(var ap=[],sp=np!=null&&np.trainableOnly,lp=sp?this.trainableWeights:this.weights,up=this.getWeights(sp),cp=0;cp<lp.length;++cp)sp&&!lp[cp].trainable||ap.push({name:lp[cp].originalName,tensor:up[cp]});return ap},Object.defineProperty(rp.prototype,"stopTraining",{get:function(){return this.stopTraining_},set:function(np){this.stopTraining_=np},enumerable:!0,configurable:!0}),Object.defineProperty(rp.prototype,"optimizer",{get:function(){return this.optimizer_},set:function(np){this.optimizer_!==np&&(this.optimizer_=np,this.isOptimizerOwned=!1)},enumerable:!0,configurable:!0}),rp.prototype.dispose=function(){var np=_d.prototype.dispose.call(this);if(np.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){var ap=qe().numTensors;this.optimizer_.dispose(),np.numDisposedVariables+=ap-qe().numTensors}return np},rp.prototype.getLossIdentifiers=function(){var np;if(typeof this.loss=="string")np=toSnakeCase(this.loss);else if(Array.isArray(this.loss)){for(var ap=0,sp=this.loss;ap<sp.length;ap++)if(typeof sp[ap]!="string")throw new Error("Serialization of non-string loss is not supported.");np=this.loss.map(function(pp){return toSnakeCase(pp)})}else{var lp=Object.keys(this.loss);np={};for(var up=this.loss,cp=0,dp=lp;cp<dp.length;cp++){var fp=dp[cp];if(typeof up[fp]!="string")throw new Error("Serialization of non-string loss is not supported.");np[fp]=toSnakeCase(up[fp])}}return np},rp.prototype.getMetricIdentifiers=function(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[toSnakeCase(getLossOrMetricName(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(function(sp){return toSnakeCase(getLossOrMetricName(sp))});var np={};for(var ap in this.metrics)np[ap]=toSnakeCase(getLossOrMetricName(this.metrics[ap]));return np},rp.prototype.getTrainingConfig=function(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}},rp.prototype.loadTrainingConfig=function(np){if(np.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(np.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(np.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");var ap,sp,lp=deserialize(convertPythonicToTs(np.optimizer_config));if(typeof np.loss=="string")ap=toCamelCase$1(np.loss);else if(Array.isArray(np.loss))ap=np.loss.map(function(cp){return toCamelCase$1(cp)});else if(np.loss!=null)for(var up in ap={},np.loss)ap[up]=toCamelCase$1(np.loss[up]);if(Array.isArray(np.metrics))sp=np.metrics.map(function(cp){return toCamelCase$1(cp)});else if(np.metrics!=null)for(var up in sp={},np.metrics)sp[up]=toCamelCase$1(np.metrics[up]);this.compile({loss:ap,metrics:sp,optimizer:lp})},rp.prototype.save=function(np,ap){return __awaiter$8(this,void 0,void 0,function(){var sp,lp,up,cp,dp,fp,pp,hp,mp,gp,vp,xp,Sp,yp;return __generator$8(this,function(bp){switch(bp.label){case 0:if(typeof np=="string"){if((sp=Sf.getSaveHandlers(np)).length===0)throw new ValueError("Cannot find any save handlers for URL '"+np+"'");if(sp.length>1)throw new ValueError("Found more than one ("+sp.length+") save handlers for URL '"+np+"'");np=sp[0]}if(np.save==null)throw new ValueError("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return[4,Sf.encodeWeights(this.getNamedWeights(ap))];case 1:return lp=bp.sent(),up=!1,cp=null,dp=this.toJSON(cp,up),fp={modelTopology:dp,format:LAYERS_MODEL_FORMAT_NAME,generatedBy:"TensorFlow.js tfjs-layers v"+version$8,convertedBy:null},ap!=null&&ap.includeOptimizer&&this.optimizer!=null?(fp.trainingConfig=this.getTrainingConfig(),pp="optimizer",xp=(vp=Sf).encodeWeights,[4,this.optimizer.getWeights()]):[3,4];case 2:return[4,xp.apply(vp,[bp.sent(),pp])];case 3:hp=bp.sent(),mp=hp.data,gp=hp.specs,(yp=lp.specs).push.apply(yp,gp),lp.data=Sf.concatenateArrayBuffers([lp.data,mp]),bp.label=4;case 4:return this.userDefinedMetadata!=null&&(Sp=!0,checkUserDefinedMetadata(this.userDefinedMetadata,this.name,Sp),fp.userDefinedMetadata=this.userDefinedMetadata),fp.weightData=lp.data,fp.weightSpecs=lp.specs,[2,np.save(fp)]}})})},rp.prototype.setUserDefinedMetadata=function(np){checkUserDefinedMetadata(np,this.name),this.userDefinedMetadata=np},rp.prototype.getUserDefinedMetadata=function(){return this.userDefinedMetadata},rp.className="Model",rp}(Container);function modelFromJSON(_d,rp){return __awaiter$8(this,void 0,void 0,function(){var np,ap,sp,lp,up,cp,dp,fp;return __generator$8(this,function(pp){switch(pp.label){case 0:return"modelTopology"in _d||(_d={modelTopology:_d}),(np=(_d=_d).modelTopology).model_config!=null&&(np=np.model_config),ap=convertPythonicToTs(np),sp=deserialize(ap,rp),_d.weightsManifest==null?[3,2]:[4,Sf.loadWeights(_d.weightsManifest,_d.pathPrefix,sp.weights.map(function(hp){return hp.originalName}))];case 1:for(lp=pp.sent(),up={},cp=0,dp=sp.weights;cp<dp.length;cp++)fp=dp[cp],up[fp.originalName]=lp[fp.originalName];sp.loadWeights(up),Xe(lp),pp.label=2;case 2:return[2,sp]}})})}function loadLayersModelInternal(_d,rp){return __awaiter$8(this,void 0,void 0,function(){var np;return __generator$8(this,function(ap){if(rp==null&&(rp={}),typeof _d=="string"){if((np=Sf.getLoadHandlers(_d,rp.onProgress)).length===0)np.push(Sf.browserHTTPRequest(_d,rp));else if(np.length>1)throw new ValueError("Found more than one ("+np.length+") load handlers for URL '"+_d+"'");_d=np[0]}return[2,loadLayersModelFromIOHandler(_d,void 0,rp)]})})}function loadLayersModelFromIOHandler(_d,rp,np){return __awaiter$8(this,void 0,void 0,function(){var ap,sp,lp,up,cp,dp,fp,pp,hp;return __generator$8(this,function(mp){switch(mp.label){case 0:if(np==null&&(np={}),_d.load==null)throw new ValueError("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");return[4,_d.load()];case 1:if(ap=mp.sent(),(sp=ap.modelTopology).model_config!=null&&(sp=sp.model_config),lp=np.strict==null||np.strict,up=ap.weightData!=null&&ap.weightSpecs!=null&&lp,cp=deserialize(convertPythonicToTs(sp),rp,up),(dp=ap.trainingConfig)!=null&&cp.loadTrainingConfig(dp),ap.userDefinedMetadata!=null&&cp.setUserDefinedMetadata(ap.userDefinedMetadata),ap.weightData==null)return[3,4];if(ap.weightSpecs==null)throw new ValueError("LayersModel artifacts contains weight data, but not weight specs. Therefore loading of weights cannot proceed.");return fp=decodeModelAndOptimizerWeights(ap.weightData,ap.weightSpecs),pp=fp.modelWeights,hp=fp.optimizerWeights,cp.loadWeights(pp,lp),cp.optimizer!=null&&hp.length>0?[4,cp.optimizer.setWeights(hp)]:[3,3];case 2:mp.sent(),mp.label=3;case 3:Xe(pp),Xe(hp.map(function(gp){return gp.tensor})),mp.label=4;case 4:return[2,cp]}})})}function decodeModelAndOptimizerWeights(_d,rp){var np=Sf.decodeWeights(_d,rp),ap={},sp=[];return rp.forEach(function(lp){lp.group==="optimizer"?sp.push({name:lp.name,tensor:np[lp.name]}):ap[lp.name]=np[lp.name]}),{modelWeights:ap,optimizerWeights:sp}}Mf.registerClass(LayersModel);var Sequential=function(_d){function rp(np){var ap=_d.call(this,{inputs:[],outputs:[]})||this;if(np=np||{},ap.trainable=!0,ap.built=!1,ap.name=np.name!=null?np.name:getUid("sequential_"),np.layers!=null)for(var sp=0,lp=np.layers;sp<lp.length;sp++){var up=lp[sp];ap.add(up)}return ap}return __extends$h(rp,_d),rp.prototype.checkShape=function(np){if(np.inboundNodes[0].outputTensors[0].shape.some(function(ap){return ap<0}))throw new ValueError("Negative dimension size caused by adding layer "+np.name+" with input shape ["+np.inboundNodes[0].inputTensors[0].shape+"]")},rp.prototype.add=function(np){var ap,sp=np instanceof rp||np instanceof LayersModel;if(sp){if((ap=np).outputs.length!==1)throw new ValueError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(ap.inputs.length!==1)throw new ValueError("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(np.inboundNodes.length===0){if(np.batchInputShape==null)throw new ValueError("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");var lp=Input({batchShape:np.batchInputShape,dtype:np.dtype,name:np.name+"_input"});np.apply(lp)}if(sp)this.outputs=ap.outputs,this.inputs=ap.inputs;else{if(np.inboundNodes.length!==1)throw new ValueError("A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer "+np.name+" which has "+np.inboundNodes.length+" pre-existing inbound connections.");if(np.inboundNodes[0].outputTensors.length!==1)throw new ValueError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(np),this.outputs=[np.inboundNodes[0].outputTensors[0]],this.inputs=getSourceInputs(this.outputs[0])}this.inboundNodes=[],new Node({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:pyListRepeat(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(function(cp){return cp.shape}),outputShapes:this.outputs[0].shape})}else{var up=np.apply(this.outputs[0]);if(Array.isArray(up))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(np),this.outputs=[up],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(np),this.built=!1},rp.prototype.pop=function(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{var np=this.layers.length-1;this.layers[np].outboundNodes=[],this.outputs=[this.layers[np].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}},rp.prototype.call=function(np,ap){return this.model==null&&this.build(),this.model.call(np,ap)},rp.prototype.build=function(np){if(getExactlyOneShape(np),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new LayersModel({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0},rp.prototype.countParams=function(){return this.built||this.build(),_d.prototype.countParams.call(this)},rp.prototype.summary=function(np,ap,sp){sp===void 0&&(sp=console.log),this.built||this.build(),_d.prototype.summary.call(this,np,ap,sp)},rp.prototype.setWeights=function(np){this.model==null&&this.build(),this.model.setWeights(np)},rp.prototype.evaluate=function(np,ap,sp){if(sp===void 0&&(sp={}),!this.built)throw new RuntimeError("The model needs to be compiled before being used.");return this.model.evaluate(np,ap,sp)},rp.prototype.evaluateDataset=function(np,ap){return __awaiter$8(this,void 0,void 0,function(){return __generator$8(this,function(sp){if(!this.built)throw new RuntimeError("The model needs to be compiled before being used.");return[2,this.model.evaluateDataset(np,ap)]})})},rp.prototype.predict=function(np,ap){return ap===void 0&&(ap={}),this.model==null&&this.build(),this.model.predict(np,ap)},rp.prototype.predictOnBatch=function(np){return this.model==null&&this.build(),this.model.predictOnBatch(np)},rp.prototype.compile=function(np){this.build(),this.model.compile(np),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames},Object.defineProperty(rp.prototype,"optimizer",{get:function(){return this.model==null?void 0:this.model.optimizer},set:function(np){this.model.optimizer=np},enumerable:!0,configurable:!0}),rp.prototype.fit=function(np,ap,sp){return sp===void 0&&(sp={}),__awaiter$8(this,void 0,void 0,function(){return __generator$8(this,function(lp){if(!this.built)throw new RuntimeError("The model needs to be compiled before being used.");return[2,this.model.fit(np,ap,sp)]})})},rp.prototype.fitDataset=function(np,ap){return __awaiter$8(this,void 0,void 0,function(){return __generator$8(this,function(sp){if(!this.built)throw new RuntimeError("The model needs to be compiled before being used.");return[2,this.model.fitDataset(np,ap)]})})},rp.prototype.trainOnBatch=function(np,ap){return __awaiter$8(this,void 0,void 0,function(){return __generator$8(this,function(sp){return[2,this.model.trainOnBatch(np,ap)]})})},rp.fromConfig=function(np,ap,sp,lp){var up;lp===void 0&&(lp=!1);var cp={};if(ap instanceof Array){if(ap[0].className==null||ap[0].className==="Merge")throw new ValueError("Legacy serialization format not supported yet.");up=ap}else tt.assert(ap.layers!=null,function(){return"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."}),up=ap.layers,delete ap.layers,cp=ap;var dp=new np(cp);if(!(dp instanceof rp))throw new NotImplementedError("Sequential.fromConfig called on non-Sequential input: "+dp);for(var fp=0,pp=up;fp<pp.length;fp++){var hp=deserialize(pp[fp],void 0,lp);lp&&hp.setFastWeightInitDuringBuild(!0),dp.add(hp)}return dp},Object.defineProperty(rp.prototype,"stopTraining",{get:function(){if(this.model==null)throw new ValueError("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining},set:function(np){if(this.model==null)throw new ValueError("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=np},enumerable:!0,configurable:!0}),rp.prototype.getConfig=function(){for(var np=[],ap=0,sp=this.layers;ap<sp.length;ap++){var lp=sp[ap],up={};up.className=lp.getClassName(),up.config=lp.getConfig(),np.push(up)}return{name:this.name,layers:np}},rp.className="Sequential",rp}(LayersModel);function model(_d){return new LayersModel(_d)}function sequential(_d){return new Sequential(_d)}function loadLayersModel(_d,rp){return rp==null&&(rp={}),loadLayersModelInternal(_d,rp)}function input(_d){return Input(_d)}function registerCallbackConstructor(_d,rp){CallbackConstructorRegistry.registerCallbackConstructor(_d,rp)}Mf.registerClass(Sequential);var Activation=function(_d){function rp(){return _d!==null&&_d.apply(this,arguments)||this}return __extends$h(rp,_d),rp.prototype.getConfig=function(){return{}},rp}(Mf.Serializable),Elu=function(_d){function rp(){return _d!==null&&_d.apply(this,arguments)||this}return __extends$h(rp,_d),rp.prototype.apply=function(np,ap){return ap===void 0&&(ap=1),elu$1(np,ap)},rp.className="elu",rp}(Activation);Mf.registerClass(Elu);var Selu=function(_d){function rp(){return _d!==null&&_d.apply(this,arguments)||this}return __extends$h(rp,_d),rp.prototype.apply=function(np){return Cl(np)},rp.className="selu",rp}(Activation);Mf.registerClass(Selu);var Relu=function(_d){function rp(){return _d!==null&&_d.apply(this,arguments)||this}return __extends$h(rp,_d),rp.prototype.apply=function(np){return bl(np)},rp.className="relu",rp}(Activation);Mf.registerClass(Relu);var Relu6=function(_d){function rp(){return _d!==null&&_d.apply(this,arguments)||this}return __extends$h(rp,_d),rp.prototype.apply=function(np){return je(function(){return Ys(6,bl(np))})},rp.className="relu6",rp}(Activation);Mf.registerClass(Relu6);var Linear=function(_d){function rp(){return _d!==null&&_d.apply(this,arguments)||this}return __extends$h(rp,_d),rp.prototype.apply=function(np){return np},rp.className="linear",rp}(Activation);Mf.registerClass(Linear);var Sigmoid=function(_d){function rp(){return _d!==null&&_d.apply(this,arguments)||this}return __extends$h(rp,_d),rp.prototype.apply=function(np){return cs(np)},rp.className="sigmoid",rp}(Activation);Mf.registerClass(Sigmoid);var HardSigmoid=function(_d){function rp(){return _d!==null&&_d.apply(this,arguments)||this}return __extends$h(rp,_d),rp.prototype.apply=function(np){return hardSigmoid(np)},rp.className="hardSigmoid",rp}(Activation);Mf.registerClass(HardSigmoid);var Softplus=function(_d){function rp(){return _d!==null&&_d.apply(this,arguments)||this}return __extends$h(rp,_d),rp.prototype.apply=function(np){return ms(np)},rp.className="softplus",rp}(Activation);Mf.registerClass(Softplus);var Softsign=function(_d){function rp(){return _d!==null&&_d.apply(this,arguments)||this}return __extends$h(rp,_d),rp.prototype.apply=function(np){return softsign(np)},rp.className="softsign",rp}(Activation);Mf.registerClass(Softsign);var Tanh=function(_d){function rp(){return _d!==null&&_d.apply(this,arguments)||this}return __extends$h(rp,_d),rp.prototype.apply=function(np){return bs(np)},rp.className="tanh",rp}(Activation);Mf.registerClass(Tanh);var Softmax=function(_d){function rp(){return _d!==null&&_d.apply(this,arguments)||this}return __extends$h(rp,_d),rp.prototype.apply=function(np,ap){return ap===void 0&&(ap=-1),io(np,ap)},rp.className="softmax",rp}(Activation);Mf.registerClass(Softmax);var LogSoftmax=function(_d){function rp(){return _d!==null&&_d.apply(this,arguments)||this}return __extends$h(rp,_d),rp.prototype.apply=function(np,ap){return ap===void 0&&(ap=-1),uo(np,ap)},rp.className="logSoftmax",rp}(Activation);function serializeActivation(_d){return _d.getClassName()}function deserializeActivation(_d,rp){return rp===void 0&&(rp={}),deserializeKerasObject(_d,Mf.SerializationMap.getMap().classNameMap,rp,"activation")}function getActivation(_d){var rp;return _d==null?deserializeActivation(rp={className:"linear",config:{}}):typeof _d=="string"?((rp={}).className=_d,rp.config={},deserializeActivation(rp)):_d instanceof Activation?_d:deserializeActivation(_d)}function assertObjectArgs(_d){if(_d!=null&&typeof _d!="object")throw new Error("Argument to L1L2 regularizer's constructor is expected to be an object, but received: "+_d)}Mf.registerClass(LogSoftmax);var Regularizer=function(_d){function rp(){return _d!==null&&_d.apply(this,arguments)||this}return __extends$h(rp,_d),rp}(Mf.Serializable),L1L2=function(_d){function rp(np){var ap=_d.call(this)||this;return assertObjectArgs(np),ap.l1=np==null||np.l1==null?.01:np.l1,ap.l2=np==null||np.l2==null?.01:np.l2,ap.hasL1=ap.l1!==0,ap.hasL2=ap.l2!==0,ap}return __extends$h(rp,_d),rp.prototype.apply=function(np){var ap=this;return je(function(){var sp=Pn([1]);return ap.hasL1&&(sp=Vs(sp,vl(tc(ap.l1,Vu(np))))),ap.hasL2&&(sp=Vs(sp,vl(tc(ap.l2,square(np))))),sp.asScalar()})},rp.prototype.getConfig=function(){return{l1:this.l1,l2:this.l2}},rp.fromConfig=function(np,ap){return new np({l1:ap.l1,l2:ap.l2})},rp.className="L1L2",rp}(Regularizer);function l1(_d){return assertObjectArgs(_d),new L1L2({l1:_d!=null?_d.l1:null,l2:0})}function l2(_d){return assertObjectArgs(_d),new L1L2({l2:_d!=null?_d.l2:null,l1:0})}Mf.registerClass(L1L2);var REGULARIZER_IDENTIFIER_REGISTRY_SYMBOL_MAP={l1l2:"L1L2"};function serializeRegularizer(_d){return serializeKerasObject(_d)}function deserializeRegularizer(_d,rp){return rp===void 0&&(rp={}),deserializeKerasObject(_d,Mf.SerializationMap.getMap().classNameMap,rp,"regularizer")}function getRegularizer(_d){return _d==null?null:typeof _d=="string"?deserializeRegularizer({className:_d in REGULARIZER_IDENTIFIER_REGISTRY_SYMBOL_MAP?REGULARIZER_IDENTIFIER_REGISTRY_SYMBOL_MAP[_d]:_d,config:{}}):_d instanceof Regularizer?_d:deserializeRegularizer(_d)}var ReLU=function(_d){function rp(np){var ap=_d.call(this,np??{})||this;return ap.supportsMasking=!0,np!=null&&(ap.maxValue=np.maxValue),ap}return __extends$h(rp,_d),rp.prototype.call=function(np,ap){np=getExactlyOneTensor(np);var sp=bl(np);return this.maxValue!=null&&(sp=$u(sp,0,this.maxValue)),sp},rp.prototype.computeOutputShape=function(np){return np},rp.prototype.getConfig=function(){var np={maxValue:this.maxValue},ap=_d.prototype.getConfig.call(this);return Object.assign(np,ap),np},rp.className="ReLU",rp}(Layer);Mf.registerClass(ReLU);var LeakyReLU=function(_d){function rp(np){var ap=_d.call(this,np??{})||this;return ap.DEFAULT_ALPHA=.3,np==null&&(np={}),ap.alpha=np.alpha==null?ap.DEFAULT_ALPHA:np.alpha,ap}return __extends$h(rp,_d),rp.prototype.call=function(np,ap){var sp=getExactlyOneTensor(np);return yl(sp,this.alpha)},rp.prototype.computeOutputShape=function(np){return np},rp.prototype.getConfig=function(){var np={alpha:this.alpha},ap=_d.prototype.getConfig.call(this);return Object.assign(np,ap),np},rp.className="LeakyReLU",rp}(Layer);Mf.registerClass(LeakyReLU);var PReLU=function(_d){function rp(np){var ap=_d.call(this,np??{})||this;if(ap.DEFAULT_ALPHA_INITIALIZER="zeros",np==null&&(np={}),ap.supportsMasking=!0,ap.alphaInitializer=getInitializer(np.alphaInitializer||ap.DEFAULT_ALPHA_INITIALIZER),ap.alphaRegularizer=getRegularizer(np.alphaRegularizer),ap.alphaConstraint=getConstraint(np.alphaConstraint),np.sharedAxes==null)ap.sharedAxes=null;else if(Array.isArray(np.sharedAxes))ap.sharedAxes=np.sharedAxes;else{if(typeof np.sharedAxes!="number")throw new ValueError("Expected sharedAxes to be a number or an array of numbers, but got "+np.sharedAxes);ap.sharedAxes=[np.sharedAxes]}return ap}return __extends$h(rp,_d),rp.prototype.build=function(np){var ap=(np=getExactlyOneShape(np)).slice(1);if(this.sharedAxes!=null)for(var sp=0,lp=this.sharedAxes;sp<lp.length;sp++)ap[(cp=lp[sp])-1]=1;this.alpha=this.addWeight("alpha",ap,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);var up={};if(this.sharedAxes!=null)for(var cp=1;cp<np.length;++cp)up[cp]=np[cp];this.inputSpec=[new InputSpec({ndim:np.length,axes:up})],this.built=!0},rp.prototype.call=function(np,ap){return np=getExactlyOneTensor(np),xl(np,this.alpha.read())},rp.prototype.getConfig=function(){var np={alphaInitializer:serializeInitializer(this.alphaInitializer),alphaRegularizer:serializeRegularizer(this.alphaRegularizer),alphaConstraint:serializeConstraint(this.alphaConstraint),sharedAxes:this.sharedAxes},ap=_d.prototype.getConfig.call(this);return Object.assign(np,ap),np},rp.className="PReLU",rp}(Layer);Mf.registerClass(PReLU);var ELU=function(_d){function rp(np){var ap=_d.call(this,np??{})||this;if(ap.DEFAULT_ALPHA=1,np==null&&(np={}),np.alpha!=null&&np.alpha!==ap.DEFAULT_ALPHA)throw new NotImplementedError("Non-default alpha value ("+np.alpha+") is not supported by the ELU layer yet.");return ap.alpha=np.alpha==null?ap.DEFAULT_ALPHA:np.alpha,ap}return __extends$h(rp,_d),rp.prototype.call=function(np,ap){var sp=getExactlyOneTensor(np);return gl(sp)},rp.prototype.computeOutputShape=function(np){return np},rp.prototype.getConfig=function(){var np={alpha:this.alpha},ap=_d.prototype.getConfig.call(this);return Object.assign(np,ap),np},rp.className="ELU",rp}(Layer);Mf.registerClass(ELU);var ThresholdedReLU=function(_d){function rp(np){var ap=_d.call(this,np??{})||this;return ap.DEFAULT_THETA=1,np==null&&(np={}),ap.theta=np.theta==null?ap.DEFAULT_THETA:np.theta,ap}return __extends$h(rp,_d),rp.prototype.call=function(np,ap){var sp=getExactlyOneTensor(np);return sp.mul(cast$1(sp.greater(this.theta),"float32"))},rp.prototype.computeOutputShape=function(np){return np},rp.prototype.getConfig=function(){var np={theta:this.theta},ap=_d.prototype.getConfig.call(this);return Object.assign(np,ap),np},rp.className="ThresholdedReLU",rp}(Layer);Mf.registerClass(ThresholdedReLU);var Softmax$1=function(_d){function rp(np){var ap=_d.call(this,np??{})||this;return ap.DEFAULT_AXIS=1,np==null&&(np={}),ap.softmax=new Softmax().apply,ap.axis=np.axis==null?ap.DEFAULT_AXIS:np.axis,ap}return __extends$h(rp,_d),rp.prototype.call=function(np,ap){var sp=getExactlyOneTensor(np);return this.softmax(sp,this.axis)},rp.prototype.computeOutputShape=function(np){return np},rp.prototype.getConfig=function(){var np={axis:this.axis},ap=_d.prototype.getConfig.call(this);return Object.assign(np,ap),np},rp.className="Softmax",rp}(Layer);function normalizeArray(_d,rp,np){if(typeof _d=="number")return pyListRepeat(_d,rp);if(_d.length!==rp)throw new ValueError("The "+np+" argument must be an integer or tuple of "+rp+" integers. Received: "+_d.length+" elements.");for(var ap=0;ap<rp;++ap){var sp=_d[ap];if(!isInteger(sp))throw new ValueError("The "+np+" argument must be an integer or tuple of "+rp+" integers. Received: "+JSON.stringify(_d)+" including a non-integer number "+sp)}return _d}function convOutputLength(_d,rp,np,ap,sp){return sp===void 0&&(sp=1),_d==null?_d:(lp=np==="same"?_d:_d-(rp+(rp-1)*(sp-1))+1,Math.floor((lp+ap-1)/ap));var lp}function deconvLength(_d,rp,np,ap){if(_d==null)return null;if(ap==="valid")_d=_d*rp+max$1([np-rp,0]);else{if(ap!=="same")throw new ValueError("Unsupport padding mode: "+ap+".");_d*=rp}return _d}function preprocessConv2DInput(_d,rp){return je(function(){return checkDataFormat(rp),rp==="channelsFirst"?El(_d,[0,2,3,1]):_d})}function preprocessConv3DInput(_d,rp){return je(function(){return checkDataFormat(rp),rp==="channelsFirst"?El(_d,[0,2,3,4,1]):_d})}function conv1dWithBias(_d,rp,np,ap,sp,lp,up){return ap===void 0&&(ap=1),sp===void 0&&(sp="valid"),up===void 0&&(up=1),je(function(){if(lp==null&&(lp=imageDataFormat()),checkDataFormat(lp),_d.shape.length!==3)throw new ValueError("The input of a conv1dWithBias operation should be 3, but is "+_d.shape.length+" instead.");if(rp.shape.length!==3)throw new ValueError("The kernel for a conv1dWithBias operation should be 3, but is "+rp.shape.length+" instead");if(np!=null&&np.shape.length!==1)throw new ValueError("The bias for a conv1dWithBias operation should be 1, but is "+rp.shape.length+" instead");if(lp==="channelsFirst"&&(_d=El(_d,[0,2,1])),sp==="causal")throw new NotImplementedError("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");var cp=Ac(_d,rp,ap,sp==="same"?"same":"valid","NWC",up);return np!=null&&(cp=biasAdd(cp,np)),cp})}function conv2dWithBiasActivation(_d,rp,np,ap,sp,lp,up,cp){return ap===void 0&&(ap=[1,1]),sp===void 0&&(sp="valid"),cp===void 0&&(cp=null),je(function(){if(lp==null&&(lp=imageDataFormat()),checkDataFormat(lp),_d.rank!==3&&_d.rank!==4)throw new ValueError("conv2dWithBiasActivation expects input to be of rank 3 or 4, but received "+_d.rank+".");if(rp.rank!==3&&rp.rank!==4)throw new ValueError("conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received "+_d.rank+".");var dp=preprocessConv2DInput(_d,lp);if(sp==="causal")throw new NotImplementedError("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return dp=Eh.conv2d({x:dp,filter:rp,strides:ap,pad:sp==="same"?"same":"valid",dilations:up,dataFormat:"NHWC",bias:np,activation:cp}),lp==="channelsFirst"&&(dp=El(dp,[0,3,1,2])),dp})}function conv3dWithBias(_d,rp,np,ap,sp,lp,up){return ap===void 0&&(ap=[1,1,1]),sp===void 0&&(sp="valid"),je(function(){if(lp==null&&(lp=imageDataFormat()),checkDataFormat(lp),_d.rank!==4&&_d.rank!==5)throw new ValueError("conv3dWithBias expects input to be of rank 4 or 5, but received "+_d.rank+".");if(rp.rank!==4&&rp.rank!==5)throw new ValueError("conv3dWithBias expects kernel to be of rank 4 or 5, but received "+_d.rank+".");var cp=preprocessConv3DInput(_d,lp);if(sp==="causal")throw new NotImplementedError("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return cp=Tc(cp,rp,ap,sp==="same"?"same":"valid","NDHWC",up),np!=null&&(cp=biasAdd(cp,np)),lp==="channelsFirst"&&(cp=El(cp,[0,4,1,2,3])),cp})}Mf.registerClass(Softmax$1);var BaseConv=function(_d){function rp(np,ap){var sp=_d.call(this,ap)||this;if(sp.bias=null,sp.DEFAULT_KERNEL_INITIALIZER="glorotNormal",sp.DEFAULT_BIAS_INITIALIZER="zeros",rp.verifyArgs(ap),sp.rank=np,assertPositiveInteger(sp.rank,"rank"),sp.rank!==1&&sp.rank!==2&&sp.rank!==3)throw new NotImplementedError("Convolution layer for rank other than 1, 2, or 3 ("+sp.rank+") is not implemented yet.");if(sp.kernelSize=normalizeArray(ap.kernelSize,np,"kernelSize"),sp.strides=normalizeArray(ap.strides==null?1:ap.strides,np,"strides"),sp.padding=ap.padding==null?"valid":ap.padding,checkPaddingMode(sp.padding),sp.dataFormat=ap.dataFormat==null?"channelsLast":ap.dataFormat,checkDataFormat(sp.dataFormat),sp.activation=getActivation(ap.activation),sp.useBias=ap.useBias==null||ap.useBias,sp.biasInitializer=getInitializer(ap.biasInitializer||sp.DEFAULT_BIAS_INITIALIZER),sp.biasConstraint=getConstraint(ap.biasConstraint),sp.biasRegularizer=getRegularizer(ap.biasRegularizer),sp.activityRegularizer=getRegularizer(ap.activityRegularizer),sp.dilationRate=normalizeArray(ap.dilationRate==null?1:ap.dilationRate,np,"dilationRate"),sp.rank===1&&Array.isArray(sp.dilationRate)&&sp.dilationRate.length!==1)throw new ValueError("dilationRate must be a number or an array of a single number for 1D convolution, but received "+JSON.stringify(sp.dilationRate));if(sp.rank===2){if(typeof sp.dilationRate=="number")sp.dilationRate=[sp.dilationRate,sp.dilationRate];else if(sp.dilationRate.length!==2)throw new ValueError("dilationRate must be a number or array of two numbers for 2D convolution, but received "+JSON.stringify(sp.dilationRate))}else if(sp.rank===3){if(typeof sp.dilationRate=="number")sp.dilationRate=[sp.dilationRate,sp.dilationRate,sp.dilationRate];else if(sp.dilationRate.length!==3)throw new ValueError("dilationRate must be a number or array of three numbers for 3D convolution, but received "+JSON.stringify(sp.dilationRate))}return sp}return __extends$h(rp,_d),rp.verifyArgs=function(np){if(assert("kernelSize"in np,"required key 'kernelSize' not in config"),typeof np.kernelSize!="number"&&!checkArrayTypeAndLength(np.kernelSize,"number",1,3))throw new ValueError("BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received "+JSON.stringify(np.kernelSize)+".")},rp.prototype.getConfig=function(){var np={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:serializeActivation(this.activation),useBias:this.useBias,biasInitializer:serializeInitializer(this.biasInitializer),biasRegularizer:serializeRegularizer(this.biasRegularizer),activityRegularizer:serializeRegularizer(this.activityRegularizer),biasConstraint:serializeConstraint(this.biasConstraint)},ap=_d.prototype.getConfig.call(this);return Object.assign(np,ap),np},rp}(Layer),Conv=function(_d){function rp(np,ap){var sp=_d.call(this,np,ap)||this;return sp.kernel=null,rp.verifyArgs(ap),sp.filters=ap.filters,assertPositiveInteger(sp.filters,"filters"),sp.kernelInitializer=getInitializer(ap.kernelInitializer||sp.DEFAULT_KERNEL_INITIALIZER),sp.kernelConstraint=getConstraint(ap.kernelConstraint),sp.kernelRegularizer=getRegularizer(ap.kernelRegularizer),sp}return __extends$h(rp,_d),rp.prototype.build=function(np){var ap;np=getExactlyOneShape(np);var sp=this.dataFormat==="channelsFirst"?1:np.length-1;if(np[sp]==null)throw new ValueError("The channel dimension of the input should be defined. Found "+np[sp]);var lp=np[sp],up=this.kernelSize.concat([lp,this.filters]);this.kernel=this.addWeight("kernel",up,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:(ap={},ap[sp]=lp,ap)}],this.built=!0},rp.prototype.call=function(np,ap){var sp=this;return je(function(){var lp;np=getExactlyOneTensor(np);var up=sp.bias==null?null:sp.bias.read(),cp=mapActivationToFusedKernel(sp.activation.getClassName());if(cp!=null&&sp.rank===2)lp=conv2dWithBiasActivation(np,sp.kernel.read(),up,sp.strides,sp.padding,sp.dataFormat,sp.dilationRate,cp);else{if(sp.rank===1)lp=conv1dWithBias(np,sp.kernel.read(),up,sp.strides[0],sp.padding,sp.dataFormat,sp.dilationRate[0]);else if(sp.rank===2)lp=conv2dWithBiasActivation(np,sp.kernel.read(),up,sp.strides,sp.padding,sp.dataFormat,sp.dilationRate);else{if(sp.rank!==3)throw new NotImplementedError("convolutions greater than 3D are not implemented yet.");lp=conv3dWithBias(np,sp.kernel.read(),up,sp.strides,sp.padding,sp.dataFormat,sp.dilationRate)}sp.activation!=null&&(lp=sp.activation.apply(lp))}return lp})},rp.prototype.computeOutputShape=function(np){np=getExactlyOneShape(np);for(var ap=[],sp=this.dataFormat==="channelsLast"?np.slice(1,np.length-1):np.slice(2),lp=0;lp<sp.length;++lp){var up=convOutputLength(sp[lp],this.kernelSize[lp],this.padding,this.strides[lp],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[lp]);ap.push(up)}var cp=[np[0]];return this.dataFormat==="channelsLast"?(cp=cp.concat(ap)).push(this.filters):(cp.push(this.filters),cp=cp.concat(ap)),cp},rp.prototype.getConfig=function(){var np={filters:this.filters,kernelInitializer:serializeInitializer(this.kernelInitializer),kernelRegularizer:serializeRegularizer(this.kernelRegularizer),kernelConstraint:serializeConstraint(this.kernelConstraint)},ap=_d.prototype.getConfig.call(this);return Object.assign(np,ap),np},rp.verifyArgs=function(np){if(!("filters"in np)||typeof np.filters!="number"||np.filters<1)throw new ValueError("Convolution layer expected config.filters to be a 'number' > 0 but got "+JSON.stringify(np.filters))},rp}(BaseConv),Conv2D=function(_d){function rp(np){var ap=_d.call(this,2,np)||this;return rp.verifyArgs(np),ap}return __extends$h(rp,_d),rp.prototype.getConfig=function(){var np=_d.prototype.getConfig.call(this);return delete np.rank,np},rp.verifyArgs=function(np){if(typeof np.kernelSize!="number"&&!checkArrayTypeAndLength(np.kernelSize,"number",1,2))throw new ValueError("Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received "+JSON.stringify(np.kernelSize)+".")},rp.className="Conv2D",rp}(Conv);Mf.registerClass(Conv2D);var Conv3D=function(_d){function rp(np){var ap=_d.call(this,3,np)||this;return rp.verifyArgs(np),ap}return __extends$h(rp,_d),rp.prototype.getConfig=function(){var np=_d.prototype.getConfig.call(this);return delete np.rank,np},rp.verifyArgs=function(np){if(typeof np.kernelSize!="number"&&(!Array.isArray(np.kernelSize)||np.kernelSize.length!==1&&np.kernelSize.length!==3))throw new ValueError("Conv3D expects config.kernelSize to be number or [number, number, number], but received "+JSON.stringify(np.kernelSize)+".")},rp.className="Conv3D",rp}(Conv);Mf.registerClass(Conv3D);var Conv2DTranspose=function(_d){function rp(np){var ap=_d.call(this,np)||this;if(ap.inputSpec=[new InputSpec({ndim:4})],ap.padding!=="same"&&ap.padding!=="valid")throw new ValueError("Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode "+ap.padding);return ap}return __extends$h(rp,_d),rp.prototype.build=function(np){var ap;if((np=getExactlyOneShape(np)).length!==4)throw new ValueError("Input should have rank 4; Received input shape: "+JSON.stringify(np));var sp=this.dataFormat==="channelsFirst"?1:np.length-1;if(np[sp]==null)throw new ValueError("The channel dimension of the inputs should be defined. Found `None`.");var lp=np[sp],up=this.kernelSize.concat([this.filters,lp]);this.kernel=this.addWeight("kernel",up,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new InputSpec({ndim:4,axes:(ap={},ap[sp]=lp,ap)})],this.built=!0},rp.prototype.call=function(np,ap){var sp=this;return je(function(){var lp=getExactlyOneTensor(np);if(lp.shape.length!==4)throw new ValueError("Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-"+lp.shape.length);var up,cp,dp=lp.shape,fp=dp[0];sp.dataFormat==="channelsFirst"?(up=2,cp=3):(up=1,cp=2);var pp=dp[up],hp=dp[cp],mp=sp.kernelSize[0],gp=sp.kernelSize[1],vp=sp.strides[0],xp=sp.strides[1],Sp=[fp,deconvLength(pp,vp,mp,sp.padding),deconvLength(hp,xp,gp,sp.padding),sp.filters];sp.dataFormat!=="channelsLast"&&(lp=El(lp,[0,2,3,1]));var yp=Pc(lp,sp.kernel.read(),Sp,sp.strides,sp.padding);return sp.dataFormat!=="channelsLast"&&(yp=El(yp,[0,3,1,2])),sp.bias!=null&&(yp=biasAdd(yp,sp.bias.read(),sp.dataFormat)),sp.activation!=null&&(yp=sp.activation.apply(yp)),yp})},rp.prototype.computeOutputShape=function(np){var ap,sp,lp,up=(np=getExactlyOneShape(np)).slice();this.dataFormat==="channelsFirst"?(ap=1,sp=2,lp=3):(ap=3,sp=1,lp=2);var cp=this.kernelSize[0],dp=this.kernelSize[1],fp=this.strides[0],pp=this.strides[1];return up[ap]=this.filters,up[sp]=deconvLength(up[sp],fp,cp,this.padding),up[lp]=deconvLength(up[lp],pp,dp,this.padding),up},rp.prototype.getConfig=function(){var np=_d.prototype.getConfig.call(this);return delete np.dilationRate,np},rp.className="Conv2DTranspose",rp}(Conv2D);Mf.registerClass(Conv2DTranspose);var SeparableConv=function(_d){function rp(np,ap){var sp=_d.call(this,np,ap)||this;if(sp.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",sp.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",sp.depthwiseKernel=null,sp.pointwiseKernel=null,ap.filters==null)throw new ValueError("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(ap.kernelInitializer!=null||ap.kernelRegularizer!=null||ap.kernelConstraint!=null)throw new ValueError("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(ap.padding!=null&&ap.padding!=="same"&&ap.padding!=="valid")throw new ValueError("SeparableConv"+sp.rank+"D supports only padding modes: 'same' and 'valid', but received "+JSON.stringify(ap.padding));return sp.depthMultiplier=ap.depthMultiplier==null?1:ap.depthMultiplier,sp.depthwiseInitializer=getInitializer(ap.depthwiseInitializer||sp.DEFAULT_DEPTHWISE_INITIALIZER),sp.depthwiseRegularizer=getRegularizer(ap.depthwiseRegularizer),sp.depthwiseConstraint=getConstraint(ap.depthwiseConstraint),sp.pointwiseInitializer=getInitializer(ap.depthwiseInitializer||sp.DEFAULT_POINTWISE_INITIALIZER),sp.pointwiseRegularizer=getRegularizer(ap.pointwiseRegularizer),sp.pointwiseConstraint=getConstraint(ap.pointwiseConstraint),sp}return __extends$h(rp,_d),rp.prototype.build=function(np){var ap;if((np=getExactlyOneShape(np)).length<this.rank+2)throw new ValueError("Inputs to SeparableConv"+this.rank+"D should have rank "+(this.rank+2)+", but received input shape: "+JSON.stringify(np));var sp=this.dataFormat==="channelsFirst"?1:np.length-1;if(np[sp]==null||np[sp]<0)throw new ValueError("The channel dimension of the inputs should be defined, but found "+JSON.stringify(np[sp]));for(var lp=np[sp],up=this.kernelSize.concat([lp,this.depthMultiplier]),cp=[],dp=0;dp<this.rank;++dp)cp.push(1);cp.push(lp*this.depthMultiplier,this.filters),this.depthwiseKernel=this.addWeight("depthwise_kernel",up,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",cp,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,!0,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.inputSpec=[new InputSpec({ndim:this.rank+2,axes:(ap={},ap[sp]=lp,ap)})],this.built=!0},rp.prototype.call=function(np,ap){var sp=this;return je(function(){var lp;if(np=getExactlyOneTensor(np),sp.rank===1)throw new NotImplementedError("1D separable convolution is not implemented yet.");return sp.rank===2&&(sp.dataFormat==="channelsFirst"&&(np=El(np,[0,2,3,1])),lp=Bc(np,sp.depthwiseKernel.read(),sp.pointwiseKernel.read(),sp.strides,sp.padding,sp.dilationRate,"NHWC")),sp.useBias&&(lp=biasAdd(lp,sp.bias.read(),sp.dataFormat)),sp.activation!=null&&(lp=sp.activation.apply(lp)),sp.dataFormat==="channelsFirst"&&(lp=El(lp,[0,3,1,2])),lp})},rp.prototype.getConfig=function(){var np=_d.prototype.getConfig.call(this);return delete np.rank,delete np.kernelInitializer,delete np.kernelRegularizer,delete np.kernelConstraint,np.depthwiseInitializer=serializeInitializer(this.depthwiseInitializer),np.pointwiseInitializer=serializeInitializer(this.pointwiseInitializer),np.depthwiseRegularizer=serializeRegularizer(this.depthwiseRegularizer),np.pointwiseRegularizer=serializeRegularizer(this.pointwiseRegularizer),np.depthwiseConstraint=serializeConstraint(this.depthwiseConstraint),np.pointwiseConstraint=serializeConstraint(this.pointwiseConstraint),np},rp.className="SeparableConv",rp}(Conv),SeparableConv2D=function(_d){function rp(np){return _d.call(this,2,np)||this}return __extends$h(rp,_d),rp.className="SeparableConv2D",rp}(SeparableConv);Mf.registerClass(SeparableConv2D);var Conv1D=function(_d){function rp(np){var ap=_d.call(this,1,np)||this;return rp.verifyArgs(np),ap.inputSpec=[{ndim:3}],ap}return __extends$h(rp,_d),rp.prototype.getConfig=function(){var np=_d.prototype.getConfig.call(this);return delete np.rank,delete np.dataFormat,np},rp.verifyArgs=function(np){if(typeof np.kernelSize!="number"&&!checkArrayTypeAndLength(np.kernelSize,"number",1,1))throw new ValueError("Conv1D expects config.kernelSize to be number or number[] with length 1, but received "+JSON.stringify(np.kernelSize)+".")},rp.className="Conv1D",rp}(Conv);Mf.registerClass(Conv1D);var Cropping2D=function(_d){function rp(np){var ap=_d.call(this,np)||this;return typeof np.cropping=="number"?ap.cropping=[[np.cropping,np.cropping],[np.cropping,np.cropping]]:typeof np.cropping[0]=="number"?ap.cropping=[[np.cropping[0],np.cropping[0]],[np.cropping[1],np.cropping[1]]]:ap.cropping=np.cropping,ap.dataFormat=np.dataFormat===void 0?"channelsLast":np.dataFormat,ap.inputSpec=[{ndim:4}],ap}return __extends$h(rp,_d),rp.prototype.computeOutputShape=function(np){return this.dataFormat==="channelsFirst"?[np[0],np[1],np[2]-this.cropping[0][0]-this.cropping[0][1],np[3]-this.cropping[1][0]-this.cropping[1][1]]:[np[0],np[1]-this.cropping[0][0]-this.cropping[0][1],np[2]-this.cropping[1][0]-this.cropping[1][1],np[3]]},rp.prototype.call=function(np,ap){var sp=this;return je(function(){return np=getExactlyOneTensor(np),sp.dataFormat==="channelsLast"?sliceAlongAxis(sliceAlongAxis(np,sp.cropping[0][0],np.shape[1]-sp.cropping[0][0]-sp.cropping[0][1],2),sp.cropping[1][0],np.shape[2]-sp.cropping[1][1]-sp.cropping[1][0],3):sliceAlongAxis(sliceAlongAxis(np,sp.cropping[0][0],np.shape[2]-sp.cropping[0][0]-sp.cropping[0][1],3),sp.cropping[1][0],np.shape[3]-sp.cropping[1][1]-sp.cropping[1][0],4)})},rp.prototype.getConfig=function(){var np={cropping:this.cropping,dataFormat:this.dataFormat},ap=_d.prototype.getConfig.call(this);return Object.assign(np,ap),np},rp.className="Cropping2D",rp}(Layer);Mf.registerClass(Cropping2D);var UpSampling2D=function(_d){function rp(np){var ap=_d.call(this,np)||this;return ap.DEFAULT_SIZE=[2,2],ap.inputSpec=[{ndim:4}],ap.size=np.size==null?ap.DEFAULT_SIZE:np.size,ap.dataFormat=np.dataFormat==null?"channelsLast":np.dataFormat,ap}return __extends$h(rp,_d),rp.prototype.computeOutputShape=function(np){if(this.dataFormat==="channelsFirst"){var ap=np[2]==null?null:this.size[0]*np[2],sp=np[3]==null?null:this.size[1]*np[3];return[np[0],np[1],ap,sp]}return ap=np[1]==null?null:this.size[0]*np[1],sp=np[2]==null?null:this.size[1]*np[2],[np[0],ap,sp,np[3]]},rp.prototype.call=function(np,ap){var sp=this;return je(function(){var lp=getExactlyOneTensor(np),up=lp.shape;if(sp.dataFormat==="channelsFirst"){lp=El(lp,[0,2,3,1]);var cp=sp.size[0]*up[2],dp=sp.size[1]*up[3],fp=lp.resizeNearestNeighbor([cp,dp]);return El(fp,[0,3,1,2])}return cp=sp.size[0]*up[1],dp=sp.size[1]*up[2],lp.resizeNearestNeighbor([cp,dp])})},rp.prototype.getConfig=function(){var np={size:this.size,dataFormat:this.dataFormat},ap=_d.prototype.getConfig.call(this);return Object.assign(np,ap),np},rp.className="UpSampling2D",rp}(Layer);function depthwiseConv2d$1(_d,rp,np,ap,sp,lp){return np===void 0&&(np=[1,1]),ap===void 0&&(ap="valid"),je(function(){sp==null&&(sp=imageDataFormat()),checkDataFormat(sp);var up=preprocessConv2DInput(_d,sp);if(_d.rank!==4)throw new ValueError("Input for depthwiseConv2d is required to be 4-D, but is instead "+_d.rank+"-D");if(rp.rank!==4)throw new ValueError("depthwiseKernel is required to be 4-D, but is instead "+rp.rank+"-D");return up=Oc(up,rp,np,ap==="same"?"same":"valid","NHWC",lp),sp==="channelsFirst"&&(up=El(up,[0,3,1,2])),up})}Mf.registerClass(UpSampling2D);var DepthwiseConv2D=function(_d){function rp(np){var ap=_d.call(this,2,np)||this;return ap.depthwiseKernel=null,ap.depthMultiplier=np.depthMultiplier==null?1:np.depthMultiplier,ap.depthwiseInitializer=getInitializer(np.depthwiseInitializer||ap.DEFAULT_KERNEL_INITIALIZER),ap.depthwiseConstraint=getConstraint(np.depthwiseConstraint),ap.depthwiseRegularizer=getRegularizer(np.depthwiseRegularizer),ap}return __extends$h(rp,_d),rp.prototype.build=function(np){if((np=getExactlyOneShape(np)).length<4)throw new ValueError("Inputs to DepthwiseConv2D should have rank 4. Received input shape: "+JSON.stringify(np)+".");var ap=this.dataFormat==="channelsFirst"?1:3;if(np[ap]==null||np[ap]<0)throw new ValueError("The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not ("+np[ap]+").");var sp=np[ap],lp=[this.kernelSize[0],this.kernelSize[1],sp,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",lp,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[sp*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0},rp.prototype.call=function(np,ap){var sp=this;return je(function(){var lp=depthwiseConv2d$1(np=getExactlyOneTensor(np),sp.depthwiseKernel.read(),sp.strides,sp.padding,sp.dataFormat,null);return sp.useBias&&(lp=biasAdd(lp,sp.bias.read(),sp.dataFormat)),sp.activation!=null&&(lp=sp.activation.apply(lp)),lp})},rp.prototype.computeOutputShape=function(np){np=getExactlyOneShape(np);var ap=this.dataFormat==="channelsFirst"?np[2]:np[1],sp=this.dataFormat==="channelsFirst"?np[3]:np[2],lp=this.dataFormat==="channelsFirst"?np[1]*this.depthMultiplier:np[3]*this.depthMultiplier,up=convOutputLength(ap,this.kernelSize[0],this.padding,this.strides[0]),cp=convOutputLength(sp,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[np[0],lp,up,cp]:[np[0],up,cp,lp]},rp.prototype.getConfig=function(){var np=_d.prototype.getConfig.call(this);return np.depthMultiplier=this.depthMultiplier,np.depthwiseInitializer=serializeInitializer(this.depthwiseInitializer),np.depthwiseRegularizer=serializeRegularizer(this.depthwiseRegularizer),np.depthwiseConstraint=serializeConstraint(this.depthwiseRegularizer),np},rp.className="DepthwiseConv2D",rp}(BaseConv);Mf.registerClass(DepthwiseConv2D);var Dropout=function(_d){function rp(np){var ap=_d.call(this,np)||this;return ap.rate=Math.max(Math.min(np.rate,1),0),ap.noiseShape=np.noiseShape,ap.seed=np.seed,ap.supportsMasking=!0,ap}return __extends$h(rp,_d),rp.prototype.getNoiseShape=function(np){if(this.noiseShape==null)return this.noiseShape;for(var ap=np.shape,sp=[],lp=0;lp<this.noiseShape.length;++lp)sp.push(this.noiseShape[lp]==null?ap[lp]:this.noiseShape[lp]);return sp},rp.prototype.call=function(np,ap){var sp=this;return je(function(){sp.invokeCallHook(np,ap);var lp=getExactlyOneTensor(np);if(0<sp.rate&&sp.rate<1){var up=ap.training!=null&&ap.training,cp=sp.getNoiseShape(lp);return inTrainPhase(function(){return dropout$1(lp,sp.rate,cp,sp.seed)},function(){return lp},up)}return np})},rp.prototype.getConfig=function(){var np={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},ap=_d.prototype.getConfig.call(this);return Object.assign(np,ap),np},rp.prototype.dispose=function(){return _d.prototype.dispose.call(this)},rp.className="Dropout",rp}(Layer);Mf.registerClass(Dropout);var Dense=function(_d){function rp(np){var ap=_d.call(this,np)||this;if(ap.activation=null,ap.useBias=!0,ap.kernel=null,ap.bias=null,ap.DEFAULT_KERNEL_INITIALIZER="glorotNormal",ap.DEFAULT_BIAS_INITIALIZER="zeros",np.batchInputShape==null&&np.inputShape==null&&np.inputDim!=null){var sp=null;np.batchSize!=null&&(sp=np.batchSize),ap.batchInputShape=[sp,np.inputDim]}return ap.units=np.units,assertPositiveInteger(ap.units,"units"),ap.activation=getActivation(np.activation),np.useBias!=null&&(ap.useBias=np.useBias),ap.kernelInitializer=getInitializer(np.kernelInitializer||ap.DEFAULT_KERNEL_INITIALIZER),ap.biasInitializer=getInitializer(np.biasInitializer||ap.DEFAULT_BIAS_INITIALIZER),ap.kernelConstraint=getConstraint(np.kernelConstraint),ap.biasConstraint=getConstraint(np.biasConstraint),ap.kernelRegularizer=getRegularizer(np.kernelRegularizer),ap.biasRegularizer=getRegularizer(np.biasRegularizer),ap.activityRegularizer=getRegularizer(np.activityRegularizer),ap.supportsMasking=!0,ap.inputSpec=[{minNDim:2}],ap}return __extends$h(rp,_d),rp.prototype.build=function(np){var ap,sp=(np=getExactlyOneShape(np))[np.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[sp,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:(ap={},ap[-1]=sp,ap)}],this.built=!0},rp.prototype.computeOutputShape=function(np){var ap=(np=getExactlyOneShape(np)).slice();return ap[ap.length-1]=this.units,ap},rp.prototype.call=function(np,ap){var sp=this;return je(function(){sp.invokeCallHook(np,ap);var lp,up=getExactlyOneTensor(np),cp=mapActivationToFusedKernel(sp.activation.getClassName());return cp!=null?lp=dot(up,sp.kernel.read(),cp,sp.bias?sp.bias.read():null):(lp=dot(up,sp.kernel.read()),sp.bias!=null&&(lp=biasAdd(lp,sp.bias.read())),sp.activation!=null&&(lp=sp.activation.apply(lp))),lp})},rp.prototype.getConfig=function(){var np={units:this.units,activation:serializeActivation(this.activation),useBias:this.useBias,kernelInitializer:serializeInitializer(this.kernelInitializer),biasInitializer:serializeInitializer(this.biasInitializer),kernelRegularizer:serializeRegularizer(this.kernelRegularizer),biasRegularizer:serializeRegularizer(this.biasRegularizer),activityRegularizer:serializeRegularizer(this.activityRegularizer),kernelConstraint:serializeConstraint(this.kernelConstraint),biasConstraint:serializeConstraint(this.biasConstraint)},ap=_d.prototype.getConfig.call(this);return Object.assign(np,ap),np},rp.className="Dense",rp}(Layer);Mf.registerClass(Dense);var Flatten=function(_d){function rp(np){var ap=_d.call(this,np||{})||this;return ap.inputSpec=[{minNDim:3}],ap}return __extends$h(rp,_d),rp.prototype.computeOutputShape=function(np){for(var ap=0,sp=(np=getExactlyOneShape(np)).slice(1);ap<sp.length;ap++)if(sp[ap]==null)throw new ValueError('The shape of the input to "Flatten" is not fully defined (got '+np.slice(1)+'). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.');return[np[0],arrayProd(np,1)]},rp.prototype.call=function(np,ap){var sp=this;return je(function(){return sp.invokeCallHook(np,ap),batchFlatten(getExactlyOneTensor(np))})},rp.className="Flatten",rp}(Layer);Mf.registerClass(Flatten);var Activation$1=function(_d){function rp(np){var ap=_d.call(this,np)||this;return ap.supportsMasking=!0,ap.activation=getActivation(np.activation),ap}return __extends$h(rp,_d),rp.prototype.call=function(np,ap){var sp=this;return je(function(){sp.invokeCallHook(np,ap);var lp=getExactlyOneTensor(np);return sp.activation.apply(lp)})},rp.prototype.getConfig=function(){var np={activation:serializeActivation(this.activation)},ap=_d.prototype.getConfig.call(this);return Object.assign(np,ap),np},rp.className="Activation",rp}(Layer);Mf.registerClass(Activation$1);var RepeatVector=function(_d){function rp(np){var ap=_d.call(this,np)||this;return ap.n=np.n,ap.inputSpec=[{ndim:2}],ap}return __extends$h(rp,_d),rp.prototype.computeOutputShape=function(np){return[np[0],this.n,np[1]]},rp.prototype.call=function(np,ap){var sp=this;return je(function(){return repeat(np=getExactlyOneTensor(np),sp.n)})},rp.prototype.getConfig=function(){var np={n:this.n},ap=_d.prototype.getConfig.call(this);return Object.assign(np,ap),np},rp.className="RepeatVector",rp}(Layer);Mf.registerClass(RepeatVector);var Reshape=function(_d){function rp(np){var ap=_d.call(this,np)||this;ap.targetShape=np.targetShape;for(var sp=0;sp<ap.targetShape.length;++sp)ap.isUnknown(ap.targetShape[sp])&&(ap.targetShape[sp]=null);return ap}return __extends$h(rp,_d),rp.prototype.isUnknown=function(np){return np<0||np==null},rp.prototype.fixUnknownDimension=function(np,ap){for(var sp="Total size of new array must be unchanged.",lp=ap.slice(),up=1,cp=null,dp=0;dp<lp.length;++dp){var fp=lp[dp];if(this.isUnknown(fp)){if(cp!==null)throw new ValueError("Can only specifiy one unknown dimension.");cp=dp}else up*=fp}var pp=arrayProd(np);if(cp!==null){if(up===0||pp%up!=0)throw new ValueError(sp);lp[cp]=pp/up}else if(pp!==up)throw new ValueError(sp);return lp},rp.prototype.computeOutputShape=function(np){for(var ap=!1,sp=0;sp<np.length;++sp)if(this.isUnknown(np[sp])){ap=!0;break}return ap?np.slice(0,1).concat(this.targetShape):np.slice(0,1).concat(this.fixUnknownDimension(np.slice(1),this.targetShape))},rp.prototype.call=function(np,ap){var sp=this;return je(function(){sp.invokeCallHook(np,ap);var lp=getExactlyOneTensor(np),up=lp.shape,cp=up.slice(0,1).concat(sp.fixUnknownDimension(up.slice(1),sp.targetShape));return lp.reshape(cp)})},rp.prototype.getConfig=function(){var np={targetShape:this.targetShape},ap=_d.prototype.getConfig.call(this);return Object.assign(np,ap),np},rp.className="Reshape",rp}(Layer);Mf.registerClass(Reshape);var Permute=function(_d){function rp(np){var ap=_d.call(this,np)||this;if(np.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(np.dims))throw new Error("Permute constructor requires `dims` to be an Array, but received "+np.dims+" instead.");var sp=range(1,np.dims.length+1);if(!tt.arraysEqual(np.dims.slice().sort(),sp))throw new Error("Invalid permutation `dims`: "+JSON.stringify(np.dims)+" `dims` must contain consecutive integers starting from 1.");return ap.dims=np.dims,ap.dimsIncludingBatch=[0].concat(ap.dims),ap.inputSpec=[new InputSpec({ndim:ap.dims.length+1})],ap}return __extends$h(rp,_d),rp.prototype.computeOutputShape=function(np){var ap=(np=getExactlyOneShape(np)).slice();return this.dims.forEach(function(sp,lp){ap[lp+1]=np[sp]}),ap},rp.prototype.call=function(np,ap){return El(getExactlyOneTensor(np),this.dimsIncludingBatch)},rp.prototype.getConfig=function(){var np={dims:this.dims},ap=_d.prototype.getConfig.call(this);return Object.assign(np,ap),np},rp.className="Permute",rp}(Layer);Mf.registerClass(Permute);var Masking=function(_d){function rp(np){var ap=_d.call(this,np??{})||this;return ap.supportsMasking=!0,ap.maskValue=np!=null?np.maskValue==null?0:np.maskValue:0,ap}return __extends$h(rp,_d),rp.prototype.computeOutputShape=function(np){return np},rp.prototype.getConfig=function(){var np=_d.prototype.getConfig.call(this),ap={maskValue:this.maskValue};return Object.assign(ap,np),ap},rp.prototype.computeMask=function(np,ap){var sp=getExactlyOneTensor(np);return ul(yc(sp,this.maskValue),-1)},rp.prototype.call=function(np,ap){var sp=this;return je(function(){sp.invokeCallHook(np,ap);var lp=getExactlyOneTensor(np),up=ul(yc(lp,sp.maskValue),-1,!0);return lp.mul(up.asType(lp.dtype))})},rp.className="Masking",rp}(Layer);Mf.registerClass(Masking);var Embedding=function(_d){function rp(np){var ap=_d.call(this,np)||this;if(ap.embeddings=null,ap.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",np.batchInputShape==null&&np.inputShape==null){var sp=null;np.batchSize!=null&&(sp=np.batchSize),np.inputLength==null?ap.batchInputShape=[sp,null]:ap.batchInputShape=[sp].concat(toList(np.inputLength))}return ap.inputDim=np.inputDim,assertPositiveInteger(ap.inputDim,"inputDim"),ap.outputDim=np.outputDim,assertPositiveInteger(ap.outputDim,"outputDim"),ap.embeddingsInitializer=getInitializer(np.embeddingsInitializer||ap.DEFAULT_EMBEDDINGS_INITIALIZER),ap.embeddingsRegularizer=getRegularizer(np.embeddingsRegularizer),ap.activityRegularizer=getRegularizer(np.activityRegularizer),ap.embeddingsConstraint=getConstraint(np.embeddingsConstraint),ap.maskZero=np.maskZero,ap.supportsMasking=np.maskZero,ap.inputLength=np.inputLength,ap}return __extends$h(rp,_d),rp.prototype.build=function(np){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0},rp.prototype.warnOnIncompatibleInputShape=function(np){},rp.prototype.computeMask=function(np,ap){var sp=this;return je(function(){return sp.maskZero?(np=getExactlyOneTensor(np),yc(np,zn(np))):null})},rp.prototype.computeOutputShape=function(np){if(np=getExactlyOneShape(np),this.inputLength==null)return np.concat([this.outputDim]);var ap=toList(this.inputLength);if(ap.length!==np.length-1)throw new ValueError('"inputLength" is '+this.inputLength+", but received input shape has shape "+np);for(var sp=0,lp=0;lp<ap.length;++lp){var up=ap[lp],cp=np[lp+1];if(up!=null&&cp!=null&&up!==cp)throw new ValueError('"inputLength" is '+this.inputLength+", but received input shape has shape "+np);up==null&&(ap[sp]=cp),sp++}return[np[0]].concat(ap,[this.outputDim])},rp.prototype.call=function(np,ap){var sp=this;return je(function(){sp.invokeCallHook(np,ap);var lp=getExactlyOneTensor(np);return lp.dtype!=="int32"&&(lp=cast$1(lp,"int32")),gather$1(sp.embeddings.read(),lp.as1D()).reshape(getExactlyOneShape(sp.computeOutputShape(lp.shape)))})},rp.prototype.getConfig=function(){var np={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:serializeInitializer(this.embeddingsInitializer),embeddingsRegularizer:serializeRegularizer(this.embeddingsRegularizer),activityRegularizer:serializeRegularizer(this.activityRegularizer),embeddingsConstraint:serializeConstraint(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},ap=_d.prototype.getConfig.call(this);return Object.assign(np,ap),np},rp.className="Embedding",rp}(Layer);Mf.registerClass(Embedding);var Merge=function(_d){function rp(np){var ap=_d.call(this,np||{})||this;return ap.supportsMasking=!0,ap}return __extends$h(rp,_d),rp.prototype.mergeFunction=function(np){throw new NotImplementedError},rp.prototype.computeElementwiseOpOutputShape=function(np,ap){if(np==null||ap==null)return null;if(np.length<ap.length)return this.computeElementwiseOpOutputShape(ap,np);if(ap.length===0)return np;for(var sp=np.slice(0,np.length-ap.length),lp=0;lp<ap.length;++lp){var up=np[np.length-ap.length+lp],cp=ap[lp];if(up==null||cp==null||up<0||cp<0)sp.push(null);else if(up===1)sp.push(cp);else if(cp===1)sp.push(up);else{if(up!==cp)throw new ValueError("Operands could not be broadcast together with shapes "+JSON.stringify(np)+" "+JSON.stringify(ap));sp.push(up)}}return sp},rp.prototype.build=function(np){if(Array.isArray(np)&&!Array.isArray(np[0])&&(np=[getExactlyOneShape(np)]),(np=np).length<2)throw new ValueError("A merge layer should be called on an Array of at least 2 inputs. Got "+np.length+" input(s).");for(var ap=[],sp=0,lp=np;sp<lp.length;sp++)(dp=lp[sp])!=null&&dp[0]!==null&&ap.push(dp[0]);if((ap=unique(ap)).length>1)throw new ValueError("Can not merge tensors with different batch sizes. Got tensors with shapes: "+JSON.stringify(np)+".");for(var up=np[0]==null?null:np[0].slice(1),cp=1;cp<np.length;++cp){var dp=np[cp]==null?null:np[cp].slice(1);up=this.computeElementwiseOpOutputShape(up,dp)}var fp=np.map(function(pp){return pp.length});np.indexOf(null)===-1&&unique(fp).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0},rp.prototype.call=function(np,ap){var sp=this;return je(function(){if(np=np,sp.reshapeRequired){var lp=[],up=np.map(function(Cp){return Cp.rank});if(up.indexOf(null)===-1){for(var cp=max$1(up),dp=0,fp=np;dp<fp.length;dp++){for(var pp=(xp=fp[dp]).rank,hp=0;hp<cp-pp;++hp)xp=expandDims$1(xp,1);lp.push(xp)}return sp.mergeFunction(lp)}for(var mp=!1,gp=0,vp=np;gp<vp.length;gp++){var xp;if((pp=(xp=vp[gp]).rank)==null){var Sp=xp.shape,yp=Sp[0],bp=Sp.slice(1).concat([yp]),Ep=xp.reshape([yp].concat(arrayProd(Sp.slice(1))));Ep=(Ep=El(Ep,[1,0])).reshape(bp),lp.push(Ep),mp=!0}else if(pp>1){var wp=range(1,pp).concat([0]);lp.push(El(xp,wp)),mp=!0}else lp.push(xp)}var _p=sp.mergeFunction(lp),Rp=_p.rank;if(mp)if(Rp==null){var $p=_p.shape;bp=[yp=$p[$p.length-1]].concat($p.slice(0,$p.length-1)),_p=El(_p.reshape([-1,yp]),[1,0]).reshape(bp)}else Rp>1&&(wp=[Rp-1].concat(range(0,Rp-1)),_p=El(_p,wp));return _p}return sp.mergeFunction(np)})},rp.prototype.computeOutputShape=function(np){var ap;ap=(np=np)[0]==null?null:np[0].slice(1);for(var sp=1;sp<np.length;++sp){var lp=np[sp]==null?null:np[sp].slice(1);ap=this.computeElementwiseOpOutputShape(ap,lp)}for(var up=[],cp=0,dp=np;cp<dp.length;cp++)(lp=dp[cp])!=null&&lp[0]!==null&&up.push(lp[0]);return ap=(up=unique(up)).length===1?up.concat(ap):[null].concat(ap)},rp.prototype.computeMask=function(np,ap){return je(function(){if(ap==null)return null;if(!Array.isArray(ap))throw new ValueError("`mask` should be an Array");if(!Array.isArray(np))throw new ValueError("`inputs` should be an Array");if(ap.length!==np.length)throw new ValueError("The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths ("+np.length+" vs "+ap.length+")");if(ap.every(function(up){return up==null}))return null;for(var sp=(ap=ap.map(function(up){return up==null?up:dr(up,0)}))[0],lp=1;lp<ap.length-1;++lp)sp=Ms(sp,ap[lp]);return sp})},rp}(Layer),Add=function(_d){function rp(np){return _d.call(this,np)||this}return __extends$h(rp,_d),rp.prototype.mergeFunction=function(np){return je(function(){for(var ap=np[0].clone(),sp=1;sp<np.length;++sp)ap=Vs(ap,np[sp]);return ap})},rp.className="Add",rp}(Merge);Mf.registerClass(Add);var Multiply=function(_d){function rp(np){return _d.call(this,np)||this}return __extends$h(rp,_d),rp.prototype.mergeFunction=function(np){return je(function(){for(var ap=np[0].clone(),sp=1;sp<np.length;++sp)ap=tc(ap,np[sp]);return ap})},rp.className="Multiply",rp}(Merge);Mf.registerClass(Multiply);var Average=function(_d){function rp(np){return _d.call(this,np)||this}return __extends$h(rp,_d),rp.prototype.mergeFunction=function(np){return je(function(){for(var ap=np[0].clone(),sp=1;sp<np.length;++sp)ap=Vs(ap,np[sp]);return tc(1/np.length,ap)})},rp.className="Average",rp}(Merge);Mf.registerClass(Average);var Maximum=function(_d){function rp(np){return _d.call(this,np)||this}return __extends$h(rp,_d),rp.prototype.mergeFunction=function(np){return je(function(){for(var ap=np[0],sp=1;sp<np.length;++sp)ap=Xs(ap,np[sp]);return ap})},rp.className="Maximum",rp}(Merge);Mf.registerClass(Maximum);var Minimum=function(_d){function rp(np){return _d.call(this,np)||this}return __extends$h(rp,_d),rp.prototype.mergeFunction=function(np){return je(function(){for(var ap=np[0],sp=1;sp<np.length;++sp)ap=Ys(ap,np[sp]);return ap})},rp.className="Minimum",rp}(Merge);Mf.registerClass(Minimum);var Concatenate=function(_d){function rp(np){var ap=_d.call(this,np)||this;return ap.DEFAULT_AXIS=-1,np==null&&(np={}),ap.axis=np.axis==null?ap.DEFAULT_AXIS:np.axis,ap.supportsMasking=!0,ap.reshapeRequired=!1,ap}return __extends$h(rp,_d),rp.prototype.build=function(np){if(!Array.isArray(np)||!Array.isArray(np[0])||np.length===1)throw new ValueError("A `Concatenate` layer should be called on a list of at least 2 inputs");for(var ap=!0,sp=0,lp=np=np;sp<lp.length;sp++)if((mp=lp[sp])!=null){ap=!1;break}if(!ap){for(var up=[],cp=0;cp<np.length;++cp){var dp=np[cp].slice();dp.splice(this.axis,1);for(var fp=!1,pp=0,hp=up;pp<hp.length;pp++){var mp=hp[pp];if(tt.arraysEqual(mp,dp)){fp=!0;break}}fp||up.push(dp)}if(up.length>1)throw new ValueError("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(np))}},rp.prototype.mergeFunction=function(np){var ap=this;return je(function(){return concatenate(np,ap.axis)})},rp.prototype.computeOutputShape=function(np){if(!Array.isArray(np)||!Array.isArray(np[0]))throw new ValueError("A `Concatenate` layer should be called on a list of inputs.");for(var ap=np,sp=ap[0].slice(),lp=this.axis<0?sp.length+this.axis:this.axis,up=0,cp=ap.slice(1);up<cp.length;up++){var dp=cp[up];if(sp[lp]==null||dp[lp]==null){sp[lp]=null;break}sp[lp]+=dp[lp]}return sp},rp.prototype.computeMask=function(np,ap){var sp=this;if(ap==null)return null;if(!Array.isArray(ap))throw new ValueError("`mask` should be an array for Concatenate");if(!Array.isArray(np))throw new ValueError("`inputs` should be an array for Concatenate");if(ap.length!==np.length)throw new ValueError("Mismatch in the length of mask ("+ap.length+") and the legnth of inputs ("+np.length+")");return je(function(){var lp=!0;if(ap.forEach(function(fp){fp==null||(lp=!1)}),lp)return null;for(var up=[],cp=0;cp<np.length;++cp)ap[cp]==null?up.push(Vn(np[cp]).asType("bool")):ap[cp].rank<np[cp].rank?up.push(dr(ap[cp],-1)):up.push(ap[cp]);var dp=Gn(up,sp.axis);return il(dp,-1,!1)})},rp.prototype.getConfig=function(){var np={axis:this.axis},ap=_d.prototype.getConfig.call(this);return Object.assign(np,ap),np},rp.className="Concatenate",rp}(Merge);function interpretAxis(_d,rp){for(;_d<0;)_d+=rp;return _d}function batchDot(_d,rp,np){if(_d.shape.length>3||rp.shape.length>3)throw new NotImplementedError("batchDot is not implemented for tensors of 4D or higher rank yet");if(tt.assert(_d.shape.length>=2,function(){return"batchDot requires the rank of x to be >= 2, but got "+_d.shape.length}),tt.assert(_d.shape.length>=2,function(){return"batchDot requires the rank of y to be >= 2, but got "+rp.shape.length}),typeof np=="number"&&(np=[np,np]),_d.dtype==="complex64"||rp.dtype==="complex64")throw new NotImplementedError("batchDot is not implemented for complex64-type Tensors yet.");var ap=_d.shape.length,sp=rp.shape.length;np==null&&(np=[ap-1,sp-2]);var lp=np;return je(function(){var up,cp;if(ap>sp){up=ap-sp;for(var dp=[],fp=0;fp<up;++fp)dp.push(1);rp=rp.reshape(rp.shape.concat(dp))}else if(sp>ap){for(up=sp-ap,dp=[],fp=0;fp<up;++fp)dp.push(1);_d=_d.reshape(_d.shape.concat(dp))}else up=0;if(_d.shape.length===2&&rp.shape.length===2)cp=lp[0]===lp[1]?_d.mulStrict(rp).sum(lp[0]):_d.transpose([1,0]).mulStrict(rp).sum(lp[1]);else{var pp=lp[0]!==_d.shape.length-1,hp=lp[1]===rp.shape.length-1;cp=_d.matMul(rp,pp,hp)}if(up>0){var mp=void 0,gp=[];for(fp=mp=ap>sp?ap+sp-3:ap-1;fp<mp+up;++fp)gp.push(fp);cp=cp.squeeze(gp)}return cp.shape.length===1&&(cp=cp.expandDims(1)),cp})}Mf.registerClass(Concatenate);var Dot=function(_d){function rp(np){var ap=_d.call(this,np)||this;return ap.axes=np.axes,ap.normalize=np.normalize!=null&&np.normalize,ap.supportsMasking=!0,ap.reshapeRequired=!1,ap}return __extends$h(rp,_d),rp.prototype.build=function(np){tt.assert(Array.isArray(np)&&np.length===2&&Array.isArray(np[0])&&Array.isArray(np[1]),function(){return"A `Dot` layer should be called on a list of exactly 2 inputs."});var ap=np[0],sp=np[1];if(ap.length>3||sp.length>3)throw new NotImplementedError("Dot layer does not support tensors of 4D or higher rank yet.");var lp=this.interpretAxes(ap,sp);if(ap[lp[0]]!==sp[lp[1]])throw new ValueError("Dimension incompatibility: "+ap[lp[0]]+" !== "+sp[lp[1]])},rp.prototype.mergeFunction=function(np){if(np.length!==2)throw new ValueError("A `Dot` layer must be called on exactly 2 inputs, but received "+np.length+" input(s).");var ap,sp=np[0],lp=np[1];return ap=Array.isArray(this.axes)?this.axes.map(function(up,cp){return interpretAxis(up,np[cp].shape.length)}):[interpretAxis(this.axes,sp.shape.length),interpretAxis(this.axes,lp.shape.length)],this.normalize&&(sp=l2Normalize(sp,ap[0]),lp=l2Normalize(lp,ap[1])),batchDot(sp,lp,ap)},rp.prototype.interpretAxes=function(np,ap){return Array.isArray(this.axes)?this.axes:[interpretAxis(this.axes,np.length),interpretAxis(this.axes,ap.length)]},rp.prototype.computeOutputShape=function(np){tt.assert(Array.isArray(np)&&np.length===2&&Array.isArray(np[0])&&Array.isArray(np[1]),function(){return"A `Dot` layer should be called on a list of exactly 2 inputs."});var ap=np[0].slice(),sp=np[1].slice();if(ap.length>3||sp.length>3)throw new NotImplementedError("Dot layer does not support tensors of 4D or higher rank yet.");var lp=this.interpretAxes(ap,sp);ap.splice(lp[0],1),sp.splice(lp[1],1),sp.splice(0,1);var up=ap.concat(sp);return up.length===1&&up.push(1),up},rp.prototype.computeMask=function(np,ap){return null},rp.prototype.getConfig=function(){var np={axes:this.axes,normalize:this.normalize},ap=_d.prototype.getConfig.call(this);return Object.assign(np,ap),np},rp.className="Dot",rp}(Merge);Mf.registerClass(Dot);var GaussianNoise=function(_d){function rp(np){var ap=_d.call(this,np)||this;return ap.supportsMasking=!0,ap.stddev=np.stddev,ap}return __extends$h(rp,_d),rp.prototype.computeOutputShape=function(np){return np},rp.prototype.getConfig=function(){var np=_d.prototype.getConfig.call(this),ap={stddev:this.stddev};return Object.assign(ap,np),ap},rp.prototype.call=function(np,ap){var sp=this;return je(function(){sp.invokeCallHook(np,ap);var lp=getExactlyOneTensor(np);return inTrainPhase(function(){return randomNormal$1(lp.shape,0,sp.stddev).add(lp)},function(){return lp},ap.training||!1)})},rp.className="GaussianNoise",rp}(Layer);Mf.registerClass(GaussianNoise);var GaussianDropout=function(_d){function rp(np){var ap=_d.call(this,np)||this;return ap.supportsMasking=!0,ap.rate=np.rate,ap}return __extends$h(rp,_d),rp.prototype.computeOutputShape=function(np){return np},rp.prototype.getConfig=function(){var np=_d.prototype.getConfig.call(this),ap={rate:this.rate};return Object.assign(ap,np),ap},rp.prototype.call=function(np,ap){var sp=this;return je(function(){sp.invokeCallHook(np,ap);var lp=getExactlyOneTensor(np);return sp.rate>0&&sp.rate<1?inTrainPhase(function(){var up=Math.sqrt(sp.rate/(1-sp.rate));return lp.mul(randomNormal$1(lp.shape,1,up))},function(){return lp},ap.training||!1):lp})},rp.className="GaussianDropout",rp}(Layer);Mf.registerClass(GaussianDropout);var AlphaDropout=function(_d){function rp(np){var ap=_d.call(this,np)||this;return ap.supportsMasking=!0,ap.rate=np.rate,ap.noiseShape=np.noiseShape,ap}return __extends$h(rp,_d),rp.prototype._getNoiseShape=function(np){return this.noiseShape||getExactlyOneTensor(np).shape},rp.prototype.computeOutputShape=function(np){return np},rp.prototype.getConfig=function(){var np=_d.prototype.getConfig.call(this),ap={rate:this.rate};return Object.assign(ap,np),ap},rp.prototype.call=function(np,ap){var sp=this;return je(function(){if(sp.rate<1&&sp.rate>0){var lp=sp._getNoiseShape(np);return inTrainPhase(function(){var up=getExactlyOneTensor(np),cp=-1.7580993408473766,dp=hc(kr(lp),sp.rate);dp=cast$1(dp,"float32");var fp=Math.pow((1-sp.rate)*(1+sp.rate*Math.pow(cp,2)),-.5),pp=-fp*cp*sp.rate;return up.mul(dp).add(dp.add(-1).mul(cp)).mul(fp).add(pp)},function(){return getExactlyOneTensor(np)},ap.training||!1)}return np})},rp.className="AlphaDropout",rp}(Layer);function batchNormalization(_d,rp,np,ap,sp,lp){var up;if(lp===void 0&&(lp=.001),_d.rank===2)up=Fs(_d,rp,np,ap,sp,lp);else if(_d.rank===3)up=Os(_d,rp,np,ap,sp,lp);else{if(_d.rank!==4)throw new NotImplementedError("batchNormalization is not implemented for array of rank "+_d.rank+" yet");up=_s(_d,rp,np,ap,sp,lp)}return up}function regularNormalizeBatchInTraining(_d,rp,np,ap,sp){return sp===void 0&&(sp=.001),je(function(){var lp=dl(_d,ap),up=lp.mean,cp=lp.variance;return[batchNormalization(_d,up,cp,np,rp,sp),up,cp]})}function broadcastNormalizeBatchInTraining(_d,rp,np,ap,sp){return sp===void 0&&(sp=.001),je(function(){for(var lp=dl(_d,ap),up=lp.mean,cp=lp.variance,dp=[],fp=0,pp=range(0,_d.rank);fp<pp.length;fp++){var hp=pp[fp];ap.indexOf(hp)!==-1?dp.push(1):dp.push(_d.shape[hp])}var mp=up.reshape(dp),gp=cp.reshape(dp),vp=rp==null?null:rp.reshape(dp),xp=np==null?null:np.reshape(dp);return[batchNormalization(_d,mp,gp,xp,vp,sp),up,cp]})}function normalizeBatchInTraining(_d,rp,np,ap,sp){return sp===void 0&&(sp=.001),tt.arraysEqual(ap.slice().sort(),range(0,_d.rank-1))?regularNormalizeBatchInTraining(_d,rp,np,ap,sp):broadcastNormalizeBatchInTraining(_d,rp,np,ap,sp)}Mf.registerClass(AlphaDropout);var BatchNormalization=function(_d){function rp(np){var ap=this;return np==null&&(np={}),(ap=_d.call(this,np)||this).supportsMasking=!0,ap.axis=np.axis==null?-1:np.axis,ap.momentum=np.momentum==null?.99:np.momentum,ap.epsilon=np.epsilon==null?.001:np.epsilon,ap.center=np.center==null||np.center,ap.scale=np.scale==null||np.scale,ap.betaInitializer=getInitializer(np.betaInitializer||"zeros"),ap.gammaInitializer=getInitializer(np.gammaInitializer||"ones"),ap.movingMeanInitializer=getInitializer(np.movingMeanInitializer||"zeros"),ap.movingVarianceInitializer=getInitializer(np.movingVarianceInitializer||"ones"),ap.betaConstraint=getConstraint(np.betaConstraint),ap.gammaConstraint=getConstraint(np.gammaConstraint),ap.betaRegularizer=getRegularizer(np.betaRegularizer),ap.gammaRegularizer=getRegularizer(np.gammaRegularizer),ap}return __extends$h(rp,_d),rp.prototype.build=function(np){var ap;np=getExactlyOneShape(np);var sp=this.axis>=0?this.axis:this.axis+np.length,lp=np[sp];if(lp==null)throw new ValueError("Axis "+sp+" of input tensor should have a defined dimension but the layer received an input with shape "+JSON.stringify(np)+".");this.inputSpec=[new InputSpec({ndim:np.length,axes:(ap={},ap[sp]=lp,ap)})];var up=[lp];this.scale&&(this.gamma=this.addWeight("gamma",up,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",up,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",up,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",up,null,this.movingVarianceInitializer,null,!1),this.built=!0},rp.prototype.call=function(np,ap){var sp=this;return je(function(){var lp=ap.training!=null&&ap.training,up=getExactlyOneTensor(np),cp=up.shape,dp=cp.length,fp=range(0,dp),pp=sp.axis>=0?sp.axis:sp.axis+dp;fp.splice(pp,1);var hp=pyListRepeat(1,dp);hp[pp]=cp[pp];var mp=fp.slice();mp.sort();var gp=!tt.arraysEqual(mp,range(0,dp).slice(0,dp-1));if(!lp)return function(){if(gp){var Ep=sp.movingMean.read().reshape(hp),wp=sp.movingVariance.read().reshape(hp),_p=sp.center?sp.beta.read().reshape(hp):null,Rp=sp.scale?sp.gamma.read().reshape(hp):null;return batchNormalization(up,Ep,wp,_p,Rp,sp.epsilon)}return batchNormalization(up,sp.movingMean.read(),sp.movingVariance.read(),sp.beta==null?null:sp.beta.read(),sp.gamma==null?null:sp.gamma.read(),sp.epsilon)}();var vp=normalizeBatchInTraining(up,sp.gamma.read(),sp.beta.read(),fp,sp.epsilon),xp=vp[0],Sp=vp[1],yp=vp[2],bp=function(Ep,wp,_p){je(function(){var Rp=1-_p,$p=Ep.read(),Cp=$p.sub(wp).mul(Rp);Ep.write($p.sub(Cp))})};return bp(sp.movingMean,Sp,sp.momentum),bp(sp.movingVariance,yp,sp.momentum),xp})},rp.prototype.getConfig=function(){var np={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:serializeInitializer(this.betaInitializer),gammaInitializer:serializeInitializer(this.gammaInitializer),movingMeanInitializer:serializeInitializer(this.movingMeanInitializer),movingVarianceInitializer:serializeInitializer(this.movingVarianceInitializer),betaRegularizer:serializeRegularizer(this.betaRegularizer),gammaRegularizer:serializeRegularizer(this.gammaRegularizer),betaConstraint:serializeConstraint(this.betaConstraint),gammaConstraint:serializeConstraint(this.gammaConstraint)},ap=_d.prototype.getConfig.call(this);return Object.assign(np,ap),np},rp.className="BatchNormalization",rp}(Layer);Mf.registerClass(BatchNormalization);var LayerNormalization=function(_d){function rp(np){var ap=this;if(np==null&&(np={}),(ap=_d.call(this,np)||this).axis=np.axis==null?-1:np.axis,typeof ap.axis=="number"){if(!Number.isInteger(ap.axis))throw new Error("Expected axis to be an integer, but received "+ap.axis)}else{if(!Array.isArray(ap.axis))throw new Error("Expected axis to be an integer or an array of integers, but received "+JSON.stringify(ap.axis));for(var sp=0,lp=ap.axis;sp<lp.length;sp++){var up=lp[sp];if(!Number.isInteger(up))throw new Error("Expected axis to be an array of integers, but received "+JSON.stringify(ap.axis))}}return ap.epsilon=np.epsilon==null?.001:np.epsilon,ap.center=np.center==null||np.center,ap.scale=np.scale==null||np.scale,ap.betaInitializer=getInitializer(np.betaInitializer||"zeros"),ap.gammaInitializer=getInitializer(np.gammaInitializer||"ones"),ap.betaRegularizer=getRegularizer(np.betaRegularizer),ap.gammaRegularizer=getRegularizer(np.gammaRegularizer),ap.supportsMasking=!0,ap}return __extends$h(rp,_d),rp.prototype.build=function(np){var ap=(np=getExactlyOneShape(np)).length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(var sp=0;sp<this.axis.length;++sp)this.axis[sp]<0&&(this.axis[sp]+=ap);for(var lp=0,up=this.axis;lp<up.length;lp++){var cp=up[lp];if(cp<0||cp>=ap)throw new Error("Invalid axis: "+cp)}if(this.axis.length!==unique(this.axis).length)throw new Error("Found duplicate axes in: "+this.axis);var dp=this.axis.map(function(fp){return np[fp]});this.scale?this.gamma=this.addWeight("gamma",dp,"float32",this.gammaInitializer,this.gammaRegularizer,!0):this.gamma=null,this.center?this.beta=this.addWeight("beta",dp,"float32",this.betaInitializer,this.betaRegularizer,!0):this.beta=null,this.built=!0},rp.prototype.call=function(np,ap){var sp=this,lp=getExactlyOneTensor(np),up=lp.shape,cp=up.length;return je(function(){for(var dp=dl(lp,sp.axis,!0),fp=dp.mean,pp=dp.variance,hp=pyListRepeat(1,cp),mp=0,gp=sp.axis;mp<gp.length;mp++){var vp=gp[mp];hp[vp]=up[vp]}for(var xp=function(_p){return _p!=null&&_p.shape.length!==cp&&sp.axis!==[cp-1]?_p.reshape(hp):_p},Sp=xp(sp.gamma.read()),yp=xp(sp.beta.read()),bp=[],Ep=[],wp=0;wp<cp;++wp)sp.axis.indexOf(wp)!==-1?(bp.push(up[wp]),Ep.push(1)):(bp.push(1),Ep.push(up[wp]));return fp=fp.tile(bp),pp=pp.tile(bp),Sp=Sp.tile(Ep),yp=yp.tile(Ep),batchNormalization(lp,fp,pp,yp,Sp,sp.epsilon)})},rp.prototype.getConfig=function(){var np={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:serializeInitializer(this.betaInitializer),gammaInitializer:serializeInitializer(this.gammaInitializer),betaRegularizer:serializeRegularizer(this.betaRegularizer),gammaRegularizer:serializeRegularizer(this.gammaRegularizer)},ap=_d.prototype.getConfig.call(this);return Object.assign(np,ap),np},rp.className="LayerNormalization",rp}(Layer);function spatial2dPadding(_d,rp,np){return je(function(){if(_d.rank!==4)throw new ValueError("temporalPadding expects input tensor to be 4-D, but received a "+_d.rank+"-D tensor.");if(rp==null&&(rp=[[1,1],[1,1]]),rp.length!==2||rp[0].length!==2||rp[1].length!==2)throw new ValueError("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(np==null&&(np=imageDataFormat()),np!=="channelsLast"&&np!=="channelsFirst")throw new ValueError("Unknown data format: "+np+". Supported data formats are 'channelsLast' and 'channelsFirst.");var ap;return ap=np==="channelsFirst"?[[0,0],[0,0],rp[0],rp[1]]:[[0,0],rp[0],rp[1],[0,0]],yr(_d,ap)})}Mf.registerClass(LayerNormalization);var ZeroPadding2D=function(_d){function rp(np){var ap=this;if(np==null&&(np={}),(ap=_d.call(this,np)||this).dataFormat=np.dataFormat==null?imageDataFormat():np.dataFormat,np.padding==null)ap.padding=[[1,1],[1,1]];else if(typeof np.padding=="number")ap.padding=[[np.padding,np.padding],[np.padding,np.padding]];else{if(np.padding=np.padding,np.padding.length!==2)throw new ValueError("ZeroPadding2D expects padding to be a length-2 array, but received a length-"+np.padding.length+" array.");var sp=void 0,lp=void 0;if(typeof np.padding[0]=="number")sp=[np.padding[0],np.padding[0]],lp=[np.padding[1],np.padding[1]];else{if(np.padding=np.padding,np.padding[0].length!==2)throw new ValueError("ZeroPadding2D expects height padding to be a length-2 array, but received a length-"+np.padding[0].length+" array.");if(sp=np.padding[0],np.padding[1].length!==2)throw new ValueError("ZeroPadding2D expects width padding to be a length-2 array, but received a length-"+np.padding[1].length+" array.");lp=np.padding[1]}ap.padding=[sp,lp]}return ap.inputSpec=[new InputSpec({ndim:4})],ap}return __extends$h(rp,_d),rp.prototype.computeOutputShape=function(np){var ap,sp;return np=getExactlyOneShape(np),this.dataFormat==="channelsFirst"?(ap=np[2]!=null&&np[2]>=0?np[2]+this.padding[0][0]+this.padding[0][1]:null,sp=np[3]!=null&&np[3]>=0?np[3]+this.padding[1][0]+this.padding[1][1]:null,[np[0],np[1],ap,sp]):(ap=np[1]!=null&&np[1]>=0?np[1]+this.padding[0][0]+this.padding[0][1]:null,sp=np[2]!=null&&np[2]>=0?np[2]+this.padding[1][0]+this.padding[1][1]:null,[np[0],ap,sp,np[3]])},rp.prototype.call=function(np,ap){var sp=this;return je(function(){return spatial2dPadding(getExactlyOneTensor(np),sp.padding,sp.dataFormat)})},rp.prototype.getConfig=function(){var np={padding:this.padding,dataFormat:this.dataFormat},ap=_d.prototype.getConfig.call(this);return Object.assign(np,ap),np},rp.className="ZeroPadding2D",rp}(Layer);function pool2d(_d,rp,np,ap,sp,lp){return je(function(){var up;checkDataFormat(sp),checkPoolMode(lp),checkPaddingMode(ap),np==null&&(np=[1,1]),ap==null&&(ap="valid"),sp==null&&(sp=imageDataFormat()),lp==null&&(lp="max"),_d=preprocessConv2DInput(_d,sp);var cp=ap==="same"?"same":"valid";return up=lp==="max"?$c(_d,rp,np,cp):Yc(_d,rp,np,cp),sp==="channelsFirst"&&(up=El(up,[0,3,1,2])),up})}function pool3d(_d,rp,np,ap,sp,lp){return je(function(){var up;checkDataFormat(sp),checkPoolMode(lp),checkPaddingMode(ap),np==null&&(np=[1,1,1]),ap==null&&(ap="valid"),sp==null&&(sp=imageDataFormat()),lp==null&&(lp="max"),_d=preprocessConv3DInput(_d,sp);var cp=ap==="same"?"same":"valid";return up=lp==="max"?Jc(_d,rp,np,cp):Zc(_d,rp,np,cp),sp==="channelsFirst"&&(up=El(up,[0,4,1,2,3])),up})}Mf.registerClass(ZeroPadding2D);var Pooling1D=function(_d){function rp(np){var ap=this;if(np.poolSize==null&&(np.poolSize=2),ap=_d.call(this,np)||this,typeof np.poolSize=="number")ap.poolSize=[np.poolSize];else{if(!Array.isArray(np.poolSize)||np.poolSize.length!==1||typeof np.poolSize[0]!="number")throw new ValueError("poolSize for 1D convolutional layer must be a number or an Array of a single number, but received "+JSON.stringify(np.poolSize));ap.poolSize=np.poolSize}if(assertPositiveInteger(ap.poolSize,"poolSize"),np.strides==null)ap.strides=ap.poolSize;else if(typeof np.strides=="number")ap.strides=[np.strides];else{if(!Array.isArray(np.strides)||np.strides.length!==1||typeof np.strides[0]!="number")throw new ValueError("strides for 1D convolutional layer must be a number or an Array of a single number, but received "+JSON.stringify(np.strides));ap.strides=np.strides}return assertPositiveInteger(ap.strides,"strides"),ap.padding=np.padding==null?"valid":np.padding,checkPaddingMode(ap.padding),ap.inputSpec=[new InputSpec({ndim:3})],ap}return __extends$h(rp,_d),rp.prototype.computeOutputShape=function(np){var ap=convOutputLength((np=getExactlyOneShape(np))[1],this.poolSize[0],this.padding,this.strides[0]);return[np[0],ap,np[2]]},rp.prototype.call=function(np,ap){var sp=this;return je(function(){sp.invokeCallHook(np,ap),np=expandDims$1(getExactlyOneTensor(np),2);var lp=sp.poolingFunction(getExactlyOneTensor(np),[sp.poolSize[0],1],[sp.strides[0],1],sp.padding,"channelsLast");return Dr(lp,[2])})},rp.prototype.getConfig=function(){var np={poolSize:this.poolSize,padding:this.padding,strides:this.strides},ap=_d.prototype.getConfig.call(this);return Object.assign(np,ap),np},rp}(Layer),MaxPooling1D=function(_d){function rp(np){return _d.call(this,np)||this}return __extends$h(rp,_d),rp.prototype.poolingFunction=function(np,ap,sp,lp,up){return checkDataFormat(up),checkPaddingMode(lp),pool2d(np,ap,sp,lp,up,"max")},rp.className="MaxPooling1D",rp}(Pooling1D);Mf.registerClass(MaxPooling1D);var AveragePooling1D=function(_d){function rp(np){return _d.call(this,np)||this}return __extends$h(rp,_d),rp.prototype.poolingFunction=function(np,ap,sp,lp,up){return checkDataFormat(up),checkPaddingMode(lp),pool2d(np,ap,sp,lp,up,"avg")},rp.className="AveragePooling1D",rp}(Pooling1D);Mf.registerClass(AveragePooling1D);var Pooling2D=function(_d){function rp(np){var ap=this;if(np.poolSize==null&&(np.poolSize=[2,2]),(ap=_d.call(this,np)||this).poolSize=Array.isArray(np.poolSize)?np.poolSize:[np.poolSize,np.poolSize],np.strides==null)ap.strides=ap.poolSize;else if(Array.isArray(np.strides)){if(np.strides.length!==2)throw new ValueError("If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length "+np.strides.length+".");ap.strides=np.strides}else ap.strides=[np.strides,np.strides];return assertPositiveInteger(ap.poolSize,"poolSize"),assertPositiveInteger(ap.strides,"strides"),ap.padding=np.padding==null?"valid":np.padding,ap.dataFormat=np.dataFormat==null?"channelsLast":np.dataFormat,checkDataFormat(ap.dataFormat),checkPaddingMode(ap.padding),ap.inputSpec=[new InputSpec({ndim:4})],ap}return __extends$h(rp,_d),rp.prototype.computeOutputShape=function(np){np=getExactlyOneShape(np);var ap=this.dataFormat==="channelsFirst"?np[2]:np[1],sp=this.dataFormat==="channelsFirst"?np[3]:np[2];return ap=convOutputLength(ap,this.poolSize[0],this.padding,this.strides[0]),sp=convOutputLength(sp,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[np[0],np[1],ap,sp]:[np[0],ap,sp,np[3]]},rp.prototype.call=function(np,ap){var sp=this;return je(function(){return sp.invokeCallHook(np,ap),sp.poolingFunction(getExactlyOneTensor(np),sp.poolSize,sp.strides,sp.padding,sp.dataFormat)})},rp.prototype.getConfig=function(){var np={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},ap=_d.prototype.getConfig.call(this);return Object.assign(np,ap),np},rp}(Layer),MaxPooling2D=function(_d){function rp(np){return _d.call(this,np)||this}return __extends$h(rp,_d),rp.prototype.poolingFunction=function(np,ap,sp,lp,up){return checkDataFormat(up),checkPaddingMode(lp),pool2d(np,ap,sp,lp,up,"max")},rp.className="MaxPooling2D",rp}(Pooling2D);Mf.registerClass(MaxPooling2D);var AveragePooling2D=function(_d){function rp(np){return _d.call(this,np)||this}return __extends$h(rp,_d),rp.prototype.poolingFunction=function(np,ap,sp,lp,up){return checkDataFormat(up),checkPaddingMode(lp),pool2d(np,ap,sp,lp,up,"avg")},rp.className="AveragePooling2D",rp}(Pooling2D);Mf.registerClass(AveragePooling2D);var Pooling3D=function(_d){function rp(np){var ap=this;if(np.poolSize==null&&(np.poolSize=[2,2,2]),(ap=_d.call(this,np)||this).poolSize=Array.isArray(np.poolSize)?np.poolSize:[np.poolSize,np.poolSize,np.poolSize],np.strides==null)ap.strides=ap.poolSize;else if(Array.isArray(np.strides)){if(np.strides.length!==3)throw new ValueError("If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length "+np.strides.length+".");ap.strides=np.strides}else ap.strides=[np.strides,np.strides,np.strides];return assertPositiveInteger(ap.poolSize,"poolSize"),assertPositiveInteger(ap.strides,"strides"),ap.padding=np.padding==null?"valid":np.padding,ap.dataFormat=np.dataFormat==null?"channelsLast":np.dataFormat,checkDataFormat(ap.dataFormat),checkPaddingMode(ap.padding),ap.inputSpec=[new InputSpec({ndim:5})],ap}return __extends$h(rp,_d),rp.prototype.computeOutputShape=function(np){np=getExactlyOneShape(np);var ap=this.dataFormat==="channelsFirst"?np[2]:np[1],sp=this.dataFormat==="channelsFirst"?np[3]:np[2],lp=this.dataFormat==="channelsFirst"?np[4]:np[3];return ap=convOutputLength(ap,this.poolSize[0],this.padding,this.strides[0]),sp=convOutputLength(sp,this.poolSize[1],this.padding,this.strides[1]),lp=convOutputLength(lp,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[np[0],np[1],ap,sp,lp]:[np[0],ap,sp,lp,np[4]]},rp.prototype.call=function(np,ap){var sp=this;return je(function(){return sp.invokeCallHook(np,ap),sp.poolingFunction(getExactlyOneTensor(np),sp.poolSize,sp.strides,sp.padding,sp.dataFormat)})},rp.prototype.getConfig=function(){var np={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},ap=_d.prototype.getConfig.call(this);return Object.assign(np,ap),np},rp}(Layer),MaxPooling3D=function(_d){function rp(np){return _d.call(this,np)||this}return __extends$h(rp,_d),rp.prototype.poolingFunction=function(np,ap,sp,lp,up){return checkDataFormat(up),checkPaddingMode(lp),pool3d(np,ap,sp,lp,up,"max")},rp.className="MaxPooling3D",rp}(Pooling3D);Mf.registerClass(MaxPooling3D);var AveragePooling3D=function(_d){function rp(np){return _d.call(this,np)||this}return __extends$h(rp,_d),rp.prototype.poolingFunction=function(np,ap,sp,lp,up){return checkDataFormat(up),checkPaddingMode(lp),pool3d(np,ap,sp,lp,up,"avg")},rp.className="AveragePooling3D",rp}(Pooling3D);Mf.registerClass(AveragePooling3D);var GlobalPooling1D=function(_d){function rp(np){var ap=_d.call(this,np)||this;return ap.inputSpec=[new InputSpec({ndim:3})],ap}return __extends$h(rp,_d),rp.prototype.computeOutputShape=function(np){return[np[0],np[2]]},rp.prototype.call=function(np,ap){throw new NotImplementedError},rp}(Layer),GlobalAveragePooling1D=function(_d){function rp(np){return _d.call(this,np||{})||this}return __extends$h(rp,_d),rp.prototype.call=function(np,ap){return je(function(){var sp=getExactlyOneTensor(np);return fl(sp,1)})},rp.className="GlobalAveragePooling1D",rp}(GlobalPooling1D);Mf.registerClass(GlobalAveragePooling1D);var GlobalMaxPooling1D=function(_d){function rp(np){return _d.call(this,np||{})||this}return __extends$h(rp,_d),rp.prototype.call=function(np,ap){return je(function(){var sp=getExactlyOneTensor(np);return hl(sp,1)})},rp.className="GlobalMaxPooling1D",rp}(GlobalPooling1D);Mf.registerClass(GlobalMaxPooling1D);var GlobalPooling2D=function(_d){function rp(np){var ap=_d.call(this,np)||this;return ap.dataFormat=np.dataFormat==null?"channelsLast":np.dataFormat,checkDataFormat(ap.dataFormat),ap.inputSpec=[new InputSpec({ndim:4})],ap}return __extends$h(rp,_d),rp.prototype.computeOutputShape=function(np){return np=np,this.dataFormat==="channelsLast"?[np[0],np[3]]:[np[0],np[1]]},rp.prototype.call=function(np,ap){throw new NotImplementedError},rp.prototype.getConfig=function(){var np={dataFormat:this.dataFormat},ap=_d.prototype.getConfig.call(this);return Object.assign(np,ap),np},rp}(Layer),GlobalAveragePooling2D=function(_d){function rp(){return _d!==null&&_d.apply(this,arguments)||this}return __extends$h(rp,_d),rp.prototype.call=function(np,ap){var sp=this;return je(function(){var lp=getExactlyOneTensor(np);return sp.dataFormat==="channelsLast"?fl(lp,[1,2]):fl(lp,[2,3])})},rp.className="GlobalAveragePooling2D",rp}(GlobalPooling2D);Mf.registerClass(GlobalAveragePooling2D);var GlobalMaxPooling2D=function(_d){function rp(){return _d!==null&&_d.apply(this,arguments)||this}return __extends$h(rp,_d),rp.prototype.call=function(np,ap){var sp=this;return je(function(){var lp=getExactlyOneTensor(np);return sp.dataFormat==="channelsLast"?hl(lp,[1,2]):hl(lp,[2,3])})},rp.className="GlobalMaxPooling2D",rp}(GlobalPooling2D);function standardizeArgs(_d,rp,np,ap){if(Array.isArray(_d)){if(rp!=null||np!=null)throw new ValueError("When inputs is an array, neither initialState or constants should be provided");ap!=null&&(np=_d.slice(_d.length-ap,_d.length),_d=_d.slice(0,_d.length-ap)),_d.length>1&&(rp=_d.slice(1,_d.length)),_d=_d[0]}function sp(lp){return lp==null||Array.isArray(lp)?lp:[lp]}return{inputs:_d,initialState:rp=sp(rp),constants:np=sp(np)}}function rnn(_d,rp,np,ap,sp,lp,up,cp){return ap===void 0&&(ap=!1),up===void 0&&(up=!1),cp===void 0&&(cp=!1),je(function(){var dp=rp.shape.length;if(dp<3)throw new ValueError("Input should be at least 3D, but is "+dp+"D.");var fp=[1,0].concat(range(2,dp));if(rp=El(rp,fp),lp!=null)throw new NotImplementedError("The rnn() functoin of the deeplearn.js backend does not support constants yet.");up&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),sp!=null&&((sp=sp.asType("bool").asType("float32")).rank===dp-1&&(sp=dr(sp,-1)),sp=El(sp,fp)),ap&&(rp=zc(rp,0),sp!=null&&(sp=zc(sp,0)));var pp,hp,mp=[],gp=np,vp=rp.shape[0],xp=Or(rp);sp!=null&&(hp=Or(sp));for(var Sp,yp=function(Ep){var wp=xp[Ep],_p=je(function(){return _d(wp,gp)});if(sp==null)pp=_p[0],gp=_p[1];else{var Rp=je(function(){var $p=hp[Ep],Cp=Vn($p).sub($p);return{output:_p[0].mul($p).addStrict(gp[0].mul(Cp)),newStates:gp.map(function(Ap,Op){return _p[1][Op].mul($p).addStrict(Ap.mul(Cp))})}});pp=Rp.output,gp=Rp.newStates}cp&&mp.push(pp)},bp=0;bp<vp;++bp)yp(bp);return cp&&(Sp=Tr(mp,1)),[pp,Sp,gp]})}Mf.registerClass(GlobalMaxPooling2D);var RNN=function(_d){function rp(np){var ap,sp=_d.call(this,np)||this;if(np.cell==null)throw new ValueError("cell property is missing for the constructor of RNN.");if((ap=Array.isArray(np.cell)?new StackedRNNCells({cells:np.cell}):np.cell).stateSize==null)throw new ValueError("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");return sp.cell=ap,sp.returnSequences=np.returnSequences!=null&&np.returnSequences,sp.returnState=np.returnState!=null&&np.returnState,sp.goBackwards=np.goBackwards!=null&&np.goBackwards,sp._stateful=np.stateful!=null&&np.stateful,sp.unroll=np.unroll!=null&&np.unroll,sp.supportsMasking=!0,sp.inputSpec=[new InputSpec({ndim:3})],sp.stateSpec=null,sp.states_=null,sp.numConstants=null,sp.keptStates=[],sp}return __extends$h(rp,_d),rp.prototype.getStates=function(){return this.states_==null?range(0,Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1).map(function(np){return null}):this.states_},rp.prototype.setStates=function(np){this.states_=np},rp.prototype.computeOutputShape=function(np){isArrayOfShapes(np)&&(np=np[0]),np=np;var ap=this.cell.stateSize;Array.isArray(ap)||(ap=[ap]);var sp,lp=ap[0];if(sp=this.returnSequences?[np[0],np[1],lp]:[np[0],lp],this.returnState){for(var up=[],cp=0,dp=ap;cp<dp.length;cp++){var fp=dp[cp];up.push([np[0],fp])}return[sp].concat(up)}return sp},rp.prototype.computeMask=function(np,ap){var sp=this;return je(function(){Array.isArray(ap)&&(ap=ap[0]);var lp=sp.returnSequences?ap:null;if(sp.returnState){var up=sp.states.map(function(cp){return null});return[lp].concat(up)}return lp})},Object.defineProperty(rp.prototype,"states",{get:function(){if(this.states_==null){for(var np=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,ap=[],sp=0;sp<np;++sp)ap.push(null);return ap}return this.states_},set:function(np){this.states_=np},enumerable:!0,configurable:!0}),rp.prototype.build=function(np){if(this.numConstants!=null)throw new NotImplementedError("Constants support is not implemented in RNN yet.");isArrayOfShapes(np)&&(np=np[0]),np=np;var ap=this.stateful?np[0]:null,sp=np[np.length-1];this.inputSpec[0]=new InputSpec({shape:[ap,null,sp]});var lp,up=[np[0]].concat(np.slice(2));if(this.cell.build(up),lp=Array.isArray(this.cell.stateSize)?this.cell.stateSize:[this.cell.stateSize],this.stateSpec!=null){if(!tt.arraysEqual(this.stateSpec.map(function(cp){return cp.shape[cp.shape.length-1]}),lp))throw new ValueError("An initialState was passed that is not compatible with cell.stateSize. Received stateSpec="+this.stateSpec+"; However cell.stateSize is "+this.cell.stateSize)}else this.stateSpec=lp.map(function(cp){return new InputSpec({shape:[null,cp]})});this.stateful&&this.resetStates()},rp.prototype.resetStates=function(np,ap){var sp=this;ap===void 0&&(ap=!1),je(function(){if(!sp.stateful)throw new AttributeError("Cannot call resetStates() on an RNN Layer that is not stateful.");var lp=sp.inputSpec[0].shape[0];if(lp==null)throw new ValueError("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(sp.states_==null)Array.isArray(sp.cell.stateSize)?sp.states_=sp.cell.stateSize.map(function(pp){return Pn([lp,pp])}):sp.states_=[Pn([lp,sp.cell.stateSize])];else if(np==null)Xe(sp.states_),sp.keptStates!=null&&(Xe(sp.keptStates),sp.keptStates=[]),Array.isArray(sp.cell.stateSize)?sp.states_=sp.cell.stateSize.map(function(pp){return Pn([lp,pp])}):sp.states_[0]=Pn([lp,sp.cell.stateSize]);else{if(Array.isArray(np)||(np=[np]),np.length!==sp.states_.length)throw new ValueError("Layer "+sp.name+" expects "+sp.states_.length+" state(s), but it received "+np.length+" state value(s). Input received: "+np);ap===!0?sp.keptStates.push(sp.states_.slice()):Xe(sp.states_);for(var up=0;up<sp.states_.length;++up){var cp=np[up],dp=Array.isArray(sp.cell.stateSize)?sp.cell.stateSize[up]:sp.cell.stateSize,fp=[lp,dp];if(!tt.arraysEqual(cp.shape,fp))throw new ValueError("State "+up+" is incompatible with layer "+sp.name+": expected shape="+fp+", received shape="+cp.shape);sp.states_[up]=cp}}sp.states_=sp.states_.map(function(pp){return $e(pp.clone())})})},rp.prototype.apply=function(np,ap){var sp=ap==null?null:ap.initialState,lp=ap==null?null:ap.constants;ap==null&&(ap={});var up=standardizeArgs(np,sp,lp,this.numConstants);np=up.inputs,sp=up.initialState,lp=up.constants;var cp=[],dp=[];if(sp!=null){ap.initialState=sp,cp=cp.concat(sp),this.stateSpec=[];for(var fp=0,pp=sp;fp<pp.length;fp++){var hp=pp[fp];this.stateSpec.push(new InputSpec({shape:hp.shape}))}dp=dp.concat(this.stateSpec)}if(lp!=null&&(ap.constants=lp,cp=cp.concat(lp),this.numConstants=lp.length),cp[0]instanceof SymbolicTensor){var mp=[np].concat(cp),gp=this.inputSpec.concat(dp),vp=this.inputSpec;this.inputSpec=gp;var xp=_d.prototype.apply.call(this,mp,ap);return this.inputSpec=vp,xp}return _d.prototype.apply.call(this,np,ap)},rp.prototype.call=function(np,ap){var sp=this;return je(function(){var lp=ap==null?null:ap.mask,up=ap==null?null:ap.training,cp=ap==null?null:ap.initialState;np=getExactlyOneTensor(np),cp==null&&(cp=sp.stateful?sp.states_:sp.getInitialState(np));var dp=Array.isArray(sp.cell.stateSize)?sp.cell.stateSize.length:1;if(cp.length!==dp)throw new ValueError("RNN Layer has "+dp+" state(s) but was passed "+cp.length+" initial state(s).");sp.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");var fp={training:up},pp=rnn(function(xp,Sp){var yp=sp.cell.call([xp].concat(Sp),fp);return[yp[0],yp.slice(1)]},np,cp,sp.goBackwards,lp,null,sp.unroll,sp.returnSequences),hp=pp[0],mp=pp[1],gp=pp[2];sp.stateful&&sp.resetStates(gp,up);var vp=sp.returnSequences?mp:hp;return sp.returnState?[vp].concat(gp):vp})},rp.prototype.getInitialState=function(np){var ap=this;return je(function(){var sp=Pn(np.shape);return sp=expandDims$1(sp=vl(sp,[1,2])),Array.isArray(ap.cell.stateSize)?ap.cell.stateSize.map(function(lp){return lp>1?tile$1(sp,[1,lp]):sp}):ap.cell.stateSize>1?[tile$1(sp,[1,ap.cell.stateSize])]:[sp]})},Object.defineProperty(rp.prototype,"trainableWeights",{get:function(){return this.trainable?this.cell.trainableWeights:[]},enumerable:!0,configurable:!0}),Object.defineProperty(rp.prototype,"nonTrainableWeights",{get:function(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights},enumerable:!0,configurable:!0}),rp.prototype.setFastWeightInitDuringBuild=function(np){_d.prototype.setFastWeightInitDuringBuild.call(this,np),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(np)},rp.prototype.getConfig=function(){var np={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(np.numConstants=this.numConstants);var ap=this.cell.getConfig();np.cell={className:this.cell.getClassName(),config:ap};var sp=_d.prototype.getConfig.call(this);return Object.assign(np,sp),np},rp.fromConfig=function(np,ap,sp){sp===void 0&&(sp={});var lp=deserialize(ap.cell,sp);return new np(Object.assign(ap,{cell:lp}))},rp.className="RNN",rp}(Layer);Mf.registerClass(RNN);var RNNCell=function(_d){function rp(){return _d!==null&&_d.apply(this,arguments)||this}return __extends$h(rp,_d),rp}(Layer),SimpleRNNCell=function(_d){function rp(np){var ap=_d.call(this,np)||this;return ap.DEFAULT_ACTIVATION="tanh",ap.DEFAULT_KERNEL_INITIALIZER="glorotNormal",ap.DEFAULT_RECURRENT_INITIALIZER="orthogonal",ap.DEFAULT_BIAS_INITIALIZER="zeros",ap.units=np.units,assertPositiveInteger(ap.units,"units"),ap.activation=getActivation(np.activation==null?ap.DEFAULT_ACTIVATION:np.activation),ap.useBias=np.useBias==null||np.useBias,ap.kernelInitializer=getInitializer(np.kernelInitializer||ap.DEFAULT_KERNEL_INITIALIZER),ap.recurrentInitializer=getInitializer(np.recurrentInitializer||ap.DEFAULT_RECURRENT_INITIALIZER),ap.biasInitializer=getInitializer(np.biasInitializer||ap.DEFAULT_BIAS_INITIALIZER),ap.kernelRegularizer=getRegularizer(np.kernelRegularizer),ap.recurrentRegularizer=getRegularizer(np.recurrentRegularizer),ap.biasRegularizer=getRegularizer(np.biasRegularizer),ap.kernelConstraint=getConstraint(np.kernelConstraint),ap.recurrentConstraint=getConstraint(np.recurrentConstraint),ap.biasConstraint=getConstraint(np.biasConstraint),ap.dropout=min$1$1([1,max$1([0,np.dropout==null?0:np.dropout])]),ap.recurrentDropout=min$1$1([1,max$1([0,np.recurrentDropout==null?0:np.recurrentDropout])]),ap.stateSize=ap.units,ap.dropoutMask=null,ap.recurrentDropoutMask=null,ap}return __extends$h(rp,_d),rp.prototype.build=function(np){np=getExactlyOneShape(np),this.kernel=this.addWeight("kernel",[np[np.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0},rp.prototype.call=function(np,ap){var sp=this;return je(function(){if((np=np).length!==2)throw new ValueError("SimpleRNNCell expects 2 input Tensors, got "+np.length+".");var lp=np[1];np=np[0];var up,cp=ap.training!=null&&ap.training;0<sp.dropout&&sp.dropout<1&&sp.dropoutMask==null&&(sp.dropoutMask=generateDropoutMask(function(){return Vn(np)},sp.dropout,cp)),0<sp.recurrentDropout&&sp.recurrentDropout<1&&sp.recurrentDropoutMask==null&&(sp.recurrentDropoutMask=generateDropoutMask(function(){return Vn(lp)},sp.recurrentDropout,cp));var dp=sp.dropoutMask,fp=sp.recurrentDropoutMask;up=dot(dp!=null?tc(np,dp):np,sp.kernel.read()),sp.bias!=null&&(up=biasAdd(up,sp.bias.read())),fp!=null&&(lp=tc(lp,fp));var pp=Vs(up,dot(lp,sp.recurrentKernel.read()));return sp.activation!=null&&(pp=sp.activation.apply(pp)),[pp,pp]})},rp.prototype.getConfig=function(){var np={units:this.units,activation:serializeActivation(this.activation),useBias:this.useBias,kernelInitializer:serializeInitializer(this.kernelInitializer),recurrentInitializer:serializeInitializer(this.recurrentInitializer),biasInitializer:serializeInitializer(this.biasInitializer),kernelRegularizer:serializeRegularizer(this.kernelRegularizer),recurrentRegularizer:serializeRegularizer(this.recurrentRegularizer),biasRegularizer:serializeRegularizer(this.biasRegularizer),activityRegularizer:serializeRegularizer(this.activityRegularizer),kernelConstraint:serializeConstraint(this.kernelConstraint),recurrentConstraint:serializeConstraint(this.recurrentConstraint),biasConstraint:serializeConstraint(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout},ap=_d.prototype.getConfig.call(this);return Object.assign(np,ap),np},rp.className="SimpleRNNCell",rp}(RNNCell);Mf.registerClass(SimpleRNNCell);var SimpleRNN=function(_d){function rp(np){return np.cell=new SimpleRNNCell(np),_d.call(this,np)||this}return __extends$h(rp,_d),rp.prototype.call=function(np,ap){var sp=this;return je(function(){sp.cell.dropoutMask!=null&&(Xe(sp.cell.dropoutMask),sp.cell.dropoutMask=null),sp.cell.recurrentDropoutMask!=null&&(Xe(sp.cell.recurrentDropoutMask),sp.cell.recurrentDropoutMask=null);var lp=ap==null?null:ap.mask,up=ap==null?null:ap.training,cp=ap==null?null:ap.initialState;return _d.prototype.call.call(sp,np,{mask:lp,training:up,initialState:cp})})},Object.defineProperty(rp.prototype,"units",{get:function(){return this.cell.units},enumerable:!0,configurable:!0}),Object.defineProperty(rp.prototype,"activation",{get:function(){return this.cell.activation},enumerable:!0,configurable:!0}),Object.defineProperty(rp.prototype,"useBias",{get:function(){return this.cell.useBias},enumerable:!0,configurable:!0}),Object.defineProperty(rp.prototype,"kernelInitializer",{get:function(){return this.cell.kernelInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(rp.prototype,"recurrentInitializer",{get:function(){return this.cell.recurrentInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(rp.prototype,"biasInitializer",{get:function(){return this.cell.biasInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(rp.prototype,"kernelRegularizer",{get:function(){return this.cell.kernelRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(rp.prototype,"recurrentRegularizer",{get:function(){return this.cell.recurrentRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(rp.prototype,"biasRegularizer",{get:function(){return this.cell.biasRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(rp.prototype,"kernelConstraint",{get:function(){return this.cell.kernelConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(rp.prototype,"recurrentConstraint",{get:function(){return this.cell.recurrentConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(rp.prototype,"biasConstraint",{get:function(){return this.cell.biasConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(rp.prototype,"dropout",{get:function(){return this.cell.dropout},enumerable:!0,configurable:!0}),Object.defineProperty(rp.prototype,"recurrentDropout",{get:function(){return this.cell.recurrentDropout},enumerable:!0,configurable:!0}),rp.prototype.getConfig=function(){var np={units:this.units,activation:serializeActivation(this.activation),useBias:this.useBias,kernelInitializer:serializeInitializer(this.kernelInitializer),recurrentInitializer:serializeInitializer(this.recurrentInitializer),biasInitializer:serializeInitializer(this.biasInitializer),kernelRegularizer:serializeRegularizer(this.kernelRegularizer),recurrentRegularizer:serializeRegularizer(this.recurrentRegularizer),biasRegularizer:serializeRegularizer(this.biasRegularizer),activityRegularizer:serializeRegularizer(this.activityRegularizer),kernelConstraint:serializeConstraint(this.kernelConstraint),recurrentConstraint:serializeConstraint(this.recurrentConstraint),biasConstraint:serializeConstraint(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout},ap=_d.prototype.getConfig.call(this);return delete ap.cell,Object.assign(np,ap),np},rp.fromConfig=function(np,ap){return new np(ap)},rp.className="SimpleRNN",rp}(RNN);Mf.registerClass(SimpleRNN);var GRUCell=function(_d){function rp(np){var ap=_d.call(this,np)||this;return ap.DEFAULT_ACTIVATION="tanh",ap.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",ap.DEFAULT_KERNEL_INITIALIZER="glorotNormal",ap.DEFAULT_RECURRENT_INITIALIZER="orthogonal",ap.DEFAULT_BIAS_INITIALIZER="zeros",ap.units=np.units,assertPositiveInteger(ap.units,"units"),ap.activation=getActivation(np.activation===void 0?ap.DEFAULT_ACTIVATION:np.activation),ap.recurrentActivation=getActivation(np.recurrentActivation===void 0?ap.DEFAULT_RECURRENT_ACTIVATION:np.recurrentActivation),ap.useBias=np.useBias==null||np.useBias,ap.kernelInitializer=getInitializer(np.kernelInitializer||ap.DEFAULT_KERNEL_INITIALIZER),ap.recurrentInitializer=getInitializer(np.recurrentInitializer||ap.DEFAULT_RECURRENT_INITIALIZER),ap.biasInitializer=getInitializer(np.biasInitializer||ap.DEFAULT_BIAS_INITIALIZER),ap.kernelRegularizer=getRegularizer(np.kernelRegularizer),ap.recurrentRegularizer=getRegularizer(np.recurrentRegularizer),ap.biasRegularizer=getRegularizer(np.biasRegularizer),ap.kernelConstraint=getConstraint(np.kernelConstraint),ap.recurrentConstraint=getConstraint(np.recurrentConstraint),ap.biasConstraint=getConstraint(np.biasConstraint),ap.dropout=min$1$1([1,max$1([0,np.dropout==null?0:np.dropout])]),ap.recurrentDropout=min$1$1([1,max$1([0,np.recurrentDropout==null?0:np.recurrentDropout])]),ap.implementation=np.implementation,ap.stateSize=ap.units,ap.dropoutMask=null,ap.recurrentDropoutMask=null,ap}return __extends$h(rp,_d),rp.prototype.build=function(np){var ap=(np=getExactlyOneShape(np))[np.length-1];this.kernel=this.addWeight("kernel",[ap,3*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,3*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[3*this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0},rp.prototype.call=function(np,ap){var sp=this;return je(function(){if((np=np).length!==2)throw new ValueError("GRUCell expects 2 input Tensors (inputs, h, c), got "+np.length+".");var lp=ap.training!=null&&ap.training,up=np[1];np=np[0],0<sp.dropout&&sp.dropout<1&&sp.dropoutMask==null&&(sp.dropoutMask=generateDropoutMask(function(){return Vn(np)},sp.dropout,lp,3)),0<sp.recurrentDropout&&sp.recurrentDropout<1&&sp.recurrentDropoutMask==null&&(sp.recurrentDropoutMask=generateDropoutMask(function(){return Vn(up)},sp.recurrentDropout,lp,3));var cp,dp,fp,pp=sp.dropoutMask,hp=sp.recurrentDropoutMask;0<sp.dropout&&sp.dropout<1&&(np=tc(np,pp[0]));var mp=dot(np,sp.kernel.read());sp.useBias&&(mp=biasAdd(mp,sp.bias.read())),0<sp.recurrentDropout&&sp.recurrentDropout<1&&(up=tc(up,hp[0]));var gp=sp.recurrentKernel.read(),vp=Xn(gp,[2*sp.units,sp.units],gp.rank-1),xp=vp[0],Sp=vp[1],yp=dot(up,xp),bp=Xn(mp,3,mp.rank-1),Ep=bp[0],wp=bp[1],_p=bp[2],Rp=Xn(yp,2,yp.rank-1),$p=Rp[0],Cp=Rp[1];cp=sp.recurrentActivation.apply(Vs(Ep,$p)),dp=sp.recurrentActivation.apply(Vs(wp,Cp));var Ap=dot(tc(dp,up),Sp);fp=sp.activation.apply(Vs(_p,Ap));var Op=Vs(tc(cp,up),tc(Vs(1,as(cp)),fp));return[Op,Op]})},rp.prototype.getConfig=function(){var np={units:this.units,activation:serializeActivation(this.activation),recurrentActivation:serializeActivation(this.recurrentActivation),useBias:this.useBias,kernelInitializer:serializeInitializer(this.kernelInitializer),recurrentInitializer:serializeInitializer(this.recurrentInitializer),biasInitializer:serializeInitializer(this.biasInitializer),kernelRegularizer:serializeRegularizer(this.kernelRegularizer),recurrentRegularizer:serializeRegularizer(this.recurrentRegularizer),biasRegularizer:serializeRegularizer(this.biasRegularizer),activityRegularizer:serializeRegularizer(this.activityRegularizer),kernelConstraint:serializeConstraint(this.kernelConstraint),recurrentConstraint:serializeConstraint(this.recurrentConstraint),biasConstraint:serializeConstraint(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation},ap=_d.prototype.getConfig.call(this);return Object.assign(np,ap),np},rp.className="GRUCell",rp}(RNNCell);Mf.registerClass(GRUCell);var GRU=function(_d){function rp(np){return np.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),np.cell=new GRUCell(np),_d.call(this,np)||this}return __extends$h(rp,_d),rp.prototype.call=function(np,ap){var sp=this;return je(function(){sp.cell.dropoutMask!=null&&(Xe(sp.cell.dropoutMask),sp.cell.dropoutMask=null),sp.cell.recurrentDropoutMask!=null&&(Xe(sp.cell.recurrentDropoutMask),sp.cell.recurrentDropoutMask=null);var lp=ap==null?null:ap.mask,up=ap==null?null:ap.training,cp=ap==null?null:ap.initialState;return _d.prototype.call.call(sp,np,{mask:lp,training:up,initialState:cp})})},Object.defineProperty(rp.prototype,"units",{get:function(){return this.cell.units},enumerable:!0,configurable:!0}),Object.defineProperty(rp.prototype,"activation",{get:function(){return this.cell.activation},enumerable:!0,configurable:!0}),Object.defineProperty(rp.prototype,"recurrentActivation",{get:function(){return this.cell.recurrentActivation},enumerable:!0,configurable:!0}),Object.defineProperty(rp.prototype,"useBias",{get:function(){return this.cell.useBias},enumerable:!0,configurable:!0}),Object.defineProperty(rp.prototype,"kernelInitializer",{get:function(){return this.cell.kernelInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(rp.prototype,"recurrentInitializer",{get:function(){return this.cell.recurrentInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(rp.prototype,"biasInitializer",{get:function(){return this.cell.biasInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(rp.prototype,"kernelRegularizer",{get:function(){return this.cell.kernelRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(rp.prototype,"recurrentRegularizer",{get:function(){return this.cell.recurrentRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(rp.prototype,"biasRegularizer",{get:function(){return this.cell.biasRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(rp.prototype,"kernelConstraint",{get:function(){return this.cell.kernelConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(rp.prototype,"recurrentConstraint",{get:function(){return this.cell.recurrentConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(rp.prototype,"biasConstraint",{get:function(){return this.cell.biasConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(rp.prototype,"dropout",{get:function(){return this.cell.dropout},enumerable:!0,configurable:!0}),Object.defineProperty(rp.prototype,"recurrentDropout",{get:function(){return this.cell.recurrentDropout},enumerable:!0,configurable:!0}),Object.defineProperty(rp.prototype,"implementation",{get:function(){return this.cell.implementation},enumerable:!0,configurable:!0}),rp.prototype.getConfig=function(){var np={units:this.units,activation:serializeActivation(this.activation),recurrentActivation:serializeActivation(this.recurrentActivation),useBias:this.useBias,kernelInitializer:serializeInitializer(this.kernelInitializer),recurrentInitializer:serializeInitializer(this.recurrentInitializer),biasInitializer:serializeInitializer(this.biasInitializer),kernelRegularizer:serializeRegularizer(this.kernelRegularizer),recurrentRegularizer:serializeRegularizer(this.recurrentRegularizer),biasRegularizer:serializeRegularizer(this.biasRegularizer),activityRegularizer:serializeRegularizer(this.activityRegularizer),kernelConstraint:serializeConstraint(this.kernelConstraint),recurrentConstraint:serializeConstraint(this.recurrentConstraint),biasConstraint:serializeConstraint(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation},ap=_d.prototype.getConfig.call(this);return delete ap.cell,Object.assign(np,ap),np},rp.fromConfig=function(np,ap){return ap.implmentation===0&&(ap.implementation=1),new np(ap)},rp.className="GRU",rp}(RNN);Mf.registerClass(GRU);var LSTMCell=function(_d){function rp(np){var ap=_d.call(this,np)||this;return ap.DEFAULT_ACTIVATION="tanh",ap.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",ap.DEFAULT_KERNEL_INITIALIZER="glorotNormal",ap.DEFAULT_RECURRENT_INITIALIZER="orthogonal",ap.DEFAULT_BIAS_INITIALIZER="zeros",ap.units=np.units,assertPositiveInteger(ap.units,"units"),ap.activation=getActivation(np.activation===void 0?ap.DEFAULT_ACTIVATION:np.activation),ap.recurrentActivation=getActivation(np.recurrentActivation===void 0?ap.DEFAULT_RECURRENT_ACTIVATION:np.recurrentActivation),ap.useBias=np.useBias==null||np.useBias,ap.kernelInitializer=getInitializer(np.kernelInitializer||ap.DEFAULT_KERNEL_INITIALIZER),ap.recurrentInitializer=getInitializer(np.recurrentInitializer||ap.DEFAULT_RECURRENT_INITIALIZER),ap.biasInitializer=getInitializer(np.biasInitializer||ap.DEFAULT_BIAS_INITIALIZER),ap.unitForgetBias=np.unitForgetBias,ap.kernelRegularizer=getRegularizer(np.kernelRegularizer),ap.recurrentRegularizer=getRegularizer(np.recurrentRegularizer),ap.biasRegularizer=getRegularizer(np.biasRegularizer),ap.kernelConstraint=getConstraint(np.kernelConstraint),ap.recurrentConstraint=getConstraint(np.recurrentConstraint),ap.biasConstraint=getConstraint(np.biasConstraint),ap.dropout=min$1$1([1,max$1([0,np.dropout==null?0:np.dropout])]),ap.recurrentDropout=min$1$1([1,max$1([0,np.recurrentDropout==null?0:np.recurrentDropout])]),ap.implementation=np.implementation,ap.stateSize=[ap.units,ap.units],ap.dropoutMask=null,ap.recurrentDropoutMask=null,ap}return __extends$h(rp,_d),rp.prototype.build=function(np){var ap,sp,lp=(np=getExactlyOneShape(np))[np.length-1];if(this.kernel=this.addWeight("kernel",[lp,4*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,4*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){if(this.unitForgetBias){var up=this.biasInitializer,cp=this.units;sp=new((ap=function(dp){function fp(){return dp!==null&&dp.apply(this,arguments)||this}return __extends$h(fp,dp),fp.prototype.apply=function(pp,hp){var mp=up.apply([cp]),gp=new Ones().apply([cp]),vp=up.apply([2*cp]);return concatAlongFirstAxis(concatAlongFirstAxis(mp,gp),vp)},fp}(Initializer)).className="CustomInit",ap)}else sp=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.units],null,sp,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0},rp.prototype.call=function(np,ap){var sp=this;return je(function(){var lp=ap.training!=null&&ap.training;if((np=np).length!==3)throw new ValueError("LSTMCell expects 3 input Tensors (inputs, h, c), got "+np.length+".");var up=np[1],cp=np[2];np=np[0],0<sp.dropout&&sp.dropout<1&&sp.dropoutMask==null&&(sp.dropoutMask=generateDropoutMask(function(){return Vn(np)},sp.dropout,lp,4)),0<sp.recurrentDropout&&sp.recurrentDropout<1&&sp.recurrentDropoutMask==null&&(sp.recurrentDropoutMask=generateDropoutMask(function(){return Vn(up)},sp.recurrentDropout,lp,4));var dp,fp,pp,hp,mp=sp.dropoutMask,gp=sp.recurrentDropoutMask;0<sp.dropout&&sp.dropout<1&&(np=tc(np,mp[0]));var vp=dot(np,sp.kernel.read());0<sp.recurrentDropout&&sp.recurrentDropout<1&&(up=tc(up,gp[0])),vp=Vs(vp,dot(up,sp.recurrentKernel.read())),sp.useBias&&(vp=biasAdd(vp,sp.bias.read()));var xp=Xn(vp,4,vp.rank-1),Sp=xp[0],yp=xp[1],bp=xp[2],Ep=xp[3];dp=sp.recurrentActivation.apply(Sp),fp=sp.recurrentActivation.apply(yp),pp=Vs(tc(fp,cp),tc(dp,sp.activation.apply(bp))),hp=sp.recurrentActivation.apply(Ep);var wp=tc(hp,sp.activation.apply(pp));return[wp,wp,pp]})},rp.prototype.getConfig=function(){var np={units:this.units,activation:serializeActivation(this.activation),recurrentActivation:serializeActivation(this.recurrentActivation),useBias:this.useBias,kernelInitializer:serializeInitializer(this.kernelInitializer),recurrentInitializer:serializeInitializer(this.recurrentInitializer),biasInitializer:serializeInitializer(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:serializeRegularizer(this.kernelRegularizer),recurrentRegularizer:serializeRegularizer(this.recurrentRegularizer),biasRegularizer:serializeRegularizer(this.biasRegularizer),activityRegularizer:serializeRegularizer(this.activityRegularizer),kernelConstraint:serializeConstraint(this.kernelConstraint),recurrentConstraint:serializeConstraint(this.recurrentConstraint),biasConstraint:serializeConstraint(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation},ap=_d.prototype.getConfig.call(this);return Object.assign(np,ap),np},rp.className="LSTMCell",rp}(RNNCell);Mf.registerClass(LSTMCell);var LSTM=function(_d){function rp(np){return np.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),np.cell=new LSTMCell(np),_d.call(this,np)||this}return __extends$h(rp,_d),rp.prototype.call=function(np,ap){var sp=this;return je(function(){sp.cell.dropoutMask!=null&&(Xe(sp.cell.dropoutMask),sp.cell.dropoutMask=null),sp.cell.recurrentDropoutMask!=null&&(Xe(sp.cell.recurrentDropoutMask),sp.cell.recurrentDropoutMask=null);var lp=ap==null?null:ap.mask,up=ap==null?null:ap.training,cp=ap==null?null:ap.initialState;return _d.prototype.call.call(sp,np,{mask:lp,training:up,initialState:cp})})},Object.defineProperty(rp.prototype,"units",{get:function(){return this.cell.units},enumerable:!0,configurable:!0}),Object.defineProperty(rp.prototype,"activation",{get:function(){return this.cell.activation},enumerable:!0,configurable:!0}),Object.defineProperty(rp.prototype,"recurrentActivation",{get:function(){return this.cell.recurrentActivation},enumerable:!0,configurable:!0}),Object.defineProperty(rp.prototype,"useBias",{get:function(){return this.cell.useBias},enumerable:!0,configurable:!0}),Object.defineProperty(rp.prototype,"kernelInitializer",{get:function(){return this.cell.kernelInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(rp.prototype,"recurrentInitializer",{get:function(){return this.cell.recurrentInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(rp.prototype,"biasInitializer",{get:function(){return this.cell.biasInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(rp.prototype,"unitForgetBias",{get:function(){return this.cell.unitForgetBias},enumerable:!0,configurable:!0}),Object.defineProperty(rp.prototype,"kernelRegularizer",{get:function(){return this.cell.kernelRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(rp.prototype,"recurrentRegularizer",{get:function(){return this.cell.recurrentRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(rp.prototype,"biasRegularizer",{get:function(){return this.cell.biasRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(rp.prototype,"kernelConstraint",{get:function(){return this.cell.kernelConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(rp.prototype,"recurrentConstraint",{get:function(){return this.cell.recurrentConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(rp.prototype,"biasConstraint",{get:function(){return this.cell.biasConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(rp.prototype,"dropout",{get:function(){return this.cell.dropout},enumerable:!0,configurable:!0}),Object.defineProperty(rp.prototype,"recurrentDropout",{get:function(){return this.cell.recurrentDropout},enumerable:!0,configurable:!0}),Object.defineProperty(rp.prototype,"implementation",{get:function(){return this.cell.implementation},enumerable:!0,configurable:!0}),rp.prototype.getConfig=function(){var np={units:this.units,activation:serializeActivation(this.activation),recurrentActivation:serializeActivation(this.recurrentActivation),useBias:this.useBias,kernelInitializer:serializeInitializer(this.kernelInitializer),recurrentInitializer:serializeInitializer(this.recurrentInitializer),biasInitializer:serializeInitializer(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:serializeRegularizer(this.kernelRegularizer),recurrentRegularizer:serializeRegularizer(this.recurrentRegularizer),biasRegularizer:serializeRegularizer(this.biasRegularizer),activityRegularizer:serializeRegularizer(this.activityRegularizer),kernelConstraint:serializeConstraint(this.kernelConstraint),recurrentConstraint:serializeConstraint(this.recurrentConstraint),biasConstraint:serializeConstraint(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation},ap=_d.prototype.getConfig.call(this);return delete ap.cell,Object.assign(np,ap),np},rp.fromConfig=function(np,ap){return ap.implmentation===0&&(ap.implementation=1),new np(ap)},rp.className="LSTM",rp}(RNN);Mf.registerClass(LSTM);var StackedRNNCells=function(_d){function rp(np){var ap=_d.call(this,np)||this;return ap.cells=np.cells,ap}return __extends$h(rp,_d),Object.defineProperty(rp.prototype,"stateSize",{get:function(){for(var np=[],ap=0,sp=this.cells.slice().reverse();ap<sp.length;ap++){var lp=sp[ap];Array.isArray(lp.stateSize)?np.push.apply(np,lp.stateSize):np.push(lp.stateSize)}return np},enumerable:!0,configurable:!0}),rp.prototype.call=function(np,ap){var sp=this;return je(function(){for(var lp=(np=np).slice(1),up=[],cp=0,dp=sp.cells.slice().reverse();cp<dp.length;cp++){var fp=dp[cp];Array.isArray(fp.stateSize)?up.push(lp.splice(0,fp.stateSize.length)):up.push(lp.splice(0,1))}up.reverse();for(var pp,hp=[],mp=0;mp<sp.cells.length;++mp)fp=sp.cells[mp],lp=up[mp],pp=mp===0?[np[0]].concat(lp):[pp[0]].concat(lp),pp=fp.call(pp,ap),hp.push(pp.slice(1));lp=[];for(var gp=0,vp=hp.slice().reverse();gp<vp.length;gp++){var xp=vp[gp];lp.push.apply(lp,xp)}return[pp[0]].concat(lp)})},rp.prototype.build=function(np){var ap;isArrayOfShapes(np)&&(np=np[0]),np=np,this.cells.forEach(function(sp,lp){nameScope("RNNCell_"+lp,function(){sp.build(np),ap=Array.isArray(sp.stateSize)?sp.stateSize[0]:sp.stateSize,np=[np[0],ap]})}),this.built=!0},rp.prototype.getConfig=function(){for(var np=[],ap=0,sp=this.cells;ap<sp.length;ap++){var lp=sp[ap];np.push({className:lp.getClassName(),config:lp.getConfig()})}var up={cells:np},cp=_d.prototype.getConfig.call(this);return Object.assign(up,cp),up},rp.fromConfig=function(np,ap,sp){sp===void 0&&(sp={});for(var lp=[],up=0,cp=ap.cells;up<cp.length;up++){var dp=cp[up];lp.push(deserialize(dp,sp))}return new np({cells:lp})},Object.defineProperty(rp.prototype,"trainableWeights",{get:function(){if(!this.trainable)return[];for(var np=[],ap=0,sp=this.cells;ap<sp.length;ap++){var lp=sp[ap];np.push.apply(np,lp.trainableWeights)}return np},enumerable:!0,configurable:!0}),Object.defineProperty(rp.prototype,"nonTrainableWeights",{get:function(){for(var np=[],ap=0,sp=this.cells;ap<sp.length;ap++){var lp=sp[ap];np.push.apply(np,lp.nonTrainableWeights)}if(!this.trainable){for(var up=[],cp=0,dp=this.cells;cp<dp.length;cp++)lp=dp[cp],up.push.apply(up,lp.trainableWeights);return up.concat(np)}return np},enumerable:!0,configurable:!0}),rp.prototype.getWeights=function(){for(var np=[],ap=0,sp=this.cells;ap<sp.length;ap++){var lp=sp[ap];np.push.apply(np,lp.weights)}return batchGetValue(np)},rp.prototype.setWeights=function(np){for(var ap=[],sp=0,lp=this.cells;sp<lp.length;sp++)for(var up=lp[sp],cp=up.weights.length,dp=np.splice(cp),fp=0;fp<up.weights.length;++fp)ap.push([up.weights[fp],dp[fp]]);batchSetValue(ap)},rp.className="StackedRNNCells",rp}(RNNCell);function generateDropoutMask(_d,rp,np,ap){function sp(){return dropout$1(_d(),rp)}if(np===void 0&&(np=null),ap===void 0&&(ap=1),ap>1){for(var lp=[],up=0;up<ap;up++)lp.push(inTrainPhase(sp,_d,np));return lp.map(function(cp){return $e(cp.clone())})}return $e(inTrainPhase(sp,_d,np).clone())}Mf.registerClass(StackedRNNCells);var Wrapper=function(_d){function rp(np){var ap=_d.call(this,np)||this;return ap.layer=np.layer,ap}return __extends$h(rp,_d),rp.prototype.build=function(np){this.built=!0},Object.defineProperty(rp.prototype,"trainable",{get:function(){return this.layer!=null&&this.layer.trainable},set:function(np){this.layer!=null&&(this.layer.trainable=np)},enumerable:!0,configurable:!0}),Object.defineProperty(rp.prototype,"trainableWeights",{get:function(){return this.layer.trainableWeights},enumerable:!0,configurable:!0}),Object.defineProperty(rp.prototype,"nonTrainableWeights",{get:function(){return this.layer.nonTrainableWeights},enumerable:!0,configurable:!0}),Object.defineProperty(rp.prototype,"updates",{get:function(){return this.layer._updates},enumerable:!0,configurable:!0}),Object.defineProperty(rp.prototype,"losses",{get:function(){return this.layer.losses},enumerable:!0,configurable:!0}),rp.prototype.getWeights=function(){return this.layer.getWeights()},rp.prototype.setWeights=function(np){this.layer.setWeights(np)},rp.prototype.getConfig=function(){var np={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},ap=_d.prototype.getConfig.call(this);return Object.assign(np,ap),np},rp.prototype.setFastWeightInitDuringBuild=function(np){_d.prototype.setFastWeightInitDuringBuild.call(this,np),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(np)},rp.fromConfig=function(np,ap,sp){sp===void 0&&(sp={});var lp=deserialize(ap.layer,sp);delete ap.layer;var up={layer:lp};return Object.assign(up,ap),new np(up)},rp}(Layer),TimeDistributed=function(_d){function rp(np){var ap=_d.call(this,np)||this;return ap.supportsMasking=!0,ap}return __extends$h(rp,_d),rp.prototype.build=function(np){if((np=getExactlyOneShape(np)).length<3)throw new ValueError("TimeDistributed layer expects an input shape >= 3D, but received input shape "+JSON.stringify(np));this.inputSpec=[{shape:np}];var ap=[np[0]].concat(np.slice(2));this.layer.built||(this.layer.build(ap),this.layer.built=!0),_d.prototype.build.call(this,np)},rp.prototype.computeOutputShape=function(np){var ap=[(np=getExactlyOneShape(np))[0]].concat(np.slice(2)),sp=this.layer.computeOutputShape(ap),lp=np[1];return[sp[0],lp].concat(sp.slice(1))},rp.prototype.call=function(np,ap){var sp=this;return je(function(){return rnn(function(lp,up){return[getExactlyOneTensor(sp.layer.call(lp,ap)),[]]},np=getExactlyOneTensor(np),[],!1,null,null,!1,!0)[1]})},rp.className="TimeDistributed",rp}(Wrapper);function checkBidirectionalMergeMode(_d){checkStringTypeUnionValue(VALID_BIDIRECTIONAL_MERGE_MODES,"BidirectionalMergeMode",_d)}Mf.registerClass(TimeDistributed);var DEFAULT_BIDIRECTIONAL_MERGE_MODE="concat",Bidirectional=function(_d){function rp(np){var ap=_d.call(this,np)||this,sp=np.layer.getConfig(),lp={};lp.className=np.layer.getClassName(),lp.config=sp,ap.forwardLayer=deserialize(lp),sp.goBackwards=sp.goBackwards!==!0;var up={};if(up.className=np.layer.getClassName(),up.config=sp,ap.backwardLayer=deserialize(up),ap.forwardLayer.name="forward_"+ap.forwardLayer.name,ap.backwardLayer.name="backward_"+ap.backwardLayer.name,ap.mergeMode=np.mergeMode===void 0?DEFAULT_BIDIRECTIONAL_MERGE_MODE:np.mergeMode,checkBidirectionalMergeMode(ap.mergeMode),np.weights)throw new NotImplementedError("weights support is not implemented for Bidirectional layer yet.");return ap._stateful=np.layer.stateful,ap.returnSequences=np.layer.returnSequences,ap.returnState=np.layer.returnState,ap.supportsMasking=!0,ap._trainable=!0,ap.inputSpec=np.layer.inputSpec,ap.numConstants=null,ap}return __extends$h(rp,_d),Object.defineProperty(rp.prototype,"trainable",{get:function(){return this._trainable},set:function(np){this._trainable=np,this.forwardLayer!=null&&(this.forwardLayer.trainable=np),this.backwardLayer!=null&&(this.backwardLayer.trainable=np)},enumerable:!0,configurable:!0}),rp.prototype.getWeights=function(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())},rp.prototype.setWeights=function(np){var ap=np.length,sp=Math.floor(ap/2);this.forwardLayer.setWeights(np.slice(0,sp)),this.backwardLayer.setWeights(np.slice(sp))},rp.prototype.computeOutputShape=function(np){var ap,sp,lp,up=this.forwardLayer.computeOutputShape(np);return Array.isArray(up)&&Array.isArray(up[0])||(up=[up]),up=up,this.returnState&&(lp=up.slice(1)),ap=up[0],ap=ap,this.mergeMode==="concat"?(ap[ap.length-1]*=2,sp=[ap]):sp=this.mergeMode==null?[ap,ap.slice()]:[ap],this.returnState?this.mergeMode==null?sp.concat(lp).concat(lp.slice()):[ap].concat(lp).concat(lp.slice()):singletonOrArray(sp)},rp.prototype.apply=function(np,ap){var sp=ap==null?null:ap.initialState,lp=ap==null?null:ap.constants;ap==null&&(ap={});var up=standardizeArgs(np,sp,lp,this.numConstants);if(np=up.inputs,sp=up.initialState,lp=up.constants,Array.isArray(np)&&(sp=np.slice(1),np=np[0]),(sp==null||sp.length===0)&&lp==null)return _d.prototype.apply.call(this,np,ap);var cp=[],dp=[];if(sp!=null){var fp=sp.length;if(fp%2>0)throw new ValueError("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");ap.initialState=sp,cp.push.apply(cp,sp);var pp=sp.map(function(bp){return new InputSpec({shape:bp.shape})});this.forwardLayer.stateSpec=pp.slice(0,fp/2),this.backwardLayer.stateSpec=pp.slice(fp/2),dp.push.apply(dp,pp)}if(lp!=null)throw new NotImplementedError("Support for constants in Bidirectional layers is not implemented yet.");for(var hp=cp[0]instanceof SymbolicTensor,mp=0,gp=cp;mp<gp.length;mp++)if(gp[mp]instanceof SymbolicTensor!==hp)throw new ValueError("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(hp){var vp=[np].concat(cp),xp=this.inputSpec.concat(dp),Sp=this.inputSpec;this.inputSpec=xp;var yp=_d.prototype.apply.call(this,vp,ap);return this.inputSpec=Sp,yp}return _d.prototype.apply.call(this,np,ap)},rp.prototype.call=function(np,ap){var sp=this;return je(function(){if(ap.mask!=null)throw new NotImplementedError("The support for masking is not implemented for Bidirectional layers yet.");var lp,up,cp,dp,fp=ap.initialState;if(fp==null)lp=sp.forwardLayer.call(np,ap),up=sp.backwardLayer.call(np,ap);else{var pp=fp.slice(0,fp.length/2),hp=fp.slice(fp.length/2);lp=sp.forwardLayer.call(np,Object.assign(ap,{initialState:pp})),up=sp.backwardLayer.call(np,Object.assign(ap,{initialState:hp}))}return sp.returnState&&(Array.isArray(lp)&&(cp=lp.slice(1).concat(up.slice(1))),lp=lp[0],up=up[0]),sp.returnSequences&&(up=zc(up,1)),sp.mergeMode==="concat"?dp=concatenate([lp,up]):sp.mergeMode==="sum"?dp=Vs(lp,up):sp.mergeMode==="ave"?dp=tc(.5,Vs(lp,up)):sp.mergeMode==="mul"?dp=tc(lp,up):sp.mergeMode==null&&(dp=[lp,up]),sp.returnState?sp.mergeMode==null?dp.concat(cp):[dp].concat(cp):dp})},rp.prototype.resetStates=function(np){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()},rp.prototype.build=function(np){var ap=this;nameScope(this.forwardLayer.name,function(){ap.forwardLayer.build(np)}),nameScope(this.backwardLayer.name,function(){ap.backwardLayer.build(np)}),this.built=!0},Object.defineProperty(rp.prototype,"trainableWeights",{get:function(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)},enumerable:!0,configurable:!0}),Object.defineProperty(rp.prototype,"nonTrainableWeights",{get:function(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)},enumerable:!0,configurable:!0}),rp.prototype.setFastWeightInitDuringBuild=function(np){_d.prototype.setFastWeightInitDuringBuild.call(this,np),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(np),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(np)},rp.prototype.getConfig=function(){var np={mergeMode:this.mergeMode},ap=_d.prototype.getConfig.call(this);return Object.assign(np,ap),np},rp.fromConfig=function(np,ap){var sp=deserialize(ap.layer);if(delete ap.layer,ap.numConstants!=null)throw new NotImplementedError("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");var lp=ap;return lp.layer=sp,new np(lp)},rp.className="Bidirectional",rp}(Wrapper);function inputLayer(_d){return new InputLayer(_d)}function elu$2(_d){return new ELU(_d)}function reLU(_d){return new ReLU(_d)}function leakyReLU(_d){return new LeakyReLU(_d)}function prelu$1(_d){return new PReLU(_d)}function softmax$1(_d){return new Softmax$1(_d)}function thresholdedReLU(_d){return new ThresholdedReLU(_d)}function conv1d$2(_d){return new Conv1D(_d)}function conv2d$1(_d){return new Conv2D(_d)}function conv2dTranspose$1(_d){return new Conv2DTranspose(_d)}function conv3d$2(_d){return new Conv3D(_d)}function separableConv2d$1(_d){return new SeparableConv2D(_d)}function cropping2D(_d){return new Cropping2D(_d)}function upSampling2d(_d){return new UpSampling2D(_d)}function depthwiseConv2d$2(_d){return new DepthwiseConv2D(_d)}function activation(_d){return new Activation$1(_d)}function dense(_d){return new Dense(_d)}function dropout$2(_d){return new Dropout(_d)}function flatten$1(_d){return new Flatten(_d)}function repeatVector(_d){return new RepeatVector(_d)}function reshape(_d){return new Reshape(_d)}function permute(_d){return new Permute(_d)}function embedding(_d){return new Embedding(_d)}function add$2(_d){return new Add(_d)}function average$1(_d){return new Average(_d)}function concatenate$2(_d){return new Concatenate(_d)}function maximum$2(_d){return new Maximum(_d)}function minimum$2(_d){return new Minimum(_d)}function multiply$1(_d){return new Multiply(_d)}function dot$1(_d){return new Dot(_d)}function batchNormalization$1(_d){return new BatchNormalization(_d)}function layerNormalization(_d){return new LayerNormalization(_d)}function zeroPadding2d(_d){return new ZeroPadding2D(_d)}function averagePooling1d(_d){return new AveragePooling1D(_d)}function avgPool1d(_d){return averagePooling1d(_d)}function avgPooling1d(_d){return averagePooling1d(_d)}function averagePooling2d(_d){return new AveragePooling2D(_d)}function avgPool2d(_d){return averagePooling2d(_d)}function avgPooling2d(_d){return averagePooling2d(_d)}function averagePooling3d(_d){return new AveragePooling3D(_d)}function avgPool3d$1(_d){return averagePooling3d(_d)}function avgPooling3d(_d){return averagePooling3d(_d)}function globalAveragePooling1d(_d){return new GlobalAveragePooling1D(_d)}function globalAveragePooling2d(_d){return new GlobalAveragePooling2D(_d)}function globalMaxPooling1d(_d){return new GlobalMaxPooling1D(_d)}function globalMaxPooling2d(_d){return new GlobalMaxPooling2D(_d)}function maxPooling1d(_d){return new MaxPooling1D(_d)}function maxPooling2d(_d){return new MaxPooling2D(_d)}function maxPooling3d(_d){return new MaxPooling3D(_d)}function gru(_d){return new GRU(_d)}function gruCell(_d){return new GRUCell(_d)}function lstm(_d){return new LSTM(_d)}function lstmCell(_d){return new LSTMCell(_d)}function simpleRNN(_d){return new SimpleRNN(_d)}function simpleRNNCell(_d){return new SimpleRNNCell(_d)}function rnn$1(_d){return new RNN(_d)}function stackedRNNCells(_d){return new StackedRNNCells(_d)}function bidirectional(_d){return new Bidirectional(_d)}function timeDistributed(_d){return new TimeDistributed(_d)}Mf.registerClass(Bidirectional);var globalMaxPool1d=globalMaxPooling1d,globalMaxPool2d=globalMaxPooling2d,maxPool1d=maxPooling1d,maxPool2d=maxPooling2d;function gaussianNoise(_d){return new GaussianNoise(_d)}function gaussianDropout(_d){return new GaussianDropout(_d)}function alphaDropout(_d){return new AlphaDropout(_d)}function masking(_d){return new Masking(_d)}var exports_layers=Object.freeze({inputLayer,elu:elu$2,reLU,leakyReLU,prelu:prelu$1,softmax:softmax$1,thresholdedReLU,conv1d:conv1d$2,conv2d:conv2d$1,conv2dTranspose:conv2dTranspose$1,conv3d:conv3d$2,separableConv2d:separableConv2d$1,cropping2D,upSampling2d,depthwiseConv2d:depthwiseConv2d$2,activation,dense,dropout:dropout$2,flatten:flatten$1,repeatVector,reshape,permute,embedding,add:add$2,average:average$1,concatenate:concatenate$2,maximum:maximum$2,minimum:minimum$2,multiply:multiply$1,dot:dot$1,batchNormalization:batchNormalization$1,layerNormalization,zeroPadding2d,averagePooling1d,avgPool1d,avgPooling1d,averagePooling2d,avgPool2d,avgPooling2d,averagePooling3d,avgPool3d:avgPool3d$1,avgPooling3d,globalAveragePooling1d,globalAveragePooling2d,globalMaxPooling1d,globalMaxPooling2d,maxPooling1d,maxPooling2d,maxPooling3d,gru,gruCell,lstm,lstmCell,simpleRNN,simpleRNNCell,rnn:rnn$1,stackedRNNCells,bidirectional,timeDistributed,globalMaxPool1d,globalMaxPool2d,maxPool1d,maxPool2d,Layer,RNN,RNNCell,input,gaussianNoise,gaussianDropout,alphaDropout,masking});function binaryAccuracy$1(_d,rp){return binaryAccuracy(_d,rp)}function binaryCrossentropy$2(_d,rp){return binaryCrossentropy$1(_d,rp)}function sparseCategoricalAccuracy$1(_d,rp){return sparseCategoricalAccuracy(_d,rp)}function categoricalAccuracy$1(_d,rp){return categoricalAccuracy(_d,rp)}function categoricalCrossentropy$2(_d,rp){return categoricalCrossentropy$1(_d,rp)}function precision$1(_d,rp){return precision(_d,rp)}function recall$1(_d,rp){return recall(_d,rp)}function cosineProximity$1(_d,rp){return cosineProximity(_d,rp)}function meanAbsoluteError$1(_d,rp){return meanAbsoluteError(_d,rp)}function meanAbsolutePercentageError$1(_d,rp){return meanAbsolutePercentageError(_d,rp)}function MAPE$2(_d,rp){return meanAbsolutePercentageError(_d,rp)}function mape$2(_d,rp){return meanAbsolutePercentageError(_d,rp)}function meanSquaredError$1(_d,rp){return meanSquaredError(_d,rp)}function MSE$2(_d,rp){return meanSquaredError(_d,rp)}function mse$2(_d,rp){return meanSquaredError(_d,rp)}var exports_metrics=Object.freeze({binaryAccuracy:binaryAccuracy$1,binaryCrossentropy:binaryCrossentropy$2,sparseCategoricalAccuracy:sparseCategoricalAccuracy$1,categoricalAccuracy:categoricalAccuracy$1,categoricalCrossentropy:categoricalCrossentropy$2,precision:precision$1,recall:recall$1,cosineProximity:cosineProximity$1,meanAbsoluteError:meanAbsoluteError$1,meanAbsolutePercentageError:meanAbsolutePercentageError$1,MAPE:MAPE$2,mape:mape$2,meanSquaredError:meanSquaredError$1,MSE:MSE$2,mse:mse$2}),exports_models=Object.freeze({modelFromJSON});function l1l2(_d){return new L1L2(_d)}function l1$1(_d){return l1(_d)}function l2$1(_d){return l2(_d)}var exports_regularizers=Object.freeze({l1l2,l1:l1$1,l2:l2$1}),Callback=function(_d){function rp(){var np=_d!==null&&_d.apply(this,arguments)||this;return np.model=null,np}return __extends$h(rp,_d),rp.prototype.setModel=function(np){if(!(np instanceof LayersModel))throw new Error("model must be a LayersModel, not some other Container");this.model=np},rp}(BaseCallback);function less(_d,rp){return _d<rp}function greater$1(_d,rp){return _d>rp}var EarlyStopping=function(_d){function rp(np){var ap=_d.call(this)||this;if(np==null&&(np={}),np.restoreBestWeights)throw new NotImplementedError("restoreBestWeights = True is not implemented in EarlyStopping yet.");return ap.monitor=np.monitor||"val_loss",ap.minDelta=Math.abs(np.minDelta||0),ap.patience=np.patience||0,ap.verbose=np.verbose||0,ap.mode=np.mode||"auto",ap.baseline=np.baseline,["auto","min","max"].indexOf(ap.mode)===-1&&(console.warn("EarlyStopping mode '"+ap.mode+"' is invalid. Falling back to mode 'auto'."),ap.mode="auto"),ap.mode==="min"?ap.monitorFunc=less:ap.mode==="max"||ap.monitor.indexOf("acc")!==-1?ap.monitorFunc=greater$1:ap.monitorFunc=less,ap.monitorFunc===less&&(ap.minDelta*=-1),ap}return __extends$h(rp,_d),rp.prototype.onTrainBegin=function(np){return __awaiter$8(this,void 0,void 0,function(){return __generator$8(this,function(ap){return this.wait=0,this.stoppedEpoch=0,this.baseline!=null?this.best=this.baseline:this.best=this.monitorFunc===less?1/0:-1/0,[2]})})},rp.prototype.onEpochEnd=function(np,ap){return __awaiter$8(this,void 0,void 0,function(){var sp;return __generator$8(this,function(lp){switch(lp.label){case 0:return[4,resolveScalarsInLogs(ap)];case 1:return lp.sent(),(sp=this.getMonitorValue(ap))==null?[2]:(this.monitorFunc(sp-this.minDelta,this.best)?(this.best=sp,this.wait=0):(this.wait++,this.wait>=this.patience&&(this.stoppedEpoch=np,this.model.stopTraining=!0)),[2])}})})},rp.prototype.onTrainEnd=function(np){return __awaiter$8(this,void 0,void 0,function(){return __generator$8(this,function(ap){return this.stoppedEpoch>0&&this.verbose&&console.log("Epoch "+this.stoppedEpoch+": early stopping."),[2]})})},rp.prototype.getMonitorValue=function(np){np==null&&(np={});var ap=np[this.monitor];return ap==null&&console.warn("Metric for EarlyStopping "+this.monitor+" is not available. Available metrics are: "+Object.keys(np)),ap},rp}(Callback);function earlyStopping(_d){return new EarlyStopping(_d)}var callbacks={earlyStopping};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var DataType,SaverDef,__assign$1=function(){return(__assign$1=Object.assign||function(_d){for(var rp,np=1,ap=arguments.length;np<ap;np++)for(var sp in rp=arguments[np])Object.prototype.hasOwnProperty.call(rp,sp)&&(_d[sp]=rp[sp]);return _d}).apply(this,arguments)};function __awaiter$7(_d,rp,np,ap){return new(np||(np=Promise))(function(sp,lp){function up(fp){try{dp(ap.next(fp))}catch(pp){lp(pp)}}function cp(fp){try{dp(ap.throw(fp))}catch(pp){lp(pp)}}function dp(fp){fp.done?sp(fp.value):new np(function(pp){pp(fp.value)}).then(up,cp)}dp((ap=ap.apply(_d,rp||[])).next())})}function __generator$7(_d,rp){var np,ap,sp,lp,up={label:0,sent:function(){if(1&sp[0])throw sp[1];return sp[1]},trys:[],ops:[]};return lp={next:cp(0),throw:cp(1),return:cp(2)},typeof Symbol=="function"&&(lp[Symbol.iterator]=function(){return this}),lp;function cp(dp){return function(fp){return function(pp){if(np)throw new TypeError("Generator is already executing.");for(;up;)try{if(np=1,ap&&(sp=2&pp[0]?ap.return:pp[0]?ap.throw||((sp=ap.return)&&sp.call(ap),0):ap.next)&&!(sp=sp.call(ap,pp[1])).done)return sp;switch(ap=0,sp&&(pp=[2&pp[0],sp.value]),pp[0]){case 0:case 1:sp=pp;break;case 4:return up.label++,{value:pp[1],done:!1};case 5:up.label++,ap=pp[1],pp=[0];continue;case 7:pp=up.ops.pop(),up.trys.pop();continue;default:if(!(sp=(sp=up.trys).length>0&&sp[sp.length-1])&&(pp[0]===6||pp[0]===2)){up=0;continue}if(pp[0]===3&&(!sp||pp[1]>sp[0]&&pp[1]<sp[3])){up.label=pp[1];break}if(pp[0]===6&&up.label<sp[1]){up.label=sp[1],sp=pp;break}if(sp&&up.label<sp[2]){up.label=sp[2],up.ops.push(pp);break}sp[2]&&up.ops.pop(),up.trys.pop();continue}pp=rp.call(_d,up)}catch(hp){pp=[6,hp],ap=0}finally{np=sp=0}if(5&pp[0])throw pp[1];return{value:pp[0]?pp[1]:void 0,done:!0}}([dp,fp])}}}(function(_d){_d[_d.DT_INVALID=0]="DT_INVALID",_d[_d.DT_FLOAT=1]="DT_FLOAT",_d[_d.DT_DOUBLE=2]="DT_DOUBLE",_d[_d.DT_INT32=3]="DT_INT32",_d[_d.DT_UINT8=4]="DT_UINT8",_d[_d.DT_INT16=5]="DT_INT16",_d[_d.DT_INT8=6]="DT_INT8",_d[_d.DT_STRING=7]="DT_STRING",_d[_d.DT_COMPLEX64=8]="DT_COMPLEX64",_d[_d.DT_INT64=9]="DT_INT64",_d[_d.DT_BOOL=10]="DT_BOOL",_d[_d.DT_QINT8=11]="DT_QINT8",_d[_d.DT_QUINT8=12]="DT_QUINT8",_d[_d.DT_QINT32=13]="DT_QINT32",_d[_d.DT_BFLOAT16=14]="DT_BFLOAT16",_d[_d.DT_FLOAT_REF=101]="DT_FLOAT_REF",_d[_d.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",_d[_d.DT_INT32_REF=103]="DT_INT32_REF",_d[_d.DT_UINT8_REF=104]="DT_UINT8_REF",_d[_d.DT_INT16_REF=105]="DT_INT16_REF",_d[_d.DT_INT8_REF=106]="DT_INT8_REF",_d[_d.DT_STRING_REF=107]="DT_STRING_REF",_d[_d.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",_d[_d.DT_INT64_REF=109]="DT_INT64_REF",_d[_d.DT_BOOL_REF=110]="DT_BOOL_REF",_d[_d.DT_QINT8_REF=111]="DT_QINT8_REF",_d[_d.DT_QUINT8_REF=112]="DT_QUINT8_REF",_d[_d.DT_QINT32_REF=113]="DT_QINT32_REF",_d[_d.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF"})(DataType||(DataType={})),function(_d){(function(rp){rp[rp.LEGACY=0]="LEGACY",rp[rp.V1=1]="V1",rp[rp.V2=2]="V2"})(_d.CheckpointFormatVersion||(_d.CheckpointFormatVersion={}))}(SaverDef||(SaverDef={}));var CUSTOM_OPS={};function registerOp(_d,rp){var np={tfOpName:_d,category:"custom",inputs:[],attrs:[],customExecutor:rp};CUSTOM_OPS[_d]=np}function getRegisteredOp(_d){return CUSTOM_OPS[_d]}function deregisterOp(_d){delete CUSTOM_OPS[_d]}function getParamValue(_d,rp,np,ap){var sp=rp.inputParams[_d];if(sp&&sp.inputIndexStart!==void 0){var lp=sp.inputIndexStart,up=sp.inputIndexEnd===0?void 0:sp.inputIndexEnd===void 0?lp+1:sp.inputIndexEnd;if(sp.type==="tensor")return getTensor(rp.inputNames[sp.inputIndexStart],np,ap);if(sp.type==="tensors")return rp.inputNames.slice(lp,up).map(function(fp){return getTensor(fp,np,ap)});var cp=Array.prototype.slice.call(getTensor(rp.inputNames.slice(lp)[0],np,ap).dataSync());return sp.type==="number"?cp[0]:cp}var dp=rp.attrParams[_d];return dp&&dp.value}function getTensor(_d,rp,np){var ap=parseNodeName(_d),sp=ap[0],lp=ap[1],up=np.currentContextIds.find(function(cp){return!!rp[getNodeNameWithContextId(sp,cp)]});return up!==void 0?rp[getNodeNameWithContextId(sp,up)][lp]:void 0}function getTensorsForCurrentContenxt(_d,rp,np){return rp[getNodeNameWithContextId(_d,np.currentContextId)]}function getNodeNameAndIndex(_d,rp){var np=parseNodeName(_d),ap=np[0],sp=np[1];return[getNodeNameWithContextId(ap,rp&&rp.currentContextId),sp]}function getNodeNameWithContextId(_d,rp){return rp?_d+"-"+rp:_d}function parseNodeName(_d){var rp=_d.lastIndexOf(":");return rp===-1?[_d,0]:[_d.substring(0,rp),Number(_d.substring(rp+1))]}function split$1(_d,rp){for(var np=[],ap=0;ap<_d.length;ap+=rp)np.push(_d.slice(ap,ap+rp));return np}var json=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],arithmetic=Object.freeze({json}),json$1=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"clip_value_min",name:"clipValueMin",type:"number"},{tfName:"clip_value_max",name:"clipValueMax",type:"number"}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"clipValueMin",name:"clipValueMin",type:"number",defaultValue:0},{tfName:"clipValueMax",name:"clipValueMax",type:"number",defaultValue:6}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Prod",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axes",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],basicMath=Object.freeze({json:json$1}),json$2=[{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"}]}],control=Object.freeze({json:json$2}),json$3=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]}],convolution=Object.freeze({json:json$3}),json$4=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],creation=Object.freeze({json:json$4}),json$5=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],dynamic=Object.freeze({json:json$5}),json$6=[{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]}],evaluation=Object.freeze({json:json$6}),json$7=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],graph$3=Object.freeze({json:json$7}),json$8=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]}],image$1=Object.freeze({json:json$8}),json$9=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],logical=Object.freeze({json:json$9}),json$10=[{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],matrices=Object.freeze({json:json$10}),json$11=[{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"SparseToDense",category:"normalization",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!0,notSupported:!0}]}],normalization=Object.freeze({json:json$11}),json$12=[{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]}],reduction=Object.freeze({json:json$12}),json$13=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool",notSupported:!0}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]}],sliceJoin=Object.freeze({json:json$13}),json$14=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],spectral=Object.freeze({json:json$14}),json$15=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]}],transformation=Object.freeze({json:json$15}),OperationMapper=function(){function _d(){var rp=[arithmetic,basicMath,control,convolution,creation,dynamic,evaluation,logical,image$1,graph$3,matrices,normalization,reduction,sliceJoin,spectral,transformation],np=[].concat.apply([],rp.map(function(ap){return ap.json}));this.opMappers=np.reduce(function(ap,sp){return ap[sp.tfOpName]=sp,ap},{})}return Object.defineProperty(_d,"Instance",{get:function(){return this._instance||(this._instance=new this)},enumerable:!0,configurable:!0}),_d.prototype.transformGraph=function(rp){var np=this,ap=[],sp=[],lp=rp.node.reduce(function(fp,pp){return fp[pp.name]=np.mapNode(pp),pp.op==="Placeholder"&&ap.push(fp[pp.name]),pp.op==="Const"&&sp.push(fp[pp.name]),fp},{}),up=[],cp=[],dp=Object.keys(lp);return dp.forEach(function(fp){var pp=lp[fp];pp.inputNames.forEach(function(hp){var mp=getNodeNameAndIndex(hp)[0];pp.inputs.push(lp[mp]),lp[mp].children.push(pp)}),pp.inputs.length===0&&up.push(pp)}),dp.forEach(function(fp){var pp=lp[fp];pp.children.length===0&&cp.push(pp)}),{nodes:lp,inputs:up,outputs:cp,weights:sp,placeholders:ap}},_d.prototype.mapNode=function(rp){var np=getRegisteredOp(rp.op)||this.opMappers[rp.op]||{};rp.attr==null&&(rp.attr={});var ap={name:rp.name,op:rp.op,category:np.category,inputNames:(rp.input||[]).map(function(sp){return sp.startsWith("^")?sp.substr(1):sp}),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:rp.attr};return np.inputs!=null&&(ap.inputParams=np.inputs.reduce(function(sp,lp){return sp[lp.name]={type:lp.type,inputIndexStart:lp.start,inputIndexEnd:lp.end},sp},{})),np.attrs!=null&&(ap.attrParams=np.attrs.reduce(function(sp,lp){var up=lp.type,cp=void 0;switch(lp.type){case"string":(cp=getStringParam(rp.attr,lp.tfName,lp.defaultValue))===void 0&&lp.tfDeprecatedName&&(cp=getStringParam(rp.attr,lp.tfDeprecatedName,lp.defaultValue));break;case"string[]":(cp=getStringArrayParam(rp.attr,lp.tfName,lp.defaultValue))===void 0&&lp.tfDeprecatedName&&(cp=getStringArrayParam(rp.attr,lp.tfDeprecatedName,lp.defaultValue));break;case"number":(cp=getNumberParam(rp.attr,lp.tfName,lp.defaultValue||0))===void 0&&lp.tfDeprecatedName&&(cp=getNumberParam(rp.attr,lp.tfDeprecatedName,lp.defaultValue));break;case"number[]":(cp=getNumericArrayParam(rp.attr,lp.tfName,lp.defaultValue))===void 0&&lp.tfDeprecatedName&&(cp=getNumericArrayParam(rp.attr,lp.tfDeprecatedName,lp.defaultValue));break;case"bool":(cp=getBoolParam(rp.attr,lp.tfName,lp.defaultValue))===void 0&&lp.tfDeprecatedName&&(cp=getBoolParam(rp.attr,lp.tfDeprecatedName,lp.defaultValue));break;case"bool[]":(cp=getBoolArrayParam(rp.attr,lp.tfName,lp.defaultValue))===void 0&&lp.tfDeprecatedName&&(cp=getBoolArrayParam(rp.attr,lp.tfDeprecatedName,lp.defaultValue));break;case"shape":(cp=getTensorShapeParam(rp.attr,lp.tfName,lp.defaultValue))===void 0&&lp.tfDeprecatedName&&(cp=getTensorShapeParam(rp.attr,lp.tfDeprecatedName,lp.defaultValue));break;case"shape[]":(cp=getTensorShapeArrayParam(rp.attr,lp.tfName,lp.defaultValue))===void 0&&lp.tfDeprecatedName&&(cp=getTensorShapeArrayParam(rp.attr,lp.tfDeprecatedName,lp.defaultValue));break;case"dtype":(cp=getDtypeParam(rp.attr,lp.tfName,lp.defaultValue))===void 0&&lp.tfDeprecatedName&&(cp=getDtypeParam(rp.attr,lp.tfDeprecatedName,lp.defaultValue));break;case"dtype[]":(cp=getDtypeArrayParam(rp.attr,lp.tfName,lp.defaultValue))===void 0&&lp.tfDeprecatedName&&(cp=getDtypeArrayParam(rp.attr,lp.tfDeprecatedName,lp.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error("Unsupported param type: "+lp.type+" for op: "+rp.op)}return sp[lp.name]={value:cp,type:up},sp},{})),ap},_d}();function decodeBase64(_d){var rp=a$1().global;if(rp.atob!==void 0)return rp.atob(_d);if(typeof Buffer<"u")return new Buffer(_d,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function parseStringParam(_d,rp){var np=Array.isArray(_d)?String.fromCharCode.apply(null,_d):decodeBase64(_d);return rp?np:np.toLowerCase()}function getStringParam(_d,rp,np,ap){ap===void 0&&(ap=!1);var sp=_d[rp];return sp!=null?parseStringParam(sp.s,ap):np}function getBoolParam(_d,rp,np){var ap=_d[rp];return ap?ap.b:np}function getNumberParam(_d,rp,np){var ap=_d[rp]||{},sp=ap.i!=null?ap.i:ap.f!=null?ap.f:np;return typeof sp=="number"?sp:parseInt(sp,10)}function parseDtypeParam(_d){switch(typeof _d=="string"&&(_d=DataType[_d]),_d){case DataType.DT_FLOAT:return"float32";case DataType.DT_INT32:case DataType.DT_INT64:return"int32";case DataType.DT_BOOL:return"bool";case DataType.DT_DOUBLE:return"float32";case DataType.DT_STRING:return"string";default:return null}}function getDtypeParam(_d,rp,np){var ap=_d[rp];return ap&&ap.type?parseDtypeParam(ap.type):np}function getDtypeArrayParam(_d,rp,np){var ap=_d[rp];return ap&&ap.list&&ap.list.type?ap.list.type.map(function(sp){return parseDtypeParam(sp)}):np}function parseTensorShapeParam(_d){if(!_d.unknownRank)return _d.dim!=null?_d.dim.map(function(rp){return typeof rp.size=="number"?rp.size:parseInt(rp.size,10)}):[]}function getTensorShapeParam(_d,rp,np){var ap=_d[rp];return ap&&ap.shape?parseTensorShapeParam(ap.shape):np}function getNumericArrayParam(_d,rp,np){var ap=_d[rp];return ap?((ap.list.f&&ap.list.f.length?ap.list.f:ap.list.i)||[]).map(function(sp){return typeof sp=="number"?sp:parseInt(sp,10)}):np}function getStringArrayParam(_d,rp,np,ap){ap===void 0&&(ap=!1);var sp=_d[rp];return sp&&sp.list&&sp.list.s?sp.list.s.map(function(lp){return parseStringParam(lp,ap)}):np}function getTensorShapeArrayParam(_d,rp,np){var ap=_d[rp];return ap&&ap.list&&ap.list.shape?ap.list.shape.map(function(sp){return parseTensorShapeParam(sp)}):np}function getBoolArrayParam(_d,rp,np){var ap=_d[rp];return ap&&ap.list&&ap.list.b?ap.list.b:np}var NodeValueImpl=function(){function _d(rp,np,ap){var sp=this;this.node=rp,this.tensorMap=np,this.context=ap,this.inputs=[],this.attrs={},this.inputs=rp.inputNames.map(function(lp){return sp.getInput(lp)}),rp.rawAttrs!=null&&(this.attrs=Object.keys(rp.rawAttrs).reduce(function(lp,up){return lp[up]=sp.getAttr(up),lp},{}))}return _d.prototype.getInput=function(rp){return getTensor(rp,this.tensorMap,this.context)},_d.prototype.getAttr=function(rp,np){var ap=this.node.rawAttrs[rp];if(ap.tensor!=null)return getTensor(rp,this.tensorMap,this.context);if(ap.i!=null||ap.f!=null)return getNumberParam(this.node.rawAttrs,rp,np);if(ap.s!=null)return getStringParam(this.node.rawAttrs,rp,np);if(ap.b!=null)return getBoolParam(this.node.rawAttrs,rp,np);if(ap.shape!=null)return getTensorShapeParam(this.node.rawAttrs,rp,np);if(ap.type!=null)return getDtypeParam(this.node.rawAttrs,rp,np);if(ap.list!=null){if(ap.list.i!=null||ap.list.f!=null)return getNumericArrayParam(this.node.rawAttrs,rp,np);if(ap.list.s!=null)return getStringArrayParam(this.node.rawAttrs,rp,np);if(ap.list.shape!=null)return getTensorShapeArrayParam(this.node.rawAttrs,rp,np);if(ap.list.b!=null)return getBoolArrayParam(this.node.rawAttrs,rp,np);if(ap.list.type!=null)return getDtypeArrayParam(this.node.rawAttrs,rp,np)}return np},_d}(),executeOp=function(_d,rp,np){switch(_d.op){case"BiasAdd":case"AddV2":case"Add":return[Vs(getParamValue("a",_d,rp,np),getParamValue("b",_d,rp,np))];case"AddN":return[zs(getParamValue("tensors",_d,rp,np))];case"FloorMod":case"Mod":return[Js(getParamValue("a",_d,rp,np),getParamValue("b",_d,rp,np))];case"Mul":return[tc(getParamValue("a",_d,rp,np),getParamValue("b",_d,rp,np))];case"RealDiv":case"Div":return[qs(getParamValue("a",_d,rp,np),getParamValue("b",_d,rp,np))];case"FloorDiv":return[js(getParamValue("a",_d,rp,np),getParamValue("b",_d,rp,np))];case"Sub":return[ic(getParamValue("a",_d,rp,np),getParamValue("b",_d,rp,np))];case"Minimum":return[Ys(getParamValue("a",_d,rp,np),getParamValue("b",_d,rp,np))];case"Maximum":return[Xs(getParamValue("a",_d,rp,np),getParamValue("b",_d,rp,np))];case"Pow":return[nc(getParamValue("a",_d,rp,np),getParamValue("b",_d,rp,np))];case"SquaredDifference":return[oc(getParamValue("a",_d,rp,np),getParamValue("b",_d,rp,np))];default:throw TypeError("Node type "+_d.op+" is not implemented")}},executeOp$1=function(_d,rp,np){switch(_d.op){case"Abs":case"ComplexAbs":return[Vu(getParamValue("x",_d,rp,np))];case"Acos":return[zu(getParamValue("x",_d,rp,np))];case"Acosh":return[Gu(getParamValue("x",_d,rp,np))];case"Asin":return[Hu(getParamValue("x",_d,rp,np))];case"Asinh":return[qu(getParamValue("x",_d,rp,np))];case"Atan":return[Ku(getParamValue("x",_d,rp,np))];case"Atan2":return[Hs(getParamValue("x",_d,rp,np),getParamValue("y",_d,rp,np))];case"Atanh":return[ju(getParamValue("x",_d,rp,np))];case"Ceil":return[Xu(getParamValue("x",_d,rp,np))];case"Complex":return[En(getParamValue("real",_d,rp,np),getParamValue("imag",_d,rp,np))];case"Cos":return[Yu(getParamValue("x",_d,rp,np))];case"Cosh":return[Qu(getParamValue("x",_d,rp,np))];case"Elu":return[gl(getParamValue("x",_d,rp,np))];case"Erf":return[Ju(getParamValue("x",_d,rp,np))];case"Exp":return[Zu(getParamValue("x",_d,rp,np))];case"Expm1":return[ts(getParamValue("x",_d,rp,np))];case"Floor":return[es(getParamValue("x",_d,rp,np))];case"Log":return[ns(getParamValue("x",_d,rp,np))];case"Log1p":return[rs(getParamValue("x",_d,rp,np))];case"Imag":return[In(getParamValue("x",_d,rp,np))];case"Neg":return[as(getParamValue("x",_d,rp,np))];case"Reciprocal":return[is(getParamValue("x",_d,rp,np))];case"Real":return[Rn(getParamValue("x",_d,rp,np))];case"Relu":return[bl(getParamValue("x",_d,rp,np))];case"Round":return[us(getParamValue("x",_d,rp,np))];case"Selu":return[Cl(getParamValue("x",_d,rp,np))];case"Sigmoid":return[cs(getParamValue("x",_d,rp,np))];case"Sin":return[ds(getParamValue("x",_d,rp,np))];case"Sign":return[ls(getParamValue("x",_d,rp,np))];case"Sinh":return[vs(getParamValue("x",_d,rp,np))];case"Softplus":return[ms(getParamValue("x",_d,rp,np))];case"Sqrt":return[gs(getParamValue("x",_d,rp,np))];case"Square":return[Uu(getParamValue("x",_d,rp,np))];case"Tanh":return[bs(getParamValue("x",_d,rp,np))];case"Tan":return[xs(getParamValue("x",_d,rp,np))];case"Relu6":case"ClipByValue":return[$u(getParamValue("x",_d,rp,np),getParamValue("clipValueMin",_d,rp,np),getParamValue("clipValueMax",_d,rp,np))];case"Rsqrt":return[ss(getTensor(_d.inputNames[0],rp,np))];case"Prod":return[ml(getParamValue("x",_d,rp,np),getParamValue("axes",_d,rp,np))];case"LeakyRelu":return[yl(getParamValue("x",_d,rp,np),getParamValue("alpha",_d,rp,np))];default:throw TypeError("Node type "+_d.op+" is not implemented")}},TensorArray=function(){function _d(rp,np,ap,sp,lp,up,cp){this.name=rp,this.dtype=np,this.maxSize=ap,this.elementShape=sp,this.identicalElementShapes=lp,this.dynamicSize=up,this.clearAfterRead=cp,this.tensors=[],this.closed_=!1,this.id=_d.nextId++}return Object.defineProperty(_d.prototype,"closed",{get:function(){return this.closed_},enumerable:!0,configurable:!0}),_d.prototype.clearAndClose=function(){this.tensors.forEach(function(rp){return rp.tensor.dispose()}),this.tensors=[],this.closed_=!0},_d.prototype.size=function(){return this.tensors.length},_d.prototype.read=function(rp){if(this.closed_)throw new Error("TensorArray "+this.name+" has already been closed.");if(rp<0||rp>=this.tensors.length)throw new Error("Tried to read from index "+rp+", but array size is: "+this.tensors.length);var np=this.tensors[rp];if(np.cleared)throw new Error("TensorArray "+this.name+": Could not read index "+rp+" twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).");return this.clearAfterRead&&(np.cleared=!0),np.read=!0,np.tensor},_d.prototype.readMany=function(rp){var np=this;return rp.map(function(ap){return np.read(ap)})},_d.prototype.write=function(rp,np){if(this.closed_)throw new Error("TensorArray "+this.name+" has already been closed.");if(rp<0||!this.dynamicSize&&rp>=this.maxSize)throw new Error("Tried to write to index "+rp+", but array is not resizeable and size is: "+this.maxSize);var ap=this.tensors[rp]||{};if(np.dtype!==this.dtype)throw new Error("TensorArray "+this.name+": Could not write to TensorArray index "+rp+`,
          because the value dtype is `+np.dtype+", but TensorArray dtype is "+this.dtype+".");if(this.size()!==0||this.elementShape!=null&&this.elementShape.length!==0||(this.elementShape=np.shape),this.assertShapesMatchAllowUndefinedSize(this.elementShape,np.shape,"TensorArray "+this.name+": Could not write to TensorArray index "+rp+"."),ap&&ap.read)throw new Error("TensorArray "+this.name+": Could not write to TensorArray index "+rp+", because it has already been read.");if(ap&&ap.written)throw new Error("TensorArray "+this.name+": Could not write to TensorArray index "+rp+", because it has already been written.");ap.tensor=np,ap.written=!0,this.tensors[rp]=ap},_d.prototype.writeMany=function(rp,np){var ap=this;if(rp.length!==np.length)throw new Error("TensorArray "+this.name+": could not write multiple tensors,because the index size: "+rp.length+" is not the same as tensors size: "+np.length+".");rp.forEach(function(sp,lp){return ap.write(sp,np[lp])})},_d.prototype.gather=function(rp,np){if(np&&np!==this.dtype)throw new Error("TensorArray dtype is "+this.dtype+" but gather requested dtype "+np);if(!rp){rp=[];for(var ap=0;ap<this.size();ap++)rp.push(ap)}if(rp.length===0)return kn([],[0].concat(this.elementShape));var sp=this.readMany(rp);return this.assertShapesMatchAllowUndefinedSize(this.elementShape,sp[0].shape,"TensorArray shape mismatch: "),Tr(sp,0)},_d.prototype.concat=function(rp){if(rp&&rp!==this.dtype)throw new Error("TensorArray dtype is "+this.dtype+" but concat requested dtype "+rp);if(this.size()===0)return kn([],[0].concat(this.elementShape));for(var np=[],ap=0;ap<this.size();ap++)np.push(ap);var sp=this.readMany(np);return this.assertShapesMatchAllowUndefinedSize(this.elementShape,sp[0].shape,"TensorArray shape mismatch: tensor array shape ("+this.elementShape+") vs first tensor shape ("+sp[0].shape+")"),Gn(sp,0)},_d.prototype.scatter=function(rp,np){if(np.dtype!==this.dtype)throw new Error("TensorArray dtype is "+this.dtype+" but tensor has dtype "+np.dtype);if(rp.length!==np.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: "+rp.length+" vs. "+np.shape[0]);var ap=Math.max.apply(Math,rp);if(!this.dynamicSize&&ap>=this.maxSize)throw new Error("Max index must be < array size ("+ap+"  vs. "+this.maxSize+")");this.writeMany(rp,Or(np,0))},_d.prototype.split=function(rp,np){var ap=this;if(np.dtype!==this.dtype)throw new Error("TensorArray dtype is "+this.dtype+" but tensor has dtype "+np.dtype);var sp=0,lp=rp.map(function(pp){return sp+=pp});if(sp!==np.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        `+sp+", and tensor's shape is: "+np.shape);if(!this.dynamicSize&&rp.length!==this.maxSize)throw new Error("TensorArray's size is not equal to the size of lengths ("+this.maxSize+" vs. "+rp.length+"), and the TensorArray is not marked as dynamically resizeable");var up=sp===0?0:np.size/sp,cp=[];je(function(){np=np.reshape([1,sp,up]);for(var pp=0;pp<rp.length;++pp){var hp=[0,pp===0?0:lp[pp-1],0],mp=[1,rp[pp],up];cp[pp]=tl(np,hp,mp).reshape(ap.elementShape)}return cp});for(var dp=[],fp=0;fp<rp.length;fp++)dp[fp]=fp;this.writeMany(dp,cp)},_d.prototype.assertShapesMatchAllowUndefinedSize=function(rp,np,ap){ap===void 0&&(ap=""),tt.assert(this.shapesEqualAllowUndefinedSize(rp,np),function(){return ap+" Shapes "+rp+" and "+np+" must match"})},_d.prototype.shapesEqualAllowUndefinedSize=function(rp,np){if(rp.length!==np.length)return!1;for(var ap=0;ap<rp.length;ap++)if(rp[ap]!==-1&&np[ap]!==-1&&rp[ap]!==np[ap])return!1;return!0},_d.nextId=0,_d}();function executeOp$2(_d,rp,np){return __awaiter$7(this,void 0,void 0,function(){var ap,sp,lp,up,cp,dp,fp,pp,hp,mp,gp,vp,xp,Sp,yp,bp,Ep,wp,_p,Rp,$p,Cp,Ap,Op,Lp,Mp,kp,Dp,Fp,Ip,Pp,Tp,Np,jp,Vp;return __generator$7(this,function(zp){switch(zp.label){case 0:switch(_d.op){case"LoopCond":return[3,1];case"Switch":return[3,2];case"Merge":return[3,4];case"Enter":return[3,5];case"Exit":return[3,6];case"NextIteration":return[3,7];case"TensorArrayV3":return[3,8];case"TensorArrayWriteV3":return[3,9];case"TensorArrayReadV3":return[3,10];case"TensorArrayGatherV3":return[3,11];case"TensorArrayScatterV3":return[3,12];case"TensorArrayConcatV3":return[3,13];case"TensorArraySplitV3":return[3,14];case"TensorArraySizeV3":return[3,15];case"TensorArrayCloseV3":return[3,16]}return[3,17];case 1:return[2,[getParamValue("pred",_d,rp,np).clone()]];case 2:return ap=getParamValue("pred",_d,rp,np),sp=getParamValue("data",_d,rp,np),[4,ap.data()];case 3:return[2,zp.sent()[0]?[void 0,sp.clone()]:[sp.clone(),void 0]];case 4:return[2,(lp=_d.inputNames.find(function(Wp){return getTensor(Wp,rp,np)!==void 0}))?[getTensor(lp,rp,np).clone()]:void 0];case 5:return up=getParamValue("frameName",_d,rp,np),cp=getParamValue("tensor",_d,rp,np),np.enterFrame(up),[2,[cp.clone()]];case 6:return dp=getParamValue("tensor",_d,rp,np),np.exitFrame(),[2,[dp.clone()]];case 7:return fp=getParamValue("tensor",_d,rp,np),np.nextIteration(),[2,[fp.clone()]];case 8:return pp=getParamValue("size",_d,rp,np),hp=getParamValue("dtype",_d,rp,np),mp=getParamValue("elementShape",_d,rp,np),gp=getParamValue("dynamicSize",_d,rp,np),vp=getParamValue("clearAfterRead",_d,rp,np),xp=getParamValue("identicalElementShapes",_d,rp,np),Sp=getParamValue("name",_d,rp,np),yp=new TensorArray(Sp,hp,pp,mp,xp,gp,vp),np.addTensorArray(yp),[2,[An(yp.id),An(1)]];case 9:return bp=getParamValue("tensorArrayId",_d,rp,np),Ep=getParamValue("index",_d,rp,np),wp=getParamValue("tensor",_d,rp,np),np.getTensorArray(bp).write(Ep,wp),[2,[An(1)]];case 10:return _p=getParamValue("tensorArrayId",_d,rp,np),Rp=getParamValue("index",_d,rp,np),[2,[np.getTensorArray(_p).read(Rp)]];case 11:return $p=getParamValue("tensorArrayId",_d,rp,np),Cp=getParamValue("indices",_d,rp,np),Ap=getParamValue("dtype",_d,rp,np),[2,[np.getTensorArray($p).gather(Cp,Ap)]];case 12:return Op=getParamValue("tensorArrayId",_d,rp,np),Lp=getParamValue("indices",_d,rp,np),Mp=getParamValue("tensor",_d,rp,np),np.getTensorArray(Op).scatter(Lp,Mp),[2,[An(1)]];case 13:return kp=getParamValue("tensorArrayId",_d,rp,np),Dp=np.getTensorArray(kp),Fp=getParamValue("dtype",_d,rp,np),[2,[Dp.concat(Fp)]];case 14:return Ip=getParamValue("tensorArrayId",_d,rp,np),Pp=getParamValue("tensor",_d,rp,np),Tp=getParamValue("lengths",_d,rp,np),np.getTensorArray(Ip).split(Tp,Pp),[2,[An(1)]];case 15:return Np=getParamValue("tensorArrayId",_d,rp,np),jp=np.getTensorArray(Np),[2,[An(jp.size(),"int32")]];case 16:return Vp=getParamValue("tensorArrayId",_d,rp,np),np.getTensorArray(Vp).clearAndClose(),[2,[]];case 17:throw TypeError("Node type "+_d.op+" is not implemented")}})})}var executeOp$3=function(_d,rp,np){var ap,sp;switch(_d.op){case"Conv1D":var lp=getParamValue("stride",_d,rp,np),up=getParamValue("pad",_d,rp,np),cp=getParamValue("dataFormat",_d,rp,np).toUpperCase(),dp=getParamValue("dilation",_d,rp,np);return[Ac(getParamValue("x",_d,rp,np),getParamValue("filter",_d,rp,np),lp,up,cp,dp)];case"Conv2D":lp=getParamValue("strides",_d,rp,np),up=getParamValue("pad",_d,rp,np),cp=getParamValue("dataFormat",_d,rp,np).toUpperCase();var fp=getParamValue("dilations",_d,rp,np);return[Dc(getParamValue("x",_d,rp,np),getParamValue("filter",_d,rp,np),[lp[1],lp[2]],up,cp,[fp[1],fp[2]])];case"_FusedConv2D":var pp=(ap=getParamValue("fusedOps",_d,rp,np))[0],hp=ap[1],mp=pp==="biasadd",gp=hp==="prelu",vp=pp==="fusedbatchnorm",xp=getParamValue("numArgs",_d,rp,np);if(mp){if(gp&&xp!==2)throw new Error("Fused Conv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!gp&&xp!==1)throw new Error("Fused Conv2d with BiasAdd must have one extra argument: bias.")}if(vp)throw new Error("Fused Conv2d with FusedBatchNorm is not supported.");lp=getParamValue("strides",_d,rp,np),up=getParamValue("pad",_d,rp,np),cp=getParamValue("dataFormat",_d,rp,np).toUpperCase(),fp=getParamValue("dilations",_d,rp,np);var Sp=(sp=getParamValue("args",_d,rp,np))[0],yp=sp[1];return[Eh.conv2d({x:getParamValue("x",_d,rp,np),filter:getParamValue("filter",_d,rp,np),strides:[lp[1],lp[2]],pad:up,dataFormat:cp,dilations:[fp[1],fp[2]],bias:Sp,activation:hp,preluActivationWeights:yp})];case"Conv2DBackpropInput":case"Conv2dTranspose":var bp=getParamValue("outputShape",_d,rp,np);return lp=getParamValue("strides",_d,rp,np),up=getParamValue("pad",_d,rp,np),[Pc(getParamValue("x",_d,rp,np),getParamValue("filter",_d,rp,np),bp,[lp[1],lp[2]],up)];case"DepthwiseConv2dNative":case"DepthwiseConv2d":return lp=getParamValue("strides",_d,rp,np),up=getParamValue("pad",_d,rp,np),fp=getParamValue("dilations",_d,rp,np),cp=getParamValue("dataFormat",_d,rp,np).toUpperCase(),[Oc(getParamValue("input",_d,rp,np),getParamValue("filter",_d,rp,np),[lp[1],lp[2]],up,cp,[fp[1],fp[2]])];case"Conv3D":return lp=getParamValue("strides",_d,rp,np),up=getParamValue("pad",_d,rp,np),cp=getParamValue("dataFormat",_d,rp,np).toUpperCase(),fp=getParamValue("dilations",_d,rp,np),[Tc(getParamValue("x",_d,rp,np),getParamValue("filter",_d,rp,np),[lp[1],lp[2],lp[3]],up,cp,[fp[1],fp[2],fp[3]])];case"AvgPool":lp=getParamValue("strides",_d,rp,np),up=getParamValue("pad",_d,rp,np);var Ep=getParamValue("kernelSize",_d,rp,np);return[Yc(getParamValue("x",_d,rp,np),[Ep[1],Ep[2]],[lp[1],lp[2]],up)];case"MaxPool":return lp=getParamValue("strides",_d,rp,np),up=getParamValue("pad",_d,rp,np),Ep=getParamValue("kernelSize",_d,rp,np),[$c(getParamValue("x",_d,rp,np),[Ep[1],Ep[2]],[lp[1],lp[2]],up)];case"AvgPool3D":return lp=getParamValue("strides",_d,rp,np),up=getParamValue("pad",_d,rp,np),Ep=getParamValue("kernelSize",_d,rp,np),[Zc(getParamValue("x",_d,rp,np),[Ep[1],Ep[2],Ep[3]],[lp[1],lp[2],lp[3]],up)];case"MaxPool3D":return lp=getParamValue("strides",_d,rp,np),up=getParamValue("pad",_d,rp,np),Ep=getParamValue("kernelSize",_d,rp,np),[Jc(getParamValue("x",_d,rp,np),[Ep[1],Ep[2],Ep[3]],[lp[1],lp[2],lp[3]],up)];default:throw TypeError("Node type "+_d.op+" is not implemented")}},executeOp$4=function(_d,rp,np){switch(_d.op){case"Fill":var ap=getParamValue("shape",_d,rp,np),sp=getParamValue("dtype",_d,rp,np),lp=getParamValue("value",_d,rp,np);return[Ln(ap,lp,sp)];case"LinSpace":var up=getParamValue("start",_d,rp,np),cp=getParamValue("stop",_d,rp,np),dp=getParamValue("num",_d,rp,np);return[Wn(up,cp,dp)];case"Multinomial":var fp=getParamValue("logits",_d,rp,np),pp=getParamValue("numSamples",_d,rp,np),hp=getParamValue("seed",_d,rp,np);return[mr(fp,pp,hp)];case"OneHot":var mp=getParamValue("indices",_d,rp,np),gp=getParamValue("depth",_d,rp,np),vp=getParamValue("onValue",_d,rp,np),xp=getParamValue("offValue",_d,rp,np);return[gr(mp,gp,vp,xp)];case"Ones":return[Bn(getParamValue("shape",_d,rp,np),getParamValue("dtype",_d,rp,np))];case"OnesLike":return[Vn(getParamValue("x",_d,rp,np))];case"RandomUniform":return[kr(getParamValue("shape",_d,rp,np),getParamValue("minval",_d,rp,np),getParamValue("maxval",_d,rp,np),getParamValue("dtype",_d,rp,np))];case"Range":up=getParamValue("start",_d,rp,np);var Sp=getParamValue("stop",_d,rp,np),yp=getParamValue("step",_d,rp,np);return[Un(up,Sp,yp,getParamValue("dtype",_d,rp,np))];case"TruncatedNormal":ap=getParamValue("shape",_d,rp,np);var bp=getParamValue("mean",_d,rp,np),Ep=getParamValue("stdDev",_d,rp,np);return hp=getParamValue("seed",_d,rp,np),[Fr(ap,bp,Ep,getParamValue("dtype",_d,rp,np),hp)];case"Zeros":return[Pn(getParamValue("shape",_d,rp,np),getParamValue("dtype",_d,rp,np))];case"ZerosLike":return[zn(getParamValue("x",_d,rp,np))];default:throw TypeError("Node type "+_d.op+" is not implemented")}};function executeOp$5(_d,rp,np){return __awaiter$7(this,void 0,void 0,function(){var ap,sp,lp,up,cp;return __generator$7(this,function(dp){switch(dp.label){case 0:switch(_d.op){case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":return[3,1];case"Where":return[3,3];case"ListDiff":return[3,5]}return[3,6];case 1:return ap=getParamValue("boxes",_d,rp,np),sp=getParamValue("scores",_d,rp,np),lp=getParamValue("maxOutputSize",_d,rp,np),up=getParamValue("iouThreshold",_d,rp,np),cp=getParamValue("scoreThreshold",_d,rp,np),[4,vh.nonMaxSuppressionAsync(ap,sp,lp,up,cp)];case 2:return[2,[dp.sent()]];case 3:return[4,Us(getParamValue("condition",_d,rp,np).asType("bool"))];case 4:return[2,[dp.sent()]];case 5:return[2,_r(getParamValue("x",_d,rp,np),getParamValue("y",_d,rp,np))];case 6:throw TypeError("Node type "+_d.op+" is not implemented")}})})}var executeOp$6=function(_d,rp,np){switch(_d.op){case"TopKV2":var ap=getParamValue("x",_d,rp,np),sp=getParamValue("k",_d,rp,np),lp=getParamValue("sorted",_d,rp,np),up=Tl(ap,sp,lp);return[up.values,up.indices];default:throw TypeError("Node type "+_d.op+" is not implemented")}},executeOp$7=function(_d,rp,np){switch(_d.op){case"Const":return rp[_d.name];case"PlaceholderWithDefault":var ap=getParamValue("default",_d,rp,np);return[getTensor(_d.name,rp,np)||ap];case"Placeholder":return[getTensor(_d.name,rp,np)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":return[getParamValue("x",_d,rp,np).clone()];case"IdentityN":return getParamValue("x",_d,rp,np).map(function(fp){return fp.clone()});case"Snapshot":return[getParamValue("x",_d,rp,np).clone()];case"Shape":return[Dn(getParamValue("x",_d,rp,np).shape,"int32")];case"ShapeN":return getParamValue("x",_d,rp,np).map(function(fp){return Dn(fp.shape)});case"Size":return[An(getParamValue("x",_d,rp,np).size,"int32")];case"Rank":return[An(getParamValue("x",_d,rp,np).rank,"int32")];case"NoOp":return[];case"Print":var sp=getParamValue("x",_d,rp,np),lp=getParamValue("data",_d,rp,np),up=getParamValue("message",_d,rp,np),cp=getParamValue("summarize",_d,rp,np);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(up);for(var dp=0;dp<lp.length;dp++)console.log(Array.prototype.slice.call(lp[dp].dataSync()).slice(0,cp));return[sp];default:throw TypeError("Node type "+_d.op+" is not implemented")}},executeOp$8=function(_d,rp,np){switch(_d.op){case"ResizeBilinear":var ap=getParamValue("images",_d,rp,np),sp=getParamValue("size",_d,rp,np),lp=getParamValue("alignCorners",_d,rp,np);return[vh.resizeBilinear(ap,[sp[0],sp[1]],lp)];case"ResizeNearestNeighbor":return ap=getParamValue("images",_d,rp,np),sp=getParamValue("size",_d,rp,np),lp=getParamValue("alignCorners",_d,rp,np),[vh.resizeNearestNeighbor(ap,[sp[0],sp[1]],lp)];case"CropAndResize":var up=getParamValue("image",_d,rp,np),cp=getParamValue("boxes",_d,rp,np),dp=getParamValue("boxInd",_d,rp,np),fp=getParamValue("cropSize",_d,rp,np),pp=getParamValue("method",_d,rp,np),hp=getParamValue("extrapolationValue",_d,rp,np);return[vh.cropAndResize(up,cp,dp,fp,pp,hp)];default:throw TypeError("Node type "+_d.op+" is not implemented")}},executeOp$9=function(_d,rp,np){switch(_d.op){case"Equal":return[sc(getParamValue("a",_d,rp,np),getParamValue("b",_d,rp,np))];case"NotEqual":return[yc(getParamValue("a",_d,rp,np),getParamValue("b",_d,rp,np))];case"Greater":return[lc(getParamValue("a",_d,rp,np),getParamValue("b",_d,rp,np))];case"GreaterEqual":return[hc(getParamValue("a",_d,rp,np),getParamValue("b",_d,rp,np))];case"Less":return[dc(getParamValue("a",_d,rp,np),getParamValue("b",_d,rp,np))];case"LessEqual":return[vc(getParamValue("a",_d,rp,np),getParamValue("b",_d,rp,np))];case"LogicalAnd":return[Ms(getParamValue("a",_d,rp,np),getParamValue("b",_d,rp,np))];case"LogicalNot":return[Bs(getParamValue("a",_d,rp,np))];case"LogicalOr":return[Ps(getParamValue("a",_d,rp,np),getParamValue("b",_d,rp,np))];case"Select":return[Ws(getParamValue("condition",_d,rp,np),getParamValue("a",_d,rp,np),getParamValue("b",_d,rp,np))];default:throw TypeError("Node type "+_d.op+" is not implemented")}},executeOp$10=function(_d,rp,np){switch(_d.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[Wc(getParamValue("a",_d,rp,np),getParamValue("b",_d,rp,np),getParamValue("transposeA",_d,rp,np),getParamValue("transposeB",_d,rp,np))];case"Transpose":return[El(getParamValue("x",_d,rp,np),getParamValue("perm",_d,rp,np))];default:throw TypeError("Node type "+_d.op+" is not implemented")}},executeOp$11=function(_d,rp,np){switch(_d.op){case"FusedBatchNorm":case"FusedBatchNormV2":case"FusedBatchNormV3":return[Ns(getParamValue("x",_d,rp,np),getParamValue("mean",_d,rp,np),getParamValue("variance",_d,rp,np),getParamValue("offset",_d,rp,np),getParamValue("scale",_d,rp,np),getParamValue("epsilon",_d,rp,np))];case"LRN":return[Rl(getParamValue("x",_d,rp,np),getParamValue("radius",_d,rp,np),getParamValue("bias",_d,rp,np),getParamValue("alpha",_d,rp,np),getParamValue("beta",_d,rp,np))];case"Softmax":return[io(getParamValue("x",_d,rp,np))];case"LogSoftmax":return[uo(getParamValue("x",_d,rp,np))];case"SparseToDense":return[Pl(getParamValue("sparseIndices",_d,rp,np),getParamValue("outputShape",_d,rp,np),getParamValue("sparseValues",_d,rp,np),getParamValue("defaultValue",_d,rp,np))];default:throw TypeError("Node type "+_d.op+" is not implemented")}},executeOp$12=function(_d,rp,np){switch(_d.op){case"Max":var ap=getParamValue("axis",_d,rp,np),sp=getParamValue("keepDims",_d,rp,np);return[hl(getParamValue("x",_d,rp,np),ap,sp)];case"Mean":return ap=getParamValue("axis",_d,rp,np),sp=getParamValue("keepDims",_d,rp,np),[fl(getParamValue("x",_d,rp,np),ap,sp)];case"Min":return ap=getParamValue("axis",_d,rp,np),sp=getParamValue("keepDims",_d,rp,np),[pl(getParamValue("x",_d,rp,np),ap,sp)];case"Sum":return ap=getParamValue("axis",_d,rp,np),sp=getParamValue("keepDims",_d,rp,np),[vl(getParamValue("x",_d,rp,np),ap,sp)];case"All":return ap=getParamValue("axis",_d,rp,np),sp=getParamValue("keepDims",_d,rp,np),[il(getParamValue("x",_d,rp,np),ap,sp)];case"Any":return ap=getParamValue("axis",_d,rp,np),sp=getParamValue("keepDims",_d,rp,np),[ul(getParamValue("x",_d,rp,np),ap,sp)];case"ArgMax":return ap=getParamValue("axis",_d,rp,np),[sl(getParamValue("x",_d,rp,np),ap)];case"ArgMin":return ap=getParamValue("axis",_d,rp,np),[cl(getParamValue("x",_d,rp,np),ap)];case"Prod":return ap=getParamValue("axis",_d,rp,np),sp=getParamValue("keepDims",_d,rp,np),[ml(getParamValue("x",_d,rp,np),ap,sp)];default:throw TypeError("Node type "+_d.op+" is not implemented")}},executeOp$13=function(_d,rp,np){switch(_d.op){case"ConcatV2":case"Concat":var ap=getParamValue("axis",_d,rp,np),sp=getParamValue("tensors",_d,rp,np);return[Gn(sp,ap)];case"GatherV2":case"Gather":ap=getParamValue("axis",_d,rp,np);var lp=getParamValue("x",_d,rp,np),up=getParamValue("indices",_d,rp,np);return[Cc(lp,up.asType("int32"),ap)];case"ReverseV2":case"Reverse":return ap=getParamValue("axis",_d,rp,np),lp=getParamValue("x",_d,rp,np),[zc(lp,ap)];case"Slice":var cp=getParamValue("begin",_d,rp,np),dp=getParamValue("size",_d,rp,np);return[tl(getParamValue("x",_d,rp,np),cp,dp)];case"StridedSlice":cp=getParamValue("begin",_d,rp,np);var fp=getParamValue("end",_d,rp,np),pp=getParamValue("strides",_d,rp,np),hp=getParamValue("beginMask",_d,rp,np),mp=getParamValue("endMask",_d,rp,np),gp=getParamValue("ellipsisMask",_d,rp,np),vp=getParamValue("newAxisMask",_d,rp,np),xp=getParamValue("shrinkAxisMask",_d,rp,np),Sp=getParamValue("x",_d,rp,np);if(cp.length===1&&Sp.shape.length>1)for(var yp=1;yp<Sp.shape.length;yp++)cp.push(0),fp.push(Sp.shape[yp]),pp.push(pp[0]);return[Dl(Sp,cp,fp,pp,hp,mp,gp,vp,xp)];case"Pack":return je(function(){var Ap=getParamValue("axis",_d,rp,np),Op=getParamValue("tensors",_d,rp,np),Lp=Op[0].shape,Mp=Op[0].squeeze().shape,kp=Op.map(function(Dp){var Fp=tt.arraysEqual(Dp.shape,Lp);if(!Fp&&!tt.arraysEqual(Dp.squeeze().shape,Mp))throw new Error("the input tensors shape does not match");return Fp?Dp:Dp.reshape(Lp)});return[Tr(kp,Ap)]});case"Unpack":return je(function(){var Ap=getParamValue("axis",_d,rp,np),Op=getParamValue("tensor",_d,rp,np);return Or(Op,Ap)});case"Tile":var bp=getParamValue("reps",_d,rp,np);return[Nr(getParamValue("x",_d,rp,np),bp)];case"Split":case"SplitV":ap=getParamValue("axis",_d,rp,np);var Ep=getParamValue("numOrSizeSplits",_d,rp,np);return Xn(getParamValue("x",_d,rp,np),Ep,ap);case"ScatterNd":up=getParamValue("indices",_d,rp,np);var wp=getParamValue("values",_d,rp,np),_p=getParamValue("shape",_d,rp,np);return[Nl(up,wp,_p)];case"GatherNd":var Rp=getParamValue("x",_d,rp,np);return up=getParamValue("indices",_d,rp,np),[Ll(Rp,up)];case"SparseToDense":up=getParamValue("sparseIndices",_d,rp,np),_p=getParamValue("outputShape",_d,rp,np);var $p=getParamValue("sparseValues",_d,rp,np),Cp=getParamValue("defaultValue",_d,rp,np);return[Pl(up,$p,_p,$p.dtype===Cp.dtype?Cp:Cp.asType($p.dtype))];default:throw TypeError("Node type "+_d.op+" is not implemented")}},executeOp$14=function(_d,rp,np){switch(_d.op){case"FFT":return[Fl(getParamValue("x",_d,rp,np))];case"IFFT":return[Ol(getParamValue("x",_d,rp,np))];case"RFFT":return[_l(getParamValue("x",_d,rp,np))];case"IRFFT":return[Ml(getParamValue("x",_d,rp,np))];default:throw TypeError("Node type "+_d.op+" is not implemented")}},executeOp$15=function(_d,rp,np){switch(_d.op){case"Cast":return[lr(getParamValue("x",_d,rp,np),getParamValue("dtype",_d,rp,np))];case"ExpandDims":var ap=getParamValue("axis",_d,rp,np);return[dr(getParamValue("x",_d,rp,np),ap)];case"Squeeze":return ap=getParamValue("axis",_d,rp,np),[Dr(getParamValue("x",_d,rp,np),ap)];case"Reshape":return[Sr(getParamValue("x",_d,rp,np),getParamValue("shape",_d,rp,np))];case"PadV2":case"Pad":return[yr(getParamValue("x",_d,rp,np),split$1(getParamValue("padding",_d,rp,np),2),getParamValue("constantValue",_d,rp,np))];case"SpaceToBatchND":var sp=getParamValue("blockShape",_d,rp,np),lp=split$1(getParamValue("paddings",_d,rp,np),2);return[Ar(getParamValue("x",_d,rp,np),sp,lp)];case"BatchToSpaceND":sp=getParamValue("blockShape",_d,rp,np);var up=split$1(getParamValue("crops",_d,rp,np),2);return[cr(getParamValue("x",_d,rp,np),sp,up)];case"DepthToSpace":var cp=getParamValue("blockSize",_d,rp,np),dp=getParamValue("dataFormat",_d,rp,np).toUpperCase();return[pr(getParamValue("x",_d,rp,np),cp,dp)];default:throw TypeError("Node type "+_d.op+" is not implemented")}};function executeOp$16(_d,rp,np){var ap=function(sp,lp,up){switch(sp.category){case"arithmetic":return executeOp(sp,lp,up);case"basic_math":return executeOp$1(sp,lp,up);case"control":return executeOp$2(sp,lp,up);case"convolution":return executeOp$3(sp,lp,up);case"creation":return executeOp$4(sp,lp,up);case"dynamic":return executeOp$5(sp,lp,up);case"evaluation":return executeOp$6(sp,lp,up);case"image":return executeOp$8(sp,lp,up);case"graph":return executeOp$7(sp,lp,up);case"logical":return executeOp$9(sp,lp,up);case"matrices":return executeOp$10(sp,lp,up);case"normalization":return executeOp$11(sp,lp,up);case"reduction":return executeOp$12(sp,lp,up);case"slice_join":return executeOp$13(sp,lp,up);case"spectral":return executeOp$14(sp,lp,up);case"transformation":return executeOp$15(sp,lp,up);case"custom":var cp=getRegisteredOp(sp.op);if(cp&&cp.customExecutor)return cp.customExecutor(new NodeValueImpl(sp,lp,up));throw TypeError("Custom op "+sp.op+" is not registered.");default:throw TypeError("Unknown op '"+sp.op+"'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()")}}(_d,rp,np);return ap instanceof Promise?ap.then(function(sp){return[].concat(sp)}):[].concat(ap)}var ExecutionContext=function(){function _d(rp,np){this.weightMap=rp,this.tensorArrayMap=np,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}return _d.prototype.newFrame=function(rp,np){return{id:rp,frameName:np,iterationId:0}},Object.defineProperty(_d.prototype,"currentContext",{get:function(){return this.contexts},set:function(rp){this.contexts!==rp&&(this.contexts=rp,this.generateCurrentContextIds())},enumerable:!0,configurable:!0}),Object.defineProperty(_d.prototype,"currentContextId",{get:function(){return this._currentContextIds[0]},enumerable:!0,configurable:!0}),Object.defineProperty(_d.prototype,"currentContextIds",{get:function(){return this._currentContextIds},enumerable:!0,configurable:!0}),_d.prototype.generateCurrentContextIds=function(){for(var rp=[],np=0;np<this.contexts.length-1;np++){var ap=this.contexts.slice(0,this.contexts.length-np);rp.push(this.contextIdforContexts(ap))}rp.push(""),this._currentContextIds=rp},_d.prototype.contextIdforContexts=function(rp){return rp?rp.map(function(np){return np.id===0&&np.iterationId===0?"":np.frameName+"-"+np.iterationId}).join("/"):""},_d.prototype.enterFrame=function(rp){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,rp)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))},_d.prototype.exitFrame=function(){if(!(this.contexts&&this.contexts.length>1))throw new Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()},_d.prototype.nextIteration=function(){if(!(this.contexts&&this.contexts.length>0))throw new Error("Cannot increase frame iteration, the context is empty");this.contexts=this.contexts.slice(),this.lastId++;var rp=Object.assign({},this.contexts[this.contexts.length-1]);rp.iterationId+=1,rp.id=this.lastId,this.contexts.splice(-1,1,rp),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))},_d.prototype.getWeight=function(rp){return this.weightMap[rp]},_d.prototype.addTensorArray=function(rp){this.tensorArrayMap[rp.id]=rp},_d.prototype.getTensorArray=function(rp){return this.tensorArrayMap[rp]},_d}();function getExecutionSubgraph(_d,rp,np){for(var ap=new Set,sp=[],lp=null,up=null,cp=new Set,dp=rp.slice();dp.length>0;){var fp=dp.pop();(isControlFlow(fp)||isDynamicShape(fp))&&lp==null&&(up=(lp=fp).children.map(function(pp){return pp.name}).filter(function(pp){return ap.has(pp)})),ap.add(fp.name),np[fp.name]==null&&_d[fp.name]==null&&(fp.inputs.length!==0?fp.inputs.forEach(function(pp){cp.has(pp.name)||(cp.add(pp.name),dp.push(pp))}):sp.push(fp.name))}return{inputs:_d,outputs:rp,usedNodes:ap,missingInputs:sp,dynamicNode:lp,syncInputs:up}}function getNodesInTopologicalOrder(_d,rp,np){var ap=np.usedNodes,sp=np.inputs,lp=[];Object.keys(sp).map(function(fp){return _d.nodes[fp]}).forEach(function(fp){ap.has(fp.name)&&lp.push(fp)}),_d.weights.forEach(function(fp){ap.has(fp.name)&&lp.push(fp)});for(var up=new Set,cp=[];lp.length>0;){var dp=lp.pop();up.add(dp.name),rp[dp.name]||cp.push(dp),dp.children.forEach(function(fp){!up.has(fp.name)&&ap.has(fp.name)&&fp.inputs.every(function(pp){return up.has(pp.name)})&&lp.push(fp)})}return cp}var CONTROL_FLOW_OPS=["Switch","Merge","Enter","Exit","NextIteration"],DYNAMIC_SHAPE_OPS=["NonMaxSuppressionV2","NonMaxSuppressionV3","Where"];function isControlFlow(_d){return CONTROL_FLOW_OPS.indexOf(_d.op)>=0}function isDynamicShape(_d){return DYNAMIC_SHAPE_OPS.indexOf(_d.op)>=0}var GraphExecutor=function(){function _d(rp){this.graph=rp,this.compiledMap=new Map,this._weightMap={},this.SEPERATOR=",",this.placeholders=rp.placeholders,this._outputs=rp.outputs}return Object.defineProperty(_d.prototype,"weightMap",{get:function(){return this._weightMap},set:function(rp){var np=Object.keys(rp).map(function(ap){return rp[ap].map(function(sp){return sp.id})});this.weightIds=[].concat.apply([],np),this._weightMap=rp},enumerable:!0,configurable:!0}),Object.defineProperty(_d.prototype,"inputs",{get:function(){return this.placeholders.map(function(rp){return{name:rp.name,shape:rp.attrParams.shape?rp.attrParams.shape.value:void 0,dtype:rp.attrParams.dtype?rp.attrParams.dtype.value:void 0}})},enumerable:!0,configurable:!0}),Object.defineProperty(_d.prototype,"outputs",{get:function(){return this._outputs.map(function(rp){return{name:rp.name,shape:rp.attrParams.shape?rp.attrParams.shape.value:void 0,dtype:rp.attrParams.dtype?rp.attrParams.dtype.value:void 0}})},enumerable:!0,configurable:!0}),Object.defineProperty(_d.prototype,"inputNodes",{get:function(){return this.placeholders.map(function(rp){return rp.name})},enumerable:!0,configurable:!0}),Object.defineProperty(_d.prototype,"outputNodes",{get:function(){return this.outputs.map(function(rp){return rp.name})},enumerable:!0,configurable:!0}),_d.prototype.getCompilationKey=function(rp,np){var ap=rp.map(function(lp){return lp.name}).sort(),sp=np.map(function(lp){return lp.name}).sort();return ap.join(this.SEPERATOR)+"--"+sp.join(this.SEPERATOR)},_d.prototype.compile=function(rp,np){var ap=getExecutionSubgraph(rp,np,this.weightMap),sp=ap.missingInputs,lp=ap.dynamicNode,up=ap.syncInputs;if(lp!=null)throw new Error("This execution contains the node '"+lp.name+"', which has the dynamic op '"+lp.op+"'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs ["+up+"]");if(sp.length>0){var cp=np.map(function(fp){return fp.name}),dp=Object.keys(rp);throw new Error("Cannot compute the outputs ["+cp+"] from the provided inputs ["+dp+"]. Missing the following inputs: ["+sp+"]")}return getNodesInTopologicalOrder(this.graph,this.weightMap,ap)},_d.prototype.execute=function(rp,np){var ap=this,sp=Object.keys(rp).sort();this.checkInputs(rp),this.checkInputShapeAndType(rp),this.checkOutputs(np);var lp=sp.map(function(pp){return ap.graph.nodes[pp]}),up=np.map(function(pp){return ap.graph.nodes[parseNodeName(pp)[0]]}),cp=this.getCompilationKey(lp,up),dp=this.compiledMap.get(cp);dp==null&&(dp=this.compile(rp,up),this.compiledMap.set(cp,dp));var fp={};return je(function(){var pp=new ExecutionContext(ap._weightMap,fp),hp=__assign$1({},ap.weightMap);Object.keys(rp).forEach(function(yp){hp[yp]=[rp[yp]]});for(var mp=ap.getFrozenTensorIds(hp),gp={},vp=0;vp<dp.length;vp++){var xp=dp[vp];if(!hp[xp.name]){var Sp=executeOp$16(xp,hp,pp);if(Sp instanceof Promise)throw new Error("The execution of the op '"+xp.op+"' returned a promise. Please use model.executeAsync() instead.");hp[xp.name]=Sp,ap.checkTensorForDisposal(xp.name,xp,hp,pp,mp,np,gp)}}return np.map(function(yp){return getTensor(yp,hp,pp)})})},_d.prototype.getFrozenTensorIds=function(rp){var np=[].concat.apply([],Object.keys(rp).map(function(ap){return rp[ap]}).map(function(ap){return ap.map(function(sp){return sp.id})}));return new Set(np)},_d.prototype.checkTensorForDisposal=function(rp,np,ap,sp,lp,up,cp){np.category!=="control"&&up.indexOf(rp)===-1&&(ap[rp].forEach(function(dp){dp!=null&&(cp[dp.id]=(cp[dp.id]||0)+np.children.length)}),np.inputs.forEach(function(dp){if(dp.category!=="control"){var fp=getTensorsForCurrentContenxt(dp.name,ap,sp);fp!=null&&fp.forEach(function(pp){if(pp&&!lp.has(pp.id)){var hp=cp[pp.id];hp===1?(pp.dispose(),delete cp[pp.id]):hp!=null&&cp[pp.id]--}})}}))},_d.prototype.executeAsync=function(rp,np){return __awaiter$7(this,void 0,void 0,function(){var ap,sp,lp,up,cp,dp,fp=this;return __generator$7(this,function(pp){switch(pp.label){case 0:return this.checkInputs(rp),this.checkInputShapeAndType(rp),this.checkOutputs(np),ap={},sp=new ExecutionContext(this._weightMap,ap),[4,this.executeWithControlFlow(rp,sp,np)];case 1:return lp=pp.sent(),up=np.map(function(hp){return getTensor(hp,lp,sp)}),cp=new Set(up.map(function(hp){return hp.id})),dp=new Set(Object.keys(rp).map(function(hp){return rp[hp].id})),Object.keys(lp).forEach(function(hp){lp[hp].forEach(function(mp){!mp||mp.isDisposed||cp.has(mp.id)||dp.has(mp.id)||fp.weightIds.indexOf(mp.id)!==-1||mp.dispose()})}),[2,up]}})})},_d.prototype.executeWithControlFlow=function(rp,np,ap){return __awaiter$7(this,void 0,void 0,function(){var sp,lp,up,cp,dp,fp,pp,hp,mp,gp,vp,xp,Sp,yp,bp,Ep,wp=this;return __generator$7(this,function(_p){switch(_p.label){case 0:sp=Object.keys(rp),lp=sp.map(function(Rp){return wp.graph.nodes[Rp]}),up=ap.map(function(Rp){return wp.graph.nodes[parseNodeName(Rp)[0]]}),cp=getExecutionSubgraph(rp,up,this.weightMap),dp=cp.usedNodes,fp=cp.missingInputs,pp=cp.dynamicNode,hp=cp.syncInputs,mp=lp.concat(this.graph.weights).map(function(Rp){return{node:Rp,contexts:np.currentContext}}),gp=__assign$1({},this.weightMap),Object.keys(rp).forEach(function(Rp){gp[Rp]=[rp[Rp]]}),vp={},xp=this.getFrozenTensorIds(gp),Sp={},_p.label=1;case 1:return mp.length>0?(yp=this.processStack(lp,mp,np,gp,Sp,xp,ap,vp,dp),[4,Promise.all(yp)]):[3,3];case 2:return _p.sent(),[3,1];case 3:if(pp==null&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead."),(bp=up.filter(function(Rp){return!isControlFlow(Rp)&&!getTensor(Rp.name,gp,np)}).map(function(Rp){return Rp.name})).length>0)throw Ep="",pp!=null&&(Ep="Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs ["+hp+"]"),new Error("Cannot compute the outputs ["+bp+"] from the provided inputs ["+sp+"]. Consider providing the following inputs: ["+fp+"]. "+Ep);return[2,gp]}})})},_d.prototype.processStack=function(rp,np,ap,sp,lp,up,cp,dp,fp){for(var pp=this,hp=[],mp=function(){var vp=np.pop();ap.currentContext=vp.contexts;var xp="";if(vp.node.op==="Enter"&&getParamValue("isConstant",vp.node,sp,ap)&&(xp=getNodeNameAndIndex(vp.node.name,ap)[0]),rp.indexOf(vp.node)===-1){var Sp=executeOp$16(vp.node,sp,ap);xp||(xp=getNodeNameAndIndex(vp.node.name,ap)[0]);var yp=ap.currentContext;Sp instanceof Promise?hp.push(Sp.then(function(bp){return sp[xp]=bp,ap.currentContext=yp,pp.checkTensorForDisposal(xp,vp.node,sp,ap,up,cp,dp),pp.processChildNodes(vp.node,np,ap,sp,lp,fp),bp})):(sp[xp]=Sp,gp.checkTensorForDisposal(xp,vp.node,sp,ap,up,cp,dp),gp.processChildNodes(vp.node,np,ap,sp,lp,fp))}else gp.processChildNodes(vp.node,np,ap,sp,lp,fp)},gp=this;np.length>0;)mp();return hp},_d.prototype.processChildNodes=function(rp,np,ap,sp,lp,up){rp.children.forEach(function(cp){var dp=getNodeNameAndIndex(cp.name,ap)[0];!lp[dp]&&up.has(cp.name)&&(cp.op==="Merge"?cp.inputNames.some(function(fp){return!!getTensor(fp,sp,ap)})&&(lp[dp]=!0,np.push({contexts:ap.currentContext,node:cp})):cp.inputNames.every(function(fp){return!!getTensor(fp,sp,ap)})&&(lp[dp]=!0,np.push({contexts:ap.currentContext,node:cp})))})},_d.prototype.dispose=function(){var rp=this;Object.keys(this.weightMap).forEach(function(np){return rp.weightMap[np].forEach(function(ap){return ap.dispose()})})},_d.prototype.checkInputShapeAndType=function(rp){var np=this;Object.keys(rp).forEach(function(ap){var sp=rp[ap],lp=np.graph.nodes[ap];if(lp.attrParams.shape&&lp.attrParams.shape.value){var up=lp.attrParams.shape.value,cp=up.length===sp.shape.length&&sp.shape.every(function(dp,fp){return up[fp]===-1||up[fp]===dp});tt.assert(cp,function(){return"The shape of dict['"+lp.name+"'] provided in model.execute(dict) must be ["+up+"], but was ["+sp.shape+"]"})}lp.attrParams.dtype&&lp.attrParams.dtype.value&&tt.assert(sp.dtype===lp.attrParams.dtype.value,function(){return"The dtype of dict['"+lp.name+"'] provided in model.execute(dict) must be "+lp.attrParams.dtype.value+", but was "+sp.dtype})})},_d.prototype.checkInputs=function(rp){var np=this,ap=Object.keys(rp).filter(function(sp){return!np.graph.nodes[sp]});if(ap.length>0)throw new Error("The dict provided in model.execute(dict) has keys: ["+ap+"] that are not part of graph")},_d.prototype.checkOutputs=function(rp){var np=this;rp.forEach(function(ap){var sp=parseNodeName(ap)[0];if(!np.graph.nodes[sp])throw new Error("The output '"+ap+"' is not found in the graph")})},_d}(),TFHUB_SEARCH_PARAM="?tfjs-format=file",DEFAULT_MODEL_NAME="model.json",GraphModel=function(){function _d(rp,np){np===void 0&&(np={}),this.modelUrl=rp,this.loadOptions=np,this.version="n/a",np==null&&(this.loadOptions={})}return Object.defineProperty(_d.prototype,"modelVersion",{get:function(){return this.version},enumerable:!0,configurable:!0}),Object.defineProperty(_d.prototype,"inputNodes",{get:function(){return this.executor.inputNodes},enumerable:!0,configurable:!0}),Object.defineProperty(_d.prototype,"outputNodes",{get:function(){return this.executor.outputNodes},enumerable:!0,configurable:!0}),Object.defineProperty(_d.prototype,"inputs",{get:function(){return this.executor.inputs},enumerable:!0,configurable:!0}),Object.defineProperty(_d.prototype,"outputs",{get:function(){return this.executor.outputs},enumerable:!0,configurable:!0}),Object.defineProperty(_d.prototype,"weights",{get:function(){return this.executor.weightMap},enumerable:!0,configurable:!0}),_d.prototype.findIOHandler=function(){var rp=this.modelUrl;if(rp.load!=null)this.handler=rp;else if(this.loadOptions.requestInit!=null)this.handler=Sf.browserHTTPRequest(rp,this.loadOptions);else{var np=Sf.getLoadHandlers(rp,this.loadOptions.onProgress);if(np.length===0)np.push(Sf.browserHTTPRequest(rp,this.loadOptions));else if(np.length>1)throw new Error("Found more than one ("+np.length+") load handlers for URL '"+[rp]+"'");this.handler=np[0]}},_d.prototype.load=function(){return __awaiter$7(this,void 0,void 0,function(){var rp,np,ap;return __generator$7(this,function(sp){switch(sp.label){case 0:if(this.findIOHandler(),this.handler.load==null)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");return[4,this.handler.load()];case 1:return rp=sp.sent(),np=rp.modelTopology,this.version=np.versions.producer+"."+np.versions.minConsumer,ap=Sf.decodeWeights(rp.weightData,rp.weightSpecs),this.executor=new GraphExecutor(OperationMapper.Instance.transformGraph(np)),this.executor.weightMap=this.convertTensorMapToTensorsMap(ap),[2,!0]}})})},_d.prototype.predict=function(rp,np){return this.execute(rp,this.outputNodes)},_d.prototype.normalizeInputs=function(rp){if(!(rp instanceof dt||Array.isArray(rp)))return rp;if((rp=Array.isArray(rp)?rp:[rp]).length!==this.inputNodes.length)throw new Error("Input tensor count mismatch,the graph model has "+this.inputNodes.length+" placeholders, while there are "+rp.length+" input tensors.");return this.inputNodes.reduce(function(np,ap,sp){return np[ap]=rp[sp],np},{})},_d.prototype.normalizeOutputs=function(rp){return rp=rp||this.outputNodes,Array.isArray(rp)?rp:[rp]},_d.prototype.execute=function(rp,np){rp=this.normalizeInputs(rp),np=this.normalizeOutputs(np);var ap=this.executor.execute(rp,np);return ap.length>1?ap:ap[0]},_d.prototype.executeAsync=function(rp,np){return __awaiter$7(this,void 0,void 0,function(){var ap;return __generator$7(this,function(sp){switch(sp.label){case 0:return rp=this.normalizeInputs(rp),np=this.normalizeOutputs(np),[4,this.executor.executeAsync(rp,np)];case 1:return[2,(ap=sp.sent()).length>1?ap:ap[0]]}})})},_d.prototype.convertTensorMapToTensorsMap=function(rp){return Object.keys(rp).reduce(function(np,ap){return np[ap]=[rp[ap]],np},{})},_d.prototype.dispose=function(){this.executor.dispose()},_d}();function loadGraphModel(_d,rp){return rp===void 0&&(rp={}),__awaiter$7(this,void 0,void 0,function(){var np;return __generator$7(this,function(ap){switch(ap.label){case 0:if(_d==null)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");return rp==null&&(rp={}),rp.fromTFHub&&_d.load==null&&(_d.endsWith("/")||(_d+="/"),_d=""+_d+DEFAULT_MODEL_NAME+TFHUB_SEARCH_PARAM),[4,(np=new GraphModel(_d,rp)).load()];case 1:return ap.sent(),[2,np]}})})}var version$7="1.3.1";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var extendStatics=function(_d,rp){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(np,ap){np.__proto__=ap}||function(np,ap){for(var sp in ap)ap.hasOwnProperty(sp)&&(np[sp]=ap[sp])})(_d,rp)};function __extends$g(_d,rp){function np(){this.constructor=_d}extendStatics(_d,rp),_d.prototype=rp===null?Object.create(rp):(np.prototype=rp.prototype,new np)}function __awaiter$6(_d,rp,np,ap){return new(np||(np=Promise))(function(sp,lp){function up(fp){try{dp(ap.next(fp))}catch(pp){lp(pp)}}function cp(fp){try{dp(ap.throw(fp))}catch(pp){lp(pp)}}function dp(fp){fp.done?sp(fp.value):new np(function(pp){pp(fp.value)}).then(up,cp)}dp((ap=ap.apply(_d,rp||[])).next())})}function __generator$6(_d,rp){var np,ap,sp,lp,up={label:0,sent:function(){if(1&sp[0])throw sp[1];return sp[1]},trys:[],ops:[]};return lp={next:cp(0),throw:cp(1),return:cp(2)},typeof Symbol=="function"&&(lp[Symbol.iterator]=function(){return this}),lp;function cp(dp){return function(fp){return function(pp){if(np)throw new TypeError("Generator is already executing.");for(;up;)try{if(np=1,ap&&(sp=2&pp[0]?ap.return:pp[0]?ap.throw||((sp=ap.return)&&sp.call(ap),0):ap.next)&&!(sp=sp.call(ap,pp[1])).done)return sp;switch(ap=0,sp&&(pp=[2&pp[0],sp.value]),pp[0]){case 0:case 1:sp=pp;break;case 4:return up.label++,{value:pp[1],done:!1};case 5:up.label++,ap=pp[1],pp=[0];continue;case 7:pp=up.ops.pop(),up.trys.pop();continue;default:if(!(sp=(sp=up.trys).length>0&&sp[sp.length-1])&&(pp[0]===6||pp[0]===2)){up=0;continue}if(pp[0]===3&&(!sp||pp[1]>sp[0]&&pp[1]<sp[3])){up.label=pp[1];break}if(pp[0]===6&&up.label<sp[1]){up.label=sp[1],sp=pp;break}if(sp&&up.label<sp[2]){up.label=sp[2],up.ops.push(pp);break}sp[2]&&up.ops.pop(),up.trys.pop();continue}pp=rp.call(_d,up)}catch(hp){pp=[6,hp],ap=0}finally{np=sp=0}if(5&pp[0])throw pp[1];return{value:pp[0]?pp[1]:void 0,done:!0}}([dp,fp])}}}function createCommonjsModule$1(_d,rp){return _d(rp={exports:{}},rp.exports),rp.exports}var alea$2=createCommonjsModule$1(function(_d){(function(rp,np,ap){function sp(up,cp){return cp.c=up.c,cp.s0=up.s0,cp.s1=up.s1,cp.s2=up.s2,cp}function lp(up,cp){var dp=new function(hp){var mp,gp=this,vp=(mp=4022871197,function(xp){xp=xp.toString();for(var Sp=0;Sp<xp.length;Sp++){var yp=.02519603282416938*(mp+=xp.charCodeAt(Sp));yp-=mp=yp>>>0,mp=(yp*=mp)>>>0,mp+=4294967296*(yp-=mp)}return 23283064365386963e-26*(mp>>>0)});gp.next=function(){var xp=2091639*gp.s0+23283064365386963e-26*gp.c;return gp.s0=gp.s1,gp.s1=gp.s2,gp.s2=xp-(gp.c=0|xp)},gp.c=1,gp.s0=vp(" "),gp.s1=vp(" "),gp.s2=vp(" "),gp.s0-=vp(hp),gp.s0<0&&(gp.s0+=1),gp.s1-=vp(hp),gp.s1<0&&(gp.s1+=1),gp.s2-=vp(hp),gp.s2<0&&(gp.s2+=1),vp=null}(up),fp=cp&&cp.state,pp=dp.next;return pp.int32=function(){return 4294967296*dp.next()|0},pp.double=function(){return pp()+11102230246251565e-32*(2097152*pp()|0)},pp.quick=pp,fp&&(typeof fp=="object"&&sp(fp,dp),pp.state=function(){return sp(dp,{})}),pp}np&&np.exports?np.exports=lp:ap&&ap.amd?ap(function(){return lp}):this.alea=lp})(0,_d,!1)}),xor128$2=createCommonjsModule$1(function(_d){(function(rp,np,ap){function sp(up,cp){return cp.x=up.x,cp.y=up.y,cp.z=up.z,cp.w=up.w,cp}function lp(up,cp){var dp=new function(hp){var mp=this,gp="";mp.x=0,mp.y=0,mp.z=0,mp.w=0,mp.next=function(){var xp=mp.x^mp.x<<11;return mp.x=mp.y,mp.y=mp.z,mp.z=mp.w,mp.w^=mp.w>>>19^xp^xp>>>8},hp===(0|hp)?mp.x=hp:gp+=hp;for(var vp=0;vp<gp.length+64;vp++)mp.x^=0|gp.charCodeAt(vp),mp.next()}(up),fp=cp&&cp.state,pp=function(){return(dp.next()>>>0)/4294967296};return pp.double=function(){do var hp=((dp.next()>>>11)+(dp.next()>>>0)/4294967296)/2097152;while(hp===0);return hp},pp.int32=dp.next,pp.quick=pp,fp&&(typeof fp=="object"&&sp(fp,dp),pp.state=function(){return sp(dp,{})}),pp}np&&np.exports?np.exports=lp:ap&&ap.amd?ap(function(){return lp}):this.xor128=lp})(0,_d,!1)}),xorwow$2=createCommonjsModule$1(function(_d){(function(rp,np,ap){function sp(up,cp){return cp.x=up.x,cp.y=up.y,cp.z=up.z,cp.w=up.w,cp.v=up.v,cp.d=up.d,cp}function lp(up,cp){var dp=new function(hp){var mp=this,gp="";mp.next=function(){var xp=mp.x^mp.x>>>2;return mp.x=mp.y,mp.y=mp.z,mp.z=mp.w,mp.w=mp.v,(mp.d=mp.d+362437|0)+(mp.v=mp.v^mp.v<<4^xp^xp<<1)|0},mp.x=0,mp.y=0,mp.z=0,mp.w=0,mp.v=0,hp===(0|hp)?mp.x=hp:gp+=hp;for(var vp=0;vp<gp.length+64;vp++)mp.x^=0|gp.charCodeAt(vp),vp==gp.length&&(mp.d=mp.x<<10^mp.x>>>4),mp.next()}(up),fp=cp&&cp.state,pp=function(){return(dp.next()>>>0)/4294967296};return pp.double=function(){do var hp=((dp.next()>>>11)+(dp.next()>>>0)/4294967296)/2097152;while(hp===0);return hp},pp.int32=dp.next,pp.quick=pp,fp&&(typeof fp=="object"&&sp(fp,dp),pp.state=function(){return sp(dp,{})}),pp}np&&np.exports?np.exports=lp:ap&&ap.amd?ap(function(){return lp}):this.xorwow=lp})(0,_d,!1)}),xorshift7$2=createCommonjsModule$1(function(_d){(function(rp,np,ap){function sp(up,cp){return cp.x=up.x.slice(),cp.i=up.i,cp}function lp(up,cp){up==null&&(up=+new Date);var dp=new function(hp){var mp=this;mp.next=function(){var gp,vp,xp=mp.x,Sp=mp.i;return gp=xp[Sp],vp=(gp^=gp>>>7)^gp<<24,vp^=(gp=xp[Sp+1&7])^gp>>>10,vp^=(gp=xp[Sp+3&7])^gp>>>3,vp^=(gp=xp[Sp+4&7])^gp<<7,gp=xp[Sp+7&7],vp^=(gp^=gp<<13)^gp<<9,xp[Sp]=vp,mp.i=Sp+1&7,vp},function(gp,vp){var xp,Sp=[];if(vp===(0|vp))Sp[0]=vp;else for(vp=""+vp,xp=0;xp<vp.length;++xp)Sp[7&xp]=Sp[7&xp]<<15^vp.charCodeAt(xp)+Sp[xp+1&7]<<13;for(;Sp.length<8;)Sp.push(0);for(xp=0;xp<8&&Sp[xp]===0;++xp);for(xp==8?Sp[7]=-1:Sp[xp],gp.x=Sp,gp.i=0,xp=256;xp>0;--xp)gp.next()}(mp,hp)}(up),fp=cp&&cp.state,pp=function(){return(dp.next()>>>0)/4294967296};return pp.double=function(){do var hp=((dp.next()>>>11)+(dp.next()>>>0)/4294967296)/2097152;while(hp===0);return hp},pp.int32=dp.next,pp.quick=pp,fp&&(fp.x&&sp(fp,dp),pp.state=function(){return sp(dp,{})}),pp}np&&np.exports?np.exports=lp:ap&&ap.amd?ap(function(){return lp}):this.xorshift7=lp})(0,_d,!1)}),xor4096$2=createCommonjsModule$1(function(_d){(function(rp,np,ap){function sp(up,cp){return cp.i=up.i,cp.w=up.w,cp.X=up.X.slice(),cp}function lp(up,cp){up==null&&(up=+new Date);var dp=new function(hp){var mp=this;mp.next=function(){var gp,vp,xp=mp.w,Sp=mp.X,yp=mp.i;return mp.w=xp=xp+1640531527|0,vp=Sp[yp+34&127],gp=Sp[yp=yp+1&127],vp^=vp<<13,gp^=gp<<17,vp^=vp>>>15,gp^=gp>>>12,vp=Sp[yp]=vp^gp,mp.i=yp,vp+(xp^xp>>>16)|0},function(gp,vp){var xp,Sp,yp,bp,Ep,wp=[],_p=128;for(vp===(0|vp)?(Sp=vp,vp=null):(vp+="\0",Sp=0,_p=Math.max(_p,vp.length)),yp=0,bp=-32;bp<_p;++bp)vp&&(Sp^=vp.charCodeAt((bp+32)%vp.length)),bp===0&&(Ep=Sp),Sp^=Sp<<10,Sp^=Sp>>>15,Sp^=Sp<<4,Sp^=Sp>>>13,bp>=0&&(Ep=Ep+1640531527|0,yp=(xp=wp[127&bp]^=Sp+Ep)==0?yp+1:0);for(yp>=128&&(wp[127&(vp&&vp.length||0)]=-1),yp=127,bp=512;bp>0;--bp)Sp=wp[yp+34&127],xp=wp[yp=yp+1&127],Sp^=Sp<<13,xp^=xp<<17,Sp^=Sp>>>15,xp^=xp>>>12,wp[yp]=Sp^xp;gp.w=Ep,gp.X=wp,gp.i=yp}(mp,hp)}(up),fp=cp&&cp.state,pp=function(){return(dp.next()>>>0)/4294967296};return pp.double=function(){do var hp=((dp.next()>>>11)+(dp.next()>>>0)/4294967296)/2097152;while(hp===0);return hp},pp.int32=dp.next,pp.quick=pp,fp&&(fp.X&&sp(fp,dp),pp.state=function(){return sp(dp,{})}),pp}np&&np.exports?np.exports=lp:ap&&ap.amd?ap(function(){return lp}):this.xor4096=lp})(0,_d,!1)}),tychei$2=createCommonjsModule$1(function(_d){(function(rp,np,ap){function sp(up,cp){return cp.a=up.a,cp.b=up.b,cp.c=up.c,cp.d=up.d,cp}function lp(up,cp){var dp=new function(hp){var mp=this,gp="";mp.next=function(){var xp=mp.b,Sp=mp.c,yp=mp.d,bp=mp.a;return xp=xp<<25^xp>>>7^Sp,Sp=Sp-yp|0,yp=yp<<24^yp>>>8^bp,bp=bp-xp|0,mp.b=xp=xp<<20^xp>>>12^Sp,mp.c=Sp=Sp-yp|0,mp.d=yp<<16^Sp>>>16^bp,mp.a=bp-xp|0},mp.a=0,mp.b=0,mp.c=-1640531527,mp.d=1367130551,hp===Math.floor(hp)?(mp.a=hp/4294967296|0,mp.b=0|hp):gp+=hp;for(var vp=0;vp<gp.length+20;vp++)mp.b^=0|gp.charCodeAt(vp),mp.next()}(up),fp=cp&&cp.state,pp=function(){return(dp.next()>>>0)/4294967296};return pp.double=function(){do var hp=((dp.next()>>>11)+(dp.next()>>>0)/4294967296)/2097152;while(hp===0);return hp},pp.int32=dp.next,pp.quick=pp,fp&&(typeof fp=="object"&&sp(fp,dp),pp.state=function(){return sp(dp,{})}),pp}np&&np.exports?np.exports=lp:ap&&ap.amd?ap(function(){return lp}):this.tychei=lp})(0,_d,!1)}),seedrandom$3=createCommonjsModule$1(function(_d){(function(rp,np){var ap,sp=this,lp=256,up=6,cp="random",dp=np.pow(lp,up),fp=np.pow(2,52),pp=2*fp,hp=lp-1;function mp(Sp,yp,bp){var Ep=[],wp=vp(function $p(Cp,Ap){var Op,Lp=[],Mp=typeof Cp;if(Ap&&Mp=="object")for(Op in Cp)try{Lp.push($p(Cp[Op],Ap-1))}catch{}return Lp.length?Lp:Mp=="string"?Cp:Cp+"\0"}((yp=yp==1?{entropy:!0}:yp||{}).entropy?[Sp,xp(rp)]:Sp??function(){try{var $p;return ap&&($p=ap.randomBytes)?$p=$p(lp):($p=new Uint8Array(lp),(sp.crypto||sp.msCrypto).getRandomValues($p)),xp($p)}catch{var Cp=sp.navigator,Ap=Cp&&Cp.plugins;return[+new Date,sp,Ap,sp.screen,xp(rp)]}}(),3),Ep),_p=new function($p){var Cp,Ap=$p.length,Op=this,Lp=0,Mp=Op.i=Op.j=0,kp=Op.S=[];for(Ap||($p=[Ap++]);Lp<lp;)kp[Lp]=Lp++;for(Lp=0;Lp<lp;Lp++)kp[Lp]=kp[Mp=hp&Mp+$p[Lp%Ap]+(Cp=kp[Lp])],kp[Mp]=Cp;(Op.g=function(Dp){for(var Fp,Ip=0,Pp=Op.i,Tp=Op.j,Np=Op.S;Dp--;)Fp=Np[Pp=hp&Pp+1],Ip=Ip*lp+Np[hp&(Np[Pp]=Np[Tp=hp&Tp+Fp])+(Np[Tp]=Fp)];return Op.i=Pp,Op.j=Tp,Ip})(lp)}(Ep),Rp=function(){for(var $p=_p.g(up),Cp=dp,Ap=0;$p<fp;)$p=($p+Ap)*lp,Cp*=lp,Ap=_p.g(1);for(;$p>=pp;)$p/=2,Cp/=2,Ap>>>=1;return($p+Ap)/Cp};return Rp.int32=function(){return 0|_p.g(4)},Rp.quick=function(){return _p.g(4)/4294967296},Rp.double=Rp,vp(xp(_p.S),rp),(yp.pass||bp||function($p,Cp,Ap,Op){return Op&&(Op.S&&gp(Op,_p),$p.state=function(){return gp(_p,{})}),Ap?(np[cp]=$p,Cp):$p})(Rp,wp,"global"in yp?yp.global:this==np,yp.state)}function gp(Sp,yp){return yp.i=Sp.i,yp.j=Sp.j,yp.S=Sp.S.slice(),yp}function vp(Sp,yp){for(var bp,Ep=Sp+"",wp=0;wp<Ep.length;)yp[hp&wp]=hp&(bp^=19*yp[hp&wp])+Ep.charCodeAt(wp++);return xp(yp)}function xp(Sp){return String.fromCharCode.apply(0,Sp)}if(np["seed"+cp]=mp,vp(np.random(),rp),_d.exports){_d.exports=mp;try{ap=require("crypto")}catch{}}})([],Math)});seedrandom$3.alea=alea$2,seedrandom$3.xor128=xor128$2,seedrandom$3.xorwow=xorwow$2,seedrandom$3.xorshift7=xorshift7$2,seedrandom$3.xor4096=xor4096$2,seedrandom$3.tychei=tychei$2;var seedrandom$1$1=seedrandom$3,seedrandom_1=seedrandom$1$1.alea;function deepMap(_d,rp){return deepMapInternal(_d,rp)}function deepMapInternal(_d,rp,np,ap){if(np===void 0&&(np=new Map),ap===void 0&&(ap=new Set),_d==null)return null;if(ap.has(_d))throw new Error("Circular references are not supported.");if(np.has(_d))return np.get(_d);var sp=rp(_d);if(sp.recurse&&sp.value!==null)throw new Error("A deep map function may not return both a value and recurse=true.");if(sp.recurse){if(isIterable(_d)){var lp=Array.isArray(_d)?[]:{};for(var up in ap.add(_d),_d){var cp=deepMapInternal(_d[up],rp,np,ap);lp[up]=cp}return ap.delete(_d),lp}throw new Error("Can't recurse into non-iterable type: "+_d)}return np.set(_d,sp.value),sp.value}function deepZip(_d,rp){return rp===void 0&&(rp=zipToList),deepZipInternal(_d,rp)}function deepZipInternal(_d,rp,np){np===void 0&&(np=new Set);var ap=_d[0];if(np.has(ap))throw new Error("Circular references are not supported.");var sp=rp(_d);if(sp.recurse&&sp.value!==null)throw new Error("A deep zip function may not return both a value and recurse=true.");if(sp.recurse){if(isIterable(ap)){var lp=Array.isArray(ap)?[]:{};np.add(ap);var up=function(dp){var fp=deepZipInternal(_d.map(function(pp){return pp[dp]}),rp,np);lp[dp]=fp};for(var cp in ap)up(cp);return np.delete(ap),lp}throw new Error("Can't recurse into non-iterable type: "+ap)}return sp.value}function zipToList(_d){return _d===null?null:isIterable(_d[0])?{value:null,recurse:!0}:{value:_d,recurse:!1}}function deepMapAndAwaitAll(_d,rp){return __awaiter$6(this,void 0,void 0,function(){var np,ap,sp,lp,up,cp;return __generator$6(this,function(dp){switch(dp.label){case 0:np=new Map,deepMapInternal(_d,rp,np),ap=0,sp=Array.from(np.keys()),dp.label=1;case 1:return ap<sp.length?(lp=sp[ap],(up=np.get(lp))instanceof Promise?[4,up]:[3,3]):[3,4];case 2:cp=dp.sent(),np.set(lp,cp),dp.label=3;case 3:return ap++,[3,1];case 4:return[2,deepMapInternal(_d,rp,np)]}})})}function isIterable(_d){return _d!=null&&!ArrayBuffer.isView(_d)&&(Array.isArray(_d)||typeof _d=="object"&&!(_d instanceof dt))}function canTensorify(_d){return _d==null||isPrimitive(_d)||Array.isArray(_d)||typeof _d=="object"&&_d instanceof dt||tt.isTypedArray(_d)}function isPrimitive(_d){return _d===null||typeof _d!="object"&&typeof _d!="function"}function deepClone(_d){return deepMap(_d,cloneIfTensor)}function cloneIfTensor(_d){return _d instanceof dt?{value:_d.clone(),recurse:!1}:isIterable(_d)?{value:null,recurse:!0}:{value:_d,recurse:!1}}var RingBuffer=function(){function _d(rp){if(this.capacity=rp,this.begin=0,this.end=0,rp==null)throw new RangeError("Can't create a ring buffer of unknown capacity.");if(rp<1)throw new RangeError("Can't create ring buffer of capacity < 1.");this.data=new Array(rp),this.doubledCapacity=2*rp}return _d.prototype.wrap=function(rp){for(;rp<0;)rp+=this.doubledCapacity;return rp%this.doubledCapacity},_d.prototype.get=function(rp){if(rp<0)throw new RangeError("Can't get item at a negative index.");return this.data[rp%this.capacity]},_d.prototype.set=function(rp,np){if(rp<0)throw new RangeError("Can't set item at a negative index.");this.data[rp%this.capacity]=np},_d.prototype.length=function(){var rp=this.end-this.begin;return rp<0&&(rp=this.doubledCapacity+rp),rp},_d.prototype.isFull=function(){return this.length()===this.capacity},_d.prototype.isEmpty=function(){return this.length()===0},_d.prototype.push=function(rp){if(this.isFull())throw new RangeError("Ring buffer is full.");this.set(this.end,rp),this.end=this.wrap(this.end+1)},_d.prototype.pushAll=function(rp){for(var np=0,ap=rp;np<ap.length;np++){var sp=ap[np];this.push(sp)}},_d.prototype.pop=function(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);var rp=this.get(this.end);return this.set(this.end,void 0),rp},_d.prototype.unshift=function(rp){if(this.isFull())throw new RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,rp)},_d.prototype.shift=function(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");var rp=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),rp},_d.prototype.shuffleExcise=function(rp){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");var np=this.wrap(this.begin+rp),ap=this.get(np);return this.set(np,this.pop()),ap},_d}(),GrowingRingBuffer=function(_d){function rp(){return _d.call(this,rp.INITIAL_CAPACITY)||this}return __extends$g(rp,_d),rp.prototype.isFull=function(){return!1},rp.prototype.push=function(np){_d.prototype.isFull.call(this)&&this.expand(),_d.prototype.push.call(this,np)},rp.prototype.unshift=function(np){_d.prototype.isFull.call(this)&&this.expand(),_d.prototype.unshift.call(this,np)},rp.prototype.expand=function(){for(var np=2*this.capacity,ap=new Array(np),sp=this.length(),lp=0;lp<sp;lp++)ap[lp]=this.get(this.wrap(this.begin+lp));this.data=ap,this.capacity=np,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=sp},rp.INITIAL_CAPACITY=32,rp}(RingBuffer);function iteratorFromItems(_d){return new ArrayIterator(_d)}function iteratorFromFunction(_d){return new FunctionCallIterator(_d)}function iteratorFromConcatenated(_d,rp){return new ChainedIterator(_d,rp)}function iteratorFromZipped(_d,rp){return rp===void 0&&(rp=ZipMismatchMode.FAIL),new ZipIterator(_d,rp)}var ZipMismatchMode,LazyIterator=function(){function _d(){}return _d.prototype.toArray=function(){return __awaiter$6(this,void 0,void 0,function(){var rp,np;return __generator$6(this,function(ap){switch(ap.label){case 0:return rp=[],[4,this.next()];case 1:np=ap.sent(),ap.label=2;case 2:return np.done?[3,4]:(rp.push(np.value),[4,this.next()]);case 3:return np=ap.sent(),[3,2];case 4:return[2,rp]}})})},_d.prototype.toArrayForTest=function(){return __awaiter$6(this,void 0,void 0,function(){var rp,np,ap;return __generator$6(this,function(sp){switch(sp.label){case 0:return rp=this.prefetch(100),np=[],[4,rp.next()];case 1:ap=sp.sent(),sp.label=2;case 2:return ap.done?[3,4]:(np.push(ap.value),[4,rp.next()]);case 3:return ap=sp.sent(),[3,2];case 4:return[2,np]}})})},_d.prototype.resolveFully=function(){return __awaiter$6(this,void 0,void 0,function(){var rp;return __generator$6(this,function(np){switch(np.label){case 0:return[4,this.next()];case 1:rp=np.sent(),np.label=2;case 2:return rp.done?[3,4]:[4,this.next()];case 3:return rp=np.sent(),[3,2];case 4:return[2]}})})},_d.prototype.resolveWhile=function(rp){return __awaiter$6(this,void 0,void 0,function(){var np,ap;return __generator$6(this,function(sp){switch(sp.label){case 0:return[4,this.next()];case 1:np=sp.sent(),ap=rp(np.value),sp.label=2;case 2:return np.done||!ap?[3,4]:[4,this.next()];case 3:return np=sp.sent(),ap=rp(np.value),[3,2];case 4:return[2]}})})},_d.prototype.handleErrors=function(rp){return new ErrorHandlingLazyIterator(this,rp)},_d.prototype.filter=function(rp){return new FilterIterator(this,rp)},_d.prototype.map=function(rp){return new MapIterator(this,rp)},_d.prototype.mapAsync=function(rp){return new AsyncMapIterator(this,rp)},_d.prototype.serialMapAsync=function(rp){return new AsyncMapIterator(this,rp).serial()},_d.prototype.flatmap=function(rp){return new FlatmapIterator(this,rp)},_d.prototype.forEachAsync=function(rp){return __awaiter$6(this,void 0,void 0,function(){return __generator$6(this,function(np){return[2,this.map(rp).resolveFully()]})})},_d.prototype.serialForEach=function(rp){return __awaiter$6(this,void 0,void 0,function(){return __generator$6(this,function(np){return[2,this.serialMapAsync(rp).resolveWhile(function(ap){return ap===!0})]})})},_d.prototype.rowMajorBatch=function(rp,np){return np===void 0&&(np=!0),new RowMajorBatchIterator(this,rp,np)},_d.prototype.columnMajorBatch=function(rp,np,ap){return np===void 0&&(np=!0),ap===void 0&&(ap=zipToList),this.rowMajorBatch(rp,np).map(function(sp){return deepZip(sp,ap)})},_d.prototype.concatenate=function(rp,np){return new ChainedIterator(iteratorFromItems([this,rp]),np)},_d.prototype.take=function(rp){return rp<0||rp==null?this:new TakeIterator(this,rp)},_d.prototype.skip=function(rp){return rp<0||rp==null?this:new SkipIterator(this,rp)},_d.prototype.prefetch=function(rp){return new PrefetchIterator(this,rp)},_d.prototype.shuffle=function(rp,np){return new ShuffleIterator(this,rp,np)},_d.prototype.serial=function(){return new SerialIterator(this)},_d}(),ArrayIterator=function(_d){function rp(np){var ap=_d.call(this)||this;return ap.items=np,ap.trav=0,ap}return __extends$g(rp,_d),rp.prototype.summary=function(){return"Array of "+this.items.length+" items"},rp.prototype.next=function(){return __awaiter$6(this,void 0,void 0,function(){var np;return __generator$6(this,function(ap){return this.trav>=this.items.length?[2,{value:null,done:!0}]:(np=this.items[this.trav],this.trav++,[2,{value:deepClone(np),done:!1}])})})},rp}(LazyIterator),FunctionCallIterator=function(_d){function rp(np){var ap=_d.call(this)||this;return ap.nextFn=np,ap}return __extends$g(rp,_d),rp.prototype.summary=function(){return"Function call"},rp.prototype.next=function(){return __awaiter$6(this,void 0,void 0,function(){return __generator$6(this,function(np){try{return[2,this.nextFn()]}catch(ap){throw ap.message="Error thrown while iterating through a dataset: "+ap.message,ap}return[2]})})},rp}(LazyIterator),SerialIterator=function(_d){function rp(np){var ap=_d.call(this)||this;return ap.upstream=np,ap.lastRead=Promise.resolve({value:null,done:!1}),ap}return __extends$g(rp,_d),rp.prototype.summary=function(){return this.upstream.summary()+" -> Serial"},rp.prototype.next=function(){return __awaiter$6(this,void 0,void 0,function(){var np=this;return __generator$6(this,function(ap){return this.lastRead=this.lastRead.then(function(){return np.serialNext()}),[2,this.lastRead]})})},rp.prototype.serialNext=function(){return __awaiter$6(this,void 0,void 0,function(){return __generator$6(this,function(np){return[2,this.upstream.next()]})})},rp}(LazyIterator),SkipIterator=function(_d){function rp(np,ap){var sp=_d.call(this)||this;return sp.upstream=np,sp.maxCount=ap,sp.count=0,sp.lastRead=Promise.resolve({value:null,done:!1}),sp}return __extends$g(rp,_d),rp.prototype.summary=function(){return this.upstream.summary()+" -> Skip"},rp.prototype.next=function(){return __awaiter$6(this,void 0,void 0,function(){var np=this;return __generator$6(this,function(ap){return this.lastRead=this.lastRead.then(function(){return np.serialNext()}),[2,this.lastRead]})})},rp.prototype.serialNext=function(){return __awaiter$6(this,void 0,void 0,function(){var np;return __generator$6(this,function(ap){switch(ap.label){case 0:return this.count++<this.maxCount?[4,this.upstream.next()]:[3,2];case 1:return(np=ap.sent()).done?[2,np]:(Xe(np.value),[3,0]);case 2:return[2,this.upstream.next()]}})})},rp}(LazyIterator),TakeIterator=function(_d){function rp(np,ap){var sp=_d.call(this)||this;return sp.upstream=np,sp.maxCount=ap,sp.count=0,sp}return __extends$g(rp,_d),rp.prototype.summary=function(){return this.upstream.summary()+" -> Take"},rp.prototype.next=function(){return __awaiter$6(this,void 0,void 0,function(){return __generator$6(this,function(np){return this.count++>=this.maxCount?[2,{value:null,done:!0}]:[2,this.upstream.next()]})})},rp}(LazyIterator),RowMajorBatchIterator=function(_d){function rp(np,ap,sp){sp===void 0&&(sp=!0);var lp=_d.call(this)||this;return lp.upstream=np,lp.batchSize=ap,lp.enableSmallLastBatch=sp,lp.lastRead=Promise.resolve({value:null,done:!1}),lp}return __extends$g(rp,_d),rp.prototype.summary=function(){return this.upstream.summary()+" -> RowMajorBatch"},rp.prototype.next=function(){return __awaiter$6(this,void 0,void 0,function(){var np=this;return __generator$6(this,function(ap){return this.lastRead=this.lastRead.then(function(){return np.serialNext()}),[2,this.lastRead]})})},rp.prototype.serialNext=function(){return __awaiter$6(this,void 0,void 0,function(){var np,ap;return __generator$6(this,function(sp){switch(sp.label){case 0:np=[],sp.label=1;case 1:return np.length<this.batchSize?[4,this.upstream.next()]:[3,3];case 2:return(ap=sp.sent()).done?this.enableSmallLastBatch&&np.length>0?[2,{value:np,done:!1}]:[2,{value:null,done:!0}]:(np.push(ap.value),[3,1]);case 3:return[2,{value:np,done:!1}]}})})},rp}(LazyIterator),FilterIterator=function(_d){function rp(np,ap){var sp=_d.call(this)||this;return sp.upstream=np,sp.predicate=ap,sp.lastRead=Promise.resolve({value:null,done:!1}),sp}return __extends$g(rp,_d),rp.prototype.summary=function(){return this.upstream.summary()+" -> Filter"},rp.prototype.next=function(){return __awaiter$6(this,void 0,void 0,function(){var np=this;return __generator$6(this,function(ap){return this.lastRead=this.lastRead.then(function(){return np.serialNext()}),[2,this.lastRead]})})},rp.prototype.serialNext=function(){return __awaiter$6(this,void 0,void 0,function(){var np;return __generator$6(this,function(ap){switch(ap.label){case 0:return[4,this.upstream.next()];case 1:return(np=ap.sent()).done||this.predicate(np.value)?[2,np]:(Xe(np.value),[3,0]);case 2:return[2]}})})},rp}(LazyIterator),MapIterator=function(_d){function rp(np,ap){var sp=_d.call(this)||this;return sp.upstream=np,sp.transform=ap,sp}return __extends$g(rp,_d),rp.prototype.summary=function(){return this.upstream.summary()+" -> Map"},rp.prototype.next=function(){return __awaiter$6(this,void 0,void 0,function(){var np,ap,sp,lp,up,cp,dp;return __generator$6(this,function(fp){switch(fp.label){case 0:return[4,this.upstream.next()];case 1:if((np=fp.sent()).done)return[2,{value:null,done:!0}];for(ap=At.getTensorsInContainer(np.value),sp=this.transform(np.value),lp=At.getTensorsInContainer(sp),up=0,cp=ap;up<cp.length;up++)dp=cp[up],At.isTensorInList(dp,lp)||dp.dispose();return[2,{value:sp,done:!1}]}})})},rp}(LazyIterator),ErrorHandlingLazyIterator=function(_d){function rp(np,ap){var sp=_d.call(this)||this;return sp.upstream=np,sp.handler=ap,sp.count=0,sp.lastRead=Promise.resolve({value:null,done:!1}),sp}return __extends$g(rp,_d),rp.prototype.summary=function(){return this.upstream.summary()+" -> handleErrors"},rp.prototype.next=function(){return __awaiter$6(this,void 0,void 0,function(){var np=this;return __generator$6(this,function(ap){return this.lastRead=this.lastRead.then(function(){return np.serialNext()}),[2,this.lastRead]})})},rp.prototype.serialNext=function(){return __awaiter$6(this,void 0,void 0,function(){var np;return __generator$6(this,function(ap){switch(ap.label){case 0:ap.label=1;case 1:return ap.trys.push([1,3,,4]),[4,this.upstream.next()];case 2:return[2,ap.sent()];case 3:return np=ap.sent(),this.handler(np)?[3,4]:[2,{value:null,done:!0}];case 4:return[3,0];case 5:return[2]}})})},rp}(LazyIterator),AsyncMapIterator=function(_d){function rp(np,ap){var sp=_d.call(this)||this;return sp.upstream=np,sp.transform=ap,sp}return __extends$g(rp,_d),rp.prototype.summary=function(){return this.upstream.summary()+" -> AsyncMap"},rp.prototype.next=function(){return __awaiter$6(this,void 0,void 0,function(){var np,ap,sp,lp,up,cp,dp;return __generator$6(this,function(fp){switch(fp.label){case 0:return[4,this.upstream.next()];case 1:return(np=fp.sent()).done?[2,{value:null,done:!0}]:(ap=At.getTensorsInContainer(np.value),[4,this.transform(np.value)]);case 2:for(sp=fp.sent(),lp=At.getTensorsInContainer(sp),up=0,cp=ap;up<cp.length;up++)dp=cp[up],At.isTensorInList(dp,lp)||dp.dispose();return[2,{value:sp,done:!1}]}})})},rp}(LazyIterator),OneToManyIterator=function(_d){function rp(){var np=_d.call(this)||this;return np.outputQueue=new GrowingRingBuffer,np.lastRead=Promise.resolve({value:null,done:!1}),np}return __extends$g(rp,_d),rp.prototype.next=function(){return __awaiter$6(this,void 0,void 0,function(){var np=this;return __generator$6(this,function(ap){return this.lastRead=this.lastRead.then(function(){return np.serialNext()}),[2,this.lastRead]})})},rp.prototype.serialNext=function(){return __awaiter$6(this,void 0,void 0,function(){return __generator$6(this,function(np){switch(np.label){case 0:return this.outputQueue.length()!==0?[3,2]:[4,this.pump()];case 1:return np.sent()?[3,0]:[2,{value:null,done:!0}];case 2:return[2,{value:this.outputQueue.shift(),done:!1}]}})})},rp}(LazyIterator),FlatmapIterator=function(_d){function rp(np,ap){var sp=_d.call(this)||this;return sp.upstream=np,sp.transform=ap,sp}return __extends$g(rp,_d),rp.prototype.summary=function(){return this.upstream.summary()+" -> Flatmap"},rp.prototype.pump=function(){return __awaiter$6(this,void 0,void 0,function(){var np,ap,sp,lp,up,cp,dp;return __generator$6(this,function(fp){switch(fp.label){case 0:return[4,this.upstream.next()];case 1:if((np=fp.sent()).done)return[2,!1];for(ap=At.getTensorsInContainer(np.value),sp=this.transform(np.value),lp=At.getTensorsInContainer(sp),this.outputQueue.pushAll(sp),up=0,cp=ap;up<cp.length;up++)dp=cp[up],At.isTensorInList(dp,lp)||dp.dispose();return[2,!0]}})})},rp}(OneToManyIterator),ChainedIterator=function(_d){function rp(np,ap){var sp=_d.call(this)||this;return sp.baseErrorHandler=ap,sp.lastRead=null,sp.iterator=null,sp.moreIterators=np,sp}return __extends$g(rp,_d),rp.prototype.summary=function(){return"TODO: fill in upstream of chained summaries -> Chained"},rp.prototype.next=function(){return __awaiter$6(this,void 0,void 0,function(){return __generator$6(this,function(np){return this.lastRead=this.readFromChain(this.lastRead),[2,this.lastRead]})})},rp.prototype.readFromChain=function(np){return __awaiter$6(this,void 0,void 0,function(){var ap,sp;return __generator$6(this,function(lp){switch(lp.label){case 0:return[4,np];case 1:return lp.sent(),this.iterator!=null?[3,3]:[4,this.moreIterators.next()];case 2:if((ap=lp.sent()).done)return[2,{value:null,done:!0}];this.iterator=ap.value,this.baseErrorHandler!=null&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler)),lp.label=3;case 3:return[4,this.iterator.next()];case 4:return(sp=lp.sent()).done?(this.iterator=null,[2,this.readFromChain(np)]):[2,sp]}})})},rp}(LazyIterator);(function(_d){_d[_d.FAIL=0]="FAIL",_d[_d.SHORTEST=1]="SHORTEST",_d[_d.LONGEST=2]="LONGEST"})(ZipMismatchMode||(ZipMismatchMode={}));var ZipIterator=function(_d){function rp(np,ap){ap===void 0&&(ap=ZipMismatchMode.FAIL);var sp=_d.call(this)||this;return sp.iterators=np,sp.mismatchMode=ap,sp.count=0,sp.currentPromise=null,sp}return __extends$g(rp,_d),rp.prototype.summary=function(){return"{TODO: fill in upstream of zip summaries} -> Zip"},rp.prototype.nextState=function(np){return __awaiter$6(this,void 0,void 0,function(){function ap(cp){return cp instanceof LazyIterator?{value:cp.next().then(function(dp){return sp++,dp.done&&lp++,dp.value}),recurse:!1}:{value:null,recurse:!0}}var sp,lp,up;return __generator$6(this,function(cp){switch(cp.label){case 0:return[4,np];case 1:return cp.sent(),sp=0,lp=0,[4,deepMapAndAwaitAll(this.iterators,ap)];case 2:if(up=cp.sent(),sp===lp)return[2,{value:null,done:!0}];if(lp>0)switch(this.mismatchMode){case ZipMismatchMode.FAIL:throw new Error("Zipped streams should have the same length. Mismatched at element "+this.count+".");case ZipMismatchMode.SHORTEST:return[2,{value:null,done:!0}];case ZipMismatchMode.LONGEST:}return this.count++,[2,{value:up,done:!1}]}})})},rp.prototype.next=function(){return __awaiter$6(this,void 0,void 0,function(){return __generator$6(this,function(np){return this.currentPromise=this.nextState(this.currentPromise),[2,this.currentPromise]})})},rp}(LazyIterator),PrefetchIterator=function(_d){function rp(np,ap){var sp=_d.call(this)||this;return sp.upstream=np,sp.bufferSize=ap,sp.buffer=new RingBuffer(ap),sp}return __extends$g(rp,_d),rp.prototype.summary=function(){return this.upstream.summary()+" -> Prefetch"},rp.prototype.refill=function(){for(;!this.buffer.isFull();){var np=this.upstream.next();this.buffer.push(np)}},rp.prototype.next=function(){return this.refill(),this.buffer.shift()},rp}(LazyIterator),ShuffleIterator=function(_d){function rp(np,ap,sp){var lp=_d.call(this,np,ap)||this;return lp.upstream=np,lp.windowSize=ap,lp.upstreamExhausted=!1,lp.random=seedrandom_1(sp||tt.now().toString()),lp.lastRead=Promise.resolve({value:null,done:!1}),lp}return __extends$g(rp,_d),rp.prototype.next=function(){return __awaiter$6(this,void 0,void 0,function(){var np=this;return __generator$6(this,function(ap){return this.lastRead=this.lastRead.then(function(){return np.serialNext()}),[2,this.lastRead]})})},rp.prototype.randomInt=function(np){return Math.floor(this.random()*np)},rp.prototype.chooseIndex=function(){return this.randomInt(this.buffer.length())},rp.prototype.serialNext=function(){return __awaiter$6(this,void 0,void 0,function(){var np,ap;return __generator$6(this,function(sp){switch(sp.label){case 0:this.upstreamExhausted||this.refill(),sp.label=1;case 1:return this.buffer.isEmpty()?[3,3]:(np=this.chooseIndex(),[4,this.buffer.shuffleExcise(np)]);case 2:return(ap=sp.sent()).done?(this.upstreamExhausted=!0,[3,1]):(this.refill(),[2,ap]);case 3:return[2,{value:null,done:!0}]}})})},rp}(PrefetchIterator),Dataset=function(){function _d(){this.size=null}return _d.prototype.batch=function(rp,np){var ap=this;np===void 0&&(np=!0);var sp=this;return tt.assert(rp>0,function(){return`batchSize needs to be positive, but it is
      `+rp}),datasetFromIteratorFn(function(){return __awaiter$6(ap,void 0,void 0,function(){return __generator$6(this,function(lp){switch(lp.label){case 0:return[4,sp.iterator()];case 1:return[2,lp.sent().columnMajorBatch(rp,np,deepBatchConcat)]}})})},this.size===1/0||this.size==null?this.size:np?Math.ceil(this.size/rp):Math.floor(this.size/rp))},_d.prototype.concatenate=function(rp){var np=this,ap=this;return datasetFromIteratorFn(function(){return __awaiter$6(np,void 0,void 0,function(){var sp,lp;return __generator$6(this,function(up){switch(up.label){case 0:return[4,ap.iterator()];case 1:return lp=(sp=up.sent()).concatenate,[4,rp.iterator()];case 2:return[2,lp.apply(sp,[up.sent()])]}})})},this.size===1/0||rp.size===1/0?1/0:this.size!=null&&rp.size!=null?this.size+rp.size:null)},_d.prototype.filter=function(rp){var np=this,ap=this;return datasetFromIteratorFn(function(){return __awaiter$6(np,void 0,void 0,function(){return __generator$6(this,function(sp){switch(sp.label){case 0:return[4,ap.iterator()];case 1:return[2,sp.sent().filter(function(lp){return je(function(){return rp(lp)})})]}})})},this.size===1/0?1/0:null)},_d.prototype.forEachAsync=function(rp){return __awaiter$6(this,void 0,void 0,function(){return __generator$6(this,function(np){switch(np.label){case 0:return[4,this.iterator()];case 1:return[2,np.sent().forEachAsync(rp)]}})})},_d.prototype.forEach=function(rp){return __awaiter$6(this,void 0,void 0,function(){return __generator$6(this,function(np){return ze("dataset.forEach() is deprecated and will be removed. Please use dataset.forEachAsync() instead"),[2,this.forEachAsync(rp)]})})},_d.prototype.map=function(rp){var np=this,ap=this;return datasetFromIteratorFn(function(){return __awaiter$6(np,void 0,void 0,function(){return __generator$6(this,function(sp){switch(sp.label){case 0:return[4,ap.iterator()];case 1:return[2,sp.sent().map(function(lp){return je(function(){return rp(lp)})})]}})})},this.size)},_d.prototype.mapAsync=function(rp){var np=this,ap=this;return datasetFromIteratorFn(function(){return __awaiter$6(np,void 0,void 0,function(){return __generator$6(this,function(sp){switch(sp.label){case 0:return[4,ap.iterator()];case 1:return[2,sp.sent().mapAsync(rp)]}})})},this.size)},_d.prototype.prefetch=function(rp){var np=this;if(rp==null)throw new RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");var ap=this;return datasetFromIteratorFn(function(){return __awaiter$6(np,void 0,void 0,function(){return __generator$6(this,function(sp){switch(sp.label){case 0:return[4,ap.iterator()];case 1:return[2,sp.sent().prefetch(rp)]}})})},this.size)},_d.prototype.repeat=function(rp){var np=this,ap=this;return datasetFromIteratorFn(function(){return __awaiter$6(np,void 0,void 0,function(){var sp=this;return __generator$6(this,function(lp){return[2,iteratorFromConcatenated(iteratorFromFunction(function(){return __awaiter$6(sp,void 0,void 0,function(){var up;return __generator$6(this,function(cp){switch(cp.label){case 0:return up={},[4,ap.iterator()];case 1:return[2,(up.value=cp.sent(),up.done=!1,up)]}})})}).take(rp))]})})},this.size!=null&&rp>0?this.size*rp:rp===0?0:this.size!=null&&(rp===void 0||rp<0)?1/0:null)},_d.prototype.skip=function(rp){var np=this,ap=this;return datasetFromIteratorFn(function(){return __awaiter$6(np,void 0,void 0,function(){return __generator$6(this,function(sp){switch(sp.label){case 0:return[4,ap.iterator()];case 1:return[2,sp.sent().skip(rp)]}})})},this.size!=null&&rp>=0&&this.size>=rp?this.size-rp:this.size!=null&&(this.size<rp||rp===void 0||rp<0)?0:null)},_d.prototype.shuffle=function(rp,np,ap){var sp=this;if(ap===void 0&&(ap=!0),rp==null||rp<0)throw this.size==null?new RangeError("`Dataset.shuffle()` requires bufferSize to be specified."):new RangeError("`Dataset.shuffle()` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for `tf.Tensor`s), consider setting bufferSize to the dataset size ("+this.size+" elements)");var lp=this,up=seedrandom_1(np||tt.now().toString());return datasetFromIteratorFn(function(){return __awaiter$6(sp,void 0,void 0,function(){var cp;return __generator$6(this,function(dp){switch(dp.label){case 0:return cp=up.int32(),ap&&(cp+=up.int32()),[4,lp.iterator()];case 1:return[2,dp.sent().shuffle(rp,cp.toString())]}})})},this.size)},_d.prototype.take=function(rp){var np=this,ap=this;return datasetFromIteratorFn(function(){return __awaiter$6(np,void 0,void 0,function(){return __generator$6(this,function(sp){switch(sp.label){case 0:return[4,ap.iterator()];case 1:return[2,sp.sent().take(rp)]}})})},this.size!=null&&this.size>rp?rp:this.size!=null&&this.size<=rp?this.size:null)},_d.prototype.toArray=function(){return __awaiter$6(this,void 0,void 0,function(){return __generator$6(this,function(rp){switch(rp.label){case 0:if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return[4,this.iterator()];case 1:return[2,rp.sent().toArray()]}})})},_d.prototype.toArrayForTest=function(){return __awaiter$6(this,void 0,void 0,function(){return __generator$6(this,function(rp){switch(rp.label){case 0:if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return[4,this.iterator()];case 1:return[2,rp.sent().toArrayForTest()]}})})},_d.MAX_BUFFER_SIZE=1e4,_d}();function datasetFromIteratorFn(_d,rp){return rp===void 0&&(rp=null),new(function(np){function ap(){var sp=np!==null&&np.apply(this,arguments)||this;return sp.size=rp,sp}return __extends$g(ap,np),ap.prototype.iterator=function(){return __awaiter$6(this,void 0,void 0,function(){return __generator$6(this,function(sp){return[2,_d()]})})},ap}(Dataset))}function array(_d){var rp=this;return datasetFromIteratorFn(function(){return __awaiter$6(rp,void 0,void 0,function(){return __generator$6(this,function(np){return[2,iteratorFromItems(_d)]})})},_d.length)}function zip(_d){var rp,np=this;if(!isIterable(_d))throw new Error("The argument to zip() must be an object or array.");if(Array.isArray(_d))for(var ap=0;ap<_d.length;ap++)rp=rp==null?_d[ap].size:Math.min(rp,_d[ap].size);else if(_d instanceof Object)for(var sp in _d)rp=rp==null?_d[sp].size:Math.min(rp,_d[sp].size);return datasetFromIteratorFn(function(){return __awaiter$6(np,void 0,void 0,function(){return __generator$6(this,function(lp){switch(lp.label){case 0:return[4,deepMapAndAwaitAll(_d,function(up){if(up instanceof Dataset)return{value:up.iterator(),recurse:!1};if(isIterable(up))return{value:null,recurse:!0};throw new Error("Leaves of the structure passed to zip() must be Datasets, not primitives.")})];case 1:return[2,iteratorFromZipped(lp.sent(),ZipMismatchMode.SHORTEST)]}})})},rp)}function deepBatchConcat(_d){return _d===null?null:canTensorify(_d[0])?{value:batchConcat(_d),recurse:!1}:{value:null,recurse:!0}}function batchConcat(_d){if(_d.length===0)throw new Error("Can't make a batch of zero elements.");return _d[0]instanceof dt?Tr(_d):kn(_d)}var TextLineDataset=function(_d){function rp(np){var ap=_d.call(this)||this;return ap.input=np,ap}return __extends$g(rp,_d),rp.prototype.iterator=function(){return __awaiter$6(this,void 0,void 0,function(){var np,ap;return __generator$6(this,function(sp){switch(sp.label){case 0:return[4,this.input.iterator()];case 1:return np=sp.sent(),ap=np.decodeUTF8(),[2,ap.split(`
`).map(function(lp){return lp.endsWith("\r")&&(lp=lp.slice(0,-1)),lp})]}})})},rp}(Dataset),CODE_QUOTE='"',STATE_OUT=Symbol("out"),STATE_FIELD=Symbol("field"),STATE_QUOTE=Symbol("quote"),STATE_QUOTE_AFTER_QUOTE=Symbol("quoteafterquote"),STATE_WITHIN_QUOTE_IN_QUOTE=Symbol("quoteinquote"),CSVDataset=function(_d){function rp(np,ap){var sp=_d.call(this)||this;return sp.input=np,sp.hasHeader=!0,sp.fullColumnNames=null,sp.columnNamesValidated=!1,sp.columnConfigs=null,sp.configuredColumnsOnly=!1,sp.delimiter=",",sp.delimWhitespace=!1,sp.base=new TextLineDataset(np),ap||(ap={}),sp.hasHeader=ap.hasHeader!==!1,sp.fullColumnNames=ap.columnNames,sp.columnConfigs=ap.columnConfigs,sp.configuredColumnsOnly=ap.configuredColumnsOnly,ap.delimWhitespace?(tt.assert(ap.delimiter==null,function(){return"Delimiter should not be provided when delimWhitespace is true."}),sp.delimWhitespace=!0,sp.delimiter=" "):sp.delimiter=ap.delimiter?ap.delimiter:",",sp}return __extends$g(rp,_d),rp.prototype.columnNames=function(){return __awaiter$6(this,void 0,void 0,function(){return __generator$6(this,function(np){switch(np.label){case 0:return this.columnNamesValidated?[3,2]:[4,this.setColumnNames()];case 1:np.sent(),np.label=2;case 2:return[2,this.configuredColumnsOnly?Object.keys(this.columnConfigs):this.fullColumnNames]}})})},rp.prototype.setColumnNames=function(){return __awaiter$6(this,void 0,void 0,function(){var np,ap,sp,lp,up,cp,dp=this;return __generator$6(this,function(fp){switch(fp.label){case 0:return[4,this.maybeReadHeaderLine()];case 1:if(np=fp.sent(),!this.fullColumnNames&&!np)throw new Error("Column names must be provided if there is no header line.");if(this.fullColumnNames&&np&&tt.assert(np.length===this.fullColumnNames.length,function(){return"The length of provided columnNames ("+dp.fullColumnNames.length.toString()+") does not match the length of the header line read from file ("+np.length.toString()+")."}),this.fullColumnNames||(this.fullColumnNames=np),ap=this.fullColumnNames.reduce(function(pp,hp){return pp[hp]=pp[hp]+1||1,pp},{}),sp=Object.keys(ap).filter(function(pp){return ap[pp]>1}),tt.assert(sp.length===0,function(){return"Duplicate column names found: "+sp.toString()}),this.columnConfigs){for(lp=0,up=Object.keys(this.columnConfigs);lp<up.length;lp++)if(cp=up[lp],this.fullColumnNames.indexOf(cp)===-1)throw new Error('The key "'+cp+'" provided in columnConfigs does not match any of the column names ('+this.fullColumnNames.toString()+").")}return this.columnNamesValidated=!0,[2]}})})},rp.prototype.maybeReadHeaderLine=function(){return __awaiter$6(this,void 0,void 0,function(){var np,ap;return __generator$6(this,function(sp){switch(sp.label){case 0:return this.hasHeader?[4,this.base.iterator()]:[3,3];case 1:return[4,sp.sent().next()];case 2:if((np=sp.sent()).done)throw new Error("No data was found for CSV parsing.");return ap=np.value,[2,this.parseRow(ap,!1)];case 3:return[2,null]}})})},rp.prototype.iterator=function(){return __awaiter$6(this,void 0,void 0,function(){var np,ap=this;return __generator$6(this,function(sp){switch(sp.label){case 0:return this.columnNamesValidated?[3,2]:[4,this.setColumnNames()];case 1:sp.sent(),sp.label=2;case 2:return[4,this.base.iterator()];case 3:return np=sp.sent(),this.hasHeader&&(np=np.skip(1)),[2,np.map(function(lp){return ap.makeDataElement(lp)})]}})})},rp.prototype.makeDataElement=function(np){for(var ap=this.parseRow(np),sp={},lp={},up=0;up<this.fullColumnNames.length;up++){var cp=this.fullColumnNames[up],dp=this.columnConfigs?this.columnConfigs[cp]:null;if(!this.configuredColumnsOnly||dp){var fp=ap[up],pp=null;if(fp==="")if(dp&&dp.default!==void 0)pp=dp.default;else{if(dp&&(dp.required||dp.isLabel))throw new Error("Required column "+cp+" is empty in this line: "+np);pp=void 0}else{var hp=Number(fp);if(isNaN(hp))pp=dp&&dp.dtype==="bool"?this.getBoolean(fp):fp;else if(dp&&dp.dtype)switch(dp.dtype){case"float32":pp=hp;break;case"int32":pp=Math.floor(hp);break;case"bool":pp=this.getBoolean(fp);break;default:pp=hp}else pp=hp}dp&&dp.isLabel?lp[cp]=pp:sp[cp]=pp}}return Object.keys(lp).length===0?sp:{xs:sp,ys:lp}},rp.prototype.getBoolean=function(np){return np==="1"||np.toLowerCase()==="true"?1:0},rp.prototype.parseRow=function(np,ap){ap===void 0&&(ap=!0);for(var sp=[],lp=0,up=np.length,cp=STATE_OUT,dp=0;dp<up;dp++)switch(cp){case STATE_OUT:switch(np.charAt(dp)){case CODE_QUOTE:lp=dp+1,cp=STATE_QUOTE;break;case this.delimiter:if(lp=dp+1,this.delimiter===" "&&this.delimWhitespace)break;sp.push(""),cp=STATE_OUT;break;default:cp=STATE_FIELD,lp=dp}break;case STATE_FIELD:switch(np.charAt(dp)){case this.delimiter:sp.push(np.substring(lp,dp)),cp=STATE_OUT,lp=dp+1}break;case STATE_QUOTE:switch(np.charAt(dp)){case CODE_QUOTE:cp=STATE_QUOTE_AFTER_QUOTE}break;case STATE_QUOTE_AFTER_QUOTE:switch(np.charAt(dp)){case this.delimiter:sp.push(np.substring(lp,dp-1)),cp=STATE_OUT,lp=dp+1;break;case CODE_QUOTE:cp=STATE_QUOTE;break;default:cp=STATE_WITHIN_QUOTE_IN_QUOTE}break;case STATE_WITHIN_QUOTE_IN_QUOTE:switch(np.charAt(dp)){case CODE_QUOTE:cp=STATE_QUOTE}}if(cp===STATE_QUOTE_AFTER_QUOTE?sp.push(np.substring(lp,up-1)):sp.push(np.substring(lp)),ap&&sp.length!==this.fullColumnNames.length)throw new Error("Invalid row in csv file. Should have "+this.fullColumnNames.length+" elements in a row, but got "+sp);return sp},rp}(Dataset),MicrophoneIterator=function(_d){function rp(np){var ap=_d.call(this)||this;ap.microphoneConfig=np,ap.isClosed=!1,ap.fftSize=np.fftSize||1024;var sp=Math.log2(ap.fftSize);if(ap.fftSize<0||sp<4||sp>14||!Number.isInteger(sp))throw new Error("Invalid fftSize: it must be a power of 2 between 2 to 4 and 2 to 14, but got "+ap.fftSize);if(ap.numFrames=np.numFramesPerSpectrogram||43,ap.sampleRateHz=np.sampleRateHz,ap.columnTruncateLength=np.columnTruncateLength||ap.fftSize,ap.audioTrackConstraints=np.audioTrackConstraints,ap.smoothingTimeConstant=np.smoothingTimeConstant||0,ap.includeSpectrogram=np.includeSpectrogram!==!1,ap.includeWaveform=np.includeWaveform===!0,!ap.includeSpectrogram&&!ap.includeWaveform)throw new Error("Both includeSpectrogram and includeWaveform are false. At least one type of data should be returned.");return ap}return __extends$g(rp,_d),rp.prototype.summary=function(){return"microphone"},rp.create=function(np){return np===void 0&&(np={}),__awaiter$6(this,void 0,void 0,function(){var ap;return __generator$6(this,function(sp){switch(sp.label){case 0:if(a$1().get("IS_NODE"))throw new Error("microphone API is only supported in browser environment.");return[4,(ap=new rp(np)).start()];case 1:return sp.sent(),[2,ap]}})})},rp.prototype.start=function(){return __awaiter$6(this,void 0,void 0,function(){var np,ap,sp,lp;return __generator$6(this,function(up){switch(up.label){case 0:return up.trys.push([0,2,,3]),np=this,[4,navigator.mediaDevices.getUserMedia({audio:this.audioTrackConstraints==null||this.audioTrackConstraints,video:!1})];case 1:return np.stream=up.sent(),[3,3];case 2:throw ap=up.sent(),new Error("Error thrown while initializing video stream: "+ap.message);case 3:if(!this.stream)throw new Error("Could not obtain audio from microphone.");if(sp=window.AudioContext||window.webkitAudioContext,this.audioContext=new sp,this.sampleRateHz){if(this.audioContext.sampleRate!==this.sampleRateHz)throw new Error("Mismatch in sampling rate: Expected: "+this.sampleRateHz+"; Actual: "+this.audioContext.sampleRate)}else this.sampleRateHz=this.audioContext.sampleRate;return lp=this.audioContext.createMediaStreamSource(this.stream),this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=2*this.fftSize,this.analyser.smoothingTimeConstant=this.smoothingTimeConstant,lp.connect(this.analyser),this.freqData=new Float32Array(this.fftSize),this.timeData=new Float32Array(this.fftSize),[2]}})})},rp.prototype.next=function(){return __awaiter$6(this,void 0,void 0,function(){var np,ap,sp,lp,up;return __generator$6(this,function(cp){switch(cp.label){case 0:return this.isClosed?[2,{value:null,done:!0}]:[4,this.getAudioData()];case 1:return sp=cp.sent(),this.includeSpectrogram&&(lp=this.flattenQueue(sp.freqDataQueue),np=this.getTensorFromAudioDataArray(lp,[this.numFrames,this.columnTruncateLength,1])),this.includeWaveform&&(up=this.flattenQueue(sp.timeDataQueue),ap=this.getTensorFromAudioDataArray(up,[this.numFrames*this.fftSize,1])),[2,{value:{spectrogram:np,waveform:ap},done:!1}]}})})},rp.prototype.capture=function(){return __awaiter$6(this,void 0,void 0,function(){return __generator$6(this,function(np){switch(np.label){case 0:return[4,this.next()];case 1:return[2,np.sent().value]}})})},rp.prototype.getAudioData=function(){return __awaiter$6(this,void 0,void 0,function(){var np,ap,sp,lp=this;return __generator$6(this,function(up){return np=[],ap=[],sp=0,[2,new Promise(function(cp){var dp=setInterval(function(){lp.includeSpectrogram&&(lp.analyser.getFloatFrequencyData(lp.freqData),lp.freqData[0]===-1/0&&cp({freqDataQueue:np,timeDataQueue:ap}),np.push(lp.freqData.slice(0,lp.columnTruncateLength))),lp.includeWaveform&&(lp.analyser.getFloatTimeDomainData(lp.timeData),ap.push(lp.timeData.slice())),++sp===lp.numFrames&&(clearInterval(dp),cp({freqDataQueue:np,timeDataQueue:ap}))},lp.fftSize/lp.sampleRateHz*1e3)})]})})},rp.prototype.stop=function(){this.isClosed||(this.isClosed=!0,this.analyser.disconnect(),this.audioContext.close(),this.stream!=null&&this.stream.getTracks().length>0&&this.stream.getTracks()[0].stop())},rp.prototype.toArray=function(){throw new Error("Can not convert infinite audio stream to array.")},rp.prototype.getSampleRate=function(){return this.sampleRateHz},rp.prototype.flattenQueue=function(np){var ap=np[0].length,sp=new Float32Array(np.length*ap);return np.forEach(function(lp,up){return sp.set(lp,up*ap)}),sp},rp.prototype.getTensorFromAudioDataArray=function(np,ap){var sp=new Float32Array(tt.sizeFromShape(ap));return sp.set(np,sp.length-np.length),kn(sp,ap)},rp}(LazyIterator),WebcamIterator=function(_d){function rp(np,ap){var sp=_d.call(this)||this;if(sp.webcamVideoElement=np,sp.webcamConfig=ap,sp.isClosed=!0,sp.resize=!1,sp.needToResize())if(sp.resize=!0,sp.cropSize=[sp.webcamConfig.resizeHeight,sp.webcamConfig.resizeWidth],sp.cropBoxInd=Dn([0],"int32"),sp.webcamConfig.centerCrop){var lp=1*sp.webcamConfig.resizeWidth/sp.webcamVideoElement.width,up=1*sp.webcamConfig.resizeHeight/sp.webcamVideoElement.height,cp=(1-lp)/2,dp=(1-up)/2,fp=cp+lp,pp=up+dp;sp.cropBox=Tn([dp,cp,pp,fp],[1,4])}else sp.cropBox=Tn([0,0,1,1],[1,4]);return sp}return __extends$g(rp,_d),rp.prototype.summary=function(){return"webcam"},rp.create=function(np,ap){return ap===void 0&&(ap={}),__awaiter$6(this,void 0,void 0,function(){var sp;return __generator$6(this,function(lp){switch(lp.label){case 0:if(a$1().get("IS_NODE"))throw new Error("tf.data.webcam is only supported in browser environment.");if(!np){if(np=document.createElement("video"),!ap.resizeWidth||!ap.resizeHeight)throw new Error("Please provide webcam video element, or resizeWidth and resizeHeight to create a hidden video element.");np.width=ap.resizeWidth,np.height=ap.resizeHeight}return[4,(sp=new rp(np,ap)).start()];case 1:return lp.sent(),[2,sp]}})})},rp.prototype.start=function(){return __awaiter$6(this,void 0,void 0,function(){var np,ap,sp=this;return __generator$6(this,function(lp){switch(lp.label){case 0:this.webcamConfig.facingMode&&tt.assert(this.webcamConfig.facingMode==="user"||this.webcamConfig.facingMode==="environment",function(){return"Invalid webcam facing mode: "+sp.webcamConfig.facingMode+". Please provide 'user' or 'environment'"}),lp.label=1;case 1:return lp.trys.push([1,3,,4]),np=this,[4,navigator.mediaDevices.getUserMedia({video:{deviceId:this.webcamConfig.deviceId,facingMode:this.webcamConfig.facingMode?this.webcamConfig.facingMode:"user",width:this.webcamVideoElement.width,height:this.webcamVideoElement.height}})];case 2:return np.stream=lp.sent(),[3,4];case 3:throw(ap=lp.sent()).message="Error thrown while initializing video stream: "+ap.message,ap;case 4:if(!this.stream)throw new Error("Could not obtain video from webcam.");try{this.webcamVideoElement.srcObject=this.stream}catch(up){console.log(up),this.webcamVideoElement.src=window.URL.createObjectURL(this.stream)}return this.webcamVideoElement.play(),this.isClosed=!1,[2,new Promise(function(up){sp.webcamVideoElement.onloadedmetadata=function(){up()}})]}})})},rp.prototype.next=function(){return __awaiter$6(this,void 0,void 0,function(){var np;return __generator$6(this,function(ap){if(this.isClosed)return[2,{value:null,done:!0}];try{np=Nf.fromPixels(this.webcamVideoElement)}catch(sp){throw new Error("Error thrown converting video to pixels: "+JSON.stringify(sp))}if(!this.resize)return[2,{value:np,done:!1}];try{return[2,{value:this.cropAndResizeFrame(np),done:!1}]}catch(sp){throw new Error("Error thrown cropping the video: "+sp.message)}finally{np.dispose()}return[2]})})},rp.prototype.needToResize=function(){return!(!this.webcamConfig.resizeWidth||!this.webcamConfig.resizeHeight||this.webcamVideoElement.width===this.webcamConfig.resizeWidth&&this.webcamVideoElement.height===this.webcamConfig.resizeHeight)},rp.prototype.cropAndResizeFrame=function(np){var ap=this;return je(function(){var sp,lp=np.toFloat().expandDims(0),up=(sp=vh.cropAndResize(lp,ap.cropBox,ap.cropBoxInd,ap.cropSize,"bilinear")).shape;return sp.reshape(up.slice(1))})},rp.prototype.capture=function(){return __awaiter$6(this,void 0,void 0,function(){return __generator$6(this,function(np){switch(np.label){case 0:return[4,this.next()];case 1:return[2,np.sent().value]}})})},rp.prototype.stop=function(){this.stream.getTracks().forEach(function(np){return np.stop()});try{this.webcamVideoElement.srcObject=null}catch(np){console.log(np),this.webcamVideoElement.src=null}this.isClosed=!0},rp.prototype.toArray=function(){throw new Error("Can not convert infinite video stream to array.")},rp}(LazyIterator),DataSource=function(){return function(){}}(),StringIterator=function(_d){function rp(){return _d!==null&&_d.apply(this,arguments)||this}return __extends$g(rp,_d),rp.prototype.split=function(np){return new SplitIterator(this,np)},rp}(LazyIterator),SplitIterator=function(_d){function rp(np,ap){var sp=_d.call(this)||this;return sp.upstream=np,sp.impl=new SplitIteratorImpl(np,ap),sp}return __extends$g(rp,_d),rp.prototype.summary=function(){return this.impl.summary()},rp.prototype.next=function(){return __awaiter$6(this,void 0,void 0,function(){return __generator$6(this,function(np){return[2,this.impl.next()]})})},rp}(StringIterator),SplitIteratorImpl=function(_d){function rp(np,ap){var sp=_d.call(this)||this;return sp.upstream=np,sp.separator=ap,sp.carryover="",sp}return __extends$g(rp,_d),rp.prototype.summary=function(){return this.upstream.summary()+" -> Split('"+this.separator+"')"},rp.prototype.pump=function(){return __awaiter$6(this,void 0,void 0,function(){var np,ap,sp,lp,up;return __generator$6(this,function(cp){switch(cp.label){case 0:return[4,this.upstream.next()];case 1:if((np=cp.sent()).done)return this.carryover===""?[2,!1]:(this.outputQueue.push(this.carryover),this.carryover="",[2,!0]);for((ap=np.value.split(this.separator))[0]=this.carryover+ap[0],sp=0,lp=ap.slice(0,-1);sp<lp.length;sp++)up=lp[sp],this.outputQueue.push(up);return this.carryover=ap[ap.length-1],[2,!0]}})})},rp}(OneToManyIterator),ByteChunkIterator=function(_d){function rp(){return _d!==null&&_d.apply(this,arguments)||this}return __extends$g(rp,_d),rp.prototype.decodeUTF8=function(){return new Utf8Iterator(this)},rp}(LazyIterator),Utf8Iterator=function(_d){function rp(np){var ap=_d.call(this)||this;return ap.upstream=np,ap.impl=new Utf8IteratorImpl(np),ap}return __extends$g(rp,_d),rp.prototype.summary=function(){return this.impl.summary()},rp.prototype.next=function(){return __awaiter$6(this,void 0,void 0,function(){return __generator$6(this,function(np){return[2,this.impl.next()]})})},rp}(StringIterator),Utf8IteratorImpl=function(_d){function rp(np){var ap=_d.call(this)||this;if(ap.upstream=np,a$1().get("IS_BROWSER"))ap.decoder=new TextDecoder("utf-8");else{var sp=require("string_decoder").StringDecoder;ap.decoder=new sp("utf8")}return ap}return __extends$g(rp,_d),rp.prototype.summary=function(){return this.upstream.summary()+" -> Utf8"},rp.prototype.pump=function(){return __awaiter$6(this,void 0,void 0,function(){var np,ap,sp;return __generator$6(this,function(lp){switch(lp.label){case 0:return[4,this.upstream.next()];case 1:return(np=lp.sent()).done?[2,!1]:(ap=np.value,sp=a$1().get("IS_BROWSER")?this.decoder.decode(ap,{stream:!0}):this.decoder.write(Buffer.from(ap.buffer)),this.outputQueue.push(sp),[2,!0])}})})},rp}(OneToManyIterator),FileChunkIterator=function(_d){function rp(np,ap){ap===void 0&&(ap={});var sp=_d.call(this)||this;return sp.file=np,sp.options=ap,tt.assert(np instanceof Uint8Array||!!a$1().get("IS_BROWSER")&&(np instanceof File||np instanceof Blob),function(){return"FileChunkIterator only supports File, Blob and Uint8Array right now."}),sp.offset=ap.offset||0,sp.chunkSize=ap.chunkSize||1048576,sp}return __extends$g(rp,_d),rp.prototype.summary=function(){return"FileChunks "+this.file},rp.prototype.next=function(){return __awaiter$6(this,void 0,void 0,function(){var np,ap,sp=this;return __generator$6(this,function(lp){switch(lp.label){case 0:return this.offset>=(this.file instanceof Uint8Array?this.file.byteLength:this.file.size)?[2,{value:null,done:!0}]:(np=new Promise(function(up,cp){var dp=sp.offset+sp.chunkSize;if(sp.file instanceof Uint8Array)up(new Uint8Array(sp.file.slice(sp.offset,dp)));else{var fp=new FileReader;fp.onload=function(hp){var mp=fp.result;if(mp instanceof ArrayBuffer&&(mp=new Uint8Array(mp)),!(mp instanceof Uint8Array))return cp(new TypeError("FileReader returned unknown type."));up(mp)},fp.onabort=function(hp){return cp(new Error("Aborted"))},fp.onerror=function(hp){return cp(new Error(hp.type))};var pp=sp.file.slice(sp.offset,dp);fp.readAsArrayBuffer(pp)}sp.offset=dp}),ap={},[4,np]);case 1:return[2,(ap.value=lp.sent(),ap.done=!1,ap)]}})})},rp}(ByteChunkIterator);function urlChunkIterator(_d,rp){return rp===void 0&&(rp={}),__awaiter$6(this,void 0,void 0,function(){var np,ap,sp,lp,up;return __generator$6(this,function(cp){switch(cp.label){case 0:return typeof _d=="string"?np=_d:(np=_d.url,ap=getRequestInitFromRequest(_d)),[4,tt.fetch(np,ap)];case 1:return(sp=cp.sent()).ok?(up=Uint8Array.bind,[4,sp.arrayBuffer()]):[3,3];case 2:return lp=new(up.apply(Uint8Array,[void 0,cp.sent()])),[2,new FileChunkIterator(lp,rp)];case 3:throw new Error(sp.statusText)}})})}var getRequestInitFromRequest=function(_d){return{method:_d.method,headers:_d.headers,body:_d.body,mode:_d.mode,credentials:_d.credentials,cache:_d.cache,redirect:_d.redirect,referrer:_d.referrer,integrity:_d.integrity}};function isLocalPath(_d){return typeof _d=="string"&&_d.substr(0,7)==="file://"}var FileDataSource=function(_d){function rp(np,ap){ap===void 0&&(ap={});var sp=_d.call(this)||this;return sp.input=np,sp.options=ap,sp}return __extends$g(rp,_d),rp.prototype.iterator=function(){return __awaiter$6(this,void 0,void 0,function(){var np;return __generator$6(this,function(ap){return isLocalPath(this.input)&&a$1().get("IS_NODE")&&(np=require("fs"),this.input=np.readFileSync(this.input.substr(7))),[2,new FileChunkIterator(this.input,this.options)]})})},rp}(DataSource),URLDataSource=function(_d){function rp(np,ap){ap===void 0&&(ap={});var sp=_d.call(this)||this;return sp.url=np,sp.fileOptions=ap,sp}return __extends$g(rp,_d),rp.prototype.iterator=function(){return __awaiter$6(this,void 0,void 0,function(){return __generator$6(this,function(np){return isLocalPath(this.url)?[2,new FileDataSource(this.url,this.fileOptions).iterator()]:[2,urlChunkIterator(this.url,this.fileOptions)]})})},rp}(DataSource);function csv(_d,rp){return rp===void 0&&(rp={}),new CSVDataset(new URLDataSource(_d),rp)}function func(_d){var rp=this,np=iteratorFromFunction(_d);return datasetFromIteratorFn(function(){return __awaiter$6(rp,void 0,void 0,function(){return __generator$6(this,function(ap){return[2,np]})})})}function generator(_d){var rp=this;return datasetFromIteratorFn(function(){return __awaiter$6(rp,void 0,void 0,function(){var np;return __generator$6(this,function(ap){switch(ap.label){case 0:return[4,_d()];case 1:return np=ap.sent(),[2,iteratorFromFunction(function(){return np.next()})]}})})})}function webcam$1(_d,rp){return __awaiter$6(this,void 0,void 0,function(){return __generator$6(this,function(np){return[2,WebcamIterator.create(_d,rp)]})})}function microphone(_d){return __awaiter$6(this,void 0,void 0,function(){return __generator$6(this,function(rp){return[2,MicrophoneIterator.create(_d)]})})}var version$6="1.3.1";const tfData_esm=Object.freeze(Object.defineProperty({__proto__:null,CSVDataset,Dataset,FileDataSource,TextLineDataset,URLDataSource,array,csv,func,generator,microphone,version_data:version$6,webcam:webcam$1,zip},Symbol.toStringTag,{value:"Module"}));var version$5="1.3.1",version$1$1={"tfjs-core":zf,"tfjs-data":version$6,"tfjs-layers":version$8,"tfjs-converter":version$7,tfjs:version$5};const tf_esm=Object.freeze(Object.defineProperty({__proto__:null,AdadeltaOptimizer:qf,AdagradOptimizer:Kf,AdamOptimizer:jf,AdamaxOptimizer:Xf,Callback,CallbackList,CustomCallback,DataStorage:so,get ENV(){return i$2},EarlyStopping,Environment:o,GraphModel,History,InputSpec,KernelBackend:co,LayerVariable,LayersModel,MomentumOptimizer:Yf,Optimizer:Hf,RMSPropOptimizer:Qf,RNN,get Rank(){return vt},get Reduction(){return jl},SGDOptimizer:$f,Sequential,SymbolicTensor,Tensor:dt,TensorBuffer:lt,Variable:bt,abs:Vu,acos:zu,acosh:Gu,add:Vs,addN:zs,addStrict:Gs,all:il,any:ul,argMax:sl,argMin:cl,asin:Hu,asinh:qu,atan:Ku,atan2:Hs,atanh:ju,avgPool:Yc,avgPool3d:Zc,backend:on,backend_util:To,basicLSTMCell:kl,batchNorm:Ns,batchNorm2d:Fs,batchNorm3d:Os,batchNorm4d:_s,batchNormalization:Ts,batchNormalization2d:Ss,batchNormalization3d:As,batchNormalization4d:Ds,batchToSpaceND:cr,booleanMaskAsync:Rc,browser:Nf,buffer:ur,callbacks,cast:lr,ceil:Xu,clipByValue:$u,clone:hr,complex:En,concat:Gn,concat1d:Hn,concat2d:qn,concat3d:Kn,concat4d:jn,constraints:exports_constraints,conv1d:Ac,conv2d:Dc,conv2dTranspose:Pc,conv3d:Tc,conv3dTranspose:Lc,cos:Yu,cosh:Qu,cumsum:fr$1,customGrad:oo,data:tfData_esm,deprecationWarn:ze,depthToSpace:pr,depthwiseConv2d:Oc,deregisterOp,diag:Wl,disableDeprecationWarnings:Ve,dispose:Xe,disposeVariables:Ge,div:qs,divStrict:Ks,dot:Uc,dropout:Ul,elu:gl,enableDebugMode:Ue,enableProdMode:We,engine:He,env:a$1,equal:sc,equalStrict:cc,erf:Ju,exp:Zu,expandDims:dr,expm1:ts,eye:vr,fft:Fl,fill:Ln,findBackend:en,findBackendFactory:nn,floor:es,floorDiv:js,frame:Hl,fused:Eh,gather:Cc,gatherND:Ll,getBackend:Ze,getKernel:s,getKernelsForBackend:c$1,grad:Zr,grads:to,greater:lc,greaterEqual:hc,greaterEqualStrict:fc,greaterStrict:pc,hammingWindow:Gl,hannWindow:zl,ifft:Ol,imag:In,image:vh,inTopKAsync:Xl,initializers:exports_initializers,input,io:Sf,irfft:Ml,isFinite:ps,isInf:fs,isNaN:hs,keep:$e,layers:exports_layers,leakyRelu:yl,less:dc,lessEqual:vc,lessEqualStrict:mc,lessStrict:gc,linalg:sh,linspace:Wn,loadGraphModel,loadLayersModel,localResponseNormalization:Rl,log:ns,log1p:rs,logSigmoid:os,logSoftmax:uo,logSumExp:ll,logicalAnd:Ms,logicalNot:Bs,logicalOr:Ps,logicalXor:Ls,losses:oh,matMul:Wc,math:Df,max:hl,maxPool:$c,maxPool3d:Jc,maximum:Xs,maximumStrict:$s,mean:fl,memory:qe,metrics:exports_metrics,min:pl,minimum:Ys,minimumStrict:Qs,mod:Js,modStrict:Zs,model,models:exports_models,moments:dl,movingAverage:Al,mul:tc,mulStrict:ec,multiRNNCell:Sl,multinomial:mr,neg:as,nextFrame:ep,norm:Il,notEqual:yc,notEqualStrict:xc,oneHot:gr,ones:Bn,onesLike:Vn,op:Cn,outerProduct:Vc,pad:yr,pad1d:xr,pad2d:br,pad3d:wr,pad4d:Cr,pool:Qc,pow:nc,powStrict:rc,prelu:xl,print:sr$1,prod:ml,profile:Ke,rand:Er,randomGamma:Ir,randomNormal:Rr,randomUniform:kr,range:Un,ready:Je,real:Rn,reciprocal:is,registerBackend:rn,registerCallbackConstructor,registerKernel:l$1,registerOp,regularizers:exports_regularizers,relu:bl,relu6:wl,removeBackend:tn,reshape:Sr,reverse:zc,reverse1d:Gc,reverse2d:Hc,reverse3d:qc,reverse4d:Kc,rfft:_l,round:us,rsqrt:ss,scalar:An,scatterND:Nl,selu:Cl,separableConv2d:Bc,sequential,serialization:Mf,setBackend:Qe,setPlatform:an,setdiff1dAsync:_r,sigmoid:cs,sign:ls,signal:Kl,sin:ds,sinh:vs,slice:tl,slice1d:el,slice2d:nl,slice3d:rl,slice4d:ol,slice_util:Jr,softmax:io,softplus:ms,spaceToBatchND:Ar,sparseToDense:Pl,spectral:Bl,split:Xn,sqrt:gs,square:Uu,squaredDifference:oc,squaredDifferenceStrict:ac,squeeze:Dr,stack:Tr,step:ys,stft:ql,stridedSlice:Dl,sub:ic,subStrict:uc,sum:vl,tan:xs,tanh:bs,tensor:kn,tensor1d:Dn,tensor2d:Tn,tensor3d:Nn,tensor4d:Fn,tensor5d:On,tensor6d:_n,tensor_util:At,test_util:Vf,tidy:je,tile:Nr,time:Ye,topk:Tl,train:Zf,transpose:El,truncatedNormal:Fr,unregisterKernel:h$1,unsortedSegmentSum:Ec,unstack:Or,util:tt,valueAndGrad:eo,valueAndGrads:no,variable:Mn,variableGrads:ro,version:version$1$1,version_converter:version$7,version_core:zf,version_layers:version$8,webgl:Gf,where:Ws,whereAsync:Us,zeros:Pn,zerosLike:zn},Symbol.toStringTag,{value:"Module"})),require$$0$2=getAugmentedNamespace(tf_esm);var tf$2={};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object.defineProperty(tf$2,"__esModule",{value:!0});tf$2.cropTensor=tf$2.capture=void 0;var tf$1=require$$0$2;function capture(_d,rp){return tf$1.tidy(function(){var np=tf$1.browser.fromPixels(_d),ap=cropTensor(np,rp),sp=ap.expandDims(0);return sp.toFloat().div(tf$1.scalar(127)).sub(tf$1.scalar(1))})}tf$2.capture=capture;function cropTensor(_d,rp,np){var ap=Math.min(_d.shape[0],_d.shape[1]),sp=_d.shape[0]/2,lp=sp-ap/2,up=_d.shape[1]/2,cp=up-ap/2;if(rp&&!np){var dp=_d.slice([lp,cp,0],[ap,ap,3]);dp=dp.reshape([ap*ap,1,3]);var fp=[.2989,.587,.114];return dp=tf$1.mul(dp,fp),dp=dp.reshape([ap,ap,3]),dp=tf$1.sum(dp,-1),dp=tf$1.expandDims(dp,-1),dp}return _d.slice([lp,cp,0],[ap,ap,3])}tf$2.cropTensor=cropTensor;var canvas={};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object.defineProperty(canvas,"__esModule",{value:!0});canvas.cropTo=canvas.resizeMinTo=canvas.resizeMaxTo=canvas.resize=void 0;var newCanvas=function(){return document.createElement("canvas")};function resize(_d,rp,np){np===void 0&&(np=newCanvas()),np.width=_d.width*rp,np.height=_d.height*rp;var ap=np.getContext("2d");return ap.drawImage(_d,0,0,np.width,np.height),np}canvas.resize=resize;function resizeMaxTo(_d,rp,np){np===void 0&&(np=newCanvas());var ap=Math.max(_d.width,_d.height);return resize(_d,rp/ap,np)}canvas.resizeMaxTo=resizeMaxTo;function resizeMinTo(_d,rp,np){np===void 0&&(np=newCanvas());var ap=Math.min(_d.width,_d.height);return resize(_d,rp/ap,np)}canvas.resizeMinTo=resizeMinTo;function cropTo(_d,rp,np,ap){np===void 0&&(np=!1),ap===void 0&&(ap=newCanvas());var sp=_d.width,lp=_d.height;_d instanceof HTMLVideoElement&&(sp=_d.videoWidth,lp=_d.videoHeight);var up=Math.min(sp,lp),cp=rp/up,dp=Math.ceil(sp*cp),fp=Math.ceil(lp*cp),pp=dp-rp,hp=fp-rp;ap.width=ap.height=rp;var mp=ap.getContext("2d");return mp.drawImage(_d,~~(pp/2)*-1,~~(hp/2)*-1,dp,fp),np&&(mp.scale(-1,1),mp.drawImage(ap,rp*-1,0)),ap}canvas.cropTo=cropTo;var version$4={};/** @license See the LICENSE file. */Object.defineProperty(version$4,"__esModule",{value:!0});version$4.version=void 0;var version$3="0.8.4-alpha2";version$4.version=version$3;(function(_d){/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var rp=commonjsGlobal&&commonjsGlobal.__awaiter||function($p,Cp,Ap,Op){function Lp(Mp){return Mp instanceof Ap?Mp:new Ap(function(kp){kp(Mp)})}return new(Ap||(Ap=Promise))(function(Mp,kp){function Dp(Pp){try{Ip(Op.next(Pp))}catch(Tp){kp(Tp)}}function Fp(Pp){try{Ip(Op.throw(Pp))}catch(Tp){kp(Tp)}}function Ip(Pp){Pp.done?Mp(Pp.value):Lp(Pp.value).then(Dp,Fp)}Ip((Op=Op.apply($p,Cp||[])).next())})},np=commonjsGlobal&&commonjsGlobal.__generator||function($p,Cp){var Ap={label:0,sent:function(){if(Mp[0]&1)throw Mp[1];return Mp[1]},trys:[],ops:[]},Op,Lp,Mp,kp;return kp={next:Dp(0),throw:Dp(1),return:Dp(2)},typeof Symbol=="function"&&(kp[Symbol.iterator]=function(){return this}),kp;function Dp(Ip){return function(Pp){return Fp([Ip,Pp])}}function Fp(Ip){if(Op)throw new TypeError("Generator is already executing.");for(;Ap;)try{if(Op=1,Lp&&(Mp=Ip[0]&2?Lp.return:Ip[0]?Lp.throw||((Mp=Lp.return)&&Mp.call(Lp),0):Lp.next)&&!(Mp=Mp.call(Lp,Ip[1])).done)return Mp;switch(Lp=0,Mp&&(Ip=[Ip[0]&2,Mp.value]),Ip[0]){case 0:case 1:Mp=Ip;break;case 4:return Ap.label++,{value:Ip[1],done:!1};case 5:Ap.label++,Lp=Ip[1],Ip=[0];continue;case 7:Ip=Ap.ops.pop(),Ap.trys.pop();continue;default:if(Mp=Ap.trys,!(Mp=Mp.length>0&&Mp[Mp.length-1])&&(Ip[0]===6||Ip[0]===2)){Ap=0;continue}if(Ip[0]===3&&(!Mp||Ip[1]>Mp[0]&&Ip[1]<Mp[3])){Ap.label=Ip[1];break}if(Ip[0]===6&&Ap.label<Mp[1]){Ap.label=Mp[1],Mp=Ip;break}if(Mp&&Ap.label<Mp[2]){Ap.label=Mp[2],Ap.ops.push(Ip);break}Mp[2]&&Ap.ops.pop(),Ap.trys.pop();continue}Ip=Cp.call($p,Ap)}catch(Pp){Ip=[6,Pp],Lp=0}finally{Op=Mp=0}if(Ip[0]&5)throw Ip[1];return{value:Ip[0]?Ip[1]:void 0,done:!0}}};Object.defineProperty(_d,"__esModule",{value:!0}),_d.loadFromFiles=_d.load=_d.loadTruncatedMobileNet=_d.CustomMobileNet=_d.getTopKClasses=_d.IMAGE_SIZE=void 0;var ap=require$$0$2,sp=require$$0$2,lp=tf$2,up=canvas,cp=version$4,dp=1,fp="conv_pw_13_relu",pp="out_relu",hp=.25,mp=.35;_d.IMAGE_SIZE=224;var gp=function($p){return $p.packageVersion=$p.packageVersion||cp.version,$p.packageName=$p.packageName||"@teachablemachine/image",$p.timeStamp=$p.timeStamp||new Date().toISOString(),$p.userMetadata=$p.userMetadata||{},$p.modelName=$p.modelName||"untitled",$p.labels=$p.labels||[],$p.imageSize=$p.imageSize||_d.IMAGE_SIZE,$p},vp=function($p){return!!$p&&Array.isArray($p.labels)},xp=function($p,Cp){if($p===1){if(Cp!==.25&&Cp!==.5&&Cp!==.75&&Cp!==1)return console.warn("Invalid alpha. Options are: 0.25, 0.50, 0.75 or 1.00."),console.log("Loading model with alpha: ",hp.toFixed(2)),hp}else if(Cp!==.35&&Cp!==.5&&Cp!==.75&&Cp!==1)return console.warn("Invalid alpha. Options are: 0.35, 0.50, 0.75 or 1.00."),console.log("Loading model with alpha: ",mp.toFixed(2)),mp;return Cp},Sp=function($p){if($p=$p||{},$p.checkpointUrl&&$p.trainingLayer)return($p.alpha||$p.version)&&console.warn("Checkpoint URL passed to modelOptions, alpha options are ignored"),[$p.checkpointUrl,$p.trainingLayer];if($p.version=$p.version||dp,$p.version===1){$p.alpha=$p.alpha||hp,$p.alpha=xp($p.version,$p.alpha),console.log("Loading mobilenet "+$p.version+" and alpha "+$p.alpha);var Cp=$p.alpha.toFixed(2);return Cp==="1.00"&&(Cp="1.0"),["https://storage.googleapis.com/tfjs-models/tfjs/mobilenet_v1_"+Cp+"_"+_d.IMAGE_SIZE+"/model.json",fp]}else{if($p.version===2)return $p.alpha=$p.alpha||mp,$p.alpha=xp($p.version,$p.alpha),console.log("Loading mobilenet "+$p.version+" and alpha "+$p.alpha),["https://storage.googleapis.com/teachable-machine-models/mobilenet_v2_weights_tf_dim_ordering_tf_kernels_"+$p.alpha.toFixed(2)+"_"+_d.IMAGE_SIZE+"_no_top/model.json",pp];throw new Error("MobileNet V"+$p.version+" doesn't exist")}},yp=function($p){return rp(void 0,void 0,void 0,function(){var Cp,Ap;return np(this,function(Op){switch(Op.label){case 0:return typeof $p!="string"?[3,3]:[4,fetch($p)];case 1:return Ap=Op.sent(),[4,Ap.json()];case 2:return Cp=Op.sent(),[3,4];case 3:if(vp($p))Cp=$p;else throw new Error("Invalid Metadata provided");Op.label=4;case 4:return[2,gp(Cp)]}})})};function bp($p,Cp,Ap){return Ap===void 0&&(Ap=3),rp(this,void 0,void 0,function(){var Op;return np(this,function(Lp){switch(Lp.label){case 0:return[4,Cp.data()];case 1:return Op=Lp.sent(),[2,ap.tidy(function(){Ap=Math.min(Ap,Op.length);for(var Mp=[],kp=0;kp<Op.length;kp++)Mp.push({value:Op[kp],index:kp});Mp.sort(function(Pp,Tp){return Tp.value-Pp.value});for(var Dp=new Float32Array(Ap),Fp=new Int32Array(Ap),kp=0;kp<Ap;kp++)Dp[kp]=Mp[kp].value,Fp[kp]=Mp[kp].index;for(var Ip=[],kp=0;kp<Fp.length;kp++)Ip.push({className:$p[Fp[kp]],probability:Dp[kp]});return Ip})]}})})}_d.getTopKClasses=bp;var Ep=function(){function $p(Cp,Ap){this.model=Cp,this._metadata=gp(Ap)}return Object.defineProperty($p,"EXPECTED_IMAGE_SIZE",{get:function(){return _d.IMAGE_SIZE},enumerable:!1,configurable:!0}),$p.prototype.getMetadata=function(){return this._metadata},$p.prototype.getTotalClasses=function(){var Cp=this.model.output,Ap=Cp.shape[1];return Ap},$p.prototype.getClassLabels=function(){return this._metadata.labels},$p.prototype.predictTopK=function(Cp,Ap,Op){return Ap===void 0&&(Ap=10),Op===void 0&&(Op=!1),rp(this,void 0,void 0,function(){var Lp,Mp,kp,Dp=this;return np(this,function(Fp){switch(Fp.label){case 0:return Lp=up.cropTo(Cp,this._metadata.imageSize,Op),Mp=ap.tidy(function(){var Ip=lp.capture(Lp,Dp._metadata.grayscale);return Dp.model.predict(Ip)}),[4,bp(this._metadata.labels,Mp,Ap)];case 1:return kp=Fp.sent(),sp.dispose(Mp),[2,kp]}})})},$p.prototype.predict=function(Cp,Ap){return Ap===void 0&&(Ap=!1),rp(this,void 0,void 0,function(){var Op,Lp,Mp,kp,Dp,Fp=this;return np(this,function(Ip){switch(Ip.label){case 0:return Op=up.cropTo(Cp,this._metadata.imageSize,Ap),Lp=ap.tidy(function(){var Pp=lp.capture(Op,Fp._metadata.grayscale);return Fp.model.predict(Pp)}),[4,Lp.data()];case 1:for(Mp=Ip.sent(),kp=[],Dp=0;Dp<Mp.length;Dp++)kp.push({className:this._metadata.labels[Dp],probability:Mp[Dp]});return sp.dispose(Lp),[2,kp]}})})},$p.prototype.dispose=function(){this.truncatedModel.dispose()},$p}();_d.CustomMobileNet=Ep;function wp($p){return rp(this,void 0,void 0,function(){var Cp,Ap,Op,Lp,Mp,kp,Dp,Mp,kp,Dp;return np(this,function(Fp){switch(Fp.label){case 0:return Cp=Sp($p),Ap=Cp[0],Op=Cp[1],[4,ap.loadLayersModel(Ap)];case 1:return Lp=Fp.sent(),$p&&$p.version===1?(Mp=Lp.getLayer(Op),kp=ap.model({inputs:Lp.inputs,outputs:Mp.output}),Dp=ap.sequential(),Dp.add(kp),Dp.add(ap.layers.flatten()),[2,Dp]):(Mp=Lp.getLayer(Op),kp=ap.model({inputs:Lp.inputs,outputs:Mp.output}),Dp=ap.sequential(),Dp.add(kp),Dp.add(ap.layers.globalAveragePooling2d({})),[2,Dp])}})})}_d.loadTruncatedMobileNet=wp;function _p($p,Cp){return rp(this,void 0,void 0,function(){var Ap,Op,Lp;return np(this,function(Mp){switch(Mp.label){case 0:return[4,ap.loadLayersModel($p)];case 1:return Ap=Mp.sent(),Cp?[4,yp(Cp)]:[3,3];case 2:return Lp=Mp.sent(),[3,4];case 3:Lp=null,Mp.label=4;case 4:return Op=Lp,[2,new Ep(Ap,Op)]}})})}_d.load=_p;function Rp($p,Cp,Ap){return rp(this,void 0,void 0,function(){var Op,Lp,Mp,kp;return np(this,function(Dp){switch(Dp.label){case 0:return[4,ap.loadLayersModel(ap.io.browserFiles([$p,Cp]))];case 1:return Op=Dp.sent(),[4,new Response(Ap).json()];case 2:return Lp=Dp.sent(),Ap?[4,yp(Lp)]:[3,4];case 3:return kp=Dp.sent(),[3,5];case 4:kp=null,Dp.label=5;case 5:return Mp=kp,[2,new Ep(Op,Mp)]}})})}_d.loadFromFiles=Rp})(customMobilenet);var teachableMobilenet={},alea$1={exports:{}};alea$1.exports;(function(_d){(function(rp,np,ap){function sp(dp){var fp=this,pp=cp();fp.next=function(){var hp=2091639*fp.s0+fp.c*23283064365386963e-26;return fp.s0=fp.s1,fp.s1=fp.s2,fp.s2=hp-(fp.c=hp|0)},fp.c=1,fp.s0=pp(" "),fp.s1=pp(" "),fp.s2=pp(" "),fp.s0-=pp(dp),fp.s0<0&&(fp.s0+=1),fp.s1-=pp(dp),fp.s1<0&&(fp.s1+=1),fp.s2-=pp(dp),fp.s2<0&&(fp.s2+=1),pp=null}function lp(dp,fp){return fp.c=dp.c,fp.s0=dp.s0,fp.s1=dp.s1,fp.s2=dp.s2,fp}function up(dp,fp){var pp=new sp(dp),hp=fp&&fp.state,mp=pp.next;return mp.int32=function(){return pp.next()*4294967296|0},mp.double=function(){return mp()+(mp()*2097152|0)*11102230246251565e-32},mp.quick=mp,hp&&(typeof hp=="object"&&lp(hp,pp),mp.state=function(){return lp(pp,{})}),mp}function cp(){var dp=4022871197,fp=function(pp){pp=pp.toString();for(var hp=0;hp<pp.length;hp++){dp+=pp.charCodeAt(hp);var mp=.02519603282416938*dp;dp=mp>>>0,mp-=dp,mp*=dp,dp=mp>>>0,mp-=dp,dp+=mp*4294967296}return(dp>>>0)*23283064365386963e-26};return fp}np&&np.exports?np.exports=up:ap&&ap.amd?ap(function(){return up}):this.alea=up})(commonjsGlobal,_d,!1)})(alea$1);var aleaExports=alea$1.exports,xor128$1={exports:{}};xor128$1.exports;(function(_d){(function(rp,np,ap){function sp(cp){var dp=this,fp="";dp.x=0,dp.y=0,dp.z=0,dp.w=0,dp.next=function(){var hp=dp.x^dp.x<<11;return dp.x=dp.y,dp.y=dp.z,dp.z=dp.w,dp.w^=dp.w>>>19^hp^hp>>>8},cp===(cp|0)?dp.x=cp:fp+=cp;for(var pp=0;pp<fp.length+64;pp++)dp.x^=fp.charCodeAt(pp)|0,dp.next()}function lp(cp,dp){return dp.x=cp.x,dp.y=cp.y,dp.z=cp.z,dp.w=cp.w,dp}function up(cp,dp){var fp=new sp(cp),pp=dp&&dp.state,hp=function(){return(fp.next()>>>0)/4294967296};return hp.double=function(){do var mp=fp.next()>>>11,gp=(fp.next()>>>0)/4294967296,vp=(mp+gp)/(1<<21);while(vp===0);return vp},hp.int32=fp.next,hp.quick=hp,pp&&(typeof pp=="object"&&lp(pp,fp),hp.state=function(){return lp(fp,{})}),hp}np&&np.exports?np.exports=up:ap&&ap.amd?ap(function(){return up}):this.xor128=up})(commonjsGlobal,_d,!1)})(xor128$1);var xor128Exports=xor128$1.exports,xorwow$1={exports:{}};xorwow$1.exports;(function(_d){(function(rp,np,ap){function sp(cp){var dp=this,fp="";dp.next=function(){var hp=dp.x^dp.x>>>2;return dp.x=dp.y,dp.y=dp.z,dp.z=dp.w,dp.w=dp.v,(dp.d=dp.d+362437|0)+(dp.v=dp.v^dp.v<<4^(hp^hp<<1))|0},dp.x=0,dp.y=0,dp.z=0,dp.w=0,dp.v=0,cp===(cp|0)?dp.x=cp:fp+=cp;for(var pp=0;pp<fp.length+64;pp++)dp.x^=fp.charCodeAt(pp)|0,pp==fp.length&&(dp.d=dp.x<<10^dp.x>>>4),dp.next()}function lp(cp,dp){return dp.x=cp.x,dp.y=cp.y,dp.z=cp.z,dp.w=cp.w,dp.v=cp.v,dp.d=cp.d,dp}function up(cp,dp){var fp=new sp(cp),pp=dp&&dp.state,hp=function(){return(fp.next()>>>0)/4294967296};return hp.double=function(){do var mp=fp.next()>>>11,gp=(fp.next()>>>0)/4294967296,vp=(mp+gp)/(1<<21);while(vp===0);return vp},hp.int32=fp.next,hp.quick=hp,pp&&(typeof pp=="object"&&lp(pp,fp),hp.state=function(){return lp(fp,{})}),hp}np&&np.exports?np.exports=up:ap&&ap.amd?ap(function(){return up}):this.xorwow=up})(commonjsGlobal,_d,!1)})(xorwow$1);var xorwowExports=xorwow$1.exports,xorshift7$1={exports:{}};xorshift7$1.exports;(function(_d){(function(rp,np,ap){function sp(cp){var dp=this;dp.next=function(){var pp=dp.x,hp=dp.i,mp,gp;return mp=pp[hp],mp^=mp>>>7,gp=mp^mp<<24,mp=pp[hp+1&7],gp^=mp^mp>>>10,mp=pp[hp+3&7],gp^=mp^mp>>>3,mp=pp[hp+4&7],gp^=mp^mp<<7,mp=pp[hp+7&7],mp=mp^mp<<13,gp^=mp^mp<<9,pp[hp]=gp,dp.i=hp+1&7,gp};function fp(pp,hp){var mp,gp=[];if(hp===(hp|0))gp[0]=hp;else for(hp=""+hp,mp=0;mp<hp.length;++mp)gp[mp&7]=gp[mp&7]<<15^hp.charCodeAt(mp)+gp[mp+1&7]<<13;for(;gp.length<8;)gp.push(0);for(mp=0;mp<8&&gp[mp]===0;++mp);for(mp==8?gp[7]=-1:gp[mp],pp.x=gp,pp.i=0,mp=256;mp>0;--mp)pp.next()}fp(dp,cp)}function lp(cp,dp){return dp.x=cp.x.slice(),dp.i=cp.i,dp}function up(cp,dp){cp==null&&(cp=+new Date);var fp=new sp(cp),pp=dp&&dp.state,hp=function(){return(fp.next()>>>0)/4294967296};return hp.double=function(){do var mp=fp.next()>>>11,gp=(fp.next()>>>0)/4294967296,vp=(mp+gp)/(1<<21);while(vp===0);return vp},hp.int32=fp.next,hp.quick=hp,pp&&(pp.x&&lp(pp,fp),hp.state=function(){return lp(fp,{})}),hp}np&&np.exports?np.exports=up:ap&&ap.amd?ap(function(){return up}):this.xorshift7=up})(commonjsGlobal,_d,!1)})(xorshift7$1);var xorshift7Exports=xorshift7$1.exports,xor4096$1={exports:{}};xor4096$1.exports;(function(_d){(function(rp,np,ap){function sp(cp){var dp=this;dp.next=function(){var pp=dp.w,hp=dp.X,mp=dp.i,gp,vp;return dp.w=pp=pp+1640531527|0,vp=hp[mp+34&127],gp=hp[mp=mp+1&127],vp^=vp<<13,gp^=gp<<17,vp^=vp>>>15,gp^=gp>>>12,vp=hp[mp]=vp^gp,dp.i=mp,vp+(pp^pp>>>16)|0};function fp(pp,hp){var mp,gp,vp,xp,Sp,yp=[],bp=128;for(hp===(hp|0)?(gp=hp,hp=null):(hp=hp+"\0",gp=0,bp=Math.max(bp,hp.length)),vp=0,xp=-32;xp<bp;++xp)hp&&(gp^=hp.charCodeAt((xp+32)%hp.length)),xp===0&&(Sp=gp),gp^=gp<<10,gp^=gp>>>15,gp^=gp<<4,gp^=gp>>>13,xp>=0&&(Sp=Sp+1640531527|0,mp=yp[xp&127]^=gp+Sp,vp=mp==0?vp+1:0);for(vp>=128&&(yp[(hp&&hp.length||0)&127]=-1),vp=127,xp=4*128;xp>0;--xp)gp=yp[vp+34&127],mp=yp[vp=vp+1&127],gp^=gp<<13,mp^=mp<<17,gp^=gp>>>15,mp^=mp>>>12,yp[vp]=gp^mp;pp.w=Sp,pp.X=yp,pp.i=vp}fp(dp,cp)}function lp(cp,dp){return dp.i=cp.i,dp.w=cp.w,dp.X=cp.X.slice(),dp}function up(cp,dp){cp==null&&(cp=+new Date);var fp=new sp(cp),pp=dp&&dp.state,hp=function(){return(fp.next()>>>0)/4294967296};return hp.double=function(){do var mp=fp.next()>>>11,gp=(fp.next()>>>0)/4294967296,vp=(mp+gp)/(1<<21);while(vp===0);return vp},hp.int32=fp.next,hp.quick=hp,pp&&(pp.X&&lp(pp,fp),hp.state=function(){return lp(fp,{})}),hp}np&&np.exports?np.exports=up:ap&&ap.amd?ap(function(){return up}):this.xor4096=up})(commonjsGlobal,_d,!1)})(xor4096$1);var xor4096Exports=xor4096$1.exports,tychei$1={exports:{}};tychei$1.exports;(function(_d){(function(rp,np,ap){function sp(cp){var dp=this,fp="";dp.next=function(){var hp=dp.b,mp=dp.c,gp=dp.d,vp=dp.a;return hp=hp<<25^hp>>>7^mp,mp=mp-gp|0,gp=gp<<24^gp>>>8^vp,vp=vp-hp|0,dp.b=hp=hp<<20^hp>>>12^mp,dp.c=mp=mp-gp|0,dp.d=gp<<16^mp>>>16^vp,dp.a=vp-hp|0},dp.a=0,dp.b=0,dp.c=-1640531527,dp.d=1367130551,cp===Math.floor(cp)?(dp.a=cp/4294967296|0,dp.b=cp|0):fp+=cp;for(var pp=0;pp<fp.length+20;pp++)dp.b^=fp.charCodeAt(pp)|0,dp.next()}function lp(cp,dp){return dp.a=cp.a,dp.b=cp.b,dp.c=cp.c,dp.d=cp.d,dp}function up(cp,dp){var fp=new sp(cp),pp=dp&&dp.state,hp=function(){return(fp.next()>>>0)/4294967296};return hp.double=function(){do var mp=fp.next()>>>11,gp=(fp.next()>>>0)/4294967296,vp=(mp+gp)/(1<<21);while(vp===0);return vp},hp.int32=fp.next,hp.quick=hp,pp&&(typeof pp=="object"&&lp(pp,fp),hp.state=function(){return lp(fp,{})}),hp}np&&np.exports?np.exports=up:ap&&ap.amd?ap(function(){return up}):this.tychei=up})(commonjsGlobal,_d,!1)})(tychei$1);var tycheiExports=tychei$1.exports,seedrandom$2={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$0$1=getAugmentedNamespace(__viteBrowserExternal$1);(function(_d){(function(rp,np){var ap=(0,eval)("this"),sp=256,lp=6,up=52,cp="random",dp=np.pow(sp,lp),fp=np.pow(2,up),pp=fp*2,hp=sp-1,mp;function gp(wp,_p,Rp){var $p=[];_p=_p==!0?{entropy:!0}:_p||{};var Cp=yp(Sp(_p.entropy?[wp,Ep(rp)]:wp??bp(),3),$p),Ap=new vp($p),Op=function(){for(var Lp=Ap.g(lp),Mp=dp,kp=0;Lp<fp;)Lp=(Lp+kp)*sp,Mp*=sp,kp=Ap.g(1);for(;Lp>=pp;)Lp/=2,Mp/=2,kp>>>=1;return(Lp+kp)/Mp};return Op.int32=function(){return Ap.g(4)|0},Op.quick=function(){return Ap.g(4)/4294967296},Op.double=Op,yp(Ep(Ap.S),rp),(_p.pass||Rp||function(Lp,Mp,kp,Dp){return Dp&&(Dp.S&&xp(Dp,Ap),Lp.state=function(){return xp(Ap,{})}),kp?(np[cp]=Lp,Mp):Lp})(Op,Cp,"global"in _p?_p.global:this==np,_p.state)}np["seed"+cp]=gp;function vp(wp){var _p,Rp=wp.length,$p=this,Cp=0,Ap=$p.i=$p.j=0,Op=$p.S=[];for(Rp||(wp=[Rp++]);Cp<sp;)Op[Cp]=Cp++;for(Cp=0;Cp<sp;Cp++)Op[Cp]=Op[Ap=hp&Ap+wp[Cp%Rp]+(_p=Op[Cp])],Op[Ap]=_p;($p.g=function(Lp){for(var Mp,kp=0,Dp=$p.i,Fp=$p.j,Ip=$p.S;Lp--;)Mp=Ip[Dp=hp&Dp+1],kp=kp*sp+Ip[hp&(Ip[Dp]=Ip[Fp=hp&Fp+Mp])+(Ip[Fp]=Mp)];return $p.i=Dp,$p.j=Fp,kp})(sp)}function xp(wp,_p){return _p.i=wp.i,_p.j=wp.j,_p.S=wp.S.slice(),_p}function Sp(wp,_p){var Rp=[],$p=typeof wp,Cp;if(_p&&$p=="object")for(Cp in wp)try{Rp.push(Sp(wp[Cp],_p-1))}catch{}return Rp.length?Rp:$p=="string"?wp:wp+"\0"}function yp(wp,_p){for(var Rp=wp+"",$p,Cp=0;Cp<Rp.length;)_p[hp&Cp]=hp&($p^=_p[hp&Cp]*19)+Rp.charCodeAt(Cp++);return Ep(_p)}function bp(){try{var wp;return mp&&(wp=mp.randomBytes)?wp=wp(sp):(wp=new Uint8Array(sp),(ap.crypto||ap.msCrypto).getRandomValues(wp)),Ep(wp)}catch{var _p=ap.navigator,Rp=_p&&_p.plugins;return[+new Date,ap,Rp,ap.screen,Ep(rp)]}}function Ep(wp){return String.fromCharCode.apply(0,wp)}if(yp(np.random(),rp),_d.exports){_d.exports=gp;try{mp=require$$0$1}catch{}}})([],Math)})(seedrandom$2);var seedrandomExports=seedrandom$2.exports,alea=aleaExports,xor128=xor128Exports,xorwow=xorwowExports,xorshift7=xorshift7Exports,xor4096=xor4096Exports,tychei=tycheiExports,sr=seedrandomExports;sr.alea=alea;sr.xor128=xor128;sr.xorwow=xorwow;sr.xorshift7=xorshift7;sr.xor4096=xor4096;sr.tychei=tychei;var seedrandom$1=sr;/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var __extends$f=commonjsGlobal&&commonjsGlobal.__extends||function(){var _d=function(rp,np){return _d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ap,sp){ap.__proto__=sp}||function(ap,sp){for(var lp in sp)sp.hasOwnProperty(lp)&&(ap[lp]=sp[lp])},_d(rp,np)};return function(rp,np){_d(rp,np);function ap(){this.constructor=rp}rp.prototype=np===null?Object.create(np):(ap.prototype=np.prototype,new ap)}}(),__awaiter$5=commonjsGlobal&&commonjsGlobal.__awaiter||function(_d,rp,np,ap){function sp(lp){return lp instanceof np?lp:new np(function(up){up(lp)})}return new(np||(np=Promise))(function(lp,up){function cp(pp){try{fp(ap.next(pp))}catch(hp){up(hp)}}function dp(pp){try{fp(ap.throw(pp))}catch(hp){up(hp)}}function fp(pp){pp.done?lp(pp.value):sp(pp.value).then(cp,dp)}fp((ap=ap.apply(_d,rp||[])).next())})},__generator$5=commonjsGlobal&&commonjsGlobal.__generator||function(_d,rp){var np={label:0,sent:function(){if(lp[0]&1)throw lp[1];return lp[1]},trys:[],ops:[]},ap,sp,lp,up;return up={next:cp(0),throw:cp(1),return:cp(2)},typeof Symbol=="function"&&(up[Symbol.iterator]=function(){return this}),up;function cp(fp){return function(pp){return dp([fp,pp])}}function dp(fp){if(ap)throw new TypeError("Generator is already executing.");for(;np;)try{if(ap=1,sp&&(lp=fp[0]&2?sp.return:fp[0]?sp.throw||((lp=sp.return)&&lp.call(sp),0):sp.next)&&!(lp=lp.call(sp,fp[1])).done)return lp;switch(sp=0,lp&&(fp=[fp[0]&2,lp.value]),fp[0]){case 0:case 1:lp=fp;break;case 4:return np.label++,{value:fp[1],done:!1};case 5:np.label++,sp=fp[1],fp=[0];continue;case 7:fp=np.ops.pop(),np.trys.pop();continue;default:if(lp=np.trys,!(lp=lp.length>0&&lp[lp.length-1])&&(fp[0]===6||fp[0]===2)){np=0;continue}if(fp[0]===3&&(!lp||fp[1]>lp[0]&&fp[1]<lp[3])){np.label=fp[1];break}if(fp[0]===6&&np.label<lp[1]){np.label=lp[1],lp=fp;break}if(lp&&np.label<lp[2]){np.label=lp[2],np.ops.push(fp);break}lp[2]&&np.ops.pop(),np.trys.pop();continue}fp=rp.call(_d,np)}catch(pp){fp=[6,pp],sp=0}finally{ap=lp=0}if(fp[0]&5)throw fp[1];return{value:fp[0]?fp[1]:void 0,done:!0}}};Object.defineProperty(teachableMobilenet,"__esModule",{value:!0});teachableMobilenet.createTeachable=teachableMobilenet.TeachableMobileNet=void 0;var tf=require$$0$2,tfjs_1=require$$0$2,tf_1=tf$2,custom_mobilenet_1=customMobilenet,seedrandom=seedrandom$1,VALIDATION_FRACTION=.15,isTensor=function(_d){return typeof _d.dataId=="object"&&typeof _d.shape=="object"};function flatOneHot(_d,rp){var np=new Array(rp).fill(0);return np[_d]=1,np}function fisherYates(_d,rp){for(var np,ap=_d.length,sp=_d.slice(),lp=ap-1;lp>0;lp-=1){var up=void 0;rp?up=Math.floor(rp()*(lp+1)):up=Math.floor(Math.random()*(lp+1)),np=[sp[up],sp[lp]],sp[lp]=np[0],sp[up]=np[1]}return sp}var TeachableMobileNet=function(_d){__extends$f(rp,_d);function rp(np,ap){var sp=_d.call(this,tf.sequential(),ap)||this;return sp.totalSamples=0,sp.examples=[],sp.truncatedModel=np,sp}return Object.defineProperty(rp.prototype,"asSequentialModel",{get:function(){return this.model},enumerable:!1,configurable:!0}),Object.defineProperty(rp.prototype,"isTrained",{get:function(){return!!this.model&&this.model.layers&&this.model.layers.length>2},enumerable:!1,configurable:!0}),Object.defineProperty(rp.prototype,"isPrepared",{get:function(){return!!this.trainDataset},enumerable:!1,configurable:!0}),Object.defineProperty(rp.prototype,"numClasses",{get:function(){return this._metadata.labels.length},enumerable:!1,configurable:!0}),rp.prototype.addExample=function(np,ap){return __awaiter$5(this,void 0,void 0,function(){var sp,lp,up;return __generator$5(this,function(cp){return sp=isTensor(ap)?ap:tf_1.capture(ap,this._metadata.grayscale),lp=this.truncatedModel.predict(sp),up=lp.dataSync(),sp.dispose(),lp.dispose(),this.examples[np].push(up),this.totalSamples++,[2]})})},rp.prototype.predict=function(np,ap){return ap===void 0&&(ap=!1),__awaiter$5(this,void 0,void 0,function(){return __generator$5(this,function(sp){if(!this.model)throw new Error("Model has not been trained yet, called train() first");return[2,_d.prototype.predict.call(this,np,ap)]})})},rp.prototype.predictTopK=function(np,ap,sp){return ap===void 0&&(ap=10),sp===void 0&&(sp=!1),__awaiter$5(this,void 0,void 0,function(){return __generator$5(this,function(lp){if(!this.model)throw new Error("Model has not been trained yet, called train() first");return[2,_d.prototype.predictTopK.call(this,np,ap,sp)]})})},rp.prototype.prepare=function(){for(var np in this.examples)if(np.length===0)throw new Error("Add some examples before training");var ap=this.convertToTfDataset();this.trainDataset=ap.trainDataset,this.validationDataset=ap.validationDataset},rp.prototype.convertToTfDataset=function(){for(var np=0;np<this.examples.length;np++)this.examples[np]=fisherYates(this.examples[np],this.seed);for(var ap=[],sp=[],lp=function(hp){var mp=flatOneHot(hp,up.numClasses),gp=up.examples[hp].length,vp=Math.ceil(VALIDATION_FRACTION*gp),xp=gp-vp,Sp=up.examples[hp].slice(0,xp).map(function(bp){return{data:bp,label:mp}}),yp=up.examples[hp].slice(xp).map(function(bp){return{data:bp,label:mp}});ap=ap.concat(Sp),sp=sp.concat(yp)},up=this,np=0;np<this.examples.length;np++)lp(np);ap=fisherYates(ap,this.seed),sp=fisherYates(sp,this.seed);var cp=tf.data.array(ap.map(function(hp){return hp.data})),dp=tf.data.array(sp.map(function(hp){return hp.data})),fp=tf.data.array(ap.map(function(hp){return hp.label})),pp=tf.data.array(sp.map(function(hp){return hp.label}));return{trainDataset:tf.data.zip({xs:cp,ys:fp}),validationDataset:tf.data.zip({xs:dp,ys:pp})}},rp.prototype.save=function(np,ap){return __awaiter$5(this,void 0,void 0,function(){return __generator$5(this,function(sp){return[2,this.model.save(np,ap)]})})},rp.prototype.train=function(np,ap){return ap===void 0&&(ap={}),__awaiter$5(this,void 0,void 0,function(){var sp,lp,up,cp,dp,fp,pp,hp,mp,gp=this;return __generator$5(this,function(vp){switch(vp.label){case 0:if(sp=ap.onTrainEnd||function(){},ap.onTrainEnd=function(xp){gp.__stopTrainingResolve&&(gp.__stopTrainingResolve(),gp.__stopTrainingResolve=null),sp(xp)},this.isPrepared||this.prepare(),lp=this.getLabels().length,tfjs_1.util.assert(lp===this.numClasses,function(){return"Can not train, has "+lp+" labels and "+gp.numClasses+" classes"}),up=this.truncatedModel.outputs[0].shape.slice(1),cp=tf.util.sizeFromShape(up),this.seed?dp=tf.initializers.varianceScaling({seed:3.14}):dp=tf.initializers.varianceScaling({}),this.trainingModel=tf.sequential({layers:[tf.layers.dense({inputShape:[cp],units:np.denseUnits,activation:"relu",kernelInitializer:dp,useBias:!0}),tf.layers.dense({kernelInitializer:dp,useBias:!1,activation:"softmax",units:this.numClasses})]}),fp=tf.train.adam(np.learningRate),this.trainingModel.compile({optimizer:fp,loss:"categoricalCrossentropy",metrics:["accuracy"]}),!(np.batchSize>0))throw new Error("Batch size is 0 or NaN. Please choose a non-zero fraction");return pp=this.trainDataset.batch(np.batchSize),hp=this.validationDataset.batch(np.batchSize),[4,this.trainingModel.fitDataset(pp,{epochs:np.epochs,validationData:hp,callbacks:ap})];case 1:return vp.sent(),mp=tf.sequential(),mp.add(this.truncatedModel),mp.add(this.trainingModel),this.model=mp,fp.dispose(),[2,this.model]}})})},rp.prototype.prepareDataset=function(){for(var np=0;np<this.numClasses;np++)this.examples[np]=[]},rp.prototype.setLabel=function(np,ap){this._metadata.labels[np]=ap},rp.prototype.setLabels=function(np){this._metadata.labels=np,this.prepareDataset()},rp.prototype.getLabel=function(np){return this._metadata.labels[np]},rp.prototype.getLabels=function(){return this._metadata.labels},rp.prototype.setName=function(np){this._metadata.modelName=np},rp.prototype.getName=function(){return this._metadata.modelName},rp.prototype.stopTraining=function(){var np=this,ap=new Promise(function(sp,lp){np.trainingModel.stopTraining=!0,np.__stopTrainingResolve=sp});return ap},rp.prototype.dispose=function(){this.trainingModel.dispose(),_d.prototype.dispose.call(this)},rp.prototype.calculateAccuracyPerClass=function(){return __awaiter$5(this,void 0,void 0,function(){var np,ap,sp,lp,up,cp,dp,fp,pp,hp,Ep,mp,gp,vp,xp,Sp,yp,bp,Ep,wp=this;return __generator$5(this,function(_p){switch(_p.label){case 0:return np=this.validationDataset.mapAsync(function(Rp){return __awaiter$5(wp,void 0,void 0,function(){return __generator$5(this,function($p){return[2,Rp.xs]})})}),ap=this.validationDataset.mapAsync(function(Rp){return __awaiter$5(wp,void 0,void 0,function(){return __generator$5(this,function($p){return[2,Rp.ys]})})}),sp=Math.min(ap.size,32),lp=Math.ceil(ap.size/sp),up=np.batch(sp),cp=ap.batch(sp),[4,up.iterator()];case 1:return dp=_p.sent(),[4,cp.iterator()];case 2:fp=_p.sent(),pp=[],hp=[],Ep=0,_p.label=3;case 3:return Ep<lp?[4,dp.next()]:[3,7];case 4:return mp=_p.sent(),gp=this.trainingModel.predict(mp.value),vp=gp.argMax(1),pp.push(vp),[4,fp.next()];case 5:xp=_p.sent(),Sp=xp.value.argMax(1),hp.push(Sp),mp.value.dispose(),gp.dispose(),xp.value.dispose(),_p.label=6;case 6:return Ep++,[3,3];case 7:if(yp=tf.concat(hp),bp=tf.concat(pp),lp!==1)for(Ep=0;Ep<pp.length;Ep++)pp[Ep].dispose(),hp[Ep].dispose();return[2,{reference:yp,predictions:bp}]}})})},rp.prototype.setSeed=function(np){this.seed=seedrandom(np)},rp}(custom_mobilenet_1.CustomMobileNet);teachableMobilenet.TeachableMobileNet=TeachableMobileNet;function createTeachable(_d,rp){return __awaiter$5(this,void 0,void 0,function(){var np;return __generator$5(this,function(ap){switch(ap.label){case 0:return[4,custom_mobilenet_1.loadTruncatedMobileNet(rp)];case 1:return np=ap.sent(),[2,new TeachableMobileNet(np,_d)]}})})}teachableMobilenet.createTeachable=createTeachable;var webcam={};function _typeof$3(_d){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$3=function(np){return typeof np}:_typeof$3=function(np){return np&&typeof Symbol=="function"&&np.constructor===Symbol&&np!==Symbol.prototype?"symbol":typeof np},_typeof$3(_d)}function boundMethod(_d,rp,np){var ap=np.value;if(typeof ap!="function")throw new TypeError("@boundMethod decorator can only be applied to methods not: ".concat(_typeof$3(ap)));var sp=!1;return{configurable:!0,get:function(){if(sp||this===_d.prototype||this.hasOwnProperty(rp)||typeof ap!="function")return ap;var up=ap.bind(this);return sp=!0,Object.defineProperty(this,rp,{configurable:!0,get:function(){return up},set:function(dp){ap=dp,delete this[rp]}}),sp=!1,up},set:function(up){ap=up}}}function boundClass(_d){var rp;return typeof Reflect<"u"&&typeof Reflect.ownKeys=="function"?rp=Reflect.ownKeys(_d.prototype):(rp=Object.getOwnPropertyNames(_d.prototype),typeof Object.getOwnPropertySymbols=="function"&&(rp=rp.concat(Object.getOwnPropertySymbols(_d.prototype)))),rp.forEach(function(np){if(np!=="constructor"){var ap=Object.getOwnPropertyDescriptor(_d.prototype,np);typeof ap.value=="function"&&Object.defineProperty(_d.prototype,np,boundMethod(_d,np,ap))}}),_d}function autobind(){return arguments.length===1?boundClass.apply(void 0,arguments):boundMethod.apply(void 0,arguments)}const esm=Object.freeze(Object.defineProperty({__proto__:null,boundClass,boundMethod,default:autobind},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(esm);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var __decorate=commonjsGlobal&&commonjsGlobal.__decorate||function(_d,rp,np,ap){var sp=arguments.length,lp=sp<3?rp:ap===null?ap=Object.getOwnPropertyDescriptor(rp,np):ap,up;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")lp=Reflect.decorate(_d,rp,np,ap);else for(var cp=_d.length-1;cp>=0;cp--)(up=_d[cp])&&(lp=(sp<3?up(lp):sp>3?up(rp,np,lp):up(rp,np))||lp);return sp>3&&lp&&Object.defineProperty(rp,np,lp),lp},__awaiter$4=commonjsGlobal&&commonjsGlobal.__awaiter||function(_d,rp,np,ap){function sp(lp){return lp instanceof np?lp:new np(function(up){up(lp)})}return new(np||(np=Promise))(function(lp,up){function cp(pp){try{fp(ap.next(pp))}catch(hp){up(hp)}}function dp(pp){try{fp(ap.throw(pp))}catch(hp){up(hp)}}function fp(pp){pp.done?lp(pp.value):sp(pp.value).then(cp,dp)}fp((ap=ap.apply(_d,rp||[])).next())})},__generator$4=commonjsGlobal&&commonjsGlobal.__generator||function(_d,rp){var np={label:0,sent:function(){if(lp[0]&1)throw lp[1];return lp[1]},trys:[],ops:[]},ap,sp,lp,up;return up={next:cp(0),throw:cp(1),return:cp(2)},typeof Symbol=="function"&&(up[Symbol.iterator]=function(){return this}),up;function cp(fp){return function(pp){return dp([fp,pp])}}function dp(fp){if(ap)throw new TypeError("Generator is already executing.");for(;np;)try{if(ap=1,sp&&(lp=fp[0]&2?sp.return:fp[0]?sp.throw||((lp=sp.return)&&lp.call(sp),0):sp.next)&&!(lp=lp.call(sp,fp[1])).done)return lp;switch(sp=0,lp&&(fp=[fp[0]&2,lp.value]),fp[0]){case 0:case 1:lp=fp;break;case 4:return np.label++,{value:fp[1],done:!1};case 5:np.label++,sp=fp[1],fp=[0];continue;case 7:fp=np.ops.pop(),np.trys.pop();continue;default:if(lp=np.trys,!(lp=lp.length>0&&lp[lp.length-1])&&(fp[0]===6||fp[0]===2)){np=0;continue}if(fp[0]===3&&(!lp||fp[1]>lp[0]&&fp[1]<lp[3])){np.label=fp[1];break}if(fp[0]===6&&np.label<lp[1]){np.label=lp[1],lp=fp;break}if(lp&&np.label<lp[2]){np.label=lp[2],np.ops.push(fp);break}lp[2]&&np.ops.pop(),np.trys.pop();continue}fp=rp.call(_d,np)}catch(pp){fp=[6,pp],sp=0}finally{ap=lp=0}if(fp[0]&5)throw fp[1];return{value:fp[0]?fp[1]:void 0,done:!0}}};Object.defineProperty(webcam,"__esModule",{value:!0});webcam.Webcam=void 0;var autobind_decorator_1=require$$0,canvas_1=canvas,defaultVideoOptions={facingMode:"user",frameRate:24},fillConstraints=function(_d){return _d.facingMode=_d.facingMode||defaultVideoOptions.facingMode,_d.frameRate=_d.frameRate||defaultVideoOptions.frameRate,_d.aspectRatio=_d.aspectRatio||defaultVideoOptions.aspectRatio,_d},Webcam=function(){function _d(rp,np,ap){rp===void 0&&(rp=400),np===void 0&&(np=400),ap===void 0&&(ap=!1),this.width=rp,this.height=np,this.flip=ap}return _d.prototype.getWebcam=function(rp){if(rp===void 0&&(rp={}),!window.navigator.mediaDevices||!window.navigator.mediaDevices.getUserMedia)return Promise.reject("Your browser does not support WebRTC. Please try another one.");rp.width=640;var np=fillConstraints(rp),ap=document.createElement("video");return window.navigator.mediaDevices.getUserMedia({video:np}).then(function(sp){return ap.srcObject=sp,ap.addEventListener("loadedmetadata",function(lp){var up=ap.videoWidth,cp=ap.videoHeight;ap.width=up,ap.height=cp}),ap},function(){return Promise.reject("Could not open your camera. You may have denied access.")})},_d.prototype.setup=function(rp){return rp===void 0&&(rp={}),__awaiter$4(this,void 0,void 0,function(){var np;return __generator$4(this,function(ap){switch(ap.label){case 0:return this.webcam?[3,2]:(np=this,[4,this.getWebcam(rp)]);case 1:np.webcam=ap.sent(),this.canvas||(this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height),ap.label=2;case 2:return[2]}})})},_d.prototype.play=function(){var rp=this.webcam.play();return rp},_d.prototype.pause=function(){this.webcam.pause()},_d.prototype.stop=function(){this.stopStreamedVideo(this.webcam)},_d.prototype.update=function(){this.renderCameraToCanvas()},_d.prototype.stopStreamedVideo=function(rp){var np=rp.srcObject,ap=np.getTracks();ap.forEach(function(sp){sp.stop()}),rp.srcObject=null},_d.prototype.renderCameraToCanvas=function(){if(this.canvas&&this.webcam){var rp=this.canvas.getContext("2d");if(this.webcam.videoWidth!==0){var np=canvas_1.cropTo(this.webcam,this.width,this.flip);rp.drawImage(np,0,0)}}},__decorate([autobind_decorator_1.default],_d.prototype,"getWebcam",null),__decorate([autobind_decorator_1.default],_d.prototype,"setup",null),__decorate([autobind_decorator_1.default],_d.prototype,"play",null),__decorate([autobind_decorator_1.default],_d.prototype,"pause",null),__decorate([autobind_decorator_1.default],_d.prototype,"stop",null),__decorate([autobind_decorator_1.default],_d.prototype,"update",null),__decorate([autobind_decorator_1.default],_d.prototype,"stopStreamedVideo",null),__decorate([autobind_decorator_1.default],_d.prototype,"renderCameraToCanvas",null),_d}();webcam.Webcam=Webcam;(function(_d){/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object.defineProperty(_d,"__esModule",{value:!0});var rp=customMobilenet;Object.defineProperty(_d,"IMAGE_SIZE",{enumerable:!0,get:function(){return rp.IMAGE_SIZE}}),Object.defineProperty(_d,"CustomMobileNet",{enumerable:!0,get:function(){return rp.CustomMobileNet}}),Object.defineProperty(_d,"load",{enumerable:!0,get:function(){return rp.load}}),Object.defineProperty(_d,"loadFromFiles",{enumerable:!0,get:function(){return rp.loadFromFiles}}),Object.defineProperty(_d,"loadTruncatedMobileNet",{enumerable:!0,get:function(){return rp.loadTruncatedMobileNet}});var np=teachableMobilenet;Object.defineProperty(_d,"TeachableMobileNet",{enumerable:!0,get:function(){return np.TeachableMobileNet}}),Object.defineProperty(_d,"createTeachable",{enumerable:!0,get:function(){return np.createTeachable}});var ap=webcam;Object.defineProperty(_d,"Webcam",{enumerable:!0,get:function(){return ap.Webcam}});var sp=version$4;Object.defineProperty(_d,"version",{enumerable:!0,get:function(){return sp.version}})})(dist$1);const back="/assets/backSymbol-A5W0hIK8.svg",Header=reactExports.memo(({centerText:_d,align:rp="start",filter:np="none",prevPath:ap=-1,headerColor:sp="white"})=>{const lp=useNavigate(),up=()=>lp(ap,{state:ap!==-1&&{data:ap}});return jsxRuntimeExports.jsxs("header",{className:"header",style:{background:sp},children:[jsxRuntimeExports.jsx("img",{src:back,alt:"Back Icon",style:{filter:np},onClick:up}),jsxRuntimeExports.jsx("div",{className:"center-text",style:{justifyContent:rp},children:_d}),jsxRuntimeExports.jsx("div",{className:"header-none"})]})});var dist={},_extends={},_global$1={exports:{}},global$5=_global$1.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=global$5);var _globalExports=_global$1.exports,_core={exports:{}},core$4=_core.exports={version:"2.6.12"};typeof __e=="number"&&(__e=core$4);var _coreExports=_core.exports,_aFunction=function(_d){if(typeof _d!="function")throw TypeError(_d+" is not a function!");return _d},aFunction=_aFunction,_ctx=function(_d,rp,np){if(aFunction(_d),rp===void 0)return _d;switch(np){case 1:return function(ap){return _d.call(rp,ap)};case 2:return function(ap,sp){return _d.call(rp,ap,sp)};case 3:return function(ap,sp,lp){return _d.call(rp,ap,sp,lp)}}return function(){return _d.apply(rp,arguments)}},_objectDp={},_isObject=function(_d){return typeof _d=="object"?_d!==null:typeof _d=="function"},isObject$5=_isObject,_anObject=function(_d){if(!isObject$5(_d))throw TypeError(_d+" is not an object!");return _d},_fails=function(_d){try{return!!_d()}catch{return!0}},_descriptors=!_fails(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7}),_domCreate,hasRequired_domCreate;function require_domCreate(){if(hasRequired_domCreate)return _domCreate;hasRequired_domCreate=1;var _d=_isObject,rp=_globalExports.document,np=_d(rp)&&_d(rp.createElement);return _domCreate=function(ap){return np?rp.createElement(ap):{}},_domCreate}var _ie8DomDefine=!_descriptors&&!_fails(function(){return Object.defineProperty(require_domCreate()("div"),"a",{get:function(){return 7}}).a!=7}),isObject$4=_isObject,_toPrimitive$1=function(_d,rp){if(!isObject$4(_d))return _d;var np,ap;if(rp&&typeof(np=_d.toString)=="function"&&!isObject$4(ap=np.call(_d))||typeof(np=_d.valueOf)=="function"&&!isObject$4(ap=np.call(_d))||!rp&&typeof(np=_d.toString)=="function"&&!isObject$4(ap=np.call(_d)))return ap;throw TypeError("Can't convert object to primitive value")},anObject$3=_anObject,IE8_DOM_DEFINE$1=_ie8DomDefine,toPrimitive$2=_toPrimitive$1,dP$3=Object.defineProperty;_objectDp.f=_descriptors?Object.defineProperty:function(rp,np,ap){if(anObject$3(rp),np=toPrimitive$2(np,!0),anObject$3(ap),IE8_DOM_DEFINE$1)try{return dP$3(rp,np,ap)}catch{}if("get"in ap||"set"in ap)throw TypeError("Accessors not supported!");return"value"in ap&&(rp[np]=ap.value),rp};var _propertyDesc=function(_d,rp){return{enumerable:!(_d&1),configurable:!(_d&2),writable:!(_d&4),value:rp}},dP$2=_objectDp,createDesc$2=_propertyDesc,_hide=_descriptors?function(_d,rp,np){return dP$2.f(_d,rp,createDesc$2(1,np))}:function(_d,rp,np){return _d[rp]=np,_d},hasOwnProperty$2={}.hasOwnProperty,_has=function(_d,rp){return hasOwnProperty$2.call(_d,rp)},global$4=_globalExports,core$3=_coreExports,ctx=_ctx,hide$2=_hide,has$6=_has,PROTOTYPE$2="prototype",$export$7=function(_d,rp,np){var ap=_d&$export$7.F,sp=_d&$export$7.G,lp=_d&$export$7.S,up=_d&$export$7.P,cp=_d&$export$7.B,dp=_d&$export$7.W,fp=sp?core$3:core$3[rp]||(core$3[rp]={}),pp=fp[PROTOTYPE$2],hp=sp?global$4:lp?global$4[rp]:(global$4[rp]||{})[PROTOTYPE$2],mp,gp,vp;sp&&(np=rp);for(mp in np)gp=!ap&&hp&&hp[mp]!==void 0,!(gp&&has$6(fp,mp))&&(vp=gp?hp[mp]:np[mp],fp[mp]=sp&&typeof hp[mp]!="function"?np[mp]:cp&&gp?ctx(vp,global$4):dp&&hp[mp]==vp?function(xp){var Sp=function(yp,bp,Ep){if(this instanceof xp){switch(arguments.length){case 0:return new xp;case 1:return new xp(yp);case 2:return new xp(yp,bp)}return new xp(yp,bp,Ep)}return xp.apply(this,arguments)};return Sp[PROTOTYPE$2]=xp[PROTOTYPE$2],Sp}(vp):up&&typeof vp=="function"?ctx(Function.call,vp):vp,up&&((fp.virtual||(fp.virtual={}))[mp]=vp,_d&$export$7.R&&pp&&!pp[mp]&&hide$2(pp,mp,vp)))};$export$7.F=1;$export$7.G=2;$export$7.S=4;$export$7.P=8;$export$7.B=16;$export$7.W=32;$export$7.U=64;$export$7.R=128;var _export=$export$7,toString$2={}.toString,_cof=function(_d){return toString$2.call(_d).slice(8,-1)},_iobject,hasRequired_iobject;function require_iobject(){if(hasRequired_iobject)return _iobject;hasRequired_iobject=1;var _d=_cof;return _iobject=Object("z").propertyIsEnumerable(0)?Object:function(rp){return _d(rp)=="String"?rp.split(""):Object(rp)},_iobject}var _defined=function(_d){if(_d==null)throw TypeError("Can't call method on  "+_d);return _d},IObject=require_iobject(),defined$2=_defined,_toIobject=function(_d){return IObject(defined$2(_d))},ceil=Math.ceil,floor=Math.floor,_toInteger=function(_d){return isNaN(_d=+_d)?0:(_d>0?floor:ceil)(_d)},toInteger$2=_toInteger,min$1=Math.min,_toLength=function(_d){return _d>0?min$1(toInteger$2(_d),9007199254740991):0},toInteger$1=_toInteger,max=Math.max,min=Math.min,_toAbsoluteIndex=function(_d,rp){return _d=toInteger$1(_d),_d<0?max(_d+rp,0):min(_d,rp)},toIObject$5=_toIobject,toLength=_toLength,toAbsoluteIndex=_toAbsoluteIndex,_arrayIncludes=function(_d){return function(rp,np,ap){var sp=toIObject$5(rp),lp=toLength(sp.length),up=toAbsoluteIndex(ap,lp),cp;if(_d&&np!=np){for(;lp>up;)if(cp=sp[up++],cp!=cp)return!0}else for(;lp>up;up++)if((_d||up in sp)&&sp[up]===np)return _d||up||0;return!_d&&-1}},_shared={exports:{}},_library=!0,core$2=_coreExports,global$3=_globalExports,SHARED="__core-js_shared__",store$1=global$3[SHARED]||(global$3[SHARED]={});(_shared.exports=function(_d,rp){return store$1[_d]||(store$1[_d]=rp!==void 0?rp:{})})("versions",[]).push({version:core$2.version,mode:"pure",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"});var _sharedExports=_shared.exports,id$1=0,px=Math.random(),_uid=function(_d){return"Symbol(".concat(_d===void 0?"":_d,")_",(++id$1+px).toString(36))},shared$1=_sharedExports("keys"),uid$2=_uid,_sharedKey=function(_d){return shared$1[_d]||(shared$1[_d]=uid$2(_d))},has$5=_has,toIObject$4=_toIobject,arrayIndexOf=_arrayIncludes(!1),IE_PROTO$2=_sharedKey("IE_PROTO"),_objectKeysInternal=function(_d,rp){var np=toIObject$4(_d),ap=0,sp=[],lp;for(lp in np)lp!=IE_PROTO$2&&has$5(np,lp)&&sp.push(lp);for(;rp.length>ap;)has$5(np,lp=rp[ap++])&&(~arrayIndexOf(sp,lp)||sp.push(lp));return sp},_enumBugKeys="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),$keys$1=_objectKeysInternal,enumBugKeys$1=_enumBugKeys,_objectKeys=Object.keys||function(rp){return $keys$1(rp,enumBugKeys$1)},_objectGops={};_objectGops.f=Object.getOwnPropertySymbols;var _objectPie={},hasRequired_objectPie;function require_objectPie(){return hasRequired_objectPie||(hasRequired_objectPie=1,_objectPie.f={}.propertyIsEnumerable),_objectPie}var defined$1=_defined,_toObject=function(_d){return Object(defined$1(_d))},_objectAssign,hasRequired_objectAssign;function require_objectAssign(){if(hasRequired_objectAssign)return _objectAssign;hasRequired_objectAssign=1;var _d=_descriptors,rp=_objectKeys,np=_objectGops,ap=require_objectPie(),sp=_toObject,lp=require_iobject(),up=Object.assign;return _objectAssign=!up||_fails(function(){var cp={},dp={},fp=Symbol(),pp="abcdefghijklmnopqrst";return cp[fp]=7,pp.split("").forEach(function(hp){dp[hp]=hp}),up({},cp)[fp]!=7||Object.keys(up({},dp)).join("")!=pp})?function(dp,fp){for(var pp=sp(dp),hp=arguments.length,mp=1,gp=np.f,vp=ap.f;hp>mp;)for(var xp=lp(arguments[mp++]),Sp=gp?rp(xp).concat(gp(xp)):rp(xp),yp=Sp.length,bp=0,Ep;yp>bp;)Ep=Sp[bp++],(!_d||vp.call(xp,Ep))&&(pp[Ep]=xp[Ep]);return pp}:up,_objectAssign}var $export$6=_export;$export$6($export$6.S+$export$6.F,"Object",{assign:require_objectAssign()});var assign$2=_coreExports.Object.assign,assign$1={default:assign$2,__esModule:!0};_extends.__esModule=!0;var _assign=assign$1,_assign2=_interopRequireDefault$H(_assign);function _interopRequireDefault$H(_d){return _d&&_d.__esModule?_d:{default:_d}}_extends.default=_assign2.default||function(_d){for(var rp=1;rp<arguments.length;rp++){var np=arguments[rp];for(var ap in np)Object.prototype.hasOwnProperty.call(np,ap)&&(_d[ap]=np[ap])}return _d};var has$4=_has,toObject$2=_toObject,IE_PROTO$1=_sharedKey("IE_PROTO"),ObjectProto$1=Object.prototype,_objectGpo=Object.getPrototypeOf||function(_d){return _d=toObject$2(_d),has$4(_d,IE_PROTO$1)?_d[IE_PROTO$1]:typeof _d.constructor=="function"&&_d instanceof _d.constructor?_d.constructor.prototype:_d instanceof Object?ObjectProto$1:null},$export$5=_export,core$1=_coreExports,fails=_fails,_objectSap=function(_d,rp){var np=(core$1.Object||{})[_d]||Object[_d],ap={};ap[_d]=rp(np),$export$5($export$5.S+$export$5.F*fails(function(){np(1)}),"Object",ap)},toObject$1=_toObject,$getPrototypeOf=_objectGpo;_objectSap("getPrototypeOf",function(){return function(rp){return $getPrototypeOf(toObject$1(rp))}});var getPrototypeOf$3=_coreExports.Object.getPrototypeOf,getPrototypeOf$2={default:getPrototypeOf$3,__esModule:!0},classCallCheck={};classCallCheck.__esModule=!0;classCallCheck.default=function(_d,rp){if(!(_d instanceof rp))throw new TypeError("Cannot call a class as a function")};var createClass={},$export$4=_export;$export$4($export$4.S+$export$4.F*!_descriptors,"Object",{defineProperty:_objectDp.f});var $Object$1=_coreExports.Object,defineProperty$2=function(rp,np,ap){return $Object$1.defineProperty(rp,np,ap)},defineProperty$1={default:defineProperty$2,__esModule:!0};createClass.__esModule=!0;var _defineProperty$2=defineProperty$1,_defineProperty2=_interopRequireDefault$G(_defineProperty$2);function _interopRequireDefault$G(_d){return _d&&_d.__esModule?_d:{default:_d}}createClass.default=function(){function _d(rp,np){for(var ap=0;ap<np.length;ap++){var sp=np[ap];sp.enumerable=sp.enumerable||!1,sp.configurable=!0,"value"in sp&&(sp.writable=!0),(0,_defineProperty2.default)(rp,sp.key,sp)}}return function(rp,np,ap){return np&&_d(rp.prototype,np),ap&&_d(rp,ap),rp}}();var possibleConstructorReturn={},_typeof$2={},toInteger=_toInteger,defined=_defined,_stringAt=function(_d){return function(rp,np){var ap=String(defined(rp)),sp=toInteger(np),lp=ap.length,up,cp;return sp<0||sp>=lp?_d?"":void 0:(up=ap.charCodeAt(sp),up<55296||up>56319||sp+1===lp||(cp=ap.charCodeAt(sp+1))<56320||cp>57343?_d?ap.charAt(sp):up:_d?ap.slice(sp,sp+2):(up-55296<<10)+(cp-56320)+65536)}},_redefine=_hide,_iterators={},dP$1=_objectDp,anObject$2=_anObject,getKeys$1=_objectKeys,_objectDps=_descriptors?Object.defineProperties:function(rp,np){anObject$2(rp);for(var ap=getKeys$1(np),sp=ap.length,lp=0,up;sp>lp;)dP$1.f(rp,up=ap[lp++],np[up]);return rp},_html,hasRequired_html;function require_html(){if(hasRequired_html)return _html;hasRequired_html=1;var _d=_globalExports.document;return _html=_d&&_d.documentElement,_html}var anObject$1=_anObject,dPs=_objectDps,enumBugKeys=_enumBugKeys,IE_PROTO=_sharedKey("IE_PROTO"),Empty=function(){},PROTOTYPE$1="prototype",createDict=function(){var _d=require_domCreate()("iframe"),rp=enumBugKeys.length,np="<",ap=">",sp;for(_d.style.display="none",require_html().appendChild(_d),_d.src="javascript:",sp=_d.contentWindow.document,sp.open(),sp.write(np+"script"+ap+"document.F=Object"+np+"/script"+ap),sp.close(),createDict=sp.F;rp--;)delete createDict[PROTOTYPE$1][enumBugKeys[rp]];return createDict()},_objectCreate=Object.create||function(rp,np){var ap;return rp!==null?(Empty[PROTOTYPE$1]=anObject$1(rp),ap=new Empty,Empty[PROTOTYPE$1]=null,ap[IE_PROTO]=rp):ap=createDict(),np===void 0?ap:dPs(ap,np)},_wks={exports:{}},store=_sharedExports("wks"),uid$1=_uid,Symbol$1=_globalExports.Symbol,USE_SYMBOL=typeof Symbol$1=="function",$exports=_wks.exports=function(_d){return store[_d]||(store[_d]=USE_SYMBOL&&Symbol$1[_d]||(USE_SYMBOL?Symbol$1:uid$1)("Symbol."+_d))};$exports.store=store;var _wksExports=_wks.exports,def=_objectDp.f,has$3=_has,TAG=_wksExports("toStringTag"),_setToStringTag=function(_d,rp,np){_d&&!has$3(_d=np?_d:_d.prototype,TAG)&&def(_d,TAG,{configurable:!0,value:rp})},create$2=_objectCreate,descriptor=_propertyDesc,setToStringTag$2=_setToStringTag,IteratorPrototype={};_hide(IteratorPrototype,_wksExports("iterator"),function(){return this});var _iterCreate=function(_d,rp,np){_d.prototype=create$2(IteratorPrototype,{next:descriptor(1,np)}),setToStringTag$2(_d,rp+" Iterator")},$export$3=_export,redefine$1=_redefine,hide$1=_hide,Iterators$2=_iterators,$iterCreate=_iterCreate,setToStringTag$1=_setToStringTag,getPrototypeOf$1=_objectGpo,ITERATOR=_wksExports("iterator"),BUGGY=!([].keys&&"next"in[].keys()),FF_ITERATOR="@@iterator",KEYS="keys",VALUES="values",returnThis=function(){return this},_iterDefine=function(_d,rp,np,ap,sp,lp,up){$iterCreate(np,rp,ap);var cp=function(Ep){if(!BUGGY&&Ep in hp)return hp[Ep];switch(Ep){case KEYS:return function(){return new np(this,Ep)};case VALUES:return function(){return new np(this,Ep)}}return function(){return new np(this,Ep)}},dp=rp+" Iterator",fp=sp==VALUES,pp=!1,hp=_d.prototype,mp=hp[ITERATOR]||hp[FF_ITERATOR]||sp&&hp[sp],gp=mp||cp(sp),vp=sp?fp?cp("entries"):gp:void 0,xp=rp=="Array"&&hp.entries||mp,Sp,yp,bp;if(xp&&(bp=getPrototypeOf$1(xp.call(new _d)),bp!==Object.prototype&&bp.next&&setToStringTag$1(bp,dp,!0)),fp&&mp&&mp.name!==VALUES&&(pp=!0,gp=function(){return mp.call(this)}),up&&(BUGGY||pp||!hp[ITERATOR])&&hide$1(hp,ITERATOR,gp),Iterators$2[rp]=gp,Iterators$2[dp]=returnThis,sp)if(Sp={values:fp?gp:cp(VALUES),keys:lp?gp:cp(KEYS),entries:vp},up)for(yp in Sp)yp in hp||redefine$1(hp,yp,Sp[yp]);else $export$3($export$3.P+$export$3.F*(BUGGY||pp),rp,Sp);return Sp},$at=_stringAt(!0);_iterDefine(String,"String",function(_d){this._t=String(_d),this._i=0},function(){var _d=this._t,rp=this._i,np;return rp>=_d.length?{value:void 0,done:!0}:(np=$at(_d,rp),this._i+=np.length,{value:np,done:!1})});var _iterStep=function(_d,rp){return{value:rp,done:!!_d}},step=_iterStep,Iterators$1=_iterators,toIObject$3=_toIobject;_iterDefine(Array,"Array",function(_d,rp){this._t=toIObject$3(_d),this._i=0,this._k=rp},function(){var _d=this._t,rp=this._k,np=this._i++;return!_d||np>=_d.length?(this._t=void 0,step(1)):rp=="keys"?step(0,np):rp=="values"?step(0,_d[np]):step(0,[np,_d[np]])},"values");Iterators$1.Arguments=Iterators$1.Array;var global$2=_globalExports,hide=_hide,Iterators=_iterators,TO_STRING_TAG=_wksExports("toStringTag"),DOMIterables="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(",");for(var i$1=0;i$1<DOMIterables.length;i$1++){var NAME=DOMIterables[i$1],Collection=global$2[NAME],proto=Collection&&Collection.prototype;proto&&!proto[TO_STRING_TAG]&&hide(proto,TO_STRING_TAG,NAME),Iterators[NAME]=Iterators.Array}var _wksExt={};_wksExt.f=_wksExports;var iterator$1=_wksExt.f("iterator"),iterator={default:iterator$1,__esModule:!0},_meta={exports:{}},META$1=_uid("meta"),isObject$3=_isObject,has$2=_has,setDesc=_objectDp.f,id=0,isExtensible=Object.isExtensible||function(){return!0},FREEZE=!_fails(function(){return isExtensible(Object.preventExtensions({}))}),setMeta=function(_d){setDesc(_d,META$1,{value:{i:"O"+ ++id,w:{}}})},fastKey=function(_d,rp){if(!isObject$3(_d))return typeof _d=="symbol"?_d:(typeof _d=="string"?"S":"P")+_d;if(!has$2(_d,META$1)){if(!isExtensible(_d))return"F";if(!rp)return"E";setMeta(_d)}return _d[META$1].i},getWeak=function(_d,rp){if(!has$2(_d,META$1)){if(!isExtensible(_d))return!0;if(!rp)return!1;setMeta(_d)}return _d[META$1].w},onFreeze=function(_d){return FREEZE&&meta.NEED&&isExtensible(_d)&&!has$2(_d,META$1)&&setMeta(_d),_d},meta=_meta.exports={KEY:META$1,NEED:!1,fastKey,getWeak,onFreeze},_metaExports=_meta.exports,core=_coreExports,wksExt$1=_wksExt,defineProperty=_objectDp.f,_wksDefine=function(_d){var rp=core.Symbol||(core.Symbol={});_d.charAt(0)!="_"&&!(_d in rp)&&defineProperty(rp,_d,{value:wksExt$1.f(_d)})},getKeys=_objectKeys,gOPS=_objectGops,pIE$1=require_objectPie(),_enumKeys=function(_d){var rp=getKeys(_d),np=gOPS.f;if(np)for(var ap=np(_d),sp=pIE$1.f,lp=0,up;ap.length>lp;)sp.call(_d,up=ap[lp++])&&rp.push(up);return rp},cof=_cof,_isArray=Array.isArray||function(rp){return cof(rp)=="Array"},_objectGopnExt={},_objectGopn={},hasRequired_objectGopn;function require_objectGopn(){if(hasRequired_objectGopn)return _objectGopn;hasRequired_objectGopn=1;var _d=_objectKeysInternal,rp=_enumBugKeys.concat("length","prototype");return _objectGopn.f=Object.getOwnPropertyNames||function(ap){return _d(ap,rp)},_objectGopn}var toIObject$2=_toIobject,gOPN$1=require_objectGopn().f,toString$1={}.toString,windowNames=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],getWindowNames=function(_d){try{return gOPN$1(_d)}catch{return windowNames.slice()}};_objectGopnExt.f=function(rp){return windowNames&&toString$1.call(rp)=="[object Window]"?getWindowNames(rp):gOPN$1(toIObject$2(rp))};var _objectGopd={},pIE=require_objectPie(),createDesc$1=_propertyDesc,toIObject$1=_toIobject,toPrimitive$1=_toPrimitive$1,has$1=_has,IE8_DOM_DEFINE=_ie8DomDefine,gOPD$1=Object.getOwnPropertyDescriptor;_objectGopd.f=_descriptors?gOPD$1:function(rp,np){if(rp=toIObject$1(rp),np=toPrimitive$1(np,!0),IE8_DOM_DEFINE)try{return gOPD$1(rp,np)}catch{}if(has$1(rp,np))return createDesc$1(!pIE.f.call(rp,np),rp[np])};var global$1=_globalExports,has=_has,DESCRIPTORS=_descriptors,$export$2=_export,redefine=_redefine,META=_metaExports.KEY,$fails=_fails,shared=_sharedExports,setToStringTag=_setToStringTag,uid=_uid,wks=_wksExports,wksExt=_wksExt,wksDefine=_wksDefine,enumKeys=_enumKeys,isArray$1=_isArray,anObject=_anObject,isObject$2=_isObject,toObject=_toObject,toIObject=_toIobject,toPrimitive=_toPrimitive$1,createDesc=_propertyDesc,_create$1=_objectCreate,gOPNExt=_objectGopnExt,$GOPD=_objectGopd,$GOPS=_objectGops,$DP=_objectDp,$keys=_objectKeys,gOPD=$GOPD.f,dP=$DP.f,gOPN=gOPNExt.f,$Symbol=global$1.Symbol,$JSON=global$1.JSON,_stringify$3=$JSON&&$JSON.stringify,PROTOTYPE="prototype",HIDDEN=wks("_hidden"),TO_PRIMITIVE=wks("toPrimitive"),isEnum={}.propertyIsEnumerable,SymbolRegistry=shared("symbol-registry"),AllSymbols=shared("symbols"),OPSymbols=shared("op-symbols"),ObjectProto=Object[PROTOTYPE],USE_NATIVE=typeof $Symbol=="function"&&!!$GOPS.f,QObject=global$1.QObject,setter=!QObject||!QObject[PROTOTYPE]||!QObject[PROTOTYPE].findChild,setSymbolDesc=DESCRIPTORS&&$fails(function(){return _create$1(dP({},"a",{get:function(){return dP(this,"a",{value:7}).a}})).a!=7})?function(_d,rp,np){var ap=gOPD(ObjectProto,rp);ap&&delete ObjectProto[rp],dP(_d,rp,np),ap&&_d!==ObjectProto&&dP(ObjectProto,rp,ap)}:dP,wrap=function(_d){var rp=AllSymbols[_d]=_create$1($Symbol[PROTOTYPE]);return rp._k=_d,rp},isSymbol=USE_NATIVE&&typeof $Symbol.iterator=="symbol"?function(_d){return typeof _d=="symbol"}:function(_d){return _d instanceof $Symbol},$defineProperty=function(rp,np,ap){return rp===ObjectProto&&$defineProperty(OPSymbols,np,ap),anObject(rp),np=toPrimitive(np,!0),anObject(ap),has(AllSymbols,np)?(ap.enumerable?(has(rp,HIDDEN)&&rp[HIDDEN][np]&&(rp[HIDDEN][np]=!1),ap=_create$1(ap,{enumerable:createDesc(0,!1)})):(has(rp,HIDDEN)||dP(rp,HIDDEN,createDesc(1,{})),rp[HIDDEN][np]=!0),setSymbolDesc(rp,np,ap)):dP(rp,np,ap)},$defineProperties=function(rp,np){anObject(rp);for(var ap=enumKeys(np=toIObject(np)),sp=0,lp=ap.length,up;lp>sp;)$defineProperty(rp,up=ap[sp++],np[up]);return rp},$create=function(rp,np){return np===void 0?_create$1(rp):$defineProperties(_create$1(rp),np)},$propertyIsEnumerable=function(rp){var np=isEnum.call(this,rp=toPrimitive(rp,!0));return this===ObjectProto&&has(AllSymbols,rp)&&!has(OPSymbols,rp)?!1:np||!has(this,rp)||!has(AllSymbols,rp)||has(this,HIDDEN)&&this[HIDDEN][rp]?np:!0},$getOwnPropertyDescriptor=function(rp,np){if(rp=toIObject(rp),np=toPrimitive(np,!0),!(rp===ObjectProto&&has(AllSymbols,np)&&!has(OPSymbols,np))){var ap=gOPD(rp,np);return ap&&has(AllSymbols,np)&&!(has(rp,HIDDEN)&&rp[HIDDEN][np])&&(ap.enumerable=!0),ap}},$getOwnPropertyNames=function(rp){for(var np=gOPN(toIObject(rp)),ap=[],sp=0,lp;np.length>sp;)!has(AllSymbols,lp=np[sp++])&&lp!=HIDDEN&&lp!=META&&ap.push(lp);return ap},$getOwnPropertySymbols=function(rp){for(var np=rp===ObjectProto,ap=gOPN(np?OPSymbols:toIObject(rp)),sp=[],lp=0,up;ap.length>lp;)has(AllSymbols,up=ap[lp++])&&(!np||has(ObjectProto,up))&&sp.push(AllSymbols[up]);return sp};USE_NATIVE||($Symbol=function(){if(this instanceof $Symbol)throw TypeError("Symbol is not a constructor!");var rp=uid(arguments.length>0?arguments[0]:void 0),np=function(ap){this===ObjectProto&&np.call(OPSymbols,ap),has(this,HIDDEN)&&has(this[HIDDEN],rp)&&(this[HIDDEN][rp]=!1),setSymbolDesc(this,rp,createDesc(1,ap))};return DESCRIPTORS&&setter&&setSymbolDesc(ObjectProto,rp,{configurable:!0,set:np}),wrap(rp)},redefine($Symbol[PROTOTYPE],"toString",function(){return this._k}),$GOPD.f=$getOwnPropertyDescriptor,$DP.f=$defineProperty,require_objectGopn().f=gOPNExt.f=$getOwnPropertyNames,require_objectPie().f=$propertyIsEnumerable,$GOPS.f=$getOwnPropertySymbols,DESCRIPTORS&&!_library&&redefine(ObjectProto,"propertyIsEnumerable",$propertyIsEnumerable),wksExt.f=function(_d){return wrap(wks(_d))});$export$2($export$2.G+$export$2.W+$export$2.F*!USE_NATIVE,{Symbol:$Symbol});for(var es6Symbols="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),j=0;es6Symbols.length>j;)wks(es6Symbols[j++]);for(var wellKnownSymbols=$keys(wks.store),k=0;wellKnownSymbols.length>k;)wksDefine(wellKnownSymbols[k++]);$export$2($export$2.S+$export$2.F*!USE_NATIVE,"Symbol",{for:function(_d){return has(SymbolRegistry,_d+="")?SymbolRegistry[_d]:SymbolRegistry[_d]=$Symbol(_d)},keyFor:function(rp){if(!isSymbol(rp))throw TypeError(rp+" is not a symbol!");for(var np in SymbolRegistry)if(SymbolRegistry[np]===rp)return np},useSetter:function(){setter=!0},useSimple:function(){setter=!1}});$export$2($export$2.S+$export$2.F*!USE_NATIVE,"Object",{create:$create,defineProperty:$defineProperty,defineProperties:$defineProperties,getOwnPropertyDescriptor:$getOwnPropertyDescriptor,getOwnPropertyNames:$getOwnPropertyNames,getOwnPropertySymbols:$getOwnPropertySymbols});var FAILS_ON_PRIMITIVES=$fails(function(){$GOPS.f(1)});$export$2($export$2.S+$export$2.F*FAILS_ON_PRIMITIVES,"Object",{getOwnPropertySymbols:function(rp){return $GOPS.f(toObject(rp))}});$JSON&&$export$2($export$2.S+$export$2.F*(!USE_NATIVE||$fails(function(){var _d=$Symbol();return _stringify$3([_d])!="[null]"||_stringify$3({a:_d})!="{}"||_stringify$3(Object(_d))!="{}"})),"JSON",{stringify:function(rp){for(var np=[rp],ap=1,sp,lp;arguments.length>ap;)np.push(arguments[ap++]);if(lp=sp=np[1],!(!isObject$2(sp)&&rp===void 0||isSymbol(rp)))return isArray$1(sp)||(sp=function(up,cp){if(typeof lp=="function"&&(cp=lp.call(this,up,cp)),!isSymbol(cp))return cp}),np[1]=sp,_stringify$3.apply($JSON,np)}});$Symbol[PROTOTYPE][TO_PRIMITIVE]||_hide($Symbol[PROTOTYPE],TO_PRIMITIVE,$Symbol[PROTOTYPE].valueOf);setToStringTag($Symbol,"Symbol");setToStringTag(Math,"Math",!0);setToStringTag(global$1.JSON,"JSON",!0);_wksDefine("asyncIterator");_wksDefine("observable");var symbol$1=_coreExports.Symbol,symbol={default:symbol$1,__esModule:!0};_typeof$2.__esModule=!0;var _iterator=iterator,_iterator2=_interopRequireDefault$F(_iterator),_symbol=symbol,_symbol2=_interopRequireDefault$F(_symbol),_typeof$1=typeof _symbol2.default=="function"&&typeof _iterator2.default=="symbol"?function(_d){return typeof _d}:function(_d){return _d&&typeof _symbol2.default=="function"&&_d.constructor===_symbol2.default&&_d!==_symbol2.default.prototype?"symbol":typeof _d};function _interopRequireDefault$F(_d){return _d&&_d.__esModule?_d:{default:_d}}_typeof$2.default=typeof _symbol2.default=="function"&&_typeof$1(_iterator2.default)==="symbol"?function(_d){return typeof _d>"u"?"undefined":_typeof$1(_d)}:function(_d){return _d&&typeof _symbol2.default=="function"&&_d.constructor===_symbol2.default&&_d!==_symbol2.default.prototype?"symbol":typeof _d>"u"?"undefined":_typeof$1(_d)};possibleConstructorReturn.__esModule=!0;var _typeof2$1=_typeof$2,_typeof3$1=_interopRequireDefault$E(_typeof2$1);function _interopRequireDefault$E(_d){return _d&&_d.__esModule?_d:{default:_d}}possibleConstructorReturn.default=function(_d,rp){if(!_d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return rp&&((typeof rp>"u"?"undefined":(0,_typeof3$1.default)(rp))==="object"||typeof rp=="function")?rp:_d};var inherits$1={},_setProto,hasRequired_setProto;function require_setProto(){if(hasRequired_setProto)return _setProto;hasRequired_setProto=1;var _d=_isObject,rp=_anObject,np=function(ap,sp){if(rp(ap),!_d(sp)&&sp!==null)throw TypeError(sp+": can't set as prototype!")};return _setProto={set:Object.setPrototypeOf||("__proto__"in{}?function(ap,sp,lp){try{lp=_ctx(Function.call,_objectGopd.f(Object.prototype,"__proto__").set,2),lp(ap,[]),sp=!(ap instanceof Array)}catch{sp=!0}return function(cp,dp){return np(cp,dp),sp?cp.__proto__=dp:lp(cp,dp),cp}}({},!1):void 0),check:np},_setProto}var $export$1=_export;$export$1($export$1.S,"Object",{setPrototypeOf:require_setProto().set});var setPrototypeOf$1=_coreExports.Object.setPrototypeOf,setPrototypeOf={default:setPrototypeOf$1,__esModule:!0},$export=_export;$export($export.S,"Object",{create:_objectCreate});var $Object=_coreExports.Object,create$1=function(rp,np){return $Object.create(rp,np)},create={default:create$1,__esModule:!0};inherits$1.__esModule=!0;var _setPrototypeOf=setPrototypeOf,_setPrototypeOf2=_interopRequireDefault$D(_setPrototypeOf),_create=create,_create2=_interopRequireDefault$D(_create),_typeof2=_typeof$2,_typeof3=_interopRequireDefault$D(_typeof2);function _interopRequireDefault$D(_d){return _d&&_d.__esModule?_d:{default:_d}}inherits$1.default=function(_d,rp){if(typeof rp!="function"&&rp!==null)throw new TypeError("Super expression must either be null or a function, not "+(typeof rp>"u"?"undefined":(0,_typeof3.default)(rp)));_d.prototype=(0,_create2.default)(rp&&rp.prototype,{constructor:{value:_d,enumerable:!1,writable:!0,configurable:!0}}),rp&&(_setPrototypeOf2.default?(0,_setPrototypeOf2.default)(_d,rp):_d.__proto__=rp)};var lottie={exports:{}};(function(module,exports){typeof navigator<"u"&&function(_d,rp){module.exports=rp()}(commonjsGlobal,function(){var svgNS="http://www.w3.org/2000/svg",locationHref="",_useWebWorker=!1,initialDefaultFrame=-999999,setWebWorker=function(rp){_useWebWorker=!!rp},getWebWorker=function(){return _useWebWorker},setLocationHref=function(rp){locationHref=rp},getLocationHref=function(){return locationHref};function createTag(_d){return document.createElement(_d)}function extendPrototype(_d,rp){var np,ap=_d.length,sp;for(np=0;np<ap;np+=1){sp=_d[np].prototype;for(var lp in sp)Object.prototype.hasOwnProperty.call(sp,lp)&&(rp.prototype[lp]=sp[lp])}}function getDescriptor(_d,rp){return Object.getOwnPropertyDescriptor(_d,rp)}function createProxyFunction(_d){function rp(){}return rp.prototype=_d,rp}var audioControllerFactory=function(){function _d(rp){this.audios=[],this.audioFactory=rp,this._volume=1,this._isMuted=!1}return _d.prototype={addAudio:function(np){this.audios.push(np)},pause:function(){var np,ap=this.audios.length;for(np=0;np<ap;np+=1)this.audios[np].pause()},resume:function(){var np,ap=this.audios.length;for(np=0;np<ap;np+=1)this.audios[np].resume()},setRate:function(np){var ap,sp=this.audios.length;for(ap=0;ap<sp;ap+=1)this.audios[ap].setRate(np)},createAudio:function(np){return this.audioFactory?this.audioFactory(np):window.Howl?new window.Howl({src:[np]}):{isPlaying:!1,play:function(){this.isPlaying=!0},seek:function(){this.isPlaying=!1},playing:function(){},rate:function(){},setVolume:function(){}}},setAudioFactory:function(np){this.audioFactory=np},setVolume:function(np){this._volume=np,this._updateVolume()},mute:function(){this._isMuted=!0,this._updateVolume()},unmute:function(){this._isMuted=!1,this._updateVolume()},getVolume:function(){return this._volume},_updateVolume:function(){var np,ap=this.audios.length;for(np=0;np<ap;np+=1)this.audios[np].volume(this._volume*(this._isMuted?0:1))}},function(){return new _d}}(),createTypedArray=function(){function _d(np,ap){var sp=0,lp=[],up;switch(np){case"int16":case"uint8c":up=1;break;default:up=1.1;break}for(sp=0;sp<ap;sp+=1)lp.push(up);return lp}function rp(np,ap){return np==="float32"?new Float32Array(ap):np==="int16"?new Int16Array(ap):np==="uint8c"?new Uint8ClampedArray(ap):_d(np,ap)}return typeof Uint8ClampedArray=="function"&&typeof Float32Array=="function"?rp:_d}();function createSizedArray(_d){return Array.apply(null,{length:_d})}function _typeof$6(_d){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$6=function(np){return typeof np}:_typeof$6=function(np){return np&&typeof Symbol=="function"&&np.constructor===Symbol&&np!==Symbol.prototype?"symbol":typeof np},_typeof$6(_d)}var subframeEnabled=!0,expressionsPlugin=null,expressionsInterfaces=null,idPrefix$1="",isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),bmPow=Math.pow,bmSqrt=Math.sqrt,bmFloor=Math.floor,bmMax=Math.max,bmMin=Math.min,BMMath={};(function(){var _d=["abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","cbrt","expm1","clz32","cos","cosh","exp","floor","fround","hypot","imul","log","log1p","log2","log10","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc","E","LN10","LN2","LOG10E","LOG2E","PI","SQRT1_2","SQRT2"],rp,np=_d.length;for(rp=0;rp<np;rp+=1)BMMath[_d[rp]]=Math[_d[rp]]})(),BMMath.random=Math.random,BMMath.abs=function(_d){var rp=_typeof$6(_d);if(rp==="object"&&_d.length){var np=createSizedArray(_d.length),ap,sp=_d.length;for(ap=0;ap<sp;ap+=1)np[ap]=Math.abs(_d[ap]);return np}return Math.abs(_d)};var defaultCurveSegments=150,degToRads=Math.PI/180,roundCorner=.5519;function styleDiv(_d){_d.style.position="absolute",_d.style.top=0,_d.style.left=0,_d.style.display="block",_d.style.transformOrigin="0 0",_d.style.webkitTransformOrigin="0 0",_d.style.backfaceVisibility="visible",_d.style.webkitBackfaceVisibility="visible",_d.style.transformStyle="preserve-3d",_d.style.webkitTransformStyle="preserve-3d",_d.style.mozTransformStyle="preserve-3d"}function BMEnterFrameEvent(_d,rp,np,ap){this.type=_d,this.currentTime=rp,this.totalTime=np,this.direction=ap<0?-1:1}function BMCompleteEvent(_d,rp){this.type=_d,this.direction=rp<0?-1:1}function BMCompleteLoopEvent(_d,rp,np,ap){this.type=_d,this.currentLoop=np,this.totalLoops=rp,this.direction=ap<0?-1:1}function BMSegmentStartEvent(_d,rp,np){this.type=_d,this.firstFrame=rp,this.totalFrames=np}function BMDestroyEvent(_d,rp){this.type=_d,this.target=rp}function BMRenderFrameErrorEvent(_d,rp){this.type="renderFrameError",this.nativeError=_d,this.currentTime=rp}function BMConfigErrorEvent(_d){this.type="configError",this.nativeError=_d}var createElementID=function(){var _d=0;return function(){return _d+=1,idPrefix$1+"__lottie_element_"+_d}}();function HSVtoRGB(_d,rp,np){var ap,sp,lp,up,cp,dp,fp,pp;switch(up=Math.floor(_d*6),cp=_d*6-up,dp=np*(1-rp),fp=np*(1-cp*rp),pp=np*(1-(1-cp)*rp),up%6){case 0:ap=np,sp=pp,lp=dp;break;case 1:ap=fp,sp=np,lp=dp;break;case 2:ap=dp,sp=np,lp=pp;break;case 3:ap=dp,sp=fp,lp=np;break;case 4:ap=pp,sp=dp,lp=np;break;case 5:ap=np,sp=dp,lp=fp;break}return[ap,sp,lp]}function RGBtoHSV(_d,rp,np){var ap=Math.max(_d,rp,np),sp=Math.min(_d,rp,np),lp=ap-sp,up,cp=ap===0?0:lp/ap,dp=ap/255;switch(ap){case sp:up=0;break;case _d:up=rp-np+lp*(rp<np?6:0),up/=6*lp;break;case rp:up=np-_d+lp*2,up/=6*lp;break;case np:up=_d-rp+lp*4,up/=6*lp;break}return[up,cp,dp]}function addSaturationToRGB(_d,rp){var np=RGBtoHSV(_d[0]*255,_d[1]*255,_d[2]*255);return np[1]+=rp,np[1]>1?np[1]=1:np[1]<=0&&(np[1]=0),HSVtoRGB(np[0],np[1],np[2])}function addBrightnessToRGB(_d,rp){var np=RGBtoHSV(_d[0]*255,_d[1]*255,_d[2]*255);return np[2]+=rp,np[2]>1?np[2]=1:np[2]<0&&(np[2]=0),HSVtoRGB(np[0],np[1],np[2])}function addHueToRGB(_d,rp){var np=RGBtoHSV(_d[0]*255,_d[1]*255,_d[2]*255);return np[0]+=rp/360,np[0]>1?np[0]-=1:np[0]<0&&(np[0]+=1),HSVtoRGB(np[0],np[1],np[2])}var rgbToHex=function(){var _d=[],rp,np;for(rp=0;rp<256;rp+=1)np=rp.toString(16),_d[rp]=np.length===1?"0"+np:np;return function(ap,sp,lp){return ap<0&&(ap=0),sp<0&&(sp=0),lp<0&&(lp=0),"#"+_d[ap]+_d[sp]+_d[lp]}}(),setSubframeEnabled=function(rp){subframeEnabled=!!rp},getSubframeEnabled=function(){return subframeEnabled},setExpressionsPlugin=function(rp){expressionsPlugin=rp},getExpressionsPlugin=function(){return expressionsPlugin},setExpressionInterfaces=function(rp){expressionsInterfaces=rp},getExpressionInterfaces=function(){return expressionsInterfaces},setDefaultCurveSegments=function(rp){defaultCurveSegments=rp},getDefaultCurveSegments=function(){return defaultCurveSegments},setIdPrefix=function(rp){idPrefix$1=rp};function createNS(_d){return document.createElementNS(svgNS,_d)}function _typeof$5(_d){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$5=function(np){return typeof np}:_typeof$5=function(np){return np&&typeof Symbol=="function"&&np.constructor===Symbol&&np!==Symbol.prototype?"symbol":typeof np},_typeof$5(_d)}var dataManager=function(){var _d=1,rp=[],np,ap,sp={onmessage:function(){},postMessage:function(gp){np({data:gp})}},lp={postMessage:function(gp){sp.onmessage({data:gp})}};function up(mp){if(window.Worker&&window.Blob&&getWebWorker()){var gp=new Blob(["var _workerSelf = self; self.onmessage = ",mp.toString()],{type:"text/javascript"}),vp=URL.createObjectURL(gp);return new Worker(vp)}return np=mp,sp}function cp(){ap||(ap=up(function(gp){function vp(){function Sp(Fp,Ip){var Pp,Tp,Np=Fp.length,jp,Vp,zp,Wp;for(Tp=0;Tp<Np;Tp+=1)if(Pp=Fp[Tp],"ks"in Pp&&!Pp.completed){if(Pp.completed=!0,Pp.hasMask){var Up=Pp.masksProperties;for(Vp=Up.length,jp=0;jp<Vp;jp+=1)if(Up[jp].pt.k.i)_p(Up[jp].pt.k);else for(Wp=Up[jp].pt.k.length,zp=0;zp<Wp;zp+=1)Up[jp].pt.k[zp].s&&_p(Up[jp].pt.k[zp].s[0]),Up[jp].pt.k[zp].e&&_p(Up[jp].pt.k[zp].e[0])}Pp.ty===0?(Pp.layers=Ep(Pp.refId,Ip),Sp(Pp.layers,Ip)):Pp.ty===4?wp(Pp.shapes):Pp.ty===5&&kp(Pp)}}function yp(Fp,Ip){if(Fp){var Pp=0,Tp=Fp.length;for(Pp=0;Pp<Tp;Pp+=1)Fp[Pp].t===1&&(Fp[Pp].data.layers=Ep(Fp[Pp].data.refId,Ip),Sp(Fp[Pp].data.layers,Ip))}}function bp(Fp,Ip){for(var Pp=0,Tp=Ip.length;Pp<Tp;){if(Ip[Pp].id===Fp)return Ip[Pp];Pp+=1}return null}function Ep(Fp,Ip){var Pp=bp(Fp,Ip);return Pp?Pp.layers.__used?JSON.parse(JSON.stringify(Pp.layers)):(Pp.layers.__used=!0,Pp.layers):null}function wp(Fp){var Ip,Pp=Fp.length,Tp,Np;for(Ip=Pp-1;Ip>=0;Ip-=1)if(Fp[Ip].ty==="sh")if(Fp[Ip].ks.k.i)_p(Fp[Ip].ks.k);else for(Np=Fp[Ip].ks.k.length,Tp=0;Tp<Np;Tp+=1)Fp[Ip].ks.k[Tp].s&&_p(Fp[Ip].ks.k[Tp].s[0]),Fp[Ip].ks.k[Tp].e&&_p(Fp[Ip].ks.k[Tp].e[0]);else Fp[Ip].ty==="gr"&&wp(Fp[Ip].it)}function _p(Fp){var Ip,Pp=Fp.i.length;for(Ip=0;Ip<Pp;Ip+=1)Fp.i[Ip][0]+=Fp.v[Ip][0],Fp.i[Ip][1]+=Fp.v[Ip][1],Fp.o[Ip][0]+=Fp.v[Ip][0],Fp.o[Ip][1]+=Fp.v[Ip][1]}function Rp(Fp,Ip){var Pp=Ip?Ip.split("."):[100,100,100];return Fp[0]>Pp[0]?!0:Pp[0]>Fp[0]?!1:Fp[1]>Pp[1]?!0:Pp[1]>Fp[1]?!1:Fp[2]>Pp[2]?!0:Pp[2]>Fp[2]?!1:null}var $p=function(){var Fp=[4,4,14];function Ip(Tp){var Np=Tp.t.d;Tp.t.d={k:[{s:Np,t:0}]}}function Pp(Tp){var Np,jp=Tp.length;for(Np=0;Np<jp;Np+=1)Tp[Np].ty===5&&Ip(Tp[Np])}return function(Tp){if(Rp(Fp,Tp.v)&&(Pp(Tp.layers),Tp.assets)){var Np,jp=Tp.assets.length;for(Np=0;Np<jp;Np+=1)Tp.assets[Np].layers&&Pp(Tp.assets[Np].layers)}}}(),Cp=function(){var Fp=[4,7,99];return function(Ip){if(Ip.chars&&!Rp(Fp,Ip.v)){var Pp,Tp=Ip.chars.length;for(Pp=0;Pp<Tp;Pp+=1){var Np=Ip.chars[Pp];Np.data&&Np.data.shapes&&(wp(Np.data.shapes),Np.data.ip=0,Np.data.op=99999,Np.data.st=0,Np.data.sr=1,Np.data.ks={p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0}},Ip.chars[Pp].t||(Np.data.shapes.push({ty:"no"}),Np.data.shapes[0].it.push({p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0},sk:{k:0,a:0},sa:{k:0,a:0},ty:"tr"})))}}}}(),Ap=function(){var Fp=[5,7,15];function Ip(Tp){var Np=Tp.t.p;typeof Np.a=="number"&&(Np.a={a:0,k:Np.a}),typeof Np.p=="number"&&(Np.p={a:0,k:Np.p}),typeof Np.r=="number"&&(Np.r={a:0,k:Np.r})}function Pp(Tp){var Np,jp=Tp.length;for(Np=0;Np<jp;Np+=1)Tp[Np].ty===5&&Ip(Tp[Np])}return function(Tp){if(Rp(Fp,Tp.v)&&(Pp(Tp.layers),Tp.assets)){var Np,jp=Tp.assets.length;for(Np=0;Np<jp;Np+=1)Tp.assets[Np].layers&&Pp(Tp.assets[Np].layers)}}}(),Op=function(){var Fp=[4,1,9];function Ip(Tp){var Np,jp=Tp.length,Vp,zp;for(Np=0;Np<jp;Np+=1)if(Tp[Np].ty==="gr")Ip(Tp[Np].it);else if(Tp[Np].ty==="fl"||Tp[Np].ty==="st")if(Tp[Np].c.k&&Tp[Np].c.k[0].i)for(zp=Tp[Np].c.k.length,Vp=0;Vp<zp;Vp+=1)Tp[Np].c.k[Vp].s&&(Tp[Np].c.k[Vp].s[0]/=255,Tp[Np].c.k[Vp].s[1]/=255,Tp[Np].c.k[Vp].s[2]/=255,Tp[Np].c.k[Vp].s[3]/=255),Tp[Np].c.k[Vp].e&&(Tp[Np].c.k[Vp].e[0]/=255,Tp[Np].c.k[Vp].e[1]/=255,Tp[Np].c.k[Vp].e[2]/=255,Tp[Np].c.k[Vp].e[3]/=255);else Tp[Np].c.k[0]/=255,Tp[Np].c.k[1]/=255,Tp[Np].c.k[2]/=255,Tp[Np].c.k[3]/=255}function Pp(Tp){var Np,jp=Tp.length;for(Np=0;Np<jp;Np+=1)Tp[Np].ty===4&&Ip(Tp[Np].shapes)}return function(Tp){if(Rp(Fp,Tp.v)&&(Pp(Tp.layers),Tp.assets)){var Np,jp=Tp.assets.length;for(Np=0;Np<jp;Np+=1)Tp.assets[Np].layers&&Pp(Tp.assets[Np].layers)}}}(),Lp=function(){var Fp=[4,4,18];function Ip(Tp){var Np,jp=Tp.length,Vp,zp;for(Np=jp-1;Np>=0;Np-=1)if(Tp[Np].ty==="sh")if(Tp[Np].ks.k.i)Tp[Np].ks.k.c=Tp[Np].closed;else for(zp=Tp[Np].ks.k.length,Vp=0;Vp<zp;Vp+=1)Tp[Np].ks.k[Vp].s&&(Tp[Np].ks.k[Vp].s[0].c=Tp[Np].closed),Tp[Np].ks.k[Vp].e&&(Tp[Np].ks.k[Vp].e[0].c=Tp[Np].closed);else Tp[Np].ty==="gr"&&Ip(Tp[Np].it)}function Pp(Tp){var Np,jp,Vp=Tp.length,zp,Wp,Up,qp;for(jp=0;jp<Vp;jp+=1){if(Np=Tp[jp],Np.hasMask){var Bp=Np.masksProperties;for(Wp=Bp.length,zp=0;zp<Wp;zp+=1)if(Bp[zp].pt.k.i)Bp[zp].pt.k.c=Bp[zp].cl;else for(qp=Bp[zp].pt.k.length,Up=0;Up<qp;Up+=1)Bp[zp].pt.k[Up].s&&(Bp[zp].pt.k[Up].s[0].c=Bp[zp].cl),Bp[zp].pt.k[Up].e&&(Bp[zp].pt.k[Up].e[0].c=Bp[zp].cl)}Np.ty===4&&Ip(Np.shapes)}}return function(Tp){if(Rp(Fp,Tp.v)&&(Pp(Tp.layers),Tp.assets)){var Np,jp=Tp.assets.length;for(Np=0;Np<jp;Np+=1)Tp.assets[Np].layers&&Pp(Tp.assets[Np].layers)}}}();function Mp(Fp){Fp.__complete||(Op(Fp),$p(Fp),Cp(Fp),Ap(Fp),Lp(Fp),Sp(Fp.layers,Fp.assets),yp(Fp.chars,Fp.assets),Fp.__complete=!0)}function kp(Fp){Fp.t.a.length===0&&"m"in Fp.t.p}var Dp={};return Dp.completeData=Mp,Dp.checkColors=Op,Dp.checkChars=Cp,Dp.checkPathProperties=Ap,Dp.checkShapes=Lp,Dp.completeLayers=Sp,Dp}if(lp.dataManager||(lp.dataManager=vp()),lp.assetLoader||(lp.assetLoader=function(){function Sp(bp){var Ep=bp.getResponseHeader("content-type");return Ep&&bp.responseType==="json"&&Ep.indexOf("json")!==-1||bp.response&&_typeof$5(bp.response)==="object"?bp.response:bp.response&&typeof bp.response=="string"?JSON.parse(bp.response):bp.responseText?JSON.parse(bp.responseText):null}function yp(bp,Ep,wp,_p){var Rp,$p=new XMLHttpRequest;try{$p.responseType="json"}catch{}$p.onreadystatechange=function(){if($p.readyState===4)if($p.status===200)Rp=Sp($p),wp(Rp);else try{Rp=Sp($p),wp(Rp)}catch(Cp){_p&&_p(Cp)}};try{$p.open(["G","E","T"].join(""),bp,!0)}catch{$p.open(["G","E","T"].join(""),Ep+"/"+bp,!0)}$p.send()}return{load:yp}}()),gp.data.type==="loadAnimation")lp.assetLoader.load(gp.data.path,gp.data.fullPath,function(Sp){lp.dataManager.completeData(Sp),lp.postMessage({id:gp.data.id,payload:Sp,status:"success"})},function(){lp.postMessage({id:gp.data.id,status:"error"})});else if(gp.data.type==="complete"){var xp=gp.data.animation;lp.dataManager.completeData(xp),lp.postMessage({id:gp.data.id,payload:xp,status:"success"})}else gp.data.type==="loadData"&&lp.assetLoader.load(gp.data.path,gp.data.fullPath,function(Sp){lp.postMessage({id:gp.data.id,payload:Sp,status:"success"})},function(){lp.postMessage({id:gp.data.id,status:"error"})})}),ap.onmessage=function(mp){var gp=mp.data,vp=gp.id,xp=rp[vp];rp[vp]=null,gp.status==="success"?xp.onComplete(gp.payload):xp.onError&&xp.onError()})}function dp(mp,gp){_d+=1;var vp="processId_"+_d;return rp[vp]={onComplete:mp,onError:gp},vp}function fp(mp,gp,vp){cp();var xp=dp(gp,vp);ap.postMessage({type:"loadAnimation",path:mp,fullPath:window.location.origin+window.location.pathname,id:xp})}function pp(mp,gp,vp){cp();var xp=dp(gp,vp);ap.postMessage({type:"loadData",path:mp,fullPath:window.location.origin+window.location.pathname,id:xp})}function hp(mp,gp,vp){cp();var xp=dp(gp,vp);ap.postMessage({type:"complete",animation:mp,id:xp})}return{loadAnimation:fp,loadData:pp,completeAnimation:hp}}(),ImagePreloader=function(){var _d=function(){var yp=createTag("canvas");yp.width=1,yp.height=1;var bp=yp.getContext("2d");return bp.fillStyle="rgba(0,0,0,0)",bp.fillRect(0,0,1,1),yp}();function rp(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function np(){this.loadedFootagesCount+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function ap(yp,bp,Ep){var wp="";if(yp.e)wp=yp.p;else if(bp){var _p=yp.p;_p.indexOf("images/")!==-1&&(_p=_p.split("/")[1]),wp=bp+_p}else wp=Ep,wp+=yp.u?yp.u:"",wp+=yp.p;return wp}function sp(yp){var bp=0,Ep=setInterval((function(){var wp=yp.getBBox();(wp.width||bp>500)&&(this._imageLoaded(),clearInterval(Ep)),bp+=1}).bind(this),50)}function lp(yp){var bp=ap(yp,this.assetsPath,this.path),Ep=createNS("image");isSafari?this.testImageLoaded(Ep):Ep.addEventListener("load",this._imageLoaded,!1),Ep.addEventListener("error",(function(){wp.img=_d,this._imageLoaded()}).bind(this),!1),Ep.setAttributeNS("http://www.w3.org/1999/xlink","href",bp),this._elementHelper.append?this._elementHelper.append(Ep):this._elementHelper.appendChild(Ep);var wp={img:Ep,assetData:yp};return wp}function up(yp){var bp=ap(yp,this.assetsPath,this.path),Ep=createTag("img");Ep.crossOrigin="anonymous",Ep.addEventListener("load",this._imageLoaded,!1),Ep.addEventListener("error",(function(){wp.img=_d,this._imageLoaded()}).bind(this),!1),Ep.src=bp;var wp={img:Ep,assetData:yp};return wp}function cp(yp){var bp={assetData:yp},Ep=ap(yp,this.assetsPath,this.path);return dataManager.loadData(Ep,(function(wp){bp.img=wp,this._footageLoaded()}).bind(this),(function(){bp.img={},this._footageLoaded()}).bind(this)),bp}function dp(yp,bp){this.imagesLoadedCb=bp;var Ep,wp=yp.length;for(Ep=0;Ep<wp;Ep+=1)yp[Ep].layers||(!yp[Ep].t||yp[Ep].t==="seq"?(this.totalImages+=1,this.images.push(this._createImageData(yp[Ep]))):yp[Ep].t===3&&(this.totalFootages+=1,this.images.push(this.createFootageData(yp[Ep]))))}function fp(yp){this.path=yp||""}function pp(yp){this.assetsPath=yp||""}function hp(yp){for(var bp=0,Ep=this.images.length;bp<Ep;){if(this.images[bp].assetData===yp)return this.images[bp].img;bp+=1}return null}function mp(){this.imagesLoadedCb=null,this.images.length=0}function gp(){return this.totalImages===this.loadedAssets}function vp(){return this.totalFootages===this.loadedFootagesCount}function xp(yp,bp){yp==="svg"?(this._elementHelper=bp,this._createImageData=this.createImageData.bind(this)):this._createImageData=this.createImgData.bind(this)}function Sp(){this._imageLoaded=rp.bind(this),this._footageLoaded=np.bind(this),this.testImageLoaded=sp.bind(this),this.createFootageData=cp.bind(this),this.assetsPath="",this.path="",this.totalImages=0,this.totalFootages=0,this.loadedAssets=0,this.loadedFootagesCount=0,this.imagesLoadedCb=null,this.images=[]}return Sp.prototype={loadAssets:dp,setAssetsPath:pp,setPath:fp,loadedImages:gp,loadedFootages:vp,destroy:mp,getAsset:hp,createImgData:up,createImageData:lp,imageLoaded:rp,footageLoaded:np,setCacheType:xp},Sp}();function BaseEvent(){}BaseEvent.prototype={triggerEvent:function(rp,np){if(this._cbs[rp])for(var ap=this._cbs[rp],sp=0;sp<ap.length;sp+=1)ap[sp](np)},addEventListener:function(rp,np){return this._cbs[rp]||(this._cbs[rp]=[]),this._cbs[rp].push(np),(function(){this.removeEventListener(rp,np)}).bind(this)},removeEventListener:function(rp,np){if(!np)this._cbs[rp]=null;else if(this._cbs[rp]){for(var ap=0,sp=this._cbs[rp].length;ap<sp;)this._cbs[rp][ap]===np&&(this._cbs[rp].splice(ap,1),ap-=1,sp-=1),ap+=1;this._cbs[rp].length||(this._cbs[rp]=null)}}};var markerParser=function(){function _d(rp){for(var np=rp.split(`\r
`),ap={},sp,lp=0,up=0;up<np.length;up+=1)sp=np[up].split(":"),sp.length===2&&(ap[sp[0]]=sp[1].trim(),lp+=1);if(lp===0)throw new Error;return ap}return function(rp){for(var np=[],ap=0;ap<rp.length;ap+=1){var sp=rp[ap],lp={time:sp.tm,duration:sp.dr};try{lp.payload=JSON.parse(rp[ap].cm)}catch{try{lp.payload=_d(rp[ap].cm)}catch{lp.payload={name:rp[ap].cm}}}np.push(lp)}return np}}(),ProjectInterface=function(){function _d(rp){this.compositions.push(rp)}return function(){function rp(np){for(var ap=0,sp=this.compositions.length;ap<sp;){if(this.compositions[ap].data&&this.compositions[ap].data.nm===np)return this.compositions[ap].prepareFrame&&this.compositions[ap].data.xt&&this.compositions[ap].prepareFrame(this.currentFrame),this.compositions[ap].compInterface;ap+=1}return null}return rp.compositions=[],rp.currentFrame=0,rp.registerComposition=_d,rp}}(),renderers={},registerRenderer=function(rp,np){renderers[rp]=np};function getRenderer(_d){return renderers[_d]}function getRegisteredRenderer(){if(renderers.canvas)return"canvas";for(var _d in renderers)if(renderers[_d])return _d;return""}function _typeof$4(_d){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$4=function(np){return typeof np}:_typeof$4=function(np){return np&&typeof Symbol=="function"&&np.constructor===Symbol&&np!==Symbol.prototype?"symbol":typeof np},_typeof$4(_d)}var AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.firstFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.playCount=0,this.animationData={},this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=createElementID(),this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.isSubframeEnabled=getSubframeEnabled(),this.segments=[],this._idle=!0,this._completedLoop=!1,this.projectInterface=ProjectInterface(),this.imagePreloader=new ImagePreloader,this.audioController=audioControllerFactory(),this.markers=[],this.configAnimation=this.configAnimation.bind(this),this.onSetupError=this.onSetupError.bind(this),this.onSegmentComplete=this.onSegmentComplete.bind(this),this.drawnFrameEvent=new BMEnterFrameEvent("drawnFrame",0,0,0),this.expressionsPlugin=getExpressionsPlugin()};extendPrototype([BaseEvent],AnimationItem),AnimationItem.prototype.setParams=function(_d){(_d.wrapper||_d.container)&&(this.wrapper=_d.wrapper||_d.container);var rp="svg";_d.animType?rp=_d.animType:_d.renderer&&(rp=_d.renderer);var np=getRenderer(rp);this.renderer=new np(this,_d.rendererSettings),this.imagePreloader.setCacheType(rp,this.renderer.globalData.defs),this.renderer.setProjectInterface(this.projectInterface),this.animType=rp,_d.loop===""||_d.loop===null||_d.loop===void 0||_d.loop===!0?this.loop=!0:_d.loop===!1?this.loop=!1:this.loop=parseInt(_d.loop,10),this.autoplay="autoplay"in _d?_d.autoplay:!0,this.name=_d.name?_d.name:"",this.autoloadSegments=Object.prototype.hasOwnProperty.call(_d,"autoloadSegments")?_d.autoloadSegments:!0,this.assetsPath=_d.assetsPath,this.initialSegment=_d.initialSegment,_d.audioFactory&&this.audioController.setAudioFactory(_d.audioFactory),_d.animationData?this.setupAnimation(_d.animationData):_d.path&&(_d.path.lastIndexOf("\\")!==-1?this.path=_d.path.substr(0,_d.path.lastIndexOf("\\")+1):this.path=_d.path.substr(0,_d.path.lastIndexOf("/")+1),this.fileName=_d.path.substr(_d.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),dataManager.loadAnimation(_d.path,this.configAnimation,this.onSetupError))},AnimationItem.prototype.onSetupError=function(){this.trigger("data_failed")},AnimationItem.prototype.setupAnimation=function(_d){dataManager.completeAnimation(_d,this.configAnimation)},AnimationItem.prototype.setData=function(_d,rp){rp&&_typeof$4(rp)!=="object"&&(rp=JSON.parse(rp));var np={wrapper:_d,animationData:rp},ap=_d.attributes;np.path=ap.getNamedItem("data-animation-path")?ap.getNamedItem("data-animation-path").value:ap.getNamedItem("data-bm-path")?ap.getNamedItem("data-bm-path").value:ap.getNamedItem("bm-path")?ap.getNamedItem("bm-path").value:"",np.animType=ap.getNamedItem("data-anim-type")?ap.getNamedItem("data-anim-type").value:ap.getNamedItem("data-bm-type")?ap.getNamedItem("data-bm-type").value:ap.getNamedItem("bm-type")?ap.getNamedItem("bm-type").value:ap.getNamedItem("data-bm-renderer")?ap.getNamedItem("data-bm-renderer").value:ap.getNamedItem("bm-renderer")?ap.getNamedItem("bm-renderer").value:getRegisteredRenderer()||"canvas";var sp=ap.getNamedItem("data-anim-loop")?ap.getNamedItem("data-anim-loop").value:ap.getNamedItem("data-bm-loop")?ap.getNamedItem("data-bm-loop").value:ap.getNamedItem("bm-loop")?ap.getNamedItem("bm-loop").value:"";sp==="false"?np.loop=!1:sp==="true"?np.loop=!0:sp!==""&&(np.loop=parseInt(sp,10));var lp=ap.getNamedItem("data-anim-autoplay")?ap.getNamedItem("data-anim-autoplay").value:ap.getNamedItem("data-bm-autoplay")?ap.getNamedItem("data-bm-autoplay").value:ap.getNamedItem("bm-autoplay")?ap.getNamedItem("bm-autoplay").value:!0;np.autoplay=lp!=="false",np.name=ap.getNamedItem("data-name")?ap.getNamedItem("data-name").value:ap.getNamedItem("data-bm-name")?ap.getNamedItem("data-bm-name").value:ap.getNamedItem("bm-name")?ap.getNamedItem("bm-name").value:"";var up=ap.getNamedItem("data-anim-prerender")?ap.getNamedItem("data-anim-prerender").value:ap.getNamedItem("data-bm-prerender")?ap.getNamedItem("data-bm-prerender").value:ap.getNamedItem("bm-prerender")?ap.getNamedItem("bm-prerender").value:"";up==="false"&&(np.prerender=!1),np.path?this.setParams(np):this.trigger("destroy")},AnimationItem.prototype.includeLayers=function(_d){_d.op>this.animationData.op&&(this.animationData.op=_d.op,this.totalFrames=Math.floor(_d.op-this.animationData.ip));var rp=this.animationData.layers,np,ap=rp.length,sp=_d.layers,lp,up=sp.length;for(lp=0;lp<up;lp+=1)for(np=0;np<ap;){if(rp[np].id===sp[lp].id){rp[np]=sp[lp];break}np+=1}if((_d.chars||_d.fonts)&&(this.renderer.globalData.fontManager.addChars(_d.chars),this.renderer.globalData.fontManager.addFonts(_d.fonts,this.renderer.globalData.defs)),_d.assets)for(ap=_d.assets.length,np=0;np<ap;np+=1)this.animationData.assets.push(_d.assets[np]);this.animationData.__complete=!1,dataManager.completeAnimation(this.animationData,this.onSegmentComplete)},AnimationItem.prototype.onSegmentComplete=function(_d){this.animationData=_d;var rp=getExpressionsPlugin();rp&&rp.initExpressions(this),this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var _d=this.animationData.segments;if(!_d||_d.length===0||!this.autoloadSegments){this.trigger("data_ready"),this.timeCompleted=this.totalFrames;return}var rp=_d.shift();this.timeCompleted=rp.time*this.frameRate;var np=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,dataManager.loadData(np,this.includeLayers.bind(this),(function(){this.trigger("data_failed")}).bind(this))},AnimationItem.prototype.loadSegments=function(){var _d=this.animationData.segments;_d||(this.timeCompleted=this.totalFrames),this.loadNextSegment()},AnimationItem.prototype.imagesLoaded=function(){this.trigger("loaded_images"),this.checkLoaded()},AnimationItem.prototype.preloadImages=function(){this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(this.animationData.assets,this.imagesLoaded.bind(this))},AnimationItem.prototype.configAnimation=function(_d){if(this.renderer)try{this.animationData=_d,this.initialSegment?(this.totalFrames=Math.floor(this.initialSegment[1]-this.initialSegment[0]),this.firstFrame=Math.round(this.initialSegment[0])):(this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.firstFrame=Math.round(this.animationData.ip)),this.renderer.configAnimation(_d),_d.assets||(_d.assets=[]),this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.frameMult=this.animationData.fr/1e3,this.renderer.searchExtraCompositions(_d.assets),this.markers=markerParser(_d.markers||[]),this.trigger("config_ready"),this.preloadImages(),this.loadSegments(),this.updaFrameModifier(),this.waitForFontsLoaded(),this.isPaused&&this.audioController.pause()}catch(rp){this.triggerConfigError(rp)}},AnimationItem.prototype.waitForFontsLoaded=function(){this.renderer&&(this.renderer.globalData.fontManager.isLoaded?this.checkLoaded():setTimeout(this.waitForFontsLoaded.bind(this),20))},AnimationItem.prototype.checkLoaded=function(){if(!this.isLoaded&&this.renderer.globalData.fontManager.isLoaded&&(this.imagePreloader.loadedImages()||this.renderer.rendererType!=="canvas")&&this.imagePreloader.loadedFootages()){this.isLoaded=!0;var _d=getExpressionsPlugin();_d&&_d.initExpressions(this),this.renderer.initItems(),setTimeout((function(){this.trigger("DOMLoaded")}).bind(this),0),this.gotoFrame(),this.autoplay&&this.play()}},AnimationItem.prototype.resize=function(_d,rp){var np=typeof _d=="number"?_d:void 0,ap=typeof rp=="number"?rp:void 0;this.renderer.updateContainerSize(np,ap)},AnimationItem.prototype.setSubframe=function(_d){this.isSubframeEnabled=!!_d},AnimationItem.prototype.gotoFrame=function(){this.currentFrame=this.isSubframeEnabled?this.currentRawFrame:~~this.currentRawFrame,this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame(),this.trigger("drawnFrame")},AnimationItem.prototype.renderFrame=function(){if(!(this.isLoaded===!1||!this.renderer))try{this.expressionsPlugin&&this.expressionsPlugin.resetFrame(),this.renderer.renderFrame(this.currentFrame+this.firstFrame)}catch(_d){this.triggerRenderFrameError(_d)}},AnimationItem.prototype.play=function(_d){_d&&this.name!==_d||this.isPaused===!0&&(this.isPaused=!1,this.trigger("_play"),this.audioController.resume(),this._idle&&(this._idle=!1,this.trigger("_active")))},AnimationItem.prototype.pause=function(_d){_d&&this.name!==_d||this.isPaused===!1&&(this.isPaused=!0,this.trigger("_pause"),this._idle=!0,this.trigger("_idle"),this.audioController.pause())},AnimationItem.prototype.togglePause=function(_d){_d&&this.name!==_d||(this.isPaused===!0?this.play():this.pause())},AnimationItem.prototype.stop=function(_d){_d&&this.name!==_d||(this.pause(),this.playCount=0,this._completedLoop=!1,this.setCurrentRawFrameValue(0))},AnimationItem.prototype.getMarkerData=function(_d){for(var rp,np=0;np<this.markers.length;np+=1)if(rp=this.markers[np],rp.payload&&rp.payload.name===_d)return rp;return null},AnimationItem.prototype.goToAndStop=function(_d,rp,np){if(!(np&&this.name!==np)){var ap=Number(_d);if(isNaN(ap)){var sp=this.getMarkerData(_d);sp&&this.goToAndStop(sp.time,!0)}else rp?this.setCurrentRawFrameValue(_d):this.setCurrentRawFrameValue(_d*this.frameModifier);this.pause()}},AnimationItem.prototype.goToAndPlay=function(_d,rp,np){if(!(np&&this.name!==np)){var ap=Number(_d);if(isNaN(ap)){var sp=this.getMarkerData(_d);sp&&(sp.duration?this.playSegments([sp.time,sp.time+sp.duration],!0):this.goToAndStop(sp.time,!0))}else this.goToAndStop(ap,rp,np);this.play()}},AnimationItem.prototype.advanceTime=function(_d){if(!(this.isPaused===!0||this.isLoaded===!1)){var rp=this.currentRawFrame+_d*this.frameModifier,np=!1;rp>=this.totalFrames-1&&this.frameModifier>0?!this.loop||this.playCount===this.loop?this.checkSegments(rp>this.totalFrames?rp%this.totalFrames:0)||(np=!0,rp=this.totalFrames-1):rp>=this.totalFrames?(this.playCount+=1,this.checkSegments(rp%this.totalFrames)||(this.setCurrentRawFrameValue(rp%this.totalFrames),this._completedLoop=!0,this.trigger("loopComplete"))):this.setCurrentRawFrameValue(rp):rp<0?this.checkSegments(rp%this.totalFrames)||(this.loop&&!(this.playCount--<=0&&this.loop!==!0)?(this.setCurrentRawFrameValue(this.totalFrames+rp%this.totalFrames),this._completedLoop?this.trigger("loopComplete"):this._completedLoop=!0):(np=!0,rp=0)):this.setCurrentRawFrameValue(rp),np&&(this.setCurrentRawFrameValue(rp),this.pause(),this.trigger("complete"))}},AnimationItem.prototype.adjustSegment=function(_d,rp){this.playCount=0,_d[1]<_d[0]?(this.frameModifier>0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.totalFrames=_d[0]-_d[1],this.timeCompleted=this.totalFrames,this.firstFrame=_d[1],this.setCurrentRawFrameValue(this.totalFrames-.001-rp)):_d[1]>_d[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.totalFrames=_d[1]-_d[0],this.timeCompleted=this.totalFrames,this.firstFrame=_d[0],this.setCurrentRawFrameValue(.001+rp)),this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function(_d,rp){var np=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<_d?np=_d:this.currentRawFrame+this.firstFrame>rp&&(np=rp-_d)),this.firstFrame=_d,this.totalFrames=rp-_d,this.timeCompleted=this.totalFrames,np!==-1&&this.goToAndStop(np,!0)},AnimationItem.prototype.playSegments=function(_d,rp){if(rp&&(this.segments.length=0),_typeof$4(_d[0])==="object"){var np,ap=_d.length;for(np=0;np<ap;np+=1)this.segments.push(_d[np])}else this.segments.push(_d);this.segments.length&&rp&&this.adjustSegment(this.segments.shift(),0),this.isPaused&&this.play()},AnimationItem.prototype.resetSegments=function(_d){this.segments.length=0,this.segments.push([this.animationData.ip,this.animationData.op]),_d&&this.checkSegments(0)},AnimationItem.prototype.checkSegments=function(_d){return this.segments.length?(this.adjustSegment(this.segments.shift(),_d),!0):!1},AnimationItem.prototype.destroy=function(_d){_d&&this.name!==_d||!this.renderer||(this.renderer.destroy(),this.imagePreloader.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=null,this.onLoopComplete=null,this.onComplete=null,this.onSegmentStart=null,this.onDestroy=null,this.renderer=null,this.expressionsPlugin=null,this.imagePreloader=null,this.projectInterface=null)},AnimationItem.prototype.setCurrentRawFrameValue=function(_d){this.currentRawFrame=_d,this.gotoFrame()},AnimationItem.prototype.setSpeed=function(_d){this.playSpeed=_d,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function(_d){this.playDirection=_d<0?-1:1,this.updaFrameModifier()},AnimationItem.prototype.setLoop=function(_d){this.loop=_d},AnimationItem.prototype.setVolume=function(_d,rp){rp&&this.name!==rp||this.audioController.setVolume(_d)},AnimationItem.prototype.getVolume=function(){return this.audioController.getVolume()},AnimationItem.prototype.mute=function(_d){_d&&this.name!==_d||this.audioController.mute()},AnimationItem.prototype.unmute=function(_d){_d&&this.name!==_d||this.audioController.unmute()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection,this.audioController.setRate(this.playSpeed*this.playDirection)},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function(_d){var rp="";if(_d.e)rp=_d.p;else if(this.assetsPath){var np=_d.p;np.indexOf("images/")!==-1&&(np=np.split("/")[1]),rp=this.assetsPath+np}else rp=this.path,rp+=_d.u?_d.u:"",rp+=_d.p;return rp},AnimationItem.prototype.getAssetData=function(_d){for(var rp=0,np=this.assets.length;rp<np;){if(_d===this.assets[rp].id)return this.assets[rp];rp+=1}return null},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getDuration=function(_d){return _d?this.totalFrames:this.totalFrames/this.frameRate},AnimationItem.prototype.updateDocumentData=function(_d,rp,np){try{var ap=this.renderer.getElementByPath(_d);ap.updateDocumentData(rp,np)}catch{}},AnimationItem.prototype.trigger=function(_d){if(this._cbs&&this._cbs[_d])switch(_d){case"enterFrame":this.triggerEvent(_d,new BMEnterFrameEvent(_d,this.currentFrame,this.totalFrames,this.frameModifier));break;case"drawnFrame":this.drawnFrameEvent.currentTime=this.currentFrame,this.drawnFrameEvent.totalTime=this.totalFrames,this.drawnFrameEvent.direction=this.frameModifier,this.triggerEvent(_d,this.drawnFrameEvent);break;case"loopComplete":this.triggerEvent(_d,new BMCompleteLoopEvent(_d,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(_d,new BMCompleteEvent(_d,this.frameMult));break;case"segmentStart":this.triggerEvent(_d,new BMSegmentStartEvent(_d,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(_d,new BMDestroyEvent(_d,this));break;default:this.triggerEvent(_d)}_d==="enterFrame"&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent(_d,this.currentFrame,this.totalFrames,this.frameMult)),_d==="loopComplete"&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent(_d,this.loop,this.playCount,this.frameMult)),_d==="complete"&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent(_d,this.frameMult)),_d==="segmentStart"&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent(_d,this.firstFrame,this.totalFrames)),_d==="destroy"&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent(_d,this))},AnimationItem.prototype.triggerRenderFrameError=function(_d){var rp=new BMRenderFrameErrorEvent(_d,this.currentFrame);this.triggerEvent("error",rp),this.onError&&this.onError.call(this,rp)},AnimationItem.prototype.triggerConfigError=function(_d){var rp=new BMConfigErrorEvent(_d,this.currentFrame);this.triggerEvent("error",rp),this.onError&&this.onError.call(this,rp)};var animationManager=function(){var _d={},rp=[],np=0,ap=0,sp=0,lp=!0,up=!1;function cp(Ip){for(var Pp=0,Tp=Ip.target;Pp<ap;)rp[Pp].animation===Tp&&(rp.splice(Pp,1),Pp-=1,ap-=1,Tp.isPaused||hp()),Pp+=1}function dp(Ip,Pp){if(!Ip)return null;for(var Tp=0;Tp<ap;){if(rp[Tp].elem===Ip&&rp[Tp].elem!==null)return rp[Tp].animation;Tp+=1}var Np=new AnimationItem;return mp(Np,Ip),Np.setData(Ip,Pp),Np}function fp(){var Ip,Pp=rp.length,Tp=[];for(Ip=0;Ip<Pp;Ip+=1)Tp.push(rp[Ip].animation);return Tp}function pp(){sp+=1,Op()}function hp(){sp-=1}function mp(Ip,Pp){Ip.addEventListener("destroy",cp),Ip.addEventListener("_active",pp),Ip.addEventListener("_idle",hp),rp.push({elem:Pp,animation:Ip}),ap+=1}function gp(Ip){var Pp=new AnimationItem;return mp(Pp,null),Pp.setParams(Ip),Pp}function vp(Ip,Pp){var Tp;for(Tp=0;Tp<ap;Tp+=1)rp[Tp].animation.setSpeed(Ip,Pp)}function xp(Ip,Pp){var Tp;for(Tp=0;Tp<ap;Tp+=1)rp[Tp].animation.setDirection(Ip,Pp)}function Sp(Ip){var Pp;for(Pp=0;Pp<ap;Pp+=1)rp[Pp].animation.play(Ip)}function yp(Ip){var Pp=Ip-np,Tp;for(Tp=0;Tp<ap;Tp+=1)rp[Tp].animation.advanceTime(Pp);np=Ip,sp&&!up?window.requestAnimationFrame(yp):lp=!0}function bp(Ip){np=Ip,window.requestAnimationFrame(yp)}function Ep(Ip){var Pp;for(Pp=0;Pp<ap;Pp+=1)rp[Pp].animation.pause(Ip)}function wp(Ip,Pp,Tp){var Np;for(Np=0;Np<ap;Np+=1)rp[Np].animation.goToAndStop(Ip,Pp,Tp)}function _p(Ip){var Pp;for(Pp=0;Pp<ap;Pp+=1)rp[Pp].animation.stop(Ip)}function Rp(Ip){var Pp;for(Pp=0;Pp<ap;Pp+=1)rp[Pp].animation.togglePause(Ip)}function $p(Ip){var Pp;for(Pp=ap-1;Pp>=0;Pp-=1)rp[Pp].animation.destroy(Ip)}function Cp(Ip,Pp,Tp){var Np=[].concat([].slice.call(document.getElementsByClassName("lottie")),[].slice.call(document.getElementsByClassName("bodymovin"))),jp,Vp=Np.length;for(jp=0;jp<Vp;jp+=1)Tp&&Np[jp].setAttribute("data-bm-type",Tp),dp(Np[jp],Ip);if(Pp&&Vp===0){Tp||(Tp="svg");var zp=document.getElementsByTagName("body")[0];zp.innerText="";var Wp=createTag("div");Wp.style.width="100%",Wp.style.height="100%",Wp.setAttribute("data-bm-type",Tp),zp.appendChild(Wp),dp(Wp,Ip)}}function Ap(){var Ip;for(Ip=0;Ip<ap;Ip+=1)rp[Ip].animation.resize()}function Op(){!up&&sp&&lp&&(window.requestAnimationFrame(bp),lp=!1)}function Lp(){up=!0}function Mp(){up=!1,Op()}function kp(Ip,Pp){var Tp;for(Tp=0;Tp<ap;Tp+=1)rp[Tp].animation.setVolume(Ip,Pp)}function Dp(Ip){var Pp;for(Pp=0;Pp<ap;Pp+=1)rp[Pp].animation.mute(Ip)}function Fp(Ip){var Pp;for(Pp=0;Pp<ap;Pp+=1)rp[Pp].animation.unmute(Ip)}return _d.registerAnimation=dp,_d.loadAnimation=gp,_d.setSpeed=vp,_d.setDirection=xp,_d.play=Sp,_d.pause=Ep,_d.stop=_p,_d.togglePause=Rp,_d.searchAnimations=Cp,_d.resize=Ap,_d.goToAndStop=wp,_d.destroy=$p,_d.freeze=Lp,_d.unfreeze=Mp,_d.setVolume=kp,_d.mute=Dp,_d.unmute=Fp,_d.getRegisteredAnimations=fp,_d}(),BezierFactory=function(){var _d={};_d.getBezierEasing=np;var rp={};function np(bp,Ep,wp,_p,Rp){var $p=Rp||("bez_"+bp+"_"+Ep+"_"+wp+"_"+_p).replace(/\./g,"p");if(rp[$p])return rp[$p];var Cp=new yp([bp,Ep,wp,_p]);return rp[$p]=Cp,Cp}var ap=4,sp=.001,lp=1e-7,up=10,cp=11,dp=1/(cp-1),fp=typeof Float32Array=="function";function pp(bp,Ep){return 1-3*Ep+3*bp}function hp(bp,Ep){return 3*Ep-6*bp}function mp(bp){return 3*bp}function gp(bp,Ep,wp){return((pp(Ep,wp)*bp+hp(Ep,wp))*bp+mp(Ep))*bp}function vp(bp,Ep,wp){return 3*pp(Ep,wp)*bp*bp+2*hp(Ep,wp)*bp+mp(Ep)}function xp(bp,Ep,wp,_p,Rp){var $p,Cp,Ap=0;do Cp=Ep+(wp-Ep)/2,$p=gp(Cp,_p,Rp)-bp,$p>0?wp=Cp:Ep=Cp;while(Math.abs($p)>lp&&++Ap<up);return Cp}function Sp(bp,Ep,wp,_p){for(var Rp=0;Rp<ap;++Rp){var $p=vp(Ep,wp,_p);if($p===0)return Ep;var Cp=gp(Ep,wp,_p)-bp;Ep-=Cp/$p}return Ep}function yp(bp){this._p=bp,this._mSampleValues=fp?new Float32Array(cp):new Array(cp),this._precomputed=!1,this.get=this.get.bind(this)}return yp.prototype={get:function(Ep){var wp=this._p[0],_p=this._p[1],Rp=this._p[2],$p=this._p[3];return this._precomputed||this._precompute(),wp===_p&&Rp===$p?Ep:Ep===0?0:Ep===1?1:gp(this._getTForX(Ep),_p,$p)},_precompute:function(){var Ep=this._p[0],wp=this._p[1],_p=this._p[2],Rp=this._p[3];this._precomputed=!0,(Ep!==wp||_p!==Rp)&&this._calcSampleValues()},_calcSampleValues:function(){for(var Ep=this._p[0],wp=this._p[2],_p=0;_p<cp;++_p)this._mSampleValues[_p]=gp(_p*dp,Ep,wp)},_getTForX:function(Ep){for(var wp=this._p[0],_p=this._p[2],Rp=this._mSampleValues,$p=0,Cp=1,Ap=cp-1;Cp!==Ap&&Rp[Cp]<=Ep;++Cp)$p+=dp;--Cp;var Op=(Ep-Rp[Cp])/(Rp[Cp+1]-Rp[Cp]),Lp=$p+Op*dp,Mp=vp(Lp,wp,_p);return Mp>=sp?Sp(Ep,Lp,wp,_p):Mp===0?Lp:xp(Ep,$p,$p+dp,wp,_p)}},_d}(),pooling=function(){function _d(rp){return rp.concat(createSizedArray(rp.length))}return{double:_d}}(),poolFactory=function(){return function(_d,rp,np){var ap=0,sp=_d,lp=createSizedArray(sp),up={newElement:cp,release:dp};function cp(){var fp;return ap?(ap-=1,fp=lp[ap]):fp=rp(),fp}function dp(fp){ap===sp&&(lp=pooling.double(lp),sp*=2),np&&np(fp),lp[ap]=fp,ap+=1}return up}}(),bezierLengthPool=function(){function _d(){return{addedLength:0,percents:createTypedArray("float32",getDefaultCurveSegments()),lengths:createTypedArray("float32",getDefaultCurveSegments())}}return poolFactory(8,_d)}(),segmentsLengthPool=function(){function _d(){return{lengths:[],totalLength:0}}function rp(np){var ap,sp=np.lengths.length;for(ap=0;ap<sp;ap+=1)bezierLengthPool.release(np.lengths[ap]);np.lengths.length=0}return poolFactory(8,_d,rp)}();function bezFunction(){var _d=Math;function rp(mp,gp,vp,xp,Sp,yp){var bp=mp*xp+gp*Sp+vp*yp-Sp*xp-yp*mp-vp*gp;return bp>-.001&&bp<.001}function np(mp,gp,vp,xp,Sp,yp,bp,Ep,wp){if(vp===0&&yp===0&&wp===0)return rp(mp,gp,xp,Sp,bp,Ep);var _p=_d.sqrt(_d.pow(xp-mp,2)+_d.pow(Sp-gp,2)+_d.pow(yp-vp,2)),Rp=_d.sqrt(_d.pow(bp-mp,2)+_d.pow(Ep-gp,2)+_d.pow(wp-vp,2)),$p=_d.sqrt(_d.pow(bp-xp,2)+_d.pow(Ep-Sp,2)+_d.pow(wp-yp,2)),Cp;return _p>Rp?_p>$p?Cp=_p-Rp-$p:Cp=$p-Rp-_p:$p>Rp?Cp=$p-Rp-_p:Cp=Rp-_p-$p,Cp>-1e-4&&Cp<1e-4}var ap=function(){return function(mp,gp,vp,xp){var Sp=getDefaultCurveSegments(),yp,bp,Ep,wp,_p,Rp=0,$p,Cp=[],Ap=[],Op=bezierLengthPool.newElement();for(Ep=vp.length,yp=0;yp<Sp;yp+=1){for(_p=yp/(Sp-1),$p=0,bp=0;bp<Ep;bp+=1)wp=bmPow(1-_p,3)*mp[bp]+3*bmPow(1-_p,2)*_p*vp[bp]+3*(1-_p)*bmPow(_p,2)*xp[bp]+bmPow(_p,3)*gp[bp],Cp[bp]=wp,Ap[bp]!==null&&($p+=bmPow(Cp[bp]-Ap[bp],2)),Ap[bp]=Cp[bp];$p&&($p=bmSqrt($p),Rp+=$p),Op.percents[yp]=_p,Op.lengths[yp]=Rp}return Op.addedLength=Rp,Op}}();function sp(mp){var gp=segmentsLengthPool.newElement(),vp=mp.c,xp=mp.v,Sp=mp.o,yp=mp.i,bp,Ep=mp._length,wp=gp.lengths,_p=0;for(bp=0;bp<Ep-1;bp+=1)wp[bp]=ap(xp[bp],xp[bp+1],Sp[bp],yp[bp+1]),_p+=wp[bp].addedLength;return vp&&Ep&&(wp[bp]=ap(xp[bp],xp[0],Sp[bp],yp[0]),_p+=wp[bp].addedLength),gp.totalLength=_p,gp}function lp(mp){this.segmentLength=0,this.points=new Array(mp)}function up(mp,gp){this.partialLength=mp,this.point=gp}var cp=function(){var mp={};return function(gp,vp,xp,Sp){var yp=(gp[0]+"_"+gp[1]+"_"+vp[0]+"_"+vp[1]+"_"+xp[0]+"_"+xp[1]+"_"+Sp[0]+"_"+Sp[1]).replace(/\./g,"p");if(!mp[yp]){var bp=getDefaultCurveSegments(),Ep,wp,_p,Rp,$p,Cp=0,Ap,Op,Lp=null;gp.length===2&&(gp[0]!==vp[0]||gp[1]!==vp[1])&&rp(gp[0],gp[1],vp[0],vp[1],gp[0]+xp[0],gp[1]+xp[1])&&rp(gp[0],gp[1],vp[0],vp[1],vp[0]+Sp[0],vp[1]+Sp[1])&&(bp=2);var Mp=new lp(bp);for(_p=xp.length,Ep=0;Ep<bp;Ep+=1){for(Op=createSizedArray(_p),$p=Ep/(bp-1),Ap=0,wp=0;wp<_p;wp+=1)Rp=bmPow(1-$p,3)*gp[wp]+3*bmPow(1-$p,2)*$p*(gp[wp]+xp[wp])+3*(1-$p)*bmPow($p,2)*(vp[wp]+Sp[wp])+bmPow($p,3)*vp[wp],Op[wp]=Rp,Lp!==null&&(Ap+=bmPow(Op[wp]-Lp[wp],2));Ap=bmSqrt(Ap),Cp+=Ap,Mp.points[Ep]=new up(Ap,Op),Lp=Op}Mp.segmentLength=Cp,mp[yp]=Mp}return mp[yp]}}();function dp(mp,gp){var vp=gp.percents,xp=gp.lengths,Sp=vp.length,yp=bmFloor((Sp-1)*mp),bp=mp*gp.addedLength,Ep=0;if(yp===Sp-1||yp===0||bp===xp[yp])return vp[yp];for(var wp=xp[yp]>bp?-1:1,_p=!0;_p;)if(xp[yp]<=bp&&xp[yp+1]>bp?(Ep=(bp-xp[yp])/(xp[yp+1]-xp[yp]),_p=!1):yp+=wp,yp<0||yp>=Sp-1){if(yp===Sp-1)return vp[yp];_p=!1}return vp[yp]+(vp[yp+1]-vp[yp])*Ep}function fp(mp,gp,vp,xp,Sp,yp){var bp=dp(Sp,yp),Ep=1-bp,wp=_d.round((Ep*Ep*Ep*mp[0]+(bp*Ep*Ep+Ep*bp*Ep+Ep*Ep*bp)*vp[0]+(bp*bp*Ep+Ep*bp*bp+bp*Ep*bp)*xp[0]+bp*bp*bp*gp[0])*1e3)/1e3,_p=_d.round((Ep*Ep*Ep*mp[1]+(bp*Ep*Ep+Ep*bp*Ep+Ep*Ep*bp)*vp[1]+(bp*bp*Ep+Ep*bp*bp+bp*Ep*bp)*xp[1]+bp*bp*bp*gp[1])*1e3)/1e3;return[wp,_p]}var pp=createTypedArray("float32",8);function hp(mp,gp,vp,xp,Sp,yp,bp){Sp<0?Sp=0:Sp>1&&(Sp=1);var Ep=dp(Sp,bp);yp=yp>1?1:yp;var wp=dp(yp,bp),_p,Rp=mp.length,$p=1-Ep,Cp=1-wp,Ap=$p*$p*$p,Op=Ep*$p*$p*3,Lp=Ep*Ep*$p*3,Mp=Ep*Ep*Ep,kp=$p*$p*Cp,Dp=Ep*$p*Cp+$p*Ep*Cp+$p*$p*wp,Fp=Ep*Ep*Cp+$p*Ep*wp+Ep*$p*wp,Ip=Ep*Ep*wp,Pp=$p*Cp*Cp,Tp=Ep*Cp*Cp+$p*wp*Cp+$p*Cp*wp,Np=Ep*wp*Cp+$p*wp*wp+Ep*Cp*wp,jp=Ep*wp*wp,Vp=Cp*Cp*Cp,zp=wp*Cp*Cp+Cp*wp*Cp+Cp*Cp*wp,Wp=wp*wp*Cp+Cp*wp*wp+wp*Cp*wp,Up=wp*wp*wp;for(_p=0;_p<Rp;_p+=1)pp[_p*4]=_d.round((Ap*mp[_p]+Op*vp[_p]+Lp*xp[_p]+Mp*gp[_p])*1e3)/1e3,pp[_p*4+1]=_d.round((kp*mp[_p]+Dp*vp[_p]+Fp*xp[_p]+Ip*gp[_p])*1e3)/1e3,pp[_p*4+2]=_d.round((Pp*mp[_p]+Tp*vp[_p]+Np*xp[_p]+jp*gp[_p])*1e3)/1e3,pp[_p*4+3]=_d.round((Vp*mp[_p]+zp*vp[_p]+Wp*xp[_p]+Up*gp[_p])*1e3)/1e3;return pp}return{getSegmentsLength:sp,getNewSegment:hp,getPointInSegment:fp,buildBezierData:cp,pointOnLine2D:rp,pointOnLine3D:np}}var bez=bezFunction(),initFrame=initialDefaultFrame,mathAbs=Math.abs;function interpolateValue(_d,rp){var np=this.offsetTime,ap;this.propType==="multidimensional"&&(ap=createTypedArray("float32",this.pv.length));for(var sp=rp.lastIndex,lp=sp,up=this.keyframes.length-1,cp=!0,dp,fp,pp;cp;){if(dp=this.keyframes[lp],fp=this.keyframes[lp+1],lp===up-1&&_d>=fp.t-np){dp.h&&(dp=fp),sp=0;break}if(fp.t-np>_d){sp=lp;break}lp<up-1?lp+=1:(sp=0,cp=!1)}pp=this.keyframesMetadata[lp]||{};var hp,mp,gp,vp,xp,Sp,yp=fp.t-np,bp=dp.t-np,Ep;if(dp.to){pp.bezierData||(pp.bezierData=bez.buildBezierData(dp.s,fp.s||dp.e,dp.to,dp.ti));var wp=pp.bezierData;if(_d>=yp||_d<bp){var _p=_d>=yp?wp.points.length-1:0;for(mp=wp.points[_p].point.length,hp=0;hp<mp;hp+=1)ap[hp]=wp.points[_p].point[hp]}else{pp.__fnct?Sp=pp.__fnct:(Sp=BezierFactory.getBezierEasing(dp.o.x,dp.o.y,dp.i.x,dp.i.y,dp.n).get,pp.__fnct=Sp),gp=Sp((_d-bp)/(yp-bp));var Rp=wp.segmentLength*gp,$p,Cp=rp.lastFrame<_d&&rp._lastKeyframeIndex===lp?rp._lastAddedLength:0;for(xp=rp.lastFrame<_d&&rp._lastKeyframeIndex===lp?rp._lastPoint:0,cp=!0,vp=wp.points.length;cp;){if(Cp+=wp.points[xp].partialLength,Rp===0||gp===0||xp===wp.points.length-1){for(mp=wp.points[xp].point.length,hp=0;hp<mp;hp+=1)ap[hp]=wp.points[xp].point[hp];break}else if(Rp>=Cp&&Rp<Cp+wp.points[xp+1].partialLength){for($p=(Rp-Cp)/wp.points[xp+1].partialLength,mp=wp.points[xp].point.length,hp=0;hp<mp;hp+=1)ap[hp]=wp.points[xp].point[hp]+(wp.points[xp+1].point[hp]-wp.points[xp].point[hp])*$p;break}xp<vp-1?xp+=1:cp=!1}rp._lastPoint=xp,rp._lastAddedLength=Cp-wp.points[xp].partialLength,rp._lastKeyframeIndex=lp}}else{var Ap,Op,Lp,Mp,kp;if(up=dp.s.length,Ep=fp.s||dp.e,this.sh&&dp.h!==1)if(_d>=yp)ap[0]=Ep[0],ap[1]=Ep[1],ap[2]=Ep[2];else if(_d<=bp)ap[0]=dp.s[0],ap[1]=dp.s[1],ap[2]=dp.s[2];else{var Dp=createQuaternion(dp.s),Fp=createQuaternion(Ep),Ip=(_d-bp)/(yp-bp);quaternionToEuler(ap,slerp(Dp,Fp,Ip))}else for(lp=0;lp<up;lp+=1)dp.h!==1&&(_d>=yp?gp=1:_d<bp?gp=0:(dp.o.x.constructor===Array?(pp.__fnct||(pp.__fnct=[]),pp.__fnct[lp]?Sp=pp.__fnct[lp]:(Ap=dp.o.x[lp]===void 0?dp.o.x[0]:dp.o.x[lp],Op=dp.o.y[lp]===void 0?dp.o.y[0]:dp.o.y[lp],Lp=dp.i.x[lp]===void 0?dp.i.x[0]:dp.i.x[lp],Mp=dp.i.y[lp]===void 0?dp.i.y[0]:dp.i.y[lp],Sp=BezierFactory.getBezierEasing(Ap,Op,Lp,Mp).get,pp.__fnct[lp]=Sp)):pp.__fnct?Sp=pp.__fnct:(Ap=dp.o.x,Op=dp.o.y,Lp=dp.i.x,Mp=dp.i.y,Sp=BezierFactory.getBezierEasing(Ap,Op,Lp,Mp).get,dp.keyframeMetadata=Sp),gp=Sp((_d-bp)/(yp-bp)))),Ep=fp.s||dp.e,kp=dp.h===1?dp.s[lp]:dp.s[lp]+(Ep[lp]-dp.s[lp])*gp,this.propType==="multidimensional"?ap[lp]=kp:ap=kp}return rp.lastIndex=sp,ap}function slerp(_d,rp,np){var ap=[],sp=_d[0],lp=_d[1],up=_d[2],cp=_d[3],dp=rp[0],fp=rp[1],pp=rp[2],hp=rp[3],mp,gp,vp,xp,Sp;return gp=sp*dp+lp*fp+up*pp+cp*hp,gp<0&&(gp=-gp,dp=-dp,fp=-fp,pp=-pp,hp=-hp),1-gp>1e-6?(mp=Math.acos(gp),vp=Math.sin(mp),xp=Math.sin((1-np)*mp)/vp,Sp=Math.sin(np*mp)/vp):(xp=1-np,Sp=np),ap[0]=xp*sp+Sp*dp,ap[1]=xp*lp+Sp*fp,ap[2]=xp*up+Sp*pp,ap[3]=xp*cp+Sp*hp,ap}function quaternionToEuler(_d,rp){var np=rp[0],ap=rp[1],sp=rp[2],lp=rp[3],up=Math.atan2(2*ap*lp-2*np*sp,1-2*ap*ap-2*sp*sp),cp=Math.asin(2*np*ap+2*sp*lp),dp=Math.atan2(2*np*lp-2*ap*sp,1-2*np*np-2*sp*sp);_d[0]=up/degToRads,_d[1]=cp/degToRads,_d[2]=dp/degToRads}function createQuaternion(_d){var rp=_d[0]*degToRads,np=_d[1]*degToRads,ap=_d[2]*degToRads,sp=Math.cos(rp/2),lp=Math.cos(np/2),up=Math.cos(ap/2),cp=Math.sin(rp/2),dp=Math.sin(np/2),fp=Math.sin(ap/2),pp=sp*lp*up-cp*dp*fp,hp=cp*dp*up+sp*lp*fp,mp=cp*lp*up+sp*dp*fp,gp=sp*dp*up-cp*lp*fp;return[hp,mp,gp,pp]}function getValueAtCurrentTime(){var _d=this.comp.renderedFrame-this.offsetTime,rp=this.keyframes[0].t-this.offsetTime,np=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(_d===this._caching.lastFrame||this._caching.lastFrame!==initFrame&&(this._caching.lastFrame>=np&&_d>=np||this._caching.lastFrame<rp&&_d<rp))){this._caching.lastFrame>=_d&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0);var ap=this.interpolateValue(_d,this._caching);this.pv=ap}return this._caching.lastFrame=_d,this.pv}function setVValue(_d){var rp;if(this.propType==="unidimensional")rp=_d*this.mult,mathAbs(this.v-rp)>1e-5&&(this.v=rp,this._mdf=!0);else for(var np=0,ap=this.v.length;np<ap;)rp=_d[np]*this.mult,mathAbs(this.v[np]-rp)>1e-5&&(this.v[np]=rp,this._mdf=!0),np+=1}function processEffectsSequence(){if(!(this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)){if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=this._isFirstFrame;var _d,rp=this.effectsSequence.length,np=this.kf?this.pv:this.data.k;for(_d=0;_d<rp;_d+=1)np=this.effectsSequence[_d](np);this.setVValue(np),this._isFirstFrame=!1,this.lock=!1,this.frameId=this.elem.globalData.frameId}}function addEffect(_d){this.effectsSequence.push(_d),this.container.addDynamicProperty(this)}function ValueProperty(_d,rp,np,ap){this.propType="unidimensional",this.mult=np||1,this.data=rp,this.v=np?rp.k*np:rp.k,this.pv=rp.k,this._mdf=!1,this.elem=_d,this.container=ap,this.comp=_d.comp,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function MultiDimensionalProperty(_d,rp,np,ap){this.propType="multidimensional",this.mult=np||1,this.data=rp,this._mdf=!1,this.elem=_d,this.container=ap,this.comp=_d.comp,this.k=!1,this.kf=!1,this.frameId=-1;var sp,lp=rp.k.length;for(this.v=createTypedArray("float32",lp),this.pv=createTypedArray("float32",lp),this.vel=createTypedArray("float32",lp),sp=0;sp<lp;sp+=1)this.v[sp]=rp.k[sp]*this.mult,this.pv[sp]=rp.k[sp];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function KeyframedValueProperty(_d,rp,np,ap){this.propType="unidimensional",this.keyframes=rp.k,this.keyframesMetadata=[],this.offsetTime=_d.data.st,this.frameId=-1,this._caching={lastFrame:initFrame,lastIndex:0,value:0,_lastKeyframeIndex:-1},this.k=!0,this.kf=!0,this.data=rp,this.mult=np||1,this.elem=_d,this.container=ap,this.comp=_d.comp,this.v=initFrame,this.pv=initFrame,this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.addEffect=addEffect}function KeyframedMultidimensionalProperty(_d,rp,np,ap){this.propType="multidimensional";var sp,lp=rp.k.length,up,cp,dp,fp;for(sp=0;sp<lp-1;sp+=1)rp.k[sp].to&&rp.k[sp].s&&rp.k[sp+1]&&rp.k[sp+1].s&&(up=rp.k[sp].s,cp=rp.k[sp+1].s,dp=rp.k[sp].to,fp=rp.k[sp].ti,(up.length===2&&!(up[0]===cp[0]&&up[1]===cp[1])&&bez.pointOnLine2D(up[0],up[1],cp[0],cp[1],up[0]+dp[0],up[1]+dp[1])&&bez.pointOnLine2D(up[0],up[1],cp[0],cp[1],cp[0]+fp[0],cp[1]+fp[1])||up.length===3&&!(up[0]===cp[0]&&up[1]===cp[1]&&up[2]===cp[2])&&bez.pointOnLine3D(up[0],up[1],up[2],cp[0],cp[1],cp[2],up[0]+dp[0],up[1]+dp[1],up[2]+dp[2])&&bez.pointOnLine3D(up[0],up[1],up[2],cp[0],cp[1],cp[2],cp[0]+fp[0],cp[1]+fp[1],cp[2]+fp[2]))&&(rp.k[sp].to=null,rp.k[sp].ti=null),up[0]===cp[0]&&up[1]===cp[1]&&dp[0]===0&&dp[1]===0&&fp[0]===0&&fp[1]===0&&(up.length===2||up[2]===cp[2]&&dp[2]===0&&fp[2]===0)&&(rp.k[sp].to=null,rp.k[sp].ti=null));this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.data=rp,this.keyframes=rp.k,this.keyframesMetadata=[],this.offsetTime=_d.data.st,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=np||1,this.elem=_d,this.container=ap,this.comp=_d.comp,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.frameId=-1;var pp=rp.k[0].s.length;for(this.v=createTypedArray("float32",pp),this.pv=createTypedArray("float32",pp),sp=0;sp<pp;sp+=1)this.v[sp]=initFrame,this.pv[sp]=initFrame;this._caching={lastFrame:initFrame,lastIndex:0,value:createTypedArray("float32",pp)},this.addEffect=addEffect}var PropertyFactory=function(){function _d(np,ap,sp,lp,up){ap.sid&&(ap=np.globalData.slotManager.getProp(ap));var cp;if(!ap.k.length)cp=new ValueProperty(np,ap,lp,up);else if(typeof ap.k[0]=="number")cp=new MultiDimensionalProperty(np,ap,lp,up);else switch(sp){case 0:cp=new KeyframedValueProperty(np,ap,lp,up);break;case 1:cp=new KeyframedMultidimensionalProperty(np,ap,lp,up);break}return cp.effectsSequence.length&&up.addDynamicProperty(cp),cp}var rp={getProp:_d};return rp}();function DynamicPropertyContainer(){}DynamicPropertyContainer.prototype={addDynamicProperty:function(rp){this.dynamicProperties.indexOf(rp)===-1&&(this.dynamicProperties.push(rp),this.container.addDynamicProperty(this),this._isAnimated=!0)},iterateDynamicProperties:function(){this._mdf=!1;var rp,np=this.dynamicProperties.length;for(rp=0;rp<np;rp+=1)this.dynamicProperties[rp].getValue(),this.dynamicProperties[rp]._mdf&&(this._mdf=!0)},initDynamicPropertyContainer:function(rp){this.container=rp,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1}};var pointPool=function(){function _d(){return createTypedArray("float32",2)}return poolFactory(8,_d)}();function ShapePath(){this.c=!1,this._length=0,this._maxLength=8,this.v=createSizedArray(this._maxLength),this.o=createSizedArray(this._maxLength),this.i=createSizedArray(this._maxLength)}ShapePath.prototype.setPathData=function(_d,rp){this.c=_d,this.setLength(rp);for(var np=0;np<rp;)this.v[np]=pointPool.newElement(),this.o[np]=pointPool.newElement(),this.i[np]=pointPool.newElement(),np+=1},ShapePath.prototype.setLength=function(_d){for(;this._maxLength<_d;)this.doubleArrayLength();this._length=_d},ShapePath.prototype.doubleArrayLength=function(){this.v=this.v.concat(createSizedArray(this._maxLength)),this.i=this.i.concat(createSizedArray(this._maxLength)),this.o=this.o.concat(createSizedArray(this._maxLength)),this._maxLength*=2},ShapePath.prototype.setXYAt=function(_d,rp,np,ap,sp){var lp;switch(this._length=Math.max(this._length,ap+1),this._length>=this._maxLength&&this.doubleArrayLength(),np){case"v":lp=this.v;break;case"i":lp=this.i;break;case"o":lp=this.o;break;default:lp=[];break}(!lp[ap]||lp[ap]&&!sp)&&(lp[ap]=pointPool.newElement()),lp[ap][0]=_d,lp[ap][1]=rp},ShapePath.prototype.setTripleAt=function(_d,rp,np,ap,sp,lp,up,cp){this.setXYAt(_d,rp,"v",up,cp),this.setXYAt(np,ap,"o",up,cp),this.setXYAt(sp,lp,"i",up,cp)},ShapePath.prototype.reverse=function(){var _d=new ShapePath;_d.setPathData(this.c,this._length);var rp=this.v,np=this.o,ap=this.i,sp=0;this.c&&(_d.setTripleAt(rp[0][0],rp[0][1],ap[0][0],ap[0][1],np[0][0],np[0][1],0,!1),sp=1);var lp=this._length-1,up=this._length,cp;for(cp=sp;cp<up;cp+=1)_d.setTripleAt(rp[lp][0],rp[lp][1],ap[lp][0],ap[lp][1],np[lp][0],np[lp][1],cp,!1),lp-=1;return _d},ShapePath.prototype.length=function(){return this._length};var shapePool=function(){function _d(){return new ShapePath}function rp(sp){var lp=sp._length,up;for(up=0;up<lp;up+=1)pointPool.release(sp.v[up]),pointPool.release(sp.i[up]),pointPool.release(sp.o[up]),sp.v[up]=null,sp.i[up]=null,sp.o[up]=null;sp._length=0,sp.c=!1}function np(sp){var lp=ap.newElement(),up,cp=sp._length===void 0?sp.v.length:sp._length;for(lp.setLength(cp),lp.c=sp.c,up=0;up<cp;up+=1)lp.setTripleAt(sp.v[up][0],sp.v[up][1],sp.o[up][0],sp.o[up][1],sp.i[up][0],sp.i[up][1],up);return lp}var ap=poolFactory(4,_d,rp);return ap.clone=np,ap}();function ShapeCollection(){this._length=0,this._maxLength=4,this.shapes=createSizedArray(this._maxLength)}ShapeCollection.prototype.addShape=function(_d){this._length===this._maxLength&&(this.shapes=this.shapes.concat(createSizedArray(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=_d,this._length+=1},ShapeCollection.prototype.releaseShapes=function(){var _d;for(_d=0;_d<this._length;_d+=1)shapePool.release(this.shapes[_d]);this._length=0};var shapeCollectionPool=function(){var _d={newShapeCollection:sp,release:lp},rp=0,np=4,ap=createSizedArray(np);function sp(){var up;return rp?(rp-=1,up=ap[rp]):up=new ShapeCollection,up}function lp(up){var cp,dp=up._length;for(cp=0;cp<dp;cp+=1)shapePool.release(up.shapes[cp]);up._length=0,rp===np&&(ap=pooling.double(ap),np*=2),ap[rp]=up,rp+=1}return _d}(),ShapePropertyFactory=function(){var _d=-999999;function rp(yp,bp,Ep){var wp=Ep.lastIndex,_p,Rp,$p,Cp,Ap,Op,Lp,Mp,kp,Dp=this.keyframes;if(yp<Dp[0].t-this.offsetTime)_p=Dp[0].s[0],$p=!0,wp=0;else if(yp>=Dp[Dp.length-1].t-this.offsetTime)_p=Dp[Dp.length-1].s?Dp[Dp.length-1].s[0]:Dp[Dp.length-2].e[0],$p=!0;else{for(var Fp=wp,Ip=Dp.length-1,Pp=!0,Tp,Np,jp;Pp&&(Tp=Dp[Fp],Np=Dp[Fp+1],!(Np.t-this.offsetTime>yp));)Fp<Ip-1?Fp+=1:Pp=!1;if(jp=this.keyframesMetadata[Fp]||{},$p=Tp.h===1,wp=Fp,!$p){if(yp>=Np.t-this.offsetTime)Mp=1;else if(yp<Tp.t-this.offsetTime)Mp=0;else{var Vp;jp.__fnct?Vp=jp.__fnct:(Vp=BezierFactory.getBezierEasing(Tp.o.x,Tp.o.y,Tp.i.x,Tp.i.y).get,jp.__fnct=Vp),Mp=Vp((yp-(Tp.t-this.offsetTime))/(Np.t-this.offsetTime-(Tp.t-this.offsetTime)))}Rp=Np.s?Np.s[0]:Tp.e[0]}_p=Tp.s[0]}for(Op=bp._length,Lp=_p.i[0].length,Ep.lastIndex=wp,Cp=0;Cp<Op;Cp+=1)for(Ap=0;Ap<Lp;Ap+=1)kp=$p?_p.i[Cp][Ap]:_p.i[Cp][Ap]+(Rp.i[Cp][Ap]-_p.i[Cp][Ap])*Mp,bp.i[Cp][Ap]=kp,kp=$p?_p.o[Cp][Ap]:_p.o[Cp][Ap]+(Rp.o[Cp][Ap]-_p.o[Cp][Ap])*Mp,bp.o[Cp][Ap]=kp,kp=$p?_p.v[Cp][Ap]:_p.v[Cp][Ap]+(Rp.v[Cp][Ap]-_p.v[Cp][Ap])*Mp,bp.v[Cp][Ap]=kp}function np(){var yp=this.comp.renderedFrame-this.offsetTime,bp=this.keyframes[0].t-this.offsetTime,Ep=this.keyframes[this.keyframes.length-1].t-this.offsetTime,wp=this._caching.lastFrame;return wp!==_d&&(wp<bp&&yp<bp||wp>Ep&&yp>Ep)||(this._caching.lastIndex=wp<yp?this._caching.lastIndex:0,this.interpolateShape(yp,this.pv,this._caching)),this._caching.lastFrame=yp,this.pv}function ap(){this.paths=this.localShapeCollection}function sp(yp,bp){if(yp._length!==bp._length||yp.c!==bp.c)return!1;var Ep,wp=yp._length;for(Ep=0;Ep<wp;Ep+=1)if(yp.v[Ep][0]!==bp.v[Ep][0]||yp.v[Ep][1]!==bp.v[Ep][1]||yp.o[Ep][0]!==bp.o[Ep][0]||yp.o[Ep][1]!==bp.o[Ep][1]||yp.i[Ep][0]!==bp.i[Ep][0]||yp.i[Ep][1]!==bp.i[Ep][1])return!1;return!0}function lp(yp){sp(this.v,yp)||(this.v=shapePool.clone(yp),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}function up(){if(this.elem.globalData.frameId!==this.frameId){if(!this.effectsSequence.length){this._mdf=!1;return}if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=!1;var yp;this.kf?yp=this.pv:this.data.ks?yp=this.data.ks.k:yp=this.data.pt.k;var bp,Ep=this.effectsSequence.length;for(bp=0;bp<Ep;bp+=1)yp=this.effectsSequence[bp](yp);this.setVValue(yp),this.lock=!1,this.frameId=this.elem.globalData.frameId}}function cp(yp,bp,Ep){this.propType="shape",this.comp=yp.comp,this.container=yp,this.elem=yp,this.data=bp,this.k=!1,this.kf=!1,this._mdf=!1;var wp=Ep===3?bp.pt.k:bp.ks.k;this.v=shapePool.clone(wp),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=ap,this.effectsSequence=[]}function dp(yp){this.effectsSequence.push(yp),this.container.addDynamicProperty(this)}cp.prototype.interpolateShape=rp,cp.prototype.getValue=up,cp.prototype.setVValue=lp,cp.prototype.addEffect=dp;function fp(yp,bp,Ep){this.propType="shape",this.comp=yp.comp,this.elem=yp,this.container=yp,this.offsetTime=yp.data.st,this.keyframes=Ep===3?bp.pt.k:bp.ks.k,this.keyframesMetadata=[],this.k=!0,this.kf=!0;var wp=this.keyframes[0].s[0].i.length;this.v=shapePool.newElement(),this.v.setPathData(this.keyframes[0].s[0].c,wp),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=_d,this.reset=ap,this._caching={lastFrame:_d,lastIndex:0},this.effectsSequence=[np.bind(this)]}fp.prototype.getValue=up,fp.prototype.interpolateShape=rp,fp.prototype.setVValue=lp,fp.prototype.addEffect=dp;var pp=function(){var yp=roundCorner;function bp(Ep,wp){this.v=shapePool.newElement(),this.v.setPathData(!0,4),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=wp.d,this.elem=Ep,this.comp=Ep.comp,this.frameId=-1,this.initDynamicPropertyContainer(Ep),this.p=PropertyFactory.getProp(Ep,wp.p,1,0,this),this.s=PropertyFactory.getProp(Ep,wp.s,1,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertEllToPath())}return bp.prototype={reset:ap,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertEllToPath())},convertEllToPath:function(){var wp=this.p.v[0],_p=this.p.v[1],Rp=this.s.v[0]/2,$p=this.s.v[1]/2,Cp=this.d!==3,Ap=this.v;Ap.v[0][0]=wp,Ap.v[0][1]=_p-$p,Ap.v[1][0]=Cp?wp+Rp:wp-Rp,Ap.v[1][1]=_p,Ap.v[2][0]=wp,Ap.v[2][1]=_p+$p,Ap.v[3][0]=Cp?wp-Rp:wp+Rp,Ap.v[3][1]=_p,Ap.i[0][0]=Cp?wp-Rp*yp:wp+Rp*yp,Ap.i[0][1]=_p-$p,Ap.i[1][0]=Cp?wp+Rp:wp-Rp,Ap.i[1][1]=_p-$p*yp,Ap.i[2][0]=Cp?wp+Rp*yp:wp-Rp*yp,Ap.i[2][1]=_p+$p,Ap.i[3][0]=Cp?wp-Rp:wp+Rp,Ap.i[3][1]=_p+$p*yp,Ap.o[0][0]=Cp?wp+Rp*yp:wp-Rp*yp,Ap.o[0][1]=_p-$p,Ap.o[1][0]=Cp?wp+Rp:wp-Rp,Ap.o[1][1]=_p+$p*yp,Ap.o[2][0]=Cp?wp-Rp*yp:wp+Rp*yp,Ap.o[2][1]=_p+$p,Ap.o[3][0]=Cp?wp-Rp:wp+Rp,Ap.o[3][1]=_p-$p*yp}},extendPrototype([DynamicPropertyContainer],bp),bp}(),hp=function(){function yp(bp,Ep){this.v=shapePool.newElement(),this.v.setPathData(!0,0),this.elem=bp,this.comp=bp.comp,this.data=Ep,this.frameId=-1,this.d=Ep.d,this.initDynamicPropertyContainer(bp),Ep.sy===1?(this.ir=PropertyFactory.getProp(bp,Ep.ir,0,0,this),this.is=PropertyFactory.getProp(bp,Ep.is,0,.01,this),this.convertToPath=this.convertStarToPath):this.convertToPath=this.convertPolygonToPath,this.pt=PropertyFactory.getProp(bp,Ep.pt,0,0,this),this.p=PropertyFactory.getProp(bp,Ep.p,1,0,this),this.r=PropertyFactory.getProp(bp,Ep.r,0,degToRads,this),this.or=PropertyFactory.getProp(bp,Ep.or,0,0,this),this.os=PropertyFactory.getProp(bp,Ep.os,0,.01,this),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertToPath())}return yp.prototype={reset:ap,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertToPath())},convertStarToPath:function(){var Ep=Math.floor(this.pt.v)*2,wp=Math.PI*2/Ep,_p=!0,Rp=this.or.v,$p=this.ir.v,Cp=this.os.v,Ap=this.is.v,Op=2*Math.PI*Rp/(Ep*2),Lp=2*Math.PI*$p/(Ep*2),Mp,kp,Dp,Fp,Ip=-Math.PI/2;Ip+=this.r.v;var Pp=this.data.d===3?-1:1;for(this.v._length=0,Mp=0;Mp<Ep;Mp+=1){kp=_p?Rp:$p,Dp=_p?Cp:Ap,Fp=_p?Op:Lp;var Tp=kp*Math.cos(Ip),Np=kp*Math.sin(Ip),jp=Tp===0&&Np===0?0:Np/Math.sqrt(Tp*Tp+Np*Np),Vp=Tp===0&&Np===0?0:-Tp/Math.sqrt(Tp*Tp+Np*Np);Tp+=+this.p.v[0],Np+=+this.p.v[1],this.v.setTripleAt(Tp,Np,Tp-jp*Fp*Dp*Pp,Np-Vp*Fp*Dp*Pp,Tp+jp*Fp*Dp*Pp,Np+Vp*Fp*Dp*Pp,Mp,!0),_p=!_p,Ip+=wp*Pp}},convertPolygonToPath:function(){var Ep=Math.floor(this.pt.v),wp=Math.PI*2/Ep,_p=this.or.v,Rp=this.os.v,$p=2*Math.PI*_p/(Ep*4),Cp,Ap=-Math.PI*.5,Op=this.data.d===3?-1:1;for(Ap+=this.r.v,this.v._length=0,Cp=0;Cp<Ep;Cp+=1){var Lp=_p*Math.cos(Ap),Mp=_p*Math.sin(Ap),kp=Lp===0&&Mp===0?0:Mp/Math.sqrt(Lp*Lp+Mp*Mp),Dp=Lp===0&&Mp===0?0:-Lp/Math.sqrt(Lp*Lp+Mp*Mp);Lp+=+this.p.v[0],Mp+=+this.p.v[1],this.v.setTripleAt(Lp,Mp,Lp-kp*$p*Rp*Op,Mp-Dp*$p*Rp*Op,Lp+kp*$p*Rp*Op,Mp+Dp*$p*Rp*Op,Cp,!0),Ap+=wp*Op}this.paths.length=0,this.paths[0]=this.v}},extendPrototype([DynamicPropertyContainer],yp),yp}(),mp=function(){function yp(bp,Ep){this.v=shapePool.newElement(),this.v.c=!0,this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=bp,this.comp=bp.comp,this.frameId=-1,this.d=Ep.d,this.initDynamicPropertyContainer(bp),this.p=PropertyFactory.getProp(bp,Ep.p,1,0,this),this.s=PropertyFactory.getProp(bp,Ep.s,1,0,this),this.r=PropertyFactory.getProp(bp,Ep.r,0,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertRectToPath())}return yp.prototype={convertRectToPath:function(){var Ep=this.p.v[0],wp=this.p.v[1],_p=this.s.v[0]/2,Rp=this.s.v[1]/2,$p=bmMin(_p,Rp,this.r.v),Cp=$p*(1-roundCorner);this.v._length=0,this.d===2||this.d===1?(this.v.setTripleAt(Ep+_p,wp-Rp+$p,Ep+_p,wp-Rp+$p,Ep+_p,wp-Rp+Cp,0,!0),this.v.setTripleAt(Ep+_p,wp+Rp-$p,Ep+_p,wp+Rp-Cp,Ep+_p,wp+Rp-$p,1,!0),$p!==0?(this.v.setTripleAt(Ep+_p-$p,wp+Rp,Ep+_p-$p,wp+Rp,Ep+_p-Cp,wp+Rp,2,!0),this.v.setTripleAt(Ep-_p+$p,wp+Rp,Ep-_p+Cp,wp+Rp,Ep-_p+$p,wp+Rp,3,!0),this.v.setTripleAt(Ep-_p,wp+Rp-$p,Ep-_p,wp+Rp-$p,Ep-_p,wp+Rp-Cp,4,!0),this.v.setTripleAt(Ep-_p,wp-Rp+$p,Ep-_p,wp-Rp+Cp,Ep-_p,wp-Rp+$p,5,!0),this.v.setTripleAt(Ep-_p+$p,wp-Rp,Ep-_p+$p,wp-Rp,Ep-_p+Cp,wp-Rp,6,!0),this.v.setTripleAt(Ep+_p-$p,wp-Rp,Ep+_p-Cp,wp-Rp,Ep+_p-$p,wp-Rp,7,!0)):(this.v.setTripleAt(Ep-_p,wp+Rp,Ep-_p+Cp,wp+Rp,Ep-_p,wp+Rp,2),this.v.setTripleAt(Ep-_p,wp-Rp,Ep-_p,wp-Rp+Cp,Ep-_p,wp-Rp,3))):(this.v.setTripleAt(Ep+_p,wp-Rp+$p,Ep+_p,wp-Rp+Cp,Ep+_p,wp-Rp+$p,0,!0),$p!==0?(this.v.setTripleAt(Ep+_p-$p,wp-Rp,Ep+_p-$p,wp-Rp,Ep+_p-Cp,wp-Rp,1,!0),this.v.setTripleAt(Ep-_p+$p,wp-Rp,Ep-_p+Cp,wp-Rp,Ep-_p+$p,wp-Rp,2,!0),this.v.setTripleAt(Ep-_p,wp-Rp+$p,Ep-_p,wp-Rp+$p,Ep-_p,wp-Rp+Cp,3,!0),this.v.setTripleAt(Ep-_p,wp+Rp-$p,Ep-_p,wp+Rp-Cp,Ep-_p,wp+Rp-$p,4,!0),this.v.setTripleAt(Ep-_p+$p,wp+Rp,Ep-_p+$p,wp+Rp,Ep-_p+Cp,wp+Rp,5,!0),this.v.setTripleAt(Ep+_p-$p,wp+Rp,Ep+_p-Cp,wp+Rp,Ep+_p-$p,wp+Rp,6,!0),this.v.setTripleAt(Ep+_p,wp+Rp-$p,Ep+_p,wp+Rp-$p,Ep+_p,wp+Rp-Cp,7,!0)):(this.v.setTripleAt(Ep-_p,wp-Rp,Ep-_p+Cp,wp-Rp,Ep-_p,wp-Rp,1,!0),this.v.setTripleAt(Ep-_p,wp+Rp,Ep-_p,wp+Rp-Cp,Ep-_p,wp+Rp,2,!0),this.v.setTripleAt(Ep+_p,wp+Rp,Ep+_p-Cp,wp+Rp,Ep+_p,wp+Rp,3,!0)))},getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertRectToPath())},reset:ap},extendPrototype([DynamicPropertyContainer],yp),yp}();function gp(yp,bp,Ep){var wp;if(Ep===3||Ep===4){var _p=Ep===3?bp.pt:bp.ks,Rp=_p.k;Rp.length?wp=new fp(yp,bp,Ep):wp=new cp(yp,bp,Ep)}else Ep===5?wp=new mp(yp,bp):Ep===6?wp=new pp(yp,bp):Ep===7&&(wp=new hp(yp,bp));return wp.k&&yp.addDynamicProperty(wp),wp}function vp(){return cp}function xp(){return fp}var Sp={};return Sp.getShapeProp=gp,Sp.getConstructorFunction=vp,Sp.getKeyframedConstructorFunction=xp,Sp}();/*!
 Transformation Matrix v2.0
 (c) Epistemex 2014-2015
 www.epistemex.com
 By Ken Fyrstenberg
 Contributions by leeoniya.
 License: MIT, header required.
 */var Matrix=function(){var _d=Math.cos,rp=Math.sin,np=Math.tan,ap=Math.round;function sp(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function lp(Tp){if(Tp===0)return this;var Np=_d(Tp),jp=rp(Tp);return this._t(Np,-jp,0,0,jp,Np,0,0,0,0,1,0,0,0,0,1)}function up(Tp){if(Tp===0)return this;var Np=_d(Tp),jp=rp(Tp);return this._t(1,0,0,0,0,Np,-jp,0,0,jp,Np,0,0,0,0,1)}function cp(Tp){if(Tp===0)return this;var Np=_d(Tp),jp=rp(Tp);return this._t(Np,0,jp,0,0,1,0,0,-jp,0,Np,0,0,0,0,1)}function dp(Tp){if(Tp===0)return this;var Np=_d(Tp),jp=rp(Tp);return this._t(Np,-jp,0,0,jp,Np,0,0,0,0,1,0,0,0,0,1)}function fp(Tp,Np){return this._t(1,Np,Tp,1,0,0)}function pp(Tp,Np){return this.shear(np(Tp),np(Np))}function hp(Tp,Np){var jp=_d(Np),Vp=rp(Np);return this._t(jp,Vp,0,0,-Vp,jp,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,np(Tp),1,0,0,0,0,1,0,0,0,0,1)._t(jp,-Vp,0,0,Vp,jp,0,0,0,0,1,0,0,0,0,1)}function mp(Tp,Np,jp){return!jp&&jp!==0&&(jp=1),Tp===1&&Np===1&&jp===1?this:this._t(Tp,0,0,0,0,Np,0,0,0,0,jp,0,0,0,0,1)}function gp(Tp,Np,jp,Vp,zp,Wp,Up,qp,Bp,Yp,Xp,Qp,am,Jp,im,Zp){return this.props[0]=Tp,this.props[1]=Np,this.props[2]=jp,this.props[3]=Vp,this.props[4]=zp,this.props[5]=Wp,this.props[6]=Up,this.props[7]=qp,this.props[8]=Bp,this.props[9]=Yp,this.props[10]=Xp,this.props[11]=Qp,this.props[12]=am,this.props[13]=Jp,this.props[14]=im,this.props[15]=Zp,this}function vp(Tp,Np,jp){return jp=jp||0,Tp!==0||Np!==0||jp!==0?this._t(1,0,0,0,0,1,0,0,0,0,1,0,Tp,Np,jp,1):this}function xp(Tp,Np,jp,Vp,zp,Wp,Up,qp,Bp,Yp,Xp,Qp,am,Jp,im,Zp){var Gp=this.props;if(Tp===1&&Np===0&&jp===0&&Vp===0&&zp===0&&Wp===1&&Up===0&&qp===0&&Bp===0&&Yp===0&&Xp===1&&Qp===0)return Gp[12]=Gp[12]*Tp+Gp[15]*am,Gp[13]=Gp[13]*Wp+Gp[15]*Jp,Gp[14]=Gp[14]*Xp+Gp[15]*im,Gp[15]*=Zp,this._identityCalculated=!1,this;var tm=Gp[0],om=Gp[1],em=Gp[2],_m=Gp[3],Cm=Gp[4],Rm=Gp[5],xm=Gp[6],$m=Gp[7],fm=Gp[8],Sm=Gp[9],pm=Gp[10],hm=Gp[11],lm=Gp[12],sm=Gp[13],ym=Gp[14],Am=Gp[15];return Gp[0]=tm*Tp+om*zp+em*Bp+_m*am,Gp[1]=tm*Np+om*Wp+em*Yp+_m*Jp,Gp[2]=tm*jp+om*Up+em*Xp+_m*im,Gp[3]=tm*Vp+om*qp+em*Qp+_m*Zp,Gp[4]=Cm*Tp+Rm*zp+xm*Bp+$m*am,Gp[5]=Cm*Np+Rm*Wp+xm*Yp+$m*Jp,Gp[6]=Cm*jp+Rm*Up+xm*Xp+$m*im,Gp[7]=Cm*Vp+Rm*qp+xm*Qp+$m*Zp,Gp[8]=fm*Tp+Sm*zp+pm*Bp+hm*am,Gp[9]=fm*Np+Sm*Wp+pm*Yp+hm*Jp,Gp[10]=fm*jp+Sm*Up+pm*Xp+hm*im,Gp[11]=fm*Vp+Sm*qp+pm*Qp+hm*Zp,Gp[12]=lm*Tp+sm*zp+ym*Bp+Am*am,Gp[13]=lm*Np+sm*Wp+ym*Yp+Am*Jp,Gp[14]=lm*jp+sm*Up+ym*Xp+Am*im,Gp[15]=lm*Vp+sm*qp+ym*Qp+Am*Zp,this._identityCalculated=!1,this}function Sp(Tp){var Np=Tp.props;return this.transform(Np[0],Np[1],Np[2],Np[3],Np[4],Np[5],Np[6],Np[7],Np[8],Np[9],Np[10],Np[11],Np[12],Np[13],Np[14],Np[15])}function yp(){return this._identityCalculated||(this._identity=!(this.props[0]!==1||this.props[1]!==0||this.props[2]!==0||this.props[3]!==0||this.props[4]!==0||this.props[5]!==1||this.props[6]!==0||this.props[7]!==0||this.props[8]!==0||this.props[9]!==0||this.props[10]!==1||this.props[11]!==0||this.props[12]!==0||this.props[13]!==0||this.props[14]!==0||this.props[15]!==1),this._identityCalculated=!0),this._identity}function bp(Tp){for(var Np=0;Np<16;){if(Tp.props[Np]!==this.props[Np])return!1;Np+=1}return!0}function Ep(Tp){var Np;for(Np=0;Np<16;Np+=1)Tp.props[Np]=this.props[Np];return Tp}function wp(Tp){var Np;for(Np=0;Np<16;Np+=1)this.props[Np]=Tp[Np]}function _p(Tp,Np,jp){return{x:Tp*this.props[0]+Np*this.props[4]+jp*this.props[8]+this.props[12],y:Tp*this.props[1]+Np*this.props[5]+jp*this.props[9]+this.props[13],z:Tp*this.props[2]+Np*this.props[6]+jp*this.props[10]+this.props[14]}}function Rp(Tp,Np,jp){return Tp*this.props[0]+Np*this.props[4]+jp*this.props[8]+this.props[12]}function $p(Tp,Np,jp){return Tp*this.props[1]+Np*this.props[5]+jp*this.props[9]+this.props[13]}function Cp(Tp,Np,jp){return Tp*this.props[2]+Np*this.props[6]+jp*this.props[10]+this.props[14]}function Ap(){var Tp=this.props[0]*this.props[5]-this.props[1]*this.props[4],Np=this.props[5]/Tp,jp=-this.props[1]/Tp,Vp=-this.props[4]/Tp,zp=this.props[0]/Tp,Wp=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/Tp,Up=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/Tp,qp=new Matrix;return qp.props[0]=Np,qp.props[1]=jp,qp.props[4]=Vp,qp.props[5]=zp,qp.props[12]=Wp,qp.props[13]=Up,qp}function Op(Tp){var Np=this.getInverseMatrix();return Np.applyToPointArray(Tp[0],Tp[1],Tp[2]||0)}function Lp(Tp){var Np,jp=Tp.length,Vp=[];for(Np=0;Np<jp;Np+=1)Vp[Np]=Op(Tp[Np]);return Vp}function Mp(Tp,Np,jp){var Vp=createTypedArray("float32",6);if(this.isIdentity())Vp[0]=Tp[0],Vp[1]=Tp[1],Vp[2]=Np[0],Vp[3]=Np[1],Vp[4]=jp[0],Vp[5]=jp[1];else{var zp=this.props[0],Wp=this.props[1],Up=this.props[4],qp=this.props[5],Bp=this.props[12],Yp=this.props[13];Vp[0]=Tp[0]*zp+Tp[1]*Up+Bp,Vp[1]=Tp[0]*Wp+Tp[1]*qp+Yp,Vp[2]=Np[0]*zp+Np[1]*Up+Bp,Vp[3]=Np[0]*Wp+Np[1]*qp+Yp,Vp[4]=jp[0]*zp+jp[1]*Up+Bp,Vp[5]=jp[0]*Wp+jp[1]*qp+Yp}return Vp}function kp(Tp,Np,jp){var Vp;return this.isIdentity()?Vp=[Tp,Np,jp]:Vp=[Tp*this.props[0]+Np*this.props[4]+jp*this.props[8]+this.props[12],Tp*this.props[1]+Np*this.props[5]+jp*this.props[9]+this.props[13],Tp*this.props[2]+Np*this.props[6]+jp*this.props[10]+this.props[14]],Vp}function Dp(Tp,Np){if(this.isIdentity())return Tp+","+Np;var jp=this.props;return Math.round((Tp*jp[0]+Np*jp[4]+jp[12])*100)/100+","+Math.round((Tp*jp[1]+Np*jp[5]+jp[13])*100)/100}function Fp(){for(var Tp=0,Np=this.props,jp="matrix3d(",Vp=1e4;Tp<16;)jp+=ap(Np[Tp]*Vp)/Vp,jp+=Tp===15?")":",",Tp+=1;return jp}function Ip(Tp){var Np=1e4;return Tp<1e-6&&Tp>0||Tp>-1e-6&&Tp<0?ap(Tp*Np)/Np:Tp}function Pp(){var Tp=this.props,Np=Ip(Tp[0]),jp=Ip(Tp[1]),Vp=Ip(Tp[4]),zp=Ip(Tp[5]),Wp=Ip(Tp[12]),Up=Ip(Tp[13]);return"matrix("+Np+","+jp+","+Vp+","+zp+","+Wp+","+Up+")"}return function(){this.reset=sp,this.rotate=lp,this.rotateX=up,this.rotateY=cp,this.rotateZ=dp,this.skew=pp,this.skewFromAxis=hp,this.shear=fp,this.scale=mp,this.setTransform=gp,this.translate=vp,this.transform=xp,this.multiply=Sp,this.applyToPoint=_p,this.applyToX=Rp,this.applyToY=$p,this.applyToZ=Cp,this.applyToPointArray=kp,this.applyToTriplePoints=Mp,this.applyToPointStringified=Dp,this.toCSS=Fp,this.to2dCSS=Pp,this.clone=Ep,this.cloneFromProps=wp,this.equals=bp,this.inversePoints=Lp,this.inversePoint=Op,this.getInverseMatrix=Ap,this._t=this.transform,this.isIdentity=yp,this._identity=!0,this._identityCalculated=!1,this.props=createTypedArray("float32",16),this.reset()}}();function _typeof$3(_d){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$3=function(np){return typeof np}:_typeof$3=function(np){return np&&typeof Symbol=="function"&&np.constructor===Symbol&&np!==Symbol.prototype?"symbol":typeof np},_typeof$3(_d)}var lottie={};function setLocation(_d){setLocationHref(_d)}function searchAnimations(){animationManager.searchAnimations()}function setSubframeRendering(_d){setSubframeEnabled(_d)}function setPrefix(_d){setIdPrefix(_d)}function loadAnimation(_d){return animationManager.loadAnimation(_d)}function setQuality(_d){if(typeof _d=="string")switch(_d){case"high":setDefaultCurveSegments(200);break;default:case"medium":setDefaultCurveSegments(50);break;case"low":setDefaultCurveSegments(10);break}else!isNaN(_d)&&_d>1&&setDefaultCurveSegments(_d)}function inBrowser(){return typeof navigator<"u"}function installPlugin(_d,rp){_d==="expressions"&&setExpressionsPlugin(rp)}function getFactory(_d){switch(_d){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix;default:return null}}lottie.play=animationManager.play,lottie.pause=animationManager.pause,lottie.setLocationHref=setLocation,lottie.togglePause=animationManager.togglePause,lottie.setSpeed=animationManager.setSpeed,lottie.setDirection=animationManager.setDirection,lottie.stop=animationManager.stop,lottie.searchAnimations=searchAnimations,lottie.registerAnimation=animationManager.registerAnimation,lottie.loadAnimation=loadAnimation,lottie.setSubframeRendering=setSubframeRendering,lottie.resize=animationManager.resize,lottie.goToAndStop=animationManager.goToAndStop,lottie.destroy=animationManager.destroy,lottie.setQuality=setQuality,lottie.inBrowser=inBrowser,lottie.installPlugin=installPlugin,lottie.freeze=animationManager.freeze,lottie.unfreeze=animationManager.unfreeze,lottie.setVolume=animationManager.setVolume,lottie.mute=animationManager.mute,lottie.unmute=animationManager.unmute,lottie.getRegisteredAnimations=animationManager.getRegisteredAnimations,lottie.useWebWorker=setWebWorker,lottie.setIDPrefix=setPrefix,lottie.__getFactory=getFactory,lottie.version="5.12.2";function checkReady(){document.readyState==="complete"&&(clearInterval(readyStateCheckInterval),searchAnimations())}function getQueryVariable(_d){for(var rp=queryString.split("&"),np=0;np<rp.length;np+=1){var ap=rp[np].split("=");if(decodeURIComponent(ap[0])==_d)return decodeURIComponent(ap[1])}return null}var queryString="";{var scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index]||{src:""};queryString=myScript.src?myScript.src.replace(/^[^\?]+\??/,""):"",getQueryVariable("renderer")}var readyStateCheckInterval=setInterval(checkReady,100);try{_typeof$3(exports)!=="object"&&(window.bodymovin=lottie)}catch(_d){}var ShapeModifiers=function(){var _d={},rp={};_d.registerModifier=np,_d.getModifier=ap;function np(sp,lp){rp[sp]||(rp[sp]=lp)}function ap(sp,lp,up){return new rp[sp](lp,up)}return _d}();function ShapeModifier(){}ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function(_d){if(!this.closed){_d.sh.container.addDynamicProperty(_d.sh);var rp={shape:_d.sh,data:_d,localShapeCollection:shapeCollectionPool.newShapeCollection()};this.shapes.push(rp),this.addShapeToModifier(rp),this._isAnimated&&_d.setAsAnimated()}},ShapeModifier.prototype.init=function(_d,rp){this.shapes=[],this.elem=_d,this.initDynamicPropertyContainer(_d),this.initModifierProperties(_d,rp),this.frameId=initialDefaultFrame,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)},ShapeModifier.prototype.processKeys=function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties())},extendPrototype([DynamicPropertyContainer],ShapeModifier);function TrimModifier(){}extendPrototype([ShapeModifier],TrimModifier),TrimModifier.prototype.initModifierProperties=function(_d,rp){this.s=PropertyFactory.getProp(_d,rp.s,0,.01,this),this.e=PropertyFactory.getProp(_d,rp.e,0,.01,this),this.o=PropertyFactory.getProp(_d,rp.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=rp.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length},TrimModifier.prototype.addShapeToModifier=function(_d){_d.pathsData=[]},TrimModifier.prototype.calculateShapeEdges=function(_d,rp,np,ap,sp){var lp=[];rp<=1?lp.push({s:_d,e:rp}):_d>=1?lp.push({s:_d-1,e:rp-1}):(lp.push({s:_d,e:1}),lp.push({s:0,e:rp-1}));var up=[],cp,dp=lp.length,fp;for(cp=0;cp<dp;cp+=1)if(fp=lp[cp],!(fp.e*sp<ap||fp.s*sp>ap+np)){var pp,hp;fp.s*sp<=ap?pp=0:pp=(fp.s*sp-ap)/np,fp.e*sp>=ap+np?hp=1:hp=(fp.e*sp-ap)/np,up.push([pp,hp])}return up.length||up.push([0,0]),up},TrimModifier.prototype.releasePathsData=function(_d){var rp,np=_d.length;for(rp=0;rp<np;rp+=1)segmentsLengthPool.release(_d[rp]);return _d.length=0,_d},TrimModifier.prototype.processShapes=function(_d){var rp,np;if(this._mdf||_d){var ap=this.o.v%360/360;if(ap<0&&(ap+=1),this.s.v>1?rp=1+ap:this.s.v<0?rp=0+ap:rp=this.s.v+ap,this.e.v>1?np=1+ap:this.e.v<0?np=0+ap:np=this.e.v+ap,rp>np){var sp=rp;rp=np,np=sp}rp=Math.round(rp*1e4)*1e-4,np=Math.round(np*1e4)*1e-4,this.sValue=rp,this.eValue=np}else rp=this.sValue,np=this.eValue;var lp,up,cp=this.shapes.length,dp,fp,pp,hp,mp,gp=0;if(np===rp)for(up=0;up<cp;up+=1)this.shapes[up].localShapeCollection.releaseShapes(),this.shapes[up].shape._mdf=!0,this.shapes[up].shape.paths=this.shapes[up].localShapeCollection,this._mdf&&(this.shapes[up].pathsData.length=0);else if(np===1&&rp===0||np===0&&rp===1){if(this._mdf)for(up=0;up<cp;up+=1)this.shapes[up].pathsData.length=0,this.shapes[up].shape._mdf=!0}else{var vp=[],xp,Sp;for(up=0;up<cp;up+=1)if(xp=this.shapes[up],!xp.shape._mdf&&!this._mdf&&!_d&&this.m!==2)xp.shape.paths=xp.localShapeCollection;else{if(lp=xp.shape.paths,fp=lp._length,mp=0,!xp.shape._mdf&&xp.pathsData.length)mp=xp.totalShapeLength;else{for(pp=this.releasePathsData(xp.pathsData),dp=0;dp<fp;dp+=1)hp=bez.getSegmentsLength(lp.shapes[dp]),pp.push(hp),mp+=hp.totalLength;xp.totalShapeLength=mp,xp.pathsData=pp}gp+=mp,xp.shape._mdf=!0}var yp=rp,bp=np,Ep=0,wp;for(up=cp-1;up>=0;up-=1)if(xp=this.shapes[up],xp.shape._mdf){for(Sp=xp.localShapeCollection,Sp.releaseShapes(),this.m===2&&cp>1?(wp=this.calculateShapeEdges(rp,np,xp.totalShapeLength,Ep,gp),Ep+=xp.totalShapeLength):wp=[[yp,bp]],fp=wp.length,dp=0;dp<fp;dp+=1){yp=wp[dp][0],bp=wp[dp][1],vp.length=0,bp<=1?vp.push({s:xp.totalShapeLength*yp,e:xp.totalShapeLength*bp}):yp>=1?vp.push({s:xp.totalShapeLength*(yp-1),e:xp.totalShapeLength*(bp-1)}):(vp.push({s:xp.totalShapeLength*yp,e:xp.totalShapeLength}),vp.push({s:0,e:xp.totalShapeLength*(bp-1)}));var _p=this.addShapes(xp,vp[0]);if(vp[0].s!==vp[0].e){if(vp.length>1){var Rp=xp.shape.paths.shapes[xp.shape.paths._length-1];if(Rp.c){var $p=_p.pop();this.addPaths(_p,Sp),_p=this.addShapes(xp,vp[1],$p)}else this.addPaths(_p,Sp),_p=this.addShapes(xp,vp[1])}this.addPaths(_p,Sp)}}xp.shape.paths=Sp}}},TrimModifier.prototype.addPaths=function(_d,rp){var np,ap=_d.length;for(np=0;np<ap;np+=1)rp.addShape(_d[np])},TrimModifier.prototype.addSegment=function(_d,rp,np,ap,sp,lp,up){sp.setXYAt(rp[0],rp[1],"o",lp),sp.setXYAt(np[0],np[1],"i",lp+1),up&&sp.setXYAt(_d[0],_d[1],"v",lp),sp.setXYAt(ap[0],ap[1],"v",lp+1)},TrimModifier.prototype.addSegmentFromArray=function(_d,rp,np,ap){rp.setXYAt(_d[1],_d[5],"o",np),rp.setXYAt(_d[2],_d[6],"i",np+1),ap&&rp.setXYAt(_d[0],_d[4],"v",np),rp.setXYAt(_d[3],_d[7],"v",np+1)},TrimModifier.prototype.addShapes=function(_d,rp,np){var ap=_d.pathsData,sp=_d.shape.paths.shapes,lp,up=_d.shape.paths._length,cp,dp,fp=0,pp,hp,mp,gp,vp=[],xp,Sp=!0;for(np?(hp=np._length,xp=np._length):(np=shapePool.newElement(),hp=0,xp=0),vp.push(np),lp=0;lp<up;lp+=1){for(mp=ap[lp].lengths,np.c=sp[lp].c,dp=sp[lp].c?mp.length:mp.length+1,cp=1;cp<dp;cp+=1)if(pp=mp[cp-1],fp+pp.addedLength<rp.s)fp+=pp.addedLength,np.c=!1;else if(fp>rp.e){np.c=!1;break}else rp.s<=fp&&rp.e>=fp+pp.addedLength?(this.addSegment(sp[lp].v[cp-1],sp[lp].o[cp-1],sp[lp].i[cp],sp[lp].v[cp],np,hp,Sp),Sp=!1):(gp=bez.getNewSegment(sp[lp].v[cp-1],sp[lp].v[cp],sp[lp].o[cp-1],sp[lp].i[cp],(rp.s-fp)/pp.addedLength,(rp.e-fp)/pp.addedLength,mp[cp-1]),this.addSegmentFromArray(gp,np,hp,Sp),Sp=!1,np.c=!1),fp+=pp.addedLength,hp+=1;if(sp[lp].c&&mp.length){if(pp=mp[cp-1],fp<=rp.e){var yp=mp[cp-1].addedLength;rp.s<=fp&&rp.e>=fp+yp?(this.addSegment(sp[lp].v[cp-1],sp[lp].o[cp-1],sp[lp].i[0],sp[lp].v[0],np,hp,Sp),Sp=!1):(gp=bez.getNewSegment(sp[lp].v[cp-1],sp[lp].v[0],sp[lp].o[cp-1],sp[lp].i[0],(rp.s-fp)/yp,(rp.e-fp)/yp,mp[cp-1]),this.addSegmentFromArray(gp,np,hp,Sp),Sp=!1,np.c=!1)}else np.c=!1;fp+=pp.addedLength,hp+=1}if(np._length&&(np.setXYAt(np.v[xp][0],np.v[xp][1],"i",xp),np.setXYAt(np.v[np._length-1][0],np.v[np._length-1][1],"o",np._length-1)),fp>rp.e)break;lp<up-1&&(np=shapePool.newElement(),Sp=!0,vp.push(np),hp=0)}return vp};function PuckerAndBloatModifier(){}extendPrototype([ShapeModifier],PuckerAndBloatModifier),PuckerAndBloatModifier.prototype.initModifierProperties=function(_d,rp){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(_d,rp.a,0,null,this),this._isAnimated=!!this.amount.effectsSequence.length},PuckerAndBloatModifier.prototype.processPath=function(_d,rp){var np=rp/100,ap=[0,0],sp=_d._length,lp=0;for(lp=0;lp<sp;lp+=1)ap[0]+=_d.v[lp][0],ap[1]+=_d.v[lp][1];ap[0]/=sp,ap[1]/=sp;var up=shapePool.newElement();up.c=_d.c;var cp,dp,fp,pp,hp,mp;for(lp=0;lp<sp;lp+=1)cp=_d.v[lp][0]+(ap[0]-_d.v[lp][0])*np,dp=_d.v[lp][1]+(ap[1]-_d.v[lp][1])*np,fp=_d.o[lp][0]+(ap[0]-_d.o[lp][0])*-np,pp=_d.o[lp][1]+(ap[1]-_d.o[lp][1])*-np,hp=_d.i[lp][0]+(ap[0]-_d.i[lp][0])*-np,mp=_d.i[lp][1]+(ap[1]-_d.i[lp][1])*-np,up.setTripleAt(cp,dp,fp,pp,hp,mp,lp);return up},PuckerAndBloatModifier.prototype.processShapes=function(_d){var rp,np,ap=this.shapes.length,sp,lp,up=this.amount.v;if(up!==0){var cp,dp;for(np=0;np<ap;np+=1){if(cp=this.shapes[np],dp=cp.localShapeCollection,!(!cp.shape._mdf&&!this._mdf&&!_d))for(dp.releaseShapes(),cp.shape._mdf=!0,rp=cp.shape.paths.shapes,lp=cp.shape.paths._length,sp=0;sp<lp;sp+=1)dp.addShape(this.processPath(rp[sp],up));cp.shape.paths=cp.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};var TransformPropertyFactory=function(){var _d=[0,0];function rp(dp){var fp=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||fp,this.a&&dp.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&dp.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&dp.skewFromAxis(-this.sk.v,this.sa.v),this.r?dp.rotate(-this.r.v):dp.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?this.data.p.z?dp.translate(this.px.v,this.py.v,-this.pz.v):dp.translate(this.px.v,this.py.v,0):dp.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}function np(dp){if(this.elem.globalData.frameId!==this.frameId){if(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),this._mdf||dp){var fp;if(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&this.appliedTransformations<4?this.v.rotate(-this.r.v):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented){var pp,hp;if(fp=this.elem.globalData.frameRate,this.p&&this.p.keyframes&&this.p.getValueAtTime)this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(pp=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/fp,0),hp=this.p.getValueAtTime(this.p.keyframes[0].t/fp,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(pp=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/fp,0),hp=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.05)/fp,0)):(pp=this.p.pv,hp=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/fp,this.p.offsetTime));else if(this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime){pp=[],hp=[];var mp=this.px,gp=this.py;mp._caching.lastFrame+mp.offsetTime<=mp.keyframes[0].t?(pp[0]=mp.getValueAtTime((mp.keyframes[0].t+.01)/fp,0),pp[1]=gp.getValueAtTime((gp.keyframes[0].t+.01)/fp,0),hp[0]=mp.getValueAtTime(mp.keyframes[0].t/fp,0),hp[1]=gp.getValueAtTime(gp.keyframes[0].t/fp,0)):mp._caching.lastFrame+mp.offsetTime>=mp.keyframes[mp.keyframes.length-1].t?(pp[0]=mp.getValueAtTime(mp.keyframes[mp.keyframes.length-1].t/fp,0),pp[1]=gp.getValueAtTime(gp.keyframes[gp.keyframes.length-1].t/fp,0),hp[0]=mp.getValueAtTime((mp.keyframes[mp.keyframes.length-1].t-.01)/fp,0),hp[1]=gp.getValueAtTime((gp.keyframes[gp.keyframes.length-1].t-.01)/fp,0)):(pp=[mp.pv,gp.pv],hp[0]=mp.getValueAtTime((mp._caching.lastFrame+mp.offsetTime-.01)/fp,mp.offsetTime),hp[1]=gp.getValueAtTime((gp._caching.lastFrame+gp.offsetTime-.01)/fp,gp.offsetTime))}else hp=_d,pp=hp;this.v.rotate(-Math.atan2(pp[1]-hp[1],pp[0]-hp[0]))}this.data.p&&this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}}function ap(){if(this.appliedTransformations=0,this.pre.reset(),!this.a.effectsSequence.length)this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1;else return;if(!this.s.effectsSequence.length)this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2;else return;if(this.sk)if(!this.sk.effectsSequence.length&&!this.sa.effectsSequence.length)this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3;else return;this.r?this.r.effectsSequence.length||(this.pre.rotate(-this.r.v),this.appliedTransformations=4):!this.rz.effectsSequence.length&&!this.ry.effectsSequence.length&&!this.rx.effectsSequence.length&&!this.or.effectsSequence.length&&(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}function sp(){}function lp(dp){this._addDynamicProperty(dp),this.elem.addDynamicProperty(dp),this._isDirty=!0}function up(dp,fp,pp){if(this.elem=dp,this.frameId=-1,this.propType="transform",this.data=fp,this.v=new Matrix,this.pre=new Matrix,this.appliedTransformations=0,this.initDynamicPropertyContainer(pp||dp),fp.p&&fp.p.s?(this.px=PropertyFactory.getProp(dp,fp.p.x,0,0,this),this.py=PropertyFactory.getProp(dp,fp.p.y,0,0,this),fp.p.z&&(this.pz=PropertyFactory.getProp(dp,fp.p.z,0,0,this))):this.p=PropertyFactory.getProp(dp,fp.p||{k:[0,0,0]},1,0,this),fp.rx){if(this.rx=PropertyFactory.getProp(dp,fp.rx,0,degToRads,this),this.ry=PropertyFactory.getProp(dp,fp.ry,0,degToRads,this),this.rz=PropertyFactory.getProp(dp,fp.rz,0,degToRads,this),fp.or.k[0].ti){var hp,mp=fp.or.k.length;for(hp=0;hp<mp;hp+=1)fp.or.k[hp].to=null,fp.or.k[hp].ti=null}this.or=PropertyFactory.getProp(dp,fp.or,1,degToRads,this),this.or.sh=!0}else this.r=PropertyFactory.getProp(dp,fp.r||{k:0},0,degToRads,this);fp.sk&&(this.sk=PropertyFactory.getProp(dp,fp.sk,0,degToRads,this),this.sa=PropertyFactory.getProp(dp,fp.sa,0,degToRads,this)),this.a=PropertyFactory.getProp(dp,fp.a||{k:[0,0,0]},1,0,this),this.s=PropertyFactory.getProp(dp,fp.s||{k:[100,100,100]},1,.01,this),fp.o?this.o=PropertyFactory.getProp(dp,fp.o,0,.01,dp):this.o={_mdf:!1,v:1},this._isDirty=!0,this.dynamicProperties.length||this.getValue(!0)}up.prototype={applyToMatrix:rp,getValue:np,precalculateMatrix:ap,autoOrient:sp},extendPrototype([DynamicPropertyContainer],up),up.prototype.addDynamicProperty=lp,up.prototype._addDynamicProperty=DynamicPropertyContainer.prototype.addDynamicProperty;function cp(dp,fp,pp){return new up(dp,fp,pp)}return{getTransformProperty:cp}}();function RepeaterModifier(){}extendPrototype([ShapeModifier],RepeaterModifier),RepeaterModifier.prototype.initModifierProperties=function(_d,rp){this.getValue=this.processKeys,this.c=PropertyFactory.getProp(_d,rp.c,0,null,this),this.o=PropertyFactory.getProp(_d,rp.o,0,null,this),this.tr=TransformPropertyFactory.getTransformProperty(_d,rp.tr,this),this.so=PropertyFactory.getProp(_d,rp.tr.so,0,.01,this),this.eo=PropertyFactory.getProp(_d,rp.tr.eo,0,.01,this),this.data=rp,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new Matrix,this.rMatrix=new Matrix,this.sMatrix=new Matrix,this.tMatrix=new Matrix,this.matrix=new Matrix},RepeaterModifier.prototype.applyTransforms=function(_d,rp,np,ap,sp,lp){var up=lp?-1:1,cp=ap.s.v[0]+(1-ap.s.v[0])*(1-sp),dp=ap.s.v[1]+(1-ap.s.v[1])*(1-sp);_d.translate(ap.p.v[0]*up*sp,ap.p.v[1]*up*sp,ap.p.v[2]),rp.translate(-ap.a.v[0],-ap.a.v[1],ap.a.v[2]),rp.rotate(-ap.r.v*up*sp),rp.translate(ap.a.v[0],ap.a.v[1],ap.a.v[2]),np.translate(-ap.a.v[0],-ap.a.v[1],ap.a.v[2]),np.scale(lp?1/cp:cp,lp?1/dp:dp),np.translate(ap.a.v[0],ap.a.v[1],ap.a.v[2])},RepeaterModifier.prototype.init=function(_d,rp,np,ap){for(this.elem=_d,this.arr=rp,this.pos=np,this.elemsData=ap,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(_d),this.initModifierProperties(_d,rp[np]);np>0;)np-=1,this._elements.unshift(rp[np]);this.dynamicProperties.length?this.k=!0:this.getValue(!0)},RepeaterModifier.prototype.resetElements=function(_d){var rp,np=_d.length;for(rp=0;rp<np;rp+=1)_d[rp]._processed=!1,_d[rp].ty==="gr"&&this.resetElements(_d[rp].it)},RepeaterModifier.prototype.cloneElements=function(_d){var rp=JSON.parse(JSON.stringify(_d));return this.resetElements(rp),rp},RepeaterModifier.prototype.changeGroupRender=function(_d,rp){var np,ap=_d.length;for(np=0;np<ap;np+=1)_d[np]._render=rp,_d[np].ty==="gr"&&this.changeGroupRender(_d[np].it,rp)},RepeaterModifier.prototype.processShapes=function(_d){var rp,np,ap,sp,lp,up=!1;if(this._mdf||_d){var cp=Math.ceil(this.c.v);if(this._groups.length<cp){for(;this._groups.length<cp;){var dp={it:this.cloneElements(this._elements),ty:"gr"};dp.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,dp),this._groups.splice(0,0,dp),this._currentCopies+=1}this.elem.reloadShapes(),up=!0}lp=0;var fp;for(ap=0;ap<=this._groups.length-1;ap+=1){if(fp=lp<cp,this._groups[ap]._render=fp,this.changeGroupRender(this._groups[ap].it,fp),!fp){var pp=this.elemsData[ap].it,hp=pp[pp.length-1];hp.transform.op.v!==0?(hp.transform.op._mdf=!0,hp.transform.op.v=0):hp.transform.op._mdf=!1}lp+=1}this._currentCopies=cp;var mp=this.o.v,gp=mp%1,vp=mp>0?Math.floor(mp):Math.ceil(mp),xp=this.pMatrix.props,Sp=this.rMatrix.props,yp=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var bp=0;if(mp>0){for(;bp<vp;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),bp+=1;gp&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,gp,!1),bp+=gp)}else if(mp<0){for(;bp>vp;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),bp-=1;gp&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-gp,!0),bp-=gp)}ap=this.data.m===1?0:this._currentCopies-1,sp=this.data.m===1?1:-1,lp=this._currentCopies;for(var Ep,wp;lp;){if(rp=this.elemsData[ap].it,np=rp[rp.length-1].transform.mProps.v.props,wp=np.length,rp[rp.length-1].transform.mProps._mdf=!0,rp[rp.length-1].transform.op._mdf=!0,rp[rp.length-1].transform.op.v=this._currentCopies===1?this.so.v:this.so.v+(this.eo.v-this.so.v)*(ap/(this._currentCopies-1)),bp!==0){for((ap!==0&&sp===1||ap!==this._currentCopies-1&&sp===-1)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(Sp[0],Sp[1],Sp[2],Sp[3],Sp[4],Sp[5],Sp[6],Sp[7],Sp[8],Sp[9],Sp[10],Sp[11],Sp[12],Sp[13],Sp[14],Sp[15]),this.matrix.transform(yp[0],yp[1],yp[2],yp[3],yp[4],yp[5],yp[6],yp[7],yp[8],yp[9],yp[10],yp[11],yp[12],yp[13],yp[14],yp[15]),this.matrix.transform(xp[0],xp[1],xp[2],xp[3],xp[4],xp[5],xp[6],xp[7],xp[8],xp[9],xp[10],xp[11],xp[12],xp[13],xp[14],xp[15]),Ep=0;Ep<wp;Ep+=1)np[Ep]=this.matrix.props[Ep];this.matrix.reset()}else for(this.matrix.reset(),Ep=0;Ep<wp;Ep+=1)np[Ep]=this.matrix.props[Ep];bp+=1,lp-=1,ap+=sp}}else for(lp=this._currentCopies,ap=0,sp=1;lp;)rp=this.elemsData[ap].it,np=rp[rp.length-1].transform.mProps.v.props,rp[rp.length-1].transform.mProps._mdf=!1,rp[rp.length-1].transform.op._mdf=!1,lp-=1,ap+=sp;return up},RepeaterModifier.prototype.addShape=function(){};function RoundCornersModifier(){}extendPrototype([ShapeModifier],RoundCornersModifier),RoundCornersModifier.prototype.initModifierProperties=function(_d,rp){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(_d,rp.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length},RoundCornersModifier.prototype.processPath=function(_d,rp){var np=shapePool.newElement();np.c=_d.c;var ap,sp=_d._length,lp,up,cp,dp,fp,pp,hp=0,mp,gp,vp,xp,Sp,yp;for(ap=0;ap<sp;ap+=1)lp=_d.v[ap],cp=_d.o[ap],up=_d.i[ap],lp[0]===cp[0]&&lp[1]===cp[1]&&lp[0]===up[0]&&lp[1]===up[1]?(ap===0||ap===sp-1)&&!_d.c?(np.setTripleAt(lp[0],lp[1],cp[0],cp[1],up[0],up[1],hp),hp+=1):(ap===0?dp=_d.v[sp-1]:dp=_d.v[ap-1],fp=Math.sqrt(Math.pow(lp[0]-dp[0],2)+Math.pow(lp[1]-dp[1],2)),pp=fp?Math.min(fp/2,rp)/fp:0,Sp=lp[0]+(dp[0]-lp[0])*pp,mp=Sp,yp=lp[1]-(lp[1]-dp[1])*pp,gp=yp,vp=mp-(mp-lp[0])*roundCorner,xp=gp-(gp-lp[1])*roundCorner,np.setTripleAt(mp,gp,vp,xp,Sp,yp,hp),hp+=1,ap===sp-1?dp=_d.v[0]:dp=_d.v[ap+1],fp=Math.sqrt(Math.pow(lp[0]-dp[0],2)+Math.pow(lp[1]-dp[1],2)),pp=fp?Math.min(fp/2,rp)/fp:0,vp=lp[0]+(dp[0]-lp[0])*pp,mp=vp,xp=lp[1]+(dp[1]-lp[1])*pp,gp=xp,Sp=mp-(mp-lp[0])*roundCorner,yp=gp-(gp-lp[1])*roundCorner,np.setTripleAt(mp,gp,vp,xp,Sp,yp,hp),hp+=1):(np.setTripleAt(_d.v[ap][0],_d.v[ap][1],_d.o[ap][0],_d.o[ap][1],_d.i[ap][0],_d.i[ap][1],hp),hp+=1);return np},RoundCornersModifier.prototype.processShapes=function(_d){var rp,np,ap=this.shapes.length,sp,lp,up=this.rd.v;if(up!==0){var cp,dp;for(np=0;np<ap;np+=1){if(cp=this.shapes[np],dp=cp.localShapeCollection,!(!cp.shape._mdf&&!this._mdf&&!_d))for(dp.releaseShapes(),cp.shape._mdf=!0,rp=cp.shape.paths.shapes,lp=cp.shape.paths._length,sp=0;sp<lp;sp+=1)dp.addShape(this.processPath(rp[sp],up));cp.shape.paths=cp.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function floatEqual(_d,rp){return Math.abs(_d-rp)*1e5<=Math.min(Math.abs(_d),Math.abs(rp))}function floatZero(_d){return Math.abs(_d)<=1e-5}function lerp(_d,rp,np){return _d*(1-np)+rp*np}function lerpPoint(_d,rp,np){return[lerp(_d[0],rp[0],np),lerp(_d[1],rp[1],np)]}function quadRoots(_d,rp,np){if(_d===0)return[];var ap=rp*rp-4*_d*np;if(ap<0)return[];var sp=-rp/(2*_d);if(ap===0)return[sp];var lp=Math.sqrt(ap)/(2*_d);return[sp-lp,sp+lp]}function polynomialCoefficients(_d,rp,np,ap){return[-_d+3*rp-3*np+ap,3*_d-6*rp+3*np,-3*_d+3*rp,_d]}function singlePoint(_d){return new PolynomialBezier(_d,_d,_d,_d,!1)}function PolynomialBezier(_d,rp,np,ap,sp){sp&&pointEqual(_d,rp)&&(rp=lerpPoint(_d,ap,1/3)),sp&&pointEqual(np,ap)&&(np=lerpPoint(_d,ap,2/3));var lp=polynomialCoefficients(_d[0],rp[0],np[0],ap[0]),up=polynomialCoefficients(_d[1],rp[1],np[1],ap[1]);this.a=[lp[0],up[0]],this.b=[lp[1],up[1]],this.c=[lp[2],up[2]],this.d=[lp[3],up[3]],this.points=[_d,rp,np,ap]}PolynomialBezier.prototype.point=function(_d){return[((this.a[0]*_d+this.b[0])*_d+this.c[0])*_d+this.d[0],((this.a[1]*_d+this.b[1])*_d+this.c[1])*_d+this.d[1]]},PolynomialBezier.prototype.derivative=function(_d){return[(3*_d*this.a[0]+2*this.b[0])*_d+this.c[0],(3*_d*this.a[1]+2*this.b[1])*_d+this.c[1]]},PolynomialBezier.prototype.tangentAngle=function(_d){var rp=this.derivative(_d);return Math.atan2(rp[1],rp[0])},PolynomialBezier.prototype.normalAngle=function(_d){var rp=this.derivative(_d);return Math.atan2(rp[0],rp[1])},PolynomialBezier.prototype.inflectionPoints=function(){var _d=this.a[1]*this.b[0]-this.a[0]*this.b[1];if(floatZero(_d))return[];var rp=-.5*(this.a[1]*this.c[0]-this.a[0]*this.c[1])/_d,np=rp*rp-1/3*(this.b[1]*this.c[0]-this.b[0]*this.c[1])/_d;if(np<0)return[];var ap=Math.sqrt(np);return floatZero(ap)?ap>0&&ap<1?[rp]:[]:[rp-ap,rp+ap].filter(function(sp){return sp>0&&sp<1})},PolynomialBezier.prototype.split=function(_d){if(_d<=0)return[singlePoint(this.points[0]),this];if(_d>=1)return[this,singlePoint(this.points[this.points.length-1])];var rp=lerpPoint(this.points[0],this.points[1],_d),np=lerpPoint(this.points[1],this.points[2],_d),ap=lerpPoint(this.points[2],this.points[3],_d),sp=lerpPoint(rp,np,_d),lp=lerpPoint(np,ap,_d),up=lerpPoint(sp,lp,_d);return[new PolynomialBezier(this.points[0],rp,sp,up,!0),new PolynomialBezier(up,lp,ap,this.points[3],!0)]};function extrema(_d,rp){var np=_d.points[0][rp],ap=_d.points[_d.points.length-1][rp];if(np>ap){var sp=ap;ap=np,np=sp}for(var lp=quadRoots(3*_d.a[rp],2*_d.b[rp],_d.c[rp]),up=0;up<lp.length;up+=1)if(lp[up]>0&&lp[up]<1){var cp=_d.point(lp[up])[rp];cp<np?np=cp:cp>ap&&(ap=cp)}return{min:np,max:ap}}PolynomialBezier.prototype.bounds=function(){return{x:extrema(this,0),y:extrema(this,1)}},PolynomialBezier.prototype.boundingBox=function(){var _d=this.bounds();return{left:_d.x.min,right:_d.x.max,top:_d.y.min,bottom:_d.y.max,width:_d.x.max-_d.x.min,height:_d.y.max-_d.y.min,cx:(_d.x.max+_d.x.min)/2,cy:(_d.y.max+_d.y.min)/2}};function intersectData(_d,rp,np){var ap=_d.boundingBox();return{cx:ap.cx,cy:ap.cy,width:ap.width,height:ap.height,bez:_d,t:(rp+np)/2,t1:rp,t2:np}}function splitData(_d){var rp=_d.bez.split(.5);return[intersectData(rp[0],_d.t1,_d.t),intersectData(rp[1],_d.t,_d.t2)]}function boxIntersect(_d,rp){return Math.abs(_d.cx-rp.cx)*2<_d.width+rp.width&&Math.abs(_d.cy-rp.cy)*2<_d.height+rp.height}function intersectsImpl(_d,rp,np,ap,sp,lp){if(boxIntersect(_d,rp)){if(np>=lp||_d.width<=ap&&_d.height<=ap&&rp.width<=ap&&rp.height<=ap){sp.push([_d.t,rp.t]);return}var up=splitData(_d),cp=splitData(rp);intersectsImpl(up[0],cp[0],np+1,ap,sp,lp),intersectsImpl(up[0],cp[1],np+1,ap,sp,lp),intersectsImpl(up[1],cp[0],np+1,ap,sp,lp),intersectsImpl(up[1],cp[1],np+1,ap,sp,lp)}}PolynomialBezier.prototype.intersections=function(_d,rp,np){rp===void 0&&(rp=2),np===void 0&&(np=7);var ap=[];return intersectsImpl(intersectData(this,0,1),intersectData(_d,0,1),0,rp,ap,np),ap},PolynomialBezier.shapeSegment=function(_d,rp){var np=(rp+1)%_d.length();return new PolynomialBezier(_d.v[rp],_d.o[rp],_d.i[np],_d.v[np],!0)},PolynomialBezier.shapeSegmentInverted=function(_d,rp){var np=(rp+1)%_d.length();return new PolynomialBezier(_d.v[np],_d.i[np],_d.o[rp],_d.v[rp],!0)};function crossProduct(_d,rp){return[_d[1]*rp[2]-_d[2]*rp[1],_d[2]*rp[0]-_d[0]*rp[2],_d[0]*rp[1]-_d[1]*rp[0]]}function lineIntersection(_d,rp,np,ap){var sp=[_d[0],_d[1],1],lp=[rp[0],rp[1],1],up=[np[0],np[1],1],cp=[ap[0],ap[1],1],dp=crossProduct(crossProduct(sp,lp),crossProduct(up,cp));return floatZero(dp[2])?null:[dp[0]/dp[2],dp[1]/dp[2]]}function polarOffset(_d,rp,np){return[_d[0]+Math.cos(rp)*np,_d[1]-Math.sin(rp)*np]}function pointDistance(_d,rp){return Math.hypot(_d[0]-rp[0],_d[1]-rp[1])}function pointEqual(_d,rp){return floatEqual(_d[0],rp[0])&&floatEqual(_d[1],rp[1])}function ZigZagModifier(){}extendPrototype([ShapeModifier],ZigZagModifier),ZigZagModifier.prototype.initModifierProperties=function(_d,rp){this.getValue=this.processKeys,this.amplitude=PropertyFactory.getProp(_d,rp.s,0,null,this),this.frequency=PropertyFactory.getProp(_d,rp.r,0,null,this),this.pointsType=PropertyFactory.getProp(_d,rp.pt,0,null,this),this._isAnimated=this.amplitude.effectsSequence.length!==0||this.frequency.effectsSequence.length!==0||this.pointsType.effectsSequence.length!==0};function setPoint(_d,rp,np,ap,sp,lp,up){var cp=np-Math.PI/2,dp=np+Math.PI/2,fp=rp[0]+Math.cos(np)*ap*sp,pp=rp[1]-Math.sin(np)*ap*sp;_d.setTripleAt(fp,pp,fp+Math.cos(cp)*lp,pp-Math.sin(cp)*lp,fp+Math.cos(dp)*up,pp-Math.sin(dp)*up,_d.length())}function getPerpendicularVector(_d,rp){var np=[rp[0]-_d[0],rp[1]-_d[1]],ap=-Math.PI*.5,sp=[Math.cos(ap)*np[0]-Math.sin(ap)*np[1],Math.sin(ap)*np[0]+Math.cos(ap)*np[1]];return sp}function getProjectingAngle(_d,rp){var np=rp===0?_d.length()-1:rp-1,ap=(rp+1)%_d.length(),sp=_d.v[np],lp=_d.v[ap],up=getPerpendicularVector(sp,lp);return Math.atan2(0,1)-Math.atan2(up[1],up[0])}function zigZagCorner(_d,rp,np,ap,sp,lp,up){var cp=getProjectingAngle(rp,np),dp=rp.v[np%rp._length],fp=rp.v[np===0?rp._length-1:np-1],pp=rp.v[(np+1)%rp._length],hp=lp===2?Math.sqrt(Math.pow(dp[0]-fp[0],2)+Math.pow(dp[1]-fp[1],2)):0,mp=lp===2?Math.sqrt(Math.pow(dp[0]-pp[0],2)+Math.pow(dp[1]-pp[1],2)):0;setPoint(_d,rp.v[np%rp._length],cp,up,ap,mp/((sp+1)*2),hp/((sp+1)*2))}function zigZagSegment(_d,rp,np,ap,sp,lp){for(var up=0;up<ap;up+=1){var cp=(up+1)/(ap+1),dp=sp===2?Math.sqrt(Math.pow(rp.points[3][0]-rp.points[0][0],2)+Math.pow(rp.points[3][1]-rp.points[0][1],2)):0,fp=rp.normalAngle(cp),pp=rp.point(cp);setPoint(_d,pp,fp,lp,np,dp/((ap+1)*2),dp/((ap+1)*2)),lp=-lp}return lp}ZigZagModifier.prototype.processPath=function(_d,rp,np,ap){var sp=_d._length,lp=shapePool.newElement();if(lp.c=_d.c,_d.c||(sp-=1),sp===0)return lp;var up=-1,cp=PolynomialBezier.shapeSegment(_d,0);zigZagCorner(lp,_d,0,rp,np,ap,up);for(var dp=0;dp<sp;dp+=1)up=zigZagSegment(lp,cp,rp,np,ap,-up),dp===sp-1&&!_d.c?cp=null:cp=PolynomialBezier.shapeSegment(_d,(dp+1)%sp),zigZagCorner(lp,_d,dp+1,rp,np,ap,up);return lp},ZigZagModifier.prototype.processShapes=function(_d){var rp,np,ap=this.shapes.length,sp,lp,up=this.amplitude.v,cp=Math.max(0,Math.round(this.frequency.v)),dp=this.pointsType.v;if(up!==0){var fp,pp;for(np=0;np<ap;np+=1){if(fp=this.shapes[np],pp=fp.localShapeCollection,!(!fp.shape._mdf&&!this._mdf&&!_d))for(pp.releaseShapes(),fp.shape._mdf=!0,rp=fp.shape.paths.shapes,lp=fp.shape.paths._length,sp=0;sp<lp;sp+=1)pp.addShape(this.processPath(rp[sp],up,cp,dp));fp.shape.paths=fp.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function linearOffset(_d,rp,np){var ap=Math.atan2(rp[0]-_d[0],rp[1]-_d[1]);return[polarOffset(_d,ap,np),polarOffset(rp,ap,np)]}function offsetSegment(_d,rp){var np,ap,sp,lp,up,cp,dp;dp=linearOffset(_d.points[0],_d.points[1],rp),np=dp[0],ap=dp[1],dp=linearOffset(_d.points[1],_d.points[2],rp),sp=dp[0],lp=dp[1],dp=linearOffset(_d.points[2],_d.points[3],rp),up=dp[0],cp=dp[1];var fp=lineIntersection(np,ap,sp,lp);fp===null&&(fp=ap);var pp=lineIntersection(up,cp,sp,lp);return pp===null&&(pp=up),new PolynomialBezier(np,fp,pp,cp)}function joinLines(_d,rp,np,ap,sp){var lp=rp.points[3],up=np.points[0];if(ap===3||pointEqual(lp,up))return lp;if(ap===2){var cp=-rp.tangentAngle(1),dp=-np.tangentAngle(0)+Math.PI,fp=lineIntersection(lp,polarOffset(lp,cp+Math.PI/2,100),up,polarOffset(up,cp+Math.PI/2,100)),pp=fp?pointDistance(fp,lp):pointDistance(lp,up)/2,hp=polarOffset(lp,cp,2*pp*roundCorner);return _d.setXYAt(hp[0],hp[1],"o",_d.length()-1),hp=polarOffset(up,dp,2*pp*roundCorner),_d.setTripleAt(up[0],up[1],up[0],up[1],hp[0],hp[1],_d.length()),up}var mp=pointEqual(lp,rp.points[2])?rp.points[0]:rp.points[2],gp=pointEqual(up,np.points[1])?np.points[3]:np.points[1],vp=lineIntersection(mp,lp,up,gp);return vp&&pointDistance(vp,lp)<sp?(_d.setTripleAt(vp[0],vp[1],vp[0],vp[1],vp[0],vp[1],_d.length()),vp):lp}function getIntersection(_d,rp){var np=_d.intersections(rp);return np.length&&floatEqual(np[0][0],1)&&np.shift(),np.length?np[0]:null}function pruneSegmentIntersection(_d,rp){var np=_d.slice(),ap=rp.slice(),sp=getIntersection(_d[_d.length-1],rp[0]);return sp&&(np[_d.length-1]=_d[_d.length-1].split(sp[0])[0],ap[0]=rp[0].split(sp[1])[1]),_d.length>1&&rp.length>1&&(sp=getIntersection(_d[0],rp[rp.length-1]),sp)?[[_d[0].split(sp[0])[0]],[rp[rp.length-1].split(sp[1])[1]]]:[np,ap]}function pruneIntersections(_d){for(var rp,np=1;np<_d.length;np+=1)rp=pruneSegmentIntersection(_d[np-1],_d[np]),_d[np-1]=rp[0],_d[np]=rp[1];return _d.length>1&&(rp=pruneSegmentIntersection(_d[_d.length-1],_d[0]),_d[_d.length-1]=rp[0],_d[0]=rp[1]),_d}function offsetSegmentSplit(_d,rp){var np=_d.inflectionPoints(),ap,sp,lp,up;if(np.length===0)return[offsetSegment(_d,rp)];if(np.length===1||floatEqual(np[1],1))return lp=_d.split(np[0]),ap=lp[0],sp=lp[1],[offsetSegment(ap,rp),offsetSegment(sp,rp)];lp=_d.split(np[0]),ap=lp[0];var cp=(np[1]-np[0])/(1-np[0]);return lp=lp[1].split(cp),up=lp[0],sp=lp[1],[offsetSegment(ap,rp),offsetSegment(up,rp),offsetSegment(sp,rp)]}function OffsetPathModifier(){}extendPrototype([ShapeModifier],OffsetPathModifier),OffsetPathModifier.prototype.initModifierProperties=function(_d,rp){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(_d,rp.a,0,null,this),this.miterLimit=PropertyFactory.getProp(_d,rp.ml,0,null,this),this.lineJoin=rp.lj,this._isAnimated=this.amount.effectsSequence.length!==0},OffsetPathModifier.prototype.processPath=function(_d,rp,np,ap){var sp=shapePool.newElement();sp.c=_d.c;var lp=_d.length();_d.c||(lp-=1);var up,cp,dp,fp=[];for(up=0;up<lp;up+=1)dp=PolynomialBezier.shapeSegment(_d,up),fp.push(offsetSegmentSplit(dp,rp));if(!_d.c)for(up=lp-1;up>=0;up-=1)dp=PolynomialBezier.shapeSegmentInverted(_d,up),fp.push(offsetSegmentSplit(dp,rp));fp=pruneIntersections(fp);var pp=null,hp=null;for(up=0;up<fp.length;up+=1){var mp=fp[up];for(hp&&(pp=joinLines(sp,hp,mp[0],np,ap)),hp=mp[mp.length-1],cp=0;cp<mp.length;cp+=1)dp=mp[cp],pp&&pointEqual(dp.points[0],pp)?sp.setXYAt(dp.points[1][0],dp.points[1][1],"o",sp.length()-1):sp.setTripleAt(dp.points[0][0],dp.points[0][1],dp.points[1][0],dp.points[1][1],dp.points[0][0],dp.points[0][1],sp.length()),sp.setTripleAt(dp.points[3][0],dp.points[3][1],dp.points[3][0],dp.points[3][1],dp.points[2][0],dp.points[2][1],sp.length()),pp=dp.points[3]}return fp.length&&joinLines(sp,hp,fp[0][0],np,ap),sp},OffsetPathModifier.prototype.processShapes=function(_d){var rp,np,ap=this.shapes.length,sp,lp,up=this.amount.v,cp=this.miterLimit.v,dp=this.lineJoin;if(up!==0){var fp,pp;for(np=0;np<ap;np+=1){if(fp=this.shapes[np],pp=fp.localShapeCollection,!(!fp.shape._mdf&&!this._mdf&&!_d))for(pp.releaseShapes(),fp.shape._mdf=!0,rp=fp.shape.paths.shapes,lp=fp.shape.paths._length,sp=0;sp<lp;sp+=1)pp.addShape(this.processPath(rp[sp],up,dp,cp));fp.shape.paths=fp.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function getFontProperties(_d){for(var rp=_d.fStyle?_d.fStyle.split(" "):[],np="normal",ap="normal",sp=rp.length,lp,up=0;up<sp;up+=1)switch(lp=rp[up].toLowerCase(),lp){case"italic":ap="italic";break;case"bold":np="700";break;case"black":np="900";break;case"medium":np="500";break;case"regular":case"normal":np="400";break;case"light":case"thin":np="200";break}return{style:ap,weight:_d.fWeight||np}}var FontManager=function(){var _d=5e3,rp={w:0,size:0,shapes:[],data:{shapes:[]}},np=[];np=np.concat([2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403]);var ap=127988,sp=917631,lp=917601,up=917626,cp=65039,dp=8205,fp=127462,pp=127487,hp=["d83cdffb","d83cdffc","d83cdffd","d83cdffe","d83cdfff"];function mp(Ip){var Pp=Ip.split(","),Tp,Np=Pp.length,jp=[];for(Tp=0;Tp<Np;Tp+=1)Pp[Tp]!=="sans-serif"&&Pp[Tp]!=="monospace"&&jp.push(Pp[Tp]);return jp.join(",")}function gp(Ip,Pp){var Tp=createTag("span");Tp.setAttribute("aria-hidden",!0),Tp.style.fontFamily=Pp;var Np=createTag("span");Np.innerText="giItT1WQy@!-/#",Tp.style.position="absolute",Tp.style.left="-10000px",Tp.style.top="-10000px",Tp.style.fontSize="300px",Tp.style.fontVariant="normal",Tp.style.fontStyle="normal",Tp.style.fontWeight="normal",Tp.style.letterSpacing="0",Tp.appendChild(Np),document.body.appendChild(Tp);var jp=Np.offsetWidth;return Np.style.fontFamily=mp(Ip)+", "+Pp,{node:Np,w:jp,parent:Tp}}function vp(){var Ip,Pp=this.fonts.length,Tp,Np,jp=Pp;for(Ip=0;Ip<Pp;Ip+=1)this.fonts[Ip].loaded?jp-=1:this.fonts[Ip].fOrigin==="n"||this.fonts[Ip].origin===0?this.fonts[Ip].loaded=!0:(Tp=this.fonts[Ip].monoCase.node,Np=this.fonts[Ip].monoCase.w,Tp.offsetWidth!==Np?(jp-=1,this.fonts[Ip].loaded=!0):(Tp=this.fonts[Ip].sansCase.node,Np=this.fonts[Ip].sansCase.w,Tp.offsetWidth!==Np&&(jp-=1,this.fonts[Ip].loaded=!0)),this.fonts[Ip].loaded&&(this.fonts[Ip].sansCase.parent.parentNode.removeChild(this.fonts[Ip].sansCase.parent),this.fonts[Ip].monoCase.parent.parentNode.removeChild(this.fonts[Ip].monoCase.parent)));jp!==0&&Date.now()-this.initTime<_d?setTimeout(this.checkLoadedFontsBinded,20):setTimeout(this.setIsLoadedBinded,10)}function xp(Ip,Pp){var Tp=document.body&&Pp?"svg":"canvas",Np,jp=getFontProperties(Ip);if(Tp==="svg"){var Vp=createNS("text");Vp.style.fontSize="100px",Vp.setAttribute("font-family",Ip.fFamily),Vp.setAttribute("font-style",jp.style),Vp.setAttribute("font-weight",jp.weight),Vp.textContent="1",Ip.fClass?(Vp.style.fontFamily="inherit",Vp.setAttribute("class",Ip.fClass)):Vp.style.fontFamily=Ip.fFamily,Pp.appendChild(Vp),Np=Vp}else{var zp=new OffscreenCanvas(500,500).getContext("2d");zp.font=jp.style+" "+jp.weight+" 100px "+Ip.fFamily,Np=zp}function Wp(Up){return Tp==="svg"?(Np.textContent=Up,Np.getComputedTextLength()):Np.measureText(Up).width}return{measureText:Wp}}function Sp(Ip,Pp){if(!Ip){this.isLoaded=!0;return}if(this.chars){this.isLoaded=!0,this.fonts=Ip.list;return}if(!document.body){this.isLoaded=!0,Ip.list.forEach(function(Xp){Xp.helper=xp(Xp),Xp.cache={}}),this.fonts=Ip.list;return}var Tp=Ip.list,Np,jp=Tp.length,Vp=jp;for(Np=0;Np<jp;Np+=1){var zp=!0,Wp,Up;if(Tp[Np].loaded=!1,Tp[Np].monoCase=gp(Tp[Np].fFamily,"monospace"),Tp[Np].sansCase=gp(Tp[Np].fFamily,"sans-serif"),!Tp[Np].fPath)Tp[Np].loaded=!0,Vp-=1;else if(Tp[Np].fOrigin==="p"||Tp[Np].origin===3){if(Wp=document.querySelectorAll('style[f-forigin="p"][f-family="'+Tp[Np].fFamily+'"], style[f-origin="3"][f-family="'+Tp[Np].fFamily+'"]'),Wp.length>0&&(zp=!1),zp){var qp=createTag("style");qp.setAttribute("f-forigin",Tp[Np].fOrigin),qp.setAttribute("f-origin",Tp[Np].origin),qp.setAttribute("f-family",Tp[Np].fFamily),qp.type="text/css",qp.innerText="@font-face {font-family: "+Tp[Np].fFamily+"; font-style: normal; src: url('"+Tp[Np].fPath+"');}",Pp.appendChild(qp)}}else if(Tp[Np].fOrigin==="g"||Tp[Np].origin===1){for(Wp=document.querySelectorAll('link[f-forigin="g"], link[f-origin="1"]'),Up=0;Up<Wp.length;Up+=1)Wp[Up].href.indexOf(Tp[Np].fPath)!==-1&&(zp=!1);if(zp){var Bp=createTag("link");Bp.setAttribute("f-forigin",Tp[Np].fOrigin),Bp.setAttribute("f-origin",Tp[Np].origin),Bp.type="text/css",Bp.rel="stylesheet",Bp.href=Tp[Np].fPath,document.body.appendChild(Bp)}}else if(Tp[Np].fOrigin==="t"||Tp[Np].origin===2){for(Wp=document.querySelectorAll('script[f-forigin="t"], script[f-origin="2"]'),Up=0;Up<Wp.length;Up+=1)Tp[Np].fPath===Wp[Up].src&&(zp=!1);if(zp){var Yp=createTag("link");Yp.setAttribute("f-forigin",Tp[Np].fOrigin),Yp.setAttribute("f-origin",Tp[Np].origin),Yp.setAttribute("rel","stylesheet"),Yp.setAttribute("href",Tp[Np].fPath),Pp.appendChild(Yp)}}Tp[Np].helper=xp(Tp[Np],Pp),Tp[Np].cache={},this.fonts.push(Tp[Np])}Vp===0?this.isLoaded=!0:setTimeout(this.checkLoadedFonts.bind(this),100)}function yp(Ip){if(Ip){this.chars||(this.chars=[]);var Pp,Tp=Ip.length,Np,jp=this.chars.length,Vp;for(Pp=0;Pp<Tp;Pp+=1){for(Np=0,Vp=!1;Np<jp;)this.chars[Np].style===Ip[Pp].style&&this.chars[Np].fFamily===Ip[Pp].fFamily&&this.chars[Np].ch===Ip[Pp].ch&&(Vp=!0),Np+=1;Vp||(this.chars.push(Ip[Pp]),jp+=1)}}}function bp(Ip,Pp,Tp){for(var Np=0,jp=this.chars.length;Np<jp;){if(this.chars[Np].ch===Ip&&this.chars[Np].style===Pp&&this.chars[Np].fFamily===Tp)return this.chars[Np];Np+=1}return(typeof Ip=="string"&&Ip.charCodeAt(0)!==13||!Ip)&&console&&console.warn&&!this._warned&&(this._warned=!0,console.warn("Missing character from exported characters list: ",Ip,Pp,Tp)),rp}function Ep(Ip,Pp,Tp){var Np=this.getFontByName(Pp),jp=Ip;if(!Np.cache[jp]){var Vp=Np.helper;if(Ip===" "){var zp=Vp.measureText("|"+Ip+"|"),Wp=Vp.measureText("||");Np.cache[jp]=(zp-Wp)/100}else Np.cache[jp]=Vp.measureText(Ip)/100}return Np.cache[jp]*Tp}function wp(Ip){for(var Pp=0,Tp=this.fonts.length;Pp<Tp;){if(this.fonts[Pp].fName===Ip)return this.fonts[Pp];Pp+=1}return this.fonts[0]}function _p(Ip){var Pp=0,Tp=Ip.charCodeAt(0);if(Tp>=55296&&Tp<=56319){var Np=Ip.charCodeAt(1);Np>=56320&&Np<=57343&&(Pp=(Tp-55296)*1024+Np-56320+65536)}return Pp}function Rp(Ip,Pp){var Tp=Ip.toString(16)+Pp.toString(16);return hp.indexOf(Tp)!==-1}function $p(Ip){return Ip===dp}function Cp(Ip){return Ip===cp}function Ap(Ip){var Pp=_p(Ip);return Pp>=fp&&Pp<=pp}function Op(Ip){return Ap(Ip.substr(0,2))&&Ap(Ip.substr(2,2))}function Lp(Ip){return np.indexOf(Ip)!==-1}function Mp(Ip,Pp){var Tp=_p(Ip.substr(Pp,2));if(Tp!==ap)return!1;var Np=0;for(Pp+=2;Np<5;){if(Tp=_p(Ip.substr(Pp,2)),Tp<lp||Tp>up)return!1;Np+=1,Pp+=2}return _p(Ip.substr(Pp,2))===sp}function kp(){this.isLoaded=!0}var Dp=function(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.isLoaded=!1,this._warned=!1,this.initTime=Date.now(),this.setIsLoadedBinded=this.setIsLoaded.bind(this),this.checkLoadedFontsBinded=this.checkLoadedFonts.bind(this)};Dp.isModifier=Rp,Dp.isZeroWidthJoiner=$p,Dp.isFlagEmoji=Op,Dp.isRegionalCode=Ap,Dp.isCombinedCharacter=Lp,Dp.isRegionalFlag=Mp,Dp.isVariationSelector=Cp,Dp.BLACK_FLAG_CODE_POINT=ap;var Fp={addChars:yp,addFonts:Sp,getCharData:bp,getFontByName:wp,measureText:Ep,checkLoadedFonts:vp,setIsLoaded:kp};return Dp.prototype=Fp,Dp}();function SlotManager(_d){this.animationData=_d}SlotManager.prototype.getProp=function(_d){return this.animationData.slots&&this.animationData.slots[_d.sid]?Object.assign(_d,this.animationData.slots[_d.sid].p):_d};function slotFactory(_d){return new SlotManager(_d)}function RenderableElement(){}RenderableElement.prototype={initRenderable:function(){this.isInRange=!1,this.hidden=!1,this.isTransparent=!1,this.renderableComponents=[]},addRenderableComponent:function(rp){this.renderableComponents.indexOf(rp)===-1&&this.renderableComponents.push(rp)},removeRenderableComponent:function(rp){this.renderableComponents.indexOf(rp)!==-1&&this.renderableComponents.splice(this.renderableComponents.indexOf(rp),1)},prepareRenderableFrame:function(rp){this.checkLayerLimits(rp)},checkTransparency:function(){this.finalTransform.mProp.o.v<=0?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.isTransparent&&(this.isTransparent=!1,this.show())},checkLayerLimits:function(rp){this.data.ip-this.data.st<=rp&&this.data.op-this.data.st>rp?this.isInRange!==!0&&(this.globalData._mdf=!0,this._mdf=!0,this.isInRange=!0,this.show()):this.isInRange!==!1&&(this.globalData._mdf=!0,this.isInRange=!1,this.hide())},renderRenderable:function(){var rp,np=this.renderableComponents.length;for(rp=0;rp<np;rp+=1)this.renderableComponents[rp].renderFrame(this._isFirstFrame)},sourceRectAtTime:function(){return{top:0,left:0,width:100,height:100}},getLayerSize:function(){return this.data.ty===5?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}}};var getBlendMode=function(){var _d={0:"source-over",1:"multiply",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity"};return function(rp){return _d[rp]||""}}();function SliderEffect(_d,rp,np){this.p=PropertyFactory.getProp(rp,_d.v,0,0,np)}function AngleEffect(_d,rp,np){this.p=PropertyFactory.getProp(rp,_d.v,0,0,np)}function ColorEffect(_d,rp,np){this.p=PropertyFactory.getProp(rp,_d.v,1,0,np)}function PointEffect(_d,rp,np){this.p=PropertyFactory.getProp(rp,_d.v,1,0,np)}function LayerIndexEffect(_d,rp,np){this.p=PropertyFactory.getProp(rp,_d.v,0,0,np)}function MaskIndexEffect(_d,rp,np){this.p=PropertyFactory.getProp(rp,_d.v,0,0,np)}function CheckboxEffect(_d,rp,np){this.p=PropertyFactory.getProp(rp,_d.v,0,0,np)}function NoValueEffect(){this.p={}}function EffectsManager(_d,rp){var np=_d.ef||[];this.effectElements=[];var ap,sp=np.length,lp;for(ap=0;ap<sp;ap+=1)lp=new GroupEffect(np[ap],rp),this.effectElements.push(lp)}function GroupEffect(_d,rp){this.init(_d,rp)}extendPrototype([DynamicPropertyContainer],GroupEffect),GroupEffect.prototype.getValue=GroupEffect.prototype.iterateDynamicProperties,GroupEffect.prototype.init=function(_d,rp){this.data=_d,this.effectElements=[],this.initDynamicPropertyContainer(rp);var np,ap=this.data.ef.length,sp,lp=this.data.ef;for(np=0;np<ap;np+=1){switch(sp=null,lp[np].ty){case 0:sp=new SliderEffect(lp[np],rp,this);break;case 1:sp=new AngleEffect(lp[np],rp,this);break;case 2:sp=new ColorEffect(lp[np],rp,this);break;case 3:sp=new PointEffect(lp[np],rp,this);break;case 4:case 7:sp=new CheckboxEffect(lp[np],rp,this);break;case 10:sp=new LayerIndexEffect(lp[np],rp,this);break;case 11:sp=new MaskIndexEffect(lp[np],rp,this);break;case 5:sp=new EffectsManager(lp[np],rp);break;default:sp=new NoValueEffect(lp[np]);break}sp&&this.effectElements.push(sp)}};function BaseElement(){}BaseElement.prototype={checkMasks:function(){if(!this.data.hasMask)return!1;for(var rp=0,np=this.data.masksProperties.length;rp<np;){if(this.data.masksProperties[rp].mode!=="n"&&this.data.masksProperties[rp].cl!==!1)return!0;rp+=1}return!1},initExpressions:function(){var rp=getExpressionInterfaces();if(rp){var np=rp("layer"),ap=rp("effects"),sp=rp("shape"),lp=rp("text"),up=rp("comp");this.layerInterface=np(this),this.data.hasMask&&this.maskManager&&this.layerInterface.registerMaskInterface(this.maskManager);var cp=ap.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(cp),this.data.ty===0||this.data.xt?this.compInterface=up(this):this.data.ty===4?(this.layerInterface.shapeInterface=sp(this.shapesData,this.itemsData,this.layerInterface),this.layerInterface.content=this.layerInterface.shapeInterface):this.data.ty===5&&(this.layerInterface.textInterface=lp(this),this.layerInterface.text=this.layerInterface.textInterface)}},setBlendMode:function(){var rp=getBlendMode(this.data.bm),np=this.baseElement||this.layerElement;np.style["mix-blend-mode"]=rp},initBaseData:function(rp,np,ap){this.globalData=np,this.comp=ap,this.data=rp,this.layerId=createElementID(),this.data.sr||(this.data.sr=1),this.effectsManager=new EffectsManager(this.data,this,this.dynamicProperties)},getType:function(){return this.type},sourceRectAtTime:function(){}};function FrameElement(){}FrameElement.prototype={initFrame:function(){this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1},prepareProperties:function(rp,np){var ap,sp=this.dynamicProperties.length;for(ap=0;ap<sp;ap+=1)(np||this._isParent&&this.dynamicProperties[ap].propType==="transform")&&(this.dynamicProperties[ap].getValue(),this.dynamicProperties[ap]._mdf&&(this.globalData._mdf=!0,this._mdf=!0))},addDynamicProperty:function(rp){this.dynamicProperties.indexOf(rp)===-1&&this.dynamicProperties.push(rp)}};function FootageElement(_d,rp,np){this.initFrame(),this.initRenderable(),this.assetData=rp.getAssetData(_d.refId),this.footageData=rp.imageLoader.getAsset(this.assetData),this.initBaseData(_d,rp,np)}FootageElement.prototype.prepareFrame=function(){},extendPrototype([RenderableElement,BaseElement,FrameElement],FootageElement),FootageElement.prototype.getBaseElement=function(){return null},FootageElement.prototype.renderFrame=function(){},FootageElement.prototype.destroy=function(){},FootageElement.prototype.initExpressions=function(){var _d=getExpressionInterfaces();if(_d){var rp=_d("footage");this.layerInterface=rp(this)}},FootageElement.prototype.getFootageData=function(){return this.footageData};function AudioElement(_d,rp,np){this.initFrame(),this.initRenderable(),this.assetData=rp.getAssetData(_d.refId),this.initBaseData(_d,rp,np),this._isPlaying=!1,this._canPlay=!1;var ap=this.globalData.getAssetsPath(this.assetData);this.audio=this.globalData.audioController.createAudio(ap),this._currentTime=0,this.globalData.audioController.addAudio(this),this._volumeMultiplier=1,this._volume=1,this._previousVolume=null,this.tm=_d.tm?PropertyFactory.getProp(this,_d.tm,0,rp.frameRate,this):{_placeholder:!0},this.lv=PropertyFactory.getProp(this,_d.au&&_d.au.lv?_d.au.lv:{k:[100]},1,.01,this)}AudioElement.prototype.prepareFrame=function(_d){if(this.prepareRenderableFrame(_d,!0),this.prepareProperties(_d,!0),this.tm._placeholder)this._currentTime=_d/this.data.sr;else{var rp=this.tm.v;this._currentTime=rp}this._volume=this.lv.v[0];var np=this._volume*this._volumeMultiplier;this._previousVolume!==np&&(this._previousVolume=np,this.audio.volume(np))},extendPrototype([RenderableElement,BaseElement,FrameElement],AudioElement),AudioElement.prototype.renderFrame=function(){this.isInRange&&this._canPlay&&(this._isPlaying?(!this.audio.playing()||Math.abs(this._currentTime/this.globalData.frameRate-this.audio.seek())>.1)&&this.audio.seek(this._currentTime/this.globalData.frameRate):(this.audio.play(),this.audio.seek(this._currentTime/this.globalData.frameRate),this._isPlaying=!0))},AudioElement.prototype.show=function(){},AudioElement.prototype.hide=function(){this.audio.pause(),this._isPlaying=!1},AudioElement.prototype.pause=function(){this.audio.pause(),this._isPlaying=!1,this._canPlay=!1},AudioElement.prototype.resume=function(){this._canPlay=!0},AudioElement.prototype.setRate=function(_d){this.audio.rate(_d)},AudioElement.prototype.volume=function(_d){this._volumeMultiplier=_d,this._previousVolume=_d*this._volume,this.audio.volume(this._previousVolume)},AudioElement.prototype.getBaseElement=function(){return null},AudioElement.prototype.destroy=function(){},AudioElement.prototype.sourceRectAtTime=function(){},AudioElement.prototype.initExpressions=function(){};function BaseRenderer(){}BaseRenderer.prototype.checkLayers=function(_d){var rp,np=this.layers.length,ap;for(this.completeLayers=!0,rp=np-1;rp>=0;rp-=1)this.elements[rp]||(ap=this.layers[rp],ap.ip-ap.st<=_d-this.layers[rp].st&&ap.op-ap.st>_d-this.layers[rp].st&&this.buildItem(rp)),this.completeLayers=this.elements[rp]?this.completeLayers:!1;this.checkPendingElements()},BaseRenderer.prototype.createItem=function(_d){switch(_d.ty){case 2:return this.createImage(_d);case 0:return this.createComp(_d);case 1:return this.createSolid(_d);case 3:return this.createNull(_d);case 4:return this.createShape(_d);case 5:return this.createText(_d);case 6:return this.createAudio(_d);case 13:return this.createCamera(_d);case 15:return this.createFootage(_d);default:return this.createNull(_d)}},BaseRenderer.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")},BaseRenderer.prototype.createAudio=function(_d){return new AudioElement(_d,this.globalData,this)},BaseRenderer.prototype.createFootage=function(_d){return new FootageElement(_d,this.globalData,this)},BaseRenderer.prototype.buildAllItems=function(){var _d,rp=this.layers.length;for(_d=0;_d<rp;_d+=1)this.buildItem(_d);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function(_d){this.completeLayers=!1;var rp,np=_d.length,ap,sp=this.layers.length;for(rp=0;rp<np;rp+=1)for(ap=0;ap<sp;){if(this.layers[ap].id===_d[rp].id){this.layers[ap]=_d[rp];break}ap+=1}},BaseRenderer.prototype.setProjectInterface=function(_d){this.globalData.projectInterface=_d},BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function(_d,rp,np){for(var ap=this.elements,sp=this.layers,lp=0,up=sp.length;lp<up;)sp[lp].ind==rp&&(!ap[lp]||ap[lp]===!0?(this.buildItem(lp),this.addPendingElement(_d)):(np.push(ap[lp]),ap[lp].setAsParent(),sp[lp].parent!==void 0?this.buildElementParenting(_d,sp[lp].parent,np):_d.setHierarchy(np))),lp+=1},BaseRenderer.prototype.addPendingElement=function(_d){this.pendingElements.push(_d)},BaseRenderer.prototype.searchExtraCompositions=function(_d){var rp,np=_d.length;for(rp=0;rp<np;rp+=1)if(_d[rp].xt){var ap=this.createComp(_d[rp]);ap.initExpressions(),this.globalData.projectInterface.registerComposition(ap)}},BaseRenderer.prototype.getElementById=function(_d){var rp,np=this.elements.length;for(rp=0;rp<np;rp+=1)if(this.elements[rp].data.ind===_d)return this.elements[rp];return null},BaseRenderer.prototype.getElementByPath=function(_d){var rp=_d.shift(),np;if(typeof rp=="number")np=this.elements[rp];else{var ap,sp=this.elements.length;for(ap=0;ap<sp;ap+=1)if(this.elements[ap].data.nm===rp){np=this.elements[ap];break}}return _d.length===0?np:np.getElementByPath(_d)},BaseRenderer.prototype.setupGlobalData=function(_d,rp){this.globalData.fontManager=new FontManager,this.globalData.slotManager=slotFactory(_d),this.globalData.fontManager.addChars(_d.chars),this.globalData.fontManager.addFonts(_d.fonts,rp),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.imageLoader=this.animationItem.imagePreloader,this.globalData.audioController=this.animationItem.audioController,this.globalData.frameId=0,this.globalData.frameRate=_d.fr,this.globalData.nm=_d.nm,this.globalData.compSize={w:_d.w,h:_d.h}};var effectTypes={TRANSFORM_EFFECT:"transformEFfect"};function TransformElement(){}TransformElement.prototype={initTransform:function(){var rp=new Matrix;this.finalTransform={mProp:this.data.ks?TransformPropertyFactory.getTransformProperty(this,this.data.ks,this):{o:0},_matMdf:!1,_localMatMdf:!1,_opMdf:!1,mat:rp,localMat:rp,localOpacity:1},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0),this.data.ty},renderTransform:function(){if(this.finalTransform._opMdf=this.finalTransform.mProp.o._mdf||this._isFirstFrame,this.finalTransform._matMdf=this.finalTransform.mProp._mdf||this._isFirstFrame,this.hierarchy){var rp,np=this.finalTransform.mat,ap=0,sp=this.hierarchy.length;if(!this.finalTransform._matMdf)for(;ap<sp;){if(this.hierarchy[ap].finalTransform.mProp._mdf){this.finalTransform._matMdf=!0;break}ap+=1}if(this.finalTransform._matMdf)for(rp=this.finalTransform.mProp.v.props,np.cloneFromProps(rp),ap=0;ap<sp;ap+=1)np.multiply(this.hierarchy[ap].finalTransform.mProp.v)}this.finalTransform._matMdf&&(this.finalTransform._localMatMdf=this.finalTransform._matMdf),this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v)},renderLocalTransform:function(){if(this.localTransforms){var rp=0,np=this.localTransforms.length;if(this.finalTransform._localMatMdf=this.finalTransform._matMdf,!this.finalTransform._localMatMdf||!this.finalTransform._opMdf)for(;rp<np;)this.localTransforms[rp]._mdf&&(this.finalTransform._localMatMdf=!0),this.localTransforms[rp]._opMdf&&!this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v,this.finalTransform._opMdf=!0),rp+=1;if(this.finalTransform._localMatMdf){var ap=this.finalTransform.localMat;for(this.localTransforms[0].matrix.clone(ap),rp=1;rp<np;rp+=1){var sp=this.localTransforms[rp].matrix;ap.multiply(sp)}ap.multiply(this.finalTransform.mat)}if(this.finalTransform._opMdf){var lp=this.finalTransform.localOpacity;for(rp=0;rp<np;rp+=1)lp*=this.localTransforms[rp].opacity*.01;this.finalTransform.localOpacity=lp}}},searchEffectTransforms:function(){if(this.renderableEffectsManager){var rp=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT);if(rp.length){this.localTransforms=[],this.finalTransform.localMat=new Matrix;var np=0,ap=rp.length;for(np=0;np<ap;np+=1)this.localTransforms.push(rp[np])}}},globalToLocal:function(rp){var np=[];np.push(this.finalTransform);for(var ap=!0,sp=this.comp;ap;)sp.finalTransform?(sp.data.hasMask&&np.splice(0,0,sp.finalTransform),sp=sp.comp):ap=!1;var lp,up=np.length,cp;for(lp=0;lp<up;lp+=1)cp=np[lp].mat.applyToPointArray(0,0,0),rp=[rp[0]-cp[0],rp[1]-cp[1],0];return rp},mHelper:new Matrix};function MaskElement(_d,rp,np){this.data=_d,this.element=rp,this.globalData=np,this.storedData=[],this.masksProperties=this.data.masksProperties||[],this.maskElement=null;var ap=this.globalData.defs,sp,lp=this.masksProperties?this.masksProperties.length:0;this.viewData=createSizedArray(lp),this.solidPath="";var up,cp=this.masksProperties,dp=0,fp=[],pp,hp,mp=createElementID(),gp,vp,xp,Sp,yp="clipPath",bp="clip-path";for(sp=0;sp<lp;sp+=1)if((cp[sp].mode!=="a"&&cp[sp].mode!=="n"||cp[sp].inv||cp[sp].o.k!==100||cp[sp].o.x)&&(yp="mask",bp="mask"),(cp[sp].mode==="s"||cp[sp].mode==="i")&&dp===0?(gp=createNS("rect"),gp.setAttribute("fill","#ffffff"),gp.setAttribute("width",this.element.comp.data.w||0),gp.setAttribute("height",this.element.comp.data.h||0),fp.push(gp)):gp=null,up=createNS("path"),cp[sp].mode==="n")this.viewData[sp]={op:PropertyFactory.getProp(this.element,cp[sp].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,cp[sp],3),elem:up,lastPath:""},ap.appendChild(up);else{dp+=1,up.setAttribute("fill",cp[sp].mode==="s"?"#000000":"#ffffff"),up.setAttribute("clip-rule","nonzero");var Ep;if(cp[sp].x.k!==0?(yp="mask",bp="mask",Sp=PropertyFactory.getProp(this.element,cp[sp].x,0,null,this.element),Ep=createElementID(),vp=createNS("filter"),vp.setAttribute("id",Ep),xp=createNS("feMorphology"),xp.setAttribute("operator","erode"),xp.setAttribute("in","SourceGraphic"),xp.setAttribute("radius","0"),vp.appendChild(xp),ap.appendChild(vp),up.setAttribute("stroke",cp[sp].mode==="s"?"#000000":"#ffffff")):(xp=null,Sp=null),this.storedData[sp]={elem:up,x:Sp,expan:xp,lastPath:"",lastOperator:"",filterId:Ep,lastRadius:0},cp[sp].mode==="i"){hp=fp.length;var wp=createNS("g");for(pp=0;pp<hp;pp+=1)wp.appendChild(fp[pp]);var _p=createNS("mask");_p.setAttribute("mask-type","alpha"),_p.setAttribute("id",mp+"_"+dp),_p.appendChild(up),ap.appendChild(_p),wp.setAttribute("mask","url("+getLocationHref()+"#"+mp+"_"+dp+")"),fp.length=0,fp.push(wp)}else fp.push(up);cp[sp].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[sp]={elem:up,lastPath:"",op:PropertyFactory.getProp(this.element,cp[sp].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,cp[sp],3),invRect:gp},this.viewData[sp].prop.k||this.drawPath(cp[sp],this.viewData[sp].prop.v,this.viewData[sp])}for(this.maskElement=createNS(yp),lp=fp.length,sp=0;sp<lp;sp+=1)this.maskElement.appendChild(fp[sp]);dp>0&&(this.maskElement.setAttribute("id",mp),this.element.maskedElement.setAttribute(bp,"url("+getLocationHref()+"#"+mp+")"),ap.appendChild(this.maskElement)),this.viewData.length&&this.element.addRenderableComponent(this)}MaskElement.prototype.getMaskProperty=function(_d){return this.viewData[_d].prop},MaskElement.prototype.renderFrame=function(_d){var rp=this.element.finalTransform.mat,np,ap=this.masksProperties.length;for(np=0;np<ap;np+=1)if((this.viewData[np].prop._mdf||_d)&&this.drawPath(this.masksProperties[np],this.viewData[np].prop.v,this.viewData[np]),(this.viewData[np].op._mdf||_d)&&this.viewData[np].elem.setAttribute("fill-opacity",this.viewData[np].op.v),this.masksProperties[np].mode!=="n"&&(this.viewData[np].invRect&&(this.element.finalTransform.mProp._mdf||_d)&&this.viewData[np].invRect.setAttribute("transform",rp.getInverseMatrix().to2dCSS()),this.storedData[np].x&&(this.storedData[np].x._mdf||_d))){var sp=this.storedData[np].expan;this.storedData[np].x.v<0?(this.storedData[np].lastOperator!=="erode"&&(this.storedData[np].lastOperator="erode",this.storedData[np].elem.setAttribute("filter","url("+getLocationHref()+"#"+this.storedData[np].filterId+")")),sp.setAttribute("radius",-this.storedData[np].x.v)):(this.storedData[np].lastOperator!=="dilate"&&(this.storedData[np].lastOperator="dilate",this.storedData[np].elem.setAttribute("filter",null)),this.storedData[np].elem.setAttribute("stroke-width",this.storedData[np].x.v*2))}},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){var _d="M0,0 ";return _d+=" h"+this.globalData.compSize.w,_d+=" v"+this.globalData.compSize.h,_d+=" h-"+this.globalData.compSize.w,_d+=" v-"+this.globalData.compSize.h+" ",_d},MaskElement.prototype.drawPath=function(_d,rp,np){var ap=" M"+rp.v[0][0]+","+rp.v[0][1],sp,lp;for(lp=rp._length,sp=1;sp<lp;sp+=1)ap+=" C"+rp.o[sp-1][0]+","+rp.o[sp-1][1]+" "+rp.i[sp][0]+","+rp.i[sp][1]+" "+rp.v[sp][0]+","+rp.v[sp][1];if(rp.c&&lp>1&&(ap+=" C"+rp.o[sp-1][0]+","+rp.o[sp-1][1]+" "+rp.i[0][0]+","+rp.i[0][1]+" "+rp.v[0][0]+","+rp.v[0][1]),np.lastPath!==ap){var up="";np.elem&&(rp.c&&(up=_d.inv?this.solidPath+ap:ap),np.elem.setAttribute("d",up)),np.lastPath=ap}},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null};var filtersFactory=function(){var _d={};_d.createFilter=rp,_d.createAlphaToLuminanceFilter=np;function rp(ap,sp){var lp=createNS("filter");return lp.setAttribute("id",ap),sp!==!0&&(lp.setAttribute("filterUnits","objectBoundingBox"),lp.setAttribute("x","0%"),lp.setAttribute("y","0%"),lp.setAttribute("width","100%"),lp.setAttribute("height","100%")),lp}function np(){var ap=createNS("feColorMatrix");return ap.setAttribute("type","matrix"),ap.setAttribute("color-interpolation-filters","sRGB"),ap.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),ap}return _d}(),featureSupport=function(){var _d={maskType:!0,svgLumaHidden:!0,offscreenCanvas:typeof OffscreenCanvas<"u"};return(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(_d.maskType=!1),/firefox/i.test(navigator.userAgent)&&(_d.svgLumaHidden=!1),_d}(),registeredEffects$1={},idPrefix="filter_result_";function SVGEffects(_d){var rp,np="SourceGraphic",ap=_d.data.ef?_d.data.ef.length:0,sp=createElementID(),lp=filtersFactory.createFilter(sp,!0),up=0;this.filters=[];var cp;for(rp=0;rp<ap;rp+=1){cp=null;var dp=_d.data.ef[rp].ty;if(registeredEffects$1[dp]){var fp=registeredEffects$1[dp].effect;cp=new fp(lp,_d.effectsManager.effectElements[rp],_d,idPrefix+up,np),np=idPrefix+up,registeredEffects$1[dp].countsAsEffect&&(up+=1)}cp&&this.filters.push(cp)}up&&(_d.globalData.defs.appendChild(lp),_d.layerElement.setAttribute("filter","url("+getLocationHref()+"#"+sp+")")),this.filters.length&&_d.addRenderableComponent(this)}SVGEffects.prototype.renderFrame=function(_d){var rp,np=this.filters.length;for(rp=0;rp<np;rp+=1)this.filters[rp].renderFrame(_d)},SVGEffects.prototype.getEffects=function(_d){var rp,np=this.filters.length,ap=[];for(rp=0;rp<np;rp+=1)this.filters[rp].type===_d&&ap.push(this.filters[rp]);return ap};function registerEffect$1(_d,rp,np){registeredEffects$1[_d]={effect:rp,countsAsEffect:np}}function SVGBaseElement(){}SVGBaseElement.prototype={initRendererElement:function(){this.layerElement=createNS("g")},createContainerElements:function(){this.matteElement=createNS("g"),this.transformedElement=this.layerElement,this.maskedElement=this.layerElement,this._sizeChanged=!1;var rp=null;if(this.data.td){this.matteMasks={};var np=createNS("g");np.setAttribute("id",this.layerId),np.appendChild(this.layerElement),rp=np,this.globalData.defs.appendChild(np)}else this.data.tt?(this.matteElement.appendChild(this.layerElement),rp=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement;if(this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.ty===0&&!this.data.hd){var ap=createNS("clipPath"),sp=createNS("path");sp.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var lp=createElementID();if(ap.setAttribute("id",lp),ap.appendChild(sp),this.globalData.defs.appendChild(ap),this.checkMasks()){var up=createNS("g");up.setAttribute("clip-path","url("+getLocationHref()+"#"+lp+")"),up.appendChild(this.layerElement),this.transformedElement=up,rp?rp.appendChild(this.transformedElement):this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+lp+")")}this.data.bm!==0&&this.setBlendMode()},renderElement:function(){this.finalTransform._localMatMdf&&this.transformedElement.setAttribute("transform",this.finalTransform.localMat.to2dCSS()),this.finalTransform._opMdf&&this.transformedElement.setAttribute("opacity",this.finalTransform.localOpacity)},destroyBaseElement:function(){this.layerElement=null,this.matteElement=null,this.maskManager.destroy()},getBaseElement:function(){return this.data.hd?null:this.baseElement},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData),this.renderableEffectsManager=new SVGEffects(this),this.searchEffectTransforms()},getMatte:function(rp){if(this.matteMasks||(this.matteMasks={}),!this.matteMasks[rp]){var np=this.layerId+"_"+rp,ap,sp,lp,up;if(rp===1||rp===3){var cp=createNS("mask");cp.setAttribute("id",np),cp.setAttribute("mask-type",rp===3?"luminance":"alpha"),lp=createNS("use"),lp.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),cp.appendChild(lp),this.globalData.defs.appendChild(cp),!featureSupport.maskType&&rp===1&&(cp.setAttribute("mask-type","luminance"),ap=createElementID(),sp=filtersFactory.createFilter(ap),this.globalData.defs.appendChild(sp),sp.appendChild(filtersFactory.createAlphaToLuminanceFilter()),up=createNS("g"),up.appendChild(lp),cp.appendChild(up),up.setAttribute("filter","url("+getLocationHref()+"#"+ap+")"))}else if(rp===2){var dp=createNS("mask");dp.setAttribute("id",np),dp.setAttribute("mask-type","alpha");var fp=createNS("g");dp.appendChild(fp),ap=createElementID(),sp=filtersFactory.createFilter(ap);var pp=createNS("feComponentTransfer");pp.setAttribute("in","SourceGraphic"),sp.appendChild(pp);var hp=createNS("feFuncA");hp.setAttribute("type","table"),hp.setAttribute("tableValues","1.0 0.0"),pp.appendChild(hp),this.globalData.defs.appendChild(sp);var mp=createNS("rect");mp.setAttribute("width",this.comp.data.w),mp.setAttribute("height",this.comp.data.h),mp.setAttribute("x","0"),mp.setAttribute("y","0"),mp.setAttribute("fill","#ffffff"),mp.setAttribute("opacity","0"),fp.setAttribute("filter","url("+getLocationHref()+"#"+ap+")"),fp.appendChild(mp),lp=createNS("use"),lp.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),fp.appendChild(lp),featureSupport.maskType||(dp.setAttribute("mask-type","luminance"),sp.appendChild(filtersFactory.createAlphaToLuminanceFilter()),up=createNS("g"),fp.appendChild(mp),up.appendChild(this.layerElement),fp.appendChild(up)),this.globalData.defs.appendChild(dp)}this.matteMasks[rp]=np}return this.matteMasks[rp]},setMatte:function(rp){this.matteElement&&this.matteElement.setAttribute("mask","url("+getLocationHref()+"#"+rp+")")}};function HierarchyElement(){}HierarchyElement.prototype={initHierarchy:function(){this.hierarchy=[],this._isParent=!1,this.checkParenting()},setHierarchy:function(rp){this.hierarchy=rp},setAsParent:function(){this._isParent=!0},checkParenting:function(){this.data.parent!==void 0&&this.comp.buildElementParenting(this,this.data.parent,[])}};function RenderableDOMElement(){}(function(){var _d={initElement:function(np,ap,sp){this.initFrame(),this.initBaseData(np,ap,sp),this.initTransform(np,ap,sp),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide()},hide:function(){if(!this.hidden&&(!this.isInRange||this.isTransparent)){var np=this.baseElement||this.layerElement;np.style.display="none",this.hidden=!0}},show:function(){if(this.isInRange&&!this.isTransparent){if(!this.data.hd){var np=this.baseElement||this.layerElement;np.style.display="block"}this.hidden=!1,this._isFirstFrame=!0}},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},renderInnerContent:function(){},prepareFrame:function(np){this._mdf=!1,this.prepareRenderableFrame(np),this.prepareProperties(np,this.isInRange),this.checkTransparency()},destroy:function(){this.innerElem=null,this.destroyBaseElement()}};extendPrototype([RenderableElement,createProxyFunction(_d)],RenderableDOMElement)})();function IImageElement(_d,rp,np){this.assetData=rp.getAssetData(_d.refId),this.assetData&&this.assetData.sid&&(this.assetData=rp.slotManager.getProp(this.assetData)),this.initElement(_d,rp,np),this.sourceRect={top:0,left:0,width:this.assetData.w,height:this.assetData.h}}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],IImageElement),IImageElement.prototype.createContent=function(){var _d=this.globalData.getAssetsPath(this.assetData);this.innerElem=createNS("image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio",this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",_d),this.layerElement.appendChild(this.innerElem)},IImageElement.prototype.sourceRectAtTime=function(){return this.sourceRect};function ProcessedElement(_d,rp){this.elem=_d,this.pos=rp}function IShapeElement(){}IShapeElement.prototype={addShapeToModifiers:function(rp){var np,ap=this.shapeModifiers.length;for(np=0;np<ap;np+=1)this.shapeModifiers[np].addShape(rp)},isShapeInAnimatedModifiers:function(rp){for(var np=0,ap=this.shapeModifiers.length;np<ap;)if(this.shapeModifiers[np].isAnimatedWithShape(rp))return!0;return!1},renderModifiers:function(){if(this.shapeModifiers.length){var rp,np=this.shapes.length;for(rp=0;rp<np;rp+=1)this.shapes[rp].sh.reset();np=this.shapeModifiers.length;var ap;for(rp=np-1;rp>=0&&(ap=this.shapeModifiers[rp].processShapes(this._isFirstFrame),!ap);rp-=1);}},searchProcessedElement:function(rp){for(var np=this.processedElements,ap=0,sp=np.length;ap<sp;){if(np[ap].elem===rp)return np[ap].pos;ap+=1}return 0},addProcessedElement:function(rp,np){for(var ap=this.processedElements,sp=ap.length;sp;)if(sp-=1,ap[sp].elem===rp){ap[sp].pos=np;return}ap.push(new ProcessedElement(rp,np))},prepareFrame:function(rp){this.prepareRenderableFrame(rp),this.prepareProperties(rp,this.isInRange)}};var lineCapEnum={1:"butt",2:"round",3:"square"},lineJoinEnum={1:"miter",2:"round",3:"bevel"};function SVGShapeData(_d,rp,np){this.caches=[],this.styles=[],this.transformers=_d,this.lStr="",this.sh=np,this.lvl=rp,this._isAnimated=!!np.k;for(var ap=0,sp=_d.length;ap<sp;){if(_d[ap].mProps.dynamicProperties.length){this._isAnimated=!0;break}ap+=1}}SVGShapeData.prototype.setAsAnimated=function(){this._isAnimated=!0};function SVGStyleData(_d,rp){this.data=_d,this.type=_d.ty,this.d="",this.lvl=rp,this._mdf=!1,this.closed=_d.hd===!0,this.pElem=createNS("path"),this.msElem=null}SVGStyleData.prototype.reset=function(){this.d="",this._mdf=!1};function DashProperty(_d,rp,np,ap){this.elem=_d,this.frameId=-1,this.dataProps=createSizedArray(rp.length),this.renderer=np,this.k=!1,this.dashStr="",this.dashArray=createTypedArray("float32",rp.length?rp.length-1:0),this.dashoffset=createTypedArray("float32",1),this.initDynamicPropertyContainer(ap);var sp,lp=rp.length||0,up;for(sp=0;sp<lp;sp+=1)up=PropertyFactory.getProp(_d,rp[sp].v,0,0,this),this.k=up.k||this.k,this.dataProps[sp]={n:rp[sp].n,p:up};this.k||this.getValue(!0),this._isAnimated=this.k}DashProperty.prototype.getValue=function(_d){if(!(this.elem.globalData.frameId===this.frameId&&!_d)&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf=this._mdf||_d,this._mdf)){var rp=0,np=this.dataProps.length;for(this.renderer==="svg"&&(this.dashStr=""),rp=0;rp<np;rp+=1)this.dataProps[rp].n!=="o"?this.renderer==="svg"?this.dashStr+=" "+this.dataProps[rp].p.v:this.dashArray[rp]=this.dataProps[rp].p.v:this.dashoffset[0]=this.dataProps[rp].p.v}},extendPrototype([DynamicPropertyContainer],DashProperty);function SVGStrokeStyleData(_d,rp,np){this.initDynamicPropertyContainer(_d),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(_d,rp.o,0,.01,this),this.w=PropertyFactory.getProp(_d,rp.w,0,null,this),this.d=new DashProperty(_d,rp.d||{},"svg",this),this.c=PropertyFactory.getProp(_d,rp.c,1,255,this),this.style=np,this._isAnimated=!!this._isAnimated}extendPrototype([DynamicPropertyContainer],SVGStrokeStyleData);function SVGFillStyleData(_d,rp,np){this.initDynamicPropertyContainer(_d),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(_d,rp.o,0,.01,this),this.c=PropertyFactory.getProp(_d,rp.c,1,255,this),this.style=np}extendPrototype([DynamicPropertyContainer],SVGFillStyleData);function SVGNoStyleData(_d,rp,np){this.initDynamicPropertyContainer(_d),this.getValue=this.iterateDynamicProperties,this.style=np}extendPrototype([DynamicPropertyContainer],SVGNoStyleData);function GradientProperty(_d,rp,np){this.data=rp,this.c=createTypedArray("uint8c",rp.p*4);var ap=rp.k.k[0].s?rp.k.k[0].s.length-rp.p*4:rp.k.k.length-rp.p*4;this.o=createTypedArray("float32",ap),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=ap,this.initDynamicPropertyContainer(np),this.prop=PropertyFactory.getProp(_d,rp.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}GradientProperty.prototype.comparePoints=function(_d,rp){for(var np=0,ap=this.o.length/2,sp;np<ap;){if(sp=Math.abs(_d[np*4]-_d[rp*4+np*2]),sp>.01)return!1;np+=1}return!0},GradientProperty.prototype.checkCollapsable=function(){if(this.o.length/2!==this.c.length/4)return!1;if(this.data.k.k[0].s)for(var _d=0,rp=this.data.k.k.length;_d<rp;){if(!this.comparePoints(this.data.k.k[_d].s,this.data.p))return!1;_d+=1}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0},GradientProperty.prototype.getValue=function(_d){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||_d){var rp,np=this.data.p*4,ap,sp;for(rp=0;rp<np;rp+=1)ap=rp%4===0?100:255,sp=Math.round(this.prop.v[rp]*ap),this.c[rp]!==sp&&(this.c[rp]=sp,this._cmdf=!_d);if(this.o.length)for(np=this.prop.v.length,rp=this.data.p*4;rp<np;rp+=1)ap=rp%2===0?100:1,sp=rp%2===0?Math.round(this.prop.v[rp]*100):this.prop.v[rp],this.o[rp-this.data.p*4]!==sp&&(this.o[rp-this.data.p*4]=sp,this._omdf=!_d);this._mdf=!_d}},extendPrototype([DynamicPropertyContainer],GradientProperty);function SVGGradientFillStyleData(_d,rp,np){this.initDynamicPropertyContainer(_d),this.getValue=this.iterateDynamicProperties,this.initGradientData(_d,rp,np)}SVGGradientFillStyleData.prototype.initGradientData=function(_d,rp,np){this.o=PropertyFactory.getProp(_d,rp.o,0,.01,this),this.s=PropertyFactory.getProp(_d,rp.s,1,null,this),this.e=PropertyFactory.getProp(_d,rp.e,1,null,this),this.h=PropertyFactory.getProp(_d,rp.h||{k:0},0,.01,this),this.a=PropertyFactory.getProp(_d,rp.a||{k:0},0,degToRads,this),this.g=new GradientProperty(_d,rp.g,this),this.style=np,this.stops=[],this.setGradientData(np.pElem,rp),this.setGradientOpacity(rp,np),this._isAnimated=!!this._isAnimated},SVGGradientFillStyleData.prototype.setGradientData=function(_d,rp){var np=createElementID(),ap=createNS(rp.t===1?"linearGradient":"radialGradient");ap.setAttribute("id",np),ap.setAttribute("spreadMethod","pad"),ap.setAttribute("gradientUnits","userSpaceOnUse");var sp=[],lp,up,cp;for(cp=rp.g.p*4,up=0;up<cp;up+=4)lp=createNS("stop"),ap.appendChild(lp),sp.push(lp);_d.setAttribute(rp.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+np+")"),this.gf=ap,this.cst=sp},SVGGradientFillStyleData.prototype.setGradientOpacity=function(_d,rp){if(this.g._hasOpacity&&!this.g._collapsable){var np,ap,sp,lp=createNS("mask"),up=createNS("path");lp.appendChild(up);var cp=createElementID(),dp=createElementID();lp.setAttribute("id",dp);var fp=createNS(_d.t===1?"linearGradient":"radialGradient");fp.setAttribute("id",cp),fp.setAttribute("spreadMethod","pad"),fp.setAttribute("gradientUnits","userSpaceOnUse"),sp=_d.g.k.k[0].s?_d.g.k.k[0].s.length:_d.g.k.k.length;var pp=this.stops;for(ap=_d.g.p*4;ap<sp;ap+=2)np=createNS("stop"),np.setAttribute("stop-color","rgb(255,255,255)"),fp.appendChild(np),pp.push(np);up.setAttribute(_d.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+cp+")"),_d.ty==="gs"&&(up.setAttribute("stroke-linecap",lineCapEnum[_d.lc||2]),up.setAttribute("stroke-linejoin",lineJoinEnum[_d.lj||2]),_d.lj===1&&up.setAttribute("stroke-miterlimit",_d.ml)),this.of=fp,this.ms=lp,this.ost=pp,this.maskId=dp,rp.msElem=up}},extendPrototype([DynamicPropertyContainer],SVGGradientFillStyleData);function SVGGradientStrokeStyleData(_d,rp,np){this.initDynamicPropertyContainer(_d),this.getValue=this.iterateDynamicProperties,this.w=PropertyFactory.getProp(_d,rp.w,0,null,this),this.d=new DashProperty(_d,rp.d||{},"svg",this),this.initGradientData(_d,rp,np),this._isAnimated=!!this._isAnimated}extendPrototype([SVGGradientFillStyleData,DynamicPropertyContainer],SVGGradientStrokeStyleData);function ShapeGroupData(){this.it=[],this.prevViewData=[],this.gr=createNS("g")}function SVGTransformData(_d,rp,np){this.transform={mProps:_d,op:rp,container:np},this.elements=[],this._isAnimated=this.transform.mProps.dynamicProperties.length||this.transform.op.effectsSequence.length}var buildShapeString=function(rp,np,ap,sp){if(np===0)return"";var lp=rp.o,up=rp.i,cp=rp.v,dp,fp=" M"+sp.applyToPointStringified(cp[0][0],cp[0][1]);for(dp=1;dp<np;dp+=1)fp+=" C"+sp.applyToPointStringified(lp[dp-1][0],lp[dp-1][1])+" "+sp.applyToPointStringified(up[dp][0],up[dp][1])+" "+sp.applyToPointStringified(cp[dp][0],cp[dp][1]);return ap&&np&&(fp+=" C"+sp.applyToPointStringified(lp[dp-1][0],lp[dp-1][1])+" "+sp.applyToPointStringified(up[0][0],up[0][1])+" "+sp.applyToPointStringified(cp[0][0],cp[0][1]),fp+="z"),fp},SVGElementsRenderer=function(){var _d=new Matrix,rp=new Matrix,np={createRenderFunction:ap};function ap(hp){switch(hp.ty){case"fl":return cp;case"gf":return fp;case"gs":return dp;case"st":return pp;case"sh":case"el":case"rc":case"sr":return up;case"tr":return sp;case"no":return lp;default:return null}}function sp(hp,mp,gp){(gp||mp.transform.op._mdf)&&mp.transform.container.setAttribute("opacity",mp.transform.op.v),(gp||mp.transform.mProps._mdf)&&mp.transform.container.setAttribute("transform",mp.transform.mProps.v.to2dCSS())}function lp(){}function up(hp,mp,gp){var vp,xp,Sp,yp,bp,Ep,wp=mp.styles.length,_p=mp.lvl,Rp,$p,Cp,Ap;for(Ep=0;Ep<wp;Ep+=1){if(yp=mp.sh._mdf||gp,mp.styles[Ep].lvl<_p){for($p=rp.reset(),Cp=_p-mp.styles[Ep].lvl,Ap=mp.transformers.length-1;!yp&&Cp>0;)yp=mp.transformers[Ap].mProps._mdf||yp,Cp-=1,Ap-=1;if(yp)for(Cp=_p-mp.styles[Ep].lvl,Ap=mp.transformers.length-1;Cp>0;)$p.multiply(mp.transformers[Ap].mProps.v),Cp-=1,Ap-=1}else $p=_d;if(Rp=mp.sh.paths,xp=Rp._length,yp){for(Sp="",vp=0;vp<xp;vp+=1)bp=Rp.shapes[vp],bp&&bp._length&&(Sp+=buildShapeString(bp,bp._length,bp.c,$p));mp.caches[Ep]=Sp}else Sp=mp.caches[Ep];mp.styles[Ep].d+=hp.hd===!0?"":Sp,mp.styles[Ep]._mdf=yp||mp.styles[Ep]._mdf}}function cp(hp,mp,gp){var vp=mp.style;(mp.c._mdf||gp)&&vp.pElem.setAttribute("fill","rgb("+bmFloor(mp.c.v[0])+","+bmFloor(mp.c.v[1])+","+bmFloor(mp.c.v[2])+")"),(mp.o._mdf||gp)&&vp.pElem.setAttribute("fill-opacity",mp.o.v)}function dp(hp,mp,gp){fp(hp,mp,gp),pp(hp,mp,gp)}function fp(hp,mp,gp){var vp=mp.gf,xp=mp.g._hasOpacity,Sp=mp.s.v,yp=mp.e.v;if(mp.o._mdf||gp){var bp=hp.ty==="gf"?"fill-opacity":"stroke-opacity";mp.style.pElem.setAttribute(bp,mp.o.v)}if(mp.s._mdf||gp){var Ep=hp.t===1?"x1":"cx",wp=Ep==="x1"?"y1":"cy";vp.setAttribute(Ep,Sp[0]),vp.setAttribute(wp,Sp[1]),xp&&!mp.g._collapsable&&(mp.of.setAttribute(Ep,Sp[0]),mp.of.setAttribute(wp,Sp[1]))}var _p,Rp,$p,Cp;if(mp.g._cmdf||gp){_p=mp.cst;var Ap=mp.g.c;for($p=_p.length,Rp=0;Rp<$p;Rp+=1)Cp=_p[Rp],Cp.setAttribute("offset",Ap[Rp*4]+"%"),Cp.setAttribute("stop-color","rgb("+Ap[Rp*4+1]+","+Ap[Rp*4+2]+","+Ap[Rp*4+3]+")")}if(xp&&(mp.g._omdf||gp)){var Op=mp.g.o;for(mp.g._collapsable?_p=mp.cst:_p=mp.ost,$p=_p.length,Rp=0;Rp<$p;Rp+=1)Cp=_p[Rp],mp.g._collapsable||Cp.setAttribute("offset",Op[Rp*2]+"%"),Cp.setAttribute("stop-opacity",Op[Rp*2+1])}if(hp.t===1)(mp.e._mdf||gp)&&(vp.setAttribute("x2",yp[0]),vp.setAttribute("y2",yp[1]),xp&&!mp.g._collapsable&&(mp.of.setAttribute("x2",yp[0]),mp.of.setAttribute("y2",yp[1])));else{var Lp;if((mp.s._mdf||mp.e._mdf||gp)&&(Lp=Math.sqrt(Math.pow(Sp[0]-yp[0],2)+Math.pow(Sp[1]-yp[1],2)),vp.setAttribute("r",Lp),xp&&!mp.g._collapsable&&mp.of.setAttribute("r",Lp)),mp.e._mdf||mp.h._mdf||mp.a._mdf||gp){Lp||(Lp=Math.sqrt(Math.pow(Sp[0]-yp[0],2)+Math.pow(Sp[1]-yp[1],2)));var Mp=Math.atan2(yp[1]-Sp[1],yp[0]-Sp[0]),kp=mp.h.v;kp>=1?kp=.99:kp<=-1&&(kp=-.99);var Dp=Lp*kp,Fp=Math.cos(Mp+mp.a.v)*Dp+Sp[0],Ip=Math.sin(Mp+mp.a.v)*Dp+Sp[1];vp.setAttribute("fx",Fp),vp.setAttribute("fy",Ip),xp&&!mp.g._collapsable&&(mp.of.setAttribute("fx",Fp),mp.of.setAttribute("fy",Ip))}}}function pp(hp,mp,gp){var vp=mp.style,xp=mp.d;xp&&(xp._mdf||gp)&&xp.dashStr&&(vp.pElem.setAttribute("stroke-dasharray",xp.dashStr),vp.pElem.setAttribute("stroke-dashoffset",xp.dashoffset[0])),mp.c&&(mp.c._mdf||gp)&&vp.pElem.setAttribute("stroke","rgb("+bmFloor(mp.c.v[0])+","+bmFloor(mp.c.v[1])+","+bmFloor(mp.c.v[2])+")"),(mp.o._mdf||gp)&&vp.pElem.setAttribute("stroke-opacity",mp.o.v),(mp.w._mdf||gp)&&(vp.pElem.setAttribute("stroke-width",mp.w.v),vp.msElem&&vp.msElem.setAttribute("stroke-width",mp.w.v))}return np}();function SVGShapeElement(_d,rp,np){this.shapes=[],this.shapesData=_d.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.initElement(_d,rp,np),this.prevViewData=[]}extendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement],SVGShapeElement),SVGShapeElement.prototype.initSecondaryElement=function(){},SVGShapeElement.prototype.identityMatrix=new Matrix,SVGShapeElement.prototype.buildExpressionInterface=function(){},SVGShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes()},SVGShapeElement.prototype.filterUniqueShapes=function(){var _d,rp=this.shapes.length,np,ap,sp=this.stylesList.length,lp,up=[],cp=!1;for(ap=0;ap<sp;ap+=1){for(lp=this.stylesList[ap],cp=!1,up.length=0,_d=0;_d<rp;_d+=1)np=this.shapes[_d],np.styles.indexOf(lp)!==-1&&(up.push(np),cp=np._isAnimated||cp);up.length>1&&cp&&this.setShapesAsAnimated(up)}},SVGShapeElement.prototype.setShapesAsAnimated=function(_d){var rp,np=_d.length;for(rp=0;rp<np;rp+=1)_d[rp].setAsAnimated()},SVGShapeElement.prototype.createStyleElement=function(_d,rp){var np,ap=new SVGStyleData(_d,rp),sp=ap.pElem;if(_d.ty==="st")np=new SVGStrokeStyleData(this,_d,ap);else if(_d.ty==="fl")np=new SVGFillStyleData(this,_d,ap);else if(_d.ty==="gf"||_d.ty==="gs"){var lp=_d.ty==="gf"?SVGGradientFillStyleData:SVGGradientStrokeStyleData;np=new lp(this,_d,ap),this.globalData.defs.appendChild(np.gf),np.maskId&&(this.globalData.defs.appendChild(np.ms),this.globalData.defs.appendChild(np.of),sp.setAttribute("mask","url("+getLocationHref()+"#"+np.maskId+")"))}else _d.ty==="no"&&(np=new SVGNoStyleData(this,_d,ap));return(_d.ty==="st"||_d.ty==="gs")&&(sp.setAttribute("stroke-linecap",lineCapEnum[_d.lc||2]),sp.setAttribute("stroke-linejoin",lineJoinEnum[_d.lj||2]),sp.setAttribute("fill-opacity","0"),_d.lj===1&&sp.setAttribute("stroke-miterlimit",_d.ml)),_d.r===2&&sp.setAttribute("fill-rule","evenodd"),_d.ln&&sp.setAttribute("id",_d.ln),_d.cl&&sp.setAttribute("class",_d.cl),_d.bm&&(sp.style["mix-blend-mode"]=getBlendMode(_d.bm)),this.stylesList.push(ap),this.addToAnimatedContents(_d,np),np},SVGShapeElement.prototype.createGroupElement=function(_d){var rp=new ShapeGroupData;return _d.ln&&rp.gr.setAttribute("id",_d.ln),_d.cl&&rp.gr.setAttribute("class",_d.cl),_d.bm&&(rp.gr.style["mix-blend-mode"]=getBlendMode(_d.bm)),rp},SVGShapeElement.prototype.createTransformElement=function(_d,rp){var np=TransformPropertyFactory.getTransformProperty(this,_d,this),ap=new SVGTransformData(np,np.o,rp);return this.addToAnimatedContents(_d,ap),ap},SVGShapeElement.prototype.createShapeElement=function(_d,rp,np){var ap=4;_d.ty==="rc"?ap=5:_d.ty==="el"?ap=6:_d.ty==="sr"&&(ap=7);var sp=ShapePropertyFactory.getShapeProp(this,_d,ap,this),lp=new SVGShapeData(rp,np,sp);return this.shapes.push(lp),this.addShapeToModifiers(lp),this.addToAnimatedContents(_d,lp),lp},SVGShapeElement.prototype.addToAnimatedContents=function(_d,rp){for(var np=0,ap=this.animatedContents.length;np<ap;){if(this.animatedContents[np].element===rp)return;np+=1}this.animatedContents.push({fn:SVGElementsRenderer.createRenderFunction(_d),element:rp,data:_d})},SVGShapeElement.prototype.setElementStyles=function(_d){var rp=_d.styles,np,ap=this.stylesList.length;for(np=0;np<ap;np+=1)this.stylesList[np].closed||rp.push(this.stylesList[np])},SVGShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var _d,rp=this.itemsData.length;for(_d=0;_d<rp;_d+=1)this.prevViewData[_d]=this.itemsData[_d];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes(),rp=this.dynamicProperties.length,_d=0;_d<rp;_d+=1)this.dynamicProperties[_d].getValue();this.renderModifiers()},SVGShapeElement.prototype.searchShapes=function(_d,rp,np,ap,sp,lp,up){var cp=[].concat(lp),dp,fp=_d.length-1,pp,hp,mp=[],gp=[],vp,xp,Sp;for(dp=fp;dp>=0;dp-=1){if(Sp=this.searchProcessedElement(_d[dp]),Sp?rp[dp]=np[Sp-1]:_d[dp]._render=up,_d[dp].ty==="fl"||_d[dp].ty==="st"||_d[dp].ty==="gf"||_d[dp].ty==="gs"||_d[dp].ty==="no")Sp?rp[dp].style.closed=!1:rp[dp]=this.createStyleElement(_d[dp],sp),_d[dp]._render&&rp[dp].style.pElem.parentNode!==ap&&ap.appendChild(rp[dp].style.pElem),mp.push(rp[dp].style);else if(_d[dp].ty==="gr"){if(!Sp)rp[dp]=this.createGroupElement(_d[dp]);else for(hp=rp[dp].it.length,pp=0;pp<hp;pp+=1)rp[dp].prevViewData[pp]=rp[dp].it[pp];this.searchShapes(_d[dp].it,rp[dp].it,rp[dp].prevViewData,rp[dp].gr,sp+1,cp,up),_d[dp]._render&&rp[dp].gr.parentNode!==ap&&ap.appendChild(rp[dp].gr)}else _d[dp].ty==="tr"?(Sp||(rp[dp]=this.createTransformElement(_d[dp],ap)),vp=rp[dp].transform,cp.push(vp)):_d[dp].ty==="sh"||_d[dp].ty==="rc"||_d[dp].ty==="el"||_d[dp].ty==="sr"?(Sp||(rp[dp]=this.createShapeElement(_d[dp],cp,sp)),this.setElementStyles(rp[dp])):_d[dp].ty==="tm"||_d[dp].ty==="rd"||_d[dp].ty==="ms"||_d[dp].ty==="pb"||_d[dp].ty==="zz"||_d[dp].ty==="op"?(Sp?(xp=rp[dp],xp.closed=!1):(xp=ShapeModifiers.getModifier(_d[dp].ty),xp.init(this,_d[dp]),rp[dp]=xp,this.shapeModifiers.push(xp)),gp.push(xp)):_d[dp].ty==="rp"&&(Sp?(xp=rp[dp],xp.closed=!0):(xp=ShapeModifiers.getModifier(_d[dp].ty),rp[dp]=xp,xp.init(this,_d,dp,rp),this.shapeModifiers.push(xp),up=!1),gp.push(xp));this.addProcessedElement(_d[dp],dp+1)}for(fp=mp.length,dp=0;dp<fp;dp+=1)mp[dp].closed=!0;for(fp=gp.length,dp=0;dp<fp;dp+=1)gp[dp].closed=!0},SVGShapeElement.prototype.renderInnerContent=function(){this.renderModifiers();var _d,rp=this.stylesList.length;for(_d=0;_d<rp;_d+=1)this.stylesList[_d].reset();for(this.renderShape(),_d=0;_d<rp;_d+=1)(this.stylesList[_d]._mdf||this._isFirstFrame)&&(this.stylesList[_d].msElem&&(this.stylesList[_d].msElem.setAttribute("d",this.stylesList[_d].d),this.stylesList[_d].d="M0 0"+this.stylesList[_d].d),this.stylesList[_d].pElem.setAttribute("d",this.stylesList[_d].d||"M0 0"))},SVGShapeElement.prototype.renderShape=function(){var _d,rp=this.animatedContents.length,np;for(_d=0;_d<rp;_d+=1)np=this.animatedContents[_d],(this._isFirstFrame||np.element._isAnimated)&&np.data!==!0&&np.fn(np.data,np.element,this._isFirstFrame)},SVGShapeElement.prototype.destroy=function(){this.destroyBaseElement(),this.shapesData=null,this.itemsData=null};function LetterProps(_d,rp,np,ap,sp,lp){this.o=_d,this.sw=rp,this.sc=np,this.fc=ap,this.m=sp,this.p=lp,this._mdf={o:!0,sw:!!rp,sc:!!np,fc:!!ap,m:!0,p:!0}}LetterProps.prototype.update=function(_d,rp,np,ap,sp,lp){this._mdf.o=!1,this._mdf.sw=!1,this._mdf.sc=!1,this._mdf.fc=!1,this._mdf.m=!1,this._mdf.p=!1;var up=!1;return this.o!==_d&&(this.o=_d,this._mdf.o=!0,up=!0),this.sw!==rp&&(this.sw=rp,this._mdf.sw=!0,up=!0),this.sc!==np&&(this.sc=np,this._mdf.sc=!0,up=!0),this.fc!==ap&&(this.fc=ap,this._mdf.fc=!0,up=!0),this.m!==sp&&(this.m=sp,this._mdf.m=!0,up=!0),lp.length&&(this.p[0]!==lp[0]||this.p[1]!==lp[1]||this.p[4]!==lp[4]||this.p[5]!==lp[5]||this.p[12]!==lp[12]||this.p[13]!==lp[13])&&(this.p=lp,this._mdf.p=!0,up=!0),up};function TextProperty(_d,rp){this._frameId=initialDefaultFrame,this.pv="",this.v="",this.kf=!1,this._isFirstFrame=!0,this._mdf=!1,rp.d&&rp.d.sid&&(rp.d=_d.globalData.slotManager.getProp(rp.d)),this.data=rp,this.elem=_d,this.comp=this.elem.comp,this.keysIndex=0,this.canResize=!1,this.minimumFontSize=1,this.effectsSequence=[],this.currentData={ascent:0,boxWidth:this.defaultBoxWidth,f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,sz:0,ps:null,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,finalSize:0,finalText:[],finalLineHeight:0,__complete:!1},this.copyData(this.currentData,this.data.d.k[0].s),this.searchProperty()||this.completeTextData(this.currentData)}TextProperty.prototype.defaultBoxWidth=[0,0],TextProperty.prototype.copyData=function(_d,rp){for(var np in rp)Object.prototype.hasOwnProperty.call(rp,np)&&(_d[np]=rp[np]);return _d},TextProperty.prototype.setCurrentData=function(_d){_d.__complete||this.completeTextData(_d),this.currentData=_d,this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth,this._mdf=!0},TextProperty.prototype.searchProperty=function(){return this.searchKeyframes()},TextProperty.prototype.searchKeyframes=function(){return this.kf=this.data.d.k.length>1,this.kf&&this.addEffect(this.getKeyframeValue.bind(this)),this.kf},TextProperty.prototype.addEffect=function(_d){this.effectsSequence.push(_d),this.elem.addDynamicProperty(this)},TextProperty.prototype.getValue=function(_d){if(!((this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)&&!_d)){this.currentData.t=this.data.d.k[this.keysIndex].s.t;var rp=this.currentData,np=this.keysIndex;if(this.lock){this.setCurrentData(this.currentData);return}this.lock=!0,this._mdf=!1;var ap,sp=this.effectsSequence.length,lp=_d||this.data.d.k[this.keysIndex].s;for(ap=0;ap<sp;ap+=1)np!==this.keysIndex?lp=this.effectsSequence[ap](lp,lp.t):lp=this.effectsSequence[ap](this.currentData,lp.t);rp!==lp&&this.setCurrentData(lp),this.v=this.currentData,this.pv=this.v,this.lock=!1,this.frameId=this.elem.globalData.frameId}},TextProperty.prototype.getKeyframeValue=function(){for(var _d=this.data.d.k,rp=this.elem.comp.renderedFrame,np=0,ap=_d.length;np<=ap-1&&!(np===ap-1||_d[np+1].t>rp);)np+=1;return this.keysIndex!==np&&(this.keysIndex=np),this.data.d.k[this.keysIndex].s},TextProperty.prototype.buildFinalText=function(_d){for(var rp=[],np=0,ap=_d.length,sp,lp,up=!1,cp=!1,dp="";np<ap;)up=cp,cp=!1,sp=_d.charCodeAt(np),dp=_d.charAt(np),FontManager.isCombinedCharacter(sp)?up=!0:sp>=55296&&sp<=56319?FontManager.isRegionalFlag(_d,np)?dp=_d.substr(np,14):(lp=_d.charCodeAt(np+1),lp>=56320&&lp<=57343&&(FontManager.isModifier(sp,lp)?(dp=_d.substr(np,2),up=!0):FontManager.isFlagEmoji(_d.substr(np,4))?dp=_d.substr(np,4):dp=_d.substr(np,2))):sp>56319?(lp=_d.charCodeAt(np+1),FontManager.isVariationSelector(sp)&&(up=!0)):FontManager.isZeroWidthJoiner(sp)&&(up=!0,cp=!0),up?(rp[rp.length-1]+=dp,up=!1):rp.push(dp),np+=dp.length;return rp},TextProperty.prototype.completeTextData=function(_d){_d.__complete=!0;var rp=this.elem.globalData.fontManager,np=this.data,ap=[],sp,lp,up,cp=0,dp,fp=np.m.g,pp=0,hp=0,mp=0,gp=[],vp=0,xp=0,Sp,yp,bp=rp.getFontByName(_d.f),Ep,wp=0,_p=getFontProperties(bp);_d.fWeight=_p.weight,_d.fStyle=_p.style,_d.finalSize=_d.s,_d.finalText=this.buildFinalText(_d.t),lp=_d.finalText.length,_d.finalLineHeight=_d.lh;var Rp=_d.tr/1e3*_d.finalSize,$p;if(_d.sz)for(var Cp=!0,Ap=_d.sz[0],Op=_d.sz[1],Lp,Mp;Cp;){Mp=this.buildFinalText(_d.t),Lp=0,vp=0,lp=Mp.length,Rp=_d.tr/1e3*_d.finalSize;var kp=-1;for(sp=0;sp<lp;sp+=1)$p=Mp[sp].charCodeAt(0),up=!1,Mp[sp]===" "?kp=sp:($p===13||$p===3)&&(vp=0,up=!0,Lp+=_d.finalLineHeight||_d.finalSize*1.2),rp.chars?(Ep=rp.getCharData(Mp[sp],bp.fStyle,bp.fFamily),wp=up?0:Ep.w*_d.finalSize/100):wp=rp.measureText(Mp[sp],_d.f,_d.finalSize),vp+wp>Ap&&Mp[sp]!==" "?(kp===-1?lp+=1:sp=kp,Lp+=_d.finalLineHeight||_d.finalSize*1.2,Mp.splice(sp,kp===sp?1:0,"\r"),kp=-1,vp=0):(vp+=wp,vp+=Rp);Lp+=bp.ascent*_d.finalSize/100,this.canResize&&_d.finalSize>this.minimumFontSize&&Op<Lp?(_d.finalSize-=1,_d.finalLineHeight=_d.finalSize*_d.lh/_d.s):(_d.finalText=Mp,lp=_d.finalText.length,Cp=!1)}vp=-Rp,wp=0;var Dp=0,Fp;for(sp=0;sp<lp;sp+=1)if(up=!1,Fp=_d.finalText[sp],$p=Fp.charCodeAt(0),$p===13||$p===3?(Dp=0,gp.push(vp),xp=vp>xp?vp:xp,vp=-2*Rp,dp="",up=!0,mp+=1):dp=Fp,rp.chars?(Ep=rp.getCharData(Fp,bp.fStyle,rp.getFontByName(_d.f).fFamily),wp=up?0:Ep.w*_d.finalSize/100):wp=rp.measureText(dp,_d.f,_d.finalSize),Fp===" "?Dp+=wp+Rp:(vp+=wp+Rp+Dp,Dp=0),ap.push({l:wp,an:wp,add:pp,n:up,anIndexes:[],val:dp,line:mp,animatorJustifyOffset:0}),fp==2){if(pp+=wp,dp===""||dp===" "||sp===lp-1){for((dp===""||dp===" ")&&(pp-=wp);hp<=sp;)ap[hp].an=pp,ap[hp].ind=cp,ap[hp].extra=wp,hp+=1;cp+=1,pp=0}}else if(fp==3){if(pp+=wp,dp===""||sp===lp-1){for(dp===""&&(pp-=wp);hp<=sp;)ap[hp].an=pp,ap[hp].ind=cp,ap[hp].extra=wp,hp+=1;pp=0,cp+=1}}else ap[cp].ind=cp,ap[cp].extra=0,cp+=1;if(_d.l=ap,xp=vp>xp?vp:xp,gp.push(vp),_d.sz)_d.boxWidth=_d.sz[0],_d.justifyOffset=0;else switch(_d.boxWidth=xp,_d.j){case 1:_d.justifyOffset=-_d.boxWidth;break;case 2:_d.justifyOffset=-_d.boxWidth/2;break;default:_d.justifyOffset=0}_d.lineWidths=gp;var Ip=np.a,Pp,Tp;yp=Ip.length;var Np,jp,Vp=[];for(Sp=0;Sp<yp;Sp+=1){for(Pp=Ip[Sp],Pp.a.sc&&(_d.strokeColorAnim=!0),Pp.a.sw&&(_d.strokeWidthAnim=!0),(Pp.a.fc||Pp.a.fh||Pp.a.fs||Pp.a.fb)&&(_d.fillColorAnim=!0),jp=0,Np=Pp.s.b,sp=0;sp<lp;sp+=1)Tp=ap[sp],Tp.anIndexes[Sp]=jp,(Np==1&&Tp.val!==""||Np==2&&Tp.val!==""&&Tp.val!==" "||Np==3&&(Tp.n||Tp.val==" "||sp==lp-1)||Np==4&&(Tp.n||sp==lp-1))&&(Pp.s.rn===1&&Vp.push(jp),jp+=1);np.a[Sp].s.totalChars=jp;var zp=-1,Wp;if(Pp.s.rn===1)for(sp=0;sp<lp;sp+=1)Tp=ap[sp],zp!=Tp.anIndexes[Sp]&&(zp=Tp.anIndexes[Sp],Wp=Vp.splice(Math.floor(Math.random()*Vp.length),1)[0]),Tp.anIndexes[Sp]=Wp}_d.yOffset=_d.finalLineHeight||_d.finalSize*1.2,_d.ls=_d.ls||0,_d.ascent=bp.ascent*_d.finalSize/100},TextProperty.prototype.updateDocumentData=function(_d,rp){rp=rp===void 0?this.keysIndex:rp;var np=this.copyData({},this.data.d.k[rp].s);np=this.copyData(np,_d),this.data.d.k[rp].s=np,this.recalculate(rp),this.setCurrentData(np),this.elem.addDynamicProperty(this)},TextProperty.prototype.recalculate=function(_d){var rp=this.data.d.k[_d].s;rp.__complete=!1,this.keysIndex=0,this._isFirstFrame=!0,this.getValue(rp)},TextProperty.prototype.canResizeFont=function(_d){this.canResize=_d,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)},TextProperty.prototype.setMinimumFontSize=function(_d){this.minimumFontSize=Math.floor(_d)||1,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)};var TextSelectorProp=function(){var _d=Math.max,rp=Math.min,np=Math.floor;function ap(lp,up){this._currentTextLength=-1,this.k=!1,this.data=up,this.elem=lp,this.comp=lp.comp,this.finalS=0,this.finalE=0,this.initDynamicPropertyContainer(lp),this.s=PropertyFactory.getProp(lp,up.s||{k:0},0,0,this),"e"in up?this.e=PropertyFactory.getProp(lp,up.e,0,0,this):this.e={v:100},this.o=PropertyFactory.getProp(lp,up.o||{k:0},0,0,this),this.xe=PropertyFactory.getProp(lp,up.xe||{k:0},0,0,this),this.ne=PropertyFactory.getProp(lp,up.ne||{k:0},0,0,this),this.sm=PropertyFactory.getProp(lp,up.sm||{k:100},0,0,this),this.a=PropertyFactory.getProp(lp,up.a,0,.01,this),this.dynamicProperties.length||this.getValue()}ap.prototype={getMult:function(up){this._currentTextLength!==this.elem.textProperty.currentData.l.length&&this.getValue();var cp=0,dp=0,fp=1,pp=1;this.ne.v>0?cp=this.ne.v/100:dp=-this.ne.v/100,this.xe.v>0?fp=1-this.xe.v/100:pp=1+this.xe.v/100;var hp=BezierFactory.getBezierEasing(cp,dp,fp,pp).get,mp=0,gp=this.finalS,vp=this.finalE,xp=this.data.sh;if(xp===2)vp===gp?mp=up>=vp?1:0:mp=_d(0,rp(.5/(vp-gp)+(up-gp)/(vp-gp),1)),mp=hp(mp);else if(xp===3)vp===gp?mp=up>=vp?0:1:mp=1-_d(0,rp(.5/(vp-gp)+(up-gp)/(vp-gp),1)),mp=hp(mp);else if(xp===4)vp===gp?mp=0:(mp=_d(0,rp(.5/(vp-gp)+(up-gp)/(vp-gp),1)),mp<.5?mp*=2:mp=1-2*(mp-.5)),mp=hp(mp);else if(xp===5){if(vp===gp)mp=0;else{var Sp=vp-gp;up=rp(_d(0,up+.5-gp),vp-gp);var yp=-Sp/2+up,bp=Sp/2;mp=Math.sqrt(1-yp*yp/(bp*bp))}mp=hp(mp)}else xp===6?(vp===gp?mp=0:(up=rp(_d(0,up+.5-gp),vp-gp),mp=(1+Math.cos(Math.PI+Math.PI*2*up/(vp-gp)))/2),mp=hp(mp)):(up>=np(gp)&&(up-gp<0?mp=_d(0,rp(rp(vp,1)-(gp-up),1)):mp=_d(0,rp(vp-up,1))),mp=hp(mp));if(this.sm.v!==100){var Ep=this.sm.v*.01;Ep===0&&(Ep=1e-8);var wp=.5-Ep*.5;mp<wp?mp=0:(mp=(mp-wp)/Ep,mp>1&&(mp=1))}return mp*this.a.v},getValue:function(up){this.iterateDynamicProperties(),this._mdf=up||this._mdf,this._currentTextLength=this.elem.textProperty.currentData.l.length||0,up&&this.data.r===2&&(this.e.v=this._currentTextLength);var cp=this.data.r===2?1:100/this.data.totalChars,dp=this.o.v/cp,fp=this.s.v/cp+dp,pp=this.e.v/cp+dp;if(fp>pp){var hp=fp;fp=pp,pp=hp}this.finalS=fp,this.finalE=pp}},extendPrototype([DynamicPropertyContainer],ap);function sp(lp,up,cp){return new ap(lp,up)}return{getTextSelectorProp:sp}}();function TextAnimatorDataProperty(_d,rp,np){var ap={propType:!1},sp=PropertyFactory.getProp,lp=rp.a;this.a={r:lp.r?sp(_d,lp.r,0,degToRads,np):ap,rx:lp.rx?sp(_d,lp.rx,0,degToRads,np):ap,ry:lp.ry?sp(_d,lp.ry,0,degToRads,np):ap,sk:lp.sk?sp(_d,lp.sk,0,degToRads,np):ap,sa:lp.sa?sp(_d,lp.sa,0,degToRads,np):ap,s:lp.s?sp(_d,lp.s,1,.01,np):ap,a:lp.a?sp(_d,lp.a,1,0,np):ap,o:lp.o?sp(_d,lp.o,0,.01,np):ap,p:lp.p?sp(_d,lp.p,1,0,np):ap,sw:lp.sw?sp(_d,lp.sw,0,0,np):ap,sc:lp.sc?sp(_d,lp.sc,1,0,np):ap,fc:lp.fc?sp(_d,lp.fc,1,0,np):ap,fh:lp.fh?sp(_d,lp.fh,0,0,np):ap,fs:lp.fs?sp(_d,lp.fs,0,.01,np):ap,fb:lp.fb?sp(_d,lp.fb,0,.01,np):ap,t:lp.t?sp(_d,lp.t,0,0,np):ap},this.s=TextSelectorProp.getTextSelectorProp(_d,rp.s,np),this.s.t=rp.s.t}function TextAnimatorProperty(_d,rp,np){this._isFirstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._textData=_d,this._renderType=rp,this._elem=np,this._animatorsData=createSizedArray(this._textData.a.length),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1,this.initDynamicPropertyContainer(np)}TextAnimatorProperty.prototype.searchProperties=function(){var _d,rp=this._textData.a.length,np,ap=PropertyFactory.getProp;for(_d=0;_d<rp;_d+=1)np=this._textData.a[_d],this._animatorsData[_d]=new TextAnimatorDataProperty(this._elem,np,this);this._textData.p&&"m"in this._textData.p?(this._pathData={a:ap(this._elem,this._textData.p.a,0,0,this),f:ap(this._elem,this._textData.p.f,0,0,this),l:ap(this._elem,this._textData.p.l,0,0,this),r:ap(this._elem,this._textData.p.r,0,0,this),p:ap(this._elem,this._textData.p.p,0,0,this),m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=ap(this._elem,this._textData.m.a,1,0,this)},TextAnimatorProperty.prototype.getMeasures=function(_d,rp){if(this.lettersChangedFlag=rp,!(!this._mdf&&!this._isFirstFrame&&!rp&&(!this._hasMaskedPath||!this._pathData.m._mdf))){this._isFirstFrame=!1;var np=this._moreOptions.alignment.v,ap=this._animatorsData,sp=this._textData,lp=this.mHelper,up=this._renderType,cp=this.renderedLetters.length,dp,fp,pp,hp,mp=_d.l,gp,vp,xp,Sp,yp,bp,Ep,wp,_p,Rp,$p,Cp,Ap,Op,Lp;if(this._hasMaskedPath){if(Lp=this._pathData.m,!this._pathData.n||this._pathData._mdf){var Mp=Lp.v;this._pathData.r.v&&(Mp=Mp.reverse()),gp={tLength:0,segments:[]},hp=Mp._length-1;var kp;for(Cp=0,pp=0;pp<hp;pp+=1)kp=bez.buildBezierData(Mp.v[pp],Mp.v[pp+1],[Mp.o[pp][0]-Mp.v[pp][0],Mp.o[pp][1]-Mp.v[pp][1]],[Mp.i[pp+1][0]-Mp.v[pp+1][0],Mp.i[pp+1][1]-Mp.v[pp+1][1]]),gp.tLength+=kp.segmentLength,gp.segments.push(kp),Cp+=kp.segmentLength;pp=hp,Lp.v.c&&(kp=bez.buildBezierData(Mp.v[pp],Mp.v[0],[Mp.o[pp][0]-Mp.v[pp][0],Mp.o[pp][1]-Mp.v[pp][1]],[Mp.i[0][0]-Mp.v[0][0],Mp.i[0][1]-Mp.v[0][1]]),gp.tLength+=kp.segmentLength,gp.segments.push(kp),Cp+=kp.segmentLength),this._pathData.pi=gp}if(gp=this._pathData.pi,vp=this._pathData.f.v,Ep=0,bp=1,Sp=0,yp=!0,Rp=gp.segments,vp<0&&Lp.v.c)for(gp.tLength<Math.abs(vp)&&(vp=-Math.abs(vp)%gp.tLength),Ep=Rp.length-1,_p=Rp[Ep].points,bp=_p.length-1;vp<0;)vp+=_p[bp].partialLength,bp-=1,bp<0&&(Ep-=1,_p=Rp[Ep].points,bp=_p.length-1);_p=Rp[Ep].points,wp=_p[bp-1],xp=_p[bp],$p=xp.partialLength}hp=mp.length,dp=0,fp=0;var Dp=_d.finalSize*1.2*.714,Fp=!0,Ip,Pp,Tp,Np,jp;Np=ap.length;var Vp,zp=-1,Wp,Up,qp,Bp=vp,Yp=Ep,Xp=bp,Qp=-1,am,Jp,im,Zp,Gp,tm,om,em,_m="",Cm=this.defaultPropsArray,Rm;if(_d.j===2||_d.j===1){var xm=0,$m=0,fm=_d.j===2?-.5:-1,Sm=0,pm=!0;for(pp=0;pp<hp;pp+=1)if(mp[pp].n){for(xm&&(xm+=$m);Sm<pp;)mp[Sm].animatorJustifyOffset=xm,Sm+=1;xm=0,pm=!0}else{for(Tp=0;Tp<Np;Tp+=1)Ip=ap[Tp].a,Ip.t.propType&&(pm&&_d.j===2&&($m+=Ip.t.v*fm),Pp=ap[Tp].s,Vp=Pp.getMult(mp[pp].anIndexes[Tp],sp.a[Tp].s.totalChars),Vp.length?xm+=Ip.t.v*Vp[0]*fm:xm+=Ip.t.v*Vp*fm);pm=!1}for(xm&&(xm+=$m);Sm<pp;)mp[Sm].animatorJustifyOffset=xm,Sm+=1}for(pp=0;pp<hp;pp+=1){if(lp.reset(),am=1,mp[pp].n)dp=0,fp+=_d.yOffset,fp+=Fp?1:0,vp=Bp,Fp=!1,this._hasMaskedPath&&(Ep=Yp,bp=Xp,_p=Rp[Ep].points,wp=_p[bp-1],xp=_p[bp],$p=xp.partialLength,Sp=0),_m="",em="",tm="",Rm="",Cm=this.defaultPropsArray;else{if(this._hasMaskedPath){if(Qp!==mp[pp].line){switch(_d.j){case 1:vp+=Cp-_d.lineWidths[mp[pp].line];break;case 2:vp+=(Cp-_d.lineWidths[mp[pp].line])/2;break}Qp=mp[pp].line}zp!==mp[pp].ind&&(mp[zp]&&(vp+=mp[zp].extra),vp+=mp[pp].an/2,zp=mp[pp].ind),vp+=np[0]*mp[pp].an*.005;var hm=0;for(Tp=0;Tp<Np;Tp+=1)Ip=ap[Tp].a,Ip.p.propType&&(Pp=ap[Tp].s,Vp=Pp.getMult(mp[pp].anIndexes[Tp],sp.a[Tp].s.totalChars),Vp.length?hm+=Ip.p.v[0]*Vp[0]:hm+=Ip.p.v[0]*Vp),Ip.a.propType&&(Pp=ap[Tp].s,Vp=Pp.getMult(mp[pp].anIndexes[Tp],sp.a[Tp].s.totalChars),Vp.length?hm+=Ip.a.v[0]*Vp[0]:hm+=Ip.a.v[0]*Vp);for(yp=!0,this._pathData.a.v&&(vp=mp[0].an*.5+(Cp-this._pathData.f.v-mp[0].an*.5-mp[mp.length-1].an*.5)*zp/(hp-1),vp+=this._pathData.f.v);yp;)Sp+$p>=vp+hm||!_p?(Ap=(vp+hm-Sp)/xp.partialLength,Up=wp.point[0]+(xp.point[0]-wp.point[0])*Ap,qp=wp.point[1]+(xp.point[1]-wp.point[1])*Ap,lp.translate(-np[0]*mp[pp].an*.005,-(np[1]*Dp)*.01),yp=!1):_p&&(Sp+=xp.partialLength,bp+=1,bp>=_p.length&&(bp=0,Ep+=1,Rp[Ep]?_p=Rp[Ep].points:Lp.v.c?(bp=0,Ep=0,_p=Rp[Ep].points):(Sp-=xp.partialLength,_p=null)),_p&&(wp=xp,xp=_p[bp],$p=xp.partialLength));Wp=mp[pp].an/2-mp[pp].add,lp.translate(-Wp,0,0)}else Wp=mp[pp].an/2-mp[pp].add,lp.translate(-Wp,0,0),lp.translate(-np[0]*mp[pp].an*.005,-np[1]*Dp*.01,0);for(Tp=0;Tp<Np;Tp+=1)Ip=ap[Tp].a,Ip.t.propType&&(Pp=ap[Tp].s,Vp=Pp.getMult(mp[pp].anIndexes[Tp],sp.a[Tp].s.totalChars),(dp!==0||_d.j!==0)&&(this._hasMaskedPath?Vp.length?vp+=Ip.t.v*Vp[0]:vp+=Ip.t.v*Vp:Vp.length?dp+=Ip.t.v*Vp[0]:dp+=Ip.t.v*Vp));for(_d.strokeWidthAnim&&(im=_d.sw||0),_d.strokeColorAnim&&(_d.sc?Jp=[_d.sc[0],_d.sc[1],_d.sc[2]]:Jp=[0,0,0]),_d.fillColorAnim&&_d.fc&&(Zp=[_d.fc[0],_d.fc[1],_d.fc[2]]),Tp=0;Tp<Np;Tp+=1)Ip=ap[Tp].a,Ip.a.propType&&(Pp=ap[Tp].s,Vp=Pp.getMult(mp[pp].anIndexes[Tp],sp.a[Tp].s.totalChars),Vp.length?lp.translate(-Ip.a.v[0]*Vp[0],-Ip.a.v[1]*Vp[1],Ip.a.v[2]*Vp[2]):lp.translate(-Ip.a.v[0]*Vp,-Ip.a.v[1]*Vp,Ip.a.v[2]*Vp));for(Tp=0;Tp<Np;Tp+=1)Ip=ap[Tp].a,Ip.s.propType&&(Pp=ap[Tp].s,Vp=Pp.getMult(mp[pp].anIndexes[Tp],sp.a[Tp].s.totalChars),Vp.length?lp.scale(1+(Ip.s.v[0]-1)*Vp[0],1+(Ip.s.v[1]-1)*Vp[1],1):lp.scale(1+(Ip.s.v[0]-1)*Vp,1+(Ip.s.v[1]-1)*Vp,1));for(Tp=0;Tp<Np;Tp+=1){if(Ip=ap[Tp].a,Pp=ap[Tp].s,Vp=Pp.getMult(mp[pp].anIndexes[Tp],sp.a[Tp].s.totalChars),Ip.sk.propType&&(Vp.length?lp.skewFromAxis(-Ip.sk.v*Vp[0],Ip.sa.v*Vp[1]):lp.skewFromAxis(-Ip.sk.v*Vp,Ip.sa.v*Vp)),Ip.r.propType&&(Vp.length?lp.rotateZ(-Ip.r.v*Vp[2]):lp.rotateZ(-Ip.r.v*Vp)),Ip.ry.propType&&(Vp.length?lp.rotateY(Ip.ry.v*Vp[1]):lp.rotateY(Ip.ry.v*Vp)),Ip.rx.propType&&(Vp.length?lp.rotateX(Ip.rx.v*Vp[0]):lp.rotateX(Ip.rx.v*Vp)),Ip.o.propType&&(Vp.length?am+=(Ip.o.v*Vp[0]-am)*Vp[0]:am+=(Ip.o.v*Vp-am)*Vp),_d.strokeWidthAnim&&Ip.sw.propType&&(Vp.length?im+=Ip.sw.v*Vp[0]:im+=Ip.sw.v*Vp),_d.strokeColorAnim&&Ip.sc.propType)for(Gp=0;Gp<3;Gp+=1)Vp.length?Jp[Gp]+=(Ip.sc.v[Gp]-Jp[Gp])*Vp[0]:Jp[Gp]+=(Ip.sc.v[Gp]-Jp[Gp])*Vp;if(_d.fillColorAnim&&_d.fc){if(Ip.fc.propType)for(Gp=0;Gp<3;Gp+=1)Vp.length?Zp[Gp]+=(Ip.fc.v[Gp]-Zp[Gp])*Vp[0]:Zp[Gp]+=(Ip.fc.v[Gp]-Zp[Gp])*Vp;Ip.fh.propType&&(Vp.length?Zp=addHueToRGB(Zp,Ip.fh.v*Vp[0]):Zp=addHueToRGB(Zp,Ip.fh.v*Vp)),Ip.fs.propType&&(Vp.length?Zp=addSaturationToRGB(Zp,Ip.fs.v*Vp[0]):Zp=addSaturationToRGB(Zp,Ip.fs.v*Vp)),Ip.fb.propType&&(Vp.length?Zp=addBrightnessToRGB(Zp,Ip.fb.v*Vp[0]):Zp=addBrightnessToRGB(Zp,Ip.fb.v*Vp))}}for(Tp=0;Tp<Np;Tp+=1)Ip=ap[Tp].a,Ip.p.propType&&(Pp=ap[Tp].s,Vp=Pp.getMult(mp[pp].anIndexes[Tp],sp.a[Tp].s.totalChars),this._hasMaskedPath?Vp.length?lp.translate(0,Ip.p.v[1]*Vp[0],-Ip.p.v[2]*Vp[1]):lp.translate(0,Ip.p.v[1]*Vp,-Ip.p.v[2]*Vp):Vp.length?lp.translate(Ip.p.v[0]*Vp[0],Ip.p.v[1]*Vp[1],-Ip.p.v[2]*Vp[2]):lp.translate(Ip.p.v[0]*Vp,Ip.p.v[1]*Vp,-Ip.p.v[2]*Vp));if(_d.strokeWidthAnim&&(tm=im<0?0:im),_d.strokeColorAnim&&(om="rgb("+Math.round(Jp[0]*255)+","+Math.round(Jp[1]*255)+","+Math.round(Jp[2]*255)+")"),_d.fillColorAnim&&_d.fc&&(em="rgb("+Math.round(Zp[0]*255)+","+Math.round(Zp[1]*255)+","+Math.round(Zp[2]*255)+")"),this._hasMaskedPath){if(lp.translate(0,-_d.ls),lp.translate(0,np[1]*Dp*.01+fp,0),this._pathData.p.v){Op=(xp.point[1]-wp.point[1])/(xp.point[0]-wp.point[0]);var lm=Math.atan(Op)*180/Math.PI;xp.point[0]<wp.point[0]&&(lm+=180),lp.rotate(-lm*Math.PI/180)}lp.translate(Up,qp,0),vp-=np[0]*mp[pp].an*.005,mp[pp+1]&&zp!==mp[pp+1].ind&&(vp+=mp[pp].an/2,vp+=_d.tr*.001*_d.finalSize)}else{switch(lp.translate(dp,fp,0),_d.ps&&lp.translate(_d.ps[0],_d.ps[1]+_d.ascent,0),_d.j){case 1:lp.translate(mp[pp].animatorJustifyOffset+_d.justifyOffset+(_d.boxWidth-_d.lineWidths[mp[pp].line]),0,0);break;case 2:lp.translate(mp[pp].animatorJustifyOffset+_d.justifyOffset+(_d.boxWidth-_d.lineWidths[mp[pp].line])/2,0,0);break}lp.translate(0,-_d.ls),lp.translate(Wp,0,0),lp.translate(np[0]*mp[pp].an*.005,np[1]*Dp*.01,0),dp+=mp[pp].l+_d.tr*.001*_d.finalSize}up==="html"?_m=lp.toCSS():up==="svg"?_m=lp.to2dCSS():Cm=[lp.props[0],lp.props[1],lp.props[2],lp.props[3],lp.props[4],lp.props[5],lp.props[6],lp.props[7],lp.props[8],lp.props[9],lp.props[10],lp.props[11],lp.props[12],lp.props[13],lp.props[14],lp.props[15]],Rm=am}cp<=pp?(jp=new LetterProps(Rm,tm,om,em,_m,Cm),this.renderedLetters.push(jp),cp+=1,this.lettersChangedFlag=!0):(jp=this.renderedLetters[pp],this.lettersChangedFlag=jp.update(Rm,tm,om,em,_m,Cm)||this.lettersChangedFlag)}}},TextAnimatorProperty.prototype.getValue=function(){this._elem.globalData.frameId!==this._frameId&&(this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties())},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[],extendPrototype([DynamicPropertyContainer],TextAnimatorProperty);function ITextElement(){}ITextElement.prototype.initElement=function(_d,rp,np){this.lettersChangedFlag=!0,this.initFrame(),this.initBaseData(_d,rp,np),this.textProperty=new TextProperty(this,_d.t,this.dynamicProperties),this.textAnimator=new TextAnimatorProperty(_d.t,this.renderType,this),this.initTransform(_d,rp,np),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide(),this.textAnimator.searchProperties(this.dynamicProperties)},ITextElement.prototype.prepareFrame=function(_d){this._mdf=!1,this.prepareRenderableFrame(_d),this.prepareProperties(_d,this.isInRange)},ITextElement.prototype.createPathShape=function(_d,rp){var np,ap=rp.length,sp,lp="";for(np=0;np<ap;np+=1)rp[np].ty==="sh"&&(sp=rp[np].ks.k,lp+=buildShapeString(sp,sp.i.length,!0,_d));return lp},ITextElement.prototype.updateDocumentData=function(_d,rp){this.textProperty.updateDocumentData(_d,rp)},ITextElement.prototype.canResizeFont=function(_d){this.textProperty.canResizeFont(_d)},ITextElement.prototype.setMinimumFontSize=function(_d){this.textProperty.setMinimumFontSize(_d)},ITextElement.prototype.applyTextPropertiesToMatrix=function(_d,rp,np,ap,sp){switch(_d.ps&&rp.translate(_d.ps[0],_d.ps[1]+_d.ascent,0),rp.translate(0,-_d.ls,0),_d.j){case 1:rp.translate(_d.justifyOffset+(_d.boxWidth-_d.lineWidths[np]),0,0);break;case 2:rp.translate(_d.justifyOffset+(_d.boxWidth-_d.lineWidths[np])/2,0,0);break}rp.translate(ap,sp,0)},ITextElement.prototype.buildColor=function(_d){return"rgb("+Math.round(_d[0]*255)+","+Math.round(_d[1]*255)+","+Math.round(_d[2]*255)+")"},ITextElement.prototype.emptyProp=new LetterProps,ITextElement.prototype.destroy=function(){},ITextElement.prototype.validateText=function(){(this.textProperty._mdf||this.textProperty._isFirstFrame)&&(this.buildNewText(),this.textProperty._isFirstFrame=!1,this.textProperty._mdf=!1)};var emptyShapeData={shapes:[]};function SVGTextLottieElement(_d,rp,np){this.textSpans=[],this.renderType="svg",this.initElement(_d,rp,np)}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],SVGTextLottieElement),SVGTextLottieElement.prototype.createContent=function(){this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=createNS("text"))},SVGTextLottieElement.prototype.buildTextContents=function(_d){for(var rp=0,np=_d.length,ap=[],sp="";rp<np;)_d[rp]==="\r"||_d[rp]===""?(ap.push(sp),sp=""):sp+=_d[rp],rp+=1;return ap.push(sp),ap},SVGTextLottieElement.prototype.buildShapeData=function(_d,rp){if(_d.shapes&&_d.shapes.length){var np=_d.shapes[0];if(np.it){var ap=np.it[np.it.length-1];ap.s&&(ap.s.k[0]=rp,ap.s.k[1]=rp)}}return _d},SVGTextLottieElement.prototype.buildNewText=function(){this.addDynamicProperty(this);var _d,rp,np=this.textProperty.currentData;this.renderedLetters=createSizedArray(np?np.l.length:0),np.fc?this.layerElement.setAttribute("fill",this.buildColor(np.fc)):this.layerElement.setAttribute("fill","rgba(0,0,0,0)"),np.sc&&(this.layerElement.setAttribute("stroke",this.buildColor(np.sc)),this.layerElement.setAttribute("stroke-width",np.sw)),this.layerElement.setAttribute("font-size",np.finalSize);var ap=this.globalData.fontManager.getFontByName(np.f);if(ap.fClass)this.layerElement.setAttribute("class",ap.fClass);else{this.layerElement.setAttribute("font-family",ap.fFamily);var sp=np.fWeight,lp=np.fStyle;this.layerElement.setAttribute("font-style",lp),this.layerElement.setAttribute("font-weight",sp)}this.layerElement.setAttribute("aria-label",np.t);var up=np.l||[],cp=!!this.globalData.fontManager.chars;rp=up.length;var dp,fp=this.mHelper,pp="",hp=this.data.singleShape,mp=0,gp=0,vp=!0,xp=np.tr*.001*np.finalSize;if(hp&&!cp&&!np.sz){var Sp=this.textContainer,yp="start";switch(np.j){case 1:yp="end";break;case 2:yp="middle";break;default:yp="start";break}Sp.setAttribute("text-anchor",yp),Sp.setAttribute("letter-spacing",xp);var bp=this.buildTextContents(np.finalText);for(rp=bp.length,gp=np.ps?np.ps[1]+np.ascent:0,_d=0;_d<rp;_d+=1)dp=this.textSpans[_d].span||createNS("tspan"),dp.textContent=bp[_d],dp.setAttribute("x",0),dp.setAttribute("y",gp),dp.style.display="inherit",Sp.appendChild(dp),this.textSpans[_d]||(this.textSpans[_d]={span:null,glyph:null}),this.textSpans[_d].span=dp,gp+=np.finalLineHeight;this.layerElement.appendChild(Sp)}else{var Ep=this.textSpans.length,wp;for(_d=0;_d<rp;_d+=1){if(this.textSpans[_d]||(this.textSpans[_d]={span:null,childSpan:null,glyph:null}),!cp||!hp||_d===0){if(dp=Ep>_d?this.textSpans[_d].span:createNS(cp?"g":"text"),Ep<=_d){if(dp.setAttribute("stroke-linecap","butt"),dp.setAttribute("stroke-linejoin","round"),dp.setAttribute("stroke-miterlimit","4"),this.textSpans[_d].span=dp,cp){var _p=createNS("g");dp.appendChild(_p),this.textSpans[_d].childSpan=_p}this.textSpans[_d].span=dp,this.layerElement.appendChild(dp)}dp.style.display="inherit"}if(fp.reset(),hp&&(up[_d].n&&(mp=-xp,gp+=np.yOffset,gp+=vp?1:0,vp=!1),this.applyTextPropertiesToMatrix(np,fp,up[_d].line,mp,gp),mp+=up[_d].l||0,mp+=xp),cp){wp=this.globalData.fontManager.getCharData(np.finalText[_d],ap.fStyle,this.globalData.fontManager.getFontByName(np.f).fFamily);var Rp;if(wp.t===1)Rp=new SVGCompElement(wp.data,this.globalData,this);else{var $p=emptyShapeData;wp.data&&wp.data.shapes&&($p=this.buildShapeData(wp.data,np.finalSize)),Rp=new SVGShapeElement($p,this.globalData,this)}if(this.textSpans[_d].glyph){var Cp=this.textSpans[_d].glyph;this.textSpans[_d].childSpan.removeChild(Cp.layerElement),Cp.destroy()}this.textSpans[_d].glyph=Rp,Rp._debug=!0,Rp.prepareFrame(0),Rp.renderFrame(),this.textSpans[_d].childSpan.appendChild(Rp.layerElement),wp.t===1&&this.textSpans[_d].childSpan.setAttribute("transform","scale("+np.finalSize/100+","+np.finalSize/100+")")}else hp&&dp.setAttribute("transform","translate("+fp.props[12]+","+fp.props[13]+")"),dp.textContent=up[_d].val,dp.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve")}hp&&dp&&dp.setAttribute("d",pp)}for(;_d<this.textSpans.length;)this.textSpans[_d].span.style.display="none",_d+=1;this._sizeChanged=!0},SVGTextLottieElement.prototype.sourceRectAtTime=function(){if(this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderInnerContent(),this._sizeChanged){this._sizeChanged=!1;var _d=this.layerElement.getBBox();this.bbox={top:_d.y,left:_d.x,width:_d.width,height:_d.height}}return this.bbox},SVGTextLottieElement.prototype.getValue=function(){var _d,rp=this.textSpans.length,np;for(this.renderedFrame=this.comp.renderedFrame,_d=0;_d<rp;_d+=1)np=this.textSpans[_d].glyph,np&&(np.prepareFrame(this.comp.renderedFrame-this.data.st),np._mdf&&(this._mdf=!0))},SVGTextLottieElement.prototype.renderInnerContent=function(){if(this.validateText(),(!this.data.singleShape||this._mdf)&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){this._sizeChanged=!0;var _d,rp,np=this.textAnimator.renderedLetters,ap=this.textProperty.currentData.l;rp=ap.length;var sp,lp,up;for(_d=0;_d<rp;_d+=1)ap[_d].n||(sp=np[_d],lp=this.textSpans[_d].span,up=this.textSpans[_d].glyph,up&&up.renderFrame(),sp._mdf.m&&lp.setAttribute("transform",sp.m),sp._mdf.o&&lp.setAttribute("opacity",sp.o),sp._mdf.sw&&lp.setAttribute("stroke-width",sp.sw),sp._mdf.sc&&lp.setAttribute("stroke",sp.sc),sp._mdf.fc&&lp.setAttribute("fill",sp.fc))}};function ISolidElement(_d,rp,np){this.initElement(_d,rp,np)}extendPrototype([IImageElement],ISolidElement),ISolidElement.prototype.createContent=function(){var _d=createNS("rect");_d.setAttribute("width",this.data.sw),_d.setAttribute("height",this.data.sh),_d.setAttribute("fill",this.data.sc),this.layerElement.appendChild(_d)};function NullElement(_d,rp,np){this.initFrame(),this.initBaseData(_d,rp,np),this.initFrame(),this.initTransform(_d,rp,np),this.initHierarchy()}NullElement.prototype.prepareFrame=function(_d){this.prepareProperties(_d,!0)},NullElement.prototype.renderFrame=function(){},NullElement.prototype.getBaseElement=function(){return null},NullElement.prototype.destroy=function(){},NullElement.prototype.sourceRectAtTime=function(){},NullElement.prototype.hide=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement],NullElement);function SVGRendererBase(){}extendPrototype([BaseRenderer],SVGRendererBase),SVGRendererBase.prototype.createNull=function(_d){return new NullElement(_d,this.globalData,this)},SVGRendererBase.prototype.createShape=function(_d){return new SVGShapeElement(_d,this.globalData,this)},SVGRendererBase.prototype.createText=function(_d){return new SVGTextLottieElement(_d,this.globalData,this)},SVGRendererBase.prototype.createImage=function(_d){return new IImageElement(_d,this.globalData,this)},SVGRendererBase.prototype.createSolid=function(_d){return new ISolidElement(_d,this.globalData,this)},SVGRendererBase.prototype.configAnimation=function(_d){this.svgElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.svgElement.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),this.renderConfig.viewBoxSize?this.svgElement.setAttribute("viewBox",this.renderConfig.viewBoxSize):this.svgElement.setAttribute("viewBox","0 0 "+_d.w+" "+_d.h),this.renderConfig.viewBoxOnly||(this.svgElement.setAttribute("width",_d.w),this.svgElement.setAttribute("height",_d.h),this.svgElement.style.width="100%",this.svgElement.style.height="100%",this.svgElement.style.transform="translate3d(0,0,0)",this.svgElement.style.contentVisibility=this.renderConfig.contentVisibility),this.renderConfig.width&&this.svgElement.setAttribute("width",this.renderConfig.width),this.renderConfig.height&&this.svgElement.setAttribute("height",this.renderConfig.height),this.renderConfig.className&&this.svgElement.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.svgElement.setAttribute("id",this.renderConfig.id),this.renderConfig.focusable!==void 0&&this.svgElement.setAttribute("focusable",this.renderConfig.focusable),this.svgElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.svgElement);var rp=this.globalData.defs;this.setupGlobalData(_d,rp),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.data=_d;var np=createNS("clipPath"),ap=createNS("rect");ap.setAttribute("width",_d.w),ap.setAttribute("height",_d.h),ap.setAttribute("x",0),ap.setAttribute("y",0);var sp=createElementID();np.setAttribute("id",sp),np.appendChild(ap),this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+sp+")"),rp.appendChild(np),this.layers=_d.layers,this.elements=createSizedArray(_d.layers.length)},SVGRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.layerElement=null,this.globalData.defs=null;var _d,rp=this.layers?this.layers.length:0;for(_d=0;_d<rp;_d+=1)this.elements[_d]&&this.elements[_d].destroy&&this.elements[_d].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRendererBase.prototype.updateContainerSize=function(){},SVGRendererBase.prototype.findIndexByInd=function(_d){var rp=0,np=this.layers.length;for(rp=0;rp<np;rp+=1)if(this.layers[rp].ind===_d)return rp;return-1},SVGRendererBase.prototype.buildItem=function(_d){var rp=this.elements;if(!(rp[_d]||this.layers[_d].ty===99)){rp[_d]=!0;var np=this.createItem(this.layers[_d]);if(rp[_d]=np,getExpressionsPlugin()&&(this.layers[_d].ty===0&&this.globalData.projectInterface.registerComposition(np),np.initExpressions()),this.appendElementInPos(np,_d),this.layers[_d].tt){var ap="tp"in this.layers[_d]?this.findIndexByInd(this.layers[_d].tp):_d-1;if(ap===-1)return;if(!this.elements[ap]||this.elements[ap]===!0)this.buildItem(ap),this.addPendingElement(np);else{var sp=rp[ap],lp=sp.getMatte(this.layers[_d].tt);np.setMatte(lp)}}}},SVGRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var _d=this.pendingElements.pop();if(_d.checkParenting(),_d.data.tt)for(var rp=0,np=this.elements.length;rp<np;){if(this.elements[rp]===_d){var ap="tp"in _d.data?this.findIndexByInd(_d.data.tp):rp-1,sp=this.elements[ap],lp=sp.getMatte(this.layers[rp].tt);_d.setMatte(lp);break}rp+=1}}},SVGRendererBase.prototype.renderFrame=function(_d){if(!(this.renderedFrame===_d||this.destroyed)){_d===null?_d=this.renderedFrame:this.renderedFrame=_d,this.globalData.frameNum=_d,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=_d,this.globalData._mdf=!1;var rp,np=this.layers.length;for(this.completeLayers||this.checkLayers(_d),rp=np-1;rp>=0;rp-=1)(this.completeLayers||this.elements[rp])&&this.elements[rp].prepareFrame(_d-this.layers[rp].st);if(this.globalData._mdf)for(rp=0;rp<np;rp+=1)(this.completeLayers||this.elements[rp])&&this.elements[rp].renderFrame()}},SVGRendererBase.prototype.appendElementInPos=function(_d,rp){var np=_d.getBaseElement();if(np){for(var ap=0,sp;ap<rp;)this.elements[ap]&&this.elements[ap]!==!0&&this.elements[ap].getBaseElement()&&(sp=this.elements[ap].getBaseElement()),ap+=1;sp?this.layerElement.insertBefore(np,sp):this.layerElement.appendChild(np)}},SVGRendererBase.prototype.hide=function(){this.layerElement.style.display="none"},SVGRendererBase.prototype.show=function(){this.layerElement.style.display="block"};function ICompElement(){}extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement,RenderableDOMElement],ICompElement),ICompElement.prototype.initElement=function(_d,rp,np){this.initFrame(),this.initBaseData(_d,rp,np),this.initTransform(_d,rp,np),this.initRenderable(),this.initHierarchy(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),(this.data.xt||!rp.progressiveLoad)&&this.buildAllItems(),this.hide()},ICompElement.prototype.prepareFrame=function(_d){if(this._mdf=!1,this.prepareRenderableFrame(_d),this.prepareProperties(_d,this.isInRange),!(!this.isInRange&&!this.data.xt)){if(this.tm._placeholder)this.renderedFrame=_d/this.data.sr;else{var rp=this.tm.v;rp===this.data.op&&(rp=this.data.op-1),this.renderedFrame=rp}var np,ap=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),np=ap-1;np>=0;np-=1)(this.completeLayers||this.elements[np])&&(this.elements[np].prepareFrame(this.renderedFrame-this.layers[np].st),this.elements[np]._mdf&&(this._mdf=!0))}},ICompElement.prototype.renderInnerContent=function(){var _d,rp=this.layers.length;for(_d=0;_d<rp;_d+=1)(this.completeLayers||this.elements[_d])&&this.elements[_d].renderFrame()},ICompElement.prototype.setElements=function(_d){this.elements=_d},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroyElements=function(){var _d,rp=this.layers.length;for(_d=0;_d<rp;_d+=1)this.elements[_d]&&this.elements[_d].destroy()},ICompElement.prototype.destroy=function(){this.destroyElements(),this.destroyBaseElement()};function SVGCompElement(_d,rp,np){this.layers=_d.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(_d,rp,np),this.tm=_d.tm?PropertyFactory.getProp(this,_d.tm,0,rp.frameRate,this):{_placeholder:!0}}extendPrototype([SVGRendererBase,ICompElement,SVGBaseElement],SVGCompElement),SVGCompElement.prototype.createComp=function(_d){return new SVGCompElement(_d,this.globalData,this)};function SVGRenderer(_d,rp){this.animationItem=_d,this.layers=null,this.renderedFrame=-1,this.svgElement=createNS("svg");var np="";if(rp&&rp.title){var ap=createNS("title"),sp=createElementID();ap.setAttribute("id",sp),ap.textContent=rp.title,this.svgElement.appendChild(ap),np+=sp}if(rp&&rp.description){var lp=createNS("desc"),up=createElementID();lp.setAttribute("id",up),lp.textContent=rp.description,this.svgElement.appendChild(lp),np+=" "+up}np&&this.svgElement.setAttribute("aria-labelledby",np);var cp=createNS("defs");this.svgElement.appendChild(cp);var dp=createNS("g");this.svgElement.appendChild(dp),this.layerElement=dp,this.renderConfig={preserveAspectRatio:rp&&rp.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:rp&&rp.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:rp&&rp.contentVisibility||"visible",progressiveLoad:rp&&rp.progressiveLoad||!1,hideOnTransparent:!(rp&&rp.hideOnTransparent===!1),viewBoxOnly:rp&&rp.viewBoxOnly||!1,viewBoxSize:rp&&rp.viewBoxSize||!1,className:rp&&rp.className||"",id:rp&&rp.id||"",focusable:rp&&rp.focusable,filterSize:{width:rp&&rp.filterSize&&rp.filterSize.width||"100%",height:rp&&rp.filterSize&&rp.filterSize.height||"100%",x:rp&&rp.filterSize&&rp.filterSize.x||"0%",y:rp&&rp.filterSize&&rp.filterSize.y||"0%"},width:rp&&rp.width,height:rp&&rp.height,runExpressions:!rp||rp.runExpressions===void 0||rp.runExpressions},this.globalData={_mdf:!1,frameNum:-1,defs:cp,renderConfig:this.renderConfig},this.elements=[],this.pendingElements=[],this.destroyed=!1,this.rendererType="svg"}extendPrototype([SVGRendererBase],SVGRenderer),SVGRenderer.prototype.createComp=function(_d){return new SVGCompElement(_d,this.globalData,this)};function ShapeTransformManager(){this.sequences={},this.sequenceList=[],this.transform_key_count=0}ShapeTransformManager.prototype={addTransformSequence:function(rp){var np,ap=rp.length,sp="_";for(np=0;np<ap;np+=1)sp+=rp[np].transform.key+"_";var lp=this.sequences[sp];return lp||(lp={transforms:[].concat(rp),finalTransform:new Matrix,_mdf:!1},this.sequences[sp]=lp,this.sequenceList.push(lp)),lp},processSequence:function(rp,np){for(var ap=0,sp=rp.transforms.length,lp=np;ap<sp&&!np;){if(rp.transforms[ap].transform.mProps._mdf){lp=!0;break}ap+=1}if(lp)for(rp.finalTransform.reset(),ap=sp-1;ap>=0;ap-=1)rp.finalTransform.multiply(rp.transforms[ap].transform.mProps.v);rp._mdf=lp},processSequences:function(rp){var np,ap=this.sequenceList.length;for(np=0;np<ap;np+=1)this.processSequence(this.sequenceList[np],rp)},getNewKey:function(){return this.transform_key_count+=1,"_"+this.transform_key_count}};var lumaLoader=function(){var rp="__lottie_element_luma_buffer",np=null,ap=null,sp=null;function lp(){var dp=createNS("svg"),fp=createNS("filter"),pp=createNS("feColorMatrix");return fp.setAttribute("id",rp),pp.setAttribute("type","matrix"),pp.setAttribute("color-interpolation-filters","sRGB"),pp.setAttribute("values","0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0"),fp.appendChild(pp),dp.appendChild(fp),dp.setAttribute("id",rp+"_svg"),featureSupport.svgLumaHidden&&(dp.style.display="none"),dp}function up(){np||(sp=lp(),document.body.appendChild(sp),np=createTag("canvas"),ap=np.getContext("2d"),ap.filter="url(#"+rp+")",ap.fillStyle="rgba(0,0,0,0)",ap.fillRect(0,0,1,1))}function cp(dp){return np||up(),np.width=dp.width,np.height=dp.height,ap.filter="url(#"+rp+")",np}return{load:up,get:cp}};function createCanvas(_d,rp){if(featureSupport.offscreenCanvas)return new OffscreenCanvas(_d,rp);var np=createTag("canvas");return np.width=_d,np.height=rp,np}var assetLoader=function(){return{loadLumaCanvas:lumaLoader.load,getLumaCanvas:lumaLoader.get,createCanvas}}(),registeredEffects={};function CVEffects(_d){var rp,np=_d.data.ef?_d.data.ef.length:0;this.filters=[];var ap;for(rp=0;rp<np;rp+=1){ap=null;var sp=_d.data.ef[rp].ty;if(registeredEffects[sp]){var lp=registeredEffects[sp].effect;ap=new lp(_d.effectsManager.effectElements[rp],_d)}ap&&this.filters.push(ap)}this.filters.length&&_d.addRenderableComponent(this)}CVEffects.prototype.renderFrame=function(_d){var rp,np=this.filters.length;for(rp=0;rp<np;rp+=1)this.filters[rp].renderFrame(_d)},CVEffects.prototype.getEffects=function(_d){var rp,np=this.filters.length,ap=[];for(rp=0;rp<np;rp+=1)this.filters[rp].type===_d&&ap.push(this.filters[rp]);return ap};function registerEffect(_d,rp){registeredEffects[_d]={effect:rp}}function CVMaskElement(_d,rp){this.data=_d,this.element=rp,this.masksProperties=this.data.masksProperties||[],this.viewData=createSizedArray(this.masksProperties.length);var np,ap=this.masksProperties.length,sp=!1;for(np=0;np<ap;np+=1)this.masksProperties[np].mode!=="n"&&(sp=!0),this.viewData[np]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[np],3);this.hasMasks=sp,sp&&this.element.addRenderableComponent(this)}CVMaskElement.prototype.renderFrame=function(){if(this.hasMasks){var _d=this.element.finalTransform.mat,rp=this.element.canvasContext,np,ap=this.masksProperties.length,sp,lp,up;for(rp.beginPath(),np=0;np<ap;np+=1)if(this.masksProperties[np].mode!=="n"){this.masksProperties[np].inv&&(rp.moveTo(0,0),rp.lineTo(this.element.globalData.compSize.w,0),rp.lineTo(this.element.globalData.compSize.w,this.element.globalData.compSize.h),rp.lineTo(0,this.element.globalData.compSize.h),rp.lineTo(0,0)),up=this.viewData[np].v,sp=_d.applyToPointArray(up.v[0][0],up.v[0][1],0),rp.moveTo(sp[0],sp[1]);var cp,dp=up._length;for(cp=1;cp<dp;cp+=1)lp=_d.applyToTriplePoints(up.o[cp-1],up.i[cp],up.v[cp]),rp.bezierCurveTo(lp[0],lp[1],lp[2],lp[3],lp[4],lp[5]);lp=_d.applyToTriplePoints(up.o[cp-1],up.i[0],up.v[0]),rp.bezierCurveTo(lp[0],lp[1],lp[2],lp[3],lp[4],lp[5])}this.element.globalData.renderer.save(!0),rp.clip()}},CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty,CVMaskElement.prototype.destroy=function(){this.element=null};function CVBaseElement(){}var operationsMap={1:"source-in",2:"source-out",3:"source-in",4:"source-out"};CVBaseElement.prototype={createElements:function(){},initRendererElement:function(){},createContainerElements:function(){if(this.data.tt>=1){this.buffers=[];var rp=this.globalData.canvasContext,np=assetLoader.createCanvas(rp.canvas.width,rp.canvas.height);this.buffers.push(np);var ap=assetLoader.createCanvas(rp.canvas.width,rp.canvas.height);this.buffers.push(ap),this.data.tt>=3&&!document._isProxy&&assetLoader.loadLumaCanvas()}this.canvasContext=this.globalData.canvasContext,this.transformCanvas=this.globalData.transformCanvas,this.renderableEffectsManager=new CVEffects(this),this.searchEffectTransforms()},createContent:function(){},setBlendMode:function(){var rp=this.globalData;if(rp.blendMode!==this.data.bm){rp.blendMode=this.data.bm;var np=getBlendMode(this.data.bm);rp.canvasContext.globalCompositeOperation=np}},createRenderableComponents:function(){this.maskManager=new CVMaskElement(this.data,this),this.transformEffects=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT)},hideElement:function(){!this.hidden&&(!this.isInRange||this.isTransparent)&&(this.hidden=!0)},showElement:function(){this.isInRange&&!this.isTransparent&&(this.hidden=!1,this._isFirstFrame=!0,this.maskManager._isFirstFrame=!0)},clearCanvas:function(rp){rp.clearRect(this.transformCanvas.tx,this.transformCanvas.ty,this.transformCanvas.w*this.transformCanvas.sx,this.transformCanvas.h*this.transformCanvas.sy)},prepareLayer:function(){if(this.data.tt>=1){var rp=this.buffers[0],np=rp.getContext("2d");this.clearCanvas(np),np.drawImage(this.canvasContext.canvas,0,0),this.currentTransform=this.canvasContext.getTransform(),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform)}},exitLayer:function(){if(this.data.tt>=1){var rp=this.buffers[1],np=rp.getContext("2d");this.clearCanvas(np),np.drawImage(this.canvasContext.canvas,0,0),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform);var ap=this.comp.getElementById("tp"in this.data?this.data.tp:this.data.ind-1);if(ap.renderFrame(!0),this.canvasContext.setTransform(1,0,0,1,0,0),this.data.tt>=3&&!document._isProxy){var sp=assetLoader.getLumaCanvas(this.canvasContext.canvas),lp=sp.getContext("2d");lp.drawImage(this.canvasContext.canvas,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.drawImage(sp,0,0)}this.canvasContext.globalCompositeOperation=operationsMap[this.data.tt],this.canvasContext.drawImage(rp,0,0),this.canvasContext.globalCompositeOperation="destination-over",this.canvasContext.drawImage(this.buffers[0],0,0),this.canvasContext.setTransform(this.currentTransform),this.canvasContext.globalCompositeOperation="source-over"}},renderFrame:function(rp){if(!(this.hidden||this.data.hd)&&!(this.data.td===1&&!rp)){this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.setBlendMode();var np=this.data.ty===0;this.prepareLayer(),this.globalData.renderer.save(np),this.globalData.renderer.ctxTransform(this.finalTransform.localMat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.localOpacity),this.renderInnerContent(),this.globalData.renderer.restore(np),this.exitLayer(),this.maskManager.hasMasks&&this.globalData.renderer.restore(!0),this._isFirstFrame&&(this._isFirstFrame=!1)}},destroy:function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager.destroy()},mHelper:new Matrix},CVBaseElement.prototype.hide=CVBaseElement.prototype.hideElement,CVBaseElement.prototype.show=CVBaseElement.prototype.showElement;function CVShapeData(_d,rp,np,ap){this.styledShapes=[],this.tr=[0,0,0,0,0,0];var sp=4;rp.ty==="rc"?sp=5:rp.ty==="el"?sp=6:rp.ty==="sr"&&(sp=7),this.sh=ShapePropertyFactory.getShapeProp(_d,rp,sp,_d);var lp,up=np.length,cp;for(lp=0;lp<up;lp+=1)np[lp].closed||(cp={transforms:ap.addTransformSequence(np[lp].transforms),trNodes:[]},this.styledShapes.push(cp),np[lp].elements.push(cp))}CVShapeData.prototype.setAsAnimated=SVGShapeData.prototype.setAsAnimated;function CVShapeElement(_d,rp,np){this.shapes=[],this.shapesData=_d.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this.transformsManager=new ShapeTransformManager,this.initElement(_d,rp,np)}extendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement],CVShapeElement),CVShapeElement.prototype.initElement=RenderableDOMElement.prototype.initElement,CVShapeElement.prototype.transformHelper={opacity:1,_opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[])},CVShapeElement.prototype.createStyleElement=function(_d,rp){var np={data:_d,type:_d.ty,preTransforms:this.transformsManager.addTransformSequence(rp),transforms:[],elements:[],closed:_d.hd===!0},ap={};if(_d.ty==="fl"||_d.ty==="st"?(ap.c=PropertyFactory.getProp(this,_d.c,1,255,this),ap.c.k||(np.co="rgb("+bmFloor(ap.c.v[0])+","+bmFloor(ap.c.v[1])+","+bmFloor(ap.c.v[2])+")")):(_d.ty==="gf"||_d.ty==="gs")&&(ap.s=PropertyFactory.getProp(this,_d.s,1,null,this),ap.e=PropertyFactory.getProp(this,_d.e,1,null,this),ap.h=PropertyFactory.getProp(this,_d.h||{k:0},0,.01,this),ap.a=PropertyFactory.getProp(this,_d.a||{k:0},0,degToRads,this),ap.g=new GradientProperty(this,_d.g,this)),ap.o=PropertyFactory.getProp(this,_d.o,0,.01,this),_d.ty==="st"||_d.ty==="gs"){if(np.lc=lineCapEnum[_d.lc||2],np.lj=lineJoinEnum[_d.lj||2],_d.lj==1&&(np.ml=_d.ml),ap.w=PropertyFactory.getProp(this,_d.w,0,null,this),ap.w.k||(np.wi=ap.w.v),_d.d){var sp=new DashProperty(this,_d.d,"canvas",this);ap.d=sp,ap.d.k||(np.da=ap.d.dashArray,np.do=ap.d.dashoffset[0])}}else np.r=_d.r===2?"evenodd":"nonzero";return this.stylesList.push(np),ap.style=np,ap},CVShapeElement.prototype.createGroupElement=function(){var _d={it:[],prevViewData:[]};return _d},CVShapeElement.prototype.createTransformElement=function(_d){var rp={transform:{opacity:1,_opMdf:!1,key:this.transformsManager.getNewKey(),op:PropertyFactory.getProp(this,_d.o,0,.01,this),mProps:TransformPropertyFactory.getTransformProperty(this,_d,this)}};return rp},CVShapeElement.prototype.createShapeElement=function(_d){var rp=new CVShapeData(this,_d,this.stylesList,this.transformsManager);return this.shapes.push(rp),this.addShapeToModifiers(rp),rp},CVShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var _d,rp=this.itemsData.length;for(_d=0;_d<rp;_d+=1)this.prevViewData[_d]=this.itemsData[_d];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),rp=this.dynamicProperties.length,_d=0;_d<rp;_d+=1)this.dynamicProperties[_d].getValue();this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame)},CVShapeElement.prototype.addTransformToStyleList=function(_d){var rp,np=this.stylesList.length;for(rp=0;rp<np;rp+=1)this.stylesList[rp].closed||this.stylesList[rp].transforms.push(_d)},CVShapeElement.prototype.removeTransformFromStyleList=function(){var _d,rp=this.stylesList.length;for(_d=0;_d<rp;_d+=1)this.stylesList[_d].closed||this.stylesList[_d].transforms.pop()},CVShapeElement.prototype.closeStyles=function(_d){var rp,np=_d.length;for(rp=0;rp<np;rp+=1)_d[rp].closed=!0},CVShapeElement.prototype.searchShapes=function(_d,rp,np,ap,sp){var lp,up=_d.length-1,cp,dp,fp=[],pp=[],hp,mp,gp,vp=[].concat(sp);for(lp=up;lp>=0;lp-=1){if(hp=this.searchProcessedElement(_d[lp]),hp?rp[lp]=np[hp-1]:_d[lp]._shouldRender=ap,_d[lp].ty==="fl"||_d[lp].ty==="st"||_d[lp].ty==="gf"||_d[lp].ty==="gs")hp?rp[lp].style.closed=!1:rp[lp]=this.createStyleElement(_d[lp],vp),fp.push(rp[lp].style);else if(_d[lp].ty==="gr"){if(!hp)rp[lp]=this.createGroupElement(_d[lp]);else for(dp=rp[lp].it.length,cp=0;cp<dp;cp+=1)rp[lp].prevViewData[cp]=rp[lp].it[cp];this.searchShapes(_d[lp].it,rp[lp].it,rp[lp].prevViewData,ap,vp)}else _d[lp].ty==="tr"?(hp||(gp=this.createTransformElement(_d[lp]),rp[lp]=gp),vp.push(rp[lp]),this.addTransformToStyleList(rp[lp])):_d[lp].ty==="sh"||_d[lp].ty==="rc"||_d[lp].ty==="el"||_d[lp].ty==="sr"?hp||(rp[lp]=this.createShapeElement(_d[lp])):_d[lp].ty==="tm"||_d[lp].ty==="rd"||_d[lp].ty==="pb"||_d[lp].ty==="zz"||_d[lp].ty==="op"?(hp?(mp=rp[lp],mp.closed=!1):(mp=ShapeModifiers.getModifier(_d[lp].ty),mp.init(this,_d[lp]),rp[lp]=mp,this.shapeModifiers.push(mp)),pp.push(mp)):_d[lp].ty==="rp"&&(hp?(mp=rp[lp],mp.closed=!0):(mp=ShapeModifiers.getModifier(_d[lp].ty),rp[lp]=mp,mp.init(this,_d,lp,rp),this.shapeModifiers.push(mp),ap=!1),pp.push(mp));this.addProcessedElement(_d[lp],lp+1)}for(this.removeTransformFromStyleList(),this.closeStyles(fp),up=pp.length,lp=0;lp<up;lp+=1)pp[lp].closed=!0},CVShapeElement.prototype.renderInnerContent=function(){this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame),this.renderShape(this.transformHelper,this.shapesData,this.itemsData,!0)},CVShapeElement.prototype.renderShapeTransform=function(_d,rp){(_d._opMdf||rp.op._mdf||this._isFirstFrame)&&(rp.opacity=_d.opacity,rp.opacity*=rp.op.v,rp._opMdf=!0)},CVShapeElement.prototype.drawLayer=function(){var _d,rp=this.stylesList.length,np,ap,sp,lp,up,cp,dp=this.globalData.renderer,fp=this.globalData.canvasContext,pp,hp;for(_d=0;_d<rp;_d+=1)if(hp=this.stylesList[_d],pp=hp.type,!((pp==="st"||pp==="gs")&&hp.wi===0||!hp.data._shouldRender||hp.coOp===0||this.globalData.currentGlobalAlpha===0)){for(dp.save(),up=hp.elements,pp==="st"||pp==="gs"?(dp.ctxStrokeStyle(pp==="st"?hp.co:hp.grd),dp.ctxLineWidth(hp.wi),dp.ctxLineCap(hp.lc),dp.ctxLineJoin(hp.lj),dp.ctxMiterLimit(hp.ml||0)):dp.ctxFillStyle(pp==="fl"?hp.co:hp.grd),dp.ctxOpacity(hp.coOp),pp!=="st"&&pp!=="gs"&&fp.beginPath(),dp.ctxTransform(hp.preTransforms.finalTransform.props),ap=up.length,np=0;np<ap;np+=1){for((pp==="st"||pp==="gs")&&(fp.beginPath(),hp.da&&(fp.setLineDash(hp.da),fp.lineDashOffset=hp.do)),cp=up[np].trNodes,lp=cp.length,sp=0;sp<lp;sp+=1)cp[sp].t==="m"?fp.moveTo(cp[sp].p[0],cp[sp].p[1]):cp[sp].t==="c"?fp.bezierCurveTo(cp[sp].pts[0],cp[sp].pts[1],cp[sp].pts[2],cp[sp].pts[3],cp[sp].pts[4],cp[sp].pts[5]):fp.closePath();(pp==="st"||pp==="gs")&&(dp.ctxStroke(),hp.da&&fp.setLineDash(this.dashResetter))}pp!=="st"&&pp!=="gs"&&this.globalData.renderer.ctxFill(hp.r),dp.restore()}},CVShapeElement.prototype.renderShape=function(_d,rp,np,ap){var sp,lp=rp.length-1,up;for(up=_d,sp=lp;sp>=0;sp-=1)rp[sp].ty==="tr"?(up=np[sp].transform,this.renderShapeTransform(_d,up)):rp[sp].ty==="sh"||rp[sp].ty==="el"||rp[sp].ty==="rc"||rp[sp].ty==="sr"?this.renderPath(rp[sp],np[sp]):rp[sp].ty==="fl"?this.renderFill(rp[sp],np[sp],up):rp[sp].ty==="st"?this.renderStroke(rp[sp],np[sp],up):rp[sp].ty==="gf"||rp[sp].ty==="gs"?this.renderGradientFill(rp[sp],np[sp],up):rp[sp].ty==="gr"?this.renderShape(up,rp[sp].it,np[sp].it):rp[sp].ty;ap&&this.drawLayer()},CVShapeElement.prototype.renderStyledShape=function(_d,rp){if(this._isFirstFrame||rp._mdf||_d.transforms._mdf){var np=_d.trNodes,ap=rp.paths,sp,lp,up,cp=ap._length;np.length=0;var dp=_d.transforms.finalTransform;for(up=0;up<cp;up+=1){var fp=ap.shapes[up];if(fp&&fp.v){for(lp=fp._length,sp=1;sp<lp;sp+=1)sp===1&&np.push({t:"m",p:dp.applyToPointArray(fp.v[0][0],fp.v[0][1],0)}),np.push({t:"c",pts:dp.applyToTriplePoints(fp.o[sp-1],fp.i[sp],fp.v[sp])});lp===1&&np.push({t:"m",p:dp.applyToPointArray(fp.v[0][0],fp.v[0][1],0)}),fp.c&&lp&&(np.push({t:"c",pts:dp.applyToTriplePoints(fp.o[sp-1],fp.i[0],fp.v[0])}),np.push({t:"z"}))}}_d.trNodes=np}},CVShapeElement.prototype.renderPath=function(_d,rp){if(_d.hd!==!0&&_d._shouldRender){var np,ap=rp.styledShapes.length;for(np=0;np<ap;np+=1)this.renderStyledShape(rp.styledShapes[np],rp.sh)}},CVShapeElement.prototype.renderFill=function(_d,rp,np){var ap=rp.style;(rp.c._mdf||this._isFirstFrame)&&(ap.co="rgb("+bmFloor(rp.c.v[0])+","+bmFloor(rp.c.v[1])+","+bmFloor(rp.c.v[2])+")"),(rp.o._mdf||np._opMdf||this._isFirstFrame)&&(ap.coOp=rp.o.v*np.opacity)},CVShapeElement.prototype.renderGradientFill=function(_d,rp,np){var ap=rp.style,sp;if(!ap.grd||rp.g._mdf||rp.s._mdf||rp.e._mdf||_d.t!==1&&(rp.h._mdf||rp.a._mdf)){var lp=this.globalData.canvasContext,up=rp.s.v,cp=rp.e.v;if(_d.t===1)sp=lp.createLinearGradient(up[0],up[1],cp[0],cp[1]);else{var dp=Math.sqrt(Math.pow(up[0]-cp[0],2)+Math.pow(up[1]-cp[1],2)),fp=Math.atan2(cp[1]-up[1],cp[0]-up[0]),pp=rp.h.v;pp>=1?pp=.99:pp<=-1&&(pp=-.99);var hp=dp*pp,mp=Math.cos(fp+rp.a.v)*hp+up[0],gp=Math.sin(fp+rp.a.v)*hp+up[1];sp=lp.createRadialGradient(mp,gp,0,up[0],up[1],dp)}var vp,xp=_d.g.p,Sp=rp.g.c,yp=1;for(vp=0;vp<xp;vp+=1)rp.g._hasOpacity&&rp.g._collapsable&&(yp=rp.g.o[vp*2+1]),sp.addColorStop(Sp[vp*4]/100,"rgba("+Sp[vp*4+1]+","+Sp[vp*4+2]+","+Sp[vp*4+3]+","+yp+")");ap.grd=sp}ap.coOp=rp.o.v*np.opacity},CVShapeElement.prototype.renderStroke=function(_d,rp,np){var ap=rp.style,sp=rp.d;sp&&(sp._mdf||this._isFirstFrame)&&(ap.da=sp.dashArray,ap.do=sp.dashoffset[0]),(rp.c._mdf||this._isFirstFrame)&&(ap.co="rgb("+bmFloor(rp.c.v[0])+","+bmFloor(rp.c.v[1])+","+bmFloor(rp.c.v[2])+")"),(rp.o._mdf||np._opMdf||this._isFirstFrame)&&(ap.coOp=rp.o.v*np.opacity),(rp.w._mdf||this._isFirstFrame)&&(ap.wi=rp.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.itemsData.length=0};function CVTextElement(_d,rp,np){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this.initElement(_d,rp,np)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement],CVTextElement),CVTextElement.prototype.tHelper=createTag("canvas").getContext("2d"),CVTextElement.prototype.buildNewText=function(){var _d=this.textProperty.currentData;this.renderedLetters=createSizedArray(_d.l?_d.l.length:0);var rp=!1;_d.fc?(rp=!0,this.values.fill=this.buildColor(_d.fc)):this.values.fill="rgba(0,0,0,0)",this.fill=rp;var np=!1;_d.sc&&(np=!0,this.values.stroke=this.buildColor(_d.sc),this.values.sWidth=_d.sw);var ap=this.globalData.fontManager.getFontByName(_d.f),sp,lp,up=_d.l,cp=this.mHelper;this.stroke=np,this.values.fValue=_d.finalSize+"px "+this.globalData.fontManager.getFontByName(_d.f).fFamily,lp=_d.finalText.length;var dp,fp,pp,hp,mp,gp,vp,xp,Sp,yp,bp=this.data.singleShape,Ep=_d.tr*.001*_d.finalSize,wp=0,_p=0,Rp=!0,$p=0;for(sp=0;sp<lp;sp+=1){dp=this.globalData.fontManager.getCharData(_d.finalText[sp],ap.fStyle,this.globalData.fontManager.getFontByName(_d.f).fFamily),fp=dp&&dp.data||{},cp.reset(),bp&&up[sp].n&&(wp=-Ep,_p+=_d.yOffset,_p+=Rp?1:0,Rp=!1),mp=fp.shapes?fp.shapes[0].it:[],vp=mp.length,cp.scale(_d.finalSize/100,_d.finalSize/100),bp&&this.applyTextPropertiesToMatrix(_d,cp,up[sp].line,wp,_p),Sp=createSizedArray(vp-1);var Cp=0;for(gp=0;gp<vp;gp+=1)if(mp[gp].ty==="sh"){for(hp=mp[gp].ks.k.i.length,xp=mp[gp].ks.k,yp=[],pp=1;pp<hp;pp+=1)pp===1&&yp.push(cp.applyToX(xp.v[0][0],xp.v[0][1],0),cp.applyToY(xp.v[0][0],xp.v[0][1],0)),yp.push(cp.applyToX(xp.o[pp-1][0],xp.o[pp-1][1],0),cp.applyToY(xp.o[pp-1][0],xp.o[pp-1][1],0),cp.applyToX(xp.i[pp][0],xp.i[pp][1],0),cp.applyToY(xp.i[pp][0],xp.i[pp][1],0),cp.applyToX(xp.v[pp][0],xp.v[pp][1],0),cp.applyToY(xp.v[pp][0],xp.v[pp][1],0));yp.push(cp.applyToX(xp.o[pp-1][0],xp.o[pp-1][1],0),cp.applyToY(xp.o[pp-1][0],xp.o[pp-1][1],0),cp.applyToX(xp.i[0][0],xp.i[0][1],0),cp.applyToY(xp.i[0][0],xp.i[0][1],0),cp.applyToX(xp.v[0][0],xp.v[0][1],0),cp.applyToY(xp.v[0][0],xp.v[0][1],0)),Sp[Cp]=yp,Cp+=1}bp&&(wp+=up[sp].l,wp+=Ep),this.textSpans[$p]?this.textSpans[$p].elem=Sp:this.textSpans[$p]={elem:Sp},$p+=1}},CVTextElement.prototype.renderInnerContent=function(){this.validateText();var _d=this.canvasContext;_d.font=this.values.fValue,this.globalData.renderer.ctxLineCap("butt"),this.globalData.renderer.ctxLineJoin("miter"),this.globalData.renderer.ctxMiterLimit(4),this.data.singleShape||this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);var rp,np,ap,sp,lp,up,cp=this.textAnimator.renderedLetters,dp=this.textProperty.currentData.l;np=dp.length;var fp,pp=null,hp=null,mp=null,gp,vp,xp=this.globalData.renderer;for(rp=0;rp<np;rp+=1)if(!dp[rp].n){if(fp=cp[rp],fp&&(xp.save(),xp.ctxTransform(fp.p),xp.ctxOpacity(fp.o)),this.fill){for(fp&&fp.fc?pp!==fp.fc&&(xp.ctxFillStyle(fp.fc),pp=fp.fc):pp!==this.values.fill&&(pp=this.values.fill,xp.ctxFillStyle(this.values.fill)),gp=this.textSpans[rp].elem,sp=gp.length,this.globalData.canvasContext.beginPath(),ap=0;ap<sp;ap+=1)for(vp=gp[ap],up=vp.length,this.globalData.canvasContext.moveTo(vp[0],vp[1]),lp=2;lp<up;lp+=6)this.globalData.canvasContext.bezierCurveTo(vp[lp],vp[lp+1],vp[lp+2],vp[lp+3],vp[lp+4],vp[lp+5]);this.globalData.canvasContext.closePath(),xp.ctxFill()}if(this.stroke){for(fp&&fp.sw?mp!==fp.sw&&(mp=fp.sw,xp.ctxLineWidth(fp.sw)):mp!==this.values.sWidth&&(mp=this.values.sWidth,xp.ctxLineWidth(this.values.sWidth)),fp&&fp.sc?hp!==fp.sc&&(hp=fp.sc,xp.ctxStrokeStyle(fp.sc)):hp!==this.values.stroke&&(hp=this.values.stroke,xp.ctxStrokeStyle(this.values.stroke)),gp=this.textSpans[rp].elem,sp=gp.length,this.globalData.canvasContext.beginPath(),ap=0;ap<sp;ap+=1)for(vp=gp[ap],up=vp.length,this.globalData.canvasContext.moveTo(vp[0],vp[1]),lp=2;lp<up;lp+=6)this.globalData.canvasContext.bezierCurveTo(vp[lp],vp[lp+1],vp[lp+2],vp[lp+3],vp[lp+4],vp[lp+5]);this.globalData.canvasContext.closePath(),xp.ctxStroke()}fp&&this.globalData.renderer.restore()}};function CVImageElement(_d,rp,np){this.assetData=rp.getAssetData(_d.refId),this.img=rp.imageLoader.getAsset(this.assetData),this.initElement(_d,rp,np)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVImageElement),CVImageElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVImageElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVImageElement.prototype.createContent=function(){if(this.img.width&&(this.assetData.w!==this.img.width||this.assetData.h!==this.img.height)){var _d=createTag("canvas");_d.width=this.assetData.w,_d.height=this.assetData.h;var rp=_d.getContext("2d"),np=this.img.width,ap=this.img.height,sp=np/ap,lp=this.assetData.w/this.assetData.h,up,cp,dp=this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio;sp>lp&&dp==="xMidYMid slice"||sp<lp&&dp!=="xMidYMid slice"?(cp=ap,up=cp*lp):(up=np,cp=up/lp),rp.drawImage(this.img,(np-up)/2,(ap-cp)/2,up,cp,0,0,this.assetData.w,this.assetData.h),this.img=_d}},CVImageElement.prototype.renderInnerContent=function(){this.canvasContext.drawImage(this.img,0,0)},CVImageElement.prototype.destroy=function(){this.img=null};function CVSolidElement(_d,rp,np){this.initElement(_d,rp,np)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVSolidElement),CVSolidElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVSolidElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVSolidElement.prototype.renderInnerContent=function(){this.globalData.renderer.ctxFillStyle(this.data.sc),this.globalData.renderer.ctxFillRect(0,0,this.data.sw,this.data.sh)};function CanvasRendererBase(){}extendPrototype([BaseRenderer],CanvasRendererBase),CanvasRendererBase.prototype.createShape=function(_d){return new CVShapeElement(_d,this.globalData,this)},CanvasRendererBase.prototype.createText=function(_d){return new CVTextElement(_d,this.globalData,this)},CanvasRendererBase.prototype.createImage=function(_d){return new CVImageElement(_d,this.globalData,this)},CanvasRendererBase.prototype.createSolid=function(_d){return new CVSolidElement(_d,this.globalData,this)},CanvasRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,CanvasRendererBase.prototype.ctxTransform=function(_d){_d[0]===1&&_d[1]===0&&_d[4]===0&&_d[5]===1&&_d[12]===0&&_d[13]===0||this.canvasContext.transform(_d[0],_d[1],_d[4],_d[5],_d[12],_d[13])},CanvasRendererBase.prototype.ctxOpacity=function(_d){this.canvasContext.globalAlpha*=_d<0?0:_d},CanvasRendererBase.prototype.ctxFillStyle=function(_d){this.canvasContext.fillStyle=_d},CanvasRendererBase.prototype.ctxStrokeStyle=function(_d){this.canvasContext.strokeStyle=_d},CanvasRendererBase.prototype.ctxLineWidth=function(_d){this.canvasContext.lineWidth=_d},CanvasRendererBase.prototype.ctxLineCap=function(_d){this.canvasContext.lineCap=_d},CanvasRendererBase.prototype.ctxLineJoin=function(_d){this.canvasContext.lineJoin=_d},CanvasRendererBase.prototype.ctxMiterLimit=function(_d){this.canvasContext.miterLimit=_d},CanvasRendererBase.prototype.ctxFill=function(_d){this.canvasContext.fill(_d)},CanvasRendererBase.prototype.ctxFillRect=function(_d,rp,np,ap){this.canvasContext.fillRect(_d,rp,np,ap)},CanvasRendererBase.prototype.ctxStroke=function(){this.canvasContext.stroke()},CanvasRendererBase.prototype.reset=function(){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}this.contextData.reset()},CanvasRendererBase.prototype.save=function(){this.canvasContext.save()},CanvasRendererBase.prototype.restore=function(_d){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}_d&&(this.globalData.blendMode="source-over"),this.contextData.restore(_d)},CanvasRendererBase.prototype.configAnimation=function(_d){if(this.animationItem.wrapper){this.animationItem.container=createTag("canvas");var rp=this.animationItem.container.style;rp.width="100%",rp.height="100%";var np="0px 0px 0px";rp.transformOrigin=np,rp.mozTransformOrigin=np,rp.webkitTransformOrigin=np,rp["-webkit-transform"]=np,rp.contentVisibility=this.renderConfig.contentVisibility,this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d"),this.renderConfig.className&&this.animationItem.container.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.animationItem.container.setAttribute("id",this.renderConfig.id)}else this.canvasContext=this.renderConfig.context;this.contextData.setContext(this.canvasContext),this.data=_d,this.layers=_d.layers,this.transformCanvas={w:_d.w,h:_d.h,sx:0,sy:0,tx:0,ty:0},this.setupGlobalData(_d,document.body),this.globalData.canvasContext=this.canvasContext,this.globalData.renderer=this,this.globalData.isDashed=!1,this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.transformCanvas=this.transformCanvas,this.elements=createSizedArray(_d.layers.length),this.updateContainerSize()},CanvasRendererBase.prototype.updateContainerSize=function(_d,rp){this.reset();var np,ap;_d?(np=_d,ap=rp,this.canvasContext.canvas.width=np,this.canvasContext.canvas.height=ap):(this.animationItem.wrapper&&this.animationItem.container?(np=this.animationItem.wrapper.offsetWidth,ap=this.animationItem.wrapper.offsetHeight):(np=this.canvasContext.canvas.width,ap=this.canvasContext.canvas.height),this.canvasContext.canvas.width=np*this.renderConfig.dpr,this.canvasContext.canvas.height=ap*this.renderConfig.dpr);var sp,lp;if(this.renderConfig.preserveAspectRatio.indexOf("meet")!==-1||this.renderConfig.preserveAspectRatio.indexOf("slice")!==-1){var up=this.renderConfig.preserveAspectRatio.split(" "),cp=up[1]||"meet",dp=up[0]||"xMidYMid",fp=dp.substr(0,4),pp=dp.substr(4);sp=np/ap,lp=this.transformCanvas.w/this.transformCanvas.h,lp>sp&&cp==="meet"||lp<sp&&cp==="slice"?(this.transformCanvas.sx=np/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=np/(this.transformCanvas.w/this.renderConfig.dpr)):(this.transformCanvas.sx=ap/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.sy=ap/(this.transformCanvas.h/this.renderConfig.dpr)),fp==="xMid"&&(lp<sp&&cp==="meet"||lp>sp&&cp==="slice")?this.transformCanvas.tx=(np-this.transformCanvas.w*(ap/this.transformCanvas.h))/2*this.renderConfig.dpr:fp==="xMax"&&(lp<sp&&cp==="meet"||lp>sp&&cp==="slice")?this.transformCanvas.tx=(np-this.transformCanvas.w*(ap/this.transformCanvas.h))*this.renderConfig.dpr:this.transformCanvas.tx=0,pp==="YMid"&&(lp>sp&&cp==="meet"||lp<sp&&cp==="slice")?this.transformCanvas.ty=(ap-this.transformCanvas.h*(np/this.transformCanvas.w))/2*this.renderConfig.dpr:pp==="YMax"&&(lp>sp&&cp==="meet"||lp<sp&&cp==="slice")?this.transformCanvas.ty=(ap-this.transformCanvas.h*(np/this.transformCanvas.w))*this.renderConfig.dpr:this.transformCanvas.ty=0}else this.renderConfig.preserveAspectRatio==="none"?(this.transformCanvas.sx=np/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=ap/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0):(this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr,this.transformCanvas.tx=0,this.transformCanvas.ty=0);this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1],this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip(),this.renderFrame(this.renderedFrame,!0)},CanvasRendererBase.prototype.destroy=function(){this.renderConfig.clearCanvas&&this.animationItem.wrapper&&(this.animationItem.wrapper.innerText="");var _d,rp=this.layers?this.layers.length:0;for(_d=rp-1;_d>=0;_d-=1)this.elements[_d]&&this.elements[_d].destroy&&this.elements[_d].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRendererBase.prototype.renderFrame=function(_d,rp){if(!(this.renderedFrame===_d&&this.renderConfig.clearCanvas===!0&&!rp||this.destroyed||_d===-1)){this.renderedFrame=_d,this.globalData.frameNum=_d-this.animationItem._isFirstFrame,this.globalData.frameId+=1,this.globalData._mdf=!this.renderConfig.clearCanvas||rp,this.globalData.projectInterface.currentFrame=_d;var np,ap=this.layers.length;for(this.completeLayers||this.checkLayers(_d),np=ap-1;np>=0;np-=1)(this.completeLayers||this.elements[np])&&this.elements[np].prepareFrame(_d-this.layers[np].st);if(this.globalData._mdf){for(this.renderConfig.clearCanvas===!0?this.canvasContext.clearRect(0,0,this.transformCanvas.w,this.transformCanvas.h):this.save(),np=ap-1;np>=0;np-=1)(this.completeLayers||this.elements[np])&&this.elements[np].renderFrame();this.renderConfig.clearCanvas!==!0&&this.restore()}}},CanvasRendererBase.prototype.buildItem=function(_d){var rp=this.elements;if(!(rp[_d]||this.layers[_d].ty===99)){var np=this.createItem(this.layers[_d],this,this.globalData);rp[_d]=np,np.initExpressions()}},CanvasRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var _d=this.pendingElements.pop();_d.checkParenting()}},CanvasRendererBase.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRendererBase.prototype.show=function(){this.animationItem.container.style.display="block"};function CanvasContext(){this.opacity=-1,this.transform=createTypedArray("float32",16),this.fillStyle="",this.strokeStyle="",this.lineWidth="",this.lineCap="",this.lineJoin="",this.miterLimit="",this.id=Math.random()}function CVContextData(){this.stack=[],this.cArrPos=0,this.cTr=new Matrix;var _d,rp=15;for(_d=0;_d<rp;_d+=1){var np=new CanvasContext;this.stack[_d]=np}this._length=rp,this.nativeContext=null,this.transformMat=new Matrix,this.currentOpacity=1,this.currentFillStyle="",this.appliedFillStyle="",this.currentStrokeStyle="",this.appliedStrokeStyle="",this.currentLineWidth="",this.appliedLineWidth="",this.currentLineCap="",this.appliedLineCap="",this.currentLineJoin="",this.appliedLineJoin="",this.appliedMiterLimit="",this.currentMiterLimit=""}CVContextData.prototype.duplicate=function(){var _d=this._length*2,rp=0;for(rp=this._length;rp<_d;rp+=1)this.stack[rp]=new CanvasContext;this._length=_d},CVContextData.prototype.reset=function(){this.cArrPos=0,this.cTr.reset(),this.stack[this.cArrPos].opacity=1},CVContextData.prototype.restore=function(_d){this.cArrPos-=1;var rp=this.stack[this.cArrPos],np=rp.transform,ap,sp=this.cTr.props;for(ap=0;ap<16;ap+=1)sp[ap]=np[ap];if(_d){this.nativeContext.restore();var lp=this.stack[this.cArrPos+1];this.appliedFillStyle=lp.fillStyle,this.appliedStrokeStyle=lp.strokeStyle,this.appliedLineWidth=lp.lineWidth,this.appliedLineCap=lp.lineCap,this.appliedLineJoin=lp.lineJoin,this.appliedMiterLimit=lp.miterLimit}this.nativeContext.setTransform(np[0],np[1],np[4],np[5],np[12],np[13]),(_d||rp.opacity!==-1&&this.currentOpacity!==rp.opacity)&&(this.nativeContext.globalAlpha=rp.opacity,this.currentOpacity=rp.opacity),this.currentFillStyle=rp.fillStyle,this.currentStrokeStyle=rp.strokeStyle,this.currentLineWidth=rp.lineWidth,this.currentLineCap=rp.lineCap,this.currentLineJoin=rp.lineJoin,this.currentMiterLimit=rp.miterLimit},CVContextData.prototype.save=function(_d){_d&&this.nativeContext.save();var rp=this.cTr.props;this._length<=this.cArrPos&&this.duplicate();var np=this.stack[this.cArrPos],ap;for(ap=0;ap<16;ap+=1)np.transform[ap]=rp[ap];this.cArrPos+=1;var sp=this.stack[this.cArrPos];sp.opacity=np.opacity,sp.fillStyle=np.fillStyle,sp.strokeStyle=np.strokeStyle,sp.lineWidth=np.lineWidth,sp.lineCap=np.lineCap,sp.lineJoin=np.lineJoin,sp.miterLimit=np.miterLimit},CVContextData.prototype.setOpacity=function(_d){this.stack[this.cArrPos].opacity=_d},CVContextData.prototype.setContext=function(_d){this.nativeContext=_d},CVContextData.prototype.fillStyle=function(_d){this.stack[this.cArrPos].fillStyle!==_d&&(this.currentFillStyle=_d,this.stack[this.cArrPos].fillStyle=_d)},CVContextData.prototype.strokeStyle=function(_d){this.stack[this.cArrPos].strokeStyle!==_d&&(this.currentStrokeStyle=_d,this.stack[this.cArrPos].strokeStyle=_d)},CVContextData.prototype.lineWidth=function(_d){this.stack[this.cArrPos].lineWidth!==_d&&(this.currentLineWidth=_d,this.stack[this.cArrPos].lineWidth=_d)},CVContextData.prototype.lineCap=function(_d){this.stack[this.cArrPos].lineCap!==_d&&(this.currentLineCap=_d,this.stack[this.cArrPos].lineCap=_d)},CVContextData.prototype.lineJoin=function(_d){this.stack[this.cArrPos].lineJoin!==_d&&(this.currentLineJoin=_d,this.stack[this.cArrPos].lineJoin=_d)},CVContextData.prototype.miterLimit=function(_d){this.stack[this.cArrPos].miterLimit!==_d&&(this.currentMiterLimit=_d,this.stack[this.cArrPos].miterLimit=_d)},CVContextData.prototype.transform=function(_d){this.transformMat.cloneFromProps(_d);var rp=this.cTr;this.transformMat.multiply(rp),rp.cloneFromProps(this.transformMat.props);var np=rp.props;this.nativeContext.setTransform(np[0],np[1],np[4],np[5],np[12],np[13])},CVContextData.prototype.opacity=function(_d){var rp=this.stack[this.cArrPos].opacity;rp*=_d<0?0:_d,this.stack[this.cArrPos].opacity!==rp&&(this.currentOpacity!==_d&&(this.nativeContext.globalAlpha=_d,this.currentOpacity=_d),this.stack[this.cArrPos].opacity=rp)},CVContextData.prototype.fill=function(_d){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fill(_d)},CVContextData.prototype.fillRect=function(_d,rp,np,ap){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fillRect(_d,rp,np,ap)},CVContextData.prototype.stroke=function(){this.appliedStrokeStyle!==this.currentStrokeStyle&&(this.appliedStrokeStyle=this.currentStrokeStyle,this.nativeContext.strokeStyle=this.appliedStrokeStyle),this.appliedLineWidth!==this.currentLineWidth&&(this.appliedLineWidth=this.currentLineWidth,this.nativeContext.lineWidth=this.appliedLineWidth),this.appliedLineCap!==this.currentLineCap&&(this.appliedLineCap=this.currentLineCap,this.nativeContext.lineCap=this.appliedLineCap),this.appliedLineJoin!==this.currentLineJoin&&(this.appliedLineJoin=this.currentLineJoin,this.nativeContext.lineJoin=this.appliedLineJoin),this.appliedMiterLimit!==this.currentMiterLimit&&(this.appliedMiterLimit=this.currentMiterLimit,this.nativeContext.miterLimit=this.appliedMiterLimit),this.nativeContext.stroke()};function CVCompElement(_d,rp,np){this.completeLayers=!1,this.layers=_d.layers,this.pendingElements=[],this.elements=createSizedArray(this.layers.length),this.initElement(_d,rp,np),this.tm=_d.tm?PropertyFactory.getProp(this,_d.tm,0,rp.frameRate,this):{_placeholder:!0}}extendPrototype([CanvasRendererBase,ICompElement,CVBaseElement],CVCompElement),CVCompElement.prototype.renderInnerContent=function(){var _d=this.canvasContext;_d.beginPath(),_d.moveTo(0,0),_d.lineTo(this.data.w,0),_d.lineTo(this.data.w,this.data.h),_d.lineTo(0,this.data.h),_d.lineTo(0,0),_d.clip();var rp,np=this.layers.length;for(rp=np-1;rp>=0;rp-=1)(this.completeLayers||this.elements[rp])&&this.elements[rp].renderFrame()},CVCompElement.prototype.destroy=function(){var _d,rp=this.layers.length;for(_d=rp-1;_d>=0;_d-=1)this.elements[_d]&&this.elements[_d].destroy();this.layers=null,this.elements=null},CVCompElement.prototype.createComp=function(_d){return new CVCompElement(_d,this.globalData,this)};function CanvasRenderer(_d,rp){this.animationItem=_d,this.renderConfig={clearCanvas:rp&&rp.clearCanvas!==void 0?rp.clearCanvas:!0,context:rp&&rp.context||null,progressiveLoad:rp&&rp.progressiveLoad||!1,preserveAspectRatio:rp&&rp.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:rp&&rp.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:rp&&rp.contentVisibility||"visible",className:rp&&rp.className||"",id:rp&&rp.id||"",runExpressions:!rp||rp.runExpressions===void 0||rp.runExpressions},this.renderConfig.dpr=rp&&rp.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=rp&&rp.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas",this.renderConfig.clearCanvas&&(this.ctxTransform=this.contextData.transform.bind(this.contextData),this.ctxOpacity=this.contextData.opacity.bind(this.contextData),this.ctxFillStyle=this.contextData.fillStyle.bind(this.contextData),this.ctxStrokeStyle=this.contextData.strokeStyle.bind(this.contextData),this.ctxLineWidth=this.contextData.lineWidth.bind(this.contextData),this.ctxLineCap=this.contextData.lineCap.bind(this.contextData),this.ctxLineJoin=this.contextData.lineJoin.bind(this.contextData),this.ctxMiterLimit=this.contextData.miterLimit.bind(this.contextData),this.ctxFill=this.contextData.fill.bind(this.contextData),this.ctxFillRect=this.contextData.fillRect.bind(this.contextData),this.ctxStroke=this.contextData.stroke.bind(this.contextData),this.save=this.contextData.save.bind(this.contextData))}extendPrototype([CanvasRendererBase],CanvasRenderer),CanvasRenderer.prototype.createComp=function(_d){return new CVCompElement(_d,this.globalData,this)};function HBaseElement(){}HBaseElement.prototype={checkBlendMode:function(){},initRendererElement:function(){this.baseElement=createTag(this.data.tg||"div"),this.data.hasMask?(this.svgElement=createNS("svg"),this.layerElement=createNS("g"),this.maskedElement=this.layerElement,this.svgElement.appendChild(this.layerElement),this.baseElement.appendChild(this.svgElement)):this.layerElement=this.baseElement,styleDiv(this.baseElement)},createContainerElements:function(){this.renderableEffectsManager=new CVEffects(this),this.transformedElement=this.baseElement,this.maskedElement=this.layerElement,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.bm!==0&&this.setBlendMode()},renderElement:function(){var rp=this.transformedElement?this.transformedElement.style:{};if(this.finalTransform._matMdf){var np=this.finalTransform.mat.toCSS();rp.transform=np,rp.webkitTransform=np}this.finalTransform._opMdf&&(rp.opacity=this.finalTransform.mProp.o.v)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.layerElement=null,this.transformedElement=null,this.matteElement&&(this.matteElement=null),this.maskManager&&(this.maskManager.destroy(),this.maskManager=null)},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData)},addEffects:function(){},setMatte:function(){}},HBaseElement.prototype.getBaseElement=SVGBaseElement.prototype.getBaseElement,HBaseElement.prototype.destroyBaseElement=HBaseElement.prototype.destroy,HBaseElement.prototype.buildElementParenting=BaseRenderer.prototype.buildElementParenting;function HSolidElement(_d,rp,np){this.initElement(_d,rp,np)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],HSolidElement),HSolidElement.prototype.createContent=function(){var _d;this.data.hasMask?(_d=createNS("rect"),_d.setAttribute("width",this.data.sw),_d.setAttribute("height",this.data.sh),_d.setAttribute("fill",this.data.sc),this.svgElement.setAttribute("width",this.data.sw),this.svgElement.setAttribute("height",this.data.sh)):(_d=createTag("div"),_d.style.width=this.data.sw+"px",_d.style.height=this.data.sh+"px",_d.style.backgroundColor=this.data.sc),this.layerElement.appendChild(_d)};function HShapeElement(_d,rp,np){this.shapes=[],this.shapesData=_d.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.shapesContainer=createNS("g"),this.initElement(_d,rp,np),this.prevViewData=[],this.currentBBox={x:999999,y:-999999,h:0,w:0}}extendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement],HShapeElement),HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderInnerContent,HShapeElement.prototype.createContent=function(){var _d;if(this.baseElement.style.fontSize=0,this.data.hasMask)this.layerElement.appendChild(this.shapesContainer),_d=this.svgElement;else{_d=createNS("svg");var rp=this.comp.data?this.comp.data:this.globalData.compSize;_d.setAttribute("width",rp.w),_d.setAttribute("height",rp.h),_d.appendChild(this.shapesContainer),this.layerElement.appendChild(_d)}this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0,[],!0),this.filterUniqueShapes(),this.shapeCont=_d},HShapeElement.prototype.getTransformedPoint=function(_d,rp){var np,ap=_d.length;for(np=0;np<ap;np+=1)rp=_d[np].mProps.v.applyToPointArray(rp[0],rp[1],0);return rp},HShapeElement.prototype.calculateShapeBoundingBox=function(_d,rp){var np=_d.sh.v,ap=_d.transformers,sp,lp=np._length,up,cp,dp,fp;if(!(lp<=1)){for(sp=0;sp<lp-1;sp+=1)up=this.getTransformedPoint(ap,np.v[sp]),cp=this.getTransformedPoint(ap,np.o[sp]),dp=this.getTransformedPoint(ap,np.i[sp+1]),fp=this.getTransformedPoint(ap,np.v[sp+1]),this.checkBounds(up,cp,dp,fp,rp);np.c&&(up=this.getTransformedPoint(ap,np.v[sp]),cp=this.getTransformedPoint(ap,np.o[sp]),dp=this.getTransformedPoint(ap,np.i[0]),fp=this.getTransformedPoint(ap,np.v[0]),this.checkBounds(up,cp,dp,fp,rp))}},HShapeElement.prototype.checkBounds=function(_d,rp,np,ap,sp){this.getBoundsOfCurve(_d,rp,np,ap);var lp=this.shapeBoundingBox;sp.x=bmMin(lp.left,sp.x),sp.xMax=bmMax(lp.right,sp.xMax),sp.y=bmMin(lp.top,sp.y),sp.yMax=bmMax(lp.bottom,sp.yMax)},HShapeElement.prototype.shapeBoundingBox={left:0,right:0,top:0,bottom:0},HShapeElement.prototype.tempBoundingBox={x:0,xMax:0,y:0,yMax:0,width:0,height:0},HShapeElement.prototype.getBoundsOfCurve=function(_d,rp,np,ap){for(var sp=[[_d[0],ap[0]],[_d[1],ap[1]]],lp,up,cp,dp,fp,pp,hp,mp=0;mp<2;++mp)up=6*_d[mp]-12*rp[mp]+6*np[mp],lp=-3*_d[mp]+9*rp[mp]-9*np[mp]+3*ap[mp],cp=3*rp[mp]-3*_d[mp],up|=0,lp|=0,cp|=0,lp===0&&up===0||(lp===0?(dp=-cp/up,dp>0&&dp<1&&sp[mp].push(this.calculateF(dp,_d,rp,np,ap,mp))):(fp=up*up-4*cp*lp,fp>=0&&(pp=(-up+bmSqrt(fp))/(2*lp),pp>0&&pp<1&&sp[mp].push(this.calculateF(pp,_d,rp,np,ap,mp)),hp=(-up-bmSqrt(fp))/(2*lp),hp>0&&hp<1&&sp[mp].push(this.calculateF(hp,_d,rp,np,ap,mp)))));this.shapeBoundingBox.left=bmMin.apply(null,sp[0]),this.shapeBoundingBox.top=bmMin.apply(null,sp[1]),this.shapeBoundingBox.right=bmMax.apply(null,sp[0]),this.shapeBoundingBox.bottom=bmMax.apply(null,sp[1])},HShapeElement.prototype.calculateF=function(_d,rp,np,ap,sp,lp){return bmPow(1-_d,3)*rp[lp]+3*bmPow(1-_d,2)*_d*np[lp]+3*(1-_d)*bmPow(_d,2)*ap[lp]+bmPow(_d,3)*sp[lp]},HShapeElement.prototype.calculateBoundingBox=function(_d,rp){var np,ap=_d.length;for(np=0;np<ap;np+=1)_d[np]&&_d[np].sh?this.calculateShapeBoundingBox(_d[np],rp):_d[np]&&_d[np].it?this.calculateBoundingBox(_d[np].it,rp):_d[np]&&_d[np].style&&_d[np].w&&this.expandStrokeBoundingBox(_d[np].w,rp)},HShapeElement.prototype.expandStrokeBoundingBox=function(_d,rp){var np=0;if(_d.keyframes){for(var ap=0;ap<_d.keyframes.length;ap+=1){var sp=_d.keyframes[ap].s;sp>np&&(np=sp)}np*=_d.mult}else np=_d.v*_d.mult;rp.x-=np,rp.xMax+=np,rp.y-=np,rp.yMax+=np},HShapeElement.prototype.currentBoxContains=function(_d){return this.currentBBox.x<=_d.x&&this.currentBBox.y<=_d.y&&this.currentBBox.width+this.currentBBox.x>=_d.x+_d.width&&this.currentBBox.height+this.currentBBox.y>=_d.y+_d.height},HShapeElement.prototype.renderInnerContent=function(){if(this._renderShapeFrame(),!this.hidden&&(this._isFirstFrame||this._mdf)){var _d=this.tempBoundingBox,rp=999999;if(_d.x=rp,_d.xMax=-rp,_d.y=rp,_d.yMax=-rp,this.calculateBoundingBox(this.itemsData,_d),_d.width=_d.xMax<_d.x?0:_d.xMax-_d.x,_d.height=_d.yMax<_d.y?0:_d.yMax-_d.y,this.currentBoxContains(_d))return;var np=!1;if(this.currentBBox.w!==_d.width&&(this.currentBBox.w=_d.width,this.shapeCont.setAttribute("width",_d.width),np=!0),this.currentBBox.h!==_d.height&&(this.currentBBox.h=_d.height,this.shapeCont.setAttribute("height",_d.height),np=!0),np||this.currentBBox.x!==_d.x||this.currentBBox.y!==_d.y){this.currentBBox.w=_d.width,this.currentBBox.h=_d.height,this.currentBBox.x=_d.x,this.currentBBox.y=_d.y,this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h);var ap=this.shapeCont.style,sp="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";ap.transform=sp,ap.webkitTransform=sp}}};function HTextElement(_d,rp,np){this.textSpans=[],this.textPaths=[],this.currentBBox={x:999999,y:-999999,h:0,w:0},this.renderType="svg",this.isMasked=!1,this.initElement(_d,rp,np)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],HTextElement),HTextElement.prototype.createContent=function(){if(this.isMasked=this.checkMasks(),this.isMasked){this.renderType="svg",this.compW=this.comp.data.w,this.compH=this.comp.data.h,this.svgElement.setAttribute("width",this.compW),this.svgElement.setAttribute("height",this.compH);var _d=createNS("g");this.maskedElement.appendChild(_d),this.innerElem=_d}else this.renderType="html",this.innerElem=this.layerElement;this.checkParenting()},HTextElement.prototype.buildNewText=function(){var _d=this.textProperty.currentData;this.renderedLetters=createSizedArray(_d.l?_d.l.length:0);var rp=this.innerElem.style,np=_d.fc?this.buildColor(_d.fc):"rgba(0,0,0,0)";rp.fill=np,rp.color=np,_d.sc&&(rp.stroke=this.buildColor(_d.sc),rp.strokeWidth=_d.sw+"px");var ap=this.globalData.fontManager.getFontByName(_d.f);if(!this.globalData.fontManager.chars)if(rp.fontSize=_d.finalSize+"px",rp.lineHeight=_d.finalSize+"px",ap.fClass)this.innerElem.className=ap.fClass;else{rp.fontFamily=ap.fFamily;var sp=_d.fWeight,lp=_d.fStyle;rp.fontStyle=lp,rp.fontWeight=sp}var up,cp,dp=_d.l;cp=dp.length;var fp,pp,hp,mp=this.mHelper,gp,vp="",xp=0;for(up=0;up<cp;up+=1){if(this.globalData.fontManager.chars?(this.textPaths[xp]?fp=this.textPaths[xp]:(fp=createNS("path"),fp.setAttribute("stroke-linecap",lineCapEnum[1]),fp.setAttribute("stroke-linejoin",lineJoinEnum[2]),fp.setAttribute("stroke-miterlimit","4")),this.isMasked||(this.textSpans[xp]?(pp=this.textSpans[xp],hp=pp.children[0]):(pp=createTag("div"),pp.style.lineHeight=0,hp=createNS("svg"),hp.appendChild(fp),styleDiv(pp)))):this.isMasked?fp=this.textPaths[xp]?this.textPaths[xp]:createNS("text"):this.textSpans[xp]?(pp=this.textSpans[xp],fp=this.textPaths[xp]):(pp=createTag("span"),styleDiv(pp),fp=createTag("span"),styleDiv(fp),pp.appendChild(fp)),this.globalData.fontManager.chars){var Sp=this.globalData.fontManager.getCharData(_d.finalText[up],ap.fStyle,this.globalData.fontManager.getFontByName(_d.f).fFamily),yp;if(Sp?yp=Sp.data:yp=null,mp.reset(),yp&&yp.shapes&&yp.shapes.length&&(gp=yp.shapes[0].it,mp.scale(_d.finalSize/100,_d.finalSize/100),vp=this.createPathShape(mp,gp),fp.setAttribute("d",vp)),this.isMasked)this.innerElem.appendChild(fp);else{if(this.innerElem.appendChild(pp),yp&&yp.shapes){document.body.appendChild(hp);var bp=hp.getBBox();hp.setAttribute("width",bp.width+2),hp.setAttribute("height",bp.height+2),hp.setAttribute("viewBox",bp.x-1+" "+(bp.y-1)+" "+(bp.width+2)+" "+(bp.height+2));var Ep=hp.style,wp="translate("+(bp.x-1)+"px,"+(bp.y-1)+"px)";Ep.transform=wp,Ep.webkitTransform=wp,dp[up].yOffset=bp.y-1}else hp.setAttribute("width",1),hp.setAttribute("height",1);pp.appendChild(hp)}}else if(fp.textContent=dp[up].val,fp.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.isMasked)this.innerElem.appendChild(fp);else{this.innerElem.appendChild(pp);var _p=fp.style,Rp="translate3d(0,"+-_d.finalSize/1.2+"px,0)";_p.transform=Rp,_p.webkitTransform=Rp}this.isMasked?this.textSpans[xp]=fp:this.textSpans[xp]=pp,this.textSpans[xp].style.display="block",this.textPaths[xp]=fp,xp+=1}for(;xp<this.textSpans.length;)this.textSpans[xp].style.display="none",xp+=1},HTextElement.prototype.renderInnerContent=function(){this.validateText();var _d;if(this.data.singleShape){if(!this._isFirstFrame&&!this.lettersChangedFlag)return;if(this.isMasked&&this.finalTransform._matMdf){this.svgElement.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH),_d=this.svgElement.style;var rp="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)";_d.transform=rp,_d.webkitTransform=rp}}if(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),!(!this.lettersChangedFlag&&!this.textAnimator.lettersChangedFlag)){var np,ap,sp=0,lp=this.textAnimator.renderedLetters,up=this.textProperty.currentData.l;ap=up.length;var cp,dp,fp;for(np=0;np<ap;np+=1)up[np].n?sp+=1:(dp=this.textSpans[np],fp=this.textPaths[np],cp=lp[sp],sp+=1,cp._mdf.m&&(this.isMasked?dp.setAttribute("transform",cp.m):(dp.style.webkitTransform=cp.m,dp.style.transform=cp.m)),dp.style.opacity=cp.o,cp.sw&&cp._mdf.sw&&fp.setAttribute("stroke-width",cp.sw),cp.sc&&cp._mdf.sc&&fp.setAttribute("stroke",cp.sc),cp.fc&&cp._mdf.fc&&(fp.setAttribute("fill",cp.fc),fp.style.color=cp.fc));if(this.innerElem.getBBox&&!this.hidden&&(this._isFirstFrame||this._mdf)){var pp=this.innerElem.getBBox();this.currentBBox.w!==pp.width&&(this.currentBBox.w=pp.width,this.svgElement.setAttribute("width",pp.width)),this.currentBBox.h!==pp.height&&(this.currentBBox.h=pp.height,this.svgElement.setAttribute("height",pp.height));var hp=1;if(this.currentBBox.w!==pp.width+hp*2||this.currentBBox.h!==pp.height+hp*2||this.currentBBox.x!==pp.x-hp||this.currentBBox.y!==pp.y-hp){this.currentBBox.w=pp.width+hp*2,this.currentBBox.h=pp.height+hp*2,this.currentBBox.x=pp.x-hp,this.currentBBox.y=pp.y-hp,this.svgElement.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),_d=this.svgElement.style;var mp="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";_d.transform=mp,_d.webkitTransform=mp}}}};function HCameraElement(_d,rp,np){this.initFrame(),this.initBaseData(_d,rp,np),this.initHierarchy();var ap=PropertyFactory.getProp;if(this.pe=ap(this,_d.pe,0,0,this),_d.ks.p.s?(this.px=ap(this,_d.ks.p.x,1,0,this),this.py=ap(this,_d.ks.p.y,1,0,this),this.pz=ap(this,_d.ks.p.z,1,0,this)):this.p=ap(this,_d.ks.p,1,0,this),_d.ks.a&&(this.a=ap(this,_d.ks.a,1,0,this)),_d.ks.or.k.length&&_d.ks.or.k[0].to){var sp,lp=_d.ks.or.k.length;for(sp=0;sp<lp;sp+=1)_d.ks.or.k[sp].to=null,_d.ks.or.k[sp].ti=null}this.or=ap(this,_d.ks.or,1,degToRads,this),this.or.sh=!0,this.rx=ap(this,_d.ks.rx,0,degToRads,this),this.ry=ap(this,_d.ks.ry,0,degToRads,this),this.rz=ap(this,_d.ks.rz,0,degToRads,this),this.mat=new Matrix,this._prevMat=new Matrix,this._isFirstFrame=!0,this.finalTransform={mProp:this}}extendPrototype([BaseElement,FrameElement,HierarchyElement],HCameraElement),HCameraElement.prototype.setup=function(){var _d,rp=this.comp.threeDElements.length,np,ap,sp;for(_d=0;_d<rp;_d+=1)if(np=this.comp.threeDElements[_d],np.type==="3d"){ap=np.perspectiveElem.style,sp=np.container.style;var lp=this.pe.v+"px",up="0px 0px 0px",cp="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";ap.perspective=lp,ap.webkitPerspective=lp,sp.transformOrigin=up,sp.mozTransformOrigin=up,sp.webkitTransformOrigin=up,ap.transform=cp,ap.webkitTransform=cp}},HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=function(){var _d=this._isFirstFrame,rp,np;if(this.hierarchy)for(np=this.hierarchy.length,rp=0;rp<np;rp+=1)_d=this.hierarchy[rp].finalTransform.mProp._mdf||_d;if(_d||this.pe._mdf||this.p&&this.p._mdf||this.px&&(this.px._mdf||this.py._mdf||this.pz._mdf)||this.rx._mdf||this.ry._mdf||this.rz._mdf||this.or._mdf||this.a&&this.a._mdf){if(this.mat.reset(),this.hierarchy)for(np=this.hierarchy.length-1,rp=np;rp>=0;rp-=1){var ap=this.hierarchy[rp].finalTransform.mProp;this.mat.translate(-ap.p.v[0],-ap.p.v[1],ap.p.v[2]),this.mat.rotateX(-ap.or.v[0]).rotateY(-ap.or.v[1]).rotateZ(ap.or.v[2]),this.mat.rotateX(-ap.rx.v).rotateY(-ap.ry.v).rotateZ(ap.rz.v),this.mat.scale(1/ap.s.v[0],1/ap.s.v[1],1/ap.s.v[2]),this.mat.translate(ap.a.v[0],ap.a.v[1],ap.a.v[2])}if(this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v),this.a){var sp;this.p?sp=[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]]:sp=[this.px.v-this.a.v[0],this.py.v-this.a.v[1],this.pz.v-this.a.v[2]];var lp=Math.sqrt(Math.pow(sp[0],2)+Math.pow(sp[1],2)+Math.pow(sp[2],2)),up=[sp[0]/lp,sp[1]/lp,sp[2]/lp],cp=Math.sqrt(up[2]*up[2]+up[0]*up[0]),dp=Math.atan2(up[1],cp),fp=Math.atan2(up[0],-up[2]);this.mat.rotateY(fp).rotateX(-dp)}this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0),this.mat.translate(0,0,this.pe.v);var pp=!this._prevMat.equals(this.mat);if((pp||this.pe._mdf)&&this.comp.threeDElements){np=this.comp.threeDElements.length;var hp,mp,gp;for(rp=0;rp<np;rp+=1)if(hp=this.comp.threeDElements[rp],hp.type==="3d"){if(pp){var vp=this.mat.toCSS();gp=hp.container.style,gp.transform=vp,gp.webkitTransform=vp}this.pe._mdf&&(mp=hp.perspectiveElem.style,mp.perspective=this.pe.v+"px",mp.webkitPerspective=this.pe.v+"px")}this.mat.clone(this._prevMat)}}this._isFirstFrame=!1},HCameraElement.prototype.prepareFrame=function(_d){this.prepareProperties(_d,!0)},HCameraElement.prototype.destroy=function(){},HCameraElement.prototype.getBaseElement=function(){return null};function HImageElement(_d,rp,np){this.assetData=rp.getAssetData(_d.refId),this.initElement(_d,rp,np)}extendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement],HImageElement),HImageElement.prototype.createContent=function(){var _d=this.globalData.getAssetsPath(this.assetData),rp=new Image;this.data.hasMask?(this.imageElem=createNS("image"),this.imageElem.setAttribute("width",this.assetData.w+"px"),this.imageElem.setAttribute("height",this.assetData.h+"px"),this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",_d),this.layerElement.appendChild(this.imageElem),this.baseElement.setAttribute("width",this.assetData.w),this.baseElement.setAttribute("height",this.assetData.h)):this.layerElement.appendChild(rp),rp.crossOrigin="anonymous",rp.src=_d,this.data.ln&&this.baseElement.setAttribute("id",this.data.ln)};function HybridRendererBase(_d,rp){this.animationItem=_d,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:rp&&rp.className||"",imagePreserveAspectRatio:rp&&rp.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(rp&&rp.hideOnTransparent===!1),filterSize:{width:rp&&rp.filterSize&&rp.filterSize.width||"400%",height:rp&&rp.filterSize&&rp.filterSize.height||"400%",x:rp&&rp.filterSize&&rp.filterSize.x||"-100%",y:rp&&rp.filterSize&&rp.filterSize.y||"-100%"}},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([BaseRenderer],HybridRendererBase),HybridRendererBase.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var _d=this.pendingElements.pop();_d.checkParenting()}},HybridRendererBase.prototype.appendElementInPos=function(_d,rp){var np=_d.getBaseElement();if(np){var ap=this.layers[rp];if(!ap.ddd||!this.supports3d)if(this.threeDElements)this.addTo3dContainer(np,rp);else{for(var sp=0,lp,up,cp;sp<rp;)this.elements[sp]&&this.elements[sp]!==!0&&this.elements[sp].getBaseElement&&(up=this.elements[sp],cp=this.layers[sp].ddd?this.getThreeDContainerByPos(sp):up.getBaseElement(),lp=cp||lp),sp+=1;lp?(!ap.ddd||!this.supports3d)&&this.layerElement.insertBefore(np,lp):(!ap.ddd||!this.supports3d)&&this.layerElement.appendChild(np)}else this.addTo3dContainer(np,rp)}},HybridRendererBase.prototype.createShape=function(_d){return this.supports3d?new HShapeElement(_d,this.globalData,this):new SVGShapeElement(_d,this.globalData,this)},HybridRendererBase.prototype.createText=function(_d){return this.supports3d?new HTextElement(_d,this.globalData,this):new SVGTextLottieElement(_d,this.globalData,this)},HybridRendererBase.prototype.createCamera=function(_d){return this.camera=new HCameraElement(_d,this.globalData,this),this.camera},HybridRendererBase.prototype.createImage=function(_d){return this.supports3d?new HImageElement(_d,this.globalData,this):new IImageElement(_d,this.globalData,this)},HybridRendererBase.prototype.createSolid=function(_d){return this.supports3d?new HSolidElement(_d,this.globalData,this):new ISolidElement(_d,this.globalData,this)},HybridRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,HybridRendererBase.prototype.getThreeDContainerByPos=function(_d){for(var rp=0,np=this.threeDElements.length;rp<np;){if(this.threeDElements[rp].startPos<=_d&&this.threeDElements[rp].endPos>=_d)return this.threeDElements[rp].perspectiveElem;rp+=1}return null},HybridRendererBase.prototype.createThreeDContainer=function(_d,rp){var np=createTag("div"),ap,sp;styleDiv(np);var lp=createTag("div");if(styleDiv(lp),rp==="3d"){ap=np.style,ap.width=this.globalData.compSize.w+"px",ap.height=this.globalData.compSize.h+"px";var up="50% 50%";ap.webkitTransformOrigin=up,ap.mozTransformOrigin=up,ap.transformOrigin=up,sp=lp.style;var cp="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";sp.transform=cp,sp.webkitTransform=cp}np.appendChild(lp);var dp={container:lp,perspectiveElem:np,startPos:_d,endPos:_d,type:rp};return this.threeDElements.push(dp),dp},HybridRendererBase.prototype.build3dContainers=function(){var _d,rp=this.layers.length,np,ap="";for(_d=0;_d<rp;_d+=1)this.layers[_d].ddd&&this.layers[_d].ty!==3?(ap!=="3d"&&(ap="3d",np=this.createThreeDContainer(_d,"3d")),np.endPos=Math.max(np.endPos,_d)):(ap!=="2d"&&(ap="2d",np=this.createThreeDContainer(_d,"2d")),np.endPos=Math.max(np.endPos,_d));for(rp=this.threeDElements.length,_d=rp-1;_d>=0;_d-=1)this.resizerElem.appendChild(this.threeDElements[_d].perspectiveElem)},HybridRendererBase.prototype.addTo3dContainer=function(_d,rp){for(var np=0,ap=this.threeDElements.length;np<ap;){if(rp<=this.threeDElements[np].endPos){for(var sp=this.threeDElements[np].startPos,lp;sp<rp;)this.elements[sp]&&this.elements[sp].getBaseElement&&(lp=this.elements[sp].getBaseElement()),sp+=1;lp?this.threeDElements[np].container.insertBefore(_d,lp):this.threeDElements[np].container.appendChild(_d);break}np+=1}},HybridRendererBase.prototype.configAnimation=function(_d){var rp=createTag("div"),np=this.animationItem.wrapper,ap=rp.style;ap.width=_d.w+"px",ap.height=_d.h+"px",this.resizerElem=rp,styleDiv(rp),ap.transformStyle="flat",ap.mozTransformStyle="flat",ap.webkitTransformStyle="flat",this.renderConfig.className&&rp.setAttribute("class",this.renderConfig.className),np.appendChild(rp),ap.overflow="hidden";var sp=createNS("svg");sp.setAttribute("width","1"),sp.setAttribute("height","1"),styleDiv(sp),this.resizerElem.appendChild(sp);var lp=createNS("defs");sp.appendChild(lp),this.data=_d,this.setupGlobalData(_d,sp),this.globalData.defs=lp,this.layers=_d.layers,this.layerElement=this.resizerElem,this.build3dContainers(),this.updateContainerSize()},HybridRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.animationItem.container=null,this.globalData.defs=null;var _d,rp=this.layers?this.layers.length:0;for(_d=0;_d<rp;_d+=1)this.elements[_d]&&this.elements[_d].destroy&&this.elements[_d].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},HybridRendererBase.prototype.updateContainerSize=function(){var _d=this.animationItem.wrapper.offsetWidth,rp=this.animationItem.wrapper.offsetHeight,np=_d/rp,ap=this.globalData.compSize.w/this.globalData.compSize.h,sp,lp,up,cp;ap>np?(sp=_d/this.globalData.compSize.w,lp=_d/this.globalData.compSize.w,up=0,cp=(rp-this.globalData.compSize.h*(_d/this.globalData.compSize.w))/2):(sp=rp/this.globalData.compSize.h,lp=rp/this.globalData.compSize.h,up=(_d-this.globalData.compSize.w*(rp/this.globalData.compSize.h))/2,cp=0);var dp=this.resizerElem.style;dp.webkitTransform="matrix3d("+sp+",0,0,0,0,"+lp+",0,0,0,0,1,0,"+up+","+cp+",0,1)",dp.transform=dp.webkitTransform},HybridRendererBase.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRendererBase.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRendererBase.prototype.show=function(){this.resizerElem.style.display="block"},HybridRendererBase.prototype.initItems=function(){if(this.buildAllItems(),this.camera)this.camera.setup();else{var _d=this.globalData.compSize.w,rp=this.globalData.compSize.h,np,ap=this.threeDElements.length;for(np=0;np<ap;np+=1){var sp=this.threeDElements[np].perspectiveElem.style;sp.webkitPerspective=Math.sqrt(Math.pow(_d,2)+Math.pow(rp,2))+"px",sp.perspective=sp.webkitPerspective}}},HybridRendererBase.prototype.searchExtraCompositions=function(_d){var rp,np=_d.length,ap=createTag("div");for(rp=0;rp<np;rp+=1)if(_d[rp].xt){var sp=this.createComp(_d[rp],ap,this.globalData.comp,null);sp.initExpressions(),this.globalData.projectInterface.registerComposition(sp)}};function HCompElement(_d,rp,np){this.layers=_d.layers,this.supports3d=!_d.hasMask,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(_d,rp,np),this.tm=_d.tm?PropertyFactory.getProp(this,_d.tm,0,rp.frameRate,this):{_placeholder:!0}}extendPrototype([HybridRendererBase,ICompElement,HBaseElement],HCompElement),HCompElement.prototype._createBaseContainerElements=HCompElement.prototype.createContainerElements,HCompElement.prototype.createContainerElements=function(){this._createBaseContainerElements(),this.data.hasMask?(this.svgElement.setAttribute("width",this.data.w),this.svgElement.setAttribute("height",this.data.h),this.transformedElement=this.baseElement):this.transformedElement=this.layerElement},HCompElement.prototype.addTo3dContainer=function(_d,rp){for(var np=0,ap;np<rp;)this.elements[np]&&this.elements[np].getBaseElement&&(ap=this.elements[np].getBaseElement()),np+=1;ap?this.layerElement.insertBefore(_d,ap):this.layerElement.appendChild(_d)},HCompElement.prototype.createComp=function(_d){return this.supports3d?new HCompElement(_d,this.globalData,this):new SVGCompElement(_d,this.globalData,this)};function HybridRenderer(_d,rp){this.animationItem=_d,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:rp&&rp.className||"",imagePreserveAspectRatio:rp&&rp.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(rp&&rp.hideOnTransparent===!1),filterSize:{width:rp&&rp.filterSize&&rp.filterSize.width||"400%",height:rp&&rp.filterSize&&rp.filterSize.height||"400%",x:rp&&rp.filterSize&&rp.filterSize.x||"-100%",y:rp&&rp.filterSize&&rp.filterSize.y||"-100%"},runExpressions:!rp||rp.runExpressions===void 0||rp.runExpressions},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([HybridRendererBase],HybridRenderer),HybridRenderer.prototype.createComp=function(_d){return this.supports3d?new HCompElement(_d,this.globalData,this):new SVGCompElement(_d,this.globalData,this)};var CompExpressionInterface=function(){return function(_d){function rp(np){for(var ap=0,sp=_d.layers.length;ap<sp;){if(_d.layers[ap].nm===np||_d.layers[ap].ind===np)return _d.elements[ap].layerInterface;ap+=1}return null}return Object.defineProperty(rp,"_name",{value:_d.data.nm}),rp.layer=rp,rp.pixelAspect=1,rp.height=_d.data.h||_d.globalData.compSize.h,rp.width=_d.data.w||_d.globalData.compSize.w,rp.pixelAspect=1,rp.frameDuration=1/_d.globalData.frameRate,rp.displayStartTime=0,rp.numLayers=_d.layers.length,rp}}();function _typeof$2(_d){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$2=function(np){return typeof np}:_typeof$2=function(np){return np&&typeof Symbol=="function"&&np.constructor===Symbol&&np!==Symbol.prototype?"symbol":typeof np},_typeof$2(_d)}function seedRandom(_d,rp){var np=this,ap=256,sp=6,lp=52,up="random",cp=rp.pow(ap,sp),dp=rp.pow(2,lp),fp=dp*2,pp=ap-1,hp;function mp(Ep,wp,_p){var Rp=[];wp=wp===!0?{entropy:!0}:wp||{};var $p=Sp(xp(wp.entropy?[Ep,bp(_d)]:Ep===null?yp():Ep,3),Rp),Cp=new gp(Rp),Ap=function(){for(var Lp=Cp.g(sp),Mp=cp,kp=0;Lp<dp;)Lp=(Lp+kp)*ap,Mp*=ap,kp=Cp.g(1);for(;Lp>=fp;)Lp/=2,Mp/=2,kp>>>=1;return(Lp+kp)/Mp};return Ap.int32=function(){return Cp.g(4)|0},Ap.quick=function(){return Cp.g(4)/4294967296},Ap.double=Ap,Sp(bp(Cp.S),_d),(wp.pass||_p||function(Op,Lp,Mp,kp){return kp&&(kp.S&&vp(kp,Cp),Op.state=function(){return vp(Cp,{})}),Mp?(rp[up]=Op,Lp):Op})(Ap,$p,"global"in wp?wp.global:this==rp,wp.state)}rp["seed"+up]=mp;function gp(Ep){var wp,_p=Ep.length,Rp=this,$p=0,Cp=Rp.i=Rp.j=0,Ap=Rp.S=[];for(_p||(Ep=[_p++]);$p<ap;)Ap[$p]=$p++;for($p=0;$p<ap;$p++)Ap[$p]=Ap[Cp=pp&Cp+Ep[$p%_p]+(wp=Ap[$p])],Ap[Cp]=wp;Rp.g=function(Op){for(var Lp,Mp=0,kp=Rp.i,Dp=Rp.j,Fp=Rp.S;Op--;)Lp=Fp[kp=pp&kp+1],Mp=Mp*ap+Fp[pp&(Fp[kp]=Fp[Dp=pp&Dp+Lp])+(Fp[Dp]=Lp)];return Rp.i=kp,Rp.j=Dp,Mp}}function vp(Ep,wp){return wp.i=Ep.i,wp.j=Ep.j,wp.S=Ep.S.slice(),wp}function xp(Ep,wp){var _p=[],Rp=_typeof$2(Ep),$p;if(wp&&Rp=="object")for($p in Ep)try{_p.push(xp(Ep[$p],wp-1))}catch{}return _p.length?_p:Rp=="string"?Ep:Ep+"\0"}function Sp(Ep,wp){for(var _p=Ep+"",Rp,$p=0;$p<_p.length;)wp[pp&$p]=pp&(Rp^=wp[pp&$p]*19)+_p.charCodeAt($p++);return bp(wp)}function yp(){try{var Ep=new Uint8Array(ap);return(np.crypto||np.msCrypto).getRandomValues(Ep),bp(Ep)}catch{var wp=np.navigator,_p=wp&&wp.plugins;return[+new Date,np,_p,np.screen,bp(_d)]}}function bp(Ep){return String.fromCharCode.apply(0,Ep)}Sp(rp.random(),_d)}function initialize$2(_d){seedRandom([],_d)}var propTypes={SHAPE:"shape"};function _typeof$1(_d){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$1=function(np){return typeof np}:_typeof$1=function(np){return np&&typeof Symbol=="function"&&np.constructor===Symbol&&np!==Symbol.prototype?"symbol":typeof np},_typeof$1(_d)}var ExpressionManager=function(){var ob={},Math=BMMath,window=null,document=null,XMLHttpRequest=null,fetch=null,frames=null,_lottieGlobal={};initialize$2(BMMath);function resetFrame(){_lottieGlobal={}}function $bm_isInstanceOfArray(_d){return _d.constructor===Array||_d.constructor===Float32Array}function isNumerable(_d,rp){return _d==="number"||rp instanceof Number||_d==="boolean"||_d==="string"}function $bm_neg(_d){var rp=_typeof$1(_d);if(rp==="number"||_d instanceof Number||rp==="boolean")return-_d;if($bm_isInstanceOfArray(_d)){var np,ap=_d.length,sp=[];for(np=0;np<ap;np+=1)sp[np]=-_d[np];return sp}return _d.propType?_d.v:-_d}var easeInBez=BezierFactory.getBezierEasing(.333,0,.833,.833,"easeIn").get,easeOutBez=BezierFactory.getBezierEasing(.167,.167,.667,1,"easeOut").get,easeInOutBez=BezierFactory.getBezierEasing(.33,0,.667,1,"easeInOut").get;function sum(_d,rp){var np=_typeof$1(_d),ap=_typeof$1(rp);if(isNumerable(np,_d)&&isNumerable(ap,rp)||np==="string"||ap==="string")return _d+rp;if($bm_isInstanceOfArray(_d)&&isNumerable(ap,rp))return _d=_d.slice(0),_d[0]+=rp,_d;if(isNumerable(np,_d)&&$bm_isInstanceOfArray(rp))return rp=rp.slice(0),rp[0]=_d+rp[0],rp;if($bm_isInstanceOfArray(_d)&&$bm_isInstanceOfArray(rp)){for(var sp=0,lp=_d.length,up=rp.length,cp=[];sp<lp||sp<up;)(typeof _d[sp]=="number"||_d[sp]instanceof Number)&&(typeof rp[sp]=="number"||rp[sp]instanceof Number)?cp[sp]=_d[sp]+rp[sp]:cp[sp]=rp[sp]===void 0?_d[sp]:_d[sp]||rp[sp],sp+=1;return cp}return 0}var add=sum;function sub(_d,rp){var np=_typeof$1(_d),ap=_typeof$1(rp);if(isNumerable(np,_d)&&isNumerable(ap,rp))return np==="string"&&(_d=parseInt(_d,10)),ap==="string"&&(rp=parseInt(rp,10)),_d-rp;if($bm_isInstanceOfArray(_d)&&isNumerable(ap,rp))return _d=_d.slice(0),_d[0]-=rp,_d;if(isNumerable(np,_d)&&$bm_isInstanceOfArray(rp))return rp=rp.slice(0),rp[0]=_d-rp[0],rp;if($bm_isInstanceOfArray(_d)&&$bm_isInstanceOfArray(rp)){for(var sp=0,lp=_d.length,up=rp.length,cp=[];sp<lp||sp<up;)(typeof _d[sp]=="number"||_d[sp]instanceof Number)&&(typeof rp[sp]=="number"||rp[sp]instanceof Number)?cp[sp]=_d[sp]-rp[sp]:cp[sp]=rp[sp]===void 0?_d[sp]:_d[sp]||rp[sp],sp+=1;return cp}return 0}function mul(_d,rp){var np=_typeof$1(_d),ap=_typeof$1(rp),sp;if(isNumerable(np,_d)&&isNumerable(ap,rp))return _d*rp;var lp,up;if($bm_isInstanceOfArray(_d)&&isNumerable(ap,rp)){for(up=_d.length,sp=createTypedArray("float32",up),lp=0;lp<up;lp+=1)sp[lp]=_d[lp]*rp;return sp}if(isNumerable(np,_d)&&$bm_isInstanceOfArray(rp)){for(up=rp.length,sp=createTypedArray("float32",up),lp=0;lp<up;lp+=1)sp[lp]=_d*rp[lp];return sp}return 0}function div(_d,rp){var np=_typeof$1(_d),ap=_typeof$1(rp),sp;if(isNumerable(np,_d)&&isNumerable(ap,rp))return _d/rp;var lp,up;if($bm_isInstanceOfArray(_d)&&isNumerable(ap,rp)){for(up=_d.length,sp=createTypedArray("float32",up),lp=0;lp<up;lp+=1)sp[lp]=_d[lp]/rp;return sp}if(isNumerable(np,_d)&&$bm_isInstanceOfArray(rp)){for(up=rp.length,sp=createTypedArray("float32",up),lp=0;lp<up;lp+=1)sp[lp]=_d/rp[lp];return sp}return 0}function mod(_d,rp){return typeof _d=="string"&&(_d=parseInt(_d,10)),typeof rp=="string"&&(rp=parseInt(rp,10)),_d%rp}var $bm_sum=sum,$bm_sub=sub,$bm_mul=mul,$bm_div=div,$bm_mod=mod;function clamp(_d,rp,np){if(rp>np){var ap=np;np=rp,rp=ap}return Math.min(Math.max(_d,rp),np)}function radiansToDegrees(_d){return _d/degToRads}var radians_to_degrees=radiansToDegrees;function degreesToRadians(_d){return _d*degToRads}var degrees_to_radians=radiansToDegrees,helperLengthArray=[0,0,0,0,0,0];function length(_d,rp){if(typeof _d=="number"||_d instanceof Number)return rp=rp||0,Math.abs(_d-rp);rp||(rp=helperLengthArray);var np,ap=Math.min(_d.length,rp.length),sp=0;for(np=0;np<ap;np+=1)sp+=Math.pow(rp[np]-_d[np],2);return Math.sqrt(sp)}function normalize(_d){return div(_d,length(_d))}function rgbToHsl(_d){var rp=_d[0],np=_d[1],ap=_d[2],sp=Math.max(rp,np,ap),lp=Math.min(rp,np,ap),up,cp,dp=(sp+lp)/2;if(sp===lp)up=0,cp=0;else{var fp=sp-lp;switch(cp=dp>.5?fp/(2-sp-lp):fp/(sp+lp),sp){case rp:up=(np-ap)/fp+(np<ap?6:0);break;case np:up=(ap-rp)/fp+2;break;case ap:up=(rp-np)/fp+4;break}up/=6}return[up,cp,dp,_d[3]]}function hue2rgb(_d,rp,np){return np<0&&(np+=1),np>1&&(np-=1),np<1/6?_d+(rp-_d)*6*np:np<1/2?rp:np<2/3?_d+(rp-_d)*(2/3-np)*6:_d}function hslToRgb(_d){var rp=_d[0],np=_d[1],ap=_d[2],sp,lp,up;if(np===0)sp=ap,up=ap,lp=ap;else{var cp=ap<.5?ap*(1+np):ap+np-ap*np,dp=2*ap-cp;sp=hue2rgb(dp,cp,rp+1/3),lp=hue2rgb(dp,cp,rp),up=hue2rgb(dp,cp,rp-1/3)}return[sp,lp,up,_d[3]]}function linear(_d,rp,np,ap,sp){if((ap===void 0||sp===void 0)&&(ap=rp,sp=np,rp=0,np=1),np<rp){var lp=np;np=rp,rp=lp}if(_d<=rp)return ap;if(_d>=np)return sp;var up=np===rp?0:(_d-rp)/(np-rp);if(!ap.length)return ap+(sp-ap)*up;var cp,dp=ap.length,fp=createTypedArray("float32",dp);for(cp=0;cp<dp;cp+=1)fp[cp]=ap[cp]+(sp[cp]-ap[cp])*up;return fp}function random(_d,rp){if(rp===void 0&&(_d===void 0?(_d=0,rp=1):(rp=_d,_d=void 0)),rp.length){var np,ap=rp.length;_d||(_d=createTypedArray("float32",ap));var sp=createTypedArray("float32",ap),lp=BMMath.random();for(np=0;np<ap;np+=1)sp[np]=_d[np]+lp*(rp[np]-_d[np]);return sp}_d===void 0&&(_d=0);var up=BMMath.random();return _d+up*(rp-_d)}function createPath(_d,rp,np,ap){var sp,lp=_d.length,up=shapePool.newElement();up.setPathData(!!ap,lp);var cp=[0,0],dp,fp;for(sp=0;sp<lp;sp+=1)dp=rp&&rp[sp]?rp[sp]:cp,fp=np&&np[sp]?np[sp]:cp,up.setTripleAt(_d[sp][0],_d[sp][1],fp[0]+_d[sp][0],fp[1]+_d[sp][1],dp[0]+_d[sp][0],dp[1]+_d[sp][1],sp,!0);return up}function initiateExpression(elem,data,property){function noOp(_d){return _d}if(!elem.globalData.renderConfig.runExpressions)return noOp;var val=data.x,needsVelocity=/velocity(?![\w\d])/.test(val),_needsRandom=val.indexOf("random")!==-1,elemType=elem.data.ty,transform,$bm_transform,content,effect,thisProperty=property;thisProperty.valueAtTime=thisProperty.getValueAtTime,Object.defineProperty(thisProperty,"value",{get:function(){return thisProperty.v}}),elem.comp.frameDuration=1/elem.comp.globalData.frameRate,elem.comp.displayStartTime=0;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,width=elem.data.sw?elem.data.sw:0,height=elem.data.sh?elem.data.sh:0,name=elem.data.nm,loopIn,loop_in,loopOut,loop_out,smooth,toWorld,fromWorld,fromComp,toComp,fromCompToSurface,position,rotation,anchorPoint,scale,thisLayer,thisComp,mask,valueAtTime,velocityAtTime,scoped_bm_rt,expression_function=eval("[function _expression_function(){"+val+";scoped_bm_rt=$bm_rt}]")[0],numKeys=property.kf?data.k.length:0,active=!this.data||this.data.hd!==!0,wiggle=(function _d(rp,np){var ap,sp,lp=this.pv.length?this.pv.length:1,up=createTypedArray("float32",lp);rp=5;var cp=Math.floor(time*rp);for(ap=0,sp=0;ap<cp;){for(sp=0;sp<lp;sp+=1)up[sp]+=-np+np*2*BMMath.random();ap+=1}var dp=time*rp,fp=dp-Math.floor(dp),pp=createTypedArray("float32",lp);if(lp>1){for(sp=0;sp<lp;sp+=1)pp[sp]=this.pv[sp]+up[sp]+(-np+np*2*BMMath.random())*fp;return pp}return this.pv+up[0]+(-np+np*2*BMMath.random())*fp}).bind(this);thisProperty.loopIn&&(loopIn=thisProperty.loopIn.bind(thisProperty),loop_in=loopIn),thisProperty.loopOut&&(loopOut=thisProperty.loopOut.bind(thisProperty),loop_out=loopOut),thisProperty.smooth&&(smooth=thisProperty.smooth.bind(thisProperty));function loopInDuration(_d,rp){return loopIn(_d,rp,!0)}function loopOutDuration(_d,rp){return loopOut(_d,rp,!0)}this.getValueAtTime&&(valueAtTime=this.getValueAtTime.bind(this)),this.getVelocityAtTime&&(velocityAtTime=this.getVelocityAtTime.bind(this));var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface);function lookAt(_d,rp){var np=[rp[0]-_d[0],rp[1]-_d[1],rp[2]-_d[2]],ap=Math.atan2(np[0],Math.sqrt(np[1]*np[1]+np[2]*np[2]))/degToRads,sp=-Math.atan2(np[1],np[2])/degToRads;return[sp,ap,0]}function easeOut(_d,rp,np,ap,sp){return applyEase(easeOutBez,_d,rp,np,ap,sp)}function easeIn(_d,rp,np,ap,sp){return applyEase(easeInBez,_d,rp,np,ap,sp)}function ease(_d,rp,np,ap,sp){return applyEase(easeInOutBez,_d,rp,np,ap,sp)}function applyEase(_d,rp,np,ap,sp,lp){sp===void 0?(sp=np,lp=ap):rp=(rp-np)/(ap-np),rp>1?rp=1:rp<0&&(rp=0);var up=_d(rp);if($bm_isInstanceOfArray(sp)){var cp,dp=sp.length,fp=createTypedArray("float32",dp);for(cp=0;cp<dp;cp+=1)fp[cp]=(lp[cp]-sp[cp])*up+sp[cp];return fp}return(lp-sp)*up+sp}function nearestKey(_d){var rp,np=data.k.length,ap,sp;if(!data.k.length||typeof data.k[0]=="number")ap=0,sp=0;else if(ap=-1,_d*=elem.comp.globalData.frameRate,_d<data.k[0].t)ap=1,sp=data.k[0].t;else{for(rp=0;rp<np-1;rp+=1)if(_d===data.k[rp].t){ap=rp+1,sp=data.k[rp].t;break}else if(_d>data.k[rp].t&&_d<data.k[rp+1].t){_d-data.k[rp].t>data.k[rp+1].t-_d?(ap=rp+2,sp=data.k[rp+1].t):(ap=rp+1,sp=data.k[rp].t);break}ap===-1&&(ap=rp+1,sp=data.k[rp].t)}var lp={};return lp.index=ap,lp.time=sp/elem.comp.globalData.frameRate,lp}function key(_d){var rp,np,ap;if(!data.k.length||typeof data.k[0]=="number")throw new Error("The property has no keyframe at index "+_d);_d-=1,rp={time:data.k[_d].t/elem.comp.globalData.frameRate,value:[]};var sp=Object.prototype.hasOwnProperty.call(data.k[_d],"s")?data.k[_d].s:data.k[_d-1].e;for(ap=sp.length,np=0;np<ap;np+=1)rp[np]=sp[np],rp.value[np]=sp[np];return rp}function framesToTime(_d,rp){return rp||(rp=elem.comp.globalData.frameRate),_d/rp}function timeToFrames(_d,rp){return!_d&&_d!==0&&(_d=time),rp||(rp=elem.comp.globalData.frameRate),_d*rp}function seedRandom(_d){BMMath.seedrandom(randSeed+_d)}function sourceRectAtTime(){return elem.sourceRectAtTime()}function substring(_d,rp){return typeof value=="string"?rp===void 0?value.substring(_d):value.substring(_d,rp):""}function substr(_d,rp){return typeof value=="string"?rp===void 0?value.substr(_d):value.substr(_d,rp):""}function posterizeTime(_d){time=_d===0?0:Math.floor(time*_d)/_d,value=valueAtTime(time)}var time,velocity,value,text,textIndex,textTotal,selectorValue,index=elem.data.ind,hasParent=!!(elem.hierarchy&&elem.hierarchy.length),parent,randSeed=Math.floor(Math.random()*1e6),globalData=elem.globalData;function executeExpression(_d){return value=_d,this.frameExpressionId===elem.globalData.frameId&&this.propType!=="textSelector"?value:(this.propType==="textSelector"&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),thisLayer||(text=elem.layerInterface.text,thisLayer=elem.layerInterface,thisComp=elem.comp.compInterface,toWorld=thisLayer.toWorld.bind(thisLayer),fromWorld=thisLayer.fromWorld.bind(thisLayer),fromComp=thisLayer.fromComp.bind(thisLayer),toComp=thisLayer.toComp.bind(thisLayer),mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null,fromCompToSurface=fromComp),transform||(transform=elem.layerInterface("ADBE Transform Group"),$bm_transform=transform,transform&&(anchorPoint=transform.anchorPoint)),elemType===4&&!content&&(content=thisLayer("ADBE Root Vectors Group")),effect||(effect=thisLayer(4)),hasParent=!!(elem.hierarchy&&elem.hierarchy.length),hasParent&&!parent&&(parent=elem.hierarchy[0].layerInterface),time=this.comp.renderedFrame/this.comp.globalData.frameRate,_needsRandom&&seedRandom(randSeed+time),needsVelocity&&(velocity=velocityAtTime(time)),expression_function(),this.frameExpressionId=elem.globalData.frameId,scoped_bm_rt=scoped_bm_rt.propType===propTypes.SHAPE?scoped_bm_rt.v:scoped_bm_rt,scoped_bm_rt)}return executeExpression.__preventDeadCodeRemoval=[$bm_transform,anchorPoint,time,velocity,inPoint,outPoint,width,height,name,loop_in,loop_out,smooth,toComp,fromCompToSurface,toWorld,fromWorld,mask,position,rotation,scale,thisComp,numKeys,active,wiggle,loopInDuration,loopOutDuration,comp,lookAt,easeOut,easeIn,ease,nearestKey,key,text,textIndex,textTotal,selectorValue,framesToTime,timeToFrames,sourceRectAtTime,substring,substr,posterizeTime,index,globalData],executeExpression}return ob.initiateExpression=initiateExpression,ob.__preventDeadCodeRemoval=[window,document,XMLHttpRequest,fetch,frames,$bm_neg,add,$bm_sum,$bm_sub,$bm_mul,$bm_div,$bm_mod,clamp,radians_to_degrees,degreesToRadians,degrees_to_radians,normalize,rgbToHsl,hslToRgb,linear,random,createPath,_lottieGlobal],ob.resetFrame=resetFrame,ob}(),Expressions=function(){var _d={};_d.initExpressions=rp,_d.resetFrame=ExpressionManager.resetFrame;function rp(np){var ap=0,sp=[];function lp(){ap+=1}function up(){ap-=1,ap===0&&dp()}function cp(fp){sp.indexOf(fp)===-1&&sp.push(fp)}function dp(){var fp,pp=sp.length;for(fp=0;fp<pp;fp+=1)sp[fp].release();sp.length=0}np.renderer.compInterface=CompExpressionInterface(np.renderer),np.renderer.globalData.projectInterface.registerComposition(np.renderer),np.renderer.globalData.pushExpression=lp,np.renderer.globalData.popExpression=up,np.renderer.globalData.registerExpressionProperty=cp}return _d}(),MaskManagerInterface=function(){function _d(np,ap){this._mask=np,this._data=ap}Object.defineProperty(_d.prototype,"maskPath",{get:function(){return this._mask.prop.k&&this._mask.prop.getValue(),this._mask.prop}}),Object.defineProperty(_d.prototype,"maskOpacity",{get:function(){return this._mask.op.k&&this._mask.op.getValue(),this._mask.op.v*100}});var rp=function(ap){var sp=createSizedArray(ap.viewData.length),lp,up=ap.viewData.length;for(lp=0;lp<up;lp+=1)sp[lp]=new _d(ap.viewData[lp],ap.masksProperties[lp]);var cp=function(fp){for(lp=0;lp<up;){if(ap.masksProperties[lp].nm===fp)return sp[lp];lp+=1}return null};return cp};return rp}(),ExpressionPropertyInterface=function(){var _d={pv:0,v:0,mult:1},rp={pv:[0,0,0],v:[0,0,0],mult:1};function np(up,cp,dp){Object.defineProperty(up,"velocity",{get:function(){return cp.getVelocityAtTime(cp.comp.currentFrame)}}),up.numKeys=cp.keyframes?cp.keyframes.length:0,up.key=function(fp){if(!up.numKeys)return 0;var pp="";"s"in cp.keyframes[fp-1]?pp=cp.keyframes[fp-1].s:"e"in cp.keyframes[fp-2]?pp=cp.keyframes[fp-2].e:pp=cp.keyframes[fp-2].s;var hp=dp==="unidimensional"?new Number(pp):Object.assign({},pp);return hp.time=cp.keyframes[fp-1].t/cp.elem.comp.globalData.frameRate,hp.value=dp==="unidimensional"?pp[0]:pp,hp},up.valueAtTime=cp.getValueAtTime,up.speedAtTime=cp.getSpeedAtTime,up.velocityAtTime=cp.getVelocityAtTime,up.propertyGroup=cp.propertyGroup}function ap(up){(!up||!("pv"in up))&&(up=_d);var cp=1/up.mult,dp=up.pv*cp,fp=new Number(dp);return fp.value=dp,np(fp,up,"unidimensional"),function(){return up.k&&up.getValue(),dp=up.v*cp,fp.value!==dp&&(fp=new Number(dp),fp.value=dp,np(fp,up,"unidimensional")),fp}}function sp(up){(!up||!("pv"in up))&&(up=rp);var cp=1/up.mult,dp=up.data&&up.data.l||up.pv.length,fp=createTypedArray("float32",dp),pp=createTypedArray("float32",dp);return fp.value=pp,np(fp,up,"multidimensional"),function(){up.k&&up.getValue();for(var hp=0;hp<dp;hp+=1)pp[hp]=up.v[hp]*cp,fp[hp]=pp[hp];return fp}}function lp(){return _d}return function(up){return up?up.propType==="unidimensional"?ap(up):sp(up):lp}}(),TransformExpressionInterface=function(){return function(_d){function rp(up){switch(up){case"scale":case"Scale":case"ADBE Scale":case 6:return rp.scale;case"rotation":case"Rotation":case"ADBE Rotation":case"ADBE Rotate Z":case 10:return rp.rotation;case"ADBE Rotate X":return rp.xRotation;case"ADBE Rotate Y":return rp.yRotation;case"position":case"Position":case"ADBE Position":case 2:return rp.position;case"ADBE Position_0":return rp.xPosition;case"ADBE Position_1":return rp.yPosition;case"ADBE Position_2":return rp.zPosition;case"anchorPoint":case"AnchorPoint":case"Anchor Point":case"ADBE AnchorPoint":case 1:return rp.anchorPoint;case"opacity":case"Opacity":case 11:return rp.opacity;default:return null}}Object.defineProperty(rp,"rotation",{get:ExpressionPropertyInterface(_d.r||_d.rz)}),Object.defineProperty(rp,"zRotation",{get:ExpressionPropertyInterface(_d.rz||_d.r)}),Object.defineProperty(rp,"xRotation",{get:ExpressionPropertyInterface(_d.rx)}),Object.defineProperty(rp,"yRotation",{get:ExpressionPropertyInterface(_d.ry)}),Object.defineProperty(rp,"scale",{get:ExpressionPropertyInterface(_d.s)});var np,ap,sp,lp;return _d.p?lp=ExpressionPropertyInterface(_d.p):(np=ExpressionPropertyInterface(_d.px),ap=ExpressionPropertyInterface(_d.py),_d.pz&&(sp=ExpressionPropertyInterface(_d.pz))),Object.defineProperty(rp,"position",{get:function(){return _d.p?lp():[np(),ap(),sp?sp():0]}}),Object.defineProperty(rp,"xPosition",{get:ExpressionPropertyInterface(_d.px)}),Object.defineProperty(rp,"yPosition",{get:ExpressionPropertyInterface(_d.py)}),Object.defineProperty(rp,"zPosition",{get:ExpressionPropertyInterface(_d.pz)}),Object.defineProperty(rp,"anchorPoint",{get:ExpressionPropertyInterface(_d.a)}),Object.defineProperty(rp,"opacity",{get:ExpressionPropertyInterface(_d.o)}),Object.defineProperty(rp,"skew",{get:ExpressionPropertyInterface(_d.sk)}),Object.defineProperty(rp,"skewAxis",{get:ExpressionPropertyInterface(_d.sa)}),Object.defineProperty(rp,"orientation",{get:ExpressionPropertyInterface(_d.or)}),rp}}(),LayerExpressionInterface=function(){function _d(fp){var pp=new Matrix;if(fp!==void 0){var hp=this._elem.finalTransform.mProp.getValueAtTime(fp);hp.clone(pp)}else{var mp=this._elem.finalTransform.mProp;mp.applyToMatrix(pp)}return pp}function rp(fp,pp){var hp=this.getMatrix(pp);return hp.props[12]=0,hp.props[13]=0,hp.props[14]=0,this.applyPoint(hp,fp)}function np(fp,pp){var hp=this.getMatrix(pp);return this.applyPoint(hp,fp)}function ap(fp,pp){var hp=this.getMatrix(pp);return hp.props[12]=0,hp.props[13]=0,hp.props[14]=0,this.invertPoint(hp,fp)}function sp(fp,pp){var hp=this.getMatrix(pp);return this.invertPoint(hp,fp)}function lp(fp,pp){if(this._elem.hierarchy&&this._elem.hierarchy.length){var hp,mp=this._elem.hierarchy.length;for(hp=0;hp<mp;hp+=1)this._elem.hierarchy[hp].finalTransform.mProp.applyToMatrix(fp)}return fp.applyToPointArray(pp[0],pp[1],pp[2]||0)}function up(fp,pp){if(this._elem.hierarchy&&this._elem.hierarchy.length){var hp,mp=this._elem.hierarchy.length;for(hp=0;hp<mp;hp+=1)this._elem.hierarchy[hp].finalTransform.mProp.applyToMatrix(fp)}return fp.inversePoint(pp)}function cp(fp){var pp=new Matrix;if(pp.reset(),this._elem.finalTransform.mProp.applyToMatrix(pp),this._elem.hierarchy&&this._elem.hierarchy.length){var hp,mp=this._elem.hierarchy.length;for(hp=0;hp<mp;hp+=1)this._elem.hierarchy[hp].finalTransform.mProp.applyToMatrix(pp);return pp.inversePoint(fp)}return pp.inversePoint(fp)}function dp(){return[1,1,1,1]}return function(fp){var pp;function hp(xp){gp.mask=new MaskManagerInterface(xp,fp)}function mp(xp){gp.effect=xp}function gp(xp){switch(xp){case"ADBE Root Vectors Group":case"Contents":case 2:return gp.shapeInterface;case 1:case 6:case"Transform":case"transform":case"ADBE Transform Group":return pp;case 4:case"ADBE Effect Parade":case"effects":case"Effects":return gp.effect;case"ADBE Text Properties":return gp.textInterface;default:return null}}gp.getMatrix=_d,gp.invertPoint=up,gp.applyPoint=lp,gp.toWorld=np,gp.toWorldVec=rp,gp.fromWorld=sp,gp.fromWorldVec=ap,gp.toComp=np,gp.fromComp=cp,gp.sampleImage=dp,gp.sourceRectAtTime=fp.sourceRectAtTime.bind(fp),gp._elem=fp,pp=TransformExpressionInterface(fp.finalTransform.mProp);var vp=getDescriptor(pp,"anchorPoint");return Object.defineProperties(gp,{hasParent:{get:function(){return fp.hierarchy.length}},parent:{get:function(){return fp.hierarchy[0].layerInterface}},rotation:getDescriptor(pp,"rotation"),scale:getDescriptor(pp,"scale"),position:getDescriptor(pp,"position"),opacity:getDescriptor(pp,"opacity"),anchorPoint:vp,anchor_point:vp,transform:{get:function(){return pp}},active:{get:function(){return fp.isInRange}}}),gp.startTime=fp.data.st,gp.index=fp.data.ind,gp.source=fp.data.refId,gp.height=fp.data.ty===0?fp.data.h:100,gp.width=fp.data.ty===0?fp.data.w:100,gp.inPoint=fp.data.ip/fp.comp.globalData.frameRate,gp.outPoint=fp.data.op/fp.comp.globalData.frameRate,gp._name=fp.data.nm,gp.registerMaskInterface=hp,gp.registerEffectsInterface=mp,gp}}(),propertyGroupFactory=function(){return function(_d,rp){return function(np){return np=np===void 0?1:np,np<=0?_d:rp(np-1)}}}(),PropertyInterface=function(){return function(_d,rp){var np={_name:_d};function ap(sp){return sp=sp===void 0?1:sp,sp<=0?np:rp(sp-1)}return ap}}(),EffectsExpressionInterface=function(){var _d={createEffectsInterface:rp};function rp(sp,lp){if(sp.effectsManager){var up=[],cp=sp.data.ef,dp,fp=sp.effectsManager.effectElements.length;for(dp=0;dp<fp;dp+=1)up.push(np(cp[dp],sp.effectsManager.effectElements[dp],lp,sp));var pp=sp.data.ef||[],hp=function(gp){for(dp=0,fp=pp.length;dp<fp;){if(gp===pp[dp].nm||gp===pp[dp].mn||gp===pp[dp].ix)return up[dp];dp+=1}return null};return Object.defineProperty(hp,"numProperties",{get:function(){return pp.length}}),hp}return null}function np(sp,lp,up,cp){function dp(gp){for(var vp=sp.ef,xp=0,Sp=vp.length;xp<Sp;){if(gp===vp[xp].nm||gp===vp[xp].mn||gp===vp[xp].ix)return vp[xp].ty===5?pp[xp]:pp[xp]();xp+=1}throw new Error}var fp=propertyGroupFactory(dp,up),pp=[],hp,mp=sp.ef.length;for(hp=0;hp<mp;hp+=1)sp.ef[hp].ty===5?pp.push(np(sp.ef[hp],lp.effectElements[hp],lp.effectElements[hp].propertyGroup,cp)):pp.push(ap(lp.effectElements[hp],sp.ef[hp].ty,cp,fp));return sp.mn==="ADBE Color Control"&&Object.defineProperty(dp,"color",{get:function(){return pp[0]()}}),Object.defineProperties(dp,{numProperties:{get:function(){return sp.np}},_name:{value:sp.nm},propertyGroup:{value:fp}}),dp.enabled=sp.en!==0,dp.active=dp.enabled,dp}function ap(sp,lp,up,cp){var dp=ExpressionPropertyInterface(sp.p);function fp(){return lp===10?up.comp.compInterface(sp.p.v):dp()}return sp.p.setGroupProperty&&sp.p.setGroupProperty(PropertyInterface("",cp)),fp}return _d}(),ShapePathInterface=function(){return function(rp,np,ap){var sp=np.sh;function lp(cp){return cp==="Shape"||cp==="shape"||cp==="Path"||cp==="path"||cp==="ADBE Vector Shape"||cp===2?lp.path:null}var up=propertyGroupFactory(lp,ap);return sp.setGroupProperty(PropertyInterface("Path",up)),Object.defineProperties(lp,{path:{get:function(){return sp.k&&sp.getValue(),sp}},shape:{get:function(){return sp.k&&sp.getValue(),sp}},_name:{value:rp.nm},ix:{value:rp.ix},propertyIndex:{value:rp.ix},mn:{value:rp.mn},propertyGroup:{value:ap}}),lp}}(),ShapeExpressionInterface=function(){function _d(vp,xp,Sp){var yp=[],bp,Ep=vp?vp.length:0;for(bp=0;bp<Ep;bp+=1)vp[bp].ty==="gr"?yp.push(np(vp[bp],xp[bp],Sp)):vp[bp].ty==="fl"?yp.push(ap(vp[bp],xp[bp],Sp)):vp[bp].ty==="st"?yp.push(up(vp[bp],xp[bp],Sp)):vp[bp].ty==="tm"?yp.push(cp(vp[bp],xp[bp],Sp)):vp[bp].ty==="tr"||(vp[bp].ty==="el"?yp.push(fp(vp[bp],xp[bp],Sp)):vp[bp].ty==="sr"?yp.push(pp(vp[bp],xp[bp],Sp)):vp[bp].ty==="sh"?yp.push(ShapePathInterface(vp[bp],xp[bp],Sp)):vp[bp].ty==="rc"?yp.push(hp(vp[bp],xp[bp],Sp)):vp[bp].ty==="rd"?yp.push(mp(vp[bp],xp[bp],Sp)):vp[bp].ty==="rp"?yp.push(gp(vp[bp],xp[bp],Sp)):vp[bp].ty==="gf"?yp.push(sp(vp[bp],xp[bp],Sp)):yp.push(lp(vp[bp],xp[bp])));return yp}function rp(vp,xp,Sp){var yp,bp=function(_p){for(var Rp=0,$p=yp.length;Rp<$p;){if(yp[Rp]._name===_p||yp[Rp].mn===_p||yp[Rp].propertyIndex===_p||yp[Rp].ix===_p||yp[Rp].ind===_p)return yp[Rp];Rp+=1}return typeof _p=="number"?yp[_p-1]:null};bp.propertyGroup=propertyGroupFactory(bp,Sp),yp=_d(vp.it,xp.it,bp.propertyGroup),bp.numProperties=yp.length;var Ep=dp(vp.it[vp.it.length-1],xp.it[xp.it.length-1],bp.propertyGroup);return bp.transform=Ep,bp.propertyIndex=vp.cix,bp._name=vp.nm,bp}function np(vp,xp,Sp){var yp=function(_p){switch(_p){case"ADBE Vectors Group":case"Contents":case 2:return yp.content;default:return yp.transform}};yp.propertyGroup=propertyGroupFactory(yp,Sp);var bp=rp(vp,xp,yp.propertyGroup),Ep=dp(vp.it[vp.it.length-1],xp.it[xp.it.length-1],yp.propertyGroup);return yp.content=bp,yp.transform=Ep,Object.defineProperty(yp,"_name",{get:function(){return vp.nm}}),yp.numProperties=vp.np,yp.propertyIndex=vp.ix,yp.nm=vp.nm,yp.mn=vp.mn,yp}function ap(vp,xp,Sp){function yp(bp){return bp==="Color"||bp==="color"?yp.color:bp==="Opacity"||bp==="opacity"?yp.opacity:null}return Object.defineProperties(yp,{color:{get:ExpressionPropertyInterface(xp.c)},opacity:{get:ExpressionPropertyInterface(xp.o)},_name:{value:vp.nm},mn:{value:vp.mn}}),xp.c.setGroupProperty(PropertyInterface("Color",Sp)),xp.o.setGroupProperty(PropertyInterface("Opacity",Sp)),yp}function sp(vp,xp,Sp){function yp(bp){return bp==="Start Point"||bp==="start point"?yp.startPoint:bp==="End Point"||bp==="end point"?yp.endPoint:bp==="Opacity"||bp==="opacity"?yp.opacity:null}return Object.defineProperties(yp,{startPoint:{get:ExpressionPropertyInterface(xp.s)},endPoint:{get:ExpressionPropertyInterface(xp.e)},opacity:{get:ExpressionPropertyInterface(xp.o)},type:{get:function(){return"a"}},_name:{value:vp.nm},mn:{value:vp.mn}}),xp.s.setGroupProperty(PropertyInterface("Start Point",Sp)),xp.e.setGroupProperty(PropertyInterface("End Point",Sp)),xp.o.setGroupProperty(PropertyInterface("Opacity",Sp)),yp}function lp(){function vp(){return null}return vp}function up(vp,xp,Sp){var yp=propertyGroupFactory($p,Sp),bp=propertyGroupFactory(Rp,yp);function Ep(Cp){Object.defineProperty(Rp,vp.d[Cp].nm,{get:ExpressionPropertyInterface(xp.d.dataProps[Cp].p)})}var wp,_p=vp.d?vp.d.length:0,Rp={};for(wp=0;wp<_p;wp+=1)Ep(wp),xp.d.dataProps[wp].p.setGroupProperty(bp);function $p(Cp){return Cp==="Color"||Cp==="color"?$p.color:Cp==="Opacity"||Cp==="opacity"?$p.opacity:Cp==="Stroke Width"||Cp==="stroke width"?$p.strokeWidth:null}return Object.defineProperties($p,{color:{get:ExpressionPropertyInterface(xp.c)},opacity:{get:ExpressionPropertyInterface(xp.o)},strokeWidth:{get:ExpressionPropertyInterface(xp.w)},dash:{get:function(){return Rp}},_name:{value:vp.nm},mn:{value:vp.mn}}),xp.c.setGroupProperty(PropertyInterface("Color",yp)),xp.o.setGroupProperty(PropertyInterface("Opacity",yp)),xp.w.setGroupProperty(PropertyInterface("Stroke Width",yp)),$p}function cp(vp,xp,Sp){function yp(Ep){return Ep===vp.e.ix||Ep==="End"||Ep==="end"?yp.end:Ep===vp.s.ix?yp.start:Ep===vp.o.ix?yp.offset:null}var bp=propertyGroupFactory(yp,Sp);return yp.propertyIndex=vp.ix,xp.s.setGroupProperty(PropertyInterface("Start",bp)),xp.e.setGroupProperty(PropertyInterface("End",bp)),xp.o.setGroupProperty(PropertyInterface("Offset",bp)),yp.propertyIndex=vp.ix,yp.propertyGroup=Sp,Object.defineProperties(yp,{start:{get:ExpressionPropertyInterface(xp.s)},end:{get:ExpressionPropertyInterface(xp.e)},offset:{get:ExpressionPropertyInterface(xp.o)},_name:{value:vp.nm}}),yp.mn=vp.mn,yp}function dp(vp,xp,Sp){function yp(Ep){return vp.a.ix===Ep||Ep==="Anchor Point"?yp.anchorPoint:vp.o.ix===Ep||Ep==="Opacity"?yp.opacity:vp.p.ix===Ep||Ep==="Position"?yp.position:vp.r.ix===Ep||Ep==="Rotation"||Ep==="ADBE Vector Rotation"?yp.rotation:vp.s.ix===Ep||Ep==="Scale"?yp.scale:vp.sk&&vp.sk.ix===Ep||Ep==="Skew"?yp.skew:vp.sa&&vp.sa.ix===Ep||Ep==="Skew Axis"?yp.skewAxis:null}var bp=propertyGroupFactory(yp,Sp);return xp.transform.mProps.o.setGroupProperty(PropertyInterface("Opacity",bp)),xp.transform.mProps.p.setGroupProperty(PropertyInterface("Position",bp)),xp.transform.mProps.a.setGroupProperty(PropertyInterface("Anchor Point",bp)),xp.transform.mProps.s.setGroupProperty(PropertyInterface("Scale",bp)),xp.transform.mProps.r.setGroupProperty(PropertyInterface("Rotation",bp)),xp.transform.mProps.sk&&(xp.transform.mProps.sk.setGroupProperty(PropertyInterface("Skew",bp)),xp.transform.mProps.sa.setGroupProperty(PropertyInterface("Skew Angle",bp))),xp.transform.op.setGroupProperty(PropertyInterface("Opacity",bp)),Object.defineProperties(yp,{opacity:{get:ExpressionPropertyInterface(xp.transform.mProps.o)},position:{get:ExpressionPropertyInterface(xp.transform.mProps.p)},anchorPoint:{get:ExpressionPropertyInterface(xp.transform.mProps.a)},scale:{get:ExpressionPropertyInterface(xp.transform.mProps.s)},rotation:{get:ExpressionPropertyInterface(xp.transform.mProps.r)},skew:{get:ExpressionPropertyInterface(xp.transform.mProps.sk)},skewAxis:{get:ExpressionPropertyInterface(xp.transform.mProps.sa)},_name:{value:vp.nm}}),yp.ty="tr",yp.mn=vp.mn,yp.propertyGroup=Sp,yp}function fp(vp,xp,Sp){function yp(wp){return vp.p.ix===wp?yp.position:vp.s.ix===wp?yp.size:null}var bp=propertyGroupFactory(yp,Sp);yp.propertyIndex=vp.ix;var Ep=xp.sh.ty==="tm"?xp.sh.prop:xp.sh;return Ep.s.setGroupProperty(PropertyInterface("Size",bp)),Ep.p.setGroupProperty(PropertyInterface("Position",bp)),Object.defineProperties(yp,{size:{get:ExpressionPropertyInterface(Ep.s)},position:{get:ExpressionPropertyInterface(Ep.p)},_name:{value:vp.nm}}),yp.mn=vp.mn,yp}function pp(vp,xp,Sp){function yp(wp){return vp.p.ix===wp?yp.position:vp.r.ix===wp?yp.rotation:vp.pt.ix===wp?yp.points:vp.or.ix===wp||wp==="ADBE Vector Star Outer Radius"?yp.outerRadius:vp.os.ix===wp?yp.outerRoundness:vp.ir&&(vp.ir.ix===wp||wp==="ADBE Vector Star Inner Radius")?yp.innerRadius:vp.is&&vp.is.ix===wp?yp.innerRoundness:null}var bp=propertyGroupFactory(yp,Sp),Ep=xp.sh.ty==="tm"?xp.sh.prop:xp.sh;return yp.propertyIndex=vp.ix,Ep.or.setGroupProperty(PropertyInterface("Outer Radius",bp)),Ep.os.setGroupProperty(PropertyInterface("Outer Roundness",bp)),Ep.pt.setGroupProperty(PropertyInterface("Points",bp)),Ep.p.setGroupProperty(PropertyInterface("Position",bp)),Ep.r.setGroupProperty(PropertyInterface("Rotation",bp)),vp.ir&&(Ep.ir.setGroupProperty(PropertyInterface("Inner Radius",bp)),Ep.is.setGroupProperty(PropertyInterface("Inner Roundness",bp))),Object.defineProperties(yp,{position:{get:ExpressionPropertyInterface(Ep.p)},rotation:{get:ExpressionPropertyInterface(Ep.r)},points:{get:ExpressionPropertyInterface(Ep.pt)},outerRadius:{get:ExpressionPropertyInterface(Ep.or)},outerRoundness:{get:ExpressionPropertyInterface(Ep.os)},innerRadius:{get:ExpressionPropertyInterface(Ep.ir)},innerRoundness:{get:ExpressionPropertyInterface(Ep.is)},_name:{value:vp.nm}}),yp.mn=vp.mn,yp}function hp(vp,xp,Sp){function yp(wp){return vp.p.ix===wp?yp.position:vp.r.ix===wp?yp.roundness:vp.s.ix===wp||wp==="Size"||wp==="ADBE Vector Rect Size"?yp.size:null}var bp=propertyGroupFactory(yp,Sp),Ep=xp.sh.ty==="tm"?xp.sh.prop:xp.sh;return yp.propertyIndex=vp.ix,Ep.p.setGroupProperty(PropertyInterface("Position",bp)),Ep.s.setGroupProperty(PropertyInterface("Size",bp)),Ep.r.setGroupProperty(PropertyInterface("Rotation",bp)),Object.defineProperties(yp,{position:{get:ExpressionPropertyInterface(Ep.p)},roundness:{get:ExpressionPropertyInterface(Ep.r)},size:{get:ExpressionPropertyInterface(Ep.s)},_name:{value:vp.nm}}),yp.mn=vp.mn,yp}function mp(vp,xp,Sp){function yp(wp){return vp.r.ix===wp||wp==="Round Corners 1"?yp.radius:null}var bp=propertyGroupFactory(yp,Sp),Ep=xp;return yp.propertyIndex=vp.ix,Ep.rd.setGroupProperty(PropertyInterface("Radius",bp)),Object.defineProperties(yp,{radius:{get:ExpressionPropertyInterface(Ep.rd)},_name:{value:vp.nm}}),yp.mn=vp.mn,yp}function gp(vp,xp,Sp){function yp(wp){return vp.c.ix===wp||wp==="Copies"?yp.copies:vp.o.ix===wp||wp==="Offset"?yp.offset:null}var bp=propertyGroupFactory(yp,Sp),Ep=xp;return yp.propertyIndex=vp.ix,Ep.c.setGroupProperty(PropertyInterface("Copies",bp)),Ep.o.setGroupProperty(PropertyInterface("Offset",bp)),Object.defineProperties(yp,{copies:{get:ExpressionPropertyInterface(Ep.c)},offset:{get:ExpressionPropertyInterface(Ep.o)},_name:{value:vp.nm}}),yp.mn=vp.mn,yp}return function(vp,xp,Sp){var yp;function bp(wp){if(typeof wp=="number")return wp=wp===void 0?1:wp,wp===0?Sp:yp[wp-1];for(var _p=0,Rp=yp.length;_p<Rp;){if(yp[_p]._name===wp)return yp[_p];_p+=1}return null}function Ep(){return Sp}return bp.propertyGroup=propertyGroupFactory(bp,Ep),yp=_d(vp,xp,bp.propertyGroup),bp.numProperties=yp.length,bp._name="Contents",bp}}(),TextExpressionInterface=function(){return function(_d){var rp;function np(ap){switch(ap){case"ADBE Text Document":return np.sourceText;default:return null}}return Object.defineProperty(np,"sourceText",{get:function(){_d.textProperty.getValue();var sp=_d.textProperty.currentData.t;return(!rp||sp!==rp.value)&&(rp=new String(sp),rp.value=sp||new String(sp),Object.defineProperty(rp,"style",{get:function(){return{fillColor:_d.textProperty.currentData.fc}}})),rp}}),np}}();function _typeof(_d){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof=function(np){return typeof np}:_typeof=function(np){return np&&typeof Symbol=="function"&&np.constructor===Symbol&&np!==Symbol.prototype?"symbol":typeof np},_typeof(_d)}var FootageInterface=function(){var _d=function(ap){var sp="",lp=ap.getFootageData();function up(){return sp="",lp=ap.getFootageData(),cp}function cp(dp){if(lp[dp])return sp=dp,lp=lp[dp],_typeof(lp)==="object"?cp:lp;var fp=dp.indexOf(sp);if(fp!==-1){var pp=parseInt(dp.substr(fp+sp.length),10);return lp=lp[pp],_typeof(lp)==="object"?cp:lp}return""}return up},rp=function(ap){function sp(lp){return lp==="Outline"?sp.outlineInterface():null}return sp._name="Outline",sp.outlineInterface=_d(ap),sp};return function(np){function ap(sp){return sp==="Data"?ap.dataInterface:null}return ap._name="Data",ap.dataInterface=rp(np),ap}}(),interfaces={layer:LayerExpressionInterface,effects:EffectsExpressionInterface,comp:CompExpressionInterface,shape:ShapeExpressionInterface,text:TextExpressionInterface,footage:FootageInterface};function getInterface(_d){return interfaces[_d]||null}var expressionHelpers=function(){function _d(up,cp,dp){cp.x&&(dp.k=!0,dp.x=!0,dp.initiateExpression=ExpressionManager.initiateExpression,dp.effectsSequence.push(dp.initiateExpression(up,cp,dp).bind(dp)))}function rp(up){return up*=this.elem.globalData.frameRate,up-=this.offsetTime,up!==this._cachingAtTime.lastFrame&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastFrame<up?this._cachingAtTime.lastIndex:0,this._cachingAtTime.value=this.interpolateValue(up,this._cachingAtTime),this._cachingAtTime.lastFrame=up),this._cachingAtTime.value}function np(up){var cp=-.01,dp=this.getValueAtTime(up),fp=this.getValueAtTime(up+cp),pp=0;if(dp.length){var hp;for(hp=0;hp<dp.length;hp+=1)pp+=Math.pow(fp[hp]-dp[hp],2);pp=Math.sqrt(pp)*100}else pp=0;return pp}function ap(up){if(this.vel!==void 0)return this.vel;var cp=-.001,dp=this.getValueAtTime(up),fp=this.getValueAtTime(up+cp),pp;if(dp.length){pp=createTypedArray("float32",dp.length);var hp;for(hp=0;hp<dp.length;hp+=1)pp[hp]=(fp[hp]-dp[hp])/cp}else pp=(fp-dp)/cp;return pp}function sp(){return this.pv}function lp(up){this.propertyGroup=up}return{searchExpressions:_d,getSpeedAtTime:np,getVelocityAtTime:ap,getValueAtTime:rp,getStaticValueAtTime:sp,setGroupProperty:lp}}();function addPropertyDecorator(){function _d(mp,gp,vp){if(!this.k||!this.keyframes)return this.pv;mp=mp?mp.toLowerCase():"";var xp=this.comp.renderedFrame,Sp=this.keyframes,yp=Sp[Sp.length-1].t;if(xp<=yp)return this.pv;var bp,Ep;vp?(gp?bp=Math.abs(yp-this.elem.comp.globalData.frameRate*gp):bp=Math.max(0,yp-this.elem.data.ip),Ep=yp-bp):((!gp||gp>Sp.length-1)&&(gp=Sp.length-1),Ep=Sp[Sp.length-1-gp].t,bp=yp-Ep);var wp,_p,Rp;if(mp==="pingpong"){var $p=Math.floor((xp-Ep)/bp);if($p%2!==0)return this.getValueAtTime((bp-(xp-Ep)%bp+Ep)/this.comp.globalData.frameRate,0)}else if(mp==="offset"){var Cp=this.getValueAtTime(Ep/this.comp.globalData.frameRate,0),Ap=this.getValueAtTime(yp/this.comp.globalData.frameRate,0),Op=this.getValueAtTime(((xp-Ep)%bp+Ep)/this.comp.globalData.frameRate,0),Lp=Math.floor((xp-Ep)/bp);if(this.pv.length){for(Rp=new Array(Cp.length),_p=Rp.length,wp=0;wp<_p;wp+=1)Rp[wp]=(Ap[wp]-Cp[wp])*Lp+Op[wp];return Rp}return(Ap-Cp)*Lp+Op}else if(mp==="continue"){var Mp=this.getValueAtTime(yp/this.comp.globalData.frameRate,0),kp=this.getValueAtTime((yp-.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(Rp=new Array(Mp.length),_p=Rp.length,wp=0;wp<_p;wp+=1)Rp[wp]=Mp[wp]+(Mp[wp]-kp[wp])*((xp-yp)/this.comp.globalData.frameRate)/5e-4;return Rp}return Mp+(Mp-kp)*((xp-yp)/.001)}return this.getValueAtTime(((xp-Ep)%bp+Ep)/this.comp.globalData.frameRate,0)}function rp(mp,gp,vp){if(!this.k)return this.pv;mp=mp?mp.toLowerCase():"";var xp=this.comp.renderedFrame,Sp=this.keyframes,yp=Sp[0].t;if(xp>=yp)return this.pv;var bp,Ep;vp?(gp?bp=Math.abs(this.elem.comp.globalData.frameRate*gp):bp=Math.max(0,this.elem.data.op-yp),Ep=yp+bp):((!gp||gp>Sp.length-1)&&(gp=Sp.length-1),Ep=Sp[gp].t,bp=Ep-yp);var wp,_p,Rp;if(mp==="pingpong"){var $p=Math.floor((yp-xp)/bp);if($p%2===0)return this.getValueAtTime(((yp-xp)%bp+yp)/this.comp.globalData.frameRate,0)}else if(mp==="offset"){var Cp=this.getValueAtTime(yp/this.comp.globalData.frameRate,0),Ap=this.getValueAtTime(Ep/this.comp.globalData.frameRate,0),Op=this.getValueAtTime((bp-(yp-xp)%bp+yp)/this.comp.globalData.frameRate,0),Lp=Math.floor((yp-xp)/bp)+1;if(this.pv.length){for(Rp=new Array(Cp.length),_p=Rp.length,wp=0;wp<_p;wp+=1)Rp[wp]=Op[wp]-(Ap[wp]-Cp[wp])*Lp;return Rp}return Op-(Ap-Cp)*Lp}else if(mp==="continue"){var Mp=this.getValueAtTime(yp/this.comp.globalData.frameRate,0),kp=this.getValueAtTime((yp+.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(Rp=new Array(Mp.length),_p=Rp.length,wp=0;wp<_p;wp+=1)Rp[wp]=Mp[wp]+(Mp[wp]-kp[wp])*(yp-xp)/.001;return Rp}return Mp+(Mp-kp)*(yp-xp)/.001}return this.getValueAtTime((bp-((yp-xp)%bp+yp))/this.comp.globalData.frameRate,0)}function np(mp,gp){if(!this.k)return this.pv;if(mp=(mp||.4)*.5,gp=Math.floor(gp||5),gp<=1)return this.pv;var vp=this.comp.renderedFrame/this.comp.globalData.frameRate,xp=vp-mp,Sp=vp+mp,yp=gp>1?(Sp-xp)/(gp-1):1,bp=0,Ep=0,wp;this.pv.length?wp=createTypedArray("float32",this.pv.length):wp=0;for(var _p;bp<gp;){if(_p=this.getValueAtTime(xp+bp*yp),this.pv.length)for(Ep=0;Ep<this.pv.length;Ep+=1)wp[Ep]+=_p[Ep];else wp+=_p;bp+=1}if(this.pv.length)for(Ep=0;Ep<this.pv.length;Ep+=1)wp[Ep]/=gp;else wp/=gp;return wp}function ap(mp){this._transformCachingAtTime||(this._transformCachingAtTime={v:new Matrix});var gp=this._transformCachingAtTime.v;if(gp.cloneFromProps(this.pre.props),this.appliedTransformations<1){var vp=this.a.getValueAtTime(mp);gp.translate(-vp[0]*this.a.mult,-vp[1]*this.a.mult,vp[2]*this.a.mult)}if(this.appliedTransformations<2){var xp=this.s.getValueAtTime(mp);gp.scale(xp[0]*this.s.mult,xp[1]*this.s.mult,xp[2]*this.s.mult)}if(this.sk&&this.appliedTransformations<3){var Sp=this.sk.getValueAtTime(mp),yp=this.sa.getValueAtTime(mp);gp.skewFromAxis(-Sp*this.sk.mult,yp*this.sa.mult)}if(this.r&&this.appliedTransformations<4){var bp=this.r.getValueAtTime(mp);gp.rotate(-bp*this.r.mult)}else if(!this.r&&this.appliedTransformations<4){var Ep=this.rz.getValueAtTime(mp),wp=this.ry.getValueAtTime(mp),_p=this.rx.getValueAtTime(mp),Rp=this.or.getValueAtTime(mp);gp.rotateZ(-Ep*this.rz.mult).rotateY(wp*this.ry.mult).rotateX(_p*this.rx.mult).rotateZ(-Rp[2]*this.or.mult).rotateY(Rp[1]*this.or.mult).rotateX(Rp[0]*this.or.mult)}if(this.data.p&&this.data.p.s){var $p=this.px.getValueAtTime(mp),Cp=this.py.getValueAtTime(mp);if(this.data.p.z){var Ap=this.pz.getValueAtTime(mp);gp.translate($p*this.px.mult,Cp*this.py.mult,-Ap*this.pz.mult)}else gp.translate($p*this.px.mult,Cp*this.py.mult,0)}else{var Op=this.p.getValueAtTime(mp);gp.translate(Op[0]*this.p.mult,Op[1]*this.p.mult,-Op[2]*this.p.mult)}return gp}function sp(){return this.v.clone(new Matrix)}var lp=TransformPropertyFactory.getTransformProperty;TransformPropertyFactory.getTransformProperty=function(mp,gp,vp){var xp=lp(mp,gp,vp);return xp.dynamicProperties.length?xp.getValueAtTime=ap.bind(xp):xp.getValueAtTime=sp.bind(xp),xp.setGroupProperty=expressionHelpers.setGroupProperty,xp};var up=PropertyFactory.getProp;PropertyFactory.getProp=function(mp,gp,vp,xp,Sp){var yp=up(mp,gp,vp,xp,Sp);yp.kf?yp.getValueAtTime=expressionHelpers.getValueAtTime.bind(yp):yp.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(yp),yp.setGroupProperty=expressionHelpers.setGroupProperty,yp.loopOut=_d,yp.loopIn=rp,yp.smooth=np,yp.getVelocityAtTime=expressionHelpers.getVelocityAtTime.bind(yp),yp.getSpeedAtTime=expressionHelpers.getSpeedAtTime.bind(yp),yp.numKeys=gp.a===1?gp.k.length:0,yp.propertyIndex=gp.ix;var bp=0;return vp!==0&&(bp=createTypedArray("float32",gp.a===1?gp.k[0].s.length:gp.k.length)),yp._cachingAtTime={lastFrame:initialDefaultFrame,lastIndex:0,value:bp},expressionHelpers.searchExpressions(mp,gp,yp),yp.k&&Sp.addDynamicProperty(yp),yp};function cp(mp){return this._cachingAtTime||(this._cachingAtTime={shapeValue:shapePool.clone(this.pv),lastIndex:0,lastTime:initialDefaultFrame}),mp*=this.elem.globalData.frameRate,mp-=this.offsetTime,mp!==this._cachingAtTime.lastTime&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastTime<mp?this._caching.lastIndex:0,this._cachingAtTime.lastTime=mp,this.interpolateShape(mp,this._cachingAtTime.shapeValue,this._cachingAtTime)),this._cachingAtTime.shapeValue}var dp=ShapePropertyFactory.getConstructorFunction(),fp=ShapePropertyFactory.getKeyframedConstructorFunction();function pp(){}pp.prototype={vertices:function(gp,vp){this.k&&this.getValue();var xp=this.v;vp!==void 0&&(xp=this.getValueAtTime(vp,0));var Sp,yp=xp._length,bp=xp[gp],Ep=xp.v,wp=createSizedArray(yp);for(Sp=0;Sp<yp;Sp+=1)gp==="i"||gp==="o"?wp[Sp]=[bp[Sp][0]-Ep[Sp][0],bp[Sp][1]-Ep[Sp][1]]:wp[Sp]=[bp[Sp][0],bp[Sp][1]];return wp},points:function(gp){return this.vertices("v",gp)},inTangents:function(gp){return this.vertices("i",gp)},outTangents:function(gp){return this.vertices("o",gp)},isClosed:function(){return this.v.c},pointOnPath:function(gp,vp){var xp=this.v;vp!==void 0&&(xp=this.getValueAtTime(vp,0)),this._segmentsLength||(this._segmentsLength=bez.getSegmentsLength(xp));for(var Sp=this._segmentsLength,yp=Sp.lengths,bp=Sp.totalLength*gp,Ep=0,wp=yp.length,_p=0,Rp;Ep<wp;){if(_p+yp[Ep].addedLength>bp){var $p=Ep,Cp=xp.c&&Ep===wp-1?0:Ep+1,Ap=(bp-_p)/yp[Ep].addedLength;Rp=bez.getPointInSegment(xp.v[$p],xp.v[Cp],xp.o[$p],xp.i[Cp],Ap,yp[Ep]);break}else _p+=yp[Ep].addedLength;Ep+=1}return Rp||(Rp=xp.c?[xp.v[0][0],xp.v[0][1]]:[xp.v[xp._length-1][0],xp.v[xp._length-1][1]]),Rp},vectorOnPath:function(gp,vp,xp){gp==1?gp=this.v.c:gp==0&&(gp=.999);var Sp=this.pointOnPath(gp,vp),yp=this.pointOnPath(gp+.001,vp),bp=yp[0]-Sp[0],Ep=yp[1]-Sp[1],wp=Math.sqrt(Math.pow(bp,2)+Math.pow(Ep,2));if(wp===0)return[0,0];var _p=xp==="tangent"?[bp/wp,Ep/wp]:[-Ep/wp,bp/wp];return _p},tangentOnPath:function(gp,vp){return this.vectorOnPath(gp,vp,"tangent")},normalOnPath:function(gp,vp){return this.vectorOnPath(gp,vp,"normal")},setGroupProperty:expressionHelpers.setGroupProperty,getValueAtTime:expressionHelpers.getStaticValueAtTime},extendPrototype([pp],dp),extendPrototype([pp],fp),fp.prototype.getValueAtTime=cp,fp.prototype.initiateExpression=ExpressionManager.initiateExpression;var hp=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(mp,gp,vp,xp,Sp){var yp=hp(mp,gp,vp,xp,Sp);return yp.propertyIndex=gp.ix,yp.lock=!1,vp===3?expressionHelpers.searchExpressions(mp,gp.pt,yp):vp===4&&expressionHelpers.searchExpressions(mp,gp.ks,yp),yp.k&&mp.addDynamicProperty(yp),yp}}function initialize$1(){addPropertyDecorator()}function addDecorator(){function _d(){return this.data.d.x?(this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this),this.addEffect(this.getExpressionValue.bind(this)),!0):null}TextProperty.prototype.getExpressionValue=function(rp,np){var ap=this.calculateExpression(np);if(rp.t!==ap){var sp={};return this.copyData(sp,rp),sp.t=ap.toString(),sp.__complete=!1,sp}return rp},TextProperty.prototype.searchProperty=function(){var rp=this.searchKeyframes(),np=this.searchExpressions();return this.kf=rp||np,this.kf},TextProperty.prototype.searchExpressions=_d}function initialize(){addDecorator()}function SVGComposableEffect(){}SVGComposableEffect.prototype={createMergeNode:function _d(rp,np){var ap=createNS("feMerge");ap.setAttribute("result",rp);var sp,lp;for(lp=0;lp<np.length;lp+=1)sp=createNS("feMergeNode"),sp.setAttribute("in",np[lp]),ap.appendChild(sp),ap.appendChild(sp);return ap}};var linearFilterValue="0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0";function SVGTintFilter(_d,rp,np,ap,sp){this.filterManager=rp;var lp=createNS("feColorMatrix");lp.setAttribute("type","matrix"),lp.setAttribute("color-interpolation-filters","linearRGB"),lp.setAttribute("values",linearFilterValue+" 1 0"),this.linearFilter=lp,lp.setAttribute("result",ap+"_tint_1"),_d.appendChild(lp),lp=createNS("feColorMatrix"),lp.setAttribute("type","matrix"),lp.setAttribute("color-interpolation-filters","sRGB"),lp.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),lp.setAttribute("result",ap+"_tint_2"),_d.appendChild(lp),this.matrixFilter=lp;var up=this.createMergeNode(ap,[sp,ap+"_tint_1",ap+"_tint_2"]);_d.appendChild(up)}extendPrototype([SVGComposableEffect],SVGTintFilter),SVGTintFilter.prototype.renderFrame=function(_d){if(_d||this.filterManager._mdf){var rp=this.filterManager.effectElements[0].p.v,np=this.filterManager.effectElements[1].p.v,ap=this.filterManager.effectElements[2].p.v/100;this.linearFilter.setAttribute("values",linearFilterValue+" "+ap+" 0"),this.matrixFilter.setAttribute("values",np[0]-rp[0]+" 0 0 0 "+rp[0]+" "+(np[1]-rp[1])+" 0 0 0 "+rp[1]+" "+(np[2]-rp[2])+" 0 0 0 "+rp[2]+" 0 0 0 1 0")}};function SVGFillFilter(_d,rp,np,ap){this.filterManager=rp;var sp=createNS("feColorMatrix");sp.setAttribute("type","matrix"),sp.setAttribute("color-interpolation-filters","sRGB"),sp.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),sp.setAttribute("result",ap),_d.appendChild(sp),this.matrixFilter=sp}SVGFillFilter.prototype.renderFrame=function(_d){if(_d||this.filterManager._mdf){var rp=this.filterManager.effectElements[2].p.v,np=this.filterManager.effectElements[6].p.v;this.matrixFilter.setAttribute("values","0 0 0 0 "+rp[0]+" 0 0 0 0 "+rp[1]+" 0 0 0 0 "+rp[2]+" 0 0 0 "+np+" 0")}};function SVGStrokeEffect(_d,rp,np){this.initialized=!1,this.filterManager=rp,this.elem=np,this.paths=[]}SVGStrokeEffect.prototype.initialize=function(){var _d=this.elem.layerElement.children||this.elem.layerElement.childNodes,rp,np,ap,sp;for(this.filterManager.effectElements[1].p.v===1?(sp=this.elem.maskManager.masksProperties.length,ap=0):(ap=this.filterManager.effectElements[0].p.v-1,sp=ap+1),np=createNS("g"),np.setAttribute("fill","none"),np.setAttribute("stroke-linecap","round"),np.setAttribute("stroke-dashoffset",1),ap;ap<sp;ap+=1)rp=createNS("path"),np.appendChild(rp),this.paths.push({p:rp,m:ap});if(this.filterManager.effectElements[10].p.v===3){var lp=createNS("mask"),up=createElementID();lp.setAttribute("id",up),lp.setAttribute("mask-type","alpha"),lp.appendChild(np),this.elem.globalData.defs.appendChild(lp);var cp=createNS("g");for(cp.setAttribute("mask","url("+getLocationHref()+"#"+up+")");_d[0];)cp.appendChild(_d[0]);this.elem.layerElement.appendChild(cp),this.masker=lp,np.setAttribute("stroke","#fff")}else if(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2){if(this.filterManager.effectElements[10].p.v===2)for(_d=this.elem.layerElement.children||this.elem.layerElement.childNodes;_d.length;)this.elem.layerElement.removeChild(_d[0]);this.elem.layerElement.appendChild(np),this.elem.layerElement.removeAttribute("mask"),np.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=np},SVGStrokeEffect.prototype.renderFrame=function(_d){this.initialized||this.initialize();var rp,np=this.paths.length,ap,sp;for(rp=0;rp<np;rp+=1)if(this.paths[rp].m!==-1&&(ap=this.elem.maskManager.viewData[this.paths[rp].m],sp=this.paths[rp].p,(_d||this.filterManager._mdf||ap.prop._mdf)&&sp.setAttribute("d",ap.lastPath),_d||this.filterManager.effectElements[9].p._mdf||this.filterManager.effectElements[4].p._mdf||this.filterManager.effectElements[7].p._mdf||this.filterManager.effectElements[8].p._mdf||ap.prop._mdf)){var lp;if(this.filterManager.effectElements[7].p.v!==0||this.filterManager.effectElements[8].p.v!==100){var up=Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,cp=Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,dp=sp.getTotalLength();lp="0 0 0 "+dp*up+" ";var fp=dp*(cp-up),pp=1+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01,hp=Math.floor(fp/pp),mp;for(mp=0;mp<hp;mp+=1)lp+="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01+" ";lp+="0 "+dp*10+" 0 0"}else lp="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01;sp.setAttribute("stroke-dasharray",lp)}if((_d||this.filterManager.effectElements[4].p._mdf)&&this.pathMasker.setAttribute("stroke-width",this.filterManager.effectElements[4].p.v*2),(_d||this.filterManager.effectElements[6].p._mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2)&&(_d||this.filterManager.effectElements[3].p._mdf)){var gp=this.filterManager.effectElements[3].p.v;this.pathMasker.setAttribute("stroke","rgb("+bmFloor(gp[0]*255)+","+bmFloor(gp[1]*255)+","+bmFloor(gp[2]*255)+")")}};function SVGTritoneFilter(_d,rp,np,ap){this.filterManager=rp;var sp=createNS("feColorMatrix");sp.setAttribute("type","matrix"),sp.setAttribute("color-interpolation-filters","linearRGB"),sp.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),_d.appendChild(sp);var lp=createNS("feComponentTransfer");lp.setAttribute("color-interpolation-filters","sRGB"),lp.setAttribute("result",ap),this.matrixFilter=lp;var up=createNS("feFuncR");up.setAttribute("type","table"),lp.appendChild(up),this.feFuncR=up;var cp=createNS("feFuncG");cp.setAttribute("type","table"),lp.appendChild(cp),this.feFuncG=cp;var dp=createNS("feFuncB");dp.setAttribute("type","table"),lp.appendChild(dp),this.feFuncB=dp,_d.appendChild(lp)}SVGTritoneFilter.prototype.renderFrame=function(_d){if(_d||this.filterManager._mdf){var rp=this.filterManager.effectElements[0].p.v,np=this.filterManager.effectElements[1].p.v,ap=this.filterManager.effectElements[2].p.v,sp=ap[0]+" "+np[0]+" "+rp[0],lp=ap[1]+" "+np[1]+" "+rp[1],up=ap[2]+" "+np[2]+" "+rp[2];this.feFuncR.setAttribute("tableValues",sp),this.feFuncG.setAttribute("tableValues",lp),this.feFuncB.setAttribute("tableValues",up)}};function SVGProLevelsFilter(_d,rp,np,ap){this.filterManager=rp;var sp=this.filterManager.effectElements,lp=createNS("feComponentTransfer");(sp[10].p.k||sp[10].p.v!==0||sp[11].p.k||sp[11].p.v!==1||sp[12].p.k||sp[12].p.v!==1||sp[13].p.k||sp[13].p.v!==0||sp[14].p.k||sp[14].p.v!==1)&&(this.feFuncR=this.createFeFunc("feFuncR",lp)),(sp[17].p.k||sp[17].p.v!==0||sp[18].p.k||sp[18].p.v!==1||sp[19].p.k||sp[19].p.v!==1||sp[20].p.k||sp[20].p.v!==0||sp[21].p.k||sp[21].p.v!==1)&&(this.feFuncG=this.createFeFunc("feFuncG",lp)),(sp[24].p.k||sp[24].p.v!==0||sp[25].p.k||sp[25].p.v!==1||sp[26].p.k||sp[26].p.v!==1||sp[27].p.k||sp[27].p.v!==0||sp[28].p.k||sp[28].p.v!==1)&&(this.feFuncB=this.createFeFunc("feFuncB",lp)),(sp[31].p.k||sp[31].p.v!==0||sp[32].p.k||sp[32].p.v!==1||sp[33].p.k||sp[33].p.v!==1||sp[34].p.k||sp[34].p.v!==0||sp[35].p.k||sp[35].p.v!==1)&&(this.feFuncA=this.createFeFunc("feFuncA",lp)),(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA)&&(lp.setAttribute("color-interpolation-filters","sRGB"),_d.appendChild(lp)),(sp[3].p.k||sp[3].p.v!==0||sp[4].p.k||sp[4].p.v!==1||sp[5].p.k||sp[5].p.v!==1||sp[6].p.k||sp[6].p.v!==0||sp[7].p.k||sp[7].p.v!==1)&&(lp=createNS("feComponentTransfer"),lp.setAttribute("color-interpolation-filters","sRGB"),lp.setAttribute("result",ap),_d.appendChild(lp),this.feFuncRComposed=this.createFeFunc("feFuncR",lp),this.feFuncGComposed=this.createFeFunc("feFuncG",lp),this.feFuncBComposed=this.createFeFunc("feFuncB",lp))}SVGProLevelsFilter.prototype.createFeFunc=function(_d,rp){var np=createNS(_d);return np.setAttribute("type","table"),rp.appendChild(np),np},SVGProLevelsFilter.prototype.getTableValue=function(_d,rp,np,ap,sp){for(var lp=0,up=256,cp,dp=Math.min(_d,rp),fp=Math.max(_d,rp),pp=Array.call(null,{length:up}),hp,mp=0,gp=sp-ap,vp=rp-_d;lp<=256;)cp=lp/256,cp<=dp?hp=vp<0?sp:ap:cp>=fp?hp=vp<0?ap:sp:hp=ap+gp*Math.pow((cp-_d)/vp,1/np),pp[mp]=hp,mp+=1,lp+=256/(up-1);return pp.join(" ")},SVGProLevelsFilter.prototype.renderFrame=function(_d){if(_d||this.filterManager._mdf){var rp,np=this.filterManager.effectElements;this.feFuncRComposed&&(_d||np[3].p._mdf||np[4].p._mdf||np[5].p._mdf||np[6].p._mdf||np[7].p._mdf)&&(rp=this.getTableValue(np[3].p.v,np[4].p.v,np[5].p.v,np[6].p.v,np[7].p.v),this.feFuncRComposed.setAttribute("tableValues",rp),this.feFuncGComposed.setAttribute("tableValues",rp),this.feFuncBComposed.setAttribute("tableValues",rp)),this.feFuncR&&(_d||np[10].p._mdf||np[11].p._mdf||np[12].p._mdf||np[13].p._mdf||np[14].p._mdf)&&(rp=this.getTableValue(np[10].p.v,np[11].p.v,np[12].p.v,np[13].p.v,np[14].p.v),this.feFuncR.setAttribute("tableValues",rp)),this.feFuncG&&(_d||np[17].p._mdf||np[18].p._mdf||np[19].p._mdf||np[20].p._mdf||np[21].p._mdf)&&(rp=this.getTableValue(np[17].p.v,np[18].p.v,np[19].p.v,np[20].p.v,np[21].p.v),this.feFuncG.setAttribute("tableValues",rp)),this.feFuncB&&(_d||np[24].p._mdf||np[25].p._mdf||np[26].p._mdf||np[27].p._mdf||np[28].p._mdf)&&(rp=this.getTableValue(np[24].p.v,np[25].p.v,np[26].p.v,np[27].p.v,np[28].p.v),this.feFuncB.setAttribute("tableValues",rp)),this.feFuncA&&(_d||np[31].p._mdf||np[32].p._mdf||np[33].p._mdf||np[34].p._mdf||np[35].p._mdf)&&(rp=this.getTableValue(np[31].p.v,np[32].p.v,np[33].p.v,np[34].p.v,np[35].p.v),this.feFuncA.setAttribute("tableValues",rp))}};function SVGDropShadowEffect(_d,rp,np,ap,sp){var lp=rp.container.globalData.renderConfig.filterSize,up=rp.data.fs||lp;_d.setAttribute("x",up.x||lp.x),_d.setAttribute("y",up.y||lp.y),_d.setAttribute("width",up.width||lp.width),_d.setAttribute("height",up.height||lp.height),this.filterManager=rp;var cp=createNS("feGaussianBlur");cp.setAttribute("in","SourceAlpha"),cp.setAttribute("result",ap+"_drop_shadow_1"),cp.setAttribute("stdDeviation","0"),this.feGaussianBlur=cp,_d.appendChild(cp);var dp=createNS("feOffset");dp.setAttribute("dx","25"),dp.setAttribute("dy","0"),dp.setAttribute("in",ap+"_drop_shadow_1"),dp.setAttribute("result",ap+"_drop_shadow_2"),this.feOffset=dp,_d.appendChild(dp);var fp=createNS("feFlood");fp.setAttribute("flood-color","#00ff00"),fp.setAttribute("flood-opacity","1"),fp.setAttribute("result",ap+"_drop_shadow_3"),this.feFlood=fp,_d.appendChild(fp);var pp=createNS("feComposite");pp.setAttribute("in",ap+"_drop_shadow_3"),pp.setAttribute("in2",ap+"_drop_shadow_2"),pp.setAttribute("operator","in"),pp.setAttribute("result",ap+"_drop_shadow_4"),_d.appendChild(pp);var hp=this.createMergeNode(ap,[ap+"_drop_shadow_4",sp]);_d.appendChild(hp)}extendPrototype([SVGComposableEffect],SVGDropShadowEffect),SVGDropShadowEffect.prototype.renderFrame=function(_d){if(_d||this.filterManager._mdf){if((_d||this.filterManager.effectElements[4].p._mdf)&&this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4),_d||this.filterManager.effectElements[0].p._mdf){var rp=this.filterManager.effectElements[0].p.v;this.feFlood.setAttribute("flood-color",rgbToHex(Math.round(rp[0]*255),Math.round(rp[1]*255),Math.round(rp[2]*255)))}if((_d||this.filterManager.effectElements[1].p._mdf)&&this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255),_d||this.filterManager.effectElements[2].p._mdf||this.filterManager.effectElements[3].p._mdf){var np=this.filterManager.effectElements[3].p.v,ap=(this.filterManager.effectElements[2].p.v-90)*degToRads,sp=np*Math.cos(ap),lp=np*Math.sin(ap);this.feOffset.setAttribute("dx",sp),this.feOffset.setAttribute("dy",lp)}}};var _svgMatteSymbols=[];function SVGMatte3Effect(_d,rp,np){this.initialized=!1,this.filterManager=rp,this.filterElem=_d,this.elem=np,np.matteElement=createNS("g"),np.matteElement.appendChild(np.layerElement),np.matteElement.appendChild(np.transformedElement),np.baseElement=np.matteElement}SVGMatte3Effect.prototype.findSymbol=function(_d){for(var rp=0,np=_svgMatteSymbols.length;rp<np;){if(_svgMatteSymbols[rp]===_d)return _svgMatteSymbols[rp];rp+=1}return null},SVGMatte3Effect.prototype.replaceInParent=function(_d,rp){var np=_d.layerElement.parentNode;if(np){for(var ap=np.children,sp=0,lp=ap.length;sp<lp&&ap[sp]!==_d.layerElement;)sp+=1;var up;sp<=lp-2&&(up=ap[sp+1]);var cp=createNS("use");cp.setAttribute("href","#"+rp),up?np.insertBefore(cp,up):np.appendChild(cp)}},SVGMatte3Effect.prototype.setElementAsMask=function(_d,rp){if(!this.findSymbol(rp)){var np=createElementID(),ap=createNS("mask");ap.setAttribute("id",rp.layerId),ap.setAttribute("mask-type","alpha"),_svgMatteSymbols.push(rp);var sp=_d.globalData.defs;sp.appendChild(ap);var lp=createNS("symbol");lp.setAttribute("id",np),this.replaceInParent(rp,np),lp.appendChild(rp.layerElement),sp.appendChild(lp);var up=createNS("use");up.setAttribute("href","#"+np),ap.appendChild(up),rp.data.hd=!1,rp.show()}_d.setMatte(rp.layerId)},SVGMatte3Effect.prototype.initialize=function(){for(var _d=this.filterManager.effectElements[0].p.v,rp=this.elem.comp.elements,np=0,ap=rp.length;np<ap;)rp[np]&&rp[np].data.ind===_d&&this.setElementAsMask(this.elem,rp[np]),np+=1;this.initialized=!0},SVGMatte3Effect.prototype.renderFrame=function(){this.initialized||this.initialize()};function SVGGaussianBlurEffect(_d,rp,np,ap){_d.setAttribute("x","-100%"),_d.setAttribute("y","-100%"),_d.setAttribute("width","300%"),_d.setAttribute("height","300%"),this.filterManager=rp;var sp=createNS("feGaussianBlur");sp.setAttribute("result",ap),_d.appendChild(sp),this.feGaussianBlur=sp}SVGGaussianBlurEffect.prototype.renderFrame=function(_d){if(_d||this.filterManager._mdf){var rp=.3,np=this.filterManager.effectElements[0].p.v*rp,ap=this.filterManager.effectElements[1].p.v,sp=ap==3?0:np,lp=ap==2?0:np;this.feGaussianBlur.setAttribute("stdDeviation",sp+" "+lp);var up=this.filterManager.effectElements[2].p.v==1?"wrap":"duplicate";this.feGaussianBlur.setAttribute("edgeMode",up)}};function TransformEffect(){}TransformEffect.prototype.init=function(_d){this.effectsManager=_d,this.type=effectTypes.TRANSFORM_EFFECT,this.matrix=new Matrix,this.opacity=-1,this._mdf=!1,this._opMdf=!1},TransformEffect.prototype.renderFrame=function(_d){if(this._opMdf=!1,this._mdf=!1,_d||this.effectsManager._mdf){var rp=this.effectsManager.effectElements,np=rp[0].p.v,ap=rp[1].p.v,sp=rp[2].p.v===1,lp=rp[3].p.v,up=sp?lp:rp[4].p.v,cp=rp[5].p.v,dp=rp[6].p.v,fp=rp[7].p.v;this.matrix.reset(),this.matrix.translate(-np[0],-np[1],np[2]),this.matrix.scale(up*.01,lp*.01,1),this.matrix.rotate(-fp*degToRads),this.matrix.skewFromAxis(-cp*degToRads,(dp+90)*degToRads),this.matrix.translate(ap[0],ap[1],0),this._mdf=!0,this.opacity!==rp[8].p.v&&(this.opacity=rp[8].p.v,this._opMdf=!0)}};function SVGTransformEffect(_d,rp){this.init(rp)}extendPrototype([TransformEffect],SVGTransformEffect);function CVTransformEffect(_d){this.init(_d)}return extendPrototype([TransformEffect],CVTransformEffect),registerRenderer("canvas",CanvasRenderer),registerRenderer("html",HybridRenderer),registerRenderer("svg",SVGRenderer),ShapeModifiers.registerModifier("tm",TrimModifier),ShapeModifiers.registerModifier("pb",PuckerAndBloatModifier),ShapeModifiers.registerModifier("rp",RepeaterModifier),ShapeModifiers.registerModifier("rd",RoundCornersModifier),ShapeModifiers.registerModifier("zz",ZigZagModifier),ShapeModifiers.registerModifier("op",OffsetPathModifier),setExpressionsPlugin(Expressions),setExpressionInterfaces(getInterface),initialize$1(),initialize(),registerEffect$1(20,SVGTintFilter,!0),registerEffect$1(21,SVGFillFilter,!0),registerEffect$1(22,SVGStrokeEffect,!1),registerEffect$1(23,SVGTritoneFilter,!0),registerEffect$1(24,SVGProLevelsFilter,!0),registerEffect$1(25,SVGDropShadowEffect,!0),registerEffect$1(28,SVGMatte3Effect,!1),registerEffect$1(29,SVGGaussianBlurEffect,!0),registerEffect$1(35,SVGTransformEffect,!1),registerEffect(35,CVTransformEffect),lottie})})(lottie,lottie.exports);var lottieExports=lottie.exports;Object.defineProperty(dist,"__esModule",{value:!0});var _extends2=_extends,_extends3=_interopRequireDefault$C(_extends2),_getPrototypeOf=getPrototypeOf$2,_getPrototypeOf2=_interopRequireDefault$C(_getPrototypeOf),_classCallCheck2=classCallCheck,_classCallCheck3=_interopRequireDefault$C(_classCallCheck2),_createClass2=createClass,_createClass3=_interopRequireDefault$C(_createClass2),_possibleConstructorReturn2=possibleConstructorReturn,_possibleConstructorReturn3=_interopRequireDefault$C(_possibleConstructorReturn2),_inherits2=inherits$1,_inherits3=_interopRequireDefault$C(_inherits2),_react=reactExports,_react2=_interopRequireDefault$C(_react),_propTypes=propTypesExports,_propTypes2=_interopRequireDefault$C(_propTypes),_lottieWeb=lottieExports,_lottieWeb2=_interopRequireDefault$C(_lottieWeb);function _interopRequireDefault$C(_d){return _d&&_d.__esModule?_d:{default:_d}}var Lottie=function(_d){(0,_inherits3.default)(rp,_d);function rp(){var np,ap,sp,lp;(0,_classCallCheck3.default)(this,rp);for(var up=arguments.length,cp=Array(up),dp=0;dp<up;dp++)cp[dp]=arguments[dp];return lp=(ap=(sp=(0,_possibleConstructorReturn3.default)(this,(np=rp.__proto__||(0,_getPrototypeOf2.default)(rp)).call.apply(np,[this].concat(cp))),sp),sp.handleClickToPause=function(){sp.anim.isPaused?sp.anim.play():sp.anim.pause()},ap),(0,_possibleConstructorReturn3.default)(sp,lp)}return(0,_createClass3.default)(rp,[{key:"componentDidMount",value:function(){var ap=this.props,sp=ap.options,lp=ap.eventListeners,up=sp.loop,cp=sp.autoplay,dp=sp.animationData,fp=sp.rendererSettings,pp=sp.segments;this.options={container:this.el,renderer:"svg",loop:up!==!1,autoplay:cp!==!1,segments:pp!==!1,animationData:dp,rendererSettings:fp},this.options=(0,_extends3.default)({},this.options,sp),this.anim=_lottieWeb2.default.loadAnimation(this.options),this.registerEvents(lp)}},{key:"componentWillUpdate",value:function(ap){this.options.animationData!==ap.options.animationData&&(this.deRegisterEvents(this.props.eventListeners),this.destroy(),this.options=(0,_extends3.default)({},this.options,ap.options),this.anim=_lottieWeb2.default.loadAnimation(this.options),this.registerEvents(ap.eventListeners))}},{key:"componentDidUpdate",value:function(){this.props.isStopped?this.stop():this.props.segments?this.playSegments():this.play(),this.pause(),this.setSpeed(),this.setDirection()}},{key:"componentWillUnmount",value:function(){this.deRegisterEvents(this.props.eventListeners),this.destroy(),this.options.animationData=null,this.anim=null}},{key:"setSpeed",value:function(){this.anim.setSpeed(this.props.speed)}},{key:"setDirection",value:function(){this.anim.setDirection(this.props.direction)}},{key:"play",value:function(){this.anim.play()}},{key:"playSegments",value:function(){this.anim.playSegments(this.props.segments)}},{key:"stop",value:function(){this.anim.stop()}},{key:"pause",value:function(){this.props.isPaused&&!this.anim.isPaused?this.anim.pause():!this.props.isPaused&&this.anim.isPaused&&this.anim.pause()}},{key:"destroy",value:function(){this.anim.destroy()}},{key:"registerEvents",value:function(ap){var sp=this;ap.forEach(function(lp){sp.anim.addEventListener(lp.eventName,lp.callback)})}},{key:"deRegisterEvents",value:function(ap){var sp=this;ap.forEach(function(lp){sp.anim.removeEventListener(lp.eventName,lp.callback)})}},{key:"render",value:function(){var ap=this,sp=this.props,lp=sp.width,up=sp.height,cp=sp.ariaRole,dp=sp.ariaLabel,fp=sp.isClickToPauseDisabled,pp=sp.title,hp=function(xp){var Sp=void 0;return typeof xp=="number"?Sp=xp+"px":Sp=xp||"100%",Sp},mp=(0,_extends3.default)({width:hp(lp),height:hp(up),overflow:"hidden",margin:"0 auto",outline:"none"},this.props.style),gp=fp?function(){return null}:this.handleClickToPause;return _react2.default.createElement("div",{ref:function(xp){ap.el=xp},style:mp,onClick:gp,title:pp,role:cp,"aria-label":dp,tabIndex:"0"})}}]),rp}(_react2.default.Component),_default$d=dist.default=Lottie;Lottie.propTypes={eventListeners:_propTypes2.default.arrayOf(_propTypes2.default.object),options:_propTypes2.default.object.isRequired,height:_propTypes2.default.oneOfType([_propTypes2.default.string,_propTypes2.default.number]),width:_propTypes2.default.oneOfType([_propTypes2.default.string,_propTypes2.default.number]),isStopped:_propTypes2.default.bool,isPaused:_propTypes2.default.bool,speed:_propTypes2.default.number,segments:_propTypes2.default.arrayOf(_propTypes2.default.number),direction:_propTypes2.default.number,ariaRole:_propTypes2.default.string,ariaLabel:_propTypes2.default.string,isClickToPauseDisabled:_propTypes2.default.bool,title:_propTypes2.default.string,style:_propTypes2.default.string};Lottie.defaultProps={eventListeners:[],isStopped:!1,isPaused:!1,speed:1,ariaRole:"button",ariaLabel:"animation",isClickToPauseDisabled:!1,title:""};const v="5.3.0",fr=25,ip=0,op=36,w=420,h=420,nm="ÃÂÃÂ¥ÃÂÃÂ°ÃÂÃÂÃÂÃÂ©ÃÂÃÂ±ÃÂÃÂ¼bankÃÂÃÂ¥ÃÂÃÂÃÂÃÂ ÃÂÃÂ¨ÃÂÃÂ½ÃÂÃÂ½ÃÂÃÂ¥ÃÂÃÂÃÂÃÂ¨ÃÂÃÂ§ÃÂÃÂÃÂÃÂ» 3",ddd=0,assets=[],layers=[{ddd:0,ind:1,ty:4,nm:"ÃÂÃÂ¥ÃÂÃÂÃÂÃÂÃÂÃÂ¥ÃÂÃÂÃÂÃÂ-color",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},n:["0p833_0p833_0p167_0p167"],t:0,s:[0],e:[360]},{t:36}],ix:10},p:{a:0,k:[210,210,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[86,86],ix:2},p:{a:0,k:[0,0],ix:3},nm:"ÃÂÃÂ¦ÃÂÃÂ¤ÃÂÃÂ­ÃÂÃÂ¥ÃÂÃÂÃÂÃÂÃÂÃÂ¨ÃÂÃÂ·ÃÂÃÂ¯ÃÂÃÂ¥ÃÂÃÂ¾ÃÂÃÂ 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"st",c:{a:0,k:[.0588,.8,.8078,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:2,ix:5},lc:1,lj:1,ml:4,ml2:{a:0,k:4,ix:8},nm:"ÃÂÃÂ¦ÃÂÃÂÃÂÃÂÃÂÃÂ¨ÃÂÃÂ¾ÃÂÃÂ¹ 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[0,.9833,1,1],ix:4},o:{a:0,k:0,ix:5},r:1,nm:"ÃÂÃÂ¥ÃÂÃÂ¡ÃÂÃÂ«ÃÂÃÂ¥ÃÂÃÂÃÂÃÂ 1",mn:"ADBE Vector Graphic - Fill",hd:!0},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"ÃÂÃÂ¥ÃÂÃÂÃÂÃÂÃÂÃÂ¦ÃÂÃÂÃÂÃÂ¢"}],nm:"ÃÂÃÂ¦ÃÂÃÂ¤ÃÂÃÂ­ÃÂÃÂ¥ÃÂÃÂÃÂÃÂ 1",np:3,cix:2,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"tm",s:{a:0,k:0,ix:1},e:{a:0,k:55,ix:2},o:{a:0,k:0,ix:3},m:1,ix:2,nm:"ÃÂÃÂ¤ÃÂÃÂ¿ÃÂÃÂ®ÃÂÃÂ¥ÃÂÃÂÃÂÃÂªÃÂÃÂ¨ÃÂÃÂ·ÃÂÃÂ¯ÃÂÃÂ¥ÃÂÃÂ¾ÃÂÃÂ 1",mn:"ADBE Vector Filter - Trim",hd:!1}],ip:0,op:36,st:0,bm:0},{ddd:0,ind:2,ty:4,nm:"ÃÂÃÂ¥ÃÂÃÂ¤ÃÂÃÂÃÂÃÂ¥ÃÂÃÂÃÂÃÂ-color",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:1,k:[{i:{x:[.255],y:[1]},o:{x:[.692],y:[0]},n:["0p255_1_0p692_0"],t:0,s:[0],e:[360]},{t:36}],ix:10},p:{a:0,k:[210,210,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[100,100],ix:2},p:{a:0,k:[0,0],ix:3},nm:"ÃÂÃÂ¦ÃÂÃÂ¤ÃÂÃÂ­ÃÂÃÂ¥ÃÂÃÂÃÂÃÂÃÂÃÂ¨ÃÂÃÂ·ÃÂÃÂ¯ÃÂÃÂ¥ÃÂÃÂ¾ÃÂÃÂ 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"st",c:{a:0,k:[.02,.9837,1,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:2,ix:5},lc:1,lj:1,ml:4,ml2:{a:0,k:4,ix:8},nm:"ÃÂÃÂ¦ÃÂÃÂÃÂÃÂÃÂÃÂ¨ÃÂÃÂ¾ÃÂÃÂ¹ 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[0,.9833,1,1],ix:4},o:{a:0,k:0,ix:5},r:1,nm:"ÃÂÃÂ¥ÃÂÃÂ¡ÃÂÃÂ«ÃÂÃÂ¥ÃÂÃÂÃÂÃÂ 1",mn:"ADBE Vector Graphic - Fill",hd:!0},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"ÃÂÃÂ¥ÃÂÃÂÃÂÃÂÃÂÃÂ¦ÃÂÃÂÃÂÃÂ¢"}],nm:"ÃÂÃÂ¦ÃÂÃÂ¤ÃÂÃÂ­ÃÂÃÂ¥ÃÂÃÂÃÂÃÂ 1",np:3,cix:2,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"tm",s:{a:0,k:45,ix:1},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:3},m:1,ix:2,nm:"ÃÂÃÂ¤ÃÂÃÂ¿ÃÂÃÂ®ÃÂÃÂ¥ÃÂÃÂÃÂÃÂªÃÂÃÂ¨ÃÂÃÂ·ÃÂÃÂ¯ÃÂÃÂ¥ÃÂÃÂ¾ÃÂÃÂ 1",mn:"ADBE Vector Filter - Trim",hd:!1}],ip:0,op:36,st:0,bm:0},{ddd:0,ind:3,ty:4,nm:"ÃÂÃÂ¥ÃÂÃÂÃÂÃÂÃÂÃÂ¥ÃÂÃÂÃÂÃÂ2",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[210,210,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{d:2,ty:"el",s:{a:0,k:[86,86],ix:2},p:{a:0,k:[0,0],ix:3},nm:"ÃÂÃÂ¦ÃÂÃÂ¤ÃÂÃÂ­ÃÂÃÂ¥ÃÂÃÂÃÂÃÂÃÂÃÂ¨ÃÂÃÂ·ÃÂÃÂ¯ÃÂÃÂ¥ÃÂÃÂ¾ÃÂÃÂ 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"st",c:{a:0,k:[.3565,.973,.9835,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:.5,ix:5},lc:1,lj:1,ml:4,ml2:{a:0,k:4,ix:8},nm:"ÃÂÃÂ¦ÃÂÃÂÃÂÃÂÃÂÃÂ¨ÃÂÃÂ¾ÃÂÃÂ¹ 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[0,.9833,1,1],ix:4},o:{a:0,k:0,ix:5},r:1,nm:"ÃÂÃÂ¥ÃÂÃÂ¡ÃÂÃÂ«ÃÂÃÂ¥ÃÂÃÂÃÂÃÂ 1",mn:"ADBE Vector Graphic - Fill",hd:!0},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"ÃÂÃÂ¥ÃÂÃÂÃÂÃÂÃÂÃÂ¦ÃÂÃÂÃÂÃÂ¢"}],nm:"ÃÂÃÂ¦ÃÂÃÂ¤ÃÂÃÂ­ÃÂÃÂ¥ÃÂÃÂÃÂÃÂ 1",np:3,cix:2,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:36,st:0,bm:0},{ddd:0,ind:4,ty:4,nm:"ÃÂÃÂ¥ÃÂÃÂ¤ÃÂÃÂÃÂÃÂ¥ÃÂÃÂÃÂÃÂ 2",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[210,210,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{d:2,ty:"el",s:{a:0,k:[100,100],ix:2},p:{a:0,k:[0,0],ix:3},nm:"ÃÂÃÂ¦ÃÂÃÂ¤ÃÂÃÂ­ÃÂÃÂ¥ÃÂÃÂÃÂÃÂÃÂÃÂ¨ÃÂÃÂ·ÃÂÃÂ¯ÃÂÃÂ¥ÃÂÃÂ¾ÃÂÃÂ 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"st",c:{a:0,k:[.3565,.973,.9835,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:.5,ix:5},lc:1,lj:1,ml:4,ml2:{a:0,k:4,ix:8},nm:"ÃÂÃÂ¦ÃÂÃÂÃÂÃÂÃÂÃÂ¨ÃÂÃÂ¾ÃÂÃÂ¹ 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[0,.9833,1,1],ix:4},o:{a:0,k:0,ix:5},r:1,nm:"ÃÂÃÂ¥ÃÂÃÂ¡ÃÂÃÂ«ÃÂÃÂ¥ÃÂÃÂÃÂÃÂ 1",mn:"ADBE Vector Graphic - Fill",hd:!0},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"ÃÂÃÂ¥ÃÂÃÂÃÂÃÂÃÂÃÂ¦ÃÂÃÂÃÂÃÂ¢"}],nm:"ÃÂÃÂ¦ÃÂÃÂ¤ÃÂÃÂ­ÃÂÃÂ¥ÃÂÃÂÃÂÃÂ 1",np:3,cix:2,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:36,st:0,bm:0},{ddd:0,ind:5,ty:4,nm:"ÃÂÃÂ¢ÃÂÃÂÃÂÃÂlogoÃÂÃÂ¢ÃÂÃÂÃÂÃÂÃÂÃÂ¨ÃÂÃÂ½ÃÂÃÂ®ÃÂÃÂ¥ÃÂÃÂ»ÃÂÃÂ",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[208.622,209.988,0],ix:2},a:{a:0,k:[54.174,78.291,0],ix:1},s:{a:0,k:[26.271,26.271,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[-14.167,31.912],[-.335,-.028],[.002,-.191],[-22.44,-3.776],[.004,-.492],[.206,-.138],[1.045,-.419],[1.127,-3.361],[-1.678,-3.055],[-2.479,-2.394],[.212,-.301],[.277,.064]],o:[[.13,-.292],[.353,.029],[-.197,12.159],[0,0],[-.002,.197],[-.634,.39],[-2.681,1.083],[-.815,2.444],[1.727,2.632],[.18,.195],[-.193,.283],[-14.913,-3.405]],v:[[-8.511,-29.885],[-7.899,-30.323],[-7.546,-29.755],[21.818,3.699],[22.675,4.336],[22.23,4.832],[17.159,6.642],[9.628,13.113],[10.821,21.512],[17.125,29.236],[17.344,30.067],[16.57,30.286]],c:!0},ix:2},nm:"ÃÂÃÂ¨ÃÂÃÂ·ÃÂÃÂ¯ÃÂÃÂ¥ÃÂÃÂ¾ÃÂÃÂ 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.0588,.8,.8078,1],ix:4},o:{a:0,k:100,ix:5},r:1,nm:"ÃÂÃÂ¥ÃÂÃÂ¡ÃÂÃÂ«ÃÂÃÂ¥ÃÂÃÂÃÂÃÂ 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[24.88,125.982],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"ÃÂÃÂ¥ÃÂÃÂÃÂÃÂÃÂÃÂ¦ÃÂÃÂÃÂÃÂ¢"}],nm:"ÃÂÃÂ§ÃÂÃÂ»ÃÂÃÂ 1",np:2,cix:2,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[.589,.054],[.073,.232],[-31.885,17.507],[-2.506,7.457],[-.305,.078],[-.239,-.156],[-7.832,-2.191],[-3.3,-7.085],[15.975,-9.305],[-.435,-8.576],[.353,-.144],[.275,.094],[.385,8.119],[.396,-.149],[6.401,-32.182]],o:[[-.205,-.005],[-7.433,-37.263],[-3.05,-3.348],[.156,-.201],[.278,-.075],[2.335,2.38],[17.1,-4.919],[3.647,7.812],[-2.4,4.172],[-.049,.3],[-.258,.094],[-2.609,-1.606],[-.402,.157],[-20.463,7.248],[0,0]],v:[[-46.097,54.653],[-46.49,54.188],[-3.872,-37.941],[-7.305,-54.22],[-6.633,-54.632],[-5.849,-54.42],[10.528,-44.17],[50.276,-40.515],[25.174,-9.846],[20.995,9.197],[20.468,9.953],[19.657,9.929],[11.774,-3.43],[10.588,-2.955],[-45.407,53.818]],c:!0},ix:2},nm:"ÃÂÃÂ¨ÃÂÃÂ·ÃÂÃÂ¯ÃÂÃÂ¥ÃÂÃÂ¾ÃÂÃÂ 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.2036,.9045,.9164,1],ix:4},o:{a:0,k:100,ix:5},r:1,nm:"ÃÂÃÂ¥ÃÂÃÂ¡ÃÂÃÂ«ÃÂÃÂ¥ÃÂÃÂÃÂÃÂ 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[54.174,54.957],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"ÃÂÃÂ¥ÃÂÃÂÃÂÃÂÃÂÃÂ¦ÃÂÃÂÃÂÃÂ¢"}],nm:"ÃÂÃÂ§ÃÂÃÂ»ÃÂÃÂ 2",np:2,cix:2,ix:2,mn:"ADBE Vector Group",hd:!1}],ip:0,op:36,st:0,bm:0}],markers=[],animationData={v,fr,ip,op,w,h,nm,ddd,assets,layers,markers},Loading=({hidden:_d})=>{const rp={loop:!0,autoplay:!0,animationData,rendererSettings:{preserveAspectRatio:"xMidYMid slice"}};return jsxRuntimeExports.jsx("div",{className:"dot-spinner",style:{display:_d&&"none"},children:jsxRuntimeExports.jsx(_default$d,{options:rp,speed:1.5})})};var InfoOutlined={},_interopRequireDefault$B=interopRequireDefaultExports;Object.defineProperty(InfoOutlined,"__esModule",{value:!0});var default_1$s=InfoOutlined.default=void 0,_createSvgIcon$s=_interopRequireDefault$B(requireCreateSvgIcon()),_jsxRuntime$s=jsxRuntimeExports;default_1$s=InfoOutlined.default=(0,_createSvgIcon$s.default)((0,_jsxRuntime$s.jsx)("path",{d:"M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"}),"InfoOutlined");const URL$2="/my_model/",ImageResultPage=()=>{const _d=useLocation(),rp=useNavigate(),np=_d.state.value,ap=reactExports.useRef(null),sp=reactExports.useRef(null),[lp,up]=reactExports.useState(null),[cp,dp]=reactExports.useState(0),[fp,pp]=reactExports.useState([]);reactExports.useState(!1);const hp=async()=>{if(console.log(sp.current),console.log(ap.current),sp.current&&ap.current)try{let vp=ap.current;const xp=await sp.current.predict(vp,!1);xp.sort((bp,Ep)=>parseFloat(Ep.probability)-parseFloat(bp.probability));const yp=xp[0].className.split(" ");up(yp[0]),dp(yp[1])}catch(vp){console.error("Prediction error:",vp)}},mp=async()=>{try{const vp=URL$2+"model.json",xp=URL$2+"metadata.json",Sp=await dist$1.load(vp,xp);sp.current=Sp,await hp()}catch(vp){console.error("Model loading error:",vp)}},gp=()=>{rp(`/fishbook/${cp}`)};return reactExports.useEffect(()=>(mp(),()=>{ap.current=null}),[]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"result",style:{display:!lp&&"none"},children:[jsxRuntimeExports.jsx(Header,{centerText:"분석완료",align:"center"}),jsxRuntimeExports.jsxs("div",{className:"result-body",children:[jsxRuntimeExports.jsx("div",{className:"result-img",children:jsxRuntimeExports.jsx("img",{className:"ml-result",src:np,ref:ap,alt:""})}),jsxRuntimeExports.jsxs("div",{className:"result-content",children:[jsxRuntimeExports.jsxs("div",{className:"result-fish",onClick:gp,children:[jsxRuntimeExports.jsx("div",{className:"result-name",children:lp}),jsxRuntimeExports.jsx("div",{className:"result-detail",children:"자세히 보기"})]}),jsxRuntimeExports.jsxs("div",{className:"fish-reviews",children:[jsxRuntimeExports.jsxs("h3",{className:"reviews-title",children:[lp,"의 리뷰"]}),jsxRuntimeExports.jsx("div",{className:"wrapper",children:fp.length?fp.map(vp=>jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("img",{src:"https://cdn.iconsumer.or.kr/news/photo/201806/7349_8772_1719.jpg"},vp),jsxRuntimeExports.jsx("div",{children:vp})]})):jsxRuntimeExports.jsx("div",{className:"none-data",children:"정보를 준비 중입니다."})})]})]})]})]}),jsxRuntimeExports.jsx(Loading,{hidden:lp})]})};function bind(_d,rp){return function(){return _d.apply(rp,arguments)}}const{toString}=Object.prototype,{getPrototypeOf}=Object,kindOf=(_d=>rp=>{const np=toString.call(rp);return _d[np]||(_d[np]=np.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=_d=>(_d=_d.toLowerCase(),rp=>kindOf(rp)===_d),typeOfTest=_d=>rp=>typeof rp===_d,{isArray}=Array,isUndefined$1=typeOfTest("undefined");function isBuffer(_d){return _d!==null&&!isUndefined$1(_d)&&_d.constructor!==null&&!isUndefined$1(_d.constructor)&&isFunction$1(_d.constructor.isBuffer)&&_d.constructor.isBuffer(_d)}const isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView(_d){let rp;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?rp=ArrayBuffer.isView(_d):rp=_d&&_d.buffer&&isArrayBuffer(_d.buffer),rp}const isString=typeOfTest("string"),isFunction$1=typeOfTest("function"),isNumber$1=typeOfTest("number"),isObject$1=_d=>_d!==null&&typeof _d=="object",isBoolean=_d=>_d===!0||_d===!1,isPlainObject$1=_d=>{if(kindOf(_d)!=="object")return!1;const rp=getPrototypeOf(_d);return(rp===null||rp===Object.prototype||Object.getPrototypeOf(rp)===null)&&!(Symbol.toStringTag in _d)&&!(Symbol.iterator in _d)},isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=_d=>isObject$1(_d)&&isFunction$1(_d.pipe),isFormData=_d=>{let rp;return _d&&(typeof FormData=="function"&&_d instanceof FormData||isFunction$1(_d.append)&&((rp=kindOf(_d))==="formdata"||rp==="object"&&isFunction$1(_d.toString)&&_d.toString()==="[object FormData]"))},isURLSearchParams=kindOfTest("URLSearchParams"),trim=_d=>_d.trim?_d.trim():_d.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach$1(_d,rp,{allOwnKeys:np=!1}={}){if(_d===null||typeof _d>"u")return;let ap,sp;if(typeof _d!="object"&&(_d=[_d]),isArray(_d))for(ap=0,sp=_d.length;ap<sp;ap++)rp.call(null,_d[ap],ap,_d);else{const lp=np?Object.getOwnPropertyNames(_d):Object.keys(_d),up=lp.length;let cp;for(ap=0;ap<up;ap++)cp=lp[ap],rp.call(null,_d[cp],cp,_d)}}function findKey(_d,rp){rp=rp.toLowerCase();const np=Object.keys(_d);let ap=np.length,sp;for(;ap-- >0;)if(sp=np[ap],rp===sp.toLowerCase())return sp;return null}const _global=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,isContextDefined=_d=>!isUndefined$1(_d)&&_d!==_global;function merge(){const{caseless:_d}=isContextDefined(this)&&this||{},rp={},np=(ap,sp)=>{const lp=_d&&findKey(rp,sp)||sp;isPlainObject$1(rp[lp])&&isPlainObject$1(ap)?rp[lp]=merge(rp[lp],ap):isPlainObject$1(ap)?rp[lp]=merge({},ap):isArray(ap)?rp[lp]=ap.slice():rp[lp]=ap};for(let ap=0,sp=arguments.length;ap<sp;ap++)arguments[ap]&&forEach$1(arguments[ap],np);return rp}const extend=(_d,rp,np,{allOwnKeys:ap}={})=>(forEach$1(rp,(sp,lp)=>{np&&isFunction$1(sp)?_d[lp]=bind(sp,np):_d[lp]=sp},{allOwnKeys:ap}),_d),stripBOM=_d=>(_d.charCodeAt(0)===65279&&(_d=_d.slice(1)),_d),inherits=(_d,rp,np,ap)=>{_d.prototype=Object.create(rp.prototype,ap),_d.prototype.constructor=_d,Object.defineProperty(_d,"super",{value:rp.prototype}),np&&Object.assign(_d.prototype,np)},toFlatObject=(_d,rp,np,ap)=>{let sp,lp,up;const cp={};if(rp=rp||{},_d==null)return rp;do{for(sp=Object.getOwnPropertyNames(_d),lp=sp.length;lp-- >0;)up=sp[lp],(!ap||ap(up,_d,rp))&&!cp[up]&&(rp[up]=_d[up],cp[up]=!0);_d=np!==!1&&getPrototypeOf(_d)}while(_d&&(!np||np(_d,rp))&&_d!==Object.prototype);return rp},endsWith=(_d,rp,np)=>{_d=String(_d),(np===void 0||np>_d.length)&&(np=_d.length),np-=rp.length;const ap=_d.indexOf(rp,np);return ap!==-1&&ap===np},toArray$1=_d=>{if(!_d)return null;if(isArray(_d))return _d;let rp=_d.length;if(!isNumber$1(rp))return null;const np=new Array(rp);for(;rp-- >0;)np[rp]=_d[rp];return np},isTypedArray=(_d=>rp=>_d&&rp instanceof _d)(typeof Uint8Array<"u"&&getPrototypeOf(Uint8Array)),forEachEntry=(_d,rp)=>{const ap=(_d&&_d[Symbol.iterator]).call(_d);let sp;for(;(sp=ap.next())&&!sp.done;){const lp=sp.value;rp.call(_d,lp[0],lp[1])}},matchAll=(_d,rp)=>{let np;const ap=[];for(;(np=_d.exec(rp))!==null;)ap.push(np);return ap},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase=_d=>_d.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(np,ap,sp){return ap.toUpperCase()+sp}),hasOwnProperty$1=(({hasOwnProperty:_d})=>(rp,np)=>_d.call(rp,np))(Object.prototype),isRegExp=kindOfTest("RegExp"),reduceDescriptors=(_d,rp)=>{const np=Object.getOwnPropertyDescriptors(_d),ap={};forEach$1(np,(sp,lp)=>{let up;(up=rp(sp,lp,_d))!==!1&&(ap[lp]=up||sp)}),Object.defineProperties(_d,ap)},freezeMethods=_d=>{reduceDescriptors(_d,(rp,np)=>{if(isFunction$1(_d)&&["arguments","caller","callee"].indexOf(np)!==-1)return!1;const ap=_d[np];if(isFunction$1(ap)){if(rp.enumerable=!1,"writable"in rp){rp.writable=!1;return}rp.set||(rp.set=()=>{throw Error("Can not rewrite read-only method '"+np+"'")})}})},toObjectSet=(_d,rp)=>{const np={},ap=sp=>{sp.forEach(lp=>{np[lp]=!0})};return isArray(_d)?ap(_d):ap(String(_d).split(rp)),np},noop=()=>{},toFiniteNumber=(_d,rp)=>(_d=+_d,Number.isFinite(_d)?_d:rp),ALPHA="abcdefghijklmnopqrstuvwxyz",DIGIT="0123456789",ALPHABET={DIGIT,ALPHA,ALPHA_DIGIT:ALPHA+ALPHA.toUpperCase()+DIGIT},generateString=(_d=16,rp=ALPHABET.ALPHA_DIGIT)=>{let np="";const{length:ap}=rp;for(;_d--;)np+=rp[Math.random()*ap|0];return np};function isSpecCompliantForm(_d){return!!(_d&&isFunction$1(_d.append)&&_d[Symbol.toStringTag]==="FormData"&&_d[Symbol.iterator])}const toJSONObject=_d=>{const rp=new Array(10),np=(ap,sp)=>{if(isObject$1(ap)){if(rp.indexOf(ap)>=0)return;if(!("toJSON"in ap)){rp[sp]=ap;const lp=isArray(ap)?[]:{};return forEach$1(ap,(up,cp)=>{const dp=np(up,sp+1);!isUndefined$1(dp)&&(lp[cp]=dp)}),rp[sp]=void 0,lp}}return ap};return np(_d,0)},isAsyncFn=kindOfTest("AsyncFunction"),isThenable=_d=>_d&&(isObject$1(_d)||isFunction$1(_d))&&isFunction$1(_d.then)&&isFunction$1(_d.catch),utils$1={isArray,isArrayBuffer,isBuffer,isFormData,isArrayBufferView,isString,isNumber:isNumber$1,isBoolean,isObject:isObject$1,isPlainObject:isPlainObject$1,isUndefined:isUndefined$1,isDate,isFile,isBlob,isRegExp,isFunction:isFunction$1,isStream,isURLSearchParams,isTypedArray,isFileList,forEach:forEach$1,merge,extend,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray:toArray$1,forEachEntry,matchAll,isHTMLForm,hasOwnProperty:hasOwnProperty$1,hasOwnProp:hasOwnProperty$1,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase,noop,toFiniteNumber,findKey,global:_global,isContextDefined,ALPHABET,generateString,isSpecCompliantForm,toJSONObject,isAsyncFn,isThenable};function AxiosError(_d,rp,np,ap,sp){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=_d,this.name="AxiosError",rp&&(this.code=rp),np&&(this.config=np),ap&&(this.request=ap),sp&&(this.response=sp)}utils$1.inherits(AxiosError,Error,{toJSON:function _d(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils$1.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const prototype$1=AxiosError.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(_d=>{descriptors[_d]={value:_d}});Object.defineProperties(AxiosError,descriptors);Object.defineProperty(prototype$1,"isAxiosError",{value:!0});AxiosError.from=(_d,rp,np,ap,sp,lp)=>{const up=Object.create(prototype$1);return utils$1.toFlatObject(_d,up,function(dp){return dp!==Error.prototype},cp=>cp!=="isAxiosError"),AxiosError.call(up,_d.message,rp,np,ap,sp),up.cause=_d,up.name=_d.name,lp&&Object.assign(up,lp),up};const httpAdapter=null;function isVisitable(_d){return utils$1.isPlainObject(_d)||utils$1.isArray(_d)}function removeBrackets(_d){return utils$1.endsWith(_d,"[]")?_d.slice(0,-2):_d}function renderKey(_d,rp,np){return _d?_d.concat(rp).map(function(sp,lp){return sp=removeBrackets(sp),!np&&lp?"["+sp+"]":sp}).join(np?".":""):rp}function isFlatArray(_d){return utils$1.isArray(_d)&&!_d.some(isVisitable)}const predicates=utils$1.toFlatObject(utils$1,{},null,function _d(rp){return/^is[A-Z]/.test(rp)});function toFormData(_d,rp,np){if(!utils$1.isObject(_d))throw new TypeError("target must be an object");rp=rp||new FormData,np=utils$1.toFlatObject(np,{metaTokens:!0,dots:!1,indexes:!1},!1,function(xp,Sp){return!utils$1.isUndefined(Sp[xp])});const ap=np.metaTokens,sp=np.visitor||pp,lp=np.dots,up=np.indexes,dp=(np.Blob||typeof Blob<"u"&&Blob)&&utils$1.isSpecCompliantForm(rp);if(!utils$1.isFunction(sp))throw new TypeError("visitor must be a function");function fp(vp){if(vp===null)return"";if(utils$1.isDate(vp))return vp.toISOString();if(!dp&&utils$1.isBlob(vp))throw new AxiosError("Blob is not supported. Use a Buffer instead.");return utils$1.isArrayBuffer(vp)||utils$1.isTypedArray(vp)?dp&&typeof Blob=="function"?new Blob([vp]):Buffer.from(vp):vp}function pp(vp,xp,Sp){let yp=vp;if(vp&&!Sp&&typeof vp=="object"){if(utils$1.endsWith(xp,"{}"))xp=ap?xp:xp.slice(0,-2),vp=JSON.stringify(vp);else if(utils$1.isArray(vp)&&isFlatArray(vp)||(utils$1.isFileList(vp)||utils$1.endsWith(xp,"[]"))&&(yp=utils$1.toArray(vp)))return xp=removeBrackets(xp),yp.forEach(function(Ep,wp){!(utils$1.isUndefined(Ep)||Ep===null)&&rp.append(up===!0?renderKey([xp],wp,lp):up===null?xp:xp+"[]",fp(Ep))}),!1}return isVisitable(vp)?!0:(rp.append(renderKey(Sp,xp,lp),fp(vp)),!1)}const hp=[],mp=Object.assign(predicates,{defaultVisitor:pp,convertValue:fp,isVisitable});function gp(vp,xp){if(!utils$1.isUndefined(vp)){if(hp.indexOf(vp)!==-1)throw Error("Circular reference detected in "+xp.join("."));hp.push(vp),utils$1.forEach(vp,function(yp,bp){(!(utils$1.isUndefined(yp)||yp===null)&&sp.call(rp,yp,utils$1.isString(bp)?bp.trim():bp,xp,mp))===!0&&gp(yp,xp?xp.concat(bp):[bp])}),hp.pop()}}if(!utils$1.isObject(_d))throw new TypeError("data must be an object");return gp(_d),rp}function encode$1(_d){const rp={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(_d).replace(/[!'()~]|%20|%00/g,function(ap){return rp[ap]})}function AxiosURLSearchParams(_d,rp){this._pairs=[],_d&&toFormData(_d,this,rp)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function _d(rp,np){this._pairs.push([rp,np])};prototype.toString=function _d(rp){const np=rp?function(ap){return rp.call(this,ap,encode$1)}:encode$1;return this._pairs.map(function(sp){return np(sp[0])+"="+np(sp[1])},"").join("&")};function encode(_d){return encodeURIComponent(_d).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL(_d,rp,np){if(!rp)return _d;const ap=np&&np.encode||encode,sp=np&&np.serialize;let lp;if(sp?lp=sp(rp,np):lp=utils$1.isURLSearchParams(rp)?rp.toString():new AxiosURLSearchParams(rp,np).toString(ap),lp){const up=_d.indexOf("#");up!==-1&&(_d=_d.slice(0,up)),_d+=(_d.indexOf("?")===-1?"?":"&")+lp}return _d}class InterceptorManager{constructor(){this.handlers=[]}use(rp,np,ap){return this.handlers.push({fulfilled:rp,rejected:np,synchronous:ap?ap.synchronous:!1,runWhen:ap?ap.runWhen:null}),this.handlers.length-1}eject(rp){this.handlers[rp]&&(this.handlers[rp]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(rp){utils$1.forEach(this.handlers,function(ap){ap!==null&&rp(ap)})}}const transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$1=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams,FormData$1=typeof FormData<"u"?FormData:null,Blob$1=typeof Blob<"u"?Blob:null,platform$8={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$1,Blob:Blob$1},protocols:["http","https","file","blob","url","data"]},hasBrowserEnv=typeof window<"u"&&typeof document<"u",hasStandardBrowserEnv=(_d=>hasBrowserEnv&&["ReactNative","NativeScript","NS"].indexOf(_d)<0)(typeof navigator<"u"&&navigator.product),hasStandardBrowserWebWorkerEnv=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",utils=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv,hasStandardBrowserEnv,hasStandardBrowserWebWorkerEnv},Symbol.toStringTag,{value:"Module"})),platform$7={...utils,...platform$8};function toURLEncodedForm(_d,rp){return toFormData(_d,new platform$7.classes.URLSearchParams,Object.assign({visitor:function(np,ap,sp,lp){return platform$7.isNode&&utils$1.isBuffer(np)?(this.append(ap,np.toString("base64")),!1):lp.defaultVisitor.apply(this,arguments)}},rp))}function parsePropPath(_d){return utils$1.matchAll(/\w+|\[(\w*)]/g,_d).map(rp=>rp[0]==="[]"?"":rp[1]||rp[0])}function arrayToObject(_d){const rp={},np=Object.keys(_d);let ap;const sp=np.length;let lp;for(ap=0;ap<sp;ap++)lp=np[ap],rp[lp]=_d[lp];return rp}function formDataToJSON(_d){function rp(np,ap,sp,lp){let up=np[lp++];if(up==="__proto__")return!0;const cp=Number.isFinite(+up),dp=lp>=np.length;return up=!up&&utils$1.isArray(sp)?sp.length:up,dp?(utils$1.hasOwnProp(sp,up)?sp[up]=[sp[up],ap]:sp[up]=ap,!cp):((!sp[up]||!utils$1.isObject(sp[up]))&&(sp[up]=[]),rp(np,ap,sp[up],lp)&&utils$1.isArray(sp[up])&&(sp[up]=arrayToObject(sp[up])),!cp)}if(utils$1.isFormData(_d)&&utils$1.isFunction(_d.entries)){const np={};return utils$1.forEachEntry(_d,(ap,sp)=>{rp(parsePropPath(ap),sp,np,0)}),np}return null}function stringifySafely(_d,rp,np){if(utils$1.isString(_d))try{return(rp||JSON.parse)(_d),utils$1.trim(_d)}catch(ap){if(ap.name!=="SyntaxError")throw ap}return(np||JSON.stringify)(_d)}const defaults={transitional:transitionalDefaults,adapter:["xhr","http"],transformRequest:[function _d(rp,np){const ap=np.getContentType()||"",sp=ap.indexOf("application/json")>-1,lp=utils$1.isObject(rp);if(lp&&utils$1.isHTMLForm(rp)&&(rp=new FormData(rp)),utils$1.isFormData(rp))return sp?JSON.stringify(formDataToJSON(rp)):rp;if(utils$1.isArrayBuffer(rp)||utils$1.isBuffer(rp)||utils$1.isStream(rp)||utils$1.isFile(rp)||utils$1.isBlob(rp))return rp;if(utils$1.isArrayBufferView(rp))return rp.buffer;if(utils$1.isURLSearchParams(rp))return np.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),rp.toString();let cp;if(lp){if(ap.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(rp,this.formSerializer).toString();if((cp=utils$1.isFileList(rp))||ap.indexOf("multipart/form-data")>-1){const dp=this.env&&this.env.FormData;return toFormData(cp?{"files[]":rp}:rp,dp&&new dp,this.formSerializer)}}return lp||sp?(np.setContentType("application/json",!1),stringifySafely(rp)):rp}],transformResponse:[function _d(rp){const np=this.transitional||defaults.transitional,ap=np&&np.forcedJSONParsing,sp=this.responseType==="json";if(rp&&utils$1.isString(rp)&&(ap&&!this.responseType||sp)){const up=!(np&&np.silentJSONParsing)&&sp;try{return JSON.parse(rp)}catch(cp){if(up)throw cp.name==="SyntaxError"?AxiosError.from(cp,AxiosError.ERR_BAD_RESPONSE,this,null,this.response):cp}}return rp}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform$7.classes.FormData,Blob:platform$7.classes.Blob},validateStatus:function _d(rp){return rp>=200&&rp<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};utils$1.forEach(["delete","get","head","post","put","patch"],_d=>{defaults.headers[_d]={}});const defaults$1=defaults,ignoreDuplicateOf=utils$1.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders=_d=>{const rp={};let np,ap,sp;return _d&&_d.split(`
`).forEach(function(up){sp=up.indexOf(":"),np=up.substring(0,sp).trim().toLowerCase(),ap=up.substring(sp+1).trim(),!(!np||rp[np]&&ignoreDuplicateOf[np])&&(np==="set-cookie"?rp[np]?rp[np].push(ap):rp[np]=[ap]:rp[np]=rp[np]?rp[np]+", "+ap:ap)}),rp},$internals=Symbol("internals");function normalizeHeader(_d){return _d&&String(_d).trim().toLowerCase()}function normalizeValue(_d){return _d===!1||_d==null?_d:utils$1.isArray(_d)?_d.map(normalizeValue):String(_d)}function parseTokens(_d){const rp=Object.create(null),np=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let ap;for(;ap=np.exec(_d);)rp[ap[1]]=ap[2];return rp}const isValidHeaderName=_d=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(_d.trim());function matchHeaderValue(_d,rp,np,ap,sp){if(utils$1.isFunction(ap))return ap.call(this,rp,np);if(sp&&(rp=np),!!utils$1.isString(rp)){if(utils$1.isString(ap))return rp.indexOf(ap)!==-1;if(utils$1.isRegExp(ap))return ap.test(rp)}}function formatHeader(_d){return _d.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(rp,np,ap)=>np.toUpperCase()+ap)}function buildAccessors(_d,rp){const np=utils$1.toCamelCase(" "+rp);["get","set","has"].forEach(ap=>{Object.defineProperty(_d,ap+np,{value:function(sp,lp,up){return this[ap].call(this,rp,sp,lp,up)},configurable:!0})})}class AxiosHeaders{constructor(rp){rp&&this.set(rp)}set(rp,np,ap){const sp=this;function lp(cp,dp,fp){const pp=normalizeHeader(dp);if(!pp)throw new Error("header name must be a non-empty string");const hp=utils$1.findKey(sp,pp);(!hp||sp[hp]===void 0||fp===!0||fp===void 0&&sp[hp]!==!1)&&(sp[hp||dp]=normalizeValue(cp))}const up=(cp,dp)=>utils$1.forEach(cp,(fp,pp)=>lp(fp,pp,dp));return utils$1.isPlainObject(rp)||rp instanceof this.constructor?up(rp,np):utils$1.isString(rp)&&(rp=rp.trim())&&!isValidHeaderName(rp)?up(parseHeaders(rp),np):rp!=null&&lp(np,rp,ap),this}get(rp,np){if(rp=normalizeHeader(rp),rp){const ap=utils$1.findKey(this,rp);if(ap){const sp=this[ap];if(!np)return sp;if(np===!0)return parseTokens(sp);if(utils$1.isFunction(np))return np.call(this,sp,ap);if(utils$1.isRegExp(np))return np.exec(sp);throw new TypeError("parser must be boolean|regexp|function")}}}has(rp,np){if(rp=normalizeHeader(rp),rp){const ap=utils$1.findKey(this,rp);return!!(ap&&this[ap]!==void 0&&(!np||matchHeaderValue(this,this[ap],ap,np)))}return!1}delete(rp,np){const ap=this;let sp=!1;function lp(up){if(up=normalizeHeader(up),up){const cp=utils$1.findKey(ap,up);cp&&(!np||matchHeaderValue(ap,ap[cp],cp,np))&&(delete ap[cp],sp=!0)}}return utils$1.isArray(rp)?rp.forEach(lp):lp(rp),sp}clear(rp){const np=Object.keys(this);let ap=np.length,sp=!1;for(;ap--;){const lp=np[ap];(!rp||matchHeaderValue(this,this[lp],lp,rp,!0))&&(delete this[lp],sp=!0)}return sp}normalize(rp){const np=this,ap={};return utils$1.forEach(this,(sp,lp)=>{const up=utils$1.findKey(ap,lp);if(up){np[up]=normalizeValue(sp),delete np[lp];return}const cp=rp?formatHeader(lp):String(lp).trim();cp!==lp&&delete np[lp],np[cp]=normalizeValue(sp),ap[cp]=!0}),this}concat(...rp){return this.constructor.concat(this,...rp)}toJSON(rp){const np=Object.create(null);return utils$1.forEach(this,(ap,sp)=>{ap!=null&&ap!==!1&&(np[sp]=rp&&utils$1.isArray(ap)?ap.join(", "):ap)}),np}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([rp,np])=>rp+": "+np).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(rp){return rp instanceof this?rp:new this(rp)}static concat(rp,...np){const ap=new this(rp);return np.forEach(sp=>ap.set(sp)),ap}static accessor(rp){const ap=(this[$internals]=this[$internals]={accessors:{}}).accessors,sp=this.prototype;function lp(up){const cp=normalizeHeader(up);ap[cp]||(buildAccessors(sp,up),ap[cp]=!0)}return utils$1.isArray(rp)?rp.forEach(lp):lp(rp),this}}AxiosHeaders.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);utils$1.reduceDescriptors(AxiosHeaders.prototype,({value:_d},rp)=>{let np=rp[0].toUpperCase()+rp.slice(1);return{get:()=>_d,set(ap){this[np]=ap}}});utils$1.freezeMethods(AxiosHeaders);const AxiosHeaders$1=AxiosHeaders;function transformData(_d,rp){const np=this||defaults$1,ap=rp||np,sp=AxiosHeaders$1.from(ap.headers);let lp=ap.data;return utils$1.forEach(_d,function(cp){lp=cp.call(np,lp,sp.normalize(),rp?rp.status:void 0)}),sp.normalize(),lp}function isCancel(_d){return!!(_d&&_d.__CANCEL__)}function CanceledError(_d,rp,np){AxiosError.call(this,_d??"canceled",AxiosError.ERR_CANCELED,rp,np),this.name="CanceledError"}utils$1.inherits(CanceledError,AxiosError,{__CANCEL__:!0});function settle(_d,rp,np){const ap=np.config.validateStatus;!np.status||!ap||ap(np.status)?_d(np):rp(new AxiosError("Request failed with status code "+np.status,[AxiosError.ERR_BAD_REQUEST,AxiosError.ERR_BAD_RESPONSE][Math.floor(np.status/100)-4],np.config,np.request,np))}const cookies=platform$7.hasStandardBrowserEnv?{write(_d,rp,np,ap,sp,lp){const up=[_d+"="+encodeURIComponent(rp)];utils$1.isNumber(np)&&up.push("expires="+new Date(np).toGMTString()),utils$1.isString(ap)&&up.push("path="+ap),utils$1.isString(sp)&&up.push("domain="+sp),lp===!0&&up.push("secure"),document.cookie=up.join("; ")},read(_d){const rp=document.cookie.match(new RegExp("(^|;\\s*)("+_d+")=([^;]*)"));return rp?decodeURIComponent(rp[3]):null},remove(_d){this.write(_d,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function isAbsoluteURL(_d){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(_d)}function combineURLs(_d,rp){return rp?_d.replace(/\/?\/$/,"")+"/"+rp.replace(/^\/+/,""):_d}function buildFullPath(_d,rp){return _d&&!isAbsoluteURL(rp)?combineURLs(_d,rp):rp}const isURLSameOrigin=platform$7.hasStandardBrowserEnv?function _d(){const rp=/(msie|trident)/i.test(navigator.userAgent),np=document.createElement("a");let ap;function sp(lp){let up=lp;return rp&&(np.setAttribute("href",up),up=np.href),np.setAttribute("href",up),{href:np.href,protocol:np.protocol?np.protocol.replace(/:$/,""):"",host:np.host,search:np.search?np.search.replace(/^\?/,""):"",hash:np.hash?np.hash.replace(/^#/,""):"",hostname:np.hostname,port:np.port,pathname:np.pathname.charAt(0)==="/"?np.pathname:"/"+np.pathname}}return ap=sp(window.location.href),function(up){const cp=utils$1.isString(up)?sp(up):up;return cp.protocol===ap.protocol&&cp.host===ap.host}}():function _d(){return function(){return!0}}();function parseProtocol(_d){const rp=/^([-+\w]{1,25})(:?\/\/|:)/.exec(_d);return rp&&rp[1]||""}function speedometer(_d,rp){_d=_d||10;const np=new Array(_d),ap=new Array(_d);let sp=0,lp=0,up;return rp=rp!==void 0?rp:1e3,function(dp){const fp=Date.now(),pp=ap[lp];up||(up=fp),np[sp]=dp,ap[sp]=fp;let hp=lp,mp=0;for(;hp!==sp;)mp+=np[hp++],hp=hp%_d;if(sp=(sp+1)%_d,sp===lp&&(lp=(lp+1)%_d),fp-up<rp)return;const gp=pp&&fp-pp;return gp?Math.round(mp*1e3/gp):void 0}}function progressEventReducer(_d,rp){let np=0;const ap=speedometer(50,250);return sp=>{const lp=sp.loaded,up=sp.lengthComputable?sp.total:void 0,cp=lp-np,dp=ap(cp),fp=lp<=up;np=lp;const pp={loaded:lp,total:up,progress:up?lp/up:void 0,bytes:cp,rate:dp||void 0,estimated:dp&&up&&fp?(up-lp)/dp:void 0,event:sp};pp[rp?"download":"upload"]=!0,_d(pp)}}const isXHRAdapterSupported=typeof XMLHttpRequest<"u",xhrAdapter=isXHRAdapterSupported&&function(_d){return new Promise(function(np,ap){let sp=_d.data;const lp=AxiosHeaders$1.from(_d.headers).normalize();let{responseType:up,withXSRFToken:cp}=_d,dp;function fp(){_d.cancelToken&&_d.cancelToken.unsubscribe(dp),_d.signal&&_d.signal.removeEventListener("abort",dp)}let pp;if(utils$1.isFormData(sp)){if(platform$7.hasStandardBrowserEnv||platform$7.hasStandardBrowserWebWorkerEnv)lp.setContentType(!1);else if((pp=lp.getContentType())!==!1){const[xp,...Sp]=pp?pp.split(";").map(yp=>yp.trim()).filter(Boolean):[];lp.setContentType([xp||"multipart/form-data",...Sp].join("; "))}}let hp=new XMLHttpRequest;if(_d.auth){const xp=_d.auth.username||"",Sp=_d.auth.password?unescape(encodeURIComponent(_d.auth.password)):"";lp.set("Authorization","Basic "+btoa(xp+":"+Sp))}const mp=buildFullPath(_d.baseURL,_d.url);hp.open(_d.method.toUpperCase(),buildURL(mp,_d.params,_d.paramsSerializer),!0),hp.timeout=_d.timeout;function gp(){if(!hp)return;const xp=AxiosHeaders$1.from("getAllResponseHeaders"in hp&&hp.getAllResponseHeaders()),yp={data:!up||up==="text"||up==="json"?hp.responseText:hp.response,status:hp.status,statusText:hp.statusText,headers:xp,config:_d,request:hp};settle(function(Ep){np(Ep),fp()},function(Ep){ap(Ep),fp()},yp),hp=null}if("onloadend"in hp?hp.onloadend=gp:hp.onreadystatechange=function(){!hp||hp.readyState!==4||hp.status===0&&!(hp.responseURL&&hp.responseURL.indexOf("file:")===0)||setTimeout(gp)},hp.onabort=function(){hp&&(ap(new AxiosError("Request aborted",AxiosError.ECONNABORTED,_d,hp)),hp=null)},hp.onerror=function(){ap(new AxiosError("Network Error",AxiosError.ERR_NETWORK,_d,hp)),hp=null},hp.ontimeout=function(){let Sp=_d.timeout?"timeout of "+_d.timeout+"ms exceeded":"timeout exceeded";const yp=_d.transitional||transitionalDefaults;_d.timeoutErrorMessage&&(Sp=_d.timeoutErrorMessage),ap(new AxiosError(Sp,yp.clarifyTimeoutError?AxiosError.ETIMEDOUT:AxiosError.ECONNABORTED,_d,hp)),hp=null},platform$7.hasStandardBrowserEnv&&(cp&&utils$1.isFunction(cp)&&(cp=cp(_d)),cp||cp!==!1&&isURLSameOrigin(mp))){const xp=_d.xsrfHeaderName&&_d.xsrfCookieName&&cookies.read(_d.xsrfCookieName);xp&&lp.set(_d.xsrfHeaderName,xp)}sp===void 0&&lp.setContentType(null),"setRequestHeader"in hp&&utils$1.forEach(lp.toJSON(),function(Sp,yp){hp.setRequestHeader(yp,Sp)}),utils$1.isUndefined(_d.withCredentials)||(hp.withCredentials=!!_d.withCredentials),up&&up!=="json"&&(hp.responseType=_d.responseType),typeof _d.onDownloadProgress=="function"&&hp.addEventListener("progress",progressEventReducer(_d.onDownloadProgress,!0)),typeof _d.onUploadProgress=="function"&&hp.upload&&hp.upload.addEventListener("progress",progressEventReducer(_d.onUploadProgress)),(_d.cancelToken||_d.signal)&&(dp=xp=>{hp&&(ap(!xp||xp.type?new CanceledError(null,_d,hp):xp),hp.abort(),hp=null)},_d.cancelToken&&_d.cancelToken.subscribe(dp),_d.signal&&(_d.signal.aborted?dp():_d.signal.addEventListener("abort",dp)));const vp=parseProtocol(mp);if(vp&&platform$7.protocols.indexOf(vp)===-1){ap(new AxiosError("Unsupported protocol "+vp+":",AxiosError.ERR_BAD_REQUEST,_d));return}hp.send(sp||null)})},knownAdapters={http:httpAdapter,xhr:xhrAdapter};utils$1.forEach(knownAdapters,(_d,rp)=>{if(_d){try{Object.defineProperty(_d,"name",{value:rp})}catch{}Object.defineProperty(_d,"adapterName",{value:rp})}});const renderReason=_d=>`- ${_d}`,isResolvedHandle=_d=>utils$1.isFunction(_d)||_d===null||_d===!1,adapters={getAdapter:_d=>{_d=utils$1.isArray(_d)?_d:[_d];const{length:rp}=_d;let np,ap;const sp={};for(let lp=0;lp<rp;lp++){np=_d[lp];let up;if(ap=np,!isResolvedHandle(np)&&(ap=knownAdapters[(up=String(np)).toLowerCase()],ap===void 0))throw new AxiosError(`Unknown adapter '${up}'`);if(ap)break;sp[up||"#"+lp]=ap}if(!ap){const lp=Object.entries(sp).map(([cp,dp])=>`adapter ${cp} `+(dp===!1?"is not supported by the environment":"is not available in the build"));let up=rp?lp.length>1?`since :
`+lp.map(renderReason).join(`
`):" "+renderReason(lp[0]):"as no adapter specified";throw new AxiosError("There is no suitable adapter to dispatch the request "+up,"ERR_NOT_SUPPORT")}return ap},adapters:knownAdapters};function throwIfCancellationRequested(_d){if(_d.cancelToken&&_d.cancelToken.throwIfRequested(),_d.signal&&_d.signal.aborted)throw new CanceledError(null,_d)}function dispatchRequest(_d){return throwIfCancellationRequested(_d),_d.headers=AxiosHeaders$1.from(_d.headers),_d.data=transformData.call(_d,_d.transformRequest),["post","put","patch"].indexOf(_d.method)!==-1&&_d.headers.setContentType("application/x-www-form-urlencoded",!1),adapters.getAdapter(_d.adapter||defaults$1.adapter)(_d).then(function(ap){return throwIfCancellationRequested(_d),ap.data=transformData.call(_d,_d.transformResponse,ap),ap.headers=AxiosHeaders$1.from(ap.headers),ap},function(ap){return isCancel(ap)||(throwIfCancellationRequested(_d),ap&&ap.response&&(ap.response.data=transformData.call(_d,_d.transformResponse,ap.response),ap.response.headers=AxiosHeaders$1.from(ap.response.headers))),Promise.reject(ap)})}const headersToObject=_d=>_d instanceof AxiosHeaders$1?_d.toJSON():_d;function mergeConfig(_d,rp){rp=rp||{};const np={};function ap(fp,pp,hp){return utils$1.isPlainObject(fp)&&utils$1.isPlainObject(pp)?utils$1.merge.call({caseless:hp},fp,pp):utils$1.isPlainObject(pp)?utils$1.merge({},pp):utils$1.isArray(pp)?pp.slice():pp}function sp(fp,pp,hp){if(utils$1.isUndefined(pp)){if(!utils$1.isUndefined(fp))return ap(void 0,fp,hp)}else return ap(fp,pp,hp)}function lp(fp,pp){if(!utils$1.isUndefined(pp))return ap(void 0,pp)}function up(fp,pp){if(utils$1.isUndefined(pp)){if(!utils$1.isUndefined(fp))return ap(void 0,fp)}else return ap(void 0,pp)}function cp(fp,pp,hp){if(hp in rp)return ap(fp,pp);if(hp in _d)return ap(void 0,fp)}const dp={url:lp,method:lp,data:lp,baseURL:up,transformRequest:up,transformResponse:up,paramsSerializer:up,timeout:up,timeoutMessage:up,withCredentials:up,withXSRFToken:up,adapter:up,responseType:up,xsrfCookieName:up,xsrfHeaderName:up,onUploadProgress:up,onDownloadProgress:up,decompress:up,maxContentLength:up,maxBodyLength:up,beforeRedirect:up,transport:up,httpAgent:up,httpsAgent:up,cancelToken:up,socketPath:up,responseEncoding:up,validateStatus:cp,headers:(fp,pp)=>sp(headersToObject(fp),headersToObject(pp),!0)};return utils$1.forEach(Object.keys(Object.assign({},_d,rp)),function(pp){const hp=dp[pp]||sp,mp=hp(_d[pp],rp[pp],pp);utils$1.isUndefined(mp)&&hp!==cp||(np[pp]=mp)}),np}const VERSION="1.6.7",validators$1={};["object","boolean","number","function","string","symbol"].forEach((_d,rp)=>{validators$1[_d]=function(ap){return typeof ap===_d||"a"+(rp<1?"n ":" ")+_d}});const deprecatedWarnings={};validators$1.transitional=function _d(rp,np,ap){function sp(lp,up){return"[Axios v"+VERSION+"] Transitional option '"+lp+"'"+up+(ap?". "+ap:"")}return(lp,up,cp)=>{if(rp===!1)throw new AxiosError(sp(up," has been removed"+(np?" in "+np:"")),AxiosError.ERR_DEPRECATED);return np&&!deprecatedWarnings[up]&&(deprecatedWarnings[up]=!0,console.warn(sp(up," has been deprecated since v"+np+" and will be removed in the near future"))),rp?rp(lp,up,cp):!0}};function assertOptions(_d,rp,np){if(typeof _d!="object")throw new AxiosError("options must be an object",AxiosError.ERR_BAD_OPTION_VALUE);const ap=Object.keys(_d);let sp=ap.length;for(;sp-- >0;){const lp=ap[sp],up=rp[lp];if(up){const cp=_d[lp],dp=cp===void 0||up(cp,lp,_d);if(dp!==!0)throw new AxiosError("option "+lp+" must be "+dp,AxiosError.ERR_BAD_OPTION_VALUE);continue}if(np!==!0)throw new AxiosError("Unknown option "+lp,AxiosError.ERR_BAD_OPTION)}}const validator={assertOptions,validators:validators$1},validators=validator.validators;class Axios{constructor(rp){this.defaults=rp,this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}async request(rp,np){try{return await this._request(rp,np)}catch(ap){if(ap instanceof Error){let sp;Error.captureStackTrace?Error.captureStackTrace(sp={}):sp=new Error;const lp=sp.stack?sp.stack.replace(/^.+\n/,""):"";ap.stack?lp&&!String(ap.stack).endsWith(lp.replace(/^.+\n.+\n/,""))&&(ap.stack+=`
`+lp):ap.stack=lp}throw ap}}_request(rp,np){typeof rp=="string"?(np=np||{},np.url=rp):np=rp||{},np=mergeConfig(this.defaults,np);const{transitional:ap,paramsSerializer:sp,headers:lp}=np;ap!==void 0&&validator.assertOptions(ap,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1),sp!=null&&(utils$1.isFunction(sp)?np.paramsSerializer={serialize:sp}:validator.assertOptions(sp,{encode:validators.function,serialize:validators.function},!0)),np.method=(np.method||this.defaults.method||"get").toLowerCase();let up=lp&&utils$1.merge(lp.common,lp[np.method]);lp&&utils$1.forEach(["delete","get","head","post","put","patch","common"],vp=>{delete lp[vp]}),np.headers=AxiosHeaders$1.concat(up,lp);const cp=[];let dp=!0;this.interceptors.request.forEach(function(xp){typeof xp.runWhen=="function"&&xp.runWhen(np)===!1||(dp=dp&&xp.synchronous,cp.unshift(xp.fulfilled,xp.rejected))});const fp=[];this.interceptors.response.forEach(function(xp){fp.push(xp.fulfilled,xp.rejected)});let pp,hp=0,mp;if(!dp){const vp=[dispatchRequest.bind(this),void 0];for(vp.unshift.apply(vp,cp),vp.push.apply(vp,fp),mp=vp.length,pp=Promise.resolve(np);hp<mp;)pp=pp.then(vp[hp++],vp[hp++]);return pp}mp=cp.length;let gp=np;for(hp=0;hp<mp;){const vp=cp[hp++],xp=cp[hp++];try{gp=vp(gp)}catch(Sp){xp.call(this,Sp);break}}try{pp=dispatchRequest.call(this,gp)}catch(vp){return Promise.reject(vp)}for(hp=0,mp=fp.length;hp<mp;)pp=pp.then(fp[hp++],fp[hp++]);return pp}getUri(rp){rp=mergeConfig(this.defaults,rp);const np=buildFullPath(rp.baseURL,rp.url);return buildURL(np,rp.params,rp.paramsSerializer)}}utils$1.forEach(["delete","get","head","options"],function _d(rp){Axios.prototype[rp]=function(np,ap){return this.request(mergeConfig(ap||{},{method:rp,url:np,data:(ap||{}).data}))}});utils$1.forEach(["post","put","patch"],function _d(rp){function np(ap){return function(lp,up,cp){return this.request(mergeConfig(cp||{},{method:rp,headers:ap?{"Content-Type":"multipart/form-data"}:{},url:lp,data:up}))}}Axios.prototype[rp]=np(),Axios.prototype[rp+"Form"]=np(!0)});const Axios$1=Axios;class CancelToken{constructor(rp){if(typeof rp!="function")throw new TypeError("executor must be a function.");let np;this.promise=new Promise(function(lp){np=lp});const ap=this;this.promise.then(sp=>{if(!ap._listeners)return;let lp=ap._listeners.length;for(;lp-- >0;)ap._listeners[lp](sp);ap._listeners=null}),this.promise.then=sp=>{let lp;const up=new Promise(cp=>{ap.subscribe(cp),lp=cp}).then(sp);return up.cancel=function(){ap.unsubscribe(lp)},up},rp(function(lp,up,cp){ap.reason||(ap.reason=new CanceledError(lp,up,cp),np(ap.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(rp){if(this.reason){rp(this.reason);return}this._listeners?this._listeners.push(rp):this._listeners=[rp]}unsubscribe(rp){if(!this._listeners)return;const np=this._listeners.indexOf(rp);np!==-1&&this._listeners.splice(np,1)}static source(){let rp;return{token:new CancelToken(function(sp){rp=sp}),cancel:rp}}}const CancelToken$1=CancelToken;function spread(_d){return function(np){return _d.apply(null,np)}}function isAxiosError(_d){return utils$1.isObject(_d)&&_d.isAxiosError===!0}const HttpStatusCode={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(HttpStatusCode).forEach(([_d,rp])=>{HttpStatusCode[rp]=_d});const HttpStatusCode$1=HttpStatusCode;function createInstance(_d){const rp=new Axios$1(_d),np=bind(Axios$1.prototype.request,rp);return utils$1.extend(np,Axios$1.prototype,rp,{allOwnKeys:!0}),utils$1.extend(np,rp,null,{allOwnKeys:!0}),np.create=function(sp){return createInstance(mergeConfig(_d,sp))},np}const axios=createInstance(defaults$1);axios.Axios=Axios$1;axios.CanceledError=CanceledError;axios.CancelToken=CancelToken$1;axios.isCancel=isCancel;axios.VERSION=VERSION;axios.toFormData=toFormData;axios.AxiosError=AxiosError;axios.Cancel=axios.CanceledError;axios.all=function _d(rp){return Promise.all(rp)};axios.spread=spread;axios.isAxiosError=isAxiosError;axios.mergeConfig=mergeConfig;axios.AxiosHeaders=AxiosHeaders$1;axios.formToJSON=_d=>formDataToJSON(utils$1.isHTMLForm(_d)?new FormData(_d):_d);axios.getAdapter=adapters.getAdapter;axios.HttpStatusCode=HttpStatusCode$1;axios.default=axios;var define_process_env_default$1={};function err$1(_d){const rp=new Error(_d);if(rp.stack===void 0)try{throw rp}catch{}return rp}var err_1=err$1,Recoil_err=err_1;function isPromise(_d){return!!_d&&typeof _d.then=="function"}var Recoil_isPromise=isPromise;function nullthrows(_d,rp){if(_d!=null)return _d;throw Recoil_err(rp??"Got unexpected null or undefined")}var Recoil_nullthrows=nullthrows;function _defineProperty$1(_d,rp,np){return rp in _d?Object.defineProperty(_d,rp,{value:np,enumerable:!0,configurable:!0,writable:!0}):_d[rp]=np,_d}class BaseLoadable{getValue(){throw Recoil_err("BaseLoadable")}toPromise(){throw Recoil_err("BaseLoadable")}valueMaybe(){throw Recoil_err("BaseLoadable")}valueOrThrow(){throw Recoil_err(`Loadable expected value, but in "${this.state}" state`)}promiseMaybe(){throw Recoil_err("BaseLoadable")}promiseOrThrow(){throw Recoil_err(`Loadable expected promise, but in "${this.state}" state`)}errorMaybe(){throw Recoil_err("BaseLoadable")}errorOrThrow(){throw Recoil_err(`Loadable expected error, but in "${this.state}" state`)}is(rp){return rp.state===this.state&&rp.contents===this.contents}map(rp){throw Recoil_err("BaseLoadable")}}class ValueLoadable extends BaseLoadable{constructor(rp){super(),_defineProperty$1(this,"state","hasValue"),_defineProperty$1(this,"contents",void 0),this.contents=rp}getValue(){return this.contents}toPromise(){return Promise.resolve(this.contents)}valueMaybe(){return this.contents}valueOrThrow(){return this.contents}promiseMaybe(){}errorMaybe(){}map(rp){try{const np=rp(this.contents);return Recoil_isPromise(np)?loadableWithPromise(np):isLoadable(np)?np:loadableWithValue(np)}catch(np){return Recoil_isPromise(np)?loadableWithPromise(np.next(()=>this.map(rp))):loadableWithError(np)}}}class ErrorLoadable extends BaseLoadable{constructor(rp){super(),_defineProperty$1(this,"state","hasError"),_defineProperty$1(this,"contents",void 0),this.contents=rp}getValue(){throw this.contents}toPromise(){return Promise.reject(this.contents)}valueMaybe(){}promiseMaybe(){}errorMaybe(){return this.contents}errorOrThrow(){return this.contents}map(rp){return this}}class LoadingLoadable extends BaseLoadable{constructor(rp){super(),_defineProperty$1(this,"state","loading"),_defineProperty$1(this,"contents",void 0),this.contents=rp}getValue(){throw this.contents}toPromise(){return this.contents}valueMaybe(){}promiseMaybe(){return this.contents}promiseOrThrow(){return this.contents}errorMaybe(){}map(rp){return loadableWithPromise(this.contents.then(np=>{const ap=rp(np);if(isLoadable(ap)){const sp=ap;switch(sp.state){case"hasValue":return sp.contents;case"hasError":throw sp.contents;case"loading":return sp.contents}}return ap}).catch(np=>{if(Recoil_isPromise(np))return np.then(()=>this.map(rp).contents);throw np}))}}function loadableWithValue(_d){return Object.freeze(new ValueLoadable(_d))}function loadableWithError(_d){return Object.freeze(new ErrorLoadable(_d))}function loadableWithPromise(_d){return Object.freeze(new LoadingLoadable(_d))}function loadableLoading(){return Object.freeze(new LoadingLoadable(new Promise(()=>{})))}function loadableAllArray(_d){return _d.every(rp=>rp.state==="hasValue")?loadableWithValue(_d.map(rp=>rp.contents)):_d.some(rp=>rp.state==="hasError")?loadableWithError(Recoil_nullthrows(_d.find(rp=>rp.state==="hasError"),"Invalid loadable passed to loadableAll").contents):loadableWithPromise(Promise.all(_d.map(rp=>rp.contents)))}function loadableAll(_d){const np=(Array.isArray(_d)?_d:Object.getOwnPropertyNames(_d).map(sp=>_d[sp])).map(sp=>isLoadable(sp)?sp:Recoil_isPromise(sp)?loadableWithPromise(sp):loadableWithValue(sp)),ap=loadableAllArray(np);return Array.isArray(_d)?ap:ap.map(sp=>Object.getOwnPropertyNames(_d).reduce((lp,up,cp)=>({...lp,[up]:sp[cp]}),{}))}function isLoadable(_d){return _d instanceof BaseLoadable}const LoadableStaticInterface={of:_d=>Recoil_isPromise(_d)?loadableWithPromise(_d):isLoadable(_d)?_d:loadableWithValue(_d),error:_d=>loadableWithError(_d),loading:()=>loadableLoading(),all:loadableAll,isLoadable};var Recoil_Loadable={loadableWithValue,loadableWithError,loadableWithPromise,loadableLoading,loadableAll,isLoadable,RecoilLoadable:LoadableStaticInterface},Recoil_Loadable_1=Recoil_Loadable.loadableWithValue,Recoil_Loadable_2=Recoil_Loadable.loadableWithError,Recoil_Loadable_3=Recoil_Loadable.loadableWithPromise,Recoil_Loadable_4=Recoil_Loadable.loadableLoading,Recoil_Loadable_5=Recoil_Loadable.loadableAll,Recoil_Loadable_6=Recoil_Loadable.isLoadable,Recoil_Loadable_7=Recoil_Loadable.RecoilLoadable,Recoil_Loadable$1=Object.freeze({__proto__:null,loadableWithValue:Recoil_Loadable_1,loadableWithError:Recoil_Loadable_2,loadableWithPromise:Recoil_Loadable_3,loadableLoading:Recoil_Loadable_4,loadableAll:Recoil_Loadable_5,isLoadable:Recoil_Loadable_6,RecoilLoadable:Recoil_Loadable_7});const env={RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED:!0,RECOIL_GKS_ENABLED:new Set(["recoil_hamt_2020","recoil_sync_external_store","recoil_suppress_rerender_in_callback","recoil_memory_managament_2020"])};function readProcessEnvBooleanFlag(_d,rp){var np,ap;const sp=(np=define_process_env_default$1[_d])===null||np===void 0||(ap=np.toLowerCase())===null||ap===void 0?void 0:ap.trim();if(sp==null||sp==="")return;if(!["true","false"].includes(sp))throw Recoil_err(`process.env.${_d} value must be 'true', 'false', or empty: ${sp}`);rp(sp==="true")}function readProcessEnvStringArrayFlag(_d,rp){var np;const ap=(np=define_process_env_default$1[_d])===null||np===void 0?void 0:np.trim();ap==null||ap===""||rp(ap.split(/\s*,\s*|\s+/))}function applyProcessEnvFlagOverrides(){var _d;typeof process>"u"||((_d=process)===null||_d===void 0?void 0:_d.env)!=null&&(readProcessEnvBooleanFlag("RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED",rp=>{env.RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED=rp}),readProcessEnvStringArrayFlag("RECOIL_GKS_ENABLED",rp=>{rp.forEach(np=>{env.RECOIL_GKS_ENABLED.add(np)})}))}applyProcessEnvFlagOverrides();var Recoil_RecoilEnv=env;function Recoil_gkx_OSS(_d){return Recoil_RecoilEnv.RECOIL_GKS_ENABLED.has(_d)}Recoil_gkx_OSS.setPass=_d=>{Recoil_RecoilEnv.RECOIL_GKS_ENABLED.add(_d)};Recoil_gkx_OSS.setFail=_d=>{Recoil_RecoilEnv.RECOIL_GKS_ENABLED.delete(_d)};Recoil_gkx_OSS.clear=()=>{Recoil_RecoilEnv.RECOIL_GKS_ENABLED.clear()};var Recoil_gkx=Recoil_gkx_OSS;function recoverableViolation(_d,rp,{error:np}={}){return null}var recoverableViolation_1=recoverableViolation,Recoil_recoverableViolation=recoverableViolation_1,_createMutableSource,_useMutableSource,_useSyncExternalStore;const createMutableSource=(_createMutableSource=React.createMutableSource)!==null&&_createMutableSource!==void 0?_createMutableSource:React.unstable_createMutableSource,useMutableSource=(_useMutableSource=React.useMutableSource)!==null&&_useMutableSource!==void 0?_useMutableSource:React.unstable_useMutableSource,useSyncExternalStore=(_useSyncExternalStore=React.useSyncExternalStore)!==null&&_useSyncExternalStore!==void 0?_useSyncExternalStore:React.unstable_useSyncExternalStore;function currentRendererSupportsUseSyncExternalStore(){var _d;const{ReactCurrentDispatcher:rp,ReactCurrentOwner:np}=React.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;return((_d=rp==null?void 0:rp.current)!==null&&_d!==void 0?_d:np.currentDispatcher).useSyncExternalStore!=null}function reactMode(){return Recoil_gkx("recoil_transition_support")?{mode:"TRANSITION_SUPPORT",early:!0,concurrent:!0}:Recoil_gkx("recoil_sync_external_store")&&useSyncExternalStore!=null?{mode:"SYNC_EXTERNAL_STORE",early:!0,concurrent:!1}:Recoil_gkx("recoil_mutable_source")&&useMutableSource!=null&&typeof window<"u"&&!window.$disableRecoilValueMutableSource_TEMP_HACK_DO_NOT_USE?Recoil_gkx("recoil_suppress_rerender_in_callback")?{mode:"MUTABLE_SOURCE",early:!0,concurrent:!0}:{mode:"MUTABLE_SOURCE",early:!1,concurrent:!1}:Recoil_gkx("recoil_suppress_rerender_in_callback")?{mode:"LEGACY",early:!0,concurrent:!1}:{mode:"LEGACY",early:!1,concurrent:!1}}function isFastRefreshEnabled(){return!1}var Recoil_ReactMode={createMutableSource,useMutableSource,useSyncExternalStore,currentRendererSupportsUseSyncExternalStore,reactMode,isFastRefreshEnabled};class AbstractRecoilValue{constructor(rp){_defineProperty$1(this,"key",void 0),this.key=rp}toJSON(){return{key:this.key}}}class RecoilState extends AbstractRecoilValue{}class RecoilValueReadOnly extends AbstractRecoilValue{}function isRecoilValue(_d){return _d instanceof RecoilState||_d instanceof RecoilValueReadOnly}var Recoil_RecoilValue={AbstractRecoilValue,RecoilState,RecoilValueReadOnly,isRecoilValue},Recoil_RecoilValue_1=Recoil_RecoilValue.AbstractRecoilValue,Recoil_RecoilValue_2=Recoil_RecoilValue.RecoilState,Recoil_RecoilValue_3=Recoil_RecoilValue.RecoilValueReadOnly,Recoil_RecoilValue_4=Recoil_RecoilValue.isRecoilValue,Recoil_RecoilValue$1=Object.freeze({__proto__:null,AbstractRecoilValue:Recoil_RecoilValue_1,RecoilState:Recoil_RecoilValue_2,RecoilValueReadOnly:Recoil_RecoilValue_3,isRecoilValue:Recoil_RecoilValue_4});function mapIterable(_d,rp){return function*(){let np=0;for(const ap of _d)yield rp(ap,np++)}()}var Recoil_mapIterable=mapIterable;class DefaultValue{}const DEFAULT_VALUE=new DefaultValue,nodes=new Map,recoilValues=new Map;function recoilValuesForKeys(_d){return Recoil_mapIterable(_d,rp=>Recoil_nullthrows(recoilValues.get(rp)))}function checkForDuplicateAtomKey(_d){if(nodes.has(_d)){const rp=`Duplicate atom key "${_d}". This is a FATAL ERROR in
      production. But it is safe to ignore this warning if it occurred because of
      hot module replacement.`;console.warn(rp)}}function registerNode(_d){Recoil_RecoilEnv.RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED&&checkForDuplicateAtomKey(_d.key),nodes.set(_d.key,_d);const rp=_d.set==null?new Recoil_RecoilValue$1.RecoilValueReadOnly(_d.key):new Recoil_RecoilValue$1.RecoilState(_d.key);return recoilValues.set(_d.key,rp),rp}class NodeMissingError extends Error{}function getNode(_d){const rp=nodes.get(_d);if(rp==null)throw new NodeMissingError(`Missing definition for RecoilValue: "${_d}""`);return rp}function getNodeMaybe(_d){return nodes.get(_d)}const configDeletionHandlers=new Map;function deleteNodeConfigIfPossible(_d){var rp;if(!Recoil_gkx("recoil_memory_managament_2020"))return;const np=nodes.get(_d);if(np!=null&&(rp=np.shouldDeleteConfigOnRelease)!==null&&rp!==void 0&&rp.call(np)){var ap;nodes.delete(_d),(ap=getConfigDeletionHandler(_d))===null||ap===void 0||ap(),configDeletionHandlers.delete(_d)}}function setConfigDeletionHandler(_d,rp){Recoil_gkx("recoil_memory_managament_2020")&&(rp===void 0?configDeletionHandlers.delete(_d):configDeletionHandlers.set(_d,rp))}function getConfigDeletionHandler(_d){return configDeletionHandlers.get(_d)}var Recoil_Node={nodes,recoilValues,registerNode,getNode,getNodeMaybe,deleteNodeConfigIfPossible,setConfigDeletionHandler,getConfigDeletionHandler,recoilValuesForKeys,NodeMissingError,DefaultValue,DEFAULT_VALUE};function enqueueExecution(_d,rp){rp()}var Recoil_Queue={enqueueExecution};function createCommonjsModule(_d,rp){return rp={exports:{}},_d(rp,rp.exports),rp.exports}var hamt_1=createCommonjsModule(function(_d){var rp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Kp){return typeof Kp}:function(Kp){return Kp&&typeof Symbol=="function"&&Kp.constructor===Symbol&&Kp!==Symbol.prototype?"symbol":typeof Kp},np={},ap=5,sp=Math.pow(2,ap),lp=sp-1,up=sp/2,cp=sp/4,dp={},fp=function(Hp){return function(){return Hp}},pp=np.hash=function(Kp){var Hp=typeof Kp>"u"?"undefined":rp(Kp);if(Hp==="number")return Kp;Hp!=="string"&&(Kp+="");for(var rm=0,um=0,cm=Kp.length;um<cm;++um){var dm=Kp.charCodeAt(um);rm=(rm<<5)-rm+dm|0}return rm},hp=function(Hp){return Hp-=Hp>>1&1431655765,Hp=(Hp&858993459)+(Hp>>2&858993459),Hp=Hp+(Hp>>4)&252645135,Hp+=Hp>>8,Hp+=Hp>>16,Hp&127},mp=function(Hp,rm){return rm>>>Hp&lp},gp=function(Hp){return 1<<Hp},vp=function(Hp,rm){return hp(Hp&rm-1)},xp=function(Hp,rm,um,cm){var dm=cm;if(!Hp){var vm=cm.length;dm=new Array(vm);for(var mm=0;mm<vm;++mm)dm[mm]=cm[mm]}return dm[rm]=um,dm},Sp=function(Hp,rm,um){var cm=um.length-1,dm=0,vm=0,mm=um;if(Hp)dm=vm=rm;else for(mm=new Array(cm);dm<rm;)mm[vm++]=um[dm++];for(++dm;dm<=cm;)mm[vm++]=um[dm++];return Hp&&(mm.length=cm),mm},yp=function(Hp,rm,um,cm){var dm=cm.length;if(Hp){for(var vm=dm;vm>=rm;)cm[vm--]=cm[vm];return cm[rm]=um,cm}for(var mm=0,gm=0,bm=new Array(dm+1);mm<rm;)bm[gm++]=cm[mm++];for(bm[rm]=um;mm<dm;)bm[++gm]=cm[mm++];return bm},bp=1,Ep=2,wp=3,_p=4,Rp={__hamt_isEmpty:!0},$p=function(Hp){return Hp===Rp||Hp&&Hp.__hamt_isEmpty},Cp=function(Hp,rm,um,cm){return{type:bp,edit:Hp,hash:rm,key:um,value:cm,_modify:Tp}},Ap=function(Hp,rm,um){return{type:Ep,edit:Hp,hash:rm,children:um,_modify:Np}},Op=function(Hp,rm,um){return{type:wp,edit:Hp,mask:rm,children:um,_modify:jp}},Lp=function(Hp,rm,um){return{type:_p,edit:Hp,size:rm,children:um,_modify:Vp}},Mp=function(Hp){return Hp===Rp||Hp.type===bp||Hp.type===Ep},kp=function(Hp,rm,um,cm,dm){for(var vm=[],mm=cm,gm=0,bm=0;mm;++bm)mm&1&&(vm[bm]=dm[gm++]),mm>>>=1;return vm[rm]=um,Lp(Hp,gm+1,vm)},Dp=function(Hp,rm,um,cm){for(var dm=new Array(rm-1),vm=0,mm=0,gm=0,bm=cm.length;gm<bm;++gm)if(gm!==um){var Im=cm[gm];Im&&!$p(Im)&&(dm[vm++]=Im,mm|=1<<gm)}return Op(Hp,mm,dm)},Fp=function Kp(Hp,rm,um,cm,dm,vm){if(um===dm)return Ap(Hp,um,[vm,cm]);var mm=mp(rm,um),gm=mp(rm,dm);return Op(Hp,gp(mm)|gp(gm),mm===gm?[Kp(Hp,rm+ap,um,cm,dm,vm)]:mm<gm?[cm,vm]:[vm,cm])},Ip=function(Hp,rm,um,cm,dm,vm,mm,gm){for(var bm=dm.length,Im=0;Im<bm;++Im){var Nm=dm[Im];if(um(mm,Nm.key)){var km=Nm.value,Om=vm(km);return Om===km?dm:Om===dp?(--gm.value,Sp(Hp,Im,dm)):xp(Hp,Im,Cp(rm,cm,mm,Om),dm)}}var Mm=vm();return Mm===dp?dm:(++gm.value,xp(Hp,bm,Cp(rm,cm,mm,Mm),dm))},Pp=function(Hp,rm){return Hp===rm.edit},Tp=function(Hp,rm,um,cm,dm,vm,mm){if(rm(vm,this.key)){var gm=cm(this.value);return gm===this.value?this:gm===dp?(--mm.value,Rp):Pp(Hp,this)?(this.value=gm,this):Cp(Hp,dm,vm,gm)}var bm=cm();return bm===dp?this:(++mm.value,Fp(Hp,um,this.hash,this,dm,Cp(Hp,dm,vm,bm)))},Np=function(Hp,rm,um,cm,dm,vm,mm){if(dm===this.hash){var gm=Pp(Hp,this),bm=Ip(gm,Hp,rm,this.hash,this.children,cm,vm,mm);return bm===this.children?this:bm.length>1?Ap(Hp,this.hash,bm):bm[0]}var Im=cm();return Im===dp?this:(++mm.value,Fp(Hp,um,this.hash,this,dm,Cp(Hp,dm,vm,Im)))},jp=function(Hp,rm,um,cm,dm,vm,mm){var gm=this.mask,bm=this.children,Im=mp(um,dm),Nm=gp(Im),km=vp(gm,Nm),Om=gm&Nm,Mm=Om?bm[km]:Rp,Fm=Mm._modify(Hp,rm,um+ap,cm,dm,vm,mm);if(Mm===Fm)return this;var Um=Pp(Hp,this),zm=gm,Bm=void 0;if(Om&&$p(Fm)){if(zm&=~Nm,!zm)return Rp;if(bm.length<=2&&Mp(bm[km^1]))return bm[km^1];Bm=Sp(Um,km,bm)}else if(!Om&&!$p(Fm)){if(bm.length>=up)return kp(Hp,Im,Fm,gm,bm);zm|=Nm,Bm=yp(Um,km,Fm,bm)}else Bm=xp(Um,km,Fm,bm);return Um?(this.mask=zm,this.children=Bm,this):Op(Hp,zm,Bm)},Vp=function(Hp,rm,um,cm,dm,vm,mm){var gm=this.size,bm=this.children,Im=mp(um,dm),Nm=bm[Im],km=(Nm||Rp)._modify(Hp,rm,um+ap,cm,dm,vm,mm);if(Nm===km)return this;var Om=Pp(Hp,this),Mm=void 0;if($p(Nm)&&!$p(km))++gm,Mm=xp(Om,Im,km,bm);else if(!$p(Nm)&&$p(km)){if(--gm,gm<=cp)return Dp(Hp,gm,Im,bm);Mm=xp(Om,Im,Rp,bm)}else Mm=xp(Om,Im,km,bm);return Om?(this.size=gm,this.children=Mm,this):Lp(Hp,gm,Mm)};Rp._modify=function(Kp,Hp,rm,um,cm,dm,vm){var mm=um();return mm===dp?Rp:(++vm.value,Cp(Kp,cm,dm,mm))};function zp(Kp,Hp,rm,um,cm){this._editable=Kp,this._edit=Hp,this._config=rm,this._root=um,this._size=cm}zp.prototype.setTree=function(Kp,Hp){return this._editable?(this._root=Kp,this._size=Hp,this):Kp===this._root?this:new zp(this._editable,this._edit,this._config,Kp,Hp)};var Wp=np.tryGetHash=function(Kp,Hp,rm,um){for(var cm=um._root,dm=0,vm=um._config.keyEq;;)switch(cm.type){case bp:return vm(rm,cm.key)?cm.value:Kp;case Ep:{if(Hp===cm.hash)for(var mm=cm.children,gm=0,bm=mm.length;gm<bm;++gm){var Im=mm[gm];if(vm(rm,Im.key))return Im.value}return Kp}case wp:{var Nm=mp(dm,Hp),km=gp(Nm);if(cm.mask&km){cm=cm.children[vp(cm.mask,km)],dm+=ap;break}return Kp}case _p:{if(cm=cm.children[mp(dm,Hp)],cm){dm+=ap;break}return Kp}default:return Kp}};zp.prototype.tryGetHash=function(Kp,Hp,rm){return Wp(Kp,Hp,rm,this)};var Up=np.tryGet=function(Kp,Hp,rm){return Wp(Kp,rm._config.hash(Hp),Hp,rm)};zp.prototype.tryGet=function(Kp,Hp){return Up(Kp,Hp,this)};var qp=np.getHash=function(Kp,Hp,rm){return Wp(void 0,Kp,Hp,rm)};zp.prototype.getHash=function(Kp,Hp){return qp(Kp,Hp,this)},np.get=function(Kp,Hp){return Wp(void 0,Hp._config.hash(Kp),Kp,Hp)},zp.prototype.get=function(Kp,Hp){return Up(Hp,Kp,this)};var Bp=np.has=function(Kp,Hp,rm){return Wp(dp,Kp,Hp,rm)!==dp};zp.prototype.hasHash=function(Kp,Hp){return Bp(Kp,Hp,this)};var Yp=np.has=function(Kp,Hp){return Bp(Hp._config.hash(Kp),Kp,Hp)};zp.prototype.has=function(Kp){return Yp(Kp,this)};var Xp=function(Hp,rm){return Hp===rm};np.make=function(Kp){return new zp(0,0,{keyEq:Kp&&Kp.keyEq||Xp,hash:Kp&&Kp.hash||pp},Rp,0)},np.empty=np.make();var Qp=np.isEmpty=function(Kp){return Kp&&!!$p(Kp._root)};zp.prototype.isEmpty=function(){return Qp(this)};var am=np.modifyHash=function(Kp,Hp,rm,um){var cm={value:um._size},dm=um._root._modify(um._editable?um._edit:NaN,um._config.keyEq,0,Kp,Hp,rm,cm);return um.setTree(dm,cm.value)};zp.prototype.modifyHash=function(Kp,Hp,rm){return am(rm,Kp,Hp,this)};var Jp=np.modify=function(Kp,Hp,rm){return am(Kp,rm._config.hash(Hp),Hp,rm)};zp.prototype.modify=function(Kp,Hp){return Jp(Hp,Kp,this)};var im=np.setHash=function(Kp,Hp,rm,um){return am(fp(rm),Kp,Hp,um)};zp.prototype.setHash=function(Kp,Hp,rm){return im(Kp,Hp,rm,this)};var Zp=np.set=function(Kp,Hp,rm){return im(rm._config.hash(Kp),Kp,Hp,rm)};zp.prototype.set=function(Kp,Hp){return Zp(Kp,Hp,this)};var Gp=fp(dp),tm=np.removeHash=function(Kp,Hp,rm){return am(Gp,Kp,Hp,rm)};zp.prototype.removeHash=zp.prototype.deleteHash=function(Kp,Hp){return tm(Kp,Hp,this)};var om=np.remove=function(Kp,Hp){return tm(Hp._config.hash(Kp),Kp,Hp)};zp.prototype.remove=zp.prototype.delete=function(Kp){return om(Kp,this)};var em=np.beginMutation=function(Kp){return new zp(Kp._editable+1,Kp._edit+1,Kp._config,Kp._root,Kp._size)};zp.prototype.beginMutation=function(){return em(this)};var _m=np.endMutation=function(Kp){return Kp._editable=Kp._editable&&Kp._editable-1,Kp};zp.prototype.endMutation=function(){return _m(this)};var Cm=np.mutate=function(Kp,Hp){var rm=em(Hp);return Kp(rm),_m(rm)};zp.prototype.mutate=function(Kp){return Cm(Kp,this)};var Rm=function(Hp){return Hp&&xm(Hp[0],Hp[1],Hp[2],Hp[3],Hp[4])},xm=function(Hp,rm,um,cm,dm){for(;um<Hp;){var vm=rm[um++];if(vm&&!$p(vm))return $m(vm,cm,[Hp,rm,um,cm,dm])}return Rm(dm)},$m=function(Hp,rm,um){switch(Hp.type){case bp:return{value:rm(Hp),rest:um};case Ep:case _p:case wp:var cm=Hp.children;return xm(cm.length,cm,0,rm,um);default:return Rm(um)}},fm={done:!0};function Sm(Kp){this.v=Kp}Sm.prototype.next=function(){if(!this.v)return fm;var Kp=this.v;return this.v=Rm(Kp.rest),Kp},Sm.prototype[Symbol.iterator]=function(){return this};var pm=function(Hp,rm){return new Sm($m(Hp._root,rm))},hm=function(Hp){return[Hp.key,Hp.value]},lm=np.entries=function(Kp){return pm(Kp,hm)};zp.prototype.entries=zp.prototype[Symbol.iterator]=function(){return lm(this)};var sm=function(Hp){return Hp.key},ym=np.keys=function(Kp){return pm(Kp,sm)};zp.prototype.keys=function(){return ym(this)};var Am=function(Hp){return Hp.value},Em=np.values=zp.prototype.values=function(Kp){return pm(Kp,Am)};zp.prototype.values=function(){return Em(this)};var wm=np.fold=function(Kp,Hp,rm){var um=rm._root;if(um.type===bp)return Kp(Hp,um.value,um.key);for(var cm=[um.children],dm=void 0;dm=cm.pop();)for(var vm=0,mm=dm.length;vm<mm;){var gm=dm[vm++];gm&&gm.type&&(gm.type===bp?Hp=Kp(Hp,gm.value,gm.key):cm.push(gm.children))}return Hp};zp.prototype.fold=function(Kp,Hp){return wm(Kp,Hp,this)};var Dm=np.forEach=function(Kp,Hp){return wm(function(rm,um,cm){return Kp(um,cm,Hp)},null,Hp)};zp.prototype.forEach=function(Kp){return Dm(Kp,this)};var Vm=np.count=function(Kp){return Kp._size};zp.prototype.count=function(){return Vm(this)},Object.defineProperty(zp.prototype,"size",{get:zp.prototype.count}),_d.exports?_d.exports=np:(void 0).hamt=np});class BuiltInMap{constructor(rp){_defineProperty$1(this,"_map",void 0),this._map=new Map(rp==null?void 0:rp.entries())}keys(){return this._map.keys()}entries(){return this._map.entries()}get(rp){return this._map.get(rp)}has(rp){return this._map.has(rp)}set(rp,np){return this._map.set(rp,np),this}delete(rp){return this._map.delete(rp),this}clone(){return persistentMap(this)}toMap(){return new Map(this._map)}}class HashArrayMappedTrieMap{constructor(rp){if(_defineProperty$1(this,"_hamt",hamt_1.empty.beginMutation()),rp instanceof HashArrayMappedTrieMap){const np=rp._hamt.endMutation();rp._hamt=np.beginMutation(),this._hamt=np.beginMutation()}else if(rp)for(const[np,ap]of rp.entries())this._hamt.set(np,ap)}keys(){return this._hamt.keys()}entries(){return this._hamt.entries()}get(rp){return this._hamt.get(rp)}has(rp){return this._hamt.has(rp)}set(rp,np){return this._hamt.set(rp,np),this}delete(rp){return this._hamt.delete(rp),this}clone(){return persistentMap(this)}toMap(){return new Map(this._hamt)}}function persistentMap(_d){return Recoil_gkx("recoil_hamt_2020")?new HashArrayMappedTrieMap(_d):new BuiltInMap(_d)}var Recoil_PersistentMap={persistentMap},Recoil_PersistentMap_1=Recoil_PersistentMap.persistentMap,Recoil_PersistentMap$1=Object.freeze({__proto__:null,persistentMap:Recoil_PersistentMap_1});function differenceSets(_d,...rp){const np=new Set;e:for(const ap of _d){for(const sp of rp)if(sp.has(ap))continue e;np.add(ap)}return np}var Recoil_differenceSets=differenceSets;function mapMap(_d,rp){const np=new Map;return _d.forEach((ap,sp)=>{np.set(sp,rp(ap,sp))}),np}var Recoil_mapMap=mapMap;function makeGraph(){return{nodeDeps:new Map,nodeToNodeSubscriptions:new Map}}function cloneGraph(_d){return{nodeDeps:Recoil_mapMap(_d.nodeDeps,rp=>new Set(rp)),nodeToNodeSubscriptions:Recoil_mapMap(_d.nodeToNodeSubscriptions,rp=>new Set(rp))}}function mergeDepsIntoGraph(_d,rp,np,ap){const{nodeDeps:sp,nodeToNodeSubscriptions:lp}=np,up=sp.get(_d);if(up&&ap&&up!==ap.nodeDeps.get(_d))return;sp.set(_d,rp);const cp=up==null?rp:Recoil_differenceSets(rp,up);for(const dp of cp)lp.has(dp)||lp.set(dp,new Set),Recoil_nullthrows(lp.get(dp)).add(_d);if(up){const dp=Recoil_differenceSets(up,rp);for(const fp of dp){if(!lp.has(fp))return;const pp=Recoil_nullthrows(lp.get(fp));pp.delete(_d),pp.size===0&&lp.delete(fp)}}}function saveDepsToStore(_d,rp,np,ap){var sp,lp,up,cp;const dp=np.getState();ap===dp.currentTree.version||ap===((sp=dp.nextTree)===null||sp===void 0?void 0:sp.version)||((lp=dp.previousTree)===null||lp===void 0||lp.version);const fp=np.getGraph(ap);if(mergeDepsIntoGraph(_d,rp,fp),ap===((up=dp.previousTree)===null||up===void 0?void 0:up.version)){const hp=np.getGraph(dp.currentTree.version);mergeDepsIntoGraph(_d,rp,hp,fp)}if(ap===((cp=dp.previousTree)===null||cp===void 0?void 0:cp.version)||ap===dp.currentTree.version){var pp;const hp=(pp=dp.nextTree)===null||pp===void 0?void 0:pp.version;if(hp!==void 0){const mp=np.getGraph(hp);mergeDepsIntoGraph(_d,rp,mp,fp)}}}var Recoil_Graph={cloneGraph,graph:makeGraph,saveDepsToStore};let nextTreeStateVersion=0;const getNextTreeStateVersion=()=>nextTreeStateVersion++;let nextStoreID=0;const getNextStoreID=()=>nextStoreID++;let nextComponentID=0;const getNextComponentID=()=>nextComponentID++;var Recoil_Keys={getNextTreeStateVersion,getNextStoreID,getNextComponentID};const{persistentMap:persistentMap$1}=Recoil_PersistentMap$1,{graph}=Recoil_Graph,{getNextTreeStateVersion:getNextTreeStateVersion$1}=Recoil_Keys;function makeEmptyTreeState(){const _d=getNextTreeStateVersion$1();return{version:_d,stateID:_d,transactionMetadata:{},dirtyAtoms:new Set,atomValues:persistentMap$1(),nonvalidatedAtoms:persistentMap$1()}}function makeEmptyStoreState(){const _d=makeEmptyTreeState();return{currentTree:_d,nextTree:null,previousTree:null,commitDepth:0,knownAtoms:new Set,knownSelectors:new Set,transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:new Map().set(_d.version,graph()),retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map}}var Recoil_State={makeEmptyTreeState,makeEmptyStoreState,getNextTreeStateVersion:getNextTreeStateVersion$1};class RetentionZone{}function retentionZone(){return new RetentionZone}var Recoil_RetentionZone={RetentionZone,retentionZone};function setByAddingToSet(_d,rp){const np=new Set(_d);return np.add(rp),np}function setByDeletingFromSet(_d,rp){const np=new Set(_d);return np.delete(rp),np}function mapBySettingInMap(_d,rp,np){const ap=new Map(_d);return ap.set(rp,np),ap}function mapByUpdatingInMap(_d,rp,np){const ap=new Map(_d);return ap.set(rp,np(ap.get(rp))),ap}function mapByDeletingFromMap(_d,rp){const np=new Map(_d);return np.delete(rp),np}function mapByDeletingMultipleFromMap(_d,rp){const np=new Map(_d);return rp.forEach(ap=>np.delete(ap)),np}var Recoil_CopyOnWrite={setByAddingToSet,setByDeletingFromSet,mapBySettingInMap,mapByUpdatingInMap,mapByDeletingFromMap,mapByDeletingMultipleFromMap};function*filterIterable(_d,rp){let np=0;for(const ap of _d)rp(ap,np++)&&(yield ap)}var Recoil_filterIterable=filterIterable;function lazyProxy(_d,rp){return new Proxy(_d,{get:(ap,sp)=>(!(sp in ap)&&sp in rp&&(ap[sp]=rp[sp]()),ap[sp]),ownKeys:ap=>Object.keys(ap)})}var Recoil_lazyProxy=lazyProxy;const{getNode:getNode$1,getNodeMaybe:getNodeMaybe$1,recoilValuesForKeys:recoilValuesForKeys$1}=Recoil_Node,{RetentionZone:RetentionZone$1}=Recoil_RetentionZone,{setByAddingToSet:setByAddingToSet$1}=Recoil_CopyOnWrite,emptySet=Object.freeze(new Set);class ReadOnlyRecoilValueError extends Error{}function initializeRetentionForNode(_d,rp,np){if(!Recoil_gkx("recoil_memory_managament_2020"))return()=>{};const{nodesRetainedByZone:ap}=_d.getState().retention;function sp(lp){let up=ap.get(lp);up||ap.set(lp,up=new Set),up.add(rp)}if(np instanceof RetentionZone$1)sp(np);else if(Array.isArray(np))for(const lp of np)sp(lp);return()=>{if(!Recoil_gkx("recoil_memory_managament_2020"))return;const{retention:lp}=_d.getState();function up(cp){const dp=lp.nodesRetainedByZone.get(cp);dp==null||dp.delete(rp),dp&&dp.size===0&&lp.nodesRetainedByZone.delete(cp)}if(np instanceof RetentionZone$1)up(np);else if(Array.isArray(np))for(const cp of np)up(cp)}}function initializeNodeIfNewToStore(_d,rp,np,ap){const sp=_d.getState();if(sp.nodeCleanupFunctions.has(np))return;const lp=getNode$1(np),up=initializeRetentionForNode(_d,np,lp.retainedBy),cp=lp.init(_d,rp,ap);sp.nodeCleanupFunctions.set(np,()=>{cp(),up()})}function initializeNode(_d,rp,np){initializeNodeIfNewToStore(_d,_d.getState().currentTree,rp,np)}function cleanUpNode(_d,rp){var np;const ap=_d.getState();(np=ap.nodeCleanupFunctions.get(rp))===null||np===void 0||np(),ap.nodeCleanupFunctions.delete(rp)}function getNodeLoadable(_d,rp,np){return initializeNodeIfNewToStore(_d,rp,np,"get"),getNode$1(np).get(_d,rp)}function peekNodeLoadable(_d,rp,np){return getNode$1(np).peek(_d,rp)}function setUnvalidatedAtomValue_DEPRECATED(_d,rp,np){var ap;const sp=getNodeMaybe$1(rp);return sp==null||(ap=sp.invalidate)===null||ap===void 0||ap.call(sp,_d),{..._d,atomValues:_d.atomValues.clone().delete(rp),nonvalidatedAtoms:_d.nonvalidatedAtoms.clone().set(rp,np),dirtyAtoms:setByAddingToSet$1(_d.dirtyAtoms,rp)}}function setNodeValue(_d,rp,np,ap){const sp=getNode$1(np);if(sp.set==null)throw new ReadOnlyRecoilValueError(`Attempt to set read-only RecoilValue: ${np}`);const lp=sp.set;return initializeNodeIfNewToStore(_d,rp,np,"set"),lp(_d,rp,ap)}function peekNodeInfo(_d,rp,np){const ap=_d.getState(),sp=_d.getGraph(rp.version),lp=getNode$1(np).nodeType;return Recoil_lazyProxy({type:lp},{loadable:()=>peekNodeLoadable(_d,rp,np),isActive:()=>ap.knownAtoms.has(np)||ap.knownSelectors.has(np),isSet:()=>lp==="selector"?!1:rp.atomValues.has(np),isModified:()=>rp.dirtyAtoms.has(np),deps:()=>{var up;return recoilValuesForKeys$1((up=sp.nodeDeps.get(np))!==null&&up!==void 0?up:[])},subscribers:()=>{var up,cp;return{nodes:recoilValuesForKeys$1(Recoil_filterIterable(getDownstreamNodes(_d,rp,new Set([np])),dp=>dp!==np)),components:Recoil_mapIterable((up=(cp=ap.nodeToComponentSubscriptions.get(np))===null||cp===void 0?void 0:cp.values())!==null&&up!==void 0?up:[],([dp])=>({name:dp}))}}})}function getDownstreamNodes(_d,rp,np){const ap=new Set,sp=Array.from(np),lp=_d.getGraph(rp.version);for(let cp=sp.pop();cp;cp=sp.pop()){var up;ap.add(cp);const dp=(up=lp.nodeToNodeSubscriptions.get(cp))!==null&&up!==void 0?up:emptySet;for(const fp of dp)ap.has(fp)||sp.push(fp)}return ap}var Recoil_FunctionalCore={getNodeLoadable,peekNodeLoadable,setNodeValue,initializeNode,cleanUpNode,setUnvalidatedAtomValue_DEPRECATED,peekNodeInfo,getDownstreamNodes};let _invalidateMemoizedSnapshot=null;function setInvalidateMemoizedSnapshot(_d){_invalidateMemoizedSnapshot=_d}function invalidateMemoizedSnapshot(){var _d;(_d=_invalidateMemoizedSnapshot)===null||_d===void 0||_d()}var Recoil_SnapshotCache={setInvalidateMemoizedSnapshot,invalidateMemoizedSnapshot};const{getDownstreamNodes:getDownstreamNodes$1,getNodeLoadable:getNodeLoadable$1,setNodeValue:setNodeValue$1}=Recoil_FunctionalCore,{getNextComponentID:getNextComponentID$1}=Recoil_Keys,{getNode:getNode$2,getNodeMaybe:getNodeMaybe$2}=Recoil_Node,{DefaultValue:DefaultValue$1}=Recoil_Node,{reactMode:reactMode$1}=Recoil_ReactMode,{AbstractRecoilValue:AbstractRecoilValue$1,RecoilState:RecoilState$1,RecoilValueReadOnly:RecoilValueReadOnly$1,isRecoilValue:isRecoilValue$1}=Recoil_RecoilValue$1,{invalidateMemoizedSnapshot:invalidateMemoizedSnapshot$1}=Recoil_SnapshotCache;function getRecoilValueAsLoadable(_d,{key:rp},np=_d.getState().currentTree){var ap,sp;const lp=_d.getState();np.version===lp.currentTree.version||np.version===((ap=lp.nextTree)===null||ap===void 0?void 0:ap.version)||(np.version,(sp=lp.previousTree)===null||sp===void 0||sp.version);const up=getNodeLoadable$1(_d,np,rp);return up.state==="loading"&&up.contents.catch(()=>{}),up}function applyAtomValueWrites(_d,rp){const np=_d.clone();return rp.forEach((ap,sp)=>{ap.state==="hasValue"&&ap.contents instanceof DefaultValue$1?np.delete(sp):np.set(sp,ap)}),np}function valueFromValueOrUpdater(_d,rp,{key:np},ap){if(typeof ap=="function"){const sp=getNodeLoadable$1(_d,rp,np);if(sp.state==="loading"){const lp=`Tried to set atom or selector "${np}" using an updater function while the current state is pending, this is not currently supported.`;throw Recoil_err(lp)}else if(sp.state==="hasError")throw sp.contents;return ap(sp.contents)}else return ap}function applyAction(_d,rp,np){if(np.type==="set"){const{recoilValue:sp,valueOrUpdater:lp}=np,up=valueFromValueOrUpdater(_d,rp,sp,lp),cp=setNodeValue$1(_d,rp,sp.key,up);for(const[dp,fp]of cp.entries())writeLoadableToTreeState(rp,dp,fp)}else if(np.type==="setLoadable"){const{recoilValue:{key:sp},loadable:lp}=np;writeLoadableToTreeState(rp,sp,lp)}else if(np.type==="markModified"){const{recoilValue:{key:sp}}=np;rp.dirtyAtoms.add(sp)}else if(np.type==="setUnvalidated"){var ap;const{recoilValue:{key:sp},unvalidatedValue:lp}=np,up=getNodeMaybe$2(sp);up==null||(ap=up.invalidate)===null||ap===void 0||ap.call(up,rp),rp.atomValues.delete(sp),rp.nonvalidatedAtoms.set(sp,lp),rp.dirtyAtoms.add(sp)}else Recoil_recoverableViolation(`Unknown action ${np.type}`)}function writeLoadableToTreeState(_d,rp,np){np.state==="hasValue"&&np.contents instanceof DefaultValue$1?_d.atomValues.delete(rp):_d.atomValues.set(rp,np),_d.dirtyAtoms.add(rp),_d.nonvalidatedAtoms.delete(rp)}function applyActionsToStore(_d,rp){_d.replaceState(np=>{const ap=copyTreeState(np);for(const sp of rp)applyAction(_d,ap,sp);return invalidateDownstreams(_d,ap),invalidateMemoizedSnapshot$1(),ap})}function queueOrPerformStateUpdate(_d,rp){if(batchStack.length){const np=batchStack[batchStack.length-1];let ap=np.get(_d);ap||np.set(_d,ap=[]),ap.push(rp)}else applyActionsToStore(_d,[rp])}const batchStack=[];function batchStart(){const _d=new Map;return batchStack.push(_d),()=>{for(const[rp,np]of _d)applyActionsToStore(rp,np);batchStack.pop()}}function copyTreeState(_d){return{..._d,atomValues:_d.atomValues.clone(),nonvalidatedAtoms:_d.nonvalidatedAtoms.clone(),dirtyAtoms:new Set(_d.dirtyAtoms)}}function invalidateDownstreams(_d,rp){const np=getDownstreamNodes$1(_d,rp,rp.dirtyAtoms);for(const lp of np){var ap,sp;(ap=getNodeMaybe$2(lp))===null||ap===void 0||(sp=ap.invalidate)===null||sp===void 0||sp.call(ap,rp)}}function setRecoilValue(_d,rp,np){queueOrPerformStateUpdate(_d,{type:"set",recoilValue:rp,valueOrUpdater:np})}function setRecoilValueLoadable(_d,rp,np){if(np instanceof DefaultValue$1)return setRecoilValue(_d,rp,np);queueOrPerformStateUpdate(_d,{type:"setLoadable",recoilValue:rp,loadable:np})}function markRecoilValueModified(_d,rp){queueOrPerformStateUpdate(_d,{type:"markModified",recoilValue:rp})}function setUnvalidatedRecoilValue(_d,rp,np){queueOrPerformStateUpdate(_d,{type:"setUnvalidated",recoilValue:rp,unvalidatedValue:np})}function subscribeToRecoilValue(_d,{key:rp},np,ap=null){const sp=getNextComponentID$1(),lp=_d.getState();lp.nodeToComponentSubscriptions.has(rp)||lp.nodeToComponentSubscriptions.set(rp,new Map),Recoil_nullthrows(lp.nodeToComponentSubscriptions.get(rp)).set(sp,[ap??"<not captured>",np]);const up=reactMode$1();if(up.early&&(up.mode==="LEGACY"||up.mode==="MUTABLE_SOURCE")){const cp=_d.getState().nextTree;cp&&cp.dirtyAtoms.has(rp)&&np(cp)}return{release:()=>{const cp=_d.getState(),dp=cp.nodeToComponentSubscriptions.get(rp);dp===void 0||!dp.has(sp)||(dp.delete(sp),dp.size===0&&cp.nodeToComponentSubscriptions.delete(rp))}}}function refreshRecoilValue(_d,rp){var np;const{currentTree:ap}=_d.getState(),sp=getNode$2(rp.key);(np=sp.clearCache)===null||np===void 0||np.call(sp,_d,ap)}var Recoil_RecoilValueInterface={RecoilValueReadOnly:RecoilValueReadOnly$1,AbstractRecoilValue:AbstractRecoilValue$1,RecoilState:RecoilState$1,getRecoilValueAsLoadable,setRecoilValue,setRecoilValueLoadable,markRecoilValueModified,setUnvalidatedRecoilValue,subscribeToRecoilValue,isRecoilValue:isRecoilValue$1,applyAtomValueWrites,batchStart,writeLoadableToTreeState,invalidateDownstreams,copyTreeState,refreshRecoilValue};function someSet(_d,rp,np){const ap=_d.entries();let sp=ap.next();for(;!sp.done;){const lp=sp.value;if(rp.call(np,lp[1],lp[0],_d))return!0;sp=ap.next()}return!1}var Recoil_someSet=someSet;const{cleanUpNode:cleanUpNode$1}=Recoil_FunctionalCore,{deleteNodeConfigIfPossible:deleteNodeConfigIfPossible$1,getNode:getNode$3}=Recoil_Node,{RetentionZone:RetentionZone$2}=Recoil_RetentionZone,SUSPENSE_TIMEOUT_MS=12e4,emptySet$1=new Set;function releaseRetainablesNowOnCurrentTree(_d,rp){const np=_d.getState(),ap=np.currentTree;if(np.nextTree)return;const sp=new Set;for(const up of rp)if(up instanceof RetentionZone$2)for(const cp of nodesRetainedByZone(np,up))sp.add(cp);else sp.add(up);const lp=findReleasableNodes(_d,sp);for(const up of lp)releaseNode(_d,ap,up)}function findReleasableNodes(_d,rp){const np=_d.getState(),ap=np.currentTree,sp=_d.getGraph(ap.version),lp=new Set,up=new Set;return cp(rp),lp;function cp(dp){const fp=new Set,pp=getDownstreamNodesInTopologicalOrder(_d,ap,dp,lp,up);for(const vp of pp){var hp;if(getNode$3(vp).retainedBy==="recoilRoot"){up.add(vp);continue}if(((hp=np.retention.referenceCounts.get(vp))!==null&&hp!==void 0?hp:0)>0){up.add(vp);continue}if(zonesThatCouldRetainNode(vp).some(Sp=>np.retention.referenceCounts.get(Sp))){up.add(vp);continue}const xp=sp.nodeToNodeSubscriptions.get(vp);if(xp&&Recoil_someSet(xp,Sp=>up.has(Sp))){up.add(vp);continue}lp.add(vp),fp.add(vp)}const mp=new Set;for(const vp of fp)for(const xp of(gp=sp.nodeDeps.get(vp))!==null&&gp!==void 0?gp:emptySet$1){var gp;lp.has(xp)||mp.add(xp)}mp.size&&cp(mp)}}function getDownstreamNodesInTopologicalOrder(_d,rp,np,ap,sp){const lp=_d.getGraph(rp.version),up=[],cp=new Set;for(;np.size>0;)dp(Recoil_nullthrows(np.values().next().value));return up;function dp(fp){if(ap.has(fp)||sp.has(fp)){np.delete(fp);return}if(cp.has(fp))return;const pp=lp.nodeToNodeSubscriptions.get(fp);if(pp)for(const hp of pp)dp(hp);cp.add(fp),np.delete(fp),up.push(fp)}}function releaseNode(_d,rp,np){if(!Recoil_gkx("recoil_memory_managament_2020"))return;cleanUpNode$1(_d,np);const ap=_d.getState();ap.knownAtoms.delete(np),ap.knownSelectors.delete(np),ap.nodeTransactionSubscriptions.delete(np),ap.retention.referenceCounts.delete(np);const sp=zonesThatCouldRetainNode(np);for(const dp of sp){var lp;(lp=ap.retention.nodesRetainedByZone.get(dp))===null||lp===void 0||lp.delete(np)}rp.atomValues.delete(np),rp.dirtyAtoms.delete(np),rp.nonvalidatedAtoms.delete(np);const up=ap.graphsByVersion.get(rp.version);if(up){const dp=up.nodeDeps.get(np);if(dp!==void 0){up.nodeDeps.delete(np);for(const fp of dp){var cp;(cp=up.nodeToNodeSubscriptions.get(fp))===null||cp===void 0||cp.delete(np)}}up.nodeToNodeSubscriptions.delete(np)}deleteNodeConfigIfPossible$1(np)}function nodesRetainedByZone(_d,rp){var np;return(np=_d.retention.nodesRetainedByZone.get(rp))!==null&&np!==void 0?np:emptySet$1}function zonesThatCouldRetainNode(_d){const rp=getNode$3(_d).retainedBy;return rp===void 0||rp==="components"||rp==="recoilRoot"?[]:rp instanceof RetentionZone$2?[rp]:rp}function scheduleOrPerformPossibleReleaseOfRetainable(_d,rp){const np=_d.getState();np.nextTree?np.retention.retainablesToCheckForRelease.add(rp):releaseRetainablesNowOnCurrentTree(_d,new Set([rp]))}function updateRetainCount(_d,rp,np){var ap;if(!Recoil_gkx("recoil_memory_managament_2020"))return;const sp=_d.getState().retention.referenceCounts,lp=((ap=sp.get(rp))!==null&&ap!==void 0?ap:0)+np;lp===0?updateRetainCountToZero(_d,rp):sp.set(rp,lp)}function updateRetainCountToZero(_d,rp){if(!Recoil_gkx("recoil_memory_managament_2020"))return;_d.getState().retention.referenceCounts.delete(rp),scheduleOrPerformPossibleReleaseOfRetainable(_d,rp)}function releaseScheduledRetainablesNow(_d){if(!Recoil_gkx("recoil_memory_managament_2020"))return;const rp=_d.getState();releaseRetainablesNowOnCurrentTree(_d,rp.retention.retainablesToCheckForRelease),rp.retention.retainablesToCheckForRelease.clear()}function retainedByOptionWithDefault(_d){return _d===void 0?"recoilRoot":_d}var Recoil_Retention={SUSPENSE_TIMEOUT_MS,updateRetainCount,updateRetainCountToZero,releaseScheduledRetainablesNow,retainedByOptionWithDefault};const{unstable_batchedUpdates}=ReactDOM;var ReactBatchedUpdates={unstable_batchedUpdates};const{unstable_batchedUpdates:unstable_batchedUpdates$1}=ReactBatchedUpdates;var Recoil_ReactBatchedUpdates={unstable_batchedUpdates:unstable_batchedUpdates$1};const{batchStart:batchStart$1}=Recoil_RecoilValueInterface,{unstable_batchedUpdates:unstable_batchedUpdates$2}=Recoil_ReactBatchedUpdates;let batcher=unstable_batchedUpdates$2||(_d=>_d());const setBatcher=_d=>{batcher=_d},getBatcher=()=>batcher,batchUpdates=_d=>{batcher(()=>{let rp=()=>{};try{rp=batchStart$1(),_d()}finally{rp()}})};var Recoil_Batching={getBatcher,setBatcher,batchUpdates};function*concatIterables(_d){for(const rp of _d)for(const np of rp)yield np}var Recoil_concatIterables=concatIterables;const isSSR=typeof Window>"u"||typeof window>"u",isWindow=_d=>!isSSR&&(_d===window||_d instanceof Window),isReactNative=typeof navigator<"u"&&navigator.product==="ReactNative";var Recoil_Environment={isSSR,isReactNative,isWindow};function memoizeWithArgsHash(_d,rp){let np;return(...ap)=>{np||(np={});const sp=rp(...ap);return Object.hasOwnProperty.call(np,sp)||(np[sp]=_d(...ap)),np[sp]}}function memoizeOneWithArgsHash(_d,rp){let np,ap;return(...sp)=>{const lp=rp(...sp);return np===lp||(np=lp,ap=_d(...sp)),ap}}function memoizeOneWithArgsHashAndInvalidation(_d,rp){let np,ap;return[(...up)=>{const cp=rp(...up);return np===cp||(np=cp,ap=_d(...up)),ap},()=>{np=null}]}var Recoil_Memoize={memoizeWithArgsHash,memoizeOneWithArgsHash,memoizeOneWithArgsHashAndInvalidation};const{batchUpdates:batchUpdates$1}=Recoil_Batching,{initializeNode:initializeNode$1,peekNodeInfo:peekNodeInfo$1}=Recoil_FunctionalCore,{graph:graph$1}=Recoil_Graph,{getNextStoreID:getNextStoreID$1}=Recoil_Keys,{DEFAULT_VALUE:DEFAULT_VALUE$1,recoilValues:recoilValues$1,recoilValuesForKeys:recoilValuesForKeys$2}=Recoil_Node,{AbstractRecoilValue:AbstractRecoilValue$2,getRecoilValueAsLoadable:getRecoilValueAsLoadable$1,setRecoilValue:setRecoilValue$1,setUnvalidatedRecoilValue:setUnvalidatedRecoilValue$1}=Recoil_RecoilValueInterface,{updateRetainCount:updateRetainCount$1}=Recoil_Retention,{setInvalidateMemoizedSnapshot:setInvalidateMemoizedSnapshot$1}=Recoil_SnapshotCache,{getNextTreeStateVersion:getNextTreeStateVersion$2,makeEmptyStoreState:makeEmptyStoreState$1}=Recoil_State,{isSSR:isSSR$1}=Recoil_Environment,{memoizeOneWithArgsHashAndInvalidation:memoizeOneWithArgsHashAndInvalidation$1}=Recoil_Memoize;class Snapshot{constructor(rp,np){_defineProperty$1(this,"_store",void 0),_defineProperty$1(this,"_refCount",1),_defineProperty$1(this,"getLoadable",ap=>(this.checkRefCount_INTERNAL(),getRecoilValueAsLoadable$1(this._store,ap))),_defineProperty$1(this,"getPromise",ap=>(this.checkRefCount_INTERNAL(),this.getLoadable(ap).toPromise())),_defineProperty$1(this,"getNodes_UNSTABLE",ap=>{if(this.checkRefCount_INTERNAL(),(ap==null?void 0:ap.isModified)===!0){if((ap==null?void 0:ap.isInitialized)===!1)return[];const up=this._store.getState().currentTree;return recoilValuesForKeys$2(up.dirtyAtoms)}const sp=this._store.getState().knownAtoms,lp=this._store.getState().knownSelectors;return(ap==null?void 0:ap.isInitialized)==null?recoilValues$1.values():ap.isInitialized===!0?recoilValuesForKeys$2(Recoil_concatIterables([sp,lp])):Recoil_filterIterable(recoilValues$1.values(),({key:up})=>!sp.has(up)&&!lp.has(up))}),_defineProperty$1(this,"getInfo_UNSTABLE",({key:ap})=>(this.checkRefCount_INTERNAL(),peekNodeInfo$1(this._store,this._store.getState().currentTree,ap))),_defineProperty$1(this,"map",ap=>{this.checkRefCount_INTERNAL();const sp=new MutableSnapshot(this,batchUpdates$1);return ap(sp),sp}),_defineProperty$1(this,"asyncMap",async ap=>{this.checkRefCount_INTERNAL();const sp=new MutableSnapshot(this,batchUpdates$1);return sp.retain(),await ap(sp),sp.autoRelease_INTERNAL(),sp}),this._store={storeID:getNextStoreID$1(),parentStoreID:np,getState:()=>rp,replaceState:ap=>{rp.currentTree=ap(rp.currentTree)},getGraph:ap=>{const sp=rp.graphsByVersion;if(sp.has(ap))return Recoil_nullthrows(sp.get(ap));const lp=graph$1();return sp.set(ap,lp),lp},subscribeToTransactions:()=>({release:()=>{}}),addTransactionMetadata:()=>{throw Recoil_err("Cannot subscribe to Snapshots")}};for(const ap of this._store.getState().knownAtoms)initializeNode$1(this._store,ap,"get"),updateRetainCount$1(this._store,ap,1);this.autoRelease_INTERNAL()}retain(){this._refCount<=0,this._refCount++;let rp=!1;return()=>{rp||(rp=!0,this._release())}}autoRelease_INTERNAL(){isSSR$1||window.setTimeout(()=>this._release(),10)}_release(){if(this._refCount--,this._refCount===0){if(this._store.getState().nodeCleanupFunctions.forEach(rp=>rp()),this._store.getState().nodeCleanupFunctions.clear(),!Recoil_gkx("recoil_memory_managament_2020"))return}else this._refCount<0}isRetained(){return this._refCount>0}checkRefCount_INTERNAL(){Recoil_gkx("recoil_memory_managament_2020")&&this._refCount<=0}getStore_INTERNAL(){return this.checkRefCount_INTERNAL(),this._store}getID(){return this.checkRefCount_INTERNAL(),this._store.getState().currentTree.stateID}getStoreID(){return this.checkRefCount_INTERNAL(),this._store.storeID}}function cloneStoreState(_d,rp,np=!1){const ap=_d.getState(),sp=np?getNextTreeStateVersion$2():rp.version;return{currentTree:{version:np?sp:rp.version,stateID:np?sp:rp.stateID,transactionMetadata:{...rp.transactionMetadata},dirtyAtoms:new Set(rp.dirtyAtoms),atomValues:rp.atomValues.clone(),nonvalidatedAtoms:rp.nonvalidatedAtoms.clone()},commitDepth:0,nextTree:null,previousTree:null,knownAtoms:new Set(ap.knownAtoms),knownSelectors:new Set(ap.knownSelectors),transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:new Map().set(sp,_d.getGraph(rp.version)),retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map(Recoil_mapIterable(ap.nodeCleanupFunctions.entries(),([lp])=>[lp,()=>{}]))}}function freshSnapshot(_d){const rp=new Snapshot(makeEmptyStoreState$1());return _d!=null?rp.map(_d):rp}const[memoizedCloneSnapshot,invalidateMemoizedSnapshot$2]=memoizeOneWithArgsHashAndInvalidation$1((_d,rp)=>{var np;const ap=_d.getState(),sp=rp==="latest"?(np=ap.nextTree)!==null&&np!==void 0?np:ap.currentTree:Recoil_nullthrows(ap.previousTree);return new Snapshot(cloneStoreState(_d,sp),_d.storeID)},(_d,rp)=>{var np,ap;return String(rp)+String(_d.storeID)+String((np=_d.getState().nextTree)===null||np===void 0?void 0:np.version)+String(_d.getState().currentTree.version)+String((ap=_d.getState().previousTree)===null||ap===void 0?void 0:ap.version)});setInvalidateMemoizedSnapshot$1(invalidateMemoizedSnapshot$2);function cloneSnapshot(_d,rp="latest"){const np=memoizedCloneSnapshot(_d,rp);return np.isRetained()?np:(invalidateMemoizedSnapshot$2(),memoizedCloneSnapshot(_d,rp))}class MutableSnapshot extends Snapshot{constructor(rp,np){super(cloneStoreState(rp.getStore_INTERNAL(),rp.getStore_INTERNAL().getState().currentTree,!0),rp.getStoreID()),_defineProperty$1(this,"_batch",void 0),_defineProperty$1(this,"set",(ap,sp)=>{this.checkRefCount_INTERNAL();const lp=this.getStore_INTERNAL();this._batch(()=>{updateRetainCount$1(lp,ap.key,1),setRecoilValue$1(this.getStore_INTERNAL(),ap,sp)})}),_defineProperty$1(this,"reset",ap=>{this.checkRefCount_INTERNAL();const sp=this.getStore_INTERNAL();this._batch(()=>{updateRetainCount$1(sp,ap.key,1),setRecoilValue$1(this.getStore_INTERNAL(),ap,DEFAULT_VALUE$1)})}),_defineProperty$1(this,"setUnvalidatedAtomValues_DEPRECATED",ap=>{this.checkRefCount_INTERNAL();const sp=this.getStore_INTERNAL();batchUpdates$1(()=>{for(const[lp,up]of ap.entries())updateRetainCount$1(sp,lp,1),setUnvalidatedRecoilValue$1(sp,new AbstractRecoilValue$2(lp),up)})}),this._batch=np}}var Recoil_Snapshot={Snapshot,MutableSnapshot,freshSnapshot,cloneSnapshot},Recoil_Snapshot_1=Recoil_Snapshot.Snapshot,Recoil_Snapshot_2=Recoil_Snapshot.MutableSnapshot,Recoil_Snapshot_3=Recoil_Snapshot.freshSnapshot,Recoil_Snapshot_4=Recoil_Snapshot.cloneSnapshot,Recoil_Snapshot$1=Object.freeze({__proto__:null,Snapshot:Recoil_Snapshot_1,MutableSnapshot:Recoil_Snapshot_2,freshSnapshot:Recoil_Snapshot_3,cloneSnapshot:Recoil_Snapshot_4});function unionSets(..._d){const rp=new Set;for(const np of _d)for(const ap of np)rp.add(ap);return rp}var Recoil_unionSets=unionSets;const{useRef}=React;function useRefInitOnce(_d){const rp=useRef(_d);return rp.current===_d&&typeof _d=="function"&&(rp.current=_d()),rp}var Recoil_useRefInitOnce=useRefInitOnce;const{getNextTreeStateVersion:getNextTreeStateVersion$3,makeEmptyStoreState:makeEmptyStoreState$2}=Recoil_State,{cleanUpNode:cleanUpNode$2,getDownstreamNodes:getDownstreamNodes$2,initializeNode:initializeNode$2,setNodeValue:setNodeValue$2,setUnvalidatedAtomValue_DEPRECATED:setUnvalidatedAtomValue_DEPRECATED$1}=Recoil_FunctionalCore,{graph:graph$2}=Recoil_Graph,{cloneGraph:cloneGraph$1}=Recoil_Graph,{getNextStoreID:getNextStoreID$2}=Recoil_Keys,{createMutableSource:createMutableSource$1,reactMode:reactMode$2}=Recoil_ReactMode,{applyAtomValueWrites:applyAtomValueWrites$1}=Recoil_RecoilValueInterface,{releaseScheduledRetainablesNow:releaseScheduledRetainablesNow$1}=Recoil_Retention,{freshSnapshot:freshSnapshot$1}=Recoil_Snapshot$1,{useCallback,useContext,useEffect,useMemo,useRef:useRef$1,useState}=React;function notInAContext(){throw Recoil_err("This component must be used inside a <RecoilRoot> component.")}const defaultStore=Object.freeze({storeID:getNextStoreID$2(),getState:notInAContext,replaceState:notInAContext,getGraph:notInAContext,subscribeToTransactions:notInAContext,addTransactionMetadata:notInAContext});let stateReplacerIsBeingExecuted=!1;function startNextTreeIfNeeded(_d){if(stateReplacerIsBeingExecuted)throw Recoil_err("An atom update was triggered within the execution of a state updater function. State updater functions provided to Recoil must be pure functions.");const rp=_d.getState();if(rp.nextTree===null){Recoil_gkx("recoil_memory_managament_2020")&&Recoil_gkx("recoil_release_on_cascading_update_killswitch_2021")&&rp.commitDepth>0&&releaseScheduledRetainablesNow$1(_d);const np=rp.currentTree.version,ap=getNextTreeStateVersion$3();rp.nextTree={...rp.currentTree,version:ap,stateID:ap,dirtyAtoms:new Set,transactionMetadata:{}},rp.graphsByVersion.set(ap,cloneGraph$1(Recoil_nullthrows(rp.graphsByVersion.get(np))))}}const AppContext=React.createContext({current:defaultStore}),useStoreRef=()=>useContext(AppContext),MutableSourceContext=React.createContext(null);function useRecoilMutableSource(){return useContext(MutableSourceContext)}function notifyComponents(_d,rp,np){const ap=getDownstreamNodes$2(_d,np,np.dirtyAtoms);for(const sp of ap){const lp=rp.nodeToComponentSubscriptions.get(sp);if(lp)for(const[up,[cp,dp]]of lp)dp(np)}}function sendEndOfBatchNotifications(_d){const rp=_d.getState(),np=rp.currentTree,ap=np.dirtyAtoms;if(ap.size){for(const[sp,lp]of rp.nodeTransactionSubscriptions)if(ap.has(sp))for(const[up,cp]of lp)cp(_d);for(const[sp,lp]of rp.transactionSubscriptions)lp(_d);(!reactMode$2().early||rp.suspendedComponentResolvers.size>0)&&(notifyComponents(_d,rp,np),rp.suspendedComponentResolvers.forEach(sp=>sp()),rp.suspendedComponentResolvers.clear())}rp.queuedComponentCallbacks_DEPRECATED.forEach(sp=>sp(np)),rp.queuedComponentCallbacks_DEPRECATED.splice(0,rp.queuedComponentCallbacks_DEPRECATED.length)}function endBatch(_d){const rp=_d.getState();rp.commitDepth++;try{const{nextTree:np}=rp;if(np==null)return;rp.previousTree=rp.currentTree,rp.currentTree=np,rp.nextTree=null,sendEndOfBatchNotifications(_d),rp.previousTree!=null?rp.graphsByVersion.delete(rp.previousTree.version):Recoil_recoverableViolation("Ended batch with no previous state, which is unexpected","recoil"),rp.previousTree=null,Recoil_gkx("recoil_memory_managament_2020")&&np==null&&releaseScheduledRetainablesNow$1(_d)}finally{rp.commitDepth--}}function Batcher({setNotifyBatcherOfChange:_d}){const rp=useStoreRef(),[,np]=useState([]);return _d(()=>np({})),useEffect(()=>(_d(()=>np({})),()=>{_d(()=>{})}),[_d]),useEffect(()=>{Recoil_Queue.enqueueExecution("Batcher",()=>{endBatch(rp.current)})}),null}function initialStoreState_DEPRECATED(_d,rp){const np=makeEmptyStoreState$2();return rp({set:(ap,sp)=>{const lp=np.currentTree,up=setNodeValue$2(_d,lp,ap.key,sp),cp=new Set(up.keys()),dp=lp.nonvalidatedAtoms.clone();for(const fp of cp)dp.delete(fp);np.currentTree={...lp,dirtyAtoms:Recoil_unionSets(lp.dirtyAtoms,cp),atomValues:applyAtomValueWrites$1(lp.atomValues,up),nonvalidatedAtoms:dp}},setUnvalidatedAtomValues:ap=>{ap.forEach((sp,lp)=>{np.currentTree=setUnvalidatedAtomValue_DEPRECATED$1(np.currentTree,lp,sp)})}}),np}function initialStoreState(_d){const rp=freshSnapshot$1(_d),np=rp.getStore_INTERNAL().getState();return rp.retain(),np.nodeCleanupFunctions.forEach(ap=>ap()),np.nodeCleanupFunctions.clear(),np}let nextID=0;function RecoilRoot_INTERNAL({initializeState_DEPRECATED:_d,initializeState:rp,store_INTERNAL:np,children:ap}){let sp;const lp=gp=>{const vp=sp.current.graphsByVersion;if(vp.has(gp))return Recoil_nullthrows(vp.get(gp));const xp=graph$2();return vp.set(gp,xp),xp},up=(gp,vp)=>{if(vp==null){const{transactionSubscriptions:xp}=hp.current.getState(),Sp=nextID++;return xp.set(Sp,gp),{release:()=>{xp.delete(Sp)}}}else{const{nodeTransactionSubscriptions:xp}=hp.current.getState();xp.has(vp)||xp.set(vp,new Map);const Sp=nextID++;return Recoil_nullthrows(xp.get(vp)).set(Sp,gp),{release:()=>{const yp=xp.get(vp);yp&&(yp.delete(Sp),yp.size===0&&xp.delete(vp))}}}},cp=gp=>{startNextTreeIfNeeded(hp.current);for(const vp of Object.keys(gp))Recoil_nullthrows(hp.current.getState().nextTree).transactionMetadata[vp]=gp[vp]},dp=gp=>{startNextTreeIfNeeded(hp.current);const vp=Recoil_nullthrows(sp.current.nextTree);let xp;try{stateReplacerIsBeingExecuted=!0,xp=gp(vp)}finally{stateReplacerIsBeingExecuted=!1}xp!==vp&&(sp.current.nextTree=xp,reactMode$2().early&&notifyComponents(hp.current,sp.current,xp),Recoil_nullthrows(fp.current)())},fp=useRef$1(null),pp=useCallback(gp=>{fp.current=gp},[fp]),hp=Recoil_useRefInitOnce(()=>np??{storeID:getNextStoreID$2(),getState:()=>sp.current,replaceState:dp,getGraph:lp,subscribeToTransactions:up,addTransactionMetadata:cp});np!=null&&(hp.current=np),sp=Recoil_useRefInitOnce(()=>_d!=null?initialStoreState_DEPRECATED(hp.current,_d):rp!=null?initialStoreState(rp):makeEmptyStoreState$2());const mp=useMemo(()=>createMutableSource$1==null?void 0:createMutableSource$1(sp,()=>sp.current.currentTree.version),[sp]);return useEffect(()=>{const gp=hp.current;for(const vp of new Set(gp.getState().knownAtoms))initializeNode$2(gp,vp,"get");return()=>{for(const vp of gp.getState().knownAtoms)cleanUpNode$2(gp,vp)}},[hp]),React.createElement(AppContext.Provider,{value:hp},React.createElement(MutableSourceContext.Provider,{value:mp},React.createElement(Batcher,{setNotifyBatcherOfChange:pp}),ap))}function RecoilRoot(_d){const{override:rp,...np}=_d,ap=useStoreRef();return rp===!1&&ap.current!==defaultStore?_d.children:React.createElement(RecoilRoot_INTERNAL,np)}function useRecoilStoreID(){return useStoreRef().current.storeID}var Recoil_RecoilRoot={RecoilRoot,useStoreRef,useRecoilMutableSource,useRecoilStoreID,notifyComponents_FOR_TESTING:notifyComponents,sendEndOfBatchNotifications_FOR_TESTING:sendEndOfBatchNotifications};function shallowArrayEqual(_d,rp){if(_d===rp)return!0;if(_d.length!==rp.length)return!1;for(let np=0,ap=_d.length;np<ap;np++)if(_d[np]!==rp[np])return!1;return!0}var Recoil_shallowArrayEqual=shallowArrayEqual;const{useEffect:useEffect$1,useRef:useRef$2}=React;function usePrevious(_d){const rp=useRef$2();return useEffect$1(()=>{rp.current=_d}),rp.current}var Recoil_usePrevious=usePrevious;const{useStoreRef:useStoreRef$1}=Recoil_RecoilRoot,{SUSPENSE_TIMEOUT_MS:SUSPENSE_TIMEOUT_MS$1}=Recoil_Retention,{updateRetainCount:updateRetainCount$2}=Recoil_Retention,{RetentionZone:RetentionZone$3}=Recoil_RetentionZone,{useEffect:useEffect$2,useRef:useRef$3}=React,{isSSR:isSSR$2}=Recoil_Environment;function useRetain(_d){if(Recoil_gkx("recoil_memory_managament_2020"))return useRetain_ACTUAL(_d)}function useRetain_ACTUAL(_d){const np=(Array.isArray(_d)?_d:[_d]).map(up=>up instanceof RetentionZone$3?up:up.key),ap=useStoreRef$1();useEffect$2(()=>{if(!Recoil_gkx("recoil_memory_managament_2020"))return;const up=ap.current;if(sp.current&&!isSSR$2)window.clearTimeout(sp.current),sp.current=null;else for(const cp of np)updateRetainCount$2(up,cp,1);return()=>{for(const cp of np)updateRetainCount$2(up,cp,-1)}},[ap,...np]);const sp=useRef$3(),lp=Recoil_usePrevious(np);if(!isSSR$2&&(lp===void 0||!Recoil_shallowArrayEqual(lp,np))){const up=ap.current;for(const cp of np)updateRetainCount$2(up,cp,1);if(lp)for(const cp of lp)updateRetainCount$2(up,cp,-1);sp.current&&window.clearTimeout(sp.current),sp.current=window.setTimeout(()=>{sp.current=null;for(const cp of np)updateRetainCount$2(up,cp,-1)},SUSPENSE_TIMEOUT_MS$1)}}var Recoil_useRetain=useRetain;function useComponentName(){return"<component name not available>"}var Recoil_useComponentName=useComponentName;const{batchUpdates:batchUpdates$2}=Recoil_Batching,{DEFAULT_VALUE:DEFAULT_VALUE$2}=Recoil_Node,{currentRendererSupportsUseSyncExternalStore:currentRendererSupportsUseSyncExternalStore$1,reactMode:reactMode$3,useMutableSource:useMutableSource$1,useSyncExternalStore:useSyncExternalStore$1}=Recoil_ReactMode,{useRecoilMutableSource:useRecoilMutableSource$1,useStoreRef:useStoreRef$2}=Recoil_RecoilRoot,{AbstractRecoilValue:AbstractRecoilValue$3,getRecoilValueAsLoadable:getRecoilValueAsLoadable$2,setRecoilValue:setRecoilValue$2,setUnvalidatedRecoilValue:setUnvalidatedRecoilValue$2,subscribeToRecoilValue:subscribeToRecoilValue$1}=Recoil_RecoilValueInterface,{useCallback:useCallback$1,useEffect:useEffect$3,useMemo:useMemo$1,useRef:useRef$4,useState:useState$1}=React,{setByAddingToSet:setByAddingToSet$2}=Recoil_CopyOnWrite,{isSSR:isSSR$3}=Recoil_Environment;function handleLoadable(_d,rp,np){if(_d.state==="hasValue")return _d.contents;throw _d.state==="loading"?new Promise(sp=>{const lp=np.current.getState().suspendedComponentResolvers;lp.add(sp),isSSR$3&&Recoil_isPromise(_d.contents)&&_d.contents.finally(()=>{lp.delete(sp)})}):_d.state==="hasError"?_d.contents:Recoil_err(`Invalid value of loadable atom "${rp.key}"`)}function useRecoilInterface_DEPRECATED(){const _d=Recoil_useComponentName(),rp=useStoreRef$2(),[,np]=useState$1([]),ap=useRef$4(new Set);ap.current=new Set;const sp=useRef$4(new Set),lp=useRef$4(new Map),up=useCallback$1(dp=>{const fp=lp.current.get(dp);fp&&(fp.release(),lp.current.delete(dp))},[lp]),cp=useCallback$1((dp,fp)=>{lp.current.has(fp)&&np([])},[]);return useEffect$3(()=>{const dp=rp.current;Recoil_differenceSets(ap.current,sp.current).forEach(fp=>{if(lp.current.has(fp))return;const pp=subscribeToRecoilValue$1(dp,new AbstractRecoilValue$3(fp),mp=>cp(mp,fp),_d);lp.current.set(fp,pp),dp.getState().nextTree?dp.getState().queuedComponentCallbacks_DEPRECATED.push(()=>{cp(dp.getState(),fp)}):cp(dp.getState(),fp)}),Recoil_differenceSets(sp.current,ap.current).forEach(fp=>{up(fp)}),sp.current=ap.current}),useEffect$3(()=>{const dp=lp.current;return Recoil_differenceSets(ap.current,new Set(dp.keys())).forEach(fp=>{const pp=subscribeToRecoilValue$1(rp.current,new AbstractRecoilValue$3(fp),hp=>cp(hp,fp),_d);dp.set(fp,pp)}),()=>dp.forEach((fp,pp)=>up(pp))},[_d,rp,up,cp]),useMemo$1(()=>{function dp(vp){return xp=>{setRecoilValue$2(rp.current,vp,xp)}}function fp(vp){return()=>setRecoilValue$2(rp.current,vp,DEFAULT_VALUE$2)}function pp(vp){var xp;ap.current.has(vp.key)||(ap.current=setByAddingToSet$2(ap.current,vp.key));const Sp=rp.current.getState();return getRecoilValueAsLoadable$2(rp.current,vp,reactMode$3().early&&(xp=Sp.nextTree)!==null&&xp!==void 0?xp:Sp.currentTree)}function hp(vp){const xp=pp(vp);return handleLoadable(xp,vp,rp)}function mp(vp){return[hp(vp),dp(vp)]}function gp(vp){return[pp(vp),dp(vp)]}return{getRecoilValue:hp,getRecoilValueLoadable:pp,getRecoilState:mp,getRecoilStateLoadable:gp,getSetRecoilState:dp,getResetRecoilState:fp}},[ap,rp])}const recoilComponentGetRecoilValueCount_FOR_TESTING={current:0};function useRecoilValueLoadable_SYNC_EXTERNAL_STORE(_d){const rp=useStoreRef$2(),np=Recoil_useComponentName(),ap=useCallback$1(()=>{var cp;const dp=rp.current,fp=dp.getState(),pp=reactMode$3().early&&(cp=fp.nextTree)!==null&&cp!==void 0?cp:fp.currentTree;return{loadable:getRecoilValueAsLoadable$2(dp,_d,pp),key:_d.key}},[rp,_d]),sp=useCallback$1(cp=>{let dp;return()=>{var fp,pp;const hp=cp();return(fp=dp)!==null&&fp!==void 0&&fp.loadable.is(hp.loadable)&&((pp=dp)===null||pp===void 0?void 0:pp.key)===hp.key?dp:(dp=hp,hp)}},[]),lp=useMemo$1(()=>sp(ap),[ap,sp]),up=useCallback$1(cp=>{const dp=rp.current;return subscribeToRecoilValue$1(dp,_d,cp,np).release},[rp,_d,np]);return useSyncExternalStore$1(up,lp,lp).loadable}function useRecoilValueLoadable_MUTABLE_SOURCE(_d){const rp=useStoreRef$2(),np=useCallback$1(()=>{var fp;const pp=rp.current,hp=pp.getState(),mp=reactMode$3().early&&(fp=hp.nextTree)!==null&&fp!==void 0?fp:hp.currentTree;return getRecoilValueAsLoadable$2(pp,_d,mp)},[rp,_d]),ap=useCallback$1(()=>np(),[np]),sp=Recoil_useComponentName(),lp=useCallback$1((fp,pp)=>{const hp=rp.current;return subscribeToRecoilValue$1(hp,_d,()=>{if(!Recoil_gkx("recoil_suppress_rerender_in_callback"))return pp();const gp=np();dp.current.is(gp)||pp(),dp.current=gp},sp).release},[rp,_d,sp,np]),up=useRecoilMutableSource$1();if(up==null)throw Recoil_err("Recoil hooks must be used in components contained within a <RecoilRoot> component.");const cp=useMutableSource$1(up,ap,lp),dp=useRef$4(cp);return useEffect$3(()=>{dp.current=cp}),cp}function useRecoilValueLoadable_TRANSITION_SUPPORT(_d){const rp=useStoreRef$2(),np=Recoil_useComponentName(),ap=useCallback$1(()=>{var dp;const fp=rp.current,pp=fp.getState(),hp=reactMode$3().early&&(dp=pp.nextTree)!==null&&dp!==void 0?dp:pp.currentTree;return getRecoilValueAsLoadable$2(fp,_d,hp)},[rp,_d]),sp=useCallback$1(()=>({loadable:ap(),key:_d.key}),[ap,_d.key]),lp=useCallback$1(dp=>{const fp=sp();return dp.loadable.is(fp.loadable)&&dp.key===fp.key?dp:fp},[sp]);useEffect$3(()=>{const dp=subscribeToRecoilValue$1(rp.current,_d,fp=>{cp(lp)},np);return cp(lp),dp.release},[np,_d,rp,lp]);const[up,cp]=useState$1(sp);return up.key!==_d.key?sp().loadable:up.loadable}function useRecoilValueLoadable_LEGACY(_d){const rp=useStoreRef$2(),[,np]=useState$1([]),ap=Recoil_useComponentName(),sp=useCallback$1(()=>{var cp;const dp=rp.current,fp=dp.getState(),pp=reactMode$3().early&&(cp=fp.nextTree)!==null&&cp!==void 0?cp:fp.currentTree;return getRecoilValueAsLoadable$2(dp,_d,pp)},[rp,_d]),lp=sp(),up=useRef$4(lp);return useEffect$3(()=>{up.current=lp}),useEffect$3(()=>{const cp=rp.current,dp=cp.getState(),fp=subscribeToRecoilValue$1(cp,_d,hp=>{var mp;if(!Recoil_gkx("recoil_suppress_rerender_in_callback"))return np([]);const gp=sp();(mp=up.current)!==null&&mp!==void 0&&mp.is(gp)||np(gp),up.current=gp},ap);if(dp.nextTree)cp.getState().queuedComponentCallbacks_DEPRECATED.push(()=>{up.current=null,np([])});else{var pp;if(!Recoil_gkx("recoil_suppress_rerender_in_callback"))return np([]);const hp=sp();(pp=up.current)!==null&&pp!==void 0&&pp.is(hp)||np(hp),up.current=hp}return fp.release},[ap,sp,_d,rp]),lp}function useRecoilValueLoadable(_d){return Recoil_gkx("recoil_memory_managament_2020")&&Recoil_useRetain(_d),{TRANSITION_SUPPORT:useRecoilValueLoadable_TRANSITION_SUPPORT,SYNC_EXTERNAL_STORE:currentRendererSupportsUseSyncExternalStore$1()?useRecoilValueLoadable_SYNC_EXTERNAL_STORE:useRecoilValueLoadable_TRANSITION_SUPPORT,MUTABLE_SOURCE:useRecoilValueLoadable_MUTABLE_SOURCE,LEGACY:useRecoilValueLoadable_LEGACY}[reactMode$3().mode](_d)}function useRecoilValue(_d){const rp=useStoreRef$2(),np=useRecoilValueLoadable(_d);return handleLoadable(np,_d,rp)}function useSetRecoilState(_d){const rp=useStoreRef$2();return useCallback$1(np=>{setRecoilValue$2(rp.current,_d,np)},[rp,_d])}function useResetRecoilState(_d){const rp=useStoreRef$2();return useCallback$1(()=>{setRecoilValue$2(rp.current,_d,DEFAULT_VALUE$2)},[rp,_d])}function useRecoilState(_d){return[useRecoilValue(_d),useSetRecoilState(_d)]}function useRecoilStateLoadable(_d){return[useRecoilValueLoadable(_d),useSetRecoilState(_d)]}function useSetUnvalidatedAtomValues(){const _d=useStoreRef$2();return(rp,np={})=>{batchUpdates$2(()=>{_d.current.addTransactionMetadata(np),rp.forEach((ap,sp)=>setUnvalidatedRecoilValue$2(_d.current,new AbstractRecoilValue$3(sp),ap))})}}function useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE(_d){return Recoil_gkx("recoil_memory_managament_2020")&&Recoil_useRetain(_d),useRecoilValueLoadable_TRANSITION_SUPPORT(_d)}function useRecoilValue_TRANSITION_SUPPORT_UNSTABLE(_d){const rp=useStoreRef$2(),np=useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE(_d);return handleLoadable(np,_d,rp)}function useRecoilState_TRANSITION_SUPPORT_UNSTABLE(_d){return[useRecoilValue_TRANSITION_SUPPORT_UNSTABLE(_d),useSetRecoilState(_d)]}var Recoil_Hooks={recoilComponentGetRecoilValueCount_FOR_TESTING,useRecoilInterface:useRecoilInterface_DEPRECATED,useRecoilState,useRecoilStateLoadable,useRecoilValue,useRecoilValueLoadable,useResetRecoilState,useSetRecoilState,useSetUnvalidatedAtomValues,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE,useRecoilState_TRANSITION_SUPPORT_UNSTABLE};function filterMap(_d,rp){const np=new Map;for(const[ap,sp]of _d)rp(sp,ap)&&np.set(ap,sp);return np}var Recoil_filterMap=filterMap;function filterSet(_d,rp){const np=new Set;for(const ap of _d)rp(ap)&&np.add(ap);return np}var Recoil_filterSet=filterSet;function mergeMaps(..._d){const rp=new Map;for(let np=0;np<_d.length;np++){const ap=_d[np].keys();let sp;for(;!(sp=ap.next()).done;)rp.set(sp.value,_d[np].get(sp.value))}return rp}var Recoil_mergeMaps=mergeMaps;const{batchUpdates:batchUpdates$3}=Recoil_Batching,{DEFAULT_VALUE:DEFAULT_VALUE$3,getNode:getNode$4,nodes:nodes$1}=Recoil_Node,{useStoreRef:useStoreRef$3}=Recoil_RecoilRoot,{AbstractRecoilValue:AbstractRecoilValue$4,setRecoilValueLoadable:setRecoilValueLoadable$1}=Recoil_RecoilValueInterface,{SUSPENSE_TIMEOUT_MS:SUSPENSE_TIMEOUT_MS$2}=Recoil_Retention,{cloneSnapshot:cloneSnapshot$1}=Recoil_Snapshot$1,{useCallback:useCallback$2,useEffect:useEffect$4,useRef:useRef$5,useState:useState$2}=React,{isSSR:isSSR$4}=Recoil_Environment;function useTransactionSubscription(_d){const rp=useStoreRef$3();useEffect$4(()=>rp.current.subscribeToTransactions(_d).release,[_d,rp])}function externallyVisibleAtomValuesInState(_d){const rp=_d.atomValues.toMap(),np=Recoil_mapMap(Recoil_filterMap(rp,(ap,sp)=>{const up=getNode$4(sp).persistence_UNSTABLE;return up!=null&&up.type!=="none"&&ap.state==="hasValue"}),ap=>ap.contents);return Recoil_mergeMaps(_d.nonvalidatedAtoms.toMap(),np)}function useTransactionObservation_DEPRECATED(_d){useTransactionSubscription(useCallback$2(rp=>{let np=rp.getState().previousTree;const ap=rp.getState().currentTree;np||(np=rp.getState().currentTree);const sp=externallyVisibleAtomValuesInState(ap),lp=externallyVisibleAtomValuesInState(np),up=Recoil_mapMap(nodes$1,dp=>{var fp,pp,hp,mp;return{persistence_UNSTABLE:{type:(fp=(pp=dp.persistence_UNSTABLE)===null||pp===void 0?void 0:pp.type)!==null&&fp!==void 0?fp:"none",backButton:(hp=(mp=dp.persistence_UNSTABLE)===null||mp===void 0?void 0:mp.backButton)!==null&&hp!==void 0?hp:!1}}}),cp=Recoil_filterSet(ap.dirtyAtoms,dp=>sp.has(dp)||lp.has(dp));_d({atomValues:sp,previousAtomValues:lp,atomInfo:up,modifiedAtoms:cp,transactionMetadata:{...ap.transactionMetadata}})},[_d]))}function useRecoilTransactionObserver(_d){useTransactionSubscription(useCallback$2(rp=>{const np=cloneSnapshot$1(rp,"latest"),ap=cloneSnapshot$1(rp,"previous");_d({snapshot:np,previousSnapshot:ap})},[_d]))}function useRecoilSnapshot(){const _d=useStoreRef$3(),[rp,np]=useState$2(()=>cloneSnapshot$1(_d.current)),ap=Recoil_usePrevious(rp),sp=useRef$5(),lp=useRef$5();if(useTransactionSubscription(useCallback$2(cp=>np(cloneSnapshot$1(cp)),[])),useEffect$4(()=>{const cp=rp.retain();if(sp.current&&!isSSR$4){var dp;window.clearTimeout(sp.current),sp.current=null,(dp=lp.current)===null||dp===void 0||dp.call(lp),lp.current=null}return()=>{window.setTimeout(cp,10)}},[rp]),ap!==rp&&!isSSR$4){if(sp.current){var up;window.clearTimeout(sp.current),sp.current=null,(up=lp.current)===null||up===void 0||up.call(lp),lp.current=null}lp.current=rp.retain(),sp.current=window.setTimeout(()=>{var cp;sp.current=null,(cp=lp.current)===null||cp===void 0||cp.call(lp),lp.current=null},SUSPENSE_TIMEOUT_MS$2)}return rp}function gotoSnapshot(_d,rp){var np;const ap=_d.getState(),sp=(np=ap.nextTree)!==null&&np!==void 0?np:ap.currentTree,lp=rp.getStore_INTERNAL().getState().currentTree;batchUpdates$3(()=>{const up=new Set;for(const fp of[sp.atomValues.keys(),lp.atomValues.keys()])for(const pp of fp){var cp,dp;((cp=sp.atomValues.get(pp))===null||cp===void 0?void 0:cp.contents)!==((dp=lp.atomValues.get(pp))===null||dp===void 0?void 0:dp.contents)&&getNode$4(pp).shouldRestoreFromSnapshots&&up.add(pp)}up.forEach(fp=>{setRecoilValueLoadable$1(_d,new AbstractRecoilValue$4(fp),lp.atomValues.has(fp)?Recoil_nullthrows(lp.atomValues.get(fp)):DEFAULT_VALUE$3)}),_d.replaceState(fp=>({...fp,stateID:rp.getID()}))})}function useGotoRecoilSnapshot(){const _d=useStoreRef$3();return useCallback$2(rp=>gotoSnapshot(_d.current,rp),[_d])}var Recoil_SnapshotHooks={useRecoilSnapshot,gotoSnapshot,useGotoRecoilSnapshot,useRecoilTransactionObserver,useTransactionObservation_DEPRECATED,useTransactionSubscription_DEPRECATED:useTransactionSubscription};const{peekNodeInfo:peekNodeInfo$2}=Recoil_FunctionalCore,{useStoreRef:useStoreRef$4}=Recoil_RecoilRoot;function useGetRecoilValueInfo(){const _d=useStoreRef$4();return({key:rp})=>peekNodeInfo$2(_d.current,_d.current.getState().currentTree,rp)}var Recoil_useGetRecoilValueInfo=useGetRecoilValueInfo;const{reactMode:reactMode$4}=Recoil_ReactMode,{RecoilRoot:RecoilRoot$1,useStoreRef:useStoreRef$5}=Recoil_RecoilRoot,{useMemo:useMemo$2}=React;function useRecoilBridgeAcrossReactRoots(){reactMode$4().mode==="MUTABLE_SOURCE"&&console.warn("Warning: There are known issues using useRecoilBridgeAcrossReactRoots() in recoil_mutable_source rendering mode.  Please consider upgrading to recoil_sync_external_store mode.");const _d=useStoreRef$5().current;return useMemo$2(()=>{function rp({children:np}){return React.createElement(RecoilRoot$1,{store_INTERNAL:_d},np)}return rp},[_d])}var Recoil_useRecoilBridgeAcrossReactRoots=useRecoilBridgeAcrossReactRoots;const{loadableWithValue:loadableWithValue$1}=Recoil_Loadable$1,{initializeNode:initializeNode$3}=Recoil_FunctionalCore,{DEFAULT_VALUE:DEFAULT_VALUE$4,getNode:getNode$5}=Recoil_Node,{copyTreeState:copyTreeState$1,getRecoilValueAsLoadable:getRecoilValueAsLoadable$3,invalidateDownstreams:invalidateDownstreams$1,writeLoadableToTreeState:writeLoadableToTreeState$1}=Recoil_RecoilValueInterface;function isAtom(_d){return getNode$5(_d.key).nodeType==="atom"}class TransactionInterfaceImpl{constructor(rp,np){_defineProperty$1(this,"_store",void 0),_defineProperty$1(this,"_treeState",void 0),_defineProperty$1(this,"_changes",void 0),_defineProperty$1(this,"get",ap=>{if(this._changes.has(ap.key))return this._changes.get(ap.key);if(!isAtom(ap))throw Recoil_err("Reading selectors within atomicUpdate is not supported");const sp=getRecoilValueAsLoadable$3(this._store,ap,this._treeState);if(sp.state==="hasValue")return sp.contents;throw sp.state==="hasError"?sp.contents:Recoil_err(`Expected Recoil atom ${ap.key} to have a value, but it is in a loading state.`)}),_defineProperty$1(this,"set",(ap,sp)=>{if(!isAtom(ap))throw Recoil_err("Setting selectors within atomicUpdate is not supported");if(typeof sp=="function"){const lp=this.get(ap);this._changes.set(ap.key,sp(lp))}else initializeNode$3(this._store,ap.key,"set"),this._changes.set(ap.key,sp)}),_defineProperty$1(this,"reset",ap=>{this.set(ap,DEFAULT_VALUE$4)}),this._store=rp,this._treeState=np,this._changes=new Map}newTreeState_INTERNAL(){if(this._changes.size===0)return this._treeState;const rp=copyTreeState$1(this._treeState);for(const[np,ap]of this._changes)writeLoadableToTreeState$1(rp,np,loadableWithValue$1(ap));return invalidateDownstreams$1(this._store,rp),rp}}function atomicUpdater(_d){return rp=>{_d.replaceState(np=>{const ap=new TransactionInterfaceImpl(_d,np);return rp(ap),ap.newTreeState_INTERNAL()})}}var Recoil_AtomicUpdates={atomicUpdater},Recoil_AtomicUpdates_1=Recoil_AtomicUpdates.atomicUpdater,Recoil_AtomicUpdates$1=Object.freeze({__proto__:null,atomicUpdater:Recoil_AtomicUpdates_1});function invariant(_d,rp){if(!_d)throw new Error(rp)}var invariant_1=invariant,Recoil_invariant=invariant_1;const{atomicUpdater:atomicUpdater$1}=Recoil_AtomicUpdates$1,{batchUpdates:batchUpdates$4}=Recoil_Batching,{DEFAULT_VALUE:DEFAULT_VALUE$5}=Recoil_Node,{useStoreRef:useStoreRef$6}=Recoil_RecoilRoot,{refreshRecoilValue:refreshRecoilValue$1,setRecoilValue:setRecoilValue$3}=Recoil_RecoilValueInterface,{cloneSnapshot:cloneSnapshot$2}=Recoil_Snapshot$1,{gotoSnapshot:gotoSnapshot$1}=Recoil_SnapshotHooks,{useCallback:useCallback$3}=React;class Sentinel{}const SENTINEL=new Sentinel;function recoilCallback(_d,rp,np,ap){let sp=SENTINEL,lp;if(batchUpdates$4(()=>{const cp="useRecoilCallback() expects a function that returns a function: it accepts a function of the type (RecoilInterface) => (Args) => ReturnType and returns a callback function (Args) => ReturnType, where RecoilInterface is an object {snapshot, set, ...} and Args and ReturnType are the argument and return types of the callback you want to create.  Please see the docs at recoiljs.org for details.";if(typeof rp!="function")throw Recoil_err(cp);const dp=Recoil_lazyProxy({...ap??{},set:(pp,hp)=>setRecoilValue$3(_d,pp,hp),reset:pp=>setRecoilValue$3(_d,pp,DEFAULT_VALUE$5),refresh:pp=>refreshRecoilValue$1(_d,pp),gotoSnapshot:pp=>gotoSnapshot$1(_d,pp),transact_UNSTABLE:pp=>atomicUpdater$1(_d)(pp)},{snapshot:()=>{const pp=cloneSnapshot$2(_d);return lp=pp.retain(),pp}}),fp=rp(dp);if(typeof fp!="function")throw Recoil_err(cp);sp=fp(...np)}),sp instanceof Sentinel&&Recoil_invariant(!1),Recoil_isPromise(sp))sp=sp.finally(()=>{var cp;(cp=lp)===null||cp===void 0||cp()});else{var up;(up=lp)===null||up===void 0||up()}return sp}function useRecoilCallback(_d,rp){const np=useStoreRef$6();return useCallback$3((...ap)=>recoilCallback(np.current,_d,ap),rp!=null?[...rp,np]:void 0)}var Recoil_useRecoilCallback={recoilCallback,useRecoilCallback};const{useStoreRef:useStoreRef$7}=Recoil_RecoilRoot,{refreshRecoilValue:refreshRecoilValue$2}=Recoil_RecoilValueInterface,{useCallback:useCallback$4}=React;function useRecoilRefresher(_d){const rp=useStoreRef$7();return useCallback$4(()=>{const np=rp.current;refreshRecoilValue$2(np,_d)},[_d,rp])}var Recoil_useRecoilRefresher=useRecoilRefresher;const{atomicUpdater:atomicUpdater$2}=Recoil_AtomicUpdates$1,{useStoreRef:useStoreRef$8}=Recoil_RecoilRoot,{useMemo:useMemo$3}=React;function useRecoilTransaction(_d,rp){const np=useStoreRef$8();return useMemo$3(()=>(...ap)=>{atomicUpdater$2(np.current)(lp=>{_d(lp)(...ap)})},rp!=null?[...rp,np]:void 0)}var Recoil_useRecoilTransaction=useRecoilTransaction;class WrappedValue{constructor(rp){_defineProperty$1(this,"value",void 0),this.value=rp}}var Recoil_Wrapper={WrappedValue},Recoil_Wrapper_1=Recoil_Wrapper.WrappedValue,Recoil_Wrapper$1=Object.freeze({__proto__:null,WrappedValue:Recoil_Wrapper_1});const{isFastRefreshEnabled:isFastRefreshEnabled$2}=Recoil_ReactMode;class ChangedPathError extends Error{}class TreeCache{constructor(rp){var np,ap,sp;_defineProperty$1(this,"_name",void 0),_defineProperty$1(this,"_numLeafs",void 0),_defineProperty$1(this,"_root",void 0),_defineProperty$1(this,"_onHit",void 0),_defineProperty$1(this,"_onSet",void 0),_defineProperty$1(this,"_mapNodeValue",void 0),this._name=rp==null?void 0:rp.name,this._numLeafs=0,this._root=null,this._onHit=(np=rp==null?void 0:rp.onHit)!==null&&np!==void 0?np:()=>{},this._onSet=(ap=rp==null?void 0:rp.onSet)!==null&&ap!==void 0?ap:()=>{},this._mapNodeValue=(sp=rp==null?void 0:rp.mapNodeValue)!==null&&sp!==void 0?sp:lp=>lp}size(){return this._numLeafs}root(){return this._root}get(rp,np){var ap;return(ap=this.getLeafNode(rp,np))===null||ap===void 0?void 0:ap.value}getLeafNode(rp,np){if(this._root==null)return;let ap=this._root;for(;ap;){if(np==null||np.onNodeVisit(ap),ap.type==="leaf")return this._onHit(ap),ap;const sp=this._mapNodeValue(rp(ap.nodeKey));ap=ap.branches.get(sp)}}set(rp,np,ap){const sp=()=>{var lp,up,cp,dp;let fp,pp;for(const[Sp,yp]of rp){var hp,mp,gp;const bp=this._root;if((bp==null?void 0:bp.type)==="leaf")throw this.invalidCacheError();const Ep=fp;if(fp=Ep?Ep.branches.get(pp):bp,fp=(hp=fp)!==null&&hp!==void 0?hp:{type:"branch",nodeKey:Sp,parent:Ep,branches:new Map,branchKey:pp},fp.type!=="branch"||fp.nodeKey!==Sp)throw this.invalidCacheError();Ep==null||Ep.branches.set(pp,fp),ap==null||(mp=ap.onNodeVisit)===null||mp===void 0||mp.call(ap,fp),pp=this._mapNodeValue(yp),this._root=(gp=this._root)!==null&&gp!==void 0?gp:fp}const vp=fp?(lp=fp)===null||lp===void 0?void 0:lp.branches.get(pp):this._root;if(vp!=null&&(vp.type!=="leaf"||vp.branchKey!==pp))throw this.invalidCacheError();const xp={type:"leaf",value:np,parent:fp,branchKey:pp};(up=fp)===null||up===void 0||up.branches.set(pp,xp),this._root=(cp=this._root)!==null&&cp!==void 0?cp:xp,this._numLeafs++,this._onSet(xp),ap==null||(dp=ap.onNodeVisit)===null||dp===void 0||dp.call(ap,xp)};try{sp()}catch(lp){if(lp instanceof ChangedPathError)this.clear(),sp();else throw lp}}delete(rp){const np=this.root();if(!np)return!1;if(rp===np)return this._root=null,this._numLeafs=0,!0;let ap=rp.parent,sp=rp.branchKey;for(;ap;){var lp;if(ap.branches.delete(sp),ap===np)return ap.branches.size===0?(this._root=null,this._numLeafs=0):this._numLeafs--,!0;if(ap.branches.size>0)break;sp=(lp=ap)===null||lp===void 0?void 0:lp.branchKey,ap=ap.parent}for(;ap!==np;ap=ap.parent)if(ap==null)return!1;return this._numLeafs--,!0}clear(){this._numLeafs=0,this._root=null}invalidCacheError(){const rp=isFastRefreshEnabled$2()?"Possible Fast Refresh module reload detected.  This may also be caused by an selector returning inconsistent values. Resetting cache.":"Invalid cache values.  This happens when selectors do not return consistent values for the same input dependency values.  That may also be caused when using Fast Refresh to change a selector implementation.  Resetting cache.";throw Recoil_recoverableViolation(rp+(this._name!=null?` - ${this._name}`:"")),new ChangedPathError}}var Recoil_TreeCache={TreeCache},Recoil_TreeCache_1=Recoil_TreeCache.TreeCache,Recoil_TreeCache$1=Object.freeze({__proto__:null,TreeCache:Recoil_TreeCache_1});class LRUCache{constructor(rp){var np;_defineProperty$1(this,"_maxSize",void 0),_defineProperty$1(this,"_size",void 0),_defineProperty$1(this,"_head",void 0),_defineProperty$1(this,"_tail",void 0),_defineProperty$1(this,"_map",void 0),_defineProperty$1(this,"_keyMapper",void 0),this._maxSize=rp.maxSize,this._size=0,this._head=null,this._tail=null,this._map=new Map,this._keyMapper=(np=rp.mapKey)!==null&&np!==void 0?np:ap=>ap}head(){return this._head}tail(){return this._tail}size(){return this._size}maxSize(){return this._maxSize}has(rp){return this._map.has(this._keyMapper(rp))}get(rp){const np=this._keyMapper(rp),ap=this._map.get(np);if(ap)return this.set(rp,ap.value),ap.value}set(rp,np){const ap=this._keyMapper(rp);this._map.get(ap)&&this.delete(rp);const lp=this.head(),up={key:rp,right:lp,left:null,value:np};lp?lp.left=up:this._tail=up,this._map.set(ap,up),this._head=up,this._size++,this._maybeDeleteLRU()}_maybeDeleteLRU(){this.size()>this.maxSize()&&this.deleteLru()}deleteLru(){const rp=this.tail();rp&&this.delete(rp.key)}delete(rp){const np=this._keyMapper(rp);if(!this._size||!this._map.has(np))return;const ap=Recoil_nullthrows(this._map.get(np)),sp=ap.right,lp=ap.left;sp&&(sp.left=ap.left),lp&&(lp.right=ap.right),ap===this.head()&&(this._head=sp),ap===this.tail()&&(this._tail=lp),this._map.delete(np),this._size--}clear(){this._size=0,this._head=null,this._tail=null,this._map=new Map}}var Recoil_LRUCache={LRUCache},Recoil_LRUCache_1=Recoil_LRUCache.LRUCache,Recoil_LRUCache$1=Object.freeze({__proto__:null,LRUCache:Recoil_LRUCache_1});const{LRUCache:LRUCache$1}=Recoil_LRUCache$1,{TreeCache:TreeCache$1}=Recoil_TreeCache$1;function treeCacheLRU({name:_d,maxSize:rp,mapNodeValue:np=ap=>ap}){const ap=new LRUCache$1({maxSize:rp}),sp=new TreeCache$1({name:_d,mapNodeValue:np,onHit:lp=>{ap.set(lp,!0)},onSet:lp=>{const up=ap.tail();ap.set(lp,!0),up&&sp.size()>rp&&sp.delete(up.key)}});return sp}var Recoil_treeCacheLRU=treeCacheLRU;function stringify$2(_d,rp,np){if(typeof _d=="string"&&!_d.includes('"')&&!_d.includes("\\"))return`"${_d}"`;switch(typeof _d){case"undefined":return"";case"boolean":return _d?"true":"false";case"number":case"symbol":return String(_d);case"string":return JSON.stringify(_d);case"function":if((rp==null?void 0:rp.allowFunctions)!==!0)throw Recoil_err("Attempt to serialize function in a Recoil cache key");return`__FUNCTION(${_d.name})__`}if(_d===null)return"null";if(typeof _d!="object"){var ap;return(ap=JSON.stringify(_d))!==null&&ap!==void 0?ap:""}if(Recoil_isPromise(_d))return"__PROMISE__";if(Array.isArray(_d))return`[${_d.map((sp,lp)=>stringify$2(sp,rp,lp.toString()))}]`;if(typeof _d.toJSON=="function")return stringify$2(_d.toJSON(np),rp,np);if(_d instanceof Map){const sp={};for(const[lp,up]of _d)sp[typeof lp=="string"?lp:stringify$2(lp,rp)]=up;return stringify$2(sp,rp,np)}return _d instanceof Set?stringify$2(Array.from(_d).sort((sp,lp)=>stringify$2(sp,rp).localeCompare(stringify$2(lp,rp))),rp,np):Symbol!==void 0&&_d[Symbol.iterator]!=null&&typeof _d[Symbol.iterator]=="function"?stringify$2(Array.from(_d),rp,np):`{${Object.keys(_d).filter(sp=>_d[sp]!==void 0).sort().map(sp=>`${stringify$2(sp,rp)}:${stringify$2(_d[sp],rp,sp)}`).join(",")}}`}function stableStringify(_d,rp={allowFunctions:!1}){return stringify$2(_d,rp)}var Recoil_stableStringify=stableStringify;const{TreeCache:TreeCache$2}=Recoil_TreeCache$1,defaultPolicy={equality:"reference",eviction:"keep-all",maxSize:1/0};function treeCacheFromPolicy({equality:_d=defaultPolicy.equality,eviction:rp=defaultPolicy.eviction,maxSize:np=defaultPolicy.maxSize}=defaultPolicy,ap){const sp=getValueMapper(_d);return getTreeCache(rp,np,sp,ap)}function getValueMapper(_d){switch(_d){case"reference":return rp=>rp;case"value":return rp=>Recoil_stableStringify(rp)}throw Recoil_err(`Unrecognized equality policy ${_d}`)}function getTreeCache(_d,rp,np,ap){switch(_d){case"keep-all":return new TreeCache$2({name:ap,mapNodeValue:np});case"lru":return Recoil_treeCacheLRU({name:ap,maxSize:Recoil_nullthrows(rp),mapNodeValue:np});case"most-recent":return Recoil_treeCacheLRU({name:ap,maxSize:1,mapNodeValue:np})}throw Recoil_err(`Unrecognized eviction policy ${_d}`)}var Recoil_treeCacheFromPolicy=treeCacheFromPolicy;function startPerfBlock(_d){return()=>null}var Recoil_PerformanceTimings={startPerfBlock};const{isLoadable:isLoadable$1,loadableWithError:loadableWithError$1,loadableWithPromise:loadableWithPromise$1,loadableWithValue:loadableWithValue$2}=Recoil_Loadable$1,{WrappedValue:WrappedValue$1}=Recoil_Wrapper$1,{getNodeLoadable:getNodeLoadable$2,peekNodeLoadable:peekNodeLoadable$1,setNodeValue:setNodeValue$3}=Recoil_FunctionalCore,{saveDepsToStore:saveDepsToStore$1}=Recoil_Graph,{DEFAULT_VALUE:DEFAULT_VALUE$6,getConfigDeletionHandler:getConfigDeletionHandler$1,getNode:getNode$6,registerNode:registerNode$1}=Recoil_Node,{isRecoilValue:isRecoilValue$3}=Recoil_RecoilValue$1,{markRecoilValueModified:markRecoilValueModified$1}=Recoil_RecoilValueInterface,{retainedByOptionWithDefault:retainedByOptionWithDefault$1}=Recoil_Retention,{recoilCallback:recoilCallback$1}=Recoil_useRecoilCallback,{startPerfBlock:startPerfBlock$1}=Recoil_PerformanceTimings;class Canceled{}const CANCELED=new Canceled,dependencyStack=[],waitingStores=new Map,getNewExecutionID=(()=>{let _d=0;return()=>_d++})();function selector(_d){let rp=null;const{key:np,get:ap,cachePolicy_UNSTABLE:sp}=_d,lp=_d.set!=null?_d.set:void 0,up=new Set,cp=Recoil_treeCacheFromPolicy(sp??{equality:"reference",eviction:"keep-all"},np),dp=retainedByOptionWithDefault$1(_d.retainedBy_UNSTABLE),fp=new Map;let pp=0;function hp(){return!Recoil_gkx("recoil_memory_managament_2020")||pp>0}function mp(zp){return zp.getState().knownSelectors.add(np),pp++,()=>{pp--}}function gp(){return getConfigDeletionHandler$1(np)!==void 0&&!hp()}function vp(zp,Wp,Up,qp,Bp){Ip(Wp,qp,Bp),xp(zp,Up)}function xp(zp,Wp){Dp(zp,Wp)&&kp(zp),yp(Wp,!0)}function Sp(zp,Wp){Dp(zp,Wp)&&(Recoil_nullthrows(Op(zp)).stateVersions.clear(),yp(Wp,!1))}function yp(zp,Wp){const Up=waitingStores.get(zp);if(Up!=null){for(const qp of Up)markRecoilValueModified$1(qp,Recoil_nullthrows(rp));Wp&&waitingStores.delete(zp)}}function bp(zp,Wp){let Up=waitingStores.get(Wp);Up==null&&waitingStores.set(Wp,Up=new Set),Up.add(zp)}function Ep(zp,Wp,Up,qp,Bp,Yp){return Wp.then(Xp=>{if(!hp())throw kp(zp),CANCELED;const Qp=loadableWithValue$2(Xp);return vp(zp,Up,Bp,Qp,qp),Xp}).catch(Xp=>{if(!hp())throw kp(zp),CANCELED;if(Recoil_isPromise(Xp))return wp(zp,Xp,Up,qp,Bp,Yp);const Qp=loadableWithError$1(Xp);throw vp(zp,Up,Bp,Qp,qp),Xp})}function wp(zp,Wp,Up,qp,Bp,Yp){return Wp.then(Xp=>{if(!hp())throw kp(zp),CANCELED;Yp.loadingDepKey!=null&&Yp.loadingDepPromise===Wp?Up.atomValues.set(Yp.loadingDepKey,loadableWithValue$2(Xp)):zp.getState().knownSelectors.forEach(im=>{Up.atomValues.delete(im)});const Qp=$p(zp,Up);if(Qp&&Qp.state!=="loading"){if((Dp(zp,Bp)||Op(zp)==null)&&xp(zp,Bp),Qp.state==="hasValue")return Qp.contents;throw Qp.contents}if(!Dp(zp,Bp)){const im=Ap(zp,Up);if(im!=null)return im.loadingLoadable.contents}const[am,Jp]=Rp(zp,Up,Bp);if(am.state!=="loading"&&vp(zp,Up,Bp,am,Jp),am.state==="hasError")throw am.contents;return am.contents}).catch(Xp=>{if(Xp instanceof Canceled)throw CANCELED;if(!hp())throw kp(zp),CANCELED;const Qp=loadableWithError$1(Xp);throw vp(zp,Up,Bp,Qp,qp),Xp})}function _p(zp,Wp,Up,qp){var Bp,Yp,Xp,Qp;if(Dp(zp,qp)||Wp.version===((Bp=zp.getState())===null||Bp===void 0||(Yp=Bp.currentTree)===null||Yp===void 0?void 0:Yp.version)||Wp.version===((Xp=zp.getState())===null||Xp===void 0||(Qp=Xp.nextTree)===null||Qp===void 0?void 0:Qp.version)){var am,Jp,im;saveDepsToStore$1(np,Up,zp,(am=(Jp=zp.getState())===null||Jp===void 0||(im=Jp.nextTree)===null||im===void 0?void 0:im.version)!==null&&am!==void 0?am:zp.getState().currentTree.version)}for(const Zp of Up)up.add(Zp)}function Rp(zp,Wp,Up){const qp=startPerfBlock$1(np);let Bp=!0,Yp=!0;const Xp=()=>{qp(),Yp=!1};let Qp,am=!1,Jp;const im={loadingDepKey:null,loadingDepPromise:null},Zp=new Map;function Gp({key:om}){const em=getNodeLoadable$2(zp,Wp,om);switch(Zp.set(om,em),Bp||(_p(zp,Wp,new Set(Zp.keys()),Up),Sp(zp,Up)),em.state){case"hasValue":return em.contents;case"hasError":throw em.contents;case"loading":throw im.loadingDepKey=om,im.loadingDepPromise=em.contents,em.contents}throw Recoil_err("Invalid Loadable state")}const tm=om=>(...em)=>{if(Yp)throw Recoil_err("Callbacks from getCallback() should only be called asynchronously after the selector is evalutated.  It can be used for selectors to return objects with callbacks that can work with Recoil state without a subscription.");return rp==null&&Recoil_invariant(!1),recoilCallback$1(zp,om,em,{node:rp})};try{Qp=ap({get:Gp,getCallback:tm}),Qp=isRecoilValue$3(Qp)?Gp(Qp):Qp,isLoadable$1(Qp)&&(Qp.state==="hasError"&&(am=!0),Qp=Qp.contents),Recoil_isPromise(Qp)?Qp=Ep(zp,Qp,Wp,Zp,Up,im).finally(Xp):Xp(),Qp=Qp instanceof WrappedValue$1?Qp.value:Qp}catch(om){Qp=om,Recoil_isPromise(Qp)?Qp=wp(zp,Qp,Wp,Zp,Up,im).finally(Xp):(am=!0,Xp())}return am?Jp=loadableWithError$1(Qp):Recoil_isPromise(Qp)?Jp=loadableWithPromise$1(Qp):Jp=loadableWithValue$2(Qp),Bp=!1,Mp(zp,Up,Zp),_p(zp,Wp,new Set(Zp.keys()),Up),[Jp,Zp]}function $p(zp,Wp){let Up=Wp.atomValues.get(np);if(Up!=null)return Up;const qp=new Set;try{Up=cp.get(Yp=>(typeof Yp!="string"&&Recoil_invariant(!1),getNodeLoadable$2(zp,Wp,Yp).contents),{onNodeVisit:Yp=>{Yp.type==="branch"&&Yp.nodeKey!==np&&qp.add(Yp.nodeKey)}})}catch(Yp){throw Recoil_err(`Problem with cache lookup for selector "${np}": ${Yp.message}`)}if(Up){var Bp;Wp.atomValues.set(np,Up),_p(zp,Wp,qp,(Bp=Op(zp))===null||Bp===void 0?void 0:Bp.executionID)}return Up}function Cp(zp,Wp){const Up=$p(zp,Wp);if(Up!=null)return kp(zp),Up;const qp=Ap(zp,Wp);if(qp!=null){var Bp;return((Bp=qp.loadingLoadable)===null||Bp===void 0?void 0:Bp.state)==="loading"&&bp(zp,qp.executionID),qp.loadingLoadable}const Yp=getNewExecutionID(),[Xp,Qp]=Rp(zp,Wp,Yp);return Xp.state==="loading"?(Lp(zp,Yp,Xp,Qp,Wp),bp(zp,Yp)):(kp(zp),Ip(Wp,Xp,Qp)),Xp}function Ap(zp,Wp){const Up=Recoil_concatIterables([fp.has(zp)?[Recoil_nullthrows(fp.get(zp))]:[],Recoil_mapIterable(Recoil_filterIterable(fp,([Bp])=>Bp!==zp),([,Bp])=>Bp)]);function qp(Bp){for(const[Yp,Xp]of Bp)if(!getNodeLoadable$2(zp,Wp,Yp).is(Xp))return!0;return!1}for(const Bp of Up){if(Bp.stateVersions.get(Wp.version)||!qp(Bp.depValuesDiscoveredSoFarDuringAsyncWork))return Bp.stateVersions.set(Wp.version,!0),Bp;Bp.stateVersions.set(Wp.version,!1)}}function Op(zp){return fp.get(zp)}function Lp(zp,Wp,Up,qp,Bp){fp.set(zp,{depValuesDiscoveredSoFarDuringAsyncWork:qp,executionID:Wp,loadingLoadable:Up,stateVersions:new Map([[Bp.version,!0]])})}function Mp(zp,Wp,Up){if(Dp(zp,Wp)){const qp=Op(zp);qp!=null&&(qp.depValuesDiscoveredSoFarDuringAsyncWork=Up)}}function kp(zp){fp.delete(zp)}function Dp(zp,Wp){var Up;return Wp===((Up=Op(zp))===null||Up===void 0?void 0:Up.executionID)}function Fp(zp){return Array.from(zp.entries()).map(([Wp,Up])=>[Wp,Up.contents])}function Ip(zp,Wp,Up){zp.atomValues.set(np,Wp);try{cp.set(Fp(Up),Wp)}catch(qp){throw Recoil_err(`Problem with setting cache for selector "${np}": ${qp.message}`)}}function Pp(zp){if(dependencyStack.includes(np)){const Wp=`Recoil selector has circular dependencies: ${dependencyStack.slice(dependencyStack.indexOf(np)).join(" → ")}`;return loadableWithError$1(Recoil_err(Wp))}dependencyStack.push(np);try{return zp()}finally{dependencyStack.pop()}}function Tp(zp,Wp){const Up=Wp.atomValues.get(np);return Up??cp.get(qp=>{var Bp;return typeof qp!="string"&&Recoil_invariant(!1),(Bp=peekNodeLoadable$1(zp,Wp,qp))===null||Bp===void 0?void 0:Bp.contents})}function Np(zp,Wp){return Pp(()=>Cp(zp,Wp))}function jp(zp){zp.atomValues.delete(np)}function Vp(zp,Wp){rp==null&&Recoil_invariant(!1);for(const qp of up){var Up;const Bp=getNode$6(qp);(Up=Bp.clearCache)===null||Up===void 0||Up.call(Bp,zp,Wp)}up.clear(),jp(Wp),cp.clear(),markRecoilValueModified$1(zp,rp)}return lp!=null?rp=registerNode$1({key:np,nodeType:"selector",peek:Tp,get:Np,set:(Wp,Up,qp)=>{let Bp=!1;const Yp=new Map;function Xp({key:im}){if(Bp)throw Recoil_err("Recoil: Async selector sets are not currently supported.");const Zp=getNodeLoadable$2(Wp,Up,im);if(Zp.state==="hasValue")return Zp.contents;if(Zp.state==="loading"){const Gp=`Getting value of asynchronous atom or selector "${im}" in a pending state while setting selector "${np}" is not yet supported.`;throw Recoil_err(Gp)}else throw Zp.contents}function Qp(im,Zp){if(Bp)throw Recoil_err("Recoil: Async selector sets are not currently supported.");const Gp=typeof Zp=="function"?Zp(Xp(im)):Zp;setNodeValue$3(Wp,Up,im.key,Gp).forEach((om,em)=>Yp.set(em,om))}function am(im){Qp(im,DEFAULT_VALUE$6)}const Jp=lp({set:Qp,get:Xp,reset:am},qp);if(Jp!==void 0)throw Recoil_isPromise(Jp)?Recoil_err("Recoil: Async selector sets are not currently supported."):Recoil_err("Recoil: selector set should be a void function.");return Bp=!0,Yp},init:mp,invalidate:jp,clearCache:Vp,shouldDeleteConfigOnRelease:gp,dangerouslyAllowMutability:_d.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:dp}):rp=registerNode$1({key:np,nodeType:"selector",peek:Tp,get:Np,init:mp,invalidate:jp,clearCache:Vp,shouldDeleteConfigOnRelease:gp,dangerouslyAllowMutability:_d.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:dp})}selector.value=_d=>new WrappedValue$1(_d);var Recoil_selector=selector;const{isLoadable:isLoadable$2,loadableWithError:loadableWithError$2,loadableWithPromise:loadableWithPromise$2,loadableWithValue:loadableWithValue$3}=Recoil_Loadable$1,{WrappedValue:WrappedValue$2}=Recoil_Wrapper$1,{peekNodeInfo:peekNodeInfo$3}=Recoil_FunctionalCore,{DEFAULT_VALUE:DEFAULT_VALUE$7,DefaultValue:DefaultValue$2,getConfigDeletionHandler:getConfigDeletionHandler$2,registerNode:registerNode$2,setConfigDeletionHandler:setConfigDeletionHandler$1}=Recoil_Node,{isRecoilValue:isRecoilValue$4}=Recoil_RecoilValue$1,{getRecoilValueAsLoadable:getRecoilValueAsLoadable$4,markRecoilValueModified:markRecoilValueModified$2,setRecoilValue:setRecoilValue$4,setRecoilValueLoadable:setRecoilValueLoadable$2}=Recoil_RecoilValueInterface,{retainedByOptionWithDefault:retainedByOptionWithDefault$2}=Recoil_Retention,unwrap=_d=>_d instanceof WrappedValue$2?_d.value:_d;function baseAtom(_d){const{key:rp,persistence_UNSTABLE:np}=_d,ap=retainedByOptionWithDefault$2(_d.retainedBy_UNSTABLE);let sp=0;function lp(bp){return loadableWithPromise$2(bp.then(Ep=>(up=loadableWithValue$3(Ep),Ep)).catch(Ep=>{throw up=loadableWithError$2(Ep),Ep}))}let up=Recoil_isPromise(_d.default)?lp(_d.default):isLoadable$2(_d.default)?_d.default.state==="loading"?lp(_d.default.contents):_d.default:loadableWithValue$3(unwrap(_d.default));up.contents;let cp;const dp=new Map;function fp(bp){return bp}function pp(bp,Ep){const wp=Ep.then(_p=>{var Rp,$p;return(($p=((Rp=bp.getState().nextTree)!==null&&Rp!==void 0?Rp:bp.getState().currentTree).atomValues.get(rp))===null||$p===void 0?void 0:$p.contents)===wp&&setRecoilValue$4(bp,yp,_p),_p}).catch(_p=>{var Rp,$p;throw(($p=((Rp=bp.getState().nextTree)!==null&&Rp!==void 0?Rp:bp.getState().currentTree).atomValues.get(rp))===null||$p===void 0?void 0:$p.contents)===wp&&setRecoilValueLoadable$2(bp,yp,loadableWithError$2(_p)),_p});return wp}function hp(bp,Ep,wp){var _p;sp++;const Rp=()=>{var Op;sp--,(Op=dp.get(bp))===null||Op===void 0||Op.forEach(Lp=>Lp()),dp.delete(bp)};if(bp.getState().knownAtoms.add(rp),up.state==="loading"){const Op=()=>{var Lp;((Lp=bp.getState().nextTree)!==null&&Lp!==void 0?Lp:bp.getState().currentTree).atomValues.has(rp)||markRecoilValueModified$2(bp,yp)};up.contents.finally(Op)}const $p=(_p=_d.effects)!==null&&_p!==void 0?_p:_d.effects_UNSTABLE;if($p!=null){let Op=function(jp){if(Dp&&jp.key===rp){const Vp=kp;return Vp instanceof DefaultValue$2?mp(bp,Ep):Recoil_isPromise(Vp)?loadableWithPromise$2(Vp.then(zp=>zp instanceof DefaultValue$2?up.toPromise():zp)):loadableWithValue$3(Vp)}return getRecoilValueAsLoadable$4(bp,jp)},Lp=function(jp){return Op(jp).toPromise()},Mp=function(jp){var Vp;const zp=peekNodeInfo$3(bp,(Vp=bp.getState().nextTree)!==null&&Vp!==void 0?Vp:bp.getState().currentTree,jp.key);return Dp&&jp.key===rp&&!(kp instanceof DefaultValue$2)?{...zp,isSet:!0,loadable:Op(jp)}:zp},kp=DEFAULT_VALUE$7,Dp=!0,Fp=!1,Ip=null;const Pp=jp=>Vp=>{if(Dp){const zp=Op(yp),Wp=zp.state==="hasValue"?zp.contents:DEFAULT_VALUE$7;kp=typeof Vp=="function"?Vp(Wp):Vp,Recoil_isPromise(kp)&&(kp=kp.then(Up=>(Ip={effect:jp,value:Up},Up)))}else{if(Recoil_isPromise(Vp))throw Recoil_err("Setting atoms to async values is not implemented.");typeof Vp!="function"&&(Ip={effect:jp,value:unwrap(Vp)}),setRecoilValue$4(bp,yp,typeof Vp=="function"?zp=>{const Wp=unwrap(Vp(zp));return Ip={effect:jp,value:Wp},Wp}:unwrap(Vp))}},Tp=jp=>()=>Pp(jp)(DEFAULT_VALUE$7),Np=jp=>Vp=>{var zp;const{release:Wp}=bp.subscribeToTransactions(Up=>{var qp;let{currentTree:Bp,previousTree:Yp}=Up.getState();Yp||(Yp=Bp);const Xp=(qp=Bp.atomValues.get(rp))!==null&&qp!==void 0?qp:up;if(Xp.state==="hasValue"){var Qp,am,Jp,im;const Zp=Xp.contents,Gp=(Qp=Yp.atomValues.get(rp))!==null&&Qp!==void 0?Qp:up,tm=Gp.state==="hasValue"?Gp.contents:DEFAULT_VALUE$7;((am=Ip)===null||am===void 0?void 0:am.effect)!==jp||((Jp=Ip)===null||Jp===void 0?void 0:Jp.value)!==Zp?Vp(Zp,tm,!Bp.atomValues.has(rp)):((im=Ip)===null||im===void 0?void 0:im.effect)===jp&&(Ip=null)}},rp);dp.set(bp,[...(zp=dp.get(bp))!==null&&zp!==void 0?zp:[],Wp])};for(const jp of $p)try{const Vp=jp({node:yp,storeID:bp.storeID,parentStoreID_UNSTABLE:bp.parentStoreID,trigger:wp,setSelf:Pp(jp),resetSelf:Tp(jp),onSet:Np(jp),getPromise:Lp,getLoadable:Op,getInfo_UNSTABLE:Mp});if(Vp!=null){var Cp;dp.set(bp,[...(Cp=dp.get(bp))!==null&&Cp!==void 0?Cp:[],Vp])}}catch(Vp){kp=Vp,Fp=!0}if(Dp=!1,!(kp instanceof DefaultValue$2)){var Ap;const jp=Fp?loadableWithError$2(kp):Recoil_isPromise(kp)?loadableWithPromise$2(pp(bp,kp)):loadableWithValue$3(unwrap(kp));jp.contents,Ep.atomValues.set(rp,jp),(Ap=bp.getState().nextTree)===null||Ap===void 0||Ap.atomValues.set(rp,jp)}}return Rp}function mp(bp,Ep){var wp,_p;return(wp=(_p=Ep.atomValues.get(rp))!==null&&_p!==void 0?_p:cp)!==null&&wp!==void 0?wp:up}function gp(bp,Ep){if(Ep.atomValues.has(rp))return Recoil_nullthrows(Ep.atomValues.get(rp));if(Ep.nonvalidatedAtoms.has(rp)){if(cp!=null)return cp;if(np==null)return up;const wp=Ep.nonvalidatedAtoms.get(rp),_p=np.validator(wp,DEFAULT_VALUE$7);return cp=_p instanceof DefaultValue$2?up:loadableWithValue$3(_p),cp}else return up}function vp(){cp=void 0}function xp(bp,Ep,wp){if(Ep.atomValues.has(rp)){const _p=Recoil_nullthrows(Ep.atomValues.get(rp));if(_p.state==="hasValue"&&wp===_p.contents)return new Map}else if(!Ep.nonvalidatedAtoms.has(rp)&&wp instanceof DefaultValue$2)return new Map;return cp=void 0,new Map().set(rp,loadableWithValue$3(wp))}function Sp(){return getConfigDeletionHandler$2(rp)!==void 0&&sp<=0}const yp=registerNode$2({key:rp,nodeType:"atom",peek:mp,get:gp,set:xp,init:hp,invalidate:vp,shouldDeleteConfigOnRelease:Sp,dangerouslyAllowMutability:_d.dangerouslyAllowMutability,persistence_UNSTABLE:_d.persistence_UNSTABLE?{type:_d.persistence_UNSTABLE.type,backButton:_d.persistence_UNSTABLE.backButton}:void 0,shouldRestoreFromSnapshots:!0,retainedBy:ap});return yp}function atom(_d){const{...rp}=_d,np="default"in _d?_d.default:new Promise(()=>{});return isRecoilValue$4(np)?atomWithFallback({...rp,default:np}):baseAtom({...rp,default:np})}function atomWithFallback(_d){const rp=atom({..._d,default:DEFAULT_VALUE$7,persistence_UNSTABLE:_d.persistence_UNSTABLE===void 0?void 0:{..._d.persistence_UNSTABLE,validator:ap=>ap instanceof DefaultValue$2?ap:Recoil_nullthrows(_d.persistence_UNSTABLE).validator(ap,DEFAULT_VALUE$7)},effects:_d.effects,effects_UNSTABLE:_d.effects_UNSTABLE}),np=Recoil_selector({key:`${_d.key}__withFallback`,get:({get:ap})=>{const sp=ap(rp);return sp instanceof DefaultValue$2?_d.default:sp},set:({set:ap},sp)=>ap(rp,sp),cachePolicy_UNSTABLE:{eviction:"most-recent"},dangerouslyAllowMutability:_d.dangerouslyAllowMutability});return setConfigDeletionHandler$1(np.key,getConfigDeletionHandler$2(_d.key)),np}atom.value=_d=>new WrappedValue$2(_d);var Recoil_atom=atom;class MapCache{constructor(rp){var np;_defineProperty$1(this,"_map",void 0),_defineProperty$1(this,"_keyMapper",void 0),this._map=new Map,this._keyMapper=(np=rp==null?void 0:rp.mapKey)!==null&&np!==void 0?np:ap=>ap}size(){return this._map.size}has(rp){return this._map.has(this._keyMapper(rp))}get(rp){return this._map.get(this._keyMapper(rp))}set(rp,np){this._map.set(this._keyMapper(rp),np)}delete(rp){this._map.delete(this._keyMapper(rp))}clear(){this._map.clear()}}var Recoil_MapCache={MapCache},Recoil_MapCache_1=Recoil_MapCache.MapCache,Recoil_MapCache$1=Object.freeze({__proto__:null,MapCache:Recoil_MapCache_1});const{LRUCache:LRUCache$2}=Recoil_LRUCache$1,{MapCache:MapCache$1}=Recoil_MapCache$1,defaultPolicy$1={equality:"reference",eviction:"none",maxSize:1/0};function cacheFromPolicy({equality:_d=defaultPolicy$1.equality,eviction:rp=defaultPolicy$1.eviction,maxSize:np=defaultPolicy$1.maxSize}=defaultPolicy$1){const ap=getValueMapper$1(_d);return getCache(rp,np,ap)}function getValueMapper$1(_d){switch(_d){case"reference":return rp=>rp;case"value":return rp=>Recoil_stableStringify(rp)}throw Recoil_err(`Unrecognized equality policy ${_d}`)}function getCache(_d,rp,np){switch(_d){case"keep-all":return new MapCache$1({mapKey:np});case"lru":return new LRUCache$2({mapKey:np,maxSize:Recoil_nullthrows(rp)});case"most-recent":return new LRUCache$2({mapKey:np,maxSize:1})}throw Recoil_err(`Unrecognized eviction policy ${_d}`)}var Recoil_cacheFromPolicy=cacheFromPolicy;const{setConfigDeletionHandler:setConfigDeletionHandler$2}=Recoil_Node;function atomFamily(_d){var rp,np;const ap=Recoil_cacheFromPolicy({equality:(rp=(np=_d.cachePolicyForParams_UNSTABLE)===null||np===void 0?void 0:np.equality)!==null&&rp!==void 0?rp:"value",eviction:"keep-all"});return sp=>{var lp,up;const cp=ap.get(sp);if(cp!=null)return cp;const{cachePolicyForParams_UNSTABLE:dp,...fp}=_d,pp="default"in _d?_d.default:new Promise(()=>{}),hp=Recoil_atom({...fp,key:`${_d.key}__${(lp=Recoil_stableStringify(sp))!==null&&lp!==void 0?lp:"void"}`,default:typeof pp=="function"?pp(sp):pp,retainedBy_UNSTABLE:typeof _d.retainedBy_UNSTABLE=="function"?_d.retainedBy_UNSTABLE(sp):_d.retainedBy_UNSTABLE,effects:typeof _d.effects=="function"?_d.effects(sp):typeof _d.effects_UNSTABLE=="function"?_d.effects_UNSTABLE(sp):(up=_d.effects)!==null&&up!==void 0?up:_d.effects_UNSTABLE});return ap.set(sp,hp),setConfigDeletionHandler$2(hp.key,()=>{ap.delete(sp)}),hp}}var Recoil_atomFamily=atomFamily;const{setConfigDeletionHandler:setConfigDeletionHandler$3}=Recoil_Node;let nextIndex=0;function selectorFamily(_d){var rp,np;const ap=Recoil_cacheFromPolicy({equality:(rp=(np=_d.cachePolicyForParams_UNSTABLE)===null||np===void 0?void 0:np.equality)!==null&&rp!==void 0?rp:"value",eviction:"keep-all"});return sp=>{var lp;let up;try{up=ap.get(sp)}catch(mp){throw Recoil_err(`Problem with cache lookup for selector ${_d.key}: ${mp.message}`)}if(up!=null)return up;const cp=`${_d.key}__selectorFamily/${(lp=Recoil_stableStringify(sp,{allowFunctions:!0}))!==null&&lp!==void 0?lp:"void"}/${nextIndex++}`,dp=mp=>_d.get(sp)(mp),fp=_d.cachePolicy_UNSTABLE,pp=typeof _d.retainedBy_UNSTABLE=="function"?_d.retainedBy_UNSTABLE(sp):_d.retainedBy_UNSTABLE;let hp;if(_d.set!=null){const mp=_d.set;hp=Recoil_selector({key:cp,get:dp,set:(vp,xp)=>mp(sp)(vp,xp),cachePolicy_UNSTABLE:fp,dangerouslyAllowMutability:_d.dangerouslyAllowMutability,retainedBy_UNSTABLE:pp})}else hp=Recoil_selector({key:cp,get:dp,cachePolicy_UNSTABLE:fp,dangerouslyAllowMutability:_d.dangerouslyAllowMutability,retainedBy_UNSTABLE:pp});return ap.set(sp,hp),setConfigDeletionHandler$3(hp.key,()=>{ap.delete(sp)}),hp}}var Recoil_selectorFamily=selectorFamily;const constantSelector=Recoil_selectorFamily({key:"__constant",get:_d=>()=>_d,cachePolicyForParams_UNSTABLE:{equality:"reference"}});function constSelector(_d){return constantSelector(_d)}var Recoil_constSelector=constSelector;const throwingSelector=Recoil_selectorFamily({key:"__error",get:_d=>()=>{throw Recoil_err(_d)},cachePolicyForParams_UNSTABLE:{equality:"reference"}});function errorSelector(_d){return throwingSelector(_d)}var Recoil_errorSelector=errorSelector;function readOnlySelector(_d){return _d}var Recoil_readOnlySelector=readOnlySelector;const{loadableWithError:loadableWithError$3,loadableWithPromise:loadableWithPromise$3,loadableWithValue:loadableWithValue$4}=Recoil_Loadable$1;function concurrentRequests(_d,rp){const np=Array(rp.length).fill(void 0),ap=Array(rp.length).fill(void 0);for(const[sp,lp]of rp.entries())try{np[sp]=_d(lp)}catch(up){ap[sp]=up}return[np,ap]}function isError(_d){return _d!=null&&!Recoil_isPromise(_d)}function unwrapDependencies(_d){return Array.isArray(_d)?_d:Object.getOwnPropertyNames(_d).map(rp=>_d[rp])}function wrapResults(_d,rp){return Array.isArray(_d)?rp:Object.getOwnPropertyNames(_d).reduce((np,ap,sp)=>({...np,[ap]:rp[sp]}),{})}function wrapLoadables(_d,rp,np){const ap=np.map((sp,lp)=>sp==null?loadableWithValue$4(rp[lp]):Recoil_isPromise(sp)?loadableWithPromise$3(sp):loadableWithError$3(sp));return wrapResults(_d,ap)}function combineAsyncResultsWithSyncResults(_d,rp){return rp.map((np,ap)=>np===void 0?_d[ap]:np)}const waitForNone=Recoil_selectorFamily({key:"__waitForNone",get:_d=>({get:rp})=>{const np=unwrapDependencies(_d),[ap,sp]=concurrentRequests(rp,np);return wrapLoadables(_d,ap,sp)},dangerouslyAllowMutability:!0}),waitForAny=Recoil_selectorFamily({key:"__waitForAny",get:_d=>({get:rp})=>{const np=unwrapDependencies(_d),[ap,sp]=concurrentRequests(rp,np);return sp.some(lp=>!Recoil_isPromise(lp))?wrapLoadables(_d,ap,sp):new Promise(lp=>{for(const[up,cp]of sp.entries())Recoil_isPromise(cp)&&cp.then(dp=>{ap[up]=dp,sp[up]=void 0,lp(wrapLoadables(_d,ap,sp))}).catch(dp=>{sp[up]=dp,lp(wrapLoadables(_d,ap,sp))})})},dangerouslyAllowMutability:!0}),waitForAll=Recoil_selectorFamily({key:"__waitForAll",get:_d=>({get:rp})=>{const np=unwrapDependencies(_d),[ap,sp]=concurrentRequests(rp,np);if(sp.every(up=>up==null))return wrapResults(_d,ap);const lp=sp.find(isError);if(lp!=null)throw lp;return Promise.all(sp).then(up=>wrapResults(_d,combineAsyncResultsWithSyncResults(ap,up)))},dangerouslyAllowMutability:!0}),waitForAllSettled=Recoil_selectorFamily({key:"__waitForAllSettled",get:_d=>({get:rp})=>{const np=unwrapDependencies(_d),[ap,sp]=concurrentRequests(rp,np);return sp.every(lp=>!Recoil_isPromise(lp))?wrapLoadables(_d,ap,sp):Promise.all(sp.map((lp,up)=>Recoil_isPromise(lp)?lp.then(cp=>{ap[up]=cp,sp[up]=void 0}).catch(cp=>{ap[up]=void 0,sp[up]=cp}):null)).then(()=>wrapLoadables(_d,ap,sp))},dangerouslyAllowMutability:!0}),noWait=Recoil_selectorFamily({key:"__noWait",get:_d=>({get:rp})=>{try{return Recoil_selector.value(loadableWithValue$4(rp(_d)))}catch(np){return Recoil_selector.value(Recoil_isPromise(np)?loadableWithPromise$3(np):loadableWithError$3(np))}},dangerouslyAllowMutability:!0});var Recoil_WaitFor={waitForNone,waitForAny,waitForAll,waitForAllSettled,noWait};const{RecoilLoadable}=Recoil_Loadable$1,{DefaultValue:DefaultValue$3}=Recoil_Node,{RecoilRoot:RecoilRoot$2,useRecoilStoreID:useRecoilStoreID$1}=Recoil_RecoilRoot,{isRecoilValue:isRecoilValue$5}=Recoil_RecoilValue$1,{retentionZone:retentionZone$1}=Recoil_RetentionZone,{freshSnapshot:freshSnapshot$2}=Recoil_Snapshot$1,{useRecoilState:useRecoilState$1,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:useRecoilState_TRANSITION_SUPPORT_UNSTABLE$1,useRecoilStateLoadable:useRecoilStateLoadable$1,useRecoilValue:useRecoilValue$1,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:useRecoilValue_TRANSITION_SUPPORT_UNSTABLE$1,useRecoilValueLoadable:useRecoilValueLoadable$1,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE$1,useResetRecoilState:useResetRecoilState$1,useSetRecoilState:useSetRecoilState$1}=Recoil_Hooks,{useGotoRecoilSnapshot:useGotoRecoilSnapshot$1,useRecoilSnapshot:useRecoilSnapshot$1,useRecoilTransactionObserver:useRecoilTransactionObserver$1}=Recoil_SnapshotHooks,{useRecoilCallback:useRecoilCallback$1}=Recoil_useRecoilCallback,{noWait:noWait$1,waitForAll:waitForAll$1,waitForAllSettled:waitForAllSettled$1,waitForAny:waitForAny$1,waitForNone:waitForNone$1}=Recoil_WaitFor;var Recoil_index={DefaultValue:DefaultValue$3,isRecoilValue:isRecoilValue$5,RecoilLoadable,RecoilEnv:Recoil_RecoilEnv,RecoilRoot:RecoilRoot$2,useRecoilStoreID:useRecoilStoreID$1,useRecoilBridgeAcrossReactRoots_UNSTABLE:Recoil_useRecoilBridgeAcrossReactRoots,atom:Recoil_atom,selector:Recoil_selector,atomFamily:Recoil_atomFamily,selectorFamily:Recoil_selectorFamily,constSelector:Recoil_constSelector,errorSelector:Recoil_errorSelector,readOnlySelector:Recoil_readOnlySelector,noWait:noWait$1,waitForNone:waitForNone$1,waitForAny:waitForAny$1,waitForAll:waitForAll$1,waitForAllSettled:waitForAllSettled$1,useRecoilValue:useRecoilValue$1,useRecoilValueLoadable:useRecoilValueLoadable$1,useRecoilState:useRecoilState$1,useRecoilStateLoadable:useRecoilStateLoadable$1,useSetRecoilState:useSetRecoilState$1,useResetRecoilState:useResetRecoilState$1,useGetRecoilValueInfo_UNSTABLE:Recoil_useGetRecoilValueInfo,useRecoilRefresher_UNSTABLE:Recoil_useRecoilRefresher,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE$1,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:useRecoilValue_TRANSITION_SUPPORT_UNSTABLE$1,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:useRecoilState_TRANSITION_SUPPORT_UNSTABLE$1,useRecoilCallback:useRecoilCallback$1,useRecoilTransaction_UNSTABLE:Recoil_useRecoilTransaction,useGotoRecoilSnapshot:useGotoRecoilSnapshot$1,useRecoilSnapshot:useRecoilSnapshot$1,useRecoilTransactionObserver_UNSTABLE:useRecoilTransactionObserver$1,snapshot_UNSTABLE:freshSnapshot$2,useRetain:Recoil_useRetain,retentionZone:retentionZone$1},Recoil_index_5=Recoil_index.RecoilRoot,Recoil_index_8=Recoil_index.atom,Recoil_index_20=Recoil_index.useRecoilValue,Recoil_index_22=Recoil_index.useRecoilState,Recoil_index_24=Recoil_index.useSetRecoilState;const fishSpotListAtom=Recoil_index_8({key:"fishSpotListAtom",default:[]}),prevPathAtom=Recoil_index_8({key:"prevPathAtom",default:""}),activeMarkerAtom=Recoil_index_8({key:"activeMarkerAtom",default:null}),searchTermAtom=Recoil_index_8({key:"searchTermAtom",default:""}),centerChangeAtom=Recoil_index_8({key:"centerChangeAtom",default:!1}),searchModeAtom=Recoil_index_8({key:"searchModeAtom",default:"location"}),filterModeAtom=Recoil_index_8({key:"filterModeAtom",default:"dist"}),mapLevelAtom=Recoil_index_8({key:"mapLevelAtom",default:9}),mapCenterAtom=Recoil_index_8({key:"mapCenterAtom",default:{lat:0,lng:0}}),myCenterAtom=Recoil_index_8({key:"myCenterAtom",default:{center:{lat:0,lng:0},errMsg:null,isLoading:!1}});var CloseOutlined={},_interopRequireDefault$A=interopRequireDefaultExports;Object.defineProperty(CloseOutlined,"__esModule",{value:!0});var default_1$r=CloseOutlined.default=void 0,_createSvgIcon$r=_interopRequireDefault$A(requireCreateSvgIcon()),_jsxRuntime$r=jsxRuntimeExports;default_1$r=CloseOutlined.default=(0,_createSvgIcon$r.default)((0,_jsxRuntime$r.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"CloseOutlined");var FilterAltOutlined={},_interopRequireDefault$z=interopRequireDefaultExports;Object.defineProperty(FilterAltOutlined,"__esModule",{value:!0});var default_1$q=FilterAltOutlined.default=void 0,_createSvgIcon$q=_interopRequireDefault$z(requireCreateSvgIcon()),_jsxRuntime$q=jsxRuntimeExports;default_1$q=FilterAltOutlined.default=(0,_createSvgIcon$q.default)((0,_jsxRuntime$q.jsx)("path",{d:"M7 6h10l-5.01 6.3zm-2.75-.39C6.27 8.2 10 13 10 13v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-6s3.72-4.8 5.74-7.39c.51-.66.04-1.61-.79-1.61H5.04c-.83 0-1.3.95-.79 1.61"}),"FilterAltOutlined");const fetchRegion=async()=>{try{return(await axios.get("https://grpc-proxy-server-mkvo6j4wsq-du.a.run.app/v1/regcodes?regcode_pattern=*00000000")).data.regcodes.filter(rp=>rp.name!=="제주특별자치도")}catch(_d){console.log(_d)}},FishMapHeader=({hashTags:_d,mapRef:rp,getDistance:np})=>{const[ap,sp]=reactExports.useState([]),[lp,up]=reactExports.useState(!1),[cp,dp]=Recoil_index_22(searchModeAtom),[fp,pp]=Recoil_index_22(searchTermAtom),hp=Recoil_index_24(mapLevelAtom),mp=Recoil_index_24(centerChangeAtom),gp=Recoil_index_24(fishSpotListAtom),vp=Recoil_index_24(activeMarkerAtom),xp=Recoil_index_20(myCenterAtom),Sp=Rp=>{const $p=rp.current;$p&&($p.setLevel(13),$p.setCenter(new kakao.maps.LatLng(36.172823447489336,127.8675122717897)),hp(13),mp(!1),vp(null))},yp=async Rp=>{try{const Cp=(await axios.get("https://i10c203.p.ssafy.io/api/spots",{params:Rp})).data.spots.map(Ap=>{const Op=np(xp.center.lat,xp.center.lng,Ap==null?void 0:Ap.latitude,Ap==null?void 0:Ap.longitude);return{...Ap,dist:Op}});gp(Cp),Sp()}catch($p){console.log($p)}},bp=Rp=>{Rp.preventDefault();let $p={};cp==="location"||cp==="hash"?$p.keyword=Rp.type==="submit"?cp==="location"?fp:`#${fp}`:`#${Rp.target.value}`:$p.sido=Rp.target.value,yp($p)},Ep=Rp=>{dp(Rp.target.value),up(!1),pp("")},wp=async()=>{try{const Rp=await fetchRegion();sp(Rp)}catch{console.log(err)}},_p=reactExports.useMemo(()=>_d.map((Rp,$p)=>jsxRuntimeExports.jsxs("div",{className:"input-container",children:[jsxRuntimeExports.jsx("input",{id:`${Rp}`,className:"radio-button",type:"radio",name:"radio",checked:fp===Rp.substring(1),value:Rp.substring(1),onChange:Cp=>{pp(Cp.target.value),bp(Cp)}}),jsxRuntimeExports.jsx("div",{className:"radio-tile",children:jsxRuntimeExports.jsx("label",{htmlFor:`${Rp}`,className:"radio-tile-label",children:Rp})})]},$p)),[_d,fp]);return reactExports.useEffect(()=>{wp()},[]),jsxRuntimeExports.jsxs("div",{className:`FishMapHeader ${cp==="hash"&&"expand"}`,children:[jsxRuntimeExports.jsxs("div",{className:`wrapper ${cp==="hash"&&"expand"}`,children:[jsxRuntimeExports.jsxs("div",{className:"wrapper1",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",id:"toogle",className:"hidden-trigger",checked:lp,onChange:()=>up(!lp)}),jsxRuntimeExports.jsx("label",{htmlFor:"toogle",className:"circle",children:jsxRuntimeExports.jsx(default_1$q,{})}),jsxRuntimeExports.jsxs("div",{className:"subs",children:[jsxRuntimeExports.jsxs("button",{className:"sub-circle",children:[jsxRuntimeExports.jsx("input",{value:"location",name:"sub-circle",type:"radio",id:"sub1",className:"hidden-sub-trigger",onClick:Ep}),jsxRuntimeExports.jsx("label",{htmlFor:"sub1",children:"장소"})]}),jsxRuntimeExports.jsxs("button",{className:"sub-circle",children:[jsxRuntimeExports.jsx("input",{value:"region",name:"sub-circle",type:"radio",id:"sub2",className:"hidden-sub-trigger",onClick:Ep}),jsxRuntimeExports.jsx("label",{htmlFor:"sub2",children:"지역"})]}),jsxRuntimeExports.jsxs("button",{className:"sub-circle",children:[jsxRuntimeExports.jsx("input",{value:"hash",name:"sub-circle",type:"radio",id:"sub3",className:"hidden-sub-trigger",onClick:Ep}),jsxRuntimeExports.jsx("label",{htmlFor:"sub3",children:"해쉬태그"})]})]})]}),cp==="region"?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("select",{value:fp,onChange:Rp=>{bp(Rp),pp(Rp.target.value)},children:[jsxRuntimeExports.jsx("option",{value:"",disabled:!0,children:"지역선택"}),ap.map(Rp=>jsxRuntimeExports.jsx("option",{value:Rp.name,children:Rp.name},Rp.code))]})}):jsxRuntimeExports.jsx("form",{onSubmit:bp,children:jsxRuntimeExports.jsx("input",{type:"text",placeholder:cp==="location"?"장소 검색":"해시태그 검색",value:fp,onChange:Rp=>pp(Rp.target.value)})}),jsxRuntimeExports.jsx("div",{className:"search",onClick:()=>pp(""),children:fp&&jsxRuntimeExports.jsx(default_1$r,{})})]}),cp&&jsxRuntimeExports.jsx("div",{className:"hashTags",children:_p})]})},useIsomorphicLayoutEffect=typeof window<"u"&&typeof document<"u"?reactExports.useLayoutEffect:reactExports.useEffect,useKakaoEvent=(_d,rp,np)=>{useIsomorphicLayoutEffect(()=>{if(!_d||!np)return;const ap=function(){for(var sp=arguments.length,lp=new Array(sp),up=0;up<sp;up++)lp[up]=arguments[up];return lp===void 0?np(_d):np(_d,...lp)};return kakao.maps.event.addListener(_d,rp,ap),()=>{kakao.maps.event.removeListener(_d,rp,ap)}},[_d,rp,np])},SIGNATURE="__react-kakao-maps-sdk__";let LoaderStatus=function(_d){return _d[_d.INITIALIZED=0]="INITIALIZED",_d[_d.LOADING=1]="LOADING",_d[_d.SUCCESS=2]="SUCCESS",_d[_d.FAILURE=3]="FAILURE",_d}({});const DEFAULT_ID=`${SIGNATURE}_Loader`,Tm=class Tm{constructor(rp){Pm(this,"callbacks",[]);Pm(this,"done",!1);Pm(this,"loading",!1);Pm(this,"errors",[]);let{appkey:np,id:ap=DEFAULT_ID,libraries:sp=[],nonce:lp,retries:up=3,url:cp="//dapi.kakao.com/v2/maps/sdk.js"}=rp;if(this.id=ap,this.appkey=np,this.libraries=sp,this.nonce=lp,this.retries=up,this.url=cp,Tm.instance&&!Tm.equalOptions(this.options,Tm.instance.options)&&!Tm.equalOptions(this.options,Tm.instance.options))switch(Tm.instance.status){case LoaderStatus.FAILURE:throw new Error(`Loader must not be called again with different options. 
${JSON.stringify(this.options,null,2)}
!==
${JSON.stringify(Tm.instance.options,null,2)}`);default:Tm.instance.reset(),Tm.instance=this;break}return Tm.instance||(Tm.instance=this),Tm.instance}get options(){return{appkey:this.appkey,id:this.id,libraries:this.libraries,nonce:this.nonce,retries:this.retries,url:this.url}}static addLoadEventLisnter(rp){return window.kakao&&window.kakao.maps&&window.kakao.maps.load(rp),Tm.loadEventCallback.add(rp),rp}static removeLoadEventLisnter(rp){return Tm.loadEventCallback.delete(rp)}load(){return new Promise((rp,np)=>{this.loadCallback(ap=>{ap?np(ap):rp(window.kakao)})})}get status(){return this.onEvent?LoaderStatus.FAILURE:this.done?LoaderStatus.SUCCESS:this.loading?LoaderStatus.LOADING:LoaderStatus.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}loadCallback(rp){this.callbacks.push(rp),this.execute()}resetIfRetryingFailed(){this.failed&&this.reset()}reset(){this.deleteScript(),this.done=!0,this.loading=!1,this.errors=[],this.onEvent=void 0}execute(){if(this.resetIfRetryingFailed(),this.done)this.callback();else{if(window.kakao&&window.kakao.maps){console.warn("Kakao Maps이 이미 외부 요소에 의해 로딩되어 있습니다.설정한 옵션과 일치 하지 않을 수 있으며, 이에 따른 예상치 동작이 발생할 수 있습니다."),window.kakao.maps.load(this.callback);return}this.loading||(this.loading=!0,this.setScript())}}setScript(){document.getElementById(this.id)&&this.callback();const rp=this.createUrl(),np=document.createElement("script");np.id=this.id,np.type="text/javascript",np.src=rp,np.onerror=this.loadErrorCallback.bind(this),np.onload=this.callback.bind(this),np.defer=!0,np.async=!0,this.nonce&&(np.nonce=this.nonce),document.head.appendChild(np)}loadErrorCallback(rp){if(this.errors.push(rp),this.errors.length<=this.retries){const np=this.errors.length*2**this.errors.length;console.log(`Failed to load Kakao Maps script, retrying in ${np} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},np)}else this.done=!0,this.loading=!1,this.onEvent=this.errors[this.errors.length-1],this.callbacks.forEach(np=>{np(this.onEvent)}),this.callbacks=[],Tm.loadEventCallback.forEach(np=>{np(this.onEvent)})}createUrl(){let rp=this.url;return rp+=`?appkey=${this.appkey}`,this.libraries.length&&(rp+=`&libraries=${this.libraries.join(",")}`),rp+="&autoload=false",rp}deleteScript(){const rp=document.getElementById(this.id);rp&&rp.remove()}callback(){kakao.maps.load(()=>{Tm.instance.done=!0,Tm.instance.loading=!1,Tm.instance.callbacks.forEach(rp=>{rp(Tm.instance.onEvent)}),Tm.instance.callbacks=[],Tm.loadEventCallback.forEach(rp=>{rp(Tm.instance.onEvent)})})}static equalOptions(rp,np){if(rp.appkey!==np.appkey||rp.id!==np.id||rp.libraries.length!==np.libraries.length)return!1;for(let ap=0;ap<rp.libraries.length;++ap)if(rp.libraries[ap]!==np.libraries[ap])return!1;return!(rp.nonce!==np.nonce||rp.retries!==np.retries||rp.url!==np.url)}};Pm(Tm,"loadEventCallback",new Set);let Loader=Tm;const useKakaoMapsSetEffect=function(_d,rp){for(var np=arguments.length,ap=new Array(np>2?np-2:0),sp=2;sp<np;sp++)ap[sp-2]=arguments[sp];useIsomorphicLayoutEffect(()=>{!_d||ap.every(lp=>typeof lp>"u")||_d[rp].call(_d,...ap)},[_d,rp,...ap])},KakaoMapContext=React.createContext(void 0),Map$1=React.forwardRef(function _d(rp,np){let{id:ap,as:sp,children:lp,center:up,isPanto:cp=!1,padding:dp=32,disableDoubleClick:fp,disableDoubleClickZoom:pp,draggable:hp,zoomable:mp,keyboardShortcuts:gp,level:vp,maxLevel:xp,minLevel:Sp,mapTypeId:yp,projectionId:bp,scrollwheel:Ep,tileAnimation:wp,onBoundsChanged:_p,onCenterChanged:Rp,onClick:$p,onDoubleClick:Cp,onDrag:Ap,onDragEnd:Op,onDragStart:Lp,onIdle:Mp,onMaptypeidChanged:kp,onMouseMove:Dp,onRightClick:Fp,onTileLoaded:Ip,onZoomChanged:Pp,onZoomStart:Tp,onCreate:Np,...jp}=rp;const Vp=sp||"div",[zp,Wp]=reactExports.useState(!1),[Up,qp]=reactExports.useState(),Bp=reactExports.useRef(null);return useIsomorphicLayoutEffect(()=>{const Yp=Loader.addLoadEventLisnter(Xp=>Wp(!Xp));return()=>{Loader.removeLoadEventLisnter(Yp)}},[]),useIsomorphicLayoutEffect(()=>{if(!zp)return;const Yp=Bp.current;if(!Yp)return;const Xp="lat"in up?new kakao.maps.LatLng(up.lat,up.lng):new kakao.maps.Coords(up.x,up.y),Qp=new kakao.maps.Map(Yp,{center:Xp,disableDoubleClick:fp,disableDoubleClickZoom:pp,draggable:hp,keyboardShortcuts:gp,level:vp,mapTypeId:typeof yp=="string"?kakao.maps.MapTypeId[yp]:yp,projectionId:bp,scrollwheel:Ep,tileAnimation:wp});return qp(Qp),()=>{Yp.innerHTML=""}},[zp,fp,pp,wp]),reactExports.useImperativeHandle(np,()=>Up,[Up]),useIsomorphicLayoutEffect(()=>{!Up||!Np||Np(Up)},[Up,Np]),useIsomorphicLayoutEffect(()=>{if(!Up)return;let Yp=Up.getCenter();Yp instanceof kakao.maps.Coords&&(Yp=Yp.toLatLng());const Xp="lat"in up?new kakao.maps.LatLng(up.lat,up.lng):new kakao.maps.Coords(up.x,up.y);Xp instanceof kakao.maps.LatLng&&Xp.equals(Yp)||Xp instanceof kakao.maps.Coords&&Xp.toLatLng().equals(Yp)||(cp?Up.panTo(Xp,dp):Up.setCenter(Xp))},[Up,up.lat,up.lng,up.x,up.y]),useKakaoMapsSetEffect(Up,"setDraggable",hp),useKakaoMapsSetEffect(Up,"setZoomable",mp),useKakaoMapsSetEffect(Up,"setKeyboardShortcuts",gp),useKakaoMapsSetEffect(Up,"setLevel",vp),useKakaoMapsSetEffect(Up,"setMapTypeId",zp?typeof yp=="string"?kakao.maps.MapTypeId[yp]:yp:void 0),useKakaoMapsSetEffect(Up,"setProjectionId",bp),useKakaoMapsSetEffect(Up,"setMinLevel",xp),useKakaoMapsSetEffect(Up,"setMaxLevel",Sp),useKakaoEvent(Up,"bounds_changed",_p),useKakaoEvent(Up,"center_changed",Rp),useKakaoEvent(Up,"click",$p),useKakaoEvent(Up,"dblclick",Cp),useKakaoEvent(Up,"drag",Ap),useKakaoEvent(Up,"dragstart",Lp),useKakaoEvent(Up,"dragend",Op),useKakaoEvent(Up,"idle",Mp),useKakaoEvent(Up,"maptypeid_changed",kp),useKakaoEvent(Up,"mousemove",Dp),useKakaoEvent(Up,"rightclick",Fp),useKakaoEvent(Up,"tilesloaded",Ip),useKakaoEvent(Up,"zoom_changed",Pp),useKakaoEvent(Up,"zoom_start",Tp),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Vp,{id:ap||`${SIGNATURE}_Map`,...jp,ref:Bp}),Up&&jsxRuntimeExports.jsx(KakaoMapContext.Provider,{value:Up,children:lp})]})}),useMap=_d=>{const rp=reactExports.useContext(KakaoMapContext);if(!rp)throw new Error(`${_d?_d+" Component":"useMap"} must exist inside Map Component!`);return rp},InfoWindow=React.forwardRef(function _d(rp,np){let{map:ap,position:sp,marker:lp,children:up,altitude:cp,disableAutoPan:dp,range:fp,removable:pp,zIndex:hp,onCreate:mp}=rp;const gp=reactExports.useRef(document.createElement("div")),vp=reactExports.useMemo(()=>{const xp=new kakao.maps.InfoWindow({altitude:cp,disableAutoPan:dp,range:fp,removable:pp,zIndex:hp,content:gp.current,position:sp});return gp.current.style.display="none",xp},[dp,pp]);return reactExports.useImperativeHandle(np,()=>vp,[vp]),reactExports.useLayoutEffect(()=>(vp.open(ap,lp),()=>{vp.close()}),[ap,lp]),reactExports.useLayoutEffect(()=>{mp&&mp(vp)},[vp,mp]),useKakaoMapsSetEffect(vp,"setPosition",sp),useKakaoMapsSetEffect(vp,"setAltitude",cp),useKakaoMapsSetEffect(vp,"setRange",fp),useKakaoMapsSetEffect(vp,"setZIndex",hp),gp.current.parentElement&&ReactDOM.createPortal(up,gp.current.parentElement)}),KakaoMapMarkerClustererContext=React.createContext(void 0),MarkerClusterer=React.forwardRef(function _d(rp,np){let{onClusterclick:ap,onClusterdblclick:sp,onClustered:lp,onClusterout:up,onClusterover:cp,onClusterrightclick:dp,onCreate:fp,...pp}=rp;const{children:hp,averageCenter:mp,calculator:gp,clickable:vp,disableClickZoom:xp,gridSize:Sp,hoverable:yp,minClusterSize:bp,minLevel:Ep,styles:wp,texts:_p}=pp,Rp=useMap("MarkerClusterer"),$p=reactExports.useMemo(()=>{if(!window.kakao.maps.MarkerClusterer){console.warn("clusterer 라이브러리를 별도 로드 해야 사용 가능합니다. `https://apis.map.kakao.com/web/guide/#loadlibrary`");return}return new kakao.maps.MarkerClusterer({averageCenter:mp,calculator:gp,clickable:vp,disableClickZoom:xp,gridSize:Sp,hoverable:yp,minClusterSize:bp,minLevel:Ep,styles:wp,texts:_p})},[]);return reactExports.useImperativeHandle(np,()=>$p,[$p]),reactExports.useLayoutEffect(()=>{if($p)return $p.setMap(Rp),()=>{$p.setMap(null)}},[Rp,$p]),reactExports.useLayoutEffect(()=>{$p&&fp&&fp($p)},[$p,fp]),useKakaoMapsSetEffect($p,"setGridSize",Sp),useKakaoMapsSetEffect($p,"setMinClusterSize",bp),useKakaoMapsSetEffect($p,"setAverageCenter",mp),useKakaoMapsSetEffect($p,"setAverageCenter",mp),useKakaoMapsSetEffect($p,"setMinLevel",Ep),useKakaoMapsSetEffect($p,"setTexts",_p),useKakaoMapsSetEffect($p,"setCalculator",gp),useKakaoMapsSetEffect($p,"setStyles",wp),useKakaoEvent($p,"clustered",lp),useKakaoEvent($p,"clusterclick",ap),useKakaoEvent($p,"clusterover",cp),useKakaoEvent($p,"clusterout",up),useKakaoEvent($p,"clusterdblclick",sp),useKakaoEvent($p,"clusterrightclick",dp),$p?jsxRuntimeExports.jsxs(KakaoMapMarkerClustererContext.Provider,{value:$p,children:[hp,jsxRuntimeExports.jsx(MarkerClustererRedraw,{...pp})]}):null}),MarkerClustererRedraw=()=>{const _d=reactExports.useContext(KakaoMapMarkerClustererContext);return useIsomorphicLayoutEffect(()=>{_d.redraw()}),null},Marker=React.forwardRef(function _d(rp,np){let{map:ap,position:sp,children:lp,altitude:up,clickable:cp,draggable:dp,image:fp,infoWindowOptions:pp,onCreate:hp,onClick:mp,onDragEnd:gp,onDragStart:vp,onMouseOut:xp,onMouseOver:Sp,opacity:yp,range:bp,title:Ep,zIndex:wp}=rp;const _p=reactExports.useContext(KakaoMapMarkerClustererContext),Rp=reactExports.useMemo(()=>{var Cp,Ap,Op,Lp,Mp,kp,Dp,Fp,Ip,Pp,Tp,Np;return fp&&new kakao.maps.MarkerImage(fp.src,new kakao.maps.Size(fp.size.width,fp.size.height),{alt:(Cp=fp.options)==null?void 0:Cp.alt,coords:(Ap=fp.options)==null?void 0:Ap.coords,offset:((Op=fp.options)==null?void 0:Op.offset)&&new kakao.maps.Point((Lp=fp.options)==null?void 0:Lp.offset.x,(Mp=fp.options)==null?void 0:Mp.offset.y),shape:(kp=fp.options)==null?void 0:kp.shape,spriteOrigin:((Dp=fp.options)==null?void 0:Dp.spriteOrigin)&&new kakao.maps.Point((Fp=fp.options)==null?void 0:Fp.spriteOrigin.x,(Ip=fp.options)==null?void 0:Ip.spriteOrigin.y),spriteSize:((Pp=fp.options)==null?void 0:Pp.spriteSize)&&new kakao.maps.Size((Tp=fp.options)==null?void 0:Tp.spriteSize.width,(Np=fp.options)==null?void 0:Np.spriteSize.height)})},[JSON.stringify(fp)]),$p=reactExports.useMemo(()=>new kakao.maps.Marker({altitude:up,clickable:cp,draggable:dp,image:Rp,opacity:yp,range:bp,title:Ep,zIndex:wp,position:sp}),[]);return reactExports.useImperativeHandle(np,()=>$p,[$p]),reactExports.useLayoutEffect(()=>_p?(_p.addMarker($p,!0),()=>_p.removeMarker($p,!0)):($p.setMap(ap),()=>$p.setMap(null)),[ap,_p,$p]),reactExports.useLayoutEffect(()=>{hp&&hp($p)},[$p,hp]),useKakaoMapsSetEffect($p,"setPosition",sp),useKakaoMapsSetEffect($p,"setImage",Rp),useKakaoMapsSetEffect($p,"setAltitude",up),useKakaoMapsSetEffect($p,"setClickable",cp),useKakaoMapsSetEffect($p,"setDraggable",dp),useKakaoMapsSetEffect($p,"setOpacity",yp),useKakaoMapsSetEffect($p,"setRange",bp),useKakaoMapsSetEffect($p,"setRange",bp),useKakaoMapsSetEffect($p,"setTitle",Ep),useKakaoMapsSetEffect($p,"setTitle",Ep),useKakaoMapsSetEffect($p,"setZIndex",wp),useKakaoEvent($p,"click",mp),useKakaoEvent($p,"dragstart",vp),useKakaoEvent($p,"dragend",gp),useKakaoEvent($p,"mouseout",xp),useKakaoEvent($p,"mouseover",Sp),lp?jsxRuntimeExports.jsx(InfoWindow,{position:sp,map:ap,marker:$p,altitude:pp==null?void 0:pp.altitude,disableAutoPan:pp==null?void 0:pp.disableAutoPan,range:pp==null?void 0:pp.range,removable:pp==null?void 0:pp.removable,zIndex:pp==null?void 0:pp.zIndex,children:lp}):null}),MapMarker=React.forwardRef(function _d(rp,np){let{position:ap,...sp}=rp;const lp=useMap("MapMarker"),up=reactExports.useMemo(()=>"lat"in ap?new kakao.maps.LatLng(ap.lat,ap.lng):new kakao.maps.Coords(ap.x,ap.y).toLatLng(),[ap.lat,ap.lng,ap.x,ap.y]);return jsxRuntimeExports.jsx(Marker,{map:lp,position:up,...sp,ref:np})}),MarkerOff="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAsCAYAAAAEuLqPAAAAAXNSR0IArs4c6QAABM1JREFUWAm9WEtsG1UUvW88duJgmhQFpXXSqiBQEbBl0x1rJJDYgZBYIqiEKoEq0fKJQCoLWreAVInuSysQlZAQO4TEbwFbhKjUT5oQx2md2IntePx9nPNmbE8Sf8ZO7CvZ8/zeveecd+e9+8ajJKh9pcPy78rzIvol0fppUSouWuKi8C2ygr4k+v4RUd/LU4d/ljdUJQi06ul0ZnVGitUPQfMayA/09KeDkg18XZWo/bGcm1ntFtNZwBd6TBaS70ld3gFxjCDRsYhMxcbl4eiYhMOWhEMhg12p1aRSqUuuWJJs3pFiqexxqrxYckGOxT+Vt1XJ69x2aS/AnfUNpPUEvadiUZmdPiDjEXtbcKcfTrkqy+lNiCm6Lkr9gWy83C4buwW8m3pWarUfQX4kYtvy2OGDEotGOnF17c8Xy3J3JSPlahV+alHs0Aty/tDf/qDtAtyZ/0XyGNL8ePwRpNny+/fdrtTqcie5LnncHizSJWTiOX8mWujzOoLFxrQb8ifnpvdMTrWcALE4IWIbDnJ51hKwmTwDhxNMO2dubc9Nw3+gK7GISWxyCLk8c2mY+q3qLa7240ceHfieN0A7Xbkmbi49wDB2x4T9BG+FmwGn+gHJudoHXXCdSP39xCYHucRwCnYpK5zWKDJitpo/YBhtbmdj5AS3ZcqrlkkWmaD7fC/CyEEuVNZJclui9IsEZIUblTW5wG1JXT9DYpbXUVmTC9zIAE41WNhu7chhC2lygdsyR6oR4B4swyYnftj2uHCcc9pm6pqn+ohMt8gskqfJ61R4YIzGnEqtQZTmLjCnUwlH6KisyQVuZMD6lcQbBe/sHoGKJpdSv0BA6BvUZp3JO7pcrQ+dnhzkIqdo+1tLLs7cwTPcTyjH6kG2MHQBhgNchhPcZgdgK86T+X42r51yc4Hsuxhik8MAe5yugEuzv6MgXa/X62ohlYGe/TdiLqTWhRzkEnLCXAFsTU68iYF7BackqbUce/bViFlw8LQMDsPlobcEzB/M4jEIx7KqJddyOr2xtW8CiEVMYhsOcu0SwI4L8d/E0qdxVqp797N6bXPvW5MYxCKmwSaHz1oZaHQm5hKirLPcFVgPOpNzGiN9XxlLDGIZTGLvsN0C6HAxfg736iOqJkCpVTp3hHf+yRhDzpkTi5htrPuz76nlryHilYfGx+T40Wls3WDGFX9zMY1Fx39j6hpW/KudIttnoOE9NfEW1C+ZnbEefGek4GvI+UeEGF2suwCuVmW9jlnoZDqnt5ze/7jpQ1/GmFjfim+no7sARiTwX1/051wPWM1YT+1g3D6O0Ye+JsbEdvbnSG8B9LLt9zGjxS0Ukm7nBcfoQ183hsHdLZiA84cK2MMnCbW8ttn21OQpxzFDR1/GBLBgAgiUmPsB3zdYy5fTeAGyw9hn6jx8PN8dHu1/BhfA+HAYVVIq67miLvqeoNhmH8c8H3oHsv4EfDZzG7X8CitbEm9AGmbarHYco08f1p8AAo/bn6A2FPj6pYAtx495FYM+M9YHOV37F+C+9brM4NVM3nzYhl32v/lwu3p/9y+AmEq+RBaqmXwRz5K492ibvt58uzwGE5CYXcJj03fmlOO9Z5t9A9hgAkhkhS41+fztZucoGqf++1P42YP9D7SQLhmdOHqxAAAAAElFTkSuQmCC",MarkerOn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAABUCAYAAADeW1RFAAAAAXNSR0IArs4c6QAAC/NJREFUeAHlXG2IXFcZfs+987Hf2XztzoSE1kYMoiCYUD/jB/ijsQWlhZTml9IfahURbfRHSb1NMGKigiLY/tFYJJIIFbXVgoFEqdWEtBJQamtC0mbJJrshO7OzMzuzM/cen+fMnO3sx0zm497Nrr4we+89533f8zz3fL3n3HtXSUSy09N9k8HER0T0Li16hxbZoURSWutBpWSQxWotOaVUDnnXkfe6EvW6iDq/2Rn56yueKkQBDeWEJ9u96yNlX/ZpFTwIrx8AoUQn3nFD5mB3Vmnnubgrxy95qYlO/CxnEwrhbd61j2lf7Rcl96HaYtWClI4n4iqeSEjMjYkbc8V1XXGUg0qsFYs7EuhAfN8Xv+JLxa9IeW4OvzIqXVeVlKqIlheVq49e9bb8ZTkS7aR1Rfhub/wTfqAPAfdHLclkT1L19vZKIpkEr87co9nLXKkks7OzUiqW5snD3Uuuow5c8dJn2iFZr9sRoru9iZTvV34AJPvoDMR0X3+/6u8fEOV05LIe04JzHWjJ52ekkM/jPlRrHSUcd93YN654I9cXKLdw0Ta6u54c3xOIPo5KGAZVjdpU/UOD4jpoqhGKHwSSn86x1k2No7Yzjqh9bx5M/7GdYtsivO3Ata9rpY6inzqJZI8MgmgsVuuy7ZTahW6lUpEciM+VimxagdJ6/9VDW37YqsuWCL/H04lp//ozmF4+x1odGBxQ/QMDrZYRiV5+ZkZmcjPV2hZ1bMhNfeFfnuLo3lRuS/hd3vSmQjDzW4yUH1bK0euGhxUGpqZOVyoTA5pkMxl07QBTuLzc5wx85g1v6Gaz8psSZs1mg/HTJItBQobXr5dYfGWbcDPwzKuUK5KZmsLUVkHjk5fXOelPNqvppiMNm7Elu2HTxlVHloRZAcTGCiFWg5kZDaQhYTNAoc+yGbNmnYhH4Qb4WkomNmIkVo4zxN7IcNkmvdW7dp/46nkYOXC0avpsIxI2nX0azRsDmQTi6gfGvC0v2jx7XELYBBVB5TXOswODg3KnR2MLtNVjdfTOobYl4zqxdy8OTpY0aRNBgWwS8+xaI8ubQszEzgojl8U3agHhrQfGP27CRYSKAwgq1qoY7OBALuRUz2MBYegcYmZvT69a6QiqHlS358RODvRjOVmf84TNEk/Lbi4E2HfXupADuaCad287MLHb8pknLIF6nIlc9Tju28lWca0dyaEXXAxu5e+3+A0z7lSgve9hnMwl3v+KDBgupi/vIUfyMnFiOZBHuFPB0S3s9ay9ebpclAA/7ZdRVGCSESiIcuPixFEufmELuSSTSVUqFWPlQD0C/z8yNYzohHtQ0tvXG3aZIFmSSm5SKoUpnM+KDhDzkjB+PGca86hD3bDFcrIcFXcXJ4LxKWwmxEdSo+jnS2KRjjH4xZwEpRlj/87NcXnwfX3yoXckJD3kmrTxaV/+dnlOnrtQkIuTZZPmJAfE7Qlv0OSoNXH9BpbxujzipNfHuJWKtAQ23DiqdUxusaElG0Oz+uanhmTv+/uwmFko92yMCX/7dvXJyVcLcuTUtFRqNygs0uTEzURsDibI1UGH2kkY8XhHO6oLGdSu2DRZsyT704c3yMPLkK035I2gDnVpQ9swm/c8N3B10LZ3sPAwA42gOG34sGbvvav1G0ld2lCsD3PR5R/LjVwd7AMawtw3DkM4GnMwYp9lM25XaENb+qCvMMRyI1c0IEnTKTfJwxBOPRQOUIv7bCv+aUNbivVlLrr4Y7mRK1bM2gyJ5olAF06tKedZCkfjTsXaWl+d+rF2lhu5OhjEqnNASCO0DSrs1GMLbedoba2vdmyX1a1xI1cMWoJI4P9DyJWRltnWDLCzH4YwXKQwqOhUrK311akfa1fH7aajtEwyI6zmw9iYwgiqU7G21lenfqyd5UauaNJqnBk+HmGEIVwIUBguogm1LbShLcX6Mhdd/JnnptQ1TEv6LH2Vy9XRtQu/xpSrHuXETGzMcLFdoQ3javoIawU1z03rc47rqpcIam4uHML05fRUoyXGxufebL1pU5c29T7MRZd/LDdydSpDqbN4MIObMIem3kkjXIrGiSeFq54K/H3pxC05gVpr5pl51KEubWhLH2EIOZEbOVa5wuvWJ8efx6h1/9DwsPDpfVhiV0z0d6eWh3yLYDqT4W7eC2MH0w+YHQ9MJL/ApHR/EZlhEuYST7kJsxBgvzxyKtvwXrLPsiuEVbO2IHKi4GnMMR4N4cSm1O9Kk+NTeK9iPZ/GhfmE0DTv+GazEFjpLR5y4bsiiKGnEhtSvydhEyVc/Koq4fWanzOhgAfNUQhHXLdvWGKDmyU+NGp+PGdaWKPxYtzzXJT6meEIhWpYhJNYwjmCOzE7Wypqvka01oUcyIWcYknnqOUzT/jyE6M3MPk9jcFL5bLVqcEqrcWj4cC3fsDJcKuRmCfM61hSfQ/DWQ7bmpiXW58/V9sNIXZyIJcqp7cRLiDMO4HdvW8zm3eIT6PWmhCzbaHkUl+75LKAMBM++N70j3G4UKmUJZ/LMWlNCTETO+RCjcsC/EsI/3qv8mOu80U0Bz9fyGu897jAYDVfECsxEzs5kMtivEsIU+GKl/o7dgcOcwDLZjM4rP62TYzESszETg6LyfJ6WcLM2O6kDiIcO8ulVXYKjla5EKNZBgKzwd4AL6apxrLt0I3tUvbP4+YNDw4OSd9Af2PlO5hTmMlLLjeN+pGMxN1dVw+MXmoEp2EN04CGSty97BO5XE7PlVbfVEVMxEaMxNqMLDk1JUyFtw6O/gmHr6FzqEx2SvPlztUixEJMxEaMNaxN4d2WMK3HDqV/gg21Z7QfqMzULR344Wz4NUV2m0xiIBZiIjZivI2JyW6JMDW3O6NfQSc5jVf1VSYzdUeDEk4a5v1KYCEmg60VttBpOmgt9rHVy25QfuEcHkpt7+ntk3XD6xarrMh1NpOV4mwB4NUl7fbdO+atu9VqwS3XMB0ax676LO5TngUW8u1v0rUKrJEey2TZxCDA0g5Z+myLMA2ueql/otM8yvPc9LS2G2S8jlpYFstkOcRALO2W2TZhFnD1YOoEXhjBa/eIxDJTGDeiH8RYBstimSybGNolS/2OCNNwu0p9C/f5TOD7KosXtKOMPuk7ewsvxaAsllktmyjal7YGrcXu+e5TKQhewR7sVrzQho8+qvvRi/W6vUYz5mc84CpjScfZ2c2Xah3XMEmYgh31EEK6OQwmkaysuAKib5aBfbeHuiFLzF0RpoMxL31OtPMU+9Z0tvE2LHU7kapPRFIow5TViZM6m64J09eQO/p9NLd/m00DBPJhSR6+zGIevk0ZITgOhTC/InFFPUY8+ZlcKLue3HWkL/qk72ZfqlCnVQmFMAvDJ3Gn0UN+iYU4dj27b9r0QV/0WfXdKqXmeqERZjHxHvU416Ql7PYXZzt/5Yi29EFf9NmcQnu5oRI2O4RaPUEIM7npjnaGOOfS1tCAr8W7ju3RW6odKmG6f9RNPY2w7zz6oJottB9r04a29EFfSyF3l9JV4NGoaH5y62v9Bzxtl02bR9g0WxLW7s3JCUZUWBeoT7f7qWwrhYRewyyUQEHyVQKvrmxagSJGlzaQf0RBlo4jIVxzfJhHzqVNH/9TiYLaNbo4dZV8x6RF8CcywleeSj+HBfpr/Opztlh9KN0MP3WoS5vPO+nfNNPtJi8ywhh0+Bb6dwkun7v9M2erQxvPU5GtNyMjTKL3OOlfocYus+aKxcbzMufdWu1epg1to5JICZ/x8D84RB8h+GbbQYX56UsfqdpERTfCQctCHnHTz2Ihm8M3B8vG2IyZmUedqq61jOYYaQ0TMv+nDvrlSdS0KhaWDl7VND4A0yej+v879bcucsIsDK8kHeNxlruN1aCRl+bcpOHU6pj0CP+sCOG3vBG+3vgfNt/6Vyl4zjTm1XQipFp1vSKEWZQS5xiPtkbrz20e06KWFSOcdOPPIqgOSsWiDvD+I388Z5rJi5ppzf+KEb7obRzDd56nuKifLeSFP54zjXkrxDe6WHo5AqjOw6zRGbx4wh/PTdpyyhGlrVgNEz8eaf4ZNfpldOg3+MN3gI8xLSJuy7r9LyKqpzm0iOL3AAAAAElFTkSuQmCC";function FaCheck(_d){return GenIcon({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"},child:[]}]})(_d)}function FaShareSquare(_d){return GenIcon({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M568.482 177.448L424.479 313.433C409.3 327.768 384 317.14 384 295.985v-71.963c-144.575.97-205.566 35.113-164.775 171.353 4.483 14.973-12.846 26.567-25.006 17.33C155.252 383.105 120 326.488 120 269.339c0-143.937 117.599-172.5 264-173.312V24.012c0-21.174 25.317-31.768 40.479-17.448l144.003 135.988c10.02 9.463 10.028 25.425 0 34.896zM384 379.128V448H64V128h50.916a11.99 11.99 0 0 0 8.648-3.693c14.953-15.568 32.237-27.89 51.014-37.676C185.708 80.83 181.584 64 169.033 64H48C21.49 64 0 85.49 0 112v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48v-88.806c0-8.288-8.197-14.066-16.011-11.302a71.83 71.83 0 0 1-34.189 3.377c-7.27-1.046-13.8 4.514-13.8 11.859z"},child:[]}]})(_d)}var Call={},_interopRequireDefault$y=interopRequireDefaultExports;Object.defineProperty(Call,"__esModule",{value:!0});var default_1$p=Call.default=void 0,_createSvgIcon$p=_interopRequireDefault$y(requireCreateSvgIcon()),_jsxRuntime$p=jsxRuntimeExports;default_1$p=Call.default=(0,_createSvgIcon$p.default)((0,_jsxRuntime$p.jsx)("path",{d:"M20.01 15.38c-1.23 0-2.42-.2-3.53-.56-.35-.12-.74-.03-1.01.24l-1.57 1.97c-2.83-1.35-5.48-3.9-6.89-6.83l1.95-1.66c.27-.28.35-.67.24-1.02-.37-1.11-.56-2.3-.56-3.53 0-.54-.45-.99-.99-.99H4.19C3.65 3 3 3.24 3 3.99 3 13.28 10.73 21 20.01 21c.71 0 .99-.63.99-1.18v-3.45c0-.54-.45-.99-.99-.99"}),"Call");const EventMarker=({value:_d,isActive:rp,onClick:np,getDistance:ap})=>{const sp=Recoil_index_20(myCenterAtom),lp=Recoil_index_24(mapCenterAtom),up=Recoil_index_24(mapLevelAtom),cp=useMap(),dp=useNavigate(),fp=mp=>{cp.panTo(mp.getPosition()),np()},pp=reactExports.useMemo(()=>ap(sp.center.lat,sp.center.lng,_d.latitude,_d.longitude),[sp,_d]),hp=()=>{const mp=cp.getCenter();lp({lat:mp.getLat(),lng:mp.getLng()}),up(cp.getLevel()),dp(`/fish/map/${_d.spotId}`)};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(MapMarker,{position:{lat:_d.latitude,lng:_d.longitude},onClick:fp,image:rp?{src:MarkerOn,size:{width:28,height:40}}:{src:MarkerOff,size:{width:18,height:25}}}),rp&&jsxRuntimeExports.jsxs("div",{className:"info",children:[jsxRuntimeExports.jsxs("div",{className:"info_header",children:[jsxRuntimeExports.jsx("div",{className:"info_name",onClick:hp,children:_d.name}),jsxRuntimeExports.jsx("div",{className:"info_type",children:_d.spotType})]}),jsxRuntimeExports.jsxs("div",{className:"info_body",children:[jsxRuntimeExports.jsx("div",{className:"info_distance",children:pp>=1?`${pp.toFixed(1)}km`:`${(pp/1e3).toFixed()}`}),jsxRuntimeExports.jsx("div",{className:"info_addr",children:_d.streetAddress})]}),jsxRuntimeExports.jsxs("div",{className:"info_footer",children:[jsxRuntimeExports.jsx("hr",{}),jsxRuntimeExports.jsxs("div",{className:"info_icons",children:[_d.spotPhone&&jsxRuntimeExports.jsx("a",{href:`tel:${_d.spotPhone}`,children:jsxRuntimeExports.jsx(default_1$p,{})}),jsxRuntimeExports.jsx(FaShareSquare,{})]})]})]})]})};var GpsFixed={},_interopRequireDefault$x=interopRequireDefaultExports;Object.defineProperty(GpsFixed,"__esModule",{value:!0});var default_1$o=GpsFixed.default=void 0,_createSvgIcon$o=_interopRequireDefault$x(requireCreateSvgIcon()),_jsxRuntime$o=jsxRuntimeExports;default_1$o=GpsFixed.default=(0,_createSvgIcon$o.default)((0,_jsxRuntime$o.jsx)("path",{d:"M12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4m8.94 3c-.46-4.17-3.77-7.48-7.94-7.94V1h-2v2.06C6.83 3.52 3.52 6.83 3.06 11H1v2h2.06c.46 4.17 3.77 7.48 7.94 7.94V23h2v-2.06c4.17-.46 7.48-3.77 7.94-7.94H23v-2zM12 19c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7"}),"GpsFixed");var RefreshOutlined={},_interopRequireDefault$w=interopRequireDefaultExports;Object.defineProperty(RefreshOutlined,"__esModule",{value:!0});var default_1$n=RefreshOutlined.default=void 0,_createSvgIcon$n=_interopRequireDefault$w(requireCreateSvgIcon()),_jsxRuntime$n=jsxRuntimeExports;default_1$n=RefreshOutlined.default=(0,_createSvgIcon$n.default)((0,_jsxRuntime$n.jsx)("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4z"}),"RefreshOutlined");const FishMapBody=({mapRef:_d,getDistance:rp,openList:np})=>{const[ap,sp]=Recoil_index_22(centerChangeAtom),[lp,up]=Recoil_index_22(activeMarkerAtom),[cp,dp]=Recoil_index_22(myCenterAtom),[fp,pp]=Recoil_index_22(mapCenterAtom),[hp,mp]=Recoil_index_22(fishSpotListAtom),gp=Recoil_index_20(mapLevelAtom),vp=Recoil_index_24(filterModeAtom),xp=async()=>{const yp=_d.current;if(!yp)return;const bp=yp.getCenter();try{const wp=(await axios.get("https://i10c203.p.ssafy.io/api/spots",{params:{latitude:bp.getLat(),longitude:bp.getLng()}})).data.spots.map(_p=>{const Rp=rp(bp.getLat(),bp.getLng(),_p==null?void 0:_p.latitude,_p==null?void 0:_p.longitude);return Rp<=20?{..._p,dist:Rp}:null}).filter(Boolean);mp(wp),yp.setCenter(bp),sp(!1),up(null),vp("dist"),pp({lat:bp.getLat(),lng:bp.getLng()})}catch(Ep){console.log(Ep)}},Sp=()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(yp=>{const bp=yp.coords.latitude,Ep=yp.coords.longitude,wp=new kakao.maps.LatLng(bp,Ep);_d.current.setCenter(wp),sp(!1),dp(_p=>({..._p,center:{lat:bp,lng:Ep},isLoading:!0}))}):window.alert("이 브라우저에서는 Geolocation을 지원하지 않습니다.")};return jsxRuntimeExports.jsxs("div",{className:"FishMapBody",children:[ap&&!np&&jsxRuntimeExports.jsxs("div",{className:"reSearch",onClick:xp,children:[jsxRuntimeExports.jsx(default_1$n,{}),"이 지역 검색"]}),jsxRuntimeExports.jsxs(Map$1,{center:fp,ref:_d,level:gp,onClick:()=>up(null),onCenterChanged:()=>sp(!0),children:[jsxRuntimeExports.jsx(MarkerClusterer,{minLevel:11,averageCenter:!0,children:hp.map((yp,bp)=>jsxRuntimeExports.jsx(EventMarker,{value:yp,isActive:lp===bp,onClick:()=>up(bp),getDistance:rp},yp.spotId))}),cp.isLoading&&jsxRuntimeExports.jsx(MapMarker,{position:cp.center,clickable:!0,image:{src:"https://cdn4.iconfinder.com/data/icons/small-n-flat/24/map-marker-512.png",size:{width:25,height:25}}}),!np&&jsxRuntimeExports.jsx("button",{style:{bottom:lp!==null?"19vh":"3vh"},className:"FishMap_btn bg-blue",onClick:Sp,children:jsxRuntimeExports.jsx(default_1$o,{})})]})]})};var FormatListBulleted={},_interopRequireDefault$v=interopRequireDefaultExports;Object.defineProperty(FormatListBulleted,"__esModule",{value:!0});var default_1$m=FormatListBulleted.default=void 0,_createSvgIcon$m=_interopRequireDefault$v(requireCreateSvgIcon()),_jsxRuntime$m=jsxRuntimeExports;default_1$m=FormatListBulleted.default=(0,_createSvgIcon$m.default)((0,_jsxRuntime$m.jsx)("path",{d:"M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5m0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5m0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5M7 19h14v-2H7zm0-6h14v-2H7zm0-8v2h14V5z"}),"FormatListBulleted");var MapOutlined={},_interopRequireDefault$u=interopRequireDefaultExports;Object.defineProperty(MapOutlined,"__esModule",{value:!0});var default_1$l=MapOutlined.default=void 0,_createSvgIcon$l=_interopRequireDefault$u(requireCreateSvgIcon()),_jsxRuntime$l=jsxRuntimeExports;default_1$l=MapOutlined.default=(0,_createSvgIcon$l.default)((0,_jsxRuntime$l.jsx)("path",{d:"m20.5 3-.16.03L15 5.1 9 3 3.36 4.9c-.21.07-.36.25-.36.48V20.5c0 .28.22.5.5.5l.16-.03L9 18.9l6 2.1 5.64-1.9c.21-.07.36-.25.36-.48V3.5c0-.28-.22-.5-.5-.5M10 5.47l4 1.4v11.66l-4-1.4zm-5 .99 3-1.01v11.7l-3 1.16zm14 11.08-3 1.01V6.86l3-1.16z"}),"MapOutlined");var ArrowDropDownOutlined={},_interopRequireDefault$t=interopRequireDefaultExports;Object.defineProperty(ArrowDropDownOutlined,"__esModule",{value:!0});var default_1$k=ArrowDropDownOutlined.default=void 0,_createSvgIcon$k=_interopRequireDefault$t(requireCreateSvgIcon()),_jsxRuntime$k=jsxRuntimeExports;default_1$k=ArrowDropDownOutlined.default=(0,_createSvgIcon$k.default)((0,_jsxRuntime$k.jsx)("path",{d:"m7 10 5 5 5-5z"}),"ArrowDropDownOutlined");var CheckOutlined={},_interopRequireDefault$s=interopRequireDefaultExports;Object.defineProperty(CheckOutlined,"__esModule",{value:!0});var default_1$j=CheckOutlined.default=void 0,_createSvgIcon$j=_interopRequireDefault$s(requireCreateSvgIcon()),_jsxRuntime$j=jsxRuntimeExports;default_1$j=CheckOutlined.default=(0,_createSvgIcon$j.default)((0,_jsxRuntime$j.jsx)("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"CheckOutlined");const FishMapItem=({item:_d,idx:rp,mapRef:np,getDistance:ap,setOpenList:sp})=>{const lp=Recoil_index_20(myCenterAtom),up=Recoil_index_24(activeMarkerAtom),cp=Recoil_index_24(centerChangeAtom),dp=reactExports.useMemo(()=>ap(lp.center.lat,lp.center.lng,_d.latitude,_d.longitude),[]),fp=()=>{sp(!1),console.log(rp),up(rp);const pp=new kakao.maps.LatLng(_d.latitude,_d.longitude);np.current.setLevel(4),np.current.setCenter(pp),cp(!1)};return jsxRuntimeExports.jsxs("div",{className:"item",children:[jsxRuntimeExports.jsxs("div",{className:"item-head",children:[jsxRuntimeExports.jsx("div",{className:"fishing-name",onClick:fp,children:_d.name}),jsxRuntimeExports.jsx("div",{className:"fishing-type",children:_d.spotType})]}),jsxRuntimeExports.jsxs("div",{className:"item-body",children:[jsxRuntimeExports.jsx("div",{className:"fishing-dist",children:dp>=1?`${dp.toFixed(1)}km`:`${(dp/1e3).toFixed()}m`}),jsxRuntimeExports.jsx("div",{className:"fishing-addr",children:_d.streetAddress||_d.localAddress})]}),jsxRuntimeExports.jsxs("div",{className:"fishing-exp",children:[_d.charge,"원"]})]})},FishMapFooter=({mapRef:_d,getDistance:rp,openList:np,setOpenList:ap})=>{const[sp,lp]=reactExports.useState(!1),[up,cp]=Recoil_index_22(filterModeAtom),dp=Recoil_index_20(fishSpotListAtom),fp=Recoil_index_20(searchModeAtom),pp=mp=>{lp(!1),cp(mp)},hp=reactExports.useMemo(()=>dp.toSorted((mp,gp)=>up==="dist"?mp.dist-gp.dist:mp.charge-gp.charge),[up,dp]);return jsxRuntimeExports.jsxs("div",{className:`FishMapFooter ${np&&"expand"}`,children:[jsxRuntimeExports.jsxs("div",{className:`fishing-content ${np&&"expand"}`,style:{height:np&&fp==="hash"&&"74.5vh"},children:[jsxRuntimeExports.jsxs("button",{className:"filter",onClick:()=>lp(!0),children:[up==="dist"?"거리순":"비용순",jsxRuntimeExports.jsx(default_1$k,{})]}),sp&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"filter-open",onClick:()=>lp(!1)}),jsxRuntimeExports.jsxs("div",{className:"filter-content",children:[jsxRuntimeExports.jsx("h2",{children:"검색 설정"}),jsxRuntimeExports.jsx("div",{className:"filter-b",children:jsxRuntimeExports.jsxs("button",{className:`${up==="dist"?"pick":""}`,onClick:()=>pp("dist"),children:["거리순"," ",jsxRuntimeExports.jsx("div",{children:up==="dist"&&jsxRuntimeExports.jsx(default_1$j,{})})]})}),jsxRuntimeExports.jsx("div",{className:"filter-b",children:jsxRuntimeExports.jsxs("button",{className:`${up==="money"?"pick":""}`,onClick:()=>pp("money"),children:["비용순",jsxRuntimeExports.jsx("div",{children:up==="money"&&jsxRuntimeExports.jsx(default_1$j,{})})]})}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("button",{className:"cancel",onClick:()=>lp(!1),children:"취소"})})]})]}),jsxRuntimeExports.jsx("div",{className:"fishing-list",children:dp.length?hp.map((mp,gp)=>jsxRuntimeExports.jsx(FishMapItem,{item:mp,idx:gp,mapRef:_d,setOpenList:ap,getDistance:rp},mp.spotId)):jsxRuntimeExports.jsxs("div",{className:"noneData",children:[jsxRuntimeExports.jsx(default_1$s,{}),jsxRuntimeExports.jsx("div",{children:"조건에 맞는 낚시터가 없습니다."})]})})]}),jsxRuntimeExports.jsx("div",{className:"mode",onClick:()=>ap(mp=>!mp),children:np?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(default_1$l,{}),jsxRuntimeExports.jsx("div",{children:"지도보기"})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(default_1$m,{}),jsxRuntimeExports.jsx("div",{children:"목록보기"})]})})]})},hashTags=["#사진맛집","#노을맛집","#월척","#고기맛집","#산책하기좋은곳"],FishMapPage=()=>{const _d=Recoil_index_24(searchTermAtom),rp=Recoil_index_24(filterModeAtom),np=Recoil_index_24(centerChangeAtom),ap=Recoil_index_24(myCenterAtom),sp=Recoil_index_24(fishSpotListAtom),lp=Recoil_index_24(searchModeAtom),up=Recoil_index_24(mapLevelAtom),[cp,dp]=Recoil_index_22(mapCenterAtom),[fp,pp]=Recoil_index_22(activeMarkerAtom),[hp,mp]=reactExports.useState(!1),gp="https://i10c203.p.ssafy.io";localStorage.getItem("jwt");const vp=useLocation(),xp=reactExports.useRef(null),Sp=(wp,_p)=>{dp({lat:wp,lng:_p}),pp(null),_d(""),rp("dist"),lp("location"),up(9)},yp=(wp,_p,Rp,$p)=>{const Cp=Fp=>Fp*(Math.PI/180),Op=Cp(Rp-wp),Lp=Cp($p-_p),Mp=Math.sin(Op/2)*Math.sin(Op/2)+Math.cos(Cp(wp))*Math.cos(Cp(Rp))*Math.sin(Lp/2)*Math.sin(Lp/2);return 6371*(2*Math.atan2(Math.sqrt(Mp),Math.sqrt(1-Mp)))},bp=async(wp,_p)=>{try{const $p=(await axios.get(`${gp}/api/spots`,{params:{latitude:wp,longitude:_p}},{headers:{Authorization:localStorage.getItem("jwt"),"Content-Type":"application/json"}})).data.spots.map(Cp=>{const Ap=yp(wp,_p,Cp==null?void 0:Cp.latitude,Cp==null?void 0:Cp.longitude);return Ap<=20?{...Cp,dist:Ap}:null}).filter(Boolean);console.log($p),sp($p)}catch(Rp){console.log(Rp)}},Ep=()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(wp=>{var $p;const{latitude:_p,longitude:Rp}=wp.coords;ap(Cp=>({...Cp,center:{lat:_p,lng:Rp},isLoading:!0})),np(!1),(!cp.lat&&!cp.lng||!(($p=vp.state)!=null&&$p.data))&&(bp(_p,Rp),Sp(_p,Rp))},wp=>{console.log(wp),ap(_p=>({..._p,errMsg:wp.message,isLoading:!1}))}):ap(wp=>({...wp,errMsg:"geolocation을 사용할수 없어요..",isLoading:!1}))};return reactExports.useEffect(()=>{Ep()},[]),jsxRuntimeExports.jsxs("div",{className:"FishMap",children:[jsxRuntimeExports.jsx(FishMapHeader,{hashTags,mapRef:xp,getDistance:yp}),jsxRuntimeExports.jsx(FishMapBody,{openList:hp,mapRef:xp,getDistance:yp}),fp===null&&jsxRuntimeExports.jsx(FishMapFooter,{openList:hp,setOpenList:mp,mapRef:xp,getDistance:yp})]})};var Navigation={},_interopRequireDefault$r=interopRequireDefaultExports;Object.defineProperty(Navigation,"__esModule",{value:!0});var default_1$i=Navigation.default=void 0,_createSvgIcon$i=_interopRequireDefault$r(requireCreateSvgIcon()),_jsxRuntime$i=jsxRuntimeExports;default_1$i=Navigation.default=(0,_createSvgIcon$i.default)((0,_jsxRuntime$i.jsx)("path",{d:"M12 2 4.5 20.29l.71.71L12 18l6.79 3 .71-.71z"}),"Navigation");const WEEKDAY=["일","월","화","수","목","금","토"],FishSpot=({weatherData:_d,sunrise:rp,sunset:np})=>{const ap=new Date,sp=(ap.getMonth()+1).toString().padStart(2,"0"),lp=ap.getDate().toString().padStart(2,"0"),up=dp=>dp.toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit",hour12:!1}),cp=dp=>dp<12?`오전${dp||12}시`:`오후${dp===12?dp:dp-12}시`;return jsxRuntimeExports.jsxs("div",{className:"MapDetailWeather",children:[jsxRuntimeExports.jsx("div",{className:"todays-date",children:`${sp}.${lp} ${WEEKDAY[ap.getDay()]}`}),jsxRuntimeExports.jsxs("div",{className:"sun-rs",children:[`일출 ${up(rp)}`,jsxRuntimeExports.jsx("span",{children:"•"}),`일몰 ${up(np)}`]}),jsxRuntimeExports.jsxs("div",{className:"weather-data",children:[jsxRuntimeExports.jsxs("div",{className:"weather-info",children:[jsxRuntimeExports.jsx("div",{className:"weather-time",children:"시간"}),jsxRuntimeExports.jsx("div",{className:"weather",children:"날씨"}),jsxRuntimeExports.jsx("div",{className:"temper",children:"기온"}),jsxRuntimeExports.jsx("div",{className:"precipitation",children:"강수확률"}),jsxRuntimeExports.jsx("div",{className:"wind-speed",children:"풍속"}),jsxRuntimeExports.jsx("div",{className:"wind-direction",children:"풍향"})]}),jsxRuntimeExports.jsx("div",{className:"weather-totals",children:_d.map((dp,fp)=>jsxRuntimeExports.jsxs("div",{className:"weather-total",children:[jsxRuntimeExports.jsx("div",{className:"weather-time",children:cp(new Date(dp.dt_txt).getHours())}),jsxRuntimeExports.jsx("img",{className:"weather-icon",src:`http://openweathermap.org/img/wn/${dp.weather[0].icon}@2x.png`,alt:"날씨 아이콘"}),jsxRuntimeExports.jsxs("div",{children:[dp.main.temp.toFixed(0),"°"]}),jsxRuntimeExports.jsx("div",{children:`${(dp.pop*100).toFixed()}%`}),jsxRuntimeExports.jsxs("div",{children:[dp.wind.speed.toFixed(1),"m/s"]}),jsxRuntimeExports.jsx("div",{className:"navigation",style:{transform:`rotate(${dp.wind.deg}deg)`},children:jsxRuntimeExports.jsx(default_1$i,{})})]},fp))})]})]})},OPEN_WEATHER_API_KEY="87246d75e1ce26e1392a087b3d1d88c5",FishMapDetailPage=()=>{const _d=useLocation(),rp=useParams(),np=useNavigate(),[ap,sp]=reactExports.useState({}),[lp,up]=reactExports.useState([]),[cp,dp]=reactExports.useState(""),[fp,pp]=reactExports.useState(""),hp=Recoil_index_24(prevPathAtom),mp=async(vp,xp)=>{try{const Sp=await axios.get(`https://api.openweathermap.org/data/2.5/forecast?lat=${vp}&lon=${xp}&appid=${OPEN_WEATHER_API_KEY}&units=metric&lang=kr`);console.log(Sp.data),dp(new Date(Sp.data.city.sunrise*1e3)),pp(new Date(Sp.data.city.sunset*1e3)),up(Sp.data.list)}catch(Sp){console.log(Sp)}finally{hp(_d.pathname)}},gp=async()=>{try{const vp=await axios.get(`https://i10c203.p.ssafy.io/api/spots/${rp.idx}`,{headers:{Authorization:localStorage.getItem("jwt")}});console.log(vp.data),sp(vp.data),await mp(vp.data.latitude,vp.data.longitude)}catch(vp){console.log(vp)}};return reactExports.useEffect(()=>{gp()},[]),lp.length?jsxRuntimeExports.jsxs("div",{className:"FishMapDetailPage",children:[jsxRuntimeExports.jsx(Header,{prevPath:"/fish/map"}),jsxRuntimeExports.jsxs("div",{className:"body",children:[jsxRuntimeExports.jsxs("div",{className:"fishing-info",children:[jsxRuntimeExports.jsxs("div",{className:"fishing-name",children:[jsxRuntimeExports.jsx("h2",{children:ap.name}),jsxRuntimeExports.jsx("div",{children:ap.spotType})]}),jsxRuntimeExports.jsx("div",{children:ap.streetAddress})]}),jsxRuntimeExports.jsx(FishSpot,{weatherData:lp,sunrise:cp,sunset:fp}),jsxRuntimeExports.jsxs("div",{className:"fish-species",children:[jsxRuntimeExports.jsxs("h3",{className:"name",children:[ap.name,"의 주요어종"]}),jsxRuntimeExports.jsx("div",{className:"wrapper",children:ap.fishes.length?ap.fishes.map(vp=>jsxRuntimeExports.jsxs("div",{onClick:()=>np(`/fishbook/${vp.id}`),children:[jsxRuntimeExports.jsx("img",{src:vp.imageUrl}),jsxRuntimeExports.jsx("div",{children:vp.name})]},vp.name)):jsxRuntimeExports.jsx("div",{className:"none-data",children:"정보를 준비 중입니다."})})]}),jsxRuntimeExports.jsxs("div",{className:"fishing-reviews",children:[jsxRuntimeExports.jsxs("h3",{className:"name",children:[ap.name,"의 리뷰"]}),jsxRuntimeExports.jsx("div",{className:"wrapper",children:ap.boards.length?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"board",children:ap.boards.map(vp=>jsxRuntimeExports.jsxs("div",{className:"review",onClick:()=>np(`/media/board/${vp.boardId}`),children:[jsxRuntimeExports.jsx("img",{src:vp.boardImageUrl,className:"review-img"}),jsxRuntimeExports.jsx("div",{children:vp.content})]},vp.boardId))}),jsxRuntimeExports.jsx("div",{className:"board-btn",children:jsxRuntimeExports.jsx("button",{onClick:()=>np("/media/board"),children:"게시글 전체보기"})})]}):jsxRuntimeExports.jsx("div",{className:"none-data",children:"정보를 준비 중입니다."})})]})]})]}):jsxRuntimeExports.jsx(Loading,{})};/*!
 * Cropper.js v1.6.1
 * https://fengyuanchen.github.io/cropperjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2023-09-17T03:44:19.860Z
 */function ownKeys(_d,rp){var np=Object.keys(_d);if(Object.getOwnPropertySymbols){var ap=Object.getOwnPropertySymbols(_d);rp&&(ap=ap.filter(function(sp){return Object.getOwnPropertyDescriptor(_d,sp).enumerable})),np.push.apply(np,ap)}return np}function _objectSpread2(_d){for(var rp=1;rp<arguments.length;rp++){var np=arguments[rp]!=null?arguments[rp]:{};rp%2?ownKeys(Object(np),!0).forEach(function(ap){_defineProperty(_d,ap,np[ap])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_d,Object.getOwnPropertyDescriptors(np)):ownKeys(Object(np)).forEach(function(ap){Object.defineProperty(_d,ap,Object.getOwnPropertyDescriptor(np,ap))})}return _d}function _typeof(_d){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(rp){return typeof rp}:function(rp){return rp&&typeof Symbol=="function"&&rp.constructor===Symbol&&rp!==Symbol.prototype?"symbol":typeof rp},_typeof(_d)}function _classCallCheck(_d,rp){if(!(_d instanceof rp))throw new TypeError("Cannot call a class as a function")}function _defineProperties(_d,rp){for(var np=0;np<rp.length;np++){var ap=rp[np];ap.enumerable=ap.enumerable||!1,ap.configurable=!0,"value"in ap&&(ap.writable=!0),Object.defineProperty(_d,_toPropertyKey(ap.key),ap)}}function _createClass(_d,rp,np){return rp&&_defineProperties(_d.prototype,rp),np&&_defineProperties(_d,np),Object.defineProperty(_d,"prototype",{writable:!1}),_d}function _defineProperty(_d,rp,np){return rp=_toPropertyKey(rp),rp in _d?Object.defineProperty(_d,rp,{value:np,enumerable:!0,configurable:!0,writable:!0}):_d[rp]=np,_d}function _toConsumableArray(_d){return _arrayWithoutHoles(_d)||_iterableToArray(_d)||_unsupportedIterableToArray(_d)||_nonIterableSpread()}function _arrayWithoutHoles(_d){if(Array.isArray(_d))return _arrayLikeToArray(_d)}function _iterableToArray(_d){if(typeof Symbol<"u"&&_d[Symbol.iterator]!=null||_d["@@iterator"]!=null)return Array.from(_d)}function _unsupportedIterableToArray(_d,rp){if(_d){if(typeof _d=="string")return _arrayLikeToArray(_d,rp);var np=Object.prototype.toString.call(_d).slice(8,-1);if(np==="Object"&&_d.constructor&&(np=_d.constructor.name),np==="Map"||np==="Set")return Array.from(_d);if(np==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(np))return _arrayLikeToArray(_d,rp)}}function _arrayLikeToArray(_d,rp){(rp==null||rp>_d.length)&&(rp=_d.length);for(var np=0,ap=new Array(rp);np<rp;np++)ap[np]=_d[np];return ap}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _toPrimitive(_d,rp){if(typeof _d!="object"||_d===null)return _d;var np=_d[Symbol.toPrimitive];if(np!==void 0){var ap=np.call(_d,rp||"default");if(typeof ap!="object")return ap;throw new TypeError("@@toPrimitive must return a primitive value.")}return(rp==="string"?String:Number)(_d)}function _toPropertyKey(_d){var rp=_toPrimitive(_d,"string");return typeof rp=="symbol"?rp:String(rp)}var IS_BROWSER=typeof window<"u"&&typeof window.document<"u",WINDOW=IS_BROWSER?window:{},IS_TOUCH_DEVICE=IS_BROWSER&&WINDOW.document.documentElement?"ontouchstart"in WINDOW.document.documentElement:!1,HAS_POINTER_EVENT=IS_BROWSER?"PointerEvent"in WINDOW:!1,NAMESPACE="cropper",ACTION_ALL="all",ACTION_CROP="crop",ACTION_MOVE="move",ACTION_ZOOM="zoom",ACTION_EAST="e",ACTION_WEST="w",ACTION_SOUTH="s",ACTION_NORTH="n",ACTION_NORTH_EAST="ne",ACTION_NORTH_WEST="nw",ACTION_SOUTH_EAST="se",ACTION_SOUTH_WEST="sw",CLASS_CROP="".concat(NAMESPACE,"-crop"),CLASS_DISABLED="".concat(NAMESPACE,"-disabled"),CLASS_HIDDEN="".concat(NAMESPACE,"-hidden"),CLASS_HIDE="".concat(NAMESPACE,"-hide"),CLASS_INVISIBLE="".concat(NAMESPACE,"-invisible"),CLASS_MODAL="".concat(NAMESPACE,"-modal"),CLASS_MOVE="".concat(NAMESPACE,"-move"),DATA_ACTION="".concat(NAMESPACE,"Action"),DATA_PREVIEW="".concat(NAMESPACE,"Preview"),DRAG_MODE_CROP="crop",DRAG_MODE_MOVE="move",DRAG_MODE_NONE="none",EVENT_CROP="crop",EVENT_CROP_END="cropend",EVENT_CROP_MOVE="cropmove",EVENT_CROP_START="cropstart",EVENT_DBLCLICK="dblclick",EVENT_TOUCH_START=IS_TOUCH_DEVICE?"touchstart":"mousedown",EVENT_TOUCH_MOVE=IS_TOUCH_DEVICE?"touchmove":"mousemove",EVENT_TOUCH_END=IS_TOUCH_DEVICE?"touchend touchcancel":"mouseup",EVENT_POINTER_DOWN=HAS_POINTER_EVENT?"pointerdown":EVENT_TOUCH_START,EVENT_POINTER_MOVE=HAS_POINTER_EVENT?"pointermove":EVENT_TOUCH_MOVE,EVENT_POINTER_UP=HAS_POINTER_EVENT?"pointerup pointercancel":EVENT_TOUCH_END,EVENT_READY="ready",EVENT_RESIZE="resize",EVENT_WHEEL="wheel",EVENT_ZOOM="zoom",MIME_TYPE_JPEG="image/jpeg",REGEXP_ACTIONS=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,REGEXP_DATA_URL=/^data:/,REGEXP_DATA_URL_JPEG=/^data:image\/jpeg;base64,/,REGEXP_TAG_NAME=/^img|canvas$/i,MIN_CONTAINER_WIDTH=200,MIN_CONTAINER_HEIGHT=100,DEFAULTS={viewMode:0,dragMode:DRAG_MODE_CROP,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:MIN_CONTAINER_WIDTH,minContainerHeight:MIN_CONTAINER_HEIGHT,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},TEMPLATE='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',isNaN$1=Number.isNaN||WINDOW.isNaN;function isNumber(_d){return typeof _d=="number"&&!isNaN$1(_d)}var isPositiveNumber=function _d(rp){return rp>0&&rp<1/0};function isUndefined(_d){return typeof _d>"u"}function isObject(_d){return _typeof(_d)==="object"&&_d!==null}var hasOwnProperty=Object.prototype.hasOwnProperty;function isPlainObject(_d){if(!isObject(_d))return!1;try{var rp=_d.constructor,np=rp.prototype;return rp&&np&&hasOwnProperty.call(np,"isPrototypeOf")}catch{return!1}}function isFunction(_d){return typeof _d=="function"}var slice=Array.prototype.slice;function toArray(_d){return Array.from?Array.from(_d):slice.call(_d)}function forEach(_d,rp){return _d&&isFunction(rp)&&(Array.isArray(_d)||isNumber(_d.length)?toArray(_d).forEach(function(np,ap){rp.call(_d,np,ap,_d)}):isObject(_d)&&Object.keys(_d).forEach(function(np){rp.call(_d,_d[np],np,_d)})),_d}var assign=Object.assign||function _d(rp){for(var np=arguments.length,ap=new Array(np>1?np-1:0),sp=1;sp<np;sp++)ap[sp-1]=arguments[sp];return isObject(rp)&&ap.length>0&&ap.forEach(function(lp){isObject(lp)&&Object.keys(lp).forEach(function(up){rp[up]=lp[up]})}),rp},REGEXP_DECIMALS=/\.\d*(?:0|9){12}\d*$/;function normalizeDecimalNumber(_d){var rp=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return REGEXP_DECIMALS.test(_d)?Math.round(_d*rp)/rp:_d}var REGEXP_SUFFIX=/^width|height|left|top|marginLeft|marginTop$/;function setStyle(_d,rp){var np=_d.style;forEach(rp,function(ap,sp){REGEXP_SUFFIX.test(sp)&&isNumber(ap)&&(ap="".concat(ap,"px")),np[sp]=ap})}function hasClass(_d,rp){return _d.classList?_d.classList.contains(rp):_d.className.indexOf(rp)>-1}function addClass(_d,rp){if(rp){if(isNumber(_d.length)){forEach(_d,function(ap){addClass(ap,rp)});return}if(_d.classList){_d.classList.add(rp);return}var np=_d.className.trim();np?np.indexOf(rp)<0&&(_d.className="".concat(np," ").concat(rp)):_d.className=rp}}function removeClass(_d,rp){if(rp){if(isNumber(_d.length)){forEach(_d,function(np){removeClass(np,rp)});return}if(_d.classList){_d.classList.remove(rp);return}_d.className.indexOf(rp)>=0&&(_d.className=_d.className.replace(rp,""))}}function toggleClass(_d,rp,np){if(rp){if(isNumber(_d.length)){forEach(_d,function(ap){toggleClass(ap,rp,np)});return}np?addClass(_d,rp):removeClass(_d,rp)}}var REGEXP_CAMEL_CASE=/([a-z\d])([A-Z])/g;function toParamCase(_d){return _d.replace(REGEXP_CAMEL_CASE,"$1-$2").toLowerCase()}function getData(_d,rp){return isObject(_d[rp])?_d[rp]:_d.dataset?_d.dataset[rp]:_d.getAttribute("data-".concat(toParamCase(rp)))}function setData(_d,rp,np){isObject(np)?_d[rp]=np:_d.dataset?_d.dataset[rp]=np:_d.setAttribute("data-".concat(toParamCase(rp)),np)}function removeData(_d,rp){if(isObject(_d[rp]))try{delete _d[rp]}catch{_d[rp]=void 0}else if(_d.dataset)try{delete _d.dataset[rp]}catch{_d.dataset[rp]=void 0}else _d.removeAttribute("data-".concat(toParamCase(rp)))}var REGEXP_SPACES=/\s\s*/,onceSupported=function(){var _d=!1;if(IS_BROWSER){var rp=!1,np=function(){},ap=Object.defineProperty({},"once",{get:function(){return _d=!0,rp},set:function(lp){rp=lp}});WINDOW.addEventListener("test",np,ap),WINDOW.removeEventListener("test",np,ap)}return _d}();function removeListener(_d,rp,np){var ap=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},sp=np;rp.trim().split(REGEXP_SPACES).forEach(function(lp){if(!onceSupported){var up=_d.listeners;up&&up[lp]&&up[lp][np]&&(sp=up[lp][np],delete up[lp][np],Object.keys(up[lp]).length===0&&delete up[lp],Object.keys(up).length===0&&delete _d.listeners)}_d.removeEventListener(lp,sp,ap)})}function addListener(_d,rp,np){var ap=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},sp=np;rp.trim().split(REGEXP_SPACES).forEach(function(lp){if(ap.once&&!onceSupported){var up=_d.listeners,cp=up===void 0?{}:up;sp=function(){delete cp[lp][np],_d.removeEventListener(lp,sp,ap);for(var fp=arguments.length,pp=new Array(fp),hp=0;hp<fp;hp++)pp[hp]=arguments[hp];np.apply(_d,pp)},cp[lp]||(cp[lp]={}),cp[lp][np]&&_d.removeEventListener(lp,cp[lp][np],ap),cp[lp][np]=sp,_d.listeners=cp}_d.addEventListener(lp,sp,ap)})}function dispatchEvent(_d,rp,np){var ap;return isFunction(Event)&&isFunction(CustomEvent)?ap=new CustomEvent(rp,{detail:np,bubbles:!0,cancelable:!0}):(ap=document.createEvent("CustomEvent"),ap.initCustomEvent(rp,!0,!0,np)),_d.dispatchEvent(ap)}function getOffset(_d){var rp=_d.getBoundingClientRect();return{left:rp.left+(window.pageXOffset-document.documentElement.clientLeft),top:rp.top+(window.pageYOffset-document.documentElement.clientTop)}}var location=WINDOW.location,REGEXP_ORIGINS=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function isCrossOriginURL(_d){var rp=_d.match(REGEXP_ORIGINS);return rp!==null&&(rp[1]!==location.protocol||rp[2]!==location.hostname||rp[3]!==location.port)}function addTimestamp(_d){var rp="timestamp=".concat(new Date().getTime());return _d+(_d.indexOf("?")===-1?"?":"&")+rp}function getTransforms(_d){var rp=_d.rotate,np=_d.scaleX,ap=_d.scaleY,sp=_d.translateX,lp=_d.translateY,up=[];isNumber(sp)&&sp!==0&&up.push("translateX(".concat(sp,"px)")),isNumber(lp)&&lp!==0&&up.push("translateY(".concat(lp,"px)")),isNumber(rp)&&rp!==0&&up.push("rotate(".concat(rp,"deg)")),isNumber(np)&&np!==1&&up.push("scaleX(".concat(np,")")),isNumber(ap)&&ap!==1&&up.push("scaleY(".concat(ap,")"));var cp=up.length?up.join(" "):"none";return{WebkitTransform:cp,msTransform:cp,transform:cp}}function getMaxZoomRatio(_d){var rp=_objectSpread2({},_d),np=0;return forEach(_d,function(ap,sp){delete rp[sp],forEach(rp,function(lp){var up=Math.abs(ap.startX-lp.startX),cp=Math.abs(ap.startY-lp.startY),dp=Math.abs(ap.endX-lp.endX),fp=Math.abs(ap.endY-lp.endY),pp=Math.sqrt(up*up+cp*cp),hp=Math.sqrt(dp*dp+fp*fp),mp=(hp-pp)/pp;Math.abs(mp)>Math.abs(np)&&(np=mp)})}),np}function getPointer(_d,rp){var np=_d.pageX,ap=_d.pageY,sp={endX:np,endY:ap};return rp?sp:_objectSpread2({startX:np,startY:ap},sp)}function getPointersCenter(_d){var rp=0,np=0,ap=0;return forEach(_d,function(sp){var lp=sp.startX,up=sp.startY;rp+=lp,np+=up,ap+=1}),rp/=ap,np/=ap,{pageX:rp,pageY:np}}function getAdjustedSizes(_d){var rp=_d.aspectRatio,np=_d.height,ap=_d.width,sp=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"contain",lp=isPositiveNumber(ap),up=isPositiveNumber(np);if(lp&&up){var cp=np*rp;sp==="contain"&&cp>ap||sp==="cover"&&cp<ap?np=ap/rp:ap=np*rp}else lp?np=ap/rp:up&&(ap=np*rp);return{width:ap,height:np}}function getRotatedSizes(_d){var rp=_d.width,np=_d.height,ap=_d.degree;if(ap=Math.abs(ap)%180,ap===90)return{width:np,height:rp};var sp=ap%90*Math.PI/180,lp=Math.sin(sp),up=Math.cos(sp),cp=rp*up+np*lp,dp=rp*lp+np*up;return ap>90?{width:dp,height:cp}:{width:cp,height:dp}}function getSourceCanvas(_d,rp,np,ap){var sp=rp.aspectRatio,lp=rp.naturalWidth,up=rp.naturalHeight,cp=rp.rotate,dp=cp===void 0?0:cp,fp=rp.scaleX,pp=fp===void 0?1:fp,hp=rp.scaleY,mp=hp===void 0?1:hp,gp=np.aspectRatio,vp=np.naturalWidth,xp=np.naturalHeight,Sp=ap.fillColor,yp=Sp===void 0?"transparent":Sp,bp=ap.imageSmoothingEnabled,Ep=bp===void 0?!0:bp,wp=ap.imageSmoothingQuality,_p=wp===void 0?"low":wp,Rp=ap.maxWidth,$p=Rp===void 0?1/0:Rp,Cp=ap.maxHeight,Ap=Cp===void 0?1/0:Cp,Op=ap.minWidth,Lp=Op===void 0?0:Op,Mp=ap.minHeight,kp=Mp===void 0?0:Mp,Dp=document.createElement("canvas"),Fp=Dp.getContext("2d"),Ip=getAdjustedSizes({aspectRatio:gp,width:$p,height:Ap}),Pp=getAdjustedSizes({aspectRatio:gp,width:Lp,height:kp},"cover"),Tp=Math.min(Ip.width,Math.max(Pp.width,vp)),Np=Math.min(Ip.height,Math.max(Pp.height,xp)),jp=getAdjustedSizes({aspectRatio:sp,width:$p,height:Ap}),Vp=getAdjustedSizes({aspectRatio:sp,width:Lp,height:kp},"cover"),zp=Math.min(jp.width,Math.max(Vp.width,lp)),Wp=Math.min(jp.height,Math.max(Vp.height,up)),Up=[-zp/2,-Wp/2,zp,Wp];return Dp.width=normalizeDecimalNumber(Tp),Dp.height=normalizeDecimalNumber(Np),Fp.fillStyle=yp,Fp.fillRect(0,0,Tp,Np),Fp.save(),Fp.translate(Tp/2,Np/2),Fp.rotate(dp*Math.PI/180),Fp.scale(pp,mp),Fp.imageSmoothingEnabled=Ep,Fp.imageSmoothingQuality=_p,Fp.drawImage.apply(Fp,[_d].concat(_toConsumableArray(Up.map(function(qp){return Math.floor(normalizeDecimalNumber(qp))})))),Fp.restore(),Dp}var fromCharCode=String.fromCharCode;function getStringFromCharCode(_d,rp,np){var ap="";np+=rp;for(var sp=rp;sp<np;sp+=1)ap+=fromCharCode(_d.getUint8(sp));return ap}var REGEXP_DATA_URL_HEAD=/^data:.*,/;function dataURLToArrayBuffer(_d){var rp=_d.replace(REGEXP_DATA_URL_HEAD,""),np=atob(rp),ap=new ArrayBuffer(np.length),sp=new Uint8Array(ap);return forEach(sp,function(lp,up){sp[up]=np.charCodeAt(up)}),ap}function arrayBufferToDataURL(_d,rp){for(var np=[],ap=8192,sp=new Uint8Array(_d);sp.length>0;)np.push(fromCharCode.apply(null,toArray(sp.subarray(0,ap)))),sp=sp.subarray(ap);return"data:".concat(rp,";base64,").concat(btoa(np.join("")))}function resetAndGetOrientation(_d){var rp=new DataView(_d),np;try{var ap,sp,lp;if(rp.getUint8(0)===255&&rp.getUint8(1)===216)for(var up=rp.byteLength,cp=2;cp+1<up;){if(rp.getUint8(cp)===255&&rp.getUint8(cp+1)===225){sp=cp;break}cp+=1}if(sp){var dp=sp+4,fp=sp+10;if(getStringFromCharCode(rp,dp,4)==="Exif"){var pp=rp.getUint16(fp);if(ap=pp===18761,(ap||pp===19789)&&rp.getUint16(fp+2,ap)===42){var hp=rp.getUint32(fp+4,ap);hp>=8&&(lp=fp+hp)}}}if(lp){var mp=rp.getUint16(lp,ap),gp,vp;for(vp=0;vp<mp;vp+=1)if(gp=lp+vp*12+2,rp.getUint16(gp,ap)===274){gp+=8,np=rp.getUint16(gp,ap),rp.setUint16(gp,1,ap);break}}}catch{np=1}return np}function parseOrientation(_d){var rp=0,np=1,ap=1;switch(_d){case 2:np=-1;break;case 3:rp=-180;break;case 4:ap=-1;break;case 5:rp=90,ap=-1;break;case 6:rp=90;break;case 7:rp=90,np=-1;break;case 8:rp=-90;break}return{rotate:rp,scaleX:np,scaleY:ap}}var render={render:function _d(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function _d(){var rp=this.element,np=this.options,ap=this.container,sp=this.cropper,lp=Number(np.minContainerWidth),up=Number(np.minContainerHeight);addClass(sp,CLASS_HIDDEN),removeClass(rp,CLASS_HIDDEN);var cp={width:Math.max(ap.offsetWidth,lp>=0?lp:MIN_CONTAINER_WIDTH),height:Math.max(ap.offsetHeight,up>=0?up:MIN_CONTAINER_HEIGHT)};this.containerData=cp,setStyle(sp,{width:cp.width,height:cp.height}),addClass(rp,CLASS_HIDDEN),removeClass(sp,CLASS_HIDDEN)},initCanvas:function _d(){var rp=this.containerData,np=this.imageData,ap=this.options.viewMode,sp=Math.abs(np.rotate)%180===90,lp=sp?np.naturalHeight:np.naturalWidth,up=sp?np.naturalWidth:np.naturalHeight,cp=lp/up,dp=rp.width,fp=rp.height;rp.height*cp>rp.width?ap===3?dp=rp.height*cp:fp=rp.width/cp:ap===3?fp=rp.width/cp:dp=rp.height*cp;var pp={aspectRatio:cp,naturalWidth:lp,naturalHeight:up,width:dp,height:fp};this.canvasData=pp,this.limited=ap===1||ap===2,this.limitCanvas(!0,!0),pp.width=Math.min(Math.max(pp.width,pp.minWidth),pp.maxWidth),pp.height=Math.min(Math.max(pp.height,pp.minHeight),pp.maxHeight),pp.left=(rp.width-pp.width)/2,pp.top=(rp.height-pp.height)/2,pp.oldLeft=pp.left,pp.oldTop=pp.top,this.initialCanvasData=assign({},pp)},limitCanvas:function _d(rp,np){var ap=this.options,sp=this.containerData,lp=this.canvasData,up=this.cropBoxData,cp=ap.viewMode,dp=lp.aspectRatio,fp=this.cropped&&up;if(rp){var pp=Number(ap.minCanvasWidth)||0,hp=Number(ap.minCanvasHeight)||0;cp>1?(pp=Math.max(pp,sp.width),hp=Math.max(hp,sp.height),cp===3&&(hp*dp>pp?pp=hp*dp:hp=pp/dp)):cp>0&&(pp?pp=Math.max(pp,fp?up.width:0):hp?hp=Math.max(hp,fp?up.height:0):fp&&(pp=up.width,hp=up.height,hp*dp>pp?pp=hp*dp:hp=pp/dp));var mp=getAdjustedSizes({aspectRatio:dp,width:pp,height:hp});pp=mp.width,hp=mp.height,lp.minWidth=pp,lp.minHeight=hp,lp.maxWidth=1/0,lp.maxHeight=1/0}if(np)if(cp>(fp?0:1)){var gp=sp.width-lp.width,vp=sp.height-lp.height;lp.minLeft=Math.min(0,gp),lp.minTop=Math.min(0,vp),lp.maxLeft=Math.max(0,gp),lp.maxTop=Math.max(0,vp),fp&&this.limited&&(lp.minLeft=Math.min(up.left,up.left+(up.width-lp.width)),lp.minTop=Math.min(up.top,up.top+(up.height-lp.height)),lp.maxLeft=up.left,lp.maxTop=up.top,cp===2&&(lp.width>=sp.width&&(lp.minLeft=Math.min(0,gp),lp.maxLeft=Math.max(0,gp)),lp.height>=sp.height&&(lp.minTop=Math.min(0,vp),lp.maxTop=Math.max(0,vp))))}else lp.minLeft=-lp.width,lp.minTop=-lp.height,lp.maxLeft=sp.width,lp.maxTop=sp.height},renderCanvas:function _d(rp,np){var ap=this.canvasData,sp=this.imageData;if(np){var lp=getRotatedSizes({width:sp.naturalWidth*Math.abs(sp.scaleX||1),height:sp.naturalHeight*Math.abs(sp.scaleY||1),degree:sp.rotate||0}),up=lp.width,cp=lp.height,dp=ap.width*(up/ap.naturalWidth),fp=ap.height*(cp/ap.naturalHeight);ap.left-=(dp-ap.width)/2,ap.top-=(fp-ap.height)/2,ap.width=dp,ap.height=fp,ap.aspectRatio=up/cp,ap.naturalWidth=up,ap.naturalHeight=cp,this.limitCanvas(!0,!1)}(ap.width>ap.maxWidth||ap.width<ap.minWidth)&&(ap.left=ap.oldLeft),(ap.height>ap.maxHeight||ap.height<ap.minHeight)&&(ap.top=ap.oldTop),ap.width=Math.min(Math.max(ap.width,ap.minWidth),ap.maxWidth),ap.height=Math.min(Math.max(ap.height,ap.minHeight),ap.maxHeight),this.limitCanvas(!1,!0),ap.left=Math.min(Math.max(ap.left,ap.minLeft),ap.maxLeft),ap.top=Math.min(Math.max(ap.top,ap.minTop),ap.maxTop),ap.oldLeft=ap.left,ap.oldTop=ap.top,setStyle(this.canvas,assign({width:ap.width,height:ap.height},getTransforms({translateX:ap.left,translateY:ap.top}))),this.renderImage(rp),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function _d(rp){var np=this.canvasData,ap=this.imageData,sp=ap.naturalWidth*(np.width/np.naturalWidth),lp=ap.naturalHeight*(np.height/np.naturalHeight);assign(ap,{width:sp,height:lp,left:(np.width-sp)/2,top:(np.height-lp)/2}),setStyle(this.image,assign({width:ap.width,height:ap.height},getTransforms(assign({translateX:ap.left,translateY:ap.top},ap)))),rp&&this.output()},initCropBox:function _d(){var rp=this.options,np=this.canvasData,ap=rp.aspectRatio||rp.initialAspectRatio,sp=Number(rp.autoCropArea)||.8,lp={width:np.width,height:np.height};ap&&(np.height*ap>np.width?lp.height=lp.width/ap:lp.width=lp.height*ap),this.cropBoxData=lp,this.limitCropBox(!0,!0),lp.width=Math.min(Math.max(lp.width,lp.minWidth),lp.maxWidth),lp.height=Math.min(Math.max(lp.height,lp.minHeight),lp.maxHeight),lp.width=Math.max(lp.minWidth,lp.width*sp),lp.height=Math.max(lp.minHeight,lp.height*sp),lp.left=np.left+(np.width-lp.width)/2,lp.top=np.top+(np.height-lp.height)/2,lp.oldLeft=lp.left,lp.oldTop=lp.top,this.initialCropBoxData=assign({},lp)},limitCropBox:function _d(rp,np){var ap=this.options,sp=this.containerData,lp=this.canvasData,up=this.cropBoxData,cp=this.limited,dp=ap.aspectRatio;if(rp){var fp=Number(ap.minCropBoxWidth)||0,pp=Number(ap.minCropBoxHeight)||0,hp=cp?Math.min(sp.width,lp.width,lp.width+lp.left,sp.width-lp.left):sp.width,mp=cp?Math.min(sp.height,lp.height,lp.height+lp.top,sp.height-lp.top):sp.height;fp=Math.min(fp,sp.width),pp=Math.min(pp,sp.height),dp&&(fp&&pp?pp*dp>fp?pp=fp/dp:fp=pp*dp:fp?pp=fp/dp:pp&&(fp=pp*dp),mp*dp>hp?mp=hp/dp:hp=mp*dp),up.minWidth=Math.min(fp,hp),up.minHeight=Math.min(pp,mp),up.maxWidth=hp,up.maxHeight=mp}np&&(cp?(up.minLeft=Math.max(0,lp.left),up.minTop=Math.max(0,lp.top),up.maxLeft=Math.min(sp.width,lp.left+lp.width)-up.width,up.maxTop=Math.min(sp.height,lp.top+lp.height)-up.height):(up.minLeft=0,up.minTop=0,up.maxLeft=sp.width-up.width,up.maxTop=sp.height-up.height))},renderCropBox:function _d(){var rp=this.options,np=this.containerData,ap=this.cropBoxData;(ap.width>ap.maxWidth||ap.width<ap.minWidth)&&(ap.left=ap.oldLeft),(ap.height>ap.maxHeight||ap.height<ap.minHeight)&&(ap.top=ap.oldTop),ap.width=Math.min(Math.max(ap.width,ap.minWidth),ap.maxWidth),ap.height=Math.min(Math.max(ap.height,ap.minHeight),ap.maxHeight),this.limitCropBox(!1,!0),ap.left=Math.min(Math.max(ap.left,ap.minLeft),ap.maxLeft),ap.top=Math.min(Math.max(ap.top,ap.minTop),ap.maxTop),ap.oldLeft=ap.left,ap.oldTop=ap.top,rp.movable&&rp.cropBoxMovable&&setData(this.face,DATA_ACTION,ap.width>=np.width&&ap.height>=np.height?ACTION_MOVE:ACTION_ALL),setStyle(this.cropBox,assign({width:ap.width,height:ap.height},getTransforms({translateX:ap.left,translateY:ap.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function _d(){this.preview(),dispatchEvent(this.element,EVENT_CROP,this.getData())}},preview={initPreview:function _d(){var rp=this.element,np=this.crossOrigin,ap=this.options.preview,sp=np?this.crossOriginUrl:this.url,lp=rp.alt||"The image to preview",up=document.createElement("img");if(np&&(up.crossOrigin=np),up.src=sp,up.alt=lp,this.viewBox.appendChild(up),this.viewBoxImage=up,!!ap){var cp=ap;typeof ap=="string"?cp=rp.ownerDocument.querySelectorAll(ap):ap.querySelector&&(cp=[ap]),this.previews=cp,forEach(cp,function(dp){var fp=document.createElement("img");setData(dp,DATA_PREVIEW,{width:dp.offsetWidth,height:dp.offsetHeight,html:dp.innerHTML}),np&&(fp.crossOrigin=np),fp.src=sp,fp.alt=lp,fp.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',dp.innerHTML="",dp.appendChild(fp)})}},resetPreview:function _d(){forEach(this.previews,function(rp){var np=getData(rp,DATA_PREVIEW);setStyle(rp,{width:np.width,height:np.height}),rp.innerHTML=np.html,removeData(rp,DATA_PREVIEW)})},preview:function _d(){var rp=this.imageData,np=this.canvasData,ap=this.cropBoxData,sp=ap.width,lp=ap.height,up=rp.width,cp=rp.height,dp=ap.left-np.left-rp.left,fp=ap.top-np.top-rp.top;!this.cropped||this.disabled||(setStyle(this.viewBoxImage,assign({width:up,height:cp},getTransforms(assign({translateX:-dp,translateY:-fp},rp)))),forEach(this.previews,function(pp){var hp=getData(pp,DATA_PREVIEW),mp=hp.width,gp=hp.height,vp=mp,xp=gp,Sp=1;sp&&(Sp=mp/sp,xp=lp*Sp),lp&&xp>gp&&(Sp=gp/lp,vp=sp*Sp,xp=gp),setStyle(pp,{width:vp,height:xp}),setStyle(pp.getElementsByTagName("img")[0],assign({width:up*Sp,height:cp*Sp},getTransforms(assign({translateX:-dp*Sp,translateY:-fp*Sp},rp))))}))}},events$1={bind:function _d(){var rp=this.element,np=this.options,ap=this.cropper;isFunction(np.cropstart)&&addListener(rp,EVENT_CROP_START,np.cropstart),isFunction(np.cropmove)&&addListener(rp,EVENT_CROP_MOVE,np.cropmove),isFunction(np.cropend)&&addListener(rp,EVENT_CROP_END,np.cropend),isFunction(np.crop)&&addListener(rp,EVENT_CROP,np.crop),isFunction(np.zoom)&&addListener(rp,EVENT_ZOOM,np.zoom),addListener(ap,EVENT_POINTER_DOWN,this.onCropStart=this.cropStart.bind(this)),np.zoomable&&np.zoomOnWheel&&addListener(ap,EVENT_WHEEL,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),np.toggleDragModeOnDblclick&&addListener(ap,EVENT_DBLCLICK,this.onDblclick=this.dblclick.bind(this)),addListener(rp.ownerDocument,EVENT_POINTER_MOVE,this.onCropMove=this.cropMove.bind(this)),addListener(rp.ownerDocument,EVENT_POINTER_UP,this.onCropEnd=this.cropEnd.bind(this)),np.responsive&&addListener(window,EVENT_RESIZE,this.onResize=this.resize.bind(this))},unbind:function _d(){var rp=this.element,np=this.options,ap=this.cropper;isFunction(np.cropstart)&&removeListener(rp,EVENT_CROP_START,np.cropstart),isFunction(np.cropmove)&&removeListener(rp,EVENT_CROP_MOVE,np.cropmove),isFunction(np.cropend)&&removeListener(rp,EVENT_CROP_END,np.cropend),isFunction(np.crop)&&removeListener(rp,EVENT_CROP,np.crop),isFunction(np.zoom)&&removeListener(rp,EVENT_ZOOM,np.zoom),removeListener(ap,EVENT_POINTER_DOWN,this.onCropStart),np.zoomable&&np.zoomOnWheel&&removeListener(ap,EVENT_WHEEL,this.onWheel,{passive:!1,capture:!0}),np.toggleDragModeOnDblclick&&removeListener(ap,EVENT_DBLCLICK,this.onDblclick),removeListener(rp.ownerDocument,EVENT_POINTER_MOVE,this.onCropMove),removeListener(rp.ownerDocument,EVENT_POINTER_UP,this.onCropEnd),np.responsive&&removeListener(window,EVENT_RESIZE,this.onResize)}},handlers={resize:function _d(){if(!this.disabled){var rp=this.options,np=this.container,ap=this.containerData,sp=np.offsetWidth/ap.width,lp=np.offsetHeight/ap.height,up=Math.abs(sp-1)>Math.abs(lp-1)?sp:lp;if(up!==1){var cp,dp;rp.restore&&(cp=this.getCanvasData(),dp=this.getCropBoxData()),this.render(),rp.restore&&(this.setCanvasData(forEach(cp,function(fp,pp){cp[pp]=fp*up})),this.setCropBoxData(forEach(dp,function(fp,pp){dp[pp]=fp*up})))}}},dblclick:function _d(){this.disabled||this.options.dragMode===DRAG_MODE_NONE||this.setDragMode(hasClass(this.dragBox,CLASS_CROP)?DRAG_MODE_MOVE:DRAG_MODE_CROP)},wheel:function _d(rp){var np=this,ap=Number(this.options.wheelZoomRatio)||.1,sp=1;this.disabled||(rp.preventDefault(),!this.wheeling&&(this.wheeling=!0,setTimeout(function(){np.wheeling=!1},50),rp.deltaY?sp=rp.deltaY>0?1:-1:rp.wheelDelta?sp=-rp.wheelDelta/120:rp.detail&&(sp=rp.detail>0?1:-1),this.zoom(-sp*ap,rp)))},cropStart:function _d(rp){var np=rp.buttons,ap=rp.button;if(!(this.disabled||(rp.type==="mousedown"||rp.type==="pointerdown"&&rp.pointerType==="mouse")&&(isNumber(np)&&np!==1||isNumber(ap)&&ap!==0||rp.ctrlKey))){var sp=this.options,lp=this.pointers,up;rp.changedTouches?forEach(rp.changedTouches,function(cp){lp[cp.identifier]=getPointer(cp)}):lp[rp.pointerId||0]=getPointer(rp),Object.keys(lp).length>1&&sp.zoomable&&sp.zoomOnTouch?up=ACTION_ZOOM:up=getData(rp.target,DATA_ACTION),REGEXP_ACTIONS.test(up)&&dispatchEvent(this.element,EVENT_CROP_START,{originalEvent:rp,action:up})!==!1&&(rp.preventDefault(),this.action=up,this.cropping=!1,up===ACTION_CROP&&(this.cropping=!0,addClass(this.dragBox,CLASS_MODAL)))}},cropMove:function _d(rp){var np=this.action;if(!(this.disabled||!np)){var ap=this.pointers;rp.preventDefault(),dispatchEvent(this.element,EVENT_CROP_MOVE,{originalEvent:rp,action:np})!==!1&&(rp.changedTouches?forEach(rp.changedTouches,function(sp){assign(ap[sp.identifier]||{},getPointer(sp,!0))}):assign(ap[rp.pointerId||0]||{},getPointer(rp,!0)),this.change(rp))}},cropEnd:function _d(rp){if(!this.disabled){var np=this.action,ap=this.pointers;rp.changedTouches?forEach(rp.changedTouches,function(sp){delete ap[sp.identifier]}):delete ap[rp.pointerId||0],np&&(rp.preventDefault(),Object.keys(ap).length||(this.action=""),this.cropping&&(this.cropping=!1,toggleClass(this.dragBox,CLASS_MODAL,this.cropped&&this.options.modal)),dispatchEvent(this.element,EVENT_CROP_END,{originalEvent:rp,action:np}))}}},change={change:function _d(rp){var np=this.options,ap=this.canvasData,sp=this.containerData,lp=this.cropBoxData,up=this.pointers,cp=this.action,dp=np.aspectRatio,fp=lp.left,pp=lp.top,hp=lp.width,mp=lp.height,gp=fp+hp,vp=pp+mp,xp=0,Sp=0,yp=sp.width,bp=sp.height,Ep=!0,wp;!dp&&rp.shiftKey&&(dp=hp&&mp?hp/mp:1),this.limited&&(xp=lp.minLeft,Sp=lp.minTop,yp=xp+Math.min(sp.width,ap.width,ap.left+ap.width),bp=Sp+Math.min(sp.height,ap.height,ap.top+ap.height));var _p=up[Object.keys(up)[0]],Rp={x:_p.endX-_p.startX,y:_p.endY-_p.startY},$p=function(Ap){switch(Ap){case ACTION_EAST:gp+Rp.x>yp&&(Rp.x=yp-gp);break;case ACTION_WEST:fp+Rp.x<xp&&(Rp.x=xp-fp);break;case ACTION_NORTH:pp+Rp.y<Sp&&(Rp.y=Sp-pp);break;case ACTION_SOUTH:vp+Rp.y>bp&&(Rp.y=bp-vp);break}};switch(cp){case ACTION_ALL:fp+=Rp.x,pp+=Rp.y;break;case ACTION_EAST:if(Rp.x>=0&&(gp>=yp||dp&&(pp<=Sp||vp>=bp))){Ep=!1;break}$p(ACTION_EAST),hp+=Rp.x,hp<0&&(cp=ACTION_WEST,hp=-hp,fp-=hp),dp&&(mp=hp/dp,pp+=(lp.height-mp)/2);break;case ACTION_NORTH:if(Rp.y<=0&&(pp<=Sp||dp&&(fp<=xp||gp>=yp))){Ep=!1;break}$p(ACTION_NORTH),mp-=Rp.y,pp+=Rp.y,mp<0&&(cp=ACTION_SOUTH,mp=-mp,pp-=mp),dp&&(hp=mp*dp,fp+=(lp.width-hp)/2);break;case ACTION_WEST:if(Rp.x<=0&&(fp<=xp||dp&&(pp<=Sp||vp>=bp))){Ep=!1;break}$p(ACTION_WEST),hp-=Rp.x,fp+=Rp.x,hp<0&&(cp=ACTION_EAST,hp=-hp,fp-=hp),dp&&(mp=hp/dp,pp+=(lp.height-mp)/2);break;case ACTION_SOUTH:if(Rp.y>=0&&(vp>=bp||dp&&(fp<=xp||gp>=yp))){Ep=!1;break}$p(ACTION_SOUTH),mp+=Rp.y,mp<0&&(cp=ACTION_NORTH,mp=-mp,pp-=mp),dp&&(hp=mp*dp,fp+=(lp.width-hp)/2);break;case ACTION_NORTH_EAST:if(dp){if(Rp.y<=0&&(pp<=Sp||gp>=yp)){Ep=!1;break}$p(ACTION_NORTH),mp-=Rp.y,pp+=Rp.y,hp=mp*dp}else $p(ACTION_NORTH),$p(ACTION_EAST),Rp.x>=0?gp<yp?hp+=Rp.x:Rp.y<=0&&pp<=Sp&&(Ep=!1):hp+=Rp.x,Rp.y<=0?pp>Sp&&(mp-=Rp.y,pp+=Rp.y):(mp-=Rp.y,pp+=Rp.y);hp<0&&mp<0?(cp=ACTION_SOUTH_WEST,mp=-mp,hp=-hp,pp-=mp,fp-=hp):hp<0?(cp=ACTION_NORTH_WEST,hp=-hp,fp-=hp):mp<0&&(cp=ACTION_SOUTH_EAST,mp=-mp,pp-=mp);break;case ACTION_NORTH_WEST:if(dp){if(Rp.y<=0&&(pp<=Sp||fp<=xp)){Ep=!1;break}$p(ACTION_NORTH),mp-=Rp.y,pp+=Rp.y,hp=mp*dp,fp+=lp.width-hp}else $p(ACTION_NORTH),$p(ACTION_WEST),Rp.x<=0?fp>xp?(hp-=Rp.x,fp+=Rp.x):Rp.y<=0&&pp<=Sp&&(Ep=!1):(hp-=Rp.x,fp+=Rp.x),Rp.y<=0?pp>Sp&&(mp-=Rp.y,pp+=Rp.y):(mp-=Rp.y,pp+=Rp.y);hp<0&&mp<0?(cp=ACTION_SOUTH_EAST,mp=-mp,hp=-hp,pp-=mp,fp-=hp):hp<0?(cp=ACTION_NORTH_EAST,hp=-hp,fp-=hp):mp<0&&(cp=ACTION_SOUTH_WEST,mp=-mp,pp-=mp);break;case ACTION_SOUTH_WEST:if(dp){if(Rp.x<=0&&(fp<=xp||vp>=bp)){Ep=!1;break}$p(ACTION_WEST),hp-=Rp.x,fp+=Rp.x,mp=hp/dp}else $p(ACTION_SOUTH),$p(ACTION_WEST),Rp.x<=0?fp>xp?(hp-=Rp.x,fp+=Rp.x):Rp.y>=0&&vp>=bp&&(Ep=!1):(hp-=Rp.x,fp+=Rp.x),Rp.y>=0?vp<bp&&(mp+=Rp.y):mp+=Rp.y;hp<0&&mp<0?(cp=ACTION_NORTH_EAST,mp=-mp,hp=-hp,pp-=mp,fp-=hp):hp<0?(cp=ACTION_SOUTH_EAST,hp=-hp,fp-=hp):mp<0&&(cp=ACTION_NORTH_WEST,mp=-mp,pp-=mp);break;case ACTION_SOUTH_EAST:if(dp){if(Rp.x>=0&&(gp>=yp||vp>=bp)){Ep=!1;break}$p(ACTION_EAST),hp+=Rp.x,mp=hp/dp}else $p(ACTION_SOUTH),$p(ACTION_EAST),Rp.x>=0?gp<yp?hp+=Rp.x:Rp.y>=0&&vp>=bp&&(Ep=!1):hp+=Rp.x,Rp.y>=0?vp<bp&&(mp+=Rp.y):mp+=Rp.y;hp<0&&mp<0?(cp=ACTION_NORTH_WEST,mp=-mp,hp=-hp,pp-=mp,fp-=hp):hp<0?(cp=ACTION_SOUTH_WEST,hp=-hp,fp-=hp):mp<0&&(cp=ACTION_NORTH_EAST,mp=-mp,pp-=mp);break;case ACTION_MOVE:this.move(Rp.x,Rp.y),Ep=!1;break;case ACTION_ZOOM:this.zoom(getMaxZoomRatio(up),rp),Ep=!1;break;case ACTION_CROP:if(!Rp.x||!Rp.y){Ep=!1;break}wp=getOffset(this.cropper),fp=_p.startX-wp.left,pp=_p.startY-wp.top,hp=lp.minWidth,mp=lp.minHeight,Rp.x>0?cp=Rp.y>0?ACTION_SOUTH_EAST:ACTION_NORTH_EAST:Rp.x<0&&(fp-=hp,cp=Rp.y>0?ACTION_SOUTH_WEST:ACTION_NORTH_WEST),Rp.y<0&&(pp-=mp),this.cropped||(removeClass(this.cropBox,CLASS_HIDDEN),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0));break}Ep&&(lp.width=hp,lp.height=mp,lp.left=fp,lp.top=pp,this.action=cp,this.renderCropBox()),forEach(up,function(Cp){Cp.startX=Cp.endX,Cp.startY=Cp.endY})}},methods={crop:function _d(){return this.ready&&!this.cropped&&!this.disabled&&(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&addClass(this.dragBox,CLASS_MODAL),removeClass(this.cropBox,CLASS_HIDDEN),this.setCropBoxData(this.initialCropBoxData)),this},reset:function _d(){return this.ready&&!this.disabled&&(this.imageData=assign({},this.initialImageData),this.canvasData=assign({},this.initialCanvasData),this.cropBoxData=assign({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function _d(){return this.cropped&&!this.disabled&&(assign(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),removeClass(this.dragBox,CLASS_MODAL),addClass(this.cropBox,CLASS_HIDDEN)),this},replace:function _d(rp){var np=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return!this.disabled&&rp&&(this.isImg&&(this.element.src=rp),np?(this.url=rp,this.image.src=rp,this.ready&&(this.viewBoxImage.src=rp,forEach(this.previews,function(ap){ap.getElementsByTagName("img")[0].src=rp}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(rp))),this},enable:function _d(){return this.ready&&this.disabled&&(this.disabled=!1,removeClass(this.cropper,CLASS_DISABLED)),this},disable:function _d(){return this.ready&&!this.disabled&&(this.disabled=!0,addClass(this.cropper,CLASS_DISABLED)),this},destroy:function _d(){var rp=this.element;return rp[NAMESPACE]?(rp[NAMESPACE]=void 0,this.isImg&&this.replaced&&(rp.src=this.originalUrl),this.uncreate(),this):this},move:function _d(rp){var np=arguments.length>1&&arguments[1]!==void 0?arguments[1]:rp,ap=this.canvasData,sp=ap.left,lp=ap.top;return this.moveTo(isUndefined(rp)?rp:sp+Number(rp),isUndefined(np)?np:lp+Number(np))},moveTo:function _d(rp){var np=arguments.length>1&&arguments[1]!==void 0?arguments[1]:rp,ap=this.canvasData,sp=!1;return rp=Number(rp),np=Number(np),this.ready&&!this.disabled&&this.options.movable&&(isNumber(rp)&&(ap.left=rp,sp=!0),isNumber(np)&&(ap.top=np,sp=!0),sp&&this.renderCanvas(!0)),this},zoom:function _d(rp,np){var ap=this.canvasData;return rp=Number(rp),rp<0?rp=1/(1-rp):rp=1+rp,this.zoomTo(ap.width*rp/ap.naturalWidth,null,np)},zoomTo:function _d(rp,np,ap){var sp=this.options,lp=this.canvasData,up=lp.width,cp=lp.height,dp=lp.naturalWidth,fp=lp.naturalHeight;if(rp=Number(rp),rp>=0&&this.ready&&!this.disabled&&sp.zoomable){var pp=dp*rp,hp=fp*rp;if(dispatchEvent(this.element,EVENT_ZOOM,{ratio:rp,oldRatio:up/dp,originalEvent:ap})===!1)return this;if(ap){var mp=this.pointers,gp=getOffset(this.cropper),vp=mp&&Object.keys(mp).length?getPointersCenter(mp):{pageX:ap.pageX,pageY:ap.pageY};lp.left-=(pp-up)*((vp.pageX-gp.left-lp.left)/up),lp.top-=(hp-cp)*((vp.pageY-gp.top-lp.top)/cp)}else isPlainObject(np)&&isNumber(np.x)&&isNumber(np.y)?(lp.left-=(pp-up)*((np.x-lp.left)/up),lp.top-=(hp-cp)*((np.y-lp.top)/cp)):(lp.left-=(pp-up)/2,lp.top-=(hp-cp)/2);lp.width=pp,lp.height=hp,this.renderCanvas(!0)}return this},rotate:function _d(rp){return this.rotateTo((this.imageData.rotate||0)+Number(rp))},rotateTo:function _d(rp){return rp=Number(rp),isNumber(rp)&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=rp%360,this.renderCanvas(!0,!0)),this},scaleX:function _d(rp){var np=this.imageData.scaleY;return this.scale(rp,isNumber(np)?np:1)},scaleY:function _d(rp){var np=this.imageData.scaleX;return this.scale(isNumber(np)?np:1,rp)},scale:function _d(rp){var np=arguments.length>1&&arguments[1]!==void 0?arguments[1]:rp,ap=this.imageData,sp=!1;return rp=Number(rp),np=Number(np),this.ready&&!this.disabled&&this.options.scalable&&(isNumber(rp)&&(ap.scaleX=rp,sp=!0),isNumber(np)&&(ap.scaleY=np,sp=!0),sp&&this.renderCanvas(!0,!0)),this},getData:function _d(){var rp=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,np=this.options,ap=this.imageData,sp=this.canvasData,lp=this.cropBoxData,up;if(this.ready&&this.cropped){up={x:lp.left-sp.left,y:lp.top-sp.top,width:lp.width,height:lp.height};var cp=ap.width/ap.naturalWidth;if(forEach(up,function(pp,hp){up[hp]=pp/cp}),rp){var dp=Math.round(up.y+up.height),fp=Math.round(up.x+up.width);up.x=Math.round(up.x),up.y=Math.round(up.y),up.width=fp-up.x,up.height=dp-up.y}}else up={x:0,y:0,width:0,height:0};return np.rotatable&&(up.rotate=ap.rotate||0),np.scalable&&(up.scaleX=ap.scaleX||1,up.scaleY=ap.scaleY||1),up},setData:function _d(rp){var np=this.options,ap=this.imageData,sp=this.canvasData,lp={};if(this.ready&&!this.disabled&&isPlainObject(rp)){var up=!1;np.rotatable&&isNumber(rp.rotate)&&rp.rotate!==ap.rotate&&(ap.rotate=rp.rotate,up=!0),np.scalable&&(isNumber(rp.scaleX)&&rp.scaleX!==ap.scaleX&&(ap.scaleX=rp.scaleX,up=!0),isNumber(rp.scaleY)&&rp.scaleY!==ap.scaleY&&(ap.scaleY=rp.scaleY,up=!0)),up&&this.renderCanvas(!0,!0);var cp=ap.width/ap.naturalWidth;isNumber(rp.x)&&(lp.left=rp.x*cp+sp.left),isNumber(rp.y)&&(lp.top=rp.y*cp+sp.top),isNumber(rp.width)&&(lp.width=rp.width*cp),isNumber(rp.height)&&(lp.height=rp.height*cp),this.setCropBoxData(lp)}return this},getContainerData:function _d(){return this.ready?assign({},this.containerData):{}},getImageData:function _d(){return this.sized?assign({},this.imageData):{}},getCanvasData:function _d(){var rp=this.canvasData,np={};return this.ready&&forEach(["left","top","width","height","naturalWidth","naturalHeight"],function(ap){np[ap]=rp[ap]}),np},setCanvasData:function _d(rp){var np=this.canvasData,ap=np.aspectRatio;return this.ready&&!this.disabled&&isPlainObject(rp)&&(isNumber(rp.left)&&(np.left=rp.left),isNumber(rp.top)&&(np.top=rp.top),isNumber(rp.width)?(np.width=rp.width,np.height=rp.width/ap):isNumber(rp.height)&&(np.height=rp.height,np.width=rp.height*ap),this.renderCanvas(!0)),this},getCropBoxData:function _d(){var rp=this.cropBoxData,np;return this.ready&&this.cropped&&(np={left:rp.left,top:rp.top,width:rp.width,height:rp.height}),np||{}},setCropBoxData:function _d(rp){var np=this.cropBoxData,ap=this.options.aspectRatio,sp,lp;return this.ready&&this.cropped&&!this.disabled&&isPlainObject(rp)&&(isNumber(rp.left)&&(np.left=rp.left),isNumber(rp.top)&&(np.top=rp.top),isNumber(rp.width)&&rp.width!==np.width&&(sp=!0,np.width=rp.width),isNumber(rp.height)&&rp.height!==np.height&&(lp=!0,np.height=rp.height),ap&&(sp?np.height=np.width/ap:lp&&(np.width=np.height*ap)),this.renderCropBox()),this},getCroppedCanvas:function _d(){var rp=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var np=this.canvasData,ap=getSourceCanvas(this.image,this.imageData,np,rp);if(!this.cropped)return ap;var sp=this.getData(rp.rounded),lp=sp.x,up=sp.y,cp=sp.width,dp=sp.height,fp=ap.width/Math.floor(np.naturalWidth);fp!==1&&(lp*=fp,up*=fp,cp*=fp,dp*=fp);var pp=cp/dp,hp=getAdjustedSizes({aspectRatio:pp,width:rp.maxWidth||1/0,height:rp.maxHeight||1/0}),mp=getAdjustedSizes({aspectRatio:pp,width:rp.minWidth||0,height:rp.minHeight||0},"cover"),gp=getAdjustedSizes({aspectRatio:pp,width:rp.width||(fp!==1?ap.width:cp),height:rp.height||(fp!==1?ap.height:dp)}),vp=gp.width,xp=gp.height;vp=Math.min(hp.width,Math.max(mp.width,vp)),xp=Math.min(hp.height,Math.max(mp.height,xp));var Sp=document.createElement("canvas"),yp=Sp.getContext("2d");Sp.width=normalizeDecimalNumber(vp),Sp.height=normalizeDecimalNumber(xp),yp.fillStyle=rp.fillColor||"transparent",yp.fillRect(0,0,vp,xp);var bp=rp.imageSmoothingEnabled,Ep=bp===void 0?!0:bp,wp=rp.imageSmoothingQuality;yp.imageSmoothingEnabled=Ep,wp&&(yp.imageSmoothingQuality=wp);var _p=ap.width,Rp=ap.height,$p=lp,Cp=up,Ap,Op,Lp,Mp,kp,Dp;$p<=-cp||$p>_p?($p=0,Ap=0,Lp=0,kp=0):$p<=0?(Lp=-$p,$p=0,Ap=Math.min(_p,cp+$p),kp=Ap):$p<=_p&&(Lp=0,Ap=Math.min(cp,_p-$p),kp=Ap),Ap<=0||Cp<=-dp||Cp>Rp?(Cp=0,Op=0,Mp=0,Dp=0):Cp<=0?(Mp=-Cp,Cp=0,Op=Math.min(Rp,dp+Cp),Dp=Op):Cp<=Rp&&(Mp=0,Op=Math.min(dp,Rp-Cp),Dp=Op);var Fp=[$p,Cp,Ap,Op];if(kp>0&&Dp>0){var Ip=vp/cp;Fp.push(Lp*Ip,Mp*Ip,kp*Ip,Dp*Ip)}return yp.drawImage.apply(yp,[ap].concat(_toConsumableArray(Fp.map(function(Pp){return Math.floor(normalizeDecimalNumber(Pp))})))),Sp},setAspectRatio:function _d(rp){var np=this.options;return!this.disabled&&!isUndefined(rp)&&(np.aspectRatio=Math.max(0,rp)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function _d(rp){var np=this.options,ap=this.dragBox,sp=this.face;if(this.ready&&!this.disabled){var lp=rp===DRAG_MODE_CROP,up=np.movable&&rp===DRAG_MODE_MOVE;rp=lp||up?rp:DRAG_MODE_NONE,np.dragMode=rp,setData(ap,DATA_ACTION,rp),toggleClass(ap,CLASS_CROP,lp),toggleClass(ap,CLASS_MOVE,up),np.cropBoxMovable||(setData(sp,DATA_ACTION,rp),toggleClass(sp,CLASS_CROP,lp),toggleClass(sp,CLASS_MOVE,up))}return this}},AnotherCropper=WINDOW.Cropper,Cropper=function(){function _d(rp){var np=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(_classCallCheck(this,_d),!rp||!REGEXP_TAG_NAME.test(rp.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=rp,this.options=assign({},DEFAULTS,isPlainObject(np)&&np),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return _createClass(_d,[{key:"init",value:function(){var np=this.element,ap=np.tagName.toLowerCase(),sp;if(!np[NAMESPACE]){if(np[NAMESPACE]=this,ap==="img"){if(this.isImg=!0,sp=np.getAttribute("src")||"",this.originalUrl=sp,!sp)return;sp=np.src}else ap==="canvas"&&window.HTMLCanvasElement&&(sp=np.toDataURL());this.load(sp)}}},{key:"load",value:function(np){var ap=this;if(np){this.url=np,this.imageData={};var sp=this.element,lp=this.options;if(!lp.rotatable&&!lp.scalable&&(lp.checkOrientation=!1),!lp.checkOrientation||!window.ArrayBuffer){this.clone();return}if(REGEXP_DATA_URL.test(np)){REGEXP_DATA_URL_JPEG.test(np)?this.read(dataURLToArrayBuffer(np)):this.clone();return}var up=new XMLHttpRequest,cp=this.clone.bind(this);this.reloading=!0,this.xhr=up,up.onabort=cp,up.onerror=cp,up.ontimeout=cp,up.onprogress=function(){up.getResponseHeader("content-type")!==MIME_TYPE_JPEG&&up.abort()},up.onload=function(){ap.read(up.response)},up.onloadend=function(){ap.reloading=!1,ap.xhr=null},lp.checkCrossOrigin&&isCrossOriginURL(np)&&sp.crossOrigin&&(np=addTimestamp(np)),up.open("GET",np,!0),up.responseType="arraybuffer",up.withCredentials=sp.crossOrigin==="use-credentials",up.send()}}},{key:"read",value:function(np){var ap=this.options,sp=this.imageData,lp=resetAndGetOrientation(np),up=0,cp=1,dp=1;if(lp>1){this.url=arrayBufferToDataURL(np,MIME_TYPE_JPEG);var fp=parseOrientation(lp);up=fp.rotate,cp=fp.scaleX,dp=fp.scaleY}ap.rotatable&&(sp.rotate=up),ap.scalable&&(sp.scaleX=cp,sp.scaleY=dp),this.clone()}},{key:"clone",value:function(){var np=this.element,ap=this.url,sp=np.crossOrigin,lp=ap;this.options.checkCrossOrigin&&isCrossOriginURL(ap)&&(sp||(sp="anonymous"),lp=addTimestamp(ap)),this.crossOrigin=sp,this.crossOriginUrl=lp;var up=document.createElement("img");sp&&(up.crossOrigin=sp),up.src=lp||ap,up.alt=np.alt||"The image to crop",this.image=up,up.onload=this.start.bind(this),up.onerror=this.stop.bind(this),addClass(up,CLASS_HIDE),np.parentNode.insertBefore(up,np.nextSibling)}},{key:"start",value:function(){var np=this,ap=this.image;ap.onload=null,ap.onerror=null,this.sizing=!0;var sp=WINDOW.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(WINDOW.navigator.userAgent),lp=function(fp,pp){assign(np.imageData,{naturalWidth:fp,naturalHeight:pp,aspectRatio:fp/pp}),np.initialImageData=assign({},np.imageData),np.sizing=!1,np.sized=!0,np.build()};if(ap.naturalWidth&&!sp){lp(ap.naturalWidth,ap.naturalHeight);return}var up=document.createElement("img"),cp=document.body||document.documentElement;this.sizingImage=up,up.onload=function(){lp(up.width,up.height),sp||cp.removeChild(up)},up.src=ap.src,sp||(up.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",cp.appendChild(up))}},{key:"stop",value:function(){var np=this.image;np.onload=null,np.onerror=null,np.parentNode.removeChild(np),this.image=null}},{key:"build",value:function(){if(!(!this.sized||this.ready)){var np=this.element,ap=this.options,sp=this.image,lp=np.parentNode,up=document.createElement("div");up.innerHTML=TEMPLATE;var cp=up.querySelector(".".concat(NAMESPACE,"-container")),dp=cp.querySelector(".".concat(NAMESPACE,"-canvas")),fp=cp.querySelector(".".concat(NAMESPACE,"-drag-box")),pp=cp.querySelector(".".concat(NAMESPACE,"-crop-box")),hp=pp.querySelector(".".concat(NAMESPACE,"-face"));this.container=lp,this.cropper=cp,this.canvas=dp,this.dragBox=fp,this.cropBox=pp,this.viewBox=cp.querySelector(".".concat(NAMESPACE,"-view-box")),this.face=hp,dp.appendChild(sp),addClass(np,CLASS_HIDDEN),lp.insertBefore(cp,np.nextSibling),removeClass(sp,CLASS_HIDE),this.initPreview(),this.bind(),ap.initialAspectRatio=Math.max(0,ap.initialAspectRatio)||NaN,ap.aspectRatio=Math.max(0,ap.aspectRatio)||NaN,ap.viewMode=Math.max(0,Math.min(3,Math.round(ap.viewMode)))||0,addClass(pp,CLASS_HIDDEN),ap.guides||addClass(pp.getElementsByClassName("".concat(NAMESPACE,"-dashed")),CLASS_HIDDEN),ap.center||addClass(pp.getElementsByClassName("".concat(NAMESPACE,"-center")),CLASS_HIDDEN),ap.background&&addClass(cp,"".concat(NAMESPACE,"-bg")),ap.highlight||addClass(hp,CLASS_INVISIBLE),ap.cropBoxMovable&&(addClass(hp,CLASS_MOVE),setData(hp,DATA_ACTION,ACTION_ALL)),ap.cropBoxResizable||(addClass(pp.getElementsByClassName("".concat(NAMESPACE,"-line")),CLASS_HIDDEN),addClass(pp.getElementsByClassName("".concat(NAMESPACE,"-point")),CLASS_HIDDEN)),this.render(),this.ready=!0,this.setDragMode(ap.dragMode),ap.autoCrop&&this.crop(),this.setData(ap.data),isFunction(ap.ready)&&addListener(np,EVENT_READY,ap.ready,{once:!0}),dispatchEvent(np,EVENT_READY)}}},{key:"unbuild",value:function(){if(this.ready){this.ready=!1,this.unbind(),this.resetPreview();var np=this.cropper.parentNode;np&&np.removeChild(this.cropper),removeClass(this.element,CLASS_HIDDEN)}}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=AnotherCropper,_d}},{key:"setDefaults",value:function(np){assign(DEFAULTS,isPlainObject(np)&&np)}}]),_d}();assign(Cropper.prototype,render,preview,events$1,handlers,change,methods);var n=function(){return n=Object.assign||function(_d){for(var rp,np=1,ap=arguments.length;np<ap;np++)for(var sp in rp=arguments[np])Object.prototype.hasOwnProperty.call(rp,sp)&&(_d[sp]=rp[sp]);return _d},n.apply(this,arguments)};function a(_d,rp){var np={};for(var ap in _d)Object.prototype.hasOwnProperty.call(_d,ap)&&rp.indexOf(ap)<0&&(np[ap]=_d[ap]);if(_d!=null&&typeof Object.getOwnPropertySymbols=="function"){var sp=0;for(ap=Object.getOwnPropertySymbols(_d);sp<ap.length;sp++)rp.indexOf(ap[sp])<0&&Object.prototype.propertyIsEnumerable.call(_d,ap[sp])&&(np[ap[sp]]=_d[ap[sp]])}return np}var c=["aspectRatio","autoCrop","autoCropArea","background","center","checkCrossOrigin","checkOrientation","cropBoxMovable","cropBoxResizable","data","dragMode","guides","highlight","initialAspectRatio","minCanvasHeight","minCanvasWidth","minContainerHeight","minContainerWidth","minCropBoxHeight","minCropBoxWidth","modal","movable","preview","responsive","restore","rotatable","scalable","toggleDragModeOnDblclick","viewMode","wheelZoomRatio","zoomOnTouch","zoomOnWheel","zoomable","cropstart","cropmove","cropend","crop","zoom","ready"],i={opacity:0,maxWidth:"100%"},l=React.forwardRef(function(_d,rp){var np=a(_d,[]),ap=np.dragMode,sp=ap===void 0?"crop":ap,lp=np.src,up=np.style,cp=np.className,dp=np.crossOrigin,fp=np.scaleX,pp=np.scaleY,hp=np.enable,mp=np.zoomTo,gp=np.rotateTo,vp=np.alt,xp=vp===void 0?"picture":vp,Sp=np.ready,yp=np.onInitialized,bp=a(np,["dragMode","src","style","className","crossOrigin","scaleX","scaleY","enable","zoomTo","rotateTo","alt","ready","onInitialized"]),Ep={scaleY:pp,scaleX:fp,enable:hp,zoomTo:mp,rotateTo:gp},wp=function(){for(var Rp=[],$p=0;$p<arguments.length;$p++)Rp[$p]=arguments[$p];var Cp=reactExports.useRef(null);return React.useEffect(function(){Rp.forEach(function(Ap){Ap&&(typeof Ap=="function"?Ap(Cp.current):Ap.current=Cp.current)})},[Rp]),Cp}(rp,reactExports.useRef(null));reactExports.useEffect(function(){var Rp;!((Rp=wp.current)===null||Rp===void 0)&&Rp.cropper&&typeof mp=="number"&&wp.current.cropper.zoomTo(mp)},[np.zoomTo]),reactExports.useEffect(function(){var Rp;!((Rp=wp.current)===null||Rp===void 0)&&Rp.cropper&&lp!==void 0&&wp.current.cropper.reset().clear().replace(lp)},[lp]),reactExports.useEffect(function(){if(wp.current!==null){var Rp=new Cropper(wp.current,n(n({dragMode:sp},bp),{ready:function($p){$p.currentTarget!==null&&function(Cp,Ap){Ap===void 0&&(Ap={});var Op=Ap.enable,Lp=Op===void 0||Op,Mp=Ap.scaleX,kp=Mp===void 0?1:Mp,Dp=Ap.scaleY,Fp=Dp===void 0?1:Dp,Ip=Ap.zoomTo,Pp=Ip===void 0?0:Ip,Tp=Ap.rotateTo;Lp?Cp.enable():Cp.disable(),Cp.scaleX(kp),Cp.scaleY(Fp),Tp!==void 0&&Cp.rotateTo(Tp),Pp>0&&Cp.zoomTo(Pp)}($p.currentTarget.cropper,Ep),Sp&&Sp($p)}}));yp&&yp(Rp)}return function(){var $p,Cp;(Cp=($p=wp.current)===null||$p===void 0?void 0:$p.cropper)===null||Cp===void 0||Cp.destroy()}},[wp]);var _p=function(Rp){return c.reduce(function($p,Cp){var Ap=$p,Op=Cp;return Ap[Op],a(Ap,[typeof Op=="symbol"?Op:Op+""])},Rp)}(n(n({},bp),{crossOrigin:dp,src:lp,alt:xp}));return React.createElement("div",{style:up,className:cp},React.createElement("img",n({},_p,{style:i,ref:wp})))});const Aspect=({cropperRef:_d})=>{const[rp,np]=reactExports.useState(1);return jsxRuntimeExports.jsxs("div",{className:"Aspect",children:[jsxRuntimeExports.jsxs("div",{className:"Aspect_header",children:[jsxRuntimeExports.jsx("div",{className:`Aspect_length ${rp&&"active"}`,onClick:()=>np(1),children:jsxRuntimeExports.jsx(FaCheck,{style:{color:"#191919"}})}),jsxRuntimeExports.jsx("div",{className:`Aspect_width ${!rp&&"active"}`,onClick:()=>np(0),children:jsxRuntimeExports.jsx(FaCheck,{style:{color:"#191919"}})})]}),jsxRuntimeExports.jsxs("div",{className:"Aspect_body",children:[jsxRuntimeExports.jsx("button",{onClick:()=>_d.current.cropper.setAspectRatio(NaN),children:"원본"}),jsxRuntimeExports.jsx("button",{onClick:()=>_d.current.cropper.setAspectRatio(1),children:"1:1"}),rp?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("button",{onClick:()=>_d.current.cropper.setAspectRatio(3/4),children:"3:4"}),jsxRuntimeExports.jsx("button",{onClick:()=>_d.current.cropper.setAspectRatio(9/16),children:"9:16"})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("button",{onClick:()=>_d.current.cropper.setAspectRatio(4/3),children:"4:3"}),jsxRuntimeExports.jsx("button",{onClick:()=>_d.current.cropper.setAspectRatio(16/9),children:"16:9"})]})]})]})};function ImageEditPage(){const _d=useLocation(),rp=useNavigate(),np=_d.state.value,ap=reactExports.useRef(null),sp=()=>{var lp;rp("/fish/image/result",{replace:!0,state:{value:(lp=ap.current)==null?void 0:lp.cropper.getCroppedCanvas().toDataURL()}})};return jsxRuntimeExports.jsxs("div",{className:"Demo",children:[jsxRuntimeExports.jsx(Header,{filter:"invert(1)",headerColor:"transparent"}),jsxRuntimeExports.jsx("div",{className:"crop",onClick:sp,children:"자르기"}),jsxRuntimeExports.jsx("div",{className:"Demo_body",children:jsxRuntimeExports.jsx(l,{ref:ap,style:{height:"100%",width:"100%"},dragMode:"none",viewMode:1,highlight:!1,background:!1,autoCropArea:1,minCropBoxWidth:150,minCropBoxHeight:150,src:np})}),jsxRuntimeExports.jsx("div",{className:"Demo_footer",children:jsxRuntimeExports.jsx(Aspect,{cropperRef:ap})})]})}const FishBookList=({fishdata:_d,type:rp})=>{console.log(_d);const[np,ap]=reactExports.useState([rp]);reactExports.useState(!1);const sp=lp=>{const up=lp+"",cp=up.substring(5,7),dp=up.substring(8,11);return cp+"/"+dp};return reactExports.useEffect(()=>{if(rp==0)ap(_d);else if(rp==1){const lp=_d.filter(up=>up.fishType==="FRESH_WATER");ap(lp)}else if(rp==2){const lp=_d.filter(up=>up.fishType==="SEA");ap(lp)}},[rp]),jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("ul",{className:"fish-list",children:np&&jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:np.map((lp,up)=>jsxRuntimeExports.jsx(Link,{to:`/fishbook/${lp.id}`,children:jsxRuntimeExports.jsxs("li",{className:"fish-item view-two blue-bd shadow",children:[jsxRuntimeExports.jsx("div",{className:"fish-profile"}),jsxRuntimeExports.jsx("div",{className:"fish-profile-type blue-fc",children:lp.fishType}),jsxRuntimeExports.jsx("div",{className:"fish-profile-name",children:lp.name}),jsxRuntimeExports.jsx("div",{className:"fish-profile-size",children:lp.minimumSize}),lp.tabooStartAt&&jsxRuntimeExports.jsx("div",{className:"fish-date",children:jsxRuntimeExports.jsxs("div",{children:[sp(lp.tabooStartAt)," ~ ",sp(lp.tabooEndAt)]})}),jsxRuntimeExports.jsx("div",{className:"fish-detail-btn bg-blue",children:"VIEW"})]})},up))})})})},BASE_URL="https://i10c203.p.ssafy.io",axiosApi=()=>{const _d=axios.create({baseURL:BASE_URL});return _d.defaults.headers.common.Authorization="eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ1c2VySWQiOiIzMjgxMDc5MDMwIiwic3ViIjoiIiwiaWF0IjoxNzA3ODA2OTc1LCJleHAiOjE3MTAzOTg5NzV9.3BOOLQa5SH8Bc_XMurtaeQJOPkJZTKYcW4zSSDZxcDg",_d.defaults.headers.post["Content-Type"]="application/json",_d.defaults.headers.put["Content-Type"]="application/json",_d.defaults.headers.delete["Content-Type"]="application/json",_d},api$3=axiosApi(),url$1="/fishbooks";async function getFishList(){try{const{data:_d}=await api$3.get(`${url$1}`);return console.log(_d),_d}catch(_d){console.log(_d)}}async function getFishDetail(_d){try{console.log("dddd");const{data:rp}=await api$3.get(`${url$1}/${_d}`);return console.log(rp),rp}catch(rp){console.log(rp)}}const FishBook=()=>{const[_d,rp]=reactExports.useState([]),[np,ap]=reactExports.useState(0),sp=async()=>{await getFishList().then(lp=>rp(lp)),console.log("ddddddddddd"),console.log(_d)};return reactExports.useEffect(()=>{sp()},[]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Header,{filter:"invert(1)"}),jsxRuntimeExports.jsx("div",{className:"fishbook-header bg-blue"}),jsxRuntimeExports.jsx("div",{className:"fishbook-title",children:"FishUniverse"}),jsxRuntimeExports.jsxs("div",{className:"fishbook-category shadow",children:[jsxRuntimeExports.jsxs("div",{className:`fishbook-category-header ${np==0?"blue-fc":""}`,onClick:()=>ap(0),children:[jsxRuntimeExports.jsx("div",{children:"전체"}),jsxRuntimeExports.jsx("div",{children:"34종"})]}),jsxRuntimeExports.jsxs("div",{className:`fishbook-category-header ${np==1?"blue-fc":""}`,onClick:()=>ap(1),children:[jsxRuntimeExports.jsx("div",{children:"민물"}),jsxRuntimeExports.jsx("div",{children:"14종"})]}),jsxRuntimeExports.jsxs("div",{className:`fishbook-category-header ${np==2?"blue-fc":""}`,onClick:()=>ap(2),children:[jsxRuntimeExports.jsx("div",{children:"바다"}),jsxRuntimeExports.jsx("div",{children:"30종"})]})]}),jsxRuntimeExports.jsx("div",{className:"fishbook-list",children:_d.fishBooks&&jsxRuntimeExports.jsx(FishBookList,{fishdata:_d.fishBooks,type:np})})]})};var KeyboardArrowRight={},_interopRequireDefault$q=interopRequireDefaultExports;Object.defineProperty(KeyboardArrowRight,"__esModule",{value:!0});var default_1$h=KeyboardArrowRight.default=void 0,_createSvgIcon$h=_interopRequireDefault$q(requireCreateSvgIcon()),_jsxRuntime$h=jsxRuntimeExports;default_1$h=KeyboardArrowRight.default=(0,_createSvgIcon$h.default)((0,_jsxRuntime$h.jsx)("path",{d:"M8.59 16.59 13.17 12 8.59 7.41 10 6l6 6-6 6z"}),"KeyboardArrowRight");const FishBookDetail=({fish:_d})=>{const[rp,np]=reactExports.useState(!1),[ap,sp]=reactExports.useState([]),lp=()=>{np(!rp);const up=JSON.parse(_d.interview);sp(up),console.log(ap),console.log(_d.interview),console.log(typeof _d.interview),console.log(up),console.log(typeof up)};return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:rp?"card-rotate":"back-rotate",onClick:lp,children:[jsxRuntimeExports.jsxs("div",{className:"front",children:[jsxRuntimeExports.jsx("img",{src:back,alt:"",className:"back-fish-lish",onClick:()=>history.back()}),jsxRuntimeExports.jsx("div",{className:"detail-title",children:"Mulgogi"}),jsxRuntimeExports.jsxs("div",{className:"size",children:["size",jsxRuntimeExports.jsx("div",{style:{whiteSpace:"pre-line"},children:_d.size})]}),jsxRuntimeExports.jsx("img",{className:"fish-img",src:_d.imageUrl}),jsxRuntimeExports.jsx("div",{className:"sub-one",children:"the fish"}),jsxRuntimeExports.jsx("div",{className:"sub-two",children:"we love"}),jsxRuntimeExports.jsx("div",{className:"fish-name",children:_d.name}),jsxRuntimeExports.jsxs("div",{className:"science-name",children:["학명",jsxRuntimeExports.jsx("div",{style:{whiteSpace:"pre-line"},children:_d.scientificName})]}),jsxRuntimeExports.jsxs("div",{className:"food",children:["Food",jsxRuntimeExports.jsx("div",{style:{whiteSpace:"pre-line"},children:_d.bait})]}),jsxRuntimeExports.jsxs("div",{className:"live",children:["Where",jsxRuntimeExports.jsx("br",{}),"you live"]}),jsxRuntimeExports.jsx("div",{className:"habitat",style:{whiteSpace:"pre-line"},children:_d.habitat}),jsxRuntimeExports.jsx("div",{className:"arrow",children:jsxRuntimeExports.jsx(default_1$h,{})})]}),jsxRuntimeExports.jsxs("div",{className:"back",children:[jsxRuntimeExports.jsxs("div",{className:"question",children:["Q. ",ap.first_question,jsxRuntimeExports.jsx("div",{style:{whiteSpace:"pre-line"},children:ap.first_answer})]}),jsxRuntimeExports.jsxs("div",{className:"question",children:["Q. ",ap.second_question,jsxRuntimeExports.jsx("div",{style:{whiteSpace:"pre-line"},children:ap.second_answer})]}),ap.third_question&&jsxRuntimeExports.jsxs("div",{className:"question",children:["Q. ",ap.third_question,jsxRuntimeExports.jsx("div",{style:{whiteSpace:"pre-line"},children:ap.third_answer})]})]})]})})},FishBookDetailPage=()=>{const{id:_d}=useParams(),[rp,np]=reactExports.useState([]);reactExports.useEffect(()=>{ap()},[]);const ap=async()=>{await getFishDetail(_d).then(sp=>np(sp)),console.log(rp)};return jsxRuntimeExports.jsx(FishBookDetail,{fish:rp})},naver_logo="/assets/naver_logo-8-qEmV51.png",SocialNaver=()=>{const ap="https://nid.naver.com/oauth2.0/authorize?client_id=w88WA5fuXobhPaQEmw1p&response_type=code&redirect_uri=https://i10c203.p.ssafy.io/login/naver&state=niwXgvCl5E",sp=()=>{window.location.href=ap};return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("img",{src:naver_logo,alt:"네이버로그인",onClick:sp})})},kakao_logo="/assets/kakao_logo-F_W8h3hn.png",SocialKakao=()=>{const np="https://kauth.kakao.com/oauth/authorize?client_id=db5b74e6c640443403b9705680d9dbac&redirect_uri=https://i10c203.p.ssafy.io/login/kakao&response_type=code",ap=()=>{window.location.href=np};return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("img",{src:kakao_logo,alt:"카카오로그인",onClick:ap})})},google_logo="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAACXBIWXMAAAI2AAACNgElQaYmAAAHT0lEQVR4nO2dTWwTRxTHX+wEh5R0I6GqMkJNaKVWRaJEtjhUVV2skkNPgMyhFhIQ5daqarjQm4Hc6AVz6K1V3JNPFkEqpxwczKWqZCdUFUipEA6qcNWqxabgfJG4mu1zMZY3mZmdmR1v5idFSZzN7Hj/nvfevPkCg8FgMBgMBoPBYDDsbHq66d1X4tFRABgBgFF86aMtLq8CwB38eQ4AyuF8saygmq7QWhAU4AQ++KMCiqyiOLfI93C+uCCgTKFoJ0glHiUP/iwKMST5dqTFzADANV1ajxaCVOJR8uDPAcCXaJK8gLSc78P5YsbLZ+GpICjEJAohuzXQQlrKZa+E8UyQSjxKhLiokRDtzKEwcypvqlwQ9BFXWyIl3UmjMFUV9VQqSCUevYStotsgZmxcRWtRIkglHiWO+noXtQonzofzxbTMG0gXBE3UdY19BSuZcL44LqtwqYJU4lESyk7LvIdHkA5lXIZfCch6Pz4Wg7Agy8lLaSE+F6O7TJYRwx1CBUEHnpdZYQ+RLgaIFAQzs3kfRVOtKBEDRAmCOam8B/2MMn51YlTQh0OZGIReQeVcVCRGM11+gybSwQ4pqddxznS+UjFARAtR5DcyOGbhakCpEo+ewMwyzWCXcjHArSBoquYljmFkMLEndPCIIsHpiRggQBBZyUIlyTyH+nsmBrgRBO3zvISoKoNJPCXp7rbo0FMxwKUg0zjsKhLp2VSH92JPpgjni5dU37sdLkFWZ2GksRJ88DT3FqwvDYqqCzFRno5n6wBvcvFcT/8GDJ5ehP4jf4h4G0YMhLeFPG71HWuLQ/DshxForAR5ikuH88XzPP/oR5if4Oqs7Tc+bX0tuHcFQgf/hvWHg9B41sdSHJmsltyBz90RHpN1vNOLAWsNXj29CKH3/qIth0RRnkY0OsJkslZnbTP1eNvrft5rm7Bt8CSi0h3WFnKC5iLSSqyJe3arcaBsxOgMqyBbzTZ/ieDrdbAm7kLf8D+d/nyZv8r+htVkPeDJWy3f3gfLt8PNX0nrOLDTH7wT1C2EdAZ5k4i7P3wEe07dB9J3IROaXdbZ17CMh7jK6O56uwq9E3eh+s0hKR3A2FRtREIqRxSZQsqiylizCOJ6wUzAWpO5imlE42mqVZwjvC0sTn1YQMVmBJTRjVBnxFkEETEIdYfiGj9CHZ1Km7nogPaLLr2GRRDXPiQ0BkoXv2iEFJNl4Id6Ro4RRDOMIJphBNEMI4hmsAjiOkJanRWyPYavUd1CvNqlwWuop8CyCCKiU3dYQBndCPWkPxZBlgQ8CKoRx52MUh9CTBaOq+w0btG+X5b0uyuT9bTRB+lnh+HmyvA5gJyMKZtlSUPDIvbqojZZSoZwK5sD8NWT9+HX53ZKp1xK5rpmCDc2VbsuwNTGCymLysKwRlnMZquwtg/OPD7WFIMwEskmdB3Z64QIvyclygIWW0j4rn7QbhnEXLXRFRvQxKZqIj44C4WUJSXKAtoRPyLA57UYfFt/1+kS0komGe/tBWcF3JNpGR6TIKEx2zltKQoxTWeqx6C0/tp2xV2MZBPaRlyxqdpRQRtv3mC5mKen7niDm6vDcKb6MVQ2BmjKGdJ8xwdRZpXJ7wpZjtAS0vIUly4lc1otR4hN1SZxUahbZgop6yRLGby5rGvNH4iJ+qwW4xWDMKlT1BWbqo0KEgNYzRW4EMSe7EZCWiJGS0jLy7QOoqAYotbcb+tvO8ElSGgMyleeRjIOIS0vRBTPIq8WMUStKp5hCXebcK/CxQhJ2rLoUjKnZFk0vIioRG9DeIB2+mgr3OMhpWSu3OpLBEJM13wkm5A+mBXJJoaOTF+42gjURe9iRD2Xtx23A1RpSZPfSOvLR7KJaVl9FfRZ8xv99yeX938Nm6GHIovnTnK63nwGP8lKNp8pJXOuNp8hLcJpj/mezQEI/ZmE3icfuK1rupCyuMN4IftlRbKJq7iHu2xe2p6Jxs/gB2YU0+jbJgr7qmO2MJxU0Xdw+z9Rgui4gRn3AqPA6huw+7cLdqth5GQhZbma4S9si79INuGrLf6IGP2PvoDg8ju0/8LcK++EsFknaN9dV0gXGoE6LO+/AutDszQ1WhC15p5rLwwnKrl75fCpg0t+msyw8covdgQWrB+Cns6d4CqaKiHRplBB4D9RFvwmyuau321hgitvQs+G1f7nTwop60dR9xIuCPhUlEZvDZ4P/gSBDct2+si4WyfejhRBwKeiQM86PN8zD41gHXrrh4gYwlcUSz+uAvsBfjquwvYZpWROymowJQe6YPrDDwe6lFEMaecfKj3yKJJNdOuRR4AZgnHZWWjlh4KhCeumQ8GqKISSNfaeHZuHg1E6H5sHXozNeHqwJObAdDtYEpo7auOYj1K0OHp1q7S4Qppj4J4I0US7w4nRx6g6nBha0vkzKk2TE1of340ZZJHHdwMmAv8/wlsHEVrpqgPuUSDaA+6hZXL4Ai6D0O78dIPBYDAYDAaDwWAwGF4AAP8CR9JwtW2tQjkAAAAASUVORK5CYII=",SocialGoogle=()=>{const np="https://accounts.google.com/o/oauth2/v2/auth?scope=email%20openid&response_type=code&redirect_uri=https://i10c203.p.ssafy.io/login/google&client_id=68067767440-hri2501h11p1d08asfsfaf6t2705u9cr.apps.googleusercontent.com",ap=()=>{window.location.href=np};return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("img",{src:google_logo,alt:"구글로그인",onClick:ap})})},LoginPage=()=>{var ap;const _d=useNavigate(),np=(ap=useLocation().state)==null?void 0:ap.path;return reactExports.useEffect(()=>{localStorage.setItem("jwt","eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ1c2VySWQiOiIzMjgxMDc5MDMwIiwic3ViIjoiIiwiaWF0IjoxNzA3ODI1NDQxLCJleHAiOjE3MTA0MTc0NDF9.XiP53pnAryUN9F4ISM3JiZQGst_UsUNQWZgEQOHqcvE"),localStorage.setItem("user",JSON.stringify({imageUrl:null,nickname:"훌륭한붕어"})),localStorage.getItem("jwt")&&_d("/")},[]),jsxRuntimeExports.jsxs("div",{className:"LoginPage",children:[jsxRuntimeExports.jsx(Header,{prevPath:np}),jsxRuntimeExports.jsx("div",{className:"LoginPage_body",children:jsxRuntimeExports.jsx("img",{src:defaultImg,alt:""})}),jsxRuntimeExports.jsxs("div",{className:"LoginPage_footer",children:[jsxRuntimeExports.jsx(SocialNaver,{}),jsxRuntimeExports.jsx(SocialKakao,{}),jsxRuntimeExports.jsx(SocialGoogle,{})]})]})},group="/assets/Group-cDp7Suxl.svg";var CellTowerOutlined={},_interopRequireDefault$p=interopRequireDefaultExports;Object.defineProperty(CellTowerOutlined,"__esModule",{value:!0});var default_1$g=CellTowerOutlined.default=void 0,_createSvgIcon$g=_interopRequireDefault$p(requireCreateSvgIcon()),_jsxRuntime$g=jsxRuntimeExports;default_1$g=CellTowerOutlined.default=(0,_createSvgIcon$g.default)([(0,_jsxRuntime$g.jsx)("path",{d:"m7.3 14.7 1.2-1.2c-1-1-1.5-2.3-1.5-3.5 0-1.3.5-2.6 1.5-3.5L7.3 5.3c-1.3 1.3-2 3-2 4.7s.7 3.4 2 4.7M19.1 2.9l-1.2 1.2c1.6 1.6 2.4 3.8 2.4 5.9 0 2.1-.8 4.3-2.4 5.9l1.2 1.2c2-2 2.9-4.5 2.9-7.1 0-2.6-1-5.1-2.9-7.1"},"0"),(0,_jsxRuntime$g.jsx)("path",{d:"M6.1 4.1 4.9 2.9C3 4.9 2 7.4 2 10c0 2.6 1 5.1 2.9 7.1l1.2-1.2c-1.6-1.6-2.4-3.8-2.4-5.9 0-2.1.8-4.3 2.4-5.9m10.6 10.6c1.3-1.3 2-3 2-4.7-.1-1.7-.7-3.4-2-4.7l-1.2 1.2c1 1 1.5 2.3 1.5 3.5 0 1.3-.5 2.6-1.5 3.5zM14.5 10c0-1.38-1.12-2.5-2.5-2.5S9.5 8.62 9.5 10c0 .76.34 1.42.87 1.88L7 22h2l.67-2h4.67l.66 2h2l-3.37-10.12c.53-.46.87-1.12.87-1.88m-4.17 8L12 13l1.67 5z"},"1")],"CellTowerOutlined");const filter="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADcAAAA3CAYAAACo29JGAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAOLSURBVHgB7ZpbiE1RGMf/jpmQwRAaGZkYklt5kCmXEimX8ICUB8QrXnjgAS/S4MmLJFJK8iAveBAPRG5D7iGZzCCkxv0wxvj+rXNqn7XWsfc5s885a53Or/6n9m3t7ztrr29969sbAJpED0R/Rd1lIPrxSbS+l/zcFU1D+dGRkJ9hKE9q6dw3lCfdVVDPZ5Bzov3wjwWiHYHtJJ17LZoZ2DlIdE30B36xSNt+xceyRds5HspBn2AnzdL2PeHPVFEnMkPpUvjFKNEXZE4JG3mgv6hVO3AGfsGxFrSfQbIhfbBZO8ienAA/6Cd6g0z7L4mq0ydMgtmt7L3ecJ9tMLOUNfpJJ2D23jy4zUSoqSxo933RYP3ERtEP7cQ20Ti4yUDRZZh5ZdZguB1mF98UjYBbcJydgmnrFVEi20U1okeWi25BhVsXoI0nYa5iGFQawy7mCW0wHXwhmoLSMhwq0Om2fRctj9rIXNF7SyPtKF2QaYAaIrpNSagJu1cujdHBr5bG3olW5NpYD+F6s8Viy0/R1nxtYaPPYf+3NqHw8yCNni/6YLGhQ7QWPfyTx0AFFL1xrhp2iQagMNDoZTCTC+otYhwe9aILsA/kw1D5aZzwidical+/5zPRHMQMHTgu6rLc8KJoKOKhj2hflvtcF41GgWAyylV60nJjJqs9TbY5hx2BvaLF9oegwHCMMVlNWgy4IRqL/KiDPetgDx4V1aKIMFJ1wJ6u5ToGmTIdQ+aimfot2oMiO5aGSepLmA4eQG4wKurpFJP4vOewOOA/PhtmusZ5aXLENviY34Hp2AY4AstqnPeCBjZHvHad5drdUFHTGc4i08DHCI9uCct1rVBLGqdYCDPvawq5ZqToqXbdTsREAvHBdeDnwHZfqNTtf9SlFOQqYiJO55gqtWv7wkI4p4wabV8bYiJO5xjKO7V91Qi/f1Vgu9vSRt7E6ZxzVJzzlYpzvlJxzlcqzvlKxbkCwZwycn0/H6pQfFg2mCE6KJquHetKKRaK7Rw/AWFNchXsK4bzoo9wEBp7D5kLzy2pY1wdsPz9EGYxKV3lOgT1ispJsjnHsbUX9jdGFL9gWokSVrmiYHPutOg2sn/Lyeq1s70VxOacTXSUJYnF8IgozrGEx3cBXvRWkDDn+EJ+NcJLD05C5/hJse7UL6hIWAePYSVL/9KAkXAJHI+EUeE7dH6exPol37jWo4T8A7CzoWgJ7WGLAAAAAElFTkSuQmCC";var Cached={},_interopRequireDefault$o=interopRequireDefaultExports;Object.defineProperty(Cached,"__esModule",{value:!0});var default_1$f=Cached.default=void 0,_createSvgIcon$f=_interopRequireDefault$o(requireCreateSvgIcon()),_jsxRuntime$f=jsxRuntimeExports;default_1$f=Cached.default=(0,_createSvgIcon$f.default)((0,_jsxRuntime$f.jsx)("path",{d:"m19 8-4 4h3c0 3.31-2.69 6-6 6-1.01 0-1.97-.25-2.8-.7l-1.46 1.46C8.97 19.54 10.43 20 12 20c4.42 0 8-3.58 8-8h3zM6 12c0-3.31 2.69-6 6-6 1.01 0 1.97.25 2.8.7l1.46-1.46C15.03 4.46 13.57 4 12 4c-4.42 0-8 3.58-8 8H1l4 4 4-4z"}),"Cached");function RoomList(){const _d=useNavigate(),[rp,np]=reactExports.useState([]),[ap,sp]=reactExports.useState([]);reactExports.useState(!1),reactExports.useState(0);const[lp,up]=reactExports.useState(!0),cp=!1,dp="https://i10c203.p.ssafy.io",fp=JSON.parse(localStorage.getItem("user")),pp="wearegitaehasam";reactExports.useEffect(()=>{hp()},[]);const hp=()=>{up(!0),axios.get(dp+"/api/lives").then(gp=>{axios.get(dp+"/openvidu/api/sessions",{headers:{Authorization:"Basic "+btoa("OPENVIDUAPP:"+pp),"Content-Type":"application/json"}}).then(vp=>{np(gp.data),sp(vp.data),up(!1)})}).catch(gp=>{console.log(gp)})},mp=gp=>{const vp=gp.liveRoomId,xp=gp.sessionId;_d(`/live/${gp.sessionId}`,{state:{isHost:cp,roomId:vp,subscriberSession:xp,nickname:fp.nickname,userImg:fp.imageUrl}})};return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:lp?jsxRuntimeExports.jsx(Loading,{}):jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Header,{centerText:"낚시 라이브",prevPath:"/media"}),jsxRuntimeExports.jsx("div",{className:"roomList-filter",children:jsxRuntimeExports.jsx(default_1$f,{className:"room-list-reload-btn",onClick:hp})}),rp.liveRooms&&rp.liveRooms.length>0?null:jsxRuntimeExports.jsxs("div",{className:"no-live",children:[jsxRuntimeExports.jsx(default_1$g,{}),jsxRuntimeExports.jsx("span",{children:"진행중인 라이브가 없습니다."})]}),rp.liveRooms&&rp.liveRooms.map((gp,vp)=>jsxRuntimeExports.jsxs("div",{className:"roomList-info",onClick:()=>mp(gp),children:[jsxRuntimeExports.jsx("img",{src:gp.imageUrl?gp.imageUrl:defaultImg,alt:"room thumbnail",className:"thumbnail"}),jsxRuntimeExports.jsxs("div",{className:"roomList-info-header",children:[jsxRuntimeExports.jsx("p",{children:gp.name}),jsxRuntimeExports.jsx("div",{className:"roomList-info-body",children:jsxRuntimeExports.jsx("span",{children:gp.nickName})})]})]},vp)),jsxRuntimeExports.jsx(NavLink,{to:"/media/roomList/create",className:"nav-item createLive-btn bg-blue",children:jsxRuntimeExports.jsx("span",{children:"라이브 켜기"})})]})})}var AddOutlined={},_interopRequireDefault$n=interopRequireDefaultExports;Object.defineProperty(AddOutlined,"__esModule",{value:!0});var default_1$e=AddOutlined.default=void 0,_createSvgIcon$e=_interopRequireDefault$n(requireCreateSvgIcon()),_jsxRuntime$e=jsxRuntimeExports;default_1$e=AddOutlined.default=(0,_createSvgIcon$e.default)((0,_jsxRuntime$e.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"AddOutlined");function CreateRoom(){const _d=useNavigate(),rp=!0,np="https://i10c203.p.ssafy.io",ap=JSON.parse(localStorage.getItem("user")),sp=localStorage.getItem("jwt"),[lp,up]=reactExports.useState(""),[cp,dp]=reactExports.useState(""),[fp,pp]=reactExports.useState(null),[hp,mp]=reactExports.useState(null),gp=reactExports.useRef(),vp=Ep=>{up(Ep.target.value)},xp=Ep=>{Ep.preventDefault(),gp.current.click()};reactExports.useEffect(()=>{cp&&pp(jsxRuntimeExports.jsx("img",{className:"room-create-upload-img",src:cp}))},[cp]);const Sp=Ep=>{Ep.preventDefault();const wp=Ep.target.files[0],_p=new FileReader;_p.onloadend=()=>{dp(_p.result)},wp&&(_p.readAsDataURL(wp),yp(wp))},yp=Ep=>{const wp=new FormData;wp.append("images",Ep),wp.append("type","LIVEROOM"),axios.post(np+"/api/images",wp,{headers:{Authorization:sp,"Content-Type":"multipart/form-data"}}).then(_p=>{mp(_p.data.imageNames[0])}).catch(_p=>console.log(_p))},bp=Ep=>{const wp=Math.floor(Math.random()*1e6);_d(`/live/Gitaehasam${wp}`,{state:{isHost:rp,roomId:wp,imageUrl:hp||null,name:lp,nickname:ap.nickname,userImg:ap.imageUrl}})};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"roomList-header",onClick:()=>_d("/media/roomList"),children:[jsxRuntimeExports.jsx("img",{src:back,alt:""}),jsxRuntimeExports.jsx("span",{children:"라이브 생성"})]}),jsxRuntimeExports.jsxs("form",{className:"room-create-form",onSubmit:bp,children:[jsxRuntimeExports.jsxs("div",{className:"room-create-header",children:[jsxRuntimeExports.jsx("div",{className:"room-create-thumbnail-title",children:"특별한 사진으로 라이브를 표현해보세요"}),jsxRuntimeExports.jsxs("div",{className:"room-create-thumbnail",children:[fp,jsxRuntimeExports.jsxs("div",{className:`shadow ${cp?"reupload-btn blue-bd":"upload-btn bg-blue"}`,onClick:xp,children:[!cp&&jsxRuntimeExports.jsx(default_1$e,{}),cp&&"이미지 다시 선택하기"]})]}),jsxRuntimeExports.jsx("input",{ref:gp,hidden:!0,type:"file",onChange:Sp})]}),jsxRuntimeExports.jsxs("div",{className:"room-create-header",children:[jsxRuntimeExports.jsx("div",{className:"room-create-thumbnail-title",children:"제목"}),jsxRuntimeExports.jsx("input",{className:"room-create-title",type:"text",maxLength:15,value:lp,onChange:vp,placeholder:"라이브 제목을 적어주세요.",required:!0})]}),jsxRuntimeExports.jsx("div",{className:"room-create-btn bg-blue",children:jsxRuntimeExports.jsx("button",{type:"submit",children:"라이브 켜기"})})]})]})}var lib={},jsnlog={};(function(_d){var rp=commonjsGlobal&&commonjsGlobal.__extends||function(){var ap=function(sp,lp){return ap=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(up,cp){up.__proto__=cp}||function(up,cp){for(var dp in cp)Object.prototype.hasOwnProperty.call(cp,dp)&&(up[dp]=cp[dp])},ap(sp,lp)};return function(sp,lp){ap(sp,lp);function up(){this.constructor=sp}sp.prototype=lp===null?Object.create(lp):(up.prototype=lp.prototype,new up)}}();function np(ap){if(!ap)return np.__;Array.prototype.reduce||(Array.prototype.reduce=function(up,cp){for(var dp=cp,fp=0;fp<this.length;fp++)dp=up(dp,this[fp],fp,this);return dp});var sp="",lp=("."+ap).split(".").reduce(function(up,cp,dp,fp){sp?sp+="."+cp:sp=cp;var pp=up["__"+sp];return pp===void 0&&(np.Logger.prototype=up,pp=new np.Logger(sp),up["__"+sp]=pp),pp},np.__);return lp}(function(ap){ap.requestId="",ap.entryId=0,ap._createXMLHttpRequest=function(){return new XMLHttpRequest},ap._getTime=function(){return new Date().getTime()},ap._console=console,ap._appenderNames=[];function sp(Ip,Pp,Tp){if(Pp[Ip]!==void 0){if(Pp[Ip]===null){delete Tp[Ip];return}Tp[Ip]=Pp[Ip]}}function lp(Ip){if(ap.enabled!=null&&!ap.enabled)return!1;try{if(Ip.userAgentRegex&&!new RegExp(Ip.userAgentRegex).test(navigator.userAgent))return!1}catch{}try{if(Ip.ipRegex&&ap.clientIP&&!new RegExp(Ip.ipRegex).test(ap.clientIP))return!1}catch{}return!0}function up(Ip,Pp){try{if(Ip.disallow&&new RegExp(Ip.disallow).test(Pp))return!1}catch{}return!0}function cp(Ip){return typeof Ip=="function"?Ip instanceof RegExp?Ip.toString():Ip():Ip}var dp=function(){function Ip(Pp,Tp,Np){this.msg=Pp,this.meta=Tp,this.finalString=Np}return Ip}();function fp(Ip){var Pp=cp(Ip),Tp;switch(typeof Pp){case"string":return new dp(Pp,null,Pp);case"number":return Tp=Pp.toString(),new dp(Tp,null,Tp);case"boolean":return Tp=Pp.toString(),new dp(Tp,null,Tp);case"undefined":return new dp("undefined",null,"undefined");case"object":return Pp instanceof RegExp||Pp instanceof String||Pp instanceof Number||Pp instanceof Boolean?(Tp=Pp.toString(),new dp(Tp,null,Tp)):(typeof ap.serialize=="function"?Tp=ap.serialize.call(this,Pp):Tp=JSON.stringify(Pp),new dp("",Pp,Tp));default:return new dp("unknown",null,"unknown")}}function pp(Ip){return sp("enabled",Ip,this),sp("maxMessages",Ip,this),sp("defaultAjaxUrl",Ip,this),sp("clientIP",Ip,this),sp("requestId",Ip,this),sp("defaultBeforeSend",Ip,this),sp("serialize",Ip,this),this}ap.setOptions=pp;function hp(){return-2147483648}ap.getAllLevel=hp;function mp(){return 1e3}ap.getTraceLevel=mp;function gp(){return 2e3}ap.getDebugLevel=gp;function vp(){return 3e3}ap.getInfoLevel=vp;function xp(){return 4e3}ap.getWarnLevel=xp;function Sp(){return 5e3}ap.getErrorLevel=Sp;function yp(){return 6e3}ap.getFatalLevel=yp;function bp(){return 2147483647}ap.getOffLevel=bp;function Ep(Ip){return Ip<=1e3?"trace":Ip<=2e3?"debug":Ip<=3e3?"info":Ip<=4e3?"warn":Ip<=5e3?"error":"fatal"}var wp=function(){function Ip(Pp,Tp){this.inner=Tp,this.name="JL.Exception",this.message=fp(Pp).finalString}return Ip}();ap.Exception=wp,wp.prototype=new Error;var _p=function(){function Ip(Pp,Tp,Np,jp,Vp){this.l=Pp,this.m=Tp,this.n=Np,this.t=jp,this.u=Vp}return Ip}();ap.LogItem=_p;function Rp(Ip,Pp,Tp){return ap.entryId++,new _p(Ip,Pp,Tp,ap._getTime(),ap.entryId)}function $p(Ip){Ip.id&&(clearTimeout(Ip.id),Ip.id=null)}function Cp(Ip,Pp,Tp){var Np=this;Ip.id||(Ip.id=setTimeout(function(){Tp.call(Np)},Pp))}var Ap=function(){function Ip(Pp,Tp){this.appenderName=Pp,this.sendLogItems=Tp,this.level=ap.getTraceLevel(),this.sendWithBufferLevel=2147483647,this.storeInBufferLevel=-2147483648,this.bufferSize=0,this.batchSize=1,this.maxBatchSize=20,this.batchTimeout=2147483647,this.sendTimeout=5e3,this.buffer=[],this.batchBuffer=[],this.batchTimeoutTimer={id:null},this.sendTimeoutTimer={id:null},this.nbrLogItemsSkipped=0,this.nbrLogItemsBeingSent=0;var Np="Trying to create an appender without a name or with an empty name";if(Pp==null)throw Np;if(ap._appenderNames.indexOf(Pp)!=-1)throw Pp?"Multiple appenders use the same name "+Pp:Np;ap._appenderNames.push(Pp)}return Ip.prototype.addLogItemsToBuffer=function(Pp){if(this.batchBuffer.length>=this.maxBatchSize){this.nbrLogItemsSkipped+=Pp.length;return}if(ap.maxMessages!=null){if(ap.maxMessages<1)return;ap.maxMessages-=Pp.length}this.batchBuffer=this.batchBuffer.concat(Pp);var Tp=this;Cp(this.batchTimeoutTimer,this.batchTimeout,function(){Tp.sendBatch.call(Tp)})},Ip.prototype.batchBufferHasOverdueMessages=function(){for(var Pp=0;Pp<this.batchBuffer.length;Pp++){var Tp=ap._getTime()-this.batchBuffer[Pp].t;if(Tp>this.batchTimeout)return!0}return!1},Ip.prototype.batchBufferHasStrandedMessage=function(){return ap.maxMessages!=null&&ap.maxMessages<1&&this.batchBuffer.length>0},Ip.prototype.sendBatchIfComplete=function(){(this.batchBuffer.length>=this.batchSize||this.batchBufferHasOverdueMessages()||this.batchBufferHasStrandedMessage())&&this.sendBatch()},Ip.prototype.onSendingEnded=function(){$p(this.sendTimeoutTimer),this.nbrLogItemsBeingSent=0,this.sendBatchIfComplete()},Ip.prototype.setOptions=function(Pp){if(sp("level",Pp,this),sp("ipRegex",Pp,this),sp("userAgentRegex",Pp,this),sp("disallow",Pp,this),sp("sendWithBufferLevel",Pp,this),sp("storeInBufferLevel",Pp,this),sp("bufferSize",Pp,this),sp("batchSize",Pp,this),sp("maxBatchSize",Pp,this),sp("batchTimeout",Pp,this),sp("sendTimeout",Pp,this),this.bufferSize<this.buffer.length&&(this.buffer.length=this.bufferSize),this.maxBatchSize<this.batchSize)throw new ap.Exception({message:"maxBatchSize cannot be smaller than batchSize",maxBatchSize:this.maxBatchSize,batchSize:this.batchSize});return this},Ip.prototype.log=function(Pp,Tp,Np,jp,Vp,zp,Wp){var Up;if(lp(this)&&up(this,zp)&&!(Vp<this.storeInBufferLevel)){if(Up=Rp(Vp,zp,Wp),Vp<this.level){this.bufferSize>0&&(this.buffer.push(Up),this.buffer.length>this.bufferSize&&this.buffer.shift());return}this.addLogItemsToBuffer([Up]),Vp>=this.sendWithBufferLevel&&this.buffer.length&&(this.addLogItemsToBuffer(this.buffer),this.buffer.length=0),this.sendBatchIfComplete()}},Ip.prototype.sendBatch=function(){if(!(this.nbrLogItemsBeingSent>0)&&($p(this.batchTimeoutTimer),this.batchBuffer.length!=0)){this.nbrLogItemsBeingSent=this.batchBuffer.length;var Pp=this;Cp(this.sendTimeoutTimer,this.sendTimeout,function(){Pp.onSendingEnded.call(Pp)}),this.sendLogItems(this.batchBuffer,function(){Pp.batchBuffer.splice(0,Pp.nbrLogItemsBeingSent),Pp.nbrLogItemsSkipped>0&&(Pp.batchBuffer.push(Rp(xp(),"Lost "+Pp.nbrLogItemsSkipped+" messages. Either connection with the server was down or logging was disabled via the enabled option. Reduce lost messages by increasing the ajaxAppender option maxBatchSize.",Pp.appenderName)),Pp.nbrLogItemsSkipped=0),Pp.onSendingEnded.call(Pp)})}},Ip}();ap.Appender=Ap;var Op=function(Ip){rp(Pp,Ip);function Pp(Tp){return Ip.call(this,Tp,Pp.prototype.sendLogItemsAjax)||this}return Pp.prototype.setOptions=function(Tp){return sp("url",Tp,this),sp("beforeSend",Tp,this),Ip.prototype.setOptions.call(this,Tp),this},Pp.prototype.sendLogItemsAjax=function(Tp,Np){try{if(!lp(this))return;this.xhr&&this.xhr.readyState!=0&&this.xhr.readyState!=4&&this.xhr.abort(),this.xhr=ap._createXMLHttpRequest();var jp="/jsnlog.logger";ap.defaultAjaxUrl!=null&&(jp=ap.defaultAjaxUrl),this.url&&(jp=this.url),this.xhr.open("POST",jp),this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.setRequestHeader("JSNLog-RequestId",ap.requestId);var Vp=this;this.xhr.onreadystatechange=function(){Vp.xhr.readyState==4&&Vp.xhr.status>=200&&Vp.xhr.status<300&&Np()};var zp={r:ap.requestId,lg:Tp};typeof this.beforeSend=="function"?this.beforeSend.call(this,this.xhr,zp):typeof ap.defaultBeforeSend=="function"&&ap.defaultBeforeSend.call(this,this.xhr,zp);var Wp=JSON.stringify(zp);this.xhr.send(Wp)}catch{}},Pp}(Ap);ap.AjaxAppender=Op;var Lp=function(Ip){rp(Pp,Ip);function Pp(Tp){return Ip.call(this,Tp,Pp.prototype.sendLogItemsConsole)||this}return Pp.prototype.clog=function(Tp){ap._console.log(Tp)},Pp.prototype.cerror=function(Tp){ap._console.error?ap._console.error(Tp):this.clog(Tp)},Pp.prototype.cwarn=function(Tp){ap._console.warn?ap._console.warn(Tp):this.clog(Tp)},Pp.prototype.cinfo=function(Tp){ap._console.info?ap._console.info(Tp):this.clog(Tp)},Pp.prototype.cdebug=function(Tp){ap._console.debug?ap._console.debug(Tp):this.cinfo(Tp)},Pp.prototype.sendLogItemsConsole=function(Tp,Np){try{if(!lp(this)||!ap._console)return;var jp;for(jp=0;jp<Tp.length;++jp){var Vp=Tp[jp],zp=Vp.n+": "+Vp.m;typeof window>"u"&&(zp=new Date(Vp.t)+" | "+zp),Vp.l<=ap.getDebugLevel()?this.cdebug(zp):Vp.l<=ap.getInfoLevel()?this.cinfo(zp):Vp.l<=ap.getWarnLevel()?this.cwarn(zp):this.cerror(zp)}}catch{}Np()},Pp}(Ap);ap.ConsoleAppender=Lp;var Mp=function(){function Ip(Pp){this.loggerName=Pp,this.seenRegexes=[]}return Ip.prototype.setOptions=function(Pp){return sp("level",Pp,this),sp("userAgentRegex",Pp,this),sp("disallow",Pp,this),sp("ipRegex",Pp,this),sp("appenders",Pp,this),sp("onceOnly",Pp,this),this.seenRegexes=[],this},Ip.prototype.buildExceptionObject=function(Pp){var Tp={};return Pp.stack?Tp.stack=Pp.stack:Tp.e=Pp,Pp.message&&(Tp.message=Pp.message),Pp.name&&(Tp.name=Pp.name),Pp.data&&(Tp.data=Pp.data),Pp.inner&&(Tp.inner=this.buildExceptionObject(Pp.inner)),Tp},Ip.prototype.log=function(Pp,Tp,Np){var jp=0,Vp,zp;if(!this.appenders)return this;if(Pp>=this.level&&lp(this)&&(Np?(zp=this.buildExceptionObject(Np),zp.logData=cp(Tp)):zp=Tp,Vp=fp(zp),up(this,Vp.finalString))){if(this.onceOnly)for(jp=this.onceOnly.length-1;jp>=0;){if(new RegExp(this.onceOnly[jp]).test(Vp.finalString)){if(this.seenRegexes[jp])return this;this.seenRegexes[jp]=!0}jp--}for(Vp.meta=Vp.meta||{},jp=this.appenders.length-1;jp>=0;)this.appenders[jp].log(Ep(Pp),Vp.msg,Vp.meta,function(){},Pp,Vp.finalString,this.loggerName),jp--}return this},Ip.prototype.trace=function(Pp){return this.log(mp(),Pp)},Ip.prototype.debug=function(Pp){return this.log(gp(),Pp)},Ip.prototype.info=function(Pp){return this.log(vp(),Pp)},Ip.prototype.warn=function(Pp){return this.log(xp(),Pp)},Ip.prototype.error=function(Pp){return this.log(Sp(),Pp)},Ip.prototype.fatal=function(Pp){return this.log(yp(),Pp)},Ip.prototype.fatalException=function(Pp,Tp){return this.log(yp(),Pp,Tp)},Ip}();ap.Logger=Mp;function kp(Ip){return new Op(Ip)}ap.createAjaxAppender=kp;function Dp(Ip){return new Lp(Ip)}ap.createConsoleAppender=Dp;var Fp;typeof window<"u"?Fp=new Op(""):Fp=new Lp(""),ap.__=new ap.Logger(""),ap.__.setOptions({level:ap.getDebugLevel(),appenders:[Fp]})})(np||(np={})),_d.__esModule=!0,_d.JL=np,typeof __jsnlog_configure=="function"&&__jsnlog_configure(np),typeof window<"u"&&!window.onerror&&(window.onerror=function(ap,sp,lp,up,cp){return np("onerrorLogger").fatalException({msg:"Uncaught Exception",errorMsg:ap?ap.message||ap:"",url:sp,"line number":lp,column:up},cp),!1}),typeof window<"u"&&!window.onunhandledrejection&&(window.onunhandledrejection=function(ap){np("onerrorLogger").fatalException({msg:"unhandledrejection",errorMsg:ap.reason?ap.reason.message:ap.message||null},ap.reason)})})(jsnlog);var OpenVidu$1={},LocalRecorder$1={},LocalRecorderState={};(function(_d){Object.defineProperty(_d,"__esModule",{value:!0}),_d.LocalRecorderState=void 0,function(rp){rp.READY="READY",rp.RECORDING="RECORDING",rp.PAUSED="PAUSED",rp.FINISHED="FINISHED"}(_d.LocalRecorderState||(_d.LocalRecorderState={}))})(LocalRecorderState);var OpenViduLogger$1={},ConsoleLogger$1={};Object.defineProperty(ConsoleLogger$1,"__esModule",{value:!0});ConsoleLogger$1.ConsoleLogger=void 0;var ConsoleLogger=function(){function _d(rp){this.logger=rp,this.log=rp.log,this.info=rp.info,this.debug=rp.debug,this.warn=rp.warn,this.error=rp.error}return _d}();ConsoleLogger$1.ConsoleLogger=ConsoleLogger;var OpenViduLoggerConfiguration={};(function(_d){Object.defineProperty(_d,"__esModule",{value:!0}),_d.OpenViduLoggerConfiguration=void 0,function(rp){rp.disabled="disabled",rp.debug="debug",rp.debug_app="debug_app"}(_d.OpenViduLoggerConfiguration||(_d.OpenViduLoggerConfiguration={}))})(OpenViduLoggerConfiguration);Object.defineProperty(OpenViduLogger$1,"__esModule",{value:!0});OpenViduLogger$1.OpenViduLogger=void 0;var jsnlog_1=jsnlog,ConsoleLogger_1=ConsoleLogger$1,OpenViduLoggerConfiguration_1$1=OpenViduLoggerConfiguration,OpenViduLogger=function(){function _d(){this.JSNLOG_URL="/openvidu/elk/openvidu-browser-logs",this.MAX_JSNLOG_BATCH_LOG_MESSAGES=100,this.MAX_MSECONDS_BATCH_MESSAGES=5e3,this.MAX_LENGTH_STRING_JSON=1e3,this.defaultConsoleLogger=new ConsoleLogger_1.ConsoleLogger(globalThis.console),this.isProdMode=!1,this.isJSNLogSetup=!1}return _d.configureJSNLog=function(rp,np){var ap=this;try{if(globalThis.LOG_JSNLOG_RESULTS||this.instance&&rp.isAtLeastPro&&this.instance.isOpenViduBrowserLogsDebugActive(rp)&&this.instance.canConfigureJSNLog(rp,this.instance)){rp.sendBrowserLogs===OpenViduLoggerConfiguration_1$1.OpenViduLoggerConfiguration.debug_app&&this.instance.replaceWindowConsole(),this.instance.isJSNLogSetup=!1,this.instance.info("Configuring JSNLogs.");var sp=rp.finalUserId,lp=rp.session.sessionId,up=function(dp){var fp=dp.onreadystatechange;dp.onreadystatechange=function(){ap.isInvalidResponse(dp)&&(Object.defineProperty(dp,"readyState",{value:4}),Object.defineProperty(dp,"status",{value:200}),ap.instance.disableLogger()),fp()},dp.setRequestHeader("Authorization","Basic "+btoa("".concat(sp,"%/%").concat(lp)+":"+np)),dp.setRequestHeader("X-Requested-With","XMLHttpRequest"),dp.setRequestHeader("OV-Final-User-Id",sp),dp.setRequestHeader("OV-Session-Id",lp),dp.setRequestHeader("OV-Token",np)};this.instance.currentAppender=jsnlog_1.JL.createAjaxAppender("appender-".concat(sp,"-").concat(lp)),this.instance.currentAppender.setOptions({beforeSend:up,maxBatchSize:1e3,batchSize:this.instance.MAX_JSNLOG_BATCH_LOG_MESSAGES,batchTimeout:this.instance.MAX_MSECONDS_BATCH_MESSAGES});var cp=function(dp){var fp=function(){var hp=new WeakSet;return function(mp,gp){if(typeof gp=="object"&&gp!=null){if(hp.has(gp)||globalThis.HTMLElement&&gp instanceof HTMLElement)return;hp.add(gp)}return gp}},pp=JSON.stringify(dp,fp());return pp.length>ap.instance.MAX_LENGTH_STRING_JSON&&(pp="".concat(pp.substring(0,ap.instance.MAX_LENGTH_STRING_JSON),"...")),globalThis.LOG_JSNLOG_RESULTS&&console.log(pp),pp};jsnlog_1.JL.setOptions({defaultAjaxUrl:rp.httpUri+this.instance.JSNLOG_URL,serialize:cp,enabled:!0}),(0,jsnlog_1.JL)().setOptions({appenders:[this.instance.currentAppender]}),this.instance.isJSNLogSetup=!0,this.instance.loggingSessionId=lp,this.instance.info("JSNLog configured.")}}catch(dp){console.error("Error configuring JSNLog: "),console.error(dp),this.instance.disableLogger()}},_d.getInstance=function(){return _d.instance||(_d.instance=new _d),_d.instance},_d.isInvalidResponse=function(rp){return rp.status==401||rp.status==403||rp.status==404||rp.status==0},_d.prototype.canConfigureJSNLog=function(rp,np){return rp.session.sessionId!=np.loggingSessionId},_d.prototype.isOpenViduBrowserLogsDebugActive=function(rp){return rp.sendBrowserLogs===OpenViduLoggerConfiguration_1$1.OpenViduLoggerConfiguration.debug||rp.sendBrowserLogs===OpenViduLoggerConfiguration_1$1.OpenViduLoggerConfiguration.debug_app},_d.prototype.getConsoleWithJSNLog=function(){return function(rp){return{log:function(){rp.defaultConsoleLogger.log.apply(rp.defaultConsoleLogger.logger,arguments),rp.isJSNLogSetup&&(0,jsnlog_1.JL)().info(arguments)},info:function(){rp.defaultConsoleLogger.info.apply(rp.defaultConsoleLogger.logger,arguments),rp.isJSNLogSetup&&(0,jsnlog_1.JL)().info(arguments)},debug:function(){rp.defaultConsoleLogger.debug.apply(rp.defaultConsoleLogger.logger,arguments)},warn:function(){rp.defaultConsoleLogger.warn.apply(rp.defaultConsoleLogger.logger,arguments),rp.isJSNLogSetup&&(0,jsnlog_1.JL)().warn(arguments)},error:function(){rp.defaultConsoleLogger.error.apply(rp.defaultConsoleLogger.logger,arguments),rp.isJSNLogSetup&&(0,jsnlog_1.JL)().error(arguments)}}}(this)},_d.prototype.replaceWindowConsole=function(){globalThis.console=this.defaultConsoleLogger.logger,globalThis.console.log=this.getConsoleWithJSNLog().log,globalThis.console.info=this.getConsoleWithJSNLog().info,globalThis.console.debug=this.getConsoleWithJSNLog().debug,globalThis.console.warn=this.getConsoleWithJSNLog().warn,globalThis.console.error=this.getConsoleWithJSNLog().error},_d.prototype.disableLogger=function(){jsnlog_1.JL.setOptions({enabled:!1}),this.isJSNLogSetup=!1,this.loggingSessionId=void 0,this.currentAppender=void 0,globalThis.console=this.defaultConsoleLogger.logger,globalThis.console.log=this.defaultConsoleLogger.log,globalThis.console.info=this.defaultConsoleLogger.info,globalThis.console.debug=this.defaultConsoleLogger.debug,globalThis.console.warn=this.defaultConsoleLogger.warn,globalThis.console.error=this.defaultConsoleLogger.error},_d.prototype.log=function(){this.isProdMode||this.defaultConsoleLogger.log.apply(this.defaultConsoleLogger.logger,arguments),this.isJSNLogSetup&&(0,jsnlog_1.JL)().info(arguments)},_d.prototype.debug=function(){this.isProdMode||this.defaultConsoleLogger.debug.apply(this.defaultConsoleLogger.logger,arguments)},_d.prototype.info=function(){this.isProdMode||this.defaultConsoleLogger.info.apply(this.defaultConsoleLogger.logger,arguments),this.isJSNLogSetup&&(0,jsnlog_1.JL)().info(arguments)},_d.prototype.warn=function(){this.defaultConsoleLogger.warn.apply(this.defaultConsoleLogger.logger,arguments),this.isJSNLogSetup&&(0,jsnlog_1.JL)().warn(arguments)},_d.prototype.error=function(){this.defaultConsoleLogger.error.apply(this.defaultConsoleLogger.logger,arguments),this.isJSNLogSetup&&(0,jsnlog_1.JL)().error(arguments)},_d.prototype.flush=function(){this.isJSNLogSetup&&this.currentAppender!=null&&this.currentAppender.sendBatch()},_d.prototype.enableProdMode=function(){this.isProdMode=!0},_d}();OpenViduLogger$1.OpenViduLogger=OpenViduLogger;var Platform={},platform$6={exports:{}};/*!
 * Platform.js v1.3.6
 * Copyright 2014-2020 Benjamin Tan
 * Copyright 2011-2013 John-David Dalton
 * Available under MIT license
 */platform$6.exports;(function(_d,rp){(function(){var np={function:!0,object:!0},ap=np[typeof window]&&window||this,sp=rp,lp=_d&&!_d.nodeType&&_d,up=sp&&lp&&typeof commonjsGlobal=="object"&&commonjsGlobal;up&&(up.global===up||up.window===up||up.self===up)&&(ap=up);var cp=Math.pow(2,53)-1,dp=/\bOpera/,fp=Object.prototype,pp=fp.hasOwnProperty,hp=fp.toString;function mp(Cp){return Cp=String(Cp),Cp.charAt(0).toUpperCase()+Cp.slice(1)}function gp(Cp,Ap,Op){var Lp={"10.0":"10","6.4":"10 Technical Preview","6.3":"8.1","6.2":"8","6.1":"Server 2008 R2 / 7","6.0":"Server 2008 / Vista","5.2":"Server 2003 / XP 64-bit","5.1":"XP","5.01":"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return Ap&&Op&&/^Win/i.test(Cp)&&!/^Windows Phone /i.test(Cp)&&(Lp=Lp[/[\d.]+$/.exec(Cp)])&&(Cp="Windows "+Lp),Cp=String(Cp),Ap&&Op&&(Cp=Cp.replace(RegExp(Ap,"i"),Op)),Cp=xp(Cp.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0]),Cp}function vp(Cp,Ap){var Op=-1,Lp=Cp?Cp.length:0;if(typeof Lp=="number"&&Lp>-1&&Lp<=cp)for(;++Op<Lp;)Ap(Cp[Op],Op,Cp);else Sp(Cp,Ap)}function xp(Cp){return Cp=_p(Cp),/^(?:webOS|i(?:OS|P))/.test(Cp)?Cp:mp(Cp)}function Sp(Cp,Ap){for(var Op in Cp)pp.call(Cp,Op)&&Ap(Cp[Op],Op,Cp)}function yp(Cp){return Cp==null?mp(Cp):hp.call(Cp).slice(8,-1)}function bp(Cp,Ap){var Op=Cp!=null?typeof Cp[Ap]:"number";return!/^(?:boolean|number|string|undefined)$/.test(Op)&&(Op=="object"?!!Cp[Ap]:!0)}function Ep(Cp){return String(Cp).replace(/([ -])(?!$)/g,"$1?")}function wp(Cp,Ap){var Op=null;return vp(Cp,function(Lp,Mp){Op=Ap(Op,Lp,Mp,Cp)}),Op}function _p(Cp){return String(Cp).replace(/^ +| +$/g,"")}function Rp(Cp){var Ap=ap,Op=Cp&&typeof Cp=="object"&&yp(Cp)!="String";Op&&(Ap=Cp,Cp=null);var Lp=Ap.navigator||{},Mp=Lp.userAgent||"";Cp||(Cp=Mp);var kp=Op?!!Lp.likeChrome:/\bChrome\b/.test(Cp)&&!/internal|\n/i.test(hp.toString()),Dp="Object",Fp=Op?Dp:"ScriptBridgingProxyObject",Ip=Op?Dp:"Environment",Pp=Op&&Ap.java?"JavaPackage":yp(Ap.java),Tp=Op?Dp:"RuntimeObject",Np=/\bJava/.test(Pp)&&Ap.java,jp=Np&&yp(Ap.environment)==Ip,Vp=Np?"a":"α",zp=Np?"b":"β",Wp=Ap.document||{},Up=Ap.operamini||Ap.opera,qp=dp.test(qp=Op&&Up?Up["[[Class]]"]:yp(Up))?qp:Up=null,Bp,Yp=Cp,Xp=[],Qp=null,am=Cp==Mp,Jp=am&&Up&&typeof Up.version=="function"&&Up.version(),im,Zp=_m([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"]),Gp=Rm(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"(?:Edge|Edg|EdgA|EdgiOS)"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Vivaldi","Waterfox","WebPositive",{label:"Yandex Browser",pattern:"YaBrowser"},{label:"UC Browser",pattern:"UCBrowser"},"Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chromium","Chrome",{label:"Chrome",pattern:"(?:HeadlessChrome)"},{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),tm=$m([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),om=Cm({Apple:{iPad:1,iPhone:1,iPod:1},Alcatel:{},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},Huawei:{},Lenovo:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Oppo:{},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1},Xiaomi:{Mi:1,Redmi:1}}),em=xm(["Windows Phone","KaiOS","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian",{label:"DragonFly BSD",pattern:"DragonFly"},"Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);function _m(hm){return wp(hm,function(lm,sm){return lm||RegExp("\\b"+(sm.pattern||Ep(sm))+"\\b","i").exec(Cp)&&(sm.label||sm)})}function Cm(hm){return wp(hm,function(lm,sm,ym){return lm||(sm[tm]||sm[/^[a-z]+(?: +[a-z]+\b)*/i.exec(tm)]||RegExp("\\b"+Ep(ym)+"(?:\\b|\\w*\\d)","i").exec(Cp))&&ym})}function Rm(hm){return wp(hm,function(lm,sm){return lm||RegExp("\\b"+(sm.pattern||Ep(sm))+"\\b","i").exec(Cp)&&(sm.label||sm)})}function xm(hm){return wp(hm,function(lm,sm){var ym=sm.pattern||Ep(sm);return!lm&&(lm=RegExp("\\b"+ym+"(?:/[\\d.]+|[ \\w.]*)","i").exec(Cp))&&(lm=gp(lm,ym,sm.label||sm)),lm})}function $m(hm){return wp(hm,function(lm,sm){var ym=sm.pattern||Ep(sm);return!lm&&(lm=RegExp("\\b"+ym+" *\\d+[.\\w_]*","i").exec(Cp)||RegExp("\\b"+ym+" *\\w+-[\\w]*","i").exec(Cp)||RegExp("\\b"+ym+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(Cp))&&((lm=String(sm.label&&!RegExp(ym,"i").test(sm.label)?sm.label:lm).split("/"))[1]&&!/[\d.]+/.test(lm[0])&&(lm[0]+=" "+lm[1]),sm=sm.label||sm,lm=xp(lm[0].replace(RegExp(ym,"i"),sm).replace(RegExp("; *(?:"+sm+"[_-])?","i")," ").replace(RegExp("("+sm+")[-_.]?(\\w)","i"),"$1 $2"))),lm})}function fm(hm){return wp(hm,function(lm,sm){return lm||(RegExp(sm+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(Cp)||0)[1]||null})}function Sm(){return this.description||""}if(Zp&&(Zp=[Zp]),/\bAndroid\b/.test(em)&&!tm&&(Bp=/\bAndroid[^;]*;(.*?)(?:Build|\) AppleWebKit)\b/i.exec(Cp))&&(tm=_p(Bp[1]).replace(/^[a-z]{2}-[a-z]{2};\s*/i,"")||null),om&&!tm?tm=$m([om]):om&&tm&&(tm=tm.replace(RegExp("^("+Ep(om)+")[-_.\\s]","i"),om+" ").replace(RegExp("^("+Ep(om)+")[-_.]?(\\w)","i"),om+" $2")),(Bp=/\bGoogle TV\b/.exec(tm))&&(tm=Bp[0]),/\bSimulator\b/i.test(Cp)&&(tm=(tm?tm+" ":"")+"Simulator"),Gp=="Opera Mini"&&/\bOPiOS\b/.test(Cp)&&Xp.push("running in Turbo/Uncompressed mode"),Gp=="IE"&&/\blike iPhone OS\b/.test(Cp)?(Bp=Rp(Cp.replace(/like iPhone OS/,"")),om=Bp.manufacturer,tm=Bp.product):/^iP/.test(tm)?(Gp||(Gp="Safari"),em="iOS"+((Bp=/ OS ([\d_]+)/i.exec(Cp))?" "+Bp[1].replace(/_/g,"."):"")):Gp=="Konqueror"&&/^Linux\b/i.test(em)?em="Kubuntu":om&&om!="Google"&&(/Chrome/.test(Gp)&&!/\bMobile Safari\b/i.test(Cp)||/\bVita\b/.test(tm))||/\bAndroid\b/.test(em)&&/^Chrome/.test(Gp)&&/\bVersion\//i.test(Cp)?(Gp="Android Browser",em=/\bAndroid\b/.test(em)?em:"Android"):Gp=="Silk"?(/\bMobi/i.test(Cp)||(em="Android",Xp.unshift("desktop mode")),/Accelerated *= *true/i.test(Cp)&&Xp.unshift("accelerated")):Gp=="UC Browser"&&/\bUCWEB\b/.test(Cp)?Xp.push("speed mode"):Gp=="PaleMoon"&&(Bp=/\bFirefox\/([\d.]+)\b/.exec(Cp))?Xp.push("identifying as Firefox "+Bp[1]):Gp=="Firefox"&&(Bp=/\b(Mobile|Tablet|TV)\b/i.exec(Cp))?(em||(em="Firefox OS"),tm||(tm=Bp[1])):!Gp||(Bp=!/\bMinefield\b/i.test(Cp)&&/\b(?:Firefox|Safari)\b/.exec(Gp))?(Gp&&!tm&&/[\/,]|^[^(]+?\)/.test(Cp.slice(Cp.indexOf(Bp+"/")+8))&&(Gp=null),(Bp=tm||om||em)&&(tm||om||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(em))&&(Gp=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(em)?em:Bp)+" Browser")):Gp=="Electron"&&(Bp=(/\bChrome\/([\d.]+)\b/.exec(Cp)||0)[1])&&Xp.push("Chromium "+Bp),Jp||(Jp=fm(["(?:Cloud9|CriOS|CrMo|Edge|Edg|EdgA|EdgiOS|FxiOS|HeadlessChrome|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$)|UCBrowser|YaBrowser)","Version",Ep(Gp),"(?:Firefox|Minefield|NetFront)"])),(Bp=Zp=="iCab"&&parseFloat(Jp)>3&&"WebKit"||/\bOpera\b/.test(Gp)&&(/\bOPR\b/.test(Cp)?"Blink":"Presto")||/\b(?:Midori|Nook|Safari)\b/i.test(Cp)&&!/^(?:Trident|EdgeHTML)$/.test(Zp)&&"WebKit"||!Zp&&/\bMSIE\b/i.test(Cp)&&(em=="Mac OS"?"Tasman":"Trident")||Zp=="WebKit"&&/\bPlayStation\b(?! Vita\b)/i.test(Gp)&&"NetFront")&&(Zp=[Bp]),Gp=="IE"&&(Bp=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(Cp)||0)[1])?(Gp+=" Mobile",em="Windows Phone "+(/\+$/.test(Bp)?Bp:Bp+".x"),Xp.unshift("desktop mode")):/\bWPDesktop\b/i.test(Cp)?(Gp="IE Mobile",em="Windows Phone 8.x",Xp.unshift("desktop mode"),Jp||(Jp=(/\brv:([\d.]+)/.exec(Cp)||0)[1])):Gp!="IE"&&Zp=="Trident"&&(Bp=/\brv:([\d.]+)/.exec(Cp))&&(Gp&&Xp.push("identifying as "+Gp+(Jp?" "+Jp:"")),Gp="IE",Jp=Bp[1]),am){if(bp(Ap,"global"))if(Np&&(Bp=Np.lang.System,Yp=Bp.getProperty("os.arch"),em=em||Bp.getProperty("os.name")+" "+Bp.getProperty("os.version")),jp){try{Jp=Ap.require("ringo/engine").version.join("."),Gp="RingoJS"}catch{(Bp=Ap.system)&&Bp.global.system==Ap.system&&(Gp="Narwhal",em||(em=Bp[0].os||null))}Gp||(Gp="Rhino")}else typeof Ap.process=="object"&&!Ap.process.browser&&(Bp=Ap.process)&&(typeof Bp.versions=="object"&&(typeof Bp.versions.electron=="string"?(Xp.push("Node "+Bp.versions.node),Gp="Electron",Jp=Bp.versions.electron):typeof Bp.versions.nw=="string"&&(Xp.push("Chromium "+Jp,"Node "+Bp.versions.node),Gp="NW.js",Jp=Bp.versions.nw)),Gp||(Gp="Node.js",Yp=Bp.arch,em=Bp.platform,Jp=/[\d.]+/.exec(Bp.version),Jp=Jp?Jp[0]:null));else yp(Bp=Ap.runtime)==Fp?(Gp="Adobe AIR",em=Bp.flash.system.Capabilities.os):yp(Bp=Ap.phantom)==Tp?(Gp="PhantomJS",Jp=(Bp=Bp.version||null)&&Bp.major+"."+Bp.minor+"."+Bp.patch):typeof Wp.documentMode=="number"&&(Bp=/\bTrident\/(\d+)/i.exec(Cp))?(Jp=[Jp,Wp.documentMode],(Bp=+Bp[1]+4)!=Jp[1]&&(Xp.push("IE "+Jp[1]+" mode"),Zp&&(Zp[1]=""),Jp[1]=Bp),Jp=Gp=="IE"?String(Jp[1].toFixed(1)):Jp[0]):typeof Wp.documentMode=="number"&&/^(?:Chrome|Firefox)\b/.test(Gp)&&(Xp.push("masking as "+Gp+" "+Jp),Gp="IE",Jp="11.0",Zp=["Trident"],em="Windows");em=em&&xp(em)}if(Jp&&(Bp=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(Jp)||/(?:alpha|beta)(?: ?\d)?/i.exec(Cp+";"+(am&&Lp.appMinorVersion))||/\bMinefield\b/i.test(Cp)&&"a")&&(Qp=/b/i.test(Bp)?"beta":"alpha",Jp=Jp.replace(RegExp(Bp+"\\+?$"),"")+(Qp=="beta"?zp:Vp)+(/\d+\+?/.exec(Bp)||"")),Gp=="Fennec"||Gp=="Firefox"&&/\b(?:Android|Firefox OS|KaiOS)\b/.test(em))Gp="Firefox Mobile";else if(Gp=="Maxthon"&&Jp)Jp=Jp.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(tm))tm=="Xbox 360"&&(em=null),tm=="Xbox 360"&&/\bIEMobile\b/.test(Cp)&&Xp.unshift("mobile mode");else if((/^(?:Chrome|IE|Opera)$/.test(Gp)||Gp&&!tm&&!/Browser|Mobi/.test(Gp))&&(em=="Windows CE"||/Mobi/i.test(Cp)))Gp+=" Mobile";else if(Gp=="IE"&&am)try{Ap.external===null&&Xp.unshift("platform preview")}catch{Xp.unshift("embedded")}else(/\bBlackBerry\b/.test(tm)||/\bBB10\b/.test(Cp))&&(Bp=(RegExp(tm.replace(/ +/g," *")+"/([.\\d]+)","i").exec(Cp)||0)[1]||Jp)?(Bp=[Bp,/BB10/.test(Cp)],em=(Bp[1]?(tm=null,om="BlackBerry"):"Device Software")+" "+Bp[0],Jp=null):this!=Sp&&tm!="Wii"&&(am&&Up||/Opera/.test(Gp)&&/\b(?:MSIE|Firefox)\b/i.test(Cp)||Gp=="Firefox"&&/\bOS X (?:\d+\.){2,}/.test(em)||Gp=="IE"&&(em&&!/^Win/.test(em)&&Jp>5.5||/\bWindows XP\b/.test(em)&&Jp>8||Jp==8&&!/\bTrident\b/.test(Cp)))&&!dp.test(Bp=Rp.call(Sp,Cp.replace(dp,"")+";"))&&Bp.name&&(Bp="ing as "+Bp.name+((Bp=Bp.version)?" "+Bp:""),dp.test(Gp)?(/\bIE\b/.test(Bp)&&em=="Mac OS"&&(em=null),Bp="identify"+Bp):(Bp="mask"+Bp,qp?Gp=xp(qp.replace(/([a-z])([A-Z])/g,"$1 $2")):Gp="Opera",/\bIE\b/.test(Bp)&&(em=null),am||(Jp=null)),Zp=["Presto"],Xp.push(Bp));(Bp=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(Cp)||0)[1])&&(Bp=[parseFloat(Bp.replace(/\.(\d)$/,".0$1")),Bp],Gp=="Safari"&&Bp[1].slice(-1)=="+"?(Gp="WebKit Nightly",Qp="alpha",Jp=Bp[1].slice(0,-1)):(Jp==Bp[1]||Jp==(Bp[2]=(/\bSafari\/([\d.]+\+?)/i.exec(Cp)||0)[1]))&&(Jp=null),Bp[1]=(/\b(?:Headless)?Chrome\/([\d.]+)/i.exec(Cp)||0)[1],Bp[0]==537.36&&Bp[2]==537.36&&parseFloat(Bp[1])>=28&&Zp=="WebKit"&&(Zp=["Blink"]),!am||!kp&&!Bp[1]?(Zp&&(Zp[1]="like Safari"),Bp=(Bp=Bp[0],Bp<400?1:Bp<500?2:Bp<526?3:Bp<533?4:Bp<534?"4+":Bp<535?5:Bp<537?6:Bp<538?7:Bp<601?8:Bp<602?9:Bp<604?10:Bp<606?11:Bp<608?12:"12")):(Zp&&(Zp[1]="like Chrome"),Bp=Bp[1]||(Bp=Bp[0],Bp<530?1:Bp<532?2:Bp<532.05?3:Bp<533?4:Bp<534.03?5:Bp<534.07?6:Bp<534.1?7:Bp<534.13?8:Bp<534.16?9:Bp<534.24?10:Bp<534.3?11:Bp<535.01?12:Bp<535.02?"13+":Bp<535.07?15:Bp<535.11?16:Bp<535.19?17:Bp<536.05?18:Bp<536.1?19:Bp<537.01?20:Bp<537.11?"21+":Bp<537.13?23:Bp<537.18?24:Bp<537.24?25:Bp<537.36?26:Zp!="Blink"?"27":"28")),Zp&&(Zp[1]+=" "+(Bp+=typeof Bp=="number"?".x":/[.+]/.test(Bp)?"":"+")),Gp=="Safari"&&(!Jp||parseInt(Jp)>45)?Jp=Bp:Gp=="Chrome"&&/\bHeadlessChrome/i.test(Cp)&&Xp.unshift("headless")),Gp=="Opera"&&(Bp=/\bzbov|zvav$/.exec(em))?(Gp+=" ",Xp.unshift("desktop mode"),Bp=="zvav"?(Gp+="Mini",Jp=null):Gp+="Mobile",em=em.replace(RegExp(" *"+Bp+"$"),"")):Gp=="Safari"&&/\bChrome\b/.exec(Zp&&Zp[1])?(Xp.unshift("desktop mode"),Gp="Chrome Mobile",Jp=null,/\bOS X\b/.test(em)?(om="Apple",em="iOS 4.3+"):em=null):/\bSRWare Iron\b/.test(Gp)&&!Jp&&(Jp=fm("Chrome")),Jp&&Jp.indexOf(Bp=/[\d.]+$/.exec(em))==0&&Cp.indexOf("/"+Bp+"-")>-1&&(em=_p(em.replace(Bp,""))),em&&em.indexOf(Gp)!=-1&&!RegExp(Gp+" OS").test(em)&&(em=em.replace(RegExp(" *"+Ep(Gp)+" *"),"")),Zp&&!/\b(?:Avant|Nook)\b/.test(Gp)&&(/Browser|Lunascape|Maxthon/.test(Gp)||Gp!="Safari"&&/^iOS/.test(em)&&/\bSafari\b/.test(Zp[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|SRWare Iron|Vivaldi|Web)/.test(Gp)&&Zp[1])&&(Bp=Zp[Zp.length-1])&&Xp.push(Bp),Xp.length&&(Xp=["("+Xp.join("; ")+")"]),om&&tm&&tm.indexOf(om)<0&&Xp.push("on "+om),tm&&Xp.push((/^on /.test(Xp[Xp.length-1])?"":"on ")+tm),em&&(Bp=/ ([\d.+]+)$/.exec(em),im=Bp&&em.charAt(em.length-Bp[0].length-1)=="/",em={architecture:32,family:Bp&&!im?em.replace(Bp[0],""):em,version:Bp?Bp[1]:null,toString:function(){var hm=this.version;return this.family+(hm&&!im?" "+hm:"")+(this.architecture==64?" 64-bit":"")}}),(Bp=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(Yp))&&!/\bi686\b/i.test(Yp)?(em&&(em.architecture=64,em.family=em.family.replace(RegExp(" *"+Bp),"")),Gp&&(/\bWOW64\b/i.test(Cp)||am&&/\w(?:86|32)$/.test(Lp.cpuClass||Lp.platform)&&!/\bWin64; x64\b/i.test(Cp))&&Xp.unshift("32-bit")):em&&/^OS X/.test(em.family)&&Gp=="Chrome"&&parseFloat(Jp)>=39&&(em.architecture=64),Cp||(Cp=null);var pm={};return pm.description=Cp,pm.layout=Zp&&Zp[0],pm.manufacturer=om,pm.name=Gp,pm.prerelease=Qp,pm.product=tm,pm.ua=Cp,pm.version=Gp&&Jp,pm.os=em||{architecture:null,family:null,version:null,toString:function(){return"null"}},pm.parse=Rp,pm.toString=Sm,pm.version&&Xp.unshift(Jp),pm.name&&Xp.unshift(Gp),em&&Gp&&!(em==String(em).split(" ")[0]&&(em==Gp.split(" ")[0]||tm))&&Xp.push(tm?"("+em+")":"on "+em),Xp.length&&(pm.description=Xp.join(" ")),pm}var $p=Rp();sp&&lp?Sp($p,function(Cp,Ap){sp[Ap]=Cp}):ap.platform=$p}).call(commonjsGlobal)})(platform$6,platform$6.exports);var platformExports=platform$6.exports;Object.defineProperty(Platform,"__esModule",{value:!0});Platform.PlatformUtils=void 0;var platform$5=platformExports,PlatformUtils=function(){function _d(){}return _d.getInstance=function(){return this.instance||(this.instance=new _d),_d.instance},_d.prototype.isChromeBrowser=function(){return platform$5.name==="Chrome"},_d.prototype.isSafariBrowser=function(){return platform$5.name==="Safari"},_d.prototype.isChromeMobileBrowser=function(){return platform$5.name==="Chrome Mobile"},_d.prototype.isFirefoxBrowser=function(){return platform$5.name==="Firefox"},_d.prototype.isFirefoxMobileBrowser=function(){return platform$5.name==="Firefox Mobile"||platform$5.name==="Firefox for iOS"},_d.prototype.isOperaBrowser=function(){return platform$5.name==="Opera"},_d.prototype.isOperaMobileBrowser=function(){return platform$5.name==="Opera Mobile"},_d.prototype.isEdgeBrowser=function(){var rp=platform$5!=null&&platform$5.version?parseFloat(platform$5.version):-1;return platform$5.name==="Microsoft Edge"&&rp>=80},_d.prototype.isEdgeMobileBrowser=function(){var rp,np,ap=platform$5!=null&&platform$5.version?parseFloat(platform$5.version):-1;return platform$5.name==="Microsoft Edge"&&(((rp=platform$5.os)===null||rp===void 0?void 0:rp.family)==="Android"||((np=platform$5.os)===null||np===void 0?void 0:np.family)==="iOS")&&ap>45},_d.prototype.isAndroidBrowser=function(){return platform$5.name==="Android Browser"},_d.prototype.isElectron=function(){return platform$5.name==="Electron"},_d.prototype.isNodeJs=function(){return platform$5.name==="Node.js"},_d.prototype.isSamsungBrowser=function(){return platform$5.name==="Samsung Internet Mobile"||platform$5.name==="Samsung Internet"},_d.prototype.isMotorolaEdgeDevice=function(){var rp;return((rp=platform$5.product)===null||rp===void 0?void 0:rp.toLowerCase().includes("motorola edge"))||!1},_d.prototype.isIPhoneOrIPad=function(){var rp=platform$5.ua?platform$5.ua:navigator.userAgent,np="ontouchend"in document,ap=/\b(\w*Macintosh\w*)\b/.test(rp)&&np,sp=/\b(\w*iPhone\w*)\b/.test(rp)&&/\b(\w*Mobile\w*)\b/.test(rp)&&np;return ap||sp},_d.prototype.isIOSWithSafari=function(){var rp=platform$5.ua?platform$5.ua:navigator.userAgent;return this.isIPhoneOrIPad()&&/\b(\w*Apple\w*)\b/.test(navigator.vendor)&&/\b(\w*Safari\w*)\b/.test(rp)&&!/\b(\w*CriOS\w*)\b/.test(rp)&&!/\b(\w*FxiOS\w*)\b/.test(rp)},_d.prototype.isIonicIos=function(){return this.isIPhoneOrIPad()&&platform$5.ua.indexOf("Safari")===-1},_d.prototype.isIonicAndroid=function(){return platform$5.os.family==="Android"&&platform$5.name=="Android Browser"},_d.prototype.isMobileDevice=function(){return platform$5.os.family==="iOS"||platform$5.os.family==="Android"},_d.prototype.isReactNative=function(){return!1},_d.prototype.isChromium=function(){return this.isChromeBrowser()||this.isChromeMobileBrowser()||this.isOperaBrowser()||this.isOperaMobileBrowser()||this.isEdgeBrowser()||this.isEdgeMobileBrowser()||this.isSamsungBrowser()||this.isIonicAndroid()||this.isIonicIos()||this.isElectron()||this.isMotorolaEdgeDevice()},_d.prototype.canScreenShare=function(){var rp=platform$5!=null&&platform$5.version?parseFloat(platform$5.version):-1;return this.isMobileDevice()?!1:this.isChromeBrowser()||this.isFirefoxBrowser()||this.isOperaBrowser()||this.isElectron()||this.isEdgeBrowser()||this.isSafariBrowser()&&rp>=13},_d.prototype.getName=function(){return platform$5.name||""},_d.prototype.getVersion=function(){return platform$5.version||""},_d.prototype.getFamily=function(){return platform$5.os.family||""},_d.prototype.getDescription=function(){return platform$5.description||""},_d}();Platform.PlatformUtils=PlatformUtils;function Mime$2(){this._types=Object.create(null),this._extensions=Object.create(null);for(let _d=0;_d<arguments.length;_d++)this.define(arguments[_d]);this.define=this.define.bind(this),this.getType=this.getType.bind(this),this.getExtension=this.getExtension.bind(this)}Mime$2.prototype.define=function(_d,rp){for(let np in _d){let ap=_d[np].map(function(sp){return sp.toLowerCase()});np=np.toLowerCase();for(let sp=0;sp<ap.length;sp++){const lp=ap[sp];if(lp[0]!=="*"){if(!rp&&lp in this._types)throw new Error('Attempt to change mapping for "'+lp+'" extension from "'+this._types[lp]+'" to "'+np+'". Pass `force=true` to allow this, otherwise remove "'+lp+'" from the list of extensions for "'+np+'".');this._types[lp]=np}}if(rp||!this._extensions[np]){const sp=ap[0];this._extensions[np]=sp[0]!=="*"?sp:sp.substr(1)}}};Mime$2.prototype.getType=function(_d){_d=String(_d);let rp=_d.replace(/^.*[/\\]/,"").toLowerCase(),np=rp.replace(/^.*\./,"").toLowerCase(),ap=rp.length<_d.length;return(np.length<rp.length-1||!ap)&&this._types[np]||null};Mime$2.prototype.getExtension=function(_d){return _d=/^\s*([^;\s]*)/.test(_d)&&RegExp.$1,_d&&this._extensions[_d.toLowerCase()]||null};var Mime_1=Mime$2,standard={"application/andrew-inset":["ez"],"application/applixware":["aw"],"application/atom+xml":["atom"],"application/atomcat+xml":["atomcat"],"application/atomdeleted+xml":["atomdeleted"],"application/atomsvc+xml":["atomsvc"],"application/atsc-dwd+xml":["dwd"],"application/atsc-held+xml":["held"],"application/atsc-rsat+xml":["rsat"],"application/bdoc":["bdoc"],"application/calendar+xml":["xcs"],"application/ccxml+xml":["ccxml"],"application/cdfx+xml":["cdfx"],"application/cdmi-capability":["cdmia"],"application/cdmi-container":["cdmic"],"application/cdmi-domain":["cdmid"],"application/cdmi-object":["cdmio"],"application/cdmi-queue":["cdmiq"],"application/cu-seeme":["cu"],"application/dash+xml":["mpd"],"application/davmount+xml":["davmount"],"application/docbook+xml":["dbk"],"application/dssc+der":["dssc"],"application/dssc+xml":["xdssc"],"application/ecmascript":["es","ecma"],"application/emma+xml":["emma"],"application/emotionml+xml":["emotionml"],"application/epub+zip":["epub"],"application/exi":["exi"],"application/express":["exp"],"application/fdt+xml":["fdt"],"application/font-tdpfr":["pfr"],"application/geo+json":["geojson"],"application/gml+xml":["gml"],"application/gpx+xml":["gpx"],"application/gxf":["gxf"],"application/gzip":["gz"],"application/hjson":["hjson"],"application/hyperstudio":["stk"],"application/inkml+xml":["ink","inkml"],"application/ipfix":["ipfix"],"application/its+xml":["its"],"application/java-archive":["jar","war","ear"],"application/java-serialized-object":["ser"],"application/java-vm":["class"],"application/javascript":["js","mjs"],"application/json":["json","map"],"application/json5":["json5"],"application/jsonml+json":["jsonml"],"application/ld+json":["jsonld"],"application/lgr+xml":["lgr"],"application/lost+xml":["lostxml"],"application/mac-binhex40":["hqx"],"application/mac-compactpro":["cpt"],"application/mads+xml":["mads"],"application/manifest+json":["webmanifest"],"application/marc":["mrc"],"application/marcxml+xml":["mrcx"],"application/mathematica":["ma","nb","mb"],"application/mathml+xml":["mathml"],"application/mbox":["mbox"],"application/mediaservercontrol+xml":["mscml"],"application/metalink+xml":["metalink"],"application/metalink4+xml":["meta4"],"application/mets+xml":["mets"],"application/mmt-aei+xml":["maei"],"application/mmt-usd+xml":["musd"],"application/mods+xml":["mods"],"application/mp21":["m21","mp21"],"application/mp4":["mp4s","m4p"],"application/msword":["doc","dot"],"application/mxf":["mxf"],"application/n-quads":["nq"],"application/n-triples":["nt"],"application/node":["cjs"],"application/octet-stream":["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"],"application/oda":["oda"],"application/oebps-package+xml":["opf"],"application/ogg":["ogx"],"application/omdoc+xml":["omdoc"],"application/onenote":["onetoc","onetoc2","onetmp","onepkg"],"application/oxps":["oxps"],"application/p2p-overlay+xml":["relo"],"application/patch-ops-error+xml":["xer"],"application/pdf":["pdf"],"application/pgp-encrypted":["pgp"],"application/pgp-signature":["asc","sig"],"application/pics-rules":["prf"],"application/pkcs10":["p10"],"application/pkcs7-mime":["p7m","p7c"],"application/pkcs7-signature":["p7s"],"application/pkcs8":["p8"],"application/pkix-attr-cert":["ac"],"application/pkix-cert":["cer"],"application/pkix-crl":["crl"],"application/pkix-pkipath":["pkipath"],"application/pkixcmp":["pki"],"application/pls+xml":["pls"],"application/postscript":["ai","eps","ps"],"application/provenance+xml":["provx"],"application/pskc+xml":["pskcxml"],"application/raml+yaml":["raml"],"application/rdf+xml":["rdf","owl"],"application/reginfo+xml":["rif"],"application/relax-ng-compact-syntax":["rnc"],"application/resource-lists+xml":["rl"],"application/resource-lists-diff+xml":["rld"],"application/rls-services+xml":["rs"],"application/route-apd+xml":["rapd"],"application/route-s-tsid+xml":["sls"],"application/route-usd+xml":["rusd"],"application/rpki-ghostbusters":["gbr"],"application/rpki-manifest":["mft"],"application/rpki-roa":["roa"],"application/rsd+xml":["rsd"],"application/rss+xml":["rss"],"application/rtf":["rtf"],"application/sbml+xml":["sbml"],"application/scvp-cv-request":["scq"],"application/scvp-cv-response":["scs"],"application/scvp-vp-request":["spq"],"application/scvp-vp-response":["spp"],"application/sdp":["sdp"],"application/senml+xml":["senmlx"],"application/sensml+xml":["sensmlx"],"application/set-payment-initiation":["setpay"],"application/set-registration-initiation":["setreg"],"application/shf+xml":["shf"],"application/sieve":["siv","sieve"],"application/smil+xml":["smi","smil"],"application/sparql-query":["rq"],"application/sparql-results+xml":["srx"],"application/srgs":["gram"],"application/srgs+xml":["grxml"],"application/sru+xml":["sru"],"application/ssdl+xml":["ssdl"],"application/ssml+xml":["ssml"],"application/swid+xml":["swidtag"],"application/tei+xml":["tei","teicorpus"],"application/thraud+xml":["tfi"],"application/timestamped-data":["tsd"],"application/toml":["toml"],"application/trig":["trig"],"application/ttml+xml":["ttml"],"application/ubjson":["ubj"],"application/urc-ressheet+xml":["rsheet"],"application/urc-targetdesc+xml":["td"],"application/voicexml+xml":["vxml"],"application/wasm":["wasm"],"application/widget":["wgt"],"application/winhlp":["hlp"],"application/wsdl+xml":["wsdl"],"application/wspolicy+xml":["wspolicy"],"application/xaml+xml":["xaml"],"application/xcap-att+xml":["xav"],"application/xcap-caps+xml":["xca"],"application/xcap-diff+xml":["xdf"],"application/xcap-el+xml":["xel"],"application/xcap-ns+xml":["xns"],"application/xenc+xml":["xenc"],"application/xhtml+xml":["xhtml","xht"],"application/xliff+xml":["xlf"],"application/xml":["xml","xsl","xsd","rng"],"application/xml-dtd":["dtd"],"application/xop+xml":["xop"],"application/xproc+xml":["xpl"],"application/xslt+xml":["*xsl","xslt"],"application/xspf+xml":["xspf"],"application/xv+xml":["mxml","xhvml","xvml","xvm"],"application/yang":["yang"],"application/yin+xml":["yin"],"application/zip":["zip"],"audio/3gpp":["*3gpp"],"audio/adpcm":["adp"],"audio/amr":["amr"],"audio/basic":["au","snd"],"audio/midi":["mid","midi","kar","rmi"],"audio/mobile-xmf":["mxmf"],"audio/mp3":["*mp3"],"audio/mp4":["m4a","mp4a"],"audio/mpeg":["mpga","mp2","mp2a","mp3","m2a","m3a"],"audio/ogg":["oga","ogg","spx","opus"],"audio/s3m":["s3m"],"audio/silk":["sil"],"audio/wav":["wav"],"audio/wave":["*wav"],"audio/webm":["weba"],"audio/xm":["xm"],"font/collection":["ttc"],"font/otf":["otf"],"font/ttf":["ttf"],"font/woff":["woff"],"font/woff2":["woff2"],"image/aces":["exr"],"image/apng":["apng"],"image/avif":["avif"],"image/bmp":["bmp"],"image/cgm":["cgm"],"image/dicom-rle":["drle"],"image/emf":["emf"],"image/fits":["fits"],"image/g3fax":["g3"],"image/gif":["gif"],"image/heic":["heic"],"image/heic-sequence":["heics"],"image/heif":["heif"],"image/heif-sequence":["heifs"],"image/hej2k":["hej2"],"image/hsj2":["hsj2"],"image/ief":["ief"],"image/jls":["jls"],"image/jp2":["jp2","jpg2"],"image/jpeg":["jpeg","jpg","jpe"],"image/jph":["jph"],"image/jphc":["jhc"],"image/jpm":["jpm"],"image/jpx":["jpx","jpf"],"image/jxr":["jxr"],"image/jxra":["jxra"],"image/jxrs":["jxrs"],"image/jxs":["jxs"],"image/jxsc":["jxsc"],"image/jxsi":["jxsi"],"image/jxss":["jxss"],"image/ktx":["ktx"],"image/ktx2":["ktx2"],"image/png":["png"],"image/sgi":["sgi"],"image/svg+xml":["svg","svgz"],"image/t38":["t38"],"image/tiff":["tif","tiff"],"image/tiff-fx":["tfx"],"image/webp":["webp"],"image/wmf":["wmf"],"message/disposition-notification":["disposition-notification"],"message/global":["u8msg"],"message/global-delivery-status":["u8dsn"],"message/global-disposition-notification":["u8mdn"],"message/global-headers":["u8hdr"],"message/rfc822":["eml","mime"],"model/3mf":["3mf"],"model/gltf+json":["gltf"],"model/gltf-binary":["glb"],"model/iges":["igs","iges"],"model/mesh":["msh","mesh","silo"],"model/mtl":["mtl"],"model/obj":["obj"],"model/step+xml":["stpx"],"model/step+zip":["stpz"],"model/step-xml+zip":["stpxz"],"model/stl":["stl"],"model/vrml":["wrl","vrml"],"model/x3d+binary":["*x3db","x3dbz"],"model/x3d+fastinfoset":["x3db"],"model/x3d+vrml":["*x3dv","x3dvz"],"model/x3d+xml":["x3d","x3dz"],"model/x3d-vrml":["x3dv"],"text/cache-manifest":["appcache","manifest"],"text/calendar":["ics","ifb"],"text/coffeescript":["coffee","litcoffee"],"text/css":["css"],"text/csv":["csv"],"text/html":["html","htm","shtml"],"text/jade":["jade"],"text/jsx":["jsx"],"text/less":["less"],"text/markdown":["markdown","md"],"text/mathml":["mml"],"text/mdx":["mdx"],"text/n3":["n3"],"text/plain":["txt","text","conf","def","list","log","in","ini"],"text/richtext":["rtx"],"text/rtf":["*rtf"],"text/sgml":["sgml","sgm"],"text/shex":["shex"],"text/slim":["slim","slm"],"text/spdx":["spdx"],"text/stylus":["stylus","styl"],"text/tab-separated-values":["tsv"],"text/troff":["t","tr","roff","man","me","ms"],"text/turtle":["ttl"],"text/uri-list":["uri","uris","urls"],"text/vcard":["vcard"],"text/vtt":["vtt"],"text/xml":["*xml"],"text/yaml":["yaml","yml"],"video/3gpp":["3gp","3gpp"],"video/3gpp2":["3g2"],"video/h261":["h261"],"video/h263":["h263"],"video/h264":["h264"],"video/iso.segment":["m4s"],"video/jpeg":["jpgv"],"video/jpm":["*jpm","jpgm"],"video/mj2":["mj2","mjp2"],"video/mp2t":["ts"],"video/mp4":["mp4","mp4v","mpg4"],"video/mpeg":["mpeg","mpg","mpe","m1v","m2v"],"video/ogg":["ogv"],"video/quicktime":["qt","mov"],"video/webm":["webm"]};let Mime$1=Mime_1;var lite=new Mime$1(standard);Object.defineProperty(LocalRecorder$1,"__esModule",{value:!0});LocalRecorder$1.LocalRecorder=void 0;var LocalRecorderState_1=LocalRecorderState,OpenViduLogger_1$a=OpenViduLogger$1,Platform_1$5=Platform,Mime=lite,logger$a=OpenViduLogger_1$a.OpenViduLogger.getInstance(),platform$4,LocalRecorder=function(){function _d(rp){this.stream=rp,this.chunks=[],platform$4=Platform_1$5.PlatformUtils.getInstance(),this.connectionId=this.stream.connection?this.stream.connection.connectionId:"default-connection",this.id=this.stream.streamId+"_"+this.connectionId+"_localrecord",this.state=LocalRecorderState_1.LocalRecorderState.READY}return _d.prototype.record=function(rp){var np=this;return new Promise(function(ap,sp){try{if(typeof rp=="string"||rp instanceof String)return sp(`When calling LocalRecorder.record(options) parameter 'options' cannot be a string. Must be an object like { mimeType: "`.concat(rp,'" }'));if(typeof MediaRecorder>"u")throw logger$a.error("MediaRecorder not supported on your device. See compatibility in https://caniuse.com/#search=MediaRecorder"),Error("MediaRecorder not supported on your device. See compatibility in https://caniuse.com/#search=MediaRecorder");if(np.state!==LocalRecorderState_1.LocalRecorderState.READY)throw Error("'LocalRecord.record()' needs 'LocalRecord.state' to be 'READY' (current value: '"+np.state+"'). Call 'LocalRecorder.clean()' or init a new LocalRecorder before");logger$a.log("Starting local recording of stream '"+np.stream.streamId+"' of connection '"+np.connectionId+"'"),rp?rp.mimeType||(rp.mimeType="video/webm"):rp={mimeType:"video/webm"},np.mediaRecorder=new MediaRecorder(np.stream.getMediaStream(),rp),np.mediaRecorder.start()}catch(lp){return sp(lp)}return np.mediaRecorder.ondataavailable=function(lp){lp.data.size>0&&np.chunks.push(lp.data)},np.mediaRecorder.onerror=function(lp){logger$a.error("MediaRecorder error: ",lp)},np.mediaRecorder.onstart=function(){logger$a.log("MediaRecorder started (state="+np.mediaRecorder.state+")")},np.mediaRecorder.onstop=function(){np.onStopDefault()},np.mediaRecorder.onpause=function(){logger$a.log("MediaRecorder paused (state="+np.mediaRecorder.state+")")},np.mediaRecorder.onresume=function(){logger$a.log("MediaRecorder resumed (state="+np.mediaRecorder.state+")")},np.state=LocalRecorderState_1.LocalRecorderState.RECORDING,ap()})},_d.prototype.stop=function(){var rp=this;return new Promise(function(np,ap){try{if(rp.state===LocalRecorderState_1.LocalRecorderState.READY||rp.state===LocalRecorderState_1.LocalRecorderState.FINISHED)throw Error("'LocalRecord.stop()' needs 'LocalRecord.state' to be 'RECORDING' or 'PAUSED' (current value: '"+rp.state+"'). Call 'LocalRecorder.start()' before");rp.mediaRecorder.onstop=function(){return rp.onStopDefault(),np()},rp.mediaRecorder.stop()}catch(sp){return ap(sp)}})},_d.prototype.pause=function(){var rp=this;return new Promise(function(np,ap){try{return rp.state!==LocalRecorderState_1.LocalRecorderState.RECORDING?ap(Error("'LocalRecord.pause()' needs 'LocalRecord.state' to be 'RECORDING' (current value: '"+rp.state+"'). Call 'LocalRecorder.start()' or 'LocalRecorder.resume()' before")):(rp.mediaRecorder.pause(),rp.state=LocalRecorderState_1.LocalRecorderState.PAUSED,np())}catch(sp){return ap(sp)}})},_d.prototype.resume=function(){var rp=this;return new Promise(function(np,ap){try{if(rp.state!==LocalRecorderState_1.LocalRecorderState.PAUSED)throw Error("'LocalRecord.resume()' needs 'LocalRecord.state' to be 'PAUSED' (current value: '"+rp.state+"'). Call 'LocalRecorder.pause()' before");return rp.mediaRecorder.resume(),rp.state=LocalRecorderState_1.LocalRecorderState.RECORDING,np()}catch(sp){return ap(sp)}})},_d.prototype.preview=function(rp){if(this.state!==LocalRecorderState_1.LocalRecorderState.FINISHED)throw Error("'LocalRecord.preview()' needs 'LocalRecord.state' to be 'FINISHED' (current value: '"+this.state+"'). Call 'LocalRecorder.stop()' before");if(this.videoPreview=document.createElement("video"),this.videoPreview.id=this.id,this.videoPreview.autoplay=!0,platform$4.isSafariBrowser()&&(this.videoPreview.playsInline=!0),typeof rp=="string"){var np=document.getElementById(rp);np&&(this.videoPreview=np.appendChild(this.videoPreview))}else this.videoPreview=rp.appendChild(this.videoPreview);return this.videoPreview.src=this.videoPreviewSrc,this.videoPreview},_d.prototype.clean=function(){var rp=this,np=function(){delete rp.blob,rp.chunks=[],rp.state=LocalRecorderState_1.LocalRecorderState.READY};this.state===LocalRecorderState_1.LocalRecorderState.RECORDING||this.state===LocalRecorderState_1.LocalRecorderState.PAUSED?this.stop().then(function(){return np()}).catch(function(){return np()}):np()},_d.prototype.download=function(){if(this.state!==LocalRecorderState_1.LocalRecorderState.FINISHED)throw Error("'LocalRecord.download()' needs 'LocalRecord.state' to be 'FINISHED' (current value: '"+this.state+"'). Call 'LocalRecorder.stop()' before");var rp=document.createElement("a");rp.style.display="none",document.body.appendChild(rp);var np=globalThis.URL.createObjectURL(this.blob);rp.href=np,rp.download=this.id+"."+Mime.getExtension(this.blob.type),rp.click(),globalThis.URL.revokeObjectURL(np),document.body.removeChild(rp)},_d.prototype.getBlob=function(){if(this.state!==LocalRecorderState_1.LocalRecorderState.FINISHED)throw Error("Call 'LocalRecord.stop()' before getting Blob file");return this.blob},_d.prototype.uploadAsBinary=function(rp,np){var ap=this;return new Promise(function(sp,lp){if(ap.state!==LocalRecorderState_1.LocalRecorderState.FINISHED)return lp(Error("'LocalRecord.uploadAsBinary()' needs 'LocalRecord.state' to be 'FINISHED' (current value: '"+ap.state+"'). Call 'LocalRecorder.stop()' before"));var up=new XMLHttpRequest;if(up.open("POST",rp,!0),typeof np=="object")for(var cp=0,dp=Object.keys(np);cp<dp.length;cp++){var fp=dp[cp];up.setRequestHeader(fp,np[fp])}up.onreadystatechange=function(){if(up.readyState===4)return up.status.toString().charAt(0)==="2"?sp(up.responseText):lp(up.status)},up.send(ap.blob)})},_d.prototype.uploadAsMultipartfile=function(rp,np){var ap=this;return new Promise(function(sp,lp){if(ap.state!==LocalRecorderState_1.LocalRecorderState.FINISHED)return lp(Error("'LocalRecord.uploadAsMultipartfile()' needs 'LocalRecord.state' to be 'FINISHED' (current value: '"+ap.state+"'). Call 'LocalRecorder.stop()' before"));var up=new XMLHttpRequest;if(up.open("POST",rp,!0),typeof np=="object")for(var cp=0,dp=Object.keys(np);cp<dp.length;cp++){var fp=dp[cp];up.setRequestHeader(fp,np[fp])}var pp=new FormData;pp.append("file",ap.blob,ap.id+"."+Mime.getExtension(ap.blob.type)),up.onreadystatechange=function(){if(up.readyState===4)return up.status.toString().charAt(0)==="2"?sp(up.responseText):lp(up.status)},up.send(pp)})},_d.prototype.onStopDefault=function(){logger$a.log("MediaRecorder stopped  (state="+this.mediaRecorder.state+")"),this.blob=new Blob(this.chunks,{type:this.mediaRecorder.mimeType}),this.chunks=[],this.videoPreviewSrc=globalThis.URL.createObjectURL(this.blob),this.state=LocalRecorderState_1.LocalRecorderState.FINISHED},_d}();LocalRecorder$1.LocalRecorder=LocalRecorder;var Publisher={},Session={},Connection$1={},Stream$1={},Filter$1={},StreamPropertyChangedEvent$1={},Event$2={};Object.defineProperty(Event$2,"__esModule",{value:!0});Event$2.Event=void 0;var Event$1=function(){function _d(rp,np,ap){this.hasBeenPrevented=!1,this.cancelable=rp,this.target=np,this.type=ap}return _d.prototype.isDefaultPrevented=function(){return this.hasBeenPrevented},_d.prototype.preventDefault=function(){this.callDefaultBehavior=function(){},this.hasBeenPrevented=!0},_d}();Event$2.Event=Event$1;var __extends$e=commonjsGlobal&&commonjsGlobal.__extends||function(){var _d=function(rp,np){return _d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ap,sp){ap.__proto__=sp}||function(ap,sp){for(var lp in sp)Object.prototype.hasOwnProperty.call(sp,lp)&&(ap[lp]=sp[lp])},_d(rp,np)};return function(rp,np){if(typeof np!="function"&&np!==null)throw new TypeError("Class extends value "+String(np)+" is not a constructor or null");_d(rp,np);function ap(){this.constructor=rp}rp.prototype=np===null?Object.create(np):(ap.prototype=np.prototype,new ap)}}();Object.defineProperty(StreamPropertyChangedEvent$1,"__esModule",{value:!0});StreamPropertyChangedEvent$1.StreamPropertyChangedEvent=void 0;var Event_1$b=Event$2,StreamPropertyChangedEvent=function(_d){__extends$e(rp,_d);function rp(np,ap,sp,lp,up,cp){var dp=_d.call(this,!1,np,"streamPropertyChanged")||this;return dp.stream=ap,dp.changedProperty=sp,dp.newValue=lp,dp.oldValue=up,dp.reason=cp,dp}return rp.prototype.callDefaultBehavior=function(){},rp}(Event_1$b.Event);StreamPropertyChangedEvent$1.StreamPropertyChangedEvent=StreamPropertyChangedEvent;var OpenViduError={};(function(_d){Object.defineProperty(_d,"__esModule",{value:!0}),_d.OpenViduError=_d.OpenViduErrorName=void 0,function(np){np.BROWSER_NOT_SUPPORTED="BROWSER_NOT_SUPPORTED",np.DEVICE_ACCESS_DENIED="DEVICE_ACCESS_DENIED",np.DEVICE_ALREADY_IN_USE="DEVICE_ALREADY_IN_USE",np.SCREEN_CAPTURE_DENIED="SCREEN_CAPTURE_DENIED",np.SCREEN_SHARING_NOT_SUPPORTED="SCREEN_SHARING_NOT_SUPPORTED",np.SCREEN_EXTENSION_NOT_INSTALLED="SCREEN_EXTENSION_NOT_INSTALLED",np.SCREEN_EXTENSION_DISABLED="SCREEN_EXTENSION_DISABLED",np.INPUT_VIDEO_DEVICE_NOT_FOUND="INPUT_VIDEO_DEVICE_NOT_FOUND",np.INPUT_AUDIO_DEVICE_NOT_FOUND="INPUT_AUDIO_DEVICE_NOT_FOUND",np.INPUT_AUDIO_DEVICE_GENERIC_ERROR="INPUT_AUDIO_DEVICE_GENERIC_ERROR",np.NO_INPUT_SOURCE_SET="NO_INPUT_SOURCE_SET",np.PUBLISHER_PROPERTIES_ERROR="PUBLISHER_PROPERTIES_ERROR",np.OPENVIDU_PERMISSION_DENIED="OPENVIDU_PERMISSION_DENIED",np.OPENVIDU_NOT_CONNECTED="OPENVIDU_NOT_CONNECTED",np.VIRTUAL_BACKGROUND_ERROR="VIRTUAL_BACKGROUND_ERROR",np.GENERIC_ERROR="GENERIC_ERROR"}(_d.OpenViduErrorName||(_d.OpenViduErrorName={}));var rp=function(){function np(ap,sp){this.name=ap,this.message=sp}return np}();_d.OpenViduError=rp})(OpenViduError);Object.defineProperty(Filter$1,"__esModule",{value:!0});Filter$1.Filter=void 0;var StreamPropertyChangedEvent_1$2=StreamPropertyChangedEvent$1,OpenViduError_1$2=OpenViduError,OpenViduLogger_1$9=OpenViduLogger$1,logger$9=OpenViduLogger_1$9.OpenViduLogger.getInstance(),Filter=function(){function _d(rp,np){this.handlers=new Map,this.type=rp,this.options=np}return _d.prototype.execMethod=function(rp,np){var ap=this;return new Promise(function(sp,lp){var up;logger$9.info("Executing filter method to stream "+ap.stream.streamId);var cp,dp=function(hp){logger$9.info("Filter method successfully executed on Stream "+ap.stream.streamId);var mp=Object.assign({},ap.stream.filter);return ap.stream.filter.lastExecMethod={method:rp,params:cp},hp&&(ap.stream.session.emitEvent("streamPropertyChanged",[new StreamPropertyChangedEvent_1$2.StreamPropertyChangedEvent(ap.stream.session,ap.stream,"filter",ap.stream.filter,mp,"execFilterMethod")]),ap.stream.streamManager.emitEvent("streamPropertyChanged",[new StreamPropertyChangedEvent_1$2.StreamPropertyChangedEvent(ap.stream.streamManager,ap.stream,"filter",ap.stream.filter,mp,"execFilterMethod")])),sp()};if(ap.type.startsWith("VB:")){if(typeof np=="string")try{np=JSON.parse(np)}catch(hp){return lp(new OpenViduError_1$2.OpenViduError(OpenViduError_1$2.OpenViduErrorName.VIRTUAL_BACKGROUND_ERROR,"Wrong params syntax: "+hp))}if(cp=np,rp==="update")if(!((up=ap.stream.virtualBackgroundSinkElements)===null||up===void 0)&&up.VB)ap.stream.virtualBackgroundSinkElements.VB.updateValues(np).then(function(){return dp(!1)}).catch(function(hp){return hp.name===OpenViduError_1$2.OpenViduErrorName.VIRTUAL_BACKGROUND_ERROR?lp(new OpenViduError_1$2.OpenViduError(hp.name,hp.message)):lp(new OpenViduError_1$2.OpenViduError(OpenViduError_1$2.OpenViduErrorName.VIRTUAL_BACKGROUND_ERROR,"Error updating values on Virtual Background filter: "+hp))});else return lp(new OpenViduError_1$2.OpenViduError(OpenViduError_1$2.OpenViduErrorName.VIRTUAL_BACKGROUND_ERROR,"There is no Virtual Background filter applied"));else return lp(new OpenViduError_1$2.OpenViduError(OpenViduError_1$2.OpenViduErrorName.VIRTUAL_BACKGROUND_ERROR,'Unknown Virtual Background method "'.concat(rp,'"')))}else{var fp=void 0;if(typeof np!="string")try{fp=JSON.stringify(np)}catch{var pp="'params' property must be a JSON formatted object";return logger$9.error(pp),lp(pp)}else fp=np;cp=fp,ap.stream.session.openvidu.sendRequest("execFilterMethod",{streamId:ap.stream.streamId,method:rp,params:fp},function(hp,mp){return hp?(logger$9.error("Error executing filter method for Stream "+ap.stream.streamId,hp),hp.code===401?lp(new OpenViduError_1$2.OpenViduError(OpenViduError_1$2.OpenViduErrorName.OPENVIDU_PERMISSION_DENIED,"You don't have permissions to execute a filter method")):lp(hp)):dp(!0)})}})},_d.prototype.addEventListener=function(rp,np){var ap=this;return new Promise(function(sp,lp){logger$9.info("Adding filter event listener to event "+rp+" to stream "+ap.stream.streamId),ap.stream.session.openvidu.sendRequest("addFilterEventListener",{streamId:ap.stream.streamId,eventType:rp},function(up,cp){return up?(logger$9.error("Error adding filter event listener to event "+rp+"for Stream "+ap.stream.streamId,up),up.code===401?lp(new OpenViduError_1$2.OpenViduError(OpenViduError_1$2.OpenViduErrorName.OPENVIDU_PERMISSION_DENIED,"You don't have permissions to add a filter event listener")):lp(up)):(ap.handlers.set(rp,np),logger$9.info("Filter event listener to event "+rp+" successfully applied on Stream "+ap.stream.streamId),sp())})})},_d.prototype.removeEventListener=function(rp){var np=this;return new Promise(function(ap,sp){logger$9.info("Removing filter event listener to event "+rp+" to stream "+np.stream.streamId),np.stream.session.openvidu.sendRequest("removeFilterEventListener",{streamId:np.stream.streamId,eventType:rp},function(lp,up){return lp?(logger$9.error("Error removing filter event listener to event "+rp+"for Stream "+np.stream.streamId,lp),lp.code===401?sp(new OpenViduError_1$2.OpenViduError(OpenViduError_1$2.OpenViduErrorName.OPENVIDU_PERMISSION_DENIED,"You don't have permissions to add a filter event listener")):sp(lp)):(np.handlers.delete(rp),logger$9.info("Filter event listener to event "+rp+" successfully removed on Stream "+np.stream.streamId),ap())})})},_d}();Filter$1.Filter=Filter;var Subscriber$1={},StreamManager$1={},EventDispatcher$1={},EventEmitter$4={exports:{}};/*!
 * EventEmitter v5.2.9 - git.io/ee
 * Unlicense - http://unlicense.org/
 * Oliver Caldwell - https://oli.me.uk/
 * @preserve
 */(function(_d){(function(rp){function np(){}var ap=np.prototype,sp=rp.EventEmitter;function lp(dp,fp){for(var pp=dp.length;pp--;)if(dp[pp].listener===fp)return pp;return-1}function up(dp){return function(){return this[dp].apply(this,arguments)}}ap.getListeners=function(fp){var pp=this._getEvents(),hp,mp;if(fp instanceof RegExp){hp={};for(mp in pp)pp.hasOwnProperty(mp)&&fp.test(mp)&&(hp[mp]=pp[mp])}else hp=pp[fp]||(pp[fp]=[]);return hp},ap.flattenListeners=function(fp){var pp=[],hp;for(hp=0;hp<fp.length;hp+=1)pp.push(fp[hp].listener);return pp},ap.getListenersAsObject=function(fp){var pp=this.getListeners(fp),hp;return pp instanceof Array&&(hp={},hp[fp]=pp),hp||pp};function cp(dp){return typeof dp=="function"||dp instanceof RegExp?!0:dp&&typeof dp=="object"?cp(dp.listener):!1}ap.addListener=function(fp,pp){if(!cp(pp))throw new TypeError("listener must be a function");var hp=this.getListenersAsObject(fp),mp=typeof pp=="object",gp;for(gp in hp)hp.hasOwnProperty(gp)&&lp(hp[gp],pp)===-1&&hp[gp].push(mp?pp:{listener:pp,once:!1});return this},ap.on=up("addListener"),ap.addOnceListener=function(fp,pp){return this.addListener(fp,{listener:pp,once:!0})},ap.once=up("addOnceListener"),ap.defineEvent=function(fp){return this.getListeners(fp),this},ap.defineEvents=function(fp){for(var pp=0;pp<fp.length;pp+=1)this.defineEvent(fp[pp]);return this},ap.removeListener=function(fp,pp){var hp=this.getListenersAsObject(fp),mp,gp;for(gp in hp)hp.hasOwnProperty(gp)&&(mp=lp(hp[gp],pp),mp!==-1&&hp[gp].splice(mp,1));return this},ap.off=up("removeListener"),ap.addListeners=function(fp,pp){return this.manipulateListeners(!1,fp,pp)},ap.removeListeners=function(fp,pp){return this.manipulateListeners(!0,fp,pp)},ap.manipulateListeners=function(fp,pp,hp){var mp,gp,vp=fp?this.removeListener:this.addListener,xp=fp?this.removeListeners:this.addListeners;if(typeof pp=="object"&&!(pp instanceof RegExp))for(mp in pp)pp.hasOwnProperty(mp)&&(gp=pp[mp])&&(typeof gp=="function"?vp.call(this,mp,gp):xp.call(this,mp,gp));else for(mp=hp.length;mp--;)vp.call(this,pp,hp[mp]);return this},ap.removeEvent=function(fp){var pp=typeof fp,hp=this._getEvents(),mp;if(pp==="string")delete hp[fp];else if(fp instanceof RegExp)for(mp in hp)hp.hasOwnProperty(mp)&&fp.test(mp)&&delete hp[mp];else delete this._events;return this},ap.removeAllListeners=up("removeEvent"),ap.emitEvent=function(fp,pp){var hp=this.getListenersAsObject(fp),mp,gp,vp,xp,Sp;for(xp in hp)if(hp.hasOwnProperty(xp))for(mp=hp[xp].slice(0),vp=0;vp<mp.length;vp++)gp=mp[vp],gp.once===!0&&this.removeListener(fp,gp.listener),Sp=gp.listener.apply(this,pp||[]),Sp===this._getOnceReturnValue()&&this.removeListener(fp,gp.listener);return this},ap.trigger=up("emitEvent"),ap.emit=function(fp){var pp=Array.prototype.slice.call(arguments,1);return this.emitEvent(fp,pp)},ap.setOnceReturnValue=function(fp){return this._onceReturnValue=fp,this},ap._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},ap._getEvents=function(){return this._events||(this._events={})},np.noConflict=function(){return rp.EventEmitter=sp,np},_d.exports?_d.exports=np:rp.EventEmitter=np})(typeof window<"u"?window:commonjsGlobal||{})})(EventEmitter$4);var EventEmitterExports=EventEmitter$4.exports;Object.defineProperty(EventDispatcher$1,"__esModule",{value:!0});EventDispatcher$1.EventDispatcher=void 0;var OpenViduLogger_1$8=OpenViduLogger$1,EventEmitter$3=EventEmitterExports,logger$8=OpenViduLogger_1$8.OpenViduLogger.getInstance(),EventDispatcher=function(){function _d(){this.userHandlerArrowHandler=new WeakMap,this.ee=new EventEmitter$3}return _d.prototype.onAux=function(rp,np,ap){var sp=function(lp){lp?logger$8.debug(np,lp):logger$8.debug(np),ap(lp)};return this.userHandlerArrowHandler.set(ap,sp),this.ee.on(rp,sp),this},_d.prototype.onceAux=function(rp,np,ap){var sp=this,lp=function(up){up?logger$8.debug(np,up):logger$8.debug(np),ap(up),sp.userHandlerArrowHandler.delete(ap)};return this.userHandlerArrowHandler.set(ap,lp),this.ee.once(rp,lp),this},_d.prototype.offAux=function(rp,np){if(!np)this.ee.removeAllListeners(rp);else{var ap=this.userHandlerArrowHandler.get(np);ap&&this.ee.off(rp,ap),this.userHandlerArrowHandler.delete(np)}return this},_d}();EventDispatcher$1.EventDispatcher=EventDispatcher;var StreamManagerEvent$1={},__extends$d=commonjsGlobal&&commonjsGlobal.__extends||function(){var _d=function(rp,np){return _d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ap,sp){ap.__proto__=sp}||function(ap,sp){for(var lp in sp)Object.prototype.hasOwnProperty.call(sp,lp)&&(ap[lp]=sp[lp])},_d(rp,np)};return function(rp,np){if(typeof np!="function"&&np!==null)throw new TypeError("Class extends value "+String(np)+" is not a constructor or null");_d(rp,np);function ap(){this.constructor=rp}rp.prototype=np===null?Object.create(np):(ap.prototype=np.prototype,new ap)}}();Object.defineProperty(StreamManagerEvent$1,"__esModule",{value:!0});StreamManagerEvent$1.StreamManagerEvent=void 0;var Event_1$a=Event$2,StreamManagerEvent=function(_d){__extends$d(rp,_d);function rp(np,ap,sp){var lp=_d.call(this,!1,np,ap)||this;return lp.value=sp,lp}return rp.prototype.callDefaultBehavior=function(){},rp}(Event_1$a.Event);StreamManagerEvent$1.StreamManagerEvent=StreamManagerEvent;var VideoElementEvent$1={},__extends$c=commonjsGlobal&&commonjsGlobal.__extends||function(){var _d=function(rp,np){return _d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ap,sp){ap.__proto__=sp}||function(ap,sp){for(var lp in sp)Object.prototype.hasOwnProperty.call(sp,lp)&&(ap[lp]=sp[lp])},_d(rp,np)};return function(rp,np){if(typeof np!="function"&&np!==null)throw new TypeError("Class extends value "+String(np)+" is not a constructor or null");_d(rp,np);function ap(){this.constructor=rp}rp.prototype=np===null?Object.create(np):(ap.prototype=np.prototype,new ap)}}();Object.defineProperty(VideoElementEvent$1,"__esModule",{value:!0});VideoElementEvent$1.VideoElementEvent=void 0;var Event_1$9=Event$2,VideoElementEvent=function(_d){__extends$c(rp,_d);function rp(np,ap,sp){var lp=_d.call(this,!1,ap,sp)||this;return lp.element=np,lp}return rp.prototype.callDefaultBehavior=function(){},rp}(Event_1$9.Event);VideoElementEvent$1.VideoElementEvent=VideoElementEvent;var ExceptionEvent={};(function(_d){var rp=commonjsGlobal&&commonjsGlobal.__extends||function(){var sp=function(lp,up){return sp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(cp,dp){cp.__proto__=dp}||function(cp,dp){for(var fp in dp)Object.prototype.hasOwnProperty.call(dp,fp)&&(cp[fp]=dp[fp])},sp(lp,up)};return function(lp,up){if(typeof up!="function"&&up!==null)throw new TypeError("Class extends value "+String(up)+" is not a constructor or null");sp(lp,up);function cp(){this.constructor=lp}lp.prototype=up===null?Object.create(up):(cp.prototype=up.prototype,new cp)}}();Object.defineProperty(_d,"__esModule",{value:!0}),_d.ExceptionEvent=_d.ExceptionEventName=void 0;var np=Event$2;(function(sp){sp.ICE_CANDIDATE_ERROR="ICE_CANDIDATE_ERROR",sp.ICE_CONNECTION_FAILED="ICE_CONNECTION_FAILED",sp.ICE_CONNECTION_DISCONNECTED="ICE_CONNECTION_DISCONNECTED",sp.NO_STREAM_PLAYING_EVENT="NO_STREAM_PLAYING_EVENT",sp.SPEECH_TO_TEXT_DISCONNECTED="SPEECH_TO_TEXT_DISCONNECTED"})(_d.ExceptionEventName||(_d.ExceptionEventName={}));var ap=function(sp){rp(lp,sp);function lp(up,cp,dp,fp,pp){var hp=sp.call(this,!1,up,"exception")||this;return hp.name=cp,hp.origin=dp,hp.message=fp,hp.data=pp,hp}return lp.prototype.callDefaultBehavior=function(){},lp}(np.Event);_d.ExceptionEvent=ap})(ExceptionEvent);var VideoInsertMode={};(function(_d){Object.defineProperty(_d,"__esModule",{value:!0}),_d.VideoInsertMode=void 0,function(rp){rp.AFTER="AFTER",rp.APPEND="APPEND",rp.BEFORE="BEFORE",rp.PREPEND="PREPEND",rp.REPLACE="REPLACE"}(_d.VideoInsertMode||(_d.VideoInsertMode={}))})(VideoInsertMode);var __extends$b=commonjsGlobal&&commonjsGlobal.__extends||function(){var _d=function(rp,np){return _d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ap,sp){ap.__proto__=sp}||function(ap,sp){for(var lp in sp)Object.prototype.hasOwnProperty.call(sp,lp)&&(ap[lp]=sp[lp])},_d(rp,np)};return function(rp,np){if(typeof np!="function"&&np!==null)throw new TypeError("Class extends value "+String(np)+" is not a constructor or null");_d(rp,np);function ap(){this.constructor=rp}rp.prototype=np===null?Object.create(np):(ap.prototype=np.prototype,new ap)}}();Object.defineProperty(StreamManager$1,"__esModule",{value:!0});StreamManager$1.StreamManager=void 0;var EventDispatcher_1=EventDispatcher$1,StreamManagerEvent_1$1=StreamManagerEvent$1,VideoElementEvent_1=VideoElementEvent$1,ExceptionEvent_1$3=ExceptionEvent,VideoInsertMode_1$1=VideoInsertMode,OpenViduLogger_1$7=OpenViduLogger$1,Platform_1$4=Platform,logger$7=OpenViduLogger_1$7.OpenViduLogger.getInstance(),platform$3,StreamManager=function(_d){__extends$b(rp,_d);function rp(np,ap){var sp=_d.call(this)||this;if(sp.videos=[],sp.lazyLaunchVideoElementCreatedEvent=!1,platform$3=Platform_1$4.PlatformUtils.getInstance(),sp.stream=np,sp.stream.streamManager=sp,sp.remote=!sp.stream.isLocal(),ap){var lp=void 0;typeof ap=="string"?lp=document.getElementById(ap):ap instanceof HTMLElement&&(lp=ap),lp&&(sp.firstVideoElement={targetElement:lp,video:document.createElement("video"),id:"",canplayListenerAdded:!1},(platform$3.isSafariBrowser()||platform$3.isIPhoneOrIPad()&&(platform$3.isChromeMobileBrowser()||platform$3.isEdgeMobileBrowser()||platform$3.isOperaMobileBrowser()||platform$3.isFirefoxMobileBrowser()))&&(sp.firstVideoElement.video.playsInline=!0),sp.targetElement=lp,sp.element=lp)}return sp.canPlayListener=function(){sp.deactivateStreamPlayingEventExceptionTimeout(),sp.ee.emitEvent("streamPlaying",[new StreamManagerEvent_1$1.StreamManagerEvent(sp,"streamPlaying",void 0)])},sp}return rp.prototype.on=function(np,ap){return _d.prototype.onAux.call(this,np,"Event '"+np+"' triggered by '"+(this.remote?"Subscriber":"Publisher")+"'",ap),np==="videoElementCreated"&&this.stream&&this.lazyLaunchVideoElementCreatedEvent&&(this.ee.emitEvent("videoElementCreated",[new VideoElementEvent_1.VideoElementEvent(this.videos[0].video,this,"videoElementCreated")]),this.lazyLaunchVideoElementCreatedEvent=!1),np==="streamPlaying"&&this.videos[0]&&this.videos[0].video&&this.videos[0].video.currentTime>0&&this.videos[0].video.paused===!1&&this.videos[0].video.ended===!1&&this.videos[0].video.readyState===4&&this.ee.emitEvent("streamPlaying",[new StreamManagerEvent_1$1.StreamManagerEvent(this,"streamPlaying",void 0)]),this.stream.hasAudio&&(np==="publisherStartSpeaking"&&this.stream.enableHarkSpeakingEvent(),np==="publisherStopSpeaking"&&this.stream.enableHarkStoppedSpeakingEvent(),np==="streamAudioVolumeChange"&&this.stream.enableHarkVolumeChangeEvent(!1)),this},rp.prototype.once=function(np,ap){return _d.prototype.onceAux.call(this,np,"Event '"+np+"' triggered once by '"+(this.remote?"Subscriber":"Publisher")+"'",ap),np==="videoElementCreated"&&this.stream&&this.lazyLaunchVideoElementCreatedEvent&&this.ee.emitEvent("videoElementCreated",[new VideoElementEvent_1.VideoElementEvent(this.videos[0].video,this,"videoElementCreated")]),np==="streamPlaying"&&this.videos[0]&&this.videos[0].video&&this.videos[0].video.currentTime>0&&this.videos[0].video.paused===!1&&this.videos[0].video.ended===!1&&this.videos[0].video.readyState===4&&this.ee.emitEvent("streamPlaying",[new StreamManagerEvent_1$1.StreamManagerEvent(this,"streamPlaying",void 0)]),this.stream.hasAudio&&(np==="publisherStartSpeaking"&&this.stream.enableOnceHarkSpeakingEvent(),np==="publisherStopSpeaking"&&this.stream.enableOnceHarkStoppedSpeakingEvent(),np==="streamAudioVolumeChange"&&this.stream.enableOnceHarkVolumeChangeEvent(!1)),this},rp.prototype.off=function(np,ap){if(_d.prototype.offAux.call(this,np,ap),np==="publisherStartSpeaking"){var sp=this.ee.getListeners(np).length+this.stream.session.ee.getListeners(np).length;sp===0&&this.stream.disableHarkSpeakingEvent(!1)}if(np==="publisherStopSpeaking"){var lp=this.ee.getListeners(np).length+this.stream.session.ee.getListeners(np).length;lp===0&&this.stream.disableHarkStoppedSpeakingEvent(!1)}if(np==="streamAudioVolumeChange"){var up=this.ee.getListeners(np).length;up===0&&this.stream.disableHarkVolumeChangeEvent(!1)}return this},rp.prototype.addVideoElement=function(np){this.initializeVideoProperties(np),!this.remote&&this.stream.displayMyRemote()&&np.srcObject!==this.stream.getMediaStream()&&(np.srcObject=this.stream.getMediaStream());for(var ap=0,sp=this.videos;ap<sp.length;ap++){var lp=sp[ap];if(lp.video===np)return 0}for(var up=1,cp=0,dp=this.stream.session.streamManagers;cp<dp.length;cp++){var fp=dp[cp];if(fp.disassociateVideo(np)){up=-1;break}}return this.stream.session.streamManagers.forEach(function(pp){pp.disassociateVideo(np)}),this.pushNewStreamManagerVideo({video:np,id:np.id,canplayListenerAdded:!1}),logger$7.info("New video element associated to ",this),up},rp.prototype.createVideoElement=function(np,ap){var sp;if(typeof np=="string"){if(sp=document.getElementById(np),!sp)throw new Error("The provided 'targetElement' couldn't be resolved to any HTML element: "+np)}else if(np instanceof HTMLElement)sp=np;else throw new Error("The provided 'targetElement' couldn't be resolved to any HTML element: "+np);var lp=this.createVideo();this.initializeVideoProperties(lp);var up=ap||VideoInsertMode_1$1.VideoInsertMode.APPEND;switch(up){case VideoInsertMode_1$1.VideoInsertMode.AFTER:sp.parentNode.insertBefore(lp,sp.nextSibling);break;case VideoInsertMode_1$1.VideoInsertMode.APPEND:sp.appendChild(lp);break;case VideoInsertMode_1$1.VideoInsertMode.BEFORE:sp.parentNode.insertBefore(lp,sp);break;case VideoInsertMode_1$1.VideoInsertMode.PREPEND:sp.insertBefore(lp,sp.childNodes[0]);break;case VideoInsertMode_1$1.VideoInsertMode.REPLACE:sp.parentNode.replaceChild(lp,sp);break;default:up=VideoInsertMode_1$1.VideoInsertMode.APPEND,sp.appendChild(lp);break}var cp={targetElement:sp,video:lp,insertMode:up,id:lp.id,canplayListenerAdded:!1};return this.pushNewStreamManagerVideo(cp),this.ee.emitEvent("videoElementCreated",[new VideoElementEvent_1.VideoElementEvent(cp.video,this,"videoElementCreated")]),this.lazyLaunchVideoElementCreatedEvent=!!this.firstVideoElement,lp},rp.prototype.updatePublisherSpeakingEventsOptions=function(np){var ap=this.stream.harkOptions?this.stream.harkOptions:this.stream.session.openvidu.advancedConfiguration.publisherSpeakingEventsOptions||{},sp=typeof np.interval=="number"?np.interval:typeof ap.interval=="number"?ap.interval:100,lp=typeof np.threshold=="number"?np.threshold:typeof ap.threshold=="number"?ap.threshold:-50;this.stream.harkOptions={interval:sp,threshold:lp},this.stream.speechEvent&&(this.stream.speechEvent.setInterval(sp),this.stream.speechEvent.setThreshold(lp))},rp.prototype.initializeVideoProperties=function(np){!this.remote&&this.stream.displayMyRemote()||np.srcObject!==this.stream.getMediaStream()&&(np.srcObject=this.stream.getMediaStream()),np.autoplay=!0,np.controls=!1,(platform$3.isSafariBrowser()||platform$3.isIPhoneOrIPad()&&(platform$3.isChromeMobileBrowser()||platform$3.isEdgeMobileBrowser()||platform$3.isOperaMobileBrowser()||platform$3.isFirefoxMobileBrowser()))&&(np.playsInline=!0),np.id||(np.id=(this.remote?"remote-":"local-")+"video-"+this.stream.streamId,!this.id&&this.targetElement&&(this.id=np.id)),this.remote&&this.isMirroredVideo(np)?this.removeMirrorVideo(np):!this.remote&&!this.stream.displayMyRemote()&&(np.muted=!0,this.isMirroredVideo(np)&&!this.stream.outboundStreamOpts.publisherProperties.mirror?this.removeMirrorVideo(np):this.stream.outboundStreamOpts.publisherProperties.mirror&&!this.stream.isSendScreen()&&this.mirrorVideo(np))},rp.prototype.removeAllVideos=function(){for(var np=this,ap=this.stream.session.streamManagers.length-1;ap>=0;--ap)this.stream.session.streamManagers[ap]===this&&this.stream.session.streamManagers.splice(ap,1);this.videos.forEach(function(sp){sp.video&&sp.video.removeEventListener&&sp.video.removeEventListener("canplay",np.canPlayListener),sp.canplayListenerAdded=!1,sp.targetElement&&(sp.video.parentNode.removeChild(sp.video),np.ee.emitEvent("videoElementDestroyed",[new VideoElementEvent_1.VideoElementEvent(sp.video,np,"videoElementDestroyed")])),np.removeSrcObject(sp),np.videos.filter(function(lp){return!lp.targetElement})})},rp.prototype.disassociateVideo=function(np){for(var ap=!1,sp=0;sp<this.videos.length;sp++)if(this.videos[sp].video===np){this.videos[sp].video.removeEventListener("canplay",this.canPlayListener),this.videos.splice(sp,1),ap=!0,logger$7.info("Video element disassociated from ",this);break}return ap},rp.prototype.addPlayEventToFirstVideo=function(){this.videos[0]&&this.videos[0].video&&!this.videos[0].canplayListenerAdded&&(this.activateStreamPlayingEventExceptionTimeout(),this.videos[0].video.addEventListener("canplay",this.canPlayListener),this.videos[0].canplayListenerAdded=!0)},rp.prototype.updateMediaStream=function(np){this.videos.forEach(function(ap){if(ap.video.srcObject=np,platform$3.isIonicIos()){var sp=ap.video.parentElement,lp=ap.video;sp.replaceChild(lp,ap.video),ap.video=lp}})},rp.prototype.emitEvent=function(np,ap){this.ee.emitEvent(np,ap)},rp.prototype.createVideo=function(){return document.createElement("video")},rp.prototype.removeSrcObject=function(np){np.video.srcObject=null,this.deactivateStreamPlayingEventExceptionTimeout()},rp.prototype.pushNewStreamManagerVideo=function(np){this.videos.push(np),this.addPlayEventToFirstVideo(),this.stream.session.streamManagers.indexOf(this)===-1&&this.stream.session.streamManagers.push(this)},rp.prototype.mirrorVideo=function(np){platform$3.isIonicIos()||(np.style.transform="rotateY(180deg)",np.style.webkitTransform="rotateY(180deg)")},rp.prototype.removeMirrorVideo=function(np){np.style.transform="unset",np.style.webkitTransform="unset"},rp.prototype.isMirroredVideo=function(np){return np.style.transform==="rotateY(180deg)"||np.style.webkitTransform==="rotateY(180deg)"},rp.prototype.activateStreamPlayingEventExceptionTimeout=function(){var np=this;if(this.remote&&this.streamPlayingEventExceptionTimeout==null){var ap=this.stream.session.openvidu.advancedConfiguration.noStreamPlayingEventExceptionTimeout||4e3;this.streamPlayingEventExceptionTimeout=setTimeout(function(){var sp="StreamManager of Stream "+np.stream.streamId+" ("+(np.remote?"Subscriber":"Publisher")+') did not trigger "streamPlaying" event in '+ap+" ms";logger$7.warn(sp),np.stream.session.emitEvent("exception",[new ExceptionEvent_1$3.ExceptionEvent(np.stream.session,ExceptionEvent_1$3.ExceptionEventName.NO_STREAM_PLAYING_EVENT,np,sp)]),delete np.streamPlayingEventExceptionTimeout},ap)}},rp.prototype.deactivateStreamPlayingEventExceptionTimeout=function(){clearTimeout(this.streamPlayingEventExceptionTimeout),delete this.streamPlayingEventExceptionTimeout},rp}(EventDispatcher_1.EventDispatcher);StreamManager$1.StreamManager=StreamManager;var __extends$a=commonjsGlobal&&commonjsGlobal.__extends||function(){var _d=function(rp,np){return _d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ap,sp){ap.__proto__=sp}||function(ap,sp){for(var lp in sp)Object.prototype.hasOwnProperty.call(sp,lp)&&(ap[lp]=sp[lp])},_d(rp,np)};return function(rp,np){if(typeof np!="function"&&np!==null)throw new TypeError("Class extends value "+String(np)+" is not a constructor or null");_d(rp,np);function ap(){this.constructor=rp}rp.prototype=np===null?Object.create(np):(ap.prototype=np.prototype,new ap)}}();Object.defineProperty(Subscriber$1,"__esModule",{value:!0});Subscriber$1.Subscriber=void 0;var StreamManager_1=StreamManager$1,OpenViduLogger_1$6=OpenViduLogger$1,logger$6=OpenViduLogger_1$6.OpenViduLogger.getInstance(),Subscriber=function(_d){__extends$a(rp,_d);function rp(np,ap,sp){var lp=_d.call(this,np,ap)||this;return lp.element=lp.targetElement,lp.stream=np,lp.properties=sp,lp}return rp.prototype.subscribeToAudio=function(np){return this.stream.getMediaStream().getAudioTracks().forEach(function(ap){ap.enabled=np}),this.stream.audioActive=np,logger$6.info("'Subscriber' has "+(np?"subscribed to":"unsubscribed from")+" its audio stream"),this},rp.prototype.subscribeToVideo=function(np){return this.stream.getMediaStream().getVideoTracks().forEach(function(ap){ap.enabled=np}),this.stream.videoActive=np,logger$6.info("'Subscriber' has "+(np?"subscribed to":"unsubscribed from")+" its video stream"),this},rp.prototype.replaceTrackInMediaStream=function(np,ap){var sp=this.stream.getMediaStream(),lp;np.kind==="video"?(lp=sp.getVideoTracks()[0],ap&&(this.stream.lastVideoTrackConstraints=np.getConstraints())):lp=sp.getAudioTracks()[0],sp.removeTrack(lp),lp.stop(),sp.addTrack(np)},rp}(StreamManager_1.StreamManager);Subscriber$1.Subscriber=Subscriber;var WebRtcPeer$1={},protocols=["stun:","turn:"],normalice$1=function(_d){var rp=(_d||{}).url||_d,np,ap,sp={};return typeof rp!="string"&&!(rp instanceof String)||(rp=rp.trim(),np=protocols[protocols.indexOf(rp.slice(0,5))],!np)?_d:(rp=rp.slice(5),ap=rp.split("@"),sp.username=_d.username,sp.credential=_d.credential,ap.length>1&&(rp=ap[1],ap=ap[0].split(":"),sp.username=ap[0],sp.credential=(_d||{}).credential||ap[1]||""),sp.url=np+rp,sp.urls=[sp.url],sp)};const require$$1=["stun.l.google.com:19302","stun1.l.google.com:19302","stun2.l.google.com:19302","stun3.l.google.com:19302","stun4.l.google.com:19302","stun.ekiga.net","stun.ideasip.com","stun.schlund.de","stun.stunprotocol.org:3478","stun.voiparound.com","stun.voipbuster.com","stun.voipstunt.com","stun.voxgratia.org"],require$$2=[];var normalice=normalice$1,freeice$1=function(_d){var rp={stun:(_d||{}).stun||require$$1,turn:(_d||{}).turn||require$$2},np=(_d||{}).stunCount||2,ap=(_d||{}).turnCount||0,sp;function lp(up,cp){for(var dp=[],fp=[].concat(rp[up]),pp;fp.length&&dp.length<cp;)pp=Math.random()*fp.length|0,dp=dp.concat(fp.splice(pp,1));return dp.map(function(hp){return typeof hp!="string"&&!(hp instanceof String)?hp:normalice(up+":"+hp)})}return sp=[].concat(lp("stun",np)),ap&&(sp=sp.concat(lp("turn",ap))),sp},freeice_1=freeice$1,commonjsBrowser={},v1$1={},rng$1={};Object.defineProperty(rng$1,"__esModule",{value:!0});rng$1.default=rng;let getRandomValues;const rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&(getRandomValues=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!getRandomValues))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}var stringify$1={},validate$1={},regex={};Object.defineProperty(regex,"__esModule",{value:!0});regex.default=void 0;var _default$c=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;regex.default=_default$c;Object.defineProperty(validate$1,"__esModule",{value:!0});validate$1.default=void 0;var _regex=_interopRequireDefault$m(regex);function _interopRequireDefault$m(_d){return _d&&_d.__esModule?_d:{default:_d}}function validate(_d){return typeof _d=="string"&&_regex.default.test(_d)}var _default$b=validate;validate$1.default=_default$b;Object.defineProperty(stringify$1,"__esModule",{value:!0});stringify$1.default=void 0;stringify$1.unsafeStringify=unsafeStringify;var _validate$2=_interopRequireDefault$l(validate$1);function _interopRequireDefault$l(_d){return _d&&_d.__esModule?_d:{default:_d}}const byteToHex=[];for(let _d=0;_d<256;++_d)byteToHex.push((_d+256).toString(16).slice(1));function unsafeStringify(_d,rp=0){return(byteToHex[_d[rp+0]]+byteToHex[_d[rp+1]]+byteToHex[_d[rp+2]]+byteToHex[_d[rp+3]]+"-"+byteToHex[_d[rp+4]]+byteToHex[_d[rp+5]]+"-"+byteToHex[_d[rp+6]]+byteToHex[_d[rp+7]]+"-"+byteToHex[_d[rp+8]]+byteToHex[_d[rp+9]]+"-"+byteToHex[_d[rp+10]]+byteToHex[_d[rp+11]]+byteToHex[_d[rp+12]]+byteToHex[_d[rp+13]]+byteToHex[_d[rp+14]]+byteToHex[_d[rp+15]]).toLowerCase()}function stringify(_d,rp=0){const np=unsafeStringify(_d,rp);if(!(0,_validate$2.default)(np))throw TypeError("Stringified UUID is invalid");return np}var _default$a=stringify;stringify$1.default=_default$a;Object.defineProperty(v1$1,"__esModule",{value:!0});v1$1.default=void 0;var _rng$1=_interopRequireDefault$k(rng$1),_stringify$2=stringify$1;function _interopRequireDefault$k(_d){return _d&&_d.__esModule?_d:{default:_d}}let _nodeId,_clockseq,_lastMSecs=0,_lastNSecs=0;function v1(_d,rp,np){let ap=rp&&np||0;const sp=rp||new Array(16);_d=_d||{};let lp=_d.node||_nodeId,up=_d.clockseq!==void 0?_d.clockseq:_clockseq;if(lp==null||up==null){const mp=_d.random||(_d.rng||_rng$1.default)();lp==null&&(lp=_nodeId=[mp[0]|1,mp[1],mp[2],mp[3],mp[4],mp[5]]),up==null&&(up=_clockseq=(mp[6]<<8|mp[7])&16383)}let cp=_d.msecs!==void 0?_d.msecs:Date.now(),dp=_d.nsecs!==void 0?_d.nsecs:_lastNSecs+1;const fp=cp-_lastMSecs+(dp-_lastNSecs)/1e4;if(fp<0&&_d.clockseq===void 0&&(up=up+1&16383),(fp<0||cp>_lastMSecs)&&_d.nsecs===void 0&&(dp=0),dp>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");_lastMSecs=cp,_lastNSecs=dp,_clockseq=up,cp+=122192928e5;const pp=((cp&268435455)*1e4+dp)%4294967296;sp[ap++]=pp>>>24&255,sp[ap++]=pp>>>16&255,sp[ap++]=pp>>>8&255,sp[ap++]=pp&255;const hp=cp/4294967296*1e4&268435455;sp[ap++]=hp>>>8&255,sp[ap++]=hp&255,sp[ap++]=hp>>>24&15|16,sp[ap++]=hp>>>16&255,sp[ap++]=up>>>8|128,sp[ap++]=up&255;for(let mp=0;mp<6;++mp)sp[ap+mp]=lp[mp];return rp||(0,_stringify$2.unsafeStringify)(sp)}var _default$9=v1;v1$1.default=_default$9;var v3$1={},v35$1={},parse$1={};Object.defineProperty(parse$1,"__esModule",{value:!0});parse$1.default=void 0;var _validate$1=_interopRequireDefault$j(validate$1);function _interopRequireDefault$j(_d){return _d&&_d.__esModule?_d:{default:_d}}function parse(_d){if(!(0,_validate$1.default)(_d))throw TypeError("Invalid UUID");let rp;const np=new Uint8Array(16);return np[0]=(rp=parseInt(_d.slice(0,8),16))>>>24,np[1]=rp>>>16&255,np[2]=rp>>>8&255,np[3]=rp&255,np[4]=(rp=parseInt(_d.slice(9,13),16))>>>8,np[5]=rp&255,np[6]=(rp=parseInt(_d.slice(14,18),16))>>>8,np[7]=rp&255,np[8]=(rp=parseInt(_d.slice(19,23),16))>>>8,np[9]=rp&255,np[10]=(rp=parseInt(_d.slice(24,36),16))/1099511627776&255,np[11]=rp/4294967296&255,np[12]=rp>>>24&255,np[13]=rp>>>16&255,np[14]=rp>>>8&255,np[15]=rp&255,np}var _default$8=parse;parse$1.default=_default$8;Object.defineProperty(v35$1,"__esModule",{value:!0});v35$1.URL=v35$1.DNS=void 0;v35$1.default=v35;var _stringify$1=stringify$1,_parse=_interopRequireDefault$i(parse$1);function _interopRequireDefault$i(_d){return _d&&_d.__esModule?_d:{default:_d}}function stringToBytes(_d){_d=unescape(encodeURIComponent(_d));const rp=[];for(let np=0;np<_d.length;++np)rp.push(_d.charCodeAt(np));return rp}const DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8";v35$1.DNS=DNS;const URL$1="6ba7b811-9dad-11d1-80b4-00c04fd430c8";v35$1.URL=URL$1;function v35(_d,rp,np){function ap(sp,lp,up,cp){var dp;if(typeof sp=="string"&&(sp=stringToBytes(sp)),typeof lp=="string"&&(lp=(0,_parse.default)(lp)),((dp=lp)===null||dp===void 0?void 0:dp.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let fp=new Uint8Array(16+sp.length);if(fp.set(lp),fp.set(sp,lp.length),fp=np(fp),fp[6]=fp[6]&15|rp,fp[8]=fp[8]&63|128,up){cp=cp||0;for(let pp=0;pp<16;++pp)up[cp+pp]=fp[pp];return up}return(0,_stringify$1.unsafeStringify)(fp)}try{ap.name=_d}catch{}return ap.DNS=DNS,ap.URL=URL$1,ap}var md5$1={};Object.defineProperty(md5$1,"__esModule",{value:!0});md5$1.default=void 0;function md5(_d){if(typeof _d=="string"){const rp=unescape(encodeURIComponent(_d));_d=new Uint8Array(rp.length);for(let np=0;np<rp.length;++np)_d[np]=rp.charCodeAt(np)}return md5ToHexEncodedArray(wordsToMd5(bytesToWords(_d),_d.length*8))}function md5ToHexEncodedArray(_d){const rp=[],np=_d.length*32,ap="0123456789abcdef";for(let sp=0;sp<np;sp+=8){const lp=_d[sp>>5]>>>sp%32&255,up=parseInt(ap.charAt(lp>>>4&15)+ap.charAt(lp&15),16);rp.push(up)}return rp}function getOutputLength(_d){return(_d+64>>>9<<4)+14+1}function wordsToMd5(_d,rp){_d[rp>>5]|=128<<rp%32,_d[getOutputLength(rp)-1]=rp;let np=1732584193,ap=-271733879,sp=-1732584194,lp=271733878;for(let up=0;up<_d.length;up+=16){const cp=np,dp=ap,fp=sp,pp=lp;np=md5ff(np,ap,sp,lp,_d[up],7,-680876936),lp=md5ff(lp,np,ap,sp,_d[up+1],12,-389564586),sp=md5ff(sp,lp,np,ap,_d[up+2],17,606105819),ap=md5ff(ap,sp,lp,np,_d[up+3],22,-1044525330),np=md5ff(np,ap,sp,lp,_d[up+4],7,-176418897),lp=md5ff(lp,np,ap,sp,_d[up+5],12,1200080426),sp=md5ff(sp,lp,np,ap,_d[up+6],17,-1473231341),ap=md5ff(ap,sp,lp,np,_d[up+7],22,-45705983),np=md5ff(np,ap,sp,lp,_d[up+8],7,1770035416),lp=md5ff(lp,np,ap,sp,_d[up+9],12,-1958414417),sp=md5ff(sp,lp,np,ap,_d[up+10],17,-42063),ap=md5ff(ap,sp,lp,np,_d[up+11],22,-1990404162),np=md5ff(np,ap,sp,lp,_d[up+12],7,1804603682),lp=md5ff(lp,np,ap,sp,_d[up+13],12,-40341101),sp=md5ff(sp,lp,np,ap,_d[up+14],17,-1502002290),ap=md5ff(ap,sp,lp,np,_d[up+15],22,1236535329),np=md5gg(np,ap,sp,lp,_d[up+1],5,-165796510),lp=md5gg(lp,np,ap,sp,_d[up+6],9,-1069501632),sp=md5gg(sp,lp,np,ap,_d[up+11],14,643717713),ap=md5gg(ap,sp,lp,np,_d[up],20,-373897302),np=md5gg(np,ap,sp,lp,_d[up+5],5,-701558691),lp=md5gg(lp,np,ap,sp,_d[up+10],9,38016083),sp=md5gg(sp,lp,np,ap,_d[up+15],14,-660478335),ap=md5gg(ap,sp,lp,np,_d[up+4],20,-405537848),np=md5gg(np,ap,sp,lp,_d[up+9],5,568446438),lp=md5gg(lp,np,ap,sp,_d[up+14],9,-1019803690),sp=md5gg(sp,lp,np,ap,_d[up+3],14,-187363961),ap=md5gg(ap,sp,lp,np,_d[up+8],20,1163531501),np=md5gg(np,ap,sp,lp,_d[up+13],5,-1444681467),lp=md5gg(lp,np,ap,sp,_d[up+2],9,-51403784),sp=md5gg(sp,lp,np,ap,_d[up+7],14,1735328473),ap=md5gg(ap,sp,lp,np,_d[up+12],20,-1926607734),np=md5hh(np,ap,sp,lp,_d[up+5],4,-378558),lp=md5hh(lp,np,ap,sp,_d[up+8],11,-2022574463),sp=md5hh(sp,lp,np,ap,_d[up+11],16,1839030562),ap=md5hh(ap,sp,lp,np,_d[up+14],23,-35309556),np=md5hh(np,ap,sp,lp,_d[up+1],4,-1530992060),lp=md5hh(lp,np,ap,sp,_d[up+4],11,1272893353),sp=md5hh(sp,lp,np,ap,_d[up+7],16,-155497632),ap=md5hh(ap,sp,lp,np,_d[up+10],23,-1094730640),np=md5hh(np,ap,sp,lp,_d[up+13],4,681279174),lp=md5hh(lp,np,ap,sp,_d[up],11,-358537222),sp=md5hh(sp,lp,np,ap,_d[up+3],16,-722521979),ap=md5hh(ap,sp,lp,np,_d[up+6],23,76029189),np=md5hh(np,ap,sp,lp,_d[up+9],4,-640364487),lp=md5hh(lp,np,ap,sp,_d[up+12],11,-421815835),sp=md5hh(sp,lp,np,ap,_d[up+15],16,530742520),ap=md5hh(ap,sp,lp,np,_d[up+2],23,-995338651),np=md5ii(np,ap,sp,lp,_d[up],6,-198630844),lp=md5ii(lp,np,ap,sp,_d[up+7],10,1126891415),sp=md5ii(sp,lp,np,ap,_d[up+14],15,-1416354905),ap=md5ii(ap,sp,lp,np,_d[up+5],21,-57434055),np=md5ii(np,ap,sp,lp,_d[up+12],6,1700485571),lp=md5ii(lp,np,ap,sp,_d[up+3],10,-1894986606),sp=md5ii(sp,lp,np,ap,_d[up+10],15,-1051523),ap=md5ii(ap,sp,lp,np,_d[up+1],21,-2054922799),np=md5ii(np,ap,sp,lp,_d[up+8],6,1873313359),lp=md5ii(lp,np,ap,sp,_d[up+15],10,-30611744),sp=md5ii(sp,lp,np,ap,_d[up+6],15,-1560198380),ap=md5ii(ap,sp,lp,np,_d[up+13],21,1309151649),np=md5ii(np,ap,sp,lp,_d[up+4],6,-145523070),lp=md5ii(lp,np,ap,sp,_d[up+11],10,-1120210379),sp=md5ii(sp,lp,np,ap,_d[up+2],15,718787259),ap=md5ii(ap,sp,lp,np,_d[up+9],21,-343485551),np=safeAdd(np,cp),ap=safeAdd(ap,dp),sp=safeAdd(sp,fp),lp=safeAdd(lp,pp)}return[np,ap,sp,lp]}function bytesToWords(_d){if(_d.length===0)return[];const rp=_d.length*8,np=new Uint32Array(getOutputLength(rp));for(let ap=0;ap<rp;ap+=8)np[ap>>5]|=(_d[ap/8]&255)<<ap%32;return np}function safeAdd(_d,rp){const np=(_d&65535)+(rp&65535);return(_d>>16)+(rp>>16)+(np>>16)<<16|np&65535}function bitRotateLeft(_d,rp){return _d<<rp|_d>>>32-rp}function md5cmn(_d,rp,np,ap,sp,lp){return safeAdd(bitRotateLeft(safeAdd(safeAdd(rp,_d),safeAdd(ap,lp)),sp),np)}function md5ff(_d,rp,np,ap,sp,lp,up){return md5cmn(rp&np|~rp&ap,_d,rp,sp,lp,up)}function md5gg(_d,rp,np,ap,sp,lp,up){return md5cmn(rp&ap|np&~ap,_d,rp,sp,lp,up)}function md5hh(_d,rp,np,ap,sp,lp,up){return md5cmn(rp^np^ap,_d,rp,sp,lp,up)}function md5ii(_d,rp,np,ap,sp,lp,up){return md5cmn(np^(rp|~ap),_d,rp,sp,lp,up)}var _default$7=md5;md5$1.default=_default$7;Object.defineProperty(v3$1,"__esModule",{value:!0});v3$1.default=void 0;var _v$1=_interopRequireDefault$h(v35$1),_md=_interopRequireDefault$h(md5$1);function _interopRequireDefault$h(_d){return _d&&_d.__esModule?_d:{default:_d}}const v3=(0,_v$1.default)("v3",48,_md.default);var _default$6=v3;v3$1.default=_default$6;var v4$1={},native={};Object.defineProperty(native,"__esModule",{value:!0});native.default=void 0;const randomUUID=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var _default$5={randomUUID};native.default=_default$5;Object.defineProperty(v4$1,"__esModule",{value:!0});v4$1.default=void 0;var _native=_interopRequireDefault$g(native),_rng=_interopRequireDefault$g(rng$1),_stringify=stringify$1;function _interopRequireDefault$g(_d){return _d&&_d.__esModule?_d:{default:_d}}function v4(_d,rp,np){if(_native.default.randomUUID&&!rp&&!_d)return _native.default.randomUUID();_d=_d||{};const ap=_d.random||(_d.rng||_rng.default)();if(ap[6]=ap[6]&15|64,ap[8]=ap[8]&63|128,rp){np=np||0;for(let sp=0;sp<16;++sp)rp[np+sp]=ap[sp];return rp}return(0,_stringify.unsafeStringify)(ap)}var _default$4=v4;v4$1.default=_default$4;var v5$1={},sha1$1={};Object.defineProperty(sha1$1,"__esModule",{value:!0});sha1$1.default=void 0;function f(_d,rp,np,ap){switch(_d){case 0:return rp&np^~rp&ap;case 1:return rp^np^ap;case 2:return rp&np^rp&ap^np&ap;case 3:return rp^np^ap}}function ROTL(_d,rp){return _d<<rp|_d>>>32-rp}function sha1(_d){const rp=[1518500249,1859775393,2400959708,3395469782],np=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof _d=="string"){const up=unescape(encodeURIComponent(_d));_d=[];for(let cp=0;cp<up.length;++cp)_d.push(up.charCodeAt(cp))}else Array.isArray(_d)||(_d=Array.prototype.slice.call(_d));_d.push(128);const ap=_d.length/4+2,sp=Math.ceil(ap/16),lp=new Array(sp);for(let up=0;up<sp;++up){const cp=new Uint32Array(16);for(let dp=0;dp<16;++dp)cp[dp]=_d[up*64+dp*4]<<24|_d[up*64+dp*4+1]<<16|_d[up*64+dp*4+2]<<8|_d[up*64+dp*4+3];lp[up]=cp}lp[sp-1][14]=(_d.length-1)*8/Math.pow(2,32),lp[sp-1][14]=Math.floor(lp[sp-1][14]),lp[sp-1][15]=(_d.length-1)*8&4294967295;for(let up=0;up<sp;++up){const cp=new Uint32Array(80);for(let gp=0;gp<16;++gp)cp[gp]=lp[up][gp];for(let gp=16;gp<80;++gp)cp[gp]=ROTL(cp[gp-3]^cp[gp-8]^cp[gp-14]^cp[gp-16],1);let dp=np[0],fp=np[1],pp=np[2],hp=np[3],mp=np[4];for(let gp=0;gp<80;++gp){const vp=Math.floor(gp/20),xp=ROTL(dp,5)+f(vp,fp,pp,hp)+mp+rp[vp]+cp[gp]>>>0;mp=hp,hp=pp,pp=ROTL(fp,30)>>>0,fp=dp,dp=xp}np[0]=np[0]+dp>>>0,np[1]=np[1]+fp>>>0,np[2]=np[2]+pp>>>0,np[3]=np[3]+hp>>>0,np[4]=np[4]+mp>>>0}return[np[0]>>24&255,np[0]>>16&255,np[0]>>8&255,np[0]&255,np[1]>>24&255,np[1]>>16&255,np[1]>>8&255,np[1]&255,np[2]>>24&255,np[2]>>16&255,np[2]>>8&255,np[2]&255,np[3]>>24&255,np[3]>>16&255,np[3]>>8&255,np[3]&255,np[4]>>24&255,np[4]>>16&255,np[4]>>8&255,np[4]&255]}var _default$3=sha1;sha1$1.default=_default$3;Object.defineProperty(v5$1,"__esModule",{value:!0});v5$1.default=void 0;var _v=_interopRequireDefault$f(v35$1),_sha=_interopRequireDefault$f(sha1$1);function _interopRequireDefault$f(_d){return _d&&_d.__esModule?_d:{default:_d}}const v5=(0,_v.default)("v5",80,_sha.default);var _default$2=v5;v5$1.default=_default$2;var nil={};Object.defineProperty(nil,"__esModule",{value:!0});nil.default=void 0;var _default$1="00000000-0000-0000-0000-000000000000";nil.default=_default$1;var version$2={};Object.defineProperty(version$2,"__esModule",{value:!0});version$2.default=void 0;var _validate=_interopRequireDefault$e(validate$1);function _interopRequireDefault$e(_d){return _d&&_d.__esModule?_d:{default:_d}}function version$1(_d){if(!(0,_validate.default)(_d))throw TypeError("Invalid UUID");return parseInt(_d.slice(14,15),16)}var _default=version$1;version$2.default=_default;(function(_d){Object.defineProperty(_d,"__esModule",{value:!0}),Object.defineProperty(_d,"NIL",{enumerable:!0,get:function(){return lp.default}}),Object.defineProperty(_d,"parse",{enumerable:!0,get:function(){return fp.default}}),Object.defineProperty(_d,"stringify",{enumerable:!0,get:function(){return dp.default}}),Object.defineProperty(_d,"v1",{enumerable:!0,get:function(){return rp.default}}),Object.defineProperty(_d,"v3",{enumerable:!0,get:function(){return np.default}}),Object.defineProperty(_d,"v4",{enumerable:!0,get:function(){return ap.default}}),Object.defineProperty(_d,"v5",{enumerable:!0,get:function(){return sp.default}}),Object.defineProperty(_d,"validate",{enumerable:!0,get:function(){return cp.default}}),Object.defineProperty(_d,"version",{enumerable:!0,get:function(){return up.default}});var rp=pp(v1$1),np=pp(v3$1),ap=pp(v4$1),sp=pp(v5$1),lp=pp(nil),up=pp(version$2),cp=pp(validate$1),dp=pp(stringify$1),fp=pp(parse$1);function pp(hp){return hp&&hp.__esModule?hp:{default:hp}}})(commonjsBrowser);var __extends$9=commonjsGlobal&&commonjsGlobal.__extends||function(){var _d=function(rp,np){return _d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ap,sp){ap.__proto__=sp}||function(ap,sp){for(var lp in sp)Object.prototype.hasOwnProperty.call(sp,lp)&&(ap[lp]=sp[lp])},_d(rp,np)};return function(rp,np){if(typeof np!="function"&&np!==null)throw new TypeError("Class extends value "+String(np)+" is not a constructor or null");_d(rp,np);function ap(){this.constructor=rp}rp.prototype=np===null?Object.create(np):(ap.prototype=np.prototype,new ap)}}(),__assign=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign=Object.assign||function(_d){for(var rp,np=1,ap=arguments.length;np<ap;np++){rp=arguments[np];for(var sp in rp)Object.prototype.hasOwnProperty.call(rp,sp)&&(_d[sp]=rp[sp])}return _d},__assign.apply(this,arguments)},__awaiter$3=commonjsGlobal&&commonjsGlobal.__awaiter||function(_d,rp,np,ap){function sp(lp){return lp instanceof np?lp:new np(function(up){up(lp)})}return new(np||(np=Promise))(function(lp,up){function cp(pp){try{fp(ap.next(pp))}catch(hp){up(hp)}}function dp(pp){try{fp(ap.throw(pp))}catch(hp){up(hp)}}function fp(pp){pp.done?lp(pp.value):sp(pp.value).then(cp,dp)}fp((ap=ap.apply(_d,rp||[])).next())})},__generator$3=commonjsGlobal&&commonjsGlobal.__generator||function(_d,rp){var np={label:0,sent:function(){if(lp[0]&1)throw lp[1];return lp[1]},trys:[],ops:[]},ap,sp,lp,up;return up={next:cp(0),throw:cp(1),return:cp(2)},typeof Symbol=="function"&&(up[Symbol.iterator]=function(){return this}),up;function cp(fp){return function(pp){return dp([fp,pp])}}function dp(fp){if(ap)throw new TypeError("Generator is already executing.");for(;up&&(up=0,fp[0]&&(np=0)),np;)try{if(ap=1,sp&&(lp=fp[0]&2?sp.return:fp[0]?sp.throw||((lp=sp.return)&&lp.call(sp),0):sp.next)&&!(lp=lp.call(sp,fp[1])).done)return lp;switch(sp=0,lp&&(fp=[fp[0]&2,lp.value]),fp[0]){case 0:case 1:lp=fp;break;case 4:return np.label++,{value:fp[1],done:!1};case 5:np.label++,sp=fp[1],fp=[0];continue;case 7:fp=np.ops.pop(),np.trys.pop();continue;default:if(lp=np.trys,!(lp=lp.length>0&&lp[lp.length-1])&&(fp[0]===6||fp[0]===2)){np=0;continue}if(fp[0]===3&&(!lp||fp[1]>lp[0]&&fp[1]<lp[3])){np.label=fp[1];break}if(fp[0]===6&&np.label<lp[1]){np.label=lp[1],lp=fp;break}if(lp&&np.label<lp[2]){np.label=lp[2],np.ops.push(fp);break}lp[2]&&np.ops.pop(),np.trys.pop();continue}fp=rp.call(_d,np)}catch(pp){fp=[6,pp],sp=0}finally{ap=lp=0}if(fp[0]&5)throw fp[1];return{value:fp[0]?fp[1]:void 0,done:!0}}};Object.defineProperty(WebRtcPeer$1,"__esModule",{value:!0});WebRtcPeer$1.WebRtcPeerSendrecv=WebRtcPeer$1.WebRtcPeerSendonly=WebRtcPeer$1.WebRtcPeerRecvonly=WebRtcPeer$1.WebRtcPeer=void 0;var freeice=freeice_1,uuid_1$1=commonjsBrowser,ExceptionEvent_1$2=ExceptionEvent,OpenViduLogger_1$5=OpenViduLogger$1,Platform_1$3=Platform,logger$5=OpenViduLogger_1$5.OpenViduLogger.getInstance(),WebRtcPeer=function(){function _d(rp){var np=this;this.remoteCandidatesQueue=[],this.localCandidatesQueue=[],this.iceCandidateList=[],Platform_1$3.PlatformUtils.getInstance(),this.configuration=__assign(__assign({},rp),{iceServers:rp.iceServers&&rp.iceServers.length>0?rp.iceServers:freeice(),mediaStream:rp.mediaStream!==void 0?rp.mediaStream:null,mode:rp.mode?rp.mode:"sendrecv",id:rp.id?rp.id:this.generateUniqueId()}),logger$5.debug(`[WebRtcPeer] configuration:
`.concat(JSON.stringify(this.configuration,null,2))),this.pc=new RTCPeerConnection({iceServers:this.configuration.iceServers}),this.pc.addEventListener("icecandidate",function(ap){if(ap.candidate!==null){var sp=ap.candidate,lp=new RTCIceCandidate(sp);np.configuration.onIceCandidate(lp),lp.candidate!==""&&np.localCandidatesQueue.push(lp)}}),this.pc.addEventListener("signalingstatechange",function(){return __awaiter$3(np,void 0,void 0,function(){var ap,sp;return __generator$3(this,function(lp){switch(lp.label){case 0:if(this.pc.signalingState!=="stable")return[3,6];lp.label=1;case 1:if(!(this.iceCandidateList.length>0))return[3,6];ap=this.iceCandidateList.shift(),lp.label=2;case 2:return lp.trys.push([2,4,,5]),[4,this.pc.addIceCandidate(ap)];case 3:return lp.sent(),[3,5];case 4:return sp=lp.sent(),logger$5.error("Error when calling RTCPeerConnection#addIceCandidate for RTCPeerConnection "+this.getId(),sp),[3,5];case 5:return[3,1];case 6:return[2]}})})})}return _d.prototype.getId=function(){return this.configuration.id},_d.prototype.dispose=function(){if(logger$5.debug("Disposing WebRtcPeer"),this.pc){if(this.pc.signalingState==="closed")return;this.pc.close(),this.remoteCandidatesQueue=[],this.localCandidatesQueue=[]}},_d.prototype.createOfferLegacy=function(){this.configuration.mediaStream&&this.deprecatedPeerConnectionTrackApi();var rp=this.configuration.mediaConstraints.audio,np=this.configuration.mediaConstraints.video,ap={offerToReceiveAudio:this.configuration.mode!=="sendonly"&&rp,offerToReceiveVideo:this.configuration.mode!=="sendonly"&&np};return logger$5.debug("[createOfferLegacy] RTCPeerConnection.createOffer() options:",JSON.stringify(ap)),this.pc.createOffer(ap)},_d.prototype.createOffer=function(){var rp,np,ap,sp,lp,up,cp,dp;return __awaiter$3(this,void 0,void 0,function(){var fp,pp,hp,mp,gp,vp,xp,Sp,yp,bp,Ep,wp,_p,Rp,$p,Cp,Ap,Fp,Op,Lp,Mp,kp,Dp,Fp;return __generator$3(this,function(Ip){switch(Ip.label){case 0:if("addTransceiver"in this.pc)logger$5.debug("[createOffer] Method RTCPeerConnection.addTransceiver() is available; using it");else return logger$5.warn("[createOffer] Method RTCPeerConnection.addTransceiver() is NOT available; using LEGACY offerToReceive{Audio,Video}"),[2,this.createOfferLegacy()];if(this.configuration.mode==="recvonly")return[3,7];if(!this.configuration.mediaStream)throw new Error("[WebRtcPeer.createOffer] Direction is '".concat(this.configuration.mode,"', but no stream was configured to be sent"));fp=0,pp=this.configuration.mediaStream.getTracks(),Ip.label=1;case 1:if(!(fp<pp.length))return[3,6];if(hp=pp[fp],mp={direction:this.configuration.mode,streams:[this.configuration.mediaStream]},hp.kind==="video"&&this.configuration.simulcast)for(gp=hp.getSettings(),vp=hp.getConstraints(),xp=(ap=(np=(rp=gp.width)!==null&&rp!==void 0?rp:vp.width.ideal)!==null&&np!==void 0?np:vp.width)!==null&&ap!==void 0?ap:0,Sp=(up=(lp=(sp=gp.height)!==null&&sp!==void 0?sp:vp.height.ideal)!==null&&lp!==void 0?lp:vp.height)!==null&&up!==void 0?up:0,logger$5.info("[createOffer] Video track dimensions: ".concat(xp,"x").concat(Sp)),yp=xp*Sp,bp=0,yp>=960*540?bp=3:yp>=480*270?bp=2:bp=1,mp.sendEncodings=[],Ep=0;Ep<bp;Ep++)wp=Math.pow(2,bp-Ep-1),_p={rid:"rdiv"+wp.toString(),scalabilityMode:"L1T1"},["detail","text"].includes(hp.contentHint)?(_p.scaleResolutionDownBy=1,_p.maxFramerate=Math.floor(30/wp)):_p.scaleResolutionDownBy=wp,mp.sendEncodings.push(_p);if(Rp=this.pc.addTransceiver(hp,mp),hp.kind!=="video")return[3,5];if($p=Rp.sender.getParameters(),Cp=!1,!((cp=$p.degradationPreference)===null||cp===void 0)&&cp.length||(["detail","text"].includes(hp.contentHint)?$p.degradationPreference="maintain-resolution":$p.degradationPreference="balanced",logger$5.info("[createOffer] Video sender Degradation Preference set: ".concat($p.degradationPreference)),Cp=!0),this.configuration.simulcast&&((dp=$p.encodings)===null||dp===void 0?void 0:dp.length)!==mp.sendEncodings.length&&($p.encodings=mp.sendEncodings,Cp=!0),!Cp)return[3,5];logger$5.debug("[createOffer] Setting new RTCRtpSendParameters to video sender"),Ip.label=2;case 2:return Ip.trys.push([2,4,,5]),[4,Rp.sender.setParameters($p)];case 3:return Ip.sent(),[3,5];case 4:throw Ap=Ip.sent(),Fp="[WebRtcPeer.createOffer] Cannot set RTCRtpSendParameters to video sender",Ap instanceof Error&&(Fp+=": ".concat(Ap.message)),new Error(Fp);case 5:return fp++,[3,1];case 6:return[3,8];case 7:for(Op=0,Lp=["audio","video"];Op<Lp.length;Op++)Mp=Lp[Op],this.configuration.mediaConstraints[Mp]&&(this.configuration.mediaStream=new MediaStream,this.pc.addTransceiver(Mp,{direction:this.configuration.mode,streams:[this.configuration.mediaStream]}));Ip.label=8;case 8:return Ip.trys.push([8,10,,11]),[4,this.pc.createOffer()];case 9:return kp=Ip.sent(),[3,11];case 10:throw Dp=Ip.sent(),Fp="[WebRtcPeer.createOffer] Browser failed creating an SDP Offer",Dp instanceof Error&&(Fp+=": ".concat(Dp.message)),new Error(Fp);case 11:return[2,kp]}})})},_d.prototype.deprecatedPeerConnectionTrackApi=function(){for(var rp=0,np=this.configuration.mediaStream.getTracks();rp<np.length;rp++){var ap=np[rp];this.pc.addTrack(ap,this.configuration.mediaStream)}},_d.prototype.createAnswer=function(){var rp=this;return new Promise(function(np,ap){if("getTransceivers"in rp.pc){logger$5.debug("[createAnswer] Method RTCPeerConnection.getTransceivers() is available; using it");for(var sp=function(mp){if(!rp.configuration.mediaConstraints[mp])return"continue";var gp=rp.pc.getTransceivers().find(function(vp){return vp.receiver.track.kind===mp});if(gp)gp.direction=rp.configuration.mode;else return{value:ap(new Error("".concat(mp," requested, but no transceiver was created from remote description")))}},lp=0,up=["audio","video"];lp<up.length;lp++){var cp=up[lp],dp=sp(cp);if(typeof dp=="object")return dp.value}rp.pc.createAnswer().then(function(mp){return np(mp)}).catch(function(mp){return ap(mp)})}else{var fp=void 0,pp=!0;if(rp.configuration.mediaConstraints){fp=typeof rp.configuration.mediaConstraints.audio=="boolean"?rp.configuration.mediaConstraints.audio:!0,pp=typeof rp.configuration.mediaConstraints.video=="boolean"?rp.configuration.mediaConstraints.video:!0;var hp={offerToReceiveAudio:fp,offerToReceiveVideo:pp};rp.pc.createAnswer(hp).then(function(mp){return np(mp)}).catch(function(mp){return ap(mp)})}}})},_d.prototype.processLocalOffer=function(rp){var np=this;return new Promise(function(ap,sp){np.pc.setLocalDescription(rp).then(function(){var lp=np.pc.localDescription;return lp?(logger$5.debug("Local description set",lp.sdp),ap()):sp("Local description is not defined")}).catch(function(lp){return sp(lp)})})},_d.prototype.processRemoteOffer=function(rp){var np=this;return new Promise(function(ap,sp){var lp={type:"offer",sdp:rp};if(logger$5.debug("SDP offer received, setting remote description",lp),np.pc.signalingState==="closed")return sp("RTCPeerConnection is closed when trying to set remote description");np.setRemoteDescription(lp).then(function(){return ap()}).catch(function(up){return sp(up)})})},_d.prototype.processLocalAnswer=function(rp){var np=this;return new Promise(function(ap,sp){if(logger$5.debug("SDP answer created, setting local description"),np.pc.signalingState==="closed")return sp("RTCPeerConnection is closed when trying to set local description");np.pc.setLocalDescription(rp).then(function(){return ap()}).catch(function(lp){return sp(lp)})})},_d.prototype.processRemoteAnswer=function(rp){var np=this;return new Promise(function(ap,sp){var lp={type:"answer",sdp:rp};if(logger$5.debug("SDP answer received, setting remote description"),np.pc.signalingState==="closed")return sp("RTCPeerConnection is closed when trying to set remote description");np.setRemoteDescription(lp).then(function(){ap()}).catch(function(up){return sp(up)})})},_d.prototype.setRemoteDescription=function(rp){return __awaiter$3(this,void 0,void 0,function(){return __generator$3(this,function(np){return[2,this.pc.setRemoteDescription(rp)]})})},_d.prototype.addIceCandidate=function(rp){var np=this;return new Promise(function(ap,sp){switch(logger$5.debug("Remote ICE candidate received",rp),np.remoteCandidatesQueue.push(rp),np.pc.signalingState){case"closed":sp(new Error("PeerConnection object is closed"));break;case"stable":np.pc.remoteDescription?np.pc.addIceCandidate(rp).then(function(){return ap()}).catch(function(lp){return sp(lp)}):(np.iceCandidateList.push(rp),ap());break;default:np.iceCandidateList.push(rp),ap()}})},_d.prototype.addIceConnectionStateChangeListener=function(rp){var np=this;this.pc.addEventListener("iceconnectionstatechange",function(){var ap=np.pc.iceConnectionState;switch(ap){case"disconnected":var sp="IceConnectionState of RTCPeerConnection "+np.configuration.id+" ("+rp+') change to "disconnected". Possible network disconnection';logger$5.warn(sp),np.configuration.onIceConnectionStateException(ExceptionEvent_1$2.ExceptionEventName.ICE_CONNECTION_DISCONNECTED,sp);break;case"failed":var lp="IceConnectionState of RTCPeerConnection "+np.configuration.id+" ("+rp+') to "failed"';logger$5.error(lp),np.configuration.onIceConnectionStateException(ExceptionEvent_1$2.ExceptionEventName.ICE_CONNECTION_FAILED,lp);break;case"closed":logger$5.log("IceConnectionState of RTCPeerConnection "+np.configuration.id+" ("+rp+') change to "closed"');break;case"new":logger$5.log("IceConnectionState of RTCPeerConnection "+np.configuration.id+" ("+rp+') change to "new"');break;case"checking":logger$5.log("IceConnectionState of RTCPeerConnection "+np.configuration.id+" ("+rp+') change to "checking"');break;case"connected":logger$5.log("IceConnectionState of RTCPeerConnection "+np.configuration.id+" ("+rp+') change to "connected"');break;case"completed":logger$5.log("IceConnectionState of RTCPeerConnection "+np.configuration.id+" ("+rp+') change to "completed"');break}})},_d.prototype.generateUniqueId=function(){return(0,uuid_1$1.v4)()},_d}();WebRtcPeer$1.WebRtcPeer=WebRtcPeer;var WebRtcPeerRecvonly=function(_d){__extends$9(rp,_d);function rp(np){return np.mode="recvonly",_d.call(this,np)||this}return rp}(WebRtcPeer);WebRtcPeer$1.WebRtcPeerRecvonly=WebRtcPeerRecvonly;var WebRtcPeerSendonly=function(_d){__extends$9(rp,_d);function rp(np){return np.mode="sendonly",_d.call(this,np)||this}return rp}(WebRtcPeer);WebRtcPeer$1.WebRtcPeerSendonly=WebRtcPeerSendonly;var WebRtcPeerSendrecv=function(_d){__extends$9(rp,_d);function rp(np){return np.mode="sendrecv",_d.call(this,np)||this}return rp}(WebRtcPeer);WebRtcPeer$1.WebRtcPeerSendrecv=WebRtcPeerSendrecv;var WebRtcStats$1={},__awaiter$2=commonjsGlobal&&commonjsGlobal.__awaiter||function(_d,rp,np,ap){function sp(lp){return lp instanceof np?lp:new np(function(up){up(lp)})}return new(np||(np=Promise))(function(lp,up){function cp(pp){try{fp(ap.next(pp))}catch(hp){up(hp)}}function dp(pp){try{fp(ap.throw(pp))}catch(hp){up(hp)}}function fp(pp){pp.done?lp(pp.value):sp(pp.value).then(cp,dp)}fp((ap=ap.apply(_d,rp||[])).next())})},__generator$2=commonjsGlobal&&commonjsGlobal.__generator||function(_d,rp){var np={label:0,sent:function(){if(lp[0]&1)throw lp[1];return lp[1]},trys:[],ops:[]},ap,sp,lp,up;return up={next:cp(0),throw:cp(1),return:cp(2)},typeof Symbol=="function"&&(up[Symbol.iterator]=function(){return this}),up;function cp(fp){return function(pp){return dp([fp,pp])}}function dp(fp){if(ap)throw new TypeError("Generator is already executing.");for(;up&&(up=0,fp[0]&&(np=0)),np;)try{if(ap=1,sp&&(lp=fp[0]&2?sp.return:fp[0]?sp.throw||((lp=sp.return)&&lp.call(sp),0):sp.next)&&!(lp=lp.call(sp,fp[1])).done)return lp;switch(sp=0,lp&&(fp=[fp[0]&2,lp.value]),fp[0]){case 0:case 1:lp=fp;break;case 4:return np.label++,{value:fp[1],done:!1};case 5:np.label++,sp=fp[1],fp=[0];continue;case 7:fp=np.ops.pop(),np.trys.pop();continue;default:if(lp=np.trys,!(lp=lp.length>0&&lp[lp.length-1])&&(fp[0]===6||fp[0]===2)){np=0;continue}if(fp[0]===3&&(!lp||fp[1]>lp[0]&&fp[1]<lp[3])){np.label=fp[1];break}if(fp[0]===6&&np.label<lp[1]){np.label=lp[1],lp=fp;break}if(lp&&np.label<lp[2]){np.label=lp[2],np.ops.push(fp);break}lp[2]&&np.ops.pop(),np.trys.pop();continue}fp=rp.call(_d,np)}catch(pp){fp=[6,pp],sp=0}finally{ap=lp=0}if(fp[0]&5)throw fp[1];return{value:fp[0]?fp[1]:void 0,done:!0}}};Object.defineProperty(WebRtcStats$1,"__esModule",{value:!0});WebRtcStats$1.WebRtcStats=void 0;var OpenViduLogger_1$4=OpenViduLogger$1,Platform_1$2=Platform,logger$4=OpenViduLogger_1$4.OpenViduLogger.getInstance(),platform$2,WebRtcStats=function(){function _d(rp){this.stream=rp,this.STATS_ITEM_NAME="webrtc-stats-config",this.webRtcStatsEnabled=!1,this.statsInterval=1,platform$2=Platform_1$2.PlatformUtils.getInstance()}return _d.prototype.isEnabled=function(){return this.webRtcStatsEnabled},_d.prototype.initWebRtcStats=function(){var rp=this,np;try{np=localStorage.getItem(this.STATS_ITEM_NAME)}catch{}if(np){this.webRtcStatsEnabled=!0;var ap=JSON.parse(np);logger$4.warn("WebRtc stats enabled for stream "+this.stream.streamId+" of connection "+this.stream.connection.connectionId),logger$4.warn("localStorage item: "+JSON.stringify(ap)),this.POST_URL=ap.httpEndpoint,this.statsInterval=ap.interval,this.webRtcStatsIntervalId=setInterval(function(){return __awaiter$2(rp,void 0,void 0,function(){return __generator$2(this,function(sp){switch(sp.label){case 0:return[4,this.sendStatsToHttpEndpoint()];case 1:return sp.sent(),[2]}})})},this.statsInterval*1e3)}else logger$4.debug("WebRtc stats not enabled")},_d.prototype.getSelectedIceCandidateInfo=function(){var rp=this;return new Promise(function(np,ap){return __awaiter$2(rp,void 0,void 0,function(){var sp,lp,up,cp,dp,fp,pp,hp,mp,gp,vp,xp,Sp,yp,_p,Rp,bp,Ep,Ap,wp,_p,Rp,$p,Cp,Ap;return __generator$2(this,function(Op){switch(Op.label){case 0:return[4,this.stream.getRTCPeerConnection().getStats()];case 1:if(sp=Op.sent(),up=new Map,cp=new Map,dp=new Map,sp.forEach(function(Lp){switch(Lp.type==="transport"&&(platform$2.isChromium()||platform$2.isSafariBrowser()||platform$2.isReactNative())&&(lp=Lp),Lp.type){case"candidate-pair":up.set(Lp.id,Lp);break;case"local-candidate":cp.set(Lp.id,Lp);break;case"remote-candidate":dp.set(Lp.id,Lp);break}}),lp!=null)pp=lp.selectedCandidatePairId,fp=up.get(pp);else for(hp=up.size,mp=up.values(),gp=0;gp<hp;gp++)if(vp=mp.next().value,vp.selected){fp=vp;break}if(xp=fp.localCandidateId,Sp=fp.remoteCandidateId,yp=cp.get(xp),yp)for(_p=this.stream.getLocalIceCandidateList(),Rp=_p.filter(function(Lp){return!!Lp.candidate&&(Lp.candidate.indexOf(yp.ip)>=0||Lp.candidate.indexOf(yp.address)>=0)&&Lp.candidate.indexOf(yp.port)>=0}),yp.raw=[],bp=0,Ep=Rp;bp<Ep.length;bp++)Ap=Ep[bp],yp.raw.push(Ap.candidate);else yp="ERROR: No active local ICE candidate. Probably ICE-TCP is being used";if(wp=dp.get(Sp),wp)for(_p=this.stream.getRemoteIceCandidateList(),Rp=_p.filter(function(Lp){return!!Lp.candidate&&(Lp.candidate.indexOf(wp.ip)>=0||Lp.candidate.indexOf(wp.address)>=0)&&Lp.candidate.indexOf(wp.port)>=0}),wp.raw=[],$p=0,Cp=Rp;$p<Cp.length;$p++)Ap=Cp[$p],wp.raw.push(Ap.candidate);else wp="ERROR: No active remote ICE candidate. Probably ICE-TCP is being used";return[2,np({localCandidate:yp,remoteCandidate:wp})]}})})})},_d.prototype.stopWebRtcStats=function(){this.webRtcStatsEnabled&&(clearInterval(this.webRtcStatsIntervalId),logger$4.warn("WebRtc stats stopped for disposed stream "+this.stream.streamId+" of connection "+this.stream.connection.connectionId))},_d.prototype.sendStats=function(rp,np){return __awaiter$2(this,void 0,void 0,function(){var ap,sp;return __generator$2(this,function(lp){switch(lp.label){case 0:return lp.trys.push([0,2,,3]),ap={headers:{"Content-type":"application/json"},body:JSON.stringify(np),method:"POST"},[4,fetch(rp,ap)];case 1:return lp.sent(),[3,3];case 2:return sp=lp.sent(),logger$4.error("sendStats error: ".concat(JSON.stringify(sp))),[3,3];case 3:return[2]}})})},_d.prototype.sendStatsToHttpEndpoint=function(){return __awaiter$2(this,void 0,void 0,function(){var rp,np,ap;return __generator$2(this,function(sp){switch(sp.label){case 0:return sp.trys.push([0,3,,4]),[4,this.getCommonStats()];case 1:return rp=sp.sent(),np=this.generateJSONStatsResponse(rp),[4,this.sendStats(this.POST_URL,np)];case 2:return sp.sent(),[3,4];case 3:return ap=sp.sent(),logger$4.log(ap),[3,4];case 4:return[2]}})})},_d.prototype.getCommonStats=function(){return __awaiter$2(this,void 0,void 0,function(){var rp=this;return __generator$2(this,function(np){return[2,new Promise(function(ap,sp){return __awaiter$2(rp,void 0,void 0,function(){var lp,up,cp,dp,fp,pp=this;return __generator$2(this,function(hp){switch(hp.label){case 0:return hp.trys.push([0,2,,3]),[4,this.stream.getRTCPeerConnection().getStats()];case 1:return lp=hp.sent(),up=this.getWebRtcStatsResponseOutline(),cp=["framesReceived","framesDropped","framesSent","frameHeight","frameWidth"],dp=["availableOutgoingBitrate","currentRoundTripTime"],lp.forEach(function(mp){var gp=mp.mediaType!=null?mp.mediaType:mp.kind,vp=function(xp,Sp){mp[Sp]!=null&&up[xp]!=null&&(!gp&&cp.indexOf(Sp)>-1&&(gp="video"),xp!=null&&gp!=null&&Sp!=null&&up[xp][gp]!=null?up[xp][gp][Sp]=Number(mp[Sp]):xp!=null&&Sp!=null&&dp.includes(Sp)&&(up[xp][Sp]=Number(mp[Sp])))};switch(mp.type){case"outbound-rtp":vp("outbound","bytesSent"),vp("outbound","packetsSent"),vp("outbound","framesEncoded"),vp("outbound","nackCount"),vp("outbound","firCount"),vp("outbound","pliCount"),vp("outbound","qpSum");break;case"inbound-rtp":vp("inbound","bytesReceived"),vp("inbound","packetsReceived"),vp("inbound","packetsLost"),vp("inbound","jitter"),vp("inbound","framesDecoded"),vp("inbound","nackCount"),vp("inbound","firCount"),vp("inbound","pliCount");break;case"track":vp("inbound","jitterBufferDelay"),vp("inbound","framesReceived"),vp("outbound","framesDropped"),vp("outbound","framesSent"),vp(pp.stream.isLocal()?"outbound":"inbound","frameHeight"),vp(pp.stream.isLocal()?"outbound":"inbound","frameWidth");break;case"candidate-pair":vp("candidatepair","currentRoundTripTime"),vp("candidatepair","availableOutgoingBitrate");break}}),(!(up!=null&&up.candidatepair)||Object.keys(up.candidatepair).length===0)&&delete up.candidatepair,[2,ap(up)];case 2:return fp=hp.sent(),logger$4.error("Error getting common stats: ",fp),[2,sp(fp)];case 3:return[2]}})})})]})})},_d.prototype.generateJSONStatsResponse=function(rp){return{"@timestamp":new Date().toISOString(),participant_id:this.stream.connection.data,session_id:this.stream.session.sessionId,platform:platform$2.getName(),platform_description:platform$2.getDescription(),stream:"webRTC",webrtc_stats:rp}},_d.prototype.getWebRtcStatsResponseOutline=function(){return this.stream.isLocal()?{outbound:{audio:{},video:{}},candidatepair:{}}:{inbound:{audio:{},video:{}}}},_d}();WebRtcStats$1.WebRtcStats=WebRtcStats;var PublisherSpeakingEvent$1={},__extends$8=commonjsGlobal&&commonjsGlobal.__extends||function(){var _d=function(rp,np){return _d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ap,sp){ap.__proto__=sp}||function(ap,sp){for(var lp in sp)Object.prototype.hasOwnProperty.call(sp,lp)&&(ap[lp]=sp[lp])},_d(rp,np)};return function(rp,np){if(typeof np!="function"&&np!==null)throw new TypeError("Class extends value "+String(np)+" is not a constructor or null");_d(rp,np);function ap(){this.constructor=rp}rp.prototype=np===null?Object.create(np):(ap.prototype=np.prototype,new ap)}}();Object.defineProperty(PublisherSpeakingEvent$1,"__esModule",{value:!0});PublisherSpeakingEvent$1.PublisherSpeakingEvent=void 0;var Event_1$8=Event$2,PublisherSpeakingEvent=function(_d){__extends$8(rp,_d);function rp(np,ap,sp,lp){var up=_d.call(this,!1,np,ap)||this;return up.type=ap,up.connection=sp,up.streamId=lp,up}return rp.prototype.callDefaultBehavior=function(){},rp}(Event_1$8.Event);PublisherSpeakingEvent$1.PublisherSpeakingEvent=PublisherSpeakingEvent;var TypeOfVideo={};(function(_d){Object.defineProperty(_d,"__esModule",{value:!0}),_d.TypeOfVideo=void 0,function(rp){rp.CAMERA="CAMERA",rp.SCREEN="SCREEN",rp.CUSTOM="CUSTOM",rp.IPCAM="IPCAM"}(_d.TypeOfVideo||(_d.TypeOfVideo={}))})(TypeOfVideo);var wildemitter=WildEmitter$1;function WildEmitter$1(){}WildEmitter$1.mixin=function(_d){var rp=_d.prototype||_d;rp.isWildEmitter=!0,rp.on=function(np,ap,sp){this.callbacks=this.callbacks||{};var lp=arguments.length===3,up=lp?arguments[1]:void 0,cp=lp?arguments[2]:arguments[1];return cp._groupName=up,(this.callbacks[np]=this.callbacks[np]||[]).push(cp),this},rp.once=function(np,ap,sp){var lp=this,up=arguments.length===3,cp=up?arguments[1]:void 0,dp=up?arguments[2]:arguments[1];function fp(){lp.off(np,fp),dp.apply(this,arguments)}return this.on(np,cp,fp),this},rp.releaseGroup=function(np){this.callbacks=this.callbacks||{};var ap,sp,lp,up;for(ap in this.callbacks)for(up=this.callbacks[ap],sp=0,lp=up.length;sp<lp;sp++)up[sp]._groupName===np&&(up.splice(sp,1),sp--,lp--);return this},rp.off=function(np,ap){this.callbacks=this.callbacks||{};var sp=this.callbacks[np],lp;return sp?arguments.length===1?(delete this.callbacks[np],this):(lp=sp.indexOf(ap),lp!==-1&&(sp.splice(lp,1),sp.length===0&&delete this.callbacks[np]),this):this},rp.emit=function(np){this.callbacks=this.callbacks||{};var ap=[].slice.call(arguments,1),sp=this.callbacks[np],lp=this.getWildcardCallbacks(np),up,cp,dp;if(sp)for(dp=sp.slice(),up=0,cp=dp.length;up<cp&&dp[up];++up)dp[up].apply(this,ap);if(lp)for(cp=lp.length,dp=lp.slice(),up=0,cp=dp.length;up<cp&&dp[up];++up)dp[up].apply(this,[np].concat(ap));return this},rp.getWildcardCallbacks=function(np){this.callbacks=this.callbacks||{};var ap,sp,lp=[];for(ap in this.callbacks)sp=ap.split("*"),(ap==="*"||sp.length===2&&np.slice(0,sp[0].length)===sp[0])&&(lp=lp.concat(this.callbacks[ap]));return lp}};WildEmitter$1.mixin(WildEmitter$1);var WildEmitter=wildemitter;function getMaxVolume(_d,rp){var np=-1/0;_d.getFloatFrequencyData(rp);for(var ap=4,sp=rp.length;ap<sp;ap++)rp[ap]>np&&rp[ap]<0&&(np=rp[ap]);return np}var audioContextType;typeof window<"u"&&(audioContextType=window.AudioContext||window.webkitAudioContext);var audioContext=null,hark$1=function(_d,ap){var np=new WildEmitter;if(!audioContextType)return np;var ap=ap||{},sp=ap.smoothing||.1,lp=ap.interval||50,up=ap.threshold,cp=ap.play,dp=ap.history||10,fp=!0;audioContext=ap.audioContext||audioContext||new audioContextType;var pp,hp,mp;mp=audioContext.createAnalyser(),mp.fftSize=512,mp.smoothingTimeConstant=sp,hp=new Float32Array(mp.frequencyBinCount),_d.jquery&&(_d=_d[0]),_d instanceof HTMLAudioElement||_d instanceof HTMLVideoElement?(pp=audioContext.createMediaElementSource(_d),typeof cp>"u"&&(cp=!0),up=up||-50):(pp=audioContext.createMediaStreamSource(_d),up=up||-50),pp.connect(mp),cp&&mp.connect(audioContext.destination),np.speaking=!1,np.suspend=function(){return audioContext.suspend()},np.resume=function(){return audioContext.resume()},Object.defineProperty(np,"state",{get:function(){return audioContext.state}}),audioContext.onstatechange=function(){np.emit("state_change",audioContext.state)},np.setThreshold=function(xp){up=xp},np.setInterval=function(xp){lp=xp},np.stop=function(){fp=!1,np.emit("volume_change",-100,up),np.speaking&&(np.speaking=!1,np.emit("stopped_speaking")),mp.disconnect(),pp.disconnect()},np.speakingHistory=[];for(var gp=0;gp<dp;gp++)np.speakingHistory.push(0);var vp=function(){setTimeout(function(){if(fp){var xp=getMaxVolume(mp,hp);np.emit("volume_change",xp,up);var Sp=0;if(xp>up&&!np.speaking){for(var yp=np.speakingHistory.length-3;yp<np.speakingHistory.length;yp++)Sp+=np.speakingHistory[yp];Sp>=2&&(np.speaking=!0,np.emit("speaking"))}else if(xp<up&&np.speaking){for(var yp=0;yp<np.speakingHistory.length;yp++)Sp+=np.speakingHistory[yp];Sp==0&&(np.speaking=!1,np.emit("stopped_speaking"))}np.speakingHistory.shift(),np.speakingHistory.push(0+(xp>up)),vp()}},lp)};return vp(),np},__awaiter$1=commonjsGlobal&&commonjsGlobal.__awaiter||function(_d,rp,np,ap){function sp(lp){return lp instanceof np?lp:new np(function(up){up(lp)})}return new(np||(np=Promise))(function(lp,up){function cp(pp){try{fp(ap.next(pp))}catch(hp){up(hp)}}function dp(pp){try{fp(ap.throw(pp))}catch(hp){up(hp)}}function fp(pp){pp.done?lp(pp.value):sp(pp.value).then(cp,dp)}fp((ap=ap.apply(_d,rp||[])).next())})},__generator$1=commonjsGlobal&&commonjsGlobal.__generator||function(_d,rp){var np={label:0,sent:function(){if(lp[0]&1)throw lp[1];return lp[1]},trys:[],ops:[]},ap,sp,lp,up;return up={next:cp(0),throw:cp(1),return:cp(2)},typeof Symbol=="function"&&(up[Symbol.iterator]=function(){return this}),up;function cp(fp){return function(pp){return dp([fp,pp])}}function dp(fp){if(ap)throw new TypeError("Generator is already executing.");for(;up&&(up=0,fp[0]&&(np=0)),np;)try{if(ap=1,sp&&(lp=fp[0]&2?sp.return:fp[0]?sp.throw||((lp=sp.return)&&lp.call(sp),0):sp.next)&&!(lp=lp.call(sp,fp[1])).done)return lp;switch(sp=0,lp&&(fp=[fp[0]&2,lp.value]),fp[0]){case 0:case 1:lp=fp;break;case 4:return np.label++,{value:fp[1],done:!1};case 5:np.label++,sp=fp[1],fp=[0];continue;case 7:fp=np.ops.pop(),np.trys.pop();continue;default:if(lp=np.trys,!(lp=lp.length>0&&lp[lp.length-1])&&(fp[0]===6||fp[0]===2)){np=0;continue}if(fp[0]===3&&(!lp||fp[1]>lp[0]&&fp[1]<lp[3])){np.label=fp[1];break}if(fp[0]===6&&np.label<lp[1]){np.label=lp[1],lp=fp;break}if(lp&&np.label<lp[2]){np.label=lp[2],np.ops.push(fp);break}lp[2]&&np.ops.pop(),np.trys.pop();continue}fp=rp.call(_d,np)}catch(pp){fp=[6,pp],sp=0}finally{ap=lp=0}if(fp[0]&5)throw fp[1];return{value:fp[0]?fp[1]:void 0,done:!0}}};Object.defineProperty(Stream$1,"__esModule",{value:!0});Stream$1.Stream=void 0;var Filter_1=Filter$1,Subscriber_1=Subscriber$1,WebRtcPeer_1=WebRtcPeer$1,WebRtcStats_1=WebRtcStats$1,ExceptionEvent_1$1=ExceptionEvent,PublisherSpeakingEvent_1=PublisherSpeakingEvent$1,StreamManagerEvent_1=StreamManagerEvent$1,StreamPropertyChangedEvent_1$1=StreamPropertyChangedEvent$1,OpenViduError_1$1=OpenViduError,TypeOfVideo_1=TypeOfVideo,OpenViduLogger_1$3=OpenViduLogger$1,Platform_1$1=Platform,uuid_1=commonjsBrowser,hark=hark$1,EventEmitter$2=EventEmitterExports,logger$3=OpenViduLogger_1$3.OpenViduLogger.getInstance(),platform$1,Stream=function(){function _d(rp,np){var ap=this;this.isSubscribeToRemote=!1,this.isLocalStreamReadyToPublish=!1,this.isLocalStreamPublished=!1,this.publishedOnce=!1,this.harkSpeakingEnabled=!1,this.harkSpeakingEnabledOnce=!1,this.harkStoppedSpeakingEnabled=!1,this.harkStoppedSpeakingEnabledOnce=!1,this.harkVolumeChangeEnabled=!1,this.harkVolumeChangeEnabledOnce=!1,this.ee=new EventEmitter$2,platform$1=Platform_1$1.PlatformUtils.getInstance(),this.session=rp,np.hasOwnProperty("id")?(this.inboundStreamOpts=np,this.streamId=this.inboundStreamOpts.id,this.creationTime=this.inboundStreamOpts.createdAt,this.hasAudio=this.inboundStreamOpts.hasAudio,this.hasVideo=this.inboundStreamOpts.hasVideo,this.hasAudio&&(this.audioActive=this.inboundStreamOpts.audioActive),this.hasVideo&&(this.videoActive=this.inboundStreamOpts.videoActive,this.typeOfVideo=this.inboundStreamOpts.typeOfVideo?this.inboundStreamOpts.typeOfVideo:void 0,this.frameRate=this.inboundStreamOpts.frameRate===-1?void 0:this.inboundStreamOpts.frameRate,this.videoDimensions=this.inboundStreamOpts.videoDimensions),this.inboundStreamOpts.filter&&Object.keys(this.inboundStreamOpts.filter).length>0&&(this.inboundStreamOpts.filter.lastExecMethod&&Object.keys(this.inboundStreamOpts.filter.lastExecMethod).length===0&&delete this.inboundStreamOpts.filter.lastExecMethod,this.filter=this.inboundStreamOpts.filter)):(this.outboundStreamOpts=np,this.hasAudio=this.isSendAudio(),this.hasVideo=this.isSendVideo(),this.hasAudio&&(this.audioActive=!!this.outboundStreamOpts.publisherProperties.publishAudio),this.hasVideo&&(this.videoActive=!!this.outboundStreamOpts.publisherProperties.publishVideo,this.frameRate=this.outboundStreamOpts.publisherProperties.frameRate,typeof MediaStreamTrack<"u"&&this.outboundStreamOpts.publisherProperties.videoSource instanceof MediaStreamTrack?this.typeOfVideo=TypeOfVideo_1.TypeOfVideo.CUSTOM:this.typeOfVideo=this.isSendScreen()?TypeOfVideo_1.TypeOfVideo.SCREEN:TypeOfVideo_1.TypeOfVideo.CAMERA),this.outboundStreamOpts.publisherProperties.filter&&(this.filter=this.outboundStreamOpts.publisherProperties.filter)),this.ee.on("mediastream-updated",function(){var sp;ap.streamManager.updateMediaStream(ap.mediaStream),logger$3.debug("Video srcObject ["+((sp=ap.mediaStream)===null||sp===void 0?void 0:sp.id)+"] updated in stream ["+ap.streamId+"]")})}return _d.prototype.reconnect=function(){return this.reconnectStream("API")},_d.prototype.applyFilter=function(rp,np){var ap=this;return new Promise(function(sp,lp){return __awaiter$1(ap,void 0,void 0,function(){var up,cp,dp,fp,pp,hp,mp=this;return __generator$1(this,function(gp){if(this.filter)return[2,lp(new OpenViduError_1$1.OpenViduError(OpenViduError_1$1.OpenViduErrorName.GENERIC_ERROR,"There is already a filter applied to Stream "+this.streamId))];if(up=function(vp,xp){if(vp)return logger$3.error("Error applying filter for Stream "+mp.streamId,vp),vp.code===401?lp(new OpenViduError_1$1.OpenViduError(OpenViduError_1$1.OpenViduErrorName.OPENVIDU_PERMISSION_DENIED,"You don't have permissions to apply a filter")):lp(vp);logger$3.info("Filter successfully applied on Stream "+mp.streamId);var Sp=mp.filter;return mp.filter=new Filter_1.Filter(rp,np),mp.filter.stream=mp,xp&&(mp.session.emitEvent("streamPropertyChanged",[new StreamPropertyChangedEvent_1$1.StreamPropertyChangedEvent(mp.session,mp,"filter",mp.filter,Sp,"applyFilter")]),mp.streamManager.emitEvent("streamPropertyChanged",[new StreamPropertyChangedEvent_1$1.StreamPropertyChangedEvent(mp.streamManager,mp,"filter",mp.filter,Sp,"applyFilter")])),sp(mp.filter)},rp.startsWith("VB:")){if(!this.hasVideo)return[2,lp(new OpenViduError_1$1.OpenViduError(OpenViduError_1$1.OpenViduErrorName.VIRTUAL_BACKGROUND_ERROR,"The Virtual Background filter requires a video track to be applied"))];if(!this.mediaStream||this.streamManager.videos.length===0)return[2,lp(new OpenViduError_1$1.OpenViduError(OpenViduError_1$1.OpenViduErrorName.VIRTUAL_BACKGROUND_ERROR,"The StreamManager requires some video element to be attached to it in order to apply a Virtual Background filter"))];if(this.session.token?cp=this.session.token:cp=np.token,!cp)return[2,lp(new OpenViduError_1$1.OpenViduError(OpenViduError_1$1.OpenViduErrorName.VIRTUAL_BACKGROUND_ERROR,'Virtual Background requires the client to be connected to a Session or to have a "token" property available in "options" parameter with a valid OpenVidu token'))];if(dp=this.session.getTokenParams(cp),dp.edition!=="pro"&&dp.edition!=="enterprise")return[2,lp(new OpenViduError_1$1.OpenViduError(OpenViduError_1$1.OpenViduErrorName.VIRTUAL_BACKGROUND_ERROR,"OpenVidu Virtual Background API is available from OpenVidu Pro edition onwards"))];cp=encodeURIComponent(btoa(cp)),logger$3.info("Applying Virtual Background to stream "+this.streamId),fp=function(){return __awaiter$1(mp,void 0,void 0,function(){var vp,xp,Sp,yp,bp,Ep,wp;return __generator$1(this,function(_p){switch(_p.label){case 0:return _p.trys.push([0,8,,9]),vp=this.streamId+"_"+(0,uuid_1.v4)(),xp=this.mediaStream.clone(),Sp=this.streamManager.videos[0].video.cloneNode(!1),Sp.id=VirtualBackground.VirtualBackground.SOURCE_VIDEO_PREFIX+vp,Sp.srcObject=xp,Sp.muted=!0,this.virtualBackgroundSourceElements={videoClone:Sp,mediaStreamClone:xp},VirtualBackground.VirtualBackground.hideHtmlElement(Sp,!1),VirtualBackground.VirtualBackground.appendHtmlElementToHiddenContainer(Sp,vp),[4,Sp.play()];case 1:switch(_p.sent(),yp=new VirtualBackground.VirtualBackground({id:vp,openviduServerUrl:new URL(dp.httpUri),openviduToken:cp,inputVideo:Sp,inputResolution:"160x96",outputFramerate:24}),bp=void 0,Ep=rp,Ep){case"VB:blur":return[3,2];case"VB:image":return[3,4]}return[3,6];case 2:return[4,yp.backgroundBlur(np)];case 3:return bp=_p.sent(),[3,7];case 4:return[4,yp.backgroundImage(np)];case 5:return bp=_p.sent(),[3,7];case 6:throw new Error("Unknown Virtual Background filter: "+rp);case 7:return this.virtualBackgroundSinkElements={VB:yp,video:bp},Sp.style.display="none",this.streamManager.remote?this.streamManager.replaceTrackInMediaStream(this.virtualBackgroundSinkElements.video.srcObject.getVideoTracks()[0],!1):this.streamManager.replaceTrackAux(this.virtualBackgroundSinkElements.video.srcObject.getVideoTracks()[0],!1),up(void 0,!1),[3,9];case 8:return wp=_p.sent(),wp.name===OpenViduError_1$1.OpenViduErrorName.VIRTUAL_BACKGROUND_ERROR?up(new OpenViduError_1$1.OpenViduError(OpenViduError_1$1.OpenViduErrorName.VIRTUAL_BACKGROUND_ERROR,wp.message),!1):up(wp,!1),[3,9];case 9:return[2]}})})},typeof VirtualBackground>"u"?(pp=document.createElement("script"),pp.type="text/javascript",pp.src=dp.httpUri+"/openvidu/virtual-background/openvidu-virtual-background.js?token="+cp,pp.onload=function(){return __awaiter$1(mp,void 0,void 0,function(){var vp;return __generator$1(this,function(xp){switch(xp.label){case 0:return xp.trys.push([0,2,,3]),[4,fp()];case 1:return xp.sent(),sp(new Filter_1.Filter(rp,np)),[3,3];case 2:return vp=xp.sent(),lp(vp),[3,3];case 3:return[2]}})})},document.body.appendChild(pp)):fp().then(function(){return sp(new Filter_1.Filter(rp,np))}).catch(function(vp){return lp(vp)})}else{if(!this.session.sessionConnected())return[2,lp(this.session.notConnectedError())];logger$3.info("Applying server filter to stream "+this.streamId),np=np??{},hp=np,typeof hp!="string"&&(hp=JSON.stringify(hp)),this.session.openvidu.sendRequest("applyFilter",{streamId:this.streamId,type:rp,options:hp},function(vp,xp){up(vp,!0)})}return[2]})})})},_d.prototype.removeFilter=function(){return __awaiter$1(this,void 0,void 0,function(){return __generator$1(this,function(rp){switch(rp.label){case 0:return[4,this.removeFilterAux(!1)];case 1:return[2,rp.sent()]}})})},_d.prototype.getRTCPeerConnection=function(){return this.webRtcPeer.pc},_d.prototype.getMediaStream=function(){return this.mediaStream},_d.prototype.removeFilterAux=function(rp){var np=this;return new Promise(function(ap,sp){return __awaiter$1(np,void 0,void 0,function(){var lp,up,cp,dp=this,fp;return __generator$1(this,function(pp){switch(pp.label){case 0:if(lp=function(hp,mp){if(hp)return delete dp.filter,logger$3.error("Error removing filter for Stream "+dp.streamId,hp),hp.code===401?sp(new OpenViduError_1$1.OpenViduError(OpenViduError_1$1.OpenViduErrorName.OPENVIDU_PERMISSION_DENIED,"You don't have permissions to remove a filter")):sp(hp);logger$3.info("Filter successfully removed from Stream "+dp.streamId);var gp=dp.filter;return delete dp.filter,mp&&(dp.session.emitEvent("streamPropertyChanged",[new StreamPropertyChangedEvent_1$1.StreamPropertyChangedEvent(dp.session,dp,"filter",dp.filter,gp,"applyFilter")]),dp.streamManager.emitEvent("streamPropertyChanged",[new StreamPropertyChangedEvent_1$1.StreamPropertyChangedEvent(dp.streamManager,dp,"filter",dp.filter,gp,"applyFilter")])),ap()},!this.filter)return[3,11];if(!(!((fp=this.filter)===null||fp===void 0)&&fp.type.startsWith("VB:")))return[3,9];pp.label=1;case 1:return pp.trys.push([1,7,,8]),up=this.virtualBackgroundSourceElements.mediaStreamClone,rp?[3,5]:this.streamManager.remote?(this.streamManager.replaceTrackInMediaStream(up.getVideoTracks()[0],!1),[3,4]):[3,2];case 2:return[4,this.streamManager.replaceTrackAux(up.getVideoTracks()[0],!1)];case 3:pp.sent(),pp.label=4;case 4:return[3,6];case 5:up.getTracks().forEach(function(hp){return hp.stop()}),pp.label=6;case 6:return this.virtualBackgroundSinkElements.VB.cleanUp(),delete this.virtualBackgroundSinkElements,delete this.virtualBackgroundSourceElements,[2,lp(void 0,!1)];case 7:return cp=pp.sent(),[2,lp(cp,!1)];case 8:return[3,10];case 9:if(!this.session.sessionConnected())return[2,sp(this.session.notConnectedError())];logger$3.info("Removing filter of stream "+this.streamId),this.session.openvidu.sendRequest("removeFilter",{streamId:this.streamId},function(hp,mp){return lp(hp,!0)}),pp.label=10;case 10:return[3,12];case 11:return[2,sp(new OpenViduError_1$1.OpenViduError(OpenViduError_1$1.OpenViduErrorName.GENERIC_ERROR,"Stream "+this.streamId+" has no filter applied"))];case 12:return[2]}})})})},_d.prototype.setMediaStream=function(rp){this.mediaStream=rp},_d.prototype.updateMediaStreamInVideos=function(){this.ee.emitEvent("mediastream-updated",[])},_d.prototype.getWebRtcPeer=function(){return this.webRtcPeer},_d.prototype.subscribeToMyRemote=function(rp){this.isSubscribeToRemote=rp},_d.prototype.setOutboundStreamOptions=function(rp){this.outboundStreamOpts=rp},_d.prototype.subscribe=function(){var rp=this;return new Promise(function(np,ap){rp.initWebRtcPeerReceive(!1).then(function(){return np()}).catch(function(sp){return ap(sp)})})},_d.prototype.publish=function(){var rp=this;return new Promise(function(np,ap){rp.isLocalStreamReadyToPublish?rp.initWebRtcPeerSend(!1).then(function(){return np()}).catch(function(sp){return ap(sp)}):rp.ee.once("stream-ready-to-publish",function(){rp.publish().then(function(){return np()}).catch(function(sp){return ap(sp)})})})},_d.prototype.disposeWebRtcPeer=function(){var rp;this.webRtcPeer&&(this.webRtcPeer.dispose(),rp=this.webRtcPeer.getId()),this.stopWebRtcStats(),logger$3.info((this.outboundStreamOpts?"Outbound ":"Inbound ")+"RTCPeerConnection with id ["+rp+"] from 'Stream' with id ["+this.streamId+"] is now closed")},_d.prototype.disposeMediaStream=function(){return __awaiter$1(this,void 0,void 0,function(){var rp;return __generator$1(this,function(np){switch(np.label){case 0:if(!(this.filter&&this.filter.type.startsWith("VB:")))return[3,4];np.label=1;case 1:return np.trys.push([1,3,,4]),[4,this.removeFilterAux(!0)];case 2:return np.sent(),console.debug("Success removing Virtual Background filter for stream ".concat(this.streamId)),[3,4];case 3:return rp=np.sent(),console.error("Error removing Virtual Background filter for stream ".concat(this.streamId),rp),[3,4];case 4:return this.mediaStream&&(this.mediaStream.getAudioTracks().forEach(function(ap){ap.stop()}),this.mediaStream.getVideoTracks().forEach(function(ap){ap.stop()}),delete this.mediaStream),this.localMediaStreamWhenSubscribedToRemote&&(this.localMediaStreamWhenSubscribedToRemote.getAudioTracks().forEach(function(ap){ap.stop()}),this.localMediaStreamWhenSubscribedToRemote.getVideoTracks().forEach(function(ap){ap.stop()}),delete this.localMediaStreamWhenSubscribedToRemote),this.speechEvent&&(this.speechEvent.stop&&this.speechEvent.stop(),delete this.speechEvent),logger$3.info((this.outboundStreamOpts?"Local ":"Remote ")+"MediaStream from 'Stream' with id ["+this.streamId+"] is now disposed"),[2]}})})},_d.prototype.displayMyRemote=function(){return this.isSubscribeToRemote},_d.prototype.isSendAudio=function(){return!!this.outboundStreamOpts&&this.outboundStreamOpts.publisherProperties.audioSource!==null&&this.outboundStreamOpts.publisherProperties.audioSource!==!1},_d.prototype.isSendVideo=function(){return!!this.outboundStreamOpts&&this.outboundStreamOpts.publisherProperties.videoSource!==null&&this.outboundStreamOpts.publisherProperties.videoSource!==!1},_d.prototype.isSendScreen=function(){var rp=!1;if(typeof MediaStreamTrack<"u"&&this.outboundStreamOpts.publisherProperties.videoSource instanceof MediaStreamTrack){var np=this.outboundStreamOpts.publisherProperties.videoSource.getSettings();np.displaySurface&&(rp=["monitor","window","browser"].includes(np.displaySurface))}return!rp&&platform$1.isElectron()&&(rp=typeof this.outboundStreamOpts.publisherProperties.videoSource=="string"&&this.outboundStreamOpts.publisherProperties.videoSource.startsWith("screen:")),rp||(rp=this.outboundStreamOpts.publisherProperties.videoSource==="screen"),!!this.outboundStreamOpts&&rp},_d.prototype.enableHarkSpeakingEvent=function(){var rp=this;this.setHarkListenerIfNotExists(),!this.harkSpeakingEnabled&&this.speechEvent&&(this.harkSpeakingEnabled=!0,this.speechEvent.on("speaking",function(){rp.session.emitEvent("publisherStartSpeaking",[new PublisherSpeakingEvent_1.PublisherSpeakingEvent(rp.session,"publisherStartSpeaking",rp.connection,rp.streamId)]),rp.streamManager.emitEvent("publisherStartSpeaking",[new PublisherSpeakingEvent_1.PublisherSpeakingEvent(rp.streamManager,"publisherStartSpeaking",rp.connection,rp.streamId)]),rp.harkSpeakingEnabledOnce=!1}))},_d.prototype.enableOnceHarkSpeakingEvent=function(){var rp=this;this.setHarkListenerIfNotExists(),!this.harkSpeakingEnabledOnce&&this.speechEvent&&(this.harkSpeakingEnabledOnce=!0,this.speechEvent.once("speaking",function(){rp.harkSpeakingEnabledOnce&&(rp.session.emitEvent("publisherStartSpeaking",[new PublisherSpeakingEvent_1.PublisherSpeakingEvent(rp.session,"publisherStartSpeaking",rp.connection,rp.streamId)]),rp.streamManager.emitEvent("publisherStartSpeaking",[new PublisherSpeakingEvent_1.PublisherSpeakingEvent(rp.streamManager,"publisherStartSpeaking",rp.connection,rp.streamId)])),rp.disableHarkSpeakingEvent(!0)}))},_d.prototype.disableHarkSpeakingEvent=function(rp){if(this.speechEvent){if(this.harkSpeakingEnabledOnce=!1,rp){if(this.harkSpeakingEnabled)return}else this.harkSpeakingEnabled=!1;this.harkVolumeChangeEnabled||this.harkVolumeChangeEnabledOnce||this.harkStoppedSpeakingEnabled||this.harkStoppedSpeakingEnabledOnce?this.speechEvent.off("speaking"):(this.speechEvent.stop(),delete this.speechEvent)}},_d.prototype.enableHarkStoppedSpeakingEvent=function(){var rp=this;this.setHarkListenerIfNotExists(),!this.harkStoppedSpeakingEnabled&&this.speechEvent&&(this.harkStoppedSpeakingEnabled=!0,this.speechEvent.on("stopped_speaking",function(){rp.session.emitEvent("publisherStopSpeaking",[new PublisherSpeakingEvent_1.PublisherSpeakingEvent(rp.session,"publisherStopSpeaking",rp.connection,rp.streamId)]),rp.streamManager.emitEvent("publisherStopSpeaking",[new PublisherSpeakingEvent_1.PublisherSpeakingEvent(rp.streamManager,"publisherStopSpeaking",rp.connection,rp.streamId)]),rp.harkStoppedSpeakingEnabledOnce=!1}))},_d.prototype.enableOnceHarkStoppedSpeakingEvent=function(){var rp=this;this.setHarkListenerIfNotExists(),!this.harkStoppedSpeakingEnabledOnce&&this.speechEvent&&(this.harkStoppedSpeakingEnabledOnce=!0,this.speechEvent.once("stopped_speaking",function(){rp.harkStoppedSpeakingEnabledOnce&&(rp.session.emitEvent("publisherStopSpeaking",[new PublisherSpeakingEvent_1.PublisherSpeakingEvent(rp.session,"publisherStopSpeaking",rp.connection,rp.streamId)]),rp.streamManager.emitEvent("publisherStopSpeaking",[new PublisherSpeakingEvent_1.PublisherSpeakingEvent(rp.streamManager,"publisherStopSpeaking",rp.connection,rp.streamId)])),rp.disableHarkStoppedSpeakingEvent(!0)}))},_d.prototype.disableHarkStoppedSpeakingEvent=function(rp){if(this.speechEvent){if(this.harkStoppedSpeakingEnabledOnce=!1,rp){if(this.harkStoppedSpeakingEnabled)return}else this.harkStoppedSpeakingEnabled=!1;this.harkVolumeChangeEnabled||this.harkVolumeChangeEnabledOnce||this.harkSpeakingEnabled||this.harkSpeakingEnabledOnce?this.speechEvent.off("stopped_speaking"):(this.speechEvent.stop(),delete this.speechEvent)}},_d.prototype.enableHarkVolumeChangeEvent=function(rp){var np=this;this.setHarkListenerIfNotExists()?(!this.harkVolumeChangeEnabled||rp)&&(this.harkVolumeChangeEnabled=!0,this.speechEvent.on("volume_change",function(ap){var sp=np.speechEvent.oldVolumeValue,lp={newValue:ap,oldValue:sp};np.speechEvent.oldVolumeValue=ap,np.streamManager.emitEvent("streamAudioVolumeChange",[new StreamManagerEvent_1.StreamManagerEvent(np.streamManager,"streamAudioVolumeChange",lp)])})):this.harkVolumeChangeEnabled=!0},_d.prototype.enableOnceHarkVolumeChangeEvent=function(rp){var np=this;this.setHarkListenerIfNotExists()?(!this.harkVolumeChangeEnabledOnce||rp)&&(this.harkVolumeChangeEnabledOnce=!0,this.speechEvent.once("volume_change",function(ap){var sp=np.speechEvent.oldVolumeValue,lp={newValue:ap,oldValue:sp};np.speechEvent.oldVolumeValue=ap,np.disableHarkVolumeChangeEvent(!0),np.streamManager.emitEvent("streamAudioVolumeChange",[new StreamManagerEvent_1.StreamManagerEvent(np.streamManager,"streamAudioVolumeChange",lp)])})):this.harkVolumeChangeEnabledOnce=!0},_d.prototype.disableHarkVolumeChangeEvent=function(rp){if(this.speechEvent){if(this.harkVolumeChangeEnabledOnce=!1,rp){if(this.harkVolumeChangeEnabled)return}else this.harkVolumeChangeEnabled=!1;this.harkSpeakingEnabled||this.harkSpeakingEnabledOnce||this.harkStoppedSpeakingEnabled||this.harkStoppedSpeakingEnabledOnce?this.speechEvent.off("volume_change"):(this.speechEvent.stop(),delete this.speechEvent)}},_d.prototype.isLocal=function(){return!this.inboundStreamOpts&&!!this.outboundStreamOpts},_d.prototype.getSelectedIceCandidate=function(){var rp=this;return new Promise(function(np,ap){rp.webRtcStats.getSelectedIceCandidateInfo().then(function(sp){return np(sp)}).catch(function(sp){return ap(sp)})})},_d.prototype.getRemoteIceCandidateList=function(){return this.webRtcPeer.remoteCandidatesQueue},_d.prototype.getLocalIceCandidateList=function(){return this.webRtcPeer.localCandidatesQueue},_d.prototype.streamIceConnectionStateBroken=function(){if(!this.getWebRtcPeer()||!this.getRTCPeerConnection())return!1;if(this.session.openvidu.advancedConfiguration.forceMediaReconnectionAfterNetworkDrop)return logger$3.warn('OpenVidu Browser advanced configuration option "forceMediaReconnectionAfterNetworkDrop" is enabled. Stream '.concat(this.streamId," (").concat(this.isLocal()?"Publisher":"Subscriber",") will force a reconnection")),!0;var rp=this.getRTCPeerConnection().iceConnectionState;return rp!=="connected"&&rp!=="completed"},_d.prototype.setHarkListenerIfNotExists=function(){if(this.mediaStream){if(!this.speechEvent){var rp=this.harkOptions?this.harkOptions:this.session.openvidu.advancedConfiguration.publisherSpeakingEventsOptions||{};rp.interval=typeof rp.interval=="number"?rp.interval:100,rp.threshold=typeof rp.threshold=="number"?rp.threshold:-50,this.speechEvent=hark(this.mediaStream,rp)}return!0}return!1},_d.prototype.setupReconnectionEventEmitter=function(rp,np){return this.reconnectionEventEmitter==null?(this.reconnectionEventEmitter=new EventEmitter$2,!1):(console.warn("Trying to reconnect stream ".concat(this.streamId," (").concat(this.isLocal()?"Publisher":"Subscriber",") but an ongoing reconnection process is active. Waiting for response...")),this.reconnectionEventEmitter.once("success",function(){return rp()}),this.reconnectionEventEmitter.once("error",function(ap){return np(ap)}),!0)},_d.prototype.initWebRtcPeerSend=function(rp){var np=this;return new Promise(function(ap,sp){var lp;if(rp){if(np.setupReconnectionEventEmitter(ap,sp))return}else np.initHarkEvents();var up=function(){var pp;return rp&&((pp=np.reconnectionEventEmitter)===null||pp===void 0||pp.emitEvent("success"),delete np.reconnectionEventEmitter),ap()},cp=function(pp){var hp;return rp&&((hp=np.reconnectionEventEmitter)===null||hp===void 0||hp.emitEvent("error",[pp]),delete np.reconnectionEventEmitter),sp(pp)},dp=function(pp){logger$3.debug("Sending SDP offer to publish as "+np.streamId,pp);var hp=rp?"reconnectStream":"publishVideo",mp;if(rp)mp={stream:np.streamId,sdpString:pp};else{var gp=void 0;np.isSendVideo()&&(gp=typeof MediaStreamTrack<"u"&&np.outboundStreamOpts.publisherProperties.videoSource instanceof MediaStreamTrack?TypeOfVideo_1.TypeOfVideo.CUSTOM:np.isSendScreen()?TypeOfVideo_1.TypeOfVideo.SCREEN:TypeOfVideo_1.TypeOfVideo.CAMERA),mp={doLoopback:np.displayMyRemote()||!1,hasAudio:np.isSendAudio(),hasVideo:np.isSendVideo(),audioActive:np.audioActive,videoActive:np.videoActive,typeOfVideo:gp,frameRate:np.frameRate?np.frameRate:-1,videoDimensions:JSON.stringify(np.videoDimensions),filter:np.outboundStreamOpts.publisherProperties.filter,sdpOffer:pp}}np.session.openvidu.sendRequest(hp,mp,function(vp,xp){vp?vp.code===401?cp(new OpenViduError_1$1.OpenViduError(OpenViduError_1$1.OpenViduErrorName.OPENVIDU_PERMISSION_DENIED,"You don't have permissions to publish")):cp("Error on publishVideo: "+JSON.stringify(vp)):np.webRtcPeer.processRemoteAnswer(xp.sdpAnswer).then(function(){np.streamId=xp.id,np.creationTime=xp.createdAt,np.isLocalStreamPublished=!0,np.publishedOnce=!0,np.displayMyRemote()&&(np.localMediaStreamWhenSubscribedToRemote=np.mediaStream,np.remotePeerSuccessfullyEstablished(rp)),rp?np.ee.emitEvent("stream-reconnected-by-publisher",[]):np.ee.emitEvent("stream-created-by-publisher",[]),np.initWebRtcStats(),logger$3.info("'Publisher' ("+np.streamId+") successfully "+(rp?"reconnected":"published")+" to session"),up()}).catch(function(Sp){cp(Sp)})})},fp={mediaConstraints:{audio:np.hasAudio,video:np.hasVideo},simulcast:(lp=np.outboundStreamOpts.publisherProperties.videoSimulcast)!==null&&lp!==void 0?lp:np.session.openvidu.videoSimulcast,onIceCandidate:np.connection.sendIceCandidate.bind(np.connection),onIceConnectionStateException:np.onIceConnectionStateExceptionHandler.bind(np),iceServers:np.getIceServersConf(),mediaStream:np.mediaStream,mediaServer:np.session.openvidu.mediaServer,typeOfVideo:np.typeOfVideo?TypeOfVideo_1.TypeOfVideo[np.typeOfVideo]:void 0};np.session.openvidu.mediaServer!=="mediasoup"&&(fp.simulcast=!1),rp&&np.disposeWebRtcPeer(),np.displayMyRemote()?np.webRtcPeer=new WebRtcPeer_1.WebRtcPeerSendrecv(fp):np.webRtcPeer=new WebRtcPeer_1.WebRtcPeerSendonly(fp),np.webRtcPeer.addIceConnectionStateChangeListener("publisher of "+np.connection.connectionId),np.webRtcPeer.createOffer().then(function(pp){np.webRtcPeer.processLocalOffer(pp).then(function(){dp(pp.sdp)}).catch(function(hp){cp(new Error("(publish) SDP process local offer error: "+JSON.stringify(hp)))})}).catch(function(pp){cp(new Error("(publish) SDP create offer error: "+JSON.stringify(pp)))})})},_d.prototype.finalResolveForSubscription=function(rp,np){var ap;return logger$3.info("'Subscriber' ("+this.streamId+") successfully "+(rp?"reconnected":"subscribed")),this.remotePeerSuccessfullyEstablished(rp),this.initWebRtcStats(),rp&&((ap=this.reconnectionEventEmitter)===null||ap===void 0||ap.emitEvent("success"),delete this.reconnectionEventEmitter),np()},_d.prototype.finalRejectForSubscription=function(rp,np,ap){var sp;return logger$3.error("Error for 'Subscriber' ("+this.streamId+") while trying to "+(rp?"reconnect":"subscribe")+": "+np.toString()),rp&&((sp=this.reconnectionEventEmitter)===null||sp===void 0||sp.emitEvent("error",[np]),delete this.reconnectionEventEmitter),ap(np)},_d.prototype.initWebRtcPeerReceive=function(rp){var np=this;return new Promise(function(ap,sp){rp&&np.setupReconnectionEventEmitter(ap,sp)||(np.session.openvidu.mediaServer==="mediasoup"?np.initWebRtcPeerReceiveFromServer(rp).then(function(){return np.finalResolveForSubscription(rp,ap)}).catch(function(lp){return np.finalRejectForSubscription(rp,lp,sp)}):np.initWebRtcPeerReceiveFromClient(rp).then(function(){return np.finalResolveForSubscription(rp,ap)}).catch(function(lp){return np.finalRejectForSubscription(rp,lp,sp)}))})},_d.prototype.initWebRtcPeerReceiveFromClient=function(rp){var np=this;return new Promise(function(ap,sp){np.completeWebRtcPeerReceive(rp,!1).then(function(lp){np.webRtcPeer.processRemoteAnswer(lp.sdpAnswer).then(function(){return ap()}).catch(function(up){return sp(up)})}).catch(function(lp){return sp(lp)})})},_d.prototype.initWebRtcPeerReceiveFromServer=function(rp){var np=this;return new Promise(function(ap,sp){np.session.openvidu.sendRequest("prepareReceiveVideoFrom",{sender:np.streamId,reconnect:rp},function(lp,up){if(lp)return sp(new Error("Error on prepareReceiveVideoFrom: "+JSON.stringify(lp)));np.completeWebRtcPeerReceive(rp,!1,up.sdpOffer).then(function(){return ap()}).catch(function(cp){return sp(cp)})})})},_d.prototype.completeWebRtcPeerReceive=function(rp,np,ap){var sp=this;return new Promise(function(lp,up){logger$3.debug("'Session.subscribe(Stream)' called");var cp=function(fp){logger$3.debug("Sending local SDP ".concat(ap?"answer":"offer"," to subscribe to ").concat(sp.streamId),fp);var pp=rp?"reconnectStream":"receiveVideoFrom",hp={};hp[rp?"stream":"sender"]=sp.streamId,ap?hp[rp?"sdpString":"sdpAnswer"]=fp:hp.sdpOffer=fp,rp&&(hp.forciblyReconnect=np),sp.session.openvidu.sendRequest(pp,hp,function(mp,gp){return mp?up(new Error("Error on "+pp+" : "+JSON.stringify(mp))):lp(gp)})},dp={mediaConstraints:{audio:sp.hasAudio,video:sp.hasVideo},simulcast:!1,onIceCandidate:sp.connection.sendIceCandidate.bind(sp.connection),onIceConnectionStateException:sp.onIceConnectionStateExceptionHandler.bind(sp),iceServers:sp.getIceServersConf(),mediaServer:sp.session.openvidu.mediaServer,typeOfVideo:sp.typeOfVideo?TypeOfVideo_1.TypeOfVideo[sp.typeOfVideo]:void 0};rp&&sp.disposeWebRtcPeer(),sp.webRtcPeer=new WebRtcPeer_1.WebRtcPeerRecvonly(dp),sp.webRtcPeer.addIceConnectionStateChangeListener(sp.streamId),ap?sp.webRtcPeer.processRemoteOffer(ap).then(function(){sp.webRtcPeer.createAnswer().then(function(fp){sp.webRtcPeer.processLocalAnswer(fp).then(function(){cp(fp.sdp)}).catch(function(pp){return up(new Error("(subscribe) SDP process local answer error: "+JSON.stringify(pp)))})}).catch(function(fp){return up(new Error("(subscribe) SDP create answer error: "+JSON.stringify(fp)))})}).catch(function(fp){return up(new Error("(subscribe) SDP process remote offer error: "+JSON.stringify(fp)))}):sp.webRtcPeer.createOffer().then(function(fp){sp.webRtcPeer.processLocalOffer(fp).then(function(){cp(fp.sdp)}).catch(function(pp){return up(new Error("(subscribe) SDP process local offer error: "+JSON.stringify(pp)))})}).catch(function(fp){return up(new Error("(subscribe) SDP create offer error: "+JSON.stringify(fp)))})})},_d.prototype.remotePeerSuccessfullyEstablished=function(rp){rp&&this.mediaStream!=null&&this.disposeMediaStream(),this.mediaStream=new MediaStream;for(var np,ap=0,sp=this.webRtcPeer.pc.getReceivers();ap<sp.length;ap++)np=sp[ap],np.track&&this.mediaStream.addTrack(np.track);if(logger$3.debug("Peer remote stream",this.mediaStream),this.mediaStream){if(this.streamManager instanceof Subscriber_1.Subscriber){if(this.mediaStream.getAudioTracks()[0]){var lp=rp?this.audioActive:!!this.streamManager.properties.subscribeToAudio;this.mediaStream.getAudioTracks()[0].enabled=lp}if(this.mediaStream.getVideoTracks()[0]){var lp=rp?this.videoActive:!!this.videoActive&&!!this.streamManager.properties.subscribeToVideo;this.mediaStream.getVideoTracks()[0].enabled=lp}}this.updateMediaStreamInVideos(),this.initHarkEvents()}},_d.prototype.initHarkEvents=function(){this.mediaStream.getAudioTracks()[0]&&(this.session.anySpeechEventListenerEnabled("publisherStartSpeaking",!0,this.streamManager)&&this.enableOnceHarkSpeakingEvent(),this.session.anySpeechEventListenerEnabled("publisherStartSpeaking",!1,this.streamManager)&&this.enableHarkSpeakingEvent(),this.session.anySpeechEventListenerEnabled("publisherStopSpeaking",!0,this.streamManager)&&this.enableOnceHarkStoppedSpeakingEvent(),this.session.anySpeechEventListenerEnabled("publisherStopSpeaking",!1,this.streamManager)&&this.enableHarkStoppedSpeakingEvent(),this.harkVolumeChangeEnabledOnce&&this.enableOnceHarkVolumeChangeEvent(!0),this.harkVolumeChangeEnabled&&this.enableHarkVolumeChangeEvent(!0))},_d.prototype.onIceConnectionStateExceptionHandler=function(rp,np,ap){switch(rp){case ExceptionEvent_1$1.ExceptionEventName.ICE_CONNECTION_FAILED:this.onIceConnectionFailed();break;case ExceptionEvent_1$1.ExceptionEventName.ICE_CONNECTION_DISCONNECTED:this.onIceConnectionDisconnected();break}this.session.emitEvent("exception",[new ExceptionEvent_1$1.ExceptionEvent(this.session,rp,this,np,ap)])},_d.prototype.onIceConnectionFailed=function(){logger$3.log("[ICE_CONNECTION_FAILED] Handling ICE_CONNECTION_FAILED event. Reconnecting stream ".concat(this.streamId," (").concat(this.isLocal()?"Publisher":"Subscriber",")")),this.reconnectStreamAndLogResultingIceConnectionState(ExceptionEvent_1$1.ExceptionEventName.ICE_CONNECTION_FAILED)},_d.prototype.onIceConnectionDisconnected=function(){var rp=this;logger$3.log("[ICE_CONNECTION_DISCONNECTED] Handling ICE_CONNECTION_DISCONNECTED event. Waiting for ICE to be restored and reconnect stream ".concat(this.streamId," (").concat(this.isLocal()?"Publisher":"Subscriber",") if not possible"));var np=this.session.openvidu.advancedConfiguration.iceConnectionDisconnectedExceptionTimeout||4e3;this.awaitWebRtcPeerConnectionState(np).then(function(ap){switch(ap){case"failed":logger$3.warn("[ICE_CONNECTION_DISCONNECTED] ICE connection of stream ".concat(rp.streamId," (").concat(rp.isLocal()?"Publisher":"Subscriber",") is now failed after ICE_CONNECTION_DISCONNECTED"));break;case"connected":case"completed":logger$3.log("[ICE_CONNECTION_DISCONNECTED] ICE connection of stream ".concat(rp.streamId," (").concat(rp.isLocal()?"Publisher":"Subscriber",") automatically restored after ICE_CONNECTION_DISCONNECTED. Current ICE connection state: ").concat(ap));break;case"closed":case"checking":case"new":case"disconnected":logger$3.warn("[ICE_CONNECTION_DISCONNECTED] ICE connection of stream ".concat(rp.streamId," (").concat(rp.isLocal()?"Publisher":"Subscriber",") couldn't be restored after ICE_CONNECTION_DISCONNECTED event. Current ICE connection state after ").concat(np," ms: ").concat(ap)),rp.reconnectStreamAndLogResultingIceConnectionState(ExceptionEvent_1$1.ExceptionEventName.ICE_CONNECTION_DISCONNECTED);break}})},_d.prototype.reconnectStreamAndLogResultingIceConnectionState=function(rp){return __awaiter$1(this,void 0,void 0,function(){var np,ap;return __generator$1(this,function(sp){switch(sp.label){case 0:return sp.trys.push([0,2,,3]),[4,this.reconnectStreamAndReturnIceConnectionState(rp)];case 1:switch(np=sp.sent(),np){case"connected":case"completed":logger$3.log("[".concat(rp,"] Stream ").concat(this.streamId," (").concat(this.isLocal()?"Publisher":"Subscriber",") successfully reconnected after ").concat(rp,". Current ICE connection state: ").concat(np));break;default:logger$3.error("[".concat(rp,"] Stream ").concat(this.streamId," (").concat(this.isLocal()?"Publisher":"Subscriber",") failed to reconnect after ").concat(rp,". Current ICE connection state: ").concat(np));break}return[3,3];case 2:return ap=sp.sent(),logger$3.error("[".concat(rp,"] Error reconnecting stream ").concat(this.streamId," (").concat(this.isLocal()?"Publisher":"Subscriber",") after ").concat(rp,": ").concat(ap)),[3,3];case 3:return[2]}})})},_d.prototype.reconnectStreamAndReturnIceConnectionState=function(rp){return __awaiter$1(this,void 0,void 0,function(){var np,ap;return __generator$1(this,function(sp){switch(sp.label){case 0:logger$3.log("[".concat(rp,"] Reconnecting stream ").concat(this.streamId," (").concat(this.isLocal()?"Publisher":"Subscriber",") after event ").concat(rp)),sp.label=1;case 1:return sp.trys.push([1,3,,4]),[4,this.reconnectStream(rp)];case 2:return sp.sent(),np=this.session.openvidu.advancedConfiguration.iceConnectionDisconnectedExceptionTimeout||4e3,[2,this.awaitWebRtcPeerConnectionState(np)];case 3:return ap=sp.sent(),logger$3.warn("[".concat(rp,"] Error reconnecting stream ").concat(this.streamId," (").concat(this.isLocal()?"Publisher":"Subscriber","). Reason: ").concat(ap)),[2,this.awaitWebRtcPeerConnectionState(1)];case 4:return[2]}})})},_d.prototype.awaitWebRtcPeerConnectionState=function(rp){return __awaiter$1(this,void 0,void 0,function(){var np,ap,sp,lp;return __generator$1(this,function(up){switch(up.label){case 0:np=this.getRTCPeerConnection().iceConnectionState,ap=150,sp=Math.ceil(rp/ap),lp=0,up.label=1;case 1:return lp<sp?(np=this.getRTCPeerConnection().iceConnectionState,np==="connected"||np==="completed"?[3,4]:[4,new Promise(function(cp){return setTimeout(cp,ap)})]):[3,4];case 2:up.sent(),up.label=3;case 3:return lp++,[3,1];case 4:return[2,np]}})})},_d.prototype.reconnectStream=function(rp){return __awaiter$1(this,void 0,void 0,function(){var np,ap;return __generator$1(this,function(sp){switch(sp.label){case 0:return[4,this.isWebsocketConnected(rp,3e3)];case 1:if(np=sp.sent(),np)return logger$3.log("[".concat(rp,"] Trying to reconnect stream ").concat(this.streamId," (").concat(this.isLocal()?"Publisher":"Subscriber",") and the websocket is opened")),this.isLocal()?[2,this.initWebRtcPeerSend(!0)]:[2,this.initWebRtcPeerReceive(!0)];throw ap="[".concat(rp,"] Trying to reconnect stream ").concat(this.streamId," (").concat(this.isLocal()?"Publisher":"Subscriber",") but the websocket wasn't opened"),logger$3.error(ap),Error(ap)}})})},_d.prototype.isWebsocketConnected=function(rp,np){var ap=this;return new Promise(function(sp,lp){var up=ap.session.openvidu.getWsReadyState();if(up===1){var cp=setTimeout(function(){return console.warn("[".concat(rp,"] Websocket timeout of ").concat(np,"ms")),sp(!1)},np);ap.session.openvidu.sendRequest("echo",{},function(dp,fp){return clearTimeout(cp),dp?(console.warn("[".concat(rp,"] Websocket 'echo' returned error: ").concat(dp)),sp(!1)):sp(!0)})}else return console.warn("[".concat(rp,"] Websocket readyState is ").concat(up)),sp(!1)})},_d.prototype.initWebRtcStats=function(){this.webRtcStats=new WebRtcStats_1.WebRtcStats(this),this.webRtcStats.initWebRtcStats()},_d.prototype.stopWebRtcStats=function(){this.webRtcStats&&this.webRtcStats.isEnabled()&&this.webRtcStats.stopWebRtcStats()},_d.prototype.getIceServersConf=function(){var rp;return this.session.openvidu.advancedConfiguration.iceServers?rp=this.session.openvidu.advancedConfiguration.iceServers==="freeice"?void 0:this.session.openvidu.advancedConfiguration.iceServers:this.session.openvidu.iceServers?rp=this.session.openvidu.iceServers:rp=void 0,rp},_d.prototype.gatherStatsForPeer=function(){var rp=this;return new Promise(function(np,ap){rp.isLocal()?rp.getRTCPeerConnection().getSenders().forEach(function(sp){return sp.getStats().then(function(lp){lp.forEach(function(up){if(rp.isReportWanted(up)){var cp={};cp.type=up.type,cp.timestamp=up.timestamp,cp.id=up.id,up.type==="outbound-rtp"&&(cp.ssrc=up.ssrc,cp.firCount=up.firCount,cp.pliCount=up.pliCount,cp.nackCount=up.nackCount,cp.qpSum=up.qpSum,up.kind?cp.mediaType=up.kind:up.mediaType?cp.mediaType=up.mediaType:cp.mediaType=up.id.indexOf("VideoStream")!==-1?"video":"audio",cp.mediaType==="video"&&(cp.framesEncoded=up.framesEncoded),cp.packetsSent=up.packetsSent,cp.bytesSent=up.bytesSent),up.type==="candidate-pair"&&up.totalRoundTripTime!==void 0&&(cp.availableOutgoingBitrate=up.availableOutgoingBitrate,cp.rtt=up.currentRoundTripTime,cp.averageRtt=up.totalRoundTripTime/up.responsesReceived),up.type==="remote-inbound-rtp"||up.type,logger$3.log(cp)}})})}):rp.getRTCPeerConnection().getReceivers().forEach(function(sp){return sp.getStats().then(function(lp){lp.forEach(function(up){if(rp.isReportWanted(up)){var cp={};cp.type=up.type,cp.timestamp=up.timestamp,cp.id=up.id,up.type==="inbound-rtp"&&(cp.ssrc=up.ssrc,cp.firCount=up.firCount,cp.pliCount=up.pliCount,cp.nackCount=up.nackCount,cp.qpSum=up.qpSum,up.kind?cp.mediaType=up.kind:up.mediaType?cp.mediaType=up.mediaType:cp.mediaType=up.id.indexOf("VideoStream")!==-1?"video":"audio",cp.mediaType==="video"&&(cp.framesDecoded=up.framesDecoded),cp.packetsReceived=up.packetsReceived,cp.packetsLost=up.packetsLost,cp.jitter=up.jitter,cp.bytesReceived=up.bytesReceived),up.type==="candidate-pair"&&up.totalRoundTripTime!==void 0&&(cp.availableIncomingBitrate=up.availableIncomingBitrate,cp.rtt=up.currentRoundTripTime,cp.averageRtt=up.totalRoundTripTime/up.responsesReceived),up.type==="remote-inbound-rtp"||up.type,logger$3.log(cp)}})})})})},_d.prototype.isReportWanted=function(rp){return rp.type==="inbound-rtp"&&!this.isLocal()||rp.type==="outbound-rtp"&&this.isLocal()||rp.type==="candidate-pair"&&rp.nominated&&rp.bytesSent>0},_d}();Stream$1.Stream=Stream;Object.defineProperty(Connection$1,"__esModule",{value:!0});Connection$1.Connection=void 0;var Stream_1=Stream$1,OpenViduLogger_1$2=OpenViduLogger$1,ExceptionEvent_1=ExceptionEvent,logger$2=OpenViduLogger_1$2.OpenViduLogger.getInstance(),Connection=function(){function _d(rp,np){this.session=rp,this.disposed=!1;var ap="'Connection' created ";np.role?(this.localOptions=np,this.connectionId=this.localOptions.id,this.creationTime=this.localOptions.createdAt,this.data=this.localOptions.metadata,this.rpcSessionId=this.localOptions.sessionId,this.role=this.localOptions.role,this.record=this.localOptions.record,ap+="(local)"):(this.remoteOptions=np,this.connectionId=this.remoteOptions.id,this.creationTime=this.remoteOptions.createdAt,this.remoteOptions.metadata&&(this.data=this.remoteOptions.metadata),this.remoteOptions.streams&&this.initRemoteStreams(this.remoteOptions.streams),ap+="(remote) with 'connectionId' ["+this.remoteOptions.id+"]"),logger$2.info(ap)}return _d.prototype.sendIceCandidate=function(rp){var np=this;this.disposed?logger$2.warn("Connection ".concat(this.connectionId," disposed when trying to send an ICE candidate. ICE candidate not sent")):(logger$2.debug((this.stream.outboundStreamOpts?"Local":"Remote")+"candidate for"+this.connectionId,rp),this.session.openvidu.sendRequest("onIceCandidate",{endpointName:this.connectionId,candidate:rp.candidate,sdpMid:rp.sdpMid,sdpMLineIndex:rp.sdpMLineIndex},function(ap,sp){ap&&(logger$2.error("Error sending ICE candidate: "+JSON.stringify(ap)),np.session.emitEvent("exception",[new ExceptionEvent_1.ExceptionEvent(np.session,ExceptionEvent_1.ExceptionEventName.ICE_CANDIDATE_ERROR,np.session,"There was an unexpected error on the server-side processing an ICE candidate generated and sent by the client-side",ap)]))}))},_d.prototype.initRemoteStreams=function(rp){var np=this;rp.forEach(function(ap){var sp={id:ap.id,createdAt:ap.createdAt,connection:np,hasAudio:ap.hasAudio,hasVideo:ap.hasVideo,audioActive:ap.audioActive,videoActive:ap.videoActive,typeOfVideo:ap.typeOfVideo,frameRate:ap.frameRate,videoDimensions:ap.videoDimensions?JSON.parse(ap.videoDimensions):void 0,filter:ap.filter?ap.filter:void 0},lp=new Stream_1.Stream(np.session,sp);np.addStream(lp)}),logger$2.info("Remote 'Connection' with 'connectionId' ["+this.connectionId+"] is now configured for receiving Streams with options: ",this.stream.inboundStreamOpts)},_d.prototype.addStream=function(rp){rp.connection=this,this.stream=rp},_d.prototype.removeStream=function(){delete this.stream},_d.prototype.dispose=function(){this.disposed=!0,this.removeStream()},_d}();Connection$1.Connection=Connection;var ConnectionEvent$1={},__extends$7=commonjsGlobal&&commonjsGlobal.__extends||function(){var _d=function(rp,np){return _d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ap,sp){ap.__proto__=sp}||function(ap,sp){for(var lp in sp)Object.prototype.hasOwnProperty.call(sp,lp)&&(ap[lp]=sp[lp])},_d(rp,np)};return function(rp,np){if(typeof np!="function"&&np!==null)throw new TypeError("Class extends value "+String(np)+" is not a constructor or null");_d(rp,np);function ap(){this.constructor=rp}rp.prototype=np===null?Object.create(np):(ap.prototype=np.prototype,new ap)}}();Object.defineProperty(ConnectionEvent$1,"__esModule",{value:!0});ConnectionEvent$1.ConnectionEvent=void 0;var Event_1$7=Event$2,ConnectionEvent=function(_d){__extends$7(rp,_d);function rp(np,ap,sp,lp,up){var cp=_d.call(this,np,ap,sp)||this;return cp.connection=lp,cp.reason=up,cp}return rp.prototype.callDefaultBehavior=function(){},rp}(Event_1$7.Event);ConnectionEvent$1.ConnectionEvent=ConnectionEvent;var FilterEvent$1={},__extends$6=commonjsGlobal&&commonjsGlobal.__extends||function(){var _d=function(rp,np){return _d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ap,sp){ap.__proto__=sp}||function(ap,sp){for(var lp in sp)Object.prototype.hasOwnProperty.call(sp,lp)&&(ap[lp]=sp[lp])},_d(rp,np)};return function(rp,np){if(typeof np!="function"&&np!==null)throw new TypeError("Class extends value "+String(np)+" is not a constructor or null");_d(rp,np);function ap(){this.constructor=rp}rp.prototype=np===null?Object.create(np):(ap.prototype=np.prototype,new ap)}}();Object.defineProperty(FilterEvent$1,"__esModule",{value:!0});FilterEvent$1.FilterEvent=void 0;var Event_1$6=Event$2,FilterEvent=function(_d){__extends$6(rp,_d);function rp(np,ap,sp){var lp=_d.call(this,!1,np,ap)||this;return lp.data=sp,lp}return rp.prototype.callDefaultBehavior=function(){},rp}(Event_1$6.Event);FilterEvent$1.FilterEvent=FilterEvent;var RecordingEvent$1={},__extends$5=commonjsGlobal&&commonjsGlobal.__extends||function(){var _d=function(rp,np){return _d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ap,sp){ap.__proto__=sp}||function(ap,sp){for(var lp in sp)Object.prototype.hasOwnProperty.call(sp,lp)&&(ap[lp]=sp[lp])},_d(rp,np)};return function(rp,np){if(typeof np!="function"&&np!==null)throw new TypeError("Class extends value "+String(np)+" is not a constructor or null");_d(rp,np);function ap(){this.constructor=rp}rp.prototype=np===null?Object.create(np):(ap.prototype=np.prototype,new ap)}}();Object.defineProperty(RecordingEvent$1,"__esModule",{value:!0});RecordingEvent$1.RecordingEvent=void 0;var Event_1$5=Event$2,RecordingEvent=function(_d){__extends$5(rp,_d);function rp(np,ap,sp,lp,up){var cp=_d.call(this,!1,np,ap)||this;return cp.id=sp,lp!==sp&&(cp.name=lp),cp.reason=up,cp}return rp.prototype.callDefaultBehavior=function(){},rp}(Event_1$5.Event);RecordingEvent$1.RecordingEvent=RecordingEvent;var SessionDisconnectedEvent$1={},__extends$4=commonjsGlobal&&commonjsGlobal.__extends||function(){var _d=function(rp,np){return _d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ap,sp){ap.__proto__=sp}||function(ap,sp){for(var lp in sp)Object.prototype.hasOwnProperty.call(sp,lp)&&(ap[lp]=sp[lp])},_d(rp,np)};return function(rp,np){if(typeof np!="function"&&np!==null)throw new TypeError("Class extends value "+String(np)+" is not a constructor or null");_d(rp,np);function ap(){this.constructor=rp}rp.prototype=np===null?Object.create(np):(ap.prototype=np.prototype,new ap)}}();Object.defineProperty(SessionDisconnectedEvent$1,"__esModule",{value:!0});SessionDisconnectedEvent$1.SessionDisconnectedEvent=void 0;var Event_1$4=Event$2,OpenViduLogger_1$1=OpenViduLogger$1,logger$1=OpenViduLogger_1$1.OpenViduLogger.getInstance(),SessionDisconnectedEvent=function(_d){__extends$4(rp,_d);function rp(np,ap){var sp=_d.call(this,!0,np,"sessionDisconnected")||this;return sp.reason=ap,sp}return rp.prototype.callDefaultBehavior=function(){logger$1.info("Calling default behavior upon '"+this.type+"' event dispatched by 'Session'");var np=this.target;np.remoteConnections.forEach(function(ap){var sp,lp,up,cp,dp,fp,pp,hp,mp=ap.connectionId;if(!((sp=np.remoteConnections.get(mp))===null||sp===void 0)&&sp.stream){(lp=np.remoteConnections.get(mp))===null||lp===void 0||lp.stream.disposeWebRtcPeer(),(up=np.remoteConnections.get(mp))===null||up===void 0||up.stream.disposeMediaStream(),!((cp=np.remoteConnections.get(mp))===null||cp===void 0)&&cp.stream.streamManager&&((dp=np.remoteConnections.get(mp))===null||dp===void 0||dp.stream.streamManager.removeAllVideos());var gp=(pp=(fp=np.remoteConnections.get(mp))===null||fp===void 0?void 0:fp.stream)===null||pp===void 0?void 0:pp.streamId;gp&&np.remoteStreamsCreated.delete(gp),(hp=np.remoteConnections.get(mp))===null||hp===void 0||hp.dispose()}np.remoteConnections.delete(mp)})},rp}(Event_1$4.Event);SessionDisconnectedEvent$1.SessionDisconnectedEvent=SessionDisconnectedEvent;var SignalEvent$1={},__extends$3=commonjsGlobal&&commonjsGlobal.__extends||function(){var _d=function(rp,np){return _d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ap,sp){ap.__proto__=sp}||function(ap,sp){for(var lp in sp)Object.prototype.hasOwnProperty.call(sp,lp)&&(ap[lp]=sp[lp])},_d(rp,np)};return function(rp,np){if(typeof np!="function"&&np!==null)throw new TypeError("Class extends value "+String(np)+" is not a constructor or null");_d(rp,np);function ap(){this.constructor=rp}rp.prototype=np===null?Object.create(np):(ap.prototype=np.prototype,new ap)}}();Object.defineProperty(SignalEvent$1,"__esModule",{value:!0});SignalEvent$1.SignalEvent=void 0;var Event_1$3=Event$2,SignalEvent=function(_d){__extends$3(rp,_d);function rp(np,ap,sp,lp){var up=_d.call(this,!1,np,"signal")||this;return ap&&(up.type="signal:"+ap),up.data=sp,up.from=lp,up}return rp.prototype.callDefaultBehavior=function(){},rp}(Event_1$3.Event);SignalEvent$1.SignalEvent=SignalEvent;var SpeechToTextEvent$1={},__extends$2=commonjsGlobal&&commonjsGlobal.__extends||function(){var _d=function(rp,np){return _d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ap,sp){ap.__proto__=sp}||function(ap,sp){for(var lp in sp)Object.prototype.hasOwnProperty.call(sp,lp)&&(ap[lp]=sp[lp])},_d(rp,np)};return function(rp,np){if(typeof np!="function"&&np!==null)throw new TypeError("Class extends value "+String(np)+" is not a constructor or null");_d(rp,np);function ap(){this.constructor=rp}rp.prototype=np===null?Object.create(np):(ap.prototype=np.prototype,new ap)}}();Object.defineProperty(SpeechToTextEvent$1,"__esModule",{value:!0});SpeechToTextEvent$1.SpeechToTextEvent=void 0;var Event_1$2=Event$2,SpeechToTextEvent=function(_d){__extends$2(rp,_d);function rp(np,ap,sp,lp,up,cp){var dp=_d.call(this,!1,np,"speechToTextMessage")||this;return dp.connection=ap,dp.text=sp,dp.reason=lp,dp.raw=up,dp.lang=cp,dp}return rp.prototype.callDefaultBehavior=function(){},rp}(Event_1$2.Event);SpeechToTextEvent$1.SpeechToTextEvent=SpeechToTextEvent;var StreamEvent={},hasRequiredStreamEvent;function requireStreamEvent(){if(hasRequiredStreamEvent)return StreamEvent;hasRequiredStreamEvent=1;var _d=commonjsGlobal&&commonjsGlobal.__extends||function(){var cp=function(dp,fp){return cp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(pp,hp){pp.__proto__=hp}||function(pp,hp){for(var mp in hp)Object.prototype.hasOwnProperty.call(hp,mp)&&(pp[mp]=hp[mp])},cp(dp,fp)};return function(dp,fp){if(typeof fp!="function"&&fp!==null)throw new TypeError("Class extends value "+String(fp)+" is not a constructor or null");cp(dp,fp);function pp(){this.constructor=dp}dp.prototype=fp===null?Object.create(fp):(pp.prototype=fp.prototype,new pp)}}();Object.defineProperty(StreamEvent,"__esModule",{value:!0}),StreamEvent.StreamEvent=void 0;var rp=Event$2,np=requirePublisher(),ap=requireSession(),sp=OpenViduLogger$1,lp=sp.OpenViduLogger.getInstance(),up=function(cp){_d(dp,cp);function dp(fp,pp,hp,mp,gp){var vp=cp.call(this,fp,pp,hp)||this;return vp.stream=mp,vp.reason=gp,vp}return dp.prototype.callDefaultBehavior=function(){if(this.type==="streamDestroyed"){if(this.target instanceof ap.Session)lp.info("Calling default behavior upon '"+this.type+"' event dispatched by 'Session'"),this.stream.disposeWebRtcPeer();else if(this.target instanceof np.Publisher){lp.info("Calling default behavior upon '"+this.type+"' event dispatched by 'Publisher'"),clearInterval(this.target.screenShareResizeInterval),this.stream.isLocalStreamReadyToPublish=!1;for(var fp=this.target.openvidu.publishers,pp=0;pp<fp.length;pp++)if(fp[pp]===this.target){fp.splice(pp,1);break}}this.stream.disposeMediaStream(),this.stream.streamManager&&this.stream.streamManager.removeAllVideos(),this.stream.session.remoteStreamsCreated.delete(this.stream.streamId);var hp=this.stream.session.remoteConnections.get(this.stream.connection.connectionId);if(hp&&hp.remoteOptions)for(var mp=hp.remoteOptions.streams,pp=mp.length-1;pp>=0;--pp)mp[pp].id===this.stream.streamId&&mp.splice(pp,1)}},dp}(rp.Event);return StreamEvent.StreamEvent=up,StreamEvent}var ConnectionPropertyChangedEvent$1={},__extends$1=commonjsGlobal&&commonjsGlobal.__extends||function(){var _d=function(rp,np){return _d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ap,sp){ap.__proto__=sp}||function(ap,sp){for(var lp in sp)Object.prototype.hasOwnProperty.call(sp,lp)&&(ap[lp]=sp[lp])},_d(rp,np)};return function(rp,np){if(typeof np!="function"&&np!==null)throw new TypeError("Class extends value "+String(np)+" is not a constructor or null");_d(rp,np);function ap(){this.constructor=rp}rp.prototype=np===null?Object.create(np):(ap.prototype=np.prototype,new ap)}}();Object.defineProperty(ConnectionPropertyChangedEvent$1,"__esModule",{value:!0});ConnectionPropertyChangedEvent$1.ConnectionPropertyChangedEvent=void 0;var Event_1$1=Event$2,ConnectionPropertyChangedEvent=function(_d){__extends$1(rp,_d);function rp(np,ap,sp,lp,up){var cp=_d.call(this,!1,np,"connectionPropertyChanged")||this;return cp.connection=ap,cp.changedProperty=sp,cp.newValue=lp,cp.oldValue=up,cp}return rp.prototype.callDefaultBehavior=function(){},rp}(Event_1$1.Event);ConnectionPropertyChangedEvent$1.ConnectionPropertyChangedEvent=ConnectionPropertyChangedEvent;var NetworkQualityLevelChangedEvent$1={},__extends=commonjsGlobal&&commonjsGlobal.__extends||function(){var _d=function(rp,np){return _d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ap,sp){ap.__proto__=sp}||function(ap,sp){for(var lp in sp)Object.prototype.hasOwnProperty.call(sp,lp)&&(ap[lp]=sp[lp])},_d(rp,np)};return function(rp,np){if(typeof np!="function"&&np!==null)throw new TypeError("Class extends value "+String(np)+" is not a constructor or null");_d(rp,np);function ap(){this.constructor=rp}rp.prototype=np===null?Object.create(np):(ap.prototype=np.prototype,new ap)}}();Object.defineProperty(NetworkQualityLevelChangedEvent$1,"__esModule",{value:!0});NetworkQualityLevelChangedEvent$1.NetworkQualityLevelChangedEvent=void 0;var Event_1=Event$2,NetworkQualityLevelChangedEvent=function(_d){__extends(rp,_d);function rp(np,ap,sp,lp){var up=_d.call(this,!1,np,"networkQualityLevelChanged")||this;return up.newValue=ap,up.oldValue=sp,up.connection=lp,up}return rp.prototype.callDefaultBehavior=function(){},rp}(Event_1.Event);NetworkQualityLevelChangedEvent$1.NetworkQualityLevelChangedEvent=NetworkQualityLevelChangedEvent;var define_process_env_default={};const debug$1=typeof process=="object"&&define_process_env_default&&define_process_env_default.NODE_DEBUG&&/\bsemver\b/i.test(define_process_env_default.NODE_DEBUG)?(..._d)=>console.error("SEMVER",..._d):()=>{};var debug_1=debug$1;const SEMVER_SPEC_VERSION="2.0.0",MAX_LENGTH$1=256,MAX_SAFE_INTEGER$1=Number.MAX_SAFE_INTEGER||9007199254740991,MAX_SAFE_COMPONENT_LENGTH=16;var constants={SEMVER_SPEC_VERSION,MAX_LENGTH:MAX_LENGTH$1,MAX_SAFE_INTEGER:MAX_SAFE_INTEGER$1,MAX_SAFE_COMPONENT_LENGTH},re$1={exports:{}};(function(_d,rp){const{MAX_SAFE_COMPONENT_LENGTH:np}=constants,ap=debug_1;rp=_d.exports={};const sp=rp.re=[],lp=rp.src=[],up=rp.t={};let cp=0;const dp=(fp,pp,hp)=>{const mp=cp++;ap(fp,mp,pp),up[fp]=mp,lp[mp]=pp,sp[mp]=new RegExp(pp,hp?"g":void 0)};dp("NUMERICIDENTIFIER","0|[1-9]\\d*"),dp("NUMERICIDENTIFIERLOOSE","[0-9]+"),dp("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),dp("MAINVERSION",`(${lp[up.NUMERICIDENTIFIER]})\\.(${lp[up.NUMERICIDENTIFIER]})\\.(${lp[up.NUMERICIDENTIFIER]})`),dp("MAINVERSIONLOOSE",`(${lp[up.NUMERICIDENTIFIERLOOSE]})\\.(${lp[up.NUMERICIDENTIFIERLOOSE]})\\.(${lp[up.NUMERICIDENTIFIERLOOSE]})`),dp("PRERELEASEIDENTIFIER",`(?:${lp[up.NUMERICIDENTIFIER]}|${lp[up.NONNUMERICIDENTIFIER]})`),dp("PRERELEASEIDENTIFIERLOOSE",`(?:${lp[up.NUMERICIDENTIFIERLOOSE]}|${lp[up.NONNUMERICIDENTIFIER]})`),dp("PRERELEASE",`(?:-(${lp[up.PRERELEASEIDENTIFIER]}(?:\\.${lp[up.PRERELEASEIDENTIFIER]})*))`),dp("PRERELEASELOOSE",`(?:-?(${lp[up.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${lp[up.PRERELEASEIDENTIFIERLOOSE]})*))`),dp("BUILDIDENTIFIER","[0-9A-Za-z-]+"),dp("BUILD",`(?:\\+(${lp[up.BUILDIDENTIFIER]}(?:\\.${lp[up.BUILDIDENTIFIER]})*))`),dp("FULLPLAIN",`v?${lp[up.MAINVERSION]}${lp[up.PRERELEASE]}?${lp[up.BUILD]}?`),dp("FULL",`^${lp[up.FULLPLAIN]}$`),dp("LOOSEPLAIN",`[v=\\s]*${lp[up.MAINVERSIONLOOSE]}${lp[up.PRERELEASELOOSE]}?${lp[up.BUILD]}?`),dp("LOOSE",`^${lp[up.LOOSEPLAIN]}$`),dp("GTLT","((?:<|>)?=?)"),dp("XRANGEIDENTIFIERLOOSE",`${lp[up.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),dp("XRANGEIDENTIFIER",`${lp[up.NUMERICIDENTIFIER]}|x|X|\\*`),dp("XRANGEPLAIN",`[v=\\s]*(${lp[up.XRANGEIDENTIFIER]})(?:\\.(${lp[up.XRANGEIDENTIFIER]})(?:\\.(${lp[up.XRANGEIDENTIFIER]})(?:${lp[up.PRERELEASE]})?${lp[up.BUILD]}?)?)?`),dp("XRANGEPLAINLOOSE",`[v=\\s]*(${lp[up.XRANGEIDENTIFIERLOOSE]})(?:\\.(${lp[up.XRANGEIDENTIFIERLOOSE]})(?:\\.(${lp[up.XRANGEIDENTIFIERLOOSE]})(?:${lp[up.PRERELEASELOOSE]})?${lp[up.BUILD]}?)?)?`),dp("XRANGE",`^${lp[up.GTLT]}\\s*${lp[up.XRANGEPLAIN]}$`),dp("XRANGELOOSE",`^${lp[up.GTLT]}\\s*${lp[up.XRANGEPLAINLOOSE]}$`),dp("COERCE",`(^|[^\\d])(\\d{1,${np}})(?:\\.(\\d{1,${np}}))?(?:\\.(\\d{1,${np}}))?(?:$|[^\\d])`),dp("COERCERTL",lp[up.COERCE],!0),dp("LONETILDE","(?:~>?)"),dp("TILDETRIM",`(\\s*)${lp[up.LONETILDE]}\\s+`,!0),rp.tildeTrimReplace="$1~",dp("TILDE",`^${lp[up.LONETILDE]}${lp[up.XRANGEPLAIN]}$`),dp("TILDELOOSE",`^${lp[up.LONETILDE]}${lp[up.XRANGEPLAINLOOSE]}$`),dp("LONECARET","(?:\\^)"),dp("CARETTRIM",`(\\s*)${lp[up.LONECARET]}\\s+`,!0),rp.caretTrimReplace="$1^",dp("CARET",`^${lp[up.LONECARET]}${lp[up.XRANGEPLAIN]}$`),dp("CARETLOOSE",`^${lp[up.LONECARET]}${lp[up.XRANGEPLAINLOOSE]}$`),dp("COMPARATORLOOSE",`^${lp[up.GTLT]}\\s*(${lp[up.LOOSEPLAIN]})$|^$`),dp("COMPARATOR",`^${lp[up.GTLT]}\\s*(${lp[up.FULLPLAIN]})$|^$`),dp("COMPARATORTRIM",`(\\s*)${lp[up.GTLT]}\\s*(${lp[up.LOOSEPLAIN]}|${lp[up.XRANGEPLAIN]})`,!0),rp.comparatorTrimReplace="$1$2$3",dp("HYPHENRANGE",`^\\s*(${lp[up.XRANGEPLAIN]})\\s+-\\s+(${lp[up.XRANGEPLAIN]})\\s*$`),dp("HYPHENRANGELOOSE",`^\\s*(${lp[up.XRANGEPLAINLOOSE]})\\s+-\\s+(${lp[up.XRANGEPLAINLOOSE]})\\s*$`),dp("STAR","(<|>)?=?\\s*\\*"),dp("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),dp("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(re$1,re$1.exports);var reExports=re$1.exports;const opts=["includePrerelease","loose","rtl"],parseOptions$1=_d=>_d?typeof _d!="object"?{loose:!0}:opts.filter(rp=>_d[rp]).reduce((rp,np)=>(rp[np]=!0,rp),{}):{};var parseOptions_1=parseOptions$1;const numeric=/^[0-9]+$/,compareIdentifiers$1=(_d,rp)=>{const np=numeric.test(_d),ap=numeric.test(rp);return np&&ap&&(_d=+_d,rp=+rp),_d===rp?0:np&&!ap?-1:ap&&!np?1:_d<rp?-1:1},rcompareIdentifiers=(_d,rp)=>compareIdentifiers$1(rp,_d);var identifiers={compareIdentifiers:compareIdentifiers$1,rcompareIdentifiers};const debug=debug_1,{MAX_LENGTH,MAX_SAFE_INTEGER}=constants,{re,t}=reExports,parseOptions=parseOptions_1,{compareIdentifiers}=identifiers;let SemVer$2=class Lm{constructor(rp,np){if(np=parseOptions(np),rp instanceof Lm){if(rp.loose===!!np.loose&&rp.includePrerelease===!!np.includePrerelease)return rp;rp=rp.version}else if(typeof rp!="string")throw new TypeError(`Invalid Version: ${rp}`);if(rp.length>MAX_LENGTH)throw new TypeError(`version is longer than ${MAX_LENGTH} characters`);debug("SemVer",rp,np),this.options=np,this.loose=!!np.loose,this.includePrerelease=!!np.includePrerelease;const ap=rp.trim().match(np.loose?re[t.LOOSE]:re[t.FULL]);if(!ap)throw new TypeError(`Invalid Version: ${rp}`);if(this.raw=rp,this.major=+ap[1],this.minor=+ap[2],this.patch=+ap[3],this.major>MAX_SAFE_INTEGER||this.major<0)throw new TypeError("Invalid major version");if(this.minor>MAX_SAFE_INTEGER||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>MAX_SAFE_INTEGER||this.patch<0)throw new TypeError("Invalid patch version");ap[4]?this.prerelease=ap[4].split(".").map(sp=>{if(/^[0-9]+$/.test(sp)){const lp=+sp;if(lp>=0&&lp<MAX_SAFE_INTEGER)return lp}return sp}):this.prerelease=[],this.build=ap[5]?ap[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(rp){if(debug("SemVer.compare",this.version,this.options,rp),!(rp instanceof Lm)){if(typeof rp=="string"&&rp===this.version)return 0;rp=new Lm(rp,this.options)}return rp.version===this.version?0:this.compareMain(rp)||this.comparePre(rp)}compareMain(rp){return rp instanceof Lm||(rp=new Lm(rp,this.options)),compareIdentifiers(this.major,rp.major)||compareIdentifiers(this.minor,rp.minor)||compareIdentifiers(this.patch,rp.patch)}comparePre(rp){if(rp instanceof Lm||(rp=new Lm(rp,this.options)),this.prerelease.length&&!rp.prerelease.length)return-1;if(!this.prerelease.length&&rp.prerelease.length)return 1;if(!this.prerelease.length&&!rp.prerelease.length)return 0;let np=0;do{const ap=this.prerelease[np],sp=rp.prerelease[np];if(debug("prerelease compare",np,ap,sp),ap===void 0&&sp===void 0)return 0;if(sp===void 0)return 1;if(ap===void 0)return-1;if(ap===sp)continue;return compareIdentifiers(ap,sp)}while(++np)}compareBuild(rp){rp instanceof Lm||(rp=new Lm(rp,this.options));let np=0;do{const ap=this.build[np],sp=rp.build[np];if(debug("prerelease compare",np,ap,sp),ap===void 0&&sp===void 0)return 0;if(sp===void 0)return 1;if(ap===void 0)return-1;if(ap===sp)continue;return compareIdentifiers(ap,sp)}while(++np)}inc(rp,np){switch(rp){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",np);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",np);break;case"prepatch":this.prerelease.length=0,this.inc("patch",np),this.inc("pre",np);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",np),this.inc("pre",np);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{let ap=this.prerelease.length;for(;--ap>=0;)typeof this.prerelease[ap]=="number"&&(this.prerelease[ap]++,ap=-2);ap===-1&&this.prerelease.push(0)}np&&(compareIdentifiers(this.prerelease[0],np)===0?isNaN(this.prerelease[1])&&(this.prerelease=[np,0]):this.prerelease=[np,0]);break;default:throw new Error(`invalid increment argument: ${rp}`)}return this.format(),this.raw=this.version,this}};var semver=SemVer$2;const SemVer$1=semver,major=(_d,rp)=>new SemVer$1(_d,rp).major;var major_1=major;const SemVer=semver,minor=(_d,rp)=>new SemVer(_d,rp).minor;var minor_1=minor,hasRequiredSession;function requireSession(){if(hasRequiredSession)return Session;hasRequiredSession=1;var _d=commonjsGlobal&&commonjsGlobal.__extends||function(){var Lp=function(Mp,kp){return Lp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Dp,Fp){Dp.__proto__=Fp}||function(Dp,Fp){for(var Ip in Fp)Object.prototype.hasOwnProperty.call(Fp,Ip)&&(Dp[Ip]=Fp[Ip])},Lp(Mp,kp)};return function(Mp,kp){if(typeof kp!="function"&&kp!==null)throw new TypeError("Class extends value "+String(kp)+" is not a constructor or null");Lp(Mp,kp);function Dp(){this.constructor=Mp}Mp.prototype=kp===null?Object.create(kp):(Dp.prototype=kp.prototype,new Dp)}}(),rp=commonjsGlobal&&commonjsGlobal.__awaiter||function(Lp,Mp,kp,Dp){function Fp(Ip){return Ip instanceof kp?Ip:new kp(function(Pp){Pp(Ip)})}return new(kp||(kp=Promise))(function(Ip,Pp){function Tp(Vp){try{jp(Dp.next(Vp))}catch(zp){Pp(zp)}}function Np(Vp){try{jp(Dp.throw(Vp))}catch(zp){Pp(zp)}}function jp(Vp){Vp.done?Ip(Vp.value):Fp(Vp.value).then(Tp,Np)}jp((Dp=Dp.apply(Lp,Mp||[])).next())})},np=commonjsGlobal&&commonjsGlobal.__generator||function(Lp,Mp){var kp={label:0,sent:function(){if(Ip[0]&1)throw Ip[1];return Ip[1]},trys:[],ops:[]},Dp,Fp,Ip,Pp;return Pp={next:Tp(0),throw:Tp(1),return:Tp(2)},typeof Symbol=="function"&&(Pp[Symbol.iterator]=function(){return this}),Pp;function Tp(jp){return function(Vp){return Np([jp,Vp])}}function Np(jp){if(Dp)throw new TypeError("Generator is already executing.");for(;Pp&&(Pp=0,jp[0]&&(kp=0)),kp;)try{if(Dp=1,Fp&&(Ip=jp[0]&2?Fp.return:jp[0]?Fp.throw||((Ip=Fp.return)&&Ip.call(Fp),0):Fp.next)&&!(Ip=Ip.call(Fp,jp[1])).done)return Ip;switch(Fp=0,Ip&&(jp=[jp[0]&2,Ip.value]),jp[0]){case 0:case 1:Ip=jp;break;case 4:return kp.label++,{value:jp[1],done:!1};case 5:kp.label++,Fp=jp[1],jp=[0];continue;case 7:jp=kp.ops.pop(),kp.trys.pop();continue;default:if(Ip=kp.trys,!(Ip=Ip.length>0&&Ip[Ip.length-1])&&(jp[0]===6||jp[0]===2)){kp=0;continue}if(jp[0]===3&&(!Ip||jp[1]>Ip[0]&&jp[1]<Ip[3])){kp.label=jp[1];break}if(jp[0]===6&&kp.label<Ip[1]){kp.label=Ip[1],Ip=jp;break}if(Ip&&kp.label<Ip[2]){kp.label=Ip[2],kp.ops.push(jp);break}Ip[2]&&kp.ops.pop(),kp.trys.pop();continue}jp=Mp.call(Lp,kp)}catch(Vp){jp=[6,Vp],Fp=0}finally{Dp=Ip=0}if(jp[0]&5)throw jp[1];return{value:jp[0]?jp[1]:void 0,done:!0}}};Object.defineProperty(Session,"__esModule",{value:!0}),Session.Session=void 0;var ap=Connection$1,sp=Filter$1,lp=Subscriber$1,up=EventDispatcher$1,cp=ConnectionEvent$1,dp=FilterEvent$1,fp=RecordingEvent$1,pp=SessionDisconnectedEvent$1,hp=SignalEvent$1,mp=SpeechToTextEvent$1,gp=requireStreamEvent(),vp=StreamPropertyChangedEvent$1,xp=ConnectionPropertyChangedEvent$1,Sp=NetworkQualityLevelChangedEvent$1,yp=OpenViduError,bp=VideoInsertMode,Ep=OpenViduLogger$1,wp=Platform,_p=major_1,Rp=minor_1,$p=ExceptionEvent,Cp=Ep.OpenViduLogger.getInstance(),Ap,Op=function(Lp){_d(Mp,Lp);function Mp(kp){var Dp=Lp.call(this)||this;return Dp.streamManagers=[],Dp.remoteStreamsCreated=new Map,Dp.remoteConnections=new Map,Ap=wp.PlatformUtils.getInstance(),Dp.openvidu=kp,Dp}return Mp.prototype.connect=function(kp,Dp){var Fp=this;return new Promise(function(Ip,Pp){if(Fp.processToken(kp),Fp.openvidu.checkSystemRequirements())Fp.options={sessionId:Fp.sessionId,participantId:kp,metadata:Dp?Fp.stringClientMetadata(Dp):""},Fp.connectAux(kp).then(function(){return Ip()}).catch(function(Tp){return Pp(Tp)});else return Pp(new yp.OpenViduError(yp.OpenViduErrorName.BROWSER_NOT_SUPPORTED,"Browser "+Ap.getName()+" (version "+Ap.getVersion()+") for "+Ap.getFamily()+" is not supported in OpenVidu"))})},Mp.prototype.disconnect=function(){this.leave(!1,"disconnect")},Mp.prototype.subscribe=function(kp,Dp,Fp,Ip){var Pp={};Fp&&typeof Fp!="function"?Pp={insertMode:typeof Fp.insertMode<"u"?typeof Fp.insertMode=="string"?bp.VideoInsertMode[Fp.insertMode]:Pp.insertMode:bp.VideoInsertMode.APPEND,subscribeToAudio:typeof Fp.subscribeToAudio<"u"?Fp.subscribeToAudio:!0,subscribeToVideo:typeof Fp.subscribeToVideo<"u"?Fp.subscribeToVideo:!0}:Pp={insertMode:bp.VideoInsertMode.APPEND,subscribeToAudio:!0,subscribeToVideo:!0};var Tp=void 0;if(Fp&&typeof Fp=="function"?Tp=Fp:Ip&&(Tp=Ip),!this.sessionConnected())throw Tp!==void 0&&Tp(this.notConnectedError()),this.notConnectedError();Cp.info("Subscribing to "+kp.connection.connectionId),kp.subscribe().then(function(){Cp.info("Subscribed correctly to "+kp.connection.connectionId),Tp!==void 0&&Tp(void 0)}).catch(function(jp){Tp!==void 0&&Tp(jp)});var Np=new lp.Subscriber(kp,Dp,Pp);return Np.targetElement&&kp.streamManager.createVideoElement(Np.targetElement,Pp.insertMode),Np},Mp.prototype.subscribeAsync=function(kp,Dp,Fp){var Ip=this;return new Promise(function(Pp,Tp){if(!Ip.sessionConnected())return Tp(Ip.notConnectedError());var Np,jp=function(Vp){return Vp?Tp(Vp):Pp(Np)};Fp?Np=Ip.subscribe(kp,Dp,Fp,jp):Np=Ip.subscribe(kp,Dp,jp)})},Mp.prototype.unsubscribe=function(kp){var Dp=this;return new Promise(function(Fp,Ip){if(Dp.sessionConnected()){var Pp=kp.stream.connection.connectionId;Cp.info("Unsubscribing from "+Pp),Dp.openvidu.sendRequest("unsubscribeFromVideo",{sender:kp.stream.connection.connectionId},function(Tp,Np){return Tp?(Cp.error("Error unsubscribing from "+Pp),Ip(Tp)):(Cp.info("Unsubscribed correctly from "+Pp),kp.stream.streamManager.removeAllVideos(),kp.stream.disposeWebRtcPeer(),kp.stream.disposeMediaStream(),Fp())})}else return Ip(Dp.notConnectedError())})},Mp.prototype.publish=function(kp){var Dp=this;return new Promise(function(Fp,Ip){if(!Dp.sessionConnected())return Ip(Dp.notConnectedError());kp.session=Dp,kp.stream.session=Dp,kp.stream.publishedOnce?kp.initialize().then(function(){Dp.connection.addStream(kp.stream),kp.reestablishStreamPlayingEvent(),kp.stream.publish().then(function(){return Dp.sendVideoData(kp,8,!0,5),Fp()}).catch(function(Pp){return Ip(Pp)})}).catch(function(Pp){return Ip(Pp)}):(Dp.connection.addStream(kp.stream),kp.stream.publish().then(function(){return Dp.sendVideoData(kp,8,!0,5),Fp()}).catch(function(Pp){return Ip(Pp)}))})},Mp.prototype.unpublish=function(kp){var Dp=this;return new Promise(function(Fp,Ip){if(!Dp.sessionConnected())throw Dp.notConnectedError();var Pp=kp.stream;if(Pp.connection){if(Pp.connection!==Dp.connection)return Ip(new Error("The associated Connection object of this Publisher is not your local Connection.  Only moderators can force unpublish on remote Streams via 'forceUnpublish' method"));Cp.info("Unpublishing local media ("+Pp.connection.connectionId+")"),Dp.openvidu.sendRequest("unpublishVideo",function(Tp,Np){if(Tp)return Ip(Tp);Cp.info("Media unpublished correctly"),Pp.disposeWebRtcPeer(),Pp.connection.stream==Pp&&delete Pp.connection.stream;var jp=new gp.StreamEvent(!0,kp,"streamDestroyed",kp.stream,"unpublish");return kp.emitEvent("streamDestroyed",[jp]),jp.callDefaultBehavior(),Fp()})}else return Ip(new Error("The associated Connection object of this Publisher is null"))})},Mp.prototype.forceDisconnect=function(kp){var Dp=this;return new Promise(function(Fp,Ip){if(!Dp.sessionConnected())return Ip(Dp.notConnectedError());Cp.info("Forcing disconnect for connection "+kp.connectionId),Dp.openvidu.sendRequest("forceDisconnect",{connectionId:kp.connectionId},function(Pp,Tp){return Pp?(Cp.error("Error forcing disconnect for Connection "+kp.connectionId,Pp),Pp.code===401?Ip(new yp.OpenViduError(yp.OpenViduErrorName.OPENVIDU_PERMISSION_DENIED,"You don't have permissions to force a disconnection")):Ip(Pp)):(Cp.info("Forcing disconnect correctly for Connection "+kp.connectionId),Fp())})})},Mp.prototype.forceUnpublish=function(kp){var Dp=this;return new Promise(function(Fp,Ip){if(!Dp.sessionConnected())return Ip(Dp.notConnectedError());Cp.info("Forcing unpublish for stream "+kp.streamId),Dp.openvidu.sendRequest("forceUnpublish",{streamId:kp.streamId},function(Pp,Tp){return Pp?(Cp.error("Error forcing unpublish for Stream "+kp.streamId,Pp),Pp.code===401?Ip(new yp.OpenViduError(yp.OpenViduErrorName.OPENVIDU_PERMISSION_DENIED,"You don't have permissions to force an unpublishing")):Ip(Pp)):(Cp.info("Forcing unpublish correctly for Stream "+kp.streamId),Fp())})})},Mp.prototype.signal=function(kp){var Dp=this;return new Promise(function(Fp,Ip){if(!Dp.sessionConnected())return Ip(Dp.notConnectedError());var Pp={};if(kp.to&&kp.to.length>0){var Tp=[];kp.to.forEach(function(jp){jp.connectionId&&Tp.push(jp.connectionId)}),Pp.to=Tp}else Pp.to=[];Pp.data=kp.data?kp.data:"";var Np=kp.type?kp.type:"signal";Np&&Np.substring(0,7)!=="signal:"&&(Np="signal:"+Np),Pp.type=Np,Dp.openvidu.sendRequest("sendMessage",{message:JSON.stringify(Pp)},function(jp,Vp){return jp?Ip(jp):Fp()})})},Mp.prototype.subscribeToSpeechToText=function(kp,Dp){var Fp=this;return new Promise(function(Ip,Pp){Fp.openvidu.sendRequest("subscribeToSpeechToText",{connectionId:kp.connection.connectionId,lang:Dp},function(Tp,Np){return Tp?Pp(Tp):Ip()})})},Mp.prototype.unsubscribeFromSpeechToText=function(kp){var Dp=this;return new Promise(function(Fp,Ip){Dp.openvidu.sendRequest("unsubscribeFromSpeechToText",{connectionId:kp.connection.connectionId},function(Pp,Tp){return Pp?Ip(Pp):Fp()})})},Mp.prototype.on=function(kp,Dp){var Fp,Ip,Pp,Tp;return Lp.prototype.onAux.call(this,kp,"Event '"+kp+"' triggered by 'Session'",Dp),kp==="publisherStartSpeaking"&&(this.remoteConnections.forEach(function(Np){var jp;!((jp=Np.stream)===null||jp===void 0)&&jp.hasAudio&&Np.stream.enableHarkSpeakingEvent()}),!((Ip=(Fp=this.connection)===null||Fp===void 0?void 0:Fp.stream)===null||Ip===void 0)&&Ip.hasAudio&&this.connection.stream.enableHarkSpeakingEvent()),kp==="publisherStopSpeaking"&&(this.remoteConnections.forEach(function(Np){var jp;!((jp=Np.stream)===null||jp===void 0)&&jp.hasAudio&&Np.stream.enableHarkStoppedSpeakingEvent()}),!((Tp=(Pp=this.connection)===null||Pp===void 0?void 0:Pp.stream)===null||Tp===void 0)&&Tp.hasAudio&&this.connection.stream.enableHarkStoppedSpeakingEvent()),this},Mp.prototype.once=function(kp,Dp){var Fp,Ip,Pp,Tp;return Lp.prototype.onceAux.call(this,kp,"Event '"+kp+"' triggered once by 'Session'",Dp),kp==="publisherStartSpeaking"&&(this.remoteConnections.forEach(function(Np){var jp;!((jp=Np.stream)===null||jp===void 0)&&jp.hasAudio&&Np.stream.enableOnceHarkSpeakingEvent()}),!((Ip=(Fp=this.connection)===null||Fp===void 0?void 0:Fp.stream)===null||Ip===void 0)&&Ip.hasAudio&&this.connection.stream.enableOnceHarkSpeakingEvent()),kp==="publisherStopSpeaking"&&(this.remoteConnections.forEach(function(Np){var jp;!((jp=Np.stream)===null||jp===void 0)&&jp.hasAudio&&Np.stream.enableOnceHarkStoppedSpeakingEvent()}),!((Tp=(Pp=this.connection)===null||Pp===void 0?void 0:Pp.stream)===null||Tp===void 0)&&Tp.hasAudio&&this.connection.stream.enableOnceHarkStoppedSpeakingEvent()),this},Mp.prototype.off=function(kp,Dp){var Fp=this,Ip,Pp,Tp,Np;return Lp.prototype.offAux.call(this,kp,Dp),kp==="publisherStartSpeaking"&&(this.anySpeechEventListenerEnabled("publisherStartSpeaking",!1)||(this.remoteConnections.forEach(function(jp){var Vp;!((Vp=jp.stream)===null||Vp===void 0)&&Vp.streamManager&&(Fp.anySpeechEventListenerEnabled("publisherStartSpeaking",!1,jp.stream.streamManager)||jp.stream.disableHarkSpeakingEvent(!1))}),!((Pp=(Ip=this.connection)===null||Ip===void 0?void 0:Ip.stream)===null||Pp===void 0)&&Pp.streamManager&&(this.anySpeechEventListenerEnabled("publisherStartSpeaking",!1,this.connection.stream.streamManager)||this.connection.stream.disableHarkSpeakingEvent(!1)))),kp==="publisherStopSpeaking"&&(this.anySpeechEventListenerEnabled("publisherStopSpeaking",!1)||(this.remoteConnections.forEach(function(jp){var Vp;!((Vp=jp.stream)===null||Vp===void 0)&&Vp.streamManager&&(Fp.anySpeechEventListenerEnabled("publisherStopSpeaking",!1,jp.stream.streamManager)||jp.stream.disableHarkStoppedSpeakingEvent(!1))}),!((Np=(Tp=this.connection)===null||Tp===void 0?void 0:Tp.stream)===null||Np===void 0)&&Np.streamManager&&(this.anySpeechEventListenerEnabled("publisherStopSpeaking",!1,this.connection.stream.streamManager)||this.connection.stream.disableHarkStoppedSpeakingEvent(!1)))),this},Mp.prototype.onParticipantJoined=function(kp){var Dp=this;this.getConnection(kp.id,"").then(function(Fp){Cp.warn("Connection "+Fp.connectionId+" already exists in connections list")}).catch(function(Fp){var Ip=new ap.Connection(Dp,kp);Dp.remoteConnections.set(kp.id,Ip),Dp.ee.emitEvent("connectionCreated",[new cp.ConnectionEvent(!1,Dp,"connectionCreated",Ip,"")])})},Mp.prototype.onParticipantLeft=function(kp){var Dp=this;this.getRemoteConnection(kp.connectionId,"onParticipantLeft").then(function(Fp){if(Fp.stream){var Ip=Fp.stream,Pp=new gp.StreamEvent(!0,Dp,"streamDestroyed",Ip,kp.reason);Dp.ee.emitEvent("streamDestroyed",[Pp]),Pp.callDefaultBehavior(),Dp.remoteStreamsCreated.delete(Ip.streamId)}Fp.dispose(),Dp.remoteConnections.delete(Fp.connectionId),Dp.ee.emitEvent("connectionDestroyed",[new cp.ConnectionEvent(!1,Dp,"connectionDestroyed",Fp,kp.reason)])}).catch(function(Fp){Cp.error(Fp)})},Mp.prototype.onParticipantPublished=function(kp){var Dp=this,Fp=function(Pp){Dp.remoteConnections.set(Pp.connectionId,Pp),Dp.remoteStreamsCreated.get(Pp.stream.streamId)||Dp.ee.emitEvent("streamCreated",[new gp.StreamEvent(!1,Dp,"streamCreated",Pp.stream,"")]),Dp.remoteStreamsCreated.set(Pp.stream.streamId,!0)},Ip;this.getRemoteConnection(kp.id,"onParticipantPublished").then(function(Pp){Ip=Pp,kp.metadata=Pp.data,Ip.remoteOptions=kp,Ip.initRemoteStreams(kp.streams),Fp(Ip)}).catch(function(Pp){Ip=new ap.Connection(Dp,kp),Fp(Ip)})},Mp.prototype.onParticipantUnpublished=function(kp){var Dp=this;kp.connectionId===this.connection.connectionId?this.stopPublisherStream(kp.reason):this.getRemoteConnection(kp.connectionId,"onParticipantUnpublished").then(function(Fp){var Ip=new gp.StreamEvent(!0,Dp,"streamDestroyed",Fp.stream,kp.reason);if(Dp.ee.emitEvent("streamDestroyed",[Ip]),Ip.callDefaultBehavior(),Fp.stream!=null){var Pp=Fp.stream.streamId;Dp.remoteStreamsCreated.delete(Pp),Fp.removeStream()}}).catch(function(Fp){Cp.error(Fp)})},Mp.prototype.onParticipantEvicted=function(kp){kp.connectionId===this.connection.connectionId&&this.sessionId&&!this.connection.disposed&&this.leave(!0,kp.reason)},Mp.prototype.onNewMessage=function(kp){var Dp=this;Cp.info("New signal: "+JSON.stringify(kp));var Fp=kp.type?kp.type.replace(/^(signal:)/,""):void 0;kp.from?this.getConnection(kp.from,"Connection '"+kp.from+"' unknown when 'onNewMessage'. Existing remote connections: "+JSON.stringify(this.remoteConnections.keys())+". Existing local connection: "+this.connection.connectionId).then(function(Ip){Dp.ee.emitEvent("signal",[new hp.SignalEvent(Dp,Fp,kp.data,Ip)]),kp.type&&kp.type!=="signal"&&Dp.ee.emitEvent(kp.type,[new hp.SignalEvent(Dp,Fp,kp.data,Ip)])}).catch(function(Ip){Cp.error(Ip)}):(this.ee.emitEvent("signal",[new hp.SignalEvent(this,Fp,kp.data,void 0)]),kp.type&&kp.type!=="signal"&&this.ee.emitEvent(kp.type,[new hp.SignalEvent(this,Fp,kp.data,void 0)]))},Mp.prototype.onStreamPropertyChanged=function(kp){var Dp=this,Fp=function(Ip){var Pp,Tp;if(Ip.stream&&Ip.stream.streamId===kp.streamId){var Np=Ip.stream,jp=void 0;switch(kp.property){case"audioActive":jp=Np.audioActive,kp.newValue=kp.newValue==="true",Np.audioActive=kp.newValue;break;case"videoActive":jp=Np.videoActive,kp.newValue=kp.newValue==="true",Np.videoActive=kp.newValue;var Vp=(Tp=(Pp=Np==null?void 0:Np.getMediaStream())===null||Pp===void 0?void 0:Pp.getVideoTracks())===null||Tp===void 0?void 0:Tp[0];Vp&&!Vp.enabled&&Np.videoActive&&(Vp.enabled=!0);break;case"videoTrack":kp.newValue=JSON.parse(kp.newValue);break;case"audioTrack":kp.newValue=JSON.parse(kp.newValue);break;case"videoDimensions":jp=Np.videoDimensions,kp.newValue=JSON.parse(JSON.parse(kp.newValue)),Np.videoDimensions=kp.newValue;break;case"filter":jp=Np.filter,kp.newValue=Object.keys(kp.newValue).length>0?kp.newValue:void 0,kp.newValue!==void 0?(Np.filter=new sp.Filter(kp.newValue.type,kp.newValue.options),Np.filter.stream=Np,kp.newValue.lastExecMethod&&(Np.filter.lastExecMethod=kp.newValue.lastExecMethod)):delete Np.filter,kp.newValue=Np.filter;break}Dp.ee.emitEvent("streamPropertyChanged",[new vp.StreamPropertyChangedEvent(Dp,Np,kp.property,kp.newValue,jp,kp.reason)]),Np.streamManager&&Np.streamManager.emitEvent("streamPropertyChanged",[new vp.StreamPropertyChangedEvent(Np.streamManager,Np,kp.property,kp.newValue,jp,kp.reason)])}else Cp.error("No stream with streamId '"+kp.streamId+"' found for connection '"+kp.connectionId+"' on 'streamPropertyChanged' event")};kp.connectionId===this.connection.connectionId?Fp(this.connection):this.getRemoteConnection(kp.connectionId,"onStreamPropertyChanged").then(function(Ip){Fp(Ip)}).catch(function(Ip){Cp.error(Ip)})},Mp.prototype.onConnectionPropertyChanged=function(kp){var Dp;switch(kp.property){case"role":Dp=this.connection.role.slice(),this.connection.role=kp.newValue,this.connection.localOptions.role=kp.newValue;break;case"record":Dp=this.connection.record,kp.newValue=kp.newValue==="true",this.connection.record=kp.newValue,this.connection.localOptions.record=kp.newValue;break}this.ee.emitEvent("connectionPropertyChanged",[new xp.ConnectionPropertyChangedEvent(this,this.connection,kp.property,kp.newValue,Dp)])},Mp.prototype.onNetworkQualityLevelChangedChanged=function(kp){var Dp=this;kp.connectionId===this.connection.connectionId?this.ee.emitEvent("networkQualityLevelChanged",[new Sp.NetworkQualityLevelChangedEvent(this,kp.newValue,kp.oldValue,this.connection)]):this.getConnection(kp.connectionId,"Connection not found for connectionId "+kp.connectionId).then(function(Fp){Dp.ee.emitEvent("networkQualityLevelChanged",[new Sp.NetworkQualityLevelChangedEvent(Dp,kp.newValue,kp.oldValue,Fp)])}).catch(function(Fp){Cp.error(Fp)})},Mp.prototype.recvIceCandidate=function(kp){var Dp={candidate:kp.candidate,sdpMLineIndex:kp.sdpMLineIndex,sdpMid:kp.sdpMid},Fp=new RTCIceCandidate(Dp);this.getConnection(kp.senderConnectionId,"Connection not found for connectionId "+kp.senderConnectionId+" owning endpoint "+kp.endpointName+". Ice candidate will be ignored: "+Fp).then(function(Ip){var Pp=Ip.stream;Pp.getWebRtcPeer().addIceCandidate(Fp).catch(function(Tp){Cp.error("Error adding candidate for "+Pp.streamId+" stream of endpoint "+kp.endpointName+": "+Tp)})}).catch(function(Ip){Cp.error(Ip)})},Mp.prototype.onSessionClosed=function(kp){Cp.info("Session closed: "+JSON.stringify(kp));var Dp=kp.sessionId;Dp!==void 0?this.ee.emitEvent("session-closed",[{session:Dp}]):Cp.warn("Session undefined on session closed",kp)},Mp.prototype.onLostConnection=function(kp){Cp.warn("Lost connection in Session "+this.sessionId),this.sessionId&&this.connection&&!this.connection.disposed&&this.leave(!0,kp)},Mp.prototype.onRecoveredConnection=function(){Cp.info("Recovered connection in Session "+this.sessionId),this.reconnectBrokenStreams(),this.ee.emitEvent("reconnected",[])},Mp.prototype.onMediaError=function(kp){Cp.error("Media error: "+JSON.stringify(kp));var Dp=kp.error;Dp?this.ee.emitEvent("error-media",[{error:Dp}]):Cp.warn("Received undefined media error:",kp)},Mp.prototype.onRecordingStarted=function(kp){this.ee.emitEvent("recordingStarted",[new fp.RecordingEvent(this,"recordingStarted",kp.id,kp.name)])},Mp.prototype.onRecordingStopped=function(kp){this.ee.emitEvent("recordingStopped",[new fp.RecordingEvent(this,"recordingStopped",kp.id,kp.name,kp.reason)])},Mp.prototype.onBroadcastStarted=function(){this.ee.emitEvent("broadcastStarted",[])},Mp.prototype.onBroadcastStopped=function(){this.ee.emitEvent("broadcastStopped",[])},Mp.prototype.onFilterEventDispatched=function(kp){var Dp=this,Fp=kp.connectionId;this.getConnection(Fp,"No connection found for connectionId "+Fp).then(function(Ip){Cp.info('Filter event of type "'.concat(kp.eventType,'" dispatched'));var Pp=Ip.stream;if(!Pp||!Pp.filter)return Cp.error('Filter event of type "'.concat(kp.eventType,'" dispatched for stream ').concat(Pp.streamId," but there is no ").concat(Pp?"filter":"stream"," defined"));var Tp=Pp.filter.handlers.get(kp.eventType);if(!Tp||typeof Tp!="function"){var Np=Array.from(Pp.filter.handlers.keys());return Cp.error('Filter event of type "'.concat(kp.eventType,'" not handled or not a function! Active filter events: ').concat(Np.join(",")))}else Tp.call(Dp,new dp.FilterEvent(Pp.filter,kp.eventType,kp.data))})},Mp.prototype.onForciblyReconnectSubscriber=function(kp){var Dp=this;return new Promise(function(Fp,Ip){Dp.getRemoteConnection(kp.connectionId,"onForciblyReconnectSubscriber").then(function(Pp){if(Pp.stream&&Pp.stream.streamId===kp.streamId){var Tp=Pp.stream;if(Tp.setupReconnectionEventEmitter(Fp,Ip)){if(Tp.reconnectionEventEmitter.onForciblyReconnectSubscriberLastEvent!=null)return Tp.reconnectionEventEmitter.onForciblyReconnectSubscriberLastEvent=kp,Ip("Ongoing forced subscriber reconnection");Tp.reconnectionEventEmitter.onForciblyReconnectSubscriberLastEvent=kp;var Np=function(){var Vp=Tp.reconnectionEventEmitter.onForciblyReconnectSubscriberLastEvent;delete Tp.reconnectionEventEmitter.onForciblyReconnectSubscriberLastEvent,Dp.onForciblyReconnectSubscriber(Vp)};Tp.reconnectionEventEmitter.once("success",function(){Np()}),Tp.reconnectionEventEmitter.once("error",function(){Np()});return}Tp.completeWebRtcPeerReceive(!0,!0,kp.sdpOffer).then(function(){return Tp.finalResolveForSubscription(!0,Fp)}).catch(function(Vp){return Tp.finalRejectForSubscription(!0,"Error while forcibly reconnecting remote stream ".concat(kp.streamId,": ").concat(Vp.toString()),Ip)})}else{var jp="No stream with streamId '"+kp.streamId+"' found for connection '"+kp.connectionId+"' on 'streamPropertyChanged' event";return Cp.error(jp),Ip(jp)}}).catch(function(Pp){return Cp.error(Pp),Ip(Pp)})})},Mp.prototype.reconnectBrokenStreams=function(){Cp.info("Re-establishing media connections...");var kp=!1;this.connection.stream&&this.connection.stream.streamIceConnectionStateBroken()&&(Cp.warn("Re-establishing Publisher "+this.connection.stream.streamId),this.connection.stream.initWebRtcPeerSend(!0),kp=!0),this.remoteConnections.forEach(function(Dp){Dp.stream&&Dp.stream.streamIceConnectionStateBroken()&&(Cp.warn("Re-establishing Subscriber "+Dp.stream.streamId),Dp.stream.initWebRtcPeerReceive(!0),kp=!0)}),kp||Cp.info("There were no media streams in need of a reconnection")},Mp.prototype.onSpeechToTextMessage=function(kp){return rp(this,void 0,void 0,function(){var Dp,Fp;return np(this,function(Ip){switch(Ip.label){case 0:return[4,this.getConnection(kp.connectionId,"No connection found for connectionId "+kp.connectionId)];case 1:return Dp=Ip.sent(),Fp=new mp.SpeechToTextEvent(this,Dp,kp.text,kp.reason.toLowerCase(),kp.raw,kp.lang),this.ee.emitEvent("speechToTextMessage",[Fp]),[2]}})})},Mp.prototype.onSpeechToTextDisconnected=function(kp){return rp(this,void 0,void 0,function(){return np(this,function(Dp){return this.emitEvent("exception",[new $p.ExceptionEvent(this,$p.ExceptionEventName.SPEECH_TO_TEXT_DISCONNECTED,this,kp.message)]),[2]})})},Mp.prototype.emitEvent=function(kp,Dp){this.ee.emitEvent(kp,Dp)},Mp.prototype.leave=function(kp,Dp){var Fp=this;if(kp=!!kp,Cp.info("Leaving Session (forced="+kp+")"),this.stopVideoDataIntervals(),this.connection){if(!this.connection.disposed&&!kp?this.openvidu.sendRequest("leaveRoom",function(Pp,Tp){Pp&&Cp.error("leaveRoom error: ".concat(JSON.stringify(Pp))),Fp.openvidu.closeWs()}):this.openvidu.closeWs(),this.stopPublisherStream(Dp),!this.connection.disposed){var Ip=new pp.SessionDisconnectedEvent(this,Dp);this.ee.emitEvent("sessionDisconnected",[Ip]),Ip.callDefaultBehavior()}}else Cp.warn("You were not connected to the session "+this.sessionId);Cp.flush()},Mp.prototype.initializeParams=function(kp){var Dp={token:kp||"",session:this.sessionId,platform:Ap.getDescription()?Ap.getDescription():"unknown",sdkVersion:this.openvidu.libraryVersion,metadata:this.options.metadata?this.options.metadata:"",secret:this.openvidu.getSecret(),recorder:this.openvidu.getRecorder(),stt:this.openvidu.getStt()};return Dp},Mp.prototype.sendVideoData=function(kp,Dp,Fp,Ip){var Pp=this,Tp,Np;if(Dp===void 0&&(Dp=1),Fp===void 0&&(Fp=!1),Ip===void 0&&(Ip=1),Ap.isChromeBrowser()||Ap.isChromeMobileBrowser()||Ap.isOperaBrowser()||Ap.isOperaMobileBrowser()||Ap.isEdgeBrowser()||Ap.isEdgeMobileBrowser()||Ap.isElectron()||Ap.isSafariBrowser()&&!Ap.isIonicIos()||Ap.isAndroidBrowser()||Ap.isSamsungBrowser()||Ap.isIonicAndroid()||Ap.isIOSWithSafari()){var jp=function(){return rp(Pp,void 0,void 0,function(){var zp,Wp,Up;return np(this,function(qp){switch(qp.label){case 0:return zp=kp.stream.getRTCPeerConnection(),zp.connectionState!=="connected"?[3,2]:[4,zp.getStats()];case 1:Wp=qp.sent(),Up=[],Wp.forEach(function(Bp){"frameWidth"in Bp&&"frameHeight"in Bp&&Up.length===0&&Up.push(Bp)}),Up.length>0&&this.openvidu.sendRequest("videoData",{height:Up[0].frameHeight,width:Up[0].frameWidth,videoActive:kp.stream.videoActive!=null?kp.stream.videoActive:!1,audioActive:kp.stream.audioActive!=null?kp.stream.audioActive:!1},function(Bp,Yp){Bp&&Cp.error("Error sending 'videoData' event",Bp)}),qp.label=2;case 2:return[2]}})})};if(Fp){var Vp=1;this.videoDataInterval=setInterval(function(){Vp<Ip?(Vp++,jp()):clearInterval(Pp.videoDataInterval)},Dp*1e3)}else this.videoDataTimeout=setTimeout(jp,Dp*1e3)}else Ap.isFirefoxBrowser()||Ap.isFirefoxMobileBrowser()||Ap.isIonicIos()||Ap.isReactNative()?this.openvidu.sendRequest("videoData",{height:((Tp=kp.stream.videoDimensions)===null||Tp===void 0?void 0:Tp.height)||0,width:((Np=kp.stream.videoDimensions)===null||Np===void 0?void 0:Np.width)||0,videoActive:kp.stream.videoActive!=null?kp.stream.videoActive:!1,audioActive:kp.stream.audioActive!=null?kp.stream.audioActive:!1},function(zp,Wp){zp&&Cp.error("Error sending 'videoData' event",zp)}):Cp.error("Browser "+Ap.getName()+" (version "+Ap.getVersion()+") for "+Ap.getFamily()+" is not supported in OpenVidu for Network Quality")},Mp.prototype.sessionConnected=function(){return this.connection!=null},Mp.prototype.notConnectedError=function(){return new yp.OpenViduError(yp.OpenViduErrorName.OPENVIDU_NOT_CONNECTED,"There is no connection to the session. Method 'Session.connect' must be successfully completed first")},Mp.prototype.anySpeechEventListenerEnabled=function(kp,Dp,Fp){var Ip=this.ee.getListeners(kp);Dp&&(Ip=Ip.filter(function(jp){return jp.once}));var Pp=Ip.length;if(Pp>0)return!0;var Tp=0;if(Fp){var Np=Fp.ee.getListeners(kp);Dp&&(Np=Np.filter(function(jp){return jp.once})),Tp=Np.length}return Tp>0},Mp.prototype.getTokenParams=function(kp){var Dp=kp.match(/^(wss?)\:\/\/(([^:\/?#]*)(?:\:([0-9]+))?)([\/]{0,1}[^?#]*)(\?[^#]*|)(#.*|)$/);if(Dp){var Fp={protocol:Dp[1],host:Dp[2],hostname:Dp[3],port:Dp[4],pathname:Dp[5],search:Dp[6],hash:Dp[7]},Ip=kp.split("?"),Pp=decodeURI(Ip[1]).split("&").map(function(Tp){return Tp.split("=")}).reduce(function(Tp,Np){var jp=Np[0],Vp=Np[1];return Tp[jp]=Vp,Tp},{});return{sessionId:Pp.sessionId,secret:Pp.secret,recorder:Pp.recorder,stt:Pp.stt,webrtcStatsInterval:Pp.webrtcStatsInterval,sendBrowserLogs:Pp.sendBrowserLogs,edition:Pp.edition,wsUri:Fp.protocol+"://"+Fp.host+"/openvidu",httpUri:"https://"+Fp.host}}else throw new Error('Token not valid: "'.concat(kp,'"'))},Mp.prototype.connectAux=function(kp){var Dp=this;return new Promise(function(Fp,Ip){Dp.openvidu.startWs(function(Pp){if(Pp)return Ip(Pp);var Tp=Dp.initializeParams(kp);Dp.openvidu.sendRequest("joinRoom",Tp,function(Np,jp){if(Np)return Ip(Np);Dp.processJoinRoomResponse(jp,kp),Dp.connection=new ap.Connection(Dp,jp);var Vp={connections:new Array,streams:new Array},zp=jp.value;return zp.forEach(function(Wp){var Up=new ap.Connection(Dp,Wp);Dp.remoteConnections.set(Up.connectionId,Up),Vp.connections.push(Up),Up.stream&&(Dp.remoteStreamsCreated.set(Up.stream.streamId,!0),Vp.streams.push(Up.stream))}),Dp.ee.emitEvent("connectionCreated",[new cp.ConnectionEvent(!1,Dp,"connectionCreated",Dp.connection,"")]),Vp.connections.forEach(function(Wp){Dp.ee.emitEvent("connectionCreated",[new cp.ConnectionEvent(!1,Dp,"connectionCreated",Wp,"")])}),Vp.streams.forEach(function(Wp){Dp.ee.emitEvent("streamCreated",[new gp.StreamEvent(!1,Dp,"streamCreated",Wp,"")])}),jp.recordingId&&jp.recordingName&&Dp.ee.emitEvent("recordingStarted",[new fp.RecordingEvent(Dp,"recordingStarted",jp.recordingId,jp.recordingName)]),Fp()})})})},Mp.prototype.stopPublisherStream=function(kp){this.connection.stream&&(this.connection.stream.disposeWebRtcPeer(),this.connection.stream.isLocalStreamPublished&&this.connection.stream.ee.emitEvent("local-stream-destroyed",[kp]))},Mp.prototype.stopVideoDataIntervals=function(){clearInterval(this.videoDataInterval),clearTimeout(this.videoDataTimeout)},Mp.prototype.stringClientMetadata=function(kp){return typeof kp!="string"?JSON.stringify(kp):kp},Mp.prototype.getConnection=function(kp,Dp){var Fp=this;return new Promise(function(Ip,Pp){var Tp=Fp.remoteConnections.get(kp);return Tp?Ip(Tp):Fp.connection.connectionId===kp?Ip(Fp.connection):Pp(new yp.OpenViduError(yp.OpenViduErrorName.GENERIC_ERROR,Dp))})},Mp.prototype.getRemoteConnection=function(kp,Dp){var Fp=this;return new Promise(function(Ip,Pp){var Tp=Fp.remoteConnections.get(kp);if(Tp)return Ip(Tp);var Np="Remote connection "+kp+" unknown when '"+Dp+"'. Existing remote connections: "+JSON.stringify(Fp.remoteConnections.keys());return Pp(new yp.OpenViduError(yp.OpenViduErrorName.GENERIC_ERROR,Np))})},Mp.prototype.processToken=function(kp){var Dp=this.getTokenParams(kp);this.sessionId=Dp.sessionId,Dp.secret&&(this.openvidu.secret=Dp.secret),Dp.recorder&&(this.openvidu.recorder=!0),Dp.stt&&(this.openvidu.stt=!0),Dp.webrtcStatsInterval&&(this.openvidu.webrtcStatsInterval=Dp.webrtcStatsInterval),Dp.sendBrowserLogs&&(this.openvidu.sendBrowserLogs=Dp.sendBrowserLogs),this.openvidu.isAtLeastPro=Dp.edition==="pro"||Dp.edition==="enterprise",this.openvidu.isEnterprise=Dp.edition==="enterprise",this.openvidu.wsUri=Dp.wsUri,this.openvidu.httpUri=Dp.httpUri},Mp.prototype.processJoinRoomResponse=function(kp,Dp){if(this.sessionId=kp.session,kp.customIceServers!=null&&kp.customIceServers.length>0){this.openvidu.iceServers=[];for(var Fp=0,Ip=kp.customIceServers;Fp<Ip.length;Fp++){var Pp=Ip[Fp],Tp={urls:[Pp.url]};Cp.log("STUN/TURN server IP: "+Pp.url),Pp.username!=null&&Pp.credential!=null&&(Tp.username=Pp.username,Tp.credential=Pp.credential,Cp.log("TURN credentials ["+Pp.username+":"+Pp.credential+"]")),this.openvidu.iceServers.push(Tp)}}this.openvidu.role=kp.role,this.openvidu.finalUserId=kp.finalUserId,this.openvidu.mediaServer=kp.mediaServer,this.openvidu.videoSimulcast=kp.videoSimulcast,this.capabilities={subscribe:!0,publish:this.openvidu.role!=="SUBSCRIBER",forceUnpublish:this.openvidu.role==="MODERATOR",forceDisconnect:this.openvidu.role==="MODERATOR"},Cp.info("openvidu-server version: "+kp.version),kp.life!=null&&(this.openvidu.life=kp.life);var Np=Rp(kp.version)-Rp(this.openvidu.libraryVersion);_p(kp.version)!==_p(this.openvidu.libraryVersion)||!(Np==0||Np==1)?Cp.error("openvidu-browser (".concat(this.openvidu.libraryVersion,") and openvidu-server (").concat(kp.version,") versions are incompatible. ")+"Errors are likely to occur. openvidu-browser SDK is only compatible with the same version or the immediately following minor version of an OpenVidu deployment"):Np==1&&Cp.warn("openvidu-browser version ".concat(this.openvidu.libraryVersion," does not match openvidu-server version ").concat(kp.version,". ")+"These versions are still compatible with each other, but openvidu-browser version must be updated as soon as possible to ".concat(_p(kp.version),".").concat(Rp(kp.version),".x. ")+"This client using openvidu-browser ".concat(this.openvidu.libraryVersion," will become incompatible with the next release of openvidu-server")),Ep.OpenViduLogger.configureJSNLog(this.openvidu,Dp),this.token=Dp},Mp}(up.EventDispatcher);return Session.Session=Op,Session}var hasRequiredPublisher;function requirePublisher(){if(hasRequiredPublisher)return Publisher;hasRequiredPublisher=1;var _d=commonjsGlobal&&commonjsGlobal.__extends||function(){var xp=function(Sp,yp){return xp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(bp,Ep){bp.__proto__=Ep}||function(bp,Ep){for(var wp in Ep)Object.prototype.hasOwnProperty.call(Ep,wp)&&(bp[wp]=Ep[wp])},xp(Sp,yp)};return function(Sp,yp){if(typeof yp!="function"&&yp!==null)throw new TypeError("Class extends value "+String(yp)+" is not a constructor or null");xp(Sp,yp);function bp(){this.constructor=Sp}Sp.prototype=yp===null?Object.create(yp):(bp.prototype=yp.prototype,new bp)}}(),rp=commonjsGlobal&&commonjsGlobal.__awaiter||function(xp,Sp,yp,bp){function Ep(wp){return wp instanceof yp?wp:new yp(function(_p){_p(wp)})}return new(yp||(yp=Promise))(function(wp,_p){function Rp(Ap){try{Cp(bp.next(Ap))}catch(Op){_p(Op)}}function $p(Ap){try{Cp(bp.throw(Ap))}catch(Op){_p(Op)}}function Cp(Ap){Ap.done?wp(Ap.value):Ep(Ap.value).then(Rp,$p)}Cp((bp=bp.apply(xp,Sp||[])).next())})},np=commonjsGlobal&&commonjsGlobal.__generator||function(xp,Sp){var yp={label:0,sent:function(){if(wp[0]&1)throw wp[1];return wp[1]},trys:[],ops:[]},bp,Ep,wp,_p;return _p={next:Rp(0),throw:Rp(1),return:Rp(2)},typeof Symbol=="function"&&(_p[Symbol.iterator]=function(){return this}),_p;function Rp(Cp){return function(Ap){return $p([Cp,Ap])}}function $p(Cp){if(bp)throw new TypeError("Generator is already executing.");for(;_p&&(_p=0,Cp[0]&&(yp=0)),yp;)try{if(bp=1,Ep&&(wp=Cp[0]&2?Ep.return:Cp[0]?Ep.throw||((wp=Ep.return)&&wp.call(Ep),0):Ep.next)&&!(wp=wp.call(Ep,Cp[1])).done)return wp;switch(Ep=0,wp&&(Cp=[Cp[0]&2,wp.value]),Cp[0]){case 0:case 1:wp=Cp;break;case 4:return yp.label++,{value:Cp[1],done:!1};case 5:yp.label++,Ep=Cp[1],Cp=[0];continue;case 7:Cp=yp.ops.pop(),yp.trys.pop();continue;default:if(wp=yp.trys,!(wp=wp.length>0&&wp[wp.length-1])&&(Cp[0]===6||Cp[0]===2)){yp=0;continue}if(Cp[0]===3&&(!wp||Cp[1]>wp[0]&&Cp[1]<wp[3])){yp.label=Cp[1];break}if(Cp[0]===6&&yp.label<wp[1]){yp.label=wp[1],wp=Cp;break}if(wp&&yp.label<wp[2]){yp.label=wp[2],yp.ops.push(Cp);break}wp[2]&&yp.ops.pop(),yp.trys.pop();continue}Cp=Sp.call(xp,yp)}catch(Ap){Cp=[6,Ap],Ep=0}finally{bp=wp=0}if(Cp[0]&5)throw Cp[1];return{value:Cp[0]?Cp[1]:void 0,done:!0}}};Object.defineProperty(Publisher,"__esModule",{value:!0}),Publisher.Publisher=void 0;var ap=requireSession(),sp=Stream$1,lp=StreamManager$1,up=requireStreamEvent(),cp=StreamPropertyChangedEvent$1,dp=OpenViduError,fp=OpenViduLogger$1,pp=Platform,hp=TypeOfVideo,mp=fp.OpenViduLogger.getInstance(),gp,vp=function(xp){_d(Sp,xp);function Sp(yp,bp,Ep){var wp=xp.call(this,new sp.Stream(Ep.session?Ep.session:new ap.Session(Ep),{publisherProperties:bp,mediaConstraints:{}}),yp)||this;return wp.accessAllowed=!1,wp.isSubscribedToRemote=!1,wp.accessDenied=!1,gp=pp.PlatformUtils.getInstance(),wp.properties=bp,wp.openvidu=Ep,wp.stream.ee.on("local-stream-destroyed",function(_p){wp.stream.isLocalStreamPublished=!1;var Rp=new up.StreamEvent(!0,wp,"streamDestroyed",wp.stream,_p);wp.emitEvent("streamDestroyed",[Rp]),Rp.callDefaultBehavior()}),wp}return Sp.prototype.publishAudio=function(yp){var bp=this;if(this.stream.audioActive!==yp){var Ep=this.stream.displayMyRemote()?this.stream.localMediaStreamWhenSubscribedToRemote:this.stream.getMediaStream();Ep.getAudioTracks().forEach(function(wp){wp.enabled=yp}),this.session&&this.stream.streamId&&this.session.openvidu.sendRequest("streamPropertyChanged",{streamId:this.stream.streamId,property:"audioActive",newValue:yp,reason:"publishAudio"},function(wp,_p){wp?mp.error("Error sending 'streamPropertyChanged' event",wp):(bp.session.emitEvent("streamPropertyChanged",[new cp.StreamPropertyChangedEvent(bp.session,bp.stream,"audioActive",yp,!yp,"publishAudio")]),bp.emitEvent("streamPropertyChanged",[new cp.StreamPropertyChangedEvent(bp,bp.stream,"audioActive",yp,!yp,"publishAudio")]),bp.session.sendVideoData(bp.stream.streamManager))}),this.stream.audioActive=yp,mp.info("'Publisher' has "+(yp?"published":"unpublished")+" its audio stream")}},Sp.prototype.publishVideo=function(yp,bp){var Ep=this;return new Promise(function(wp,_p){return rp(Ep,void 0,void 0,function(){var Rp,$p,Cp,Ap,Op,Lp,Mp=this;return np(this,function(kp){switch(kp.label){case 0:return this.stream.videoActive===yp?[3,9]:(Rp=this.stream.displayMyRemote()?this.stream.localMediaStreamWhenSubscribedToRemote:this.stream.getMediaStream(),$p=!1,Rp.getVideoTracks().forEach(function(Dp){Dp.enabled=yp,!yp&&bp===!0?Dp.stop():yp&&Dp.readyState==="ended"&&($p=!0)}),!yp&&bp===!0&&this.stream.filter&&this.stream.filter.type.startsWith("VB:")?(this.stream.lastVBFilter=this.stream.filter,[4,this.stream.removeFilterAux(!0)]):[3,2]);case 1:kp.sent(),kp.label=2;case 2:return $p?(Cp=Rp.getVideoTracks()[0],Rp.removeTrack(Cp),Ap=function(Dp){return rp(Mp,void 0,void 0,function(){var Fp=this;return np(this,function(Ip){switch(Ip.label){case 0:return Rp.addTrack(Dp),this.stream.isLocalStreamPublished?[4,this.replaceTrackInRtcRtpSender(Dp)]:[3,2];case 1:Ip.sent(),Ip.label=2;case 2:return this.stream.lastVBFilter&&setTimeout(function(){return rp(Fp,void 0,void 0,function(){var Pp,Tp;return np(this,function(Np){switch(Np.label){case 0:return Pp=this.stream.lastVBFilter.options,Tp=this.stream.lastVBFilter.lastExecMethod,Tp&&Tp.method==="update"&&(Pp=Object.assign({},Pp,Tp.params)),[4,this.stream.applyFilter(this.stream.lastVBFilter.type,Pp)];case 1:return Np.sent(),delete this.stream.lastVBFilter,[2]}})})},1),[2]}})})},bp&&bp instanceof MediaStreamTrack?[4,Ap(bp)]:[3,4]):[3,8];case 3:return kp.sent(),[3,8];case 4:return kp.trys.push([4,7,,8]),[4,navigator.mediaDevices.getUserMedia({audio:!1,video:this.stream.lastVideoTrackConstraints})];case 5:return Op=kp.sent(),[4,Ap(Op.getVideoTracks()[0])];case 6:return kp.sent(),[3,8];case 7:return Lp=kp.sent(),[2,_p(Lp)];case 8:return this.session&&this.stream.streamId&&this.session.openvidu.sendRequest("streamPropertyChanged",{streamId:this.stream.streamId,property:"videoActive",newValue:yp,reason:"publishVideo"},function(Dp,Fp){Dp?mp.error("Error sending 'streamPropertyChanged' event",Dp):(Mp.session.emitEvent("streamPropertyChanged",[new cp.StreamPropertyChangedEvent(Mp.session,Mp.stream,"videoActive",yp,!yp,"publishVideo")]),Mp.emitEvent("streamPropertyChanged",[new cp.StreamPropertyChangedEvent(Mp,Mp.stream,"videoActive",yp,!yp,"publishVideo")]),Mp.session.sendVideoData(Mp.stream.streamManager))}),this.stream.videoActive=yp,mp.info("'Publisher' has "+(yp?"published":"unpublished")+" its video stream"),[2,wp()];case 9:return[2]}})})})},Sp.prototype.subscribeToRemote=function(yp){yp=yp!==void 0?yp:!0,this.isSubscribedToRemote=yp,this.stream.subscribeToMyRemote(yp)},Sp.prototype.on=function(yp,bp){var Ep=this;return xp.prototype.on.call(this,yp,bp),yp==="streamCreated"&&(this.stream&&this.stream.isLocalStreamPublished?this.emitEvent("streamCreated",[new up.StreamEvent(!1,this,"streamCreated",this.stream,"")]):this.stream.ee.on("stream-created-by-publisher",function(){Ep.emitEvent("streamCreated",[new up.StreamEvent(!1,Ep,"streamCreated",Ep.stream,"")])})),yp==="accessAllowed"&&this.accessAllowed&&this.emitEvent("accessAllowed",[]),yp==="accessDenied"&&this.accessDenied&&this.emitEvent("accessDenied",[]),this},Sp.prototype.once=function(yp,bp){var Ep=this;return xp.prototype.once.call(this,yp,bp),yp==="streamCreated"&&(this.stream&&this.stream.isLocalStreamPublished?this.emitEvent("streamCreated",[new up.StreamEvent(!1,this,"streamCreated",this.stream,"")]):this.stream.ee.once("stream-created-by-publisher",function(){Ep.emitEvent("streamCreated",[new up.StreamEvent(!1,Ep,"streamCreated",Ep.stream,"")])})),yp==="accessAllowed"&&this.accessAllowed&&this.emitEvent("accessAllowed",[]),yp==="accessDenied"&&this.accessDenied&&this.emitEvent("accessDenied",[]),this},Sp.prototype.off=function(yp,bp){return xp.prototype.off.call(this,yp,bp),this},Sp.prototype.replaceTrack=function(yp){return rp(this,void 0,void 0,function(){return np(this,function(bp){return[2,this.replaceTrackAux(yp,!0)]})})},Sp.prototype.initialize=function(){var yp=this;return new Promise(function(bp,Ep){return rp(yp,void 0,void 0,function(){var wp,_p,Rp,$p,Cp,Ap,Op,Lp,Mp,kp,Dp,Fp,Fp,Ip,Pp,Tp=this,Np,jp;return np(this,function(Vp){switch(Vp.label){case 0:wp={},_p={},Rp=2e3,Cp=function(zp){return Tp.accessDenied=!0,Tp.accessAllowed=!1,mp.error("Publisher initialization failed. ".concat(zp.name,": ").concat(zp.message)),Ep(zp)},Ap=function(zp){var Wp,Up;if(Tp.accessAllowed=!0,Tp.accessDenied=!1,typeof MediaStreamTrack<"u"&&Tp.properties.audioSource instanceof MediaStreamTrack&&(zp.removeTrack(zp.getAudioTracks()[0]),zp.addTrack(Tp.properties.audioSource)),typeof MediaStreamTrack<"u"&&Tp.properties.videoSource instanceof MediaStreamTrack&&(zp.removeTrack(zp.getVideoTracks()[0]),zp.addTrack(Tp.properties.videoSource)),zp.getAudioTracks()[0]){var qp=Tp.stream.audioActive!==void 0&&Tp.stream.audioActive!==null?Tp.stream.audioActive:!!Tp.stream.outboundStreamOpts.publisherProperties.publishAudio;zp.getAudioTracks()[0].enabled=qp}if(zp.getVideoTracks()[0]){var qp=Tp.stream.videoActive!==void 0&&Tp.stream.videoActive!==null?Tp.stream.videoActive:!!Tp.stream.outboundStreamOpts.publisherProperties.publishVideo;zp.getVideoTracks()[0].enabled=qp}for(var Bp=0,Yp=zp.getAudioTracks();Bp<Yp.length;Bp++){var Xp=Yp[Bp];!((Wp=Xp.contentHint)===null||Wp===void 0)&&Wp.length||(Xp.contentHint="",mp.info("Audio track Content Hint set: '".concat(Xp.contentHint,"'")))}for(var Qp=0,am=zp.getVideoTracks();Qp<am.length;Qp++){var Xp=am[Qp];if(!(!((Up=Xp.contentHint)===null||Up===void 0)&&Up.length)){switch(Tp.stream.typeOfVideo){case hp.TypeOfVideo.SCREEN:Xp.contentHint="detail";break;case hp.TypeOfVideo.CUSTOM:mp.warn("CUSTOM type video track was provided without Content Hint!"),Xp.contentHint="motion";break;case hp.TypeOfVideo.CAMERA:case hp.TypeOfVideo.IPCAM:default:Xp.contentHint="motion";break}mp.info("Video track Content Hint set: '".concat(Xp.contentHint,"'"))}}return Tp.initializeVideoReference(zp),Tp.stream.displayMyRemote()||Tp.stream.updateMediaStreamInVideos(),delete Tp.firstVideoElement,Tp.stream.isSendVideo()?Tp.getVideoDimensions().then(function(Jp){Tp.stream.videoDimensions={width:Jp.width,height:Jp.height},Tp.stream.isSendScreen()&&(Tp.stream.isSendAudio()&&zp.getAudioTracks().length===0&&(Tp.stream.audioActive=!1,Tp.stream.hasAudio=!1,Tp.stream.outboundStreamOpts.publisherProperties.publishAudio=!1,Tp.stream.outboundStreamOpts.publisherProperties.audioSource=!1),Tp.screenShareResizeInterval=setInterval(function(){var im=zp.getVideoTracks()[0].getSettings(),Zp=im.width,Gp=im.height,tm=Zp!=null&&Zp!==Tp.stream.videoDimensions.width,om=Gp!=null&&Gp!==Tp.stream.videoDimensions.height;Tp.stream.isLocalStreamPublished&&(tm||om)&&Tp.openvidu.sendVideoDimensionsChangedEvent(Tp,"screenResized",Tp.stream.videoDimensions.width,Tp.stream.videoDimensions.height,Zp||0,Gp||0)},650)),Tp.stream.isLocalStreamReadyToPublish=!0,Tp.stream.ee.emitEvent("stream-ready-to-publish",[])}):(Tp.stream.isLocalStreamReadyToPublish=!0,Tp.stream.ee.emitEvent("stream-ready-to-publish",[])),bp()},Op=function(zp,Wp){return rp(Tp,void 0,void 0,function(){var Up,qp;return np(this,function(Bp){switch(Bp.label){case 0:if(this.clearPermissionDialogTimer($p,Rp),!(this.stream.isSendScreen()&&this.properties.audioSource!=="screen"&&this.stream.isSendAudio()))return[3,5];_p.audio=Wp,_p.video=!1,$p=Date.now(),this.setPermissionDialogTimer(Rp),Bp.label=1;case 1:return Bp.trys.push([1,3,,4]),[4,navigator.mediaDevices.getUserMedia(_p)];case 2:return Up=Bp.sent(),this.clearPermissionDialogTimer($p,Rp),zp.addTrack(Up.getAudioTracks()[0]),Ap(zp),[3,4];case 3:return qp=Bp.sent(),this.clearPermissionDialogTimer($p,Rp),zp.getAudioTracks().forEach(function(Yp){Yp.stop()}),zp.getVideoTracks().forEach(function(Yp){Yp.stop()}),Cp(this.openvidu.generateAudioDeviceError(qp,wp)),[2];case 4:return[3,6];case 5:Ap(zp),Bp.label=6;case 6:return[2]}})})},Lp=function(zp){return rp(Tp,void 0,void 0,function(){var Wp,Up,qp,Yp,Bp,Yp,Xp;return np(this,function(Qp){switch(Qp.label){case 0:switch(mp.error("getMediaError: ".concat(zp.toString())),this.clearPermissionDialogTimer($p,Rp),zp.name==="Error"&&(zp.name=zp.constructor.name),qp=zp.name.toLowerCase(),qp){case"notfounderror":return[3,1];case"notallowederror":return[3,5];case"overconstrainederror":return[3,6];case"aborterror":return[3,10];case"notreadableerror":return[3,10]}return[3,11];case 1:return Qp.trys.push([1,3,,4]),[4,navigator.mediaDevices.getUserMedia({audio:!1,video:wp.video})];case 2:return Yp=Qp.sent(),Yp.getVideoTracks().forEach(function(am){am.stop()}),Wp=dp.OpenViduErrorName.INPUT_AUDIO_DEVICE_NOT_FOUND,Up=zp.toString(),Cp(new dp.OpenViduError(Wp,Up)),[3,4];case 3:return Bp=Qp.sent(),Wp=dp.OpenViduErrorName.INPUT_VIDEO_DEVICE_NOT_FOUND,Up=Bp.toString(),Cp(new dp.OpenViduError(Wp,Up)),[3,4];case 4:return[3,12];case 5:return Wp=this.stream.isSendScreen()?dp.OpenViduErrorName.SCREEN_CAPTURE_DENIED:dp.OpenViduErrorName.DEVICE_ACCESS_DENIED,Up=zp.toString(),Cp(new dp.OpenViduError(Wp,Up)),[3,12];case 6:return Qp.trys.push([6,8,,9]),[4,navigator.mediaDevices.getUserMedia({audio:!1,video:wp.video})];case 7:return Yp=Qp.sent(),Yp.getVideoTracks().forEach(function(am){am.stop()}),zp.constraint.toLowerCase()==="deviceid"?(Wp=dp.OpenViduErrorName.INPUT_AUDIO_DEVICE_NOT_FOUND,Up="Audio input device with deviceId '"+wp.audio.deviceId.exact+"' not found"):(Wp=dp.OpenViduErrorName.PUBLISHER_PROPERTIES_ERROR,Up="Audio input device doesn't support the value passed for constraint '"+zp.constraint+"'"),Cp(new dp.OpenViduError(Wp,Up)),[3,9];case 8:return Xp=Qp.sent(),Xp.constraint.toLowerCase()==="deviceid"?(Wp=dp.OpenViduErrorName.INPUT_VIDEO_DEVICE_NOT_FOUND,Up="Video input device with deviceId '"+wp.video.deviceId.exact+"' not found"):(Wp=dp.OpenViduErrorName.PUBLISHER_PROPERTIES_ERROR,Up="Video input device doesn't support the value passed for constraint '"+Xp.constraint+"'"),Cp(new dp.OpenViduError(Wp,Up)),[3,9];case 9:return[3,12];case 10:return Wp=dp.OpenViduErrorName.DEVICE_ALREADY_IN_USE,Up=zp.toString(),Cp(new dp.OpenViduError(Wp,Up)),[3,12];case 11:return Wp=dp.OpenViduErrorName.GENERIC_ERROR,Up=zp.toString(),Cp(new dp.OpenViduError(Wp,Up)),[3,12];case 12:return[2]}})})},Vp.label=1;case 1:return Vp.trys.push([1,14,,15]),[4,this.openvidu.generateMediaConstraints(this.properties)];case 2:return Mp=Vp.sent(),Mp.videoTrack&&Mp.audioTrack||Mp.audioTrack&&((Np=Mp.constraints)===null||Np===void 0?void 0:Np.video)===!1||Mp.videoTrack&&((jp=Mp.constraints)===null||jp===void 0?void 0:jp.audio)===!1?(Ap(this.openvidu.addAlreadyProvidedTracks(Mp,new MediaStream,this.stream)),[3,13]):[3,3];case 3:wp=Mp.constraints,kp={mediaConstraints:wp,publisherProperties:this.properties},this.stream.setOutboundStreamOptions(kp),Dp=wp.audio===void 0?!0:wp.audio,_p.audio=this.stream.isSendScreen()?!1:Dp,_p.video=wp.video,$p=Date.now(),this.setPermissionDialogTimer(Rp),Vp.label=4;case 4:return Vp.trys.push([4,11,,13]),this.stream.isSendScreen()&&navigator.mediaDevices.getDisplayMedia&&!gp.isElectron()?[4,navigator.mediaDevices.getDisplayMedia({video:!0,audio:this.properties.audioSource==="screen"})]:[3,7];case 5:return Fp=Vp.sent(),this.openvidu.addAlreadyProvidedTracks(Mp,Fp),[4,Op(Fp,Dp)];case 6:return Vp.sent(),[3,10];case 7:return this.stream.lastVideoTrackConstraints=_p.video,[4,navigator.mediaDevices.getUserMedia(_p)];case 8:return Fp=Vp.sent(),this.openvidu.addAlreadyProvidedTracks(Mp,Fp,this.stream),[4,Op(Fp,Dp)];case 9:Vp.sent(),Vp.label=10;case 10:return[3,13];case 11:return Ip=Vp.sent(),[4,Lp(Ip)];case 12:return Vp.sent(),[3,13];case 13:return[3,15];case 14:return Pp=Vp.sent(),Cp(Pp),[3,15];case 15:return[2]}})})})},Sp.prototype.replaceTrackAux=function(yp,bp){return rp(this,void 0,void 0,function(){var Ep,wp;return np(this,function(_p){switch(_p.label){case 0:Ep=yp.enabled,yp.kind==="video"?yp.enabled=this.stream.videoActive:yp.kind==="audio"&&(yp.enabled=this.stream.audioActive),_p.label=1;case 1:return _p.trys.push([1,5,,6]),this.stream.isLocalStreamPublished?(this.replaceTrackInMediaStream(yp,bp),[4,this.replaceTrackInRtcRtpSender(yp)]):[3,3];case 2:return[2,_p.sent()];case 3:return[2,this.replaceTrackInMediaStream(yp,bp)];case 4:return[3,6];case 5:throw wp=_p.sent(),yp.enabled=Ep,wp;case 6:return[2]}})})},Sp.prototype.getVideoDimensions=function(){var yp=this;return new Promise(function(bp,Ep){var wp=(gp.isIonicIos()||gp.isIOSWithSafari())&&yp.videoReference.readyState<1,_p,Rp=function(){var $p,Cp;if(typeof yp.stream.getMediaStream().getVideoTracks()[0].getSettings=="function"){var Ap=yp.stream.getMediaStream().getVideoTracks()[0].getSettings();$p=Ap.width||yp.videoReference.videoWidth,Cp=Ap.height||yp.videoReference.videoHeight}else mp.warn("MediaStreamTrack does not have getSettings method on "+gp.getDescription()),$p=yp.videoReference.videoWidth,Cp=yp.videoReference.videoHeight;return _p!=null&&yp.videoReference.removeEventListener("loadedmetadata",_p),wp&&document.body.removeChild(yp.videoReference),bp({width:$p,height:Cp})};yp.videoReference.readyState>=1?Rp():(_p=function(){if(yp.videoReference.videoWidth)Rp();else var $p=setInterval(function(){yp.videoReference.videoWidth&&(clearInterval($p),Rp())},40)},yp.videoReference.addEventListener("loadedmetadata",_p),wp&&document.body.appendChild(yp.videoReference))})},Sp.prototype.reestablishStreamPlayingEvent=function(){this.ee.getListeners("streamPlaying").length>0&&this.addPlayEventToFirstVideo()},Sp.prototype.initializeVideoReference=function(yp){this.videoReference=document.createElement("video"),this.videoReference.style.display="none",this.videoReference.muted=!0,this.videoReference.autoplay=!0,this.videoReference.controls=!1,(gp.isSafariBrowser()||gp.isIPhoneOrIPad()&&(gp.isChromeMobileBrowser()||gp.isEdgeMobileBrowser()||gp.isOperaMobileBrowser()||gp.isFirefoxMobileBrowser()))&&(this.videoReference.playsInline=!0),this.stream.setMediaStream(yp),this.firstVideoElement&&this.createVideoElement(this.firstVideoElement.targetElement,this.properties.insertMode),this.videoReference.srcObject=this.stream.getMediaStream()},Sp.prototype.replaceTrackInMediaStream=function(yp,bp){var Ep=this.stream.displayMyRemote()?this.stream.localMediaStreamWhenSubscribedToRemote:this.stream.getMediaStream(),wp;yp.kind==="video"?(wp=Ep.getVideoTracks()[0],bp&&(this.stream.lastVideoTrackConstraints=yp.getConstraints())):wp=Ep.getAudioTracks()[0],wp.enabled=!1,wp.stop(),Ep.removeTrack(wp),Ep.addTrack(yp);var _p={oldLabel:(wp==null?void 0:wp.label)||"",newLabel:(yp==null?void 0:yp.label)||""};yp.kind==="video"&&bp?(this.openvidu.sendNewVideoDimensionsIfRequired(this,"trackReplaced",50,30),this.openvidu.sendTrackChangedEvent(this,_p.oldLabel,_p.newLabel,"videoTrack"),this.stream.isLocalStreamPublished&&this.session.sendVideoData(this.stream.streamManager,5,!0,5)):yp.kind==="audio"&&bp&&this.openvidu.sendTrackChangedEvent(this,_p.oldLabel,_p.newLabel,"audioTrack"),yp.kind==="audio"&&(this.stream.disableHarkSpeakingEvent(!1),this.stream.disableHarkStoppedSpeakingEvent(!1),this.stream.disableHarkVolumeChangeEvent(!1),this.stream.initHarkEvents())},Sp.prototype.setPermissionDialogTimer=function(yp){var bp=this;this.permissionDialogTimeout=setTimeout(function(){bp.emitEvent("accessDialogOpened",[])},yp)},Sp.prototype.clearPermissionDialogTimer=function(yp,bp){clearTimeout(this.permissionDialogTimeout),Date.now()-yp>bp&&this.emitEvent("accessDialogClosed",[])},Sp.prototype.replaceTrackInRtcRtpSender=function(yp){return rp(this,void 0,void 0,function(){var bp,Ep;return np(this,function(wp){switch(wp.label){case 0:if(bp=this.stream.getRTCPeerConnection().getSenders(),yp.kind==="video"){if(Ep=bp.find(function(_p){return!!_p.track&&_p.track.kind==="video"}),!Ep)throw new Error("There's no replaceable track for that kind of MediaStreamTrack in this Publisher object")}else if(yp.kind==="audio"){if(Ep=bp.find(function(_p){return!!_p.track&&_p.track.kind==="audio"}),!Ep)throw new Error("There's no replaceable track for that kind of MediaStreamTrack in this Publisher object")}else throw new Error("Unknown track kind "+yp.kind);return[4,Ep.replaceTrack(yp)];case 1:return wp.sent(),[2]}})})},Sp}(lp.StreamManager);return Publisher.Publisher=vp,Publisher}var ScreenCapturingAuto={};globalThis.getScreenId=function(_d,rp,np){if(navigator.userAgent.indexOf("Edge")!==-1&&(navigator.msSaveOrOpenBlob||navigator.msSaveBlob)){rp({video:!0});return}if(navigator.mozGetUserMedia){rp(null,"firefox",{video:{mozMediaSource:_d,mediaSource:_d}});return}globalThis.addEventListener("message",ap);function ap(sp){sp.data&&(sp.data.chromeMediaSourceId&&(sp.data.chromeMediaSourceId==="PermissionDeniedError"?rp("permission-denied"):rp(null,sp.data.chromeMediaSourceId,getScreenConstraints$1(null,sp.data.chromeMediaSourceId,sp.data.canRequestAudioTrack)),globalThis.removeEventListener("message",ap)),sp.data.chromeExtensionStatus&&(rp(sp.data.chromeExtensionStatus,null,getScreenConstraints$1(sp.data.chromeExtensionStatus)),globalThis.removeEventListener("message",ap)))}setTimeout(np?function(){postGetSourceIdMessage(np)}:postGetSourceIdMessage,100)};function getScreenConstraints$1(_d,rp,np){var ap={audio:!1,video:{mandatory:{chromeMediaSource:_d?"screen":"desktop",maxWidth:globalThis.screen.width>1920?globalThis.screen.width:1920,maxHeight:globalThis.screen.height>1080?globalThis.screen.height:1080},optional:[]}};return np&&(ap.audio={mandatory:{chromeMediaSource:_d?"screen":"desktop"},optional:[]}),rp&&(ap.video.mandatory.chromeMediaSourceId=rp,ap.audio&&ap.audio.mandatory&&(ap.audio.mandatory.chromeMediaSourceId=rp)),ap}function postGetSourceIdMessage(_d){if(!iframe){loadIFrame(function(){postGetSourceIdMessage(_d)});return}if(!iframe.isLoaded){setTimeout(function(){postGetSourceIdMessage(_d)},100);return}_d?_d.forEach?iframe.contentWindow.postMessage({captureCustomSourceId:_d},"*"):iframe.contentWindow.postMessage({captureSourceIdWithAudio:!0},"*"):iframe.contentWindow.postMessage({captureSourceId:!0},"*")}var iframe;globalThis.getScreenConstraints=function(_d){loadIFrame(function(){getScreenId(function(rp,np,ap){ap||(ap={video:!0}),_d(rp,ap.video)})})};function loadIFrame(_d){if(iframe){_d();return}iframe=document.createElement("iframe"),iframe.onload=function(){iframe.isLoaded=!0,_d()},iframe.src="https://openvidu.github.io/openvidu-screen-sharing-chrome-extension/",iframe.style.display="none",(document.body||document.documentElement).appendChild(iframe)}globalThis.getChromeExtensionStatus=function(_d){if(navigator.mozGetUserMedia){_d("installed-enabled");return}globalThis.addEventListener("message",rp);function rp(np){np.data&&np.data.chromeExtensionStatus&&(_d(np.data.chromeExtensionStatus),globalThis.removeEventListener("message",rp))}setTimeout(postGetChromeExtensionStatusMessage,100)};function postGetChromeExtensionStatusMessage(){if(!iframe){loadIFrame(postGetChromeExtensionStatusMessage);return}if(!iframe.isLoaded){setTimeout(postGetChromeExtensionStatusMessage,100);return}iframe.contentWindow.postMessage({getChromeExtensionStatus:!0},"*")}ScreenCapturingAuto.getScreenId=globalThis.getScreenId;var ScreenCapturing={},chromeMediaSource="screen",sourceId,screenCallback;if(typeof window<"u"&&typeof navigator<"u"&&typeof navigator.userAgent<"u"){var isFirefox=typeof window.InstallTrigger<"u";window.opera||navigator.userAgent.indexOf(" OPR/")>=0,window.addEventListener("message",function(_d){_d.origin==window.location.origin&&onMessageCallback(_d.data)})}function onMessageCallback(_d){if(_d=="PermissionDeniedError"){if(screenCallback)return screenCallback("PermissionDeniedError");throw new Error("PermissionDeniedError")}_d=="rtcmulticonnection-extension-loaded"&&(chromeMediaSource="desktop"),_d.sourceId&&screenCallback&&screenCallback(sourceId=_d.sourceId,_d.canRequestAudioTrack===!0)}function isChromeExtensionAvailable(_d){if(_d){if(chromeMediaSource=="desktop")return _d(!0);window.postMessage("are-you-there","*"),setTimeout(function(){chromeMediaSource=="screen"?_d(!1):_d(!0)},2e3)}}function getSourceId(_d){if(!_d)throw'"callback" parameter is mandatory.';if(sourceId)return _d(sourceId);screenCallback=_d,window.postMessage("get-sourceId","*")}function getSourceIdWithAudio(_d){if(!_d)throw'"callback" parameter is mandatory.';if(sourceId)return _d(sourceId);screenCallback=_d,window.postMessage("audio-plus-tab","*")}function getChromeExtensionStatus(_d,rp){if(isFirefox)return rp("not-chrome");arguments.length!=2&&(rp=_d,_d="lfcgfepafnobdloecchnfaclibenjold");var np=document.createElement("img");np.src="chrome-extension://"+_d+"/icon.png",np.onload=function(){chromeMediaSource="screen",window.postMessage("are-you-there","*"),setTimeout(function(){chromeMediaSource=="screen"?rp("installed-disabled"):rp("installed-enabled")},2e3)},np.onerror=function(){rp("not-installed")}}function getScreenConstraintsWithAudio(_d){getScreenConstraints(_d,!0)}function getScreenConstraints(_d,rp){sourceId="";var np={mozMediaSource:"window",mediaSource:"window"};if(isFirefox)return _d(null,np);var ap={mandatory:{chromeMediaSource,maxWidth:screen.width>1920?screen.width:1920,maxHeight:screen.height>1080?screen.height:1080},optional:[]};if(chromeMediaSource=="desktop"&&!sourceId){rp?getSourceIdWithAudio(function(sp,lp){ap.mandatory.chromeMediaSourceId=sp,lp&&(ap.canRequestAudioTrack=!0),_d(sp=="PermissionDeniedError"?sp:null,ap)}):getSourceId(function(sp){ap.mandatory.chromeMediaSourceId=sp,_d(sp=="PermissionDeniedError"?sp:null,ap)});return}chromeMediaSource=="desktop"&&(ap.mandatory.chromeMediaSourceId=sourceId),_d(null,ap)}ScreenCapturing.getScreenConstraints=getScreenConstraints;ScreenCapturing.getScreenConstraintsWithAudio=getScreenConstraintsWithAudio;ScreenCapturing.isChromeExtensionAvailable=isChromeExtensionAvailable;ScreenCapturing.getChromeExtensionStatus=getChromeExtensionStatus;ScreenCapturing.getSourceId=getSourceId;var events={exports:{}},R=typeof Reflect=="object"?Reflect:null,ReflectApply=R&&typeof R.apply=="function"?R.apply:function _d(rp,np,ap){return Function.prototype.apply.call(rp,np,ap)},ReflectOwnKeys;R&&typeof R.ownKeys=="function"?ReflectOwnKeys=R.ownKeys:Object.getOwnPropertySymbols?ReflectOwnKeys=function(rp){return Object.getOwnPropertyNames(rp).concat(Object.getOwnPropertySymbols(rp))}:ReflectOwnKeys=function(rp){return Object.getOwnPropertyNames(rp)};function ProcessEmitWarning(_d){console&&console.warn&&console.warn(_d)}var NumberIsNaN=Number.isNaN||function _d(rp){return rp!==rp};function EventEmitter$1(){EventEmitter$1.init.call(this)}events.exports=EventEmitter$1;events.exports.once=once;EventEmitter$1.EventEmitter=EventEmitter$1;EventEmitter$1.prototype._events=void 0;EventEmitter$1.prototype._eventsCount=0;EventEmitter$1.prototype._maxListeners=void 0;var defaultMaxListeners=10;function checkListener(_d){if(typeof _d!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof _d)}Object.defineProperty(EventEmitter$1,"defaultMaxListeners",{enumerable:!0,get:function(){return defaultMaxListeners},set:function(_d){if(typeof _d!="number"||_d<0||NumberIsNaN(_d))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+_d+".");defaultMaxListeners=_d}});EventEmitter$1.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};EventEmitter$1.prototype.setMaxListeners=function _d(rp){if(typeof rp!="number"||rp<0||NumberIsNaN(rp))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+rp+".");return this._maxListeners=rp,this};function _getMaxListeners(_d){return _d._maxListeners===void 0?EventEmitter$1.defaultMaxListeners:_d._maxListeners}EventEmitter$1.prototype.getMaxListeners=function _d(){return _getMaxListeners(this)};EventEmitter$1.prototype.emit=function _d(rp){for(var np=[],ap=1;ap<arguments.length;ap++)np.push(arguments[ap]);var sp=rp==="error",lp=this._events;if(lp!==void 0)sp=sp&&lp.error===void 0;else if(!sp)return!1;if(sp){var up;if(np.length>0&&(up=np[0]),up instanceof Error)throw up;var cp=new Error("Unhandled error."+(up?" ("+up.message+")":""));throw cp.context=up,cp}var dp=lp[rp];if(dp===void 0)return!1;if(typeof dp=="function")ReflectApply(dp,this,np);else for(var fp=dp.length,pp=arrayClone(dp,fp),ap=0;ap<fp;++ap)ReflectApply(pp[ap],this,np);return!0};function _addListener(_d,rp,np,ap){var sp,lp,up;if(checkListener(np),lp=_d._events,lp===void 0?(lp=_d._events=Object.create(null),_d._eventsCount=0):(lp.newListener!==void 0&&(_d.emit("newListener",rp,np.listener?np.listener:np),lp=_d._events),up=lp[rp]),up===void 0)up=lp[rp]=np,++_d._eventsCount;else if(typeof up=="function"?up=lp[rp]=ap?[np,up]:[up,np]:ap?up.unshift(np):up.push(np),sp=_getMaxListeners(_d),sp>0&&up.length>sp&&!up.warned){up.warned=!0;var cp=new Error("Possible EventEmitter memory leak detected. "+up.length+" "+String(rp)+" listeners added. Use emitter.setMaxListeners() to increase limit");cp.name="MaxListenersExceededWarning",cp.emitter=_d,cp.type=rp,cp.count=up.length,ProcessEmitWarning(cp)}return _d}EventEmitter$1.prototype.addListener=function _d(rp,np){return _addListener(this,rp,np,!1)};EventEmitter$1.prototype.on=EventEmitter$1.prototype.addListener;EventEmitter$1.prototype.prependListener=function _d(rp,np){return _addListener(this,rp,np,!0)};function onceWrapper(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _onceWrap(_d,rp,np){var ap={fired:!1,wrapFn:void 0,target:_d,type:rp,listener:np},sp=onceWrapper.bind(ap);return sp.listener=np,ap.wrapFn=sp,sp}EventEmitter$1.prototype.once=function _d(rp,np){return checkListener(np),this.on(rp,_onceWrap(this,rp,np)),this};EventEmitter$1.prototype.prependOnceListener=function _d(rp,np){return checkListener(np),this.prependListener(rp,_onceWrap(this,rp,np)),this};EventEmitter$1.prototype.removeListener=function _d(rp,np){var ap,sp,lp,up,cp;if(checkListener(np),sp=this._events,sp===void 0)return this;if(ap=sp[rp],ap===void 0)return this;if(ap===np||ap.listener===np)--this._eventsCount===0?this._events=Object.create(null):(delete sp[rp],sp.removeListener&&this.emit("removeListener",rp,ap.listener||np));else if(typeof ap!="function"){for(lp=-1,up=ap.length-1;up>=0;up--)if(ap[up]===np||ap[up].listener===np){cp=ap[up].listener,lp=up;break}if(lp<0)return this;lp===0?ap.shift():spliceOne(ap,lp),ap.length===1&&(sp[rp]=ap[0]),sp.removeListener!==void 0&&this.emit("removeListener",rp,cp||np)}return this};EventEmitter$1.prototype.off=EventEmitter$1.prototype.removeListener;EventEmitter$1.prototype.removeAllListeners=function _d(rp){var np,ap,sp;if(ap=this._events,ap===void 0)return this;if(ap.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):ap[rp]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete ap[rp]),this;if(arguments.length===0){var lp=Object.keys(ap),up;for(sp=0;sp<lp.length;++sp)up=lp[sp],up!=="removeListener"&&this.removeAllListeners(up);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(np=ap[rp],typeof np=="function")this.removeListener(rp,np);else if(np!==void 0)for(sp=np.length-1;sp>=0;sp--)this.removeListener(rp,np[sp]);return this};function _listeners(_d,rp,np){var ap=_d._events;if(ap===void 0)return[];var sp=ap[rp];return sp===void 0?[]:typeof sp=="function"?np?[sp.listener||sp]:[sp]:np?unwrapListeners(sp):arrayClone(sp,sp.length)}EventEmitter$1.prototype.listeners=function _d(rp){return _listeners(this,rp,!0)};EventEmitter$1.prototype.rawListeners=function _d(rp){return _listeners(this,rp,!1)};EventEmitter$1.listenerCount=function(_d,rp){return typeof _d.listenerCount=="function"?_d.listenerCount(rp):listenerCount.call(_d,rp)};EventEmitter$1.prototype.listenerCount=listenerCount;function listenerCount(_d){var rp=this._events;if(rp!==void 0){var np=rp[_d];if(typeof np=="function")return 1;if(np!==void 0)return np.length}return 0}EventEmitter$1.prototype.eventNames=function _d(){return this._eventsCount>0?ReflectOwnKeys(this._events):[]};function arrayClone(_d,rp){for(var np=new Array(rp),ap=0;ap<rp;++ap)np[ap]=_d[ap];return np}function spliceOne(_d,rp){for(;rp+1<_d.length;rp++)_d[rp]=_d[rp+1];_d.pop()}function unwrapListeners(_d){for(var rp=new Array(_d.length),np=0;np<rp.length;++np)rp[np]=_d[np].listener||_d[np];return rp}function once(_d,rp){return new Promise(function(np,ap){function sp(up){_d.removeListener(rp,lp),ap(up)}function lp(){typeof _d.removeListener=="function"&&_d.removeListener("error",sp),np([].slice.call(arguments))}eventTargetAgnosticAddListener(_d,rp,lp,{once:!0}),rp!=="error"&&addErrorHandlerIfEventEmitter(_d,sp,{once:!0})})}function addErrorHandlerIfEventEmitter(_d,rp,np){typeof _d.on=="function"&&eventTargetAgnosticAddListener(_d,"error",rp,np)}function eventTargetAgnosticAddListener(_d,rp,np,ap){if(typeof _d.on=="function")ap.once?_d.once(rp,np):_d.on(rp,np);else if(typeof _d.addEventListener=="function")_d.addEventListener(rp,function sp(lp){ap.once&&_d.removeEventListener(rp,sp),np(lp)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof _d)}var eventsExports=events.exports,inherits_browser={exports:{}};typeof Object.create=="function"?inherits_browser.exports=function(rp,np){np&&(rp.super_=np,rp.prototype=Object.create(np.prototype,{constructor:{value:rp,enumerable:!1,writable:!0,configurable:!0}}))}:inherits_browser.exports=function(rp,np){if(np){rp.super_=np;var ap=function(){};ap.prototype=np.prototype,rp.prototype=new ap,rp.prototype.constructor=rp}};var inherits_browserExports=inherits_browser.exports,packers={},JsonRPC$1={};function pack$1(_d,rp){var np={jsonrpc:"2.0"};if(_d.method)np.method=_d.method,_d.params&&(np.params=_d.params),rp!=null&&(np.id=rp);else if(rp!=null){if(_d.error){if(_d.result!==void 0)throw new TypeError("Both result and error are defined");np.error=_d.error}else if(_d.result!==void 0)np.result=_d.result;else throw new TypeError("No result or error is defined");np.id=rp}return JSON.stringify(np)}function unpack$1(_d){var rp=_d;(typeof _d=="string"||_d instanceof String)&&(rp=JSON.parse(_d));var np=rp.jsonrpc;if(np!=="2.0")throw new TypeError("Invalid JsonRPC version '"+np+"': "+_d);if(rp.method==null){if(rp.id==null)throw new TypeError("Invalid message: "+_d);var ap=rp.result!==void 0,sp=rp.error!==void 0;if(ap&&sp)throw new TypeError("Both result and error are defined: "+_d);if(!ap&&!sp)throw new TypeError("No result or error is defined: "+_d);rp.ack=rp.id,delete rp.id}return rp}JsonRPC$1.pack=pack$1;JsonRPC$1.unpack=unpack$1;var XmlRPC$1={};function pack(_d){throw new TypeError("Not yet implemented")}function unpack(_d){throw new TypeError("Not yet implemented")}XmlRPC$1.pack=pack;XmlRPC$1.unpack=unpack;var JsonRPC=JsonRPC$1,XmlRPC=XmlRPC$1;packers.JsonRPC=JsonRPC;packers.XmlRPC=XmlRPC;function Mapper(){var _d={};this.forEach=function(rp){for(var np in _d){var ap=_d[np];for(var sp in ap)rp(ap[sp])}},this.get=function(rp,np){var ap=_d[np];if(ap!=null)return ap[rp]},this.remove=function(rp,np){var ap=_d[np];if(ap!=null){delete ap[rp];for(var sp in ap)return!1;delete _d[np]}},this.set=function(rp,np,ap){if(rp==null)return this.remove(np,ap);var sp=_d[ap];sp==null&&(_d[ap]=sp={}),sp[np]=rp}}Mapper.prototype.pop=function(_d,rp){var np=this.get(_d,rp);if(np!=null)return this.remove(_d,rp),np};var Mapper_1=Mapper,clients={},webSocketWithReconnection,hasRequiredWebSocketWithReconnection;function requireWebSocketWithReconnection(){if(hasRequiredWebSocketWithReconnection)return webSocketWithReconnection;hasRequiredWebSocketWithReconnection=1;var _d=OpenViduLogger$1.OpenViduLogger,rp=_d.getInstance(),np=2e3,ap=3e3,sp=3;function lp(up){var cp=!1,dp,fp=up.uri,pp=!1,hp=new WebSocket(fp);hp.onopen=function(){rp.debug("WebSocket connected to "+fp),up.onconnected&&up.onconnected()},hp.onerror=function(Sp){rp.error("Could not connect to "+fp+" (invoking onerror if defined)",Sp),up.onerror&&up.onerror(Sp)};var mp=function(){hp.readyState===sp?cp?rp.debug("Connection closed by user"):up.ismasternodecrashed()?rp.error("Master Node has crashed. Stopping reconnection process"):(rp.debug("Connection closed unexpectedly. Reconnecting..."),gp(np,1)):rp.debug("Close callback from previous websocket. Ignoring it")};hp.onclose=mp;function gp(Sp,yp){if(rp.debug("reconnect (attempt #"+yp+", max="+Sp+")"),yp===1){if(pp){rp.warn("Trying to reconnect when already reconnecting... Ignoring this reconnection.");return}else pp=!0;up.onreconnecting&&up.onreconnecting()}xp(Sp,yp)}function vp(Sp){var yp=new URLSearchParams(new URL(Sp).search);return yp.has("reconnect")||(Sp=Array.from(yp).length>0?Sp+"&reconnect=true":Sp+"?reconnect=true"),Sp}function xp(Sp,yp){rp.debug("Reconnection attempt #"+yp),hp.close(4104,"Connection closed for reconnection"),fp=vp(fp),hp=new WebSocket(fp),hp.onopen=function(){rp.debug("Reconnected to "+fp+" after "+yp+" attempts..."),pp=!1,dp(),up.onreconnected&&up.onreconnected(),hp.onclose=mp},hp.onerror=function(bp){rp.warn("Reconnection error: ",bp),yp===Sp?up.ondisconnect&&up.ondisconnect():setTimeout(function(){gp(Sp,yp+1)},ap)}}this.close=function(Sp,yp){cp=!0,hp.close(Sp,yp)},this.reconnectWs=function(){rp.debug("reconnectWs"),gp(np,1)},this.send=function(Sp){hp.send(Sp)},this.addEventListener=function(Sp,yp){dp=function(){hp.addEventListener(Sp,yp)},dp()},this.getReadyState=function(){return hp.readyState}}return webSocketWithReconnection=lp,webSocketWithReconnection}var jsonrpcclient,hasRequiredJsonrpcclient;function requireJsonrpcclient(){if(hasRequiredJsonrpcclient)return jsonrpcclient;hasRequiredJsonrpcclient=1;var _d=requireKurentoJsonrpc(),rp=requireWebSocketWithReconnection(),np=OpenViduLogger$1.OpenViduLogger;Date.now=Date.now||function(){return+new Date};var ap=5e3,sp="RECONNECTING",lp="CONNECTED",up="DISCONNECTED",cp=np.getInstance();function dp(fp){var pp=this,hp=fp.ws,mp=-1,gp=0,vp=!0,xp=!1,Sp,yp=up,bp=hp.onreconnecting,Ep=hp.onreconnected,wp=hp.onconnected,_p=hp.onerror;fp.rpc.pull=function(kp,Dp){Dp.reply(null,"push")},hp.onreconnecting=function(){if(cp.debug("--------- ONRECONNECTING -----------"),yp===sp){cp.error("Websocket already in RECONNECTING state when receiving a new ONRECONNECTING message. Ignoring it");return}Mp(),yp=sp,bp&&bp()},hp.onreconnected=function(){if(cp.debug("--------- ONRECONNECTED -----------"),yp===lp){cp.error("Websocket already in CONNECTED state when receiving a new ONRECONNECTED message. Ignoring it");return}yp=lp,Ap(),Ep&&Ep()},hp.onconnected=function(){if(cp.debug("--------- ONCONNECTED -----------"),yp===lp){cp.error("Websocket already in CONNECTED state when receiving a new ONCONNECTED message. Ignoring it");return}yp=lp,vp=!0,Lp(),wp&&wp()},hp.onerror=function(kp){cp.debug("--------- ONERROR -----------"),yp=up,Mp(),_p&&_p(kp)};var Rp=new rp(hp);cp.debug("Connecting websocket to URI: "+hp.uri);var $p={request_timeout:fp.rpc.requestTimeout,ping_request_timeout:fp.rpc.heartbeatRequestTimeout},Cp=new _d(_d.packers.JsonRPC,$p,Rp,function(kp){cp.debug("Received request: "+JSON.stringify(kp));try{var Dp=fp.rpc[kp.method];Dp===void 0?cp.error("Method "+kp.method+" not registered in client"):Dp(kp.params,kp)}catch(Fp){cp.error("Exception processing request: "+JSON.stringify(kp)),cp.error(Fp)}});this.send=function(kp,Dp,Fp){var Ip=Date.now();Cp.encode(kp,Dp,function(Pp,Tp){if(Pp){try{cp.error("ERROR:"+Pp.message+" in Request: method:"+kp+" params:"+JSON.stringify(Dp)+" request:"+Pp.request),Pp.data&&cp.error("ERROR DATA:"+JSON.stringify(Pp.data))}catch{}Pp.requestTime=Ip}Fp&&(Tp!=null&&Tp.value!=="pong"&&cp.debug("Response: "+JSON.stringify(Tp)),Fp(Pp,Tp))})};function Ap(){cp.debug("notReconnectIfNumLessThan = "+gp+" (old="+mp+")"),mp=gp}function Op(){if(vp){var kp=null;(gp==0||gp==mp)&&(kp={interval:fp.heartbeat||ap}),gp++,pp.send("ping",kp,function(Dp){return function(Fp,Ip){Fp&&(cp.debug("Error in ping request #"+Dp+" ("+Fp.message+")"),Dp>mp&&(vp=!1,Ap(),cp.debug("Server did not respond to ping message #"+Dp+". Reconnecting... "),Rp.reconnectWs()))}}(gp))}else cp.debug("Trying to send ping, but ping is not enabled")}function Lp(){xp||(cp.debug("Starting ping (if configured)"),xp=!0,fp.heartbeat!=null&&(Sp=setInterval(Op,fp.heartbeat),Op()))}function Mp(){clearInterval(Sp),xp=!1,vp=!1,gp=-1,Cp.cancel()}this.close=function(kp,Dp){cp.debug("Closing  with code: "+kp+" because: "+Dp),Sp!=null&&(cp.debug("Clearing ping interval"),clearInterval(Sp)),xp=!1,vp=!1,Rp.close(kp,Dp)},this.reconnect=function(){Rp.reconnectWs()},this.resetPing=function(){vp=!0,gp=0,Lp()},this.getReadyState=function(){return Rp.getReadyState()}}return jsonrpcclient=dp,jsonrpcclient}var hasRequiredClients;function requireClients(){if(hasRequiredClients)return clients;hasRequiredClients=1;var _d=requireJsonrpcclient();return clients.JsonRpcClient=_d,clients}var transports={},hasRequiredTransports;function requireTransports(){if(hasRequiredTransports)return transports;hasRequiredTransports=1;var _d=requireWebSocketWithReconnection();return transports.WebSocketWithReconnection=_d,transports}var kurentoJsonrpc,hasRequiredKurentoJsonrpc;function requireKurentoJsonrpc(){if(hasRequiredKurentoJsonrpc)return kurentoJsonrpc;hasRequiredKurentoJsonrpc=1;var _d=!1;if(Object.defineProperty)try{Object.defineProperty({},"x",{})}catch{_d=!0}Function.prototype.bind||(Function.prototype.bind=function(mp){if(typeof this!="function")throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var gp=Array.prototype.slice.call(arguments,1),vp=this,xp=function(){},Sp=function(){return vp.apply(this instanceof xp&&mp?this:mp,gp.concat(Array.prototype.slice.call(arguments)))};return xp.prototype=this.prototype,Sp.prototype=new xp,Sp});var rp=eventsExports.EventEmitter,np=inherits_browserExports,ap=packers,sp=Mapper_1,lp=5e3;function up(mp){if(!mp)return{};for(var gp in mp){var vp=mp[gp];typeof vp=="string"&&(mp[gp]={response:vp})}return mp}function cp(mp){if(mp){if(mp instanceof Function)return{send:mp};if(mp.send instanceof Function)return mp;if(mp.postMessage instanceof Function)return mp.send=mp.postMessage,mp;if(mp.write instanceof Function)return mp.send=mp.write,mp;if(mp.onmessage===void 0&&!(mp.pause instanceof Function))throw new SyntaxError("Transport is not a function nor a valid object")}}function dp(mp,gp){_d?(this.method=mp,this.params=gp):(Object.defineProperty(this,"method",{value:mp,enumerable:!0}),Object.defineProperty(this,"params",{value:gp,enumerable:!0}))}function fp(mp,gp,vp,xp){var Sp=this;if(!mp)throw new SyntaxError("Packer is not defined");if(!mp.pack||!mp.unpack)throw new SyntaxError("Packer is invalid");var yp=up(mp.responseMethods);if(gp instanceof Function){if(vp!=null)throw new SyntaxError("There can't be parameters after onRequest");xp=gp,vp=void 0,gp=void 0}if(gp&&gp.send instanceof Function){if(vp&&!(vp instanceof Function))throw new SyntaxError("Only a function can be after transport");xp=vp,vp=gp,gp=void 0}if(vp instanceof Function){if(xp!=null)throw new SyntaxError("There can't be parameters after onRequest");xp=vp,vp=void 0}if(vp&&vp.send instanceof Function&&xp&&!(xp instanceof Function))throw new SyntaxError("Only a function can be after transport");gp=gp||{},rp.call(this),xp&&this.on("request",xp),_d?this.peerID=gp.peerID:Object.defineProperty(this,"peerID",{value:gp.peerID});var bp=gp.max_retries||0;function Ep(Pp){Sp.decode(Pp.data||Pp)}this.getTransport=function(){return vp},this.setTransport=function(Pp){vp&&(vp.removeEventListener?vp.removeEventListener("message",Ep):vp.removeListener&&vp.removeListener("data",Ep)),Pp&&(Pp.addEventListener?Pp.addEventListener("message",Ep):Pp.addListener&&Pp.addListener("data",Ep)),vp=cp(Pp)},_d||Object.defineProperty(this,"transport",{get:this.getTransport.bind(this),set:this.setTransport.bind(this)}),this.setTransport(vp);var wp=gp.request_timeout||lp,_p=gp.ping_request_timeout||wp,Rp=gp.response_timeout||lp,$p=gp.duplicates_timeout||lp,Cp=0,Ap=new sp,Op=new sp,Lp=new sp,Mp={};function kp(Pp,Tp,Np){var jp={message:Pp,timeout:setTimeout(function(){Op.remove(Tp,Np)},Rp)};Op.set(jp,Tp,Np)}function Dp(Pp,Tp){var Np=setTimeout(function(){Lp.remove(Pp,Tp)},$p);Lp.set(Np,Pp,Tp)}function Fp(Pp,Tp,Np,jp,Vp){dp.call(this,Pp,Tp),this.getTransport=function(){return Vp},this.setTransport=function(Up){Vp=cp(Up)},_d||Object.defineProperty(this,"transport",{get:this.getTransport.bind(this),set:this.setTransport.bind(this)});var zp=Op.get(Np,jp);Vp||Sp.getTransport()||(_d?this.duplicated=!!zp:Object.defineProperty(this,"duplicated",{value:!!zp}));var Wp=yp[Pp];this.pack=mp.pack.bind(mp,this,Np),this.reply=function(Up,qp,Bp){if(Up instanceof Function||Up&&Up.send instanceof Function){if(qp!=null)throw new SyntaxError("There can't be parameters after callback");Bp=Up,qp=null,Up=void 0}else if(qp instanceof Function||qp&&qp.send instanceof Function){if(Bp!=null)throw new SyntaxError("There can't be parameters after callback");Bp=qp,qp=null}Bp=cp(Bp),zp&&clearTimeout(zp.timeout),jp!=null&&(Up&&(Up.dest=jp),qp&&(qp.dest=jp));var Yp;if(Up||qp!=null){if(Sp.peerID!=null&&(Up?Up.from=Sp.peerID:qp.from=Sp.peerID),Wp)if(Wp.error==null&&Up)Yp={error:Up};else{var Xp=Up?Wp.error:Wp.response;Yp={method:Xp,params:Up||qp}}else Yp={error:Up,result:qp};Yp=mp.pack(Yp,Np)}else zp?Yp=zp.message:Yp=mp.pack({result:null},Np);return kp(Yp,Np,jp),Bp=Bp||this.getTransport()||Sp.getTransport(),Bp?Bp.send(Yp):Yp}}np(Fp,dp);function Ip(Pp){var Tp=Mp[Pp];if(Tp){delete Mp[Pp];var Np=Ap.pop(Tp.id,Tp.dest);Np&&(clearTimeout(Np.timeout),Dp(Tp.id,Tp.dest))}}this.cancel=function(Pp){if(Pp)return Ip(Pp);for(var Pp in Mp)Ip(Pp)},this.close=function(){var Pp=this.getTransport();Pp&&Pp.close&&Pp.close(4003,"Cancel request"),this.cancel(),Lp.forEach(clearTimeout),Op.forEach(function(Tp){clearTimeout(Tp.timeout)})},this.encode=function(Pp,Tp,Np,jp,Vp){if(Tp instanceof Function){if(Np!=null)throw new SyntaxError("There can't be parameters after callback");Vp=Tp,jp=void 0,Np=void 0,Tp=void 0}else if(Np instanceof Function){if(jp!=null)throw new SyntaxError("There can't be parameters after callback");Vp=Np,jp=void 0,Np=void 0}else if(jp instanceof Function){if(Vp!=null)throw new SyntaxError("There can't be parameters after callback");Vp=jp,jp=void 0}Sp.peerID!=null&&(Tp=Tp||{},Tp.from=Sp.peerID),Np!=null&&(Tp=Tp||{},Tp.dest=Np);var zp={method:Pp,params:Tp};if(Vp){let Jp=function(tm,om){Sp.cancel(zp),Vp(tm,om)},im=function(tm){var om=Pp==="ping"?_p:wp;return qp.timeout=setTimeout(Gp,om*Math.pow(2,Up++)),Mp[zp]={id:Wp,dest:Np},Ap.set(qp,Wp,Np),tm=tm||Bp||Sp.getTransport(),tm?tm.send(zp):zp},Zp=function(tm){tm=cp(tm),console.warn(Up+" retry for request message:",zp);var om=Lp.pop(Wp,Np);return clearTimeout(om),im(tm)},Gp=function(){if(Up<bp)return Zp(jp);var tm=new Error("Request has timed out");tm.request=zp,tm.retry=Zp,Jp(tm)};var Yp=Jp,Xp=im,Qp=Zp,am=Gp,Wp=Cp++,Up=0;zp=mp.pack(zp,Wp);var qp={message:zp,callback:Jp,responseMethods:yp[Pp]||{}},Bp=cp(jp);return im(jp)}return zp=mp.pack(zp),jp=jp||this.getTransport(),jp?jp.send(zp):zp},this.decode=function(Pp,Tp){if(!Pp)throw new TypeError("Message is not defined");try{Pp=mp.unpack(Pp)}catch(Gp){return console.debug(Gp,Pp)}var Np=Pp.id,jp=Pp.ack,Vp=Pp.method,zp=Pp.params||{},Wp=zp.from,Up=zp.dest;if(Sp.peerID!=null&&Wp==Sp.peerID)return;if(Np==null&&jp==null){var qp=new dp(Vp,zp);return Sp.emit("request",qp)?void 0:qp}function Bp(){if(Tp=cp(Tp)||Sp.getTransport(),Tp){var Gp=Op.get(Np,Wp);if(Gp)return Tp.send(Gp.message)}var tm=Np??jp,om=new Fp(Vp,zp,tm,Wp,Tp);if(!Sp.emit("request",om))return om}function Yp(Gp,tm,om){Gp.callback(tm,om)}function Xp(Gp){console.warn("Response already processed",Pp),clearTimeout(Gp),Dp(jp,Wp)}if(Vp){if(Up==null||Up==Sp.peerID){var Zp=Ap.get(jp,Wp);if(Zp){var Qp=Zp.responseMethods;return Vp==Qp.error?Yp(Zp,zp):Vp==Qp.response?Yp(Zp,null,zp):Bp()}var am=Lp.get(jp,Wp);if(am)return Xp(am)}return Bp()}var Jp=Pp.error,im=Pp.result;if(!(Jp&&Jp.dest&&Jp.dest!=Sp.peerID)&&!(im&&im.dest&&im.dest!=Sp.peerID)){var Zp=Ap.get(jp,Wp);if(!Zp){var am=Lp.get(jp,Wp);return am?Xp(am):console.warn("No callback was defined for this message",Pp)}Yp(Zp,Jp,im)}}}np(fp,rp),fp.RpcNotification=dp,kurentoJsonrpc=fp;var pp=requireClients(),hp=requireTransports();return fp.clients=pp,fp.clients.transports=hp,fp.packers=ap,kurentoJsonrpc}const author="OpenVidu",dependencies={freeice:"2.2.2",hark:"1.2.3",jsnlog:"2.30.0",mime:"3.0.0",platform:"1.3.6",semver:"7.3.8",uuid:"9.0.0","wolfy87-eventemitter":"5.2.9",events:"3.3.0",inherits:"2.0.4"},description="OpenVidu Browser",devDependencies={"@types/node":"18.11.9","@types/platform":"1.3.4",browserify:"17.0.0",grunt:"1.5.3","grunt-cli":"1.4.3","grunt-contrib-copy":"1.0.0","grunt-contrib-sass":"2.0.0","grunt-contrib-uglify":"5.2.2","grunt-contrib-watch":"1.1.0","grunt-postcss":"0.9.0","grunt-string-replace":"1.3.3","grunt-ts":"6.0.0-beta.22",terser:"5.15.1",tsify:"5.0.4",tslint:"6.1.3",typedoc:"0.23.21",typescript:"4.9.3"},license="Apache-2.0",main="lib/index.js",name="openvidu-browser",repository={type:"git",url:"git://github.com/OpenVidu/openvidu"},scripts={browserify:"VERSION=${VERSION:-dev}; mkdir -p static/js/ && cd src && ../node_modules/browserify/bin/cmd.js Main.ts -p [ tsify ] --exclude kurento-browser-extensions --debug -o ../static/js/openvidu-browser-$VERSION.js -v","browserify-prod":"VERSION=${VERSION:-dev}; mkdir -p static/js/ && cd src && ../node_modules/browserify/bin/cmd.js --debug Main.ts -p [ tsify ] --exclude kurento-browser-extensions | ../node_modules/terser/bin/terser --source-map content=inline --output ../static/js/openvidu-browser-$VERSION.min.js",build:"cd src/OpenVidu && ./../../node_modules/typescript/bin/tsc && cd ../.. && ./node_modules/typescript/bin/tsc --declaration src/index.ts --outDir ./lib --sourceMap --target es5 --lib dom,es5,es2015.promise,scripthost && rm -rf ./ts4.4 && mkdir -p ./ts4.4/lib && cp -r ./lib ./ts4.4 && find ./ts4.4/lib -type f ! -iname '*.d.ts' -delete && ./config/replace_for_ts44.sh",docs:"./generate-docs.sh"},types="lib/index.d.ts",typesVersions={"<4.4":{"*":["ts4.4/*"]}},version="2.29.1",require$$14={author,dependencies,description,devDependencies,license,main,name,repository,scripts,types,typesVersions,version};var __awaiter=commonjsGlobal&&commonjsGlobal.__awaiter||function(_d,rp,np,ap){function sp(lp){return lp instanceof np?lp:new np(function(up){up(lp)})}return new(np||(np=Promise))(function(lp,up){function cp(pp){try{fp(ap.next(pp))}catch(hp){up(hp)}}function dp(pp){try{fp(ap.throw(pp))}catch(hp){up(hp)}}function fp(pp){pp.done?lp(pp.value):sp(pp.value).then(cp,dp)}fp((ap=ap.apply(_d,rp||[])).next())})},__generator=commonjsGlobal&&commonjsGlobal.__generator||function(_d,rp){var np={label:0,sent:function(){if(lp[0]&1)throw lp[1];return lp[1]},trys:[],ops:[]},ap,sp,lp,up;return up={next:cp(0),throw:cp(1),return:cp(2)},typeof Symbol=="function"&&(up[Symbol.iterator]=function(){return this}),up;function cp(fp){return function(pp){return dp([fp,pp])}}function dp(fp){if(ap)throw new TypeError("Generator is already executing.");for(;up&&(up=0,fp[0]&&(np=0)),np;)try{if(ap=1,sp&&(lp=fp[0]&2?sp.return:fp[0]?sp.throw||((lp=sp.return)&&lp.call(sp),0):sp.next)&&!(lp=lp.call(sp,fp[1])).done)return lp;switch(sp=0,lp&&(fp=[fp[0]&2,lp.value]),fp[0]){case 0:case 1:lp=fp;break;case 4:return np.label++,{value:fp[1],done:!1};case 5:np.label++,sp=fp[1],fp=[0];continue;case 7:fp=np.ops.pop(),np.trys.pop();continue;default:if(lp=np.trys,!(lp=lp.length>0&&lp[lp.length-1])&&(fp[0]===6||fp[0]===2)){np=0;continue}if(fp[0]===3&&(!lp||fp[1]>lp[0]&&fp[1]<lp[3])){np.label=fp[1];break}if(fp[0]===6&&np.label<lp[1]){np.label=lp[1],lp=fp;break}if(lp&&np.label<lp[2]){np.label=lp[2],np.ops.push(fp);break}lp[2]&&np.ops.pop(),np.trys.pop();continue}fp=rp.call(_d,np)}catch(pp){fp=[6,pp],sp=0}finally{ap=lp=0}if(fp[0]&5)throw fp[1];return{value:fp[0]?fp[1]:void 0,done:!0}}};Object.defineProperty(OpenVidu$1,"__esModule",{value:!0});OpenVidu$1.OpenVidu=void 0;var LocalRecorder_1=LocalRecorder$1,Publisher_1=requirePublisher(),Session_1=requireSession(),SessionDisconnectedEvent_1=SessionDisconnectedEvent$1,StreamPropertyChangedEvent_1=StreamPropertyChangedEvent$1,OpenViduError_1=OpenViduError,VideoInsertMode_1=VideoInsertMode,OpenViduLogger_1=OpenViduLogger$1,Platform_1=Platform,screenSharingAuto=ScreenCapturingAuto,screenSharing=ScreenCapturing,OpenViduLoggerConfiguration_1=OpenViduLoggerConfiguration,EventEmitter=EventEmitterExports,RpcBuilder=requireKurentoJsonrpc(),packageJson=require$$14,logger=OpenViduLogger_1.OpenViduLogger.getInstance(),platform,OpenVidu=function(){function _d(){var rp=this;this.masterNodeHasCrashed=!1,this.publishers=[],this.secret="",this.recorder=!1,this.stt=!1,this.life=-1,this.advancedConfiguration={},this.webrtcStatsInterval=-1,this.sendBrowserLogs=OpenViduLoggerConfiguration_1.OpenViduLoggerConfiguration.disabled,this.isAtLeastPro=!1,this.isEnterprise=!1,this.ee=new EventEmitter,platform=Platform_1.PlatformUtils.getInstance(),this.libraryVersion=packageJson.version,logger.info("OpenVidu initialized"),logger.info("Platform detected: "+platform.getDescription()),logger.info("openvidu-browser version: "+this.libraryVersion),(platform.isMobileDevice()||platform.isReactNative())&&this.onOrientationChanged(function(){rp.publishers.forEach(function(np){np.stream.isLocalStreamPublished&&np.stream&&np.stream.hasVideo&&rp.sendNewVideoDimensionsIfRequired(np,"deviceRotated",75,10)})})}return _d.prototype.initSession=function(){return this.session=new Session_1.Session(this),this.session},_d.prototype.initPublisher=function(rp,np,ap){var sp;np&&typeof np!="function"?(sp=np,sp={audioSource:typeof sp.audioSource<"u"?sp.audioSource:void 0,frameRate:typeof MediaStreamTrack<"u"&&sp.videoSource instanceof MediaStreamTrack?void 0:typeof sp.frameRate<"u"?sp.frameRate:void 0,insertMode:typeof sp.insertMode<"u"?typeof sp.insertMode=="string"?VideoInsertMode_1.VideoInsertMode[sp.insertMode]:sp.insertMode:VideoInsertMode_1.VideoInsertMode.APPEND,mirror:typeof sp.mirror<"u"?sp.mirror:!0,publishAudio:typeof sp.publishAudio<"u"?sp.publishAudio:!0,publishVideo:typeof sp.publishVideo<"u"?sp.publishVideo:!0,resolution:typeof MediaStreamTrack<"u"&&sp.videoSource instanceof MediaStreamTrack?void 0:typeof sp.resolution<"u"?sp.resolution:"640x480",videoSource:typeof sp.videoSource<"u"?sp.videoSource:void 0,videoSimulcast:sp.videoSimulcast,filter:sp.filter}):sp={insertMode:VideoInsertMode_1.VideoInsertMode.APPEND,mirror:!0,publishAudio:!0,publishVideo:!0,resolution:"640x480"};var lp=new Publisher_1.Publisher(rp,sp,this),up;return np&&typeof np=="function"?up=np:ap&&(up=ap),lp.initialize().then(function(){up!==void 0&&up(void 0),lp.emitEvent("accessAllowed",[])}).catch(function(cp){up!==void 0&&up(cp),lp.emitEvent("accessDenied",[cp])}),this.publishers.push(lp),lp},_d.prototype.initPublisherAsync=function(rp,np){var ap=this;return new Promise(function(sp,lp){var up,cp=function(dp){return dp?lp(dp):sp(up)};np?up=ap.initPublisher(rp,np,cp):up=ap.initPublisher(rp,cp)})},_d.prototype.initLocalRecorder=function(rp){return new LocalRecorder_1.LocalRecorder(rp)},_d.prototype.checkSystemRequirements=function(){return platform.isIPhoneOrIPad()?platform.isIOSWithSafari()||platform.isChromeMobileBrowser()||platform.isFirefoxMobileBrowser()||platform.isOperaMobileBrowser()||platform.isEdgeMobileBrowser()||platform.isIonicIos():platform.isChromeBrowser()||platform.isChromeMobileBrowser()||platform.isFirefoxBrowser()||platform.isFirefoxMobileBrowser()||platform.isOperaBrowser()||platform.isOperaMobileBrowser()||platform.isEdgeBrowser()||platform.isEdgeMobileBrowser()||platform.isSamsungBrowser()||platform.isSafariBrowser()||platform.isAndroidBrowser()||platform.isElectron()||platform.isNodeJs()||platform.isMotorolaEdgeDevice()},_d.prototype.checkScreenSharingCapabilities=function(){return platform.canScreenShare()},_d.prototype.getDevices=function(){return new Promise(function(rp,np){navigator.mediaDevices.enumerateDevices().then(function(ap){var sp,lp=[];if(platform.isIonicAndroid()&&typeof cordova<"u"&&(!((sp=cordova==null?void 0:cordova.plugins)===null||sp===void 0)&&sp.EnumerateDevicesPlugin))cordova.plugins.EnumerateDevicesPlugin.getEnumerateDevices().then(function(up){var cp=[],dp=[],fp=[];return cp=up.filter(function(pp){return pp.kind==="audioinput"}),dp=ap.filter(function(pp){return pp.kind==="videoinput"}),fp=ap.filter(function(pp){return pp.kind==="audioinput"}),dp.forEach(function(pp,hp){if(pp.label)lp.push({kind:pp.kind,deviceId:pp.deviceId,label:pp.label});else{var mp="";hp===0?mp="Front Camera":hp===1?mp="Back Camera":mp="Unknown Camera",lp.push({kind:pp.kind,deviceId:pp.deviceId,label:mp})}}),fp.forEach(function(pp,hp){if(pp.label)lp.push({kind:pp.kind,deviceId:pp.deviceId,label:pp.label});else{var mp="";switch(hp){case 0:mp="Default";break;case 1:var gp=cp.filter(function(Sp){return Sp.label.includes("Built")})[0];mp=gp?gp.label:"Built-in Microphone";break;case 2:var vp=cp.filter(function(Sp){return Sp.label.includes("Wired")})[0];vp?mp=vp.label:mp="Headset earpiece";break;case 3:var xp=cp.filter(function(Sp){return Sp.label.includes("Bluetooth")})[0];mp=xp?xp.label:"Wireless";break;default:mp="Unknown Microphone";break}lp.push({kind:pp.kind,deviceId:pp.deviceId,label:mp})}}),rp(lp)});else return ap.forEach(function(up){(up.kind==="audioinput"||up.kind==="videoinput")&&lp.push({kind:up.kind,deviceId:up.deviceId,label:up.label})}),rp(lp)}).catch(function(ap){return logger.error("Error getting devices",ap),np(ap)})})},_d.prototype.getUserMedia=function(rp){var np,ap;return __awaiter(this,void 0,void 0,function(){var sp,lp,up,fp,cp,hp,mp,dp,fp,pp,hp,mp,gp,vp=this;return __generator(this,function(xp){switch(xp.label){case 0:sp=function(Sp,yp){return __awaiter(vp,void 0,void 0,function(){var bp,Ep,wp,_p;return __generator(this,function(Rp){switch(Rp.label){case 0:bp=yp.audio===void 0?!0:yp.audio,Ep={audio:bp,video:!1},Rp.label=1;case 1:return Rp.trys.push([1,3,,4]),[4,navigator.mediaDevices.getUserMedia(Ep)];case 2:return wp=Rp.sent(),Sp.addTrack(wp.getAudioTracks()[0]),[2,Sp];case 3:throw _p=Rp.sent(),Sp.getAudioTracks().forEach(function($p){$p.stop()}),Sp.getVideoTracks().forEach(function($p){$p.stop()}),this.generateAudioDeviceError(_p,Ep);case 4:return[2]}})})},xp.label=1;case 1:return xp.trys.push([1,20,,21]),[4,this.generateMediaConstraints(rp)];case 2:return lp=xp.sent(),lp.videoTrack&&lp.audioTrack||lp.audioTrack&&((np=lp.constraints)===null||np===void 0?void 0:np.video)===!1||lp.videoTrack&&((ap=lp.constraints)===null||ap===void 0?void 0:ap.audio)===!1?[2,this.addAlreadyProvidedTracks(lp,new MediaStream)]:[3,3];case 3:if(lp.videoTrack&&delete lp.constraints.video,lp.audioTrack&&delete lp.constraints.audio,up=!1,typeof rp.videoSource!="string")return[3,12];if(!(rp.videoSource==="screen"||rp.videoSource==="window"||platform.isElectron()&&rp.videoSource.startsWith("screen:")))return[3,12];if(up=!lp.audioTrack&&rp.audioSource!==null&&rp.audioSource!==!1,!(navigator.mediaDevices.getDisplayMedia&&!platform.isElectron()))return[3,11];xp.label=4;case 4:return xp.trys.push([4,9,,10]),[4,navigator.mediaDevices.getDisplayMedia({video:!0,audio:rp.audioSource==="screen"})];case 5:return fp=xp.sent(),this.addAlreadyProvidedTracks(lp,fp),up?[4,sp(fp,lp.constraints)]:[3,7];case 6:return[2,xp.sent()];case 7:return[2,fp];case 8:return[3,10];case 9:throw cp=xp.sent(),hp=OpenViduError_1.OpenViduErrorName.SCREEN_CAPTURE_DENIED,mp=cp.toString(),new OpenViduError_1.OpenViduError(hp,mp);case 10:return[3,11];case 11:return[3,12];case 12:dp=up?{video:lp.constraints.video}:lp.constraints,xp.label=13;case 13:return xp.trys.push([13,18,,19]),[4,navigator.mediaDevices.getUserMedia(dp)];case 14:return fp=xp.sent(),this.addAlreadyProvidedTracks(lp,fp),up?[4,sp(fp,lp.constraints)]:[3,16];case 15:return[2,xp.sent()];case 16:return[2,fp];case 17:return[3,19];case 18:throw pp=xp.sent(),hp=void 0,mp=pp.toString(),rp.videoSource!=="screen"?hp=OpenViduError_1.OpenViduErrorName.DEVICE_ACCESS_DENIED:hp=OpenViduError_1.OpenViduErrorName.SCREEN_CAPTURE_DENIED,new OpenViduError_1.OpenViduError(hp,mp);case 19:return[3,21];case 20:throw gp=xp.sent(),gp;case 21:return[2]}})})},_d.prototype.enableProdMode=function(){logger.enableProdMode()},_d.prototype.setAdvancedConfiguration=function(rp){this.advancedConfiguration=rp},_d.prototype.onOrientationChanged=function(rp){globalThis.addEventListener("orientationchange",rp)},_d.prototype.sendNewVideoDimensionsIfRequired=function(rp,np,ap,sp){var lp=this,up,cp,dp,fp,pp=0,hp=((cp=(up=rp==null?void 0:rp.stream)===null||up===void 0?void 0:up.videoDimensions)===null||cp===void 0?void 0:cp.width)||0,mp=((fp=(dp=rp==null?void 0:rp.stream)===null||dp===void 0?void 0:dp.videoDimensions)===null||fp===void 0?void 0:fp.height)||0,gp=setInterval(function(){pp++,pp>sp&&clearTimeout(gp),rp.getVideoDimensions().then(function(vp){(vp.width!==hp||vp.height!==mp)&&(clearTimeout(gp),lp.sendVideoDimensionsChangedEvent(rp,np,hp,mp,vp.width,vp.height))})},ap)},_d.prototype.sendVideoDimensionsChangedEvent=function(rp,np,ap,sp,lp,up){var cp=this;rp.stream.videoDimensions={width:lp||0,height:up||0},this.sendRequest("streamPropertyChanged",{streamId:rp.stream.streamId,property:"videoDimensions",newValue:JSON.stringify(rp.stream.videoDimensions),reason:np},function(dp,fp){dp?logger.error("Error sending 'streamPropertyChanged' event",dp):(cp.session.emitEvent("streamPropertyChanged",[new StreamPropertyChangedEvent_1.StreamPropertyChangedEvent(cp.session,rp.stream,"videoDimensions",rp.stream.videoDimensions,{width:ap,height:sp},np)]),rp.emitEvent("streamPropertyChanged",[new StreamPropertyChangedEvent_1.StreamPropertyChangedEvent(rp,rp.stream,"videoDimensions",rp.stream.videoDimensions,{width:ap,height:sp},np)]),cp.session.sendVideoData(rp))})},_d.prototype.sendTrackChangedEvent=function(rp,np,ap,sp){var lp=this,up={label:np},cp={label:ap},dp="trackReplaced";rp.stream.isLocalStreamPublished?this.sendRequest("streamPropertyChanged",{streamId:rp.stream.streamId,property:sp,newValue:cp,reason:dp},function(fp,pp){fp?logger.error("Error sending 'streamPropertyChanged' event",fp):(lp.session.emitEvent("streamPropertyChanged",[new StreamPropertyChangedEvent_1.StreamPropertyChangedEvent(lp.session,rp.stream,sp,cp,up,dp)]),rp.emitEvent("streamPropertyChanged",[new StreamPropertyChangedEvent_1.StreamPropertyChangedEvent(rp,rp.stream,sp,cp,up,dp)]))}):(this.session.emitEvent("streamPropertyChanged",[new StreamPropertyChangedEvent_1.StreamPropertyChangedEvent(this.session,rp.stream,sp,cp,up,dp)]),rp.emitEvent("streamPropertyChanged",[new StreamPropertyChangedEvent_1.StreamPropertyChangedEvent(rp,rp.stream,sp,cp,up,dp)]))},_d.prototype.generateMediaConstraints=function(rp){var np=this;return new Promise(function(ap,sp){var lp={audioTrack:void 0,videoTrack:void 0,constraints:{audio:void 0,video:void 0}},up=rp.audioSource,cp=rp.videoSource;if((up===null||up===!1)&&(lp.constraints.audio=!1),(cp===null||cp===!1)&&(lp.constraints.video=!1),lp.constraints.audio===!1&&lp.constraints.video===!1)return sp(new OpenViduError_1.OpenViduError(OpenViduError_1.OpenViduErrorName.NO_INPUT_SOURCE_SET,"Properties 'audioSource' and 'videoSource' cannot be set to false or null at the same time"));if(typeof MediaStreamTrack<"u"&&up instanceof MediaStreamTrack&&(lp.audioTrack=up),typeof MediaStreamTrack<"u"&&cp instanceof MediaStreamTrack&&(lp.videoTrack=cp),up===void 0&&(lp.constraints.audio=!0),cp===void 0&&(lp.constraints.video={width:{ideal:640},height:{ideal:480}}),cp!==null&&cp!==!1){if(rp.resolution){var dp=rp.resolution.toLowerCase().split("x"),fp=Number(dp[0]),pp=Number(dp[1]);lp.constraints.video={width:{ideal:fp},height:{ideal:pp}}}rp.frameRate&&(lp.constraints.video.frameRate={ideal:rp.frameRate})}return np.configureDeviceIdOrScreensharing(lp,rp,ap,sp),ap(lp)})},_d.prototype.startWs=function(rp){var np={heartbeat:5e3,ws:{uri:this.wsUri+"?sessionId="+this.session.sessionId,onconnected:rp,ondisconnect:this.disconnectCallback.bind(this),onreconnecting:this.reconnectingCallback.bind(this),onreconnected:this.reconnectedCallback.bind(this),ismasternodecrashed:this.isMasterNodeCrashed.bind(this)},rpc:{requestTimeout:1e4,heartbeatRequestTimeout:5e3,participantJoined:this.session.onParticipantJoined.bind(this.session),participantPublished:this.session.onParticipantPublished.bind(this.session),participantUnpublished:this.session.onParticipantUnpublished.bind(this.session),participantLeft:this.session.onParticipantLeft.bind(this.session),participantEvicted:this.session.onParticipantEvicted.bind(this.session),recordingStarted:this.session.onRecordingStarted.bind(this.session),recordingStopped:this.session.onRecordingStopped.bind(this.session),broadcastStarted:this.session.onBroadcastStarted.bind(this.session),broadcastStopped:this.session.onBroadcastStopped.bind(this.session),sendMessage:this.session.onNewMessage.bind(this.session),streamPropertyChanged:this.session.onStreamPropertyChanged.bind(this.session),connectionPropertyChanged:this.session.onConnectionPropertyChanged.bind(this.session),networkQualityLevelChanged:this.session.onNetworkQualityLevelChangedChanged.bind(this.session),filterEventDispatched:this.session.onFilterEventDispatched.bind(this.session),iceCandidate:this.session.recvIceCandidate.bind(this.session),mediaError:this.session.onMediaError.bind(this.session),masterNodeCrashedNotification:this.onMasterNodeCrashedNotification.bind(this),forciblyReconnectSubscriber:this.session.onForciblyReconnectSubscriber.bind(this.session),speechToTextMessage:this.session.onSpeechToTextMessage.bind(this.session),speechToTextDisconnected:this.session.onSpeechToTextDisconnected.bind(this.session)}};this.jsonRpcClient=new RpcBuilder.clients.JsonRpcClient(np)},_d.prototype.onMasterNodeCrashedNotification=function(rp){console.error("Master Node has crashed"),this.masterNodeHasCrashed=!0,this.session.onLostConnection("nodeCrashed"),this.jsonRpcClient.close(4103,"Master Node has crashed")},_d.prototype.getWsReadyState=function(){return this.jsonRpcClient.getReadyState()},_d.prototype.closeWs=function(){this.jsonRpcClient.close(4102,"Connection closed by client")},_d.prototype.sendRequest=function(rp,np,ap){var sp;np&&np instanceof Function&&(ap=np,np={}),logger.debug('Sending request: {method:"'+rp+'", params: '+JSON.stringify(np)+"}"),(sp=this.jsonRpcClient)===null||sp===void 0||sp.send(rp,np,ap)},_d.prototype.getWsUri=function(){return this.wsUri},_d.prototype.getSecret=function(){return this.secret},_d.prototype.getRecorder=function(){return this.recorder},_d.prototype.getStt=function(){return this.stt},_d.prototype.generateAudioDeviceError=function(rp,np){rp.name==="Error"&&(rp.name=rp.constructor.name);var ap,sp;switch(rp.name.toLowerCase()){case"notfounderror":return ap=OpenViduError_1.OpenViduErrorName.INPUT_AUDIO_DEVICE_NOT_FOUND,sp=rp.toString(),new OpenViduError_1.OpenViduError(ap,sp);case"notallowederror":return ap=OpenViduError_1.OpenViduErrorName.DEVICE_ACCESS_DENIED,sp=rp.toString(),new OpenViduError_1.OpenViduError(ap,sp);case"overconstrainederror":return rp.constraint.toLowerCase()==="deviceid"?(ap=OpenViduError_1.OpenViduErrorName.INPUT_AUDIO_DEVICE_NOT_FOUND,sp="Audio input device with deviceId '"+np.audio.deviceId.exact+"' not found"):(ap=OpenViduError_1.OpenViduErrorName.PUBLISHER_PROPERTIES_ERROR,sp="Audio input device doesn't support the value passed for constraint '"+rp.constraint+"'"),new OpenViduError_1.OpenViduError(ap,sp);case"notreadableerror":return ap=OpenViduError_1.OpenViduErrorName.DEVICE_ALREADY_IN_USE,sp=rp.toString(),new OpenViduError_1.OpenViduError(ap,sp);default:return new OpenViduError_1.OpenViduError(OpenViduError_1.OpenViduErrorName.INPUT_AUDIO_DEVICE_GENERIC_ERROR,rp.toString())}},_d.prototype.addAlreadyProvidedTracks=function(rp,np,ap){return rp.videoTrack&&(np.addTrack(rp.videoTrack),ap&&(rp.constraints.video?ap.lastVideoTrackConstraints=rp.constraints.video:ap.lastVideoTrackConstraints=rp.videoTrack.getConstraints())),rp.audioTrack&&np.addTrack(rp.audioTrack),np},_d.prototype.configureDeviceIdOrScreensharing=function(rp,np,ap,sp){var lp=this,up=np.audioSource,cp=np.videoSource;if(typeof up=="string"&&up!=="screen"&&(rp.constraints.audio={deviceId:{exact:up}}),typeof cp=="string")if(!this.isScreenShare(cp))this.setVideoSource(rp,cp),up==="screen"&&(logger.warn('Parameter "audioSource" is set to "screen", which means rquesting audio from screen sharing source. But "videoSource" is not set to "screen". No audio source will be requested'),rp.constraints.audio=!1);else if(this.checkScreenSharingCapabilities())if(platform.isElectron()){var fp="screen:",pp=cp,hp=pp.substr(pp.indexOf(fp)+fp.length);return rp.constraints.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:hp}},ap(rp)}else if(this.advancedConfiguration.screenShareChromeExtension&&!(platform.isFirefoxBrowser()||platform.isFirefoxMobileBrowser())&&!navigator.mediaDevices.getDisplayMedia){screenSharing.getScreenConstraints(function(gp,vp){if(gp||vp.mandatory&&vp.mandatory.chromeMediaSource==="screen")if(gp==="permission-denied"||gp==="PermissionDeniedError"){var xp=new OpenViduError_1.OpenViduError(OpenViduError_1.OpenViduErrorName.SCREEN_CAPTURE_DENIED,"You must allow access to one window of your desktop");return logger.error(xp),sp(xp)}else{var Sp=lp.advancedConfiguration.screenShareChromeExtension.split("/").pop().trim();screenSharing.getChromeExtensionStatus(Sp,function(yp){if(yp==="installed-disabled"){var bp=new OpenViduError_1.OpenViduError(OpenViduError_1.OpenViduErrorName.SCREEN_EXTENSION_DISABLED,"You must enable the screen extension");return logger.error(bp),sp(bp)}if(yp==="not-installed"){var Ep=new OpenViduError_1.OpenViduError(OpenViduError_1.OpenViduErrorName.SCREEN_EXTENSION_NOT_INSTALLED,lp.advancedConfiguration.screenShareChromeExtension);return logger.error(Ep),sp(Ep)}});return}else return rp.constraints.video=vp,ap(rp)});return}else{if(navigator.mediaDevices.getDisplayMedia)return ap(rp);var mp=platform.isFirefoxBrowser()||platform.isFirefoxMobileBrowser()?np.videoSource:void 0;screenSharingAuto.getScreenId(mp,function(gp,vp,xp){if(gp)if(gp==="not-installed"){var Sp=lp.advancedConfiguration.screenShareChromeExtension?lp.advancedConfiguration.screenShareChromeExtension:"https://chrome.google.com/webstore/detail/openvidu-screensharing/lfcgfepafnobdloecchnfaclibenjold",yp=new OpenViduError_1.OpenViduError(OpenViduError_1.OpenViduErrorName.SCREEN_EXTENSION_NOT_INSTALLED,Sp);return logger.error(yp),sp(yp)}else if(gp==="installed-disabled"){var yp=new OpenViduError_1.OpenViduError(OpenViduError_1.OpenViduErrorName.SCREEN_EXTENSION_DISABLED,"You must enable the screen extension");return logger.error(yp),sp(yp)}else if(gp==="permission-denied"){var yp=new OpenViduError_1.OpenViduError(OpenViduError_1.OpenViduErrorName.SCREEN_CAPTURE_DENIED,"You must allow access to one window of your desktop");return logger.error(yp),sp(yp)}else{var yp=new OpenViduError_1.OpenViduError(OpenViduError_1.OpenViduErrorName.GENERIC_ERROR,"Unknown error when accessing screen share");return logger.error(yp),logger.error(gp),sp(yp)}else return rp.constraints.video=xp.video,ap(rp)});return}else{var dp=new OpenViduError_1.OpenViduError(OpenViduError_1.OpenViduErrorName.SCREEN_SHARING_NOT_SUPPORTED,"You can only screen share in desktop Chrome, Firefox, Opera, Safari (>=13.0), Edge (>= 80) or Electron. Detected client: "+platform.getName()+" "+platform.getVersion());return logger.error(dp),sp(dp)}},_d.prototype.setVideoSource=function(rp,np){rp.constraints.video||(rp.constraints.video={}),rp.constraints.video.deviceId={exact:np}},_d.prototype.disconnectCallback=function(){logger.warn("Websocket connection lost"),this.isRoomAvailable()?this.session.onLostConnection("networkDisconnect"):alert("Connection error. Please reload page.")},_d.prototype.reconnectingCallback=function(){logger.warn("Websocket connection lost (reconnecting)"),this.isRoomAvailable()?this.session.emitEvent("reconnecting",[]):alert("Connection error. Please reload page.")},_d.prototype.reconnectWebsocketThroughRpcConnectMethod=function(rp){var np=this;this.sendRequest("connect",{sessionId:rp,reconnect:!0},function(ap,sp){if(ap)if(np.isMasterNodeCrashed())logger.warn("Master Node has crashed!");else{logger.error(ap);var lp=function(cp,dp){logger.warn(dp),np.session.onLostConnection(cp),np.jsonRpcClient.close(4101,"Reconnection fault: "+dp)},up=function(){np.life===-1?lp("networkDisconnect","WS successfully reconnected but the user was already evicted due to timeout"):np.sendRequest("sessionStatus",{sessionId:np.session.sessionId},function(cp,dp){cp!=null?console.error("Error checking session status",cp):np.life===dp.life?lp("networkDisconnect","WS successfully reconnected but the user was already evicted due to timeout"):lp("nodeCrashed","WS successfully reconnected to OpenVidu Server but your Master Node crashed")})};ap.code===40007&&ap.message==="reconnection error"&&console.error("Invalid RPC sessionId. Client network disconnection or Master Node crash"),up()}else np.jsonRpcClient.resetPing(),np.session.onRecoveredConnection()})},_d.prototype.reconnectedCallback=function(){if(logger.warn("Websocket reconnected"),this.isRoomAvailable())if(this.session.connection)this.reconnectWebsocketThroughRpcConnectMethod(this.session.connection.rpcSessionId);else{logger.warn("There was no previous connection when running reconnection callback");var rp=new SessionDisconnectedEvent_1.SessionDisconnectedEvent(this.session,"networkDisconnect");this.session.ee.emitEvent("sessionDisconnected",[rp]),rp.callDefaultBehavior()}else alert("Connection error. Please reload page.")},_d.prototype.isMasterNodeCrashed=function(){return this.masterNodeHasCrashed},_d.prototype.isRoomAvailable=function(){return this.session!==void 0&&this.session instanceof Session_1.Session?!0:(logger.warn("Session instance not found"),!1)},_d.prototype.isScreenShare=function(rp){return rp==="screen"||rp==="window"||platform.isElectron()&&rp.startsWith("screen:")},_d}();OpenVidu$1.OpenVidu=OpenVidu;var Types={};Object.defineProperty(Types,"__esModule",{value:!0});(function(_d){var rp=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(Pp,Tp,Np,jp){jp===void 0&&(jp=Np);var Vp=Object.getOwnPropertyDescriptor(Tp,Np);(!Vp||("get"in Vp?!Tp.__esModule:Vp.writable||Vp.configurable))&&(Vp={enumerable:!0,get:function(){return Tp[Np]}}),Object.defineProperty(Pp,jp,Vp)}:function(Pp,Tp,Np,jp){jp===void 0&&(jp=Np),Pp[jp]=Tp[Np]}),np=commonjsGlobal&&commonjsGlobal.__exportStar||function(Pp,Tp){for(var Np in Pp)Np!=="default"&&!Object.prototype.hasOwnProperty.call(Tp,Np)&&rp(Tp,Pp,Np)};Object.defineProperty(_d,"__esModule",{value:!0}),_d.EventDispatcher=_d.ExceptionEventName=_d.ExceptionEvent=_d.SpeechToTextEvent=_d.NetworkQualityLevelChangedEvent=_d.FilterEvent=_d.ConnectionPropertyChangedEvent=_d.StreamPropertyChangedEvent=_d.VideoElementEvent=_d.StreamManagerEvent=_d.StreamEvent=_d.SignalEvent=_d.SessionDisconnectedEvent=_d.RecordingEvent=_d.PublisherSpeakingEvent=_d.ConnectionEvent=_d.Event=_d.VideoInsertMode=_d.TypeOfVideo=_d.OpenViduErrorName=_d.OpenViduError=_d.LocalRecorderState=_d.Filter=_d.LocalRecorder=_d.Connection=_d.Stream=_d.StreamManager=_d.Subscriber=_d.Publisher=_d.Session=_d.OpenVidu=void 0;var ap=jsnlog,sp=OpenVidu$1;Object.defineProperty(_d,"OpenVidu",{enumerable:!0,get:function(){return sp.OpenVidu}});var lp=requireSession();Object.defineProperty(_d,"Session",{enumerable:!0,get:function(){return lp.Session}});var up=requirePublisher();Object.defineProperty(_d,"Publisher",{enumerable:!0,get:function(){return up.Publisher}});var cp=Subscriber$1;Object.defineProperty(_d,"Subscriber",{enumerable:!0,get:function(){return cp.Subscriber}});var dp=StreamManager$1;Object.defineProperty(_d,"StreamManager",{enumerable:!0,get:function(){return dp.StreamManager}});var fp=Stream$1;Object.defineProperty(_d,"Stream",{enumerable:!0,get:function(){return fp.Stream}});var pp=Connection$1;Object.defineProperty(_d,"Connection",{enumerable:!0,get:function(){return pp.Connection}});var hp=LocalRecorder$1;Object.defineProperty(_d,"LocalRecorder",{enumerable:!0,get:function(){return hp.LocalRecorder}});var mp=Filter$1;Object.defineProperty(_d,"Filter",{enumerable:!0,get:function(){return mp.Filter}});var gp=LocalRecorderState;Object.defineProperty(_d,"LocalRecorderState",{enumerable:!0,get:function(){return gp.LocalRecorderState}});var vp=OpenViduError;Object.defineProperty(_d,"OpenViduError",{enumerable:!0,get:function(){return vp.OpenViduError}}),Object.defineProperty(_d,"OpenViduErrorName",{enumerable:!0,get:function(){return vp.OpenViduErrorName}});var xp=TypeOfVideo;Object.defineProperty(_d,"TypeOfVideo",{enumerable:!0,get:function(){return xp.TypeOfVideo}});var Sp=VideoInsertMode;Object.defineProperty(_d,"VideoInsertMode",{enumerable:!0,get:function(){return Sp.VideoInsertMode}});var yp=Event$2;Object.defineProperty(_d,"Event",{enumerable:!0,get:function(){return yp.Event}});var bp=ConnectionEvent$1;Object.defineProperty(_d,"ConnectionEvent",{enumerable:!0,get:function(){return bp.ConnectionEvent}});var Ep=PublisherSpeakingEvent$1;Object.defineProperty(_d,"PublisherSpeakingEvent",{enumerable:!0,get:function(){return Ep.PublisherSpeakingEvent}});var wp=RecordingEvent$1;Object.defineProperty(_d,"RecordingEvent",{enumerable:!0,get:function(){return wp.RecordingEvent}});var _p=SessionDisconnectedEvent$1;Object.defineProperty(_d,"SessionDisconnectedEvent",{enumerable:!0,get:function(){return _p.SessionDisconnectedEvent}});var Rp=SignalEvent$1;Object.defineProperty(_d,"SignalEvent",{enumerable:!0,get:function(){return Rp.SignalEvent}});var $p=requireStreamEvent();Object.defineProperty(_d,"StreamEvent",{enumerable:!0,get:function(){return $p.StreamEvent}});var Cp=StreamManagerEvent$1;Object.defineProperty(_d,"StreamManagerEvent",{enumerable:!0,get:function(){return Cp.StreamManagerEvent}});var Ap=VideoElementEvent$1;Object.defineProperty(_d,"VideoElementEvent",{enumerable:!0,get:function(){return Ap.VideoElementEvent}});var Op=StreamPropertyChangedEvent$1;Object.defineProperty(_d,"StreamPropertyChangedEvent",{enumerable:!0,get:function(){return Op.StreamPropertyChangedEvent}});var Lp=ConnectionPropertyChangedEvent$1;Object.defineProperty(_d,"ConnectionPropertyChangedEvent",{enumerable:!0,get:function(){return Lp.ConnectionPropertyChangedEvent}});var Mp=FilterEvent$1;Object.defineProperty(_d,"FilterEvent",{enumerable:!0,get:function(){return Mp.FilterEvent}});var kp=NetworkQualityLevelChangedEvent$1;Object.defineProperty(_d,"NetworkQualityLevelChangedEvent",{enumerable:!0,get:function(){return kp.NetworkQualityLevelChangedEvent}});var Dp=SpeechToTextEvent$1;Object.defineProperty(_d,"SpeechToTextEvent",{enumerable:!0,get:function(){return Dp.SpeechToTextEvent}});var Fp=ExceptionEvent;Object.defineProperty(_d,"ExceptionEvent",{enumerable:!0,get:function(){return Fp.ExceptionEvent}}),Object.defineProperty(_d,"ExceptionEventName",{enumerable:!0,get:function(){return Fp.ExceptionEventName}});var Ip=EventDispatcher$1;Object.defineProperty(_d,"EventDispatcher",{enumerable:!0,get:function(){return Ip.EventDispatcher}}),np(Types,_d),ap.JL.setOptions({enabled:!1})})(lib);class UserModel{constructor(){Pm(this,"connectionId");Pm(this,"audioActive");Pm(this,"videoActive");Pm(this,"screenShareActive");Pm(this,"nickname");Pm(this,"streamManager");Pm(this,"type");this.connectionId="",this.audioActive=!0,this.videoActive=!0,this.screenShareActive=!1,this.nickname="",this.streamManager=null,this.type="local"}isAudioActive(){return this.audioActive}isVideoActive(){return this.videoActive}isScreenShareActive(){return this.screenShareActive}getConnectionId(){return this.connectionId}getNickname(){return this.nickname}getStreamManager(){return this.streamManager}isLocal(){return this.type==="local"}isRemote(){return!this.isLocal()}setAudioActive(rp){this.audioActive=rp}setVideoActive(rp){this.videoActive=rp}setScreenShareActive(rp){this.screenShareActive=rp}setStreamManager(rp){this.streamManager=rp}setConnectionId(rp){this.connectionId=rp}setNickname(rp){this.nickname=rp}setType(rp){rp==="local"|rp==="remote"&&(this.type=rp)}}class OpenViduLayout{constructor(){Pm(this,"layoutContainer");Pm(this,"opts")}fixAspectRatio(rp,np){const ap=rp.querySelector(".OT_root");if(ap){const sp=ap.style.width;ap.style.width=np+"px",ap.style.width=sp||""}}positionElement(rp,np,ap,sp,lp,up){const cp={left:np+"px",top:ap+"px",width:sp+"px",height:lp+"px"};this.fixAspectRatio(rp,sp),up&&$?($(rp).stop(),$(rp).animate(cp,up.duration||200,up.easing||"swing",()=>{this.fixAspectRatio(rp,sp),up.complete&&up.complete.call(this)})):$(rp).css(cp),this.fixAspectRatio(rp,sp)}getVideoRatio(rp){if(!rp)return 3/4;const np=rp.querySelector("video");return np&&np.videoHeight&&np.videoWidth?np.videoHeight/np.videoWidth:rp.videoHeight&&rp.videoWidth?rp.videoHeight/rp.videoWidth:3/4}getCSSNumber(rp,np){const ap=$(rp).css(np);return ap?parseInt(ap,10):0}cheapUUID(){return(Math.random()*1e8).toFixed(0)}getHeight(rp){const np=$(rp).css("height");return np?parseInt(np,10):0}getWidth(rp){const np=$(rp).css("width");return np?parseInt(np,10):0}getBestDimensions(rp,np,ap,sp,lp,up){let cp,dp,fp,pp,hp,mp,gp;for(let vp=1;vp<=ap;vp++){const xp=vp,Sp=Math.ceil(ap/xp);mp=Math.floor(lp/Sp),hp=Math.floor(sp/xp),gp=mp/hp,gp>np?(gp=np,mp=hp*gp):gp<rp&&(gp=rp,hp=mp/gp);const yp=hp*mp*ap;(cp===void 0||yp>cp)&&(cp=yp,up=mp,pp=hp,dp=xp,fp=Sp)}return{maxArea:cp,targetCols:dp,targetRows:fp,targetHeight:up,targetWidth:pp,ratio:up/pp}}arrange(rp,np,ap,sp,lp,up,cp,dp,fp){let pp;const hp=rp.length;let mp;if(!up)mp=this.getBestDimensions(cp,dp,hp,np,ap,pp);else{const Ep=this.getVideoRatio(rp.length>0?rp[0]:null);mp=this.getBestDimensions(Ep,Ep,hp,np,ap,pp)}let gp=0,vp=0;const xp=[];let Sp;for(let Ep=0;Ep<rp.length;Ep++){Ep%mp.targetCols===0&&(Sp={children:[],width:0,height:0},xp.push(Sp));const wp=rp[Ep];Sp.children.push(wp);let _p=mp.targetWidth;pp=mp.targetHeight,up&&(_p=pp/this.getVideoRatio(wp)),Sp.width+=_p,Sp.height=pp}let yp=0,bp=0;for(let Ep=0;Ep<xp.length;Ep++)Sp=xp[Ep],Sp.width>np?(Sp.height=Math.floor(Sp.height*(np/Sp.width)),Sp.width=np):Sp.width<np&&(bp+=1),yp+=Sp.height;if(yp<ap&&bp>0){let Ep=ap-yp;yp=0;for(let wp=0;wp<xp.length;wp++){if(Sp=xp[wp],Sp.width<np){let _p=Ep/bp;_p/Sp.height>(np-Sp.width)/Sp.width&&(_p=Math.floor((np-Sp.width)/Sp.width*Sp.height)),Sp.width+=Math.floor(_p/Sp.height*Sp.width),Sp.height+=_p,Ep-=_p,bp-=1}yp+=Sp.height}}vp=(ap-yp)/2;for(let Ep=0;Ep<xp.length;Ep++){Sp=xp[Ep],gp=(np-Sp.width)/2;for(let _p=0;_p<Sp.children.length;_p++){const Rp=Sp.children[_p];let $p=mp.targetWidth;pp=Sp.height,up&&($p=Math.floor(pp/this.getVideoRatio(Rp))),Rp.style.position="absolute";const Cp=$p-this.getCSSNumber(Rp,"paddingLeft")-this.getCSSNumber(Rp,"paddingRight")-this.getCSSNumber(Rp,"marginLeft")-this.getCSSNumber(Rp,"marginRight")-this.getCSSNumber(Rp,"borderLeft")-this.getCSSNumber(Rp,"borderRight"),Ap=pp-this.getCSSNumber(Rp,"paddingTop")-this.getCSSNumber(Rp,"paddingBottom")-this.getCSSNumber(Rp,"marginTop")-this.getCSSNumber(Rp,"marginBottom")-this.getCSSNumber(Rp,"borderTop")-this.getCSSNumber(Rp,"borderBottom");this.positionElement(Rp,gp+sp,vp+lp,Cp,Ap,fp),gp+=$p}vp+=pp}}filterDisplayNone(rp){return rp.style.display!=="none"}updateLayout(){if(this.layoutContainer.style.display==="none")return;let rp=this.layoutContainer.id;rp||(rp="OT_"+this.cheapUUID(),this.layoutContainer.id=rp);const np=this.getHeight(this.layoutContainer)-this.getCSSNumber(this.layoutContainer,"borderTop")-this.getCSSNumber(this.layoutContainer,"borderBottom"),ap=this.getWidth(this.layoutContainer)-this.getCSSNumber(this.layoutContainer,"borderLeft")-this.getCSSNumber(this.layoutContainer,"borderRight"),sp=np/ap;let lp=0,up=0,cp=0,dp=0;const fp=Array.prototype.filter.call(this.layoutContainer.querySelectorAll("#"+rp+">."+this.opts.bigClass),this.filterDisplayNone),pp=Array.prototype.filter.call(this.layoutContainer.querySelectorAll("#"+rp+">*:not(."+this.opts.bigClass+")"),this.filterDisplayNone);if(fp.length>0&&pp.length>0){let hp,mp;sp>this.getVideoRatio(fp[0])?(hp=ap,mp=Math.floor(np*this.opts.bigPercentage),up=mp,cp=np-up):(mp=np,hp=Math.floor(ap*this.opts.bigPercentage),lp=hp,dp=ap-lp),this.opts.bigFirst?(this.arrange(fp,hp,mp,0,0,this.opts.bigFixedRatio,this.opts.bigMinRatio,this.opts.bigMaxRatio,this.opts.animate),this.arrange(pp,ap-lp,np-up,lp,up,this.opts.fixedRatio,this.opts.minRatio,this.opts.maxRatio,this.opts.animate)):(this.arrange(pp,ap-lp,np-up,0,0,this.opts.fixedRatio,this.opts.minRatio,this.opts.maxRatio,this.opts.animate),this.arrange(fp,hp,mp,dp,cp,this.opts.bigFixedRatio,this.opts.bigMinRatio,this.opts.bigMaxRatio,this.opts.animate))}else fp.length>0&&pp.length===0?this.arrange(fp,ap,np,0,0,this.opts.bigFixedRatio,this.opts.bigMinRatio,this.opts.bigMaxRatio,this.opts.animate):this.arrange(pp,ap-lp,np-up,lp,up,this.opts.fixedRatio,this.opts.minRatio,this.opts.maxRatio,this.opts.animate)}initLayoutContainer(rp,np){this.opts={maxRatio:np.maxRatio!=null?np.maxRatio:3/2,minRatio:np.minRatio!=null?np.minRatio:9/16,fixedRatio:np.fixedRatio!=null?np.fixedRatio:!1,animate:np.animate!=null?np.animate:!1,bigClass:np.bigClass!=null?np.bigClass:"OT_big",bigPercentage:np.bigPercentage!=null?np.bigPercentage:.8,bigFixedRatio:np.bigFixedRatio!=null?np.bigFixedRatio:!1,bigMaxRatio:np.bigMaxRatio!=null?np.bigMaxRatio:3/2,bigMinRatio:np.bigMinRatio!=null?np.bigMinRatio:9/16,bigFirst:np.bigFirst!=null?np.bigFirst:!0},this.layoutContainer=typeof rp=="string"?$(rp):rp}setLayoutOptions(rp){this.opts=rp}}class OvVideoComponent extends reactExports.Component{constructor(rp){super(rp),this.videoRef=React.createRef(),console.log(rp)}componentDidUpdate(rp){rp&&this.videoRef&&this.props.streamManager.addVideoElement(this.videoRef.current)}componentDidMount(){this.props&&this.videoRef&&this.props.streamManager.addVideoElement(this.videoRef.current)}render(){return jsxRuntimeExports.jsx("video",{autoPlay:!0,ref:this.videoRef})}}class UserVideoComponent extends reactExports.Component{constructor(rp){super(rp),console.log(rp)}render(){return jsxRuntimeExports.jsx("div",{children:this.props.streamManager!==void 0?jsxRuntimeExports.jsx("div",{className:"streamcomponent",children:jsxRuntimeExports.jsx(OvVideoComponent,{streamManager:this.props.streamManager})}):jsxRuntimeExports.jsx("span",{children:"호스트가 없습니다."})})}}var MicNoneOutlined={},_interopRequireDefault$d=interopRequireDefaultExports;Object.defineProperty(MicNoneOutlined,"__esModule",{value:!0});var default_1$d=MicNoneOutlined.default=void 0,_createSvgIcon$d=_interopRequireDefault$d(requireCreateSvgIcon()),_jsxRuntime$d=jsxRuntimeExports;default_1$d=MicNoneOutlined.default=(0,_createSvgIcon$d.default)((0,_jsxRuntime$d.jsx)("path",{d:"M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3m-1-9c0-.55.45-1 1-1s1 .45 1 1v6c0 .55-.45 1-1 1s-1-.45-1-1zm6 6c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92z"}),"MicNoneOutlined");var MicOffOutlined={},_interopRequireDefault$c=interopRequireDefaultExports;Object.defineProperty(MicOffOutlined,"__esModule",{value:!0});var default_1$c=MicOffOutlined.default=void 0,_createSvgIcon$c=_interopRequireDefault$c(requireCreateSvgIcon()),_jsxRuntime$c=jsxRuntimeExports;default_1$c=MicOffOutlined.default=(0,_createSvgIcon$c.default)((0,_jsxRuntime$c.jsx)("path",{d:"M10.8 4.9c0-.66.54-1.2 1.2-1.2s1.2.54 1.2 1.2l-.01 3.91L15 10.6V5c0-1.66-1.34-3-3-3-1.54 0-2.79 1.16-2.96 2.65l1.76 1.76zM19 11h-1.7c0 .58-.1 1.13-.27 1.64l1.27 1.27c.44-.88.7-1.87.7-2.91M4.41 2.86 3 4.27l6 6V11c0 1.66 1.34 3 3 3 .23 0 .44-.03.65-.08l1.66 1.66c-.71.33-1.5.52-2.31.52-2.76 0-5.3-2.1-5.3-5.1H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c.91-.13 1.77-.45 2.55-.9l4.2 4.2 1.41-1.41z"}),"MicOffOutlined");var VideocamOutlined={},_interopRequireDefault$b=interopRequireDefaultExports;Object.defineProperty(VideocamOutlined,"__esModule",{value:!0});var default_1$b=VideocamOutlined.default=void 0,_createSvgIcon$b=_interopRequireDefault$b(requireCreateSvgIcon()),_jsxRuntime$b=jsxRuntimeExports;default_1$b=VideocamOutlined.default=(0,_createSvgIcon$b.default)((0,_jsxRuntime$b.jsx)("path",{d:"M15 8v8H5V8zm1-2H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4V7c0-.55-.45-1-1-1"}),"VideocamOutlined");var VideocamOffOutlined={},_interopRequireDefault$a=interopRequireDefaultExports;Object.defineProperty(VideocamOffOutlined,"__esModule",{value:!0});var default_1$a=VideocamOffOutlined.default=void 0,_createSvgIcon$a=_interopRequireDefault$a(requireCreateSvgIcon()),_jsxRuntime$a=jsxRuntimeExports;default_1$a=VideocamOffOutlined.default=(0,_createSvgIcon$a.default)((0,_jsxRuntime$a.jsx)("path",{d:"m9.56 8-2-2-4.15-4.14L2 3.27 4.73 6H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.21 0 .39-.08.55-.18L19.73 21l1.41-1.41-8.86-8.86zM5 16V8h1.73l8 8zm10-8v2.61l6 6V6.5l-4 4V7c0-.55-.45-1-1-1h-5.61l2 2z"}),"VideocamOffOutlined");const ToolbarComponent=({user:_d,isHost:rp,micStatusChanged:np,camStatusChanged:ap,setIsSwitchCameraModal:sp,hostNickname:lp,hostProfileImg:up,setLeaveModal:cp,totalUsers:dp})=>{const[fp,pp]=reactExports.useState(!0),[hp,mp]=reactExports.useState(!0);return reactExports.useEffect(()=>{pp(_d.stream.audioActive)},[_d.stream.audioActive]),reactExports.useEffect(()=>{mp(_d.stream.videoActive)},[_d.stream.videoActive]),jsxRuntimeExports.jsxs("div",{className:"toolbar-container",children:[jsxRuntimeExports.jsxs("div",{className:"toolbar-host-info",children:[jsxRuntimeExports.jsx("img",{src:up,alt:"toolbar-Host profile"}),jsxRuntimeExports.jsx("span",{children:lp})]}),jsxRuntimeExports.jsxs("div",{className:"toolbar-count-subscribers",children:[jsxRuntimeExports.jsx("img",{src:group,alt:""}),dp]}),jsxRuntimeExports.jsxs("div",{className:"toolbar-option-btn",children:[jsxRuntimeExports.jsx(default_1$r,{onClick:()=>cp(!0),className:"toolbar-option-icon"}),rp&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[fp?jsxRuntimeExports.jsx(default_1$d,{onClick:np,className:"toolbar-option-icon"}):jsxRuntimeExports.jsx(default_1$c,{onClick:np,className:"toolbar-option-icon"}),hp?jsxRuntimeExports.jsx(default_1$b,{onClick:ap,className:"toolbar-option-icon"}):jsxRuntimeExports.jsx(default_1$a,{onClick:ap,className:"toolbar-option-icon"})]})]})]})},ChattingList=_d=>{const rp=reactExports.useRef(),np=reactExports.useRef(null),ap=reactExports.useRef(null),[sp,lp]=reactExports.useState(!0),up=()=>{ap.current&&clearTimeout(ap.current),ap.current=setTimeout(()=>{const dp=np.current.scrollTop,fp=np.current.clientHeight,pp=np.current.scrollHeight;lp(dp+fp>=pp-100)},100)},cp=reactExports.useCallback(()=>{up()},[]);return reactExports.useEffect(()=>{sp&&rp.current.scrollIntoView({behavior:"smooth"})},[_d.messageList]),reactExports.useEffect(()=>(np.current.addEventListener("scroll",cp),()=>{ap.current&&clearTimeout(ap.current),np.current&&np.current.removeEventListener("scroll",cp)}),[cp]),_d.chatDisplay,jsxRuntimeExports.jsxs("div",{className:"chatContainer",ref:np,children:[jsxRuntimeExports.jsx("div",{children:_d.messageList.map((dp,fp)=>jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs("div",{className:"chat-box",children:[jsxRuntimeExports.jsx("img",{src:dp.split("|")[1],alt:"",className:"user-img"}),jsxRuntimeExports.jsxs("div",{className:"msg-detail",children:[jsxRuntimeExports.jsx("div",{className:"msg-info",children:jsxRuntimeExports.jsx("p",{children:dp.split("|")[0]})}),jsxRuntimeExports.jsxs("div",{className:"msg-content",children:[jsxRuntimeExports.jsx("span",{className:"triangle"}),jsxRuntimeExports.jsx("p",{className:"text",children:dp.split("|")[2]})]})]})]})},fp))}),jsxRuntimeExports.jsx("div",{ref:rp})]})};var Send={},_interopRequireDefault$9=interopRequireDefaultExports;Object.defineProperty(Send,"__esModule",{value:!0});var default_1$9=Send.default=void 0,_createSvgIcon$9=_interopRequireDefault$9(requireCreateSvgIcon()),_jsxRuntime$9=jsxRuntimeExports;default_1$9=Send.default=(0,_createSvgIcon$9.default)((0,_jsxRuntime$9.jsx)("path",{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"}),"Send");const ChattingForm=_d=>{const[rp,np]=reactExports.useState(""),ap=up=>{up.preventDefault(),rp.trim()!==""&&_d.onMessage(`${_d.myUserName}|${_d.myUserImg}|`+rp.trim(),_d.currentSession),np("")},sp=up=>{np(up.target.value)},lp=up=>{up.key==="Enter"&&(up.preventDefault(),ap(up))};return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{id:"messageInput",children:[jsxRuntimeExports.jsx("input",{placeholder:"댓글 달기",id:"chatInput",value:rp,onChange:sp,onKeyPress:lp,onpaste:"return false;"}),rp.trim()!==""&&jsxRuntimeExports.jsx("div",{className:"send-reply",onClick:ap,children:jsxRuntimeExports.jsx(default_1$9,{})})]})})},useWindowSize=()=>{const[_d,rp]=reactExports.useState({width:window.innerWidth,height:window.innerHeight});return reactExports.useEffect(()=>{const np=()=>{rp({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",np),()=>{window.removeEventListener("resize",np)}},[]),_d};function LeaveModal({state:_d,leaveSession:rp}){const np=reactExports.useRef();reactExports.useEffect(()=>{np.current.showModal()});const ap=up=>{const dp=up.target.getBoundingClientRect();(dp.left>up.clientX||dp.right<up.clientX||dp.top>up.clientY||dp.bottom<up.clientY)&&(np.current.close(),_d(!_d))},sp=up=>{np.current.close(),_d(!_d)},lp=up=>{_d(!_d),rp()};return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("dialog",{ref:np,onClick:ap,className:"leave-modal",children:[jsxRuntimeExports.jsx("header",{className:"leave-modal-header",children:jsxRuntimeExports.jsx("h3",{children:"라이브를 종료하시겠어요?"})}),jsxRuntimeExports.jsxs("div",{className:"leave-modal-body",children:[jsxRuntimeExports.jsx("div",{onClick:sp,children:"취소"}),jsxRuntimeExports.jsx("div",{onClick:lp,children:"나가기"})]})]})})}function LiveEndModal({open:_d,close:rp}){return jsxRuntimeExports.jsxs("dialog",{open:_d,children:[jsxRuntimeExports.jsx("div",{children:"라이브가 종료되었습니다."}),jsxRuntimeExports.jsx("div",{onClick:rp,children:"확인"})]})}function SwitchCameraModal({state:_d,onDevice:rp}){const np=reactExports.useRef(),[ap,sp]=reactExports.useState([]),[lp,up]=reactExports.useState(null);reactExports.useEffect(()=>{navigator.mediaDevices.getUserMedia({video:!0}).then(fp=>{const pp=fp.getVideoTracks()[0];up(pp.getSettings().deviceId)}).catch(fp=>console.error(fp)),navigator.mediaDevices.enumerateDevices().then(fp=>{let pp=fp.filter(hp=>hp.kind==="videoinput");sp(pp),np.current.showModal()})},[]);const cp=fp=>{const hp=fp.target.getBoundingClientRect();(hp.left>fp.clientX||hp.right<fp.clientX||hp.top>fp.clientY||hp.bottom<fp.clientY)&&(np.current.close(),_d(!_d))},dp=fp=>{const pp=fp.target.value;rp(pp),up(pp)};return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("dialog",{ref:np,onClick:cp,className:"switch-camera-modal",children:[jsxRuntimeExports.jsx("header",{className:"switch-camera-modal-header",children:jsxRuntimeExports.jsx("h3",{children:"전환 할 카메라를 선택해주세요"})}),jsxRuntimeExports.jsx("div",{className:"switch-camera-modal-body",children:ap.map(fp=>jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("input",{type:"radio",id:fp.deviceId,name:"camera",value:fp.deviceId,checked:lp===fp.deviceId,onChange:dp}),jsxRuntimeExports.jsx("label",{htmlFor:fp.deviceId,children:fp.label})]},fp.deviceId))})]})})}function LuFish(_d){return GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M6.5 12c.94-3.46 4.94-6 8.5-6 3.56 0 6.06 2.54 7 6-.94 3.47-3.44 6-7 6s-7.56-2.53-8.5-6Z"},child:[]},{tag:"path",attr:{d:"M18 12v.5"},child:[]},{tag:"path",attr:{d:"M16 17.93a9.77 9.77 0 0 1 0-11.86"},child:[]},{tag:"path",attr:{d:"M7 10.67C7 8 5.58 5.97 2.73 5.5c-1 1.5-1 5 .23 6.5-1.24 1.5-1.24 5-.23 6.5C5.58 18.03 7 16 7 13.33"},child:[]},{tag:"path",attr:{d:"M10.46 7.26C10.2 5.88 9.17 4.24 8 3h5.8a2 2 0 0 1 1.98 1.67l.23 1.4"},child:[]},{tag:"path",attr:{d:"m16.01 17.93-.23 1.4A2 2 0 0 1 13.8 21H9.5a5.96 5.96 0 0 0 1.49-3.98"},child:[]}]})(_d)}let idCounter=0;const HeartButton=({session:_d,myUserName:rp,myUserImg:np,favIcons:ap,setFavIcons:sp})=>{const lp=["🦈","🐬","🐳","🐋","🐟","🐠","🐡","🦐","🦑","🐙","🦀","🦞","🐚","🎣","💖"],up=()=>{const cp=lp[Math.floor(Math.random()*lp.length)];sp(dp=>[...dp,{id:idCounter++,y:100,icon:cp}]),_d.signal({data:`${rp}|${np}|${cp}`,type:"heart"}).catch(dp=>console.error("Error sending heart signal:",dp))};return reactExports.useEffect(()=>{const cp=setInterval(()=>{sp(dp=>dp.filter(fp=>fp.y>50))},2e3);return()=>clearInterval(cp)},[]),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(LuFish,{onClick:up}),jsxRuntimeExports.jsx("div",{children:ap.map(cp=>jsxRuntimeExports.jsx("div",{className:"heart-icon",children:cp.icon},cp.id))})]})};var localUser=new UserModel;const baseURL="https://i10c203.p.ssafy.io",OPENVIDU_SERVER_SECRET="wearegitaehasam",VideoRoomComponent=_d=>{const rp=useNavigate(),np=useLocation();useWindowSize();const ap=np.state.roomId,sp=np.state.isHost,lp=np.state.imageUrl?np.state.imageUrl:null,up=np.state.name?np.state.name:null,cp=np.state.nickname,dp=np.state.userImg,fp=np.state.subscriberSession?np.state.subscriberSession:null,[pp,hp]=reactExports.useState(null),[mp,gp]=reactExports.useState("Gitaehasam"),[vp,xp]=reactExports.useState(""),[Sp,yp]=reactExports.useState(""),[bp,Ep]=reactExports.useState(void 0),[wp,_p]=reactExports.useState(void 0),[Rp,$p]=reactExports.useState([]),[Cp,Ap]=reactExports.useState(void 0),[Op,Lp]=reactExports.useState([]),[Mp,kp]=reactExports.useState(0),[Dp,Fp]=reactExports.useState(!0);reactExports.useState(null);const[Ip,Pp]=reactExports.useState(!0),[Tp,Np]=reactExports.useState(!0),[jp,Vp]=reactExports.useState(!1),[zp,Wp]=reactExports.useState(""),[Up,qp]=reactExports.useState(""),[Bp,Yp]=reactExports.useState(!1),[Xp,Qp]=reactExports.useState([]),[am,Jp]=reactExports.useState(!1);reactExports.useState(!1);const[im,Zp]=reactExports.useState(!0);let Gp;reactExports.useEffect(()=>{bp&&wp&&Zp(!1)},[bp,wp]);const tm=reactExports.useCallback(()=>sp?om(mp).then(lm=>em(lm)):em(fp),[mp,sp]),om=lm=>sp?new Promise((sm,ym)=>{let Am=JSON.stringify({customSessionId:lm});axios.post(baseURL+"/openvidu/api/sessions",Am,{headers:{Authorization:"Basic "+btoa("OPENVIDUAPP:"+OPENVIDU_SERVER_SECRET),"Content-Type":"application/json"}}).then(Em=>{axios.post(baseURL+"/api/lives",{imageUrl:lp,name:up,sessionId:Em.data.sessionId},{headers:{Authorization:localStorage.getItem("jwt"),"Content-Type":"application/json"}}).then(wm=>{hp(wm.data.id),sm(Em.data.id)}).catch(wm=>{console.log("Error on /lives request:",wm)})}).catch(Em=>{var Dm;var wm=Object.assign({},Em);((Dm=wm==null?void 0:wm.response)==null?void 0:Dm.status)===409?sm(lm):console.log(wm)})}):Promise.resolve(fp),em=lm=>{let sm=sp?"PUBLISHER":"SUBSCRIBER";return new Promise((ym,Am)=>{const Em={role:sm,sessionId:lm};axios.post(baseURL+"/openvidu/api/sessions/"+lm+"/connection",Em,{headers:{Authorization:"Basic "+btoa("OPENVIDUAPP:"+OPENVIDU_SERVER_SECRET),"Content-Type":"application/json"}}).then(wm=>{ym(wm.data.token)}).catch(wm=>{console.error(wm),wm.response&&wm.response.status===404?(alert("종료된 라이브 입니다."),rp("/media/roomList")):Am(wm)})})};let _m;reactExports.useEffect(()=>{gp(`Gitaehasam${ap}`),Wp(cp),qp(dp)},[ap]),reactExports.useEffect(()=>{_m=new OpenViduLayout;const lm={maxRatio:1,minRatio:1,fixedRatio:!0,bigClass:"OV_big",bigPercentage:1,bigFixedRatio:!1,bigMaxRatio:1,bigMinRatio:1,bigFirst:!0,animate:!0};_m.initLayoutContainer(document.getElementById("layout"),lm),_m.setLayoutOptions(lm),window.addEventListener("beforeunload",onbeforeunload),mp!=="Gitaehasam"&&Cm()},[mp]);const Cm=async()=>{Gp=new lib.OpenVidu,(await Gp.getDevices()).filter(Em=>Em.kind==="videoinput");let sm=Gp.initSession();Ep(sm);let ym;try{ym=await tm()}catch(Em){console.log(Em);return}const Am=Gp.initPublisher(void 0,{audioSource:void 0,videoSource:void 0,publishAudio:Tp,publishVideo:Ip,resolution:"640x480",frameRate:30,insertMode:"APPEND",mirror:!1});sm.connect(ym,{clientData:vp}).then(()=>{sm.publish(Am).then(()=>{localUser.setNickname(vp),localUser.setConnectionId(sm.connection.connectionId),localUser.setStreamManager(Am)}),Ap(Am),_p(Am)}),sm.on("streamCreated",Em=>{const wm=sm.subscribe(Em.stream,"publisher");Lp(wm)}),sm.on("exception",Em=>{console.warn(Em)}),sm.on("connectionCreated",({stream:Em})=>{kp(wm=>wm+1)}),sm.on("sessionDisconnected",({stream:Em})=>{alert("라이브가 종료되었습니다."),rp("/media/roomList",{replace:!0})}),sm.on("connectionDestroyed",({stream:Em})=>{kp(wm=>wm-1)}),sm.on("signal:heart",Em=>{const[,,wm]=Em.data.split("|");Qp(Dm=>[...Dm,{id:Date.now(),y:100,icon:wm}])}),sm.on("signal:chat",Em=>{$p(wm=>[...wm,Em.data])})},Rm=()=>{Cp.publishVideo(!Cp.stream.videoActive),Pp(!Ip),Ap(Cp)},xm=()=>{Cp.publishAudio(!Cp.stream.audioActive),Np(!Tp),Ap(Cp)},$m=async lm=>{Gp=new lib.OpenVidu;try{const sm=await Gp.initPublisher(void 0,{audioSource:Cp.stream.audioSource,videoSource:lm,publishAudio:Cp.stream.hasAudio,publishVideo:Cp.stream.hasVideo,resolution:"640x480",frameRate:30,insertMode:"APPEND",mirror:!1});await bp.unpublish(Cp),await bp.publish(sm),Ap(sm),localUser.setStreamManager(sm),_p(sm)}catch(sm){console.error(sm)}},fm=async()=>{const lm=bp;lm&&(sp?await Sm():(lm.disconnect(),rp("/media/roomList",{replace:!0})))},Sm=async()=>{try{await axios.delete(baseURL+`/api/lives/${pp}`,{headers:{Authorization:localStorage.getItem("jwt"),"Content-Type":"application/json"}}),await axios.delete(baseURL+`/openvidu/api/sessions/${mp}`,{headers:{Authorization:"Basic "+btoa("OPENVIDUAPP:"+OPENVIDU_SERVER_SECRET),"Content-Type":"application/json"}})}catch(lm){console.error(lm)}finally{rp("/media/roomList",{replace:!0})}};reactExports.useEffect(()=>{xp(cp),yp(dp)},[]),reactExports.useEffect(()=>{const lm=sm=>{fm()};return window.addEventListener("beforeunload",lm),()=>{window.removeEventListener("beforeunload",lm)}},[fm]),reactExports.useEffect(()=>{if(bp){const lm=()=>{Yp(!0)};return bp.on("sessionDisconnected",lm),()=>{bp.off("sessionDisconnected",lm)}}},[bp]);const pm=()=>{Yp(!1),rp("/media/roomList")},hm=(lm,sm)=>{sm.signal({data:lm,to:[],type:"chat"}).then(()=>{}).catch(ym=>{console.error(ym)})};return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:im?jsxRuntimeExports.jsx(Loading,{}):jsxRuntimeExports.jsxs("div",{className:"bounds",children:[bp!==void 0&&wp!==void 0?jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(ToolbarComponent,{user:Cp,isHost:sp,micStatusChanged:xm,camStatusChanged:Rm,setLeaveModal:Vp,hostNickname:zp,hostProfileImg:Up,totalUsers:Mp,setIsSwitchCameraModal:Jp}),sp&&jsxRuntimeExports.jsx(UserVideoComponent,{streamManager:Cp}),!sp&&jsxRuntimeExports.jsx(UserVideoComponent,{streamManager:Op}),Dp&&jsxRuntimeExports.jsxs("div",{className:"chatting",children:[jsxRuntimeExports.jsx(ChattingList,{messageList:Rp}),jsxRuntimeExports.jsxs("div",{className:"chat-input-area",children:[jsxRuntimeExports.jsx(ChattingForm,{myUserName:vp,myUserImg:Sp,onMessage:hm,currentSession:bp}),jsxRuntimeExports.jsx("div",{className:"heart-button-wrapper",children:jsxRuntimeExports.jsx(HeartButton,{session:bp,myUserName:vp,myUserImg:Sp,favIcons:Xp,setFavIcons:Qp})})]})]})]}):jsxRuntimeExports.jsxs("div",{className:"noneData",children:[jsxRuntimeExports.jsx(default_1$s,{}),jsxRuntimeExports.jsx("div",{children:"존재하지 않는 방송입니다."}),jsxRuntimeExports.jsx("button",{onClick:()=>rp("/media/roomList"),children:"나가기"})]}),jp?jsxRuntimeExports.jsx(LeaveModal,{state:Vp,leaveSession:fm}):null,am?jsxRuntimeExports.jsx(SwitchCameraModal,{state:Jp,onDevice:$m}):null,jsxRuntimeExports.jsx(LiveEndModal,{open:Bp,onClose:pm})]})})},MediaPage=()=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Header,{}),jsxRuntimeExports.jsxs("div",{className:"choose-list",children:[jsxRuntimeExports.jsx(Link,{to:"/media/roomlist",children:jsxRuntimeExports.jsx("div",{className:"choose-item choose-live",children:jsxRuntimeExports.jsxs("div",{className:"liveroom",children:[jsxRuntimeExports.jsx("div",{className:"category-live",children:"Live"}),jsxRuntimeExports.jsx("div",{className:"triangle-bd",children:jsxRuntimeExports.jsx("div",{className:"triangle"})})]})})}),jsxRuntimeExports.jsx(Link,{to:"/media/board",children:jsxRuntimeExports.jsx("div",{className:"choose-item choose-photo",children:jsxRuntimeExports.jsxs("div",{className:"photo",children:["Photo",jsxRuntimeExports.jsx(default_1$z,{})]})})})]})]});var Window$1={},_interopRequireDefault$8=interopRequireDefaultExports;Object.defineProperty(Window$1,"__esModule",{value:!0});var default_1$8=Window$1.default=void 0,_createSvgIcon$8=_interopRequireDefault$8(requireCreateSvgIcon()),_jsxRuntime$8=jsxRuntimeExports;default_1$8=Window$1.default=(0,_createSvgIcon$8.default)((0,_jsxRuntime$8.jsx)("path",{d:"M11 11V3H5c-1.1 0-2 .9-2 2v6zm2 0h8V5c0-1.1-.9-2-2-2h-6zm-2 2H3v6c0 1.1.9 2 2 2h6zm2 0v8h6c1.1 0 2-.9 2-2v-6z"}),"Window");var Favorite={},_interopRequireDefault$7=interopRequireDefaultExports;Object.defineProperty(Favorite,"__esModule",{value:!0});var default_1$7=Favorite.default=void 0,_createSvgIcon$7=_interopRequireDefault$7(requireCreateSvgIcon()),_jsxRuntime$7=jsxRuntimeExports;default_1$7=Favorite.default=(0,_createSvgIcon$7.default)((0,_jsxRuntime$7.jsx)("path",{d:"m12 21.35-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54z"}),"Favorite");var FavoriteBorder={},_interopRequireDefault$6=interopRequireDefaultExports;Object.defineProperty(FavoriteBorder,"__esModule",{value:!0});var default_1$6=FavoriteBorder.default=void 0,_createSvgIcon$6=_interopRequireDefault$6(requireCreateSvgIcon()),_jsxRuntime$6=jsxRuntimeExports;default_1$6=FavoriteBorder.default=(0,_createSvgIcon$6.default)((0,_jsxRuntime$6.jsx)("path",{d:"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3m-4.4 15.55-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05"}),"FavoriteBorder");var ChatBubbleOutline={},_interopRequireDefault$5=interopRequireDefaultExports;Object.defineProperty(ChatBubbleOutline,"__esModule",{value:!0});var default_1$5=ChatBubbleOutline.default=void 0,_createSvgIcon$5=_interopRequireDefault$5(requireCreateSvgIcon()),_jsxRuntime$5=jsxRuntimeExports;default_1$5=ChatBubbleOutline.default=(0,_createSvgIcon$5.default)((0,_jsxRuntime$5.jsx)("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m0 14H6l-2 2V4h16z"}),"ChatBubbleOutline");const api$2=axiosApi(),url="/api/boards";async function getBoardList(_d){try{console.log(_d);const{data:rp}=await api$2.get(`${url}?categoryId=${_d}`);return console.log(rp),rp}catch(rp){console.log(rp)}}async function getBoardDetail(_d){try{console.log(_d);const{data:rp}=await api$2.get(`${url}/${_d}`);return console.log(rp),rp}catch(rp){console.log(rp)}}async function deleteBoardPost(_d){try{await api$2.delete(`${url}/${_d}`)}catch(rp){console.log(rp)}}async function sendBoardReply(_d,rp){try{await api$2.post(`${url}/${_d}/comments`,{content:rp})}catch(np){console.log(np)}}async function deleteBoardReply(_d,rp){try{await api$2.delete(`${url}/${_d}/comments/${rp}`)}catch(np){console.log(np)}}async function putPostLike(_d){try{await api$2.put(`${url}/${_d}/likes`)}catch(rp){console.log(rp)}}async function deletePostLike(_d){try{await api$2.delete(`${url}/${_d}/likes`)}catch(rp){console.log(rp)}}async function getSearchFish(_d){try{console.log("dd");const{data:rp}=await api$2.get(`${url}/search/fishBook?searchWord=${_d}`);return rp}catch(rp){console.log(rp)}}const BoardItem=({data:_d,category:rp})=>{const np=useNavigate(),ap=hp=>{const mp=new Date(hp),vp=Math.floor((new Date().getTime()-mp.getTime())/1e3);if(vp<60)return"방금 전";const xp=vp/60;if(xp<60)return`${Math.floor(xp)}분 전`;const Sp=xp/60;if(Sp<24)return`${Math.floor(Sp)}시간 전`;const yp=Sp/24;return yp<7?`${Math.floor(yp)}일 전`:`${mp.toLocaleDateString()}`},sp=hp=>{np(`/media/board/${hp}`,{state:{categoryId:rp}})},[lp,up]=reactExports.useState(),[cp,dp]=reactExports.useState(),fp=async hp=>{await deletePostLike(hp).then(mp=>{up(!1),dp(gp=>gp-1)})},pp=async hp=>{await putPostLike(hp).then(mp=>{up(!0),dp(gp=>gp+1)})};return reactExports.useEffect(()=>{_d.isLiked?(up(!0),dp(_d.likeCnt)):(up(!1),dp(_d.likeCnt))},[]),jsxRuntimeExports.jsxs("li",{className:"shadow board-contents",children:[jsxRuntimeExports.jsxs("div",{className:"board-title-area",children:[jsxRuntimeExports.jsx("img",{className:"board-profile",src:_d.profileImageUrl,alt:""}),jsxRuntimeExports.jsx("div",{className:"nick",children:_d.nickName})]}),jsxRuntimeExports.jsx("img",{className:"main-img",src:_d.boardImageUrl,alt:"",onClick:()=>sp(_d.boardId)}),jsxRuntimeExports.jsxs("div",{className:"content",children:[jsxRuntimeExports.jsx("div",{className:"post-text",children:_d.content}),jsxRuntimeExports.jsxs("div",{className:"hashtag-list",children:[_d.fishName&&jsxRuntimeExports.jsxs("div",{className:"hashtag blue-fc blue-bd",children:["#",_d.fishName]}),_d.hashtag&&jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:_d.hashtags.map((hp,mp)=>jsxRuntimeExports.jsxs("div",{className:"hashtag blue-fc blue-bd",children:["#",hp]},mp))})]}),jsxRuntimeExports.jsx("div",{className:"post-bottom",children:jsxRuntimeExports.jsx("div",{className:"time",children:ap(_d.createdAt)})}),jsxRuntimeExports.jsxs("div",{className:"post-info",children:[jsxRuntimeExports.jsx("div",{className:"post-icon",children:jsxRuntimeExports.jsx(default_1$5,{})}),jsxRuntimeExports.jsx("div",{className:"comment",children:_d.commentCnt}),lp&&jsxRuntimeExports.jsx("div",{className:"post-icon post-like",children:jsxRuntimeExports.jsx(default_1$7,{onClick:()=>fp(_d.boardId)})}),!lp&&jsxRuntimeExports.jsx("div",{className:"post-icon",children:jsxRuntimeExports.jsx(default_1$6,{onClick:()=>pp(_d.boardId)})}),jsxRuntimeExports.jsx("div",{className:"like",children:cp})]})]})]})},BoardList=({category:_d,viewType:rp})=>{const[np,ap]=reactExports.useState([]),sp=async()=>{await getBoardList(_d).then(lp=>ap(lp)),console.log(np)};return reactExports.useEffect(()=>{sp()},[_d]),jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("ul",{className:`${rp==0?"full-size":"mini-size"}`,children:np.boards&&jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:np.boards.map(lp=>jsxRuntimeExports.jsx(BoardItem,{data:lp,category:_d},lp.boardId))})})})},BoardFilter=({category:_d,closeCheck:rp})=>{const[np,ap]=reactExports.useState();return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:"board-filter-area",children:[jsxRuntimeExports.jsx("div",{className:"reset",children:"초기화"}),jsxRuntimeExports.jsx("div",{className:"filter-sub",children:"정렬"}),jsxRuntimeExports.jsxs("div",{className:"sort-area",children:[jsxRuntimeExports.jsxs("label",{className:`sort-label ${np==="comments"?"blue-bd":""}`,children:["댓글순",jsxRuntimeExports.jsx("input",{type:"radio",className:"sort-type",value:"comment",checked:np==="comments",onChange:()=>ap("comments")})]}),jsxRuntimeExports.jsxs("label",{className:`sort-label ${np==="createdAt"?"blue-bd":""}`,children:["최신순",jsxRuntimeExports.jsx("input",{type:"radio",className:"sort-type",value:"createdAt",checked:np==="createdAt",onChange:()=>ap("createdAt")})]}),jsxRuntimeExports.jsxs("label",{className:`sort-label ${np==="likes"?"blue-bd":""}`,children:["좋아요순",jsxRuntimeExports.jsx("input",{type:"radio",className:"sort-type",value:"likes",checked:np==="likes",onChange:()=>ap("likes")})]})]}),_d==1&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"filter-sub",children:"바다 어종"}),jsxRuntimeExports.jsx("div",{}),jsxRuntimeExports.jsx("div",{className:"filter-sub",children:"민물 어종"})]}),_d==2&&jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("div",{className:"filter-sub",children:"추천태그"})}),jsxRuntimeExports.jsx("div",{className:"filter-button bg-blue shadow",onClick:rp,children:"총 개 적용하기"})]})})};var EditNote={},_interopRequireDefault$4=interopRequireDefaultExports;Object.defineProperty(EditNote,"__esModule",{value:!0});var default_1$4=EditNote.default=void 0,_createSvgIcon$4=_interopRequireDefault$4(requireCreateSvgIcon()),_jsxRuntime$4=jsxRuntimeExports;default_1$4=EditNote.default=(0,_createSvgIcon$4.default)((0,_jsxRuntime$4.jsx)("path",{d:"M3 10h11v2H3zm0-2h11V6H3zm0 8h7v-2H3zm15.01-3.13.71-.71c.39-.39 1.02-.39 1.41 0l.71.71c.39.39.39 1.02 0 1.41l-.71.71zm-.71.71-5.3 5.3V21h2.12l5.3-5.3z"}),"EditNote");const BoardPage=()=>{const[_d,rp]=reactExports.useState(1),[np,ap]=reactExports.useState(0),[sp,lp]=reactExports.useState(!1),up=()=>{lp(!1)},cp=hp=>{rp(hp)},dp=hp=>{ap(hp)},fp=useNavigate(),pp=()=>{fp("/media/board/create",{state:{categoryId:_d}})};return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:"category-boardpage",children:[jsxRuntimeExports.jsx(Header,{}),jsxRuntimeExports.jsxs("div",{className:"category-header",children:[jsxRuntimeExports.jsx("div",{className:`category-title ${_d==1?"active":""}`,onClick:()=>cp(1),children:"물고기"}),jsxRuntimeExports.jsx("div",{className:`category-title ${_d==2?"active":""}`,onClick:()=>cp(2),children:"장소자랑"})]}),jsxRuntimeExports.jsxs("div",{className:"type-select",children:[jsxRuntimeExports.jsx("div",{className:`full ${np==0&&"active"}`,onClick:()=>dp(0)}),jsxRuntimeExports.jsx("div",{className:`divide ${np==1&&"active"}`,onClick:()=>dp(1),children:jsxRuntimeExports.jsx(default_1$8,{})}),jsxRuntimeExports.jsx("input",{type:"checkbox",id:"check",checked:sp,onChange:()=>lp(hp=>!hp)}),jsxRuntimeExports.jsx("label",{htmlFor:"check",className:"filter",children:jsxRuntimeExports.jsx("img",{src:filter,alt:""})}),jsxRuntimeExports.jsx("div",{className:"board-filter",children:jsxRuntimeExports.jsx(BoardFilter,{category:_d,closeCheck:up})})]}),_d==1&&jsxRuntimeExports.jsx(BoardList,{category:_d,viewType:np}),_d==2&&jsxRuntimeExports.jsx(BoardList,{category:_d,viewType:np}),jsxRuntimeExports.jsx("div",{className:"create-post-btn bg-blue",onClick:()=>pp(),children:jsxRuntimeExports.jsx(default_1$4,{})})]})})};var TagOutlined={},_interopRequireDefault$3=interopRequireDefaultExports;Object.defineProperty(TagOutlined,"__esModule",{value:!0});var default_1$3=TagOutlined.default=void 0,_createSvgIcon$3=_interopRequireDefault$3(requireCreateSvgIcon()),_jsxRuntime$3=jsxRuntimeExports;default_1$3=TagOutlined.default=(0,_createSvgIcon$3.default)((0,_jsxRuntime$3.jsx)("path",{d:"M20 10V8h-4V4h-2v4h-4V4H8v4H4v2h4v4H4v2h4v4h2v-4h4v4h2v-4h4v-2h-4v-4zm-6 4h-4v-4h4z"}),"TagOutlined");const BoardCreateMap=({fishSpot:_d,setFishSpot:rp})=>{const[np,ap]=reactExports.useState({lat:36.172823447489336,lng:127.8675122717897}),[sp,lp]=reactExports.useState(""),[up,cp]=reactExports.useState(13),[dp,fp]=reactExports.useState([]),[pp,hp]=reactExports.useState(null),mp=reactExports.useRef(),gp=reactExports.useRef(),vp=async yp=>{yp.preventDefault();try{const bp=await axios.get("https://i10c203.p.ssafy.io/api/spots",{params:{keyword:sp},headers:{Authorization:localStorage.getItem("jwt")}});console.log(bp.data.spots),fp(bp.data.spots),mp.current.setLevel(13),mp.current.setCenter(new kakao.maps.LatLng(36.172823447489336,127.8675122717897)),gp.current.blur()}catch(bp){console.log(bp)}},xp=()=>{hp(null),rp({}),gp.current.blur()},Sp=(yp,bp)=>{hp(yp),rp(bp)};return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Map$1,{center:np,ref:mp,level:up,onClick:xp,children:jsxRuntimeExports.jsx(MarkerClusterer,{minLevel:11,averageCenter:!0,children:dp.map((yp,bp)=>jsxRuntimeExports.jsx(MapMarker,{position:{lat:yp.latitude,lng:yp.longitude},onClick:()=>Sp(bp,yp),image:pp===bp?{src:MarkerOn,size:{width:28,height:40}}:{src:MarkerOff,size:{width:18,height:25}}},yp.spotId))})}),jsxRuntimeExports.jsx("form",{onSubmit:vp,children:jsxRuntimeExports.jsx("input",{type:"text",ref:gp,value:sp,onChange:yp=>lp(yp.target.value)})}),_d&&jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("div",{children:_d.name})})]})},BoardFormItem=({type:_d,categoryId:rp,boardData:np})=>{console.log(np);const[ap,sp]=reactExports.useState(""),[lp,up]=reactExports.useState(""),cp=reactExports.useRef(),[dp,fp]=reactExports.useState(""),[pp,hp]=reactExports.useState(""),[mp,gp]=reactExports.useState(""),[vp,xp]=reactExports.useState([]),[Sp,yp]=reactExports.useState({});reactExports.useEffect(()=>{np&&(gp(np.content),hp(np.hashtags),sp("0"),up(np.boardImageUrl),console.log(mp),console.log(pp),console.log(ap),console.log(lp))},[]);const bp=Cp=>{console.log("2w"),Cp.preventDefault();let Ap=Cp.target.files[0],Op=new FileReader;Op.onloadend=Lp=>{sp(Ap),console.log(Ap),up(Op.result)},Ap&&Op.readAsDataURL(Ap)},Ep=Cp=>{console.log("cleick"),Cp.preventDefault(),cp.current.click()},wp=async Cp=>{console.log(Cp),await getSearchFish(Cp).then(Ap=>{xp(Ap),console.log(vp)})},_p=()=>{},Rp=(Cp,Ap)=>{if(Cp.key==="Enter"&&Ap==1)hp([dp]),console.log(pp),fp(""),xp([]);else if(Cp.key==="Enter"&&Ap==2){if(pp.length==5){alert("5개까지 등록가능합니다."),fp(""),xp([]);return}const Op=[...pp,dp];hp(Op)}},$p=Cp=>{console.log(Cp);const Ap=pp.filter(Op=>Op!==Cp);hp(Ap)};return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:"post-area",children:[jsxRuntimeExports.jsxs("div",{className:"post-item",children:[jsxRuntimeExports.jsxs("div",{className:"post-sub",children:[rp==1&&jsxRuntimeExports.jsx("div",{children:"잡은 물고기를 등록해 주세요"}),rp==2&&jsxRuntimeExports.jsx("div",{children:"리뷰를 작성해 주세요."})]}),jsxRuntimeExports.jsxs("div",{className:"post-image-upload",children:[lp&&jsxRuntimeExports.jsx("img",{className:"img_preview",src:lp}),jsxRuntimeExports.jsx("input",{ref:cp,hidden:!0,id:"file",type:"file",onChange:bp}),jsxRuntimeExports.jsxs("div",{className:`shadow ${ap?"reupload-btn blue-bd":"upload-btn bg-blue"}`,onClick:Ep,children:[!ap&&jsxRuntimeExports.jsx(default_1$e,{}),ap&&"이미지 다시 선택하기"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"post-item",children:[jsxRuntimeExports.jsx("div",{className:"post-sub",children:"장소"}),jsxRuntimeExports.jsx("div",{className:"position",children:jsxRuntimeExports.jsx(BoardCreateMap,{fishSpot:Sp,setFishSpot:yp})})]}),jsxRuntimeExports.jsxs("div",{className:"post-item",children:[jsxRuntimeExports.jsxs("div",{className:"post-sub",children:[rp==1&&jsxRuntimeExports.jsx("div",{children:"물고기종류"}),rp==2&&jsxRuntimeExports.jsx("div",{children:"해시태그"})]}),jsxRuntimeExports.jsxs("div",{className:"hashtag-add",children:[jsxRuntimeExports.jsx("div",{className:"hashtag-icon shadow bg-blue",children:jsxRuntimeExports.jsx(default_1$3,{})}),rp==1&&jsxRuntimeExports.jsx("input",{className:"hashtag-search",type:"text",value:dp,onKeyUp:Cp=>wp(Cp.target.value),onChange:Cp=>fp(Cp.target.value),onKeyDown:Cp=>Rp(Cp,rp),placeholder:"물고기이름"}),rp==2&&jsxRuntimeExports.jsx("input",{className:"hashtag-search",type:"text",value:dp,onKeyUp:Cp=>_p(Cp.target.value),onChange:Cp=>fp(Cp.target.value),onKeyDown:Cp=>Rp(Cp,rp),placeholder:"최대 5개까지 입력할 수 있어요"})]}),jsxRuntimeExports.jsx("ul",{className:`auto-area ${vp.length!=0?"":"none"}`,children:vp.length!=0&&jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:vp.map(Cp=>jsxRuntimeExports.jsx("li",{className:"blue-bd",children:Cp.name},Cp.id))})}),jsxRuntimeExports.jsx("ul",{className:"hashtag-add-area",children:pp&&jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:pp.map((Cp,Ap)=>jsxRuntimeExports.jsx("li",{className:"blue-bd",onClick:Op=>$p(Cp),children:Cp},Ap))})})]}),jsxRuntimeExports.jsxs("div",{className:"post-item",children:[jsxRuntimeExports.jsx("div",{className:"post-sub",children:"하고싶은 말"}),jsxRuntimeExports.jsx("textarea",{value:mp,onChange:Cp=>gp(Cp.target.value)})]}),jsxRuntimeExports.jsxs("div",{className:"post-add-btn bg-blue",children:[_d==="create"&&jsxRuntimeExports.jsx("div",{children:"등록하기"}),_d==="modify"&&jsxRuntimeExports.jsx("div",{children:"수정하기"})]})]})})},BoardDetailMap=({lat:_d,lng:rp})=>jsxRuntimeExports.jsx(Map$1,{center:{lat:_d,lng:rp},draggable:!1,zoomable:!1,level:10,children:jsxRuntimeExports.jsx(MapMarker,{position:{lat:_d,lng:rp},image:{src:MarkerOn,size:{width:28,height:40}}})}),BoardDetail=()=>{var $p;const _d=useLocation(),[rp,np]=reactExports.useState(($p=_d.state)==null?void 0:$p.categoryId),ap=useNavigate(),{id:sp}=useParams(),[lp,up]=reactExports.useState({}),cp=2462171811,[dp,fp]=reactExports.useState([]),pp=JSON.parse(localStorage.getItem("user")),[hp,mp]=reactExports.useState(),[gp,vp]=reactExports.useState();reactExports.useEffect(()=>{xp()},[]);const xp=async()=>{await getBoardDetail(sp).then(Cp=>{up(Cp),Cp.isLiked?(mp(!0),vp(Cp.likeCnt)):(mp(!1),vp(Cp.likeCnt))})},Sp=async()=>{window.confirm("게시글을 삭제하시겠습니까?")&&await deleteBoardPost(sp).then(Cp=>{console.log(Cp),alert("삭제되었습니다."),ap("/media/board")})},yp=async()=>{console.log(_d.state),window.confirm("게시글을 수정하시겠습니까?")&&ap(`/media/board/modify/${sp}`,{state:{categoryId:rp}})},bp=Cp=>{const Ap=Cp+"",Op=Ap.substring(0,10),Lp=Ap.substring(11,16);return console.log(Op),Op+" "+Lp},Ep=async Cp=>{Cp.key==="Enter"&&await sendBoardReply(sp,dp).then(Ap=>{xp()}),fp("")},wp=async Cp=>{await deleteBoardReply(sp,Cp).then(Ap=>{xp()})},_p=async Cp=>{await deletePostLike(Cp).then(Ap=>{mp(!1),vp(Op=>Op-1)})},Rp=async Cp=>{await putPostLike(Cp).then(Ap=>{mp(!0),vp(Op=>Op+1)})};return Object.keys(lp).length?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Header,{}),lp&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"board-detail-area",children:[jsxRuntimeExports.jsxs("div",{className:"board-detail-item",children:[jsxRuntimeExports.jsxs("div",{className:"board-title",children:[jsxRuntimeExports.jsx("img",{className:"board-detail-profile",src:lp.profileImageUrl,alt:"프로필"}),jsxRuntimeExports.jsx("div",{className:"board-nickname",children:lp.nickName}),jsxRuntimeExports.jsxs("div",{className:"like-area",children:[hp&&jsxRuntimeExports.jsx("div",{className:"post-icon post-like",children:jsxRuntimeExports.jsx(default_1$7,{onClick:()=>_p(lp.boardId)})}),!hp&&jsxRuntimeExports.jsx("div",{className:"post-icon",children:jsxRuntimeExports.jsx(default_1$6,{onClick:()=>Rp(lp.boardId)})}),jsxRuntimeExports.jsx("div",{className:"like",children:gp})]})]}),jsxRuntimeExports.jsx("img",{className:"board-content-img",src:lp.boardImageUrl,alt:""}),jsxRuntimeExports.jsx("div",{className:"board-text",children:lp.content}),jsxRuntimeExports.jsx("div",{className:"board-hashtag-area",children:lp.hashtags&&jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:lp.hashtags.map((Cp,Ap)=>jsxRuntimeExports.jsx("div",{className:"blue-fc",children:jsxRuntimeExports.jsx("div",{children:Cp})},Ap))})}),lp.socialId==cp&&jsxRuntimeExports.jsxs("div",{className:"btn-area",children:[jsxRuntimeExports.jsx("div",{className:"btn-modify bg-blue",onClick:()=>yp(),children:"수정"}),jsxRuntimeExports.jsx("div",{className:"btn-delete bg-blue",onClick:()=>Sp(),children:"삭제"})]})]}),jsxRuntimeExports.jsx("div",{className:"line bg-blue"}),jsxRuntimeExports.jsxs("div",{className:"board-detail-item",children:[jsxRuntimeExports.jsx("div",{className:"board-place",children:"Place Info"}),jsxRuntimeExports.jsx("div",{className:"board-map",children:jsxRuntimeExports.jsx(BoardDetailMap,{lat:lp.latitude,lng:lp.longitude})})]}),jsxRuntimeExports.jsx("div",{className:"line bg-blue"}),jsxRuntimeExports.jsxs("div",{className:"reply-area",children:[jsxRuntimeExports.jsxs("div",{className:"reply-title",children:[jsxRuntimeExports.jsx("div",{children:"댓글"}),jsxRuntimeExports.jsx("div",{className:"blue-fc",children:lp.commentCnt})]}),jsxRuntimeExports.jsx("div",{className:"reply-line bg-blue"}),jsxRuntimeExports.jsx("div",{className:"reply-list",children:lp.comments&&jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:lp.comments.map((Cp,Ap)=>jsxRuntimeExports.jsxs("div",{className:"reply",children:[jsxRuntimeExports.jsx("img",{src:Cp.profileImageUrl,alt:""}),jsxRuntimeExports.jsx("div",{children:Cp.nickName}),jsxRuntimeExports.jsx("div",{children:bp(Cp.createdAt)}),jsxRuntimeExports.jsx("div",{children:Cp.content}),Cp.socialId==cp&&jsxRuntimeExports.jsx("span",{className:"delete-reply blue-fc",onClick:()=>wp(Cp.id),children:"x"})]},Ap))})})]})]}),jsxRuntimeExports.jsxs("div",{className:"reply-add",children:[jsxRuntimeExports.jsx("div",{className:"reply-line bg-blue"}),jsxRuntimeExports.jsx("img",{src:pp.imageUrl,alt:""}),jsxRuntimeExports.jsxs("div",{className:"reply-add-area",children:[jsxRuntimeExports.jsx("input",{type:"text",value:dp,onChange:Cp=>fp(Cp.target.value),onKeyDown:Cp=>Ep(Cp),placeholder:"댓글작성하기"}),jsxRuntimeExports.jsx("div",{className:"send-reply bg-blue",children:jsxRuntimeExports.jsx(default_1$9,{})})]})]})]})]}):(console.log(1),jsxRuntimeExports.jsx(Loading,{}))},BoardCreate=()=>{var ap;const _d=useLocation(),[rp,np]=reactExports.useState((ap=_d.state)==null?void 0:ap.categoryId);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Header,{centerText:"글쓰기"}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(BoardFormItem,{type:"create",categoryId:rp})})]})},BoardModify=()=>{var cp;const{id:_d}=useParams(),[rp,np]=reactExports.useState([]),ap=useLocation(),[sp,lp]=reactExports.useState((cp=ap.state)==null?void 0:cp.categoryId);reactExports.useEffect(()=>{up()},[]);const up=async()=>{await getBoardDetail(_d).then(dp=>np(dp))};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Header,{centerText:"수정하기"}),jsxRuntimeExports.jsx("div",{children:rp&&jsxRuntimeExports.jsx(BoardFormItem,{type:"modify",categoryId:sp,boardData:rp})})]})},AuthPage=()=>{const{social:_d}=useParams(),np=new URL(document.URL).searchParams.get("code"),ap="https://i10c203.p.ssafy.io",sp=useNavigate();np||sp("/");const lp=async()=>{try{const cp=(await axios.post(`${ap}/api/login/${_d}`,{code:np})).data.accessToken,dp=await axios.get(`${ap}/api/users`,{headers:{Authorization:cp}});localStorage.setItem("jwt",cp),localStorage.setItem("user",JSON.stringify({imageUrl:dp.data.imageUrl,nickname:dp.data.nickname})),sp("/",{replace:!0})}catch(up){console.log(up)}};return reactExports.useEffect(()=>{lp()},[]),jsxRuntimeExports.jsx(Loading,{})},profile="/assets/default_profile-eZJaJ0xq.jpg";var ArrowForwardIosOutlined={},_interopRequireDefault$2=interopRequireDefaultExports;Object.defineProperty(ArrowForwardIosOutlined,"__esModule",{value:!0});var default_1$2=ArrowForwardIosOutlined.default=void 0,_createSvgIcon$2=_interopRequireDefault$2(requireCreateSvgIcon()),_jsxRuntime$2=jsxRuntimeExports;default_1$2=ArrowForwardIosOutlined.default=(0,_createSvgIcon$2.default)((0,_jsxRuntime$2.jsx)("path",{d:"M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"}),"ArrowForwardIosOutlined");var SettingsOutlined={},_interopRequireDefault$1=interopRequireDefaultExports;Object.defineProperty(SettingsOutlined,"__esModule",{value:!0});var default_1$1=SettingsOutlined.default=void 0,_createSvgIcon$1=_interopRequireDefault$1(requireCreateSvgIcon()),_jsxRuntime$1=jsxRuntimeExports;default_1$1=SettingsOutlined.default=(0,_createSvgIcon$1.default)((0,_jsxRuntime$1.jsx)("path",{d:"M19.43 12.98c.04-.32.07-.64.07-.98 0-.34-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.09-.16-.26-.25-.44-.25-.06 0-.12.01-.17.03l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65C14.46 2.18 14.25 2 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1c-.06-.02-.12-.03-.18-.03-.17 0-.34.09-.43.25l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98 0 .33.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46c.09.16.26.25.44.25.06 0 .12-.01.17-.03l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.06.02.12.03.18.03.17 0 .34-.09.43-.25l2-3.46c.12-.22.07-.49-.12-.64zm-1.98-1.71c.04.31.05.52.05.73 0 .21-.02.43-.05.73l-.14 1.13.89.7 1.08.84-.7 1.21-1.27-.51-1.04-.42-.9.68c-.43.32-.84.56-1.25.73l-1.06.43-.16 1.13-.2 1.35h-1.4l-.19-1.35-.16-1.13-1.06-.43c-.43-.18-.83-.41-1.23-.71l-.91-.7-1.06.43-1.27.51-.7-1.21 1.08-.84.89-.7-.14-1.13c-.03-.31-.05-.54-.05-.74s.02-.43.05-.73l.14-1.13-.89-.7-1.08-.84.7-1.21 1.27.51 1.04.42.9-.68c.43-.32.84-.56 1.25-.73l1.06-.43.16-1.13.2-1.35h1.39l.19 1.35.16 1.13 1.06.43c.43.18.83.41 1.23.71l.91.7 1.06-.43 1.27-.51.7 1.21-1.07.85-.89.7zM12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4m0 6c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2"}),"SettingsOutlined");const MyPage=()=>{const _d=useNavigate(),rp=JSON.parse(localStorage.getItem("user")),np=()=>{_d("edit")};return reactExports.useEffect(()=>{rp||_d("/login",{replace:!0})}),jsxRuntimeExports.jsxs("div",{className:"mypage",children:[jsxRuntimeExports.jsx(Header,{centerText:"My 낚시",align:"center"}),jsxRuntimeExports.jsx(default_1$1,{onClick:np,className:"edit"}),jsxRuntimeExports.jsxs("div",{className:"wrapper",children:[jsxRuntimeExports.jsx("img",{className:"profile",src:(rp==null?void 0:rp.imageUrl)||profile,alt:""}),jsxRuntimeExports.jsx("div",{className:"user-nick",children:rp==null?void 0:rp.nickname})]}),jsxRuntimeExports.jsxs("div",{className:"user-content",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>_d("fish"),children:["나의 물고기",jsxRuntimeExports.jsx(default_1$2,{})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>_d("location"),children:["나의 장소",jsxRuntimeExports.jsx(default_1$2,{})]}),jsxRuntimeExports.jsxs("button",{className:"later",children:[jsxRuntimeExports.jsx("div",{className:"title",children:"나는야 청소 요정"}),jsxRuntimeExports.jsx("div",{className:"open-none bg-blue",children:"오픈 예정"})]})]})]})},baiting="/assets/baiting-dRHFb276.png",fishing_casting="/assets/fishing_casting-PQ-2nxaM.png",fishing_tools="/assets/fishing_tools-6BBB44lB.png",good_day="/assets/good_day-XVZzJ39H.png",ipzil="/assets/ipzil-CIDIxluc.png",needle_floor="/assets/needle_floor-pBeIyjEY.png",remove_needle="/assets/remove_needle-akjo_8-J.png",tying_reel="/assets/tying_reel-yHY4rDkZ.png",api$1=axiosApi();async function getTutorialInfo(_d){const rp=localStorage.getItem("jwt");try{api$1.defaults.headers.Authorization=rp;const{data:np}=await api$1.get(`/api/tutorials/${_d}`);return np}catch(np){console.log(np)}}const TutorialPage=()=>{const _d=reactExports.useRef([]),rp=reactExports.useRef([]),np=useNavigate(),[ap,sp]=reactExports.useState(0),[lp,up]=reactExports.useState(0),[cp,dp]=reactExports.useState(0),[fp,pp]=reactExports.useState(!1),[hp,mp]=reactExports.useState([{title:"낚시 가기 좋은 날",num:1,imageSrc:good_day},{title:"준비물",num:2,imageSrc:fishing_tools},{title:"원투 낚시",num:3,imageSrc:fishing_casting},{title:"낚싯대 세팅",num:4,imageSrc:tying_reel},{title:"미끼 끼우기",num:5,imageSrc:baiting},{title:"낚시 캐스팅 & 입질",num:6,imageSrc:ipzil},{title:"바늘 빼기",num:7,imageSrc:remove_needle},{title:"바닥에 걸렸을 때",num:8,imageSrc:needle_floor}]),gp=.02,vp=-.1;reactExports.useEffect(()=>{const Sp=_d.current,yp=rp.current,bp=(Cp,Ap,Op)=>{const Lp=xp([...Sp],Op)[Ap];Cp.style.setProperty("--zIndex",Lp),Cp.style.setProperty("--active",(Ap-Op)/Sp.length)},Ep=()=>{const Cp=Math.max(0,Math.min(ap,100)),Ap=Math.floor(Cp/100*(Sp.length-1));dp(Ap),Sp.forEach((Op,Lp)=>bp(Op,Lp,Ap))};Ep();const wp=Cp=>{const Ap=Cp.deltaY*gp;sp(Op=>Op+Ap),Ep()},_p=Cp=>{if(Cp.type==="mousemove"&&yp.forEach(Lp=>{Lp.style.transform=`translate(${Cp.clientX}px, ${Cp.clientY}px)`}),!fp)return;const Ap=Cp.clientX||Cp.touches&&Cp.touches[0].clientX||0,Op=(Ap-lp)*vp;sp(Lp=>Lp+Op),up(Ap),Ep()},Rp=Cp=>{pp(!0);const Ap=Cp.clientX||Cp.touches&&Cp.touches[0].clientX||0;up(Ap)},$p=()=>{pp(!1)};return document.addEventListener("mousewheel",wp),document.addEventListener("mousedown",Rp),document.addEventListener("mousemove",_p),document.addEventListener("mouseup",$p),document.addEventListener("touchstart",Rp),document.addEventListener("touchmove",_p),document.addEventListener("touchend",$p),()=>{document.removeEventListener("mousewheel",wp),document.removeEventListener("mousedown",Rp),document.removeEventListener("mousemove",_p),document.removeEventListener("mouseup",$p),document.removeEventListener("touchstart",Rp),document.removeEventListener("touchmove",_p),document.removeEventListener("touchend",$p)}},[ap,fp,lp]);const xp=(Sp,yp)=>Sp.map((bp,Ep)=>yp===Ep?Sp.length:Sp.length-Math.abs(yp-Ep));return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Header,{centerText:"튜토리얼",prevPath:"/"}),jsxRuntimeExports.jsx("div",{className:"carousel-body"}),jsxRuntimeExports.jsx("div",{className:"carousel",children:hp.map((Sp,yp)=>jsxRuntimeExports.jsx("div",{ref:bp=>_d.current[yp]=bp,className:"carousel-item",children:jsxRuntimeExports.jsxs("div",{className:"carousel-box",onClick:()=>np(`/tutorial/${Sp.num}`,{state:{title:Sp.title}}),children:[jsxRuntimeExports.jsx("div",{className:"title",children:Sp.title}),jsxRuntimeExports.jsx("div",{className:"num",children:Sp.num}),jsxRuntimeExports.jsx("img",{src:Sp.imageSrc,alt:Sp.title})]})},yp))})]})},fishKing="/assets/fish_king-dNUI1omU.png";function ChatBotChattingForm({onChat:_d,loadingState:rp,setLoadingState:np}){const[ap,sp]=reactExports.useState(""),lp=JSON.parse(localStorage.getItem("user")),up=fp=>{sp(fp.target.value)},cp=fp=>{fp.key==="Enter"&&fp.target.value.trim()!==""&&(fp.preventDefault(),dp(fp))},dp=fp=>{fp.preventDefault(),_d(ap),sp(""),np(!rp)};return reactExports.useEffect(()=>{sp(rp?"답변을 준비중이에요":"")},[rp]),jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs("div",{className:"reply-add",children:[jsxRuntimeExports.jsx("div",{className:"reply-line bg-blue"}),jsxRuntimeExports.jsx("img",{src:lp.imageUrl,alt:""}),jsxRuntimeExports.jsxs("div",{className:"reply-add-area",children:[jsxRuntimeExports.jsx("input",{className:"chatbot-input",value:ap,type:"text",placeholder:"메세지 보내기...",onChange:up,onKeyPress:cp,readOnly:rp}),ap.trim()!==""&&jsxRuntimeExports.jsx("div",{className:"send-reply bg-blue",onClick:dp,children:jsxRuntimeExports.jsx(default_1$9,{})})]})]})})})}function ChatBotLoading(){return jsxRuntimeExports.jsxs("div",{className:"chatBotLoading",children:[jsxRuntimeExports.jsx("div",{className:"chatBotLoading-bounce1"}),jsxRuntimeExports.jsx("div",{className:"chatBotLoading-bounce2"}),jsxRuntimeExports.jsx("div",{className:"chatBotLoading-bounce3"})]})}function ChatBotChattingList(_d){const rp=useNavigate(),np=reactExports.useRef(),ap=reactExports.useRef(null),sp=reactExports.useRef(null),[lp,up]=reactExports.useState(!1),[cp,dp]=reactExports.useState(!0),fp=_d.chattingList,pp=[{tutorial:"튜토리얼"},{"fish/map":"지도"},{fishbook:"도감"},{"media/roomList":"라이브방송"},{"media/board":"게시판"}],hp=()=>{sp.current&&clearTimeout(sp.current),sp.current=setTimeout(()=>{const gp=ap.current.scrollTop,vp=ap.current.clientHeight,xp=ap.current.scrollHeight;dp(gp+vp>=xp-100)},100)},mp=reactExports.useCallback(()=>{hp()},[]);return reactExports.useEffect(()=>{up(!0),cp&&np.current.scrollIntoView({behavior:"smooth"}),up(!1)},[fp,cp]),reactExports.useEffect(()=>(ap.current.addEventListener("scroll",mp),()=>{sp.current&&clearTimeout(sp.current),ap.current&&ap.current.removeEventListener("scroll",mp)}),[mp]),console.log(fp),jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{ref:ap,className:"message-box",children:[fp.map((gp,vp)=>jsxRuntimeExports.jsxs("div",{className:gp.user==="bot"?"message-bot blue-bd":"message-user",children:[gp.user==="bot"&&gp.imgURL&&jsxRuntimeExports.jsx("div",{className:"message-bot-content",children:jsxRuntimeExports.jsx("img",{className:"message-bot-img",src:gp.imgURL,alt:""})}),gp.chat==="loading"?jsxRuntimeExports.jsx(ChatBotLoading,{}):jsxRuntimeExports.jsx("div",{className:"message-content",children:gp.chat}),gp.user==="bot"&&gp.move&&jsxRuntimeExports.jsxs("div",{onClick:()=>rp(`/${gp.move}`),className:"message-bot-move",children:[jsxRuntimeExports.jsx("span",{children:pp.find(xp=>xp[gp.move])[gp.move]})," 이동하기"]})]},vp)),jsxRuntimeExports.jsx("div",{ref:np}),lp&&jsxRuntimeExports.jsx(Loading,{})]})})}const api=axiosApi();async function postSendChat(_d){try{const{data:rp}=await api.post("/api/chatbot",{inputText:_d});return rp}catch(rp){console.log(rp)}}function ChatBot(){const _d=useNavigate(),[rp,np]=reactExports.useState([]),ap=JSON.parse(localStorage.getItem("user")),[sp,lp]=reactExports.useState(!1),up=["낚시 기초 지식","낚시 라이브를 보고싶어","물고기 종류 알아보기","낚시터 추천","원투 낚시","캐스팅이 뭐야?"],cp=async fp=>{np(pp=>[...pp,{user:"user",chat:fp,imgURL:null,move:null}]),np(pp=>[...pp,{user:"bot",chat:"loading",imgURL:null,move:null}]),lp(!0),await postSendChat(fp).then(pp=>{console.log(pp),lp(!1),np(hp=>{let mp=[...hp];return mp[mp.length-1]={user:"bot",chat:pp.text,imgURL:pp.imageUrl,move:pp.move},mp})})},dp=fp=>{cp(fp.target.textContent)};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"chatbot-sticky",children:[jsxRuntimeExports.jsx(Header,{onClick:()=>_d("/")}),jsxRuntimeExports.jsxs("div",{className:"chatbot-header",children:[jsxRuntimeExports.jsx("img",{src:fishKing,className:"chatbot-fishking"}),jsxRuntimeExports.jsx("span",{children:"낚시왕"})]})]}),jsxRuntimeExports.jsxs("div",{className:"chatbot-body",children:[jsxRuntimeExports.jsx("div",{className:"chatbot-chat-container",children:jsxRuntimeExports.jsx("div",{className:"chatbot-start-ment",children:jsxRuntimeExports.jsxs("div",{className:"chatbot-startChat blue-bd",children:[jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("span",{children:ap.nickname})," 님, 안녕하세요."]}),jsxRuntimeExports.jsx("p",{children:"낚시왕입니다."}),jsxRuntimeExports.jsx("p",{children:"어떤 사항이 궁금하신가요?"})]})})}),jsxRuntimeExports.jsx("div",{className:"chatbot-chat-container",children:jsxRuntimeExports.jsxs("div",{className:"chatbot-recommend-div",children:[jsxRuntimeExports.jsx("div",{className:"recomend-title",children:jsxRuntimeExports.jsx("span",{children:"자주 묻는 질문"})}),jsxRuntimeExports.jsx("div",{className:"recommend-ment",children:"낚시왕 추천, 똑똑하게 낚시하자!"}),up.map((fp,pp)=>jsxRuntimeExports.jsx("div",{className:"chatbot-recommend",onClick:dp,children:fp},pp))]})}),jsxRuntimeExports.jsx(ChatBotChattingList,{chattingList:rp})]}),jsxRuntimeExports.jsx(ChatBotChattingForm,{onChat:cp,loadingState:sp,setLoadingState:lp})]})}var CameraAlt={},_interopRequireDefault=interopRequireDefaultExports;Object.defineProperty(CameraAlt,"__esModule",{value:!0});var default_1=CameraAlt.default=void 0,_createSvgIcon=_interopRequireDefault(requireCreateSvgIcon()),_jsxRuntime=jsxRuntimeExports;default_1=CameraAlt.default=(0,_createSvgIcon.default)([(0,_jsxRuntime.jsx)("circle",{cx:"12",cy:"12",r:"3.2"},"0"),(0,_jsxRuntime.jsx)("path",{d:"M9 2 7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5"},"1")],"CameraAlt");const MyPageEdit=()=>{const _d="https://i10c203.p.ssafy.io",rp=JSON.parse(localStorage.getItem("user")),[np,ap]=reactExports.useState(rp==null?void 0:rp.nickname),[sp,lp]=reactExports.useState(!1),[up,cp]=reactExports.useState(rp==null?void 0:rp.imageUrl),[dp,fp]=reactExports.useState(rp==null?void 0:rp.imageUrl),pp=useNavigate(),hp=()=>{localStorage.removeItem("jwt"),localStorage.removeItem("user"),pp("/login",{replace:!0})},mp=async()=>{try{await axios.delete(`${_d}/api/log-out`,{headers:{Authorization:localStorage.getItem("jwt"),"Content-Type":"application/json"}}),hp()}catch(bp){console.log(bp)}},gp=async()=>{try{await axios.delete(`${_d}/api/users`,{headers:{Authorization:localStorage.getItem("jwt")}}),hp()}catch(bp){console.log(bp)}},vp=bp=>{ap(bp.target.value)},xp=()=>{lp(!0)},Sp=bp=>{const Ep=bp.target.files[0],wp=new FileReader;wp.readAsDataURL(Ep),wp.onloadend=()=>{fp(wp.result),cp(Ep)}},yp=async()=>{try{let bp;if(rp.imageUrl!==up){const wp=new FormData;wp.append("images",up),wp.append("type","PROFILE"),bp=await axios.post(`${_d}/api/images`,wp,{headers:{Authorization:localStorage.getItem("jwt")}})}const Ep=await axios.put(`${_d}/api/users`,{imageUrl:bp?bp.data.imageNames[0]:up,nickname:np},{headers:{Authorization:localStorage.getItem("jwt"),"Content-Type":"application/json"}});localStorage.setItem("user",Ep.config.data),pp("/user/mypage")}catch(bp){console.log(bp)}};return reactExports.useEffect(()=>{rp||pp("/login")},[]),jsxRuntimeExports.jsxs("div",{className:"mypage-edit",children:[jsxRuntimeExports.jsx(Header,{centerText:"My 정보수정",align:"center"}),jsxRuntimeExports.jsx("div",{className:"complete",onClick:yp,children:"완료"}),jsxRuntimeExports.jsx("div",{className:"profile",children:jsxRuntimeExports.jsxs("label",{htmlFor:"profile-img",children:[jsxRuntimeExports.jsx("img",{src:dp||profile,alt:"",className:"profile-img"}),jsxRuntimeExports.jsx("input",{type:"file",accept:"image/*",id:"profile-img",onChange:Sp}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(default_1,{})})]})}),jsxRuntimeExports.jsxs("div",{className:"user-info",children:[jsxRuntimeExports.jsx("div",{className:"info-title",children:"닉네임"}),jsxRuntimeExports.jsx("input",{className:"info-nick",type:"text",value:np,onChange:vp})]}),jsxRuntimeExports.jsxs("div",{className:"user-change",children:[jsxRuntimeExports.jsx("button",{className:"logout",onClick:mp,children:"로그아웃"}),jsxRuntimeExports.jsx("button",{className:"resign",onClick:xp,children:"회원탈퇴"})]}),sp&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"filter-open",onClick:()=>lp(!1)}),jsxRuntimeExports.jsxs("div",{className:"filter-content",children:[jsxRuntimeExports.jsx("h2",{children:"회원 탈퇴"}),jsxRuntimeExports.jsxs("div",{className:"leave-content",children:[jsxRuntimeExports.jsx("div",{children:"회원 탈퇴 시 계정 정보가 삭제되어 복구가 불가해요"}),jsxRuntimeExports.jsx("div",{children:"정말로 탈퇴하시겠어요?"})]}),jsxRuntimeExports.jsxs("div",{className:"btn",children:[jsxRuntimeExports.jsx("button",{className:"cancel",onClick:()=>lp(!1),children:"더 써볼래요"}),jsxRuntimeExports.jsx("button",{className:"leave",onClick:gp,children:"떠날래요"})]})]})]})]})};function TutorialDetailPage(_d){const np=useLocation().state.title,[ap,sp]=reactExports.useState(0),[lp,up]=reactExports.useState([]),cp=useParams(),dp=fp=>{sp(fp.realIndex)};return reactExports.useEffect(()=>{getTutorialInfo(cp.id).then(fp=>{up(fp.tutorialInfo)})},[]),reactExports.useEffect(()=>{lp.forEach(fp=>{const pp=new Image;pp.src=fp.imageUrl})},[lp]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Header,{centerText:np,prevPath:"/tutorial"}),jsxRuntimeExports.jsxs("div",{className:"tutorial-slider",children:[jsxRuntimeExports.jsx(Swiper,{pagination:{type:"progressbar"},modules:[EffectCoverflow,Pagination,EffectCards],effect:"coverflow",onSlideChange:dp,centeredSlides:!0,mousewheel:{invert:!1},spaceBetween:-100,slideToClickedSlide:!0,children:lp.map((fp,pp)=>jsxRuntimeExports.jsx(SwiperSlide,{children:jsxRuntimeExports.jsx("div",{className:"slide-content",children:jsxRuntimeExports.jsx("img",{src:fp.imageUrl})})},pp))}),jsxRuntimeExports.jsx("div",{className:"tutorial-description",children:jsxRuntimeExports.jsx("h2",{className:"tutorial-fishking-answer",children:lp.length>0&&jsxRuntimeExports.jsx("div",{children:lp[ap].description})})})]})]})}const MyFishPage=()=>{const[_d,rp]=reactExports.useState([]),np=useNavigate(),ap=()=>{np("/media/board/create",{state:{categoryId:1}})},sp=async()=>{const lp=localStorage.getItem("jwt"),up=await axios.get("https://i10c203.p.ssafy.io/api/users/boards",{params:{categoryId:1},headers:{Authorization:lp}});console.log(up.data.myBoardResponses),rp(up.data.myBoardResponses)};return reactExports.useEffect(()=>{sp()},[]),jsxRuntimeExports.jsxs("div",{className:"my-fish-page",children:[jsxRuntimeExports.jsx(Header,{centerText:"나의 장소",align:"center"}),_d.length?_d.map(lp=>jsxRuntimeExports.jsxs("div",{className:"board-info",children:[jsxRuntimeExports.jsx("div",{children:lp.boardId}),jsxRuntimeExports.jsx("div",{children:lp.content}),jsxRuntimeExports.jsx("img",{src:lp.imageUrl,alt:""})]},lp.id)):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"none-data",children:"낚시 기록을 시작해보세요."}),jsxRuntimeExports.jsx("div",{className:"go-create bg-blue",onClick:ap,children:jsxRuntimeExports.jsx(default_1$4,{})})]})]})},MyLocationPage=()=>{const[_d,rp]=reactExports.useState([]),np=useNavigate(),ap=()=>{np("/media/board/create",{state:{categoryId:2}})},sp=async()=>{const lp=localStorage.getItem("jwt"),up=await axios.get("https://i10c203.p.ssafy.io/api/users/boards",{params:{categoryId:2},headers:{Authorization:lp}});console.log(up.data.myBoardResponses),rp(up.data.myBoardResponses)};return reactExports.useEffect(()=>{sp()},[]),jsxRuntimeExports.jsxs("div",{className:"my-location-page",children:[jsxRuntimeExports.jsx(Header,{centerText:"나의 물고기",align:"center"}),_d.length?_d.map(lp=>jsxRuntimeExports.jsxs("div",{className:"board-info",children:[jsxRuntimeExports.jsx("div",{children:lp.boardId}),jsxRuntimeExports.jsx("div",{children:lp.content}),jsxRuntimeExports.jsx("img",{src:lp.imageUrl,alt:""})]},lp.id)):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"none-data",children:"낚시 기록을 시작해보세요."}),jsxRuntimeExports.jsx("div",{className:"go-create bg-blue",onClick:ap,children:jsxRuntimeExports.jsx(default_1$4,{})})]})]})};function App(){return jsxRuntimeExports.jsxs(Routes,{children:[jsxRuntimeExports.jsxs(Route,{path:"/",element:jsxRuntimeExports.jsx(Navbar,{}),children:[jsxRuntimeExports.jsx(Route,{index:!0,element:jsxRuntimeExports.jsx(HomePage,{})}),jsxRuntimeExports.jsxs(Route,{path:"fish",children:[jsxRuntimeExports.jsx(Route,{path:"image/result",element:jsxRuntimeExports.jsx(ImageResultPage,{})}),jsxRuntimeExports.jsx(Route,{path:"map",element:jsxRuntimeExports.jsx(FishMapPage,{})})]}),jsxRuntimeExports.jsxs(Route,{path:"media",children:[jsxRuntimeExports.jsx(Route,{index:!0,element:jsxRuntimeExports.jsx(MediaPage,{})}),jsxRuntimeExports.jsxs(Route,{path:"roomList",children:[jsxRuntimeExports.jsx(Route,{index:!0,element:jsxRuntimeExports.jsx(RoomList,{})}),jsxRuntimeExports.jsx(Route,{path:"create",children:jsxRuntimeExports.jsx(Route,{index:!0,element:jsxRuntimeExports.jsx(CreateRoom,{})})})]}),jsxRuntimeExports.jsx(Route,{path:"board",children:jsxRuntimeExports.jsx(Route,{index:!0,element:jsxRuntimeExports.jsx(BoardPage,{})})})]}),jsxRuntimeExports.jsxs(Route,{path:"user/mypage",children:[jsxRuntimeExports.jsx(Route,{index:!0,element:jsxRuntimeExports.jsx(MyPage,{})}),jsxRuntimeExports.jsx(Route,{path:"edit",element:jsxRuntimeExports.jsx(MyPageEdit,{})}),jsxRuntimeExports.jsx(Route,{path:"fish",element:jsxRuntimeExports.jsx(MyFishPage,{})}),jsxRuntimeExports.jsx(Route,{path:"location",element:jsxRuntimeExports.jsx(MyLocationPage,{})})]})]}),jsxRuntimeExports.jsxs(Route,{path:"media",children:[jsxRuntimeExports.jsx(Route,{index:!0,element:jsxRuntimeExports.jsx(MediaPage,{})}),jsxRuntimeExports.jsxs(Route,{path:"board",children:[jsxRuntimeExports.jsx(Route,{index:!0,element:jsxRuntimeExports.jsx(BoardPage,{})}),jsxRuntimeExports.jsx(Route,{path:"create",element:jsxRuntimeExports.jsx(BoardCreate,{})}),jsxRuntimeExports.jsx(Route,{path:"modify/:id",element:jsxRuntimeExports.jsx(BoardModify,{})}),jsxRuntimeExports.jsx(Route,{path:":id",element:jsxRuntimeExports.jsx(BoardDetail,{})})]})]}),jsxRuntimeExports.jsxs(Route,{path:"/tutorial",children:[jsxRuntimeExports.jsx(Route,{index:!0,element:jsxRuntimeExports.jsx(TutorialPage,{})}),jsxRuntimeExports.jsx(Route,{path:":id",element:jsxRuntimeExports.jsx(TutorialDetailPage,{})})]}),jsxRuntimeExports.jsxs(Route,{path:"/fish",children:[jsxRuntimeExports.jsx(Route,{path:"map",children:jsxRuntimeExports.jsx(Route,{path:":idx",element:jsxRuntimeExports.jsx(FishMapDetailPage,{})})}),jsxRuntimeExports.jsx(Route,{path:"image/edit",element:jsxRuntimeExports.jsx(ImageEditPage,{})})]}),jsxRuntimeExports.jsxs(Route,{path:"/fishbook",children:[jsxRuntimeExports.jsx(Route,{index:!0,element:jsxRuntimeExports.jsx(FishBook,{})}),jsxRuntimeExports.jsx(Route,{path:":id",element:jsxRuntimeExports.jsx(FishBookDetailPage,{})})]}),jsxRuntimeExports.jsxs(Route,{path:"/login",children:[jsxRuntimeExports.jsx(Route,{index:!0,element:jsxRuntimeExports.jsx(LoginPage,{})}),jsxRuntimeExports.jsx(Route,{path:":social",element:jsxRuntimeExports.jsx(AuthPage,{})})]}),jsxRuntimeExports.jsx(Route,{path:"/live/:id",element:jsxRuntimeExports.jsx(VideoRoomComponent,{})}),jsxRuntimeExports.jsx(Route,{path:"/chatBot",children:jsxRuntimeExports.jsx(Route,{index:!0,element:jsxRuntimeExports.jsx(ChatBot,{})})})]})}client.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(Recoil_index_5,{children:jsxRuntimeExports.jsx(BrowserRouter,{children:jsxRuntimeExports.jsx(App,{})})}));
