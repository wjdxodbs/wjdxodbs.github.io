import{h as m,u as g,r as l,j as p}from"./index-iFnTy7A3.js";import{a as c}from"./axios-L6U4YIEh.js";import{L as u}from"./Loading-Z6jjp98_.js";const L=()=>{const{social:i}=m(),t=new URL(document.URL).searchParams.get("code"),s="https://i10c203.p.ssafy.io",e=g();t||e("/");const n=async()=>{try{const a=await c.post(`${s}/api/login/${i}`,{code:t}),o=a.data.accessToken,r=await c.get(`${s}/api/users`,{headers:{Authorization:o}});localStorage.setItem("jwt",o),localStorage.setItem("user",JSON.stringify({socialId:a.data.socialId,imageUrl:r.data.imageUrl,nickname:r.data.nickname})),e("/",{replace:!0})}catch(a){console.log(a)}};return l.useEffect(()=>{n()},[]),p.jsx(u,{})};export{L as default};
