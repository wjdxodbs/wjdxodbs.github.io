import{r as l,j as e,t as f}from"./index-C_vzieaQ.js";import{N as g}from"./NoneNavHeader-vnX4mPUJ.js";import{a as m}from"./axios-Bo0ATomq.js";import{T as j}from"./Common-BS4uVQHZ.js";import{U as b}from"./UserFundProgressBar-D1OX2GXR.js";import{a as N}from"./commons-BJ5SslBL.js";import{N as y}from"./NoneData-Bck3FDg4.js";import"./index-CP8RP8bd.js";import"./iconBase-rz0zWS2w.js";import"./index-prcx37CQ.js";import"./profileImg-Fhzvd9kH.js";const w=["단순 변심","펀딩 변경","기타"],C=({id:s,orderUuid:r,handleClickFalse:o})=>{const[a,n]=l.useState(""),[c,i]=l.useState(""),d=localStorage.getItem("jwt"),h=t=>{const{value:x}=t.target;x!=="기타"&&i(""),n(x)},u=t=>i(t.target.value),v=async()=>{const t=a==="기타"?c:a;if(!t){f("사유를 알려주세요");return}const x={cancelReason:t,orderId:s};try{const p=await m.post(`https://j10C204.p.ssafy.io/api/fundings/orders/${r}/refund`,x,{headers:{"Content-Type":"application/json",Authorization:d}});console.log(p.data)}catch(p){console.log(p)}};return e.jsx("div",{className:"absolute inset-0 z-10 flex items-center justify-center bg-black bg-opacity-80 p-[3vh]",children:e.jsxs("div",{className:"bg-bgGray p-[3vh] flex flex-col gap-[3vh] rounded-[2vh] shadow-test",children:[e.jsxs("div",{children:[e.jsx("div",{className:"a text-[2.5vh] font-bold ",children:"펀딩 취소 사유를 선택해 주세요."}),e.jsx("div",{className:"text-[1.5vh] text-textGray",children:"펀딩 취소 시, 결제 금액이 환불 됩니다."})]}),e.jsxs("div",{className:"text-[2vh] flex flex-col gap-[0.5vh]",children:[w.map(t=>e.jsxs("label",{className:"flex gap-[1vh]",children:[e.jsx("input",{type:"radio",name:"type",value:t,onChange:h,checked:a===t}),t]},t)),e.jsx("input",{disabled:a!=="기타",placeholder:"사유를 알려주세요 (필수)",type:"text",value:c,onChange:u,className:"rounded-[0.5vh] text-black p-[1vh] w-full"})]}),e.jsxs("div",{className:"w-full flex gap-[2vh] text-[2vh] font-bold",children:[e.jsx("button",{className:"flex-1 bg-[#EFEFEF] text-bgGray p-[1.5vh] rounded-[1vh]",onClick:o,children:"닫기"}),e.jsx("button",{className:"flex-1 text-white bg-red-600 p-[1.5vh] rounded-[1vh]",onClick:v,children:"취소"})]}),e.jsx(j,{})]})})},F=({item:s})=>{const[r,o]=l.useState(!1),a=()=>o(!0),n=()=>o(!1),c=i=>{const d=new Date(i),h=new Date;d.setHours(0,0,0,0),h.setHours(0,0,0,0);const u=d.getTime()-h.getTime();return Math.round(u/(1e3*60*60*24))};return e.jsxs("div",{className:"flex flex-col bg-bgGray p-[2vh] rounded-[1vh] gap-[2vh] shadow-test",children:[e.jsxs("div",{className:"w-full flex gap-[2vh]",children:[e.jsx("img",{className:"w-[9vh] h-[13vh] object-cover rounded-[0.5vh] brightness-[90%]",src:s.moviePoster,alt:"",loading:"lazy"}),e.jsxs("div",{className:"relative flex flex-col justify-between w-full ",children:[e.jsxs("div",{className:"flex items-center w-full gap-[2vh]",children:[e.jsx("div",{className:"flex-1 text-[2.5vh] font-bold w-0 overflow-hidden text-ellipsis whitespace-nowrap ",children:s.movieTitle}),e.jsx("div",{className:" text-[1.5vh] text-textGray",children:`D-${c(s.endAt)}`})]}),e.jsx(b,{type:"progress-bar",attendCnt:s.participantCount,goalCnt:s.recruitedCount})]})]}),e.jsx("button",{className:"p-[1vh] border border-textGray rounded-[1vh] text-[2vh]",onClick:a,children:"펀딩취소"}),r&&e.jsx(C,{id:s.id,orderUuid:s.orderUuid,handleClickFalse:n})]})},A=()=>{const[s,r]=l.useState([]),o=N();return l.useEffect(()=>{(async()=>{try{const{data:n}=await o.get("/fundings/participation");console.log(n.joinFundingResponseList),r(n.joinFundingResponseList)}catch(n){console.log(n)}})()},[]),e.jsxs("div",{className:"flex flex-col FundingProgress",children:[e.jsx(g,{centerText:"무딩중"}),e.jsx("div",{className:"none-scroll h-[93vh] overflow-auto p-[3vh] flex flex-col gap-[3vh] relative",children:s.length?s.map(a=>e.jsx(F,{item:a},a.id)):e.jsx(y,{content:"진행 중인 펀딩이 없습니다."})})]})};export{A as default};
