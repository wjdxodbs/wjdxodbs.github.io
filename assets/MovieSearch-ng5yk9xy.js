import{r as s,j as e,L as c}from"./index-COAnT1ag.js";import{N as w}from"./NoneNavHeader-C4i4OJLn.js";import{M as d}from"./MovieListItem-D5uWR4jW.js";import{u as m}from"./useQuery-BHIa1P4T.js";import{c as D,d as R}from"./movie-DU7qHJSF.js";import"./index--05Lzcyg.js";import"./iconBase-C_KlNhWT.js";import"./index-DNl-2OPf.js";import"./commons-BJ5SslBL.js";import"./axios-Bo0ATomq.js";const L=()=>{const a=new Date,h=`${a.getFullYear()}년 ${a.getMonth()+1}월 ${a.getDate()}일`,u=a.getHours()-1,[v,x]=s.useState([]),{data:r}=m({queryKey:["nowRanking"],queryFn:()=>D()}),[l,g]=s.useState(""),[i,p]=s.useState(""),[o,j]=s.useState(!0),[f,y]=s.useState([]),{data:n}=m({queryKey:["searchResult",i],queryFn:()=>i.length===0?Promise.resolve([]):R(i)}),N=t=>{t.key==="Enter"&&(console.log(l),p(l),j(!1))};return s.useEffect(()=>{r&&(x(r),console.log(r)),n&&y(n)},[r,n]),e.jsxs("div",{className:"movie-search relative",children:[e.jsx(w,{}),e.jsx("div",{className:"absolute inline-block left-[50%] translate-x-[-50%] top-[1.4vh] w-[80%]",children:e.jsx("input",{className:"search-input w-[100%] h-[5vh] ml-3 p-3 bg-bgGray text-white ",type:"text",placeholder:"영화 제목, 배우로 검색해보세요",value:l,onChange:t=>g(t.target.value),onKeyDown:N})}),e.jsxs("div",{className:"p-5",children:[o&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-end gap-4 mb-10",children:[e.jsx("div",{children:"실시간 인기 영화"}),e.jsxs("div",{className:"text-[1.5vh] text-gray-500",children:[h," ",u,":00 기준"]})]}),e.jsx("div",{className:"grid grid-cols-2 gap-8 p-2",children:v.map(t=>e.jsxs(c,{to:`/fund/list/${t.movieId}`,className:"relative",state:{type:"list"},children:[e.jsx("div",{className:"absolute top-[-20px] z-[1] text-white",children:t.movieId}),e.jsx(d,{state:t.status,url:t.poster,heigth:"25vh"})]},t.movieId))})]}),!o&&e.jsxs("div",{children:[e.jsx("div",{className:"flex items-end gap-4 mb-5",children:e.jsxs("div",{className:" text-gray-500",children:['"',i,'"으로 검색한 결과입니다.']})}),e.jsx("div",{className:"grid grid-cols-2 gap-8 p-2",children:f.map(t=>e.jsx(c,{to:`/fund/list/${t.movieId}`,className:"relative",state:{type:"search"},children:e.jsx(d,{state:t.status,url:t.poster,heigth:"25vh"})},t.movieId))})]})]})]})};export{L as default};
